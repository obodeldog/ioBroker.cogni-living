const a0_0x94cfc7=a0_0x1a2e;(function(_0x44fc91,_0xc8ff58){const _0x5d206f=a0_0x1a2e,_0x4a9348=_0x44fc91();while(!![]){try{const _0x553692=-parseInt(_0x5d206f(0x2c1))/0x1*(parseInt(_0x5d206f(0x2e7))/0x2)+parseInt(_0x5d206f(0x29a))/0x3*(parseInt(_0x5d206f(0x276))/0x4)+parseInt(_0x5d206f(0x21f))/0x5+parseInt(_0x5d206f(0x248))/0x6+parseInt(_0x5d206f(0x2d1))/0x7*(parseInt(_0x5d206f(0x3fa))/0x8)+-parseInt(_0x5d206f(0x3c2))/0x9+parseInt(_0x5d206f(0x270))/0xa*(parseInt(_0x5d206f(0x381))/0xb);if(_0x553692===_0xc8ff58)break;else _0x4a9348['push'](_0x4a9348['shift']());}catch(_0x11d3e8){_0x4a9348['push'](_0x4a9348['shift']());}}}(a0_0x364c,0x9d12d));const a0_0x3146fd=(function(){let _0x49f125=!![];return function(_0x58eb28,_0x49ab46){const _0x3e06fb=_0x49f125?function(){const _0x49eba7=a0_0x1a2e;if(_0x49ab46){const _0x2bfdef=_0x49ab46[_0x49eba7(0x3a8)](_0x58eb28,arguments);return _0x49ab46=null,_0x2bfdef;}}:function(){};return _0x49f125=![],_0x3e06fb;};}()),a0_0x5e15b9=a0_0x3146fd(this,function(){const _0x21c80d=a0_0x1a2e;return a0_0x5e15b9[_0x21c80d(0x383)]()[_0x21c80d(0x35e)]('(((.+)+)+)+$')[_0x21c80d(0x383)]()[_0x21c80d(0x280)](a0_0x5e15b9)['search'](_0x21c80d(0x2b9));});a0_0x5e15b9();'use strict';const utils=require(a0_0x94cfc7(0x27e)),{GoogleGenerativeAI}=require('@google/generative-ai'),schedule=require('node-schedule'),{spawn,exec}=require(a0_0x94cfc7(0x21e)),path=require(a0_0x94cfc7(0x35d)),HISTORY_MAX_SIZE=0x32,RAW_LOG_MAX_SIZE=0x5dc,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL=a0_0x94cfc7(0x235),LTM_SCHEDULE=a0_0x94cfc7(0x38b),MODE_RESET_SCHEDULE=a0_0x94cfc7(0x382),ANALYSIS_HISTORY_MAX_SIZE=0x64,EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,SEQUENCE_TIMEOUT_MS=0x5*0x3c*0x3e8,MAX_TRAINING_SET_SIZE=0x1f4,THERMO_LOG_SIZE=0x3e8,LTM_DP_RAW_LOG=a0_0x94cfc7(0x3ff),LTM_DP_DAILY_DIGESTS='LTM.dailyDigests',LTM_DP_STATUS=a0_0x94cfc7(0x332),LTM_DP_TRIGGER_DIGEST=a0_0x94cfc7(0x38f),LTM_DP_BASELINE_STATUS='LTM.baselineStatus',LTM_DP_DRIFT_CHANNEL=a0_0x94cfc7(0x340),LTM_DP_DRIFT_STATUS=a0_0x94cfc7(0x258),LTM_DP_DRIFT_DETAILS=a0_0x94cfc7(0x36c),LTM_DP_DRIFT_LAST_CHECK=a0_0x94cfc7(0x33e),SYSTEM_DP_MODE='system.mode',HARD_IGNORE_TERMS=[a0_0x94cfc7(0x2b8),a0_0x94cfc7(0x25a),a0_0x94cfc7(0x261),'unreach',a0_0x94cfc7(0x2e3),a0_0x94cfc7(0x25b),a0_0x94cfc7(0x24a),a0_0x94cfc7(0x301),a0_0x94cfc7(0x30f),'fault','working','direction','stick_unreach','config_pending',a0_0x94cfc7(0x324),a0_0x94cfc7(0x2bf),a0_0x94cfc7(0x365),'link_quality'],BAD_NAMES=['targetposition',a0_0x94cfc7(0x269),a0_0x94cfc7(0x41d),a0_0x94cfc7(0x416),a0_0x94cfc7(0x241),a0_0x94cfc7(0x36a),'on',a0_0x94cfc7(0x226),'switch','position','shutter',a0_0x94cfc7(0x3d4),a0_0x94cfc7(0x364),a0_0x94cfc7(0x21d),'motion',a0_0x94cfc7(0x393),a0_0x94cfc7(0x3f4),a0_0x94cfc7(0x402),a0_0x94cfc7(0x3a2),a0_0x94cfc7(0x37f),'energy','setpoint',a0_0x94cfc7(0x3e9),a0_0x94cfc7(0x290),'set_temperature'],ADAPTER_BLACKLIST=[a0_0x94cfc7(0x296),a0_0x94cfc7(0x315),a0_0x94cfc7(0x255),a0_0x94cfc7(0x323),a0_0x94cfc7(0x22b),'material.',a0_0x94cfc7(0x2e9),a0_0x94cfc7(0x372),a0_0x94cfc7(0x24f),a0_0x94cfc7(0x282),'simple-api.'],SYSTEM_MODES={'NORMAL':a0_0x94cfc7(0x425),'VACATION':'vacation','PARTY':a0_0x94cfc7(0x2f8),'GUEST':'guest'},AUTO_RESET_MODES=[SYSTEM_MODES[a0_0x94cfc7(0x31f)],SYSTEM_MODES[a0_0x94cfc7(0x313)]],PERSONA_MAPPING={'generic':'Analysiere\x20ausgewogen.','senior_aal':'PRIORIT√ÑT:\x20Gesundheit/AAL.','family':a0_0x94cfc7(0x3dc),'single_comfort':a0_0x94cfc7(0x265),'security':'PRIORIT√ÑT:\x20Sicherheit.'},ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};function a0_0x1a2e(_0xbb9e31,_0x39996a){const _0x330d4f=a0_0x364c();return a0_0x1a2e=function(_0x5e15b9,_0x3146fd){_0x5e15b9=_0x5e15b9-0x1f4;let _0x364cd5=_0x330d4f[_0x5e15b9];return _0x364cd5;},a0_0x1a2e(_0xbb9e31,_0x39996a);}let activeSequence=[],sequenceTimer=null;async function initZombies(_0x33c131){const _0x1c819e=a0_0x94cfc7;try{const _0x4cebe9=[_0x1c819e(0x277),_0x1c819e(0x294)];for(const _0x3c66e7 of _0x4cebe9){try{const _0x3af0d5=await _0x33c131[_0x1c819e(0x2f9)](_0x3c66e7);_0x3af0d5&&await _0x33c131[_0x1c819e(0x41e)](_0x3c66e7);}catch(_0x30f8e4){}}}catch(_0x598a6b){}}async function initHistory(_0x334286){const _0x5914ed=a0_0x94cfc7;try{const _0x4e2a2c=await _0x334286[_0x5914ed(0x3e5)](_0x5914ed(0x260));_0x4e2a2c&&_0x4e2a2c[_0x5914ed(0x236)]&&(_0x334286[_0x5914ed(0x2bd)]=JSON[_0x5914ed(0x284)](_0x4e2a2c[_0x5914ed(0x236)][_0x5914ed(0x383)]()));}catch(_0x2bcd8d){_0x334286['eventHistory']=[];}try{const _0x393fae=await _0x334286[_0x5914ed(0x3e5)](_0x5914ed(0x215));if(_0x393fae&&_0x393fae[_0x5914ed(0x236)])_0x334286['analysisHistory']=JSON[_0x5914ed(0x284)](_0x393fae['val'][_0x5914ed(0x383)]());}catch(_0x1c61a7){_0x334286['analysisHistory']=[];}if(_0x334286[_0x5914ed(0x2bd)]&&_0x334286[_0x5914ed(0x2bd)][_0x5914ed(0x3e0)]>0x0){_0x334286['log'][_0x5914ed(0x273)](_0x5914ed(0x22e)+_0x334286[_0x5914ed(0x2bd)][_0x5914ed(0x3e0)]+_0x5914ed(0x35a));for(let _0x19fa8f=_0x334286[_0x5914ed(0x2bd)][_0x5914ed(0x3e0)]-0x1;_0x19fa8f>=0x0;_0x19fa8f--){const _0x2f5dc6=_0x334286[_0x5914ed(0x2bd)][_0x19fa8f];_0x2f5dc6&&_0x2f5dc6['id']!==undefined&&_0x2f5dc6['value']!==undefined&&(_0x334286[_0x5914ed(0x384)][_0x2f5dc6['id']]=_0x2f5dc6[_0x5914ed(0x241)]);}}}async function initSystemConfig(_0x3ad539){const _0x39ebbd=a0_0x94cfc7;try{const _0x281a05=await _0x3ad539[_0x39ebbd(0x353)](_0x39ebbd(0x2c8));_0x281a05&&_0x281a05[_0x39ebbd(0x405)]&&(_0x3ad539[_0x39ebbd(0x231)]={'latitude':_0x281a05['common'][_0x39ebbd(0x233)]||0x0,'longitude':_0x281a05[_0x39ebbd(0x405)]['longitude']||0x0,'city':_0x281a05[_0x39ebbd(0x405)]['city']||''});}catch(_0x465d17){}}async function checkLicense(_0x58ad9a,_0x668a1e){const _0x221e97=a0_0x94cfc7;if(!_0x668a1e)return![];_0x58ad9a['systemUUID']=await getSystemUUID(_0x58ad9a);if(_0x668a1e===_0x221e97(0x344)||_0x668a1e[_0x221e97(0x2bb)](_0x221e97(0x429)))return!![];return![];}async function getSystemUUID(_0x530ffa){const _0x47c0cf=a0_0x94cfc7;try{const _0x10ab90=await _0x530ffa['getForeignObjectAsync'](_0x47c0cf(0x38d));if(_0x10ab90&&_0x10ab90[_0x47c0cf(0x412)]&&_0x10ab90[_0x47c0cf(0x412)][_0x47c0cf(0x20f)])return _0x10ab90[_0x47c0cf(0x412)][_0x47c0cf(0x20f)];return _0x47c0cf(0x26c);}catch(_0x16fe90){return _0x47c0cf(0x23a);}}async function createAllObjects(_0x132716){const _0x1e936a=a0_0x94cfc7;await checkSystemObjects(_0x132716),await _0x132716['setObjectNotExistsAsync']('system.presenceWho',{'type':_0x1e936a(0x41d),'common':{'name':_0x1e936a(0x225),'type':'string','role':'text','read':!![],'write':![],'def':''},'native':{}}),await _0x132716['setObjectNotExistsAsync'](_0x1e936a(0x3b0),{'type':_0x1e936a(0x41d),'common':{'name':_0x1e936a(0x3c5),'type':_0x1e936a(0x35b),'role':_0x1e936a(0x27c),'read':!![],'write':![]},'native':{}}),await _0x132716[_0x1e936a(0x2ff)](_0x1e936a(0x260),{'type':_0x1e936a(0x41d),'common':{'name':'Event\x20History','type':_0x1e936a(0x35b),'role':_0x1e936a(0x27c),'read':!![],'write':![]},'native':{}}),await _0x132716[_0x1e936a(0x2ff)](_0x1e936a(0x23b),{'type':_0x1e936a(0x41d),'common':{'name':_0x1e936a(0x200),'type':_0x1e936a(0x3e4),'role':_0x1e936a(0x358),'read':!![],'write':!![],'def':![]},'native':{}}),await _0x132716[_0x1e936a(0x2ff)](_0x1e936a(0x33c),{'type':_0x1e936a(0x41d),'common':{'name':_0x1e936a(0x356),'type':'boolean','role':'button','read':!![],'write':!![],'def':![]},'native':{}}),await _0x132716['extendObjectAsync'](_0x1e936a(0x2e4),{'type':_0x1e936a(0x28c),'common':{'name':'AI\x20Training\x20Control'},'native':{}}),await _0x132716[_0x1e936a(0x2ff)]('analysis.training.triggerSecurity',{'type':_0x1e936a(0x41d),'common':{'name':_0x1e936a(0x23d),'type':_0x1e936a(0x3e4),'role':_0x1e936a(0x358),'read':!![],'write':!![],'def':![]},'native':{}}),await _0x132716[_0x1e936a(0x2ff)]('analysis.training.status',{'type':_0x1e936a(0x41d),'common':{'name':_0x1e936a(0x362),'type':_0x1e936a(0x35b),'role':'text','read':!![],'write':![],'def':_0x1e936a(0x2f4)},'native':{}}),await _0x132716[_0x1e936a(0x3e1)](_0x1e936a(0x268),{'type':_0x1e936a(0x28c),'common':{'name':_0x1e936a(0x316)},'native':{}}),await _0x132716[_0x1e936a(0x2ff)](_0x1e936a(0x37c),{'type':_0x1e936a(0x41d),'common':{'name':_0x1e936a(0x254),'type':'number','role':_0x1e936a(0x241),'read':!![],'write':![],'def':0x0},'native':{}}),await _0x132716['setObjectNotExistsAsync'](_0x1e936a(0x368),{'type':_0x1e936a(0x41d),'common':{'name':_0x1e936a(0x3ef),'type':_0x1e936a(0x35b),'role':_0x1e936a(0x39c),'read':!![],'write':![],'def':''},'native':{}}),await _0x132716['setObjectNotExistsAsync'](_0x1e936a(0x352),{'type':'state','common':{'name':_0x1e936a(0x417),'type':_0x1e936a(0x35b),'role':_0x1e936a(0x27c),'read':!![],'write':![]},'native':{}}),await _0x132716[_0x1e936a(0x2ff)](_0x1e936a(0x20b),{'type':_0x1e936a(0x41d),'common':{'name':_0x1e936a(0x253),'type':_0x1e936a(0x3e4),'role':'indicator.alarm','read':!![],'write':![],'def':![]},'native':{}}),await _0x132716[_0x1e936a(0x2ff)](_0x1e936a(0x272),{'type':_0x1e936a(0x41d),'common':{'name':_0x1e936a(0x25e),'type':'boolean','role':'indicator.alarm.fire','read':!![],'write':![],'def':![]},'native':{}}),await _0x132716['setObjectNotExistsAsync'](_0x1e936a(0x342),{'type':_0x1e936a(0x41d),'common':{'name':_0x1e936a(0x2e0),'type':_0x1e936a(0x35b),'role':'text.alarm','read':!![],'write':![]},'native':{}}),await _0x132716['setObjectNotExistsAsync'](_0x1e936a(0x322),{'type':'state','common':{'name':_0x1e936a(0x326),'type':_0x1e936a(0x35b),'role':_0x1e936a(0x369),'read':!![],'write':![]},'native':{}}),await _0x132716[_0x1e936a(0x2ff)](_0x1e936a(0x34f),{'type':_0x1e936a(0x41d),'common':{'name':_0x1e936a(0x3ea),'type':_0x1e936a(0x35b),'role':_0x1e936a(0x41d),'read':!![],'write':![],'def':_0x1e936a(0x3a6)},'native':{}}),await _0x132716['setObjectNotExistsAsync'](_0x1e936a(0x1f8),{'type':_0x1e936a(0x41d),'common':{'name':_0x1e936a(0x3ec),'type':_0x1e936a(0x35b),'role':_0x1e936a(0x369),'read':!![],'write':![]},'native':{}}),await _0x132716[_0x1e936a(0x2ff)](_0x1e936a(0x279),{'type':'state','common':{'name':_0x1e936a(0x2ac),'type':_0x1e936a(0x35b),'role':_0x1e936a(0x369),'read':!![],'write':![]},'native':{}}),await _0x132716[_0x1e936a(0x3e1)](_0x1e936a(0x285),{'type':_0x1e936a(0x28c),'common':{'name':_0x1e936a(0x3da)},'native':{}}),await _0x132716[_0x1e936a(0x2ff)](_0x1e936a(0x2f2),{'type':_0x1e936a(0x41d),'common':{'name':'Pattern\x20Detected','type':_0x1e936a(0x3e4),'role':'indicator','read':!![],'write':![],'def':![]},'native':{}}),await _0x132716[_0x1e936a(0x2ff)]('analysis.automation.description',{'type':_0x1e936a(0x41d),'common':{'name':'Description','type':_0x1e936a(0x35b),'role':_0x1e936a(0x369),'read':!![],'write':![]},'native':{}}),await _0x132716[_0x1e936a(0x2ff)](_0x1e936a(0x3fc),{'type':'state','common':{'name':'Action','type':_0x1e936a(0x35b),'role':'text','read':!![],'write':![]},'native':{}}),await _0x132716[_0x1e936a(0x2ff)](_0x1e936a(0x247),{'type':_0x1e936a(0x41d),'common':{'name':_0x1e936a(0x2a4),'type':_0x1e936a(0x35b),'role':_0x1e936a(0x369),'read':!![],'write':![]},'native':{}}),await _0x132716[_0x1e936a(0x2ff)](_0x1e936a(0x3d9),{'type':'state','common':{'name':_0x1e936a(0x39a),'type':_0x1e936a(0x35b),'role':_0x1e936a(0x369),'read':!![],'write':![]},'native':{}}),await _0x132716[_0x1e936a(0x2ff)]('analysis.automation.autoApply',{'type':_0x1e936a(0x41d),'common':{'name':_0x1e936a(0x228),'type':_0x1e936a(0x3e4),'role':'switch','read':!![],'write':!![],'def':![]},'native':{}}),await _0x132716[_0x1e936a(0x2ff)](_0x1e936a(0x2f3),{'type':_0x1e936a(0x41d),'common':{'name':_0x1e936a(0x232),'type':_0x1e936a(0x3e4),'role':_0x1e936a(0x358),'read':!![],'write':!![],'def':![]},'native':{}}),await _0x132716[_0x1e936a(0x2ff)](_0x1e936a(0x215),{'type':'state','common':{'name':_0x1e936a(0x217),'type':_0x1e936a(0x35b),'role':'json','read':!![],'write':![],'def':'[]'},'native':{}}),await _0x132716[_0x1e936a(0x2ff)]('analysis.feedbackHistory',{'type':_0x1e936a(0x41d),'common':{'name':_0x1e936a(0x403),'type':'string','role':_0x1e936a(0x27c),'read':!![],'write':![],'def':'[]'},'native':{}}),await _0x132716[_0x1e936a(0x3e1)]('analysis.health',{'type':_0x1e936a(0x28c),'common':{'name':_0x1e936a(0x267)},'native':{}}),await _0x132716[_0x1e936a(0x2ff)](_0x1e936a(0x213),{'type':_0x1e936a(0x41d),'common':{'name':'Sleep\x20Score\x20(0-100)','type':_0x1e936a(0x345),'role':'value.health','read':!![],'write':![],'def':0x0},'native':{}}),await _0x132716[_0x1e936a(0x2ff)](_0x1e936a(0x31c),{'type':_0x1e936a(0x41d),'common':{'name':_0x1e936a(0x423),'type':_0x1e936a(0x35b),'role':_0x1e936a(0x369),'read':!![],'write':![],'def':'none'},'native':{}}),await _0x132716['setObjectNotExistsAsync']('analysis.health.notes',{'type':_0x1e936a(0x41d),'common':{'name':_0x1e936a(0x335),'type':_0x1e936a(0x35b),'role':_0x1e936a(0x369),'read':!![],'write':![],'def':''},'native':{}}),await _0x132716[_0x1e936a(0x2ff)](_0x1e936a(0x210),{'type':_0x1e936a(0x41d),'common':{'name':'Trend\x20Diagnosis\x20(Python)','type':_0x1e936a(0x35b),'role':_0x1e936a(0x369),'read':!![],'write':![],'def':_0x1e936a(0x3a6)},'native':{}}),await _0x132716[_0x1e936a(0x2ff)](_0x1e936a(0x3f1),{'type':'state','common':{'name':_0x1e936a(0x218),'type':_0x1e936a(0x345),'role':_0x1e936a(0x241),'read':!![],'write':![],'def':0x0},'native':{}}),await _0x132716['extendObjectAsync']('LTM.trainingData',{'type':_0x1e936a(0x28c),'common':{'name':_0x1e936a(0x407)},'native':{}}),await _0x132716[_0x1e936a(0x2ff)]('LTM.trainingData.sequences',{'type':_0x1e936a(0x41d),'common':{'name':_0x1e936a(0x2ea),'type':_0x1e936a(0x35b),'role':_0x1e936a(0x27c),'read':!![],'write':![],'def':'[]','desc':_0x1e936a(0x3d1)},'native':{}}),await _0x132716[_0x1e936a(0x2ff)](_0x1e936a(0x237),{'type':'state','common':{'name':_0x1e936a(0x27b),'type':_0x1e936a(0x35b),'role':_0x1e936a(0x27c),'read':!![],'write':![],'def':'[]','desc':_0x1e936a(0x3be)},'native':{}}),await checkLtmObjects(_0x132716),await checkLtmDriftObjects(_0x132716);}async function checkSystemObjects(_0x38f7cf){const _0xd14e93=a0_0x94cfc7;await _0x38f7cf[_0xd14e93(0x3e1)]('system',{'type':_0xd14e93(0x28c),'common':{'name':_0xd14e93(0x3a9)},'native':{}}),await _0x38f7cf[_0xd14e93(0x3e1)](SYSTEM_DP_MODE,{'type':_0xd14e93(0x41d),'common':{'name':'System\x20Mode','type':_0xd14e93(0x35b),'role':'state','read':!![],'write':!![],'def':SYSTEM_MODES['NORMAL'],'states':{[SYSTEM_MODES[_0xd14e93(0x2fb)]]:'Normal',[SYSTEM_MODES[_0xd14e93(0x264)]]:'Urlaub',[SYSTEM_MODES['PARTY']]:_0xd14e93(0x31a),[SYSTEM_MODES['GUEST']]:_0xd14e93(0x426)}},'native':{}});}async function checkLtmObjects(_0x39c985){const _0xfc723a=a0_0x94cfc7;await _0x39c985[_0xfc723a(0x3e1)](_0xfc723a(0x224),{'type':_0xfc723a(0x28c),'common':{'name':'LTM'},'native':{}}),await _0x39c985[_0xfc723a(0x3e1)](LTM_DP_RAW_LOG,{'type':'state','common':{'name':'Raw\x20Log','type':_0xfc723a(0x35b),'role':_0xfc723a(0x27c),'read':!![],'write':![]},'native':{}}),await _0x39c985['extendObjectAsync'](LTM_DP_DAILY_DIGESTS,{'type':_0xfc723a(0x41d),'common':{'name':_0xfc723a(0x355),'type':_0xfc723a(0x35b),'role':'json','read':!![],'write':![]},'native':{}}),await _0x39c985[_0xfc723a(0x3e1)](LTM_DP_STATUS,{'type':_0xfc723a(0x41d),'common':{'name':_0xfc723a(0x3c9),'type':'string','role':_0xfc723a(0x369),'read':!![],'write':![]},'native':{}}),await _0x39c985[_0xfc723a(0x3e1)](LTM_DP_TRIGGER_DIGEST,{'type':_0xfc723a(0x41d),'common':{'name':_0xfc723a(0x3b1),'type':_0xfc723a(0x3e4),'role':'button','read':!![],'write':!![],'def':![]},'native':{}}),await _0x39c985[_0xfc723a(0x3e1)](LTM_DP_BASELINE_STATUS,{'type':_0xfc723a(0x41d),'common':{'name':_0xfc723a(0x3d6),'type':_0xfc723a(0x35b),'role':_0xfc723a(0x369),'read':!![],'write':![]},'native':{}});}async function checkLtmDriftObjects(_0x1163b4){const _0x3b54bc=a0_0x94cfc7;await _0x1163b4[_0x3b54bc(0x3e1)](LTM_DP_DRIFT_CHANNEL,{'type':_0x3b54bc(0x28c),'common':{'name':'Drift\x20Analysis'},'native':{}}),await _0x1163b4[_0x3b54bc(0x3e1)](LTM_DP_DRIFT_STATUS,{'type':_0x3b54bc(0x41d),'common':{'name':_0x3b54bc(0x343),'type':_0x3b54bc(0x35b),'role':'state','read':!![],'write':![],'def':_0x3b54bc(0x3a6)},'native':{}}),await _0x1163b4[_0x3b54bc(0x3e1)](LTM_DP_DRIFT_DETAILS,{'type':_0x3b54bc(0x41d),'common':{'name':_0x3b54bc(0x311),'type':_0x3b54bc(0x35b),'role':'text','read':!![],'write':![]},'native':{}}),await _0x1163b4[_0x3b54bc(0x3e1)](LTM_DP_DRIFT_LAST_CHECK,{'type':_0x3b54bc(0x41d),'common':{'name':'Last\x20Check','type':_0x3b54bc(0x345),'role':_0x3b54bc(0x39c),'read':!![],'write':![]},'native':{}});}async function loadSystemMode(_0x1804c2){const _0x1ec421=a0_0x94cfc7;try{const _0x59ac19=await _0x1804c2['getStateAsync'](SYSTEM_DP_MODE);_0x59ac19&&_0x59ac19[_0x1ec421(0x236)]&&Object[_0x1ec421(0x2cc)](SYSTEM_MODES)[_0x1ec421(0x408)](_0x59ac19[_0x1ec421(0x236)])?_0x1804c2[_0x1ec421(0x3f9)]=_0x59ac19[_0x1ec421(0x236)]:(_0x1804c2['currentSystemMode']=SYSTEM_MODES['NORMAL'],await _0x1804c2[_0x1ec421(0x306)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x1ec421(0x2fb)],'ack':!![]}));}catch(_0x545978){_0x1804c2[_0x1ec421(0x3f9)]=SYSTEM_MODES[_0x1ec421(0x2fb)];}}async function loadRawEventLog(_0xab0e6a){const _0x5cba8a=a0_0x94cfc7;try{const _0x3dcf31=await _0xab0e6a[_0x5cba8a(0x3e5)](LTM_DP_RAW_LOG);if(_0x3dcf31&&_0x3dcf31['val'])_0xab0e6a[_0x5cba8a(0x331)]=JSON['parse'](_0x3dcf31[_0x5cba8a(0x236)]);}catch(_0x48ef18){_0xab0e6a[_0x5cba8a(0x331)]=[];}}async function saveRawEventLog(_0x40f02a){const _0x533834=a0_0x94cfc7;_0x40f02a[_0x533834(0x331)][_0x533834(0x3e0)]>RAW_LOG_MAX_SIZE&&_0x40f02a[_0x533834(0x331)]['splice'](0x0,_0x40f02a[_0x533834(0x331)]['length']-RAW_LOG_MAX_SIZE),await _0x40f02a[_0x533834(0x306)](LTM_DP_RAW_LOG,{'val':JSON[_0x533834(0x38e)](_0x40f02a[_0x533834(0x331)]),'ack':!![]});}async function loadDailyDigests(_0x1da6de){const _0x2b1d6a=a0_0x94cfc7;try{const _0x486028=await _0x1da6de[_0x2b1d6a(0x3e5)](LTM_DP_DAILY_DIGESTS);if(_0x486028&&_0x486028[_0x2b1d6a(0x236)])_0x1da6de['dailyDigests']=JSON[_0x2b1d6a(0x284)](_0x486028[_0x2b1d6a(0x236)]);}catch(_0xf992ca){_0x1da6de[_0x2b1d6a(0x395)]=[];}await updateBaselineStatus(_0x1da6de);}async function saveDailyDigests(_0x385c3f,_0x3410f6=!![]){const _0x1093ce=a0_0x94cfc7,_0x1a2822=_0x385c3f['config'][_0x1093ce(0x411)]||0x3c;_0x385c3f['dailyDigests']['length']>_0x1a2822&&_0x385c3f[_0x1093ce(0x395)][_0x1093ce(0x334)](0x0,_0x385c3f['dailyDigests']['length']-_0x1a2822);await _0x385c3f['setStateAsync'](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x1093ce(0x38e)](_0x385c3f[_0x1093ce(0x395)]),'ack':!![]});if(_0x3410f6)await updateBaselineStatus(_0x385c3f);}async function updateAnalysisHistory(_0x2d0496,_0xaa701d){const _0x4ed8d1=a0_0x94cfc7;_0x2d0496[_0x4ed8d1(0x256)][_0x4ed8d1(0x3ba)](_0xaa701d);if(_0x2d0496[_0x4ed8d1(0x256)][_0x4ed8d1(0x3e0)]>ANALYSIS_HISTORY_MAX_SIZE)_0x2d0496[_0x4ed8d1(0x256)]['pop']();await _0x2d0496[_0x4ed8d1(0x306)](_0x4ed8d1(0x215),{'val':JSON[_0x4ed8d1(0x38e)](_0x2d0496['analysisHistory']),'ack':!![]});}async function updateBaselineStatus(_0x9b929f){const _0x43b985=a0_0x94cfc7;if(!_0x9b929f[_0x43b985(0x2a8)]){await _0x9b929f[_0x43b985(0x306)](LTM_DP_BASELINE_STATUS,{'val':'Deaktiviert\x20(Pro-Feature)','ack':!![]});return;}const _0x227b50=_0x9b929f[_0x43b985(0x395)][_0x43b985(0x3e0)]>=(_0x9b929f[_0x43b985(0x377)]['minDaysForBaseline']||0x7)?'Aktiv\x20('+_0x9b929f[_0x43b985(0x395)][_0x43b985(0x3e0)]+_0x43b985(0x363):_0x43b985(0x1fd)+_0x9b929f[_0x43b985(0x395)][_0x43b985(0x3e0)]+'/'+(_0x9b929f[_0x43b985(0x377)]['minDaysForBaseline']||0x7)+')';await _0x9b929f[_0x43b985(0x306)](LTM_DP_BASELINE_STATUS,{'val':_0x227b50,'ack':!![]});}async function initSensorSubscriptions(_0x1a9692){const _0x22de3a=a0_0x94cfc7,_0x4ed676=_0x1a9692[_0x22de3a(0x377)][_0x22de3a(0x41f)];if(_0x4ed676&&_0x4ed676[_0x22de3a(0x3e0)]>0x0){_0x1a9692[_0x22de3a(0x288)][_0x22de3a(0x273)](_0x22de3a(0x2e5)+_0x4ed676[_0x22de3a(0x3e0)]+_0x22de3a(0x33f));for(const _0x48beb1 of _0x4ed676){if(_0x48beb1['id']){await _0x1a9692[_0x22de3a(0x22c)](_0x48beb1['id']);try{const _0x2fe7d6=await _0x1a9692[_0x22de3a(0x386)](_0x48beb1['id']);if(_0x2fe7d6)_0x1a9692[_0x22de3a(0x384)][_0x48beb1['id']]=_0x2fe7d6[_0x22de3a(0x236)];}catch(_0x4185d0){}}}}}async function initPresenceSubscriptions(_0x43e520){const _0x1a68e3=a0_0x94cfc7,_0x2e5874=_0x43e520[_0x1a68e3(0x377)][_0x1a68e3(0x3ce)]||[];if(_0x2e5874[_0x1a68e3(0x3e0)]>0x0){_0x43e520[_0x1a68e3(0x288)][_0x1a68e3(0x273)]('Subscribing\x20to\x20'+_0x2e5874[_0x1a68e3(0x3e0)]+_0x1a68e3(0x31d));for(const _0x236a83 of _0x2e5874){await _0x43e520['subscribeForeignStatesAsync'](_0x236a83);}try{await checkWifiPresence(_0x43e520);}catch(_0x5b37fc){}}}async function getWeatherContext(_0x1312d9){const _0x59da53=a0_0x94cfc7;try{if(!_0x1312d9[_0x59da53(0x377)][_0x59da53(0x221)])return _0x59da53(0x3e6);let _0x446b54='';const _0x27866d=_0x1312d9[_0x59da53(0x377)][_0x59da53(0x262)];if(_0x27866d)try{if(_0x27866d[_0x59da53(0x408)](_0x59da53(0x424))){const _0x46e6f2=await _0x1312d9[_0x59da53(0x386)](_0x27866d+_0x59da53(0x3b6));if(_0x46e6f2&&_0x46e6f2['val'])_0x446b54=_0x46e6f2[_0x59da53(0x236)];}else{if(_0x27866d[_0x59da53(0x408)](_0x59da53(0x398))){const _0x16b2ef=await _0x1312d9['getForeignStateAsync'](_0x27866d+_0x59da53(0x293));if(_0x16b2ef&&_0x16b2ef['val'])_0x446b54=_0x16b2ef[_0x59da53(0x236)];}else{if(_0x27866d[_0x59da53(0x408)](_0x59da53(0x22f))){const _0x592d44=await _0x1312d9['getForeignStateAsync'](_0x27866d+'.forecast.current.state');if(_0x592d44&&_0x592d44[_0x59da53(0x236)])_0x446b54=_0x592d44[_0x59da53(0x236)];}}}}catch(_0x97c690){}if(!_0x446b54){const _0x2c68e3=['accuweather.0',_0x59da53(0x257),_0x59da53(0x36e),_0x59da53(0x2be)];for(const _0x49717a of _0x2c68e3){try{const _0x2a39d6=await _0x1312d9[_0x59da53(0x353)](_0x49717a);if(_0x2a39d6){if(_0x49717a[_0x59da53(0x408)](_0x59da53(0x424))){const _0x1601fe=await _0x1312d9[_0x59da53(0x386)](_0x49717a+_0x59da53(0x3b6));if(_0x1601fe&&_0x1601fe[_0x59da53(0x236)]){_0x446b54=_0x1601fe[_0x59da53(0x236)];break;}}}}catch(_0x3df933){}}}return _0x446b54?_0x59da53(0x2f1)+_0x446b54:_0x59da53(0x2ce);}catch(_0x5814f2){return _0x59da53(0x2cf)+_0x5814f2[_0x59da53(0x25f)];}}async function getCalendarContext(_0x23204c){const _0x58fd7b=a0_0x94cfc7;try{if(!_0x23204c['config'][_0x58fd7b(0x1fc)])return'Kalender:\x20Deaktiviert';let _0x3b8472=_0x23204c[_0x58fd7b(0x377)][_0x58fd7b(0x302)]||_0x58fd7b(0x2c5),_0x466189=_0x23204c[_0x58fd7b(0x377)][_0x58fd7b(0x240)]||[];if(typeof _0x466189===_0x58fd7b(0x35b))_0x466189=_0x466189[_0x58fd7b(0x2f7)](',');try{const _0x4099bc=await _0x23204c['getForeignStateAsync'](_0x3b8472+'.data.table');if(_0x4099bc&&_0x4099bc[_0x58fd7b(0x236)]){let _0x4fc675=tryParse(_0x4099bc['val']);if(_0x4fc675&&Array[_0x58fd7b(0x3a4)](_0x4fc675)){if(_0x466189[_0x58fd7b(0x3e0)]>0x0)_0x4fc675=_0x4fc675[_0x58fd7b(0x27a)](_0x56b54c=>_0x466189[_0x58fd7b(0x408)](_0x56b54c[_0x58fd7b(0x31e)]||''));else return _0x58fd7b(0x2aa);if(_0x4fc675[_0x58fd7b(0x3e0)]>0x0){const _0x1a5f23=_0x4fc675[_0x58fd7b(0x3b3)](0x0,0x3)[_0x58fd7b(0x308)](_0x511ada=>{const _0xf1115f=_0x58fd7b;let _0x1c2b24=_0x511ada[_0xf1115f(0x39c)];if(_0x511ada[_0xf1115f(0x360)])_0x1c2b24+='\x20'+_0x511ada[_0xf1115f(0x360)];return _0x1c2b24+':\x20'+_0x511ada['event']+'\x20('+_0x511ada[_0xf1115f(0x31e)]+')';});return _0x58fd7b(0x379)+_0x1a5f23[_0x58fd7b(0x380)]('\x20|\x20');}else return'KALENDER:\x20Keine\x20relevanten\x20Termine';}}}catch(_0x7a68c){_0x23204c[_0x58fd7b(0x288)]['warn'](_0x58fd7b(0x3fd)+_0x7a68c['message']);}return _0x58fd7b(0x409);}catch(_0x5c41){return _0x58fd7b(0x307)+_0x5c41[_0x58fd7b(0x25f)];}}async function getCalendarNames(_0x4a2872,_0x563f7a){const _0x52ab31=a0_0x94cfc7;try{const _0x17a5fd=await _0x4a2872[_0x52ab31(0x386)](_0x563f7a+_0x52ab31(0x32a));if(_0x17a5fd&&_0x17a5fd[_0x52ab31(0x236)]){const _0x556afa=tryParse(_0x17a5fd[_0x52ab31(0x236)]);if(_0x556afa&&Array[_0x52ab31(0x3a4)](_0x556afa)){const _0x15f103=[...new Set(_0x556afa[_0x52ab31(0x308)](_0x4af1f7=>_0x4af1f7['_calName'])[_0x52ab31(0x27a)](Boolean))];return _0x15f103['sort']();}}return[];}catch(_0x262a8b){return _0x4a2872[_0x52ab31(0x288)][_0x52ab31(0x30f)](_0x52ab31(0x39f)+_0x262a8b[_0x52ab31(0x25f)]),[];}}async function checkWifiPresence(_0x82cd18){const _0x4e06f5=a0_0x94cfc7;try{const _0x7bd5fc=_0x82cd18[_0x4e06f5(0x377)]['presenceDevices']||[];let _0x354f80=![];const _0x198b6c=[];for(const _0x4ca3d6 of _0x7bd5fc){try{const _0x362799=await _0x82cd18['getForeignStateAsync'](_0x4ca3d6);if(_0x362799&&(_0x362799['val']===!![]||_0x362799['val']===_0x4e06f5(0x2c6)||_0x362799[_0x4e06f5(0x236)]===0x1)){_0x354f80=!![];const _0x2ea8de=await _0x82cd18[_0x4e06f5(0x353)](_0x4ca3d6);let _0x5cb259=_0x4ca3d6;_0x2ea8de&&_0x2ea8de[_0x4e06f5(0x405)]&&_0x2ea8de[_0x4e06f5(0x405)]['name']&&(_0x5cb259=typeof _0x2ea8de[_0x4e06f5(0x405)][_0x4e06f5(0x287)]==='object'?_0x2ea8de['common'][_0x4e06f5(0x287)]['de']||_0x2ea8de[_0x4e06f5(0x405)]['name']['en']:_0x2ea8de[_0x4e06f5(0x405)]['name']),_0x198b6c[_0x4e06f5(0x274)](_0x5cb259);}}catch(_0x2b5f39){}}return await _0x82cd18[_0x4e06f5(0x306)](_0x4e06f5(0x22a),{'val':_0x198b6c[_0x4e06f5(0x380)](',\x20'),'ack':!![]}),_0x354f80&&(_0x82cd18[_0x4e06f5(0x3c4)]&&(_0x82cd18['log'][_0x4e06f5(0x273)](_0x4e06f5(0x243)),abortExitTimer(_0x82cd18)),!_0x82cd18['isPresent']&&_0x82cd18[_0x4e06f5(0x3f9)]===SYSTEM_MODES[_0x4e06f5(0x2fb)]&&await setPresence(_0x82cd18,!![])),_0x354f80;}catch(_0x1833c8){return _0x82cd18[_0x4e06f5(0x288)][_0x4e06f5(0x30f)](_0x4e06f5(0x415)+_0x1833c8['message']),![];}}function startExitTimer(_0x10b536){const _0x269add=a0_0x94cfc7;abortExitTimer(_0x10b536),_0x10b536['isGracePeriodActive']=!![],_0x10b536[_0x269add(0x29f)]=setTimeout(()=>{const _0x1718b0=_0x269add;_0x10b536[_0x1718b0(0x2b6)]=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),_0x10b536[_0x269add(0x3c4)]=setTimeout(()=>{setPresence(_0x10b536,![]),_0x10b536['exitTimer']=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}function abortExitTimer(_0xf50756){const _0x112b9c=a0_0x94cfc7;if(_0xf50756['exitTimer'])clearTimeout(_0xf50756[_0x112b9c(0x3c4)]);if(_0xf50756[_0x112b9c(0x29f)])clearTimeout(_0xf50756[_0x112b9c(0x29f)]);_0xf50756[_0x112b9c(0x3c4)]=null,_0xf50756['exitGraceTimer']=null,_0xf50756[_0x112b9c(0x2b6)]=![];}async function setPresence(_0x258e8d,_0x180b37){const _0x8e0a06=a0_0x94cfc7;if(_0x258e8d[_0x8e0a06(0x30e)]===_0x180b37)return;_0x258e8d[_0x8e0a06(0x30e)]=_0x180b37,await _0x258e8d[_0x8e0a06(0x306)]('system.isPresent',{'val':_0x180b37,'ack':!![]});}function a0_0x364c(){const _0xd70a5e=['requirements.txt','.Summary.Current','bind','IGNORING\x20DUPLICATE\x20(Cached):\x20','ü§ñ\x20BUTLER\x20PROPOSAL:\x20','unshift','.forecast.current.temp','ü§ñ\x20BUTLER:\x20Executing\x20Action\x20->\x20','Adapter','Correlation\x20between\x20Inside\x20Temp,\x20Outside\x20Temp\x20and\x20Time','notifyEmailInstance','[PYTHON]\x20Service\x20exited\x20with\x20code\x20','setState','6588099VjYIyB','health','exitTimer','Last\x20raw\x20event','\x20(Value\x20is\x20falsy:\x20','exports','timestamp','Processing\x20Status','klima','getTime','Missing\x20data','LTM.trainingData.sequences','presenceDevices','systemUUID','üö®\x20EMERGENCY','Array\x20of\x20completed\x20movement\x20paths\x20for\x20ML\x20training','üêç\x20Python\x20Pong\x20received!\x20Latency\x20check\x20passed.','Gemini\x20Analysis\x20Error:\x20','blind','No\x20module\x20named\x20pip','Baseline\x20Status','role','inactivityMonitoringEnabled','analysis.automation.targetValue','Automation\x20Proposals','type','Fokus\x20auf\x20Familienroutinen.','sound','write','Briefing\x20Sched\x20Error:\x20','length','extendObjectAsync','.\x0a\x20\x20\x20\x20ANWESENHEITS_STATUS:\x20','analysis.training.triggerSecurity','boolean','getStateAsync','Wetter:\x20Deaktiviert','getFullYear','communicate.request','valve','Deviation','_score','Comfort\x20Summary','lastIndexOf','unknown','Last\x20Check\x20Time','üìû\x20R√úCKRUF\x20BITTE!\x20Der\x20Bewohner\x20hat\x20den\x20R√ºckruf-Button\x20gedr√ºckt.','analysis.health.trendValue','substring','testNotification','occupancy','data','ü§ñ\x20BUTLER\x20AUTO-APPLY:\x20Executing\x20','debug','detected','currentSystemMode','957272SGcPAN','automationProposal','analysis.automation.suggestedAction','Error\x20reading\x20calendar\x20table:\x20','isAlert','LTM.rawEventLog','replace','submitFeedback','temperature','Feedback\x20Log','üêç\x20Starting\x20Python\x20Sidecar:\x20','common','getEnums','Training\x20Data\x20Sets','includes','KALENDER:\x20Keine\x20Daten','minDaysForBaseline','toLowerCase','close','pr√§senz','ROLLE:\x20F√ºrsorglicher\x20Assistent.\x20AUFGABE:\x20Schreibe\x20eine\x20kurze,\x20beruhigende\x20\x22Guten\x20Morgen\x22-Nachricht.\x20PERSONA:\x20','Could\x20not\x20kill\x20Python\x20process:\x20','geminiApiKey','ltmLtbWindowDays','native','genAI','warn','Error\x20checking\x20WiFi:\x20','level','Last\x20Result','payload','bewegung','toFixed','analysisTimer','Unbekannt','state','delObjectAsync','devices','stderr','enum.functions.*','Keiner','Restlessness\x20Level','accuweather','normal','Gast',').\x20Starting\x20Timer.','toLocaleTimeString','PRO-','setHours','‚ö†Ô∏è\x20Python\x20missing\x20dependencies.\x20Triggering\x20Auto-Install...','outdoorSensorId','Say\x20Hello','getCalendarNames','.\x0a\x20\x20\x20\x20SYSTEM_MODE:\x20','analysis.comfortSummary','COGNI_REQUEST_CALL','‚úÖ\x20User\x20confirmed\x20ALARM\x20via\x20Telegram.\x20Resetting\x20system.','getDate','useCalendar','Lernphase\x20(','isExit','‚úÖ\x20PIP\x20bootstrapped\x20successfully.\x20Retrying\x20installation...','Trigger\x20Analysis','python3','üêç\x20Guardian\x20Diagnosis\x20(','.\x20OUTPUT:\x20Nur\x20Text.','onStateChange','trim','switch','catch','üß†\x20Triggering\x20Security\x20Training\x20with\x20','modeResetJob','.Current.Temperature','analysis.isAlert','selectedFunctionIds','description','\x20(Value:\x20','uuid','analysis.health.trendDiagnosis','Drift\x20Sched\x20Error:\x20','Please\x20run\x20this\x20MANUALLY\x20in\x20the\x20console\x20(as\x20root/sudo):\x20apt\x20install\x20python3-pip','analysis.health.sleepScore','Scanning\x20for\x20devices\x20(V8:\x20Whitelist\x20Priority)...','analysis.analysisHistory','[RECORDER\x20DEBUG]\x20Accepting\x20Event\x20','Logbook','Trend\x20Value\x20(%)','Sending\x20notification:\x20\x22','writable','livingContext','toLocaleString','status','child_process','413575TGdPPD','geminiModel','useWeather','ANOMALY','apiKey','LTM','Who\x20is\x20present?','off','generateContent','Auto\x20Apply\x20Rule','Training\x20Error:\x20','system.presenceWho','history.','subscribeForeignStatesAsync','ltmStbWindowDays','Restoring\x20sensor\x20cache\x20from\x20history\x20(','openweathermap','dependencyInstallInProgress','systemConfig','Trigger\x20Action\x20Now','latitude','‚ö†Ô∏è\x20PIP\x20is\x20missing.\x20Attempting\x20self-healing\x20via\x20ensurepip\x20(User\x20Mode)...','models/gemini-flash-latest','val','LTM.trainingData.thermodynamics','baselineDrift',')\x20-\x20FUNCTIONS\x20FIRST\x20ARCHITECTURE','uuid-error','analysis.trigger','service.py','Train\x20Security\x20Model\x20(LSTM)','\x20days\x20of\x20activity\x20data\x20to\x20Python...','getHours','calendarSelection','value','analysis.training.status','WiFi\x20Presence\x20detected\x20->\x20Aborting\x20Exit\x20Timer.\x20User\x20is\x20present.','schalter','üõ†Ô∏è\x20AUTO-FIX:\x20Installing\x20Python\x20dependencies\x20from\x20',')\x20->\x20','analysis.automation.targetId','68700uhzmlf','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','connection','.\x0a\x20\x20\x20\x20KONTEXT:\x20','üõ°Ô∏è\x20SECURITY\x20CHECK:\x20Score\x20','Event\x20received:\x20','getForeignObjectsAsync','echarts.','notifyTelegramEnabled','[RECORDER\x20DEBUG]\x20Ignored\x20Event\x20','briefingEnabled','AI\x20Alert\x20Status','Last\x20Anomaly\x20Score','info.','analysisHistory','daswetter.0','LTM.driftAnalysis.baselineDrift','‚úÖ\x20SUCCESS.\x20Dependencies\x20installed.\x20Restarting\x20Service...','scriptEnabled','rssi','TREND_RESULT','system.mode','AI\x20Emergency\x20Status','message','events.history','update','weatherInstance','ANALYZE_SEQUENCE','VACATION','Fokus\x20auf\x20Komfort.','kontakt','Health\x20&\x20Sleep\x20Analysis','analysis.security','currentposition','expire','\x20=\x20','uuid-not-found','\x27\x20not\x20in\x20allowed\x20list)','Fehler:\x20','targetId','10iuAyJQ','[TEST]\x20','analysis.isEmergency','info','push','details','710168THdcXS','analysis.history_debug_00','COGNI_CONFIRM_OK','analysis.comfortSuggestion','filter','Thermodynamic\x20Data\x20Points','json','.\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20INPUT\x20DATEN\x20(Letzte\x20Events):\x0a\x20\x20\x20\x20','@iobroker/adapter-core','send','constructor','getGenerativeModel','javascript.','Reset\x20Sched\x20Error:\x20','parse','analysis.automation','.\x20Welcome\x20home.','name','log','t√ºr','stdout','):\x20','channel','temp','forEach','cogni-living\x20adapter\x20starting\x20(v','actual_temperature','location','weatherunderground','.NextHours.Location_1.Day_1.current.symbol_desc','events.history_debug_00','BUTLER\x20Execution\x20Error:\x20','system.','.forecast.current.temperature','callback','SECURITY_RESULT','3fpKsGd','Kein\x20API\x20Key!','‚ùå\x20AUTO-FIX\x20FAILED.\x20Please\x20check\x20permissions.','Error\x20in\x20onMessage\x20command\x20','stdin','exitGraceTimer','notifyTelegramInstance','Ungew√∂hnliches\x20Bewegungsmuster\x20erkannt!\x20(Score:\x20','notifyPushoverInstance','summary','Target\x20ID','python3\x20-m\x20ensurepip\x20--default-pip\x20--user','Activity-Level','Gemini\x20AI\x20initialized.','isProVersion','round','KALENDER:\x20Keine\x20Kalender\x20ausgew√§hlt\x20(Bitte\x20in\x20Settings\x20konfigurieren)','python_service','Comfort\x20Suggestion','now','[PYTHON\x20ERR]\x20','from','scheduleJob','application/json','enum.rooms.*','object','Started\x20at\x20','motion','isGracePeriodActive','Unknown\x20error','scriptProblem','(((.+)+)+)+$','activityLevel','startsWith','Starting\x20Autopilot\x20(','eventHistory','openweathermap.0','firmware','unload','4PSFVQx','triggerBriefing','Deaktiviert\x20(Pro-Feature)','lastAlertState','ical.0','online','Alarm','system.config','Bibliotheken\x20nicht\x20gefunden','lastCheck','pop','values','KI-Modell\x20nicht\x20initialisiert','WETTER:\x20Keine\x20Daten\x20gefunden','WETTER\x20ERROR:\x20','Training\x20only\x20available\x20in\x20Pro\x20Version.','42YXQVcC','main','\x20(Type\x20\x27','Invalid\x20JSON\x20from\x20Python:\x20','No\x20instance','...','instance','weather','Entry\x20detected\x20via\x20','simulateButler','cogni-living','indexOf','Motion\x20detected\x20inside.\x20Aborting\x20Exit\x20Timer.','[PYTHON]\x20Failed\x20to\x20start\x20(is\x20python3\x20installed?):\x20','Unknown','Alert\x20Reason','find','pythonProcess','lowbat','analysis.training','Subscribing\x20to\x20','notifyEmailRecipient','230834ybSQbs','analysis.automation.autoApply','icons-mfd.','Recorded\x20Motion\x20Sequences','getOverviewData','Feedback\x20saved:\x20','endsWith','briefingJob','ready','‚úÖ\x20Alarm\x20quittiert.\x20System\x20normal.','WETTER:\x20','analysis.automation.patternDetected','analysis.automation.triggerAction','Idle','shutter','enum','split','party','getObjectAsync','subscribeStates','NORMAL','fill','Guardian:\x20Not\x20enough\x20history\x20data\x20for\x20trend\x20analysis\x20yet.','üìû\x20User\x20requested\x20CALL\x20via\x20Telegram!','setObjectNotExistsAsync','Cogni-Living','maintenance','calendarInstance','fenster','targetValue','notifyTelegramRecipient','setStateAsync','KALENDER\x20ERROR:\x20','map','\x20*\x20*\x20*','User\x20dismissed\x20automation\x20proposal.','[RECORDER]\x20Error\x20saving\x20sequence:\x20','\x0a\x20\x20\x20\x20ROLLE:\x20KI-Hausverwalter\x20&\x20Gesundheits-Assistent.\x0a\x20\x20\x20\x20PERSONA:\x20','testContext','isPresent','error','Error:\x20','Drift\x20Details','toISOString','GUEST','thermostat','admin.','Live\x20Security\x20Monitor','shift','sendToAsync','aiPersona','Party','Keine\x20Analyse.','analysis.health.restlessness','\x20presence\x20devices...','_calName','PARTY','.\x0a\x20\x20\x20\x20ANWESENDE_GERAETE:\x20','.\x20KONTEXT:\x20','analysis.activitySummary','vis.','dutycycle','temperatur','Activity\x20Summary','Vom\x20Benutzer\x20best√§tigt\x20(OK).','response','inactivityThresholdHours','.data.table','Scheduling\x20Morning\x20Briefing\x20for\x20','[RECORDER]\x20Discarding\x20short\x20sequence\x20(Length:\x20','generic','light','Success:\x20','sort','rawEventLog','LTM.processingStatus','contact','splice','Health\x20Notes','\x20events','\x20min).','licenseKey','custom','driftAnalysisTimer','Anwesend','analysis.triggerBriefing','lights','LTM.driftAnalysis.lastCheck','\x20sensors...','LTM.driftAnalysis','cancel','analysis.alertReason','Drift\x20Status','TEST-PRO-KEY','number','licht','[RECORDER]\x20Sequence\x20finished\x20(Steps:\x20','ack','Generating\x20Morning\x20Briefing...','üìû\x20R√ºckruf\x20anfordern','LTM\x20Sched\x20Error:\x20','python3\x20-m\x20pip\x20install\x20-r\x20\x22','analysis.automation.description','HARD\x20WATCHDOG:\x20No\x20sensor\x20activity\x20detected\x20for\x20','analysis.deviationFromBaseline','Gemini\x20Init\x20Error:\x20','ML-Libs\x20fehlen','analysis.lastResult','getForeignObjectAsync','triggerDailyDigest','Daily\x20Digests','Trigger\x20Briefing\x20(Test)','telegram','button','kill','\x20events)...','string','lampe','path','search','notifyPushoverRecipient','time','.\x20ZUSATZ:\x20','Training\x20Status','\x20Tage)','cover','reachable','alertReason','Error\x20launching\x20Python\x20service:\x20','analysis.security.lastCheck','text','brightness','üåÖ\x20Daily\x20Briefing:\x0a','LTM.driftAnalysis.driftDetails','Kein\x20API\x20Key\x20eingegeben.','weatherunderground.0','testApiKey','some','‚úÖ\x20AUTO-FIX\x20SUCCESS.\x20Dependencies\x20installed.\x20Restarting\x20Service...','flot.','‚úÖ\x20SECURITY\x20MODEL\x20TRAINED!\x20Details:\x20','.\x20DATEN:\x20Schlaf\x20','ANALYZE_TREND','setForeignStateAsync','config','window','KALENDER:\x20','loc','TRAIN_SECURITY','analysis.security.lastScore','onReady','Briefing\x20Error:\x20','power','join','9321301AQtHoy','0\x204\x20*\x20*\x20*','toString','sensorLastValues','TRAINING_COMPLETE','getForeignStateAsync','isEmergency','heizung','\x0a\x0a\x20\x20\x20\x20AUFGABE:\x0a\x20\x20\x20\x201.\x20Analysiere\x20auf\x20Gesundheitsrisiken\x20(Sturz,\x20Inaktivit√§t).\x0a\x20\x20\x20\x202.\x20Analysiere\x20auf\x20Komfort/Automatisierung\x20(\x22Butler\x22).\x20Erkennst\x20du\x20ein\x20Muster?\x20(z.B.\x20\x22Wenn\x20Bewegung\x20Flur,\x20dann\x20Licht\x20an\x22).\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20FORMAT\x20(JSON\x20Only!):\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x22isAlert\x22:\x20boolean,\x0a\x20\x20\x20\x20\x20\x20\x22alertReason\x22:\x20\x22string\x20(kurz)\x22,\x0a\x20\x20\x20\x20\x20\x20\x22isEmergency\x22:\x20boolean,\x0a\x20\x20\x20\x20\x20\x20\x22summary\x22:\x20\x22string\x20(Was\x20passiert\x20gerade?)\x22,\x0a\x20\x20\x20\x20\x20\x20\x22automationProposal\x22:\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22detected\x22:\x20boolean,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22description\x22:\x20\x22string\x20(Was\x20soll\x20automatisiert\x20werden?)\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22targetId\x22:\x20\x22string\x20(ioBroker\x20ID,\x20z.B.\x200_userdata.0.light)\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22targetValue\x22:\x20\x22any\x20(Wert,\x20z.B.\x20true\x20oder\x2050)\x22\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20','siren','0\x203\x20*\x20*\x20*','[RECORDER]\x20Added\x20step\x20to\x20sequence:\x20','system.meta.uuid','stringify','LTM.triggerDailyDigest','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','onUnload','\x20(Length:\x20','presence','ltmJob','dailyDigests','No\x20module\x20named','onMessage','daswetter','Failed\x20to\x20send\x20to\x20Python:\x20','Target\x20Value','lock','date','command','.\x0a\x20\x20\x20\x20NOTFALL-KONTEXT:\x20','getCalendarNames\x20Error:\x20','üß™\x20Simulating\x20Butler\x20Proposal:\x20','[LOG]','humidity','sendTo','isArray','‚úÖ\x20Alles\x20OK\x20(Reset)]','N/A','\x20(Threshold:\x20','apply','System\x20Status\x20&\x20Control','stateChange','members','namespace','\x22\x20--break-system-packages','.NextHours.Location_1.Day_1.current.temp_value','Failed:\x20','events.lastEvent','Trigger\x20Digest','ü§ñ\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','slice','‚ö†Ô∏è\x20SECURITY\x20ALARM:\x20'];a0_0x364c=function(){return _0xd70a5e;};return a0_0x364c();}async function saveFeedback(_0x4a4090,_0x78cd15){const _0x367db6=a0_0x94cfc7;_0x4a4090[_0x367db6(0x288)][_0x367db6(0x273)](_0x367db6(0x2ec)+JSON[_0x367db6(0x38e)](_0x78cd15));}async function runBaselineDriftAnalysis(_0x3ae2da){const _0x2d8dd2=a0_0x94cfc7;if(!_0x3ae2da[_0x2d8dd2(0x2a8)]||!_0x3ae2da[_0x2d8dd2(0x220)])return;const _0x5b8141=_0x3ae2da[_0x2d8dd2(0x377)][_0x2d8dd2(0x22d)]||0xe;if(_0x3ae2da['dailyDigests'][_0x2d8dd2(0x3e0)]<_0x5b8141+(_0x3ae2da[_0x2d8dd2(0x377)][_0x2d8dd2(0x40a)]||0x7)){await _0x3ae2da[_0x2d8dd2(0x306)](LTM_DP_DRIFT_STATUS,{'val':'N/A\x20(Learning)','ack':!![]});return;}const _0x4c2d94=_0x3ae2da['dailyDigests']['slice'](-_0x5b8141),_0x3dabb3=_0x3ae2da[_0x2d8dd2(0x395)]['slice'](0x0,_0x3ae2da[_0x2d8dd2(0x395)][_0x2d8dd2(0x3e0)]-_0x5b8141),_0x5a7dc0=_0x2d8dd2(0x249)+JSON[_0x2d8dd2(0x38e)](_0x3dabb3)+'\x0aSTB:\x20'+JSON['stringify'](_0x4c2d94);try{const _0x165ac8=await _0x3ae2da[_0x2d8dd2(0x220)][_0x2d8dd2(0x227)](_0x5a7dc0),_0x36ba8a=JSON[_0x2d8dd2(0x284)](_0x165ac8[_0x2d8dd2(0x328)][_0x2d8dd2(0x369)]()[_0x2d8dd2(0x400)](/```json|```/g,'')[_0x2d8dd2(0x205)]());_0x36ba8a[_0x2d8dd2(0x238)]&&(await _0x3ae2da[_0x2d8dd2(0x306)](LTM_DP_DRIFT_STATUS,{'val':_0x36ba8a['baselineDrift'],'ack':!![]}),await _0x3ae2da[_0x2d8dd2(0x306)](LTM_DP_DRIFT_DETAILS,{'val':_0x36ba8a['driftDetails'],'ack':!![]}),await _0x3ae2da[_0x2d8dd2(0x306)](LTM_DP_DRIFT_LAST_CHECK,{'val':Date[_0x2d8dd2(0x2ad)](),'ack':!![]}));}catch(_0x1d1a15){}}function setupLtmScheduler(_0x5e3b95){const _0x3059ab=a0_0x94cfc7;try{if(_0x5e3b95['ltmJob'])_0x5e3b95[_0x3059ab(0x394)][_0x3059ab(0x341)]();if(!_0x5e3b95['isProVersion']){_0x5e3b95[_0x3059ab(0x306)](LTM_DP_STATUS,{'val':_0x3059ab(0x2c3),'ack':!![]});return;}_0x5e3b95[_0x3059ab(0x394)]=schedule[_0x3059ab(0x2b0)](LTM_SCHEDULE,()=>createDailyDigest(_0x5e3b95));}catch(_0x39c3ec){_0x5e3b95['log'][_0x3059ab(0x30f)](_0x3059ab(0x34b)+_0x39c3ec[_0x3059ab(0x25f)]);}}function setupModeResetScheduler(_0x5e3be3){const _0x584155=a0_0x94cfc7;try{if(_0x5e3be3['modeResetJob'])_0x5e3be3[_0x584155(0x209)][_0x584155(0x341)]();_0x5e3be3[_0x584155(0x209)]=schedule[_0x584155(0x2b0)](MODE_RESET_SCHEDULE,async()=>{const _0x4ce247=_0x584155;await loadSystemMode(_0x5e3be3),AUTO_RESET_MODES[_0x4ce247(0x408)](_0x5e3be3[_0x4ce247(0x3f9)])&&await _0x5e3be3['setStateAsync'](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x4ce247(0x2fb)],'ack':![]});});}catch(_0x32ef97){_0x5e3be3[_0x584155(0x288)][_0x584155(0x30f)](_0x584155(0x283)+_0x32ef97[_0x584155(0x25f)]);}}function setupDriftAnalysisScheduler(_0x3555be){const _0x10cf66=a0_0x94cfc7;try{if(_0x3555be['driftAnalysisTimer'])clearInterval(_0x3555be['driftAnalysisTimer']);if(!_0x3555be['isProVersion'])return;_0x3555be['driftAnalysisTimer']=setInterval(()=>runBaselineDriftAnalysis(_0x3555be),(_0x3555be[_0x10cf66(0x377)]['ltmDriftCheckIntervalHours']||0x18)*0x36ee80),setTimeout(()=>runBaselineDriftAnalysis(_0x3555be),0x1388);}catch(_0x4dc2d6){_0x3555be['log'][_0x10cf66(0x30f)](_0x10cf66(0x211)+_0x4dc2d6[_0x10cf66(0x25f)]);}}function setupBriefingScheduler(_0x5977a0){const _0x51d2f0=a0_0x94cfc7;try{if(_0x5977a0[_0x51d2f0(0x2ee)])_0x5977a0[_0x51d2f0(0x2ee)][_0x51d2f0(0x341)]();if(!_0x5977a0[_0x51d2f0(0x377)][_0x51d2f0(0x252)])return;const _0x2bbc7c=(_0x5977a0[_0x51d2f0(0x377)]['briefingTime']||'08:00')[_0x51d2f0(0x2f7)](':'),_0x3eda1d=parseInt(_0x2bbc7c[0x0])||0x8,_0x55ba3f=parseInt(_0x2bbc7c[0x1])||0x0,_0x367444=_0x55ba3f+'\x20'+_0x3eda1d+_0x51d2f0(0x309);_0x5977a0[_0x51d2f0(0x288)][_0x51d2f0(0x273)](_0x51d2f0(0x32b)+_0x3eda1d+':'+(_0x55ba3f<0xa?'0'+_0x55ba3f:_0x55ba3f)),_0x5977a0[_0x51d2f0(0x2ee)]=schedule[_0x51d2f0(0x2b0)](_0x367444,()=>{sendMorningBriefing(_0x5977a0);});}catch(_0x206867){_0x5977a0[_0x51d2f0(0x288)][_0x51d2f0(0x30f)](_0x51d2f0(0x3df)+_0x206867[_0x51d2f0(0x25f)]);}}async function sendNotification(_0x948516,_0x75a1f5,_0x33635b=![],_0x93d605=![]){const _0x4c2f90=a0_0x94cfc7;_0x948516[_0x4c2f90(0x288)][_0x4c2f90(0x273)]((_0x33635b?_0x4c2f90(0x271):'')+_0x4c2f90(0x219)+_0x75a1f5+'\x22');const _0x10f137=_0x948516[_0x4c2f90(0x377)];let _0x1937c1=0x0;if(_0x10f137[_0x4c2f90(0x250)]){let _0x405f4c={};(_0x75a1f5[_0x4c2f90(0x408)](_0x4c2f90(0x2c7))||_0x93d605)&&(_0x405f4c={'reply_markup':{'inline_keyboard':[[{'text':_0x4c2f90(0x3a5),'callback_data':_0x4c2f90(0x278)}],[{'text':_0x4c2f90(0x34a),'callback_data':_0x4c2f90(0x1f9)}]]}}),await _0x948516[_0x4c2f90(0x318)](_0x10f137[_0x4c2f90(0x2a0)],_0x4c2f90(0x27f),{'text':_0x75a1f5,'user':_0x10f137[_0x4c2f90(0x305)],..._0x405f4c}),_0x1937c1++;}if(_0x10f137['notifyPushoverEnabled']){let _0x59703f={'message':_0x75a1f5,'title':_0x93d605?_0x4c2f90(0x3d0):_0x4c2f90(0x300),'priority':_0x93d605?0x2:0x1,'device':_0x10f137[_0x4c2f90(0x35f)]};_0x93d605&&(_0x59703f['retry']=0x1e,_0x59703f[_0x4c2f90(0x26a)]=0xe10,_0x59703f[_0x4c2f90(0x3dd)]=_0x4c2f90(0x38a)),await _0x948516[_0x4c2f90(0x318)](_0x10f137[_0x4c2f90(0x2a2)],_0x4c2f90(0x27f),_0x59703f),_0x1937c1++;}return _0x10f137['notifyEmailEnabled']&&(await _0x948516[_0x4c2f90(0x318)](_0x10f137[_0x4c2f90(0x3bf)],_0x4c2f90(0x27f),{'text':_0x75a1f5,'to':_0x10f137[_0x4c2f90(0x2e6)]}),_0x1937c1++),_0x1937c1;}async function setupTelegramListener(_0x12fdda){const _0x1805a1=a0_0x94cfc7,_0x30c680=_0x12fdda[_0x1805a1(0x377)][_0x1805a1(0x2a0)];_0x12fdda[_0x1805a1(0x377)][_0x1805a1(0x250)]&&_0x30c680&&(_0x12fdda[_0x1805a1(0x288)][_0x1805a1(0x273)]('üì°\x20Hooking\x20into\x20'+_0x30c680+'\x20for\x20interactive\x20buttons...'),await _0x12fdda[_0x1805a1(0x22c)](_0x30c680+'.communicate.request'));}async function handleTelegramResponse(_0x2e6f27,_0x3d565c){const _0x40a8ed=a0_0x94cfc7;let _0x85fd57=_0x3d565c;_0x3d565c[_0x40a8ed(0x2bb)]('[')&&(_0x85fd57=_0x3d565c[_0x40a8ed(0x3f2)](_0x3d565c[_0x40a8ed(0x2dc)](']')+0x1));if(_0x85fd57==='COGNI_CONFIRM_OK')_0x2e6f27[_0x40a8ed(0x288)]['info'](_0x40a8ed(0x1fa)),await _0x2e6f27[_0x40a8ed(0x306)](_0x40a8ed(0x20b),{'val':![],'ack':!![]}),await _0x2e6f27[_0x40a8ed(0x306)](_0x40a8ed(0x342),{'val':_0x40a8ed(0x327),'ack':!![]}),_0x2e6f27['lastAlertState']=![],sendNotification(_0x2e6f27,_0x40a8ed(0x2f0),![]);else _0x85fd57===_0x40a8ed(0x1f9)&&(_0x2e6f27[_0x40a8ed(0x288)][_0x40a8ed(0x414)](_0x40a8ed(0x2fe)),sendNotification(_0x2e6f27,_0x40a8ed(0x3f0),![],!![]));}async function runAutopilot(_0x4f3c1a){const _0x4d827b=a0_0x94cfc7,_0x390337=_0x4f3c1a[_0x4d827b(0x377)][_0x4d827b(0x329)],_0x49c4b2=_0x4f3c1a[_0x4d827b(0x2bd)]['length']>0x0?_0x4f3c1a[_0x4d827b(0x2bd)][0x0]['timestamp']:Date[_0x4d827b(0x2ad)](),_0x4a68e4=(Date[_0x4d827b(0x2ad)]()-_0x49c4b2)/(0x3e8*0x3c*0x3c);let _0x1be199='';_0x4f3c1a['config'][_0x4d827b(0x3d8)]&&_0x4f3c1a[_0x4d827b(0x3f9)]===SYSTEM_MODES[_0x4d827b(0x2fb)]&&_0x4f3c1a['isPresent']&&(_0x4a68e4>_0x390337&&(_0x1be199=_0x4d827b(0x34e)+_0x4a68e4[_0x4d827b(0x41a)](0x1)+'\x20hours.\x20Potential\x20incapacitation.')),runGeminiAnalysis(_0x4f3c1a,_0x1be199)[_0x4d827b(0x207)](_0x5b2830=>_0x4f3c1a[_0x4d827b(0x288)][_0x4d827b(0x30f)](_0x5b2830));}async function createDailyDigest(_0x3d9f89){const _0x19cd3e=a0_0x94cfc7;if(!_0x3d9f89[_0x19cd3e(0x2a8)])return;await _0x3d9f89['setStateAsync'](LTM_DP_STATUS,{'val':_0x19cd3e(0x2b4)+new Date()[_0x19cd3e(0x21c)](),'ack':!![]});if(!_0x3d9f89[_0x19cd3e(0x220)]||_0x3d9f89[_0x19cd3e(0x331)][_0x19cd3e(0x3e0)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x3d9f89[_0x19cd3e(0x306)](LTM_DP_STATUS,{'val':'Skipped\x20(No\x20AI\x20or\x20Data)','ack':!![]});return;}const _0x5a33a1=JSON['parse'](JSON['stringify'](_0x3d9f89['rawEventLog'])),_0x32bbe4=_0x5a33a1['length'],_0x1c0e69=_0x19cd3e(0x390)+JSON[_0x19cd3e(0x38e)](_0x5a33a1);try{const _0x1c4fa4=await _0x3d9f89[_0x19cd3e(0x220)][_0x19cd3e(0x227)](_0x1c0e69),_0x122fcc=JSON[_0x19cd3e(0x284)](_0x1c4fa4['response']['text']()[_0x19cd3e(0x400)](/```json|```/g,'')[_0x19cd3e(0x205)]());_0x122fcc[_0x19cd3e(0x2a3)]&&(_0x3d9f89['dailyDigests'][_0x19cd3e(0x274)]({'timestamp':new Date()[_0x19cd3e(0x312)](),'eventCount':_0x32bbe4,'summary':_0x122fcc[_0x19cd3e(0x2a3)],'activityLevel':_0x122fcc[_0x19cd3e(0x2ba)],'systemMode':_0x3d9f89['currentSystemMode']}),await saveDailyDigests(_0x3d9f89),_0x3d9f89[_0x19cd3e(0x331)]=[],await saveRawEventLog(_0x3d9f89),await _0x3d9f89['setStateAsync'](LTM_DP_STATUS,{'val':'Success:\x20Compressed\x20'+_0x32bbe4+_0x19cd3e(0x336),'ack':!![]}),runPythonHealthCheck(_0x3d9f89));}catch(_0x4c8533){await _0x3d9f89['setStateAsync'](LTM_DP_STATUS,{'val':_0x19cd3e(0x310)+_0x4c8533[_0x19cd3e(0x25f)],'ack':!![]});}}async function sendMorningBriefing(_0xd82138){const _0x120465=a0_0x94cfc7;if(!_0xd82138[_0x120465(0x220)])return;_0xd82138[_0x120465(0x288)]['info'](_0x120465(0x349));const _0x58c1da=_0xd82138[_0x120465(0x395)]['length']>0x0?_0xd82138[_0x120465(0x395)][_0xd82138['dailyDigests'][_0x120465(0x3e0)]-0x1]:null,_0x2a61b9=_0x58c1da&&_0x58c1da[_0x120465(0x3c3)]?_0x58c1da[_0x120465(0x3c3)]['sleepScore']:_0x120465(0x3a6),_0x5a6dcc=new Date();_0x5a6dcc[_0x120465(0x42a)](0x4,0x0,0x0,0x0);const _0x105564=_0xd82138[_0x120465(0x2bd)][_0x120465(0x27a)](_0x4444b9=>new Date(_0x4444b9['timestamp'])>_0x5a6dcc),_0x377d6a=PERSONA_MAPPING[_0xd82138[_0x120465(0x377)][_0x120465(0x319)]||_0x120465(0x32d)],_0xf6217c=_0xd82138[_0x120465(0x377)][_0x120465(0x21b)]||'',_0x15e2be=await getWeatherContext(_0xd82138),_0x3db9af=await getCalendarContext(_0xd82138),_0x3b1cd0=_0x120465(0x40e)+_0x377d6a+_0x120465(0x321)+_0xf6217c+_0x120465(0x361)+_0x15e2be+'\x20'+_0x3db9af+_0x120465(0x374)+_0x2a61b9+'/100,\x20Aktivit√§t\x20seit\x2004:00:\x20'+JSON['stringify'](_0x105564[_0x120465(0x3b3)](0x0,0xa))+_0x120465(0x203);try{const _0x1cc025=await _0xd82138[_0x120465(0x220)]['generateContent'](_0x3b1cd0),_0x2bd714=_0x120465(0x36b)+_0x1cc025[_0x120465(0x328)][_0x120465(0x369)]()[_0x120465(0x205)]();sendNotification(_0xd82138,_0x2bd714),_0xd82138[_0x120465(0x288)]['info']('Morning\x20Briefing\x20sent.');}catch(_0x2a4b23){_0xd82138['log'][_0x120465(0x30f)](_0x120465(0x37e)+_0x2a4b23[_0x120465(0x25f)]);}}async function scanForDevices(_0x34f7ce,_0x17d7e5){const _0x155e79=a0_0x94cfc7;_0x34f7ce[_0x155e79(0x288)][_0x155e79(0x273)](_0x155e79(0x214));const _0x404816=[],_0x53136e=await _0x34f7ce[_0x155e79(0x24e)]('*'),_0x207049=await _0x34f7ce['getForeignObjectsAsync'](_0x155e79(0x421),_0x155e79(0x2f6)),_0x168b81=await _0x34f7ce[_0x155e79(0x24e)](_0x155e79(0x2b2),_0x155e79(0x2f6)),_0x199ea3={};if(_0x207049)for(const _0x1e34eb in _0x207049){const _0x2b72ed=_0x207049[_0x1e34eb][_0x155e79(0x405)]['members']||[];_0x2b72ed[_0x155e79(0x28e)](_0x18a064=>{const _0x54d5c2=_0x155e79;if(!_0x199ea3[_0x18a064])_0x199ea3[_0x18a064]=[];_0x199ea3[_0x18a064][_0x54d5c2(0x274)](_0x1e34eb);});}const _0x127b86={};if(_0x168b81)for(const _0x37e70a in _0x168b81){const _0x1af70c=_0x168b81[_0x37e70a]['common'][_0x155e79(0x3ab)]||[],_0x4e857a=typeof _0x168b81[_0x37e70a][_0x155e79(0x405)][_0x155e79(0x287)]===_0x155e79(0x2b3)?_0x168b81[_0x37e70a][_0x155e79(0x405)]['name']['de']:_0x168b81[_0x37e70a][_0x155e79(0x405)][_0x155e79(0x287)];_0x1af70c[_0x155e79(0x28e)](_0x5d61b1=>_0x127b86[_0x5d61b1]=_0x4e857a);}const _0x31808f=_0x17d7e5[_0x155e79(0x20c)]||[],_0x19e87e=_0x17d7e5['motion']!==![],_0x12addb=_0x17d7e5['doors']!==![],_0x160be9=_0x17d7e5[_0x155e79(0x33d)]!==![],_0x53516a=_0x17d7e5['temperature']===!![],_0x2fcc41=_0x17d7e5[_0x155e79(0x2d8)]===!![];for(const _0x2dbb5f in _0x53136e){const _0x3d5a6f=_0x53136e[_0x2dbb5f];if(_0x3d5a6f[_0x155e79(0x3db)]!==_0x155e79(0x41d)||!_0x3d5a6f[_0x155e79(0x405)])continue;if(ADAPTER_BLACKLIST['some'](_0x27e531=>_0x2dbb5f[_0x155e79(0x2bb)](_0x27e531))&&!_0x2fcc41)continue;const _0x5847ef=(_0x3d5a6f[_0x155e79(0x405)][_0x155e79(0x3d7)]||'')[_0x155e79(0x40b)]();let _0x3a2bca=(typeof _0x3d5a6f['common']['name']===_0x155e79(0x2b3)?_0x3d5a6f['common'][_0x155e79(0x287)]['de']:_0x3d5a6f['common'][_0x155e79(0x287)])||_0x2dbb5f;const _0x5860bb=_0x3a2bca['toLowerCase']();let _0xddeb1e=![],_0x393f48=![];if(_0x31808f['length']>0x0){const _0x13f85a=_0x199ea3[_0x2dbb5f]||[],_0x564985=_0x2dbb5f['split']('.')['slice'](0x0,-0x1)['join']('.'),_0x1eb2d7=_0x199ea3[_0x564985]||[];(_0x13f85a[_0x155e79(0x370)](_0x3840c6=>_0x31808f[_0x155e79(0x408)](_0x3840c6))||_0x1eb2d7[_0x155e79(0x370)](_0x57f8a2=>_0x31808f[_0x155e79(0x408)](_0x57f8a2)))&&(_0xddeb1e=!![],_0x393f48=!![]);}if(!_0xddeb1e&&!_0x2fcc41){if(HARD_IGNORE_TERMS[_0x155e79(0x370)](_0x51ac8c=>_0x2dbb5f[_0x155e79(0x408)](_0x51ac8c)||_0x5860bb[_0x155e79(0x408)](_0x51ac8c[_0x155e79(0x40b)]())))continue;}if(BAD_NAMES[_0x155e79(0x370)](_0x36279d=>_0x5860bb===_0x36279d||_0x5860bb[_0x155e79(0x2ed)]('.'+_0x36279d))){const _0x527f1c=_0x2dbb5f[_0x155e79(0x2f7)]('.');if(_0x527f1c[_0x155e79(0x3e0)]>0x2){const _0x233ffe=_0x527f1c[_0x155e79(0x3b3)](0x0,-0x1)['join']('.'),_0x141ffb=_0x53136e[_0x233ffe];if(_0x141ffb&&_0x141ffb[_0x155e79(0x405)]&&_0x141ffb['common'][_0x155e79(0x287)]){const _0x219054=typeof _0x141ffb['common'][_0x155e79(0x287)]===_0x155e79(0x2b3)?_0x141ffb[_0x155e79(0x405)][_0x155e79(0x287)]['de']:_0x141ffb[_0x155e79(0x405)][_0x155e79(0x287)];_0x219054&&!_0x3a2bca[_0x155e79(0x408)](_0x219054)&&(_0x3a2bca=_0x219054+'\x20'+_0x3a2bca);}}}let _0xfbf180='';if(_0x19e87e&&(_0x5847ef[_0x155e79(0x408)](_0x155e79(0x2b5))||_0x5847ef[_0x155e79(0x408)](_0x155e79(0x3f4))||_0x5860bb[_0x155e79(0x408)](_0x155e79(0x419))||_0x5860bb[_0x155e79(0x408)](_0x155e79(0x40d))))_0xfbf180=_0x155e79(0x2b5);else{if(!_0xfbf180&&_0x12addb&&(_0x5847ef[_0x155e79(0x408)]('door')||_0x5847ef['includes'](_0x155e79(0x378))||_0x5847ef['includes'](_0x155e79(0x39b))||_0x5847ef['includes']('blind')||_0x5847ef[_0x155e79(0x408)](_0x155e79(0x2f5))||_0x5860bb[_0x155e79(0x408)]('fenster')||_0x5860bb[_0x155e79(0x408)](_0x155e79(0x289))||_0x5860bb[_0x155e79(0x408)]('rollladen')))_0xfbf180='door';else{if(!_0xfbf180&&_0x160be9&&(_0x5847ef[_0x155e79(0x408)]('light')||_0x5847ef[_0x155e79(0x408)](_0x155e79(0x206))||_0x5847ef['includes']('dimmer')||_0x5860bb[_0x155e79(0x408)](_0x155e79(0x346))||_0x5860bb[_0x155e79(0x408)](_0x155e79(0x35c))||_0x5860bb[_0x155e79(0x408)](_0x155e79(0x244)))){if(_0x3d5a6f[_0x155e79(0x405)][_0x155e79(0x3de)]||_0x5847ef['includes']('sensor'))_0xfbf180=_0x155e79(0x32e);}else{if(!_0xfbf180&&_0x53516a&&(_0x5847ef[_0x155e79(0x408)](_0x155e79(0x402))||_0x5847ef['includes'](_0x155e79(0x3a2))||_0x5847ef[_0x155e79(0x408)](_0x155e79(0x314))||_0x5860bb[_0x155e79(0x408)](_0x155e79(0x28d))||_0x5860bb['includes'](_0x155e79(0x3ca))||_0x5860bb[_0x155e79(0x408)](_0x155e79(0x388))))_0xfbf180='temperature';else{if(!_0xfbf180&&_0x393f48)_0xfbf180=_0x155e79(0x339);}}}}if(_0xfbf180){let _0x1f95b0=_0x127b86[_0x2dbb5f]||'';if(!_0x1f95b0){let _0x58bd39=_0x2dbb5f;for(let _0x1f9a4e=0x0;_0x1f9a4e<0x3;_0x1f9a4e++){const _0x4eee0d=_0x58bd39[_0x155e79(0x3ed)]('.');if(_0x4eee0d===-0x1)break;_0x58bd39=_0x58bd39[_0x155e79(0x3f2)](0x0,_0x4eee0d);if(_0x127b86[_0x58bd39]){_0x1f95b0=_0x127b86[_0x58bd39];break;}}}_0x404816['push']({'id':_0x2dbb5f,'name':_0x3a2bca,'location':_0x1f95b0,'type':_0xfbf180,'logDuplicates':_0xfbf180===_0x155e79(0x2b5),'isExit':![],'_score':_0x1f95b0?0x50:_0xfbf180===_0x155e79(0x339)?0x5a:0x28});}}return _0x404816[_0x155e79(0x330)]((_0x2b607b,_0x392e53)=>_0x392e53[_0x155e79(0x3eb)]-_0x2b607b[_0x155e79(0x3eb)]),_0x404816;}async function executeAutomationAction(_0xee7cb5){const _0x22a2c3=a0_0x94cfc7;try{const _0x5baed6=await _0xee7cb5[_0x22a2c3(0x3e5)](_0x22a2c3(0x247)),_0x575982=await _0xee7cb5[_0x22a2c3(0x3e5)](_0x22a2c3(0x3d9));if(_0x5baed6&&_0x5baed6[_0x22a2c3(0x236)]&&_0x575982){const _0x4a1130=_0x5baed6['val'];let _0x5a9211=_0x575982[_0x22a2c3(0x236)];try{_0x5a9211=JSON[_0x22a2c3(0x284)](_0x5a9211);}catch(_0x488d27){}_0xee7cb5[_0x22a2c3(0x288)]['info'](_0x22a2c3(0x3bc)+_0x4a1130+_0x22a2c3(0x26b)+_0x5a9211),await _0xee7cb5[_0x22a2c3(0x376)](_0x4a1130,_0x5a9211);}else _0xee7cb5['log'][_0x22a2c3(0x414)](_0x22a2c3(0x3b2));}catch(_0x23bc55){_0xee7cb5[_0x22a2c3(0x288)]['error'](_0x22a2c3(0x295)+_0x23bc55[_0x22a2c3(0x25f)]);}}function tryParse(_0x1df971){const _0x39c005=a0_0x94cfc7;try{return JSON[_0x39c005(0x284)](_0x1df971);}catch(_0x511e6b){return null;}}async function recordSequence(_0x31135f,_0x8c43c0){const _0x2935ae=a0_0x94cfc7,_0x5ef5c4=(_0x8c43c0[_0x2935ae(0x3db)]||'')[_0x2935ae(0x40b)](),_0x5ab109=[_0x2935ae(0x2b5),_0x2935ae(0x419),_0x2935ae(0x40d),_0x2935ae(0x393),'occupancy','door',_0x2935ae(0x289),'window',_0x2935ae(0x303),_0x2935ae(0x333),_0x2935ae(0x266),_0x2935ae(0x32e),_0x2935ae(0x346),_0x2935ae(0x206),_0x2935ae(0x244),'dimmer',_0x2935ae(0x35c)];if(!_0x5ab109[_0x2935ae(0x370)](_0x19454c=>_0x5ef5c4[_0x2935ae(0x408)](_0x19454c))){_0x31135f['log'][_0x2935ae(0x3f7)](_0x2935ae(0x251)+_0x8c43c0['id']+_0x2935ae(0x2d3)+_0x8c43c0[_0x2935ae(0x3db)]+_0x2935ae(0x26d));return;}if(!_0x8c43c0['value']){_0x31135f[_0x2935ae(0x288)]['debug'](_0x2935ae(0x251)+_0x8c43c0['id']+_0x2935ae(0x3c6)+_0x8c43c0[_0x2935ae(0x241)]+')');return;}_0x31135f['log'][_0x2935ae(0x3f7)](_0x2935ae(0x216)+_0x8c43c0['id']+'\x20('+_0x8c43c0[_0x2935ae(0x291)]+')');if(sequenceTimer)clearTimeout(sequenceTimer);const _0x2293ab={'loc':_0x8c43c0['location']||_0x2935ae(0x2df),'id':_0x8c43c0['id'],'ts':Date[_0x2935ae(0x2ad)]()};activeSequence[_0x2935ae(0x274)](_0x2293ab),_0x31135f[_0x2935ae(0x288)][_0x2935ae(0x3f7)](_0x2935ae(0x38c)+_0x2293ab[_0x2935ae(0x37a)]+_0x2935ae(0x392)+activeSequence[_0x2935ae(0x3e0)]+')'),sequenceTimer=setTimeout(async()=>{const _0x273cb9=_0x2935ae;activeSequence[_0x273cb9(0x3e0)]>0x1?await saveCompletedSequence(_0x31135f):(_0x31135f[_0x273cb9(0x288)]['debug'](_0x273cb9(0x32c)+activeSequence[_0x273cb9(0x3e0)]+')'),activeSequence=[]);},SEQUENCE_TIMEOUT_MS);}async function saveCompletedSequence(_0x506e8e){const _0x5ac2fe=a0_0x94cfc7;try{_0x506e8e[_0x5ac2fe(0x288)][_0x5ac2fe(0x273)](_0x5ac2fe(0x347)+activeSequence['length']+').\x20Saving\x20to\x20Training\x20Data.');const _0x5aea37=await _0x506e8e[_0x5ac2fe(0x3e5)]('LTM.trainingData.sequences');let _0x6b1890=[];if(_0x5aea37&&_0x5aea37[_0x5ac2fe(0x236)])try{_0x6b1890=JSON[_0x5ac2fe(0x284)](_0x5aea37[_0x5ac2fe(0x236)]);}catch(_0x3c2798){}const _0x4d9a31=activeSequence[0x0]['ts'],_0x572607=activeSequence[_0x5ac2fe(0x308)](_0x38d5a3=>({'loc':_0x38d5a3['loc'],'t_delta':Math['round']((_0x38d5a3['ts']-_0x4d9a31)/0x3e8)})),_0xb7c3b5={'timestamp':new Date(_0x4d9a31)[_0x5ac2fe(0x312)](),'steps':_0x572607,'duration':Math[_0x5ac2fe(0x2a9)]((activeSequence[activeSequence[_0x5ac2fe(0x3e0)]-0x1]['ts']-_0x4d9a31)/0x3e8),'daytime':new Date(_0x4d9a31)['getHours']()};_0x6b1890[_0x5ac2fe(0x274)](_0xb7c3b5),_0x6b1890[_0x5ac2fe(0x3e0)]>MAX_TRAINING_SET_SIZE&&_0x6b1890['shift'](),await _0x506e8e['setStateAsync']('LTM.trainingData.sequences',{'val':JSON[_0x5ac2fe(0x38e)](_0x6b1890),'ack':!![]}),runSecurityCheck(_0x506e8e,_0xb7c3b5),activeSequence=[],sequenceTimer=null;}catch(_0x5397f4){_0x506e8e[_0x5ac2fe(0x288)]['error'](_0x5ac2fe(0x30b)+_0x5397f4[_0x5ac2fe(0x25f)]);}}function runSecurityCheck(_0x37f57a,_0x4c77b1){const _0x3080b4=a0_0x94cfc7;if(!_0x37f57a[_0x3080b4(0x2a8)])return;_0x37f57a[_0x3080b4(0x288)][_0x3080b4(0x3f7)]('üõ°Ô∏è\x20SECURITY:\x20Sending\x20sequence\x20to\x20Guard\x20for\x20analysis...'),sendToPython(_0x37f57a,_0x3080b4(0x263),{'sequence':_0x4c77b1});}async function getOutsideTemperatureNumeric(_0x168abe){const _0x5a3163=a0_0x94cfc7;if(_0x168abe[_0x5a3163(0x377)][_0x5a3163(0x1f4)])try{const _0x293016=await _0x168abe[_0x5a3163(0x386)](_0x168abe[_0x5a3163(0x377)][_0x5a3163(0x1f4)]);if(_0x293016&&_0x293016['val']!==undefined&&_0x293016[_0x5a3163(0x236)]!==null){const _0x3e2332=parseFloat(_0x293016['val']);if(!isNaN(_0x3e2332))return _0x3e2332;}}catch(_0x4e981c){_0x168abe[_0x5a3163(0x288)][_0x5a3163(0x414)]('Error\x20reading\x20outdoor\x20sensor\x20'+_0x168abe[_0x5a3163(0x377)][_0x5a3163(0x1f4)]+':\x20'+_0x4e981c['message']);}const _0x6d0499=_0x168abe[_0x5a3163(0x377)][_0x5a3163(0x262)];if(!_0x168abe[_0x5a3163(0x377)][_0x5a3163(0x221)]||!_0x6d0499)return null;try{let _0x4ed4dc='';if(_0x6d0499[_0x5a3163(0x408)](_0x5a3163(0x424)))_0x4ed4dc=_0x6d0499+_0x5a3163(0x20a);else{if(_0x6d0499[_0x5a3163(0x408)]('daswetter'))_0x4ed4dc=_0x6d0499+_0x5a3163(0x3ae);else{if(_0x6d0499[_0x5a3163(0x408)](_0x5a3163(0x22f)))_0x4ed4dc=_0x6d0499+_0x5a3163(0x297);else{if(_0x6d0499[_0x5a3163(0x408)](_0x5a3163(0x292)))_0x4ed4dc=_0x6d0499+_0x5a3163(0x3bb);}}}if(_0x4ed4dc){const _0x4ee02f=await _0x168abe['getForeignStateAsync'](_0x4ed4dc);if(_0x4ee02f&&_0x4ee02f[_0x5a3163(0x236)]!==undefined&&_0x4ee02f[_0x5a3163(0x236)]!==null)return parseFloat(_0x4ee02f[_0x5a3163(0x236)]);}}catch(_0x11bb29){}return null;}async function recordThermodynamics(_0x39d57b,_0x8708d0,_0x4563e3,_0x4f6d6e){const _0x2fa6a5=a0_0x94cfc7,_0x6da194=await getOutsideTemperatureNumeric(_0x39d57b),_0x1f0179=await _0x39d57b[_0x2fa6a5(0x3e5)](_0x2fa6a5(0x237));let _0x34770b=[];if(_0x1f0179&&_0x1f0179[_0x2fa6a5(0x236)])try{_0x34770b=JSON[_0x2fa6a5(0x284)](_0x1f0179['val']);}catch(_0x1da7ed){}_0x34770b[_0x2fa6a5(0x274)]({'ts':Date['now'](),'room':_0x4f6d6e||_0x2fa6a5(0x2df),'t_in':_0x4563e3,'t_out':_0x6da194});if(_0x34770b[_0x2fa6a5(0x3e0)]>THERMO_LOG_SIZE)_0x34770b[_0x2fa6a5(0x317)]();await _0x39d57b[_0x2fa6a5(0x306)](_0x2fa6a5(0x237),{'val':JSON[_0x2fa6a5(0x38e)](_0x34770b),'ack':!![]});}async function processSensorEvent(_0x1f1045,_0x537940,_0x322a8e,_0x3d4230){const _0x561192=a0_0x94cfc7;if(!_0x3d4230)return;const _0xf1838d=_0x322a8e[_0x561192(0x236)],_0x302853=Date[_0x561192(0x2ad)]();_0x1f1045[_0x561192(0x288)][_0x561192(0x3f7)](_0x561192(0x24d)+_0x537940+_0x561192(0x26b)+_0xf1838d);const _0xfde29a=_0x1f1045[_0x561192(0x384)][_0x537940];_0x1f1045[_0x561192(0x384)][_0x537940]=_0xf1838d;if(!_0x3d4230['logDuplicates']&&_0xfde29a!=undefined&&_0xfde29a==_0xf1838d){_0x1f1045[_0x561192(0x288)][_0x561192(0x3f7)](_0x561192(0x3b8)+_0x3d4230[_0x561192(0x287)]+_0x561192(0x20e)+_0xf1838d+')');return;}const _0x42800e=(_0x3d4230['type']||'')['toLowerCase'](),_0x1239ad=_0x42800e[_0x561192(0x408)](_0x561192(0x402))||_0x42800e[_0x561192(0x408)](_0x561192(0x325))||_0x42800e['includes'](_0x561192(0x3ca))||_0x42800e['includes']('heizung');_0x1f1045[_0x561192(0x2a8)]&&_0x1239ad&&recordThermodynamics(_0x1f1045,_0x537940,_0xf1838d,_0x3d4230['location']);const _0x4a9eed={'timestamp':_0x302853,'id':_0x537940,'name':_0x3d4230[_0x561192(0x287)],'type':_0x3d4230['type'],'location':_0x3d4230['location'],'value':_0xf1838d};_0x1f1045[_0x561192(0x2bd)][_0x561192(0x3ba)](_0x4a9eed);if(_0x1f1045[_0x561192(0x2bd)][_0x561192(0x3e0)]>HISTORY_MAX_SIZE)_0x1f1045[_0x561192(0x2bd)][_0x561192(0x2cb)]();await _0x1f1045['setStateAsync'](_0x561192(0x3b0),{'val':JSON[_0x561192(0x38e)](_0x4a9eed),'ack':!![]}),await _0x1f1045[_0x561192(0x306)]('events.history',{'val':JSON[_0x561192(0x38e)](_0x1f1045[_0x561192(0x2bd)]),'ack':!![]});_0x1f1045[_0x561192(0x2a8)]&&(_0x1f1045[_0x561192(0x331)]['push'](_0x4a9eed),await saveRawEventLog(_0x1f1045),recordSequence(_0x1f1045,_0x4a9eed));if(_0x3d4230[_0x561192(0x1fe)]&&_0xf1838d===!![]){if(_0x1f1045['isPresent']&&!_0x1f1045['isGracePeriodActive'])_0x1f1045[_0x561192(0x288)][_0x561192(0x273)]('Exit\x20Sensor\x20triggered\x20('+_0x3d4230[_0x561192(0x287)]+_0x561192(0x427)),startExitTimer(_0x1f1045);else!_0x1f1045['isPresent']&&(_0x1f1045[_0x561192(0x288)]['info'](_0x561192(0x2d9)+_0x3d4230['name']+_0x561192(0x286)),await setPresence(_0x1f1045,!![]));}else _0x3d4230[_0x561192(0x3db)]===_0x561192(0x2b5)&&_0xf1838d===!![]&&(_0x1f1045[_0x561192(0x3c4)]&&(_0x1f1045['log'][_0x561192(0x273)](_0x561192(0x2dd)),abortExitTimer(_0x1f1045)),!_0x1f1045['isPresent']&&_0x1f1045['currentSystemMode']===SYSTEM_MODES[_0x561192(0x2fb)]&&await setPresence(_0x1f1045,!![]));}async function runGeminiAnalysis(_0x561374,_0x34a077=''){const _0x330a8a=a0_0x94cfc7;if(!_0x561374[_0x330a8a(0x220)])return;if(_0x561374[_0x330a8a(0x2bd)]['length']===0x0)return;const _0x32bd20=_0x561374[_0x330a8a(0x2bd)][_0x330a8a(0x3b3)](0x0,0xf),_0x1c7062=await getWeatherContext(_0x561374),_0x49f1ae=_0x561374['currentSystemMode'],_0x108ca4=PERSONA_MAPPING[_0x561374[_0x330a8a(0x377)][_0x330a8a(0x319)]||_0x330a8a(0x32d)],_0x390b31=_0x561374['config'][_0x330a8a(0x21b)]||'Keine\x20Details.';let _0x4550ad=_0x330a8a(0x41c);try{const _0x5f1e65=await _0x561374['getStateAsync'](_0x330a8a(0x22a));if(_0x5f1e65&&_0x5f1e65[_0x330a8a(0x236)])_0x4550ad=_0x5f1e65[_0x330a8a(0x236)];}catch(_0x221a5c){}let _0x4b2cdc=![];try{const _0x1f3712=await _0x561374[_0x330a8a(0x3e5)](_0x330a8a(0x2e8));if(_0x1f3712&&_0x1f3712[_0x330a8a(0x236)])_0x4b2cdc=!![];}catch(_0x32ff66){}const _0x1fd692=_0x330a8a(0x30c)+_0x108ca4+_0x330a8a(0x24b)+_0x390b31+_0x330a8a(0x1f7)+_0x49f1ae+'.\x0a\x20\x20\x20\x20WETTER:\x20'+_0x1c7062+_0x330a8a(0x39e)+(_0x34a077||_0x330a8a(0x422))+_0x330a8a(0x3e2)+(_0x561374['isPresent']?_0x330a8a(0x33b):'ABWESEND')+_0x330a8a(0x320)+_0x4550ad+_0x330a8a(0x27d)+JSON[_0x330a8a(0x38e)](_0x32bd20)+_0x330a8a(0x389);try{const _0x2e2830=await _0x561374[_0x330a8a(0x220)]['generateContent'](_0x1fd692),_0x10e82d=_0x2e2830[_0x330a8a(0x328)][_0x330a8a(0x369)]()[_0x330a8a(0x400)](/```json|```/g,'')[_0x330a8a(0x205)](),_0x66c9a=JSON['parse'](_0x10e82d);await _0x561374[_0x330a8a(0x306)]('analysis.lastResult',{'val':JSON[_0x330a8a(0x38e)](_0x66c9a),'ack':!![]});_0x66c9a['summary']&&await _0x561374[_0x330a8a(0x306)](_0x330a8a(0x322),{'val':_0x66c9a[_0x330a8a(0x2a3)],'ack':!![]});const _0x2a1550={'timestamp':Date['now'](),'id':Date[_0x330a8a(0x2ad)]()[_0x330a8a(0x383)](),'analysis':{'activity':{'summary':_0x66c9a[_0x330a8a(0x2a3)]||_0x330a8a(0x31b),'isAlert':_0x66c9a[_0x330a8a(0x3fe)]||![],'alertReason':_0x66c9a[_0x330a8a(0x366)]},'comfort':{'automationProposal':_0x66c9a[_0x330a8a(0x3fb)]}}};await updateAnalysisHistory(_0x561374,_0x2a1550);const _0x3a20c8=_0x66c9a[_0x330a8a(0x3fe)]||![];_0x3a20c8!==_0x561374[_0x330a8a(0x2c4)]&&(await _0x561374['setStateAsync'](_0x330a8a(0x20b),{'val':_0x3a20c8,'ack':!![]}),_0x561374[_0x330a8a(0x2c4)]=_0x3a20c8,_0x3a20c8&&(await _0x561374[_0x330a8a(0x306)](_0x330a8a(0x342),{'val':_0x66c9a[_0x330a8a(0x366)],'ack':!![]}),sendNotification(_0x561374,'‚ö†Ô∏è\x20ALARM:\x20'+_0x66c9a['alertReason'],![],_0x66c9a[_0x330a8a(0x387)]))),_0x66c9a[_0x330a8a(0x3fb)]&&_0x66c9a[_0x330a8a(0x3fb)][_0x330a8a(0x3f8)]&&_0x66c9a[_0x330a8a(0x3fb)]['targetId']&&(_0x561374[_0x330a8a(0x288)][_0x330a8a(0x273)](_0x330a8a(0x3b9)+_0x66c9a[_0x330a8a(0x3fb)][_0x330a8a(0x20d)]),await _0x561374['setStateAsync'](_0x330a8a(0x2f2),{'val':!![],'ack':!![]}),await _0x561374['setStateAsync'](_0x330a8a(0x34d),{'val':_0x66c9a[_0x330a8a(0x3fb)][_0x330a8a(0x20d)],'ack':!![]}),await _0x561374[_0x330a8a(0x306)](_0x330a8a(0x247),{'val':_0x66c9a[_0x330a8a(0x3fb)]['targetId'],'ack':!![]}),await _0x561374['setStateAsync'](_0x330a8a(0x3d9),{'val':JSON[_0x330a8a(0x38e)](_0x66c9a[_0x330a8a(0x3fb)][_0x330a8a(0x304)]),'ack':!![]}),_0x4b2cdc&&(_0x561374[_0x330a8a(0x288)][_0x330a8a(0x273)](_0x330a8a(0x3f6)+_0x66c9a['automationProposal'][_0x330a8a(0x26f)]+_0x330a8a(0x2d6)),await executeAutomationAction(_0x561374)));}catch(_0x1d9e6f){_0x561374['log'][_0x330a8a(0x30f)](_0x330a8a(0x3d3)+_0x1d9e6f['message']);}}function installPythonDependencies(_0x2cf6b9){const _0x3b08ed=a0_0x94cfc7;if(_0x2cf6b9[_0x3b08ed(0x230)])return;_0x2cf6b9[_0x3b08ed(0x230)]=!![];const _0xdc0753=path[_0x3b08ed(0x380)](__dirname,_0x3b08ed(0x2ab),_0x3b08ed(0x3b5));_0x2cf6b9[_0x3b08ed(0x288)][_0x3b08ed(0x273)](_0x3b08ed(0x245)+_0xdc0753+_0x3b08ed(0x2d6)),stopPythonService(_0x2cf6b9);const _0x95e2bc=_0x3b08ed(0x34c)+_0xdc0753+_0x3b08ed(0x3ad);exec(_0x95e2bc,(_0x1c5aed,_0x49f4c1,_0x183df0)=>{const _0x526c69=_0x3b08ed,_0x4e6140=_0x183df0&&_0x183df0[_0x526c69(0x408)]('No\x20module\x20named\x20pip')||_0x1c5aed&&_0x1c5aed['message'][_0x526c69(0x408)](_0x526c69(0x3d5));if(_0x4e6140){_0x2cf6b9[_0x526c69(0x288)][_0x526c69(0x414)](_0x526c69(0x234)),exec(_0x526c69(0x2a5),(_0x30a3de,_0x1020d0,_0x11f0e2)=>{const _0x3af96c=_0x526c69;_0x30a3de?(_0x2cf6b9['log']['error']('‚ùå\x20CRITICAL:\x20Self-healing\x20failed.\x20The\x20system\x20is\x20locked\x20down.'),_0x2cf6b9[_0x3af96c(0x288)][_0x3af96c(0x30f)](_0x3af96c(0x212)),_0x2cf6b9[_0x3af96c(0x230)]=![]):(_0x2cf6b9[_0x3af96c(0x288)][_0x3af96c(0x273)](_0x3af96c(0x1ff)),exec(_0x3af96c(0x34c)+_0xdc0753+'\x22\x20--break-system-packages\x20--user',(_0x554dca,_0x4682cc,_0x2a4456)=>{const _0x3d1189=_0x3af96c;_0x554dca?_0x2cf6b9[_0x3d1189(0x288)]['error']('‚ùå\x20Installation\x20failed\x20even\x20after\x20bootstrap:\x20'+_0x554dca[_0x3d1189(0x25f)]):(_0x2cf6b9[_0x3d1189(0x288)]['info'](_0x3d1189(0x259)),startPythonService(_0x2cf6b9)),_0x2cf6b9[_0x3d1189(0x230)]=![];}));});return;}_0x2cf6b9['dependencyInstallInProgress']=![],_0x1c5aed?(_0x2cf6b9[_0x526c69(0x288)]['error'](_0x526c69(0x29c)),_0x2cf6b9[_0x526c69(0x288)]['error']('Details:\x20'+(_0x183df0||_0x1c5aed['message']))):(_0x2cf6b9[_0x526c69(0x288)][_0x526c69(0x273)](_0x526c69(0x371)),startPythonService(_0x2cf6b9));});}function sendToPython(_0x2c94d6,_0x3ab981,_0x259086={}){const _0x2dbdad=a0_0x94cfc7;if(!_0x2c94d6['pythonProcess']||!_0x2c94d6[_0x2dbdad(0x2e2)][_0x2dbdad(0x29e)][_0x2dbdad(0x21a)])return;const _0x364c0a=JSON[_0x2dbdad(0x38e)]({'command':_0x3ab981,..._0x259086});try{_0x2c94d6['pythonProcess']['stdin'][_0x2dbdad(0x3de)](_0x364c0a+'\x0a');}catch(_0x1a37e1){_0x2c94d6[_0x2dbdad(0x288)][_0x2dbdad(0x30f)](_0x2dbdad(0x399)+_0x1a37e1[_0x2dbdad(0x25f)]);}}function runPythonHealthCheck(_0x465ab3){const _0xa64ab0=a0_0x94cfc7;if(!_0x465ab3[_0xa64ab0(0x395)]||_0x465ab3['dailyDigests'][_0xa64ab0(0x3e0)]<0x2){_0x465ab3['log']['info'](_0xa64ab0(0x2fd));return;}const _0x4c2299=_0x465ab3[_0xa64ab0(0x395)]['map'](_0x34a27d=>{const _0x29959a=_0xa64ab0,_0x427fb6=(_0x34a27d[_0x29959a(0x2ba)]||'')[_0x29959a(0x40b)]();return ACTIVITY_LEVEL_MAP[_0x427fb6]||0x32;});_0x465ab3[_0xa64ab0(0x288)][_0xa64ab0(0x273)]('Guardian:\x20Sending\x20'+_0x4c2299[_0xa64ab0(0x3e0)]+_0xa64ab0(0x23e)),sendToPython(_0x465ab3,_0xa64ab0(0x375),{'values':_0x4c2299,'tag':_0xa64ab0(0x2a6)});}function handlePythonResult(_0x127693,_0xd2abd2){const _0x1da811=a0_0x94cfc7;if(_0xd2abd2[_0x1da811(0x3db)]==='PONG')_0x127693[_0x1da811(0x288)][_0x1da811(0x3f7)](_0x1da811(0x3d2));else{if(_0xd2abd2['type']===_0x1da811(0x25c)){const {tag:_0x298d9f,diagnosis:_0xf617b5,change_percent:_0x1f39f2}=_0xd2abd2[_0x1da811(0x418)];_0x127693['log'][_0x1da811(0x273)](_0x1da811(0x202)+_0x298d9f+_0x1da811(0x28b)+_0xf617b5+'\x20('+_0x1f39f2+'%)'),_0x127693[_0x1da811(0x306)]('analysis.health.trendDiagnosis',{'val':_0xf617b5,'ack':!![]}),_0x127693[_0x1da811(0x306)]('analysis.health.trendValue',{'val':_0x1f39f2,'ack':!![]});}else{if(_0xd2abd2['type']===_0x1da811(0x385)){const {success:_0x1fa6d9,details:_0x88abf0}=_0xd2abd2[_0x1da811(0x418)];_0x1fa6d9?(_0x127693[_0x1da811(0x288)][_0x1da811(0x273)](_0x1da811(0x373)+_0x88abf0),_0x127693[_0x1da811(0x306)](_0x1da811(0x242),{'val':_0x1da811(0x32f)+new Date()[_0x1da811(0x428)]()+'\x20('+_0x88abf0+')','ack':!![]})):(_0x127693[_0x1da811(0x288)][_0x1da811(0x30f)]('‚ùå\x20Training\x20failed:\x20'+(_0x88abf0||_0x1da811(0x2b7))),_0x127693['setStateAsync'](_0x1da811(0x242),{'val':_0x1da811(0x3af)+_0x88abf0,'ack':!![]}));}else{if(_0xd2abd2[_0x1da811(0x3db)]===_0x1da811(0x299)){const {anomaly_score:_0x8864a8,is_anomaly:_0x27a9dc,threshold:_0x483afc}=_0xd2abd2[_0x1da811(0x418)];_0x127693[_0x1da811(0x288)][_0x1da811(0x273)](_0x1da811(0x24c)+_0x8864a8['toFixed'](0x5)+_0x1da811(0x3a7)+_0x483afc+_0x1da811(0x246)+(_0x27a9dc?_0x1da811(0x222):'OK')),_0x127693[_0x1da811(0x306)]('analysis.security.lastScore',{'val':_0x8864a8,'ack':!![]}),_0x127693[_0x1da811(0x306)](_0x1da811(0x368),{'val':new Date()[_0x1da811(0x312)](),'ack':!![]});if(_0x27a9dc){const _0x1397bc=_0x1da811(0x2a1)+_0x8864a8[_0x1da811(0x41a)](0x4)+')';_0x127693[_0x1da811(0x306)](_0x1da811(0x20b),{'val':!![],'ack':!![]}),_0x127693[_0x1da811(0x306)](_0x1da811(0x342),{'val':_0x1397bc,'ack':!![]}),sendNotification(_0x127693,_0x1da811(0x3b4)+_0x1397bc,![],!![]);}}}}}}function startPythonService(_0xe5d13c){const _0x7862b8=a0_0x94cfc7;try{const _0x2be159=path[_0x7862b8(0x380)](__dirname,_0x7862b8(0x2ab),_0x7862b8(0x23c));_0xe5d13c['log']['info'](_0x7862b8(0x404)+_0x2be159),_0xe5d13c[_0x7862b8(0x2e2)]=spawn(_0x7862b8(0x201),[_0x2be159]),_0xe5d13c[_0x7862b8(0x2e2)][_0x7862b8(0x28a)]['on'](_0x7862b8(0x3f5),_0x2468c3=>{const _0x508fc5=_0x7862b8,_0x150dd7=_0x2468c3['toString']()[_0x508fc5(0x2f7)]('\x0a');_0x150dd7['forEach'](_0x399614=>{const _0x2fa03d=_0x508fc5,_0xb9067d=_0x399614[_0x2fa03d(0x205)]();if(!_0xb9067d)return;if(_0xb9067d[_0x2fa03d(0x2bb)](_0x2fa03d(0x3a1)))_0xe5d13c[_0x2fa03d(0x288)][_0x2fa03d(0x3f7)]('[PYTHON]\x20'+_0xb9067d[_0x2fa03d(0x3f2)](0x5)['trim']());else{if(_0xb9067d['startsWith']('[RESULT]'))try{const _0x2254a2=JSON[_0x2fa03d(0x284)](_0xb9067d[_0x2fa03d(0x3f2)](0x8)[_0x2fa03d(0x205)]());handlePythonResult(_0xe5d13c,_0x2254a2);}catch(_0x29dcf4){_0xe5d13c['log']['warn'](_0x2fa03d(0x2d4)+_0xb9067d);}}(_0xb9067d[_0x2fa03d(0x408)](_0x2fa03d(0x396))||_0xb9067d[_0x2fa03d(0x408)](_0x2fa03d(0x2c9))||_0xb9067d[_0x2fa03d(0x408)](_0x2fa03d(0x351)))&&(_0xe5d13c[_0x2fa03d(0x288)][_0x2fa03d(0x414)](_0x2fa03d(0x42b)),installPythonDependencies(_0xe5d13c));});}),_0xe5d13c[_0x7862b8(0x2e2)][_0x7862b8(0x420)]['on'](_0x7862b8(0x3f5),_0x5a654d=>{const _0x1441f6=_0x7862b8,_0x2c520b=_0x5a654d['toString']()[_0x1441f6(0x205)]();_0xe5d13c[_0x1441f6(0x288)][_0x1441f6(0x30f)](_0x1441f6(0x2ae)+_0x2c520b);}),_0xe5d13c['pythonProcess']['on'](_0x7862b8(0x40c),_0x3f4ee8=>{const _0xd59818=_0x7862b8;_0xe5d13c[_0xd59818(0x288)]['info'](_0xd59818(0x3c0)+_0x3f4ee8),_0xe5d13c['pythonProcess']=null;}),_0xe5d13c[_0x7862b8(0x2e2)]['on'](_0x7862b8(0x30f),_0x41c148=>{const _0x10876c=_0x7862b8;_0xe5d13c['log']['warn'](_0x10876c(0x2de)+_0x41c148[_0x10876c(0x25f)]);});}catch(_0x2e83a4){_0xe5d13c[_0x7862b8(0x288)][_0x7862b8(0x30f)](_0x7862b8(0x367)+_0x2e83a4[_0x7862b8(0x25f)]);}}function stopPythonService(_0x1cd8c2){const _0x38c121=a0_0x94cfc7;if(_0x1cd8c2[_0x38c121(0x2e2)]){_0x1cd8c2[_0x38c121(0x288)][_0x38c121(0x273)]('üêç\x20Stopping\x20Python\x20Sidecar...');try{_0x1cd8c2['pythonProcess'][_0x38c121(0x359)]();}catch(_0x74b94c){_0x1cd8c2[_0x38c121(0x288)]['warn'](_0x38c121(0x40f)+_0x74b94c[_0x38c121(0x25f)]);}_0x1cd8c2[_0x38c121(0x2e2)]=null;}}class CogniLiving extends utils[a0_0x94cfc7(0x3bd)]{constructor(_0x578754){const _0xc75a26=a0_0x94cfc7;super({..._0x578754,'name':_0xc75a26(0x2db)}),this[_0xc75a26(0x2bd)]=[],this[_0xc75a26(0x256)]=[],this['feedbackHistory']=[],this[_0xc75a26(0x331)]=[],this[_0xc75a26(0x395)]=[],this[_0xc75a26(0x384)]={},this[_0xc75a26(0x231)]={'latitude':0x0,'longitude':0x0,'city':''},this['isPresent']=!![],this['exitTimer']=null,this[_0xc75a26(0x29f)]=null,this['isGracePeriodActive']=![],this[_0xc75a26(0x413)]=null,this[_0xc75a26(0x220)]=null,this[_0xc75a26(0x3f9)]=SYSTEM_MODES[_0xc75a26(0x2fb)],this[_0xc75a26(0x2a8)]=![],this[_0xc75a26(0x2c4)]=![],this[_0xc75a26(0x3cf)]=_0xc75a26(0x3ee),this[_0xc75a26(0x41b)]=null,this[_0xc75a26(0x394)]=null,this[_0xc75a26(0x209)]=null,this[_0xc75a26(0x33a)]=null,this[_0xc75a26(0x2ee)]=null,this['pythonProcess']=null,this['dependencyInstallInProgress']=![],this['on'](_0xc75a26(0x2ef),this[_0xc75a26(0x37d)][_0xc75a26(0x3b7)](this)),this['on'](_0xc75a26(0x3aa),this[_0xc75a26(0x204)][_0xc75a26(0x3b7)](this)),this['on'](_0xc75a26(0x2c0),this['onUnload'][_0xc75a26(0x3b7)](this)),this['on'](_0xc75a26(0x25f),this[_0xc75a26(0x397)][_0xc75a26(0x3b7)](this));}async[a0_0x94cfc7(0x37d)](){const _0x28dee9=a0_0x94cfc7;this['log'][_0x28dee9(0x273)](_0x28dee9(0x28f)+this['version']+_0x28dee9(0x239)),await initZombies(this),this[_0x28dee9(0x377)][_0x28dee9(0x338)]=this['config'][_0x28dee9(0x338)]||'';try{this['isProVersion']=await checkLicense(this,this['config'][_0x28dee9(0x338)]);}catch(_0x1059b4){}if(!this['config'][_0x28dee9(0x329)]||this[_0x28dee9(0x377)]['inactivityThresholdHours']<0.1)this[_0x28dee9(0x377)][_0x28dee9(0x329)]=0xc;await initHistory(this),await initSystemConfig(this);if(this[_0x28dee9(0x377)][_0x28dee9(0x410)])try{this[_0x28dee9(0x413)]=new GoogleGenerativeAI(this[_0x28dee9(0x377)]['geminiApiKey']),this[_0x28dee9(0x220)]=this[_0x28dee9(0x413)][_0x28dee9(0x281)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x28dee9(0x2b1)}}),this[_0x28dee9(0x288)][_0x28dee9(0x273)](_0x28dee9(0x2a7));}catch(_0x3139a7){this[_0x28dee9(0x288)][_0x28dee9(0x30f)](_0x28dee9(0x350)+_0x3139a7[_0x28dee9(0x25f)]);}await createAllObjects(this),await loadSystemMode(this),await loadRawEventLog(this),await loadDailyDigests(this),this[_0x28dee9(0x2fa)](_0x28dee9(0x23b)),this[_0x28dee9(0x2fa)](LTM_DP_TRIGGER_DIGEST),this[_0x28dee9(0x2fa)](_0x28dee9(0x25d)),this['subscribeStates'](_0x28dee9(0x33c)),this['subscribeStates']('analysis.automation.triggerAction'),this['subscribeStates']('analysis.automation.autoApply'),this['subscribeStates'](_0x28dee9(0x3e3)),await initSensorSubscriptions(this),await initPresenceSubscriptions(this),await setupTelegramListener(this),setTimeout(()=>checkWifiPresence(this),0x1388);if(this[_0x28dee9(0x41b)])clearInterval(this[_0x28dee9(0x41b)]);const _0x4f75c8=this['config']['analysisInterval']||0xf;_0x4f75c8>0x0&&(this[_0x28dee9(0x288)][_0x28dee9(0x273)](_0x28dee9(0x2bc)+_0x4f75c8+_0x28dee9(0x337)),this[_0x28dee9(0x41b)]=setInterval(()=>{runAutopilot(this);},_0x4f75c8*0x3c*0x3e8)),setupLtmScheduler(this),setupModeResetScheduler(this),setupDriftAnalysisScheduler(this),setupBriefingScheduler(this),startPythonService(this),setTimeout(()=>{const _0x3a37ea=_0x28dee9;this[_0x3a37ea(0x2e2)]&&runPythonHealthCheck(this);},0x1388);}[a0_0x94cfc7(0x391)](_0x17d3e3){const _0xa65d40=a0_0x94cfc7;if(this[_0xa65d40(0x41b)])clearInterval(this['analysisTimer']);if(this[_0xa65d40(0x33a)])clearInterval(this[_0xa65d40(0x33a)]);if(this[_0xa65d40(0x394)])this[_0xa65d40(0x394)][_0xa65d40(0x341)]();if(this['modeResetJob'])this[_0xa65d40(0x209)]['cancel']();if(this[_0xa65d40(0x2ee)])this['briefingJob']['cancel']();if(this[_0xa65d40(0x3c4)])clearTimeout(this['exitTimer']);if(this[_0xa65d40(0x29f)])clearTimeout(this[_0xa65d40(0x29f)]);stopPythonService(this),_0x17d3e3();}async['onStateChange'](_0x50848b,_0x1942e9){const _0x408f2f=a0_0x94cfc7;if(!_0x1942e9)return;if(_0x50848b[_0x408f2f(0x408)](_0x408f2f(0x357))&&_0x50848b['endsWith'](_0x408f2f(0x3e8))&&_0x1942e9[_0x408f2f(0x236)]){await handleTelegramResponse(this,_0x1942e9[_0x408f2f(0x236)]);return;}if(_0x50848b===this[_0x408f2f(0x3ac)]+'.'+SYSTEM_DP_MODE){_0x1942e9['val']&&Object['values'](SYSTEM_MODES)['includes'](_0x1942e9[_0x408f2f(0x236)])&&(this[_0x408f2f(0x3f9)]=_0x1942e9['val'],_0x1942e9[_0x408f2f(0x236)]===SYSTEM_MODES[_0x408f2f(0x264)]?await setPresence(this,![]):await setPresence(this,!![]));if(!_0x1942e9[_0x408f2f(0x348)])this[_0x408f2f(0x3c1)](_0x50848b,{'val':this[_0x408f2f(0x3f9)],'ack':!![]});return;}if(!_0x1942e9['ack']){_0x50848b[_0x408f2f(0x408)](_0x408f2f(0x23b))&&_0x1942e9[_0x408f2f(0x236)]&&(this[_0x408f2f(0x3c1)](_0x50848b,{'val':![],'ack':!![]}),runGeminiAnalysis(this));if(_0x50848b[_0x408f2f(0x408)](_0x408f2f(0x354))&&_0x1942e9[_0x408f2f(0x236)]){this[_0x408f2f(0x3c1)](_0x50848b,{'val':![],'ack':!![]});if(this[_0x408f2f(0x2a8)])createDailyDigest(this);}_0x50848b[_0x408f2f(0x408)](_0x408f2f(0x2c2))&&_0x1942e9[_0x408f2f(0x236)]&&(this[_0x408f2f(0x3c1)](_0x50848b,{'val':![],'ack':!![]}),sendMorningBriefing(this));_0x50848b[_0x408f2f(0x408)]('automation.triggerAction')&&_0x1942e9[_0x408f2f(0x236)]&&(this[_0x408f2f(0x3c1)](_0x50848b,{'val':![],'ack':!![]}),executeAutomationAction(this));if(_0x50848b[_0x408f2f(0x408)]('analysis.training.triggerSecurity')&&_0x1942e9[_0x408f2f(0x236)]){this[_0x408f2f(0x3c1)](_0x50848b,{'val':![],'ack':!![]});if(!this['isProVersion']){this[_0x408f2f(0x288)][_0x408f2f(0x414)](_0x408f2f(0x2d0));return;}try{const _0x4fe938=await this[_0x408f2f(0x3e5)](_0x408f2f(0x3cd));if(_0x4fe938&&_0x4fe938[_0x408f2f(0x236)]){const _0x38893a=JSON[_0x408f2f(0x284)](_0x4fe938[_0x408f2f(0x236)]);this[_0x408f2f(0x288)]['info'](_0x408f2f(0x208)+_0x38893a[_0x408f2f(0x3e0)]+'\x20sequences...'),this[_0x408f2f(0x306)]('analysis.training.status',{'val':'Training\x20started...','ack':!![]}),sendToPython(this,_0x408f2f(0x37b),{'sequences':_0x38893a});}else this[_0x408f2f(0x288)][_0x408f2f(0x414)]('No\x20training\x20sequences\x20found.'),this[_0x408f2f(0x306)](_0x408f2f(0x242),{'val':'No\x20Data','ack':!![]});}catch(_0x11cdab){this[_0x408f2f(0x288)][_0x408f2f(0x30f)](_0x408f2f(0x229)+_0x11cdab['message']);}}return;}if(this['config']['presenceDevices']&&this[_0x408f2f(0x377)]['presenceDevices'][_0x408f2f(0x408)](_0x50848b)){await checkWifiPresence(this);return;}const _0xc76a0d=(this[_0x408f2f(0x377)][_0x408f2f(0x41f)]||[])[_0x408f2f(0x2e1)](_0x1e9abb=>_0x1e9abb['id']===_0x50848b);if(_0xc76a0d)processSensorEvent(this,_0x50848b,_0x1942e9,_0xc76a0d);}async[a0_0x94cfc7(0x397)](_0x553e69){const _0x502dd2=a0_0x94cfc7;if(typeof _0x553e69==='object'&&_0x553e69[_0x502dd2(0x25f)])try{if(_0x553e69['command']===_0x502dd2(0x36f)){const _0x23c471=_0x553e69[_0x502dd2(0x25f)][_0x502dd2(0x223)]||this[_0x502dd2(0x377)][_0x502dd2(0x410)];if(!_0x23c471)return this[_0x502dd2(0x3a3)](_0x553e69['from'],_0x553e69[_0x502dd2(0x39d)],{'success':![],'message':_0x502dd2(0x36d)},_0x553e69[_0x502dd2(0x298)]);try{const _0x5aadfa=new GoogleGenerativeAI(_0x23c471),_0x4788ea=_0x5aadfa['getGenerativeModel']({'model':GEMINI_MODEL}),_0x4c54cc=await _0x4788ea['generateContent'](_0x502dd2(0x1f5)),_0x16f082=await _0x4c54cc[_0x502dd2(0x328)],_0x533517=_0x16f082['text']();this[_0x502dd2(0x3a3)](_0x553e69['from'],_0x553e69[_0x502dd2(0x39d)],{'success':!![],'message':'Verbindung\x20erfolgreich!\x20Antwort:\x20'+_0x533517[_0x502dd2(0x3f2)](0x0,0x14)+_0x502dd2(0x2d6)},_0x553e69[_0x502dd2(0x298)]);}catch(_0x579875){this[_0x502dd2(0x3a3)](_0x553e69['from'],_0x553e69[_0x502dd2(0x39d)],{'success':![],'message':_0x502dd2(0x26e)+_0x579875[_0x502dd2(0x25f)]},_0x553e69['callback']);}}else{if(_0x553e69[_0x502dd2(0x39d)]===_0x502dd2(0x30d)){const _0x24d1ec=await getWeatherContext(this),_0x93ee39=await getCalendarContext(this);this[_0x502dd2(0x3a3)](_0x553e69[_0x502dd2(0x2af)],_0x553e69[_0x502dd2(0x39d)],{'success':!![],'weather':_0x24d1ec,'calendar':_0x93ee39},_0x553e69[_0x502dd2(0x298)]);}else{if(_0x553e69[_0x502dd2(0x39d)]===_0x502dd2(0x3f3)){}else{if(_0x553e69[_0x502dd2(0x39d)]==='getLtmData'){if(!this[_0x502dd2(0x2a8)])return this['sendTo'](_0x553e69[_0x502dd2(0x2af)],_0x553e69[_0x502dd2(0x39d)],{'success':![],'isPro':![]},_0x553e69[_0x502dd2(0x298)]);let _0x5acf52={'status':_0x502dd2(0x3a6),'details':'','lastCheck':0x0};try{_0x5acf52[_0x502dd2(0x21d)]=(await this['getStateAsync'](LTM_DP_DRIFT_STATUS))[_0x502dd2(0x236)],_0x5acf52[_0x502dd2(0x275)]=(await this['getStateAsync'](LTM_DP_DRIFT_DETAILS))[_0x502dd2(0x236)],_0x5acf52[_0x502dd2(0x2ca)]=(await this[_0x502dd2(0x3e5)](LTM_DP_DRIFT_LAST_CHECK))[_0x502dd2(0x236)];}catch(_0x4ad858){}const _0x2dba11=this[_0x502dd2(0x256)]||[];this[_0x502dd2(0x3a3)](_0x553e69['from'],_0x553e69[_0x502dd2(0x39d)],{'success':!![],'isPro':!![],'dailyDigests':this[_0x502dd2(0x395)],'driftAnalysis':_0x5acf52,'analysisHistory':_0x2dba11},_0x553e69[_0x502dd2(0x298)]);}else{if(_0x553e69['command']===_0x502dd2(0x2eb)){const _0x25a2b2=this['dailyDigests'][_0x502dd2(0x3e0)],_0x58ba89=new Date(),_0x2271b2=new Date(_0x58ba89[_0x502dd2(0x3e7)](),_0x58ba89['getMonth'](),_0x58ba89[_0x502dd2(0x1fb)]())[_0x502dd2(0x3cb)](),_0x552dd4=this['rawEventLog'][_0x502dd2(0x27a)](_0xdda86=>new Date(_0xdda86[_0x502dd2(0x3c8)])[_0x502dd2(0x3cb)]()>_0x2271b2)[_0x502dd2(0x3e0)],_0x22f875=new Array(0x18)[_0x502dd2(0x2fc)](0x0);this['rawEventLog'][_0x502dd2(0x28e)](_0x61fde0=>{const _0x27eb16=_0x502dd2,_0x4b2438=new Date(_0x61fde0[_0x27eb16(0x3c8)]);if(_0x4b2438[_0x27eb16(0x3cb)]()>_0x2271b2)_0x22f875[_0x4b2438[_0x27eb16(0x23f)]()]++;});let _0x219fff={'status':_0x502dd2(0x3a6)};try{_0x219fff[_0x502dd2(0x21d)]=(await this['getStateAsync'](LTM_DP_DRIFT_STATUS))[_0x502dd2(0x236)];}catch(_0x5e6ba1){}let _0x54ead='';try{const _0x5d71be=await this[_0x502dd2(0x3e5)](_0x502dd2(0x22a));_0x54ead=_0x5d71be?_0x5d71be[_0x502dd2(0x236)]:'';}catch(_0x922012){}let _0x480906=null;!this['geminiModel']&&(_0x480906=this[_0x502dd2(0x377)][_0x502dd2(0x410)]?_0x502dd2(0x2cd):_0x502dd2(0x29b));let _0xe57c6c={'detected':![],'description':'','targetId':'','targetValue':'','autoApply':![]};try{const _0x3ff272=await this[_0x502dd2(0x3e5)](_0x502dd2(0x2f2)),_0x31267d=await this['getStateAsync'](_0x502dd2(0x34d)),_0x578c68=await this['getStateAsync'](_0x502dd2(0x247)),_0x39c95d=await this[_0x502dd2(0x3e5)](_0x502dd2(0x3d9)),_0x38547f=await this[_0x502dd2(0x3e5)](_0x502dd2(0x2e8));_0x3ff272&&_0x3ff272[_0x502dd2(0x236)]&&(_0xe57c6c[_0x502dd2(0x3f8)]=!![],_0xe57c6c[_0x502dd2(0x20d)]=_0x31267d?_0x31267d[_0x502dd2(0x236)]:'',_0xe57c6c[_0x502dd2(0x26f)]=_0x578c68?_0x578c68[_0x502dd2(0x236)]:'',_0xe57c6c[_0x502dd2(0x304)]=_0x39c95d?_0x39c95d['val']:''),_0xe57c6c['autoApply']=_0x38547f?!!_0x38547f[_0x502dd2(0x236)]:![];}catch(_0xceb1d2){}this[_0x502dd2(0x3a3)](_0x553e69[_0x502dd2(0x2af)],_0x553e69['command'],{'success':!![],'eventHistory':this[_0x502dd2(0x2bd)][_0x502dd2(0x3b3)](0x0,0xf),'stats':{'digestCount':_0x25a2b2,'eventCountToday':_0x552dd4,'hourlyActivity':_0x22f875,'driftStatus':_0x219fff[_0x502dd2(0x21d)],'isPresent':this['isPresent'],'presenceWho':_0x54ead,'minDays':this['config'][_0x502dd2(0x40a)]||0x7,'stbDays':this[_0x502dd2(0x377)][_0x502dd2(0x22d)]||0xe,'ltbDays':this['config']['ltmLtbWindowDays']||0x3c,'systemError':_0x480906},'automation':_0xe57c6c},_0x553e69['callback']);}else{if(_0x553e69['command']===_0x502dd2(0x406)){const _0x5618b8=await this[_0x502dd2(0x24e)](_0x502dd2(0x421),_0x502dd2(0x2f6)),_0x29bb31=[];if(_0x5618b8)for(const _0x5dc45f in _0x5618b8){const _0x2146ca=_0x5618b8[_0x5dc45f],_0x58e907=(_0x2146ca[_0x502dd2(0x405)]&&typeof _0x2146ca[_0x502dd2(0x405)]['name']==='object'?_0x2146ca[_0x502dd2(0x405)]['name']['de']:_0x2146ca[_0x502dd2(0x405)]['name'])||_0x2146ca[_0x502dd2(0x405)][_0x502dd2(0x287)];_0x29bb31[_0x502dd2(0x274)]({'id':_0x5dc45f,'name':_0x58e907});}this[_0x502dd2(0x3a3)](_0x553e69[_0x502dd2(0x2af)],_0x553e69['command'],{'success':!![],'enums':_0x29bb31},_0x553e69[_0x502dd2(0x298)]);}else{if(_0x553e69[_0x502dd2(0x39d)]==='scanDevices')try{const _0x6f08fb=await scanForDevices(this,_0x553e69['message']||{});this['sendTo'](_0x553e69[_0x502dd2(0x2af)],_0x553e69['command'],{'success':!![],'devices':_0x6f08fb},_0x553e69[_0x502dd2(0x298)]);}catch(_0x35624e){this[_0x502dd2(0x3a3)](_0x553e69[_0x502dd2(0x2af)],_0x553e69[_0x502dd2(0x39d)],{'success':![],'error':_0x35624e[_0x502dd2(0x25f)]},_0x553e69[_0x502dd2(0x298)]);}else{if(_0x553e69[_0x502dd2(0x39d)]===_0x502dd2(0x1f6)){const _0x121524=_0x553e69[_0x502dd2(0x25f)][_0x502dd2(0x2d7)];if(!_0x121524)return this[_0x502dd2(0x3a3)](_0x553e69[_0x502dd2(0x2af)],_0x553e69[_0x502dd2(0x39d)],{'success':![],'error':_0x502dd2(0x2d5)},_0x553e69[_0x502dd2(0x298)]);const _0x559ffc=await getCalendarNames(this,_0x121524);this[_0x502dd2(0x3a3)](_0x553e69[_0x502dd2(0x2af)],_0x553e69[_0x502dd2(0x39d)],{'success':!![],'names':_0x559ffc},_0x553e69[_0x502dd2(0x298)]);}else{if(_0x553e69[_0x502dd2(0x39d)]===_0x502dd2(0x2da)){const {targetId:_0x2306e8,targetValue:_0x4d4675}=_0x553e69[_0x502dd2(0x25f)];this[_0x502dd2(0x288)]['info'](_0x502dd2(0x3a0)+_0x2306e8+_0x502dd2(0x26b)+_0x4d4675),await this['setStateAsync'](_0x502dd2(0x2f2),{'val':!![],'ack':!![]}),await this[_0x502dd2(0x306)](_0x502dd2(0x34d),{'val':'SIMULATION:\x20Test-Vorschlag\x20f√ºr\x20'+_0x2306e8,'ack':!![]}),await this[_0x502dd2(0x306)](_0x502dd2(0x247),{'val':_0x2306e8,'ack':!![]}),await this[_0x502dd2(0x306)]('analysis.automation.targetValue',{'val':_0x4d4675,'ack':!![]}),this[_0x502dd2(0x3a3)](_0x553e69['from'],_0x553e69[_0x502dd2(0x39d)],{'success':!![]},_0x553e69['callback']);}else{if(_0x553e69[_0x502dd2(0x39d)]===_0x502dd2(0x401)){const {historyId:_0x3f42a0,rating:_0x5cb214,comment:_0x28b3ac,alertReason:_0x4c1730}=_0x553e69[_0x502dd2(0x25f)];_0x3f42a0&&_0x5cb214?(await saveFeedback(this,{'timestamp':Date[_0x502dd2(0x2ad)](),'historyId':_0x3f42a0,'rating':_0x5cb214,'comment':_0x28b3ac,'alertReason':_0x4c1730}),this[_0x502dd2(0x3a3)](_0x553e69['from'],_0x553e69[_0x502dd2(0x39d)],{'success':!![]},_0x553e69[_0x502dd2(0x298)])):this[_0x502dd2(0x3a3)](_0x553e69[_0x502dd2(0x2af)],_0x553e69[_0x502dd2(0x39d)],{'success':![],'error':_0x502dd2(0x3cc)},_0x553e69[_0x502dd2(0x298)]);}else _0x553e69['command']==='dismissAutomation'&&(this['log'][_0x502dd2(0x273)](_0x502dd2(0x30a)),await this[_0x502dd2(0x306)](_0x502dd2(0x2f2),{'val':![],'ack':!![]}),await this['setStateAsync']('analysis.automation.description',{'val':'','ack':!![]}),this[_0x502dd2(0x3a3)](_0x553e69['from'],_0x553e69[_0x502dd2(0x39d)],{'success':!![]},_0x553e69[_0x502dd2(0x298)]));}}}}}}}}}}catch(_0x450ca4){this[_0x502dd2(0x288)][_0x502dd2(0x30f)](_0x502dd2(0x29d)+_0x553e69['command']+':\x20'+_0x450ca4[_0x502dd2(0x25f)]);if(_0x553e69[_0x502dd2(0x298)])this['sendTo'](_0x553e69[_0x502dd2(0x2af)],_0x553e69['command'],{'success':![],'error':_0x450ca4['message']},_0x553e69[_0x502dd2(0x298)]);}}}if(require[a0_0x94cfc7(0x2d2)]!==module)module[a0_0x94cfc7(0x3c7)]=_0x5eca73=>new CogniLiving(_0x5eca73);else new CogniLiving();