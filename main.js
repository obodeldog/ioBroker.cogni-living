function a0_0x1be8(_0x4f7869,_0x56fe7d){const _0x4ec374=a0_0x3721();return a0_0x1be8=function(_0x7a6e7a,_0x2490d3){_0x7a6e7a=_0x7a6e7a-0x126;let _0x3721ed=_0x4ec374[_0x7a6e7a];return _0x3721ed;},a0_0x1be8(_0x4f7869,_0x56fe7d);}const a0_0x49949b=a0_0x1be8;function a0_0x3721(){const _0x5ad582=['dependencyInstallInProgress','temperature','add','2VAYmYV','minDaysForBaseline','getGenerativeModel','sendMorningBriefing','analysis.training.triggerHealth','send','sources','application/json','party','TRAIN_COMFORT','Kein\x20Kalender-Adapter','thermostat','minutes_safe','156ccdObc','includes','analysis.training.triggerSecurity','subscribeStates','enum','calendarName','LTM.triggerDailyDigest','LTM.rawEventLog','sensorLastValues','floor','calendarInstance','analysis.training.triggerTopology','setState','dismissAutomation','sort','isSolar','checkWifiPresence','LTM.dailyDigests','./lib/dead_man','updateHealthVector','Verbunden','.data.table','analysis.health.todayVector','initSystemConfig','Guest\x20Mode','analysis.trigger','json','\x20min\x20ausbleiben.','WiFi\x20Presence\x20detected.','callback','state','updateLocation','getState','Sec-Training\x20started...','analysis.energy.activeEnforcements','176nPZgEL','runGeminiAnalysis','heiter','runPythonHealthCheck','getOutsideTemperatureNumeric','./lib/scheduler','analysis.automation.targetValue','@iobroker/adapter-core','TRAIN_HEALTH','updateTopology','LTM.trainingData.thermodynamics','error','63970zconJI','createAllObjects','2570MtSVvW','setupBriefingScheduler','./lib/recorder','main','trackerEnabled','processSensorEvent','analysis.automation.patternDetected','./lib/installer','entries','{\x22default\x22:\x2021}','\x20rooms\x20(preventing\x20Cold\x20Start\x20Amnesia).','ltmJob','getMinutes','push','from','onStateChange','analysisHistory','Heizung\x20kann\x20','./lib/setup','Gait\x20Speed\x20Calculation\x20Proof','some','timestamp','(((.+)+)+)+$','keys','_calName','value','testContext','analysis.health.gaitDebug','lastTrackerEventTime','string','values','createDailyDigest','apiKey','daswetter.0','initZombies','23984455SWxpxl','cancel','./lib/topology','PYTHON_EXE','genAI','TRAIN_SECURITY','accuweather.0','setHours','exitTimer','Sensors\x20used\x20for\x20Gait\x20Analysis','constructor','setStateAsync','monitorEnforcements','getForeignObjectsAsync','Instanz\x20nicht\x20gefunden','analysis.security.learningStatus','simulateButler','249264FheIao','Test','key','common','SYSTEM_MODES','updateTopologyMatrix','analysis.training.triggerEnergy','analysis.automation.description','analysisTimer','isPresent','scanForDevices','analysis.energy.ventilationAlerts','modeResetJob','checkCalendarTriggers','SET_LEARNING_MODE','14409BVDfQH','ðŸ§ \x20Memory\x20Protection:\x20Restoring\x20persisted\x20AI-Calculations\x20(preventing\x20\x27Cold\x20Start\x27\x20amnesia).','onUnload','setupDriftAnalysisScheduler','analysis.energy.mpcActive','.communicate.request','Party\x20Mode','briefingJob','./lib/scanner','onReady','geminiApiKey','name','parse','search','analysis.triggerBriefing','Warm-Up\x20Target\x20Temps\x20(JSON)','analysis.energy.warmupSources','ANALYZE_GAIT','ready','system.mode','val','presenceDevices','now','memoryCache','exitGraceTimer','forecast.current.weather','find','getStateAsync','setPresence','Reinforcement\x20Learning\x20Penalties','analysis.health.activityTrend','analysis.topology.structure','analysis.automation.autoApply','driftAnalysisTimer','getForeignObjectAsync','PREDICT_ENERGY','Aktiv\x20(','number','cogni-living\x20adapter\x20starting\x20(v','2464275EEMGOr','executeAutomationAction','system.adapter.','guest','length','resetRLPenalty','bootTime','analysis.training.status','TRAIN_ENERGY','LTM.trainingData.sequences','healthTrendInterval','devices','ANALYZE_TREND','ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...','Active\x20Ventilation\x20Alerts','notifyTelegramInstance','debug','checkThermostats','164843IsvAdJ','Standard','dailyDigests','updated','telegram','stopService','enum.functions.*','triggerEnergyPrediction','activityLevel','LTM.baselineStatus','analysis.energy.rlPenalties','triggerBriefing','sonn','generateContent','log','\x27\x20wurde\x20manuell\x20vom\x20Benutzer\x20gelÃ¶scht.',')\x20-\x20Phase\x20D\x20(Memory\x20Hydration)','runAutopilot','manual','loadSystemMode','protectAiMemory','checkSolarCondition','object','Simulation\x20durch\x20Admin\x20(Test)','eventHistory','toLowerCase','motion','isProVersion','useWeather','inactivityThresholdHours','startService','285631qzJhOs','trackerHeartbeat','stringify','analysis.energy.warmupTargets','sendTo','getHours','subscribeForeignStatesAsync','.system.mode','analysis.training.triggerComfort','rawEventLog','toString','fill','currentSystemMode','ðŸ””\x20Dies\x20ist\x20ein\x20Test\x20von\x20Cogni-Living.','unload','cogni-living','scanThermostats','models/gemini-flash-latest','map','NextHours.Location_1.Day_1.current.symbol_desc','sunny','matrix','join','text','scores','Kein\x20API\x20Key\x20Ã¼bergeben','split','NORMAL','forEach','analysis.automation.targetId','checkLicense','Key\x20not\x20found\x20or\x20not\x20provided','Warm-Up\x20Time\x20(Minutes\x20to\x20Target)','bind','analysis.energy.insulationScore','Kein\x20Wetter-Adapter','setObjectNotExistsAsync','type','Notification\x20Test\x20Failed:\x20','initHistory','onMessage','location','getEnums','config','Current.WeatherText','SET_TOPOLOGY','ack','getForeignStateAsync','./lib/ai_agent','analysis.energy.warmupTimes','endsWith','Fehler:\x20','ðŸŽ“\x20[RL-RESET]\x20Lern-Sperre\x20(Penalty)\x20fÃ¼r\x20\x27','geminiModel','times','message','weatherunderground.0','setupLtmScheduler','SYSTEM_DP_MODE','command','Gemini\x20Init\x20Error:\x20','system.presenceWho','klar','warn','info','scanDevices'];a0_0x3721=function(){return _0x5ad582;};return a0_0x3721();}(function(_0x154be8,_0x176e71){const _0x30d8ce=a0_0x1be8,_0x92becf=_0x154be8();while(!![]){try{const _0x4798b2=-parseInt(_0x30d8ce(0x12f))/0x1+-parseInt(_0x30d8ce(0x174))/0x2*(parseInt(_0x30d8ce(0x21c))/0x3)+-parseInt(_0x30d8ce(0x1e6))/0x4+-parseInt(_0x30d8ce(0x1b0))/0x5*(-parseInt(_0x30d8ce(0x181))/0x6)+parseInt(_0x30d8ce(0x22e))/0x7*(-parseInt(_0x30d8ce(0x1a4))/0x8)+parseInt(_0x30d8ce(0x1f5))/0x9*(-parseInt(_0x30d8ce(0x1b2))/0xa)+parseInt(_0x30d8ce(0x1d5))/0xb;if(_0x4798b2===_0x176e71)break;else _0x92becf['push'](_0x92becf['shift']());}catch(_0xb73531){_0x92becf['push'](_0x92becf['shift']());}}}(a0_0x3721,0x651be));const a0_0x2490d3=(function(){let _0x1ac6a8=!![];return function(_0x4f8d48,_0xf8d1d9){const _0x5206a2=_0x1ac6a8?function(){if(_0xf8d1d9){const _0x3b78db=_0xf8d1d9['apply'](_0x4f8d48,arguments);return _0xf8d1d9=null,_0x3b78db;}}:function(){};return _0x1ac6a8=![],_0x5206a2;};}()),a0_0x7a6e7a=a0_0x2490d3(this,function(){const _0x2143b9=a0_0x1be8;return a0_0x7a6e7a['toString']()[_0x2143b9(0x202)](_0x2143b9(0x1c8))[_0x2143b9(0x139)]()[_0x2143b9(0x1df)](a0_0x7a6e7a)[_0x2143b9(0x202)](_0x2143b9(0x1c8));});a0_0x7a6e7a();'use strict';const utils=require(a0_0x49949b(0x1ab)),{GoogleGenerativeAI}=require('@google/generative-ai'),installer=require(a0_0x49949b(0x1b9)),scanner=require(a0_0x49949b(0x1fd)),schedulers=require(a0_0x49949b(0x1a9)),topology=require(a0_0x49949b(0x1d7)),setup=require(a0_0x49949b(0x1c4)),recorder=require(a0_0x49949b(0x1b4)),pythonBridge=require('./lib/python_bridge'),aiAgent=require(a0_0x49949b(0x15f)),deadMan=require(a0_0x49949b(0x193)),automation=require('./lib/automation'),GEMINI_MODEL=a0_0x49949b(0x140),ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};class CogniLiving extends utils['Adapter']{constructor(_0x567bee){const _0x31d199=a0_0x49949b;super({..._0x567bee,'name':_0x31d199(0x13e)}),this['eventHistory']=[],this[_0x31d199(0x1c2)]=[],this[_0x31d199(0x138)]=[],this[_0x31d199(0x230)]=[],this[_0x31d199(0x189)]={},this['systemConfig']={'latitude':0x0,'longitude':0x0,'city':''},this[_0x31d199(0x1ef)]=!![],this[_0x31d199(0x1dd)]=null,this[_0x31d199(0x20d)]=null,this['isGracePeriodActive']=![],this[_0x31d199(0x1d9)]=null,this[_0x31d199(0x164)]=null,this[_0x31d199(0x13b)]=setup['SYSTEM_MODES'][_0x31d199(0x14a)],this[_0x31d199(0x12b)]=![],this['lastAlertState']=![],this['analysisTimer']=null,this['ltmJob']=null,this['modeResetJob']=null,this[_0x31d199(0x216)]=null,this[_0x31d199(0x1fc)]=null,this[_0x31d199(0x130)]=null,this[_0x31d199(0x226)]=null,this[_0x31d199(0x171)]=![],this[_0x31d199(0x1ce)]=Date['now'](),this['memoryCache']=null,this[_0x31d199(0x222)]=Date['now'](),this['on'](_0x31d199(0x207),this[_0x31d199(0x1fe)][_0x31d199(0x150)](this)),this['on']('stateChange',this[_0x31d199(0x1c1)][_0x31d199(0x150)](this)),this['on'](_0x31d199(0x13d),this[_0x31d199(0x1f7)][_0x31d199(0x150)](this)),this['on'](_0x31d199(0x166),this[_0x31d199(0x157)][_0x31d199(0x150)](this));}async['onReady'](){const _0x115acd=a0_0x49949b;this[_0x115acd(0x23c)][_0x115acd(0x16f)](_0x115acd(0x21b)+this['version']+_0x115acd(0x23e));if(!installer['checkAndInstall'](this,()=>this['startSystem']()))return;}async['startSystem'](){const _0x35aaf0=a0_0x49949b;await setup[_0x35aaf0(0x1d4)](this);try{this[_0x35aaf0(0x12b)]=await setup[_0x35aaf0(0x14d)](this[_0x35aaf0(0x15a)]['licenseKey']);}catch(_0x15ebb4){}if(!this['config'][_0x35aaf0(0x12d)]||this[_0x35aaf0(0x15a)][_0x35aaf0(0x12d)]<0.1)this[_0x35aaf0(0x15a)][_0x35aaf0(0x12d)]=0xc;await setup[_0x35aaf0(0x156)](this),await setup[_0x35aaf0(0x198)](this);try{const _0x498a41=await this[_0x35aaf0(0x210)]('analysis.energy.warmupTimes'),_0x1706e9=await this[_0x35aaf0(0x210)](_0x35aaf0(0x205));_0x498a41&&_0x498a41[_0x35aaf0(0x209)]&&_0x1706e9&&_0x1706e9[_0x35aaf0(0x209)]&&(Date[_0x35aaf0(0x20b)]()-_0x498a41['ts']<0x4*0xe10*0x3e8&&(this[_0x35aaf0(0x20c)]={'times':JSON['parse'](_0x498a41[_0x35aaf0(0x209)]),'sources':JSON['parse'](_0x1706e9[_0x35aaf0(0x209)])},this['log'][_0x35aaf0(0x16f)]('ðŸ§ \x20Memory:\x20Cache\x20hydrated\x20with\x20'+Object[_0x35aaf0(0x1c9)](this['memoryCache'][_0x35aaf0(0x165)])[_0x35aaf0(0x220)]+_0x35aaf0(0x1bc))));}catch(_0x142fee){this[_0x35aaf0(0x23c)][_0x35aaf0(0x16e)]('Memory\x20Hydration\x20Failed:\x20'+_0x142fee['message']);}if(this['config']['geminiApiKey'])try{this[_0x35aaf0(0x1d9)]=new GoogleGenerativeAI(this['config'][_0x35aaf0(0x1ff)]),this[_0x35aaf0(0x164)]=this['genAI']['getGenerativeModel']({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x35aaf0(0x17b)}}),this[_0x35aaf0(0x23c)][_0x35aaf0(0x16f)]('Gemini\x20AI\x20initialized.');}catch(_0x4516b2){this[_0x35aaf0(0x23c)]['error'](_0x35aaf0(0x16b)+_0x4516b2['message']);}await setup[_0x35aaf0(0x1b1)](this),await this[_0x35aaf0(0x241)](),await this[_0x35aaf0(0x153)]('analysis.energy.pinnForecast',{'type':_0x35aaf0(0x19f),'common':{'name':'PINN\x20AI\x20Forecast','type':_0x35aaf0(0x1cf),'role':'json','read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x35aaf0(0x1f1),{'type':_0x35aaf0(0x19f),'common':{'name':_0x35aaf0(0x22a),'type':_0x35aaf0(0x1cf),'role':'json','read':!![],'write':![]},'native':{}}),await this[_0x35aaf0(0x153)]('analysis.energy.warmupTimes',{'type':_0x35aaf0(0x19f),'common':{'name':_0x35aaf0(0x14f),'type':_0x35aaf0(0x1cf),'role':_0x35aaf0(0x19b),'read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync']('analysis.energy.warmupTargets',{'type':'state','common':{'name':_0x35aaf0(0x204),'type':'string','role':_0x35aaf0(0x19b),'read':!![],'write':!![],'def':_0x35aaf0(0x1bb)},'native':{}}),await this['setObjectNotExistsAsync'](_0x35aaf0(0x238),{'type':_0x35aaf0(0x19f),'common':{'name':_0x35aaf0(0x212),'type':_0x35aaf0(0x1cf),'role':_0x35aaf0(0x19b),'read':!![],'write':![],'def':'{}'},'native':{}}),await this['setObjectNotExistsAsync'](_0x35aaf0(0x213),{'type':'state','common':{'name':'General\x20Activity\x20Trend\x20(%)','type':_0x35aaf0(0x21a),'role':_0x35aaf0(0x1cb),'unit':'%','read':!![],'write':![]},'native':{}}),await this[_0x35aaf0(0x153)]('analysis.health.gaitSensors',{'type':_0x35aaf0(0x19f),'common':{'name':_0x35aaf0(0x1de),'type':_0x35aaf0(0x1cf),'role':'text','read':!![],'write':![]},'native':{}}),await this[_0x35aaf0(0x153)](_0x35aaf0(0x1a3),{'type':_0x35aaf0(0x19f),'common':{'name':'Active\x20Calendar\x20Enforcements\x20(Locks)','type':_0x35aaf0(0x1cf),'role':'json','read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x35aaf0(0x153)](_0x35aaf0(0x1cd),{'type':_0x35aaf0(0x19f),'common':{'name':_0x35aaf0(0x1c5),'type':_0x35aaf0(0x1cf),'role':_0x35aaf0(0x146),'read':!![],'write':![]},'native':{}});try{const _0x5460e8=await this[_0x35aaf0(0x210)](_0x35aaf0(0x188));if(_0x5460e8&&_0x5460e8[_0x35aaf0(0x209)])this[_0x35aaf0(0x138)]=JSON[_0x35aaf0(0x201)](_0x5460e8[_0x35aaf0(0x209)]);}catch(_0xb178e7){this[_0x35aaf0(0x138)]=[];}try{const _0x125820=await this[_0x35aaf0(0x210)]('LTM.dailyDigests');if(_0x125820&&_0x125820[_0x35aaf0(0x209)])this[_0x35aaf0(0x230)]=JSON[_0x35aaf0(0x201)](_0x125820[_0x35aaf0(0x209)]);}catch(_0x787453){this[_0x35aaf0(0x230)]=[];}const _0x1d27b7=this[_0x35aaf0(0x230)][_0x35aaf0(0x220)]>=(this[_0x35aaf0(0x15a)][_0x35aaf0(0x175)]||0x7)?_0x35aaf0(0x219)+this['dailyDigests']['length']+'\x20Tage)':'Lernphase\x20('+this[_0x35aaf0(0x230)][_0x35aaf0(0x220)]+'/'+(this[_0x35aaf0(0x15a)]['minDaysForBaseline']||0x7)+')';await this[_0x35aaf0(0x1e0)](_0x35aaf0(0x237),{'val':_0x1d27b7,'ack':!![]}),this['subscribeStates'](_0x35aaf0(0x19a)),this[_0x35aaf0(0x184)](_0x35aaf0(0x187)),this[_0x35aaf0(0x184)](_0x35aaf0(0x208)),this['subscribeStates'](_0x35aaf0(0x203)),this[_0x35aaf0(0x184)]('analysis.automation.triggerAction'),this['subscribeStates'](_0x35aaf0(0x215)),this['subscribeStates'](_0x35aaf0(0x183)),this[_0x35aaf0(0x184)](_0x35aaf0(0x178)),this[_0x35aaf0(0x184)](_0x35aaf0(0x1ec)),this[_0x35aaf0(0x184)]('analysis.training.triggerComfort'),this[_0x35aaf0(0x184)](_0x35aaf0(0x18c)),this[_0x35aaf0(0x184)](_0x35aaf0(0x1f9)),this[_0x35aaf0(0x184)](_0x35aaf0(0x205));const _0x18efcf=this[_0x35aaf0(0x15a)][_0x35aaf0(0x227)];if(_0x18efcf)for(const _0x54d7f2 of _0x18efcf){await this[_0x35aaf0(0x135)](_0x54d7f2['id']);}const _0x811f87=this[_0x35aaf0(0x15a)][_0x35aaf0(0x20a)];if(_0x811f87)for(const _0x56b5f5 of _0x811f87){await this['subscribeForeignStatesAsync'](_0x56b5f5);}if(this[_0x35aaf0(0x15a)]['notifyTelegramEnabled']&&this[_0x35aaf0(0x15a)]['notifyTelegramInstance'])await this[_0x35aaf0(0x135)](this[_0x35aaf0(0x15a)][_0x35aaf0(0x22b)]+_0x35aaf0(0x1fa));setTimeout(()=>this[_0x35aaf0(0x191)](),0x1388);if(this[_0x35aaf0(0x1ee)])clearInterval(this['analysisTimer']);const _0x3a06b6=this[_0x35aaf0(0x15a)]['analysisInterval']||0xf;_0x3a06b6>0x0&&(this[_0x35aaf0(0x1ee)]=setInterval(()=>{const _0x2d5e19=_0x35aaf0;this[_0x2d5e19(0x23f)](),automation['checkCalendarTriggers'](this),automation['monitorEnforcements'](this);},_0x3a06b6*0x3c*0x3e8));setTimeout(()=>{const _0x24dc05=_0x35aaf0;automation[_0x24dc05(0x1f3)](this),automation[_0x24dc05(0x1e1)](this);},0x2710);this[_0x35aaf0(0x15a)][_0x35aaf0(0x1b6)]!==![]&&(this[_0x35aaf0(0x130)]=setInterval(()=>{const _0x1e48f2=_0x35aaf0;if(this[_0x1e48f2(0x12b)]){const _0x4c7181=Date['now'](),_0x3c12ab=this[_0x1e48f2(0x1ce)]||_0x4c7181,_0x1cdec=(_0x4c7181-_0x3c12ab)/0x3e8;_0x1cdec>0x2&&(this['lastTrackerEventTime']=_0x4c7181,pythonBridge[_0x1e48f2(0x179)](this,'TRACK_EVENT',{'room':null,'dt':_0x1cdec}));}},0xbb8));if(this[_0x35aaf0(0x226)])clearInterval(this[_0x35aaf0(0x226)]);this[_0x35aaf0(0x226)]=setInterval(()=>{const _0x1f40d9=_0x35aaf0;this['isProVersion']&&(this[_0x1f40d9(0x23c)][_0x1f40d9(0x16f)]('â¤ï¸\x20Auto-Heartbeat:\x20Aktualisiere\x20Gesundheits-Trends...'),this['runPythonHealthCheck']());},0x4*0x3c*0x3c*0x3e8),schedulers[_0x35aaf0(0x168)](this,()=>aiAgent[_0x35aaf0(0x1d1)](this,pythonBridge)),schedulers['setupModeResetScheduler'](this),schedulers[_0x35aaf0(0x1f8)](this,()=>aiAgent['runBaselineDriftAnalysis'](this)),schedulers[_0x35aaf0(0x1b3)](this,()=>aiAgent[_0x35aaf0(0x177)](this)),pythonBridge[_0x35aaf0(0x12e)](this,installer[_0x35aaf0(0x1d8)]),setTimeout(async()=>{const _0x3d89b7=_0x35aaf0;await topology[_0x3d89b7(0x1ad)](this);try{const _0xa2ce74=await this[_0x3d89b7(0x210)]('analysis.topology.structure');if(_0xa2ce74&&_0xa2ce74[_0x3d89b7(0x209)])pythonBridge[_0x3d89b7(0x179)](this,_0x3d89b7(0x15c),JSON[_0x3d89b7(0x201)](_0xa2ce74['val']));}catch(_0x5665ae){}this[_0x3d89b7(0x1a7)](),this['triggerGaitAnalysis'](),this[_0x3d89b7(0x235)](),this[_0x3d89b7(0x194)]();},0x1388);}[a0_0x49949b(0x1f7)](_0x11c1fe){const _0x1373f9=a0_0x49949b;if(this[_0x1373f9(0x1ee)])clearInterval(this[_0x1373f9(0x1ee)]);if(this['driftAnalysisTimer'])clearInterval(this[_0x1373f9(0x216)]);if(this[_0x1373f9(0x130)])clearInterval(this[_0x1373f9(0x130)]);if(this['healthTrendInterval'])clearInterval(this['healthTrendInterval']);if(this[_0x1373f9(0x1bd)])this[_0x1373f9(0x1bd)][_0x1373f9(0x1d6)]();if(this[_0x1373f9(0x1f2)])this[_0x1373f9(0x1f2)][_0x1373f9(0x1d6)]();if(this[_0x1373f9(0x1fc)])this[_0x1373f9(0x1fc)][_0x1373f9(0x1d6)]();recorder['abortExitTimer'](this),pythonBridge[_0x1373f9(0x233)](this),_0x11c1fe();}async[a0_0x49949b(0x1c1)](_0x4e2072,_0x427c02){const _0xb64d5f=a0_0x49949b;if(!_0x427c02||this['dependencyInstallInProgress'])return;if(_0x4e2072[_0xb64d5f(0x182)](_0xb64d5f(0x232))&&_0x4e2072[_0xb64d5f(0x161)]('communicate.request')&&_0x427c02[_0xb64d5f(0x209)])return;if(_0x4e2072===this['namespace']+_0xb64d5f(0x136)){if(_0x427c02[_0xb64d5f(0x209)]&&Object[_0xb64d5f(0x1d0)](setup[_0xb64d5f(0x1ea)])[_0xb64d5f(0x182)](_0x427c02['val'])){this['currentSystemMode']=_0x427c02[_0xb64d5f(0x209)];if(_0x427c02['val']===setup['SYSTEM_MODES']['VACATION'])await recorder[_0xb64d5f(0x211)](this,![]);else await recorder[_0xb64d5f(0x211)](this,!![]);if(this[_0xb64d5f(0x12b)]){let _0x17ce04=![],_0x2bb0de=0x0,_0x3103ed=_0xb64d5f(0x240);if(this['currentSystemMode']===_0xb64d5f(0x17c))_0x17ce04=!![],_0x2bb0de=0x168,_0x3103ed=_0xb64d5f(0x1fb);else this[_0xb64d5f(0x13b)]===_0xb64d5f(0x21f)&&(_0x17ce04=!![],_0x2bb0de=0x5a0,_0x3103ed=_0xb64d5f(0x199));pythonBridge[_0xb64d5f(0x179)](this,_0xb64d5f(0x1f4),{'active':_0x17ce04,'duration':_0x2bb0de,'label':_0x3103ed}),await this[_0xb64d5f(0x1e0)](_0xb64d5f(0x1e4),{'val':JSON[_0xb64d5f(0x131)]({'active':_0x17ce04,'label':_0x3103ed,'timestamp':Date[_0xb64d5f(0x20b)]()}),'ack':!![]});}}if(!_0x427c02[_0xb64d5f(0x15d)])this[_0xb64d5f(0x18d)](_0x4e2072,{'val':this[_0xb64d5f(0x13b)],'ack':!![]});return;}_0x4e2072[_0xb64d5f(0x161)](_0xb64d5f(0x205))&&_0x427c02[_0xb64d5f(0x15d)]&&this['protectAiMemory'](_0x427c02[_0xb64d5f(0x209)]);if(!_0x427c02[_0xb64d5f(0x15d)]){if(_0x4e2072[_0xb64d5f(0x182)](_0xb64d5f(0x19a))&&_0x427c02[_0xb64d5f(0x209)]){this['setState'](_0x4e2072,{'val':![],'ack':!![]}),aiAgent[_0xb64d5f(0x1a5)](this);return;}if(_0x4e2072[_0xb64d5f(0x182)]('triggerDailyDigest')&&_0x427c02[_0xb64d5f(0x209)]){this['setState'](_0x4e2072,{'val':![],'ack':!![]});if(this[_0xb64d5f(0x12b)])aiAgent['createDailyDigest'](this,pythonBridge);return;}if(_0x4e2072['includes'](_0xb64d5f(0x239))&&_0x427c02['val']){this[_0xb64d5f(0x18d)](_0x4e2072,{'val':![],'ack':!![]}),aiAgent['sendMorningBriefing'](this);return;}if(_0x4e2072['includes']('automation.triggerAction')&&_0x427c02[_0xb64d5f(0x209)]){this['setState'](_0x4e2072,{'val':![],'ack':!![]}),aiAgent[_0xb64d5f(0x21d)](this);return;}if(_0x4e2072[_0xb64d5f(0x182)](_0xb64d5f(0x183))&&_0x427c02[_0xb64d5f(0x209)]){this['setState'](_0x4e2072,{'val':![],'ack':!![]});if(this[_0xb64d5f(0x12b)])try{const _0x3d8622=await this['getStateAsync'](_0xb64d5f(0x225));if(_0x3d8622&&_0x3d8622['val']){const _0x2e4f69=JSON['parse'](_0x3d8622[_0xb64d5f(0x209)]);this[_0xb64d5f(0x1e0)](_0xb64d5f(0x223),{'val':_0xb64d5f(0x1a2),'ack':!![]}),pythonBridge[_0xb64d5f(0x179)](this,_0xb64d5f(0x1da),{'sequences':_0x2e4f69});}}catch(_0x5bb456){}return;}if(_0x4e2072[_0xb64d5f(0x182)](_0xb64d5f(0x178))&&_0x427c02[_0xb64d5f(0x209)]){this[_0xb64d5f(0x18d)](_0x4e2072,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x431194=await this[_0xb64d5f(0x210)](_0xb64d5f(0x192));if(_0x431194&&_0x431194['val'])pythonBridge[_0xb64d5f(0x179)](this,_0xb64d5f(0x1ac),{'digests':JSON[_0xb64d5f(0x201)](_0x431194['val'])});}catch(_0x59a333){}return;}if(_0x4e2072[_0xb64d5f(0x182)](_0xb64d5f(0x1ec))&&_0x427c02[_0xb64d5f(0x209)]){this[_0xb64d5f(0x18d)](_0x4e2072,{'val':![],'ack':!![]});if(this[_0xb64d5f(0x12b)])try{const _0x235613=await this[_0xb64d5f(0x210)](_0xb64d5f(0x1ae));if(_0x235613&&_0x235613[_0xb64d5f(0x209)])pythonBridge[_0xb64d5f(0x179)](this,_0xb64d5f(0x224),{'points':JSON[_0xb64d5f(0x201)](_0x235613[_0xb64d5f(0x209)])});}catch(_0xaef063){}return;}if(_0x4e2072[_0xb64d5f(0x182)](_0xb64d5f(0x137))&&_0x427c02[_0xb64d5f(0x209)]){this['setState'](_0x4e2072,{'val':![],'ack':!![]});if(this[_0xb64d5f(0x12b)])try{const _0x1f5a10=await this[_0xb64d5f(0x210)](_0xb64d5f(0x188));if(_0x1f5a10&&_0x1f5a10[_0xb64d5f(0x209)])pythonBridge[_0xb64d5f(0x179)](this,_0xb64d5f(0x17d),{'events':JSON['parse'](_0x1f5a10[_0xb64d5f(0x209)])});}catch(_0x3e0dc0){}return;}if(_0x4e2072[_0xb64d5f(0x182)](_0xb64d5f(0x18c))&&_0x427c02[_0xb64d5f(0x209)]){this[_0xb64d5f(0x18d)](_0x4e2072,{'val':![],'ack':!![]}),topology[_0xb64d5f(0x1ad)](this);return;}}if(this[_0xb64d5f(0x15a)][_0xb64d5f(0x20a)]&&this[_0xb64d5f(0x15a)][_0xb64d5f(0x20a)][_0xb64d5f(0x182)](_0x4e2072)){await this['checkWifiPresence']();return;}const _0x1d977f=(this[_0xb64d5f(0x15a)][_0xb64d5f(0x227)]||[])[_0xb64d5f(0x20f)](_0x1d349e=>_0x1d349e['id']===_0x4e2072);if(_0x1d977f){const _0xe3f8f7=await recorder[_0xb64d5f(0x1b7)](this,_0x4e2072,_0x427c02,_0x1d977f);_0xe3f8f7&&_0xe3f8f7[_0xb64d5f(0x154)]===_0xb64d5f(0x12a)&&_0xe3f8f7['location']&&this[_0xb64d5f(0x12b)]&&deadMan[_0xb64d5f(0x1a0)](this,_0xe3f8f7[_0xb64d5f(0x158)]),(_0x1d977f[_0xb64d5f(0x154)]==='temperature'||_0x1d977f['type']===_0xb64d5f(0x17f))&&automation['cleanupGhostInterventions'](this);}}async[a0_0x49949b(0x242)](_0x13bd20){const _0x441fbf=a0_0x49949b;if(!this['memoryCache']||Date[_0x441fbf(0x20b)]()-this[_0x441fbf(0x222)]>0x493e0)return;if(!this['memoryCache'][_0x441fbf(0x17a)]||!this[_0x441fbf(0x20c)][_0x441fbf(0x165)])return;try{const _0x4e747d=JSON[_0x441fbf(0x201)](_0x13bd20),_0xe8835c=this[_0x441fbf(0x20c)][_0x441fbf(0x17a)];let _0xf55d48=![];for(const _0x2c1e61 in _0xe8835c){if(_0xe8835c[_0x2c1e61][_0x441fbf(0x182)]('AI')&&_0x4e747d[_0x2c1e61]&&!_0x4e747d[_0x2c1e61][_0x441fbf(0x182)]('AI')){_0xf55d48=!![];break;}}_0xf55d48&&(this['log'][_0x441fbf(0x16f)](_0x441fbf(0x1f6)),await this[_0x441fbf(0x1e0)](_0x441fbf(0x160),{'val':JSON[_0x441fbf(0x131)](this[_0x441fbf(0x20c)][_0x441fbf(0x165)]),'ack':!![]}),await this[_0x441fbf(0x1e0)](_0x441fbf(0x205),{'val':JSON[_0x441fbf(0x131)](this[_0x441fbf(0x20c)][_0x441fbf(0x17a)]),'ack':!![]}));}catch(_0x1b59af){}}async[a0_0x49949b(0x157)](_0x4e7f71){const _0x3bad49=a0_0x49949b;if(typeof _0x4e7f71==='object'&&_0x4e7f71[_0x3bad49(0x166)]){if(_0x4e7f71[_0x3bad49(0x16a)]===_0x3bad49(0x22d))try{const _0x56a52b=await automation[_0x3bad49(0x13f)](this);this[_0x3bad49(0x133)](_0x4e7f71['from'],_0x4e7f71['command'],{'success':!![],'results':_0x56a52b},_0x4e7f71[_0x3bad49(0x19e)]);}catch(_0x115301){this['sendTo'](_0x4e7f71[_0x3bad49(0x1c0)],_0x4e7f71[_0x3bad49(0x16a)],{'success':![],'error':_0x115301[_0x3bad49(0x166)]},_0x4e7f71[_0x3bad49(0x19e)]);}else{if(_0x4e7f71['command']==='simulateEnergyMPC')try{const {current_temps:_0x145a22,t_out:_0x28c559,targets:_0x382e14,t_forecast:_0x11b2d5}=_0x4e7f71['message'],_0x4d2603=[];let _0x4e6a00={};try{const _0x23be69=await this['getStateAsync'](_0x3bad49(0x151));if(_0x23be69&&_0x23be69[_0x3bad49(0x209)]){const _0x32ccf6=JSON[_0x3bad49(0x201)](_0x23be69[_0x3bad49(0x209)]);_0x4e6a00=_0x32ccf6[_0x3bad49(0x147)]||_0x32ccf6;}}catch(_0x974fb4){}const _0x4c7c40=_0x11b2d5!==undefined&&_0x11b2d5!==null?(_0x28c559+_0x11b2d5)/0x2:_0x28c559;for(const [_0x4b5262,_0x13c850]of Object[_0x3bad49(0x1ba)](_0x145a22)){const _0x1168d8=_0x382e14[_0x4b5262]||0x15;if(_0x13c850<=_0x1168d8)continue;let _0x598309=_0x4e6a00[_0x4b5262]||-0.5;if(_0x598309>=0x0)_0x598309=-0.5;const _0x27fb72=Math['abs'](_0x598309),_0x4a45b8=_0x13c850-_0x1168d8;let _0x4b5013=Math[_0x3bad49(0x18a)](_0x4a45b8/_0x27fb72*0x3c);const _0x4a017e=_0x13c850-_0x28c559,_0x2a5001=_0x13c850-_0x4c7c40;if(_0x2a5001!==0x0&&_0x4a017e!==0x0){const _0x5963a2=_0x4a017e/_0x2a5001;_0x4b5013=Math[_0x3bad49(0x18a)](_0x4b5013*_0x5963a2);}if(_0x4b5013>0xf){if(_0x4b5013>0xf0)_0x4b5013=0xf0;_0x4d2603[_0x3bad49(0x1bf)]({'room':_0x4b5262,'minutes_safe':_0x4b5013,'target':_0x1168d8,'current':_0x13c850,'savings_msg':_0x3bad49(0x1c3)+_0x4b5013+_0x3bad49(0x19c)});}}_0x4d2603['sort']((_0x54015f,_0x56e379)=>_0x56e379[_0x3bad49(0x180)]-_0x54015f[_0x3bad49(0x180)]),this[_0x3bad49(0x133)](_0x4e7f71[_0x3bad49(0x1c0)],_0x4e7f71['command'],{'success':!![],'proposals':_0x4d2603},_0x4e7f71[_0x3bad49(0x19e)]);}catch(_0x958437){this['sendTo'](_0x4e7f71[_0x3bad49(0x1c0)],_0x4e7f71['command'],{'success':![],'error':_0x958437['message']},_0x4e7f71[_0x3bad49(0x19e)]);}else{if(_0x4e7f71[_0x3bad49(0x16a)]===_0x3bad49(0x221))try{const _0x48d6de=_0x4e7f71['message'][_0x3bad49(0x1e8)],_0xa36208='analysis.energy.rlPenalties',_0x214272=await this['getStateAsync'](_0xa36208);let _0x4709e7={};if(_0x214272&&_0x214272[_0x3bad49(0x209)])try{_0x4709e7=JSON['parse'](_0x214272[_0x3bad49(0x209)]);}catch(_0x1f89d7){}_0x48d6de&&_0x4709e7[_0x48d6de]?(delete _0x4709e7[_0x48d6de],await this[_0x3bad49(0x1e0)](_0xa36208,{'val':JSON['stringify'](_0x4709e7),'ack':!![]}),this[_0x3bad49(0x23c)]['info'](_0x3bad49(0x163)+_0x48d6de+_0x3bad49(0x23d)),this[_0x3bad49(0x133)](_0x4e7f71[_0x3bad49(0x1c0)],_0x4e7f71[_0x3bad49(0x16a)],{'success':!![]},_0x4e7f71[_0x3bad49(0x19e)])):this[_0x3bad49(0x133)](_0x4e7f71[_0x3bad49(0x1c0)],_0x4e7f71['command'],{'success':![],'error':_0x3bad49(0x14e)},_0x4e7f71[_0x3bad49(0x19e)]);}catch(_0x14baba){this['sendTo'](_0x4e7f71['from'],_0x4e7f71[_0x3bad49(0x16a)],{'success':![],'error':_0x14baba['message']},_0x4e7f71[_0x3bad49(0x19e)]);}else{if(_0x4e7f71[_0x3bad49(0x16a)]===_0x3bad49(0x18e))await this['setStateAsync'](_0x3bad49(0x1b8),{'val':![],'ack':!![]}),await this[_0x3bad49(0x1e0)](_0x3bad49(0x1ed),{'val':'','ack':!![]}),await this['setStateAsync'](_0x3bad49(0x14c),{'val':'','ack':!![]}),this[_0x3bad49(0x133)](_0x4e7f71[_0x3bad49(0x1c0)],_0x4e7f71[_0x3bad49(0x16a)],{'success':!![]},_0x4e7f71[_0x3bad49(0x19e)]);else{if(_0x4e7f71[_0x3bad49(0x16a)]===_0x3bad49(0x1e5)){const {targetId:_0x45595b,targetValue:_0x231315}=_0x4e7f71[_0x3bad49(0x166)];await this[_0x3bad49(0x1e0)](_0x3bad49(0x1b8),{'val':!![],'ack':!![]}),await this[_0x3bad49(0x1e0)](_0x3bad49(0x1ed),{'val':_0x3bad49(0x127),'ack':!![]}),await this[_0x3bad49(0x1e0)](_0x3bad49(0x14c),{'val':_0x45595b,'ack':!![]}),await this[_0x3bad49(0x1e0)](_0x3bad49(0x1aa),{'val':String(_0x231315),'ack':!![]}),this['sendTo'](_0x4e7f71[_0x3bad49(0x1c0)],_0x4e7f71[_0x3bad49(0x16a)],{'success':!![]},_0x4e7f71[_0x3bad49(0x19e)]);}else{if(_0x4e7f71[_0x3bad49(0x16a)]==='testApiKey')try{const _0x4ef32a=_0x4e7f71[_0x3bad49(0x166)][_0x3bad49(0x1d2)];if(!_0x4ef32a)throw new Error(_0x3bad49(0x148));const _0x4d93dc=new GoogleGenerativeAI(_0x4ef32a),_0x11a242=_0x4d93dc[_0x3bad49(0x176)]({'model':GEMINI_MODEL}),_0x5d7558=await _0x11a242[_0x3bad49(0x23b)](_0x3bad49(0x1e7)),_0x39e937=await _0x5d7558['response'];if(_0x39e937[_0x3bad49(0x146)]())this[_0x3bad49(0x133)](_0x4e7f71[_0x3bad49(0x1c0)],_0x4e7f71[_0x3bad49(0x16a)],{'success':!![],'message':'Verbindung\x20erfolgreich!'},_0x4e7f71[_0x3bad49(0x19e)]);else throw new Error('Keine\x20Antwort\x20von\x20Gemini');}catch(_0x1678e3){this[_0x3bad49(0x133)](_0x4e7f71[_0x3bad49(0x1c0)],_0x4e7f71[_0x3bad49(0x16a)],{'success':![],'message':_0x1678e3['message']},_0x4e7f71[_0x3bad49(0x19e)]);}else{if(_0x4e7f71['command']===_0x3bad49(0x170))try{const _0x4bd3c8=await scanner[_0x3bad49(0x1f0)](this,_0x4e7f71['message']||{});this[_0x3bad49(0x133)](_0x4e7f71['from'],_0x4e7f71[_0x3bad49(0x16a)],{'success':!![],'devices':_0x4bd3c8},_0x4e7f71['callback']);}catch(_0x424a06){this[_0x3bad49(0x133)](_0x4e7f71[_0x3bad49(0x1c0)],_0x4e7f71[_0x3bad49(0x16a)],{'success':![],'error':_0x424a06[_0x3bad49(0x166)]},_0x4e7f71['callback']);}else{if(_0x4e7f71[_0x3bad49(0x16a)]===_0x3bad49(0x1eb))try{const {matrix:_0x4474e7}=_0x4e7f71['message'],_0x441c54=await this[_0x3bad49(0x210)](_0x3bad49(0x214));if(_0x441c54&&_0x441c54['val']){const _0x351936=JSON[_0x3bad49(0x201)](_0x441c54[_0x3bad49(0x209)]);_0x351936[_0x3bad49(0x144)]=_0x4474e7,_0x351936[_0x3bad49(0x231)]=Date[_0x3bad49(0x20b)](),await this[_0x3bad49(0x1e0)](_0x3bad49(0x214),{'val':JSON[_0x3bad49(0x131)](_0x351936),'ack':!![]}),pythonBridge['send'](this,_0x3bad49(0x15c),_0x351936);}this[_0x3bad49(0x133)](_0x4e7f71[_0x3bad49(0x1c0)],_0x4e7f71[_0x3bad49(0x16a)],{'success':!![]},_0x4e7f71[_0x3bad49(0x19e)]);}catch(_0x4451ac){this[_0x3bad49(0x23c)]['error'](_0x4451ac);}else{if(_0x4e7f71[_0x3bad49(0x16a)]==='getLtmData')this[_0x3bad49(0x133)](_0x4e7f71['from'],_0x4e7f71[_0x3bad49(0x16a)],{'success':!![],'dailyDigests':this[_0x3bad49(0x230)]||[],'analysisHistory':this[_0x3bad49(0x1c2)]||[]},_0x4e7f71['callback']);else{if(_0x4e7f71[_0x3bad49(0x16a)]==='getOverviewData'){const _0x20904d=this[_0x3bad49(0x230)]['length'],_0x51867e=new Array(0x18)[_0x3bad49(0x13a)](0x0),_0xb948e1=new Date()[_0x3bad49(0x1dc)](0x0,0x0,0x0,0x0);this['eventHistory']&&this[_0x3bad49(0x128)][_0x3bad49(0x14b)](_0x3a4e0c=>{const _0x29a33e=_0x3bad49;if(_0x3a4e0c[_0x29a33e(0x1c7)]>=_0xb948e1){const _0x5e9ef1=new Date(_0x3a4e0c['timestamp'])[_0x29a33e(0x134)]();if(_0x5e9ef1>=0x0&&_0x5e9ef1<0x18)_0x51867e[_0x5e9ef1]++;}});let _0x1d8fa9=![],_0x57d65f='',_0x3aa145='',_0x248256='';try{const _0x586e97=await this[_0x3bad49(0x210)](_0x3bad49(0x1b8));if(_0x586e97&&_0x586e97[_0x3bad49(0x209)]){_0x1d8fa9=!![];const _0x5dc3c9=await this[_0x3bad49(0x210)]('analysis.automation.description');_0x57d65f=_0x5dc3c9?_0x5dc3c9['val']:'';const _0x8cced1=await this[_0x3bad49(0x210)]('analysis.automation.targetId');_0x3aa145=_0x8cced1?_0x8cced1[_0x3bad49(0x209)]:'';const _0x1b88ee=await this[_0x3bad49(0x210)](_0x3bad49(0x1aa));_0x248256=_0x1b88ee?_0x1b88ee[_0x3bad49(0x209)]:'';}}catch(_0x2ee830){}const _0x189e3a=await this[_0x3bad49(0x243)](),_0x5f129f=(this[_0x3bad49(0x15a)]['devices']||[])[_0x3bad49(0x1c6)](_0x3255d4=>_0x3255d4[_0x3bad49(0x190)]),_0x3c92a2=_0x189e3a&&_0x5f129f;this[_0x3bad49(0x133)](_0x4e7f71[_0x3bad49(0x1c0)],_0x4e7f71[_0x3bad49(0x16a)],{'success':!![],'eventHistory':this['eventHistory']['slice'](0x0,0xf),'stats':{'digestCount':_0x20904d,'isPresent':this[_0x3bad49(0x1ef)],'hourlyActivity':_0x51867e,'solarActive':_0x3c92a2},'automation':{'detected':_0x1d8fa9,'description':_0x57d65f,'targetId':_0x3aa145,'targetValue':_0x248256}},_0x4e7f71[_0x3bad49(0x19e)]);}else{if(_0x4e7f71[_0x3bad49(0x16a)]===_0x3bad49(0x159)){const _0x5b1085=await this[_0x3bad49(0x1e2)](_0x3bad49(0x234),_0x3bad49(0x185)),_0x1ad5a9=[];if(_0x5b1085)for(const _0x5efc9c in _0x5b1085){const _0x41f5aa=_0x5b1085[_0x5efc9c],_0x294261=(_0x41f5aa[_0x3bad49(0x1e9)]&&typeof _0x41f5aa[_0x3bad49(0x1e9)][_0x3bad49(0x200)]===_0x3bad49(0x126)?_0x41f5aa[_0x3bad49(0x1e9)][_0x3bad49(0x200)]['de']:_0x41f5aa[_0x3bad49(0x1e9)][_0x3bad49(0x200)])||_0x41f5aa['common'][_0x3bad49(0x200)];_0x1ad5a9[_0x3bad49(0x1bf)]({'id':_0x5efc9c,'name':_0x294261});}const _0x10f120=await this[_0x3bad49(0x1e2)]('enum.rooms.*','enum'),_0x4f87a0=[];if(_0x10f120)for(const _0x25690c in _0x10f120){const _0x320df0=_0x10f120[_0x25690c],_0x3ee02f=(_0x320df0[_0x3bad49(0x1e9)]&&typeof _0x320df0[_0x3bad49(0x1e9)][_0x3bad49(0x200)]==='object'?_0x320df0[_0x3bad49(0x1e9)][_0x3bad49(0x200)]['de']:_0x320df0[_0x3bad49(0x1e9)]['name'])||_0x25690c[_0x3bad49(0x149)]('.')['pop']();_0x4f87a0['push'](_0x3ee02f);}this['sendTo'](_0x4e7f71['from'],_0x4e7f71[_0x3bad49(0x16a)],{'success':!![],'enums':_0x1ad5a9,'rooms':_0x4f87a0},_0x4e7f71['callback']);}else{if(_0x4e7f71[_0x3bad49(0x16a)]===_0x3bad49(0x1cc))try{let _0x190470=_0x3bad49(0x152),_0x3b2844=_0x3bad49(0x17e);if(this[_0x3bad49(0x15a)][_0x3bad49(0x12c)]){const _0x2641f1=await recorder[_0x3bad49(0x1a8)](this);_0x190470=_0x2641f1!==null?_0x2641f1+'Â°C':'Daten\x20nicht\x20verfÃ¼gbar';}if(this['config']['calendarInstance']){const _0x31022b=await this[_0x3bad49(0x217)](_0x3bad49(0x21e)+this[_0x3bad49(0x15a)][_0x3bad49(0x18b)]);_0x3b2844=_0x31022b?_0x3bad49(0x195):_0x3bad49(0x1e3);}this[_0x3bad49(0x133)](_0x4e7f71['from'],_0x4e7f71[_0x3bad49(0x16a)],{'success':!![],'weather':_0x190470,'calendar':_0x3b2844},_0x4e7f71['callback']);}catch(_0x1fe0cc){this[_0x3bad49(0x133)](_0x4e7f71[_0x3bad49(0x1c0)],_0x4e7f71['command'],{'success':![],'error':_0x1fe0cc['message']},_0x4e7f71[_0x3bad49(0x19e)]);}else{if(_0x4e7f71[_0x3bad49(0x16a)]==='getCalendarNames')try{const _0x360031=_0x4e7f71[_0x3bad49(0x166)]['instance'],_0x256b0c=await this['getForeignStateAsync'](_0x360031+_0x3bad49(0x196));let _0xfe710c=[];if(_0x256b0c&&_0x256b0c[_0x3bad49(0x209)]){const _0x365c9e=JSON[_0x3bad49(0x201)](_0x256b0c['val']),_0x43a0e6=new Set();Array['isArray'](_0x365c9e)&&_0x365c9e[_0x3bad49(0x14b)](_0x5b57cb=>{const _0x3e24b9=_0x3bad49;if(_0x5b57cb['_calName'])_0x43a0e6['add'](_0x5b57cb[_0x3e24b9(0x1ca)]);else{if(_0x5b57cb['calendarName'])_0x43a0e6[_0x3e24b9(0x173)](_0x5b57cb[_0x3e24b9(0x186)]);}}),_0xfe710c=Array[_0x3bad49(0x1c0)](_0x43a0e6)[_0x3bad49(0x18f)]();}if(_0xfe710c[_0x3bad49(0x220)]===0x0)_0xfe710c=[_0x3bad49(0x22f)];this[_0x3bad49(0x133)](_0x4e7f71[_0x3bad49(0x1c0)],_0x4e7f71[_0x3bad49(0x16a)],{'success':!![],'names':_0xfe710c},_0x4e7f71[_0x3bad49(0x19e)]);}catch(_0x891eee){this[_0x3bad49(0x133)](_0x4e7f71[_0x3bad49(0x1c0)],_0x4e7f71['command'],{'success':![],'error':_0x891eee[_0x3bad49(0x166)]},_0x4e7f71['callback']);}else{if(_0x4e7f71[_0x3bad49(0x16a)]==='testNotification')try{await setup['sendNotification'](this,_0x3bad49(0x13c),![],![]),this['sendTo'](_0x4e7f71[_0x3bad49(0x1c0)],_0x4e7f71['command'],{'success':!![],'message':'Gesendet'},_0x4e7f71['callback']);}catch(_0x40b540){this[_0x3bad49(0x23c)][_0x3bad49(0x1af)](_0x3bad49(0x155)+_0x40b540[_0x3bad49(0x166)]),this[_0x3bad49(0x133)](_0x4e7f71[_0x3bad49(0x1c0)],_0x4e7f71[_0x3bad49(0x16a)],{'success':![],'message':_0x3bad49(0x162)+_0x40b540[_0x3bad49(0x166)]},_0x4e7f71['callback']);}}}}}}}}}}}}}}}}async[a0_0x49949b(0x241)](){const _0x4f6237=a0_0x49949b;try{const _0x358d59=await this['getStateAsync'](setup[_0x4f6237(0x169)]);_0x358d59&&_0x358d59[_0x4f6237(0x209)]&&Object[_0x4f6237(0x1d0)](setup[_0x4f6237(0x1ea)])[_0x4f6237(0x182)](_0x358d59[_0x4f6237(0x209)])?this['currentSystemMode']=_0x358d59[_0x4f6237(0x209)]:(this['currentSystemMode']=setup['SYSTEM_MODES'][_0x4f6237(0x14a)],await this[_0x4f6237(0x1e0)](setup[_0x4f6237(0x169)],{'val':setup['SYSTEM_MODES'][_0x4f6237(0x14a)],'ack':!![]}));}catch(_0x1fd25a){this[_0x4f6237(0x13b)]=setup['SYSTEM_MODES'][_0x4f6237(0x14a)];}}async[a0_0x49949b(0x191)](){const _0x13563a=a0_0x49949b;try{const _0x4207bd=this[_0x13563a(0x15a)][_0x13563a(0x20a)]||[];let _0x5567f5=![];const _0x38f0fc=[];for(const _0x3dfaa1 of _0x4207bd){try{const _0x26f052=await this[_0x13563a(0x15e)](_0x3dfaa1);_0x26f052&&(_0x26f052[_0x13563a(0x209)]===!![]||_0x26f052[_0x13563a(0x209)]==='online'||_0x26f052[_0x13563a(0x209)]===0x1)&&(_0x5567f5=!![],_0x38f0fc[_0x13563a(0x1bf)](_0x3dfaa1));}catch(_0x161852){}}return await this[_0x13563a(0x1e0)](_0x13563a(0x16c),{'val':_0x38f0fc[_0x13563a(0x145)](',\x20'),'ack':!![]}),_0x5567f5&&(this[_0x13563a(0x1dd)]&&(this[_0x13563a(0x23c)][_0x13563a(0x16f)](_0x13563a(0x19d)),recorder['abortExitTimer'](this)),!this[_0x13563a(0x1ef)]&&this[_0x13563a(0x13b)]===setup[_0x13563a(0x1ea)][_0x13563a(0x14a)]&&await recorder[_0x13563a(0x211)](this,!![])),_0x5567f5;}catch(_0x561ea3){return![];}}async[a0_0x49949b(0x23f)](){const _0x6cd0f1=a0_0x49949b;this[_0x6cd0f1(0x23c)][_0x6cd0f1(0x22c)](_0x6cd0f1(0x229)),await aiAgent[_0x6cd0f1(0x1a5)](this),this[_0x6cd0f1(0x194)](),this['triggerGaitAnalysis'](),this[_0x6cd0f1(0x235)]();}async[a0_0x49949b(0x243)](){const _0x546fee=a0_0x49949b,_0xff380c=[_0x546fee(0x167),_0x546fee(0x1db),_0x546fee(0x1d3)],_0x365cec=[_0x546fee(0x20e),_0x546fee(0x15b),_0x546fee(0x142)];for(const _0x1fe2df of _0xff380c){for(const _0x36222f of _0x365cec){try{const _0x13a483=_0x1fe2df+'.'+_0x36222f,_0x3d2fb6=await this['getForeignStateAsync'](_0x13a483);if(_0x3d2fb6&&_0x3d2fb6[_0x546fee(0x209)]){const _0x2a2cd5=String(_0x3d2fb6['val'])['toLowerCase']();if(_0x2a2cd5[_0x546fee(0x182)](_0x546fee(0x23a))||_0x2a2cd5['includes'](_0x546fee(0x143))||_0x2a2cd5[_0x546fee(0x182)](_0x546fee(0x16d))||_0x2a2cd5['includes']('clear')||_0x2a2cd5[_0x546fee(0x182)](_0x546fee(0x1a6)))return!![];}}catch(_0x3708ca){}}}return![];}['triggerGaitAnalysis'](){const _0x683156=a0_0x49949b;if(!this[_0x683156(0x12b)])return;try{this[_0x683156(0x1a1)]('LTM.trainingData.sequences',(_0x4c421c,_0x403abf)=>{const _0x29069d=_0x683156;_0x403abf&&_0x403abf['val']&&pythonBridge[_0x29069d(0x179)](this,_0x29069d(0x206),{'sequences':JSON[_0x29069d(0x201)](_0x403abf[_0x29069d(0x209)])});});}catch(_0x1d495b){}}async[a0_0x49949b(0x235)](){const _0x2df567=a0_0x49949b;if(!this[_0x2df567(0x12b)])return;try{const _0x18b0a2=await recorder[_0x2df567(0x1a8)](this);if(_0x18b0a2===null)return;const _0x58d814={},_0x1cf144={},_0x5771c9=this[_0x2df567(0x15a)][_0x2df567(0x227)]||[];for(const _0x5c0ffb of _0x5771c9){if(_0x5c0ffb[_0x2df567(0x154)]===_0x2df567(0x172)&&_0x5c0ffb[_0x2df567(0x158)]){const _0x16cc99=this['sensorLastValues'][_0x5c0ffb['id']];if(_0x16cc99!==undefined)_0x58d814[_0x5c0ffb['location']]=_0x16cc99;if(_0x5c0ffb[_0x2df567(0x190)])_0x1cf144[_0x5c0ffb[_0x2df567(0x158)]]=!![];}}const _0x2c2c0e=await this[_0x2df567(0x243)]();let _0x3607c9={};try{const _0xdb752e=await this['getStateAsync'](_0x2df567(0x132));if(_0xdb752e&&_0xdb752e[_0x2df567(0x209)])_0x3607c9=JSON['parse'](_0xdb752e[_0x2df567(0x209)]);}catch(_0x320868){}Object[_0x2df567(0x1c9)](_0x58d814)['length']>0x0&&(pythonBridge[_0x2df567(0x179)](this,_0x2df567(0x218),{'current_temps':_0x58d814,'t_out':_0x18b0a2,'is_sunny':_0x2c2c0e,'solar_flags':_0x1cf144,'warmup_targets':_0x3607c9}),pythonBridge[_0x2df567(0x179)](this,'OPTIMIZE_ENERGY',{'current_temps':_0x58d814,'t_out':_0x18b0a2,'targets':{}}));}catch(_0x588683){}}[a0_0x49949b(0x194)](){const _0x11f537=a0_0x49949b;if(!this['rawEventLog']||this[_0x11f537(0x138)][_0x11f537(0x220)]===0x0)return;const _0x59e91d=new Array(0x60)[_0x11f537(0x13a)](0x0),_0x29bb2a=new Date()[_0x11f537(0x1dc)](0x0,0x0,0x0,0x0);this['rawEventLog'][_0x11f537(0x14b)](_0x41f78b=>{const _0x559e8c=_0x11f537,_0x4265c4=new Date(_0x41f78b[_0x559e8c(0x1c7)]);if(_0x4265c4['getTime']()>=_0x29bb2a){const _0x857f72=_0x4265c4[_0x559e8c(0x134)](),_0x457d90=_0x4265c4[_0x559e8c(0x1be)](),_0x4ffff7=_0x857f72*0x4+Math['floor'](_0x457d90/0xf);if(_0x4ffff7>=0x0&&_0x4ffff7<0x60)_0x59e91d[_0x4ffff7]++;}}),this[_0x11f537(0x1e0)](_0x11f537(0x197),{'val':JSON[_0x11f537(0x131)](_0x59e91d),'ack':!![]});}[a0_0x49949b(0x1a7)](){const _0x13988b=a0_0x49949b;if(!this[_0x13988b(0x230)]||this[_0x13988b(0x230)][_0x13988b(0x220)]<0x2)return;const _0x4c39fb=this[_0x13988b(0x230)][_0x13988b(0x141)](_0x26cb91=>{const _0x45cc3e=_0x13988b,_0x17a872=(_0x26cb91[_0x45cc3e(0x236)]||'')[_0x45cc3e(0x129)]();return ACTIVITY_LEVEL_MAP[_0x17a872]||0x32;});pythonBridge['send'](this,_0x13988b(0x228),{'values':_0x4c39fb,'tag':'Activity-Level'});}}if(require[a0_0x49949b(0x1b5)]!==module)module['exports']=_0x66fb09=>new CogniLiving(_0x66fb09);else new CogniLiving();