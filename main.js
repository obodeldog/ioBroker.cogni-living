const a0_0x5ea846=a0_0x44d7;function a0_0x44d7(_0x7187e2,_0x57b1c5){const _0x261e27=a0_0x56ee();return a0_0x44d7=function(_0x2cf40f,_0x1fd55b){_0x2cf40f=_0x2cf40f-0x15f;let _0x56eeb7=_0x261e27[_0x2cf40f];return _0x56eeb7;},a0_0x44d7(_0x7187e2,_0x57b1c5);}(function(_0x4d1ef7,_0x36e0fc){const _0x5803d1=a0_0x44d7,_0x4b011a=_0x4d1ef7();while(!![]){try{const _0x15efd8=parseInt(_0x5803d1(0x215))/0x1*(-parseInt(_0x5803d1(0x207))/0x2)+parseInt(_0x5803d1(0x169))/0x3+-parseInt(_0x5803d1(0x243))/0x4+-parseInt(_0x5803d1(0x1c0))/0x5*(parseInt(_0x5803d1(0x1fa))/0x6)+parseInt(_0x5803d1(0x1fc))/0x7*(parseInt(_0x5803d1(0x240))/0x8)+-parseInt(_0x5803d1(0x259))/0x9*(-parseInt(_0x5803d1(0x1ff))/0xa)+parseInt(_0x5803d1(0x25c))/0xb;if(_0x15efd8===_0x36e0fc)break;else _0x4b011a['push'](_0x4b011a['shift']());}catch(_0x2aa5ea){_0x4b011a['push'](_0x4b011a['shift']());}}}(a0_0x56ee,0x4cf9c));const a0_0x1fd55b=(function(){let _0x99f044=!![];return function(_0x164510,_0x5770f0){const _0x418be8=_0x99f044?function(){const _0x5b5991=a0_0x44d7;if(_0x5770f0){const _0x192873=_0x5770f0[_0x5b5991(0x1b6)](_0x164510,arguments);return _0x5770f0=null,_0x192873;}}:function(){};return _0x99f044=![],_0x418be8;};}()),a0_0x2cf40f=a0_0x1fd55b(this,function(){const _0x525869=a0_0x44d7;return a0_0x2cf40f[_0x525869(0x16c)]()[_0x525869(0x24d)](_0x525869(0x24e))[_0x525869(0x16c)]()[_0x525869(0x25d)](a0_0x2cf40f)[_0x525869(0x24d)](_0x525869(0x24e));});a0_0x2cf40f();'use strict';const utils=require(a0_0x5ea846(0x216)),{GoogleGenerativeAI}=require(a0_0x5ea846(0x23c)),path=require(a0_0x5ea846(0x16e)),fs=require('fs'),installer=require(a0_0x5ea846(0x1e5)),scanner=require(a0_0x5ea846(0x1be)),schedulers=require(a0_0x5ea846(0x26d)),topology=require(a0_0x5ea846(0x26b)),setup=require('./lib/setup'),recorder=require(a0_0x5ea846(0x244)),pythonBridge=require(a0_0x5ea846(0x183)),aiAgent=require('./lib/ai_agent'),deadMan=require(a0_0x5ea846(0x162)),automation=require(a0_0x5ea846(0x1db)),GEMINI_MODEL=a0_0x5ea846(0x21e);function a0_0x56ee(){const _0x216049=['10YEKnTh','memoryCache','message','No\x20data','writeFileSync','initHistory','events.history','â†º\x20Replaying\x20','âœ…\x20Dashboard\x20Data\x20(Rooms\x20&\x20Timeline\x20&\x20Details)\x20restored.','saveDailyHistory','scanThermostats','subscribeStates','rawEventLog','utf8','Guest\x20Mode','minDaysForBaseline','replayTodayEvents','Init...','getOverviewData','error','triggerInfrasoundCorrelation','isGracePeriodActive','command','filter','Unknown','Failed\x20to\x20trigger\x20Python\x20Health\x20Check','analysis.automation.targetId','./lib/automation','forEach','[Integrator]\x20Error:\x20','licenseKey','devices','presenceDevices','endsWith','Room\x20Dwell\x20Time\x20Stats','activeModules','Keine\x20Daten','./lib/installer','party','namespace','Sec-Training\x20started...','state','analysis.trigger','location','SYSTEM_MODES','\x20events\x20from\x20standard\x20storage.','lastTrackerEventTime','geminiModel','LTM.triggerDailyDigest','bind','analysis.activity.roomStats','.json','pressureBuffer','enum','json','checkCalendarTriggers','DAY','config','957540cYhvyP','toLowerCase','21iYQcph','triggerGaitAnalysis','analysis.prediction.trackerTopRoom','2531020abOFml','guest','pulse','max','todayVector','security','âœ…\x20History\x20saved:\x20','date','16UmuvbI','General\x20Activity\x20Trend','type','moduleComfort','Gemini\x20Report\x20Day','analysisTimer','subscribeForeignStatesAsync','generateHealthReport','ðŸ’¾\x20Saving\x20Daily\x20History\x20for\x20','analysis.automation.patternDetected','Daily\x20Room\x20Details\x20(48x30min)','setDate','startService','history','17905LwFEWr','@iobroker/adapter-core','analysis.training.triggerEnergy','{\x22history\x22:{}}','handleInfrasound','analysis.activity.roomHistory','system.presenceWho','analysis.health.geminiNight','window','models/gemini-flash-latest','push','TRAIN_TOPOLOGY','dependencyInstallInProgress','appendToLog','geminiApiKey','.system.mode','health','healthTrendInterval','values','analyzeWindowOpening','node-schedule','warn','triggerEnergyPrediction','roomIntegratorTimer','string','briefingJob','moduleHealth','getHistoryData','Warm-Up\x20Time','pop','createAllObjects','loadSystemMode','length','ltmJob','runGeminiAnalysis','isRelevantActivity','send','setState','runPythonHealthCheck','@google/generative-ai','version','terrasse','Room\x20History\x20(24h\x20Buckets)','1074824nTglCm','runAutopilot','isPresent','1253880IyOrpd','./lib/recorder','SYSTEM_DP_MODE','ready','getMinutes','LTM.rawEventLog','LTM.dailyDigests','.venv','dailyDigests','TRAIN_ENERGY','search','(((.+)+)+)+$','enum.rooms.*','analysis.automation.targetValue','onMessage','driftAnalysisTimer','sendNotification','\x20events\x20from\x20today...','sendMorningBriefing','triggerBriefing','reduce','getStateAsync','9SUEumM','analysis.health.geminiDay','application/json','658196ECiFEH','constructor','Aktiv\x20(','stopService','setHours','TRAIN_COMFORT','inactivityThresholdHours','join','NORMAL','moduleEnergy','bootTime','mkdirSync','\x20Tage)','isProVersion','readFileSync','./lib/topology','TRAIN_HEALTH','./lib/scheduler','automation.triggerAction','python','modules','debug','find','value','moduleSecurity','fill','Party\x20Mode','analysis.energy.warmupTimes','cancel','onStateChange','timestamp','Corrupt','info','./lib/dead_man','...','cogni-living\x20adapter\x20starting\x20(v','trackerHeartbeat','haustÃ¼r','analysisHistory','cleanupGhostInterventions','1125555bkeGhS','integrateRoomTime','now','toString','updateHealthVector','path','VACATION','setStateAsync','toLocaleDateString','History\x20Save\x20Error:\x20','text','checkSolarCondition','analysis.prediction.trackerConfidence','main','getHours','stringify','common','infrasoundSensorId','genAI','Gemini\x20Init\x20Error:\x20','toISOString','infrasoundLocked','min','analysis.training.triggerHealth','analysis.security.lastScore','analysis.training.triggerSecurity','./lib/python_bridge','enum.functions.*','currentSystemMode','sources','then','all','Live\x20Event\x20Pulse','name','includes','analysis.training.triggerTopology','getForeignObjectsAsync','abortExitTimer','log','getForeignStateAsync','executeAutomationAction','stateChange','cogni-living','analysis.health.todayVector','ack','energy','slice','sendTo','checkThermostats','existsSync','some','systemConfig','analysis.health.todayRoomDetails','number','val','onReady','manual','processSensorEvent','analysis.energy.warmupSources','LTM.trainingData.sequences','startSystem','eventHistory','SET_LEARNING_MODE','LTM.trainingData.thermodynamics','analysis.health.activityTrend','getDate','callback','getAbsoluteDefaultDataDir','analysis.visualization.pulse','Warte\x20auf\x20Analyse...','LTM.baselineStatus','analysis.training.status','historyJob','setObjectNotExistsAsync','parse','infrasoundEnabled','TRAIN_SECURITY','apply','scanForDevices','times','initSystemConfig','from','checkLicense','split','\x22history\x22:{}','./lib/scanner','getEnums'];a0_0x56ee=function(){return _0x216049;};return a0_0x56ee();}class CogniLiving extends utils['Adapter']{constructor(_0x10c9e5){const _0x430d88=a0_0x5ea846;super({..._0x10c9e5,'name':_0x430d88(0x193)}),this['eventHistory']=[],this[_0x430d88(0x167)]=[],this['rawEventLog']=[],this['dailyDigests']=[],this['sensorLastValues']={},this[_0x430d88(0x19c)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x430d88(0x242)]=!![],this['exitTimer']=null,this['exitGraceTimer']=null,this[_0x430d88(0x1d5)]=![],this[_0x430d88(0x17b)]=null,this[_0x430d88(0x1ef)]=null,this[_0x430d88(0x185)]=setup[_0x430d88(0x1ec)][_0x430d88(0x264)],this[_0x430d88(0x269)]=![],this['lastAlertState']=![],this[_0x430d88(0x20c)]=null,this[_0x430d88(0x236)]=null,this['modeResetJob']=null,this[_0x430d88(0x252)]=null,this[_0x430d88(0x22e)]=null,this[_0x430d88(0x1b1)]=null,this[_0x430d88(0x165)]=null,this[_0x430d88(0x226)]=null,this['roomIntegratorTimer']=null,this['dependencyInstallInProgress']=![],this[_0x430d88(0x1ee)]=Date[_0x430d88(0x16b)](),this[_0x430d88(0x1c1)]=null,this[_0x430d88(0x266)]=Date[_0x430d88(0x16b)](),this[_0x430d88(0x17e)]=![],this[_0x430d88(0x1f4)]=[],this[_0x430d88(0x1e3)]={'health':!![],'security':!![],'energy':!![],'comfort':!![]},this['on'](_0x430d88(0x246),this['onReady']['bind'](this)),this['on'](_0x430d88(0x192),this[_0x430d88(0x279)][_0x430d88(0x1f1)](this)),this['on']('unload',this['onUnload'][_0x430d88(0x1f1)](this)),this['on'](_0x430d88(0x1c2),this[_0x430d88(0x251)][_0x430d88(0x1f1)](this));}async[a0_0x5ea846(0x1a0)](){const _0x1b81fc=a0_0x5ea846;this[_0x1b81fc(0x18f)][_0x1b81fc(0x161)](_0x1b81fc(0x164)+this[_0x1b81fc(0x23d)]+')\x20-\x20Phase\x20E\x20(Fix\x20Restore)');if(this['config'][_0x1b81fc(0x22f)]!==undefined)this['activeModules']['health']=this[_0x1b81fc(0x1f9)]['moduleHealth'];if(this[_0x1b81fc(0x1f9)][_0x1b81fc(0x274)]!==undefined)this[_0x1b81fc(0x1e3)]['security']=this[_0x1b81fc(0x1f9)][_0x1b81fc(0x274)];if(this['config'][_0x1b81fc(0x265)]!==undefined)this[_0x1b81fc(0x1e3)][_0x1b81fc(0x196)]=this[_0x1b81fc(0x1f9)][_0x1b81fc(0x265)];if(this[_0x1b81fc(0x1f9)][_0x1b81fc(0x20a)]!==undefined)this[_0x1b81fc(0x1e3)]['comfort']=this[_0x1b81fc(0x1f9)][_0x1b81fc(0x20a)];if(this[_0x1b81fc(0x1f9)][_0x1b81fc(0x270)])this[_0x1b81fc(0x1e3)]={...this['activeModules'],...this[_0x1b81fc(0x1f9)][_0x1b81fc(0x270)]};this['startSystem']();}async[a0_0x5ea846(0x1a5)](){const _0x39f82b=a0_0x5ea846;await setup['initZombies'](this);try{this[_0x39f82b(0x269)]=await setup[_0x39f82b(0x1bb)](this[_0x39f82b(0x1f9)][_0x39f82b(0x1de)]);}catch(_0x54c585){}if(!this[_0x39f82b(0x1f9)][_0x39f82b(0x262)]||this[_0x39f82b(0x1f9)][_0x39f82b(0x262)]<0.1)this[_0x39f82b(0x1f9)][_0x39f82b(0x262)]=0xc;await setup[_0x39f82b(0x1c5)](this),await setup[_0x39f82b(0x1b9)](this);try{const _0x1ea192=await this[_0x39f82b(0x258)](_0x39f82b(0x277)),_0x4d2a3c=await this[_0x39f82b(0x258)](_0x39f82b(0x1a3));_0x1ea192&&_0x1ea192[_0x39f82b(0x19f)]&&_0x4d2a3c&&_0x4d2a3c[_0x39f82b(0x19f)]&&(Date['now']()-_0x1ea192['ts']<0x4*0xe10*0x3e8&&(this[_0x39f82b(0x1c1)]={'times':JSON[_0x39f82b(0x1b3)](_0x1ea192[_0x39f82b(0x19f)]),'sources':JSON['parse'](_0x4d2a3c[_0x39f82b(0x19f)])}));}catch(_0x96401b){}if(this[_0x39f82b(0x1f9)]['geminiApiKey'])try{this['genAI']=new GoogleGenerativeAI(this[_0x39f82b(0x1f9)][_0x39f82b(0x223)]),this[_0x39f82b(0x1ef)]=this[_0x39f82b(0x17b)]['getGenerativeModel']({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x39f82b(0x25b)}});}catch(_0x52b738){this[_0x39f82b(0x18f)][_0x39f82b(0x1d3)](_0x39f82b(0x17c)+_0x52b738[_0x39f82b(0x1c2)]);}await setup[_0x39f82b(0x233)](this),await this['loadSystemMode'](),await this['setObjectNotExistsAsync'](_0x39f82b(0x1ad),{'type':_0x39f82b(0x1e9),'common':{'name':_0x39f82b(0x189),'type':_0x39f82b(0x19e),'role':_0x39f82b(0x273),'read':!![],'write':![]},'native':{}}),await this[_0x39f82b(0x1b2)](_0x39f82b(0x1f2),{'type':_0x39f82b(0x1e9),'common':{'name':_0x39f82b(0x1e2),'type':_0x39f82b(0x22d),'role':'json','read':!![],'write':![],'def':'{\x22today\x22:{},\x20\x22yesterday\x22:{},\x20\x22date\x22:\x22\x22}'},'native':{}}),await this[_0x39f82b(0x1b2)](_0x39f82b(0x21a),{'type':'state','common':{'name':_0x39f82b(0x23f),'type':_0x39f82b(0x22d),'role':'json','read':!![],'write':![],'def':_0x39f82b(0x218)},'native':{}}),await this[_0x39f82b(0x1b2)](_0x39f82b(0x21c),{'type':_0x39f82b(0x1e9),'common':{'name':'Gemini\x20Report\x20Night','type':_0x39f82b(0x22d),'role':_0x39f82b(0x173),'read':!![],'write':![],'def':_0x39f82b(0x1ae)},'native':{}}),await this[_0x39f82b(0x1b2)](_0x39f82b(0x25a),{'type':_0x39f82b(0x1e9),'common':{'name':_0x39f82b(0x20b),'type':_0x39f82b(0x22d),'role':_0x39f82b(0x173),'read':!![],'write':![],'def':_0x39f82b(0x1ae)},'native':{}}),await this[_0x39f82b(0x1b2)](_0x39f82b(0x194),{'type':_0x39f82b(0x1e9),'common':{'name':'Daily\x20Activity\x20Vector\x20(48x30min)','type':'string','role':_0x39f82b(0x1f6),'read':!![],'write':![],'def':'[]'},'native':{}}),await this['setObjectNotExistsAsync'](_0x39f82b(0x19d),{'type':'state','common':{'name':_0x39f82b(0x211),'type':_0x39f82b(0x22d),'role':_0x39f82b(0x1f6),'read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x39f82b(0x1b2)]('analysis.health.activityTrend',{'type':_0x39f82b(0x1e9),'common':{'name':_0x39f82b(0x208),'type':'number','role':_0x39f82b(0x273),'unit':'%','read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x39f82b(0x277),{'type':_0x39f82b(0x1e9),'common':{'name':_0x39f82b(0x231),'type':_0x39f82b(0x22d),'role':_0x39f82b(0x1f6),'read':!![],'write':![]},'native':{}});try{const _0xe548b8=await this[_0x39f82b(0x258)](_0x39f82b(0x1c6));if(_0xe548b8&&_0xe548b8[_0x39f82b(0x19f)]){this['eventHistory']=JSON[_0x39f82b(0x1b3)](_0xe548b8[_0x39f82b(0x19f)]);if(this[_0x39f82b(0x269)]){const _0x35e6c0=await this[_0x39f82b(0x258)](_0x39f82b(0x248));if(_0x35e6c0&&_0x35e6c0[_0x39f82b(0x19f)])this[_0x39f82b(0x1cc)]=JSON['parse'](_0x35e6c0['val']);}this[_0x39f82b(0x18f)][_0x39f82b(0x161)]('ðŸ“¦\x20Restored\x20'+this[_0x39f82b(0x1a6)][_0x39f82b(0x235)]+_0x39f82b(0x1ed));}}catch(_0x3352af){this['eventHistory']=[];}try{const _0x4a7d12=await this['getStateAsync']('LTM.dailyDigests');if(_0x4a7d12&&_0x4a7d12[_0x39f82b(0x19f)])this[_0x39f82b(0x24b)]=JSON[_0x39f82b(0x1b3)](_0x4a7d12['val']);}catch(_0x26ec5d){this[_0x39f82b(0x24b)]=[];}const _0x54d365=this[_0x39f82b(0x24b)][_0x39f82b(0x235)]>=(this[_0x39f82b(0x1f9)][_0x39f82b(0x1cf)]||0x7)?_0x39f82b(0x25e)+this[_0x39f82b(0x24b)][_0x39f82b(0x235)]+_0x39f82b(0x268):'Lernphase\x20('+this[_0x39f82b(0x24b)][_0x39f82b(0x235)]+'/'+(this[_0x39f82b(0x1f9)][_0x39f82b(0x1cf)]||0x7)+')';await this[_0x39f82b(0x170)](_0x39f82b(0x1af),{'val':_0x54d365,'ack':!![]}),this['subscribeStates'](_0x39f82b(0x1ea)),this['subscribeStates'](_0x39f82b(0x1f0)),this[_0x39f82b(0x1cb)](_0x39f82b(0x180));this[_0x39f82b(0x1f9)][_0x39f82b(0x1b4)]&&this[_0x39f82b(0x1f9)][_0x39f82b(0x17a)]&&this[_0x39f82b(0x1e3)]['security']&&this['subscribeForeignStates'](this[_0x39f82b(0x1f9)][_0x39f82b(0x17a)]);const _0x5d54c6=this[_0x39f82b(0x1f9)][_0x39f82b(0x1df)];if(_0x5d54c6)for(const _0x3f6ea0 of _0x5d54c6){await this[_0x39f82b(0x20d)](_0x3f6ea0['id']);}const _0x217037=this[_0x39f82b(0x1f9)][_0x39f82b(0x1e0)];if(_0x217037)for(const _0x137706 of _0x217037){await this['subscribeForeignStatesAsync'](_0x137706);}const _0x434d1d=require(_0x39f82b(0x229));if(this[_0x39f82b(0x1b1)])this['historyJob'][_0x39f82b(0x278)]();this[_0x39f82b(0x1b1)]=_0x434d1d['scheduleJob']('59\x2023\x20*\x20*\x20*',()=>{this['saveDailyHistory']();}),setTimeout(()=>this[_0x39f82b(0x1d0)](),0x1388);if(this[_0x39f82b(0x22c)])clearInterval(this[_0x39f82b(0x22c)]);this['integrateRoomTime'](),this['roomIntegratorTimer']=setInterval(async()=>{const _0x4785b2=_0x39f82b;await this[_0x4785b2(0x16a)]();},0x3c*0x3e8);if(this[_0x39f82b(0x226)])clearInterval(this[_0x39f82b(0x226)]);this[_0x39f82b(0x226)]=setInterval(()=>{const _0x212d29=_0x39f82b;this[_0x212d29(0x269)]&&this[_0x212d29(0x1e3)][_0x212d29(0x225)]&&this[_0x212d29(0x23b)]();},0x4*0x3c*0x3c*0x3e8);const _0x73f5e3=path[_0x39f82b(0x263)](__dirname,_0x39f82b(0x24a),'bin',_0x39f82b(0x26f));pythonBridge[_0x39f82b(0x213)](this,_0x73f5e3);}['onUnload'](_0x1b5910){const _0x166611=a0_0x5ea846;if(this[_0x166611(0x1b1)])this[_0x166611(0x1b1)]['cancel']();this[_0x166611(0x1c9)]()[_0x166611(0x187)](()=>{const _0x159687=_0x166611;if(this[_0x159687(0x20c)])clearInterval(this['analysisTimer']);if(this[_0x159687(0x22c)])clearInterval(this['roomIntegratorTimer']);recorder[_0x159687(0x18e)](this),pythonBridge[_0x159687(0x25f)](this),_0x1b5910();});}async['replayTodayEvents'](){const _0x237660=a0_0x5ea846;if(!this['eventHistory']||this[_0x237660(0x1a6)][_0x237660(0x235)]===0x0){this[_0x237660(0x18f)]['warn']('âš \x20Replay\x20skipped:\x20No\x20events\x20in\x20memory.');return;}this[_0x237660(0x18f)][_0x237660(0x161)](_0x237660(0x1c7)+this['eventHistory']['length']+_0x237660(0x254));const _0x597115=new Date()[_0x237660(0x260)](0x0,0x0,0x0,0x0),_0x1f3451='analysis.activity.roomHistory';let _0x2be337={'history':{},'date':new Date()[_0x237660(0x171)]()};const _0x56aa76=_0x237660(0x194),_0x566d3='analysis.health.todayRoomDetails';let _0x18d3c9=new Array(0x30)['fill'](0x0),_0x4b4af5=Array[_0x237660(0x1ba)]({'length':0x30},()=>[]);this[_0x237660(0x1a6)][_0x237660(0x1dc)](_0x3dfc9c=>{const _0x35c3ac=_0x237660;if(_0x3dfc9c[_0x35c3ac(0x15f)]>=_0x597115){if(recorder[_0x35c3ac(0x238)](_0x3dfc9c['type'],_0x3dfc9c[_0x35c3ac(0x273)])){const _0x2e9918=new Date(_0x3dfc9c[_0x35c3ac(0x15f)]),_0x198d35=_0x2e9918[_0x35c3ac(0x177)]()*0x2+(_0x2e9918[_0x35c3ac(0x247)]()>=0x1e?0x1:0x0);if(_0x198d35<0x30){_0x18d3c9[_0x198d35]++;const _0xe6e566=_0x3dfc9c[_0x35c3ac(0x1eb)]||_0x3dfc9c['name']||'?';let _0x180e65=_0x4b4af5[_0x198d35];!_0x180e65[_0x35c3ac(0x18b)](_0xe6e566)&&_0x180e65['push'](_0xe6e566);}const _0x5a4ac2=_0x2e9918[_0x35c3ac(0x177)]();let _0x52c317=_0x3dfc9c[_0x35c3ac(0x1eb)]||_0x35c3ac(0x1d8);const _0x6368d6=(this['config']['devices']||[])[_0x35c3ac(0x272)](_0x12d829=>_0x12d829[_0x35c3ac(0x1eb)]===_0x52c317);if(_0x6368d6)_0x52c317=_0x6368d6['location'];if(!_0x2be337[_0x35c3ac(0x214)][_0x52c317])_0x2be337[_0x35c3ac(0x214)][_0x52c317]=new Array(0x18)[_0x35c3ac(0x275)](0x0);if(_0x2be337['history'][_0x52c317][_0x5a4ac2]<0x3c)_0x2be337[_0x35c3ac(0x214)][_0x52c317][_0x5a4ac2]++;}}});const _0x10eb21=await this['getStateAsync'](_0x1f3451);(!_0x10eb21||!_0x10eb21['val']||_0x10eb21['val']==='{}'||_0x10eb21['val']['includes'](_0x237660(0x1bd)))&&await this[_0x237660(0x170)](_0x1f3451,{'val':JSON['stringify'](_0x2be337),'ack':!![]}),await this[_0x237660(0x170)](_0x56aa76,{'val':JSON['stringify'](_0x18d3c9),'ack':!![]}),await this[_0x237660(0x170)](_0x566d3,{'val':JSON[_0x237660(0x178)](_0x4b4af5),'ack':!![]}),this[_0x237660(0x18f)][_0x237660(0x161)](_0x237660(0x1c8));}async[a0_0x5ea846(0x1c9)](){const _0x568a17=a0_0x5ea846;if(!this[_0x568a17(0x1e3)][_0x568a17(0x225)])return;const _0x493fdb=new Date()[_0x568a17(0x17d)]()[_0x568a17(0x1bc)]('T')[0x0];this['log'][_0x568a17(0x271)](_0x568a17(0x20f)+_0x493fdb+_0x568a17(0x163));try{const [_0x12baed,_0x53f214,_0x1c3098,_0x3470ea,_0x1cc886,_0x1f97f3]=await Promise[_0x568a17(0x188)]([this[_0x568a17(0x258)](_0x568a17(0x21a)),this['getStateAsync']('analysis.health.geminiNight'),this[_0x568a17(0x258)](_0x568a17(0x25a)),this[_0x568a17(0x258)](_0x568a17(0x181)),this['getStateAsync']('analysis.health.todayVector'),this['getStateAsync'](_0x568a17(0x1a9))]),_0x3ba35f=this[_0x568a17(0x1a6)][_0x568a17(0x1d7)](_0x11bfe8=>_0x11bfe8[_0x568a17(0x15f)]>=new Date()['setHours'](0x0,0x0,0x0,0x0)&&(_0x11bfe8['name'][_0x568a17(0x1fb)]()[_0x568a17(0x18b)](_0x568a17(0x166))||_0x11bfe8[_0x568a17(0x18a)]['toLowerCase']()[_0x568a17(0x18b)](_0x568a17(0x23e)))&&(_0x11bfe8[_0x568a17(0x273)]===!![]||_0x11bfe8[_0x568a17(0x273)]==='open'))[_0x568a17(0x235)];let _0x5e006a=0x55;if(_0x1f97f3&&_0x1f97f3['val']!==undefined)_0x5e006a=Math[_0x568a17(0x17f)](0x64,Math[_0x568a17(0x202)](0x14,Math['round'](0x50+Number(_0x1f97f3[_0x568a17(0x19f)])*0x5)));const _0xd47836={'date':_0x493fdb,'timestamp':Date[_0x568a17(0x16b)](),'roomHistory':_0x12baed?.[_0x568a17(0x19f)]?JSON[_0x568a17(0x1b3)](_0x12baed[_0x568a17(0x19f)]):{},'geminiNight':_0x53f214?.['val']||_0x568a17(0x1e4),'geminiDay':_0x1c3098?.[_0x568a17(0x19f)]||_0x568a17(0x1e4),'anomalyScore':_0x3470ea?.[_0x568a17(0x19f)]||0.1,'todayVector':_0x1cc886?.[_0x568a17(0x19f)]?JSON['parse'](_0x1cc886[_0x568a17(0x19f)]):new Array(0x30)[_0x568a17(0x275)](0x0),'batteryLevel':_0x5e006a,'freshAirCount':_0x3ba35f,'eventHistory':this['eventHistory']},_0x488efc=utils[_0x568a17(0x1ac)](),_0x3c48b4=path[_0x568a17(0x263)](_0x488efc,_0x568a17(0x193),_0x568a17(0x214));if(!fs['existsSync'](_0x3c48b4))fs[_0x568a17(0x267)](_0x3c48b4,{'recursive':!![]});const _0x12ae7a=path[_0x568a17(0x263)](_0x3c48b4,_0x493fdb+_0x568a17(0x1f3));fs[_0x568a17(0x1c4)](_0x12ae7a,JSON['stringify'](_0xd47836)),this[_0x568a17(0x18f)][_0x568a17(0x161)](_0x568a17(0x205)+_0x12ae7a);}catch(_0x3007a3){this[_0x568a17(0x18f)]['error'](_0x568a17(0x172)+_0x3007a3['message']);}}async[a0_0x5ea846(0x16a)](){const _0x39c422=a0_0x5ea846;if(!this[_0x39c422(0x242)])return;try{let _0x539b01=null;try{const _0x1954f1=await this[_0x39c422(0x258)](_0x39c422(0x1fe)),_0x37ce55=await this[_0x39c422(0x258)](_0x39c422(0x175));if(_0x1954f1&&_0x1954f1[_0x39c422(0x19f)]&&_0x37ce55&&_0x37ce55[_0x39c422(0x19f)]&&_0x37ce55[_0x39c422(0x19f)]>0.3){if(_0x1954f1[_0x39c422(0x19f)]!==_0x39c422(0x1d8)&&_0x1954f1[_0x39c422(0x19f)]!==_0x39c422(0x1d1))_0x539b01=_0x1954f1['val'];}}catch(_0x827ba3){}if(!_0x539b01){const _0x5c84c2=this['config'][_0x39c422(0x1df)]||[];for(const _0x163dec of _0x5c84c2){if(_0x163dec['type']==='motion'&&_0x163dec['location'])try{const _0x3cf336=await this[_0x39c422(0x190)](_0x163dec['id']);if(_0x3cf336&&(_0x3cf336[_0x39c422(0x19f)]===!![]||_0x3cf336[_0x39c422(0x19f)]==='on'||_0x3cf336[_0x39c422(0x19f)]===0x1)){_0x539b01=_0x163dec[_0x39c422(0x1eb)];break;}}catch(_0x2b34c0){}}}if(!_0x539b01)return;const _0x32efcb=this[_0x39c422(0x1f9)][_0x39c422(0x1df)]||[];let _0x3d8614=_0x539b01;const _0x3dc6f9=_0x32efcb[_0x39c422(0x272)](_0x4e649b=>_0x4e649b[_0x39c422(0x1eb)]&&_0x4e649b[_0x39c422(0x1eb)][_0x39c422(0x1fb)]()===_0x539b01[_0x39c422(0x1fb)]());if(_0x3dc6f9)_0x3d8614=_0x3dc6f9[_0x39c422(0x1eb)];const _0x1ec39c=_0x39c422(0x21a),_0x2b16eb=await this[_0x39c422(0x258)](_0x1ec39c),_0x5e45bd=new Date()[_0x39c422(0x171)]();let _0x3d765a={'history':{},'date':_0x5e45bd};if(_0x2b16eb&&_0x2b16eb[_0x39c422(0x19f)])try{_0x3d765a=JSON[_0x39c422(0x1b3)](_0x2b16eb[_0x39c422(0x19f)]);}catch(_0x1f2c0e){}_0x3d765a[_0x39c422(0x206)]!==_0x5e45bd&&(_0x3d765a[_0x39c422(0x214)]={},_0x3d765a[_0x39c422(0x206)]=_0x5e45bd);if(!_0x3d765a['history'][_0x3d8614])_0x3d765a['history'][_0x3d8614]=new Array(0x18)['fill'](0x0);const _0x53ee60=new Date()[_0x39c422(0x177)]();if(_0x3d765a[_0x39c422(0x214)][_0x3d8614][_0x53ee60]<0x3c)_0x3d765a[_0x39c422(0x214)][_0x3d8614][_0x53ee60]++;await this[_0x39c422(0x170)](_0x1ec39c,{'val':JSON[_0x39c422(0x178)](_0x3d765a),'ack':!![]});}catch(_0x20db7d){this[_0x39c422(0x18f)][_0x39c422(0x22a)](_0x39c422(0x1dd)+_0x20db7d['message']);}}async[a0_0x5ea846(0x251)](_0x545de5){const _0x5e5db5=a0_0x5ea846;if(typeof _0x545de5==='object'&&_0x545de5['message']){if(_0x545de5[_0x5e5db5(0x1d6)]===_0x5e5db5(0x230)){const _0x3e1736=_0x545de5[_0x5e5db5(0x1c2)][_0x5e5db5(0x206)],_0x1009c3=utils[_0x5e5db5(0x1ac)](),_0x1524b0=path[_0x5e5db5(0x263)](_0x1009c3,'cogni-living',_0x5e5db5(0x214),_0x3e1736+_0x5e5db5(0x1f3));if(fs[_0x5e5db5(0x19a)](_0x1524b0))try{const _0x24d2e5=JSON[_0x5e5db5(0x1b3)](fs['readFileSync'](_0x1524b0,_0x5e5db5(0x1cd)));this[_0x5e5db5(0x198)](_0x545de5['from'],_0x545de5[_0x5e5db5(0x1d6)],{'success':!![],'data':_0x24d2e5},_0x545de5[_0x5e5db5(0x1ab)]);}catch(_0x3ba82d){this[_0x5e5db5(0x198)](_0x545de5[_0x5e5db5(0x1ba)],_0x545de5['command'],{'success':![],'error':_0x5e5db5(0x160)},_0x545de5[_0x5e5db5(0x1ab)]);}else this[_0x5e5db5(0x198)](_0x545de5['from'],_0x545de5[_0x5e5db5(0x1d6)],{'success':![],'error':_0x5e5db5(0x1c3)},_0x545de5[_0x5e5db5(0x1ab)]);}else{if(_0x545de5[_0x5e5db5(0x1d6)]===_0x5e5db5(0x1d2)){const _0xdfb9ea=this[_0x5e5db5(0x24b)][_0x5e5db5(0x235)];let _0x1ddcaa=new Array(0x30)[_0x5e5db5(0x275)](0x0),_0x5b8112=Array[_0x5e5db5(0x1ba)]({'length':0x30},()=>[]);try{const _0x3b5aab=await this['getStateAsync'](_0x5e5db5(0x194));if(_0x3b5aab&&_0x3b5aab[_0x5e5db5(0x19f)])_0x1ddcaa=JSON[_0x5e5db5(0x1b3)](_0x3b5aab[_0x5e5db5(0x19f)]);const _0x10a043=await this[_0x5e5db5(0x258)](_0x5e5db5(0x19d));if(_0x10a043&&_0x10a043[_0x5e5db5(0x19f)])_0x5b8112=JSON[_0x5e5db5(0x1b3)](_0x10a043[_0x5e5db5(0x19f)]);}catch(_0x45217d){}let _0x29203=new Array(0x30)[_0x5e5db5(0x275)](0x0);try{const _0x45aa16=new Date();_0x45aa16[_0x5e5db5(0x212)](_0x45aa16[_0x5e5db5(0x1aa)]()-0x1);const _0xeed653=_0x45aa16[_0x5e5db5(0x17d)]()[_0x5e5db5(0x1bc)]('T')[0x0],_0x200df2=utils[_0x5e5db5(0x1ac)](),_0x28de5e=path[_0x5e5db5(0x263)](_0x200df2,_0x5e5db5(0x193),_0x5e5db5(0x214),_0xeed653+_0x5e5db5(0x1f3));if(fs[_0x5e5db5(0x19a)](_0x28de5e)){const _0x14fc4e=JSON[_0x5e5db5(0x1b3)](fs[_0x5e5db5(0x26a)](_0x28de5e,_0x5e5db5(0x1cd)));if(_0x14fc4e&&_0x14fc4e[_0x5e5db5(0x203)])_0x29203=_0x14fc4e[_0x5e5db5(0x203)];}}catch(_0x31a7c8){}let _0x17f9ca={'today':{},'yesterday':{}};try{const _0x1d35fc=await this[_0x5e5db5(0x258)](_0x5e5db5(0x1f2));if(_0x1d35fc&&_0x1d35fc[_0x5e5db5(0x19f)])_0x17f9ca=JSON[_0x5e5db5(0x1b3)](_0x1d35fc[_0x5e5db5(0x19f)]);}catch(_0x1f2237){}let _0x8d571=null;try{const _0x25d426=await this[_0x5e5db5(0x258)](_0x5e5db5(0x1a9));if(_0x25d426)_0x8d571=_0x25d426[_0x5e5db5(0x19f)];}catch(_0x36b72d){}if(_0x8d571===undefined||_0x8d571===null){const _0x1f6b82=_0x1ddcaa[_0x5e5db5(0x257)]((_0xd4304,_0x3cb805)=>_0xd4304+_0x3cb805,0x0),_0x1c7ee8=Math[_0x5e5db5(0x17f)](0x2,Math[_0x5e5db5(0x202)](-0x2,(0x64-_0x1f6b82)/0x32));_0x8d571=_0x1c7ee8;}let _0x450530=![],_0x5c099a='',_0x1f74f4='',_0x2cb453='';try{const _0x2b013a=await this[_0x5e5db5(0x258)](_0x5e5db5(0x210));if(_0x2b013a&&_0x2b013a[_0x5e5db5(0x19f)]){_0x450530=!![];const _0xa2e87f=await this[_0x5e5db5(0x258)]('analysis.automation.description');_0x5c099a=_0xa2e87f?_0xa2e87f[_0x5e5db5(0x19f)]:'';const _0x47f333=await this[_0x5e5db5(0x258)](_0x5e5db5(0x1da));_0x1f74f4=_0x47f333?_0x47f333[_0x5e5db5(0x19f)]:'';const _0x5edaf0=await this[_0x5e5db5(0x258)](_0x5e5db5(0x250));_0x2cb453=_0x5edaf0?_0x5edaf0[_0x5e5db5(0x19f)]:'';}}catch(_0x104983){}const _0x12d563=await this[_0x5e5db5(0x174)](),_0x277e15=(this[_0x5e5db5(0x1f9)][_0x5e5db5(0x1df)]||[])[_0x5e5db5(0x19b)](_0x53b650=>_0x53b650['isSolar']),_0x28fe17=_0x12d563&&_0x277e15;let _0x5212e8='';try{const _0x2c959e=await this[_0x5e5db5(0x258)](_0x5e5db5(0x21b));if(_0x2c959e&&_0x2c959e['val'])_0x5212e8=_0x2c959e[_0x5e5db5(0x19f)];}catch(_0x44cc2b){}this[_0x5e5db5(0x198)](_0x545de5[_0x5e5db5(0x1ba)],_0x545de5[_0x5e5db5(0x1d6)],{'success':!![],'eventHistory':this[_0x5e5db5(0x1a6)][_0x5e5db5(0x197)](0x0,0x7d0),'stats':{'digestCount':_0xdfb9ea,'isPresent':this[_0x5e5db5(0x242)],'hourlyActivity':_0x1ddcaa,'hourlyDetails':_0x5b8112,'yesterdayActivity':_0x29203,'solarActive':_0x28fe17,'presenceWho':_0x5212e8,'roomStats':_0x17f9ca,'activityTrend':_0x8d571,'modules':this[_0x5e5db5(0x1e3)]},'automation':{'detected':_0x450530,'description':_0x5c099a,'targetId':_0x1f74f4,'targetValue':_0x2cb453}},_0x545de5['callback']);}else{if(_0x545de5[_0x5e5db5(0x1d6)]===_0x5e5db5(0x199))try{const _0x46a8df=await automation[_0x5e5db5(0x1ca)](this);this[_0x5e5db5(0x198)](_0x545de5[_0x5e5db5(0x1ba)],_0x545de5[_0x5e5db5(0x1d6)],{'success':!![],'results':_0x46a8df},_0x545de5['callback']);}catch(_0x3f08e3){this[_0x5e5db5(0x198)](_0x545de5[_0x5e5db5(0x1ba)],_0x545de5[_0x5e5db5(0x1d6)],{'success':![],'error':_0x3f08e3['message']},_0x545de5[_0x5e5db5(0x1ab)]);}else{if(_0x545de5[_0x5e5db5(0x1d6)]==='scanDevices')try{const _0x4566f6=await scanner[_0x5e5db5(0x1b7)](this,_0x545de5[_0x5e5db5(0x1c2)]||{});this[_0x5e5db5(0x198)](_0x545de5[_0x5e5db5(0x1ba)],_0x545de5[_0x5e5db5(0x1d6)],{'success':!![],'devices':_0x4566f6},_0x545de5[_0x5e5db5(0x1ab)]);}catch(_0xf7a38){}else{if(_0x545de5[_0x5e5db5(0x1d6)]===_0x5e5db5(0x1bf)){const _0x1a4ee1=await this[_0x5e5db5(0x18d)](_0x5e5db5(0x184),_0x5e5db5(0x1f5)),_0x2c32b2=[];if(_0x1a4ee1)for(const _0x12a97a in _0x1a4ee1){_0x2c32b2[_0x5e5db5(0x21f)]({'id':_0x12a97a,'name':_0x1a4ee1[_0x12a97a][_0x5e5db5(0x179)][_0x5e5db5(0x18a)]});}const _0x27dc31=await this[_0x5e5db5(0x18d)](_0x5e5db5(0x24f),_0x5e5db5(0x1f5)),_0x200792=[];if(_0x27dc31)for(const _0x59a480 in _0x27dc31){_0x200792['push'](_0x27dc31[_0x59a480][_0x5e5db5(0x179)]['name']||_0x59a480['split']('.')[_0x5e5db5(0x232)]());}this[_0x5e5db5(0x198)](_0x545de5[_0x5e5db5(0x1ba)],_0x545de5['command'],{'success':!![],'enums':_0x2c32b2,'rooms':_0x200792},_0x545de5['callback']);}}}}}}}[a0_0x5ea846(0x23b)](){const _0x49d309=a0_0x5ea846;if(!this[_0x49d309(0x1e3)]['health'])return;this[_0x49d309(0x18f)]['debug']('ðŸ\x20Triggering\x20Python\x20Health\x20Check\x20(Activity\x20Trend)...');try{const _0x307a1b=this[_0x49d309(0x1cc)]||[];pythonBridge['send'](this,'CALCULATE_HEALTH_TREND',{'events':_0x307a1b});}catch(_0x3fdd44){this[_0x49d309(0x18f)][_0x49d309(0x22a)](_0x49d309(0x1d9));}}async[a0_0x5ea846(0x279)](_0x31bd55,_0x183b30){const _0x285a82=a0_0x5ea846;if(!_0x183b30||this[_0x285a82(0x221)])return;if(_0x31bd55[_0x285a82(0x18b)]('telegram')&&_0x31bd55[_0x285a82(0x1e1)]('communicate.request')&&_0x183b30[_0x285a82(0x19f)])return;if(this[_0x285a82(0x1f9)]['infrasoundEnabled']&&_0x31bd55===this[_0x285a82(0x1f9)]['infrasoundSensorId']&&this[_0x285a82(0x1e3)][_0x285a82(0x204)]){this[_0x285a82(0x219)](_0x183b30[_0x285a82(0x19f)]);return;}if(_0x183b30[_0x285a82(0x195)]&&_0x31bd55[_0x285a82(0x1e1)](_0x285a82(0x201)))return;if(_0x31bd55===this[_0x285a82(0x1e7)]+_0x285a82(0x224)){if(_0x183b30[_0x285a82(0x19f)]&&Object[_0x285a82(0x227)](setup['SYSTEM_MODES'])[_0x285a82(0x18b)](_0x183b30[_0x285a82(0x19f)])){this[_0x285a82(0x185)]=_0x183b30['val'];if(_0x183b30['val']===setup[_0x285a82(0x1ec)][_0x285a82(0x16f)])await recorder['setPresence'](this,![]);else await recorder['setPresence'](this,!![]);if(this[_0x285a82(0x269)]){let _0x7bcbaf=![],_0x3df8bb=0x0,_0x43a502=_0x285a82(0x1a1);if(this['currentSystemMode']===_0x285a82(0x1e6))_0x7bcbaf=!![],_0x3df8bb=0x168,_0x43a502=_0x285a82(0x276);else this[_0x285a82(0x185)]===_0x285a82(0x200)&&(_0x7bcbaf=!![],_0x3df8bb=0x5a0,_0x43a502=_0x285a82(0x1ce));pythonBridge[_0x285a82(0x239)](this,_0x285a82(0x1a7),{'active':_0x7bcbaf,'duration':_0x3df8bb,'label':_0x43a502}),await this['setStateAsync']('analysis.security.learningStatus',{'val':JSON[_0x285a82(0x178)]({'active':_0x7bcbaf,'label':_0x43a502,'timestamp':Date['now']()}),'ack':!![]});}}if(!_0x183b30[_0x285a82(0x195)])this[_0x285a82(0x23a)](_0x31bd55,{'val':this[_0x285a82(0x185)],'ack':!![]});return;}if(_0x31bd55['endsWith'](_0x285a82(0x1a3))&&_0x183b30[_0x285a82(0x195)])this['protectAiMemory'](_0x183b30[_0x285a82(0x19f)]);if(_0x31bd55[_0x285a82(0x1e1)]('analysis.energy.warmupTimes')&&_0x183b30['ack']&&this['activeModules'][_0x285a82(0x196)])automation[_0x285a82(0x1f7)](this);if(!_0x183b30[_0x285a82(0x195)]){if(_0x31bd55['includes'](_0x285a82(0x1ea))&&_0x183b30['val']){this['setState'](_0x31bd55,{'val':![],'ack':!![]}),aiAgent[_0x285a82(0x237)](this);return;}if(_0x31bd55[_0x285a82(0x18b)]('triggerDailyDigest')&&_0x183b30[_0x285a82(0x19f)]){this[_0x285a82(0x23a)](_0x31bd55,{'val':![],'ack':!![]});if(this['isProVersion'])aiAgent['createDailyDigest'](this,pythonBridge);return;}if(_0x31bd55[_0x285a82(0x18b)](_0x285a82(0x256))&&_0x183b30[_0x285a82(0x19f)]){this['setState'](_0x31bd55,{'val':![],'ack':!![]}),aiAgent[_0x285a82(0x255)](this);return;}if(_0x31bd55[_0x285a82(0x18b)](_0x285a82(0x26e))&&_0x183b30['val']){this[_0x285a82(0x23a)](_0x31bd55,{'val':![],'ack':!![]}),aiAgent[_0x285a82(0x191)](this);return;}if(_0x31bd55[_0x285a82(0x18b)](_0x285a82(0x182))&&_0x183b30[_0x285a82(0x19f)]){this[_0x285a82(0x23a)](_0x31bd55,{'val':![],'ack':!![]});if(this[_0x285a82(0x269)])try{const _0xfbb3be=await this[_0x285a82(0x258)](_0x285a82(0x1a4));if(_0xfbb3be&&_0xfbb3be[_0x285a82(0x19f)]){const _0x196834=JSON[_0x285a82(0x1b3)](_0xfbb3be[_0x285a82(0x19f)]);this[_0x285a82(0x170)](_0x285a82(0x1b0),{'val':_0x285a82(0x1e8),'ack':!![]}),pythonBridge[_0x285a82(0x239)](this,_0x285a82(0x1b5),{'sequences':_0x196834});}}catch(_0x3c7a41){}return;}if(_0x31bd55[_0x285a82(0x18b)](_0x285a82(0x180))&&_0x183b30[_0x285a82(0x19f)]){this[_0x285a82(0x23a)](_0x31bd55,{'val':![],'ack':!![]});if(this[_0x285a82(0x269)])try{this[_0x285a82(0x23b)]();const _0x34d691=await this[_0x285a82(0x258)](_0x285a82(0x249));if(_0x34d691&&_0x34d691[_0x285a82(0x19f)])pythonBridge[_0x285a82(0x239)](this,_0x285a82(0x26c),{'digests':JSON[_0x285a82(0x1b3)](_0x34d691[_0x285a82(0x19f)])});aiAgent[_0x285a82(0x20e)](this,'NIGHT'),setTimeout(()=>aiAgent[_0x285a82(0x20e)](this,_0x285a82(0x1f8)),0x2ee0);}catch(_0x48eb48){}return;}if(_0x31bd55[_0x285a82(0x18b)](_0x285a82(0x217))&&_0x183b30[_0x285a82(0x19f)]){this[_0x285a82(0x23a)](_0x31bd55,{'val':![],'ack':!![]});if(this[_0x285a82(0x269)])try{const _0x43e316=await this[_0x285a82(0x258)](_0x285a82(0x1a8));if(_0x43e316&&_0x43e316[_0x285a82(0x19f)])pythonBridge[_0x285a82(0x239)](this,_0x285a82(0x24c),{'points':JSON[_0x285a82(0x1b3)](_0x43e316['val'])});}catch(_0x47690c){}return;}if(_0x31bd55[_0x285a82(0x18b)]('analysis.training.triggerComfort')&&_0x183b30['val']){this['setState'](_0x31bd55,{'val':![],'ack':!![]});if(this[_0x285a82(0x269)])try{const _0x12d451=await this[_0x285a82(0x258)](_0x285a82(0x248));if(_0x12d451&&_0x12d451['val']){const _0x2bf590={};if(this[_0x285a82(0x1f9)][_0x285a82(0x1df)])this[_0x285a82(0x1f9)][_0x285a82(0x1df)][_0x285a82(0x1dc)](_0x158ca1=>{const _0x582012=_0x285a82;if(_0x158ca1['id']&&_0x158ca1[_0x582012(0x209)])_0x2bf590[_0x158ca1['id']]=_0x158ca1[_0x582012(0x209)];});pythonBridge[_0x285a82(0x239)](this,_0x285a82(0x261),{'events':JSON[_0x285a82(0x1b3)](_0x12d451[_0x285a82(0x19f)]),'deviceMap':_0x2bf590});}}catch(_0x224b85){}return;}if(_0x31bd55[_0x285a82(0x18b)](_0x285a82(0x18c))&&_0x183b30[_0x285a82(0x19f)]){this['setState'](_0x31bd55,{'val':![],'ack':!![]}),topology['updateTopology'](this);if(this[_0x285a82(0x269)])try{const _0x151fe5=await this[_0x285a82(0x258)](_0x285a82(0x1a4));if(_0x151fe5&&_0x151fe5[_0x285a82(0x19f)])pythonBridge[_0x285a82(0x239)](this,_0x285a82(0x220),{'sequences':JSON[_0x285a82(0x1b3)](_0x151fe5[_0x285a82(0x19f)])});}catch(_0x2f69cc){}return;}}const _0x15e635=(this[_0x285a82(0x1f9)][_0x285a82(0x1df)]||[])[_0x285a82(0x272)](_0x573557=>_0x573557['id']===_0x31bd55);if(_0x15e635){const _0x471fea=await recorder[_0x285a82(0x1a2)](this,_0x31bd55,_0x183b30,_0x15e635);_0x471fea&&this[_0x285a82(0x23a)](_0x285a82(0x1ad),{'val':Date['now'](),'ack':!![]});_0x471fea&&_0x471fea[_0x285a82(0x209)]==='motion'&&_0x471fea[_0x285a82(0x1eb)]&&this[_0x285a82(0x269)]&&deadMan['updateLocation'](this,_0x471fea['location']);_0x183b30[_0x285a82(0x19f)]&&(_0x183b30['val']===!![]||_0x183b30[_0x285a82(0x19f)]===0x1||String(_0x183b30[_0x285a82(0x19f)])['toLowerCase']()==='open')&&(_0x15e635['type']&&(_0x15e635[_0x285a82(0x209)][_0x285a82(0x18b)](_0x285a82(0x21d))||_0x15e635['type'][_0x285a82(0x18b)]('door'))&&this['analyzeWindowOpening'](_0x15e635));if(_0x15e635[_0x285a82(0x209)]==='temperature'||_0x15e635[_0x285a82(0x209)]==='thermostat'){if(this[_0x285a82(0x1e3)][_0x285a82(0x196)])automation[_0x285a82(0x168)](this);}}}async['protectAiMemory'](_0x374721){const _0x3b4dfd=a0_0x5ea846;if(!this[_0x3b4dfd(0x1c1)]||Date['now']()-this['bootTime']>0x493e0)return;try{const _0x225141=JSON[_0x3b4dfd(0x1b3)](_0x374721),_0x399d14=this['memoryCache'][_0x3b4dfd(0x186)];let _0x3ed2c0=![];for(const _0x1634d2 in _0x399d14){if(_0x399d14[_0x1634d2][_0x3b4dfd(0x18b)]('AI')&&_0x225141[_0x1634d2]&&!_0x225141[_0x1634d2][_0x3b4dfd(0x18b)]('AI')){_0x3ed2c0=!![];break;}}_0x3ed2c0&&(await this['setStateAsync'](_0x3b4dfd(0x277),{'val':JSON[_0x3b4dfd(0x178)](this[_0x3b4dfd(0x1c1)][_0x3b4dfd(0x1b8)]),'ack':!![]}),await this[_0x3b4dfd(0x170)](_0x3b4dfd(0x1a3),{'val':JSON[_0x3b4dfd(0x178)](this[_0x3b4dfd(0x1c1)]['sources']),'ack':!![]}));}catch(_0x16122a){}}async[a0_0x5ea846(0x234)](){const _0xaa4485=a0_0x5ea846;try{const _0x1b7273=await this[_0xaa4485(0x258)](setup[_0xaa4485(0x245)]);if(_0x1b7273&&_0x1b7273[_0xaa4485(0x19f)])this[_0xaa4485(0x185)]=_0x1b7273[_0xaa4485(0x19f)];}catch(_0x428cb7){this[_0xaa4485(0x185)]=setup[_0xaa4485(0x1ec)]['NORMAL'];}}async['checkWifiPresence'](){return![];}async[a0_0x5ea846(0x241)](){const _0x2478a1=a0_0x5ea846;await aiAgent[_0x2478a1(0x237)](this);this[_0x2478a1(0x1e3)][_0x2478a1(0x225)]&&(this['updateHealthVector'](),this[_0x2478a1(0x1fd)]());if(this[_0x2478a1(0x1e3)]['energy'])this[_0x2478a1(0x22b)]();}async[a0_0x5ea846(0x174)](){return![];}['triggerGaitAnalysis'](){const _0x1cf6e7=a0_0x5ea846;if(!this[_0x1cf6e7(0x269)])return;}async['triggerEnergyPrediction'](){}[a0_0x5ea846(0x16d)](){}async['handleInfrasound'](_0x160046){}async[a0_0x5ea846(0x1d4)](_0x5e9350,_0x3a20f5){}async[a0_0x5ea846(0x228)](_0x446aec){}async[a0_0x5ea846(0x222)](_0x369763){}[a0_0x5ea846(0x253)](_0x18c4b6){}}if(require[a0_0x5ea846(0x176)]!==module)module['exports']=_0x4ffed5=>new CogniLiving(_0x4ffed5);else new CogniLiving();