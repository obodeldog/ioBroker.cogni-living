const a0_0x2f5064=a0_0x24e1;(function(_0x3e8925,_0xdf1cf6){const _0x3a6ba8=a0_0x24e1,_0x1c4cf3=_0x3e8925();while(!![]){try{const _0xe1de2b=parseInt(_0x3a6ba8(0x327))/0x1*(parseInt(_0x3a6ba8(0x301))/0x2)+-parseInt(_0x3a6ba8(0x208))/0x3*(-parseInt(_0x3a6ba8(0x28a))/0x4)+parseInt(_0x3a6ba8(0x1b0))/0x5*(-parseInt(_0x3a6ba8(0x294))/0x6)+parseInt(_0x3a6ba8(0x319))/0x7*(parseInt(_0x3a6ba8(0x2da))/0x8)+-parseInt(_0x3a6ba8(0x1bb))/0x9*(parseInt(_0x3a6ba8(0x1dd))/0xa)+parseInt(_0x3a6ba8(0x244))/0xb*(-parseInt(_0x3a6ba8(0x2dd))/0xc)+-parseInt(_0x3a6ba8(0x268))/0xd;if(_0xe1de2b===_0xdf1cf6)break;else _0x1c4cf3['push'](_0x1c4cf3['shift']());}catch(_0x365946){_0x1c4cf3['push'](_0x1c4cf3['shift']());}}}(a0_0x2e65,0x6d199));const a0_0x451131=(function(){let _0x1e9a7c=!![];return function(_0x2328f2,_0x5bcc0b){const _0x225bbb=_0x1e9a7c?function(){const _0x4378bb=a0_0x24e1;if(_0x5bcc0b){const _0x8ab87d=_0x5bcc0b[_0x4378bb(0x254)](_0x2328f2,arguments);return _0x5bcc0b=null,_0x8ab87d;}}:function(){};return _0x1e9a7c=![],_0x225bbb;};}()),a0_0x7aebad=a0_0x451131(this,function(){const _0x38388e=a0_0x24e1;return a0_0x7aebad[_0x38388e(0x2b3)]()[_0x38388e(0x23f)](_0x38388e(0x266))[_0x38388e(0x2b3)]()[_0x38388e(0x1bf)](a0_0x7aebad)[_0x38388e(0x23f)](_0x38388e(0x266));});a0_0x7aebad();'use strict';const utils=require('@iobroker/adapter-core'),{GoogleGenerativeAI}=require(a0_0x2f5064(0x2ed)),path=require(a0_0x2f5064(0x296)),fs=require('fs'),installer=require(a0_0x2f5064(0x245)),scanner=require(a0_0x2f5064(0x29f)),schedulers=require(a0_0x2f5064(0x30f)),topology=require('./lib/topology'),setup=require(a0_0x2f5064(0x2c8)),recorder=require(a0_0x2f5064(0x303)),pythonBridge=require(a0_0x2f5064(0x265)),aiAgent=require('./lib/ai_agent'),deadMan=require(a0_0x2f5064(0x323)),automation=require(a0_0x2f5064(0x1ed)),GEMINI_MODEL=a0_0x2f5064(0x1fc);class CogniLiving extends utils[a0_0x2f5064(0x310)]{constructor(_0x5826d6){const _0x33397f=a0_0x2f5064;super({..._0x5826d6,'name':_0x33397f(0x2cb)}),this[_0x33397f(0x1d5)]=[],this[_0x33397f(0x255)]=[],this['rawEventLog']=[],this[_0x33397f(0x2c1)]=[],this[_0x33397f(0x298)]={},this[_0x33397f(0x1cf)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x33397f(0x27a)]=!![],this[_0x33397f(0x227)]=null,this[_0x33397f(0x242)]=null,this[_0x33397f(0x211)]=![],this[_0x33397f(0x277)]=null,this[_0x33397f(0x2b9)]=null,this[_0x33397f(0x206)]=setup[_0x33397f(0x297)][_0x33397f(0x27f)],this[_0x33397f(0x31f)]=![],this[_0x33397f(0x322)]=![],this[_0x33397f(0x20a)]=null,this['calendarCheckTimer']=null,this[_0x33397f(0x32a)]=null,this[_0x33397f(0x2c6)]=null,this[_0x33397f(0x2f8)]=null,this[_0x33397f(0x2d9)]=null,this[_0x33397f(0x215)]=null,this['historyJob']=null,this[_0x33397f(0x1de)]=null,this[_0x33397f(0x2ee)]=null,this[_0x33397f(0x217)]=null,this[_0x33397f(0x24e)]=![],this[_0x33397f(0x1b1)]=Date[_0x33397f(0x22e)](),this['memoryCache']=null,this['bootTime']=Date[_0x33397f(0x22e)](),this['infrasoundLocked']=![],this[_0x33397f(0x26f)]=[],this[_0x33397f(0x1ef)]={'health':!![],'security':!![],'energy':!![],'comfort':!![]},this['on'](_0x33397f(0x2a4),this[_0x33397f(0x2de)][_0x33397f(0x267)](this)),this['on'](_0x33397f(0x20d),this[_0x33397f(0x225)][_0x33397f(0x267)](this)),this['on'](_0x33397f(0x1e3),this[_0x33397f(0x257)]['bind'](this)),this['on'](_0x33397f(0x1f8),this[_0x33397f(0x2d7)][_0x33397f(0x267)](this));}async[a0_0x2f5064(0x2de)](){const _0x352f0c=a0_0x2f5064;this[_0x352f0c(0x29d)][_0x352f0c(0x27b)]('cogni-living\x20adapter\x20starting\x20(v'+this['version']+_0x352f0c(0x25c));if(this[_0x352f0c(0x306)]['moduleHealth']!==undefined)this[_0x352f0c(0x1ef)][_0x352f0c(0x1c5)]=this[_0x352f0c(0x306)][_0x352f0c(0x27c)];if(this[_0x352f0c(0x306)][_0x352f0c(0x1e2)]!==undefined)this[_0x352f0c(0x1ef)]['security']=this[_0x352f0c(0x306)][_0x352f0c(0x1e2)];if(this['config'][_0x352f0c(0x222)]!==undefined)this[_0x352f0c(0x1ef)][_0x352f0c(0x1cb)]=this['config'][_0x352f0c(0x222)];if(this[_0x352f0c(0x306)]['moduleComfort']!==undefined)this[_0x352f0c(0x1ef)][_0x352f0c(0x261)]=this[_0x352f0c(0x306)][_0x352f0c(0x22a)];if(this['config']['modules'])this[_0x352f0c(0x1ef)]={...this['activeModules'],...this[_0x352f0c(0x306)]['modules']};this[_0x352f0c(0x23e)]();}async['startSystem'](){const _0x1b3aac=a0_0x2f5064;await setup[_0x1b3aac(0x2cc)](this);try{this[_0x1b3aac(0x31f)]=await setup[_0x1b3aac(0x309)](this['config'][_0x1b3aac(0x2c7)]);}catch(_0x2d04e4){}if(!this[_0x1b3aac(0x306)][_0x1b3aac(0x2b1)]||this[_0x1b3aac(0x306)][_0x1b3aac(0x2b1)]<0.1)this[_0x1b3aac(0x306)][_0x1b3aac(0x2b1)]=0xc;await setup[_0x1b3aac(0x28c)](this),await setup['initSystemConfig'](this),topology[_0x1b3aac(0x259)](this);try{const _0x157889=await this[_0x1b3aac(0x292)](_0x1b3aac(0x264)),_0x4d6eb8=await this[_0x1b3aac(0x292)](_0x1b3aac(0x329));_0x157889&&_0x157889[_0x1b3aac(0x248)]&&_0x4d6eb8&&_0x4d6eb8[_0x1b3aac(0x248)]&&(Date[_0x1b3aac(0x22e)]()-_0x157889['ts']<0x4*0xe10*0x3e8&&(this['memoryCache']={'times':JSON[_0x1b3aac(0x2ef)](_0x157889[_0x1b3aac(0x248)]),'sources':JSON[_0x1b3aac(0x2ef)](_0x4d6eb8[_0x1b3aac(0x248)])}));}catch(_0x5263c3){}if(this[_0x1b3aac(0x306)][_0x1b3aac(0x29b)])try{this[_0x1b3aac(0x277)]=new GoogleGenerativeAI(this[_0x1b3aac(0x306)][_0x1b3aac(0x29b)]),this['geminiModel']=this['genAI'][_0x1b3aac(0x28b)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x1b3aac(0x251)}});}catch(_0x5b83ce){this[_0x1b3aac(0x29d)][_0x1b3aac(0x1f2)](_0x1b3aac(0x23d)+_0x5b83ce['message']);}await setup['createAllObjects'](this),await this[_0x1b3aac(0x269)](),schedulers[_0x1b3aac(0x1d7)](this),await this[_0x1b3aac(0x1d1)](_0x1b3aac(0x2d4),{'type':_0x1b3aac(0x1db),'common':{'name':_0x1b3aac(0x27d),'type':_0x1b3aac(0x275),'role':_0x1b3aac(0x1b3),'read':!![],'write':![]},'native':{}}),await this[_0x1b3aac(0x1d1)](_0x1b3aac(0x23c),{'type':_0x1b3aac(0x1db),'common':{'name':'Room\x20Dwell\x20Time\x20Stats','type':_0x1b3aac(0x24a),'role':_0x1b3aac(0x289),'read':!![],'write':![],'def':_0x1b3aac(0x2e2)},'native':{}}),await this[_0x1b3aac(0x1d1)](_0x1b3aac(0x1e1),{'type':'state','common':{'name':_0x1b3aac(0x28e),'type':_0x1b3aac(0x24a),'role':'json','read':!![],'write':![],'def':_0x1b3aac(0x30c)},'native':{}}),await this[_0x1b3aac(0x1d1)]('analysis.health.geminiNight',{'type':'state','common':{'name':_0x1b3aac(0x2ea),'type':_0x1b3aac(0x24a),'role':_0x1b3aac(0x24f),'read':!![],'write':![],'def':_0x1b3aac(0x1af)},'native':{}}),await this[_0x1b3aac(0x1d1)](_0x1b3aac(0x23b),{'type':_0x1b3aac(0x1db),'common':{'name':'Gemini\x20Report\x20Day','type':'string','role':'text','read':!![],'write':![],'def':_0x1b3aac(0x1af)},'native':{}}),await this['setObjectNotExistsAsync'](_0x1b3aac(0x2ec),{'type':_0x1b3aac(0x1db),'common':{'name':_0x1b3aac(0x2a5),'type':'string','role':_0x1b3aac(0x289),'read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x1b3aac(0x1d1)](_0x1b3aac(0x1ac),{'type':_0x1b3aac(0x1db),'common':{'name':_0x1b3aac(0x2f1),'type':_0x1b3aac(0x24a),'role':_0x1b3aac(0x289),'read':!![],'write':![],'def':'[]'},'native':{}}),await this['setObjectNotExistsAsync'](_0x1b3aac(0x2ff),{'type':'state','common':{'name':_0x1b3aac(0x1b4),'type':_0x1b3aac(0x275),'role':_0x1b3aac(0x1b3),'unit':'%','read':!![],'write':![]},'native':{}}),await this[_0x1b3aac(0x1d1)](_0x1b3aac(0x264),{'type':'state','common':{'name':_0x1b3aac(0x26b),'type':_0x1b3aac(0x24a),'role':_0x1b3aac(0x289),'read':!![],'write':![]},'native':{}});try{const _0x5e6238=await this[_0x1b3aac(0x292)](_0x1b3aac(0x282));if(_0x5e6238&&_0x5e6238['val']){this[_0x1b3aac(0x1d5)]=JSON['parse'](_0x5e6238['val']);if(this[_0x1b3aac(0x31f)]){const _0x2eb62e=await this[_0x1b3aac(0x292)]('LTM.rawEventLog');if(_0x2eb62e&&_0x2eb62e[_0x1b3aac(0x248)])this[_0x1b3aac(0x212)]=JSON[_0x1b3aac(0x2ef)](_0x2eb62e[_0x1b3aac(0x248)]);}this[_0x1b3aac(0x29d)][_0x1b3aac(0x27b)](_0x1b3aac(0x2c4)+this['eventHistory'][_0x1b3aac(0x283)]+_0x1b3aac(0x25d));}}catch(_0x1b2791){this[_0x1b3aac(0x1d5)]=[];}try{const _0x4fd869=await this['getStateAsync']('LTM.dailyDigests');if(_0x4fd869&&_0x4fd869['val'])this[_0x1b3aac(0x2c1)]=JSON[_0x1b3aac(0x2ef)](_0x4fd869[_0x1b3aac(0x248)]);}catch(_0x34f89e){this[_0x1b3aac(0x2c1)]=[];}const _0x117031=this[_0x1b3aac(0x2c1)][_0x1b3aac(0x283)]>=(this[_0x1b3aac(0x306)][_0x1b3aac(0x232)]||0x7)?_0x1b3aac(0x1c0)+this[_0x1b3aac(0x2c1)]['length']+_0x1b3aac(0x1d4):_0x1b3aac(0x26c)+this[_0x1b3aac(0x2c1)][_0x1b3aac(0x283)]+'/'+(this[_0x1b3aac(0x306)][_0x1b3aac(0x232)]||0x7)+')';await this[_0x1b3aac(0x1ec)](_0x1b3aac(0x202),{'val':_0x117031,'ack':!![]}),this['subscribeStates'](_0x1b3aac(0x2c0)),this['subscribeStates']('LTM.triggerDailyDigest'),this[_0x1b3aac(0x2e1)]('analysis.training.triggerHealth');this[_0x1b3aac(0x306)][_0x1b3aac(0x228)]&&this['config']['infrasoundSensorId']&&this[_0x1b3aac(0x1ef)][_0x1b3aac(0x209)]&&this['subscribeForeignStates'](this[_0x1b3aac(0x306)][_0x1b3aac(0x2af)]);const _0x41835e=this[_0x1b3aac(0x306)][_0x1b3aac(0x25b)];if(_0x41835e)for(const _0x21326f of _0x41835e){await this[_0x1b3aac(0x2a0)](_0x21326f['id']);}const _0x3b83e8=this[_0x1b3aac(0x306)][_0x1b3aac(0x288)];if(_0x3b83e8)for(const _0x3a9279 of _0x3b83e8){await this[_0x1b3aac(0x2a0)](_0x3a9279);}const _0x73fec9=require(_0x1b3aac(0x2c2));if(this[_0x1b3aac(0x2bf)])this[_0x1b3aac(0x2bf)][_0x1b3aac(0x1f5)]();this['historyJob']=_0x73fec9[_0x1b3aac(0x2fb)]('59\x2023\x20*\x20*\x20*',()=>{const _0x327bbd=_0x1b3aac;this[_0x327bbd(0x31d)]();}),setTimeout(()=>this[_0x1b3aac(0x256)](),0x1388);if(this[_0x1b3aac(0x217)])clearInterval(this[_0x1b3aac(0x217)]);this['integrateRoomTime'](),this[_0x1b3aac(0x217)]=setInterval(async()=>{await this['integrateRoomTime']();},0x3c*0x3e8);if(this[_0x1b3aac(0x2ee)])clearInterval(this[_0x1b3aac(0x2ee)]);this['healthTrendInterval']=setInterval(()=>{const _0x2b1b4f=_0x1b3aac;this[_0x2b1b4f(0x31f)]&&this[_0x2b1b4f(0x1ef)][_0x2b1b4f(0x1c5)]&&this[_0x2b1b4f(0x2f7)]();},0x4*0x3c*0x3c*0x3e8);if(this[_0x1b3aac(0x20a)])clearInterval(this[_0x1b3aac(0x20a)]);this[_0x1b3aac(0x1ef)]['energy']&&(this[_0x1b3aac(0x20a)]=setInterval(()=>{const _0xdc33cf=_0x1b3aac;this[_0xdc33cf(0x21b)]();},0xf*0x3c*0x3e8),setTimeout(()=>this['triggerEnergyPrediction'](),0x2710));if(this['calendarCheckTimer'])clearInterval(this[_0x1b3aac(0x247)]);this[_0x1b3aac(0x306)][_0x1b3aac(0x2ae)]&&this[_0x1b3aac(0x1ef)][_0x1b3aac(0x1cb)]&&(this[_0x1b3aac(0x247)]=setInterval(()=>{automation['checkCalendarTriggers'](this);},0x2*0x3c*0x3e8),setTimeout(()=>automation[_0x1b3aac(0x233)](this),0x3a98));if(this['presenceCheckTimer'])clearInterval(this[_0x1b3aac(0x32a)]);this[_0x1b3aac(0x306)]['presenceDevices']&&this['config'][_0x1b3aac(0x288)][_0x1b3aac(0x283)]>0x0&&(this['presenceCheckTimer']=setInterval(async()=>{const _0x316f5d=_0x1b3aac;await this[_0x316f5d(0x1f3)]();},0x3c*0x3e8),setTimeout(async()=>await this[_0x1b3aac(0x1f3)](),0x1388));const _0x103f19=path[_0x1b3aac(0x316)](__dirname,_0x1b3aac(0x230),_0x1b3aac(0x2fe),_0x1b3aac(0x2f6));pythonBridge[_0x1b3aac(0x2ab)](this,_0x103f19);}[a0_0x2f5064(0x257)](_0xe9cba1){const _0x2a8ed2=a0_0x2f5064;if(this[_0x2a8ed2(0x2bf)])this[_0x2a8ed2(0x2bf)]['cancel']();this['saveDailyHistory']()[_0x2a8ed2(0x279)](()=>{const _0xb7cae0=_0x2a8ed2;if(this[_0xb7cae0(0x20a)])clearInterval(this[_0xb7cae0(0x20a)]);if(this[_0xb7cae0(0x247)])clearInterval(this[_0xb7cae0(0x247)]);if(this[_0xb7cae0(0x32a)])clearInterval(this[_0xb7cae0(0x32a)]);if(this['roomIntegratorTimer'])clearInterval(this[_0xb7cae0(0x217)]);recorder['abortExitTimer'](this),pythonBridge[_0xb7cae0(0x21f)](this),_0xe9cba1();});}async[a0_0x2f5064(0x256)](){const _0x505a04=a0_0x2f5064;if(!this['eventHistory']||this['eventHistory'][_0x505a04(0x283)]===0x0){this['log'][_0x505a04(0x1ba)](_0x505a04(0x31a));return;}this[_0x505a04(0x29d)][_0x505a04(0x27b)](_0x505a04(0x274)+this[_0x505a04(0x1d5)][_0x505a04(0x283)]+_0x505a04(0x210));const _0x14fc24=new Date()[_0x505a04(0x249)](0x0,0x0,0x0,0x0),_0x3316fa=_0x505a04(0x1e1);let _0x58c67c={'history':{},'date':new Date()['toLocaleDateString']()};const _0x1ea151=_0x505a04(0x2ec),_0x980952=_0x505a04(0x1ac);let _0x4a4c83=new Array(0x30)[_0x505a04(0x239)](0x0),_0x436988=Array['from']({'length':0x30},()=>[]);this[_0x505a04(0x1d5)][_0x505a04(0x32f)](_0x507300=>{const _0x1b1f14=_0x505a04;if(_0x507300[_0x1b1f14(0x1e5)]>=_0x14fc24){if(recorder[_0x1b1f14(0x2e7)](_0x507300['type'],_0x507300['value'])){const _0x26e3bb=new Date(_0x507300[_0x1b1f14(0x1e5)]),_0x73b5b9=_0x26e3bb[_0x1b1f14(0x258)]()*0x2+(_0x26e3bb['getMinutes']()>=0x1e?0x1:0x0);if(_0x73b5b9<0x30){_0x4a4c83[_0x73b5b9]++;const _0x5b4460=_0x507300[_0x1b1f14(0x2f9)]||_0x507300['name']||'?';let _0x3873f9=_0x436988[_0x73b5b9];!_0x3873f9['includes'](_0x5b4460)&&_0x3873f9[_0x1b1f14(0x2b2)](_0x5b4460);}const _0x41275d=_0x26e3bb[_0x1b1f14(0x258)]();let _0x14e99e=_0x507300[_0x1b1f14(0x2f9)]||_0x1b1f14(0x1cd);const _0x28f082=(this[_0x1b1f14(0x306)][_0x1b1f14(0x25b)]||[])[_0x1b1f14(0x2b5)](_0x1f6dd3=>_0x1f6dd3[_0x1b1f14(0x2f9)]===_0x14e99e);if(_0x28f082)_0x14e99e=_0x28f082[_0x1b1f14(0x2f9)];if(!_0x58c67c['history'][_0x14e99e])_0x58c67c[_0x1b1f14(0x260)][_0x14e99e]=new Array(0x18)[_0x1b1f14(0x239)](0x0);if(_0x58c67c[_0x1b1f14(0x260)][_0x14e99e][_0x41275d]<0x3c)_0x58c67c[_0x1b1f14(0x260)][_0x14e99e][_0x41275d]++;}}});const _0x4caafa=await this[_0x505a04(0x292)](_0x3316fa);(!_0x4caafa||!_0x4caafa[_0x505a04(0x248)]||_0x4caafa[_0x505a04(0x248)]==='{}'||_0x4caafa[_0x505a04(0x248)]['includes'](_0x505a04(0x2b8)))&&await this[_0x505a04(0x1ec)](_0x3316fa,{'val':JSON[_0x505a04(0x2d0)](_0x58c67c),'ack':!![]}),await this[_0x505a04(0x1ec)](_0x1ea151,{'val':JSON['stringify'](_0x4a4c83),'ack':!![]}),await this['setStateAsync'](_0x980952,{'val':JSON['stringify'](_0x436988),'ack':!![]}),this['log'][_0x505a04(0x27b)](_0x505a04(0x324));}async['saveDailyHistory'](){const _0x239c8f=a0_0x2f5064;if(!this[_0x239c8f(0x1ef)][_0x239c8f(0x1c5)])return;const _0x41cfd0=new Date()['toISOString']()[_0x239c8f(0x241)]('T')[0x0];this[_0x239c8f(0x29d)][_0x239c8f(0x1b8)](_0x239c8f(0x1e7)+_0x41cfd0+_0x239c8f(0x2f0));try{const [_0x5e07d6,_0x34a83b,_0x317bcb,_0x410811,_0x1d430e,_0x2bbfd6,_0x2baeb2]=await Promise[_0x239c8f(0x2f2)]([this['getStateAsync']('analysis.activity.roomHistory'),this[_0x239c8f(0x292)](_0x239c8f(0x32d)),this[_0x239c8f(0x292)](_0x239c8f(0x23b)),this[_0x239c8f(0x292)](_0x239c8f(0x1e6)),this[_0x239c8f(0x292)](_0x239c8f(0x2ec)),this[_0x239c8f(0x292)]('analysis.health.activityTrend'),this[_0x239c8f(0x292)](_0x239c8f(0x2a2))]),_0x2fe5b6=new Date()[_0x239c8f(0x249)](0x0,0x0,0x0,0x0),_0x31046f=this[_0x239c8f(0x1d5)][_0x239c8f(0x1c4)](_0x57179a=>_0x57179a[_0x239c8f(0x1e5)]>=_0x2fe5b6&&(_0x57179a[_0x239c8f(0x2ca)][_0x239c8f(0x32e)]()[_0x239c8f(0x214)](_0x239c8f(0x312))||_0x57179a[_0x239c8f(0x2ca)]['toLowerCase']()['includes']('terrasse'))&&(_0x57179a['value']===!![]||_0x57179a['value']===_0x239c8f(0x276)))[_0x239c8f(0x283)];let _0x1c300e=0x55;if(_0x2bbfd6&&_0x2bbfd6[_0x239c8f(0x248)]!==undefined)_0x1c300e=Math[_0x239c8f(0x2d5)](0x64,Math['max'](0x14,Math['round'](0x50+Number(_0x2bbfd6[_0x239c8f(0x248)])*0x5)));const _0x1e2676=this[_0x239c8f(0x1d5)][_0x239c8f(0x1c4)](_0x318c3e=>_0x318c3e['timestamp']>=_0x2fe5b6),_0x52f0c0={'date':_0x41cfd0,'timestamp':Date[_0x239c8f(0x22e)](),'roomHistory':_0x5e07d6?.[_0x239c8f(0x248)]?JSON['parse'](_0x5e07d6['val']):{},'geminiNight':_0x34a83b?.[_0x239c8f(0x248)]||_0x239c8f(0x314),'geminiDay':_0x317bcb?.['val']||_0x239c8f(0x314),'anomalyScore':_0x410811?.['val']||0.1,'todayVector':_0x1d430e?.['val']?JSON[_0x239c8f(0x2ef)](_0x1d430e[_0x239c8f(0x248)]):new Array(0x30)['fill'](0x0),'batteryLevel':_0x1c300e,'freshAirCount':_0x31046f,'gaitSpeed':_0x2baeb2?.[_0x239c8f(0x248)]!==undefined&&_0x2baeb2?.['val']!==null?Number(_0x2baeb2[_0x239c8f(0x248)]):null,'eventHistory':_0x1e2676},_0x53898e=utils[_0x239c8f(0x2d6)](),_0x26189d=path[_0x239c8f(0x316)](_0x53898e,'cogni-living',_0x239c8f(0x260));if(!fs[_0x239c8f(0x223)](_0x26189d))fs[_0x239c8f(0x1ea)](_0x26189d,{'recursive':!![]});const _0x3f71d1=path[_0x239c8f(0x316)](_0x26189d,_0x41cfd0+_0x239c8f(0x1be));fs[_0x239c8f(0x1fa)](_0x3f71d1,JSON['stringify'](_0x52f0c0)),this[_0x239c8f(0x29d)][_0x239c8f(0x27b)](_0x239c8f(0x1b7)+_0x3f71d1);}catch(_0x15bcb5){this['log'][_0x239c8f(0x1f2)](_0x239c8f(0x305)+_0x15bcb5[_0x239c8f(0x1f8)]);}}async['integrateRoomTime'](){const _0x1c299e=a0_0x2f5064;if(!this[_0x1c299e(0x27a)])return;try{let _0x2fb988=null;try{const _0x155479=await this['getStateAsync']('analysis.prediction.trackerTopRoom'),_0x200443=await this[_0x1c299e(0x292)](_0x1c299e(0x2bb));if(_0x155479&&_0x155479[_0x1c299e(0x248)]&&_0x200443&&_0x200443['val']&&_0x200443['val']>0.3){if(_0x155479[_0x1c299e(0x248)]!==_0x1c299e(0x1cd)&&_0x155479['val']!=='Init...')_0x2fb988=_0x155479['val'];}}catch(_0x549208){}if(!_0x2fb988){const _0x1756fc=this[_0x1c299e(0x306)]['devices']||[];for(const _0x4338fc of _0x1756fc){if(_0x4338fc[_0x1c299e(0x2ba)]===_0x1c299e(0x326)&&_0x4338fc[_0x1c299e(0x2f9)])try{const _0x41b7af=await this['getForeignStateAsync'](_0x4338fc['id']);if(_0x41b7af&&(_0x41b7af[_0x1c299e(0x248)]===!![]||_0x41b7af[_0x1c299e(0x248)]==='on'||_0x41b7af['val']===0x1)){_0x2fb988=_0x4338fc[_0x1c299e(0x2f9)];break;}}catch(_0x13acf6){}}}if(!_0x2fb988)return;const _0x3c6902=this[_0x1c299e(0x306)]['devices']||[];let _0x9a6e59=_0x2fb988;const _0x1304f9=_0x3c6902[_0x1c299e(0x2b5)](_0x52b407=>_0x52b407[_0x1c299e(0x2f9)]&&_0x52b407[_0x1c299e(0x2f9)][_0x1c299e(0x32e)]()===_0x2fb988[_0x1c299e(0x32e)]());if(_0x1304f9)_0x9a6e59=_0x1304f9[_0x1c299e(0x2f9)];const _0x59696a=_0x1c299e(0x1e1),_0x531ba5=await this[_0x1c299e(0x292)](_0x59696a),_0xa20edf=new Date()['toLocaleDateString']();let _0x373535={'history':{},'date':_0xa20edf};if(_0x531ba5&&_0x531ba5['val'])try{_0x373535=JSON[_0x1c299e(0x2ef)](_0x531ba5[_0x1c299e(0x248)]);}catch(_0x354cdb){}_0x373535[_0x1c299e(0x2e6)]!==_0xa20edf&&(_0x373535[_0x1c299e(0x260)]={},_0x373535[_0x1c299e(0x2e6)]=_0xa20edf);if(!_0x373535['history'][_0x9a6e59])_0x373535['history'][_0x9a6e59]=new Array(0x18)[_0x1c299e(0x239)](0x0);const _0x4025a5=new Date()['getHours']();if(_0x373535[_0x1c299e(0x260)][_0x9a6e59][_0x4025a5]<0x3c)_0x373535[_0x1c299e(0x260)][_0x9a6e59][_0x4025a5]++;await this['setStateAsync'](_0x59696a,{'val':JSON[_0x1c299e(0x2d0)](_0x373535),'ack':!![]});}catch(_0x2a8678){this['log'][_0x1c299e(0x1ba)](_0x1c299e(0x2b6)+_0x2a8678['message']);}}async[a0_0x2f5064(0x2d7)](_0x19ad79){const _0x4c9825=a0_0x2f5064;if(typeof _0x19ad79===_0x4c9825(0x22b)&&_0x19ad79[_0x4c9825(0x1f8)]){if(_0x19ad79[_0x4c9825(0x321)]===_0x4c9825(0x331)){const _0x4a84d3=_0x19ad79[_0x4c9825(0x1f8)]['date'],_0x3d9e07=utils[_0x4c9825(0x2d6)](),_0x4fe210=path[_0x4c9825(0x316)](_0x3d9e07,_0x4c9825(0x2cb),'history',_0x4a84d3+_0x4c9825(0x1be));if(fs[_0x4c9825(0x223)](_0x4fe210))try{const _0x2744d6=JSON[_0x4c9825(0x2ef)](fs[_0x4c9825(0x252)](_0x4fe210,'utf8'));this[_0x4c9825(0x1f7)](_0x19ad79[_0x4c9825(0x204)],_0x19ad79[_0x4c9825(0x321)],{'success':!![],'data':_0x2744d6},_0x19ad79[_0x4c9825(0x2cd)]);}catch(_0x4e54e4){this[_0x4c9825(0x1f7)](_0x19ad79[_0x4c9825(0x204)],_0x19ad79[_0x4c9825(0x321)],{'success':![],'error':_0x4c9825(0x2f5)},_0x19ad79[_0x4c9825(0x2cd)]);}else this[_0x4c9825(0x1f7)](_0x19ad79[_0x4c9825(0x204)],_0x19ad79[_0x4c9825(0x321)],{'success':![],'error':_0x4c9825(0x25a)},_0x19ad79[_0x4c9825(0x2cd)]);}else{if(_0x19ad79[_0x4c9825(0x321)]==='getOverviewData'){const _0x58fda5=this[_0x4c9825(0x2c1)][_0x4c9825(0x283)];let _0x380ce5=new Array(0x30)[_0x4c9825(0x239)](0x0),_0x8e3a65=Array[_0x4c9825(0x204)]({'length':0x30},()=>[]);try{const _0x4d801d=await this[_0x4c9825(0x292)](_0x4c9825(0x2ec));if(_0x4d801d&&_0x4d801d['val'])_0x380ce5=JSON[_0x4c9825(0x2ef)](_0x4d801d[_0x4c9825(0x248)]);const _0x100ae0=await this['getStateAsync'](_0x4c9825(0x1ac));if(_0x100ae0&&_0x100ae0[_0x4c9825(0x248)])_0x8e3a65=JSON['parse'](_0x100ae0[_0x4c9825(0x248)]);}catch(_0x2cd738){}let _0x7ea2f0=new Array(0x30)[_0x4c9825(0x239)](0x0);try{const _0x7121c2=new Date();_0x7121c2[_0x4c9825(0x2aa)](_0x7121c2[_0x4c9825(0x24c)]()-0x1);const _0x4e5038=_0x7121c2[_0x4c9825(0x2bc)]()[_0x4c9825(0x241)]('T')[0x0],_0x5a9940=utils[_0x4c9825(0x2d6)](),_0x41af32=path['join'](_0x5a9940,'cogni-living',_0x4c9825(0x260),_0x4e5038+_0x4c9825(0x1be));if(fs[_0x4c9825(0x223)](_0x41af32)){const _0x5f3e3e=JSON[_0x4c9825(0x2ef)](fs[_0x4c9825(0x252)](_0x41af32,_0x4c9825(0x2fc)));if(_0x5f3e3e&&_0x5f3e3e[_0x4c9825(0x295)])_0x7ea2f0=_0x5f3e3e['todayVector'];}}catch(_0x144833){}let _0x52cace={'today':{},'yesterday':{}};try{const _0x11de1c=await this[_0x4c9825(0x292)](_0x4c9825(0x23c));if(_0x11de1c&&_0x11de1c[_0x4c9825(0x248)])_0x52cace=JSON[_0x4c9825(0x2ef)](_0x11de1c[_0x4c9825(0x248)]);}catch(_0x528983){}let _0x3230a5=null;try{const _0x1a3bf3=await this[_0x4c9825(0x292)]('analysis.health.activityTrend');if(_0x1a3bf3)_0x3230a5=_0x1a3bf3[_0x4c9825(0x248)];}catch(_0x4100ef){}if(_0x3230a5===undefined||_0x3230a5===null){const _0x49aa91=_0x380ce5['reduce']((_0x3ace28,_0x2e3ea5)=>_0x3ace28+_0x2e3ea5,0x0),_0x14a43e=Math[_0x4c9825(0x2d5)](0x2,Math[_0x4c9825(0x250)](-0x2,(0x64-_0x49aa91)/0x32));_0x3230a5=_0x14a43e;}let _0xf07243=![],_0x17c4bc='',_0x3b2b42='',_0xc2dff1='';try{const _0x4e0e47=await this['getStateAsync']('analysis.automation.patternDetected');if(_0x4e0e47&&_0x4e0e47['val']){_0xf07243=!![];const _0x4242c7=await this[_0x4c9825(0x292)](_0x4c9825(0x253));_0x17c4bc=_0x4242c7?_0x4242c7[_0x4c9825(0x248)]:'';const _0x3ab6ff=await this[_0x4c9825(0x292)](_0x4c9825(0x2cf));_0x3b2b42=_0x3ab6ff?_0x3ab6ff[_0x4c9825(0x248)]:'';const _0x41b3a8=await this[_0x4c9825(0x292)](_0x4c9825(0x1f4));_0xc2dff1=_0x41b3a8?_0x41b3a8[_0x4c9825(0x248)]:'';}}catch(_0xdc3fd4){}const _0x554d34=await this[_0x4c9825(0x2ac)](),_0x7fb86e=(this[_0x4c9825(0x306)][_0x4c9825(0x25b)]||[])[_0x4c9825(0x2e4)](_0x59bd68=>_0x59bd68['isSolar']),_0x3aad88=_0x554d34&&_0x7fb86e;let _0x3d8986='';try{const _0x4d9c8d=await this[_0x4c9825(0x292)](_0x4c9825(0x240));if(_0x4d9c8d&&_0x4d9c8d[_0x4c9825(0x248)])_0x3d8986=_0x4d9c8d[_0x4c9825(0x248)];}catch(_0x27a4b4){}this['sendTo'](_0x19ad79[_0x4c9825(0x204)],_0x19ad79[_0x4c9825(0x321)],{'success':!![],'eventHistory':this[_0x4c9825(0x1d5)][_0x4c9825(0x24d)](0x0,0x7d0),'stats':{'digestCount':_0x58fda5,'isPresent':this[_0x4c9825(0x27a)],'hourlyActivity':_0x380ce5,'hourlyDetails':_0x8e3a65,'yesterdayActivity':_0x7ea2f0,'solarActive':_0x3aad88,'presenceWho':_0x3d8986,'roomStats':_0x52cace,'activityTrend':_0x3230a5,'modules':this[_0x4c9825(0x1ef)]},'automation':{'detected':_0xf07243,'description':_0x17c4bc,'targetId':_0x3b2b42,'targetValue':_0xc2dff1}},_0x19ad79[_0x4c9825(0x2cd)]);}else{if(_0x19ad79[_0x4c9825(0x321)]===_0x4c9825(0x2a3))try{const _0x2a7ee3=await automation[_0x4c9825(0x1bc)](this);this[_0x4c9825(0x1f7)](_0x19ad79[_0x4c9825(0x204)],_0x19ad79['command'],{'success':!![],'results':_0x2a7ee3},_0x19ad79[_0x4c9825(0x2cd)]);}catch(_0x4d86c9){this['sendTo'](_0x19ad79[_0x4c9825(0x204)],_0x19ad79['command'],{'success':![],'error':_0x4d86c9[_0x4c9825(0x1f8)]},_0x19ad79[_0x4c9825(0x2cd)]);}else{if(_0x19ad79[_0x4c9825(0x321)]===_0x4c9825(0x1bd))try{const _0x554895=await scanner['scanForDevices'](this,_0x19ad79['message']||{});this['sendTo'](_0x19ad79[_0x4c9825(0x204)],_0x19ad79[_0x4c9825(0x321)],{'success':!![],'devices':_0x554895},_0x19ad79[_0x4c9825(0x2cd)]);}catch(_0x1046d8){}else{if(_0x19ad79[_0x4c9825(0x321)]===_0x4c9825(0x1b5)){const _0x11d3b2=await this[_0x4c9825(0x1e9)](_0x4c9825(0x1d0),_0x4c9825(0x2c3)),_0x3a6d47=[];if(_0x11d3b2)for(const _0x364c47 in _0x11d3b2){let _0x29dc94=_0x11d3b2[_0x364c47][_0x4c9825(0x1da)][_0x4c9825(0x2ca)];if(_0x29dc94&&typeof _0x29dc94===_0x4c9825(0x22b))_0x29dc94=_0x29dc94['de']||_0x29dc94['en']||Object['values'](_0x29dc94)[0x0]||JSON[_0x4c9825(0x2d0)](_0x29dc94);_0x3a6d47[_0x4c9825(0x2b2)]({'id':_0x364c47,'name':String(_0x29dc94||_0x364c47)});}const _0x24a513=await this[_0x4c9825(0x1e9)]('enum.rooms.*',_0x4c9825(0x2c3)),_0x15e9d0=[];if(_0x24a513)for(const _0x423f3c in _0x24a513){let _0x5d574d=_0x24a513[_0x423f3c][_0x4c9825(0x1da)][_0x4c9825(0x2ca)];if(_0x5d574d&&typeof _0x5d574d==='object')_0x5d574d=_0x5d574d['de']||_0x5d574d['en']||Object[_0x4c9825(0x1e0)](_0x5d574d)[0x0]||JSON[_0x4c9825(0x2d0)](_0x5d574d);_0x15e9d0[_0x4c9825(0x2b2)](String(_0x5d574d||_0x423f3c[_0x4c9825(0x241)]('.')[_0x4c9825(0x2d8)]()));}this[_0x4c9825(0x1f7)](_0x19ad79[_0x4c9825(0x204)],_0x19ad79[_0x4c9825(0x321)],{'success':!![],'enums':_0x3a6d47,'rooms':_0x15e9d0},_0x19ad79['callback']);}else{if(_0x19ad79[_0x4c9825(0x321)]===_0x4c9825(0x246))try{const _0x56ca95=await this['getObjectViewAsync'](_0x4c9825(0x205),'instance',{'startkey':_0x4c9825(0x235),'endkey':_0x4c9825(0x21c)}),_0x1bbcf3=new Set();if(_0x56ca95&&_0x56ca95['rows'])for(const _0x260200 of _0x56ca95[_0x4c9825(0x285)]){const _0x281afc=_0x260200['id']['replace'](_0x4c9825(0x24b),''),_0x34671a=await this[_0x4c9825(0x1cc)](_0x281afc+_0x4c9825(0x290));let _0x1b3625=![];if(_0x34671a&&_0x34671a['val']){const _0x12eae0=typeof _0x34671a['val']==='string'?JSON['parse'](_0x34671a[_0x4c9825(0x248)]):_0x34671a[_0x4c9825(0x248)];Array[_0x4c9825(0x22f)](_0x12eae0)&&_0x12eae0[_0x4c9825(0x32f)](_0x52d37f=>{const _0x1916c1=_0x4c9825;_0x52d37f[_0x1916c1(0x21a)]&&(_0x1bbcf3[_0x1916c1(0x201)](_0x52d37f['calendarName']),_0x1b3625=!![]);});}!_0x1b3625&&_0x1bbcf3[_0x4c9825(0x201)](_0x281afc);}const _0x577a80=Array[_0x4c9825(0x204)](_0x1bbcf3);if(_0x577a80[_0x4c9825(0x283)]===0x0)_0x577a80[_0x4c9825(0x2b2)](_0x4c9825(0x2a9));this['sendTo'](_0x19ad79[_0x4c9825(0x204)],_0x19ad79['command'],{'success':!![],'names':_0x577a80},_0x19ad79['callback']);}catch(_0x5228ed){this[_0x4c9825(0x1f7)](_0x19ad79[_0x4c9825(0x204)],_0x19ad79[_0x4c9825(0x321)],{'success':![],'error':'Scan\x20Error:\x20'+_0x5228ed[_0x4c9825(0x1f8)]},_0x19ad79[_0x4c9825(0x2cd)]);}else{if(_0x19ad79['command']===_0x4c9825(0x1d3))try{await automation['updateSchedulePreview'](this),this['sendTo'](_0x19ad79['from'],_0x19ad79[_0x4c9825(0x321)],{'success':!![]},_0x19ad79['callback']);}catch(_0xa99b3){this[_0x4c9825(0x29d)][_0x4c9825(0x1ba)](_0x4c9825(0x2ce)+_0xa99b3[_0x4c9825(0x1f8)]),this['sendTo'](_0x19ad79[_0x4c9825(0x204)],_0x19ad79['command'],{'success':![],'error':_0xa99b3[_0x4c9825(0x1f8)]},_0x19ad79[_0x4c9825(0x2cd)]);}else{if(_0x19ad79[_0x4c9825(0x321)]===_0x4c9825(0x25f))try{const _0x4adf8e=_0x19ad79[_0x4c9825(0x1f8)]['matrix'];if(!_0x4adf8e||!Array[_0x4c9825(0x22f)](_0x4adf8e))throw new Error(_0x4c9825(0x2a7));const _0xafb469=await this[_0x4c9825(0x292)](_0x4c9825(0x1c9));if(_0xafb469&&_0xafb469[_0x4c9825(0x248)]){const _0x330e07=JSON[_0x4c9825(0x2ef)](_0xafb469[_0x4c9825(0x248)]);_0x330e07['matrix']=_0x4adf8e,_0x330e07[_0x4c9825(0x28d)]=Date[_0x4c9825(0x22e)](),await this[_0x4c9825(0x1ec)](_0x4c9825(0x1c9),{'val':JSON[_0x4c9825(0x2d0)](_0x330e07),'ack':!![]}),this[_0x4c9825(0x29d)][_0x4c9825(0x1b8)](_0x4c9825(0x2eb)),this['sendTo'](_0x19ad79[_0x4c9825(0x204)],_0x19ad79[_0x4c9825(0x321)],{'success':!![]},_0x19ad79[_0x4c9825(0x2cd)]);}else throw new Error(_0x4c9825(0x229));}catch(_0x5ee39c){this[_0x4c9825(0x29d)][_0x4c9825(0x1ba)](_0x4c9825(0x1b2)+_0x5ee39c[_0x4c9825(0x1f8)]),this[_0x4c9825(0x1f7)](_0x19ad79[_0x4c9825(0x204)],_0x19ad79[_0x4c9825(0x321)],{'success':![],'error':_0x5ee39c[_0x4c9825(0x1f8)]},_0x19ad79['callback']);}else{if(_0x19ad79['command']===_0x4c9825(0x1fe))try{const _0x1bb7b8=_0x19ad79[_0x4c9825(0x1f8)][_0x4c9825(0x321)],_0x1486b2=_0x19ad79['message'];this['log'][_0x4c9825(0x1b8)](_0x4c9825(0x243)+_0x1bb7b8),pythonBridge[_0x4c9825(0x1c6)](this,_0x1bb7b8,_0x1486b2,_0x233762=>{const _0x416259=_0x4c9825;this[_0x416259(0x1f7)](_0x19ad79[_0x416259(0x204)],_0x19ad79['command'],_0x233762,_0x19ad79[_0x416259(0x2cd)]);});}catch(_0x37eb3b){this['log']['warn'](_0x4c9825(0x2f4)+_0x37eb3b[_0x4c9825(0x1f8)]),this[_0x4c9825(0x1f7)](_0x19ad79[_0x4c9825(0x204)],_0x19ad79['command'],{'type':_0x4c9825(0x2dc),'payload':_0x37eb3b[_0x4c9825(0x1f8)]},_0x19ad79[_0x4c9825(0x2cd)]);}else{if(_0x19ad79[_0x4c9825(0x321)]==='testApiKey')try{const _0x9938e=_0x19ad79['message']?_0x19ad79[_0x4c9825(0x1f8)][_0x4c9825(0x221)]:'';if(!_0x9938e)throw new Error(_0x4c9825(0x2f3));const _0x388662=new GoogleGenerativeAI(_0x9938e),_0x2177af=_0x388662[_0x4c9825(0x28b)]({'model':GEMINI_MODEL}),_0x3137fb=await _0x2177af[_0x4c9825(0x1e8)](_0x4c9825(0x307)),_0x51d556=await _0x3137fb[_0x4c9825(0x1f9)],_0x3687f7=_0x51d556['text']();this[_0x4c9825(0x1f7)](_0x19ad79[_0x4c9825(0x204)],_0x19ad79[_0x4c9825(0x321)],{'success':!![],'message':_0x4c9825(0x1e4)+_0x3687f7[_0x4c9825(0x203)](0x0,0x14)+_0x4c9825(0x2f0)},_0x19ad79[_0x4c9825(0x2cd)]);}catch(_0x140e18){this[_0x4c9825(0x1f7)](_0x19ad79[_0x4c9825(0x204)],_0x19ad79['command'],{'success':![],'message':_0x140e18[_0x4c9825(0x1f8)]},_0x19ad79[_0x4c9825(0x2cd)]);}else{if(_0x19ad79[_0x4c9825(0x321)]===_0x4c9825(0x2e8))try{const _0x1d81a1=await this['checkSolarCondition'](),_0xcd498d=await this['getObjectViewAsync'](_0x4c9825(0x205),'instance',{'startkey':_0x4c9825(0x235),'endkey':_0x4c9825(0x21c)}),_0x5e2c6e=_0xcd498d&&_0xcd498d['rows']?_0xcd498d['rows']['length']:0x0;this[_0x4c9825(0x1f7)](_0x19ad79['from'],_0x19ad79['command'],{'success':!![],'weather':_0x4c9825(0x291)+_0x1d81a1+_0x4c9825(0x2d1)+(this[_0x4c9825(0x298)][this[_0x4c9825(0x306)][_0x4c9825(0x29c)]]||'?')+'¬∞C','calendar':_0x5e2c6e+_0x4c9825(0x1f6)},_0x19ad79[_0x4c9825(0x2cd)]);}catch(_0x552977){this['sendTo'](_0x19ad79[_0x4c9825(0x204)],_0x19ad79['command'],{'success':![]},_0x19ad79[_0x4c9825(0x2cd)]);}}}}}}}}}}}}}[a0_0x2f5064(0x2f7)](){const _0x1abb4f=a0_0x2f5064;if(!this['activeModules'][_0x1abb4f(0x1c5)])return;this[_0x1abb4f(0x29d)][_0x1abb4f(0x1b8)](_0x1abb4f(0x262));try{const _0x21e118=this[_0x1abb4f(0x212)]||[];pythonBridge[_0x1abb4f(0x1c6)](this,_0x1abb4f(0x300),{'events':_0x21e118});}catch(_0xa2d4e7){this[_0x1abb4f(0x29d)][_0x1abb4f(0x1ba)](_0x1abb4f(0x1dc));}}async[a0_0x2f5064(0x225)](_0xf4a9b7,_0x1cfee7){const _0x1c37b3=a0_0x2f5064;if(!_0x1cfee7||this[_0x1c37b3(0x24e)])return;if(_0xf4a9b7[_0x1c37b3(0x214)]('telegram')&&_0xf4a9b7[_0x1c37b3(0x2d3)](_0x1c37b3(0x1ee))&&_0x1cfee7[_0x1c37b3(0x248)])return;if(this[_0x1c37b3(0x306)][_0x1c37b3(0x228)]&&_0xf4a9b7===this[_0x1c37b3(0x306)][_0x1c37b3(0x2af)]&&this[_0x1c37b3(0x1ef)][_0x1c37b3(0x209)]){this[_0x1c37b3(0x271)](_0x1cfee7[_0x1c37b3(0x248)]);return;}if(_0x1cfee7[_0x1c37b3(0x2a6)]&&_0xf4a9b7[_0x1c37b3(0x2d3)](_0x1c37b3(0x219)))return;if(_0xf4a9b7===this[_0x1c37b3(0x237)]+_0x1c37b3(0x1b9)){if(_0x1cfee7[_0x1c37b3(0x248)]&&Object[_0x1c37b3(0x1e0)](setup[_0x1c37b3(0x297)])[_0x1c37b3(0x214)](_0x1cfee7[_0x1c37b3(0x248)])){this['currentSystemMode']=_0x1cfee7[_0x1c37b3(0x248)];if(_0x1cfee7[_0x1c37b3(0x248)]===setup[_0x1c37b3(0x297)][_0x1c37b3(0x263)])await recorder[_0x1c37b3(0x317)](this,![]);else await recorder[_0x1c37b3(0x317)](this,!![]);if(this[_0x1c37b3(0x31f)]){let _0x12dbcb=![],_0x1bfa32=0x0,_0x4dc450=_0x1c37b3(0x299);if(this[_0x1c37b3(0x206)]===_0x1c37b3(0x2c9))_0x12dbcb=!![],_0x1bfa32=0x168,_0x4dc450=_0x1c37b3(0x27e);else this[_0x1c37b3(0x206)]==='guest'&&(_0x12dbcb=!![],_0x1bfa32=0x5a0,_0x4dc450=_0x1c37b3(0x1fd));pythonBridge[_0x1c37b3(0x1c6)](this,_0x1c37b3(0x31b),{'active':_0x12dbcb,'duration':_0x1bfa32,'label':_0x4dc450}),await this[_0x1c37b3(0x1ec)](_0x1c37b3(0x224),{'val':JSON['stringify']({'active':_0x12dbcb,'label':_0x4dc450,'timestamp':Date[_0x1c37b3(0x22e)]()}),'ack':!![]});}}if(!_0x1cfee7[_0x1c37b3(0x2a6)])this[_0x1c37b3(0x1d8)](_0xf4a9b7,{'val':this[_0x1c37b3(0x206)],'ack':!![]});return;}if(_0xf4a9b7[_0x1c37b3(0x2d3)]('analysis.energy.warmupSources')&&_0x1cfee7[_0x1c37b3(0x2a6)])this['protectAiMemory'](_0x1cfee7[_0x1c37b3(0x248)]);if(_0xf4a9b7[_0x1c37b3(0x2d3)]('analysis.energy.warmupTimes')&&_0x1cfee7[_0x1c37b3(0x2a6)]&&this['activeModules']['energy'])automation[_0x1c37b3(0x233)](this);if(!_0x1cfee7[_0x1c37b3(0x2a6)]){if(_0xf4a9b7[_0x1c37b3(0x214)]('analysis.trigger')&&_0x1cfee7[_0x1c37b3(0x248)]){this[_0x1c37b3(0x1d8)](_0xf4a9b7,{'val':![],'ack':!![]}),aiAgent[_0x1c37b3(0x213)](this);return;}if(_0xf4a9b7[_0x1c37b3(0x214)](_0x1c37b3(0x220))&&_0x1cfee7[_0x1c37b3(0x248)]){this[_0x1c37b3(0x1d8)](_0xf4a9b7,{'val':![],'ack':!![]});if(this[_0x1c37b3(0x31f)])aiAgent[_0x1c37b3(0x2e9)](this,pythonBridge);return;}if(_0xf4a9b7[_0x1c37b3(0x214)](_0x1c37b3(0x30d))&&_0x1cfee7[_0x1c37b3(0x248)]){this['setState'](_0xf4a9b7,{'val':![],'ack':!![]}),aiAgent[_0x1c37b3(0x1eb)](this);return;}if(_0xf4a9b7[_0x1c37b3(0x214)](_0x1c37b3(0x1fb))&&_0x1cfee7[_0x1c37b3(0x248)]){this[_0x1c37b3(0x1d8)](_0xf4a9b7,{'val':![],'ack':!![]}),aiAgent[_0x1c37b3(0x281)](this);return;}if(_0xf4a9b7[_0x1c37b3(0x214)]('analysis.training.triggerSecurity')&&_0x1cfee7[_0x1c37b3(0x248)]){this[_0x1c37b3(0x1d8)](_0xf4a9b7,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x3f95ca=await this[_0x1c37b3(0x292)]('LTM.trainingData.sequences');if(_0x3f95ca&&_0x3f95ca[_0x1c37b3(0x248)]){const _0x25bfef=JSON[_0x1c37b3(0x2ef)](_0x3f95ca[_0x1c37b3(0x248)]);this[_0x1c37b3(0x1ec)](_0x1c37b3(0x1ff),{'val':_0x1c37b3(0x20e),'ack':!![]}),pythonBridge[_0x1c37b3(0x1c6)](this,_0x1c37b3(0x234),{'sequences':_0x25bfef});}}catch(_0x60157c){}return;}if(_0xf4a9b7['includes'](_0x1c37b3(0x2be))&&_0x1cfee7['val']){this[_0x1c37b3(0x1d8)](_0xf4a9b7,{'val':![],'ack':!![]});try{aiAgent['generateHealthReport'](this,_0x1c37b3(0x32b)),setTimeout(()=>aiAgent[_0x1c37b3(0x28f)](this,_0x1c37b3(0x1f0)),0x2ee0);if(this['isProVersion']){this[_0x1c37b3(0x2f7)]();const _0x1f0b26=await this['getStateAsync']('LTM.dailyDigests');if(_0x1f0b26&&_0x1f0b26[_0x1c37b3(0x248)])pythonBridge['send'](this,_0x1c37b3(0x304),{'digests':JSON[_0x1c37b3(0x2ef)](_0x1f0b26[_0x1c37b3(0x248)])});}}catch(_0x16ff4d){this[_0x1c37b3(0x29d)]['warn'](_0x1c37b3(0x2fd)+_0x16ff4d[_0x1c37b3(0x1f8)]);}return;}if(_0xf4a9b7[_0x1c37b3(0x214)](_0x1c37b3(0x284))&&_0x1cfee7[_0x1c37b3(0x248)]){this[_0x1c37b3(0x1d8)](_0xf4a9b7,{'val':![],'ack':!![]}),await this[_0x1c37b3(0x21b)]();return;}if(_0xf4a9b7[_0x1c37b3(0x214)](_0x1c37b3(0x207))&&_0x1cfee7[_0x1c37b3(0x248)]){this[_0x1c37b3(0x1d8)](_0xf4a9b7,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x19e370=await this[_0x1c37b3(0x292)](_0x1c37b3(0x1df));if(_0x19e370&&_0x19e370[_0x1c37b3(0x248)]){const _0x5236f1={};if(this[_0x1c37b3(0x306)][_0x1c37b3(0x25b)])this[_0x1c37b3(0x306)][_0x1c37b3(0x25b)][_0x1c37b3(0x32f)](_0x2cecbe=>{const _0x3b665f=_0x1c37b3;if(_0x2cecbe['id']&&_0x2cecbe[_0x3b665f(0x2ba)])_0x5236f1[_0x2cecbe['id']]=_0x2cecbe['type'];});pythonBridge[_0x1c37b3(0x1c6)](this,'TRAIN_COMFORT',{'events':JSON[_0x1c37b3(0x2ef)](_0x19e370[_0x1c37b3(0x248)]),'deviceMap':_0x5236f1});}}catch(_0x2dbd07){}return;}if(_0xf4a9b7['includes'](_0x1c37b3(0x1a9))&&_0x1cfee7[_0x1c37b3(0x248)]){this[_0x1c37b3(0x1d8)](_0xf4a9b7,{'val':![],'ack':!![]}),topology[_0x1c37b3(0x259)](this);if(this['isProVersion'])try{const _0x216601=await this[_0x1c37b3(0x292)]('LTM.trainingData.sequences');if(_0x216601&&_0x216601['val'])pythonBridge[_0x1c37b3(0x1c6)](this,_0x1c37b3(0x26e),{'sequences':JSON[_0x1c37b3(0x2ef)](_0x216601[_0x1c37b3(0x248)])});}catch(_0x22cb48){}return;}}const _0x2053bd=(this[_0x1c37b3(0x306)][_0x1c37b3(0x25b)]||[])[_0x1c37b3(0x2b5)](_0x2c43a7=>_0x2c43a7['id']===_0xf4a9b7);if(_0x2053bd){const _0x3d27c9=await recorder[_0x1c37b3(0x2e0)](this,_0xf4a9b7,_0x1cfee7,_0x2053bd);_0x3d27c9&&this['setState'](_0x1c37b3(0x2d4),{'val':Date['now'](),'ack':!![]});_0x3d27c9&&_0x3d27c9[_0x1c37b3(0x2ba)]==='motion'&&_0x3d27c9[_0x1c37b3(0x2f9)]&&this[_0x1c37b3(0x31f)]&&deadMan[_0x1c37b3(0x1c8)](this,_0x3d27c9[_0x1c37b3(0x2f9)]);_0x1cfee7[_0x1c37b3(0x248)]&&(_0x1cfee7[_0x1c37b3(0x248)]===!![]||_0x1cfee7[_0x1c37b3(0x248)]===0x1||String(_0x1cfee7['val'])[_0x1c37b3(0x32e)]()===_0x1c37b3(0x276))&&(_0x2053bd[_0x1c37b3(0x2ba)]&&(_0x2053bd['type'][_0x1c37b3(0x214)](_0x1c37b3(0x2ad))||_0x2053bd['type'][_0x1c37b3(0x214)](_0x1c37b3(0x1c3)))&&this['analyzeWindowOpening'](_0x2053bd));if(_0x2053bd[_0x1c37b3(0x2ba)]===_0x1c37b3(0x293)||_0x2053bd['type']===_0x1c37b3(0x25e)){if(this[_0x1c37b3(0x1ef)]['energy'])automation[_0x1c37b3(0x286)](this);}}}async[a0_0x2f5064(0x1c1)](_0x42a0db){const _0x177fb7=a0_0x2f5064;if(!this['memoryCache']||Date[_0x177fb7(0x22e)]()-this[_0x177fb7(0x2b7)]>0x493e0)return;try{const _0x45e2b4=JSON['parse'](_0x42a0db),_0x381896=this['memoryCache'][_0x177fb7(0x1b6)];let _0x4cbf79=![];for(const _0x3afc48 in _0x381896){if(_0x381896[_0x3afc48][_0x177fb7(0x214)]('AI')&&_0x45e2b4[_0x3afc48]&&!_0x45e2b4[_0x3afc48][_0x177fb7(0x214)]('AI')){_0x4cbf79=!![];break;}}_0x4cbf79&&(await this[_0x177fb7(0x1ec)](_0x177fb7(0x264),{'val':JSON[_0x177fb7(0x2d0)](this['memoryCache'][_0x177fb7(0x2d2)]),'ack':!![]}),await this['setStateAsync'](_0x177fb7(0x329),{'val':JSON[_0x177fb7(0x2d0)](this[_0x177fb7(0x226)]['sources']),'ack':!![]}));}catch(_0xd870c6){}}async['loadSystemMode'](){const _0xb22df7=a0_0x2f5064;try{const _0x25439a=await this[_0xb22df7(0x292)](setup[_0xb22df7(0x29a)]);if(_0x25439a&&_0x25439a[_0xb22df7(0x248)])this[_0xb22df7(0x206)]=_0x25439a['val'];}catch(_0x4ca53c){this[_0xb22df7(0x206)]=setup[_0xb22df7(0x297)][_0xb22df7(0x27f)];}}async['checkWifiPresence'](){const _0x3749c5=a0_0x2f5064,_0x41b693=this[_0x3749c5(0x306)][_0x3749c5(0x288)]||[];if(_0x41b693[_0x3749c5(0x283)]===0x0)return![];const _0x490e6f=[],_0x356506=Date[_0x3749c5(0x22e)](),_0x5cf4fd=0x5*0x3c*0x3e8;for(const _0x34c7d2 of _0x41b693){try{let _0xba498e=![];try{const _0xfb5be2=await this['getForeignStateAsync'](_0x34c7d2+_0x3749c5(0x30a));if(_0xfb5be2&&_0xfb5be2['val']===!![])_0xba498e=!![];}catch(_0x4fe5b4){}if(!_0xba498e)try{const _0xb9557=await this[_0x3749c5(0x1cc)](_0x34c7d2+_0x3749c5(0x273));if(_0xb9557&&_0xb9557['ts']){const _0x45313a=_0x356506-_0xb9557['ts'];if(_0x45313a<_0x5cf4fd)_0xba498e=!![];}}catch(_0x1214b3){}if(!_0xba498e)try{const _0x5b1ec1=await this[_0x3749c5(0x1cc)](_0x34c7d2+_0x3749c5(0x280));if(_0x5b1ec1&&typeof _0x5b1ec1['val']===_0x3749c5(0x275)&&_0x5b1ec1[_0x3749c5(0x248)]>0x0)_0xba498e=!![];}catch(_0x46fee4){}if(!_0xba498e)try{const _0x45e387=await this[_0x3749c5(0x1cc)](_0x34c7d2);if(_0x45e387){const _0x21c677=_0x356506-(_0x45e387['ts']||0x0);_0x21c677<_0x5cf4fd&&(_0x45e387[_0x3749c5(0x248)]===!![]||_0x45e387[_0x3749c5(0x248)]===_0x3749c5(0x1aa)||_0x45e387[_0x3749c5(0x248)]===0x1)&&(_0xba498e=!![]);}}catch(_0x54a775){}if(_0xba498e){const _0xeba129=_0x34c7d2[_0x3749c5(0x241)]('.'),_0x5dd49a=_0xeba129[_0xeba129[_0x3749c5(0x283)]-0x1]||_0x34c7d2;_0x490e6f[_0x3749c5(0x2b2)](_0x5dd49a);}}catch(_0x20130d){this['log'][_0x3749c5(0x1ba)](_0x3749c5(0x272)+_0x34c7d2+':\x20'+_0x20130d['message']);}}const _0x15d693=_0x490e6f[_0x3749c5(0x283)]>0x0?_0x490e6f['join'](',\x20'):_0x3749c5(0x22c);return await this[_0x3749c5(0x1ec)](_0x3749c5(0x240),{'val':_0x15d693,'ack':!![]}),_0x490e6f[_0x3749c5(0x283)]>0x0;}async[a0_0x2f5064(0x218)](){const _0x12c3e9=a0_0x2f5064;await aiAgent[_0x12c3e9(0x213)](this);this['activeModules'][_0x12c3e9(0x1c5)]&&(this[_0x12c3e9(0x26d)](),this[_0x12c3e9(0x2b4)]());if(this['activeModules'][_0x12c3e9(0x1cb)])this['triggerEnergyPrediction']();}async[a0_0x2f5064(0x2ac)](){const _0xcda78b=a0_0x2f5064,_0x13b53f=[_0xcda78b(0x236),_0xcda78b(0x308),_0xcda78b(0x29e)],_0x82737c=[_0xcda78b(0x320),_0xcda78b(0x302),_0xcda78b(0x315)];for(const _0x4826ad of _0x13b53f){for(const _0x1d8751 of _0x82737c){try{const _0x4a9f52=_0x4826ad+'.'+_0x1d8751,_0x341783=await this[_0xcda78b(0x1cc)](_0x4a9f52);if(_0x341783&&_0x341783[_0xcda78b(0x248)]){const _0x304af4=String(_0x341783[_0xcda78b(0x248)])['toLowerCase']();if(_0x304af4[_0xcda78b(0x214)]('sunny')||_0x304af4[_0xcda78b(0x214)](_0xcda78b(0x200))||_0x304af4[_0xcda78b(0x214)](_0xcda78b(0x1c7))||_0x304af4[_0xcda78b(0x214)](_0xcda78b(0x1d2))||_0x304af4['includes'](_0xcda78b(0x22d)))return this[_0xcda78b(0x29d)][_0xcda78b(0x1b8)](_0xcda78b(0x238)+_0x4a9f52),!![];}}catch(_0x11e75b){}}}return![];}[a0_0x2f5064(0x2b4)](){const _0xf5c0d9=a0_0x2f5064;if(!this[_0xf5c0d9(0x31f)])return;try{this[_0xf5c0d9(0x292)](_0xf5c0d9(0x313),(_0x46bfb8,_0x4c79ee)=>{const _0x2844e0=_0xf5c0d9;if(_0x46bfb8||!_0x4c79ee||!_0x4c79ee[_0x2844e0(0x248)])return;try{const _0x17381d=JSON[_0x2844e0(0x2ef)](_0x4c79ee[_0x2844e0(0x248)]);if(!_0x17381d||_0x17381d[_0x2844e0(0x283)]===0x0)return;pythonBridge[_0x2844e0(0x1c6)](this,_0x2844e0(0x2c5),{'sequences':_0x17381d}),this[_0x2844e0(0x29d)][_0x2844e0(0x1b8)](_0x2844e0(0x1d9)+_0x17381d[_0x2844e0(0x283)]+'\x20sequences');}catch(_0x2501ea){this[_0x2844e0(0x29d)][_0x2844e0(0x1ba)]('triggerGaitAnalysis\x20parse\x20error:\x20'+_0x2501ea[_0x2844e0(0x1f8)]);}});}catch(_0x18172f){this[_0xf5c0d9(0x29d)][_0xf5c0d9(0x1ba)]('triggerGaitAnalysis\x20error:\x20'+_0x18172f[_0xf5c0d9(0x1f8)]);}}async[a0_0x2f5064(0x21b)](){const _0x4a7cc3=a0_0x2f5064;if(!this[_0x4a7cc3(0x31f)]||!this['activeModules'][_0x4a7cc3(0x1cb)])return;try{const _0x1dcd5a={},_0x2f7e6f={},_0x2a0e3d=this[_0x4a7cc3(0x306)]['devices']||[];for(const _0x35f75f of _0x2a0e3d){if((_0x35f75f[_0x4a7cc3(0x2ba)]===_0x4a7cc3(0x293)||_0x35f75f[_0x4a7cc3(0x2ba)]===_0x4a7cc3(0x25e))&&_0x35f75f['location'])try{const _0x56d8a3=await this[_0x4a7cc3(0x1cc)](_0x35f75f['id']);_0x56d8a3&&typeof _0x56d8a3[_0x4a7cc3(0x248)]===_0x4a7cc3(0x275)&&(_0x1dcd5a[_0x35f75f[_0x4a7cc3(0x2f9)]]=_0x56d8a3[_0x4a7cc3(0x248)],_0x2f7e6f[_0x35f75f[_0x4a7cc3(0x2f9)]]=_0x35f75f[_0x4a7cc3(0x23a)]||![]);}catch(_0x48a61d){}}let _0x59d8e6=0xa;if(this[_0x4a7cc3(0x306)][_0x4a7cc3(0x2a1)])try{const _0x40354c=await this[_0x4a7cc3(0x1cc)](this[_0x4a7cc3(0x306)]['weatherTempId']);if(_0x40354c&&typeof _0x40354c['val']===_0x4a7cc3(0x275))_0x59d8e6=_0x40354c[_0x4a7cc3(0x248)];}catch(_0x321b4e){}const _0x31a51a=await this[_0x4a7cc3(0x2ac)]();let _0x51a05f={};try{const _0x5e653c=await this[_0x4a7cc3(0x292)]('analysis.energy.warmupTargets');if(_0x5e653c&&_0x5e653c[_0x4a7cc3(0x248)])_0x51a05f=JSON[_0x4a7cc3(0x2ef)](_0x5e653c[_0x4a7cc3(0x248)]);}catch(_0x5fb494){}pythonBridge[_0x4a7cc3(0x1c6)](this,_0x4a7cc3(0x1c2),{'current_temps':_0x1dcd5a,'t_out':_0x59d8e6,'is_sunny':_0x31a51a,'solar_flags':_0x2f7e6f,'warmup_targets':_0x51a05f}),this[_0x4a7cc3(0x29d)][_0x4a7cc3(0x27b)](_0x4a7cc3(0x30e)+Object['keys'](_0x1dcd5a)['length']+_0x4a7cc3(0x325));}catch(_0x5b78b5){this[_0x4a7cc3(0x29d)]['warn'](_0x4a7cc3(0x330)+_0x5b78b5[_0x4a7cc3(0x1f8)]);}}[a0_0x2f5064(0x26d)](){const _0x37dfca=a0_0x2f5064;if(!this[_0x37dfca(0x212)]||this[_0x37dfca(0x212)][_0x37dfca(0x283)]===0x0)return;const _0x4ef736=new Array(0x30)['fill'](0x0),_0x2b95fa=Array['from']({'length':0x30},()=>[]),_0x156a2f=new Date()[_0x37dfca(0x249)](0x0,0x0,0x0,0x0);this[_0x37dfca(0x212)][_0x37dfca(0x32f)](_0x3555d4=>{const _0x22cb80=_0x37dfca,_0x51d77a=new Date(_0x3555d4[_0x22cb80(0x1e5)]);if(_0x51d77a[_0x22cb80(0x1ca)]()>=_0x156a2f){const _0x4fa5e7=_0x51d77a[_0x22cb80(0x258)](),_0x493756=_0x51d77a['getMinutes'](),_0x17bc5e=_0x4fa5e7*0x2+Math['floor'](_0x493756/0x1e);_0x17bc5e>=0x0&&_0x17bc5e<0x30&&(_0x4ef736[_0x17bc5e]++,_0x2b95fa[_0x17bc5e]['push']({'time':_0x51d77a[_0x22cb80(0x2e3)](_0x22cb80(0x2bd),{'hour':_0x22cb80(0x20b),'minute':_0x22cb80(0x20b)}),'location':_0x3555d4[_0x22cb80(0x2f9)]||'Unbekannt','type':_0x3555d4[_0x22cb80(0x2ba)]||'Event'}));}}),this[_0x37dfca(0x1ec)](_0x37dfca(0x2ec),{'val':JSON['stringify'](_0x4ef736),'ack':!![]}),this[_0x37dfca(0x1ec)]('analysis.health.todayRoomDetails',{'val':JSON['stringify'](_0x2b95fa),'ack':!![]});}async[a0_0x2f5064(0x271)](_0x2a7771){const _0x3f1a4b=a0_0x2f5064;if(!this[_0x3f1a4b(0x306)][_0x3f1a4b(0x228)]||typeof _0x2a7771!==_0x3f1a4b(0x275))return;const _0x332e3b=this[_0x3f1a4b(0x306)][_0x3f1a4b(0x1ab)]||0.04;this[_0x3f1a4b(0x26f)][_0x3f1a4b(0x2b2)]({'timestamp':Date[_0x3f1a4b(0x22e)](),'value':_0x2a7771}),this[_0x3f1a4b(0x26f)]['length']>0x64&&this[_0x3f1a4b(0x26f)][_0x3f1a4b(0x1ce)](),_0x2a7771>_0x332e3b&&!this[_0x3f1a4b(0x1ad)]&&(this['infrasoundLocked']=!![],this[_0x3f1a4b(0x29d)][_0x3f1a4b(0x1ba)](_0x3f1a4b(0x270)+_0x2a7771[_0x3f1a4b(0x20f)](0x4)+_0x3f1a4b(0x1d6)+_0x332e3b+_0x3f1a4b(0x21e)),await this[_0x3f1a4b(0x26a)](_0x2a7771,'threshold_exceeded'),setTimeout(()=>{const _0x20c101=_0x3f1a4b;this[_0x20c101(0x1ad)]=![];},0x5*0x3c*0x3e8));}async['triggerInfrasoundCorrelation'](_0x3d66ee,_0x25ed4e){const _0x1a1719=a0_0x2f5064;if(!this[_0x1a1719(0x27a)]){const _0x303c31=this['eventHistory'][_0x1a1719(0x24d)](0x0,0xa),_0xd4f704=_0x303c31[_0x1a1719(0x21d)](_0x15a490=>new Date(_0x15a490[_0x1a1719(0x1e5)])[_0x1a1719(0x2e3)](_0x1a1719(0x2bd))+'\x20-\x20'+(_0x15a490['location']||_0x1a1719(0x1cd))+':\x20'+_0x15a490[_0x1a1719(0x2ca)])[_0x1a1719(0x316)]('\x0a');this[_0x1a1719(0x29d)][_0x1a1719(0x1ba)](_0x1a1719(0x31c)+_0x3d66ee['toFixed'](0x4)+_0x1a1719(0x318)+_0xd4f704);if(this[_0x1a1719(0x306)][_0x1a1719(0x287)])try{const _0x566b93=await this['getForeignStateAsync'](this[_0x1a1719(0x306)][_0x1a1719(0x287)]);_0x566b93&&_0x566b93[_0x1a1719(0x248)]===!![]&&(await this['setStateAsync'](_0x1a1719(0x2e5),{'val':JSON[_0x1a1719(0x2d0)]({'timestamp':Date[_0x1a1719(0x22e)](),'pressure':_0x3d66ee[_0x1a1719(0x20f)](0x4),'eventType':_0x25ed4e,'recentEvents':_0x303c31[_0x1a1719(0x24d)](0x0,0x3)}),'ack':!![]}),this[_0x1a1719(0x29d)][_0x1a1719(0x1f2)](_0x1a1719(0x2a8)));}catch(_0x592c4a){}}else this['log'][_0x1a1719(0x1b8)](_0x1a1719(0x1ae)+_0x3d66ee[_0x1a1719(0x20f)](0x4)+_0x1a1719(0x2fa));}async[a0_0x2f5064(0x231)](_0x334244){const _0x2cba1e=a0_0x2f5064;if(!_0x334244||!_0x334244[_0x2cba1e(0x2f9)])return;try{const _0x2bacdb=(this[_0x2cba1e(0x306)][_0x2cba1e(0x25b)]||[])[_0x2cba1e(0x1c4)](_0x3f077d=>_0x3f077d[_0x2cba1e(0x2f9)]===_0x334244[_0x2cba1e(0x2f9)]&&(_0x3f077d[_0x2cba1e(0x2ba)]===_0x2cba1e(0x293)||_0x3f077d[_0x2cba1e(0x2ba)]===_0x2cba1e(0x25e)));if(_0x2bacdb[_0x2cba1e(0x283)]===0x0)return;const _0x43eacd=await this[_0x2cba1e(0x1cc)](_0x2bacdb[0x0]['id']);if(!_0x43eacd||typeof _0x43eacd[_0x2cba1e(0x248)]!=='number')return;const _0x31a084=_0x43eacd['val'];let _0x696289=null;if(this[_0x2cba1e(0x306)][_0x2cba1e(0x2a1)]){const _0x4069a0=await this[_0x2cba1e(0x1cc)](this[_0x2cba1e(0x306)][_0x2cba1e(0x2a1)]);_0x4069a0&&typeof _0x4069a0[_0x2cba1e(0x248)]==='number'&&(_0x696289=_0x4069a0[_0x2cba1e(0x248)]);}if(_0x696289!==null){const _0x9b46c4=Math[_0x2cba1e(0x1f1)](_0x31a084-_0x696289);_0x9b46c4>0x3&&(this[_0x2cba1e(0x29d)][_0x2cba1e(0x1b8)](_0x2cba1e(0x2b0)+_0x334244['location']+_0x2cba1e(0x2df)+_0x9b46c4['toFixed'](0x1)+'¬∞C\x20(Innen:\x20'+_0x31a084+'¬∞C,\x20Au√üen:\x20'+_0x696289+_0x2cba1e(0x31e)),await this['setStateAsync'](_0x2cba1e(0x311),{'val':JSON[_0x2cba1e(0x2d0)]({'room':_0x334244[_0x2cba1e(0x2f9)],'timestamp':Date[_0x2cba1e(0x22e)](),'tempDiff':_0x9b46c4[_0x2cba1e(0x20f)](0x1),'recommendation':_0x9b46c4>0x5?_0x2cba1e(0x328):_0x2cba1e(0x32c)}),'ack':!![]}));}}catch(_0x19118c){this[_0x2cba1e(0x29d)]['warn'](_0x2cba1e(0x30b)+_0x19118c['message']);}}async['appendToLog'](_0x389873){const _0x572ae6=a0_0x2f5064;if(!_0x389873||typeof _0x389873!==_0x572ae6(0x22b))return;const _0x45ca53={'timestamp':_0x389873['timestamp']||Date[_0x572ae6(0x22e)](),'id':_0x389873['id']||Date[_0x572ae6(0x22e)]()[_0x572ae6(0x2b3)](),'name':_0x389873['name']||_0x572ae6(0x20c),'type':_0x389873[_0x572ae6(0x2ba)]||'custom','location':_0x389873[_0x572ae6(0x2f9)]||_0x572ae6(0x1cd),'value':_0x389873['value']||null};this[_0x572ae6(0x1d5)][_0x572ae6(0x2db)](_0x45ca53);if(this[_0x572ae6(0x1d5)][_0x572ae6(0x283)]>0x1388)this[_0x572ae6(0x1d5)][_0x572ae6(0x2d8)]();await this[_0x572ae6(0x1ec)](_0x572ae6(0x282),{'val':JSON[_0x572ae6(0x2d0)](this['eventHistory']),'ack':!![]}),this['log'][_0x572ae6(0x1b8)]('üìù\x20Manual\x20event\x20logged:\x20'+_0x45ca53['name']+'\x20('+_0x45ca53[_0x572ae6(0x2f9)]+')');}[a0_0x2f5064(0x278)](_0x4595b1){}}function a0_0x2e65(){const _0x3be019=['Manual\x20Event','stateChange','Sec-Training\x20started...','toFixed','\x20events\x20from\x20today...','isGracePeriodActive','rawEventLog','runGeminiAnalysis','includes','briefingJob','exports','roomIntegratorTimer','runAutopilot','pulse','calendarName','triggerEnergyPrediction','system.adapter.ical.È¶ô','map','\x20(Threshold)','stopService','triggerDailyDigest','apiKey','moduleEnergy','existsSync','analysis.security.learningStatus','onStateChange','memoryCache','exitTimer','infrasoundEnabled','No\x20topology\x20data\x20found','moduleComfort','object','Niemand','clear','now','isArray','.venv','analyzeWindowOpening','minDaysForBaseline','checkCalendarTriggers','TRAIN_SECURITY','system.adapter.ical.','weatherunderground.0','namespace','‚òÄÔ∏è\x20Solar\x20Condition:\x20SUNNY\x20detected\x20via\x20','fill','isSolar','analysis.health.geminiDay','analysis.activity.roomStats','Gemini\x20Init\x20Error:\x20','startSystem','search','system.presenceWho','split','exitGraceTimer','[PythonBridge]\x20Forwarding\x20command:\x20','11IjVhaV','./lib/installer','getCalendarNames','calendarCheckTimer','val','setHours','string','system.adapter.','getDate','slice','dependencyInstallInProgress','text','max','application/json','readFileSync','analysis.automation.description','apply','analysisHistory','replayTodayEvents','onUnload','getHours','updateTopology','No\x20data','devices',')\x20-\x20Phase\x20E\x20(Scheduler\x20Fix)','\x20events\x20from\x20standard\x20storage.','thermostat','updateTopologyMatrix','history','comfort','üêç\x20Triggering\x20Python\x20Health\x20Check\x20(Activity\x20Trend)...','VACATION','analysis.energy.warmupTimes','./lib/python_bridge','(((.+)+)+)+$','bind','6525571CetCeh','loadSystemMode','triggerInfrasoundCorrelation','Warm-Up\x20Time','Lernphase\x20(','updateHealthVector','TRAIN_TOPOLOGY','pressureBuffer','üîä\x20Infraschall-Alarm:\x20','handleInfrasound','checkWifiPresence:\x20Error\x20checking\x20','.last_seen','‚Ü∫\x20Replaying\x20','number','open','genAI','sendNotification','then','isPresent','info','moduleHealth','Live\x20Event\x20Pulse','Party\x20Mode','NORMAL','.uptime','executeAutomationAction','events.history','length','analysis.training.triggerEnergy','rows','cleanupGhostInterventions','infrasoundArmingId','presenceDevices','json','4lrusXv','getGenerativeModel','initHistory','updated','Room\x20History\x20(24h\x20Buckets)','generateHealthReport','.data.table','Sonne:\x20','getStateAsync','temperature','84HagzVk','todayVector','path','SYSTEM_MODES','sensorLastValues','manual','SYSTEM_DP_MODE','geminiApiKey','outdoorSensorId','log','daswetter.0','./lib/scanner','subscribeForeignStatesAsync','weatherTempId','analysis.health.gaitSpeed','checkThermostats','ready','Daily\x20Activity\x20Vector\x20(48x30min)','ack','Invalid\x20matrix\x20data','üö®\x20INFRASCHALL-ALARM:\x20Anomalie\x20bei\x20Abwesenheit\x20(scharf)!','Standard','setDate','startService','checkSolarCondition','window','useCalendar','infrasoundSensorId','üí®\x20L√ºftung\x20in\x20','inactivityThresholdHours','push','toString','triggerGaitAnalysis','find','[Integrator]\x20Error:\x20','bootTime','\x22history\x22:{}','geminiModel','type','analysis.prediction.trackerConfidence','toISOString','de-DE','analysis.training.triggerHealth','historyJob','analysis.trigger','dailyDigests','node-schedule','enum','üì¶\x20Restored\x20','ANALYZE_GAIT','ltmJob','licenseKey','./lib/setup','party','name','cogni-living','initZombies','callback','refreshCalendar\x20failed:\x20','analysis.automation.targetId','stringify',',\x20Temp:\x20','times','endsWith','analysis.visualization.pulse','min','getAbsoluteDefaultDataDir','onMessage','pop','driftAnalysisTimer','306048xZyXJI','unshift','ERROR','4300188xtkhYA','onReady',':\x20Temp-Differenz\x20','processSensorEvent','subscribeStates','{\x22today\x22:{},\x20\x22yesterday\x22:{},\x20\x22date\x22:\x22\x22}','toLocaleTimeString','some','analysis.safety.infrasoundAlert','date','isRelevantActivity','testContext','createDailyDigest','Gemini\x20Report\x20Night','üï∏Ô∏è\x20Topology\x20Matrix\x20manually\x20updated\x20by\x20user.','analysis.health.todayVector','@google/generative-ai','healthTrendInterval','parse','...','Daily\x20Room\x20Details\x20(48x30min)','all','Kein\x20API\x20Key\x20√ºbergeben.','pythonBridge\x20command\x20failed:\x20','Corrupt','python','runPythonHealthCheck','modeResetJob','location','\x20(Bewohner\x20anwesend\x20-\x20normal)','scheduleJob','utf8','triggerHealth\x20error:\x20','bin','analysis.health.activityTrend','CALCULATE_HEALTH_TREND','7514eGyiOg','Current.WeatherText','./lib/recorder','TRAIN_HEALTH','History\x20Save\x20Error:\x20','config','Say\x20Hello','accuweather.0','checkLicense','.isOnline','analyzeWindowOpening\x20error:\x20','{\x22history\x22:{}}','triggerBriefing','üîÆ\x20Energy\x20Prediction\x20triggered\x20(','./lib/scheduler','Adapter','analysis.ventilation.lastWindow','haust√ºr','LTM.trainingData.sequences','Keine\x20Daten','NextHours.Location_1.Day_1.current.symbol_desc','join','setPresence',',\x20Events:\x0a','98hdtKJA','‚ö†\x20Replay\x20skipped:\x20No\x20events\x20in\x20memory.','SET_LEARNING_MODE','üîä\x20FORENSIC:\x20Infraschall\x20bei\x20Abwesenheit!\x20Pressure:\x20','saveDailyHistory','¬∞C)','isProVersion','forecast.current.weather','command','lastAlertState','./lib/dead_man','‚úÖ\x20Dashboard\x20Data\x20(Rooms\x20&\x20Timeline\x20&\x20Details)\x20restored.','\x20rooms)','motion','224JYgBTE','Gute\x20L√ºftungsm√∂glichkeit!','analysis.energy.warmupSources','presenceCheckTimer','NIGHT','L√ºften\x20empfohlen','analysis.health.geminiNight','toLowerCase','forEach','triggerEnergyPrediction\x20Error:\x20','getHistoryData','analysis.training.triggerTopology','online','infrasoundThreshold','analysis.health.todayRoomDetails','infrasoundLocked','üîä\x20Infraschall:\x20','Warte\x20auf\x20Analyse...','56615baatLh','lastTrackerEventTime','updateTopologyMatrix\x20failed:\x20','value','General\x20Activity\x20Trend','getEnums','sources','‚úÖ\x20History\x20saved:\x20','debug','.system.mode','warn','3213FfMbQV','scanThermostats','scanDevices','.json','constructor','Aktiv\x20(','protectAiMemory','PREDICT_ENERGY','door','filter','health','send','klar','updateLocation','analysis.topology.structure','getTime','energy','getForeignStateAsync','Unknown','shift','systemConfig','enum.functions.*','setObjectNotExistsAsync','sonn','refreshCalendar','\x20Tage)','eventHistory','\x20>\x20','initSchedules','setState','üö∂\x20Gait\x20Analysis\x20triggered\x20with\x20','common','state','Failed\x20to\x20trigger\x20Python\x20Health\x20Check','210FJGndF','trackerHeartbeat','LTM.rawEventLog','values','analysis.activity.roomHistory','moduleSecurity','unload','Verbindung\x20erfolgreich:\x20','timestamp','analysis.security.lastScore','üíæ\x20Saving\x20Daily\x20History\x20for\x20','generateContent','getForeignObjectsAsync','mkdirSync','sendMorningBriefing','setStateAsync','./lib/automation','communicate.request','activeModules','DAY','abs','error','checkWifiPresence','analysis.automation.targetValue','cancel','\x20Kalender-Adapter\x20gefunden.','sendTo','message','response','writeFileSync','automation.triggerAction','models/gemini-flash-latest','Guest\x20Mode','pythonBridge','analysis.training.status','heiter','add','LTM.baselineStatus','substring','from','system','currentSystemMode','analysis.training.triggerComfort','288168JehDWN','security','analysisTimer','2-digit'];a0_0x2e65=function(){return _0x3be019;};return a0_0x2e65();}function a0_0x24e1(_0x59b817,_0x4adb17){const _0x5cddce=a0_0x2e65();return a0_0x24e1=function(_0x7aebad,_0x451131){_0x7aebad=_0x7aebad-0x1a9;let _0x2e65e5=_0x5cddce[_0x7aebad];return _0x2e65e5;},a0_0x24e1(_0x59b817,_0x4adb17);}if(require['main']!==module)module[a0_0x2f5064(0x216)]=_0x56f6eb=>new CogniLiving(_0x56f6eb);else new CogniLiving();