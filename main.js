const a0_0x5e8d70=a0_0x488b;function a0_0x3e7b(){const _0x52401d=['stick_unreach','pop','trim','config','LTM\x20Sched\x20Error:\x20','generateContent','KALENDER:\x20','callback','üö®\x20EMERGENCY','initSystemConfig','loadRawEventLog','system.isPresent','send','accuweather.0','length','logDuplicates','Last\x20Result','selectedFunctionIds','uuid-error','analysis.analysisHistory','WETTER:\x20','isAlert','scanDevices','\x20Tage)','ical.0','firmware','notifyEmailInstance','runBaselineDriftAnalysis','generic','isExit','Aktiv\x20(','analysis.deviationFromBaseline','createDailyDigest','inactivityThresholdHours','dailyDigests','push','livingContext','getForeignObjectsAsync','bad','Pattern\x20Detected','System\x20Status\x20&\x20Control','305892ygJMnl','Alert\x20Reason','Subscribing\x20to\x20','occupancy','_score','setStateAsync','warn','weatherInstance','presenceDevices','humidity','Gemini\x20AI\x20initialized.','saveDailyDigests','updateBaselineStatus','Gemini\x20Init\x20Error:\x20','startsWith','energy','eventHistory','Feedback\x20saved:\x20','Fokus\x20auf\x20Familienroutinen,\x20Kindersicherheit\x20und\x20allgemeines\x20Haushaltsmanagement.','working','N/A\x20(Learning)','latitude','subscribeForeignStatesAsync','exports','vacation','scriptEnabled','sendTo','LTM.processingStatus','.NextHours.Location_1.Day_1.current.symbol_desc','currentposition','N/A','stringify','geminiModel','lastIndexOf','split','analysis.feedbackHistory','actual_temperature','simple-api.','setupLtmScheduler','lastAlertState','toFixed','node-schedule','diele','initZombies','Drift\x20Details','@iobroker/adapter-core','LTM.dailyDigests','NORMAL','setObjectNotExistsAsync','ltmJob','analysis.isEmergency','abortExitTimer','currentSystemMode','.forecast.current.state','Trigger\x20Analysis','runGeminiAnalysis','setupBriefingScheduler','sort','processSensorEvent','location','role','‚ö†Ô∏è\x20Alarm','analysis.health.sleepScore','Drift\x20Sched\x20Error:\x20','137610Jtqjlv','json','join','ready','echarts.','setHours','application/json','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','connection','535rbwvjf','loadDailyDigests','3094928iIIrOu','isProVersion','openweathermap','daswetter.0','stateChange','time','setState','\x0a\x20\x20\x20\x20\x20\x20\x20\x20CRITICAL\x20CHECK\x20(Dynamic\x20Safety):\x0a\x20\x20\x20\x20\x20\x20\x20\x20Pr√ºfe\x20nicht\x20nur\x20die\x20Zeit\x20seit\x20dem\x20letzten\x20Event.\x0a\x20\x20\x20\x20\x20\x20\x20\x20Pr√ºfe:\x20\x22Fehlt\x20eine\x20Aktivit√§t,\x20die\x20um\x20diese\x20Uhrzeit\x20(','LTM.baselineStatus','common','guest','val','initHistory','tryParse','notifyTelegramRecipient','shutter','[TEST]\x20','now','Normal','getCalendarNames\x20Error:\x20','text','isArray','material.','getSystemUUID','analysisTimer','getStateAsync','enum.functions.*','analysis.triggerBriefing','targetposition','analysis.health','.\x20PR√ÑSENZ:\x20','scanForDevices','Last\x20Check','saveRawEventLog','Reset\x20Sched\x20Error:\x20','notifyTelegramInstance','checkLicense','checkSystemObjects','main','history.','LTM','uuid','baselineDrift','forEach','Sleep\x20Score\x20(0-100)','LTM.driftAnalysis','Sending\x20notification:\x20\x22','fault','doors','notifyEmailRecipient','Comfort\x20Suggestion','subscribeStates','exitTimer','scriptProblem','toLowerCase','Automation\x20Proposals','indicator','value.health','slice','driftDetails','getOverviewData','VACATION','t√ºr','position','.\x20PERSONA:\x20','Analysis\x20Error:\x20','System\x20Mode','text.alarm','KALENDER:\x20Keine\x20relevanten\x20Termine','icons-mfd.','PRO-','analysis.activitySummary','runAutopilot','type','getWeatherContext','filter','exitGraceTimer','Action','search','1749hzhvlI','onMessage','set_temperature','(((.+)+)+)+$','0\x204\x20*\x20*\x20*','.\x0a\x20\x20\x20\x20\x20\x20\x20\x20EXTERNER\x20KONTEXT:\x20','Feedback\x20Log','TEST-PRO-KEY','getLtmData','Gast','reachable','LTM.rawEventLog','object','value','expire','analysis.automation.suggestedAction','Schlafzimmer','Last\x20raw\x20event','Drift\x20Status','setpoint','.Summary.Current','native','de-DE','system','aiPersona','ltmLtbWindowDays','PRIORIT√ÑT:\x20Sicherheit.\x20Erkenne\x20Eindringlinge,\x20ungew√∂hnliche\x20Anwesenheit.','sendMorningBriefing','calendarSelection','thermostat','parse','long','valve','brightness','AI\x20Alert\x20Status','bewegung','checkLtmDriftObjects','toString','summary','notifyPushoverInstance','events.lastEvent','find','onReady','scheduleJob','terrasse','name','Trigger\x20Briefing\x20(Test)','Wohnzimmer','modeResetJob','briefingEnabled','checkLtmObjects','presence_detection_active','GUEST','substring','274162IIEtuh','vis.','siren','button','@google/generative-ai','Adapter','getCalendarContext','lampe','isPresent','updateAnalysisHistory','PARTY','admin.','weather','longitude','No\x20recorded\x20events\x20yet.','klima','\x20presence\x20devices...','toISOString','loadSystemMode','Processing\x20Status','timestamp','\x20*\x20*\x20*','replace','KALENDER\x20ERROR:\x20','bind','system.meta.uuid','alertReason','initSensorSubscriptions','date','link_quality','b√ºro','fenster','custom','events.history','status','splice','write','sendNotification','Urlaub','saveFeedback','analysis.comfortSuggestion','window','weatherunderground.0','info','extendObjectAsync','flur','systemConfig','from','analysisHistory','\x20sensors...','Analysiere\x20ausgewogen\x20auf\x20Gesundheit,\x20Sicherheit\x20und\x20Komfort.','isEmergency','WETTER\x20ERROR:\x20','analysis.health.notes','boolean','indicator.alarm.fire','Party','analysis.alertReason','AI\x20Emergency\x20Status','PRIORIT√ÑT:\x20Gesundheit\x20und\x20Sicherheit\x20f√ºr\x20Senioren\x20(AAL).\x20Erkenne\x20Inaktivit√§t,\x20potenzielle\x20St√ºrze\x20(indirekt),\x20Schlafunterbrechungen\x20und\x20n√§chtliche\x20Unruhe.','rawEventLog','system.mode','minDaysForBaseline',')\x20-\x20OBFUSCATION\x20SAFE\x20MODE','HARD\x20WATCHDOG:\x20No\x20sensor\x20activity\x20detected\x20for\x20','keller','devices','WiFi\x20Presence\x20detected\x20->\x20Aborting\x20Exit\x20Timer.\x20User\x20is\x20present.','driftAnalysisTimer','flot.','analysis.lastResult','some','event','ltmDriftCheckIntervalHours','Health\x20&\x20Sleep\x20Analysis','models/gemini-flash-latest','device','normal','value.valve','WETTER:\x20Keine\x20Daten\x20gefunden','string','detectionstate','Deaktiviert\x20(Pro-Feature)','geminiApiKey','setupModeResetScheduler','getForeignStateAsync','4084158qWaNZo','map','checkWifiPresence','üö®üö®\x20NOTFALL','briefingJob','command','constructor','onUnload','Deviation','sensor','ltmStbWindowDays','activity','licht','Scanning\x20for\x20devices\x20(Legacy\x20+\x20Bad\x20Name\x20Fix)...','light','\x0aSTB:\x20','createAllObjects','online','Fokus\x20auf\x20Maximierung\x20von\x20Komfort,\x20Automatisierungseffizienz\x20und\x20Energieeinsparung.','system.config','unknown','analysis.trigger','motion','city','useCalendar','licenseKey','analysis.isAlert','Logbook','message','cogni-living','version','power','analysis.automation.description','7jjGIOL','testNotification','ack','blind','2hNkQvs','License\x20Check\x20failed:\x20','unshift','cancel','calendarInstance','accuweather',')\x20normalerweise\x20stattfindet?\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20Beispiel:\x20Wenn\x20es\x2008:30\x20Uhr\x20ist\x20und\x20normalerweise\x20um\x2007:00\x20Uhr\x20Bewegung\x20im\x20Flur\x20ist,\x20aber\x20heute\x20nicht\x20->\x20ALARM\x20(Verdacht\x20auf\x20Sturz/Unfall).\x0a\x20\x20\x20\x20\x20\x20\x20\x20Ignoriere\x20einmalige\x20Abweichungen,\x20aber\x20warne\x20bei\x20verd√§chtiger\x20Stille\x20am\x20Morgen.\x0a\x20\x20\x20\x20\x20\x20\x20\x20','lock','triggerBriefing','startExitTimer','unload','none','LTM.driftAnalysis.lastCheck','setPresence','cover','sensorLastValues','pr√§senz','genAI','\x20min).\x20Watchdog\x20Limit:\x20','k√ºche','2-digit','number','members','.data.table','enum','analysisInterval','getForeignObjectAsync','Nein','isGracePeriodActive','wohn','Raw\x20Log','toLocaleString','temperature','Error\x20checking\x20WiFi:\x20','Health\x20Notes','log','state','onStateChange','setupDriftAnalysisScheduler','includes','5960376oHdjya','initPresenceSubscriptions','temp','apply','channel','Activity\x20Summary','K√ºche','daswetter','lights','error','system.','systemUUID','\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20SCHEMA:\x20{\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22activity\x22:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22deviationFromBaseline\x22:\x20\x22string\x22,\x20\x22isAlert\x22:\x20bool,\x20\x22isEmergency\x22:\x20bool,\x20\x22alertReason\x22:\x20\x22string\x22\x20},\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22comfort\x22:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22suggestion\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22patternDetected\x22:\x20bool,\x20\x22description\x22:\x20\x22string\x22,\x20\x22suggestedAction\x22:\x20\x22string\x22\x20}\x20},\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22health\x22:\x20{\x20\x22sleepScore\x22:\x20number\x20(0-100),\x20\x22restlessness\x22:\x20\x22none|low|medium|high\x22,\x20\x22notes\x22:\x20\x22string\x22\x20}\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20}','sendToAsync','25276lfYWER','response','notifyPushoverRecipient','LTM.triggerDailyDigest','LTM.driftAnalysis.baselineDrift','Lernphase\x20(','schlaf','rollladen','Flur'];a0_0x3e7b=function(){return _0x52401d;};return a0_0x3e7b();}(function(_0x1d1923,_0x4656fa){const _0x5648ba=a0_0x488b,_0x3c3a03=_0x1d1923();while(!![]){try{const _0x1b4144=parseInt(_0x5648ba(0x1eb))/0x1*(parseInt(_0x5648ba(0x323))/0x2)+-parseInt(_0x5648ba(0x253))/0x3+-parseInt(_0x5648ba(0x221))/0x4*(-parseInt(_0x5648ba(0x29c))/0x5)+parseInt(_0x5648ba(0x1c6))/0x6+-parseInt(_0x5648ba(0x1e7))/0x7*(-parseInt(_0x5648ba(0x29e))/0x8)+parseInt(_0x5648ba(0x213))/0x9+parseInt(_0x5648ba(0x293))/0xa*(-parseInt(_0x5648ba(0x2ed))/0xb);if(_0x1b4144===_0x4656fa)break;else _0x3c3a03['push'](_0x3c3a03['shift']());}catch(_0x12a024){_0x3c3a03['push'](_0x3c3a03['shift']());}}}(a0_0x3e7b,0x5f40b));const a0_0x12028a=(function(){let _0x36c0be=!![];return function(_0x57d3fa,_0x22e789){const _0x3c82ed=_0x36c0be?function(){const _0x5f449f=a0_0x488b;if(_0x22e789){const _0x55698c=_0x22e789[_0x5f449f(0x216)](_0x57d3fa,arguments);return _0x22e789=null,_0x55698c;}}:function(){};return _0x36c0be=![],_0x3c82ed;};}()),a0_0x258f8d=a0_0x12028a(this,function(){const _0x37cbce=a0_0x488b;return a0_0x258f8d[_0x37cbce(0x312)]()[_0x37cbce(0x2ec)](_0x37cbce(0x2f0))['toString']()[_0x37cbce(0x1cc)](a0_0x258f8d)[_0x37cbce(0x2ec)]('(((.+)+)+)+$');});a0_0x258f8d();function a0_0x488b(_0x25c7db,_0x10b970){const _0x28a7d6=a0_0x3e7b();return a0_0x488b=function(_0x258f8d,_0x12028a){_0x258f8d=_0x258f8d-0x1b7;let _0x3e7ba9=_0x28a7d6[_0x258f8d];return _0x3e7ba9;},a0_0x488b(_0x25c7db,_0x10b970);}'use strict';const utils=require(a0_0x5e8d70(0x280)),{GoogleGenerativeAI}=require(a0_0x5e8d70(0x327)),schedule=require(a0_0x5e8d70(0x27c)),HISTORY_MAX_SIZE=0x32,RAW_LOG_MAX_SIZE=0x5dc,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL=a0_0x5e8d70(0x1bb),LTM_SCHEDULE='0\x203\x20*\x20*\x20*',MODE_RESET_SCHEDULE=a0_0x5e8d70(0x2f1),ANALYSIS_HISTORY_MAX_SIZE=0x64,LTM_DP_RAW_LOG=a0_0x5e8d70(0x2f8),LTM_DP_DAILY_DIGESTS=a0_0x5e8d70(0x281),LTM_DP_STATUS=a0_0x5e8d70(0x26e),LTM_DP_TRIGGER_DIGEST=a0_0x5e8d70(0x224),LTM_DP_BASELINE_STATUS=a0_0x5e8d70(0x2a6),LTM_DP_DRIFT_CHANNEL=a0_0x5e8d70(0x2cb),LTM_DP_DRIFT_STATUS=a0_0x5e8d70(0x225),LTM_DP_DRIFT_DETAILS='LTM.driftAnalysis.driftDetails',LTM_DP_DRIFT_LAST_CHECK=a0_0x5e8d70(0x1f7),SYSTEM_DP_MODE='system.mode',HARD_IGNORE_TERMS=[a0_0x5e8d70(0x2d3),a0_0x5e8d70(0x26c),'update','unreach','lowbat','rssi',a0_0x5e8d70(0x29b),'maintenance','error',a0_0x5e8d70(0x2cd),a0_0x5e8d70(0x266),'direction',a0_0x5e8d70(0x22a),'config_pending','dutycycle',a0_0x5e8d70(0x243),a0_0x5e8d70(0x2f7),a0_0x5e8d70(0x340)],BAD_NAMES=[a0_0x5e8d70(0x1c1),'presence_detection_state',a0_0x5e8d70(0x320),a0_0x5e8d70(0x2ba),a0_0x5e8d70(0x270),'state','level',a0_0x5e8d70(0x2fa),a0_0x5e8d70(0x30e),'on','off','switch',a0_0x5e8d70(0x2dd),a0_0x5e8d70(0x2ad),a0_0x5e8d70(0x1ea),a0_0x5e8d70(0x1f9),a0_0x5e8d70(0x345),a0_0x5e8d70(0x1dc),'presence',a0_0x5e8d70(0x256),'temperature',a0_0x5e8d70(0x25c),a0_0x5e8d70(0x1e5),a0_0x5e8d70(0x262),a0_0x5e8d70(0x300),a0_0x5e8d70(0x30d),a0_0x5e8d70(0x277),a0_0x5e8d70(0x2ef)],ADAPTER_BLACKLIST=[a0_0x5e8d70(0x21d),a0_0x5e8d70(0x32e),'info.',a0_0x5e8d70(0x324),a0_0x5e8d70(0x2c5),a0_0x5e8d70(0x2b4),a0_0x5e8d70(0x2e3),a0_0x5e8d70(0x368),a0_0x5e8d70(0x297),'javascript.',a0_0x5e8d70(0x278)],SYSTEM_MODES={'NORMAL':a0_0x5e8d70(0x1bd),'VACATION':a0_0x5e8d70(0x26b),'PARTY':'party','GUEST':a0_0x5e8d70(0x2a8)},AUTO_RESET_MODES=[SYSTEM_MODES[a0_0x5e8d70(0x32d)],SYSTEM_MODES[a0_0x5e8d70(0x321)]],PERSONA_MAPPING={'generic':a0_0x5e8d70(0x355),'senior_aal':a0_0x5e8d70(0x35e),'family':a0_0x5e8d70(0x265),'single_comfort':a0_0x5e8d70(0x1d8),'security':a0_0x5e8d70(0x307)};class CogniLiving extends utils[a0_0x5e8d70(0x328)]{constructor(_0x4168f8){const _0x4a7467=a0_0x5e8d70;super({..._0x4168f8,'name':_0x4a7467(0x1e3)}),this['eventHistory']=[],this['analysisHistory']=[],this['feedbackHistory']=[],this[_0x4a7467(0x35f)]=[],this[_0x4a7467(0x24c)]=[],this['sensorLastValues']={},this[_0x4a7467(0x351)]={'latitude':0x0,'longitude':0x0,'city':''},this['isPresent']=!![],this[_0x4a7467(0x2d2)]=null,this[_0x4a7467(0x2ea)]=null,this[_0x4a7467(0x207)]=![],this['genAI']=null,this[_0x4a7467(0x273)]=null,this[_0x4a7467(0x287)]=SYSTEM_MODES[_0x4a7467(0x282)],this[_0x4a7467(0x29f)]=![],this['lastAlertState']=![],this[_0x4a7467(0x21e)]=_0x4a7467(0x1da),this['analysisTimer']=null,this[_0x4a7467(0x284)]=null,this['modeResetJob']=null,this[_0x4a7467(0x367)]=null,this[_0x4a7467(0x1ca)]=null,this['on'](_0x4a7467(0x296),this[_0x4a7467(0x317)][_0x4a7467(0x33b)](this)),this['on'](_0x4a7467(0x2a2),this['onStateChange']['bind'](this)),this['on'](_0x4a7467(0x1f5),this[_0x4a7467(0x1cd)][_0x4a7467(0x33b)](this)),this['on'](_0x4a7467(0x1e2),this[_0x4a7467(0x2ee)]['bind'](this));}async[a0_0x5e8d70(0x317)](){const _0x132d80=a0_0x5e8d70;this[_0x132d80(0x20e)]['info']('cogni-living\x20adapter\x20starting\x20(v'+this[_0x132d80(0x1e4)]+_0x132d80(0x362)),await this[_0x132d80(0x27e)](),this[_0x132d80(0x22d)]['licenseKey']=this[_0x132d80(0x22d)][_0x132d80(0x1df)]||'';try{this[_0x132d80(0x29f)]=await this['checkLicense'](this[_0x132d80(0x22d)][_0x132d80(0x1df)]);}catch(_0x142b3b){this[_0x132d80(0x20e)][_0x132d80(0x21c)](_0x132d80(0x1ec)+_0x142b3b[_0x132d80(0x1e2)]);}if(!this[_0x132d80(0x22d)][_0x132d80(0x24b)]||this[_0x132d80(0x22d)][_0x132d80(0x24b)]<0.1)this[_0x132d80(0x22d)][_0x132d80(0x24b)]=0xc;await this[_0x132d80(0x2aa)](),await this[_0x132d80(0x233)]();if(this[_0x132d80(0x22d)][_0x132d80(0x1c3)])try{this[_0x132d80(0x1fc)]=new GoogleGenerativeAI(this[_0x132d80(0x22d)][_0x132d80(0x1c3)]),this[_0x132d80(0x273)]=this['genAI']['getGenerativeModel']({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x132d80(0x299)}}),this['log']['info'](_0x132d80(0x25d));}catch(_0x1cd048){this['log'][_0x132d80(0x21c)](_0x132d80(0x260)+_0x1cd048[_0x132d80(0x1e2)]);}await this[_0x132d80(0x1d6)](),await this[_0x132d80(0x335)](),await this['loadRawEventLog'](),await this['loadDailyDigests'](),this[_0x132d80(0x2d1)](_0x132d80(0x1db)),this[_0x132d80(0x2d1)](LTM_DP_TRIGGER_DIGEST),this['subscribeStates'](_0x132d80(0x360)),this[_0x132d80(0x2d1)](_0x132d80(0x2b9)),await this[_0x132d80(0x33e)](),await this[_0x132d80(0x214)]();if(this[_0x132d80(0x2b6)])clearInterval(this[_0x132d80(0x2b6)]);const _0x570b04=this[_0x132d80(0x22d)][_0x132d80(0x204)]||0xf;_0x570b04>0x0&&(this[_0x132d80(0x20e)][_0x132d80(0x34e)]('Starting\x20Autopilot\x20('+_0x570b04+_0x132d80(0x1fd)+this['config'][_0x132d80(0x24b)]+'h.'),this[_0x132d80(0x2b6)]=setInterval(()=>{const _0x236b01=_0x132d80;this[_0x236b01(0x2e6)]();},_0x570b04*0x3c*0x3e8)),this[_0x132d80(0x279)](),this['setupModeResetScheduler'](),this[_0x132d80(0x211)](),this['setupBriefingScheduler']();}['onUnload'](_0x628e34){const _0x162a0f=a0_0x5e8d70;if(this['analysisTimer'])clearInterval(this[_0x162a0f(0x2b6)]);if(this['driftAnalysisTimer'])clearInterval(this[_0x162a0f(0x367)]);if(this[_0x162a0f(0x284)])this[_0x162a0f(0x284)]['cancel']();if(this[_0x162a0f(0x31d)])this['modeResetJob'][_0x162a0f(0x1ee)]();if(this['briefingJob'])this['briefingJob'][_0x162a0f(0x1ee)]();if(this['exitTimer'])clearTimeout(this[_0x162a0f(0x2d2)]);if(this[_0x162a0f(0x2ea)])clearTimeout(this[_0x162a0f(0x2ea)]);_0x628e34();}async[a0_0x5e8d70(0x210)](_0x5e8465,_0x3aeea5){const _0xdf02ed=a0_0x5e8d70;if(!_0x3aeea5)return;if(_0x5e8465===this['namespace']+'.'+SYSTEM_DP_MODE){_0x3aeea5[_0xdf02ed(0x2a9)]&&Object['values'](SYSTEM_MODES)[_0xdf02ed(0x212)](_0x3aeea5[_0xdf02ed(0x2a9)])&&(this[_0xdf02ed(0x287)]=_0x3aeea5[_0xdf02ed(0x2a9)],_0x3aeea5[_0xdf02ed(0x2a9)]===SYSTEM_MODES[_0xdf02ed(0x2db)]?await this[_0xdf02ed(0x1f8)](![]):await this[_0xdf02ed(0x1f8)](!![]));if(!_0x3aeea5[_0xdf02ed(0x1e9)])this[_0xdf02ed(0x2a4)](_0x5e8465,{'val':this['currentSystemMode'],'ack':!![]});return;}if(!_0x3aeea5[_0xdf02ed(0x1e9)]){_0x5e8465[_0xdf02ed(0x212)](_0xdf02ed(0x1db))&&_0x3aeea5[_0xdf02ed(0x2a9)]&&(this[_0xdf02ed(0x2a4)](_0x5e8465,{'val':![],'ack':!![]}),this['runGeminiAnalysis']());if(_0x5e8465[_0xdf02ed(0x212)]('triggerDailyDigest')&&_0x3aeea5[_0xdf02ed(0x2a9)]){this[_0xdf02ed(0x2a4)](_0x5e8465,{'val':![],'ack':!![]});if(this[_0xdf02ed(0x29f)])this[_0xdf02ed(0x24a)]();}_0x5e8465[_0xdf02ed(0x212)](_0xdf02ed(0x1f3))&&_0x3aeea5[_0xdf02ed(0x2a9)]&&(this[_0xdf02ed(0x2a4)](_0x5e8465,{'val':![],'ack':!![]}),this[_0xdf02ed(0x308)]());return;}if(this[_0xdf02ed(0x22d)][_0xdf02ed(0x25b)]&&this[_0xdf02ed(0x22d)]['presenceDevices'][_0xdf02ed(0x212)](_0x5e8465)){await this['checkWifiPresence']();return;}const _0x27b311=(this['config'][_0xdf02ed(0x365)]||[])[_0xdf02ed(0x316)](_0x58cec0=>_0x58cec0['id']===_0x5e8465);if(_0x27b311)this['processSensorEvent'](_0x5e8465,_0x3aeea5,_0x27b311);}async[a0_0x5e8d70(0x2ee)](_0x2773a1){const _0x59dac6=a0_0x5e8d70;if(typeof _0x2773a1===_0x59dac6(0x2f9)&&_0x2773a1[_0x59dac6(0x1e2)])try{if(_0x2773a1['command']==='testApiKey'){}else{if(_0x2773a1[_0x59dac6(0x1cb)]===_0x59dac6(0x1e8)){}else{if(_0x2773a1[_0x59dac6(0x1cb)]===_0x59dac6(0x2f5)){}else{if(_0x2773a1[_0x59dac6(0x1cb)]===_0x59dac6(0x2da)){const _0x51f3d3=this[_0x59dac6(0x24c)][_0x59dac6(0x238)],_0x1a5c7f=this[_0x59dac6(0x263)]['filter'](_0x7bea4a=>_0x7bea4a[_0x59dac6(0x337)]>new Date()[_0x59dac6(0x298)](0x0,0x0,0x0,0x0))[_0x59dac6(0x238)];let _0x391396={'status':_0x59dac6(0x271)};try{_0x391396[_0x59dac6(0x345)]=(await this[_0x59dac6(0x2b7)](LTM_DP_DRIFT_STATUS))[_0x59dac6(0x2a9)];}catch(_0xedf267){}this[_0x59dac6(0x26d)](_0x2773a1[_0x59dac6(0x352)],_0x2773a1[_0x59dac6(0x1cb)],{'success':!![],'eventHistory':this[_0x59dac6(0x263)]['slice'](0x0,0xf),'stats':{'digestCount':_0x51f3d3,'eventCountToday':_0x1a5c7f,'driftStatus':_0x391396[_0x59dac6(0x345)],'isPresent':this[_0x59dac6(0x32b)],'minDays':this[_0x59dac6(0x22d)][_0x59dac6(0x361)]||0x7,'stbDays':this[_0x59dac6(0x22d)]['ltmStbWindowDays']||0xe,'ltbDays':this['config'][_0x59dac6(0x306)]||0x3c}},_0x2773a1[_0x59dac6(0x231)]);}else{if(_0x2773a1[_0x59dac6(0x1cb)]==='getEnums'){}else{if(_0x2773a1[_0x59dac6(0x1cb)]===_0x59dac6(0x240))try{const _0x267fa0=await this[_0x59dac6(0x2bd)](_0x2773a1[_0x59dac6(0x1e2)]||{});this[_0x59dac6(0x26d)](_0x2773a1[_0x59dac6(0x352)],_0x2773a1[_0x59dac6(0x1cb)],{'success':!![],'devices':_0x267fa0},_0x2773a1[_0x59dac6(0x231)]);}catch(_0x33442f){this[_0x59dac6(0x26d)](_0x2773a1[_0x59dac6(0x352)],_0x2773a1[_0x59dac6(0x1cb)],{'success':![],'error':_0x33442f[_0x59dac6(0x1e2)]},_0x2773a1[_0x59dac6(0x231)]);}}}}}}}catch(_0x25c1c5){this[_0x59dac6(0x20e)][_0x59dac6(0x21c)]('Error\x20in\x20onMessage\x20command\x20'+_0x2773a1[_0x59dac6(0x1cb)]+':\x20'+_0x25c1c5[_0x59dac6(0x1e2)]);if(_0x2773a1[_0x59dac6(0x231)])this[_0x59dac6(0x26d)](_0x2773a1[_0x59dac6(0x352)],_0x2773a1[_0x59dac6(0x1cb)],{'success':![],'error':_0x25c1c5[_0x59dac6(0x1e2)]},_0x2773a1[_0x59dac6(0x231)]);}}async[a0_0x5e8d70(0x28d)](_0x42ee07,_0x4aa348,_0x3564e7){const _0x3e7de9=a0_0x5e8d70;if(!_0x3564e7[_0x3e7de9(0x239)]&&this['sensorLastValues'][_0x42ee07]===_0x4aa348[_0x3e7de9(0x2a9)])return;this[_0x3e7de9(0x1fa)][_0x42ee07]=_0x4aa348['val'];if(this[_0x3e7de9(0x207)])return;const _0x20766f=await this[_0x3e7de9(0x1c8)]();if(_0x20766f){if(!this['isPresent'])await this['setPresence'](!![]);}else{const _0x263e90=_0x3564e7[_0x3e7de9(0x247)]===!![];_0x263e90?this[_0x3e7de9(0x1f4)]():(this[_0x3e7de9(0x2d2)]&&this[_0x3e7de9(0x286)](),!this[_0x3e7de9(0x32b)]&&this[_0x3e7de9(0x287)]===SYSTEM_MODES['NORMAL']&&await this[_0x3e7de9(0x1f8)](!![]));}const _0x117ca4={'timestamp':_0x4aa348['ts'],'id':_0x42ee07,'name':_0x3564e7[_0x3e7de9(0x31a)],'value':_0x4aa348[_0x3e7de9(0x2a9)],'location':_0x3564e7['location'],'type':_0x3564e7['type']};this[_0x3e7de9(0x263)][_0x3e7de9(0x1ed)](_0x117ca4);if(this['eventHistory'][_0x3e7de9(0x238)]>HISTORY_MAX_SIZE)this[_0x3e7de9(0x263)][_0x3e7de9(0x22b)]();await this['setStateAsync'](_0x3e7de9(0x315),{'val':JSON[_0x3e7de9(0x272)](_0x117ca4),'ack':!![]}),await this['setStateAsync'](_0x3e7de9(0x344),{'val':JSON[_0x3e7de9(0x272)](this[_0x3e7de9(0x263)]),'ack':!![]}),this[_0x3e7de9(0x35f)][_0x3e7de9(0x24d)]({'timestamp':new Date(_0x4aa348['ts'])[_0x3e7de9(0x334)](),'sensorName':_0x3564e7[_0x3e7de9(0x31a)],'location':_0x3564e7[_0x3e7de9(0x28e)],'value':_0x4aa348['val']}),await this[_0x3e7de9(0x2bf)]();}async[a0_0x5e8d70(0x28a)](_0x1ebf2a=''){const _0x4cf818=a0_0x5e8d70;if(!this[_0x4cf818(0x273)])return;const _0x4c7356=this['eventHistory']['length']>0x0?this['eventHistory']:[{'note':_0x4cf818(0x331)}],_0xcdcf2=PERSONA_MAPPING[this['config'][_0x4cf818(0x305)]||_0x4cf818(0x246)],_0x3933a5=this['config'][_0x4cf818(0x24e)]||'',_0xe4d4a0=this[_0x4cf818(0x287)],_0x3c07f4=await this[_0x4cf818(0x2e8)](),_0x3a2366=await this[_0x4cf818(0x329)](),_0x408865=(_0x3c07f4+'\x20'+_0x3a2366)['trim'](),_0x107b03=new Date(),_0x49574b=_0x107b03[_0x4cf818(0x20a)](_0x4cf818(0x303),{'weekday':_0x4cf818(0x30c),'hour':_0x4cf818(0x1ff),'minute':'2-digit'});let _0x1072a9='Baseline:\x20Inactive.';if(this[_0x4cf818(0x29f)]&&this[_0x4cf818(0x24c)][_0x4cf818(0x238)]>=(this[_0x4cf818(0x22d)][_0x4cf818(0x361)]||0x7)){const _0x3694b6=this['dailyDigests'][_0x4cf818(0x2d8)](-(this[_0x4cf818(0x22d)][_0x4cf818(0x1d0)]||0xe));_0x1072a9='BASELINE\x20(STB,\x20last\x2014\x20days):\x20'+JSON['stringify'](_0x3694b6);}const _0x564c15=_0x4cf818(0x2a5)+_0x49574b+_0x4cf818(0x1f1),_0x4600fa='ROLLE:\x20Smart\x20Home\x20Analyst.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20AKTUELLE\x20ZEIT:\x20'+_0x49574b+'.\x20MODUS:\x20'+_0xe4d4a0+_0x4cf818(0x2bc)+(this[_0x4cf818(0x32b)]?'Ja':_0x4cf818(0x206))+'.\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20KONTEXT:\x20'+_0x3933a5+_0x4cf818(0x2de)+_0xcdcf2+_0x4cf818(0x2f2)+_0x408865+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+_0x1072a9+'\x20'+(_0x1ebf2a?_0x1ebf2a:'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+_0x564c15+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20EVENTS:\x20'+JSON[_0x4cf818(0x272)](_0x4c7356)+_0x4cf818(0x21f);try{const _0x4af01a=await this[_0x4cf818(0x273)][_0x4cf818(0x22f)](_0x4600fa),_0x275d7a=_0x4af01a[_0x4cf818(0x222)][_0x4cf818(0x2b2)]()[_0x4cf818(0x339)](/```json|```/g,'')[_0x4cf818(0x22c)](),_0x17146c=JSON[_0x4cf818(0x30b)](_0x275d7a);await this[_0x4cf818(0x258)](_0x4cf818(0x369),{'val':_0x275d7a,'ack':!![]}),await this[_0x4cf818(0x258)](_0x4cf818(0x35c),{'val':_0x17146c[_0x4cf818(0x1d1)][_0x4cf818(0x33d)]||'','ack':!![]}),await this[_0x4cf818(0x258)](_0x4cf818(0x2e5),{'val':_0x17146c[_0x4cf818(0x1d1)][_0x4cf818(0x313)]||_0x4cf818(0x271),'ack':!![]});if(_0x17146c[_0x4cf818(0x1d1)]['isAlert']||_0x17146c[_0x4cf818(0x1d1)][_0x4cf818(0x356)]){await this[_0x4cf818(0x258)](_0x4cf818(0x1e0),{'val':!![],'ack':!![]});if(!this[_0x4cf818(0x27a)]||_0x17146c[_0x4cf818(0x1d1)][_0x4cf818(0x356)]){const _0x5a501c=_0x17146c[_0x4cf818(0x1d1)][_0x4cf818(0x356)]?_0x4cf818(0x1c9):_0x4cf818(0x290);this['sendNotification'](_0x5a501c+':\x20'+_0x17146c['activity']['alertReason'],![],_0x17146c['activity']['isEmergency']);}}else await this[_0x4cf818(0x258)](_0x4cf818(0x1e0),{'val':![],'ack':!![]});this[_0x4cf818(0x27a)]=_0x17146c[_0x4cf818(0x1d1)][_0x4cf818(0x23f)]||_0x17146c[_0x4cf818(0x1d1)][_0x4cf818(0x356)];const _0x18d7b3={'timestamp':Date[_0x4cf818(0x2af)](),'id':Date[_0x4cf818(0x2af)]()[_0x4cf818(0x312)](),'analysis':_0x17146c,'systemMode':_0xe4d4a0,'isPro':this[_0x4cf818(0x29f)]};this[_0x4cf818(0x32c)](_0x18d7b3);}catch(_0x2fbb11){this[_0x4cf818(0x20e)][_0x4cf818(0x21c)](_0x4cf818(0x2df)+_0x2fbb11[_0x4cf818(0x1e2)]);}}async['runAutopilot'](){const _0x59315c=a0_0x5e8d70,_0x138d4e=this[_0x59315c(0x22d)]['inactivityThresholdHours'],_0x12ff85=this[_0x59315c(0x22d)]['inactivityMonitoringEnabled'],_0x2343a6=this[_0x59315c(0x263)][_0x59315c(0x238)]>0x0?this['eventHistory'][0x0][_0x59315c(0x337)]:Date[_0x59315c(0x2af)](),_0x365cf4=(Date[_0x59315c(0x2af)]()-_0x2343a6)/(0x3e8*0x3c*0x3c);let _0x1c489a='';_0x12ff85&&this[_0x59315c(0x287)]===SYSTEM_MODES[_0x59315c(0x282)]&&this[_0x59315c(0x32b)]&&(_0x365cf4>_0x138d4e&&(_0x1c489a=_0x59315c(0x363)+_0x365cf4[_0x59315c(0x27b)](0x1)+'\x20hours.\x20Potential\x20incapacitation.')),this[_0x59315c(0x28a)](_0x1c489a)['catch'](_0x14f57c=>this[_0x59315c(0x20e)][_0x59315c(0x21c)](_0x14f57c));}async['createDailyDigest'](){}async[a0_0x5e8d70(0x308)](){}async[a0_0x5e8d70(0x2bd)](_0x99e272){const _0x2e6598=a0_0x5e8d70;this['log'][_0x2e6598(0x34e)](_0x2e6598(0x1d3));const _0x53c83b=[],_0x418791=await this['getForeignObjectsAsync']('*'),_0xf67a42=await this[_0x2e6598(0x24f)](_0x2e6598(0x2b8),_0x2e6598(0x203)),_0x549994={};if(_0xf67a42)for(const _0x317b77 in _0xf67a42){const _0x227ea3=_0xf67a42[_0x317b77][_0x2e6598(0x2a7)][_0x2e6598(0x201)]||[];_0x227ea3[_0x2e6598(0x2c9)](_0x250412=>{const _0x1f84f1=_0x2e6598;if(!_0x549994[_0x250412])_0x549994[_0x250412]=[];_0x549994[_0x250412][_0x1f84f1(0x24d)](_0x317b77);});}const _0x2ac6d3=_0x99e272[_0x2e6598(0x23b)]||[],_0x12f241=_0x99e272['motion']!==![],_0x4c2251=_0x99e272[_0x2e6598(0x2ce)]!==![],_0x395891=_0x99e272[_0x2e6598(0x21b)]!==![],_0xe5c41b=_0x99e272['temperature']===!![],_0x11b5ca=_0x99e272[_0x2e6598(0x32f)]===!![];for(const _0x5a5f03 in _0x418791){const _0x2a2244=_0x418791[_0x5a5f03];if(_0x2a2244[_0x2e6598(0x2e7)]!=='state'||!_0x2a2244[_0x2e6598(0x2a7)])continue;if(ADAPTER_BLACKLIST[_0x2e6598(0x1b7)](_0x341f16=>_0x5a5f03[_0x2e6598(0x261)](_0x341f16))&&!_0x11b5ca)continue;const _0x2b9280=(_0x2a2244[_0x2e6598(0x2a7)][_0x2e6598(0x28f)]||'')[_0x2e6598(0x2d4)]();let _0x18477e=(typeof _0x2a2244[_0x2e6598(0x2a7)][_0x2e6598(0x31a)]==='object'?_0x2a2244[_0x2e6598(0x2a7)][_0x2e6598(0x31a)]['de']:_0x2a2244[_0x2e6598(0x2a7)]['name'])||_0x5a5f03;const _0x2813e5=_0x18477e['toLowerCase']();if(HARD_IGNORE_TERMS[_0x2e6598(0x1b7)](_0x2ec2b8=>_0x5a5f03[_0x2e6598(0x212)](_0x2ec2b8)||_0x2813e5[_0x2e6598(0x212)](_0x2ec2b8[_0x2e6598(0x2d4)]())))continue;if(BAD_NAMES[_0x2e6598(0x1b7)](_0x4645cd=>_0x2813e5===_0x4645cd||_0x2813e5['endsWith']('.'+_0x4645cd))){let _0x5de6b1='',_0x3f82c1=_0x5a5f03;for(let _0x37459d=0x0;_0x37459d<0x4;_0x37459d++){const _0x2e7567=_0x3f82c1[_0x2e6598(0x274)]('.');if(_0x2e7567===-0x1)break;_0x3f82c1=_0x3f82c1[_0x2e6598(0x322)](0x0,_0x2e7567);const _0x54ce15=_0x418791[_0x3f82c1];if(_0x54ce15&&_0x54ce15[_0x2e6598(0x2a7)]&&_0x54ce15[_0x2e6598(0x2a7)][_0x2e6598(0x31a)]){const _0x387dab=typeof _0x54ce15[_0x2e6598(0x2a7)]['name']===_0x2e6598(0x2f9)?_0x54ce15['common']['name']['de']:_0x54ce15[_0x2e6598(0x2a7)][_0x2e6598(0x31a)],_0x23f212=_0x387dab[_0x2e6598(0x2d4)]();if(!_0x23f212[_0x2e6598(0x212)](_0x2e6598(0x217))&&!_0x23f212[_0x2e6598(0x212)](_0x2e6598(0x1bc))&&_0x387dab[_0x2e6598(0x238)]>0x2){_0x5de6b1=_0x387dab;if(_0x23f212['includes'](_0x2e6598(0x228))||_0x23f212[_0x2e6598(0x212)](_0x2e6598(0x1d2))||_0x23f212['includes']('fenster'))break;}}}_0x5de6b1&&(_0x18477e=_0x5de6b1+'\x20('+_0x18477e+')');}let _0x8b6395=![];if(_0x2ac6d3[_0x2e6598(0x238)]>0x0){const _0x4604a0=_0x549994[_0x5a5f03]||[],_0x2edddc=_0x5a5f03['split']('.')[_0x2e6598(0x2d8)](0x0,-0x1)[_0x2e6598(0x295)]('.'),_0x395ca8=_0x549994[_0x2edddc]||[];if(_0x4604a0[_0x2e6598(0x1b7)](_0x5734ac=>_0x2ac6d3[_0x2e6598(0x212)](_0x5734ac))||_0x395ca8['some'](_0x2aa5d1=>_0x2ac6d3[_0x2e6598(0x212)](_0x2aa5d1)))_0x8b6395=!![];}let _0x1e03d5='';if(_0x12f241){if(_0x2b9280['includes'](_0x2e6598(0x1dc))||_0x2b9280['includes']('occupancy')||_0x2813e5[_0x2e6598(0x212)](_0x2e6598(0x310))||_0x2813e5[_0x2e6598(0x212)](_0x2e6598(0x1fb)))_0x1e03d5=_0x2e6598(0x1dc);}if(!_0x1e03d5&&_0x4c2251){if(_0x2b9280['includes']('door')||_0x2b9280[_0x2e6598(0x212)](_0x2e6598(0x34c))||_0x2b9280[_0x2e6598(0x212)](_0x2e6598(0x1f2))||_0x2b9280[_0x2e6598(0x212)](_0x2e6598(0x1ea))||_0x2b9280['includes'](_0x2e6598(0x2ad)))_0x1e03d5='door';else{if(_0x2813e5[_0x2e6598(0x212)](_0x2e6598(0x342))||_0x2813e5[_0x2e6598(0x212)](_0x2e6598(0x2dc))||_0x2813e5[_0x2e6598(0x212)]('door')||_0x2813e5[_0x2e6598(0x212)](_0x2e6598(0x228)))_0x1e03d5='door';}}if(!_0x1e03d5&&_0x395891){if(_0x2b9280[_0x2e6598(0x212)](_0x2e6598(0x1d4))||_0x2b9280['includes']('switch')||_0x2b9280[_0x2e6598(0x212)]('dimmer'))_0x1e03d5=_0x2e6598(0x1d4);else{if(_0x2813e5[_0x2e6598(0x212)](_0x2e6598(0x1d2))||_0x2813e5['includes'](_0x2e6598(0x32a))||_0x2813e5[_0x2e6598(0x212)]('schalter')){if(_0x2a2244[_0x2e6598(0x2a7)][_0x2e6598(0x347)]||_0x2b9280[_0x2e6598(0x212)](_0x2e6598(0x1cf)))_0x1e03d5=_0x2e6598(0x1d4);}}}if(!_0x1e03d5&&_0xe5c41b){if(_0x2b9280[_0x2e6598(0x212)](_0x2e6598(0x20b))||_0x2b9280[_0x2e6598(0x212)]('humidity')||_0x2b9280[_0x2e6598(0x212)](_0x2e6598(0x30a))||_0x2b9280[_0x2e6598(0x212)](_0x2e6598(0x1be))||_0x2b9280[_0x2e6598(0x212)]('level.valve'))_0x1e03d5=_0x2e6598(0x20b);else{if(_0x2813e5[_0x2e6598(0x212)](_0x2e6598(0x215))||_0x2813e5[_0x2e6598(0x212)](_0x2e6598(0x332))||_0x2813e5['includes']('heizung')||_0x2813e5[_0x2e6598(0x212)]('thermostat'))_0x1e03d5=_0x2e6598(0x20b);}}if(!_0x1e03d5&&_0x8b6395)_0x1e03d5=_0x2e6598(0x343);if(_0x1e03d5){let _0x1ac32f='';const _0x1bf6d9=(_0x5a5f03+'\x20'+_0x18477e)['toLowerCase']();if(_0x1bf6d9[_0x2e6598(0x212)](_0x2e6598(0x250))||_0x1bf6d9['includes']('wc'))_0x1ac32f='Badezimmer';else{if(_0x1bf6d9[_0x2e6598(0x212)](_0x2e6598(0x1fe)))_0x1ac32f=_0x2e6598(0x219);else{if(_0x1bf6d9[_0x2e6598(0x212)](_0x2e6598(0x208)))_0x1ac32f=_0x2e6598(0x31c);else{if(_0x1bf6d9[_0x2e6598(0x212)](_0x2e6598(0x227)))_0x1ac32f=_0x2e6598(0x2fd);else{if(_0x1bf6d9['includes'](_0x2e6598(0x350))||_0x1bf6d9[_0x2e6598(0x212)](_0x2e6598(0x27d)))_0x1ac32f=_0x2e6598(0x229);else{if(_0x1bf6d9['includes']('garten')||_0x1bf6d9[_0x2e6598(0x212)](_0x2e6598(0x319)))_0x1ac32f='Garten';else{if(_0x1bf6d9[_0x2e6598(0x212)](_0x2e6598(0x341)))_0x1ac32f='B√ºro';else{if(_0x1bf6d9[_0x2e6598(0x212)](_0x2e6598(0x364)))_0x1ac32f='Keller';}}}}}}}_0x53c83b[_0x2e6598(0x24d)]({'id':_0x5a5f03,'name':_0x18477e,'location':_0x1ac32f,'type':_0x1e03d5,'logDuplicates':_0x1e03d5===_0x2e6598(0x1dc),'isExit':![],'_score':_0x1ac32f?0x50:_0x1e03d5===_0x2e6598(0x343)?0x5a:0x28});}}return _0x53c83b[_0x2e6598(0x28c)]((_0x1f7f62,_0x25653e)=>_0x25653e[_0x2e6598(0x257)]-_0x1f7f62['_score']),_0x53c83b;}[a0_0x5e8d70(0x2ab)](_0x49f9fd){const _0x45b194=a0_0x5e8d70;if(typeof _0x49f9fd==='object')return _0x49f9fd;try{return JSON[_0x45b194(0x30b)](_0x49f9fd);}catch(_0x25497){return null;}}async['initZombies'](){}async['initHistory'](){const _0x494caf=a0_0x5e8d70;try{const _0x36e02c=await this[_0x494caf(0x2b7)]('events.history');_0x36e02c&&_0x36e02c[_0x494caf(0x2a9)]&&(this[_0x494caf(0x263)]=JSON[_0x494caf(0x30b)](_0x36e02c[_0x494caf(0x2a9)]['toString']()));}catch(_0x4208ed){this[_0x494caf(0x263)]=[];}try{const _0x2350ad=await this[_0x494caf(0x2b7)](_0x494caf(0x23d));if(_0x2350ad&&_0x2350ad[_0x494caf(0x2a9)])this[_0x494caf(0x353)]=JSON['parse'](_0x2350ad[_0x494caf(0x2a9)][_0x494caf(0x312)]());}catch(_0x23690e){this[_0x494caf(0x353)]=[];}}async['initSystemConfig'](){const _0x387576=a0_0x5e8d70;try{const _0x3fb410=await this[_0x387576(0x205)](_0x387576(0x1d9));_0x3fb410&&_0x3fb410[_0x387576(0x2a7)]&&(this['systemConfig']={'latitude':_0x3fb410[_0x387576(0x2a7)][_0x387576(0x268)]||0x0,'longitude':_0x3fb410[_0x387576(0x2a7)][_0x387576(0x330)]||0x0,'city':_0x3fb410[_0x387576(0x2a7)][_0x387576(0x1dd)]||''});}catch(_0x54fe52){}}async[a0_0x5e8d70(0x2c2)](_0x44382d){const _0x5bdc80=a0_0x5e8d70;if(!_0x44382d)return![];this[_0x5bdc80(0x21e)]=await this[_0x5bdc80(0x2b5)]();if(_0x44382d===_0x5bdc80(0x2f4)||_0x44382d[_0x5bdc80(0x261)](_0x5bdc80(0x2e4)))return!![];return![];}async[a0_0x5e8d70(0x2b5)](){const _0xa68594=a0_0x5e8d70;try{const _0xeade59=await this['getForeignObjectAsync'](_0xa68594(0x33c));if(_0xeade59&&_0xeade59[_0xa68594(0x302)]&&_0xeade59['native'][_0xa68594(0x2c7)])return _0xeade59[_0xa68594(0x302)]['uuid'];return'uuid-not-found';}catch(_0x316670){return _0xa68594(0x23c);}}async['createAllObjects'](){const _0x2c3f0e=a0_0x5e8d70;await this[_0x2c3f0e(0x2c3)](),await this['setObjectNotExistsAsync'](_0x2c3f0e(0x315),{'type':'state','common':{'name':_0x2c3f0e(0x2fe),'type':'string','role':_0x2c3f0e(0x294),'read':!![],'write':![]},'native':{}}),await this[_0x2c3f0e(0x283)](_0x2c3f0e(0x344),{'type':_0x2c3f0e(0x20f),'common':{'name':'Event\x20History','type':_0x2c3f0e(0x1c0),'role':'json','read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x2c3f0e(0x1db),{'type':'state','common':{'name':_0x2c3f0e(0x289),'type':'boolean','role':_0x2c3f0e(0x326),'read':!![],'write':!![],'def':![]},'native':{}}),await this[_0x2c3f0e(0x283)](_0x2c3f0e(0x2b9),{'type':_0x2c3f0e(0x20f),'common':{'name':_0x2c3f0e(0x31b),'type':_0x2c3f0e(0x359),'role':_0x2c3f0e(0x326),'read':!![],'write':!![],'def':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x2c3f0e(0x369),{'type':_0x2c3f0e(0x20f),'common':{'name':_0x2c3f0e(0x23a),'type':_0x2c3f0e(0x1c0),'role':'json','read':!![],'write':![]},'native':{}}),await this[_0x2c3f0e(0x283)]('analysis.isAlert',{'type':_0x2c3f0e(0x20f),'common':{'name':_0x2c3f0e(0x30f),'type':_0x2c3f0e(0x359),'role':'indicator.alarm','read':!![],'write':![],'def':![]},'native':{}}),await this[_0x2c3f0e(0x283)](_0x2c3f0e(0x285),{'type':'state','common':{'name':_0x2c3f0e(0x35d),'type':_0x2c3f0e(0x359),'role':_0x2c3f0e(0x35a),'read':!![],'write':![],'def':![]},'native':{}}),await this[_0x2c3f0e(0x283)](_0x2c3f0e(0x35c),{'type':_0x2c3f0e(0x20f),'common':{'name':_0x2c3f0e(0x254),'type':'string','role':_0x2c3f0e(0x2e1),'read':!![],'write':![]},'native':{}}),await this[_0x2c3f0e(0x283)](_0x2c3f0e(0x2e5),{'type':_0x2c3f0e(0x20f),'common':{'name':_0x2c3f0e(0x218),'type':_0x2c3f0e(0x1c0),'role':_0x2c3f0e(0x2b2),'read':!![],'write':![]},'native':{}}),await this[_0x2c3f0e(0x283)](_0x2c3f0e(0x249),{'type':'state','common':{'name':_0x2c3f0e(0x1ce),'type':_0x2c3f0e(0x1c0),'role':_0x2c3f0e(0x20f),'read':!![],'write':![],'def':_0x2c3f0e(0x271)},'native':{}}),await this[_0x2c3f0e(0x283)]('analysis.comfortSummary',{'type':_0x2c3f0e(0x20f),'common':{'name':'Comfort\x20Summary','type':_0x2c3f0e(0x1c0),'role':_0x2c3f0e(0x2b2),'read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x2c3f0e(0x34b),{'type':_0x2c3f0e(0x20f),'common':{'name':_0x2c3f0e(0x2d0),'type':_0x2c3f0e(0x1c0),'role':_0x2c3f0e(0x2b2),'read':!![],'write':![]},'native':{}}),await this[_0x2c3f0e(0x34f)]('analysis.automation',{'type':_0x2c3f0e(0x217),'common':{'name':_0x2c3f0e(0x2d5)},'native':{}}),await this['setObjectNotExistsAsync']('analysis.automation.patternDetected',{'type':'state','common':{'name':_0x2c3f0e(0x251),'type':_0x2c3f0e(0x359),'role':_0x2c3f0e(0x2d6),'read':!![],'write':![],'def':![]},'native':{}}),await this[_0x2c3f0e(0x283)](_0x2c3f0e(0x1e6),{'type':_0x2c3f0e(0x20f),'common':{'name':'Description','type':_0x2c3f0e(0x1c0),'role':'text','read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x2c3f0e(0x2fc),{'type':_0x2c3f0e(0x20f),'common':{'name':_0x2c3f0e(0x2eb),'type':'string','role':_0x2c3f0e(0x2b2),'read':!![],'write':![]},'native':{}}),await this[_0x2c3f0e(0x283)]('analysis.analysisHistory',{'type':_0x2c3f0e(0x20f),'common':{'name':_0x2c3f0e(0x1e1),'type':'string','role':_0x2c3f0e(0x294),'read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x2c3f0e(0x283)](_0x2c3f0e(0x276),{'type':_0x2c3f0e(0x20f),'common':{'name':_0x2c3f0e(0x2f3),'type':_0x2c3f0e(0x1c0),'role':_0x2c3f0e(0x294),'read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x2c3f0e(0x34f)](_0x2c3f0e(0x2bb),{'type':'channel','common':{'name':_0x2c3f0e(0x1ba)},'native':{}}),await this[_0x2c3f0e(0x283)](_0x2c3f0e(0x291),{'type':'state','common':{'name':_0x2c3f0e(0x2ca),'type':_0x2c3f0e(0x200),'role':_0x2c3f0e(0x2d7),'read':!![],'write':![],'def':0x0},'native':{}}),await this[_0x2c3f0e(0x283)]('analysis.health.restlessness',{'type':'state','common':{'name':'Restlessness\x20Level','type':_0x2c3f0e(0x1c0),'role':_0x2c3f0e(0x2b2),'read':!![],'write':![],'def':_0x2c3f0e(0x1f6)},'native':{}}),await this[_0x2c3f0e(0x283)](_0x2c3f0e(0x358),{'type':_0x2c3f0e(0x20f),'common':{'name':_0x2c3f0e(0x20d),'type':'string','role':'text','read':!![],'write':![],'def':''},'native':{}}),await this[_0x2c3f0e(0x31f)](),await this[_0x2c3f0e(0x311)]();}async[a0_0x5e8d70(0x2c3)](){const _0x45b95f=a0_0x5e8d70;await this[_0x45b95f(0x34f)](_0x45b95f(0x304),{'type':_0x45b95f(0x217),'common':{'name':_0x45b95f(0x252)},'native':{}}),await this[_0x45b95f(0x34f)](SYSTEM_DP_MODE,{'type':_0x45b95f(0x20f),'common':{'name':_0x45b95f(0x2e0),'type':_0x45b95f(0x1c0),'role':'state','read':!![],'write':!![],'def':SYSTEM_MODES[_0x45b95f(0x282)],'states':{[SYSTEM_MODES[_0x45b95f(0x282)]]:_0x45b95f(0x2b0),[SYSTEM_MODES['VACATION']]:_0x45b95f(0x349),[SYSTEM_MODES['PARTY']]:_0x45b95f(0x35b),[SYSTEM_MODES[_0x45b95f(0x321)]]:_0x45b95f(0x2f6)}},'native':{}});}async['checkLtmObjects'](){const _0xe7dff2=a0_0x5e8d70;await this['extendObjectAsync'](_0xe7dff2(0x2c6),{'type':'channel','common':{'name':_0xe7dff2(0x2c6)},'native':{}}),await this[_0xe7dff2(0x34f)](LTM_DP_RAW_LOG,{'type':'state','common':{'name':_0xe7dff2(0x209),'type':_0xe7dff2(0x1c0),'role':'json','read':!![],'write':![]},'native':{}}),await this[_0xe7dff2(0x34f)](LTM_DP_DAILY_DIGESTS,{'type':'state','common':{'name':'Daily\x20Digests','type':_0xe7dff2(0x1c0),'role':'json','read':!![],'write':![]},'native':{}}),await this['extendObjectAsync'](LTM_DP_STATUS,{'type':_0xe7dff2(0x20f),'common':{'name':_0xe7dff2(0x336),'type':_0xe7dff2(0x1c0),'role':_0xe7dff2(0x2b2),'read':!![],'write':![]},'native':{}}),await this[_0xe7dff2(0x34f)](LTM_DP_TRIGGER_DIGEST,{'type':_0xe7dff2(0x20f),'common':{'name':'Trigger\x20Digest','type':_0xe7dff2(0x359),'role':_0xe7dff2(0x326),'read':!![],'write':!![],'def':![]},'native':{}}),await this[_0xe7dff2(0x34f)](LTM_DP_BASELINE_STATUS,{'type':_0xe7dff2(0x20f),'common':{'name':'Baseline\x20Status','type':_0xe7dff2(0x1c0),'role':'text','read':!![],'write':![]},'native':{}});}async[a0_0x5e8d70(0x311)](){const _0x10d88f=a0_0x5e8d70;await this[_0x10d88f(0x34f)](LTM_DP_DRIFT_CHANNEL,{'type':_0x10d88f(0x217),'common':{'name':'Drift\x20Analysis'},'native':{}}),await this[_0x10d88f(0x34f)](LTM_DP_DRIFT_STATUS,{'type':_0x10d88f(0x20f),'common':{'name':_0x10d88f(0x2ff),'type':_0x10d88f(0x1c0),'role':'state','read':!![],'write':![],'def':_0x10d88f(0x271)},'native':{}}),await this[_0x10d88f(0x34f)](LTM_DP_DRIFT_DETAILS,{'type':_0x10d88f(0x20f),'common':{'name':_0x10d88f(0x27f),'type':_0x10d88f(0x1c0),'role':_0x10d88f(0x2b2),'read':!![],'write':![]},'native':{}}),await this[_0x10d88f(0x34f)](LTM_DP_DRIFT_LAST_CHECK,{'type':_0x10d88f(0x20f),'common':{'name':_0x10d88f(0x2be),'type':_0x10d88f(0x200),'role':'date','read':!![],'write':![]},'native':{}});}async[a0_0x5e8d70(0x335)](){const _0x2ca6d7=a0_0x5e8d70;try{const _0xfc0bd2=await this[_0x2ca6d7(0x2b7)](SYSTEM_DP_MODE);_0xfc0bd2&&_0xfc0bd2[_0x2ca6d7(0x2a9)]&&Object['values'](SYSTEM_MODES)[_0x2ca6d7(0x212)](_0xfc0bd2[_0x2ca6d7(0x2a9)])?this[_0x2ca6d7(0x287)]=_0xfc0bd2['val']:(this[_0x2ca6d7(0x287)]=SYSTEM_MODES['NORMAL'],await this['setStateAsync'](SYSTEM_DP_MODE,{'val':SYSTEM_MODES['NORMAL'],'ack':!![]}));}catch(_0x7d89d8){this[_0x2ca6d7(0x287)]=SYSTEM_MODES['NORMAL'];}}async[a0_0x5e8d70(0x234)](){const _0x521cf6=a0_0x5e8d70;try{const _0x2804c7=await this[_0x521cf6(0x2b7)](LTM_DP_RAW_LOG);if(_0x2804c7&&_0x2804c7['val'])this[_0x521cf6(0x35f)]=JSON['parse'](_0x2804c7[_0x521cf6(0x2a9)]);}catch(_0x517d63){this[_0x521cf6(0x35f)]=[];}}async[a0_0x5e8d70(0x29d)](){const _0x47d961=a0_0x5e8d70;try{const _0x2e7a1c=await this['getStateAsync'](LTM_DP_DAILY_DIGESTS);if(_0x2e7a1c&&_0x2e7a1c[_0x47d961(0x2a9)])this['dailyDigests']=JSON['parse'](_0x2e7a1c['val']);}catch(_0x54f952){this[_0x47d961(0x24c)]=[];}await this['updateBaselineStatus']();}async[a0_0x5e8d70(0x2bf)](){const _0x23bdf6=a0_0x5e8d70;this[_0x23bdf6(0x35f)]['length']>RAW_LOG_MAX_SIZE&&this[_0x23bdf6(0x35f)][_0x23bdf6(0x346)](0x0,this['rawEventLog']['length']-RAW_LOG_MAX_SIZE),await this['setStateAsync'](LTM_DP_RAW_LOG,{'val':JSON[_0x23bdf6(0x272)](this[_0x23bdf6(0x35f)]),'ack':!![]});}async[a0_0x5e8d70(0x25e)](_0x58b1d9=!![]){const _0x568d2=a0_0x5e8d70,_0xd94d67=this['config']['ltmLtbWindowDays']||0x3c;this[_0x568d2(0x24c)][_0x568d2(0x238)]>_0xd94d67&&this[_0x568d2(0x24c)][_0x568d2(0x346)](0x0,this['dailyDigests'][_0x568d2(0x238)]-_0xd94d67);await this['setStateAsync'](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x568d2(0x272)](this[_0x568d2(0x24c)]),'ack':!![]});if(_0x58b1d9)await this[_0x568d2(0x25f)]();}async[a0_0x5e8d70(0x32c)](_0x5cd2a1){const _0x503375=a0_0x5e8d70;this[_0x503375(0x353)][_0x503375(0x1ed)](_0x5cd2a1);if(this[_0x503375(0x353)][_0x503375(0x238)]>ANALYSIS_HISTORY_MAX_SIZE)this['analysisHistory']['pop']();await this[_0x503375(0x258)](_0x503375(0x23d),{'val':JSON[_0x503375(0x272)](this[_0x503375(0x353)]),'ack':!![]});}async['updateBaselineStatus'](){const _0x1c6dc8=a0_0x5e8d70;if(!this[_0x1c6dc8(0x29f)]){await this['setStateAsync'](LTM_DP_BASELINE_STATUS,{'val':_0x1c6dc8(0x1c2),'ack':!![]});return;}const _0x2b8918=this[_0x1c6dc8(0x24c)][_0x1c6dc8(0x238)]>=(this['config']['minDaysForBaseline']||0x7)?_0x1c6dc8(0x248)+this[_0x1c6dc8(0x24c)][_0x1c6dc8(0x238)]+_0x1c6dc8(0x241):_0x1c6dc8(0x226)+this[_0x1c6dc8(0x24c)][_0x1c6dc8(0x238)]+'/'+(this['config'][_0x1c6dc8(0x361)]||0x7)+')';await this[_0x1c6dc8(0x258)](LTM_DP_BASELINE_STATUS,{'val':_0x2b8918,'ack':!![]});}async[a0_0x5e8d70(0x33e)](){const _0x1168cd=a0_0x5e8d70,_0x3462c6=this['config'][_0x1168cd(0x365)];if(_0x3462c6&&_0x3462c6[_0x1168cd(0x238)]>0x0){this[_0x1168cd(0x20e)][_0x1168cd(0x34e)](_0x1168cd(0x255)+_0x3462c6['length']+_0x1168cd(0x354));for(const _0x2dbff9 of _0x3462c6){if(_0x2dbff9['id']){await this[_0x1168cd(0x269)](_0x2dbff9['id']);try{const _0x38a4a0=await this[_0x1168cd(0x1c5)](_0x2dbff9['id']);if(_0x38a4a0)this[_0x1168cd(0x1fa)][_0x2dbff9['id']]=_0x38a4a0[_0x1168cd(0x2a9)];}catch(_0x491d4c){}}}}}async[a0_0x5e8d70(0x214)](){const _0x5a142b=a0_0x5e8d70,_0x35f86f=this['config'][_0x5a142b(0x25b)]||[];if(_0x35f86f[_0x5a142b(0x238)]>0x0){this[_0x5a142b(0x20e)][_0x5a142b(0x34e)](_0x5a142b(0x255)+_0x35f86f['length']+_0x5a142b(0x333));for(const _0x13d1f7 of _0x35f86f){await this[_0x5a142b(0x269)](_0x13d1f7);}try{await this[_0x5a142b(0x1c8)]();}catch(_0x4e4afd){}}}async[a0_0x5e8d70(0x2e8)](){const _0x174f1a=a0_0x5e8d70;try{if(!this[_0x174f1a(0x22d)]['useWeather'])return'Wetter:\x20Deaktiviert';let _0x43a091='';const _0x594c89=this[_0x174f1a(0x22d)][_0x174f1a(0x25a)];if(_0x594c89)try{if(_0x594c89['includes']('accuweather')){const _0x285dae=await this[_0x174f1a(0x1c5)](_0x594c89+_0x174f1a(0x301));if(_0x285dae&&_0x285dae[_0x174f1a(0x2a9)])_0x43a091=_0x285dae[_0x174f1a(0x2a9)];}else{if(_0x594c89['includes'](_0x174f1a(0x21a))){const _0x14396=await this[_0x174f1a(0x1c5)](_0x594c89+_0x174f1a(0x26f));if(_0x14396&&_0x14396[_0x174f1a(0x2a9)])_0x43a091=_0x14396[_0x174f1a(0x2a9)];}else{if(_0x594c89[_0x174f1a(0x212)](_0x174f1a(0x2a0))){const _0x13637d=await this[_0x174f1a(0x1c5)](_0x594c89+_0x174f1a(0x288));if(_0x13637d&&_0x13637d[_0x174f1a(0x2a9)])_0x43a091=_0x13637d[_0x174f1a(0x2a9)];}}}}catch(_0x538a26){}if(!_0x43a091){const _0x40f267=[_0x174f1a(0x237),_0x174f1a(0x2a1),_0x174f1a(0x34d),'openweathermap.0'];for(const _0x329199 of _0x40f267){try{const _0x110c34=await this['getForeignObjectAsync'](_0x329199);if(_0x110c34){if(_0x329199[_0x174f1a(0x212)](_0x174f1a(0x1f0))){const _0x55dfcb=await this[_0x174f1a(0x1c5)](_0x329199+_0x174f1a(0x301));if(_0x55dfcb&&_0x55dfcb[_0x174f1a(0x2a9)]){_0x43a091=_0x55dfcb[_0x174f1a(0x2a9)];break;}}}}catch(_0x2b34e5){}}}return _0x43a091?_0x174f1a(0x23e)+_0x43a091:_0x174f1a(0x1bf);}catch(_0x43246c){return _0x174f1a(0x357)+_0x43246c[_0x174f1a(0x1e2)];}}async['getCalendarContext'](){const _0x37c32d=a0_0x5e8d70;try{if(!this[_0x37c32d(0x22d)][_0x37c32d(0x1de)])return'Kalender:\x20Deaktiviert';let _0x2bb405=this[_0x37c32d(0x22d)][_0x37c32d(0x1ef)]||_0x37c32d(0x242),_0xb68f9a=this[_0x37c32d(0x22d)][_0x37c32d(0x309)]||[];if(typeof _0xb68f9a===_0x37c32d(0x1c0))_0xb68f9a=_0xb68f9a[_0x37c32d(0x275)](',');try{const _0xb5da71=await this[_0x37c32d(0x1c5)](_0x2bb405+_0x37c32d(0x202));if(_0xb5da71&&_0xb5da71[_0x37c32d(0x2a9)]){let _0x296e9f=this[_0x37c32d(0x2ab)](_0xb5da71[_0x37c32d(0x2a9)]);if(_0x296e9f&&Array[_0x37c32d(0x2b3)](_0x296e9f)){if(_0xb68f9a[_0x37c32d(0x238)]>0x0)_0x296e9f=_0x296e9f[_0x37c32d(0x2e9)](_0x138914=>_0xb68f9a[_0x37c32d(0x212)](_0x138914['_calName']||''));else return'KALENDER:\x20Keine\x20Kalender\x20ausgew√§hlt\x20(Bitte\x20in\x20Settings\x20konfigurieren)';if(_0x296e9f[_0x37c32d(0x238)]>0x0){const _0x569d28=_0x296e9f[_0x37c32d(0x2d8)](0x0,0x3)[_0x37c32d(0x1c7)](_0x273383=>{const _0x1a7101=_0x37c32d;let _0x4f22f3=_0x273383[_0x1a7101(0x33f)];if(_0x273383[_0x1a7101(0x2a3)])_0x4f22f3+='\x20'+_0x273383[_0x1a7101(0x2a3)];return _0x4f22f3+':\x20'+_0x273383[_0x1a7101(0x1b8)]+'\x20('+_0x273383['_calName']+')';});return _0x37c32d(0x230)+_0x569d28[_0x37c32d(0x295)]('\x20|\x20');}else return _0x37c32d(0x2e2);}}}catch(_0x10d133){this['log'][_0x37c32d(0x259)]('Error\x20reading\x20calendar\x20table:\x20'+_0x10d133['message']);}return'KALENDER:\x20Keine\x20Daten';}catch(_0x57ba03){return _0x37c32d(0x33a)+_0x57ba03[_0x37c32d(0x1e2)];}}async['getCalendarNames'](_0x4b7ae3){const _0x4320c1=a0_0x5e8d70;try{const _0x17d7b6=await this[_0x4320c1(0x1c5)](_0x4b7ae3+_0x4320c1(0x202));if(_0x17d7b6&&_0x17d7b6[_0x4320c1(0x2a9)]){const _0xbdca9f=this[_0x4320c1(0x2ab)](_0x17d7b6[_0x4320c1(0x2a9)]);if(_0xbdca9f&&Array[_0x4320c1(0x2b3)](_0xbdca9f)){const _0x208167=[...new Set(_0xbdca9f[_0x4320c1(0x1c7)](_0x444a4d=>_0x444a4d['_calName'])[_0x4320c1(0x2e9)](Boolean))];return _0x208167[_0x4320c1(0x28c)]();}}return[];}catch(_0x5ea049){return this[_0x4320c1(0x20e)][_0x4320c1(0x21c)](_0x4320c1(0x2b1)+_0x5ea049[_0x4320c1(0x1e2)]),[];}}async[a0_0x5e8d70(0x1c8)](){const _0x40629d=a0_0x5e8d70;try{const _0xf2a27a=this[_0x40629d(0x22d)][_0x40629d(0x25b)]||[];let _0x30671f=![];for(const _0x414fb4 of _0xf2a27a){try{const _0x4a0713=await this[_0x40629d(0x1c5)](_0x414fb4);if(_0x4a0713&&(_0x4a0713['val']===!![]||_0x4a0713['val']===_0x40629d(0x1d7)||_0x4a0713['val']===0x1)){_0x30671f=!![];break;}}catch(_0x39b82a){}}return _0x30671f&&(this['exitTimer']&&(this['log'][_0x40629d(0x34e)](_0x40629d(0x366)),this['abortExitTimer']()),!this[_0x40629d(0x32b)]&&this[_0x40629d(0x287)]===SYSTEM_MODES['NORMAL']&&await this[_0x40629d(0x1f8)](!![])),_0x30671f;}catch(_0x38e8a1){return this['log'][_0x40629d(0x21c)](_0x40629d(0x20c)+_0x38e8a1['message']),![];}}[a0_0x5e8d70(0x1f4)](){const _0x13deef=a0_0x5e8d70;this[_0x13deef(0x286)](),this[_0x13deef(0x207)]=!![],this[_0x13deef(0x2ea)]=setTimeout(()=>{this['isGracePeriodActive']=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),this[_0x13deef(0x2d2)]=setTimeout(()=>{const _0x563f32=_0x13deef;this[_0x563f32(0x1f8)](![]),this[_0x563f32(0x2d2)]=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}['abortExitTimer'](){const _0x40f942=a0_0x5e8d70;if(this['exitTimer'])clearTimeout(this[_0x40f942(0x2d2)]);if(this[_0x40f942(0x2ea)])clearTimeout(this['exitGraceTimer']);this['exitTimer']=null,this['exitGraceTimer']=null,this[_0x40f942(0x207)]=![];}async[a0_0x5e8d70(0x1f8)](_0x4f1e4a){const _0x143726=a0_0x5e8d70;if(this[_0x143726(0x32b)]===_0x4f1e4a)return;this[_0x143726(0x32b)]=_0x4f1e4a,await this[_0x143726(0x258)](_0x143726(0x235),{'val':_0x4f1e4a,'ack':!![]});}async[a0_0x5e8d70(0x34a)](_0x2b33b8){const _0x4e89c4=a0_0x5e8d70;this['log'][_0x4e89c4(0x34e)](_0x4e89c4(0x264)+JSON[_0x4e89c4(0x272)](_0x2b33b8));}async[a0_0x5e8d70(0x245)](){const _0x4366d3=a0_0x5e8d70;if(!this[_0x4366d3(0x29f)]||!this[_0x4366d3(0x273)])return;const _0x4e6ca8=this[_0x4366d3(0x22d)][_0x4366d3(0x1d0)]||0xe;if(this[_0x4366d3(0x24c)][_0x4366d3(0x238)]<_0x4e6ca8+(this[_0x4366d3(0x22d)][_0x4366d3(0x361)]||0x7)){await this[_0x4366d3(0x258)](LTM_DP_DRIFT_STATUS,{'val':_0x4366d3(0x267),'ack':!![]});return;}const _0x95c8db=this[_0x4366d3(0x24c)][_0x4366d3(0x2d8)](-_0x4e6ca8),_0x299d35=this['dailyDigests'][_0x4366d3(0x2d8)](0x0,this[_0x4366d3(0x24c)][_0x4366d3(0x238)]-_0x4e6ca8),_0x518c77=_0x4366d3(0x29a)+JSON[_0x4366d3(0x272)](_0x299d35)+_0x4366d3(0x1d5)+JSON[_0x4366d3(0x272)](_0x95c8db);try{const _0x20785f=await this[_0x4366d3(0x273)][_0x4366d3(0x22f)](_0x518c77),_0x1de6d4=JSON['parse'](_0x20785f[_0x4366d3(0x222)]['text']()[_0x4366d3(0x339)](/```json|```/g,'')[_0x4366d3(0x22c)]());_0x1de6d4[_0x4366d3(0x2c8)]&&(await this['setStateAsync'](LTM_DP_DRIFT_STATUS,{'val':_0x1de6d4[_0x4366d3(0x2c8)],'ack':!![]}),await this[_0x4366d3(0x258)](LTM_DP_DRIFT_DETAILS,{'val':_0x1de6d4[_0x4366d3(0x2d9)],'ack':!![]}),await this[_0x4366d3(0x258)](LTM_DP_DRIFT_LAST_CHECK,{'val':Date[_0x4366d3(0x2af)](),'ack':!![]}));}catch(_0x47a954){}}['setupLtmScheduler'](){const _0x40cddd=a0_0x5e8d70;try{if(this[_0x40cddd(0x284)])this[_0x40cddd(0x284)][_0x40cddd(0x1ee)]();if(!this['isProVersion']){this[_0x40cddd(0x258)](LTM_DP_STATUS,{'val':_0x40cddd(0x1c2),'ack':!![]});return;}this[_0x40cddd(0x284)]=schedule[_0x40cddd(0x318)](LTM_SCHEDULE,()=>this[_0x40cddd(0x24a)]());}catch(_0x2293a1){this[_0x40cddd(0x20e)][_0x40cddd(0x21c)](_0x40cddd(0x22e)+_0x2293a1[_0x40cddd(0x1e2)]);}}[a0_0x5e8d70(0x1c4)](){const _0x39eac8=a0_0x5e8d70;try{if(this[_0x39eac8(0x31d)])this[_0x39eac8(0x31d)][_0x39eac8(0x1ee)]();this[_0x39eac8(0x31d)]=schedule[_0x39eac8(0x318)](MODE_RESET_SCHEDULE,async()=>{const _0x348f21=_0x39eac8;await this[_0x348f21(0x335)](),AUTO_RESET_MODES[_0x348f21(0x212)](this[_0x348f21(0x287)])&&await this['setStateAsync'](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x348f21(0x282)],'ack':![]});});}catch(_0x113c89){this[_0x39eac8(0x20e)][_0x39eac8(0x21c)](_0x39eac8(0x2c0)+_0x113c89[_0x39eac8(0x1e2)]);}}[a0_0x5e8d70(0x211)](){const _0x2f83b6=a0_0x5e8d70;try{if(this['driftAnalysisTimer'])clearInterval(this[_0x2f83b6(0x367)]);if(!this[_0x2f83b6(0x29f)])return;this['driftAnalysisTimer']=setInterval(()=>this[_0x2f83b6(0x245)](),(this['config'][_0x2f83b6(0x1b9)]||0x18)*0x36ee80),setTimeout(()=>this[_0x2f83b6(0x245)](),0x1388);}catch(_0x42dd79){this[_0x2f83b6(0x20e)][_0x2f83b6(0x21c)](_0x2f83b6(0x292)+_0x42dd79[_0x2f83b6(0x1e2)]);}}[a0_0x5e8d70(0x28b)](){const _0x4d25f0=a0_0x5e8d70;try{if(this['briefingJob'])this['briefingJob']['cancel']();if(!this[_0x4d25f0(0x22d)][_0x4d25f0(0x31e)])return;const _0xaebc03=(this[_0x4d25f0(0x22d)]['briefingTime']||'08:00')[_0x4d25f0(0x275)](':'),_0xcdbc4f=parseInt(_0xaebc03[0x0])||0x8,_0x3ba730=parseInt(_0xaebc03[0x1])||0x0,_0xdf5cca=_0x3ba730+'\x20'+_0xcdbc4f+_0x4d25f0(0x338);this[_0x4d25f0(0x20e)][_0x4d25f0(0x34e)]('Scheduling\x20Morning\x20Briefing\x20for\x20'+_0xcdbc4f+':'+(_0x3ba730<0xa?'0'+_0x3ba730:_0x3ba730)),this[_0x4d25f0(0x1ca)]=schedule[_0x4d25f0(0x318)](_0xdf5cca,()=>{const _0x29e3be=_0x4d25f0;this[_0x29e3be(0x308)]();});}catch(_0x5e7b45){this[_0x4d25f0(0x20e)][_0x4d25f0(0x21c)]('Briefing\x20Sched\x20Error:\x20'+_0x5e7b45[_0x4d25f0(0x1e2)]);}}async[a0_0x5e8d70(0x348)](_0x1c9b6e,_0x35380c=![],_0x18b6be=![]){const _0x57f5f0=a0_0x5e8d70;this['log'][_0x57f5f0(0x34e)]((_0x35380c?_0x57f5f0(0x2ae):'')+_0x57f5f0(0x2cc)+_0x1c9b6e+'\x22');const _0x4ac5a4=this[_0x57f5f0(0x22d)];let _0x5ef598=0x0;_0x4ac5a4['notifyTelegramEnabled']&&(await this['sendToAsync'](_0x4ac5a4[_0x57f5f0(0x2c1)],_0x57f5f0(0x236),{'text':_0x1c9b6e,'user':_0x4ac5a4[_0x57f5f0(0x2ac)]}),_0x5ef598++);if(_0x4ac5a4['notifyPushoverEnabled']){let _0x46ab03={'message':_0x1c9b6e,'title':_0x18b6be?_0x57f5f0(0x232):'Cogni-Living','priority':_0x18b6be?0x2:0x1,'device':_0x4ac5a4[_0x57f5f0(0x223)]};_0x18b6be&&(_0x46ab03['retry']=0x1e,_0x46ab03[_0x57f5f0(0x2fb)]=0xe10,_0x46ab03['sound']=_0x57f5f0(0x325)),await this[_0x57f5f0(0x220)](_0x4ac5a4[_0x57f5f0(0x314)],_0x57f5f0(0x236),_0x46ab03),_0x5ef598++;}return _0x4ac5a4['notifyEmailEnabled']&&(await this['sendToAsync'](_0x4ac5a4[_0x57f5f0(0x244)],_0x57f5f0(0x236),{'text':_0x1c9b6e,'to':_0x4ac5a4[_0x57f5f0(0x2cf)]}),_0x5ef598++),_0x5ef598;}}if(require[a0_0x5e8d70(0x2c4)]!==module)module[a0_0x5e8d70(0x26a)]=_0x33f63b=>new CogniLiving(_0x33f63b);else new CogniLiving();