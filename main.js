const a0_0x516467=a0_0x2cc7;(function(_0x1002b8,_0x17f92c){const _0x356913=a0_0x2cc7,_0x3e2fb0=_0x1002b8();while(!![]){try{const _0xb732bf=-parseInt(_0x356913(0x2cd))/0x1+-parseInt(_0x356913(0x28f))/0x2*(parseInt(_0x356913(0x1f3))/0x3)+-parseInt(_0x356913(0x23f))/0x4*(parseInt(_0x356913(0x332))/0x5)+-parseInt(_0x356913(0x222))/0x6+-parseInt(_0x356913(0x2a2))/0x7*(-parseInt(_0x356913(0x2aa))/0x8)+-parseInt(_0x356913(0x2a5))/0x9*(-parseInt(_0x356913(0x29d))/0xa)+-parseInt(_0x356913(0x39e))/0xb;if(_0xb732bf===_0x17f92c)break;else _0x3e2fb0['push'](_0x3e2fb0['shift']());}catch(_0x5760d2){_0x3e2fb0['push'](_0x3e2fb0['shift']());}}}(a0_0x4e66,0xc8756));const a0_0x4313a7=(function(){let _0x11d9ea=!![];return function(_0x3e0d68,_0x35594d){const _0x306472=_0x11d9ea?function(){const _0x21ff97=a0_0x2cc7;if(_0x35594d){const _0x3c90d8=_0x35594d[_0x21ff97(0x2c8)](_0x3e0d68,arguments);return _0x35594d=null,_0x3c90d8;}}:function(){};return _0x11d9ea=![],_0x306472;};}()),a0_0x54e54c=a0_0x4313a7(this,function(){const _0x54939a=a0_0x2cc7;return a0_0x54e54c[_0x54939a(0x30d)]()[_0x54939a(0x286)](_0x54939a(0x325))['toString']()[_0x54939a(0x1d7)](a0_0x54e54c)['search'](_0x54939a(0x325));});a0_0x54e54c();function a0_0x2cc7(_0xd80691,_0x4ed94f){const _0x56acff=a0_0x4e66();return a0_0x2cc7=function(_0x54e54c,_0x4313a7){_0x54e54c=_0x54e54c-0x1c6;let _0x4e66f1=_0x56acff[_0x54e54c];return _0x4e66f1;},a0_0x2cc7(_0xd80691,_0x4ed94f);}function a0_0x4e66(){const _0x4ef4ca=['\x0a\x20\x20\x20\x20\x20\x20\x20\x20EVENTS:\x20','\x20raw\x20events...','toISOString','mac\x20address','summary','scriptProblem','occupancy','FAULT','Raw\x20Log','parse','onUnload','notifyPushoverRecipient','PRO-','\x20sent','find','precip','analysis.analysisHistory','description','notifyEmailRecipient','smoke','link_quality','firmware','common','WETTER:\x20Unbekannt','isGracePeriodActive','setupLtmScheduler','capabilities','unload','Deviation','temperature','Health\x20Notes','System\x20Mode','sendTo','indicator.alarm','haust√ºr','cogni-living','\x20(EMERGENCY)','enum.functions.*','bind','Adapter','sensor.door','saveRawEventLog','productname','/100\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Aktivit√§t\x20seit\x2004:00\x20Uhr:\x20','catch','replace','slice','modelid','.Summary.Current','message','checkSystemObjects','sendToAsync','\x20*\x20*\x20*','\x0aFEEDBACK:\x0a','push','analysis.history_debug_02','boolean','weather','Flur','runGeminiAnalysis','node-schedule','.\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20KONTEXT\x20(Wohnen):\x20','ROLLE:\x20Data\x20Scientist.\x20VERGLEICHE:\x20Dataset\x20A\x20(Recent)\x20vs\x20B\x20(Established).\x20ZIEL:\x20Erkenne\x20Drift.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aB\x20(LTB):\x0a','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','Analysiere\x20Tag...','isPresent','Licht','weatherunderground.','LTM.driftAnalysis.baselineDrift','08:00','User\x20Feedback:\x20Alarm\x20\x22','SABOTAGE','geminiModel','Trigger\x20Digest','uniqueid','presence','.forecast.current.state','comfort','notifyWhatsappEnabled','analysis.history_debug_00','analysis.automation','json','loadDailyDigests','Daily\x20Digest\x20created\x20successfully.','N/A\x20(Learning)','daswetter.0','info','health','livingContext','alertReason','Fokus\x20auf\x20Familienroutinen,\x20Kindersicherheit\x20und\x20allgemeines\x20Haushaltsmanagement.','values','accuweather.0','N/A','response','Schalter/Licht','genAI','value.temperature','patternDetected','TEST-PRO-KEY','loadRawEventLog','last_seen','LOWBAT','12287176NBdNGO','CRITICAL\x20WARNING:\x20No\x20sensor\x20activity\x20detected\x20for\x20','abortExitTimer','.\x0a\x20\x20\x20\x20\x20\x20\x20\x20EXTERNER\x20KONTEXT\x20(WICHTIG):\x20','sensor.window','notifyWhatsappInstance','notifyTelegramInstance','analysis.history_debug_04','No\x20Key','onStateChange','analysisTimer','Nein','Automation\x20Proposals','analysis.lastResult','wohnungst√ºr','none','history.','ltmStbWindowDays','baselineDrift','checkWifiPresence','notifySignalRecipient','delObjectAsync','getEnums','exitGraceTimer','constructor','Action','val','[TEST]\x20','exitTimer','LTM.driftAnalysis','system.config','unknown','licht','state','Logbook','Party','createAllObjects','Comfort\x20Summary','automationProposal','flur','loadSystemMode','devices','subscribeStates','checkLtmDriftObjects','lampe','ALARM','sound','Fokus\x20auf\x20Maximierung\x20von\x20Komfort,\x20Automatisierungseffizienz\x20und\x20Energieeinsparung.','ltmDriftCheckIntervalHours','Activity\x20Summary','WEEK_PROGRAM','setState','478566QgFCCw','loadHistoryFromState','expire','PROCESS','AES_KEY','getSystemUUID','RSSI','Gast','driftAnalysisTimer','trim','Drift\x20Status','testNotification','logDuplicates','notifySignalEnabled','de-DE','string','notifyEmailEnabled','timestamp','material.','Badezimmer','@google/generative-ai','pop','\x20min).\x20Watchdog\x20Limit:\x20','some','_score','Gemini\x20Init\x20Error:\x20','LTM.rawEventLog','.data.table','.data.text','weatherunderground.0','scanDevices','@iobroker/adapter-core','KALENDER\x20(Termine):\x20','icons-mfd.','lastAlertState','map','members','forecast','events.history_debug_00','Last\x20raw\x20event','Subscribing\x20to\x20','includes','log','t√ºr','analysis.comfortSuggestion','feedbackHistory','join','739938MlMoPO','shutter_contact','Event\x20History','Starting\x20Smart\x20Scan\x20with\x20filters:\x20','manufacturer','events.history_debug_01','Comfort\x20Suggestion','ltmLtbWindowDays','siren','triggerDailyDigest','deviationFromBaseline','Wohnzimmer','.\x20ORT:\x20','getForeignObjectAsync','inactivityThresholdHours','startExitTimer','uuid','events.history_debug_03','briefingEnabled','notifyEmailInstance','suggestedAction','apiKey','number','guest','analysis.health.restlessness','UNREACH','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20OUTPUT:\x20Nur\x20der\x20Nachrichtentext\x20(kein\x20JSON).\x20Integriere\x20den\x20Kontext\x20(Wetter/Kalender)\x20nur\x20wenn\x20relevant.','effect','enum','40epxkXu','lastCheck','cogni-living\x20adapter\x20starting\x20(v','Success','Processing\x20Status','\x0a\x20\x20\x20\x20\x20\x20\x20\x20INPUT:\x20','‚ö†Ô∏è\x20Alarm','normal','stringify','sendNotification','analysis.health.notes','sensor.motion','name','analysisHistory','updateAnalysisHistory','activityLevel','analysis.triggerBriefing','griff','error','models/gemini-flash-latest','useWeather','scanForDevices','LTM.triggerDailyDigest','ack','yr.','city','temperatur','licenseKey','\x0a!!!\x20EXTERNAL\x20SYSTEM\x20WARNING\x20!!!\x0a','vacation','aiPersona','isProVersion','VACATION','garten','NORMAL','system.meta.uuid','ERROR','Last\x20Check','notifySignalInstance','callback','send','accuweather','WiFi\x20Presence\x20detected\x20->\x20Aborting\x20Exit\x20Timer.\x20User\x20is\x20present.','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20DATEN:\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Schlafqualit√§t\x20letzte\x20Nacht:\x20','.\x20PERSONA:\x20','version','test','write','\x0a\x20\x20\x20\x20\x20\x20\x20\x20ZUSATZ-KONTEXT:\x20','reachable','Daily\x20Digests','events.history_debug_04','Pattern\x20Detected','bewegung','useCalendar','button','accuweather.','flot.','dailyDigests','k√ºche','Presence\x20Status','rawEventLog','\x22\x20was\x20','isArray','command','analysis.alertReason','scheduleJob','\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20AUFGABE:\x20Analysiere\x20die\x20Events\x20auf\x20Aktivit√§t,\x20Komfort\x20und\x20GESUNDHEIT.\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20Nutze\x20den\x20EXTERNEN\x20KONTEXT\x20(Wetter/Kalender)\x20um\x20Fehlalarme\x20zu\x20vermeiden\x20(z.B.\x20Regen\x20=\x20keine\x20Gartenaktivit√§t,\x20Termin\x20=\x20Abwesend).\x0a\x20\x20\x20\x20\x20\x20\x20\x20SCHEMA:\x20{\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22activity\x22:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22deviationFromBaseline\x22:\x20\x22string\x22,\x20\x22isAlert\x22:\x20bool,\x20\x22isEmergency\x22:\x20bool,\x20\x22alertReason\x22:\x20\x22string\x22\x20},\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22comfort\x22:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22suggestion\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22patternDetected\x22:\x20bool,\x20\x22description\x22:\x20\x22string\x22,\x20\x22suggestedAction\x22:\x20\x22string\x22\x20}\x20},\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22health\x22:\x20{\x20\x22sleepScore\x22:\x20number\x20(0-100),\x20\x22restlessness\x22:\x20\x22none|low|medium|high\x22,\x20\x22notes\x22:\x20\x22string\x22\x20}\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20}','\x0a\x0aA\x20(STB):\x0a','sort','analysis.isAlert','search','lights','analysis.health.sleepScore','Gemini\x20AI\x20initialized.','diele','hue','analysis.history_debug_01','sensorLastValues','onMessage','2QAQCPP','Fenster/T√ºr','createDailyDigest','runAutopilot','Restlessness\x20Level','ROLLE:\x20Data\x20Analyst.\x20AUFGABE:\x20Fasse\x20den\x20heutigen\x20Tag\x20basierend\x20auf\x20den\x20Sensor-Logs\x20zusammen.\x0a\x20\x20\x20\x20\x20\x20\x20\x20PERSONA:\x20','enum.rooms.*','submitFeedback','updateBaselineStatus','getLtmData','events.history_debug_02','pressure','status','bad','1888710pdvfuF','currentSystemMode','admin.','sleepScore','STICKY_UNREACH','28oiVvjW','isAlert','value.health','72OMHiUu','setStateAsync','Alert\x20Reason','systemConfig','VIRTUAL_CHANNEL','2723800Iqinsd','Schlafzimmer','setPresence','generic','rauch','checkLtmObjects','system.isPresent','startsWith','Bewegung','analysis.history_debug_03','geminiApiKey','notes','analysis.automation.suggestedAction','history','detectionState','eventHistory','toLowerCase','Fehler:\x20','location','cancel','notifyPushoverInstance','LTM.driftAnalysis.driftDetails','toFixed','colormode','WORKING','LTM.dailyDigests','Drift\x20Analysis','Urlaub','Zu\x20wenig\x20Daten\x20f√ºr\x20Daily\x20Digest.','system.','apply','onReady','üö®üö®\x20NOTFALL','type','LTM.processingStatus','368099vVciic','config','CONNECTION','modeResetJob','briefingJob','isEmergency','text','wind','Cogni-Living\x20Alert','analysis.comfortSummary','rating','checkLicense','Normal','system.mode','COMBINED_PARAMETER','indicator','role','getWeatherContext','native','LTM.driftAnalysis.lastCheck','latitude','PRIORIT√ÑT:\x20Sicherheit.\x20Erkenne\x20Eindringlinge,\x20ungew√∂hnliche\x20Anwesenheit.','setHours','from','driftDetails','level.dimmer','Last\x20Result','Temperatur','toLocaleString','activity','Garten','analysis.automation.description','saveDailyDigests','PARTY','sendMorningBriefing','filter','calendarInstance','signal','now','0\x204\x20*\x20*\x20*','getForeignObjectsAsync','events.lastEvent','update','openweathermap','\x20hours.\x20The\x20resident\x20might\x20be\x20incapacitated.\x20Risk\x20level:\x20HIGH.','temp','Sleep\x20Score\x20(0-100)','getCalendarContext','INSTALL_TEST','exports','indicator.alarm.fire','wohn','presenceDevices','setObjectNotExistsAsync','Feedback\x20Log','notifyTelegramRecipient','object','party','longitude','splice','alert','getForeignStateAsync','runBaselineDriftAnalysis','length','toString','\x20sensors...','last\x20action','Missing\x20data','analysis.automation.patternDetected','setupModeResetScheduler','getStateAsync','date','events.history','Morning\x20Briefing\x20sent.','ical.0','processSensorEvent','ROLLE:\x20F√ºrsorglicher\x20Assistent.\x0a\x20\x20\x20\x20\x20\x20\x20\x20AUFGABE:\x20Schreibe\x20eine\x20kurze,\x20beruhigende\x20\x22Guten\x20Morgen\x22-Nachricht\x20an\x20die\x20Angeh√∂rigen/Bewohner.\x0a\x20\x20\x20\x20\x20\x20\x20\x20TON:\x20Freundlich,\x20professionell,\x20kurz.\x0a\x20\x20\x20\x20\x20\x20\x20\x20PERSONA\x20(Fokus):\x20','systemUUID','channel','uuid-not-found','generateContent','LTM','scriptEnabled','ltmJob','sat','analysis.isEmergency','daswetter.','DUTYCYCLE','(((.+)+)+)+$','weatherInstance','\x0a!!!\x20END\x20WARNING\x20!!!\x0a','doors','WETTER\x20(Drau√üen):\x20','üö®\x20EMERGENCY','2-digit','suggestion','LTM.baselineStatus','Analysiere\x20ausgewogen\x20auf\x20Gesundheit,\x20Sicherheit\x20und\x20Komfort.','connection','AI\x20Alert\x20Status','analysis.activitySummary','141915ckeaQi','level','Generating\x20Morning\x20Briefing...','extendObjectAsync','GUEST'];a0_0x4e66=function(){return _0x4ef4ca;};return a0_0x4e66();}'use strict';const utils=require(a0_0x516467(0x212)),{GoogleGenerativeAI}=require(a0_0x516467(0x207)),schedule=require(a0_0x516467(0x373)),HISTORY_MAX_SIZE=0x32,ANALYSIS_HISTORY_MAX_SIZE=0x64,RAW_LOG_MAX_SIZE=0x5dc,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL=a0_0x516467(0x252),LTM_SCHEDULE='0\x203\x20*\x20*\x20*',MODE_RESET_SCHEDULE=a0_0x516467(0x2f4),LTM_DP_RAW_LOG=a0_0x516467(0x20d),LTM_DP_DAILY_DIGESTS=a0_0x516467(0x2c3),LTM_DP_STATUS=a0_0x516467(0x2cc),LTM_DP_TRIGGER_DIGEST=a0_0x516467(0x255),LTM_DP_BASELINE_STATUS=a0_0x516467(0x32d),LTM_DP_DRIFT_CHANNEL=a0_0x516467(0x1dc),LTM_DP_DRIFT_STATUS=a0_0x516467(0x37b),LTM_DP_DRIFT_DETAILS=a0_0x516467(0x2bf),LTM_DP_DRIFT_LAST_CHECK=a0_0x516467(0x2e0),SYSTEM_DP_MODE='system.mode',SYSTEM_MODES={'NORMAL':a0_0x516467(0x246),'VACATION':a0_0x516467(0x25c),'PARTY':a0_0x516467(0x306),'GUEST':a0_0x516467(0x239)},AUTO_RESET_MODES=[SYSTEM_MODES[a0_0x516467(0x2ee)],SYSTEM_MODES['GUEST']],EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,PERSONA_MAPPING={'generic':a0_0x516467(0x32e),'senior_aal':'PRIORIT√ÑT:\x20Gesundheit\x20und\x20Sicherheit\x20f√ºr\x20Senioren\x20(AAL).\x20Erkenne\x20Inaktivit√§t,\x20potenzielle\x20St√ºrze\x20(indirekt),\x20Schlafunterbrechungen\x20und\x20n√§chtliche\x20Unruhe.','family':a0_0x516467(0x391),'single_comfort':a0_0x516467(0x1ee),'security':a0_0x516467(0x2e2)};class CogniLiving extends utils[a0_0x516467(0x35e)]{constructor(_0x22c704){const _0x31adf5=a0_0x516467;super({..._0x22c704,'name':_0x31adf5(0x35a)}),this[_0x31adf5(0x2b9)]=[],this[_0x31adf5(0x24c)]=[],this[_0x31adf5(0x220)]=[],this[_0x31adf5(0x27c)]=[],this[_0x31adf5(0x279)]=[],this[_0x31adf5(0x28d)]={},this[_0x31adf5(0x2a8)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x31adf5(0x378)]=!![],this[_0x31adf5(0x1db)]=null,this[_0x31adf5(0x1d6)]=null,this[_0x31adf5(0x34f)]=![],this[_0x31adf5(0x397)]=null,this[_0x31adf5(0x37f)]=null,this[_0x31adf5(0x29e)]=SYSTEM_MODES['NORMAL'],this[_0x31adf5(0x25e)]=![],this['lastAlertState']=![],this[_0x31adf5(0x31a)]=_0x31adf5(0x1de),this[_0x31adf5(0x1c9)]=null,this[_0x31adf5(0x320)]=null,this['modeResetJob']=null,this['driftAnalysisTimer']=null,this[_0x31adf5(0x2d1)]=null,this['on']('ready',this[_0x31adf5(0x2c9)][_0x31adf5(0x35d)](this)),this['on']('stateChange',this[_0x31adf5(0x1c8)][_0x31adf5(0x35d)](this)),this['on'](_0x31adf5(0x352),this[_0x31adf5(0x341)][_0x31adf5(0x35d)](this)),this['on'](_0x31adf5(0x368),this[_0x31adf5(0x28e)][_0x31adf5(0x35d)](this));}async['onReady'](){const _0x1abd63=a0_0x516467;this[_0x1abd63(0x21d)]['info'](_0x1abd63(0x241)+this[_0x1abd63(0x26c)]+')');const _0x50b23a=[_0x1abd63(0x386),_0x1abd63(0x28c),_0x1abd63(0x36e),_0x1abd63(0x2b3),_0x1abd63(0x1c6),_0x1abd63(0x219),_0x1abd63(0x227),_0x1abd63(0x299),_0x1abd63(0x233),_0x1abd63(0x272)];for(const _0x4e7739 of _0x50b23a){try{const _0x114b90=await this['getObjectAsync'](_0x4e7739);_0x114b90&&await this[_0x1abd63(0x1d4)](_0x4e7739);}catch(_0x4e0760){}}this[_0x1abd63(0x2ce)][_0x1abd63(0x25a)]=this[_0x1abd63(0x2ce)][_0x1abd63(0x25a)]||'',this[_0x1abd63(0x25e)]=await this[_0x1abd63(0x2d8)](this[_0x1abd63(0x2ce)]['licenseKey']);if(!this[_0x1abd63(0x2ce)][_0x1abd63(0x230)]||this[_0x1abd63(0x2ce)][_0x1abd63(0x230)]<0.1)this[_0x1abd63(0x2ce)][_0x1abd63(0x230)]=0xc;await this['loadHistoryFromState']();try{const _0x55a799=await this['getForeignObjectAsync'](_0x1abd63(0x1dd));_0x55a799&&_0x55a799[_0x1abd63(0x34d)]&&(this[_0x1abd63(0x2a8)]={'latitude':_0x55a799['common'][_0x1abd63(0x2e1)]||0x0,'longitude':_0x55a799[_0x1abd63(0x34d)][_0x1abd63(0x307)]||0x0,'city':_0x55a799['common'][_0x1abd63(0x258)]||''});}catch(_0x4758f1){}if(this[_0x1abd63(0x2ce)][_0x1abd63(0x2b4)])try{this[_0x1abd63(0x397)]=new GoogleGenerativeAI(this[_0x1abd63(0x2ce)][_0x1abd63(0x2b4)]),this[_0x1abd63(0x37f)]=this[_0x1abd63(0x397)]['getGenerativeModel']({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':'application/json'}}),this['log'][_0x1abd63(0x38d)](_0x1abd63(0x289));}catch(_0x2ee60a){this[_0x1abd63(0x21d)][_0x1abd63(0x251)](_0x1abd63(0x20c)+_0x2ee60a[_0x1abd63(0x368)]);}await this[_0x1abd63(0x1e3)](),await this[_0x1abd63(0x1e7)](),await this[_0x1abd63(0x39b)](),await this[_0x1abd63(0x389)](),this[_0x1abd63(0x1e9)]('analysis.trigger'),this[_0x1abd63(0x1e9)](LTM_DP_TRIGGER_DIGEST),this['subscribeStates'](_0x1abd63(0x2da)),this[_0x1abd63(0x1e9)](_0x1abd63(0x24f));const _0x460f91=this[_0x1abd63(0x2ce)][_0x1abd63(0x1e8)];if(_0x460f91&&_0x460f91[_0x1abd63(0x30c)]>0x0){this['log']['info'](_0x1abd63(0x21b)+_0x460f91[_0x1abd63(0x30c)]+_0x1abd63(0x30e));for(const _0x2268c9 of _0x460f91){if(_0x2268c9['id']){await this['subscribeForeignStatesAsync'](_0x2268c9['id']);try{const _0x3c242b=await this['getForeignStateAsync'](_0x2268c9['id']);if(_0x3c242b)this[_0x1abd63(0x28d)][_0x2268c9['id']]=_0x3c242b[_0x1abd63(0x1d9)];}catch(_0x268e15){}}}}const _0x460388=this[_0x1abd63(0x2ce)][_0x1abd63(0x301)]||[];if(_0x460388['length']>0x0){this[_0x1abd63(0x21d)][_0x1abd63(0x38d)]('Subscribing\x20to\x20'+_0x460388[_0x1abd63(0x30c)]+'\x20presence\x20devices...');for(const _0x592ac5 of _0x460388){await this['subscribeForeignStatesAsync'](_0x592ac5);}await this[_0x1abd63(0x1d2)]();}if(this[_0x1abd63(0x1c9)])clearInterval(this[_0x1abd63(0x1c9)]);const _0x52affa=this[_0x1abd63(0x2ce)]['analysisInterval']||0xf;_0x52affa>0x0&&(this['log'][_0x1abd63(0x38d)]('Starting\x20Autopilot\x20('+_0x52affa+_0x1abd63(0x209)+this[_0x1abd63(0x2ce)][_0x1abd63(0x230)]+'h.'),this[_0x1abd63(0x1c9)]=setInterval(()=>this['runAutopilot'](),_0x52affa*0x3c*0x3e8)),this[_0x1abd63(0x350)](),this[_0x1abd63(0x312)](),this['setupDriftAnalysisScheduler'](),this['setupBriefingScheduler']();}async['getWeatherContext'](){const _0x51dee3=a0_0x516467;if(!this[_0x51dee3(0x2ce)][_0x51dee3(0x253)])return'';let _0xb4df6d='';if(this[_0x51dee3(0x2ce)][_0x51dee3(0x326)])try{if(this[_0x51dee3(0x2ce)][_0x51dee3(0x326)]['includes'](_0x51dee3(0x268))){const _0x58bcce=await this[_0x51dee3(0x30a)](this[_0x51dee3(0x2ce)][_0x51dee3(0x326)]+'.Summary.Current');if(_0x58bcce&&_0x58bcce['val'])_0xb4df6d=_0x58bcce['val'];}else{if(this[_0x51dee3(0x2ce)]['weatherInstance'][_0x51dee3(0x21c)]('daswetter')){const _0x361ac4=await this[_0x51dee3(0x30a)](this[_0x51dee3(0x2ce)][_0x51dee3(0x326)]+'.NextHours.Location_1.Day_1.current.symbol_desc');if(_0x361ac4&&_0x361ac4['val'])_0xb4df6d=_0x361ac4[_0x51dee3(0x1d9)];}else{if(this[_0x51dee3(0x2ce)][_0x51dee3(0x326)]['includes'](_0x51dee3(0x2f8))){const _0x25a6db=await this[_0x51dee3(0x30a)](this[_0x51dee3(0x2ce)]['weatherInstance']+_0x51dee3(0x383));if(_0x25a6db&&_0x25a6db['val'])_0xb4df6d=_0x25a6db[_0x51dee3(0x1d9)];}}}}catch(_0x278890){}if(!_0xb4df6d){const _0x27e88f=[_0x51dee3(0x393),_0x51dee3(0x38c),_0x51dee3(0x210),'openweathermap.0'];for(const _0xcbe363 of _0x27e88f){try{const _0x481714=await this[_0x51dee3(0x22f)](_0xcbe363);if(_0x481714){if(_0xcbe363[_0x51dee3(0x21c)](_0x51dee3(0x268))){const _0x44fa14=await this[_0x51dee3(0x30a)](_0xcbe363+_0x51dee3(0x367));if(_0x44fa14){_0xb4df6d=_0x44fa14[_0x51dee3(0x1d9)];break;}}}}catch(_0x23d947){}}}return _0xb4df6d?_0x51dee3(0x329)+_0xb4df6d:_0x51dee3(0x34e);}async[a0_0x516467(0x2fc)](){const _0x3fe032=a0_0x516467;if(!this['config'][_0x3fe032(0x275)])return'';let _0x5b8e84='',_0x2b7c76=this[_0x3fe032(0x2ce)][_0x3fe032(0x2f1)]||_0x3fe032(0x317);try{const _0xd289a6=await this['getForeignStateAsync'](_0x2b7c76+_0x3fe032(0x20f));if(_0xd289a6&&_0xd289a6[_0x3fe032(0x1d9)])_0x5b8e84=_0xd289a6[_0x3fe032(0x1d9)];else{const _0x476f51=await this['getForeignStateAsync'](_0x2b7c76+_0x3fe032(0x20e));_0x476f51&&_0x476f51[_0x3fe032(0x1d9)]&&Array[_0x3fe032(0x27e)](_0x476f51[_0x3fe032(0x1d9)])&&_0x476f51[_0x3fe032(0x1d9)][_0x3fe032(0x30c)]>0x0&&(_0x5b8e84=_0x476f51[_0x3fe032(0x1d9)]['slice'](0x0,0x3)[_0x3fe032(0x216)](_0x573394=>_0x573394[_0x3fe032(0x314)]+'\x20'+_0x573394['event'])['join'](',\x20'));}}catch(_0x416e16){}return _0x5b8e84?_0x3fe032(0x213)+_0x5b8e84:'KALENDER:\x20Keine\x20Termine';}async[a0_0x516467(0x254)](_0x2eb420={}){const _0x58b20d=a0_0x516467;this['log'][_0x58b20d(0x38d)](_0x58b20d(0x225)+JSON[_0x58b20d(0x247)](_0x2eb420));const _0x239bf1=[],_0x2b9f19=_0x2eb420['motion']!==![],_0x2d7506=_0x2eb420[_0x58b20d(0x328)]!==![],_0x202d3d=_0x2eb420[_0x58b20d(0x287)]!==![],_0x4cabbf=_0x2eb420[_0x58b20d(0x354)]===!![],_0x216c0b=_0x2eb420[_0x58b20d(0x370)]===!![],_0x480b15=_0x2eb420['selectedFunctionIds']||[],_0x201011=await this[_0x58b20d(0x2f5)](_0x58b20d(0x295),'enum'),_0x56586c=await this[_0x58b20d(0x2f5)]('enum.functions.*','enum'),_0x236331={},_0x2fc688={},_0x4d0c7e={},_0x470f17=(_0x142180,_0x513fdf,_0x12b59f=![])=>{const _0x44b348=_0x58b20d;if(!_0x142180)return;for(const _0x239142 in _0x142180){const _0x2bbbec=_0x142180[_0x239142];if(_0x2bbbec&&_0x2bbbec['common']&&_0x2bbbec[_0x44b348(0x34d)]['members']){const _0x29e8c9=(typeof _0x2bbbec[_0x44b348(0x34d)][_0x44b348(0x24b)]===_0x44b348(0x305)?_0x2bbbec[_0x44b348(0x34d)][_0x44b348(0x24b)]['de']:_0x2bbbec['common']['name'])||_0x2bbbec[_0x44b348(0x34d)][_0x44b348(0x24b)];if(_0x12b59f)_0x4d0c7e[_0x239142]=_0x29e8c9;for(const _0x23a39d of _0x2bbbec[_0x44b348(0x34d)][_0x44b348(0x217)]){if(_0x12b59f){if(!_0x513fdf[_0x23a39d])_0x513fdf[_0x23a39d]=[];_0x513fdf[_0x23a39d][_0x44b348(0x36d)](_0x239142);}else _0x513fdf[_0x23a39d]=_0x29e8c9;}}}};_0x470f17(_0x201011,_0x236331),_0x470f17(_0x56586c,_0x2fc688,!![]);const _0x28f7c6=await this[_0x58b20d(0x2f5)]('*',_0x58b20d(0x1e0)),_0x25e6a3=[_0x58b20d(0x23b),_0x58b20d(0x39d),_0x58b20d(0x1f9),_0x58b20d(0x263),_0x58b20d(0x33e),_0x58b20d(0x37e),_0x58b20d(0x1ec),'CONFIG_PENDING',_0x58b20d(0x324),_0x58b20d(0x2c2),'DIRECTION',_0x58b20d(0x2a1),'OPERATING_VOLTAGE',_0x58b20d(0x2a9),_0x58b20d(0x2fd),_0x58b20d(0x2db),_0x58b20d(0x1f1),'ON_TIME','SECTION','ERROR_CODE',_0x58b20d(0x1f6),_0x58b20d(0x1f7),_0x58b20d(0x2cf),_0x58b20d(0x270),_0x58b20d(0x34b),'battery',_0x58b20d(0x2f7),_0x58b20d(0x34c),'version',_0x58b20d(0x32f),_0x58b20d(0x38d),_0x58b20d(0x2f2),_0x58b20d(0x39c),_0x58b20d(0x30f),'archetype',_0x58b20d(0x309),'mode',_0x58b20d(0x2c1),_0x58b20d(0x23d),'xy','ct',_0x58b20d(0x28b),_0x58b20d(0x321),_0x58b20d(0x361),_0x58b20d(0x226),_0x58b20d(0x366),_0x58b20d(0x381),_0x58b20d(0x27f),_0x58b20d(0x33a),'description',_0x58b20d(0x351),'process',_0x58b20d(0x31f),_0x58b20d(0x33c),'javascript.0.script',_0x58b20d(0x2b8),'summary','icon',_0x58b20d(0x2b7),_0x58b20d(0x218),_0x58b20d(0x38d),_0x58b20d(0x388)];if(!_0x216c0b)_0x25e6a3[_0x58b20d(0x36d)]('wetter',_0x58b20d(0x370),_0x58b20d(0x2d4),_0x58b20d(0x29a),'uv','rain',_0x58b20d(0x346));const _0x27f5a0=[_0x58b20d(0x2c7),_0x58b20d(0x29f),'info.','vis.',_0x58b20d(0x1cf),_0x58b20d(0x205),_0x58b20d(0x214),_0x58b20d(0x278)];if(!_0x216c0b)_0x27f5a0[_0x58b20d(0x36d)](_0x58b20d(0x323),_0x58b20d(0x37a),_0x58b20d(0x277),_0x58b20d(0x257),'openweathermap.');const _0x5f22f6=(_0x404c09,_0x5cc586,_0x13feee=![])=>{const _0x5f0f10=_0x58b20d,_0x50aff9=_0x404c09['split']('.');if(_0x5cc586[_0x404c09])return _0x5cc586[_0x404c09];if(_0x50aff9['length']>0x2&&_0x5cc586[_0x50aff9[_0x5f0f10(0x365)](0x0,-0x1)['join']('.')])return _0x5cc586[_0x50aff9[_0x5f0f10(0x365)](0x0,-0x1)[_0x5f0f10(0x221)]('.')];if(_0x50aff9[_0x5f0f10(0x30c)]>0x3&&_0x5cc586[_0x50aff9['slice'](0x0,-0x2)[_0x5f0f10(0x221)]('.')])return _0x5cc586[_0x50aff9[_0x5f0f10(0x365)](0x0,-0x2)[_0x5f0f10(0x221)]('.')];return _0x13feee?[]:null;};for(const _0x104da0 in _0x28f7c6){const _0x1fc5c9=_0x28f7c6[_0x104da0];if(!_0x1fc5c9||!_0x1fc5c9['common'])continue;if(_0x27f5a0['some'](_0x3b2177=>_0x104da0['startsWith'](_0x3b2177)))continue;const _0x586870=_0x1fc5c9[_0x58b20d(0x34d)][_0x58b20d(0x2dd)]||'',_0x440739=(_0x1fc5c9[_0x58b20d(0x34d)][_0x58b20d(0x24b)]&&typeof _0x1fc5c9[_0x58b20d(0x34d)][_0x58b20d(0x24b)]===_0x58b20d(0x305)?_0x1fc5c9['common'][_0x58b20d(0x24b)]['de']:_0x1fc5c9[_0x58b20d(0x34d)]['name'])||'',_0x7ea463=_0x440739?_0x440739[_0x58b20d(0x2ba)]():'',_0x41f8c8=_0x104da0[_0x58b20d(0x2ba)](),_0x4cfdca=_0x5f22f6(_0x104da0,_0x236331),_0x1d943b=_0x5f22f6(_0x104da0,_0x2fc688,!![]);let _0x17e856=null,_0x30e6d7=![];if(_0x1d943b&&_0x1d943b[_0x58b20d(0x30c)]>0x0){const _0x47969e=_0x1d943b[_0x58b20d(0x345)](_0x333a2f=>_0x480b15[_0x58b20d(0x21c)](_0x333a2f));if(_0x47969e){_0x30e6d7=!![];const _0x3673b9=_0x4d0c7e[_0x47969e];if(_0x41f8c8[_0x58b20d(0x21c)](_0x58b20d(0x382))||_0x41f8c8['includes']('motion'))_0x17e856=_0x58b20d(0x2b2);else{if(_0x41f8c8[_0x58b20d(0x21c)](_0x58b20d(0x34a))||_0x41f8c8['includes']('fire')||_0x7ea463['includes'](_0x58b20d(0x2ae)))_0x17e856='Rauchmelder';else{if(_0x41f8c8['includes']('state')||_0x41f8c8[_0x58b20d(0x21c)](_0x58b20d(0x333))||_0x41f8c8[_0x58b20d(0x21c)]('on'))_0x17e856=_0x58b20d(0x396);else _0x17e856=_0x3673b9;}}}}if(!_0x30e6d7&&!_0x216c0b){if(_0x25e6a3[_0x58b20d(0x20a)](_0x564607=>_0x7ea463[_0x58b20d(0x21c)](_0x564607)||_0x104da0['toUpperCase']()[_0x58b20d(0x21c)](_0x564607)))continue;}if(!_0x17e856&&_0x2b9f19){if(_0x586870['includes'](_0x58b20d(0x24a))||_0x586870['includes'](_0x58b20d(0x33d))||_0x7ea463[_0x58b20d(0x21c)](_0x58b20d(0x274))||_0x7ea463[_0x58b20d(0x21c)]('pr√§senz'))_0x17e856=_0x58b20d(0x2b2);}!_0x17e856&&_0x2d7506&&((_0x41f8c8[_0x58b20d(0x21c)](_0x58b20d(0x223))||_0x586870['includes'](_0x58b20d(0x35f))||_0x586870['includes'](_0x58b20d(0x3a2))||(_0x7ea463[_0x58b20d(0x21c)]('fenster')||_0x7ea463['includes'](_0x58b20d(0x21e)))&&!_0x7ea463[_0x58b20d(0x21c)](_0x58b20d(0x2fa))&&!_0x7ea463[_0x58b20d(0x21c)](_0x58b20d(0x250))&&(_0x1fc5c9['common'][_0x58b20d(0x2cb)]===_0x58b20d(0x36f)||_0x1fc5c9[_0x58b20d(0x34d)][_0x58b20d(0x2cb)]===_0x58b20d(0x238)))&&(_0x17e856='Fenster/T√ºr'));if(!_0x17e856&&_0x202d3d){if((_0x586870[_0x58b20d(0x21c)]('switch.light')||_0x586870[_0x58b20d(0x21c)](_0x58b20d(0x2e6))||_0x7ea463['includes'](_0x58b20d(0x1df))||_0x7ea463[_0x58b20d(0x21c)](_0x58b20d(0x1eb)))&&_0x1fc5c9[_0x58b20d(0x34d)][_0x58b20d(0x26e)])_0x17e856=_0x58b20d(0x379);}if(!_0x17e856&&_0x4cabbf){if(_0x586870[_0x58b20d(0x21c)](_0x58b20d(0x398))||_0x586870[_0x58b20d(0x21c)]('value.humidity')||_0x7ea463[_0x58b20d(0x21c)](_0x58b20d(0x259)))_0x17e856=_0x58b20d(0x2e8);}if(_0x17e856){let _0x505478=_0x4cfdca||'';if(!_0x505478){if(_0x7ea463[_0x58b20d(0x21c)](_0x58b20d(0x29c)))_0x505478=_0x58b20d(0x206);else{if(_0x7ea463[_0x58b20d(0x21c)](_0x58b20d(0x27a)))_0x505478='K√ºche';else{if(_0x7ea463[_0x58b20d(0x21c)](_0x58b20d(0x300)))_0x505478=_0x58b20d(0x22d);else{if(_0x7ea463[_0x58b20d(0x21c)]('schlaf'))_0x505478=_0x58b20d(0x2ab);else{if(_0x7ea463[_0x58b20d(0x21c)](_0x58b20d(0x1e6))||_0x7ea463['includes'](_0x58b20d(0x28a)))_0x505478=_0x58b20d(0x371);else{if(_0x7ea463[_0x58b20d(0x21c)](_0x58b20d(0x260)))_0x505478=_0x58b20d(0x2eb);}}}}}}let _0x40c2ee=![];_0x17e856===_0x58b20d(0x290)&&((_0x7ea463[_0x58b20d(0x21c)](_0x58b20d(0x359))||_0x7ea463[_0x58b20d(0x21c)]('eingang')||_0x7ea463[_0x58b20d(0x21c)](_0x58b20d(0x1cd))||_0x505478&&_0x505478[_0x58b20d(0x2ba)]()[_0x58b20d(0x21c)]('flur')&&_0x7ea463[_0x58b20d(0x21c)](_0x58b20d(0x21e)))&&(_0x40c2ee=!![]));let _0x47deb8=0x0;if(_0x30e6d7)_0x47deb8+=0x1e;else{if(_0x4cfdca)_0x47deb8+=0x14;else{if(_0x505478)_0x47deb8+=0xa;}}if(_0x40c2ee)_0x47deb8+=0x5;_0x239bf1[_0x58b20d(0x36d)]({'id':_0x104da0,'name':_0x440739||_0x104da0,'type':_0x17e856,'location':_0x505478,'logDuplicates':_0x17e856===_0x58b20d(0x2b2),'isExit':_0x40c2ee,'_score':_0x47deb8});}}return _0x239bf1[_0x58b20d(0x284)]((_0x19cd4c,_0x2f3ae5)=>_0x2f3ae5[_0x58b20d(0x20b)]-_0x19cd4c['_score']),_0x239bf1;}async[a0_0x516467(0x1d2)](){const _0x289b5f=a0_0x516467,_0x4bb9e1=this[_0x289b5f(0x2ce)][_0x289b5f(0x301)]||[];let _0x4bb56a=![];for(const _0x30d93a of _0x4bb9e1){try{const _0x3cd7ab=await this[_0x289b5f(0x30a)](_0x30d93a);if(_0x3cd7ab&&(_0x3cd7ab['val']===!![]||_0x3cd7ab[_0x289b5f(0x1d9)]==='online'||_0x3cd7ab['val']===0x1)){_0x4bb56a=!![];break;}}catch(_0x5a8ea7){}}return _0x4bb56a&&(this[_0x289b5f(0x1db)]&&(this[_0x289b5f(0x21d)]['info'](_0x289b5f(0x269)),this[_0x289b5f(0x3a0)]()),!this[_0x289b5f(0x378)]&&this['currentSystemMode']===SYSTEM_MODES[_0x289b5f(0x261)]&&this[_0x289b5f(0x2ac)](!![])),_0x4bb56a;}async['onStateChange'](_0xdebb53,_0x1951a9){const _0x5a9a0c=a0_0x516467;if(!_0x1951a9)return;if(_0xdebb53===this['namespace']+'.'+SYSTEM_DP_MODE){_0x1951a9['val']&&Object[_0x5a9a0c(0x392)](SYSTEM_MODES)[_0x5a9a0c(0x21c)](_0x1951a9[_0x5a9a0c(0x1d9)])&&(this[_0x5a9a0c(0x29e)]=_0x1951a9[_0x5a9a0c(0x1d9)],_0x1951a9['val']===SYSTEM_MODES[_0x5a9a0c(0x25f)]?this[_0x5a9a0c(0x2ac)](![]):this[_0x5a9a0c(0x2ac)](!![]));if(!_0x1951a9['ack'])this[_0x5a9a0c(0x1f2)](_0xdebb53,{'val':this['currentSystemMode'],'ack':!![]});return;}if(!_0x1951a9[_0x5a9a0c(0x256)]){_0xdebb53[_0x5a9a0c(0x21c)]('analysis.trigger')&&_0x1951a9[_0x5a9a0c(0x1d9)]&&(this[_0x5a9a0c(0x1f2)](_0xdebb53,{'val':![],'ack':!![]}),this[_0x5a9a0c(0x372)]());if(_0xdebb53[_0x5a9a0c(0x21c)](_0x5a9a0c(0x22b))&&_0x1951a9[_0x5a9a0c(0x1d9)]){this[_0x5a9a0c(0x1f2)](_0xdebb53,{'val':![],'ack':!![]});if(this[_0x5a9a0c(0x25e)])this[_0x5a9a0c(0x291)]();}_0xdebb53[_0x5a9a0c(0x21c)]('triggerBriefing')&&_0x1951a9[_0x5a9a0c(0x1d9)]&&(this['setState'](_0xdebb53,{'val':![],'ack':!![]}),this[_0x5a9a0c(0x2ef)]());return;}if(this[_0x5a9a0c(0x2ce)][_0x5a9a0c(0x301)]&&this[_0x5a9a0c(0x2ce)][_0x5a9a0c(0x301)]['includes'](_0xdebb53)){await this[_0x5a9a0c(0x1d2)]();return;}const _0x49d683=(this[_0x5a9a0c(0x2ce)][_0x5a9a0c(0x1e8)]||[])[_0x5a9a0c(0x345)](_0x54f51b=>_0x54f51b['id']===_0xdebb53);if(_0x49d683)this[_0x5a9a0c(0x318)](_0xdebb53,_0x1951a9,_0x49d683);}async[a0_0x516467(0x318)](_0x15052b,_0x3c7fc0,_0x2f470d){const _0x3ece13=a0_0x516467;if(!_0x2f470d[_0x3ece13(0x1ff)]&&this[_0x3ece13(0x28d)][_0x15052b]===_0x3c7fc0[_0x3ece13(0x1d9)])return;this[_0x3ece13(0x28d)][_0x15052b]=_0x3c7fc0['val'];if(this[_0x3ece13(0x34f)])return;const _0x4887e7=await this[_0x3ece13(0x1d2)]();if(_0x4887e7){if(!this[_0x3ece13(0x378)])this[_0x3ece13(0x2ac)](!![]);}else{const _0x18f6a2=_0x2f470d['isExit']===!![];_0x18f6a2?this['startExitTimer']():(this[_0x3ece13(0x1db)]&&(this[_0x3ece13(0x21d)][_0x3ece13(0x38d)]('Bewegung\x20w√§hrend\x20Exit-Timer\x20erkannt\x20->\x20Bewohner\x20ist\x20noch\x20da.'),this['abortExitTimer']()),!this['isPresent']&&this[_0x3ece13(0x29e)]===SYSTEM_MODES[_0x3ece13(0x261)]&&this[_0x3ece13(0x2ac)](!![]));}const _0x37979e={'timestamp':_0x3c7fc0['ts'],'id':_0x15052b,'name':_0x2f470d[_0x3ece13(0x24b)],'value':_0x3c7fc0[_0x3ece13(0x1d9)],'location':_0x2f470d[_0x3ece13(0x2bc)],'type':_0x2f470d[_0x3ece13(0x2cb)]};this[_0x3ece13(0x2b9)]['unshift'](_0x37979e);if(this[_0x3ece13(0x2b9)][_0x3ece13(0x30c)]>HISTORY_MAX_SIZE)this['eventHistory'][_0x3ece13(0x208)]();await this[_0x3ece13(0x2a6)](_0x3ece13(0x2f6),{'val':JSON['stringify'](_0x37979e),'ack':!![]}),await this['setStateAsync']('events.history',{'val':JSON['stringify'](this[_0x3ece13(0x2b9)]),'ack':!![]}),this['rawEventLog'][_0x3ece13(0x36d)]({'timestamp':new Date(_0x3c7fc0['ts'])[_0x3ece13(0x339)](),'sensorName':_0x2f470d[_0x3ece13(0x24b)],'location':_0x2f470d[_0x3ece13(0x2bc)],'value':_0x3c7fc0[_0x3ece13(0x1d9)]}),await this[_0x3ece13(0x360)]();}[a0_0x516467(0x231)](){const _0x1b25f8=a0_0x516467;this[_0x1b25f8(0x3a0)](),this[_0x1b25f8(0x34f)]=!![],this['exitGraceTimer']=setTimeout(()=>{this['isGracePeriodActive']=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),this[_0x1b25f8(0x1db)]=setTimeout(()=>{const _0x42add1=_0x1b25f8;this[_0x42add1(0x2ac)](![]),this[_0x42add1(0x1db)]=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}[a0_0x516467(0x3a0)](){const _0x168922=a0_0x516467;if(this[_0x168922(0x1db)])clearTimeout(this['exitTimer']);if(this[_0x168922(0x1d6)])clearTimeout(this[_0x168922(0x1d6)]);this[_0x168922(0x1db)]=null,this['exitGraceTimer']=null,this[_0x168922(0x34f)]=![];}async[a0_0x516467(0x2ac)](_0x5d7f29){const _0x5009f9=a0_0x516467;if(this[_0x5009f9(0x378)]===_0x5d7f29)return;this['isPresent']=_0x5d7f29,await this[_0x5009f9(0x2a6)](_0x5009f9(0x2b0),{'val':_0x5d7f29,'ack':!![]});}[a0_0x516467(0x292)](){const _0x166a7c=a0_0x516467,_0x57f10c=this[_0x166a7c(0x2ce)][_0x166a7c(0x230)],_0x559c75=this[_0x166a7c(0x2ce)]['inactivityMonitoringEnabled'],_0x22c12c=this[_0x166a7c(0x2b9)][_0x166a7c(0x30c)]>0x0?this[_0x166a7c(0x2b9)][0x0][_0x166a7c(0x204)]:Date[_0x166a7c(0x2f3)](),_0x2ff8a0=(Date[_0x166a7c(0x2f3)]()-_0x22c12c)/(0x3e8*0x3c*0x3c);let _0x2fd5f8='';_0x559c75&&this[_0x166a7c(0x29e)]===SYSTEM_MODES['NORMAL']&&this[_0x166a7c(0x378)]&&(_0x2ff8a0>_0x57f10c&&(_0x2fd5f8=_0x166a7c(0x39f)+_0x2ff8a0[_0x166a7c(0x2c0)](0x1)+_0x166a7c(0x2f9)));if(_0x2fd5f8){this[_0x166a7c(0x372)](_0x2fd5f8)[_0x166a7c(0x363)](_0x576a94=>this[_0x166a7c(0x21d)][_0x166a7c(0x251)](_0x576a94));return;}const _0x22dfbe=Date[_0x166a7c(0x2f3)](),_0x46eb32=_0x22dfbe-_0x22c12c,_0xf2c84d=(this[_0x166a7c(0x2ce)]['analysisInterval']||0xf)*0x3c*0x3e8;this[_0x166a7c(0x2b9)]['length']>0x0&&_0x46eb32<=_0xf2c84d?this[_0x166a7c(0x372)]()['catch'](_0x846b4d=>this[_0x166a7c(0x21d)][_0x166a7c(0x251)](_0x846b4d)):!this[_0x166a7c(0x215)]&&(this[_0x166a7c(0x1f2)]('analysis.isAlert',{'val':![],'ack':!![]}),this['setState']('analysis.isEmergency',{'val':![],'ack':!![]}));}async[a0_0x516467(0x372)](_0x34e563=''){const _0x5d755e=a0_0x516467;if(!this[_0x5d755e(0x37f)])return;const _0x4a09d5=this[_0x5d755e(0x2b9)]['length']>0x0?this[_0x5d755e(0x2b9)]:[{'note':'No\x20recorded\x20events\x20yet.'}],_0x540b81=PERSONA_MAPPING[this['config']['aiPersona']||_0x5d755e(0x2ad)],_0x916145=this['config'][_0x5d755e(0x38f)]||'',_0x5dd797=this[_0x5d755e(0x29e)],_0xdb593f=await this[_0x5d755e(0x2de)](),_0x4fdafe=await this[_0x5d755e(0x2fc)](),_0xa50259=(_0xdb593f+'\x20'+_0x4fdafe)[_0x5d755e(0x1fc)](),_0x55b1e9=new Date(),_0x2c400e=_0x55b1e9[_0x5d755e(0x2e9)](_0x5d755e(0x201),{'weekday':'long','hour':_0x5d755e(0x32b),'minute':_0x5d755e(0x32b)}),_0x4f4b26=this[_0x5d755e(0x2a8)];let _0xfdeb65='';if(this['feedbackHistory']['length']>0x0){const _0x21e756=this[_0x5d755e(0x220)][_0x5d755e(0x365)](0x0,0x3)[_0x5d755e(0x216)](_0x18c4f4=>_0x5d755e(0x37d)+_0x18c4f4['alertReason']+_0x5d755e(0x27d)+_0x18c4f4[_0x5d755e(0x2d7)]+'.')[_0x5d755e(0x221)]('\x0a');_0xfdeb65=_0x5d755e(0x36c)+_0x21e756+'\x0a';}const _0x48082f=_0x34e563?_0x5d755e(0x25b)+_0x34e563+_0x5d755e(0x327):'',_0x24cbee='Baseline:\x20Inactive\x20(Pro\x20Feature).',_0x445140='ROLLE:\x20Smart\x20Home\x20Analyst.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20AKTUELLE\x20ZEIT:\x20'+_0x2c400e+_0x5d755e(0x22e)+_0x4f4b26['city']+'.\x0a\x20\x20\x20\x20\x20\x20\x20\x20MODUS:\x20'+_0x5dd797+'.\x20PR√ÑSENZ:\x20'+(this[_0x5d755e(0x378)]?'Ja':_0x5d755e(0x1ca))+_0x5d755e(0x374)+_0x916145+_0x5d755e(0x26b)+_0x540b81+_0x5d755e(0x3a1)+_0xa50259+_0x5d755e(0x376)+_0x24cbee+'\x20'+_0xfdeb65+'\x20'+_0x48082f+_0x5d755e(0x337)+JSON['stringify'](_0x4a09d5)+_0x5d755e(0x282);try{const _0x374dfa=await this[_0x5d755e(0x37f)][_0x5d755e(0x31d)](_0x445140),_0x332fd3=_0x374dfa[_0x5d755e(0x395)][_0x5d755e(0x2d3)]()[_0x5d755e(0x364)](/```json|```/g,'')[_0x5d755e(0x1fc)](),_0x44d960=JSON['parse'](_0x332fd3);await this[_0x5d755e(0x2a6)]('analysis.lastResult',{'val':_0x332fd3,'ack':!![]}),await this[_0x5d755e(0x2a6)](_0x5d755e(0x280),{'val':_0x44d960[_0x5d755e(0x2ea)][_0x5d755e(0x390)]||'','ack':!![]}),await this[_0x5d755e(0x2a6)](_0x5d755e(0x331),{'val':_0x44d960[_0x5d755e(0x2ea)][_0x5d755e(0x33b)]||_0x5d755e(0x394),'ack':!![]}),await this[_0x5d755e(0x2a6)]('analysis.deviationFromBaseline',{'val':_0x44d960['activity'][_0x5d755e(0x22c)]||_0x5d755e(0x394),'ack':!![]});_0x44d960['comfort']&&(await this[_0x5d755e(0x2a6)](_0x5d755e(0x2d6),{'val':_0x44d960[_0x5d755e(0x384)][_0x5d755e(0x33b)]||'','ack':!![]}),await this[_0x5d755e(0x2a6)](_0x5d755e(0x21f),{'val':_0x44d960[_0x5d755e(0x384)][_0x5d755e(0x32c)]||'','ack':!![]}),_0x44d960[_0x5d755e(0x384)]['automationProposal']&&(await this[_0x5d755e(0x2a6)](_0x5d755e(0x311),{'val':_0x44d960[_0x5d755e(0x384)][_0x5d755e(0x1e5)][_0x5d755e(0x399)]||![],'ack':!![]}),await this[_0x5d755e(0x2a6)](_0x5d755e(0x2ec),{'val':_0x44d960[_0x5d755e(0x384)][_0x5d755e(0x1e5)][_0x5d755e(0x348)]||'','ack':!![]}),await this['setStateAsync'](_0x5d755e(0x2b6),{'val':_0x44d960['comfort']['automationProposal'][_0x5d755e(0x236)]||'','ack':!![]})));_0x44d960[_0x5d755e(0x38e)]&&(await this[_0x5d755e(0x2a6)](_0x5d755e(0x288),{'val':typeof _0x44d960[_0x5d755e(0x38e)]['sleepScore']===_0x5d755e(0x238)?_0x44d960[_0x5d755e(0x38e)]['sleepScore']:0x0,'ack':!![]}),await this['setStateAsync']('analysis.health.restlessness',{'val':_0x44d960[_0x5d755e(0x38e)]['restlessness']||'none','ack':!![]}),await this['setStateAsync'](_0x5d755e(0x249),{'val':_0x44d960[_0x5d755e(0x38e)][_0x5d755e(0x2b5)]||'','ack':!![]}));const _0x2b70d2=_0x44d960[_0x5d755e(0x2ea)][_0x5d755e(0x2a3)]||![],_0x56b0ea=_0x44d960[_0x5d755e(0x2ea)][_0x5d755e(0x2d2)]||![];if(_0x2b70d2||_0x56b0ea){await this['setStateAsync'](_0x5d755e(0x285),{'val':!![],'ack':!![]}),await this[_0x5d755e(0x2a6)]('analysis.isEmergency',{'val':_0x56b0ea,'ack':!![]});if(!this[_0x5d755e(0x215)]||_0x56b0ea){const _0x553cd7=_0x56b0ea?_0x5d755e(0x2ca):_0x5d755e(0x245);this['sendNotification'](_0x553cd7+':\x20'+_0x44d960[_0x5d755e(0x2ea)][_0x5d755e(0x390)],![],_0x56b0ea);}}else await this[_0x5d755e(0x2a6)](_0x5d755e(0x285),{'val':![],'ack':!![]}),await this['setStateAsync'](_0x5d755e(0x322),{'val':![],'ack':!![]});this[_0x5d755e(0x215)]=_0x2b70d2||_0x56b0ea;const _0x3e04af={'timestamp':Date['now'](),'id':Date[_0x5d755e(0x2f3)]()[_0x5d755e(0x30d)](),'analysis':_0x44d960,'systemMode':_0x5dd797,'isPro':this['isProVersion']};this[_0x5d755e(0x24d)](_0x3e04af);}catch(_0xf8222f){this['log'][_0x5d755e(0x251)]('Analysis\x20Error:\x20'+_0xf8222f[_0x5d755e(0x368)]);}}async[a0_0x516467(0x291)](){const _0x5f336f=a0_0x516467;if(!this[_0x5f336f(0x37f)]||this['rawEventLog'][_0x5f336f(0x30c)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await this[_0x5f336f(0x2a6)](LTM_DP_STATUS,{'val':_0x5f336f(0x2c6),'ack':!![]});return;}this[_0x5f336f(0x21d)][_0x5f336f(0x38d)]('Creating\x20Daily\x20Digest\x20from\x20'+this[_0x5f336f(0x27c)][_0x5f336f(0x30c)]+_0x5f336f(0x338)),await this[_0x5f336f(0x2a6)](LTM_DP_STATUS,{'val':_0x5f336f(0x377),'ack':!![]});const _0x247601=this[_0x5f336f(0x27c)][_0x5f336f(0x30c)]>0x320?this[_0x5f336f(0x27c)][_0x5f336f(0x365)](this[_0x5f336f(0x27c)][_0x5f336f(0x30c)]-0x320):this[_0x5f336f(0x27c)],_0x4e55df=PERSONA_MAPPING[this[_0x5f336f(0x2ce)][_0x5f336f(0x25d)]||'generic'],_0x279360=_0x5f336f(0x294)+_0x4e55df+_0x5f336f(0x244)+JSON[_0x5f336f(0x247)](_0x247601)+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20OUTPUT\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22,\x20\x22health\x22:\x20{\x20\x22sleepScore\x22:\x20number,\x20\x22restlessness\x22:\x20\x22string\x22\x20}\x20}';try{const _0x3e14bb=await this[_0x5f336f(0x37f)]['generateContent'](_0x279360),_0x3cb3cd=_0x3e14bb['response'][_0x5f336f(0x2d3)]()[_0x5f336f(0x364)](/```json|```/g,'')[_0x5f336f(0x1fc)](),_0x35167e=JSON[_0x5f336f(0x340)](_0x3cb3cd),_0x406e2d={'timestamp':new Date()[_0x5f336f(0x339)](),'eventCount':this[_0x5f336f(0x27c)][_0x5f336f(0x30c)],'summary':_0x35167e[_0x5f336f(0x33b)],'activityLevel':_0x35167e[_0x5f336f(0x24e)],'health':{'sleepScore':_0x35167e[_0x5f336f(0x38e)]?_0x35167e[_0x5f336f(0x38e)][_0x5f336f(0x2a0)]:0x0,'restlessness':_0x35167e['health']?_0x35167e[_0x5f336f(0x38e)]['restlessness']:'none'},'systemMode':this[_0x5f336f(0x29e)]};this[_0x5f336f(0x279)][_0x5f336f(0x36d)](_0x406e2d),await this[_0x5f336f(0x2ed)](),this[_0x5f336f(0x27c)]=[],await this[_0x5f336f(0x360)](),await this[_0x5f336f(0x2a6)](LTM_DP_STATUS,{'val':'Daily\x20Digest\x20erstellt\x20&\x20gespeichert.','ack':!![]}),this[_0x5f336f(0x21d)][_0x5f336f(0x38d)](_0x5f336f(0x38a));}catch(_0x5987d6){this['log'][_0x5f336f(0x251)]('Daily\x20Digest\x20Error:\x20'+_0x5987d6[_0x5f336f(0x368)]),await this[_0x5f336f(0x2a6)](LTM_DP_STATUS,{'val':_0x5f336f(0x2bb)+_0x5987d6[_0x5f336f(0x368)],'ack':!![]});}}['setupBriefingScheduler'](){const _0x5cc8a4=a0_0x516467;if(this[_0x5cc8a4(0x2d1)])this[_0x5cc8a4(0x2d1)]['cancel']();if(!this['config'][_0x5cc8a4(0x234)])return;const _0x1d164c=(this[_0x5cc8a4(0x2ce)]['briefingTime']||_0x5cc8a4(0x37c))['split'](':'),_0x2edc49=parseInt(_0x1d164c[0x0])||0x8,_0x496159=parseInt(_0x1d164c[0x1])||0x0,_0x2976f1=_0x496159+'\x20'+_0x2edc49+_0x5cc8a4(0x36b);this['log']['info']('Scheduling\x20Morning\x20Briefing\x20for\x20'+_0x2edc49+':'+(_0x496159<0xa?'0'+_0x496159:_0x496159)),this[_0x5cc8a4(0x2d1)]=schedule[_0x5cc8a4(0x281)](_0x2976f1,()=>{this['sendMorningBriefing']();});}async[a0_0x516467(0x2ef)](){const _0x2cb080=a0_0x516467;if(!this['geminiModel'])return;this[_0x2cb080(0x21d)]['info'](_0x2cb080(0x334));const _0x3757b8=this['dailyDigests'][_0x2cb080(0x30c)]>0x0?this[_0x2cb080(0x279)][this[_0x2cb080(0x279)][_0x2cb080(0x30c)]-0x1]:null,_0x4a6b9f=_0x3757b8&&_0x3757b8['health']?_0x3757b8[_0x2cb080(0x38e)][_0x2cb080(0x2a0)]:_0x2cb080(0x394),_0x38942a=new Date();_0x38942a[_0x2cb080(0x2e3)](0x4,0x0,0x0,0x0);const _0xc56b63=this['eventHistory'][_0x2cb080(0x2f0)](_0x4668ec=>new Date(_0x4668ec['timestamp'])>_0x38942a),_0x16bcc4=PERSONA_MAPPING[this[_0x2cb080(0x2ce)][_0x2cb080(0x25d)]||'generic'],_0x528b4a=this[_0x2cb080(0x2ce)][_0x2cb080(0x38f)]||'',_0x9bc78=await this[_0x2cb080(0x2de)](),_0x4497d=await this[_0x2cb080(0x2fc)](),_0x9adc=_0x2cb080(0x319)+_0x16bcc4+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20KONTEXT\x20(Wer\x20wohnt\x20hier?):\x20'+_0x528b4a+_0x2cb080(0x26f)+_0x9bc78+'\x20'+_0x4497d+_0x2cb080(0x26a)+_0x4a6b9f+_0x2cb080(0x362)+JSON[_0x2cb080(0x247)](_0xc56b63['slice'](0x0,0xa))+_0x2cb080(0x23c);try{const _0x29c254=await this[_0x2cb080(0x37f)][_0x2cb080(0x31d)](_0x9adc),_0x5b016c='üåÖ\x20Daily\x20Briefing:\x0a'+_0x29c254[_0x2cb080(0x395)][_0x2cb080(0x2d3)]()[_0x2cb080(0x1fc)]();this[_0x2cb080(0x248)](_0x5b016c),this[_0x2cb080(0x21d)][_0x2cb080(0x38d)](_0x2cb080(0x316));}catch(_0x1cce95){this[_0x2cb080(0x21d)][_0x2cb080(0x251)]('Briefing\x20Error:\x20'+_0x1cce95['message']);}}async[a0_0x516467(0x1f4)](){const _0x172249=a0_0x516467;try{const _0x36ecea=await this[_0x172249(0x313)](_0x172249(0x315));_0x36ecea&&_0x36ecea[_0x172249(0x1d9)]&&(this[_0x172249(0x2b9)]=JSON[_0x172249(0x340)](_0x36ecea[_0x172249(0x1d9)][_0x172249(0x30d)]()));}catch(_0x427225){this['eventHistory']=[];}try{const _0x13041d=await this[_0x172249(0x313)](_0x172249(0x347));if(_0x13041d&&_0x13041d[_0x172249(0x1d9)])this[_0x172249(0x24c)]=JSON['parse'](_0x13041d[_0x172249(0x1d9)][_0x172249(0x30d)]());}catch(_0x1da3bf){this[_0x172249(0x24c)]=[];}}async[a0_0x516467(0x1e3)](){const _0x2fe959=a0_0x516467;await this[_0x2fe959(0x369)](),await this[_0x2fe959(0x302)](_0x2fe959(0x2b0),{'type':_0x2fe959(0x1e0),'common':{'name':_0x2fe959(0x27b),'type':_0x2fe959(0x36f),'role':_0x2fe959(0x2dc),'read':!![],'write':![],'def':!![]},'native':{}}),await this[_0x2fe959(0x302)]('events.lastEvent',{'type':'state','common':{'name':_0x2fe959(0x21a),'type':_0x2fe959(0x202),'role':'json','read':!![],'write':![]},'native':{}}),await this[_0x2fe959(0x302)](_0x2fe959(0x315),{'type':'state','common':{'name':_0x2fe959(0x224),'type':_0x2fe959(0x202),'role':_0x2fe959(0x388),'read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync']('analysis.trigger',{'type':_0x2fe959(0x1e0),'common':{'name':'Trigger\x20Analysis','type':_0x2fe959(0x36f),'role':_0x2fe959(0x276),'read':!![],'write':!![],'def':![]},'native':{}}),await this[_0x2fe959(0x302)](_0x2fe959(0x24f),{'type':'state','common':{'name':'Trigger\x20Briefing\x20(Test)','type':_0x2fe959(0x36f),'role':_0x2fe959(0x276),'read':!![],'write':!![],'def':![]},'native':{}}),await this[_0x2fe959(0x302)](_0x2fe959(0x1cc),{'type':_0x2fe959(0x1e0),'common':{'name':_0x2fe959(0x2e7),'type':_0x2fe959(0x202),'role':_0x2fe959(0x388),'read':!![],'write':![]},'native':{}}),await this[_0x2fe959(0x302)](_0x2fe959(0x285),{'type':_0x2fe959(0x1e0),'common':{'name':_0x2fe959(0x330),'type':_0x2fe959(0x36f),'role':_0x2fe959(0x358),'read':!![],'write':![],'def':![]},'native':{}}),await this[_0x2fe959(0x302)](_0x2fe959(0x322),{'type':'state','common':{'name':'AI\x20Emergency\x20Status','type':'boolean','role':_0x2fe959(0x2ff),'read':!![],'write':![],'def':![]},'native':{}}),await this[_0x2fe959(0x302)](_0x2fe959(0x280),{'type':_0x2fe959(0x1e0),'common':{'name':_0x2fe959(0x2a7),'type':_0x2fe959(0x202),'role':'text.alarm','read':!![],'write':![]},'native':{}}),await this[_0x2fe959(0x302)](_0x2fe959(0x331),{'type':_0x2fe959(0x1e0),'common':{'name':_0x2fe959(0x1f0),'type':_0x2fe959(0x202),'role':_0x2fe959(0x2d3),'read':!![],'write':![]},'native':{}}),await this[_0x2fe959(0x302)]('analysis.deviationFromBaseline',{'type':_0x2fe959(0x1e0),'common':{'name':_0x2fe959(0x353),'type':_0x2fe959(0x202),'role':_0x2fe959(0x1e0),'read':!![],'write':![],'def':'N/A'},'native':{}}),await this[_0x2fe959(0x302)]('analysis.comfortSummary',{'type':_0x2fe959(0x1e0),'common':{'name':_0x2fe959(0x1e4),'type':'string','role':_0x2fe959(0x2d3),'read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x2fe959(0x21f),{'type':_0x2fe959(0x1e0),'common':{'name':_0x2fe959(0x228),'type':_0x2fe959(0x202),'role':_0x2fe959(0x2d3),'read':!![],'write':![]},'native':{}}),await this[_0x2fe959(0x335)](_0x2fe959(0x387),{'type':_0x2fe959(0x31b),'common':{'name':_0x2fe959(0x1cb)},'native':{}}),await this[_0x2fe959(0x302)](_0x2fe959(0x311),{'type':_0x2fe959(0x1e0),'common':{'name':_0x2fe959(0x273),'type':_0x2fe959(0x36f),'role':_0x2fe959(0x2dc),'read':!![],'write':![],'def':![]},'native':{}}),await this[_0x2fe959(0x302)](_0x2fe959(0x2ec),{'type':_0x2fe959(0x1e0),'common':{'name':'Description','type':_0x2fe959(0x202),'role':_0x2fe959(0x2d3),'read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x2fe959(0x2b6),{'type':'state','common':{'name':_0x2fe959(0x1d8),'type':_0x2fe959(0x202),'role':_0x2fe959(0x2d3),'read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x2fe959(0x347),{'type':'state','common':{'name':_0x2fe959(0x1e1),'type':_0x2fe959(0x202),'role':'json','read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x2fe959(0x302)]('analysis.feedbackHistory',{'type':_0x2fe959(0x1e0),'common':{'name':_0x2fe959(0x303),'type':_0x2fe959(0x202),'role':_0x2fe959(0x388),'read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x2fe959(0x335)]('analysis.health',{'type':'channel','common':{'name':'Health\x20&\x20Sleep\x20Analysis'},'native':{}}),await this['setObjectNotExistsAsync'](_0x2fe959(0x288),{'type':'state','common':{'name':_0x2fe959(0x2fb),'type':'number','role':_0x2fe959(0x2a4),'read':!![],'write':![],'def':0x0},'native':{}}),await this[_0x2fe959(0x302)](_0x2fe959(0x23a),{'type':_0x2fe959(0x1e0),'common':{'name':_0x2fe959(0x293),'type':_0x2fe959(0x202),'role':_0x2fe959(0x2d3),'read':!![],'write':![],'def':_0x2fe959(0x1ce)},'native':{}}),await this['setObjectNotExistsAsync'](_0x2fe959(0x249),{'type':_0x2fe959(0x1e0),'common':{'name':_0x2fe959(0x355),'type':'string','role':_0x2fe959(0x2d3),'read':!![],'write':![],'def':''},'native':{}}),await this[_0x2fe959(0x2af)](),await this[_0x2fe959(0x1ea)]();}async[a0_0x516467(0x369)](){const _0x293174=a0_0x516467;await this['extendObjectAsync']('system',{'type':_0x293174(0x31b),'common':{'name':'System\x20Status\x20&\x20Control'},'native':{}}),await this[_0x293174(0x335)](SYSTEM_DP_MODE,{'type':_0x293174(0x1e0),'common':{'name':_0x293174(0x356),'type':_0x293174(0x202),'role':_0x293174(0x1e0),'read':!![],'write':!![],'def':SYSTEM_MODES['NORMAL'],'states':{[SYSTEM_MODES[_0x293174(0x261)]]:_0x293174(0x2d9),[SYSTEM_MODES['VACATION']]:_0x293174(0x2c5),[SYSTEM_MODES[_0x293174(0x2ee)]]:_0x293174(0x1e2),[SYSTEM_MODES[_0x293174(0x336)]]:_0x293174(0x1fa)}},'native':{}});}async['sendNotification'](_0x4c3104,_0x5607e7=![],_0x3ceae4=![]){const _0x48f014=a0_0x516467;this['log']['info']((_0x5607e7?_0x48f014(0x1da):'')+'Sending\x20notification:\x20\x22'+_0x4c3104+'\x22'+(_0x3ceae4?_0x48f014(0x35b):''));const _0x1fc7a2=this[_0x48f014(0x2ce)];let _0x4d9d37=0x0;_0x1fc7a2['notifyTelegramEnabled']&&_0x1fc7a2['notifyTelegramInstance']&&(await this[_0x48f014(0x36a)](_0x1fc7a2[_0x48f014(0x3a4)],_0x48f014(0x267),{'text':_0x4c3104,'user':_0x1fc7a2[_0x48f014(0x304)]}),_0x4d9d37++);if(_0x1fc7a2['notifyPushoverEnabled']&&_0x1fc7a2[_0x48f014(0x2be)]){let _0x2b8c11={'message':_0x4c3104,'title':_0x3ceae4?_0x48f014(0x32a):_0x48f014(0x2d5),'priority':_0x3ceae4?0x2:0x1,'device':_0x1fc7a2[_0x48f014(0x342)]};_0x3ceae4&&(_0x2b8c11['retry']=0x1e,_0x2b8c11[_0x48f014(0x1f5)]=0xe10,_0x2b8c11[_0x48f014(0x1ed)]=_0x48f014(0x22a)),await this[_0x48f014(0x36a)](_0x1fc7a2[_0x48f014(0x2be)],_0x48f014(0x267),_0x2b8c11),_0x4d9d37++;}return _0x1fc7a2[_0x48f014(0x203)]&&_0x1fc7a2[_0x48f014(0x235)]&&(await this[_0x48f014(0x36a)](_0x1fc7a2[_0x48f014(0x235)],_0x48f014(0x267),{'text':_0x4c3104,'to':_0x1fc7a2[_0x48f014(0x349)]}),_0x4d9d37++),_0x1fc7a2[_0x48f014(0x385)]&&_0x1fc7a2[_0x48f014(0x3a3)]&&(await this[_0x48f014(0x36a)](_0x1fc7a2[_0x48f014(0x3a3)],'send',{'text':_0x4c3104,'phone':_0x1fc7a2['notifyWhatsappRecipient']}),_0x4d9d37++),_0x1fc7a2[_0x48f014(0x200)]&&_0x1fc7a2[_0x48f014(0x265)]&&(await this[_0x48f014(0x36a)](_0x1fc7a2['notifySignalInstance'],_0x48f014(0x267),{'text':_0x4c3104,'phone':_0x1fc7a2[_0x48f014(0x1d3)]}),_0x4d9d37++),_0x4d9d37;}async[a0_0x516467(0x39b)](){const _0x15991b=a0_0x516467;try{const _0x5e8de7=await this[_0x15991b(0x313)](LTM_DP_RAW_LOG);if(_0x5e8de7&&_0x5e8de7[_0x15991b(0x1d9)])this[_0x15991b(0x27c)]=JSON['parse'](_0x5e8de7[_0x15991b(0x1d9)]);}catch(_0x35e1ef){this[_0x15991b(0x27c)]=[];}}async[a0_0x516467(0x360)](){const _0x3146bc=a0_0x516467;this[_0x3146bc(0x27c)][_0x3146bc(0x30c)]>RAW_LOG_MAX_SIZE&&this['rawEventLog']['splice'](0x0,this[_0x3146bc(0x27c)][_0x3146bc(0x30c)]-RAW_LOG_MAX_SIZE),await this[_0x3146bc(0x2a6)](LTM_DP_RAW_LOG,{'val':JSON[_0x3146bc(0x247)](this[_0x3146bc(0x27c)]),'ack':!![]});}async[a0_0x516467(0x389)](){const _0x3e0bf1=a0_0x516467;try{const _0x4e29bb=await this[_0x3e0bf1(0x313)](LTM_DP_DAILY_DIGESTS);if(_0x4e29bb&&_0x4e29bb[_0x3e0bf1(0x1d9)])this[_0x3e0bf1(0x279)]=JSON['parse'](_0x4e29bb[_0x3e0bf1(0x1d9)]);}catch(_0x212b83){this['dailyDigests']=[];}await this[_0x3e0bf1(0x297)]();}async[a0_0x516467(0x2ed)](_0x5f0ede=!![]){const _0x571a43=a0_0x516467,_0x29eb34=this[_0x571a43(0x2ce)][_0x571a43(0x229)]||0x3c;this['dailyDigests'][_0x571a43(0x30c)]>_0x29eb34&&this[_0x571a43(0x279)][_0x571a43(0x308)](0x0,this[_0x571a43(0x279)][_0x571a43(0x30c)]-_0x29eb34);await this[_0x571a43(0x2a6)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x571a43(0x247)](this[_0x571a43(0x279)]),'ack':!![]});if(_0x5f0ede)await this['updateBaselineStatus']();}[a0_0x516467(0x350)](){const _0xbbd20d=a0_0x516467;if(this['ltmJob'])this[_0xbbd20d(0x320)]['cancel']();if(!this['isProVersion']){this[_0xbbd20d(0x2a6)](LTM_DP_STATUS,{'val':'Deaktiviert\x20(Pro-Feature)','ack':!![]});return;}this[_0xbbd20d(0x320)]=schedule['scheduleJob'](LTM_SCHEDULE,()=>this[_0xbbd20d(0x291)]());}['setupDriftAnalysisScheduler'](){const _0x13c90e=a0_0x516467;if(this[_0x13c90e(0x1fb)])clearInterval(this[_0x13c90e(0x1fb)]);if(!this['isProVersion'])return;this[_0x13c90e(0x1fb)]=setInterval(()=>this[_0x13c90e(0x30b)](),(this[_0x13c90e(0x2ce)][_0x13c90e(0x1ef)]||0x18)*0x36ee80),setTimeout(()=>this['runBaselineDriftAnalysis'](),0x1388);}async[a0_0x516467(0x2af)](){const _0x18fbc1=a0_0x516467;await this[_0x18fbc1(0x335)]('LTM',{'type':'channel','common':{'name':_0x18fbc1(0x31e)},'native':{}}),await this[_0x18fbc1(0x335)](LTM_DP_RAW_LOG,{'type':_0x18fbc1(0x1e0),'common':{'name':_0x18fbc1(0x33f),'type':_0x18fbc1(0x202),'role':_0x18fbc1(0x388),'read':!![],'write':![]},'native':{}}),await this[_0x18fbc1(0x335)](LTM_DP_DAILY_DIGESTS,{'type':_0x18fbc1(0x1e0),'common':{'name':_0x18fbc1(0x271),'type':_0x18fbc1(0x202),'role':'json','read':!![],'write':![]},'native':{}}),await this[_0x18fbc1(0x335)](LTM_DP_STATUS,{'type':'state','common':{'name':_0x18fbc1(0x243),'type':_0x18fbc1(0x202),'role':_0x18fbc1(0x2d3),'read':!![],'write':![]},'native':{}}),await this['extendObjectAsync'](LTM_DP_TRIGGER_DIGEST,{'type':'state','common':{'name':_0x18fbc1(0x380),'type':'boolean','role':'button','read':!![],'write':!![],'def':![]},'native':{}}),await this[_0x18fbc1(0x335)](LTM_DP_BASELINE_STATUS,{'type':_0x18fbc1(0x1e0),'common':{'name':'Baseline\x20Status','type':_0x18fbc1(0x202),'role':'text','read':!![],'write':![]},'native':{}});}async[a0_0x516467(0x1ea)](){const _0x254f38=a0_0x516467;await this['extendObjectAsync'](LTM_DP_DRIFT_CHANNEL,{'type':'channel','common':{'name':_0x254f38(0x2c4)},'native':{}}),await this[_0x254f38(0x335)](LTM_DP_DRIFT_STATUS,{'type':_0x254f38(0x1e0),'common':{'name':_0x254f38(0x1fd),'type':_0x254f38(0x202),'role':'state','read':!![],'write':![],'def':_0x254f38(0x394)},'native':{}}),await this[_0x254f38(0x335)](LTM_DP_DRIFT_DETAILS,{'type':_0x254f38(0x1e0),'common':{'name':'Drift\x20Details','type':'string','role':'text','read':!![],'write':![]},'native':{}}),await this[_0x254f38(0x335)](LTM_DP_DRIFT_LAST_CHECK,{'type':_0x254f38(0x1e0),'common':{'name':_0x254f38(0x264),'type':_0x254f38(0x238),'role':_0x254f38(0x314),'read':!![],'write':![]},'native':{}});}async[a0_0x516467(0x30b)](){const _0x2b7112=a0_0x516467;if(!this['isProVersion']||!this[_0x2b7112(0x37f)])return;const _0x2b5cca=this[_0x2b7112(0x2ce)][_0x2b7112(0x1d0)]||0xe;if(this[_0x2b7112(0x279)][_0x2b7112(0x30c)]<_0x2b5cca+(this[_0x2b7112(0x2ce)]['minDaysForBaseline']||0x7)){await this[_0x2b7112(0x2a6)](LTM_DP_DRIFT_STATUS,{'val':_0x2b7112(0x38b),'ack':!![]});return;}const _0x5ce69c=this[_0x2b7112(0x279)][_0x2b7112(0x365)](-_0x2b5cca),_0x582b51=this[_0x2b7112(0x279)][_0x2b7112(0x365)](0x0,this[_0x2b7112(0x279)][_0x2b7112(0x30c)]-_0x2b5cca),_0x5b160e=_0x2b7112(0x375)+JSON[_0x2b7112(0x247)](_0x582b51)+_0x2b7112(0x283)+JSON[_0x2b7112(0x247)](_0x5ce69c);try{const _0x595fc1=await this[_0x2b7112(0x37f)][_0x2b7112(0x31d)](_0x5b160e),_0x1b47bc=JSON[_0x2b7112(0x340)](_0x595fc1['response'][_0x2b7112(0x2d3)]()['replace'](/```json|```/g,'')[_0x2b7112(0x1fc)]());_0x1b47bc[_0x2b7112(0x1d1)]&&(await this[_0x2b7112(0x2a6)](LTM_DP_DRIFT_STATUS,{'val':_0x1b47bc[_0x2b7112(0x1d1)],'ack':!![]}),await this[_0x2b7112(0x2a6)](LTM_DP_DRIFT_DETAILS,{'val':_0x1b47bc[_0x2b7112(0x2e5)],'ack':!![]}),await this[_0x2b7112(0x2a6)](LTM_DP_DRIFT_LAST_CHECK,{'val':Date[_0x2b7112(0x2f3)](),'ack':!![]}));}catch(_0x11f19f){}}async['loadSystemMode'](){const _0x206e4b=a0_0x516467;try{const _0x1fabbe=await this[_0x206e4b(0x313)](SYSTEM_DP_MODE);_0x1fabbe&&_0x1fabbe[_0x206e4b(0x1d9)]&&Object[_0x206e4b(0x392)](SYSTEM_MODES)[_0x206e4b(0x21c)](_0x1fabbe[_0x206e4b(0x1d9)])?this[_0x206e4b(0x29e)]=_0x1fabbe[_0x206e4b(0x1d9)]:(this[_0x206e4b(0x29e)]=SYSTEM_MODES[_0x206e4b(0x261)],await this[_0x206e4b(0x2a6)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x206e4b(0x261)],'ack':!![]}));}catch(_0x2a8662){this[_0x206e4b(0x29e)]=SYSTEM_MODES[_0x206e4b(0x261)];}}async[a0_0x516467(0x1f8)](){const _0x419ee0=a0_0x516467;try{const _0x5b7f5d=await this[_0x419ee0(0x22f)](_0x419ee0(0x262));if(_0x5b7f5d&&_0x5b7f5d[_0x419ee0(0x2df)]&&_0x5b7f5d[_0x419ee0(0x2df)][_0x419ee0(0x232)])return _0x5b7f5d[_0x419ee0(0x2df)][_0x419ee0(0x232)];return _0x419ee0(0x31c);}catch(_0x20bbd0){return'uuid-error';}}async[a0_0x516467(0x2d8)](_0x17c0f8){const _0x35f4ba=a0_0x516467;if(!_0x17c0f8)return![];this['systemUUID']=await this[_0x35f4ba(0x1f8)]();if(_0x17c0f8===_0x35f4ba(0x39a)||_0x17c0f8[_0x35f4ba(0x2b1)](_0x35f4ba(0x343)))return!![];return![];}['onUnload'](_0x108777){const _0x1b5964=a0_0x516467;if(this['analysisTimer'])clearInterval(this[_0x1b5964(0x1c9)]);if(this['driftAnalysisTimer'])clearInterval(this[_0x1b5964(0x1fb)]);if(this[_0x1b5964(0x320)])this[_0x1b5964(0x320)][_0x1b5964(0x2bd)]();if(this[_0x1b5964(0x2d0)])this[_0x1b5964(0x2d0)][_0x1b5964(0x2bd)]();if(this['briefingJob'])this[_0x1b5964(0x2d1)]['cancel']();if(this['exitTimer'])clearTimeout(this[_0x1b5964(0x1db)]);if(this['exitGraceTimer'])clearTimeout(this['exitGraceTimer']);_0x108777();}async[a0_0x516467(0x28e)](_0x575777){const _0x1de846=a0_0x516467;if(typeof _0x575777===_0x1de846(0x305)&&_0x575777[_0x1de846(0x368)]){if(_0x575777['command']==='testApiKey'){if(!_0x575777['message'][_0x1de846(0x237)])return this[_0x1de846(0x357)](_0x575777[_0x1de846(0x2e4)],_0x575777['command'],{'success':![],'message':_0x1de846(0x1c7)},_0x575777[_0x1de846(0x266)]);try{const _0x16c8ee=new GoogleGenerativeAI(_0x575777[_0x1de846(0x368)][_0x1de846(0x237)])['getGenerativeModel']({'model':_0x1de846(0x252)});await _0x16c8ee[_0x1de846(0x31d)](_0x1de846(0x26d)),this['sendTo'](_0x575777['from'],_0x575777['command'],{'success':!![],'message':_0x1de846(0x242)},_0x575777['callback']);}catch(_0x2cd80b){this[_0x1de846(0x357)](_0x575777[_0x1de846(0x2e4)],_0x575777['command'],{'success':![],'message':_0x2cd80b['message']},_0x575777['callback']);}}else{if(_0x575777[_0x1de846(0x27f)]===_0x1de846(0x1fe)){const _0x2e915e=await this[_0x1de846(0x248)]('[Test]\x20Notification',!![]);this[_0x1de846(0x357)](_0x575777[_0x1de846(0x2e4)],_0x575777[_0x1de846(0x27f)],{'success':_0x2e915e>0x0,'message':_0x2e915e+_0x1de846(0x344)},_0x575777[_0x1de846(0x266)]);}else{if(_0x575777[_0x1de846(0x27f)]===_0x1de846(0x298)){if(!this['isProVersion'])return this[_0x1de846(0x357)](_0x575777[_0x1de846(0x2e4)],_0x575777[_0x1de846(0x27f)],{'success':![],'isPro':![]},_0x575777[_0x1de846(0x266)]);let _0x2ac314={'status':_0x1de846(0x394),'details':'','lastCheck':0x0};try{_0x2ac314[_0x1de846(0x29b)]=(await this['getStateAsync'](LTM_DP_DRIFT_STATUS))['val'],_0x2ac314['details']=(await this[_0x1de846(0x313)](LTM_DP_DRIFT_DETAILS))['val'],_0x2ac314[_0x1de846(0x240)]=(await this[_0x1de846(0x313)](LTM_DP_DRIFT_LAST_CHECK))[_0x1de846(0x1d9)];}catch(_0x482fa2){}this['sendTo'](_0x575777['from'],_0x575777[_0x1de846(0x27f)],{'success':!![],'isPro':!![],'dailyDigests':this[_0x1de846(0x279)],'driftAnalysis':_0x2ac314,'analysisHistory':this[_0x1de846(0x24c)]},_0x575777[_0x1de846(0x266)]);}else{if(_0x575777[_0x1de846(0x27f)]===_0x1de846(0x1d5)){const _0x3a6704=await this[_0x1de846(0x2f5)](_0x1de846(0x35c),_0x1de846(0x23e)),_0xb40914=[];if(_0x3a6704)for(const _0x13f708 in _0x3a6704){const _0x4b2aea=_0x3a6704[_0x13f708],_0x294566=(_0x4b2aea[_0x1de846(0x34d)]&&typeof _0x4b2aea[_0x1de846(0x34d)]['name']===_0x1de846(0x305)?_0x4b2aea[_0x1de846(0x34d)][_0x1de846(0x24b)]['de']:_0x4b2aea[_0x1de846(0x34d)][_0x1de846(0x24b)])||_0x4b2aea['common'][_0x1de846(0x24b)];_0xb40914['push']({'id':_0x13f708,'name':_0x294566});}this[_0x1de846(0x357)](_0x575777[_0x1de846(0x2e4)],_0x575777[_0x1de846(0x27f)],{'success':!![],'enums':_0xb40914},_0x575777[_0x1de846(0x266)]);}else{if(_0x575777[_0x1de846(0x27f)]===_0x1de846(0x211))try{const _0x201ea6=await this['scanForDevices'](_0x575777[_0x1de846(0x368)]||{});this['sendTo'](_0x575777[_0x1de846(0x2e4)],_0x575777[_0x1de846(0x27f)],{'success':!![],'devices':_0x201ea6},_0x575777[_0x1de846(0x266)]);}catch(_0x521892){this[_0x1de846(0x357)](_0x575777['from'],_0x575777[_0x1de846(0x27f)],{'success':![],'error':_0x521892[_0x1de846(0x368)]},_0x575777['callback']);}else{if(_0x575777[_0x1de846(0x27f)]===_0x1de846(0x296)){const {historyId:_0x17fd42,rating:_0x5aff74,comment:_0x56fb79,alertReason:_0x3be341}=_0x575777['message'];_0x17fd42&&_0x5aff74?(await this['saveFeedback']({'timestamp':Date['now'](),'historyId':_0x17fd42,'rating':_0x5aff74,'comment':_0x56fb79,'alertReason':_0x3be341}),this[_0x1de846(0x357)](_0x575777[_0x1de846(0x2e4)],_0x575777[_0x1de846(0x27f)],{'success':!![]},_0x575777[_0x1de846(0x266)])):this[_0x1de846(0x357)](_0x575777[_0x1de846(0x2e4)],_0x575777[_0x1de846(0x27f)],{'success':![],'error':_0x1de846(0x310)},_0x575777[_0x1de846(0x266)]);}}}}}}}}}if(require['main']!==module)module[a0_0x516467(0x2fe)]=_0x5ae7a3=>new CogniLiving(_0x5ae7a3);else new CogniLiving();