function a0_0x44de(_0x322fd3,_0x51d900){const _0x50f7e6=a0_0xd8a3();return a0_0x44de=function(_0x1a5aeb,_0x3f9b28){_0x1a5aeb=_0x1a5aeb-0x7c;let _0xd8a324=_0x50f7e6[_0x1a5aeb];return _0xd8a324;},a0_0x44de(_0x322fd3,_0x51d900);}const a0_0xac581a=a0_0x44de;(function(_0x374eea,_0x8c6330){const _0x142489=a0_0x44de,_0x1be45d=_0x374eea();while(!![]){try{const _0x3123fb=parseInt(_0x142489(0x14c))/0x1+parseInt(_0x142489(0x1be))/0x2+-parseInt(_0x142489(0x125))/0x3*(parseInt(_0x142489(0x1b3))/0x4)+parseInt(_0x142489(0x194))/0x5*(parseInt(_0x142489(0x173))/0x6)+parseInt(_0x142489(0xb7))/0x7+-parseInt(_0x142489(0x8e))/0x8+parseInt(_0x142489(0x1e5))/0x9*(-parseInt(_0x142489(0xee))/0xa);if(_0x3123fb===_0x8c6330)break;else _0x1be45d['push'](_0x1be45d['shift']());}catch(_0x13990b){_0x1be45d['push'](_0x1be45d['shift']());}}}(a0_0xd8a3,0xc08ef));function a0_0xd8a3(){const _0x461ba8=['push','No\x20recent\x20activity.','CONNECTION','N/A\x20(Learning)','diele','bewegung','fenster','LTM.processingStatus','Analysis\x20Error:\x20','setStateAsync','Aktiv\x20(','scriptEnabled','t√ºr','_score','timestamp','modelid','onReady','systemUUID','saveRawEventLog','\x20(EMERGENCY)','extendObjectAsync','LOW_BAT','OFF','Trigger\x20Analysis','Starting\x20Autopilot\x20(','LOWBAT','driftAnalysisTimer','7677gmYPcj','slice','analysis.automation.description','loadRawEventLog','catch','json','rauch','Subscribing\x20to\x20','level','k√ºche','weatherunderground.','geminiModel','location','uniqueid','\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20SCHEMA:\x20{\x20\x22activity\x22:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22deviationFromBaseline\x22:\x20\x22string\x22,\x20\x22isAlert\x22:\x20bool,\x20\x22isEmergency\x22:\x20bool,\x20\x22alertReason\x22:\x20\x22string\x22\x20},\x20\x22comfort\x22:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22suggestion\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22patternDetected\x22:\x20bool,\x20\x22description\x22:\x20\x22string\x22,\x20\x22suggestedAction\x22:\x20\x22string\x22\x20}\x20}\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20HINWEIS:\x20Setze\x20isEmergency=true\x20NUR\x20bei\x20akuter\x20Lebensgefahr\x20oder\x20best√§tigter\x20Inaktivit√§t\x20√ºber\x20Schwellenwert.\x20isAlert=true\x20bei\x20Warnungen.','process','Licht','notifyPushoverInstance','name','unload','STANDORT:\x20Lat\x20','logDuplicates','schlaf','uuid-not-found','cogni-living','analysisInterval','endsWith','Automation\x20Proposals','accuweather.','COMBINED_PARAMETER','PARTY','events.lastEvent','trim','saveFeedback','updateAnalysisHistory','historyId','button','setState','firmware','26356wfWmBr','\x0a\x20\x20\x20\x20\x20\x20\x20\x20AUFGABE:\x20','notifyWhatsappEnabled','startsWith','WORKING','ltmLtbWindowDays','Gast','toLowerCase','splice','map','Normal','getSystemUUID','notifyWhatsappRecipient','daswetter.','node-schedule','setObjectNotExistsAsync','Gemini\x20API\x20Key\x20missing.\x20AI\x20features\x20disabled.','ltmDriftCheckIntervalHours','toUpperCase','sensor.motion','presence','createAllObjects','LTM','ROLLE:\x20Smart\x20Home\x20Analyst.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20AKTUELLE\x20ZEIT:\x20','setupModeResetScheduler','updateBaselineStatus','Started\x20at\x20','some','getStateAsync','SABOTAGE','warn','runGeminiAnalysis','SECTION','toFixed','analysis.automation.patternDetected','notifyWhatsappInstance','cancel','main','analysisHistory','536790VhXNjI','getForeignObjectAsync','Deaktiviert\x20(Pro-Feature)','update','subscribeStates','[Test]\x20Notification','summary','number','ALARM','ERROR','VACATION','.\x20PERSONA:\x20','join','boolean','Unbekannt','analysis.comfortSuggestion','error','ack','Flur','generateContent','command','deviationFromBaseline','notifySignalRecipient','LTM.triggerDailyDigest','openweathermap.','checkSystemObjects','parse','runAutopilot','write','rawEventLog','pressure','ltmJob','flur','45JgYSvc','‚ö†Ô∏è\x20DEV-MODE:\x20Lokaler\x20Test-Schl√ºssel\x20erkannt.\x20Pro-Features\x20aktiviert.','pop','loadSystemMode','length','history','temperature','bind','toLocaleString','battery','scanForDevices','alertReason','0\x204\x20*\x20*\x20*','from','effect','lastAlertState','cogni-living\x20adapter\x20starting\x20(v','role','automationProposal','lights','enum.functions.*','.brightness','unshift','K√ºche','Alert\x20Reason','Wohnzimmer','analysis.isAlert','send','\x20was\x20FALSE.\x20Reason:\x20','smoke','substring','772GVskGb','toString','loadDailyDigests','ON_TIME','\x0a\x0aUSER\x20FEEDBACK\x20/\x20LERN-CONTEXT\x20(Vermeide\x20diese\x20Fehler):\x0a','longitude','type','licht','Skipped\x20(No\x20AI\x20or\x20Data)','currentSystemMode','comment','2591166DgcCGP','sendTo','constructor','No\x20recorded\x20events\x20yet,\x20but\x20Inactivity\x20Monitor\x20triggered.','party','siren','expire','material.','Feedback\x20Log','sound','sort','search','split','DIRECTION','switch.light','getLtmData',',\x20Lon\x20','.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','PROCESS','lastCheck','OPERATING_VOLTAGE','occupancy','No\x20comment','STICKY_UNREACH','RSSI','Drift\x20Analysis','notifyTelegramEnabled','events.history','enum.rooms.*','motion','isEmergency','\x20events','VIRTUAL_CHANNEL','Processing\x20Status','checkLtmObjects','N/A\x20(Pro\x20Feature)','1.\x20ANALYSE:\x20Bewerte\x20Sensor-Events.\x20deviation=\x27N/A\x27.','livingContext','üìç\x20Standort\x20geladen:\x20','12636vlXRnI','Pattern\x20Detected','enum','[TEST]\x20','genAI','\x20sensors...','notifyEmailEnabled','checkLtmDriftObjects','icon','selectedFunctionIds','getGenerativeModel','dailyDigests','Party','Sending\x20notification:\x20\x22','Konnte\x20System-Standort\x20nicht\x20laden.','toISOString','CRITICAL\x20WARNING:\x20No\x20sensor\x20activity\x20detected\x20for\x20','axios','baselineDrift','last_seen','callback','version','models/gemini-flash-latest','Deviation','minDaysForBaseline','mac\x20address','system.config','LTM.driftAnalysis.driftDetails','INSTALL_TEST','Action','NORMAL','max','scheduleJob','\x0a\x0aA\x20(STB):\x0a','getEnums','aiPersona','state','wetter','triggerDailyDigest','uuid','now','javascript.0.script','ltmStbWindowDays','Fokus\x20auf\x20Familienroutinen,\x20Kindersicherheit\x20und\x20allgemeines\x20Haushaltsmanagement.\x20Erwarte\x20hohe\x20Aktivit√§tsniveaus.','.state','temperatur','native','Event\x20History','weather','devices','analysis.lastResult','checkLicense','system.meta.uuid','analysisTimer','stringify','Badezimmer','systemConfig','STB\x20(Recent\x20History):\x20','unknown','analysis.alertReason','‚úÖ\x20License\x20check\x20successful:\x20PRO\x20features\x20enabled.','feedbackHistory','capabilities','message','pr√§senz','PRO-','wind','analysis.feedbackHistory','values','replace','uuid-error','info','onMessage','Schlafzimmer','Success','testApiKey','apiKey','\x0a!!!\x20END\x20WARNING\x20!!!\x0a','wohn','\x20hours.\x20The\x20resident\x20might\x20be\x20incapacitated\x20or\x20dead.\x20Assess\x20immediate\x20risk\x20level.\x20This\x20is\x20a\x20potential\x20EMERGENCY.','analysis.deviationFromBaseline','detectionState','sendNotification','onStateChange','Missing\x20data','LTM.driftAnalysis','11367360WDUNvk','inactivityMonitoringEnabled','analysis.trigger','Last\x20raw\x20event','signal','Temperatur','doors','toLocaleTimeString','analysis.analysisHistory','subscribeForeignStatesAsync','namespace','generic','WEEK_PROGRAM','reachable','comfort','Running\x20in\x20FREE\x20mode\x20(LTM\x20&\x20Automation\x20disabled).','text.alarm','min','processSensorEvent','yr.','onUnload','licenseKey','filter','includes','sat','notifyPushoverRecipient','.on','Fokus\x20auf\x20Maximierung\x20von\x20Komfort,\x20Automatisierungseffizienz\x20und\x20Energieeinsparung\x20f√ºr\x20einen\x20einzelnen\x20Bewohner.\x20Aktivit√§tsmuster\x20sind\x20flexibel.','common','members','value.humidity','system','isAlert','ERROR_CODE','Activity\x20Summary','admin.','activity','find','runBaselineDriftAnalysis','createDailyDigest','analysis.isEmergency','8919330DFggYE','submitFeedback','notifyEmailInstance','2-digit','shutter_contact','N/A','scriptProblem','setupLtmScheduler','\x0a!!!\x20EXTERNAL\x20SYSTEM\x20WARNING\x20!!!\x0a','Garten','ready','Lizenzpr√ºfung\x20gestartet\x20f√ºr\x20System-UUID:\x20','.\x20KONTEXT:\x20','notifySignalInstance','.level','stateChange','saveDailyDigests','\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x202.\x20AUTOMATION:\x20patternDetected=true/false.\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20EVENTS:\x20','Fenster/T√ºr','\x22\x20at\x20','ROLLE:\x20Data\x20Scientist.\x20VERGLEICHE:\x20Dataset\x20A\x20(Recent)\x20vs\x20B\x20(Established).\x20ZIEL:\x20Erkenne\x20Drift.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aB\x20(LTB):\x0a','hue','val','Gemini\x20Init\x20Error:\x20',').\x20Nutze\x20dies\x20f√ºr\x20Sonnenstand/Lichtverh√§ltnisse.','info.','config','flot.','description','LTM.driftAnalysis.baselineDrift','PRIORIT√ÑT:\x20Sicherheit.\x20Erkenne\x20Eindringlinge,\x20ungew√∂hnliche\x20Anwesenheit\x20bei\x20Abwesenheit\x20der\x20Bewohner\x20oder\x20Fehlfunktionen,\x20die\x20auf\x20ein\x20Sicherheitsrisiko\x20hindeuten.','Last\x20Check','inactivityThresholdHours','.\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20','string','modeResetJob','‚úÖ\x20Server\x20(simuliert):\x20Lizenz\x20g√ºltig.','isProVersion','colormode','resetAnalysisStates','manufacturer','fire','TEST-PRO-KEY','garten','LTM.dailyDigests','LTM.baselineStatus','getForeignObjectsAsync','eventHistory','AI\x20Alert\x20Status','analysis.activitySummary','(((.+)+)+)+$','griff','\x20min).\x20Inactivity\x20Monitor:\x20','log','Cogni-Living\x20Alert','4970NDdjiF','channel','text','response','city','Logbook','Comfort\x20Suggestion','last\x20action','driftDetails','sensor.door','sensorLastValues','temp','rating','scanDevices','alert','notifyTelegramInstance','CONFIG_PENDING','long','object','\x0a\x20\x20\x20\x20\x20\x20\x20\x20MODUS:\x20','sendToAsync','geminiApiKey','0\x203\x20*\x20*\x20*','rain','Analysiere\x20ausgewogen\x20auf\x20Gesundheit,\x20Sicherheit\x20und\x20Komfort.','‚ö†Ô∏è\x20Alarm','getForeignStateAsync','latitude'];a0_0xd8a3=function(){return _0x461ba8;};return a0_0xd8a3();}const a0_0x3f9b28=(function(){let _0x3b4431=!![];return function(_0x135ac6,_0x36cc27){const _0x1eef2a=_0x3b4431?function(){if(_0x36cc27){const _0x4551b4=_0x36cc27['apply'](_0x135ac6,arguments);return _0x36cc27=null,_0x4551b4;}}:function(){};return _0x3b4431=![],_0x1eef2a;};}()),a0_0x1a5aeb=a0_0x3f9b28(this,function(){const _0x29ac8e=a0_0x44de;return a0_0x1a5aeb['toString']()['search'](_0x29ac8e(0xe9))['toString']()[_0x29ac8e(0x1c0)](a0_0x1a5aeb)[_0x29ac8e(0x1c9)](_0x29ac8e(0xe9));});a0_0x1a5aeb();'use strict';const utils=require('@iobroker/adapter-core'),{GoogleGenerativeAI}=require('@google/generative-ai'),schedule=require(a0_0xac581a(0x15a)),axios=require(a0_0xac581a(0x1f6)),HISTORY_MAX_SIZE=0x32,FEEDBACK_MAX_SIZE=0x14,GEMINI_MODEL=a0_0xac581a(0x1fb),ANALYSIS_HISTORY_MAX_SIZE=0x64,RAW_LOG_MAX_SIZE=0x5dc,DAILY_DIGEST_MAX_SIZE_LIMIT=0xb4,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,LTM_SCHEDULE=a0_0xac581a(0x104),LTM_DP_RAW_LOG='LTM.rawEventLog',LTM_DP_DAILY_DIGESTS=a0_0xac581a(0xe3),LTM_DP_STATUS=a0_0xac581a(0x111),LTM_DP_TRIGGER_DIGEST=a0_0xac581a(0x18a),LTM_DP_BASELINE_STATUS=a0_0xac581a(0xe4),LTM_DP_DRIFT_CHANNEL=a0_0xac581a(0x8d),LTM_DP_DRIFT_STATUS=a0_0xac581a(0xd4),LTM_DP_DRIFT_DETAILS=a0_0xac581a(0x200),LTM_DP_DRIFT_LAST_CHECK='LTM.driftAnalysis.lastCheck',SYSTEM_DP_MODE='system.mode',MODE_RESET_SCHEDULE=a0_0xac581a(0x1a0),SYSTEM_MODES={'NORMAL':'normal','VACATION':'vacation','PARTY':a0_0xac581a(0x1c2),'GUEST':'guest'},AUTO_RESET_MODES=[SYSTEM_MODES['PARTY'],SYSTEM_MODES['GUEST']],PERSONA_MAPPING={'generic':a0_0xac581a(0x106),'senior_aal':'PRIORIT√ÑT:\x20Gesundheit\x20und\x20Sicherheit\x20f√ºr\x20Senioren\x20(AAL).\x20Erkenne\x20Inaktivit√§t,\x20potenzielle\x20St√ºrze\x20(indirekt),\x20ungew√∂hnliche\x20n√§chtliche\x20Aktivit√§t.\x20Komfort\x20ist\x20sekund√§r.','family':a0_0xac581a(0x210),'single_comfort':a0_0xac581a(0xa9),'security':a0_0xac581a(0xd5)};class CogniLiving extends utils['Adapter']{constructor(_0x3e9822){const _0x5a914f=a0_0xac581a;super({..._0x3e9822,'name':_0x5a914f(0x13d)}),this['eventHistory']=[],this['analysisHistory']=[],this[_0x5a914f(0x222)]=[],this['rawEventLog']=[],this[_0x5a914f(0x1f0)]=[],this[_0x5a914f(0xf8)]={},this[_0x5a914f(0x21d)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x5a914f(0x1e9)]=null,this[_0x5a914f(0x130)]=null,this[_0x5a914f(0x1bc)]=SYSTEM_MODES['NORMAL'],this[_0x5a914f(0xdc)]=![],this[_0x5a914f(0x1a3)]=![],this['systemUUID']=_0x5a914f(0x21f),this['analysisTimer']=null,this[_0x5a914f(0x192)]=null,this[_0x5a914f(0xda)]=null,this['driftAnalysisTimer']=null,this['on'](_0x5a914f(0xc1),this['onReady']['bind'](this)),this['on'](_0x5a914f(0xc6),this[_0x5a914f(0x8b)]['bind'](this)),this['on'](_0x5a914f(0x138),this[_0x5a914f(0xa2)][_0x5a914f(0x19b)](this)),this['on']('message',this[_0x5a914f(0x80)]['bind'](this));}async[a0_0xac581a(0x11a)](){const _0x363909=a0_0xac581a,_0xf5090a=this['version']||'unknown';this[_0x363909(0xec)][_0x363909(0x7f)](_0x363909(0x1a4)+_0xf5090a+')'),this[_0x363909(0xd1)]['licenseKey']=this[_0x363909(0xd1)]['licenseKey']||'',this['isProVersion']=await this['checkLicense'](this[_0x363909(0xd1)][_0x363909(0xa3)]);this['isProVersion']?this[_0x363909(0xec)][_0x363909(0x7f)](_0x363909(0x221)):this['log'][_0x363909(0x7f)](_0x363909(0x9d));if(!this[_0x363909(0xd1)][_0x363909(0x1fd)]||this[_0x363909(0xd1)][_0x363909(0x1fd)]<0x1)this['config'][_0x363909(0x1fd)]=0x7;if(!this[_0x363909(0xd1)][_0x363909(0x20f)]||this['config'][_0x363909(0x20f)]<0x1)this['config']['ltmStbWindowDays']=0xe;if(!this[_0x363909(0xd1)]['ltmLtbWindowDays']||this[_0x363909(0xd1)][_0x363909(0x151)]<0x1e)this['config'][_0x363909(0x151)]=0x3c;this[_0x363909(0xd1)]['ltmLtbWindowDays']=Math[_0x363909(0x9f)](Math[_0x363909(0x204)](this['config'][_0x363909(0x151)],this['config']['ltmStbWindowDays']+0xe),DAILY_DIGEST_MAX_SIZE_LIMIT);if(this['config'][_0x363909(0x8f)]===undefined)this[_0x363909(0xd1)][_0x363909(0x8f)]=![];if(!this[_0x363909(0xd1)]['inactivityThresholdHours']||this['config']['inactivityThresholdHours']<0x1)this[_0x363909(0xd1)]['inactivityThresholdHours']=0xc;try{const _0x18c575=await this[_0x363909(0x174)](_0x363909(0x1ff));_0x18c575&&_0x18c575['common']&&(this['systemConfig'][_0x363909(0x109)]=_0x18c575[_0x363909(0xaa)][_0x363909(0x109)]||0x0,this['systemConfig']['longitude']=_0x18c575[_0x363909(0xaa)][_0x363909(0x1b8)]||0x0,this[_0x363909(0x21d)][_0x363909(0xf2)]=_0x18c575[_0x363909(0xaa)]['city']||'',this[_0x363909(0xec)]['info'](_0x363909(0x1e4)+(this[_0x363909(0x21d)][_0x363909(0xf2)]||_0x363909(0x181))+'\x20('+this[_0x363909(0x21d)][_0x363909(0x109)]+',\x20'+this[_0x363909(0x21d)][_0x363909(0x1b8)]+')'));}catch(_0x7d2cb1){this[_0x363909(0xec)]['warn'](_0x363909(0x1f3));}if(this[_0x363909(0xd1)][_0x363909(0x103)])try{this[_0x363909(0x1e9)]=new GoogleGenerativeAI(this[_0x363909(0xd1)][_0x363909(0x103)]),this[_0x363909(0x130)]=this[_0x363909(0x1e9)]['getGenerativeModel']({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':'application/json'}}),this[_0x363909(0xec)][_0x363909(0x7f)]('Gemini\x20AI\x20initialized.');}catch(_0x4f4aec){this[_0x363909(0xec)][_0x363909(0x183)](_0x363909(0xce)+_0x4f4aec[_0x363909(0x224)]);}else this[_0x363909(0xec)][_0x363909(0x16a)](_0x363909(0x15c));await this[_0x363909(0x161)](),await this[_0x363909(0x197)]();const _0x1ac1a1=await this[_0x363909(0x168)]('analysis.isAlert');this['lastAlertState']=_0x1ac1a1?!!_0x1ac1a1[_0x363909(0xcd)]:![];try{const _0x2d10fc=await this[_0x363909(0x168)](_0x363909(0x96));if(_0x2d10fc&&_0x2d10fc['val'])this['analysisHistory']=JSON[_0x363909(0x18d)](_0x2d10fc[_0x363909(0xcd)]['toString']());}catch(_0x23be0a){this[_0x363909(0x172)]=[];}try{const _0x41d6ae=await this['getStateAsync'](_0x363909(0x228));if(_0x41d6ae&&_0x41d6ae[_0x363909(0xcd)])this[_0x363909(0x222)]=JSON['parse'](_0x41d6ae[_0x363909(0xcd)][_0x363909(0x1b4)]());}catch(_0x340818){this['feedbackHistory']=[];}await this[_0x363909(0x128)](),await this['loadDailyDigests'](),this[_0x363909(0x177)](_0x363909(0x90)),this[_0x363909(0x177)](LTM_DP_TRIGGER_DIGEST),this[_0x363909(0x177)](SYSTEM_DP_MODE);const _0x1a89f7=this[_0x363909(0xd1)]['devices'];if(_0x1a89f7&&_0x1a89f7[_0x363909(0x198)]>0x0){this[_0x363909(0xec)]['info'](_0x363909(0x12c)+_0x1a89f7['length']+_0x363909(0x1ea));for(const _0x2a9898 of _0x1a89f7){if(_0x2a9898['id']){await this[_0x363909(0x97)](_0x2a9898['id']);try{const _0x4f1bac=await this[_0x363909(0x108)](_0x2a9898['id']);if(_0x4f1bac)this[_0x363909(0xf8)][_0x2a9898['id']]=_0x4f1bac['val'];}catch(_0x1f042a){}}}}if(this[_0x363909(0x21a)])clearInterval(this[_0x363909(0x21a)]);const _0x32a93a=this['config'][_0x363909(0x13e)]||0xf;_0x32a93a>0x0&&(this[_0x363909(0xec)]['info'](_0x363909(0x122)+_0x32a93a+_0x363909(0xeb)+(this[_0x363909(0xd1)][_0x363909(0x8f)]?'ON':_0x363909(0x120))),this[_0x363909(0x21a)]=setInterval(()=>this[_0x363909(0x18e)](),_0x32a93a*0x3c*0x3e8)),this[_0x363909(0xbe)](),this[_0x363909(0x164)](),this['setupDriftAnalysisScheduler']();}async['scanForDevices'](_0x4ad112={}){const _0x303991=a0_0xac581a;this[_0x303991(0xec)]['info']('Starting\x20Smart\x20Scan\x20with\x20filters:\x20'+JSON[_0x303991(0x21b)](_0x4ad112));const _0x202010=[],_0x359da6=_0x4ad112[_0x303991(0x1db)]!==![],_0xd652fc=_0x4ad112[_0x303991(0x94)]!==![],_0x315704=_0x4ad112[_0x303991(0x1a7)]!==![],_0x56a118=_0x4ad112[_0x303991(0x19a)]===!![],_0x4dec08=_0x4ad112[_0x303991(0x215)]===!![],_0x2141c2=_0x4ad112[_0x303991(0x1ee)]||[],_0x5e4aa8=await this[_0x303991(0xe5)](_0x303991(0x1da),_0x303991(0x1e7)),_0x193d3c=await this['getForeignObjectsAsync'](_0x303991(0x1a8),_0x303991(0x1e7)),_0x5d171e={},_0x58772b={},_0xc248e3={},_0x406a99=(_0x501356,_0x5e8406,_0x383d7d=![])=>{const _0x4a8234=_0x303991;if(!_0x501356)return;for(const _0x3debda in _0x501356){const _0x133590=_0x501356[_0x3debda];if(_0x133590&&_0x133590['common']&&_0x133590[_0x4a8234(0xaa)][_0x4a8234(0xab)]){const _0x58d6fd=(typeof _0x133590[_0x4a8234(0xaa)][_0x4a8234(0x137)]==='object'?_0x133590['common'][_0x4a8234(0x137)]['de']:_0x133590[_0x4a8234(0xaa)][_0x4a8234(0x137)])||_0x133590[_0x4a8234(0xaa)]['name'];if(_0x383d7d)_0xc248e3[_0x3debda]=_0x58d6fd;for(const _0x25892d of _0x133590[_0x4a8234(0xaa)]['members']){if(_0x383d7d){if(!_0x5e8406[_0x25892d])_0x5e8406[_0x25892d]=[];_0x5e8406[_0x25892d][_0x4a8234(0x10a)](_0x3debda);}else _0x5e8406[_0x25892d]=_0x58d6fd;}}}};_0x406a99(_0x5e4aa8,_0x5d171e),_0x406a99(_0x193d3c,_0x58772b,!![]);const _0x184100=await this[_0x303991(0xe5)]('*',_0x303991(0x209)),_0x23fabc=['UNREACH',_0x303991(0x123),_0x303991(0x11f),_0x303991(0x1d6),_0x303991(0x17c),'FAULT',_0x303991(0x169),_0x303991(0x17b),_0x303991(0xfe),'DUTYCYCLE','DUTY_CYCLE',_0x303991(0x150),_0x303991(0x1cb),_0x303991(0x1d5),_0x303991(0x1d2),_0x303991(0x1de),_0x303991(0x201),_0x303991(0x142),_0x303991(0x9a),_0x303991(0x1b6),_0x303991(0x16c),_0x303991(0xaf),_0x303991(0x1d0),'AES_KEY',_0x303991(0x10c),_0x303991(0x9b),'link_quality',_0x303991(0x19d),_0x303991(0x176),_0x303991(0x14b),_0x303991(0x1fa),'connection',_0x303991(0x7f),_0x303991(0x92),_0x303991(0x1f8),_0x303991(0xf5),'archetype',_0x303991(0xfc),'mode',_0x303991(0xdd),_0x303991(0x1a2),'xy','ct',_0x303991(0xcc),_0x303991(0xa6),'productname',_0x303991(0xdf),_0x303991(0x119),_0x303991(0x132),_0x303991(0x187),_0x303991(0x1fe),_0x303991(0xd3),_0x303991(0x223),_0x303991(0x134),_0x303991(0x115),_0x303991(0xbd),_0x303991(0x20e),_0x303991(0x89),_0x303991(0x179),_0x303991(0x1ed),_0x303991(0x199),'forecast','info',_0x303991(0x12a)];if(!_0x4dec08)_0x23fabc[_0x303991(0x10a)](_0x303991(0x20a),_0x303991(0x215),_0x303991(0x227),_0x303991(0x191),'uv',_0x303991(0x105),'precip');const _0x31b263=['system.',_0x303991(0xb1),_0x303991(0xd0),'vis.','history.',_0x303991(0x1c5),'icons-mfd.',_0x303991(0xd2)];if(!_0x4dec08)_0x31b263[_0x303991(0x10a)](_0x303991(0x159),_0x303991(0x12f),_0x303991(0x141),_0x303991(0xa1),_0x303991(0x18b));const _0x545143=(_0x45464,_0x3d057a,_0x2793a1=![])=>{const _0x27b695=_0x303991,_0x177f5f=_0x45464[_0x27b695(0x1ca)]('.');if(_0x3d057a[_0x45464])return _0x3d057a[_0x45464];if(_0x177f5f[_0x27b695(0x198)]>0x2&&_0x3d057a[_0x177f5f[_0x27b695(0x126)](0x0,-0x1)[_0x27b695(0x17f)]('.')])return _0x3d057a[_0x177f5f[_0x27b695(0x126)](0x0,-0x1)[_0x27b695(0x17f)]('.')];if(_0x177f5f[_0x27b695(0x198)]>0x3&&_0x3d057a[_0x177f5f[_0x27b695(0x126)](0x0,-0x2)[_0x27b695(0x17f)]('.')])return _0x3d057a[_0x177f5f[_0x27b695(0x126)](0x0,-0x2)[_0x27b695(0x17f)]('.')];return _0x2793a1?[]:null;};for(const _0x598aa6 in _0x184100){const _0x4d2919=_0x184100[_0x598aa6];if(!_0x4d2919||!_0x4d2919[_0x303991(0xaa)])continue;if(_0x31b263[_0x303991(0x167)](_0x3ccbb7=>_0x598aa6['startsWith'](_0x3ccbb7)))continue;const _0x57963e=_0x4d2919[_0x303991(0xaa)][_0x303991(0x1a5)]||'',_0x5ea479=(_0x4d2919['common'][_0x303991(0x137)]&&typeof _0x4d2919[_0x303991(0xaa)][_0x303991(0x137)]==='object'?_0x4d2919[_0x303991(0xaa)]['name']['de']:_0x4d2919['common'][_0x303991(0x137)])||'',_0x681e31=_0x598aa6[_0x303991(0x15e)](),_0x4ad19c=_0x5ea479?_0x5ea479[_0x303991(0x153)]():'',_0x5bb01a=_0x598aa6['toLowerCase'](),_0x2a89ce=_0x545143(_0x598aa6,_0x5d171e),_0x660ac5=_0x545143(_0x598aa6,_0x58772b,!![]);let _0x55cd2c=null,_0x1df9ff=![];if(_0x660ac5&&_0x660ac5[_0x303991(0x198)]>0x0){const _0x54ad79=_0x660ac5[_0x303991(0xb3)](_0x5a3197=>_0x2141c2[_0x303991(0xa5)](_0x5a3197));if(_0x54ad79){_0x1df9ff=!![];const _0x340ac6=_0xc248e3[_0x54ad79];if(_0x5bb01a[_0x303991(0xa5)](_0x303991(0x160))||_0x5bb01a[_0x303991(0xa5)](_0x303991(0x1db)))_0x55cd2c='Bewegung';else{if(_0x5bb01a[_0x303991(0xa5)](_0x303991(0x1b1))||_0x5bb01a['includes'](_0x303991(0xe0))||_0x4ad19c['includes'](_0x303991(0x12b)))_0x55cd2c='Rauchmelder';else{if(_0x5bb01a[_0x303991(0xa5)](_0x303991(0x209))||_0x5bb01a['includes'](_0x303991(0x12d))||_0x5bb01a[_0x303991(0xa5)]('on'))_0x55cd2c='Schalter/Licht';else _0x55cd2c=_0x340ac6;}}}}if(!_0x1df9ff&&!_0x4dec08){if(_0x23fabc[_0x303991(0x167)](_0x4f2bae=>_0x4ad19c['includes'](_0x4f2bae)||_0x681e31['includes'](_0x4f2bae)))continue;}if(!_0x55cd2c&&_0x359da6){const _0x12cd26=_0x57963e[_0x303991(0xa5)](_0x303991(0x15f))||_0x57963e[_0x303991(0xa5)](_0x303991(0x1d3)),_0x24f3c0=_0x4ad19c['includes'](_0x303991(0x10f))||_0x4ad19c[_0x303991(0xa5)](_0x303991(0x225));if(_0x12cd26||_0x24f3c0)_0x55cd2c='Bewegung';}if(!_0x55cd2c&&_0xd652fc){const _0x41744f=_0x5bb01a[_0x303991(0xa5)](_0x303991(0xbb))&&_0x5bb01a['endsWith']('.state');(_0x41744f||_0x57963e[_0x303991(0xa5)](_0x303991(0xf7))||_0x57963e['includes']('sensor.window')||(_0x4ad19c[_0x303991(0xa5)](_0x303991(0x110))||_0x4ad19c[_0x303991(0xa5)](_0x303991(0x116)))&&!_0x4ad19c[_0x303991(0xa5)](_0x303991(0xf9))&&!_0x4ad19c[_0x303991(0xa5)](_0x303991(0xea))&&(_0x4d2919['common'][_0x303991(0x1b9)]===_0x303991(0x180)||_0x4d2919[_0x303991(0xaa)][_0x303991(0x1b9)]===_0x303991(0x17a)))&&(_0x55cd2c=_0x303991(0xc9));}if(!_0x55cd2c&&_0x315704){const _0x20028e=_0x57963e[_0x303991(0xa5)](_0x303991(0x1cc))||_0x57963e['includes']('level.dimmer'),_0x3a7958=_0x4ad19c['includes'](_0x303991(0x1ba))||_0x4ad19c['includes']('lampe')||_0x4ad19c[_0x303991(0xa5)]('leuchte'),_0x358b03=_0x5bb01a[_0x303991(0x13f)](_0x303991(0x211))||_0x5bb01a[_0x303991(0x13f)](_0x303991(0xa8))||_0x5bb01a[_0x303991(0x13f)](_0x303991(0xc5))||_0x5bb01a[_0x303991(0x13f)]('.bri')||_0x5bb01a[_0x303991(0x13f)](_0x303991(0x1a9));(_0x20028e||_0x3a7958)&&_0x358b03&&_0x4d2919[_0x303991(0xaa)][_0x303991(0x18f)]&&(_0x55cd2c=_0x303991(0x135));}!_0x55cd2c&&_0x56a118&&((_0x57963e['includes']('value.temperature')||_0x57963e['includes'](_0x303991(0xac))||_0x4ad19c['includes'](_0x303991(0x212)))&&(_0x55cd2c=_0x303991(0x93)));if(_0x55cd2c){let _0x48a64e=_0x2a89ce||'';if(!_0x48a64e){if(_0x4ad19c[_0x303991(0xa5)]('bad'))_0x48a64e=_0x303991(0x21c);else{if(_0x4ad19c[_0x303991(0xa5)](_0x303991(0x12e)))_0x48a64e=_0x303991(0x1ab);else{if(_0x4ad19c[_0x303991(0xa5)](_0x303991(0x86)))_0x48a64e=_0x303991(0x1ad);else{if(_0x4ad19c['includes'](_0x303991(0x13b)))_0x48a64e=_0x303991(0x81);else{if(_0x4ad19c[_0x303991(0xa5)](_0x303991(0x193))||_0x4ad19c[_0x303991(0xa5)](_0x303991(0x10e)))_0x48a64e=_0x303991(0x185);else{if(_0x4ad19c[_0x303991(0xa5)](_0x303991(0xe2)))_0x48a64e=_0x303991(0xc0);}}}}}}let _0x2e5454=0x0;if(_0x1df9ff)_0x2e5454+=0x1e;else{if(_0x2a89ce)_0x2e5454+=0x14;else{if(_0x48a64e)_0x2e5454+=0xa;}}_0x202010[_0x303991(0x10a)]({'id':_0x598aa6,'name':_0x5ea479||_0x598aa6,'type':_0x55cd2c,'location':_0x48a64e,'logDuplicates':_0x55cd2c==='Bewegung','_score':_0x2e5454});}}return _0x202010[_0x303991(0x1c8)]((_0x56f96b,_0x321182)=>_0x321182['_score']-_0x56f96b[_0x303991(0x117)]),_0x202010;}async['getSystemUUID'](){const _0x22db88=a0_0xac581a;try{const _0xb5f0af=await this[_0x22db88(0x174)](_0x22db88(0x219));if(_0xb5f0af&&_0xb5f0af[_0x22db88(0x213)]&&_0xb5f0af[_0x22db88(0x213)]['uuid'])return _0xb5f0af['native'][_0x22db88(0x20c)];return _0x22db88(0x13c);}catch(_0x1713f2){return _0x22db88(0x7e);}}async[a0_0xac581a(0x218)](_0x4ad920){const _0x433c8a=a0_0xac581a;if(!_0x4ad920)return![];this[_0x433c8a(0x11b)]=await this[_0x433c8a(0x157)](),this['log'][_0x433c8a(0x7f)](_0x433c8a(0xc2)+this[_0x433c8a(0x11b)]);if(_0x4ad920===_0x433c8a(0xe1))return this[_0x433c8a(0xec)][_0x433c8a(0x7f)](_0x433c8a(0x195)),!![];if(_0x4ad920[_0x433c8a(0x14f)](_0x433c8a(0x226)))return this[_0x433c8a(0xec)]['info'](_0x433c8a(0xdb)),!![];return![];}async['createAllObjects'](){const _0x562ad2=a0_0xac581a;await this[_0x562ad2(0x18c)](),await this[_0x562ad2(0x15b)](_0x562ad2(0x144),{'type':_0x562ad2(0x209),'common':{'name':_0x562ad2(0x91),'type':_0x562ad2(0xd9),'role':_0x562ad2(0x12a),'read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x562ad2(0x1d9),{'type':_0x562ad2(0x209),'common':{'name':_0x562ad2(0x214),'type':_0x562ad2(0xd9),'role':_0x562ad2(0x12a),'read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x562ad2(0x90),{'type':_0x562ad2(0x209),'common':{'name':_0x562ad2(0x121),'type':'boolean','role':_0x562ad2(0x149),'read':!![],'write':!![],'def':![]},'native':{}}),await this[_0x562ad2(0x15b)](_0x562ad2(0x217),{'type':'state','common':{'name':'Last\x20Result','type':_0x562ad2(0xd9),'role':'json','read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x562ad2(0x1ae),{'type':_0x562ad2(0x209),'common':{'name':_0x562ad2(0xe7),'type':_0x562ad2(0x180),'role':'indicator.alarm','read':!![],'write':![],'def':![]},'native':{}}),await this[_0x562ad2(0x15b)]('analysis.isEmergency',{'type':_0x562ad2(0x209),'common':{'name':'AI\x20Emergency\x20Status','type':'boolean','role':'indicator.alarm.fire','read':!![],'write':![],'def':![]},'native':{}}),await this[_0x562ad2(0x15b)](_0x562ad2(0x220),{'type':'state','common':{'name':_0x562ad2(0x1ac),'type':_0x562ad2(0xd9),'role':_0x562ad2(0x9e),'read':!![],'write':![]},'native':{}}),await this[_0x562ad2(0x15b)](_0x562ad2(0xe8),{'type':_0x562ad2(0x209),'common':{'name':_0x562ad2(0xb0),'type':_0x562ad2(0xd9),'role':_0x562ad2(0xf0),'read':!![],'write':![]},'native':{}}),await this[_0x562ad2(0x15b)](_0x562ad2(0x88),{'type':_0x562ad2(0x209),'common':{'name':_0x562ad2(0x1fc),'type':_0x562ad2(0xd9),'role':_0x562ad2(0x209),'read':!![],'write':![],'def':'N/A'},'native':{}}),await this[_0x562ad2(0x15b)]('analysis.comfortSummary',{'type':'state','common':{'name':'Comfort\x20Summary','type':_0x562ad2(0xd9),'role':_0x562ad2(0xf0),'read':!![],'write':![]},'native':{}}),await this[_0x562ad2(0x15b)](_0x562ad2(0x182),{'type':'state','common':{'name':_0x562ad2(0xf4),'type':_0x562ad2(0xd9),'role':_0x562ad2(0xf0),'read':!![],'write':![]},'native':{}}),await this[_0x562ad2(0x11e)]('analysis.automation',{'type':_0x562ad2(0xef),'common':{'name':_0x562ad2(0x140)},'native':{}}),await this[_0x562ad2(0x15b)](_0x562ad2(0x16e),{'type':_0x562ad2(0x209),'common':{'name':_0x562ad2(0x1e6),'type':'boolean','role':'indicator','read':!![],'write':![],'def':![]},'native':{}}),await this[_0x562ad2(0x15b)]('analysis.automation.description',{'type':_0x562ad2(0x209),'common':{'name':'Description','type':_0x562ad2(0xd9),'role':'text','read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync']('analysis.automation.suggestedAction',{'type':_0x562ad2(0x209),'common':{'name':_0x562ad2(0x202),'type':'string','role':_0x562ad2(0xf0),'read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync']('analysis.analysisHistory',{'type':_0x562ad2(0x209),'common':{'name':_0x562ad2(0xf3),'type':_0x562ad2(0xd9),'role':_0x562ad2(0x12a),'read':!![],'write':![],'def':'[]'},'native':{}}),await this['setObjectNotExistsAsync'](_0x562ad2(0x228),{'type':'state','common':{'name':_0x562ad2(0x1c6),'type':_0x562ad2(0xd9),'role':_0x562ad2(0x12a),'read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x562ad2(0x1e0)](),await this['checkLtmDriftObjects']();}[a0_0xac581a(0x8b)](_0x2de4ac,_0x482c34){const _0x4f3a88=a0_0xac581a;if(!_0x482c34)return;if(_0x2de4ac===this[_0x4f3a88(0x98)]+'.'+SYSTEM_DP_MODE){_0x482c34[_0x4f3a88(0xcd)]&&Object[_0x4f3a88(0x7c)](SYSTEM_MODES)[_0x4f3a88(0xa5)](_0x482c34['val'])&&(this[_0x4f3a88(0x1bc)]=_0x482c34[_0x4f3a88(0xcd)]);if(!_0x482c34[_0x4f3a88(0x184)])this['setState'](_0x2de4ac,{'val':this[_0x4f3a88(0x1bc)],'ack':!![]});return;}if(!_0x482c34[_0x4f3a88(0x184)]){_0x2de4ac[_0x4f3a88(0xa5)]('analysis.trigger')&&_0x482c34['val']&&(this[_0x4f3a88(0x14a)](_0x2de4ac,{'val':![],'ack':!![]}),this[_0x4f3a88(0x16b)]());if(_0x2de4ac[_0x4f3a88(0xa5)](_0x4f3a88(0x20b))&&_0x482c34[_0x4f3a88(0xcd)]){this[_0x4f3a88(0x14a)](_0x2de4ac,{'val':![],'ack':!![]});if(this[_0x4f3a88(0xdc)])this['createDailyDigest']();}return;}const _0x57e979=(this['config'][_0x4f3a88(0x216)]||[])['find'](_0xd40766=>_0xd40766['id']===_0x2de4ac);if(_0x57e979)this['processSensorEvent'](_0x2de4ac,_0x482c34,_0x57e979);}async[a0_0xac581a(0xa0)](_0x5a914e,_0x32e384,_0x5ebf25){const _0x108ff9=a0_0xac581a;if(!_0x5ebf25[_0x108ff9(0x13a)]&&this[_0x108ff9(0xf8)][_0x5a914e]===_0x32e384[_0x108ff9(0xcd)])return;this[_0x108ff9(0xf8)][_0x5a914e]=_0x32e384[_0x108ff9(0xcd)];const _0x26de79={'timestamp':_0x32e384['ts'],'id':_0x5a914e,'name':_0x5ebf25[_0x108ff9(0x137)],'value':_0x32e384['val'],'location':_0x5ebf25[_0x108ff9(0x131)],'type':_0x5ebf25[_0x108ff9(0x1b9)]};this['eventHistory'][_0x108ff9(0x1aa)](_0x26de79);if(this[_0x108ff9(0xe6)][_0x108ff9(0x198)]>HISTORY_MAX_SIZE)this[_0x108ff9(0xe6)][_0x108ff9(0x196)]();await this['setStateAsync'](_0x108ff9(0x144),{'val':JSON[_0x108ff9(0x21b)](_0x26de79),'ack':!![]}),this[_0x108ff9(0x190)][_0x108ff9(0x10a)]({'timestamp':new Date(_0x32e384['ts'])[_0x108ff9(0x1f4)](),'sensorName':_0x5ebf25[_0x108ff9(0x137)],'location':_0x5ebf25[_0x108ff9(0x131)],'value':_0x32e384[_0x108ff9(0xcd)]}),await this[_0x108ff9(0x11c)]();}[a0_0xac581a(0x18e)](){const _0x2f7f9a=a0_0xac581a,_0x4c9377=this[_0x2f7f9a(0xd1)][_0x2f7f9a(0xd7)]||0xc,_0x39fa68=this[_0x2f7f9a(0xd1)]['inactivityMonitoringEnabled'],_0x2ca938=this[_0x2f7f9a(0xe6)][_0x2f7f9a(0x198)]>0x0?this[_0x2f7f9a(0xe6)][0x0]['timestamp']:Date[_0x2f7f9a(0x20d)](),_0x5ce6ba=(Date[_0x2f7f9a(0x20d)]()-_0x2ca938)/(0x3e8*0x3c*0x3c);let _0x584770='';_0x39fa68&&this[_0x2f7f9a(0x1bc)]===SYSTEM_MODES[_0x2f7f9a(0x203)]&&_0x5ce6ba>_0x4c9377&&(this['log'][_0x2f7f9a(0x16a)]('üö®\x20Dead\x20Man\x27s\x20Switch:\x20Keine\x20Aktivit√§t\x20seit\x20'+_0x5ce6ba[_0x2f7f9a(0x16d)](0x1)+'\x20Stunden!'),_0x584770=_0x2f7f9a(0x1f5)+_0x5ce6ba[_0x2f7f9a(0x16d)](0x1)+_0x2f7f9a(0x87));if(_0x584770){this['runGeminiAnalysis'](_0x584770)[_0x2f7f9a(0x129)](_0x3cee50=>this['log'][_0x2f7f9a(0x183)](_0x3cee50));return;}if(this['eventHistory'][_0x2f7f9a(0x198)]===0x0){this['setState'](_0x2f7f9a(0x1ae),{'val':![],'ack':!![]}),this[_0x2f7f9a(0x14a)]('analysis.isEmergency',{'val':![],'ack':!![]}),this['resetAnalysisStates']();return;}const _0x3b29e5=Date[_0x2f7f9a(0x20d)](),_0x2c3878=_0x3b29e5-this['eventHistory'][0x0]['timestamp'],_0x90de9d=(this['config'][_0x2f7f9a(0x13e)]||0xf)*0x3c*0x3e8;if(_0x2c3878>_0x90de9d){this[_0x2f7f9a(0x14a)]('analysis.isAlert',{'val':![],'ack':!![]}),this['setState']('analysis.isEmergency',{'val':![],'ack':!![]}),this['resetAnalysisStates']();return;}this[_0x2f7f9a(0x16b)]()['catch'](_0x4183c3=>this[_0x2f7f9a(0xec)]['error'](_0x4183c3));}async[a0_0xac581a(0x16b)](_0x12f378=''){const _0x18b9f3=a0_0xac581a;if(!this[_0x18b9f3(0x130)])return;const _0x4b75ec=this[_0x18b9f3(0xe6)][_0x18b9f3(0x198)]>0x0?this[_0x18b9f3(0xe6)]:[{'note':_0x18b9f3(0x1c1)}],_0xbd0e98=PERSONA_MAPPING[this[_0x18b9f3(0xd1)][_0x18b9f3(0x208)]||_0x18b9f3(0x99)],_0x67635c=this[_0x18b9f3(0xd1)][_0x18b9f3(0x1e3)]||'',_0x1663f8=this[_0x18b9f3(0x1bc)],_0x5bb8cd=new Date(),_0x4a39d1=_0x5bb8cd[_0x18b9f3(0x19c)]('de-DE',{'weekday':_0x18b9f3(0xff),'hour':_0x18b9f3(0xba),'minute':_0x18b9f3(0xba)}),_0x4c7754=this[_0x18b9f3(0x21d)],_0x20e403=_0x18b9f3(0x139)+_0x4c7754['latitude']+_0x18b9f3(0x1ce)+_0x4c7754[_0x18b9f3(0x1b8)]+'\x20('+(_0x4c7754['city']||_0x18b9f3(0x181))+_0x18b9f3(0xcf);let _0x4d225f='Baseline:\x20Inactive.',_0x44c9ba=_0x18b9f3(0x1e2);if(this[_0x18b9f3(0xdc)]&&this[_0x18b9f3(0x1f0)][_0x18b9f3(0x198)]>=(this[_0x18b9f3(0xd1)]['minDaysForBaseline']||0x7)&&_0x1663f8===SYSTEM_MODES['NORMAL']){const _0x20ded7=this['dailyDigests'][_0x18b9f3(0x126)](-(this['config']['ltmStbWindowDays']||0xe))['reverse']();_0x4d225f=_0x18b9f3(0x21e)+JSON[_0x18b9f3(0x21b)](_0x20ded7),_0x44c9ba='1.\x20ANALYSE\x20&\x20DEVIATION:\x20Vergleiche\x20Events\x20mit\x20STB.\x20deviation=\x27none|slight|significant|critical\x27.';}let _0x4b742b='';if(this['feedbackHistory'][_0x18b9f3(0x198)]>0x0){const _0x3dd793=this['feedbackHistory'][_0x18b9f3(0xa4)](_0x18c3e0=>_0x18c3e0[_0x18b9f3(0xfa)]==='false_positive'||_0x18c3e0['rating']==='needs_improvement')[_0x18b9f3(0x126)](0x0,0x3)[_0x18b9f3(0x155)](_0x561d2f=>'-\x20User\x20Feedback:\x20Alarm\x20\x22'+_0x561d2f['alertReason']+_0x18b9f3(0xca)+new Date(_0x561d2f[_0x18b9f3(0x118)])[_0x18b9f3(0x95)]()+_0x18b9f3(0x1b0)+(_0x561d2f[_0x18b9f3(0x1bd)]||_0x18b9f3(0x1d4))+'.')[_0x18b9f3(0x17f)]('\x0a');_0x3dd793&&(_0x4b742b=_0x18b9f3(0x1b7)+_0x3dd793+'\x0a');}const _0x183c37=_0x12f378?_0x18b9f3(0xbf)+_0x12f378+_0x18b9f3(0x85):'',_0x4f20bd=_0x18b9f3(0x163)+_0x4a39d1+'.\x20'+_0x20e403+_0x18b9f3(0x101)+_0x1663f8+_0x18b9f3(0xc3)+_0x67635c+_0x18b9f3(0x17e)+_0xbd0e98+_0x18b9f3(0xd8)+_0x4d225f+'\x20'+_0x4b742b+'\x20'+_0x183c37+_0x18b9f3(0x14d)+_0x44c9ba+_0x18b9f3(0xc8)+JSON[_0x18b9f3(0x21b)](_0x4b75ec)+_0x18b9f3(0x133);try{const _0x2aecbb=await this[_0x18b9f3(0x130)][_0x18b9f3(0x186)](_0x4f20bd),_0x248a2d=JSON[_0x18b9f3(0x18d)](_0x2aecbb['response'][_0x18b9f3(0xf0)]()[_0x18b9f3(0x7d)](/```json|```/g,'')[_0x18b9f3(0x145)]());await this[_0x18b9f3(0x113)](_0x18b9f3(0x217),{'val':JSON[_0x18b9f3(0x21b)](_0x248a2d),'ack':!![]}),await this['setStateAsync'](_0x18b9f3(0xe8),{'val':_0x248a2d[_0x18b9f3(0xb2)][_0x18b9f3(0x179)]||_0x18b9f3(0xbc),'ack':!![]}),await this[_0x18b9f3(0x113)]('analysis.deviationFromBaseline',{'val':_0x248a2d['activity'][_0x18b9f3(0x188)]||_0x18b9f3(0xbc),'ack':!![]}),await this[_0x18b9f3(0x113)](_0x18b9f3(0x220),{'val':_0x248a2d['activity'][_0x18b9f3(0x19f)]||'','ack':!![]});const _0x9ad7e8=_0x248a2d[_0x18b9f3(0x9c)][_0x18b9f3(0x1a6)],_0x40fc70=this[_0x18b9f3(0xdc)]?_0x9ad7e8['patternDetected']:![];await this[_0x18b9f3(0x113)]('analysis.automation.patternDetected',{'val':_0x40fc70,'ack':!![]}),await this[_0x18b9f3(0x113)](_0x18b9f3(0x127),{'val':_0x40fc70?_0x9ad7e8['description']:this[_0x18b9f3(0xdc)]?'':'Pro\x20Feature','ack':!![]});const _0x335ce7=_0x248a2d[_0x18b9f3(0xb2)][_0x18b9f3(0xae)]||![],_0x3c5c67=_0x248a2d[_0x18b9f3(0xb2)][_0x18b9f3(0x1dc)]||![];if(_0x335ce7||_0x3c5c67){await this[_0x18b9f3(0x113)](_0x18b9f3(0x1ae),{'val':!![],'ack':!![]}),await this[_0x18b9f3(0x113)](_0x18b9f3(0xb6),{'val':_0x3c5c67,'ack':!![]});if(!this[_0x18b9f3(0x1a3)]||_0x3c5c67){const _0x37b1cd=_0x3c5c67?'üö®üö®\x20NOTFALL':_0x18b9f3(0x107);this['sendNotification'](_0x37b1cd+':\x20'+_0x248a2d[_0x18b9f3(0xb2)][_0x18b9f3(0x19f)],![],_0x3c5c67);}}else await this[_0x18b9f3(0x113)](_0x18b9f3(0x1ae),{'val':![],'ack':!![]}),await this[_0x18b9f3(0x113)](_0x18b9f3(0xb6),{'val':![],'ack':!![]});this['lastAlertState']=_0x335ce7||_0x3c5c67;const _0x166cc6={'timestamp':Date[_0x18b9f3(0x20d)](),'id':Date['now']()[_0x18b9f3(0x1b4)](),'analysis':_0x248a2d,'systemMode':_0x1663f8,'isPro':this[_0x18b9f3(0xdc)]};this['updateAnalysisHistory'](_0x166cc6);}catch(_0x325308){this[_0x18b9f3(0xec)][_0x18b9f3(0x183)](_0x18b9f3(0x112)+_0x325308['message']);}}async[a0_0xac581a(0xb5)](){const _0x1feb8b=a0_0xac581a;if(!this['isProVersion'])return;await this['setStateAsync'](LTM_DP_STATUS,{'val':_0x1feb8b(0x166)+new Date()[_0x1feb8b(0x19c)](),'ack':!![]});if(!this[_0x1feb8b(0x130)]||this[_0x1feb8b(0x190)][_0x1feb8b(0x198)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await this[_0x1feb8b(0x113)](LTM_DP_STATUS,{'val':_0x1feb8b(0x1bb),'ack':!![]});return;}const _0x21d106=JSON['parse'](JSON[_0x1feb8b(0x21b)](this[_0x1feb8b(0x190)])),_0x49375b=(this['config'][_0x1feb8b(0x1e3)]||'')[_0x1feb8b(0x1b2)](0x0,0x3e8),_0x1f7e10='ROLLE:\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20KONTEXT:\x20'+_0x49375b+_0x1feb8b(0x1cf)+JSON[_0x1feb8b(0x21b)](_0x21d106);try{const _0x173bf3=await this['geminiModel']['generateContent'](_0x1f7e10),_0x599979=JSON[_0x1feb8b(0x18d)](_0x173bf3[_0x1feb8b(0xf1)]['text']()['replace'](/```json|```/g,'')[_0x1feb8b(0x145)]());_0x599979[_0x1feb8b(0x179)]&&(this['dailyDigests'][_0x1feb8b(0x10a)]({'timestamp':new Date()['toISOString'](),'eventCount':_0x21d106[_0x1feb8b(0x198)],'summary':_0x599979[_0x1feb8b(0x179)],'activityLevel':_0x599979['activityLevel'],'systemMode':this[_0x1feb8b(0x1bc)]}),await this[_0x1feb8b(0xc7)](),this['rawEventLog']=[],await this[_0x1feb8b(0x11c)](),await this[_0x1feb8b(0x113)](LTM_DP_STATUS,{'val':'Success:\x20Compressed\x20'+_0x21d106['length']+_0x1feb8b(0x1dd),'ack':!![]}));}catch(_0xe3110b){await this['setStateAsync'](LTM_DP_STATUS,{'val':'Error:\x20'+_0xe3110b['message'],'ack':!![]});}}async[a0_0xac581a(0xb4)](){const _0x43e8b1=a0_0xac581a;if(!this['isProVersion']||!this[_0x43e8b1(0x130)])return;const _0x9e2982=this[_0x43e8b1(0xd1)]['ltmStbWindowDays']||0xe;if(this[_0x43e8b1(0x1f0)]['length']<_0x9e2982+(this['config'][_0x43e8b1(0x1fd)]||0x7)){await this['setStateAsync'](LTM_DP_DRIFT_STATUS,{'val':_0x43e8b1(0x10d),'ack':!![]});return;}const _0xbca725=this[_0x43e8b1(0x1f0)][_0x43e8b1(0x126)](-_0x9e2982),_0x4565d4=this[_0x43e8b1(0x1f0)]['slice'](0x0,this[_0x43e8b1(0x1f0)][_0x43e8b1(0x198)]-_0x9e2982),_0x187a9f=_0x43e8b1(0xcb)+JSON['stringify'](_0x4565d4)+_0x43e8b1(0x206)+JSON[_0x43e8b1(0x21b)](_0xbca725);try{const _0x523d2f=await this[_0x43e8b1(0x130)][_0x43e8b1(0x186)](_0x187a9f),_0x176d51=JSON[_0x43e8b1(0x18d)](_0x523d2f[_0x43e8b1(0xf1)][_0x43e8b1(0xf0)]()[_0x43e8b1(0x7d)](/```json|```/g,'')[_0x43e8b1(0x145)]());_0x176d51[_0x43e8b1(0x1f7)]&&(await this[_0x43e8b1(0x113)](LTM_DP_DRIFT_STATUS,{'val':_0x176d51[_0x43e8b1(0x1f7)],'ack':!![]}),await this[_0x43e8b1(0x113)](LTM_DP_DRIFT_DETAILS,{'val':_0x176d51[_0x43e8b1(0xf6)],'ack':!![]}),await this[_0x43e8b1(0x113)](LTM_DP_DRIFT_LAST_CHECK,{'val':Date[_0x43e8b1(0x20d)](),'ack':!![]}));}catch(_0xf7bf81){}}async['checkSystemObjects'](){const _0x5870e8=a0_0xac581a;await this[_0x5870e8(0x11e)](_0x5870e8(0xad),{'type':_0x5870e8(0xef),'common':{'name':'System\x20Status\x20&\x20Control'},'native':{}}),await this['extendObjectAsync'](SYSTEM_DP_MODE,{'type':'state','common':{'name':'System\x20Mode','type':_0x5870e8(0xd9),'role':_0x5870e8(0x209),'read':!![],'write':!![],'def':SYSTEM_MODES[_0x5870e8(0x203)],'states':{[SYSTEM_MODES[_0x5870e8(0x203)]]:_0x5870e8(0x156),[SYSTEM_MODES[_0x5870e8(0x17d)]]:'Urlaub',[SYSTEM_MODES[_0x5870e8(0x143)]]:_0x5870e8(0x1f1),[SYSTEM_MODES['GUEST']]:_0x5870e8(0x152)}},'native':{}});}async['loadSystemMode'](){const _0x4c7126=a0_0xac581a;try{const _0x316e73=await this[_0x4c7126(0x168)](SYSTEM_DP_MODE);_0x316e73&&_0x316e73[_0x4c7126(0xcd)]&&Object[_0x4c7126(0x7c)](SYSTEM_MODES)[_0x4c7126(0xa5)](_0x316e73['val'])?this[_0x4c7126(0x1bc)]=_0x316e73[_0x4c7126(0xcd)]:(this[_0x4c7126(0x1bc)]=SYSTEM_MODES[_0x4c7126(0x203)],await this['setStateAsync'](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x4c7126(0x203)],'ack':!![]}));}catch(_0x43e148){this['currentSystemMode']=SYSTEM_MODES[_0x4c7126(0x203)];}}['setupModeResetScheduler'](){const _0x35797e=a0_0xac581a;if(this[_0x35797e(0xda)])this[_0x35797e(0xda)]['cancel']();this[_0x35797e(0xda)]=schedule[_0x35797e(0x205)](MODE_RESET_SCHEDULE,async()=>{const _0xa7d377=_0x35797e;await this[_0xa7d377(0x197)](),AUTO_RESET_MODES[_0xa7d377(0xa5)](this['currentSystemMode'])&&await this[_0xa7d377(0x113)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0xa7d377(0x203)],'ack':![]});});}async[a0_0xac581a(0x165)](){const _0x18fa7f=a0_0xac581a;if(!this[_0x18fa7f(0xdc)]){await this[_0x18fa7f(0x113)](LTM_DP_BASELINE_STATUS,{'val':_0x18fa7f(0x175),'ack':!![]});return;}const _0xfbe5e8=this[_0x18fa7f(0x1f0)][_0x18fa7f(0x198)]>=(this[_0x18fa7f(0xd1)][_0x18fa7f(0x1fd)]||0x7)?_0x18fa7f(0x114)+this[_0x18fa7f(0x1f0)]['length']+'\x20Tage)':'Lernphase\x20('+this[_0x18fa7f(0x1f0)][_0x18fa7f(0x198)]+'/'+(this[_0x18fa7f(0xd1)]['minDaysForBaseline']||0x7)+')';await this[_0x18fa7f(0x113)](LTM_DP_BASELINE_STATUS,{'val':_0xfbe5e8,'ack':!![]});}async[a0_0xac581a(0x1e0)](){const _0x3f211a=a0_0xac581a;await this[_0x3f211a(0x11e)](_0x3f211a(0x162),{'type':'channel','common':{'name':_0x3f211a(0x162)},'native':{}}),await this[_0x3f211a(0x11e)](LTM_DP_RAW_LOG,{'type':_0x3f211a(0x209),'common':{'name':'Raw\x20Log','type':_0x3f211a(0xd9),'role':'json','read':!![],'write':![]},'native':{}}),await this[_0x3f211a(0x11e)](LTM_DP_DAILY_DIGESTS,{'type':'state','common':{'name':'Daily\x20Digests','type':'string','role':_0x3f211a(0x12a),'read':!![],'write':![]},'native':{}}),await this[_0x3f211a(0x11e)](LTM_DP_STATUS,{'type':'state','common':{'name':_0x3f211a(0x1df),'type':_0x3f211a(0xd9),'role':_0x3f211a(0xf0),'read':!![],'write':![]},'native':{}}),await this['extendObjectAsync'](LTM_DP_TRIGGER_DIGEST,{'type':'state','common':{'name':'Trigger\x20Digest','type':'boolean','role':_0x3f211a(0x149),'read':!![],'write':!![],'def':![]},'native':{}}),await this[_0x3f211a(0x11e)](LTM_DP_BASELINE_STATUS,{'type':_0x3f211a(0x209),'common':{'name':'Baseline\x20Status','type':_0x3f211a(0xd9),'role':'text','read':!![],'write':![]},'native':{}});}async[a0_0xac581a(0x1ec)](){const _0x1d9368=a0_0xac581a;await this['extendObjectAsync'](LTM_DP_DRIFT_CHANNEL,{'type':_0x1d9368(0xef),'common':{'name':_0x1d9368(0x1d7)},'native':{}}),await this[_0x1d9368(0x11e)](LTM_DP_DRIFT_STATUS,{'type':_0x1d9368(0x209),'common':{'name':'Drift\x20Status','type':_0x1d9368(0xd9),'role':_0x1d9368(0x209),'read':!![],'write':![],'def':_0x1d9368(0xbc)},'native':{}}),await this['extendObjectAsync'](LTM_DP_DRIFT_DETAILS,{'type':_0x1d9368(0x209),'common':{'name':'Drift\x20Details','type':_0x1d9368(0xd9),'role':_0x1d9368(0xf0),'read':!![],'write':![]},'native':{}}),await this[_0x1d9368(0x11e)](LTM_DP_DRIFT_LAST_CHECK,{'type':_0x1d9368(0x209),'common':{'name':_0x1d9368(0xd6),'type':_0x1d9368(0x17a),'role':'date','read':!![],'write':![]},'native':{}});}async[a0_0xac581a(0x128)](){const _0x3a2248=a0_0xac581a;try{const _0x4b9413=await this[_0x3a2248(0x168)](LTM_DP_RAW_LOG);if(_0x4b9413&&_0x4b9413[_0x3a2248(0xcd)])this['rawEventLog']=JSON[_0x3a2248(0x18d)](_0x4b9413[_0x3a2248(0xcd)]);}catch(_0xd5dad0){this[_0x3a2248(0x190)]=[];}}async[a0_0xac581a(0x11c)](){const _0x419e89=a0_0xac581a;this[_0x419e89(0x190)][_0x419e89(0x198)]>RAW_LOG_MAX_SIZE&&this[_0x419e89(0x190)][_0x419e89(0x154)](0x0,this[_0x419e89(0x190)][_0x419e89(0x198)]-RAW_LOG_MAX_SIZE),await this[_0x419e89(0x113)](LTM_DP_RAW_LOG,{'val':JSON[_0x419e89(0x21b)](this['rawEventLog']),'ack':!![]});}async[a0_0xac581a(0x1b5)](){const _0x7249a3=a0_0xac581a;try{const _0x5548db=await this[_0x7249a3(0x168)](LTM_DP_DAILY_DIGESTS);if(_0x5548db&&_0x5548db[_0x7249a3(0xcd)])this[_0x7249a3(0x1f0)]=JSON['parse'](_0x5548db[_0x7249a3(0xcd)]);}catch(_0x4ec499){this['dailyDigests']=[];}await this['updateBaselineStatus']();}async['saveDailyDigests'](_0x1e7ec8=!![]){const _0x3b9dc8=a0_0xac581a,_0x2191ab=this['config'][_0x3b9dc8(0x151)]||0x3c;this[_0x3b9dc8(0x1f0)][_0x3b9dc8(0x198)]>_0x2191ab&&this[_0x3b9dc8(0x1f0)]['splice'](0x0,this[_0x3b9dc8(0x1f0)][_0x3b9dc8(0x198)]-_0x2191ab);await this[_0x3b9dc8(0x113)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x3b9dc8(0x21b)](this[_0x3b9dc8(0x1f0)]),'ack':!![]});if(_0x1e7ec8)await this[_0x3b9dc8(0x165)]();}[a0_0xac581a(0xbe)](){const _0xd47c5e=a0_0xac581a;if(this[_0xd47c5e(0x192)])this[_0xd47c5e(0x192)][_0xd47c5e(0x170)]();if(!this[_0xd47c5e(0xdc)]){this['setStateAsync'](LTM_DP_STATUS,{'val':_0xd47c5e(0x175),'ack':!![]});return;}this[_0xd47c5e(0x192)]=schedule[_0xd47c5e(0x205)](LTM_SCHEDULE,()=>this['createDailyDigest']());}['setupDriftAnalysisScheduler'](){const _0x27ce23=a0_0xac581a;if(this[_0x27ce23(0x124)])clearInterval(this[_0x27ce23(0x124)]);if(!this['isProVersion'])return;this[_0x27ce23(0x124)]=setInterval(()=>this[_0x27ce23(0xb4)](),(this[_0x27ce23(0xd1)][_0x27ce23(0x15d)]||0x18)*0x36ee80),setTimeout(()=>this[_0x27ce23(0xb4)](),0x1388);}async[a0_0xac581a(0xde)](){const _0x2dd939=a0_0xac581a;await this[_0x2dd939(0x113)](_0x2dd939(0xe8),{'val':_0x2dd939(0x10b),'ack':!![]}),await this[_0x2dd939(0x113)]('analysis.deviationFromBaseline',{'val':this[_0x2dd939(0xdc)]?'N/A\x20(No\x20Activity)':_0x2dd939(0x1e1),'ack':!![]}),await this[_0x2dd939(0x113)](_0x2dd939(0x1ae),{'val':![],'ack':!![]}),await this['setStateAsync'](_0x2dd939(0xb6),{'val':![],'ack':!![]}),this[_0x2dd939(0x1a3)]=![];}async[a0_0xac581a(0x147)](_0x1e9168){const _0x169cc0=a0_0xac581a;this[_0x169cc0(0x172)]['unshift'](_0x1e9168);if(this[_0x169cc0(0x172)][_0x169cc0(0x198)]>ANALYSIS_HISTORY_MAX_SIZE)this['analysisHistory'][_0x169cc0(0x196)]();await this[_0x169cc0(0x113)](_0x169cc0(0x96),{'val':JSON['stringify'](this[_0x169cc0(0x172)]),'ack':!![]});}async[a0_0xac581a(0x8a)](_0x2e66b4,_0x538414=![],_0x4b7c5d=![]){const _0x20dc2f=a0_0xac581a;this[_0x20dc2f(0xec)]['info']((_0x538414?_0x20dc2f(0x1e8):'')+_0x20dc2f(0x1f2)+_0x2e66b4+'\x22'+(_0x4b7c5d?_0x20dc2f(0x11d):''));const _0x5088f8=this[_0x20dc2f(0xd1)];let _0x2519bf=0x0;_0x5088f8[_0x20dc2f(0x1d8)]&&_0x5088f8[_0x20dc2f(0xfd)]&&(await this['sendToAsync'](_0x5088f8[_0x20dc2f(0xfd)],_0x20dc2f(0x1af),{'text':_0x2e66b4,'user':_0x5088f8['notifyTelegramRecipient']}),_0x2519bf++);if(_0x5088f8['notifyPushoverEnabled']&&_0x5088f8[_0x20dc2f(0x136)]){let _0x466db6={'message':_0x2e66b4,'title':_0x4b7c5d?'üö®\x20EMERGENCY':_0x20dc2f(0xed),'priority':_0x4b7c5d?0x2:0x1,'device':_0x5088f8[_0x20dc2f(0xa7)]};_0x4b7c5d&&(_0x466db6['retry']=0x1e,_0x466db6[_0x20dc2f(0x1c4)]=0xe10,_0x466db6[_0x20dc2f(0x1c7)]=_0x20dc2f(0x1c3)),await this[_0x20dc2f(0x102)](_0x5088f8[_0x20dc2f(0x136)],_0x20dc2f(0x1af),_0x466db6),_0x2519bf++;}return _0x5088f8[_0x20dc2f(0x1eb)]&&_0x5088f8[_0x20dc2f(0xb9)]&&(await this[_0x20dc2f(0x102)](_0x5088f8[_0x20dc2f(0xb9)],_0x20dc2f(0x1af),{'text':_0x2e66b4,'to':_0x5088f8['notifyEmailRecipient']}),_0x2519bf++),_0x5088f8[_0x20dc2f(0x14e)]&&_0x5088f8[_0x20dc2f(0x16f)]&&(await this[_0x20dc2f(0x102)](_0x5088f8['notifyWhatsappInstance'],'send',{'text':_0x2e66b4,'phone':_0x5088f8[_0x20dc2f(0x158)]}),_0x2519bf++),_0x5088f8['notifySignalEnabled']&&_0x5088f8['notifySignalInstance']&&(await this[_0x20dc2f(0x102)](_0x5088f8[_0x20dc2f(0xc4)],_0x20dc2f(0x1af),{'text':_0x2e66b4,'phone':_0x5088f8[_0x20dc2f(0x189)]}),_0x2519bf++),_0x2519bf;}async['saveFeedback'](_0x2b99e5){const _0x2477a7=a0_0xac581a;this['feedbackHistory'][_0x2477a7(0x1aa)](_0x2b99e5);if(this['feedbackHistory'][_0x2477a7(0x198)]>FEEDBACK_MAX_SIZE)this['feedbackHistory'][_0x2477a7(0x196)]();await this[_0x2477a7(0x113)](_0x2477a7(0x228),{'val':JSON[_0x2477a7(0x21b)](this[_0x2477a7(0x222)]),'ack':!![]}),this[_0x2477a7(0xec)][_0x2477a7(0x7f)]('Feedback\x20gespeichert:\x20'+_0x2b99e5[_0x2477a7(0xfa)]+'\x20f√ºr\x20Event\x20'+_0x2b99e5[_0x2477a7(0x148)]);}['onUnload'](_0x277582){const _0x52163c=a0_0xac581a;if(this[_0x52163c(0x21a)])clearInterval(this[_0x52163c(0x21a)]);if(this[_0x52163c(0x124)])clearInterval(this[_0x52163c(0x124)]);if(this[_0x52163c(0x192)])this[_0x52163c(0x192)][_0x52163c(0x170)]();if(this[_0x52163c(0xda)])this['modeResetJob'][_0x52163c(0x170)]();_0x277582();}async['onMessage'](_0x4f628d){const _0x3a9b77=a0_0xac581a;if(typeof _0x4f628d==='object'&&_0x4f628d['message']){if(_0x4f628d['command']===_0x3a9b77(0x83)){if(!_0x4f628d[_0x3a9b77(0x224)][_0x3a9b77(0x84)])return this['sendTo'](_0x4f628d[_0x3a9b77(0x1a1)],_0x4f628d[_0x3a9b77(0x187)],{'success':![],'message':'No\x20Key'},_0x4f628d[_0x3a9b77(0x1f9)]);try{const _0x44b60a=new GoogleGenerativeAI(_0x4f628d[_0x3a9b77(0x224)]['apiKey'])[_0x3a9b77(0x1ef)]({'model':_0x3a9b77(0x1fb)});await _0x44b60a['generateContent']('test'),this[_0x3a9b77(0x1bf)](_0x4f628d[_0x3a9b77(0x1a1)],_0x4f628d[_0x3a9b77(0x187)],{'success':!![],'message':_0x3a9b77(0x82)},_0x4f628d['callback']);}catch(_0x280021){this[_0x3a9b77(0x1bf)](_0x4f628d['from'],_0x4f628d[_0x3a9b77(0x187)],{'success':![],'message':_0x280021[_0x3a9b77(0x224)]},_0x4f628d[_0x3a9b77(0x1f9)]);}}else{if(_0x4f628d[_0x3a9b77(0x187)]==='testNotification'){const _0xbff834=await this[_0x3a9b77(0x8a)](_0x3a9b77(0x178),!![]);this[_0x3a9b77(0x1bf)](_0x4f628d[_0x3a9b77(0x1a1)],_0x4f628d[_0x3a9b77(0x187)],{'success':_0xbff834>0x0,'message':_0xbff834+'\x20sent'},_0x4f628d[_0x3a9b77(0x1f9)]);}else{if(_0x4f628d[_0x3a9b77(0x187)]===_0x3a9b77(0x1cd)){if(!this[_0x3a9b77(0xdc)])return this['sendTo'](_0x4f628d[_0x3a9b77(0x1a1)],_0x4f628d[_0x3a9b77(0x187)],{'success':![],'isPro':![]},_0x4f628d[_0x3a9b77(0x1f9)]);let _0x767e6f={'status':_0x3a9b77(0xbc),'details':'','lastCheck':0x0};try{_0x767e6f['status']=(await this[_0x3a9b77(0x168)](LTM_DP_DRIFT_STATUS))[_0x3a9b77(0xcd)],_0x767e6f['details']=(await this[_0x3a9b77(0x168)](LTM_DP_DRIFT_DETAILS))['val'],_0x767e6f[_0x3a9b77(0x1d1)]=(await this[_0x3a9b77(0x168)](LTM_DP_DRIFT_LAST_CHECK))[_0x3a9b77(0xcd)];}catch(_0x485c98){}this[_0x3a9b77(0x1bf)](_0x4f628d[_0x3a9b77(0x1a1)],_0x4f628d[_0x3a9b77(0x187)],{'success':!![],'isPro':!![],'dailyDigests':this[_0x3a9b77(0x1f0)],'driftAnalysis':_0x767e6f,'analysisHistory':this[_0x3a9b77(0x172)]},_0x4f628d[_0x3a9b77(0x1f9)]);}else{if(_0x4f628d['command']===_0x3a9b77(0x207)){const _0x30c4ff=await this['getForeignObjectsAsync'](_0x3a9b77(0x1a8),'enum'),_0x24bf95=[];if(_0x30c4ff)for(const _0x4bb64c in _0x30c4ff){const _0x39f021=_0x30c4ff[_0x4bb64c],_0x5440bf=(_0x39f021[_0x3a9b77(0xaa)]&&typeof _0x39f021[_0x3a9b77(0xaa)][_0x3a9b77(0x137)]===_0x3a9b77(0x100)?_0x39f021[_0x3a9b77(0xaa)][_0x3a9b77(0x137)]['de']:_0x39f021[_0x3a9b77(0xaa)][_0x3a9b77(0x137)])||_0x39f021['common'][_0x3a9b77(0x137)];_0x24bf95['push']({'id':_0x4bb64c,'name':_0x5440bf});}this['sendTo'](_0x4f628d[_0x3a9b77(0x1a1)],_0x4f628d[_0x3a9b77(0x187)],{'success':!![],'enums':_0x24bf95},_0x4f628d[_0x3a9b77(0x1f9)]);}else{if(_0x4f628d[_0x3a9b77(0x187)]===_0x3a9b77(0xfb)){this[_0x3a9b77(0xec)]['info']('Received\x20scanDevices\x20request\x20from\x20Admin\x20UI.');const _0x3627f5=_0x4f628d[_0x3a9b77(0x224)]||{};try{const _0x2e0bd9=await this[_0x3a9b77(0x19e)](_0x3627f5);this[_0x3a9b77(0x1bf)](_0x4f628d[_0x3a9b77(0x1a1)],_0x4f628d[_0x3a9b77(0x187)],{'success':!![],'devices':_0x2e0bd9},_0x4f628d[_0x3a9b77(0x1f9)]);}catch(_0x3d3148){this[_0x3a9b77(0x1bf)](_0x4f628d['from'],_0x4f628d[_0x3a9b77(0x187)],{'success':![],'error':_0x3d3148[_0x3a9b77(0x224)]},_0x4f628d[_0x3a9b77(0x1f9)]);}}else{if(_0x4f628d['command']===_0x3a9b77(0xb8)){const {historyId:_0x29cb7e,rating:_0x11efbc,comment:_0x318dd1,alertReason:_0x4e0894}=_0x4f628d['message'];_0x29cb7e&&_0x11efbc?(await this[_0x3a9b77(0x146)]({'timestamp':Date[_0x3a9b77(0x20d)](),'historyId':_0x29cb7e,'rating':_0x11efbc,'comment':_0x318dd1,'alertReason':_0x4e0894}),this[_0x3a9b77(0x1bf)](_0x4f628d[_0x3a9b77(0x1a1)],_0x4f628d[_0x3a9b77(0x187)],{'success':!![]},_0x4f628d[_0x3a9b77(0x1f9)])):this[_0x3a9b77(0x1bf)](_0x4f628d[_0x3a9b77(0x1a1)],_0x4f628d[_0x3a9b77(0x187)],{'success':![],'error':_0x3a9b77(0x8c)},_0x4f628d[_0x3a9b77(0x1f9)]);}}}}}}}}}if(require[a0_0xac581a(0x171)]!==module)module['exports']=_0x2bea54=>new CogniLiving(_0x2bea54);else new CogniLiving();