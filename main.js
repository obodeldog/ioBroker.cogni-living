const a0_0x223586=a0_0x309a;(function(_0x4d7132,_0x4592d9){const _0x4a3d1e=a0_0x309a,_0x23b52b=_0x4d7132();while(!![]){try{const _0x4d553f=-parseInt(_0x4a3d1e(0x10e))/0x1*(-parseInt(_0x4a3d1e(0x1ac))/0x2)+-parseInt(_0x4a3d1e(0x136))/0x3+-parseInt(_0x4a3d1e(0x91))/0x4*(-parseInt(_0x4a3d1e(0x1a5))/0x5)+parseInt(_0x4a3d1e(0xbd))/0x6+-parseInt(_0x4a3d1e(0x166))/0x7+-parseInt(_0x4a3d1e(0xcb))/0x8+-parseInt(_0x4a3d1e(0x174))/0x9*(parseInt(_0x4a3d1e(0x157))/0xa);if(_0x4d553f===_0x4592d9)break;else _0x23b52b['push'](_0x23b52b['shift']());}catch(_0x5d4c4a){_0x23b52b['push'](_0x23b52b['shift']());}}}(a0_0x445f,0xdff95));const a0_0x1f90f0=(function(){let _0x2a1b46=!![];return function(_0xa05345,_0xe812c8){const _0x3a609e=_0x2a1b46?function(){const _0x22eaee=a0_0x309a;if(_0xe812c8){const _0x446a30=_0xe812c8[_0x22eaee(0xfc)](_0xa05345,arguments);return _0xe812c8=null,_0x446a30;}}:function(){};return _0x2a1b46=![],_0x3a609e;};}()),a0_0x24e2f4=a0_0x1f90f0(this,function(){const _0x5da48c=a0_0x309a;return a0_0x24e2f4[_0x5da48c(0xaa)]()[_0x5da48c(0x10d)](_0x5da48c(0x162))[_0x5da48c(0xaa)]()['constructor'](a0_0x24e2f4)[_0x5da48c(0x10d)](_0x5da48c(0x162));});a0_0x24e2f4();'use strict';const utils=require('@iobroker/adapter-core'),{GoogleGenerativeAI}=require(a0_0x223586(0x10c)),path=require(a0_0x223586(0xd6)),fs=require('fs'),installer=require(a0_0x223586(0x18c)),scanner=require(a0_0x223586(0x125)),schedulers=require('./lib/scheduler'),topology=require(a0_0x223586(0x17d)),setup=require(a0_0x223586(0x129)),recorder=require(a0_0x223586(0x160)),pythonBridge=require(a0_0x223586(0x9d)),aiAgent=require('./lib/ai_agent'),deadMan=require(a0_0x223586(0xa9)),automation=require(a0_0x223586(0x193)),GEMINI_MODEL=a0_0x223586(0xc1);function a0_0x445f(){const _0xb6bc4d=['json','SYSTEM_MODES','checkSolarCondition','replayTodayEvents','sendNotification','isSolar','from','lastAlertState','analysis.training.status','todayVector','date','5197180JGaKzw','memoryCache','updateTopology','analyzeWindowOpening','infrasoundEnabled','59\x2023\x20*\x20*\x20*','\x20events\x20from\x20standard\x20storage.','ack','security','./lib/recorder','writeFileSync','(((.+)+)+)+$','onStateChange','toLowerCase','stringify','151298DpNiRg','automation.triggerAction','modules','üêç\x20Triggering\x20Python\x20Health\x20Check\x20(Activity\x20Trend)...','isProVersion','Failed\x20to\x20trigger\x20Python\x20Health\x20Check','sensorLastValues','analysis.prediction.trackerConfidence','NORMAL',')\x20-\x20Phase\x20E\x20(Scheduler\x20Fix)','apiKey','LTM.triggerDailyDigest','system.adapter.ical.È¶ô','endsWith','9qGgowy','currentSystemMode','terrasse','Daily\x20Room\x20Details\x20(48x30min)','cancel','checkLicense','cleanupGhostInterventions','DAY','onReady','./lib/topology','Room\x20Dwell\x20Time\x20Stats','bind','analysis.training.triggerEnergy','enum.rooms.*','name','location','toISOString','analysis.visualization.pulse','analysisHistory','SYSTEM_DP_MODE','runPythonHealthCheck','analysisTimer','reduce','energy','./lib/installer','telegram','parse','Adapter','devices','trackerHeartbeat','unload','./lib/automation','Scan\x20Error:\x20','analysis.activity.roomStats','history','mkdirSync','pulse','toLocaleDateString','testContext','object','cogni-living','integrateRoomTime','includes','triggerGaitAnalysis','value','common','stateChange','dependencyInstallInProgress','analysis.security.learningStatus','115GBLrDF','Say\x20Hello','roomIntegratorTimer','utf8','üì¶\x20Restored\x20','string','getObjectViewAsync','2xGTHIh','analysis.energy.warmupSources','scanForDevices','‚úÖ\x20History\x20saved:\x20','sendTo','rows','push','party','command','testApiKey','main','runGeminiAnalysis','getOverviewData','Party\x20Mode','analysis.automation.targetId','eventHistory','enum.functions.*','Corrupt','timestamp','getCalendarNames','26668hlvyaF','message','executeAutomationAction','times','Gemini\x20Init\x20Error:\x20','getForeignObjectsAsync','some','dailyDigests','startService','startSystem','stopService','.venv','./lib/python_bridge','TRAIN_HEALTH','üíæ\x20Saving\x20Daily\x20History\x20for\x20','genAI','filter','No\x20data','ltmJob','exitTimer','loadSystemMode','system.adapter.ical.','add','forEach','./lib/dead_man','toString','comfort','initHistory','initZombies','send','namespace','min','setObjectNotExistsAsync','moduleEnergy','type','analysis.training.triggerHealth','Gemini\x20Report\x20Night','application/json','now','VACATION','val','Daily\x20Activity\x20Vector\x20(48x30min)','{\x22history\x22:{}}','historyJob','5875866sAHwNP','initSchedules','temperature','History\x20Save\x20Error:\x20','models/gemini-flash-latest','sendMorningBriefing','saveDailyHistory','onUnload','Lernphase\x20(','enum','Guest\x20Mode','checkCalendarTriggers','generateHealthReport','Unknown','4352224TXMExO','TRAIN_COMFORT','instance','system.presenceWho','modeResetJob','debug','all','inactivityThresholdHours','analysis.health.activityTrend','TRAIN_SECURITY','bin','path','SET_LEARNING_MODE','then','\x20events\x20from\x20today...','LTM.trainingData.sequences','triggerDailyDigest','.json','subscribeStates','moduleSecurity','getHistoryData','setHours','getHours','isArray','triggerBriefing','LTM.dailyDigests','calendarName','exports','state','response','rawEventLog','[Integrator]\x20Error:\x20','LTM.trainingData.thermodynamics','Warte\x20auf\x20Analyse...','TRAIN_TOPOLOGY','Room\x20History\x20(24h\x20Buckets)','presenceDevices','checkWifiPresence','Aktiv\x20(','scanDevices','communicate.request','onMessage','Kein\x20API\x20Key\x20√ºbergeben.','setStateAsync','callback','analysis.trigger','LTM.rawEventLog','config','warn','apply','isPresent','geminiModel','sources','health','split','\x20Tage)','.system.mode','join','\x20Kalender-Adapter\x20gefunden.','\x22history\x22:{}','ready','analysis.health.geminiNight','NIGHT','.data.table','triggerInfrasoundCorrelation','@google/generative-ai','search','1773581koedYK','Verbindung\x20erfolgreich:\x20','moduleHealth','infrasoundSensorId','length','guest','existsSync','text','error','slice','python','analysis.health.todayRoomDetails','...','getDate','protectAiMemory','updateHealthVector','minDaysForBaseline','infrasoundLocked','replace','info','outdoorSensorId','round','bootTime','./lib/scanner','healthTrendInterval','refreshCalendar\x20failed:\x20','getStateAsync','./lib/setup','motion','setState','handleInfrasound','log','door','‚Ü∫\x20Replaying\x20','appendToLog','CALCULATE_HEALTH_TREND','values','subscribeForeignStates','analysis.security.lastScore','activeModules','2710428dSMlqx','scheduleJob','refreshCalendar','setDate','getAbsoluteDefaultDataDir','isGracePeriodActive','max','driftAnalysisTimer','isRelevantActivity','analysis.energy.warmupTimes','analysis.automation.description','subscribeForeignStatesAsync','analysis.activity.roomHistory','analysis.health.todayVector','{\x22today\x22:{},\x20\x22yesterday\x22:{},\x20\x22date\x22:\x22\x22}','licenseKey','open','moduleComfort','briefingJob','checkThermostats','initSystemConfig','fill'];a0_0x445f=function(){return _0xb6bc4d;};return a0_0x445f();}class CogniLiving extends utils[a0_0x223586(0x18f)]{constructor(_0x28c45c){const _0x22a8f3=a0_0x223586;super({..._0x28c45c,'name':_0x22a8f3(0x19c)}),this['eventHistory']=[],this[_0x22a8f3(0x186)]=[],this[_0x22a8f3(0xe9)]=[],this[_0x22a8f3(0x98)]=[],this['sensorLastValues']={},this['systemConfig']={'latitude':0x0,'longitude':0x0,'city':''},this[_0x22a8f3(0xfd)]=!![],this[_0x22a8f3(0xa4)]=null,this['exitGraceTimer']=null,this[_0x22a8f3(0x13b)]=![],this['genAI']=null,this[_0x22a8f3(0xfe)]=null,this[_0x22a8f3(0x175)]=setup['SYSTEM_MODES'][_0x22a8f3(0x16e)],this[_0x22a8f3(0x16a)]=![],this[_0x22a8f3(0x153)]=![],this[_0x22a8f3(0x189)]=null,this[_0x22a8f3(0xa3)]=null,this[_0x22a8f3(0xcf)]=null,this[_0x22a8f3(0x13d)]=null,this[_0x22a8f3(0x148)]=null,this[_0x22a8f3(0xbc)]=null,this[_0x22a8f3(0x191)]=null,this[_0x22a8f3(0x126)]=null,this[_0x22a8f3(0x1a7)]=null,this[_0x22a8f3(0x1a3)]=![],this['lastTrackerEventTime']=Date[_0x22a8f3(0xb7)](),this[_0x22a8f3(0x158)]=null,this[_0x22a8f3(0x124)]=Date[_0x22a8f3(0xb7)](),this[_0x22a8f3(0x11f)]=![],this['pressureBuffer']=[],this[_0x22a8f3(0x135)]={'health':!![],'security':!![],'energy':!![],'comfort':!![]},this['on'](_0x22a8f3(0x107),this['onReady'][_0x22a8f3(0x17f)](this)),this['on'](_0x22a8f3(0x1a2),this[_0x22a8f3(0x163)][_0x22a8f3(0x17f)](this)),this['on'](_0x22a8f3(0x192),this[_0x22a8f3(0xc4)][_0x22a8f3(0x17f)](this)),this['on']('message',this[_0x22a8f3(0xf4)][_0x22a8f3(0x17f)](this));}async[a0_0x223586(0x17c)](){const _0x498b62=a0_0x223586;this[_0x498b62(0x12d)][_0x498b62(0x121)]('cogni-living\x20adapter\x20starting\x20(v'+this['version']+_0x498b62(0x16f));if(this['config']['moduleHealth']!==undefined)this[_0x498b62(0x135)][_0x498b62(0x100)]=this[_0x498b62(0xfa)][_0x498b62(0x110)];if(this[_0x498b62(0xfa)][_0x498b62(0xde)]!==undefined)this[_0x498b62(0x135)]['security']=this['config'][_0x498b62(0xde)];if(this['config'][_0x498b62(0xb2)]!==undefined)this[_0x498b62(0x135)][_0x498b62(0x18b)]=this[_0x498b62(0xfa)][_0x498b62(0xb2)];if(this[_0x498b62(0xfa)][_0x498b62(0x147)]!==undefined)this[_0x498b62(0x135)][_0x498b62(0xab)]=this[_0x498b62(0xfa)][_0x498b62(0x147)];if(this[_0x498b62(0xfa)][_0x498b62(0x168)])this[_0x498b62(0x135)]={...this['activeModules'],...this[_0x498b62(0xfa)][_0x498b62(0x168)]};this[_0x498b62(0x9a)]();}async[a0_0x223586(0x9a)](){const _0x4fcf30=a0_0x223586;await setup[_0x4fcf30(0xad)](this);try{this[_0x4fcf30(0x16a)]=await setup[_0x4fcf30(0x179)](this[_0x4fcf30(0xfa)][_0x4fcf30(0x145)]);}catch(_0x150f71){}if(!this[_0x4fcf30(0xfa)]['inactivityThresholdHours']||this[_0x4fcf30(0xfa)][_0x4fcf30(0xd2)]<0.1)this[_0x4fcf30(0xfa)][_0x4fcf30(0xd2)]=0xc;await setup[_0x4fcf30(0xac)](this),await setup[_0x4fcf30(0x14a)](this);try{const _0x3429dd=await this[_0x4fcf30(0x128)](_0x4fcf30(0x13f)),_0x28f7b1=await this[_0x4fcf30(0x128)](_0x4fcf30(0x1ad));_0x3429dd&&_0x3429dd[_0x4fcf30(0xb9)]&&_0x28f7b1&&_0x28f7b1['val']&&(Date[_0x4fcf30(0xb7)]()-_0x3429dd['ts']<0x4*0xe10*0x3e8&&(this[_0x4fcf30(0x158)]={'times':JSON['parse'](_0x3429dd['val']),'sources':JSON[_0x4fcf30(0x18e)](_0x28f7b1['val'])}));}catch(_0xf6571){}if(this[_0x4fcf30(0xfa)]['geminiApiKey'])try{this[_0x4fcf30(0xa0)]=new GoogleGenerativeAI(this[_0x4fcf30(0xfa)]['geminiApiKey']),this[_0x4fcf30(0xfe)]=this[_0x4fcf30(0xa0)]['getGenerativeModel']({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x4fcf30(0xb6)}});}catch(_0x27ae68){this[_0x4fcf30(0x12d)][_0x4fcf30(0x116)](_0x4fcf30(0x95)+_0x27ae68[_0x4fcf30(0x92)]);}await setup['createAllObjects'](this),await this[_0x4fcf30(0xa5)](),schedulers[_0x4fcf30(0xbe)](this),await this[_0x4fcf30(0xb1)](_0x4fcf30(0x185),{'type':'state','common':{'name':'Live\x20Event\x20Pulse','type':'number','role':_0x4fcf30(0x1a0),'read':!![],'write':![]},'native':{}}),await this[_0x4fcf30(0xb1)](_0x4fcf30(0x195),{'type':_0x4fcf30(0xe7),'common':{'name':_0x4fcf30(0x17e),'type':_0x4fcf30(0x1aa),'role':_0x4fcf30(0x14c),'read':!![],'write':![],'def':_0x4fcf30(0x144)},'native':{}}),await this[_0x4fcf30(0xb1)](_0x4fcf30(0x142),{'type':_0x4fcf30(0xe7),'common':{'name':_0x4fcf30(0xee),'type':_0x4fcf30(0x1aa),'role':_0x4fcf30(0x14c),'read':!![],'write':![],'def':_0x4fcf30(0xbb)},'native':{}}),await this[_0x4fcf30(0xb1)]('analysis.health.geminiNight',{'type':_0x4fcf30(0xe7),'common':{'name':_0x4fcf30(0xb5),'type':'string','role':_0x4fcf30(0x115),'read':!![],'write':![],'def':_0x4fcf30(0xec)},'native':{}}),await this[_0x4fcf30(0xb1)]('analysis.health.geminiDay',{'type':_0x4fcf30(0xe7),'common':{'name':'Gemini\x20Report\x20Day','type':_0x4fcf30(0x1aa),'role':_0x4fcf30(0x115),'read':!![],'write':![],'def':_0x4fcf30(0xec)},'native':{}}),await this[_0x4fcf30(0xb1)](_0x4fcf30(0x143),{'type':_0x4fcf30(0xe7),'common':{'name':_0x4fcf30(0xba),'type':_0x4fcf30(0x1aa),'role':_0x4fcf30(0x14c),'read':!![],'write':![],'def':'[]'},'native':{}}),await this['setObjectNotExistsAsync'](_0x4fcf30(0x119),{'type':_0x4fcf30(0xe7),'common':{'name':_0x4fcf30(0x177),'type':_0x4fcf30(0x1aa),'role':_0x4fcf30(0x14c),'read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x4fcf30(0xb1)](_0x4fcf30(0xd3),{'type':_0x4fcf30(0xe7),'common':{'name':'General\x20Activity\x20Trend','type':'number','role':'value','unit':'%','read':!![],'write':![]},'native':{}}),await this[_0x4fcf30(0xb1)]('analysis.energy.warmupTimes',{'type':'state','common':{'name':'Warm-Up\x20Time','type':_0x4fcf30(0x1aa),'role':'json','read':!![],'write':![]},'native':{}});try{const _0x2d5e82=await this[_0x4fcf30(0x128)]('events.history');if(_0x2d5e82&&_0x2d5e82[_0x4fcf30(0xb9)]){this[_0x4fcf30(0x8c)]=JSON[_0x4fcf30(0x18e)](_0x2d5e82[_0x4fcf30(0xb9)]);if(this[_0x4fcf30(0x16a)]){const _0x2c9205=await this['getStateAsync'](_0x4fcf30(0xf9));if(_0x2c9205&&_0x2c9205[_0x4fcf30(0xb9)])this[_0x4fcf30(0xe9)]=JSON['parse'](_0x2c9205[_0x4fcf30(0xb9)]);}this[_0x4fcf30(0x12d)][_0x4fcf30(0x121)](_0x4fcf30(0x1a9)+this[_0x4fcf30(0x8c)][_0x4fcf30(0x112)]+_0x4fcf30(0x15d));}}catch(_0xc4f96e){this[_0x4fcf30(0x8c)]=[];}try{const _0x479613=await this['getStateAsync'](_0x4fcf30(0xe4));if(_0x479613&&_0x479613[_0x4fcf30(0xb9)])this['dailyDigests']=JSON[_0x4fcf30(0x18e)](_0x479613[_0x4fcf30(0xb9)]);}catch(_0x41dec9){this['dailyDigests']=[];}const _0x18b61e=this[_0x4fcf30(0x98)]['length']>=(this[_0x4fcf30(0xfa)]['minDaysForBaseline']||0x7)?_0x4fcf30(0xf1)+this[_0x4fcf30(0x98)][_0x4fcf30(0x112)]+_0x4fcf30(0x102):_0x4fcf30(0xc5)+this[_0x4fcf30(0x98)][_0x4fcf30(0x112)]+'/'+(this[_0x4fcf30(0xfa)][_0x4fcf30(0x11e)]||0x7)+')';await this['setStateAsync']('LTM.baselineStatus',{'val':_0x18b61e,'ack':!![]}),this[_0x4fcf30(0xdd)]('analysis.trigger'),this[_0x4fcf30(0xdd)](_0x4fcf30(0x171)),this[_0x4fcf30(0xdd)]('analysis.training.triggerHealth');this[_0x4fcf30(0xfa)][_0x4fcf30(0x15b)]&&this[_0x4fcf30(0xfa)]['infrasoundSensorId']&&this[_0x4fcf30(0x135)][_0x4fcf30(0x15f)]&&this[_0x4fcf30(0x133)](this[_0x4fcf30(0xfa)][_0x4fcf30(0x111)]);const _0x1da106=this[_0x4fcf30(0xfa)]['devices'];if(_0x1da106)for(const _0x2060fd of _0x1da106){await this[_0x4fcf30(0x141)](_0x2060fd['id']);}const _0x5ee5e1=this[_0x4fcf30(0xfa)][_0x4fcf30(0xef)];if(_0x5ee5e1)for(const _0x166e67 of _0x5ee5e1){await this[_0x4fcf30(0x141)](_0x166e67);}const _0x4df7f5=require('node-schedule');if(this['historyJob'])this[_0x4fcf30(0xbc)][_0x4fcf30(0x178)]();this[_0x4fcf30(0xbc)]=_0x4df7f5[_0x4fcf30(0x137)](_0x4fcf30(0x15c),()=>{const _0x41c45e=_0x4fcf30;this[_0x41c45e(0xc3)]();}),setTimeout(()=>this['replayTodayEvents'](),0x1388);if(this[_0x4fcf30(0x1a7)])clearInterval(this[_0x4fcf30(0x1a7)]);this['integrateRoomTime'](),this['roomIntegratorTimer']=setInterval(async()=>{await this['integrateRoomTime']();},0x3c*0x3e8);if(this[_0x4fcf30(0x126)])clearInterval(this[_0x4fcf30(0x126)]);this['healthTrendInterval']=setInterval(()=>{const _0x24b520=_0x4fcf30;this[_0x24b520(0x16a)]&&this['activeModules'][_0x24b520(0x100)]&&this[_0x24b520(0x188)]();},0x4*0x3c*0x3c*0x3e8);const _0x28be71=path[_0x4fcf30(0x104)](__dirname,_0x4fcf30(0x9c),_0x4fcf30(0xd5),_0x4fcf30(0x118));pythonBridge[_0x4fcf30(0x99)](this,_0x28be71);}['onUnload'](_0x5c4cea){const _0x5208ae=a0_0x223586;if(this[_0x5208ae(0xbc)])this[_0x5208ae(0xbc)][_0x5208ae(0x178)]();this[_0x5208ae(0xc3)]()[_0x5208ae(0xd8)](()=>{const _0x436a81=_0x5208ae;if(this[_0x436a81(0x189)])clearInterval(this[_0x436a81(0x189)]);if(this[_0x436a81(0x1a7)])clearInterval(this[_0x436a81(0x1a7)]);recorder['abortExitTimer'](this),pythonBridge[_0x436a81(0x9b)](this),_0x5c4cea();});}async[a0_0x223586(0x14f)](){const _0x1deeda=a0_0x223586;if(!this[_0x1deeda(0x8c)]||this['eventHistory'][_0x1deeda(0x112)]===0x0){this[_0x1deeda(0x12d)][_0x1deeda(0xfb)]('‚ö†\x20Replay\x20skipped:\x20No\x20events\x20in\x20memory.');return;}this['log']['info'](_0x1deeda(0x12f)+this[_0x1deeda(0x8c)][_0x1deeda(0x112)]+_0x1deeda(0xd9));const _0x3ac215=new Date()[_0x1deeda(0xe0)](0x0,0x0,0x0,0x0),_0x5b87ee=_0x1deeda(0x142);let _0x2d26e4={'history':{},'date':new Date()[_0x1deeda(0x199)]()};const _0x323bf2=_0x1deeda(0x143),_0x4bd546=_0x1deeda(0x119);let _0x3f37e4=new Array(0x30)['fill'](0x0),_0x5debc4=Array['from']({'length':0x30},()=>[]);this[_0x1deeda(0x8c)][_0x1deeda(0xa8)](_0x4a78e9=>{const _0x23895f=_0x1deeda;if(_0x4a78e9[_0x23895f(0x8f)]>=_0x3ac215){if(recorder[_0x23895f(0x13e)](_0x4a78e9[_0x23895f(0xb3)],_0x4a78e9[_0x23895f(0x1a0)])){const _0xfdadd4=new Date(_0x4a78e9['timestamp']),_0x2e0f80=_0xfdadd4[_0x23895f(0xe1)]()*0x2+(_0xfdadd4['getMinutes']()>=0x1e?0x1:0x0);if(_0x2e0f80<0x30){_0x3f37e4[_0x2e0f80]++;const _0x42282e=_0x4a78e9[_0x23895f(0x183)]||_0x4a78e9['name']||'?';let _0x1f9479=_0x5debc4[_0x2e0f80];!_0x1f9479['includes'](_0x42282e)&&_0x1f9479[_0x23895f(0x1b2)](_0x42282e);}const _0x2ff322=_0xfdadd4[_0x23895f(0xe1)]();let _0x43cecd=_0x4a78e9['location']||_0x23895f(0xca);const _0x5139e7=(this[_0x23895f(0xfa)][_0x23895f(0x190)]||[])['find'](_0x16b04c=>_0x16b04c[_0x23895f(0x183)]===_0x43cecd);if(_0x5139e7)_0x43cecd=_0x5139e7[_0x23895f(0x183)];if(!_0x2d26e4[_0x23895f(0x196)][_0x43cecd])_0x2d26e4[_0x23895f(0x196)][_0x43cecd]=new Array(0x18)['fill'](0x0);if(_0x2d26e4[_0x23895f(0x196)][_0x43cecd][_0x2ff322]<0x3c)_0x2d26e4['history'][_0x43cecd][_0x2ff322]++;}}});const _0x34f919=await this[_0x1deeda(0x128)](_0x5b87ee);(!_0x34f919||!_0x34f919[_0x1deeda(0xb9)]||_0x34f919[_0x1deeda(0xb9)]==='{}'||_0x34f919[_0x1deeda(0xb9)]['includes'](_0x1deeda(0x106)))&&await this[_0x1deeda(0xf6)](_0x5b87ee,{'val':JSON['stringify'](_0x2d26e4),'ack':!![]}),await this['setStateAsync'](_0x323bf2,{'val':JSON[_0x1deeda(0x165)](_0x3f37e4),'ack':!![]}),await this['setStateAsync'](_0x4bd546,{'val':JSON[_0x1deeda(0x165)](_0x5debc4),'ack':!![]}),this[_0x1deeda(0x12d)][_0x1deeda(0x121)]('‚úÖ\x20Dashboard\x20Data\x20(Rooms\x20&\x20Timeline\x20&\x20Details)\x20restored.');}async[a0_0x223586(0xc3)](){const _0x1ec63d=a0_0x223586;if(!this['activeModules']['health'])return;const _0x568dbf=new Date()['toISOString']()['split']('T')[0x0];this[_0x1ec63d(0x12d)][_0x1ec63d(0xd0)](_0x1ec63d(0x9f)+_0x568dbf+_0x1ec63d(0x11a));try{const [_0x1727c9,_0x286b33,_0x598543,_0x5b7c8c,_0x4fcbe9,_0x15a92d]=await Promise[_0x1ec63d(0xd1)]([this['getStateAsync'](_0x1ec63d(0x142)),this[_0x1ec63d(0x128)](_0x1ec63d(0x108)),this[_0x1ec63d(0x128)]('analysis.health.geminiDay'),this[_0x1ec63d(0x128)](_0x1ec63d(0x134)),this['getStateAsync'](_0x1ec63d(0x143)),this[_0x1ec63d(0x128)](_0x1ec63d(0xd3))]),_0xba188d=this['eventHistory'][_0x1ec63d(0xa1)](_0xfda646=>_0xfda646[_0x1ec63d(0x8f)]>=new Date()['setHours'](0x0,0x0,0x0,0x0)&&(_0xfda646[_0x1ec63d(0x182)][_0x1ec63d(0x164)]()[_0x1ec63d(0x19e)]('haust√ºr')||_0xfda646[_0x1ec63d(0x182)]['toLowerCase']()[_0x1ec63d(0x19e)](_0x1ec63d(0x176)))&&(_0xfda646[_0x1ec63d(0x1a0)]===!![]||_0xfda646[_0x1ec63d(0x1a0)]===_0x1ec63d(0x146)))[_0x1ec63d(0x112)];let _0x5b7f2a=0x55;if(_0x15a92d&&_0x15a92d[_0x1ec63d(0xb9)]!==undefined)_0x5b7f2a=Math[_0x1ec63d(0xb0)](0x64,Math['max'](0x14,Math[_0x1ec63d(0x123)](0x50+Number(_0x15a92d[_0x1ec63d(0xb9)])*0x5)));const _0x192b00={'date':_0x568dbf,'timestamp':Date[_0x1ec63d(0xb7)](),'roomHistory':_0x1727c9?.[_0x1ec63d(0xb9)]?JSON[_0x1ec63d(0x18e)](_0x1727c9[_0x1ec63d(0xb9)]):{},'geminiNight':_0x286b33?.['val']||'Keine\x20Daten','geminiDay':_0x598543?.[_0x1ec63d(0xb9)]||'Keine\x20Daten','anomalyScore':_0x5b7c8c?.['val']||0.1,'todayVector':_0x4fcbe9?.[_0x1ec63d(0xb9)]?JSON[_0x1ec63d(0x18e)](_0x4fcbe9[_0x1ec63d(0xb9)]):new Array(0x30)[_0x1ec63d(0x14b)](0x0),'batteryLevel':_0x5b7f2a,'freshAirCount':_0xba188d,'eventHistory':this[_0x1ec63d(0x8c)]},_0x10bea8=utils[_0x1ec63d(0x13a)](),_0x3d67d2=path[_0x1ec63d(0x104)](_0x10bea8,_0x1ec63d(0x19c),_0x1ec63d(0x196));if(!fs[_0x1ec63d(0x114)](_0x3d67d2))fs[_0x1ec63d(0x197)](_0x3d67d2,{'recursive':!![]});const _0x1cd67a=path[_0x1ec63d(0x104)](_0x3d67d2,_0x568dbf+_0x1ec63d(0xdc));fs[_0x1ec63d(0x161)](_0x1cd67a,JSON[_0x1ec63d(0x165)](_0x192b00)),this['log'][_0x1ec63d(0x121)](_0x1ec63d(0x1af)+_0x1cd67a);}catch(_0x17a238){this['log'][_0x1ec63d(0x116)](_0x1ec63d(0xc0)+_0x17a238['message']);}}async[a0_0x223586(0x19d)](){const _0x82c6f3=a0_0x223586;if(!this[_0x82c6f3(0xfd)])return;try{let _0x54a3e7=null;try{const _0x22ff96=await this[_0x82c6f3(0x128)]('analysis.prediction.trackerTopRoom'),_0x16563f=await this[_0x82c6f3(0x128)](_0x82c6f3(0x16d));if(_0x22ff96&&_0x22ff96[_0x82c6f3(0xb9)]&&_0x16563f&&_0x16563f[_0x82c6f3(0xb9)]&&_0x16563f['val']>0.3){if(_0x22ff96['val']!==_0x82c6f3(0xca)&&_0x22ff96[_0x82c6f3(0xb9)]!=='Init...')_0x54a3e7=_0x22ff96['val'];}}catch(_0x21508a){}if(!_0x54a3e7){const _0x1b101c=this[_0x82c6f3(0xfa)][_0x82c6f3(0x190)]||[];for(const _0x14eec4 of _0x1b101c){if(_0x14eec4[_0x82c6f3(0xb3)]==='motion'&&_0x14eec4[_0x82c6f3(0x183)])try{const _0x127332=await this['getForeignStateAsync'](_0x14eec4['id']);if(_0x127332&&(_0x127332[_0x82c6f3(0xb9)]===!![]||_0x127332['val']==='on'||_0x127332['val']===0x1)){_0x54a3e7=_0x14eec4[_0x82c6f3(0x183)];break;}}catch(_0x221710){}}}if(!_0x54a3e7)return;const _0x5274d9=this[_0x82c6f3(0xfa)][_0x82c6f3(0x190)]||[];let _0x234d70=_0x54a3e7;const _0x19377e=_0x5274d9['find'](_0x1ad850=>_0x1ad850[_0x82c6f3(0x183)]&&_0x1ad850['location'][_0x82c6f3(0x164)]()===_0x54a3e7['toLowerCase']());if(_0x19377e)_0x234d70=_0x19377e[_0x82c6f3(0x183)];const _0x196077='analysis.activity.roomHistory',_0x54023b=await this[_0x82c6f3(0x128)](_0x196077),_0x2b21b4=new Date()[_0x82c6f3(0x199)]();let _0x134d92={'history':{},'date':_0x2b21b4};if(_0x54023b&&_0x54023b[_0x82c6f3(0xb9)])try{_0x134d92=JSON[_0x82c6f3(0x18e)](_0x54023b[_0x82c6f3(0xb9)]);}catch(_0x116aa0){}_0x134d92[_0x82c6f3(0x156)]!==_0x2b21b4&&(_0x134d92[_0x82c6f3(0x196)]={},_0x134d92[_0x82c6f3(0x156)]=_0x2b21b4);if(!_0x134d92[_0x82c6f3(0x196)][_0x234d70])_0x134d92[_0x82c6f3(0x196)][_0x234d70]=new Array(0x18)['fill'](0x0);const _0x4ea887=new Date()[_0x82c6f3(0xe1)]();if(_0x134d92['history'][_0x234d70][_0x4ea887]<0x3c)_0x134d92[_0x82c6f3(0x196)][_0x234d70][_0x4ea887]++;await this[_0x82c6f3(0xf6)](_0x196077,{'val':JSON['stringify'](_0x134d92),'ack':!![]});}catch(_0x281c0c){this[_0x82c6f3(0x12d)][_0x82c6f3(0xfb)](_0x82c6f3(0xea)+_0x281c0c[_0x82c6f3(0x92)]);}}async[a0_0x223586(0xf4)](_0x367dee){const _0x3fbd62=a0_0x223586;if(typeof _0x367dee===_0x3fbd62(0x19b)&&_0x367dee[_0x3fbd62(0x92)]){if(_0x367dee[_0x3fbd62(0x1b4)]===_0x3fbd62(0xdf)){const _0x2b002e=_0x367dee[_0x3fbd62(0x92)][_0x3fbd62(0x156)],_0x1ce657=utils[_0x3fbd62(0x13a)](),_0xf59ac9=path[_0x3fbd62(0x104)](_0x1ce657,_0x3fbd62(0x19c),_0x3fbd62(0x196),_0x2b002e+_0x3fbd62(0xdc));if(fs[_0x3fbd62(0x114)](_0xf59ac9))try{const _0x43a535=JSON[_0x3fbd62(0x18e)](fs['readFileSync'](_0xf59ac9,'utf8'));this[_0x3fbd62(0x1b0)](_0x367dee['from'],_0x367dee[_0x3fbd62(0x1b4)],{'success':!![],'data':_0x43a535},_0x367dee[_0x3fbd62(0xf7)]);}catch(_0x2e6ff3){this['sendTo'](_0x367dee[_0x3fbd62(0x152)],_0x367dee[_0x3fbd62(0x1b4)],{'success':![],'error':_0x3fbd62(0x8e)},_0x367dee[_0x3fbd62(0xf7)]);}else this[_0x3fbd62(0x1b0)](_0x367dee['from'],_0x367dee[_0x3fbd62(0x1b4)],{'success':![],'error':_0x3fbd62(0xa2)},_0x367dee[_0x3fbd62(0xf7)]);}else{if(_0x367dee['command']===_0x3fbd62(0x1b8)){const _0x4224b6=this[_0x3fbd62(0x98)]['length'];let _0x130f11=new Array(0x30)[_0x3fbd62(0x14b)](0x0),_0x41537f=Array[_0x3fbd62(0x152)]({'length':0x30},()=>[]);try{const _0x19b4fc=await this[_0x3fbd62(0x128)](_0x3fbd62(0x143));if(_0x19b4fc&&_0x19b4fc[_0x3fbd62(0xb9)])_0x130f11=JSON[_0x3fbd62(0x18e)](_0x19b4fc['val']);const _0x30bb0f=await this[_0x3fbd62(0x128)]('analysis.health.todayRoomDetails');if(_0x30bb0f&&_0x30bb0f[_0x3fbd62(0xb9)])_0x41537f=JSON[_0x3fbd62(0x18e)](_0x30bb0f[_0x3fbd62(0xb9)]);}catch(_0x2289d9){}let _0x49ad37=new Array(0x30)[_0x3fbd62(0x14b)](0x0);try{const _0x524b6f=new Date();_0x524b6f[_0x3fbd62(0x139)](_0x524b6f[_0x3fbd62(0x11b)]()-0x1);const _0x558a39=_0x524b6f[_0x3fbd62(0x184)]()[_0x3fbd62(0x101)]('T')[0x0],_0xa10647=utils[_0x3fbd62(0x13a)](),_0x27c569=path['join'](_0xa10647,_0x3fbd62(0x19c),_0x3fbd62(0x196),_0x558a39+_0x3fbd62(0xdc));if(fs['existsSync'](_0x27c569)){const _0x1dcad4=JSON[_0x3fbd62(0x18e)](fs['readFileSync'](_0x27c569,_0x3fbd62(0x1a8)));if(_0x1dcad4&&_0x1dcad4[_0x3fbd62(0x155)])_0x49ad37=_0x1dcad4[_0x3fbd62(0x155)];}}catch(_0xbae2ac){}let _0xab0ef={'today':{},'yesterday':{}};try{const _0x534ede=await this['getStateAsync']('analysis.activity.roomStats');if(_0x534ede&&_0x534ede[_0x3fbd62(0xb9)])_0xab0ef=JSON['parse'](_0x534ede[_0x3fbd62(0xb9)]);}catch(_0xb1bc50){}let _0xa44957=null;try{const _0x3d973c=await this[_0x3fbd62(0x128)](_0x3fbd62(0xd3));if(_0x3d973c)_0xa44957=_0x3d973c['val'];}catch(_0x100ca9){}if(_0xa44957===undefined||_0xa44957===null){const _0x393888=_0x130f11[_0x3fbd62(0x18a)]((_0x3768bf,_0x1136d)=>_0x3768bf+_0x1136d,0x0),_0x2f485c=Math[_0x3fbd62(0xb0)](0x2,Math[_0x3fbd62(0x13c)](-0x2,(0x64-_0x393888)/0x32));_0xa44957=_0x2f485c;}let _0x101855=![],_0x48b07a='',_0x5aa247='',_0x41b7ab='';try{const _0x824e37=await this[_0x3fbd62(0x128)]('analysis.automation.patternDetected');if(_0x824e37&&_0x824e37[_0x3fbd62(0xb9)]){_0x101855=!![];const _0x469cab=await this['getStateAsync'](_0x3fbd62(0x140));_0x48b07a=_0x469cab?_0x469cab[_0x3fbd62(0xb9)]:'';const _0x594919=await this['getStateAsync'](_0x3fbd62(0x1ba));_0x5aa247=_0x594919?_0x594919['val']:'';const _0xeabcee=await this[_0x3fbd62(0x128)]('analysis.automation.targetValue');_0x41b7ab=_0xeabcee?_0xeabcee[_0x3fbd62(0xb9)]:'';}}catch(_0x26d835){}const _0x4b8253=await this[_0x3fbd62(0x14e)](),_0x39542f=(this['config'][_0x3fbd62(0x190)]||[])[_0x3fbd62(0x97)](_0x507d13=>_0x507d13[_0x3fbd62(0x151)]),_0x103489=_0x4b8253&&_0x39542f;let _0x20129e='';try{const _0x38a676=await this['getStateAsync'](_0x3fbd62(0xce));if(_0x38a676&&_0x38a676[_0x3fbd62(0xb9)])_0x20129e=_0x38a676[_0x3fbd62(0xb9)];}catch(_0x20af23){}this[_0x3fbd62(0x1b0)](_0x367dee[_0x3fbd62(0x152)],_0x367dee['command'],{'success':!![],'eventHistory':this['eventHistory'][_0x3fbd62(0x117)](0x0,0x7d0),'stats':{'digestCount':_0x4224b6,'isPresent':this[_0x3fbd62(0xfd)],'hourlyActivity':_0x130f11,'hourlyDetails':_0x41537f,'yesterdayActivity':_0x49ad37,'solarActive':_0x103489,'presenceWho':_0x20129e,'roomStats':_0xab0ef,'activityTrend':_0xa44957,'modules':this[_0x3fbd62(0x135)]},'automation':{'detected':_0x101855,'description':_0x48b07a,'targetId':_0x5aa247,'targetValue':_0x41b7ab}},_0x367dee[_0x3fbd62(0xf7)]);}else{if(_0x367dee[_0x3fbd62(0x1b4)]===_0x3fbd62(0x149))try{const _0x9d6790=await automation['scanThermostats'](this);this[_0x3fbd62(0x1b0)](_0x367dee['from'],_0x367dee['command'],{'success':!![],'results':_0x9d6790},_0x367dee[_0x3fbd62(0xf7)]);}catch(_0x4de95f){this[_0x3fbd62(0x1b0)](_0x367dee[_0x3fbd62(0x152)],_0x367dee[_0x3fbd62(0x1b4)],{'success':![],'error':_0x4de95f[_0x3fbd62(0x92)]},_0x367dee[_0x3fbd62(0xf7)]);}else{if(_0x367dee['command']===_0x3fbd62(0xf2))try{const _0x2aad42=await scanner[_0x3fbd62(0x1ae)](this,_0x367dee[_0x3fbd62(0x92)]||{});this[_0x3fbd62(0x1b0)](_0x367dee[_0x3fbd62(0x152)],_0x367dee[_0x3fbd62(0x1b4)],{'success':!![],'devices':_0x2aad42},_0x367dee[_0x3fbd62(0xf7)]);}catch(_0x75835d){}else{if(_0x367dee['command']==='getEnums'){const _0x4d3b7d=await this[_0x3fbd62(0x96)](_0x3fbd62(0x8d),_0x3fbd62(0xc6)),_0x32f061=[];if(_0x4d3b7d)for(const _0x906e9 in _0x4d3b7d){let _0x1ddcbe=_0x4d3b7d[_0x906e9]['common'][_0x3fbd62(0x182)];if(_0x1ddcbe&&typeof _0x1ddcbe==='object')_0x1ddcbe=_0x1ddcbe['de']||_0x1ddcbe['en']||Object[_0x3fbd62(0x132)](_0x1ddcbe)[0x0]||JSON['stringify'](_0x1ddcbe);_0x32f061[_0x3fbd62(0x1b2)]({'id':_0x906e9,'name':String(_0x1ddcbe||_0x906e9)});}const _0x16dd0c=await this[_0x3fbd62(0x96)](_0x3fbd62(0x181),'enum'),_0x54a39f=[];if(_0x16dd0c)for(const _0x14934b in _0x16dd0c){let _0x42f2f9=_0x16dd0c[_0x14934b][_0x3fbd62(0x1a1)][_0x3fbd62(0x182)];if(_0x42f2f9&&typeof _0x42f2f9===_0x3fbd62(0x19b))_0x42f2f9=_0x42f2f9['de']||_0x42f2f9['en']||Object[_0x3fbd62(0x132)](_0x42f2f9)[0x0]||JSON[_0x3fbd62(0x165)](_0x42f2f9);_0x54a39f[_0x3fbd62(0x1b2)](String(_0x42f2f9||_0x14934b[_0x3fbd62(0x101)]('.')['pop']()));}this[_0x3fbd62(0x1b0)](_0x367dee[_0x3fbd62(0x152)],_0x367dee[_0x3fbd62(0x1b4)],{'success':!![],'enums':_0x32f061,'rooms':_0x54a39f},_0x367dee[_0x3fbd62(0xf7)]);}else{if(_0x367dee[_0x3fbd62(0x1b4)]===_0x3fbd62(0x90))try{const _0x484260=await this[_0x3fbd62(0x1ab)]('system',_0x3fbd62(0xcd),{'startkey':'system.adapter.ical.','endkey':_0x3fbd62(0x172)}),_0x250a80=new Set();if(_0x484260&&_0x484260[_0x3fbd62(0x1b1)])for(const _0x3381c8 of _0x484260[_0x3fbd62(0x1b1)]){const _0x8c2971=_0x3381c8['id'][_0x3fbd62(0x120)]('system.adapter.',''),_0x403ca5=await this['getForeignStateAsync'](_0x8c2971+_0x3fbd62(0x10a));let _0x356dbb=![];if(_0x403ca5&&_0x403ca5[_0x3fbd62(0xb9)]){const _0x25b066=typeof _0x403ca5[_0x3fbd62(0xb9)]==='string'?JSON[_0x3fbd62(0x18e)](_0x403ca5[_0x3fbd62(0xb9)]):_0x403ca5['val'];Array[_0x3fbd62(0xe2)](_0x25b066)&&_0x25b066[_0x3fbd62(0xa8)](_0x299ad0=>{const _0x3f251f=_0x3fbd62;_0x299ad0[_0x3f251f(0xe5)]&&(_0x250a80[_0x3f251f(0xa7)](_0x299ad0[_0x3f251f(0xe5)]),_0x356dbb=!![]);});}!_0x356dbb&&_0x250a80['add'](_0x8c2971);}const _0x2bb669=Array[_0x3fbd62(0x152)](_0x250a80);if(_0x2bb669[_0x3fbd62(0x112)]===0x0)_0x2bb669[_0x3fbd62(0x1b2)]('Standard');this['sendTo'](_0x367dee[_0x3fbd62(0x152)],_0x367dee[_0x3fbd62(0x1b4)],{'success':!![],'names':_0x2bb669},_0x367dee[_0x3fbd62(0xf7)]);}catch(_0xc4642){this['sendTo'](_0x367dee[_0x3fbd62(0x152)],_0x367dee[_0x3fbd62(0x1b4)],{'success':![],'error':_0x3fbd62(0x194)+_0xc4642[_0x3fbd62(0x92)]},_0x367dee[_0x3fbd62(0xf7)]);}else{if(_0x367dee[_0x3fbd62(0x1b4)]===_0x3fbd62(0x138))try{await automation['updateSchedulePreview'](this),this[_0x3fbd62(0x1b0)](_0x367dee[_0x3fbd62(0x152)],_0x367dee[_0x3fbd62(0x1b4)],{'success':!![]},_0x367dee[_0x3fbd62(0xf7)]);}catch(_0x57dc1f){this[_0x3fbd62(0x12d)]['warn'](_0x3fbd62(0x127)+_0x57dc1f[_0x3fbd62(0x92)]),this[_0x3fbd62(0x1b0)](_0x367dee[_0x3fbd62(0x152)],_0x367dee[_0x3fbd62(0x1b4)],{'success':![],'error':_0x57dc1f[_0x3fbd62(0x92)]},_0x367dee[_0x3fbd62(0xf7)]);}else{if(_0x367dee['command']===_0x3fbd62(0x1b5))try{const _0x9446b8=_0x367dee[_0x3fbd62(0x92)]?_0x367dee['message'][_0x3fbd62(0x170)]:'';if(!_0x9446b8)throw new Error(_0x3fbd62(0xf5));const _0x27dfb9=new GoogleGenerativeAI(_0x9446b8),_0x21bf08=_0x27dfb9['getGenerativeModel']({'model':GEMINI_MODEL}),_0x16a908=await _0x21bf08['generateContent'](_0x3fbd62(0x1a6)),_0xab6e15=await _0x16a908[_0x3fbd62(0xe8)],_0x361f31=_0xab6e15[_0x3fbd62(0x115)]();this[_0x3fbd62(0x1b0)](_0x367dee[_0x3fbd62(0x152)],_0x367dee[_0x3fbd62(0x1b4)],{'success':!![],'message':_0x3fbd62(0x10f)+_0x361f31['substring'](0x0,0x14)+_0x3fbd62(0x11a)},_0x367dee['callback']);}catch(_0x2017ce){this['sendTo'](_0x367dee['from'],_0x367dee[_0x3fbd62(0x1b4)],{'success':![],'message':_0x2017ce[_0x3fbd62(0x92)]},_0x367dee[_0x3fbd62(0xf7)]);}else{if(_0x367dee[_0x3fbd62(0x1b4)]===_0x3fbd62(0x19a))try{const _0x14c0ba=await this[_0x3fbd62(0x14e)](),_0x5f5bca=await this['getObjectViewAsync']('system',_0x3fbd62(0xcd),{'startkey':_0x3fbd62(0xa6),'endkey':_0x3fbd62(0x172)}),_0x1a4866=_0x5f5bca&&_0x5f5bca[_0x3fbd62(0x1b1)]?_0x5f5bca[_0x3fbd62(0x1b1)][_0x3fbd62(0x112)]:0x0;this[_0x3fbd62(0x1b0)](_0x367dee[_0x3fbd62(0x152)],_0x367dee['command'],{'success':!![],'weather':'Sonne:\x20'+_0x14c0ba+',\x20Temp:\x20'+(this[_0x3fbd62(0x16c)][this[_0x3fbd62(0xfa)][_0x3fbd62(0x122)]]||'?')+'¬∞C','calendar':_0x1a4866+_0x3fbd62(0x105)},_0x367dee['callback']);}catch(_0x1090ce){this[_0x3fbd62(0x1b0)](_0x367dee['from'],_0x367dee[_0x3fbd62(0x1b4)],{'success':![]},_0x367dee[_0x3fbd62(0xf7)]);}}}}}}}}}}}[a0_0x223586(0x188)](){const _0x43c52d=a0_0x223586;if(!this[_0x43c52d(0x135)][_0x43c52d(0x100)])return;this['log'][_0x43c52d(0xd0)](_0x43c52d(0x169));try{const _0x184471=this[_0x43c52d(0xe9)]||[];pythonBridge[_0x43c52d(0xae)](this,_0x43c52d(0x131),{'events':_0x184471});}catch(_0x2bff6e){this[_0x43c52d(0x12d)][_0x43c52d(0xfb)](_0x43c52d(0x16b));}}async[a0_0x223586(0x163)](_0x1b97ce,_0x47438f){const _0x1c0e31=a0_0x223586;if(!_0x47438f||this[_0x1c0e31(0x1a3)])return;if(_0x1b97ce[_0x1c0e31(0x19e)](_0x1c0e31(0x18d))&&_0x1b97ce['endsWith'](_0x1c0e31(0xf3))&&_0x47438f[_0x1c0e31(0xb9)])return;if(this[_0x1c0e31(0xfa)][_0x1c0e31(0x15b)]&&_0x1b97ce===this[_0x1c0e31(0xfa)][_0x1c0e31(0x111)]&&this['activeModules']['security']){this[_0x1c0e31(0x12c)](_0x47438f[_0x1c0e31(0xb9)]);return;}if(_0x47438f[_0x1c0e31(0x15e)]&&_0x1b97ce[_0x1c0e31(0x173)](_0x1c0e31(0x198)))return;if(_0x1b97ce===this[_0x1c0e31(0xaf)]+_0x1c0e31(0x103)){if(_0x47438f[_0x1c0e31(0xb9)]&&Object[_0x1c0e31(0x132)](setup[_0x1c0e31(0x14d)])[_0x1c0e31(0x19e)](_0x47438f[_0x1c0e31(0xb9)])){this[_0x1c0e31(0x175)]=_0x47438f[_0x1c0e31(0xb9)];if(_0x47438f[_0x1c0e31(0xb9)]===setup[_0x1c0e31(0x14d)][_0x1c0e31(0xb8)])await recorder['setPresence'](this,![]);else await recorder['setPresence'](this,!![]);if(this[_0x1c0e31(0x16a)]){let _0x3923a1=![],_0x42f447=0x0,_0x45df27='manual';if(this['currentSystemMode']===_0x1c0e31(0x1b3))_0x3923a1=!![],_0x42f447=0x168,_0x45df27=_0x1c0e31(0x1b9);else this['currentSystemMode']===_0x1c0e31(0x113)&&(_0x3923a1=!![],_0x42f447=0x5a0,_0x45df27=_0x1c0e31(0xc7));pythonBridge[_0x1c0e31(0xae)](this,_0x1c0e31(0xd7),{'active':_0x3923a1,'duration':_0x42f447,'label':_0x45df27}),await this[_0x1c0e31(0xf6)](_0x1c0e31(0x1a4),{'val':JSON[_0x1c0e31(0x165)]({'active':_0x3923a1,'label':_0x45df27,'timestamp':Date[_0x1c0e31(0xb7)]()}),'ack':!![]});}}if(!_0x47438f[_0x1c0e31(0x15e)])this['setState'](_0x1b97ce,{'val':this['currentSystemMode'],'ack':!![]});return;}if(_0x1b97ce[_0x1c0e31(0x173)](_0x1c0e31(0x1ad))&&_0x47438f[_0x1c0e31(0x15e)])this[_0x1c0e31(0x11c)](_0x47438f[_0x1c0e31(0xb9)]);if(_0x1b97ce[_0x1c0e31(0x173)]('analysis.energy.warmupTimes')&&_0x47438f['ack']&&this[_0x1c0e31(0x135)]['energy'])automation[_0x1c0e31(0xc8)](this);if(!_0x47438f[_0x1c0e31(0x15e)]){if(_0x1b97ce[_0x1c0e31(0x19e)](_0x1c0e31(0xf8))&&_0x47438f[_0x1c0e31(0xb9)]){this[_0x1c0e31(0x12b)](_0x1b97ce,{'val':![],'ack':!![]}),aiAgent['runGeminiAnalysis'](this);return;}if(_0x1b97ce['includes'](_0x1c0e31(0xdb))&&_0x47438f[_0x1c0e31(0xb9)]){this[_0x1c0e31(0x12b)](_0x1b97ce,{'val':![],'ack':!![]});if(this[_0x1c0e31(0x16a)])aiAgent['createDailyDigest'](this,pythonBridge);return;}if(_0x1b97ce[_0x1c0e31(0x19e)](_0x1c0e31(0xe3))&&_0x47438f[_0x1c0e31(0xb9)]){this[_0x1c0e31(0x12b)](_0x1b97ce,{'val':![],'ack':!![]}),aiAgent[_0x1c0e31(0xc2)](this);return;}if(_0x1b97ce['includes'](_0x1c0e31(0x167))&&_0x47438f['val']){this[_0x1c0e31(0x12b)](_0x1b97ce,{'val':![],'ack':!![]}),aiAgent[_0x1c0e31(0x93)](this);return;}if(_0x1b97ce[_0x1c0e31(0x19e)]('analysis.training.triggerSecurity')&&_0x47438f[_0x1c0e31(0xb9)]){this['setState'](_0x1b97ce,{'val':![],'ack':!![]});if(this[_0x1c0e31(0x16a)])try{const _0x506ea4=await this[_0x1c0e31(0x128)]('LTM.trainingData.sequences');if(_0x506ea4&&_0x506ea4['val']){const _0x224f73=JSON[_0x1c0e31(0x18e)](_0x506ea4[_0x1c0e31(0xb9)]);this[_0x1c0e31(0xf6)](_0x1c0e31(0x154),{'val':'Sec-Training\x20started...','ack':!![]}),pythonBridge[_0x1c0e31(0xae)](this,_0x1c0e31(0xd4),{'sequences':_0x224f73});}}catch(_0x282b2b){}return;}if(_0x1b97ce[_0x1c0e31(0x19e)](_0x1c0e31(0xb4))&&_0x47438f[_0x1c0e31(0xb9)]){this[_0x1c0e31(0x12b)](_0x1b97ce,{'val':![],'ack':!![]});if(this[_0x1c0e31(0x16a)])try{this[_0x1c0e31(0x188)]();const _0x29a941=await this[_0x1c0e31(0x128)]('LTM.dailyDigests');if(_0x29a941&&_0x29a941[_0x1c0e31(0xb9)])pythonBridge[_0x1c0e31(0xae)](this,_0x1c0e31(0x9e),{'digests':JSON[_0x1c0e31(0x18e)](_0x29a941[_0x1c0e31(0xb9)])});aiAgent[_0x1c0e31(0xc9)](this,_0x1c0e31(0x109)),setTimeout(()=>aiAgent[_0x1c0e31(0xc9)](this,_0x1c0e31(0x17b)),0x2ee0);}catch(_0x10364a){}return;}if(_0x1b97ce['includes'](_0x1c0e31(0x180))&&_0x47438f[_0x1c0e31(0xb9)]){this['setState'](_0x1b97ce,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x2aec14=await this[_0x1c0e31(0x128)](_0x1c0e31(0xeb));if(_0x2aec14&&_0x2aec14[_0x1c0e31(0xb9)])pythonBridge[_0x1c0e31(0xae)](this,'TRAIN_ENERGY',{'points':JSON[_0x1c0e31(0x18e)](_0x2aec14['val'])});}catch(_0x327fb8){}return;}if(_0x1b97ce[_0x1c0e31(0x19e)]('analysis.training.triggerComfort')&&_0x47438f['val']){this[_0x1c0e31(0x12b)](_0x1b97ce,{'val':![],'ack':!![]});if(this[_0x1c0e31(0x16a)])try{const _0x10a879=await this[_0x1c0e31(0x128)](_0x1c0e31(0xf9));if(_0x10a879&&_0x10a879['val']){const _0x3aa238={};if(this['config']['devices'])this[_0x1c0e31(0xfa)][_0x1c0e31(0x190)][_0x1c0e31(0xa8)](_0x231982=>{const _0x6a1cc0=_0x1c0e31;if(_0x231982['id']&&_0x231982['type'])_0x3aa238[_0x231982['id']]=_0x231982[_0x6a1cc0(0xb3)];});pythonBridge['send'](this,_0x1c0e31(0xcc),{'events':JSON[_0x1c0e31(0x18e)](_0x10a879['val']),'deviceMap':_0x3aa238});}}catch(_0x17ce29){}return;}if(_0x1b97ce['includes']('analysis.training.triggerTopology')&&_0x47438f[_0x1c0e31(0xb9)]){this[_0x1c0e31(0x12b)](_0x1b97ce,{'val':![],'ack':!![]}),topology[_0x1c0e31(0x159)](this);if(this[_0x1c0e31(0x16a)])try{const _0x5050f2=await this[_0x1c0e31(0x128)](_0x1c0e31(0xda));if(_0x5050f2&&_0x5050f2[_0x1c0e31(0xb9)])pythonBridge[_0x1c0e31(0xae)](this,_0x1c0e31(0xed),{'sequences':JSON[_0x1c0e31(0x18e)](_0x5050f2[_0x1c0e31(0xb9)])});}catch(_0xfec119){}return;}}const _0x2e0dba=(this['config']['devices']||[])['find'](_0x33c693=>_0x33c693['id']===_0x1b97ce);if(_0x2e0dba){const _0xa8455c=await recorder['processSensorEvent'](this,_0x1b97ce,_0x47438f,_0x2e0dba);_0xa8455c&&this[_0x1c0e31(0x12b)](_0x1c0e31(0x185),{'val':Date[_0x1c0e31(0xb7)](),'ack':!![]});_0xa8455c&&_0xa8455c['type']===_0x1c0e31(0x12a)&&_0xa8455c['location']&&this[_0x1c0e31(0x16a)]&&deadMan['updateLocation'](this,_0xa8455c[_0x1c0e31(0x183)]);_0x47438f[_0x1c0e31(0xb9)]&&(_0x47438f[_0x1c0e31(0xb9)]===!![]||_0x47438f[_0x1c0e31(0xb9)]===0x1||String(_0x47438f['val'])[_0x1c0e31(0x164)]()===_0x1c0e31(0x146))&&(_0x2e0dba[_0x1c0e31(0xb3)]&&(_0x2e0dba['type'][_0x1c0e31(0x19e)]('window')||_0x2e0dba[_0x1c0e31(0xb3)][_0x1c0e31(0x19e)](_0x1c0e31(0x12e)))&&this['analyzeWindowOpening'](_0x2e0dba));if(_0x2e0dba[_0x1c0e31(0xb3)]===_0x1c0e31(0xbf)||_0x2e0dba[_0x1c0e31(0xb3)]==='thermostat'){if(this['activeModules'][_0x1c0e31(0x18b)])automation[_0x1c0e31(0x17a)](this);}}}async[a0_0x223586(0x11c)](_0x1187a8){const _0x3b431d=a0_0x223586;if(!this[_0x3b431d(0x158)]||Date['now']()-this['bootTime']>0x493e0)return;try{const _0x1956ee=JSON[_0x3b431d(0x18e)](_0x1187a8),_0x312497=this[_0x3b431d(0x158)][_0x3b431d(0xff)];let _0x42673f=![];for(const _0x3151fc in _0x312497){if(_0x312497[_0x3151fc][_0x3b431d(0x19e)]('AI')&&_0x1956ee[_0x3151fc]&&!_0x1956ee[_0x3151fc]['includes']('AI')){_0x42673f=!![];break;}}_0x42673f&&(await this[_0x3b431d(0xf6)]('analysis.energy.warmupTimes',{'val':JSON[_0x3b431d(0x165)](this[_0x3b431d(0x158)][_0x3b431d(0x94)]),'ack':!![]}),await this[_0x3b431d(0xf6)](_0x3b431d(0x1ad),{'val':JSON[_0x3b431d(0x165)](this['memoryCache'][_0x3b431d(0xff)]),'ack':!![]}));}catch(_0x423de4){}}async[a0_0x223586(0xa5)](){const _0xac3843=a0_0x223586;try{const _0x3f654f=await this[_0xac3843(0x128)](setup[_0xac3843(0x187)]);if(_0x3f654f&&_0x3f654f[_0xac3843(0xb9)])this[_0xac3843(0x175)]=_0x3f654f[_0xac3843(0xb9)];}catch(_0x481f9e){this[_0xac3843(0x175)]=setup[_0xac3843(0x14d)][_0xac3843(0x16e)];}}async[a0_0x223586(0xf0)](){return![];}async['runAutopilot'](){const _0x5a49e7=a0_0x223586;await aiAgent[_0x5a49e7(0x1b7)](this);this[_0x5a49e7(0x135)]['health']&&(this['updateHealthVector'](),this['triggerGaitAnalysis']());if(this[_0x5a49e7(0x135)]['energy'])this['triggerEnergyPrediction']();}async['checkSolarCondition'](){return![];}[a0_0x223586(0x19f)](){const _0x44962e=a0_0x223586;if(!this[_0x44962e(0x16a)])return;}async['triggerEnergyPrediction'](){}[a0_0x223586(0x11d)](){}async['handleInfrasound'](_0x563e0c){}async[a0_0x223586(0x10b)](_0x310454,_0x4b2bd7){}async[a0_0x223586(0x15a)](_0x31d34e){}async[a0_0x223586(0x130)](_0x4afa8c){}[a0_0x223586(0x150)](_0x2044a2){}}function a0_0x309a(_0x5680c0,_0x160365){const _0x494a65=a0_0x445f();return a0_0x309a=function(_0x24e2f4,_0x1f90f0){_0x24e2f4=_0x24e2f4-0x8c;let _0x445f2a=_0x494a65[_0x24e2f4];return _0x445f2a;},a0_0x309a(_0x5680c0,_0x160365);}if(require[a0_0x223586(0x1b6)]!==module)module[a0_0x223586(0xe6)]=_0x597ecf=>new CogniLiving(_0x597ecf);else new CogniLiving();