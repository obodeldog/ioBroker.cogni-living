const a0_0x29b2d0=a0_0x3478;(function(_0x4043ee,_0x457368){const _0x45d16c=a0_0x3478,_0x48bcb2=_0x4043ee();while(!![]){try{const _0x29de93=parseInt(_0x45d16c(0x1f7))/0x1+parseInt(_0x45d16c(0x202))/0x2+-parseInt(_0x45d16c(0x17e))/0x3+parseInt(_0x45d16c(0x1de))/0x4*(parseInt(_0x45d16c(0x154))/0x5)+parseInt(_0x45d16c(0x24a))/0x6+-parseInt(_0x45d16c(0x1db))/0x7*(-parseInt(_0x45d16c(0x114))/0x8)+-parseInt(_0x45d16c(0x1f1))/0x9;if(_0x29de93===_0x457368)break;else _0x48bcb2['push'](_0x48bcb2['shift']());}catch(_0x1e240b){_0x48bcb2['push'](_0x48bcb2['shift']());}}}(a0_0x8012,0xe006a));const a0_0x14b505=(function(){let _0x54d269=!![];return function(_0x3e8ca5,_0x254c13){const _0x43ad9a=_0x54d269?function(){const _0xf8f4c1=a0_0x3478;if(_0x254c13){const _0x86d59d=_0x254c13[_0xf8f4c1(0x1f0)](_0x3e8ca5,arguments);return _0x254c13=null,_0x86d59d;}}:function(){};return _0x54d269=![],_0x43ad9a;};}()),a0_0x3054b5=a0_0x14b505(this,function(){const _0x87e35c=a0_0x3478;return a0_0x3054b5[_0x87e35c(0x19b)]()[_0x87e35c(0x156)](_0x87e35c(0x147))['toString']()['constructor'](a0_0x3054b5)[_0x87e35c(0x156)]('(((.+)+)+)+$');});a0_0x3054b5();'use strict';const utils=require('@iobroker/adapter-core'),{GoogleGenerativeAI}=require('@google/generative-ai'),{spawn}=require('child_process'),path=require(a0_0x29b2d0(0x10f)),fs=require('fs'),installer=require(a0_0x29b2d0(0x1e2)),scanner=require(a0_0x29b2d0(0x245)),schedulers=require(a0_0x29b2d0(0x1ec)),HISTORY_MAX_SIZE=0x32,RAW_LOG_MAX_SIZE=0x9c4,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL=a0_0x29b2d0(0x174),SEQUENCE_TIMEOUT_MS=0x5*0x3c*0x3e8,MAX_TRAINING_SET_SIZE=0x1f4,THERMO_LOG_SIZE=0x3e8,EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,LTM_DP_RAW_LOG=a0_0x29b2d0(0x23c),LTM_DP_DAILY_DIGESTS=a0_0x29b2d0(0x1fa),LTM_DP_STATUS=a0_0x29b2d0(0x199),LTM_DP_TRIGGER_DIGEST=a0_0x29b2d0(0x1ae),LTM_DP_BASELINE_STATUS=a0_0x29b2d0(0x1ac),LTM_DP_DRIFT_CHANNEL=a0_0x29b2d0(0x209),LTM_DP_DRIFT_STATUS=a0_0x29b2d0(0x237),LTM_DP_DRIFT_DETAILS=a0_0x29b2d0(0x16f),LTM_DP_DRIFT_LAST_CHECK=a0_0x29b2d0(0xff),SYSTEM_DP_MODE=a0_0x29b2d0(0x252),SYSTEM_MODES={'NORMAL':a0_0x29b2d0(0x158),'VACATION':'vacation','PARTY':a0_0x29b2d0(0x1e0),'GUEST':a0_0x29b2d0(0x269)},AUTO_RESET_MODES=[SYSTEM_MODES[a0_0x29b2d0(0x25e)],SYSTEM_MODES['GUEST']],PERSONA_MAPPING={'generic':a0_0x29b2d0(0x1e5),'senior_aal':a0_0x29b2d0(0x112),'family':a0_0x29b2d0(0x180),'single_comfort':a0_0x29b2d0(0x1c9),'security':a0_0x29b2d0(0x264)},ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};let activeSequence=[],sequenceTimer=null;function a0_0x8012(){const _0x370fe7=['setForeignStateAsync','ðŸ›¡ï¸\x20SECURITY\x20CHECK:\x20Score\x20','ðŸš€\x20Starting\x20NUUKANNI\x20Logic\x20(v0.12.10)...','analysis.security.topologyMatrix','isPresent','Restoring\x20sensor\x20cache...','Train\x20Energy','Today\x20Vector\x20(15m)','âœ…\x20HEALTH\x20TRAINED.','Train\x20Security','push','Keine\x20Details.','.\x20WETTER:\x20','unshift','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','outdoorSensorId','.communicate.request','summary','pythonProcess','(((.+)+)+)+$','driftDetails','weatherunderground','LTM.trainingData.sequences','PYTHON_EXE','analysis.automation.targetValue','scanDevices','values','BUILD_TOPOLOGY','ready','analysis.automation.patternDetected','shift','Wetterdaten\x20deaktiviert.','15PAWqZW','unload','search','switch','normal','[PYTHON]\x20','filter','NORMAL','occupancy','subscribeForeignStatesAsync','log','TRAIN_SECURITY','exports','ANALYZE_GAIT','N/A','getEnums','value','analysis.security.lastScore','setObjectNotExistsAsync','ðŸ§ª\x20Simulating\x20Butler\x20Proposal:\x20','BUTLER\x20Execution\x20Error:\x20','aiPersona','isAlert','isGracePeriodActive','modeResetJob','generateContent','latitude','LTM.driftAnalysis.driftDetails','ANOMALY','isExit','map','analysis.isAlert','models/gemini-flash-latest','success','ðŸ•¸ï¸\x20Building\x20Topology\x20Matrix...','threshold','some','[RESULT]','.NextHours.Location_1.Day_1.current.temp_value','Temperature\x20Forecast','setHours','Kein\x20API\x20Key!','3482811ZWYyKk','onStateChange','Fokus\x20auf\x20Familienroutinen.','timestamp','analysis.training','events.history_debug_00','[LOG]','date','dailyDigests','[RECORDER]\x20Error:\x20','isProVersion','find','trim','splice','system.isPresent','TOPOLOGY_RESULT','analysis.training.triggerEnergy','Daily\x20Digests','checkAndInstall','config','getForeignStateAsync','Topology\x20Error:\x20','\x20->\x20','analysis.training.triggerTopology','licenseKey','exitTimer','targetId','LTM.processingStatus','analysis.security.lastCheck','toString','extendObjectAsync','fill','genAI','rule','unknown','getDate','lastAlertState','ðŸ›‹ï¸\x20Triggering\x20Comfort\x20Analysis\x20(Pattern\x20Mining)...','analysis.analysisHistory','common','ðŸ›‹ï¸\x20BUTLER:\x20Found\x20','Alert\x20Reason','generic','geminiApiKey','briefingJob','Target\x20ID','LTM.baselineStatus','automationProposal','LTM.triggerDailyDigest','Activity-Level','online','geminiModel','enum','\x0aSTB:\x20','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','boolean','keys','PREDICT_ENERGY','presence','setState','onMessage','button','service.py','pop','stdin','analysis.health.isAnomaly','includes','forEach','analysis.training.triggerSecurity','ENERGY_TRAIN_RESULT','eventHistory','devices','analysis.energy.insulationScore','sensorLastValues','apiKey','Fokus\x20auf\x20Komfort.','Briefing\x20Error:\x20','subscribeStates','analysis.health.trendValue','Unknown','Aktiv\x20(','dependencyInstallInProgress','events.history','join','analysis.health.todayVector','useCalendar','ltmLtbWindowDays','number','inactivityThresholdHours','onUnload','Trigger\x20Briefing','weatherInstance','Keine\x20Termine.','7weZMlD','âš ï¸\x20SECURITY\x20ALARM:\x20','reason','1998212lJIeuf','Anomaly\x20Score','party','ltmStbWindowDays','./lib/installer','scanForDevices','prÃ¤senz','Analysiere\x20ausgewogen.','now','minDaysForBaseline','analysis.triggerBriefing','.\x20SYSTEM_MODE:\x20','.forecast.current.temperature','length','./lib/scheduler','response','enum.rooms.*','enum.functions.*','apply','19115091ebVRVB','toLocaleTimeString','Skipped\x20(No\x20AI\x20or\x20Data)','PONG','city','split','39130tNLsEz','System','\x20new\x20patterns.','LTM.dailyDigests','rawEventLog','loc','delObjectAsync','HEALTH_TRAIN_RESULT','calendarInstance','activityLevel','substring','1589476kjUUBo','analysis.automation.description','ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','analysis.energy.heatingScore','COMFORT_RESULT','GAIT_RESULT','analysis.automation.targetId','LTM.driftAnalysis','testApiKey','startsWith','KI-Modell\x20nicht\x20initialisiert','ðŸ\x20Python\x20Pong','getOverviewData','namespace','daswetter','status','analysis.health.gaitSpeed','rating','ðŸ“\x20Feedback\x20received:\x20','analysis.trigger','Started...','details','window','Digest','SIMULATION:\x20Test-Vorschlag\x20fÃ¼r\x20','simulateButler','state','cancel','setupDriftAnalysisScheduler','analysis.training.status','Target\x20Value','getHours','HEALTH_RESULT','heizung','temperatur','dimmer','indicator.alarm','Trigger\x20Analysis','getObjectAsync','Training\x20Error:\x20','Gemini\x20Error:\x20','isEmergency','TRAINING_COMPLETE','message','telegram','LTM.trainingData.thermodynamics','Raw\x20Log','Auto\x20Apply','presenceDevices','analysis.alertReason','diagnosis','currentSystemMode','Description','LTM.driftAnalysis.baselineDrift','type','Event\x20History','.forecast.current.temp','\x20Tage)','LTM.rawEventLog','text.alarm','Train\x20Comfort','toISOString','analysis.security.currentThreshold',')\x20-\x20SAFE\x20BOOT','detected','from','light','./lib/scanner','string','baselineDrift','warn','cogni-living\x20adapter\x20starting\x20(v','6897720YJCDHi','notifyTelegramInstance','\x20=\x20','systemConfig','Last\x20raw\x20event','.\x20EVENTS:\x20','Pattern\x20Detected','endsWith','system.mode','fenster','setStateAsync','getTime','.\x20KONTEXT:\x20','toFixed','TRAIN_ENERGY','ANALYZE_SEQUENCE','is_anomaly','Kein\x20API\x20Key.','name','getStateAsync','PARTY','systemUUID','TRAIN_COMFORT','klima','version','ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...','PRIORITÃ„T:\x20Sicherheit.','ðŸŒ…\x20Morning\x20Briefing:\x0a','ðŸ›‹ï¸\x20BUTLER:\x20Keine\x20neuen\x20Muster\x20gefunden.','events.lastEvent','longitude','guest','ANALYZE_TREND','TREND_RESULT','object','getForeignObjectsAsync','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','slice','analysis.automation.autoApply','exitGraceTimer','accuweather','analysis.lastResult','analysis.activitySummary','callback','kontakt','getCalendarNames','triggerDailyDigest','Training\x20Status','val','Trend\x20Value','info','analysis.automation.detectedPatterns','stringify','Topology\x20Matrix','User\x20dismissed\x20automation\x20proposal.','Detected\x20Patterns','getLtmData','getGenerativeModel','channel','instance','getMinutes','system.presenceWho','driftAnalysisTimer','debug','lampe','door','Unbekannt','command','Gemini\x20AI\x20initialized.','automation.triggerAction','âš ï¸\x20ALARM:\x20','Current\x20Threshold','replace','bewegung','Lernphase\x20(','stateChange','system.config','targetValue','Err:\x20','python3','ENERGY_PREDICT_RESULT','.Current.WeatherText','.forecast.current.state','json','python_service','Activity\x20Summary','Security\x20Monitor','schalter','openweathermap','LTM.driftAnalysis.lastCheck','analysis.health.trendDiagnosis','alertReason','onReady','bind','useWeather','toLowerCase','analysisInterval','text','Keine\x20Wetterdaten\x20verfÃ¼gbar.','motion','temperature','Missing\x20data','Kalender\x20deaktiviert.','sendTo','location','path','insulation','ðŸ•¸ï¸\x20Topology\x20Map\x20updated.','PRIORITÃ„T:\x20Gesundheit/AAL.','setupLtmScheduler','5762392RkJDzl','indicator','analysis.history_debug_00','ltmJob','Train\x20Health','analysis.security','communicate.request','notifyTelegramEnabled','OK:\x20','WiFi\x20Presence\x20detected.','analysisHistory','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','round','Sec-Training\x20started...','analysis.training.triggerHealth','.\x20EMERGENCY:\x20','description','error','System\x20Mode','writable','analysisTimer','parse','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','ðŸ§ \x20Triggering\x20Security\x20Training...','Last\x20Check','Anomaly\x20Detected','LTM','N/A\x20(Learning)','payload','Sequences','tÃ¼r','floor'];a0_0x8012=function(){return _0x370fe7;};return a0_0x8012();}async function initZombies(_0x3bfbfe){const _0x2a49e7=a0_0x29b2d0;try{const _0x51a197=[_0x2a49e7(0x116),_0x2a49e7(0x183)];for(const _0x39dbdf of _0x51a197){try{const _0x2c51ee=await _0x3bfbfe[_0x2a49e7(0x228)](_0x39dbdf);if(_0x2c51ee)await _0x3bfbfe[_0x2a49e7(0x1fd)](_0x39dbdf);}catch(_0x37667b){}}}catch(_0x342152){}}async function checkLicense(_0x746af7){return!![];}async function initHistory(_0x3b3e4a){const _0x4d2a0f=a0_0x29b2d0;try{const _0x3357ea=await _0x3b3e4a[_0x4d2a0f(0x25d)](_0x4d2a0f(0x1d0));_0x3357ea&&_0x3357ea[_0x4d2a0f(0xd6)]&&(_0x3b3e4a[_0x4d2a0f(0x1c4)]=JSON[_0x4d2a0f(0x129)](_0x3357ea[_0x4d2a0f(0xd6)][_0x4d2a0f(0x19b)]()));}catch(_0x6ff1ab){_0x3b3e4a[_0x4d2a0f(0x1c4)]=[];}try{const _0x3f781e=await _0x3b3e4a[_0x4d2a0f(0x25d)](_0x4d2a0f(0x1a4));if(_0x3f781e&&_0x3f781e[_0x4d2a0f(0xd6)])_0x3b3e4a[_0x4d2a0f(0x11e)]=JSON[_0x4d2a0f(0x129)](_0x3f781e[_0x4d2a0f(0xd6)][_0x4d2a0f(0x19b)]());}catch(_0x1b4626){_0x3b3e4a[_0x4d2a0f(0x11e)]=[];}if(_0x3b3e4a[_0x4d2a0f(0x1c4)]&&_0x3b3e4a[_0x4d2a0f(0x1c4)][_0x4d2a0f(0x1eb)]>0x0){_0x3b3e4a['log'][_0x4d2a0f(0xd8)](_0x4d2a0f(0x139));for(let _0x1555c9=_0x3b3e4a[_0x4d2a0f(0x1c4)][_0x4d2a0f(0x1eb)]-0x1;_0x1555c9>=0x0;_0x1555c9--){const _0x3298c1=_0x3b3e4a[_0x4d2a0f(0x1c4)][_0x1555c9];if(_0x3298c1&&_0x3298c1['id']!==undefined&&_0x3298c1['value']!==undefined)_0x3b3e4a['sensorLastValues'][_0x3298c1['id']]=_0x3298c1[_0x4d2a0f(0x164)];}}}async function initSystemConfig(_0x44a2a0){const _0x41013f=a0_0x29b2d0;try{const _0xdb4bde=await _0x44a2a0['getForeignObjectAsync'](_0x41013f(0xf2));if(_0xdb4bde&&_0xdb4bde[_0x41013f(0x1a5)])_0x44a2a0[_0x41013f(0x24d)]={'latitude':_0xdb4bde['common'][_0x41013f(0x16e)]||0x0,'longitude':_0xdb4bde[_0x41013f(0x1a5)][_0x41013f(0x268)]||0x0,'city':_0xdb4bde[_0x41013f(0x1a5)][_0x41013f(0x1f5)]||''};}catch(_0x3c3ef3){}}async function createAllObjects(_0x1c8207){const _0x3365bc=a0_0x29b2d0;await _0x1c8207[_0x3365bc(0x19c)]('system',{'type':_0x3365bc(0xe0),'common':{'name':_0x3365bc(0x1f8)},'native':{}}),await _0x1c8207[_0x3365bc(0x19c)](SYSTEM_DP_MODE,{'type':'state','common':{'name':_0x3365bc(0x126),'type':'string','role':'state','read':!![],'write':!![],'def':SYSTEM_MODES[_0x3365bc(0x15b)]},'native':{}}),await _0x1c8207['setObjectNotExistsAsync'](_0x3365bc(0xe3),{'type':_0x3365bc(0x21c),'common':{'name':'Who\x20is\x20present?','type':_0x3365bc(0x246),'role':'text','read':!![],'write':![]},'native':{}}),await _0x1c8207[_0x3365bc(0x166)](_0x3365bc(0x267),{'type':_0x3365bc(0x21c),'common':{'name':_0x3365bc(0x24e),'type':'string','role':_0x3365bc(0xf9),'read':!![],'write':![]},'native':{}}),await _0x1c8207['setObjectNotExistsAsync'](_0x3365bc(0x1d0),{'type':_0x3365bc(0x21c),'common':{'name':_0x3365bc(0x239),'type':'string','role':_0x3365bc(0xf9),'read':!![],'write':![]},'native':{}}),await _0x1c8207[_0x3365bc(0x19c)](_0x3365bc(0x182),{'type':_0x3365bc(0xe0),'common':{'name':'AI\x20Training'},'native':{}}),await _0x1c8207[_0x3365bc(0x166)]('analysis.training.triggerSecurity',{'type':'state','common':{'name':_0x3365bc(0x13d),'type':'boolean','role':_0x3365bc(0x1bb),'read':!![],'write':!![]},'native':{}}),await _0x1c8207[_0x3365bc(0x166)](_0x3365bc(0x122),{'type':_0x3365bc(0x21c),'common':{'name':_0x3365bc(0x118),'type':_0x3365bc(0x1b5),'role':_0x3365bc(0x1bb),'read':!![],'write':!![]},'native':{}}),await _0x1c8207[_0x3365bc(0x166)](_0x3365bc(0x18e),{'type':_0x3365bc(0x21c),'common':{'name':_0x3365bc(0x13a),'type':'boolean','role':_0x3365bc(0x1bb),'read':!![],'write':!![]},'native':{}}),await _0x1c8207['setObjectNotExistsAsync']('analysis.training.triggerComfort',{'type':_0x3365bc(0x21c),'common':{'name':_0x3365bc(0x23e),'type':'boolean','role':_0x3365bc(0x1bb),'read':!![],'write':!![]},'native':{}}),await _0x1c8207['setObjectNotExistsAsync']('analysis.training.triggerTopology',{'type':_0x3365bc(0x21c),'common':{'name':'Build\x20Topology','type':'boolean','role':_0x3365bc(0x1bb),'read':!![],'write':!![]},'native':{}}),await _0x1c8207[_0x3365bc(0x166)](_0x3365bc(0x21f),{'type':_0x3365bc(0x21c),'common':{'name':_0x3365bc(0xd5),'type':'string','role':_0x3365bc(0x107),'read':!![],'write':![]},'native':{}}),await _0x1c8207[_0x3365bc(0x19c)](_0x3365bc(0x119),{'type':_0x3365bc(0xe0),'common':{'name':_0x3365bc(0xfc)},'native':{}}),await _0x1c8207['setObjectNotExistsAsync'](_0x3365bc(0x165),{'type':_0x3365bc(0x21c),'common':{'name':_0x3365bc(0x1df),'type':'number','role':'value','read':!![],'write':![]},'native':{}}),await _0x1c8207[_0x3365bc(0x166)](_0x3365bc(0x240),{'type':_0x3365bc(0x21c),'common':{'name':_0x3365bc(0xed),'type':'number','role':_0x3365bc(0x164),'read':!![],'write':![],'def':0.05},'native':{}}),await _0x1c8207['setObjectNotExistsAsync'](_0x3365bc(0x19a),{'type':_0x3365bc(0x21c),'common':{'name':_0x3365bc(0x12c),'type':_0x3365bc(0x246),'role':_0x3365bc(0x185),'read':!![],'write':![]},'native':{}}),await _0x1c8207[_0x3365bc(0x166)]('analysis.security.topologyMatrix',{'type':_0x3365bc(0x21c),'common':{'name':_0x3365bc(0xdb),'type':_0x3365bc(0x246),'role':_0x3365bc(0xf9),'read':!![],'write':![]},'native':{}}),await _0x1c8207['extendObjectAsync']('analysis.health',{'type':_0x3365bc(0xe0),'common':{'name':'Health\x20Analysis'},'native':{}}),await _0x1c8207['setObjectNotExistsAsync']('analysis.health.lastCheck',{'type':_0x3365bc(0x21c),'common':{'name':_0x3365bc(0x12c),'type':'string','role':_0x3365bc(0x185),'read':!![],'write':![]},'native':{}}),await _0x1c8207[_0x3365bc(0x166)](_0x3365bc(0x1bf),{'type':_0x3365bc(0x21c),'common':{'name':_0x3365bc(0x12d),'type':'boolean','role':'indicator','read':!![],'write':![]},'native':{}}),await _0x1c8207[_0x3365bc(0x166)](_0x3365bc(0x100),{'type':_0x3365bc(0x21c),'common':{'name':'Trend','type':_0x3365bc(0x246),'role':'text','read':!![],'write':![]},'native':{}}),await _0x1c8207[_0x3365bc(0x166)]('analysis.health.trendValue',{'type':_0x3365bc(0x21c),'common':{'name':_0x3365bc(0xd7),'type':_0x3365bc(0x1d5),'role':_0x3365bc(0x164),'read':!![],'write':![]},'native':{}}),await _0x1c8207[_0x3365bc(0x166)](_0x3365bc(0x1d2),{'type':'state','common':{'name':_0x3365bc(0x13b),'type':_0x3365bc(0x246),'role':_0x3365bc(0xf9),'read':!![],'write':![]},'native':{}}),await _0x1c8207[_0x3365bc(0x166)](_0x3365bc(0x212),{'type':'state','common':{'name':'Gait\x20Speed\x20Trend','type':_0x3365bc(0x1d5),'role':_0x3365bc(0x164),'read':!![],'write':![]},'native':{}}),await _0x1c8207['extendObjectAsync']('analysis.energy',{'type':'channel','common':{'name':'Energy\x20Intelligence'},'native':{}}),await _0x1c8207[_0x3365bc(0x166)](_0x3365bc(0x1c6),{'type':_0x3365bc(0x21c),'common':{'name':'Insulation\x20Score','type':_0x3365bc(0x246),'role':_0x3365bc(0x107),'read':!![],'write':![]},'native':{}}),await _0x1c8207['setObjectNotExistsAsync'](_0x3365bc(0x205),{'type':_0x3365bc(0x21c),'common':{'name':'Heating\x20Score','type':'string','role':_0x3365bc(0x107),'read':!![],'write':![]},'native':{}}),await _0x1c8207[_0x3365bc(0x166)]('analysis.energy.forecast',{'type':_0x3365bc(0x21c),'common':{'name':_0x3365bc(0x17b),'type':_0x3365bc(0x246),'role':_0x3365bc(0xf9),'read':!![],'write':![]},'native':{}}),await _0x1c8207[_0x3365bc(0x19c)](_0x3365bc(0x12e),{'type':'channel','common':{'name':_0x3365bc(0x12e)},'native':{}}),await _0x1c8207[_0x3365bc(0x19c)](LTM_DP_RAW_LOG,{'type':_0x3365bc(0x21c),'common':{'name':_0x3365bc(0x230),'type':_0x3365bc(0x246),'role':_0x3365bc(0xf9),'read':!![],'write':![]},'native':{}}),await _0x1c8207[_0x3365bc(0x19c)](LTM_DP_DAILY_DIGESTS,{'type':_0x3365bc(0x21c),'common':{'name':_0x3365bc(0x18f),'type':_0x3365bc(0x246),'role':_0x3365bc(0xf9),'read':!![],'write':![]},'native':{}}),await _0x1c8207['setObjectNotExistsAsync']('LTM.trainingData.sequences',{'type':_0x3365bc(0x21c),'common':{'name':_0x3365bc(0x131),'type':_0x3365bc(0x246),'role':_0x3365bc(0xf9),'read':!![],'write':![]},'native':{}}),await _0x1c8207[_0x3365bc(0x166)]('LTM.trainingData.thermodynamics',{'type':'state','common':{'name':'Thermodynamics','type':_0x3365bc(0x246),'role':'json','read':!![],'write':![]},'native':{}}),await _0x1c8207[_0x3365bc(0x166)](_0x3365bc(0x215),{'type':_0x3365bc(0x21c),'common':{'name':_0x3365bc(0x227),'type':_0x3365bc(0x1b5),'role':_0x3365bc(0x1bb),'read':!![],'write':!![]},'native':{}}),await _0x1c8207[_0x3365bc(0x166)](_0x3365bc(0x1e8),{'type':'state','common':{'name':_0x3365bc(0x1d8),'type':_0x3365bc(0x1b5),'role':_0x3365bc(0x1bb),'read':!![],'write':!![]},'native':{}}),await _0x1c8207[_0x3365bc(0x166)](_0x3365bc(0x173),{'type':_0x3365bc(0x21c),'common':{'name':'Alert\x20Status','type':_0x3365bc(0x1b5),'role':_0x3365bc(0x226),'read':!![],'write':![]},'native':{}}),await _0x1c8207[_0x3365bc(0x166)](_0x3365bc(0x233),{'type':_0x3365bc(0x21c),'common':{'name':_0x3365bc(0x1a7),'type':_0x3365bc(0x246),'role':_0x3365bc(0x23d),'read':!![],'write':![]},'native':{}}),await _0x1c8207['setObjectNotExistsAsync']('analysis.activitySummary',{'type':_0x3365bc(0x21c),'common':{'name':_0x3365bc(0xfb),'type':'string','role':_0x3365bc(0x107),'read':!![],'write':![]},'native':{}}),await _0x1c8207[_0x3365bc(0x166)](_0x3365bc(0x151),{'type':_0x3365bc(0x21c),'common':{'name':_0x3365bc(0x250),'type':_0x3365bc(0x1b5),'role':_0x3365bc(0x115),'read':!![],'write':![]},'native':{}}),await _0x1c8207[_0x3365bc(0x166)]('analysis.automation.description',{'type':_0x3365bc(0x21c),'common':{'name':_0x3365bc(0x236),'type':'string','role':_0x3365bc(0x107),'read':!![],'write':![]},'native':{}}),await _0x1c8207[_0x3365bc(0x166)](_0x3365bc(0xd9),{'type':_0x3365bc(0x21c),'common':{'name':_0x3365bc(0xdd),'type':_0x3365bc(0x246),'role':_0x3365bc(0xf9),'read':!![],'write':![]},'native':{}}),await _0x1c8207[_0x3365bc(0x166)](_0x3365bc(0x208),{'type':_0x3365bc(0x21c),'common':{'name':_0x3365bc(0x1ab),'type':'string','role':_0x3365bc(0x107),'read':!![],'write':![]},'native':{}}),await _0x1c8207[_0x3365bc(0x166)](_0x3365bc(0x14c),{'type':'state','common':{'name':_0x3365bc(0x220),'type':_0x3365bc(0x246),'role':'text','read':!![],'write':![]},'native':{}}),await _0x1c8207[_0x3365bc(0x166)](_0x3365bc(0x270),{'type':_0x3365bc(0x21c),'common':{'name':_0x3365bc(0x231),'type':_0x3365bc(0x1b5),'role':'switch','read':!![],'write':!![]},'native':{}}),await _0x1c8207[_0x3365bc(0x166)]('analysis.automation.triggerAction',{'type':_0x3365bc(0x21c),'common':{'name':'Trigger\x20Action','type':_0x3365bc(0x1b5),'role':_0x3365bc(0x1bb),'read':!![],'write':!![]},'native':{}});}async function loadSystemMode(_0x5b8eeb){const _0x1bf290=a0_0x29b2d0;try{const _0x2aa0cc=await _0x5b8eeb['getStateAsync'](SYSTEM_DP_MODE);_0x2aa0cc&&_0x2aa0cc[_0x1bf290(0xd6)]&&Object[_0x1bf290(0x14e)](SYSTEM_MODES)[_0x1bf290(0x1c0)](_0x2aa0cc[_0x1bf290(0xd6)])?_0x5b8eeb[_0x1bf290(0x235)]=_0x2aa0cc[_0x1bf290(0xd6)]:(_0x5b8eeb[_0x1bf290(0x235)]=SYSTEM_MODES[_0x1bf290(0x15b)],await _0x5b8eeb[_0x1bf290(0x254)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x1bf290(0x15b)],'ack':!![]}));}catch(_0x202aa8){_0x5b8eeb[_0x1bf290(0x235)]=SYSTEM_MODES[_0x1bf290(0x15b)];}}async function loadRawEventLog(_0x328ca4){const _0x59aba7=a0_0x29b2d0;try{const _0x360cc6=await _0x328ca4['getStateAsync'](LTM_DP_RAW_LOG);if(_0x360cc6&&_0x360cc6[_0x59aba7(0xd6)])_0x328ca4['rawEventLog']=JSON[_0x59aba7(0x129)](_0x360cc6[_0x59aba7(0xd6)]);}catch(_0x32dd6b){_0x328ca4[_0x59aba7(0x1fb)]=[];}}async function saveRawEventLog(_0x5b46b2){const _0x4c5ae5=a0_0x29b2d0;if(_0x5b46b2[_0x4c5ae5(0x1fb)]['length']>RAW_LOG_MAX_SIZE)_0x5b46b2['rawEventLog']['splice'](0x0,_0x5b46b2[_0x4c5ae5(0x1fb)][_0x4c5ae5(0x1eb)]-RAW_LOG_MAX_SIZE);await _0x5b46b2[_0x4c5ae5(0x254)](LTM_DP_RAW_LOG,{'val':JSON[_0x4c5ae5(0xda)](_0x5b46b2['rawEventLog']),'ack':!![]});}async function loadDailyDigests(_0x30cdcd){const _0x2325a9=a0_0x29b2d0;try{const _0x2ee55b=await _0x30cdcd[_0x2325a9(0x25d)](LTM_DP_DAILY_DIGESTS);if(_0x2ee55b&&_0x2ee55b['val'])_0x30cdcd['dailyDigests']=JSON[_0x2325a9(0x129)](_0x2ee55b[_0x2325a9(0xd6)]);}catch(_0x28ae63){_0x30cdcd[_0x2325a9(0x186)]=[];}await updateBaselineStatus(_0x30cdcd);}async function saveDailyDigests(_0x5432d8,_0x3679c9=!![]){const _0x20fd44=a0_0x29b2d0,_0x35179b=_0x5432d8[_0x20fd44(0x191)][_0x20fd44(0x1d4)]||0x3c;_0x5432d8[_0x20fd44(0x186)][_0x20fd44(0x1eb)]>_0x35179b&&_0x5432d8['dailyDigests'][_0x20fd44(0x18b)](0x0,_0x5432d8['dailyDigests'][_0x20fd44(0x1eb)]-_0x35179b);await _0x5432d8['setStateAsync'](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x20fd44(0xda)](_0x5432d8[_0x20fd44(0x186)]),'ack':!![]});if(_0x3679c9)await updateBaselineStatus(_0x5432d8);}async function updateAnalysisHistory(_0x1ffacf,_0x37e6d5){const _0x4d6a1c=a0_0x29b2d0;_0x1ffacf[_0x4d6a1c(0x11e)][_0x4d6a1c(0x141)](_0x37e6d5);if(_0x1ffacf[_0x4d6a1c(0x11e)][_0x4d6a1c(0x1eb)]>HISTORY_MAX_SIZE)_0x1ffacf[_0x4d6a1c(0x11e)][_0x4d6a1c(0x1bd)]();await _0x1ffacf['setStateAsync']('analysis.analysisHistory',{'val':JSON[_0x4d6a1c(0xda)](_0x1ffacf[_0x4d6a1c(0x11e)]),'ack':!![]});}async function updateBaselineStatus(_0x28e3d5){const _0x5878d8=a0_0x29b2d0;if(!_0x28e3d5['isProVersion']){await _0x28e3d5[_0x5878d8(0x254)](LTM_DP_BASELINE_STATUS,{'val':'Deaktiviert\x20(Pro-Feature)','ack':!![]});return;}const _0x686249=_0x28e3d5['dailyDigests'][_0x5878d8(0x1eb)]>=(_0x28e3d5['config']['minDaysForBaseline']||0x7)?_0x5878d8(0x1ce)+_0x28e3d5[_0x5878d8(0x186)]['length']+_0x5878d8(0x23b):_0x5878d8(0xf0)+_0x28e3d5[_0x5878d8(0x186)][_0x5878d8(0x1eb)]+'/'+(_0x28e3d5[_0x5878d8(0x191)][_0x5878d8(0x1e7)]||0x7)+')';await _0x28e3d5['setStateAsync'](LTM_DP_BASELINE_STATUS,{'val':_0x686249,'ack':!![]});}async function initSensorSubscriptions(_0x5d9e1a){const _0x5ef424=a0_0x29b2d0,_0x73400d=_0x5d9e1a[_0x5ef424(0x191)][_0x5ef424(0x1c5)];if(_0x73400d)for(const _0x3e9f29 of _0x73400d){await _0x5d9e1a[_0x5ef424(0x15d)](_0x3e9f29['id']);}}function a0_0x3478(_0x538a7f,_0x1b8f39){const _0x4468bc=a0_0x8012();return a0_0x3478=function(_0x3054b5,_0x14b505){_0x3054b5=_0x3054b5-0xcd;let _0x801225=_0x4468bc[_0x3054b5];return _0x801225;},a0_0x3478(_0x538a7f,_0x1b8f39);}async function initPresenceSubscriptions(_0x49ece9){const _0x313a73=a0_0x29b2d0,_0x3de821=_0x49ece9[_0x313a73(0x191)][_0x313a73(0x232)];if(_0x3de821)for(const _0xc2a544 of _0x3de821){await _0x49ece9[_0x313a73(0x15d)](_0xc2a544);}}async function setupTelegramListener(_0x262bee){const _0x259d7a=a0_0x29b2d0,_0xc2d5e5=_0x262bee[_0x259d7a(0x191)][_0x259d7a(0x24b)];if(_0x262bee[_0x259d7a(0x191)][_0x259d7a(0x11b)]&&_0xc2d5e5)await _0x262bee[_0x259d7a(0x15d)](_0xc2d5e5+_0x259d7a(0x144));}async function checkWifiPresence(_0x252d50){const _0x5d9a07=a0_0x29b2d0;try{const _0x4d142b=_0x252d50[_0x5d9a07(0x191)][_0x5d9a07(0x232)]||[];let _0x11d1d5=![];const _0x3bc9d0=[];for(const _0x43aa72 of _0x4d142b){try{const _0x2eb917=await _0x252d50[_0x5d9a07(0x192)](_0x43aa72);_0x2eb917&&(_0x2eb917['val']===!![]||_0x2eb917[_0x5d9a07(0xd6)]===_0x5d9a07(0x1b0)||_0x2eb917[_0x5d9a07(0xd6)]===0x1)&&(_0x11d1d5=!![],_0x3bc9d0[_0x5d9a07(0x13e)](_0x43aa72));}catch(_0xe265c4){}}return await _0x252d50[_0x5d9a07(0x254)](_0x5d9a07(0xe3),{'val':_0x3bc9d0[_0x5d9a07(0x1d1)](',\x20'),'ack':!![]}),_0x11d1d5&&(_0x252d50['exitTimer']&&(_0x252d50[_0x5d9a07(0x15e)][_0x5d9a07(0xd8)](_0x5d9a07(0x11d)),abortExitTimer(_0x252d50)),!_0x252d50[_0x5d9a07(0x138)]&&_0x252d50[_0x5d9a07(0x235)]===SYSTEM_MODES[_0x5d9a07(0x15b)]&&await setPresence(_0x252d50,!![])),_0x11d1d5;}catch(_0x230b3b){return![];}}function startExitTimer(_0x13eb4d){const _0x443bde=a0_0x29b2d0;abortExitTimer(_0x13eb4d),_0x13eb4d[_0x443bde(0x16b)]=!![],_0x13eb4d[_0x443bde(0xcd)]=setTimeout(()=>{const _0x53e440=_0x443bde;_0x13eb4d[_0x53e440(0x16b)]=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),_0x13eb4d[_0x443bde(0x197)]=setTimeout(()=>{setPresence(_0x13eb4d,![]),_0x13eb4d['exitTimer']=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}function abortExitTimer(_0x7f17e4){const _0x524d06=a0_0x29b2d0;if(_0x7f17e4[_0x524d06(0x197)])clearTimeout(_0x7f17e4[_0x524d06(0x197)]);if(_0x7f17e4['exitGraceTimer'])clearTimeout(_0x7f17e4[_0x524d06(0xcd)]);_0x7f17e4[_0x524d06(0x197)]=null,_0x7f17e4[_0x524d06(0xcd)]=null,_0x7f17e4['isGracePeriodActive']=![];}async function setPresence(_0x39296a,_0x3422f1){const _0x5ea94c=a0_0x29b2d0;if(_0x39296a[_0x5ea94c(0x138)]===_0x3422f1)return;_0x39296a[_0x5ea94c(0x138)]=_0x3422f1,await _0x39296a[_0x5ea94c(0x254)](_0x5ea94c(0x18c),{'val':_0x3422f1,'ack':!![]});}async function executeAutomationAction(_0x5778d3){const _0x52e9aa=a0_0x29b2d0;try{const _0x56012b=await _0x5778d3[_0x52e9aa(0x25d)](_0x52e9aa(0x208)),_0x54cbad=await _0x5778d3[_0x52e9aa(0x25d)](_0x52e9aa(0x14c));if(_0x56012b&&_0x56012b[_0x52e9aa(0xd6)]&&_0x54cbad){const _0x4ccee1=_0x56012b[_0x52e9aa(0xd6)];let _0x251a64=_0x54cbad[_0x52e9aa(0xd6)];try{_0x251a64=JSON[_0x52e9aa(0x129)](_0x251a64);}catch(_0x3a2429){}_0x5778d3[_0x52e9aa(0x15e)]['info']('ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20'+_0x4ccee1+_0x52e9aa(0x24c)+_0x251a64),await _0x5778d3[_0x52e9aa(0x134)](_0x4ccee1,_0x251a64);}else _0x5778d3[_0x52e9aa(0x15e)][_0x52e9aa(0x248)](_0x52e9aa(0x204));}catch(_0x1d4672){_0x5778d3[_0x52e9aa(0x15e)][_0x52e9aa(0x125)](_0x52e9aa(0x168)+_0x1d4672['message']);}}async function processSensorEvent(_0x1af478,_0x3ada74,_0x3870d2,_0x1ea2e2){const _0x121911=a0_0x29b2d0;if(!_0x1ea2e2)return;const _0x4d0d45=_0x3870d2[_0x121911(0xd6)],_0xc3293=Date[_0x121911(0x1e6)](),_0x511d05=_0x1af478[_0x121911(0x1c7)][_0x3ada74];_0x1af478[_0x121911(0x1c7)][_0x3ada74]=_0x4d0d45;if(!_0x1ea2e2['logDuplicates']&&_0x511d05!=undefined&&_0x511d05==_0x4d0d45)return;const _0x5a9fd5=(_0x1ea2e2[_0x121911(0x238)]||'')[_0x121911(0x105)](),_0x468894=_0x5a9fd5[_0x121911(0x1c0)](_0x121911(0x10a))||_0x5a9fd5['includes'](_0x121911(0x224))||_0x5a9fd5[_0x121911(0x1c0)](_0x121911(0x261))||_0x5a9fd5['includes'](_0x121911(0x223));_0x1af478[_0x121911(0x188)]&&_0x468894&&recordThermodynamics(_0x1af478,_0x3ada74,_0x4d0d45,_0x1ea2e2['location']);const _0x8661f4={'timestamp':_0xc3293,'id':_0x3ada74,'name':_0x1ea2e2[_0x121911(0x25c)],'type':_0x1ea2e2['type'],'location':_0x1ea2e2[_0x121911(0x10e)],'value':_0x4d0d45};_0x1af478[_0x121911(0x1c4)][_0x121911(0x141)](_0x8661f4);if(_0x1af478[_0x121911(0x1c4)]['length']>HISTORY_MAX_SIZE)_0x1af478['eventHistory']['pop']();await _0x1af478[_0x121911(0x254)](_0x121911(0x267),{'val':JSON[_0x121911(0xda)](_0x8661f4),'ack':!![]}),await _0x1af478[_0x121911(0x254)](_0x121911(0x1d0),{'val':JSON[_0x121911(0xda)](_0x1af478['eventHistory']),'ack':!![]});_0x1af478[_0x121911(0x188)]&&(_0x1af478[_0x121911(0x1fb)][_0x121911(0x13e)](_0x8661f4),await saveRawEventLog(_0x1af478),recordSequence(_0x1af478,_0x8661f4));if(_0x1ea2e2[_0x121911(0x171)]&&_0x4d0d45===!![]){if(_0x1af478[_0x121911(0x138)]&&!_0x1af478[_0x121911(0x16b)])startExitTimer(_0x1af478);else{if(!_0x1af478[_0x121911(0x138)])setPresence(_0x1af478,!![]);}}else{if(_0x1ea2e2[_0x121911(0x238)]==='motion'&&_0x4d0d45===!![]){if(_0x1af478[_0x121911(0x197)])abortExitTimer(_0x1af478);if(!_0x1af478[_0x121911(0x138)]&&_0x1af478[_0x121911(0x235)]===SYSTEM_MODES['NORMAL'])setPresence(_0x1af478,!![]);}}}async function recordThermodynamics(_0x51b129,_0x2515d9,_0x2c8722,_0x5830da){const _0x41b9dc=a0_0x29b2d0,_0x20a994=await getOutsideTemperatureNumeric(_0x51b129),_0x5b223a=await _0x51b129['getStateAsync'](_0x41b9dc(0x22f));let _0x4100b6=[];if(_0x5b223a&&_0x5b223a[_0x41b9dc(0xd6)])try{_0x4100b6=JSON[_0x41b9dc(0x129)](_0x5b223a[_0x41b9dc(0xd6)]);}catch(_0xf1f1ff){}_0x4100b6[_0x41b9dc(0x13e)]({'ts':Date[_0x41b9dc(0x1e6)](),'room':_0x5830da||'Unknown','t_in':_0x2c8722,'t_out':_0x20a994});if(_0x4100b6[_0x41b9dc(0x1eb)]>THERMO_LOG_SIZE)_0x4100b6[_0x41b9dc(0x152)]();await _0x51b129['setStateAsync'](_0x41b9dc(0x22f),{'val':JSON['stringify'](_0x4100b6),'ack':!![]});}async function getOutsideTemperatureNumeric(_0x86033d){const _0x14ca89=a0_0x29b2d0;if(_0x86033d['config'][_0x14ca89(0x143)])try{const _0x48443d=await _0x86033d['getForeignStateAsync'](_0x86033d['config'][_0x14ca89(0x143)]);if(_0x48443d&&_0x48443d['val']!==undefined&&_0x48443d[_0x14ca89(0xd6)]!==null)return parseFloat(_0x48443d['val']);}catch(_0x5b5eec){}const _0xf1ec35=_0x86033d[_0x14ca89(0x191)][_0x14ca89(0x1d9)];if(!_0x86033d[_0x14ca89(0x191)][_0x14ca89(0x104)]||!_0xf1ec35)return null;try{let _0x28512e='';if(_0xf1ec35['includes'](_0x14ca89(0xce)))_0x28512e=_0xf1ec35+'.Current.Temperature';else{if(_0xf1ec35[_0x14ca89(0x1c0)](_0x14ca89(0x210)))_0x28512e=_0xf1ec35+_0x14ca89(0x17a);else{if(_0xf1ec35[_0x14ca89(0x1c0)](_0x14ca89(0xfe)))_0x28512e=_0xf1ec35+'.forecast.current.temperature';else{if(_0xf1ec35[_0x14ca89(0x1c0)](_0x14ca89(0x149)))_0x28512e=_0xf1ec35+_0x14ca89(0x23a);}}}if(_0x28512e){const _0x12f05d=await _0x86033d[_0x14ca89(0x192)](_0x28512e);if(_0x12f05d&&_0x12f05d[_0x14ca89(0xd6)]!==undefined&&_0x12f05d['val']!==null)return parseFloat(_0x12f05d[_0x14ca89(0xd6)]);}}catch(_0x37a562){}return null;}async function recordSequence(_0x46b85c,_0x275a89){const _0x409d71=a0_0x29b2d0,_0x203c49=(_0x275a89[_0x409d71(0x238)]||'')[_0x409d71(0x105)](),_0x29901b=[_0x409d71(0x109),_0x409d71(0xef),_0x409d71(0x1e4),_0x409d71(0x1b8),_0x409d71(0x15c),_0x409d71(0xe7),_0x409d71(0x132),_0x409d71(0x218),_0x409d71(0x253),'contact',_0x409d71(0xd2),_0x409d71(0x244),'licht',_0x409d71(0x157),_0x409d71(0xfd),_0x409d71(0x225),_0x409d71(0xe6)];if(!_0x29901b[_0x409d71(0x178)](_0x41872b=>_0x203c49[_0x409d71(0x1c0)](_0x41872b)))return;if(!_0x275a89[_0x409d71(0x164)])return;if(sequenceTimer)clearTimeout(sequenceTimer);activeSequence['push']({'loc':_0x275a89[_0x409d71(0x10e)]||_0x409d71(0x1cd),'id':_0x275a89['id'],'ts':Date[_0x409d71(0x1e6)]()}),sequenceTimer=setTimeout(async()=>{const _0x314ad3=_0x409d71;if(activeSequence[_0x314ad3(0x1eb)]>0x1)await saveCompletedSequence(_0x46b85c);activeSequence=[];},SEQUENCE_TIMEOUT_MS);}async function saveCompletedSequence(_0x3d6c8a){const _0x15a69f=a0_0x29b2d0;try{const _0x64f821=await _0x3d6c8a[_0x15a69f(0x25d)](_0x15a69f(0x14a));let _0x2eeb49=[];if(_0x64f821&&_0x64f821['val'])try{_0x2eeb49=JSON['parse'](_0x64f821['val']);}catch(_0xd2d294){}const _0x2baec8=activeSequence[0x0]['ts'],_0x8178a=activeSequence[_0x15a69f(0x172)](_0x1c8182=>({'loc':_0x1c8182[_0x15a69f(0x1fc)],'t_delta':Math[_0x15a69f(0x120)]((_0x1c8182['ts']-_0x2baec8)/0x3e8)})),_0x159a08={'timestamp':new Date(_0x2baec8)['toISOString'](),'steps':_0x8178a,'duration':Math['round']((activeSequence[activeSequence[_0x15a69f(0x1eb)]-0x1]['ts']-_0x2baec8)/0x3e8),'daytime':new Date(_0x2baec8)['getHours']()};_0x2eeb49[_0x15a69f(0x13e)](_0x159a08);if(_0x2eeb49[_0x15a69f(0x1eb)]>MAX_TRAINING_SET_SIZE)_0x2eeb49[_0x15a69f(0x152)]();await _0x3d6c8a[_0x15a69f(0x254)]('LTM.trainingData.sequences',{'val':JSON[_0x15a69f(0xda)](_0x2eeb49),'ack':!![]}),runSecurityCheck(_0x3d6c8a,_0x159a08);}catch(_0x14a33f){_0x3d6c8a[_0x15a69f(0x15e)]['error'](_0x15a69f(0x187)+_0x14a33f[_0x15a69f(0x22d)]);}}function runSecurityCheck(_0x3ba618,_0x1118f9){const _0x526278=a0_0x29b2d0;if(!_0x3ba618[_0x526278(0x188)])return;sendToPython(_0x3ba618,_0x526278(0x259),{'sequence':_0x1118f9});}async function createDailyDigest(_0x3cb4b6){const _0x67939d=a0_0x29b2d0;if(!_0x3cb4b6[_0x67939d(0x188)])return;await _0x3cb4b6[_0x67939d(0x254)](LTM_DP_STATUS,{'val':_0x67939d(0x216),'ack':!![]});if(!_0x3cb4b6[_0x67939d(0x1b1)]||_0x3cb4b6['rawEventLog']['length']<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x3cb4b6[_0x67939d(0x254)](LTM_DP_STATUS,{'val':_0x67939d(0x1f3),'ack':!![]});return;}const _0x5bb7e1=JSON[_0x67939d(0x129)](JSON['stringify'](_0x3cb4b6[_0x67939d(0x1fb)])),_0x17178d=_0x5bb7e1[_0x67939d(0x1eb)],_0x3027a2='ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a'+JSON['stringify'](_0x5bb7e1);try{const _0xeea94d=await _0x3cb4b6['geminiModel'][_0x67939d(0x16d)](_0x3027a2),_0x2e7633=JSON[_0x67939d(0x129)](_0xeea94d[_0x67939d(0x1ed)][_0x67939d(0x107)]()[_0x67939d(0xee)](/```json|```/g,'')[_0x67939d(0x18a)]()),_0x604e61={'timestamp':new Date()[_0x67939d(0x23f)](),'eventCount':_0x17178d,'summary':_0x2e7633[_0x67939d(0x145)]||_0x67939d(0x219),'activityLevel':_0x2e7633[_0x67939d(0x200)]||'normal','systemMode':_0x3cb4b6[_0x67939d(0x235)]};_0x3cb4b6[_0x67939d(0x186)][_0x67939d(0x13e)](_0x604e61),await saveDailyDigests(_0x3cb4b6),_0x3cb4b6[_0x67939d(0x1fb)]=[],await saveRawEventLog(_0x3cb4b6),await _0x3cb4b6['setStateAsync'](LTM_DP_STATUS,{'val':'Success','ack':!![]});if(_0x3cb4b6[_0x67939d(0x188)])sendToPython(_0x3cb4b6,'ANALYZE_HEALTH',{'digest':_0x604e61});}catch(_0x1b6e52){_0x3cb4b6[_0x67939d(0x15e)][_0x67939d(0x125)](_0x1b6e52['message']);}}async function runBaselineDriftAnalysis(_0x361078){const _0xc9f4e2=a0_0x29b2d0;if(!_0x361078[_0xc9f4e2(0x188)]||!_0x361078[_0xc9f4e2(0x1b1)])return;const _0x3d493c=_0x361078['config'][_0xc9f4e2(0x1e1)]||0xe;if(_0x361078[_0xc9f4e2(0x186)]['length']<_0x3d493c+0x7){await _0x361078[_0xc9f4e2(0x254)](LTM_DP_DRIFT_STATUS,{'val':_0xc9f4e2(0x12f),'ack':!![]});return;}const _0x390129=_0x361078[_0xc9f4e2(0x186)]['slice'](-_0x3d493c),_0x591acb=_0x361078[_0xc9f4e2(0x186)][_0xc9f4e2(0x26f)](0x0,_0x361078['dailyDigests'][_0xc9f4e2(0x1eb)]-_0x3d493c),_0x1a7977=_0xc9f4e2(0x11f)+JSON['stringify'](_0x591acb)+_0xc9f4e2(0x1b3)+JSON[_0xc9f4e2(0xda)](_0x390129);try{const _0x56c209=await _0x361078[_0xc9f4e2(0x1b1)][_0xc9f4e2(0x16d)](_0x1a7977),_0x2283ca=JSON[_0xc9f4e2(0x129)](_0x56c209[_0xc9f4e2(0x1ed)]['text']()['replace'](/```json|```/g,'')[_0xc9f4e2(0x18a)]());_0x2283ca[_0xc9f4e2(0x247)]&&(await _0x361078[_0xc9f4e2(0x254)](LTM_DP_DRIFT_STATUS,{'val':_0x2283ca['baselineDrift'],'ack':!![]}),await _0x361078[_0xc9f4e2(0x254)](LTM_DP_DRIFT_DETAILS,{'val':_0x2283ca[_0xc9f4e2(0x148)],'ack':!![]}),await _0x361078[_0xc9f4e2(0x254)](LTM_DP_DRIFT_LAST_CHECK,{'val':Date['now'](),'ack':!![]}));}catch(_0x4f6903){}}async function sendMorningBriefing(_0x465ab1){const _0x233f69=a0_0x29b2d0;if(!_0x465ab1[_0x233f69(0x1b1)])return;try{const _0x2fbc45=_0x233f69(0x142),_0x3edc7a=await _0x465ab1['geminiModel'][_0x233f69(0x16d)](_0x2fbc45),_0x3ad397=_0x3edc7a[_0x233f69(0x1ed)]['text']();sendNotification(_0x465ab1,_0x233f69(0x265)+_0x3ad397);}catch(_0x1478f6){_0x465ab1['log']['error'](_0x233f69(0x1ca)+_0x1478f6['message']);}}function stopPythonService(_0x36b0dd){const _0x19b215=a0_0x29b2d0;if(_0x36b0dd[_0x19b215(0x146)]){try{_0x36b0dd['pythonProcess']['kill']();}catch(_0x4ccdbd){}_0x36b0dd[_0x19b215(0x146)]=null;}}function sendToPython(_0x1724a8,_0x23d627,_0x399d37={}){const _0x49b0a0=a0_0x29b2d0;if(!_0x1724a8['pythonProcess']||!_0x1724a8[_0x49b0a0(0x146)][_0x49b0a0(0x1be)][_0x49b0a0(0x127)])return;const _0x46483a=JSON[_0x49b0a0(0xda)]({'command':_0x23d627,..._0x399d37});try{_0x1724a8[_0x49b0a0(0x146)][_0x49b0a0(0x1be)]['write'](_0x46483a+'\x0a');}catch(_0x16b347){}}function runPythonHealthCheck(_0x2a1ce0){const _0x4c24db=a0_0x29b2d0;if(!_0x2a1ce0[_0x4c24db(0x186)]||_0x2a1ce0['dailyDigests'][_0x4c24db(0x1eb)]<0x2)return;const _0xaa5a15=_0x2a1ce0[_0x4c24db(0x186)]['map'](_0x4e5923=>{const _0x58d9bb=_0x4c24db,_0x535e10=(_0x4e5923[_0x58d9bb(0x200)]||'')[_0x58d9bb(0x105)]();return ACTIVITY_LEVEL_MAP[_0x535e10]||0x32;});sendToPython(_0x2a1ce0,_0x4c24db(0x26a),{'values':_0xaa5a15,'tag':_0x4c24db(0x1af)});}function handlePythonResult(_0x58ee96,_0x5b8613){const _0x3f43a7=a0_0x29b2d0;if(_0x5b8613['type']===_0x3f43a7(0x1f4))_0x58ee96[_0x3f43a7(0x15e)]['debug'](_0x3f43a7(0x20d));else{if(_0x5b8613[_0x3f43a7(0x238)]==='SECURITY_RESULT'){const {anomaly_score:_0x21959b,is_anomaly:_0x1144e0,threshold:_0x5bad4b,explanation:_0x11fdcf}=_0x5b8613[_0x3f43a7(0x130)];_0x58ee96[_0x3f43a7(0x15e)][_0x3f43a7(0xd8)](_0x3f43a7(0x135)+_0x21959b[_0x3f43a7(0x257)](0x5)+_0x3f43a7(0x194)+(_0x1144e0?_0x3f43a7(0x170):'OK')),_0x58ee96[_0x3f43a7(0x254)](_0x3f43a7(0x165),{'val':_0x21959b,'ack':!![]}),_0x58ee96[_0x3f43a7(0x254)](_0x3f43a7(0x19a),{'val':new Date()['toISOString'](),'ack':!![]});if(_0x5bad4b)_0x58ee96[_0x3f43a7(0x254)](_0x3f43a7(0x240),{'val':_0x5bad4b,'ack':!![]});if(_0x1144e0){let _0x3c38d8=_0x3f43a7(0x1b4)+_0x21959b[_0x3f43a7(0x257)](0x4)+')';if(_0x11fdcf&&_0x11fdcf!=='Unknown')_0x3c38d8+='\x0aGrund:\x20'+_0x11fdcf;_0x58ee96[_0x3f43a7(0x254)]('analysis.isAlert',{'val':!![],'ack':!![]}),_0x58ee96[_0x3f43a7(0x254)](_0x3f43a7(0x233),{'val':_0x3c38d8,'ack':!![]}),sendNotification(_0x58ee96,_0x3f43a7(0x1dc)+_0x3c38d8,![],!![]);}}else{if(_0x5b8613[_0x3f43a7(0x238)]===_0x3f43a7(0x22c)){const _0x399b14=_0x5b8613['payload'][_0x3f43a7(0x217)]||'',_0x30c88d=_0x5b8613[_0x3f43a7(0x130)][_0x3f43a7(0x177)],_0x4c785b=_0x5b8613[_0x3f43a7(0x130)][_0x3f43a7(0x175)]?'Success:\x20'+new Date()[_0x3f43a7(0x1f2)]()+'\x20('+_0x399b14+')':'Failed:\x20'+_0x5b8613[_0x3f43a7(0x130)][_0x3f43a7(0x1dd)];_0x58ee96[_0x3f43a7(0x254)](_0x3f43a7(0x21f),{'val':_0x4c785b,'ack':!![]});if(_0x5b8613[_0x3f43a7(0x130)][_0x3f43a7(0x175)]&&_0x30c88d)_0x58ee96[_0x3f43a7(0x254)](_0x3f43a7(0x240),{'val':_0x30c88d,'ack':!![]});}else{if(_0x5b8613[_0x3f43a7(0x238)]===_0x3f43a7(0x206)){const {patterns:_0x4bccb3}=_0x5b8613[_0x3f43a7(0x130)];if(_0x4bccb3&&_0x4bccb3[_0x3f43a7(0x1eb)]>0x0){_0x58ee96[_0x3f43a7(0x15e)][_0x3f43a7(0xd8)](_0x3f43a7(0x1a6)+_0x4bccb3[_0x3f43a7(0x1eb)]+_0x3f43a7(0x1f9)),_0x58ee96[_0x3f43a7(0x254)](_0x3f43a7(0xd9),{'val':JSON['stringify'](_0x4bccb3),'ack':!![]});const _0x209a4f=_0x4bccb3[0x0],_0x42aa4e='Regel\x20erkannt:\x20'+_0x209a4f[_0x3f43a7(0x19f)]+'\x20('+(_0x209a4f['confidence']*0x64)['toFixed'](0x0)+'%)';_0x58ee96[_0x3f43a7(0x254)]('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),_0x58ee96['setStateAsync'](_0x3f43a7(0x203),{'val':_0x42aa4e,'ack':!![]});}else _0x58ee96['log'][_0x3f43a7(0xd8)](_0x3f43a7(0x266)),_0x58ee96[_0x3f43a7(0x254)](_0x3f43a7(0x151),{'val':![],'ack':!![]}),_0x58ee96['setStateAsync'](_0x3f43a7(0xd9),{'val':'[]','ack':!![]});}else{if(_0x5b8613[_0x3f43a7(0x238)]===_0x3f43a7(0x1c3)){if(_0x5b8613['payload'][_0x3f43a7(0x175)])try{const _0xe75776=JSON[_0x3f43a7(0x129)](_0x5b8613['payload']['details']);if(_0xe75776[_0x3f43a7(0x110)])_0x58ee96[_0x3f43a7(0x254)]('analysis.energy.insulationScore',{'val':JSON[_0x3f43a7(0xda)](_0xe75776[_0x3f43a7(0x110)]),'ack':!![]});if(_0xe75776['heating'])_0x58ee96[_0x3f43a7(0x254)](_0x3f43a7(0x205),{'val':JSON['stringify'](_0xe75776['heating']),'ack':!![]});}catch(_0x34d402){}}else{if(_0x5b8613['type']===_0x3f43a7(0x1fe)){if(_0x5b8613[_0x3f43a7(0x130)]['success'])_0x58ee96['log'][_0x3f43a7(0xd8)](_0x3f43a7(0x13c));}else{if(_0x5b8613[_0x3f43a7(0x238)]===_0x3f43a7(0x222))_0x58ee96[_0x3f43a7(0x254)]('analysis.health.lastCheck',{'val':new Date()[_0x3f43a7(0x23f)](),'ack':!![]}),_0x58ee96[_0x3f43a7(0x254)]('analysis.health.isAnomaly',{'val':_0x5b8613[_0x3f43a7(0x130)][_0x3f43a7(0x25a)],'ack':!![]});else{if(_0x5b8613['type']===_0x3f43a7(0x26b))_0x58ee96[_0x3f43a7(0x254)]('analysis.health.trendDiagnosis',{'val':_0x5b8613[_0x3f43a7(0x130)][_0x3f43a7(0x234)],'ack':!![]}),_0x58ee96['setStateAsync'](_0x3f43a7(0x1cc),{'val':_0x5b8613[_0x3f43a7(0x130)]['change_percent'],'ack':!![]});else{if(_0x5b8613[_0x3f43a7(0x238)]===_0x3f43a7(0x207)){const {speed_trend:_0x4151c5}=_0x5b8613[_0x3f43a7(0x130)];if(_0x4151c5!==undefined)_0x58ee96[_0x3f43a7(0x254)]('analysis.health.gaitSpeed',{'val':_0x4151c5,'ack':!![]});}else{if(_0x5b8613['type']===_0x3f43a7(0xf6)){const {forecast:_0x46ac79}=_0x5b8613[_0x3f43a7(0x130)];if(_0x46ac79)_0x58ee96[_0x3f43a7(0x254)]('analysis.energy.forecast',{'val':JSON[_0x3f43a7(0xda)](_0x46ac79),'ack':!![]});}else{if(_0x5b8613[_0x3f43a7(0x238)]===_0x3f43a7(0x18d)){const {data:_0x3bd1b9}=_0x5b8613[_0x3f43a7(0x130)];_0x3bd1b9&&(_0x58ee96['log'][_0x3f43a7(0xd8)](_0x3f43a7(0x111)),_0x58ee96['setStateAsync'](_0x3f43a7(0x137),{'val':JSON['stringify'](_0x3bd1b9),'ack':!![]}));}}}}}}}}}}}}function startPythonService(_0x4f2416){const _0x1dea70=a0_0x29b2d0;let _0x4fe71c=_0x1dea70(0xf5);if(fs['existsSync'](installer[_0x1dea70(0x14b)]))_0x4fe71c=installer[_0x1dea70(0x14b)];try{const _0x328dd6=path['join'](__dirname,_0x1dea70(0xfa),_0x1dea70(0x1bc));_0x4f2416[_0x1dea70(0x146)]=spawn(_0x4fe71c,[_0x328dd6]),_0x4f2416['pythonProcess']['stdout']['on']('data',_0x5f1f17=>{const _0xf3bb3b=_0x1dea70,_0x2a0cf5=_0x5f1f17[_0xf3bb3b(0x19b)]()[_0xf3bb3b(0x1f6)]('\x0a');_0x2a0cf5[_0xf3bb3b(0x1c1)](_0x4ad230=>{const _0x555b0d=_0xf3bb3b,_0x7332b6=_0x4ad230[_0x555b0d(0x18a)]();if(!_0x7332b6)return;if(_0x7332b6[_0x555b0d(0x20b)](_0x555b0d(0x184)))_0x4f2416[_0x555b0d(0x15e)]['debug'](_0x555b0d(0x159)+_0x7332b6[_0x555b0d(0x201)](0x5)[_0x555b0d(0x18a)]());else{if(_0x7332b6[_0x555b0d(0x20b)](_0x555b0d(0x179)))try{const _0x21bd8c=JSON[_0x555b0d(0x129)](_0x7332b6[_0x555b0d(0x201)](0x8)['trim']());handlePythonResult(_0x4f2416,_0x21bd8c);}catch(_0x574f05){}}});}),_0x4f2416[_0x1dea70(0x146)]['on']('close',_0x5a691c=>{const _0x52a331=_0x1dea70;_0x4f2416[_0x52a331(0x146)]=null;});}catch(_0x5f14cc){_0x4f2416[_0x1dea70(0x15e)][_0x1dea70(0x125)]('Error\x20launching\x20Python:\x20'+_0x5f14cc[_0x1dea70(0x22d)]);}}async function runAutopilot(_0xa078d3){const _0x4d89e9=a0_0x29b2d0;_0xa078d3[_0x4d89e9(0x15e)][_0x4d89e9(0xe5)](_0x4d89e9(0x263)),await runGeminiAnalysis(_0xa078d3),updateHealthVector(_0xa078d3),triggerGaitAnalysis(_0xa078d3),triggerEnergyPrediction(_0xa078d3);}async function triggerGaitAnalysis(_0x403377){const _0x5af543=a0_0x29b2d0;if(!_0x403377[_0x5af543(0x188)])return;try{const _0x2b3167=await _0x403377['getStateAsync'](_0x5af543(0x14a));_0x2b3167&&_0x2b3167[_0x5af543(0xd6)]&&sendToPython(_0x403377,_0x5af543(0x161),{'sequences':JSON['parse'](_0x2b3167[_0x5af543(0xd6)])});}catch(_0x359458){}}async function triggerEnergyPrediction(_0x2ae1c8){const _0x1867a2=a0_0x29b2d0;if(!_0x2ae1c8[_0x1867a2(0x188)])return;try{const _0x27b67d=await getOutsideTemperatureNumeric(_0x2ae1c8);if(_0x27b67d===null)return;const _0x2c8419={},_0xf628e2=_0x2ae1c8[_0x1867a2(0x191)][_0x1867a2(0x1c5)]||[];for(const _0x43a23a of _0xf628e2){if(_0x43a23a[_0x1867a2(0x238)]===_0x1867a2(0x10a)&&_0x43a23a[_0x1867a2(0x10e)]){const _0x293a88=_0x2ae1c8[_0x1867a2(0x1c7)][_0x43a23a['id']];if(_0x293a88!==undefined)_0x2c8419[_0x43a23a['location']]=_0x293a88;}}Object[_0x1867a2(0x1b6)](_0x2c8419)['length']>0x0&&sendToPython(_0x2ae1c8,_0x1867a2(0x1b7),{'current_temps':_0x2c8419,'t_out':_0x27b67d});}catch(_0x1d47aa){}}function updateHealthVector(_0x366e9c){const _0xccd38=a0_0x29b2d0;if(!_0x366e9c['rawEventLog']||_0x366e9c[_0xccd38(0x1fb)][_0xccd38(0x1eb)]===0x0)return;const _0x3d55f8=new Array(0x60)[_0xccd38(0x19d)](0x0),_0x10c7a4=new Date()[_0xccd38(0x17c)](0x0,0x0,0x0,0x0);_0x366e9c[_0xccd38(0x1fb)][_0xccd38(0x1c1)](_0xa7c0eb=>{const _0x226186=_0xccd38,_0x2e48bf=new Date(_0xa7c0eb['timestamp']);if(_0x2e48bf[_0x226186(0x255)]()>=_0x10c7a4){const _0x541284=_0x2e48bf[_0x226186(0x221)](),_0x4383d6=_0x2e48bf[_0x226186(0xe2)](),_0x536b12=_0x541284*0x4+Math[_0x226186(0x133)](_0x4383d6/0xf);if(_0x536b12>=0x0&&_0x536b12<0x60)_0x3d55f8[_0x536b12]++;}}),_0x366e9c[_0xccd38(0x254)](_0xccd38(0x1d2),{'val':JSON[_0xccd38(0xda)](_0x3d55f8),'ack':!![]});}async function getWeatherContext(_0x5951ad){const _0x338611=a0_0x29b2d0;if(!_0x5951ad['config'][_0x338611(0x104)]||!_0x5951ad['config']['weatherInstance'])return _0x338611(0x153);try{const _0x26eda9=_0x5951ad[_0x338611(0x191)][_0x338611(0x1d9)];let _0x4d9689=await _0x5951ad[_0x338611(0x192)](_0x26eda9+'.Current.Temperature');if(!_0x4d9689)_0x4d9689=await _0x5951ad[_0x338611(0x192)](_0x26eda9+_0x338611(0x1ea));let _0x12c009=await _0x5951ad['getForeignStateAsync'](_0x26eda9+_0x338611(0xf7));if(!_0x12c009)_0x12c009=await _0x5951ad[_0x338611(0x192)](_0x26eda9+_0x338611(0xf8));if(_0x4d9689&&_0x12c009)return _0x4d9689['val']+'Â°C,\x20'+_0x12c009[_0x338611(0xd6)];}catch(_0x4551a6){}return _0x338611(0x108);}async function getCalendarContext(_0x430a96){const _0x4234c3=a0_0x29b2d0;if(!_0x430a96[_0x4234c3(0x191)][_0x4234c3(0x1d3)]||!_0x430a96['config'][_0x4234c3(0x1ff)])return _0x4234c3(0x10c);return _0x4234c3(0x1da);}async function getCalendarNames(_0x121cdc,_0x55c02d){return[];}async function saveFeedback(_0x3e8bf7,_0xd41cc8){const _0x434a52=a0_0x29b2d0;_0x3e8bf7['log'][_0x434a52(0xd8)](_0x434a52(0x214)+_0xd41cc8[_0x434a52(0x213)]);}async function runGeminiAnalysis(_0xc06745,_0x390496=''){const _0x3d5c3f=a0_0x29b2d0;if(!_0xc06745['geminiModel'])return;if(_0xc06745[_0x3d5c3f(0x1c4)]['length']===0x0)return;const _0x44082c=_0xc06745[_0x3d5c3f(0x1c4)][_0x3d5c3f(0x26f)](0x0,0xf),_0x31e68f=await getWeatherContext(_0xc06745),_0x38fc05=_0xc06745[_0x3d5c3f(0x235)],_0x1d65c4=PERSONA_MAPPING[_0xc06745['config'][_0x3d5c3f(0x169)]||_0x3d5c3f(0x1a8)],_0xf09758=_0xc06745[_0x3d5c3f(0x191)]['livingContext']||_0x3d5c3f(0x13f);let _0x528521=_0x3d5c3f(0xe8);try{const _0x5c9dcd=await _0xc06745['getStateAsync'](_0x3d5c3f(0xe3));if(_0x5c9dcd&&_0x5c9dcd[_0x3d5c3f(0xd6)])_0x528521=_0x5c9dcd[_0x3d5c3f(0xd6)];}catch(_0x504c0f){}let _0xec2c1b=![];try{const _0x3ec07a=await _0xc06745['getStateAsync'](_0x3d5c3f(0x270));if(_0x3ec07a&&_0x3ec07a[_0x3d5c3f(0xd6)])_0xec2c1b=!![];}catch(_0x5b4471){}const _0x1b9779=_0x3d5c3f(0x12a)+_0x1d65c4+_0x3d5c3f(0x256)+_0xf09758+_0x3d5c3f(0x1e9)+_0x38fc05+_0x3d5c3f(0x140)+_0x31e68f+'.\x20ANWESEND:\x20'+_0x528521+_0x3d5c3f(0x24f)+JSON[_0x3d5c3f(0xda)](_0x44082c)+_0x3d5c3f(0x123)+_0x390496+_0x3d5c3f(0x26e);try{const _0x331738=await _0xc06745[_0x3d5c3f(0x1b1)][_0x3d5c3f(0x16d)](_0x1b9779),_0x5d503a=JSON[_0x3d5c3f(0x129)](_0x331738[_0x3d5c3f(0x1ed)][_0x3d5c3f(0x107)]()[_0x3d5c3f(0xee)](/```json|```/g,'')['trim']());await _0xc06745[_0x3d5c3f(0x254)](_0x3d5c3f(0xcf),{'val':JSON['stringify'](_0x5d503a),'ack':!![]});if(_0x5d503a[_0x3d5c3f(0x145)])await _0xc06745[_0x3d5c3f(0x254)](_0x3d5c3f(0xd0),{'val':_0x5d503a[_0x3d5c3f(0x145)],'ack':!![]});const _0x842371={'timestamp':Date[_0x3d5c3f(0x1e6)](),'id':Date['now']()[_0x3d5c3f(0x19b)](),'analysis':{'activity':{'summary':_0x5d503a[_0x3d5c3f(0x145)],'isAlert':_0x5d503a[_0x3d5c3f(0x16a)],'alertReason':_0x5d503a[_0x3d5c3f(0x101)]},'comfort':{'automationProposal':_0x5d503a[_0x3d5c3f(0x1ad)]}}};await updateAnalysisHistory(_0xc06745,_0x842371);const _0x16093d=_0x5d503a[_0x3d5c3f(0x16a)]||![];_0x16093d!==_0xc06745[_0x3d5c3f(0x1a2)]&&(await _0xc06745[_0x3d5c3f(0x254)](_0x3d5c3f(0x173),{'val':_0x16093d,'ack':!![]}),_0xc06745[_0x3d5c3f(0x1a2)]=_0x16093d,_0x16093d&&(await _0xc06745['setStateAsync']('analysis.alertReason',{'val':_0x5d503a[_0x3d5c3f(0x101)],'ack':!![]}),sendNotification(_0xc06745,_0x3d5c3f(0xec)+_0x5d503a[_0x3d5c3f(0x101)],![],_0x5d503a[_0x3d5c3f(0x22b)])));if(_0x5d503a['automationProposal']&&_0x5d503a[_0x3d5c3f(0x1ad)]['detected']){await _0xc06745[_0x3d5c3f(0x254)]('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),await _0xc06745['setStateAsync'](_0x3d5c3f(0x203),{'val':_0x5d503a[_0x3d5c3f(0x1ad)][_0x3d5c3f(0x124)],'ack':!![]}),await _0xc06745[_0x3d5c3f(0x254)]('analysis.automation.targetId',{'val':_0x5d503a[_0x3d5c3f(0x1ad)][_0x3d5c3f(0x198)],'ack':!![]}),await _0xc06745[_0x3d5c3f(0x254)](_0x3d5c3f(0x14c),{'val':JSON[_0x3d5c3f(0xda)](_0x5d503a[_0x3d5c3f(0x1ad)][_0x3d5c3f(0xf3)]),'ack':!![]});if(_0xec2c1b)executeAutomationAction(_0xc06745);}}catch(_0x546be5){_0xc06745[_0x3d5c3f(0x15e)][_0x3d5c3f(0x125)](_0x3d5c3f(0x22a)+_0x546be5['message']);}}async function startSystem(_0x4a9a87){const _0x54c2fb=a0_0x29b2d0;_0x4a9a87[_0x54c2fb(0x15e)][_0x54c2fb(0xd8)](_0x54c2fb(0x136)),await initZombies(_0x4a9a87);try{_0x4a9a87['isProVersion']=await checkLicense(_0x4a9a87[_0x54c2fb(0x191)][_0x54c2fb(0x196)]);}catch(_0xe9e4ed){}if(!_0x4a9a87[_0x54c2fb(0x191)][_0x54c2fb(0x1d6)]||_0x4a9a87[_0x54c2fb(0x191)][_0x54c2fb(0x1d6)]<0.1)_0x4a9a87[_0x54c2fb(0x191)][_0x54c2fb(0x1d6)]=0xc;await initHistory(_0x4a9a87),await initSystemConfig(_0x4a9a87);if(_0x4a9a87[_0x54c2fb(0x191)][_0x54c2fb(0x1a9)])try{_0x4a9a87[_0x54c2fb(0x19e)]=new GoogleGenerativeAI(_0x4a9a87[_0x54c2fb(0x191)]['geminiApiKey']),_0x4a9a87[_0x54c2fb(0x1b1)]=_0x4a9a87[_0x54c2fb(0x19e)]['getGenerativeModel']({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':'application/json'}}),_0x4a9a87[_0x54c2fb(0x15e)]['info'](_0x54c2fb(0xea));}catch(_0x3fb3f8){_0x4a9a87[_0x54c2fb(0x15e)][_0x54c2fb(0x125)]('Gemini\x20Init\x20Error:\x20'+_0x3fb3f8['message']);}await createAllObjects(_0x4a9a87),await loadSystemMode(_0x4a9a87),await loadRawEventLog(_0x4a9a87),await loadDailyDigests(_0x4a9a87),_0x4a9a87['subscribeStates'](_0x54c2fb(0x215)),_0x4a9a87['subscribeStates'](LTM_DP_TRIGGER_DIGEST),_0x4a9a87['subscribeStates']('system.mode'),_0x4a9a87['subscribeStates'](_0x54c2fb(0x1e8)),_0x4a9a87[_0x54c2fb(0x1cb)]('analysis.automation.triggerAction'),_0x4a9a87[_0x54c2fb(0x1cb)](_0x54c2fb(0x270)),_0x4a9a87['subscribeStates'](_0x54c2fb(0x1c2)),_0x4a9a87[_0x54c2fb(0x1cb)]('analysis.training.triggerHealth'),_0x4a9a87['subscribeStates']('analysis.training.triggerEnergy'),_0x4a9a87[_0x54c2fb(0x1cb)]('analysis.training.triggerComfort'),_0x4a9a87[_0x54c2fb(0x1cb)]('analysis.training.triggerTopology'),await initSensorSubscriptions(_0x4a9a87),await initPresenceSubscriptions(_0x4a9a87),await setupTelegramListener(_0x4a9a87),setTimeout(()=>checkWifiPresence(_0x4a9a87),0x1388);if(_0x4a9a87['analysisTimer'])clearInterval(_0x4a9a87[_0x54c2fb(0x128)]);const _0x4835fd=_0x4a9a87['config'][_0x54c2fb(0x106)]||0xf;_0x4835fd>0x0&&(_0x4a9a87['analysisTimer']=setInterval(()=>{runAutopilot(_0x4a9a87);},_0x4835fd*0x3c*0x3e8)),schedulers[_0x54c2fb(0x113)](_0x4a9a87,()=>createDailyDigest(_0x4a9a87)),schedulers['setupModeResetScheduler'](_0x4a9a87),schedulers[_0x54c2fb(0x21e)](_0x4a9a87,()=>runBaselineDriftAnalysis(_0x4a9a87)),schedulers['setupBriefingScheduler'](_0x4a9a87,()=>sendMorningBriefing(_0x4a9a87)),startPythonService(_0x4a9a87),setTimeout(()=>{const _0x1b621b=_0x54c2fb;_0x4a9a87[_0x1b621b(0x146)]&&(runPythonHealthCheck(_0x4a9a87),triggerGaitAnalysis(_0x4a9a87),triggerEnergyPrediction(_0x4a9a87)),updateHealthVector(_0x4a9a87);},0x1388);}class CogniLiving extends utils['Adapter']{constructor(_0x1078ab){const _0x423604=a0_0x29b2d0;super({..._0x1078ab,'name':'cogni-living'}),this['eventHistory']=[],this[_0x423604(0x11e)]=[],this[_0x423604(0x1fb)]=[],this[_0x423604(0x186)]=[],this[_0x423604(0x1c7)]={},this[_0x423604(0x24d)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x423604(0x138)]=!![],this['exitTimer']=null,this['exitGraceTimer']=null,this[_0x423604(0x16b)]=![],this[_0x423604(0x19e)]=null,this[_0x423604(0x1b1)]=null,this[_0x423604(0x235)]=SYSTEM_MODES['NORMAL'],this['isProVersion']=![],this[_0x423604(0x1a2)]=![],this[_0x423604(0x25f)]=_0x423604(0x1a0),this['analysisTimer']=null,this[_0x423604(0x117)]=null,this[_0x423604(0x16c)]=null,this[_0x423604(0xe4)]=null,this['briefingJob']=null,this[_0x423604(0x146)]=null,this['dependencyInstallInProgress']=![],this['on'](_0x423604(0x150),this[_0x423604(0x102)][_0x423604(0x103)](this)),this['on'](_0x423604(0xf1),this[_0x423604(0x17f)]['bind'](this)),this['on'](_0x423604(0x155),this[_0x423604(0x1d7)]['bind'](this)),this['on'](_0x423604(0x22d),this[_0x423604(0x1ba)][_0x423604(0x103)](this));}async['onReady'](){const _0xd0311f=a0_0x29b2d0;this['log'][_0xd0311f(0xd8)](_0xd0311f(0x249)+this[_0xd0311f(0x262)]+_0xd0311f(0x241));if(!installer[_0xd0311f(0x190)](this,()=>startSystem(this)))return;}['onUnload'](_0x110e0f){const _0x2847db=a0_0x29b2d0;if(this['analysisTimer'])clearInterval(this[_0x2847db(0x128)]);if(this[_0x2847db(0xe4)])clearInterval(this[_0x2847db(0xe4)]);if(this[_0x2847db(0x117)])this[_0x2847db(0x117)]['cancel']();if(this[_0x2847db(0x16c)])this[_0x2847db(0x16c)]['cancel']();if(this[_0x2847db(0x1aa)])this[_0x2847db(0x1aa)][_0x2847db(0x21d)]();if(this['exitTimer'])clearTimeout(this[_0x2847db(0x197)]);if(this[_0x2847db(0xcd)])clearTimeout(this[_0x2847db(0xcd)]);stopPythonService(this),_0x110e0f();}async[a0_0x29b2d0(0x17f)](_0x2692df,_0x359286){const _0x394013=a0_0x29b2d0;if(!_0x359286||this[_0x394013(0x1cf)])return;if(_0x2692df[_0x394013(0x1c0)](_0x394013(0x22e))&&_0x2692df[_0x394013(0x251)](_0x394013(0x11a))&&_0x359286[_0x394013(0xd6)]){await handleTelegramResponse(this,_0x359286[_0x394013(0xd6)]);return;}if(_0x2692df===this[_0x394013(0x20f)]+'.'+SYSTEM_DP_MODE){if(_0x359286[_0x394013(0xd6)]&&Object[_0x394013(0x14e)](SYSTEM_MODES)[_0x394013(0x1c0)](_0x359286[_0x394013(0xd6)])){this[_0x394013(0x235)]=_0x359286[_0x394013(0xd6)];if(_0x359286[_0x394013(0xd6)]===SYSTEM_MODES['VACATION'])await setPresence(this,![]);else await setPresence(this,!![]);}if(!_0x359286['ack'])this[_0x394013(0x1b9)](_0x2692df,{'val':this[_0x394013(0x235)],'ack':!![]});return;}if(!_0x359286['ack']){_0x2692df[_0x394013(0x1c0)](_0x394013(0x215))&&_0x359286[_0x394013(0xd6)]&&(this[_0x394013(0x1b9)](_0x2692df,{'val':![],'ack':!![]}),runGeminiAnalysis(this));if(_0x2692df[_0x394013(0x1c0)](_0x394013(0xd4))&&_0x359286[_0x394013(0xd6)]){this[_0x394013(0x1b9)](_0x2692df,{'val':![],'ack':!![]});if(this[_0x394013(0x188)])createDailyDigest(this);}_0x2692df[_0x394013(0x1c0)]('triggerBriefing')&&_0x359286[_0x394013(0xd6)]&&(this[_0x394013(0x1b9)](_0x2692df,{'val':![],'ack':!![]}),sendMorningBriefing(this));_0x2692df[_0x394013(0x1c0)](_0x394013(0xeb))&&_0x359286[_0x394013(0xd6)]&&(this['setState'](_0x2692df,{'val':![],'ack':!![]}),executeAutomationAction(this));if(_0x2692df[_0x394013(0x1c0)](_0x394013(0x1c2))&&_0x359286[_0x394013(0xd6)]){this[_0x394013(0x1b9)](_0x2692df,{'val':![],'ack':!![]});if(this[_0x394013(0x188)])try{const _0x1bdd24=await this[_0x394013(0x25d)](_0x394013(0x14a));if(_0x1bdd24&&_0x1bdd24['val']){const _0x26ef6b=JSON['parse'](_0x1bdd24[_0x394013(0xd6)]);this[_0x394013(0x15e)]['info'](_0x394013(0x12b)),this['setStateAsync']('analysis.training.status',{'val':_0x394013(0x121),'ack':!![]}),sendToPython(this,_0x394013(0x15f),{'sequences':_0x26ef6b});}}catch(_0x315d02){this[_0x394013(0x15e)][_0x394013(0x125)](_0x394013(0x229)+_0x315d02[_0x394013(0x22d)]);}}if(_0x2692df[_0x394013(0x1c0)](_0x394013(0x122))&&_0x359286[_0x394013(0xd6)]){this['setState'](_0x2692df,{'val':![],'ack':!![]});if(this[_0x394013(0x188)])try{const _0x1858be=await this[_0x394013(0x25d)](LTM_DP_DAILY_DIGESTS);if(_0x1858be&&_0x1858be['val'])sendToPython(this,'TRAIN_HEALTH',{'digests':JSON[_0x394013(0x129)](_0x1858be[_0x394013(0xd6)])});}catch(_0x1c8f6f){}}if(_0x2692df[_0x394013(0x1c0)](_0x394013(0x18e))&&_0x359286[_0x394013(0xd6)]){this['setState'](_0x2692df,{'val':![],'ack':!![]});if(this[_0x394013(0x188)])try{const _0xfad729=await this[_0x394013(0x25d)](_0x394013(0x22f));if(_0xfad729&&_0xfad729[_0x394013(0xd6)])sendToPython(this,_0x394013(0x258),{'points':JSON['parse'](_0xfad729['val'])});}catch(_0xc3c82){}}if(_0x2692df[_0x394013(0x1c0)]('analysis.training.triggerComfort')&&_0x359286[_0x394013(0xd6)]){this[_0x394013(0x1b9)](_0x2692df,{'val':![],'ack':!![]});if(this[_0x394013(0x188)])try{const _0x567c03=await this[_0x394013(0x25d)](LTM_DP_RAW_LOG);_0x567c03&&_0x567c03[_0x394013(0xd6)]&&(this[_0x394013(0x15e)][_0x394013(0xd8)](_0x394013(0x1a3)),sendToPython(this,_0x394013(0x260),{'events':JSON[_0x394013(0x129)](_0x567c03[_0x394013(0xd6)])}));}catch(_0x55ec52){}}if(_0x2692df[_0x394013(0x1c0)](_0x394013(0x195))&&_0x359286[_0x394013(0xd6)]){this[_0x394013(0x1b9)](_0x2692df,{'val':![],'ack':!![]});if(this[_0x394013(0x188)])try{const _0x14e6ba=await this[_0x394013(0x25d)](_0x394013(0x14a));if(_0x14e6ba&&_0x14e6ba[_0x394013(0xd6)]){const _0x21515b=JSON['parse'](_0x14e6ba[_0x394013(0xd6)]);this[_0x394013(0x15e)]['info'](_0x394013(0x176)),sendToPython(this,_0x394013(0x14f),{'sequences':_0x21515b});}}catch(_0x175c61){this[_0x394013(0x15e)][_0x394013(0x125)](_0x394013(0x193)+_0x175c61['message']);}}return;}if(this[_0x394013(0x191)]['presenceDevices']&&this[_0x394013(0x191)]['presenceDevices']['includes'](_0x2692df)){await checkWifiPresence(this);return;}const _0x496d6d=(this['config']['devices']||[])[_0x394013(0x189)](_0x496003=>_0x496003['id']===_0x2692df);if(_0x496d6d)processSensorEvent(this,_0x2692df,_0x359286,_0x496d6d);}async[a0_0x29b2d0(0x1ba)](_0x16529d){const _0x4bf680=a0_0x29b2d0;if(typeof _0x16529d===_0x4bf680(0x26c)&&_0x16529d['message']){if(_0x16529d[_0x4bf680(0xe9)]===_0x4bf680(0x20a)){const _0x3bca37=_0x16529d['message'][_0x4bf680(0x1c8)]||this[_0x4bf680(0x191)][_0x4bf680(0x1a9)];if(!_0x3bca37)return this[_0x4bf680(0x10d)](_0x16529d[_0x4bf680(0x243)],_0x16529d['command'],{'success':![],'message':_0x4bf680(0x25b)},_0x16529d['callback']);try{const _0x267fe3=new GoogleGenerativeAI(_0x3bca37),_0x2bc9ce=_0x267fe3[_0x4bf680(0xdf)]({'model':GEMINI_MODEL}),_0x546e54=await _0x2bc9ce['generateContent']('Hi');this[_0x4bf680(0x10d)](_0x16529d[_0x4bf680(0x243)],_0x16529d['command'],{'success':!![],'message':_0x4bf680(0x11c)+_0x546e54[_0x4bf680(0x1ed)][_0x4bf680(0x107)]()},_0x16529d[_0x4bf680(0xd1)]);}catch(_0x24c85f){this[_0x4bf680(0x10d)](_0x16529d['from'],_0x16529d[_0x4bf680(0xe9)],{'success':![],'message':_0x4bf680(0xf4)+_0x24c85f[_0x4bf680(0x22d)]},_0x16529d[_0x4bf680(0xd1)]);}}else{if(_0x16529d[_0x4bf680(0xe9)]==='testContext'){const _0x8db773=await getWeatherContext(this),_0x6928d4=await getCalendarContext(this);this[_0x4bf680(0x10d)](_0x16529d['from'],_0x16529d[_0x4bf680(0xe9)],{'success':!![],'weather':_0x8db773,'calendar':_0x6928d4},_0x16529d[_0x4bf680(0xd1)]);}else{if(_0x16529d['command']===_0x4bf680(0xde)){if(!this[_0x4bf680(0x188)])return this['sendTo'](_0x16529d['from'],_0x16529d[_0x4bf680(0xe9)],{'success':![],'isPro':![]},_0x16529d[_0x4bf680(0xd1)]);let _0x2a8909={'status':_0x4bf680(0x162)};try{const _0xcf3a77=await this['getStateAsync'](LTM_DP_DRIFT_STATUS);_0x2a8909[_0x4bf680(0x211)]=_0xcf3a77?_0xcf3a77['val']:_0x4bf680(0x162);}catch(_0x1f5cda){}this[_0x4bf680(0x10d)](_0x16529d[_0x4bf680(0x243)],_0x16529d[_0x4bf680(0xe9)],{'success':!![],'isPro':!![],'dailyDigests':this['dailyDigests'],'driftAnalysis':_0x2a8909,'analysisHistory':this[_0x4bf680(0x11e)]},_0x16529d[_0x4bf680(0xd1)]);}else{if(_0x16529d[_0x4bf680(0xe9)]===_0x4bf680(0x20e)){const _0x2566f6=this['dailyDigests'][_0x4bf680(0x1eb)],_0x323204=new Date(),_0x2cab77=new Date(_0x323204['getFullYear'](),_0x323204['getMonth'](),_0x323204[_0x4bf680(0x1a1)]())['getTime'](),_0xe9eb6b=this[_0x4bf680(0x1fb)][_0x4bf680(0x15a)](_0x7f80d8=>new Date(_0x7f80d8['timestamp'])[_0x4bf680(0x255)]()>_0x2cab77)[_0x4bf680(0x1eb)],_0x2e371e=new Array(0x18)[_0x4bf680(0x19d)](0x0);this[_0x4bf680(0x1fb)][_0x4bf680(0x1c1)](_0x4543e8=>{const _0x4bc1cf=_0x4bf680,_0x325c3f=new Date(_0x4543e8[_0x4bc1cf(0x181)]);if(_0x325c3f[_0x4bc1cf(0x255)]()>_0x2cab77)_0x2e371e[_0x325c3f[_0x4bc1cf(0x221)]()]++;});let _0x5999d6={'status':_0x4bf680(0x162)};try{const _0x4d3d28=await this[_0x4bf680(0x25d)](LTM_DP_DRIFT_STATUS);_0x5999d6[_0x4bf680(0x211)]=_0x4d3d28?_0x4d3d28[_0x4bf680(0xd6)]:'N/A';}catch(_0x451a7e){}let _0x1fd4cb='';try{const _0x7dd6e0=await this['getStateAsync'](_0x4bf680(0xe3));_0x1fd4cb=_0x7dd6e0?_0x7dd6e0[_0x4bf680(0xd6)]:'';}catch(_0x32cfde){}let _0x233f42=null;!this[_0x4bf680(0x1b1)]&&(_0x233f42=this[_0x4bf680(0x191)][_0x4bf680(0x1a9)]?_0x4bf680(0x20c):_0x4bf680(0x17d));let _0x476a52={'detected':![],'description':'','targetId':'','targetValue':'','autoApply':![]};try{const _0x48b0ef=await this['getStateAsync'](_0x4bf680(0x151));if(_0x48b0ef&&_0x48b0ef[_0x4bf680(0xd6)]){_0x476a52[_0x4bf680(0x242)]=!![];const _0x21a462=await this[_0x4bf680(0x25d)](_0x4bf680(0x203));_0x476a52[_0x4bf680(0x124)]=_0x21a462?_0x21a462[_0x4bf680(0xd6)]:'';const _0x4cd8dc=await this[_0x4bf680(0x25d)](_0x4bf680(0x208));_0x476a52[_0x4bf680(0x198)]=_0x4cd8dc?_0x4cd8dc[_0x4bf680(0xd6)]:'';const _0xe8c7bc=await this[_0x4bf680(0x25d)](_0x4bf680(0x14c));_0x476a52['targetValue']=_0xe8c7bc?_0xe8c7bc[_0x4bf680(0xd6)]:'';}const _0x548d22=await this[_0x4bf680(0x25d)]('analysis.automation.autoApply');_0x476a52['autoApply']=_0x548d22?!!_0x548d22[_0x4bf680(0xd6)]:![];}catch(_0x466304){}this[_0x4bf680(0x10d)](_0x16529d[_0x4bf680(0x243)],_0x16529d[_0x4bf680(0xe9)],{'success':!![],'eventHistory':this[_0x4bf680(0x1c4)][_0x4bf680(0x26f)](0x0,0xf),'stats':{'digestCount':_0x2566f6,'eventCountToday':_0xe9eb6b,'hourlyActivity':_0x2e371e,'driftStatus':_0x5999d6['status'],'isPresent':this[_0x4bf680(0x138)],'presenceWho':_0x1fd4cb,'minDays':this[_0x4bf680(0x191)][_0x4bf680(0x1e7)]||0x7,'stbDays':this[_0x4bf680(0x191)][_0x4bf680(0x1e1)]||0xe,'ltbDays':this['config'][_0x4bf680(0x1d4)]||0x3c,'systemError':_0x233f42},'automation':_0x476a52},_0x16529d[_0x4bf680(0xd1)]);}else{if(_0x16529d['command']===_0x4bf680(0x14d))try{const _0x5d92a0=await scanner[_0x4bf680(0x1e3)](this,_0x16529d[_0x4bf680(0x22d)]||{});this[_0x4bf680(0x10d)](_0x16529d[_0x4bf680(0x243)],_0x16529d['command'],{'success':!![],'devices':_0x5d92a0},_0x16529d['callback']);}catch(_0x4b6774){this['sendTo'](_0x16529d[_0x4bf680(0x243)],_0x16529d[_0x4bf680(0xe9)],{'success':![],'error':_0x4b6774[_0x4bf680(0x22d)]},_0x16529d[_0x4bf680(0xd1)]);}else{if(_0x16529d[_0x4bf680(0xe9)]===_0x4bf680(0x163)){const _0x532386=await this[_0x4bf680(0x26d)](_0x4bf680(0x1ef),_0x4bf680(0x1b2)),_0x57a839=[];if(_0x532386)for(const _0x104964 in _0x532386){const _0x212112=_0x532386[_0x104964],_0x3d9c98=(_0x212112[_0x4bf680(0x1a5)]&&typeof _0x212112[_0x4bf680(0x1a5)][_0x4bf680(0x25c)]==='object'?_0x212112[_0x4bf680(0x1a5)][_0x4bf680(0x25c)]['de']:_0x212112['common']['name'])||_0x212112[_0x4bf680(0x1a5)][_0x4bf680(0x25c)];_0x57a839[_0x4bf680(0x13e)]({'id':_0x104964,'name':_0x3d9c98});}const _0x2f18b9=await this['getForeignObjectsAsync'](_0x4bf680(0x1ee),_0x4bf680(0x1b2)),_0x2549f0=[];if(_0x2f18b9)for(const _0x440dc5 in _0x2f18b9){const _0xc62d12=_0x2f18b9[_0x440dc5],_0x5ce399=(_0xc62d12['common']&&typeof _0xc62d12[_0x4bf680(0x1a5)][_0x4bf680(0x25c)]===_0x4bf680(0x26c)?_0xc62d12[_0x4bf680(0x1a5)][_0x4bf680(0x25c)]['de']:_0xc62d12[_0x4bf680(0x1a5)][_0x4bf680(0x25c)])||_0x440dc5['split']('.')[_0x4bf680(0x1bd)]();_0x2549f0[_0x4bf680(0x13e)](_0x5ce399);}this['sendTo'](_0x16529d[_0x4bf680(0x243)],_0x16529d[_0x4bf680(0xe9)],{'success':!![],'enums':_0x57a839,'rooms':_0x2549f0},_0x16529d['callback']);}else{if(_0x16529d['command']===_0x4bf680(0xd3)){const _0x16b29f=_0x16529d[_0x4bf680(0x22d)][_0x4bf680(0xe1)];if(!_0x16b29f)return this[_0x4bf680(0x10d)](_0x16529d[_0x4bf680(0x243)],_0x16529d[_0x4bf680(0xe9)],{'success':![],'error':'No\x20instance'},_0x16529d[_0x4bf680(0xd1)]);const _0x48dda9=await getCalendarNames(this,_0x16b29f);this[_0x4bf680(0x10d)](_0x16529d[_0x4bf680(0x243)],_0x16529d[_0x4bf680(0xe9)],{'success':!![],'names':_0x48dda9},_0x16529d[_0x4bf680(0xd1)]);}else{if(_0x16529d[_0x4bf680(0xe9)]===_0x4bf680(0x21b)){const {targetId:_0x3ef4ad,targetValue:_0x594fe0}=_0x16529d[_0x4bf680(0x22d)];this[_0x4bf680(0x15e)][_0x4bf680(0xd8)](_0x4bf680(0x167)+_0x3ef4ad+_0x4bf680(0x24c)+_0x594fe0),await this[_0x4bf680(0x254)](_0x4bf680(0x151),{'val':!![],'ack':!![]}),await this[_0x4bf680(0x254)](_0x4bf680(0x203),{'val':_0x4bf680(0x21a)+_0x3ef4ad,'ack':!![]}),await this[_0x4bf680(0x254)](_0x4bf680(0x208),{'val':_0x3ef4ad,'ack':!![]}),await this[_0x4bf680(0x254)](_0x4bf680(0x14c),{'val':_0x594fe0,'ack':!![]}),this['sendTo'](_0x16529d[_0x4bf680(0x243)],_0x16529d[_0x4bf680(0xe9)],{'success':!![]},_0x16529d[_0x4bf680(0xd1)]);}else{if(_0x16529d[_0x4bf680(0xe9)]==='submitFeedback'){const {historyId:_0x58c8d5,rating:_0x103d6b,comment:_0x419bec,alertReason:_0x27a1d7}=_0x16529d[_0x4bf680(0x22d)];_0x58c8d5&&_0x103d6b?(await saveFeedback(this,{'timestamp':Date[_0x4bf680(0x1e6)](),'historyId':_0x58c8d5,'rating':_0x103d6b,'comment':_0x419bec,'alertReason':_0x27a1d7}),this[_0x4bf680(0x10d)](_0x16529d[_0x4bf680(0x243)],_0x16529d['command'],{'success':!![]},_0x16529d[_0x4bf680(0xd1)])):this[_0x4bf680(0x10d)](_0x16529d[_0x4bf680(0x243)],_0x16529d['command'],{'success':![],'error':_0x4bf680(0x10b)},_0x16529d[_0x4bf680(0xd1)]);}else _0x16529d[_0x4bf680(0xe9)]==='dismissAutomation'&&(this[_0x4bf680(0x15e)][_0x4bf680(0xd8)](_0x4bf680(0xdc)),await this[_0x4bf680(0x254)](_0x4bf680(0x151),{'val':![],'ack':!![]}),await this['setStateAsync'](_0x4bf680(0x203),{'val':'','ack':!![]}),this[_0x4bf680(0x10d)](_0x16529d['from'],_0x16529d['command'],{'success':!![]},_0x16529d[_0x4bf680(0xd1)]));}}}}}}}}}}}if(require['main']!==module)module[a0_0x29b2d0(0x160)]=_0xdbd245=>new CogniLiving(_0xdbd245);else new CogniLiving();