const a0_0x3acfee=a0_0x2a7f;(function(_0x1fa114,_0x17501b){const _0x5abfce=a0_0x2a7f,_0x46b76f=_0x1fa114();while(!![]){try{const _0x5948d6=-parseInt(_0x5abfce(0x15e))/0x1+parseInt(_0x5abfce(0xae))/0x2+parseInt(_0x5abfce(0xcc))/0x3*(-parseInt(_0x5abfce(0x134))/0x4)+-parseInt(_0x5abfce(0xe8))/0x5*(-parseInt(_0x5abfce(0x102))/0x6)+parseInt(_0x5abfce(0x174))/0x7+parseInt(_0x5abfce(0x19a))/0x8+parseInt(_0x5abfce(0x1d0))/0x9*(parseInt(_0x5abfce(0x1b7))/0xa);if(_0x5948d6===_0x17501b)break;else _0x46b76f['push'](_0x46b76f['shift']());}catch(_0x160b21){_0x46b76f['push'](_0x46b76f['shift']());}}}(a0_0x432e,0xbd8f0));const a0_0x43ffb3=(function(){let _0x37ffed=!![];return function(_0x52ed06,_0xdb143f){const _0x301acb=_0x37ffed?function(){const _0x543229=a0_0x2a7f;if(_0xdb143f){const _0x3b75b1=_0xdb143f[_0x543229(0x1c4)](_0x52ed06,arguments);return _0xdb143f=null,_0x3b75b1;}}:function(){};return _0x37ffed=![],_0x301acb;};}()),a0_0x3344eb=a0_0x43ffb3(this,function(){const _0x147ae4=a0_0x2a7f;return a0_0x3344eb[_0x147ae4(0x232)]()['search'](_0x147ae4(0x1a2))['toString']()[_0x147ae4(0x243)](a0_0x3344eb)[_0x147ae4(0x20f)]('(((.+)+)+)+$');});a0_0x3344eb();'use strict';const utils=require(a0_0x3acfee(0x103)),{GoogleGenerativeAI}=require(a0_0x3acfee(0x17b)),{spawn}=require(a0_0x3acfee(0x1e7)),path=require(a0_0x3acfee(0x207)),fs=require('fs'),installer=require(a0_0x3acfee(0xb0)),scanner=require(a0_0x3acfee(0x1a9)),schedulers=require(a0_0x3acfee(0x100)),HISTORY_MAX_SIZE=0x32,RAW_LOG_MAX_SIZE=0x9c4,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL='models/gemini-flash-latest',SEQUENCE_TIMEOUT_MS=0x5*0x3c*0x3e8,MAX_TRAINING_SET_SIZE=0x1f4,THERMO_LOG_SIZE=0x3e8,EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,LTM_DP_RAW_LOG='LTM.rawEventLog',LTM_DP_DAILY_DIGESTS=a0_0x3acfee(0x104),LTM_DP_STATUS=a0_0x3acfee(0x146),LTM_DP_TRIGGER_DIGEST=a0_0x3acfee(0x167),LTM_DP_BASELINE_STATUS=a0_0x3acfee(0x22d),LTM_DP_DRIFT_CHANNEL=a0_0x3acfee(0x197),LTM_DP_DRIFT_STATUS=a0_0x3acfee(0x1f2),LTM_DP_DRIFT_DETAILS=a0_0x3acfee(0xfc),LTM_DP_DRIFT_LAST_CHECK=a0_0x3acfee(0xaf),SYSTEM_DP_MODE=a0_0x3acfee(0x18d),SYSTEM_MODES={'NORMAL':a0_0x3acfee(0x21f),'VACATION':a0_0x3acfee(0x224),'PARTY':'party','GUEST':a0_0x3acfee(0x15f)},AUTO_RESET_MODES=[SYSTEM_MODES[a0_0x3acfee(0x11b)],SYSTEM_MODES[a0_0x3acfee(0x113)]],PERSONA_MAPPING={'generic':a0_0x3acfee(0x131),'senior_aal':a0_0x3acfee(0x16b),'family':'Fokus\x20auf\x20Familienroutinen.','single_comfort':a0_0x3acfee(0x184),'security':'PRIORIT√ÑT:\x20Sicherheit.'},ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};let activeSequence=[],sequenceTimer=null;async function initZombies(_0x471a6d){const _0x5be1ab=a0_0x3acfee;try{const _0x126654=['analysis.history_debug_00','events.history_debug_00'];for(const _0x918e12 of _0x126654){try{const _0x37c62e=await _0x471a6d[_0x5be1ab(0xc3)](_0x918e12);if(_0x37c62e)await _0x471a6d[_0x5be1ab(0x1f1)](_0x918e12);}catch(_0x3db824){}}}catch(_0x320366){}}async function checkLicense(_0x5309f5){return!![];}async function initHistory(_0x3ba91d){const _0x2971c8=a0_0x3acfee;try{const _0x9be598=await _0x3ba91d[_0x2971c8(0x195)](_0x2971c8(0x117));_0x9be598&&_0x9be598[_0x2971c8(0x1b5)]&&(_0x3ba91d[_0x2971c8(0x240)]=JSON['parse'](_0x9be598[_0x2971c8(0x1b5)]['toString']()));}catch(_0x565480){_0x3ba91d['eventHistory']=[];}try{const _0x1debd7=await _0x3ba91d[_0x2971c8(0x195)](_0x2971c8(0x226));if(_0x1debd7&&_0x1debd7[_0x2971c8(0x1b5)])_0x3ba91d[_0x2971c8(0x1b8)]=JSON[_0x2971c8(0x141)](_0x1debd7[_0x2971c8(0x1b5)][_0x2971c8(0x232)]());}catch(_0x328d82){_0x3ba91d[_0x2971c8(0x1b8)]=[];}if(_0x3ba91d[_0x2971c8(0x240)]&&_0x3ba91d[_0x2971c8(0x240)]['length']>0x0){_0x3ba91d[_0x2971c8(0x1c0)]['info']('Restoring\x20sensor\x20cache...');for(let _0x1f31e8=_0x3ba91d[_0x2971c8(0x240)][_0x2971c8(0x1d3)]-0x1;_0x1f31e8>=0x0;_0x1f31e8--){const _0x8f531d=_0x3ba91d[_0x2971c8(0x240)][_0x1f31e8];if(_0x8f531d&&_0x8f531d['id']!==undefined&&_0x8f531d[_0x2971c8(0x12a)]!==undefined)_0x3ba91d[_0x2971c8(0x1d8)][_0x8f531d['id']]=_0x8f531d[_0x2971c8(0x12a)];}}}async function initSystemConfig(_0x5d5f1f){const _0x38b033=a0_0x3acfee;try{const _0x44daa5=await _0x5d5f1f[_0x38b033(0x19f)](_0x38b033(0x1ac));if(_0x44daa5&&_0x44daa5[_0x38b033(0xef)])_0x5d5f1f[_0x38b033(0x1df)]={'latitude':_0x44daa5[_0x38b033(0xef)][_0x38b033(0xee)]||0x0,'longitude':_0x44daa5[_0x38b033(0xef)][_0x38b033(0x199)]||0x0,'city':_0x44daa5[_0x38b033(0xef)][_0x38b033(0x119)]||''};}catch(_0x287fac){}}async function createAllObjects(_0x526c30){const _0x4abbbe=a0_0x3acfee;await _0x526c30[_0x4abbbe(0x136)](_0x4abbbe(0x1bc),{'type':_0x4abbbe(0xe2),'common':{'name':'System'},'native':{}}),await _0x526c30[_0x4abbbe(0x136)](SYSTEM_DP_MODE,{'type':_0x4abbbe(0xc1),'common':{'name':'System\x20Mode','type':_0x4abbbe(0x210),'role':'state','read':!![],'write':!![],'def':SYSTEM_MODES['NORMAL']},'native':{}}),await _0x526c30[_0x4abbbe(0x178)](_0x4abbbe(0x152),{'type':_0x4abbbe(0xc1),'common':{'name':_0x4abbbe(0x1de),'type':_0x4abbbe(0x210),'role':'text','read':!![],'write':![]},'native':{}}),await _0x526c30[_0x4abbbe(0x178)](_0x4abbbe(0x111),{'type':'state','common':{'name':_0x4abbbe(0x15b),'type':_0x4abbbe(0x210),'role':'json','read':!![],'write':![]},'native':{}}),await _0x526c30[_0x4abbbe(0x178)](_0x4abbbe(0x117),{'type':_0x4abbbe(0xc1),'common':{'name':_0x4abbbe(0x179),'type':_0x4abbbe(0x210),'role':_0x4abbbe(0xdd),'read':!![],'write':![]},'native':{}}),await _0x526c30[_0x4abbbe(0x136)](_0x4abbbe(0xbf),{'type':_0x4abbbe(0xe2),'common':{'name':_0x4abbbe(0x19e)},'native':{}}),await _0x526c30[_0x4abbbe(0x178)](_0x4abbbe(0x202),{'type':_0x4abbbe(0xc1),'common':{'name':_0x4abbbe(0x11d),'type':'boolean','role':_0x4abbbe(0x149),'read':!![],'write':!![]},'native':{}}),await _0x526c30[_0x4abbbe(0x178)](_0x4abbbe(0x157),{'type':_0x4abbbe(0xc1),'common':{'name':_0x4abbbe(0x1d6),'type':_0x4abbbe(0xfe),'role':_0x4abbbe(0x149),'read':!![],'write':!![]},'native':{}}),await _0x526c30['setObjectNotExistsAsync'](_0x4abbbe(0x1b0),{'type':_0x4abbbe(0xc1),'common':{'name':_0x4abbbe(0x1f8),'type':'boolean','role':_0x4abbbe(0x149),'read':!![],'write':!![]},'native':{}}),await _0x526c30[_0x4abbbe(0x178)](_0x4abbbe(0x1c6),{'type':_0x4abbbe(0xc1),'common':{'name':_0x4abbbe(0x1ea),'type':_0x4abbbe(0xfe),'role':'button','read':!![],'write':!![]},'native':{}}),await _0x526c30[_0x4abbbe(0x178)](_0x4abbbe(0x1f3),{'type':'state','common':{'name':_0x4abbbe(0x234),'type':_0x4abbbe(0xfe),'role':_0x4abbbe(0x149),'read':!![],'write':!![]},'native':{}}),await _0x526c30[_0x4abbbe(0x178)](_0x4abbbe(0x11a),{'type':_0x4abbbe(0xc1),'common':{'name':_0x4abbbe(0x188),'type':_0x4abbbe(0x210),'role':_0x4abbbe(0x13b),'read':!![],'write':![]},'native':{}}),await _0x526c30['extendObjectAsync']('analysis.security',{'type':_0x4abbbe(0xe2),'common':{'name':_0x4abbbe(0x120)},'native':{}}),await _0x526c30[_0x4abbbe(0x178)](_0x4abbbe(0xec),{'type':'state','common':{'name':'Anomaly\x20Score','type':'number','role':_0x4abbbe(0x12a),'read':!![],'write':![]},'native':{}}),await _0x526c30[_0x4abbbe(0x178)]('analysis.security.currentThreshold',{'type':'state','common':{'name':_0x4abbbe(0x12d),'type':'number','role':'value','read':!![],'write':![],'def':0.05},'native':{}}),await _0x526c30[_0x4abbbe(0x178)](_0x4abbbe(0x181),{'type':_0x4abbbe(0xc1),'common':{'name':_0x4abbbe(0x160),'type':_0x4abbbe(0x210),'role':_0x4abbbe(0xdc),'read':!![],'write':![]},'native':{}}),await _0x526c30['setObjectNotExistsAsync']('analysis.security.topologyMatrix',{'type':'state','common':{'name':'Topology\x20Matrix','type':_0x4abbbe(0x210),'role':_0x4abbbe(0xdd),'read':!![],'write':![]},'native':{}}),await _0x526c30['extendObjectAsync'](_0x4abbbe(0x123),{'type':_0x4abbbe(0xe2),'common':{'name':_0x4abbbe(0x1b2)},'native':{}}),await _0x526c30['setObjectNotExistsAsync'](_0x4abbbe(0xc2),{'type':_0x4abbbe(0xc1),'common':{'name':_0x4abbbe(0x160),'type':'string','role':'date','read':!![],'write':![]},'native':{}}),await _0x526c30['setObjectNotExistsAsync'](_0x4abbbe(0x231),{'type':_0x4abbbe(0xc1),'common':{'name':_0x4abbbe(0x182),'type':_0x4abbbe(0xfe),'role':_0x4abbbe(0x239),'read':!![],'write':![]},'native':{}}),await _0x526c30[_0x4abbbe(0x178)]('analysis.health.trendDiagnosis',{'type':_0x4abbbe(0xc1),'common':{'name':'Trend','type':_0x4abbbe(0x210),'role':'text','read':!![],'write':![]},'native':{}}),await _0x526c30[_0x4abbbe(0x178)](_0x4abbbe(0x11e),{'type':_0x4abbbe(0xc1),'common':{'name':'Trend\x20Value','type':_0x4abbbe(0x1db),'role':_0x4abbbe(0x12a),'read':!![],'write':![]},'native':{}}),await _0x526c30[_0x4abbbe(0x178)](_0x4abbbe(0x235),{'type':'state','common':{'name':_0x4abbbe(0x14c),'type':_0x4abbbe(0x210),'role':_0x4abbbe(0xdd),'read':!![],'write':![]},'native':{}}),await _0x526c30[_0x4abbbe(0x178)](_0x4abbbe(0xd2),{'type':_0x4abbbe(0xc1),'common':{'name':_0x4abbbe(0x1fe),'type':'number','role':_0x4abbbe(0x12a),'read':!![],'write':![]},'native':{}}),await _0x526c30[_0x4abbbe(0x136)](_0x4abbbe(0x1ff),{'type':_0x4abbbe(0xe2),'common':{'name':'Energy\x20Intelligence'},'native':{}}),await _0x526c30[_0x4abbbe(0x178)](_0x4abbbe(0x1e5),{'type':_0x4abbbe(0xc1),'common':{'name':_0x4abbbe(0x23d),'type':_0x4abbbe(0x210),'role':_0x4abbbe(0x13b),'read':!![],'write':![]},'native':{}}),await _0x526c30[_0x4abbbe(0x178)](_0x4abbbe(0x1ca),{'type':_0x4abbbe(0xc1),'common':{'name':_0x4abbbe(0x176),'type':_0x4abbbe(0x210),'role':_0x4abbbe(0x13b),'read':!![],'write':![]},'native':{}}),await _0x526c30[_0x4abbbe(0x178)](_0x4abbbe(0xc7),{'type':_0x4abbbe(0xc1),'common':{'name':'Temperature\x20Forecast','type':_0x4abbbe(0x210),'role':_0x4abbbe(0xdd),'read':!![],'write':![]},'native':{}}),await _0x526c30['extendObjectAsync'](_0x4abbbe(0x18c),{'type':_0x4abbbe(0xe2),'common':{'name':'LTM'},'native':{}}),await _0x526c30[_0x4abbbe(0x136)](LTM_DP_RAW_LOG,{'type':_0x4abbbe(0xc1),'common':{'name':'Raw\x20Log','type':_0x4abbbe(0x210),'role':'json','read':!![],'write':![]},'native':{}}),await _0x526c30[_0x4abbbe(0x136)](LTM_DP_DAILY_DIGESTS,{'type':_0x4abbbe(0xc1),'common':{'name':_0x4abbbe(0x1b1),'type':_0x4abbbe(0x210),'role':_0x4abbbe(0xdd),'read':!![],'write':![]},'native':{}}),await _0x526c30['setObjectNotExistsAsync'](_0x4abbbe(0x1c2),{'type':_0x4abbbe(0xc1),'common':{'name':_0x4abbbe(0x168),'type':_0x4abbbe(0x210),'role':_0x4abbbe(0xdd),'read':!![],'write':![]},'native':{}}),await _0x526c30[_0x4abbbe(0x178)](_0x4abbbe(0x22a),{'type':_0x4abbbe(0xc1),'common':{'name':_0x4abbbe(0x213),'type':_0x4abbbe(0x210),'role':_0x4abbbe(0xdd),'read':!![],'write':![]},'native':{}}),await _0x526c30[_0x4abbbe(0x178)](_0x4abbbe(0xfb),{'type':_0x4abbbe(0xc1),'common':{'name':'Trigger\x20Analysis','type':_0x4abbbe(0xfe),'role':_0x4abbbe(0x149),'read':!![],'write':!![]},'native':{}}),await _0x526c30['setObjectNotExistsAsync'](_0x4abbbe(0x143),{'type':'state','common':{'name':_0x4abbbe(0x1e1),'type':'boolean','role':_0x4abbbe(0x149),'read':!![],'write':!![]},'native':{}}),await _0x526c30[_0x4abbbe(0x178)](_0x4abbbe(0xd8),{'type':'state','common':{'name':_0x4abbbe(0x192),'type':_0x4abbbe(0xfe),'role':'indicator.alarm','read':!![],'write':![]},'native':{}}),await _0x526c30[_0x4abbbe(0x178)](_0x4abbbe(0x225),{'type':_0x4abbbe(0xc1),'common':{'name':_0x4abbbe(0xe4),'type':'string','role':_0x4abbbe(0x1bd),'read':!![],'write':![]},'native':{}}),await _0x526c30[_0x4abbbe(0x178)](_0x4abbbe(0xea),{'type':'state','common':{'name':'Activity\x20Summary','type':_0x4abbbe(0x210),'role':_0x4abbbe(0x13b),'read':!![],'write':![]},'native':{}}),await _0x526c30[_0x4abbbe(0x178)](_0x4abbbe(0x1e8),{'type':_0x4abbbe(0xc1),'common':{'name':_0x4abbbe(0x1cb),'type':'boolean','role':_0x4abbbe(0x239),'read':!![],'write':![]},'native':{}}),await _0x526c30[_0x4abbbe(0x178)](_0x4abbbe(0xb7),{'type':_0x4abbbe(0xc1),'common':{'name':_0x4abbbe(0xb1),'type':_0x4abbbe(0x210),'role':_0x4abbbe(0x13b),'read':!![],'write':![]},'native':{}}),await _0x526c30[_0x4abbbe(0x178)](_0x4abbbe(0x1f9),{'type':_0x4abbbe(0xc1),'common':{'name':_0x4abbbe(0x101),'type':'string','role':_0x4abbbe(0xdd),'read':!![],'write':![]},'native':{}}),await _0x526c30[_0x4abbbe(0x178)]('analysis.automation.targetId',{'type':_0x4abbbe(0xc1),'common':{'name':'Target\x20ID','type':_0x4abbbe(0x210),'role':_0x4abbbe(0x13b),'read':!![],'write':![]},'native':{}}),await _0x526c30[_0x4abbbe(0x178)]('analysis.automation.targetValue',{'type':_0x4abbbe(0xc1),'common':{'name':_0x4abbbe(0x205),'type':_0x4abbbe(0x210),'role':_0x4abbbe(0x13b),'read':!![],'write':![]},'native':{}}),await _0x526c30[_0x4abbbe(0x178)](_0x4abbbe(0xe3),{'type':_0x4abbbe(0xc1),'common':{'name':_0x4abbbe(0xbc),'type':'boolean','role':'switch','read':!![],'write':!![]},'native':{}}),await _0x526c30['setObjectNotExistsAsync'](_0x4abbbe(0x1cd),{'type':_0x4abbbe(0xc1),'common':{'name':_0x4abbbe(0x1bb),'type':_0x4abbbe(0xfe),'role':'button','read':!![],'write':!![]},'native':{}});}async function loadSystemMode(_0x766864){const _0x53fc49=a0_0x3acfee;try{const _0x3964cd=await _0x766864[_0x53fc49(0x195)](SYSTEM_DP_MODE);_0x3964cd&&_0x3964cd[_0x53fc49(0x1b5)]&&Object[_0x53fc49(0x164)](SYSTEM_MODES)[_0x53fc49(0x216)](_0x3964cd[_0x53fc49(0x1b5)])?_0x766864['currentSystemMode']=_0x3964cd['val']:(_0x766864[_0x53fc49(0xca)]=SYSTEM_MODES[_0x53fc49(0x1aa)],await _0x766864[_0x53fc49(0x17a)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES['NORMAL'],'ack':!![]}));}catch(_0x3aea07){_0x766864[_0x53fc49(0xca)]=SYSTEM_MODES['NORMAL'];}}async function loadRawEventLog(_0x4e7d4c){const _0x4ca7a7=a0_0x3acfee;try{const _0x3e4f97=await _0x4e7d4c[_0x4ca7a7(0x195)](LTM_DP_RAW_LOG);if(_0x3e4f97&&_0x3e4f97[_0x4ca7a7(0x1b5)])_0x4e7d4c[_0x4ca7a7(0x222)]=JSON[_0x4ca7a7(0x141)](_0x3e4f97[_0x4ca7a7(0x1b5)]);}catch(_0x2046d4){_0x4e7d4c['rawEventLog']=[];}}function a0_0x2a7f(_0x55e509,_0x492d2e){const _0x2970fe=a0_0x432e();return a0_0x2a7f=function(_0x3344eb,_0x43ffb3){_0x3344eb=_0x3344eb-0xae;let _0x432e18=_0x2970fe[_0x3344eb];return _0x432e18;},a0_0x2a7f(_0x55e509,_0x492d2e);}async function saveRawEventLog(_0x33764c){const _0x1290c7=a0_0x3acfee;if(_0x33764c[_0x1290c7(0x222)]['length']>RAW_LOG_MAX_SIZE)_0x33764c[_0x1290c7(0x222)]['splice'](0x0,_0x33764c[_0x1290c7(0x222)][_0x1290c7(0x1d3)]-RAW_LOG_MAX_SIZE);await _0x33764c[_0x1290c7(0x17a)](LTM_DP_RAW_LOG,{'val':JSON[_0x1290c7(0x214)](_0x33764c[_0x1290c7(0x222)]),'ack':!![]});}async function loadDailyDigests(_0x3ea564){const _0x586b4b=a0_0x3acfee;try{const _0x15f6e2=await _0x3ea564[_0x586b4b(0x195)](LTM_DP_DAILY_DIGESTS);if(_0x15f6e2&&_0x15f6e2[_0x586b4b(0x1b5)])_0x3ea564['dailyDigests']=JSON['parse'](_0x15f6e2[_0x586b4b(0x1b5)]);}catch(_0x2a9106){_0x3ea564['dailyDigests']=[];}await updateBaselineStatus(_0x3ea564);}async function saveDailyDigests(_0xf0cc72,_0x3bc0f5=!![]){const _0x59897e=a0_0x3acfee,_0x5a02e8=_0xf0cc72[_0x59897e(0x1d2)]['ltmLtbWindowDays']||0x3c;_0xf0cc72[_0x59897e(0x1a1)]['length']>_0x5a02e8&&_0xf0cc72[_0x59897e(0x1a1)][_0x59897e(0x16c)](0x0,_0xf0cc72['dailyDigests'][_0x59897e(0x1d3)]-_0x5a02e8);await _0xf0cc72[_0x59897e(0x17a)](LTM_DP_DAILY_DIGESTS,{'val':JSON['stringify'](_0xf0cc72[_0x59897e(0x1a1)]),'ack':!![]});if(_0x3bc0f5)await updateBaselineStatus(_0xf0cc72);}async function updateAnalysisHistory(_0x1f0cc7,_0x5effc4){const _0x2a7ccd=a0_0x3acfee;_0x1f0cc7[_0x2a7ccd(0x1b8)][_0x2a7ccd(0xce)](_0x5effc4);if(_0x1f0cc7[_0x2a7ccd(0x1b8)][_0x2a7ccd(0x1d3)]>HISTORY_MAX_SIZE)_0x1f0cc7[_0x2a7ccd(0x1b8)]['pop']();await _0x1f0cc7[_0x2a7ccd(0x17a)](_0x2a7ccd(0x226),{'val':JSON[_0x2a7ccd(0x214)](_0x1f0cc7[_0x2a7ccd(0x1b8)]),'ack':!![]});}async function updateBaselineStatus(_0x469f36){const _0x2317e5=a0_0x3acfee;if(!_0x469f36[_0x2317e5(0x11c)]){await _0x469f36[_0x2317e5(0x17a)](LTM_DP_BASELINE_STATUS,{'val':_0x2317e5(0x185),'ack':!![]});return;}const _0x4b0d86=_0x469f36[_0x2317e5(0x1a1)][_0x2317e5(0x1d3)]>=(_0x469f36['config'][_0x2317e5(0xb6)]||0x7)?_0x2317e5(0x1ee)+_0x469f36['dailyDigests'][_0x2317e5(0x1d3)]+_0x2317e5(0x206):'Lernphase\x20('+_0x469f36[_0x2317e5(0x1a1)]['length']+'/'+(_0x469f36[_0x2317e5(0x1d2)]['minDaysForBaseline']||0x7)+')';await _0x469f36['setStateAsync'](LTM_DP_BASELINE_STATUS,{'val':_0x4b0d86,'ack':!![]});}async function initSensorSubscriptions(_0x51f1c2){const _0x222006=a0_0x3acfee,_0x3cc81d=_0x51f1c2[_0x222006(0x1d2)][_0x222006(0x1a0)];if(_0x3cc81d)for(const _0x2b7085 of _0x3cc81d){await _0x51f1c2[_0x222006(0x116)](_0x2b7085['id']);}}async function initPresenceSubscriptions(_0x1059a8){const _0x16cc62=a0_0x3acfee,_0x4a8a65=_0x1059a8[_0x16cc62(0x1d2)][_0x16cc62(0x201)];if(_0x4a8a65)for(const _0x475b0f of _0x4a8a65){await _0x1059a8[_0x16cc62(0x116)](_0x475b0f);}}async function setupTelegramListener(_0x332741){const _0x2bd4a4=a0_0x3acfee,_0x176dfb=_0x332741[_0x2bd4a4(0x1d2)]['notifyTelegramInstance'];if(_0x332741[_0x2bd4a4(0x1d2)][_0x2bd4a4(0x177)]&&_0x176dfb)await _0x332741['subscribeForeignStatesAsync'](_0x176dfb+_0x2bd4a4(0x16e));}async function checkWifiPresence(_0x34f82c){const _0x33693e=a0_0x3acfee;try{const _0x244349=_0x34f82c[_0x33693e(0x1d2)][_0x33693e(0x201)]||[];let _0x27aeba=![];const _0x430a3b=[];for(const _0x218d90 of _0x244349){try{const _0x336d35=await _0x34f82c[_0x33693e(0xe1)](_0x218d90);_0x336d35&&(_0x336d35['val']===!![]||_0x336d35[_0x33693e(0x1b5)]===_0x33693e(0x1bf)||_0x336d35['val']===0x1)&&(_0x27aeba=!![],_0x430a3b['push'](_0x218d90));}catch(_0x150388){}}return await _0x34f82c['setStateAsync'](_0x33693e(0x152),{'val':_0x430a3b[_0x33693e(0xb2)](',\x20'),'ack':!![]}),_0x27aeba&&(_0x34f82c[_0x33693e(0xd7)]&&(_0x34f82c[_0x33693e(0x1c0)][_0x33693e(0x1f0)](_0x33693e(0x1cf)),abortExitTimer(_0x34f82c)),!_0x34f82c[_0x33693e(0x203)]&&_0x34f82c['currentSystemMode']===SYSTEM_MODES[_0x33693e(0x1aa)]&&await setPresence(_0x34f82c,!![])),_0x27aeba;}catch(_0x446cdf){return![];}}function startExitTimer(_0x50f5b5){const _0x194e38=a0_0x3acfee;abortExitTimer(_0x50f5b5),_0x50f5b5['isGracePeriodActive']=!![],_0x50f5b5[_0x194e38(0x11f)]=setTimeout(()=>{_0x50f5b5['isGracePeriodActive']=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),_0x50f5b5[_0x194e38(0xd7)]=setTimeout(()=>{setPresence(_0x50f5b5,![]),_0x50f5b5['exitTimer']=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}function abortExitTimer(_0x4f9680){const _0x2ef817=a0_0x3acfee;if(_0x4f9680['exitTimer'])clearTimeout(_0x4f9680[_0x2ef817(0xd7)]);if(_0x4f9680[_0x2ef817(0x11f)])clearTimeout(_0x4f9680[_0x2ef817(0x11f)]);_0x4f9680['exitTimer']=null,_0x4f9680[_0x2ef817(0x11f)]=null,_0x4f9680[_0x2ef817(0x1f4)]=![];}async function setPresence(_0x5457dc,_0x38175b){const _0x1ac865=a0_0x3acfee;if(_0x5457dc[_0x1ac865(0x203)]===_0x38175b)return;_0x5457dc[_0x1ac865(0x203)]=_0x38175b,await _0x5457dc[_0x1ac865(0x17a)](_0x1ac865(0x1c5),{'val':_0x38175b,'ack':!![]});}async function executeAutomationAction(_0xfb1877){const _0x5bc319=a0_0x3acfee;try{const _0x5bdbf6=await _0xfb1877[_0x5bc319(0x195)](_0x5bc319(0xf7)),_0x3df97d=await _0xfb1877[_0x5bc319(0x195)](_0x5bc319(0x1be));if(_0x5bdbf6&&_0x5bdbf6[_0x5bc319(0x1b5)]&&_0x3df97d){const _0x40afe2=_0x5bdbf6[_0x5bc319(0x1b5)];let _0x149c5f=_0x3df97d[_0x5bc319(0x1b5)];try{_0x149c5f=JSON[_0x5bc319(0x141)](_0x149c5f);}catch(_0x5e3b2b){}_0xfb1877['log']['info'](_0x5bc319(0x19d)+_0x40afe2+_0x5bc319(0x1ab)+_0x149c5f),await _0xfb1877[_0x5bc319(0x1a8)](_0x40afe2,_0x149c5f);}else _0xfb1877['log'][_0x5bc319(0xd9)](_0x5bc319(0x191));}catch(_0x43bf7a){_0xfb1877['log'][_0x5bc319(0x217)](_0x5bc319(0xf3)+_0x43bf7a[_0x5bc319(0x1c1)]);}}async function processSensorEvent(_0x176c38,_0x1eab48,_0x15c620,_0x5155c0){const _0x1d29f4=a0_0x3acfee;if(!_0x5155c0)return;const _0x22a174=_0x15c620[_0x1d29f4(0x1b5)],_0x3f3846=Date[_0x1d29f4(0x147)](),_0xc02e1c=_0x176c38[_0x1d29f4(0x1d8)][_0x1eab48];_0x176c38['sensorLastValues'][_0x1eab48]=_0x22a174;if(!_0x5155c0[_0x1d29f4(0xff)]&&_0xc02e1c!=undefined&&_0xc02e1c==_0x22a174)return;const _0x319bd1=(_0x5155c0[_0x1d29f4(0x1f5)]||'')[_0x1d29f4(0x1fd)](),_0x5d7533=_0x319bd1['includes'](_0x1d29f4(0x13c))||_0x319bd1[_0x1d29f4(0x216)]('temperatur')||_0x319bd1[_0x1d29f4(0x216)](_0x1d29f4(0x140))||_0x319bd1[_0x1d29f4(0x216)](_0x1d29f4(0xd1));_0x176c38['isProVersion']&&_0x5d7533&&recordThermodynamics(_0x176c38,_0x1eab48,_0x22a174,_0x5155c0['location']);const _0x53d081={'timestamp':_0x3f3846,'id':_0x1eab48,'name':_0x5155c0[_0x1d29f4(0x153)],'type':_0x5155c0[_0x1d29f4(0x1f5)],'location':_0x5155c0['location'],'value':_0x22a174};_0x176c38[_0x1d29f4(0x240)][_0x1d29f4(0xce)](_0x53d081);if(_0x176c38[_0x1d29f4(0x240)][_0x1d29f4(0x1d3)]>HISTORY_MAX_SIZE)_0x176c38[_0x1d29f4(0x240)]['pop']();await _0x176c38[_0x1d29f4(0x17a)](_0x1d29f4(0x111),{'val':JSON[_0x1d29f4(0x214)](_0x53d081),'ack':!![]}),await _0x176c38['setStateAsync'](_0x1d29f4(0x117),{'val':JSON[_0x1d29f4(0x214)](_0x176c38[_0x1d29f4(0x240)]),'ack':!![]});_0x176c38[_0x1d29f4(0x11c)]&&(_0x176c38[_0x1d29f4(0x222)]['push'](_0x53d081),await saveRawEventLog(_0x176c38),recordSequence(_0x176c38,_0x53d081));if(_0x5155c0[_0x1d29f4(0x154)]&&_0x22a174===!![]){if(_0x176c38[_0x1d29f4(0x203)]&&!_0x176c38['isGracePeriodActive'])startExitTimer(_0x176c38);else{if(!_0x176c38[_0x1d29f4(0x203)])setPresence(_0x176c38,!![]);}}else{if(_0x5155c0['type']===_0x1d29f4(0x21d)&&_0x22a174===!![]){if(_0x176c38[_0x1d29f4(0xd7)])abortExitTimer(_0x176c38);if(!_0x176c38[_0x1d29f4(0x203)]&&_0x176c38['currentSystemMode']===SYSTEM_MODES[_0x1d29f4(0x1aa)])setPresence(_0x176c38,!![]);}}}async function recordThermodynamics(_0x3f61e4,_0x3fccb0,_0x10cdc8,_0x4765a3){const _0x1df862=a0_0x3acfee,_0x396599=await getOutsideTemperatureNumeric(_0x3f61e4),_0x19b711=await _0x3f61e4[_0x1df862(0x195)](_0x1df862(0x22a));let _0x36a410=[];if(_0x19b711&&_0x19b711[_0x1df862(0x1b5)])try{_0x36a410=JSON[_0x1df862(0x141)](_0x19b711[_0x1df862(0x1b5)]);}catch(_0x5efbff){}_0x36a410['push']({'ts':Date['now'](),'room':_0x4765a3||'Unknown','t_in':_0x10cdc8,'t_out':_0x396599});if(_0x36a410['length']>THERMO_LOG_SIZE)_0x36a410['shift']();await _0x3f61e4[_0x1df862(0x17a)](_0x1df862(0x22a),{'val':JSON[_0x1df862(0x214)](_0x36a410),'ack':!![]});}async function getOutsideTemperatureNumeric(_0x32b917){const _0x1612d5=a0_0x3acfee;if(_0x32b917['config'][_0x1612d5(0x129)])try{const _0x415dcb=await _0x32b917[_0x1612d5(0xe1)](_0x32b917['config'][_0x1612d5(0x129)]);if(_0x415dcb&&_0x415dcb[_0x1612d5(0x1b5)]!==undefined&&_0x415dcb[_0x1612d5(0x1b5)]!==null)return parseFloat(_0x415dcb['val']);}catch(_0x1a46c3){}const _0x57fd24=_0x32b917[_0x1612d5(0x1d2)][_0x1612d5(0x21a)];if(!_0x32b917['config']['useWeather']||!_0x57fd24)return null;try{let _0x385c1b='';if(_0x57fd24[_0x1612d5(0x216)]('accuweather'))_0x385c1b=_0x57fd24+_0x1612d5(0x13e);else{if(_0x57fd24[_0x1612d5(0x216)](_0x1612d5(0xed)))_0x385c1b=_0x57fd24+'.NextHours.Location_1.Day_1.current.temp_value';else{if(_0x57fd24[_0x1612d5(0x216)](_0x1612d5(0x166)))_0x385c1b=_0x57fd24+'.forecast.current.temperature';else{if(_0x57fd24['includes'](_0x1612d5(0x1e6)))_0x385c1b=_0x57fd24+_0x1612d5(0x208);}}}if(_0x385c1b){const _0x363389=await _0x32b917['getForeignStateAsync'](_0x385c1b);if(_0x363389&&_0x363389[_0x1612d5(0x1b5)]!==undefined&&_0x363389['val']!==null)return parseFloat(_0x363389['val']);}}catch(_0xac281){}return null;}async function recordSequence(_0x260409,_0x5025df){const _0x2d1fe4=a0_0x3acfee,_0x1ee791=(_0x5025df[_0x2d1fe4(0x1f5)]||'')[_0x2d1fe4(0x1fd)](),_0x14b010=['motion','bewegung',_0x2d1fe4(0xfa),_0x2d1fe4(0x212),_0x2d1fe4(0xbb),'door','t√ºr',_0x2d1fe4(0xc9),_0x2d1fe4(0x1d7),_0x2d1fe4(0x1a6),_0x2d1fe4(0x1d9),'light',_0x2d1fe4(0xe0),_0x2d1fe4(0x161),_0x2d1fe4(0xf6),_0x2d1fe4(0x220),_0x2d1fe4(0x115)];if(!_0x14b010[_0x2d1fe4(0x20e)](_0x4d1265=>_0x1ee791[_0x2d1fe4(0x216)](_0x4d1265)))return;if(!_0x5025df[_0x2d1fe4(0x12a)])return;if(sequenceTimer)clearTimeout(sequenceTimer);activeSequence[_0x2d1fe4(0x23a)]({'loc':_0x5025df['location']||_0x2d1fe4(0x223),'id':_0x5025df['id'],'ts':Date[_0x2d1fe4(0x147)]()}),sequenceTimer=setTimeout(async()=>{const _0x24377f=_0x2d1fe4;if(activeSequence[_0x24377f(0x1d3)]>0x1)await saveCompletedSequence(_0x260409);activeSequence=[];},SEQUENCE_TIMEOUT_MS);}async function saveCompletedSequence(_0x42b4de){const _0x460db6=a0_0x3acfee;try{const _0x90952c=await _0x42b4de[_0x460db6(0x195)]('LTM.trainingData.sequences');let _0x1711c5=[];if(_0x90952c&&_0x90952c[_0x460db6(0x1b5)])try{_0x1711c5=JSON[_0x460db6(0x141)](_0x90952c[_0x460db6(0x1b5)]);}catch(_0x3f8677){}const _0x24fa1c=activeSequence[0x0]['ts'],_0xe36123=activeSequence['map'](_0x540ab0=>({'loc':_0x540ab0[_0x460db6(0x1c9)],'t_delta':Math['round']((_0x540ab0['ts']-_0x24fa1c)/0x3e8)})),_0x5f2d7d={'timestamp':new Date(_0x24fa1c)[_0x460db6(0x121)](),'steps':_0xe36123,'duration':Math[_0x460db6(0x107)]((activeSequence[activeSequence[_0x460db6(0x1d3)]-0x1]['ts']-_0x24fa1c)/0x3e8),'daytime':new Date(_0x24fa1c)[_0x460db6(0xcd)]()};_0x1711c5[_0x460db6(0x23a)](_0x5f2d7d);if(_0x1711c5['length']>MAX_TRAINING_SET_SIZE)_0x1711c5['shift']();await _0x42b4de[_0x460db6(0x17a)](_0x460db6(0x1c2),{'val':JSON[_0x460db6(0x214)](_0x1711c5),'ack':!![]}),runSecurityCheck(_0x42b4de,_0x5f2d7d);}catch(_0x338319){_0x42b4de['log']['error'](_0x460db6(0x1b6)+_0x338319[_0x460db6(0x1c1)]);}}function runSecurityCheck(_0x9f3894,_0x4447f3){const _0x3b191f=a0_0x3acfee;if(!_0x9f3894[_0x3b191f(0x11c)])return;sendToPython(_0x9f3894,_0x3b191f(0x1fb),{'sequence':_0x4447f3});}async function createDailyDigest(_0x1754f0){const _0x5b14c8=a0_0x3acfee;if(!_0x1754f0[_0x5b14c8(0x11c)])return;await _0x1754f0[_0x5b14c8(0x17a)](LTM_DP_STATUS,{'val':_0x5b14c8(0xe5),'ack':!![]});if(!_0x1754f0[_0x5b14c8(0x139)]||_0x1754f0['rawEventLog']['length']<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x1754f0['setStateAsync'](LTM_DP_STATUS,{'val':_0x5b14c8(0x16d),'ack':!![]});return;}const _0x3d85e5=JSON['parse'](JSON[_0x5b14c8(0x214)](_0x1754f0[_0x5b14c8(0x222)])),_0x142bdd=_0x3d85e5[_0x5b14c8(0x1d3)],_0x2190a5='ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a'+JSON[_0x5b14c8(0x214)](_0x3d85e5);try{const _0x2c78af=await _0x1754f0[_0x5b14c8(0x139)][_0x5b14c8(0x1d1)](_0x2190a5),_0x1ba00d=JSON[_0x5b14c8(0x141)](_0x2c78af[_0x5b14c8(0x148)][_0x5b14c8(0x13b)]()[_0x5b14c8(0x12c)](/```json|```/g,'')[_0x5b14c8(0xeb)]()),_0x344b38={'timestamp':new Date()[_0x5b14c8(0x121)](),'eventCount':_0x142bdd,'summary':_0x1ba00d['summary']||'Digest','activityLevel':_0x1ba00d[_0x5b14c8(0xe6)]||_0x5b14c8(0x21f),'systemMode':_0x1754f0[_0x5b14c8(0xca)]};_0x1754f0[_0x5b14c8(0x1a1)]['push'](_0x344b38),await saveDailyDigests(_0x1754f0),_0x1754f0[_0x5b14c8(0x222)]=[],await saveRawEventLog(_0x1754f0),await _0x1754f0['setStateAsync'](LTM_DP_STATUS,{'val':_0x5b14c8(0x18f),'ack':!![]});if(_0x1754f0[_0x5b14c8(0x11c)])sendToPython(_0x1754f0,_0x5b14c8(0xe7),{'digest':_0x344b38});}catch(_0x3414b9){_0x1754f0[_0x5b14c8(0x1c0)][_0x5b14c8(0x217)](_0x3414b9[_0x5b14c8(0x1c1)]);}}async function runBaselineDriftAnalysis(_0x1f3612){const _0x4558e9=a0_0x3acfee;if(!_0x1f3612[_0x4558e9(0x11c)]||!_0x1f3612[_0x4558e9(0x139)])return;const _0x2f53d1=_0x1f3612[_0x4558e9(0x1d2)][_0x4558e9(0x13f)]||0xe;if(_0x1f3612[_0x4558e9(0x1a1)][_0x4558e9(0x1d3)]<_0x2f53d1+0x7){await _0x1f3612[_0x4558e9(0x17a)](LTM_DP_DRIFT_STATUS,{'val':_0x4558e9(0x1fc),'ack':!![]});return;}const _0xa01abd=_0x1f3612[_0x4558e9(0x1a1)][_0x4558e9(0x165)](-_0x2f53d1),_0x3b6bd8=_0x1f3612[_0x4558e9(0x1a1)][_0x4558e9(0x165)](0x0,_0x1f3612['dailyDigests'][_0x4558e9(0x1d3)]-_0x2f53d1),_0x223737=_0x4558e9(0x1e9)+JSON[_0x4558e9(0x214)](_0x3b6bd8)+'\x0aSTB:\x20'+JSON[_0x4558e9(0x214)](_0xa01abd);try{const _0x2dc421=await _0x1f3612['geminiModel'][_0x4558e9(0x1d1)](_0x223737),_0x8bd09=JSON['parse'](_0x2dc421[_0x4558e9(0x148)][_0x4558e9(0x13b)]()['replace'](/```json|```/g,'')[_0x4558e9(0xeb)]());_0x8bd09['baselineDrift']&&(await _0x1f3612[_0x4558e9(0x17a)](LTM_DP_DRIFT_STATUS,{'val':_0x8bd09['baselineDrift'],'ack':!![]}),await _0x1f3612[_0x4558e9(0x17a)](LTM_DP_DRIFT_DETAILS,{'val':_0x8bd09['driftDetails'],'ack':!![]}),await _0x1f3612[_0x4558e9(0x17a)](LTM_DP_DRIFT_LAST_CHECK,{'val':Date[_0x4558e9(0x147)](),'ack':!![]}));}catch(_0x485e1f){}}async function sendMorningBriefing(_0x580c8b){const _0x13cbbf=a0_0x3acfee;if(!_0x580c8b[_0x13cbbf(0x139)])return;try{const _0x5cce12=_0x13cbbf(0x1ec),_0x2df90d=await _0x580c8b[_0x13cbbf(0x139)]['generateContent'](_0x5cce12),_0x6fd224=_0x2df90d[_0x13cbbf(0x148)][_0x13cbbf(0x13b)]();sendNotification(_0x580c8b,'üåÖ\x20Morning\x20Briefing:\x0a'+_0x6fd224);}catch(_0x236050){_0x580c8b[_0x13cbbf(0x1c0)]['error'](_0x13cbbf(0x14d)+_0x236050[_0x13cbbf(0x1c1)]);}}function stopPythonService(_0xe28946){const _0x6b3ae5=a0_0x3acfee;if(_0xe28946[_0x6b3ae5(0x1ed)]){try{_0xe28946['pythonProcess'][_0x6b3ae5(0x1a4)]();}catch(_0x2311e1){}_0xe28946[_0x6b3ae5(0x1ed)]=null;}}function sendToPython(_0x1af4f4,_0x5406b3,_0x456606={}){const _0x4b37c7=a0_0x3acfee;if(!_0x1af4f4[_0x4b37c7(0x1ed)]||!_0x1af4f4[_0x4b37c7(0x1ed)][_0x4b37c7(0x22e)][_0x4b37c7(0xf8)])return;const _0x46410c=JSON[_0x4b37c7(0x214)]({'command':_0x5406b3,..._0x456606});try{_0x1af4f4[_0x4b37c7(0x1ed)][_0x4b37c7(0x22e)]['write'](_0x46410c+'\x0a');}catch(_0x363d95){}}function runPythonHealthCheck(_0x45dbcd){const _0x43647f=a0_0x3acfee;if(!_0x45dbcd['dailyDigests']||_0x45dbcd[_0x43647f(0x1a1)][_0x43647f(0x1d3)]<0x2)return;const _0x41b38e=_0x45dbcd['dailyDigests'][_0x43647f(0xf2)](_0x3c324d=>{const _0x4e3270=_0x43647f,_0x11a48e=(_0x3c324d[_0x4e3270(0xe6)]||'')['toLowerCase']();return ACTIVITY_LEVEL_MAP[_0x11a48e]||0x32;});sendToPython(_0x45dbcd,_0x43647f(0xb3),{'values':_0x41b38e,'tag':'Activity-Level'});}function handlePythonResult(_0x4c2979,_0x2073f5){const _0x7b6b80=a0_0x3acfee;if(_0x2073f5[_0x7b6b80(0x1f5)]===_0x7b6b80(0x1ba))_0x4c2979[_0x7b6b80(0x1c0)][_0x7b6b80(0x209)](_0x7b6b80(0x186));else{if(_0x2073f5[_0x7b6b80(0x1f5)]===_0x7b6b80(0x14b)){const {anomaly_score:_0x51cafe,is_anomaly:_0x1b4fd3,threshold:_0x2dff21,explanation:_0x188b05}=_0x2073f5['payload'];_0x4c2979[_0x7b6b80(0x1c0)][_0x7b6b80(0x1f0)](_0x7b6b80(0x108)+_0x51cafe[_0x7b6b80(0x237)](0x5)+_0x7b6b80(0x17e)+(_0x1b4fd3?'ANOMALY':'OK')),_0x4c2979[_0x7b6b80(0x17a)](_0x7b6b80(0xec),{'val':_0x51cafe,'ack':!![]}),_0x4c2979[_0x7b6b80(0x17a)]('analysis.security.lastCheck',{'val':new Date()[_0x7b6b80(0x121)](),'ack':!![]});if(_0x2dff21)_0x4c2979['setStateAsync'](_0x7b6b80(0xf1),{'val':_0x2dff21,'ack':!![]});if(_0x1b4fd3){let _0x3b4006='Ungew√∂hnliches\x20Bewegungsmuster!\x20(Score:\x20'+_0x51cafe['toFixed'](0x4)+')';if(_0x188b05&&_0x188b05!==_0x7b6b80(0x223))_0x3b4006+='\x0aGrund:\x20'+_0x188b05;_0x4c2979[_0x7b6b80(0x17a)](_0x7b6b80(0xd8),{'val':!![],'ack':!![]}),_0x4c2979[_0x7b6b80(0x17a)](_0x7b6b80(0x225),{'val':_0x3b4006,'ack':!![]}),sendNotification(_0x4c2979,_0x7b6b80(0xbe)+_0x3b4006,![],!![]);}}else{if(_0x2073f5[_0x7b6b80(0x1f5)]===_0x7b6b80(0x159)){const _0x3a240f=_0x2073f5[_0x7b6b80(0x109)][_0x7b6b80(0xe9)]||'',_0x473375=_0x2073f5[_0x7b6b80(0x109)]['threshold'],_0x1b69fd=_0x2073f5['payload']['success']?'Success:\x20'+new Date()[_0x7b6b80(0x15a)]()+'\x20('+_0x3a240f+')':_0x7b6b80(0x1ce)+_0x2073f5[_0x7b6b80(0x109)][_0x7b6b80(0x162)];_0x4c2979['setStateAsync'](_0x7b6b80(0x11a),{'val':_0x1b69fd,'ack':!![]});if(_0x2073f5[_0x7b6b80(0x109)][_0x7b6b80(0x1f7)]&&_0x473375)_0x4c2979[_0x7b6b80(0x17a)](_0x7b6b80(0xf1),{'val':_0x473375,'ack':!![]});}else{if(_0x2073f5[_0x7b6b80(0x1f5)]===_0x7b6b80(0x118)){const {patterns:_0x50ce52}=_0x2073f5[_0x7b6b80(0x109)];if(_0x50ce52&&_0x50ce52[_0x7b6b80(0x1d3)]>0x0){_0x4c2979[_0x7b6b80(0x1c0)][_0x7b6b80(0x1f0)](_0x7b6b80(0x15d)+_0x50ce52[_0x7b6b80(0x1d3)]+_0x7b6b80(0xc6)),_0x4c2979['setStateAsync'](_0x7b6b80(0x1f9),{'val':JSON[_0x7b6b80(0x214)](_0x50ce52),'ack':!![]});const _0x528a14=_0x50ce52[0x0],_0x5c4f45='Regel\x20erkannt:\x20'+_0x528a14[_0x7b6b80(0x13d)]+'\x20('+(_0x528a14['confidence']*0x64)[_0x7b6b80(0x237)](0x0)+'%)';_0x4c2979[_0x7b6b80(0x17a)](_0x7b6b80(0x1e8),{'val':!![],'ack':!![]}),_0x4c2979[_0x7b6b80(0x17a)](_0x7b6b80(0xb7),{'val':_0x5c4f45,'ack':!![]});}else _0x4c2979[_0x7b6b80(0x1c0)][_0x7b6b80(0x1f0)]('üõãÔ∏è\x20BUTLER:\x20Keine\x20neuen\x20Muster\x20gefunden.'),_0x4c2979['setStateAsync']('analysis.automation.patternDetected',{'val':![],'ack':!![]}),_0x4c2979[_0x7b6b80(0x17a)](_0x7b6b80(0x1f9),{'val':'[]','ack':!![]});}else{if(_0x2073f5[_0x7b6b80(0x1f5)]===_0x7b6b80(0xc5)){if(_0x2073f5['payload']['success'])try{const _0xeb6bfc=JSON[_0x7b6b80(0x141)](_0x2073f5[_0x7b6b80(0x109)][_0x7b6b80(0xe9)]);if(_0xeb6bfc[_0x7b6b80(0x1da)])_0x4c2979[_0x7b6b80(0x17a)](_0x7b6b80(0x1e5),{'val':JSON[_0x7b6b80(0x214)](_0xeb6bfc[_0x7b6b80(0x1da)]),'ack':!![]});if(_0xeb6bfc[_0x7b6b80(0x196)])_0x4c2979[_0x7b6b80(0x17a)](_0x7b6b80(0x1ca),{'val':JSON[_0x7b6b80(0x214)](_0xeb6bfc['heating']),'ack':!![]});}catch(_0x90f2d4){}}else{if(_0x2073f5[_0x7b6b80(0x1f5)]===_0x7b6b80(0x12f)){if(_0x2073f5[_0x7b6b80(0x109)][_0x7b6b80(0x1f7)])_0x4c2979['log']['info']('‚úÖ\x20HEALTH\x20TRAINED.');}else{if(_0x2073f5[_0x7b6b80(0x1f5)]==='HEALTH_RESULT')_0x4c2979[_0x7b6b80(0x17a)]('analysis.health.lastCheck',{'val':new Date()[_0x7b6b80(0x121)](),'ack':!![]}),_0x4c2979['setStateAsync'](_0x7b6b80(0x231),{'val':_0x2073f5['payload'][_0x7b6b80(0x19c)],'ack':!![]});else{if(_0x2073f5[_0x7b6b80(0x1f5)]===_0x7b6b80(0x163))_0x4c2979[_0x7b6b80(0x17a)](_0x7b6b80(0x158),{'val':_0x2073f5[_0x7b6b80(0x109)]['diagnosis'],'ack':!![]}),_0x4c2979['setStateAsync'](_0x7b6b80(0x11e),{'val':_0x2073f5[_0x7b6b80(0x109)][_0x7b6b80(0xd0)],'ack':!![]});else{if(_0x2073f5[_0x7b6b80(0x1f5)]==='GAIT_RESULT'){const {speed_trend:_0x4f2538}=_0x2073f5[_0x7b6b80(0x109)];if(_0x4f2538!==undefined)_0x4c2979[_0x7b6b80(0x17a)](_0x7b6b80(0xd2),{'val':_0x4f2538,'ack':!![]});}else{if(_0x2073f5['type']===_0x7b6b80(0x21e)){const {forecast:_0x4185c1}=_0x2073f5['payload'];if(_0x4185c1)_0x4c2979['setStateAsync'](_0x7b6b80(0xc7),{'val':JSON[_0x7b6b80(0x214)](_0x4185c1),'ack':!![]});}else{if(_0x2073f5['type']==='TOPOLOGY_RESULT'){const {data:_0x308bb7}=_0x2073f5[_0x7b6b80(0x109)];_0x308bb7&&(_0x4c2979[_0x7b6b80(0x1c0)][_0x7b6b80(0x1f0)]('üï∏Ô∏è\x20Topology\x20Map\x20updated.'),_0x4c2979[_0x7b6b80(0x17a)](_0x7b6b80(0x1b3),{'val':JSON[_0x7b6b80(0x214)](_0x308bb7),'ack':!![]}));}}}}}}}}}}}}function startPythonService(_0x36afbe){const _0x4adde9=a0_0x3acfee;let _0x5acb6e=_0x4adde9(0x127);if(fs[_0x4adde9(0x1f6)](installer[_0x4adde9(0x10f)]))_0x5acb6e=installer[_0x4adde9(0x10f)];try{const _0xc608e0=path[_0x4adde9(0xb2)](__dirname,_0x4adde9(0x23c),'service.py');_0x36afbe[_0x4adde9(0x1ed)]=spawn(_0x5acb6e,[_0xc608e0]),_0x36afbe[_0x4adde9(0x1ed)][_0x4adde9(0x193)]['on'](_0x4adde9(0xc8),_0x595f16=>{const _0x45302b=_0x4adde9,_0x318b27=_0x595f16[_0x45302b(0x232)]()['split']('\x0a');_0x318b27[_0x45302b(0x230)](_0x2084c3=>{const _0x4546b7=_0x45302b,_0x3e8c74=_0x2084c3[_0x4546b7(0xeb)]();if(!_0x3e8c74)return;if(_0x3e8c74[_0x4546b7(0xd6)](_0x4546b7(0x1eb)))_0x36afbe[_0x4546b7(0x1c0)][_0x4546b7(0x209)](_0x4546b7(0x175)+_0x3e8c74[_0x4546b7(0x169)](0x5)[_0x4546b7(0xeb)]());else{if(_0x3e8c74[_0x4546b7(0xd6)](_0x4546b7(0xde)))try{const _0x5a4a39=JSON['parse'](_0x3e8c74['substring'](0x8)[_0x4546b7(0xeb)]());handlePythonResult(_0x36afbe,_0x5a4a39);}catch(_0x2cb68c){}}});}),_0x36afbe[_0x4adde9(0x1ed)]['on']('close',_0x42f1ea=>{const _0x484ed1=_0x4adde9;_0x36afbe[_0x484ed1(0x1ed)]=null;});}catch(_0xf46cef){_0x36afbe[_0x4adde9(0x1c0)][_0x4adde9(0x217)](_0x4adde9(0x15c)+_0xf46cef[_0x4adde9(0x1c1)]);}}async function runAutopilot(_0x39aba4){const _0x511dcc=a0_0x3acfee;_0x39aba4[_0x511dcc(0x1c0)][_0x511dcc(0x209)](_0x511dcc(0x126)),await runGeminiAnalysis(_0x39aba4),updateHealthVector(_0x39aba4),triggerGaitAnalysis(_0x39aba4),triggerEnergyPrediction(_0x39aba4);}async function triggerGaitAnalysis(_0x381670){const _0x4b3827=a0_0x3acfee;if(!_0x381670['isProVersion'])return;try{const _0x17eefd=await _0x381670[_0x4b3827(0x195)]('LTM.trainingData.sequences');_0x17eefd&&_0x17eefd[_0x4b3827(0x1b5)]&&sendToPython(_0x381670,'ANALYZE_GAIT',{'sequences':JSON['parse'](_0x17eefd[_0x4b3827(0x1b5)])});}catch(_0x1047d8){}}async function triggerEnergyPrediction(_0x2c321c){const _0x37e960=a0_0x3acfee;if(!_0x2c321c['isProVersion'])return;try{const _0x4b3efa=await getOutsideTemperatureNumeric(_0x2c321c);if(_0x4b3efa===null)return;const _0x118bd7={},_0x38bd1e=_0x2c321c[_0x37e960(0x1d2)]['devices']||[];for(const _0x2d5c5d of _0x38bd1e){if(_0x2d5c5d[_0x37e960(0x1f5)]===_0x37e960(0x13c)&&_0x2d5c5d[_0x37e960(0x17d)]){const _0x3f9620=_0x2c321c[_0x37e960(0x1d8)][_0x2d5c5d['id']];if(_0x3f9620!==undefined)_0x118bd7[_0x2d5c5d[_0x37e960(0x17d)]]=_0x3f9620;}}Object[_0x37e960(0x105)](_0x118bd7)[_0x37e960(0x1d3)]>0x0&&sendToPython(_0x2c321c,_0x37e960(0x1b4),{'current_temps':_0x118bd7,'t_out':_0x4b3efa});}catch(_0x3161aa){}}function updateHealthVector(_0x57be0a){const _0x495196=a0_0x3acfee;if(!_0x57be0a[_0x495196(0x222)]||_0x57be0a[_0x495196(0x222)][_0x495196(0x1d3)]===0x0)return;const _0x599e4d=new Array(0x60)[_0x495196(0x228)](0x0),_0x5362ef=new Date()['setHours'](0x0,0x0,0x0,0x0);_0x57be0a[_0x495196(0x222)]['forEach'](_0x1a2d78=>{const _0x435bd3=_0x495196,_0x529c97=new Date(_0x1a2d78['timestamp']);if(_0x529c97[_0x435bd3(0xb9)]()>=_0x5362ef){const _0x2cdf80=_0x529c97['getHours'](),_0x50b532=_0x529c97[_0x435bd3(0x171)](),_0x2c1a41=_0x2cdf80*0x4+Math[_0x435bd3(0x20c)](_0x50b532/0xf);if(_0x2c1a41>=0x0&&_0x2c1a41<0x60)_0x599e4d[_0x2c1a41]++;}}),_0x57be0a['setStateAsync']('analysis.health.todayVector',{'val':JSON['stringify'](_0x599e4d),'ack':!![]});}async function getWeatherContext(_0x10eaeb){const _0x16edfc=a0_0x3acfee;if(!_0x10eaeb['config'][_0x16edfc(0x194)]||!_0x10eaeb[_0x16edfc(0x1d2)][_0x16edfc(0x21a)])return _0x16edfc(0x22f);try{const _0x230e2b=_0x10eaeb[_0x16edfc(0x1d2)]['weatherInstance'];let _0x2eace3=await _0x10eaeb['getForeignStateAsync'](_0x230e2b+_0x16edfc(0x13e));if(!_0x2eace3)_0x2eace3=await _0x10eaeb['getForeignStateAsync'](_0x230e2b+_0x16edfc(0xb8));let _0x4493b4=await _0x10eaeb['getForeignStateAsync'](_0x230e2b+_0x16edfc(0xfd));if(!_0x4493b4)_0x4493b4=await _0x10eaeb['getForeignStateAsync'](_0x230e2b+_0x16edfc(0x124));if(_0x2eace3&&_0x4493b4)return _0x2eace3[_0x16edfc(0x1b5)]+_0x16edfc(0x1e3)+_0x4493b4[_0x16edfc(0x1b5)];}catch(_0x367a02){}return _0x16edfc(0x1e2);}async function getCalendarContext(_0x1772a8){const _0x109aef=a0_0x3acfee;if(!_0x1772a8[_0x109aef(0x1d2)]['useCalendar']||!_0x1772a8[_0x109aef(0x1d2)]['calendarInstance'])return _0x109aef(0xc0);return'Keine\x20Termine.';}async function getCalendarNames(_0x170d25,_0x48f625){return[];}async function saveFeedback(_0x22d70d,_0x2b3812){const _0x48a45f=a0_0x3acfee;_0x22d70d[_0x48a45f(0x1c0)][_0x48a45f(0x1f0)](_0x48a45f(0x172)+_0x2b3812[_0x48a45f(0x151)]);}function a0_0x432e(){const _0x538f5f=['rawEventLog','Unknown','vacation','analysis.alertReason','analysis.analysisHistory','scanForDevices','fill','enum','LTM.trainingData.thermodynamics','submitFeedback','main','LTM.baselineStatus','stdin','Wetterdaten\x20deaktiviert.','forEach','analysis.health.isAnomaly','toString','Err:\x20','Build\x20Topology','analysis.health.todayVector','cogni-living','toFixed','callback','indicator','push','exports','python_service','Insulation\x20Score','.\x20EVENTS:\x20','ack','eventHistory','timestamp',')\x20-\x20SAFE\x20BOOT','constructor','stateChange','TRAIN_SECURITY','object','livingContext','548526TLlMpY','LTM.driftAnalysis.lastCheck','./lib/installer','Description','join','ANALYZE_TREND','telegram','checkAndInstall','minDaysForBaseline','analysis.automation.description','.forecast.current.temperature','getTime','analysisTimer','occupancy','Auto\x20Apply','automationProposal','‚ö†Ô∏è\x20SECURITY\x20ALARM:\x20','analysis.training','Kalender\x20deaktiviert.','state','analysis.health.lastCheck','getObjectAsync','filter','ENERGY_TRAIN_RESULT','\x20new\x20patterns.','analysis.energy.forecast','data','window','currentSystemMode','onMessage','1326846mrBsVo','getHours','unshift','getDate','change_percent','heizung','analysis.health.gaitSpeed','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','.\x20EMERGENCY:\x20','enum.rooms.*','startsWith','exitTimer','analysis.isAlert','warn','automation.triggerAction','geminiApiKey','date','json','[RESULT]','setupModeResetScheduler','licht','getForeignStateAsync','channel','analysis.automation.autoApply','Alert\x20Reason','Started...','activityLevel','ANALYZE_HEALTH','35GViMaH','details','analysis.activitySummary','trim','analysis.security.lastScore','daswetter','latitude','common','Missing\x20data','analysis.security.currentThreshold','map','BUTLER\x20Execution\x20Error:\x20','detected','.\x20KONTEXT:\x20','schalter','analysis.automation.targetId','writable','version','pr√§senz','analysis.trigger','LTM.driftAnalysis.driftDetails','.Current.WeatherText','boolean','logDuplicates','./lib/scheduler','Detected\x20Patterns','636282XjfzAS','@iobroker/adapter-core','LTM.dailyDigests','keys','unload','round','üõ°Ô∏è\x20SECURITY\x20CHECK:\x20Score\x20','payload','Unbekannt','getLtmData','onStateChange','onReady','Topology\x20Error:\x20','PYTHON_EXE','alertReason','events.lastEvent','.\x20SYSTEM_MODE:\x20','GUEST','ready','lampe','subscribeForeignStatesAsync','events.history','COMFORT_RESULT','city','analysis.training.status','PARTY','isProVersion','Train\x20Security','analysis.health.trendValue','exitGraceTimer','Security\x20Monitor','toISOString','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','analysis.health','.forecast.current.state','triggerBriefing','ü§ñ\x20Autopilot:\x20Running\x20periodic\x20analysis...','python3','triggerDailyDigest','outdoorSensorId','value','BUILD_TOPOLOGY','replace','Current\x20Threshold','systemUUID','HEALTH_TRAIN_RESULT','analysis.lastResult','Analysiere\x20ausgewogen.','enum.functions.*','Training\x20Error:\x20','12RCdhdT','communicate.request','extendObjectAsync','subscribeStates','Kein\x20API\x20Key.','geminiModel','getFullYear','text','temperature','rule','.Current.Temperature','ltmStbWindowDays','klima','parse','getGenerativeModel','analysis.triggerBriefing','Keine\x20Details.','N/A','LTM.processingStatus','now','response','button','Gemini\x20Init\x20Error:\x20','SECURITY_RESULT','Today\x20Vector\x20(15m)','Briefing\x20Error:\x20','analysisInterval','lastAlertState','üõãÔ∏è\x20Triggering\x20Comfort\x20Analysis\x20(Pattern\x20Mining)...','rating','system.presenceWho','name','isExit','OK:\x20','autoApply','analysis.training.triggerHealth','analysis.health.trendDiagnosis','TRAINING_COMPLETE','toLocaleTimeString','Last\x20raw\x20event','Error\x20launching\x20Python:\x20','üõãÔ∏è\x20BUTLER:\x20Found\x20','1430485OEVDAE','guest','Last\x20Check','switch','reason','TREND_RESULT','values','slice','openweathermap','LTM.triggerDailyDigest','Sequences','substring','getCalendarNames','PRIORIT√ÑT:\x20Gesundheit/AAL.','splice','Skipped\x20(No\x20AI\x20or\x20Data)','.communicate.request','üï∏Ô∏è\x20Building\x20Topology\x20Matrix...','driftAnalysisTimer','getMinutes','üìù\x20Feedback\x20received:\x20','ltmJob','5678785WVEUFN','[PYTHON]\x20','Heating\x20Score','notifyTelegramEnabled','setObjectNotExistsAsync','Event\x20History','setStateAsync','@google/generative-ai','isAlert','location','\x20->\x20','unknown','modeResetJob','analysis.security.lastCheck','Anomaly\x20Detected','Adapter','Fokus\x20auf\x20Komfort.','Deaktiviert\x20(Pro-Feature)','üêç\x20Python\x20Pong','getOverviewData','Training\x20Status','scanDevices','description','dismissAutomation','LTM','system.mode','endsWith','Success','ltmLtbWindowDays','ü§ñ\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','Alert\x20Status','stdout','useWeather','getStateAsync','heating','LTM.driftAnalysis','targetId','longitude','4753648hWygAF','setupBriefingScheduler','is_anomaly','ü§ñ\x20BUTLER:\x20Executing\x20Action\x20->\x20','AI\x20Training','getForeignObjectAsync','devices','dailyDigests','(((.+)+)+)+$','VACATION','kill','setupDriftAnalysisScheduler','contact','Gemini\x20Error:\x20','setForeignStateAsync','./lib/scanner','NORMAL','\x20=\x20','system.config','‚ö†Ô∏è\x20ALARM:\x20','command','genAI','analysis.training.triggerEnergy','Daily\x20Digests','Health\x20Analysis','analysis.security.topologyMatrix','PREDICT_ENERGY','val','[RECORDER]\x20Error:\x20','50fMUmCj','analysisHistory','onUnload','PONG','Trigger\x20Action','system','text.alarm','analysis.automation.targetValue','online','log','message','LTM.trainingData.sequences','dependencyInstallInProgress','apply','system.isPresent','analysis.training.triggerComfort','summary','setState','loc','analysis.energy.heatingScore','Pattern\x20Detected','sendTo','analysis.automation.triggerAction','Failed:\x20','WiFi\x20Presence\x20detected.','2001078bJETNI','generateContent','config','length','application/json','targetValue','Train\x20Health','fenster','sensorLastValues','kontakt','insulation','number','getEnums','TRAIN_COMFORT','Who\x20is\x20present?','systemConfig','find','Trigger\x20Briefing','Keine\x20Wetterdaten\x20verf√ºgbar.','¬∞C,\x20','cancel','analysis.energy.insulationScore','weatherunderground','child_process','analysis.automation.patternDetected','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','Train\x20Comfort','[LOG]','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','pythonProcess','Aktiv\x20(','briefingJob','info','delObjectAsync','LTM.driftAnalysis.baselineDrift','analysis.training.triggerTopology','isGracePeriodActive','type','existsSync','success','Train\x20Energy','analysis.automation.detectedPatterns','bind','ANALYZE_SEQUENCE','N/A\x20(Learning)','toLowerCase','Gait\x20Speed\x20Trend','analysis.energy','from','presenceDevices','analysis.training.triggerSecurity','isPresent','cogni-living\x20adapter\x20starting\x20(v','Target\x20Value','\x20Tage)','path','.forecast.current.temp','debug','TRAIN_HEALTH','split','floor','isEmergency','some','search','string','getForeignObjectsAsync','presence','Thermodynamics','stringify','getMonth','includes','error','apiKey','TRAIN_ENERGY','weatherInstance','inactivityThresholdHours','status','motion','ENERGY_PREDICT_RESULT','normal','dimmer','aiPersona'];a0_0x432e=function(){return _0x538f5f;};return a0_0x432e();}async function runGeminiAnalysis(_0x2666b3,_0x56f032=''){const _0x1e5097=a0_0x3acfee;if(!_0x2666b3[_0x1e5097(0x139)])return;if(_0x2666b3[_0x1e5097(0x240)][_0x1e5097(0x1d3)]===0x0)return;const _0x11f86a=_0x2666b3[_0x1e5097(0x240)][_0x1e5097(0x165)](0x0,0xf),_0x3230e4=await getWeatherContext(_0x2666b3),_0x1d5f4d=_0x2666b3[_0x1e5097(0xca)],_0x1bbada=PERSONA_MAPPING[_0x2666b3['config'][_0x1e5097(0x221)]||'generic'],_0x5975d7=_0x2666b3['config'][_0x1e5097(0x247)]||_0x1e5097(0x144);let _0x376cae=_0x1e5097(0x10a);try{const _0x5aca3a=await _0x2666b3[_0x1e5097(0x195)](_0x1e5097(0x152));if(_0x5aca3a&&_0x5aca3a['val'])_0x376cae=_0x5aca3a[_0x1e5097(0x1b5)];}catch(_0x28fe7d){}let _0x124990=![];try{const _0x344aac=await _0x2666b3[_0x1e5097(0x195)](_0x1e5097(0xe3));if(_0x344aac&&_0x344aac['val'])_0x124990=!![];}catch(_0x37926d){}const _0xca87dd=_0x1e5097(0xd3)+_0x1bbada+_0x1e5097(0xf5)+_0x5975d7+_0x1e5097(0x112)+_0x1d5f4d+'.\x20WETTER:\x20'+_0x3230e4+'.\x20ANWESEND:\x20'+_0x376cae+_0x1e5097(0x23e)+JSON['stringify'](_0x11f86a)+_0x1e5097(0xd4)+_0x56f032+_0x1e5097(0x122);try{const _0x1675a2=await _0x2666b3[_0x1e5097(0x139)][_0x1e5097(0x1d1)](_0xca87dd),_0x2999f7=JSON[_0x1e5097(0x141)](_0x1675a2[_0x1e5097(0x148)][_0x1e5097(0x13b)]()[_0x1e5097(0x12c)](/```json|```/g,'')[_0x1e5097(0xeb)]());await _0x2666b3['setStateAsync'](_0x1e5097(0x130),{'val':JSON[_0x1e5097(0x214)](_0x2999f7),'ack':!![]});if(_0x2999f7[_0x1e5097(0x1c7)])await _0x2666b3[_0x1e5097(0x17a)](_0x1e5097(0xea),{'val':_0x2999f7[_0x1e5097(0x1c7)],'ack':!![]});const _0x19f7e7={'timestamp':Date[_0x1e5097(0x147)](),'id':Date[_0x1e5097(0x147)]()[_0x1e5097(0x232)](),'analysis':{'activity':{'summary':_0x2999f7['summary'],'isAlert':_0x2999f7[_0x1e5097(0x17c)],'alertReason':_0x2999f7[_0x1e5097(0x110)]},'comfort':{'automationProposal':_0x2999f7[_0x1e5097(0xbd)]}}};await updateAnalysisHistory(_0x2666b3,_0x19f7e7);const _0x48f055=_0x2999f7[_0x1e5097(0x17c)]||![];_0x48f055!==_0x2666b3[_0x1e5097(0x14f)]&&(await _0x2666b3[_0x1e5097(0x17a)](_0x1e5097(0xd8),{'val':_0x48f055,'ack':!![]}),_0x2666b3[_0x1e5097(0x14f)]=_0x48f055,_0x48f055&&(await _0x2666b3['setStateAsync'](_0x1e5097(0x225),{'val':_0x2999f7['alertReason'],'ack':!![]}),sendNotification(_0x2666b3,_0x1e5097(0x1ad)+_0x2999f7['alertReason'],![],_0x2999f7[_0x1e5097(0x20d)])));if(_0x2999f7[_0x1e5097(0xbd)]&&_0x2999f7['automationProposal'][_0x1e5097(0xf4)]){await _0x2666b3['setStateAsync'](_0x1e5097(0x1e8),{'val':!![],'ack':!![]}),await _0x2666b3[_0x1e5097(0x17a)](_0x1e5097(0xb7),{'val':_0x2999f7[_0x1e5097(0xbd)][_0x1e5097(0x18a)],'ack':!![]}),await _0x2666b3[_0x1e5097(0x17a)](_0x1e5097(0xf7),{'val':_0x2999f7[_0x1e5097(0xbd)][_0x1e5097(0x198)],'ack':!![]}),await _0x2666b3['setStateAsync'](_0x1e5097(0x1be),{'val':JSON['stringify'](_0x2999f7['automationProposal'][_0x1e5097(0x1d5)]),'ack':!![]});if(_0x124990)executeAutomationAction(_0x2666b3);}}catch(_0x297f75){_0x2666b3['log'][_0x1e5097(0x217)](_0x1e5097(0x1a7)+_0x297f75['message']);}}async function startSystem(_0x4e10a4){const _0x5b0a66=a0_0x3acfee;_0x4e10a4['log'][_0x5b0a66(0x1f0)]('üöÄ\x20Starting\x20NUUKANNI\x20Logic\x20(v0.12.10)...'),await initZombies(_0x4e10a4);try{_0x4e10a4['isProVersion']=await checkLicense(_0x4e10a4['config']['licenseKey']);}catch(_0x5cdbfc){}if(!_0x4e10a4[_0x5b0a66(0x1d2)][_0x5b0a66(0x21b)]||_0x4e10a4[_0x5b0a66(0x1d2)][_0x5b0a66(0x21b)]<0.1)_0x4e10a4[_0x5b0a66(0x1d2)][_0x5b0a66(0x21b)]=0xc;await initHistory(_0x4e10a4),await initSystemConfig(_0x4e10a4);if(_0x4e10a4['config'][_0x5b0a66(0xdb)])try{_0x4e10a4[_0x5b0a66(0x1af)]=new GoogleGenerativeAI(_0x4e10a4[_0x5b0a66(0x1d2)][_0x5b0a66(0xdb)]),_0x4e10a4[_0x5b0a66(0x139)]=_0x4e10a4[_0x5b0a66(0x1af)][_0x5b0a66(0x142)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x5b0a66(0x1d4)}}),_0x4e10a4[_0x5b0a66(0x1c0)][_0x5b0a66(0x1f0)]('Gemini\x20AI\x20initialized.');}catch(_0x56e16b){_0x4e10a4[_0x5b0a66(0x1c0)][_0x5b0a66(0x217)](_0x5b0a66(0x14a)+_0x56e16b[_0x5b0a66(0x1c1)]);}await createAllObjects(_0x4e10a4),await loadSystemMode(_0x4e10a4),await loadRawEventLog(_0x4e10a4),await loadDailyDigests(_0x4e10a4),_0x4e10a4[_0x5b0a66(0x137)](_0x5b0a66(0xfb)),_0x4e10a4[_0x5b0a66(0x137)](LTM_DP_TRIGGER_DIGEST),_0x4e10a4[_0x5b0a66(0x137)](_0x5b0a66(0x18d)),_0x4e10a4[_0x5b0a66(0x137)]('analysis.triggerBriefing'),_0x4e10a4[_0x5b0a66(0x137)](_0x5b0a66(0x1cd)),_0x4e10a4[_0x5b0a66(0x137)](_0x5b0a66(0xe3)),_0x4e10a4[_0x5b0a66(0x137)]('analysis.training.triggerSecurity'),_0x4e10a4[_0x5b0a66(0x137)]('analysis.training.triggerHealth'),_0x4e10a4[_0x5b0a66(0x137)](_0x5b0a66(0x1b0)),_0x4e10a4[_0x5b0a66(0x137)](_0x5b0a66(0x1c6)),_0x4e10a4['subscribeStates']('analysis.training.triggerTopology'),await initSensorSubscriptions(_0x4e10a4),await initPresenceSubscriptions(_0x4e10a4),await setupTelegramListener(_0x4e10a4),setTimeout(()=>checkWifiPresence(_0x4e10a4),0x1388);if(_0x4e10a4['analysisTimer'])clearInterval(_0x4e10a4['analysisTimer']);const _0x3cb867=_0x4e10a4[_0x5b0a66(0x1d2)][_0x5b0a66(0x14e)]||0xf;_0x3cb867>0x0&&(_0x4e10a4['analysisTimer']=setInterval(()=>{runAutopilot(_0x4e10a4);},_0x3cb867*0x3c*0x3e8)),schedulers['setupLtmScheduler'](_0x4e10a4,()=>createDailyDigest(_0x4e10a4)),schedulers[_0x5b0a66(0xdf)](_0x4e10a4),schedulers[_0x5b0a66(0x1a5)](_0x4e10a4,()=>runBaselineDriftAnalysis(_0x4e10a4)),schedulers[_0x5b0a66(0x19b)](_0x4e10a4,()=>sendMorningBriefing(_0x4e10a4)),startPythonService(_0x4e10a4),setTimeout(()=>{const _0x2f73ab=_0x5b0a66;_0x4e10a4[_0x2f73ab(0x1ed)]&&(runPythonHealthCheck(_0x4e10a4),triggerGaitAnalysis(_0x4e10a4),triggerEnergyPrediction(_0x4e10a4)),updateHealthVector(_0x4e10a4);},0x1388);}class CogniLiving extends utils[a0_0x3acfee(0x183)]{constructor(_0x5e9cae){const _0x4307fa=a0_0x3acfee;super({..._0x5e9cae,'name':_0x4307fa(0x236)}),this[_0x4307fa(0x240)]=[],this[_0x4307fa(0x1b8)]=[],this[_0x4307fa(0x222)]=[],this[_0x4307fa(0x1a1)]=[],this[_0x4307fa(0x1d8)]={},this[_0x4307fa(0x1df)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x4307fa(0x203)]=!![],this['exitTimer']=null,this[_0x4307fa(0x11f)]=null,this[_0x4307fa(0x1f4)]=![],this[_0x4307fa(0x1af)]=null,this['geminiModel']=null,this['currentSystemMode']=SYSTEM_MODES[_0x4307fa(0x1aa)],this[_0x4307fa(0x11c)]=![],this[_0x4307fa(0x14f)]=![],this[_0x4307fa(0x12e)]=_0x4307fa(0x17f),this[_0x4307fa(0xba)]=null,this['ltmJob']=null,this[_0x4307fa(0x180)]=null,this[_0x4307fa(0x170)]=null,this[_0x4307fa(0x1ef)]=null,this['pythonProcess']=null,this['dependencyInstallInProgress']=![],this['on'](_0x4307fa(0x114),this[_0x4307fa(0x10d)][_0x4307fa(0x1fa)](this)),this['on'](_0x4307fa(0x244),this[_0x4307fa(0x10c)][_0x4307fa(0x1fa)](this)),this['on'](_0x4307fa(0x106),this[_0x4307fa(0x1b9)][_0x4307fa(0x1fa)](this)),this['on'](_0x4307fa(0x1c1),this[_0x4307fa(0xcb)][_0x4307fa(0x1fa)](this));}async[a0_0x3acfee(0x10d)](){const _0x5d348d=a0_0x3acfee;this[_0x5d348d(0x1c0)][_0x5d348d(0x1f0)](_0x5d348d(0x204)+this[_0x5d348d(0xf9)]+_0x5d348d(0x242));if(!installer[_0x5d348d(0xb5)](this,()=>startSystem(this)))return;}[a0_0x3acfee(0x1b9)](_0x1214d5){const _0xaa8d8a=a0_0x3acfee;if(this[_0xaa8d8a(0xba)])clearInterval(this[_0xaa8d8a(0xba)]);if(this[_0xaa8d8a(0x170)])clearInterval(this[_0xaa8d8a(0x170)]);if(this['ltmJob'])this[_0xaa8d8a(0x173)][_0xaa8d8a(0x1e4)]();if(this['modeResetJob'])this[_0xaa8d8a(0x180)]['cancel']();if(this[_0xaa8d8a(0x1ef)])this[_0xaa8d8a(0x1ef)][_0xaa8d8a(0x1e4)]();if(this[_0xaa8d8a(0xd7)])clearTimeout(this[_0xaa8d8a(0xd7)]);if(this['exitGraceTimer'])clearTimeout(this[_0xaa8d8a(0x11f)]);stopPythonService(this),_0x1214d5();}async[a0_0x3acfee(0x10c)](_0x378920,_0x382b77){const _0x353273=a0_0x3acfee;if(!_0x382b77||this[_0x353273(0x1c3)])return;if(_0x378920[_0x353273(0x216)](_0x353273(0xb4))&&_0x378920[_0x353273(0x18e)](_0x353273(0x135))&&_0x382b77[_0x353273(0x1b5)]){await handleTelegramResponse(this,_0x382b77[_0x353273(0x1b5)]);return;}if(_0x378920===this['namespace']+'.'+SYSTEM_DP_MODE){if(_0x382b77[_0x353273(0x1b5)]&&Object['values'](SYSTEM_MODES)[_0x353273(0x216)](_0x382b77[_0x353273(0x1b5)])){this[_0x353273(0xca)]=_0x382b77['val'];if(_0x382b77[_0x353273(0x1b5)]===SYSTEM_MODES[_0x353273(0x1a3)])await setPresence(this,![]);else await setPresence(this,!![]);}if(!_0x382b77['ack'])this['setState'](_0x378920,{'val':this[_0x353273(0xca)],'ack':!![]});return;}if(!_0x382b77[_0x353273(0x23f)]){_0x378920['includes'](_0x353273(0xfb))&&_0x382b77[_0x353273(0x1b5)]&&(this[_0x353273(0x1c8)](_0x378920,{'val':![],'ack':!![]}),runGeminiAnalysis(this));if(_0x378920[_0x353273(0x216)](_0x353273(0x128))&&_0x382b77[_0x353273(0x1b5)]){this[_0x353273(0x1c8)](_0x378920,{'val':![],'ack':!![]});if(this[_0x353273(0x11c)])createDailyDigest(this);}_0x378920[_0x353273(0x216)](_0x353273(0x125))&&_0x382b77['val']&&(this[_0x353273(0x1c8)](_0x378920,{'val':![],'ack':!![]}),sendMorningBriefing(this));_0x378920[_0x353273(0x216)](_0x353273(0xda))&&_0x382b77['val']&&(this[_0x353273(0x1c8)](_0x378920,{'val':![],'ack':!![]}),executeAutomationAction(this));if(_0x378920[_0x353273(0x216)](_0x353273(0x202))&&_0x382b77[_0x353273(0x1b5)]){this[_0x353273(0x1c8)](_0x378920,{'val':![],'ack':!![]});if(this[_0x353273(0x11c)])try{const _0x57cdf5=await this['getStateAsync'](_0x353273(0x1c2));if(_0x57cdf5&&_0x57cdf5[_0x353273(0x1b5)]){const _0x4b50bd=JSON[_0x353273(0x141)](_0x57cdf5[_0x353273(0x1b5)]);this[_0x353273(0x1c0)][_0x353273(0x1f0)]('üß†\x20Triggering\x20Security\x20Training...'),this[_0x353273(0x17a)]('analysis.training.status',{'val':'Sec-Training\x20started...','ack':!![]}),sendToPython(this,_0x353273(0x245),{'sequences':_0x4b50bd});}}catch(_0x42aab8){this['log'][_0x353273(0x217)](_0x353273(0x133)+_0x42aab8[_0x353273(0x1c1)]);}}if(_0x378920[_0x353273(0x216)](_0x353273(0x157))&&_0x382b77[_0x353273(0x1b5)]){this[_0x353273(0x1c8)](_0x378920,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x57b1b7=await this[_0x353273(0x195)](LTM_DP_DAILY_DIGESTS);if(_0x57b1b7&&_0x57b1b7['val'])sendToPython(this,_0x353273(0x20a),{'digests':JSON[_0x353273(0x141)](_0x57b1b7[_0x353273(0x1b5)])});}catch(_0x1b293f){}}if(_0x378920[_0x353273(0x216)](_0x353273(0x1b0))&&_0x382b77[_0x353273(0x1b5)]){this['setState'](_0x378920,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x571d8b=await this[_0x353273(0x195)](_0x353273(0x22a));if(_0x571d8b&&_0x571d8b['val'])sendToPython(this,_0x353273(0x219),{'points':JSON['parse'](_0x571d8b[_0x353273(0x1b5)])});}catch(_0x2b8bff){}}if(_0x378920['includes'](_0x353273(0x1c6))&&_0x382b77[_0x353273(0x1b5)]){this['setState'](_0x378920,{'val':![],'ack':!![]});if(this[_0x353273(0x11c)])try{const _0x3d0036=await this[_0x353273(0x195)](LTM_DP_RAW_LOG);_0x3d0036&&_0x3d0036[_0x353273(0x1b5)]&&(this[_0x353273(0x1c0)][_0x353273(0x1f0)](_0x353273(0x150)),sendToPython(this,_0x353273(0x1dd),{'events':JSON['parse'](_0x3d0036[_0x353273(0x1b5)])}));}catch(_0x13affa){}}if(_0x378920['includes'](_0x353273(0x1f3))&&_0x382b77[_0x353273(0x1b5)]){this[_0x353273(0x1c8)](_0x378920,{'val':![],'ack':!![]});if(this[_0x353273(0x11c)])try{const _0xf9178a=await this['getStateAsync']('LTM.trainingData.sequences');if(_0xf9178a&&_0xf9178a[_0x353273(0x1b5)]){const _0x564a04=JSON[_0x353273(0x141)](_0xf9178a[_0x353273(0x1b5)]);this['log'][_0x353273(0x1f0)](_0x353273(0x16f)),sendToPython(this,_0x353273(0x12b),{'sequences':_0x564a04});}}catch(_0xcc3dd3){this[_0x353273(0x1c0)][_0x353273(0x217)](_0x353273(0x10e)+_0xcc3dd3[_0x353273(0x1c1)]);}}return;}if(this[_0x353273(0x1d2)][_0x353273(0x201)]&&this[_0x353273(0x1d2)]['presenceDevices'][_0x353273(0x216)](_0x378920)){await checkWifiPresence(this);return;}const _0x529fb5=(this[_0x353273(0x1d2)][_0x353273(0x1a0)]||[])[_0x353273(0x1e0)](_0x746dff=>_0x746dff['id']===_0x378920);if(_0x529fb5)processSensorEvent(this,_0x378920,_0x382b77,_0x529fb5);}async['onMessage'](_0xc98f93){const _0x407c3f=a0_0x3acfee;if(typeof _0xc98f93===_0x407c3f(0x246)&&_0xc98f93[_0x407c3f(0x1c1)]){if(_0xc98f93[_0x407c3f(0x1ae)]==='testApiKey'){const _0x21709a=_0xc98f93[_0x407c3f(0x1c1)][_0x407c3f(0x218)]||this['config'][_0x407c3f(0xdb)];if(!_0x21709a)return this[_0x407c3f(0x1cc)](_0xc98f93[_0x407c3f(0x200)],_0xc98f93[_0x407c3f(0x1ae)],{'success':![],'message':_0x407c3f(0x138)},_0xc98f93[_0x407c3f(0x238)]);try{const _0x16e244=new GoogleGenerativeAI(_0x21709a),_0x275243=_0x16e244[_0x407c3f(0x142)]({'model':GEMINI_MODEL}),_0x1f0c34=await _0x275243['generateContent']('Hi');this[_0x407c3f(0x1cc)](_0xc98f93['from'],_0xc98f93['command'],{'success':!![],'message':_0x407c3f(0x155)+_0x1f0c34[_0x407c3f(0x148)]['text']()},_0xc98f93['callback']);}catch(_0x4cfcf0){this['sendTo'](_0xc98f93[_0x407c3f(0x200)],_0xc98f93[_0x407c3f(0x1ae)],{'success':![],'message':_0x407c3f(0x233)+_0x4cfcf0[_0x407c3f(0x1c1)]},_0xc98f93[_0x407c3f(0x238)]);}}else{if(_0xc98f93[_0x407c3f(0x1ae)]==='testContext'){const _0x592f8f=await getWeatherContext(this),_0x5b421c=await getCalendarContext(this);this['sendTo'](_0xc98f93[_0x407c3f(0x200)],_0xc98f93[_0x407c3f(0x1ae)],{'success':!![],'weather':_0x592f8f,'calendar':_0x5b421c},_0xc98f93[_0x407c3f(0x238)]);}else{if(_0xc98f93[_0x407c3f(0x1ae)]===_0x407c3f(0x10b)){if(!this[_0x407c3f(0x11c)])return this['sendTo'](_0xc98f93[_0x407c3f(0x200)],_0xc98f93[_0x407c3f(0x1ae)],{'success':![],'isPro':![]},_0xc98f93[_0x407c3f(0x238)]);let _0x5a0999={'status':_0x407c3f(0x145)};try{const _0x1e58c6=await this['getStateAsync'](LTM_DP_DRIFT_STATUS);_0x5a0999[_0x407c3f(0x21c)]=_0x1e58c6?_0x1e58c6['val']:'N/A';}catch(_0x45d39e){}this[_0x407c3f(0x1cc)](_0xc98f93[_0x407c3f(0x200)],_0xc98f93[_0x407c3f(0x1ae)],{'success':!![],'isPro':!![],'dailyDigests':this[_0x407c3f(0x1a1)],'driftAnalysis':_0x5a0999,'analysisHistory':this[_0x407c3f(0x1b8)]},_0xc98f93[_0x407c3f(0x238)]);}else{if(_0xc98f93[_0x407c3f(0x1ae)]===_0x407c3f(0x187)){const _0x2e64b5=this[_0x407c3f(0x1a1)][_0x407c3f(0x1d3)],_0x4ad109=new Date(),_0xcc21b7=new Date(_0x4ad109[_0x407c3f(0x13a)](),_0x4ad109[_0x407c3f(0x215)](),_0x4ad109[_0x407c3f(0xcf)]())[_0x407c3f(0xb9)](),_0x7a9d0a=this[_0x407c3f(0x222)][_0x407c3f(0xc4)](_0x49e634=>new Date(_0x49e634['timestamp'])[_0x407c3f(0xb9)]()>_0xcc21b7)['length'],_0x4eba6a=new Array(0x18)['fill'](0x0);this[_0x407c3f(0x222)][_0x407c3f(0x230)](_0x2f6a65=>{const _0x590aa8=_0x407c3f,_0x8e325d=new Date(_0x2f6a65[_0x590aa8(0x241)]);if(_0x8e325d[_0x590aa8(0xb9)]()>_0xcc21b7)_0x4eba6a[_0x8e325d[_0x590aa8(0xcd)]()]++;});let _0x4212ff={'status':_0x407c3f(0x145)};try{const _0x5831f2=await this[_0x407c3f(0x195)](LTM_DP_DRIFT_STATUS);_0x4212ff['status']=_0x5831f2?_0x5831f2[_0x407c3f(0x1b5)]:_0x407c3f(0x145);}catch(_0x2fe740){}let _0x386f7f='';try{const _0x523ec1=await this[_0x407c3f(0x195)](_0x407c3f(0x152));_0x386f7f=_0x523ec1?_0x523ec1[_0x407c3f(0x1b5)]:'';}catch(_0x5e7b5c){}let _0x156054=null;!this[_0x407c3f(0x139)]&&(_0x156054=this[_0x407c3f(0x1d2)][_0x407c3f(0xdb)]?'KI-Modell\x20nicht\x20initialisiert':'Kein\x20API\x20Key!');let _0x5df634={'detected':![],'description':'','targetId':'','targetValue':'','autoApply':![]};try{const _0x57e9f3=await this[_0x407c3f(0x195)]('analysis.automation.patternDetected');if(_0x57e9f3&&_0x57e9f3[_0x407c3f(0x1b5)]){_0x5df634[_0x407c3f(0xf4)]=!![];const _0x36e4f3=await this['getStateAsync'](_0x407c3f(0xb7));_0x5df634[_0x407c3f(0x18a)]=_0x36e4f3?_0x36e4f3['val']:'';const _0x4bcafe=await this['getStateAsync']('analysis.automation.targetId');_0x5df634['targetId']=_0x4bcafe?_0x4bcafe[_0x407c3f(0x1b5)]:'';const _0x349251=await this[_0x407c3f(0x195)](_0x407c3f(0x1be));_0x5df634[_0x407c3f(0x1d5)]=_0x349251?_0x349251[_0x407c3f(0x1b5)]:'';}const _0x36a385=await this[_0x407c3f(0x195)](_0x407c3f(0xe3));_0x5df634[_0x407c3f(0x156)]=_0x36a385?!!_0x36a385[_0x407c3f(0x1b5)]:![];}catch(_0x32516f){}this[_0x407c3f(0x1cc)](_0xc98f93[_0x407c3f(0x200)],_0xc98f93[_0x407c3f(0x1ae)],{'success':!![],'eventHistory':this['eventHistory'][_0x407c3f(0x165)](0x0,0xf),'stats':{'digestCount':_0x2e64b5,'eventCountToday':_0x7a9d0a,'hourlyActivity':_0x4eba6a,'driftStatus':_0x4212ff[_0x407c3f(0x21c)],'isPresent':this['isPresent'],'presenceWho':_0x386f7f,'minDays':this[_0x407c3f(0x1d2)][_0x407c3f(0xb6)]||0x7,'stbDays':this['config']['ltmStbWindowDays']||0xe,'ltbDays':this[_0x407c3f(0x1d2)][_0x407c3f(0x190)]||0x3c,'systemError':_0x156054},'automation':_0x5df634},_0xc98f93['callback']);}else{if(_0xc98f93[_0x407c3f(0x1ae)]===_0x407c3f(0x189))try{const _0x3ed8f7=await scanner[_0x407c3f(0x227)](this,_0xc98f93['message']||{});this['sendTo'](_0xc98f93[_0x407c3f(0x200)],_0xc98f93['command'],{'success':!![],'devices':_0x3ed8f7},_0xc98f93[_0x407c3f(0x238)]);}catch(_0x960f87){this[_0x407c3f(0x1cc)](_0xc98f93[_0x407c3f(0x200)],_0xc98f93['command'],{'success':![],'error':_0x960f87[_0x407c3f(0x1c1)]},_0xc98f93[_0x407c3f(0x238)]);}else{if(_0xc98f93[_0x407c3f(0x1ae)]===_0x407c3f(0x1dc)){const _0x2ce41b=await this[_0x407c3f(0x211)](_0x407c3f(0x132),_0x407c3f(0x229)),_0x5cc7d0=[];if(_0x2ce41b)for(const _0x10f136 in _0x2ce41b){const _0x3974e6=_0x2ce41b[_0x10f136],_0x29e798=(_0x3974e6[_0x407c3f(0xef)]&&typeof _0x3974e6[_0x407c3f(0xef)][_0x407c3f(0x153)]===_0x407c3f(0x246)?_0x3974e6[_0x407c3f(0xef)][_0x407c3f(0x153)]['de']:_0x3974e6[_0x407c3f(0xef)][_0x407c3f(0x153)])||_0x3974e6[_0x407c3f(0xef)][_0x407c3f(0x153)];_0x5cc7d0[_0x407c3f(0x23a)]({'id':_0x10f136,'name':_0x29e798});}const _0x200f50=await this[_0x407c3f(0x211)](_0x407c3f(0xd5),_0x407c3f(0x229)),_0xd7e811=[];if(_0x200f50)for(const _0x4dfa5f in _0x200f50){const _0x1bad1d=_0x200f50[_0x4dfa5f],_0x4c844d=(_0x1bad1d[_0x407c3f(0xef)]&&typeof _0x1bad1d['common'][_0x407c3f(0x153)]==='object'?_0x1bad1d[_0x407c3f(0xef)][_0x407c3f(0x153)]['de']:_0x1bad1d[_0x407c3f(0xef)]['name'])||_0x4dfa5f[_0x407c3f(0x20b)]('.')['pop']();_0xd7e811['push'](_0x4c844d);}this[_0x407c3f(0x1cc)](_0xc98f93[_0x407c3f(0x200)],_0xc98f93['command'],{'success':!![],'enums':_0x5cc7d0,'rooms':_0xd7e811},_0xc98f93['callback']);}else{if(_0xc98f93[_0x407c3f(0x1ae)]===_0x407c3f(0x16a)){const _0x385417=_0xc98f93[_0x407c3f(0x1c1)]['instance'];if(!_0x385417)return this[_0x407c3f(0x1cc)](_0xc98f93['from'],_0xc98f93[_0x407c3f(0x1ae)],{'success':![],'error':'No\x20instance'},_0xc98f93[_0x407c3f(0x238)]);const _0x4367fb=await getCalendarNames(this,_0x385417);this['sendTo'](_0xc98f93['from'],_0xc98f93[_0x407c3f(0x1ae)],{'success':!![],'names':_0x4367fb},_0xc98f93[_0x407c3f(0x238)]);}else{if(_0xc98f93[_0x407c3f(0x1ae)]==='simulateButler'){const {targetId:_0x5f51ed,targetValue:_0x5255b0}=_0xc98f93[_0x407c3f(0x1c1)];this[_0x407c3f(0x1c0)][_0x407c3f(0x1f0)]('üß™\x20Simulating\x20Butler\x20Proposal:\x20'+_0x5f51ed+_0x407c3f(0x1ab)+_0x5255b0),await this[_0x407c3f(0x17a)](_0x407c3f(0x1e8),{'val':!![],'ack':!![]}),await this[_0x407c3f(0x17a)](_0x407c3f(0xb7),{'val':'SIMULATION:\x20Test-Vorschlag\x20f√ºr\x20'+_0x5f51ed,'ack':!![]}),await this[_0x407c3f(0x17a)]('analysis.automation.targetId',{'val':_0x5f51ed,'ack':!![]}),await this['setStateAsync']('analysis.automation.targetValue',{'val':_0x5255b0,'ack':!![]}),this[_0x407c3f(0x1cc)](_0xc98f93[_0x407c3f(0x200)],_0xc98f93[_0x407c3f(0x1ae)],{'success':!![]},_0xc98f93[_0x407c3f(0x238)]);}else{if(_0xc98f93[_0x407c3f(0x1ae)]===_0x407c3f(0x22b)){const {historyId:_0x4b2b98,rating:_0x1b3c74,comment:_0x5824b9,alertReason:_0x206900}=_0xc98f93['message'];_0x4b2b98&&_0x1b3c74?(await saveFeedback(this,{'timestamp':Date[_0x407c3f(0x147)](),'historyId':_0x4b2b98,'rating':_0x1b3c74,'comment':_0x5824b9,'alertReason':_0x206900}),this[_0x407c3f(0x1cc)](_0xc98f93['from'],_0xc98f93[_0x407c3f(0x1ae)],{'success':!![]},_0xc98f93[_0x407c3f(0x238)])):this[_0x407c3f(0x1cc)](_0xc98f93[_0x407c3f(0x200)],_0xc98f93['command'],{'success':![],'error':_0x407c3f(0xf0)},_0xc98f93['callback']);}else _0xc98f93[_0x407c3f(0x1ae)]===_0x407c3f(0x18b)&&(this['log'][_0x407c3f(0x1f0)]('User\x20dismissed\x20automation\x20proposal.'),await this[_0x407c3f(0x17a)](_0x407c3f(0x1e8),{'val':![],'ack':!![]}),await this[_0x407c3f(0x17a)](_0x407c3f(0xb7),{'val':'','ack':!![]}),this['sendTo'](_0xc98f93[_0x407c3f(0x200)],_0xc98f93[_0x407c3f(0x1ae)],{'success':!![]},_0xc98f93[_0x407c3f(0x238)]));}}}}}}}}}}}if(require[a0_0x3acfee(0x22c)]!==module)module[a0_0x3acfee(0x23b)]=_0x554f41=>new CogniLiving(_0x554f41);else new CogniLiving();