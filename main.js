const a0_0x4ca298=a0_0x1976;(function(_0x4cee18,_0x2c7a4a){const _0x43a9dd=a0_0x1976,_0xbdc23=_0x4cee18();while(!![]){try{const _0x2998fb=-parseInt(_0x43a9dd(0x241))/0x1*(-parseInt(_0x43a9dd(0x376))/0x2)+-parseInt(_0x43a9dd(0x23c))/0x3*(-parseInt(_0x43a9dd(0x2f2))/0x4)+parseInt(_0x43a9dd(0x236))/0x5*(-parseInt(_0x43a9dd(0x264))/0x6)+parseInt(_0x43a9dd(0x35a))/0x7+-parseInt(_0x43a9dd(0x3bf))/0x8*(parseInt(_0x43a9dd(0x2cc))/0x9)+parseInt(_0x43a9dd(0x218))/0xa+parseInt(_0x43a9dd(0x297))/0xb*(parseInt(_0x43a9dd(0x203))/0xc);if(_0x2998fb===_0x2c7a4a)break;else _0xbdc23['push'](_0xbdc23['shift']());}catch(_0x5a2e92){_0xbdc23['push'](_0xbdc23['shift']());}}}(a0_0x1a26,0xdd05d));const a0_0x48e4e4=(function(){let _0x5057f6=!![];return function(_0x1c249c,_0x184829){const _0x3e1be4=_0x5057f6?function(){const _0x3b4191=a0_0x1976;if(_0x184829){const _0xbd5702=_0x184829[_0x3b4191(0x3b3)](_0x1c249c,arguments);return _0x184829=null,_0xbd5702;}}:function(){};return _0x5057f6=![],_0x3e1be4;};}()),a0_0x42078b=a0_0x48e4e4(this,function(){const _0x12e786=a0_0x1976;return a0_0x42078b[_0x12e786(0x3a7)]()[_0x12e786(0x291)](_0x12e786(0x22e))[_0x12e786(0x3a7)]()[_0x12e786(0x3a5)](a0_0x42078b)['search'](_0x12e786(0x22e));});a0_0x42078b();'use strict';const utils=require(a0_0x4ca298(0x2a6)),{GoogleGenerativeAI}=require('@google/generative-ai'),schedule=require('node-schedule'),{spawn,exec}=require(a0_0x4ca298(0x30d)),path=require(a0_0x4ca298(0x350)),HISTORY_MAX_SIZE=0x32,RAW_LOG_MAX_SIZE=0x5dc,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL=a0_0x4ca298(0x342),LTM_SCHEDULE='0\x203\x20*\x20*\x20*',MODE_RESET_SCHEDULE=a0_0x4ca298(0x299),ANALYSIS_HISTORY_MAX_SIZE=0x64,EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,SEQUENCE_TIMEOUT_MS=0x5*0x3c*0x3e8,MAX_TRAINING_SET_SIZE=0x1f4,LTM_DP_RAW_LOG=a0_0x4ca298(0x36a),LTM_DP_DAILY_DIGESTS=a0_0x4ca298(0x1ef),LTM_DP_STATUS='LTM.processingStatus',LTM_DP_TRIGGER_DIGEST=a0_0x4ca298(0x3c1),LTM_DP_BASELINE_STATUS=a0_0x4ca298(0x23b),LTM_DP_DRIFT_CHANNEL=a0_0x4ca298(0x3b0),LTM_DP_DRIFT_STATUS='LTM.driftAnalysis.baselineDrift',LTM_DP_DRIFT_DETAILS=a0_0x4ca298(0x2f0),LTM_DP_DRIFT_LAST_CHECK=a0_0x4ca298(0x27b),SYSTEM_DP_MODE=a0_0x4ca298(0x3b6),HARD_IGNORE_TERMS=[a0_0x4ca298(0x385),'scriptEnabled',a0_0x4ca298(0x25f),'unreach','lowbat',a0_0x4ca298(0x282),a0_0x4ca298(0x2ed),a0_0x4ca298(0x2c9),'error',a0_0x4ca298(0x305),a0_0x4ca298(0x313),a0_0x4ca298(0x31e),'stick_unreach',a0_0x4ca298(0x315),'dutycycle',a0_0x4ca298(0x38e),'reachable','link_quality'],BAD_NAMES=['targetposition',a0_0x4ca298(0x2a7),a0_0x4ca298(0x2df),a0_0x4ca298(0x28b),a0_0x4ca298(0x3bd),a0_0x4ca298(0x216),'on','off',a0_0x4ca298(0x2d1),a0_0x4ca298(0x356),a0_0x4ca298(0x2eb),'blind',a0_0x4ca298(0x2d9),a0_0x4ca298(0x258),a0_0x4ca298(0x234),a0_0x4ca298(0x38f),a0_0x4ca298(0x3ce),a0_0x4ca298(0x321),a0_0x4ca298(0x324),'power',a0_0x4ca298(0x31d),'setpoint',a0_0x4ca298(0x387),a0_0x4ca298(0x1fc),a0_0x4ca298(0x3d4)],ADAPTER_BLACKLIST=[a0_0x4ca298(0x2e7),a0_0x4ca298(0x3d3),'info.',a0_0x4ca298(0x253),a0_0x4ca298(0x3d7),a0_0x4ca298(0x261),a0_0x4ca298(0x364),a0_0x4ca298(0x36b),'echarts.',a0_0x4ca298(0x276),a0_0x4ca298(0x399)],SYSTEM_MODES={'NORMAL':'normal','VACATION':a0_0x4ca298(0x32b),'PARTY':'party','GUEST':a0_0x4ca298(0x330)},AUTO_RESET_MODES=[SYSTEM_MODES[a0_0x4ca298(0x329)],SYSTEM_MODES[a0_0x4ca298(0x23d)]],PERSONA_MAPPING={'generic':a0_0x4ca298(0x303),'senior_aal':a0_0x4ca298(0x224),'family':a0_0x4ca298(0x29c),'single_comfort':a0_0x4ca298(0x266),'security':a0_0x4ca298(0x2c1)},ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};let activeSequence=[],sequenceTimer=null;function a0_0x1a26(){const _0x4a62f7=['command','PRIORITÃ„T:\x20Sicherheit.','Logbook','.communicate.request','notifyEmailRecipient','getHours','catch','[RECORDER\x20DEBUG]\x20Ignored\x20Event\x20','send','maintenance','sendTo','_calName','16731uHlknC','Generating\x20Morning\x20Briefing...','now','onMessage','.\x20ZUSATZ:\x20','switch','setState','\x27\x20not\x20in\x20allowed\x20list)','currentSystemMode','Kalender:\x20Deaktiviert','analysis.analysisHistory','getLtmData','\x20events)...','cover','_score','message','ready','number','version','state','namespace','autoApply','getTime','cogni-living\x20adapter\x20starting\x20(v','onReady','Aktiv\x20(','analysis.automation.targetValue','system.','dailyDigests','indicator','trim','shutter','.\x0a\x20\x20\x20\x20KONTEXT:\x20','connection','WiFi\x20Presence\x20detected\x20->\x20Aborting\x20Exit\x20Timer.\x20User\x20is\x20present.','Success:\x20Compressed\x20','LTM.driftAnalysis.driftDetails','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','3540MIQUYl','\x20(Value:\x20','analysis.deviationFromBaseline','detected','[RECORDER]\x20Sequence\x20finished\x20(Steps:\x20','Drift\x20Details','[RESULT]','Activity\x20Summary','online','\x20events','time','requirements.txt','Event\x20received:\x20','description','error','cogni-living','shift','Analysiere\x20ausgewogen.','Keine\x20Details.','fault','from','warn','substring','Invalid\x20JSON\x20from\x20Python:\x20','find','âš ï¸\x20ALARM:\x20','sort','child_process','fenster','...','klima','Comfort\x20Suggestion','livingContext','working','testNotification','config_pending','âŒ\x20FREE\x20MODE','indicator.alarm','Error\x20launching\x20Python\x20service:\x20','rollladen','Motion\x20detected\x20inside.\x20Aborting\x20Exit\x20Timer.','isExit','val','energy','direction','analysis.alertReason','Daily\x20Digests','temperature','Vom\x20Benutzer\x20bestÃ¤tigt\x20(OK).','info','humidity','slice','\x22\x20--break-system-packages','sleepScore','schalter','PARTY','Details:\x20','vacation','analysis.automation.targetId','lock','analysis.isEmergency','[TEST]\x20','guest','delObjectAsync','getStateAsync','Missing\x20data','Automation\x20Proposals','getOverviewData','doors','Lernphase\x20(','analysis.health.restlessness','Auto\x20Apply\x20Rule','none','name','filter','Raw\x20Log','\x0a\x0a\x20\x20\x20\x20AUFGABE:\x0a\x20\x20\x20\x201.\x20Analysiere\x20auf\x20Gesundheitsrisiken\x20(Sturz,\x20InaktivitÃ¤t).\x0a\x20\x20\x20\x202.\x20Analysiere\x20auf\x20Komfort/Automatisierung\x20(\x22Butler\x22).\x20Erkennst\x20du\x20ein\x20Muster?\x20(z.B.\x20\x22Wenn\x20Bewegung\x20Flur,\x20dann\x20Licht\x20an\x22).\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20FORMAT\x20(JSON\x20Only!):\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x22isAlert\x22:\x20boolean,\x0a\x20\x20\x20\x20\x20\x20\x22alertReason\x22:\x20\x22string\x20(kurz)\x22,\x0a\x20\x20\x20\x20\x20\x20\x22isEmergency\x22:\x20boolean,\x0a\x20\x20\x20\x20\x20\x20\x22summary\x22:\x20\x22string\x20(Was\x20passiert\x20gerade?)\x22,\x0a\x20\x20\x20\x20\x20\x20\x22automationProposal\x22:\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22detected\x22:\x20boolean,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22description\x22:\x20\x22string\x20(Was\x20soll\x20automatisiert\x20werden?)\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22targetId\x22:\x20\x22string\x20(ioBroker\x20ID,\x20z.B.\x200_userdata.0.light)\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22targetValue\x22:\x20\x22any\x20(Wert,\x20z.B.\x20true\x20oder\x2050)\x22\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20','text','length','stderr','models/gemini-flash-latest','location','setStateAsync','toFixed','âœ…\x20AUTO-FIX\x20SUCCESS.\x20Dependencies\x20installed.\x20Restarting\x20Service...','System\x20Mode','ðŸ\x20Python\x20Pong\x20received!\x20Latency\x20check\x20passed.','LTM.trainingData','getFullYear','toLocaleString','scanDevices','channel','ltmJob','Sleep\x20Score\x20(0-100)','path','Last\x20Result','uuid-not-found','debug','stringify','lastIndexOf','position','Subscribing\x20to\x20','system.presenceWho','callback','6775895mwCGuW','analysis.health.trendDiagnosis','âŒ\x20AUTO-FIX\x20FAILED.\x20Please\x20run\x20manually:\x20sudo\x20','exitTimer','window','08:00','Keine\x20Analyse.','analysis.automation.patternDetected','system','accuweather.0','icons-mfd.','generateContent','IGNORING\x20DUPLICATE\x20(Cached):\x20','feedbackHistory','python3','analysis.automation.autoApply','LTM.rawEventLog','flot.','.\x0a\x20\x20\x20\x20SYSTEM_MODE:\x20','lampe','.\x20DATEN:\x20Schlaf\x20','COGNI_REQUEST_CALL','analysis.automation.suggestedAction','python3\x20-m\x20pip\x20install\x20-r\x20\x22','uuid-error','longitude','\x20days\x20of\x20activity\x20data\x20to\x20Python...','.forecast.current.state','88oyNLDb','lights','isEmergency','ðŸ\x20Guardian\x20Diagnosis\x20(','\x20(Value\x20is\x20falsy:\x20','ltmStbWindowDays','analysis.lastResult','lastAlertState','Could\x20not\x20kill\x20Python\x20process:\x20','enum.functions.*','Skipped\x20(No\x20AI\x20or\x20Data)','setObjectNotExistsAsync','some','Entry\x20detected\x20via\x20','main','scriptProblem','subscribeStates','valve','\x20|\x20','Array\x20of\x20completed\x20movement\x20paths\x20for\x20ML\x20training','analysis.trigger','Drift\x20Sched\x20Error:\x20','instance','\x20(Length:\x20','firmware','presence','split','Urlaub','openweathermap.0','isProVersion','push','Error\x20reading\x20calendar\x20table:\x20','targetId','analysis.health.trendValue','\x20presence\x20devices...','simple-api.','genAI','modeResetJob','notifyTelegramInstance','Health\x20&\x20Sleep\x20Analysis','Bibliotheken\x20nicht\x20gefunden','sendToAsync','Event\x20History','indicator.alarm.fire','No\x20module\x20named','.\x0a\x20\x20\x20\x20WETTER:\x20','Trend\x20Diagnosis\x20(Python)','constructor','ðŸ§ª\x20Simulating\x20Butler\x20Proposal:\x20','toString','Kein\x20API\x20Key\x20eingegeben.','notifyTelegramEnabled','driftAnalysisTimer','getForeignStateAsync','ðŸ› ï¸\x20AUTO-FIX:\x20Installing\x20Python\x20dependencies\x20from\x20','daswetter','geminiApiKey','events.lastEvent','LTM.driftAnalysis','values','Reset\x20Sched\x20Error:\x20','apply','startsWith','bewegung','system.mode','boolean','COGNI_CONFIRM_OK','LTM','Target\x20ID','Briefing\x20Error:\x20','telegram','value','[RECORDER]\x20Error\x20saving\x20sequence:\x20','5152EvhYtd','sensorLastValues','LTM.triggerDailyDigest','Last\x20Check','Trend\x20Value\x20(%)','analysisTimer','ðŸ\x20Stopping\x20Python\x20Sidecar...','write',').\x20Starting\x20Timer.','custom','retry','city','presenceDevices','stateChange','dependencyInstallInProgress','occupancy','LTM.trainingData.sequences','common','âœ…\x20PRO\x20ACTIVATED','calendarInstance','admin.','set_temperature','licenseKey','light','history.','Trigger\x20Analysis','siren','getForeignObjectAsync','Description','analysisHistory','native','NORMAL','analysis.automation','[PYTHON]\x20Service\x20exited\x20with\x20code\x20','analysis.health.notes','âš ï¸\x20Python\x20missing\x20dependencies.\x20Triggering\x20Auto-Install...','json','\x20|\x20Status:\x20','analysis.comfortSummary','weather','LTM.dailyDigests','Target\x20Value',').\x20Saving\x20to\x20Training\x20Data.','blind','members','unshift','getMonth','simulateButler','Gemini\x20Init\x20Error:\x20','getDate','analysis.health','BUTLER\x20Execution\x20Error:\x20','thermostat','actual_temperature','briefingEnabled','triggerDailyDigest','Unknown','join','analysis.automation.triggerAction','ack','3624RxoxoH','accuweather','Activity-Level','activityLevel','kill','.\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20INPUT\x20DATEN\x20(Letzte\x20Events):\x0a\x20\x20\x20\x20','Feedback\x20Log','onUnload','.\x20Welcome\x20home.','pythonProcess','systemConfig','stdin','\x20=\x20','analysis.comfortSuggestion','\x20sensors...','analysis.triggerBriefing','Pattern\x20Detected','ltmLtbWindowDays','writable','brightness','enum','2875880DDMdXv','python_service','isGracePeriodActive','targetValue','[PYTHON]\x20','response','setHours','string','Error:\x20','minDaysForBaseline','Drift\x20Analysis','Comfort\x20Summary','PRIORITÃ„T:\x20Gesundheit/AAL.','AI\x20Emergency\x20Status','object','Deaktiviert\x20(Pro-Feature)','WETTER:\x20Keine\x20Daten\x20gefunden','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','automationProposal','Last\x20raw\x20event','N/A','useWeather','(((.+)+)+)+$','KALENDER\x20ERROR:\x20','extendObjectAsync','notifyEmailEnabled','logDuplicates','contact','motion','type','13315xYUoHk','splice','onStateChange','Drift\x20Status','exitGraceTimer','LTM.baselineStatus','693FnDRdx','GUEST','devices','submitFeedback','[RECORDER]\x20Added\x20step\x20to\x20sequence:\x20','1994bCnRqY','health','\x0aSTB:\x20','aiPersona','\x20*\x20*\x20*','isArray','service.py','.Summary.Current','Trigger\x20Digest','analysis.health.sleepScore','analysis.feedbackHistory','expire','enum.rooms.*','tÃ¼r','Briefing\x20Sched\x20Error:\x20','Morning\x20Briefing\x20sent.','getGenerativeModel','alertReason','vis.','briefingJob','[LICENSE\x20CHECK]\x20Key\x20present:\x20','analysis.isAlert','getCalendarNames','status','Deviation','VACATION','analysis.activitySummary','\x20hours.\x20Potential\x20incapacitation.','Adapter','useCalendar','update','notifyTelegramRecipient','material.','Exit\x20Sensor\x20triggered\x20(','triggerBriefing','2766zALaga','ical.0','Fokus\x20auf\x20Komfort.','ltmDriftCheckIntervalHours','parse','button','geminiModel','close','includes','analysis.history_debug_00','Wetter:\x20Deaktiviert','getObjectAsync','testApiKey','Scheduling\x20Morning\x20Briefing\x20for\x20','unload','Started\x20at\x20','Training\x20Data\x20Sets','N/A\x20(Learning)','javascript.','log','forEach','text.alarm','No\x20instance','LTM.driftAnalysis.lastCheck','ðŸ“ž\x20RÃ¼ckruf\x20anfordern','AI\x20Alert\x20Status','openweathermap','exports','getForeignObjectsAsync','replace','rssi','baselineDrift','door','automation.triggerAction','scheduleJob','toISOString','/100,\x20AktivitÃ¤t\x20seit\x2004:00:\x20','Processing\x20Status','notifyPushoverEnabled','level','KI-Modell\x20nicht\x20initialisiert','indexOf','isAlert','communicate.request','stdout','search','Keiner','\x20(Type\x20\x27','temp','.data.table','timestamp','64922PmKQTr','generic','0\x204\x20*\x20*\x20*','value.health','[LOG]','Fokus\x20auf\x20Familienroutinen.','round','system.config','heizung','briefingTime','analysis.automation.description','prÃ¤senz','rawEventLog','summary','ðŸ“¡\x20Hooking\x20into\x20','@iobroker/adapter-core','currentposition','âœ…\x20Alles\x20OK\x20(Reset)','date','config','SIMULATION:\x20Test-Vorschlag\x20fÃ¼r\x20','calendarSelection','sensor','Restoring\x20sensor\x20cache\x20from\x20history\x20(','systemUUID','toLowerCase','isPresent','cancel','Who\x20is\x20present?','bind','map','loc','system.meta.uuid','subscribeForeignStatesAsync','eventHistory','User\x20dismissed\x20automation\x20proposal.','unknown','HARD\x20WATCHDOG:\x20No\x20sensor\x20activity\x20detected\x20for\x20','inactivityThresholdHours','ðŸ\x20Starting\x20Python\x20Sidecar:\x20','pop'];a0_0x1a26=function(){return _0x4a62f7;};return a0_0x1a26();}async function initZombies(_0xff443){const _0xc5580e=a0_0x4ca298;try{const _0x416b93=[_0xc5580e(0x26d),'events.history_debug_00'];for(const _0x42e0c5 of _0x416b93){try{const _0x8f39c0=await _0xff443[_0xc5580e(0x26f)](_0x42e0c5);_0x8f39c0&&await _0xff443[_0xc5580e(0x331)](_0x42e0c5);}catch(_0x485d5e){}}}catch(_0x1e1446){}}async function initHistory(_0x27870f){const _0x5bb78d=a0_0x4ca298;try{const _0x11a3e3=await _0x27870f[_0x5bb78d(0x332)]('events.history');_0x11a3e3&&_0x11a3e3['val']&&(_0x27870f[_0x5bb78d(0x2b9)]=JSON[_0x5bb78d(0x268)](_0x11a3e3[_0x5bb78d(0x31c)][_0x5bb78d(0x3a7)]()));}catch(_0x166b76){_0x27870f[_0x5bb78d(0x2b9)]=[];}try{const _0x1e4e62=await _0x27870f['getStateAsync'](_0x5bb78d(0x2d6));if(_0x1e4e62&&_0x1e4e62[_0x5bb78d(0x31c)])_0x27870f[_0x5bb78d(0x1e4)]=JSON[_0x5bb78d(0x268)](_0x1e4e62[_0x5bb78d(0x31c)]['toString']());}catch(_0x2de20a){_0x27870f[_0x5bb78d(0x1e4)]=[];}if(_0x27870f['eventHistory']&&_0x27870f[_0x5bb78d(0x2b9)][_0x5bb78d(0x340)]>0x0){_0x27870f[_0x5bb78d(0x277)][_0x5bb78d(0x323)](_0x5bb78d(0x2ae)+_0x27870f[_0x5bb78d(0x2b9)][_0x5bb78d(0x340)]+_0x5bb78d(0x2d8));for(let _0x55fa00=_0x27870f['eventHistory']['length']-0x1;_0x55fa00>=0x0;_0x55fa00--){const _0x50eb81=_0x27870f['eventHistory'][_0x55fa00];_0x50eb81&&_0x50eb81['id']!==undefined&&_0x50eb81[_0x5bb78d(0x3bd)]!==undefined&&(_0x27870f['sensorLastValues'][_0x50eb81['id']]=_0x50eb81[_0x5bb78d(0x3bd)]);}}}async function initSystemConfig(_0x4d74ee){const _0x1ab663=a0_0x4ca298;try{const _0x272ae6=await _0x4d74ee[_0x1ab663(0x1e2)](_0x1ab663(0x29e));_0x272ae6&&_0x272ae6[_0x1ab663(0x3d0)]&&(_0x4d74ee[_0x1ab663(0x20d)]={'latitude':_0x272ae6[_0x1ab663(0x3d0)]['latitude']||0x0,'longitude':_0x272ae6[_0x1ab663(0x3d0)][_0x1ab663(0x373)]||0x0,'city':_0x272ae6[_0x1ab663(0x3d0)][_0x1ab663(0x3ca)]||''});}catch(_0xaa99e2){}}async function checkLicense(_0xf2f52a,_0x3d7afb){const _0x32fe94=a0_0x4ca298;if(!_0x3d7afb)return![];_0xf2f52a[_0x32fe94(0x2af)]=await getSystemUUID(_0xf2f52a);if(_0x3d7afb==='TEST-PRO-KEY'||_0x3d7afb[_0x32fe94(0x3b4)]('PRO-'))return!![];return![];}async function getSystemUUID(_0x338afe){const _0x4f33cc=a0_0x4ca298;try{const _0x5d1725=await _0x338afe[_0x4f33cc(0x1e2)](_0x4f33cc(0x2b7));if(_0x5d1725&&_0x5d1725[_0x4f33cc(0x1e5)]&&_0x5d1725['native']['uuid'])return _0x5d1725[_0x4f33cc(0x1e5)]['uuid'];return _0x4f33cc(0x352);}catch(_0x4ec4c6){return _0x4f33cc(0x372);}}async function createAllObjects(_0x562558){const _0x55945b=a0_0x4ca298;await checkSystemObjects(_0x562558),await _0x562558[_0x55945b(0x381)](_0x55945b(0x358),{'type':_0x55945b(0x2df),'common':{'name':_0x55945b(0x2b3),'type':_0x55945b(0x21f),'role':'text','read':!![],'write':![],'def':''},'native':{}}),await _0x562558[_0x55945b(0x381)](_0x55945b(0x3af),{'type':_0x55945b(0x2df),'common':{'name':_0x55945b(0x22b),'type':_0x55945b(0x21f),'role':_0x55945b(0x1eb),'read':!![],'write':![]},'native':{}}),await _0x562558[_0x55945b(0x381)]('events.history',{'type':_0x55945b(0x2df),'common':{'name':_0x55945b(0x3a0),'type':_0x55945b(0x21f),'role':_0x55945b(0x1eb),'read':!![],'write':![]},'native':{}}),await _0x562558[_0x55945b(0x381)]('analysis.trigger',{'type':_0x55945b(0x2df),'common':{'name':_0x55945b(0x1e0),'type':_0x55945b(0x3b7),'role':_0x55945b(0x269),'read':!![],'write':!![],'def':![]},'native':{}}),await _0x562558[_0x55945b(0x381)](_0x55945b(0x212),{'type':_0x55945b(0x2df),'common':{'name':'Trigger\x20Briefing\x20(Test)','type':'boolean','role':_0x55945b(0x269),'read':!![],'write':!![],'def':![]},'native':{}}),await _0x562558['setObjectNotExistsAsync']('analysis.lastResult',{'type':_0x55945b(0x2df),'common':{'name':_0x55945b(0x351),'type':'string','role':_0x55945b(0x1eb),'read':!![],'write':![]},'native':{}}),await _0x562558[_0x55945b(0x381)](_0x55945b(0x256),{'type':_0x55945b(0x2df),'common':{'name':_0x55945b(0x27d),'type':_0x55945b(0x3b7),'role':_0x55945b(0x317),'read':!![],'write':![],'def':![]},'native':{}}),await _0x562558['setObjectNotExistsAsync'](_0x55945b(0x32e),{'type':_0x55945b(0x2df),'common':{'name':_0x55945b(0x225),'type':_0x55945b(0x3b7),'role':_0x55945b(0x3a1),'read':!![],'write':![],'def':![]},'native':{}}),await _0x562558[_0x55945b(0x381)]('analysis.alertReason',{'type':'state','common':{'name':'Alert\x20Reason','type':_0x55945b(0x21f),'role':_0x55945b(0x279),'read':!![],'write':![]},'native':{}}),await _0x562558['setObjectNotExistsAsync'](_0x55945b(0x25b),{'type':_0x55945b(0x2df),'common':{'name':_0x55945b(0x2f9),'type':_0x55945b(0x21f),'role':_0x55945b(0x33f),'read':!![],'write':![]},'native':{}}),await _0x562558[_0x55945b(0x381)](_0x55945b(0x2f4),{'type':'state','common':{'name':_0x55945b(0x259),'type':'string','role':_0x55945b(0x2df),'read':!![],'write':![],'def':_0x55945b(0x22c)},'native':{}}),await _0x562558[_0x55945b(0x381)](_0x55945b(0x1ed),{'type':_0x55945b(0x2df),'common':{'name':_0x55945b(0x223),'type':'string','role':_0x55945b(0x33f),'read':!![],'write':![]},'native':{}}),await _0x562558[_0x55945b(0x381)](_0x55945b(0x210),{'type':_0x55945b(0x2df),'common':{'name':_0x55945b(0x311),'type':_0x55945b(0x21f),'role':_0x55945b(0x33f),'read':!![],'write':![]},'native':{}}),await _0x562558[_0x55945b(0x230)](_0x55945b(0x1e7),{'type':_0x55945b(0x34d),'common':{'name':_0x55945b(0x334)},'native':{}}),await _0x562558[_0x55945b(0x381)]('analysis.automation.patternDetected',{'type':_0x55945b(0x2df),'common':{'name':_0x55945b(0x213),'type':_0x55945b(0x3b7),'role':_0x55945b(0x2e9),'read':!![],'write':![],'def':![]},'native':{}}),await _0x562558[_0x55945b(0x381)](_0x55945b(0x2a1),{'type':_0x55945b(0x2df),'common':{'name':_0x55945b(0x1e3),'type':_0x55945b(0x21f),'role':_0x55945b(0x33f),'read':!![],'write':![]},'native':{}}),await _0x562558[_0x55945b(0x381)](_0x55945b(0x370),{'type':_0x55945b(0x2df),'common':{'name':'Action','type':_0x55945b(0x21f),'role':'text','read':!![],'write':![]},'native':{}}),await _0x562558[_0x55945b(0x381)]('analysis.automation.targetId',{'type':_0x55945b(0x2df),'common':{'name':_0x55945b(0x3ba),'type':_0x55945b(0x21f),'role':_0x55945b(0x33f),'read':!![],'write':![]},'native':{}}),await _0x562558[_0x55945b(0x381)](_0x55945b(0x2e6),{'type':_0x55945b(0x2df),'common':{'name':_0x55945b(0x1f0),'type':_0x55945b(0x21f),'role':'text','read':!![],'write':![]},'native':{}}),await _0x562558[_0x55945b(0x381)]('analysis.automation.autoApply',{'type':_0x55945b(0x2df),'common':{'name':_0x55945b(0x339),'type':_0x55945b(0x3b7),'role':_0x55945b(0x2d1),'read':!![],'write':!![],'def':![]},'native':{}}),await _0x562558[_0x55945b(0x381)](_0x55945b(0x201),{'type':_0x55945b(0x2df),'common':{'name':'Trigger\x20Action\x20Now','type':_0x55945b(0x3b7),'role':_0x55945b(0x269),'read':!![],'write':!![],'def':![]},'native':{}}),await _0x562558[_0x55945b(0x381)](_0x55945b(0x2d6),{'type':_0x55945b(0x2df),'common':{'name':_0x55945b(0x2c2),'type':_0x55945b(0x21f),'role':'json','read':!![],'write':![],'def':'[]'},'native':{}}),await _0x562558['setObjectNotExistsAsync'](_0x55945b(0x24b),{'type':_0x55945b(0x2df),'common':{'name':_0x55945b(0x209),'type':'string','role':'json','read':!![],'write':![],'def':'[]'},'native':{}}),await _0x562558['extendObjectAsync'](_0x55945b(0x1f9),{'type':'channel','common':{'name':_0x55945b(0x39d)},'native':{}}),await _0x562558[_0x55945b(0x381)](_0x55945b(0x24a),{'type':_0x55945b(0x2df),'common':{'name':_0x55945b(0x34f),'type':_0x55945b(0x2dd),'role':_0x55945b(0x29a),'read':!![],'write':![],'def':0x0},'native':{}}),await _0x562558[_0x55945b(0x381)](_0x55945b(0x338),{'type':_0x55945b(0x2df),'common':{'name':'Restlessness\x20Level','type':_0x55945b(0x21f),'role':'text','read':!![],'write':![],'def':_0x55945b(0x33a)},'native':{}}),await _0x562558[_0x55945b(0x381)](_0x55945b(0x1e9),{'type':_0x55945b(0x2df),'common':{'name':'Health\x20Notes','type':_0x55945b(0x21f),'role':'text','read':!![],'write':![],'def':''},'native':{}}),await _0x562558[_0x55945b(0x381)](_0x55945b(0x35b),{'type':_0x55945b(0x2df),'common':{'name':_0x55945b(0x3a4),'type':_0x55945b(0x21f),'role':_0x55945b(0x33f),'read':!![],'write':![],'def':_0x55945b(0x22c)},'native':{}}),await _0x562558['setObjectNotExistsAsync'](_0x55945b(0x397),{'type':_0x55945b(0x2df),'common':{'name':_0x55945b(0x3c3),'type':_0x55945b(0x2dd),'role':_0x55945b(0x3bd),'read':!![],'write':![],'def':0x0},'native':{}}),await _0x562558[_0x55945b(0x230)](_0x55945b(0x349),{'type':_0x55945b(0x34d),'common':{'name':_0x55945b(0x274)},'native':{}}),await _0x562558['setObjectNotExistsAsync'](_0x55945b(0x3cf),{'type':_0x55945b(0x2df),'common':{'name':'Recorded\x20Motion\x20Sequences','type':'string','role':_0x55945b(0x1eb),'read':!![],'write':![],'def':'[]','desc':_0x55945b(0x389)},'native':{}}),await checkLtmObjects(_0x562558),await checkLtmDriftObjects(_0x562558);}async function checkSystemObjects(_0xd1c834){const _0x1b9711=a0_0x4ca298;await _0xd1c834['extendObjectAsync'](_0x1b9711(0x362),{'type':_0x1b9711(0x34d),'common':{'name':'System\x20Status\x20&\x20Control'},'native':{}}),await _0xd1c834['extendObjectAsync'](SYSTEM_DP_MODE,{'type':_0x1b9711(0x2df),'common':{'name':_0x1b9711(0x347),'type':'string','role':_0x1b9711(0x2df),'read':!![],'write':!![],'def':SYSTEM_MODES[_0x1b9711(0x1e6)],'states':{[SYSTEM_MODES[_0x1b9711(0x1e6)]]:'Normal',[SYSTEM_MODES[_0x1b9711(0x25a)]]:_0x1b9711(0x391),[SYSTEM_MODES[_0x1b9711(0x329)]]:'Party',[SYSTEM_MODES['GUEST']]:'Gast'}},'native':{}});}async function checkLtmObjects(_0x12738a){const _0x33076a=a0_0x4ca298;await _0x12738a[_0x33076a(0x230)](_0x33076a(0x3b9),{'type':'channel','common':{'name':_0x33076a(0x3b9)},'native':{}}),await _0x12738a[_0x33076a(0x230)](LTM_DP_RAW_LOG,{'type':_0x33076a(0x2df),'common':{'name':_0x33076a(0x33d),'type':'string','role':_0x33076a(0x1eb),'read':!![],'write':![]},'native':{}}),await _0x12738a[_0x33076a(0x230)](LTM_DP_DAILY_DIGESTS,{'type':_0x33076a(0x2df),'common':{'name':_0x33076a(0x320),'type':_0x33076a(0x21f),'role':_0x33076a(0x1eb),'read':!![],'write':![]},'native':{}}),await _0x12738a[_0x33076a(0x230)](LTM_DP_STATUS,{'type':'state','common':{'name':_0x33076a(0x289),'type':_0x33076a(0x21f),'role':_0x33076a(0x33f),'read':!![],'write':![]},'native':{}}),await _0x12738a['extendObjectAsync'](LTM_DP_TRIGGER_DIGEST,{'type':'state','common':{'name':_0x33076a(0x249),'type':_0x33076a(0x3b7),'role':_0x33076a(0x269),'read':!![],'write':!![],'def':![]},'native':{}}),await _0x12738a[_0x33076a(0x230)](LTM_DP_BASELINE_STATUS,{'type':_0x33076a(0x2df),'common':{'name':'Baseline\x20Status','type':'string','role':_0x33076a(0x33f),'read':!![],'write':![]},'native':{}});}async function checkLtmDriftObjects(_0x2d5cd7){const _0x435d0d=a0_0x4ca298;await _0x2d5cd7['extendObjectAsync'](LTM_DP_DRIFT_CHANNEL,{'type':_0x435d0d(0x34d),'common':{'name':_0x435d0d(0x222)},'native':{}}),await _0x2d5cd7[_0x435d0d(0x230)](LTM_DP_DRIFT_STATUS,{'type':_0x435d0d(0x2df),'common':{'name':_0x435d0d(0x239),'type':'string','role':_0x435d0d(0x2df),'read':!![],'write':![],'def':_0x435d0d(0x22c)},'native':{}}),await _0x2d5cd7[_0x435d0d(0x230)](LTM_DP_DRIFT_DETAILS,{'type':_0x435d0d(0x2df),'common':{'name':_0x435d0d(0x2f7),'type':_0x435d0d(0x21f),'role':'text','read':!![],'write':![]},'native':{}}),await _0x2d5cd7[_0x435d0d(0x230)](LTM_DP_DRIFT_LAST_CHECK,{'type':_0x435d0d(0x2df),'common':{'name':_0x435d0d(0x3c2),'type':_0x435d0d(0x2dd),'role':_0x435d0d(0x2a9),'read':!![],'write':![]},'native':{}});}async function loadSystemMode(_0x4dbcc7){const _0x543341=a0_0x4ca298;try{const _0x598de0=await _0x4dbcc7[_0x543341(0x332)](SYSTEM_DP_MODE);_0x598de0&&_0x598de0[_0x543341(0x31c)]&&Object[_0x543341(0x3b1)](SYSTEM_MODES)[_0x543341(0x26c)](_0x598de0[_0x543341(0x31c)])?_0x4dbcc7[_0x543341(0x2d4)]=_0x598de0[_0x543341(0x31c)]:(_0x4dbcc7[_0x543341(0x2d4)]=SYSTEM_MODES[_0x543341(0x1e6)],await _0x4dbcc7['setStateAsync'](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x543341(0x1e6)],'ack':!![]}));}catch(_0x4d4721){_0x4dbcc7['currentSystemMode']=SYSTEM_MODES[_0x543341(0x1e6)];}}async function loadRawEventLog(_0x386b47){const _0x172139=a0_0x4ca298;try{const _0xdd2e66=await _0x386b47['getStateAsync'](LTM_DP_RAW_LOG);if(_0xdd2e66&&_0xdd2e66[_0x172139(0x31c)])_0x386b47[_0x172139(0x2a3)]=JSON[_0x172139(0x268)](_0xdd2e66[_0x172139(0x31c)]);}catch(_0x39ae32){_0x386b47[_0x172139(0x2a3)]=[];}}async function saveRawEventLog(_0x58ddb8){const _0x59bf50=a0_0x4ca298;_0x58ddb8[_0x59bf50(0x2a3)][_0x59bf50(0x340)]>RAW_LOG_MAX_SIZE&&_0x58ddb8['rawEventLog'][_0x59bf50(0x237)](0x0,_0x58ddb8[_0x59bf50(0x2a3)][_0x59bf50(0x340)]-RAW_LOG_MAX_SIZE),await _0x58ddb8[_0x59bf50(0x344)](LTM_DP_RAW_LOG,{'val':JSON[_0x59bf50(0x354)](_0x58ddb8[_0x59bf50(0x2a3)]),'ack':!![]});}async function loadDailyDigests(_0x11501b){const _0xb9179e=a0_0x4ca298;try{const _0x4f29ff=await _0x11501b[_0xb9179e(0x332)](LTM_DP_DAILY_DIGESTS);if(_0x4f29ff&&_0x4f29ff[_0xb9179e(0x31c)])_0x11501b[_0xb9179e(0x2e8)]=JSON[_0xb9179e(0x268)](_0x4f29ff[_0xb9179e(0x31c)]);}catch(_0x5a4a6a){_0x11501b[_0xb9179e(0x2e8)]=[];}await updateBaselineStatus(_0x11501b);}async function saveDailyDigests(_0x5a2626,_0x18a3c6=!![]){const _0x9c6c76=a0_0x4ca298,_0x115153=_0x5a2626['config'][_0x9c6c76(0x214)]||0x3c;_0x5a2626[_0x9c6c76(0x2e8)][_0x9c6c76(0x340)]>_0x115153&&_0x5a2626['dailyDigests'][_0x9c6c76(0x237)](0x0,_0x5a2626[_0x9c6c76(0x2e8)][_0x9c6c76(0x340)]-_0x115153);await _0x5a2626[_0x9c6c76(0x344)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x9c6c76(0x354)](_0x5a2626[_0x9c6c76(0x2e8)]),'ack':!![]});if(_0x18a3c6)await updateBaselineStatus(_0x5a2626);}async function updateAnalysisHistory(_0x147ebd,_0x32076d){const _0xc664e6=a0_0x4ca298;_0x147ebd[_0xc664e6(0x1e4)][_0xc664e6(0x1f4)](_0x32076d);if(_0x147ebd['analysisHistory'][_0xc664e6(0x340)]>ANALYSIS_HISTORY_MAX_SIZE)_0x147ebd[_0xc664e6(0x1e4)][_0xc664e6(0x2bf)]();await _0x147ebd[_0xc664e6(0x344)](_0xc664e6(0x2d6),{'val':JSON[_0xc664e6(0x354)](_0x147ebd['analysisHistory']),'ack':!![]});}async function updateBaselineStatus(_0x1ae68e){const _0x68f205=a0_0x4ca298;if(!_0x1ae68e[_0x68f205(0x393)]){await _0x1ae68e[_0x68f205(0x344)](LTM_DP_BASELINE_STATUS,{'val':_0x68f205(0x227),'ack':!![]});return;}const _0x402fcb=_0x1ae68e[_0x68f205(0x2e8)][_0x68f205(0x340)]>=(_0x1ae68e[_0x68f205(0x2aa)][_0x68f205(0x221)]||0x7)?_0x68f205(0x2e5)+_0x1ae68e['dailyDigests'][_0x68f205(0x340)]+'\x20Tage)':_0x68f205(0x337)+_0x1ae68e[_0x68f205(0x2e8)][_0x68f205(0x340)]+'/'+(_0x1ae68e[_0x68f205(0x2aa)][_0x68f205(0x221)]||0x7)+')';await _0x1ae68e[_0x68f205(0x344)](LTM_DP_BASELINE_STATUS,{'val':_0x402fcb,'ack':!![]});}async function initSensorSubscriptions(_0xeabbe){const _0x1fbbef=a0_0x4ca298,_0x2c4524=_0xeabbe[_0x1fbbef(0x2aa)]['devices'];if(_0x2c4524&&_0x2c4524[_0x1fbbef(0x340)]>0x0){_0xeabbe[_0x1fbbef(0x277)][_0x1fbbef(0x323)](_0x1fbbef(0x357)+_0x2c4524[_0x1fbbef(0x340)]+_0x1fbbef(0x211));for(const _0x31d7df of _0x2c4524){if(_0x31d7df['id']){await _0xeabbe[_0x1fbbef(0x2b8)](_0x31d7df['id']);try{const _0x1f9917=await _0xeabbe[_0x1fbbef(0x3ab)](_0x31d7df['id']);if(_0x1f9917)_0xeabbe[_0x1fbbef(0x3c0)][_0x31d7df['id']]=_0x1f9917[_0x1fbbef(0x31c)];}catch(_0x319eee){}}}}}async function initPresenceSubscriptions(_0x120a12){const _0x107266=a0_0x4ca298,_0x374c41=_0x120a12[_0x107266(0x2aa)][_0x107266(0x3cb)]||[];if(_0x374c41[_0x107266(0x340)]>0x0){_0x120a12[_0x107266(0x277)][_0x107266(0x323)]('Subscribing\x20to\x20'+_0x374c41[_0x107266(0x340)]+_0x107266(0x398));for(const _0x3026be of _0x374c41){await _0x120a12[_0x107266(0x2b8)](_0x3026be);}try{await checkWifiPresence(_0x120a12);}catch(_0x5d9fc7){}}}async function getWeatherContext(_0x239198){const _0x12429b=a0_0x4ca298;try{if(!_0x239198[_0x12429b(0x2aa)][_0x12429b(0x22d)])return _0x12429b(0x26e);let _0x530980='';const _0x396c93=_0x239198['config']['weatherInstance'];if(_0x396c93)try{if(_0x396c93[_0x12429b(0x26c)](_0x12429b(0x204))){const _0x38569d=await _0x239198[_0x12429b(0x3ab)](_0x396c93+_0x12429b(0x248));if(_0x38569d&&_0x38569d['val'])_0x530980=_0x38569d['val'];}else{if(_0x396c93[_0x12429b(0x26c)](_0x12429b(0x3ad))){const _0x5720d6=await _0x239198[_0x12429b(0x3ab)](_0x396c93+'.NextHours.Location_1.Day_1.current.symbol_desc');if(_0x5720d6&&_0x5720d6['val'])_0x530980=_0x5720d6['val'];}else{if(_0x396c93[_0x12429b(0x26c)](_0x12429b(0x27e))){const _0x3855a5=await _0x239198[_0x12429b(0x3ab)](_0x396c93+_0x12429b(0x375));if(_0x3855a5&&_0x3855a5[_0x12429b(0x31c)])_0x530980=_0x3855a5[_0x12429b(0x31c)];}}}}catch(_0x21d817){}if(!_0x530980){const _0x5999f5=[_0x12429b(0x363),'daswetter.0','weatherunderground.0',_0x12429b(0x392)];for(const _0x3c082c of _0x5999f5){try{const _0x5d3f28=await _0x239198[_0x12429b(0x1e2)](_0x3c082c);if(_0x5d3f28){if(_0x3c082c[_0x12429b(0x26c)](_0x12429b(0x204))){const _0x295e1b=await _0x239198[_0x12429b(0x3ab)](_0x3c082c+_0x12429b(0x248));if(_0x295e1b&&_0x295e1b['val']){_0x530980=_0x295e1b[_0x12429b(0x31c)];break;}}}}catch(_0x271012){}}}return _0x530980?'WETTER:\x20'+_0x530980:_0x12429b(0x228);}catch(_0x289f23){return'WETTER\x20ERROR:\x20'+_0x289f23[_0x12429b(0x2db)];}}async function getCalendarContext(_0x100bff){const _0x2804e4=a0_0x4ca298;try{if(!_0x100bff['config'][_0x2804e4(0x25e)])return _0x2804e4(0x2d5);let _0xfd5dc4=_0x100bff[_0x2804e4(0x2aa)][_0x2804e4(0x3d2)]||_0x2804e4(0x265),_0x54498b=_0x100bff[_0x2804e4(0x2aa)][_0x2804e4(0x2ac)]||[];if(typeof _0x54498b===_0x2804e4(0x21f))_0x54498b=_0x54498b[_0x2804e4(0x390)](',');try{const _0x4e3cef=await _0x100bff[_0x2804e4(0x3ab)](_0xfd5dc4+_0x2804e4(0x295));if(_0x4e3cef&&_0x4e3cef[_0x2804e4(0x31c)]){let _0x3a1581=tryParse(_0x4e3cef[_0x2804e4(0x31c)]);if(_0x3a1581&&Array[_0x2804e4(0x246)](_0x3a1581)){if(_0x54498b[_0x2804e4(0x340)]>0x0)_0x3a1581=_0x3a1581[_0x2804e4(0x33c)](_0x3a56cf=>_0x54498b[_0x2804e4(0x26c)](_0x3a56cf[_0x2804e4(0x2cb)]||''));else return'KALENDER:\x20Keine\x20Kalender\x20ausgewÃ¤hlt\x20(Bitte\x20in\x20Settings\x20konfigurieren)';if(_0x3a1581[_0x2804e4(0x340)]>0x0){const _0x45f80f=_0x3a1581[_0x2804e4(0x325)](0x0,0x3)[_0x2804e4(0x2b5)](_0x5aae10=>{const _0x1dca91=_0x2804e4;let _0x4fe32f=_0x5aae10[_0x1dca91(0x2a9)];if(_0x5aae10[_0x1dca91(0x2fc)])_0x4fe32f+='\x20'+_0x5aae10['time'];return _0x4fe32f+':\x20'+_0x5aae10['event']+'\x20('+_0x5aae10[_0x1dca91(0x2cb)]+')';});return'KALENDER:\x20'+_0x45f80f['join'](_0x2804e4(0x388));}else return'KALENDER:\x20Keine\x20relevanten\x20Termine';}}}catch(_0x1a0c33){_0x100bff[_0x2804e4(0x277)]['warn'](_0x2804e4(0x395)+_0x1a0c33[_0x2804e4(0x2db)]);}return'KALENDER:\x20Keine\x20Daten';}catch(_0x7664da){return _0x2804e4(0x22f)+_0x7664da[_0x2804e4(0x2db)];}}async function getCalendarNames(_0xed14e0,_0xa56584){const _0x1cf332=a0_0x4ca298;try{const _0x35139b=await _0xed14e0[_0x1cf332(0x3ab)](_0xa56584+'.data.table');if(_0x35139b&&_0x35139b[_0x1cf332(0x31c)]){const _0x1893e6=tryParse(_0x35139b[_0x1cf332(0x31c)]);if(_0x1893e6&&Array[_0x1cf332(0x246)](_0x1893e6)){const _0x16a770=[...new Set(_0x1893e6[_0x1cf332(0x2b5)](_0x2c7c3e=>_0x2c7c3e[_0x1cf332(0x2cb)])[_0x1cf332(0x33c)](Boolean))];return _0x16a770[_0x1cf332(0x30c)]();}}return[];}catch(_0x45275c){return _0xed14e0['log'][_0x1cf332(0x300)]('getCalendarNames\x20Error:\x20'+_0x45275c[_0x1cf332(0x2db)]),[];}}async function checkWifiPresence(_0x53e39a){const _0x108c1c=a0_0x4ca298;try{const _0x2bd3d1=_0x53e39a[_0x108c1c(0x2aa)][_0x108c1c(0x3cb)]||[];let _0x171736=![];const _0x17d835=[];for(const _0x5113f3 of _0x2bd3d1){try{const _0x361104=await _0x53e39a[_0x108c1c(0x3ab)](_0x5113f3);if(_0x361104&&(_0x361104[_0x108c1c(0x31c)]===!![]||_0x361104['val']===_0x108c1c(0x2fa)||_0x361104[_0x108c1c(0x31c)]===0x1)){_0x171736=!![];const _0x21a7e9=await _0x53e39a[_0x108c1c(0x1e2)](_0x5113f3);let _0x4f674b=_0x5113f3;_0x21a7e9&&_0x21a7e9[_0x108c1c(0x3d0)]&&_0x21a7e9[_0x108c1c(0x3d0)][_0x108c1c(0x33b)]&&(_0x4f674b=typeof _0x21a7e9[_0x108c1c(0x3d0)][_0x108c1c(0x33b)]==='object'?_0x21a7e9[_0x108c1c(0x3d0)][_0x108c1c(0x33b)]['de']||_0x21a7e9[_0x108c1c(0x3d0)]['name']['en']:_0x21a7e9[_0x108c1c(0x3d0)]['name']),_0x17d835['push'](_0x4f674b);}}catch(_0x439c94){}}return await _0x53e39a['setStateAsync'](_0x108c1c(0x358),{'val':_0x17d835[_0x108c1c(0x200)](',\x20'),'ack':!![]}),_0x171736&&(_0x53e39a[_0x108c1c(0x35d)]&&(_0x53e39a['log'][_0x108c1c(0x323)](_0x108c1c(0x2ee)),abortExitTimer(_0x53e39a)),!_0x53e39a[_0x108c1c(0x2b1)]&&_0x53e39a[_0x108c1c(0x2d4)]===SYSTEM_MODES['NORMAL']&&await setPresence(_0x53e39a,!![])),_0x171736;}catch(_0x47c2b7){return _0x53e39a[_0x108c1c(0x277)][_0x108c1c(0x300)]('Error\x20checking\x20WiFi:\x20'+_0x47c2b7[_0x108c1c(0x2db)]),![];}}function startExitTimer(_0x12e3f0){const _0x1f90fb=a0_0x4ca298;abortExitTimer(_0x12e3f0),_0x12e3f0[_0x1f90fb(0x21a)]=!![],_0x12e3f0['exitGraceTimer']=setTimeout(()=>{const _0x15ddca=_0x1f90fb;_0x12e3f0[_0x15ddca(0x21a)]=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),_0x12e3f0[_0x1f90fb(0x35d)]=setTimeout(()=>{const _0x1aac2b=_0x1f90fb;setPresence(_0x12e3f0,![]),_0x12e3f0[_0x1aac2b(0x35d)]=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}function a0_0x1976(_0x511a9c,_0x161199){const _0x514b4f=a0_0x1a26();return a0_0x1976=function(_0x42078b,_0x48e4e4){_0x42078b=_0x42078b-0x1e0;let _0x1a260=_0x514b4f[_0x42078b];return _0x1a260;},a0_0x1976(_0x511a9c,_0x161199);}function abortExitTimer(_0x3e8659){const _0x39c497=a0_0x4ca298;if(_0x3e8659['exitTimer'])clearTimeout(_0x3e8659[_0x39c497(0x35d)]);if(_0x3e8659[_0x39c497(0x23a)])clearTimeout(_0x3e8659[_0x39c497(0x23a)]);_0x3e8659[_0x39c497(0x35d)]=null,_0x3e8659[_0x39c497(0x23a)]=null,_0x3e8659['isGracePeriodActive']=![];}async function setPresence(_0x1ba721,_0x3cf54b){const _0x4313fb=a0_0x4ca298;if(_0x1ba721[_0x4313fb(0x2b1)]===_0x3cf54b)return;_0x1ba721['isPresent']=_0x3cf54b,await _0x1ba721[_0x4313fb(0x344)]('system.isPresent',{'val':_0x3cf54b,'ack':!![]});}async function saveFeedback(_0x5b2471,_0x124c7b){const _0x2c4d6f=a0_0x4ca298;_0x5b2471[_0x2c4d6f(0x277)][_0x2c4d6f(0x323)]('Feedback\x20saved:\x20'+JSON[_0x2c4d6f(0x354)](_0x124c7b));}async function runBaselineDriftAnalysis(_0x36321d){const _0x474351=a0_0x4ca298;if(!_0x36321d[_0x474351(0x393)]||!_0x36321d[_0x474351(0x26a)])return;const _0x954b38=_0x36321d['config'][_0x474351(0x37b)]||0xe;if(_0x36321d[_0x474351(0x2e8)][_0x474351(0x340)]<_0x954b38+(_0x36321d[_0x474351(0x2aa)]['minDaysForBaseline']||0x7)){await _0x36321d[_0x474351(0x344)](LTM_DP_DRIFT_STATUS,{'val':_0x474351(0x275),'ack':!![]});return;}const _0x5ec803=_0x36321d[_0x474351(0x2e8)][_0x474351(0x325)](-_0x954b38),_0x1a352e=_0x36321d[_0x474351(0x2e8)][_0x474351(0x325)](0x0,_0x36321d[_0x474351(0x2e8)][_0x474351(0x340)]-_0x954b38),_0x1732a3=_0x474351(0x2f1)+JSON[_0x474351(0x354)](_0x1a352e)+_0x474351(0x243)+JSON['stringify'](_0x5ec803);try{const _0x546a52=await _0x36321d['geminiModel'][_0x474351(0x365)](_0x1732a3),_0x35387d=JSON[_0x474351(0x268)](_0x546a52[_0x474351(0x21d)]['text']()[_0x474351(0x281)](/```json|```/g,'')[_0x474351(0x2ea)]());_0x35387d[_0x474351(0x283)]&&(await _0x36321d[_0x474351(0x344)](LTM_DP_DRIFT_STATUS,{'val':_0x35387d[_0x474351(0x283)],'ack':!![]}),await _0x36321d[_0x474351(0x344)](LTM_DP_DRIFT_DETAILS,{'val':_0x35387d['driftDetails'],'ack':!![]}),await _0x36321d[_0x474351(0x344)](LTM_DP_DRIFT_LAST_CHECK,{'val':Date[_0x474351(0x2ce)](),'ack':!![]}));}catch(_0x4f6a4a){}}function setupLtmScheduler(_0x1ea459){const _0x58a25f=a0_0x4ca298;try{if(_0x1ea459[_0x58a25f(0x34e)])_0x1ea459[_0x58a25f(0x34e)][_0x58a25f(0x2b2)]();if(!_0x1ea459[_0x58a25f(0x393)]){_0x1ea459[_0x58a25f(0x344)](LTM_DP_STATUS,{'val':'Deaktiviert\x20(Pro-Feature)','ack':!![]});return;}_0x1ea459[_0x58a25f(0x34e)]=schedule[_0x58a25f(0x286)](LTM_SCHEDULE,()=>createDailyDigest(_0x1ea459));}catch(_0x71dda7){_0x1ea459['log'][_0x58a25f(0x300)]('LTM\x20Sched\x20Error:\x20'+_0x71dda7['message']);}}function setupModeResetScheduler(_0x53648a){const _0x3433ef=a0_0x4ca298;try{if(_0x53648a['modeResetJob'])_0x53648a[_0x3433ef(0x39b)]['cancel']();_0x53648a['modeResetJob']=schedule[_0x3433ef(0x286)](MODE_RESET_SCHEDULE,async()=>{const _0x1c092f=_0x3433ef;await loadSystemMode(_0x53648a),AUTO_RESET_MODES[_0x1c092f(0x26c)](_0x53648a[_0x1c092f(0x2d4)])&&await _0x53648a[_0x1c092f(0x344)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES['NORMAL'],'ack':![]});});}catch(_0x4a042c){_0x53648a[_0x3433ef(0x277)][_0x3433ef(0x300)](_0x3433ef(0x3b2)+_0x4a042c['message']);}}function setupDriftAnalysisScheduler(_0x4eeab5){const _0x89ff43=a0_0x4ca298;try{if(_0x4eeab5[_0x89ff43(0x3aa)])clearInterval(_0x4eeab5[_0x89ff43(0x3aa)]);if(!_0x4eeab5['isProVersion'])return;_0x4eeab5['driftAnalysisTimer']=setInterval(()=>runBaselineDriftAnalysis(_0x4eeab5),(_0x4eeab5[_0x89ff43(0x2aa)][_0x89ff43(0x267)]||0x18)*0x36ee80),setTimeout(()=>runBaselineDriftAnalysis(_0x4eeab5),0x1388);}catch(_0x7373ba){_0x4eeab5[_0x89ff43(0x277)][_0x89ff43(0x300)](_0x89ff43(0x38b)+_0x7373ba['message']);}}function setupBriefingScheduler(_0x319785){const _0x3a8f8f=a0_0x4ca298;try{if(_0x319785['briefingJob'])_0x319785[_0x3a8f8f(0x254)]['cancel']();if(!_0x319785[_0x3a8f8f(0x2aa)][_0x3a8f8f(0x1fd)])return;const _0x4d905c=(_0x319785[_0x3a8f8f(0x2aa)][_0x3a8f8f(0x2a0)]||_0x3a8f8f(0x35f))['split'](':'),_0x4ab2ab=parseInt(_0x4d905c[0x0])||0x8,_0x336daf=parseInt(_0x4d905c[0x1])||0x0,_0x3a925b=_0x336daf+'\x20'+_0x4ab2ab+_0x3a8f8f(0x245);_0x319785[_0x3a8f8f(0x277)]['info'](_0x3a8f8f(0x271)+_0x4ab2ab+':'+(_0x336daf<0xa?'0'+_0x336daf:_0x336daf)),_0x319785[_0x3a8f8f(0x254)]=schedule[_0x3a8f8f(0x286)](_0x3a925b,()=>{sendMorningBriefing(_0x319785);});}catch(_0x5c4923){_0x319785[_0x3a8f8f(0x277)][_0x3a8f8f(0x300)](_0x3a8f8f(0x24f)+_0x5c4923[_0x3a8f8f(0x2db)]);}}async function sendNotification(_0x53dbb8,_0x3423b2,_0x423b88=![],_0x738cca=![]){const _0x8b80d6=a0_0x4ca298;_0x53dbb8[_0x8b80d6(0x277)][_0x8b80d6(0x323)]((_0x423b88?_0x8b80d6(0x32f):'')+'Sending\x20notification:\x20\x22'+_0x3423b2+'\x22');const _0x3124ee=_0x53dbb8[_0x8b80d6(0x2aa)];let _0x3c8c61=0x0;if(_0x3124ee[_0x8b80d6(0x3a9)]){let _0x181d00={};(_0x3423b2['includes']('Alarm')||_0x738cca)&&(_0x181d00={'reply_markup':{'inline_keyboard':[[{'text':_0x8b80d6(0x2a8),'callback_data':_0x8b80d6(0x3b8)}],[{'text':_0x8b80d6(0x27c),'callback_data':_0x8b80d6(0x36f)}]]}}),await _0x53dbb8[_0x8b80d6(0x39f)](_0x3124ee[_0x8b80d6(0x39c)],_0x8b80d6(0x2c8),{'text':_0x3423b2,'user':_0x3124ee[_0x8b80d6(0x260)],..._0x181d00}),_0x3c8c61++;}if(_0x3124ee[_0x8b80d6(0x28a)]){let _0x169ff5={'message':_0x3423b2,'title':_0x738cca?'ðŸš¨\x20EMERGENCY':'Cogni-Living','priority':_0x738cca?0x2:0x1,'device':_0x3124ee['notifyPushoverRecipient']};_0x738cca&&(_0x169ff5[_0x8b80d6(0x3c9)]=0x1e,_0x169ff5[_0x8b80d6(0x24c)]=0xe10,_0x169ff5['sound']=_0x8b80d6(0x1e1)),await _0x53dbb8[_0x8b80d6(0x39f)](_0x3124ee['notifyPushoverInstance'],_0x8b80d6(0x2c8),_0x169ff5),_0x3c8c61++;}return _0x3124ee[_0x8b80d6(0x231)]&&(await _0x53dbb8[_0x8b80d6(0x39f)](_0x3124ee['notifyEmailInstance'],_0x8b80d6(0x2c8),{'text':_0x3423b2,'to':_0x3124ee[_0x8b80d6(0x2c4)]}),_0x3c8c61++),_0x3c8c61;}async function setupTelegramListener(_0x39733d){const _0x5d41ca=a0_0x4ca298,_0x2dc47d=_0x39733d['config'][_0x5d41ca(0x39c)];_0x39733d[_0x5d41ca(0x2aa)][_0x5d41ca(0x3a9)]&&_0x2dc47d&&(_0x39733d[_0x5d41ca(0x277)][_0x5d41ca(0x323)](_0x5d41ca(0x2a5)+_0x2dc47d+'\x20for\x20interactive\x20buttons...'),await _0x39733d['subscribeForeignStatesAsync'](_0x2dc47d+_0x5d41ca(0x2c3)));}async function handleTelegramResponse(_0x2e491a,_0x5a64a2){const _0x136519=a0_0x4ca298;let _0xbd5533=_0x5a64a2;_0x5a64a2[_0x136519(0x3b4)]('[')&&(_0xbd5533=_0x5a64a2['substring'](_0x5a64a2[_0x136519(0x28d)](']')+0x1));if(_0xbd5533==='COGNI_CONFIRM_OK')_0x2e491a[_0x136519(0x277)][_0x136519(0x323)]('âœ…\x20User\x20confirmed\x20ALARM\x20via\x20Telegram.\x20Resetting\x20system.'),await _0x2e491a[_0x136519(0x344)]('analysis.isAlert',{'val':![],'ack':!![]}),await _0x2e491a[_0x136519(0x344)](_0x136519(0x31f),{'val':_0x136519(0x322),'ack':!![]}),_0x2e491a[_0x136519(0x37d)]=![],sendNotification(_0x2e491a,'âœ…\x20Alarm\x20quittiert.\x20System\x20normal.',![]);else _0xbd5533===_0x136519(0x36f)&&(_0x2e491a[_0x136519(0x277)]['warn']('ðŸ“ž\x20User\x20requested\x20CALL\x20via\x20Telegram!'),sendNotification(_0x2e491a,'ðŸ“ž\x20RÃœCKRUF\x20BITTE!\x20Der\x20Bewohner\x20hat\x20den\x20RÃ¼ckruf-Button\x20gedrÃ¼ckt.',![],!![]));}async function runAutopilot(_0xbc1ebe){const _0x1d865d=a0_0x4ca298,_0x40b954=_0xbc1ebe[_0x1d865d(0x2aa)]['inactivityThresholdHours'],_0x481edd=_0xbc1ebe[_0x1d865d(0x2b9)]['length']>0x0?_0xbc1ebe[_0x1d865d(0x2b9)][0x0]['timestamp']:Date[_0x1d865d(0x2ce)](),_0x4288a8=(Date['now']()-_0x481edd)/(0x3e8*0x3c*0x3c);let _0x5c2b37='';_0xbc1ebe[_0x1d865d(0x2aa)]['inactivityMonitoringEnabled']&&_0xbc1ebe['currentSystemMode']===SYSTEM_MODES[_0x1d865d(0x1e6)]&&_0xbc1ebe['isPresent']&&(_0x4288a8>_0x40b954&&(_0x5c2b37=_0x1d865d(0x2bc)+_0x4288a8[_0x1d865d(0x345)](0x1)+_0x1d865d(0x25c))),runGeminiAnalysis(_0xbc1ebe,_0x5c2b37)[_0x1d865d(0x2c6)](_0x4d617f=>_0xbc1ebe[_0x1d865d(0x277)]['error'](_0x4d617f));}async function createDailyDigest(_0x242981){const _0x429d9d=a0_0x4ca298;if(!_0x242981[_0x429d9d(0x393)])return;await _0x242981[_0x429d9d(0x344)](LTM_DP_STATUS,{'val':_0x429d9d(0x273)+new Date()[_0x429d9d(0x34b)](),'ack':!![]});if(!_0x242981[_0x429d9d(0x26a)]||_0x242981[_0x429d9d(0x2a3)][_0x429d9d(0x340)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x242981['setStateAsync'](LTM_DP_STATUS,{'val':_0x429d9d(0x380),'ack':!![]});return;}const _0x222f8f=JSON['parse'](JSON[_0x429d9d(0x354)](_0x242981[_0x429d9d(0x2a3)])),_0x4aa76f=_0x222f8f[_0x429d9d(0x340)],_0x7a8b53=_0x429d9d(0x229)+JSON['stringify'](_0x222f8f);try{const _0x3a4a81=await _0x242981[_0x429d9d(0x26a)][_0x429d9d(0x365)](_0x7a8b53),_0x14b8fd=JSON[_0x429d9d(0x268)](_0x3a4a81[_0x429d9d(0x21d)][_0x429d9d(0x33f)]()[_0x429d9d(0x281)](/```json|```/g,'')[_0x429d9d(0x2ea)]());_0x14b8fd['summary']&&(_0x242981['dailyDigests'][_0x429d9d(0x394)]({'timestamp':new Date()[_0x429d9d(0x287)](),'eventCount':_0x4aa76f,'summary':_0x14b8fd[_0x429d9d(0x2a4)],'activityLevel':_0x14b8fd['activityLevel'],'systemMode':_0x242981['currentSystemMode']}),await saveDailyDigests(_0x242981),_0x242981[_0x429d9d(0x2a3)]=[],await saveRawEventLog(_0x242981),await _0x242981[_0x429d9d(0x344)](LTM_DP_STATUS,{'val':_0x429d9d(0x2ef)+_0x4aa76f+_0x429d9d(0x2fb),'ack':!![]}),runPythonHealthCheck(_0x242981));}catch(_0x39562b){await _0x242981[_0x429d9d(0x344)](LTM_DP_STATUS,{'val':_0x429d9d(0x220)+_0x39562b[_0x429d9d(0x2db)],'ack':!![]});}}async function sendMorningBriefing(_0x499f23){const _0x32466e=a0_0x4ca298;if(!_0x499f23[_0x32466e(0x26a)])return;_0x499f23['log'][_0x32466e(0x323)](_0x32466e(0x2cd));const _0x5cf490=_0x499f23['dailyDigests'][_0x32466e(0x340)]>0x0?_0x499f23['dailyDigests'][_0x499f23[_0x32466e(0x2e8)][_0x32466e(0x340)]-0x1]:null,_0x4f3075=_0x5cf490&&_0x5cf490[_0x32466e(0x242)]?_0x5cf490[_0x32466e(0x242)][_0x32466e(0x327)]:_0x32466e(0x22c),_0x14e51d=new Date();_0x14e51d[_0x32466e(0x21e)](0x4,0x0,0x0,0x0);const _0xd15e17=_0x499f23[_0x32466e(0x2b9)][_0x32466e(0x33c)](_0x39da90=>new Date(_0x39da90[_0x32466e(0x296)])>_0x14e51d),_0xe06de1=PERSONA_MAPPING[_0x499f23[_0x32466e(0x2aa)][_0x32466e(0x244)]||_0x32466e(0x298)],_0x561e72=_0x499f23[_0x32466e(0x2aa)][_0x32466e(0x312)]||'',_0x36b00f=await getWeatherContext(_0x499f23),_0x86a60=await getCalendarContext(_0x499f23),_0x664548='ROLLE:\x20FÃ¼rsorglicher\x20Assistent.\x20AUFGABE:\x20Schreibe\x20eine\x20kurze,\x20beruhigende\x20\x22Guten\x20Morgen\x22-Nachricht.\x20PERSONA:\x20'+_0xe06de1+'.\x20KONTEXT:\x20'+_0x561e72+_0x32466e(0x2d0)+_0x36b00f+'\x20'+_0x86a60+_0x32466e(0x36e)+_0x4f3075+_0x32466e(0x288)+JSON[_0x32466e(0x354)](_0xd15e17[_0x32466e(0x325)](0x0,0xa))+'.\x20OUTPUT:\x20Nur\x20Text.';try{const _0x34481b=await _0x499f23[_0x32466e(0x26a)][_0x32466e(0x365)](_0x664548),_0x332874='ðŸŒ…\x20Daily\x20Briefing:\x0a'+_0x34481b[_0x32466e(0x21d)][_0x32466e(0x33f)]()['trim']();sendNotification(_0x499f23,_0x332874),_0x499f23[_0x32466e(0x277)][_0x32466e(0x323)](_0x32466e(0x250));}catch(_0x33c9c5){_0x499f23['log']['error'](_0x32466e(0x3bb)+_0x33c9c5[_0x32466e(0x2db)]);}}async function scanForDevices(_0x435be8,_0x1f34cb){const _0x2efd9e=a0_0x4ca298;_0x435be8['log']['info']('Scanning\x20for\x20devices\x20(V8:\x20Whitelist\x20Priority)...');const _0x498601=[],_0x16d6bd=await _0x435be8[_0x2efd9e(0x280)]('*'),_0x1dab1c=await _0x435be8[_0x2efd9e(0x280)](_0x2efd9e(0x37f),_0x2efd9e(0x217)),_0x5ed87c=await _0x435be8[_0x2efd9e(0x280)](_0x2efd9e(0x24d),_0x2efd9e(0x217)),_0x140041={};if(_0x1dab1c)for(const _0x97d598 in _0x1dab1c){const _0x554aa4=_0x1dab1c[_0x97d598][_0x2efd9e(0x3d0)][_0x2efd9e(0x1f3)]||[];_0x554aa4[_0x2efd9e(0x278)](_0x5d857a=>{const _0x284983=_0x2efd9e;if(!_0x140041[_0x5d857a])_0x140041[_0x5d857a]=[];_0x140041[_0x5d857a][_0x284983(0x394)](_0x97d598);});}const _0x397604={};if(_0x5ed87c)for(const _0x56cede in _0x5ed87c){const _0x5742c3=_0x5ed87c[_0x56cede][_0x2efd9e(0x3d0)][_0x2efd9e(0x1f3)]||[],_0x1f8409=typeof _0x5ed87c[_0x56cede][_0x2efd9e(0x3d0)][_0x2efd9e(0x33b)]==='object'?_0x5ed87c[_0x56cede][_0x2efd9e(0x3d0)][_0x2efd9e(0x33b)]['de']:_0x5ed87c[_0x56cede][_0x2efd9e(0x3d0)][_0x2efd9e(0x33b)];_0x5742c3['forEach'](_0x4679c0=>_0x397604[_0x4679c0]=_0x1f8409);}const _0x23ecd6=_0x1f34cb['selectedFunctionIds']||[],_0x3b4a0d=_0x1f34cb[_0x2efd9e(0x234)]!==![],_0x32da91=_0x1f34cb[_0x2efd9e(0x336)]!==![],_0x3c46f5=_0x1f34cb[_0x2efd9e(0x377)]!==![],_0x5c6737=_0x1f34cb['temperature']===!![],_0x3be310=_0x1f34cb[_0x2efd9e(0x1ee)]===!![];for(const _0x4b6f6c in _0x16d6bd){const _0x1b11ed=_0x16d6bd[_0x4b6f6c];if(_0x1b11ed['type']!=='state'||!_0x1b11ed[_0x2efd9e(0x3d0)])continue;if(ADAPTER_BLACKLIST['some'](_0x10ba35=>_0x4b6f6c[_0x2efd9e(0x3b4)](_0x10ba35))&&!_0x3be310)continue;const _0x266bda=(_0x1b11ed[_0x2efd9e(0x3d0)]['role']||'')[_0x2efd9e(0x2b0)]();let _0x23603f=(typeof _0x1b11ed['common'][_0x2efd9e(0x33b)]==='object'?_0x1b11ed[_0x2efd9e(0x3d0)][_0x2efd9e(0x33b)]['de']:_0x1b11ed[_0x2efd9e(0x3d0)]['name'])||_0x4b6f6c;const _0x47242b=_0x23603f[_0x2efd9e(0x2b0)]();let _0x1d5243=![],_0x2e608b=![];if(_0x23ecd6[_0x2efd9e(0x340)]>0x0){const _0x151f73=_0x140041[_0x4b6f6c]||[],_0x56a109=_0x4b6f6c[_0x2efd9e(0x390)]('.')[_0x2efd9e(0x325)](0x0,-0x1)[_0x2efd9e(0x200)]('.'),_0x3d100f=_0x140041[_0x56a109]||[];(_0x151f73[_0x2efd9e(0x382)](_0x87f400=>_0x23ecd6[_0x2efd9e(0x26c)](_0x87f400))||_0x3d100f[_0x2efd9e(0x382)](_0x1d799b=>_0x23ecd6['includes'](_0x1d799b)))&&(_0x1d5243=!![],_0x2e608b=!![]);}if(!_0x1d5243&&!_0x3be310){if(HARD_IGNORE_TERMS[_0x2efd9e(0x382)](_0x21e030=>_0x4b6f6c[_0x2efd9e(0x26c)](_0x21e030)||_0x47242b[_0x2efd9e(0x26c)](_0x21e030[_0x2efd9e(0x2b0)]())))continue;}if(BAD_NAMES[_0x2efd9e(0x382)](_0x88e0aa=>_0x47242b===_0x88e0aa||_0x47242b['endsWith']('.'+_0x88e0aa))){const _0x3cd027=_0x4b6f6c[_0x2efd9e(0x390)]('.');if(_0x3cd027[_0x2efd9e(0x340)]>0x2){const _0x54dec1=_0x3cd027['slice'](0x0,-0x1)[_0x2efd9e(0x200)]('.'),_0x5322ee=_0x16d6bd[_0x54dec1];if(_0x5322ee&&_0x5322ee['common']&&_0x5322ee['common'][_0x2efd9e(0x33b)]){const _0x28d5cb=typeof _0x5322ee['common'][_0x2efd9e(0x33b)]==='object'?_0x5322ee[_0x2efd9e(0x3d0)][_0x2efd9e(0x33b)]['de']:_0x5322ee['common'][_0x2efd9e(0x33b)];_0x28d5cb&&!_0x23603f[_0x2efd9e(0x26c)](_0x28d5cb)&&(_0x23603f=_0x28d5cb+'\x20'+_0x23603f);}}}let _0x45bc51='';if(_0x3b4a0d&&(_0x266bda[_0x2efd9e(0x26c)](_0x2efd9e(0x234))||_0x266bda[_0x2efd9e(0x26c)]('occupancy')||_0x47242b['includes'](_0x2efd9e(0x3b5))||_0x47242b[_0x2efd9e(0x26c)](_0x2efd9e(0x2a2))))_0x45bc51=_0x2efd9e(0x234);else{if(!_0x45bc51&&_0x32da91&&(_0x266bda[_0x2efd9e(0x26c)]('door')||_0x266bda[_0x2efd9e(0x26c)](_0x2efd9e(0x35e))||_0x266bda['includes'](_0x2efd9e(0x32d))||_0x266bda[_0x2efd9e(0x26c)](_0x2efd9e(0x1f2))||_0x266bda[_0x2efd9e(0x26c)](_0x2efd9e(0x2eb))||_0x47242b['includes'](_0x2efd9e(0x30e))||_0x47242b[_0x2efd9e(0x26c)](_0x2efd9e(0x24e))||_0x47242b[_0x2efd9e(0x26c)](_0x2efd9e(0x319))))_0x45bc51=_0x2efd9e(0x284);else{if(!_0x45bc51&&_0x3c46f5&&(_0x266bda[_0x2efd9e(0x26c)](_0x2efd9e(0x3d6))||_0x266bda[_0x2efd9e(0x26c)](_0x2efd9e(0x2d1))||_0x266bda['includes']('dimmer')||_0x47242b['includes']('licht')||_0x47242b[_0x2efd9e(0x26c)](_0x2efd9e(0x36d))||_0x47242b[_0x2efd9e(0x26c)](_0x2efd9e(0x328)))){if(_0x1b11ed[_0x2efd9e(0x3d0)][_0x2efd9e(0x3c6)]||_0x266bda[_0x2efd9e(0x26c)](_0x2efd9e(0x2ad)))_0x45bc51='light';}else{if(!_0x45bc51&&_0x5c6737&&(_0x266bda[_0x2efd9e(0x26c)](_0x2efd9e(0x321))||_0x266bda['includes'](_0x2efd9e(0x324))||_0x266bda['includes'](_0x2efd9e(0x1fb))||_0x47242b[_0x2efd9e(0x26c)](_0x2efd9e(0x294))||_0x47242b[_0x2efd9e(0x26c)](_0x2efd9e(0x310))||_0x47242b[_0x2efd9e(0x26c)](_0x2efd9e(0x29f))))_0x45bc51=_0x2efd9e(0x321);else{if(!_0x45bc51&&_0x2e608b)_0x45bc51=_0x2efd9e(0x3c8);}}}}if(_0x45bc51){let _0x21ad68=_0x397604[_0x4b6f6c]||'';if(!_0x21ad68){let _0x32acc9=_0x4b6f6c;for(let _0x3ac247=0x0;_0x3ac247<0x3;_0x3ac247++){const _0x38d070=_0x32acc9[_0x2efd9e(0x355)]('.');if(_0x38d070===-0x1)break;_0x32acc9=_0x32acc9[_0x2efd9e(0x308)](0x0,_0x38d070);if(_0x397604[_0x32acc9]){_0x21ad68=_0x397604[_0x32acc9];break;}}}_0x498601['push']({'id':_0x4b6f6c,'name':_0x23603f,'location':_0x21ad68,'type':_0x45bc51,'logDuplicates':_0x45bc51===_0x2efd9e(0x234),'isExit':![],'_score':_0x21ad68?0x50:_0x45bc51===_0x2efd9e(0x3c8)?0x5a:0x28});}}return _0x498601[_0x2efd9e(0x30c)]((_0xb0458c,_0x19dcb2)=>_0x19dcb2[_0x2efd9e(0x2da)]-_0xb0458c['_score']),_0x498601;}async function executeAutomationAction(_0x48e720){const _0x37be02=a0_0x4ca298;try{const _0x2f60a7=await _0x48e720[_0x37be02(0x332)](_0x37be02(0x32c)),_0x5da94e=await _0x48e720[_0x37be02(0x332)](_0x37be02(0x2e6));if(_0x2f60a7&&_0x2f60a7['val']&&_0x5da94e){const _0x55d314=_0x2f60a7[_0x37be02(0x31c)];let _0xd95292=_0x5da94e[_0x37be02(0x31c)];try{_0xd95292=JSON['parse'](_0xd95292);}catch(_0x2c589f){}_0x48e720[_0x37be02(0x277)][_0x37be02(0x323)]('ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20'+_0x55d314+'\x20=\x20'+_0xd95292),await _0x48e720['setForeignStateAsync'](_0x55d314,_0xd95292);}else _0x48e720[_0x37be02(0x277)][_0x37be02(0x307)]('ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.');}catch(_0x27da2d){_0x48e720[_0x37be02(0x277)]['error'](_0x37be02(0x1fa)+_0x27da2d[_0x37be02(0x2db)]);}}function tryParse(_0x9c13c0){try{return JSON['parse'](_0x9c13c0);}catch(_0x463837){return null;}}async function recordSequence(_0x459557,_0x413b24){const _0x411f72=a0_0x4ca298,_0x585d9a=(_0x413b24[_0x411f72(0x235)]||'')[_0x411f72(0x2b0)](),_0x342897=[_0x411f72(0x234),_0x411f72(0x284),'window',_0x411f72(0x3b5),_0x411f72(0x2a2),_0x411f72(0x38f),'occupancy',_0x411f72(0x24e),_0x411f72(0x30e),_0x411f72(0x233),_0x411f72(0x2eb),_0x411f72(0x1f2)];if(!_0x342897[_0x411f72(0x382)](_0x3c6b34=>_0x585d9a[_0x411f72(0x26c)](_0x3c6b34))){_0x459557['log'][_0x411f72(0x353)](_0x411f72(0x2c7)+_0x413b24['id']+_0x411f72(0x293)+_0x413b24[_0x411f72(0x235)]+_0x411f72(0x2d3));return;}if(!_0x413b24['value']){_0x459557['log']['debug'](_0x411f72(0x2c7)+_0x413b24['id']+_0x411f72(0x37a)+_0x413b24[_0x411f72(0x3bd)]+')');return;}_0x459557[_0x411f72(0x277)][_0x411f72(0x353)]('[RECORDER\x20DEBUG]\x20Accepting\x20Event\x20'+_0x413b24['id']+'\x20('+_0x413b24[_0x411f72(0x343)]+')');if(sequenceTimer)clearTimeout(sequenceTimer);const _0xc3c8d1={'loc':_0x413b24[_0x411f72(0x343)]||_0x411f72(0x1ff),'id':_0x413b24['id'],'ts':Date['now']()};activeSequence[_0x411f72(0x394)](_0xc3c8d1),_0x459557[_0x411f72(0x277)][_0x411f72(0x353)](_0x411f72(0x240)+_0xc3c8d1[_0x411f72(0x2b6)]+_0x411f72(0x38d)+activeSequence[_0x411f72(0x340)]+')'),sequenceTimer=setTimeout(async()=>{const _0x1bc1e0=_0x411f72;activeSequence[_0x1bc1e0(0x340)]>0x1?await saveCompletedSequence(_0x459557):(_0x459557[_0x1bc1e0(0x277)][_0x1bc1e0(0x353)]('[RECORDER]\x20Discarding\x20short\x20sequence\x20(Length:\x20'+activeSequence[_0x1bc1e0(0x340)]+')'),activeSequence=[]);},SEQUENCE_TIMEOUT_MS);}async function saveCompletedSequence(_0x47b030){const _0x50c212=a0_0x4ca298;try{_0x47b030['log']['info'](_0x50c212(0x2f6)+activeSequence[_0x50c212(0x340)]+_0x50c212(0x1f1));const _0x149858=await _0x47b030[_0x50c212(0x332)](_0x50c212(0x3cf));let _0x5c90bc=[];if(_0x149858&&_0x149858[_0x50c212(0x31c)])try{_0x5c90bc=JSON[_0x50c212(0x268)](_0x149858['val']);}catch(_0x3c8735){}const _0x60d325=activeSequence[0x0]['ts'],_0x574c7a=activeSequence[_0x50c212(0x2b5)](_0x5a1d97=>({'loc':_0x5a1d97[_0x50c212(0x2b6)],'t_delta':Math[_0x50c212(0x29d)]((_0x5a1d97['ts']-_0x60d325)/0x3e8)})),_0x57b91e={'timestamp':new Date(_0x60d325)[_0x50c212(0x287)](),'steps':_0x574c7a,'duration':Math[_0x50c212(0x29d)]((activeSequence[activeSequence[_0x50c212(0x340)]-0x1]['ts']-_0x60d325)/0x3e8),'daytime':new Date(_0x60d325)['getHours']()};_0x5c90bc['push'](_0x57b91e),_0x5c90bc['length']>MAX_TRAINING_SET_SIZE&&_0x5c90bc[_0x50c212(0x302)](),await _0x47b030[_0x50c212(0x344)]('LTM.trainingData.sequences',{'val':JSON[_0x50c212(0x354)](_0x5c90bc),'ack':!![]}),activeSequence=[],sequenceTimer=null;}catch(_0x68f0a4){_0x47b030[_0x50c212(0x277)][_0x50c212(0x300)](_0x50c212(0x3be)+_0x68f0a4[_0x50c212(0x2db)]);}}async function processSensorEvent(_0x26741f,_0xfaa5c6,_0x5a994b,_0x5c1a95){const _0x2aa9de=a0_0x4ca298;if(!_0x5c1a95)return;const _0x3574ab=_0x5a994b[_0x2aa9de(0x31c)],_0x174efc=Date[_0x2aa9de(0x2ce)]();_0x26741f[_0x2aa9de(0x277)][_0x2aa9de(0x353)](_0x2aa9de(0x2fe)+_0xfaa5c6+'\x20=\x20'+_0x3574ab);const _0x6e6ec6=_0x26741f[_0x2aa9de(0x3c0)][_0xfaa5c6];_0x26741f['sensorLastValues'][_0xfaa5c6]=_0x3574ab;if(!_0x5c1a95[_0x2aa9de(0x232)]&&_0x6e6ec6!=undefined&&_0x6e6ec6==_0x3574ab){_0x26741f['log'][_0x2aa9de(0x353)](_0x2aa9de(0x366)+_0x5c1a95[_0x2aa9de(0x33b)]+_0x2aa9de(0x2f3)+_0x3574ab+')');return;}const _0x542ace={'timestamp':_0x174efc,'id':_0xfaa5c6,'name':_0x5c1a95[_0x2aa9de(0x33b)],'type':_0x5c1a95[_0x2aa9de(0x235)],'location':_0x5c1a95['location'],'value':_0x3574ab};_0x26741f[_0x2aa9de(0x2b9)][_0x2aa9de(0x1f4)](_0x542ace);if(_0x26741f[_0x2aa9de(0x2b9)][_0x2aa9de(0x340)]>HISTORY_MAX_SIZE)_0x26741f['eventHistory']['pop']();await _0x26741f[_0x2aa9de(0x344)](_0x2aa9de(0x3af),{'val':JSON[_0x2aa9de(0x354)](_0x542ace),'ack':!![]}),await _0x26741f['setStateAsync']('events.history',{'val':JSON[_0x2aa9de(0x354)](_0x26741f[_0x2aa9de(0x2b9)]),'ack':!![]});_0x26741f['isProVersion']&&(_0x26741f[_0x2aa9de(0x2a3)]['push'](_0x542ace),await saveRawEventLog(_0x26741f),recordSequence(_0x26741f,_0x542ace));if(_0x5c1a95[_0x2aa9de(0x31b)]&&_0x3574ab===!![]){if(_0x26741f[_0x2aa9de(0x2b1)]&&!_0x26741f[_0x2aa9de(0x21a)])_0x26741f[_0x2aa9de(0x277)][_0x2aa9de(0x323)](_0x2aa9de(0x262)+_0x5c1a95[_0x2aa9de(0x33b)]+_0x2aa9de(0x3c7)),startExitTimer(_0x26741f);else!_0x26741f['isPresent']&&(_0x26741f[_0x2aa9de(0x277)][_0x2aa9de(0x323)](_0x2aa9de(0x383)+_0x5c1a95[_0x2aa9de(0x33b)]+_0x2aa9de(0x20b)),await setPresence(_0x26741f,!![]));}else _0x5c1a95[_0x2aa9de(0x235)]===_0x2aa9de(0x234)&&_0x3574ab===!![]&&(_0x26741f['exitTimer']&&(_0x26741f[_0x2aa9de(0x277)][_0x2aa9de(0x323)](_0x2aa9de(0x31a)),abortExitTimer(_0x26741f)),!_0x26741f[_0x2aa9de(0x2b1)]&&_0x26741f['currentSystemMode']===SYSTEM_MODES[_0x2aa9de(0x1e6)]&&await setPresence(_0x26741f,!![]));}async function runGeminiAnalysis(_0x3ef368,_0x2ab736=''){const _0x1f8512=a0_0x4ca298;if(!_0x3ef368[_0x1f8512(0x26a)])return;if(_0x3ef368[_0x1f8512(0x2b9)]['length']===0x0)return;const _0x2ed46a=_0x3ef368[_0x1f8512(0x2b9)][_0x1f8512(0x325)](0x0,0xf),_0x2733b9=await getWeatherContext(_0x3ef368),_0x26f5de=_0x3ef368[_0x1f8512(0x2d4)],_0x472035=PERSONA_MAPPING[_0x3ef368[_0x1f8512(0x2aa)]['aiPersona']||_0x1f8512(0x298)],_0x507b0f=_0x3ef368[_0x1f8512(0x2aa)][_0x1f8512(0x312)]||_0x1f8512(0x304);let _0x221307=![];try{const _0x1a8c6a=await _0x3ef368['getStateAsync']('analysis.automation.autoApply');if(_0x1a8c6a&&_0x1a8c6a[_0x1f8512(0x31c)])_0x221307=!![];}catch(_0x570da9){}const _0xb9177d='\x0a\x20\x20\x20\x20ROLLE:\x20KI-Hausverwalter\x20&\x20Gesundheits-Assistent.\x0a\x20\x20\x20\x20PERSONA:\x20'+_0x472035+_0x1f8512(0x2ec)+_0x507b0f+_0x1f8512(0x36c)+_0x26f5de+_0x1f8512(0x3a3)+_0x2733b9+'.\x0a\x20\x20\x20\x20NOTFALL-KONTEXT:\x20'+(_0x2ab736||_0x1f8512(0x292))+_0x1f8512(0x208)+JSON[_0x1f8512(0x354)](_0x2ed46a)+_0x1f8512(0x33e);try{const _0x1d823c=await _0x3ef368[_0x1f8512(0x26a)]['generateContent'](_0xb9177d),_0x1d20d5=_0x1d823c[_0x1f8512(0x21d)][_0x1f8512(0x33f)]()[_0x1f8512(0x281)](/```json|```/g,'')['trim'](),_0xd6b553=JSON[_0x1f8512(0x268)](_0x1d20d5);await _0x3ef368[_0x1f8512(0x344)](_0x1f8512(0x37c),{'val':JSON[_0x1f8512(0x354)](_0xd6b553),'ack':!![]});_0xd6b553[_0x1f8512(0x2a4)]&&await _0x3ef368[_0x1f8512(0x344)]('analysis.activitySummary',{'val':_0xd6b553[_0x1f8512(0x2a4)],'ack':!![]});const _0x3963f8={'timestamp':Date[_0x1f8512(0x2ce)](),'id':Date['now']()[_0x1f8512(0x3a7)](),'analysis':{'activity':{'summary':_0xd6b553['summary']||_0x1f8512(0x360),'isAlert':_0xd6b553[_0x1f8512(0x28e)]||![],'alertReason':_0xd6b553[_0x1f8512(0x252)]},'comfort':{'automationProposal':_0xd6b553['automationProposal']}}};await updateAnalysisHistory(_0x3ef368,_0x3963f8);const _0x473141=_0xd6b553[_0x1f8512(0x28e)]||![];_0x473141!==_0x3ef368[_0x1f8512(0x37d)]&&(await _0x3ef368[_0x1f8512(0x344)]('analysis.isAlert',{'val':_0x473141,'ack':!![]}),_0x3ef368['lastAlertState']=_0x473141,_0x473141&&(await _0x3ef368[_0x1f8512(0x344)](_0x1f8512(0x31f),{'val':_0xd6b553['alertReason'],'ack':!![]}),sendNotification(_0x3ef368,_0x1f8512(0x30b)+_0xd6b553[_0x1f8512(0x252)],![],_0xd6b553[_0x1f8512(0x378)]))),_0xd6b553[_0x1f8512(0x22a)]&&_0xd6b553[_0x1f8512(0x22a)][_0x1f8512(0x2f5)]&&_0xd6b553[_0x1f8512(0x22a)][_0x1f8512(0x396)]&&(_0x3ef368[_0x1f8512(0x277)][_0x1f8512(0x323)]('ðŸ¤–\x20BUTLER\x20PROPOSAL:\x20'+_0xd6b553['automationProposal'][_0x1f8512(0x2ff)]),await _0x3ef368[_0x1f8512(0x344)](_0x1f8512(0x361),{'val':!![],'ack':!![]}),await _0x3ef368[_0x1f8512(0x344)](_0x1f8512(0x2a1),{'val':_0xd6b553[_0x1f8512(0x22a)][_0x1f8512(0x2ff)],'ack':!![]}),await _0x3ef368[_0x1f8512(0x344)](_0x1f8512(0x32c),{'val':_0xd6b553[_0x1f8512(0x22a)][_0x1f8512(0x396)],'ack':!![]}),await _0x3ef368[_0x1f8512(0x344)](_0x1f8512(0x2e6),{'val':JSON[_0x1f8512(0x354)](_0xd6b553[_0x1f8512(0x22a)][_0x1f8512(0x21b)]),'ack':!![]}),_0x221307&&(_0x3ef368[_0x1f8512(0x277)]['info']('ðŸ¤–\x20BUTLER\x20AUTO-APPLY:\x20Executing\x20'+_0xd6b553[_0x1f8512(0x22a)][_0x1f8512(0x396)]+'...'),await executeAutomationAction(_0x3ef368)));}catch(_0x57cfcf){_0x3ef368[_0x1f8512(0x277)][_0x1f8512(0x300)]('Gemini\x20Analysis\x20Error:\x20'+_0x57cfcf[_0x1f8512(0x2db)]);}}function installPythonDependencies(_0xf9b531){const _0x112373=a0_0x4ca298;if(_0xf9b531['dependencyInstallInProgress'])return;_0xf9b531[_0x112373(0x3cd)]=!![];const _0x35c192=path[_0x112373(0x200)](__dirname,_0x112373(0x219),_0x112373(0x2fd));_0xf9b531['log'][_0x112373(0x323)](_0x112373(0x3ac)+_0x35c192+'...'),stopPythonService(_0xf9b531);const _0x141895=_0x112373(0x371)+_0x35c192+_0x112373(0x326);exec(_0x141895,(_0x3b3b9e,_0x457e2d,_0x1145fe)=>{const _0x37fcba=_0x112373;_0xf9b531['dependencyInstallInProgress']=![],_0x3b3b9e?(_0xf9b531[_0x37fcba(0x277)][_0x37fcba(0x300)](_0x37fcba(0x35c)+_0x141895),_0xf9b531[_0x37fcba(0x277)][_0x37fcba(0x300)](_0x37fcba(0x32a)+(_0x1145fe||_0x3b3b9e['message']))):(_0xf9b531[_0x37fcba(0x277)][_0x37fcba(0x323)](_0x37fcba(0x346)),startPythonService(_0xf9b531));});}function sendToPython(_0x25d2c2,_0x4cee5c,_0x3d0b4e={}){const _0x25c73c=a0_0x4ca298;if(!_0x25d2c2['pythonProcess']||!_0x25d2c2[_0x25c73c(0x20c)][_0x25c73c(0x20e)][_0x25c73c(0x215)])return;const _0x53d4b6=JSON[_0x25c73c(0x354)]({'command':_0x4cee5c,..._0x3d0b4e});try{_0x25d2c2[_0x25c73c(0x20c)][_0x25c73c(0x20e)][_0x25c73c(0x3c6)](_0x53d4b6+'\x0a');}catch(_0x4f6060){_0x25d2c2[_0x25c73c(0x277)][_0x25c73c(0x300)]('Failed\x20to\x20send\x20to\x20Python:\x20'+_0x4f6060['message']);}}function runPythonHealthCheck(_0x2ff116){const _0x47aafd=a0_0x4ca298;if(!_0x2ff116[_0x47aafd(0x2e8)]||_0x2ff116[_0x47aafd(0x2e8)][_0x47aafd(0x340)]<0x2){_0x2ff116[_0x47aafd(0x277)][_0x47aafd(0x323)]('Guardian:\x20Not\x20enough\x20history\x20data\x20for\x20trend\x20analysis\x20yet.');return;}const _0x5ab645=_0x2ff116[_0x47aafd(0x2e8)][_0x47aafd(0x2b5)](_0x1370d7=>{const _0x1db501=_0x47aafd,_0xeb0bf0=(_0x1370d7[_0x1db501(0x206)]||'')['toLowerCase']();return ACTIVITY_LEVEL_MAP[_0xeb0bf0]||0x32;});_0x2ff116[_0x47aafd(0x277)][_0x47aafd(0x323)]('Guardian:\x20Sending\x20'+_0x5ab645['length']+_0x47aafd(0x374)),sendToPython(_0x2ff116,'ANALYZE_TREND',{'values':_0x5ab645,'tag':_0x47aafd(0x205)});}function handlePythonResult(_0x188d55,_0x2cb5d0){const _0x3b2638=a0_0x4ca298;if(_0x2cb5d0['type']==='PONG')_0x188d55[_0x3b2638(0x277)]['debug'](_0x3b2638(0x348));else{if(_0x2cb5d0[_0x3b2638(0x235)]==='TREND_RESULT'){const {tag:_0x507aca,diagnosis:_0x41fbbc,change_percent:_0xb54483}=_0x2cb5d0['payload'];_0x188d55[_0x3b2638(0x277)]['info'](_0x3b2638(0x379)+_0x507aca+'):\x20'+_0x41fbbc+'\x20('+_0xb54483+'%)'),_0x188d55['setStateAsync'](_0x3b2638(0x35b),{'val':_0x41fbbc,'ack':!![]}),_0x188d55[_0x3b2638(0x344)](_0x3b2638(0x397),{'val':_0xb54483,'ack':!![]});}}}function startPythonService(_0x4d2bd5){const _0x359ce1=a0_0x4ca298;try{const _0x347d23=path[_0x359ce1(0x200)](__dirname,_0x359ce1(0x219),_0x359ce1(0x247));_0x4d2bd5[_0x359ce1(0x277)][_0x359ce1(0x323)](_0x359ce1(0x2be)+_0x347d23),_0x4d2bd5[_0x359ce1(0x20c)]=spawn(_0x359ce1(0x368),[_0x347d23]),_0x4d2bd5['pythonProcess'][_0x359ce1(0x290)]['on']('data',_0x16de0b=>{const _0x1b29cf=_0x359ce1,_0x30ce90=_0x16de0b['toString']()[_0x1b29cf(0x390)]('\x0a');_0x30ce90[_0x1b29cf(0x278)](_0x44fda7=>{const _0x3f0951=_0x1b29cf,_0x4ac20e=_0x44fda7[_0x3f0951(0x2ea)]();if(!_0x4ac20e)return;if(_0x4ac20e[_0x3f0951(0x3b4)](_0x3f0951(0x29b)))_0x4d2bd5[_0x3f0951(0x277)][_0x3f0951(0x353)](_0x3f0951(0x21c)+_0x4ac20e['substring'](0x5)[_0x3f0951(0x2ea)]());else{if(_0x4ac20e[_0x3f0951(0x3b4)](_0x3f0951(0x2f8)))try{const _0x9319cc=JSON['parse'](_0x4ac20e['substring'](0x8)[_0x3f0951(0x2ea)]());handlePythonResult(_0x4d2bd5,_0x9319cc);}catch(_0x3beda7){_0x4d2bd5[_0x3f0951(0x277)][_0x3f0951(0x307)](_0x3f0951(0x309)+_0x4ac20e);}}(_0x4ac20e[_0x3f0951(0x26c)](_0x3f0951(0x3a2))||_0x4ac20e['includes'](_0x3f0951(0x39e)))&&(_0x4d2bd5[_0x3f0951(0x277)][_0x3f0951(0x307)](_0x3f0951(0x1ea)),installPythonDependencies(_0x4d2bd5));});}),_0x4d2bd5[_0x359ce1(0x20c)][_0x359ce1(0x341)]['on']('data',_0x97ddf8=>{const _0x36e4c1=_0x359ce1,_0x4f5994=_0x97ddf8[_0x36e4c1(0x3a7)]()['trim']();_0x4d2bd5['log']['error']('[PYTHON\x20ERR]\x20'+_0x4f5994);}),_0x4d2bd5[_0x359ce1(0x20c)]['on'](_0x359ce1(0x26b),_0x28f77c=>{const _0x4cfb23=_0x359ce1;_0x4d2bd5['log'][_0x4cfb23(0x323)](_0x4cfb23(0x1e8)+_0x28f77c),_0x4d2bd5[_0x4cfb23(0x20c)]=null;}),_0x4d2bd5[_0x359ce1(0x20c)]['on'](_0x359ce1(0x300),_0x3de970=>{const _0x28591e=_0x359ce1;_0x4d2bd5['log']['warn']('[PYTHON]\x20Failed\x20to\x20start\x20(is\x20python3\x20installed?):\x20'+_0x3de970[_0x28591e(0x2db)]);});}catch(_0x555bd5){_0x4d2bd5[_0x359ce1(0x277)]['error'](_0x359ce1(0x318)+_0x555bd5['message']);}}function stopPythonService(_0x4de662){const _0x310474=a0_0x4ca298;if(_0x4de662['pythonProcess']){_0x4de662[_0x310474(0x277)]['info'](_0x310474(0x3c5));try{_0x4de662['pythonProcess'][_0x310474(0x207)]();}catch(_0xd2f219){_0x4de662['log'][_0x310474(0x307)](_0x310474(0x37e)+_0xd2f219[_0x310474(0x2db)]);}_0x4de662[_0x310474(0x20c)]=null;}}class CogniLiving extends utils[a0_0x4ca298(0x25d)]{constructor(_0x3e0f40){const _0x1947e1=a0_0x4ca298;super({..._0x3e0f40,'name':_0x1947e1(0x301)}),this[_0x1947e1(0x2b9)]=[],this[_0x1947e1(0x1e4)]=[],this[_0x1947e1(0x367)]=[],this[_0x1947e1(0x2a3)]=[],this[_0x1947e1(0x2e8)]=[],this[_0x1947e1(0x3c0)]={},this[_0x1947e1(0x20d)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x1947e1(0x2b1)]=!![],this['exitTimer']=null,this[_0x1947e1(0x23a)]=null,this['isGracePeriodActive']=![],this[_0x1947e1(0x39a)]=null,this[_0x1947e1(0x26a)]=null,this[_0x1947e1(0x2d4)]=SYSTEM_MODES['NORMAL'],this[_0x1947e1(0x393)]=![],this['lastAlertState']=![],this[_0x1947e1(0x2af)]=_0x1947e1(0x2bb),this['analysisTimer']=null,this[_0x1947e1(0x34e)]=null,this['modeResetJob']=null,this[_0x1947e1(0x3aa)]=null,this[_0x1947e1(0x254)]=null,this[_0x1947e1(0x20c)]=null,this['dependencyInstallInProgress']=![],this['on'](_0x1947e1(0x2dc),this[_0x1947e1(0x2e4)][_0x1947e1(0x2b4)](this)),this['on'](_0x1947e1(0x3cc),this[_0x1947e1(0x238)]['bind'](this)),this['on'](_0x1947e1(0x272),this['onUnload']['bind'](this)),this['on'](_0x1947e1(0x2db),this[_0x1947e1(0x2cf)]['bind'](this));}async[a0_0x4ca298(0x2e4)](){const _0x35d3f9=a0_0x4ca298;this[_0x35d3f9(0x277)][_0x35d3f9(0x323)](_0x35d3f9(0x2e3)+this[_0x35d3f9(0x2de)]+')\x20-\x20FUNCTIONS\x20FIRST\x20ARCHITECTURE'),await initZombies(this),this[_0x35d3f9(0x2aa)][_0x35d3f9(0x3d5)]=this['config']['licenseKey']||'';try{this[_0x35d3f9(0x393)]=await checkLicense(this,this[_0x35d3f9(0x2aa)][_0x35d3f9(0x3d5)]);}catch(_0x47c5f9){}this[_0x35d3f9(0x277)][_0x35d3f9(0x323)](_0x35d3f9(0x255)+!!this[_0x35d3f9(0x2aa)]['licenseKey']+_0x35d3f9(0x1ec)+(this[_0x35d3f9(0x393)]?_0x35d3f9(0x3d1):_0x35d3f9(0x316)));if(!this[_0x35d3f9(0x2aa)][_0x35d3f9(0x2bd)]||this['config'][_0x35d3f9(0x2bd)]<0.1)this[_0x35d3f9(0x2aa)][_0x35d3f9(0x2bd)]=0xc;await initHistory(this),await initSystemConfig(this);if(this[_0x35d3f9(0x2aa)]['geminiApiKey'])try{this[_0x35d3f9(0x39a)]=new GoogleGenerativeAI(this['config'][_0x35d3f9(0x3ae)]),this['geminiModel']=this['genAI'][_0x35d3f9(0x251)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':'application/json'}}),this['log']['info']('Gemini\x20AI\x20initialized.');}catch(_0x663289){this[_0x35d3f9(0x277)][_0x35d3f9(0x300)](_0x35d3f9(0x1f7)+_0x663289[_0x35d3f9(0x2db)]);}await createAllObjects(this),await loadSystemMode(this),await loadRawEventLog(this),await loadDailyDigests(this),this[_0x35d3f9(0x386)](_0x35d3f9(0x38a)),this[_0x35d3f9(0x386)](LTM_DP_TRIGGER_DIGEST),this[_0x35d3f9(0x386)]('system.mode'),this[_0x35d3f9(0x386)](_0x35d3f9(0x212)),this[_0x35d3f9(0x386)]('analysis.automation.triggerAction'),this[_0x35d3f9(0x386)](_0x35d3f9(0x369)),await initSensorSubscriptions(this),await initPresenceSubscriptions(this),await setupTelegramListener(this),setTimeout(()=>checkWifiPresence(this),0x1388);if(this[_0x35d3f9(0x3c4)])clearInterval(this['analysisTimer']);const _0x5cad11=this[_0x35d3f9(0x2aa)]['analysisInterval']||0xf;_0x5cad11>0x0&&(this[_0x35d3f9(0x277)][_0x35d3f9(0x323)]('Starting\x20Autopilot\x20('+_0x5cad11+'\x20min).'),this[_0x35d3f9(0x3c4)]=setInterval(()=>{runAutopilot(this);},_0x5cad11*0x3c*0x3e8)),setupLtmScheduler(this),setupModeResetScheduler(this),setupDriftAnalysisScheduler(this),setupBriefingScheduler(this),startPythonService(this),setTimeout(()=>{this['pythonProcess']&&runPythonHealthCheck(this);},0x1388);}[a0_0x4ca298(0x20a)](_0x3ec017){const _0x4fd7cf=a0_0x4ca298;if(this['analysisTimer'])clearInterval(this[_0x4fd7cf(0x3c4)]);if(this[_0x4fd7cf(0x3aa)])clearInterval(this[_0x4fd7cf(0x3aa)]);if(this[_0x4fd7cf(0x34e)])this[_0x4fd7cf(0x34e)]['cancel']();if(this[_0x4fd7cf(0x39b)])this[_0x4fd7cf(0x39b)]['cancel']();if(this[_0x4fd7cf(0x254)])this[_0x4fd7cf(0x254)][_0x4fd7cf(0x2b2)]();if(this['exitTimer'])clearTimeout(this[_0x4fd7cf(0x35d)]);if(this[_0x4fd7cf(0x23a)])clearTimeout(this[_0x4fd7cf(0x23a)]);stopPythonService(this),_0x3ec017();}async['onStateChange'](_0x5e8f12,_0x2caae5){const _0x2eaf12=a0_0x4ca298;if(!_0x2caae5)return;if(_0x5e8f12[_0x2eaf12(0x26c)](_0x2eaf12(0x3bc))&&_0x5e8f12['endsWith'](_0x2eaf12(0x28f))&&_0x2caae5[_0x2eaf12(0x31c)]){await handleTelegramResponse(this,_0x2caae5[_0x2eaf12(0x31c)]);return;}if(_0x5e8f12===this[_0x2eaf12(0x2e0)]+'.'+SYSTEM_DP_MODE){_0x2caae5[_0x2eaf12(0x31c)]&&Object[_0x2eaf12(0x3b1)](SYSTEM_MODES)['includes'](_0x2caae5[_0x2eaf12(0x31c)])&&(this[_0x2eaf12(0x2d4)]=_0x2caae5[_0x2eaf12(0x31c)],_0x2caae5[_0x2eaf12(0x31c)]===SYSTEM_MODES[_0x2eaf12(0x25a)]?await setPresence(this,![]):await setPresence(this,!![]));if(!_0x2caae5[_0x2eaf12(0x202)])this[_0x2eaf12(0x2d2)](_0x5e8f12,{'val':this[_0x2eaf12(0x2d4)],'ack':!![]});return;}if(!_0x2caae5[_0x2eaf12(0x202)]){_0x5e8f12['includes']('analysis.trigger')&&_0x2caae5['val']&&(this[_0x2eaf12(0x2d2)](_0x5e8f12,{'val':![],'ack':!![]}),runGeminiAnalysis(this));if(_0x5e8f12['includes'](_0x2eaf12(0x1fe))&&_0x2caae5[_0x2eaf12(0x31c)]){this[_0x2eaf12(0x2d2)](_0x5e8f12,{'val':![],'ack':!![]});if(this[_0x2eaf12(0x393)])createDailyDigest(this);}_0x5e8f12[_0x2eaf12(0x26c)](_0x2eaf12(0x263))&&_0x2caae5[_0x2eaf12(0x31c)]&&(this[_0x2eaf12(0x2d2)](_0x5e8f12,{'val':![],'ack':!![]}),sendMorningBriefing(this));_0x5e8f12['includes'](_0x2eaf12(0x285))&&_0x2caae5['val']&&(this[_0x2eaf12(0x2d2)](_0x5e8f12,{'val':![],'ack':!![]}),executeAutomationAction(this));return;}if(this[_0x2eaf12(0x2aa)][_0x2eaf12(0x3cb)]&&this[_0x2eaf12(0x2aa)][_0x2eaf12(0x3cb)]['includes'](_0x5e8f12)){await checkWifiPresence(this);return;}const _0x3c5ddd=(this[_0x2eaf12(0x2aa)][_0x2eaf12(0x23e)]||[])[_0x2eaf12(0x30a)](_0xd1f412=>_0xd1f412['id']===_0x5e8f12);if(_0x3c5ddd)processSensorEvent(this,_0x5e8f12,_0x2caae5,_0x3c5ddd);}async['onMessage'](_0x1ea686){const _0x1f80d9=a0_0x4ca298;if(typeof _0x1ea686===_0x1f80d9(0x226)&&_0x1ea686[_0x1f80d9(0x2db)])try{if(_0x1ea686[_0x1f80d9(0x2c0)]===_0x1f80d9(0x270)){const _0x1b1ffe=_0x1ea686[_0x1f80d9(0x2db)]['apiKey']||this[_0x1f80d9(0x2aa)][_0x1f80d9(0x3ae)];if(!_0x1b1ffe)return this['sendTo'](_0x1ea686['from'],_0x1ea686[_0x1f80d9(0x2c0)],{'success':![],'message':_0x1f80d9(0x3a8)},_0x1ea686[_0x1f80d9(0x359)]);try{const _0x44e7be=new GoogleGenerativeAI(_0x1b1ffe),_0x146ef7=_0x44e7be[_0x1f80d9(0x251)]({'model':GEMINI_MODEL}),_0x2850f5=await _0x146ef7[_0x1f80d9(0x365)]('Say\x20Hello'),_0x41d5fe=await _0x2850f5[_0x1f80d9(0x21d)],_0x3d54ba=_0x41d5fe[_0x1f80d9(0x33f)]();this[_0x1f80d9(0x2ca)](_0x1ea686[_0x1f80d9(0x306)],_0x1ea686['command'],{'success':!![],'message':'Verbindung\x20erfolgreich!\x20Antwort:\x20'+_0x3d54ba[_0x1f80d9(0x308)](0x0,0x14)+_0x1f80d9(0x30f)},_0x1ea686['callback']);}catch(_0x54cc1a){this[_0x1f80d9(0x2ca)](_0x1ea686[_0x1f80d9(0x306)],_0x1ea686[_0x1f80d9(0x2c0)],{'success':![],'message':'Fehler:\x20'+_0x54cc1a['message']},_0x1ea686[_0x1f80d9(0x359)]);}}else{if(_0x1ea686[_0x1f80d9(0x2c0)]===_0x1f80d9(0x314)){}else{if(_0x1ea686[_0x1f80d9(0x2c0)]===_0x1f80d9(0x2d7)){if(!this[_0x1f80d9(0x393)])return this['sendTo'](_0x1ea686[_0x1f80d9(0x306)],_0x1ea686[_0x1f80d9(0x2c0)],{'success':![],'isPro':![]},_0x1ea686['callback']);let _0x19753c={'status':_0x1f80d9(0x22c),'details':'','lastCheck':0x0};try{_0x19753c[_0x1f80d9(0x258)]=(await this[_0x1f80d9(0x332)](LTM_DP_DRIFT_STATUS))[_0x1f80d9(0x31c)],_0x19753c['details']=(await this[_0x1f80d9(0x332)](LTM_DP_DRIFT_DETAILS))[_0x1f80d9(0x31c)],_0x19753c['lastCheck']=(await this['getStateAsync'](LTM_DP_DRIFT_LAST_CHECK))[_0x1f80d9(0x31c)];}catch(_0x3d3aeb){}const _0x396c0e=this['analysisHistory']||[];this[_0x1f80d9(0x2ca)](_0x1ea686['from'],_0x1ea686[_0x1f80d9(0x2c0)],{'success':!![],'isPro':!![],'dailyDigests':this[_0x1f80d9(0x2e8)],'driftAnalysis':_0x19753c,'analysisHistory':_0x396c0e},_0x1ea686[_0x1f80d9(0x359)]);}else{if(_0x1ea686['command']===_0x1f80d9(0x335)){const _0x44fbfe=this[_0x1f80d9(0x2e8)]['length'],_0x3fe5a6=new Date(),_0x19bbbe=new Date(_0x3fe5a6[_0x1f80d9(0x34a)](),_0x3fe5a6[_0x1f80d9(0x1f5)](),_0x3fe5a6[_0x1f80d9(0x1f8)]())[_0x1f80d9(0x2e2)](),_0x1f4612=this[_0x1f80d9(0x2a3)]['filter'](_0x5352a9=>new Date(_0x5352a9['timestamp'])[_0x1f80d9(0x2e2)]()>_0x19bbbe)[_0x1f80d9(0x340)],_0x23f213=new Array(0x18)['fill'](0x0);this[_0x1f80d9(0x2a3)][_0x1f80d9(0x278)](_0x43d448=>{const _0x1404fc=_0x1f80d9,_0xa175fd=new Date(_0x43d448['timestamp']);if(_0xa175fd['getTime']()>_0x19bbbe)_0x23f213[_0xa175fd[_0x1404fc(0x2c5)]()]++;});let _0x4d6894={'status':_0x1f80d9(0x22c)};try{_0x4d6894[_0x1f80d9(0x258)]=(await this[_0x1f80d9(0x332)](LTM_DP_DRIFT_STATUS))[_0x1f80d9(0x31c)];}catch(_0x4f5191){}let _0x5028c0='';try{const _0x480be9=await this[_0x1f80d9(0x332)]('system.presenceWho');_0x5028c0=_0x480be9?_0x480be9[_0x1f80d9(0x31c)]:'';}catch(_0x47f95a){}let _0x24d785=null;!this[_0x1f80d9(0x26a)]&&(_0x24d785=this[_0x1f80d9(0x2aa)]['geminiApiKey']?_0x1f80d9(0x28c):'Kein\x20API\x20Key!');let _0x14c265={'detected':![],'description':'','targetId':'','targetValue':'','autoApply':![]};try{const _0x2042b2=await this[_0x1f80d9(0x332)](_0x1f80d9(0x361)),_0x493117=await this['getStateAsync'](_0x1f80d9(0x2a1)),_0x228fb2=await this[_0x1f80d9(0x332)](_0x1f80d9(0x32c)),_0x5649c0=await this[_0x1f80d9(0x332)](_0x1f80d9(0x2e6)),_0x1ff3b5=await this[_0x1f80d9(0x332)](_0x1f80d9(0x369));_0x2042b2&&_0x2042b2[_0x1f80d9(0x31c)]&&(_0x14c265[_0x1f80d9(0x2f5)]=!![],_0x14c265[_0x1f80d9(0x2ff)]=_0x493117?_0x493117[_0x1f80d9(0x31c)]:'',_0x14c265['targetId']=_0x228fb2?_0x228fb2[_0x1f80d9(0x31c)]:'',_0x14c265[_0x1f80d9(0x21b)]=_0x5649c0?_0x5649c0[_0x1f80d9(0x31c)]:''),_0x14c265[_0x1f80d9(0x2e1)]=_0x1ff3b5?!!_0x1ff3b5['val']:![];}catch(_0x5abcdc){}this['sendTo'](_0x1ea686['from'],_0x1ea686[_0x1f80d9(0x2c0)],{'success':!![],'eventHistory':this['eventHistory'][_0x1f80d9(0x325)](0x0,0xf),'stats':{'digestCount':_0x44fbfe,'eventCountToday':_0x1f4612,'hourlyActivity':_0x23f213,'driftStatus':_0x4d6894['status'],'isPresent':this[_0x1f80d9(0x2b1)],'presenceWho':_0x5028c0,'minDays':this[_0x1f80d9(0x2aa)]['minDaysForBaseline']||0x7,'stbDays':this[_0x1f80d9(0x2aa)][_0x1f80d9(0x37b)]||0xe,'ltbDays':this[_0x1f80d9(0x2aa)]['ltmLtbWindowDays']||0x3c,'systemError':_0x24d785},'automation':_0x14c265},_0x1ea686['callback']);}else{if(_0x1ea686[_0x1f80d9(0x2c0)]==='getEnums'){const _0x3edf6d=await this[_0x1f80d9(0x280)](_0x1f80d9(0x37f),_0x1f80d9(0x217)),_0x5c7a1d=[];if(_0x3edf6d)for(const _0x1e41fd in _0x3edf6d){const _0x525335=_0x3edf6d[_0x1e41fd],_0x12760c=(_0x525335[_0x1f80d9(0x3d0)]&&typeof _0x525335[_0x1f80d9(0x3d0)][_0x1f80d9(0x33b)]===_0x1f80d9(0x226)?_0x525335[_0x1f80d9(0x3d0)][_0x1f80d9(0x33b)]['de']:_0x525335[_0x1f80d9(0x3d0)][_0x1f80d9(0x33b)])||_0x525335[_0x1f80d9(0x3d0)][_0x1f80d9(0x33b)];_0x5c7a1d[_0x1f80d9(0x394)]({'id':_0x1e41fd,'name':_0x12760c});}this[_0x1f80d9(0x2ca)](_0x1ea686[_0x1f80d9(0x306)],_0x1ea686['command'],{'success':!![],'enums':_0x5c7a1d},_0x1ea686['callback']);}else{if(_0x1ea686[_0x1f80d9(0x2c0)]===_0x1f80d9(0x34c))try{const _0x58fec2=await scanForDevices(this,_0x1ea686['message']||{});this[_0x1f80d9(0x2ca)](_0x1ea686[_0x1f80d9(0x306)],_0x1ea686[_0x1f80d9(0x2c0)],{'success':!![],'devices':_0x58fec2},_0x1ea686[_0x1f80d9(0x359)]);}catch(_0x2df8d3){this[_0x1f80d9(0x2ca)](_0x1ea686[_0x1f80d9(0x306)],_0x1ea686[_0x1f80d9(0x2c0)],{'success':![],'error':_0x2df8d3['message']},_0x1ea686[_0x1f80d9(0x359)]);}else{if(_0x1ea686[_0x1f80d9(0x2c0)]===_0x1f80d9(0x257)){const _0x5a106f=_0x1ea686[_0x1f80d9(0x2db)][_0x1f80d9(0x38c)];if(!_0x5a106f)return this[_0x1f80d9(0x2ca)](_0x1ea686['from'],_0x1ea686['command'],{'success':![],'error':_0x1f80d9(0x27a)},_0x1ea686['callback']);const _0x12ec9f=await getCalendarNames(this,_0x5a106f);this[_0x1f80d9(0x2ca)](_0x1ea686[_0x1f80d9(0x306)],_0x1ea686[_0x1f80d9(0x2c0)],{'success':!![],'names':_0x12ec9f},_0x1ea686['callback']);}else{if(_0x1ea686['command']===_0x1f80d9(0x1f6)){const {targetId:_0x127fae,targetValue:_0x1596ba}=_0x1ea686[_0x1f80d9(0x2db)];this['log'][_0x1f80d9(0x323)](_0x1f80d9(0x3a6)+_0x127fae+_0x1f80d9(0x20f)+_0x1596ba),await this[_0x1f80d9(0x344)](_0x1f80d9(0x361),{'val':!![],'ack':!![]}),await this['setStateAsync'](_0x1f80d9(0x2a1),{'val':_0x1f80d9(0x2ab)+_0x127fae,'ack':!![]}),await this[_0x1f80d9(0x344)](_0x1f80d9(0x32c),{'val':_0x127fae,'ack':!![]}),await this[_0x1f80d9(0x344)]('analysis.automation.targetValue',{'val':_0x1596ba,'ack':!![]}),this[_0x1f80d9(0x2ca)](_0x1ea686[_0x1f80d9(0x306)],_0x1ea686[_0x1f80d9(0x2c0)],{'success':!![]},_0x1ea686[_0x1f80d9(0x359)]);}else{if(_0x1ea686['command']===_0x1f80d9(0x23f)){const {historyId:_0x3aec4a,rating:_0x2bb46d,comment:_0x3a9c60,alertReason:_0x573b73}=_0x1ea686[_0x1f80d9(0x2db)];_0x3aec4a&&_0x2bb46d?(await saveFeedback(this,{'timestamp':Date[_0x1f80d9(0x2ce)](),'historyId':_0x3aec4a,'rating':_0x2bb46d,'comment':_0x3a9c60,'alertReason':_0x573b73}),this['sendTo'](_0x1ea686['from'],_0x1ea686[_0x1f80d9(0x2c0)],{'success':!![]},_0x1ea686[_0x1f80d9(0x359)])):this['sendTo'](_0x1ea686[_0x1f80d9(0x306)],_0x1ea686[_0x1f80d9(0x2c0)],{'success':![],'error':_0x1f80d9(0x333)},_0x1ea686[_0x1f80d9(0x359)]);}else _0x1ea686['command']==='dismissAutomation'&&(this[_0x1f80d9(0x277)]['info'](_0x1f80d9(0x2ba)),await this[_0x1f80d9(0x344)](_0x1f80d9(0x361),{'val':![],'ack':!![]}),await this[_0x1f80d9(0x344)](_0x1f80d9(0x2a1),{'val':'','ack':!![]}),this[_0x1f80d9(0x2ca)](_0x1ea686[_0x1f80d9(0x306)],_0x1ea686['command'],{'success':!![]},_0x1ea686[_0x1f80d9(0x359)]));}}}}}}}}}catch(_0x5d7891){this['log'][_0x1f80d9(0x300)]('Error\x20in\x20onMessage\x20command\x20'+_0x1ea686[_0x1f80d9(0x2c0)]+':\x20'+_0x5d7891['message']);if(_0x1ea686[_0x1f80d9(0x359)])this[_0x1f80d9(0x2ca)](_0x1ea686[_0x1f80d9(0x306)],_0x1ea686[_0x1f80d9(0x2c0)],{'success':![],'error':_0x5d7891[_0x1f80d9(0x2db)]},_0x1ea686[_0x1f80d9(0x359)]);}}}if(require[a0_0x4ca298(0x384)]!==module)module[a0_0x4ca298(0x27f)]=_0x47ebca=>new CogniLiving(_0x47ebca);else new CogniLiving();