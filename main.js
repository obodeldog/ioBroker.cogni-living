const a0_0x5651d4=a0_0x5323;(function(_0x588668,_0x15d80e){const _0x35f092=a0_0x5323,_0x4fb35a=_0x588668();while(!![]){try{const _0x5d24a6=parseInt(_0x35f092(0x2a2))/0x1+-parseInt(_0x35f092(0x2de))/0x2+parseInt(_0x35f092(0x230))/0x3+-parseInt(_0x35f092(0x144))/0x4*(-parseInt(_0x35f092(0x2f8))/0x5)+-parseInt(_0x35f092(0x1c0))/0x6+-parseInt(_0x35f092(0x18e))/0x7+-parseInt(_0x35f092(0x16a))/0x8*(parseInt(_0x35f092(0x212))/0x9);if(_0x5d24a6===_0x15d80e)break;else _0x4fb35a['push'](_0x4fb35a['shift']());}catch(_0x5444b1){_0x4fb35a['push'](_0x4fb35a['shift']());}}}(a0_0x1bf8,0x327cb));const a0_0x1668be=(function(){let _0x4ff9d0=!![];return function(_0x32b658,_0x38d858){const _0x1ef7bd=_0x4ff9d0?function(){const _0x368187=a0_0x5323;if(_0x38d858){const _0x981256=_0x38d858[_0x368187(0x1a6)](_0x32b658,arguments);return _0x38d858=null,_0x981256;}}:function(){};return _0x4ff9d0=![],_0x1ef7bd;};}()),a0_0x19202a=a0_0x1668be(this,function(){const _0x51c646=a0_0x5323;return a0_0x19202a[_0x51c646(0x194)]()[_0x51c646(0x2b1)](_0x51c646(0x131))[_0x51c646(0x194)]()[_0x51c646(0x286)](a0_0x19202a)[_0x51c646(0x2b1)](_0x51c646(0x131));});a0_0x19202a();'use strict';function a0_0x1bf8(){const _0x530775=['ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20','Event\x20History','toLocaleString','generic','setStateAsync','testApiKey','Fokus\x20auf\x20Komfort.','Comfort\x20Suggestion','inactivityThresholdHours','Alert\x20Reason','temperature','stateChange','.\x20ANWESENDE_GERAETE:\x20','TRAINING_COMPLETE','Success:\x20Compressed\x20','subscribeStates','analysis.trigger','round','analysis.lastResult','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','LTM.trainingData.sequences','unload','error','Building\x20Insulation\x20Score','selectedFunctionIds','schalter','Target\x20ID','ROLLE:\x20FÃ¼rsorglicher\x20Assistent.\x20AUFGABE:\x20Schreibe\x20eine\x20kurze,\x20beruhigende\x20\x22Guten\x20Morgen\x22-Nachricht.\x20PERSONA:\x20','minDaysForBaseline','command','lastAlertState','Could\x20not\x20kill\x20Python\x20process:\x20','Fehler:\x20','ROLLE:\x20KI-Hausverwalter\x20&\x20Gesundheits-Assistent.\x20PERSONA:\x20','LTM.driftAnalysis.lastCheck','Adapter','sensorLastValues','json','Deaktiviert\x20(Pro-Feature)','testContext','ical.0','Recorded\x20Motion\x20Sequences','analysis.automation.autoApply','cogni-living','_calName','.forecast.current.temp','LTM.rawEventLog','constructor','Fokus\x20auf\x20Familienroutinen.','PRO-','Failed:\x20','getEnums','sleepScore','âœ…\x20Alles\x20OK\x20(Reset)]','warn','analysis.training.triggerEnergy','system.','ðŸ›¡ï¸\x20SECURITY\x20CHECK:\x20Score\x20','system.config','getCalendarNames','.communicate.request','[RECORDER]\x20Sequence\x20finished\x20(Steps:\x20','scheduleJob','bind','Health\x20Notes','Wetter:\x20Deaktiviert','endsWith','dailyDigests','analysis.training','logDuplicates','setHours','position','Sending\x20notification:\x20\x22','location','currentSystemMode','235197GoUcAp','fill','isExit','analysis.isAlert','.\x20ZUSATZ:\x20','summary','Processing\x20Status','rssi','Success:\x20','lowbat','Morning\x20Briefing\x20sent.','presence','Health\x20Anomaly\x20Detected','analysis.feedbackHistory','level','search','Scheduling\x20Morning\x20Briefing\x20for\x20','daswetter.0','devices','Subscribing\x20to\x20','Reset\x20Sched\x20Error:\x20','heizung','material.','maintenance','analysis.security','âš ï¸\x20ALARM:\x20','Automation\x20Proposals','isProVersion','some','briefingTime','loc','custom','driftDetails','Action','Training\x20Status','\x20|\x20','contact','âœ…\x20User\x20confirmed\x20ALARM\x20via\x20Telegram.\x20Resetting\x20system.','âŒ\x20AUTO-FIX\x20FAILED:\x20','Training\x20Data\x20Sets','modeResetJob','online','none','isEmergency','Drift\x20Analysis','members','KALENDER:\x20Keine\x20relevanten\x20Termine','SECURITY_RESULT','[PYTHON]\x20','system.isPresent','Scanning\x20for\x20devices\x20(V8:\x20Whitelist\x20Priority)...','AI\x20Alert\x20Status','detected','party','dismissAutomation','getForeignStateAsync','getOverviewData','toFixed','\x27\x20not\x20in\x20allowed\x20list)','[RESULT]','20648aKULqN','.\x20OUTPUT:\x20Nur\x20Text.','callback','application/json','notifyTelegramRecipient','text','system.mode','blind','slice','UngewÃ¶hnliches\x20Bewegungsmuster\x20erkannt!\x20(Score:\x20','string','notifyPushoverRecipient','Feedback\x20saved:\x20','analysis.automation.patternDetected','notifyEmailInstance','Trigger\x20Analysis','retry','.\x20KONTEXT:\x20','role','value','off','telegram','Live\x20Security\x20Monitor','forEach','temp','Error\x20reading\x20calendar\x20table:\x20','684230yxkvMy','presenceDevices','update','number','isArray','Error\x20launching\x20Python\x20service:\x20','VACATION','scanDevices','length','setObjectNotExistsAsync','shift','rollladen','unshift','valve','âœ…\x20PIP\x20bootstrapped.\x20Retrying\x20installation...','admin.','\x20events)...','ready','N/A\x20(Learning)','LTM.processingStatus','common','setState','getTime','now','getMonth','rawEventLog','cancel','âœ…\x20SUCCESS.\x20Dependencies\x20installed.','Sec-Training\x20started...','ðŸ\x20Starting\x20Python\x20Sidecar:\x20','accuweather.0','python3\x20-m\x20pip\x20install\x20-r\x20\x22','payload','HEALTH_TRAIN_RESULT','useWeather','events.history_debug_00','\x20events','WETTER:\x20Keine\x20Daten\x20gefunden','Error\x20in\x20onMessage\x20command\x20','sendTo','analysis.health.trendDiagnosis','klima','power','native','latitude','analysis.health.notes','System\x20Mode','targetValue','KALENDER:\x20Keine\x20Daten','_score','weatherInstance','startsWith','Auto\x20Apply\x20Rule','getCalendarNames\x20Error:\x20','.\x20NOTFALL-KONTEXT:\x20','uuid-not-found','indicator.health','testNotification','LTM.baselineStatus','\x20Tage)','ðŸ› ï¸\x20AUTO-FIX:\x20Installing\x20Python\x20dependencies\x20from\x20','0\x203\x20*\x20*\x20*','analysis.training.status','Gemini\x20Init\x20Error:\x20','.\x20INPUT\x20DATEN\x20(Letzte\x20Events):\x20','indicator.alarm','reachable','getLtmData','ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','fenster','ðŸ©º\x20Triggering\x20Health\x20Analysis\x20on\x20new\x20Digest...','.forecast.current.state','onMessage','LTM.trainingData.thermodynamics','Restlessness\x20Level','info.','debug','triggerDailyDigest','KALENDER:\x20Keine\x20Kalender\x20ausgewÃ¤hlt\x20(Bitte\x20in\x20Settings\x20konfigurieren)','alertReason','health','âŒ\x20Energy\x20Training\x20Failed:\x20','node-schedule','light','Drift\x20Sched\x20Error:\x20','targetId','extendObjectAsync','weatherunderground.0','ANOMALY','\x20(Threshold:\x20','aiPersona','lampe','channel','analysis.automation.targetValue','accuweather','analysis.training.triggerSecurity','stringify','systemUUID','analysis.automation.targetId','ltmJob','licht','onStateChange','N/A','Correlation\x20between\x20Inside\x20Temp,\x20Outside\x20Temp\x20and\x20Time','state','guest','dependencyInstallInProgress','dimmer','ðŸ“¡\x20Hooking\x20into\x20','parse','history.','...','Health\x20&\x20Sleep\x20Analysis','WiFi\x20Presence\x20detected\x20->\x20Aborting\x20Exit\x20Timer.\x20User\x20is\x20present.','activityLevel','onReady','(((.+)+)+)+$','analysis.health.restlessness','onUnload','TRAIN_ENERGY','child_process','replace','models/gemini-flash-latest','livingContext','Gemini\x20AI\x20initialized.','âœ…\x20AUTO-FIX\x20SUCCESS.','split','TRAIN_HEALTH','geminiApiKey','close','catch','âœ…\x20HEALTH\x20MODEL\x20TRAINED!\x20','Gemini\x20Analysis\x20Error:\x20','direction','link_quality','4LzfmsW','inactivityMonitoringEnabled','AI\x20Training\x20Control','map','Unknown\x20error','python_service','COGNI_CONFIRM_OK','notifyEmailEnabled','ðŸš¨\x20EMERGENCY','find','Error\x20checking\x20WiFi:\x20','analysis.security.lastScore','briefingJob','Urlaub','Logbook','write','\x0aSTB:\x20','analysis.health.trendValue','analysis.security.lastCheck','door','genAI','lastCheck','Health\x20Last\x20Check','Comfort\x20Summary','unreach','longitude','ðŸ©º\x20Triggering\x20Health\x20Training...','ðŸŒ…\x20Daily\x20Briefing:\x0a','Briefing\x20Sched\x20Error:\x20','âœ…\x20Alarm\x20quittiert.\x20System\x20normal.','temperatur','âŒ\x20Installation\x20failed:\x20','Keine\x20Analyse.','siren','tÃ¼r','LTM.driftAnalysis','pythonProcess','analysis.energy.insulationScore','952eERGhz','LTM.driftAnalysis.driftDetails','setForeignStateAsync','send','generateContent','weather','prÃ¤senz',')\x20->\x20','from','\x22\x20--break-system-packages','outdoorSensorId','enum.functions.*','eventHistory','isPresent','geminiModel','scriptProblem','[PYTHON\x20ERR]\x20','âš ï¸\x20PIP\x20is\x20missing.\x20Attempting\x20self-healing...','TEST-PRO-KEY','Health\x20Train\x20Error:\x20','Last\x20Check','\x20for\x20interactive\x20buttons...','Kein\x20API\x20Key\x20eingegeben.','Gast','isGracePeriodActive','filter','Deviation','Normal','shutter','toLowerCase','push','city','.Summary.Current','isAlert','Error:\x20','indicator.alarm.fire','709415Usxonf','\x22\x20--break-system-packages\x20--user','Kalender:\x20Deaktiviert','getForeignObjectAsync','Baseline\x20Status','indicator','toString','join','Array\x20of\x20completed\x20movement\x20paths\x20for\x20ML\x20training','getForeignObjectsAsync','Say\x20Hello','/100,\x20AktivitÃ¤t\x20seit\x2004:00:\x20','timestamp','main','Feedback\x20Log','python3','LTM.triggerDailyDigest','GUEST','getHours','status','ðŸƒ\x20Triggering\x20Energy\x20Training...','openweathermap.0','substring','simple-api.','apply','uuid','energy','.\x20WETTER:\x20','No\x20module\x20named','systemConfig','daswetter','\x20presence\x20devices...','enum','Energy\x20Train\x20Error:\x20','\x20hours.\x20Potential\x20incapacitation.','Failed\x20to\x20send\x20to\x20Python:\x20','analysis.alertReason','subscribeForeignStatesAsync','expire','Trigger\x20Action\x20Now','calendarInstance','KALENDER:\x20','system','Lernphase\x20(','baselineDrift','val','data','ðŸ§ª\x20Simulating\x20Butler\x20Proposal:\x20','Training\x20Error:\x20','trim','179820FUedoU','events.lastEvent','analysis.comfortSuggestion','connection','Verbindung\x20erfolgreich!\x20Antwort:\x20','driftAnalysisTimer','toISOString','writable','analysis.training.triggerHealth','):\x20','.data.table','name','\x20(Value\x20is\x20falsy:\x20','[TEST]\x20','includes','Trend\x20Diagnosis\x20(Python)','PARTY','scriptEnabled','notifyPushoverEnabled','analysis.automation.description','time','Party','ðŸ\x20Python\x20Pong\x20received!','\x20sensors...','humidity','currentposition','object','unknown','javascript.','ðŸ“ž\x20RÃ¼ckruf\x20anfordern','Missing\x20data','licenseKey','exitTimer','service.py','bewegung','Activity-Level','motion','exitGraceTimer','instance','stdin','WETTER\x20ERROR:\x20','analysis.health.lastCheck','pop','Unknown','splice','\x20=\x20','dutycycle','ABWESEND','ack','sort','analysis.analysisHistory','Guardian:\x20Sending\x20','LTM','message','analysis.health.isAnomaly','PRIORITÃ„T:\x20Sicherheit.','ðŸ“ž\x20RÃœCKRUF\x20BITTE!\x20Der\x20Bewohner\x20hat\x20den\x20RÃ¼ckruf-Button\x20gedrÃ¼ckt.','analysis.energy','No\x20module\x20named\x20pip','description','analysis.comfortSummary','cogni-living\x20adapter\x20starting\x20(v','.forecast.current.temperature','fault','ðŸ›¡ï¸\x20SECURITY:\x20Sending\x20sequence\x20to\x20Guard\x20for\x20analysis...','.NextHours.Location_1.Day_1.current.temp_value','Trend\x20Value\x20(%)','Anwesend','analysisHistory','NORMAL','Briefing\x20Error:\x20','info','calendarSelection','date','No\x20instance','LTM\x20Sched\x20Error:\x20','switch','Last\x20raw\x20event','SIMULATION:\x20Test-Vorschlag\x20fÃ¼r\x20','briefingEnabled','firmware','[RECORDER]\x20Added\x20step\x20to\x20sequence:\x20','27270wNxPOD','sendToAsync','Last\x20Check\x20Time','boolean','window','notifyTelegramInstance','analysis.activitySummary','namespace','[PYTHON]\x20Service\x20exited\x20with\x20code\x20','getStateAsync','Train\x20Energy\x20Model\x20(Regression)','ANALYZE_TREND','analysis.automation.triggerAction','response','version','\x20(Length:\x20','automationProposal','lastIndexOf','event','âŒ\x20CRITICAL:\x20Self-healing\x20failed.','Who\x20is\x20present?','stderr','Generating\x20Morning\x20Briefing...','Analysiere\x20ausgewogen.','triggerBriefing','type','events.history','@google/generative-ai','Target\x20Value','ltmLtbWindowDays','1010883RgMIzm','Alarm','occupancy','sensor','Drift\x20Status','autoApply','Activity\x20Summary','Keine\x20Details.','analysisTimer','@iobroker/adapter-core','simulateButler','TRAIN_SECURITY','system.presenceWho','getGenerativeModel','.NextHours.Location_1.Day_1.current.symbol_desc','\x20AUFGABE:\x201.\x20Analysiere\x20auf\x20Gesundheitsrisiken.\x202.\x20Analysiere\x20auf\x20Komfort.\x20FORMAT\x20(JSON\x20Only):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','log','ANALYZE_SEQUENCE','stick_unreach','Last\x20Anomaly\x20Score','.Current.Temperature','Skipped\x20(No\x20AI\x20or\x20Data)','KALENDER\x20ERROR:\x20','analysis.triggerBriefing','automation.triggerAction','config','values','notifyTelegramEnabled','requirements.txt','cover','button','[RECORDER\x20DEBUG]\x20Ignored\x20Event\x20','Sleep\x20Score\x20(0-100)','KI-Modell\x20nicht\x20initialisiert','User\x20dismissed\x20automation\x20proposal.','uuid-error','Pattern\x20Detected',').\x20Saving\x20to\x20Training\x20Data.','08:00'];a0_0x1bf8=function(){return _0x530775;};return a0_0x1bf8();}const utils=require(a0_0x5651d4(0x239)),{GoogleGenerativeAI}=require(a0_0x5651d4(0x22d)),schedule=require(a0_0x5651d4(0x34a)),{spawn,exec}=require(a0_0x5651d4(0x135)),path=require('path'),HISTORY_MAX_SIZE=0x32,RAW_LOG_MAX_SIZE=0x5dc,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL=a0_0x5651d4(0x137),LTM_SCHEDULE=a0_0x5651d4(0x335),MODE_RESET_SCHEDULE='0\x204\x20*\x20*\x20*',ANALYSIS_HISTORY_MAX_SIZE=0x64,EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,SEQUENCE_TIMEOUT_MS=0x5*0x3c*0x3e8,MAX_TRAINING_SET_SIZE=0x1f4,THERMO_LOG_SIZE=0x3e8,LTM_DP_RAW_LOG=a0_0x5651d4(0x285),LTM_DP_DAILY_DIGESTS='LTM.dailyDigests',LTM_DP_STATUS=a0_0x5651d4(0x30b),LTM_DP_TRIGGER_DIGEST=a0_0x5651d4(0x19e),LTM_DP_BASELINE_STATUS=a0_0x5651d4(0x332),LTM_DP_DRIFT_CHANNEL=a0_0x5651d4(0x167),LTM_DP_DRIFT_STATUS='LTM.driftAnalysis.baselineDrift',LTM_DP_DRIFT_DETAILS=a0_0x5651d4(0x16b),LTM_DP_DRIFT_LAST_CHECK=a0_0x5651d4(0x279),SYSTEM_DP_MODE=a0_0x5651d4(0x2e4),HARD_IGNORE_TERMS=[a0_0x5651d4(0x179),a0_0x5651d4(0x1d1),a0_0x5651d4(0x2fa),a0_0x5651d4(0x15c),a0_0x5651d4(0x2ab),a0_0x5651d4(0x2a9),a0_0x5651d4(0x1c3),a0_0x5651d4(0x2b9),a0_0x5651d4(0x26d),a0_0x5651d4(0x1ff),'working',a0_0x5651d4(0x142),a0_0x5651d4(0x242),'config_pending',a0_0x5651d4(0x1ee),a0_0x5651d4(0x210),a0_0x5651d4(0x33a),a0_0x5651d4(0x143)],BAD_NAMES=['targetposition',a0_0x5651d4(0x1d9),a0_0x5651d4(0x125),a0_0x5651d4(0x2b0),a0_0x5651d4(0x2f1),'brightness','on',a0_0x5651d4(0x2f2),a0_0x5651d4(0x20c),a0_0x5651d4(0x29e),a0_0x5651d4(0x186),a0_0x5651d4(0x2e5),a0_0x5651d4(0x24d),a0_0x5651d4(0x1a1),'motion',a0_0x5651d4(0x2ad),'occupancy',a0_0x5651d4(0x261),'humidity',a0_0x5651d4(0x322),a0_0x5651d4(0x1a8),'setpoint',a0_0x5651d4(0x305),'actual_temperature','set_temperature'],ADAPTER_BLACKLIST=[a0_0x5651d4(0x28f),a0_0x5651d4(0x307),a0_0x5651d4(0x343),'vis.',a0_0x5651d4(0x12b),a0_0x5651d4(0x2b8),'icons-mfd.','flot.','echarts.',a0_0x5651d4(0x1dc),a0_0x5651d4(0x1a5)],SYSTEM_MODES={'NORMAL':'normal','VACATION':'vacation','PARTY':a0_0x5651d4(0x2d7),'GUEST':a0_0x5651d4(0x126)},AUTO_RESET_MODES=[SYSTEM_MODES[a0_0x5651d4(0x1d0)],SYSTEM_MODES[a0_0x5651d4(0x19f)]],PERSONA_MAPPING={'generic':a0_0x5651d4(0x229),'senior_aal':'PRIORITÃ„T:\x20Gesundheit/AAL.','family':a0_0x5651d4(0x287),'single_comfort':a0_0x5651d4(0x25d),'security':a0_0x5651d4(0x1f7)},ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};let activeSequence=[],sequenceTimer=null;async function initZombies(_0x10eb30){const _0x597c2a=a0_0x5651d4;try{const _0x3e6181=['analysis.history_debug_00',_0x597c2a(0x31b)];for(const _0x1395aa of _0x3e6181){try{const _0x4b6f6b=await _0x10eb30['getObjectAsync'](_0x1395aa);_0x4b6f6b&&await _0x10eb30['delObjectAsync'](_0x1395aa);}catch(_0x1f3264){}}}catch(_0x15b565){}}async function initHistory(_0x817c8f){const _0x591a9d=a0_0x5651d4;try{const _0x28cd87=await _0x817c8f[_0x591a9d(0x21b)](_0x591a9d(0x22c));_0x28cd87&&_0x28cd87[_0x591a9d(0x1bb)]&&(_0x817c8f[_0x591a9d(0x176)]=JSON[_0x591a9d(0x12a)](_0x28cd87[_0x591a9d(0x1bb)][_0x591a9d(0x194)]()));}catch(_0x3d3e32){_0x817c8f[_0x591a9d(0x176)]=[];}try{const _0x21b7f3=await _0x817c8f[_0x591a9d(0x21b)](_0x591a9d(0x1f2));if(_0x21b7f3&&_0x21b7f3[_0x591a9d(0x1bb)])_0x817c8f['analysisHistory']=JSON[_0x591a9d(0x12a)](_0x21b7f3[_0x591a9d(0x1bb)][_0x591a9d(0x194)]());}catch(_0x3cd3e3){_0x817c8f[_0x591a9d(0x204)]=[];}if(_0x817c8f[_0x591a9d(0x176)]&&_0x817c8f[_0x591a9d(0x176)][_0x591a9d(0x300)]>0x0){_0x817c8f[_0x591a9d(0x240)][_0x591a9d(0x207)]('Restoring\x20sensor\x20cache\x20from\x20history\x20('+_0x817c8f[_0x591a9d(0x176)][_0x591a9d(0x300)]+_0x591a9d(0x308));for(let _0x34fda8=_0x817c8f['eventHistory'][_0x591a9d(0x300)]-0x1;_0x34fda8>=0x0;_0x34fda8--){const _0x5371ab=_0x817c8f[_0x591a9d(0x176)][_0x34fda8];_0x5371ab&&_0x5371ab['id']!==undefined&&_0x5371ab[_0x591a9d(0x2f1)]!==undefined&&(_0x817c8f[_0x591a9d(0x27b)][_0x5371ab['id']]=_0x5371ab[_0x591a9d(0x2f1)]);}}}async function initSystemConfig(_0x1ac707){const _0x2cf5c9=a0_0x5651d4;try{const _0x26a555=await _0x1ac707[_0x2cf5c9(0x191)](_0x2cf5c9(0x291));_0x26a555&&_0x26a555[_0x2cf5c9(0x30c)]&&(_0x1ac707[_0x2cf5c9(0x1ab)]={'latitude':_0x26a555[_0x2cf5c9(0x30c)][_0x2cf5c9(0x324)]||0x0,'longitude':_0x26a555['common'][_0x2cf5c9(0x15d)]||0x0,'city':_0x26a555[_0x2cf5c9(0x30c)][_0x2cf5c9(0x189)]||''});}catch(_0x1d33bd){}}async function checkLicense(_0x5af702,_0x3e92ed){const _0x2a2756=a0_0x5651d4;if(!_0x3e92ed)return![];_0x5af702[_0x2a2756(0x11e)]=await getSystemUUID(_0x5af702);if(_0x3e92ed===_0x2a2756(0x17c)||_0x3e92ed[_0x2a2756(0x32b)](_0x2a2756(0x288)))return!![];return![];}async function getSystemUUID(_0x29b3b6){const _0x6392aa=a0_0x5651d4;try{const _0x55890b=await _0x29b3b6[_0x6392aa(0x191)]('system.meta.uuid');if(_0x55890b&&_0x55890b[_0x6392aa(0x323)]&&_0x55890b[_0x6392aa(0x323)]['uuid'])return _0x55890b[_0x6392aa(0x323)][_0x6392aa(0x1a7)];return _0x6392aa(0x32f);}catch(_0xcd3843){return _0x6392aa(0x253);}}async function createAllObjects(_0x10fff9){const _0x4604e3=a0_0x5651d4;await checkSystemObjects(_0x10fff9),await _0x10fff9[_0x4604e3(0x301)](_0x4604e3(0x23c),{'type':'state','common':{'name':_0x4604e3(0x226),'type':_0x4604e3(0x2e8),'role':_0x4604e3(0x2e3),'read':!![],'write':![],'def':''},'native':{}}),await _0x10fff9['setObjectNotExistsAsync']('events.lastEvent',{'type':_0x4604e3(0x125),'common':{'name':_0x4604e3(0x20d),'type':_0x4604e3(0x2e8),'role':_0x4604e3(0x27c),'read':!![],'write':![]},'native':{}}),await _0x10fff9[_0x4604e3(0x301)](_0x4604e3(0x22c),{'type':_0x4604e3(0x125),'common':{'name':_0x4604e3(0x258),'type':_0x4604e3(0x2e8),'role':'json','read':!![],'write':![]},'native':{}}),await _0x10fff9['setObjectNotExistsAsync'](_0x4604e3(0x267),{'type':_0x4604e3(0x125),'common':{'name':_0x4604e3(0x2ed),'type':_0x4604e3(0x215),'role':_0x4604e3(0x24e),'read':!![],'write':!![],'def':![]},'native':{}}),await _0x10fff9[_0x4604e3(0x301)](_0x4604e3(0x247),{'type':_0x4604e3(0x125),'common':{'name':'Trigger\x20Briefing\x20(Test)','type':_0x4604e3(0x215),'role':_0x4604e3(0x24e),'read':!![],'write':!![],'def':![]},'native':{}}),await _0x10fff9[_0x4604e3(0x34e)](_0x4604e3(0x29b),{'type':_0x4604e3(0x354),'common':{'name':_0x4604e3(0x146)},'native':{}}),await _0x10fff9[_0x4604e3(0x301)]('analysis.training.triggerSecurity',{'type':_0x4604e3(0x125),'common':{'name':'Train\x20Security\x20Model\x20(LSTM)','type':_0x4604e3(0x215),'role':_0x4604e3(0x24e),'read':!![],'write':!![],'def':![]},'native':{}}),await _0x10fff9[_0x4604e3(0x301)](_0x4604e3(0x1c8),{'type':_0x4604e3(0x125),'common':{'name':'Train\x20Health\x20Model\x20(IsoForest)','type':_0x4604e3(0x215),'role':_0x4604e3(0x24e),'read':!![],'write':!![],'def':![]},'native':{}}),await _0x10fff9['setObjectNotExistsAsync'](_0x4604e3(0x28e),{'type':_0x4604e3(0x125),'common':{'name':_0x4604e3(0x21c),'type':'boolean','role':_0x4604e3(0x24e),'read':!![],'write':!![],'def':![]},'native':{}}),await _0x10fff9[_0x4604e3(0x301)](_0x4604e3(0x336),{'type':'state','common':{'name':_0x4604e3(0x2c4),'type':_0x4604e3(0x2e8),'role':_0x4604e3(0x2e3),'read':!![],'write':![],'def':'Idle'},'native':{}}),await _0x10fff9[_0x4604e3(0x34e)](_0x4604e3(0x2ba),{'type':_0x4604e3(0x354),'common':{'name':_0x4604e3(0x2f4)},'native':{}}),await _0x10fff9[_0x4604e3(0x301)](_0x4604e3(0x14f),{'type':_0x4604e3(0x125),'common':{'name':_0x4604e3(0x243),'type':_0x4604e3(0x2fb),'role':_0x4604e3(0x2f1),'read':!![],'write':![],'def':0x0},'native':{}}),await _0x10fff9[_0x4604e3(0x301)]('analysis.security.lastCheck',{'type':_0x4604e3(0x125),'common':{'name':_0x4604e3(0x214),'type':_0x4604e3(0x2e8),'role':_0x4604e3(0x209),'read':!![],'write':![],'def':''},'native':{}}),await _0x10fff9[_0x4604e3(0x301)](_0x4604e3(0x1e9),{'type':'state','common':{'name':_0x4604e3(0x15a),'type':_0x4604e3(0x2e8),'role':'date','read':!![],'write':![],'def':''},'native':{}}),await _0x10fff9['setObjectNotExistsAsync']('analysis.health.isAnomaly',{'type':'state','common':{'name':_0x4604e3(0x2ae),'type':_0x4604e3(0x215),'role':_0x4604e3(0x330),'read':!![],'write':![],'def':![]},'native':{}}),await _0x10fff9[_0x4604e3(0x34e)](_0x4604e3(0x1f9),{'type':_0x4604e3(0x354),'common':{'name':'Energy\x20Intelligence'},'native':{}}),await _0x10fff9[_0x4604e3(0x301)](_0x4604e3(0x169),{'type':_0x4604e3(0x125),'common':{'name':_0x4604e3(0x26e),'type':_0x4604e3(0x2e8),'role':'text','read':!![],'write':![],'def':_0x4604e3(0x123)},'native':{}}),await _0x10fff9[_0x4604e3(0x301)](_0x4604e3(0x269),{'type':_0x4604e3(0x125),'common':{'name':'Last\x20Result','type':'string','role':_0x4604e3(0x27c),'read':!![],'write':![]},'native':{}}),await _0x10fff9[_0x4604e3(0x301)](_0x4604e3(0x2a5),{'type':'state','common':{'name':_0x4604e3(0x2d5),'type':_0x4604e3(0x215),'role':_0x4604e3(0x339),'read':!![],'write':![],'def':![]},'native':{}}),await _0x10fff9[_0x4604e3(0x301)]('analysis.isEmergency',{'type':_0x4604e3(0x125),'common':{'name':'AI\x20Emergency\x20Status','type':_0x4604e3(0x215),'role':_0x4604e3(0x18d),'read':!![],'write':![],'def':![]},'native':{}}),await _0x10fff9[_0x4604e3(0x301)](_0x4604e3(0x1b2),{'type':_0x4604e3(0x125),'common':{'name':_0x4604e3(0x260),'type':'string','role':'text.alarm','read':!![],'write':![]},'native':{}}),await _0x10fff9['setObjectNotExistsAsync']('analysis.activitySummary',{'type':'state','common':{'name':_0x4604e3(0x236),'type':_0x4604e3(0x2e8),'role':_0x4604e3(0x2e3),'read':!![],'write':![]},'native':{}}),await _0x10fff9[_0x4604e3(0x301)]('analysis.deviationFromBaseline',{'type':'state','common':{'name':_0x4604e3(0x184),'type':_0x4604e3(0x2e8),'role':_0x4604e3(0x125),'read':!![],'write':![],'def':_0x4604e3(0x123)},'native':{}}),await _0x10fff9[_0x4604e3(0x301)](_0x4604e3(0x1fc),{'type':_0x4604e3(0x125),'common':{'name':_0x4604e3(0x15b),'type':'string','role':'text','read':!![],'write':![]},'native':{}}),await _0x10fff9['setObjectNotExistsAsync'](_0x4604e3(0x1c2),{'type':'state','common':{'name':_0x4604e3(0x25e),'type':'string','role':_0x4604e3(0x2e3),'read':!![],'write':![]},'native':{}}),await _0x10fff9['extendObjectAsync']('analysis.automation',{'type':_0x4604e3(0x354),'common':{'name':_0x4604e3(0x2bc)},'native':{}}),await _0x10fff9[_0x4604e3(0x301)](_0x4604e3(0x2eb),{'type':_0x4604e3(0x125),'common':{'name':_0x4604e3(0x254),'type':_0x4604e3(0x215),'role':_0x4604e3(0x193),'read':!![],'write':![],'def':![]},'native':{}}),await _0x10fff9[_0x4604e3(0x301)](_0x4604e3(0x1d3),{'type':_0x4604e3(0x125),'common':{'name':'Description','type':'string','role':_0x4604e3(0x2e3),'read':!![],'write':![]},'native':{}}),await _0x10fff9[_0x4604e3(0x301)]('analysis.automation.suggestedAction',{'type':_0x4604e3(0x125),'common':{'name':_0x4604e3(0x2c3),'type':_0x4604e3(0x2e8),'role':_0x4604e3(0x2e3),'read':!![],'write':![]},'native':{}}),await _0x10fff9['setObjectNotExistsAsync'](_0x4604e3(0x11f),{'type':_0x4604e3(0x125),'common':{'name':_0x4604e3(0x271),'type':_0x4604e3(0x2e8),'role':'text','read':!![],'write':![]},'native':{}}),await _0x10fff9['setObjectNotExistsAsync'](_0x4604e3(0x11a),{'type':_0x4604e3(0x125),'common':{'name':_0x4604e3(0x22e),'type':_0x4604e3(0x2e8),'role':_0x4604e3(0x2e3),'read':!![],'write':![]},'native':{}}),await _0x10fff9[_0x4604e3(0x301)](_0x4604e3(0x281),{'type':_0x4604e3(0x125),'common':{'name':_0x4604e3(0x32c),'type':'boolean','role':_0x4604e3(0x20c),'read':!![],'write':!![],'def':![]},'native':{}}),await _0x10fff9['setObjectNotExistsAsync'](_0x4604e3(0x21e),{'type':'state','common':{'name':_0x4604e3(0x1b5),'type':'boolean','role':'button','read':!![],'write':!![],'def':![]},'native':{}}),await _0x10fff9[_0x4604e3(0x301)](_0x4604e3(0x1f2),{'type':'state','common':{'name':_0x4604e3(0x152),'type':_0x4604e3(0x2e8),'role':_0x4604e3(0x27c),'read':!![],'write':![],'def':'[]'},'native':{}}),await _0x10fff9[_0x4604e3(0x301)](_0x4604e3(0x2af),{'type':_0x4604e3(0x125),'common':{'name':_0x4604e3(0x19c),'type':'string','role':_0x4604e3(0x27c),'read':!![],'write':![],'def':'[]'},'native':{}}),await _0x10fff9[_0x4604e3(0x34e)]('analysis.health',{'type':_0x4604e3(0x354),'common':{'name':_0x4604e3(0x12d)},'native':{}}),await _0x10fff9[_0x4604e3(0x301)]('analysis.health.sleepScore',{'type':_0x4604e3(0x125),'common':{'name':_0x4604e3(0x250),'type':'number','role':'value.health','read':!![],'write':![],'def':0x0},'native':{}}),await _0x10fff9[_0x4604e3(0x301)](_0x4604e3(0x132),{'type':'state','common':{'name':_0x4604e3(0x342),'type':'string','role':'text','read':!![],'write':![],'def':_0x4604e3(0x2cc)},'native':{}}),await _0x10fff9[_0x4604e3(0x301)](_0x4604e3(0x325),{'type':_0x4604e3(0x125),'common':{'name':_0x4604e3(0x297),'type':_0x4604e3(0x2e8),'role':_0x4604e3(0x2e3),'read':!![],'write':![],'def':''},'native':{}}),await _0x10fff9[_0x4604e3(0x301)](_0x4604e3(0x320),{'type':_0x4604e3(0x125),'common':{'name':_0x4604e3(0x1cf),'type':_0x4604e3(0x2e8),'role':_0x4604e3(0x2e3),'read':!![],'write':![],'def':'N/A'},'native':{}}),await _0x10fff9['setObjectNotExistsAsync'](_0x4604e3(0x155),{'type':'state','common':{'name':_0x4604e3(0x202),'type':_0x4604e3(0x2fb),'role':_0x4604e3(0x2f1),'read':!![],'write':![],'def':0x0},'native':{}}),await _0x10fff9[_0x4604e3(0x34e)]('LTM.trainingData',{'type':'channel','common':{'name':_0x4604e3(0x2c9)},'native':{}}),await _0x10fff9[_0x4604e3(0x301)](_0x4604e3(0x26b),{'type':_0x4604e3(0x125),'common':{'name':_0x4604e3(0x280),'type':_0x4604e3(0x2e8),'role':'json','read':!![],'write':![],'def':'[]','desc':_0x4604e3(0x196)},'native':{}}),await _0x10fff9[_0x4604e3(0x301)](_0x4604e3(0x341),{'type':_0x4604e3(0x125),'common':{'name':'Thermodynamic\x20Data\x20Points','type':_0x4604e3(0x2e8),'role':_0x4604e3(0x27c),'read':!![],'write':![],'def':'[]','desc':_0x4604e3(0x124)},'native':{}}),await checkLtmObjects(_0x10fff9),await checkLtmDriftObjects(_0x10fff9);}async function checkSystemObjects(_0x3f40c5){const _0x1fe338=a0_0x5651d4;await _0x3f40c5[_0x1fe338(0x34e)](_0x1fe338(0x1b8),{'type':_0x1fe338(0x354),'common':{'name':'System\x20Status\x20&\x20Control'},'native':{}}),await _0x3f40c5['extendObjectAsync'](SYSTEM_DP_MODE,{'type':'state','common':{'name':_0x1fe338(0x326),'type':_0x1fe338(0x2e8),'role':_0x1fe338(0x125),'read':!![],'write':!![],'def':SYSTEM_MODES[_0x1fe338(0x205)],'states':{[SYSTEM_MODES[_0x1fe338(0x205)]]:_0x1fe338(0x185),[SYSTEM_MODES[_0x1fe338(0x2fe)]]:_0x1fe338(0x151),[SYSTEM_MODES['PARTY']]:_0x1fe338(0x1d5),[SYSTEM_MODES[_0x1fe338(0x19f)]]:_0x1fe338(0x181)}},'native':{}});}async function checkLtmObjects(_0x505447){const _0x27cf38=a0_0x5651d4;await _0x505447[_0x27cf38(0x34e)](_0x27cf38(0x1f4),{'type':_0x27cf38(0x354),'common':{'name':_0x27cf38(0x1f4)},'native':{}}),await _0x505447['extendObjectAsync'](LTM_DP_RAW_LOG,{'type':_0x27cf38(0x125),'common':{'name':'Raw\x20Log','type':_0x27cf38(0x2e8),'role':_0x27cf38(0x27c),'read':!![],'write':![]},'native':{}}),await _0x505447[_0x27cf38(0x34e)](LTM_DP_DAILY_DIGESTS,{'type':_0x27cf38(0x125),'common':{'name':'Daily\x20Digests','type':_0x27cf38(0x2e8),'role':'json','read':!![],'write':![]},'native':{}}),await _0x505447[_0x27cf38(0x34e)](LTM_DP_STATUS,{'type':_0x27cf38(0x125),'common':{'name':_0x27cf38(0x2a8),'type':_0x27cf38(0x2e8),'role':'text','read':!![],'write':![]},'native':{}}),await _0x505447['extendObjectAsync'](LTM_DP_TRIGGER_DIGEST,{'type':_0x27cf38(0x125),'common':{'name':'Trigger\x20Digest','type':_0x27cf38(0x215),'role':_0x27cf38(0x24e),'read':!![],'write':!![],'def':![]},'native':{}}),await _0x505447['extendObjectAsync'](LTM_DP_BASELINE_STATUS,{'type':_0x27cf38(0x125),'common':{'name':_0x27cf38(0x192),'type':_0x27cf38(0x2e8),'role':_0x27cf38(0x2e3),'read':!![],'write':![]},'native':{}});}async function checkLtmDriftObjects(_0x39eb56){const _0x20772b=a0_0x5651d4;await _0x39eb56[_0x20772b(0x34e)](LTM_DP_DRIFT_CHANNEL,{'type':_0x20772b(0x354),'common':{'name':_0x20772b(0x2ce)},'native':{}}),await _0x39eb56[_0x20772b(0x34e)](LTM_DP_DRIFT_STATUS,{'type':_0x20772b(0x125),'common':{'name':_0x20772b(0x234),'type':'string','role':_0x20772b(0x125),'read':!![],'write':![],'def':'N/A'},'native':{}}),await _0x39eb56[_0x20772b(0x34e)](LTM_DP_DRIFT_DETAILS,{'type':_0x20772b(0x125),'common':{'name':'Drift\x20Details','type':'string','role':_0x20772b(0x2e3),'read':!![],'write':![]},'native':{}}),await _0x39eb56['extendObjectAsync'](LTM_DP_DRIFT_LAST_CHECK,{'type':_0x20772b(0x125),'common':{'name':_0x20772b(0x17e),'type':'number','role':_0x20772b(0x209),'read':!![],'write':![]},'native':{}});}async function loadSystemMode(_0x46f36c){const _0x3b895a=a0_0x5651d4;try{const _0x34605b=await _0x46f36c[_0x3b895a(0x21b)](SYSTEM_DP_MODE);_0x34605b&&_0x34605b[_0x3b895a(0x1bb)]&&Object[_0x3b895a(0x24a)](SYSTEM_MODES)[_0x3b895a(0x1ce)](_0x34605b[_0x3b895a(0x1bb)])?_0x46f36c['currentSystemMode']=_0x34605b[_0x3b895a(0x1bb)]:(_0x46f36c[_0x3b895a(0x2a1)]=SYSTEM_MODES['NORMAL'],await _0x46f36c[_0x3b895a(0x25b)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES['NORMAL'],'ack':!![]}));}catch(_0x32b39d){_0x46f36c[_0x3b895a(0x2a1)]=SYSTEM_MODES[_0x3b895a(0x205)];}}async function loadRawEventLog(_0x46d997){const _0x50fa49=a0_0x5651d4;try{const _0x466d99=await _0x46d997['getStateAsync'](LTM_DP_RAW_LOG);if(_0x466d99&&_0x466d99[_0x50fa49(0x1bb)])_0x46d997[_0x50fa49(0x311)]=JSON[_0x50fa49(0x12a)](_0x466d99[_0x50fa49(0x1bb)]);}catch(_0x6f45d5){_0x46d997[_0x50fa49(0x311)]=[];}}async function saveRawEventLog(_0x4553dc){const _0x3c2350=a0_0x5651d4;_0x4553dc[_0x3c2350(0x311)][_0x3c2350(0x300)]>RAW_LOG_MAX_SIZE&&_0x4553dc[_0x3c2350(0x311)]['splice'](0x0,_0x4553dc['rawEventLog'][_0x3c2350(0x300)]-RAW_LOG_MAX_SIZE),await _0x4553dc[_0x3c2350(0x25b)](LTM_DP_RAW_LOG,{'val':JSON[_0x3c2350(0x11d)](_0x4553dc[_0x3c2350(0x311)]),'ack':!![]});}async function loadDailyDigests(_0x3a6a89){const _0x2642b7=a0_0x5651d4;try{const _0x5f4944=await _0x3a6a89[_0x2642b7(0x21b)](LTM_DP_DAILY_DIGESTS);if(_0x5f4944&&_0x5f4944['val'])_0x3a6a89['dailyDigests']=JSON['parse'](_0x5f4944[_0x2642b7(0x1bb)]);}catch(_0x190d94){_0x3a6a89[_0x2642b7(0x29a)]=[];}await updateBaselineStatus(_0x3a6a89);}async function saveDailyDigests(_0x2b99a5,_0x571afd=!![]){const _0x4bd2de=a0_0x5651d4,_0x435b24=_0x2b99a5[_0x4bd2de(0x249)][_0x4bd2de(0x22f)]||0x3c;_0x2b99a5[_0x4bd2de(0x29a)]['length']>_0x435b24&&_0x2b99a5[_0x4bd2de(0x29a)][_0x4bd2de(0x1ec)](0x0,_0x2b99a5[_0x4bd2de(0x29a)][_0x4bd2de(0x300)]-_0x435b24);await _0x2b99a5[_0x4bd2de(0x25b)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x4bd2de(0x11d)](_0x2b99a5[_0x4bd2de(0x29a)]),'ack':!![]});if(_0x571afd)await updateBaselineStatus(_0x2b99a5);}async function updateAnalysisHistory(_0x636026,_0x1bd07b){const _0x12bb19=a0_0x5651d4;_0x636026[_0x12bb19(0x204)][_0x12bb19(0x304)](_0x1bd07b);if(_0x636026['analysisHistory'][_0x12bb19(0x300)]>ANALYSIS_HISTORY_MAX_SIZE)_0x636026['analysisHistory'][_0x12bb19(0x1ea)]();await _0x636026[_0x12bb19(0x25b)](_0x12bb19(0x1f2),{'val':JSON[_0x12bb19(0x11d)](_0x636026['analysisHistory']),'ack':!![]});}async function updateBaselineStatus(_0x2bc9e0){const _0x2df187=a0_0x5651d4;if(!_0x2bc9e0[_0x2df187(0x2bd)]){await _0x2bc9e0[_0x2df187(0x25b)](LTM_DP_BASELINE_STATUS,{'val':_0x2df187(0x27d),'ack':!![]});return;}const _0x390123=_0x2bc9e0['dailyDigests'][_0x2df187(0x300)]>=(_0x2bc9e0[_0x2df187(0x249)]['minDaysForBaseline']||0x7)?'Aktiv\x20('+_0x2bc9e0[_0x2df187(0x29a)]['length']+_0x2df187(0x333):_0x2df187(0x1b9)+_0x2bc9e0['dailyDigests'][_0x2df187(0x300)]+'/'+(_0x2bc9e0[_0x2df187(0x249)]['minDaysForBaseline']||0x7)+')';await _0x2bc9e0[_0x2df187(0x25b)](LTM_DP_BASELINE_STATUS,{'val':_0x390123,'ack':!![]});}async function initSensorSubscriptions(_0x595e08){const _0x59810f=a0_0x5651d4,_0x512181=_0x595e08[_0x59810f(0x249)][_0x59810f(0x2b4)];if(_0x512181&&_0x512181[_0x59810f(0x300)]>0x0){_0x595e08[_0x59810f(0x240)][_0x59810f(0x207)]('Subscribing\x20to\x20'+_0x512181[_0x59810f(0x300)]+_0x59810f(0x1d7));for(const _0x4cc733 of _0x512181){if(_0x4cc733['id']){await _0x595e08[_0x59810f(0x1b3)](_0x4cc733['id']);try{const _0x1ea3d5=await _0x595e08[_0x59810f(0x2d9)](_0x4cc733['id']);if(_0x1ea3d5)_0x595e08[_0x59810f(0x27b)][_0x4cc733['id']]=_0x1ea3d5[_0x59810f(0x1bb)];}catch(_0x50b1af){}}}}}function a0_0x5323(_0x3e1850,_0x15ca79){const _0x3ad539=a0_0x1bf8();return a0_0x5323=function(_0x19202a,_0x1668be){_0x19202a=_0x19202a-0x11a;let _0x1bf8a8=_0x3ad539[_0x19202a];return _0x1bf8a8;},a0_0x5323(_0x3e1850,_0x15ca79);}async function initPresenceSubscriptions(_0x53e30d){const _0x377cd0=a0_0x5651d4,_0x22b83a=_0x53e30d['config'][_0x377cd0(0x2f9)]||[];if(_0x22b83a[_0x377cd0(0x300)]>0x0){_0x53e30d[_0x377cd0(0x240)]['info'](_0x377cd0(0x2b5)+_0x22b83a[_0x377cd0(0x300)]+_0x377cd0(0x1ad));for(const _0x4a56a1 of _0x22b83a){await _0x53e30d[_0x377cd0(0x1b3)](_0x4a56a1);}try{await checkWifiPresence(_0x53e30d);}catch(_0x251b31){}}}async function getWeatherContext(_0x260115){const _0xce4113=a0_0x5651d4;try{if(!_0x260115[_0xce4113(0x249)][_0xce4113(0x31a)])return _0xce4113(0x298);let _0x15c39e='';const _0x36993c=_0x260115[_0xce4113(0x249)][_0xce4113(0x32a)];if(_0x36993c)try{if(_0x36993c[_0xce4113(0x1ce)]('accuweather')){const _0x2a0183=await _0x260115[_0xce4113(0x2d9)](_0x36993c+_0xce4113(0x18a));if(_0x2a0183&&_0x2a0183[_0xce4113(0x1bb)])_0x15c39e=_0x2a0183[_0xce4113(0x1bb)];}else{if(_0x36993c[_0xce4113(0x1ce)](_0xce4113(0x1ac))){const _0x27a780=await _0x260115[_0xce4113(0x2d9)](_0x36993c+_0xce4113(0x23e));if(_0x27a780&&_0x27a780['val'])_0x15c39e=_0x27a780[_0xce4113(0x1bb)];}else{if(_0x36993c[_0xce4113(0x1ce)]('openweathermap')){const _0xda5762=await _0x260115[_0xce4113(0x2d9)](_0x36993c+_0xce4113(0x33f));if(_0xda5762&&_0xda5762['val'])_0x15c39e=_0xda5762['val'];}}}}catch(_0x69fb49){}if(!_0x15c39e){const _0x30bc50=[_0xce4113(0x316),_0xce4113(0x2b3),_0xce4113(0x34f),_0xce4113(0x1a3)];for(const _0x5618da of _0x30bc50){try{const _0x50de4d=await _0x260115[_0xce4113(0x191)](_0x5618da);if(_0x50de4d){if(_0x5618da[_0xce4113(0x1ce)](_0xce4113(0x11b))){const _0x128e46=await _0x260115[_0xce4113(0x2d9)](_0x5618da+'.Summary.Current');if(_0x128e46&&_0x128e46['val']){_0x15c39e=_0x128e46[_0xce4113(0x1bb)];break;}}}}catch(_0x5df79a){}}}return _0x15c39e?'WETTER:\x20'+_0x15c39e:_0xce4113(0x31d);}catch(_0x5c4164){return _0xce4113(0x1e8)+_0x5c4164[_0xce4113(0x1f5)];}}async function getCalendarContext(_0x418468){const _0x46dd42=a0_0x5651d4;try{if(!_0x418468[_0x46dd42(0x249)]['useCalendar'])return _0x46dd42(0x190);let _0x343090=_0x418468[_0x46dd42(0x249)][_0x46dd42(0x1b6)]||_0x46dd42(0x27f),_0x22e6b6=_0x418468['config'][_0x46dd42(0x208)]||[];if(typeof _0x22e6b6===_0x46dd42(0x2e8))_0x22e6b6=_0x22e6b6['split'](',');try{const _0xecdad4=await _0x418468[_0x46dd42(0x2d9)](_0x343090+_0x46dd42(0x1ca));if(_0xecdad4&&_0xecdad4[_0x46dd42(0x1bb)]){let _0x7a2832=tryParse(_0xecdad4[_0x46dd42(0x1bb)]);if(_0x7a2832&&Array[_0x46dd42(0x2fc)](_0x7a2832)){if(_0x22e6b6['length']>0x0)_0x7a2832=_0x7a2832[_0x46dd42(0x183)](_0x204a07=>_0x22e6b6[_0x46dd42(0x1ce)](_0x204a07[_0x46dd42(0x283)]||''));else return _0x46dd42(0x346);if(_0x7a2832['length']>0x0){const _0x41e804=_0x7a2832['slice'](0x0,0x3)['map'](_0x3bffc0=>{const _0x3352ad=_0x46dd42;let _0x3827f1=_0x3bffc0['date'];if(_0x3bffc0['time'])_0x3827f1+='\x20'+_0x3bffc0[_0x3352ad(0x1d4)];return _0x3827f1+':\x20'+_0x3bffc0[_0x3352ad(0x224)]+'\x20('+_0x3bffc0[_0x3352ad(0x283)]+')';});return _0x46dd42(0x1b7)+_0x41e804[_0x46dd42(0x195)](_0x46dd42(0x2c5));}else return _0x46dd42(0x2d0);}}}catch(_0x270a71){_0x418468[_0x46dd42(0x240)][_0x46dd42(0x28d)](_0x46dd42(0x2f7)+_0x270a71['message']);}return _0x46dd42(0x328);}catch(_0x48d39e){return _0x46dd42(0x246)+_0x48d39e[_0x46dd42(0x1f5)];}}async function getCalendarNames(_0x30dcf0,_0x315470){const _0x5ca526=a0_0x5651d4;try{const _0x48f9f6=await _0x30dcf0[_0x5ca526(0x2d9)](_0x315470+_0x5ca526(0x1ca));if(_0x48f9f6&&_0x48f9f6[_0x5ca526(0x1bb)]){const _0x57663d=tryParse(_0x48f9f6['val']);if(_0x57663d&&Array[_0x5ca526(0x2fc)](_0x57663d)){const _0x349297=[...new Set(_0x57663d[_0x5ca526(0x147)](_0x3d5208=>_0x3d5208['_calName'])['filter'](Boolean))];return _0x349297['sort']();}}return[];}catch(_0x181d3d){return _0x30dcf0['log'][_0x5ca526(0x26d)](_0x5ca526(0x32d)+_0x181d3d[_0x5ca526(0x1f5)]),[];}}async function checkWifiPresence(_0x51d064){const _0x4bad18=a0_0x5651d4;try{const _0x3b2e06=_0x51d064[_0x4bad18(0x249)][_0x4bad18(0x2f9)]||[];let _0x1029f6=![];const _0x3c07f1=[];for(const _0x5ae5d0 of _0x3b2e06){try{const _0x156752=await _0x51d064[_0x4bad18(0x2d9)](_0x5ae5d0);if(_0x156752&&(_0x156752[_0x4bad18(0x1bb)]===!![]||_0x156752[_0x4bad18(0x1bb)]===_0x4bad18(0x2cb)||_0x156752['val']===0x1)){_0x1029f6=!![];const _0x179443=await _0x51d064[_0x4bad18(0x191)](_0x5ae5d0);let _0x8988ab=_0x5ae5d0;_0x179443&&_0x179443[_0x4bad18(0x30c)]&&_0x179443[_0x4bad18(0x30c)]['name']&&(_0x8988ab=typeof _0x179443[_0x4bad18(0x30c)][_0x4bad18(0x1cb)]==='object'?_0x179443[_0x4bad18(0x30c)][_0x4bad18(0x1cb)]['de']||_0x179443[_0x4bad18(0x30c)][_0x4bad18(0x1cb)]['en']:_0x179443['common'][_0x4bad18(0x1cb)]),_0x3c07f1[_0x4bad18(0x188)](_0x8988ab);}}catch(_0x2d2467){}}return await _0x51d064[_0x4bad18(0x25b)](_0x4bad18(0x23c),{'val':_0x3c07f1['join'](',\x20'),'ack':!![]}),_0x1029f6&&(_0x51d064[_0x4bad18(0x1e0)]&&(_0x51d064[_0x4bad18(0x240)]['info'](_0x4bad18(0x12e)),abortExitTimer(_0x51d064)),!_0x51d064[_0x4bad18(0x177)]&&_0x51d064[_0x4bad18(0x2a1)]===SYSTEM_MODES[_0x4bad18(0x205)]&&await setPresence(_0x51d064,!![])),_0x1029f6;}catch(_0x102af7){return _0x51d064['log']['error'](_0x4bad18(0x14e)+_0x102af7[_0x4bad18(0x1f5)]),![];}}function startExitTimer(_0x58722c){const _0x58029b=a0_0x5651d4;abortExitTimer(_0x58722c),_0x58722c[_0x58029b(0x182)]=!![],_0x58722c[_0x58029b(0x1e5)]=setTimeout(()=>{const _0x2e0096=_0x58029b;_0x58722c[_0x2e0096(0x182)]=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),_0x58722c[_0x58029b(0x1e0)]=setTimeout(()=>{setPresence(_0x58722c,![]),_0x58722c['exitTimer']=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}function abortExitTimer(_0x568693){const _0x4f8a4b=a0_0x5651d4;if(_0x568693[_0x4f8a4b(0x1e0)])clearTimeout(_0x568693[_0x4f8a4b(0x1e0)]);if(_0x568693[_0x4f8a4b(0x1e5)])clearTimeout(_0x568693[_0x4f8a4b(0x1e5)]);_0x568693[_0x4f8a4b(0x1e0)]=null,_0x568693[_0x4f8a4b(0x1e5)]=null,_0x568693[_0x4f8a4b(0x182)]=![];}async function setPresence(_0x36ea8f,_0x2162d4){const _0x46ee04=a0_0x5651d4;if(_0x36ea8f[_0x46ee04(0x177)]===_0x2162d4)return;_0x36ea8f[_0x46ee04(0x177)]=_0x2162d4,await _0x36ea8f[_0x46ee04(0x25b)](_0x46ee04(0x2d3),{'val':_0x2162d4,'ack':!![]});}async function saveFeedback(_0x5cf92d,_0x289a9c){const _0x3b9100=a0_0x5651d4;_0x5cf92d[_0x3b9100(0x240)][_0x3b9100(0x207)](_0x3b9100(0x2ea)+JSON[_0x3b9100(0x11d)](_0x289a9c));}async function runBaselineDriftAnalysis(_0x593608){const _0xf73418=a0_0x5651d4;if(!_0x593608[_0xf73418(0x2bd)]||!_0x593608['geminiModel'])return;const _0x28c81d=_0x593608[_0xf73418(0x249)]['ltmStbWindowDays']||0xe;if(_0x593608[_0xf73418(0x29a)]['length']<_0x28c81d+(_0x593608[_0xf73418(0x249)][_0xf73418(0x273)]||0x7)){await _0x593608[_0xf73418(0x25b)](LTM_DP_DRIFT_STATUS,{'val':_0xf73418(0x30a),'ack':!![]});return;}const _0x1e070c=_0x593608[_0xf73418(0x29a)][_0xf73418(0x2e6)](-_0x28c81d),_0x32feeb=_0x593608[_0xf73418(0x29a)][_0xf73418(0x2e6)](0x0,_0x593608[_0xf73418(0x29a)][_0xf73418(0x300)]-_0x28c81d),_0x592028=_0xf73418(0x26a)+JSON[_0xf73418(0x11d)](_0x32feeb)+_0xf73418(0x154)+JSON[_0xf73418(0x11d)](_0x1e070c);try{const _0x5efac7=await _0x593608[_0xf73418(0x178)][_0xf73418(0x16e)](_0x592028),_0x2a3949=JSON[_0xf73418(0x12a)](_0x5efac7[_0xf73418(0x21f)][_0xf73418(0x2e3)]()[_0xf73418(0x136)](/```json|```/g,'')[_0xf73418(0x1bf)]());_0x2a3949[_0xf73418(0x1ba)]&&(await _0x593608[_0xf73418(0x25b)](LTM_DP_DRIFT_STATUS,{'val':_0x2a3949[_0xf73418(0x1ba)],'ack':!![]}),await _0x593608[_0xf73418(0x25b)](LTM_DP_DRIFT_DETAILS,{'val':_0x2a3949[_0xf73418(0x2c2)],'ack':!![]}),await _0x593608[_0xf73418(0x25b)](LTM_DP_DRIFT_LAST_CHECK,{'val':Date[_0xf73418(0x30f)](),'ack':!![]}));}catch(_0xb0e687){}}function setupLtmScheduler(_0x1fa0aa){const _0x3cd8d=a0_0x5651d4;try{if(_0x1fa0aa[_0x3cd8d(0x120)])_0x1fa0aa['ltmJob'][_0x3cd8d(0x312)]();if(!_0x1fa0aa['isProVersion']){_0x1fa0aa[_0x3cd8d(0x25b)](LTM_DP_STATUS,{'val':_0x3cd8d(0x27d),'ack':!![]});return;}_0x1fa0aa[_0x3cd8d(0x120)]=schedule[_0x3cd8d(0x295)](LTM_SCHEDULE,()=>createDailyDigest(_0x1fa0aa));}catch(_0x1e2746){_0x1fa0aa[_0x3cd8d(0x240)][_0x3cd8d(0x26d)](_0x3cd8d(0x20b)+_0x1e2746[_0x3cd8d(0x1f5)]);}}function setupModeResetScheduler(_0x589311){const _0x2d03e9=a0_0x5651d4;try{if(_0x589311['modeResetJob'])_0x589311[_0x2d03e9(0x2ca)][_0x2d03e9(0x312)]();_0x589311[_0x2d03e9(0x2ca)]=schedule['scheduleJob'](MODE_RESET_SCHEDULE,async()=>{const _0xac2b10=_0x2d03e9;await loadSystemMode(_0x589311),AUTO_RESET_MODES[_0xac2b10(0x1ce)](_0x589311[_0xac2b10(0x2a1)])&&await _0x589311[_0xac2b10(0x25b)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0xac2b10(0x205)],'ack':![]});});}catch(_0x27c539){_0x589311[_0x2d03e9(0x240)]['error'](_0x2d03e9(0x2b6)+_0x27c539[_0x2d03e9(0x1f5)]);}}function setupDriftAnalysisScheduler(_0x2c319a){const _0xc559a9=a0_0x5651d4;try{if(_0x2c319a['driftAnalysisTimer'])clearInterval(_0x2c319a[_0xc559a9(0x1c5)]);if(!_0x2c319a[_0xc559a9(0x2bd)])return;_0x2c319a['driftAnalysisTimer']=setInterval(()=>runBaselineDriftAnalysis(_0x2c319a),(_0x2c319a[_0xc559a9(0x249)]['ltmDriftCheckIntervalHours']||0x18)*0x36ee80),setTimeout(()=>runBaselineDriftAnalysis(_0x2c319a),0x1388);}catch(_0x51b365){_0x2c319a[_0xc559a9(0x240)][_0xc559a9(0x26d)](_0xc559a9(0x34c)+_0x51b365[_0xc559a9(0x1f5)]);}}function setupBriefingScheduler(_0x38f420){const _0x587f2d=a0_0x5651d4;try{if(_0x38f420[_0x587f2d(0x150)])_0x38f420[_0x587f2d(0x150)][_0x587f2d(0x312)]();if(!_0x38f420['config'][_0x587f2d(0x20f)])return;const _0x3b3e77=(_0x38f420[_0x587f2d(0x249)][_0x587f2d(0x2bf)]||_0x587f2d(0x256))[_0x587f2d(0x13b)](':'),_0x2c8b9a=parseInt(_0x3b3e77[0x0])||0x8,_0x58fffb=parseInt(_0x3b3e77[0x1])||0x0,_0x4a4094=_0x58fffb+'\x20'+_0x2c8b9a+'\x20*\x20*\x20*';_0x38f420[_0x587f2d(0x240)]['info'](_0x587f2d(0x2b2)+_0x2c8b9a+':'+(_0x58fffb<0xa?'0'+_0x58fffb:_0x58fffb)),_0x38f420[_0x587f2d(0x150)]=schedule['scheduleJob'](_0x4a4094,()=>{sendMorningBriefing(_0x38f420);});}catch(_0x4c54ca){_0x38f420[_0x587f2d(0x240)]['error'](_0x587f2d(0x160)+_0x4c54ca['message']);}}async function sendNotification(_0x267fff,_0x57ab3c,_0x5f9cfc=![],_0x33f64a=![]){const _0x1d6358=a0_0x5651d4;_0x267fff['log'][_0x1d6358(0x207)]((_0x5f9cfc?_0x1d6358(0x1cd):'')+_0x1d6358(0x29f)+_0x57ab3c+'\x22');const _0x41ce07=_0x267fff[_0x1d6358(0x249)];let _0x5a1aa6=0x0;if(_0x41ce07[_0x1d6358(0x24b)]){let _0x351e5f={};(_0x57ab3c[_0x1d6358(0x1ce)](_0x1d6358(0x231))||_0x33f64a)&&(_0x351e5f={'reply_markup':{'inline_keyboard':[[{'text':_0x1d6358(0x28c),'callback_data':_0x1d6358(0x14a)}],[{'text':_0x1d6358(0x1dd),'callback_data':'COGNI_REQUEST_CALL'}]]}}),await _0x267fff[_0x1d6358(0x213)](_0x41ce07[_0x1d6358(0x217)],'send',{'text':_0x57ab3c,'user':_0x41ce07[_0x1d6358(0x2e2)],..._0x351e5f}),_0x5a1aa6++;}if(_0x41ce07[_0x1d6358(0x1d2)]){let _0x262234={'message':_0x57ab3c,'title':_0x33f64a?_0x1d6358(0x14c):'Cogni-Living','priority':_0x33f64a?0x2:0x1,'device':_0x41ce07[_0x1d6358(0x2e9)]};_0x33f64a&&(_0x262234[_0x1d6358(0x2ee)]=0x1e,_0x262234[_0x1d6358(0x1b4)]=0xe10,_0x262234['sound']=_0x1d6358(0x165)),await _0x267fff['sendToAsync'](_0x41ce07['notifyPushoverInstance'],_0x1d6358(0x16d),_0x262234),_0x5a1aa6++;}return _0x41ce07[_0x1d6358(0x14b)]&&(await _0x267fff[_0x1d6358(0x213)](_0x41ce07[_0x1d6358(0x2ec)],_0x1d6358(0x16d),{'text':_0x57ab3c,'to':_0x41ce07['notifyEmailRecipient']}),_0x5a1aa6++),_0x5a1aa6;}async function setupTelegramListener(_0x5693b4){const _0x486a09=a0_0x5651d4,_0x208783=_0x5693b4[_0x486a09(0x249)][_0x486a09(0x217)];_0x5693b4[_0x486a09(0x249)][_0x486a09(0x24b)]&&_0x208783&&(_0x5693b4[_0x486a09(0x240)][_0x486a09(0x207)](_0x486a09(0x129)+_0x208783+_0x486a09(0x17f)),await _0x5693b4['subscribeForeignStatesAsync'](_0x208783+_0x486a09(0x293)));}async function handleTelegramResponse(_0xf14276,_0x3aad85){const _0x144d92=a0_0x5651d4;let _0x371b4a=_0x3aad85;_0x3aad85[_0x144d92(0x32b)]('[')&&(_0x371b4a=_0x3aad85[_0x144d92(0x1a4)](_0x3aad85['indexOf'](']')+0x1));if(_0x371b4a===_0x144d92(0x14a))_0xf14276[_0x144d92(0x240)]['info'](_0x144d92(0x2c7)),await _0xf14276[_0x144d92(0x25b)](_0x144d92(0x2a5),{'val':![],'ack':!![]}),await _0xf14276[_0x144d92(0x25b)](_0x144d92(0x1b2),{'val':'Vom\x20Benutzer\x20bestÃ¤tigt\x20(OK).','ack':!![]}),_0xf14276[_0x144d92(0x275)]=![],sendNotification(_0xf14276,_0x144d92(0x161),![]);else _0x371b4a==='COGNI_REQUEST_CALL'&&(_0xf14276[_0x144d92(0x240)][_0x144d92(0x28d)]('ðŸ“ž\x20User\x20requested\x20CALL\x20via\x20Telegram!'),sendNotification(_0xf14276,_0x144d92(0x1f8),![],!![]));}async function runAutopilot(_0x3666fb){const _0x5633f7=a0_0x5651d4,_0x1d885e=_0x3666fb[_0x5633f7(0x249)][_0x5633f7(0x25f)],_0x1dd50d=_0x3666fb[_0x5633f7(0x176)][_0x5633f7(0x300)]>0x0?_0x3666fb['eventHistory'][0x0][_0x5633f7(0x19a)]:Date[_0x5633f7(0x30f)](),_0x4922d0=(Date['now']()-_0x1dd50d)/(0x3e8*0x3c*0x3c);let _0x2ee8b8='';_0x3666fb[_0x5633f7(0x249)][_0x5633f7(0x145)]&&_0x3666fb[_0x5633f7(0x2a1)]===SYSTEM_MODES[_0x5633f7(0x205)]&&_0x3666fb['isPresent']&&(_0x4922d0>_0x1d885e&&(_0x2ee8b8='HARD\x20WATCHDOG:\x20No\x20sensor\x20activity\x20detected\x20for\x20'+_0x4922d0[_0x5633f7(0x2db)](0x1)+_0x5633f7(0x1b0))),runGeminiAnalysis(_0x3666fb,_0x2ee8b8)[_0x5633f7(0x13f)](_0x2ccc05=>_0x3666fb[_0x5633f7(0x240)]['error'](_0x2ccc05));}async function createDailyDigest(_0x484219){const _0xc50861=a0_0x5651d4;if(!_0x484219[_0xc50861(0x2bd)])return;await _0x484219[_0xc50861(0x25b)](LTM_DP_STATUS,{'val':'Started\x20at\x20'+new Date()[_0xc50861(0x259)](),'ack':!![]});if(!_0x484219['geminiModel']||_0x484219[_0xc50861(0x311)]['length']<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x484219[_0xc50861(0x25b)](LTM_DP_STATUS,{'val':_0xc50861(0x245),'ack':!![]});return;}const _0x17ad0f=JSON[_0xc50861(0x12a)](JSON[_0xc50861(0x11d)](_0x484219['rawEventLog'])),_0x331a27=_0x17ad0f[_0xc50861(0x300)],_0x389a2b='ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a'+JSON[_0xc50861(0x11d)](_0x17ad0f);try{const _0x58aed6=await _0x484219[_0xc50861(0x178)][_0xc50861(0x16e)](_0x389a2b),_0x960e71=JSON[_0xc50861(0x12a)](_0x58aed6[_0xc50861(0x21f)][_0xc50861(0x2e3)]()[_0xc50861(0x136)](/```json|```/g,'')['trim']());if(_0x960e71['summary']){const _0x257818={'timestamp':new Date()[_0xc50861(0x1c6)](),'eventCount':_0x331a27,'summary':_0x960e71[_0xc50861(0x2a7)],'activityLevel':_0x960e71[_0xc50861(0x12f)],'systemMode':_0x484219[_0xc50861(0x2a1)]};_0x484219[_0xc50861(0x29a)]['push'](_0x257818),await saveDailyDigests(_0x484219),_0x484219[_0xc50861(0x311)]=[],await saveRawEventLog(_0x484219),await _0x484219[_0xc50861(0x25b)](LTM_DP_STATUS,{'val':_0xc50861(0x265)+_0x331a27+_0xc50861(0x31c),'ack':!![]}),_0x484219[_0xc50861(0x2bd)]&&(_0x484219['log'][_0xc50861(0x207)](_0xc50861(0x33e)),sendToPython(_0x484219,'ANALYZE_HEALTH',{'digest':_0x257818}));}}catch(_0x51fb68){await _0x484219[_0xc50861(0x25b)](LTM_DP_STATUS,{'val':_0xc50861(0x18c)+_0x51fb68[_0xc50861(0x1f5)],'ack':!![]});}}async function sendMorningBriefing(_0xcb002e){const _0x252e72=a0_0x5651d4;if(!_0xcb002e[_0x252e72(0x178)])return;_0xcb002e['log']['info'](_0x252e72(0x228));const _0x1e2fc0=_0xcb002e['dailyDigests'][_0x252e72(0x300)]>0x0?_0xcb002e[_0x252e72(0x29a)][_0xcb002e['dailyDigests'][_0x252e72(0x300)]-0x1]:null,_0x42a32f=_0x1e2fc0&&_0x1e2fc0['health']?_0x1e2fc0[_0x252e72(0x348)][_0x252e72(0x28b)]:_0x252e72(0x123),_0x4d3ec3=new Date();_0x4d3ec3[_0x252e72(0x29d)](0x4,0x0,0x0,0x0);const _0x38f94d=_0xcb002e['eventHistory'][_0x252e72(0x183)](_0x5b8e72=>new Date(_0x5b8e72[_0x252e72(0x19a)])>_0x4d3ec3),_0x58cb4f=PERSONA_MAPPING[_0xcb002e[_0x252e72(0x249)]['aiPersona']||'generic'],_0xd7d4fe=_0xcb002e[_0x252e72(0x249)]['livingContext']||'',_0x5e2fc7=await getWeatherContext(_0xcb002e),_0x2fdc80=await getCalendarContext(_0xcb002e),_0x9599b=_0x252e72(0x272)+_0x58cb4f+_0x252e72(0x2ef)+_0xd7d4fe+_0x252e72(0x2a6)+_0x5e2fc7+'\x20'+_0x2fdc80+'.\x20DATEN:\x20Schlaf\x20'+_0x42a32f+_0x252e72(0x199)+JSON[_0x252e72(0x11d)](_0x38f94d[_0x252e72(0x2e6)](0x0,0xa))+_0x252e72(0x2df);try{const _0x41947d=await _0xcb002e[_0x252e72(0x178)][_0x252e72(0x16e)](_0x9599b),_0x39e63e=_0x252e72(0x15f)+_0x41947d[_0x252e72(0x21f)][_0x252e72(0x2e3)]()[_0x252e72(0x1bf)]();sendNotification(_0xcb002e,_0x39e63e),_0xcb002e['log'][_0x252e72(0x207)](_0x252e72(0x2ac));}catch(_0x1eb6fa){_0xcb002e[_0x252e72(0x240)][_0x252e72(0x26d)](_0x252e72(0x206)+_0x1eb6fa[_0x252e72(0x1f5)]);}}async function scanForDevices(_0x3977f4,_0x1d6a6b){const _0x36d10a=a0_0x5651d4;_0x3977f4[_0x36d10a(0x240)][_0x36d10a(0x207)](_0x36d10a(0x2d4));const _0x52ee31=[],_0x8f3cc8=await _0x3977f4[_0x36d10a(0x197)]('*'),_0x30f593=await _0x3977f4[_0x36d10a(0x197)](_0x36d10a(0x175),'enum'),_0x36a5b4=await _0x3977f4[_0x36d10a(0x197)]('enum.rooms.*','enum'),_0x4fdd82={};if(_0x30f593)for(const _0x34b229 in _0x30f593){const _0x5a4a98=_0x30f593[_0x34b229][_0x36d10a(0x30c)][_0x36d10a(0x2cf)]||[];_0x5a4a98[_0x36d10a(0x2f5)](_0x1018ff=>{const _0x402895=_0x36d10a;if(!_0x4fdd82[_0x1018ff])_0x4fdd82[_0x1018ff]=[];_0x4fdd82[_0x1018ff][_0x402895(0x188)](_0x34b229);});}const _0x51489a={};if(_0x36a5b4)for(const _0x43a18d in _0x36a5b4){const _0x4f9718=_0x36a5b4[_0x43a18d][_0x36d10a(0x30c)][_0x36d10a(0x2cf)]||[],_0x54236a=typeof _0x36a5b4[_0x43a18d]['common']['name']==='object'?_0x36a5b4[_0x43a18d][_0x36d10a(0x30c)][_0x36d10a(0x1cb)]['de']:_0x36a5b4[_0x43a18d][_0x36d10a(0x30c)][_0x36d10a(0x1cb)];_0x4f9718[_0x36d10a(0x2f5)](_0x144e99=>_0x51489a[_0x144e99]=_0x54236a);}const _0x4d576b=_0x1d6a6b[_0x36d10a(0x26f)]||[],_0x531d9a=_0x1d6a6b['motion']!==![],_0x396f25=_0x1d6a6b['doors']!==![],_0x153bcc=_0x1d6a6b['lights']!==![],_0x52a290=_0x1d6a6b[_0x36d10a(0x261)]===!![],_0x38b3de=_0x1d6a6b[_0x36d10a(0x16f)]===!![];for(const _0x42dbef in _0x8f3cc8){const _0x4c39d7=_0x8f3cc8[_0x42dbef];if(_0x4c39d7[_0x36d10a(0x22b)]!==_0x36d10a(0x125)||!_0x4c39d7[_0x36d10a(0x30c)])continue;if(ADAPTER_BLACKLIST[_0x36d10a(0x2be)](_0x2d1048=>_0x42dbef[_0x36d10a(0x32b)](_0x2d1048))&&!_0x38b3de)continue;const _0x2cf983=(_0x4c39d7[_0x36d10a(0x30c)][_0x36d10a(0x2f0)]||'')['toLowerCase']();let _0x2a6b2a=(typeof _0x4c39d7[_0x36d10a(0x30c)]['name']===_0x36d10a(0x1da)?_0x4c39d7[_0x36d10a(0x30c)][_0x36d10a(0x1cb)]['de']:_0x4c39d7[_0x36d10a(0x30c)][_0x36d10a(0x1cb)])||_0x42dbef;const _0x3aa752=_0x2a6b2a[_0x36d10a(0x187)]();let _0x553565=![],_0x31a92c=![];if(_0x4d576b[_0x36d10a(0x300)]>0x0){const _0x4b6916=_0x4fdd82[_0x42dbef]||[],_0xb0b27c=_0x42dbef['split']('.')[_0x36d10a(0x2e6)](0x0,-0x1)['join']('.'),_0x13d2a5=_0x4fdd82[_0xb0b27c]||[];(_0x4b6916['some'](_0x30b896=>_0x4d576b[_0x36d10a(0x1ce)](_0x30b896))||_0x13d2a5[_0x36d10a(0x2be)](_0x45aaf0=>_0x4d576b['includes'](_0x45aaf0)))&&(_0x553565=!![],_0x31a92c=!![]);}if(!_0x553565&&!_0x38b3de){if(HARD_IGNORE_TERMS[_0x36d10a(0x2be)](_0x4f3a06=>_0x42dbef[_0x36d10a(0x1ce)](_0x4f3a06)||_0x3aa752['includes'](_0x4f3a06[_0x36d10a(0x187)]())))continue;}if(BAD_NAMES[_0x36d10a(0x2be)](_0x5eb3e0=>_0x3aa752===_0x5eb3e0||_0x3aa752[_0x36d10a(0x299)]('.'+_0x5eb3e0))){const _0x140018=_0x42dbef[_0x36d10a(0x13b)]('.');if(_0x140018[_0x36d10a(0x300)]>0x2){const _0x5d51ef=_0x140018[_0x36d10a(0x2e6)](0x0,-0x1)[_0x36d10a(0x195)]('.'),_0x2a7613=_0x8f3cc8[_0x5d51ef];if(_0x2a7613&&_0x2a7613[_0x36d10a(0x30c)]&&_0x2a7613['common']['name']){const _0x5cfedf=typeof _0x2a7613[_0x36d10a(0x30c)][_0x36d10a(0x1cb)]===_0x36d10a(0x1da)?_0x2a7613[_0x36d10a(0x30c)]['name']['de']:_0x2a7613[_0x36d10a(0x30c)][_0x36d10a(0x1cb)];_0x5cfedf&&!_0x2a6b2a[_0x36d10a(0x1ce)](_0x5cfedf)&&(_0x2a6b2a=_0x5cfedf+'\x20'+_0x2a6b2a);}}}let _0x19dcf7='';if(_0x531d9a&&(_0x2cf983['includes']('motion')||_0x2cf983[_0x36d10a(0x1ce)](_0x36d10a(0x232))||_0x3aa752['includes']('bewegung')||_0x3aa752[_0x36d10a(0x1ce)]('prÃ¤senz')))_0x19dcf7='motion';else{if(!_0x19dcf7&&_0x396f25&&(_0x2cf983[_0x36d10a(0x1ce)](_0x36d10a(0x157))||_0x2cf983[_0x36d10a(0x1ce)](_0x36d10a(0x216))||_0x2cf983[_0x36d10a(0x1ce)]('lock')||_0x2cf983[_0x36d10a(0x1ce)](_0x36d10a(0x2e5))||_0x2cf983[_0x36d10a(0x1ce)](_0x36d10a(0x186))||_0x3aa752[_0x36d10a(0x1ce)](_0x36d10a(0x33d))||_0x3aa752[_0x36d10a(0x1ce)](_0x36d10a(0x166))||_0x3aa752[_0x36d10a(0x1ce)](_0x36d10a(0x303))))_0x19dcf7='door';else{if(!_0x19dcf7&&_0x153bcc&&(_0x2cf983[_0x36d10a(0x1ce)](_0x36d10a(0x34b))||_0x2cf983[_0x36d10a(0x1ce)](_0x36d10a(0x20c))||_0x2cf983[_0x36d10a(0x1ce)]('dimmer')||_0x3aa752['includes']('licht')||_0x3aa752[_0x36d10a(0x1ce)]('lampe')||_0x3aa752[_0x36d10a(0x1ce)](_0x36d10a(0x270)))){if(_0x4c39d7[_0x36d10a(0x30c)]['write']||_0x2cf983['includes'](_0x36d10a(0x233)))_0x19dcf7=_0x36d10a(0x34b);}else{if(!_0x19dcf7&&_0x52a290&&(_0x2cf983[_0x36d10a(0x1ce)](_0x36d10a(0x261))||_0x2cf983[_0x36d10a(0x1ce)](_0x36d10a(0x1d8))||_0x2cf983[_0x36d10a(0x1ce)]('thermostat')||_0x3aa752['includes'](_0x36d10a(0x2f6))||_0x3aa752[_0x36d10a(0x1ce)](_0x36d10a(0x321))||_0x3aa752[_0x36d10a(0x1ce)](_0x36d10a(0x2b7))))_0x19dcf7=_0x36d10a(0x261);else{if(!_0x19dcf7&&_0x31a92c)_0x19dcf7='custom';}}}}if(_0x19dcf7){let _0x5822b1=_0x51489a[_0x42dbef]||'';if(!_0x5822b1){let _0x1f65c7=_0x42dbef;for(let _0x2746ae=0x0;_0x2746ae<0x3;_0x2746ae++){const _0x11d4ba=_0x1f65c7[_0x36d10a(0x223)]('.');if(_0x11d4ba===-0x1)break;_0x1f65c7=_0x1f65c7[_0x36d10a(0x1a4)](0x0,_0x11d4ba);if(_0x51489a[_0x1f65c7]){_0x5822b1=_0x51489a[_0x1f65c7];break;}}}_0x52ee31[_0x36d10a(0x188)]({'id':_0x42dbef,'name':_0x2a6b2a,'location':_0x5822b1,'type':_0x19dcf7,'logDuplicates':_0x19dcf7===_0x36d10a(0x1e4),'isExit':![],'_score':_0x5822b1?0x50:_0x19dcf7===_0x36d10a(0x2c1)?0x5a:0x28});}}return _0x52ee31[_0x36d10a(0x1f1)]((_0x2aeb37,_0x19df9a)=>_0x19df9a['_score']-_0x2aeb37[_0x36d10a(0x329)]),_0x52ee31;}async function executeAutomationAction(_0x29cf08){const _0x4633ca=a0_0x5651d4;try{const _0xc7288c=await _0x29cf08[_0x4633ca(0x21b)](_0x4633ca(0x11f)),_0x35d1bd=await _0x29cf08['getStateAsync'](_0x4633ca(0x11a));if(_0xc7288c&&_0xc7288c[_0x4633ca(0x1bb)]&&_0x35d1bd){const _0x4c041b=_0xc7288c[_0x4633ca(0x1bb)];let _0x460e66=_0x35d1bd['val'];try{_0x460e66=JSON['parse'](_0x460e66);}catch(_0x3a7d47){}_0x29cf08[_0x4633ca(0x240)]['info'](_0x4633ca(0x257)+_0x4c041b+_0x4633ca(0x1ed)+_0x460e66),await _0x29cf08[_0x4633ca(0x16c)](_0x4c041b,_0x460e66);}else _0x29cf08[_0x4633ca(0x240)][_0x4633ca(0x28d)](_0x4633ca(0x33c));}catch(_0x67edb2){_0x29cf08[_0x4633ca(0x240)]['error']('BUTLER\x20Execution\x20Error:\x20'+_0x67edb2['message']);}}function tryParse(_0x4649b1){const _0x58bc7b=a0_0x5651d4;try{return JSON[_0x58bc7b(0x12a)](_0x4649b1);}catch(_0x1f1c96){return null;}}async function recordSequence(_0x4b1287,_0x1e28b9){const _0xbb9971=a0_0x5651d4,_0x62e5fa=(_0x1e28b9[_0xbb9971(0x22b)]||'')[_0xbb9971(0x187)](),_0x2fe84f=[_0xbb9971(0x1e4),_0xbb9971(0x1e2),_0xbb9971(0x170),'presence',_0xbb9971(0x232),_0xbb9971(0x157),_0xbb9971(0x166),'window','fenster',_0xbb9971(0x2c6),'kontakt','light',_0xbb9971(0x121),_0xbb9971(0x20c),_0xbb9971(0x270),_0xbb9971(0x128),_0xbb9971(0x353)];if(!_0x2fe84f[_0xbb9971(0x2be)](_0x5a25e0=>_0x62e5fa[_0xbb9971(0x1ce)](_0x5a25e0))){_0x4b1287[_0xbb9971(0x240)][_0xbb9971(0x344)]('[RECORDER\x20DEBUG]\x20Ignored\x20Event\x20'+_0x1e28b9['id']+'\x20(Type\x20\x27'+_0x1e28b9[_0xbb9971(0x22b)]+_0xbb9971(0x2dc));return;}if(!_0x1e28b9[_0xbb9971(0x2f1)]){_0x4b1287[_0xbb9971(0x240)]['debug'](_0xbb9971(0x24f)+_0x1e28b9['id']+_0xbb9971(0x1cc)+_0x1e28b9['value']+')');return;}_0x4b1287[_0xbb9971(0x240)][_0xbb9971(0x344)]('[RECORDER\x20DEBUG]\x20Accepting\x20Event\x20'+_0x1e28b9['id']+'\x20('+_0x1e28b9[_0xbb9971(0x2a0)]+')');if(sequenceTimer)clearTimeout(sequenceTimer);const _0x35be8f={'loc':_0x1e28b9[_0xbb9971(0x2a0)]||'Unknown','id':_0x1e28b9['id'],'ts':Date[_0xbb9971(0x30f)]()};activeSequence[_0xbb9971(0x188)](_0x35be8f),_0x4b1287[_0xbb9971(0x240)]['debug'](_0xbb9971(0x211)+_0x35be8f[_0xbb9971(0x2c0)]+_0xbb9971(0x221)+activeSequence[_0xbb9971(0x300)]+')'),sequenceTimer=setTimeout(async()=>{const _0x37aa3f=_0xbb9971;activeSequence['length']>0x1?await saveCompletedSequence(_0x4b1287):(_0x4b1287[_0x37aa3f(0x240)][_0x37aa3f(0x344)]('[RECORDER]\x20Discarding\x20short\x20sequence\x20(Length:\x20'+activeSequence[_0x37aa3f(0x300)]+')'),activeSequence=[]);},SEQUENCE_TIMEOUT_MS);}async function saveCompletedSequence(_0x337474){const _0x5aa20a=a0_0x5651d4;try{_0x337474[_0x5aa20a(0x240)]['info'](_0x5aa20a(0x294)+activeSequence[_0x5aa20a(0x300)]+_0x5aa20a(0x255));const _0x5ceb77=await _0x337474['getStateAsync'](_0x5aa20a(0x26b));let _0x15cfed=[];if(_0x5ceb77&&_0x5ceb77['val'])try{_0x15cfed=JSON[_0x5aa20a(0x12a)](_0x5ceb77[_0x5aa20a(0x1bb)]);}catch(_0xf020bf){}const _0x23b55b=activeSequence[0x0]['ts'],_0x2035e5=activeSequence[_0x5aa20a(0x147)](_0x461641=>({'loc':_0x461641[_0x5aa20a(0x2c0)],'t_delta':Math[_0x5aa20a(0x268)]((_0x461641['ts']-_0x23b55b)/0x3e8)})),_0x1c571c={'timestamp':new Date(_0x23b55b)['toISOString'](),'steps':_0x2035e5,'duration':Math[_0x5aa20a(0x268)]((activeSequence[activeSequence[_0x5aa20a(0x300)]-0x1]['ts']-_0x23b55b)/0x3e8),'daytime':new Date(_0x23b55b)[_0x5aa20a(0x1a0)]()};_0x15cfed['push'](_0x1c571c),_0x15cfed[_0x5aa20a(0x300)]>MAX_TRAINING_SET_SIZE&&_0x15cfed[_0x5aa20a(0x302)](),await _0x337474[_0x5aa20a(0x25b)](_0x5aa20a(0x26b),{'val':JSON[_0x5aa20a(0x11d)](_0x15cfed),'ack':!![]}),runSecurityCheck(_0x337474,_0x1c571c),activeSequence=[],sequenceTimer=null;}catch(_0x3a77e1){_0x337474[_0x5aa20a(0x240)][_0x5aa20a(0x26d)]('[RECORDER]\x20Error\x20saving\x20sequence:\x20'+_0x3a77e1['message']);}}function runSecurityCheck(_0x2adea7,_0x1b2df8){const _0x2963=a0_0x5651d4;if(!_0x2adea7['isProVersion'])return;_0x2adea7[_0x2963(0x240)][_0x2963(0x344)](_0x2963(0x200)),sendToPython(_0x2adea7,_0x2963(0x241),{'sequence':_0x1b2df8});}async function getOutsideTemperatureNumeric(_0x3a0035){const _0x1eb9f5=a0_0x5651d4;if(_0x3a0035['config']['outdoorSensorId'])try{const _0x3d2a05=await _0x3a0035[_0x1eb9f5(0x2d9)](_0x3a0035[_0x1eb9f5(0x249)][_0x1eb9f5(0x174)]);if(_0x3d2a05&&_0x3d2a05[_0x1eb9f5(0x1bb)]!==undefined&&_0x3d2a05['val']!==null){const _0x106819=parseFloat(_0x3d2a05['val']);if(!isNaN(_0x106819))return _0x106819;}}catch(_0x259282){}const _0x36f4ee=_0x3a0035[_0x1eb9f5(0x249)]['weatherInstance'];if(!_0x3a0035[_0x1eb9f5(0x249)][_0x1eb9f5(0x31a)]||!_0x36f4ee)return null;try{let _0x4e9040='';if(_0x36f4ee['includes'](_0x1eb9f5(0x11b)))_0x4e9040=_0x36f4ee+_0x1eb9f5(0x244);else{if(_0x36f4ee[_0x1eb9f5(0x1ce)](_0x1eb9f5(0x1ac)))_0x4e9040=_0x36f4ee+_0x1eb9f5(0x201);else{if(_0x36f4ee[_0x1eb9f5(0x1ce)]('openweathermap'))_0x4e9040=_0x36f4ee+_0x1eb9f5(0x1fe);else{if(_0x36f4ee[_0x1eb9f5(0x1ce)]('weatherunderground'))_0x4e9040=_0x36f4ee+_0x1eb9f5(0x284);}}}if(_0x4e9040){const _0x5f1b9e=await _0x3a0035[_0x1eb9f5(0x2d9)](_0x4e9040);if(_0x5f1b9e&&_0x5f1b9e[_0x1eb9f5(0x1bb)]!==undefined&&_0x5f1b9e[_0x1eb9f5(0x1bb)]!==null)return parseFloat(_0x5f1b9e['val']);}}catch(_0x1122c2){}return null;}async function recordThermodynamics(_0xe9c33f,_0xce1394,_0xad411,_0x44f479){const _0x3caa71=a0_0x5651d4,_0x5e9977=await getOutsideTemperatureNumeric(_0xe9c33f),_0xd43610=await _0xe9c33f[_0x3caa71(0x21b)](_0x3caa71(0x341));let _0x2da59d=[];if(_0xd43610&&_0xd43610[_0x3caa71(0x1bb)])try{_0x2da59d=JSON[_0x3caa71(0x12a)](_0xd43610[_0x3caa71(0x1bb)]);}catch(_0x5ef448){}_0x2da59d[_0x3caa71(0x188)]({'ts':Date[_0x3caa71(0x30f)](),'room':_0x44f479||_0x3caa71(0x1eb),'t_in':_0xad411,'t_out':_0x5e9977});if(_0x2da59d[_0x3caa71(0x300)]>THERMO_LOG_SIZE)_0x2da59d['shift']();await _0xe9c33f[_0x3caa71(0x25b)](_0x3caa71(0x341),{'val':JSON[_0x3caa71(0x11d)](_0x2da59d),'ack':!![]});}async function processSensorEvent(_0x2833c1,_0x5141a4,_0x2891c1,_0x1ede08){const _0xfda0bc=a0_0x5651d4;if(!_0x1ede08)return;const _0x18dd89=_0x2891c1[_0xfda0bc(0x1bb)],_0xeb366d=Date['now'](),_0x33950d=_0x2833c1[_0xfda0bc(0x27b)][_0x5141a4];_0x2833c1['sensorLastValues'][_0x5141a4]=_0x18dd89;if(!_0x1ede08[_0xfda0bc(0x29c)]&&_0x33950d!=undefined&&_0x33950d==_0x18dd89)return;const _0xca08da=(_0x1ede08['type']||'')['toLowerCase'](),_0x56a51d=_0xca08da[_0xfda0bc(0x1ce)](_0xfda0bc(0x261))||_0xca08da[_0xfda0bc(0x1ce)](_0xfda0bc(0x162))||_0xca08da[_0xfda0bc(0x1ce)](_0xfda0bc(0x321))||_0xca08da[_0xfda0bc(0x1ce)](_0xfda0bc(0x2b7));_0x2833c1[_0xfda0bc(0x2bd)]&&_0x56a51d&&recordThermodynamics(_0x2833c1,_0x5141a4,_0x18dd89,_0x1ede08['location']);const _0x15a954={'timestamp':_0xeb366d,'id':_0x5141a4,'name':_0x1ede08[_0xfda0bc(0x1cb)],'type':_0x1ede08[_0xfda0bc(0x22b)],'location':_0x1ede08['location'],'value':_0x18dd89};_0x2833c1[_0xfda0bc(0x176)]['unshift'](_0x15a954);if(_0x2833c1[_0xfda0bc(0x176)]['length']>HISTORY_MAX_SIZE)_0x2833c1[_0xfda0bc(0x176)][_0xfda0bc(0x1ea)]();await _0x2833c1[_0xfda0bc(0x25b)](_0xfda0bc(0x1c1),{'val':JSON['stringify'](_0x15a954),'ack':!![]}),await _0x2833c1['setStateAsync'](_0xfda0bc(0x22c),{'val':JSON['stringify'](_0x2833c1[_0xfda0bc(0x176)]),'ack':!![]});_0x2833c1[_0xfda0bc(0x2bd)]&&(_0x2833c1['rawEventLog'][_0xfda0bc(0x188)](_0x15a954),await saveRawEventLog(_0x2833c1),recordSequence(_0x2833c1,_0x15a954));if(_0x1ede08[_0xfda0bc(0x2a4)]&&_0x18dd89===!![]){if(_0x2833c1[_0xfda0bc(0x177)]&&!_0x2833c1['isGracePeriodActive'])startExitTimer(_0x2833c1);else{if(!_0x2833c1['isPresent'])setPresence(_0x2833c1,!![]);}}else{if(_0x1ede08['type']===_0xfda0bc(0x1e4)&&_0x18dd89===!![]){if(_0x2833c1['exitTimer'])abortExitTimer(_0x2833c1);if(!_0x2833c1[_0xfda0bc(0x177)]&&_0x2833c1[_0xfda0bc(0x2a1)]===SYSTEM_MODES['NORMAL'])setPresence(_0x2833c1,!![]);}}}async function runGeminiAnalysis(_0x407de4,_0x61374=''){const _0x1b718b=a0_0x5651d4;if(!_0x407de4['geminiModel'])return;if(_0x407de4[_0x1b718b(0x176)][_0x1b718b(0x300)]===0x0)return;const _0x431c54=_0x407de4[_0x1b718b(0x176)][_0x1b718b(0x2e6)](0x0,0xf),_0x2d9970=await getWeatherContext(_0x407de4),_0x3970f6=_0x407de4[_0x1b718b(0x2a1)],_0x5a9363=PERSONA_MAPPING[_0x407de4[_0x1b718b(0x249)][_0x1b718b(0x352)]||_0x1b718b(0x25a)],_0x61da33=_0x407de4['config'][_0x1b718b(0x138)]||_0x1b718b(0x237);let _0x1e2a22='Unbekannt';try{const _0x3c2056=await _0x407de4['getStateAsync'](_0x1b718b(0x23c));if(_0x3c2056&&_0x3c2056[_0x1b718b(0x1bb)])_0x1e2a22=_0x3c2056[_0x1b718b(0x1bb)];}catch(_0xa14233){}let _0x3f7686=![];try{const _0x209a1f=await _0x407de4[_0x1b718b(0x21b)](_0x1b718b(0x281));if(_0x209a1f&&_0x209a1f['val'])_0x3f7686=!![];}catch(_0x13e0ac){}const _0x31f723=_0x1b718b(0x278)+_0x5a9363+_0x1b718b(0x2ef)+_0x61da33+'.\x20SYSTEM_MODE:\x20'+_0x3970f6+_0x1b718b(0x1a9)+_0x2d9970+_0x1b718b(0x32e)+(_0x61374||'Keiner')+'.\x20ANWESENHEITS_STATUS:\x20'+(_0x407de4[_0x1b718b(0x177)]?_0x1b718b(0x203):_0x1b718b(0x1ef))+_0x1b718b(0x263)+_0x1e2a22+_0x1b718b(0x338)+JSON[_0x1b718b(0x11d)](_0x431c54)+_0x1b718b(0x23f);try{const _0x3353bb=await _0x407de4[_0x1b718b(0x178)][_0x1b718b(0x16e)](_0x31f723),_0x1e6d6f=_0x3353bb['response'][_0x1b718b(0x2e3)]()[_0x1b718b(0x136)](/```json|```/g,'')[_0x1b718b(0x1bf)](),_0x254d10=JSON[_0x1b718b(0x12a)](_0x1e6d6f);await _0x407de4['setStateAsync'](_0x1b718b(0x269),{'val':JSON[_0x1b718b(0x11d)](_0x254d10),'ack':!![]});if(_0x254d10[_0x1b718b(0x2a7)])await _0x407de4[_0x1b718b(0x25b)](_0x1b718b(0x218),{'val':_0x254d10['summary'],'ack':!![]});const _0x12b7ee={'timestamp':Date['now'](),'id':Date[_0x1b718b(0x30f)]()['toString'](),'analysis':{'activity':{'summary':_0x254d10['summary']||_0x1b718b(0x164),'isAlert':_0x254d10[_0x1b718b(0x18b)]||![],'alertReason':_0x254d10[_0x1b718b(0x347)]},'comfort':{'automationProposal':_0x254d10[_0x1b718b(0x222)]}}};await updateAnalysisHistory(_0x407de4,_0x12b7ee);const _0x15648c=_0x254d10[_0x1b718b(0x18b)]||![];_0x15648c!==_0x407de4[_0x1b718b(0x275)]&&(await _0x407de4[_0x1b718b(0x25b)](_0x1b718b(0x2a5),{'val':_0x15648c,'ack':!![]}),_0x407de4[_0x1b718b(0x275)]=_0x15648c,_0x15648c&&(await _0x407de4[_0x1b718b(0x25b)](_0x1b718b(0x1b2),{'val':_0x254d10[_0x1b718b(0x347)],'ack':!![]}),sendNotification(_0x407de4,_0x1b718b(0x2bb)+_0x254d10[_0x1b718b(0x347)],![],_0x254d10[_0x1b718b(0x2cd)]))),_0x254d10['automationProposal']&&_0x254d10[_0x1b718b(0x222)]['detected']&&_0x254d10[_0x1b718b(0x222)][_0x1b718b(0x34d)]&&(await _0x407de4[_0x1b718b(0x25b)](_0x1b718b(0x2eb),{'val':!![],'ack':!![]}),await _0x407de4['setStateAsync'](_0x1b718b(0x1d3),{'val':_0x254d10['automationProposal'][_0x1b718b(0x1fb)],'ack':!![]}),await _0x407de4[_0x1b718b(0x25b)](_0x1b718b(0x11f),{'val':_0x254d10[_0x1b718b(0x222)][_0x1b718b(0x34d)],'ack':!![]}),await _0x407de4['setStateAsync'](_0x1b718b(0x11a),{'val':JSON[_0x1b718b(0x11d)](_0x254d10[_0x1b718b(0x222)][_0x1b718b(0x327)]),'ack':!![]}),_0x3f7686&&await executeAutomationAction(_0x407de4));}catch(_0x5bf484){_0x407de4[_0x1b718b(0x240)][_0x1b718b(0x26d)](_0x1b718b(0x141)+_0x5bf484[_0x1b718b(0x1f5)]);}}function installPythonDependencies(_0x55e397){const _0x5a6563=a0_0x5651d4;if(_0x55e397[_0x5a6563(0x127)])return;_0x55e397['dependencyInstallInProgress']=!![];const _0x1d6470=path['join'](__dirname,_0x5a6563(0x149),_0x5a6563(0x24c));_0x55e397['log'][_0x5a6563(0x207)](_0x5a6563(0x334)+_0x1d6470+'...'),stopPythonService(_0x55e397);const _0x4e5bef='python3\x20-m\x20pip\x20install\x20-r\x20\x22'+_0x1d6470+_0x5a6563(0x173);exec(_0x4e5bef,(_0x340970,_0x55597a,_0x33e91f)=>{const _0x35c730=_0x5a6563,_0x55dfcf=_0x33e91f&&_0x33e91f[_0x35c730(0x1ce)](_0x35c730(0x1fa))||_0x340970&&_0x340970['message'][_0x35c730(0x1ce)]('No\x20module\x20named\x20pip');if(_0x55dfcf){_0x55e397[_0x35c730(0x240)][_0x35c730(0x28d)](_0x35c730(0x17b)),exec('python3\x20-m\x20ensurepip\x20--default-pip\x20--user',(_0x57d00f,_0x996d75,_0x27ebfe)=>{const _0x594d14=_0x35c730;_0x57d00f?(_0x55e397[_0x594d14(0x240)][_0x594d14(0x26d)](_0x594d14(0x225)),_0x55e397[_0x594d14(0x127)]=![]):(_0x55e397['log'][_0x594d14(0x207)](_0x594d14(0x306)),exec(_0x594d14(0x317)+_0x1d6470+_0x594d14(0x18f),(_0x23c317,_0x387534,_0x8f6d6f)=>{const _0x3ceb88=_0x594d14;_0x23c317?_0x55e397['log'][_0x3ceb88(0x26d)](_0x3ceb88(0x163)+_0x23c317[_0x3ceb88(0x1f5)]):(_0x55e397['log'][_0x3ceb88(0x207)](_0x3ceb88(0x313)),startPythonService(_0x55e397)),_0x55e397[_0x3ceb88(0x127)]=![];}));});return;}_0x55e397[_0x35c730(0x127)]=![],_0x340970?_0x55e397[_0x35c730(0x240)][_0x35c730(0x26d)](_0x35c730(0x2c8)+(_0x33e91f||_0x340970[_0x35c730(0x1f5)])):(_0x55e397[_0x35c730(0x240)][_0x35c730(0x207)](_0x35c730(0x13a)),startPythonService(_0x55e397));});}function sendToPython(_0x17a8c6,_0x7d4cd4,_0x1b1005={}){const _0x2df333=a0_0x5651d4;if(!_0x17a8c6[_0x2df333(0x168)]||!_0x17a8c6['pythonProcess']['stdin'][_0x2df333(0x1c7)])return;const _0x421f4e=JSON[_0x2df333(0x11d)]({'command':_0x7d4cd4,..._0x1b1005});try{_0x17a8c6[_0x2df333(0x168)][_0x2df333(0x1e7)][_0x2df333(0x153)](_0x421f4e+'\x0a');}catch(_0x9d985e){_0x17a8c6[_0x2df333(0x240)][_0x2df333(0x26d)](_0x2df333(0x1b1)+_0x9d985e['message']);}}function runPythonHealthCheck(_0x3ade99){const _0x56b160=a0_0x5651d4;if(!_0x3ade99['dailyDigests']||_0x3ade99[_0x56b160(0x29a)][_0x56b160(0x300)]<0x2)return;const _0x3cbd39=_0x3ade99[_0x56b160(0x29a)]['map'](_0x2bd149=>{const _0x480ec9=_0x56b160,_0x34f409=(_0x2bd149[_0x480ec9(0x12f)]||'')[_0x480ec9(0x187)]();return ACTIVITY_LEVEL_MAP[_0x34f409]||0x32;});_0x3ade99[_0x56b160(0x240)][_0x56b160(0x207)](_0x56b160(0x1f3)+_0x3cbd39[_0x56b160(0x300)]+'\x20days\x20of\x20activity\x20data\x20to\x20Python...'),sendToPython(_0x3ade99,_0x56b160(0x21d),{'values':_0x3cbd39,'tag':_0x56b160(0x1e3)});}function handlePythonResult(_0x5c5777,_0x35896f){const _0x46e1ad=a0_0x5651d4;if(_0x35896f[_0x46e1ad(0x22b)]==='PONG')_0x5c5777[_0x46e1ad(0x240)][_0x46e1ad(0x344)](_0x46e1ad(0x1d6));else{if(_0x35896f['type']==='TREND_RESULT'){const {tag:_0x153152,diagnosis:_0xb7ee01,change_percent:_0x2863c1}=_0x35896f[_0x46e1ad(0x318)];_0x5c5777[_0x46e1ad(0x240)][_0x46e1ad(0x207)]('ðŸ\x20Guardian\x20Diagnosis\x20('+_0x153152+_0x46e1ad(0x1c9)+_0xb7ee01+'\x20('+_0x2863c1+'%)'),_0x5c5777[_0x46e1ad(0x25b)](_0x46e1ad(0x320),{'val':_0xb7ee01,'ack':!![]}),_0x5c5777[_0x46e1ad(0x25b)](_0x46e1ad(0x155),{'val':_0x2863c1,'ack':!![]});}else{if(_0x35896f[_0x46e1ad(0x22b)]===_0x46e1ad(0x264)){const {success:_0x4c2577,details:_0xf8631f}=_0x35896f['payload'];_0x4c2577?(_0x5c5777[_0x46e1ad(0x240)][_0x46e1ad(0x207)]('âœ…\x20SECURITY\x20MODEL\x20TRAINED!\x20Details:\x20'+_0xf8631f),_0x5c5777[_0x46e1ad(0x25b)](_0x46e1ad(0x336),{'val':_0x46e1ad(0x2aa)+new Date()['toLocaleTimeString']()+'\x20('+_0xf8631f+')','ack':!![]})):(_0x5c5777['log']['error']('âŒ\x20Training\x20failed:\x20'+(_0xf8631f||_0x46e1ad(0x148))),_0x5c5777[_0x46e1ad(0x25b)](_0x46e1ad(0x336),{'val':_0x46e1ad(0x289)+_0xf8631f,'ack':!![]}));}else{if(_0x35896f[_0x46e1ad(0x22b)]===_0x46e1ad(0x319)){const {success:_0x224b88,details:_0x514ebe}=_0x35896f[_0x46e1ad(0x318)];if(_0x224b88)_0x5c5777[_0x46e1ad(0x240)][_0x46e1ad(0x207)](_0x46e1ad(0x140)+_0x514ebe);else _0x5c5777['log'][_0x46e1ad(0x26d)]('âŒ\x20Health\x20Training\x20Failed:\x20'+_0x514ebe);}else{if(_0x35896f[_0x46e1ad(0x22b)]==='HEALTH_RESULT'){const {is_anomaly:_0x4a0740,details:_0x3f673c}=_0x35896f[_0x46e1ad(0x318)];_0x5c5777[_0x46e1ad(0x25b)](_0x46e1ad(0x1e9),{'val':new Date()['toISOString'](),'ack':!![]}),_0x5c5777[_0x46e1ad(0x25b)](_0x46e1ad(0x1f6),{'val':_0x4a0740,'ack':!![]});if(_0x4a0740)_0x5c5777[_0x46e1ad(0x240)][_0x46e1ad(0x28d)]('ðŸ©º\x20HEALTH\x20WARNING:\x20'+_0x3f673c);}else{if(_0x35896f[_0x46e1ad(0x22b)]==='ENERGY_TRAIN_RESULT'){const {success:_0x2f0f1c,details:_0x392bb9}=_0x35896f['payload'];_0x2f0f1c?(_0x5c5777['log'][_0x46e1ad(0x207)]('âœ…\x20ENERGY\x20MODEL\x20TRAINED!\x20'+_0x392bb9),_0x5c5777['setStateAsync']('analysis.energy.insulationScore',{'val':_0x392bb9,'ack':!![]})):_0x5c5777['log'][_0x46e1ad(0x26d)](_0x46e1ad(0x349)+_0x392bb9);}else{if(_0x35896f['type']===_0x46e1ad(0x2d1)){const {anomaly_score:_0x2370e5,is_anomaly:_0x53c9ce,threshold:_0x14ae80}=_0x35896f['payload'];_0x5c5777['log'][_0x46e1ad(0x207)](_0x46e1ad(0x290)+_0x2370e5[_0x46e1ad(0x2db)](0x5)+_0x46e1ad(0x351)+_0x14ae80+_0x46e1ad(0x171)+(_0x53c9ce?_0x46e1ad(0x350):'OK')),_0x5c5777[_0x46e1ad(0x25b)](_0x46e1ad(0x14f),{'val':_0x2370e5,'ack':!![]}),_0x5c5777[_0x46e1ad(0x25b)](_0x46e1ad(0x156),{'val':new Date()[_0x46e1ad(0x1c6)](),'ack':!![]});if(_0x53c9ce){const _0x282e55=_0x46e1ad(0x2e7)+_0x2370e5['toFixed'](0x4)+')';_0x5c5777[_0x46e1ad(0x25b)](_0x46e1ad(0x2a5),{'val':!![],'ack':!![]}),_0x5c5777[_0x46e1ad(0x25b)]('analysis.alertReason',{'val':_0x282e55,'ack':!![]}),sendNotification(_0x5c5777,'âš ï¸\x20SECURITY\x20ALARM:\x20'+_0x282e55,![],!![]);}}}}}}}}}function startPythonService(_0x326cd5){const _0xe783f3=a0_0x5651d4;try{const _0x4b677f=path[_0xe783f3(0x195)](__dirname,_0xe783f3(0x149),_0xe783f3(0x1e1));_0x326cd5[_0xe783f3(0x240)][_0xe783f3(0x207)](_0xe783f3(0x315)+_0x4b677f),_0x326cd5['pythonProcess']=spawn(_0xe783f3(0x19d),[_0x4b677f]),_0x326cd5['pythonProcess']['stdout']['on'](_0xe783f3(0x1bc),_0x4212d9=>{const _0x284c68=_0xe783f3,_0x455395=_0x4212d9[_0x284c68(0x194)]()[_0x284c68(0x13b)]('\x0a');_0x455395['forEach'](_0x263661=>{const _0x351fac=_0x284c68,_0x5a86b3=_0x263661[_0x351fac(0x1bf)]();if(!_0x5a86b3)return;if(_0x5a86b3[_0x351fac(0x32b)]('[LOG]'))_0x326cd5['log']['debug'](_0x351fac(0x2d2)+_0x5a86b3[_0x351fac(0x1a4)](0x5)['trim']());else{if(_0x5a86b3[_0x351fac(0x32b)](_0x351fac(0x2dd)))try{const _0x58ba66=JSON[_0x351fac(0x12a)](_0x5a86b3['substring'](0x8)[_0x351fac(0x1bf)]());handlePythonResult(_0x326cd5,_0x58ba66);}catch(_0x1d7f61){_0x326cd5[_0x351fac(0x240)][_0x351fac(0x28d)]('Invalid\x20JSON\x20from\x20Python:\x20'+_0x5a86b3);}}(_0x5a86b3['includes'](_0x351fac(0x1aa))||_0x5a86b3[_0x351fac(0x1ce)]('Bibliotheken\x20nicht\x20gefunden'))&&(_0x326cd5[_0x351fac(0x240)][_0x351fac(0x28d)]('âš ï¸\x20Python\x20missing\x20dependencies.\x20Triggering\x20Auto-Install...'),installPythonDependencies(_0x326cd5));});}),_0x326cd5[_0xe783f3(0x168)][_0xe783f3(0x227)]['on'](_0xe783f3(0x1bc),_0x56433c=>{const _0x4dee9b=_0xe783f3,_0x34f156=_0x56433c['toString']()[_0x4dee9b(0x1bf)]();_0x326cd5['log'][_0x4dee9b(0x26d)](_0x4dee9b(0x17a)+_0x34f156);}),_0x326cd5['pythonProcess']['on'](_0xe783f3(0x13e),_0x326b25=>{const _0x12ca52=_0xe783f3;_0x326cd5['log']['info'](_0x12ca52(0x21a)+_0x326b25),_0x326cd5[_0x12ca52(0x168)]=null;}),_0x326cd5[_0xe783f3(0x168)]['on'](_0xe783f3(0x26d),_0x16485a=>{const _0x3138a8=_0xe783f3;_0x326cd5[_0x3138a8(0x240)][_0x3138a8(0x28d)]('[PYTHON]\x20Failed\x20to\x20start:\x20'+_0x16485a[_0x3138a8(0x1f5)]);});}catch(_0x28c3f7){_0x326cd5[_0xe783f3(0x240)]['error'](_0xe783f3(0x2fd)+_0x28c3f7[_0xe783f3(0x1f5)]);}}function stopPythonService(_0x2039a8){const _0x4081da=a0_0x5651d4;if(_0x2039a8['pythonProcess']){_0x2039a8['log'][_0x4081da(0x207)]('ðŸ\x20Stopping\x20Python\x20Sidecar...');try{_0x2039a8[_0x4081da(0x168)]['kill']();}catch(_0x4344ca){_0x2039a8['log'][_0x4081da(0x28d)](_0x4081da(0x276)+_0x4344ca[_0x4081da(0x1f5)]);}_0x2039a8[_0x4081da(0x168)]=null;}}class CogniLiving extends utils[a0_0x5651d4(0x27a)]{constructor(_0xc71fb2){const _0x3fe5c9=a0_0x5651d4;super({..._0xc71fb2,'name':_0x3fe5c9(0x282)}),this[_0x3fe5c9(0x176)]=[],this[_0x3fe5c9(0x204)]=[],this['feedbackHistory']=[],this[_0x3fe5c9(0x311)]=[],this[_0x3fe5c9(0x29a)]=[],this['sensorLastValues']={},this['systemConfig']={'latitude':0x0,'longitude':0x0,'city':''},this['isPresent']=!![],this[_0x3fe5c9(0x1e0)]=null,this['exitGraceTimer']=null,this[_0x3fe5c9(0x182)]=![],this[_0x3fe5c9(0x158)]=null,this['geminiModel']=null,this[_0x3fe5c9(0x2a1)]=SYSTEM_MODES[_0x3fe5c9(0x205)],this[_0x3fe5c9(0x2bd)]=![],this[_0x3fe5c9(0x275)]=![],this[_0x3fe5c9(0x11e)]=_0x3fe5c9(0x1db),this[_0x3fe5c9(0x238)]=null,this['ltmJob']=null,this['modeResetJob']=null,this[_0x3fe5c9(0x1c5)]=null,this[_0x3fe5c9(0x150)]=null,this[_0x3fe5c9(0x168)]=null,this['dependencyInstallInProgress']=![],this['on'](_0x3fe5c9(0x309),this['onReady'][_0x3fe5c9(0x296)](this)),this['on'](_0x3fe5c9(0x262),this[_0x3fe5c9(0x122)][_0x3fe5c9(0x296)](this)),this['on'](_0x3fe5c9(0x26c),this['onUnload'][_0x3fe5c9(0x296)](this)),this['on'](_0x3fe5c9(0x1f5),this['onMessage'][_0x3fe5c9(0x296)](this));}async[a0_0x5651d4(0x130)](){const _0x2e5804=a0_0x5651d4;this[_0x2e5804(0x240)]['info'](_0x2e5804(0x1fd)+this[_0x2e5804(0x220)]+')'),await initZombies(this),this['config'][_0x2e5804(0x1df)]=this['config'][_0x2e5804(0x1df)]||'';try{this[_0x2e5804(0x2bd)]=await checkLicense(this,this[_0x2e5804(0x249)][_0x2e5804(0x1df)]);}catch(_0x19f3ff){}if(!this[_0x2e5804(0x249)][_0x2e5804(0x25f)]||this[_0x2e5804(0x249)]['inactivityThresholdHours']<0.1)this[_0x2e5804(0x249)][_0x2e5804(0x25f)]=0xc;await initHistory(this),await initSystemConfig(this);if(this['config'][_0x2e5804(0x13d)])try{this[_0x2e5804(0x158)]=new GoogleGenerativeAI(this[_0x2e5804(0x249)][_0x2e5804(0x13d)]),this[_0x2e5804(0x178)]=this[_0x2e5804(0x158)][_0x2e5804(0x23d)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x2e5804(0x2e1)}}),this[_0x2e5804(0x240)][_0x2e5804(0x207)](_0x2e5804(0x139));}catch(_0x937019){this['log']['error'](_0x2e5804(0x337)+_0x937019[_0x2e5804(0x1f5)]);}await createAllObjects(this),await loadSystemMode(this),await loadRawEventLog(this),await loadDailyDigests(this),this[_0x2e5804(0x266)](_0x2e5804(0x267)),this['subscribeStates'](LTM_DP_TRIGGER_DIGEST),this[_0x2e5804(0x266)](_0x2e5804(0x2e4)),this[_0x2e5804(0x266)](_0x2e5804(0x247)),this[_0x2e5804(0x266)](_0x2e5804(0x21e)),this[_0x2e5804(0x266)]('analysis.automation.autoApply'),this[_0x2e5804(0x266)]('analysis.training.triggerSecurity'),this[_0x2e5804(0x266)](_0x2e5804(0x1c8)),this['subscribeStates'](_0x2e5804(0x28e)),await initSensorSubscriptions(this),await initPresenceSubscriptions(this),await setupTelegramListener(this),setTimeout(()=>checkWifiPresence(this),0x1388);if(this[_0x2e5804(0x238)])clearInterval(this['analysisTimer']);const _0x428e14=this[_0x2e5804(0x249)]['analysisInterval']||0xf;_0x428e14>0x0&&(this[_0x2e5804(0x238)]=setInterval(()=>{runAutopilot(this);},_0x428e14*0x3c*0x3e8)),setupLtmScheduler(this),setupModeResetScheduler(this),setupDriftAnalysisScheduler(this),setupBriefingScheduler(this),startPythonService(this),setTimeout(()=>{const _0x2c7ccc=_0x2e5804;if(this[_0x2c7ccc(0x168)])runPythonHealthCheck(this);},0x1388);}[a0_0x5651d4(0x133)](_0x386c88){const _0x1f0032=a0_0x5651d4;if(this[_0x1f0032(0x238)])clearInterval(this[_0x1f0032(0x238)]);if(this[_0x1f0032(0x1c5)])clearInterval(this[_0x1f0032(0x1c5)]);if(this[_0x1f0032(0x120)])this[_0x1f0032(0x120)][_0x1f0032(0x312)]();if(this[_0x1f0032(0x2ca)])this['modeResetJob']['cancel']();if(this[_0x1f0032(0x150)])this[_0x1f0032(0x150)]['cancel']();if(this[_0x1f0032(0x1e0)])clearTimeout(this[_0x1f0032(0x1e0)]);if(this[_0x1f0032(0x1e5)])clearTimeout(this[_0x1f0032(0x1e5)]);stopPythonService(this),_0x386c88();}async[a0_0x5651d4(0x122)](_0x19e1a4,_0x981749){const _0x1107f8=a0_0x5651d4;if(!_0x981749)return;if(_0x19e1a4[_0x1107f8(0x1ce)](_0x1107f8(0x2f3))&&_0x19e1a4[_0x1107f8(0x299)]('communicate.request')&&_0x981749['val']){await handleTelegramResponse(this,_0x981749[_0x1107f8(0x1bb)]);return;}if(_0x19e1a4===this[_0x1107f8(0x219)]+'.'+SYSTEM_DP_MODE){if(_0x981749[_0x1107f8(0x1bb)]&&Object[_0x1107f8(0x24a)](SYSTEM_MODES)[_0x1107f8(0x1ce)](_0x981749[_0x1107f8(0x1bb)])){this[_0x1107f8(0x2a1)]=_0x981749['val'];if(_0x981749[_0x1107f8(0x1bb)]===SYSTEM_MODES[_0x1107f8(0x2fe)])await setPresence(this,![]);else await setPresence(this,!![]);}if(!_0x981749[_0x1107f8(0x1f0)])this[_0x1107f8(0x30d)](_0x19e1a4,{'val':this[_0x1107f8(0x2a1)],'ack':!![]});return;}if(!_0x981749['ack']){_0x19e1a4[_0x1107f8(0x1ce)](_0x1107f8(0x267))&&_0x981749[_0x1107f8(0x1bb)]&&(this['setState'](_0x19e1a4,{'val':![],'ack':!![]}),runGeminiAnalysis(this));if(_0x19e1a4[_0x1107f8(0x1ce)](_0x1107f8(0x345))&&_0x981749[_0x1107f8(0x1bb)]){this[_0x1107f8(0x30d)](_0x19e1a4,{'val':![],'ack':!![]});if(this[_0x1107f8(0x2bd)])createDailyDigest(this);}_0x19e1a4[_0x1107f8(0x1ce)](_0x1107f8(0x22a))&&_0x981749['val']&&(this[_0x1107f8(0x30d)](_0x19e1a4,{'val':![],'ack':!![]}),sendMorningBriefing(this));_0x19e1a4[_0x1107f8(0x1ce)](_0x1107f8(0x248))&&_0x981749['val']&&(this[_0x1107f8(0x30d)](_0x19e1a4,{'val':![],'ack':!![]}),executeAutomationAction(this));if(_0x19e1a4[_0x1107f8(0x1ce)](_0x1107f8(0x11c))&&_0x981749[_0x1107f8(0x1bb)]){this[_0x1107f8(0x30d)](_0x19e1a4,{'val':![],'ack':!![]});if(!this[_0x1107f8(0x2bd)])return;try{const _0x30f439=await this['getStateAsync'](_0x1107f8(0x26b));if(_0x30f439&&_0x30f439['val']){const _0x4c1281=JSON[_0x1107f8(0x12a)](_0x30f439[_0x1107f8(0x1bb)]);this[_0x1107f8(0x240)][_0x1107f8(0x207)]('ðŸ§ \x20Triggering\x20Security\x20Training...'),this[_0x1107f8(0x25b)](_0x1107f8(0x336),{'val':_0x1107f8(0x314),'ack':!![]}),sendToPython(this,_0x1107f8(0x23b),{'sequences':_0x4c1281});}}catch(_0x2697bf){this[_0x1107f8(0x240)][_0x1107f8(0x26d)](_0x1107f8(0x1be)+_0x2697bf[_0x1107f8(0x1f5)]);}}if(_0x19e1a4[_0x1107f8(0x1ce)]('analysis.training.triggerHealth')&&_0x981749['val']){this[_0x1107f8(0x30d)](_0x19e1a4,{'val':![],'ack':!![]});if(!this[_0x1107f8(0x2bd)])return;try{const _0x194275=await this[_0x1107f8(0x21b)](LTM_DP_DAILY_DIGESTS);if(_0x194275&&_0x194275[_0x1107f8(0x1bb)]){const _0x3205fe=JSON[_0x1107f8(0x12a)](_0x194275[_0x1107f8(0x1bb)]);this['log'][_0x1107f8(0x207)](_0x1107f8(0x15e)),sendToPython(this,_0x1107f8(0x13c),{'digests':_0x3205fe});}}catch(_0x4007a7){this[_0x1107f8(0x240)][_0x1107f8(0x26d)](_0x1107f8(0x17d)+_0x4007a7[_0x1107f8(0x1f5)]);}}if(_0x19e1a4[_0x1107f8(0x1ce)](_0x1107f8(0x28e))&&_0x981749[_0x1107f8(0x1bb)]){this[_0x1107f8(0x30d)](_0x19e1a4,{'val':![],'ack':!![]});if(!this[_0x1107f8(0x2bd)])return;try{const _0x3fb00c=await this[_0x1107f8(0x21b)](_0x1107f8(0x341));if(_0x3fb00c&&_0x3fb00c[_0x1107f8(0x1bb)]){const _0x1c298b=JSON['parse'](_0x3fb00c['val']);this[_0x1107f8(0x240)][_0x1107f8(0x207)](_0x1107f8(0x1a2)),sendToPython(this,_0x1107f8(0x134),{'points':_0x1c298b});}}catch(_0x867d92){this[_0x1107f8(0x240)][_0x1107f8(0x26d)](_0x1107f8(0x1af)+_0x867d92[_0x1107f8(0x1f5)]);}}return;}if(this['config'][_0x1107f8(0x2f9)]&&this[_0x1107f8(0x249)][_0x1107f8(0x2f9)][_0x1107f8(0x1ce)](_0x19e1a4)){await checkWifiPresence(this);return;}const _0x548082=(this[_0x1107f8(0x249)]['devices']||[])[_0x1107f8(0x14d)](_0x539cb6=>_0x539cb6['id']===_0x19e1a4);if(_0x548082)processSensorEvent(this,_0x19e1a4,_0x981749,_0x548082);}async[a0_0x5651d4(0x340)](_0x160e4c){const _0x4229e6=a0_0x5651d4;if(typeof _0x160e4c===_0x4229e6(0x1da)&&_0x160e4c[_0x4229e6(0x1f5)])try{if(_0x160e4c[_0x4229e6(0x274)]===_0x4229e6(0x25c)){const _0x14f9e8=_0x160e4c[_0x4229e6(0x1f5)]['apiKey']||this[_0x4229e6(0x249)][_0x4229e6(0x13d)];if(!_0x14f9e8)return this['sendTo'](_0x160e4c[_0x4229e6(0x172)],_0x160e4c[_0x4229e6(0x274)],{'success':![],'message':_0x4229e6(0x180)},_0x160e4c['callback']);try{const _0x1a8d6f=new GoogleGenerativeAI(_0x14f9e8),_0x277ab4=_0x1a8d6f['getGenerativeModel']({'model':GEMINI_MODEL}),_0x51bc6f=await _0x277ab4[_0x4229e6(0x16e)](_0x4229e6(0x198)),_0x5e7722=await _0x51bc6f[_0x4229e6(0x21f)],_0x549e60=_0x5e7722[_0x4229e6(0x2e3)]();this[_0x4229e6(0x31f)](_0x160e4c['from'],_0x160e4c[_0x4229e6(0x274)],{'success':!![],'message':_0x4229e6(0x1c4)+_0x549e60[_0x4229e6(0x1a4)](0x0,0x14)+_0x4229e6(0x12c)},_0x160e4c[_0x4229e6(0x2e0)]);}catch(_0xc1f0a6){this[_0x4229e6(0x31f)](_0x160e4c[_0x4229e6(0x172)],_0x160e4c[_0x4229e6(0x274)],{'success':![],'message':_0x4229e6(0x277)+_0xc1f0a6['message']},_0x160e4c[_0x4229e6(0x2e0)]);}}else{if(_0x160e4c[_0x4229e6(0x274)]===_0x4229e6(0x27e)){const _0x57a07=await getWeatherContext(this),_0x25241e=await getCalendarContext(this);this[_0x4229e6(0x31f)](_0x160e4c[_0x4229e6(0x172)],_0x160e4c['command'],{'success':!![],'weather':_0x57a07,'calendar':_0x25241e},_0x160e4c[_0x4229e6(0x2e0)]);}else{if(_0x160e4c[_0x4229e6(0x274)]===_0x4229e6(0x331)){}else{if(_0x160e4c['command']===_0x4229e6(0x33b)){if(!this[_0x4229e6(0x2bd)])return this['sendTo'](_0x160e4c[_0x4229e6(0x172)],_0x160e4c[_0x4229e6(0x274)],{'success':![],'isPro':![]},_0x160e4c[_0x4229e6(0x2e0)]);let _0x348f06={'status':_0x4229e6(0x123),'details':'','lastCheck':0x0};try{_0x348f06[_0x4229e6(0x1a1)]=(await this[_0x4229e6(0x21b)](LTM_DP_DRIFT_STATUS))[_0x4229e6(0x1bb)],_0x348f06['details']=(await this['getStateAsync'](LTM_DP_DRIFT_DETAILS))[_0x4229e6(0x1bb)],_0x348f06[_0x4229e6(0x159)]=(await this[_0x4229e6(0x21b)](LTM_DP_DRIFT_LAST_CHECK))[_0x4229e6(0x1bb)];}catch(_0xda8157){}const _0x505731=this[_0x4229e6(0x204)]||[];this[_0x4229e6(0x31f)](_0x160e4c[_0x4229e6(0x172)],_0x160e4c[_0x4229e6(0x274)],{'success':!![],'isPro':!![],'dailyDigests':this['dailyDigests'],'driftAnalysis':_0x348f06,'analysisHistory':_0x505731},_0x160e4c[_0x4229e6(0x2e0)]);}else{if(_0x160e4c[_0x4229e6(0x274)]===_0x4229e6(0x2da)){const _0xa276ae=this[_0x4229e6(0x29a)][_0x4229e6(0x300)],_0x262acd=new Date(),_0x12d00d=new Date(_0x262acd['getFullYear'](),_0x262acd[_0x4229e6(0x310)](),_0x262acd['getDate']())['getTime'](),_0x1b488d=this['rawEventLog']['filter'](_0xfbd651=>new Date(_0xfbd651['timestamp'])['getTime']()>_0x12d00d)[_0x4229e6(0x300)],_0x2d7bd1=new Array(0x18)[_0x4229e6(0x2a3)](0x0);this['rawEventLog'][_0x4229e6(0x2f5)](_0xdf67e5=>{const _0x12ce65=_0x4229e6,_0x5f0ea3=new Date(_0xdf67e5['timestamp']);if(_0x5f0ea3[_0x12ce65(0x30e)]()>_0x12d00d)_0x2d7bd1[_0x5f0ea3['getHours']()]++;});let _0x47da05={'status':_0x4229e6(0x123)};try{_0x47da05[_0x4229e6(0x1a1)]=(await this[_0x4229e6(0x21b)](LTM_DP_DRIFT_STATUS))['val'];}catch(_0x429f77){}let _0x5358ae='';try{const _0xb6c789=await this['getStateAsync'](_0x4229e6(0x23c));_0x5358ae=_0xb6c789?_0xb6c789[_0x4229e6(0x1bb)]:'';}catch(_0x19be9e){}let _0x105ac9=null;!this['geminiModel']&&(_0x105ac9=this[_0x4229e6(0x249)]['geminiApiKey']?_0x4229e6(0x251):'Kein\x20API\x20Key!');let _0x4e3e02={'detected':![],'description':'','targetId':'','targetValue':'','autoApply':![]};try{const _0x1d40bc=await this[_0x4229e6(0x21b)](_0x4229e6(0x2eb)),_0x5236ce=await this['getStateAsync'](_0x4229e6(0x1d3)),_0x450577=await this[_0x4229e6(0x21b)]('analysis.automation.targetId'),_0x37c551=await this['getStateAsync']('analysis.automation.targetValue'),_0x134687=await this[_0x4229e6(0x21b)]('analysis.automation.autoApply');_0x1d40bc&&_0x1d40bc[_0x4229e6(0x1bb)]&&(_0x4e3e02[_0x4229e6(0x2d6)]=!![],_0x4e3e02[_0x4229e6(0x1fb)]=_0x5236ce?_0x5236ce['val']:'',_0x4e3e02[_0x4229e6(0x34d)]=_0x450577?_0x450577[_0x4229e6(0x1bb)]:'',_0x4e3e02[_0x4229e6(0x327)]=_0x37c551?_0x37c551[_0x4229e6(0x1bb)]:''),_0x4e3e02[_0x4229e6(0x235)]=_0x134687?!!_0x134687[_0x4229e6(0x1bb)]:![];}catch(_0xf20c4d){}this[_0x4229e6(0x31f)](_0x160e4c['from'],_0x160e4c[_0x4229e6(0x274)],{'success':!![],'eventHistory':this[_0x4229e6(0x176)][_0x4229e6(0x2e6)](0x0,0xf),'stats':{'digestCount':_0xa276ae,'eventCountToday':_0x1b488d,'hourlyActivity':_0x2d7bd1,'driftStatus':_0x47da05[_0x4229e6(0x1a1)],'isPresent':this['isPresent'],'presenceWho':_0x5358ae,'minDays':this[_0x4229e6(0x249)][_0x4229e6(0x273)]||0x7,'stbDays':this[_0x4229e6(0x249)]['ltmStbWindowDays']||0xe,'ltbDays':this[_0x4229e6(0x249)][_0x4229e6(0x22f)]||0x3c,'systemError':_0x105ac9},'automation':_0x4e3e02},_0x160e4c[_0x4229e6(0x2e0)]);}else{if(_0x160e4c[_0x4229e6(0x274)]===_0x4229e6(0x28a)){const _0x2f9365=await this['getForeignObjectsAsync']('enum.functions.*',_0x4229e6(0x1ae)),_0xc4cccf=[];if(_0x2f9365)for(const _0x4ee822 in _0x2f9365){const _0x568657=_0x2f9365[_0x4ee822],_0x3fe7c1=(_0x568657[_0x4229e6(0x30c)]&&typeof _0x568657[_0x4229e6(0x30c)]['name']==='object'?_0x568657[_0x4229e6(0x30c)]['name']['de']:_0x568657['common'][_0x4229e6(0x1cb)])||_0x568657[_0x4229e6(0x30c)][_0x4229e6(0x1cb)];_0xc4cccf[_0x4229e6(0x188)]({'id':_0x4ee822,'name':_0x3fe7c1});}this[_0x4229e6(0x31f)](_0x160e4c['from'],_0x160e4c[_0x4229e6(0x274)],{'success':!![],'enums':_0xc4cccf},_0x160e4c[_0x4229e6(0x2e0)]);}else{if(_0x160e4c[_0x4229e6(0x274)]===_0x4229e6(0x2ff))try{const _0x401dce=await scanForDevices(this,_0x160e4c[_0x4229e6(0x1f5)]||{});this[_0x4229e6(0x31f)](_0x160e4c[_0x4229e6(0x172)],_0x160e4c['command'],{'success':!![],'devices':_0x401dce},_0x160e4c[_0x4229e6(0x2e0)]);}catch(_0x1782a6){this[_0x4229e6(0x31f)](_0x160e4c[_0x4229e6(0x172)],_0x160e4c[_0x4229e6(0x274)],{'success':![],'error':_0x1782a6[_0x4229e6(0x1f5)]},_0x160e4c[_0x4229e6(0x2e0)]);}else{if(_0x160e4c['command']===_0x4229e6(0x292)){const _0x4cef1c=_0x160e4c[_0x4229e6(0x1f5)][_0x4229e6(0x1e6)];if(!_0x4cef1c)return this[_0x4229e6(0x31f)](_0x160e4c[_0x4229e6(0x172)],_0x160e4c[_0x4229e6(0x274)],{'success':![],'error':_0x4229e6(0x20a)},_0x160e4c[_0x4229e6(0x2e0)]);const _0x4e83e1=await getCalendarNames(this,_0x4cef1c);this[_0x4229e6(0x31f)](_0x160e4c[_0x4229e6(0x172)],_0x160e4c[_0x4229e6(0x274)],{'success':!![],'names':_0x4e83e1},_0x160e4c['callback']);}else{if(_0x160e4c[_0x4229e6(0x274)]===_0x4229e6(0x23a)){const {targetId:_0x579176,targetValue:_0x5e1c2c}=_0x160e4c[_0x4229e6(0x1f5)];this[_0x4229e6(0x240)][_0x4229e6(0x207)](_0x4229e6(0x1bd)+_0x579176+_0x4229e6(0x1ed)+_0x5e1c2c),await this['setStateAsync'](_0x4229e6(0x2eb),{'val':!![],'ack':!![]}),await this[_0x4229e6(0x25b)]('analysis.automation.description',{'val':_0x4229e6(0x20e)+_0x579176,'ack':!![]}),await this['setStateAsync'](_0x4229e6(0x11f),{'val':_0x579176,'ack':!![]}),await this[_0x4229e6(0x25b)](_0x4229e6(0x11a),{'val':_0x5e1c2c,'ack':!![]}),this[_0x4229e6(0x31f)](_0x160e4c[_0x4229e6(0x172)],_0x160e4c[_0x4229e6(0x274)],{'success':!![]},_0x160e4c[_0x4229e6(0x2e0)]);}else{if(_0x160e4c['command']==='submitFeedback'){const {historyId:_0x2191eb,rating:_0x4225f0,comment:_0x52c7d1,alertReason:_0x109780}=_0x160e4c[_0x4229e6(0x1f5)];_0x2191eb&&_0x4225f0?(await saveFeedback(this,{'timestamp':Date[_0x4229e6(0x30f)](),'historyId':_0x2191eb,'rating':_0x4225f0,'comment':_0x52c7d1,'alertReason':_0x109780}),this[_0x4229e6(0x31f)](_0x160e4c[_0x4229e6(0x172)],_0x160e4c[_0x4229e6(0x274)],{'success':!![]},_0x160e4c['callback'])):this[_0x4229e6(0x31f)](_0x160e4c[_0x4229e6(0x172)],_0x160e4c[_0x4229e6(0x274)],{'success':![],'error':_0x4229e6(0x1de)},_0x160e4c[_0x4229e6(0x2e0)]);}else _0x160e4c[_0x4229e6(0x274)]===_0x4229e6(0x2d8)&&(this[_0x4229e6(0x240)][_0x4229e6(0x207)](_0x4229e6(0x252)),await this['setStateAsync'](_0x4229e6(0x2eb),{'val':![],'ack':!![]}),await this[_0x4229e6(0x25b)]('analysis.automation.description',{'val':'','ack':!![]}),this['sendTo'](_0x160e4c['from'],_0x160e4c[_0x4229e6(0x274)],{'success':!![]},_0x160e4c[_0x4229e6(0x2e0)]));}}}}}}}}}}catch(_0x46ea17){this[_0x4229e6(0x240)][_0x4229e6(0x26d)](_0x4229e6(0x31e)+_0x160e4c[_0x4229e6(0x274)]+':\x20'+_0x46ea17['message']);if(_0x160e4c[_0x4229e6(0x2e0)])this['sendTo'](_0x160e4c[_0x4229e6(0x172)],_0x160e4c[_0x4229e6(0x274)],{'success':![],'error':_0x46ea17[_0x4229e6(0x1f5)]},_0x160e4c[_0x4229e6(0x2e0)]);}}}if(require[a0_0x5651d4(0x19b)]!==module)module['exports']=_0x2f8dd6=>new CogniLiving(_0x2f8dd6);else new CogniLiving();