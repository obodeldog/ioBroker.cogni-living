const a0_0x1ec6b6=a0_0x2a28;(function(_0x51043c,_0xfc1353){const _0x1cb868=a0_0x2a28,_0x11acc8=_0x51043c();while(!![]){try{const _0x548603=parseInt(_0x1cb868(0x130))/0x1+parseInt(_0x1cb868(0x194))/0x2*(-parseInt(_0x1cb868(0x284))/0x3)+parseInt(_0x1cb868(0x29e))/0x4+parseInt(_0x1cb868(0x1d5))/0x5*(-parseInt(_0x1cb868(0x1a2))/0x6)+parseInt(_0x1cb868(0x252))/0x7*(-parseInt(_0x1cb868(0x13f))/0x8)+parseInt(_0x1cb868(0x1f4))/0x9+-parseInt(_0x1cb868(0x19e))/0xa*(-parseInt(_0x1cb868(0x14a))/0xb);if(_0x548603===_0xfc1353)break;else _0x11acc8['push'](_0x11acc8['shift']());}catch(_0x27e138){_0x11acc8['push'](_0x11acc8['shift']());}}}(a0_0x5493,0xbef2e));const a0_0xe49cb1=(function(){let _0x4ae2f4=!![];return function(_0x5990f6,_0x4a2432){const _0x6d63b8=_0x4ae2f4?function(){if(_0x4a2432){const _0x136c02=_0x4a2432['apply'](_0x5990f6,arguments);return _0x4a2432=null,_0x136c02;}}:function(){};return _0x4ae2f4=![],_0x6d63b8;};}()),a0_0x392516=a0_0xe49cb1(this,function(){const _0x5251da=a0_0x2a28;return a0_0x392516[_0x5251da(0x12b)]()[_0x5251da(0x239)]('(((.+)+)+)+$')['toString']()[_0x5251da(0x1df)](a0_0x392516)[_0x5251da(0x239)]('(((.+)+)+)+$');});function a0_0x2a28(_0x21f186,_0x231e48){const _0x1b4746=a0_0x5493();return a0_0x2a28=function(_0x392516,_0xe49cb1){_0x392516=_0x392516-0x128;let _0x5493db=_0x1b4746[_0x392516];return _0x5493db;},a0_0x2a28(_0x21f186,_0x231e48);}a0_0x392516();function a0_0x5493(){const _0x7248c2=['stringify','name','getForeignStateAsync','analysis.deviationFromBaseline','‚ö†Ô∏è\x20Alarm','de-DE','1.\x20ANALYSE:\x20Bewerte\x20Sensor-Events.\x20deviation=\x27N/A\x27.','CRITICAL\x20WARNING:\x20No\x20sensor\x20activity\x20detected\x20for\x20','Deviation','Adapter','.brightness','splice','config','alertReason','temperatur','Success','last\x20action','scriptProblem','indicator','N/A\x20(Learning)','DUTYCYCLE','cogni-living\x20adapter\x20starting\x20(v','.level','notifyTelegramEnabled','LTM.rawEventLog','from','\x22\x20at\x20','cogni-living','35446AqRydI','openweathermap.','stateChange','t√ºr','substring','ack','[TEST]\x20','eventHistory','join','Pro\x20Feature','10fDlxZj','Aktiv\x20(','ltmDriftCheckIntervalHours','longitude','522QmvBhC','geminiApiKey','precip','response','N/A\x20(No\x20Activity)','No\x20recorded\x20events\x20yet,\x20but\x20Inactivity\x20Monitor\x20triggered.','forecast','livingContext','scanForDevices','minDaysForBaseline','analysis.trigger','Event\x20History','comfort','devices','ltmJob','Lernphase\x20(','runGeminiAnalysis','\x0a\x0aA\x20(STB):\x0a','Subscribing\x20to\x20','uuid-error','common','vacation','notifyPushoverInstance','ERROR_CODE','text.alarm','boolean','@iobroker/adapter-core','Analysiere\x20ausgewogen\x20auf\x20Gesundheit,\x20Sicherheit\x20und\x20Komfort.','material.','Fokus\x20auf\x20Maximierung\x20von\x20Komfort,\x20Automatisierungseffizienz\x20und\x20Energieeinsparung\x20f√ºr\x20einen\x20einzelnen\x20Bewohner.\x20Aktivit√§tsmuster\x20sind\x20flexibel.','GUEST','firmware','shutter_contact','triggerDailyDigest','icon','Fokus\x20auf\x20Familienroutinen,\x20Kindersicherheit\x20und\x20allgemeines\x20Haushaltsmanagement.\x20Erwarte\x20hohe\x20Aktivit√§tsniveaus.','\x20events','uuid','channel','driftDetails','PRIORIT√ÑT:\x20Gesundheit\x20und\x20Sicherheit\x20f√ºr\x20Senioren\x20(AAL).\x20Erkenne\x20Inaktivit√§t,\x20potenzielle\x20St√ºrze\x20(indirekt),\x20ungew√∂hnliche\x20n√§chtliche\x20Aktivit√§t.\x20Komfort\x20ist\x20sekund√§r.','test','Normal','toLocaleTimeString','rawEventLog','values','json','location','Rauchmelder','\x20f√ºr\x20Event\x20','notifyEmailInstance','12115mVIEan','notifyPushoverRecipient','STICKY_UNREACH','saveDailyDigests','scanDevices','scriptEnabled','saveRawEventLog','analysis.automation.patternDetected','endsWith','icons-mfd.','constructor','Daily\x20Digests','javascript.0.script','modelid','checkLtmDriftObjects','dailyDigests','mac\x20address','Starting\x20Autopilot\x20(','weather','accuweather.','2-digit','loadDailyDigests','false_positive','submitFeedback','map','reverse','LTM.processingStatus','inactivityMonitoringEnabled','Automation\x20Proposals','isProVersion','licenseKey','8464905ptiluT','object','inactivityThresholdHours','UNREACH','colormode','mode','temperature','Pattern\x20Detected','üìç\x20Standort\x20geladen:\x20','Missing\x20data','unshift','Gemini\x20API\x20Key\x20missing.\x20AI\x20features\x20disabled.','uniqueid','Deaktiviert\x20(Pro-Feature)','DUTY_CYCLE','\x0a\x20\x20\x20\x20\x20\x20\x20\x20MODUS:\x20','notifySignalEnabled','flot.','ready','Feedback\x20gespeichert:\x20','reachable','pr√§senz','value.humidity','update','connection','createAllObjects','members','toLocaleString','status','.bri','üö®\x20Dead\x20Man\x27s\x20Switch:\x20Keine\x20Aktivit√§t\x20seit\x20','system.mode','level.dimmer','getForeignObjectsAsync','ON_TIME','notifySignalInstance','push','SECTION','Error:\x20','Konnte\x20System-Standort\x20nicht\x20laden.','sensor.window','Last\x20Result','switch.light','slice','Baseline:\x20Inactive.','Starting\x20Smart\x20Scan\x20with\x20filters:\x20','Activity\x20Summary','Gemini\x20Init\x20Error:\x20','analysis.activitySummary','main','.on','fire','\x20sensors...','text','driftAnalysisTimer','checkSystemObjects','Action','catch','scheduleJob','checkLicense','setupLtmScheduler','systemConfig','system.','analysis.lastResult','System\x20Mode','notifyTelegramInstance','Analysis\x20Error:\x20','LTM.triggerDailyDigest','analysis.automation.description','search','historyId','Description','INSTALL_TEST','events.lastEvent','lights','diele','1.\x20ANALYSE\x20&\x20DEVIATION:\x20Vergleiche\x20Events\x20mit\x20STB.\x20deviation=\x27none|slight|significant|critical\x27.','resetAnalysisStates','long','admin.','getEnums','‚úÖ\x20Server\x20(simuliert):\x20Lizenz\x20g√ºltig.','manufacturer','getForeignObjectAsync','updateAnalysisHistory','rain','presence','LTM','wohn','toISOString','details','licht','AI\x20Emergency\x20Status','notifyWhatsappRecipient','7nJOAyw','STB\x20(Recent\x20History):\x20','üö®üö®\x20NOTFALL','effect','loadRawEventLog','analysis.analysisHistory','capabilities','TEST-PRO-KEY','Last\x20Check','node-schedule','\x20Tage)','fenster','subscribeStates','PRIORIT√ÑT:\x20Sicherheit.\x20Erkenne\x20Eindringlinge,\x20ungew√∂hnliche\x20Anwesenheit\x20bei\x20Abwesenheit\x20der\x20Bewohner\x20oder\x20Fehlfunktionen,\x20die\x20auf\x20ein\x20Sicherheitsrisiko\x20hindeuten.','events.history','hue','pressure','getSystemUUID','ERROR','Unbekannt','lastCheck','includes','LTM.driftAnalysis.driftDetails','testNotification','RSSI','send','replace','number','selectedFunctionIds','timestamp','occupancy','Baseline\x20Status','ltmLtbWindowDays','ROLLE:\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20KONTEXT:\x20','0\x204\x20*\x20*\x20*','normal','toUpperCase','leuchte','\x0a\x20\x20\x20\x20\x20\x20\x20\x20AUFGABE:\x20','last_seen','notifyTelegramRecipient','setStateAsync','notifyEmailEnabled','‚ö†Ô∏è\x20DEV-MODE:\x20Lokaler\x20Test-Schl√ºssel\x20erkannt.\x20Pro-Features\x20aktiviert.','message','archetype','@google/generative-ai','application/json','startsWith','NORMAL','135VukdYY','modeResetJob','Drift\x20Status','setState','[Test]\x20Notification','sound','Sending\x20notification:\x20\x22','rauch','CONNECTION','updateBaselineStatus','notifyWhatsappInstance','party','info','uuid-not-found','Wohnzimmer','AI\x20Alert\x20Status','Temperatur','role','cancel','k√ºche','0\x203\x20*\x20*\x20*','native','ltmStbWindowDays','generateContent','some','DIRECTION','2941276iIjzbs','saveFeedback','description','Skipped\x20(No\x20AI\x20or\x20Data)','Schlafzimmer','history','now','AES_KEY','city','garten','min','Logbook','latitude','sensorLastValues','alert','sensor.motion','createDailyDigest','onStateChange','Garten','N/A','\x20was\x20FALSE.\x20Reason:\x20','patternDetected','analysis.isAlert','warn','vis.','setupDriftAnalysisScheduler','loadSystemMode','yr.','needs_improvement','log','indicator.alarm.fire','summary','logDuplicates','system','enum.rooms.*','models/gemini-flash-latest','Gast','activity','analysis.automation.suggestedAction','LTM.driftAnalysis','Bewegung','\x20(EMERGENCY)','runBaselineDriftAnalysis','feedbackHistory','toFixed','extendObjectAsync','pop','error','LOWBAT','unload','ROLLE:\x20Data\x20Scientist.\x20VERGLEICHE:\x20Dataset\x20A\x20(Recent)\x20vs\x20B\x20(Established).\x20ZIEL:\x20Erkenne\x20Drift.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aB\x20(LTB):\x0a','productname','Urlaub','FAULT','runAutopilot','sendNotification','OPERATING_VOLTAGE','systemUUID','üö®\x20EMERGENCY','analysisHistory','toString','VIRTUAL_CHANNEL','setupModeResetScheduler','Flur','analysis.comfortSuggestion','312854qaGUoe','analysis.isEmergency','onReady','callback','Badezimmer','trim','enum.functions.*','checkLtmObjects','currentSystemMode','WEEK_PROGRAM','Running\x20in\x20FREE\x20mode\x20(LTM\x20&\x20Automation\x20disabled).','automationProposal','analysisTimer','parse','genAI','5388520ICBjbC','aiPersona','filter',').\x20Nutze\x20dies\x20f√ºr\x20Sonnenstand/Lichtverh√§ltnisse.','wetter','getStateAsync','PRO-','smoke','write','.state','val','5228399OzSvux','Gemini\x20AI\x20initialized.','type','sort','PARTY','state','STANDORT:\x20Lat\x20','analysis.feedbackHistory','lastAlertState','system.config','length','temp','motion','geminiModel','version','bind','OFF','processSensorEvent','sendToAsync','split','unknown','command','sensor.door','string','\x20hours.\x20The\x20resident\x20might\x20be\x20incapacitated\x20or\x20dead.\x20Assess\x20immediate\x20risk\x20level.\x20This\x20is\x20a\x20potential\x20EMERGENCY.','Drift\x20Analysis','System\x20Status\x20&\x20Control','-\x20User\x20Feedback:\x20Alarm\x20\x22','Fenster/T√ºr','CONFIG_PENDING','SABOTAGE','rating','_score','sendTo','Party','enum','wind','\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x202.\x20AUTOMATION:\x20patternDetected=true/false.\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20EVENTS:\x20','setObjectNotExistsAsync','analysis.automation','ALARM','onUnload','Started\x20at\x20','lampe','testApiKey','getGenerativeModel'];a0_0x5493=function(){return _0x7248c2;};return a0_0x5493();}'use strict';const utils=require(a0_0x1ec6b6(0x1bc)),{GoogleGenerativeAI}=require(a0_0x1ec6b6(0x280)),schedule=require(a0_0x1ec6b6(0x25b)),axios=require('axios'),HISTORY_MAX_SIZE=0x32,FEEDBACK_MAX_SIZE=0x14,GEMINI_MODEL=a0_0x1ec6b6(0x2c1),ANALYSIS_HISTORY_MAX_SIZE=0x64,RAW_LOG_MAX_SIZE=0x5dc,DAILY_DIGEST_MAX_SIZE_LIMIT=0xb4,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,LTM_SCHEDULE=a0_0x1ec6b6(0x298),LTM_DP_RAW_LOG=a0_0x1ec6b6(0x190),LTM_DP_DAILY_DIGESTS='LTM.dailyDigests',LTM_DP_STATUS=a0_0x1ec6b6(0x1ef),LTM_DP_TRIGGER_DIGEST=a0_0x1ec6b6(0x237),LTM_DP_BASELINE_STATUS='LTM.baselineStatus',LTM_DP_DRIFT_CHANNEL=a0_0x1ec6b6(0x2c5),LTM_DP_DRIFT_STATUS='LTM.driftAnalysis.baselineDrift',LTM_DP_DRIFT_DETAILS=a0_0x1ec6b6(0x268),LTM_DP_DRIFT_LAST_CHECK='LTM.driftAnalysis.lastCheck',SYSTEM_DP_MODE=a0_0x1ec6b6(0x213),MODE_RESET_SCHEDULE=a0_0x1ec6b6(0x274),SYSTEM_MODES={'NORMAL':a0_0x1ec6b6(0x275),'VACATION':a0_0x1ec6b6(0x1b7),'PARTY':a0_0x1ec6b6(0x28f),'GUEST':'guest'},AUTO_RESET_MODES=[SYSTEM_MODES[a0_0x1ec6b6(0x14e)],SYSTEM_MODES[a0_0x1ec6b6(0x1c0)]],PERSONA_MAPPING={'generic':a0_0x1ec6b6(0x1bd),'senior_aal':a0_0x1ec6b6(0x1ca),'family':a0_0x1ec6b6(0x1c5),'single_comfort':a0_0x1ec6b6(0x1bf),'security':a0_0x1ec6b6(0x25f)};class CogniLiving extends utils[a0_0x1ec6b6(0x181)]{constructor(_0x59da5c){const _0x3e56e3=a0_0x1ec6b6;super({..._0x59da5c,'name':_0x3e56e3(0x193)}),this[_0x3e56e3(0x19b)]=[],this[_0x3e56e3(0x12a)]=[],this[_0x3e56e3(0x2c9)]=[],this[_0x3e56e3(0x1ce)]=[],this[_0x3e56e3(0x1e4)]=[],this[_0x3e56e3(0x2ab)]={},this[_0x3e56e3(0x231)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x3e56e3(0x13e)]=null,this[_0x3e56e3(0x157)]=null,this['currentSystemMode']=SYSTEM_MODES['NORMAL'],this[_0x3e56e3(0x1f2)]=![],this[_0x3e56e3(0x152)]=![],this[_0x3e56e3(0x128)]='unknown',this['analysisTimer']=null,this[_0x3e56e3(0x1b0)]=null,this['modeResetJob']=null,this['driftAnalysisTimer']=null,this['on'](_0x3e56e3(0x206),this[_0x3e56e3(0x132)][_0x3e56e3(0x159)](this)),this['on'](_0x3e56e3(0x196),this['onStateChange'][_0x3e56e3(0x159)](this)),this['on'](_0x3e56e3(0x2cf),this['onUnload'][_0x3e56e3(0x159)](this)),this['on']('message',this['onMessage'][_0x3e56e3(0x159)](this));}async['onReady'](){const _0x1dffd9=a0_0x1ec6b6,_0x285b59=this[_0x1dffd9(0x158)]||_0x1dffd9(0x15e);this[_0x1dffd9(0x2bb)]['info'](_0x1dffd9(0x18d)+_0x285b59+')'),this[_0x1dffd9(0x184)][_0x1dffd9(0x1f3)]=this['config'][_0x1dffd9(0x1f3)]||'',this[_0x1dffd9(0x1f2)]=await this[_0x1dffd9(0x22f)](this[_0x1dffd9(0x184)][_0x1dffd9(0x1f3)]);this['isProVersion']?this['log'][_0x1dffd9(0x290)]('‚úÖ\x20License\x20check\x20successful:\x20PRO\x20features\x20enabled.'):this[_0x1dffd9(0x2bb)][_0x1dffd9(0x290)](_0x1dffd9(0x13a));if(!this[_0x1dffd9(0x184)][_0x1dffd9(0x1ab)]||this[_0x1dffd9(0x184)][_0x1dffd9(0x1ab)]<0x1)this[_0x1dffd9(0x184)]['minDaysForBaseline']=0x7;if(!this[_0x1dffd9(0x184)][_0x1dffd9(0x29a)]||this[_0x1dffd9(0x184)]['ltmStbWindowDays']<0x1)this[_0x1dffd9(0x184)][_0x1dffd9(0x29a)]=0xe;if(!this['config'][_0x1dffd9(0x272)]||this[_0x1dffd9(0x184)][_0x1dffd9(0x272)]<0x1e)this[_0x1dffd9(0x184)]['ltmLtbWindowDays']=0x3c;this[_0x1dffd9(0x184)][_0x1dffd9(0x272)]=Math[_0x1dffd9(0x2a8)](Math['max'](this['config'][_0x1dffd9(0x272)],this[_0x1dffd9(0x184)][_0x1dffd9(0x29a)]+0xe),DAILY_DIGEST_MAX_SIZE_LIMIT);if(this['config']['inactivityMonitoringEnabled']===undefined)this['config']['inactivityMonitoringEnabled']=![];if(!this[_0x1dffd9(0x184)][_0x1dffd9(0x1f6)]||this['config'][_0x1dffd9(0x1f6)]<0x1)this[_0x1dffd9(0x184)][_0x1dffd9(0x1f6)]=0xc;try{const _0x361773=await this[_0x1dffd9(0x247)](_0x1dffd9(0x153));_0x361773&&_0x361773[_0x1dffd9(0x1b6)]&&(this[_0x1dffd9(0x231)][_0x1dffd9(0x2aa)]=_0x361773[_0x1dffd9(0x1b6)][_0x1dffd9(0x2aa)]||0x0,this[_0x1dffd9(0x231)][_0x1dffd9(0x1a1)]=_0x361773['common'][_0x1dffd9(0x1a1)]||0x0,this[_0x1dffd9(0x231)][_0x1dffd9(0x2a6)]=_0x361773[_0x1dffd9(0x1b6)][_0x1dffd9(0x2a6)]||'',this[_0x1dffd9(0x2bb)][_0x1dffd9(0x290)](_0x1dffd9(0x1fc)+(this[_0x1dffd9(0x231)][_0x1dffd9(0x2a6)]||_0x1dffd9(0x265))+'\x20('+this[_0x1dffd9(0x231)][_0x1dffd9(0x2aa)]+',\x20'+this[_0x1dffd9(0x231)]['longitude']+')'));}catch(_0x265bf8){this[_0x1dffd9(0x2bb)][_0x1dffd9(0x2b5)](_0x1dffd9(0x21b));}if(this['config'][_0x1dffd9(0x1a3)])try{this[_0x1dffd9(0x13e)]=new GoogleGenerativeAI(this[_0x1dffd9(0x184)][_0x1dffd9(0x1a3)]),this[_0x1dffd9(0x157)]=this[_0x1dffd9(0x13e)][_0x1dffd9(0x177)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x1dffd9(0x281)}}),this[_0x1dffd9(0x2bb)][_0x1dffd9(0x290)](_0x1dffd9(0x14b));}catch(_0xf0d2aa){this[_0x1dffd9(0x2bb)]['error'](_0x1dffd9(0x223)+_0xf0d2aa[_0x1dffd9(0x27e)]);}else this[_0x1dffd9(0x2bb)][_0x1dffd9(0x2b5)](_0x1dffd9(0x1ff));await this[_0x1dffd9(0x20d)](),await this[_0x1dffd9(0x2b8)]();const _0x24514b=await this[_0x1dffd9(0x144)](_0x1dffd9(0x2b4));this[_0x1dffd9(0x152)]=_0x24514b?!!_0x24514b['val']:![];try{const _0x4c254e=await this['getStateAsync']('analysis.analysisHistory');if(_0x4c254e&&_0x4c254e[_0x1dffd9(0x149)])this['analysisHistory']=JSON[_0x1dffd9(0x13d)](_0x4c254e[_0x1dffd9(0x149)]['toString']());}catch(_0xa75e5b){this[_0x1dffd9(0x12a)]=[];}try{const _0x3ec6a8=await this['getStateAsync'](_0x1dffd9(0x151));if(_0x3ec6a8&&_0x3ec6a8[_0x1dffd9(0x149)])this[_0x1dffd9(0x2c9)]=JSON[_0x1dffd9(0x13d)](_0x3ec6a8[_0x1dffd9(0x149)][_0x1dffd9(0x12b)]());}catch(_0x53c51a){this['feedbackHistory']=[];}await this[_0x1dffd9(0x256)](),await this[_0x1dffd9(0x1ea)](),this[_0x1dffd9(0x25e)](_0x1dffd9(0x1ac)),this[_0x1dffd9(0x25e)](LTM_DP_TRIGGER_DIGEST),this[_0x1dffd9(0x25e)](SYSTEM_DP_MODE);const _0x27b27b=this['config'][_0x1dffd9(0x1af)];if(_0x27b27b&&_0x27b27b[_0x1dffd9(0x154)]>0x0){this[_0x1dffd9(0x2bb)][_0x1dffd9(0x290)](_0x1dffd9(0x1b4)+_0x27b27b[_0x1dffd9(0x154)]+_0x1dffd9(0x228));for(const _0x5ccd8c of _0x27b27b){if(_0x5ccd8c['id']){await this['subscribeForeignStatesAsync'](_0x5ccd8c['id']);try{const _0x365ba4=await this[_0x1dffd9(0x17a)](_0x5ccd8c['id']);if(_0x365ba4)this[_0x1dffd9(0x2ab)][_0x5ccd8c['id']]=_0x365ba4[_0x1dffd9(0x149)];}catch(_0x291f4f){}}}}if(this[_0x1dffd9(0x13c)])clearInterval(this['analysisTimer']);const _0x5eeeb7=this[_0x1dffd9(0x184)]['analysisInterval']||0xf;_0x5eeeb7>0x0&&(this[_0x1dffd9(0x2bb)]['info'](_0x1dffd9(0x1e6)+_0x5eeeb7+'\x20min).\x20Inactivity\x20Monitor:\x20'+(this[_0x1dffd9(0x184)]['inactivityMonitoringEnabled']?'ON':_0x1dffd9(0x15a))),this[_0x1dffd9(0x13c)]=setInterval(()=>this[_0x1dffd9(0x2d4)](),_0x5eeeb7*0x3c*0x3e8)),this[_0x1dffd9(0x230)](),this[_0x1dffd9(0x12d)](),this[_0x1dffd9(0x2b7)]();}async['scanForDevices'](_0x420433={}){const _0x194826=a0_0x1ec6b6;this[_0x194826(0x2bb)][_0x194826(0x290)](_0x194826(0x221)+JSON[_0x194826(0x178)](_0x420433));const _0x509118=[],_0x401c3a=_0x420433[_0x194826(0x156)]!==![],_0x4edaa6=_0x420433['doors']!==![],_0x192555=_0x420433[_0x194826(0x23e)]!==![],_0x442895=_0x420433[_0x194826(0x1fa)]===!![],_0x132c3e=_0x420433[_0x194826(0x1e7)]===!![],_0x2db8ed=_0x420433[_0x194826(0x26e)]||[],_0x113667=await this[_0x194826(0x215)](_0x194826(0x2c0),_0x194826(0x16d)),_0xf393a6=await this['getForeignObjectsAsync']('enum.functions.*','enum'),_0x8b031d={},_0x543795={},_0x431c7d={},_0xba36f2=(_0x3b75d7,_0x58f9af,_0x3a7164=![])=>{const _0x1071ef=_0x194826;if(!_0x3b75d7)return;for(const _0x4f7f9f in _0x3b75d7){const _0x28c0c1=_0x3b75d7[_0x4f7f9f];if(_0x28c0c1&&_0x28c0c1[_0x1071ef(0x1b6)]&&_0x28c0c1[_0x1071ef(0x1b6)]['members']){const _0x25dbfc=(typeof _0x28c0c1['common'][_0x1071ef(0x179)]==='object'?_0x28c0c1[_0x1071ef(0x1b6)][_0x1071ef(0x179)]['de']:_0x28c0c1['common']['name'])||_0x28c0c1[_0x1071ef(0x1b6)][_0x1071ef(0x179)];if(_0x3a7164)_0x431c7d[_0x4f7f9f]=_0x25dbfc;for(const _0x264e7e of _0x28c0c1[_0x1071ef(0x1b6)][_0x1071ef(0x20e)]){if(_0x3a7164){if(!_0x58f9af[_0x264e7e])_0x58f9af[_0x264e7e]=[];_0x58f9af[_0x264e7e][_0x1071ef(0x218)](_0x4f7f9f);}else _0x58f9af[_0x264e7e]=_0x25dbfc;}}}};_0xba36f2(_0x113667,_0x8b031d),_0xba36f2(_0xf393a6,_0x543795,!![]);const _0x50401b=await this[_0x194826(0x215)]('*',_0x194826(0x14f)),_0x4e90de=[_0x194826(0x1f7),_0x194826(0x2ce),'LOW_BAT',_0x194826(0x26a),_0x194826(0x264),_0x194826(0x2d3),_0x194826(0x168),_0x194826(0x172),_0x194826(0x167),_0x194826(0x18c),_0x194826(0x202),'WORKING',_0x194826(0x29d),_0x194826(0x1d7),_0x194826(0x2d6),_0x194826(0x12c),_0x194826(0x23c),'COMBINED_PARAMETER',_0x194826(0x139),_0x194826(0x216),_0x194826(0x219),_0x194826(0x1b9),'PROCESS',_0x194826(0x2a5),_0x194826(0x28c),_0x194826(0x208),'link_quality','battery',_0x194826(0x20b),_0x194826(0x1c1),_0x194826(0x158),_0x194826(0x20c),_0x194826(0x290),'signal',_0x194826(0x279),_0x194826(0x188),_0x194826(0x27f),_0x194826(0x2ac),_0x194826(0x1f9),_0x194826(0x1f8),_0x194826(0x255),'xy','ct',_0x194826(0x261),'sat',_0x194826(0x2d1),_0x194826(0x246),_0x194826(0x1e2),_0x194826(0x200),'command',_0x194826(0x1e5),_0x194826(0x2a0),_0x194826(0x258),'process',_0x194826(0x1da),_0x194826(0x189),_0x194826(0x1e1),'detectionState',_0x194826(0x2bd),_0x194826(0x1c4),_0x194826(0x2a3),_0x194826(0x1a8),_0x194826(0x290),'json'];if(!_0x132c3e)_0x4e90de[_0x194826(0x218)](_0x194826(0x143),_0x194826(0x1e7),_0x194826(0x16e),_0x194826(0x262),'uv',_0x194826(0x249),_0x194826(0x1a4));const _0x1f2c34=[_0x194826(0x232),_0x194826(0x243),'info.',_0x194826(0x2b6),'history.',_0x194826(0x1be),_0x194826(0x1de),_0x194826(0x205)];if(!_0x132c3e)_0x1f2c34[_0x194826(0x218)]('daswetter.','weatherunderground.',_0x194826(0x1e8),_0x194826(0x2b9),_0x194826(0x195));const _0x40bc18=(_0x283e92,_0xe606e2,_0x1de0d2=![])=>{const _0x4d5f08=_0x194826,_0x4f1e72=_0x283e92[_0x4d5f08(0x15d)]('.');if(_0xe606e2[_0x283e92])return _0xe606e2[_0x283e92];if(_0x4f1e72[_0x4d5f08(0x154)]>0x2&&_0xe606e2[_0x4f1e72[_0x4d5f08(0x21f)](0x0,-0x1)[_0x4d5f08(0x19c)]('.')])return _0xe606e2[_0x4f1e72[_0x4d5f08(0x21f)](0x0,-0x1)[_0x4d5f08(0x19c)]('.')];if(_0x4f1e72[_0x4d5f08(0x154)]>0x3&&_0xe606e2[_0x4f1e72[_0x4d5f08(0x21f)](0x0,-0x2)[_0x4d5f08(0x19c)]('.')])return _0xe606e2[_0x4f1e72[_0x4d5f08(0x21f)](0x0,-0x2)['join']('.')];return _0x1de0d2?[]:null;};for(const _0x459d90 in _0x50401b){const _0x17c9cb=_0x50401b[_0x459d90];if(!_0x17c9cb||!_0x17c9cb[_0x194826(0x1b6)])continue;if(_0x1f2c34[_0x194826(0x29c)](_0x1aafb6=>_0x459d90[_0x194826(0x282)](_0x1aafb6)))continue;const _0x332d2e=_0x17c9cb[_0x194826(0x1b6)][_0x194826(0x295)]||'',_0x5a9cbd=(_0x17c9cb['common'][_0x194826(0x179)]&&typeof _0x17c9cb[_0x194826(0x1b6)][_0x194826(0x179)]===_0x194826(0x1f5)?_0x17c9cb[_0x194826(0x1b6)][_0x194826(0x179)]['de']:_0x17c9cb[_0x194826(0x1b6)][_0x194826(0x179)])||'',_0x16bdb1=_0x459d90[_0x194826(0x276)](),_0x3a7bc0=_0x5a9cbd?_0x5a9cbd['toLowerCase']():'',_0x478f28=_0x459d90['toLowerCase'](),_0xe7e934=_0x40bc18(_0x459d90,_0x8b031d),_0x2ede4b=_0x40bc18(_0x459d90,_0x543795,!![]);let _0x398f75=null,_0x1b5e06=![];if(_0x2ede4b&&_0x2ede4b['length']>0x0){const _0x31f37f=_0x2ede4b['find'](_0xe63341=>_0x2db8ed[_0x194826(0x267)](_0xe63341));if(_0x31f37f){_0x1b5e06=!![];const _0x3271ca=_0x431c7d[_0x31f37f];if(_0x478f28[_0x194826(0x267)](_0x194826(0x24a))||_0x478f28[_0x194826(0x267)]('motion'))_0x398f75=_0x194826(0x2c6);else{if(_0x478f28[_0x194826(0x267)](_0x194826(0x146))||_0x478f28[_0x194826(0x267)](_0x194826(0x227))||_0x3a7bc0[_0x194826(0x267)](_0x194826(0x28b)))_0x398f75=_0x194826(0x1d2);else{if(_0x478f28[_0x194826(0x267)](_0x194826(0x14f))||_0x478f28['includes']('level')||_0x478f28['includes']('on'))_0x398f75='Schalter/Licht';else _0x398f75=_0x3271ca;}}}}if(!_0x1b5e06&&!_0x132c3e){if(_0x4e90de[_0x194826(0x29c)](_0x560373=>_0x3a7bc0[_0x194826(0x267)](_0x560373)||_0x16bdb1['includes'](_0x560373)))continue;}if(!_0x398f75&&_0x401c3a){const _0x1ba860=_0x332d2e[_0x194826(0x267)](_0x194826(0x2ad))||_0x332d2e[_0x194826(0x267)](_0x194826(0x270)),_0x21a56b=_0x3a7bc0['includes']('bewegung')||_0x3a7bc0['includes'](_0x194826(0x209));if(_0x1ba860||_0x21a56b)_0x398f75=_0x194826(0x2c6);}if(!_0x398f75&&_0x4edaa6){const _0x27b581=_0x478f28['includes'](_0x194826(0x1c2))&&_0x478f28['endsWith'](_0x194826(0x148));(_0x27b581||_0x332d2e[_0x194826(0x267)](_0x194826(0x160))||_0x332d2e['includes'](_0x194826(0x21c))||(_0x3a7bc0[_0x194826(0x267)](_0x194826(0x25d))||_0x3a7bc0[_0x194826(0x267)](_0x194826(0x197)))&&!_0x3a7bc0[_0x194826(0x267)](_0x194826(0x155))&&!_0x3a7bc0['includes']('griff')&&(_0x17c9cb['common'][_0x194826(0x14c)]==='boolean'||_0x17c9cb[_0x194826(0x1b6)]['type']===_0x194826(0x26d)))&&(_0x398f75=_0x194826(0x166));}if(!_0x398f75&&_0x192555){const _0x50faad=_0x332d2e[_0x194826(0x267)](_0x194826(0x21e))||_0x332d2e['includes'](_0x194826(0x214)),_0x407c00=_0x3a7bc0[_0x194826(0x267)](_0x194826(0x24f))||_0x3a7bc0[_0x194826(0x267)](_0x194826(0x175))||_0x3a7bc0[_0x194826(0x267)](_0x194826(0x277)),_0x197289=_0x478f28[_0x194826(0x1dd)]('.state')||_0x478f28[_0x194826(0x1dd)](_0x194826(0x226))||_0x478f28['endsWith'](_0x194826(0x18e))||_0x478f28[_0x194826(0x1dd)](_0x194826(0x211))||_0x478f28[_0x194826(0x1dd)](_0x194826(0x182));(_0x50faad||_0x407c00)&&_0x197289&&_0x17c9cb[_0x194826(0x1b6)][_0x194826(0x147)]&&(_0x398f75='Licht');}!_0x398f75&&_0x442895&&((_0x332d2e[_0x194826(0x267)]('value.temperature')||_0x332d2e['includes'](_0x194826(0x20a))||_0x3a7bc0[_0x194826(0x267)](_0x194826(0x186)))&&(_0x398f75=_0x194826(0x294)));if(_0x398f75){let _0x5b3a2e=_0xe7e934||'';if(!_0x5b3a2e){if(_0x3a7bc0[_0x194826(0x267)]('bad'))_0x5b3a2e=_0x194826(0x134);else{if(_0x3a7bc0[_0x194826(0x267)](_0x194826(0x297)))_0x5b3a2e='K√ºche';else{if(_0x3a7bc0[_0x194826(0x267)](_0x194826(0x24c)))_0x5b3a2e=_0x194826(0x292);else{if(_0x3a7bc0['includes']('schlaf'))_0x5b3a2e=_0x194826(0x2a2);else{if(_0x3a7bc0[_0x194826(0x267)]('flur')||_0x3a7bc0[_0x194826(0x267)](_0x194826(0x23f)))_0x5b3a2e=_0x194826(0x12e);else{if(_0x3a7bc0[_0x194826(0x267)](_0x194826(0x2a7)))_0x5b3a2e=_0x194826(0x2b0);}}}}}}let _0x4c109c=0x0;if(_0x1b5e06)_0x4c109c+=0x1e;else{if(_0xe7e934)_0x4c109c+=0x14;else{if(_0x5b3a2e)_0x4c109c+=0xa;}}_0x509118[_0x194826(0x218)]({'id':_0x459d90,'name':_0x5a9cbd||_0x459d90,'type':_0x398f75,'location':_0x5b3a2e,'logDuplicates':_0x398f75===_0x194826(0x2c6),'_score':_0x4c109c});}}return _0x509118[_0x194826(0x14d)]((_0x611cfc,_0x432406)=>_0x432406[_0x194826(0x16a)]-_0x611cfc[_0x194826(0x16a)]),_0x509118;}async[a0_0x1ec6b6(0x263)](){const _0x5337d0=a0_0x1ec6b6;try{const _0x3c3060=await this['getForeignObjectAsync']('system.meta.uuid');if(_0x3c3060&&_0x3c3060[_0x5337d0(0x299)]&&_0x3c3060[_0x5337d0(0x299)][_0x5337d0(0x1c7)])return _0x3c3060[_0x5337d0(0x299)][_0x5337d0(0x1c7)];return _0x5337d0(0x291);}catch(_0x2ebef9){return _0x5337d0(0x1b5);}}async['checkLicense'](_0x1ca9ee){const _0x1889bf=a0_0x1ec6b6;if(!_0x1ca9ee)return![];this[_0x1889bf(0x128)]=await this[_0x1889bf(0x263)](),this[_0x1889bf(0x2bb)]['info']('Lizenzpr√ºfung\x20gestartet\x20f√ºr\x20System-UUID:\x20'+this['systemUUID']);if(_0x1ca9ee===_0x1889bf(0x259))return this[_0x1889bf(0x2bb)][_0x1889bf(0x290)](_0x1889bf(0x27d)),!![];if(_0x1ca9ee[_0x1889bf(0x282)](_0x1889bf(0x145)))return this['log'][_0x1889bf(0x290)](_0x1889bf(0x245)),!![];return![];}async[a0_0x1ec6b6(0x20d)](){const _0x505283=a0_0x1ec6b6;await this[_0x505283(0x22b)](),await this[_0x505283(0x170)](_0x505283(0x23d),{'type':_0x505283(0x14f),'common':{'name':'Last\x20raw\x20event','type':_0x505283(0x161),'role':_0x505283(0x1d0),'read':!![],'write':![]},'native':{}}),await this[_0x505283(0x170)](_0x505283(0x260),{'type':'state','common':{'name':_0x505283(0x1ad),'type':_0x505283(0x161),'role':_0x505283(0x1d0),'read':!![],'write':![]},'native':{}}),await this[_0x505283(0x170)](_0x505283(0x1ac),{'type':_0x505283(0x14f),'common':{'name':'Trigger\x20Analysis','type':'boolean','role':'button','read':!![],'write':!![],'def':![]},'native':{}}),await this[_0x505283(0x170)](_0x505283(0x233),{'type':_0x505283(0x14f),'common':{'name':_0x505283(0x21d),'type':'string','role':_0x505283(0x1d0),'read':!![],'write':![]},'native':{}}),await this[_0x505283(0x170)]('analysis.isAlert',{'type':'state','common':{'name':_0x505283(0x293),'type':_0x505283(0x1bb),'role':'indicator.alarm','read':!![],'write':![],'def':![]},'native':{}}),await this[_0x505283(0x170)](_0x505283(0x131),{'type':_0x505283(0x14f),'common':{'name':_0x505283(0x250),'type':_0x505283(0x1bb),'role':_0x505283(0x2bc),'read':!![],'write':![],'def':![]},'native':{}}),await this['setObjectNotExistsAsync']('analysis.alertReason',{'type':_0x505283(0x14f),'common':{'name':'Alert\x20Reason','type':_0x505283(0x161),'role':_0x505283(0x1ba),'read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x505283(0x224),{'type':_0x505283(0x14f),'common':{'name':_0x505283(0x222),'type':_0x505283(0x161),'role':_0x505283(0x229),'read':!![],'write':![]},'native':{}}),await this[_0x505283(0x170)](_0x505283(0x17b),{'type':'state','common':{'name':_0x505283(0x180),'type':'string','role':_0x505283(0x14f),'read':!![],'write':![],'def':_0x505283(0x2b1)},'native':{}}),await this[_0x505283(0x170)]('analysis.comfortSummary',{'type':_0x505283(0x14f),'common':{'name':'Comfort\x20Summary','type':'string','role':_0x505283(0x229),'read':!![],'write':![]},'native':{}}),await this[_0x505283(0x170)](_0x505283(0x12f),{'type':'state','common':{'name':'Comfort\x20Suggestion','type':_0x505283(0x161),'role':_0x505283(0x229),'read':!![],'write':![]},'native':{}}),await this[_0x505283(0x2cb)](_0x505283(0x171),{'type':_0x505283(0x1c8),'common':{'name':_0x505283(0x1f1)},'native':{}}),await this[_0x505283(0x170)](_0x505283(0x1dc),{'type':_0x505283(0x14f),'common':{'name':_0x505283(0x1fb),'type':_0x505283(0x1bb),'role':_0x505283(0x18a),'read':!![],'write':![],'def':![]},'native':{}}),await this[_0x505283(0x170)](_0x505283(0x238),{'type':'state','common':{'name':_0x505283(0x23b),'type':'string','role':_0x505283(0x229),'read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x505283(0x2c4),{'type':_0x505283(0x14f),'common':{'name':_0x505283(0x22c),'type':_0x505283(0x161),'role':_0x505283(0x229),'read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x505283(0x257),{'type':'state','common':{'name':_0x505283(0x2a9),'type':_0x505283(0x161),'role':_0x505283(0x1d0),'read':!![],'write':![],'def':'[]'},'native':{}}),await this['setObjectNotExistsAsync']('analysis.feedbackHistory',{'type':_0x505283(0x14f),'common':{'name':'Feedback\x20Log','type':_0x505283(0x161),'role':_0x505283(0x1d0),'read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x505283(0x137)](),await this[_0x505283(0x1e3)]();}[a0_0x1ec6b6(0x2af)](_0xb66cea,_0x40b473){const _0x53cca4=a0_0x1ec6b6;if(!_0x40b473)return;if(_0xb66cea===this['namespace']+'.'+SYSTEM_DP_MODE){_0x40b473[_0x53cca4(0x149)]&&Object[_0x53cca4(0x1cf)](SYSTEM_MODES)[_0x53cca4(0x267)](_0x40b473[_0x53cca4(0x149)])&&(this[_0x53cca4(0x138)]=_0x40b473[_0x53cca4(0x149)]);if(!_0x40b473['ack'])this['setState'](_0xb66cea,{'val':this[_0x53cca4(0x138)],'ack':!![]});return;}if(!_0x40b473[_0x53cca4(0x199)]){_0xb66cea[_0x53cca4(0x267)](_0x53cca4(0x1ac))&&_0x40b473[_0x53cca4(0x149)]&&(this[_0x53cca4(0x287)](_0xb66cea,{'val':![],'ack':!![]}),this['runGeminiAnalysis']());if(_0xb66cea[_0x53cca4(0x267)](_0x53cca4(0x1c3))&&_0x40b473[_0x53cca4(0x149)]){this[_0x53cca4(0x287)](_0xb66cea,{'val':![],'ack':!![]});if(this[_0x53cca4(0x1f2)])this['createDailyDigest']();}return;}const _0xe1c2bc=(this[_0x53cca4(0x184)][_0x53cca4(0x1af)]||[])['find'](_0x18b16c=>_0x18b16c['id']===_0xb66cea);if(_0xe1c2bc)this[_0x53cca4(0x15b)](_0xb66cea,_0x40b473,_0xe1c2bc);}async[a0_0x1ec6b6(0x15b)](_0x5887f3,_0x4fb149,_0x564644){const _0x4d8268=a0_0x1ec6b6;if(!_0x564644[_0x4d8268(0x2be)]&&this['sensorLastValues'][_0x5887f3]===_0x4fb149[_0x4d8268(0x149)])return;this[_0x4d8268(0x2ab)][_0x5887f3]=_0x4fb149[_0x4d8268(0x149)];const _0x234119={'timestamp':_0x4fb149['ts'],'id':_0x5887f3,'name':_0x564644[_0x4d8268(0x179)],'value':_0x4fb149[_0x4d8268(0x149)],'location':_0x564644[_0x4d8268(0x1d1)],'type':_0x564644['type']};this[_0x4d8268(0x19b)][_0x4d8268(0x1fe)](_0x234119);if(this[_0x4d8268(0x19b)][_0x4d8268(0x154)]>HISTORY_MAX_SIZE)this[_0x4d8268(0x19b)][_0x4d8268(0x2cc)]();await this[_0x4d8268(0x27b)]('events.lastEvent',{'val':JSON[_0x4d8268(0x178)](_0x234119),'ack':!![]}),this['rawEventLog'][_0x4d8268(0x218)]({'timestamp':new Date(_0x4fb149['ts'])[_0x4d8268(0x24d)](),'sensorName':_0x564644[_0x4d8268(0x179)],'location':_0x564644['location'],'value':_0x4fb149[_0x4d8268(0x149)]}),await this[_0x4d8268(0x1db)]();}[a0_0x1ec6b6(0x2d4)](){const _0x41460f=a0_0x1ec6b6,_0x176b49=this['config'][_0x41460f(0x1f6)]||0xc,_0x48dad7=this[_0x41460f(0x184)][_0x41460f(0x1f0)],_0x213a0e=this[_0x41460f(0x19b)][_0x41460f(0x154)]>0x0?this[_0x41460f(0x19b)][0x0][_0x41460f(0x26f)]:Date[_0x41460f(0x2a4)](),_0x440e5f=(Date[_0x41460f(0x2a4)]()-_0x213a0e)/(0x3e8*0x3c*0x3c);let _0x34d6d5='';_0x48dad7&&this['currentSystemMode']===SYSTEM_MODES['NORMAL']&&_0x440e5f>_0x176b49&&(this[_0x41460f(0x2bb)]['warn'](_0x41460f(0x212)+_0x440e5f['toFixed'](0x1)+'\x20Stunden!'),_0x34d6d5=_0x41460f(0x17f)+_0x440e5f[_0x41460f(0x2ca)](0x1)+_0x41460f(0x162));if(_0x34d6d5){this[_0x41460f(0x1b2)](_0x34d6d5)[_0x41460f(0x22d)](_0xcead0b=>this['log']['error'](_0xcead0b));return;}if(this[_0x41460f(0x19b)][_0x41460f(0x154)]===0x0){this[_0x41460f(0x287)](_0x41460f(0x2b4),{'val':![],'ack':!![]}),this[_0x41460f(0x287)]('analysis.isEmergency',{'val':![],'ack':!![]}),this['resetAnalysisStates']();return;}const _0x2d0708=Date[_0x41460f(0x2a4)](),_0xfe6676=_0x2d0708-this[_0x41460f(0x19b)][0x0]['timestamp'],_0x3ccdec=(this[_0x41460f(0x184)]['analysisInterval']||0xf)*0x3c*0x3e8;if(_0xfe6676>_0x3ccdec){this[_0x41460f(0x287)](_0x41460f(0x2b4),{'val':![],'ack':!![]}),this[_0x41460f(0x287)](_0x41460f(0x131),{'val':![],'ack':!![]}),this[_0x41460f(0x241)]();return;}this[_0x41460f(0x1b2)]()['catch'](_0x11dd44=>this[_0x41460f(0x2bb)][_0x41460f(0x2cd)](_0x11dd44));}async[a0_0x1ec6b6(0x1b2)](_0xa4567d=''){const _0x9a80d=a0_0x1ec6b6;if(!this[_0x9a80d(0x157)])return;const _0x2991f8=this[_0x9a80d(0x19b)][_0x9a80d(0x154)]>0x0?this[_0x9a80d(0x19b)]:[{'note':_0x9a80d(0x1a7)}],_0x320038=PERSONA_MAPPING[this[_0x9a80d(0x184)][_0x9a80d(0x140)]||'generic'],_0x3c6ccb=this[_0x9a80d(0x184)][_0x9a80d(0x1a9)]||'',_0x771471=this['currentSystemMode'],_0x2d8604=new Date(),_0x375316=_0x2d8604[_0x9a80d(0x20f)](_0x9a80d(0x17d),{'weekday':_0x9a80d(0x242),'hour':_0x9a80d(0x1e9),'minute':_0x9a80d(0x1e9)}),_0x368491=this[_0x9a80d(0x231)],_0xeb531e=_0x9a80d(0x150)+_0x368491['latitude']+',\x20Lon\x20'+_0x368491[_0x9a80d(0x1a1)]+'\x20('+(_0x368491[_0x9a80d(0x2a6)]||'Unbekannt')+_0x9a80d(0x142);let _0x4eb70f=_0x9a80d(0x220),_0xbcff3f=_0x9a80d(0x17e);if(this[_0x9a80d(0x1f2)]&&this[_0x9a80d(0x1e4)]['length']>=(this['config'][_0x9a80d(0x1ab)]||0x7)&&_0x771471===SYSTEM_MODES[_0x9a80d(0x283)]){const _0x37b491=this['dailyDigests'][_0x9a80d(0x21f)](-(this['config'][_0x9a80d(0x29a)]||0xe))[_0x9a80d(0x1ee)]();_0x4eb70f=_0x9a80d(0x253)+JSON[_0x9a80d(0x178)](_0x37b491),_0xbcff3f=_0x9a80d(0x240);}let _0x25439f='';if(this[_0x9a80d(0x2c9)][_0x9a80d(0x154)]>0x0){const _0x53afdd=this[_0x9a80d(0x2c9)][_0x9a80d(0x141)](_0x39efe5=>_0x39efe5[_0x9a80d(0x169)]===_0x9a80d(0x1eb)||_0x39efe5['rating']===_0x9a80d(0x2ba))[_0x9a80d(0x21f)](0x0,0x3)[_0x9a80d(0x1ed)](_0x5257d3=>_0x9a80d(0x165)+_0x5257d3[_0x9a80d(0x185)]+_0x9a80d(0x192)+new Date(_0x5257d3['timestamp'])[_0x9a80d(0x1cd)]()+_0x9a80d(0x2b2)+(_0x5257d3['comment']||'No\x20comment')+'.')[_0x9a80d(0x19c)]('\x0a');_0x53afdd&&(_0x25439f='\x0a\x0aUSER\x20FEEDBACK\x20/\x20LERN-CONTEXT\x20(Vermeide\x20diese\x20Fehler):\x0a'+_0x53afdd+'\x0a');}const _0x728bc1=_0xa4567d?'\x0a!!!\x20EXTERNAL\x20SYSTEM\x20WARNING\x20!!!\x0a'+_0xa4567d+'\x0a!!!\x20END\x20WARNING\x20!!!\x0a':'',_0x52b525='ROLLE:\x20Smart\x20Home\x20Analyst.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20AKTUELLE\x20ZEIT:\x20'+_0x375316+'.\x20'+_0xeb531e+_0x9a80d(0x203)+_0x771471+'.\x20KONTEXT:\x20'+_0x3c6ccb+'.\x20PERSONA:\x20'+_0x320038+'.\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+_0x4eb70f+'\x20'+_0x25439f+'\x20'+_0x728bc1+_0x9a80d(0x278)+_0xbcff3f+_0x9a80d(0x16f)+JSON['stringify'](_0x2991f8)+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20SCHEMA:\x20{\x20\x22activity\x22:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22deviationFromBaseline\x22:\x20\x22string\x22,\x20\x22isAlert\x22:\x20bool,\x20\x22isEmergency\x22:\x20bool,\x20\x22alertReason\x22:\x20\x22string\x22\x20},\x20\x22comfort\x22:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22suggestion\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22patternDetected\x22:\x20bool,\x20\x22description\x22:\x20\x22string\x22,\x20\x22suggestedAction\x22:\x20\x22string\x22\x20}\x20}\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20HINWEIS:\x20Setze\x20isEmergency=true\x20NUR\x20bei\x20akuter\x20Lebensgefahr\x20oder\x20best√§tigter\x20Inaktivit√§t\x20√ºber\x20Schwellenwert.\x20isAlert=true\x20bei\x20Warnungen.';try{const _0x1c51d2=await this[_0x9a80d(0x157)][_0x9a80d(0x29b)](_0x52b525),_0xfb43dc=JSON[_0x9a80d(0x13d)](_0x1c51d2['response']['text']()['replace'](/```json|```/g,'')['trim']());await this[_0x9a80d(0x27b)](_0x9a80d(0x233),{'val':JSON['stringify'](_0xfb43dc),'ack':!![]}),await this[_0x9a80d(0x27b)](_0x9a80d(0x224),{'val':_0xfb43dc['activity']['summary']||'N/A','ack':!![]}),await this['setStateAsync'](_0x9a80d(0x17b),{'val':_0xfb43dc[_0x9a80d(0x2c3)]['deviationFromBaseline']||_0x9a80d(0x2b1),'ack':!![]}),await this['setStateAsync']('analysis.alertReason',{'val':_0xfb43dc[_0x9a80d(0x2c3)][_0x9a80d(0x185)]||'','ack':!![]});const _0x3005f8=_0xfb43dc[_0x9a80d(0x1ae)][_0x9a80d(0x13b)],_0x380b88=this['isProVersion']?_0x3005f8[_0x9a80d(0x2b3)]:![];await this[_0x9a80d(0x27b)](_0x9a80d(0x1dc),{'val':_0x380b88,'ack':!![]}),await this['setStateAsync'](_0x9a80d(0x238),{'val':_0x380b88?_0x3005f8[_0x9a80d(0x2a0)]:this[_0x9a80d(0x1f2)]?'':_0x9a80d(0x19d),'ack':!![]});const _0x398edb=_0xfb43dc['activity']['isAlert']||![],_0x4822e8=_0xfb43dc[_0x9a80d(0x2c3)]['isEmergency']||![];if(_0x398edb||_0x4822e8){await this['setStateAsync'](_0x9a80d(0x2b4),{'val':!![],'ack':!![]}),await this[_0x9a80d(0x27b)](_0x9a80d(0x131),{'val':_0x4822e8,'ack':!![]});if(!this['lastAlertState']||_0x4822e8){const _0x5c8296=_0x4822e8?_0x9a80d(0x254):_0x9a80d(0x17c);this[_0x9a80d(0x2d5)](_0x5c8296+':\x20'+_0xfb43dc['activity'][_0x9a80d(0x185)],![],_0x4822e8);}}else await this[_0x9a80d(0x27b)](_0x9a80d(0x2b4),{'val':![],'ack':!![]}),await this[_0x9a80d(0x27b)](_0x9a80d(0x131),{'val':![],'ack':!![]});this[_0x9a80d(0x152)]=_0x398edb||_0x4822e8;const _0x41d843={'timestamp':Date[_0x9a80d(0x2a4)](),'id':Date['now']()[_0x9a80d(0x12b)](),'analysis':_0xfb43dc,'systemMode':_0x771471,'isPro':this['isProVersion']};this['updateAnalysisHistory'](_0x41d843);}catch(_0x120593){this[_0x9a80d(0x2bb)][_0x9a80d(0x2cd)](_0x9a80d(0x236)+_0x120593[_0x9a80d(0x27e)]);}}async[a0_0x1ec6b6(0x2ae)](){const _0x31db94=a0_0x1ec6b6;if(!this[_0x31db94(0x1f2)])return;await this['setStateAsync'](LTM_DP_STATUS,{'val':_0x31db94(0x174)+new Date()[_0x31db94(0x20f)](),'ack':!![]});if(!this[_0x31db94(0x157)]||this[_0x31db94(0x1ce)][_0x31db94(0x154)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await this[_0x31db94(0x27b)](LTM_DP_STATUS,{'val':_0x31db94(0x2a1),'ack':!![]});return;}const _0x17438e=JSON[_0x31db94(0x13d)](JSON[_0x31db94(0x178)](this[_0x31db94(0x1ce)])),_0x2d015d=(this[_0x31db94(0x184)]['livingContext']||'')[_0x31db94(0x198)](0x0,0x3e8),_0x216a59=_0x31db94(0x273)+_0x2d015d+'.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a'+JSON[_0x31db94(0x178)](_0x17438e);try{const _0x4b2c7b=await this[_0x31db94(0x157)]['generateContent'](_0x216a59),_0x3380ca=JSON['parse'](_0x4b2c7b[_0x31db94(0x1a5)][_0x31db94(0x229)]()['replace'](/```json|```/g,'')[_0x31db94(0x135)]());_0x3380ca[_0x31db94(0x2bd)]&&(this[_0x31db94(0x1e4)]['push']({'timestamp':new Date()[_0x31db94(0x24d)](),'eventCount':_0x17438e[_0x31db94(0x154)],'summary':_0x3380ca[_0x31db94(0x2bd)],'activityLevel':_0x3380ca['activityLevel'],'systemMode':this[_0x31db94(0x138)]}),await this['saveDailyDigests'](),this[_0x31db94(0x1ce)]=[],await this['saveRawEventLog'](),await this[_0x31db94(0x27b)](LTM_DP_STATUS,{'val':'Success:\x20Compressed\x20'+_0x17438e['length']+_0x31db94(0x1c6),'ack':!![]}));}catch(_0x128f1c){await this[_0x31db94(0x27b)](LTM_DP_STATUS,{'val':_0x31db94(0x21a)+_0x128f1c[_0x31db94(0x27e)],'ack':!![]});}}async[a0_0x1ec6b6(0x2c8)](){const _0x5642dc=a0_0x1ec6b6;if(!this['isProVersion']||!this['geminiModel'])return;const _0x23aa98=this[_0x5642dc(0x184)][_0x5642dc(0x29a)]||0xe;if(this[_0x5642dc(0x1e4)][_0x5642dc(0x154)]<_0x23aa98+(this[_0x5642dc(0x184)][_0x5642dc(0x1ab)]||0x7)){await this[_0x5642dc(0x27b)](LTM_DP_DRIFT_STATUS,{'val':_0x5642dc(0x18b),'ack':!![]});return;}const _0x45ed79=this[_0x5642dc(0x1e4)]['slice'](-_0x23aa98),_0x5c8b7c=this[_0x5642dc(0x1e4)]['slice'](0x0,this[_0x5642dc(0x1e4)]['length']-_0x23aa98),_0x5cbc1e=_0x5642dc(0x2d0)+JSON[_0x5642dc(0x178)](_0x5c8b7c)+_0x5642dc(0x1b3)+JSON[_0x5642dc(0x178)](_0x45ed79);try{const _0x503e22=await this['geminiModel'][_0x5642dc(0x29b)](_0x5cbc1e),_0x5dd832=JSON[_0x5642dc(0x13d)](_0x503e22[_0x5642dc(0x1a5)][_0x5642dc(0x229)]()[_0x5642dc(0x26c)](/```json|```/g,'')[_0x5642dc(0x135)]());_0x5dd832['baselineDrift']&&(await this[_0x5642dc(0x27b)](LTM_DP_DRIFT_STATUS,{'val':_0x5dd832['baselineDrift'],'ack':!![]}),await this[_0x5642dc(0x27b)](LTM_DP_DRIFT_DETAILS,{'val':_0x5dd832[_0x5642dc(0x1c9)],'ack':!![]}),await this[_0x5642dc(0x27b)](LTM_DP_DRIFT_LAST_CHECK,{'val':Date[_0x5642dc(0x2a4)](),'ack':!![]}));}catch(_0x30daae){}}async[a0_0x1ec6b6(0x22b)](){const _0x2d29d2=a0_0x1ec6b6;await this[_0x2d29d2(0x2cb)](_0x2d29d2(0x2bf),{'type':_0x2d29d2(0x1c8),'common':{'name':_0x2d29d2(0x164)},'native':{}}),await this[_0x2d29d2(0x2cb)](SYSTEM_DP_MODE,{'type':_0x2d29d2(0x14f),'common':{'name':_0x2d29d2(0x234),'type':_0x2d29d2(0x161),'role':'state','read':!![],'write':!![],'def':SYSTEM_MODES[_0x2d29d2(0x283)],'states':{[SYSTEM_MODES['NORMAL']]:_0x2d29d2(0x1cc),[SYSTEM_MODES['VACATION']]:_0x2d29d2(0x2d2),[SYSTEM_MODES[_0x2d29d2(0x14e)]]:_0x2d29d2(0x16c),[SYSTEM_MODES[_0x2d29d2(0x1c0)]]:_0x2d29d2(0x2c2)}},'native':{}});}async[a0_0x1ec6b6(0x2b8)](){const _0x1897e1=a0_0x1ec6b6;try{const _0xd62363=await this['getStateAsync'](SYSTEM_DP_MODE);_0xd62363&&_0xd62363[_0x1897e1(0x149)]&&Object[_0x1897e1(0x1cf)](SYSTEM_MODES)['includes'](_0xd62363[_0x1897e1(0x149)])?this[_0x1897e1(0x138)]=_0xd62363[_0x1897e1(0x149)]:(this[_0x1897e1(0x138)]=SYSTEM_MODES[_0x1897e1(0x283)],await this[_0x1897e1(0x27b)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x1897e1(0x283)],'ack':!![]}));}catch(_0xee9b80){this[_0x1897e1(0x138)]=SYSTEM_MODES[_0x1897e1(0x283)];}}[a0_0x1ec6b6(0x12d)](){const _0x36bb27=a0_0x1ec6b6;if(this[_0x36bb27(0x285)])this['modeResetJob'][_0x36bb27(0x296)]();this[_0x36bb27(0x285)]=schedule[_0x36bb27(0x22e)](MODE_RESET_SCHEDULE,async()=>{const _0x2ef35c=_0x36bb27;await this[_0x2ef35c(0x2b8)](),AUTO_RESET_MODES[_0x2ef35c(0x267)](this['currentSystemMode'])&&await this[_0x2ef35c(0x27b)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x2ef35c(0x283)],'ack':![]});});}async[a0_0x1ec6b6(0x28d)](){const _0x22f6f2=a0_0x1ec6b6;if(!this[_0x22f6f2(0x1f2)]){await this[_0x22f6f2(0x27b)](LTM_DP_BASELINE_STATUS,{'val':_0x22f6f2(0x201),'ack':!![]});return;}const _0x2a39df=this['dailyDigests'][_0x22f6f2(0x154)]>=(this[_0x22f6f2(0x184)][_0x22f6f2(0x1ab)]||0x7)?_0x22f6f2(0x19f)+this[_0x22f6f2(0x1e4)][_0x22f6f2(0x154)]+_0x22f6f2(0x25c):_0x22f6f2(0x1b1)+this['dailyDigests']['length']+'/'+(this[_0x22f6f2(0x184)][_0x22f6f2(0x1ab)]||0x7)+')';await this[_0x22f6f2(0x27b)](LTM_DP_BASELINE_STATUS,{'val':_0x2a39df,'ack':!![]});}async[a0_0x1ec6b6(0x137)](){const _0x206558=a0_0x1ec6b6;await this['extendObjectAsync']('LTM',{'type':_0x206558(0x1c8),'common':{'name':_0x206558(0x24b)},'native':{}}),await this[_0x206558(0x2cb)](LTM_DP_RAW_LOG,{'type':_0x206558(0x14f),'common':{'name':'Raw\x20Log','type':'string','role':_0x206558(0x1d0),'read':!![],'write':![]},'native':{}}),await this[_0x206558(0x2cb)](LTM_DP_DAILY_DIGESTS,{'type':_0x206558(0x14f),'common':{'name':_0x206558(0x1e0),'type':_0x206558(0x161),'role':_0x206558(0x1d0),'read':!![],'write':![]},'native':{}}),await this[_0x206558(0x2cb)](LTM_DP_STATUS,{'type':'state','common':{'name':'Processing\x20Status','type':_0x206558(0x161),'role':_0x206558(0x229),'read':!![],'write':![]},'native':{}}),await this[_0x206558(0x2cb)](LTM_DP_TRIGGER_DIGEST,{'type':_0x206558(0x14f),'common':{'name':'Trigger\x20Digest','type':'boolean','role':'button','read':!![],'write':!![],'def':![]},'native':{}}),await this[_0x206558(0x2cb)](LTM_DP_BASELINE_STATUS,{'type':_0x206558(0x14f),'common':{'name':_0x206558(0x271),'type':_0x206558(0x161),'role':_0x206558(0x229),'read':!![],'write':![]},'native':{}});}async['checkLtmDriftObjects'](){const _0x1f6ebf=a0_0x1ec6b6;await this[_0x1f6ebf(0x2cb)](LTM_DP_DRIFT_CHANNEL,{'type':_0x1f6ebf(0x1c8),'common':{'name':_0x1f6ebf(0x163)},'native':{}}),await this[_0x1f6ebf(0x2cb)](LTM_DP_DRIFT_STATUS,{'type':_0x1f6ebf(0x14f),'common':{'name':_0x1f6ebf(0x286),'type':_0x1f6ebf(0x161),'role':_0x1f6ebf(0x14f),'read':!![],'write':![],'def':_0x1f6ebf(0x2b1)},'native':{}}),await this[_0x1f6ebf(0x2cb)](LTM_DP_DRIFT_DETAILS,{'type':'state','common':{'name':'Drift\x20Details','type':'string','role':_0x1f6ebf(0x229),'read':!![],'write':![]},'native':{}}),await this['extendObjectAsync'](LTM_DP_DRIFT_LAST_CHECK,{'type':_0x1f6ebf(0x14f),'common':{'name':_0x1f6ebf(0x25a),'type':_0x1f6ebf(0x26d),'role':'date','read':!![],'write':![]},'native':{}});}async[a0_0x1ec6b6(0x256)](){const _0x104a50=a0_0x1ec6b6;try{const _0x315aa0=await this[_0x104a50(0x144)](LTM_DP_RAW_LOG);if(_0x315aa0&&_0x315aa0[_0x104a50(0x149)])this[_0x104a50(0x1ce)]=JSON['parse'](_0x315aa0[_0x104a50(0x149)]);}catch(_0x127dfc){this[_0x104a50(0x1ce)]=[];}}async['saveRawEventLog'](){const _0xec4f8d=a0_0x1ec6b6;this[_0xec4f8d(0x1ce)][_0xec4f8d(0x154)]>RAW_LOG_MAX_SIZE&&this['rawEventLog']['splice'](0x0,this[_0xec4f8d(0x1ce)][_0xec4f8d(0x154)]-RAW_LOG_MAX_SIZE),await this[_0xec4f8d(0x27b)](LTM_DP_RAW_LOG,{'val':JSON[_0xec4f8d(0x178)](this[_0xec4f8d(0x1ce)]),'ack':!![]});}async[a0_0x1ec6b6(0x1ea)](){const _0x452772=a0_0x1ec6b6;try{const _0x27e6b9=await this[_0x452772(0x144)](LTM_DP_DAILY_DIGESTS);if(_0x27e6b9&&_0x27e6b9[_0x452772(0x149)])this[_0x452772(0x1e4)]=JSON['parse'](_0x27e6b9[_0x452772(0x149)]);}catch(_0x46e213){this[_0x452772(0x1e4)]=[];}await this[_0x452772(0x28d)]();}async[a0_0x1ec6b6(0x1d8)](_0x12fd46=!![]){const _0x660224=a0_0x1ec6b6,_0x50c2d0=this[_0x660224(0x184)][_0x660224(0x272)]||0x3c;this[_0x660224(0x1e4)][_0x660224(0x154)]>_0x50c2d0&&this[_0x660224(0x1e4)][_0x660224(0x183)](0x0,this[_0x660224(0x1e4)][_0x660224(0x154)]-_0x50c2d0);await this['setStateAsync'](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x660224(0x178)](this['dailyDigests']),'ack':!![]});if(_0x12fd46)await this[_0x660224(0x28d)]();}[a0_0x1ec6b6(0x230)](){const _0x2ae8b9=a0_0x1ec6b6;if(this[_0x2ae8b9(0x1b0)])this[_0x2ae8b9(0x1b0)][_0x2ae8b9(0x296)]();if(!this['isProVersion']){this[_0x2ae8b9(0x27b)](LTM_DP_STATUS,{'val':_0x2ae8b9(0x201),'ack':!![]});return;}this[_0x2ae8b9(0x1b0)]=schedule[_0x2ae8b9(0x22e)](LTM_SCHEDULE,()=>this[_0x2ae8b9(0x2ae)]());}[a0_0x1ec6b6(0x2b7)](){const _0x491601=a0_0x1ec6b6;if(this[_0x491601(0x22a)])clearInterval(this[_0x491601(0x22a)]);if(!this[_0x491601(0x1f2)])return;this['driftAnalysisTimer']=setInterval(()=>this[_0x491601(0x2c8)](),(this[_0x491601(0x184)][_0x491601(0x1a0)]||0x18)*0x36ee80),setTimeout(()=>this['runBaselineDriftAnalysis'](),0x1388);}async[a0_0x1ec6b6(0x241)](){const _0x513c9d=a0_0x1ec6b6;await this[_0x513c9d(0x27b)](_0x513c9d(0x224),{'val':'No\x20recent\x20activity.','ack':!![]}),await this[_0x513c9d(0x27b)](_0x513c9d(0x17b),{'val':this[_0x513c9d(0x1f2)]?_0x513c9d(0x1a6):'N/A\x20(Pro\x20Feature)','ack':!![]}),await this[_0x513c9d(0x27b)](_0x513c9d(0x2b4),{'val':![],'ack':!![]}),await this[_0x513c9d(0x27b)](_0x513c9d(0x131),{'val':![],'ack':!![]}),this[_0x513c9d(0x152)]=![];}async[a0_0x1ec6b6(0x248)](_0x2d862c){const _0x8e0865=a0_0x1ec6b6;this[_0x8e0865(0x12a)][_0x8e0865(0x1fe)](_0x2d862c);if(this[_0x8e0865(0x12a)][_0x8e0865(0x154)]>ANALYSIS_HISTORY_MAX_SIZE)this[_0x8e0865(0x12a)]['pop']();await this['setStateAsync'](_0x8e0865(0x257),{'val':JSON[_0x8e0865(0x178)](this[_0x8e0865(0x12a)]),'ack':!![]});}async[a0_0x1ec6b6(0x2d5)](_0x3d14da,_0x2b125f=![],_0x29ffce=![]){const _0x285d37=a0_0x1ec6b6;this[_0x285d37(0x2bb)][_0x285d37(0x290)]((_0x2b125f?_0x285d37(0x19a):'')+_0x285d37(0x28a)+_0x3d14da+'\x22'+(_0x29ffce?_0x285d37(0x2c7):''));const _0x24e7de=this[_0x285d37(0x184)];let _0x4a8dfa=0x0;_0x24e7de[_0x285d37(0x18f)]&&_0x24e7de['notifyTelegramInstance']&&(await this[_0x285d37(0x15c)](_0x24e7de[_0x285d37(0x235)],'send',{'text':_0x3d14da,'user':_0x24e7de[_0x285d37(0x27a)]}),_0x4a8dfa++);if(_0x24e7de['notifyPushoverEnabled']&&_0x24e7de[_0x285d37(0x1b8)]){let _0x45a165={'message':_0x3d14da,'title':_0x29ffce?_0x285d37(0x129):'Cogni-Living\x20Alert','priority':_0x29ffce?0x2:0x1,'device':_0x24e7de[_0x285d37(0x1d6)]};_0x29ffce&&(_0x45a165['retry']=0x1e,_0x45a165['expire']=0xe10,_0x45a165[_0x285d37(0x289)]='siren'),await this['sendToAsync'](_0x24e7de['notifyPushoverInstance'],'send',_0x45a165),_0x4a8dfa++;}return _0x24e7de[_0x285d37(0x27c)]&&_0x24e7de[_0x285d37(0x1d4)]&&(await this[_0x285d37(0x15c)](_0x24e7de[_0x285d37(0x1d4)],_0x285d37(0x26b),{'text':_0x3d14da,'to':_0x24e7de['notifyEmailRecipient']}),_0x4a8dfa++),_0x24e7de['notifyWhatsappEnabled']&&_0x24e7de['notifyWhatsappInstance']&&(await this[_0x285d37(0x15c)](_0x24e7de[_0x285d37(0x28e)],_0x285d37(0x26b),{'text':_0x3d14da,'phone':_0x24e7de[_0x285d37(0x251)]}),_0x4a8dfa++),_0x24e7de[_0x285d37(0x204)]&&_0x24e7de[_0x285d37(0x217)]&&(await this[_0x285d37(0x15c)](_0x24e7de[_0x285d37(0x217)],_0x285d37(0x26b),{'text':_0x3d14da,'phone':_0x24e7de['notifySignalRecipient']}),_0x4a8dfa++),_0x4a8dfa;}async[a0_0x1ec6b6(0x29f)](_0x394ad4){const _0x5d2ac4=a0_0x1ec6b6;this[_0x5d2ac4(0x2c9)][_0x5d2ac4(0x1fe)](_0x394ad4);if(this[_0x5d2ac4(0x2c9)][_0x5d2ac4(0x154)]>FEEDBACK_MAX_SIZE)this['feedbackHistory'][_0x5d2ac4(0x2cc)]();await this[_0x5d2ac4(0x27b)](_0x5d2ac4(0x151),{'val':JSON[_0x5d2ac4(0x178)](this[_0x5d2ac4(0x2c9)]),'ack':!![]}),this[_0x5d2ac4(0x2bb)][_0x5d2ac4(0x290)](_0x5d2ac4(0x207)+_0x394ad4['rating']+_0x5d2ac4(0x1d3)+_0x394ad4[_0x5d2ac4(0x23a)]);}[a0_0x1ec6b6(0x173)](_0x4dbdd7){const _0x45b03a=a0_0x1ec6b6;if(this[_0x45b03a(0x13c)])clearInterval(this[_0x45b03a(0x13c)]);if(this[_0x45b03a(0x22a)])clearInterval(this['driftAnalysisTimer']);if(this['ltmJob'])this['ltmJob'][_0x45b03a(0x296)]();if(this[_0x45b03a(0x285)])this['modeResetJob'][_0x45b03a(0x296)]();_0x4dbdd7();}async['onMessage'](_0x4c9eb5){const _0x4f3139=a0_0x1ec6b6;if(typeof _0x4c9eb5===_0x4f3139(0x1f5)&&_0x4c9eb5[_0x4f3139(0x27e)]){if(_0x4c9eb5['command']===_0x4f3139(0x176)){if(!_0x4c9eb5['message']['apiKey'])return this[_0x4f3139(0x16b)](_0x4c9eb5[_0x4f3139(0x191)],_0x4c9eb5[_0x4f3139(0x15f)],{'success':![],'message':'No\x20Key'},_0x4c9eb5[_0x4f3139(0x133)]);try{const _0x13c990=new GoogleGenerativeAI(_0x4c9eb5[_0x4f3139(0x27e)]['apiKey'])['getGenerativeModel']({'model':_0x4f3139(0x2c1)});await _0x13c990[_0x4f3139(0x29b)](_0x4f3139(0x1cb)),this[_0x4f3139(0x16b)](_0x4c9eb5[_0x4f3139(0x191)],_0x4c9eb5[_0x4f3139(0x15f)],{'success':!![],'message':_0x4f3139(0x187)},_0x4c9eb5[_0x4f3139(0x133)]);}catch(_0x26a094){this[_0x4f3139(0x16b)](_0x4c9eb5[_0x4f3139(0x191)],_0x4c9eb5[_0x4f3139(0x15f)],{'success':![],'message':_0x26a094['message']},_0x4c9eb5['callback']);}}else{if(_0x4c9eb5[_0x4f3139(0x15f)]===_0x4f3139(0x269)){const _0x13dd48=await this[_0x4f3139(0x2d5)](_0x4f3139(0x288),!![]);this[_0x4f3139(0x16b)](_0x4c9eb5[_0x4f3139(0x191)],_0x4c9eb5[_0x4f3139(0x15f)],{'success':_0x13dd48>0x0,'message':_0x13dd48+'\x20sent'},_0x4c9eb5[_0x4f3139(0x133)]);}else{if(_0x4c9eb5[_0x4f3139(0x15f)]==='getLtmData'){if(!this[_0x4f3139(0x1f2)])return this[_0x4f3139(0x16b)](_0x4c9eb5['from'],_0x4c9eb5['command'],{'success':![],'isPro':![]},_0x4c9eb5['callback']);let _0x3a06fb={'status':'N/A','details':'','lastCheck':0x0};try{_0x3a06fb[_0x4f3139(0x210)]=(await this[_0x4f3139(0x144)](LTM_DP_DRIFT_STATUS))[_0x4f3139(0x149)],_0x3a06fb[_0x4f3139(0x24e)]=(await this[_0x4f3139(0x144)](LTM_DP_DRIFT_DETAILS))[_0x4f3139(0x149)],_0x3a06fb[_0x4f3139(0x266)]=(await this['getStateAsync'](LTM_DP_DRIFT_LAST_CHECK))[_0x4f3139(0x149)];}catch(_0x3e5585){}this[_0x4f3139(0x16b)](_0x4c9eb5['from'],_0x4c9eb5[_0x4f3139(0x15f)],{'success':!![],'isPro':!![],'dailyDigests':this[_0x4f3139(0x1e4)],'driftAnalysis':_0x3a06fb,'analysisHistory':this[_0x4f3139(0x12a)]},_0x4c9eb5['callback']);}else{if(_0x4c9eb5[_0x4f3139(0x15f)]===_0x4f3139(0x244)){const _0x484d84=await this[_0x4f3139(0x215)](_0x4f3139(0x136),'enum'),_0x5b047c=[];if(_0x484d84)for(const _0x3ae151 in _0x484d84){const _0x33c842=_0x484d84[_0x3ae151],_0x23b139=(_0x33c842[_0x4f3139(0x1b6)]&&typeof _0x33c842[_0x4f3139(0x1b6)]['name']===_0x4f3139(0x1f5)?_0x33c842[_0x4f3139(0x1b6)]['name']['de']:_0x33c842[_0x4f3139(0x1b6)][_0x4f3139(0x179)])||_0x33c842['common'][_0x4f3139(0x179)];_0x5b047c['push']({'id':_0x3ae151,'name':_0x23b139});}this[_0x4f3139(0x16b)](_0x4c9eb5[_0x4f3139(0x191)],_0x4c9eb5[_0x4f3139(0x15f)],{'success':!![],'enums':_0x5b047c},_0x4c9eb5[_0x4f3139(0x133)]);}else{if(_0x4c9eb5['command']===_0x4f3139(0x1d9)){this[_0x4f3139(0x2bb)][_0x4f3139(0x290)]('Received\x20scanDevices\x20request\x20from\x20Admin\x20UI.');const _0x5905ee=_0x4c9eb5['message']||{};try{const _0x48198c=await this[_0x4f3139(0x1aa)](_0x5905ee);this['sendTo'](_0x4c9eb5[_0x4f3139(0x191)],_0x4c9eb5[_0x4f3139(0x15f)],{'success':!![],'devices':_0x48198c},_0x4c9eb5['callback']);}catch(_0x6310c5){this[_0x4f3139(0x16b)](_0x4c9eb5[_0x4f3139(0x191)],_0x4c9eb5[_0x4f3139(0x15f)],{'success':![],'error':_0x6310c5['message']},_0x4c9eb5[_0x4f3139(0x133)]);}}else{if(_0x4c9eb5[_0x4f3139(0x15f)]===_0x4f3139(0x1ec)){const {historyId:_0x3ea949,rating:_0x527b87,comment:_0xdabb73,alertReason:_0x4a8914}=_0x4c9eb5['message'];_0x3ea949&&_0x527b87?(await this[_0x4f3139(0x29f)]({'timestamp':Date[_0x4f3139(0x2a4)](),'historyId':_0x3ea949,'rating':_0x527b87,'comment':_0xdabb73,'alertReason':_0x4a8914}),this[_0x4f3139(0x16b)](_0x4c9eb5[_0x4f3139(0x191)],_0x4c9eb5[_0x4f3139(0x15f)],{'success':!![]},_0x4c9eb5[_0x4f3139(0x133)])):this[_0x4f3139(0x16b)](_0x4c9eb5[_0x4f3139(0x191)],_0x4c9eb5['command'],{'success':![],'error':_0x4f3139(0x1fd)},_0x4c9eb5[_0x4f3139(0x133)]);}}}}}}}}}if(require[a0_0x1ec6b6(0x225)]!==module)module['exports']=_0x16f6bb=>new CogniLiving(_0x16f6bb);else new CogniLiving();