const a0_0x7bdfd=a0_0xdc5d;(function(_0x594449,_0x51e67c){const _0x25899e=a0_0xdc5d,_0x4abde1=_0x594449();while(!![]){try{const _0x5c8d64=parseInt(_0x25899e(0x27c))/0x1*(parseInt(_0x25899e(0xf8))/0x2)+parseInt(_0x25899e(0x24c))/0x3+-parseInt(_0x25899e(0x113))/0x4+-parseInt(_0x25899e(0x252))/0x5*(-parseInt(_0x25899e(0x2a7))/0x6)+parseInt(_0x25899e(0x11a))/0x7+-parseInt(_0x25899e(0xfd))/0x8+parseInt(_0x25899e(0x169))/0x9;if(_0x5c8d64===_0x51e67c)break;else _0x4abde1['push'](_0x4abde1['shift']());}catch(_0x2721a5){_0x4abde1['push'](_0x4abde1['shift']());}}}(a0_0x60ac,0x45d6a));const a0_0x44ade9=(function(){let _0x4da62b=!![];return function(_0x177d68,_0x3b204c){const _0x482fd1=_0x4da62b?function(){const _0x8ffcc8=a0_0xdc5d;if(_0x3b204c){const _0xe7034d=_0x3b204c[_0x8ffcc8(0xc7)](_0x177d68,arguments);return _0x3b204c=null,_0xe7034d;}}:function(){};return _0x4da62b=![],_0x482fd1;};}()),a0_0x3fb060=a0_0x44ade9(this,function(){const _0x37c26c=a0_0xdc5d;return a0_0x3fb060[_0x37c26c(0x257)]()[_0x37c26c(0x1a6)](_0x37c26c(0xe7))[_0x37c26c(0x257)]()[_0x37c26c(0x227)](a0_0x3fb060)[_0x37c26c(0x1a6)](_0x37c26c(0xe7));});a0_0x3fb060();'use strict';const utils=require('@iobroker/adapter-core'),{GoogleGenerativeAI}=require('@google/generative-ai'),schedule=require(a0_0x7bdfd(0x1d6)),{spawn,exec}=require('child_process'),path=require(a0_0x7bdfd(0x12e)),HISTORY_MAX_SIZE=0x32,RAW_LOG_MAX_SIZE=0x5dc,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL=a0_0x7bdfd(0xe2),LTM_SCHEDULE=a0_0x7bdfd(0x102),MODE_RESET_SCHEDULE=a0_0x7bdfd(0x208),ANALYSIS_HISTORY_MAX_SIZE=0x64,EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,SEQUENCE_TIMEOUT_MS=0x5*0x3c*0x3e8,MAX_TRAINING_SET_SIZE=0x1f4,THERMO_LOG_SIZE=0x3e8,LTM_DP_RAW_LOG=a0_0x7bdfd(0x2a2),LTM_DP_DAILY_DIGESTS=a0_0x7bdfd(0x11f),LTM_DP_STATUS='LTM.processingStatus',LTM_DP_TRIGGER_DIGEST='LTM.triggerDailyDigest',LTM_DP_BASELINE_STATUS=a0_0x7bdfd(0x195),LTM_DP_DRIFT_CHANNEL=a0_0x7bdfd(0x10c),LTM_DP_DRIFT_STATUS=a0_0x7bdfd(0x284),LTM_DP_DRIFT_DETAILS='LTM.driftAnalysis.driftDetails',LTM_DP_DRIFT_LAST_CHECK=a0_0x7bdfd(0x15b),SYSTEM_DP_MODE=a0_0x7bdfd(0x151),HARD_IGNORE_TERMS=[a0_0x7bdfd(0x223),'scriptEnabled','update',a0_0x7bdfd(0x158),a0_0x7bdfd(0x1f6),a0_0x7bdfd(0x1c0),a0_0x7bdfd(0x242),a0_0x7bdfd(0x249),a0_0x7bdfd(0x1c6),a0_0x7bdfd(0x1b9),a0_0x7bdfd(0x2b3),a0_0x7bdfd(0x1ac),a0_0x7bdfd(0x274),a0_0x7bdfd(0x116),a0_0x7bdfd(0x28e),'firmware',a0_0x7bdfd(0x2b8),'link_quality'],BAD_NAMES=[a0_0x7bdfd(0xe1),'currentposition',a0_0x7bdfd(0x248),a0_0x7bdfd(0x125),a0_0x7bdfd(0x23e),a0_0x7bdfd(0x204),'on',a0_0x7bdfd(0x2ac),'switch',a0_0x7bdfd(0x13c),a0_0x7bdfd(0x1e5),a0_0x7bdfd(0x25f),a0_0x7bdfd(0x1e8),a0_0x7bdfd(0x243),'motion',a0_0x7bdfd(0x172),a0_0x7bdfd(0x1ec),a0_0x7bdfd(0x111),a0_0x7bdfd(0x21e),'power',a0_0x7bdfd(0x126),a0_0x7bdfd(0x222),a0_0x7bdfd(0x194),'actual_temperature',a0_0x7bdfd(0x18a)],ADAPTER_BLACKLIST=[a0_0x7bdfd(0x26b),a0_0x7bdfd(0x17e),'info.',a0_0x7bdfd(0x146),'history.',a0_0x7bdfd(0x263),a0_0x7bdfd(0x28c),a0_0x7bdfd(0x21d),a0_0x7bdfd(0x17d),a0_0x7bdfd(0x106),'simple-api.'],SYSTEM_MODES={'NORMAL':a0_0x7bdfd(0x26e),'VACATION':a0_0x7bdfd(0xef),'PARTY':a0_0x7bdfd(0x261),'GUEST':a0_0x7bdfd(0x24a)},AUTO_RESET_MODES=[SYSTEM_MODES[a0_0x7bdfd(0x1d3)],SYSTEM_MODES[a0_0x7bdfd(0x12f)]],PERSONA_MAPPING={'generic':a0_0x7bdfd(0x24d),'senior_aal':a0_0x7bdfd(0x218),'family':a0_0x7bdfd(0x1cb),'single_comfort':'Fokus\x20auf\x20Komfort.','security':'PRIORIT√ÑT:\x20Sicherheit.'},ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};let activeSequence=[],sequenceTimer=null;async function initZombies(_0x3ae739){const _0x283738=a0_0x7bdfd;try{const _0xa58410=[_0x283738(0x25e),_0x283738(0x17c)];for(const _0x4bd3ba of _0xa58410){try{const _0xd6f4b4=await _0x3ae739['getObjectAsync'](_0x4bd3ba);_0xd6f4b4&&await _0x3ae739[_0x283738(0x237)](_0x4bd3ba);}catch(_0x173734){}}}catch(_0x31140f){}}async function initHistory(_0x29bade){const _0xd8369=a0_0x7bdfd;try{const _0x4e64f6=await _0x29bade[_0xd8369(0x214)](_0xd8369(0x25b));_0x4e64f6&&_0x4e64f6['val']&&(_0x29bade['eventHistory']=JSON[_0xd8369(0x1ef)](_0x4e64f6[_0xd8369(0x10a)][_0xd8369(0x257)]()));}catch(_0x3f467c){_0x29bade[_0xd8369(0x29f)]=[];}try{const _0x4fac96=await _0x29bade[_0xd8369(0x214)](_0xd8369(0xd5));if(_0x4fac96&&_0x4fac96[_0xd8369(0x10a)])_0x29bade[_0xd8369(0x1a8)]=JSON[_0xd8369(0x1ef)](_0x4fac96[_0xd8369(0x10a)][_0xd8369(0x257)]());}catch(_0x2917fc){_0x29bade['analysisHistory']=[];}if(_0x29bade[_0xd8369(0x29f)]&&_0x29bade[_0xd8369(0x29f)][_0xd8369(0x244)]>0x0){_0x29bade[_0xd8369(0x294)][_0xd8369(0x19c)](_0xd8369(0x145)+_0x29bade[_0xd8369(0x29f)][_0xd8369(0x244)]+_0xd8369(0x1bc));for(let _0x22defe=_0x29bade[_0xd8369(0x29f)][_0xd8369(0x244)]-0x1;_0x22defe>=0x0;_0x22defe--){const _0x4c12c4=_0x29bade['eventHistory'][_0x22defe];_0x4c12c4&&_0x4c12c4['id']!==undefined&&_0x4c12c4[_0xd8369(0x23e)]!==undefined&&(_0x29bade[_0xd8369(0x119)][_0x4c12c4['id']]=_0x4c12c4[_0xd8369(0x23e)]);}}}async function initSystemConfig(_0x495dad){const _0x2d4a56=a0_0x7bdfd;try{const _0x5a89cd=await _0x495dad[_0x2d4a56(0x1e6)](_0x2d4a56(0x2a5));_0x5a89cd&&_0x5a89cd[_0x2d4a56(0x272)]&&(_0x495dad[_0x2d4a56(0x1b8)]={'latitude':_0x5a89cd[_0x2d4a56(0x272)][_0x2d4a56(0x2b6)]||0x0,'longitude':_0x5a89cd['common'][_0x2d4a56(0x268)]||0x0,'city':_0x5a89cd[_0x2d4a56(0x272)][_0x2d4a56(0x180)]||''});}catch(_0x556ed7){}}async function checkLicense(_0x369ee8,_0x2bdf87){const _0x1368f3=a0_0x7bdfd;if(!_0x2bdf87)return![];_0x369ee8[_0x1368f3(0xc9)]=await getSystemUUID(_0x369ee8);if(_0x2bdf87===_0x1368f3(0xed)||_0x2bdf87[_0x1368f3(0x165)](_0x1368f3(0x168)))return!![];return![];}async function getSystemUUID(_0x32cfb7){const _0xc9f6b4=a0_0x7bdfd;try{const _0x328236=await _0x32cfb7[_0xc9f6b4(0x1e6)]('system.meta.uuid');if(_0x328236&&_0x328236[_0xc9f6b4(0xea)]&&_0x328236[_0xc9f6b4(0xea)]['uuid'])return _0x328236['native'][_0xc9f6b4(0x21b)];return _0xc9f6b4(0x1e1);}catch(_0x58c79c){return _0xc9f6b4(0xf3);}}async function createAllObjects(_0x1f53dd){const _0x1db3ad=a0_0x7bdfd;await checkSystemObjects(_0x1f53dd),await _0x1f53dd['setObjectNotExistsAsync']('system.presenceWho',{'type':_0x1db3ad(0x248),'common':{'name':_0x1db3ad(0xda),'type':'string','role':'text','read':!![],'write':![],'def':''},'native':{}}),await _0x1f53dd[_0x1db3ad(0xc4)](_0x1db3ad(0x224),{'type':_0x1db3ad(0x248),'common':{'name':'Last\x20raw\x20event','type':_0x1db3ad(0x156),'role':'json','read':!![],'write':![]},'native':{}}),await _0x1f53dd[_0x1db3ad(0xc4)]('events.history',{'type':_0x1db3ad(0x248),'common':{'name':_0x1db3ad(0x1a4),'type':_0x1db3ad(0x156),'role':_0x1db3ad(0x250),'read':!![],'write':![]},'native':{}}),await _0x1f53dd[_0x1db3ad(0xc4)](_0x1db3ad(0x141),{'type':_0x1db3ad(0x248),'common':{'name':_0x1db3ad(0x239),'type':_0x1db3ad(0x100),'role':_0x1db3ad(0x136),'read':!![],'write':!![],'def':![]},'native':{}}),await _0x1f53dd[_0x1db3ad(0xc4)](_0x1db3ad(0x175),{'type':_0x1db3ad(0x248),'common':{'name':_0x1db3ad(0xbe),'type':_0x1db3ad(0x100),'role':_0x1db3ad(0x136),'read':!![],'write':!![],'def':![]},'native':{}}),await _0x1f53dd[_0x1db3ad(0xc4)](_0x1db3ad(0x185),{'type':_0x1db3ad(0x248),'common':{'name':_0x1db3ad(0x1ab),'type':_0x1db3ad(0x156),'role':_0x1db3ad(0x250),'read':!![],'write':![]},'native':{}}),await _0x1f53dd['setObjectNotExistsAsync']('analysis.isAlert',{'type':'state','common':{'name':_0x1db3ad(0x20f),'type':_0x1db3ad(0x100),'role':_0x1db3ad(0x1f0),'read':!![],'write':![],'def':![]},'native':{}}),await _0x1f53dd[_0x1db3ad(0xc4)](_0x1db3ad(0x20c),{'type':_0x1db3ad(0x248),'common':{'name':_0x1db3ad(0x1ea),'type':_0x1db3ad(0x100),'role':'indicator.alarm.fire','read':!![],'write':![],'def':![]},'native':{}}),await _0x1f53dd[_0x1db3ad(0xc4)](_0x1db3ad(0x133),{'type':_0x1db3ad(0x248),'common':{'name':'Alert\x20Reason','type':_0x1db3ad(0x156),'role':_0x1db3ad(0x1da),'read':!![],'write':![]},'native':{}}),await _0x1f53dd[_0x1db3ad(0xc4)](_0x1db3ad(0xcd),{'type':_0x1db3ad(0x248),'common':{'name':_0x1db3ad(0x10f),'type':_0x1db3ad(0x156),'role':'text','read':!![],'write':![]},'native':{}}),await _0x1f53dd[_0x1db3ad(0xc4)]('analysis.deviationFromBaseline',{'type':_0x1db3ad(0x248),'common':{'name':_0x1db3ad(0x182),'type':_0x1db3ad(0x156),'role':_0x1db3ad(0x248),'read':!![],'write':![],'def':_0x1db3ad(0x11b)},'native':{}}),await _0x1f53dd[_0x1db3ad(0xc4)](_0x1db3ad(0x286),{'type':_0x1db3ad(0x248),'common':{'name':_0x1db3ad(0x1f1),'type':'string','role':'text','read':!![],'write':![]},'native':{}}),await _0x1f53dd[_0x1db3ad(0xc4)](_0x1db3ad(0x27b),{'type':_0x1db3ad(0x248),'common':{'name':_0x1db3ad(0x10d),'type':_0x1db3ad(0x156),'role':_0x1db3ad(0x1b0),'read':!![],'write':![]},'native':{}}),await _0x1f53dd[_0x1db3ad(0x1c1)](_0x1db3ad(0x23b),{'type':'channel','common':{'name':'Automation\x20Proposals'},'native':{}}),await _0x1f53dd['setObjectNotExistsAsync']('analysis.automation.patternDetected',{'type':'state','common':{'name':_0x1db3ad(0x233),'type':_0x1db3ad(0x100),'role':'indicator','read':!![],'write':![],'def':![]},'native':{}}),await _0x1f53dd[_0x1db3ad(0xc4)](_0x1db3ad(0x289),{'type':_0x1db3ad(0x248),'common':{'name':_0x1db3ad(0x186),'type':_0x1db3ad(0x156),'role':_0x1db3ad(0x1b0),'read':!![],'write':![]},'native':{}}),await _0x1f53dd[_0x1db3ad(0xc4)](_0x1db3ad(0x1aa),{'type':_0x1db3ad(0x248),'common':{'name':'Action','type':_0x1db3ad(0x156),'role':_0x1db3ad(0x1b0),'read':!![],'write':![]},'native':{}}),await _0x1f53dd[_0x1db3ad(0xc4)](_0x1db3ad(0x193),{'type':_0x1db3ad(0x248),'common':{'name':_0x1db3ad(0x147),'type':_0x1db3ad(0x156),'role':'text','read':!![],'write':![]},'native':{}}),await _0x1f53dd[_0x1db3ad(0xc4)]('analysis.automation.targetValue',{'type':_0x1db3ad(0x248),'common':{'name':'Target\x20Value','type':_0x1db3ad(0x156),'role':'text','read':!![],'write':![]},'native':{}}),await _0x1f53dd[_0x1db3ad(0xc4)](_0x1db3ad(0x128),{'type':_0x1db3ad(0x248),'common':{'name':'Auto\x20Apply\x20Rule','type':_0x1db3ad(0x100),'role':_0x1db3ad(0x29a),'read':!![],'write':!![],'def':![]},'native':{}}),await _0x1f53dd['setObjectNotExistsAsync'](_0x1db3ad(0xd8),{'type':_0x1db3ad(0x248),'common':{'name':'Trigger\x20Action\x20Now','type':_0x1db3ad(0x100),'role':_0x1db3ad(0x136),'read':!![],'write':!![],'def':![]},'native':{}}),await _0x1f53dd[_0x1db3ad(0xc4)](_0x1db3ad(0xd5),{'type':_0x1db3ad(0x248),'common':{'name':_0x1db3ad(0x19e),'type':_0x1db3ad(0x156),'role':_0x1db3ad(0x250),'read':!![],'write':![],'def':'[]'},'native':{}}),await _0x1f53dd[_0x1db3ad(0xc4)]('analysis.feedbackHistory',{'type':_0x1db3ad(0x248),'common':{'name':'Feedback\x20Log','type':_0x1db3ad(0x156),'role':_0x1db3ad(0x250),'read':!![],'write':![],'def':'[]'},'native':{}}),await _0x1f53dd['extendObjectAsync'](_0x1db3ad(0x22c),{'type':'channel','common':{'name':_0x1db3ad(0x27e)},'native':{}}),await _0x1f53dd[_0x1db3ad(0xc4)](_0x1db3ad(0x240),{'type':_0x1db3ad(0x248),'common':{'name':_0x1db3ad(0x123),'type':_0x1db3ad(0x1ed),'role':'value.health','read':!![],'write':![],'def':0x0},'native':{}}),await _0x1f53dd[_0x1db3ad(0xc4)](_0x1db3ad(0x22f),{'type':'state','common':{'name':_0x1db3ad(0x24e),'type':_0x1db3ad(0x156),'role':_0x1db3ad(0x1b0),'read':!![],'write':![],'def':_0x1db3ad(0x2bb)},'native':{}}),await _0x1f53dd[_0x1db3ad(0xc4)](_0x1db3ad(0x112),{'type':_0x1db3ad(0x248),'common':{'name':_0x1db3ad(0x29c),'type':_0x1db3ad(0x156),'role':_0x1db3ad(0x1b0),'read':!![],'write':![],'def':''},'native':{}}),await _0x1f53dd[_0x1db3ad(0xc4)](_0x1db3ad(0x28f),{'type':'state','common':{'name':_0x1db3ad(0x280),'type':_0x1db3ad(0x156),'role':_0x1db3ad(0x1b0),'read':!![],'write':![],'def':_0x1db3ad(0x11b)},'native':{}}),await _0x1f53dd[_0x1db3ad(0xc4)]('analysis.health.trendValue',{'type':_0x1db3ad(0x248),'common':{'name':_0x1db3ad(0x18f),'type':_0x1db3ad(0x1ed),'role':_0x1db3ad(0x23e),'read':!![],'write':![],'def':0x0},'native':{}}),await _0x1f53dd[_0x1db3ad(0x1c1)](_0x1db3ad(0x23f),{'type':_0x1db3ad(0x1e4),'common':{'name':'Training\x20Data\x20Sets'},'native':{}}),await _0x1f53dd[_0x1db3ad(0xc4)](_0x1db3ad(0x16f),{'type':_0x1db3ad(0x248),'common':{'name':_0x1db3ad(0xf0),'type':_0x1db3ad(0x156),'role':_0x1db3ad(0x250),'read':!![],'write':![],'def':'[]','desc':'Array\x20of\x20completed\x20movement\x20paths\x20for\x20ML\x20training'},'native':{}}),await _0x1f53dd['setObjectNotExistsAsync']('LTM.trainingData.thermodynamics',{'type':'state','common':{'name':_0x1db3ad(0x1fd),'type':_0x1db3ad(0x156),'role':_0x1db3ad(0x250),'read':!![],'write':![],'def':'[]','desc':_0x1db3ad(0x12c)},'native':{}}),await checkLtmObjects(_0x1f53dd),await checkLtmDriftObjects(_0x1f53dd);}async function checkSystemObjects(_0x5d1b21){const _0x39db4b=a0_0x7bdfd;await _0x5d1b21[_0x39db4b(0x1c1)](_0x39db4b(0x209),{'type':_0x39db4b(0x1e4),'common':{'name':'System\x20Status\x20&\x20Control'},'native':{}}),await _0x5d1b21[_0x39db4b(0x1c1)](SYSTEM_DP_MODE,{'type':_0x39db4b(0x248),'common':{'name':_0x39db4b(0x1d9),'type':'string','role':_0x39db4b(0x248),'read':!![],'write':!![],'def':SYSTEM_MODES[_0x39db4b(0x109)],'states':{[SYSTEM_MODES[_0x39db4b(0x109)]]:_0x39db4b(0x118),[SYSTEM_MODES['VACATION']]:_0x39db4b(0x199),[SYSTEM_MODES['PARTY']]:_0x39db4b(0x247),[SYSTEM_MODES[_0x39db4b(0x12f)]]:_0x39db4b(0x1ee)}},'native':{}});}async function checkLtmObjects(_0x44ff88){const _0x35ef08=a0_0x7bdfd;await _0x44ff88[_0x35ef08(0x1c1)](_0x35ef08(0xe5),{'type':_0x35ef08(0x1e4),'common':{'name':_0x35ef08(0xe5)},'native':{}}),await _0x44ff88[_0x35ef08(0x1c1)](LTM_DP_RAW_LOG,{'type':_0x35ef08(0x248),'common':{'name':_0x35ef08(0x22b),'type':_0x35ef08(0x156),'role':_0x35ef08(0x250),'read':!![],'write':![]},'native':{}}),await _0x44ff88[_0x35ef08(0x1c1)](LTM_DP_DAILY_DIGESTS,{'type':_0x35ef08(0x248),'common':{'name':_0x35ef08(0xbd),'type':_0x35ef08(0x156),'role':'json','read':!![],'write':![]},'native':{}}),await _0x44ff88[_0x35ef08(0x1c1)](LTM_DP_STATUS,{'type':_0x35ef08(0x248),'common':{'name':_0x35ef08(0x1a3),'type':'string','role':_0x35ef08(0x1b0),'read':!![],'write':![]},'native':{}}),await _0x44ff88['extendObjectAsync'](LTM_DP_TRIGGER_DIGEST,{'type':'state','common':{'name':'Trigger\x20Digest','type':_0x35ef08(0x100),'role':_0x35ef08(0x136),'read':!![],'write':!![],'def':![]},'native':{}}),await _0x44ff88['extendObjectAsync'](LTM_DP_BASELINE_STATUS,{'type':'state','common':{'name':_0x35ef08(0x1cc),'type':_0x35ef08(0x156),'role':'text','read':!![],'write':![]},'native':{}});}async function checkLtmDriftObjects(_0x187102){const _0x35f8c0=a0_0x7bdfd;await _0x187102['extendObjectAsync'](LTM_DP_DRIFT_CHANNEL,{'type':_0x35f8c0(0x1e4),'common':{'name':'Drift\x20Analysis'},'native':{}}),await _0x187102['extendObjectAsync'](LTM_DP_DRIFT_STATUS,{'type':_0x35f8c0(0x248),'common':{'name':_0x35f8c0(0x201),'type':_0x35f8c0(0x156),'role':'state','read':!![],'write':![],'def':_0x35f8c0(0x11b)},'native':{}}),await _0x187102[_0x35f8c0(0x1c1)](LTM_DP_DRIFT_DETAILS,{'type':_0x35f8c0(0x248),'common':{'name':_0x35f8c0(0x190),'type':_0x35f8c0(0x156),'role':_0x35f8c0(0x1b0),'read':!![],'write':![]},'native':{}}),await _0x187102[_0x35f8c0(0x1c1)](LTM_DP_DRIFT_LAST_CHECK,{'type':_0x35f8c0(0x248),'common':{'name':_0x35f8c0(0x154),'type':_0x35f8c0(0x1ed),'role':_0x35f8c0(0x298),'read':!![],'write':![]},'native':{}});}async function loadSystemMode(_0x1992b2){const _0x36fa63=a0_0x7bdfd;try{const _0xd05871=await _0x1992b2['getStateAsync'](SYSTEM_DP_MODE);_0xd05871&&_0xd05871['val']&&Object['values'](SYSTEM_MODES)[_0x36fa63(0x200)](_0xd05871[_0x36fa63(0x10a)])?_0x1992b2[_0x36fa63(0x105)]=_0xd05871[_0x36fa63(0x10a)]:(_0x1992b2[_0x36fa63(0x105)]=SYSTEM_MODES['NORMAL'],await _0x1992b2[_0x36fa63(0x202)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x36fa63(0x109)],'ack':!![]}));}catch(_0xa9928){_0x1992b2[_0x36fa63(0x105)]=SYSTEM_MODES[_0x36fa63(0x109)];}}async function loadRawEventLog(_0x37a147){const _0x22346e=a0_0x7bdfd;try{const _0x5b83a3=await _0x37a147['getStateAsync'](LTM_DP_RAW_LOG);if(_0x5b83a3&&_0x5b83a3['val'])_0x37a147[_0x22346e(0x137)]=JSON[_0x22346e(0x1ef)](_0x5b83a3[_0x22346e(0x10a)]);}catch(_0x53d0a2){_0x37a147[_0x22346e(0x137)]=[];}}async function saveRawEventLog(_0x28f30e){const _0x5df8bd=a0_0x7bdfd;_0x28f30e[_0x5df8bd(0x137)][_0x5df8bd(0x244)]>RAW_LOG_MAX_SIZE&&_0x28f30e[_0x5df8bd(0x137)][_0x5df8bd(0x13a)](0x0,_0x28f30e[_0x5df8bd(0x137)]['length']-RAW_LOG_MAX_SIZE),await _0x28f30e[_0x5df8bd(0x202)](LTM_DP_RAW_LOG,{'val':JSON[_0x5df8bd(0xba)](_0x28f30e[_0x5df8bd(0x137)]),'ack':!![]});}async function loadDailyDigests(_0x922c56){const _0x3a5cbb=a0_0x7bdfd;try{const _0x5b0e8e=await _0x922c56[_0x3a5cbb(0x214)](LTM_DP_DAILY_DIGESTS);if(_0x5b0e8e&&_0x5b0e8e['val'])_0x922c56[_0x3a5cbb(0x108)]=JSON['parse'](_0x5b0e8e[_0x3a5cbb(0x10a)]);}catch(_0x41d95b){_0x922c56['dailyDigests']=[];}await updateBaselineStatus(_0x922c56);}async function saveDailyDigests(_0x54d2b0,_0x50d799=!![]){const _0x3f3152=a0_0x7bdfd,_0x23152e=_0x54d2b0[_0x3f3152(0x2b1)]['ltmLtbWindowDays']||0x3c;_0x54d2b0[_0x3f3152(0x108)][_0x3f3152(0x244)]>_0x23152e&&_0x54d2b0[_0x3f3152(0x108)][_0x3f3152(0x13a)](0x0,_0x54d2b0['dailyDigests']['length']-_0x23152e);await _0x54d2b0[_0x3f3152(0x202)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x3f3152(0xba)](_0x54d2b0[_0x3f3152(0x108)]),'ack':!![]});if(_0x50d799)await updateBaselineStatus(_0x54d2b0);}async function updateAnalysisHistory(_0x45eb3d,_0x391202){const _0x477ab7=a0_0x7bdfd;_0x45eb3d[_0x477ab7(0x1a8)][_0x477ab7(0x170)](_0x391202);if(_0x45eb3d[_0x477ab7(0x1a8)][_0x477ab7(0x244)]>ANALYSIS_HISTORY_MAX_SIZE)_0x45eb3d[_0x477ab7(0x1a8)]['pop']();await _0x45eb3d[_0x477ab7(0x202)](_0x477ab7(0xd5),{'val':JSON[_0x477ab7(0xba)](_0x45eb3d[_0x477ab7(0x1a8)]),'ack':!![]});}async function updateBaselineStatus(_0x3fdf09){const _0x4762d3=a0_0x7bdfd;if(!_0x3fdf09[_0x4762d3(0x1af)]){await _0x3fdf09[_0x4762d3(0x202)](LTM_DP_BASELINE_STATUS,{'val':_0x4762d3(0x132),'ack':!![]});return;}const _0x129441=_0x3fdf09[_0x4762d3(0x108)][_0x4762d3(0x244)]>=(_0x3fdf09[_0x4762d3(0x2b1)][_0x4762d3(0x282)]||0x7)?_0x4762d3(0xbc)+_0x3fdf09[_0x4762d3(0x108)][_0x4762d3(0x244)]+'\x20Tage)':'Lernphase\x20('+_0x3fdf09[_0x4762d3(0x108)][_0x4762d3(0x244)]+'/'+(_0x3fdf09[_0x4762d3(0x2b1)]['minDaysForBaseline']||0x7)+')';await _0x3fdf09[_0x4762d3(0x202)](LTM_DP_BASELINE_STATUS,{'val':_0x129441,'ack':!![]});}async function initSensorSubscriptions(_0x182c9b){const _0x406c9c=a0_0x7bdfd,_0x5cda33=_0x182c9b[_0x406c9c(0x2b1)][_0x406c9c(0x1eb)];if(_0x5cda33&&_0x5cda33[_0x406c9c(0x244)]>0x0){_0x182c9b[_0x406c9c(0x294)][_0x406c9c(0x19c)](_0x406c9c(0x258)+_0x5cda33['length']+'\x20sensors...');for(const _0x27ab7a of _0x5cda33){if(_0x27ab7a['id']){await _0x182c9b[_0x406c9c(0x22a)](_0x27ab7a['id']);try{const _0x321c52=await _0x182c9b[_0x406c9c(0xee)](_0x27ab7a['id']);if(_0x321c52)_0x182c9b[_0x406c9c(0x119)][_0x27ab7a['id']]=_0x321c52[_0x406c9c(0x10a)];}catch(_0x4a4b5b){}}}}}async function initPresenceSubscriptions(_0x4fc64c){const _0x471326=a0_0x7bdfd,_0x3a221e=_0x4fc64c[_0x471326(0x2b1)][_0x471326(0x206)]||[];if(_0x3a221e[_0x471326(0x244)]>0x0){_0x4fc64c[_0x471326(0x294)][_0x471326(0x19c)](_0x471326(0x258)+_0x3a221e[_0x471326(0x244)]+'\x20presence\x20devices...');for(const _0x1f8b65 of _0x3a221e){await _0x4fc64c[_0x471326(0x22a)](_0x1f8b65);}try{await checkWifiPresence(_0x4fc64c);}catch(_0x34b879){}}}async function getWeatherContext(_0x46e52c){const _0x1ba0eb=a0_0x7bdfd;try{if(!_0x46e52c['config'][_0x1ba0eb(0x22e)])return _0x1ba0eb(0x2aa);let _0x33d5bb='';const _0x9c8a66=_0x46e52c[_0x1ba0eb(0x2b1)]['weatherInstance'];if(_0x9c8a66)try{if(_0x9c8a66['includes'](_0x1ba0eb(0x2ab))){const _0x1c921a=await _0x46e52c[_0x1ba0eb(0xee)](_0x9c8a66+_0x1ba0eb(0x2af));if(_0x1c921a&&_0x1c921a[_0x1ba0eb(0x10a)])_0x33d5bb=_0x1c921a['val'];}else{if(_0x9c8a66['includes'](_0x1ba0eb(0x101))){const _0x2e9095=await _0x46e52c[_0x1ba0eb(0xee)](_0x9c8a66+_0x1ba0eb(0x115));if(_0x2e9095&&_0x2e9095[_0x1ba0eb(0x10a)])_0x33d5bb=_0x2e9095['val'];}else{if(_0x9c8a66['includes']('openweathermap')){const _0x219c97=await _0x46e52c[_0x1ba0eb(0xee)](_0x9c8a66+_0x1ba0eb(0x134));if(_0x219c97&&_0x219c97['val'])_0x33d5bb=_0x219c97[_0x1ba0eb(0x10a)];}}}}catch(_0x648a2f){}if(!_0x33d5bb){const _0x573231=[_0x1ba0eb(0xdb),_0x1ba0eb(0xd9),_0x1ba0eb(0x2a1),_0x1ba0eb(0xe8)];for(const _0x3677de of _0x573231){try{const _0x23cc8b=await _0x46e52c[_0x1ba0eb(0x1e6)](_0x3677de);if(_0x23cc8b){if(_0x3677de[_0x1ba0eb(0x200)](_0x1ba0eb(0x2ab))){const _0x2900cd=await _0x46e52c['getForeignStateAsync'](_0x3677de+_0x1ba0eb(0x2af));if(_0x2900cd&&_0x2900cd['val']){_0x33d5bb=_0x2900cd[_0x1ba0eb(0x10a)];break;}}}}catch(_0x2d11d9){}}}return _0x33d5bb?_0x1ba0eb(0x2ba)+_0x33d5bb:'WETTER:\x20Keine\x20Daten\x20gefunden';}catch(_0x4f5ebe){return _0x1ba0eb(0x18b)+_0x4f5ebe[_0x1ba0eb(0x2a6)];}}async function getCalendarContext(_0x18d317){const _0x3ece5c=a0_0x7bdfd;try{if(!_0x18d317[_0x3ece5c(0x2b1)]['useCalendar'])return _0x3ece5c(0x1df);let _0x577d28=_0x18d317[_0x3ece5c(0x2b1)][_0x3ece5c(0x1f3)]||_0x3ece5c(0x181),_0x16aef7=_0x18d317['config'][_0x3ece5c(0x122)]||[];if(typeof _0x16aef7===_0x3ece5c(0x156))_0x16aef7=_0x16aef7[_0x3ece5c(0x1be)](',');try{const _0x56d7f0=await _0x18d317[_0x3ece5c(0xee)](_0x577d28+'.data.table');if(_0x56d7f0&&_0x56d7f0['val']){let _0x547f83=tryParse(_0x56d7f0[_0x3ece5c(0x10a)]);if(_0x547f83&&Array[_0x3ece5c(0xd6)](_0x547f83)){if(_0x16aef7['length']>0x0)_0x547f83=_0x547f83[_0x3ece5c(0x23d)](_0x5e7e55=>_0x16aef7[_0x3ece5c(0x200)](_0x5e7e55[_0x3ece5c(0x1f7)]||''));else return _0x3ece5c(0x1ce);if(_0x547f83['length']>0x0){const _0x215667=_0x547f83[_0x3ece5c(0x19a)](0x0,0x3)['map'](_0x3e238f=>{const _0x3172a7=_0x3ece5c;let _0x498561=_0x3e238f[_0x3172a7(0x298)];if(_0x3e238f[_0x3172a7(0x155)])_0x498561+='\x20'+_0x3e238f['time'];return _0x498561+':\x20'+_0x3e238f['event']+'\x20('+_0x3e238f['_calName']+')';});return _0x3ece5c(0x221)+_0x215667[_0x3ece5c(0x13d)](_0x3ece5c(0x25a));}else return _0x3ece5c(0x2a9);}}}catch(_0x508191){_0x18d317['log'][_0x3ece5c(0x203)](_0x3ece5c(0xdf)+_0x508191[_0x3ece5c(0x2a6)]);}return'KALENDER:\x20Keine\x20Daten';}catch(_0x50f398){return _0x3ece5c(0xd2)+_0x50f398[_0x3ece5c(0x2a6)];}}async function getCalendarNames(_0x39e993,_0x4ccb56){const _0x126a88=a0_0x7bdfd;try{const _0x190dc8=await _0x39e993[_0x126a88(0xee)](_0x4ccb56+_0x126a88(0x144));if(_0x190dc8&&_0x190dc8[_0x126a88(0x10a)]){const _0x121905=tryParse(_0x190dc8[_0x126a88(0x10a)]);if(_0x121905&&Array['isArray'](_0x121905)){const _0x2503f6=[...new Set(_0x121905['map'](_0x5acb14=>_0x5acb14[_0x126a88(0x1f7)])['filter'](Boolean))];return _0x2503f6[_0x126a88(0x19b)]();}}return[];}catch(_0x5ee56a){return _0x39e993[_0x126a88(0x294)][_0x126a88(0x1c6)](_0x126a88(0x253)+_0x5ee56a['message']),[];}}async function checkWifiPresence(_0x568cc8){const _0x4a1051=a0_0x7bdfd;try{const _0x3d5bf3=_0x568cc8[_0x4a1051(0x2b1)]['presenceDevices']||[];let _0x13c259=![];const _0x1f0d32=[];for(const _0x16c4b2 of _0x3d5bf3){try{const _0x3f35db=await _0x568cc8['getForeignStateAsync'](_0x16c4b2);if(_0x3f35db&&(_0x3f35db[_0x4a1051(0x10a)]===!![]||_0x3f35db[_0x4a1051(0x10a)]===_0x4a1051(0x231)||_0x3f35db[_0x4a1051(0x10a)]===0x1)){_0x13c259=!![];const _0x38ed88=await _0x568cc8['getForeignObjectAsync'](_0x16c4b2);let _0x461343=_0x16c4b2;_0x38ed88&&_0x38ed88[_0x4a1051(0x272)]&&_0x38ed88[_0x4a1051(0x272)][_0x4a1051(0x140)]&&(_0x461343=typeof _0x38ed88['common'][_0x4a1051(0x140)]===_0x4a1051(0xd4)?_0x38ed88['common'][_0x4a1051(0x140)]['de']||_0x38ed88[_0x4a1051(0x272)][_0x4a1051(0x140)]['en']:_0x38ed88['common'][_0x4a1051(0x140)]),_0x1f0d32[_0x4a1051(0x2a0)](_0x461343);}}catch(_0x202b78){}}return await _0x568cc8[_0x4a1051(0x202)](_0x4a1051(0xff),{'val':_0x1f0d32[_0x4a1051(0x13d)](',\x20'),'ack':!![]}),_0x13c259&&(_0x568cc8[_0x4a1051(0x26a)]&&(_0x568cc8[_0x4a1051(0x294)][_0x4a1051(0x19c)](_0x4a1051(0xe4)),abortExitTimer(_0x568cc8)),!_0x568cc8[_0x4a1051(0x254)]&&_0x568cc8[_0x4a1051(0x105)]===SYSTEM_MODES[_0x4a1051(0x109)]&&await setPresence(_0x568cc8,!![])),_0x13c259;}catch(_0x5b32aa){return _0x568cc8[_0x4a1051(0x294)]['error']('Error\x20checking\x20WiFi:\x20'+_0x5b32aa[_0x4a1051(0x2a6)]),![];}}function startExitTimer(_0x5ef1a3){const _0x37392d=a0_0x7bdfd;abortExitTimer(_0x5ef1a3),_0x5ef1a3['isGracePeriodActive']=!![],_0x5ef1a3[_0x37392d(0x295)]=setTimeout(()=>{_0x5ef1a3['isGracePeriodActive']=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),_0x5ef1a3[_0x37392d(0x26a)]=setTimeout(()=>{const _0x3c183d=_0x37392d;setPresence(_0x5ef1a3,![]),_0x5ef1a3[_0x3c183d(0x26a)]=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}function abortExitTimer(_0x1d2096){const _0x2b14ca=a0_0x7bdfd;if(_0x1d2096[_0x2b14ca(0x26a)])clearTimeout(_0x1d2096[_0x2b14ca(0x26a)]);if(_0x1d2096[_0x2b14ca(0x295)])clearTimeout(_0x1d2096['exitGraceTimer']);_0x1d2096[_0x2b14ca(0x26a)]=null,_0x1d2096[_0x2b14ca(0x295)]=null,_0x1d2096[_0x2b14ca(0x184)]=![];}async function setPresence(_0x54daca,_0x1b4a20){const _0x58829a=a0_0x7bdfd;if(_0x54daca['isPresent']===_0x1b4a20)return;_0x54daca['isPresent']=_0x1b4a20,await _0x54daca['setStateAsync'](_0x58829a(0x277),{'val':_0x1b4a20,'ack':!![]});}async function saveFeedback(_0x2f965c,_0x1fe28d){const _0x4e13e4=a0_0x7bdfd;_0x2f965c[_0x4e13e4(0x294)][_0x4e13e4(0x19c)]('Feedback\x20saved:\x20'+JSON[_0x4e13e4(0xba)](_0x1fe28d));}async function runBaselineDriftAnalysis(_0x37431f){const _0x16a63b=a0_0x7bdfd;if(!_0x37431f['isProVersion']||!_0x37431f['geminiModel'])return;const _0x74ae28=_0x37431f[_0x16a63b(0x2b1)][_0x16a63b(0x163)]||0xe;if(_0x37431f[_0x16a63b(0x108)]['length']<_0x74ae28+(_0x37431f[_0x16a63b(0x2b1)][_0x16a63b(0x282)]||0x7)){await _0x37431f[_0x16a63b(0x202)](LTM_DP_DRIFT_STATUS,{'val':_0x16a63b(0x11e),'ack':!![]});return;}const _0x33868a=_0x37431f[_0x16a63b(0x108)][_0x16a63b(0x19a)](-_0x74ae28),_0x15d72f=_0x37431f[_0x16a63b(0x108)]['slice'](0x0,_0x37431f[_0x16a63b(0x108)]['length']-_0x74ae28),_0xf84486=_0x16a63b(0x183)+JSON['stringify'](_0x15d72f)+_0x16a63b(0x16d)+JSON[_0x16a63b(0xba)](_0x33868a);try{const _0x2757b9=await _0x37431f['geminiModel']['generateContent'](_0xf84486),_0x3ae4a5=JSON[_0x16a63b(0x1ef)](_0x2757b9[_0x16a63b(0x148)][_0x16a63b(0x1b0)]()[_0x16a63b(0x29b)](/```json|```/g,'')[_0x16a63b(0x270)]());_0x3ae4a5['baselineDrift']&&(await _0x37431f[_0x16a63b(0x202)](LTM_DP_DRIFT_STATUS,{'val':_0x3ae4a5[_0x16a63b(0xbf)],'ack':!![]}),await _0x37431f['setStateAsync'](LTM_DP_DRIFT_DETAILS,{'val':_0x3ae4a5[_0x16a63b(0x212)],'ack':!![]}),await _0x37431f[_0x16a63b(0x202)](LTM_DP_DRIFT_LAST_CHECK,{'val':Date[_0x16a63b(0xc0)](),'ack':!![]}));}catch(_0x2b2e65){}}function setupLtmScheduler(_0xf45f35){const _0x51aa9f=a0_0x7bdfd;try{if(_0xf45f35['ltmJob'])_0xf45f35['ltmJob'][_0x51aa9f(0x288)]();if(!_0xf45f35[_0x51aa9f(0x1af)]){_0xf45f35[_0x51aa9f(0x202)](LTM_DP_STATUS,{'val':_0x51aa9f(0x132),'ack':!![]});return;}_0xf45f35[_0x51aa9f(0x1e3)]=schedule[_0x51aa9f(0x177)](LTM_SCHEDULE,()=>createDailyDigest(_0xf45f35));}catch(_0x33852a){_0xf45f35[_0x51aa9f(0x294)]['error'](_0x51aa9f(0x290)+_0x33852a[_0x51aa9f(0x2a6)]);}}function a0_0xdc5d(_0xf166ff,_0x1a7871){const _0x1f58b5=a0_0x60ac();return a0_0xdc5d=function(_0x3fb060,_0x44ade9){_0x3fb060=_0x3fb060-0xba;let _0x60acd7=_0x1f58b5[_0x3fb060];return _0x60acd7;},a0_0xdc5d(_0xf166ff,_0x1a7871);}function setupModeResetScheduler(_0x24f6aa){const _0xf85473=a0_0x7bdfd;try{if(_0x24f6aa[_0xf85473(0xf5)])_0x24f6aa[_0xf85473(0xf5)]['cancel']();_0x24f6aa[_0xf85473(0xf5)]=schedule[_0xf85473(0x177)](MODE_RESET_SCHEDULE,async()=>{const _0x7dd196=_0xf85473;await loadSystemMode(_0x24f6aa),AUTO_RESET_MODES[_0x7dd196(0x200)](_0x24f6aa[_0x7dd196(0x105)])&&await _0x24f6aa[_0x7dd196(0x202)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x7dd196(0x109)],'ack':![]});});}catch(_0x2f4873){_0x24f6aa[_0xf85473(0x294)][_0xf85473(0x1c6)](_0xf85473(0x1fa)+_0x2f4873[_0xf85473(0x2a6)]);}}function setupDriftAnalysisScheduler(_0x1a7113){const _0x15d476=a0_0x7bdfd;try{if(_0x1a7113['driftAnalysisTimer'])clearInterval(_0x1a7113[_0x15d476(0x1c5)]);if(!_0x1a7113[_0x15d476(0x1af)])return;_0x1a7113[_0x15d476(0x1c5)]=setInterval(()=>runBaselineDriftAnalysis(_0x1a7113),(_0x1a7113[_0x15d476(0x2b1)][_0x15d476(0x20b)]||0x18)*0x36ee80),setTimeout(()=>runBaselineDriftAnalysis(_0x1a7113),0x1388);}catch(_0x5cda63){_0x1a7113['log'][_0x15d476(0x1c6)](_0x15d476(0x264)+_0x5cda63['message']);}}function setupBriefingScheduler(_0x3aa2e6){const _0x74e690=a0_0x7bdfd;try{if(_0x3aa2e6['briefingJob'])_0x3aa2e6[_0x74e690(0x1b1)][_0x74e690(0x288)]();if(!_0x3aa2e6['config'][_0x74e690(0x1c9)])return;const _0x5e49a7=(_0x3aa2e6['config'][_0x74e690(0xdd)]||_0x74e690(0x14c))[_0x74e690(0x1be)](':'),_0x242cb9=parseInt(_0x5e49a7[0x0])||0x8,_0x23323c=parseInt(_0x5e49a7[0x1])||0x0,_0x371a57=_0x23323c+'\x20'+_0x242cb9+_0x74e690(0x14d);_0x3aa2e6[_0x74e690(0x294)][_0x74e690(0x19c)](_0x74e690(0x174)+_0x242cb9+':'+(_0x23323c<0xa?'0'+_0x23323c:_0x23323c)),_0x3aa2e6[_0x74e690(0x1b1)]=schedule[_0x74e690(0x177)](_0x371a57,()=>{sendMorningBriefing(_0x3aa2e6);});}catch(_0x56f7fd){_0x3aa2e6[_0x74e690(0x294)][_0x74e690(0x1c6)]('Briefing\x20Sched\x20Error:\x20'+_0x56f7fd[_0x74e690(0x2a6)]);}}async function sendNotification(_0x563493,_0x39872b,_0x25cf50=![],_0x2a1836=![]){const _0x316447=a0_0x7bdfd;_0x563493[_0x316447(0x294)][_0x316447(0x19c)]((_0x25cf50?_0x316447(0x2ad):'')+'Sending\x20notification:\x20\x22'+_0x39872b+'\x22');const _0x550b67=_0x563493[_0x316447(0x2b1)];let _0x54b3fa=0x0;if(_0x550b67[_0x316447(0x16b)]){let _0x15f6e8={};(_0x39872b['includes'](_0x316447(0x1fc))||_0x2a1836)&&(_0x15f6e8={'reply_markup':{'inline_keyboard':[[{'text':_0x316447(0x189),'callback_data':_0x316447(0xc3)}],[{'text':_0x316447(0x13b),'callback_data':'COGNI_REQUEST_CALL'}]]}}),await _0x563493['sendToAsync'](_0x550b67[_0x316447(0x228)],_0x316447(0x20d),{'text':_0x39872b,'user':_0x550b67[_0x316447(0x21a)],..._0x15f6e8}),_0x54b3fa++;}if(_0x550b67['notifyPushoverEnabled']){let _0xcc770b={'message':_0x39872b,'title':_0x2a1836?_0x316447(0x1b4):_0x316447(0x1bb),'priority':_0x2a1836?0x2:0x1,'device':_0x550b67[_0x316447(0x1ff)]};_0x2a1836&&(_0xcc770b[_0x316447(0x15e)]=0x1e,_0xcc770b['expire']=0xe10,_0xcc770b[_0x316447(0xdc)]=_0x316447(0x246)),await _0x563493[_0x316447(0xce)](_0x550b67['notifyPushoverInstance'],'send',_0xcc770b),_0x54b3fa++;}return _0x550b67[_0x316447(0x10e)]&&(await _0x563493[_0x316447(0xce)](_0x550b67[_0x316447(0x226)],'send',{'text':_0x39872b,'to':_0x550b67['notifyEmailRecipient']}),_0x54b3fa++),_0x54b3fa;}async function setupTelegramListener(_0x2718ce){const _0x2030d8=a0_0x7bdfd,_0x13d9ef=_0x2718ce['config'][_0x2030d8(0x228)];_0x2718ce[_0x2030d8(0x2b1)][_0x2030d8(0x16b)]&&_0x13d9ef&&(_0x2718ce['log']['info'](_0x2030d8(0x2bd)+_0x13d9ef+_0x2030d8(0x1f4)),await _0x2718ce[_0x2030d8(0x22a)](_0x13d9ef+'.communicate.request'));}async function handleTelegramResponse(_0x1b60eb,_0x3671fb){const _0x46357d=a0_0x7bdfd;let _0x3218b2=_0x3671fb;_0x3671fb[_0x46357d(0x165)]('[')&&(_0x3218b2=_0x3671fb[_0x46357d(0x12a)](_0x3671fb[_0x46357d(0xec)](']')+0x1));if(_0x3218b2==='COGNI_CONFIRM_OK')_0x1b60eb[_0x46357d(0x294)]['info']('‚úÖ\x20User\x20confirmed\x20ALARM\x20via\x20Telegram.\x20Resetting\x20system.'),await _0x1b60eb[_0x46357d(0x202)]('analysis.isAlert',{'val':![],'ack':!![]}),await _0x1b60eb[_0x46357d(0x202)](_0x46357d(0x133),{'val':_0x46357d(0x1b7),'ack':!![]}),_0x1b60eb[_0x46357d(0x275)]=![],sendNotification(_0x1b60eb,_0x46357d(0x2bc),![]);else _0x3218b2==='COGNI_REQUEST_CALL'&&(_0x1b60eb[_0x46357d(0x294)][_0x46357d(0x203)](_0x46357d(0x162)),sendNotification(_0x1b60eb,_0x46357d(0x150),![],!![]));}async function runAutopilot(_0x4acc9c){const _0x421d2e=a0_0x7bdfd,_0x300174=_0x4acc9c[_0x421d2e(0x2b1)][_0x421d2e(0x1b6)],_0x151c1f=_0x4acc9c['eventHistory'][_0x421d2e(0x244)]>0x0?_0x4acc9c[_0x421d2e(0x29f)][0x0][_0x421d2e(0x129)]:Date[_0x421d2e(0xc0)](),_0x39f3e6=(Date['now']()-_0x151c1f)/(0x3e8*0x3c*0x3c);let _0x20f42b='';_0x4acc9c[_0x421d2e(0x2b1)][_0x421d2e(0x2a3)]&&_0x4acc9c[_0x421d2e(0x105)]===SYSTEM_MODES['NORMAL']&&_0x4acc9c['isPresent']&&(_0x39f3e6>_0x300174&&(_0x20f42b='HARD\x20WATCHDOG:\x20No\x20sensor\x20activity\x20detected\x20for\x20'+_0x39f3e6[_0x421d2e(0x17a)](0x1)+_0x421d2e(0x121))),runGeminiAnalysis(_0x4acc9c,_0x20f42b)[_0x421d2e(0x216)](_0x12669e=>_0x4acc9c[_0x421d2e(0x294)][_0x421d2e(0x1c6)](_0x12669e));}async function createDailyDigest(_0x3db75e){const _0x1de5fe=a0_0x7bdfd;if(!_0x3db75e[_0x1de5fe(0x1af)])return;await _0x3db75e[_0x1de5fe(0x202)](LTM_DP_STATUS,{'val':_0x1de5fe(0x296)+new Date()['toLocaleString'](),'ack':!![]});if(!_0x3db75e['geminiModel']||_0x3db75e[_0x1de5fe(0x137)][_0x1de5fe(0x244)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x3db75e['setStateAsync'](LTM_DP_STATUS,{'val':_0x1de5fe(0x1ca),'ack':!![]});return;}const _0x5e98fc=JSON[_0x1de5fe(0x1ef)](JSON[_0x1de5fe(0xba)](_0x3db75e['rawEventLog'])),_0x5affce=_0x5e98fc[_0x1de5fe(0x244)],_0x155167=_0x1de5fe(0x15a)+JSON[_0x1de5fe(0xba)](_0x5e98fc);try{const _0x18e7a3=await _0x3db75e[_0x1de5fe(0x1f8)][_0x1de5fe(0xe3)](_0x155167),_0x14e92b=JSON['parse'](_0x18e7a3['response'][_0x1de5fe(0x1b0)]()[_0x1de5fe(0x29b)](/```json|```/g,'')['trim']());_0x14e92b['summary']&&(_0x3db75e[_0x1de5fe(0x108)][_0x1de5fe(0x2a0)]({'timestamp':new Date()[_0x1de5fe(0x1b5)](),'eventCount':_0x5affce,'summary':_0x14e92b[_0x1de5fe(0x13e)],'activityLevel':_0x14e92b[_0x1de5fe(0x28a)],'systemMode':_0x3db75e[_0x1de5fe(0x105)]}),await saveDailyDigests(_0x3db75e),_0x3db75e[_0x1de5fe(0x137)]=[],await saveRawEventLog(_0x3db75e),await _0x3db75e[_0x1de5fe(0x202)](LTM_DP_STATUS,{'val':'Success:\x20Compressed\x20'+_0x5affce+_0x1de5fe(0xe9),'ack':!![]}),runPythonHealthCheck(_0x3db75e));}catch(_0x1061a8){await _0x3db75e['setStateAsync'](LTM_DP_STATUS,{'val':_0x1de5fe(0x1d5)+_0x1061a8['message'],'ack':!![]});}}async function sendMorningBriefing(_0x4eb7e9){const _0x500f28=a0_0x7bdfd;if(!_0x4eb7e9[_0x500f28(0x1f8)])return;_0x4eb7e9['log'][_0x500f28(0x19c)](_0x500f28(0xfe));const _0xa261ca=_0x4eb7e9[_0x500f28(0x108)][_0x500f28(0x244)]>0x0?_0x4eb7e9['dailyDigests'][_0x4eb7e9[_0x500f28(0x108)][_0x500f28(0x244)]-0x1]:null,_0x42088f=_0xa261ca&&_0xa261ca[_0x500f28(0x18c)]?_0xa261ca[_0x500f28(0x18c)][_0x500f28(0x276)]:_0x500f28(0x11b),_0x4c0a40=new Date();_0x4c0a40[_0x500f28(0x15f)](0x4,0x0,0x0,0x0);const _0x5217b1=_0x4eb7e9[_0x500f28(0x29f)][_0x500f28(0x23d)](_0x1bf2b9=>new Date(_0x1bf2b9[_0x500f28(0x129)])>_0x4c0a40),_0x26a30e=PERSONA_MAPPING[_0x4eb7e9['config'][_0x500f28(0x26c)]||_0x500f28(0x143)],_0x4c3809=_0x4eb7e9[_0x500f28(0x2b1)]['livingContext']||'',_0x47fe8d=await getWeatherContext(_0x4eb7e9),_0x290cee=await getCalendarContext(_0x4eb7e9),_0x50df0d=_0x500f28(0x1d0)+_0x26a30e+'.\x20KONTEXT:\x20'+_0x4c3809+'.\x20ZUSATZ:\x20'+_0x47fe8d+'\x20'+_0x290cee+_0x500f28(0x1dd)+_0x42088f+_0x500f28(0x18e)+JSON[_0x500f28(0xba)](_0x5217b1[_0x500f28(0x19a)](0x0,0xa))+_0x500f28(0x157);try{const _0x50c12d=await _0x4eb7e9[_0x500f28(0x1f8)][_0x500f28(0xe3)](_0x50df0d),_0x177302='üåÖ\x20Daily\x20Briefing:\x0a'+_0x50c12d[_0x500f28(0x148)][_0x500f28(0x1b0)]()[_0x500f28(0x270)]();sendNotification(_0x4eb7e9,_0x177302),_0x4eb7e9[_0x500f28(0x294)]['info'](_0x500f28(0x10b));}catch(_0x215293){_0x4eb7e9['log'][_0x500f28(0x1c6)](_0x500f28(0x153)+_0x215293[_0x500f28(0x2a6)]);}}async function scanForDevices(_0x579fc4,_0x21ac41){const _0x52df58=a0_0x7bdfd;_0x579fc4['log'][_0x52df58(0x19c)](_0x52df58(0xcc));const _0x2651f3=[],_0x3cf53f=await _0x579fc4[_0x52df58(0x197)]('*'),_0x20a6d8=await _0x579fc4[_0x52df58(0x197)](_0x52df58(0xc5),_0x52df58(0x17b)),_0x578096=await _0x579fc4[_0x52df58(0x197)](_0x52df58(0x19d),_0x52df58(0x17b)),_0x3fd9b0={};if(_0x20a6d8)for(const _0x52dc4a in _0x20a6d8){const _0x9c64d2=_0x20a6d8[_0x52dc4a][_0x52df58(0x272)][_0x52df58(0x1d8)]||[];_0x9c64d2['forEach'](_0x216f24=>{if(!_0x3fd9b0[_0x216f24])_0x3fd9b0[_0x216f24]=[];_0x3fd9b0[_0x216f24]['push'](_0x52dc4a);});}const _0x3e3294={};if(_0x578096)for(const _0x560e0e in _0x578096){const _0x210077=_0x578096[_0x560e0e][_0x52df58(0x272)]['members']||[],_0x3f7500=typeof _0x578096[_0x560e0e][_0x52df58(0x272)]['name']===_0x52df58(0xd4)?_0x578096[_0x560e0e][_0x52df58(0x272)][_0x52df58(0x140)]['de']:_0x578096[_0x560e0e][_0x52df58(0x272)]['name'];_0x210077[_0x52df58(0x1de)](_0x583a4c=>_0x3e3294[_0x583a4c]=_0x3f7500);}const _0x2c1f7e=_0x21ac41[_0x52df58(0x1a9)]||[],_0x40f0dd=_0x21ac41[_0x52df58(0x1db)]!==![],_0x2bcc40=_0x21ac41[_0x52df58(0x2a8)]!==![],_0x4fa282=_0x21ac41[_0x52df58(0x131)]!==![],_0x1f5d8c=_0x21ac41[_0x52df58(0x111)]===!![],_0x17d762=_0x21ac41['weather']===!![];for(const _0x4c4bac in _0x3cf53f){const _0x2f0ea7=_0x3cf53f[_0x4c4bac];if(_0x2f0ea7[_0x52df58(0x19f)]!==_0x52df58(0x248)||!_0x2f0ea7[_0x52df58(0x272)])continue;if(ADAPTER_BLACKLIST['some'](_0x5f459a=>_0x4c4bac[_0x52df58(0x165)](_0x5f459a))&&!_0x17d762)continue;const _0x46b67a=(_0x2f0ea7[_0x52df58(0x272)]['role']||'')[_0x52df58(0x22d)]();let _0x5cf571=(typeof _0x2f0ea7[_0x52df58(0x272)]['name']===_0x52df58(0xd4)?_0x2f0ea7[_0x52df58(0x272)][_0x52df58(0x140)]['de']:_0x2f0ea7['common'][_0x52df58(0x140)])||_0x4c4bac;const _0x20e087=_0x5cf571[_0x52df58(0x22d)]();let _0x24f13d=![],_0x3c4f84=![];if(_0x2c1f7e[_0x52df58(0x244)]>0x0){const _0x5a30c9=_0x3fd9b0[_0x4c4bac]||[],_0x4df170=_0x4c4bac[_0x52df58(0x1be)]('.')[_0x52df58(0x19a)](0x0,-0x1)[_0x52df58(0x13d)]('.'),_0x4c39db=_0x3fd9b0[_0x4df170]||[];(_0x5a30c9[_0x52df58(0x14e)](_0x36bda4=>_0x2c1f7e[_0x52df58(0x200)](_0x36bda4))||_0x4c39db[_0x52df58(0x14e)](_0x7415cd=>_0x2c1f7e[_0x52df58(0x200)](_0x7415cd)))&&(_0x24f13d=!![],_0x3c4f84=!![]);}if(!_0x24f13d&&!_0x17d762){if(HARD_IGNORE_TERMS[_0x52df58(0x14e)](_0x1d88d6=>_0x4c4bac[_0x52df58(0x200)](_0x1d88d6)||_0x20e087[_0x52df58(0x200)](_0x1d88d6[_0x52df58(0x22d)]())))continue;}if(BAD_NAMES[_0x52df58(0x14e)](_0x271c17=>_0x20e087===_0x271c17||_0x20e087[_0x52df58(0x236)]('.'+_0x271c17))){const _0x4b2f7d=_0x4c4bac[_0x52df58(0x1be)]('.');if(_0x4b2f7d[_0x52df58(0x244)]>0x2){const _0x1fd780=_0x4b2f7d['slice'](0x0,-0x1)[_0x52df58(0x13d)]('.'),_0x121d33=_0x3cf53f[_0x1fd780];if(_0x121d33&&_0x121d33[_0x52df58(0x272)]&&_0x121d33[_0x52df58(0x272)][_0x52df58(0x140)]){const _0x16c865=typeof _0x121d33[_0x52df58(0x272)][_0x52df58(0x140)]===_0x52df58(0xd4)?_0x121d33[_0x52df58(0x272)][_0x52df58(0x140)]['de']:_0x121d33['common'][_0x52df58(0x140)];_0x16c865&&!_0x5cf571[_0x52df58(0x200)](_0x16c865)&&(_0x5cf571=_0x16c865+'\x20'+_0x5cf571);}}}let _0x4e6add='';if(_0x40f0dd&&(_0x46b67a[_0x52df58(0x200)]('motion')||_0x46b67a['includes'](_0x52df58(0x1ec))||_0x20e087[_0x52df58(0x200)](_0x52df58(0x110))||_0x20e087[_0x52df58(0x200)](_0x52df58(0x152))))_0x4e6add='motion';else{if(!_0x4e6add&&_0x2bcc40&&(_0x46b67a[_0x52df58(0x200)](_0x52df58(0x192))||_0x46b67a[_0x52df58(0x200)](_0x52df58(0x278))||_0x46b67a[_0x52df58(0x200)](_0x52df58(0x299))||_0x46b67a['includes'](_0x52df58(0x25f))||_0x46b67a['includes'](_0x52df58(0x1e5))||_0x20e087[_0x52df58(0x200)](_0x52df58(0x283))||_0x20e087[_0x52df58(0x200)]('t√ºr')||_0x20e087[_0x52df58(0x200)](_0x52df58(0x21c))))_0x4e6add='door';else{if(!_0x4e6add&&_0x4fa282&&(_0x46b67a['includes'](_0x52df58(0x176))||_0x46b67a[_0x52df58(0x200)](_0x52df58(0x29a))||_0x46b67a[_0x52df58(0x200)](_0x52df58(0x104))||_0x20e087[_0x52df58(0x200)](_0x52df58(0x1fe))||_0x20e087[_0x52df58(0x200)](_0x52df58(0x260))||_0x20e087[_0x52df58(0x200)](_0x52df58(0x17f)))){if(_0x2f0ea7[_0x52df58(0x272)]['write']||_0x46b67a[_0x52df58(0x200)](_0x52df58(0x14f)))_0x4e6add='light';}else{if(!_0x4e6add&&_0x1f5d8c&&(_0x46b67a[_0x52df58(0x200)](_0x52df58(0x111))||_0x46b67a[_0x52df58(0x200)](_0x52df58(0x21e))||_0x46b67a[_0x52df58(0x200)](_0x52df58(0x259))||_0x20e087[_0x52df58(0x200)](_0x52df58(0xd0))||_0x20e087[_0x52df58(0x200)]('klima')||_0x20e087['includes'](_0x52df58(0x20a))))_0x4e6add=_0x52df58(0x111);else{if(!_0x4e6add&&_0x3c4f84)_0x4e6add=_0x52df58(0x196);}}}}if(_0x4e6add){let _0x1370dc=_0x3e3294[_0x4c4bac]||'';if(!_0x1370dc){let _0x37d9db=_0x4c4bac;for(let _0x39b00e=0x0;_0x39b00e<0x3;_0x39b00e++){const _0x195f9a=_0x37d9db['lastIndexOf']('.');if(_0x195f9a===-0x1)break;_0x37d9db=_0x37d9db[_0x52df58(0x12a)](0x0,_0x195f9a);if(_0x3e3294[_0x37d9db]){_0x1370dc=_0x3e3294[_0x37d9db];break;}}}_0x2651f3['push']({'id':_0x4c4bac,'name':_0x5cf571,'location':_0x1370dc,'type':_0x4e6add,'logDuplicates':_0x4e6add===_0x52df58(0x1db),'isExit':![],'_score':_0x1370dc?0x50:_0x4e6add==='custom'?0x5a:0x28});}}return _0x2651f3[_0x52df58(0x19b)]((_0x250845,_0x4a16cc)=>_0x4a16cc[_0x52df58(0x241)]-_0x250845[_0x52df58(0x241)]),_0x2651f3;}async function executeAutomationAction(_0x2ac2c9){const _0x181b06=a0_0x7bdfd;try{const _0x3e224b=await _0x2ac2c9['getStateAsync']('analysis.automation.targetId'),_0x28a36a=await _0x2ac2c9[_0x181b06(0x214)](_0x181b06(0xf9));if(_0x3e224b&&_0x3e224b[_0x181b06(0x10a)]&&_0x28a36a){const _0x1df42a=_0x3e224b[_0x181b06(0x10a)];let _0x4add89=_0x28a36a[_0x181b06(0x10a)];try{_0x4add89=JSON[_0x181b06(0x1ef)](_0x4add89);}catch(_0x111db9){}_0x2ac2c9[_0x181b06(0x294)][_0x181b06(0x19c)]('ü§ñ\x20BUTLER:\x20Executing\x20Action\x20->\x20'+_0x1df42a+'\x20=\x20'+_0x4add89),await _0x2ac2c9[_0x181b06(0x27a)](_0x1df42a,_0x4add89);}else _0x2ac2c9[_0x181b06(0x294)][_0x181b06(0x203)](_0x181b06(0x179));}catch(_0x4cab59){_0x2ac2c9[_0x181b06(0x294)][_0x181b06(0x1c6)]('BUTLER\x20Execution\x20Error:\x20'+_0x4cab59[_0x181b06(0x2a6)]);}}function tryParse(_0x1f63e1){const _0x47f0ae=a0_0x7bdfd;try{return JSON[_0x47f0ae(0x1ef)](_0x1f63e1);}catch(_0x2c9e1c){return null;}}async function recordSequence(_0x24d7a3,_0x15d106){const _0x25087f=a0_0x7bdfd,_0xf36b26=(_0x15d106[_0x25087f(0x19f)]||'')[_0x25087f(0x22d)](),_0x2f01b9=[_0x25087f(0x1db),_0x25087f(0x110),'pr√§senz',_0x25087f(0x172),_0x25087f(0x1ec),'door',_0x25087f(0x210),_0x25087f(0x278),_0x25087f(0x283),_0x25087f(0x1bf),'kontakt','light',_0x25087f(0x1fe),_0x25087f(0x29a),'schalter','dimmer','lampe'];if(!_0x2f01b9['some'](_0x3bcf28=>_0xf36b26['includes'](_0x3bcf28))){_0x24d7a3[_0x25087f(0x294)][_0x25087f(0x142)]('[RECORDER\x20DEBUG]\x20Ignored\x20Event\x20'+_0x15d106['id']+_0x25087f(0xfa)+_0x15d106[_0x25087f(0x19f)]+_0x25087f(0x1fb));return;}if(!_0x15d106['value']){_0x24d7a3['log'][_0x25087f(0x142)](_0x25087f(0x11c)+_0x15d106['id']+_0x25087f(0x271)+_0x15d106[_0x25087f(0x23e)]+')');return;}_0x24d7a3[_0x25087f(0x294)][_0x25087f(0x142)](_0x25087f(0x1cd)+_0x15d106['id']+'\x20('+_0x15d106[_0x25087f(0x198)]+')');if(sequenceTimer)clearTimeout(sequenceTimer);const _0x23c3f7={'loc':_0x15d106[_0x25087f(0x198)]||_0x25087f(0x229),'id':_0x15d106['id'],'ts':Date[_0x25087f(0xc0)]()};activeSequence[_0x25087f(0x2a0)](_0x23c3f7),_0x24d7a3[_0x25087f(0x294)][_0x25087f(0x142)](_0x25087f(0x281)+_0x23c3f7[_0x25087f(0xcf)]+'\x20(Length:\x20'+activeSequence[_0x25087f(0x244)]+')'),sequenceTimer=setTimeout(async()=>{const _0x50594a=_0x25087f;activeSequence[_0x50594a(0x244)]>0x1?await saveCompletedSequence(_0x24d7a3):(_0x24d7a3[_0x50594a(0x294)][_0x50594a(0x142)](_0x50594a(0x220)+activeSequence[_0x50594a(0x244)]+')'),activeSequence=[]);},SEQUENCE_TIMEOUT_MS);}async function saveCompletedSequence(_0x21b66e){const _0x546073=a0_0x7bdfd;try{_0x21b66e[_0x546073(0x294)][_0x546073(0x19c)](_0x546073(0x14b)+activeSequence[_0x546073(0x244)]+_0x546073(0xfc));const _0x1e84d6=await _0x21b66e['getStateAsync']('LTM.trainingData.sequences');let _0x37f8fe=[];if(_0x1e84d6&&_0x1e84d6[_0x546073(0x10a)])try{_0x37f8fe=JSON[_0x546073(0x1ef)](_0x1e84d6[_0x546073(0x10a)]);}catch(_0x2ccc1b){}const _0x561025=activeSequence[0x0]['ts'],_0x50e813=activeSequence[_0x546073(0x1f5)](_0x5b8400=>({'loc':_0x5b8400[_0x546073(0xcf)],'t_delta':Math[_0x546073(0x1c8)]((_0x5b8400['ts']-_0x561025)/0x3e8)})),_0x2d8ff9={'timestamp':new Date(_0x561025)['toISOString'](),'steps':_0x50e813,'duration':Math[_0x546073(0x1c8)]((activeSequence[activeSequence[_0x546073(0x244)]-0x1]['ts']-_0x561025)/0x3e8),'daytime':new Date(_0x561025)[_0x546073(0x1bd)]()};_0x37f8fe[_0x546073(0x2a0)](_0x2d8ff9),_0x37f8fe['length']>MAX_TRAINING_SET_SIZE&&_0x37f8fe[_0x546073(0x297)](),await _0x21b66e[_0x546073(0x202)](_0x546073(0x16f),{'val':JSON[_0x546073(0xba)](_0x37f8fe),'ack':!![]}),activeSequence=[],sequenceTimer=null;}catch(_0xa6ce38){_0x21b66e[_0x546073(0x294)][_0x546073(0x1c6)](_0x546073(0x232)+_0xa6ce38[_0x546073(0x2a6)]);}}async function getOutsideTemperatureNumeric(_0xc435de){const _0x2921ac=a0_0x7bdfd;if(_0xc435de['config']['outdoorSensorId'])try{const _0xe872fd=await _0xc435de[_0x2921ac(0xee)](_0xc435de['config'][_0x2921ac(0x285)]);if(_0xe872fd&&_0xe872fd[_0x2921ac(0x10a)]!==undefined&&_0xe872fd[_0x2921ac(0x10a)]!==null){const _0x4bf336=parseFloat(_0xe872fd[_0x2921ac(0x10a)]);if(!isNaN(_0x4bf336))return _0x4bf336;}}catch(_0x1b3073){_0xc435de[_0x2921ac(0x294)]['warn'](_0x2921ac(0x138)+_0xc435de[_0x2921ac(0x2b1)][_0x2921ac(0x285)]+':\x20'+_0x1b3073[_0x2921ac(0x2a6)]);}const _0x31e0dc=_0xc435de[_0x2921ac(0x2b1)]['weatherInstance'];if(!_0xc435de[_0x2921ac(0x2b1)][_0x2921ac(0x22e)]||!_0x31e0dc)return null;try{let _0x462c18='';if(_0x31e0dc[_0x2921ac(0x200)](_0x2921ac(0x2ab)))_0x462c18=_0x31e0dc+_0x2921ac(0x26d);else{if(_0x31e0dc['includes'](_0x2921ac(0x101)))_0x462c18=_0x31e0dc+_0x2921ac(0xcb);else{if(_0x31e0dc[_0x2921ac(0x200)](_0x2921ac(0x16a)))_0x462c18=_0x31e0dc+_0x2921ac(0x1c7);else{if(_0x31e0dc['includes']('weatherunderground'))_0x462c18=_0x31e0dc+_0x2921ac(0x234);}}}if(_0x462c18){const _0x232b7e=await _0xc435de['getForeignStateAsync'](_0x462c18);if(_0x232b7e&&_0x232b7e[_0x2921ac(0x10a)]!==undefined&&_0x232b7e[_0x2921ac(0x10a)]!==null)return parseFloat(_0x232b7e[_0x2921ac(0x10a)]);}}catch(_0x3fe869){}return null;}function a0_0x60ac(){const _0xaf2ef4=['contact','rssi','extendObjectAsync','\x22\x20--break-system-packages','callback','feedbackHistory','driftAnalysisTimer','error','.forecast.current.temperature','round','briefingEnabled','Skipped\x20(No\x20AI\x20or\x20Data)','Fokus\x20auf\x20Familienroutinen.','Baseline\x20Status','[RECORDER\x20DEBUG]\x20Accepting\x20Event\x20','KALENDER:\x20Keine\x20Kalender\x20ausgew√§hlt\x20(Bitte\x20in\x20Settings\x20konfigurieren)','):\x20','ROLLE:\x20F√ºrsorglicher\x20Assistent.\x20AUFGABE:\x20Schreibe\x20eine\x20kurze,\x20beruhigende\x20\x22Guten\x20Morgen\x22-Nachricht.\x20PERSONA:\x20','Could\x20not\x20kill\x20Python\x20process:\x20','onMessage','PARTY','getFullYear','Error:\x20','node-schedule','command','members','System\x20Mode','text.alarm','motion','ack','.\x20DATEN:\x20Schlaf\x20','forEach','Kalender:\x20Deaktiviert','Gemini\x20AI\x20initialized.','uuid-not-found','\x20=\x20','ltmJob','channel','shutter','getForeignObjectAsync','simulateButler','cover','description','AI\x20Emergency\x20Status','devices','occupancy','number','Gast','parse','indicator.alarm','Comfort\x20Summary','cogni-living','calendarInstance','\x20for\x20interactive\x20buttons...','map','lowbat','_calName','geminiModel','getDate','Reset\x20Sched\x20Error:\x20','\x27\x20not\x20in\x20allowed\x20list)','Alarm','Thermodynamic\x20Data\x20Points','licht','notifyPushoverRecipient','includes','Drift\x20Status','setStateAsync','warn','brightness','bind','presenceDevices','details','0\x204\x20*\x20*\x20*','system','heizung','ltmDriftCheckIntervalHours','analysis.isEmergency','send','stdout','AI\x20Alert\x20Status','t√ºr','‚ö†Ô∏è\x20ALARM:\x20','driftDetails','write','getStateAsync','Bibliotheken\x20nicht\x20gefunden','catch','dependencyInstallInProgress','PRIORIT√ÑT:\x20Gesundheit/AAL.','onReady','notifyTelegramRecipient','uuid','rollladen','flot.','humidity','Starting\x20Autopilot\x20(','[RECORDER]\x20Discarding\x20short\x20sequence\x20(Length:\x20','KALENDER:\x20','setpoint','scriptProblem','events.lastEvent','.\x20Welcome\x20home.','notifyEmailInstance','constructor','notifyTelegramInstance','Unknown','subscribeForeignStatesAsync','Raw\x20Log','analysis.health','toLowerCase','useWeather','analysis.health.restlessness','sendTo','online','[RECORDER]\x20Error\x20saving\x20sequence:\x20','Pattern\x20Detected','.forecast.current.temp','autoApply','endsWith','delObjectAsync','pythonProcess','Trigger\x20Analysis','analysisTimer','analysis.automation','ready','filter','value','LTM.trainingData','analysis.health.sleepScore','_score','connection','status','length','isAlert','siren','Party','state','maintenance','guest','ü§ñ\x20BUTLER\x20AUTO-APPLY:\x20Executing\x20','205122cnaedq','Analysiere\x20ausgewogen.','Restlessness\x20Level','Event\x20received:\x20','json','Kein\x20API\x20Key!','167885QeXBsy','getCalendarNames\x20Error:\x20','isPresent','stderr','\x20min).','toString','Subscribing\x20to\x20','thermostat','\x20|\x20','events.history','Gemini\x20Analysis\x20Error:\x20','\x20days\x20of\x20activity\x20data\x20to\x20Python...','analysis.history_debug_00','blind','lampe','party','.\x0a\x20\x20\x20\x20WETTER:\x20','material.','Drift\x20Sched\x20Error:\x20','\x0a\x0a\x20\x20\x20\x20AUFGABE:\x0a\x20\x20\x20\x201.\x20Analysiere\x20auf\x20Gesundheitsrisiken\x20(Sturz,\x20Inaktivit√§t).\x0a\x20\x20\x20\x202.\x20Analysiere\x20auf\x20Komfort/Automatisierung\x20(\x22Butler\x22).\x20Erkennst\x20du\x20ein\x20Muster?\x20(z.B.\x20\x22Wenn\x20Bewegung\x20Flur,\x20dann\x20Licht\x20an\x22).\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20FORMAT\x20(JSON\x20Only!):\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x22isAlert\x22:\x20boolean,\x0a\x20\x20\x20\x20\x20\x20\x22alertReason\x22:\x20\x22string\x20(kurz)\x22,\x0a\x20\x20\x20\x20\x20\x20\x22isEmergency\x22:\x20boolean,\x0a\x20\x20\x20\x20\x20\x20\x22summary\x22:\x20\x22string\x20(Was\x20passiert\x20gerade?)\x22,\x0a\x20\x20\x20\x20\x20\x20\x22automationProposal\x22:\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22detected\x22:\x20boolean,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22description\x22:\x20\x22string\x20(Was\x20soll\x20automatisiert\x20werden?)\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22targetId\x22:\x20\x22string\x20(ioBroker\x20ID,\x20z.B.\x200_userdata.0.light)\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22targetValue\x22:\x20\x22any\x20(Wert,\x20z.B.\x20true\x20oder\x2050)\x22\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20','üêç\x20Python\x20Pong\x20received!\x20Latency\x20check\x20passed.','üêç\x20Guardian\x20Diagnosis\x20(','longitude','application/json','exitTimer','system.','aiPersona','.Current.Temperature','normal','getMonth','trim','\x20(Value\x20is\x20falsy:\x20','common','analysis.isAlert','stick_unreach','lastAlertState','sleepScore','system.isPresent','window','getTime','setForeignStateAsync','analysis.comfortSuggestion','8947kdeFrR','from','Health\x20&\x20Sleep\x20Analysis','fill','Trend\x20Diagnosis\x20(Python)','[RECORDER]\x20Added\x20step\x20to\x20sequence:\x20','minDaysForBaseline','fenster','LTM.driftAnalysis.baselineDrift','outdoorSensorId','analysis.comfortSummary','livingContext','cancel','analysis.automation.description','activityLevel','isEmergency','icons-mfd.','detected','dutycycle','analysis.health.trendDiagnosis','LTM\x20Sched\x20Error:\x20','licenseKey','Fehler:\x20','‚ùå\x20FREE\x20MODE','log','exitGraceTimer','Started\x20at\x20','shift','date','lock','switch','replace','Health\x20Notes','python3\x20-m\x20pip\x20install\x20-r\x20\x22','close','eventHistory','push','weatherunderground.0','LTM.rawEventLog','inactivityMonitoringEnabled','stateChange','system.config','message','60gRJxMG','doors','KALENDER:\x20Keine\x20relevanten\x20Termine','Wetter:\x20Deaktiviert','accuweather','off','[TEST]\x20','ANALYZE_TREND','.Summary.Current','‚úÖ\x20AUTO-FIX\x20SUCCESS.\x20Dependencies\x20installed.\x20Restarting\x20Service...','config','stdin','working','testNotification','Motion\x20detected\x20inside.\x20Aborting\x20Exit\x20Timer.','latitude','onStateChange','reachable','data','WETTER:\x20','none','‚úÖ\x20Alarm\x20quittiert.\x20System\x20normal.','üì°\x20Hooking\x20into\x20','stringify','kill','Aktiv\x20(','Daily\x20Digests','Trigger\x20Briefing\x20(Test)','baselineDrift','now','getEnums','triggerBriefing','COGNI_CONFIRM_OK','setObjectNotExistsAsync','enum.functions.*','Guardian:\x20Not\x20enough\x20history\x20data\x20for\x20trend\x20analysis\x20yet.','apply','[RESULT]','systemUUID','setState','.NextHours.Location_1.Day_1.current.temp_value','Scanning\x20for\x20devices\x20(V8:\x20Whitelist\x20Priority)...','analysis.activitySummary','sendToAsync','loc','temp','Error\x20launching\x20Python\x20service:\x20','KALENDER\x20ERROR:\x20','Guardian:\x20Sending\x20','object','analysis.analysisHistory','isArray','scanDevices','analysis.automation.triggerAction','daswetter.0','Who\x20is\x20present?','accuweather.0','sound','briefingTime','triggerDailyDigest','Error\x20reading\x20calendar\x20table:\x20','service.py','targetposition','models/gemini-flash-latest','generateContent','WiFi\x20Presence\x20detected\x20->\x20Aborting\x20Exit\x20Timer.\x20User\x20is\x20present.','LTM','automation.triggerAction','(((.+)+)+)+$','openweathermap.0','\x20events','native','[LOG]','indexOf','TEST-PRO-KEY','getForeignStateAsync','vacation','Recorded\x20Motion\x20Sequences','main','targetId','uuid-error','pop','modeResetJob','Say\x20Hello','No\x20instance','32PMlQIQ','analysis.automation.targetValue','\x20(Type\x20\x27','telegram',').\x20Saving\x20to\x20Training\x20Data.','2766168ywKOqL','Generating\x20Morning\x20Briefing...','system.presenceWho','boolean','daswetter','0\x203\x20*\x20*\x20*','getLtmData','dimmer','currentSystemMode','javascript.','automationProposal','dailyDigests','NORMAL','val','Morning\x20Briefing\x20sent.','LTM.driftAnalysis','Comfort\x20Suggestion','notifyEmailEnabled','Activity\x20Summary','bewegung','temperature','analysis.health.notes','1473820GbLPJx','values','.NextHours.Location_1.Day_1.current.symbol_desc','config_pending','subscribeStates','Normal','sensorLastValues','1716022nzEDFk','N/A','[RECORDER\x20DEBUG]\x20Ignored\x20Event\x20','User\x20dismissed\x20automation\x20proposal.','N/A\x20(Learning)','LTM.dailyDigests','üêç\x20Starting\x20Python\x20Sidecar:\x20','\x20hours.\x20Potential\x20incapacitation.','calendarSelection','Sleep\x20Score\x20(0-100)','Details:\x20','level','energy','[PYTHON]\x20Service\x20exited\x20with\x20code\x20','analysis.automation.autoApply','timestamp','substring','payload','Correlation\x20between\x20Inside\x20Temp,\x20Outside\x20Temp\x20and\x20Time','No\x20module\x20named','path','GUEST','alertReason','lights','Deaktiviert\x20(Pro-Feature)','analysis.alertReason','.forecast.current.state','apiKey','button','rawEventLog','Error\x20reading\x20outdoor\x20sensor\x20','TREND_RESULT','splice','üìû\x20R√ºckruf\x20anfordern','position','join','summary','.\x0a\x20\x20\x20\x20KONTEXT:\x20','name','analysis.trigger','debug','generic','.data.table','Restoring\x20sensor\x20cache\x20from\x20history\x20(','vis.','Target\x20ID','response','...','genAI','[RECORDER]\x20Sequence\x20finished\x20(Steps:\x20','08:00','\x20*\x20*\x20*','some','sensor','üìû\x20R√úCKRUF\x20BITTE!\x20Der\x20Bewohner\x20hat\x20den\x20R√ºckruf-Button\x20gedr√ºckt.','system.mode','pr√§senz','Briefing\x20Error:\x20','Last\x20Check','time','string','.\x20OUTPUT:\x20Nur\x20Text.','unreach','Failed\x20to\x20send\x20to\x20Python:\x20','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','LTM.driftAnalysis.lastCheck','\x20|\x20Status:\x20','Keine\x20Details.','retry','setHours','üêç\x20Stopping\x20Python\x20Sidecar...','python_service','üìû\x20User\x20requested\x20CALL\x20via\x20Telegram!','ltmStbWindowDays','testApiKey','startsWith','onUnload','getGenerativeModel','PRO-','1870578kXYoUR','openweathermap','notifyTelegramEnabled','analysis.automation.patternDetected','\x0aSTB:\x20','ü§ñ\x20BUTLER\x20PROPOSAL:\x20','LTM.trainingData.sequences','unshift','lastCheck','presence','submitFeedback','Scheduling\x20Morning\x20Briefing\x20for\x20','analysis.triggerBriefing','light','scheduleJob','dismissAutomation','ü§ñ\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','toFixed','enum','events.history_debug_00','echarts.','admin.','schalter','city','ical.0','Deviation','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','isGracePeriodActive','analysis.lastResult','Description','VACATION','communicate.request','‚úÖ\x20Alles\x20OK\x20(Reset)','set_temperature','WETTER\x20ERROR:\x20','health','Invalid\x20JSON\x20from\x20Python:\x20','/100,\x20Aktivit√§t\x20seit\x2004:00:\x20','Trend\x20Value\x20(%)','Drift\x20Details','find','door','analysis.automation.targetId','valve','LTM.baselineStatus','custom','getForeignObjectsAsync','location','Urlaub','slice','sort','info','enum.rooms.*','Logbook','type','Gemini\x20Init\x20Error:\x20','‚ö†Ô∏è\x20Python\x20missing\x20dependencies.\x20Triggering\x20Auto-Install...','geminiApiKey','Processing\x20Status','Event\x20History','LTM.trainingData.thermodynamics','search','analysis.health.trendValue','analysisHistory','selectedFunctionIds','analysis.automation.suggestedAction','Last\x20Result','direction','KI-Modell\x20nicht\x20initialisiert','targetValue','isProVersion','text','briefingJob','unknown','[PYTHON]\x20','üö®\x20EMERGENCY','toISOString','inactivityThresholdHours','Vom\x20Benutzer\x20best√§tigt\x20(OK).','systemConfig','fault','Entry\x20detected\x20via\x20','Cogni-Living','\x20events)...','getHours','split'];a0_0x60ac=function(){return _0xaf2ef4;};return a0_0x60ac();}async function recordThermodynamics(_0x4543e8,_0x54cbcf,_0x4ce97e,_0x5472d4){const _0x4ac7b4=a0_0x7bdfd,_0x12db0f=await getOutsideTemperatureNumeric(_0x4543e8),_0x5003c4=await _0x4543e8[_0x4ac7b4(0x214)](_0x4ac7b4(0x1a5));let _0x1e55e6=[];if(_0x5003c4&&_0x5003c4[_0x4ac7b4(0x10a)])try{_0x1e55e6=JSON[_0x4ac7b4(0x1ef)](_0x5003c4[_0x4ac7b4(0x10a)]);}catch(_0x432382){}_0x1e55e6[_0x4ac7b4(0x2a0)]({'ts':Date[_0x4ac7b4(0xc0)](),'room':_0x5472d4||'Unknown','t_in':_0x4ce97e,'t_out':_0x12db0f});if(_0x1e55e6[_0x4ac7b4(0x244)]>THERMO_LOG_SIZE)_0x1e55e6[_0x4ac7b4(0x297)]();await _0x4543e8[_0x4ac7b4(0x202)](_0x4ac7b4(0x1a5),{'val':JSON[_0x4ac7b4(0xba)](_0x1e55e6),'ack':!![]});}async function processSensorEvent(_0x9664b8,_0x157d27,_0x1fe742,_0xac5fba){const _0x4a4f2e=a0_0x7bdfd;if(!_0xac5fba)return;const _0x9262fc=_0x1fe742[_0x4a4f2e(0x10a)],_0x52c24a=Date[_0x4a4f2e(0xc0)]();_0x9664b8['log']['debug'](_0x4a4f2e(0x24f)+_0x157d27+_0x4a4f2e(0x1e2)+_0x9262fc);const _0x57a21d=_0x9664b8[_0x4a4f2e(0x119)][_0x157d27];_0x9664b8[_0x4a4f2e(0x119)][_0x157d27]=_0x9262fc;if(!_0xac5fba['logDuplicates']&&_0x57a21d!=undefined&&_0x57a21d==_0x9262fc){_0x9664b8['log'][_0x4a4f2e(0x142)]('IGNORING\x20DUPLICATE\x20(Cached):\x20'+_0xac5fba[_0x4a4f2e(0x140)]+'\x20(Value:\x20'+_0x9262fc+')');return;}_0x9664b8[_0x4a4f2e(0x1af)]&&_0xac5fba[_0x4a4f2e(0x19f)]==='temperature'&&recordThermodynamics(_0x9664b8,_0x157d27,_0x9262fc,_0xac5fba[_0x4a4f2e(0x198)]);const _0xcb7e9d={'timestamp':_0x52c24a,'id':_0x157d27,'name':_0xac5fba[_0x4a4f2e(0x140)],'type':_0xac5fba[_0x4a4f2e(0x19f)],'location':_0xac5fba[_0x4a4f2e(0x198)],'value':_0x9262fc};_0x9664b8[_0x4a4f2e(0x29f)][_0x4a4f2e(0x170)](_0xcb7e9d);if(_0x9664b8[_0x4a4f2e(0x29f)][_0x4a4f2e(0x244)]>HISTORY_MAX_SIZE)_0x9664b8['eventHistory'][_0x4a4f2e(0xf4)]();await _0x9664b8[_0x4a4f2e(0x202)](_0x4a4f2e(0x224),{'val':JSON[_0x4a4f2e(0xba)](_0xcb7e9d),'ack':!![]}),await _0x9664b8[_0x4a4f2e(0x202)](_0x4a4f2e(0x25b),{'val':JSON[_0x4a4f2e(0xba)](_0x9664b8[_0x4a4f2e(0x29f)]),'ack':!![]});_0x9664b8[_0x4a4f2e(0x1af)]&&(_0x9664b8[_0x4a4f2e(0x137)][_0x4a4f2e(0x2a0)](_0xcb7e9d),await saveRawEventLog(_0x9664b8),recordSequence(_0x9664b8,_0xcb7e9d));if(_0xac5fba['isExit']&&_0x9262fc===!![]){if(_0x9664b8[_0x4a4f2e(0x254)]&&!_0x9664b8['isGracePeriodActive'])_0x9664b8['log'][_0x4a4f2e(0x19c)]('Exit\x20Sensor\x20triggered\x20('+_0xac5fba[_0x4a4f2e(0x140)]+').\x20Starting\x20Timer.'),startExitTimer(_0x9664b8);else!_0x9664b8['isPresent']&&(_0x9664b8['log']['info'](_0x4a4f2e(0x1ba)+_0xac5fba[_0x4a4f2e(0x140)]+_0x4a4f2e(0x225)),await setPresence(_0x9664b8,!![]));}else _0xac5fba[_0x4a4f2e(0x19f)]==='motion'&&_0x9262fc===!![]&&(_0x9664b8[_0x4a4f2e(0x26a)]&&(_0x9664b8[_0x4a4f2e(0x294)][_0x4a4f2e(0x19c)](_0x4a4f2e(0x2b5)),abortExitTimer(_0x9664b8)),!_0x9664b8[_0x4a4f2e(0x254)]&&_0x9664b8[_0x4a4f2e(0x105)]===SYSTEM_MODES[_0x4a4f2e(0x109)]&&await setPresence(_0x9664b8,!![]));}async function runGeminiAnalysis(_0x3039c3,_0x5f0a00=''){const _0x4c7fb2=a0_0x7bdfd;if(!_0x3039c3[_0x4c7fb2(0x1f8)])return;if(_0x3039c3['eventHistory'][_0x4c7fb2(0x244)]===0x0)return;const _0x17441c=_0x3039c3[_0x4c7fb2(0x29f)][_0x4c7fb2(0x19a)](0x0,0xf),_0x51670b=await getWeatherContext(_0x3039c3),_0x5c6646=_0x3039c3[_0x4c7fb2(0x105)],_0x39fdfe=PERSONA_MAPPING[_0x3039c3[_0x4c7fb2(0x2b1)][_0x4c7fb2(0x26c)]||_0x4c7fb2(0x143)],_0x380923=_0x3039c3['config'][_0x4c7fb2(0x287)]||_0x4c7fb2(0x15d);let _0x5cf41d=![];try{const _0x23f32a=await _0x3039c3['getStateAsync']('analysis.automation.autoApply');if(_0x23f32a&&_0x23f32a[_0x4c7fb2(0x10a)])_0x5cf41d=!![];}catch(_0xdef6a3){}const _0x14c044='\x0a\x20\x20\x20\x20ROLLE:\x20KI-Hausverwalter\x20&\x20Gesundheits-Assistent.\x0a\x20\x20\x20\x20PERSONA:\x20'+_0x39fdfe+_0x4c7fb2(0x13f)+_0x380923+'.\x0a\x20\x20\x20\x20SYSTEM_MODE:\x20'+_0x5c6646+_0x4c7fb2(0x262)+_0x51670b+'.\x0a\x20\x20\x20\x20NOTFALL-KONTEXT:\x20'+(_0x5f0a00||'Keiner')+'.\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20INPUT\x20DATEN\x20(Letzte\x20Events):\x0a\x20\x20\x20\x20'+JSON['stringify'](_0x17441c)+_0x4c7fb2(0x265);try{const _0x23c5a5=await _0x3039c3[_0x4c7fb2(0x1f8)][_0x4c7fb2(0xe3)](_0x14c044),_0x559f3b=_0x23c5a5[_0x4c7fb2(0x148)][_0x4c7fb2(0x1b0)]()[_0x4c7fb2(0x29b)](/```json|```/g,'')[_0x4c7fb2(0x270)](),_0x3a2975=JSON[_0x4c7fb2(0x1ef)](_0x559f3b);await _0x3039c3[_0x4c7fb2(0x202)](_0x4c7fb2(0x185),{'val':JSON[_0x4c7fb2(0xba)](_0x3a2975),'ack':!![]});_0x3a2975[_0x4c7fb2(0x13e)]&&await _0x3039c3['setStateAsync'](_0x4c7fb2(0xcd),{'val':_0x3a2975[_0x4c7fb2(0x13e)],'ack':!![]});const _0xdaafef={'timestamp':Date['now'](),'id':Date[_0x4c7fb2(0xc0)]()[_0x4c7fb2(0x257)](),'analysis':{'activity':{'summary':_0x3a2975[_0x4c7fb2(0x13e)]||'Keine\x20Analyse.','isAlert':_0x3a2975[_0x4c7fb2(0x245)]||![],'alertReason':_0x3a2975[_0x4c7fb2(0x130)]},'comfort':{'automationProposal':_0x3a2975[_0x4c7fb2(0x107)]}}};await updateAnalysisHistory(_0x3039c3,_0xdaafef);const _0xc9afed=_0x3a2975[_0x4c7fb2(0x245)]||![];_0xc9afed!==_0x3039c3['lastAlertState']&&(await _0x3039c3['setStateAsync'](_0x4c7fb2(0x273),{'val':_0xc9afed,'ack':!![]}),_0x3039c3[_0x4c7fb2(0x275)]=_0xc9afed,_0xc9afed&&(await _0x3039c3[_0x4c7fb2(0x202)]('analysis.alertReason',{'val':_0x3a2975[_0x4c7fb2(0x130)],'ack':!![]}),sendNotification(_0x3039c3,_0x4c7fb2(0x211)+_0x3a2975['alertReason'],![],_0x3a2975[_0x4c7fb2(0x28b)]))),_0x3a2975[_0x4c7fb2(0x107)]&&_0x3a2975[_0x4c7fb2(0x107)][_0x4c7fb2(0x28d)]&&_0x3a2975[_0x4c7fb2(0x107)]['targetId']&&(_0x3039c3[_0x4c7fb2(0x294)][_0x4c7fb2(0x19c)](_0x4c7fb2(0x16e)+_0x3a2975[_0x4c7fb2(0x107)][_0x4c7fb2(0x1e9)]),await _0x3039c3['setStateAsync']('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),await _0x3039c3[_0x4c7fb2(0x202)](_0x4c7fb2(0x289),{'val':_0x3a2975[_0x4c7fb2(0x107)][_0x4c7fb2(0x1e9)],'ack':!![]}),await _0x3039c3[_0x4c7fb2(0x202)]('analysis.automation.targetId',{'val':_0x3a2975[_0x4c7fb2(0x107)][_0x4c7fb2(0xf2)],'ack':!![]}),await _0x3039c3[_0x4c7fb2(0x202)](_0x4c7fb2(0xf9),{'val':JSON[_0x4c7fb2(0xba)](_0x3a2975[_0x4c7fb2(0x107)]['targetValue']),'ack':!![]}),_0x5cf41d&&(_0x3039c3['log'][_0x4c7fb2(0x19c)](_0x4c7fb2(0x24b)+_0x3a2975['automationProposal'][_0x4c7fb2(0xf2)]+_0x4c7fb2(0x149)),await executeAutomationAction(_0x3039c3)));}catch(_0x394694){_0x3039c3[_0x4c7fb2(0x294)][_0x4c7fb2(0x1c6)](_0x4c7fb2(0x25c)+_0x394694['message']);}}function installPythonDependencies(_0x131b07){const _0x4c87e2=a0_0x7bdfd;if(_0x131b07[_0x4c87e2(0x217)])return;_0x131b07['dependencyInstallInProgress']=!![];const _0x124dff=path['join'](__dirname,'python_service','requirements.txt');_0x131b07['log'][_0x4c87e2(0x19c)]('üõ†Ô∏è\x20AUTO-FIX:\x20Installing\x20Python\x20dependencies\x20from\x20'+_0x124dff+_0x4c87e2(0x149)),stopPythonService(_0x131b07);const _0x2164da=_0x4c87e2(0x29d)+_0x124dff+_0x4c87e2(0x1c2);exec(_0x2164da,(_0x580b71,_0x47eb73,_0x552be9)=>{const _0x151ca4=_0x4c87e2;_0x131b07['dependencyInstallInProgress']=![],_0x580b71?(_0x131b07[_0x151ca4(0x294)]['error']('‚ùå\x20AUTO-FIX\x20FAILED.\x20Please\x20run\x20manually:\x20sudo\x20'+_0x2164da),_0x131b07['log'][_0x151ca4(0x1c6)](_0x151ca4(0x124)+(_0x552be9||_0x580b71[_0x151ca4(0x2a6)]))):(_0x131b07['log']['info'](_0x151ca4(0x2b0)),startPythonService(_0x131b07));});}function sendToPython(_0x552379,_0x5570c4,_0x20801f={}){const _0x4e8f65=a0_0x7bdfd;if(!_0x552379['pythonProcess']||!_0x552379[_0x4e8f65(0x238)][_0x4e8f65(0x2b2)]['writable'])return;const _0x3980f3=JSON[_0x4e8f65(0xba)]({'command':_0x5570c4,..._0x20801f});try{_0x552379[_0x4e8f65(0x238)][_0x4e8f65(0x2b2)][_0x4e8f65(0x213)](_0x3980f3+'\x0a');}catch(_0x5d9460){_0x552379[_0x4e8f65(0x294)][_0x4e8f65(0x1c6)](_0x4e8f65(0x159)+_0x5d9460[_0x4e8f65(0x2a6)]);}}function runPythonHealthCheck(_0x45c37a){const _0x5de64c=a0_0x7bdfd;if(!_0x45c37a[_0x5de64c(0x108)]||_0x45c37a['dailyDigests'][_0x5de64c(0x244)]<0x2){_0x45c37a[_0x5de64c(0x294)]['info'](_0x5de64c(0xc6));return;}const _0x5c4fa9=_0x45c37a[_0x5de64c(0x108)]['map'](_0x5e847f=>{const _0x1b37e0=_0x5de64c,_0x53f7dd=(_0x5e847f[_0x1b37e0(0x28a)]||'')['toLowerCase']();return ACTIVITY_LEVEL_MAP[_0x53f7dd]||0x32;});_0x45c37a['log'][_0x5de64c(0x19c)](_0x5de64c(0xd3)+_0x5c4fa9[_0x5de64c(0x244)]+_0x5de64c(0x25d)),sendToPython(_0x45c37a,_0x5de64c(0x2ae),{'values':_0x5c4fa9,'tag':'Activity-Level'});}function handlePythonResult(_0x27c4e4,_0x1a1dff){const _0x5105ec=a0_0x7bdfd;if(_0x1a1dff[_0x5105ec(0x19f)]==='PONG')_0x27c4e4[_0x5105ec(0x294)][_0x5105ec(0x142)](_0x5105ec(0x266));else{if(_0x1a1dff[_0x5105ec(0x19f)]===_0x5105ec(0x139)){const {tag:_0x328705,diagnosis:_0x2d6f72,change_percent:_0x28fbd8}=_0x1a1dff[_0x5105ec(0x12b)];_0x27c4e4['log'][_0x5105ec(0x19c)](_0x5105ec(0x267)+_0x328705+_0x5105ec(0x1cf)+_0x2d6f72+'\x20('+_0x28fbd8+'%)'),_0x27c4e4[_0x5105ec(0x202)](_0x5105ec(0x28f),{'val':_0x2d6f72,'ack':!![]}),_0x27c4e4[_0x5105ec(0x202)](_0x5105ec(0x1a7),{'val':_0x28fbd8,'ack':!![]});}}}function startPythonService(_0x392573){const _0x389363=a0_0x7bdfd;try{const _0x40bb73=path[_0x389363(0x13d)](__dirname,_0x389363(0x161),_0x389363(0xe0));_0x392573[_0x389363(0x294)][_0x389363(0x19c)](_0x389363(0x120)+_0x40bb73),_0x392573[_0x389363(0x238)]=spawn('python3',[_0x40bb73]),_0x392573[_0x389363(0x238)][_0x389363(0x20e)]['on'](_0x389363(0x2b9),_0x1f0c81=>{const _0x2d87e9=_0x389363,_0x5cf6a1=_0x1f0c81[_0x2d87e9(0x257)]()[_0x2d87e9(0x1be)]('\x0a');_0x5cf6a1[_0x2d87e9(0x1de)](_0x23e033=>{const _0x2a496b=_0x2d87e9,_0x24ab6e=_0x23e033[_0x2a496b(0x270)]();if(!_0x24ab6e)return;if(_0x24ab6e[_0x2a496b(0x165)](_0x2a496b(0xeb)))_0x392573['log'][_0x2a496b(0x142)](_0x2a496b(0x1b3)+_0x24ab6e[_0x2a496b(0x12a)](0x5)[_0x2a496b(0x270)]());else{if(_0x24ab6e[_0x2a496b(0x165)](_0x2a496b(0xc8)))try{const _0x2d4524=JSON[_0x2a496b(0x1ef)](_0x24ab6e[_0x2a496b(0x12a)](0x8)['trim']());handlePythonResult(_0x392573,_0x2d4524);}catch(_0x21db1b){_0x392573[_0x2a496b(0x294)][_0x2a496b(0x203)](_0x2a496b(0x18d)+_0x24ab6e);}}(_0x24ab6e['includes'](_0x2a496b(0x12d))||_0x24ab6e[_0x2a496b(0x200)](_0x2a496b(0x215)))&&(_0x392573[_0x2a496b(0x294)]['warn'](_0x2a496b(0x1a1)),installPythonDependencies(_0x392573));});}),_0x392573[_0x389363(0x238)][_0x389363(0x255)]['on'](_0x389363(0x2b9),_0x2b3bc9=>{const _0x110abb=_0x389363,_0x144f69=_0x2b3bc9[_0x110abb(0x257)]()[_0x110abb(0x270)]();_0x392573[_0x110abb(0x294)][_0x110abb(0x1c6)]('[PYTHON\x20ERR]\x20'+_0x144f69);}),_0x392573[_0x389363(0x238)]['on'](_0x389363(0x29e),_0x338dac=>{const _0x462f81=_0x389363;_0x392573[_0x462f81(0x294)][_0x462f81(0x19c)](_0x462f81(0x127)+_0x338dac),_0x392573[_0x462f81(0x238)]=null;}),_0x392573[_0x389363(0x238)]['on'](_0x389363(0x1c6),_0x37729c=>{const _0xa90d78=_0x389363;_0x392573['log'][_0xa90d78(0x203)]('[PYTHON]\x20Failed\x20to\x20start\x20(is\x20python3\x20installed?):\x20'+_0x37729c['message']);});}catch(_0x39fe1b){_0x392573[_0x389363(0x294)][_0x389363(0x1c6)](_0x389363(0xd1)+_0x39fe1b[_0x389363(0x2a6)]);}}function stopPythonService(_0x254969){const _0x2fedc8=a0_0x7bdfd;if(_0x254969['pythonProcess']){_0x254969[_0x2fedc8(0x294)]['info'](_0x2fedc8(0x160));try{_0x254969['pythonProcess'][_0x2fedc8(0xbb)]();}catch(_0x23477f){_0x254969[_0x2fedc8(0x294)]['warn'](_0x2fedc8(0x1d1)+_0x23477f[_0x2fedc8(0x2a6)]);}_0x254969[_0x2fedc8(0x238)]=null;}}class CogniLiving extends utils['Adapter']{constructor(_0x457327){const _0x593f48=a0_0x7bdfd;super({..._0x457327,'name':_0x593f48(0x1f2)}),this['eventHistory']=[],this[_0x593f48(0x1a8)]=[],this[_0x593f48(0x1c4)]=[],this[_0x593f48(0x137)]=[],this['dailyDigests']=[],this[_0x593f48(0x119)]={},this[_0x593f48(0x1b8)]={'latitude':0x0,'longitude':0x0,'city':''},this['isPresent']=!![],this[_0x593f48(0x26a)]=null,this[_0x593f48(0x295)]=null,this[_0x593f48(0x184)]=![],this[_0x593f48(0x14a)]=null,this[_0x593f48(0x1f8)]=null,this[_0x593f48(0x105)]=SYSTEM_MODES[_0x593f48(0x109)],this[_0x593f48(0x1af)]=![],this[_0x593f48(0x275)]=![],this[_0x593f48(0xc9)]=_0x593f48(0x1b2),this[_0x593f48(0x23a)]=null,this[_0x593f48(0x1e3)]=null,this[_0x593f48(0xf5)]=null,this[_0x593f48(0x1c5)]=null,this[_0x593f48(0x1b1)]=null,this[_0x593f48(0x238)]=null,this[_0x593f48(0x217)]=![],this['on'](_0x593f48(0x23c),this[_0x593f48(0x219)][_0x593f48(0x205)](this)),this['on'](_0x593f48(0x2a4),this['onStateChange']['bind'](this)),this['on']('unload',this[_0x593f48(0x166)][_0x593f48(0x205)](this)),this['on'](_0x593f48(0x2a6),this[_0x593f48(0x1d2)]['bind'](this));}async[a0_0x7bdfd(0x219)](){const _0x30e732=a0_0x7bdfd;this[_0x30e732(0x294)][_0x30e732(0x19c)]('cogni-living\x20adapter\x20starting\x20(v'+this['version']+')\x20-\x20FUNCTIONS\x20FIRST\x20ARCHITECTURE'),await initZombies(this),this[_0x30e732(0x2b1)][_0x30e732(0x291)]=this['config']['licenseKey']||'';try{this[_0x30e732(0x1af)]=await checkLicense(this,this[_0x30e732(0x2b1)]['licenseKey']);}catch(_0x1dc9d1){}this[_0x30e732(0x294)]['info']('[LICENSE\x20CHECK]\x20Key\x20present:\x20'+!!this[_0x30e732(0x2b1)][_0x30e732(0x291)]+_0x30e732(0x15c)+(this[_0x30e732(0x1af)]?'‚úÖ\x20PRO\x20ACTIVATED':_0x30e732(0x293)));if(!this['config'][_0x30e732(0x1b6)]||this[_0x30e732(0x2b1)][_0x30e732(0x1b6)]<0.1)this[_0x30e732(0x2b1)]['inactivityThresholdHours']=0xc;await initHistory(this),await initSystemConfig(this);if(this[_0x30e732(0x2b1)][_0x30e732(0x1a2)])try{this[_0x30e732(0x14a)]=new GoogleGenerativeAI(this[_0x30e732(0x2b1)]['geminiApiKey']),this['geminiModel']=this[_0x30e732(0x14a)][_0x30e732(0x167)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x30e732(0x269)}}),this[_0x30e732(0x294)][_0x30e732(0x19c)](_0x30e732(0x1e0));}catch(_0x546a18){this[_0x30e732(0x294)][_0x30e732(0x1c6)](_0x30e732(0x1a0)+_0x546a18[_0x30e732(0x2a6)]);}await createAllObjects(this),await loadSystemMode(this),await loadRawEventLog(this),await loadDailyDigests(this),this[_0x30e732(0x117)](_0x30e732(0x141)),this[_0x30e732(0x117)](LTM_DP_TRIGGER_DIGEST),this[_0x30e732(0x117)](_0x30e732(0x151)),this[_0x30e732(0x117)](_0x30e732(0x175)),this[_0x30e732(0x117)]('analysis.automation.triggerAction'),this[_0x30e732(0x117)](_0x30e732(0x128)),await initSensorSubscriptions(this),await initPresenceSubscriptions(this),await setupTelegramListener(this),setTimeout(()=>checkWifiPresence(this),0x1388);if(this[_0x30e732(0x23a)])clearInterval(this[_0x30e732(0x23a)]);const _0x530792=this['config']['analysisInterval']||0xf;_0x530792>0x0&&(this[_0x30e732(0x294)][_0x30e732(0x19c)](_0x30e732(0x21f)+_0x530792+_0x30e732(0x256)),this[_0x30e732(0x23a)]=setInterval(()=>{runAutopilot(this);},_0x530792*0x3c*0x3e8)),setupLtmScheduler(this),setupModeResetScheduler(this),setupDriftAnalysisScheduler(this),setupBriefingScheduler(this),startPythonService(this),setTimeout(()=>{this['pythonProcess']&&runPythonHealthCheck(this);},0x1388);}[a0_0x7bdfd(0x166)](_0xc36600){const _0x31022e=a0_0x7bdfd;if(this[_0x31022e(0x23a)])clearInterval(this['analysisTimer']);if(this['driftAnalysisTimer'])clearInterval(this[_0x31022e(0x1c5)]);if(this['ltmJob'])this[_0x31022e(0x1e3)]['cancel']();if(this[_0x31022e(0xf5)])this['modeResetJob']['cancel']();if(this[_0x31022e(0x1b1)])this[_0x31022e(0x1b1)][_0x31022e(0x288)]();if(this[_0x31022e(0x26a)])clearTimeout(this[_0x31022e(0x26a)]);if(this[_0x31022e(0x295)])clearTimeout(this[_0x31022e(0x295)]);stopPythonService(this),_0xc36600();}async[a0_0x7bdfd(0x2b7)](_0x4b6492,_0x494506){const _0x84f1d=a0_0x7bdfd;if(!_0x494506)return;if(_0x4b6492[_0x84f1d(0x200)](_0x84f1d(0xfb))&&_0x4b6492[_0x84f1d(0x236)](_0x84f1d(0x188))&&_0x494506['val']){await handleTelegramResponse(this,_0x494506['val']);return;}if(_0x4b6492===this['namespace']+'.'+SYSTEM_DP_MODE){_0x494506['val']&&Object[_0x84f1d(0x114)](SYSTEM_MODES)[_0x84f1d(0x200)](_0x494506[_0x84f1d(0x10a)])&&(this[_0x84f1d(0x105)]=_0x494506[_0x84f1d(0x10a)],_0x494506['val']===SYSTEM_MODES[_0x84f1d(0x187)]?await setPresence(this,![]):await setPresence(this,!![]));if(!_0x494506[_0x84f1d(0x1dc)])this[_0x84f1d(0xca)](_0x4b6492,{'val':this[_0x84f1d(0x105)],'ack':!![]});return;}if(!_0x494506[_0x84f1d(0x1dc)]){_0x4b6492[_0x84f1d(0x200)](_0x84f1d(0x141))&&_0x494506['val']&&(this[_0x84f1d(0xca)](_0x4b6492,{'val':![],'ack':!![]}),runGeminiAnalysis(this));if(_0x4b6492[_0x84f1d(0x200)](_0x84f1d(0xde))&&_0x494506[_0x84f1d(0x10a)]){this['setState'](_0x4b6492,{'val':![],'ack':!![]});if(this[_0x84f1d(0x1af)])createDailyDigest(this);}_0x4b6492[_0x84f1d(0x200)](_0x84f1d(0xc2))&&_0x494506[_0x84f1d(0x10a)]&&(this[_0x84f1d(0xca)](_0x4b6492,{'val':![],'ack':!![]}),sendMorningBriefing(this));_0x4b6492[_0x84f1d(0x200)](_0x84f1d(0xe6))&&_0x494506[_0x84f1d(0x10a)]&&(this[_0x84f1d(0xca)](_0x4b6492,{'val':![],'ack':!![]}),executeAutomationAction(this));return;}if(this['config']['presenceDevices']&&this[_0x84f1d(0x2b1)][_0x84f1d(0x206)]['includes'](_0x4b6492)){await checkWifiPresence(this);return;}const _0x233e79=(this[_0x84f1d(0x2b1)][_0x84f1d(0x1eb)]||[])[_0x84f1d(0x191)](_0x548440=>_0x548440['id']===_0x4b6492);if(_0x233e79)processSensorEvent(this,_0x4b6492,_0x494506,_0x233e79);}async[a0_0x7bdfd(0x1d2)](_0x2c2fb9){const _0x5db24e=a0_0x7bdfd;if(typeof _0x2c2fb9===_0x5db24e(0xd4)&&_0x2c2fb9[_0x5db24e(0x2a6)])try{if(_0x2c2fb9[_0x5db24e(0x1d7)]===_0x5db24e(0x164)){const _0x33accb=_0x2c2fb9[_0x5db24e(0x2a6)][_0x5db24e(0x135)]||this[_0x5db24e(0x2b1)][_0x5db24e(0x1a2)];if(!_0x33accb)return this[_0x5db24e(0x230)](_0x2c2fb9[_0x5db24e(0x27d)],_0x2c2fb9['command'],{'success':![],'message':'Kein\x20API\x20Key\x20eingegeben.'},_0x2c2fb9[_0x5db24e(0x1c3)]);try{const _0x47deac=new GoogleGenerativeAI(_0x33accb),_0x276ca9=_0x47deac[_0x5db24e(0x167)]({'model':GEMINI_MODEL}),_0x3c1ff4=await _0x276ca9['generateContent'](_0x5db24e(0xf6)),_0x3fd8f2=await _0x3c1ff4['response'],_0xc661a9=_0x3fd8f2['text']();this[_0x5db24e(0x230)](_0x2c2fb9[_0x5db24e(0x27d)],_0x2c2fb9[_0x5db24e(0x1d7)],{'success':!![],'message':'Verbindung\x20erfolgreich!\x20Antwort:\x20'+_0xc661a9[_0x5db24e(0x12a)](0x0,0x14)+_0x5db24e(0x149)},_0x2c2fb9[_0x5db24e(0x1c3)]);}catch(_0x5cbfe1){this[_0x5db24e(0x230)](_0x2c2fb9['from'],_0x2c2fb9['command'],{'success':![],'message':_0x5db24e(0x292)+_0x5cbfe1[_0x5db24e(0x2a6)]},_0x2c2fb9[_0x5db24e(0x1c3)]);}}else{if(_0x2c2fb9[_0x5db24e(0x1d7)]===_0x5db24e(0x2b4)){}else{if(_0x2c2fb9[_0x5db24e(0x1d7)]===_0x5db24e(0x103)){if(!this['isProVersion'])return this[_0x5db24e(0x230)](_0x2c2fb9[_0x5db24e(0x27d)],_0x2c2fb9['command'],{'success':![],'isPro':![]},_0x2c2fb9[_0x5db24e(0x1c3)]);let _0x4229eb={'status':_0x5db24e(0x11b),'details':'','lastCheck':0x0};try{_0x4229eb[_0x5db24e(0x243)]=(await this['getStateAsync'](LTM_DP_DRIFT_STATUS))[_0x5db24e(0x10a)],_0x4229eb[_0x5db24e(0x207)]=(await this[_0x5db24e(0x214)](LTM_DP_DRIFT_DETAILS))[_0x5db24e(0x10a)],_0x4229eb[_0x5db24e(0x171)]=(await this[_0x5db24e(0x214)](LTM_DP_DRIFT_LAST_CHECK))[_0x5db24e(0x10a)];}catch(_0x4874fb){}const _0x7c6d71=this['analysisHistory']||[];this[_0x5db24e(0x230)](_0x2c2fb9['from'],_0x2c2fb9[_0x5db24e(0x1d7)],{'success':!![],'isPro':!![],'dailyDigests':this[_0x5db24e(0x108)],'driftAnalysis':_0x4229eb,'analysisHistory':_0x7c6d71},_0x2c2fb9[_0x5db24e(0x1c3)]);}else{if(_0x2c2fb9[_0x5db24e(0x1d7)]==='getOverviewData'){const _0x12d9ed=this[_0x5db24e(0x108)][_0x5db24e(0x244)],_0x5d4663=new Date(),_0x3ec54c=new Date(_0x5d4663[_0x5db24e(0x1d4)](),_0x5d4663[_0x5db24e(0x26f)](),_0x5d4663[_0x5db24e(0x1f9)]())[_0x5db24e(0x279)](),_0x1c9a27=this[_0x5db24e(0x137)][_0x5db24e(0x23d)](_0x24ebc4=>new Date(_0x24ebc4[_0x5db24e(0x129)])[_0x5db24e(0x279)]()>_0x3ec54c)[_0x5db24e(0x244)],_0x41f72b=new Array(0x18)[_0x5db24e(0x27f)](0x0);this[_0x5db24e(0x137)][_0x5db24e(0x1de)](_0x333930=>{const _0x1f5b17=_0x5db24e,_0x6a09f=new Date(_0x333930[_0x1f5b17(0x129)]);if(_0x6a09f[_0x1f5b17(0x279)]()>_0x3ec54c)_0x41f72b[_0x6a09f[_0x1f5b17(0x1bd)]()]++;});let _0x59e9e6={'status':_0x5db24e(0x11b)};try{_0x59e9e6[_0x5db24e(0x243)]=(await this[_0x5db24e(0x214)](LTM_DP_DRIFT_STATUS))[_0x5db24e(0x10a)];}catch(_0x1cc0a2){}let _0x3783e3='';try{const _0x5023ff=await this[_0x5db24e(0x214)](_0x5db24e(0xff));_0x3783e3=_0x5023ff?_0x5023ff[_0x5db24e(0x10a)]:'';}catch(_0x199c10){}let _0x26cf20=null;!this['geminiModel']&&(_0x26cf20=this[_0x5db24e(0x2b1)][_0x5db24e(0x1a2)]?_0x5db24e(0x1ad):_0x5db24e(0x251));let _0x304496={'detected':![],'description':'','targetId':'','targetValue':'','autoApply':![]};try{const _0x381d39=await this[_0x5db24e(0x214)](_0x5db24e(0x16c)),_0x2c2fa4=await this[_0x5db24e(0x214)](_0x5db24e(0x289)),_0x3bf7fb=await this[_0x5db24e(0x214)](_0x5db24e(0x193)),_0x4c1228=await this[_0x5db24e(0x214)](_0x5db24e(0xf9)),_0x1d8674=await this[_0x5db24e(0x214)](_0x5db24e(0x128));_0x381d39&&_0x381d39[_0x5db24e(0x10a)]&&(_0x304496['detected']=!![],_0x304496[_0x5db24e(0x1e9)]=_0x2c2fa4?_0x2c2fa4['val']:'',_0x304496[_0x5db24e(0xf2)]=_0x3bf7fb?_0x3bf7fb[_0x5db24e(0x10a)]:'',_0x304496[_0x5db24e(0x1ae)]=_0x4c1228?_0x4c1228[_0x5db24e(0x10a)]:''),_0x304496[_0x5db24e(0x235)]=_0x1d8674?!!_0x1d8674[_0x5db24e(0x10a)]:![];}catch(_0xc4f584){}this[_0x5db24e(0x230)](_0x2c2fb9[_0x5db24e(0x27d)],_0x2c2fb9[_0x5db24e(0x1d7)],{'success':!![],'eventHistory':this['eventHistory'][_0x5db24e(0x19a)](0x0,0xf),'stats':{'digestCount':_0x12d9ed,'eventCountToday':_0x1c9a27,'hourlyActivity':_0x41f72b,'driftStatus':_0x59e9e6[_0x5db24e(0x243)],'isPresent':this[_0x5db24e(0x254)],'presenceWho':_0x3783e3,'minDays':this[_0x5db24e(0x2b1)][_0x5db24e(0x282)]||0x7,'stbDays':this[_0x5db24e(0x2b1)][_0x5db24e(0x163)]||0xe,'ltbDays':this[_0x5db24e(0x2b1)]['ltmLtbWindowDays']||0x3c,'systemError':_0x26cf20},'automation':_0x304496},_0x2c2fb9[_0x5db24e(0x1c3)]);}else{if(_0x2c2fb9[_0x5db24e(0x1d7)]===_0x5db24e(0xc1)){const _0x10d2cd=await this[_0x5db24e(0x197)](_0x5db24e(0xc5),'enum'),_0x369f3a=[];if(_0x10d2cd)for(const _0x4d7ab9 in _0x10d2cd){const _0x1f7ec5=_0x10d2cd[_0x4d7ab9],_0x451ac5=(_0x1f7ec5[_0x5db24e(0x272)]&&typeof _0x1f7ec5[_0x5db24e(0x272)][_0x5db24e(0x140)]==='object'?_0x1f7ec5['common'][_0x5db24e(0x140)]['de']:_0x1f7ec5[_0x5db24e(0x272)][_0x5db24e(0x140)])||_0x1f7ec5[_0x5db24e(0x272)][_0x5db24e(0x140)];_0x369f3a['push']({'id':_0x4d7ab9,'name':_0x451ac5});}this[_0x5db24e(0x230)](_0x2c2fb9['from'],_0x2c2fb9[_0x5db24e(0x1d7)],{'success':!![],'enums':_0x369f3a},_0x2c2fb9[_0x5db24e(0x1c3)]);}else{if(_0x2c2fb9[_0x5db24e(0x1d7)]===_0x5db24e(0xd7))try{const _0x29c2fe=await scanForDevices(this,_0x2c2fb9[_0x5db24e(0x2a6)]||{});this['sendTo'](_0x2c2fb9[_0x5db24e(0x27d)],_0x2c2fb9['command'],{'success':!![],'devices':_0x29c2fe},_0x2c2fb9[_0x5db24e(0x1c3)]);}catch(_0x1fc9b4){this[_0x5db24e(0x230)](_0x2c2fb9['from'],_0x2c2fb9['command'],{'success':![],'error':_0x1fc9b4[_0x5db24e(0x2a6)]},_0x2c2fb9[_0x5db24e(0x1c3)]);}else{if(_0x2c2fb9[_0x5db24e(0x1d7)]==='getCalendarNames'){const _0x540abf=_0x2c2fb9[_0x5db24e(0x2a6)]['instance'];if(!_0x540abf)return this[_0x5db24e(0x230)](_0x2c2fb9[_0x5db24e(0x27d)],_0x2c2fb9[_0x5db24e(0x1d7)],{'success':![],'error':_0x5db24e(0xf7)},_0x2c2fb9[_0x5db24e(0x1c3)]);const _0x555311=await getCalendarNames(this,_0x540abf);this[_0x5db24e(0x230)](_0x2c2fb9['from'],_0x2c2fb9[_0x5db24e(0x1d7)],{'success':!![],'names':_0x555311},_0x2c2fb9[_0x5db24e(0x1c3)]);}else{if(_0x2c2fb9[_0x5db24e(0x1d7)]===_0x5db24e(0x1e7)){const {targetId:_0x53feaa,targetValue:_0x55c6e4}=_0x2c2fb9[_0x5db24e(0x2a6)];this[_0x5db24e(0x294)]['info']('üß™\x20Simulating\x20Butler\x20Proposal:\x20'+_0x53feaa+'\x20=\x20'+_0x55c6e4),await this[_0x5db24e(0x202)](_0x5db24e(0x16c),{'val':!![],'ack':!![]}),await this[_0x5db24e(0x202)](_0x5db24e(0x289),{'val':'SIMULATION:\x20Test-Vorschlag\x20f√ºr\x20'+_0x53feaa,'ack':!![]}),await this['setStateAsync'](_0x5db24e(0x193),{'val':_0x53feaa,'ack':!![]}),await this[_0x5db24e(0x202)]('analysis.automation.targetValue',{'val':_0x55c6e4,'ack':!![]}),this[_0x5db24e(0x230)](_0x2c2fb9['from'],_0x2c2fb9[_0x5db24e(0x1d7)],{'success':!![]},_0x2c2fb9[_0x5db24e(0x1c3)]);}else{if(_0x2c2fb9[_0x5db24e(0x1d7)]===_0x5db24e(0x173)){const {historyId:_0x179492,rating:_0x466076,comment:_0x1ec54c,alertReason:_0x361076}=_0x2c2fb9[_0x5db24e(0x2a6)];_0x179492&&_0x466076?(await saveFeedback(this,{'timestamp':Date['now'](),'historyId':_0x179492,'rating':_0x466076,'comment':_0x1ec54c,'alertReason':_0x361076}),this['sendTo'](_0x2c2fb9[_0x5db24e(0x27d)],_0x2c2fb9[_0x5db24e(0x1d7)],{'success':!![]},_0x2c2fb9[_0x5db24e(0x1c3)])):this['sendTo'](_0x2c2fb9[_0x5db24e(0x27d)],_0x2c2fb9[_0x5db24e(0x1d7)],{'success':![],'error':'Missing\x20data'},_0x2c2fb9[_0x5db24e(0x1c3)]);}else _0x2c2fb9[_0x5db24e(0x1d7)]===_0x5db24e(0x178)&&(this[_0x5db24e(0x294)][_0x5db24e(0x19c)](_0x5db24e(0x11d)),await this[_0x5db24e(0x202)](_0x5db24e(0x16c),{'val':![],'ack':!![]}),await this['setStateAsync'](_0x5db24e(0x289),{'val':'','ack':!![]}),this[_0x5db24e(0x230)](_0x2c2fb9[_0x5db24e(0x27d)],_0x2c2fb9['command'],{'success':!![]},_0x2c2fb9['callback']));}}}}}}}}}catch(_0x16dbd1){this[_0x5db24e(0x294)][_0x5db24e(0x1c6)]('Error\x20in\x20onMessage\x20command\x20'+_0x2c2fb9[_0x5db24e(0x1d7)]+':\x20'+_0x16dbd1[_0x5db24e(0x2a6)]);if(_0x2c2fb9[_0x5db24e(0x1c3)])this[_0x5db24e(0x230)](_0x2c2fb9[_0x5db24e(0x27d)],_0x2c2fb9[_0x5db24e(0x1d7)],{'success':![],'error':_0x16dbd1['message']},_0x2c2fb9[_0x5db24e(0x1c3)]);}}}if(require[a0_0x7bdfd(0xf1)]!==module)module['exports']=_0x3acf38=>new CogniLiving(_0x3acf38);else new CogniLiving();