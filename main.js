const a0_0x5aa3b1=a0_0x4ae9;(function(_0x53f159,_0x2deff4){const _0x432b16=a0_0x4ae9,_0x310bcf=_0x53f159();while(!![]){try{const _0x15b93e=-parseInt(_0x432b16(0x14c))/0x1*(-parseInt(_0x432b16(0x138))/0x2)+parseInt(_0x432b16(0x165))/0x3*(parseInt(_0x432b16(0xed))/0x4)+parseInt(_0x432b16(0x17a))/0x5*(-parseInt(_0x432b16(0xea))/0x6)+-parseInt(_0x432b16(0x114))/0x7+-parseInt(_0x432b16(0x111))/0x8*(parseInt(_0x432b16(0x15b))/0x9)+parseInt(_0x432b16(0xfc))/0xa+parseInt(_0x432b16(0x122))/0xb;if(_0x15b93e===_0x2deff4)break;else _0x310bcf['push'](_0x310bcf['shift']());}catch(_0x3c5881){_0x310bcf['push'](_0x310bcf['shift']());}}}(a0_0x593e,0x6df66));const a0_0x28efb2=(function(){let _0x7100ca=!![];return function(_0x951805,_0x7b8046){const _0x3526c1=_0x7100ca?function(){const _0x218076=a0_0x4ae9;if(_0x7b8046){const _0x5f2a5b=_0x7b8046[_0x218076(0x135)](_0x951805,arguments);return _0x7b8046=null,_0x5f2a5b;}}:function(){};return _0x7100ca=![],_0x3526c1;};}()),a0_0x5a2bef=a0_0x28efb2(this,function(){const _0x3c1b1a=a0_0x4ae9;return a0_0x5a2bef[_0x3c1b1a(0xf6)]()[_0x3c1b1a(0x15f)](_0x3c1b1a(0x180))[_0x3c1b1a(0xf6)]()[_0x3c1b1a(0xf2)](a0_0x5a2bef)[_0x3c1b1a(0x15f)](_0x3c1b1a(0x180));});function a0_0x593e(){const _0x50c9f4=['version','processSensorEvent','enum','driftAnalysisTimer','Gemini\x20AI\x20initialized.','(((.+)+)+)+$','PREDICT_ENERGY','sendTo','initHistory','dependencyInstallInProgress','triggerGaitAnalysis','Activity-Level','stringify','LTM.dailyDigests','exitTimer','updated','ltmJob','analysis.training.triggerComfort','geminiModel','location','./lib/ai_agent','join','./lib/scheduler','runPythonHealthCheck','systemConfig','triggerEnergyPrediction','models/gemini-flash-latest','temperature','dailyDigests','notifyTelegramInstance','devices','val','ANALYZE_GAIT','Gemini\x20Init\x20Error:\x20','TRAIN_SECURITY','endsWith','LTM.rawEventLog','scanDevices','analysis.automation.autoApply','licenseKey','rawEventLog','3921294FReupB','ANALYZE_TREND','stateChange','4griEnI','bind','toLowerCase','.communicate.request','minDaysForBaseline','constructor','notifyTelegramEnabled','length','config','toString','log','checkWifiPresence','SYSTEM_DP_MODE','updateHealthVector','subscribeForeignStatesAsync','7636800shNdzG','isPresent','onMessage','info','@google/generative-ai','testApiKey','NORMAL','WiFi\x20Presence\x20detected.',')\x20-\x20Phase\x20C\x20(Refactored)','ðŸ•¸ï¸\x20Topology\x20Graph\x20manually\x20updated\x20by\x20user.','./lib/setup','getGenerativeModel','TRAIN_COMFORT','analysis.training.status','./lib/python_bridge','online','Adapter','presenceDevices','namespace','@iobroker/adapter-core','loadSystemMode','9688eDgrtt','getForeignObjectsAsync','onUnload','5181666VczMlY','LTM.triggerDailyDigest','onStateChange','ðŸ›‹ï¸\x20Triggering\x20Comfort\x20Analysis\x20(Pattern\x20Mining)...','scanForDevices','automation.triggerAction','analysis.topology.structure','./lib/scanner','genAI','push','onReady','now','analysis.triggerBriefing','ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...','4059594Wwoxqh','Aktiv\x20(','subscribeStates','system.mode','analysis.training.triggerSecurity','analysisInterval','SET_TOPOLOGY','createDailyDigest','common','./lib/topology','startSystem','Training\x20Error:\x20','eventHistory','stopService','sensorLastValues','includes','briefingJob','LTM.trainingData.sequences','createAllObjects','apply','VACATION','exitGraceTimer','402532ldThGQ','abortExitTimer','./lib/installer','cancel','analysisTimer','initZombies','parse','setupDriftAnalysisScheduler','.system.mode','isProVersion','matrix','command','Topology\x20Update\x20Error:\x20','triggerDailyDigest','object','currentSystemMode','geminiApiKey','send','getStateAsync','getHours','4dsjBSl','inactivityThresholdHours','checkAndInstall','ðŸ§ \x20Triggering\x20Security\x20Training...','isGracePeriodActive','pop','analysis.health.todayVector','enum.rooms.*','cogni-living','getEnums','message','setHours','name','floor','getTime','3528kBwrzU','debug','type','runAutopilot','search','sendMorningBriefing','modeResetJob','initSystemConfig','fill','callback','1143321mBkHxk','updateTopologyMatrix','timestamp','activityLevel','from','unload','LTM.baselineStatus','setState','ack','analysis.training.triggerTopology','analysis.trigger','ready','error','SYSTEM_MODES','enum.functions.*','find','setStateAsync','runGeminiAnalysis','exports','analysis.training.triggerHealth','setPresence','5EkEmiQ'];a0_0x593e=function(){return _0x50c9f4;};return a0_0x593e();}a0_0x5a2bef();function a0_0x4ae9(_0x41b3f9,_0xce9fdc){const _0x233bb1=a0_0x593e();return a0_0x4ae9=function(_0x5a2bef,_0x28efb2){_0x5a2bef=_0x5a2bef-0xc8;let _0x593e5b=_0x233bb1[_0x5a2bef];return _0x593e5b;},a0_0x4ae9(_0x41b3f9,_0xce9fdc);}'use strict';const utils=require(a0_0x5aa3b1(0x10f)),{GoogleGenerativeAI}=require(a0_0x5aa3b1(0x100)),installer=require(a0_0x5aa3b1(0x13a)),scanner=require(a0_0x5aa3b1(0x11b)),schedulers=require(a0_0x5aa3b1(0xd7)),topology=require(a0_0x5aa3b1(0x12b)),setup=require(a0_0x5aa3b1(0x106)),recorder=require('./lib/recorder'),pythonBridge=require(a0_0x5aa3b1(0x10a)),aiAgent=require(a0_0x5aa3b1(0xd5)),GEMINI_MODEL=a0_0x5aa3b1(0xdb),ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};class CogniLiving extends utils[a0_0x5aa3b1(0x10c)]{constructor(_0x34f4da){const _0x12a91b=a0_0x5aa3b1;super({..._0x34f4da,'name':_0x12a91b(0x154)}),this[_0x12a91b(0x12e)]=[],this['analysisHistory']=[],this['rawEventLog']=[],this[_0x12a91b(0xdd)]=[],this[_0x12a91b(0x130)]={},this[_0x12a91b(0xd9)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x12a91b(0xfd)]=!![],this[_0x12a91b(0xcf)]=null,this[_0x12a91b(0x137)]=null,this[_0x12a91b(0x150)]=![],this[_0x12a91b(0x11c)]=null,this[_0x12a91b(0xd3)]=null,this['currentSystemMode']=setup[_0x12a91b(0x172)]['NORMAL'],this['isProVersion']=![],this['lastAlertState']=![],this[_0x12a91b(0x13c)]=null,this['ltmJob']=null,this[_0x12a91b(0x161)]=null,this[_0x12a91b(0x17e)]=null,this[_0x12a91b(0x132)]=null,this['dependencyInstallInProgress']=![],this['on'](_0x12a91b(0x170),this[_0x12a91b(0x11e)]['bind'](this)),this['on'](_0x12a91b(0xec),this['onStateChange'][_0x12a91b(0xee)](this)),this['on'](_0x12a91b(0x16a),this[_0x12a91b(0x113)][_0x12a91b(0xee)](this)),this['on']('message',this['onMessage'][_0x12a91b(0xee)](this));}async[a0_0x5aa3b1(0x11e)](){const _0x5edaa4=a0_0x5aa3b1;this['log']['info']('cogni-living\x20adapter\x20starting\x20(v'+this[_0x5edaa4(0x17b)]+_0x5edaa4(0x104));if(!installer[_0x5edaa4(0x14e)](this,()=>this['startSystem']()))return;}async[a0_0x5aa3b1(0x12c)](){const _0xdee250=a0_0x5aa3b1;await setup[_0xdee250(0x13d)](this);try{this[_0xdee250(0x141)]=await setup['checkLicense'](this[_0xdee250(0xf5)][_0xdee250(0xe8)]);}catch(_0x4a42e1){}if(!this[_0xdee250(0xf5)]['inactivityThresholdHours']||this['config'][_0xdee250(0x14d)]<0.1)this[_0xdee250(0xf5)][_0xdee250(0x14d)]=0xc;await setup[_0xdee250(0xc9)](this),await setup[_0xdee250(0x162)](this);if(this[_0xdee250(0xf5)]['geminiApiKey'])try{this[_0xdee250(0x11c)]=new GoogleGenerativeAI(this['config'][_0xdee250(0x148)]),this[_0xdee250(0xd3)]=this[_0xdee250(0x11c)][_0xdee250(0x107)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':'application/json'}}),this[_0xdee250(0xf7)][_0xdee250(0xff)](_0xdee250(0x17f));}catch(_0x185889){this[_0xdee250(0xf7)]['error'](_0xdee250(0xe2)+_0x185889[_0xdee250(0x156)]);}await setup[_0xdee250(0x134)](this),await this[_0xdee250(0x110)]();try{const _0x404dbc=await this[_0xdee250(0x14a)](_0xdee250(0xe5));if(_0x404dbc&&_0x404dbc[_0xdee250(0xe0)])this['rawEventLog']=JSON['parse'](_0x404dbc[_0xdee250(0xe0)]);}catch(_0x168b4d){this['rawEventLog']=[];}try{const _0x108b82=await this[_0xdee250(0x14a)]('LTM.dailyDigests');if(_0x108b82&&_0x108b82['val'])this[_0xdee250(0xdd)]=JSON[_0xdee250(0x13e)](_0x108b82[_0xdee250(0xe0)]);}catch(_0x274440){this[_0xdee250(0xdd)]=[];}const _0x16b98a=this[_0xdee250(0xdd)][_0xdee250(0xf4)]>=(this[_0xdee250(0xf5)][_0xdee250(0xf1)]||0x7)?_0xdee250(0x123)+this['dailyDigests'][_0xdee250(0xf4)]+'\x20Tage)':'Lernphase\x20('+this[_0xdee250(0xdd)][_0xdee250(0xf4)]+'/'+(this[_0xdee250(0xf5)]['minDaysForBaseline']||0x7)+')';await this[_0xdee250(0x175)](_0xdee250(0x16b),{'val':_0x16b98a,'ack':!![]}),this[_0xdee250(0x124)](_0xdee250(0x16f)),this[_0xdee250(0x124)](_0xdee250(0x115)),this[_0xdee250(0x124)](_0xdee250(0x125)),this[_0xdee250(0x124)](_0xdee250(0x120)),this[_0xdee250(0x124)]('analysis.automation.triggerAction'),this['subscribeStates'](_0xdee250(0xe7)),this['subscribeStates'](_0xdee250(0x126)),this[_0xdee250(0x124)](_0xdee250(0x178)),this[_0xdee250(0x124)]('analysis.training.triggerEnergy'),this['subscribeStates'](_0xdee250(0xd2)),this['subscribeStates'](_0xdee250(0x16e));const _0x33ebbb=this[_0xdee250(0xf5)][_0xdee250(0xdf)];if(_0x33ebbb)for(const _0x3f1c4f of _0x33ebbb){await this[_0xdee250(0xfb)](_0x3f1c4f['id']);}const _0x54919f=this[_0xdee250(0xf5)]['presenceDevices'];if(_0x54919f)for(const _0x2129ae of _0x54919f){await this[_0xdee250(0xfb)](_0x2129ae);}if(this[_0xdee250(0xf5)][_0xdee250(0xf3)]&&this[_0xdee250(0xf5)][_0xdee250(0xde)])await this['subscribeForeignStatesAsync'](this[_0xdee250(0xf5)][_0xdee250(0xde)]+_0xdee250(0xf0));setTimeout(()=>this[_0xdee250(0xf8)](),0x1388);if(this['analysisTimer'])clearInterval(this[_0xdee250(0x13c)]);const _0x2a2ccd=this[_0xdee250(0xf5)][_0xdee250(0x127)]||0xf;_0x2a2ccd>0x0&&(this[_0xdee250(0x13c)]=setInterval(()=>{this['runAutopilot']();},_0x2a2ccd*0x3c*0x3e8)),schedulers['setupLtmScheduler'](this,()=>aiAgent['createDailyDigest'](this,pythonBridge)),schedulers['setupModeResetScheduler'](this),schedulers[_0xdee250(0x13f)](this,()=>aiAgent['runBaselineDriftAnalysis'](this)),schedulers['setupBriefingScheduler'](this,()=>aiAgent[_0xdee250(0x160)](this)),pythonBridge['startService'](this,installer['PYTHON_EXE']),setTimeout(async()=>{const _0xe5460=_0xdee250;await topology['updateTopology'](this);try{const _0x47160b=await this[_0xe5460(0x14a)](_0xe5460(0x11a));if(_0x47160b&&_0x47160b[_0xe5460(0xe0)])pythonBridge['send'](this,_0xe5460(0x128),JSON[_0xe5460(0x13e)](_0x47160b[_0xe5460(0xe0)]));}catch(_0x2b0a6d){}this[_0xe5460(0xd8)](),this[_0xe5460(0xcb)](),this[_0xe5460(0xda)](),this[_0xe5460(0xfa)]();},0x1388);}[a0_0x5aa3b1(0x113)](_0x1b7e01){const _0x3538a9=a0_0x5aa3b1;if(this[_0x3538a9(0x13c)])clearInterval(this['analysisTimer']);if(this[_0x3538a9(0x17e)])clearInterval(this[_0x3538a9(0x17e)]);if(this[_0x3538a9(0xd1)])this[_0x3538a9(0xd1)][_0x3538a9(0x13b)]();if(this[_0x3538a9(0x161)])this[_0x3538a9(0x161)]['cancel']();if(this['briefingJob'])this[_0x3538a9(0x132)][_0x3538a9(0x13b)]();recorder['abortExitTimer'](this),pythonBridge[_0x3538a9(0x12f)](this),_0x1b7e01();}async[a0_0x5aa3b1(0x116)](_0x1daa32,_0x206a97){const _0x6e5bf=a0_0x5aa3b1;if(!_0x206a97||this[_0x6e5bf(0xca)])return;if(_0x1daa32['includes']('telegram')&&_0x1daa32[_0x6e5bf(0xe4)]('communicate.request')&&_0x206a97['val'])return;if(_0x1daa32===this[_0x6e5bf(0x10e)]+_0x6e5bf(0x140)){if(_0x206a97[_0x6e5bf(0xe0)]&&Object['values'](setup[_0x6e5bf(0x172)])[_0x6e5bf(0x131)](_0x206a97[_0x6e5bf(0xe0)])){this['currentSystemMode']=_0x206a97[_0x6e5bf(0xe0)];if(_0x206a97['val']===setup[_0x6e5bf(0x172)][_0x6e5bf(0x136)])await recorder[_0x6e5bf(0x179)](this,![]);else await recorder[_0x6e5bf(0x179)](this,!![]);}if(!_0x206a97[_0x6e5bf(0x16d)])this['setState'](_0x1daa32,{'val':this[_0x6e5bf(0x147)],'ack':!![]});return;}if(!_0x206a97[_0x6e5bf(0x16d)]){_0x1daa32[_0x6e5bf(0x131)](_0x6e5bf(0x16f))&&_0x206a97[_0x6e5bf(0xe0)]&&(this[_0x6e5bf(0x16c)](_0x1daa32,{'val':![],'ack':!![]}),aiAgent[_0x6e5bf(0x176)](this));if(_0x1daa32['includes'](_0x6e5bf(0x145))&&_0x206a97[_0x6e5bf(0xe0)]){this[_0x6e5bf(0x16c)](_0x1daa32,{'val':![],'ack':!![]});if(this['isProVersion'])aiAgent[_0x6e5bf(0x129)](this,pythonBridge);}_0x1daa32[_0x6e5bf(0x131)]('triggerBriefing')&&_0x206a97[_0x6e5bf(0xe0)]&&(this[_0x6e5bf(0x16c)](_0x1daa32,{'val':![],'ack':!![]}),aiAgent['sendMorningBriefing'](this));_0x1daa32[_0x6e5bf(0x131)](_0x6e5bf(0x119))&&_0x206a97[_0x6e5bf(0xe0)]&&(this[_0x6e5bf(0x16c)](_0x1daa32,{'val':![],'ack':!![]}),aiAgent['executeAutomationAction'](this));if(_0x1daa32[_0x6e5bf(0x131)]('analysis.training.triggerSecurity')&&_0x206a97[_0x6e5bf(0xe0)]){this['setState'](_0x1daa32,{'val':![],'ack':!![]});if(this[_0x6e5bf(0x141)])try{const _0x54b8ef=await this[_0x6e5bf(0x14a)](_0x6e5bf(0x133));if(_0x54b8ef&&_0x54b8ef[_0x6e5bf(0xe0)]){const _0xd76f2=JSON['parse'](_0x54b8ef[_0x6e5bf(0xe0)]);this[_0x6e5bf(0xf7)][_0x6e5bf(0xff)](_0x6e5bf(0x14f)),this[_0x6e5bf(0x175)](_0x6e5bf(0x109),{'val':'Sec-Training\x20started...','ack':!![]}),pythonBridge[_0x6e5bf(0x149)](this,_0x6e5bf(0xe3),{'sequences':_0xd76f2});}}catch(_0x64f58c){this['log'][_0x6e5bf(0x171)](_0x6e5bf(0x12d)+_0x64f58c[_0x6e5bf(0x156)]);}}if(_0x1daa32[_0x6e5bf(0x131)]('analysis.training.triggerHealth')&&_0x206a97[_0x6e5bf(0xe0)]){this[_0x6e5bf(0x16c)](_0x1daa32,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x1fcfdf=await this[_0x6e5bf(0x14a)](_0x6e5bf(0xce));if(_0x1fcfdf&&_0x1fcfdf['val'])pythonBridge[_0x6e5bf(0x149)](this,'TRAIN_HEALTH',{'digests':JSON[_0x6e5bf(0x13e)](_0x1fcfdf[_0x6e5bf(0xe0)])});}catch(_0x62fef1){}}if(_0x1daa32[_0x6e5bf(0x131)]('analysis.training.triggerEnergy')&&_0x206a97[_0x6e5bf(0xe0)]){this[_0x6e5bf(0x16c)](_0x1daa32,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x594351=await this[_0x6e5bf(0x14a)]('LTM.trainingData.thermodynamics');if(_0x594351&&_0x594351[_0x6e5bf(0xe0)])pythonBridge[_0x6e5bf(0x149)](this,'TRAIN_ENERGY',{'points':JSON[_0x6e5bf(0x13e)](_0x594351[_0x6e5bf(0xe0)])});}catch(_0x35006c){}}if(_0x1daa32[_0x6e5bf(0x131)]('analysis.training.triggerComfort')&&_0x206a97[_0x6e5bf(0xe0)]){this[_0x6e5bf(0x16c)](_0x1daa32,{'val':![],'ack':!![]});if(this[_0x6e5bf(0x141)])try{const _0x64edd7=await this[_0x6e5bf(0x14a)]('LTM.rawEventLog');_0x64edd7&&_0x64edd7['val']&&(this[_0x6e5bf(0xf7)]['info'](_0x6e5bf(0x117)),pythonBridge[_0x6e5bf(0x149)](this,_0x6e5bf(0x108),{'events':JSON[_0x6e5bf(0x13e)](_0x64edd7[_0x6e5bf(0xe0)])}));}catch(_0x4d18fc){}}_0x1daa32[_0x6e5bf(0x131)](_0x6e5bf(0x16e))&&_0x206a97['val']&&(this[_0x6e5bf(0x16c)](_0x1daa32,{'val':![],'ack':!![]}),this[_0x6e5bf(0xf7)]['info']('ðŸ•¸ï¸\x20Manually\x20triggering\x20Topology\x20Update...'),topology['updateTopology'](this));return;}if(this[_0x6e5bf(0xf5)]['presenceDevices']&&this['config'][_0x6e5bf(0x10d)]['includes'](_0x1daa32)){await this[_0x6e5bf(0xf8)]();return;}const _0x27583e=(this[_0x6e5bf(0xf5)][_0x6e5bf(0xdf)]||[])[_0x6e5bf(0x174)](_0x2d019e=>_0x2d019e['id']===_0x1daa32);if(_0x27583e)recorder[_0x6e5bf(0x17c)](this,_0x1daa32,_0x206a97,_0x27583e);}async[a0_0x5aa3b1(0xfe)](_0x342fd6){const _0x5d7e32=a0_0x5aa3b1;if(typeof _0x342fd6==='object'&&_0x342fd6['message']){if(_0x342fd6[_0x5d7e32(0x143)]===_0x5d7e32(0x101)){}else{if(_0x342fd6[_0x5d7e32(0x143)]===_0x5d7e32(0xe6))try{const _0x5c8dc4=await scanner[_0x5d7e32(0x118)](this,_0x342fd6[_0x5d7e32(0x156)]||{});this[_0x5d7e32(0xc8)](_0x342fd6['from'],_0x342fd6[_0x5d7e32(0x143)],{'success':!![],'devices':_0x5c8dc4},_0x342fd6[_0x5d7e32(0x164)]);}catch(_0x32d75e){this[_0x5d7e32(0xc8)](_0x342fd6[_0x5d7e32(0x169)],_0x342fd6['command'],{'success':![],'error':_0x32d75e[_0x5d7e32(0x156)]},_0x342fd6[_0x5d7e32(0x164)]);}else{if(_0x342fd6[_0x5d7e32(0x143)]===_0x5d7e32(0x166)){const {matrix:_0x2b2afd}=_0x342fd6['message'];try{const _0x5bdaa1=await this[_0x5d7e32(0x14a)](_0x5d7e32(0x11a));if(_0x5bdaa1&&_0x5bdaa1[_0x5d7e32(0xe0)]){const _0x3db2d0=JSON[_0x5d7e32(0x13e)](_0x5bdaa1[_0x5d7e32(0xe0)]);_0x3db2d0[_0x5d7e32(0x142)]=_0x2b2afd,_0x3db2d0[_0x5d7e32(0xd0)]=Date[_0x5d7e32(0x11f)](),await this['setStateAsync'](_0x5d7e32(0x11a),{'val':JSON[_0x5d7e32(0xcd)](_0x3db2d0),'ack':!![]}),this[_0x5d7e32(0xf7)][_0x5d7e32(0xff)](_0x5d7e32(0x105)),pythonBridge[_0x5d7e32(0x149)](this,_0x5d7e32(0x128),_0x3db2d0);}this[_0x5d7e32(0xc8)](_0x342fd6[_0x5d7e32(0x169)],_0x342fd6['command'],{'success':!![]},_0x342fd6[_0x5d7e32(0x164)]);}catch(_0x4c61eb){this[_0x5d7e32(0xf7)][_0x5d7e32(0x171)](_0x5d7e32(0x144)+_0x4c61eb['message']);}}else{if(_0x342fd6[_0x5d7e32(0x143)]==='getOverviewData'){const _0x2e4179=this[_0x5d7e32(0xdd)][_0x5d7e32(0xf4)];this['sendTo'](_0x342fd6[_0x5d7e32(0x169)],_0x342fd6[_0x5d7e32(0x143)],{'success':!![],'eventHistory':this[_0x5d7e32(0x12e)]['slice'](0x0,0xf),'stats':{'digestCount':_0x2e4179,'isPresent':this['isPresent']}},_0x342fd6[_0x5d7e32(0x164)]);}else{if(_0x342fd6[_0x5d7e32(0x143)]===_0x5d7e32(0x155)){const _0x1ae37b=await this['getForeignObjectsAsync'](_0x5d7e32(0x173),_0x5d7e32(0x17d)),_0x5c9d12=[];if(_0x1ae37b)for(const _0x33def6 in _0x1ae37b){const _0x1fbb38=_0x1ae37b[_0x33def6],_0x440b61=(_0x1fbb38[_0x5d7e32(0x12a)]&&typeof _0x1fbb38[_0x5d7e32(0x12a)][_0x5d7e32(0x158)]===_0x5d7e32(0x146)?_0x1fbb38[_0x5d7e32(0x12a)]['name']['de']:_0x1fbb38[_0x5d7e32(0x12a)]['name'])||_0x1fbb38[_0x5d7e32(0x12a)][_0x5d7e32(0x158)];_0x5c9d12[_0x5d7e32(0x11d)]({'id':_0x33def6,'name':_0x440b61});}const _0x27151b=await this[_0x5d7e32(0x112)](_0x5d7e32(0x153),_0x5d7e32(0x17d)),_0x436045=[];if(_0x27151b)for(const _0x43be47 in _0x27151b){const _0x5f1360=_0x27151b[_0x43be47],_0x5d58bf=(_0x5f1360[_0x5d7e32(0x12a)]&&typeof _0x5f1360[_0x5d7e32(0x12a)]['name']===_0x5d7e32(0x146)?_0x5f1360[_0x5d7e32(0x12a)]['name']['de']:_0x5f1360[_0x5d7e32(0x12a)][_0x5d7e32(0x158)])||_0x43be47['split']('.')[_0x5d7e32(0x151)]();_0x436045[_0x5d7e32(0x11d)](_0x5d58bf);}this[_0x5d7e32(0xc8)](_0x342fd6['from'],_0x342fd6[_0x5d7e32(0x143)],{'success':!![],'enums':_0x5c9d12,'rooms':_0x436045},_0x342fd6[_0x5d7e32(0x164)]);}}}}}}}async[a0_0x5aa3b1(0x110)](){const _0x14073b=a0_0x5aa3b1;try{const _0x5279ae=await this[_0x14073b(0x14a)](setup[_0x14073b(0xf9)]);_0x5279ae&&_0x5279ae['val']&&Object['values'](setup['SYSTEM_MODES'])['includes'](_0x5279ae[_0x14073b(0xe0)])?this[_0x14073b(0x147)]=_0x5279ae[_0x14073b(0xe0)]:(this[_0x14073b(0x147)]=setup[_0x14073b(0x172)][_0x14073b(0x102)],await this[_0x14073b(0x175)](setup[_0x14073b(0xf9)],{'val':setup[_0x14073b(0x172)][_0x14073b(0x102)],'ack':!![]}));}catch(_0x4b2811){this[_0x14073b(0x147)]=setup[_0x14073b(0x172)]['NORMAL'];}}async[a0_0x5aa3b1(0xf8)](){const _0x25d33d=a0_0x5aa3b1;try{const _0x303ece=this['config']['presenceDevices']||[];let _0x701acf=![];const _0x1a1bdb=[];for(const _0x2b36a3 of _0x303ece){try{const _0x31c6a3=await this['getForeignStateAsync'](_0x2b36a3);_0x31c6a3&&(_0x31c6a3['val']===!![]||_0x31c6a3[_0x25d33d(0xe0)]===_0x25d33d(0x10b)||_0x31c6a3['val']===0x1)&&(_0x701acf=!![],_0x1a1bdb[_0x25d33d(0x11d)](_0x2b36a3));}catch(_0x2d7162){}}return await this['setStateAsync']('system.presenceWho',{'val':_0x1a1bdb[_0x25d33d(0xd6)](',\x20'),'ack':!![]}),_0x701acf&&(this[_0x25d33d(0xcf)]&&(this['log'][_0x25d33d(0xff)](_0x25d33d(0x103)),recorder[_0x25d33d(0x139)](this)),!this['isPresent']&&this[_0x25d33d(0x147)]===setup[_0x25d33d(0x172)][_0x25d33d(0x102)]&&await recorder['setPresence'](this,!![])),_0x701acf;}catch(_0x1dc72c){return![];}}async[a0_0x5aa3b1(0x15e)](){const _0x2d19a7=a0_0x5aa3b1;this['log'][_0x2d19a7(0x15c)](_0x2d19a7(0x121)),await aiAgent['runGeminiAnalysis'](this),this[_0x2d19a7(0xfa)](),this[_0x2d19a7(0xcb)](),this['triggerEnergyPrediction']();}[a0_0x5aa3b1(0xcb)](){const _0x37e731=a0_0x5aa3b1;if(!this['isProVersion'])return;try{this['getState'](_0x37e731(0x133),(_0x8e6ffd,_0x1f6c4c)=>{const _0x515646=_0x37e731;_0x1f6c4c&&_0x1f6c4c[_0x515646(0xe0)]&&pythonBridge[_0x515646(0x149)](this,_0x515646(0xe1),{'sequences':JSON[_0x515646(0x13e)](_0x1f6c4c[_0x515646(0xe0)])});});}catch(_0x149ca4){}}async[a0_0x5aa3b1(0xda)](){const _0x1eefb3=a0_0x5aa3b1;if(!this['isProVersion'])return;try{const _0x3182ae=await recorder['getOutsideTemperatureNumeric'](this);if(_0x3182ae===null)return;const _0x129a40={},_0x24da43=this[_0x1eefb3(0xf5)][_0x1eefb3(0xdf)]||[];for(const _0x2104d8 of _0x24da43){if(_0x2104d8[_0x1eefb3(0x15d)]===_0x1eefb3(0xdc)&&_0x2104d8[_0x1eefb3(0xd4)]){const _0x156f69=this[_0x1eefb3(0x130)][_0x2104d8['id']];if(_0x156f69!==undefined)_0x129a40[_0x2104d8[_0x1eefb3(0xd4)]]=_0x156f69;}}Object['keys'](_0x129a40)['length']>0x0&&pythonBridge[_0x1eefb3(0x149)](this,_0x1eefb3(0x181),{'current_temps':_0x129a40,'t_out':_0x3182ae});}catch(_0x4fae8a){}}[a0_0x5aa3b1(0xfa)](){const _0x19d279=a0_0x5aa3b1;if(!this[_0x19d279(0xe9)]||this[_0x19d279(0xe9)][_0x19d279(0xf4)]===0x0)return;const _0x55a150=new Array(0x60)[_0x19d279(0x163)](0x0),_0x543b4d=new Date()[_0x19d279(0x157)](0x0,0x0,0x0,0x0);this[_0x19d279(0xe9)]['forEach'](_0x7991e4=>{const _0x4e262e=_0x19d279,_0x95f11e=new Date(_0x7991e4[_0x4e262e(0x167)]);if(_0x95f11e[_0x4e262e(0x15a)]()>=_0x543b4d){const _0x2a2450=_0x95f11e[_0x4e262e(0x14b)](),_0x23551e=_0x95f11e['getMinutes'](),_0x25ffe8=_0x2a2450*0x4+Math[_0x4e262e(0x159)](_0x23551e/0xf);if(_0x25ffe8>=0x0&&_0x25ffe8<0x60)_0x55a150[_0x25ffe8]++;}}),this[_0x19d279(0x175)](_0x19d279(0x152),{'val':JSON[_0x19d279(0xcd)](_0x55a150),'ack':!![]});}[a0_0x5aa3b1(0xd8)](){const _0x68617c=a0_0x5aa3b1;if(!this[_0x68617c(0xdd)]||this['dailyDigests'][_0x68617c(0xf4)]<0x2)return;const _0x538039=this[_0x68617c(0xdd)]['map'](_0x1236e5=>{const _0x3d79f9=_0x68617c,_0x126cc7=(_0x1236e5[_0x3d79f9(0x168)]||'')[_0x3d79f9(0xef)]();return ACTIVITY_LEVEL_MAP[_0x126cc7]||0x32;});pythonBridge[_0x68617c(0x149)](this,_0x68617c(0xeb),{'values':_0x538039,'tag':_0x68617c(0xcc)});}}if(require['main']!==module)module[a0_0x5aa3b1(0x177)]=_0x5bdc25=>new CogniLiving(_0x5bdc25);else new CogniLiving();