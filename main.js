const a0_0x4c0f87=a0_0x1999;(function(_0x25bc97,_0x4a13b6){const _0x1fff91=a0_0x1999,_0x43496c=_0x25bc97();while(!![]){try{const _0x2a5893=parseInt(_0x1fff91(0x263))/0x1*(parseInt(_0x1fff91(0x33f))/0x2)+parseInt(_0x1fff91(0x288))/0x3*(parseInt(_0x1fff91(0x291))/0x4)+parseInt(_0x1fff91(0x20f))/0x5+-parseInt(_0x1fff91(0x255))/0x6+parseInt(_0x1fff91(0x2e0))/0x7*(parseInt(_0x1fff91(0x221))/0x8)+-parseInt(_0x1fff91(0x336))/0x9+-parseInt(_0x1fff91(0x31e))/0xa*(-parseInt(_0x1fff91(0x265))/0xb);if(_0x2a5893===_0x4a13b6)break;else _0x43496c['push'](_0x43496c['shift']());}catch(_0x4f384a){_0x43496c['push'](_0x43496c['shift']());}}}(a0_0x2735,0xac1c5));const a0_0x310fbc=(function(){let _0x55b63c=!![];return function(_0x5df4cf,_0x3101d5){const _0x222da8=_0x55b63c?function(){const _0x170fdc=a0_0x1999;if(_0x3101d5){const _0xc1e77d=_0x3101d5[_0x170fdc(0x1f9)](_0x5df4cf,arguments);return _0x3101d5=null,_0xc1e77d;}}:function(){};return _0x55b63c=![],_0x222da8;};}()),a0_0x55fe70=a0_0x310fbc(this,function(){const _0x369ff5=a0_0x1999;return a0_0x55fe70[_0x369ff5(0x2de)]()[_0x369ff5(0x1cb)](_0x369ff5(0x271))[_0x369ff5(0x2de)]()[_0x369ff5(0x2b8)](a0_0x55fe70)['search'](_0x369ff5(0x271));});a0_0x55fe70();'use strict';function a0_0x2735(){const _0x18bf90=['outdoorSensorId','moduleSecurity','\x20rooms)','calendarCheckTimer','SET_LEARNING_MODE','lastAlertState','reduce','rawEventLog','\x20(Bewohner\x20anwesend\x20-\x20normal)','./lib/automation','models/gemini-flash-latest','health','./lib/setup','now','ðŸ“¦\x20Restored\x20','./lib/python_bridge','\x20events\x20from\x20today...','PREDICT_ENERGY','Unknown','testContext','common','.venv','14861710lQurrX','startSystem','Kein\x20API\x20Key\x20Ã¼bergeben.','Sonne:\x20','Room\x20Dwell\x20Time\x20Stats','LTM.triggerDailyDigest','response','./lib/scanner','custom','startService','analysis.training.triggerEnergy','trackerHeartbeat','thermostat','getStateAsync','todayVector','sources','heiter','LTM.dailyDigests','replace','bin','Warte\x20auf\x20Analyse...','useCalendar','text','door','12421413IPKKLk','processSensorEvent','infrasoundSensorId','enum','Â°C)','presenceDevices','onReady','geminiModel','node-schedule','338fbkRZK','search','Gemini\x20Report\x20Day','Gemini\x20Report\x20Night','Keine\x20Daten','slice','No\x20data','ack','threshold_exceeded','analysis.activity.roomHistory','onMessage','forEach','includes','executeAutomationAction','sonn','replayTodayEvents','parse','find','telegram','isSolar','2-digit','warn','CALCULATE_HEALTH_TREND','isPresent','âœ…\x20Dashboard\x20Data\x20(Rooms\x20&\x20Timeline\x20&\x20Details)\x20restored.','isProVersion','LTM.baselineStatus','appendToLog','analysis.automation.patternDetected','window','loadSystemMode','Aktiv\x20(','ðŸ\x20Triggering\x20Python\x20Health\x20Check\x20(Activity\x20Trend)...','sendTo','analysis.health.todayRoomDetails','analysis.prediction.trackerConfidence','\x22history\x22:{}','pressureBuffer','analysis.automation.description','object','pulse','updateHealthVector','map','guest','split','val','enum.functions.*','apply','subscribeStates','exports','system.adapter.','debug','{\x22history\x22:{}}','toISOString','mkdirSync','getObjectViewAsync','analysis.trigger','runGeminiAnalysis','Party\x20Mode','setState','stringify','ðŸš¨\x20INFRASCHALL-ALARM:\x20Anomalie\x20bei\x20Abwesenheit\x20(scharf)!','59\x2023\x20*\x20*\x20*','error','Manual\x20Event','updateLocation','some','./lib/dead_man','times','1136765WmojPW','getCalendarNames','instance','accuweather.0','getTime','getMinutes','klar','toLocaleTimeString','utf8','weatherTempId','[PythonBridge]\x20Forwarding\x20command:\x20','initSystemConfig','analysis.training.triggerSecurity','timestamp','exitGraceTimer','LTM.rawEventLog','licenseKey','@iobroker/adapter-core','64bVeGxp','rows','endsWith','cogni-living','Gemini\x20Init\x20Error:\x20','state','inactivityThresholdHours','analysis.activity.roomStats','bind','max','sensorLastValues','devices','./lib/installer','analyzeWindowOpening','.data.table','unshift','number','ERROR',')\x20-\x20Phase\x20E\x20(Scheduler\x20Fix)','TRAIN_COMFORT','existsSync','de-DE','system','isRelevantActivity','from','ðŸ“\x20Manual\x20event\x20logged:\x20','events.history','analysis.health.todayVector','toFixed','cogni-living\x20adapter\x20starting\x20(v','info','VACATION','â˜€ï¸\x20Solar\x20Condition:\x20SUNNY\x20detected\x20via\x20','string','historyJob','setDate','\x20Tage)','currentSystemMode',',\x20Events:\x0a','checkSolarCondition','./lib/topology','triggerDailyDigest','all','Say\x20Hello','analysis.training.triggerTopology','calendarName','stateChange','value','moduleEnergy','join','eventHistory','checkThermostats','7584438VemDbd','getOverviewData','online','communicate.request','sendNotification','analysis.health.activityTrend','toLowerCase','handleInfrasound','add','[Integrator]\x20Error:\x20','send','modeResetJob','clear','triggerGaitAnalysis\x20parse\x20error:\x20','1495gGNHMs','ðŸ’¨\x20LÃ¼ftung\x20in\x20','11rANQdi','sunny','infrasoundLocked','analysisTimer','geminiApiKey','haustÃ¼r','getForeignStateAsync','energy','TRAIN_SECURITY','dependencyInstallInProgress','refreshCalendar\x20failed:\x20','getHours','(((.+)+)+)+$','system.adapter.ical.é¦™','lastTrackerEventTime','history','length','âœ…\x20History\x20saved:\x20','presenceCheckTimer','\x20>\x20','updateTopology','testApiKey','pop','application/json','analysis.automation.targetId','motion','checkLicense','...','setHours','comfort','stopService','ðŸš¶\x20Gait\x20Analysis\x20triggered\x20with\x20','pythonBridge\x20command\x20failed:\x20','checkWifiPresence','./lib/ai_agent','98856BDntvf','minDaysForBaseline','type','\x20-\x20','callback','system.adapter.ical.','system.presenceWho','analyzeWindowOpening\x20error:\x20','subscribeForeignStatesAsync','56BZLuAv','driftAnalysisTimer','filter','values','createAllObjects','then','floor','getGenerativeModel','message','onUnload','namespace','ðŸ”®\x20Energy\x20Prediction\x20triggered\x20(','createDailyDigest','.json','runPythonHealthCheck','analysis.security.lastScore','command','manual','analysis.health.geminiNight','exitTimer','\x20events\x20from\x20standard\x20storage.','runAutopilot','integrateRoomTime','Corrupt','security','pythonBridge','open','cancel','getAbsoluteDefaultDataDir','temperature','infrasoundThreshold','onStateChange','name','History\x20Save\x20Error:\x20','checkCalendarTriggers','log',',\x20Temp:\x20','analysis.health.geminiDay','triggerGaitAnalysis','constructor','Live\x20Event\x20Pulse','subscribeForeignStates','memoryCache','terrasse','saveDailyHistory','setStateAsync','min','sendMorningBriefing','triggerInfrasoundCorrelation','\x20sequences','./lib/recorder','triggerBriefing','Verbindung\x20erfolgreich:\x20','config','Adapter','Init...','analysis.prediction.trackerTopRoom','SYSTEM_DP_MODE','analysis.energy.warmupSources','scheduleJob','readFileSync','toLocaleDateString','infrasoundEnabled','date','ANALYZE_GAIT','SYSTEM_MODES','protectAiMemory','fill','NORMAL','Guest\x20Mode','NextHours.Location_1.Day_1.current.symbol_desc','python','Â°C\x20(Innen:\x20','modules','getEnums','DAY','weatherunderground.0','toString','Â°C,\x20AuÃŸen:\x20','806477AYsffO','getHistoryData','cleanupGhostInterventions','ðŸ’¾\x20Saving\x20Daily\x20History\x20for\x20','checkWifiPresence:\x20Error\x20checking\x20','triggerEnergyPrediction\x20Error:\x20','Sec-Training\x20started...','abortExitTimer','isGracePeriodActive','analysis.energy.warmupTargets','json','analysis.energy.warmupTimes','initZombies','version','roomIntegratorTimer','writeFileSync','push','Daily\x20Activity\x20Vector\x20(48x30min)','moduleComfort','scanForDevices','apiKey','dailyDigests','âš \x20Replay\x20skipped:\x20No\x20events\x20in\x20memory.','healthTrendInterval','\x20(Threshold)','getForeignObjectsAsync','analysis.training.triggerHealth','generateHealthReport','setObjectNotExistsAsync','location','getDate','ðŸ”Š\x20FORENSIC:\x20Infraschall\x20bei\x20Abwesenheit!\x20Pressure:\x20','isArray','daswetter.0','scanDevices','analysis.security.learningStatus','ready','triggerEnergyPrediction','activeModules','genAI'];a0_0x2735=function(){return _0x18bf90;};return a0_0x2735();}const utils=require(a0_0x4c0f87(0x220)),{GoogleGenerativeAI}=require('@google/generative-ai'),path=require('path'),fs=require('fs'),installer=require(a0_0x4c0f87(0x22d)),scanner=require(a0_0x4c0f87(0x325)),schedulers=require('./lib/scheduler'),topology=require(a0_0x4c0f87(0x249)),setup=require(a0_0x4c0f87(0x314)),recorder=require(a0_0x4c0f87(0x2c3)),pythonBridge=require(a0_0x4c0f87(0x317)),aiAgent=require(a0_0x4c0f87(0x287)),deadMan=require(a0_0x4c0f87(0x20d)),automation=require(a0_0x4c0f87(0x311)),GEMINI_MODEL=a0_0x4c0f87(0x312);class CogniLiving extends utils[a0_0x4c0f87(0x2c7)]{constructor(_0x43955f){const _0x26da06=a0_0x4c0f87;super({..._0x43955f,'name':'cogni-living'}),this['eventHistory']=[],this['analysisHistory']=[],this[_0x26da06(0x30f)]=[],this[_0x26da06(0x2f5)]=[],this['sensorLastValues']={},this['systemConfig']={'latitude':0x0,'longitude':0x0,'city':''},this[_0x26da06(0x1e1)]=!![],this[_0x26da06(0x2a4)]=null,this[_0x26da06(0x21d)]=null,this[_0x26da06(0x2e8)]=![],this[_0x26da06(0x307)]=null,this[_0x26da06(0x33d)]=null,this[_0x26da06(0x246)]=setup[_0x26da06(0x2d2)][_0x26da06(0x2d5)],this[_0x26da06(0x1e3)]=![],this[_0x26da06(0x30d)]=![],this[_0x26da06(0x268)]=null,this[_0x26da06(0x30b)]=null,this[_0x26da06(0x277)]=null,this['ltmJob']=null,this[_0x26da06(0x260)]=null,this[_0x26da06(0x292)]=null,this['briefingJob']=null,this[_0x26da06(0x243)]=null,this[_0x26da06(0x329)]=null,this['healthTrendInterval']=null,this[_0x26da06(0x2ee)]=null,this[_0x26da06(0x26e)]=![],this[_0x26da06(0x273)]=Date[_0x26da06(0x315)](),this[_0x26da06(0x2bb)]=null,this['bootTime']=Date[_0x26da06(0x315)](),this[_0x26da06(0x267)]=![],this[_0x26da06(0x1ef)]=[],this['activeModules']={'health':!![],'security':!![],'energy':!![],'comfort':!![]},this['on'](_0x26da06(0x304),this[_0x26da06(0x33c)][_0x26da06(0x229)](this)),this['on'](_0x26da06(0x24f),this[_0x26da06(0x2b0)][_0x26da06(0x229)](this)),this['on']('unload',this[_0x26da06(0x29a)]['bind'](this)),this['on'](_0x26da06(0x299),this[_0x26da06(0x1d4)][_0x26da06(0x229)](this));}async[a0_0x4c0f87(0x33c)](){const _0x37bccd=a0_0x4c0f87;this[_0x37bccd(0x2b4)][_0x37bccd(0x23f)](_0x37bccd(0x23e)+this[_0x37bccd(0x2ed)]+_0x37bccd(0x233));if(this[_0x37bccd(0x2c6)]['moduleHealth']!==undefined)this[_0x37bccd(0x306)]['health']=this[_0x37bccd(0x2c6)]['moduleHealth'];if(this['config'][_0x37bccd(0x309)]!==undefined)this[_0x37bccd(0x306)][_0x37bccd(0x2a9)]=this[_0x37bccd(0x2c6)][_0x37bccd(0x309)];if(this[_0x37bccd(0x2c6)][_0x37bccd(0x251)]!==undefined)this[_0x37bccd(0x306)]['energy']=this[_0x37bccd(0x2c6)][_0x37bccd(0x251)];if(this[_0x37bccd(0x2c6)][_0x37bccd(0x2f2)]!==undefined)this['activeModules'][_0x37bccd(0x282)]=this['config']['moduleComfort'];if(this['config'][_0x37bccd(0x2da)])this[_0x37bccd(0x306)]={...this['activeModules'],...this['config'][_0x37bccd(0x2da)]};this['startSystem']();}async[a0_0x4c0f87(0x31f)](){const _0x1ac93f=a0_0x4c0f87;await setup[_0x1ac93f(0x2ec)](this);try{this['isProVersion']=await setup[_0x1ac93f(0x27f)](this[_0x1ac93f(0x2c6)][_0x1ac93f(0x21f)]);}catch(_0x3bf6e5){}if(!this[_0x1ac93f(0x2c6)][_0x1ac93f(0x227)]||this[_0x1ac93f(0x2c6)]['inactivityThresholdHours']<0.1)this['config'][_0x1ac93f(0x227)]=0xc;await setup['initHistory'](this),await setup[_0x1ac93f(0x21a)](this),topology[_0x1ac93f(0x279)](this);try{const _0x25b842=await this['getStateAsync'](_0x1ac93f(0x2eb)),_0x3a1a84=await this[_0x1ac93f(0x32b)](_0x1ac93f(0x2cb));_0x25b842&&_0x25b842[_0x1ac93f(0x1f7)]&&_0x3a1a84&&_0x3a1a84[_0x1ac93f(0x1f7)]&&(Date['now']()-_0x25b842['ts']<0x4*0xe10*0x3e8&&(this[_0x1ac93f(0x2bb)]={'times':JSON['parse'](_0x25b842['val']),'sources':JSON[_0x1ac93f(0x1da)](_0x3a1a84[_0x1ac93f(0x1f7)])}));}catch(_0x1929d8){}if(this[_0x1ac93f(0x2c6)]['geminiApiKey'])try{this[_0x1ac93f(0x307)]=new GoogleGenerativeAI(this[_0x1ac93f(0x2c6)][_0x1ac93f(0x269)]),this['geminiModel']=this[_0x1ac93f(0x307)][_0x1ac93f(0x298)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x1ac93f(0x27c)}});}catch(_0x4c7008){this[_0x1ac93f(0x2b4)][_0x1ac93f(0x209)](_0x1ac93f(0x225)+_0x4c7008[_0x1ac93f(0x299)]);}await setup[_0x1ac93f(0x295)](this),await this[_0x1ac93f(0x1e8)](),schedulers['initSchedules'](this),await this[_0x1ac93f(0x2fc)]('analysis.visualization.pulse',{'type':_0x1ac93f(0x226),'common':{'name':_0x1ac93f(0x2b9),'type':_0x1ac93f(0x231),'role':'value','read':!![],'write':![]},'native':{}}),await this[_0x1ac93f(0x2fc)](_0x1ac93f(0x228),{'type':'state','common':{'name':_0x1ac93f(0x322),'type':_0x1ac93f(0x242),'role':'json','read':!![],'write':![],'def':'{\x22today\x22:{},\x20\x22yesterday\x22:{},\x20\x22date\x22:\x22\x22}'},'native':{}}),await this[_0x1ac93f(0x2fc)](_0x1ac93f(0x1d3),{'type':_0x1ac93f(0x226),'common':{'name':'Room\x20History\x20(24h\x20Buckets)','type':_0x1ac93f(0x242),'role':_0x1ac93f(0x2ea),'read':!![],'write':![],'def':_0x1ac93f(0x1fe)},'native':{}}),await this['setObjectNotExistsAsync']('analysis.health.geminiNight',{'type':_0x1ac93f(0x226),'common':{'name':_0x1ac93f(0x1cd),'type':_0x1ac93f(0x242),'role':_0x1ac93f(0x334),'read':!![],'write':![],'def':'Warte\x20auf\x20Analyse...'},'native':{}}),await this[_0x1ac93f(0x2fc)](_0x1ac93f(0x2b6),{'type':'state','common':{'name':_0x1ac93f(0x1cc),'type':'string','role':_0x1ac93f(0x334),'read':!![],'write':![],'def':_0x1ac93f(0x332)},'native':{}}),await this[_0x1ac93f(0x2fc)]('analysis.health.todayVector',{'type':_0x1ac93f(0x226),'common':{'name':_0x1ac93f(0x2f1),'type':_0x1ac93f(0x242),'role':'json','read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x1ac93f(0x2fc)]('analysis.health.todayRoomDetails',{'type':_0x1ac93f(0x226),'common':{'name':'Daily\x20Room\x20Details\x20(48x30min)','type':_0x1ac93f(0x242),'role':_0x1ac93f(0x2ea),'read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x1ac93f(0x2fc)]('analysis.health.activityTrend',{'type':_0x1ac93f(0x226),'common':{'name':'General\x20Activity\x20Trend','type':_0x1ac93f(0x231),'role':_0x1ac93f(0x250),'unit':'%','read':!![],'write':![]},'native':{}}),await this[_0x1ac93f(0x2fc)]('analysis.energy.warmupTimes',{'type':'state','common':{'name':'Warm-Up\x20Time','type':'string','role':_0x1ac93f(0x2ea),'read':!![],'write':![]},'native':{}});try{const _0x1c3864=await this[_0x1ac93f(0x32b)](_0x1ac93f(0x23b));if(_0x1c3864&&_0x1c3864[_0x1ac93f(0x1f7)]){this[_0x1ac93f(0x253)]=JSON[_0x1ac93f(0x1da)](_0x1c3864[_0x1ac93f(0x1f7)]);if(this[_0x1ac93f(0x1e3)]){const _0x222148=await this[_0x1ac93f(0x32b)](_0x1ac93f(0x21e));if(_0x222148&&_0x222148[_0x1ac93f(0x1f7)])this[_0x1ac93f(0x30f)]=JSON[_0x1ac93f(0x1da)](_0x222148['val']);}this[_0x1ac93f(0x2b4)][_0x1ac93f(0x23f)](_0x1ac93f(0x316)+this[_0x1ac93f(0x253)][_0x1ac93f(0x275)]+_0x1ac93f(0x2a5));}}catch(_0xfc0adf){this['eventHistory']=[];}try{const _0x51918e=await this[_0x1ac93f(0x32b)]('LTM.dailyDigests');if(_0x51918e&&_0x51918e[_0x1ac93f(0x1f7)])this[_0x1ac93f(0x2f5)]=JSON[_0x1ac93f(0x1da)](_0x51918e['val']);}catch(_0x465e58){this[_0x1ac93f(0x2f5)]=[];}const _0x253c0=this[_0x1ac93f(0x2f5)][_0x1ac93f(0x275)]>=(this[_0x1ac93f(0x2c6)][_0x1ac93f(0x289)]||0x7)?_0x1ac93f(0x1e9)+this[_0x1ac93f(0x2f5)][_0x1ac93f(0x275)]+_0x1ac93f(0x245):'Lernphase\x20('+this[_0x1ac93f(0x2f5)][_0x1ac93f(0x275)]+'/'+(this[_0x1ac93f(0x2c6)][_0x1ac93f(0x289)]||0x7)+')';await this[_0x1ac93f(0x2be)](_0x1ac93f(0x1e4),{'val':_0x253c0,'ack':!![]}),this[_0x1ac93f(0x1fa)](_0x1ac93f(0x202)),this['subscribeStates'](_0x1ac93f(0x323)),this[_0x1ac93f(0x1fa)](_0x1ac93f(0x2fa));this[_0x1ac93f(0x2c6)][_0x1ac93f(0x2cf)]&&this[_0x1ac93f(0x2c6)][_0x1ac93f(0x338)]&&this[_0x1ac93f(0x306)]['security']&&this[_0x1ac93f(0x2ba)](this[_0x1ac93f(0x2c6)][_0x1ac93f(0x338)]);const _0x2aa8f4=this[_0x1ac93f(0x2c6)][_0x1ac93f(0x22c)];if(_0x2aa8f4)for(const _0x5e4342 of _0x2aa8f4){await this[_0x1ac93f(0x290)](_0x5e4342['id']);}const _0x40ffa4=this[_0x1ac93f(0x2c6)][_0x1ac93f(0x33b)];if(_0x40ffa4)for(const _0x168cc4 of _0x40ffa4){await this[_0x1ac93f(0x290)](_0x168cc4);}const _0x201095=require(_0x1ac93f(0x33e));if(this['historyJob'])this[_0x1ac93f(0x243)][_0x1ac93f(0x2ac)]();this[_0x1ac93f(0x243)]=_0x201095[_0x1ac93f(0x2cc)](_0x1ac93f(0x208),()=>{const _0x29213f=_0x1ac93f;this[_0x29213f(0x2bd)]();}),setTimeout(()=>this[_0x1ac93f(0x1d9)](),0x1388);if(this[_0x1ac93f(0x2ee)])clearInterval(this[_0x1ac93f(0x2ee)]);this['integrateRoomTime'](),this[_0x1ac93f(0x2ee)]=setInterval(async()=>{const _0x5eb580=_0x1ac93f;await this[_0x5eb580(0x2a7)]();},0x3c*0x3e8);if(this[_0x1ac93f(0x2f7)])clearInterval(this[_0x1ac93f(0x2f7)]);this['healthTrendInterval']=setInterval(()=>{const _0x13a2e2=_0x1ac93f;this[_0x13a2e2(0x1e3)]&&this['activeModules'][_0x13a2e2(0x313)]&&this[_0x13a2e2(0x29f)]();},0x4*0x3c*0x3c*0x3e8);if(this[_0x1ac93f(0x268)])clearInterval(this[_0x1ac93f(0x268)]);this[_0x1ac93f(0x306)]['energy']&&(this[_0x1ac93f(0x268)]=setInterval(()=>{const _0x3d54f4=_0x1ac93f;this[_0x3d54f4(0x305)]();},0xf*0x3c*0x3e8),setTimeout(()=>this[_0x1ac93f(0x305)](),0x2710));if(this[_0x1ac93f(0x30b)])clearInterval(this[_0x1ac93f(0x30b)]);this[_0x1ac93f(0x2c6)][_0x1ac93f(0x333)]&&this[_0x1ac93f(0x306)][_0x1ac93f(0x26c)]&&(this[_0x1ac93f(0x30b)]=setInterval(()=>{const _0x3790e0=_0x1ac93f;automation[_0x3790e0(0x2b3)](this);},0x2*0x3c*0x3e8),setTimeout(()=>automation[_0x1ac93f(0x2b3)](this),0x3a98));if(this[_0x1ac93f(0x277)])clearInterval(this['presenceCheckTimer']);this[_0x1ac93f(0x2c6)][_0x1ac93f(0x33b)]&&this[_0x1ac93f(0x2c6)][_0x1ac93f(0x33b)]['length']>0x0&&(this['presenceCheckTimer']=setInterval(async()=>{const _0x69b68b=_0x1ac93f;await this[_0x69b68b(0x286)]();},0x3c*0x3e8),setTimeout(async()=>await this[_0x1ac93f(0x286)](),0x1388));const _0x3bcb10=path[_0x1ac93f(0x252)](__dirname,_0x1ac93f(0x31d),_0x1ac93f(0x331),_0x1ac93f(0x2d8));pythonBridge[_0x1ac93f(0x327)](this,_0x3bcb10);}[a0_0x4c0f87(0x29a)](_0x56379a){const _0x5cf750=a0_0x4c0f87;if(this[_0x5cf750(0x243)])this['historyJob'][_0x5cf750(0x2ac)]();this[_0x5cf750(0x2bd)]()[_0x5cf750(0x296)](()=>{const _0x12879f=_0x5cf750;if(this[_0x12879f(0x268)])clearInterval(this[_0x12879f(0x268)]);if(this[_0x12879f(0x30b)])clearInterval(this['calendarCheckTimer']);if(this[_0x12879f(0x277)])clearInterval(this['presenceCheckTimer']);if(this[_0x12879f(0x2ee)])clearInterval(this[_0x12879f(0x2ee)]);recorder[_0x12879f(0x2e7)](this),pythonBridge[_0x12879f(0x283)](this),_0x56379a();});}async[a0_0x4c0f87(0x1d9)](){const _0x5d4912=a0_0x4c0f87;if(!this[_0x5d4912(0x253)]||this[_0x5d4912(0x253)][_0x5d4912(0x275)]===0x0){this[_0x5d4912(0x2b4)][_0x5d4912(0x1df)](_0x5d4912(0x2f6));return;}this[_0x5d4912(0x2b4)][_0x5d4912(0x23f)]('â†º\x20Replaying\x20'+this['eventHistory'][_0x5d4912(0x275)]+_0x5d4912(0x318));const _0x4b1860=new Date()[_0x5d4912(0x281)](0x0,0x0,0x0,0x0),_0x1b827f=_0x5d4912(0x1d3);let _0x29c3eb={'history':{},'date':new Date()[_0x5d4912(0x2ce)]()};const _0x349f75='analysis.health.todayVector',_0x3a8514=_0x5d4912(0x1ec);let _0x36525f=new Array(0x30)['fill'](0x0),_0x39785b=Array['from']({'length':0x30},()=>[]);this[_0x5d4912(0x253)]['forEach'](_0x43ca65=>{const _0x1610cb=_0x5d4912;if(_0x43ca65[_0x1610cb(0x21c)]>=_0x4b1860){if(recorder[_0x1610cb(0x238)](_0x43ca65[_0x1610cb(0x28a)],_0x43ca65[_0x1610cb(0x250)])){const _0x22848b=new Date(_0x43ca65['timestamp']),_0x20315b=_0x22848b[_0x1610cb(0x270)]()*0x2+(_0x22848b[_0x1610cb(0x214)]()>=0x1e?0x1:0x0);if(_0x20315b<0x30){_0x36525f[_0x20315b]++;const _0x4aa221=_0x43ca65[_0x1610cb(0x2fd)]||_0x43ca65['name']||'?';let _0x481d5b=_0x39785b[_0x20315b];!_0x481d5b[_0x1610cb(0x1d6)](_0x4aa221)&&_0x481d5b['push'](_0x4aa221);}const _0x50ed8f=_0x22848b[_0x1610cb(0x270)]();let _0x255445=_0x43ca65['location']||_0x1610cb(0x31a);const _0x6d3eb4=(this[_0x1610cb(0x2c6)]['devices']||[])[_0x1610cb(0x1db)](_0x1685e2=>_0x1685e2[_0x1610cb(0x2fd)]===_0x255445);if(_0x6d3eb4)_0x255445=_0x6d3eb4[_0x1610cb(0x2fd)];if(!_0x29c3eb['history'][_0x255445])_0x29c3eb[_0x1610cb(0x274)][_0x255445]=new Array(0x18)[_0x1610cb(0x2d4)](0x0);if(_0x29c3eb['history'][_0x255445][_0x50ed8f]<0x3c)_0x29c3eb[_0x1610cb(0x274)][_0x255445][_0x50ed8f]++;}}});const _0x17f66c=await this[_0x5d4912(0x32b)](_0x1b827f);(!_0x17f66c||!_0x17f66c[_0x5d4912(0x1f7)]||_0x17f66c[_0x5d4912(0x1f7)]==='{}'||_0x17f66c[_0x5d4912(0x1f7)]['includes'](_0x5d4912(0x1ee)))&&await this[_0x5d4912(0x2be)](_0x1b827f,{'val':JSON['stringify'](_0x29c3eb),'ack':!![]}),await this[_0x5d4912(0x2be)](_0x349f75,{'val':JSON[_0x5d4912(0x206)](_0x36525f),'ack':!![]}),await this[_0x5d4912(0x2be)](_0x3a8514,{'val':JSON[_0x5d4912(0x206)](_0x39785b),'ack':!![]}),this[_0x5d4912(0x2b4)][_0x5d4912(0x23f)](_0x5d4912(0x1e2));}async[a0_0x4c0f87(0x2bd)](){const _0x5398b5=a0_0x4c0f87;if(!this[_0x5398b5(0x306)][_0x5398b5(0x313)])return;const _0x283bfd=new Date()[_0x5398b5(0x1ff)]()['split']('T')[0x0];this[_0x5398b5(0x2b4)][_0x5398b5(0x1fd)](_0x5398b5(0x2e3)+_0x283bfd+_0x5398b5(0x280));try{const [_0x17051f,_0x57912e,_0x1d177b,_0x16f1c2,_0x37118a,_0x57c685]=await Promise[_0x5398b5(0x24b)]([this[_0x5398b5(0x32b)](_0x5398b5(0x1d3)),this[_0x5398b5(0x32b)](_0x5398b5(0x2a3)),this[_0x5398b5(0x32b)](_0x5398b5(0x2b6)),this[_0x5398b5(0x32b)](_0x5398b5(0x2a0)),this[_0x5398b5(0x32b)](_0x5398b5(0x23c)),this[_0x5398b5(0x32b)](_0x5398b5(0x25a))]),_0x37fb2a=this[_0x5398b5(0x253)][_0x5398b5(0x293)](_0x3c7003=>_0x3c7003[_0x5398b5(0x21c)]>=new Date()[_0x5398b5(0x281)](0x0,0x0,0x0,0x0)&&(_0x3c7003[_0x5398b5(0x2b1)][_0x5398b5(0x25b)]()[_0x5398b5(0x1d6)](_0x5398b5(0x26a))||_0x3c7003[_0x5398b5(0x2b1)][_0x5398b5(0x25b)]()['includes'](_0x5398b5(0x2bc)))&&(_0x3c7003[_0x5398b5(0x250)]===!![]||_0x3c7003[_0x5398b5(0x250)]==='open'))[_0x5398b5(0x275)];let _0x43efc4=0x55;if(_0x57c685&&_0x57c685[_0x5398b5(0x1f7)]!==undefined)_0x43efc4=Math[_0x5398b5(0x2bf)](0x64,Math[_0x5398b5(0x22a)](0x14,Math['round'](0x50+Number(_0x57c685['val'])*0x5)));const _0x48c0f4={'date':_0x283bfd,'timestamp':Date['now'](),'roomHistory':_0x17051f?.[_0x5398b5(0x1f7)]?JSON[_0x5398b5(0x1da)](_0x17051f[_0x5398b5(0x1f7)]):{},'geminiNight':_0x57912e?.[_0x5398b5(0x1f7)]||'Keine\x20Daten','geminiDay':_0x1d177b?.[_0x5398b5(0x1f7)]||_0x5398b5(0x1ce),'anomalyScore':_0x16f1c2?.[_0x5398b5(0x1f7)]||0.1,'todayVector':_0x37118a?.['val']?JSON[_0x5398b5(0x1da)](_0x37118a[_0x5398b5(0x1f7)]):new Array(0x30)[_0x5398b5(0x2d4)](0x0),'batteryLevel':_0x43efc4,'freshAirCount':_0x37fb2a,'eventHistory':this[_0x5398b5(0x253)]},_0x298383=utils[_0x5398b5(0x2ad)](),_0x5c22a5=path[_0x5398b5(0x252)](_0x298383,_0x5398b5(0x224),'history');if(!fs[_0x5398b5(0x235)](_0x5c22a5))fs[_0x5398b5(0x200)](_0x5c22a5,{'recursive':!![]});const _0x1106a4=path[_0x5398b5(0x252)](_0x5c22a5,_0x283bfd+_0x5398b5(0x29e));fs[_0x5398b5(0x2ef)](_0x1106a4,JSON['stringify'](_0x48c0f4)),this[_0x5398b5(0x2b4)][_0x5398b5(0x23f)](_0x5398b5(0x276)+_0x1106a4);}catch(_0x2fb508){this['log'][_0x5398b5(0x209)](_0x5398b5(0x2b2)+_0x2fb508[_0x5398b5(0x299)]);}}async[a0_0x4c0f87(0x2a7)](){const _0x39cb91=a0_0x4c0f87;if(!this[_0x39cb91(0x1e1)])return;try{let _0x4a5039=null;try{const _0x591559=await this[_0x39cb91(0x32b)](_0x39cb91(0x2c9)),_0x50fea4=await this[_0x39cb91(0x32b)](_0x39cb91(0x1ed));if(_0x591559&&_0x591559[_0x39cb91(0x1f7)]&&_0x50fea4&&_0x50fea4[_0x39cb91(0x1f7)]&&_0x50fea4[_0x39cb91(0x1f7)]>0.3){if(_0x591559[_0x39cb91(0x1f7)]!=='Unknown'&&_0x591559['val']!==_0x39cb91(0x2c8))_0x4a5039=_0x591559[_0x39cb91(0x1f7)];}}catch(_0x27aeda){}if(!_0x4a5039){const _0x3a88cd=this['config'][_0x39cb91(0x22c)]||[];for(const _0x5ddb31 of _0x3a88cd){if(_0x5ddb31[_0x39cb91(0x28a)]==='motion'&&_0x5ddb31[_0x39cb91(0x2fd)])try{const _0x2e146d=await this[_0x39cb91(0x26b)](_0x5ddb31['id']);if(_0x2e146d&&(_0x2e146d[_0x39cb91(0x1f7)]===!![]||_0x2e146d[_0x39cb91(0x1f7)]==='on'||_0x2e146d['val']===0x1)){_0x4a5039=_0x5ddb31['location'];break;}}catch(_0x404d47){}}}if(!_0x4a5039)return;const _0x3dc67d=this[_0x39cb91(0x2c6)][_0x39cb91(0x22c)]||[];let _0x508078=_0x4a5039;const _0x54ae9b=_0x3dc67d['find'](_0x5b4dc5=>_0x5b4dc5['location']&&_0x5b4dc5[_0x39cb91(0x2fd)][_0x39cb91(0x25b)]()===_0x4a5039[_0x39cb91(0x25b)]());if(_0x54ae9b)_0x508078=_0x54ae9b[_0x39cb91(0x2fd)];const _0x434258=_0x39cb91(0x1d3),_0x90df5c=await this[_0x39cb91(0x32b)](_0x434258),_0x34024d=new Date()[_0x39cb91(0x2ce)]();let _0x35eeed={'history':{},'date':_0x34024d};if(_0x90df5c&&_0x90df5c[_0x39cb91(0x1f7)])try{_0x35eeed=JSON[_0x39cb91(0x1da)](_0x90df5c['val']);}catch(_0x1e4cee){}_0x35eeed[_0x39cb91(0x2d0)]!==_0x34024d&&(_0x35eeed['history']={},_0x35eeed[_0x39cb91(0x2d0)]=_0x34024d);if(!_0x35eeed[_0x39cb91(0x274)][_0x508078])_0x35eeed[_0x39cb91(0x274)][_0x508078]=new Array(0x18)['fill'](0x0);const _0x5bd931=new Date()[_0x39cb91(0x270)]();if(_0x35eeed[_0x39cb91(0x274)][_0x508078][_0x5bd931]<0x3c)_0x35eeed[_0x39cb91(0x274)][_0x508078][_0x5bd931]++;await this[_0x39cb91(0x2be)](_0x434258,{'val':JSON[_0x39cb91(0x206)](_0x35eeed),'ack':!![]});}catch(_0x80e608){this[_0x39cb91(0x2b4)][_0x39cb91(0x1df)](_0x39cb91(0x25e)+_0x80e608['message']);}}async[a0_0x4c0f87(0x1d4)](_0x3dee95){const _0x43e417=a0_0x4c0f87;if(typeof _0x3dee95===_0x43e417(0x1f1)&&_0x3dee95[_0x43e417(0x299)]){if(_0x3dee95[_0x43e417(0x2a1)]===_0x43e417(0x2e1)){const _0x66fd1d=_0x3dee95[_0x43e417(0x299)][_0x43e417(0x2d0)],_0x40ea93=utils[_0x43e417(0x2ad)](),_0x2d9830=path[_0x43e417(0x252)](_0x40ea93,'cogni-living',_0x43e417(0x274),_0x66fd1d+_0x43e417(0x29e));if(fs[_0x43e417(0x235)](_0x2d9830))try{const _0x19c76f=JSON[_0x43e417(0x1da)](fs[_0x43e417(0x2cd)](_0x2d9830,_0x43e417(0x217)));this['sendTo'](_0x3dee95[_0x43e417(0x239)],_0x3dee95['command'],{'success':!![],'data':_0x19c76f},_0x3dee95[_0x43e417(0x28c)]);}catch(_0x25ab8f){this[_0x43e417(0x1eb)](_0x3dee95[_0x43e417(0x239)],_0x3dee95[_0x43e417(0x2a1)],{'success':![],'error':_0x43e417(0x2a8)},_0x3dee95[_0x43e417(0x28c)]);}else this['sendTo'](_0x3dee95['from'],_0x3dee95[_0x43e417(0x2a1)],{'success':![],'error':_0x43e417(0x1d0)},_0x3dee95[_0x43e417(0x28c)]);}else{if(_0x3dee95[_0x43e417(0x2a1)]===_0x43e417(0x256)){const _0x45c93c=this['dailyDigests'][_0x43e417(0x275)];let _0x56c9fc=new Array(0x30)[_0x43e417(0x2d4)](0x0),_0x319d62=Array[_0x43e417(0x239)]({'length':0x30},()=>[]);try{const _0x1f0267=await this[_0x43e417(0x32b)](_0x43e417(0x23c));if(_0x1f0267&&_0x1f0267['val'])_0x56c9fc=JSON[_0x43e417(0x1da)](_0x1f0267[_0x43e417(0x1f7)]);const _0x5779e4=await this[_0x43e417(0x32b)](_0x43e417(0x1ec));if(_0x5779e4&&_0x5779e4['val'])_0x319d62=JSON[_0x43e417(0x1da)](_0x5779e4[_0x43e417(0x1f7)]);}catch(_0x203176){}let _0x279435=new Array(0x30)[_0x43e417(0x2d4)](0x0);try{const _0x3e9c0b=new Date();_0x3e9c0b[_0x43e417(0x244)](_0x3e9c0b[_0x43e417(0x2fe)]()-0x1);const _0x3f7f62=_0x3e9c0b['toISOString']()[_0x43e417(0x1f6)]('T')[0x0],_0xa6552a=utils[_0x43e417(0x2ad)](),_0x54a0d6=path[_0x43e417(0x252)](_0xa6552a,_0x43e417(0x224),_0x43e417(0x274),_0x3f7f62+_0x43e417(0x29e));if(fs[_0x43e417(0x235)](_0x54a0d6)){const _0x3d6463=JSON[_0x43e417(0x1da)](fs[_0x43e417(0x2cd)](_0x54a0d6,_0x43e417(0x217)));if(_0x3d6463&&_0x3d6463[_0x43e417(0x32c)])_0x279435=_0x3d6463['todayVector'];}}catch(_0x1733d4){}let _0x900653={'today':{},'yesterday':{}};try{const _0x4818a2=await this['getStateAsync'](_0x43e417(0x228));if(_0x4818a2&&_0x4818a2[_0x43e417(0x1f7)])_0x900653=JSON['parse'](_0x4818a2[_0x43e417(0x1f7)]);}catch(_0x522f27){}let _0x18be7c=null;try{const _0x149195=await this[_0x43e417(0x32b)]('analysis.health.activityTrend');if(_0x149195)_0x18be7c=_0x149195[_0x43e417(0x1f7)];}catch(_0x2a26ef){}if(_0x18be7c===undefined||_0x18be7c===null){const _0x37e437=_0x56c9fc[_0x43e417(0x30e)]((_0x52b146,_0xcbdfa3)=>_0x52b146+_0xcbdfa3,0x0),_0xb2763=Math[_0x43e417(0x2bf)](0x2,Math[_0x43e417(0x22a)](-0x2,(0x64-_0x37e437)/0x32));_0x18be7c=_0xb2763;}let _0x186d1d=![],_0x2e108e='',_0x2d0de2='',_0x3b86f6='';try{const _0x37a3dc=await this[_0x43e417(0x32b)](_0x43e417(0x1e6));if(_0x37a3dc&&_0x37a3dc[_0x43e417(0x1f7)]){_0x186d1d=!![];const _0x540778=await this[_0x43e417(0x32b)](_0x43e417(0x1f0));_0x2e108e=_0x540778?_0x540778[_0x43e417(0x1f7)]:'';const _0x1033b8=await this[_0x43e417(0x32b)](_0x43e417(0x27d));_0x2d0de2=_0x1033b8?_0x1033b8[_0x43e417(0x1f7)]:'';const _0x1b17f9=await this[_0x43e417(0x32b)]('analysis.automation.targetValue');_0x3b86f6=_0x1b17f9?_0x1b17f9['val']:'';}}catch(_0x520ce5){}const _0x3bdbc9=await this[_0x43e417(0x248)](),_0x4a51b5=(this[_0x43e417(0x2c6)][_0x43e417(0x22c)]||[])[_0x43e417(0x20c)](_0x2184e0=>_0x2184e0[_0x43e417(0x1dd)]),_0x4914fc=_0x3bdbc9&&_0x4a51b5;let _0x43cfe2='';try{const _0x5bac78=await this[_0x43e417(0x32b)](_0x43e417(0x28e));if(_0x5bac78&&_0x5bac78[_0x43e417(0x1f7)])_0x43cfe2=_0x5bac78[_0x43e417(0x1f7)];}catch(_0x32bb79){}this[_0x43e417(0x1eb)](_0x3dee95[_0x43e417(0x239)],_0x3dee95[_0x43e417(0x2a1)],{'success':!![],'eventHistory':this[_0x43e417(0x253)][_0x43e417(0x1cf)](0x0,0x7d0),'stats':{'digestCount':_0x45c93c,'isPresent':this[_0x43e417(0x1e1)],'hourlyActivity':_0x56c9fc,'hourlyDetails':_0x319d62,'yesterdayActivity':_0x279435,'solarActive':_0x4914fc,'presenceWho':_0x43cfe2,'roomStats':_0x900653,'activityTrend':_0x18be7c,'modules':this[_0x43e417(0x306)]},'automation':{'detected':_0x186d1d,'description':_0x2e108e,'targetId':_0x2d0de2,'targetValue':_0x3b86f6}},_0x3dee95[_0x43e417(0x28c)]);}else{if(_0x3dee95[_0x43e417(0x2a1)]===_0x43e417(0x254))try{const _0xa8435c=await automation['scanThermostats'](this);this[_0x43e417(0x1eb)](_0x3dee95['from'],_0x3dee95[_0x43e417(0x2a1)],{'success':!![],'results':_0xa8435c},_0x3dee95[_0x43e417(0x28c)]);}catch(_0x212493){this[_0x43e417(0x1eb)](_0x3dee95[_0x43e417(0x239)],_0x3dee95['command'],{'success':![],'error':_0x212493[_0x43e417(0x299)]},_0x3dee95['callback']);}else{if(_0x3dee95[_0x43e417(0x2a1)]===_0x43e417(0x302))try{const _0x5c3710=await scanner[_0x43e417(0x2f3)](this,_0x3dee95['message']||{});this[_0x43e417(0x1eb)](_0x3dee95[_0x43e417(0x239)],_0x3dee95[_0x43e417(0x2a1)],{'success':!![],'devices':_0x5c3710},_0x3dee95['callback']);}catch(_0x5b8930){}else{if(_0x3dee95['command']===_0x43e417(0x2db)){const _0x173e58=await this[_0x43e417(0x2f9)](_0x43e417(0x1f8),_0x43e417(0x339)),_0x57a305=[];if(_0x173e58)for(const _0x40467d in _0x173e58){let _0x4eda61=_0x173e58[_0x40467d][_0x43e417(0x31c)][_0x43e417(0x2b1)];if(_0x4eda61&&typeof _0x4eda61===_0x43e417(0x1f1))_0x4eda61=_0x4eda61['de']||_0x4eda61['en']||Object[_0x43e417(0x294)](_0x4eda61)[0x0]||JSON[_0x43e417(0x206)](_0x4eda61);_0x57a305[_0x43e417(0x2f0)]({'id':_0x40467d,'name':String(_0x4eda61||_0x40467d)});}const _0x1f6165=await this[_0x43e417(0x2f9)]('enum.rooms.*','enum'),_0x315da0=[];if(_0x1f6165)for(const _0x4415ce in _0x1f6165){let _0x291272=_0x1f6165[_0x4415ce]['common'][_0x43e417(0x2b1)];if(_0x291272&&typeof _0x291272==='object')_0x291272=_0x291272['de']||_0x291272['en']||Object[_0x43e417(0x294)](_0x291272)[0x0]||JSON[_0x43e417(0x206)](_0x291272);_0x315da0[_0x43e417(0x2f0)](String(_0x291272||_0x4415ce['split']('.')[_0x43e417(0x27b)]()));}this[_0x43e417(0x1eb)](_0x3dee95[_0x43e417(0x239)],_0x3dee95['command'],{'success':!![],'enums':_0x57a305,'rooms':_0x315da0},_0x3dee95['callback']);}else{if(_0x3dee95[_0x43e417(0x2a1)]===_0x43e417(0x210))try{const _0x3ec88c=await this[_0x43e417(0x201)]('system',_0x43e417(0x211),{'startkey':_0x43e417(0x28d),'endkey':_0x43e417(0x272)}),_0x3983a8=new Set();if(_0x3ec88c&&_0x3ec88c[_0x43e417(0x222)])for(const _0x1295db of _0x3ec88c[_0x43e417(0x222)]){const _0x485fd2=_0x1295db['id'][_0x43e417(0x330)](_0x43e417(0x1fc),''),_0x44bd78=await this['getForeignStateAsync'](_0x485fd2+_0x43e417(0x22f));let _0x32fab6=![];if(_0x44bd78&&_0x44bd78['val']){const _0x26f229=typeof _0x44bd78[_0x43e417(0x1f7)]===_0x43e417(0x242)?JSON[_0x43e417(0x1da)](_0x44bd78[_0x43e417(0x1f7)]):_0x44bd78[_0x43e417(0x1f7)];Array[_0x43e417(0x300)](_0x26f229)&&_0x26f229[_0x43e417(0x1d5)](_0x288ea6=>{const _0x11ef11=_0x43e417;_0x288ea6[_0x11ef11(0x24e)]&&(_0x3983a8[_0x11ef11(0x25d)](_0x288ea6[_0x11ef11(0x24e)]),_0x32fab6=!![]);});}!_0x32fab6&&_0x3983a8[_0x43e417(0x25d)](_0x485fd2);}const _0x138748=Array['from'](_0x3983a8);if(_0x138748[_0x43e417(0x275)]===0x0)_0x138748[_0x43e417(0x2f0)]('Standard');this['sendTo'](_0x3dee95[_0x43e417(0x239)],_0x3dee95[_0x43e417(0x2a1)],{'success':!![],'names':_0x138748},_0x3dee95[_0x43e417(0x28c)]);}catch(_0x4f20d8){this[_0x43e417(0x1eb)](_0x3dee95['from'],_0x3dee95[_0x43e417(0x2a1)],{'success':![],'error':'Scan\x20Error:\x20'+_0x4f20d8[_0x43e417(0x299)]},_0x3dee95[_0x43e417(0x28c)]);}else{if(_0x3dee95[_0x43e417(0x2a1)]==='refreshCalendar')try{await automation['updateSchedulePreview'](this),this[_0x43e417(0x1eb)](_0x3dee95[_0x43e417(0x239)],_0x3dee95[_0x43e417(0x2a1)],{'success':!![]},_0x3dee95[_0x43e417(0x28c)]);}catch(_0x5b7989){this[_0x43e417(0x2b4)][_0x43e417(0x1df)](_0x43e417(0x26f)+_0x5b7989[_0x43e417(0x299)]),this['sendTo'](_0x3dee95[_0x43e417(0x239)],_0x3dee95[_0x43e417(0x2a1)],{'success':![],'error':_0x5b7989[_0x43e417(0x299)]},_0x3dee95[_0x43e417(0x28c)]);}else{if(_0x3dee95[_0x43e417(0x2a1)]===_0x43e417(0x2aa))try{const _0x4e6516=_0x3dee95[_0x43e417(0x299)]['command'],_0x333e46=_0x3dee95[_0x43e417(0x299)];this[_0x43e417(0x2b4)][_0x43e417(0x1fd)](_0x43e417(0x219)+_0x4e6516),pythonBridge[_0x43e417(0x25f)](this,_0x4e6516,_0x333e46,_0x3d54c2=>{const _0x43a3c1=_0x43e417;this[_0x43a3c1(0x1eb)](_0x3dee95['from'],_0x3dee95['command'],_0x3d54c2,_0x3dee95[_0x43a3c1(0x28c)]);});}catch(_0x3da356){this[_0x43e417(0x2b4)][_0x43e417(0x1df)](_0x43e417(0x285)+_0x3da356[_0x43e417(0x299)]),this[_0x43e417(0x1eb)](_0x3dee95[_0x43e417(0x239)],_0x3dee95[_0x43e417(0x2a1)],{'type':_0x43e417(0x232),'payload':_0x3da356[_0x43e417(0x299)]},_0x3dee95[_0x43e417(0x28c)]);}else{if(_0x3dee95['command']===_0x43e417(0x27a))try{const _0x24bfe9=_0x3dee95[_0x43e417(0x299)]?_0x3dee95[_0x43e417(0x299)][_0x43e417(0x2f4)]:'';if(!_0x24bfe9)throw new Error(_0x43e417(0x320));const _0x33aec2=new GoogleGenerativeAI(_0x24bfe9),_0x5e7e2b=_0x33aec2['getGenerativeModel']({'model':GEMINI_MODEL}),_0x9b6708=await _0x5e7e2b['generateContent'](_0x43e417(0x24c)),_0x4abb38=await _0x9b6708[_0x43e417(0x324)],_0x4f8e6e=_0x4abb38[_0x43e417(0x334)]();this[_0x43e417(0x1eb)](_0x3dee95['from'],_0x3dee95['command'],{'success':!![],'message':_0x43e417(0x2c5)+_0x4f8e6e['substring'](0x0,0x14)+'...'},_0x3dee95['callback']);}catch(_0x2241ec){this['sendTo'](_0x3dee95[_0x43e417(0x239)],_0x3dee95[_0x43e417(0x2a1)],{'success':![],'message':_0x2241ec['message']},_0x3dee95[_0x43e417(0x28c)]);}else{if(_0x3dee95[_0x43e417(0x2a1)]===_0x43e417(0x31b))try{const _0x81ef0c=await this['checkSolarCondition'](),_0x45265e=await this[_0x43e417(0x201)](_0x43e417(0x237),'instance',{'startkey':_0x43e417(0x28d),'endkey':_0x43e417(0x272)}),_0x27210d=_0x45265e&&_0x45265e['rows']?_0x45265e['rows'][_0x43e417(0x275)]:0x0;this[_0x43e417(0x1eb)](_0x3dee95['from'],_0x3dee95['command'],{'success':!![],'weather':_0x43e417(0x321)+_0x81ef0c+_0x43e417(0x2b5)+(this[_0x43e417(0x22b)][this[_0x43e417(0x2c6)][_0x43e417(0x308)]]||'?')+'Â°C','calendar':_0x27210d+'\x20Kalender-Adapter\x20gefunden.'},_0x3dee95['callback']);}catch(_0x3620df){this['sendTo'](_0x3dee95['from'],_0x3dee95[_0x43e417(0x2a1)],{'success':![]},_0x3dee95[_0x43e417(0x28c)]);}}}}}}}}}}}}[a0_0x4c0f87(0x29f)](){const _0x4b9146=a0_0x4c0f87;if(!this['activeModules'][_0x4b9146(0x313)])return;this['log'][_0x4b9146(0x1fd)](_0x4b9146(0x1ea));try{const _0x140cee=this[_0x4b9146(0x30f)]||[];pythonBridge[_0x4b9146(0x25f)](this,_0x4b9146(0x1e0),{'events':_0x140cee});}catch(_0x1ba2a4){this['log'][_0x4b9146(0x1df)]('Failed\x20to\x20trigger\x20Python\x20Health\x20Check');}}async[a0_0x4c0f87(0x2b0)](_0x2810d9,_0x560cd6){const _0x39ed86=a0_0x4c0f87;if(!_0x560cd6||this['dependencyInstallInProgress'])return;if(_0x2810d9[_0x39ed86(0x1d6)](_0x39ed86(0x1dc))&&_0x2810d9['endsWith'](_0x39ed86(0x258))&&_0x560cd6[_0x39ed86(0x1f7)])return;if(this[_0x39ed86(0x2c6)][_0x39ed86(0x2cf)]&&_0x2810d9===this[_0x39ed86(0x2c6)][_0x39ed86(0x338)]&&this[_0x39ed86(0x306)][_0x39ed86(0x2a9)]){this[_0x39ed86(0x25c)](_0x560cd6['val']);return;}if(_0x560cd6['ack']&&_0x2810d9[_0x39ed86(0x223)](_0x39ed86(0x1f2)))return;if(_0x2810d9===this[_0x39ed86(0x29b)]+'.system.mode'){if(_0x560cd6[_0x39ed86(0x1f7)]&&Object[_0x39ed86(0x294)](setup['SYSTEM_MODES'])['includes'](_0x560cd6['val'])){this[_0x39ed86(0x246)]=_0x560cd6[_0x39ed86(0x1f7)];if(_0x560cd6[_0x39ed86(0x1f7)]===setup[_0x39ed86(0x2d2)][_0x39ed86(0x240)])await recorder['setPresence'](this,![]);else await recorder['setPresence'](this,!![]);if(this[_0x39ed86(0x1e3)]){let _0x55c20f=![],_0x380d77=0x0,_0x473082=_0x39ed86(0x2a2);if(this[_0x39ed86(0x246)]==='party')_0x55c20f=!![],_0x380d77=0x168,_0x473082=_0x39ed86(0x204);else this['currentSystemMode']===_0x39ed86(0x1f5)&&(_0x55c20f=!![],_0x380d77=0x5a0,_0x473082=_0x39ed86(0x2d6));pythonBridge[_0x39ed86(0x25f)](this,_0x39ed86(0x30c),{'active':_0x55c20f,'duration':_0x380d77,'label':_0x473082}),await this[_0x39ed86(0x2be)](_0x39ed86(0x303),{'val':JSON[_0x39ed86(0x206)]({'active':_0x55c20f,'label':_0x473082,'timestamp':Date[_0x39ed86(0x315)]()}),'ack':!![]});}}if(!_0x560cd6['ack'])this[_0x39ed86(0x205)](_0x2810d9,{'val':this[_0x39ed86(0x246)],'ack':!![]});return;}if(_0x2810d9[_0x39ed86(0x223)](_0x39ed86(0x2cb))&&_0x560cd6['ack'])this['protectAiMemory'](_0x560cd6[_0x39ed86(0x1f7)]);if(_0x2810d9[_0x39ed86(0x223)](_0x39ed86(0x2eb))&&_0x560cd6[_0x39ed86(0x1d1)]&&this[_0x39ed86(0x306)]['energy'])automation[_0x39ed86(0x2b3)](this);if(!_0x560cd6[_0x39ed86(0x1d1)]){if(_0x2810d9[_0x39ed86(0x1d6)](_0x39ed86(0x202))&&_0x560cd6[_0x39ed86(0x1f7)]){this[_0x39ed86(0x205)](_0x2810d9,{'val':![],'ack':!![]}),aiAgent[_0x39ed86(0x203)](this);return;}if(_0x2810d9[_0x39ed86(0x1d6)](_0x39ed86(0x24a))&&_0x560cd6[_0x39ed86(0x1f7)]){this[_0x39ed86(0x205)](_0x2810d9,{'val':![],'ack':!![]});if(this['isProVersion'])aiAgent[_0x39ed86(0x29d)](this,pythonBridge);return;}if(_0x2810d9[_0x39ed86(0x1d6)](_0x39ed86(0x2c4))&&_0x560cd6[_0x39ed86(0x1f7)]){this[_0x39ed86(0x205)](_0x2810d9,{'val':![],'ack':!![]}),aiAgent[_0x39ed86(0x2c0)](this);return;}if(_0x2810d9[_0x39ed86(0x1d6)]('automation.triggerAction')&&_0x560cd6[_0x39ed86(0x1f7)]){this[_0x39ed86(0x205)](_0x2810d9,{'val':![],'ack':!![]}),aiAgent[_0x39ed86(0x1d7)](this);return;}if(_0x2810d9[_0x39ed86(0x1d6)](_0x39ed86(0x21b))&&_0x560cd6[_0x39ed86(0x1f7)]){this[_0x39ed86(0x205)](_0x2810d9,{'val':![],'ack':!![]});if(this[_0x39ed86(0x1e3)])try{const _0x287913=await this[_0x39ed86(0x32b)]('LTM.trainingData.sequences');if(_0x287913&&_0x287913['val']){const _0x5ad633=JSON[_0x39ed86(0x1da)](_0x287913[_0x39ed86(0x1f7)]);this[_0x39ed86(0x2be)]('analysis.training.status',{'val':_0x39ed86(0x2e6),'ack':!![]}),pythonBridge[_0x39ed86(0x25f)](this,_0x39ed86(0x26d),{'sequences':_0x5ad633});}}catch(_0x50e740){}return;}if(_0x2810d9['includes'](_0x39ed86(0x2fa))&&_0x560cd6[_0x39ed86(0x1f7)]){this[_0x39ed86(0x205)](_0x2810d9,{'val':![],'ack':!![]});try{aiAgent['generateHealthReport'](this,'NIGHT'),setTimeout(()=>aiAgent[_0x39ed86(0x2fb)](this,_0x39ed86(0x2dc)),0x2ee0);if(this[_0x39ed86(0x1e3)]){this[_0x39ed86(0x29f)]();const _0xa250d9=await this[_0x39ed86(0x32b)](_0x39ed86(0x32f));if(_0xa250d9&&_0xa250d9[_0x39ed86(0x1f7)])pythonBridge[_0x39ed86(0x25f)](this,'TRAIN_HEALTH',{'digests':JSON['parse'](_0xa250d9[_0x39ed86(0x1f7)])});}}catch(_0x1689df){this[_0x39ed86(0x2b4)]['warn']('triggerHealth\x20error:\x20'+_0x1689df[_0x39ed86(0x299)]);}return;}if(_0x2810d9['includes'](_0x39ed86(0x328))&&_0x560cd6[_0x39ed86(0x1f7)]){this[_0x39ed86(0x205)](_0x2810d9,{'val':![],'ack':!![]}),await this[_0x39ed86(0x305)]();return;}if(_0x2810d9[_0x39ed86(0x1d6)]('analysis.training.triggerComfort')&&_0x560cd6[_0x39ed86(0x1f7)]){this[_0x39ed86(0x205)](_0x2810d9,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x24aa20=await this[_0x39ed86(0x32b)](_0x39ed86(0x21e));if(_0x24aa20&&_0x24aa20[_0x39ed86(0x1f7)]){const _0x5a9552={};if(this[_0x39ed86(0x2c6)]['devices'])this['config'][_0x39ed86(0x22c)][_0x39ed86(0x1d5)](_0x14ac42=>{const _0x33b61b=_0x39ed86;if(_0x14ac42['id']&&_0x14ac42[_0x33b61b(0x28a)])_0x5a9552[_0x14ac42['id']]=_0x14ac42[_0x33b61b(0x28a)];});pythonBridge[_0x39ed86(0x25f)](this,_0x39ed86(0x234),{'events':JSON[_0x39ed86(0x1da)](_0x24aa20['val']),'deviceMap':_0x5a9552});}}catch(_0x4643f5){}return;}if(_0x2810d9['includes'](_0x39ed86(0x24d))&&_0x560cd6['val']){this[_0x39ed86(0x205)](_0x2810d9,{'val':![],'ack':!![]}),topology['updateTopology'](this);if(this['isProVersion'])try{const _0x216ea5=await this[_0x39ed86(0x32b)]('LTM.trainingData.sequences');if(_0x216ea5&&_0x216ea5[_0x39ed86(0x1f7)])pythonBridge['send'](this,'TRAIN_TOPOLOGY',{'sequences':JSON[_0x39ed86(0x1da)](_0x216ea5[_0x39ed86(0x1f7)])});}catch(_0x1c394c){}return;}}const _0x30eca9=(this[_0x39ed86(0x2c6)][_0x39ed86(0x22c)]||[])['find'](_0x484d57=>_0x484d57['id']===_0x2810d9);if(_0x30eca9){const _0x2ff807=await recorder[_0x39ed86(0x337)](this,_0x2810d9,_0x560cd6,_0x30eca9);_0x2ff807&&this[_0x39ed86(0x205)]('analysis.visualization.pulse',{'val':Date[_0x39ed86(0x315)](),'ack':!![]});_0x2ff807&&_0x2ff807['type']===_0x39ed86(0x27e)&&_0x2ff807[_0x39ed86(0x2fd)]&&this[_0x39ed86(0x1e3)]&&deadMan[_0x39ed86(0x20b)](this,_0x2ff807[_0x39ed86(0x2fd)]);_0x560cd6['val']&&(_0x560cd6['val']===!![]||_0x560cd6[_0x39ed86(0x1f7)]===0x1||String(_0x560cd6[_0x39ed86(0x1f7)])[_0x39ed86(0x25b)]()===_0x39ed86(0x2ab))&&(_0x30eca9[_0x39ed86(0x28a)]&&(_0x30eca9[_0x39ed86(0x28a)][_0x39ed86(0x1d6)](_0x39ed86(0x1e7))||_0x30eca9[_0x39ed86(0x28a)][_0x39ed86(0x1d6)](_0x39ed86(0x335)))&&this[_0x39ed86(0x22e)](_0x30eca9));if(_0x30eca9[_0x39ed86(0x28a)]===_0x39ed86(0x2ae)||_0x30eca9[_0x39ed86(0x28a)]==='thermostat'){if(this['activeModules'][_0x39ed86(0x26c)])automation[_0x39ed86(0x2e2)](this);}}}async[a0_0x4c0f87(0x2d3)](_0x53da60){const _0x59f889=a0_0x4c0f87;if(!this[_0x59f889(0x2bb)]||Date[_0x59f889(0x315)]()-this['bootTime']>0x493e0)return;try{const _0x385228=JSON[_0x59f889(0x1da)](_0x53da60),_0x49bbb2=this[_0x59f889(0x2bb)][_0x59f889(0x32d)];let _0x41c863=![];for(const _0x38aa29 in _0x49bbb2){if(_0x49bbb2[_0x38aa29][_0x59f889(0x1d6)]('AI')&&_0x385228[_0x38aa29]&&!_0x385228[_0x38aa29]['includes']('AI')){_0x41c863=!![];break;}}_0x41c863&&(await this[_0x59f889(0x2be)](_0x59f889(0x2eb),{'val':JSON['stringify'](this['memoryCache'][_0x59f889(0x20e)]),'ack':!![]}),await this[_0x59f889(0x2be)](_0x59f889(0x2cb),{'val':JSON[_0x59f889(0x206)](this[_0x59f889(0x2bb)][_0x59f889(0x32d)]),'ack':!![]}));}catch(_0x453cf1){}}async[a0_0x4c0f87(0x1e8)](){const _0x3f612d=a0_0x4c0f87;try{const _0x2d7cb9=await this[_0x3f612d(0x32b)](setup[_0x3f612d(0x2ca)]);if(_0x2d7cb9&&_0x2d7cb9[_0x3f612d(0x1f7)])this['currentSystemMode']=_0x2d7cb9[_0x3f612d(0x1f7)];}catch(_0x1f9cc1){this[_0x3f612d(0x246)]=setup[_0x3f612d(0x2d2)][_0x3f612d(0x2d5)];}}async['checkWifiPresence'](){const _0x42bf22=a0_0x4c0f87,_0x39272d=this[_0x42bf22(0x2c6)][_0x42bf22(0x33b)]||[];if(_0x39272d[_0x42bf22(0x275)]===0x0)return![];const _0x3325e0=[],_0x4c6155=Date[_0x42bf22(0x315)](),_0x39b6e0=0x5*0x3c*0x3e8;for(const _0x4edec4 of _0x39272d){try{let _0x1f60a=![];try{const _0x1b6126=await this[_0x42bf22(0x26b)](_0x4edec4+'.isOnline');if(_0x1b6126&&_0x1b6126[_0x42bf22(0x1f7)]===!![])_0x1f60a=!![];}catch(_0x146d0d){}if(!_0x1f60a)try{const _0x3668aa=await this[_0x42bf22(0x26b)](_0x4edec4+'.last_seen');if(_0x3668aa&&_0x3668aa['ts']){const _0x37cc18=_0x4c6155-_0x3668aa['ts'];if(_0x37cc18<_0x39b6e0)_0x1f60a=!![];}}catch(_0x3f3042){}if(!_0x1f60a)try{const _0x29c160=await this['getForeignStateAsync'](_0x4edec4+'.uptime');if(_0x29c160&&typeof _0x29c160[_0x42bf22(0x1f7)]===_0x42bf22(0x231)&&_0x29c160[_0x42bf22(0x1f7)]>0x0)_0x1f60a=!![];}catch(_0x5cb38c){}if(!_0x1f60a)try{const _0x42fa0f=await this['getForeignStateAsync'](_0x4edec4);if(_0x42fa0f){const _0x18d51b=_0x4c6155-(_0x42fa0f['ts']||0x0);_0x18d51b<_0x39b6e0&&(_0x42fa0f['val']===!![]||_0x42fa0f[_0x42bf22(0x1f7)]===_0x42bf22(0x257)||_0x42fa0f[_0x42bf22(0x1f7)]===0x1)&&(_0x1f60a=!![]);}}catch(_0x4aa5d5){}if(_0x1f60a){const _0x3eb56c=_0x4edec4[_0x42bf22(0x1f6)]('.'),_0x33911f=_0x3eb56c[_0x3eb56c[_0x42bf22(0x275)]-0x1]||_0x4edec4;_0x3325e0['push'](_0x33911f);}}catch(_0x20a636){this[_0x42bf22(0x2b4)][_0x42bf22(0x1df)](_0x42bf22(0x2e4)+_0x4edec4+':\x20'+_0x20a636[_0x42bf22(0x299)]);}}const _0xdebaf8=_0x3325e0[_0x42bf22(0x275)]>0x0?_0x3325e0[_0x42bf22(0x252)](',\x20'):'Niemand';return await this[_0x42bf22(0x2be)](_0x42bf22(0x28e),{'val':_0xdebaf8,'ack':!![]}),_0x3325e0[_0x42bf22(0x275)]>0x0;}async[a0_0x4c0f87(0x2a6)](){const _0x14794c=a0_0x4c0f87;await aiAgent[_0x14794c(0x203)](this);this[_0x14794c(0x306)][_0x14794c(0x313)]&&(this['updateHealthVector'](),this[_0x14794c(0x2b7)]());if(this[_0x14794c(0x306)]['energy'])this['triggerEnergyPrediction']();}async[a0_0x4c0f87(0x248)](){const _0x349320=a0_0x4c0f87,_0x400ef3=[_0x349320(0x2dd),_0x349320(0x212),_0x349320(0x301)],_0x130c87=['forecast.current.weather','Current.WeatherText',_0x349320(0x2d7)];for(const _0x514167 of _0x400ef3){for(const _0x42d921 of _0x130c87){try{const _0x14179d=_0x514167+'.'+_0x42d921,_0x34d498=await this[_0x349320(0x26b)](_0x14179d);if(_0x34d498&&_0x34d498[_0x349320(0x1f7)]){const _0x20ac29=String(_0x34d498[_0x349320(0x1f7)])[_0x349320(0x25b)]();if(_0x20ac29[_0x349320(0x1d6)](_0x349320(0x266))||_0x20ac29[_0x349320(0x1d6)](_0x349320(0x32e))||_0x20ac29['includes'](_0x349320(0x215))||_0x20ac29[_0x349320(0x1d6)](_0x349320(0x1d8))||_0x20ac29['includes'](_0x349320(0x261)))return this['log'][_0x349320(0x1fd)](_0x349320(0x241)+_0x14179d),!![];}}catch(_0x1364ff){}}}return![];}['triggerGaitAnalysis'](){const _0x120c17=a0_0x4c0f87;if(!this[_0x120c17(0x1e3)])return;try{this[_0x120c17(0x32b)]('LTM.trainingData.sequences',(_0x4e2f52,_0x65ac04)=>{const _0x38fbf8=_0x120c17;if(_0x4e2f52||!_0x65ac04||!_0x65ac04[_0x38fbf8(0x1f7)])return;try{const _0x899a6f=JSON[_0x38fbf8(0x1da)](_0x65ac04[_0x38fbf8(0x1f7)]);if(!_0x899a6f||_0x899a6f['length']===0x0)return;pythonBridge[_0x38fbf8(0x25f)](this,_0x38fbf8(0x2d1),{'sequences':_0x899a6f}),this[_0x38fbf8(0x2b4)][_0x38fbf8(0x1fd)](_0x38fbf8(0x284)+_0x899a6f[_0x38fbf8(0x275)]+_0x38fbf8(0x2c2));}catch(_0x494bad){this[_0x38fbf8(0x2b4)]['warn'](_0x38fbf8(0x262)+_0x494bad[_0x38fbf8(0x299)]);}});}catch(_0x5bdeef){this[_0x120c17(0x2b4)][_0x120c17(0x1df)]('triggerGaitAnalysis\x20error:\x20'+_0x5bdeef[_0x120c17(0x299)]);}}async[a0_0x4c0f87(0x305)](){const _0x402edc=a0_0x4c0f87;if(!this[_0x402edc(0x1e3)]||!this[_0x402edc(0x306)][_0x402edc(0x26c)])return;try{const _0x1743c2={},_0x599e1f={},_0x5a71eb=this[_0x402edc(0x2c6)][_0x402edc(0x22c)]||[];for(const _0x5f1f67 of _0x5a71eb){if((_0x5f1f67[_0x402edc(0x28a)]===_0x402edc(0x2ae)||_0x5f1f67[_0x402edc(0x28a)]===_0x402edc(0x32a))&&_0x5f1f67[_0x402edc(0x2fd)])try{const _0x49dd91=await this[_0x402edc(0x26b)](_0x5f1f67['id']);_0x49dd91&&typeof _0x49dd91[_0x402edc(0x1f7)]==='number'&&(_0x1743c2[_0x5f1f67[_0x402edc(0x2fd)]]=_0x49dd91[_0x402edc(0x1f7)],_0x599e1f[_0x5f1f67[_0x402edc(0x2fd)]]=_0x5f1f67[_0x402edc(0x1dd)]||![]);}catch(_0xde5d98){}}let _0x13603a=0xa;if(this[_0x402edc(0x2c6)][_0x402edc(0x218)])try{const _0x17fe3c=await this[_0x402edc(0x26b)](this['config']['weatherTempId']);if(_0x17fe3c&&typeof _0x17fe3c['val']==='number')_0x13603a=_0x17fe3c['val'];}catch(_0x171b74){}const _0x148ded=await this['checkSolarCondition']();let _0x589e8a={};try{const _0x197a76=await this[_0x402edc(0x32b)](_0x402edc(0x2e9));if(_0x197a76&&_0x197a76[_0x402edc(0x1f7)])_0x589e8a=JSON[_0x402edc(0x1da)](_0x197a76[_0x402edc(0x1f7)]);}catch(_0x23981a){}pythonBridge[_0x402edc(0x25f)](this,_0x402edc(0x319),{'current_temps':_0x1743c2,'t_out':_0x13603a,'is_sunny':_0x148ded,'solar_flags':_0x599e1f,'warmup_targets':_0x589e8a}),this[_0x402edc(0x2b4)]['info'](_0x402edc(0x29c)+Object['keys'](_0x1743c2)[_0x402edc(0x275)]+_0x402edc(0x30a));}catch(_0x42766a){this[_0x402edc(0x2b4)][_0x402edc(0x1df)](_0x402edc(0x2e5)+_0x42766a[_0x402edc(0x299)]);}}[a0_0x4c0f87(0x1f3)](){const _0x4f1eda=a0_0x4c0f87;if(!this[_0x4f1eda(0x30f)]||this[_0x4f1eda(0x30f)][_0x4f1eda(0x275)]===0x0)return;const _0x3a6be1=new Array(0x30)[_0x4f1eda(0x2d4)](0x0),_0x45de76=Array[_0x4f1eda(0x239)]({'length':0x30},()=>[]),_0x2bcc2d=new Date()[_0x4f1eda(0x281)](0x0,0x0,0x0,0x0);this[_0x4f1eda(0x30f)]['forEach'](_0x413ad5=>{const _0x24b1e2=_0x4f1eda,_0xd6fb2d=new Date(_0x413ad5[_0x24b1e2(0x21c)]);if(_0xd6fb2d[_0x24b1e2(0x213)]()>=_0x2bcc2d){const _0x2bff60=_0xd6fb2d[_0x24b1e2(0x270)](),_0xcdce45=_0xd6fb2d[_0x24b1e2(0x214)](),_0x519e91=_0x2bff60*0x2+Math[_0x24b1e2(0x297)](_0xcdce45/0x1e);_0x519e91>=0x0&&_0x519e91<0x30&&(_0x3a6be1[_0x519e91]++,_0x45de76[_0x519e91]['push']({'time':_0xd6fb2d[_0x24b1e2(0x216)](_0x24b1e2(0x236),{'hour':_0x24b1e2(0x1de),'minute':_0x24b1e2(0x1de)}),'location':_0x413ad5[_0x24b1e2(0x2fd)]||'Unbekannt','type':_0x413ad5['type']||'Event'}));}}),this[_0x4f1eda(0x2be)]('analysis.health.todayVector',{'val':JSON[_0x4f1eda(0x206)](_0x3a6be1),'ack':!![]}),this[_0x4f1eda(0x2be)](_0x4f1eda(0x1ec),{'val':JSON[_0x4f1eda(0x206)](_0x45de76),'ack':!![]});}async[a0_0x4c0f87(0x25c)](_0x1559f6){const _0x524f94=a0_0x4c0f87;if(!this[_0x524f94(0x2c6)]['infrasoundEnabled']||typeof _0x1559f6!==_0x524f94(0x231))return;const _0x4f2e4e=this[_0x524f94(0x2c6)][_0x524f94(0x2af)]||0.04;this[_0x524f94(0x1ef)]['push']({'timestamp':Date[_0x524f94(0x315)](),'value':_0x1559f6}),this[_0x524f94(0x1ef)][_0x524f94(0x275)]>0x64&&this[_0x524f94(0x1ef)]['shift'](),_0x1559f6>_0x4f2e4e&&!this['infrasoundLocked']&&(this[_0x524f94(0x267)]=!![],this[_0x524f94(0x2b4)][_0x524f94(0x1df)]('ðŸ”Š\x20Infraschall-Alarm:\x20'+_0x1559f6[_0x524f94(0x23d)](0x4)+_0x524f94(0x278)+_0x4f2e4e+_0x524f94(0x2f8)),await this['triggerInfrasoundCorrelation'](_0x1559f6,_0x524f94(0x1d2)),setTimeout(()=>{const _0x5bc2ed=_0x524f94;this[_0x5bc2ed(0x267)]=![];},0x5*0x3c*0x3e8));}async[a0_0x4c0f87(0x2c1)](_0x32ad4f,_0x1eccf8){const _0x4ec5c7=a0_0x4c0f87;if(!this[_0x4ec5c7(0x1e1)]){const _0x285dbf=this[_0x4ec5c7(0x253)][_0x4ec5c7(0x1cf)](0x0,0xa),_0x1131c0=_0x285dbf[_0x4ec5c7(0x1f4)](_0x3b65cc=>new Date(_0x3b65cc[_0x4ec5c7(0x21c)])[_0x4ec5c7(0x216)]('de-DE')+_0x4ec5c7(0x28b)+(_0x3b65cc[_0x4ec5c7(0x2fd)]||_0x4ec5c7(0x31a))+':\x20'+_0x3b65cc[_0x4ec5c7(0x2b1)])[_0x4ec5c7(0x252)]('\x0a');this[_0x4ec5c7(0x2b4)][_0x4ec5c7(0x1df)](_0x4ec5c7(0x2ff)+_0x32ad4f[_0x4ec5c7(0x23d)](0x4)+_0x4ec5c7(0x247)+_0x1131c0);if(this['config']['infrasoundArmingId'])try{const _0x4bbd72=await this[_0x4ec5c7(0x26b)](this[_0x4ec5c7(0x2c6)]['infrasoundArmingId']);_0x4bbd72&&_0x4bbd72[_0x4ec5c7(0x1f7)]===!![]&&(await this['setStateAsync']('analysis.safety.infrasoundAlert',{'val':JSON[_0x4ec5c7(0x206)]({'timestamp':Date[_0x4ec5c7(0x315)](),'pressure':_0x32ad4f['toFixed'](0x4),'eventType':_0x1eccf8,'recentEvents':_0x285dbf[_0x4ec5c7(0x1cf)](0x0,0x3)}),'ack':!![]}),this[_0x4ec5c7(0x2b4)]['error'](_0x4ec5c7(0x207)));}catch(_0x12efd2){}}else this[_0x4ec5c7(0x2b4)][_0x4ec5c7(0x1fd)]('ðŸ”Š\x20Infraschall:\x20'+_0x32ad4f[_0x4ec5c7(0x23d)](0x4)+_0x4ec5c7(0x310));}async[a0_0x4c0f87(0x22e)](_0x158187){const _0xac9141=a0_0x4c0f87;if(!_0x158187||!_0x158187[_0xac9141(0x2fd)])return;try{const _0x35c99d=(this['config']['devices']||[])[_0xac9141(0x293)](_0xcb78f6=>_0xcb78f6[_0xac9141(0x2fd)]===_0x158187[_0xac9141(0x2fd)]&&(_0xcb78f6[_0xac9141(0x28a)]===_0xac9141(0x2ae)||_0xcb78f6[_0xac9141(0x28a)]===_0xac9141(0x32a)));if(_0x35c99d['length']===0x0)return;const _0x573c3e=await this['getForeignStateAsync'](_0x35c99d[0x0]['id']);if(!_0x573c3e||typeof _0x573c3e['val']!==_0xac9141(0x231))return;const _0x4b0bf0=_0x573c3e[_0xac9141(0x1f7)];let _0x2ba842=null;if(this[_0xac9141(0x2c6)][_0xac9141(0x218)]){const _0x561902=await this[_0xac9141(0x26b)](this[_0xac9141(0x2c6)][_0xac9141(0x218)]);_0x561902&&typeof _0x561902['val']===_0xac9141(0x231)&&(_0x2ba842=_0x561902[_0xac9141(0x1f7)]);}if(_0x2ba842!==null){const _0x32a73e=Math['abs'](_0x4b0bf0-_0x2ba842);_0x32a73e>0x3&&(this[_0xac9141(0x2b4)][_0xac9141(0x1fd)](_0xac9141(0x264)+_0x158187['location']+':\x20Temp-Differenz\x20'+_0x32a73e[_0xac9141(0x23d)](0x1)+_0xac9141(0x2d9)+_0x4b0bf0+_0xac9141(0x2df)+_0x2ba842+_0xac9141(0x33a)),await this['setStateAsync']('analysis.ventilation.lastWindow',{'val':JSON[_0xac9141(0x206)]({'room':_0x158187[_0xac9141(0x2fd)],'timestamp':Date['now'](),'tempDiff':_0x32a73e[_0xac9141(0x23d)](0x1),'recommendation':_0x32a73e>0x5?'Gute\x20LÃ¼ftungsmÃ¶glichkeit!':'LÃ¼ften\x20empfohlen'}),'ack':!![]}));}}catch(_0x452022){this[_0xac9141(0x2b4)]['warn'](_0xac9141(0x28f)+_0x452022[_0xac9141(0x299)]);}}async[a0_0x4c0f87(0x1e5)](_0x5c0d83){const _0x2d7ff7=a0_0x4c0f87;if(!_0x5c0d83||typeof _0x5c0d83!=='object')return;const _0x19e636={'timestamp':_0x5c0d83[_0x2d7ff7(0x21c)]||Date['now'](),'id':_0x5c0d83['id']||Date['now']()[_0x2d7ff7(0x2de)](),'name':_0x5c0d83[_0x2d7ff7(0x2b1)]||_0x2d7ff7(0x20a),'type':_0x5c0d83[_0x2d7ff7(0x28a)]||_0x2d7ff7(0x326),'location':_0x5c0d83['location']||_0x2d7ff7(0x31a),'value':_0x5c0d83[_0x2d7ff7(0x250)]||null};this[_0x2d7ff7(0x253)][_0x2d7ff7(0x230)](_0x19e636);if(this[_0x2d7ff7(0x253)]['length']>0x1388)this[_0x2d7ff7(0x253)]['pop']();await this['setStateAsync'](_0x2d7ff7(0x23b),{'val':JSON[_0x2d7ff7(0x206)](this[_0x2d7ff7(0x253)]),'ack':!![]}),this[_0x2d7ff7(0x2b4)][_0x2d7ff7(0x1fd)](_0x2d7ff7(0x23a)+_0x19e636['name']+'\x20('+_0x19e636[_0x2d7ff7(0x2fd)]+')');}[a0_0x4c0f87(0x259)](_0xe000be){}}function a0_0x1999(_0x8d3352,_0x4744e0){const _0x1fb271=a0_0x2735();return a0_0x1999=function(_0x55fe70,_0x310fbc){_0x55fe70=_0x55fe70-0x1cb;let _0x273501=_0x1fb271[_0x55fe70];return _0x273501;},a0_0x1999(_0x8d3352,_0x4744e0);}if(require['main']!==module)module[a0_0x4c0f87(0x1fb)]=_0x15c107=>new CogniLiving(_0x15c107);else new CogniLiving();