function a0_0x4542(_0xcc5f2e,_0x4c5d1a){const _0x47ef2a=a0_0x2901();return a0_0x4542=function(_0x5051bc,_0x202d0f){_0x5051bc=_0x5051bc-0xe6;let _0x2901da=_0x47ef2a[_0x5051bc];return _0x2901da;},a0_0x4542(_0xcc5f2e,_0x4c5d1a);}const a0_0x2a41a9=a0_0x4542;(function(_0x1d2b44,_0x14eda3){const _0x457f45=a0_0x4542,_0x3f19f4=_0x1d2b44();while(!![]){try{const _0x11c558=parseInt(_0x457f45(0x1d6))/0x1*(parseInt(_0x457f45(0x1da))/0x2)+parseInt(_0x457f45(0x118))/0x3*(-parseInt(_0x457f45(0x22f))/0x4)+-parseInt(_0x457f45(0xe6))/0x5+parseInt(_0x457f45(0x167))/0x6*(-parseInt(_0x457f45(0xff))/0x7)+parseInt(_0x457f45(0x134))/0x8*(parseInt(_0x457f45(0x119))/0x9)+parseInt(_0x457f45(0x1b5))/0xa+-parseInt(_0x457f45(0x191))/0xb*(-parseInt(_0x457f45(0x215))/0xc);if(_0x11c558===_0x14eda3)break;else _0x3f19f4['push'](_0x3f19f4['shift']());}catch(_0x160214){_0x3f19f4['push'](_0x3f19f4['shift']());}}}(a0_0x2901,0xbd0b4));const a0_0x202d0f=(function(){let _0x36f62f=!![];return function(_0x1d0d82,_0x2f3c58){const _0xaa8be8=_0x36f62f?function(){const _0x29d5de=a0_0x4542;if(_0x2f3c58){const _0x333cb0=_0x2f3c58[_0x29d5de(0x14a)](_0x1d0d82,arguments);return _0x2f3c58=null,_0x333cb0;}}:function(){};return _0x36f62f=![],_0xaa8be8;};}()),a0_0x5051bc=a0_0x202d0f(this,function(){const _0x764032=a0_0x4542;return a0_0x5051bc[_0x764032(0x135)]()[_0x764032(0x19b)](_0x764032(0xf4))[_0x764032(0x135)]()[_0x764032(0x1b2)](a0_0x5051bc)[_0x764032(0x19b)]('(((.+)+)+)+$');});a0_0x5051bc();'use strict';const utils=require(a0_0x2a41a9(0x13a)),{GoogleGenerativeAI}=require('@google/generative-ai'),schedule=require('node-schedule'),HISTORY_MAX_SIZE=0x32,RAW_LOG_MAX_SIZE=0x5dc,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL=a0_0x2a41a9(0x235),LTM_SCHEDULE=a0_0x2a41a9(0x272),MODE_RESET_SCHEDULE=a0_0x2a41a9(0x218),ANALYSIS_HISTORY_MAX_SIZE=0x64,LTM_DP_RAW_LOG=a0_0x2a41a9(0x21d),LTM_DP_DAILY_DIGESTS=a0_0x2a41a9(0x1ab),LTM_DP_STATUS='LTM.processingStatus',LTM_DP_TRIGGER_DIGEST=a0_0x2a41a9(0x1bf),LTM_DP_BASELINE_STATUS=a0_0x2a41a9(0x233),LTM_DP_DRIFT_CHANNEL='LTM.driftAnalysis',LTM_DP_DRIFT_STATUS=a0_0x2a41a9(0x116),LTM_DP_DRIFT_DETAILS=a0_0x2a41a9(0x269),LTM_DP_DRIFT_LAST_CHECK='LTM.driftAnalysis.lastCheck',SYSTEM_DP_MODE='system.mode',HARD_IGNORE_TERMS=[a0_0x2a41a9(0x17d),a0_0x2a41a9(0x23b),a0_0x2a41a9(0x25f),a0_0x2a41a9(0x1c2),'lowbat',a0_0x2a41a9(0x1bc),a0_0x2a41a9(0x1d8),a0_0x2a41a9(0x276),a0_0x2a41a9(0x241),'fault',a0_0x2a41a9(0x14d),'direction',a0_0x2a41a9(0x278),a0_0x2a41a9(0x1c6),a0_0x2a41a9(0x204),a0_0x2a41a9(0x1c1),'reachable',a0_0x2a41a9(0x13c)],BAD_NAMES=[a0_0x2a41a9(0x1a9),a0_0x2a41a9(0x180),a0_0x2a41a9(0x24b),'level',a0_0x2a41a9(0x16c),'brightness','on','off',a0_0x2a41a9(0x1dd),a0_0x2a41a9(0x140),a0_0x2a41a9(0x259),a0_0x2a41a9(0x1f2),'cover',a0_0x2a41a9(0x196),a0_0x2a41a9(0x1f0),'presence',a0_0x2a41a9(0x24f),a0_0x2a41a9(0x1b9),'humidity',a0_0x2a41a9(0x228),a0_0x2a41a9(0x1fe),a0_0x2a41a9(0x243),a0_0x2a41a9(0x248),a0_0x2a41a9(0x1a1),'set_temperature'],ADAPTER_BLACKLIST=['system.',a0_0x2a41a9(0x1bb),'info.',a0_0x2a41a9(0x217),a0_0x2a41a9(0x124),a0_0x2a41a9(0x1cb),a0_0x2a41a9(0x19d),a0_0x2a41a9(0x1c4),a0_0x2a41a9(0x20f),a0_0x2a41a9(0x1b1),a0_0x2a41a9(0x12f)],SYSTEM_MODES={'NORMAL':'normal','VACATION':'vacation','PARTY':a0_0x2a41a9(0x261),'GUEST':a0_0x2a41a9(0x211)},AUTO_RESET_MODES=[SYSTEM_MODES[a0_0x2a41a9(0x125)],SYSTEM_MODES['GUEST']],PERSONA_MAPPING={'generic':a0_0x2a41a9(0x10f),'senior_aal':a0_0x2a41a9(0x193),'family':a0_0x2a41a9(0x200),'single_comfort':a0_0x2a41a9(0x128),'security':a0_0x2a41a9(0x214)};class CogniLiving extends utils['Adapter']{constructor(_0xd7c67f){const _0x48cde8=a0_0x2a41a9;super({..._0xd7c67f,'name':_0x48cde8(0x1ef)}),this[_0x48cde8(0x1e2)]=[],this[_0x48cde8(0x132)]=[],this[_0x48cde8(0x213)]=[],this[_0x48cde8(0x147)]=[],this[_0x48cde8(0x14e)]=[],this[_0x48cde8(0x183)]={},this[_0x48cde8(0x239)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x48cde8(0x1e1)]=!![],this['exitTimer']=null,this[_0x48cde8(0x110)]=null,this[_0x48cde8(0xea)]=![],this[_0x48cde8(0x1f7)]=null,this[_0x48cde8(0x15b)]=null,this[_0x48cde8(0x26a)]=SYSTEM_MODES[_0x48cde8(0x222)],this[_0x48cde8(0x22d)]=![],this['lastAlertState']=![],this[_0x48cde8(0x14c)]=_0x48cde8(0x170),this['analysisTimer']=null,this[_0x48cde8(0x176)]=null,this['modeResetJob']=null,this[_0x48cde8(0x244)]=null,this['briefingJob']=null,this['on'](_0x48cde8(0x19f),this[_0x48cde8(0x22a)]['bind'](this)),this['on'](_0x48cde8(0x1e3),this['onStateChange']['bind'](this)),this['on'](_0x48cde8(0x1fa),this['onUnload'][_0x48cde8(0x1b7)](this)),this['on']('message',this[_0x48cde8(0x175)][_0x48cde8(0x1b7)](this));}async[a0_0x2a41a9(0x22a)](){const _0x4071fb=a0_0x2a41a9;this['log']['info']('cogni-living\x20adapter\x20starting\x20(v'+this['version']+_0x4071fb(0x1ff)),await initZombies(this),this[_0x4071fb(0x14b)]['licenseKey']=this[_0x4071fb(0x14b)]['licenseKey']||'';try{this[_0x4071fb(0x22d)]=await checkLicense(this,this['config'][_0x4071fb(0x245)]);}catch(_0x1681e5){}if(!this[_0x4071fb(0x14b)][_0x4071fb(0x234)]||this[_0x4071fb(0x14b)][_0x4071fb(0x234)]<0.1)this[_0x4071fb(0x14b)]['inactivityThresholdHours']=0xc;await initHistory(this),await initSystemConfig(this);if(this[_0x4071fb(0x14b)][_0x4071fb(0x10a)])try{this[_0x4071fb(0x1f7)]=new GoogleGenerativeAI(this[_0x4071fb(0x14b)][_0x4071fb(0x10a)]),this[_0x4071fb(0x15b)]=this[_0x4071fb(0x1f7)][_0x4071fb(0x112)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x4071fb(0x225)}}),this['log'][_0x4071fb(0x1ad)](_0x4071fb(0x220));}catch(_0x16fc48){this[_0x4071fb(0x1c7)][_0x4071fb(0x241)](_0x4071fb(0x1f1)+_0x16fc48['message']);}await createAllObjects(this),await loadSystemMode(this),await loadRawEventLog(this),await loadDailyDigests(this),this[_0x4071fb(0x113)](_0x4071fb(0x107)),this['subscribeStates'](LTM_DP_TRIGGER_DIGEST),this[_0x4071fb(0x113)](_0x4071fb(0x184)),this[_0x4071fb(0x113)](_0x4071fb(0x144)),this[_0x4071fb(0x113)]('analysis.automation.triggerAction'),this[_0x4071fb(0x113)]('analysis.automation.autoApply'),await initSensorSubscriptions(this),await initPresenceSubscriptions(this),await setupTelegramListener(this);if(this['analysisTimer'])clearInterval(this[_0x4071fb(0x23f)]);const _0x232729=this[_0x4071fb(0x14b)]['analysisInterval']||0xf;_0x232729>0x0&&(this['log'][_0x4071fb(0x1ad)](_0x4071fb(0x238)+_0x232729+_0x4071fb(0x15d)),this[_0x4071fb(0x23f)]=setInterval(()=>{runAutopilot(this);},_0x232729*0x3c*0x3e8)),setupLtmScheduler(this),setupModeResetScheduler(this),setupDriftAnalysisScheduler(this),setupBriefingScheduler(this);}['onUnload'](_0x6c0e6){const _0x16d5d9=a0_0x2a41a9;if(this['analysisTimer'])clearInterval(this[_0x16d5d9(0x23f)]);if(this[_0x16d5d9(0x244)])clearInterval(this['driftAnalysisTimer']);if(this['ltmJob'])this['ltmJob'][_0x16d5d9(0x131)]();if(this['modeResetJob'])this[_0x16d5d9(0x13f)]['cancel']();if(this[_0x16d5d9(0x1db)])this[_0x16d5d9(0x1db)][_0x16d5d9(0x131)]();if(this['exitTimer'])clearTimeout(this[_0x16d5d9(0x15e)]);if(this['exitGraceTimer'])clearTimeout(this[_0x16d5d9(0x110)]);_0x6c0e6();}async[a0_0x2a41a9(0x143)](_0x150ce8,_0x2afea6){const _0x5e39d9=a0_0x2a41a9;if(!_0x2afea6)return;if(_0x150ce8['includes'](_0x5e39d9(0x11b))&&_0x150ce8['endsWith']('communicate.request')&&_0x2afea6[_0x5e39d9(0x279)]){await handleTelegramResponse(this,_0x2afea6['val']);return;}if(_0x150ce8===this[_0x5e39d9(0x105)]+'.'+SYSTEM_DP_MODE){_0x2afea6[_0x5e39d9(0x279)]&&Object[_0x5e39d9(0xf8)](SYSTEM_MODES)[_0x5e39d9(0x102)](_0x2afea6[_0x5e39d9(0x279)])&&(this['currentSystemMode']=_0x2afea6[_0x5e39d9(0x279)],_0x2afea6[_0x5e39d9(0x279)]===SYSTEM_MODES['VACATION']?await setPresence(this,![]):await setPresence(this,!![]));if(!_0x2afea6[_0x5e39d9(0x142)])this[_0x5e39d9(0x15a)](_0x150ce8,{'val':this['currentSystemMode'],'ack':!![]});return;}if(!_0x2afea6[_0x5e39d9(0x142)]){_0x150ce8[_0x5e39d9(0x102)](_0x5e39d9(0x107))&&_0x2afea6[_0x5e39d9(0x279)]&&(this[_0x5e39d9(0x15a)](_0x150ce8,{'val':![],'ack':!![]}),runGeminiAnalysis(this));if(_0x150ce8[_0x5e39d9(0x102)](_0x5e39d9(0x1a8))&&_0x2afea6[_0x5e39d9(0x279)]){this[_0x5e39d9(0x15a)](_0x150ce8,{'val':![],'ack':!![]});if(this['isProVersion'])createDailyDigest(this);}_0x150ce8[_0x5e39d9(0x102)]('triggerBriefing')&&_0x2afea6[_0x5e39d9(0x279)]&&(this[_0x5e39d9(0x15a)](_0x150ce8,{'val':![],'ack':!![]}),sendMorningBriefing(this));_0x150ce8[_0x5e39d9(0x102)](_0x5e39d9(0x1c8))&&_0x2afea6[_0x5e39d9(0x279)]&&(this['setState'](_0x150ce8,{'val':![],'ack':!![]}),executeAutomationAction(this));return;}if(this[_0x5e39d9(0x14b)][_0x5e39d9(0x199)]&&this[_0x5e39d9(0x14b)][_0x5e39d9(0x199)]['includes'](_0x150ce8)){await checkWifiPresence(this);return;}const _0x35b787=(this[_0x5e39d9(0x14b)][_0x5e39d9(0x1e7)]||[])[_0x5e39d9(0x1a7)](_0x45c488=>_0x45c488['id']===_0x150ce8);if(_0x35b787)processSensorEvent(this,_0x150ce8,_0x2afea6,_0x35b787);}async[a0_0x2a41a9(0x175)](_0xcd5a5b){const _0x1a3446=a0_0x2a41a9;if(typeof _0xcd5a5b==='object'&&_0xcd5a5b[_0x1a3446(0x1b0)])try{if(_0xcd5a5b[_0x1a3446(0x227)]===_0x1a3446(0x18a)){}else{if(_0xcd5a5b['command']==='testNotification'){}else{if(_0xcd5a5b[_0x1a3446(0x227)]==='getLtmData'){if(!this[_0x1a3446(0x22d)])return this[_0x1a3446(0x114)](_0xcd5a5b[_0x1a3446(0x120)],_0xcd5a5b[_0x1a3446(0x227)],{'success':![],'isPro':![]},_0xcd5a5b['callback']);let _0x2a9846={'status':_0x1a3446(0x273),'details':'','lastCheck':0x0};try{_0x2a9846[_0x1a3446(0x196)]=(await this['getStateAsync'](LTM_DP_DRIFT_STATUS))['val'],_0x2a9846[_0x1a3446(0x1d7)]=(await this[_0x1a3446(0x148)](LTM_DP_DRIFT_DETAILS))[_0x1a3446(0x279)],_0x2a9846[_0x1a3446(0x188)]=(await this[_0x1a3446(0x148)](LTM_DP_DRIFT_LAST_CHECK))[_0x1a3446(0x279)];}catch(_0x4c0292){}const _0x3fe760=this[_0x1a3446(0x132)]||[];this['sendTo'](_0xcd5a5b[_0x1a3446(0x120)],_0xcd5a5b[_0x1a3446(0x227)],{'success':!![],'isPro':!![],'dailyDigests':this['dailyDigests'],'driftAnalysis':_0x2a9846,'analysisHistory':_0x3fe760},_0xcd5a5b[_0x1a3446(0x237)]);}else{if(_0xcd5a5b['command']==='getOverviewData'){const _0x4dcd59=this[_0x1a3446(0x14e)][_0x1a3446(0x108)],_0x2a7f8e=new Date(),_0x20fe64=new Date(_0x2a7f8e['getFullYear'](),_0x2a7f8e['getMonth'](),_0x2a7f8e[_0x1a3446(0x189)]())[_0x1a3446(0x137)](),_0xef3439=this[_0x1a3446(0x147)][_0x1a3446(0x25a)](_0xb43579=>new Date(_0xb43579['timestamp'])[_0x1a3446(0x137)]()>_0x20fe64)[_0x1a3446(0x108)],_0x5caa26=new Array(0x18)['fill'](0x0);this[_0x1a3446(0x147)][_0x1a3446(0x21f)](_0x588846=>{const _0x1ce63c=_0x1a3446,_0x44f073=new Date(_0x588846[_0x1ce63c(0x21a)]);_0x44f073[_0x1ce63c(0x137)]()>_0x20fe64&&_0x5caa26[_0x44f073[_0x1ce63c(0x1a0)]()]++;});let _0x1db7d3={'status':_0x1a3446(0x273)};try{_0x1db7d3[_0x1a3446(0x196)]=(await this['getStateAsync'](LTM_DP_DRIFT_STATUS))[_0x1a3446(0x279)];}catch(_0x2905df){}let _0x45e9fe='';try{const _0xf8ba0a=await this[_0x1a3446(0x148)](_0x1a3446(0x1a2));_0x45e9fe=_0xf8ba0a?_0xf8ba0a['val']:'';}catch(_0x280c5c){}let _0x5a18c1=null;!this['geminiModel']&&(_0x5a18c1=this[_0x1a3446(0x14b)][_0x1a3446(0x10a)]?_0x1a3446(0x104):_0x1a3446(0x229));let _0x35ba06={'detected':![],'description':'','targetId':'','targetValue':'','autoApply':![]};try{const _0x25d4f7=await this[_0x1a3446(0x148)](_0x1a3446(0x1ea)),_0x22f2b4=await this[_0x1a3446(0x148)](_0x1a3446(0x181)),_0x5b86da=await this['getStateAsync'](_0x1a3446(0x22b)),_0x28ac15=await this[_0x1a3446(0x148)](_0x1a3446(0x154)),_0x23d2fc=await this[_0x1a3446(0x148)](_0x1a3446(0x1ee));_0x25d4f7&&_0x25d4f7[_0x1a3446(0x279)]&&(_0x35ba06[_0x1a3446(0x258)]=!![],_0x35ba06['description']=_0x22f2b4?_0x22f2b4[_0x1a3446(0x279)]:'',_0x35ba06['targetId']=_0x5b86da?_0x5b86da[_0x1a3446(0x279)]:'',_0x35ba06[_0x1a3446(0x275)]=_0x28ac15?_0x28ac15['val']:''),_0x35ba06[_0x1a3446(0x12e)]=_0x23d2fc?!!_0x23d2fc[_0x1a3446(0x279)]:![];}catch(_0x13baee){}this[_0x1a3446(0x114)](_0xcd5a5b['from'],_0xcd5a5b[_0x1a3446(0x227)],{'success':!![],'eventHistory':this['eventHistory'][_0x1a3446(0x201)](0x0,0xf),'stats':{'digestCount':_0x4dcd59,'eventCountToday':_0xef3439,'hourlyActivity':_0x5caa26,'driftStatus':_0x1db7d3[_0x1a3446(0x196)],'isPresent':this[_0x1a3446(0x1e1)],'presenceWho':_0x45e9fe,'minDays':this[_0x1a3446(0x14b)]['minDaysForBaseline']||0x7,'stbDays':this['config']['ltmStbWindowDays']||0xe,'ltbDays':this[_0x1a3446(0x14b)]['ltmLtbWindowDays']||0x3c,'systemError':_0x5a18c1},'automation':_0x35ba06},_0xcd5a5b['callback']);}else{if(_0xcd5a5b[_0x1a3446(0x227)]===_0x1a3446(0x165)){}else{if(_0xcd5a5b[_0x1a3446(0x227)]===_0x1a3446(0xed))try{const _0x3153cb=await scanForDevices(this,_0xcd5a5b['message']||{});this[_0x1a3446(0x114)](_0xcd5a5b[_0x1a3446(0x120)],_0xcd5a5b['command'],{'success':!![],'devices':_0x3153cb},_0xcd5a5b[_0x1a3446(0x237)]);}catch(_0x13703e){this[_0x1a3446(0x114)](_0xcd5a5b[_0x1a3446(0x120)],_0xcd5a5b['command'],{'success':![],'error':_0x13703e['message']},_0xcd5a5b['callback']);}else{if(_0xcd5a5b[_0x1a3446(0x227)]===_0x1a3446(0x23c)){}else{if(_0xcd5a5b['command']==='simulateButler'){}else{if(_0xcd5a5b[_0x1a3446(0x227)]==='submitFeedback'){}else _0xcd5a5b[_0x1a3446(0x227)]===_0x1a3446(0x155)&&(this[_0x1a3446(0x1c7)]['info'](_0x1a3446(0x187)),await this['setStateAsync'](_0x1a3446(0x1ea),{'val':![],'ack':!![]}),await this[_0x1a3446(0x121)](_0x1a3446(0x181),{'val':'','ack':!![]}),this[_0x1a3446(0x114)](_0xcd5a5b[_0x1a3446(0x120)],_0xcd5a5b[_0x1a3446(0x227)],{'success':!![]},_0xcd5a5b[_0x1a3446(0x237)]));}}}}}}}}}catch(_0x7bab2d){}}}async function initZombies(_0x34bd85){}function a0_0x2901(){const _0x28560b=['name','application/json','.\x20ZUSATZ:\x20','command','power','Kein\x20API\x20Key!','onReady','analysis.automation.targetId','lights','isProVersion','event','12yxyCNM','KALENDER\x20ERROR:\x20','system.config','[TEST]\x20','LTM.baselineStatus','inactivityThresholdHours','models/gemini-flash-latest','text','callback','Starting\x20Autopilot\x20(','systemConfig','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','scriptEnabled','getCalendarNames','analysis.isEmergency','generateContent','analysisTimer','isArray','error','notifyPushoverEnabled','setpoint','driftAnalysisTimer','licenseKey','role','stringify','valve','briefingEnabled','Trigger\x20Briefing\x20(Test)','state','schalter','KALENDER:\x20Keine\x20relevanten\x20Termine','Feedback\x20saved:\x20','occupancy','siren','getCalendarNames\x20Error:\x20','Scanning\x20for\x20devices\x20(V7:\x20Basics\x20+\x20Hard\x20Filter\x20Priority)...','daswetter','analysis.health.sleepScore','useWeather','lock','getForeignObjectsAsync','detected','shutter','filter','Party','\x20hours.\x20Potential\x20incapacitation.','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','Health\x20Notes','update','\x20sensors...','party','send','generic','uuid','KALENDER:\x20','sort','Urlaub','notifyPushoverRecipient','LTM.driftAnalysis.driftDetails','currentSystemMode','Success:\x20Compressed\x20','exports','boolean','Gast','WETTER:\x20','sendToAsync','number','0\x203\x20*\x20*\x20*','N/A','ðŸŒ…\x20Daily\x20Briefing:\x0a','targetValue','maintenance','notifyTelegramEnabled','stick_unreach','val','fenster','3356375qyYHTc','minDaysForBaseline','sleepScore','response','isGracePeriodActive','ðŸ“ž\x20User\x20requested\x20CALL\x20via\x20Telegram!','analysis.analysisHistory','scanDevices','setObjectNotExistsAsync','ðŸ“¡\x20Hooking\x20into\x20','enum','analysis.alertReason','Trigger\x20Analysis','08:00','(((.+)+)+)+$','startsWith','calendarInstance','system.meta.uuid','values','driftDetails','scheduleJob','split','Skipped\x20(No\x20AI\x20or\x20Data)','LTM','.Summary.Current','70007vvGpzh','expire','/100,\x20AktivitÃ¤t\x20seit\x2004:00:\x20','includes','\x20presence\x20devices...','KI-Modell\x20nicht\x20initialisiert','namespace','thermostat','analysis.trigger','length','indicator','geminiApiKey','catch','PRO-','notifyEmailEnabled','dimmer','Analysiere\x20ausgewogen\x20auf\x20Gesundheit,\x20Sicherheit\x20und\x20Komfort.','exitGraceTimer','analysis.automation','getGenerativeModel','subscribeStates','sendTo','analysis.automation.triggerAction','LTM.driftAnalysis.baselineDrift','light','611181zgVhwh','25983HgceWx','doors','telegram','enum.rooms.*','WETTER\x20ERROR:\x20','retry','json','from','setStateAsync','lampe','pop','history.','PARTY','Briefing\x20Sched\x20Error:\x20','analysis.health','Fokus\x20auf\x20Komfort.','toISOString','Feedback\x20Log','splice','Kalender:\x20Deaktiviert','\x20Tage)','autoApply','simple-api.','system','cancel','analysisHistory','analysis.deviationFromBaseline','1360ntzcOu','toString','subscribeForeignStatesAsync','getTime','.communicate.request','getForeignStateAsync','@iobroker/adapter-core','main','link_quality','analysis.isAlert','uuid-not-found','modeResetJob','position','livingContext','ack','onStateChange','analysis.triggerBriefing','summary','prÃ¤senz','rawEventLog','getStateAsync','.\x20OUTPUT:\x20Nur\x20Text.','apply','config','systemUUID','working','dailyDigests','weather','Generating\x20Morning\x20Briefing...','custom','uuid-error','button','analysis.automation.targetValue','dismissAutomation','door','Action','setHours','analysis.health.notes','setState','geminiModel','briefingTime','\x20min).','exitTimer','N/A\x20(Learning)','members','Activity\x20Summary','indexOf','Who\x20is\x20present?','Health\x20&\x20Sleep\x20Analysis','getEnums','Restlessness\x20Level','726KNqODg','write','Error\x20checking\x20WiFi:\x20','system.isPresent','Raw\x20Log','value','ltmLtbWindowDays','health','ðŸ“ž\x20RÃœCKRUF\x20BITTE!\x20Der\x20Bewohner\x20hat\x20den\x20RÃ¼ckruf-Button\x20gedrÃ¼ckt.','unknown','Last\x20raw\x20event','window','.forecast.current.state','Alert\x20Reason','onMessage','ltmJob','Last\x20Result','accuweather.0','.NextHours.Location_1.Day_1.current.symbol_desc','sensor','ltmStbWindowDays','join','scriptProblem','Drift\x20Analysis','KALENDER:\x20Keine\x20Kalender\x20ausgewÃ¤hlt\x20(Bitte\x20in\x20Settings\x20konfigurieren)','currentposition','analysis.automation.description','temp','sensorLastValues','system.mode','Started\x20at\x20','weatherInstance','User\x20dismissed\x20automation\x20proposal.','lastCheck','getDate','testApiKey','Baseline\x20Status','Auto\x20Apply\x20Rule','rollladen','useCalendar','Target\x20ID','Description','6696349OETFNu','weatherunderground.0','PRIORITÃ„T:\x20Gesundheit\x20und\x20Sicherheit\x20fÃ¼r\x20Senioren\x20(AAL).','baselineDrift','ltmDriftCheckIntervalHours','status','object','toFixed','presenceDevices','latitude','search','longitude','icons-mfd.','extendObjectAsync','ready','getHours','actual_temperature','system.presenceWho','Aktiv\x20(','inactivityMonitoringEnabled','Deaktiviert\x20(Pro-Feature)','HARD\x20WATCHDOG:\x20No\x20sensor\x20activity\x20detected\x20for\x20','find','triggerDailyDigest','targetposition','calendarSelection','LTM.dailyDigests','city','info','tÃ¼r','channel','message','javascript.','constructor','unshift','Drift\x20Status','10862430yrogjs','VACATION','bind','humidity','temperature','COGNI_REQUEST_CALL','admin.','rssi','notifyEmailRecipient','endsWith','LTM.triggerDailyDigest','analysis.health.restlessness','firmware','unreach','aiPersona','flot.','analysis.comfortSuggestion','config_pending','log','automation.triggerAction','\x0aSTB:\x20','Comfort\x20Suggestion','material.','Cogni-Living','indicator.alarm.fire','notifyTelegramInstance','getForeignObjectAsync','analysis.automation.suggestedAction','ðŸš¨\x20EMERGENCY','analysis.activitySummary','ical.0','Normal','now','134tKHvQK','details','connection','warn','7050OAzBiW','briefingJob','toLowerCase','switch','System\x20Mode','string','Error\x20reading\x20calendar\x20table:\x20','isPresent','eventHistory','stateChange','System\x20Status\x20&\x20Control','Briefing\x20Error:\x20','events.history','devices','Subscribing\x20to\x20','ROLLE:\x20FÃ¼rsorglicher\x20Assistent.\x20AUFGABE:\x20Schreibe\x20eine\x20kurze,\x20beruhigende\x20\x22Guten\x20Morgen\x22-Nachricht.\x20PERSONA:\x20','analysis.automation.patternDetected','Pattern\x20Detected','native','WETTER:\x20Keine\x20Daten\x20gefunden','analysis.automation.autoApply','cogni-living','motion','Gemini\x20Init\x20Error:\x20','blind','substring','Target\x20Value','push','replace','genAI','time','Sending\x20notification:\x20\x22','unload','.\x20KONTEXT:\x20','analysis.comfortSummary','Error:\x20','energy',')\x20-\x20SAFE\x20MODE\x20V2','Fokus\x20auf\x20Familienroutinen.','slice','AI\x20Alert\x20Status','openweathermap','dutycycle','parse','.\x20DATEN:\x20Schlaf\x20','âœ…\x20User\x20confirmed\x20ALARM\x20via\x20Telegram.\x20Resetting\x20system.','\x20|\x20','Scheduling\x20Morning\x20Briefing\x20for\x20','analysis.lastResult','common','online','accuweather','some','echarts.','analysis.feedbackHistory','guest','activityLevel','feedbackHistory','PRIORITÃ„T:\x20Sicherheit.','24mZfdke','Comfort\x20Summary','vis.','0\x204\x20*\x20*\x20*','openweathermap.0','timestamp','_calName','Reset\x20Sched\x20Error:\x20','LTM.rawEventLog','none','forEach','Gemini\x20AI\x20initialized.','trim','NORMAL','\x20*\x20*\x20*'];a0_0x2901=function(){return _0x28560b;};return a0_0x2901();}async function initHistory(_0x4756aa){const _0x5e8a2e=a0_0x2a41a9;try{const _0x1ecd7d=await _0x4756aa[_0x5e8a2e(0x148)]('events.history');_0x1ecd7d&&_0x1ecd7d[_0x5e8a2e(0x279)]&&(_0x4756aa[_0x5e8a2e(0x1e2)]=JSON['parse'](_0x1ecd7d[_0x5e8a2e(0x279)]['toString']()));}catch(_0x3f2b91){_0x4756aa[_0x5e8a2e(0x1e2)]=[];}try{const _0xd40b63=await _0x4756aa[_0x5e8a2e(0x148)]('analysis.analysisHistory');if(_0xd40b63&&_0xd40b63['val'])_0x4756aa[_0x5e8a2e(0x132)]=JSON[_0x5e8a2e(0x205)](_0xd40b63[_0x5e8a2e(0x279)]['toString']());}catch(_0x220e5d){_0x4756aa[_0x5e8a2e(0x132)]=[];}}async function initSystemConfig(_0x160a6b){const _0x240340=a0_0x2a41a9;try{const _0x588a1a=await _0x160a6b[_0x240340(0x1cf)](_0x240340(0x231));_0x588a1a&&_0x588a1a[_0x240340(0x20b)]&&(_0x160a6b[_0x240340(0x239)]={'latitude':_0x588a1a['common'][_0x240340(0x19a)]||0x0,'longitude':_0x588a1a[_0x240340(0x20b)][_0x240340(0x19c)]||0x0,'city':_0x588a1a['common'][_0x240340(0x1ac)]||''});}catch(_0x12b5c9){}}async function checkLicense(_0x15c44f,_0x2e1ac4){const _0x2ff23d=a0_0x2a41a9;if(!_0x2e1ac4)return![];_0x15c44f[_0x2ff23d(0x14c)]=await getSystemUUID(_0x15c44f);if(_0x2e1ac4==='TEST-PRO-KEY'||_0x2e1ac4[_0x2ff23d(0xf5)](_0x2ff23d(0x10c)))return!![];return![];}async function getSystemUUID(_0x489584){const _0x35151f=a0_0x2a41a9;try{const _0xb07f34=await _0x489584[_0x35151f(0x1cf)](_0x35151f(0xf7));if(_0xb07f34&&_0xb07f34[_0x35151f(0x1ec)]&&_0xb07f34[_0x35151f(0x1ec)][_0x35151f(0x264)])return _0xb07f34[_0x35151f(0x1ec)][_0x35151f(0x264)];return _0x35151f(0x13e);}catch(_0x345473){return _0x35151f(0x152);}}async function createAllObjects(_0x475bb6){const _0x471947=a0_0x2a41a9;await checkSystemObjects(_0x475bb6),await _0x475bb6[_0x471947(0xee)](_0x471947(0x1a2),{'type':_0x471947(0x24b),'common':{'name':_0x471947(0x163),'type':_0x471947(0x1df),'role':_0x471947(0x236),'read':!![],'write':![],'def':''},'native':{}}),await _0x475bb6[_0x471947(0xee)]('events.lastEvent',{'type':_0x471947(0x24b),'common':{'name':_0x471947(0x171),'type':_0x471947(0x1df),'role':'json','read':!![],'write':![]},'native':{}}),await _0x475bb6['setObjectNotExistsAsync'](_0x471947(0x1e6),{'type':'state','common':{'name':'Event\x20History','type':_0x471947(0x1df),'role':_0x471947(0x11f),'read':!![],'write':![]},'native':{}}),await _0x475bb6[_0x471947(0xee)](_0x471947(0x107),{'type':_0x471947(0x24b),'common':{'name':_0x471947(0xf2),'type':_0x471947(0x26d),'role':'button','read':!![],'write':!![],'def':![]},'native':{}}),await _0x475bb6['setObjectNotExistsAsync'](_0x471947(0x144),{'type':_0x471947(0x24b),'common':{'name':_0x471947(0x24a),'type':_0x471947(0x26d),'role':'button','read':!![],'write':!![],'def':![]},'native':{}}),await _0x475bb6['setObjectNotExistsAsync'](_0x471947(0x20a),{'type':_0x471947(0x24b),'common':{'name':_0x471947(0x177),'type':_0x471947(0x1df),'role':'json','read':!![],'write':![]},'native':{}}),await _0x475bb6[_0x471947(0xee)]('analysis.isAlert',{'type':'state','common':{'name':_0x471947(0x202),'type':_0x471947(0x26d),'role':'indicator.alarm','read':!![],'write':![],'def':![]},'native':{}}),await _0x475bb6[_0x471947(0xee)](_0x471947(0x23d),{'type':'state','common':{'name':'AI\x20Emergency\x20Status','type':_0x471947(0x26d),'role':_0x471947(0x1cd),'read':!![],'write':![],'def':![]},'native':{}}),await _0x475bb6[_0x471947(0xee)](_0x471947(0xf1),{'type':_0x471947(0x24b),'common':{'name':_0x471947(0x174),'type':_0x471947(0x1df),'role':'text.alarm','read':!![],'write':![]},'native':{}}),await _0x475bb6[_0x471947(0xee)](_0x471947(0x1d2),{'type':_0x471947(0x24b),'common':{'name':_0x471947(0x161),'type':_0x471947(0x1df),'role':_0x471947(0x236),'read':!![],'write':![]},'native':{}}),await _0x475bb6[_0x471947(0xee)](_0x471947(0x133),{'type':_0x471947(0x24b),'common':{'name':'Deviation','type':_0x471947(0x1df),'role':_0x471947(0x24b),'read':!![],'write':![],'def':'N/A'},'native':{}}),await _0x475bb6['setObjectNotExistsAsync'](_0x471947(0x1fc),{'type':_0x471947(0x24b),'common':{'name':_0x471947(0x216),'type':_0x471947(0x1df),'role':_0x471947(0x236),'read':!![],'write':![]},'native':{}}),await _0x475bb6[_0x471947(0xee)](_0x471947(0x1c5),{'type':_0x471947(0x24b),'common':{'name':_0x471947(0x1ca),'type':_0x471947(0x1df),'role':_0x471947(0x236),'read':!![],'write':![]},'native':{}}),await _0x475bb6[_0x471947(0x19e)](_0x471947(0x111),{'type':_0x471947(0x1af),'common':{'name':'Automation\x20Proposals'},'native':{}}),await _0x475bb6[_0x471947(0xee)](_0x471947(0x1ea),{'type':'state','common':{'name':_0x471947(0x1eb),'type':_0x471947(0x26d),'role':_0x471947(0x109),'read':!![],'write':![],'def':![]},'native':{}}),await _0x475bb6['setObjectNotExistsAsync'](_0x471947(0x181),{'type':_0x471947(0x24b),'common':{'name':_0x471947(0x190),'type':'string','role':_0x471947(0x236),'read':!![],'write':![]},'native':{}}),await _0x475bb6[_0x471947(0xee)](_0x471947(0x1d0),{'type':_0x471947(0x24b),'common':{'name':_0x471947(0x157),'type':_0x471947(0x1df),'role':_0x471947(0x236),'read':!![],'write':![]},'native':{}}),await _0x475bb6[_0x471947(0xee)](_0x471947(0x22b),{'type':_0x471947(0x24b),'common':{'name':_0x471947(0x18f),'type':_0x471947(0x1df),'role':_0x471947(0x236),'read':!![],'write':![]},'native':{}}),await _0x475bb6['setObjectNotExistsAsync'](_0x471947(0x154),{'type':_0x471947(0x24b),'common':{'name':_0x471947(0x1f4),'type':_0x471947(0x1df),'role':_0x471947(0x236),'read':!![],'write':![]},'native':{}}),await _0x475bb6[_0x471947(0xee)](_0x471947(0x1ee),{'type':_0x471947(0x24b),'common':{'name':_0x471947(0x18c),'type':_0x471947(0x26d),'role':_0x471947(0x1dd),'read':!![],'write':!![],'def':![]},'native':{}}),await _0x475bb6['setObjectNotExistsAsync'](_0x471947(0x115),{'type':'state','common':{'name':'Trigger\x20Action\x20Now','type':_0x471947(0x26d),'role':_0x471947(0x153),'read':!![],'write':!![],'def':![]},'native':{}}),await _0x475bb6[_0x471947(0xee)]('analysis.analysisHistory',{'type':_0x471947(0x24b),'common':{'name':'Logbook','type':_0x471947(0x1df),'role':_0x471947(0x11f),'read':!![],'write':![],'def':'[]'},'native':{}}),await _0x475bb6[_0x471947(0xee)](_0x471947(0x210),{'type':_0x471947(0x24b),'common':{'name':_0x471947(0x12a),'type':_0x471947(0x1df),'role':_0x471947(0x11f),'read':!![],'write':![],'def':'[]'},'native':{}}),await _0x475bb6[_0x471947(0x19e)](_0x471947(0x127),{'type':_0x471947(0x1af),'common':{'name':_0x471947(0x164)},'native':{}}),await _0x475bb6[_0x471947(0xee)](_0x471947(0x254),{'type':_0x471947(0x24b),'common':{'name':'Sleep\x20Score\x20(0-100)','type':_0x471947(0x271),'role':'value.health','read':!![],'write':![],'def':0x0},'native':{}}),await _0x475bb6[_0x471947(0xee)](_0x471947(0x1c0),{'type':_0x471947(0x24b),'common':{'name':_0x471947(0x166),'type':_0x471947(0x1df),'role':_0x471947(0x236),'read':!![],'write':![],'def':_0x471947(0x21e)},'native':{}}),await _0x475bb6['setObjectNotExistsAsync'](_0x471947(0x159),{'type':_0x471947(0x24b),'common':{'name':_0x471947(0x25e),'type':'string','role':'text','read':!![],'write':![],'def':''},'native':{}}),await checkLtmObjects(_0x475bb6),await checkLtmDriftObjects(_0x475bb6);}async function checkSystemObjects(_0x545c3c){const _0x45ca9b=a0_0x2a41a9;await _0x545c3c[_0x45ca9b(0x19e)](_0x45ca9b(0x130),{'type':_0x45ca9b(0x1af),'common':{'name':_0x45ca9b(0x1e4)},'native':{}}),await _0x545c3c['extendObjectAsync'](SYSTEM_DP_MODE,{'type':_0x45ca9b(0x24b),'common':{'name':_0x45ca9b(0x1de),'type':_0x45ca9b(0x1df),'role':'state','read':!![],'write':!![],'def':SYSTEM_MODES['NORMAL'],'states':{[SYSTEM_MODES['NORMAL']]:_0x45ca9b(0x1d4),[SYSTEM_MODES[_0x45ca9b(0x1b6)]]:_0x45ca9b(0x267),[SYSTEM_MODES[_0x45ca9b(0x125)]]:_0x45ca9b(0x25b),[SYSTEM_MODES['GUEST']]:_0x45ca9b(0x26e)}},'native':{}});}async function checkLtmObjects(_0x33f7c6){const _0x4a135f=a0_0x2a41a9;await _0x33f7c6[_0x4a135f(0x19e)]('LTM',{'type':_0x4a135f(0x1af),'common':{'name':_0x4a135f(0xfd)},'native':{}}),await _0x33f7c6[_0x4a135f(0x19e)](LTM_DP_RAW_LOG,{'type':_0x4a135f(0x24b),'common':{'name':_0x4a135f(0x16b),'type':_0x4a135f(0x1df),'role':_0x4a135f(0x11f),'read':!![],'write':![]},'native':{}}),await _0x33f7c6['extendObjectAsync'](LTM_DP_DAILY_DIGESTS,{'type':_0x4a135f(0x24b),'common':{'name':'Daily\x20Digests','type':'string','role':_0x4a135f(0x11f),'read':!![],'write':![]},'native':{}}),await _0x33f7c6['extendObjectAsync'](LTM_DP_STATUS,{'type':_0x4a135f(0x24b),'common':{'name':'Processing\x20Status','type':_0x4a135f(0x1df),'role':_0x4a135f(0x236),'read':!![],'write':![]},'native':{}}),await _0x33f7c6[_0x4a135f(0x19e)](LTM_DP_TRIGGER_DIGEST,{'type':_0x4a135f(0x24b),'common':{'name':'Trigger\x20Digest','type':'boolean','role':'button','read':!![],'write':!![],'def':![]},'native':{}}),await _0x33f7c6[_0x4a135f(0x19e)](LTM_DP_BASELINE_STATUS,{'type':'state','common':{'name':_0x4a135f(0x18b),'type':'string','role':_0x4a135f(0x236),'read':!![],'write':![]},'native':{}});}async function checkLtmDriftObjects(_0x5d3eca){const _0x455bbd=a0_0x2a41a9;await _0x5d3eca[_0x455bbd(0x19e)](LTM_DP_DRIFT_CHANNEL,{'type':_0x455bbd(0x1af),'common':{'name':_0x455bbd(0x17e)},'native':{}}),await _0x5d3eca['extendObjectAsync'](LTM_DP_DRIFT_STATUS,{'type':_0x455bbd(0x24b),'common':{'name':_0x455bbd(0x1b4),'type':'string','role':_0x455bbd(0x24b),'read':!![],'write':![],'def':_0x455bbd(0x273)},'native':{}}),await _0x5d3eca[_0x455bbd(0x19e)](LTM_DP_DRIFT_DETAILS,{'type':_0x455bbd(0x24b),'common':{'name':'Drift\x20Details','type':_0x455bbd(0x1df),'role':_0x455bbd(0x236),'read':!![],'write':![]},'native':{}}),await _0x5d3eca[_0x455bbd(0x19e)](LTM_DP_DRIFT_LAST_CHECK,{'type':_0x455bbd(0x24b),'common':{'name':'Last\x20Check','type':_0x455bbd(0x271),'role':'date','read':!![],'write':![]},'native':{}});}async function loadSystemMode(_0x2e845a){const _0x3bfc9c=a0_0x2a41a9;try{const _0x12b9cf=await _0x2e845a[_0x3bfc9c(0x148)](SYSTEM_DP_MODE);_0x12b9cf&&_0x12b9cf['val']&&Object['values'](SYSTEM_MODES)[_0x3bfc9c(0x102)](_0x12b9cf[_0x3bfc9c(0x279)])?_0x2e845a['currentSystemMode']=_0x12b9cf['val']:(_0x2e845a['currentSystemMode']=SYSTEM_MODES[_0x3bfc9c(0x222)],await _0x2e845a['setStateAsync'](SYSTEM_DP_MODE,{'val':SYSTEM_MODES['NORMAL'],'ack':!![]}));}catch(_0x3843a1){_0x2e845a[_0x3bfc9c(0x26a)]=SYSTEM_MODES[_0x3bfc9c(0x222)];}}async function loadRawEventLog(_0x5d76e1){const _0x443384=a0_0x2a41a9;try{const _0x2b29a4=await _0x5d76e1[_0x443384(0x148)](LTM_DP_RAW_LOG);if(_0x2b29a4&&_0x2b29a4[_0x443384(0x279)])_0x5d76e1['rawEventLog']=JSON['parse'](_0x2b29a4[_0x443384(0x279)]);}catch(_0x3e6054){_0x5d76e1[_0x443384(0x147)]=[];}}async function saveRawEventLog(_0x1badcb){const _0x3f6deb=a0_0x2a41a9;_0x1badcb[_0x3f6deb(0x147)][_0x3f6deb(0x108)]>RAW_LOG_MAX_SIZE&&_0x1badcb[_0x3f6deb(0x147)][_0x3f6deb(0x12b)](0x0,_0x1badcb[_0x3f6deb(0x147)][_0x3f6deb(0x108)]-RAW_LOG_MAX_SIZE),await _0x1badcb[_0x3f6deb(0x121)](LTM_DP_RAW_LOG,{'val':JSON[_0x3f6deb(0x247)](_0x1badcb[_0x3f6deb(0x147)]),'ack':!![]});}async function loadDailyDigests(_0x1385c4){const _0x2d6096=a0_0x2a41a9;try{const _0x131057=await _0x1385c4[_0x2d6096(0x148)](LTM_DP_DAILY_DIGESTS);if(_0x131057&&_0x131057[_0x2d6096(0x279)])_0x1385c4[_0x2d6096(0x14e)]=JSON[_0x2d6096(0x205)](_0x131057[_0x2d6096(0x279)]);}catch(_0x45f58e){_0x1385c4['dailyDigests']=[];}await updateBaselineStatus(_0x1385c4);}async function saveDailyDigests(_0x10d673,_0x19e9b1=!![]){const _0x4e7502=a0_0x2a41a9,_0x326f9e=_0x10d673[_0x4e7502(0x14b)][_0x4e7502(0x16d)]||0x3c;_0x10d673[_0x4e7502(0x14e)][_0x4e7502(0x108)]>_0x326f9e&&_0x10d673[_0x4e7502(0x14e)][_0x4e7502(0x12b)](0x0,_0x10d673[_0x4e7502(0x14e)][_0x4e7502(0x108)]-_0x326f9e);await _0x10d673[_0x4e7502(0x121)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x4e7502(0x247)](_0x10d673[_0x4e7502(0x14e)]),'ack':!![]});if(_0x19e9b1)await updateBaselineStatus(_0x10d673);}async function updateAnalysisHistory(_0x1da76b,_0x37e977){const _0x282282=a0_0x2a41a9;_0x1da76b[_0x282282(0x132)][_0x282282(0x1b3)](_0x37e977);if(_0x1da76b[_0x282282(0x132)][_0x282282(0x108)]>ANALYSIS_HISTORY_MAX_SIZE)_0x1da76b[_0x282282(0x132)][_0x282282(0x123)]();await _0x1da76b[_0x282282(0x121)](_0x282282(0xec),{'val':JSON[_0x282282(0x247)](_0x1da76b[_0x282282(0x132)]),'ack':!![]});}async function updateBaselineStatus(_0x4f8015){const _0x416eca=a0_0x2a41a9;if(!_0x4f8015[_0x416eca(0x22d)]){await _0x4f8015[_0x416eca(0x121)](LTM_DP_BASELINE_STATUS,{'val':_0x416eca(0x1a5),'ack':!![]});return;}const _0x9b9f10=_0x4f8015[_0x416eca(0x14e)]['length']>=(_0x4f8015[_0x416eca(0x14b)][_0x416eca(0xe7)]||0x7)?_0x416eca(0x1a3)+_0x4f8015[_0x416eca(0x14e)]['length']+_0x416eca(0x12d):'Lernphase\x20('+_0x4f8015['dailyDigests']['length']+'/'+(_0x4f8015['config'][_0x416eca(0xe7)]||0x7)+')';await _0x4f8015['setStateAsync'](LTM_DP_BASELINE_STATUS,{'val':_0x9b9f10,'ack':!![]});}async function initSensorSubscriptions(_0x149114){const _0x527e98=a0_0x2a41a9,_0x190536=_0x149114[_0x527e98(0x14b)]['devices'];if(_0x190536&&_0x190536['length']>0x0){_0x149114['log'][_0x527e98(0x1ad)](_0x527e98(0x1e8)+_0x190536[_0x527e98(0x108)]+_0x527e98(0x260));for(const _0x378bc0 of _0x190536){if(_0x378bc0['id']){await _0x149114[_0x527e98(0x136)](_0x378bc0['id']);try{const _0x4d9ec9=await _0x149114[_0x527e98(0x139)](_0x378bc0['id']);if(_0x4d9ec9)_0x149114[_0x527e98(0x183)][_0x378bc0['id']]=_0x4d9ec9[_0x527e98(0x279)];}catch(_0x3c6eb6){}}}}}async function initPresenceSubscriptions(_0x22a319){const _0x30f8c0=a0_0x2a41a9,_0x2182d5=_0x22a319[_0x30f8c0(0x14b)][_0x30f8c0(0x199)]||[];if(_0x2182d5['length']>0x0){_0x22a319[_0x30f8c0(0x1c7)]['info'](_0x30f8c0(0x1e8)+_0x2182d5['length']+_0x30f8c0(0x103));for(const _0x593bbd of _0x2182d5){await _0x22a319[_0x30f8c0(0x136)](_0x593bbd);}try{await checkWifiPresence(_0x22a319);}catch(_0x11128e){}}}async function getWeatherContext(_0x399293){const _0x34f59a=a0_0x2a41a9;try{if(!_0x399293[_0x34f59a(0x14b)][_0x34f59a(0x255)])return'Wetter:\x20Deaktiviert';let _0x2e1750='';const _0x39e250=_0x399293['config'][_0x34f59a(0x186)];if(_0x39e250)try{if(_0x39e250[_0x34f59a(0x102)](_0x34f59a(0x20d))){const _0x527131=await _0x399293[_0x34f59a(0x139)](_0x39e250+_0x34f59a(0xfe));if(_0x527131&&_0x527131['val'])_0x2e1750=_0x527131[_0x34f59a(0x279)];}else{if(_0x39e250[_0x34f59a(0x102)](_0x34f59a(0x253))){const _0x28f010=await _0x399293[_0x34f59a(0x139)](_0x39e250+_0x34f59a(0x179));if(_0x28f010&&_0x28f010[_0x34f59a(0x279)])_0x2e1750=_0x28f010['val'];}else{if(_0x39e250[_0x34f59a(0x102)](_0x34f59a(0x203))){const _0x4b9cf0=await _0x399293[_0x34f59a(0x139)](_0x39e250+_0x34f59a(0x173));if(_0x4b9cf0&&_0x4b9cf0[_0x34f59a(0x279)])_0x2e1750=_0x4b9cf0[_0x34f59a(0x279)];}}}}catch(_0x37d385){}if(!_0x2e1750){const _0x44dc52=[_0x34f59a(0x178),'daswetter.0',_0x34f59a(0x192),_0x34f59a(0x219)];for(const _0x2564b4 of _0x44dc52){try{const _0x25bec5=await _0x399293['getForeignObjectAsync'](_0x2564b4);if(_0x25bec5){if(_0x2564b4[_0x34f59a(0x102)](_0x34f59a(0x20d))){const _0x149225=await _0x399293[_0x34f59a(0x139)](_0x2564b4+_0x34f59a(0xfe));if(_0x149225&&_0x149225[_0x34f59a(0x279)]){_0x2e1750=_0x149225['val'];break;}}}}catch(_0x11cdf5){}}}return _0x2e1750?_0x34f59a(0x26f)+_0x2e1750:_0x34f59a(0x1ed);}catch(_0x1067c5){return _0x34f59a(0x11d)+_0x1067c5[_0x34f59a(0x1b0)];}}async function getCalendarContext(_0x488d1e){const _0x565205=a0_0x2a41a9;try{if(!_0x488d1e[_0x565205(0x14b)][_0x565205(0x18e)])return _0x565205(0x12c);let _0x3e70b2=_0x488d1e[_0x565205(0x14b)][_0x565205(0xf6)]||_0x565205(0x1d3),_0x24d27e=_0x488d1e[_0x565205(0x14b)][_0x565205(0x1aa)]||[];if(typeof _0x24d27e==='string')_0x24d27e=_0x24d27e[_0x565205(0xfb)](',');try{const _0x175b06=await _0x488d1e[_0x565205(0x139)](_0x3e70b2+'.data.table');if(_0x175b06&&_0x175b06['val']){let _0x43fc88=tryParse(_0x175b06[_0x565205(0x279)]);if(_0x43fc88&&Array[_0x565205(0x240)](_0x43fc88)){if(_0x24d27e[_0x565205(0x108)]>0x0)_0x43fc88=_0x43fc88[_0x565205(0x25a)](_0x5acb20=>_0x24d27e[_0x565205(0x102)](_0x5acb20[_0x565205(0x21b)]||''));else return _0x565205(0x17f);if(_0x43fc88[_0x565205(0x108)]>0x0){const _0x34a03f=_0x43fc88[_0x565205(0x201)](0x0,0x3)['map'](_0x166f8f=>{const _0x3df8b5=_0x565205;let _0x8f2a9=_0x166f8f['date'];if(_0x166f8f[_0x3df8b5(0x1f8)])_0x8f2a9+='\x20'+_0x166f8f[_0x3df8b5(0x1f8)];return _0x8f2a9+':\x20'+_0x166f8f[_0x3df8b5(0x22e)]+'\x20('+_0x166f8f[_0x3df8b5(0x21b)]+')';});return _0x565205(0x265)+_0x34a03f['join'](_0x565205(0x208));}else return _0x565205(0x24d);}}}catch(_0xb78053){_0x488d1e['log']['warn'](_0x565205(0x1e0)+_0xb78053[_0x565205(0x1b0)]);}return'KALENDER:\x20Keine\x20Daten';}catch(_0x4b681d){return _0x565205(0x230)+_0x4b681d['message'];}}async function getCalendarNames(_0x3ee0d1,_0x421409){const _0x47c13f=a0_0x2a41a9;try{const _0x18fbe1=await _0x3ee0d1[_0x47c13f(0x139)](_0x421409+'.data.table');if(_0x18fbe1&&_0x18fbe1[_0x47c13f(0x279)]){const _0xaaef7a=tryParse(_0x18fbe1[_0x47c13f(0x279)]);if(_0xaaef7a&&Array[_0x47c13f(0x240)](_0xaaef7a)){const _0x5b6215=[...new Set(_0xaaef7a['map'](_0x2a8fe1=>_0x2a8fe1['_calName'])[_0x47c13f(0x25a)](Boolean))];return _0x5b6215[_0x47c13f(0x266)]();}}return[];}catch(_0x3be755){return _0x3ee0d1['log'][_0x47c13f(0x241)](_0x47c13f(0x251)+_0x3be755[_0x47c13f(0x1b0)]),[];}}async function checkWifiPresence(_0x263da9){const _0x1cd8d0=a0_0x2a41a9;try{const _0x4b7e6c=_0x263da9[_0x1cd8d0(0x14b)][_0x1cd8d0(0x199)]||[];let _0x2448ca=![];for(const _0x9241c7 of _0x4b7e6c){try{const _0x4e20af=await _0x263da9[_0x1cd8d0(0x139)](_0x9241c7);if(_0x4e20af&&(_0x4e20af[_0x1cd8d0(0x279)]===!![]||_0x4e20af[_0x1cd8d0(0x279)]===_0x1cd8d0(0x20c)||_0x4e20af[_0x1cd8d0(0x279)]===0x1)){_0x2448ca=!![];break;}}catch(_0x28af7b){}}return _0x2448ca&&(_0x263da9[_0x1cd8d0(0x15e)]&&(_0x263da9['log'][_0x1cd8d0(0x1ad)]('WiFi\x20Presence\x20detected\x20->\x20Aborting\x20Exit\x20Timer.\x20User\x20is\x20present.'),abortExitTimer(_0x263da9)),!_0x263da9[_0x1cd8d0(0x1e1)]&&_0x263da9[_0x1cd8d0(0x26a)]===SYSTEM_MODES['NORMAL']&&await setPresence(_0x263da9,!![])),_0x2448ca;}catch(_0x3e7174){return _0x263da9[_0x1cd8d0(0x1c7)]['error'](_0x1cd8d0(0x169)+_0x3e7174[_0x1cd8d0(0x1b0)]),![];}}function startExitTimer(_0x1d6565){const _0x5a4f80=a0_0x2a41a9;abortExitTimer(_0x1d6565),_0x1d6565[_0x5a4f80(0xea)]=!![],_0x1d6565['exitGraceTimer']=setTimeout(()=>{const _0x5a6247=_0x5a4f80;_0x1d6565[_0x5a6247(0xea)]=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),_0x1d6565[_0x5a4f80(0x15e)]=setTimeout(()=>{const _0x5e11a5=_0x5a4f80;setPresence(_0x1d6565,![]),_0x1d6565[_0x5e11a5(0x15e)]=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}function abortExitTimer(_0x41d5aa){const _0x3f4133=a0_0x2a41a9;if(_0x41d5aa['exitTimer'])clearTimeout(_0x41d5aa[_0x3f4133(0x15e)]);if(_0x41d5aa['exitGraceTimer'])clearTimeout(_0x41d5aa['exitGraceTimer']);_0x41d5aa[_0x3f4133(0x15e)]=null,_0x41d5aa[_0x3f4133(0x110)]=null,_0x41d5aa[_0x3f4133(0xea)]=![];}async function setPresence(_0x54a497,_0x39ca9c){const _0x11bb5e=a0_0x2a41a9;if(_0x54a497[_0x11bb5e(0x1e1)]===_0x39ca9c)return;_0x54a497[_0x11bb5e(0x1e1)]=_0x39ca9c,await _0x54a497[_0x11bb5e(0x121)](_0x11bb5e(0x16a),{'val':_0x39ca9c,'ack':!![]});}async function saveFeedback(_0x58f5af,_0x1cda53){const _0x919393=a0_0x2a41a9;_0x58f5af[_0x919393(0x1c7)][_0x919393(0x1ad)](_0x919393(0x24e)+JSON[_0x919393(0x247)](_0x1cda53));}async function runBaselineDriftAnalysis(_0x440369){const _0x569875=a0_0x2a41a9;if(!_0x440369['isProVersion']||!_0x440369[_0x569875(0x15b)])return;const _0x27f436=_0x440369[_0x569875(0x14b)][_0x569875(0x17b)]||0xe;if(_0x440369[_0x569875(0x14e)][_0x569875(0x108)]<_0x27f436+(_0x440369['config'][_0x569875(0xe7)]||0x7)){await _0x440369[_0x569875(0x121)](LTM_DP_DRIFT_STATUS,{'val':_0x569875(0x15f),'ack':!![]});return;}const _0x32c28d=_0x440369['dailyDigests']['slice'](-_0x27f436),_0x4db3bb=_0x440369['dailyDigests'][_0x569875(0x201)](0x0,_0x440369[_0x569875(0x14e)][_0x569875(0x108)]-_0x27f436),_0xdf700=_0x569875(0x25d)+JSON[_0x569875(0x247)](_0x4db3bb)+_0x569875(0x1c9)+JSON[_0x569875(0x247)](_0x32c28d);try{const _0x5b3bf5=await _0x440369[_0x569875(0x15b)]['generateContent'](_0xdf700),_0x371cbd=JSON[_0x569875(0x205)](_0x5b3bf5[_0x569875(0xe9)][_0x569875(0x236)]()['replace'](/```json|```/g,'')[_0x569875(0x221)]());_0x371cbd['baselineDrift']&&(await _0x440369[_0x569875(0x121)](LTM_DP_DRIFT_STATUS,{'val':_0x371cbd[_0x569875(0x194)],'ack':!![]}),await _0x440369['setStateAsync'](LTM_DP_DRIFT_DETAILS,{'val':_0x371cbd[_0x569875(0xf9)],'ack':!![]}),await _0x440369[_0x569875(0x121)](LTM_DP_DRIFT_LAST_CHECK,{'val':Date['now'](),'ack':!![]}));}catch(_0x1b61f0){}}function setupLtmScheduler(_0xf3bf6a){const _0x4aa5ff=a0_0x2a41a9;try{if(_0xf3bf6a[_0x4aa5ff(0x176)])_0xf3bf6a['ltmJob'][_0x4aa5ff(0x131)]();if(!_0xf3bf6a['isProVersion']){_0xf3bf6a[_0x4aa5ff(0x121)](LTM_DP_STATUS,{'val':_0x4aa5ff(0x1a5),'ack':!![]});return;}_0xf3bf6a[_0x4aa5ff(0x176)]=schedule[_0x4aa5ff(0xfa)](LTM_SCHEDULE,()=>createDailyDigest(_0xf3bf6a));}catch(_0x34f75a){_0xf3bf6a[_0x4aa5ff(0x1c7)][_0x4aa5ff(0x241)]('LTM\x20Sched\x20Error:\x20'+_0x34f75a[_0x4aa5ff(0x1b0)]);}}function setupModeResetScheduler(_0x506c09){const _0x2aabed=a0_0x2a41a9;try{if(_0x506c09[_0x2aabed(0x13f)])_0x506c09[_0x2aabed(0x13f)][_0x2aabed(0x131)]();_0x506c09[_0x2aabed(0x13f)]=schedule['scheduleJob'](MODE_RESET_SCHEDULE,async()=>{const _0xc869bd=_0x2aabed;await loadSystemMode(_0x506c09),AUTO_RESET_MODES['includes'](_0x506c09[_0xc869bd(0x26a)])&&await _0x506c09['setStateAsync'](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0xc869bd(0x222)],'ack':![]});});}catch(_0x30195e){_0x506c09[_0x2aabed(0x1c7)]['error'](_0x2aabed(0x21c)+_0x30195e['message']);}}function setupDriftAnalysisScheduler(_0x39e04c){const _0x469a8f=a0_0x2a41a9;try{if(_0x39e04c[_0x469a8f(0x244)])clearInterval(_0x39e04c[_0x469a8f(0x244)]);if(!_0x39e04c['isProVersion'])return;_0x39e04c[_0x469a8f(0x244)]=setInterval(()=>runBaselineDriftAnalysis(_0x39e04c),(_0x39e04c[_0x469a8f(0x14b)][_0x469a8f(0x195)]||0x18)*0x36ee80),setTimeout(()=>runBaselineDriftAnalysis(_0x39e04c),0x1388);}catch(_0x2d1d61){_0x39e04c[_0x469a8f(0x1c7)][_0x469a8f(0x241)]('Drift\x20Sched\x20Error:\x20'+_0x2d1d61[_0x469a8f(0x1b0)]);}}function setupBriefingScheduler(_0x199349){const _0x152a3e=a0_0x2a41a9;try{if(_0x199349[_0x152a3e(0x1db)])_0x199349[_0x152a3e(0x1db)]['cancel']();if(!_0x199349[_0x152a3e(0x14b)][_0x152a3e(0x249)])return;const _0x3a7066=(_0x199349[_0x152a3e(0x14b)][_0x152a3e(0x15c)]||_0x152a3e(0xf3))['split'](':'),_0x50e2e8=parseInt(_0x3a7066[0x0])||0x8,_0x4b207b=parseInt(_0x3a7066[0x1])||0x0,_0x1d4593=_0x4b207b+'\x20'+_0x50e2e8+_0x152a3e(0x223);_0x199349[_0x152a3e(0x1c7)][_0x152a3e(0x1ad)](_0x152a3e(0x209)+_0x50e2e8+':'+(_0x4b207b<0xa?'0'+_0x4b207b:_0x4b207b)),_0x199349[_0x152a3e(0x1db)]=schedule[_0x152a3e(0xfa)](_0x1d4593,()=>{sendMorningBriefing(_0x199349);});}catch(_0x39bf58){_0x199349[_0x152a3e(0x1c7)][_0x152a3e(0x241)](_0x152a3e(0x126)+_0x39bf58['message']);}}async function sendNotification(_0x2cc6bc,_0x4dc97b,_0x1d909b=![],_0x3a2a53=![]){const _0x3facfd=a0_0x2a41a9;_0x2cc6bc['log'][_0x3facfd(0x1ad)]((_0x1d909b?_0x3facfd(0x232):'')+_0x3facfd(0x1f9)+_0x4dc97b+'\x22');const _0x396867=_0x2cc6bc['config'];let _0x5360d7=0x0;_0x396867[_0x3facfd(0x277)]&&(await _0x2cc6bc[_0x3facfd(0x270)](_0x396867[_0x3facfd(0x1ce)],_0x3facfd(0x262),{'text':_0x4dc97b,'user':_0x396867['notifyTelegramRecipient']}),_0x5360d7++);if(_0x396867[_0x3facfd(0x242)]){let _0x168a5d={'message':_0x4dc97b,'title':_0x3a2a53?_0x3facfd(0x1d1):_0x3facfd(0x1cc),'priority':_0x3a2a53?0x2:0x1,'device':_0x396867[_0x3facfd(0x268)]};_0x3a2a53&&(_0x168a5d[_0x3facfd(0x11e)]=0x1e,_0x168a5d[_0x3facfd(0x100)]=0xe10,_0x168a5d['sound']=_0x3facfd(0x250)),await this[_0x3facfd(0x270)](_0x396867['notifyPushoverInstance'],_0x3facfd(0x262),_0x168a5d),_0x5360d7++;}return _0x396867[_0x3facfd(0x10d)]&&(await this['sendToAsync'](_0x396867['notifyEmailInstance'],_0x3facfd(0x262),{'text':_0x4dc97b,'to':_0x396867[_0x3facfd(0x1bd)]}),_0x5360d7++),_0x5360d7;}async function setupTelegramListener(_0x178bce){const _0x58003a=a0_0x2a41a9,_0x3024bc=_0x178bce[_0x58003a(0x14b)][_0x58003a(0x1ce)];_0x178bce[_0x58003a(0x14b)]['notifyTelegramEnabled']&&_0x3024bc&&(_0x178bce[_0x58003a(0x1c7)][_0x58003a(0x1ad)](_0x58003a(0xef)+_0x3024bc+'\x20for\x20interactive\x20buttons...'),await _0x178bce[_0x58003a(0x136)](_0x3024bc+_0x58003a(0x138)));}async function handleTelegramResponse(_0x1b2eb4,_0x2afb27){const _0x21ab8e=a0_0x2a41a9;let _0x200650=_0x2afb27;_0x2afb27[_0x21ab8e(0xf5)]('[')&&(_0x200650=_0x2afb27[_0x21ab8e(0x1f3)](_0x2afb27[_0x21ab8e(0x162)](']')+0x1));if(_0x200650==='COGNI_CONFIRM_OK')_0x1b2eb4[_0x21ab8e(0x1c7)][_0x21ab8e(0x1ad)](_0x21ab8e(0x207)),await _0x1b2eb4[_0x21ab8e(0x121)](_0x21ab8e(0x13d),{'val':![],'ack':!![]}),await _0x1b2eb4[_0x21ab8e(0x121)](_0x21ab8e(0xf1),{'val':'Vom\x20Benutzer\x20bestÃ¤tigt\x20(OK).','ack':!![]}),_0x1b2eb4['lastAlertState']=![],sendNotification(_0x1b2eb4,'âœ…\x20Alarm\x20quittiert.\x20System\x20normal.',![]);else _0x200650===_0x21ab8e(0x1ba)&&(_0x1b2eb4[_0x21ab8e(0x1c7)][_0x21ab8e(0x1d9)](_0x21ab8e(0xeb)),sendNotification(_0x1b2eb4,_0x21ab8e(0x16f),![],!![]));}async function runAutopilot(_0x46010d){const _0x34d970=a0_0x2a41a9,_0x31a6bd=_0x46010d['config'][_0x34d970(0x234)],_0x3ba43a=_0x46010d['eventHistory'][_0x34d970(0x108)]>0x0?_0x46010d[_0x34d970(0x1e2)][0x0][_0x34d970(0x21a)]:Date['now'](),_0x38b343=(Date[_0x34d970(0x1d5)]()-_0x3ba43a)/(0x3e8*0x3c*0x3c);let _0x13d9c3='';_0x46010d[_0x34d970(0x14b)][_0x34d970(0x1a4)]&&_0x46010d[_0x34d970(0x26a)]===SYSTEM_MODES[_0x34d970(0x222)]&&_0x46010d[_0x34d970(0x1e1)]&&(_0x38b343>_0x31a6bd&&(_0x13d9c3=_0x34d970(0x1a6)+_0x38b343[_0x34d970(0x198)](0x1)+_0x34d970(0x25c))),runGeminiAnalysis(_0x46010d,_0x13d9c3)[_0x34d970(0x10b)](_0x2ceb8d=>_0x46010d[_0x34d970(0x1c7)][_0x34d970(0x241)](_0x2ceb8d));}async function createDailyDigest(_0x37e983){const _0x3749d6=a0_0x2a41a9;if(!_0x37e983[_0x3749d6(0x22d)])return;await _0x37e983[_0x3749d6(0x121)](LTM_DP_STATUS,{'val':_0x3749d6(0x185)+new Date()['toLocaleString'](),'ack':!![]});if(!_0x37e983[_0x3749d6(0x15b)]||_0x37e983[_0x3749d6(0x147)][_0x3749d6(0x108)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x37e983[_0x3749d6(0x121)](LTM_DP_STATUS,{'val':_0x3749d6(0xfc),'ack':!![]});return;}const _0x21b9f1=JSON[_0x3749d6(0x205)](JSON[_0x3749d6(0x247)](_0x37e983[_0x3749d6(0x147)])),_0xc8e4c=_0x21b9f1['length'],_0x3d3525=_0x3749d6(0x23a)+JSON[_0x3749d6(0x247)](_0x21b9f1);try{const _0x6499c6=await _0x37e983[_0x3749d6(0x15b)][_0x3749d6(0x23e)](_0x3d3525),_0xcdd4a1=JSON[_0x3749d6(0x205)](_0x6499c6[_0x3749d6(0xe9)][_0x3749d6(0x236)]()[_0x3749d6(0x1f6)](/```json|```/g,'')['trim']());_0xcdd4a1[_0x3749d6(0x145)]&&(_0x37e983[_0x3749d6(0x14e)][_0x3749d6(0x1f5)]({'timestamp':new Date()[_0x3749d6(0x129)](),'eventCount':_0xc8e4c,'summary':_0xcdd4a1[_0x3749d6(0x145)],'activityLevel':_0xcdd4a1[_0x3749d6(0x212)],'systemMode':_0x37e983[_0x3749d6(0x26a)]}),await saveDailyDigests(_0x37e983),_0x37e983[_0x3749d6(0x147)]=[],await saveRawEventLog(_0x37e983),await _0x37e983[_0x3749d6(0x121)](LTM_DP_STATUS,{'val':_0x3749d6(0x26b)+_0xc8e4c+'\x20events','ack':!![]}));}catch(_0x49703e){await _0x37e983[_0x3749d6(0x121)](LTM_DP_STATUS,{'val':_0x3749d6(0x1fd)+_0x49703e[_0x3749d6(0x1b0)],'ack':!![]});}}async function sendMorningBriefing(_0x4bfa79){const _0x258565=a0_0x2a41a9;if(!_0x4bfa79[_0x258565(0x15b)])return;_0x4bfa79[_0x258565(0x1c7)][_0x258565(0x1ad)](_0x258565(0x150));const _0x10ca21=_0x4bfa79[_0x258565(0x14e)][_0x258565(0x108)]>0x0?_0x4bfa79['dailyDigests'][_0x4bfa79[_0x258565(0x14e)][_0x258565(0x108)]-0x1]:null,_0x5e949d=_0x10ca21&&_0x10ca21[_0x258565(0x16e)]?_0x10ca21['health'][_0x258565(0xe8)]:_0x258565(0x273),_0x367b55=new Date();_0x367b55[_0x258565(0x158)](0x4,0x0,0x0,0x0);const _0xb378fd=_0x4bfa79[_0x258565(0x1e2)][_0x258565(0x25a)](_0x34fc76=>new Date(_0x34fc76[_0x258565(0x21a)])>_0x367b55),_0x3d617b=PERSONA_MAPPING[_0x4bfa79[_0x258565(0x14b)][_0x258565(0x1c3)]||_0x258565(0x263)],_0x56ea61=_0x4bfa79[_0x258565(0x14b)][_0x258565(0x141)]||'',_0x13ba32=await getWeatherContext(_0x4bfa79),_0x37f475=await getCalendarContext(_0x4bfa79),_0x21717f=_0x258565(0x1e9)+_0x3d617b+_0x258565(0x1fb)+_0x56ea61+_0x258565(0x226)+_0x13ba32+'\x20'+_0x37f475+_0x258565(0x206)+_0x5e949d+_0x258565(0x101)+JSON[_0x258565(0x247)](_0xb378fd['slice'](0x0,0xa))+_0x258565(0x149);try{const _0x3e3bc3=await _0x4bfa79[_0x258565(0x15b)][_0x258565(0x23e)](_0x21717f),_0x545f8d=_0x258565(0x274)+_0x3e3bc3[_0x258565(0xe9)][_0x258565(0x236)]()['trim']();sendNotification(_0x4bfa79,_0x545f8d),_0x4bfa79[_0x258565(0x1c7)][_0x258565(0x1ad)]('Morning\x20Briefing\x20sent.');}catch(_0x573198){_0x4bfa79[_0x258565(0x1c7)][_0x258565(0x241)](_0x258565(0x1e5)+_0x573198[_0x258565(0x1b0)]);}}async function scanForDevices(_0x17b972,_0x59c68e){const _0xb7fc21=a0_0x2a41a9;_0x17b972[_0xb7fc21(0x1c7)]['info'](_0xb7fc21(0x252));const _0x46d911=[],_0x7b77de=await _0x17b972[_0xb7fc21(0x257)]('*'),_0x11652a=await _0x17b972[_0xb7fc21(0x257)]('enum.functions.*',_0xb7fc21(0xf0)),_0x55dcf0=await _0x17b972[_0xb7fc21(0x257)](_0xb7fc21(0x11c),_0xb7fc21(0xf0)),_0x172cfe={};if(_0x11652a)for(const _0xbf3e03 in _0x11652a){const _0x3bc7d3=_0x11652a[_0xbf3e03][_0xb7fc21(0x20b)][_0xb7fc21(0x160)]||[];_0x3bc7d3[_0xb7fc21(0x21f)](_0x56b1b6=>{const _0x226831=_0xb7fc21;if(!_0x172cfe[_0x56b1b6])_0x172cfe[_0x56b1b6]=[];_0x172cfe[_0x56b1b6][_0x226831(0x1f5)](_0xbf3e03);});}const _0x2abb63={};if(_0x55dcf0)for(const _0x1e46ba in _0x55dcf0){const _0x5a1b93=_0x55dcf0[_0x1e46ba][_0xb7fc21(0x20b)][_0xb7fc21(0x160)]||[],_0x3f84c1=typeof _0x55dcf0[_0x1e46ba][_0xb7fc21(0x20b)][_0xb7fc21(0x224)]==='object'?_0x55dcf0[_0x1e46ba]['common'][_0xb7fc21(0x224)]['de']:_0x55dcf0[_0x1e46ba][_0xb7fc21(0x20b)][_0xb7fc21(0x224)];_0x5a1b93['forEach'](_0x50306e=>_0x2abb63[_0x50306e]=_0x3f84c1);}const _0xf2047c=_0x59c68e['selectedFunctionIds']||[],_0x13f994=_0x59c68e[_0xb7fc21(0x1f0)]!==![],_0x56302e=_0x59c68e[_0xb7fc21(0x11a)]!==![],_0x397944=_0x59c68e[_0xb7fc21(0x22c)]!==![],_0x4bef0c=_0x59c68e['temperature']===!![],_0x58e228=_0x59c68e[_0xb7fc21(0x14f)]===!![];for(const _0x2d71cf in _0x7b77de){const _0x55728d=_0x7b77de[_0x2d71cf];if(_0x55728d['type']!==_0xb7fc21(0x24b)||!_0x55728d[_0xb7fc21(0x20b)])continue;if(ADAPTER_BLACKLIST['some'](_0x349574=>_0x2d71cf[_0xb7fc21(0xf5)](_0x349574))&&!_0x58e228)continue;const _0x20ecd3=(_0x55728d[_0xb7fc21(0x20b)][_0xb7fc21(0x246)]||'')[_0xb7fc21(0x1dc)]();let _0x1f1aa2=(typeof _0x55728d['common'][_0xb7fc21(0x224)]===_0xb7fc21(0x197)?_0x55728d[_0xb7fc21(0x20b)]['name']['de']:_0x55728d[_0xb7fc21(0x20b)][_0xb7fc21(0x224)])||_0x2d71cf;const _0x13bef0=_0x1f1aa2['toLowerCase']();if(!_0x58e228){if(HARD_IGNORE_TERMS['some'](_0x4997b9=>_0x2d71cf[_0xb7fc21(0x102)](_0x4997b9)||_0x13bef0[_0xb7fc21(0x102)](_0x4997b9['toLowerCase']())))continue;}let _0x1bcd42=![],_0x4eb2dd=![];if(_0xf2047c[_0xb7fc21(0x108)]>0x0){const _0x37350e=_0x172cfe[_0x2d71cf]||[],_0x15e1b8=_0x2d71cf['split']('.')[_0xb7fc21(0x201)](0x0,-0x1)[_0xb7fc21(0x17c)]('.'),_0x55b536=_0x172cfe[_0x15e1b8]||[];(_0x37350e['some'](_0x51897a=>_0xf2047c[_0xb7fc21(0x102)](_0x51897a))||_0x55b536[_0xb7fc21(0x20e)](_0x5c0d33=>_0xf2047c[_0xb7fc21(0x102)](_0x5c0d33)))&&(_0x1bcd42=!![],_0x4eb2dd=!![]);}if(BAD_NAMES[_0xb7fc21(0x20e)](_0x123d6a=>_0x13bef0===_0x123d6a||_0x13bef0[_0xb7fc21(0x1be)]('.'+_0x123d6a))){const _0x1d06af=_0x2d71cf[_0xb7fc21(0xfb)]('.');if(_0x1d06af[_0xb7fc21(0x108)]>0x2){const _0x4fddcf=_0x1d06af[_0xb7fc21(0x201)](0x0,-0x1)[_0xb7fc21(0x17c)]('.'),_0x4cd3ae=_0x7b77de[_0x4fddcf];if(_0x4cd3ae&&_0x4cd3ae['common']&&_0x4cd3ae[_0xb7fc21(0x20b)][_0xb7fc21(0x224)]){const _0x2b2631=typeof _0x4cd3ae[_0xb7fc21(0x20b)][_0xb7fc21(0x224)]==='object'?_0x4cd3ae[_0xb7fc21(0x20b)][_0xb7fc21(0x224)]['de']:_0x4cd3ae[_0xb7fc21(0x20b)][_0xb7fc21(0x224)];_0x2b2631&&!_0x1f1aa2[_0xb7fc21(0x102)](_0x2b2631)&&(_0x1f1aa2=_0x2b2631+'\x20'+_0x1f1aa2);}}}let _0x5836ba='';if(_0x13f994&&(_0x20ecd3[_0xb7fc21(0x102)](_0xb7fc21(0x1f0))||_0x20ecd3['includes'](_0xb7fc21(0x24f))||_0x13bef0[_0xb7fc21(0x102)]('bewegung')||_0x13bef0['includes'](_0xb7fc21(0x146))))_0x5836ba=_0xb7fc21(0x1f0);else{if(!_0x5836ba&&_0x56302e&&(_0x20ecd3[_0xb7fc21(0x102)](_0xb7fc21(0x156))||_0x20ecd3['includes'](_0xb7fc21(0x172))||_0x20ecd3[_0xb7fc21(0x102)](_0xb7fc21(0x256))||_0x20ecd3['includes'](_0xb7fc21(0x1f2))||_0x20ecd3[_0xb7fc21(0x102)](_0xb7fc21(0x259))||_0x13bef0['includes'](_0xb7fc21(0x27a))||_0x13bef0[_0xb7fc21(0x102)](_0xb7fc21(0x1ae))||_0x13bef0[_0xb7fc21(0x102)](_0xb7fc21(0x18d))))_0x5836ba=_0xb7fc21(0x156);else{if(!_0x5836ba&&_0x397944&&(_0x20ecd3[_0xb7fc21(0x102)](_0xb7fc21(0x117))||_0x20ecd3[_0xb7fc21(0x102)](_0xb7fc21(0x1dd))||_0x20ecd3['includes'](_0xb7fc21(0x10e))||_0x13bef0[_0xb7fc21(0x102)]('licht')||_0x13bef0[_0xb7fc21(0x102)](_0xb7fc21(0x122))||_0x13bef0[_0xb7fc21(0x102)](_0xb7fc21(0x24c)))){if(_0x55728d['common'][_0xb7fc21(0x168)]||_0x20ecd3[_0xb7fc21(0x102)](_0xb7fc21(0x17a)))_0x5836ba=_0xb7fc21(0x117);}else{if(!_0x5836ba&&_0x4bef0c&&(_0x20ecd3['includes'](_0xb7fc21(0x1b9))||_0x20ecd3[_0xb7fc21(0x102)](_0xb7fc21(0x1b8))||_0x20ecd3[_0xb7fc21(0x102)](_0xb7fc21(0x106))||_0x13bef0[_0xb7fc21(0x102)](_0xb7fc21(0x182))||_0x13bef0[_0xb7fc21(0x102)]('klima')||_0x13bef0['includes']('heizung')))_0x5836ba='temperature';else{if(!_0x5836ba&&_0x4eb2dd)_0x5836ba=_0xb7fc21(0x151);}}}}if(_0x5836ba){let _0x7547a=_0x2abb63[_0x2d71cf]||'';if(!_0x7547a){let _0x332d04=_0x2d71cf;for(let _0x158e42=0x0;_0x158e42<0x3;_0x158e42++){const _0x103cb6=_0x332d04['lastIndexOf']('.');if(_0x103cb6===-0x1)break;_0x332d04=_0x332d04[_0xb7fc21(0x1f3)](0x0,_0x103cb6);if(_0x2abb63[_0x332d04]){_0x7547a=_0x2abb63[_0x332d04];break;}}}_0x46d911[_0xb7fc21(0x1f5)]({'id':_0x2d71cf,'name':_0x1f1aa2,'location':_0x7547a,'type':_0x5836ba,'logDuplicates':_0x5836ba===_0xb7fc21(0x1f0),'isExit':![],'_score':_0x7547a?0x50:_0x5836ba===_0xb7fc21(0x151)?0x5a:0x28});}}return _0x46d911['sort']((_0x32d36b,_0x464075)=>_0x464075['_score']-_0x32d36b['_score']),_0x46d911;}if(require[a0_0x2a41a9(0x13b)]!==module)module[a0_0x2a41a9(0x26c)]=_0x1d230d=>new CogniLiving(_0x1d230d);else new CogniLiving();