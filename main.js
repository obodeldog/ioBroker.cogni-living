const a0_0x18de17=a0_0x35ef;(function(_0x51b298,_0x4ab5a3){const _0x152289=a0_0x35ef,_0x13f18c=_0x51b298();while(!![]){try{const _0x9a4363=-parseInt(_0x152289(0x1b5))/0x1*(-parseInt(_0x152289(0x32f))/0x2)+parseInt(_0x152289(0x2ae))/0x3*(-parseInt(_0x152289(0x1a4))/0x4)+-parseInt(_0x152289(0x18d))/0x5+parseInt(_0x152289(0x245))/0x6*(-parseInt(_0x152289(0x205))/0x7)+-parseInt(_0x152289(0x300))/0x8*(parseInt(_0x152289(0x262))/0x9)+-parseInt(_0x152289(0x2d1))/0xa*(-parseInt(_0x152289(0x24b))/0xb)+parseInt(_0x152289(0x30d))/0xc;if(_0x9a4363===_0x4ab5a3)break;else _0x13f18c['push'](_0x13f18c['shift']());}catch(_0x4599fc){_0x13f18c['push'](_0x13f18c['shift']());}}}(a0_0x3c23,0xe6082));const a0_0x358a90=(function(){let _0x337569=!![];return function(_0x9366e2,_0x101cf8){const _0x244945=_0x337569?function(){const _0x525ed3=a0_0x35ef;if(_0x101cf8){const _0x1eca09=_0x101cf8[_0x525ed3(0x2a7)](_0x9366e2,arguments);return _0x101cf8=null,_0x1eca09;}}:function(){};return _0x337569=![],_0x244945;};}()),a0_0x2011f8=a0_0x358a90(this,function(){const _0x3e2e69=a0_0x35ef;return a0_0x2011f8[_0x3e2e69(0x1f8)]()['search'](_0x3e2e69(0x1b8))['toString']()['constructor'](a0_0x2011f8)[_0x3e2e69(0x1ca)](_0x3e2e69(0x1b8));});a0_0x2011f8();'use strict';const utils=require('@iobroker/adapter-core'),{GoogleGenerativeAI}=require(a0_0x18de17(0x212)),schedule=require('node-schedule'),HISTORY_MAX_SIZE=0x32,RAW_LOG_MAX_SIZE=0x5dc,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL=a0_0x18de17(0x1a5),LTM_SCHEDULE=a0_0x18de17(0x1d2),MODE_RESET_SCHEDULE=a0_0x18de17(0x2d3),ANALYSIS_HISTORY_MAX_SIZE=0x64,EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,LTM_DP_RAW_LOG=a0_0x18de17(0x1e5),LTM_DP_DAILY_DIGESTS=a0_0x18de17(0x1b1),LTM_DP_STATUS=a0_0x18de17(0x20d),LTM_DP_TRIGGER_DIGEST=a0_0x18de17(0x1a0),LTM_DP_BASELINE_STATUS='LTM.baselineStatus',LTM_DP_DRIFT_CHANNEL=a0_0x18de17(0x1a6),LTM_DP_DRIFT_STATUS=a0_0x18de17(0x301),LTM_DP_DRIFT_DETAILS=a0_0x18de17(0x260),LTM_DP_DRIFT_LAST_CHECK=a0_0x18de17(0x18b),SYSTEM_DP_MODE=a0_0x18de17(0x21e),HARD_IGNORE_TERMS=[a0_0x18de17(0x303),a0_0x18de17(0x31e),a0_0x18de17(0x1cc),'unreach',a0_0x18de17(0x323),a0_0x18de17(0x298),a0_0x18de17(0x1ed),a0_0x18de17(0x231),a0_0x18de17(0x1eb),a0_0x18de17(0x2ca),a0_0x18de17(0x1fb),'direction','stick_unreach',a0_0x18de17(0x29a),a0_0x18de17(0x251),a0_0x18de17(0x218),a0_0x18de17(0x32c),a0_0x18de17(0x1be)],BAD_NAMES=[a0_0x18de17(0x2bc),'currentposition',a0_0x18de17(0x277),a0_0x18de17(0x271),a0_0x18de17(0x227),a0_0x18de17(0x2e1),'on',a0_0x18de17(0x200),a0_0x18de17(0x215),a0_0x18de17(0x249),'shutter','blind',a0_0x18de17(0x27b),a0_0x18de17(0x2fb),a0_0x18de17(0x2af),a0_0x18de17(0x1d7),a0_0x18de17(0x1d3),'temperature','humidity',a0_0x18de17(0x281),a0_0x18de17(0x23d),a0_0x18de17(0x1b6),a0_0x18de17(0x319),a0_0x18de17(0x2e5),'set_temperature'],ADAPTER_BLACKLIST=[a0_0x18de17(0x299),a0_0x18de17(0x1e6),a0_0x18de17(0x1f4),a0_0x18de17(0x2cb),a0_0x18de17(0x338),a0_0x18de17(0x33a),a0_0x18de17(0x22a),'flot.',a0_0x18de17(0x2f7),a0_0x18de17(0x199),a0_0x18de17(0x30e)],SYSTEM_MODES={'NORMAL':'normal','VACATION':a0_0x18de17(0x2cd),'PARTY':a0_0x18de17(0x1c1),'GUEST':a0_0x18de17(0x2b1)},AUTO_RESET_MODES=[SYSTEM_MODES[a0_0x18de17(0x2ea)],SYSTEM_MODES[a0_0x18de17(0x217)]],PERSONA_MAPPING={'generic':a0_0x18de17(0x2e9),'senior_aal':'PRIORIT√ÑT:\x20Gesundheit/AAL.','family':a0_0x18de17(0x220),'single_comfort':a0_0x18de17(0x2b9),'security':'PRIORIT√ÑT:\x20Sicherheit.'};async function initZombies(_0xc0a81b){const _0x302ec5=a0_0x18de17;try{const _0x1381c0=[_0x302ec5(0x19b),'events.history_debug_00'];for(const _0x1c13a1 of _0x1381c0){try{const _0x286f4c=await _0xc0a81b[_0x302ec5(0x286)](_0x1c13a1);_0x286f4c&&await _0xc0a81b['delObjectAsync'](_0x1c13a1);}catch(_0x6ad1db){}}}catch(_0x1c9467){}}async function initHistory(_0x24774c){const _0x2d282e=a0_0x18de17;try{const _0x358f8d=await _0x24774c[_0x2d282e(0x289)](_0x2d282e(0x32a));_0x358f8d&&_0x358f8d['val']&&(_0x24774c['eventHistory']=JSON[_0x2d282e(0x1ad)](_0x358f8d[_0x2d282e(0x2a9)][_0x2d282e(0x1f8)]()));}catch(_0x4db54a){_0x24774c[_0x2d282e(0x21d)]=[];}try{const _0x290636=await _0x24774c[_0x2d282e(0x289)](_0x2d282e(0x1c4));if(_0x290636&&_0x290636['val'])_0x24774c[_0x2d282e(0x1e2)]=JSON[_0x2d282e(0x1ad)](_0x290636[_0x2d282e(0x2a9)][_0x2d282e(0x1f8)]());}catch(_0x3c0bee){_0x24774c[_0x2d282e(0x1e2)]=[];}}async function initSystemConfig(_0x5019cb){const _0x431991=a0_0x18de17;try{const _0xdaa0bb=await _0x5019cb[_0x431991(0x1c3)](_0x431991(0x242));_0xdaa0bb&&_0xdaa0bb['common']&&(_0x5019cb['systemConfig']={'latitude':_0xdaa0bb[_0x431991(0x1d1)][_0x431991(0x2f3)]||0x0,'longitude':_0xdaa0bb[_0x431991(0x1d1)][_0x431991(0x206)]||0x0,'city':_0xdaa0bb[_0x431991(0x1d1)][_0x431991(0x20b)]||''});}catch(_0x485b28){}}async function checkLicense(_0x23da0a,_0x2204ca){const _0x2c9331=a0_0x18de17;if(!_0x2204ca)return![];_0x23da0a['systemUUID']=await getSystemUUID(_0x23da0a);if(_0x2204ca===_0x2c9331(0x241)||_0x2204ca[_0x2c9331(0x2dc)]('PRO-'))return!![];return![];}async function getSystemUUID(_0x5c493c){const _0x283a43=a0_0x18de17;try{const _0x24275b=await _0x5c493c[_0x283a43(0x1c3)](_0x283a43(0x1ec));if(_0x24275b&&_0x24275b[_0x283a43(0x2d7)]&&_0x24275b['native'][_0x283a43(0x31b)])return _0x24275b[_0x283a43(0x2d7)][_0x283a43(0x31b)];return _0x283a43(0x1d4);}catch(_0x5fa16d){return'uuid-error';}}async function createAllObjects(_0x29c7ad){const _0xef7c57=a0_0x18de17;await checkSystemObjects(_0x29c7ad),await _0x29c7ad['setObjectNotExistsAsync'](_0xef7c57(0x23b),{'type':_0xef7c57(0x277),'common':{'name':_0xef7c57(0x2e3),'type':_0xef7c57(0x26c),'role':_0xef7c57(0x1c9),'read':!![],'write':![],'def':''},'native':{}}),await _0x29c7ad[_0xef7c57(0x238)](_0xef7c57(0x2f1),{'type':'state','common':{'name':_0xef7c57(0x312),'type':_0xef7c57(0x26c),'role':_0xef7c57(0x224),'read':!![],'write':![]},'native':{}}),await _0x29c7ad[_0xef7c57(0x238)]('events.history',{'type':'state','common':{'name':_0xef7c57(0x2a8),'type':_0xef7c57(0x26c),'role':'json','read':!![],'write':![]},'native':{}}),await _0x29c7ad[_0xef7c57(0x238)](_0xef7c57(0x246),{'type':_0xef7c57(0x277),'common':{'name':_0xef7c57(0x30a),'type':'boolean','role':_0xef7c57(0x291),'read':!![],'write':!![],'def':![]},'native':{}}),await _0x29c7ad[_0xef7c57(0x238)](_0xef7c57(0x24e),{'type':_0xef7c57(0x277),'common':{'name':'Trigger\x20Briefing\x20(Test)','type':_0xef7c57(0x2d9),'role':_0xef7c57(0x291),'read':!![],'write':!![],'def':![]},'native':{}}),await _0x29c7ad[_0xef7c57(0x238)](_0xef7c57(0x198),{'type':_0xef7c57(0x277),'common':{'name':'Last\x20Result','type':_0xef7c57(0x26c),'role':'json','read':!![],'write':![]},'native':{}}),await _0x29c7ad[_0xef7c57(0x238)](_0xef7c57(0x27f),{'type':_0xef7c57(0x277),'common':{'name':_0xef7c57(0x226),'type':_0xef7c57(0x2d9),'role':'indicator.alarm','read':!![],'write':![],'def':![]},'native':{}}),await _0x29c7ad['setObjectNotExistsAsync'](_0xef7c57(0x2c4),{'type':_0xef7c57(0x277),'common':{'name':_0xef7c57(0x254),'type':'boolean','role':_0xef7c57(0x306),'read':!![],'write':![],'def':![]},'native':{}}),await _0x29c7ad[_0xef7c57(0x238)](_0xef7c57(0x1a9),{'type':_0xef7c57(0x277),'common':{'name':'Alert\x20Reason','type':'string','role':_0xef7c57(0x1c0),'read':!![],'write':![]},'native':{}}),await _0x29c7ad[_0xef7c57(0x238)]('analysis.activitySummary',{'type':_0xef7c57(0x277),'common':{'name':'Activity\x20Summary','type':_0xef7c57(0x26c),'role':_0xef7c57(0x1c9),'read':!![],'write':![]},'native':{}}),await _0x29c7ad['setObjectNotExistsAsync'](_0xef7c57(0x32d),{'type':_0xef7c57(0x277),'common':{'name':'Deviation','type':_0xef7c57(0x26c),'role':_0xef7c57(0x277),'read':!![],'write':![],'def':'N/A'},'native':{}}),await _0x29c7ad[_0xef7c57(0x238)](_0xef7c57(0x273),{'type':_0xef7c57(0x277),'common':{'name':_0xef7c57(0x2c3),'type':_0xef7c57(0x26c),'role':_0xef7c57(0x1c9),'read':!![],'write':![]},'native':{}}),await _0x29c7ad[_0xef7c57(0x238)](_0xef7c57(0x240),{'type':_0xef7c57(0x277),'common':{'name':_0xef7c57(0x204),'type':_0xef7c57(0x26c),'role':_0xef7c57(0x1c9),'read':!![],'write':![]},'native':{}}),await _0x29c7ad[_0xef7c57(0x2bb)](_0xef7c57(0x207),{'type':_0xef7c57(0x1de),'common':{'name':_0xef7c57(0x223)},'native':{}}),await _0x29c7ad[_0xef7c57(0x238)](_0xef7c57(0x267),{'type':_0xef7c57(0x277),'common':{'name':'Pattern\x20Detected','type':'boolean','role':_0xef7c57(0x209),'read':!![],'write':![],'def':![]},'native':{}}),await _0x29c7ad[_0xef7c57(0x238)]('analysis.automation.description',{'type':_0xef7c57(0x277),'common':{'name':_0xef7c57(0x1a2),'type':_0xef7c57(0x26c),'role':_0xef7c57(0x1c9),'read':!![],'write':![]},'native':{}}),await _0x29c7ad['setObjectNotExistsAsync'](_0xef7c57(0x2d4),{'type':_0xef7c57(0x277),'common':{'name':_0xef7c57(0x2f9),'type':'string','role':_0xef7c57(0x1c9),'read':!![],'write':![]},'native':{}}),await _0x29c7ad['setObjectNotExistsAsync'](_0xef7c57(0x2a0),{'type':'state','common':{'name':_0xef7c57(0x278),'type':_0xef7c57(0x26c),'role':_0xef7c57(0x1c9),'read':!![],'write':![]},'native':{}}),await _0x29c7ad[_0xef7c57(0x238)](_0xef7c57(0x1b7),{'type':_0xef7c57(0x277),'common':{'name':_0xef7c57(0x2c0),'type':_0xef7c57(0x26c),'role':_0xef7c57(0x1c9),'read':!![],'write':![]},'native':{}}),await _0x29c7ad[_0xef7c57(0x238)](_0xef7c57(0x23f),{'type':'state','common':{'name':_0xef7c57(0x26a),'type':'boolean','role':'switch','read':!![],'write':!![],'def':![]},'native':{}}),await _0x29c7ad[_0xef7c57(0x238)](_0xef7c57(0x2a6),{'type':_0xef7c57(0x277),'common':{'name':_0xef7c57(0x230),'type':_0xef7c57(0x2d9),'role':_0xef7c57(0x291),'read':!![],'write':!![],'def':![]},'native':{}}),await _0x29c7ad[_0xef7c57(0x238)](_0xef7c57(0x1c4),{'type':_0xef7c57(0x277),'common':{'name':_0xef7c57(0x2dd),'type':_0xef7c57(0x26c),'role':_0xef7c57(0x224),'read':!![],'write':![],'def':'[]'},'native':{}}),await _0x29c7ad[_0xef7c57(0x238)](_0xef7c57(0x269),{'type':'state','common':{'name':'Feedback\x20Log','type':'string','role':'json','read':!![],'write':![],'def':'[]'},'native':{}}),await _0x29c7ad[_0xef7c57(0x2bb)](_0xef7c57(0x2a5),{'type':_0xef7c57(0x1de),'common':{'name':_0xef7c57(0x256)},'native':{}}),await _0x29c7ad[_0xef7c57(0x238)]('analysis.health.sleepScore',{'type':'state','common':{'name':_0xef7c57(0x1b2),'type':_0xef7c57(0x2e4),'role':'value.health','read':!![],'write':![],'def':0x0},'native':{}}),await _0x29c7ad[_0xef7c57(0x238)](_0xef7c57(0x1aa),{'type':_0xef7c57(0x277),'common':{'name':_0xef7c57(0x332),'type':'string','role':_0xef7c57(0x1c9),'read':!![],'write':![],'def':'none'},'native':{}}),await _0x29c7ad[_0xef7c57(0x238)](_0xef7c57(0x2ed),{'type':'state','common':{'name':_0xef7c57(0x25c),'type':_0xef7c57(0x26c),'role':'text','read':!![],'write':![],'def':''},'native':{}}),await checkLtmObjects(_0x29c7ad),await checkLtmDriftObjects(_0x29c7ad);}async function checkSystemObjects(_0x43df8a){const _0x16c11f=a0_0x18de17;await _0x43df8a[_0x16c11f(0x2bb)](_0x16c11f(0x1d9),{'type':'channel','common':{'name':_0x16c11f(0x29c)},'native':{}}),await _0x43df8a[_0x16c11f(0x2bb)](SYSTEM_DP_MODE,{'type':_0x16c11f(0x277),'common':{'name':_0x16c11f(0x2d5),'type':_0x16c11f(0x26c),'role':_0x16c11f(0x277),'read':!![],'write':!![],'def':SYSTEM_MODES[_0x16c11f(0x2f0)],'states':{[SYSTEM_MODES[_0x16c11f(0x2f0)]]:_0x16c11f(0x192),[SYSTEM_MODES[_0x16c11f(0x337)]]:'Urlaub',[SYSTEM_MODES[_0x16c11f(0x2ea)]]:_0x16c11f(0x330),[SYSTEM_MODES[_0x16c11f(0x217)]]:_0x16c11f(0x261)}},'native':{}});}async function checkLtmObjects(_0x417153){const _0x18b280=a0_0x18de17;await _0x417153[_0x18b280(0x2bb)](_0x18b280(0x20a),{'type':_0x18b280(0x1de),'common':{'name':_0x18b280(0x20a)},'native':{}}),await _0x417153[_0x18b280(0x2bb)](LTM_DP_RAW_LOG,{'type':_0x18b280(0x277),'common':{'name':_0x18b280(0x2f6),'type':_0x18b280(0x26c),'role':'json','read':!![],'write':![]},'native':{}}),await _0x417153[_0x18b280(0x2bb)](LTM_DP_DAILY_DIGESTS,{'type':_0x18b280(0x277),'common':{'name':_0x18b280(0x315),'type':_0x18b280(0x26c),'role':_0x18b280(0x224),'read':!![],'write':![]},'native':{}}),await _0x417153[_0x18b280(0x2bb)](LTM_DP_STATUS,{'type':_0x18b280(0x277),'common':{'name':_0x18b280(0x33b),'type':'string','role':'text','read':!![],'write':![]},'native':{}}),await _0x417153[_0x18b280(0x2bb)](LTM_DP_TRIGGER_DIGEST,{'type':'state','common':{'name':_0x18b280(0x2fd),'type':_0x18b280(0x2d9),'role':_0x18b280(0x291),'read':!![],'write':!![],'def':![]},'native':{}}),await _0x417153[_0x18b280(0x2bb)](LTM_DP_BASELINE_STATUS,{'type':_0x18b280(0x277),'common':{'name':_0x18b280(0x2c1),'type':_0x18b280(0x26c),'role':'text','read':!![],'write':![]},'native':{}});}async function checkLtmDriftObjects(_0x24287e){const _0x4144e7=a0_0x18de17;await _0x24287e['extendObjectAsync'](LTM_DP_DRIFT_CHANNEL,{'type':_0x4144e7(0x1de),'common':{'name':_0x4144e7(0x1cf)},'native':{}}),await _0x24287e[_0x4144e7(0x2bb)](LTM_DP_DRIFT_STATUS,{'type':_0x4144e7(0x277),'common':{'name':_0x4144e7(0x1dc),'type':_0x4144e7(0x26c),'role':'state','read':!![],'write':![],'def':_0x4144e7(0x22d)},'native':{}}),await _0x24287e[_0x4144e7(0x2bb)](LTM_DP_DRIFT_DETAILS,{'type':_0x4144e7(0x277),'common':{'name':'Drift\x20Details','type':_0x4144e7(0x26c),'role':_0x4144e7(0x1c9),'read':!![],'write':![]},'native':{}}),await _0x24287e[_0x4144e7(0x2bb)](LTM_DP_DRIFT_LAST_CHECK,{'type':_0x4144e7(0x277),'common':{'name':_0x4144e7(0x243),'type':'number','role':_0x4144e7(0x33d),'read':!![],'write':![]},'native':{}});}async function loadSystemMode(_0x585ac6){const _0x2f126b=a0_0x18de17;try{const _0x4ac365=await _0x585ac6[_0x2f126b(0x289)](SYSTEM_DP_MODE);_0x4ac365&&_0x4ac365[_0x2f126b(0x2a9)]&&Object[_0x2f126b(0x239)](SYSTEM_MODES)[_0x2f126b(0x195)](_0x4ac365['val'])?_0x585ac6[_0x2f126b(0x24c)]=_0x4ac365[_0x2f126b(0x2a9)]:(_0x585ac6[_0x2f126b(0x24c)]=SYSTEM_MODES['NORMAL'],await _0x585ac6[_0x2f126b(0x1f5)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x2f126b(0x2f0)],'ack':!![]}));}catch(_0x18f3eb){_0x585ac6['currentSystemMode']=SYSTEM_MODES['NORMAL'];}}async function loadRawEventLog(_0x540ed8){const _0x140ccc=a0_0x18de17;try{const _0x17fa78=await _0x540ed8[_0x140ccc(0x289)](LTM_DP_RAW_LOG);if(_0x17fa78&&_0x17fa78[_0x140ccc(0x2a9)])_0x540ed8[_0x140ccc(0x264)]=JSON[_0x140ccc(0x1ad)](_0x17fa78[_0x140ccc(0x2a9)]);}catch(_0x5a0510){_0x540ed8['rawEventLog']=[];}}async function saveRawEventLog(_0x7f6acb){const _0x3c477a=a0_0x18de17;_0x7f6acb[_0x3c477a(0x264)][_0x3c477a(0x2b6)]>RAW_LOG_MAX_SIZE&&_0x7f6acb[_0x3c477a(0x264)]['splice'](0x0,_0x7f6acb[_0x3c477a(0x264)][_0x3c477a(0x2b6)]-RAW_LOG_MAX_SIZE),await _0x7f6acb[_0x3c477a(0x1f5)](LTM_DP_RAW_LOG,{'val':JSON['stringify'](_0x7f6acb[_0x3c477a(0x264)]),'ack':!![]});}async function loadDailyDigests(_0x1739c3){const _0x5716f5=a0_0x18de17;try{const _0x24ad6b=await _0x1739c3[_0x5716f5(0x289)](LTM_DP_DAILY_DIGESTS);if(_0x24ad6b&&_0x24ad6b[_0x5716f5(0x2a9)])_0x1739c3[_0x5716f5(0x320)]=JSON[_0x5716f5(0x1ad)](_0x24ad6b[_0x5716f5(0x2a9)]);}catch(_0x10a5f3){_0x1739c3[_0x5716f5(0x320)]=[];}await updateBaselineStatus(_0x1739c3);}async function saveDailyDigests(_0x32beba,_0x362266=!![]){const _0x55b24b=a0_0x18de17,_0x35019a=_0x32beba[_0x55b24b(0x188)][_0x55b24b(0x19f)]||0x3c;_0x32beba['dailyDigests'][_0x55b24b(0x2b6)]>_0x35019a&&_0x32beba['dailyDigests']['splice'](0x0,_0x32beba['dailyDigests'][_0x55b24b(0x2b6)]-_0x35019a);await _0x32beba['setStateAsync'](LTM_DP_DAILY_DIGESTS,{'val':JSON['stringify'](_0x32beba[_0x55b24b(0x320)]),'ack':!![]});if(_0x362266)await updateBaselineStatus(_0x32beba);}async function updateAnalysisHistory(_0x380f97,_0x49e30b){const _0x4c91df=a0_0x18de17;_0x380f97[_0x4c91df(0x1e2)][_0x4c91df(0x2be)](_0x49e30b);if(_0x380f97[_0x4c91df(0x1e2)][_0x4c91df(0x2b6)]>ANALYSIS_HISTORY_MAX_SIZE)_0x380f97[_0x4c91df(0x1e2)][_0x4c91df(0x211)]();await _0x380f97[_0x4c91df(0x1f5)](_0x4c91df(0x1c4),{'val':JSON[_0x4c91df(0x21a)](_0x380f97['analysisHistory']),'ack':!![]});}async function updateBaselineStatus(_0x4bc0d7){const _0x3f3757=a0_0x18de17;if(!_0x4bc0d7[_0x3f3757(0x1a8)]){await _0x4bc0d7[_0x3f3757(0x1f5)](LTM_DP_BASELINE_STATUS,{'val':_0x3f3757(0x21f),'ack':!![]});return;}const _0x5ec595=_0x4bc0d7['dailyDigests'][_0x3f3757(0x2b6)]>=(_0x4bc0d7[_0x3f3757(0x188)][_0x3f3757(0x18c)]||0x7)?_0x3f3757(0x18f)+_0x4bc0d7[_0x3f3757(0x320)][_0x3f3757(0x2b6)]+_0x3f3757(0x28c):_0x3f3757(0x29f)+_0x4bc0d7[_0x3f3757(0x320)]['length']+'/'+(_0x4bc0d7[_0x3f3757(0x188)]['minDaysForBaseline']||0x7)+')';await _0x4bc0d7[_0x3f3757(0x1f5)](LTM_DP_BASELINE_STATUS,{'val':_0x5ec595,'ack':!![]});}async function initSensorSubscriptions(_0x266111){const _0x142236=a0_0x18de17,_0x5e7f37=_0x266111[_0x142236(0x188)][_0x142236(0x248)];if(_0x5e7f37&&_0x5e7f37[_0x142236(0x2b6)]>0x0){_0x266111[_0x142236(0x233)]['info'](_0x142236(0x1c2)+_0x5e7f37['length']+'\x20sensors...');for(const _0x40c92d of _0x5e7f37){if(_0x40c92d['id']){await _0x266111['subscribeForeignStatesAsync'](_0x40c92d['id']);try{const _0x81b189=await _0x266111[_0x142236(0x2e0)](_0x40c92d['id']);if(_0x81b189)_0x266111[_0x142236(0x1b0)][_0x40c92d['id']]=_0x81b189[_0x142236(0x2a9)];}catch(_0x486163){}}}}}async function initPresenceSubscriptions(_0x28d898){const _0x36315e=a0_0x18de17,_0x525622=_0x28d898[_0x36315e(0x188)][_0x36315e(0x33f)]||[];if(_0x525622[_0x36315e(0x2b6)]>0x0){_0x28d898['log'][_0x36315e(0x235)]('Subscribing\x20to\x20'+_0x525622['length']+'\x20presence\x20devices...');for(const _0x371726 of _0x525622){await _0x28d898[_0x36315e(0x27e)](_0x371726);}try{await checkWifiPresence(_0x28d898);}catch(_0x47bdad){}}}async function getWeatherContext(_0x357084){const _0x1cde06=a0_0x18de17;try{if(!_0x357084['config']['useWeather'])return _0x1cde06(0x31c);let _0x17ed1d='';const _0x34b09c=_0x357084[_0x1cde06(0x188)][_0x1cde06(0x21c)];if(_0x34b09c)try{if(_0x34b09c[_0x1cde06(0x195)](_0x1cde06(0x1db))){const _0x2790a4=await _0x357084[_0x1cde06(0x2e0)](_0x34b09c+_0x1cde06(0x290));if(_0x2790a4&&_0x2790a4['val'])_0x17ed1d=_0x2790a4[_0x1cde06(0x2a9)];}else{if(_0x34b09c[_0x1cde06(0x195)]('daswetter')){const _0x41a480=await _0x357084[_0x1cde06(0x2e0)](_0x34b09c+_0x1cde06(0x2ce));if(_0x41a480&&_0x41a480[_0x1cde06(0x2a9)])_0x17ed1d=_0x41a480[_0x1cde06(0x2a9)];}else{if(_0x34b09c[_0x1cde06(0x195)](_0x1cde06(0x25d))){const _0x42de0e=await _0x357084[_0x1cde06(0x2e0)](_0x34b09c+'.forecast.current.state');if(_0x42de0e&&_0x42de0e[_0x1cde06(0x2a9)])_0x17ed1d=_0x42de0e['val'];}}}}catch(_0x10c0ce){}if(!_0x17ed1d){const _0x5e9aad=[_0x1cde06(0x23c),_0x1cde06(0x27c),_0x1cde06(0x1c8),_0x1cde06(0x252)];for(const _0x57c747 of _0x5e9aad){try{const _0xbb2092=await _0x357084[_0x1cde06(0x1c3)](_0x57c747);if(_0xbb2092){if(_0x57c747['includes'](_0x1cde06(0x1db))){const _0xbf5f0d=await _0x357084[_0x1cde06(0x2e0)](_0x57c747+'.Summary.Current');if(_0xbf5f0d&&_0xbf5f0d[_0x1cde06(0x2a9)]){_0x17ed1d=_0xbf5f0d[_0x1cde06(0x2a9)];break;}}}}catch(_0x6c597d){}}}return _0x17ed1d?_0x1cde06(0x27d)+_0x17ed1d:_0x1cde06(0x234);}catch(_0x52e42a){return'WETTER\x20ERROR:\x20'+_0x52e42a[_0x1cde06(0x2c6)];}}async function getCalendarContext(_0x2bc69f){const _0x4ddcdb=a0_0x18de17;try{if(!_0x2bc69f[_0x4ddcdb(0x188)][_0x4ddcdb(0x2b7)])return _0x4ddcdb(0x19e);let _0x534980=_0x2bc69f[_0x4ddcdb(0x188)][_0x4ddcdb(0x2fa)]||_0x4ddcdb(0x313),_0x25720f=_0x2bc69f[_0x4ddcdb(0x188)][_0x4ddcdb(0x308)]||[];if(typeof _0x25720f===_0x4ddcdb(0x26c))_0x25720f=_0x25720f[_0x4ddcdb(0x2ab)](',');try{const _0x33eed1=await _0x2bc69f[_0x4ddcdb(0x2e0)](_0x534980+_0x4ddcdb(0x2fc));if(_0x33eed1&&_0x33eed1[_0x4ddcdb(0x2a9)]){let _0x13cdb9=tryParse(_0x33eed1[_0x4ddcdb(0x2a9)]);if(_0x13cdb9&&Array[_0x4ddcdb(0x326)](_0x13cdb9)){if(_0x25720f['length']>0x0)_0x13cdb9=_0x13cdb9[_0x4ddcdb(0x318)](_0x2b0607=>_0x25720f[_0x4ddcdb(0x195)](_0x2b0607[_0x4ddcdb(0x2db)]||''));else return _0x4ddcdb(0x314);if(_0x13cdb9[_0x4ddcdb(0x2b6)]>0x0){const _0x2c0f12=_0x13cdb9[_0x4ddcdb(0x29b)](0x0,0x3)['map'](_0x315202=>{const _0x542dc0=_0x4ddcdb;let _0x3a3b5c=_0x315202[_0x542dc0(0x33d)];if(_0x315202[_0x542dc0(0x265)])_0x3a3b5c+='\x20'+_0x315202[_0x542dc0(0x265)];return _0x3a3b5c+':\x20'+_0x315202[_0x542dc0(0x1e7)]+'\x20('+_0x315202[_0x542dc0(0x2db)]+')';});return _0x4ddcdb(0x222)+_0x2c0f12['join'](_0x4ddcdb(0x30c));}else return _0x4ddcdb(0x2e7);}}}catch(_0x1bbfe6){_0x2bc69f[_0x4ddcdb(0x233)][_0x4ddcdb(0x22f)](_0x4ddcdb(0x2ba)+_0x1bbfe6[_0x4ddcdb(0x2c6)]);}return _0x4ddcdb(0x1e0);}catch(_0x5ee4d7){return _0x4ddcdb(0x1da)+_0x5ee4d7[_0x4ddcdb(0x2c6)];}}async function getCalendarNames(_0x34ac0e,_0x5d8647){const _0x369e27=a0_0x18de17;try{const _0x1c5324=await _0x34ac0e[_0x369e27(0x2e0)](_0x5d8647+'.data.table');if(_0x1c5324&&_0x1c5324[_0x369e27(0x2a9)]){const _0x5e200b=tryParse(_0x1c5324['val']);if(_0x5e200b&&Array['isArray'](_0x5e200b)){const _0x55db71=[...new Set(_0x5e200b[_0x369e27(0x31a)](_0x7cc7b6=>_0x7cc7b6[_0x369e27(0x2db)])['filter'](Boolean))];return _0x55db71[_0x369e27(0x2ef)]();}}return[];}catch(_0x76261b){return _0x34ac0e['log'][_0x369e27(0x1eb)](_0x369e27(0x1af)+_0x76261b[_0x369e27(0x2c6)]),[];}}async function checkWifiPresence(_0x2a3f97){const _0x471976=a0_0x18de17;try{const _0x2f602c=_0x2a3f97[_0x471976(0x188)][_0x471976(0x33f)]||[];let _0x4961a3=![];const _0x48b674=[];for(const _0x4f8762 of _0x2f602c){try{const _0xc304bd=await _0x2a3f97[_0x471976(0x2e0)](_0x4f8762);if(_0xc304bd&&(_0xc304bd['val']===!![]||_0xc304bd[_0x471976(0x2a9)]===_0x471976(0x2b3)||_0xc304bd[_0x471976(0x2a9)]===0x1)){_0x4961a3=!![];const _0x7b06dd=await _0x2a3f97[_0x471976(0x1c3)](_0x4f8762);let _0xc52009=_0x4f8762;_0x7b06dd&&_0x7b06dd['common']&&_0x7b06dd['common'][_0x471976(0x31d)]&&(_0xc52009=typeof _0x7b06dd[_0x471976(0x1d1)]['name']===_0x471976(0x20e)?_0x7b06dd[_0x471976(0x1d1)][_0x471976(0x31d)]['de']||_0x7b06dd['common'][_0x471976(0x31d)]['en']:_0x7b06dd[_0x471976(0x1d1)][_0x471976(0x31d)]),_0x48b674['push'](_0xc52009);}}catch(_0x25d752){}}return await _0x2a3f97[_0x471976(0x1f5)](_0x471976(0x23b),{'val':_0x48b674[_0x471976(0x31f)](',\x20'),'ack':!![]}),_0x4961a3&&(_0x2a3f97['exitTimer']&&(_0x2a3f97[_0x471976(0x233)][_0x471976(0x235)](_0x471976(0x1ea)),abortExitTimer(_0x2a3f97)),!_0x2a3f97['isPresent']&&_0x2a3f97[_0x471976(0x24c)]===SYSTEM_MODES[_0x471976(0x2f0)]&&await setPresence(_0x2a3f97,!![])),_0x4961a3;}catch(_0x4db8f9){return _0x2a3f97[_0x471976(0x233)][_0x471976(0x1eb)](_0x471976(0x213)+_0x4db8f9[_0x471976(0x2c6)]),![];}}function startExitTimer(_0x478648){const _0xb37358=a0_0x18de17;abortExitTimer(_0x478648),_0x478648[_0xb37358(0x285)]=!![],_0x478648[_0xb37358(0x191)]=setTimeout(()=>{_0x478648['isGracePeriodActive']=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),_0x478648['exitTimer']=setTimeout(()=>{setPresence(_0x478648,![]),_0x478648['exitTimer']=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}function abortExitTimer(_0x2df28f){const _0x123252=a0_0x18de17;if(_0x2df28f[_0x123252(0x194)])clearTimeout(_0x2df28f[_0x123252(0x194)]);if(_0x2df28f[_0x123252(0x191)])clearTimeout(_0x2df28f['exitGraceTimer']);_0x2df28f[_0x123252(0x194)]=null,_0x2df28f[_0x123252(0x191)]=null,_0x2df28f[_0x123252(0x285)]=![];}async function setPresence(_0x10a54e,_0x123c29){const _0x1ff805=a0_0x18de17;if(_0x10a54e[_0x1ff805(0x30b)]===_0x123c29)return;_0x10a54e['isPresent']=_0x123c29,await _0x10a54e[_0x1ff805(0x1f5)](_0x1ff805(0x2f4),{'val':_0x123c29,'ack':!![]});}async function saveFeedback(_0x4f59b2,_0x4221cd){const _0x31a4ea=a0_0x18de17;_0x4f59b2['log'][_0x31a4ea(0x235)]('Feedback\x20saved:\x20'+JSON['stringify'](_0x4221cd));}async function runBaselineDriftAnalysis(_0x522077){const _0x3101e8=a0_0x18de17;if(!_0x522077['isProVersion']||!_0x522077['geminiModel'])return;const _0x3188ec=_0x522077[_0x3101e8(0x188)][_0x3101e8(0x2cc)]||0xe;if(_0x522077[_0x3101e8(0x320)]['length']<_0x3188ec+(_0x522077[_0x3101e8(0x188)][_0x3101e8(0x18c)]||0x7)){await _0x522077[_0x3101e8(0x1f5)](LTM_DP_DRIFT_STATUS,{'val':_0x3101e8(0x1d5),'ack':!![]});return;}const _0x2a6eac=_0x522077[_0x3101e8(0x320)][_0x3101e8(0x29b)](-_0x3188ec),_0x1f1935=_0x522077[_0x3101e8(0x320)][_0x3101e8(0x29b)](0x0,_0x522077[_0x3101e8(0x320)]['length']-_0x3188ec),_0x230936=_0x3101e8(0x18a)+JSON['stringify'](_0x1f1935)+_0x3101e8(0x197)+JSON[_0x3101e8(0x21a)](_0x2a6eac);try{const _0x16189a=await _0x522077[_0x3101e8(0x272)][_0x3101e8(0x1ba)](_0x230936),_0x2cbcf0=JSON[_0x3101e8(0x1ad)](_0x16189a[_0x3101e8(0x270)][_0x3101e8(0x1c9)]()['replace'](/```json|```/g,'')['trim']());_0x2cbcf0['baselineDrift']&&(await _0x522077[_0x3101e8(0x1f5)](LTM_DP_DRIFT_STATUS,{'val':_0x2cbcf0[_0x3101e8(0x25f)],'ack':!![]}),await _0x522077[_0x3101e8(0x1f5)](LTM_DP_DRIFT_DETAILS,{'val':_0x2cbcf0['driftDetails'],'ack':!![]}),await _0x522077['setStateAsync'](LTM_DP_DRIFT_LAST_CHECK,{'val':Date['now'](),'ack':!![]}));}catch(_0x21adb2){}}function setupLtmScheduler(_0x40bc8a){const _0x3a7a7f=a0_0x18de17;try{if(_0x40bc8a[_0x3a7a7f(0x221)])_0x40bc8a[_0x3a7a7f(0x221)]['cancel']();if(!_0x40bc8a[_0x3a7a7f(0x1a8)]){_0x40bc8a[_0x3a7a7f(0x1f5)](LTM_DP_STATUS,{'val':'Deaktiviert\x20(Pro-Feature)','ack':!![]});return;}_0x40bc8a[_0x3a7a7f(0x221)]=schedule[_0x3a7a7f(0x2b0)](LTM_SCHEDULE,()=>createDailyDigest(_0x40bc8a));}catch(_0x4dc258){_0x40bc8a[_0x3a7a7f(0x233)]['error']('LTM\x20Sched\x20Error:\x20'+_0x4dc258['message']);}}function setupModeResetScheduler(_0x4421a4){const _0x4b565a=a0_0x18de17;try{if(_0x4421a4[_0x4b565a(0x1c6)])_0x4421a4['modeResetJob'][_0x4b565a(0x2a3)]();_0x4421a4['modeResetJob']=schedule[_0x4b565a(0x2b0)](MODE_RESET_SCHEDULE,async()=>{const _0x1f18f1=_0x4b565a;await loadSystemMode(_0x4421a4),AUTO_RESET_MODES['includes'](_0x4421a4['currentSystemMode'])&&await _0x4421a4[_0x1f18f1(0x1f5)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x1f18f1(0x2f0)],'ack':![]});});}catch(_0x250c6f){_0x4421a4[_0x4b565a(0x233)]['error'](_0x4b565a(0x1ac)+_0x250c6f[_0x4b565a(0x2c6)]);}}function setupDriftAnalysisScheduler(_0x44fdbe){const _0x50c54c=a0_0x18de17;try{if(_0x44fdbe[_0x50c54c(0x2e2)])clearInterval(_0x44fdbe[_0x50c54c(0x2e2)]);if(!_0x44fdbe[_0x50c54c(0x1a8)])return;_0x44fdbe[_0x50c54c(0x2e2)]=setInterval(()=>runBaselineDriftAnalysis(_0x44fdbe),(_0x44fdbe[_0x50c54c(0x188)][_0x50c54c(0x1fd)]||0x18)*0x36ee80),setTimeout(()=>runBaselineDriftAnalysis(_0x44fdbe),0x1388);}catch(_0x73b918){_0x44fdbe[_0x50c54c(0x233)][_0x50c54c(0x1eb)](_0x50c54c(0x30f)+_0x73b918['message']);}}function setupBriefingScheduler(_0x356e21){const _0x5d71b6=a0_0x18de17;try{if(_0x356e21[_0x5d71b6(0x1cd)])_0x356e21[_0x5d71b6(0x1cd)][_0x5d71b6(0x2a3)]();if(!_0x356e21[_0x5d71b6(0x188)][_0x5d71b6(0x1bc)])return;const _0x4ff49b=(_0x356e21[_0x5d71b6(0x188)][_0x5d71b6(0x2f5)]||_0x5d71b6(0x316))[_0x5d71b6(0x2ab)](':'),_0x59fee4=parseInt(_0x4ff49b[0x0])||0x8,_0x6a94fa=parseInt(_0x4ff49b[0x1])||0x0,_0x24acfe=_0x6a94fa+'\x20'+_0x59fee4+_0x5d71b6(0x1bf);_0x356e21[_0x5d71b6(0x233)]['info'](_0x5d71b6(0x1c5)+_0x59fee4+':'+(_0x6a94fa<0xa?'0'+_0x6a94fa:_0x6a94fa)),_0x356e21[_0x5d71b6(0x1cd)]=schedule['scheduleJob'](_0x24acfe,()=>{sendMorningBriefing(_0x356e21);});}catch(_0x347ade){_0x356e21[_0x5d71b6(0x233)][_0x5d71b6(0x1eb)](_0x5d71b6(0x201)+_0x347ade[_0x5d71b6(0x2c6)]);}}async function sendNotification(_0xc9e3a1,_0x535889,_0x413acf=![],_0x4db736=![]){const _0x1c348e=a0_0x18de17;_0xc9e3a1[_0x1c348e(0x233)]['info']((_0x413acf?'[TEST]\x20':'')+_0x1c348e(0x1b3)+_0x535889+'\x22');const _0x280f32=_0xc9e3a1[_0x1c348e(0x188)];let _0x3f91ff=0x0;if(_0x280f32[_0x1c348e(0x202)]){let _0xfcacca={};(_0x535889['includes'](_0x1c348e(0x2de))||_0x4db736)&&(_0xfcacca={'reply_markup':{'inline_keyboard':[[{'text':_0x1c348e(0x255),'callback_data':_0x1c348e(0x225)}],[{'text':_0x1c348e(0x2c9),'callback_data':'COGNI_REQUEST_CALL'}]]}}),await _0xc9e3a1['sendToAsync'](_0x280f32[_0x1c348e(0x1a7)],_0x1c348e(0x1ee),{'text':_0x535889,'user':_0x280f32[_0x1c348e(0x283)],..._0xfcacca}),_0x3f91ff++;}if(_0x280f32['notifyPushoverEnabled']){let _0x4cc4c2={'message':_0x535889,'title':_0x4db736?'üö®\x20EMERGENCY':'Cogni-Living','priority':_0x4db736?0x2:0x1,'device':_0x280f32['notifyPushoverRecipient']};_0x4db736&&(_0x4cc4c2['retry']=0x1e,_0x4cc4c2['expire']=0xe10,_0x4cc4c2['sound']='siren'),await _0xc9e3a1[_0x1c348e(0x309)](_0x280f32[_0x1c348e(0x2da)],_0x1c348e(0x1ee),_0x4cc4c2),_0x3f91ff++;}return _0x280f32[_0x1c348e(0x228)]&&(await _0xc9e3a1['sendToAsync'](_0x280f32[_0x1c348e(0x18e)],_0x1c348e(0x1ee),{'text':_0x535889,'to':_0x280f32['notifyEmailRecipient']}),_0x3f91ff++),_0x3f91ff;}async function setupTelegramListener(_0x87fbc){const _0x42dbd5=a0_0x18de17,_0x1f4974=_0x87fbc[_0x42dbd5(0x188)]['notifyTelegramInstance'];_0x87fbc[_0x42dbd5(0x188)][_0x42dbd5(0x202)]&&_0x1f4974&&(_0x87fbc[_0x42dbd5(0x233)][_0x42dbd5(0x235)](_0x42dbd5(0x22b)+_0x1f4974+_0x42dbd5(0x2bd)),await _0x87fbc[_0x42dbd5(0x27e)](_0x1f4974+_0x42dbd5(0x263)));}async function handleTelegramResponse(_0x35fff8,_0x4bc0e5){const _0x9ab53b=a0_0x18de17;let _0x378279=_0x4bc0e5;_0x4bc0e5[_0x9ab53b(0x2dc)]('[')&&(_0x378279=_0x4bc0e5[_0x9ab53b(0x2e6)](_0x4bc0e5[_0x9ab53b(0x1e8)](']')+0x1));if(_0x378279===_0x9ab53b(0x225))_0x35fff8[_0x9ab53b(0x233)][_0x9ab53b(0x235)](_0x9ab53b(0x1e9)),await _0x35fff8['setStateAsync'](_0x9ab53b(0x27f),{'val':![],'ack':!![]}),await _0x35fff8[_0x9ab53b(0x1f5)](_0x9ab53b(0x1a9),{'val':_0x9ab53b(0x329),'ack':!![]}),_0x35fff8[_0x9ab53b(0x305)]=![],sendNotification(_0x35fff8,_0x9ab53b(0x304),![]);else _0x378279===_0x9ab53b(0x2ee)&&(_0x35fff8[_0x9ab53b(0x233)][_0x9ab53b(0x22f)](_0x9ab53b(0x24f)),sendNotification(_0x35fff8,_0x9ab53b(0x279),![],!![]));}async function runAutopilot(_0x2578a4){const _0x254bce=a0_0x18de17,_0x4050d1=_0x2578a4[_0x254bce(0x188)][_0x254bce(0x275)],_0x2d3201=_0x2578a4[_0x254bce(0x21d)][_0x254bce(0x2b6)]>0x0?_0x2578a4['eventHistory'][0x0][_0x254bce(0x1b9)]:Date[_0x254bce(0x232)](),_0x1ab5cb=(Date['now']()-_0x2d3201)/(0x3e8*0x3c*0x3c);let _0x333efb='';_0x2578a4['config'][_0x254bce(0x1f2)]&&_0x2578a4[_0x254bce(0x24c)]===SYSTEM_MODES['NORMAL']&&_0x2578a4[_0x254bce(0x30b)]&&(_0x1ab5cb>_0x4050d1&&(_0x333efb=_0x254bce(0x2c8)+_0x1ab5cb[_0x254bce(0x21b)](0x1)+_0x254bce(0x25b))),runGeminiAnalysis(_0x2578a4,_0x333efb)[_0x254bce(0x2fe)](_0x474de2=>_0x2578a4[_0x254bce(0x233)][_0x254bce(0x1eb)](_0x474de2));}async function createDailyDigest(_0x30f61e){const _0x436cab=a0_0x18de17;if(!_0x30f61e[_0x436cab(0x1a8)])return;await _0x30f61e['setStateAsync'](LTM_DP_STATUS,{'val':_0x436cab(0x2b8)+new Date()[_0x436cab(0x2b5)](),'ack':!![]});if(!_0x30f61e[_0x436cab(0x272)]||_0x30f61e['rawEventLog']['length']<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x30f61e[_0x436cab(0x1f5)](LTM_DP_STATUS,{'val':_0x436cab(0x295),'ack':!![]});return;}const _0x597e13=JSON[_0x436cab(0x1ad)](JSON['stringify'](_0x30f61e[_0x436cab(0x264)])),_0x404d56=_0x597e13[_0x436cab(0x2b6)],_0x5bee02='ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a'+JSON[_0x436cab(0x21a)](_0x597e13);try{const _0x5de671=await _0x30f61e['geminiModel']['generateContent'](_0x5bee02),_0x1699b9=JSON[_0x436cab(0x1ad)](_0x5de671[_0x436cab(0x270)][_0x436cab(0x1c9)]()[_0x436cab(0x32e)](/```json|```/g,'')[_0x436cab(0x311)]());_0x1699b9[_0x436cab(0x2b4)]&&(_0x30f61e['dailyDigests']['push']({'timestamp':new Date()[_0x436cab(0x2d0)](),'eventCount':_0x404d56,'summary':_0x1699b9[_0x436cab(0x2b4)],'activityLevel':_0x1699b9[_0x436cab(0x229)],'systemMode':_0x30f61e['currentSystemMode']}),await saveDailyDigests(_0x30f61e),_0x30f61e['rawEventLog']=[],await saveRawEventLog(_0x30f61e),await _0x30f61e['setStateAsync'](LTM_DP_STATUS,{'val':'Success:\x20Compressed\x20'+_0x404d56+_0x436cab(0x2e8),'ack':!![]}));}catch(_0x1811ef){await _0x30f61e[_0x436cab(0x1f5)](LTM_DP_STATUS,{'val':_0x436cab(0x1f0)+_0x1811ef[_0x436cab(0x2c6)],'ack':!![]});}}async function sendMorningBriefing(_0x1de600){const _0x51d95c=a0_0x18de17;if(!_0x1de600['geminiModel'])return;_0x1de600[_0x51d95c(0x233)]['info'](_0x51d95c(0x19d));const _0x356f51=_0x1de600[_0x51d95c(0x320)]['length']>0x0?_0x1de600[_0x51d95c(0x320)][_0x1de600[_0x51d95c(0x320)]['length']-0x1]:null,_0x3b4241=_0x356f51&&_0x356f51[_0x51d95c(0x244)]?_0x356f51[_0x51d95c(0x244)][_0x51d95c(0x293)]:_0x51d95c(0x22d),_0x1c6fd3=new Date();_0x1c6fd3['setHours'](0x4,0x0,0x0,0x0);const _0x1d783b=_0x1de600['eventHistory'][_0x51d95c(0x318)](_0x1eea46=>new Date(_0x1eea46[_0x51d95c(0x1b9)])>_0x1c6fd3),_0x19c2cf=PERSONA_MAPPING[_0x1de600['config']['aiPersona']||_0x51d95c(0x1ae)],_0x329b04=_0x1de600[_0x51d95c(0x188)]['livingContext']||'',_0x1c12eb=await getWeatherContext(_0x1de600),_0x3a44db=await getCalendarContext(_0x1de600),_0x37329b=_0x51d95c(0x1dd)+_0x19c2cf+_0x51d95c(0x321)+_0x329b04+'.\x20ZUSATZ:\x20'+_0x1c12eb+'\x20'+_0x3a44db+_0x51d95c(0x2ad)+_0x3b4241+_0x51d95c(0x27a)+JSON[_0x51d95c(0x21a)](_0x1d783b[_0x51d95c(0x29b)](0x0,0xa))+'.\x20OUTPUT:\x20Nur\x20Text.';try{const _0x52f38e=await _0x1de600[_0x51d95c(0x272)][_0x51d95c(0x1ba)](_0x37329b),_0x32af0e='üåÖ\x20Daily\x20Briefing:\x0a'+_0x52f38e[_0x51d95c(0x270)][_0x51d95c(0x1c9)]()[_0x51d95c(0x311)]();sendNotification(_0x1de600,_0x32af0e),_0x1de600[_0x51d95c(0x233)][_0x51d95c(0x235)](_0x51d95c(0x24d));}catch(_0x4781ce){_0x1de600[_0x51d95c(0x233)][_0x51d95c(0x1eb)]('Briefing\x20Error:\x20'+_0x4781ce['message']);}}async function scanForDevices(_0x2153bb,_0xe8bca2){const _0x13e190=a0_0x18de17;_0x2153bb[_0x13e190(0x233)][_0x13e190(0x235)](_0x13e190(0x25a));const _0x107287=[],_0x3f673e=await _0x2153bb[_0x13e190(0x19c)]('*'),_0x3ed9d4=await _0x2153bb[_0x13e190(0x19c)](_0x13e190(0x1f6),_0x13e190(0x1d0)),_0x5ac675=await _0x2153bb['getForeignObjectsAsync'](_0x13e190(0x2c5),_0x13e190(0x1d0)),_0x240311={};if(_0x3ed9d4)for(const _0x1254e2 in _0x3ed9d4){const _0x3f2f54=_0x3ed9d4[_0x1254e2][_0x13e190(0x1d1)][_0x13e190(0x324)]||[];_0x3f2f54[_0x13e190(0x2a4)](_0x2079bc=>{const _0x51b428=_0x13e190;if(!_0x240311[_0x2079bc])_0x240311[_0x2079bc]=[];_0x240311[_0x2079bc][_0x51b428(0x331)](_0x1254e2);});}const _0x5bd8ab={};if(_0x5ac675)for(const _0xe17370 in _0x5ac675){const _0x395bf6=_0x5ac675[_0xe17370][_0x13e190(0x1d1)][_0x13e190(0x324)]||[],_0x4f1d8b=typeof _0x5ac675[_0xe17370][_0x13e190(0x1d1)][_0x13e190(0x31d)]===_0x13e190(0x20e)?_0x5ac675[_0xe17370][_0x13e190(0x1d1)][_0x13e190(0x31d)]['de']:_0x5ac675[_0xe17370][_0x13e190(0x1d1)]['name'];_0x395bf6[_0x13e190(0x2a4)](_0x229f18=>_0x5bd8ab[_0x229f18]=_0x4f1d8b);}const _0x5c1ecc=_0xe8bca2[_0x13e190(0x29e)]||[],_0x3c5309=_0xe8bca2['motion']!==![],_0x13402b=_0xe8bca2[_0x13e190(0x288)]!==![],_0x4c25c0=_0xe8bca2[_0x13e190(0x19a)]!==![],_0x1185d4=_0xe8bca2[_0x13e190(0x268)]===!![],_0x1e31f7=_0xe8bca2['weather']===!![];for(const _0x5eab91 in _0x3f673e){const _0x150fe1=_0x3f673e[_0x5eab91];if(_0x150fe1['type']!==_0x13e190(0x277)||!_0x150fe1[_0x13e190(0x1d1)])continue;if(ADAPTER_BLACKLIST[_0x13e190(0x2ec)](_0x193fba=>_0x5eab91['startsWith'](_0x193fba))&&!_0x1e31f7)continue;const _0x5c14b0=(_0x150fe1[_0x13e190(0x1d1)][_0x13e190(0x203)]||'')[_0x13e190(0x23a)]();let _0x5b239e=(typeof _0x150fe1[_0x13e190(0x1d1)][_0x13e190(0x31d)]===_0x13e190(0x20e)?_0x150fe1[_0x13e190(0x1d1)][_0x13e190(0x31d)]['de']:_0x150fe1[_0x13e190(0x1d1)][_0x13e190(0x31d)])||_0x5eab91;const _0x465ee3=_0x5b239e[_0x13e190(0x23a)]();let _0x150187=![],_0x1053eb=![];if(_0x5c1ecc[_0x13e190(0x2b6)]>0x0){const _0x30c636=_0x240311[_0x5eab91]||[],_0x57b1ec=_0x5eab91[_0x13e190(0x2ab)]('.')['slice'](0x0,-0x1)[_0x13e190(0x31f)]('.'),_0x13967d=_0x240311[_0x57b1ec]||[];(_0x30c636[_0x13e190(0x2ec)](_0x48eff4=>_0x5c1ecc[_0x13e190(0x195)](_0x48eff4))||_0x13967d['some'](_0x48e607=>_0x5c1ecc[_0x13e190(0x195)](_0x48e607)))&&(_0x150187=!![],_0x1053eb=!![]);}if(!_0x150187&&!_0x1e31f7){if(HARD_IGNORE_TERMS[_0x13e190(0x2ec)](_0x17b5fe=>_0x5eab91[_0x13e190(0x195)](_0x17b5fe)||_0x465ee3['includes'](_0x17b5fe[_0x13e190(0x23a)]())))continue;}if(BAD_NAMES['some'](_0x2b9d72=>_0x465ee3===_0x2b9d72||_0x465ee3[_0x13e190(0x334)]('.'+_0x2b9d72))){const _0x5969f7=_0x5eab91[_0x13e190(0x2ab)]('.');if(_0x5969f7['length']>0x2){const _0x469f02=_0x5969f7[_0x13e190(0x29b)](0x0,-0x1)[_0x13e190(0x31f)]('.'),_0x10dd76=_0x3f673e[_0x469f02];if(_0x10dd76&&_0x10dd76['common']&&_0x10dd76[_0x13e190(0x1d1)][_0x13e190(0x31d)]){const _0x15a0af=typeof _0x10dd76['common'][_0x13e190(0x31d)]===_0x13e190(0x20e)?_0x10dd76[_0x13e190(0x1d1)]['name']['de']:_0x10dd76['common']['name'];_0x15a0af&&!_0x5b239e[_0x13e190(0x195)](_0x15a0af)&&(_0x5b239e=_0x15a0af+'\x20'+_0x5b239e);}}}let _0x19d56b='';if(_0x3c5309&&(_0x5c14b0[_0x13e190(0x195)](_0x13e190(0x2af))||_0x5c14b0['includes'](_0x13e190(0x1d3))||_0x465ee3['includes'](_0x13e190(0x310))||_0x465ee3['includes']('pr√§senz')))_0x19d56b='motion';else{if(!_0x19d56b&&_0x13402b&&(_0x5c14b0['includes'](_0x13e190(0x257))||_0x5c14b0['includes'](_0x13e190(0x1a1))||_0x5c14b0[_0x13e190(0x195)](_0x13e190(0x1df))||_0x5c14b0['includes'](_0x13e190(0x1bd))||_0x5c14b0['includes'](_0x13e190(0x302))||_0x465ee3[_0x13e190(0x195)]('fenster')||_0x465ee3[_0x13e190(0x195)]('t√ºr')||_0x465ee3[_0x13e190(0x195)](_0x13e190(0x339))))_0x19d56b=_0x13e190(0x257);else{if(!_0x19d56b&&_0x4c25c0&&(_0x5c14b0[_0x13e190(0x195)](_0x13e190(0x26f))||_0x5c14b0[_0x13e190(0x195)]('switch')||_0x5c14b0[_0x13e190(0x195)](_0x13e190(0x1f7))||_0x465ee3[_0x13e190(0x195)](_0x13e190(0x294))||_0x465ee3[_0x13e190(0x195)](_0x13e190(0x1a3))||_0x465ee3[_0x13e190(0x195)](_0x13e190(0x2bf)))){if(_0x150fe1[_0x13e190(0x1d1)][_0x13e190(0x322)]||_0x5c14b0['includes'](_0x13e190(0x20f)))_0x19d56b=_0x13e190(0x26f);}else{if(!_0x19d56b&&_0x1185d4&&(_0x5c14b0['includes'](_0x13e190(0x268))||_0x5c14b0[_0x13e190(0x195)](_0x13e190(0x237))||_0x5c14b0['includes'](_0x13e190(0x216))||_0x465ee3[_0x13e190(0x195)](_0x13e190(0x336))||_0x465ee3[_0x13e190(0x195)](_0x13e190(0x210))||_0x465ee3[_0x13e190(0x195)](_0x13e190(0x253))))_0x19d56b='temperature';else{if(!_0x19d56b&&_0x1053eb)_0x19d56b=_0x13e190(0x28a);}}}}if(_0x19d56b){let _0x1f8ca2=_0x5bd8ab[_0x5eab91]||'';if(!_0x1f8ca2){let _0x3d3076=_0x5eab91;for(let _0x38f13f=0x0;_0x38f13f<0x3;_0x38f13f++){const _0x2ff696=_0x3d3076['lastIndexOf']('.');if(_0x2ff696===-0x1)break;_0x3d3076=_0x3d3076[_0x13e190(0x2e6)](0x0,_0x2ff696);if(_0x5bd8ab[_0x3d3076]){_0x1f8ca2=_0x5bd8ab[_0x3d3076];break;}}}_0x107287['push']({'id':_0x5eab91,'name':_0x5b239e,'location':_0x1f8ca2,'type':_0x19d56b,'logDuplicates':_0x19d56b===_0x13e190(0x2af),'isExit':![],'_score':_0x1f8ca2?0x50:_0x19d56b===_0x13e190(0x28a)?0x5a:0x28});}}return _0x107287['sort']((_0x296762,_0x20752b)=>_0x20752b['_score']-_0x296762['_score']),_0x107287;}async function executeAutomationAction(_0x12e018){const _0xf35872=a0_0x18de17;try{const _0xb1366c=await _0x12e018['getStateAsync']('analysis.automation.targetId'),_0x38d1ff=await _0x12e018[_0xf35872(0x289)](_0xf35872(0x1b7));if(_0xb1366c&&_0xb1366c['val']&&_0x38d1ff){const _0x34396d=_0xb1366c['val'];let _0x45fc4b=_0x38d1ff[_0xf35872(0x2a9)];try{_0x45fc4b=JSON[_0xf35872(0x1ad)](_0x45fc4b);}catch(_0xf74af9){}_0x12e018[_0xf35872(0x233)][_0xf35872(0x235)](_0xf35872(0x325)+_0x34396d+_0xf35872(0x284)+_0x45fc4b),await _0x12e018[_0xf35872(0x1e4)](_0x34396d,_0x45fc4b);}else _0x12e018[_0xf35872(0x233)]['warn'](_0xf35872(0x1d6));}catch(_0x5c0aa9){_0x12e018[_0xf35872(0x233)][_0xf35872(0x1eb)](_0xf35872(0x1fa)+_0x5c0aa9[_0xf35872(0x2c6)]);}}function tryParse(_0x571f3e){try{return JSON['parse'](_0x571f3e);}catch(_0x145d88){return null;}}async function processSensorEvent(_0x55262b,_0x249723,_0x39c865,_0x1387ce){const _0x1ce512=a0_0x18de17;if(!_0x1387ce)return;const _0x5d51fd=_0x39c865[_0x1ce512(0x2a9)],_0x9ec21b=Date[_0x1ce512(0x232)]();_0x55262b[_0x1ce512(0x233)]['debug'](_0x1ce512(0x214)+_0x249723+_0x1ce512(0x284)+_0x5d51fd),_0x55262b[_0x1ce512(0x1b0)][_0x249723]=_0x5d51fd;if(!_0x1387ce[_0x1ce512(0x26d)]&&_0x55262b[_0x1ce512(0x21d)]&&_0x55262b[_0x1ce512(0x21d)]['length']>0x0){const _0x13004d=_0x55262b[_0x1ce512(0x21d)][0x0];if(_0x13004d['id']===_0x249723&&_0x13004d[_0x1ce512(0x227)]===_0x5d51fd&&_0x9ec21b-_0x13004d[_0x1ce512(0x1b9)]<0x7d0)return;}const _0xa6444e={'timestamp':_0x9ec21b,'id':_0x249723,'name':_0x1387ce['name'],'type':_0x1387ce[_0x1ce512(0x32b)],'location':_0x1387ce[_0x1ce512(0x28f)],'value':_0x5d51fd};_0x55262b[_0x1ce512(0x21d)][_0x1ce512(0x2be)](_0xa6444e);if(_0x55262b[_0x1ce512(0x21d)][_0x1ce512(0x2b6)]>HISTORY_MAX_SIZE)_0x55262b[_0x1ce512(0x21d)]['pop']();await _0x55262b[_0x1ce512(0x1f5)](_0x1ce512(0x2f1),{'val':JSON['stringify'](_0xa6444e),'ack':!![]}),await _0x55262b[_0x1ce512(0x1f5)](_0x1ce512(0x32a),{'val':JSON[_0x1ce512(0x21a)](_0x55262b[_0x1ce512(0x21d)]),'ack':!![]});_0x55262b['isProVersion']&&(_0x55262b[_0x1ce512(0x264)][_0x1ce512(0x331)](_0xa6444e),await saveRawEventLog(_0x55262b));if(_0x1387ce[_0x1ce512(0x250)]&&_0x5d51fd===!![]){if(_0x55262b[_0x1ce512(0x30b)]&&!_0x55262b[_0x1ce512(0x285)])_0x55262b[_0x1ce512(0x233)][_0x1ce512(0x235)](_0x1ce512(0x2f2)+_0x1387ce[_0x1ce512(0x31d)]+').\x20Starting\x20Timer.'),startExitTimer(_0x55262b);else!_0x55262b[_0x1ce512(0x30b)]&&(_0x55262b[_0x1ce512(0x233)][_0x1ce512(0x235)]('Entry\x20detected\x20via\x20'+_0x1387ce[_0x1ce512(0x31d)]+_0x1ce512(0x189)),await setPresence(_0x55262b,!![]));}else _0x1387ce[_0x1ce512(0x32b)]===_0x1ce512(0x2af)&&_0x5d51fd===!![]&&(_0x55262b[_0x1ce512(0x194)]&&(_0x55262b[_0x1ce512(0x233)][_0x1ce512(0x235)]('Motion\x20detected\x20inside.\x20Aborting\x20Exit\x20Timer.'),abortExitTimer(_0x55262b)),!_0x55262b[_0x1ce512(0x30b)]&&_0x55262b[_0x1ce512(0x24c)]===SYSTEM_MODES[_0x1ce512(0x2f0)]&&await setPresence(_0x55262b,!![]));}function a0_0x35ef(_0x25a6f9,_0x417577){const _0x479b0e=a0_0x3c23();return a0_0x35ef=function(_0x2011f8,_0x358a90){_0x2011f8=_0x2011f8-0x188;let _0x3c233f=_0x479b0e[_0x2011f8];return _0x3c233f;},a0_0x35ef(_0x25a6f9,_0x417577);}async function runGeminiAnalysis(_0x2c5e29,_0x913899=''){const _0x224f8b=a0_0x18de17;if(!_0x2c5e29[_0x224f8b(0x272)])return;if(_0x2c5e29['eventHistory']['length']===0x0)return;const _0xdcebab=_0x2c5e29[_0x224f8b(0x21d)][_0x224f8b(0x29b)](0x0,0xf),_0x11246f=await getWeatherContext(_0x2c5e29),_0x23fc83=_0x2c5e29[_0x224f8b(0x24c)],_0x5dfa1b=PERSONA_MAPPING[_0x2c5e29[_0x224f8b(0x188)]['aiPersona']||'generic'],_0x4b88c5=_0x2c5e29[_0x224f8b(0x188)]['livingContext']||_0x224f8b(0x1d8);let _0x2dd0e3=![];try{const _0x15647e=await _0x2c5e29['getStateAsync']('analysis.automation.autoApply');if(_0x15647e&&_0x15647e[_0x224f8b(0x2a9)])_0x2dd0e3=!![];}catch(_0xb88b62){}const _0x18fbd9=_0x224f8b(0x1f9)+_0x5dfa1b+'.\x0a\x20\x20\x20\x20KONTEXT:\x20'+_0x4b88c5+_0x224f8b(0x274)+_0x23fc83+_0x224f8b(0x193)+_0x11246f+_0x224f8b(0x2c2)+(_0x913899||'Keiner')+_0x224f8b(0x33e)+JSON[_0x224f8b(0x21a)](_0xdcebab)+_0x224f8b(0x2d8);try{const _0x581cd4=await _0x2c5e29['geminiModel'][_0x224f8b(0x1ba)](_0x18fbd9),_0x1088d1=_0x581cd4[_0x224f8b(0x270)][_0x224f8b(0x1c9)]()['replace'](/```json|```/g,'')[_0x224f8b(0x311)](),_0x30b62b=JSON[_0x224f8b(0x1ad)](_0x1088d1);await _0x2c5e29[_0x224f8b(0x1f5)]('analysis.lastResult',{'val':JSON[_0x224f8b(0x21a)](_0x30b62b),'ack':!![]});const _0x19320a=_0x30b62b[_0x224f8b(0x335)]||![];_0x19320a!==_0x2c5e29[_0x224f8b(0x305)]&&(await _0x2c5e29[_0x224f8b(0x1f5)]('analysis.isAlert',{'val':_0x19320a,'ack':!![]}),_0x2c5e29[_0x224f8b(0x305)]=_0x19320a,_0x19320a&&(await _0x2c5e29[_0x224f8b(0x1f5)](_0x224f8b(0x1a9),{'val':_0x30b62b[_0x224f8b(0x2a2)],'ack':!![]}),sendNotification(_0x2c5e29,_0x224f8b(0x208)+_0x30b62b[_0x224f8b(0x2a2)],![],_0x30b62b[_0x224f8b(0x297)]))),_0x30b62b['automationProposal']&&_0x30b62b[_0x224f8b(0x1e3)][_0x224f8b(0x292)]&&_0x30b62b[_0x224f8b(0x1e3)][_0x224f8b(0x1bb)]&&(_0x2c5e29['log'][_0x224f8b(0x235)](_0x224f8b(0x26e)+_0x30b62b[_0x224f8b(0x1e3)][_0x224f8b(0x266)]),await _0x2c5e29[_0x224f8b(0x1f5)](_0x224f8b(0x267),{'val':!![],'ack':!![]}),await _0x2c5e29['setStateAsync'](_0x224f8b(0x1cb),{'val':_0x30b62b[_0x224f8b(0x1e3)][_0x224f8b(0x266)],'ack':!![]}),await _0x2c5e29['setStateAsync']('analysis.automation.targetId',{'val':_0x30b62b[_0x224f8b(0x1e3)][_0x224f8b(0x1bb)],'ack':!![]}),await _0x2c5e29['setStateAsync'](_0x224f8b(0x1b7),{'val':JSON['stringify'](_0x30b62b[_0x224f8b(0x1e3)][_0x224f8b(0x333)]),'ack':!![]}),_0x2dd0e3&&(_0x2c5e29['log']['info']('ü§ñ\x20BUTLER\x20AUTO-APPLY:\x20Executing\x20'+_0x30b62b[_0x224f8b(0x1e3)][_0x224f8b(0x1bb)]+_0x224f8b(0x22e)),await executeAutomationAction(_0x2c5e29)));}catch(_0x129aba){_0x2c5e29['log'][_0x224f8b(0x1eb)]('Gemini\x20Analysis\x20Error:\x20'+_0x129aba[_0x224f8b(0x2c6)]);}}class CogniLiving extends utils[a0_0x18de17(0x1c7)]{constructor(_0x3e890b){const _0xed76be=a0_0x18de17;super({..._0x3e890b,'name':'cogni-living'}),this[_0xed76be(0x21d)]=[],this['analysisHistory']=[],this['feedbackHistory']=[],this[_0xed76be(0x264)]=[],this[_0xed76be(0x320)]=[],this[_0xed76be(0x1b0)]={},this[_0xed76be(0x259)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0xed76be(0x30b)]=!![],this[_0xed76be(0x194)]=null,this[_0xed76be(0x191)]=null,this['isGracePeriodActive']=![],this[_0xed76be(0x22c)]=null,this['geminiModel']=null,this[_0xed76be(0x24c)]=SYSTEM_MODES['NORMAL'],this['isProVersion']=![],this['lastAlertState']=![],this[_0xed76be(0x20c)]=_0xed76be(0x340),this['analysisTimer']=null,this[_0xed76be(0x221)]=null,this['modeResetJob']=null,this['driftAnalysisTimer']=null,this[_0xed76be(0x1cd)]=null,this['on'](_0xed76be(0x28e),this['onReady'][_0xed76be(0x2aa)](this)),this['on'](_0xed76be(0x29d),this[_0xed76be(0x25e)][_0xed76be(0x2aa)](this)),this['on'](_0xed76be(0x317),this['onUnload'][_0xed76be(0x2aa)](this)),this['on'](_0xed76be(0x2c6),this['onMessage']['bind'](this));}async['onReady'](){const _0x16f90b=a0_0x18de17;this[_0x16f90b(0x233)][_0x16f90b(0x235)](_0x16f90b(0x2b2)+this[_0x16f90b(0x23e)]+_0x16f90b(0x1f1)),await initZombies(this),this[_0x16f90b(0x188)][_0x16f90b(0x26b)]=this[_0x16f90b(0x188)][_0x16f90b(0x26b)]||'';try{this[_0x16f90b(0x1a8)]=await checkLicense(this,this[_0x16f90b(0x188)]['licenseKey']);}catch(_0x8715b8){}if(!this[_0x16f90b(0x188)][_0x16f90b(0x275)]||this['config'][_0x16f90b(0x275)]<0.1)this['config'][_0x16f90b(0x275)]=0xc;await initHistory(this),await initSystemConfig(this);if(this['config'][_0x16f90b(0x1ce)])try{this['genAI']=new GoogleGenerativeAI(this[_0x16f90b(0x188)][_0x16f90b(0x1ce)]),this[_0x16f90b(0x272)]=this[_0x16f90b(0x22c)][_0x16f90b(0x2f8)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':'application/json'}}),this[_0x16f90b(0x233)]['info']('Gemini\x20AI\x20initialized.');}catch(_0x584d96){this['log']['error']('Gemini\x20Init\x20Error:\x20'+_0x584d96['message']);}await createAllObjects(this),await loadSystemMode(this),await loadRawEventLog(this),await loadDailyDigests(this),this['subscribeStates'](_0x16f90b(0x246)),this[_0x16f90b(0x236)](LTM_DP_TRIGGER_DIGEST),this[_0x16f90b(0x236)](_0x16f90b(0x21e)),this[_0x16f90b(0x236)](_0x16f90b(0x24e)),this[_0x16f90b(0x236)]('analysis.automation.triggerAction'),this[_0x16f90b(0x236)](_0x16f90b(0x23f)),await initSensorSubscriptions(this),await initPresenceSubscriptions(this),await setupTelegramListener(this),setTimeout(()=>checkWifiPresence(this),0x1388);if(this[_0x16f90b(0x190)])clearInterval(this[_0x16f90b(0x190)]);const _0x2fddc6=this[_0x16f90b(0x188)][_0x16f90b(0x1fc)]||0xf;_0x2fddc6>0x0&&(this[_0x16f90b(0x233)][_0x16f90b(0x235)](_0x16f90b(0x282)+_0x2fddc6+'\x20min).'),this[_0x16f90b(0x190)]=setInterval(()=>{runAutopilot(this);},_0x2fddc6*0x3c*0x3e8)),setupLtmScheduler(this),setupModeResetScheduler(this),setupDriftAnalysisScheduler(this),setupBriefingScheduler(this);}['onUnload'](_0x52f2ec){const _0x31823e=a0_0x18de17;if(this[_0x31823e(0x190)])clearInterval(this[_0x31823e(0x190)]);if(this[_0x31823e(0x2e2)])clearInterval(this[_0x31823e(0x2e2)]);if(this[_0x31823e(0x221)])this[_0x31823e(0x221)][_0x31823e(0x2a3)]();if(this[_0x31823e(0x1c6)])this[_0x31823e(0x1c6)][_0x31823e(0x2a3)]();if(this[_0x31823e(0x1cd)])this['briefingJob']['cancel']();if(this['exitTimer'])clearTimeout(this[_0x31823e(0x194)]);if(this[_0x31823e(0x191)])clearTimeout(this[_0x31823e(0x191)]);_0x52f2ec();}async[a0_0x18de17(0x25e)](_0x92837a,_0x14c62b){const _0x3e18d3=a0_0x18de17;if(!_0x14c62b)return;if(_0x92837a[_0x3e18d3(0x195)](_0x3e18d3(0x307))&&_0x92837a['endsWith'](_0x3e18d3(0x296))&&_0x14c62b['val']){await handleTelegramResponse(this,_0x14c62b[_0x3e18d3(0x2a9)]);return;}if(_0x92837a===this[_0x3e18d3(0x247)]+'.'+SYSTEM_DP_MODE){_0x14c62b['val']&&Object[_0x3e18d3(0x239)](SYSTEM_MODES)[_0x3e18d3(0x195)](_0x14c62b[_0x3e18d3(0x2a9)])&&(this['currentSystemMode']=_0x14c62b['val'],_0x14c62b['val']===SYSTEM_MODES['VACATION']?await setPresence(this,![]):await setPresence(this,!![]));if(!_0x14c62b[_0x3e18d3(0x1ab)])this[_0x3e18d3(0x1fe)](_0x92837a,{'val':this[_0x3e18d3(0x24c)],'ack':!![]});return;}if(!_0x14c62b['ack']){_0x92837a[_0x3e18d3(0x195)]('analysis.trigger')&&_0x14c62b['val']&&(this[_0x3e18d3(0x1fe)](_0x92837a,{'val':![],'ack':!![]}),runGeminiAnalysis(this));if(_0x92837a[_0x3e18d3(0x195)](_0x3e18d3(0x280))&&_0x14c62b[_0x3e18d3(0x2a9)]){this[_0x3e18d3(0x1fe)](_0x92837a,{'val':![],'ack':!![]});if(this['isProVersion'])createDailyDigest(this);}_0x92837a[_0x3e18d3(0x195)](_0x3e18d3(0x219))&&_0x14c62b[_0x3e18d3(0x2a9)]&&(this['setState'](_0x92837a,{'val':![],'ack':!![]}),sendMorningBriefing(this));_0x92837a[_0x3e18d3(0x195)]('automation.triggerAction')&&_0x14c62b[_0x3e18d3(0x2a9)]&&(this[_0x3e18d3(0x1fe)](_0x92837a,{'val':![],'ack':!![]}),executeAutomationAction(this));return;}if(this[_0x3e18d3(0x188)][_0x3e18d3(0x33f)]&&this['config'][_0x3e18d3(0x33f)][_0x3e18d3(0x195)](_0x92837a)){await checkWifiPresence(this);return;}const _0x5ca592=(this[_0x3e18d3(0x188)][_0x3e18d3(0x248)]||[])[_0x3e18d3(0x2d6)](_0xc34543=>_0xc34543['id']===_0x92837a);if(_0x5ca592)processSensorEvent(this,_0x92837a,_0x14c62b,_0x5ca592);}async['onMessage'](_0x35692f){const _0x1902ae=a0_0x18de17;if(typeof _0x35692f==='object'&&_0x35692f[_0x1902ae(0x2c6)])try{if(_0x35692f[_0x1902ae(0x2df)]===_0x1902ae(0x24a)){}else{if(_0x35692f['command']==='testNotification'){}else{if(_0x35692f[_0x1902ae(0x2df)]==='getLtmData'){if(!this[_0x1902ae(0x1a8)])return this[_0x1902ae(0x327)](_0x35692f[_0x1902ae(0x1b4)],_0x35692f['command'],{'success':![],'isPro':![]},_0x35692f[_0x1902ae(0x2d2)]);let _0x4a61d7={'status':_0x1902ae(0x22d),'details':'','lastCheck':0x0};try{_0x4a61d7[_0x1902ae(0x2fb)]=(await this[_0x1902ae(0x289)](LTM_DP_DRIFT_STATUS))[_0x1902ae(0x2a9)],_0x4a61d7[_0x1902ae(0x1ef)]=(await this[_0x1902ae(0x289)](LTM_DP_DRIFT_DETAILS))[_0x1902ae(0x2a9)],_0x4a61d7['lastCheck']=(await this[_0x1902ae(0x289)](LTM_DP_DRIFT_LAST_CHECK))['val'];}catch(_0x14e1d1){}const _0x2fe23d=this[_0x1902ae(0x1e2)]||[];this['sendTo'](_0x35692f[_0x1902ae(0x1b4)],_0x35692f[_0x1902ae(0x2df)],{'success':!![],'isPro':!![],'dailyDigests':this[_0x1902ae(0x320)],'driftAnalysis':_0x4a61d7,'analysisHistory':_0x2fe23d},_0x35692f[_0x1902ae(0x2d2)]);}else{if(_0x35692f[_0x1902ae(0x2df)]===_0x1902ae(0x2c7)){const _0xbc2c4=this[_0x1902ae(0x320)][_0x1902ae(0x2b6)],_0x11d374=new Date(),_0x32e24b=new Date(_0x11d374['getFullYear'](),_0x11d374['getMonth'](),_0x11d374['getDate']())[_0x1902ae(0x2a1)](),_0x19b73e=this['rawEventLog'][_0x1902ae(0x318)](_0x182a68=>new Date(_0x182a68[_0x1902ae(0x1b9)])[_0x1902ae(0x2a1)]()>_0x32e24b)[_0x1902ae(0x2b6)],_0x5cbda4=new Array(0x18)[_0x1902ae(0x328)](0x0);this[_0x1902ae(0x264)][_0x1902ae(0x2a4)](_0x177bf2=>{const _0x855591=_0x1902ae,_0x399cd3=new Date(_0x177bf2['timestamp']);if(_0x399cd3[_0x855591(0x2a1)]()>_0x32e24b)_0x5cbda4[_0x399cd3['getHours']()]++;});let _0x4525a9={'status':_0x1902ae(0x22d)};try{_0x4525a9[_0x1902ae(0x2fb)]=(await this['getStateAsync'](LTM_DP_DRIFT_STATUS))[_0x1902ae(0x2a9)];}catch(_0x1f916a){}let _0x269741='';try{const _0x344508=await this[_0x1902ae(0x289)](_0x1902ae(0x23b));_0x269741=_0x344508?_0x344508[_0x1902ae(0x2a9)]:'';}catch(_0x5c7c35){}let _0x4439dc=null;!this[_0x1902ae(0x272)]&&(_0x4439dc=this[_0x1902ae(0x188)][_0x1902ae(0x1ce)]?_0x1902ae(0x28d):_0x1902ae(0x1e1));let _0x38dd19={'detected':![],'description':'','targetId':'','targetValue':'','autoApply':![]};try{const _0x2730fe=await this['getStateAsync'](_0x1902ae(0x267)),_0x22d081=await this[_0x1902ae(0x289)](_0x1902ae(0x1cb)),_0x58aa98=await this['getStateAsync'](_0x1902ae(0x2a0)),_0x2bd061=await this[_0x1902ae(0x289)](_0x1902ae(0x1b7)),_0x10e255=await this[_0x1902ae(0x289)]('analysis.automation.autoApply');_0x2730fe&&_0x2730fe['val']&&(_0x38dd19['detected']=!![],_0x38dd19[_0x1902ae(0x266)]=_0x22d081?_0x22d081[_0x1902ae(0x2a9)]:'',_0x38dd19[_0x1902ae(0x1bb)]=_0x58aa98?_0x58aa98[_0x1902ae(0x2a9)]:'',_0x38dd19['targetValue']=_0x2bd061?_0x2bd061[_0x1902ae(0x2a9)]:''),_0x38dd19[_0x1902ae(0x2ac)]=_0x10e255?!!_0x10e255['val']:![];}catch(_0x506378){}this['sendTo'](_0x35692f[_0x1902ae(0x1b4)],_0x35692f[_0x1902ae(0x2df)],{'success':!![],'eventHistory':this[_0x1902ae(0x21d)][_0x1902ae(0x29b)](0x0,0xf),'stats':{'digestCount':_0xbc2c4,'eventCountToday':_0x19b73e,'hourlyActivity':_0x5cbda4,'driftStatus':_0x4525a9[_0x1902ae(0x2fb)],'isPresent':this[_0x1902ae(0x30b)],'presenceWho':_0x269741,'minDays':this[_0x1902ae(0x188)]['minDaysForBaseline']||0x7,'stbDays':this[_0x1902ae(0x188)][_0x1902ae(0x2cc)]||0xe,'ltbDays':this[_0x1902ae(0x188)][_0x1902ae(0x19f)]||0x3c,'systemError':_0x4439dc},'automation':_0x38dd19},_0x35692f[_0x1902ae(0x2d2)]);}else{if(_0x35692f[_0x1902ae(0x2df)]===_0x1902ae(0x196)){const _0x4eca20=await this[_0x1902ae(0x19c)](_0x1902ae(0x1f6),_0x1902ae(0x1d0)),_0x43a7fb=[];if(_0x4eca20)for(const _0x42603c in _0x4eca20){const _0x3335e0=_0x4eca20[_0x42603c],_0x3d812a=(_0x3335e0['common']&&typeof _0x3335e0[_0x1902ae(0x1d1)][_0x1902ae(0x31d)]==='object'?_0x3335e0['common'][_0x1902ae(0x31d)]['de']:_0x3335e0['common']['name'])||_0x3335e0['common'][_0x1902ae(0x31d)];_0x43a7fb['push']({'id':_0x42603c,'name':_0x3d812a});}this[_0x1902ae(0x327)](_0x35692f[_0x1902ae(0x1b4)],_0x35692f[_0x1902ae(0x2df)],{'success':!![],'enums':_0x43a7fb},_0x35692f[_0x1902ae(0x2d2)]);}else{if(_0x35692f[_0x1902ae(0x2df)]===_0x1902ae(0x2ff))try{const _0x122ee2=await scanForDevices(this,_0x35692f[_0x1902ae(0x2c6)]||{});this['sendTo'](_0x35692f[_0x1902ae(0x1b4)],_0x35692f[_0x1902ae(0x2df)],{'success':!![],'devices':_0x122ee2},_0x35692f[_0x1902ae(0x2d2)]);}catch(_0x14eaf9){this[_0x1902ae(0x327)](_0x35692f[_0x1902ae(0x1b4)],_0x35692f[_0x1902ae(0x2df)],{'success':![],'error':_0x14eaf9[_0x1902ae(0x2c6)]},_0x35692f['callback']);}else{if(_0x35692f[_0x1902ae(0x2df)]===_0x1902ae(0x276)){const _0x398d7e=_0x35692f[_0x1902ae(0x2c6)][_0x1902ae(0x28b)];if(!_0x398d7e)return this[_0x1902ae(0x327)](_0x35692f[_0x1902ae(0x1b4)],_0x35692f[_0x1902ae(0x2df)],{'success':![],'error':'No\x20instance'},_0x35692f[_0x1902ae(0x2d2)]);const _0x87adf4=await getCalendarNames(this,_0x398d7e);this[_0x1902ae(0x327)](_0x35692f[_0x1902ae(0x1b4)],_0x35692f['command'],{'success':!![],'names':_0x87adf4},_0x35692f[_0x1902ae(0x2d2)]);}else{if(_0x35692f['command']===_0x1902ae(0x2cf)){const {targetId:_0x56cfb8,targetValue:_0x4ee97b}=_0x35692f[_0x1902ae(0x2c6)];this['log'][_0x1902ae(0x235)](_0x1902ae(0x287)+_0x56cfb8+_0x1902ae(0x284)+_0x4ee97b),await this[_0x1902ae(0x1f5)]('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),await this[_0x1902ae(0x1f5)](_0x1902ae(0x1cb),{'val':_0x1902ae(0x1ff)+_0x56cfb8,'ack':!![]}),await this[_0x1902ae(0x1f5)](_0x1902ae(0x2a0),{'val':_0x56cfb8,'ack':!![]}),await this['setStateAsync'](_0x1902ae(0x1b7),{'val':_0x4ee97b,'ack':!![]}),this[_0x1902ae(0x327)](_0x35692f['from'],_0x35692f[_0x1902ae(0x2df)],{'success':!![]},_0x35692f[_0x1902ae(0x2d2)]);}else{if(_0x35692f[_0x1902ae(0x2df)]==='submitFeedback'){const {historyId:_0x4dd7d9,rating:_0x1a3796,comment:_0x2e847d,alertReason:_0x3ca523}=_0x35692f[_0x1902ae(0x2c6)];_0x4dd7d9&&_0x1a3796?(await saveFeedback(this,{'timestamp':Date['now'](),'historyId':_0x4dd7d9,'rating':_0x1a3796,'comment':_0x2e847d,'alertReason':_0x3ca523}),this[_0x1902ae(0x327)](_0x35692f['from'],_0x35692f[_0x1902ae(0x2df)],{'success':!![]},_0x35692f[_0x1902ae(0x2d2)])):this[_0x1902ae(0x327)](_0x35692f[_0x1902ae(0x1b4)],_0x35692f[_0x1902ae(0x2df)],{'success':![],'error':_0x1902ae(0x1f3)},_0x35692f[_0x1902ae(0x2d2)]);}else _0x35692f[_0x1902ae(0x2df)]==='dismissAutomation'&&(this[_0x1902ae(0x233)][_0x1902ae(0x235)](_0x1902ae(0x33c)),await this[_0x1902ae(0x1f5)](_0x1902ae(0x267),{'val':![],'ack':!![]}),await this[_0x1902ae(0x1f5)](_0x1902ae(0x1cb),{'val':'','ack':!![]}),this[_0x1902ae(0x327)](_0x35692f[_0x1902ae(0x1b4)],_0x35692f[_0x1902ae(0x2df)],{'success':!![]},_0x35692f['callback']));}}}}}}}}}catch(_0x1a431c){this[_0x1902ae(0x233)][_0x1902ae(0x1eb)](_0x1902ae(0x2eb)+_0x35692f[_0x1902ae(0x2df)]+':\x20'+_0x1a431c[_0x1902ae(0x2c6)]);if(_0x35692f[_0x1902ae(0x2d2)])this[_0x1902ae(0x327)](_0x35692f[_0x1902ae(0x1b4)],_0x35692f['command'],{'success':![],'error':_0x1a431c[_0x1902ae(0x2c6)]},_0x35692f[_0x1902ae(0x2d2)]);}}}if(require['main']!==module)module[a0_0x18de17(0x258)]=_0x87ffc=>new CogniLiving(_0x87ffc);else new CogniLiving();function a0_0x3c23(){const _0x270d50=['sensor','klima','pop','@google/generative-ai','Error\x20checking\x20WiFi:\x20','Event\x20received:\x20','switch','thermostat','GUEST','firmware','triggerBriefing','stringify','toFixed','weatherInstance','eventHistory','system.mode','Deaktiviert\x20(Pro-Feature)','Fokus\x20auf\x20Familienroutinen.','ltmJob','KALENDER:\x20','Automation\x20Proposals','json','COGNI_CONFIRM_OK','AI\x20Alert\x20Status','value','notifyEmailEnabled','activityLevel','icons-mfd.','üì°\x20Hooking\x20into\x20','genAI','N/A','...','warn','Trigger\x20Action\x20Now','maintenance','now','log','WETTER:\x20Keine\x20Daten\x20gefunden','info','subscribeStates','humidity','setObjectNotExistsAsync','values','toLowerCase','system.presenceWho','accuweather.0','energy','version','analysis.automation.autoApply','analysis.comfortSuggestion','TEST-PRO-KEY','system.config','Last\x20Check','health','6wPCpmX','analysis.trigger','namespace','devices','position','testApiKey','3169507TrbaSH','currentSystemMode','Morning\x20Briefing\x20sent.','analysis.triggerBriefing','üìû\x20User\x20requested\x20CALL\x20via\x20Telegram!','isExit','dutycycle','openweathermap.0','heizung','AI\x20Emergency\x20Status','‚úÖ\x20Alles\x20OK\x20(Reset)','Health\x20&\x20Sleep\x20Analysis','door','exports','systemConfig','Scanning\x20for\x20devices\x20(V8:\x20Whitelist\x20Priority)...','\x20hours.\x20Potential\x20incapacitation.','Health\x20Notes','openweathermap','onStateChange','baselineDrift','LTM.driftAnalysis.driftDetails','Gast','21969oAHOmb','.communicate.request','rawEventLog','time','description','analysis.automation.patternDetected','temperature','analysis.feedbackHistory','Auto\x20Apply\x20Rule','licenseKey','string','logDuplicates','ü§ñ\x20BUTLER\x20PROPOSAL:\x20','light','response','level','geminiModel','analysis.comfortSummary','.\x0a\x20\x20\x20\x20SYSTEM_MODE:\x20','inactivityThresholdHours','getCalendarNames','state','Target\x20ID','üìû\x20R√úCKRUF\x20BITTE!\x20Der\x20Bewohner\x20hat\x20den\x20R√ºckruf-Button\x20gedr√ºckt.','/100,\x20Aktivit√§t\x20seit\x2004:00:\x20','cover','daswetter.0','WETTER:\x20','subscribeForeignStatesAsync','analysis.isAlert','triggerDailyDigest','power','Starting\x20Autopilot\x20(','notifyTelegramRecipient','\x20=\x20','isGracePeriodActive','getObjectAsync','üß™\x20Simulating\x20Butler\x20Proposal:\x20','doors','getStateAsync','custom','instance','\x20Tage)','KI-Modell\x20nicht\x20initialisiert','ready','location','.Summary.Current','button','detected','sleepScore','licht','Skipped\x20(No\x20AI\x20or\x20Data)','communicate.request','isEmergency','rssi','system.','config_pending','slice','System\x20Status\x20&\x20Control','stateChange','selectedFunctionIds','Lernphase\x20(','analysis.automation.targetId','getTime','alertReason','cancel','forEach','analysis.health','analysis.automation.triggerAction','apply','Event\x20History','val','bind','split','autoApply','.\x20DATEN:\x20Schlaf\x20','639PfIvhC','motion','scheduleJob','guest','cogni-living\x20adapter\x20starting\x20(v','online','summary','toLocaleString','length','useCalendar','Started\x20at\x20','Fokus\x20auf\x20Komfort.','Error\x20reading\x20calendar\x20table:\x20','extendObjectAsync','targetposition','\x20for\x20interactive\x20buttons...','unshift','schalter','Target\x20Value','Baseline\x20Status','.\x0a\x20\x20\x20\x20NOTFALL-KONTEXT:\x20','Comfort\x20Summary','analysis.isEmergency','enum.rooms.*','message','getOverviewData','HARD\x20WATCHDOG:\x20No\x20sensor\x20activity\x20detected\x20for\x20','üìû\x20R√ºckruf\x20anfordern','fault','vis.','ltmStbWindowDays','vacation','.NextHours.Location_1.Day_1.current.symbol_desc','simulateButler','toISOString','60gRfWlF','callback','0\x204\x20*\x20*\x20*','analysis.automation.suggestedAction','System\x20Mode','find','native','\x0a\x0a\x20\x20\x20\x20AUFGABE:\x0a\x20\x20\x20\x201.\x20Analysiere\x20auf\x20Gesundheitsrisiken\x20(Sturz,\x20Inaktivit√§t).\x0a\x20\x20\x20\x202.\x20Analysiere\x20auf\x20Komfort/Automatisierung\x20(\x22Butler\x22).\x20Erkennst\x20du\x20ein\x20Muster?\x20(z.B.\x20\x22Wenn\x20Bewegung\x20Flur,\x20dann\x20Licht\x20an\x22).\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20FORMAT\x20(JSON\x20Only!):\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x22isAlert\x22:\x20boolean,\x0a\x20\x20\x20\x20\x20\x20\x22alertReason\x22:\x20\x22string\x20(kurz)\x22,\x0a\x20\x20\x20\x20\x20\x20\x22isEmergency\x22:\x20boolean,\x0a\x20\x20\x20\x20\x20\x20\x22summary\x22:\x20\x22string\x20(Was\x20passiert\x20gerade?)\x22,\x0a\x20\x20\x20\x20\x20\x20\x22automationProposal\x22:\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22detected\x22:\x20boolean,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22description\x22:\x20\x22string\x20(Was\x20soll\x20automatisiert\x20werden?)\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22targetId\x22:\x20\x22string\x20(ioBroker\x20ID,\x20z.B.\x200_userdata.0.light)\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22targetValue\x22:\x20\x22any\x20(Wert,\x20z.B.\x20true\x20oder\x2050)\x22\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20','boolean','notifyPushoverInstance','_calName','startsWith','Logbook','Alarm','command','getForeignStateAsync','brightness','driftAnalysisTimer','Who\x20is\x20present?','number','actual_temperature','substring','KALENDER:\x20Keine\x20relevanten\x20Termine','\x20events','Analysiere\x20ausgewogen.','PARTY','Error\x20in\x20onMessage\x20command\x20','some','analysis.health.notes','COGNI_REQUEST_CALL','sort','NORMAL','events.lastEvent','Exit\x20Sensor\x20triggered\x20(','latitude','system.isPresent','briefingTime','Raw\x20Log','echarts.','getGenerativeModel','Action','calendarInstance','status','.data.table','Trigger\x20Digest','catch','scanDevices','816Rrrjia','LTM.driftAnalysis.baselineDrift','shutter','scriptProblem','‚úÖ\x20Alarm\x20quittiert.\x20System\x20normal.','lastAlertState','indicator.alarm.fire','telegram','calendarSelection','sendToAsync','Trigger\x20Analysis','isPresent','\x20|\x20','42961884GUFEFP','simple-api.','Drift\x20Sched\x20Error:\x20','bewegung','trim','Last\x20raw\x20event','ical.0','KALENDER:\x20Keine\x20Kalender\x20ausgew√§hlt\x20(Bitte\x20in\x20Settings\x20konfigurieren)','Daily\x20Digests','08:00','unload','filter','valve','map','uuid','Wetter:\x20Deaktiviert','name','scriptEnabled','join','dailyDigests','.\x20KONTEXT:\x20','write','lowbat','members','ü§ñ\x20BUTLER:\x20Executing\x20Action\x20->\x20','isArray','sendTo','fill','Vom\x20Benutzer\x20best√§tigt\x20(OK).','events.history','type','reachable','analysis.deviationFromBaseline','replace','42766VmxfBJ','Party','push','Restlessness\x20Level','targetValue','endsWith','isAlert','temp','VACATION','history.','rollladen','material.','Processing\x20Status','User\x20dismissed\x20automation\x20proposal.','date','.\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20INPUT\x20DATEN\x20(Letzte\x20Events):\x0a\x20\x20\x20\x20','presenceDevices','unknown','config','.\x20Welcome\x20home.','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','LTM.driftAnalysis.lastCheck','minDaysForBaseline','5585695vvsXuR','notifyEmailInstance','Aktiv\x20(','analysisTimer','exitGraceTimer','Normal','.\x0a\x20\x20\x20\x20WETTER:\x20','exitTimer','includes','getEnums','\x0aSTB:\x20','analysis.lastResult','javascript.','lights','analysis.history_debug_00','getForeignObjectsAsync','Generating\x20Morning\x20Briefing...','Kalender:\x20Deaktiviert','ltmLtbWindowDays','LTM.triggerDailyDigest','window','Description','lampe','32372ieYGnG','models/gemini-flash-latest','LTM.driftAnalysis','notifyTelegramInstance','isProVersion','analysis.alertReason','analysis.health.restlessness','ack','Reset\x20Sched\x20Error:\x20','parse','generic','getCalendarNames\x20Error:\x20','sensorLastValues','LTM.dailyDigests','Sleep\x20Score\x20(0-100)','Sending\x20notification:\x20\x22','from','26cuGHNH','setpoint','analysis.automation.targetValue','(((.+)+)+)+$','timestamp','generateContent','targetId','briefingEnabled','blind','link_quality','\x20*\x20*\x20*','text.alarm','party','Subscribing\x20to\x20','getForeignObjectAsync','analysis.analysisHistory','Scheduling\x20Morning\x20Briefing\x20for\x20','modeResetJob','Adapter','weatherunderground.0','text','search','analysis.automation.description','update','briefingJob','geminiApiKey','Drift\x20Analysis','enum','common','0\x203\x20*\x20*\x20*','occupancy','uuid-not-found','N/A\x20(Learning)','ü§ñ\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','presence','Keine\x20Details.','system','KALENDER\x20ERROR:\x20','accuweather','Drift\x20Status','ROLLE:\x20F√ºrsorglicher\x20Assistent.\x20AUFGABE:\x20Schreibe\x20eine\x20kurze,\x20beruhigende\x20\x22Guten\x20Morgen\x22-Nachricht.\x20PERSONA:\x20','channel','lock','KALENDER:\x20Keine\x20Daten','Kein\x20API\x20Key!','analysisHistory','automationProposal','setForeignStateAsync','LTM.rawEventLog','admin.','event','indexOf','‚úÖ\x20User\x20confirmed\x20ALARM\x20via\x20Telegram.\x20Resetting\x20system.','WiFi\x20Presence\x20detected\x20->\x20Aborting\x20Exit\x20Timer.\x20User\x20is\x20present.','error','system.meta.uuid','connection','send','details','Error:\x20',')\x20-\x20FUNCTIONS\x20FIRST\x20ARCHITECTURE','inactivityMonitoringEnabled','Missing\x20data','info.','setStateAsync','enum.functions.*','dimmer','toString','\x0a\x20\x20\x20\x20ROLLE:\x20KI-Hausverwalter\x20&\x20Gesundheits-Assistent.\x0a\x20\x20\x20\x20PERSONA:\x20','BUTLER\x20Execution\x20Error:\x20','working','analysisInterval','ltmDriftCheckIntervalHours','setState','SIMULATION:\x20Test-Vorschlag\x20f√ºr\x20','off','Briefing\x20Sched\x20Error:\x20','notifyTelegramEnabled','role','Comfort\x20Suggestion','12829579gMWnPK','longitude','analysis.automation','‚ö†Ô∏è\x20ALARM:\x20','indicator','LTM','city','systemUUID','LTM.processingStatus','object'];a0_0x3c23=function(){return _0x270d50;};return a0_0x3c23();}