const a0_0x9df455=a0_0x54a3;(function(_0x150ed4,_0x11968d){const _0x1c3ad1=a0_0x54a3,_0x22b88d=_0x150ed4();while(!![]){try{const _0x174ea6=parseInt(_0x1c3ad1(0xd9))/0x1*(-parseInt(_0x1c3ad1(0x104))/0x2)+parseInt(_0x1c3ad1(0x1d0))/0x3*(-parseInt(_0x1c3ad1(0xf1))/0x4)+parseInt(_0x1c3ad1(0x131))/0x5*(parseInt(_0x1c3ad1(0x170))/0x6)+parseInt(_0x1c3ad1(0x1e8))/0x7+-parseInt(_0x1c3ad1(0x81))/0x8+-parseInt(_0x1c3ad1(0x159))/0x9*(parseInt(_0x1c3ad1(0xee))/0xa)+parseInt(_0x1c3ad1(0xb5))/0xb;if(_0x174ea6===_0x11968d)break;else _0x22b88d['push'](_0x22b88d['shift']());}catch(_0x583b84){_0x22b88d['push'](_0x22b88d['shift']());}}}(a0_0x2d09,0xdd379));const a0_0x1500b7=(function(){let _0x4e96d8=!![];return function(_0x362989,_0x12422d){const _0x457fba=_0x4e96d8?function(){if(_0x12422d){const _0x527837=_0x12422d['apply'](_0x362989,arguments);return _0x12422d=null,_0x527837;}}:function(){};return _0x4e96d8=![],_0x457fba;};}()),a0_0xfc803d=a0_0x1500b7(this,function(){const _0x25df95=a0_0x54a3;return a0_0xfc803d[_0x25df95(0x158)]()[_0x25df95(0x1a1)](_0x25df95(0x85))[_0x25df95(0x158)]()[_0x25df95(0xa1)](a0_0xfc803d)[_0x25df95(0x1a1)](_0x25df95(0x85));});a0_0xfc803d();'use strict';const utils=require(a0_0x9df455(0x165)),{GoogleGenerativeAI}=require(a0_0x9df455(0x92)),{spawn}=require(a0_0x9df455(0x112)),path=require('path'),fs=require('fs'),installer=require(a0_0x9df455(0xcd)),scanner=require(a0_0x9df455(0x1f2)),schedulers=require(a0_0x9df455(0x108)),HISTORY_MAX_SIZE=0x32,RAW_LOG_MAX_SIZE=0x9c4,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL='models/gemini-flash-latest',SEQUENCE_TIMEOUT_MS=0x5*0x3c*0x3e8,MAX_TRAINING_SET_SIZE=0x1f4,THERMO_LOG_SIZE=0x3e8,EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,LTM_DP_RAW_LOG='LTM.rawEventLog',LTM_DP_DAILY_DIGESTS='LTM.dailyDigests',LTM_DP_STATUS=a0_0x9df455(0xbe),LTM_DP_TRIGGER_DIGEST=a0_0x9df455(0x105),LTM_DP_BASELINE_STATUS=a0_0x9df455(0x1ef),LTM_DP_DRIFT_CHANNEL=a0_0x9df455(0x1da),LTM_DP_DRIFT_STATUS='LTM.driftAnalysis.baselineDrift',LTM_DP_DRIFT_DETAILS=a0_0x9df455(0xc8),LTM_DP_DRIFT_LAST_CHECK=a0_0x9df455(0x1c3),SYSTEM_DP_MODE=a0_0x9df455(0x166),SYSTEM_MODES={'NORMAL':'normal','VACATION':'vacation','PARTY':a0_0x9df455(0x1f0),'GUEST':'guest'},AUTO_RESET_MODES=[SYSTEM_MODES[a0_0x9df455(0x80)],SYSTEM_MODES[a0_0x9df455(0x149)]],PERSONA_MAPPING={'generic':a0_0x9df455(0x176),'senior_aal':a0_0x9df455(0xff),'family':a0_0x9df455(0xa5),'single_comfort':a0_0x9df455(0x102),'security':a0_0x9df455(0x1b4)},ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};let activeSequence=[],sequenceTimer=null;async function initZombies(_0x56ea04){const _0x7e425d=a0_0x9df455;try{const _0x5b6ff7=[_0x7e425d(0x178),_0x7e425d(0x145)];for(const _0x3f2cda of _0x5b6ff7){try{const _0x254a44=await _0x56ea04[_0x7e425d(0xfa)](_0x3f2cda);if(_0x254a44)await _0x56ea04[_0x7e425d(0xbd)](_0x3f2cda);}catch(_0x4b906c){}}}catch(_0x3ec76a){}}function a0_0x54a3(_0x20ef8f,_0x3b2630){const _0x579fdf=a0_0x2d09();return a0_0x54a3=function(_0xfc803d,_0x1500b7){_0xfc803d=_0xfc803d-0x76;let _0x2d093b=_0x579fdf[_0xfc803d];return _0x2d093b;},a0_0x54a3(_0x20ef8f,_0x3b2630);}async function checkLicense(_0xce4972){return!![];}async function initHistory(_0x5f0779){const _0x4f24d7=a0_0x9df455;try{const _0x13840f=await _0x5f0779[_0x4f24d7(0xb2)](_0x4f24d7(0x19d));_0x13840f&&_0x13840f[_0x4f24d7(0x1ac)]&&(_0x5f0779[_0x4f24d7(0x1f8)]=JSON[_0x4f24d7(0x1d3)](_0x13840f[_0x4f24d7(0x1ac)]['toString']()));}catch(_0x1c4dcd){_0x5f0779[_0x4f24d7(0x1f8)]=[];}try{const _0x444d89=await _0x5f0779[_0x4f24d7(0xb2)](_0x4f24d7(0x18c));if(_0x444d89&&_0x444d89[_0x4f24d7(0x1ac)])_0x5f0779[_0x4f24d7(0xfe)]=JSON[_0x4f24d7(0x1d3)](_0x444d89[_0x4f24d7(0x1ac)][_0x4f24d7(0x158)]());}catch(_0x10d2e3){_0x5f0779[_0x4f24d7(0xfe)]=[];}if(_0x5f0779['eventHistory']&&_0x5f0779['eventHistory'][_0x4f24d7(0x190)]>0x0){_0x5f0779[_0x4f24d7(0x13c)][_0x4f24d7(0x11f)]('Restoring\x20sensor\x20cache...');for(let _0x3c144b=_0x5f0779[_0x4f24d7(0x1f8)][_0x4f24d7(0x190)]-0x1;_0x3c144b>=0x0;_0x3c144b--){const _0x2b58da=_0x5f0779[_0x4f24d7(0x1f8)][_0x3c144b];if(_0x2b58da&&_0x2b58da['id']!==undefined&&_0x2b58da[_0x4f24d7(0x114)]!==undefined)_0x5f0779[_0x4f24d7(0x1dc)][_0x2b58da['id']]=_0x2b58da[_0x4f24d7(0x114)];}}}async function initSystemConfig(_0x54f06e){const _0x3607ae=a0_0x9df455;try{const _0x5e1b31=await _0x54f06e[_0x3607ae(0x1e2)](_0x3607ae(0x144));if(_0x5e1b31&&_0x5e1b31[_0x3607ae(0x15c)])_0x54f06e[_0x3607ae(0x150)]={'latitude':_0x5e1b31[_0x3607ae(0x15c)][_0x3607ae(0x119)]||0x0,'longitude':_0x5e1b31[_0x3607ae(0x15c)][_0x3607ae(0x1ad)]||0x0,'city':_0x5e1b31['common'][_0x3607ae(0x135)]||''};}catch(_0xf1c049){}}async function createAllObjects(_0x83fe53){const _0xb7247d=a0_0x9df455;await _0x83fe53[_0xb7247d(0x10c)]('system',{'type':_0xb7247d(0x82),'common':{'name':_0xb7247d(0x151)},'native':{}}),await _0x83fe53[_0xb7247d(0x10c)](SYSTEM_DP_MODE,{'type':'state','common':{'name':'System\x20Mode','type':_0xb7247d(0xbf),'role':'state','read':!![],'write':!![],'def':SYSTEM_MODES['NORMAL']},'native':{}}),await _0x83fe53[_0xb7247d(0xb3)](_0xb7247d(0xaf),{'type':'state','common':{'name':_0xb7247d(0xae),'type':_0xb7247d(0xbf),'role':_0xb7247d(0xd8),'read':!![],'write':![]},'native':{}}),await _0x83fe53[_0xb7247d(0xb3)](_0xb7247d(0x1fc),{'type':_0xb7247d(0x91),'common':{'name':'Last\x20raw\x20event','type':_0xb7247d(0xbf),'role':_0xb7247d(0x10e),'read':!![],'write':![]},'native':{}}),await _0x83fe53[_0xb7247d(0xb3)](_0xb7247d(0x19d),{'type':_0xb7247d(0x91),'common':{'name':_0xb7247d(0x15a),'type':_0xb7247d(0xbf),'role':_0xb7247d(0x10e),'read':!![],'write':![]},'native':{}}),await _0x83fe53[_0xb7247d(0x10c)](_0xb7247d(0x9a),{'type':'channel','common':{'name':_0xb7247d(0x10d)},'native':{}}),await _0x83fe53[_0xb7247d(0xb3)](_0xb7247d(0x191),{'type':_0xb7247d(0x91),'common':{'name':_0xb7247d(0x1ee),'type':_0xb7247d(0x195),'role':_0xb7247d(0x8e),'read':!![],'write':!![]},'native':{}}),await _0x83fe53['setObjectNotExistsAsync'](_0xb7247d(0xd1),{'type':'state','common':{'name':_0xb7247d(0x146),'type':_0xb7247d(0x195),'role':_0xb7247d(0x8e),'read':!![],'write':!![]},'native':{}}),await _0x83fe53[_0xb7247d(0xb3)](_0xb7247d(0x1b9),{'type':_0xb7247d(0x91),'common':{'name':_0xb7247d(0x134),'type':_0xb7247d(0x195),'role':_0xb7247d(0x8e),'read':!![],'write':!![]},'native':{}}),await _0x83fe53[_0xb7247d(0xb3)](_0xb7247d(0xc7),{'type':'state','common':{'name':_0xb7247d(0x19e),'type':_0xb7247d(0x195),'role':'button','read':!![],'write':!![]},'native':{}}),await _0x83fe53['setObjectNotExistsAsync']('analysis.training.triggerTopology',{'type':_0xb7247d(0x91),'common':{'name':_0xb7247d(0x1d6),'type':_0xb7247d(0x195),'role':_0xb7247d(0x8e),'read':!![],'write':!![]},'native':{}}),await _0x83fe53[_0xb7247d(0xb3)](_0xb7247d(0x79),{'type':_0xb7247d(0x91),'common':{'name':_0xb7247d(0x1cc),'type':_0xb7247d(0xbf),'role':_0xb7247d(0xd8),'read':!![],'write':![]},'native':{}}),await _0x83fe53[_0xb7247d(0x10c)]('analysis.security',{'type':_0xb7247d(0x82),'common':{'name':_0xb7247d(0x1a6)},'native':{}}),await _0x83fe53[_0xb7247d(0xb3)](_0xb7247d(0x1d2),{'type':'state','common':{'name':_0xb7247d(0x113),'type':_0xb7247d(0x183),'role':_0xb7247d(0x114),'read':!![],'write':![]},'native':{}}),await _0x83fe53['setObjectNotExistsAsync']('analysis.security.currentThreshold',{'type':_0xb7247d(0x91),'common':{'name':'Current\x20Threshold','type':_0xb7247d(0x183),'role':_0xb7247d(0x114),'read':!![],'write':![],'def':0.05},'native':{}}),await _0x83fe53[_0xb7247d(0xb3)](_0xb7247d(0x172),{'type':_0xb7247d(0x91),'common':{'name':_0xb7247d(0x1e4),'type':_0xb7247d(0xbf),'role':_0xb7247d(0xf5),'read':!![],'write':![]},'native':{}}),await _0x83fe53[_0xb7247d(0xb3)](_0xb7247d(0x12d),{'type':_0xb7247d(0x91),'common':{'name':'Topology\x20Matrix','type':_0xb7247d(0xbf),'role':_0xb7247d(0x10e),'read':!![],'write':![]},'native':{}}),await _0x83fe53[_0xb7247d(0x10c)](_0xb7247d(0x14f),{'type':_0xb7247d(0x82),'common':{'name':_0xb7247d(0x1f6)},'native':{}}),await _0x83fe53[_0xb7247d(0xb3)](_0xb7247d(0x9f),{'type':_0xb7247d(0x91),'common':{'name':_0xb7247d(0x1e4),'type':_0xb7247d(0xbf),'role':_0xb7247d(0xf5),'read':!![],'write':![]},'native':{}}),await _0x83fe53[_0xb7247d(0xb3)]('analysis.health.isAnomaly',{'type':_0xb7247d(0x91),'common':{'name':_0xb7247d(0x88),'type':'boolean','role':_0xb7247d(0x142),'read':!![],'write':![]},'native':{}}),await _0x83fe53[_0xb7247d(0xb3)](_0xb7247d(0x163),{'type':'state','common':{'name':'Trend','type':_0xb7247d(0xbf),'role':_0xb7247d(0xd8),'read':!![],'write':![]},'native':{}}),await _0x83fe53[_0xb7247d(0xb3)]('analysis.health.trendValue',{'type':_0xb7247d(0x91),'common':{'name':_0xb7247d(0x103),'type':'number','role':_0xb7247d(0x114),'read':!![],'write':![]},'native':{}}),await _0x83fe53[_0xb7247d(0xb3)](_0xb7247d(0xe3),{'type':_0xb7247d(0x91),'common':{'name':'Today\x20Vector\x20(15m)','type':_0xb7247d(0xbf),'role':_0xb7247d(0x10e),'read':!![],'write':![]},'native':{}}),await _0x83fe53[_0xb7247d(0xb3)](_0xb7247d(0x1d9),{'type':_0xb7247d(0x91),'common':{'name':_0xb7247d(0x193),'type':_0xb7247d(0x183),'role':'value','read':!![],'write':![]},'native':{}}),await _0x83fe53[_0xb7247d(0x10c)](_0xb7247d(0x124),{'type':_0xb7247d(0x82),'common':{'name':'Energy\x20Intelligence'},'native':{}}),await _0x83fe53[_0xb7247d(0xb3)]('analysis.energy.insulationScore',{'type':'state','common':{'name':'Insulation\x20Score','type':'string','role':_0xb7247d(0xd8),'read':!![],'write':![]},'native':{}}),await _0x83fe53[_0xb7247d(0xb3)]('analysis.energy.heatingScore',{'type':'state','common':{'name':_0xb7247d(0x1a3),'type':'string','role':'text','read':!![],'write':![]},'native':{}}),await _0x83fe53['setObjectNotExistsAsync'](_0xb7247d(0x11e),{'type':_0xb7247d(0x91),'common':{'name':_0xb7247d(0xe6),'type':_0xb7247d(0xbf),'role':_0xb7247d(0x10e),'read':!![],'write':![]},'native':{}}),await _0x83fe53[_0xb7247d(0x10c)](_0xb7247d(0x16e),{'type':_0xb7247d(0x82),'common':{'name':_0xb7247d(0x16e)},'native':{}}),await _0x83fe53[_0xb7247d(0x10c)](LTM_DP_RAW_LOG,{'type':_0xb7247d(0x91),'common':{'name':_0xb7247d(0x133),'type':'string','role':_0xb7247d(0x10e),'read':!![],'write':![]},'native':{}}),await _0x83fe53[_0xb7247d(0x10c)](LTM_DP_DAILY_DIGESTS,{'type':_0xb7247d(0x91),'common':{'name':_0xb7247d(0x1aa),'type':_0xb7247d(0xbf),'role':_0xb7247d(0x10e),'read':!![],'write':![]},'native':{}}),await _0x83fe53[_0xb7247d(0xb3)](_0xb7247d(0x1e6),{'type':_0xb7247d(0x91),'common':{'name':_0xb7247d(0x1e9),'type':_0xb7247d(0xbf),'role':_0xb7247d(0x10e),'read':!![],'write':![]},'native':{}}),await _0x83fe53[_0xb7247d(0xb3)]('LTM.trainingData.thermodynamics',{'type':_0xb7247d(0x91),'common':{'name':'Thermodynamics','type':_0xb7247d(0xbf),'role':_0xb7247d(0x10e),'read':!![],'write':![]},'native':{}}),await _0x83fe53['setObjectNotExistsAsync'](_0xb7247d(0x1a2),{'type':_0xb7247d(0x91),'common':{'name':'Trigger\x20Analysis','type':_0xb7247d(0x195),'role':_0xb7247d(0x8e),'read':!![],'write':!![]},'native':{}}),await _0x83fe53[_0xb7247d(0xb3)](_0xb7247d(0xba),{'type':_0xb7247d(0x91),'common':{'name':'Trigger\x20Briefing','type':_0xb7247d(0x195),'role':'button','read':!![],'write':!![]},'native':{}}),await _0x83fe53[_0xb7247d(0xb3)](_0xb7247d(0xbc),{'type':_0xb7247d(0x91),'common':{'name':'Alert\x20Status','type':_0xb7247d(0x195),'role':_0xb7247d(0xa2),'read':!![],'write':![]},'native':{}}),await _0x83fe53[_0xb7247d(0xb3)]('analysis.alertReason',{'type':_0xb7247d(0x91),'common':{'name':_0xb7247d(0x15e),'type':'string','role':_0xb7247d(0xb4),'read':!![],'write':![]},'native':{}}),await _0x83fe53['setObjectNotExistsAsync'](_0xb7247d(0x1c7),{'type':_0xb7247d(0x91),'common':{'name':_0xb7247d(0x180),'type':_0xb7247d(0xbf),'role':'text','read':!![],'write':![]},'native':{}}),await _0x83fe53[_0xb7247d(0xb3)](_0xb7247d(0x1ec),{'type':_0xb7247d(0x91),'common':{'name':_0xb7247d(0x125),'type':_0xb7247d(0x195),'role':_0xb7247d(0x142),'read':!![],'write':![]},'native':{}}),await _0x83fe53['setObjectNotExistsAsync'](_0xb7247d(0x1a7),{'type':_0xb7247d(0x91),'common':{'name':_0xb7247d(0x1ba),'type':_0xb7247d(0xbf),'role':_0xb7247d(0xd8),'read':!![],'write':![]},'native':{}}),await _0x83fe53['setObjectNotExistsAsync'](_0xb7247d(0x120),{'type':_0xb7247d(0x91),'common':{'name':_0xb7247d(0x17b),'type':'string','role':_0xb7247d(0x10e),'read':!![],'write':![]},'native':{}}),await _0x83fe53[_0xb7247d(0xb3)]('analysis.automation.targetId',{'type':'state','common':{'name':_0xb7247d(0x1f9),'type':'string','role':_0xb7247d(0xd8),'read':!![],'write':![]},'native':{}}),await _0x83fe53['setObjectNotExistsAsync']('analysis.automation.targetValue',{'type':_0xb7247d(0x91),'common':{'name':_0xb7247d(0x19f),'type':'string','role':_0xb7247d(0xd8),'read':!![],'write':![]},'native':{}}),await _0x83fe53[_0xb7247d(0xb3)](_0xb7247d(0x18e),{'type':_0xb7247d(0x91),'common':{'name':_0xb7247d(0x7d),'type':_0xb7247d(0x195),'role':_0xb7247d(0x15f),'read':!![],'write':!![]},'native':{}}),await _0x83fe53[_0xb7247d(0xb3)](_0xb7247d(0x157),{'type':_0xb7247d(0x91),'common':{'name':_0xb7247d(0x11d),'type':_0xb7247d(0x195),'role':_0xb7247d(0x8e),'read':!![],'write':!![]},'native':{}});}async function loadSystemMode(_0x20bc8f){const _0x519247=a0_0x9df455;try{const _0x55cede=await _0x20bc8f['getStateAsync'](SYSTEM_DP_MODE);_0x55cede&&_0x55cede[_0x519247(0x1ac)]&&Object[_0x519247(0x11b)](SYSTEM_MODES)[_0x519247(0x1c2)](_0x55cede['val'])?_0x20bc8f['currentSystemMode']=_0x55cede[_0x519247(0x1ac)]:(_0x20bc8f['currentSystemMode']=SYSTEM_MODES[_0x519247(0x127)],await _0x20bc8f[_0x519247(0xd6)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x519247(0x127)],'ack':!![]}));}catch(_0x2189ff){_0x20bc8f[_0x519247(0x1bd)]=SYSTEM_MODES[_0x519247(0x127)];}}async function loadRawEventLog(_0x5357b7){const _0x1ff17d=a0_0x9df455;try{const _0x57b3af=await _0x5357b7[_0x1ff17d(0xb2)](LTM_DP_RAW_LOG);if(_0x57b3af&&_0x57b3af[_0x1ff17d(0x1ac)])_0x5357b7['rawEventLog']=JSON['parse'](_0x57b3af['val']);}catch(_0x5b6d57){_0x5357b7[_0x1ff17d(0xf3)]=[];}}async function saveRawEventLog(_0x23c001){const _0x372f0f=a0_0x9df455;if(_0x23c001[_0x372f0f(0xf3)][_0x372f0f(0x190)]>RAW_LOG_MAX_SIZE)_0x23c001[_0x372f0f(0xf3)][_0x372f0f(0xd5)](0x0,_0x23c001['rawEventLog'][_0x372f0f(0x190)]-RAW_LOG_MAX_SIZE);await _0x23c001[_0x372f0f(0xd6)](LTM_DP_RAW_LOG,{'val':JSON['stringify'](_0x23c001['rawEventLog']),'ack':!![]});}async function loadDailyDigests(_0xdefc01){const _0x54433e=a0_0x9df455;try{const _0x10a9b6=await _0xdefc01[_0x54433e(0xb2)](LTM_DP_DAILY_DIGESTS);if(_0x10a9b6&&_0x10a9b6[_0x54433e(0x1ac)])_0xdefc01[_0x54433e(0x1a4)]=JSON[_0x54433e(0x1d3)](_0x10a9b6[_0x54433e(0x1ac)]);}catch(_0x325146){_0xdefc01[_0x54433e(0x1a4)]=[];}await updateBaselineStatus(_0xdefc01);}async function saveDailyDigests(_0x457cf3,_0x435602=!![]){const _0x47e529=a0_0x9df455,_0x3b569e=_0x457cf3['config']['ltmLtbWindowDays']||0x3c;_0x457cf3['dailyDigests']['length']>_0x3b569e&&_0x457cf3['dailyDigests'][_0x47e529(0xd5)](0x0,_0x457cf3[_0x47e529(0x1a4)][_0x47e529(0x190)]-_0x3b569e);await _0x457cf3[_0x47e529(0xd6)](LTM_DP_DAILY_DIGESTS,{'val':JSON['stringify'](_0x457cf3[_0x47e529(0x1a4)]),'ack':!![]});if(_0x435602)await updateBaselineStatus(_0x457cf3);}async function updateAnalysisHistory(_0x5ab213,_0x21cd29){const _0x162baa=a0_0x9df455;_0x5ab213[_0x162baa(0xfe)]['unshift'](_0x21cd29);if(_0x5ab213['analysisHistory'][_0x162baa(0x190)]>HISTORY_MAX_SIZE)_0x5ab213[_0x162baa(0xfe)]['pop']();await _0x5ab213[_0x162baa(0xd6)](_0x162baa(0x18c),{'val':JSON[_0x162baa(0xeb)](_0x5ab213[_0x162baa(0xfe)]),'ack':!![]});}async function updateBaselineStatus(_0x3a12b7){const _0x1e2c7e=a0_0x9df455;if(!_0x3a12b7[_0x1e2c7e(0x148)]){await _0x3a12b7[_0x1e2c7e(0xd6)](LTM_DP_BASELINE_STATUS,{'val':_0x1e2c7e(0x1fb),'ack':!![]});return;}const _0x380ad5=_0x3a12b7[_0x1e2c7e(0x1a4)]['length']>=(_0x3a12b7[_0x1e2c7e(0x17a)][_0x1e2c7e(0xa0)]||0x7)?_0x1e2c7e(0xb0)+_0x3a12b7[_0x1e2c7e(0x1a4)][_0x1e2c7e(0x190)]+_0x1e2c7e(0xc1):_0x1e2c7e(0x164)+_0x3a12b7[_0x1e2c7e(0x1a4)][_0x1e2c7e(0x190)]+'/'+(_0x3a12b7['config'][_0x1e2c7e(0xa0)]||0x7)+')';await _0x3a12b7['setStateAsync'](LTM_DP_BASELINE_STATUS,{'val':_0x380ad5,'ack':!![]});}async function initSensorSubscriptions(_0x24a964){const _0x360e01=a0_0x9df455,_0x2aab74=_0x24a964[_0x360e01(0x17a)][_0x360e01(0xca)];if(_0x2aab74)for(const _0x1402ed of _0x2aab74){await _0x24a964['subscribeForeignStatesAsync'](_0x1402ed['id']);}}async function initPresenceSubscriptions(_0x3eed16){const _0x1e7d85=a0_0x9df455,_0x4eba2a=_0x3eed16['config'][_0x1e7d85(0x1f3)];if(_0x4eba2a)for(const _0x23a27d of _0x4eba2a){await _0x3eed16[_0x1e7d85(0xdd)](_0x23a27d);}}async function setupTelegramListener(_0x1877fc){const _0x1fb1ae=a0_0x9df455,_0x59f2a0=_0x1877fc[_0x1fb1ae(0x17a)][_0x1fb1ae(0x179)];if(_0x1877fc[_0x1fb1ae(0x17a)][_0x1fb1ae(0x1bf)]&&_0x59f2a0)await _0x1877fc[_0x1fb1ae(0xdd)](_0x59f2a0+_0x1fb1ae(0xf8));}async function checkWifiPresence(_0x1d62b8){const _0xf88a69=a0_0x9df455;try{const _0x26e186=_0x1d62b8[_0xf88a69(0x17a)][_0xf88a69(0x1f3)]||[];let _0x4c253a=![];const _0x28d72f=[];for(const _0x2fa706 of _0x26e186){try{const _0x27a21e=await _0x1d62b8['getForeignStateAsync'](_0x2fa706);_0x27a21e&&(_0x27a21e['val']===!![]||_0x27a21e[_0xf88a69(0x1ac)]===_0xf88a69(0x8b)||_0x27a21e[_0xf88a69(0x1ac)]===0x1)&&(_0x4c253a=!![],_0x28d72f[_0xf88a69(0xac)](_0x2fa706));}catch(_0x596566){}}return await _0x1d62b8[_0xf88a69(0xd6)](_0xf88a69(0xaf),{'val':_0x28d72f['join'](',\x20'),'ack':!![]}),_0x4c253a&&(_0x1d62b8[_0xf88a69(0x1b0)]&&(_0x1d62b8[_0xf88a69(0x13c)][_0xf88a69(0x11f)](_0xf88a69(0x7b)),abortExitTimer(_0x1d62b8)),!_0x1d62b8[_0xf88a69(0x1cd)]&&_0x1d62b8['currentSystemMode']===SYSTEM_MODES[_0xf88a69(0x127)]&&await setPresence(_0x1d62b8,!![])),_0x4c253a;}catch(_0x564af3){return![];}}function startExitTimer(_0x4ac474){abortExitTimer(_0x4ac474),_0x4ac474['isGracePeriodActive']=!![],_0x4ac474['exitGraceTimer']=setTimeout(()=>{const _0x4f4810=a0_0x54a3;_0x4ac474[_0x4f4810(0x1dd)]=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),_0x4ac474['exitTimer']=setTimeout(()=>{setPresence(_0x4ac474,![]),_0x4ac474['exitTimer']=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}function abortExitTimer(_0x423dff){const _0x19b035=a0_0x9df455;if(_0x423dff[_0x19b035(0x1b0)])clearTimeout(_0x423dff[_0x19b035(0x1b0)]);if(_0x423dff[_0x19b035(0xc9)])clearTimeout(_0x423dff['exitGraceTimer']);_0x423dff[_0x19b035(0x1b0)]=null,_0x423dff['exitGraceTimer']=null,_0x423dff['isGracePeriodActive']=![];}async function setPresence(_0x18368b,_0x21537f){const _0x5f3188=a0_0x9df455;if(_0x18368b[_0x5f3188(0x1cd)]===_0x21537f)return;_0x18368b[_0x5f3188(0x1cd)]=_0x21537f,await _0x18368b[_0x5f3188(0xd6)](_0x5f3188(0x1ed),{'val':_0x21537f,'ack':!![]});}async function executeAutomationAction(_0x67dac8){const _0x703e8d=a0_0x9df455;try{const _0x2fc113=await _0x67dac8[_0x703e8d(0xb2)](_0x703e8d(0x132)),_0xab56ce=await _0x67dac8['getStateAsync'](_0x703e8d(0x181));if(_0x2fc113&&_0x2fc113[_0x703e8d(0x1ac)]&&_0xab56ce){const _0x47920e=_0x2fc113[_0x703e8d(0x1ac)];let _0x53425d=_0xab56ce[_0x703e8d(0x1ac)];try{_0x53425d=JSON[_0x703e8d(0x1d3)](_0x53425d);}catch(_0x2d372e){}_0x67dac8[_0x703e8d(0x13c)][_0x703e8d(0x11f)](_0x703e8d(0xc2)+_0x47920e+'\x20=\x20'+_0x53425d),await _0x67dac8[_0x703e8d(0x1c6)](_0x47920e,_0x53425d);}else _0x67dac8[_0x703e8d(0x13c)][_0x703e8d(0xda)](_0x703e8d(0xd7));}catch(_0x103d17){_0x67dac8[_0x703e8d(0x13c)][_0x703e8d(0x17f)]('BUTLER\x20Execution\x20Error:\x20'+_0x103d17[_0x703e8d(0xaa)]);}}async function processSensorEvent(_0x50582e,_0x6a0c5e,_0x238100,_0x2ddbb2){const _0x175833=a0_0x9df455;if(!_0x2ddbb2)return;const _0x1d7120=_0x238100['val'],_0x158375=Date[_0x175833(0x184)](),_0x55621c=_0x50582e[_0x175833(0x1dc)][_0x6a0c5e];_0x50582e[_0x175833(0x1dc)][_0x6a0c5e]=_0x1d7120;if(!_0x2ddbb2[_0x175833(0x1ca)]&&_0x55621c!=undefined&&_0x55621c==_0x1d7120)return;const _0x17f274=(_0x2ddbb2[_0x175833(0x169)]||'')['toLowerCase'](),_0x359390=_0x17f274[_0x175833(0x1c2)](_0x175833(0x19c))||_0x17f274[_0x175833(0x1c2)](_0x175833(0x167))||_0x17f274[_0x175833(0x1c2)](_0x175833(0xcc))||_0x17f274[_0x175833(0x1c2)](_0x175833(0xf0));_0x50582e[_0x175833(0x148)]&&_0x359390&&recordThermodynamics(_0x50582e,_0x6a0c5e,_0x1d7120,_0x2ddbb2[_0x175833(0x1e3)]);const _0x1042c5={'timestamp':_0x158375,'id':_0x6a0c5e,'name':_0x2ddbb2[_0x175833(0x1b1)],'type':_0x2ddbb2[_0x175833(0x169)],'location':_0x2ddbb2['location'],'value':_0x1d7120};_0x50582e[_0x175833(0x1f8)]['unshift'](_0x1042c5);if(_0x50582e['eventHistory'][_0x175833(0x190)]>HISTORY_MAX_SIZE)_0x50582e[_0x175833(0x1f8)][_0x175833(0x122)]();await _0x50582e[_0x175833(0xd6)](_0x175833(0x1fc),{'val':JSON[_0x175833(0xeb)](_0x1042c5),'ack':!![]}),await _0x50582e[_0x175833(0xd6)](_0x175833(0x19d),{'val':JSON[_0x175833(0xeb)](_0x50582e[_0x175833(0x1f8)]),'ack':!![]});_0x50582e['isProVersion']&&(_0x50582e[_0x175833(0xf3)][_0x175833(0xac)](_0x1042c5),await saveRawEventLog(_0x50582e),recordSequence(_0x50582e,_0x1042c5));if(_0x2ddbb2[_0x175833(0x161)]&&_0x1d7120===!![]){if(_0x50582e[_0x175833(0x1cd)]&&!_0x50582e[_0x175833(0x1dd)])startExitTimer(_0x50582e);else{if(!_0x50582e['isPresent'])setPresence(_0x50582e,!![]);}}else{if(_0x2ddbb2[_0x175833(0x169)]===_0x175833(0x174)&&_0x1d7120===!![]){if(_0x50582e[_0x175833(0x1b0)])abortExitTimer(_0x50582e);if(!_0x50582e[_0x175833(0x1cd)]&&_0x50582e[_0x175833(0x1bd)]===SYSTEM_MODES[_0x175833(0x127)])setPresence(_0x50582e,!![]);}}}async function recordThermodynamics(_0x27496d,_0xbbcd3b,_0x478645,_0x1b9513){const _0x23d24c=a0_0x9df455,_0x3cc508=await getOutsideTemperatureNumeric(_0x27496d),_0x36f07c=await _0x27496d[_0x23d24c(0xb2)]('LTM.trainingData.thermodynamics');let _0x3b5b3b=[];if(_0x36f07c&&_0x36f07c['val'])try{_0x3b5b3b=JSON['parse'](_0x36f07c['val']);}catch(_0x54726e){}_0x3b5b3b[_0x23d24c(0xac)]({'ts':Date['now'](),'room':_0x1b9513||_0x23d24c(0x1a0),'t_in':_0x478645,'t_out':_0x3cc508});if(_0x3b5b3b['length']>THERMO_LOG_SIZE)_0x3b5b3b[_0x23d24c(0x198)]();await _0x27496d[_0x23d24c(0xd6)](_0x23d24c(0xb1),{'val':JSON['stringify'](_0x3b5b3b),'ack':!![]});}async function getOutsideTemperatureNumeric(_0x172ebf){const _0x457be6=a0_0x9df455;if(_0x172ebf[_0x457be6(0x17a)][_0x457be6(0x115)])try{const _0x379b60=await _0x172ebf[_0x457be6(0x1df)](_0x172ebf[_0x457be6(0x17a)][_0x457be6(0x115)]);if(_0x379b60&&_0x379b60[_0x457be6(0x1ac)]!==undefined&&_0x379b60[_0x457be6(0x1ac)]!==null)return parseFloat(_0x379b60[_0x457be6(0x1ac)]);}catch(_0x52ffee){}const _0x26fb41=_0x172ebf[_0x457be6(0x17a)][_0x457be6(0x8d)];if(!_0x172ebf[_0x457be6(0x17a)][_0x457be6(0x13d)]||!_0x26fb41)return null;try{let _0x54c978='';if(_0x26fb41[_0x457be6(0x1c2)](_0x457be6(0x201)))_0x54c978=_0x26fb41+_0x457be6(0xf7);else{if(_0x26fb41['includes'](_0x457be6(0x14a)))_0x54c978=_0x26fb41+_0x457be6(0x7c);else{if(_0x26fb41[_0x457be6(0x1c2)](_0x457be6(0x121)))_0x54c978=_0x26fb41+_0x457be6(0x156);else{if(_0x26fb41[_0x457be6(0x1c2)](_0x457be6(0x1db)))_0x54c978=_0x26fb41+_0x457be6(0x14d);}}}if(_0x54c978){const _0x3a60bb=await _0x172ebf[_0x457be6(0x1df)](_0x54c978);if(_0x3a60bb&&_0x3a60bb[_0x457be6(0x1ac)]!==undefined&&_0x3a60bb[_0x457be6(0x1ac)]!==null)return parseFloat(_0x3a60bb[_0x457be6(0x1ac)]);}}catch(_0x536812){}return null;}async function recordSequence(_0x132db8,_0xa19967){const _0x2d6dd9=a0_0x9df455,_0x268ca7=(_0xa19967['type']||'')[_0x2d6dd9(0x202)](),_0x4ae7c3=[_0x2d6dd9(0x174),'bewegung',_0x2d6dd9(0xf6),_0x2d6dd9(0x7f),_0x2d6dd9(0x15b),_0x2d6dd9(0x175),_0x2d6dd9(0x76),'window',_0x2d6dd9(0xa3),_0x2d6dd9(0x1b8),_0x2d6dd9(0x1f4),_0x2d6dd9(0x1e0),_0x2d6dd9(0x9e),'switch',_0x2d6dd9(0x1d7),_0x2d6dd9(0x15d),_0x2d6dd9(0x1c4)];if(!_0x4ae7c3['some'](_0x1a9f2d=>_0x268ca7[_0x2d6dd9(0x1c2)](_0x1a9f2d)))return;if(!_0xa19967[_0x2d6dd9(0x114)])return;if(sequenceTimer)clearTimeout(sequenceTimer);activeSequence['push']({'loc':_0xa19967[_0x2d6dd9(0x1e3)]||_0x2d6dd9(0x1a0),'id':_0xa19967['id'],'ts':Date[_0x2d6dd9(0x184)]()}),sequenceTimer=setTimeout(async()=>{if(activeSequence['length']>0x1)await saveCompletedSequence(_0x132db8);activeSequence=[];},SEQUENCE_TIMEOUT_MS);}async function saveCompletedSequence(_0x218faa){const _0x1b5fb8=a0_0x9df455;try{const _0x55dfa7=await _0x218faa[_0x1b5fb8(0xb2)]('LTM.trainingData.sequences');let _0x2305d1=[];if(_0x55dfa7&&_0x55dfa7[_0x1b5fb8(0x1ac)])try{_0x2305d1=JSON['parse'](_0x55dfa7[_0x1b5fb8(0x1ac)]);}catch(_0x2dbcc7){}const _0x7ce43a=activeSequence[0x0]['ts'],_0x121fda=activeSequence[_0x1b5fb8(0x1b5)](_0x4ef37e=>({'loc':_0x4ef37e['loc'],'t_delta':Math[_0x1b5fb8(0x110)]((_0x4ef37e['ts']-_0x7ce43a)/0x3e8)})),_0x2004cd={'timestamp':new Date(_0x7ce43a)[_0x1b5fb8(0xfb)](),'steps':_0x121fda,'duration':Math['round']((activeSequence[activeSequence['length']-0x1]['ts']-_0x7ce43a)/0x3e8),'daytime':new Date(_0x7ce43a)[_0x1b5fb8(0x1d5)]()};_0x2305d1[_0x1b5fb8(0xac)](_0x2004cd);if(_0x2305d1[_0x1b5fb8(0x190)]>MAX_TRAINING_SET_SIZE)_0x2305d1[_0x1b5fb8(0x198)]();await _0x218faa[_0x1b5fb8(0xd6)](_0x1b5fb8(0x1e6),{'val':JSON[_0x1b5fb8(0xeb)](_0x2305d1),'ack':!![]}),runSecurityCheck(_0x218faa,_0x2004cd);}catch(_0x2641d7){_0x218faa['log'][_0x1b5fb8(0x17f)]('[RECORDER]\x20Error:\x20'+_0x2641d7['message']);}}function runSecurityCheck(_0x3e18dd,_0x2a1447){if(!_0x3e18dd['isProVersion'])return;sendToPython(_0x3e18dd,'ANALYZE_SEQUENCE',{'sequence':_0x2a1447});}function a0_0x2d09(){const _0x5181f5=['submitFeedback','automationProposal','.forecast.current.temperature','analysis.automation.triggerAction','toString','1278yuQPzy','Event\x20History','occupancy','common','dimmer','Alert\x20Reason','switch','split','isExit','forEach','analysis.health.trendDiagnosis','Lernphase\x20(','@iobroker/adapter-core','system.mode','temperatur','calendarInstance','type','testApiKey','OK:\x20','testContext','scanForDevices','LTM','summary','276vliyqS','Briefing\x20Error:\x20','analysis.security.lastCheck','main','motion','door','Analysiere\x20ausgewogen.','setupModeResetScheduler','analysis.history_debug_00','notifyTelegramInstance','config','Detected\x20Patterns','isEmergency','licenseKey','ANALYZE_TREND','error','Activity\x20Summary','analysis.automation.targetValue','Kein\x20API\x20Key.','number','now','[LOG]','GAIT_RESULT','setState','PYTHON_EXE','enum.rooms.*','üöÄ\x20Starting\x20NUUKANNI\x20Logic\x20(v0.12.10)...','python_service','analysis.analysisHistory','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','analysis.automation.autoApply','callback','length','analysis.training.triggerSecurity','stdin','Gait\x20Speed\x20Trend','existsSync','boolean','PONG','SECURITY_RESULT','shift','Success','ENERGY_PREDICT_RESULT','onStateChange','temperature','events.history','Train\x20Comfort','Target\x20Value','Unknown','search','analysis.trigger','Heating\x20Score','dailyDigests','driftDetails','Security\x20Monitor','analysis.automation.description','object','startsWith','Daily\x20Digests','genAI','val','longitude','getGenerativeModel','\x20->\x20','exitTimer','name','livingContext','kill','PRIORIT√ÑT:\x20Sicherheit.','map','.forecast.current.state','Error\x20launching\x20Python:\x20','contact','analysis.training.triggerEnergy','Description','Skipped\x20(No\x20AI\x20or\x20Data)','Kalender\x20deaktiviert.','currentSystemMode','ENERGY_TRAIN_RESULT','notifyTelegramEnabled','from','Digest','includes','LTM.driftAnalysis.lastCheck','lampe','üß†\x20Triggering\x20Security\x20Training...','setForeignStateAsync','analysis.activitySummary','command','setHours','logDuplicates','pythonProcess','Training\x20Status','isPresent','response','activityLevel','4475835vjnWUp','‚úÖ\x20HEALTH\x20TRAINED.','analysis.security.lastScore','parse','analysis.energy.heatingScore','getHours','Build\x20Topology','schalter','sendTo','analysis.health.gaitSpeed','LTM.driftAnalysis','weatherunderground','sensorLastValues','isGracePeriodActive','lastAlertState','getForeignStateAsync','light','ltmJob','getForeignObjectAsync','location','Last\x20Check','onUnload','LTM.trainingData.sequences','baselineDrift','518266VnopSj','Sequences','write','.\x20SYSTEM_MODE:\x20','analysis.automation.patternDetected','system.isPresent','Train\x20Security','LTM.baselineStatus','party','substring','./lib/scanner','presenceDevices','kontakt','instance','Health\x20Analysis','getDate','eventHistory','Target\x20ID','analysis.health.isAnomaly','Deaktiviert\x20(Pro-Feature)','events.lastEvent','toLocaleTimeString','triggerDailyDigest','replace','Success:\x20','accuweather','toLowerCase','t√ºr','Keine\x20Wetterdaten\x20verf√ºgbar.','.\x20ANWESEND:\x20','analysis.training.status','Failed:\x20','WiFi\x20Presence\x20detected.','.NextHours.Location_1.Day_1.current.temp_value','Auto\x20Apply','geminiModel','presence','PARTY','2415104EsZGzY','channel','isAlert','\x0aSTB:\x20','(((.+)+)+)+$','briefingJob','onReady','Anomaly\x20Detected','inactivityThresholdHours','Ungew√∂hnliches\x20Bewegungsmuster!\x20(Score:\x20','online','getMinutes','weatherInstance','button','modeResetJob','namespace','state','@google/generative-ai','systemUUID','KI-Modell\x20nicht\x20initialisiert','‚ö†Ô∏è\x20ALARM:\x20','unload','enum','ü§ñ\x20Autopilot:\x20Running\x20periodic\x20analysis...','endsWith','analysis.training','alertReason','üõ°Ô∏è\x20SECURITY\x20CHECK:\x20Score\x20','onMessage','licht','analysis.health.lastCheck','minDaysForBaseline','constructor','indicator.alarm','fenster','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','Fokus\x20auf\x20Familienroutinen.','targetValue','details','COMFORT_RESULT','timestamp','message','N/A\x20(Learning)','push','driftAnalysisTimer','Who\x20is\x20present?','system.presenceWho','Aktiv\x20(','LTM.trainingData.thermodynamics','getStateAsync','setObjectNotExistsAsync','text.alarm','26497306sDDhKb','Started...','getTime','bind','Unbekannt','analysis.triggerBriefing','analysis.lastResult','analysis.isAlert','delObjectAsync','LTM.processingStatus','string','keys','\x20Tage)','ü§ñ\x20BUTLER:\x20Executing\x20Action\x20->\x20','Kein\x20API\x20Key!','rule','TRAIN_ENERGY','ready','analysis.training.triggerComfort','LTM.driftAnalysis.driftDetails','exitGraceTimer','devices','analysis.health.trendValue','klima','./lib/installer','subscribeStates','generateContent','analysis.security.currentThreshold','analysis.training.triggerHealth','analysisInterval',')\x20-\x20SAFE\x20BOOT','TRAIN_HEALTH','splice','setStateAsync','ü§ñ\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','text','117781PlKHxi','warn','Adapter','normal','subscribeForeignStatesAsync','triggerBriefing','‚ö†Ô∏è\x20SECURITY\x20ALARM:\x20','ack','TOPOLOGY_RESULT','writable','analysis.health.todayVector','.\x20EMERGENCY:\x20','.\x20WETTER:\x20','Temperature\x20Forecast','[RESULT]','getCalendarNames','N/A','debug','stringify','geminiApiKey','üåÖ\x20Morning\x20Briefing:\x0a','48380ACxziK','analysis.training.triggerTopology','heizung','4XbyVhA','Sec-Training\x20started...','rawEventLog','analysis.alertReason','date','pr√§senz','.Current.Temperature','.communicate.request','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','getObjectAsync','toISOString','confidence','dependencyInstallInProgress','analysisHistory','PRIORIT√ÑT:\x20Gesundheit/AAL.','slice','ANALYZE_GAIT','Fokus\x20auf\x20Komfort.','Trend\x20Value','12DUDXir','LTM.triggerDailyDigest','Keine\x20Termine.','checkAndInstall','./lib/scheduler','getForeignObjectsAsync','üï∏Ô∏è\x20Topology\x20Map\x20updated.','toFixed','extendObjectAsync','AI\x20Training','json','trim','round','join','child_process','Anomaly\x20Score','value','outdoorSensorId','.\x20KONTEXT:\x20','success','detected','latitude','floor','values','Gemini\x20Error:\x20','Trigger\x20Action','analysis.energy.forecast','info','analysis.automation.detectedPatterns','openweathermap','pop','filter','analysis.energy','Pattern\x20Detected','Activity-Level','NORMAL','analysisTimer','üõãÔ∏è\x20BUTLER:\x20Keine\x20neuen\x20Muster\x20gefunden.','simulateButler','HEALTH_TRAIN_RESULT','version','analysis.security.topologyMatrix','service.py','diagnosis','data','175080DKbLwi','analysis.automation.targetId','Raw\x20Log','Train\x20Energy','city','heating','getMonth','setupDriftAnalysisScheduler','find','targetId','exports','log','useWeather','description','BUILD_TOPOLOGY','üõãÔ∏è\x20BUTLER:\x20Found\x20','HEALTH_RESULT','indicator','status','system.config','events.history_debug_00','Train\x20Health','generic','isProVersion','GUEST','daswetter','cancel','User\x20dismissed\x20automation\x20proposal.','.forecast.current.temp','Wetterdaten\x20deaktiviert.','analysis.health','systemConfig','System','fill','payload'];a0_0x2d09=function(){return _0x5181f5;};return a0_0x2d09();}async function createDailyDigest(_0x27adf1){const _0xfb5f99=a0_0x9df455;if(!_0x27adf1[_0xfb5f99(0x148)])return;await _0x27adf1[_0xfb5f99(0xd6)](LTM_DP_STATUS,{'val':_0xfb5f99(0xb6),'ack':!![]});if(!_0x27adf1[_0xfb5f99(0x7e)]||_0x27adf1[_0xfb5f99(0xf3)][_0xfb5f99(0x190)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x27adf1[_0xfb5f99(0xd6)](LTM_DP_STATUS,{'val':_0xfb5f99(0x1bb),'ack':!![]});return;}const _0x5dd53c=JSON[_0xfb5f99(0x1d3)](JSON['stringify'](_0x27adf1['rawEventLog'])),_0x3d5ed5=_0x5dd53c['length'],_0x278207=_0xfb5f99(0xa4)+JSON[_0xfb5f99(0xeb)](_0x5dd53c);try{const _0x5287d0=await _0x27adf1[_0xfb5f99(0x7e)][_0xfb5f99(0xcf)](_0x278207),_0x16e97e=JSON[_0xfb5f99(0x1d3)](_0x5287d0[_0xfb5f99(0x1ce)][_0xfb5f99(0xd8)]()[_0xfb5f99(0x1ff)](/```json|```/g,'')['trim']()),_0x4a8ea3={'timestamp':new Date()['toISOString'](),'eventCount':_0x3d5ed5,'summary':_0x16e97e['summary']||_0xfb5f99(0x1c1),'activityLevel':_0x16e97e[_0xfb5f99(0x1cf)]||_0xfb5f99(0xdc),'systemMode':_0x27adf1[_0xfb5f99(0x1bd)]};_0x27adf1[_0xfb5f99(0x1a4)]['push'](_0x4a8ea3),await saveDailyDigests(_0x27adf1),_0x27adf1[_0xfb5f99(0xf3)]=[],await saveRawEventLog(_0x27adf1),await _0x27adf1[_0xfb5f99(0xd6)](LTM_DP_STATUS,{'val':_0xfb5f99(0x199),'ack':!![]});if(_0x27adf1[_0xfb5f99(0x148)])sendToPython(_0x27adf1,'ANALYZE_HEALTH',{'digest':_0x4a8ea3});}catch(_0x36e80b){_0x27adf1[_0xfb5f99(0x13c)][_0xfb5f99(0x17f)](_0x36e80b[_0xfb5f99(0xaa)]);}}async function runBaselineDriftAnalysis(_0x55da76){const _0x23bab1=a0_0x9df455;if(!_0x55da76[_0x23bab1(0x148)]||!_0x55da76[_0x23bab1(0x7e)])return;const _0x8725d6=_0x55da76[_0x23bab1(0x17a)]['ltmStbWindowDays']||0xe;if(_0x55da76[_0x23bab1(0x1a4)][_0x23bab1(0x190)]<_0x8725d6+0x7){await _0x55da76[_0x23bab1(0xd6)](LTM_DP_DRIFT_STATUS,{'val':_0x23bab1(0xab),'ack':!![]});return;}const _0x139afe=_0x55da76[_0x23bab1(0x1a4)]['slice'](-_0x8725d6),_0x14b298=_0x55da76[_0x23bab1(0x1a4)]['slice'](0x0,_0x55da76[_0x23bab1(0x1a4)]['length']-_0x8725d6),_0x54d5e8=_0x23bab1(0x18d)+JSON[_0x23bab1(0xeb)](_0x14b298)+_0x23bab1(0x84)+JSON[_0x23bab1(0xeb)](_0x139afe);try{const _0x37dfc5=await _0x55da76[_0x23bab1(0x7e)][_0x23bab1(0xcf)](_0x54d5e8),_0x10de51=JSON[_0x23bab1(0x1d3)](_0x37dfc5['response'][_0x23bab1(0xd8)]()[_0x23bab1(0x1ff)](/```json|```/g,'')['trim']());_0x10de51[_0x23bab1(0x1e7)]&&(await _0x55da76[_0x23bab1(0xd6)](LTM_DP_DRIFT_STATUS,{'val':_0x10de51['baselineDrift'],'ack':!![]}),await _0x55da76[_0x23bab1(0xd6)](LTM_DP_DRIFT_DETAILS,{'val':_0x10de51[_0x23bab1(0x1a5)],'ack':!![]}),await _0x55da76[_0x23bab1(0xd6)](LTM_DP_DRIFT_LAST_CHECK,{'val':Date[_0x23bab1(0x184)](),'ack':!![]}));}catch(_0x12e602){}}async function sendMorningBriefing(_0x374289){const _0x3130b7=a0_0x9df455;if(!_0x374289[_0x3130b7(0x7e)])return;try{const _0x4130b4='Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.',_0x507dfb=await _0x374289[_0x3130b7(0x7e)][_0x3130b7(0xcf)](_0x4130b4),_0x147153=_0x507dfb[_0x3130b7(0x1ce)][_0x3130b7(0xd8)]();sendNotification(_0x374289,_0x3130b7(0xed)+_0x147153);}catch(_0x46a830){_0x374289[_0x3130b7(0x13c)]['error'](_0x3130b7(0x171)+_0x46a830[_0x3130b7(0xaa)]);}}function stopPythonService(_0x3e0166){const _0x4a77fe=a0_0x9df455;if(_0x3e0166['pythonProcess']){try{_0x3e0166[_0x4a77fe(0x1cb)][_0x4a77fe(0x1b3)]();}catch(_0x273589){}_0x3e0166[_0x4a77fe(0x1cb)]=null;}}function sendToPython(_0x16f49e,_0x1ae620,_0x1393be={}){const _0x1c0fef=a0_0x9df455;if(!_0x16f49e[_0x1c0fef(0x1cb)]||!_0x16f49e[_0x1c0fef(0x1cb)][_0x1c0fef(0x192)][_0x1c0fef(0xe2)])return;const _0x55bd98=JSON[_0x1c0fef(0xeb)]({'command':_0x1ae620,..._0x1393be});try{_0x16f49e[_0x1c0fef(0x1cb)][_0x1c0fef(0x192)][_0x1c0fef(0x1ea)](_0x55bd98+'\x0a');}catch(_0x39ca8d){}}function runPythonHealthCheck(_0x40b580){const _0x56822e=a0_0x9df455;if(!_0x40b580['dailyDigests']||_0x40b580[_0x56822e(0x1a4)][_0x56822e(0x190)]<0x2)return;const _0x339912=_0x40b580[_0x56822e(0x1a4)]['map'](_0x35ac5d=>{const _0x119a41=_0x56822e,_0x5c7005=(_0x35ac5d[_0x119a41(0x1cf)]||'')[_0x119a41(0x202)]();return ACTIVITY_LEVEL_MAP[_0x5c7005]||0x32;});sendToPython(_0x40b580,_0x56822e(0x17e),{'values':_0x339912,'tag':_0x56822e(0x126)});}function handlePythonResult(_0x28d62f,_0x52defd){const _0xb03f34=a0_0x9df455;if(_0x52defd['type']===_0xb03f34(0x196))_0x28d62f[_0xb03f34(0x13c)]['debug']('üêç\x20Python\x20Pong');else{if(_0x52defd[_0xb03f34(0x169)]===_0xb03f34(0x197)){const {anomaly_score:_0x91f1a3,is_anomaly:_0x5af1eb,threshold:_0x31545c,explanation:_0x57983d}=_0x52defd[_0xb03f34(0x153)];_0x28d62f['log'][_0xb03f34(0x11f)](_0xb03f34(0x9c)+_0x91f1a3[_0xb03f34(0x10b)](0x5)+_0xb03f34(0x1af)+(_0x5af1eb?'ANOMALY':'OK')),_0x28d62f[_0xb03f34(0xd6)](_0xb03f34(0x1d2),{'val':_0x91f1a3,'ack':!![]}),_0x28d62f[_0xb03f34(0xd6)](_0xb03f34(0x172),{'val':new Date()[_0xb03f34(0xfb)](),'ack':!![]});if(_0x31545c)_0x28d62f[_0xb03f34(0xd6)](_0xb03f34(0xd0),{'val':_0x31545c,'ack':!![]});if(_0x5af1eb){let _0x4caf9b=_0xb03f34(0x8a)+_0x91f1a3[_0xb03f34(0x10b)](0x4)+')';if(_0x57983d&&_0x57983d!==_0xb03f34(0x1a0))_0x4caf9b+='\x0aGrund:\x20'+_0x57983d;_0x28d62f[_0xb03f34(0xd6)](_0xb03f34(0xbc),{'val':!![],'ack':!![]}),_0x28d62f[_0xb03f34(0xd6)](_0xb03f34(0xf4),{'val':_0x4caf9b,'ack':!![]}),sendNotification(_0x28d62f,_0xb03f34(0xdf)+_0x4caf9b,![],!![]);}}else{if(_0x52defd[_0xb03f34(0x169)]==='TRAINING_COMPLETE'){const _0x4445bf=_0x52defd[_0xb03f34(0x153)][_0xb03f34(0xa7)]||'',_0x1f8951=_0x52defd[_0xb03f34(0x153)]['threshold'],_0x472bdf=_0x52defd['payload'][_0xb03f34(0x117)]?_0xb03f34(0x200)+new Date()[_0xb03f34(0x1fd)]()+'\x20('+_0x4445bf+')':_0xb03f34(0x7a)+_0x52defd[_0xb03f34(0x153)]['reason'];_0x28d62f[_0xb03f34(0xd6)]('analysis.training.status',{'val':_0x472bdf,'ack':!![]});if(_0x52defd[_0xb03f34(0x153)]['success']&&_0x1f8951)_0x28d62f[_0xb03f34(0xd6)]('analysis.security.currentThreshold',{'val':_0x1f8951,'ack':!![]});}else{if(_0x52defd[_0xb03f34(0x169)]===_0xb03f34(0xa8)){const {patterns:_0xd39a58}=_0x52defd[_0xb03f34(0x153)];if(_0xd39a58&&_0xd39a58[_0xb03f34(0x190)]>0x0){_0x28d62f[_0xb03f34(0x13c)][_0xb03f34(0x11f)](_0xb03f34(0x140)+_0xd39a58[_0xb03f34(0x190)]+'\x20new\x20patterns.'),_0x28d62f[_0xb03f34(0xd6)](_0xb03f34(0x120),{'val':JSON[_0xb03f34(0xeb)](_0xd39a58),'ack':!![]});const _0x1f22e7=_0xd39a58[0x0],_0x33dc57='Regel\x20erkannt:\x20'+_0x1f22e7[_0xb03f34(0xc4)]+'\x20('+(_0x1f22e7[_0xb03f34(0xfc)]*0x64)['toFixed'](0x0)+'%)';_0x28d62f[_0xb03f34(0xd6)]('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),_0x28d62f[_0xb03f34(0xd6)](_0xb03f34(0x1a7),{'val':_0x33dc57,'ack':!![]});}else _0x28d62f[_0xb03f34(0x13c)][_0xb03f34(0x11f)](_0xb03f34(0x129)),_0x28d62f[_0xb03f34(0xd6)](_0xb03f34(0x1ec),{'val':![],'ack':!![]}),_0x28d62f['setStateAsync'](_0xb03f34(0x120),{'val':'[]','ack':!![]});}else{if(_0x52defd[_0xb03f34(0x169)]===_0xb03f34(0x1be)){if(_0x52defd[_0xb03f34(0x153)][_0xb03f34(0x117)])try{const _0x211386=JSON[_0xb03f34(0x1d3)](_0x52defd['payload']['details']);if(_0x211386['insulation'])_0x28d62f[_0xb03f34(0xd6)]('analysis.energy.insulationScore',{'val':JSON[_0xb03f34(0xeb)](_0x211386['insulation']),'ack':!![]});if(_0x211386[_0xb03f34(0x136)])_0x28d62f[_0xb03f34(0xd6)](_0xb03f34(0x1d4),{'val':JSON[_0xb03f34(0xeb)](_0x211386[_0xb03f34(0x136)]),'ack':!![]});}catch(_0x1f146d){}}else{if(_0x52defd[_0xb03f34(0x169)]===_0xb03f34(0x12b)){if(_0x52defd['payload']['success'])_0x28d62f[_0xb03f34(0x13c)][_0xb03f34(0x11f)](_0xb03f34(0x1d1));}else{if(_0x52defd[_0xb03f34(0x169)]===_0xb03f34(0x141))_0x28d62f['setStateAsync']('analysis.health.lastCheck',{'val':new Date()[_0xb03f34(0xfb)](),'ack':!![]}),_0x28d62f[_0xb03f34(0xd6)](_0xb03f34(0x1fa),{'val':_0x52defd[_0xb03f34(0x153)]['is_anomaly'],'ack':!![]});else{if(_0x52defd[_0xb03f34(0x169)]==='TREND_RESULT')_0x28d62f[_0xb03f34(0xd6)](_0xb03f34(0x163),{'val':_0x52defd[_0xb03f34(0x153)][_0xb03f34(0x12f)],'ack':!![]}),_0x28d62f[_0xb03f34(0xd6)](_0xb03f34(0xcb),{'val':_0x52defd[_0xb03f34(0x153)]['change_percent'],'ack':!![]});else{if(_0x52defd[_0xb03f34(0x169)]===_0xb03f34(0x186)){const {speed_trend:_0x212033}=_0x52defd[_0xb03f34(0x153)];if(_0x212033!==undefined)_0x28d62f[_0xb03f34(0xd6)](_0xb03f34(0x1d9),{'val':_0x212033,'ack':!![]});}else{if(_0x52defd[_0xb03f34(0x169)]===_0xb03f34(0x19a)){const {forecast:_0x66b741}=_0x52defd[_0xb03f34(0x153)];if(_0x66b741)_0x28d62f[_0xb03f34(0xd6)](_0xb03f34(0x11e),{'val':JSON[_0xb03f34(0xeb)](_0x66b741),'ack':!![]});}else{if(_0x52defd[_0xb03f34(0x169)]===_0xb03f34(0xe1)){const {data:_0x4ac00c}=_0x52defd[_0xb03f34(0x153)];_0x4ac00c&&(_0x28d62f[_0xb03f34(0x13c)][_0xb03f34(0x11f)](_0xb03f34(0x10a)),_0x28d62f[_0xb03f34(0xd6)](_0xb03f34(0x12d),{'val':JSON['stringify'](_0x4ac00c),'ack':!![]}));}}}}}}}}}}}}function startPythonService(_0x47b296){const _0x400d10=a0_0x9df455;let _0x5c3e2e='python3';if(fs[_0x400d10(0x194)](installer[_0x400d10(0x188)]))_0x5c3e2e=installer[_0x400d10(0x188)];try{const _0x322c41=path[_0x400d10(0x111)](__dirname,_0x400d10(0x18b),_0x400d10(0x12e));_0x47b296[_0x400d10(0x1cb)]=spawn(_0x5c3e2e,[_0x322c41]),_0x47b296['pythonProcess']['stdout']['on'](_0x400d10(0x130),_0x11575f=>{const _0x143a2c=_0x400d10,_0x2ced3a=_0x11575f[_0x143a2c(0x158)]()[_0x143a2c(0x160)]('\x0a');_0x2ced3a[_0x143a2c(0x162)](_0x5d3442=>{const _0x5b4c90=_0x143a2c,_0x5b4a1c=_0x5d3442[_0x5b4c90(0x10f)]();if(!_0x5b4a1c)return;if(_0x5b4a1c[_0x5b4c90(0x1a9)](_0x5b4c90(0x185)))_0x47b296[_0x5b4c90(0x13c)][_0x5b4c90(0xea)]('[PYTHON]\x20'+_0x5b4a1c[_0x5b4c90(0x1f1)](0x5)[_0x5b4c90(0x10f)]());else{if(_0x5b4a1c[_0x5b4c90(0x1a9)](_0x5b4c90(0xe7)))try{const _0x2a5c10=JSON['parse'](_0x5b4a1c[_0x5b4c90(0x1f1)](0x8)[_0x5b4c90(0x10f)]());handlePythonResult(_0x47b296,_0x2a5c10);}catch(_0x140c3c){}}});}),_0x47b296['pythonProcess']['on']('close',_0xab00f0=>{const _0x3abeb7=_0x400d10;_0x47b296[_0x3abeb7(0x1cb)]=null;});}catch(_0x4f34af){_0x47b296['log'][_0x400d10(0x17f)](_0x400d10(0x1b7)+_0x4f34af['message']);}}async function runAutopilot(_0x1d9e92){const _0x1f16d2=a0_0x9df455;_0x1d9e92[_0x1f16d2(0x13c)][_0x1f16d2(0xea)](_0x1f16d2(0x98)),await runGeminiAnalysis(_0x1d9e92),updateHealthVector(_0x1d9e92),triggerGaitAnalysis(_0x1d9e92),triggerEnergyPrediction(_0x1d9e92);}async function triggerGaitAnalysis(_0xb1a1ae){const _0x40838e=a0_0x9df455;if(!_0xb1a1ae[_0x40838e(0x148)])return;try{const _0x2160ae=await _0xb1a1ae['getStateAsync'](_0x40838e(0x1e6));_0x2160ae&&_0x2160ae[_0x40838e(0x1ac)]&&sendToPython(_0xb1a1ae,_0x40838e(0x101),{'sequences':JSON['parse'](_0x2160ae['val'])});}catch(_0x3e76a4){}}async function triggerEnergyPrediction(_0x27707d){const _0x30ec0b=a0_0x9df455;if(!_0x27707d[_0x30ec0b(0x148)])return;try{const _0x355b1d=await getOutsideTemperatureNumeric(_0x27707d);if(_0x355b1d===null)return;const _0x1df11e={},_0x5320c5=_0x27707d['config'][_0x30ec0b(0xca)]||[];for(const _0x2a4430 of _0x5320c5){if(_0x2a4430['type']===_0x30ec0b(0x19c)&&_0x2a4430[_0x30ec0b(0x1e3)]){const _0x5a3795=_0x27707d['sensorLastValues'][_0x2a4430['id']];if(_0x5a3795!==undefined)_0x1df11e[_0x2a4430[_0x30ec0b(0x1e3)]]=_0x5a3795;}}Object[_0x30ec0b(0xc0)](_0x1df11e)[_0x30ec0b(0x190)]>0x0&&sendToPython(_0x27707d,'PREDICT_ENERGY',{'current_temps':_0x1df11e,'t_out':_0x355b1d});}catch(_0x551e39){}}function updateHealthVector(_0x2ff8ef){const _0x572a4e=a0_0x9df455;if(!_0x2ff8ef[_0x572a4e(0xf3)]||_0x2ff8ef[_0x572a4e(0xf3)][_0x572a4e(0x190)]===0x0)return;const _0x429e5b=new Array(0x60)['fill'](0x0),_0x216675=new Date()[_0x572a4e(0x1c9)](0x0,0x0,0x0,0x0);_0x2ff8ef[_0x572a4e(0xf3)][_0x572a4e(0x162)](_0x40004f=>{const _0x1eb00a=_0x572a4e,_0x34caec=new Date(_0x40004f[_0x1eb00a(0xa9)]);if(_0x34caec['getTime']()>=_0x216675){const _0x2478f1=_0x34caec['getHours'](),_0x3d4bea=_0x34caec[_0x1eb00a(0x8c)](),_0x5e7afc=_0x2478f1*0x4+Math[_0x1eb00a(0x11a)](_0x3d4bea/0xf);if(_0x5e7afc>=0x0&&_0x5e7afc<0x60)_0x429e5b[_0x5e7afc]++;}}),_0x2ff8ef[_0x572a4e(0xd6)](_0x572a4e(0xe3),{'val':JSON['stringify'](_0x429e5b),'ack':!![]});}async function getWeatherContext(_0x597165){const _0x40bc75=a0_0x9df455;if(!_0x597165[_0x40bc75(0x17a)][_0x40bc75(0x13d)]||!_0x597165['config'][_0x40bc75(0x8d)])return _0x40bc75(0x14e);try{const _0x24338c=_0x597165['config'][_0x40bc75(0x8d)];let _0x89aab6=await _0x597165[_0x40bc75(0x1df)](_0x24338c+_0x40bc75(0xf7));if(!_0x89aab6)_0x89aab6=await _0x597165[_0x40bc75(0x1df)](_0x24338c+_0x40bc75(0x156));let _0x49c87b=await _0x597165[_0x40bc75(0x1df)](_0x24338c+'.Current.WeatherText');if(!_0x49c87b)_0x49c87b=await _0x597165[_0x40bc75(0x1df)](_0x24338c+_0x40bc75(0x1b6));if(_0x89aab6&&_0x49c87b)return _0x89aab6[_0x40bc75(0x1ac)]+'¬∞C,\x20'+_0x49c87b[_0x40bc75(0x1ac)];}catch(_0x1b5a0a){}return _0x40bc75(0x77);}async function getCalendarContext(_0x1bcf52){const _0x5d8451=a0_0x9df455;if(!_0x1bcf52['config']['useCalendar']||!_0x1bcf52[_0x5d8451(0x17a)][_0x5d8451(0x168)])return _0x5d8451(0x1bc);return _0x5d8451(0x106);}async function getCalendarNames(_0x2b2895,_0xd8d2ee){return[];}async function saveFeedback(_0x37b752,_0x2576e4){const _0x133d56=a0_0x9df455;_0x37b752['log'][_0x133d56(0x11f)]('üìù\x20Feedback\x20received:\x20'+_0x2576e4['rating']);}async function runGeminiAnalysis(_0x4b894e,_0x5d588b=''){const _0x889ef0=a0_0x9df455;if(!_0x4b894e[_0x889ef0(0x7e)])return;if(_0x4b894e[_0x889ef0(0x1f8)]['length']===0x0)return;const _0x5aaad5=_0x4b894e[_0x889ef0(0x1f8)][_0x889ef0(0x100)](0x0,0xf),_0x195cd1=await getWeatherContext(_0x4b894e),_0x1e8289=_0x4b894e['currentSystemMode'],_0x3ba0c4=PERSONA_MAPPING[_0x4b894e['config']['aiPersona']||_0x889ef0(0x147)],_0x539b10=_0x4b894e['config'][_0x889ef0(0x1b2)]||'Keine\x20Details.';let _0x167c39=_0x889ef0(0xb9);try{const _0x222f2e=await _0x4b894e['getStateAsync'](_0x889ef0(0xaf));if(_0x222f2e&&_0x222f2e[_0x889ef0(0x1ac)])_0x167c39=_0x222f2e['val'];}catch(_0x1737af){}let _0xf7ed99=![];try{const _0x494405=await _0x4b894e[_0x889ef0(0xb2)]('analysis.automation.autoApply');if(_0x494405&&_0x494405[_0x889ef0(0x1ac)])_0xf7ed99=!![];}catch(_0x34c180){}const _0x48fc4b=_0x889ef0(0xf9)+_0x3ba0c4+_0x889ef0(0x116)+_0x539b10+_0x889ef0(0x1eb)+_0x1e8289+_0x889ef0(0xe5)+_0x195cd1+_0x889ef0(0x78)+_0x167c39+'.\x20EVENTS:\x20'+JSON[_0x889ef0(0xeb)](_0x5aaad5)+_0x889ef0(0xe4)+_0x5d588b+'.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}';try{const _0xfcce8b=await _0x4b894e[_0x889ef0(0x7e)][_0x889ef0(0xcf)](_0x48fc4b),_0x6de446=JSON[_0x889ef0(0x1d3)](_0xfcce8b[_0x889ef0(0x1ce)][_0x889ef0(0xd8)]()[_0x889ef0(0x1ff)](/```json|```/g,'')['trim']());await _0x4b894e[_0x889ef0(0xd6)](_0x889ef0(0xbb),{'val':JSON[_0x889ef0(0xeb)](_0x6de446),'ack':!![]});if(_0x6de446[_0x889ef0(0x16f)])await _0x4b894e['setStateAsync']('analysis.activitySummary',{'val':_0x6de446[_0x889ef0(0x16f)],'ack':!![]});const _0x3753d9={'timestamp':Date['now'](),'id':Date[_0x889ef0(0x184)]()[_0x889ef0(0x158)](),'analysis':{'activity':{'summary':_0x6de446[_0x889ef0(0x16f)],'isAlert':_0x6de446[_0x889ef0(0x83)],'alertReason':_0x6de446['alertReason']},'comfort':{'automationProposal':_0x6de446[_0x889ef0(0x155)]}}};await updateAnalysisHistory(_0x4b894e,_0x3753d9);const _0xd6c0d5=_0x6de446[_0x889ef0(0x83)]||![];_0xd6c0d5!==_0x4b894e[_0x889ef0(0x1de)]&&(await _0x4b894e[_0x889ef0(0xd6)]('analysis.isAlert',{'val':_0xd6c0d5,'ack':!![]}),_0x4b894e[_0x889ef0(0x1de)]=_0xd6c0d5,_0xd6c0d5&&(await _0x4b894e[_0x889ef0(0xd6)](_0x889ef0(0xf4),{'val':_0x6de446[_0x889ef0(0x9b)],'ack':!![]}),sendNotification(_0x4b894e,_0x889ef0(0x95)+_0x6de446[_0x889ef0(0x9b)],![],_0x6de446[_0x889ef0(0x17c)])));if(_0x6de446[_0x889ef0(0x155)]&&_0x6de446[_0x889ef0(0x155)][_0x889ef0(0x118)]){await _0x4b894e[_0x889ef0(0xd6)]('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),await _0x4b894e[_0x889ef0(0xd6)](_0x889ef0(0x1a7),{'val':_0x6de446[_0x889ef0(0x155)]['description'],'ack':!![]}),await _0x4b894e[_0x889ef0(0xd6)](_0x889ef0(0x132),{'val':_0x6de446[_0x889ef0(0x155)][_0x889ef0(0x13a)],'ack':!![]}),await _0x4b894e[_0x889ef0(0xd6)]('analysis.automation.targetValue',{'val':JSON[_0x889ef0(0xeb)](_0x6de446[_0x889ef0(0x155)]['targetValue']),'ack':!![]});if(_0xf7ed99)executeAutomationAction(_0x4b894e);}}catch(_0x6b61dd){_0x4b894e['log']['error'](_0x889ef0(0x11c)+_0x6b61dd[_0x889ef0(0xaa)]);}}async function startSystem(_0x2834d1){const _0x3d18fc=a0_0x9df455;_0x2834d1['log'][_0x3d18fc(0x11f)](_0x3d18fc(0x18a)),await initZombies(_0x2834d1);try{_0x2834d1[_0x3d18fc(0x148)]=await checkLicense(_0x2834d1['config'][_0x3d18fc(0x17d)]);}catch(_0x48d364){}if(!_0x2834d1['config']['inactivityThresholdHours']||_0x2834d1['config'][_0x3d18fc(0x89)]<0.1)_0x2834d1[_0x3d18fc(0x17a)][_0x3d18fc(0x89)]=0xc;await initHistory(_0x2834d1),await initSystemConfig(_0x2834d1);if(_0x2834d1[_0x3d18fc(0x17a)][_0x3d18fc(0xec)])try{_0x2834d1[_0x3d18fc(0x1ab)]=new GoogleGenerativeAI(_0x2834d1['config']['geminiApiKey']),_0x2834d1[_0x3d18fc(0x7e)]=_0x2834d1[_0x3d18fc(0x1ab)][_0x3d18fc(0x1ae)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':'application/json'}}),_0x2834d1[_0x3d18fc(0x13c)]['info']('Gemini\x20AI\x20initialized.');}catch(_0x19606b){_0x2834d1[_0x3d18fc(0x13c)][_0x3d18fc(0x17f)]('Gemini\x20Init\x20Error:\x20'+_0x19606b[_0x3d18fc(0xaa)]);}await createAllObjects(_0x2834d1),await loadSystemMode(_0x2834d1),await loadRawEventLog(_0x2834d1),await loadDailyDigests(_0x2834d1),_0x2834d1[_0x3d18fc(0xce)]('analysis.trigger'),_0x2834d1['subscribeStates'](LTM_DP_TRIGGER_DIGEST),_0x2834d1[_0x3d18fc(0xce)]('system.mode'),_0x2834d1['subscribeStates'](_0x3d18fc(0xba)),_0x2834d1['subscribeStates'](_0x3d18fc(0x157)),_0x2834d1[_0x3d18fc(0xce)]('analysis.automation.autoApply'),_0x2834d1['subscribeStates']('analysis.training.triggerSecurity'),_0x2834d1[_0x3d18fc(0xce)](_0x3d18fc(0xd1)),_0x2834d1[_0x3d18fc(0xce)](_0x3d18fc(0x1b9)),_0x2834d1[_0x3d18fc(0xce)](_0x3d18fc(0xc7)),_0x2834d1[_0x3d18fc(0xce)](_0x3d18fc(0xef)),await initSensorSubscriptions(_0x2834d1),await initPresenceSubscriptions(_0x2834d1),await setupTelegramListener(_0x2834d1),setTimeout(()=>checkWifiPresence(_0x2834d1),0x1388);if(_0x2834d1[_0x3d18fc(0x128)])clearInterval(_0x2834d1[_0x3d18fc(0x128)]);const _0x1154ed=_0x2834d1[_0x3d18fc(0x17a)][_0x3d18fc(0xd2)]||0xf;_0x1154ed>0x0&&(_0x2834d1[_0x3d18fc(0x128)]=setInterval(()=>{runAutopilot(_0x2834d1);},_0x1154ed*0x3c*0x3e8)),schedulers['setupLtmScheduler'](_0x2834d1,()=>createDailyDigest(_0x2834d1)),schedulers[_0x3d18fc(0x177)](_0x2834d1),schedulers[_0x3d18fc(0x138)](_0x2834d1,()=>runBaselineDriftAnalysis(_0x2834d1)),schedulers['setupBriefingScheduler'](_0x2834d1,()=>sendMorningBriefing(_0x2834d1)),startPythonService(_0x2834d1),setTimeout(()=>{const _0x53b61a=_0x3d18fc;_0x2834d1[_0x53b61a(0x1cb)]&&(runPythonHealthCheck(_0x2834d1),triggerGaitAnalysis(_0x2834d1),triggerEnergyPrediction(_0x2834d1)),updateHealthVector(_0x2834d1);},0x1388);}class CogniLiving extends utils[a0_0x9df455(0xdb)]{constructor(_0x15f203){const _0xc512d7=a0_0x9df455;super({..._0x15f203,'name':'cogni-living'}),this[_0xc512d7(0x1f8)]=[],this['analysisHistory']=[],this[_0xc512d7(0xf3)]=[],this['dailyDigests']=[],this[_0xc512d7(0x1dc)]={},this[_0xc512d7(0x150)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0xc512d7(0x1cd)]=!![],this['exitTimer']=null,this[_0xc512d7(0xc9)]=null,this[_0xc512d7(0x1dd)]=![],this['genAI']=null,this[_0xc512d7(0x7e)]=null,this[_0xc512d7(0x1bd)]=SYSTEM_MODES[_0xc512d7(0x127)],this[_0xc512d7(0x148)]=![],this['lastAlertState']=![],this[_0xc512d7(0x93)]='unknown',this['analysisTimer']=null,this[_0xc512d7(0x1e1)]=null,this['modeResetJob']=null,this['driftAnalysisTimer']=null,this[_0xc512d7(0x86)]=null,this[_0xc512d7(0x1cb)]=null,this[_0xc512d7(0xfd)]=![],this['on'](_0xc512d7(0xc6),this[_0xc512d7(0x87)][_0xc512d7(0xb8)](this)),this['on']('stateChange',this[_0xc512d7(0x19b)][_0xc512d7(0xb8)](this)),this['on'](_0xc512d7(0x96),this[_0xc512d7(0x1e5)][_0xc512d7(0xb8)](this)),this['on'](_0xc512d7(0xaa),this[_0xc512d7(0x9d)][_0xc512d7(0xb8)](this));}async[a0_0x9df455(0x87)](){const _0x2abf94=a0_0x9df455;this['log'][_0x2abf94(0x11f)]('cogni-living\x20adapter\x20starting\x20(v'+this[_0x2abf94(0x12c)]+_0x2abf94(0xd3));if(!installer[_0x2abf94(0x107)](this,()=>startSystem(this)))return;}[a0_0x9df455(0x1e5)](_0xb948a6){const _0x149a6b=a0_0x9df455;if(this[_0x149a6b(0x128)])clearInterval(this['analysisTimer']);if(this['driftAnalysisTimer'])clearInterval(this[_0x149a6b(0xad)]);if(this[_0x149a6b(0x1e1)])this[_0x149a6b(0x1e1)][_0x149a6b(0x14b)]();if(this[_0x149a6b(0x8f)])this['modeResetJob']['cancel']();if(this[_0x149a6b(0x86)])this[_0x149a6b(0x86)][_0x149a6b(0x14b)]();if(this[_0x149a6b(0x1b0)])clearTimeout(this['exitTimer']);if(this[_0x149a6b(0xc9)])clearTimeout(this['exitGraceTimer']);stopPythonService(this),_0xb948a6();}async['onStateChange'](_0x466839,_0x2e8dfb){const _0x16096c=a0_0x9df455;if(!_0x2e8dfb||this[_0x16096c(0xfd)])return;if(_0x466839['includes']('telegram')&&_0x466839[_0x16096c(0x99)]('communicate.request')&&_0x2e8dfb['val']){await handleTelegramResponse(this,_0x2e8dfb[_0x16096c(0x1ac)]);return;}if(_0x466839===this[_0x16096c(0x90)]+'.'+SYSTEM_DP_MODE){if(_0x2e8dfb[_0x16096c(0x1ac)]&&Object[_0x16096c(0x11b)](SYSTEM_MODES)[_0x16096c(0x1c2)](_0x2e8dfb[_0x16096c(0x1ac)])){this[_0x16096c(0x1bd)]=_0x2e8dfb[_0x16096c(0x1ac)];if(_0x2e8dfb[_0x16096c(0x1ac)]===SYSTEM_MODES['VACATION'])await setPresence(this,![]);else await setPresence(this,!![]);}if(!_0x2e8dfb['ack'])this['setState'](_0x466839,{'val':this[_0x16096c(0x1bd)],'ack':!![]});return;}if(!_0x2e8dfb[_0x16096c(0xe0)]){_0x466839[_0x16096c(0x1c2)](_0x16096c(0x1a2))&&_0x2e8dfb[_0x16096c(0x1ac)]&&(this[_0x16096c(0x187)](_0x466839,{'val':![],'ack':!![]}),runGeminiAnalysis(this));if(_0x466839['includes'](_0x16096c(0x1fe))&&_0x2e8dfb[_0x16096c(0x1ac)]){this[_0x16096c(0x187)](_0x466839,{'val':![],'ack':!![]});if(this[_0x16096c(0x148)])createDailyDigest(this);}_0x466839[_0x16096c(0x1c2)](_0x16096c(0xde))&&_0x2e8dfb['val']&&(this[_0x16096c(0x187)](_0x466839,{'val':![],'ack':!![]}),sendMorningBriefing(this));_0x466839[_0x16096c(0x1c2)]('automation.triggerAction')&&_0x2e8dfb['val']&&(this[_0x16096c(0x187)](_0x466839,{'val':![],'ack':!![]}),executeAutomationAction(this));if(_0x466839['includes'](_0x16096c(0x191))&&_0x2e8dfb[_0x16096c(0x1ac)]){this['setState'](_0x466839,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x3edd92=await this[_0x16096c(0xb2)]('LTM.trainingData.sequences');if(_0x3edd92&&_0x3edd92[_0x16096c(0x1ac)]){const _0x145dea=JSON[_0x16096c(0x1d3)](_0x3edd92[_0x16096c(0x1ac)]);this[_0x16096c(0x13c)][_0x16096c(0x11f)](_0x16096c(0x1c5)),this['setStateAsync'](_0x16096c(0x79),{'val':_0x16096c(0xf2),'ack':!![]}),sendToPython(this,'TRAIN_SECURITY',{'sequences':_0x145dea});}}catch(_0x2ed2df){this[_0x16096c(0x13c)][_0x16096c(0x17f)]('Training\x20Error:\x20'+_0x2ed2df[_0x16096c(0xaa)]);}}if(_0x466839['includes']('analysis.training.triggerHealth')&&_0x2e8dfb[_0x16096c(0x1ac)]){this['setState'](_0x466839,{'val':![],'ack':!![]});if(this[_0x16096c(0x148)])try{const _0x387107=await this[_0x16096c(0xb2)](LTM_DP_DAILY_DIGESTS);if(_0x387107&&_0x387107['val'])sendToPython(this,_0x16096c(0xd4),{'digests':JSON[_0x16096c(0x1d3)](_0x387107[_0x16096c(0x1ac)])});}catch(_0x302177){}}if(_0x466839[_0x16096c(0x1c2)]('analysis.training.triggerEnergy')&&_0x2e8dfb[_0x16096c(0x1ac)]){this[_0x16096c(0x187)](_0x466839,{'val':![],'ack':!![]});if(this[_0x16096c(0x148)])try{const _0x8675c6=await this[_0x16096c(0xb2)](_0x16096c(0xb1));if(_0x8675c6&&_0x8675c6[_0x16096c(0x1ac)])sendToPython(this,_0x16096c(0xc5),{'points':JSON[_0x16096c(0x1d3)](_0x8675c6[_0x16096c(0x1ac)])});}catch(_0x142c43){}}if(_0x466839[_0x16096c(0x1c2)](_0x16096c(0xc7))&&_0x2e8dfb[_0x16096c(0x1ac)]){this[_0x16096c(0x187)](_0x466839,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x3b273f=await this[_0x16096c(0xb2)](LTM_DP_RAW_LOG);_0x3b273f&&_0x3b273f[_0x16096c(0x1ac)]&&(this[_0x16096c(0x13c)][_0x16096c(0x11f)]('üõãÔ∏è\x20Triggering\x20Comfort\x20Analysis\x20(Pattern\x20Mining)...'),sendToPython(this,'TRAIN_COMFORT',{'events':JSON['parse'](_0x3b273f[_0x16096c(0x1ac)])}));}catch(_0x56f97e){}}if(_0x466839['includes'](_0x16096c(0xef))&&_0x2e8dfb[_0x16096c(0x1ac)]){this[_0x16096c(0x187)](_0x466839,{'val':![],'ack':!![]});if(this[_0x16096c(0x148)])try{const _0x125719=await this[_0x16096c(0xb2)](_0x16096c(0x1e6));if(_0x125719&&_0x125719[_0x16096c(0x1ac)]){const _0x43dc41=JSON['parse'](_0x125719[_0x16096c(0x1ac)]);this[_0x16096c(0x13c)][_0x16096c(0x11f)]('üï∏Ô∏è\x20Building\x20Topology\x20Matrix...'),sendToPython(this,_0x16096c(0x13f),{'sequences':_0x43dc41});}}catch(_0x2b705b){this[_0x16096c(0x13c)][_0x16096c(0x17f)]('Topology\x20Error:\x20'+_0x2b705b[_0x16096c(0xaa)]);}}return;}if(this[_0x16096c(0x17a)]['presenceDevices']&&this[_0x16096c(0x17a)][_0x16096c(0x1f3)][_0x16096c(0x1c2)](_0x466839)){await checkWifiPresence(this);return;}const _0x2075aa=(this[_0x16096c(0x17a)]['devices']||[])[_0x16096c(0x139)](_0x571ff9=>_0x571ff9['id']===_0x466839);if(_0x2075aa)processSensorEvent(this,_0x466839,_0x2e8dfb,_0x2075aa);}async[a0_0x9df455(0x9d)](_0x31fc42){const _0x546063=a0_0x9df455;if(typeof _0x31fc42===_0x546063(0x1a8)&&_0x31fc42['message']){if(_0x31fc42[_0x546063(0x1c8)]===_0x546063(0x16a)){const _0x409b81=_0x31fc42[_0x546063(0xaa)]['apiKey']||this[_0x546063(0x17a)][_0x546063(0xec)];if(!_0x409b81)return this[_0x546063(0x1d8)](_0x31fc42[_0x546063(0x1c0)],_0x31fc42['command'],{'success':![],'message':_0x546063(0x182)},_0x31fc42[_0x546063(0x18f)]);try{const _0x204197=new GoogleGenerativeAI(_0x409b81),_0x2967d3=_0x204197[_0x546063(0x1ae)]({'model':GEMINI_MODEL}),_0x465c74=await _0x2967d3['generateContent']('Hi');this[_0x546063(0x1d8)](_0x31fc42[_0x546063(0x1c0)],_0x31fc42[_0x546063(0x1c8)],{'success':!![],'message':_0x546063(0x16b)+_0x465c74[_0x546063(0x1ce)]['text']()},_0x31fc42[_0x546063(0x18f)]);}catch(_0x477899){this[_0x546063(0x1d8)](_0x31fc42['from'],_0x31fc42[_0x546063(0x1c8)],{'success':![],'message':'Err:\x20'+_0x477899[_0x546063(0xaa)]},_0x31fc42[_0x546063(0x18f)]);}}else{if(_0x31fc42[_0x546063(0x1c8)]===_0x546063(0x16c)){const _0x436465=await getWeatherContext(this),_0x26f655=await getCalendarContext(this);this[_0x546063(0x1d8)](_0x31fc42[_0x546063(0x1c0)],_0x31fc42['command'],{'success':!![],'weather':_0x436465,'calendar':_0x26f655},_0x31fc42[_0x546063(0x18f)]);}else{if(_0x31fc42[_0x546063(0x1c8)]==='getLtmData'){if(!this[_0x546063(0x148)])return this['sendTo'](_0x31fc42[_0x546063(0x1c0)],_0x31fc42['command'],{'success':![],'isPro':![]},_0x31fc42[_0x546063(0x18f)]);let _0x57646a={'status':_0x546063(0xe9)};try{const _0x5a4341=await this[_0x546063(0xb2)](LTM_DP_DRIFT_STATUS);_0x57646a[_0x546063(0x143)]=_0x5a4341?_0x5a4341[_0x546063(0x1ac)]:'N/A';}catch(_0x4a7fd0){}this[_0x546063(0x1d8)](_0x31fc42[_0x546063(0x1c0)],_0x31fc42['command'],{'success':!![],'isPro':!![],'dailyDigests':this[_0x546063(0x1a4)],'driftAnalysis':_0x57646a,'analysisHistory':this['analysisHistory']},_0x31fc42[_0x546063(0x18f)]);}else{if(_0x31fc42[_0x546063(0x1c8)]==='getOverviewData'){const _0x1bc5bf=this[_0x546063(0x1a4)][_0x546063(0x190)],_0x5e873d=new Date(),_0x1ecc24=new Date(_0x5e873d['getFullYear'](),_0x5e873d[_0x546063(0x137)](),_0x5e873d[_0x546063(0x1f7)]())[_0x546063(0xb7)](),_0x1637ba=this[_0x546063(0xf3)][_0x546063(0x123)](_0x3e567d=>new Date(_0x3e567d['timestamp'])[_0x546063(0xb7)]()>_0x1ecc24)[_0x546063(0x190)],_0x4850a5=new Array(0x18)[_0x546063(0x152)](0x0);this[_0x546063(0xf3)][_0x546063(0x162)](_0x47c4c6=>{const _0x4ca9e2=_0x546063,_0x3cabe1=new Date(_0x47c4c6[_0x4ca9e2(0xa9)]);if(_0x3cabe1[_0x4ca9e2(0xb7)]()>_0x1ecc24)_0x4850a5[_0x3cabe1[_0x4ca9e2(0x1d5)]()]++;});let _0x5111e9={'status':_0x546063(0xe9)};try{const _0x2c2c35=await this['getStateAsync'](LTM_DP_DRIFT_STATUS);_0x5111e9[_0x546063(0x143)]=_0x2c2c35?_0x2c2c35[_0x546063(0x1ac)]:'N/A';}catch(_0x122ee2){}let _0x50d18d='';try{const _0x182890=await this[_0x546063(0xb2)](_0x546063(0xaf));_0x50d18d=_0x182890?_0x182890['val']:'';}catch(_0x4e5a31){}let _0x34b616=null;!this['geminiModel']&&(_0x34b616=this['config'][_0x546063(0xec)]?_0x546063(0x94):_0x546063(0xc3));let _0x2360eb={'detected':![],'description':'','targetId':'','targetValue':'','autoApply':![]};try{const _0x3de3e4=await this[_0x546063(0xb2)](_0x546063(0x1ec));if(_0x3de3e4&&_0x3de3e4['val']){_0x2360eb[_0x546063(0x118)]=!![];const _0xe79d86=await this[_0x546063(0xb2)]('analysis.automation.description');_0x2360eb[_0x546063(0x13e)]=_0xe79d86?_0xe79d86[_0x546063(0x1ac)]:'';const _0x3b665f=await this[_0x546063(0xb2)]('analysis.automation.targetId');_0x2360eb[_0x546063(0x13a)]=_0x3b665f?_0x3b665f[_0x546063(0x1ac)]:'';const _0x4fc0fd=await this[_0x546063(0xb2)](_0x546063(0x181));_0x2360eb[_0x546063(0xa6)]=_0x4fc0fd?_0x4fc0fd['val']:'';}const _0x6113de=await this[_0x546063(0xb2)]('analysis.automation.autoApply');_0x2360eb['autoApply']=_0x6113de?!!_0x6113de['val']:![];}catch(_0x5b4887){}this[_0x546063(0x1d8)](_0x31fc42['from'],_0x31fc42[_0x546063(0x1c8)],{'success':!![],'eventHistory':this['eventHistory'][_0x546063(0x100)](0x0,0xf),'stats':{'digestCount':_0x1bc5bf,'eventCountToday':_0x1637ba,'hourlyActivity':_0x4850a5,'driftStatus':_0x5111e9['status'],'isPresent':this[_0x546063(0x1cd)],'presenceWho':_0x50d18d,'minDays':this[_0x546063(0x17a)]['minDaysForBaseline']||0x7,'stbDays':this[_0x546063(0x17a)]['ltmStbWindowDays']||0xe,'ltbDays':this[_0x546063(0x17a)]['ltmLtbWindowDays']||0x3c,'systemError':_0x34b616},'automation':_0x2360eb},_0x31fc42['callback']);}else{if(_0x31fc42[_0x546063(0x1c8)]==='scanDevices')try{const _0x14e4b1=await scanner[_0x546063(0x16d)](this,_0x31fc42['message']||{});this[_0x546063(0x1d8)](_0x31fc42[_0x546063(0x1c0)],_0x31fc42[_0x546063(0x1c8)],{'success':!![],'devices':_0x14e4b1},_0x31fc42[_0x546063(0x18f)]);}catch(_0x542305){this[_0x546063(0x1d8)](_0x31fc42[_0x546063(0x1c0)],_0x31fc42[_0x546063(0x1c8)],{'success':![],'error':_0x542305[_0x546063(0xaa)]},_0x31fc42[_0x546063(0x18f)]);}else{if(_0x31fc42[_0x546063(0x1c8)]==='getEnums'){const _0x15f3d4=await this[_0x546063(0x109)]('enum.functions.*','enum'),_0x537c17=[];if(_0x15f3d4)for(const _0x5e71d1 in _0x15f3d4){const _0x563438=_0x15f3d4[_0x5e71d1],_0x31baf8=(_0x563438[_0x546063(0x15c)]&&typeof _0x563438[_0x546063(0x15c)][_0x546063(0x1b1)]==='object'?_0x563438[_0x546063(0x15c)][_0x546063(0x1b1)]['de']:_0x563438[_0x546063(0x15c)][_0x546063(0x1b1)])||_0x563438[_0x546063(0x15c)]['name'];_0x537c17[_0x546063(0xac)]({'id':_0x5e71d1,'name':_0x31baf8});}const _0xaa681c=await this['getForeignObjectsAsync'](_0x546063(0x189),_0x546063(0x97)),_0x671338=[];if(_0xaa681c)for(const _0x365e1a in _0xaa681c){const _0x4320a3=_0xaa681c[_0x365e1a],_0x5e61a9=(_0x4320a3[_0x546063(0x15c)]&&typeof _0x4320a3[_0x546063(0x15c)][_0x546063(0x1b1)]===_0x546063(0x1a8)?_0x4320a3[_0x546063(0x15c)][_0x546063(0x1b1)]['de']:_0x4320a3[_0x546063(0x15c)]['name'])||_0x365e1a['split']('.')[_0x546063(0x122)]();_0x671338[_0x546063(0xac)](_0x5e61a9);}this[_0x546063(0x1d8)](_0x31fc42[_0x546063(0x1c0)],_0x31fc42[_0x546063(0x1c8)],{'success':!![],'enums':_0x537c17,'rooms':_0x671338},_0x31fc42[_0x546063(0x18f)]);}else{if(_0x31fc42[_0x546063(0x1c8)]===_0x546063(0xe8)){const _0x476ed2=_0x31fc42[_0x546063(0xaa)][_0x546063(0x1f5)];if(!_0x476ed2)return this[_0x546063(0x1d8)](_0x31fc42[_0x546063(0x1c0)],_0x31fc42[_0x546063(0x1c8)],{'success':![],'error':'No\x20instance'},_0x31fc42[_0x546063(0x18f)]);const _0x214a6e=await getCalendarNames(this,_0x476ed2);this[_0x546063(0x1d8)](_0x31fc42[_0x546063(0x1c0)],_0x31fc42[_0x546063(0x1c8)],{'success':!![],'names':_0x214a6e},_0x31fc42[_0x546063(0x18f)]);}else{if(_0x31fc42[_0x546063(0x1c8)]===_0x546063(0x12a)){const {targetId:_0x277c83,targetValue:_0x17a1f4}=_0x31fc42['message'];this[_0x546063(0x13c)]['info']('üß™\x20Simulating\x20Butler\x20Proposal:\x20'+_0x277c83+'\x20=\x20'+_0x17a1f4),await this['setStateAsync'](_0x546063(0x1ec),{'val':!![],'ack':!![]}),await this[_0x546063(0xd6)](_0x546063(0x1a7),{'val':'SIMULATION:\x20Test-Vorschlag\x20f√ºr\x20'+_0x277c83,'ack':!![]}),await this[_0x546063(0xd6)](_0x546063(0x132),{'val':_0x277c83,'ack':!![]}),await this[_0x546063(0xd6)](_0x546063(0x181),{'val':_0x17a1f4,'ack':!![]}),this[_0x546063(0x1d8)](_0x31fc42['from'],_0x31fc42[_0x546063(0x1c8)],{'success':!![]},_0x31fc42[_0x546063(0x18f)]);}else{if(_0x31fc42[_0x546063(0x1c8)]===_0x546063(0x154)){const {historyId:_0x506459,rating:_0x1da95b,comment:_0x51713a,alertReason:_0x5262e3}=_0x31fc42[_0x546063(0xaa)];_0x506459&&_0x1da95b?(await saveFeedback(this,{'timestamp':Date[_0x546063(0x184)](),'historyId':_0x506459,'rating':_0x1da95b,'comment':_0x51713a,'alertReason':_0x5262e3}),this[_0x546063(0x1d8)](_0x31fc42[_0x546063(0x1c0)],_0x31fc42[_0x546063(0x1c8)],{'success':!![]},_0x31fc42[_0x546063(0x18f)])):this['sendTo'](_0x31fc42[_0x546063(0x1c0)],_0x31fc42['command'],{'success':![],'error':'Missing\x20data'},_0x31fc42[_0x546063(0x18f)]);}else _0x31fc42[_0x546063(0x1c8)]==='dismissAutomation'&&(this[_0x546063(0x13c)][_0x546063(0x11f)](_0x546063(0x14c)),await this[_0x546063(0xd6)](_0x546063(0x1ec),{'val':![],'ack':!![]}),await this[_0x546063(0xd6)](_0x546063(0x1a7),{'val':'','ack':!![]}),this[_0x546063(0x1d8)](_0x31fc42[_0x546063(0x1c0)],_0x31fc42[_0x546063(0x1c8)],{'success':!![]},_0x31fc42[_0x546063(0x18f)]));}}}}}}}}}}}if(require[a0_0x9df455(0x173)]!==module)module[a0_0x9df455(0x13b)]=_0x367e06=>new CogniLiving(_0x367e06);else new CogniLiving();