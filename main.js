const a0_0x3aab6d=a0_0x1ad8;(function(_0x21a83b,_0x19c74a){const _0x40ffd3=a0_0x1ad8,_0x38d938=_0x21a83b();while(!![]){try{const _0x51cf55=parseInt(_0x40ffd3(0x154))/0x1*(parseInt(_0x40ffd3(0xc6))/0x2)+parseInt(_0x40ffd3(0x90))/0x3+-parseInt(_0x40ffd3(0x10a))/0x4*(parseInt(_0x40ffd3(0xbf))/0x5)+parseInt(_0x40ffd3(0xa6))/0x6*(-parseInt(_0x40ffd3(0x134))/0x7)+parseInt(_0x40ffd3(0xfd))/0x8*(-parseInt(_0x40ffd3(0xb6))/0x9)+-parseInt(_0x40ffd3(0xef))/0xa+parseInt(_0x40ffd3(0xf7))/0xb*(parseInt(_0x40ffd3(0x149))/0xc);if(_0x51cf55===_0x19c74a)break;else _0x38d938['push'](_0x38d938['shift']());}catch(_0x10c12e){_0x38d938['push'](_0x38d938['shift']());}}}(a0_0x7c7b,0xbb894));function a0_0x1ad8(_0x2e6335,_0x40c319){const _0x27c16f=a0_0x7c7b();return a0_0x1ad8=function(_0x14463e,_0x27795f){_0x14463e=_0x14463e-0x81;let _0x7c7bcf=_0x27c16f[_0x14463e];return _0x7c7bcf;},a0_0x1ad8(_0x2e6335,_0x40c319);}const a0_0x27795f=(function(){let _0x5e26e5=!![];return function(_0x45b37b,_0x37e47f){const _0x323f73=_0x5e26e5?function(){const _0x57f8d8=a0_0x1ad8;if(_0x37e47f){const _0x2b2a0e=_0x37e47f[_0x57f8d8(0x153)](_0x45b37b,arguments);return _0x37e47f=null,_0x2b2a0e;}}:function(){};return _0x5e26e5=![],_0x323f73;};}()),a0_0x14463e=a0_0x27795f(this,function(){const _0x3489e4=a0_0x1ad8;return a0_0x14463e[_0x3489e4(0xae)]()[_0x3489e4(0x82)]('(((.+)+)+)+$')['toString']()[_0x3489e4(0x14c)](a0_0x14463e)[_0x3489e4(0x82)]('(((.+)+)+)+$');});a0_0x14463e();function a0_0x7c7b(){const _0x2253df=['setupLtmScheduler','getLtmData','error','scanForDevices','LTM.trainingData.thermodynamics','length','instance','755LifKYn','ltmJob','val','triggerBriefing','./lib/ai_agent','analysis.topology.structure','telegram','6TdfHdI','slice','sendNotification','setHours','Test','systemConfig','analysis.trigger','ANALYZE_TREND','automation.triggerAction','values','getForeignStateAsync','./lib/topology','motion','getForeignObjectAsync','enum','getOutsideTemperatureNumeric','getStateAsync','NORMAL','\x20Tage)','driftAnalysisTimer','Instanz\x20nicht\x20gefunden','main','TRAIN_COMFORT','Sec-Training\x20started...','triggerEnergyPrediction','Verbindung\x20erfolgreich!','from','PYTHON_EXE','timestamp','analysis.training.triggerSecurity','cancel','setupBriefingScheduler','sendTo','analysisHistory','analysisInterval','sendMorningBriefing','presenceDevices','Gemini\x20AI\x20initialized.','getMinutes','onUnload','./lib/dead_man','5782250ppjjvC','callback','updateTopologyMatrix','fill','find','checkLicense','object','currentSystemMode','7672775hgbJvM','system.adapter.','setupModeResetScheduler','runGeminiAnalysis','cogni-living','push','8528BCxcbK','briefingJob','notifyTelegramInstance','toLowerCase','exports','.system.mode','response','geminiApiKey','split','checkWifiPresence','location','onMessage','./lib/scheduler','7712KDVHFh','includes','isPresent','ready','modeResetJob','./lib/setup','activityLevel','enum.rooms.*','rawEventLog','Adapter','TRAIN_SECURITY','subscribeForeignStatesAsync','type','namespace','text','online','parse','eventHistory','join','getHours','onReady','createDailyDigest','LTM.dailyDigests','updated','Standard','notifyTelegramEnabled','SET_TOPOLOGY','ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...','LTM.trainingData.sequences','getOverviewData','PREDICT_ENERGY','now','Kein\x20Wetter-Adapter','runAutopilot','./lib/scanner','SYSTEM_MODES','config','Lernphase\x20(','runPythonHealthCheck','analysis.training.triggerHealth','Kein\x20Kalender-Adapter','TRAIN_ENERGY','1183noXHfU','scanDevices','endsWith','analysis.triggerBriefing','.data.table','Gesendet','runBaselineDriftAnalysis','@iobroker/adapter-core','common','testNotification','cogni-living\x20adapter\x20starting\x20(v','ack','temperature','./lib/python_bridge','version','VACATION','stateChange','ANALYZE_GAIT','dependencyInstallInProgress','keys','dailyDigests','36mGaZar','send','genAI','constructor','communicate.request','initSystemConfig','getForeignObjectsAsync','getEnums','add','Daten\x20nicht\x20verfÃ¼gbar','apply','205899HGeQYm','analysis.training.triggerEnergy','Keine\x20Antwort\x20von\x20Gemini','isGracePeriodActive','startSystem','Fehler:\x20','setStateAsync','sort','abortExitTimer','search','.communicate.request','lastAlertState','message','setPresence','triggerDailyDigest','updateLocation','analysis.training.triggerComfort','minDaysForBaseline','updateTopology','exitGraceTimer','initZombies','testContext','setState','3673182dfrlRX','analysisTimer','log','Kein\x20API\x20Key\x20Ã¼bergeben','subscribeStates','calendarInstance','command','devices','pop','LTM.rawEventLog','loadSystemMode','forEach','weatherInstance','analysis.automation.autoApply','info','Activity-Level','triggerGaitAnalysis','analysis.automation.triggerAction','SYSTEM_DP_MODE','LTM.triggerDailyDigest','floor','name','36330Dvhckh','stringify','isProVersion','getGenerativeModel','stopService','Verbunden','createAllObjects','./lib/recorder','toString','licenseKey','TRAIN_HEALTH','onStateChange','Notification\x20Test\x20Failed:\x20','bind','sensorLastValues','geminiModel','10755ygzWLA',')\x20-\x20Phase\x20C\x20(Hardened)'];a0_0x7c7b=function(){return _0x2253df;};return a0_0x7c7b();}'use strict';const utils=require(a0_0x3aab6d(0x13b)),{GoogleGenerativeAI}=require('@google/generative-ai'),installer=require('./lib/installer'),scanner=require(a0_0x3aab6d(0x12c)),schedulers=require(a0_0x3aab6d(0x109)),topology=require(a0_0x3aab6d(0xd1)),setup=require(a0_0x3aab6d(0x10f)),recorder=require(a0_0x3aab6d(0xad)),pythonBridge=require(a0_0x3aab6d(0x141)),aiAgent=require(a0_0x3aab6d(0xc3)),deadMan=require(a0_0x3aab6d(0xee)),GEMINI_MODEL='models/gemini-flash-latest',ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};class CogniLiving extends utils[a0_0x3aab6d(0x113)]{constructor(_0x4915de){const _0xa927b5=a0_0x3aab6d;super({..._0x4915de,'name':_0xa927b5(0xfb)}),this[_0xa927b5(0x11b)]=[],this[_0xa927b5(0xe7)]=[],this[_0xa927b5(0x112)]=[],this[_0xa927b5(0x148)]=[],this[_0xa927b5(0xb4)]={},this[_0xa927b5(0xcb)]={'latitude':0x0,'longitude':0x0,'city':''},this['isPresent']=!![],this['exitTimer']=null,this[_0xa927b5(0x8c)]=null,this[_0xa927b5(0x157)]=![],this[_0xa927b5(0x14b)]=null,this[_0xa927b5(0xb5)]=null,this[_0xa927b5(0xf6)]=setup['SYSTEM_MODES'][_0xa927b5(0xd7)],this[_0xa927b5(0xa8)]=![],this[_0xa927b5(0x84)]=![],this[_0xa927b5(0x91)]=null,this['ltmJob']=null,this[_0xa927b5(0x10e)]=null,this['driftAnalysisTimer']=null,this[_0xa927b5(0xfe)]=null,this[_0xa927b5(0x146)]=![],this['on'](_0xa927b5(0x10d),this[_0xa927b5(0x11e)]['bind'](this)),this['on'](_0xa927b5(0x144),this[_0xa927b5(0xb1)]['bind'](this)),this['on']('unload',this[_0xa927b5(0xed)][_0xa927b5(0xb3)](this)),this['on'](_0xa927b5(0x85),this['onMessage'][_0xa927b5(0xb3)](this));}async['onReady'](){const _0x5e8296=a0_0x3aab6d;this['log']['info'](_0x5e8296(0x13e)+this[_0x5e8296(0x142)]+_0x5e8296(0xb7));if(!installer['checkAndInstall'](this,()=>this[_0x5e8296(0x158)]()))return;}async[a0_0x3aab6d(0x158)](){const _0x19dfd8=a0_0x3aab6d;await setup[_0x19dfd8(0x8d)](this);try{this[_0x19dfd8(0xa8)]=await setup[_0x19dfd8(0xf4)](this[_0x19dfd8(0x12e)][_0x19dfd8(0xaf)]);}catch(_0x29c6aa){}if(!this[_0x19dfd8(0x12e)]['inactivityThresholdHours']||this[_0x19dfd8(0x12e)]['inactivityThresholdHours']<0.1)this[_0x19dfd8(0x12e)]['inactivityThresholdHours']=0xc;await setup['initHistory'](this),await setup[_0x19dfd8(0x14e)](this);if(this[_0x19dfd8(0x12e)][_0x19dfd8(0x104)])try{this[_0x19dfd8(0x14b)]=new GoogleGenerativeAI(this['config']['geminiApiKey']),this[_0x19dfd8(0xb5)]=this[_0x19dfd8(0x14b)][_0x19dfd8(0xa9)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':'application/json'}}),this['log'][_0x19dfd8(0x9e)](_0x19dfd8(0xeb));}catch(_0x535ebe){this['log'][_0x19dfd8(0xba)]('Gemini\x20Init\x20Error:\x20'+_0x535ebe['message']);}await setup[_0x19dfd8(0xac)](this),await this['loadSystemMode']();try{const _0x4b47ae=await this[_0x19dfd8(0xd6)](_0x19dfd8(0x99));if(_0x4b47ae&&_0x4b47ae[_0x19dfd8(0xc1)])this[_0x19dfd8(0x112)]=JSON['parse'](_0x4b47ae[_0x19dfd8(0xc1)]);}catch(_0x22f468){this['rawEventLog']=[];}try{const _0x479b28=await this[_0x19dfd8(0xd6)](_0x19dfd8(0x120));if(_0x479b28&&_0x479b28['val'])this[_0x19dfd8(0x148)]=JSON[_0x19dfd8(0x11a)](_0x479b28[_0x19dfd8(0xc1)]);}catch(_0x45596c){this[_0x19dfd8(0x148)]=[];}const _0x5344a3=this['dailyDigests']['length']>=(this[_0x19dfd8(0x12e)]['minDaysForBaseline']||0x7)?'Aktiv\x20('+this[_0x19dfd8(0x148)][_0x19dfd8(0xbd)]+_0x19dfd8(0xd8):_0x19dfd8(0x12f)+this[_0x19dfd8(0x148)]['length']+'/'+(this[_0x19dfd8(0x12e)][_0x19dfd8(0x8a)]||0x7)+')';await this[_0x19dfd8(0x15a)]('LTM.baselineStatus',{'val':_0x5344a3,'ack':!![]}),this['subscribeStates'](_0x19dfd8(0xcc)),this[_0x19dfd8(0x94)](_0x19dfd8(0xa3)),this[_0x19dfd8(0x94)]('system.mode'),this[_0x19dfd8(0x94)](_0x19dfd8(0x137)),this['subscribeStates'](_0x19dfd8(0xa1)),this[_0x19dfd8(0x94)](_0x19dfd8(0x9d)),this[_0x19dfd8(0x94)](_0x19dfd8(0xe3)),this[_0x19dfd8(0x94)](_0x19dfd8(0x131)),this[_0x19dfd8(0x94)](_0x19dfd8(0x155)),this['subscribeStates'](_0x19dfd8(0x89)),this[_0x19dfd8(0x94)]('analysis.training.triggerTopology');const _0x4d82e7=this[_0x19dfd8(0x12e)][_0x19dfd8(0x97)];if(_0x4d82e7)for(const _0x1d37d6 of _0x4d82e7){await this[_0x19dfd8(0x115)](_0x1d37d6['id']);}const _0x51a23e=this[_0x19dfd8(0x12e)][_0x19dfd8(0xea)];if(_0x51a23e)for(const _0x507489 of _0x51a23e){await this[_0x19dfd8(0x115)](_0x507489);}if(this['config'][_0x19dfd8(0x123)]&&this[_0x19dfd8(0x12e)]['notifyTelegramInstance'])await this[_0x19dfd8(0x115)](this[_0x19dfd8(0x12e)][_0x19dfd8(0xff)]+_0x19dfd8(0x83));setTimeout(()=>this['checkWifiPresence'](),0x1388);if(this['analysisTimer'])clearInterval(this['analysisTimer']);const _0x2660ba=this[_0x19dfd8(0x12e)][_0x19dfd8(0xe8)]||0xf;_0x2660ba>0x0&&(this[_0x19dfd8(0x91)]=setInterval(()=>{this['runAutopilot']();},_0x2660ba*0x3c*0x3e8)),schedulers[_0x19dfd8(0xb8)](this,()=>aiAgent[_0x19dfd8(0x11f)](this,pythonBridge)),schedulers[_0x19dfd8(0xf9)](this),schedulers['setupDriftAnalysisScheduler'](this,()=>aiAgent[_0x19dfd8(0x13a)](this)),schedulers[_0x19dfd8(0xe5)](this,()=>aiAgent[_0x19dfd8(0xe9)](this)),pythonBridge['startService'](this,installer[_0x19dfd8(0xe1)]),setTimeout(async()=>{const _0x33b6ce=_0x19dfd8;await topology[_0x33b6ce(0x8b)](this);try{const _0x15ef6a=await this[_0x33b6ce(0xd6)](_0x33b6ce(0xc4));if(_0x15ef6a&&_0x15ef6a['val'])pythonBridge[_0x33b6ce(0x14a)](this,_0x33b6ce(0x124),JSON[_0x33b6ce(0x11a)](_0x15ef6a[_0x33b6ce(0xc1)]));}catch(_0x59cd55){}this[_0x33b6ce(0x130)](),this[_0x33b6ce(0xa0)](),this[_0x33b6ce(0xde)](),this['updateHealthVector']();},0x1388);}[a0_0x3aab6d(0xed)](_0x5c8f73){const _0x5f264a=a0_0x3aab6d;if(this[_0x5f264a(0x91)])clearInterval(this[_0x5f264a(0x91)]);if(this[_0x5f264a(0xd9)])clearInterval(this['driftAnalysisTimer']);if(this[_0x5f264a(0xc0)])this[_0x5f264a(0xc0)][_0x5f264a(0xe4)]();if(this['modeResetJob'])this[_0x5f264a(0x10e)]['cancel']();if(this[_0x5f264a(0xfe)])this['briefingJob']['cancel']();recorder[_0x5f264a(0x81)](this),pythonBridge[_0x5f264a(0xaa)](this),_0x5c8f73();}async[a0_0x3aab6d(0xb1)](_0x15101b,_0x18f3b7){const _0x454b74=a0_0x3aab6d;if(!_0x18f3b7||this[_0x454b74(0x146)])return;if(_0x15101b[_0x454b74(0x10b)](_0x454b74(0xc5))&&_0x15101b[_0x454b74(0x136)](_0x454b74(0x14d))&&_0x18f3b7[_0x454b74(0xc1)])return;if(_0x15101b===this[_0x454b74(0x117)]+_0x454b74(0x102)){if(_0x18f3b7[_0x454b74(0xc1)]&&Object[_0x454b74(0xcf)](setup[_0x454b74(0x12d)])[_0x454b74(0x10b)](_0x18f3b7[_0x454b74(0xc1)])){this[_0x454b74(0xf6)]=_0x18f3b7['val'];if(_0x18f3b7[_0x454b74(0xc1)]===setup['SYSTEM_MODES'][_0x454b74(0x143)])await recorder[_0x454b74(0x86)](this,![]);else await recorder[_0x454b74(0x86)](this,!![]);}if(!_0x18f3b7['ack'])this[_0x454b74(0x8f)](_0x15101b,{'val':this[_0x454b74(0xf6)],'ack':!![]});return;}if(!_0x18f3b7[_0x454b74(0x13f)]){_0x15101b[_0x454b74(0x10b)](_0x454b74(0xcc))&&_0x18f3b7['val']&&(this[_0x454b74(0x8f)](_0x15101b,{'val':![],'ack':!![]}),aiAgent[_0x454b74(0xfa)](this));if(_0x15101b[_0x454b74(0x10b)](_0x454b74(0x87))&&_0x18f3b7[_0x454b74(0xc1)]){this['setState'](_0x15101b,{'val':![],'ack':!![]});if(this[_0x454b74(0xa8)])aiAgent[_0x454b74(0x11f)](this,pythonBridge);}_0x15101b[_0x454b74(0x10b)](_0x454b74(0xc2))&&_0x18f3b7[_0x454b74(0xc1)]&&(this[_0x454b74(0x8f)](_0x15101b,{'val':![],'ack':!![]}),aiAgent[_0x454b74(0xe9)](this));_0x15101b[_0x454b74(0x10b)](_0x454b74(0xce))&&_0x18f3b7['val']&&(this[_0x454b74(0x8f)](_0x15101b,{'val':![],'ack':!![]}),aiAgent['executeAutomationAction'](this));if(_0x15101b['includes'](_0x454b74(0xe3))&&_0x18f3b7[_0x454b74(0xc1)]){this['setState'](_0x15101b,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x84bba6=await this[_0x454b74(0xd6)](_0x454b74(0x126));if(_0x84bba6&&_0x84bba6[_0x454b74(0xc1)]){const _0x54310a=JSON['parse'](_0x84bba6[_0x454b74(0xc1)]);this[_0x454b74(0x15a)]('analysis.training.status',{'val':_0x454b74(0xdd),'ack':!![]}),pythonBridge[_0x454b74(0x14a)](this,_0x454b74(0x114),{'sequences':_0x54310a});}}catch(_0x35cf43){}}if(_0x15101b[_0x454b74(0x10b)](_0x454b74(0x131))&&_0x18f3b7['val']){this[_0x454b74(0x8f)](_0x15101b,{'val':![],'ack':!![]});if(this[_0x454b74(0xa8)])try{const _0x577fee=await this[_0x454b74(0xd6)]('LTM.dailyDigests');if(_0x577fee&&_0x577fee[_0x454b74(0xc1)])pythonBridge[_0x454b74(0x14a)](this,_0x454b74(0xb0),{'digests':JSON[_0x454b74(0x11a)](_0x577fee[_0x454b74(0xc1)])});}catch(_0x5c06fe){}}if(_0x15101b[_0x454b74(0x10b)](_0x454b74(0x155))&&_0x18f3b7[_0x454b74(0xc1)]){this[_0x454b74(0x8f)](_0x15101b,{'val':![],'ack':!![]});if(this[_0x454b74(0xa8)])try{const _0x2ae10e=await this[_0x454b74(0xd6)](_0x454b74(0xbc));if(_0x2ae10e&&_0x2ae10e[_0x454b74(0xc1)])pythonBridge[_0x454b74(0x14a)](this,_0x454b74(0x133),{'points':JSON[_0x454b74(0x11a)](_0x2ae10e['val'])});}catch(_0x518dd5){}}if(_0x15101b['includes']('analysis.training.triggerComfort')&&_0x18f3b7[_0x454b74(0xc1)]){this[_0x454b74(0x8f)](_0x15101b,{'val':![],'ack':!![]});if(this[_0x454b74(0xa8)])try{const _0x710ec0=await this['getStateAsync'](_0x454b74(0x99));if(_0x710ec0&&_0x710ec0[_0x454b74(0xc1)])pythonBridge['send'](this,_0x454b74(0xdc),{'events':JSON['parse'](_0x710ec0['val'])});}catch(_0x3ae349){}}_0x15101b[_0x454b74(0x10b)]('analysis.training.triggerTopology')&&_0x18f3b7[_0x454b74(0xc1)]&&(this[_0x454b74(0x8f)](_0x15101b,{'val':![],'ack':!![]}),topology[_0x454b74(0x8b)](this));return;}if(this[_0x454b74(0x12e)][_0x454b74(0xea)]&&this['config'][_0x454b74(0xea)]['includes'](_0x15101b)){await this[_0x454b74(0x106)]();return;}const _0x21d115=(this[_0x454b74(0x12e)][_0x454b74(0x97)]||[])[_0x454b74(0xf3)](_0x34a0d1=>_0x34a0d1['id']===_0x15101b);if(_0x21d115){const _0x3ed5ea=await recorder['processSensorEvent'](this,_0x15101b,_0x18f3b7,_0x21d115);_0x3ed5ea&&_0x3ed5ea[_0x454b74(0x116)]===_0x454b74(0xd2)&&_0x3ed5ea[_0x454b74(0x107)]&&this[_0x454b74(0xa8)]&&deadMan[_0x454b74(0x88)](this,_0x3ed5ea['location']);}}async[a0_0x3aab6d(0x108)](_0x424505){const _0x53ded0=a0_0x3aab6d;if(typeof _0x424505===_0x53ded0(0xf5)&&_0x424505[_0x53ded0(0x85)]){if(_0x424505[_0x53ded0(0x96)]==='testApiKey')try{const _0x87bf5a=_0x424505[_0x53ded0(0x85)]['apiKey'];if(!_0x87bf5a)throw new Error(_0x53ded0(0x93));const _0x4a0a0b=new GoogleGenerativeAI(_0x87bf5a),_0x464622=_0x4a0a0b[_0x53ded0(0xa9)]({'model':GEMINI_MODEL}),_0x86bdab=await _0x464622['generateContent'](_0x53ded0(0xca)),_0x1d6dc3=await _0x86bdab[_0x53ded0(0x103)];if(_0x1d6dc3[_0x53ded0(0x118)]())this[_0x53ded0(0xe6)](_0x424505[_0x53ded0(0xe0)],_0x424505['command'],{'success':!![],'message':_0x53ded0(0xdf)},_0x424505['callback']);else throw new Error(_0x53ded0(0x156));}catch(_0x38f2a4){this['sendTo'](_0x424505[_0x53ded0(0xe0)],_0x424505['command'],{'success':![],'message':_0x38f2a4[_0x53ded0(0x85)]},_0x424505[_0x53ded0(0xf0)]);}else{if(_0x424505[_0x53ded0(0x96)]===_0x53ded0(0x135))try{const _0x2a8eca=await scanner[_0x53ded0(0xbb)](this,_0x424505[_0x53ded0(0x85)]||{});this[_0x53ded0(0xe6)](_0x424505['from'],_0x424505[_0x53ded0(0x96)],{'success':!![],'devices':_0x2a8eca},_0x424505['callback']);}catch(_0xa043bf){this[_0x53ded0(0xe6)](_0x424505[_0x53ded0(0xe0)],_0x424505[_0x53ded0(0x96)],{'success':![],'error':_0xa043bf['message']},_0x424505[_0x53ded0(0xf0)]);}else{if(_0x424505[_0x53ded0(0x96)]===_0x53ded0(0xf1))try{const {matrix:_0x2a3983}=_0x424505[_0x53ded0(0x85)],_0x4ca1c4=await this[_0x53ded0(0xd6)](_0x53ded0(0xc4));if(_0x4ca1c4&&_0x4ca1c4[_0x53ded0(0xc1)]){const _0x481c0d=JSON['parse'](_0x4ca1c4[_0x53ded0(0xc1)]);_0x481c0d['matrix']=_0x2a3983,_0x481c0d[_0x53ded0(0x121)]=Date[_0x53ded0(0x129)](),await this[_0x53ded0(0x15a)](_0x53ded0(0xc4),{'val':JSON[_0x53ded0(0xa7)](_0x481c0d),'ack':!![]}),pythonBridge[_0x53ded0(0x14a)](this,_0x53ded0(0x124),_0x481c0d);}this[_0x53ded0(0xe6)](_0x424505['from'],_0x424505['command'],{'success':!![]},_0x424505[_0x53ded0(0xf0)]);}catch(_0x2f484f){this['log'][_0x53ded0(0xba)](_0x2f484f);}else{if(_0x424505['command']===_0x53ded0(0xb9))this[_0x53ded0(0xe6)](_0x424505[_0x53ded0(0xe0)],_0x424505[_0x53ded0(0x96)],{'success':!![],'dailyDigests':this[_0x53ded0(0x148)]||[],'analysisHistory':this[_0x53ded0(0xe7)]||[]},_0x424505['callback']);else{if(_0x424505[_0x53ded0(0x96)]===_0x53ded0(0x127)){const _0x1b93f1=this[_0x53ded0(0x148)]['length'],_0x7e710b=new Array(0x18)[_0x53ded0(0xf2)](0x0),_0x30cf21=new Date()[_0x53ded0(0xc9)](0x0,0x0,0x0,0x0);this[_0x53ded0(0x11b)]&&this['eventHistory'][_0x53ded0(0x9b)](_0x5e34d2=>{const _0x38384e=_0x53ded0;if(_0x5e34d2[_0x38384e(0xe2)]>=_0x30cf21){const _0xa18a31=new Date(_0x5e34d2['timestamp'])[_0x38384e(0x11d)]();if(_0xa18a31>=0x0&&_0xa18a31<0x18)_0x7e710b[_0xa18a31]++;}}),this['sendTo'](_0x424505[_0x53ded0(0xe0)],_0x424505[_0x53ded0(0x96)],{'success':!![],'eventHistory':this['eventHistory'][_0x53ded0(0xc7)](0x0,0xf),'stats':{'digestCount':_0x1b93f1,'isPresent':this[_0x53ded0(0x10c)],'hourlyActivity':_0x7e710b},'automation':{'detected':![]}},_0x424505[_0x53ded0(0xf0)]);}else{if(_0x424505[_0x53ded0(0x96)]===_0x53ded0(0x150)){const _0x2d7d9f=await this[_0x53ded0(0x14f)]('enum.functions.*',_0x53ded0(0xd4)),_0x1aa728=[];if(_0x2d7d9f)for(const _0x46d92b in _0x2d7d9f){const _0x2a69ac=_0x2d7d9f[_0x46d92b],_0x2162b9=(_0x2a69ac[_0x53ded0(0x13c)]&&typeof _0x2a69ac[_0x53ded0(0x13c)]['name']==='object'?_0x2a69ac[_0x53ded0(0x13c)][_0x53ded0(0xa5)]['de']:_0x2a69ac[_0x53ded0(0x13c)][_0x53ded0(0xa5)])||_0x2a69ac[_0x53ded0(0x13c)]['name'];_0x1aa728[_0x53ded0(0xfc)]({'id':_0x46d92b,'name':_0x2162b9});}const _0x59a42e=await this['getForeignObjectsAsync'](_0x53ded0(0x111),_0x53ded0(0xd4)),_0x35785b=[];if(_0x59a42e)for(const _0x5912d8 in _0x59a42e){const _0xdc15c5=_0x59a42e[_0x5912d8],_0x2e262a=(_0xdc15c5[_0x53ded0(0x13c)]&&typeof _0xdc15c5[_0x53ded0(0x13c)][_0x53ded0(0xa5)]===_0x53ded0(0xf5)?_0xdc15c5[_0x53ded0(0x13c)]['name']['de']:_0xdc15c5[_0x53ded0(0x13c)][_0x53ded0(0xa5)])||_0x5912d8[_0x53ded0(0x105)]('.')[_0x53ded0(0x98)]();_0x35785b[_0x53ded0(0xfc)](_0x2e262a);}this[_0x53ded0(0xe6)](_0x424505[_0x53ded0(0xe0)],_0x424505['command'],{'success':!![],'enums':_0x1aa728,'rooms':_0x35785b},_0x424505[_0x53ded0(0xf0)]);}else{if(_0x424505['command']===_0x53ded0(0x8e))try{let _0x284d62=_0x53ded0(0x12a),_0x59da7b=_0x53ded0(0x132);if(this[_0x53ded0(0x12e)][_0x53ded0(0x9c)]){const _0x431498=await recorder[_0x53ded0(0xd5)](this);_0x284d62=_0x431498!==null?_0x431498+'Â°C':_0x53ded0(0x152);}if(this[_0x53ded0(0x12e)][_0x53ded0(0x95)]){const _0x18c327=await this[_0x53ded0(0xd3)](_0x53ded0(0xf8)+this[_0x53ded0(0x12e)][_0x53ded0(0x95)]);_0x59da7b=_0x18c327?_0x53ded0(0xab):_0x53ded0(0xda);}this[_0x53ded0(0xe6)](_0x424505[_0x53ded0(0xe0)],_0x424505[_0x53ded0(0x96)],{'success':!![],'weather':_0x284d62,'calendar':_0x59da7b},_0x424505[_0x53ded0(0xf0)]);}catch(_0x11ea63){this[_0x53ded0(0xe6)](_0x424505[_0x53ded0(0xe0)],_0x424505[_0x53ded0(0x96)],{'success':![],'error':_0x11ea63['message']},_0x424505[_0x53ded0(0xf0)]);}else{if(_0x424505[_0x53ded0(0x96)]==='getCalendarNames')try{const _0x5123d4=_0x424505['message'][_0x53ded0(0xbe)],_0x33b6de=await this['getForeignStateAsync'](_0x5123d4+_0x53ded0(0x138));let _0xfb05e3=[];if(_0x33b6de&&_0x33b6de[_0x53ded0(0xc1)]){const _0x9a902=JSON[_0x53ded0(0x11a)](_0x33b6de['val']),_0xb07974=new Set();Array['isArray'](_0x9a902)&&_0x9a902['forEach'](_0x22dd2b=>{const _0x190771=_0x53ded0;if(_0x22dd2b['_calName'])_0xb07974['add'](_0x22dd2b['_calName']);else{if(_0x22dd2b['calendarName'])_0xb07974[_0x190771(0x151)](_0x22dd2b['calendarName']);}}),_0xfb05e3=Array[_0x53ded0(0xe0)](_0xb07974)[_0x53ded0(0x15b)]();}if(_0xfb05e3[_0x53ded0(0xbd)]===0x0)_0xfb05e3=[_0x53ded0(0x122)];this['sendTo'](_0x424505['from'],_0x424505[_0x53ded0(0x96)],{'success':!![],'names':_0xfb05e3},_0x424505[_0x53ded0(0xf0)]);}catch(_0x23970f){this[_0x53ded0(0xe6)](_0x424505[_0x53ded0(0xe0)],_0x424505[_0x53ded0(0x96)],{'success':![],'error':_0x23970f[_0x53ded0(0x85)]},_0x424505[_0x53ded0(0xf0)]);}else{if(_0x424505[_0x53ded0(0x96)]===_0x53ded0(0x13d))try{await setup[_0x53ded0(0xc8)](this,'ðŸ””\x20Dies\x20ist\x20ein\x20Test\x20von\x20Cogni-Living.',![],![]),this[_0x53ded0(0xe6)](_0x424505[_0x53ded0(0xe0)],_0x424505['command'],{'success':!![],'message':_0x53ded0(0x139)},_0x424505[_0x53ded0(0xf0)]);}catch(_0x17ebf3){this[_0x53ded0(0x92)]['error'](_0x53ded0(0xb2)+_0x17ebf3[_0x53ded0(0x85)]),this[_0x53ded0(0xe6)](_0x424505[_0x53ded0(0xe0)],_0x424505[_0x53ded0(0x96)],{'success':![],'message':_0x53ded0(0x159)+_0x17ebf3[_0x53ded0(0x85)]},_0x424505[_0x53ded0(0xf0)]);}}}}}}}}}}}async[a0_0x3aab6d(0x9a)](){const _0x4ea59d=a0_0x3aab6d;try{const _0xbd3029=await this[_0x4ea59d(0xd6)](setup['SYSTEM_DP_MODE']);_0xbd3029&&_0xbd3029[_0x4ea59d(0xc1)]&&Object[_0x4ea59d(0xcf)](setup[_0x4ea59d(0x12d)])[_0x4ea59d(0x10b)](_0xbd3029[_0x4ea59d(0xc1)])?this['currentSystemMode']=_0xbd3029[_0x4ea59d(0xc1)]:(this[_0x4ea59d(0xf6)]=setup['SYSTEM_MODES']['NORMAL'],await this[_0x4ea59d(0x15a)](setup[_0x4ea59d(0xa2)],{'val':setup['SYSTEM_MODES'][_0x4ea59d(0xd7)],'ack':!![]}));}catch(_0x4e4336){this[_0x4ea59d(0xf6)]=setup[_0x4ea59d(0x12d)][_0x4ea59d(0xd7)];}}async[a0_0x3aab6d(0x106)](){const _0x10e0b6=a0_0x3aab6d;try{const _0x4c437c=this[_0x10e0b6(0x12e)][_0x10e0b6(0xea)]||[];let _0x370543=![];const _0xc11995=[];for(const _0x205dac of _0x4c437c){try{const _0x12e63f=await this[_0x10e0b6(0xd0)](_0x205dac);_0x12e63f&&(_0x12e63f[_0x10e0b6(0xc1)]===!![]||_0x12e63f[_0x10e0b6(0xc1)]===_0x10e0b6(0x119)||_0x12e63f[_0x10e0b6(0xc1)]===0x1)&&(_0x370543=!![],_0xc11995[_0x10e0b6(0xfc)](_0x205dac));}catch(_0x1676c8){}}return await this[_0x10e0b6(0x15a)]('system.presenceWho',{'val':_0xc11995[_0x10e0b6(0x11c)](',\x20'),'ack':!![]}),_0x370543&&(this['exitTimer']&&(this['log'][_0x10e0b6(0x9e)]('WiFi\x20Presence\x20detected.'),recorder[_0x10e0b6(0x81)](this)),!this['isPresent']&&this[_0x10e0b6(0xf6)]===setup[_0x10e0b6(0x12d)][_0x10e0b6(0xd7)]&&await recorder['setPresence'](this,!![])),_0x370543;}catch(_0xf7643b){return![];}}async[a0_0x3aab6d(0x12b)](){const _0x299e65=a0_0x3aab6d;this[_0x299e65(0x92)]['debug'](_0x299e65(0x125)),await aiAgent[_0x299e65(0xfa)](this),this['updateHealthVector'](),this['triggerGaitAnalysis'](),this[_0x299e65(0xde)]();}['triggerGaitAnalysis'](){const _0x3f0e8d=a0_0x3aab6d;if(!this[_0x3f0e8d(0xa8)])return;try{this['getState']('LTM.trainingData.sequences',(_0x2cf64a,_0x589627)=>{const _0x4b5514=_0x3f0e8d;_0x589627&&_0x589627[_0x4b5514(0xc1)]&&pythonBridge[_0x4b5514(0x14a)](this,_0x4b5514(0x145),{'sequences':JSON[_0x4b5514(0x11a)](_0x589627[_0x4b5514(0xc1)])});});}catch(_0x5f47aa){}}async[a0_0x3aab6d(0xde)](){const _0x3745b7=a0_0x3aab6d;if(!this['isProVersion'])return;try{const _0x64477d=await recorder['getOutsideTemperatureNumeric'](this);if(_0x64477d===null)return;const _0x27e6a2={},_0x5f2c90=this[_0x3745b7(0x12e)]['devices']||[];for(const _0x3e3065 of _0x5f2c90){if(_0x3e3065[_0x3745b7(0x116)]===_0x3745b7(0x140)&&_0x3e3065[_0x3745b7(0x107)]){const _0x2a84b0=this[_0x3745b7(0xb4)][_0x3e3065['id']];if(_0x2a84b0!==undefined)_0x27e6a2[_0x3e3065[_0x3745b7(0x107)]]=_0x2a84b0;}}Object[_0x3745b7(0x147)](_0x27e6a2)[_0x3745b7(0xbd)]>0x0&&pythonBridge[_0x3745b7(0x14a)](this,_0x3745b7(0x128),{'current_temps':_0x27e6a2,'t_out':_0x64477d});}catch(_0x4b7fd2){}}['updateHealthVector'](){const _0x5d9d94=a0_0x3aab6d;if(!this[_0x5d9d94(0x112)]||this['rawEventLog'][_0x5d9d94(0xbd)]===0x0)return;const _0x2eff6e=new Array(0x60)['fill'](0x0),_0x2dd6c0=new Date()[_0x5d9d94(0xc9)](0x0,0x0,0x0,0x0);this[_0x5d9d94(0x112)][_0x5d9d94(0x9b)](_0x5997fc=>{const _0x4c1180=_0x5d9d94,_0x1cfe19=new Date(_0x5997fc[_0x4c1180(0xe2)]);if(_0x1cfe19['getTime']()>=_0x2dd6c0){const _0x50eb11=_0x1cfe19['getHours'](),_0x9f13c9=_0x1cfe19[_0x4c1180(0xec)](),_0x3bb10b=_0x50eb11*0x4+Math[_0x4c1180(0xa4)](_0x9f13c9/0xf);if(_0x3bb10b>=0x0&&_0x3bb10b<0x60)_0x2eff6e[_0x3bb10b]++;}}),this[_0x5d9d94(0x15a)]('analysis.health.todayVector',{'val':JSON[_0x5d9d94(0xa7)](_0x2eff6e),'ack':!![]});}['runPythonHealthCheck'](){const _0x2bc373=a0_0x3aab6d;if(!this[_0x2bc373(0x148)]||this['dailyDigests']['length']<0x2)return;const _0x591572=this['dailyDigests']['map'](_0x4dca32=>{const _0x2c64a9=_0x2bc373,_0x376583=(_0x4dca32[_0x2c64a9(0x110)]||'')[_0x2c64a9(0x100)]();return ACTIVITY_LEVEL_MAP[_0x376583]||0x32;});pythonBridge[_0x2bc373(0x14a)](this,_0x2bc373(0xcd),{'values':_0x591572,'tag':_0x2bc373(0x9f)});}}if(require[a0_0x3aab6d(0xdb)]!==module)module[a0_0x3aab6d(0x101)]=_0x37f527=>new CogniLiving(_0x37f527);else new CogniLiving();