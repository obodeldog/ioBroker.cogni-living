const a0_0xe826e3=a0_0x1e21;(function(_0x196869,_0x5f46b4){const _0xb65918=a0_0x1e21,_0x575dc7=_0x196869();while(!![]){try{const _0x3052fe=parseInt(_0xb65918(0x1f0))/0x1*(parseInt(_0xb65918(0x20b))/0x2)+parseInt(_0xb65918(0x21b))/0x3*(-parseInt(_0xb65918(0x199))/0x4)+parseInt(_0xb65918(0x22d))/0x5*(parseInt(_0xb65918(0x1e3))/0x6)+-parseInt(_0xb65918(0x11f))/0x7+parseInt(_0xb65918(0x17c))/0x8*(-parseInt(_0xb65918(0x187))/0x9)+parseInt(_0xb65918(0x1e1))/0xa*(-parseInt(_0xb65918(0x1c0))/0xb)+-parseInt(_0xb65918(0x22a))/0xc*(-parseInt(_0xb65918(0x145))/0xd);if(_0x3052fe===_0x5f46b4)break;else _0x575dc7['push'](_0x575dc7['shift']());}catch(_0x28e66d){_0x575dc7['push'](_0x575dc7['shift']());}}}(a0_0x19ab,0x9a6f6));const a0_0x1051fc=(function(){let _0x26ce7c=!![];return function(_0x1b16bf,_0xa8f2d9){const _0x5c39f1=_0x26ce7c?function(){const _0x44a8e7=a0_0x1e21;if(_0xa8f2d9){const _0x555f1b=_0xa8f2d9[_0x44a8e7(0x1e6)](_0x1b16bf,arguments);return _0xa8f2d9=null,_0x555f1b;}}:function(){};return _0x26ce7c=![],_0x5c39f1;};}()),a0_0xe52be0=a0_0x1051fc(this,function(){const _0x2c07d5=a0_0x1e21;return a0_0xe52be0[_0x2c07d5(0x113)]()[_0x2c07d5(0x23a)](_0x2c07d5(0x14b))[_0x2c07d5(0x113)]()[_0x2c07d5(0x100)](a0_0xe52be0)[_0x2c07d5(0x23a)](_0x2c07d5(0x14b));});a0_0xe52be0();function a0_0x19ab(){const _0x1fd525=['telegram','analysisHistory','analysis.automation.targetId','‚úÖ\x20Dashboard\x20Data\x20(Rooms\x20&\x20Timeline\x20&\x20Details)\x20restored.','constructor','geminiModel','val','./lib/installer','values','dependencyInstallInProgress','getForeignStateAsync','name','No\x20data','infrasoundLocked','Gemini\x20Init\x20Error:\x20','handleInfrasound','info','analysis.training.triggerTopology','analysis.security.lastScore','triggerDailyDigest','moduleSecurity','currentSystemMode','onReady','toString','TRAIN_TOPOLOGY','Sec-Training\x20started...','exitGraceTimer','python','\x20Kalender-Adapter\x20gefunden.','analysis.visualization.pulse','ack','manual','analysis.health.geminiDay','minDaysForBaseline','max','8478463jKwqWj','Guest\x20Mode','protectAiMemory','command','send','sendMorningBriefing','./lib/python_bridge','getForeignObjectsAsync','runAutopilot','comfort','utf8','enum','isGracePeriodActive','system.adapter.','geminiApiKey','forEach','getHours','historyJob','triggerBriefing','value','TRAIN_HEALTH','triggerInfrasoundCorrelation','ltmJob','Live\x20Event\x20Pulse','./lib/ai_agent','isProVersion','sources','TRAIN_ENERGY','bin','analysis.training.triggerComfort','system.adapter.ical.È¶ô','isRelevantActivity','LTM.baselineStatus','roomIntegratorTimer','analysis.activity.roomStats','fill','text','now','416WXBUwz','error','Keine\x20Daten','times','filter','min','(((.+)+)+)+$','Party\x20Mode','toLowerCase','VACATION','createAllObjects','onStateChange','eventHistory','\x20events\x20from\x20today...','then','bootTime','@iobroker/adapter-core','driftAnalysisTimer','./lib/scanner','Daily\x20Activity\x20Vector\x20(48x30min)','abortExitTimer','activeModules','outdoorSensorId','.data.table','[Integrator]\x20Error:\x20','party','./lib/topology','inactivityThresholdHours','enum.functions.*','models/gemini-flash-latest','@google/generative-ai','setPresence','analysis.health.geminiNight','door','infrasoundEnabled','moduleHealth','analysis.energy.warmupTimes','setObjectNotExistsAsync','health','analyzeWindowOpening','CALCULATE_HEALTH_TREND','generateContent','getObjectViewAsync','config','‚ö†\x20Replay\x20skipped:\x20No\x20events\x20in\x20memory.','./lib/setup','includes','pop','setStateAsync','Kein\x20API\x20Key\x20√ºbergeben.','saveDailyHistory','SYSTEM_DP_MODE','application/json','system','system.presenceWho','8ZAKSzF','./lib/automation','üì¶\x20Restored\x20','all','healthTrendInterval','message','memoryCache','log','./lib/recorder','SYSTEM_MODES','history','5428575BwqXYN','devices','getStateAsync','add','\x22history\x22:{}','sendTo','cogni-living','infrasoundSensorId','bind','Sonne:\x20','onUnload','59\x2023\x20*\x20*\x20*','reduce','LTM.dailyDigests','replace','terrasse','namespace','getEnums','113020yoQiQM','getAbsoluteDefaultDataDir','toLocaleDateString','General\x20Activity\x20Trend','Corrupt','\x20Tage)','presenceDevices','createDailyDigest','Aktiv\x20(','guest','analysis.security.learningStatus','processSensorEvent','motion','initSchedules','initSystemConfig','getGenerativeModel','analysis.activity.roomHistory','string','enum.rooms.*','scanForDevices','integrateRoomTime','replayTodayEvents','‚Ü∫\x20Replaying\x20','split','analysis.health.todayRoomDetails','response','checkCalendarTriggers','üíæ\x20Saving\x20Daily\x20History\x20for\x20','security','energy','stopService','callback','LTM.trainingData.thermodynamics','Scan\x20Error:\x20','updateTopology','executeAutomationAction','analysis.health.todayVector','subscribeForeignStates','location','16797BxUutn','stateChange','checkSolarCondition','date','parse','instance','object','modules','length','isSolar','checkWifiPresence','runGeminiAnalysis','LTM.rawEventLog','path','checkThermostats','isArray','existsSync','number','find','analysis.trigger','automation.triggerAction','exitTimer','\x20events\x20from\x20standard\x20storage.','rows','state','triggerGaitAnalysis','.json','onMessage','some','thermostat','events.history','licenseKey','analysis.prediction.trackerConfidence','5780BdfPhR','cleanupGhostInterventions','30504KNQclJ','Gemini\x20Report\x20Day','sensorLastValues','apply','exports','testApiKey','setState','push','cancel','isPresent','loadSystemMode','SET_LEARNING_MODE','...','1gPQMpZ','generateHealthReport','common','mkdirSync','dailyDigests','analysis.training.triggerSecurity','Warte\x20auf\x20Analyse...','lastTrackerEventTime','Verbindung\x20erfolgreich:\x20','subscribeForeignStatesAsync','LTM.trainingData.sequences','analysis.health.activityTrend','timestamp','cogni-living\x20adapter\x20starting\x20(v',')\x20-\x20Phase\x20E\x20(Scheduler\x20Fix)','scanThermostats','node-schedule','Room\x20Dwell\x20Time\x20Stats','version','type','warn','writeFileSync','startSystem','NORMAL','runPythonHealthCheck','analysis.training.status','setHours','626686oCDQkj','Lernphase\x20(','from','open','./lib/scheduler','subscribeStates','json','analysis.energy.warmupSources','briefingJob','triggerEnergyPrediction','readFileSync','sendNotification','rawEventLog','scheduleJob','Adapter','initZombies','123LLrWoI','moduleEnergy','.system.mode','join','toISOString','endsWith','trackerHeartbeat','genAI','pressureBuffer','DAY','analysis.training.triggerEnergy','moduleComfort','analysis.automation.targetValue','getDate','todayVector','1510212QTYCQP','NIGHT','stringify','145hcVtrJ','üêç\x20Triggering\x20Python\x20Health\x20Check\x20(Activity\x20Trend)...',',\x20Temp:\x20','updateHealthVector','TRAIN_SECURITY','calendarName','getHistoryData','getCalendarNames','checkLicense','Daily\x20Room\x20Details\x20(48x30min)','TRAIN_COMFORT','window','debug','search','./lib/dead_man','Say\x20Hello','Init...','analysisTimer','Unknown'];a0_0x19ab=function(){return _0x1fd525;};return a0_0x19ab();}'use strict';const utils=require(a0_0xe826e3(0x155)),{GoogleGenerativeAI}=require(a0_0xe826e3(0x163)),path=require(a0_0xe826e3(0x1cd)),fs=require('fs'),installer=require(a0_0xe826e3(0x103)),scanner=require(a0_0xe826e3(0x157)),schedulers=require(a0_0xe826e3(0x20f)),topology=require(a0_0xe826e3(0x15f)),setup=require(a0_0xe826e3(0x172)),recorder=require(a0_0xe826e3(0x184)),pythonBridge=require(a0_0xe826e3(0x125)),aiAgent=require(a0_0xe826e3(0x137)),deadMan=require(a0_0xe826e3(0x23b)),automation=require(a0_0xe826e3(0x17d)),GEMINI_MODEL=a0_0xe826e3(0x162);function a0_0x1e21(_0x4d2c7f,_0x44ac1a){const _0x29d17b=a0_0x19ab();return a0_0x1e21=function(_0xe52be0,_0x1051fc){_0xe52be0=_0xe52be0-0xfb;let _0x19ab90=_0x29d17b[_0xe52be0];return _0x19ab90;},a0_0x1e21(_0x4d2c7f,_0x44ac1a);}class CogniLiving extends utils[a0_0xe826e3(0x219)]{constructor(_0x231f3b){const _0x4929ef=a0_0xe826e3;super({..._0x231f3b,'name':'cogni-living'}),this['eventHistory']=[],this[_0x4929ef(0xfd)]=[],this['rawEventLog']=[],this[_0x4929ef(0x1f4)]=[],this[_0x4929ef(0x1e5)]={},this['systemConfig']={'latitude':0x0,'longitude':0x0,'city':''},this[_0x4929ef(0x1ec)]=!![],this[_0x4929ef(0x1d5)]=null,this[_0x4929ef(0x116)]=null,this[_0x4929ef(0x12b)]=![],this[_0x4929ef(0x222)]=null,this['geminiModel']=null,this['currentSystemMode']=setup[_0x4929ef(0x185)][_0x4929ef(0x207)],this[_0x4929ef(0x138)]=![],this['lastAlertState']=![],this[_0x4929ef(0x23e)]=null,this[_0x4929ef(0x135)]=null,this['modeResetJob']=null,this[_0x4929ef(0x156)]=null,this[_0x4929ef(0x213)]=null,this[_0x4929ef(0x130)]=null,this[_0x4929ef(0x221)]=null,this[_0x4929ef(0x180)]=null,this[_0x4929ef(0x140)]=null,this[_0x4929ef(0x105)]=![],this[_0x4929ef(0x1f7)]=Date['now'](),this[_0x4929ef(0x182)]=null,this[_0x4929ef(0x154)]=Date[_0x4929ef(0x144)](),this[_0x4929ef(0x109)]=![],this[_0x4929ef(0x223)]=[],this[_0x4929ef(0x15a)]={'health':!![],'security':!![],'energy':!![],'comfort':!![]},this['on']('ready',this[_0x4929ef(0x112)][_0x4929ef(0x18f)](this)),this['on'](_0x4929ef(0x1c1),this[_0x4929ef(0x150)]['bind'](this)),this['on']('unload',this[_0x4929ef(0x191)]['bind'](this)),this['on']('message',this[_0x4929ef(0x1db)][_0x4929ef(0x18f)](this));}async[a0_0xe826e3(0x112)](){const _0xba81bb=a0_0xe826e3;this[_0xba81bb(0x183)][_0xba81bb(0x10c)](_0xba81bb(0x1fd)+this[_0xba81bb(0x202)]+_0xba81bb(0x1fe));if(this[_0xba81bb(0x170)]['moduleHealth']!==undefined)this[_0xba81bb(0x15a)][_0xba81bb(0x16b)]=this[_0xba81bb(0x170)][_0xba81bb(0x168)];if(this[_0xba81bb(0x170)][_0xba81bb(0x110)]!==undefined)this[_0xba81bb(0x15a)][_0xba81bb(0x1b5)]=this[_0xba81bb(0x170)]['moduleSecurity'];if(this['config'][_0xba81bb(0x21c)]!==undefined)this['activeModules']['energy']=this[_0xba81bb(0x170)][_0xba81bb(0x21c)];if(this['config']['moduleComfort']!==undefined)this['activeModules'][_0xba81bb(0x128)]=this[_0xba81bb(0x170)][_0xba81bb(0x226)];if(this['config'][_0xba81bb(0x1c7)])this['activeModules']={...this['activeModules'],...this[_0xba81bb(0x170)]['modules']};this['startSystem']();}async[a0_0xe826e3(0x206)](){const _0x463304=a0_0xe826e3;await setup[_0x463304(0x21a)](this);try{this[_0x463304(0x138)]=await setup[_0x463304(0x235)](this['config'][_0x463304(0x1df)]);}catch(_0x3661d8){}if(!this[_0x463304(0x170)]['inactivityThresholdHours']||this['config']['inactivityThresholdHours']<0.1)this[_0x463304(0x170)][_0x463304(0x160)]=0xc;await setup['initHistory'](this),await setup[_0x463304(0x1a7)](this);try{const _0x3436e1=await this[_0x463304(0x189)](_0x463304(0x169)),_0x145172=await this[_0x463304(0x189)](_0x463304(0x212));_0x3436e1&&_0x3436e1['val']&&_0x145172&&_0x145172[_0x463304(0x102)]&&(Date[_0x463304(0x144)]()-_0x3436e1['ts']<0x4*0xe10*0x3e8&&(this[_0x463304(0x182)]={'times':JSON[_0x463304(0x1c4)](_0x3436e1[_0x463304(0x102)]),'sources':JSON[_0x463304(0x1c4)](_0x145172['val'])}));}catch(_0x188e5b){}if(this[_0x463304(0x170)][_0x463304(0x12d)])try{this[_0x463304(0x222)]=new GoogleGenerativeAI(this[_0x463304(0x170)][_0x463304(0x12d)]),this[_0x463304(0x101)]=this[_0x463304(0x222)][_0x463304(0x1a8)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x463304(0x179)}});}catch(_0xc5fbb1){this[_0x463304(0x183)][_0x463304(0x146)](_0x463304(0x10a)+_0xc5fbb1[_0x463304(0x181)]);}await setup[_0x463304(0x14f)](this),await this[_0x463304(0x1ed)](),schedulers[_0x463304(0x1a6)](this),await this[_0x463304(0x16a)]('analysis.visualization.pulse',{'type':_0x463304(0x1d8),'common':{'name':_0x463304(0x136),'type':_0x463304(0x1d1),'role':'value','read':!![],'write':![]},'native':{}}),await this[_0x463304(0x16a)](_0x463304(0x141),{'type':_0x463304(0x1d8),'common':{'name':_0x463304(0x201),'type':_0x463304(0x1aa),'role':_0x463304(0x211),'read':!![],'write':![],'def':'{\x22today\x22:{},\x20\x22yesterday\x22:{},\x20\x22date\x22:\x22\x22}'},'native':{}}),await this['setObjectNotExistsAsync']('analysis.activity.roomHistory',{'type':'state','common':{'name':'Room\x20History\x20(24h\x20Buckets)','type':_0x463304(0x1aa),'role':_0x463304(0x211),'read':!![],'write':![],'def':'{\x22history\x22:{}}'},'native':{}}),await this[_0x463304(0x16a)](_0x463304(0x165),{'type':_0x463304(0x1d8),'common':{'name':'Gemini\x20Report\x20Night','type':_0x463304(0x1aa),'role':_0x463304(0x143),'read':!![],'write':![],'def':_0x463304(0x1f6)},'native':{}}),await this[_0x463304(0x16a)](_0x463304(0x11c),{'type':_0x463304(0x1d8),'common':{'name':_0x463304(0x1e4),'type':_0x463304(0x1aa),'role':'text','read':!![],'write':![],'def':_0x463304(0x1f6)},'native':{}}),await this['setObjectNotExistsAsync']('analysis.health.todayVector',{'type':_0x463304(0x1d8),'common':{'name':_0x463304(0x158),'type':_0x463304(0x1aa),'role':_0x463304(0x211),'read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x463304(0x16a)](_0x463304(0x1b1),{'type':_0x463304(0x1d8),'common':{'name':_0x463304(0x236),'type':'string','role':_0x463304(0x211),'read':!![],'write':![],'def':'[]'},'native':{}}),await this['setObjectNotExistsAsync'](_0x463304(0x1fb),{'type':_0x463304(0x1d8),'common':{'name':_0x463304(0x19c),'type':_0x463304(0x1d1),'role':_0x463304(0x132),'unit':'%','read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x463304(0x169),{'type':'state','common':{'name':'Warm-Up\x20Time','type':_0x463304(0x1aa),'role':_0x463304(0x211),'read':!![],'write':![]},'native':{}});try{const _0x246037=await this['getStateAsync'](_0x463304(0x1de));if(_0x246037&&_0x246037[_0x463304(0x102)]){this[_0x463304(0x151)]=JSON['parse'](_0x246037[_0x463304(0x102)]);if(this['isProVersion']){const _0x2a9803=await this[_0x463304(0x189)](_0x463304(0x1cc));if(_0x2a9803&&_0x2a9803[_0x463304(0x102)])this[_0x463304(0x217)]=JSON[_0x463304(0x1c4)](_0x2a9803['val']);}this[_0x463304(0x183)][_0x463304(0x10c)](_0x463304(0x17e)+this[_0x463304(0x151)][_0x463304(0x1c8)]+_0x463304(0x1d6));}}catch(_0x372c48){this['eventHistory']=[];}try{const _0x1ce54a=await this[_0x463304(0x189)](_0x463304(0x194));if(_0x1ce54a&&_0x1ce54a[_0x463304(0x102)])this['dailyDigests']=JSON[_0x463304(0x1c4)](_0x1ce54a[_0x463304(0x102)]);}catch(_0x47c912){this[_0x463304(0x1f4)]=[];}const _0x298dca=this['dailyDigests'][_0x463304(0x1c8)]>=(this['config'][_0x463304(0x11d)]||0x7)?_0x463304(0x1a1)+this[_0x463304(0x1f4)]['length']+_0x463304(0x19e):_0x463304(0x20c)+this[_0x463304(0x1f4)][_0x463304(0x1c8)]+'/'+(this[_0x463304(0x170)][_0x463304(0x11d)]||0x7)+')';await this[_0x463304(0x175)](_0x463304(0x13f),{'val':_0x298dca,'ack':!![]}),this['subscribeStates'](_0x463304(0x1d3)),this['subscribeStates']('LTM.triggerDailyDigest'),this[_0x463304(0x210)]('analysis.training.triggerHealth');this[_0x463304(0x170)][_0x463304(0x167)]&&this['config'][_0x463304(0x18e)]&&this['activeModules']['security']&&this[_0x463304(0x1be)](this[_0x463304(0x170)][_0x463304(0x18e)]);const _0x2d53b6=this['config'][_0x463304(0x188)];if(_0x2d53b6)for(const _0x2acbe2 of _0x2d53b6){await this['subscribeForeignStatesAsync'](_0x2acbe2['id']);}const _0x727ae2=this[_0x463304(0x170)][_0x463304(0x19f)];if(_0x727ae2)for(const _0x1d14da of _0x727ae2){await this[_0x463304(0x1f9)](_0x1d14da);}const _0x2de27d=require(_0x463304(0x200));if(this[_0x463304(0x130)])this[_0x463304(0x130)][_0x463304(0x1eb)]();this['historyJob']=_0x2de27d[_0x463304(0x218)](_0x463304(0x192),()=>{const _0x5f215f=_0x463304;this[_0x5f215f(0x177)]();}),setTimeout(()=>this['replayTodayEvents'](),0x1388);if(this[_0x463304(0x140)])clearInterval(this[_0x463304(0x140)]);this[_0x463304(0x1ad)](),this[_0x463304(0x140)]=setInterval(async()=>{const _0x320c12=_0x463304;await this[_0x320c12(0x1ad)]();},0x3c*0x3e8);if(this[_0x463304(0x180)])clearInterval(this[_0x463304(0x180)]);this['healthTrendInterval']=setInterval(()=>{const _0x10bd6f=_0x463304;this[_0x10bd6f(0x138)]&&this['activeModules'][_0x10bd6f(0x16b)]&&this[_0x10bd6f(0x208)]();},0x4*0x3c*0x3c*0x3e8);const _0x59e24d=path[_0x463304(0x21e)](__dirname,'.venv',_0x463304(0x13b),_0x463304(0x117));pythonBridge['startService'](this,_0x59e24d);}[a0_0xe826e3(0x191)](_0xdb53ba){const _0x1d3c9e=a0_0xe826e3;if(this['historyJob'])this['historyJob'][_0x1d3c9e(0x1eb)]();this[_0x1d3c9e(0x177)]()[_0x1d3c9e(0x153)](()=>{const _0x350e7a=_0x1d3c9e;if(this[_0x350e7a(0x23e)])clearInterval(this[_0x350e7a(0x23e)]);if(this[_0x350e7a(0x140)])clearInterval(this[_0x350e7a(0x140)]);recorder[_0x350e7a(0x159)](this),pythonBridge[_0x350e7a(0x1b7)](this),_0xdb53ba();});}async[a0_0xe826e3(0x1ae)](){const _0x175b91=a0_0xe826e3;if(!this['eventHistory']||this[_0x175b91(0x151)][_0x175b91(0x1c8)]===0x0){this['log']['warn'](_0x175b91(0x171));return;}this[_0x175b91(0x183)]['info'](_0x175b91(0x1af)+this['eventHistory'][_0x175b91(0x1c8)]+_0x175b91(0x152));const _0x17cf2e=new Date()[_0x175b91(0x20a)](0x0,0x0,0x0,0x0),_0x1140d5=_0x175b91(0x1a9);let _0xa957db={'history':{},'date':new Date()[_0x175b91(0x19b)]()};const _0x42126d=_0x175b91(0x1bd),_0x51a60d=_0x175b91(0x1b1);let _0xf192d2=new Array(0x30)['fill'](0x0),_0x3ef8b4=Array['from']({'length':0x30},()=>[]);this[_0x175b91(0x151)]['forEach'](_0x565510=>{const _0xf5795b=_0x175b91;if(_0x565510[_0xf5795b(0x1fc)]>=_0x17cf2e){if(recorder[_0xf5795b(0x13e)](_0x565510[_0xf5795b(0x203)],_0x565510[_0xf5795b(0x132)])){const _0x46544a=new Date(_0x565510[_0xf5795b(0x1fc)]),_0x56f7d1=_0x46544a[_0xf5795b(0x12f)]()*0x2+(_0x46544a['getMinutes']()>=0x1e?0x1:0x0);if(_0x56f7d1<0x30){_0xf192d2[_0x56f7d1]++;const _0x4bd901=_0x565510[_0xf5795b(0x1bf)]||_0x565510['name']||'?';let _0x175f00=_0x3ef8b4[_0x56f7d1];!_0x175f00['includes'](_0x4bd901)&&_0x175f00[_0xf5795b(0x1ea)](_0x4bd901);}const _0x21a4c8=_0x46544a[_0xf5795b(0x12f)]();let _0x35c68c=_0x565510[_0xf5795b(0x1bf)]||_0xf5795b(0xfb);const _0x5030a3=(this['config'][_0xf5795b(0x188)]||[])[_0xf5795b(0x1d2)](_0x415284=>_0x415284[_0xf5795b(0x1bf)]===_0x35c68c);if(_0x5030a3)_0x35c68c=_0x5030a3[_0xf5795b(0x1bf)];if(!_0xa957db[_0xf5795b(0x186)][_0x35c68c])_0xa957db[_0xf5795b(0x186)][_0x35c68c]=new Array(0x18)[_0xf5795b(0x142)](0x0);if(_0xa957db['history'][_0x35c68c][_0x21a4c8]<0x3c)_0xa957db[_0xf5795b(0x186)][_0x35c68c][_0x21a4c8]++;}}});const _0x2a2e0e=await this[_0x175b91(0x189)](_0x1140d5);(!_0x2a2e0e||!_0x2a2e0e[_0x175b91(0x102)]||_0x2a2e0e[_0x175b91(0x102)]==='{}'||_0x2a2e0e['val'][_0x175b91(0x173)](_0x175b91(0x18b)))&&await this['setStateAsync'](_0x1140d5,{'val':JSON[_0x175b91(0x22c)](_0xa957db),'ack':!![]}),await this['setStateAsync'](_0x42126d,{'val':JSON[_0x175b91(0x22c)](_0xf192d2),'ack':!![]}),await this[_0x175b91(0x175)](_0x51a60d,{'val':JSON[_0x175b91(0x22c)](_0x3ef8b4),'ack':!![]}),this[_0x175b91(0x183)][_0x175b91(0x10c)](_0x175b91(0xff));}async[a0_0xe826e3(0x177)](){const _0x528424=a0_0xe826e3;if(!this[_0x528424(0x15a)]['health'])return;const _0x5caae6=new Date()[_0x528424(0x21f)]()['split']('T')[0x0];this[_0x528424(0x183)][_0x528424(0x239)](_0x528424(0x1b4)+_0x5caae6+_0x528424(0x1ef));try{const [_0x1c2c4d,_0x23888c,_0x47601a,_0x377897,_0x7d81ff,_0x3a93d2]=await Promise[_0x528424(0x17f)]([this[_0x528424(0x189)](_0x528424(0x1a9)),this[_0x528424(0x189)](_0x528424(0x165)),this['getStateAsync'](_0x528424(0x11c)),this[_0x528424(0x189)](_0x528424(0x10e)),this[_0x528424(0x189)](_0x528424(0x1bd)),this[_0x528424(0x189)](_0x528424(0x1fb))]),_0x20fb53=this[_0x528424(0x151)][_0x528424(0x149)](_0x3b7584=>_0x3b7584[_0x528424(0x1fc)]>=new Date()[_0x528424(0x20a)](0x0,0x0,0x0,0x0)&&(_0x3b7584[_0x528424(0x107)]['toLowerCase']()[_0x528424(0x173)]('haust√ºr')||_0x3b7584[_0x528424(0x107)][_0x528424(0x14d)]()['includes'](_0x528424(0x196)))&&(_0x3b7584[_0x528424(0x132)]===!![]||_0x3b7584['value']===_0x528424(0x20e)))[_0x528424(0x1c8)];let _0x1d4c45=0x55;if(_0x3a93d2&&_0x3a93d2[_0x528424(0x102)]!==undefined)_0x1d4c45=Math['min'](0x64,Math[_0x528424(0x11e)](0x14,Math['round'](0x50+Number(_0x3a93d2[_0x528424(0x102)])*0x5)));const _0x154f11={'date':_0x5caae6,'timestamp':Date[_0x528424(0x144)](),'roomHistory':_0x1c2c4d?.[_0x528424(0x102)]?JSON[_0x528424(0x1c4)](_0x1c2c4d[_0x528424(0x102)]):{},'geminiNight':_0x23888c?.[_0x528424(0x102)]||'Keine\x20Daten','geminiDay':_0x47601a?.['val']||_0x528424(0x147),'anomalyScore':_0x377897?.[_0x528424(0x102)]||0.1,'todayVector':_0x7d81ff?.[_0x528424(0x102)]?JSON[_0x528424(0x1c4)](_0x7d81ff[_0x528424(0x102)]):new Array(0x30)[_0x528424(0x142)](0x0),'batteryLevel':_0x1d4c45,'freshAirCount':_0x20fb53,'eventHistory':this[_0x528424(0x151)]},_0x1f98bb=utils[_0x528424(0x19a)](),_0x23d27c=path['join'](_0x1f98bb,_0x528424(0x18d),_0x528424(0x186));if(!fs[_0x528424(0x1d0)](_0x23d27c))fs[_0x528424(0x1f3)](_0x23d27c,{'recursive':!![]});const _0x19113e=path[_0x528424(0x21e)](_0x23d27c,_0x5caae6+'.json');fs[_0x528424(0x205)](_0x19113e,JSON[_0x528424(0x22c)](_0x154f11)),this['log']['info']('‚úÖ\x20History\x20saved:\x20'+_0x19113e);}catch(_0x2c549c){this[_0x528424(0x183)][_0x528424(0x146)]('History\x20Save\x20Error:\x20'+_0x2c549c[_0x528424(0x181)]);}}async[a0_0xe826e3(0x1ad)](){const _0x53781a=a0_0xe826e3;if(!this[_0x53781a(0x1ec)])return;try{let _0x1fb770=null;try{const _0x14b132=await this['getStateAsync']('analysis.prediction.trackerTopRoom'),_0xc22029=await this[_0x53781a(0x189)](_0x53781a(0x1e0));if(_0x14b132&&_0x14b132['val']&&_0xc22029&&_0xc22029[_0x53781a(0x102)]&&_0xc22029[_0x53781a(0x102)]>0.3){if(_0x14b132[_0x53781a(0x102)]!==_0x53781a(0xfb)&&_0x14b132[_0x53781a(0x102)]!==_0x53781a(0x23d))_0x1fb770=_0x14b132[_0x53781a(0x102)];}}catch(_0x213091){}if(!_0x1fb770){const _0x1b01b1=this['config']['devices']||[];for(const _0x51e134 of _0x1b01b1){if(_0x51e134[_0x53781a(0x203)]===_0x53781a(0x1a5)&&_0x51e134[_0x53781a(0x1bf)])try{const _0x450367=await this[_0x53781a(0x106)](_0x51e134['id']);if(_0x450367&&(_0x450367[_0x53781a(0x102)]===!![]||_0x450367[_0x53781a(0x102)]==='on'||_0x450367[_0x53781a(0x102)]===0x1)){_0x1fb770=_0x51e134[_0x53781a(0x1bf)];break;}}catch(_0x4c4cb9){}}}if(!_0x1fb770)return;const _0x1c19d3=this[_0x53781a(0x170)]['devices']||[];let _0x58a54f=_0x1fb770;const _0x1b0700=_0x1c19d3[_0x53781a(0x1d2)](_0x4f42cf=>_0x4f42cf[_0x53781a(0x1bf)]&&_0x4f42cf['location'][_0x53781a(0x14d)]()===_0x1fb770['toLowerCase']());if(_0x1b0700)_0x58a54f=_0x1b0700[_0x53781a(0x1bf)];const _0x285b0f=_0x53781a(0x1a9),_0x10ba1b=await this[_0x53781a(0x189)](_0x285b0f),_0xabe4f0=new Date()[_0x53781a(0x19b)]();let _0x9274c8={'history':{},'date':_0xabe4f0};if(_0x10ba1b&&_0x10ba1b[_0x53781a(0x102)])try{_0x9274c8=JSON[_0x53781a(0x1c4)](_0x10ba1b[_0x53781a(0x102)]);}catch(_0xf46dae){}_0x9274c8[_0x53781a(0x1c3)]!==_0xabe4f0&&(_0x9274c8['history']={},_0x9274c8[_0x53781a(0x1c3)]=_0xabe4f0);if(!_0x9274c8[_0x53781a(0x186)][_0x58a54f])_0x9274c8['history'][_0x58a54f]=new Array(0x18)[_0x53781a(0x142)](0x0);const _0xe151c0=new Date()[_0x53781a(0x12f)]();if(_0x9274c8['history'][_0x58a54f][_0xe151c0]<0x3c)_0x9274c8[_0x53781a(0x186)][_0x58a54f][_0xe151c0]++;await this[_0x53781a(0x175)](_0x285b0f,{'val':JSON['stringify'](_0x9274c8),'ack':!![]});}catch(_0x2f663e){this[_0x53781a(0x183)][_0x53781a(0x204)](_0x53781a(0x15d)+_0x2f663e['message']);}}async[a0_0xe826e3(0x1db)](_0x4e4508){const _0x12e7e9=a0_0xe826e3;if(typeof _0x4e4508===_0x12e7e9(0x1c6)&&_0x4e4508[_0x12e7e9(0x181)]){if(_0x4e4508[_0x12e7e9(0x122)]===_0x12e7e9(0x233)){const _0x17c855=_0x4e4508['message'][_0x12e7e9(0x1c3)],_0x2ce462=utils[_0x12e7e9(0x19a)](),_0x305442=path[_0x12e7e9(0x21e)](_0x2ce462,'cogni-living',_0x12e7e9(0x186),_0x17c855+'.json');if(fs['existsSync'](_0x305442))try{const _0x2a2433=JSON[_0x12e7e9(0x1c4)](fs['readFileSync'](_0x305442,'utf8'));this[_0x12e7e9(0x18c)](_0x4e4508[_0x12e7e9(0x20d)],_0x4e4508['command'],{'success':!![],'data':_0x2a2433},_0x4e4508[_0x12e7e9(0x1b8)]);}catch(_0x5b67ee){this[_0x12e7e9(0x18c)](_0x4e4508[_0x12e7e9(0x20d)],_0x4e4508[_0x12e7e9(0x122)],{'success':![],'error':_0x12e7e9(0x19d)},_0x4e4508[_0x12e7e9(0x1b8)]);}else this[_0x12e7e9(0x18c)](_0x4e4508['from'],_0x4e4508['command'],{'success':![],'error':_0x12e7e9(0x108)},_0x4e4508[_0x12e7e9(0x1b8)]);}else{if(_0x4e4508[_0x12e7e9(0x122)]==='getOverviewData'){const _0x36a849=this[_0x12e7e9(0x1f4)][_0x12e7e9(0x1c8)];let _0x20276f=new Array(0x30)[_0x12e7e9(0x142)](0x0),_0x3f89f9=Array[_0x12e7e9(0x20d)]({'length':0x30},()=>[]);try{const _0x5c6e0e=await this[_0x12e7e9(0x189)]('analysis.health.todayVector');if(_0x5c6e0e&&_0x5c6e0e[_0x12e7e9(0x102)])_0x20276f=JSON[_0x12e7e9(0x1c4)](_0x5c6e0e[_0x12e7e9(0x102)]);const _0x3f23b2=await this[_0x12e7e9(0x189)](_0x12e7e9(0x1b1));if(_0x3f23b2&&_0x3f23b2['val'])_0x3f89f9=JSON['parse'](_0x3f23b2[_0x12e7e9(0x102)]);}catch(_0xbb62bf){}let _0x3c9035=new Array(0x30)[_0x12e7e9(0x142)](0x0);try{const _0x518886=new Date();_0x518886['setDate'](_0x518886[_0x12e7e9(0x228)]()-0x1);const _0x460116=_0x518886[_0x12e7e9(0x21f)]()['split']('T')[0x0],_0x3bad6a=utils['getAbsoluteDefaultDataDir'](),_0x270056=path[_0x12e7e9(0x21e)](_0x3bad6a,'cogni-living',_0x12e7e9(0x186),_0x460116+_0x12e7e9(0x1da));if(fs[_0x12e7e9(0x1d0)](_0x270056)){const _0x58b1a8=JSON['parse'](fs[_0x12e7e9(0x215)](_0x270056,_0x12e7e9(0x129)));if(_0x58b1a8&&_0x58b1a8[_0x12e7e9(0x229)])_0x3c9035=_0x58b1a8[_0x12e7e9(0x229)];}}catch(_0xceb162){}let _0xefcc9f={'today':{},'yesterday':{}};try{const _0x551fd4=await this[_0x12e7e9(0x189)](_0x12e7e9(0x141));if(_0x551fd4&&_0x551fd4['val'])_0xefcc9f=JSON[_0x12e7e9(0x1c4)](_0x551fd4[_0x12e7e9(0x102)]);}catch(_0x82a022){}let _0x5e65d5=null;try{const _0x2c6477=await this['getStateAsync'](_0x12e7e9(0x1fb));if(_0x2c6477)_0x5e65d5=_0x2c6477[_0x12e7e9(0x102)];}catch(_0x1675d1){}if(_0x5e65d5===undefined||_0x5e65d5===null){const _0x11629e=_0x20276f[_0x12e7e9(0x193)]((_0x1835f7,_0x229fc0)=>_0x1835f7+_0x229fc0,0x0),_0x27344e=Math[_0x12e7e9(0x14a)](0x2,Math[_0x12e7e9(0x11e)](-0x2,(0x64-_0x11629e)/0x32));_0x5e65d5=_0x27344e;}let _0xfdc465=![],_0x532df0='',_0x5ef11a='',_0x29e9ba='';try{const _0x4d273f=await this['getStateAsync']('analysis.automation.patternDetected');if(_0x4d273f&&_0x4d273f[_0x12e7e9(0x102)]){_0xfdc465=!![];const _0x5c817f=await this[_0x12e7e9(0x189)]('analysis.automation.description');_0x532df0=_0x5c817f?_0x5c817f[_0x12e7e9(0x102)]:'';const _0x57a34c=await this[_0x12e7e9(0x189)](_0x12e7e9(0xfe));_0x5ef11a=_0x57a34c?_0x57a34c['val']:'';const _0x57c2a7=await this['getStateAsync'](_0x12e7e9(0x227));_0x29e9ba=_0x57c2a7?_0x57c2a7['val']:'';}}catch(_0x2f2bcb){}const _0x1c6d4f=await this['checkSolarCondition'](),_0x3e3b9d=(this[_0x12e7e9(0x170)][_0x12e7e9(0x188)]||[])[_0x12e7e9(0x1dc)](_0x5f411d=>_0x5f411d[_0x12e7e9(0x1c9)]),_0x40966f=_0x1c6d4f&&_0x3e3b9d;let _0x53e8e1='';try{const _0x5f0003=await this[_0x12e7e9(0x189)](_0x12e7e9(0x17b));if(_0x5f0003&&_0x5f0003[_0x12e7e9(0x102)])_0x53e8e1=_0x5f0003['val'];}catch(_0x58d446){}this['sendTo'](_0x4e4508['from'],_0x4e4508[_0x12e7e9(0x122)],{'success':!![],'eventHistory':this[_0x12e7e9(0x151)]['slice'](0x0,0x7d0),'stats':{'digestCount':_0x36a849,'isPresent':this[_0x12e7e9(0x1ec)],'hourlyActivity':_0x20276f,'hourlyDetails':_0x3f89f9,'yesterdayActivity':_0x3c9035,'solarActive':_0x40966f,'presenceWho':_0x53e8e1,'roomStats':_0xefcc9f,'activityTrend':_0x5e65d5,'modules':this[_0x12e7e9(0x15a)]},'automation':{'detected':_0xfdc465,'description':_0x532df0,'targetId':_0x5ef11a,'targetValue':_0x29e9ba}},_0x4e4508[_0x12e7e9(0x1b8)]);}else{if(_0x4e4508['command']===_0x12e7e9(0x1ce))try{const _0x48817f=await automation[_0x12e7e9(0x1ff)](this);this[_0x12e7e9(0x18c)](_0x4e4508[_0x12e7e9(0x20d)],_0x4e4508[_0x12e7e9(0x122)],{'success':!![],'results':_0x48817f},_0x4e4508['callback']);}catch(_0x1a2465){this[_0x12e7e9(0x18c)](_0x4e4508[_0x12e7e9(0x20d)],_0x4e4508[_0x12e7e9(0x122)],{'success':![],'error':_0x1a2465[_0x12e7e9(0x181)]},_0x4e4508[_0x12e7e9(0x1b8)]);}else{if(_0x4e4508['command']==='scanDevices')try{const _0x39c554=await scanner[_0x12e7e9(0x1ac)](this,_0x4e4508[_0x12e7e9(0x181)]||{});this['sendTo'](_0x4e4508[_0x12e7e9(0x20d)],_0x4e4508[_0x12e7e9(0x122)],{'success':!![],'devices':_0x39c554},_0x4e4508[_0x12e7e9(0x1b8)]);}catch(_0x303162){}else{if(_0x4e4508['command']===_0x12e7e9(0x198)){const _0xbc06cc=await this[_0x12e7e9(0x126)](_0x12e7e9(0x161),'enum'),_0x1b248f=[];if(_0xbc06cc)for(const _0x5d9053 in _0xbc06cc){let _0x42530a=_0xbc06cc[_0x5d9053][_0x12e7e9(0x1f2)][_0x12e7e9(0x107)];if(_0x42530a&&typeof _0x42530a===_0x12e7e9(0x1c6))_0x42530a=_0x42530a['de']||_0x42530a['en']||Object[_0x12e7e9(0x104)](_0x42530a)[0x0]||JSON[_0x12e7e9(0x22c)](_0x42530a);_0x1b248f['push']({'id':_0x5d9053,'name':String(_0x42530a||_0x5d9053)});}const _0x543e4a=await this['getForeignObjectsAsync'](_0x12e7e9(0x1ab),_0x12e7e9(0x12a)),_0x32dfae=[];if(_0x543e4a)for(const _0x1c8605 in _0x543e4a){let _0x522017=_0x543e4a[_0x1c8605]['common'][_0x12e7e9(0x107)];if(_0x522017&&typeof _0x522017==='object')_0x522017=_0x522017['de']||_0x522017['en']||Object[_0x12e7e9(0x104)](_0x522017)[0x0]||JSON[_0x12e7e9(0x22c)](_0x522017);_0x32dfae[_0x12e7e9(0x1ea)](String(_0x522017||_0x1c8605[_0x12e7e9(0x1b0)]('.')[_0x12e7e9(0x174)]()));}this[_0x12e7e9(0x18c)](_0x4e4508[_0x12e7e9(0x20d)],_0x4e4508[_0x12e7e9(0x122)],{'success':!![],'enums':_0x1b248f,'rooms':_0x32dfae},_0x4e4508['callback']);}else{if(_0x4e4508[_0x12e7e9(0x122)]===_0x12e7e9(0x234))try{const _0x58bfc5=await this[_0x12e7e9(0x16f)](_0x12e7e9(0x17a),'instance',{'startkey':'system.adapter.ical.','endkey':_0x12e7e9(0x13d)}),_0x545ea6=new Set();if(_0x58bfc5&&_0x58bfc5[_0x12e7e9(0x1d7)])for(const _0x5a9b59 of _0x58bfc5[_0x12e7e9(0x1d7)]){const _0x38600d=_0x5a9b59['id'][_0x12e7e9(0x195)](_0x12e7e9(0x12c),''),_0x314cfa=await this[_0x12e7e9(0x106)](_0x38600d+_0x12e7e9(0x15c));let _0x3a07db=![];if(_0x314cfa&&_0x314cfa['val']){const _0x55812f=typeof _0x314cfa[_0x12e7e9(0x102)]==='string'?JSON[_0x12e7e9(0x1c4)](_0x314cfa[_0x12e7e9(0x102)]):_0x314cfa[_0x12e7e9(0x102)];Array[_0x12e7e9(0x1cf)](_0x55812f)&&_0x55812f[_0x12e7e9(0x12e)](_0xf66747=>{const _0xd0b82=_0x12e7e9;_0xf66747[_0xd0b82(0x232)]&&(_0x545ea6[_0xd0b82(0x18a)](_0xf66747['calendarName']),_0x3a07db=!![]);});}!_0x3a07db&&_0x545ea6['add'](_0x38600d);}const _0x1b0862=Array[_0x12e7e9(0x20d)](_0x545ea6);if(_0x1b0862[_0x12e7e9(0x1c8)]===0x0)_0x1b0862[_0x12e7e9(0x1ea)]('Standard');this[_0x12e7e9(0x18c)](_0x4e4508[_0x12e7e9(0x20d)],_0x4e4508[_0x12e7e9(0x122)],{'success':!![],'names':_0x1b0862},_0x4e4508[_0x12e7e9(0x1b8)]);}catch(_0x4c3cc8){this['sendTo'](_0x4e4508[_0x12e7e9(0x20d)],_0x4e4508[_0x12e7e9(0x122)],{'success':![],'error':_0x12e7e9(0x1ba)+_0x4c3cc8['message']},_0x4e4508['callback']);}else{if(_0x4e4508[_0x12e7e9(0x122)]===_0x12e7e9(0x1e8))try{const _0xd055ca=_0x4e4508[_0x12e7e9(0x181)]?_0x4e4508['message']['apiKey']:'';if(!_0xd055ca)throw new Error(_0x12e7e9(0x176));const _0x30dbcd=new GoogleGenerativeAI(_0xd055ca),_0x2a1d78=_0x30dbcd['getGenerativeModel']({'model':GEMINI_MODEL}),_0x19be22=await _0x2a1d78[_0x12e7e9(0x16e)](_0x12e7e9(0x23c)),_0x17b9a1=await _0x19be22[_0x12e7e9(0x1b2)],_0x3983e9=_0x17b9a1[_0x12e7e9(0x143)]();this[_0x12e7e9(0x18c)](_0x4e4508[_0x12e7e9(0x20d)],_0x4e4508[_0x12e7e9(0x122)],{'success':!![],'message':_0x12e7e9(0x1f8)+_0x3983e9['substring'](0x0,0x14)+_0x12e7e9(0x1ef)},_0x4e4508[_0x12e7e9(0x1b8)]);}catch(_0xa59f1b){this[_0x12e7e9(0x18c)](_0x4e4508[_0x12e7e9(0x20d)],_0x4e4508['command'],{'success':![],'message':_0xa59f1b[_0x12e7e9(0x181)]},_0x4e4508[_0x12e7e9(0x1b8)]);}else{if(_0x4e4508[_0x12e7e9(0x122)]==='testContext')try{const _0x600005=await this[_0x12e7e9(0x1c2)](),_0x801aa9=await this['getObjectViewAsync'](_0x12e7e9(0x17a),_0x12e7e9(0x1c5),{'startkey':'system.adapter.ical.','endkey':'system.adapter.ical.È¶ô'}),_0x3070f5=_0x801aa9&&_0x801aa9[_0x12e7e9(0x1d7)]?_0x801aa9['rows'][_0x12e7e9(0x1c8)]:0x0;this[_0x12e7e9(0x18c)](_0x4e4508[_0x12e7e9(0x20d)],_0x4e4508[_0x12e7e9(0x122)],{'success':!![],'weather':_0x12e7e9(0x190)+_0x600005+_0x12e7e9(0x22f)+(this[_0x12e7e9(0x1e5)][this[_0x12e7e9(0x170)][_0x12e7e9(0x15b)]]||'?')+'¬∞C','calendar':_0x3070f5+_0x12e7e9(0x118)},_0x4e4508[_0x12e7e9(0x1b8)]);}catch(_0x2108ae){this['sendTo'](_0x4e4508[_0x12e7e9(0x20d)],_0x4e4508[_0x12e7e9(0x122)],{'success':![]},_0x4e4508[_0x12e7e9(0x1b8)]);}}}}}}}}}}['runPythonHealthCheck'](){const _0x4aafdf=a0_0xe826e3;if(!this[_0x4aafdf(0x15a)]['health'])return;this['log'][_0x4aafdf(0x239)](_0x4aafdf(0x22e));try{const _0x9428f5=this[_0x4aafdf(0x217)]||[];pythonBridge[_0x4aafdf(0x123)](this,_0x4aafdf(0x16d),{'events':_0x9428f5});}catch(_0x530aee){this[_0x4aafdf(0x183)][_0x4aafdf(0x204)]('Failed\x20to\x20trigger\x20Python\x20Health\x20Check');}}async[a0_0xe826e3(0x150)](_0x81965e,_0x54ec3a){const _0x28bf57=a0_0xe826e3;if(!_0x54ec3a||this[_0x28bf57(0x105)])return;if(_0x81965e[_0x28bf57(0x173)](_0x28bf57(0xfc))&&_0x81965e[_0x28bf57(0x220)]('communicate.request')&&_0x54ec3a[_0x28bf57(0x102)])return;if(this['config'][_0x28bf57(0x167)]&&_0x81965e===this[_0x28bf57(0x170)][_0x28bf57(0x18e)]&&this[_0x28bf57(0x15a)][_0x28bf57(0x1b5)]){this['handleInfrasound'](_0x54ec3a[_0x28bf57(0x102)]);return;}if(_0x54ec3a['ack']&&_0x81965e[_0x28bf57(0x220)]('pulse'))return;if(_0x81965e===this[_0x28bf57(0x197)]+_0x28bf57(0x21d)){if(_0x54ec3a[_0x28bf57(0x102)]&&Object[_0x28bf57(0x104)](setup[_0x28bf57(0x185)])[_0x28bf57(0x173)](_0x54ec3a[_0x28bf57(0x102)])){this[_0x28bf57(0x111)]=_0x54ec3a['val'];if(_0x54ec3a[_0x28bf57(0x102)]===setup[_0x28bf57(0x185)][_0x28bf57(0x14e)])await recorder[_0x28bf57(0x164)](this,![]);else await recorder[_0x28bf57(0x164)](this,!![]);if(this[_0x28bf57(0x138)]){let _0x46b245=![],_0x4728bc=0x0,_0x46cc84=_0x28bf57(0x11b);if(this[_0x28bf57(0x111)]===_0x28bf57(0x15e))_0x46b245=!![],_0x4728bc=0x168,_0x46cc84=_0x28bf57(0x14c);else this[_0x28bf57(0x111)]===_0x28bf57(0x1a2)&&(_0x46b245=!![],_0x4728bc=0x5a0,_0x46cc84=_0x28bf57(0x120));pythonBridge[_0x28bf57(0x123)](this,_0x28bf57(0x1ee),{'active':_0x46b245,'duration':_0x4728bc,'label':_0x46cc84}),await this[_0x28bf57(0x175)](_0x28bf57(0x1a3),{'val':JSON[_0x28bf57(0x22c)]({'active':_0x46b245,'label':_0x46cc84,'timestamp':Date[_0x28bf57(0x144)]()}),'ack':!![]});}}if(!_0x54ec3a[_0x28bf57(0x11a)])this['setState'](_0x81965e,{'val':this[_0x28bf57(0x111)],'ack':!![]});return;}if(_0x81965e['endsWith'](_0x28bf57(0x212))&&_0x54ec3a['ack'])this[_0x28bf57(0x121)](_0x54ec3a['val']);if(_0x81965e[_0x28bf57(0x220)]('analysis.energy.warmupTimes')&&_0x54ec3a[_0x28bf57(0x11a)]&&this[_0x28bf57(0x15a)]['energy'])automation[_0x28bf57(0x1b3)](this);if(!_0x54ec3a[_0x28bf57(0x11a)]){if(_0x81965e['includes'](_0x28bf57(0x1d3))&&_0x54ec3a['val']){this[_0x28bf57(0x1e9)](_0x81965e,{'val':![],'ack':!![]}),aiAgent[_0x28bf57(0x1cb)](this);return;}if(_0x81965e[_0x28bf57(0x173)](_0x28bf57(0x10f))&&_0x54ec3a[_0x28bf57(0x102)]){this['setState'](_0x81965e,{'val':![],'ack':!![]});if(this[_0x28bf57(0x138)])aiAgent[_0x28bf57(0x1a0)](this,pythonBridge);return;}if(_0x81965e[_0x28bf57(0x173)](_0x28bf57(0x131))&&_0x54ec3a['val']){this[_0x28bf57(0x1e9)](_0x81965e,{'val':![],'ack':!![]}),aiAgent[_0x28bf57(0x124)](this);return;}if(_0x81965e[_0x28bf57(0x173)](_0x28bf57(0x1d4))&&_0x54ec3a['val']){this[_0x28bf57(0x1e9)](_0x81965e,{'val':![],'ack':!![]}),aiAgent[_0x28bf57(0x1bc)](this);return;}if(_0x81965e[_0x28bf57(0x173)](_0x28bf57(0x1f5))&&_0x54ec3a[_0x28bf57(0x102)]){this[_0x28bf57(0x1e9)](_0x81965e,{'val':![],'ack':!![]});if(this[_0x28bf57(0x138)])try{const _0x299e52=await this[_0x28bf57(0x189)]('LTM.trainingData.sequences');if(_0x299e52&&_0x299e52[_0x28bf57(0x102)]){const _0x3a2b7a=JSON['parse'](_0x299e52[_0x28bf57(0x102)]);this['setStateAsync'](_0x28bf57(0x209),{'val':_0x28bf57(0x115),'ack':!![]}),pythonBridge['send'](this,_0x28bf57(0x231),{'sequences':_0x3a2b7a});}}catch(_0x2c8675){}return;}if(_0x81965e[_0x28bf57(0x173)]('analysis.training.triggerHealth')&&_0x54ec3a['val']){this['setState'](_0x81965e,{'val':![],'ack':!![]});if(this[_0x28bf57(0x138)])try{this[_0x28bf57(0x208)]();const _0x293bd6=await this[_0x28bf57(0x189)]('LTM.dailyDigests');if(_0x293bd6&&_0x293bd6[_0x28bf57(0x102)])pythonBridge['send'](this,_0x28bf57(0x133),{'digests':JSON['parse'](_0x293bd6[_0x28bf57(0x102)])});aiAgent[_0x28bf57(0x1f1)](this,_0x28bf57(0x22b)),setTimeout(()=>aiAgent[_0x28bf57(0x1f1)](this,_0x28bf57(0x224)),0x2ee0);}catch(_0x5c1b69){}return;}if(_0x81965e['includes'](_0x28bf57(0x225))&&_0x54ec3a[_0x28bf57(0x102)]){this[_0x28bf57(0x1e9)](_0x81965e,{'val':![],'ack':!![]});if(this[_0x28bf57(0x138)])try{const _0x25bd44=await this['getStateAsync'](_0x28bf57(0x1b9));if(_0x25bd44&&_0x25bd44['val'])pythonBridge[_0x28bf57(0x123)](this,_0x28bf57(0x13a),{'points':JSON[_0x28bf57(0x1c4)](_0x25bd44[_0x28bf57(0x102)])});}catch(_0x111782){}return;}if(_0x81965e[_0x28bf57(0x173)](_0x28bf57(0x13c))&&_0x54ec3a[_0x28bf57(0x102)]){this['setState'](_0x81965e,{'val':![],'ack':!![]});if(this[_0x28bf57(0x138)])try{const _0x1a538a=await this['getStateAsync']('LTM.rawEventLog');if(_0x1a538a&&_0x1a538a[_0x28bf57(0x102)]){const _0x1f3f5b={};if(this[_0x28bf57(0x170)][_0x28bf57(0x188)])this['config'][_0x28bf57(0x188)][_0x28bf57(0x12e)](_0x14c745=>{const _0x4a8d21=_0x28bf57;if(_0x14c745['id']&&_0x14c745['type'])_0x1f3f5b[_0x14c745['id']]=_0x14c745[_0x4a8d21(0x203)];});pythonBridge['send'](this,_0x28bf57(0x237),{'events':JSON[_0x28bf57(0x1c4)](_0x1a538a[_0x28bf57(0x102)]),'deviceMap':_0x1f3f5b});}}catch(_0x37d4a8){}return;}if(_0x81965e[_0x28bf57(0x173)](_0x28bf57(0x10d))&&_0x54ec3a[_0x28bf57(0x102)]){this[_0x28bf57(0x1e9)](_0x81965e,{'val':![],'ack':!![]}),topology[_0x28bf57(0x1bb)](this);if(this[_0x28bf57(0x138)])try{const _0x105feb=await this[_0x28bf57(0x189)](_0x28bf57(0x1fa));if(_0x105feb&&_0x105feb[_0x28bf57(0x102)])pythonBridge[_0x28bf57(0x123)](this,_0x28bf57(0x114),{'sequences':JSON[_0x28bf57(0x1c4)](_0x105feb[_0x28bf57(0x102)])});}catch(_0x3fae9c){}return;}}const _0x4c67ed=(this[_0x28bf57(0x170)][_0x28bf57(0x188)]||[])[_0x28bf57(0x1d2)](_0x321e14=>_0x321e14['id']===_0x81965e);if(_0x4c67ed){const _0x5823e4=await recorder[_0x28bf57(0x1a4)](this,_0x81965e,_0x54ec3a,_0x4c67ed);_0x5823e4&&this['setState'](_0x28bf57(0x119),{'val':Date['now'](),'ack':!![]});_0x5823e4&&_0x5823e4['type']===_0x28bf57(0x1a5)&&_0x5823e4[_0x28bf57(0x1bf)]&&this['isProVersion']&&deadMan['updateLocation'](this,_0x5823e4[_0x28bf57(0x1bf)]);_0x54ec3a[_0x28bf57(0x102)]&&(_0x54ec3a[_0x28bf57(0x102)]===!![]||_0x54ec3a[_0x28bf57(0x102)]===0x1||String(_0x54ec3a[_0x28bf57(0x102)])[_0x28bf57(0x14d)]()==='open')&&(_0x4c67ed['type']&&(_0x4c67ed[_0x28bf57(0x203)][_0x28bf57(0x173)](_0x28bf57(0x238))||_0x4c67ed[_0x28bf57(0x203)]['includes'](_0x28bf57(0x166)))&&this[_0x28bf57(0x16c)](_0x4c67ed));if(_0x4c67ed[_0x28bf57(0x203)]==='temperature'||_0x4c67ed[_0x28bf57(0x203)]===_0x28bf57(0x1dd)){if(this[_0x28bf57(0x15a)][_0x28bf57(0x1b6)])automation[_0x28bf57(0x1e2)](this);}}}async[a0_0xe826e3(0x121)](_0x13d78d){const _0xd27f28=a0_0xe826e3;if(!this[_0xd27f28(0x182)]||Date[_0xd27f28(0x144)]()-this[_0xd27f28(0x154)]>0x493e0)return;try{const _0x51ab99=JSON[_0xd27f28(0x1c4)](_0x13d78d),_0x2dfe78=this['memoryCache'][_0xd27f28(0x139)];let _0x244db2=![];for(const _0x24ca97 in _0x2dfe78){if(_0x2dfe78[_0x24ca97]['includes']('AI')&&_0x51ab99[_0x24ca97]&&!_0x51ab99[_0x24ca97]['includes']('AI')){_0x244db2=!![];break;}}_0x244db2&&(await this[_0xd27f28(0x175)](_0xd27f28(0x169),{'val':JSON['stringify'](this[_0xd27f28(0x182)][_0xd27f28(0x148)]),'ack':!![]}),await this[_0xd27f28(0x175)]('analysis.energy.warmupSources',{'val':JSON[_0xd27f28(0x22c)](this[_0xd27f28(0x182)][_0xd27f28(0x139)]),'ack':!![]}));}catch(_0x47378d){}}async[a0_0xe826e3(0x1ed)](){const _0x516f1c=a0_0xe826e3;try{const _0x5e8652=await this[_0x516f1c(0x189)](setup[_0x516f1c(0x178)]);if(_0x5e8652&&_0x5e8652['val'])this[_0x516f1c(0x111)]=_0x5e8652[_0x516f1c(0x102)];}catch(_0x5370bc){this[_0x516f1c(0x111)]=setup[_0x516f1c(0x185)][_0x516f1c(0x207)];}}async[a0_0xe826e3(0x1ca)](){return![];}async[a0_0xe826e3(0x127)](){const _0x28734c=a0_0xe826e3;await aiAgent['runGeminiAnalysis'](this);this[_0x28734c(0x15a)][_0x28734c(0x16b)]&&(this[_0x28734c(0x230)](),this[_0x28734c(0x1d9)]());if(this[_0x28734c(0x15a)][_0x28734c(0x1b6)])this[_0x28734c(0x214)]();}async[a0_0xe826e3(0x1c2)](){return![];}['triggerGaitAnalysis'](){const _0xe8225d=a0_0xe826e3;if(!this[_0xe8225d(0x138)])return;}async[a0_0xe826e3(0x214)](){}[a0_0xe826e3(0x230)](){}async[a0_0xe826e3(0x10b)](_0x4c4bc0){}async[a0_0xe826e3(0x134)](_0x500ff6,_0x523cee){}async[a0_0xe826e3(0x16c)](_0x3b4632){}async['appendToLog'](_0x225d0e){}[a0_0xe826e3(0x216)](_0x2b5380){}}if(require['main']!==module)module[a0_0xe826e3(0x1e7)]=_0x225132=>new CogniLiving(_0x225132);else new CogniLiving();