const a0_0x17afd7=a0_0x34a6;(function(_0x4201cc,_0x1f1aaa){const _0x2ee991=a0_0x34a6,_0x24dfa3=_0x4201cc();while(!![]){try{const _0x41715f=-parseInt(_0x2ee991(0x1a6))/0x1*(parseInt(_0x2ee991(0x284))/0x2)+-parseInt(_0x2ee991(0x2c1))/0x3+-parseInt(_0x2ee991(0x2b6))/0x4+-parseInt(_0x2ee991(0x23d))/0x5+parseInt(_0x2ee991(0x2bd))/0x6*(-parseInt(_0x2ee991(0x1a9))/0x7)+-parseInt(_0x2ee991(0x2b1))/0x8*(-parseInt(_0x2ee991(0x295))/0x9)+parseInt(_0x2ee991(0x212))/0xa;if(_0x41715f===_0x1f1aaa)break;else _0x24dfa3['push'](_0x24dfa3['shift']());}catch(_0x2c44c2){_0x24dfa3['push'](_0x24dfa3['shift']());}}}(a0_0x1ba8,0x76715));const a0_0x13d37b=(function(){let _0x5eba4d=!![];return function(_0x144d7a,_0x5d961e){const _0x375e18=_0x5eba4d?function(){const _0x27ac7c=a0_0x34a6;if(_0x5d961e){const _0x50500b=_0x5d961e[_0x27ac7c(0x1e2)](_0x144d7a,arguments);return _0x5d961e=null,_0x50500b;}}:function(){};return _0x5eba4d=![],_0x375e18;};}()),a0_0x63a9d9=a0_0x13d37b(this,function(){const _0x1f22cf=a0_0x34a6;return a0_0x63a9d9[_0x1f22cf(0x2fb)]()[_0x1f22cf(0x2ef)]('(((.+)+)+)+$')['toString']()[_0x1f22cf(0x18d)](a0_0x63a9d9)[_0x1f22cf(0x2ef)](_0x1f22cf(0x2fe));});a0_0x63a9d9();'use strict';function a0_0x34a6(_0x526e92,_0x367981){const _0x52d2fa=a0_0x1ba8();return a0_0x34a6=function(_0x63a9d9,_0x13d37b){_0x63a9d9=_0x63a9d9-0x171;let _0x1ba864=_0x52d2fa[_0x63a9d9];return _0x1ba864;},a0_0x34a6(_0x526e92,_0x367981);}const utils=require('@iobroker/adapter-core'),{GoogleGenerativeAI}=require(a0_0x17afd7(0x22e)),schedule=require('node-schedule'),HISTORY_MAX_SIZE=0x32,ANALYSIS_HISTORY_MAX_SIZE=0x64,RAW_LOG_MAX_SIZE=0x5dc,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL=a0_0x17afd7(0x205),LTM_SCHEDULE=a0_0x17afd7(0x186),MODE_RESET_SCHEDULE=a0_0x17afd7(0x1b3),LTM_DP_RAW_LOG=a0_0x17afd7(0x2c4),LTM_DP_DAILY_DIGESTS='LTM.dailyDigests',LTM_DP_STATUS=a0_0x17afd7(0x252),LTM_DP_TRIGGER_DIGEST=a0_0x17afd7(0x2de),LTM_DP_BASELINE_STATUS=a0_0x17afd7(0x310),LTM_DP_DRIFT_CHANNEL='LTM.driftAnalysis',LTM_DP_DRIFT_STATUS=a0_0x17afd7(0x266),LTM_DP_DRIFT_DETAILS='LTM.driftAnalysis.driftDetails',LTM_DP_DRIFT_LAST_CHECK='LTM.driftAnalysis.lastCheck',SYSTEM_DP_MODE=a0_0x17afd7(0x2d4),SYSTEM_MODES={'NORMAL':a0_0x17afd7(0x2c3),'VACATION':a0_0x17afd7(0x282),'PARTY':a0_0x17afd7(0x297),'GUEST':a0_0x17afd7(0x258)},AUTO_RESET_MODES=[SYSTEM_MODES['PARTY'],SYSTEM_MODES[a0_0x17afd7(0x225)]],EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,PERSONA_MAPPING={'generic':a0_0x17afd7(0x2e4),'senior_aal':a0_0x17afd7(0x219),'family':a0_0x17afd7(0x18c),'single_comfort':'Fokus\x20auf\x20Maximierung\x20von\x20Komfort,\x20Automatisierungseffizienz\x20und\x20Energieeinsparung.','security':'PRIORIT√ÑT:\x20Sicherheit.\x20Erkenne\x20Eindringlinge,\x20ungew√∂hnliche\x20Anwesenheit.'};class CogniLiving extends utils['Adapter']{constructor(_0x3defbf){const _0xd3b30a=a0_0x17afd7;super({..._0x3defbf,'name':_0xd3b30a(0x27d)}),this['eventHistory']=[],this[_0xd3b30a(0x317)]=[],this[_0xd3b30a(0x315)]=[],this[_0xd3b30a(0x2d1)]=[],this['dailyDigests']=[],this[_0xd3b30a(0x24f)]={},this['systemConfig']={'latitude':0x0,'longitude':0x0,'city':''},this[_0xd3b30a(0x2d0)]=!![],this['exitTimer']=null,this[_0xd3b30a(0x271)]=null,this[_0xd3b30a(0x1c4)]=![],this[_0xd3b30a(0x2cc)]=null,this[_0xd3b30a(0x27f)]=null,this[_0xd3b30a(0x2d8)]=SYSTEM_MODES[_0xd3b30a(0x1d1)],this[_0xd3b30a(0x28b)]=![],this['lastAlertState']=![],this['systemUUID']=_0xd3b30a(0x289),this[_0xd3b30a(0x24b)]=null,this[_0xd3b30a(0x2e3)]=null,this[_0xd3b30a(0x2f8)]=null,this['driftAnalysisTimer']=null,this[_0xd3b30a(0x272)]=null,this['on'](_0xd3b30a(0x290),this[_0xd3b30a(0x20c)]['bind'](this)),this['on']('stateChange',this[_0xd3b30a(0x208)][_0xd3b30a(0x2ea)](this)),this['on'](_0xd3b30a(0x1aa),this[_0xd3b30a(0x2ba)][_0xd3b30a(0x2ea)](this)),this['on'](_0xd3b30a(0x20a),this[_0xd3b30a(0x230)][_0xd3b30a(0x2ea)](this));}async[a0_0x17afd7(0x20c)](){const _0x6ea5b1=a0_0x17afd7;this[_0x6ea5b1(0x25d)]['info'](_0x6ea5b1(0x1a5)+this[_0x6ea5b1(0x27e)]+')');const _0x207a91=[_0x6ea5b1(0x1d3),_0x6ea5b1(0x26b),_0x6ea5b1(0x2bb),_0x6ea5b1(0x1df),_0x6ea5b1(0x2b0),'events.history_debug_00','events.history_debug_01',_0x6ea5b1(0x1de),'events.history_debug_03',_0x6ea5b1(0x1b4)];for(const _0x57852b of _0x207a91){try{const _0x396627=await this[_0x6ea5b1(0x22f)](_0x57852b);_0x396627&&await this[_0x6ea5b1(0x1b0)](_0x57852b);}catch(_0x31d66b){}}this[_0x6ea5b1(0x1c5)]['licenseKey']=this[_0x6ea5b1(0x1c5)]['licenseKey']||'',this[_0x6ea5b1(0x28b)]=await this[_0x6ea5b1(0x30a)](this[_0x6ea5b1(0x1c5)][_0x6ea5b1(0x2ce)]);if(!this[_0x6ea5b1(0x1c5)][_0x6ea5b1(0x229)]||this[_0x6ea5b1(0x1c5)]['inactivityThresholdHours']<0.1)this[_0x6ea5b1(0x1c5)][_0x6ea5b1(0x229)]=0xc;try{await this[_0x6ea5b1(0x1ec)]();}catch(_0x576ec3){this[_0x6ea5b1(0x25d)]['error']('Error\x20initializing\x20history:\x20'+_0x576ec3[_0x6ea5b1(0x20a)]),this['eventHistory']=[],this[_0x6ea5b1(0x317)]=[];}try{const _0x17695d=await this[_0x6ea5b1(0x216)](_0x6ea5b1(0x245));_0x17695d&&_0x17695d[_0x6ea5b1(0x19d)]&&(this[_0x6ea5b1(0x280)]={'latitude':_0x17695d['common'][_0x6ea5b1(0x236)]||0x0,'longitude':_0x17695d[_0x6ea5b1(0x19d)][_0x6ea5b1(0x2da)]||0x0,'city':_0x17695d[_0x6ea5b1(0x19d)][_0x6ea5b1(0x2c9)]||''});}catch(_0x342b16){}if(this[_0x6ea5b1(0x1c5)][_0x6ea5b1(0x192)])try{this[_0x6ea5b1(0x2cc)]=new GoogleGenerativeAI(this[_0x6ea5b1(0x1c5)][_0x6ea5b1(0x192)]),this[_0x6ea5b1(0x27f)]=this[_0x6ea5b1(0x2cc)][_0x6ea5b1(0x2a3)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x6ea5b1(0x171)}}),this[_0x6ea5b1(0x25d)][_0x6ea5b1(0x21b)]('Gemini\x20AI\x20initialized.');}catch(_0x53014d){this['log'][_0x6ea5b1(0x313)](_0x6ea5b1(0x209)+_0x53014d[_0x6ea5b1(0x20a)]);}await this[_0x6ea5b1(0x235)](),await this['loadSystemMode']();try{await this[_0x6ea5b1(0x223)]();}catch(_0x2e0f0b){this['log']['error'](_0x6ea5b1(0x2bc)+_0x2e0f0b[_0x6ea5b1(0x20a)]);}try{await this[_0x6ea5b1(0x2b9)]();}catch(_0x371629){this[_0x6ea5b1(0x25d)][_0x6ea5b1(0x313)]('Error\x20loading\x20Digests:\x20'+_0x371629[_0x6ea5b1(0x20a)]);}this[_0x6ea5b1(0x1c7)]('analysis.trigger'),this[_0x6ea5b1(0x1c7)](LTM_DP_TRIGGER_DIGEST),this['subscribeStates'](_0x6ea5b1(0x2d4)),this[_0x6ea5b1(0x1c7)](_0x6ea5b1(0x217));const _0x5aff71=this['config'][_0x6ea5b1(0x211)];if(_0x5aff71&&_0x5aff71['length']>0x0){this[_0x6ea5b1(0x25d)][_0x6ea5b1(0x21b)](_0x6ea5b1(0x296)+_0x5aff71['length']+_0x6ea5b1(0x214));for(const _0x5072fe of _0x5aff71){if(_0x5072fe['id']){await this[_0x6ea5b1(0x28c)](_0x5072fe['id']);try{const _0xdde82f=await this[_0x6ea5b1(0x253)](_0x5072fe['id']);if(_0xdde82f)this['sensorLastValues'][_0x5072fe['id']]=_0xdde82f[_0x6ea5b1(0x304)];}catch(_0x595ed4){}}}}const _0xf279b6=this[_0x6ea5b1(0x1c5)][_0x6ea5b1(0x193)]||[];if(_0xf279b6[_0x6ea5b1(0x2b5)]>0x0){this[_0x6ea5b1(0x25d)][_0x6ea5b1(0x21b)](_0x6ea5b1(0x296)+_0xf279b6['length']+'\x20presence\x20devices...');for(const _0x2afd86 of _0xf279b6){await this[_0x6ea5b1(0x28c)](_0x2afd86);}await this[_0x6ea5b1(0x1a4)]();}if(this[_0x6ea5b1(0x24b)])clearInterval(this[_0x6ea5b1(0x24b)]);const _0x42ebd9=this['config'][_0x6ea5b1(0x194)]||0xf;_0x42ebd9>0x0&&(this[_0x6ea5b1(0x25d)][_0x6ea5b1(0x21b)]('Starting\x20Autopilot\x20('+_0x42ebd9+_0x6ea5b1(0x196)+this[_0x6ea5b1(0x1c5)]['inactivityThresholdHours']+'h.'),this[_0x6ea5b1(0x24b)]=setInterval(()=>this[_0x6ea5b1(0x278)](),_0x42ebd9*0x3c*0x3e8)),this[_0x6ea5b1(0x2fc)](),this[_0x6ea5b1(0x2a5)](),this[_0x6ea5b1(0x288)](),this[_0x6ea5b1(0x2f6)]();}async[a0_0x17afd7(0x1ec)](){const _0x452165=a0_0x17afd7;try{const _0x40df4a=await this[_0x452165(0x25b)]('events.history');_0x40df4a&&_0x40df4a[_0x452165(0x304)]&&(this[_0x452165(0x241)]=JSON[_0x452165(0x2e1)](_0x40df4a[_0x452165(0x304)]['toString']()));}catch(_0x3f2445){this[_0x452165(0x241)]=[];}try{const _0x51bb41=await this[_0x452165(0x25b)](_0x452165(0x198));if(_0x51bb41&&_0x51bb41[_0x452165(0x304)])this[_0x452165(0x317)]=JSON[_0x452165(0x2e1)](_0x51bb41[_0x452165(0x304)][_0x452165(0x2fb)]());}catch(_0x29cdc5){this[_0x452165(0x317)]=[];}}async[a0_0x17afd7(0x223)](){const _0xe3b4d3=a0_0x17afd7;try{const _0x1afb16=await this['getStateAsync'](LTM_DP_RAW_LOG);if(_0x1afb16&&_0x1afb16['val'])this[_0xe3b4d3(0x2d1)]=JSON[_0xe3b4d3(0x2e1)](_0x1afb16[_0xe3b4d3(0x304)]);}catch(_0x330b6c){this[_0xe3b4d3(0x2d1)]=[];}}async[a0_0x17afd7(0x305)](){const _0x57bd06=a0_0x17afd7;this[_0x57bd06(0x2d1)][_0x57bd06(0x2b5)]>RAW_LOG_MAX_SIZE&&this['rawEventLog'][_0x57bd06(0x2f0)](0x0,this[_0x57bd06(0x2d1)]['length']-RAW_LOG_MAX_SIZE),await this['setStateAsync'](LTM_DP_RAW_LOG,{'val':JSON[_0x57bd06(0x2e5)](this[_0x57bd06(0x2d1)]),'ack':!![]});}async[a0_0x17afd7(0x2b9)](){const _0x415ba2=a0_0x17afd7;try{const _0x5c787f=await this['getStateAsync'](LTM_DP_DAILY_DIGESTS);if(_0x5c787f&&_0x5c787f[_0x415ba2(0x304)])this[_0x415ba2(0x2c7)]=JSON[_0x415ba2(0x2e1)](_0x5c787f[_0x415ba2(0x304)]);}catch(_0xcb4bfe){this[_0x415ba2(0x2c7)]=[];}await this[_0x415ba2(0x1dc)]();}async[a0_0x17afd7(0x26f)](_0x5baae7=!![]){const _0x260d48=a0_0x17afd7,_0x506c83=this[_0x260d48(0x1c5)][_0x260d48(0x1d6)]||0x3c;this[_0x260d48(0x2c7)]['length']>_0x506c83&&this[_0x260d48(0x2c7)][_0x260d48(0x2f0)](0x0,this[_0x260d48(0x2c7)][_0x260d48(0x2b5)]-_0x506c83);await this[_0x260d48(0x2ff)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x260d48(0x2e5)](this[_0x260d48(0x2c7)]),'ack':!![]});if(_0x5baae7)await this[_0x260d48(0x1dc)]();}async[a0_0x17afd7(0x1dc)](){const _0x27ac41=a0_0x17afd7;if(!this[_0x27ac41(0x28b)]){await this[_0x27ac41(0x2ff)](LTM_DP_BASELINE_STATUS,{'val':_0x27ac41(0x311),'ack':!![]});return;}const _0x20e04a=this[_0x27ac41(0x2c7)][_0x27ac41(0x2b5)]>=(this['config'][_0x27ac41(0x1dd)]||0x7)?'Aktiv\x20('+this[_0x27ac41(0x2c7)][_0x27ac41(0x2b5)]+_0x27ac41(0x1fc):'Lernphase\x20('+this['dailyDigests'][_0x27ac41(0x2b5)]+'/'+(this[_0x27ac41(0x1c5)]['minDaysForBaseline']||0x7)+')';await this[_0x27ac41(0x2ff)](LTM_DP_BASELINE_STATUS,{'val':_0x20e04a,'ack':!![]});}async['updateAnalysisHistory'](_0x1c7048){const _0x50b7a0=a0_0x17afd7;this[_0x50b7a0(0x317)][_0x50b7a0(0x1fa)](_0x1c7048);if(this['analysisHistory'][_0x50b7a0(0x2b5)]>ANALYSIS_HISTORY_MAX_SIZE)this[_0x50b7a0(0x317)]['pop']();await this['setStateAsync'](_0x50b7a0(0x198),{'val':JSON[_0x50b7a0(0x2e5)](this[_0x50b7a0(0x317)]),'ack':!![]});}async['getWeatherContext'](){const _0x4e6161=a0_0x17afd7;if(!this[_0x4e6161(0x1c5)]['useWeather'])return'';let _0x55a137='';if(this[_0x4e6161(0x1c5)][_0x4e6161(0x233)])try{if(this['config'][_0x4e6161(0x233)][_0x4e6161(0x2e7)]('accuweather')){const _0x5f3c68=await this[_0x4e6161(0x253)](this['config'][_0x4e6161(0x233)]+_0x4e6161(0x23e));if(_0x5f3c68&&_0x5f3c68[_0x4e6161(0x304)])_0x55a137=_0x5f3c68['val'];}else{if(this[_0x4e6161(0x1c5)][_0x4e6161(0x233)][_0x4e6161(0x2e7)](_0x4e6161(0x1b7))){const _0xa2240a=await this[_0x4e6161(0x253)](this[_0x4e6161(0x1c5)][_0x4e6161(0x233)]+_0x4e6161(0x277));if(_0xa2240a&&_0xa2240a[_0x4e6161(0x304)])_0x55a137=_0xa2240a[_0x4e6161(0x304)];}else{if(this[_0x4e6161(0x1c5)][_0x4e6161(0x233)]['includes']('openweathermap')){const _0x51b163=await this[_0x4e6161(0x253)](this[_0x4e6161(0x1c5)][_0x4e6161(0x233)]+_0x4e6161(0x17e));if(_0x51b163&&_0x51b163['val'])_0x55a137=_0x51b163[_0x4e6161(0x304)];}}}}catch(_0x419b30){}if(!_0x55a137){const _0xdc7c32=[_0x4e6161(0x2ad),_0x4e6161(0x299),'weatherunderground.0',_0x4e6161(0x25e)];for(const _0x31171a of _0xdc7c32){try{const _0x1a0036=await this['getForeignObjectAsync'](_0x31171a);if(_0x1a0036){if(_0x31171a[_0x4e6161(0x2e7)]('accuweather')){const _0x4dd858=await this[_0x4e6161(0x253)](_0x31171a+_0x4e6161(0x23e));if(_0x4dd858){_0x55a137=_0x4dd858[_0x4e6161(0x304)];break;}}}}catch(_0x5ce46b){}}}return _0x55a137?'WETTER:\x20'+_0x55a137:'WETTER:\x20Keine\x20Daten';}async[a0_0x17afd7(0x1c6)](){const _0x543e08=a0_0x17afd7;if(!this[_0x543e08(0x1c5)][_0x543e08(0x180)])return'';let _0x1b63c6='',_0x5cb728=this['config']['calendarInstance']||_0x543e08(0x283);try{const _0x27bc63=await this[_0x543e08(0x253)](_0x5cb728+_0x543e08(0x26e));if(_0x27bc63&&_0x27bc63[_0x543e08(0x304)])_0x1b63c6=_0x27bc63[_0x543e08(0x304)];else{const _0x3ed6a7=await this[_0x543e08(0x253)](_0x5cb728+'.data.table');_0x3ed6a7&&_0x3ed6a7['val']&&Array[_0x543e08(0x23c)](_0x3ed6a7[_0x543e08(0x304)])&&_0x3ed6a7[_0x543e08(0x304)][_0x543e08(0x2b5)]>0x0&&(_0x1b63c6=_0x3ed6a7['val'][_0x543e08(0x1e1)](0x0,0x3)[_0x543e08(0x276)](_0x43f7d0=>_0x43f7d0[_0x543e08(0x1cb)]+'\x20'+_0x43f7d0[_0x543e08(0x263)])['join'](',\x20'));}}catch(_0x973434){}return _0x1b63c6?'KALENDER:\x20'+_0x1b63c6:_0x543e08(0x1b5);}async[a0_0x17afd7(0x1bb)](_0x10e326={}){const _0x1a6d90=a0_0x17afd7;this[_0x1a6d90(0x25d)][_0x1a6d90(0x21b)](_0x1a6d90(0x308)+JSON[_0x1a6d90(0x2e5)](_0x10e326));const _0x4cfbb5=[],_0x10944c=_0x10e326[_0x1a6d90(0x19a)]!==![],_0x2089ba=_0x10e326[_0x1a6d90(0x19b)]!==![],_0x33ae84=_0x10e326['lights']!==![],_0x4c7509=_0x10e326[_0x1a6d90(0x2fa)]===!![],_0x4f24c9=_0x10e326[_0x1a6d90(0x244)]===!![],_0x298484=_0x10e326[_0x1a6d90(0x185)]||[],_0x2d0654=await this[_0x1a6d90(0x2a8)](_0x1a6d90(0x1d0),'enum'),_0x496394=await this[_0x1a6d90(0x2a8)]('enum.functions.*',_0x1a6d90(0x2a0)),_0x1b7f3a={},_0x3bb144={},_0x2e366b={},_0x54b269=(_0x18726,_0xa1706,_0x2aa0d7=![])=>{const _0x580732=_0x1a6d90;if(!_0x18726)return;for(const _0xc21cdb in _0x18726){const _0x366b06=_0x18726[_0xc21cdb];if(_0x366b06&&_0x366b06['common']&&_0x366b06[_0x580732(0x19d)][_0x580732(0x270)]){const _0x15dfa3=(typeof _0x366b06[_0x580732(0x19d)][_0x580732(0x1e4)]===_0x580732(0x175)?_0x366b06[_0x580732(0x19d)]['name']['de']:_0x366b06[_0x580732(0x19d)]['name'])||_0x366b06['common']['name'];if(_0x2aa0d7)_0x2e366b[_0xc21cdb]=_0x15dfa3;for(const _0x3c1de3 of _0x366b06['common'][_0x580732(0x270)]){if(_0x2aa0d7){if(!_0xa1706[_0x3c1de3])_0xa1706[_0x3c1de3]=[];_0xa1706[_0x3c1de3][_0x580732(0x2c8)](_0xc21cdb);}else _0xa1706[_0x3c1de3]=_0x15dfa3;}}}};_0x54b269(_0x2d0654,_0x1b7f3a),_0x54b269(_0x496394,_0x3bb144,!![]);const _0x2941b0=await this[_0x1a6d90(0x2a8)]('*',_0x1a6d90(0x1b1)),_0x4be7ed=[_0x1a6d90(0x191),_0x1a6d90(0x1fb),'RSSI',_0x1a6d90(0x1d4),_0x1a6d90(0x1be),_0x1a6d90(0x2c2),_0x1a6d90(0x182),'CONFIG_PENDING',_0x1a6d90(0x23b),_0x1a6d90(0x281),_0x1a6d90(0x2cd),'STICKY_UNREACH',_0x1a6d90(0x2d9),'VIRTUAL_CHANNEL',_0x1a6d90(0x264),_0x1a6d90(0x181),_0x1a6d90(0x22d),_0x1a6d90(0x174),_0x1a6d90(0x177),'ERROR_CODE',_0x1a6d90(0x312),_0x1a6d90(0x301),_0x1a6d90(0x2e6),_0x1a6d90(0x176),_0x1a6d90(0x2b8),'battery','update',_0x1a6d90(0x1a8),_0x1a6d90(0x27e),_0x1a6d90(0x268),_0x1a6d90(0x21b),_0x1a6d90(0x1c8),_0x1a6d90(0x221),_0x1a6d90(0x243),_0x1a6d90(0x30c),_0x1a6d90(0x2b2),_0x1a6d90(0x260),_0x1a6d90(0x2d7),'effect','xy','ct',_0x1a6d90(0x25f),_0x1a6d90(0x267),_0x1a6d90(0x1b2),_0x1a6d90(0x28e),_0x1a6d90(0x206),'uniqueid',_0x1a6d90(0x248),_0x1a6d90(0x2cf),'description','capabilities',_0x1a6d90(0x240),_0x1a6d90(0x17c),_0x1a6d90(0x179),_0x1a6d90(0x261),_0x1a6d90(0x2a1),_0x1a6d90(0x2a7),_0x1a6d90(0x195),'history','forecast',_0x1a6d90(0x21b),_0x1a6d90(0x226)];if(!_0x4f24c9)_0x4be7ed[_0x1a6d90(0x2c8)]('wetter',_0x1a6d90(0x244),'wind','pressure','uv',_0x1a6d90(0x247),_0x1a6d90(0x22b));const _0x3ad2e7=[_0x1a6d90(0x1f0),_0x1a6d90(0x1bc),_0x1a6d90(0x239),'vis.','history.',_0x1a6d90(0x1c0),_0x1a6d90(0x302),_0x1a6d90(0x1e0)];if(!_0x4f24c9)_0x3ad2e7['push'](_0x1a6d90(0x274),'weatherunderground.','accuweather.','yr.',_0x1a6d90(0x294));const _0x36b17e=(_0x1e9a78,_0x2be49e,_0x1d5c72=![])=>{const _0x46a3cc=_0x1a6d90,_0x174931=_0x1e9a78[_0x46a3cc(0x2e8)]('.');if(_0x2be49e[_0x1e9a78])return _0x2be49e[_0x1e9a78];if(_0x174931[_0x46a3cc(0x2b5)]>0x2&&_0x2be49e[_0x174931['slice'](0x0,-0x1)['join']('.')])return _0x2be49e[_0x174931['slice'](0x0,-0x1)[_0x46a3cc(0x188)]('.')];if(_0x174931[_0x46a3cc(0x2b5)]>0x3&&_0x2be49e[_0x174931[_0x46a3cc(0x1e1)](0x0,-0x2)[_0x46a3cc(0x188)]('.')])return _0x2be49e[_0x174931[_0x46a3cc(0x1e1)](0x0,-0x2)[_0x46a3cc(0x188)]('.')];return _0x1d5c72?[]:null;};for(const _0x226fc1 in _0x2941b0){const _0x386d9f=_0x2941b0[_0x226fc1];if(!_0x386d9f||!_0x386d9f['common'])continue;if(_0x3ad2e7[_0x1a6d90(0x29b)](_0x4f3405=>_0x226fc1[_0x1a6d90(0x1a7)](_0x4f3405)))continue;const _0x1c32eb=_0x386d9f[_0x1a6d90(0x19d)][_0x1a6d90(0x1a2)]||'',_0x43d8cb=(_0x386d9f['common'][_0x1a6d90(0x1e4)]&&typeof _0x386d9f[_0x1a6d90(0x19d)][_0x1a6d90(0x1e4)]===_0x1a6d90(0x175)?_0x386d9f['common'][_0x1a6d90(0x1e4)]['de']:_0x386d9f[_0x1a6d90(0x19d)][_0x1a6d90(0x1e4)])||'',_0x38957c=_0x43d8cb?_0x43d8cb['toLowerCase']():'',_0x5e9590=_0x226fc1[_0x1a6d90(0x173)](),_0xfc56a1=_0x36b17e(_0x226fc1,_0x1b7f3a),_0x52da3d=_0x36b17e(_0x226fc1,_0x3bb144,!![]);let _0x1dac78=null,_0x2b0bad=![];if(_0x52da3d&&_0x52da3d[_0x1a6d90(0x2b5)]>0x0){const _0x3ffd0d=_0x52da3d['find'](_0x35def8=>_0x298484[_0x1a6d90(0x2e7)](_0x35def8));if(_0x3ffd0d){_0x2b0bad=!![];const _0x9719fc=_0x2e366b[_0x3ffd0d];if(_0x5e9590[_0x1a6d90(0x2e7)](_0x1a6d90(0x2f1))||_0x5e9590[_0x1a6d90(0x2e7)](_0x1a6d90(0x19a)))_0x1dac78=_0x1a6d90(0x25c);else{if(_0x5e9590[_0x1a6d90(0x2e7)](_0x1a6d90(0x1b9))||_0x5e9590['includes'](_0x1a6d90(0x21d))||_0x38957c[_0x1a6d90(0x2e7)](_0x1a6d90(0x2a6)))_0x1dac78=_0x1a6d90(0x2bf);else{if(_0x5e9590['includes'](_0x1a6d90(0x1b1))||_0x5e9590['includes'](_0x1a6d90(0x285))||_0x5e9590[_0x1a6d90(0x2e7)]('on'))_0x1dac78=_0x1a6d90(0x29e);else _0x1dac78=_0x9719fc;}}}}if(!_0x2b0bad&&!_0x4f24c9){if(_0x4be7ed['some'](_0x1888cb=>_0x38957c['includes'](_0x1888cb)||_0x226fc1[_0x1a6d90(0x1ac)]()[_0x1a6d90(0x2e7)](_0x1888cb)))continue;}if(!_0x1dac78&&_0x10944c){if(_0x1c32eb[_0x1a6d90(0x2e7)](_0x1a6d90(0x1a3))||_0x1c32eb['includes']('occupancy')||_0x38957c[_0x1a6d90(0x2e7)]('bewegung')||_0x38957c[_0x1a6d90(0x2e7)]('pr√§senz'))_0x1dac78='Bewegung';}!_0x1dac78&&_0x2089ba&&((_0x5e9590[_0x1a6d90(0x2e7)](_0x1a6d90(0x224))||_0x1c32eb[_0x1a6d90(0x2e7)](_0x1a6d90(0x2f9))||_0x1c32eb[_0x1a6d90(0x2e7)](_0x1a6d90(0x1e8))||(_0x38957c['includes'](_0x1a6d90(0x1ef))||_0x38957c[_0x1a6d90(0x2e7)]('t√ºr'))&&!_0x38957c[_0x1a6d90(0x2e7)](_0x1a6d90(0x2ae))&&!_0x38957c['includes'](_0x1a6d90(0x2c6))&&(_0x386d9f['common'][_0x1a6d90(0x202)]===_0x1a6d90(0x314)||_0x386d9f[_0x1a6d90(0x19d)][_0x1a6d90(0x202)]===_0x1a6d90(0x25a)))&&(_0x1dac78='Fenster/T√ºr'));if(!_0x1dac78&&_0x33ae84){if((_0x1c32eb[_0x1a6d90(0x2e7)](_0x1a6d90(0x265))||_0x1c32eb[_0x1a6d90(0x2e7)]('level.dimmer')||_0x38957c[_0x1a6d90(0x2e7)](_0x1a6d90(0x201))||_0x38957c[_0x1a6d90(0x2e7)]('lampe'))&&_0x386d9f[_0x1a6d90(0x19d)][_0x1a6d90(0x24c)])_0x1dac78='Licht';}if(!_0x1dac78&&_0x4c7509){if(_0x1c32eb[_0x1a6d90(0x2e7)](_0x1a6d90(0x23a))||_0x1c32eb[_0x1a6d90(0x2e7)](_0x1a6d90(0x2a9))||_0x38957c['includes'](_0x1a6d90(0x1fe)))_0x1dac78=_0x1a6d90(0x17f);}if(_0x1dac78){let _0x5cbfb2=_0xfc56a1||'';if(!_0x5cbfb2){if(_0x38957c['includes'](_0x1a6d90(0x2f7)))_0x5cbfb2=_0x1a6d90(0x26a);else{if(_0x38957c['includes'](_0x1a6d90(0x1ed)))_0x5cbfb2=_0x1a6d90(0x273);else{if(_0x38957c[_0x1a6d90(0x2e7)](_0x1a6d90(0x250)))_0x5cbfb2=_0x1a6d90(0x204);else{if(_0x38957c[_0x1a6d90(0x2e7)]('schlaf'))_0x5cbfb2='Schlafzimmer';else{if(_0x38957c[_0x1a6d90(0x2e7)](_0x1a6d90(0x21e))||_0x38957c[_0x1a6d90(0x2e7)](_0x1a6d90(0x18a)))_0x5cbfb2=_0x1a6d90(0x2b7);else{if(_0x38957c[_0x1a6d90(0x2e7)](_0x1a6d90(0x307)))_0x5cbfb2=_0x1a6d90(0x27b);}}}}}}let _0x2da646=![];_0x1dac78==='Fenster/T√ºr'&&((_0x38957c[_0x1a6d90(0x2e7)](_0x1a6d90(0x26d))||_0x38957c[_0x1a6d90(0x2e7)](_0x1a6d90(0x1c9))||_0x38957c[_0x1a6d90(0x2e7)](_0x1a6d90(0x1d7))||_0x5cbfb2&&_0x5cbfb2[_0x1a6d90(0x173)]()[_0x1a6d90(0x2e7)]('flur')&&_0x38957c[_0x1a6d90(0x2e7)](_0x1a6d90(0x286)))&&(_0x2da646=!![]));let _0x25b6b8=0x0;if(_0x2b0bad)_0x25b6b8+=0x1e;else{if(_0xfc56a1)_0x25b6b8+=0x14;else{if(_0x5cbfb2)_0x25b6b8+=0xa;}}if(_0x2da646)_0x25b6b8+=0x5;_0x4cfbb5['push']({'id':_0x226fc1,'name':_0x43d8cb||_0x226fc1,'type':_0x1dac78,'location':_0x5cbfb2,'logDuplicates':_0x1dac78===_0x1a6d90(0x25c),'isExit':_0x2da646,'_score':_0x25b6b8});}}return _0x4cfbb5[_0x1a6d90(0x1a1)]((_0x5743f1,_0x512f5a)=>_0x512f5a[_0x1a6d90(0x203)]-_0x5743f1[_0x1a6d90(0x203)]),_0x4cfbb5;}async[a0_0x17afd7(0x1a4)](){const _0x480c48=a0_0x17afd7,_0x5d3e05=this[_0x480c48(0x1c5)]['presenceDevices']||[];let _0x2bf0a5=![];for(const _0x3b8455 of _0x5d3e05){try{const _0x420583=await this[_0x480c48(0x253)](_0x3b8455);if(_0x420583&&(_0x420583[_0x480c48(0x304)]===!![]||_0x420583['val']===_0x480c48(0x2a4)||_0x420583[_0x480c48(0x304)]===0x1)){_0x2bf0a5=!![];break;}}catch(_0x19b16c){}}return _0x2bf0a5&&(this[_0x480c48(0x1fd)]&&(this['log'][_0x480c48(0x21b)](_0x480c48(0x1ce)),this[_0x480c48(0x1e5)]()),!this[_0x480c48(0x2d0)]&&this[_0x480c48(0x2d8)]===SYSTEM_MODES[_0x480c48(0x1d1)]&&this[_0x480c48(0x2dd)](!![])),_0x2bf0a5;}async[a0_0x17afd7(0x208)](_0x2873db,_0x55c997){const _0x53b6f0=a0_0x17afd7;if(!_0x55c997)return;if(_0x2873db===this[_0x53b6f0(0x19f)]+'.'+SYSTEM_DP_MODE){_0x55c997[_0x53b6f0(0x304)]&&Object[_0x53b6f0(0x1f2)](SYSTEM_MODES)[_0x53b6f0(0x2e7)](_0x55c997['val'])&&(this[_0x53b6f0(0x2d8)]=_0x55c997[_0x53b6f0(0x304)],_0x55c997[_0x53b6f0(0x304)]===SYSTEM_MODES[_0x53b6f0(0x28a)]?this[_0x53b6f0(0x2dd)](![]):this[_0x53b6f0(0x2dd)](!![]));if(!_0x55c997['ack'])this[_0x53b6f0(0x287)](_0x2873db,{'val':this[_0x53b6f0(0x2d8)],'ack':!![]});return;}if(!_0x55c997['ack']){_0x2873db[_0x53b6f0(0x2e7)](_0x53b6f0(0x227))&&_0x55c997['val']&&(this[_0x53b6f0(0x287)](_0x2873db,{'val':![],'ack':!![]}),this['runGeminiAnalysis']());if(_0x2873db['includes']('triggerDailyDigest')&&_0x55c997['val']){this['setState'](_0x2873db,{'val':![],'ack':!![]});if(this[_0x53b6f0(0x28b)])this[_0x53b6f0(0x20e)]();}_0x2873db[_0x53b6f0(0x2e7)](_0x53b6f0(0x1b8))&&_0x55c997[_0x53b6f0(0x304)]&&(this[_0x53b6f0(0x287)](_0x2873db,{'val':![],'ack':!![]}),this[_0x53b6f0(0x1f1)]());return;}if(this['config']['presenceDevices']&&this[_0x53b6f0(0x1c5)]['presenceDevices'][_0x53b6f0(0x2e7)](_0x2873db)){await this[_0x53b6f0(0x1a4)]();return;}const _0x3b6a30=(this[_0x53b6f0(0x1c5)][_0x53b6f0(0x211)]||[])[_0x53b6f0(0x2c5)](_0x34f97f=>_0x34f97f['id']===_0x2873db);if(_0x3b6a30)this['processSensorEvent'](_0x2873db,_0x55c997,_0x3b6a30);}async[a0_0x17afd7(0x2ee)](_0x5aa795,_0x234e32,_0x1d6298){const _0x47a590=a0_0x17afd7;if(!_0x1d6298[_0x47a590(0x275)]&&this['sensorLastValues'][_0x5aa795]===_0x234e32['val'])return;this['sensorLastValues'][_0x5aa795]=_0x234e32[_0x47a590(0x304)];if(this[_0x47a590(0x1c4)])return;const _0x58dd3c=await this['checkWifiPresence']();if(_0x58dd3c){if(!this[_0x47a590(0x2d0)])this[_0x47a590(0x2dd)](!![]);}else{const _0x4ad077=_0x1d6298[_0x47a590(0x2e9)]===!![];_0x4ad077?this[_0x47a590(0x1da)]():(this['exitTimer']&&(this[_0x47a590(0x25d)][_0x47a590(0x21b)](_0x47a590(0x222)),this[_0x47a590(0x1e5)]()),!this['isPresent']&&this[_0x47a590(0x2d8)]===SYSTEM_MODES[_0x47a590(0x1d1)]&&this[_0x47a590(0x2dd)](!![]));}const _0x3c18e5={'timestamp':_0x234e32['ts'],'id':_0x5aa795,'name':_0x1d6298[_0x47a590(0x1e4)],'value':_0x234e32[_0x47a590(0x304)],'location':_0x1d6298[_0x47a590(0x237)],'type':_0x1d6298[_0x47a590(0x202)]};this[_0x47a590(0x241)]['unshift'](_0x3c18e5);if(this['eventHistory'][_0x47a590(0x2b5)]>HISTORY_MAX_SIZE)this['eventHistory']['pop']();await this[_0x47a590(0x2ff)](_0x47a590(0x30f),{'val':JSON['stringify'](_0x3c18e5),'ack':!![]}),await this[_0x47a590(0x2ff)](_0x47a590(0x2a2),{'val':JSON[_0x47a590(0x2e5)](this[_0x47a590(0x241)]),'ack':!![]}),this['rawEventLog'][_0x47a590(0x2c8)]({'timestamp':new Date(_0x234e32['ts'])[_0x47a590(0x29f)](),'sensorName':_0x1d6298[_0x47a590(0x1e4)],'location':_0x1d6298[_0x47a590(0x237)],'value':_0x234e32[_0x47a590(0x304)]}),await this[_0x47a590(0x305)]();}[a0_0x17afd7(0x1da)](){const _0x4187d5=a0_0x17afd7;this['abortExitTimer'](),this[_0x4187d5(0x1c4)]=!![],this[_0x4187d5(0x271)]=setTimeout(()=>{const _0x18b744=_0x4187d5;this[_0x18b744(0x1c4)]=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),this[_0x4187d5(0x1fd)]=setTimeout(()=>{const _0x1ba051=_0x4187d5;this['setPresence'](![]),this[_0x1ba051(0x1fd)]=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}[a0_0x17afd7(0x1e5)](){const _0x5eaaeb=a0_0x17afd7;if(this[_0x5eaaeb(0x1fd)])clearTimeout(this[_0x5eaaeb(0x1fd)]);if(this[_0x5eaaeb(0x271)])clearTimeout(this[_0x5eaaeb(0x271)]);this[_0x5eaaeb(0x1fd)]=null,this['exitGraceTimer']=null,this[_0x5eaaeb(0x1c4)]=![];}async[a0_0x17afd7(0x2dd)](_0x4cf18f){const _0x191526=a0_0x17afd7;if(this[_0x191526(0x2d0)]===_0x4cf18f)return;this[_0x191526(0x2d0)]=_0x4cf18f,await this['setStateAsync'](_0x191526(0x2dc),{'val':_0x4cf18f,'ack':!![]});}[a0_0x17afd7(0x278)](){const _0x4896ad=a0_0x17afd7,_0x1e906c=this[_0x4896ad(0x1c5)][_0x4896ad(0x229)],_0x42ef95=this[_0x4896ad(0x1c5)][_0x4896ad(0x1ca)],_0x2d7fc8=this[_0x4896ad(0x241)][_0x4896ad(0x2b5)]>0x0?this[_0x4896ad(0x241)][0x0][_0x4896ad(0x251)]:Date[_0x4896ad(0x24a)](),_0x280261=(Date[_0x4896ad(0x24a)]()-_0x2d7fc8)/(0x3e8*0x3c*0x3c);let _0x389ddb='';_0x42ef95&&this[_0x4896ad(0x2d8)]===SYSTEM_MODES[_0x4896ad(0x1d1)]&&this[_0x4896ad(0x2d0)]&&(_0x280261>_0x1e906c&&(_0x389ddb=_0x4896ad(0x2f4)+_0x280261['toFixed'](0x1)+_0x4896ad(0x303)));if(_0x389ddb){this[_0x4896ad(0x2f2)](_0x389ddb)[_0x4896ad(0x27a)](_0x1591c1=>this[_0x4896ad(0x25d)][_0x4896ad(0x313)](_0x1591c1));return;}const _0x45a716=Date[_0x4896ad(0x24a)](),_0x3d395f=_0x45a716-_0x2d7fc8,_0x553108=(this['config'][_0x4896ad(0x194)]||0xf)*0x3c*0x3e8;this[_0x4896ad(0x241)][_0x4896ad(0x2b5)]>0x0&&_0x3d395f<=_0x553108?this[_0x4896ad(0x2f2)]()[_0x4896ad(0x27a)](_0x23bca2=>this[_0x4896ad(0x25d)]['error'](_0x23bca2)):!this[_0x4896ad(0x1d2)]&&(this[_0x4896ad(0x287)](_0x4896ad(0x2d5),{'val':![],'ack':!![]}),this[_0x4896ad(0x287)](_0x4896ad(0x2ca),{'val':![],'ack':!![]}));}async[a0_0x17afd7(0x2f2)](_0x43cd13=''){const _0x5e3cb1=a0_0x17afd7;if(!this[_0x5e3cb1(0x27f)])return;const _0x458d1e=this['eventHistory'][_0x5e3cb1(0x2b5)]>0x0?this[_0x5e3cb1(0x241)]:[{'note':'No\x20recorded\x20events\x20yet.'}],_0xe8fdb6=PERSONA_MAPPING[this[_0x5e3cb1(0x1c5)]['aiPersona']||'generic'],_0x39f5b9=this['config'][_0x5e3cb1(0x1ae)]||'',_0xca3e19=this['currentSystemMode'],_0x486c21=await this[_0x5e3cb1(0x257)](),_0x1450de=await this[_0x5e3cb1(0x1c6)](),_0x1afa28=(_0x486c21+'\x20'+_0x1450de)[_0x5e3cb1(0x2d2)](),_0x580f30=new Date(),_0x306cce=_0x580f30[_0x5e3cb1(0x189)](_0x5e3cb1(0x30e),{'weekday':_0x5e3cb1(0x242),'hour':_0x5e3cb1(0x19e),'minute':'2-digit'}),_0x199653=this['systemConfig'];let _0x574cc9='';if(this['feedbackHistory']['length']>0x0){const _0x5b2624=this[_0x5e3cb1(0x315)][_0x5e3cb1(0x1e1)](0x0,0x3)[_0x5e3cb1(0x276)](_0x48cdb9=>_0x5e3cb1(0x1cf)+_0x48cdb9['alertReason']+_0x5e3cb1(0x2e0)+_0x48cdb9[_0x5e3cb1(0x17b)]+'.')['join']('\x0a');_0x574cc9=_0x5e3cb1(0x255)+_0x5b2624+'\x0a';}const _0x5667be=_0x43cd13?_0x5e3cb1(0x220)+_0x43cd13+_0x5e3cb1(0x2af):'',_0x9c461e=_0x5e3cb1(0x1ea),_0xd2dcd1='ROLLE:\x20Smart\x20Home\x20Analyst.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20AKTUELLE\x20ZEIT:\x20'+_0x306cce+_0x5e3cb1(0x21a)+_0x199653[_0x5e3cb1(0x2c9)]+_0x5e3cb1(0x21f)+_0xca3e19+_0x5e3cb1(0x249)+(this['isPresent']?'Ja':_0x5e3cb1(0x279))+_0x5e3cb1(0x18b)+_0x39f5b9+_0x5e3cb1(0x1c3)+_0xe8fdb6+_0x5e3cb1(0x2fd)+_0x1afa28+_0x5e3cb1(0x2e2)+_0x9c461e+'\x20'+_0x574cc9+'\x20'+_0x5667be+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20EVENTS:\x20'+JSON[_0x5e3cb1(0x2e5)](_0x458d1e)+_0x5e3cb1(0x309);try{const _0x1867fc=await this['geminiModel'][_0x5e3cb1(0x28f)](_0xd2dcd1),_0x10c005=_0x1867fc[_0x5e3cb1(0x254)][_0x5e3cb1(0x1d8)]()[_0x5e3cb1(0x232)](/```json|```/g,'')['trim'](),_0x2e7262=JSON[_0x5e3cb1(0x2e1)](_0x10c005);await this[_0x5e3cb1(0x2ff)](_0x5e3cb1(0x27c),{'val':_0x10c005,'ack':!![]}),await this['setStateAsync'](_0x5e3cb1(0x2ec),{'val':_0x2e7262[_0x5e3cb1(0x1ba)][_0x5e3cb1(0x1ee)]||'','ack':!![]}),await this[_0x5e3cb1(0x2ff)]('analysis.activitySummary',{'val':_0x2e7262[_0x5e3cb1(0x1ba)]['summary']||_0x5e3cb1(0x2ac),'ack':!![]}),await this[_0x5e3cb1(0x2ff)]('analysis.deviationFromBaseline',{'val':_0x2e7262['activity']['deviationFromBaseline']||_0x5e3cb1(0x2ac),'ack':!![]});_0x2e7262[_0x5e3cb1(0x1ff)]&&(await this[_0x5e3cb1(0x2ff)](_0x5e3cb1(0x1cd),{'val':_0x2e7262[_0x5e3cb1(0x1ff)][_0x5e3cb1(0x2a7)]||'','ack':!![]}),await this['setStateAsync']('analysis.comfortSuggestion',{'val':_0x2e7262['comfort'][_0x5e3cb1(0x1ab)]||'','ack':!![]}),_0x2e7262[_0x5e3cb1(0x1ff)][_0x5e3cb1(0x20d)]&&(await this['setStateAsync'](_0x5e3cb1(0x2f5),{'val':_0x2e7262['comfort'][_0x5e3cb1(0x20d)][_0x5e3cb1(0x293)]||![],'ack':!![]}),await this['setStateAsync']('analysis.automation.description',{'val':_0x2e7262['comfort'][_0x5e3cb1(0x20d)][_0x5e3cb1(0x292)]||'','ack':!![]}),await this[_0x5e3cb1(0x2ff)](_0x5e3cb1(0x190),{'val':_0x2e7262[_0x5e3cb1(0x1ff)][_0x5e3cb1(0x20d)][_0x5e3cb1(0x26c)]||'','ack':!![]})));_0x2e7262[_0x5e3cb1(0x17a)]&&(await this[_0x5e3cb1(0x2ff)]('analysis.health.sleepScore',{'val':typeof _0x2e7262['health'][_0x5e3cb1(0x184)]==='number'?_0x2e7262[_0x5e3cb1(0x17a)]['sleepScore']:0x0,'ack':!![]}),await this['setStateAsync']('analysis.health.restlessness',{'val':_0x2e7262[_0x5e3cb1(0x17a)]['restlessness']||'none','ack':!![]}),await this[_0x5e3cb1(0x2ff)]('analysis.health.notes',{'val':_0x2e7262[_0x5e3cb1(0x17a)]['notes']||'','ack':!![]}));const _0x9f5a58=_0x2e7262[_0x5e3cb1(0x1ba)]['isAlert']||![],_0x1e5474=_0x2e7262[_0x5e3cb1(0x1ba)]['isEmergency']||![];if(_0x9f5a58||_0x1e5474){await this[_0x5e3cb1(0x2ff)](_0x5e3cb1(0x2d5),{'val':!![],'ack':!![]}),await this[_0x5e3cb1(0x2ff)](_0x5e3cb1(0x2ca),{'val':_0x1e5474,'ack':!![]});if(!this['lastAlertState']||_0x1e5474){const _0x3a313b=_0x1e5474?_0x5e3cb1(0x238):_0x5e3cb1(0x1e9);this[_0x5e3cb1(0x1bd)](_0x3a313b+':\x20'+_0x2e7262['activity'][_0x5e3cb1(0x1ee)],![],_0x1e5474);}}else await this[_0x5e3cb1(0x2ff)](_0x5e3cb1(0x2d5),{'val':![],'ack':!![]}),await this[_0x5e3cb1(0x2ff)](_0x5e3cb1(0x2ca),{'val':![],'ack':!![]});this['lastAlertState']=_0x9f5a58||_0x1e5474;const _0x4417d8={'timestamp':Date[_0x5e3cb1(0x24a)](),'id':Date[_0x5e3cb1(0x24a)]()['toString'](),'analysis':_0x2e7262,'systemMode':_0xca3e19,'isPro':this[_0x5e3cb1(0x28b)]};this['updateAnalysisHistory'](_0x4417d8);}catch(_0x8e0b21){this[_0x5e3cb1(0x25d)][_0x5e3cb1(0x313)](_0x5e3cb1(0x210)+_0x8e0b21[_0x5e3cb1(0x20a)]);}}async['createDailyDigest'](){const _0x385fab=a0_0x17afd7;if(!this[_0x385fab(0x27f)]||this[_0x385fab(0x2d1)]['length']<LTM_MIN_EVENTS_FOR_COMPRESSION){await this[_0x385fab(0x2ff)](LTM_DP_STATUS,{'val':'Zu\x20wenig\x20Daten\x20f√ºr\x20Daily\x20Digest.','ack':!![]});return;}this[_0x385fab(0x25d)]['info'](_0x385fab(0x197)+this[_0x385fab(0x2d1)][_0x385fab(0x2b5)]+_0x385fab(0x187)),await this[_0x385fab(0x2ff)](LTM_DP_STATUS,{'val':_0x385fab(0x213),'ack':!![]});const _0x5df2e4=this[_0x385fab(0x2d1)]['length']>0x320?this[_0x385fab(0x2d1)][_0x385fab(0x1e1)](this[_0x385fab(0x2d1)][_0x385fab(0x2b5)]-0x320):this[_0x385fab(0x2d1)],_0x5db989=PERSONA_MAPPING[this[_0x385fab(0x1c5)][_0x385fab(0x259)]||_0x385fab(0x24d)],_0x81fe6e=_0x385fab(0x1d5)+_0x5db989+_0x385fab(0x29a)+JSON[_0x385fab(0x2e5)](_0x5df2e4)+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20OUTPUT\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22,\x20\x22health\x22:\x20{\x20\x22sleepScore\x22:\x20number,\x20\x22restlessness\x22:\x20\x22string\x22\x20}\x20}';try{const _0x434ada=await this[_0x385fab(0x27f)][_0x385fab(0x28f)](_0x81fe6e),_0x4b253b=_0x434ada[_0x385fab(0x254)][_0x385fab(0x1d8)]()[_0x385fab(0x232)](/```json|```/g,'')['trim'](),_0x364f8a=JSON['parse'](_0x4b253b),_0x2361f6={'timestamp':new Date()[_0x385fab(0x29f)](),'eventCount':this['rawEventLog'][_0x385fab(0x2b5)],'summary':_0x364f8a[_0x385fab(0x2a7)],'activityLevel':_0x364f8a['activityLevel'],'health':{'sleepScore':_0x364f8a[_0x385fab(0x17a)]?_0x364f8a[_0x385fab(0x17a)][_0x385fab(0x184)]:0x0,'restlessness':_0x364f8a['health']?_0x364f8a[_0x385fab(0x17a)][_0x385fab(0x2be)]:_0x385fab(0x2cb)},'systemMode':this[_0x385fab(0x2d8)]};this[_0x385fab(0x2c7)][_0x385fab(0x2c8)](_0x2361f6),await this[_0x385fab(0x26f)](),this['rawEventLog']=[],await this[_0x385fab(0x305)](),await this[_0x385fab(0x2ff)](LTM_DP_STATUS,{'val':_0x385fab(0x231),'ack':!![]}),this['log']['info'](_0x385fab(0x291));}catch(_0x38bcd9){this[_0x385fab(0x25d)]['error']('Daily\x20Digest\x20Error:\x20'+_0x38bcd9[_0x385fab(0x20a)]),await this[_0x385fab(0x2ff)](LTM_DP_STATUS,{'val':_0x385fab(0x234)+_0x38bcd9[_0x385fab(0x20a)],'ack':!![]});}}['setupBriefingScheduler'](){const _0x2dc089=a0_0x17afd7;if(this[_0x2dc089(0x272)])this[_0x2dc089(0x272)][_0x2dc089(0x298)]();if(!this[_0x2dc089(0x1c5)][_0x2dc089(0x1d9)])return;const _0x7f1769=(this['config'][_0x2dc089(0x1f6)]||'08:00')[_0x2dc089(0x2e8)](':'),_0x56c5c7=parseInt(_0x7f1769[0x0])||0x8,_0x214b94=parseInt(_0x7f1769[0x1])||0x0,_0x3fb176=_0x214b94+'\x20'+_0x56c5c7+_0x2dc089(0x2df);this[_0x2dc089(0x25d)][_0x2dc089(0x21b)](_0x2dc089(0x1f8)+_0x56c5c7+':'+(_0x214b94<0xa?'0'+_0x214b94:_0x214b94)),this['briefingJob']=schedule[_0x2dc089(0x1b6)](_0x3fb176,()=>{this['sendMorningBriefing']();});}async[a0_0x17afd7(0x1f1)](){const _0x8d2b45=a0_0x17afd7;if(!this['geminiModel'])return;this['log'][_0x8d2b45(0x21b)](_0x8d2b45(0x306));const _0x4f7207=this[_0x8d2b45(0x2c7)][_0x8d2b45(0x2b5)]>0x0?this[_0x8d2b45(0x2c7)][this[_0x8d2b45(0x2c7)]['length']-0x1]:null,_0x173f21=_0x4f7207&&_0x4f7207['health']?_0x4f7207[_0x8d2b45(0x17a)][_0x8d2b45(0x184)]:'N/A',_0x1d8e72=new Date();_0x1d8e72['setHours'](0x4,0x0,0x0,0x0);const _0x39d52d=this[_0x8d2b45(0x241)]['filter'](_0x2a1ace=>new Date(_0x2a1ace[_0x8d2b45(0x251)])>_0x1d8e72),_0x3846c6=PERSONA_MAPPING[this[_0x8d2b45(0x1c5)][_0x8d2b45(0x259)]||'generic'],_0x28bc52=this[_0x8d2b45(0x1c5)]['livingContext']||'',_0x489ef6=await this[_0x8d2b45(0x257)](),_0x31f668=await this[_0x8d2b45(0x1c6)](),_0x495902=_0x8d2b45(0x29d)+_0x3846c6+_0x8d2b45(0x178)+_0x28bc52+_0x8d2b45(0x2b4)+_0x489ef6+'\x20'+_0x31f668+_0x8d2b45(0x2aa)+_0x173f21+_0x8d2b45(0x269)+JSON['stringify'](_0x39d52d[_0x8d2b45(0x1e1)](0x0,0xa))+_0x8d2b45(0x218);try{const _0x344481=await this[_0x8d2b45(0x27f)][_0x8d2b45(0x28f)](_0x495902),_0x4c5feb=_0x8d2b45(0x215)+_0x344481[_0x8d2b45(0x254)][_0x8d2b45(0x1d8)]()[_0x8d2b45(0x2d2)]();this[_0x8d2b45(0x1bd)](_0x4c5feb),this[_0x8d2b45(0x25d)]['info'](_0x8d2b45(0x1f9));}catch(_0x39ed1c){this['log'][_0x8d2b45(0x313)](_0x8d2b45(0x19c)+_0x39ed1c[_0x8d2b45(0x20a)]);}}['setupModeResetScheduler'](){const _0x36026b=a0_0x17afd7;if(this[_0x36026b(0x2f8)])this[_0x36026b(0x2f8)][_0x36026b(0x298)]();this[_0x36026b(0x2f8)]=schedule[_0x36026b(0x1b6)](MODE_RESET_SCHEDULE,async()=>{const _0xda4bff=_0x36026b;await this[_0xda4bff(0x1db)](),AUTO_RESET_MODES[_0xda4bff(0x2e7)](this['currentSystemMode'])&&await this[_0xda4bff(0x2ff)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0xda4bff(0x1d1)],'ack':![]});});}[a0_0x17afd7(0x288)](){const _0x236f85=a0_0x17afd7;if(this['driftAnalysisTimer'])clearInterval(this[_0x236f85(0x2f3)]);if(!this[_0x236f85(0x28b)])return;this[_0x236f85(0x2f3)]=setInterval(()=>this[_0x236f85(0x1c1)](),(this[_0x236f85(0x1c5)][_0x236f85(0x316)]||0x18)*0x36ee80),setTimeout(()=>this['runBaselineDriftAnalysis'](),0x1388);}async[a0_0x17afd7(0x1f5)](){const _0x39e529=a0_0x17afd7;await this[_0x39e529(0x2ed)]('LTM',{'type':_0x39e529(0x22a),'common':{'name':'LTM'},'native':{}}),await this[_0x39e529(0x2ed)](LTM_DP_RAW_LOG,{'type':_0x39e529(0x1b1),'common':{'name':_0x39e529(0x1eb),'type':_0x39e529(0x1e3),'role':_0x39e529(0x226),'read':!![],'write':![]},'native':{}}),await this['extendObjectAsync'](LTM_DP_DAILY_DIGESTS,{'type':_0x39e529(0x1b1),'common':{'name':_0x39e529(0x300),'type':_0x39e529(0x1e3),'role':_0x39e529(0x226),'read':!![],'write':![]},'native':{}}),await this['extendObjectAsync'](LTM_DP_STATUS,{'type':_0x39e529(0x1b1),'common':{'name':_0x39e529(0x256),'type':_0x39e529(0x1e3),'role':'text','read':!![],'write':![]},'native':{}}),await this[_0x39e529(0x2ed)](LTM_DP_TRIGGER_DIGEST,{'type':_0x39e529(0x1b1),'common':{'name':_0x39e529(0x17d),'type':_0x39e529(0x314),'role':_0x39e529(0x20f),'read':!![],'write':!![],'def':![]},'native':{}}),await this[_0x39e529(0x2ed)](LTM_DP_BASELINE_STATUS,{'type':_0x39e529(0x1b1),'common':{'name':_0x39e529(0x207),'type':'string','role':_0x39e529(0x1d8),'read':!![],'write':![]},'native':{}});}async['checkLtmDriftObjects'](){const _0x5483e3=a0_0x17afd7;await this['extendObjectAsync'](LTM_DP_DRIFT_CHANNEL,{'type':_0x5483e3(0x22a),'common':{'name':_0x5483e3(0x30d)},'native':{}}),await this[_0x5483e3(0x2ed)](LTM_DP_DRIFT_STATUS,{'type':_0x5483e3(0x1b1),'common':{'name':'Drift\x20Status','type':_0x5483e3(0x1e3),'role':'state','read':!![],'write':![],'def':_0x5483e3(0x2ac)},'native':{}}),await this['extendObjectAsync'](LTM_DP_DRIFT_DETAILS,{'type':_0x5483e3(0x1b1),'common':{'name':_0x5483e3(0x262),'type':_0x5483e3(0x1e3),'role':_0x5483e3(0x1d8),'read':!![],'write':![]},'native':{}}),await this[_0x5483e3(0x2ed)](LTM_DP_DRIFT_LAST_CHECK,{'type':_0x5483e3(0x1b1),'common':{'name':_0x5483e3(0x24e),'type':_0x5483e3(0x25a),'role':'date','read':!![],'write':![]},'native':{}});}async[a0_0x17afd7(0x1c1)](){const _0xf737f9=a0_0x17afd7;if(!this[_0xf737f9(0x28b)]||!this[_0xf737f9(0x27f)])return;const _0x403c9c=this[_0xf737f9(0x1c5)]['ltmStbWindowDays']||0xe;if(this[_0xf737f9(0x2c7)][_0xf737f9(0x2b5)]<_0x403c9c+(this[_0xf737f9(0x1c5)]['minDaysForBaseline']||0x7)){await this[_0xf737f9(0x2ff)](LTM_DP_DRIFT_STATUS,{'val':_0xf737f9(0x2ab),'ack':!![]});return;}const _0x3ad8db=this[_0xf737f9(0x2c7)]['slice'](-_0x403c9c),_0x28290e=this[_0xf737f9(0x2c7)][_0xf737f9(0x1e1)](0x0,this['dailyDigests'][_0xf737f9(0x2b5)]-_0x403c9c),_0x233c2b=_0xf737f9(0x20b)+JSON[_0xf737f9(0x2e5)](_0x28290e)+'\x0a\x0aA\x20(STB):\x0a'+JSON[_0xf737f9(0x2e5)](_0x3ad8db);try{const _0x452f7a=await this['geminiModel'][_0xf737f9(0x28f)](_0x233c2b),_0x346707=JSON[_0xf737f9(0x2e1)](_0x452f7a[_0xf737f9(0x254)][_0xf737f9(0x1d8)]()[_0xf737f9(0x232)](/```json|```/g,'')['trim']());_0x346707[_0xf737f9(0x23f)]&&(await this[_0xf737f9(0x2ff)](LTM_DP_DRIFT_STATUS,{'val':_0x346707[_0xf737f9(0x23f)],'ack':!![]}),await this[_0xf737f9(0x2ff)](LTM_DP_DRIFT_DETAILS,{'val':_0x346707[_0xf737f9(0x228)],'ack':!![]}),await this[_0xf737f9(0x2ff)](LTM_DP_DRIFT_LAST_CHECK,{'val':Date['now'](),'ack':!![]}));}catch(_0x46193c){}}async[a0_0x17afd7(0x1db)](){const _0x1af5f2=a0_0x17afd7;try{const _0x35557e=await this['getStateAsync'](SYSTEM_DP_MODE);_0x35557e&&_0x35557e['val']&&Object[_0x1af5f2(0x1f2)](SYSTEM_MODES)[_0x1af5f2(0x2e7)](_0x35557e[_0x1af5f2(0x304)])?this[_0x1af5f2(0x2d8)]=_0x35557e[_0x1af5f2(0x304)]:(this[_0x1af5f2(0x2d8)]=SYSTEM_MODES['NORMAL'],await this[_0x1af5f2(0x2ff)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x1af5f2(0x1d1)],'ack':!![]}));}catch(_0x32e7d3){this[_0x1af5f2(0x2d8)]=SYSTEM_MODES[_0x1af5f2(0x1d1)];}}async[a0_0x17afd7(0x1af)](){const _0x1b5dfe=a0_0x17afd7;try{const _0x9d2619=await this[_0x1b5dfe(0x216)](_0x1b5dfe(0x1f3));if(_0x9d2619&&_0x9d2619[_0x1b5dfe(0x199)]&&_0x9d2619[_0x1b5dfe(0x199)][_0x1b5dfe(0x2b3)])return _0x9d2619[_0x1b5dfe(0x199)]['uuid'];return _0x1b5dfe(0x18f);}catch(_0x6efb8e){return _0x1b5dfe(0x2d6);}}async['checkLicense'](_0x2f9f57){const _0x52bcd5=a0_0x17afd7;if(!_0x2f9f57)return![];this[_0x52bcd5(0x30b)]=await this[_0x52bcd5(0x1af)]();if(_0x2f9f57===_0x52bcd5(0x21c)||_0x2f9f57[_0x52bcd5(0x1a7)](_0x52bcd5(0x2db)))return!![];return![];}[a0_0x17afd7(0x2ba)](_0x556104){const _0x1aab72=a0_0x17afd7;if(this[_0x1aab72(0x24b)])clearInterval(this[_0x1aab72(0x24b)]);if(this['driftAnalysisTimer'])clearInterval(this[_0x1aab72(0x2f3)]);if(this['ltmJob'])this['ltmJob'][_0x1aab72(0x298)]();if(this['modeResetJob'])this[_0x1aab72(0x2f8)][_0x1aab72(0x298)]();if(this[_0x1aab72(0x272)])this[_0x1aab72(0x272)][_0x1aab72(0x298)]();if(this['exitTimer'])clearTimeout(this[_0x1aab72(0x1fd)]);if(this[_0x1aab72(0x271)])clearTimeout(this[_0x1aab72(0x271)]);_0x556104();}async[a0_0x17afd7(0x230)](_0xf4e0dc){const _0x356c89=a0_0x17afd7;if(typeof _0xf4e0dc===_0x356c89(0x175)&&_0xf4e0dc[_0x356c89(0x20a)]){if(_0xf4e0dc[_0x356c89(0x248)]===_0x356c89(0x2eb)){if(!_0xf4e0dc[_0x356c89(0x20a)][_0x356c89(0x172)])return this['sendTo'](_0xf4e0dc[_0x356c89(0x2d3)],_0xf4e0dc['command'],{'success':![],'message':_0x356c89(0x2c0)},_0xf4e0dc[_0x356c89(0x246)]);try{const _0x31d09b=new GoogleGenerativeAI(_0xf4e0dc['message']['apiKey'])[_0x356c89(0x2a3)]({'model':_0x356c89(0x205)});await _0x31d09b[_0x356c89(0x28f)](_0x356c89(0x18e)),this['sendTo'](_0xf4e0dc[_0x356c89(0x2d3)],_0xf4e0dc[_0x356c89(0x248)],{'success':!![],'message':_0x356c89(0x1bf)},_0xf4e0dc[_0x356c89(0x246)]);}catch(_0x3d4961){this[_0x356c89(0x1ad)](_0xf4e0dc['from'],_0xf4e0dc[_0x356c89(0x248)],{'success':![],'message':_0x3d4961['message']},_0xf4e0dc[_0x356c89(0x246)]);}}else{if(_0xf4e0dc[_0x356c89(0x248)]==='testNotification'){const _0x4a87a2=await this[_0x356c89(0x1bd)]('[Test]\x20Notification',!![]);this[_0x356c89(0x1ad)](_0xf4e0dc[_0x356c89(0x2d3)],_0xf4e0dc[_0x356c89(0x248)],{'success':_0x4a87a2>0x0,'message':_0x4a87a2+_0x356c89(0x1e7)},_0xf4e0dc[_0x356c89(0x246)]);}else{if(_0xf4e0dc['command']===_0x356c89(0x1c2)){if(!this[_0x356c89(0x28b)])return this[_0x356c89(0x1ad)](_0xf4e0dc[_0x356c89(0x2d3)],_0xf4e0dc['command'],{'success':![],'isPro':![]},_0xf4e0dc['callback']);let _0x175227={'status':_0x356c89(0x2ac),'details':'','lastCheck':0x0};try{_0x175227[_0x356c89(0x1f4)]=(await this['getStateAsync'](LTM_DP_DRIFT_STATUS))[_0x356c89(0x304)],_0x175227[_0x356c89(0x1f7)]=(await this['getStateAsync'](LTM_DP_DRIFT_DETAILS))['val'],_0x175227[_0x356c89(0x28d)]=(await this[_0x356c89(0x25b)](LTM_DP_DRIFT_LAST_CHECK))['val'];}catch(_0x48c023){}this['sendTo'](_0xf4e0dc[_0x356c89(0x2d3)],_0xf4e0dc[_0x356c89(0x248)],{'success':!![],'isPro':!![],'dailyDigests':this['dailyDigests'],'driftAnalysis':_0x175227,'analysisHistory':this[_0x356c89(0x317)]},_0xf4e0dc[_0x356c89(0x246)]);}else{if(_0xf4e0dc[_0x356c89(0x248)]===_0x356c89(0x1e6)){const _0x562b0c=await this[_0x356c89(0x2a8)](_0x356c89(0x1a0),'enum'),_0x2056f6=[];if(_0x562b0c)for(const _0x155bea in _0x562b0c){const _0x470341=_0x562b0c[_0x155bea],_0x39e632=(_0x470341[_0x356c89(0x19d)]&&typeof _0x470341['common'][_0x356c89(0x1e4)]===_0x356c89(0x175)?_0x470341[_0x356c89(0x19d)]['name']['de']:_0x470341[_0x356c89(0x19d)][_0x356c89(0x1e4)])||_0x470341[_0x356c89(0x19d)][_0x356c89(0x1e4)];_0x2056f6[_0x356c89(0x2c8)]({'id':_0x155bea,'name':_0x39e632});}this[_0x356c89(0x1ad)](_0xf4e0dc[_0x356c89(0x2d3)],_0xf4e0dc['command'],{'success':!![],'enums':_0x2056f6},_0xf4e0dc[_0x356c89(0x246)]);}else{if(_0xf4e0dc[_0x356c89(0x248)]==='scanDevices')try{const _0x47044b=await this[_0x356c89(0x1bb)](_0xf4e0dc[_0x356c89(0x20a)]||{});this[_0x356c89(0x1ad)](_0xf4e0dc[_0x356c89(0x2d3)],_0xf4e0dc[_0x356c89(0x248)],{'success':!![],'devices':_0x47044b},_0xf4e0dc['callback']);}catch(_0xb26a85){this[_0x356c89(0x1ad)](_0xf4e0dc[_0x356c89(0x2d3)],_0xf4e0dc[_0x356c89(0x248)],{'success':![],'error':_0xb26a85[_0x356c89(0x20a)]},_0xf4e0dc['callback']);}else{if(_0xf4e0dc['command']===_0x356c89(0x183)){const {historyId:_0x9d6804,rating:_0x4c486e,comment:_0x5edf0d,alertReason:_0x2d9625}=_0xf4e0dc[_0x356c89(0x20a)];_0x9d6804&&_0x4c486e?(await this[_0x356c89(0x29c)]({'timestamp':Date['now'](),'historyId':_0x9d6804,'rating':_0x4c486e,'comment':_0x5edf0d,'alertReason':_0x2d9625}),this[_0x356c89(0x1ad)](_0xf4e0dc[_0x356c89(0x2d3)],_0xf4e0dc[_0x356c89(0x248)],{'success':!![]},_0xf4e0dc[_0x356c89(0x246)])):this[_0x356c89(0x1ad)](_0xf4e0dc['from'],_0xf4e0dc['command'],{'success':![],'error':_0x356c89(0x1cc)},_0xf4e0dc['callback']);}else{if(_0xf4e0dc[_0x356c89(0x248)]===_0x356c89(0x200)){const _0x202fdd=await this['getWeatherContext'](),_0x15e613=await this[_0x356c89(0x1c6)]();this[_0x356c89(0x1ad)](_0xf4e0dc[_0x356c89(0x2d3)],_0xf4e0dc[_0x356c89(0x248)],{'success':!![],'weather':_0x202fdd,'calendar':_0x15e613},_0xf4e0dc[_0x356c89(0x246)]);}}}}}}}}}}if(require['main']!==module)module[a0_0x17afd7(0x22c)]=_0x4e0d07=>new CogniLiving(_0x4e0d07);else new CogniLiving();function a0_0x1ba8(){const _0x340475=['WEEK_PROGRAM','@google/generative-ai','getObjectAsync','onMessage','Daily\x20Digest\x20erstellt\x20&\x20gespeichert.','replace','weatherInstance','Fehler:\x20','createAllObjects','latitude','location','üö®üö®\x20NOTFALL','info.','value.temperature','DUTYCYCLE','isArray','1764500WuWTFt','.Summary.Current','baselineDrift','process','eventHistory','long','last\x20action','weather','system.config','callback','rain','command','.\x20PR√ÑSENZ:\x20','now','analysisTimer','write','generic','Last\x20Check','sensorLastValues','wohn','timestamp','LTM.processingStatus','getForeignStateAsync','response','\x0aFEEDBACK:\x0a','Processing\x20Status','getWeatherContext','guest','aiPersona','number','getStateAsync','Bewegung','log','openweathermap.0','hue','mode','javascript.0.script','Drift\x20Details','event','INSTALL_TEST','switch.light','LTM.driftAnalysis.baselineDrift','sat','connection','/100\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Aktivit√§t\x20seit\x2004:00\x20Uhr:\x20','Badezimmer','analysis.history_debug_01','suggestedAction','haust√ºr','.data.text','saveDailyDigests','members','exitGraceTimer','briefingJob','K√ºche','daswetter.','logDuplicates','map','.NextHours.Location_1.Day_1.current.symbol_desc','runAutopilot','Nein','catch','Garten','analysis.lastResult','cogni-living','version','geminiModel','systemConfig','WORKING','vacation','ical.0','2APRQuH','level','t√ºr','setState','setupDriftAnalysisScheduler','unknown','VACATION','isProVersion','subscribeForeignStatesAsync','lastCheck','manufacturer','generateContent','ready','Daily\x20Digest\x20created\x20successfully.','description','patternDetected','openweathermap.','20889HiqjpI','Subscribing\x20to\x20','party','cancel','daswetter.0','\x0a\x20\x20\x20\x20\x20\x20\x20\x20INPUT:\x20','some','saveFeedback','ROLLE:\x20F√ºrsorglicher\x20Assistent.\x0a\x20\x20\x20\x20\x20\x20\x20\x20AUFGABE:\x20Schreibe\x20eine\x20kurze,\x20beruhigende\x20\x22Guten\x20Morgen\x22-Nachricht\x20an\x20die\x20Angeh√∂rigen/Bewohner.\x0a\x20\x20\x20\x20\x20\x20\x20\x20TON:\x20Freundlich,\x20professionell,\x20kurz.\x0a\x20\x20\x20\x20\x20\x20\x20\x20PERSONA\x20(Fokus):\x20','Schalter/Licht','toISOString','enum','detectionState','events.history','getGenerativeModel','online','setupModeResetScheduler','rauch','summary','getForeignObjectsAsync','value.humidity','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20DATEN:\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Schlafqualit√§t\x20letzte\x20Nacht:\x20','N/A\x20(Learning)','N/A','accuweather.0','temp','\x0a!!!\x20END\x20WARNING\x20!!!\x0a','analysis.history_debug_04','3336BXAbEw','alert','uuid','\x0a\x20\x20\x20\x20\x20\x20\x20\x20ZUSATZ-KONTEXT:\x20','length','186232UkNUHC','Flur','link_quality','loadDailyDigests','onUnload','analysis.history_debug_02','Error\x20loading\x20Raw\x20Log:\x20','24UngnWO','restlessness','Rauchmelder','No\x20Key','1544655qhYovx','SABOTAGE','normal','LTM.rawEventLog','find','griff','dailyDigests','push','city','analysis.isEmergency','none','genAI','DIRECTION','licenseKey','mac\x20address','isPresent','rawEventLog','trim','from','system.mode','analysis.isAlert','uuid-error','colormode','currentSystemMode','OPERATING_VOLTAGE','longitude','PRO-','system.isPresent','setPresence','LTM.triggerDailyDigest','\x20*\x20*\x20*','\x22\x20was\x20','parse','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','ltmJob','Analysiere\x20ausgewogen\x20auf\x20Gesundheit,\x20Sicherheit\x20und\x20Komfort.','stringify','CONNECTION','includes','split','isExit','bind','testApiKey','analysis.alertReason','extendObjectAsync','processSensorEvent','search','splice','presence','runGeminiAnalysis','driftAnalysisTimer','CRITICAL\x20WARNING:\x20No\x20sensor\x20activity\x20detected\x20for\x20','analysis.automation.patternDetected','setupBriefingScheduler','bad','modeResetJob','sensor.door','temperature','toString','setupLtmScheduler','.\x0a\x20\x20\x20\x20\x20\x20\x20\x20EXTERNER\x20KONTEXT\x20(WICHTIG):\x20','(((.+)+)+)+$','setStateAsync','Daily\x20Digests','AES_KEY','icons-mfd.','\x20hours.\x20The\x20resident\x20might\x20be\x20incapacitated.\x20Risk\x20level:\x20HIGH.','val','saveRawEventLog','Generating\x20Morning\x20Briefing...','garten','Starting\x20Smart\x20Scan\x20with\x20filters:\x20','\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20AUFGABE:\x20Analysiere\x20die\x20Events\x20auf\x20Aktivit√§t,\x20Komfort\x20und\x20GESUNDHEIT.\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20Nutze\x20den\x20EXTERNEN\x20KONTEXT\x20(Wetter/Kalender)\x20um\x20Fehlalarme\x20zu\x20vermeiden\x20(z.B.\x20Regen\x20=\x20keine\x20Gartenaktivit√§t,\x20Termin\x20=\x20Abwesend).\x0a\x20\x20\x20\x20\x20\x20\x20\x20SCHEMA:\x20{\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22activity\x22:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22deviationFromBaseline\x22:\x20\x22string\x22,\x20\x22isAlert\x22:\x20bool,\x20\x22isEmergency\x22:\x20bool,\x20\x22alertReason\x22:\x20\x22string\x22\x20},\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22comfort\x22:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22suggestion\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22patternDetected\x22:\x20bool,\x20\x22description\x22:\x20\x22string\x22,\x20\x22suggestedAction\x22:\x20\x22string\x22\x20}\x20},\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22health\x22:\x20{\x20\x22sleepScore\x22:\x20number\x20(0-100),\x20\x22restlessness\x22:\x20\x22none|low|medium|high\x22,\x20\x22notes\x22:\x20\x22string\x22\x20}\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20}','checkLicense','systemUUID','archetype','Drift\x20Analysis','de-DE','events.lastEvent','LTM.baselineStatus','Deaktiviert\x20(Pro-Feature)','PROCESS','error','boolean','feedbackHistory','ltmDriftCheckIntervalHours','analysisHistory','application/json','apiKey','toLowerCase','ON_TIME','object','reachable','SECTION','\x0a\x20\x20\x20\x20\x20\x20\x20\x20KONTEXT\x20(Wer\x20wohnt\x20hier?):\x20','scriptProblem','health','rating','scriptEnabled','Trigger\x20Digest','.forecast.current.state','Temperatur','useCalendar','COMBINED_PARAMETER','ALARM','submitFeedback','sleepScore','selectedFunctionIds','0\x203\x20*\x20*\x20*','\x20raw\x20events...','join','toLocaleString','diele','.\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20KONTEXT\x20(Wohnen):\x20','Fokus\x20auf\x20Familienroutinen,\x20Kindersicherheit\x20und\x20allgemeines\x20Haushaltsmanagement.','constructor','test','uuid-not-found','analysis.automation.suggestedAction','UNREACH','geminiApiKey','presenceDevices','analysisInterval','icon','\x20min).\x20Watchdog\x20Limit:\x20','Creating\x20Daily\x20Digest\x20from\x20','analysis.analysisHistory','native','motion','doors','Briefing\x20Error:\x20','common','2-digit','namespace','enum.functions.*','sort','role','sensor.motion','checkWifiPresence','cogni-living\x20adapter\x20starting\x20(v','528946QfBTgN','startsWith','firmware','1315447xodldd','unload','suggestion','toUpperCase','sendTo','livingContext','getSystemUUID','delObjectAsync','state','productname','0\x204\x20*\x20*\x20*','events.history_debug_04','KALENDER:\x20Keine\x20Termine','scheduleJob','daswetter','triggerBriefing','smoke','activity','scanForDevices','admin.','sendNotification','FAULT','Success','material.','runBaselineDriftAnalysis','getLtmData','.\x20PERSONA:\x20','isGracePeriodActive','config','getCalendarContext','subscribeStates','signal','eingang','inactivityMonitoringEnabled','date','Missing\x20data','analysis.comfortSummary','WiFi\x20Presence\x20detected\x20->\x20Aborting\x20Exit\x20Timer.\x20User\x20is\x20present.','User\x20Feedback:\x20Alarm\x20\x22','enum.rooms.*','NORMAL','lastAlertState','analysis.history_debug_00','ERROR','ROLLE:\x20Data\x20Analyst.\x20AUFGABE:\x20Fasse\x20den\x20heutigen\x20Tag\x20basierend\x20auf\x20den\x20Sensor-Logs\x20zusammen.\x0a\x20\x20\x20\x20\x20\x20\x20\x20PERSONA:\x20','ltmLtbWindowDays','wohnungst√ºr','text','briefingEnabled','startExitTimer','loadSystemMode','updateBaselineStatus','minDaysForBaseline','events.history_debug_02','analysis.history_debug_03','flot.','slice','apply','string','name','abortExitTimer','getEnums','\x20sent','sensor.window','‚ö†Ô∏è\x20Alarm','Baseline:\x20Inactive\x20(Pro\x20Feature).','Raw\x20Log','initHistory','k√ºche','alertReason','fenster','system.','sendMorningBriefing','values','system.meta.uuid','status','checkLtmObjects','briefingTime','details','Scheduling\x20Morning\x20Briefing\x20for\x20','Morning\x20Briefing\x20sent.','unshift','LOWBAT','\x20Tage)','exitTimer','temperatur','comfort','testContext','licht','type','_score','Wohnzimmer','models/gemini-flash-latest','modelid','Baseline\x20Status','onStateChange','Gemini\x20Init\x20Error:\x20','message','ROLLE:\x20Data\x20Scientist.\x20VERGLEICHE:\x20Dataset\x20A\x20(Recent)\x20vs\x20B\x20(Established).\x20ZIEL:\x20Erkenne\x20Drift.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aB\x20(LTB):\x0a','onReady','automationProposal','createDailyDigest','button','Analysis\x20Error:\x20','devices','17122570amEcqY','Analysiere\x20Tag...','\x20sensors...','üåÖ\x20Daily\x20Briefing:\x0a','getForeignObjectAsync','analysis.triggerBriefing','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20OUTPUT:\x20Nur\x20der\x20Nachrichtentext\x20(kein\x20JSON).\x20Integriere\x20den\x20Kontext\x20(Wetter/Kalender)\x20nur\x20wenn\x20relevant.','PRIORIT√ÑT:\x20Gesundheit\x20und\x20Sicherheit\x20f√ºr\x20Senioren\x20(AAL).\x20Erkenne\x20Inaktivit√§t,\x20potenzielle\x20St√ºrze\x20(indirekt),\x20Schlafunterbrechungen\x20und\x20n√§chtliche\x20Unruhe.','.\x20ORT:\x20','info','TEST-PRO-KEY','fire','flur','.\x0a\x20\x20\x20\x20\x20\x20\x20\x20MODUS:\x20','\x0a!!!\x20EXTERNAL\x20SYSTEM\x20WARNING\x20!!!\x0a','last_seen','Bewegung\x20w√§hrend\x20Exit-Timer\x20erkannt\x20->\x20Bewohner\x20ist\x20noch\x20da.','loadRawEventLog','shutter_contact','GUEST','json','analysis.trigger','driftDetails','inactivityThresholdHours','channel','precip','exports'];a0_0x1ba8=function(){return _0x340475;};return a0_0x1ba8();}