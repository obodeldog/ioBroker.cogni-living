const a0_0x152b34=a0_0x56b3;(function(_0x563566,_0x2932e7){const _0x166843=a0_0x56b3,_0x2069ec=_0x563566();while(!![]){try{const _0x2c69a6=-parseInt(_0x166843(0x18a))/0x1+-parseInt(_0x166843(0x172))/0x2*(parseInt(_0x166843(0x1c4))/0x3)+-parseInt(_0x166843(0x15b))/0x4*(-parseInt(_0x166843(0x189))/0x5)+parseInt(_0x166843(0x264))/0x6*(parseInt(_0x166843(0x193))/0x7)+-parseInt(_0x166843(0x1de))/0x8*(-parseInt(_0x166843(0x1b5))/0x9)+-parseInt(_0x166843(0x20b))/0xa*(-parseInt(_0x166843(0x283))/0xb)+-parseInt(_0x166843(0x279))/0xc;if(_0x2c69a6===_0x2932e7)break;else _0x2069ec['push'](_0x2069ec['shift']());}catch(_0x414e49){_0x2069ec['push'](_0x2069ec['shift']());}}}(a0_0x35b6,0xb7b18));const a0_0x1972f3=(function(){let _0x10aac2=!![];return function(_0x4b8a85,_0xdceaa5){const _0x217141=_0x10aac2?function(){const _0x2bdd6f=a0_0x56b3;if(_0xdceaa5){const _0xa98de7=_0xdceaa5[_0x2bdd6f(0x17f)](_0x4b8a85,arguments);return _0xdceaa5=null,_0xa98de7;}}:function(){};return _0x10aac2=![],_0x217141;};}()),a0_0xf2a988=a0_0x1972f3(this,function(){const _0x2f9ebd=a0_0x56b3;return a0_0xf2a988['toString']()[_0x2f9ebd(0x21d)](_0x2f9ebd(0x23d))[_0x2f9ebd(0x1d0)]()['constructor'](a0_0xf2a988)[_0x2f9ebd(0x21d)](_0x2f9ebd(0x23d));});a0_0xf2a988();'use strict';const utils=require(a0_0x152b34(0x2c3)),{GoogleGenerativeAI}=require(a0_0x152b34(0x1ae)),{spawn}=require(a0_0x152b34(0x241)),path=require(a0_0x152b34(0x1be)),fs=require('fs'),installer=require(a0_0x152b34(0x26b)),scanner=require(a0_0x152b34(0x18b)),schedulers=require(a0_0x152b34(0x173)),HISTORY_MAX_SIZE=0x32,RAW_LOG_MAX_SIZE=0x9c4,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL=a0_0x152b34(0x17a),SEQUENCE_TIMEOUT_MS=0x5*0x3c*0x3e8,MAX_TRAINING_SET_SIZE=0x1f4,THERMO_LOG_SIZE=0x3e8,EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,LTM_DP_RAW_LOG='LTM.rawEventLog',LTM_DP_DAILY_DIGESTS=a0_0x152b34(0x20c),LTM_DP_STATUS=a0_0x152b34(0x1eb),LTM_DP_TRIGGER_DIGEST=a0_0x152b34(0x21f),LTM_DP_BASELINE_STATUS=a0_0x152b34(0x28b),LTM_DP_DRIFT_CHANNEL='LTM.driftAnalysis',LTM_DP_DRIFT_STATUS='LTM.driftAnalysis.baselineDrift',LTM_DP_DRIFT_DETAILS='LTM.driftAnalysis.driftDetails',LTM_DP_DRIFT_LAST_CHECK=a0_0x152b34(0x1d9),SYSTEM_DP_MODE=a0_0x152b34(0x19b),SYSTEM_MODES={'NORMAL':'normal','VACATION':a0_0x152b34(0x164),'PARTY':a0_0x152b34(0x263),'GUEST':a0_0x152b34(0x169)},AUTO_RESET_MODES=[SYSTEM_MODES[a0_0x152b34(0x1a7)],SYSTEM_MODES[a0_0x152b34(0x19a)]],PERSONA_MAPPING={'generic':'Analysiere\x20ausgewogen.','senior_aal':a0_0x152b34(0x22e),'family':'Fokus\x20auf\x20Familienroutinen.','single_comfort':a0_0x152b34(0x251),'security':a0_0x152b34(0x17e)},ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};let activeSequence=[],sequenceTimer=null;async function initZombies(_0x2cf800){const _0x586465=a0_0x152b34;try{const _0x47dbf0=['analysis.history_debug_00',_0x586465(0x1e1)];for(const _0x1bef0a of _0x47dbf0){try{const _0x2e0243=await _0x2cf800['getObjectAsync'](_0x1bef0a);if(_0x2e0243)await _0x2cf800[_0x586465(0x1c1)](_0x1bef0a);}catch(_0x1ca630){}}}catch(_0x4d4c33){}}async function checkLicense(_0x8b89){return!![];}async function initHistory(_0x3add2c){const _0x36371a=a0_0x152b34;try{const _0x3039c6=await _0x3add2c[_0x36371a(0x140)]('events.history');_0x3039c6&&_0x3039c6[_0x36371a(0x1f0)]&&(_0x3add2c[_0x36371a(0x2a1)]=JSON['parse'](_0x3039c6[_0x36371a(0x1f0)][_0x36371a(0x1d0)]()));}catch(_0x2c3cab){_0x3add2c[_0x36371a(0x2a1)]=[];}try{const _0x5b588b=await _0x3add2c[_0x36371a(0x140)]('analysis.analysisHistory');if(_0x5b588b&&_0x5b588b[_0x36371a(0x1f0)])_0x3add2c['analysisHistory']=JSON[_0x36371a(0x21a)](_0x5b588b['val'][_0x36371a(0x1d0)]());}catch(_0x19a6a7){_0x3add2c[_0x36371a(0x1a2)]=[];}if(_0x3add2c[_0x36371a(0x2a1)]&&_0x3add2c[_0x36371a(0x2a1)][_0x36371a(0x284)]>0x0){_0x3add2c[_0x36371a(0x149)][_0x36371a(0x197)](_0x36371a(0x18c));for(let _0x45e97b=_0x3add2c['eventHistory'][_0x36371a(0x284)]-0x1;_0x45e97b>=0x0;_0x45e97b--){const _0x2e529c=_0x3add2c['eventHistory'][_0x45e97b];if(_0x2e529c&&_0x2e529c['id']!==undefined&&_0x2e529c['value']!==undefined)_0x3add2c['sensorLastValues'][_0x2e529c['id']]=_0x2e529c['value'];}}}async function initSystemConfig(_0xfe48cd){const _0x406c06=a0_0x152b34;try{const _0x26b71f=await _0xfe48cd[_0x406c06(0x1bf)](_0x406c06(0x19f));if(_0x26b71f&&_0x26b71f[_0x406c06(0x13e)])_0xfe48cd[_0x406c06(0x168)]={'latitude':_0x26b71f['common'][_0x406c06(0x2ca)]||0x0,'longitude':_0x26b71f[_0x406c06(0x13e)][_0x406c06(0x2c1)]||0x0,'city':_0x26b71f[_0x406c06(0x13e)][_0x406c06(0x23c)]||''};}catch(_0x3c86ca){}}async function createAllObjects(_0x1e6951){const _0x414c5f=a0_0x152b34;await _0x1e6951[_0x414c5f(0x21e)](_0x414c5f(0x26d),{'type':_0x414c5f(0x29a),'common':{'name':_0x414c5f(0x177)},'native':{}}),await _0x1e6951[_0x414c5f(0x21e)](SYSTEM_DP_MODE,{'type':_0x414c5f(0x1db),'common':{'name':_0x414c5f(0x287),'type':_0x414c5f(0x1c6),'role':_0x414c5f(0x1db),'read':!![],'write':!![],'def':SYSTEM_MODES[_0x414c5f(0x1c0)]},'native':{}}),await _0x1e6951['setObjectNotExistsAsync'](_0x414c5f(0x225),{'type':_0x414c5f(0x1db),'common':{'name':_0x414c5f(0x25b),'type':_0x414c5f(0x1c6),'role':'text','read':!![],'write':![]},'native':{}}),await _0x1e6951[_0x414c5f(0x14b)](_0x414c5f(0x2c2),{'type':_0x414c5f(0x1db),'common':{'name':'Last\x20raw\x20event','type':'string','role':_0x414c5f(0x150),'read':!![],'write':![]},'native':{}}),await _0x1e6951[_0x414c5f(0x14b)](_0x414c5f(0x1d5),{'type':_0x414c5f(0x1db),'common':{'name':'Event\x20History','type':_0x414c5f(0x1c6),'role':_0x414c5f(0x150),'read':!![],'write':![]},'native':{}}),await _0x1e6951[_0x414c5f(0x21e)](_0x414c5f(0x1a6),{'type':_0x414c5f(0x29a),'common':{'name':'AI\x20Training'},'native':{}}),await _0x1e6951[_0x414c5f(0x14b)]('analysis.training.triggerSecurity',{'type':_0x414c5f(0x1db),'common':{'name':'Train\x20Security','type':'boolean','role':_0x414c5f(0x2c8),'read':!![],'write':!![]},'native':{}}),await _0x1e6951[_0x414c5f(0x14b)](_0x414c5f(0x1d2),{'type':_0x414c5f(0x1db),'common':{'name':_0x414c5f(0x232),'type':'boolean','role':'button','read':!![],'write':!![]},'native':{}}),await _0x1e6951[_0x414c5f(0x14b)](_0x414c5f(0x148),{'type':'state','common':{'name':_0x414c5f(0x22f),'type':_0x414c5f(0x1cb),'role':_0x414c5f(0x2c8),'read':!![],'write':!![]},'native':{}}),await _0x1e6951[_0x414c5f(0x14b)](_0x414c5f(0x2b9),{'type':'state','common':{'name':'Train\x20Comfort','type':_0x414c5f(0x1cb),'role':_0x414c5f(0x2c8),'read':!![],'write':!![]},'native':{}}),await _0x1e6951[_0x414c5f(0x14b)]('analysis.training.triggerTopology',{'type':_0x414c5f(0x1db),'common':{'name':_0x414c5f(0x1e8),'type':_0x414c5f(0x1cb),'role':'button','read':!![],'write':!![]},'native':{}}),await _0x1e6951[_0x414c5f(0x14b)](_0x414c5f(0x14a),{'type':_0x414c5f(0x1db),'common':{'name':_0x414c5f(0x2cd),'type':_0x414c5f(0x1c6),'role':'text','read':!![],'write':![]},'native':{}}),await _0x1e6951[_0x414c5f(0x21e)](_0x414c5f(0x27c),{'type':_0x414c5f(0x29a),'common':{'name':_0x414c5f(0x25c)},'native':{}}),await _0x1e6951['setObjectNotExistsAsync'](_0x414c5f(0x280),{'type':'state','common':{'name':'Anomaly\x20Score','type':_0x414c5f(0x1e5),'role':'value','read':!![],'write':![]},'native':{}}),await _0x1e6951['setObjectNotExistsAsync'](_0x414c5f(0x1f4),{'type':'state','common':{'name':_0x414c5f(0x28f),'type':_0x414c5f(0x1e5),'role':_0x414c5f(0x224),'read':!![],'write':![],'def':0.05},'native':{}}),await _0x1e6951['setObjectNotExistsAsync'](_0x414c5f(0x2be),{'type':_0x414c5f(0x1db),'common':{'name':'Last\x20Check','type':'string','role':_0x414c5f(0x156),'read':!![],'write':![]},'native':{}}),await _0x1e6951[_0x414c5f(0x14b)]('analysis.security.topologyMatrix',{'type':_0x414c5f(0x1db),'common':{'name':_0x414c5f(0x1af),'type':'string','role':_0x414c5f(0x150),'read':!![],'write':![]},'native':{}}),await _0x1e6951[_0x414c5f(0x21e)](_0x414c5f(0x170),{'type':_0x414c5f(0x29a),'common':{'name':'Health\x20Analysis'},'native':{}}),await _0x1e6951[_0x414c5f(0x14b)](_0x414c5f(0x28a),{'type':_0x414c5f(0x1db),'common':{'name':'Last\x20Check','type':_0x414c5f(0x1c6),'role':'date','read':!![],'write':![]},'native':{}}),await _0x1e6951[_0x414c5f(0x14b)](_0x414c5f(0x299),{'type':_0x414c5f(0x1db),'common':{'name':'Anomaly\x20Detected','type':_0x414c5f(0x1cb),'role':'indicator','read':!![],'write':![]},'native':{}}),await _0x1e6951['setObjectNotExistsAsync']('analysis.health.trendDiagnosis',{'type':_0x414c5f(0x1db),'common':{'name':_0x414c5f(0x27d),'type':_0x414c5f(0x1c6),'role':_0x414c5f(0x2b0),'read':!![],'write':![]},'native':{}}),await _0x1e6951[_0x414c5f(0x14b)](_0x414c5f(0x1fa),{'type':_0x414c5f(0x1db),'common':{'name':'Trend\x20Value','type':_0x414c5f(0x1e5),'role':_0x414c5f(0x224),'read':!![],'write':![]},'native':{}}),await _0x1e6951[_0x414c5f(0x14b)](_0x414c5f(0x16d),{'type':_0x414c5f(0x1db),'common':{'name':'Today\x20Vector\x20(15m)','type':_0x414c5f(0x1c6),'role':_0x414c5f(0x150),'read':!![],'write':![]},'native':{}}),await _0x1e6951[_0x414c5f(0x14b)](_0x414c5f(0x1b9),{'type':'state','common':{'name':_0x414c5f(0x182),'type':_0x414c5f(0x1e5),'role':_0x414c5f(0x224),'read':!![],'write':![]},'native':{}}),await _0x1e6951[_0x414c5f(0x21e)](_0x414c5f(0x1b7),{'type':_0x414c5f(0x29a),'common':{'name':_0x414c5f(0x237)},'native':{}}),await _0x1e6951[_0x414c5f(0x14b)](_0x414c5f(0x2cc),{'type':_0x414c5f(0x1db),'common':{'name':'Insulation\x20Score','type':_0x414c5f(0x1c6),'role':_0x414c5f(0x2b0),'read':!![],'write':![]},'native':{}}),await _0x1e6951['setObjectNotExistsAsync'](_0x414c5f(0x267),{'type':'state','common':{'name':_0x414c5f(0x273),'type':_0x414c5f(0x1c6),'role':_0x414c5f(0x2b0),'read':!![],'write':![]},'native':{}}),await _0x1e6951['setObjectNotExistsAsync']('analysis.energy.forecast',{'type':_0x414c5f(0x1db),'common':{'name':'Temperature\x20Forecast','type':'string','role':_0x414c5f(0x150),'read':!![],'write':![]},'native':{}}),await _0x1e6951[_0x414c5f(0x21e)](_0x414c5f(0x212),{'type':_0x414c5f(0x29a),'common':{'name':'LTM'},'native':{}}),await _0x1e6951[_0x414c5f(0x21e)](LTM_DP_RAW_LOG,{'type':'state','common':{'name':_0x414c5f(0x265),'type':'string','role':_0x414c5f(0x150),'read':!![],'write':![]},'native':{}}),await _0x1e6951[_0x414c5f(0x21e)](LTM_DP_DAILY_DIGESTS,{'type':_0x414c5f(0x1db),'common':{'name':'Daily\x20Digests','type':_0x414c5f(0x1c6),'role':_0x414c5f(0x150),'read':!![],'write':![]},'native':{}}),await _0x1e6951[_0x414c5f(0x14b)]('LTM.trainingData.sequences',{'type':'state','common':{'name':_0x414c5f(0x23e),'type':_0x414c5f(0x1c6),'role':_0x414c5f(0x150),'read':!![],'write':![]},'native':{}}),await _0x1e6951[_0x414c5f(0x14b)](_0x414c5f(0x2c6),{'type':_0x414c5f(0x1db),'common':{'name':_0x414c5f(0x176),'type':_0x414c5f(0x1c6),'role':'json','read':!![],'write':![]},'native':{}}),await _0x1e6951[_0x414c5f(0x14b)](_0x414c5f(0x2c9),{'type':_0x414c5f(0x1db),'common':{'name':_0x414c5f(0x192),'type':_0x414c5f(0x1cb),'role':_0x414c5f(0x2c8),'read':!![],'write':!![]},'native':{}}),await _0x1e6951[_0x414c5f(0x14b)]('analysis.triggerBriefing',{'type':_0x414c5f(0x1db),'common':{'name':_0x414c5f(0x1e2),'type':_0x414c5f(0x1cb),'role':_0x414c5f(0x2c8),'read':!![],'write':!![]},'native':{}}),await _0x1e6951['setObjectNotExistsAsync'](_0x414c5f(0x2bf),{'type':_0x414c5f(0x1db),'common':{'name':_0x414c5f(0x2b8),'type':_0x414c5f(0x1cb),'role':_0x414c5f(0x198),'read':!![],'write':![]},'native':{}}),await _0x1e6951[_0x414c5f(0x14b)](_0x414c5f(0x1fe),{'type':_0x414c5f(0x1db),'common':{'name':_0x414c5f(0x298),'type':_0x414c5f(0x1c6),'role':_0x414c5f(0x1d8),'read':!![],'write':![]},'native':{}}),await _0x1e6951[_0x414c5f(0x14b)](_0x414c5f(0x1c7),{'type':_0x414c5f(0x1db),'common':{'name':_0x414c5f(0x14e),'type':_0x414c5f(0x1c6),'role':_0x414c5f(0x2b0),'read':!![],'write':![]},'native':{}}),await _0x1e6951[_0x414c5f(0x14b)]('analysis.automation.patternDetected',{'type':_0x414c5f(0x1db),'common':{'name':_0x414c5f(0x254),'type':_0x414c5f(0x1cb),'role':'indicator','read':!![],'write':![]},'native':{}}),await _0x1e6951[_0x414c5f(0x14b)]('analysis.automation.description',{'type':_0x414c5f(0x1db),'common':{'name':'Description','type':_0x414c5f(0x1c6),'role':_0x414c5f(0x2b0),'read':!![],'write':![]},'native':{}}),await _0x1e6951[_0x414c5f(0x14b)](_0x414c5f(0x209),{'type':'state','common':{'name':_0x414c5f(0x270),'type':_0x414c5f(0x1c6),'role':_0x414c5f(0x150),'read':!![],'write':![]},'native':{}}),await _0x1e6951[_0x414c5f(0x14b)](_0x414c5f(0x174),{'type':_0x414c5f(0x1db),'common':{'name':_0x414c5f(0x190),'type':_0x414c5f(0x1c6),'role':'text','read':!![],'write':![]},'native':{}}),await _0x1e6951[_0x414c5f(0x14b)](_0x414c5f(0x1ac),{'type':_0x414c5f(0x1db),'common':{'name':_0x414c5f(0x154),'type':_0x414c5f(0x1c6),'role':'text','read':!![],'write':![]},'native':{}}),await _0x1e6951['setObjectNotExistsAsync'](_0x414c5f(0x29d),{'type':'state','common':{'name':_0x414c5f(0x1a9),'type':'boolean','role':_0x414c5f(0x152),'read':!![],'write':!![]},'native':{}}),await _0x1e6951['setObjectNotExistsAsync']('analysis.automation.triggerAction',{'type':_0x414c5f(0x1db),'common':{'name':_0x414c5f(0x2a8),'type':_0x414c5f(0x1cb),'role':_0x414c5f(0x2c8),'read':!![],'write':!![]},'native':{}});}function a0_0x56b3(_0x3d2abc,_0x5a7865){const _0x214bf8=a0_0x35b6();return a0_0x56b3=function(_0xf2a988,_0x1972f3){_0xf2a988=_0xf2a988-0x13b;let _0x35b659=_0x214bf8[_0xf2a988];return _0x35b659;},a0_0x56b3(_0x3d2abc,_0x5a7865);}async function loadSystemMode(_0xa72021){const _0x319191=a0_0x152b34;try{const _0x1166cd=await _0xa72021['getStateAsync'](SYSTEM_DP_MODE);_0x1166cd&&_0x1166cd[_0x319191(0x1f0)]&&Object[_0x319191(0x146)](SYSTEM_MODES)[_0x319191(0x221)](_0x1166cd[_0x319191(0x1f0)])?_0xa72021['currentSystemMode']=_0x1166cd[_0x319191(0x1f0)]:(_0xa72021[_0x319191(0x163)]=SYSTEM_MODES[_0x319191(0x1c0)],await _0xa72021[_0x319191(0x2b4)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x319191(0x1c0)],'ack':!![]}));}catch(_0x338ec9){_0xa72021[_0x319191(0x163)]=SYSTEM_MODES[_0x319191(0x1c0)];}}async function loadRawEventLog(_0x22333c){const _0x296869=a0_0x152b34;try{const _0x5b3a59=await _0x22333c[_0x296869(0x140)](LTM_DP_RAW_LOG);if(_0x5b3a59&&_0x5b3a59[_0x296869(0x1f0)])_0x22333c[_0x296869(0x2a9)]=JSON['parse'](_0x5b3a59['val']);}catch(_0x502e4a){_0x22333c[_0x296869(0x2a9)]=[];}}async function saveRawEventLog(_0x100af7){const _0x29b22b=a0_0x152b34;if(_0x100af7[_0x29b22b(0x2a9)][_0x29b22b(0x284)]>RAW_LOG_MAX_SIZE)_0x100af7['rawEventLog'][_0x29b22b(0x191)](0x0,_0x100af7[_0x29b22b(0x2a9)][_0x29b22b(0x284)]-RAW_LOG_MAX_SIZE);await _0x100af7[_0x29b22b(0x2b4)](LTM_DP_RAW_LOG,{'val':JSON[_0x29b22b(0x222)](_0x100af7['rawEventLog']),'ack':!![]});}async function loadDailyDigests(_0x44a823){const _0x1b717e=a0_0x152b34;try{const _0x3ee4f4=await _0x44a823[_0x1b717e(0x140)](LTM_DP_DAILY_DIGESTS);if(_0x3ee4f4&&_0x3ee4f4['val'])_0x44a823[_0x1b717e(0x261)]=JSON[_0x1b717e(0x21a)](_0x3ee4f4['val']);}catch(_0x18b3da){_0x44a823['dailyDigests']=[];}await updateBaselineStatus(_0x44a823);}async function saveDailyDigests(_0x44f725,_0x39c5ab=!![]){const _0x26151a=a0_0x152b34,_0x314991=_0x44f725['config']['ltmLtbWindowDays']||0x3c;_0x44f725[_0x26151a(0x261)][_0x26151a(0x284)]>_0x314991&&_0x44f725[_0x26151a(0x261)]['splice'](0x0,_0x44f725[_0x26151a(0x261)][_0x26151a(0x284)]-_0x314991);await _0x44f725['setStateAsync'](LTM_DP_DAILY_DIGESTS,{'val':JSON['stringify'](_0x44f725[_0x26151a(0x261)]),'ack':!![]});if(_0x39c5ab)await updateBaselineStatus(_0x44f725);}async function updateAnalysisHistory(_0x42417a,_0x51ef11){const _0x2bd040=a0_0x152b34;_0x42417a[_0x2bd040(0x1a2)][_0x2bd040(0x238)](_0x51ef11);if(_0x42417a[_0x2bd040(0x1a2)][_0x2bd040(0x284)]>HISTORY_MAX_SIZE)_0x42417a['analysisHistory'][_0x2bd040(0x249)]();await _0x42417a['setStateAsync'](_0x2bd040(0x17b),{'val':JSON[_0x2bd040(0x222)](_0x42417a[_0x2bd040(0x1a2)]),'ack':!![]});}async function updateBaselineStatus(_0x440a55){const _0x3da83c=a0_0x152b34;if(!_0x440a55[_0x3da83c(0x236)]){await _0x440a55['setStateAsync'](LTM_DP_BASELINE_STATUS,{'val':_0x3da83c(0x195),'ack':!![]});return;}const _0x1799f4=_0x440a55[_0x3da83c(0x261)][_0x3da83c(0x284)]>=(_0x440a55[_0x3da83c(0x1f6)][_0x3da83c(0x24d)]||0x7)?_0x3da83c(0x141)+_0x440a55[_0x3da83c(0x261)][_0x3da83c(0x284)]+_0x3da83c(0x217):_0x3da83c(0x1a5)+_0x440a55['dailyDigests']['length']+'/'+(_0x440a55[_0x3da83c(0x1f6)][_0x3da83c(0x24d)]||0x7)+')';await _0x440a55[_0x3da83c(0x2b4)](LTM_DP_BASELINE_STATUS,{'val':_0x1799f4,'ack':!![]});}async function initSensorSubscriptions(_0x22d186){const _0x4d893f=a0_0x152b34,_0x301985=_0x22d186[_0x4d893f(0x1f6)][_0x4d893f(0x15d)];if(_0x301985)for(const _0x371609 of _0x301985){await _0x22d186[_0x4d893f(0x1b1)](_0x371609['id']);}}async function initPresenceSubscriptions(_0x33a785){const _0x52173d=a0_0x152b34,_0xa7c836=_0x33a785['config']['presenceDevices'];if(_0xa7c836)for(const _0x30c22f of _0xa7c836){await _0x33a785[_0x52173d(0x1b1)](_0x30c22f);}}async function setupTelegramListener(_0x50f6f0){const _0x280d95=a0_0x152b34,_0x14a1fa=_0x50f6f0[_0x280d95(0x1f6)]['notifyTelegramInstance'];if(_0x50f6f0[_0x280d95(0x1f6)][_0x280d95(0x1ab)]&&_0x14a1fa)await _0x50f6f0['subscribeForeignStatesAsync'](_0x14a1fa+_0x280d95(0x184));}async function checkWifiPresence(_0x18f0b1){const _0xc91f2b=a0_0x152b34;try{const _0x4ba401=_0x18f0b1[_0xc91f2b(0x1f6)][_0xc91f2b(0x1bd)]||[];let _0x10a137=![];const _0x4706c9=[];for(const _0x541348 of _0x4ba401){try{const _0x2f83b7=await _0x18f0b1['getForeignStateAsync'](_0x541348);_0x2f83b7&&(_0x2f83b7[_0xc91f2b(0x1f0)]===!![]||_0x2f83b7[_0xc91f2b(0x1f0)]===_0xc91f2b(0x2a4)||_0x2f83b7['val']===0x1)&&(_0x10a137=!![],_0x4706c9[_0xc91f2b(0x293)](_0x541348));}catch(_0x521f72){}}return await _0x18f0b1[_0xc91f2b(0x2b4)]('system.presenceWho',{'val':_0x4706c9['join'](',\x20'),'ack':!![]}),_0x10a137&&(_0x18f0b1[_0xc91f2b(0x22d)]&&(_0x18f0b1[_0xc91f2b(0x149)]['info'](_0xc91f2b(0x17c)),abortExitTimer(_0x18f0b1)),!_0x18f0b1[_0xc91f2b(0x21b)]&&_0x18f0b1[_0xc91f2b(0x163)]===SYSTEM_MODES[_0xc91f2b(0x1c0)]&&await setPresence(_0x18f0b1,!![])),_0x10a137;}catch(_0x4351d6){return![];}}function startExitTimer(_0x3370e8){const _0x24e76b=a0_0x152b34;abortExitTimer(_0x3370e8),_0x3370e8[_0x24e76b(0x2d0)]=!![],_0x3370e8[_0x24e76b(0x143)]=setTimeout(()=>{const _0x51b561=_0x24e76b;_0x3370e8[_0x51b561(0x2d0)]=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),_0x3370e8[_0x24e76b(0x22d)]=setTimeout(()=>{const _0x55ea8b=_0x24e76b;setPresence(_0x3370e8,![]),_0x3370e8[_0x55ea8b(0x22d)]=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}function abortExitTimer(_0x438cc1){const _0xae6c37=a0_0x152b34;if(_0x438cc1[_0xae6c37(0x22d)])clearTimeout(_0x438cc1[_0xae6c37(0x22d)]);if(_0x438cc1[_0xae6c37(0x143)])clearTimeout(_0x438cc1['exitGraceTimer']);_0x438cc1[_0xae6c37(0x22d)]=null,_0x438cc1[_0xae6c37(0x143)]=null,_0x438cc1['isGracePeriodActive']=![];}async function setPresence(_0x1e0822,_0x2e95a3){const _0x3da4d4=a0_0x152b34;if(_0x1e0822['isPresent']===_0x2e95a3)return;_0x1e0822[_0x3da4d4(0x21b)]=_0x2e95a3,await _0x1e0822['setStateAsync']('system.isPresent',{'val':_0x2e95a3,'ack':!![]});}async function executeAutomationAction(_0x540e5){const _0x4240bd=a0_0x152b34;try{const _0x45361c=await _0x540e5[_0x4240bd(0x140)](_0x4240bd(0x174)),_0x255740=await _0x540e5[_0x4240bd(0x140)]('analysis.automation.targetValue');if(_0x45361c&&_0x45361c[_0x4240bd(0x1f0)]&&_0x255740){const _0x3e77e7=_0x45361c[_0x4240bd(0x1f0)];let _0xc28212=_0x255740['val'];try{_0xc28212=JSON[_0x4240bd(0x21a)](_0xc28212);}catch(_0x3cb43f){}_0x540e5[_0x4240bd(0x149)][_0x4240bd(0x197)](_0x4240bd(0x179)+_0x3e77e7+_0x4240bd(0x25e)+_0xc28212),await _0x540e5[_0x4240bd(0x26a)](_0x3e77e7,_0xc28212);}else _0x540e5[_0x4240bd(0x149)][_0x4240bd(0x271)](_0x4240bd(0x1f8));}catch(_0x3652f0){_0x540e5[_0x4240bd(0x149)]['error'](_0x4240bd(0x142)+_0x3652f0['message']);}}async function processSensorEvent(_0x3c2350,_0x28c35b,_0x28ec4e,_0x2d7641){const _0x2d005d=a0_0x152b34;if(!_0x2d7641)return;const _0xad5fac=_0x28ec4e[_0x2d005d(0x1f0)],_0x1ae8aa=Date[_0x2d005d(0x1f9)](),_0x4d2829=_0x3c2350[_0x2d005d(0x220)][_0x28c35b];_0x3c2350[_0x2d005d(0x220)][_0x28c35b]=_0xad5fac;if(!_0x2d7641[_0x2d005d(0x260)]&&_0x4d2829!=undefined&&_0x4d2829==_0xad5fac)return;const _0x3357d6=(_0x2d7641['type']||'')[_0x2d005d(0x219)](),_0x515127=_0x3357d6['includes'](_0x2d005d(0x2a0))||_0x3357d6[_0x2d005d(0x221)]('temperatur')||_0x3357d6[_0x2d005d(0x221)](_0x2d005d(0x1c2))||_0x3357d6[_0x2d005d(0x221)](_0x2d005d(0x14f));_0x3c2350[_0x2d005d(0x236)]&&_0x515127&&recordThermodynamics(_0x3c2350,_0x28c35b,_0xad5fac,_0x2d7641[_0x2d005d(0x259)]);const _0x54d39c={'timestamp':_0x1ae8aa,'id':_0x28c35b,'name':_0x2d7641['name'],'type':_0x2d7641[_0x2d005d(0x1ff)],'location':_0x2d7641[_0x2d005d(0x259)],'value':_0xad5fac};_0x3c2350[_0x2d005d(0x2a1)][_0x2d005d(0x238)](_0x54d39c);if(_0x3c2350['eventHistory'][_0x2d005d(0x284)]>HISTORY_MAX_SIZE)_0x3c2350[_0x2d005d(0x2a1)][_0x2d005d(0x249)]();await _0x3c2350[_0x2d005d(0x2b4)]('events.lastEvent',{'val':JSON[_0x2d005d(0x222)](_0x54d39c),'ack':!![]}),await _0x3c2350['setStateAsync'](_0x2d005d(0x1d5),{'val':JSON['stringify'](_0x3c2350[_0x2d005d(0x2a1)]),'ack':!![]});_0x3c2350[_0x2d005d(0x236)]&&(_0x3c2350[_0x2d005d(0x2a9)][_0x2d005d(0x293)](_0x54d39c),await saveRawEventLog(_0x3c2350),recordSequence(_0x3c2350,_0x54d39c));if(_0x2d7641[_0x2d005d(0x181)]&&_0xad5fac===!![]){if(_0x3c2350[_0x2d005d(0x21b)]&&!_0x3c2350[_0x2d005d(0x2d0)])startExitTimer(_0x3c2350);else{if(!_0x3c2350[_0x2d005d(0x21b)])setPresence(_0x3c2350,!![]);}}else{if(_0x2d7641[_0x2d005d(0x1ff)]===_0x2d005d(0x1bc)&&_0xad5fac===!![]){if(_0x3c2350[_0x2d005d(0x22d)])abortExitTimer(_0x3c2350);if(!_0x3c2350['isPresent']&&_0x3c2350['currentSystemMode']===SYSTEM_MODES['NORMAL'])setPresence(_0x3c2350,!![]);}}}async function recordThermodynamics(_0xea8bd3,_0x16c734,_0x5dcf1e,_0x1d3f24){const _0x1580fa=a0_0x152b34,_0x4ccba4=await getOutsideTemperatureNumeric(_0xea8bd3),_0x23df71=await _0xea8bd3[_0x1580fa(0x140)](_0x1580fa(0x2c6));let _0x477608=[];if(_0x23df71&&_0x23df71[_0x1580fa(0x1f0)])try{_0x477608=JSON[_0x1580fa(0x21a)](_0x23df71[_0x1580fa(0x1f0)]);}catch(_0x496183){}_0x477608['push']({'ts':Date[_0x1580fa(0x1f9)](),'room':_0x1d3f24||_0x1580fa(0x268),'t_in':_0x5dcf1e,'t_out':_0x4ccba4});if(_0x477608['length']>THERMO_LOG_SIZE)_0x477608[_0x1580fa(0x1a3)]();await _0xea8bd3[_0x1580fa(0x2b4)](_0x1580fa(0x2c6),{'val':JSON[_0x1580fa(0x222)](_0x477608),'ack':!![]});}async function getOutsideTemperatureNumeric(_0x4cfc0b){const _0x54727f=a0_0x152b34;if(_0x4cfc0b['config'][_0x54727f(0x166)])try{const _0x11fc8b=await _0x4cfc0b[_0x54727f(0x27f)](_0x4cfc0b[_0x54727f(0x1f6)][_0x54727f(0x166)]);if(_0x11fc8b&&_0x11fc8b['val']!==undefined&&_0x11fc8b['val']!==null)return parseFloat(_0x11fc8b['val']);}catch(_0x181f7a){}const _0x5f298b=_0x4cfc0b[_0x54727f(0x1f6)][_0x54727f(0x231)];if(!_0x4cfc0b['config'][_0x54727f(0x246)]||!_0x5f298b)return null;try{let _0x513a2f='';if(_0x5f298b[_0x54727f(0x221)](_0x54727f(0x1f2)))_0x513a2f=_0x5f298b+_0x54727f(0x201);else{if(_0x5f298b[_0x54727f(0x221)](_0x54727f(0x1b3)))_0x513a2f=_0x5f298b+_0x54727f(0x25d);else{if(_0x5f298b[_0x54727f(0x221)]('openweathermap'))_0x513a2f=_0x5f298b+_0x54727f(0x203);else{if(_0x5f298b[_0x54727f(0x221)](_0x54727f(0x256)))_0x513a2f=_0x5f298b+_0x54727f(0x1f1);}}}if(_0x513a2f){const _0x1494c7=await _0x4cfc0b['getForeignStateAsync'](_0x513a2f);if(_0x1494c7&&_0x1494c7[_0x54727f(0x1f0)]!==undefined&&_0x1494c7[_0x54727f(0x1f0)]!==null)return parseFloat(_0x1494c7[_0x54727f(0x1f0)]);}}catch(_0x4abf41){}return null;}async function recordSequence(_0x136cea,_0x9c8133){const _0x16404a=a0_0x152b34,_0x532f5b=(_0x9c8133[_0x16404a(0x1ff)]||'')[_0x16404a(0x219)](),_0x141950=[_0x16404a(0x1bc),'bewegung',_0x16404a(0x255),_0x16404a(0x14c),'occupancy','door',_0x16404a(0x257),_0x16404a(0x2a5),_0x16404a(0x24b),_0x16404a(0x180),_0x16404a(0x1ad),_0x16404a(0x19e),'licht',_0x16404a(0x152),'schalter',_0x16404a(0x2ce),_0x16404a(0x1c9)];if(!_0x141950['some'](_0x4fb343=>_0x532f5b[_0x16404a(0x221)](_0x4fb343)))return;if(!_0x9c8133[_0x16404a(0x224)])return;if(sequenceTimer)clearTimeout(sequenceTimer);activeSequence[_0x16404a(0x293)]({'loc':_0x9c8133['location']||_0x16404a(0x268),'id':_0x9c8133['id'],'ts':Date[_0x16404a(0x1f9)]()}),sequenceTimer=setTimeout(async()=>{const _0x48f08e=_0x16404a;if(activeSequence[_0x48f08e(0x284)]>0x1)await saveCompletedSequence(_0x136cea);activeSequence=[];},SEQUENCE_TIMEOUT_MS);}async function saveCompletedSequence(_0x68337e){const _0x40580d=a0_0x152b34;try{const _0x35d739=await _0x68337e[_0x40580d(0x140)]('LTM.trainingData.sequences');let _0x4951ac=[];if(_0x35d739&&_0x35d739[_0x40580d(0x1f0)])try{_0x4951ac=JSON[_0x40580d(0x21a)](_0x35d739['val']);}catch(_0xdbcbac){}const _0x4ca6cf=activeSequence[0x0]['ts'],_0x476cd1=activeSequence[_0x40580d(0x275)](_0x2a3cd8=>({'loc':_0x2a3cd8[_0x40580d(0x1e9)],'t_delta':Math[_0x40580d(0x213)]((_0x2a3cd8['ts']-_0x4ca6cf)/0x3e8)})),_0x2af1f3={'timestamp':new Date(_0x4ca6cf)['toISOString'](),'steps':_0x476cd1,'duration':Math[_0x40580d(0x213)]((activeSequence[activeSequence[_0x40580d(0x284)]-0x1]['ts']-_0x4ca6cf)/0x3e8),'daytime':new Date(_0x4ca6cf)[_0x40580d(0x1a4)]()};_0x4951ac[_0x40580d(0x293)](_0x2af1f3);if(_0x4951ac['length']>MAX_TRAINING_SET_SIZE)_0x4951ac[_0x40580d(0x1a3)]();await _0x68337e['setStateAsync'](_0x40580d(0x253),{'val':JSON[_0x40580d(0x222)](_0x4951ac),'ack':!![]}),runSecurityCheck(_0x68337e,_0x2af1f3);}catch(_0x5bb9b0){_0x68337e['log'][_0x40580d(0x1e0)](_0x40580d(0x15c)+_0x5bb9b0[_0x40580d(0x19d)]);}}function runSecurityCheck(_0x3586fe,_0x1db071){const _0x4f9cae=a0_0x152b34;if(!_0x3586fe[_0x4f9cae(0x236)])return;sendToPython(_0x3586fe,_0x4f9cae(0x218),{'sequence':_0x1db071});}async function createDailyDigest(_0xff9b1a){const _0x4c5845=a0_0x152b34;if(!_0xff9b1a[_0x4c5845(0x236)])return;await _0xff9b1a[_0x4c5845(0x2b4)](LTM_DP_STATUS,{'val':'Started...','ack':!![]});if(!_0xff9b1a[_0x4c5845(0x1d6)]||_0xff9b1a['rawEventLog']['length']<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0xff9b1a[_0x4c5845(0x2b4)](LTM_DP_STATUS,{'val':_0x4c5845(0x188),'ack':!![]});return;}const _0x584e91=JSON[_0x4c5845(0x21a)](JSON['stringify'](_0xff9b1a[_0x4c5845(0x2a9)])),_0x3d009a=_0x584e91[_0x4c5845(0x284)],_0x10e7c8=_0x4c5845(0x262)+JSON[_0x4c5845(0x222)](_0x584e91);try{const _0x416ea5=await _0xff9b1a['geminiModel'][_0x4c5845(0x162)](_0x10e7c8),_0x5b2a5f=JSON[_0x4c5845(0x21a)](_0x416ea5['response'][_0x4c5845(0x2b0)]()[_0x4c5845(0x1fb)](/```json|```/g,'')[_0x4c5845(0x2b3)]()),_0x4b08ec={'timestamp':new Date()[_0x4c5845(0x165)](),'eventCount':_0x3d009a,'summary':_0x5b2a5f['summary']||'Digest','activityLevel':_0x5b2a5f[_0x4c5845(0x147)]||_0x4c5845(0x23b),'systemMode':_0xff9b1a[_0x4c5845(0x163)]};_0xff9b1a[_0x4c5845(0x261)][_0x4c5845(0x293)](_0x4b08ec),await saveDailyDigests(_0xff9b1a),_0xff9b1a[_0x4c5845(0x2a9)]=[],await saveRawEventLog(_0xff9b1a),await _0xff9b1a[_0x4c5845(0x2b4)](LTM_DP_STATUS,{'val':_0x4c5845(0x22a),'ack':!![]});if(_0xff9b1a[_0x4c5845(0x236)])sendToPython(_0xff9b1a,_0x4c5845(0x18e),{'digest':_0x4b08ec});}catch(_0x37d2d5){_0xff9b1a[_0x4c5845(0x149)][_0x4c5845(0x1e0)](_0x37d2d5[_0x4c5845(0x19d)]);}}async function runBaselineDriftAnalysis(_0x3cab17){const _0x2b625a=a0_0x152b34;if(!_0x3cab17['isProVersion']||!_0x3cab17[_0x2b625a(0x1d6)])return;const _0x1439df=_0x3cab17[_0x2b625a(0x1f6)][_0x2b625a(0x239)]||0xe;if(_0x3cab17[_0x2b625a(0x261)][_0x2b625a(0x284)]<_0x1439df+0x7){await _0x3cab17[_0x2b625a(0x2b4)](LTM_DP_DRIFT_STATUS,{'val':_0x2b625a(0x200),'ack':!![]});return;}const _0x53071f=_0x3cab17[_0x2b625a(0x261)][_0x2b625a(0x215)](-_0x1439df),_0x3c8ff3=_0x3cab17['dailyDigests'][_0x2b625a(0x215)](0x0,_0x3cab17[_0x2b625a(0x261)][_0x2b625a(0x284)]-_0x1439df),_0x3afc0a=_0x2b625a(0x15f)+JSON[_0x2b625a(0x222)](_0x3c8ff3)+_0x2b625a(0x227)+JSON[_0x2b625a(0x222)](_0x53071f);try{const _0x39c5c4=await _0x3cab17['geminiModel'][_0x2b625a(0x162)](_0x3afc0a),_0x2cbf35=JSON[_0x2b625a(0x21a)](_0x39c5c4['response'][_0x2b625a(0x2b0)]()[_0x2b625a(0x1fb)](/```json|```/g,'')['trim']());_0x2cbf35[_0x2b625a(0x1a1)]&&(await _0x3cab17[_0x2b625a(0x2b4)](LTM_DP_DRIFT_STATUS,{'val':_0x2cbf35[_0x2b625a(0x1a1)],'ack':!![]}),await _0x3cab17[_0x2b625a(0x2b4)](LTM_DP_DRIFT_DETAILS,{'val':_0x2cbf35[_0x2b625a(0x286)],'ack':!![]}),await _0x3cab17[_0x2b625a(0x2b4)](LTM_DP_DRIFT_LAST_CHECK,{'val':Date[_0x2b625a(0x1f9)](),'ack':!![]}));}catch(_0x3a63d0){}}async function sendMorningBriefing(_0x3d2857){const _0x560492=a0_0x152b34;if(!_0x3d2857[_0x560492(0x1d6)])return;try{const _0x1e61ac='Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.',_0x38aea6=await _0x3d2857[_0x560492(0x1d6)][_0x560492(0x162)](_0x1e61ac),_0x5af081=_0x38aea6[_0x560492(0x245)][_0x560492(0x2b0)]();sendNotification(_0x3d2857,'ðŸŒ…\x20Morning\x20Briefing:\x0a'+_0x5af081);}catch(_0x5f4418){_0x3d2857[_0x560492(0x149)][_0x560492(0x1e0)](_0x560492(0x27e)+_0x5f4418[_0x560492(0x19d)]);}}function stopPythonService(_0x4656c0){const _0x494f39=a0_0x152b34;if(_0x4656c0['pythonProcess']){try{_0x4656c0[_0x494f39(0x2ab)][_0x494f39(0x1a0)]();}catch(_0x22d1d0){}_0x4656c0['pythonProcess']=null;}}function sendToPython(_0x4ae4ba,_0x1dedd3,_0x5cbb91={}){const _0x5303a3=a0_0x152b34;if(!_0x4ae4ba[_0x5303a3(0x2ab)]||!_0x4ae4ba[_0x5303a3(0x2ab)]['stdin'][_0x5303a3(0x208)])return;const _0x501b6b=JSON[_0x5303a3(0x222)]({'command':_0x1dedd3,..._0x5cbb91});try{_0x4ae4ba['pythonProcess'][_0x5303a3(0x187)][_0x5303a3(0x272)](_0x501b6b+'\x0a');}catch(_0x339e5a){}}function runPythonHealthCheck(_0x43886b){const _0xb83c07=a0_0x152b34;if(!_0x43886b[_0xb83c07(0x261)]||_0x43886b[_0xb83c07(0x261)]['length']<0x2)return;const _0x1ce660=_0x43886b['dailyDigests'][_0xb83c07(0x275)](_0x144bd5=>{const _0x454c65=_0xb83c07,_0x1030e5=(_0x144bd5['activityLevel']||'')[_0x454c65(0x219)]();return ACTIVITY_LEVEL_MAP[_0x1030e5]||0x32;});sendToPython(_0x43886b,_0xb83c07(0x228),{'values':_0x1ce660,'tag':_0xb83c07(0x15e)});}function handlePythonResult(_0x28ab66,_0x4496fd){const _0x2aba2b=a0_0x152b34;if(_0x4496fd['type']===_0x2aba2b(0x157))_0x28ab66['log'][_0x2aba2b(0x2ad)](_0x2aba2b(0x242));else{if(_0x4496fd['type']===_0x2aba2b(0x18d)){const {anomaly_score:_0x2ac753,is_anomaly:_0x4c561f,threshold:_0xa075d5,explanation:_0x135d44}=_0x4496fd[_0x2aba2b(0x145)];_0x28ab66[_0x2aba2b(0x149)][_0x2aba2b(0x197)](_0x2aba2b(0x1d7)+_0x2ac753[_0x2aba2b(0x1f7)](0x5)+_0x2aba2b(0x1ea)+(_0x4c561f?_0x2aba2b(0x258):'OK')),_0x28ab66['setStateAsync'](_0x2aba2b(0x280),{'val':_0x2ac753,'ack':!![]}),_0x28ab66[_0x2aba2b(0x2b4)](_0x2aba2b(0x2be),{'val':new Date()[_0x2aba2b(0x165)](),'ack':!![]});if(_0xa075d5)_0x28ab66['setStateAsync']('analysis.security.currentThreshold',{'val':_0xa075d5,'ack':!![]});if(_0x4c561f){let _0x28349f='UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20'+_0x2ac753[_0x2aba2b(0x1f7)](0x4)+')';if(_0x135d44&&_0x135d44!==_0x2aba2b(0x268))_0x28349f+=_0x2aba2b(0x16b)+_0x135d44;_0x28ab66[_0x2aba2b(0x2b4)]('analysis.isAlert',{'val':!![],'ack':!![]}),_0x28ab66[_0x2aba2b(0x2b4)]('analysis.alertReason',{'val':_0x28349f,'ack':!![]}),sendNotification(_0x28ab66,_0x2aba2b(0x1e7)+_0x28349f,![],!![]);}}else{if(_0x4496fd['type']===_0x2aba2b(0x2b2)){const _0x4da602=_0x4496fd[_0x2aba2b(0x145)][_0x2aba2b(0x247)]||'',_0x5795c9=_0x4496fd[_0x2aba2b(0x145)][_0x2aba2b(0x277)],_0x3bfbf5=_0x4496fd['payload']['success']?'Success:\x20'+new Date()[_0x2aba2b(0x1cc)]()+'\x20('+_0x4da602+')':'Failed:\x20'+_0x4496fd[_0x2aba2b(0x145)][_0x2aba2b(0x23f)];_0x28ab66[_0x2aba2b(0x2b4)](_0x2aba2b(0x14a),{'val':_0x3bfbf5,'ack':!![]});if(_0x4496fd[_0x2aba2b(0x145)]['success']&&_0x5795c9)_0x28ab66[_0x2aba2b(0x2b4)](_0x2aba2b(0x1f4),{'val':_0x5795c9,'ack':!![]});}else{if(_0x4496fd[_0x2aba2b(0x1ff)]==='COMFORT_RESULT'){const {patterns:_0x8c87a5}=_0x4496fd[_0x2aba2b(0x145)];if(_0x8c87a5&&_0x8c87a5[_0x2aba2b(0x284)]>0x0){_0x28ab66[_0x2aba2b(0x149)][_0x2aba2b(0x197)]('ðŸ›‹ï¸\x20BUTLER:\x20Found\x20'+_0x8c87a5[_0x2aba2b(0x284)]+_0x2aba2b(0x144)),_0x28ab66['setStateAsync']('analysis.automation.detectedPatterns',{'val':JSON['stringify'](_0x8c87a5),'ack':!![]});const _0xd6780d=_0x8c87a5[0x0],_0xc17f77=_0x2aba2b(0x13f)+_0xd6780d['rule']+'\x20('+(_0xd6780d[_0x2aba2b(0x207)]*0x64)['toFixed'](0x0)+'%)';_0x28ab66[_0x2aba2b(0x2b4)]('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),_0x28ab66[_0x2aba2b(0x2b4)](_0x2aba2b(0x16e),{'val':_0xc17f77,'ack':!![]});}else _0x28ab66[_0x2aba2b(0x149)][_0x2aba2b(0x197)](_0x2aba2b(0x1ba)),_0x28ab66[_0x2aba2b(0x2b4)](_0x2aba2b(0x2b6),{'val':![],'ack':!![]}),_0x28ab66[_0x2aba2b(0x2b4)](_0x2aba2b(0x209),{'val':'[]','ack':!![]});}else{if(_0x4496fd[_0x2aba2b(0x1ff)]===_0x2aba2b(0x161)){if(_0x4496fd['payload'][_0x2aba2b(0x1f5)])try{const _0x5646df=JSON['parse'](_0x4496fd[_0x2aba2b(0x145)][_0x2aba2b(0x247)]);if(_0x5646df[_0x2aba2b(0x248)])_0x28ab66[_0x2aba2b(0x2b4)]('analysis.energy.insulationScore',{'val':JSON[_0x2aba2b(0x222)](_0x5646df[_0x2aba2b(0x248)]),'ack':!![]});if(_0x5646df[_0x2aba2b(0x16a)])_0x28ab66[_0x2aba2b(0x2b4)](_0x2aba2b(0x267),{'val':JSON[_0x2aba2b(0x222)](_0x5646df['heating']),'ack':!![]});}catch(_0xe892c0){}}else{if(_0x4496fd[_0x2aba2b(0x1ff)]===_0x2aba2b(0x151)){if(_0x4496fd['payload'][_0x2aba2b(0x1f5)])_0x28ab66[_0x2aba2b(0x149)][_0x2aba2b(0x197)](_0x2aba2b(0x29b));}else{if(_0x4496fd[_0x2aba2b(0x1ff)]===_0x2aba2b(0x2af))_0x28ab66[_0x2aba2b(0x2b4)](_0x2aba2b(0x28a),{'val':new Date()['toISOString'](),'ack':!![]}),_0x28ab66[_0x2aba2b(0x2b4)](_0x2aba2b(0x299),{'val':_0x4496fd['payload']['is_anomaly'],'ack':!![]});else{if(_0x4496fd['type']===_0x2aba2b(0x158))_0x28ab66[_0x2aba2b(0x2b4)](_0x2aba2b(0x13d),{'val':_0x4496fd[_0x2aba2b(0x145)][_0x2aba2b(0x1ee)],'ack':!![]}),_0x28ab66['setStateAsync'](_0x2aba2b(0x1fa),{'val':_0x4496fd[_0x2aba2b(0x145)][_0x2aba2b(0x199)],'ack':!![]});else{if(_0x4496fd[_0x2aba2b(0x1ff)]===_0x2aba2b(0x155)){const {speed_trend:_0x52456a}=_0x4496fd[_0x2aba2b(0x145)];if(_0x52456a!==undefined)_0x28ab66['setStateAsync']('analysis.health.gaitSpeed',{'val':_0x52456a,'ack':!![]});}else{if(_0x4496fd[_0x2aba2b(0x1ff)]===_0x2aba2b(0x2a3)){const {forecast:_0x44ce69}=_0x4496fd[_0x2aba2b(0x145)];if(_0x44ce69)_0x28ab66['setStateAsync'](_0x2aba2b(0x196),{'val':JSON[_0x2aba2b(0x222)](_0x44ce69),'ack':!![]});}else{if(_0x4496fd[_0x2aba2b(0x1ff)]===_0x2aba2b(0x14d)){const {data:_0x5386cd}=_0x4496fd['payload'];_0x5386cd&&(_0x28ab66['log']['info'](_0x2aba2b(0x202)),_0x28ab66['setStateAsync'](_0x2aba2b(0x1df),{'val':JSON[_0x2aba2b(0x222)](_0x5386cd),'ack':!![]}));}}}}}}}}}}}}function startPythonService(_0xef691e){const _0x151411=a0_0x152b34;let _0x4ab1e2='python3';if(fs[_0x151411(0x16c)](installer[_0x151411(0x27a)]))_0x4ab1e2=installer['PYTHON_EXE'];try{const _0x556083=path['join'](__dirname,_0x151411(0x2c7),_0x151411(0x185));_0xef691e['pythonProcess']=spawn(_0x4ab1e2,[_0x556083]),_0xef691e[_0x151411(0x2ab)][_0x151411(0x278)]['on'](_0x151411(0x24f),_0x4af5f4=>{const _0x25ed68=_0x151411,_0x1d26e8=_0x4af5f4[_0x25ed68(0x1d0)]()[_0x25ed68(0x266)]('\x0a');_0x1d26e8[_0x25ed68(0x159)](_0x5ec75d=>{const _0x42ae91=_0x25ed68,_0x37ef5b=_0x5ec75d[_0x42ae91(0x2b3)]();if(!_0x37ef5b)return;if(_0x37ef5b[_0x42ae91(0x2c4)]('[LOG]'))_0xef691e[_0x42ae91(0x149)]['debug'](_0x42ae91(0x240)+_0x37ef5b[_0x42ae91(0x28c)](0x5)['trim']());else{if(_0x37ef5b[_0x42ae91(0x2c4)](_0x42ae91(0x2bd)))try{const _0x240f16=JSON['parse'](_0x37ef5b[_0x42ae91(0x28c)](0x8)[_0x42ae91(0x2b3)]());handlePythonResult(_0xef691e,_0x240f16);}catch(_0xf53b36){}}});}),_0xef691e[_0x151411(0x2ab)]['on']('close',_0x176072=>{const _0x2e55aa=_0x151411;_0xef691e[_0x2e55aa(0x2ab)]=null;});}catch(_0x5da87e){_0xef691e[_0x151411(0x149)][_0x151411(0x1e0)](_0x151411(0x28d)+_0x5da87e[_0x151411(0x19d)]);}}async function runAutopilot(_0x4ecb66){const _0x4e85a8=a0_0x152b34;_0x4ecb66[_0x4e85a8(0x149)][_0x4e85a8(0x2ad)](_0x4e85a8(0x26c)),await runGeminiAnalysis(_0x4ecb66),updateHealthVector(_0x4ecb66),triggerGaitAnalysis(_0x4ecb66),triggerEnergyPrediction(_0x4ecb66);}async function triggerGaitAnalysis(_0xbe8a67){const _0x4db00b=a0_0x152b34;if(!_0xbe8a67[_0x4db00b(0x236)])return;try{const _0xa3fd7f=await _0xbe8a67[_0x4db00b(0x140)](_0x4db00b(0x253));_0xa3fd7f&&_0xa3fd7f[_0x4db00b(0x1f0)]&&sendToPython(_0xbe8a67,_0x4db00b(0x295),{'sequences':JSON[_0x4db00b(0x21a)](_0xa3fd7f[_0x4db00b(0x1f0)])});}catch(_0x4556ac){}}function a0_0x35b6(){const _0x5d2c43=['status','fill','LTM','round','generic','slice','Adapter','\x20Tage)','ANALYZE_SEQUENCE','toLowerCase','parse','isPresent','.Current.WeatherText','search','extendObjectAsync','LTM.triggerDailyDigest','sensorLastValues','includes','stringify','analysisTimer','value','system.presenceWho','getForeignObjectsAsync','\x0aSTB:\x20','ANALYZE_TREND','ðŸ§ \x20Triggering\x20Security\x20Training...','Success','TRAIN_COMFORT','keys','exitTimer','PRIORITÃ„T:\x20Gesundheit/AAL.','Train\x20Energy','triggerDailyDigest','weatherInstance','Train\x20Health','ðŸš€\x20Starting\x20NUUKANNI\x20Logic\x20(v0.12.10)...','cogni-living\x20adapter\x20starting\x20(v','alertReason','isProVersion','Energy\x20Intelligence','unshift','ltmStbWindowDays','modeResetJob','normal','city','(((.+)+)+)+$','Sequences','reason','[PYTHON]\x20','child_process','ðŸ\x20Python\x20Pong','Kalender\x20deaktiviert.','aiPersona','response','useWeather','details','insulation','pop','ack','fenster','unknown','minDaysForBaseline','apiKey','data','endsWith','Fokus\x20auf\x20Komfort.','targetValue','LTM.trainingData.sequences','Pattern\x20Detected','prÃ¤senz','weatherunderground','tÃ¼r','ANOMALY','location','âš ï¸\x20ALARM:\x20','Who\x20is\x20present?','Security\x20Monitor','.NextHours.Location_1.Day_1.current.temp_value','\x20=\x20','analysis.automation.triggerAction','logDuplicates','dailyDigests','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','party','6FsfpZS','Raw\x20Log','split','analysis.energy.heatingScore','Unknown','lastAlertState','setForeignStateAsync','./lib/installer','ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...','system','automation.triggerAction','command','Detected\x20Patterns','warn','write','Heating\x20Score','dependencyInstallInProgress','map','analysis.lastResult','threshold','stdout','411300ozItaG','PYTHON_EXE','N/A','analysis.security','Trend','Briefing\x20Error:\x20','getForeignStateAsync','analysis.security.lastScore','Training\x20Error:\x20','description','4037rNpANm','length','getGenerativeModel','driftDetails','System\x20Mode','.\x20EMERGENCY:\x20','main','analysis.health.lastCheck','LTM.baselineStatus','substring','Error\x20launching\x20Python:\x20','Err:\x20','Current\x20Threshold','isEmergency','useCalendar','getTime','push','bind','ANALYZE_GAIT','setupDriftAnalysisScheduler','Sec-Training\x20started...','Alert\x20Reason','analysis.health.isAnomaly','channel','âœ…\x20HEALTH\x20TRAINED.','setupBriefingScheduler','analysis.automation.autoApply','testContext','ltmJob','temperature','eventHistory','checkAndInstall','ENERGY_PREDICT_RESULT','online','window','KI-Modell\x20nicht\x20initialisiert','inactivityThresholdHours','Trigger\x20Action','rawEventLog','floor','pythonProcess','cancel','debug','scanDevices','HEALTH_RESULT','text','.\x20EVENTS:\x20','TRAINING_COMPLETE','trim','setStateAsync','setHours','analysis.automation.patternDetected','driftAnalysisTimer','Alert\x20Status','analysis.training.triggerComfort','getMinutes','enum.functions.*','filter','[RESULT]','analysis.security.lastCheck','analysis.isAlert','timestamp','longitude','events.lastEvent','@iobroker/adapter-core','startsWith','unload','LTM.trainingData.thermodynamics','python_service','button','analysis.trigger','latitude','onStateChange','analysis.energy.insulationScore','Training\x20Status','dimmer','object','isGracePeriodActive','analysis.triggerBriefing','TRAIN_SECURITY','analysis.health.trendDiagnosis','common','Regel\x20erkannt:\x20','getStateAsync','Aktiv\x20(','BUTLER\x20Execution\x20Error:\x20','exitGraceTimer','\x20new\x20patterns.','payload','values','activityLevel','analysis.training.triggerEnergy','log','analysis.training.status','setObjectNotExistsAsync','presence','TOPOLOGY_RESULT','Activity\x20Summary','heizung','json','HEALTH_TRAIN_RESULT','switch','SIMULATION:\x20Test-Vorschlag\x20fÃ¼r\x20','Target\x20Value','GAIT_RESULT','date','PONG','TREND_RESULT','forEach','PREDICT_ENERGY','114952gfpQep','[RECORDER]\x20Error:\x20','devices','Activity-Level','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','telegram','ENERGY_TRAIN_RESULT','generateContent','currentSystemMode','vacation','toISOString','outdoorSensorId','callback','systemConfig','guest','heating','\x0aGrund:\x20','existsSync','analysis.health.todayVector','analysis.automation.description','.\x20KONTEXT:\x20','analysis.health','sendTo','106wOHKhN','./lib/scheduler','analysis.automation.targetId','version','Thermodynamics','System','onReady','ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20','models/gemini-flash-latest','analysis.analysisHistory','WiFi\x20Presence\x20detected.','getFullYear','PRIORITÃ„T:\x20Sicherheit.','apply','contact','isExit','Gait\x20Speed\x20Trend','automationProposal','.communicate.request','service.py','ðŸ§ª\x20Simulating\x20Butler\x20Proposal:\x20','stdin','Skipped\x20(No\x20AI\x20or\x20Data)','20bLztob','69212TJBQtl','./lib/scanner','Restoring\x20sensor\x20cache...','SECURITY_RESULT','ANALYZE_HEALTH','calendarInstance','Target\x20ID','splice','Trigger\x20Analysis','3273137uFkBbK','cogni-living','Deaktiviert\x20(Pro-Feature)','analysis.energy.forecast','info','indicator.alarm','change_percent','GUEST','system.mode','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','message','light','system.config','kill','baselineDrift','analysisHistory','shift','getHours','Lernphase\x20(','analysis.training','PARTY','summary','Auto\x20Apply','application/json','notifyTelegramEnabled','analysis.automation.targetValue','kontakt','@google/generative-ai','Topology\x20Matrix','enum.rooms.*','subscribeForeignStatesAsync','setState','daswetter','Â°C,\x20','2359737loeqZF','licenseKey','analysis.energy','autoApply','analysis.health.gaitSpeed','ðŸ›‹ï¸\x20BUTLER:\x20Keine\x20neuen\x20Muster\x20gefunden.','briefingJob','motion','presenceDevices','path','getForeignObjectAsync','NORMAL','delObjectAsync','klima','subscribeStates','77664WCPnuG','dismissAutomation','string','analysis.activitySummary','from','lampe','ready','boolean','toLocaleTimeString','namespace','rating','geminiApiKey','toString','.\x20SYSTEM_MODE:\x20','analysis.training.triggerHealth','setupModeResetScheduler','name','events.history','geminiModel','ðŸ›¡ï¸\x20SECURITY\x20CHECK:\x20Score\x20','text.alarm','LTM.driftAnalysis.lastCheck','simulateButler','state','ðŸ•¸ï¸\x20Building\x20Topology\x20Matrix...','targetId','8nPUuqX','analysis.security.topologyMatrix','error','events.history_debug_00','Trigger\x20Briefing','enum','analysis.training.triggerTopology','number','Gemini\x20Init\x20Error:\x20','âš ï¸\x20SECURITY\x20ALARM:\x20','Build\x20Topology','loc','\x20->\x20','LTM.processingStatus','scanForDevices','onMessage','diagnosis','communicate.request','val','.forecast.current.temp','accuweather','exports','analysis.security.currentThreshold','success','config','toFixed','ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','now','analysis.health.trendValue','replace','genAI','User\x20dismissed\x20automation\x20proposal.','analysis.alertReason','type','N/A\x20(Learning)','.Current.Temperature','ðŸ•¸ï¸\x20Topology\x20Map\x20updated.','.forecast.current.temperature','ðŸ›‹ï¸\x20Triggering\x20Comfort\x20Analysis\x20(Pattern\x20Mining)...','BUILD_TOPOLOGY','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','confidence','writable','analysis.automation.detectedPatterns','instance','37690rIQMTf','LTM.dailyDigests','onUnload','TRAIN_HEALTH','isAlert'];a0_0x35b6=function(){return _0x5d2c43;};return a0_0x35b6();}async function triggerEnergyPrediction(_0x4cf5cf){const _0x3742d3=a0_0x152b34;if(!_0x4cf5cf[_0x3742d3(0x236)])return;try{const _0x30c9f0=await getOutsideTemperatureNumeric(_0x4cf5cf);if(_0x30c9f0===null)return;const _0x54f4e1={},_0x2424d9=_0x4cf5cf['config'][_0x3742d3(0x15d)]||[];for(const _0x118ddc of _0x2424d9){if(_0x118ddc[_0x3742d3(0x1ff)]===_0x3742d3(0x2a0)&&_0x118ddc['location']){const _0x13e5d7=_0x4cf5cf[_0x3742d3(0x220)][_0x118ddc['id']];if(_0x13e5d7!==undefined)_0x54f4e1[_0x118ddc[_0x3742d3(0x259)]]=_0x13e5d7;}}Object[_0x3742d3(0x22c)](_0x54f4e1)[_0x3742d3(0x284)]>0x0&&sendToPython(_0x4cf5cf,_0x3742d3(0x15a),{'current_temps':_0x54f4e1,'t_out':_0x30c9f0});}catch(_0x4871ba){}}function updateHealthVector(_0x194270){const _0x2a8687=a0_0x152b34;if(!_0x194270[_0x2a8687(0x2a9)]||_0x194270[_0x2a8687(0x2a9)][_0x2a8687(0x284)]===0x0)return;const _0x2d3aeb=new Array(0x60)['fill'](0x0),_0x59ebf5=new Date()[_0x2a8687(0x2b5)](0x0,0x0,0x0,0x0);_0x194270[_0x2a8687(0x2a9)][_0x2a8687(0x159)](_0x5e8ae1=>{const _0x325749=_0x2a8687,_0x14515b=new Date(_0x5e8ae1['timestamp']);if(_0x14515b[_0x325749(0x292)]()>=_0x59ebf5){const _0x504ecf=_0x14515b['getHours'](),_0x2db94f=_0x14515b[_0x325749(0x2ba)](),_0x54d674=_0x504ecf*0x4+Math[_0x325749(0x2aa)](_0x2db94f/0xf);if(_0x54d674>=0x0&&_0x54d674<0x60)_0x2d3aeb[_0x54d674]++;}}),_0x194270['setStateAsync'](_0x2a8687(0x16d),{'val':JSON[_0x2a8687(0x222)](_0x2d3aeb),'ack':!![]});}async function getWeatherContext(_0x5a8133){const _0x5619c7=a0_0x152b34;if(!_0x5a8133[_0x5619c7(0x1f6)][_0x5619c7(0x246)]||!_0x5a8133[_0x5619c7(0x1f6)][_0x5619c7(0x231)])return'Wetterdaten\x20deaktiviert.';try{const _0x2e0a47=_0x5a8133['config'][_0x5619c7(0x231)];let _0x154c47=await _0x5a8133[_0x5619c7(0x27f)](_0x2e0a47+_0x5619c7(0x201));if(!_0x154c47)_0x154c47=await _0x5a8133[_0x5619c7(0x27f)](_0x2e0a47+_0x5619c7(0x203));let _0x4c6d4a=await _0x5a8133['getForeignStateAsync'](_0x2e0a47+_0x5619c7(0x21c));if(!_0x4c6d4a)_0x4c6d4a=await _0x5a8133['getForeignStateAsync'](_0x2e0a47+'.forecast.current.state');if(_0x154c47&&_0x4c6d4a)return _0x154c47[_0x5619c7(0x1f0)]+_0x5619c7(0x1b4)+_0x4c6d4a[_0x5619c7(0x1f0)];}catch(_0x2f9674){}return'Keine\x20Wetterdaten\x20verfÃ¼gbar.';}async function getCalendarContext(_0x142cf1){const _0x535d30=a0_0x152b34;if(!_0x142cf1[_0x535d30(0x1f6)][_0x535d30(0x291)]||!_0x142cf1[_0x535d30(0x1f6)][_0x535d30(0x18f)])return _0x535d30(0x243);return'Keine\x20Termine.';}async function getCalendarNames(_0x48802d,_0x2f4b3d){return[];}async function saveFeedback(_0x4952b6,_0x118c99){const _0xe6b2=a0_0x152b34;_0x4952b6['log']['info']('ðŸ“\x20Feedback\x20received:\x20'+_0x118c99[_0xe6b2(0x1ce)]);}async function runGeminiAnalysis(_0xd99219,_0x103e31=''){const _0x2f2cd4=a0_0x152b34;if(!_0xd99219[_0x2f2cd4(0x1d6)])return;if(_0xd99219['eventHistory'][_0x2f2cd4(0x284)]===0x0)return;const _0x530d1e=_0xd99219[_0x2f2cd4(0x2a1)]['slice'](0x0,0xf),_0x176706=await getWeatherContext(_0xd99219),_0x466cc2=_0xd99219['currentSystemMode'],_0x820177=PERSONA_MAPPING[_0xd99219[_0x2f2cd4(0x1f6)][_0x2f2cd4(0x244)]||_0x2f2cd4(0x214)],_0x31037a=_0xd99219[_0x2f2cd4(0x1f6)]['livingContext']||'Keine\x20Details.';let _0x583a49='Unbekannt';try{const _0x17b84a=await _0xd99219[_0x2f2cd4(0x140)](_0x2f2cd4(0x225));if(_0x17b84a&&_0x17b84a['val'])_0x583a49=_0x17b84a['val'];}catch(_0x1fbfc5){}let _0x161846=![];try{const _0x3a94d7=await _0xd99219[_0x2f2cd4(0x140)](_0x2f2cd4(0x29d));if(_0x3a94d7&&_0x3a94d7[_0x2f2cd4(0x1f0)])_0x161846=!![];}catch(_0x25ec55){}const _0x207744=_0x2f2cd4(0x19c)+_0x820177+_0x2f2cd4(0x16f)+_0x31037a+_0x2f2cd4(0x1d1)+_0x466cc2+'.\x20WETTER:\x20'+_0x176706+'.\x20ANWESEND:\x20'+_0x583a49+_0x2f2cd4(0x2b1)+JSON['stringify'](_0x530d1e)+_0x2f2cd4(0x288)+_0x103e31+_0x2f2cd4(0x206);try{const _0x3a2136=await _0xd99219['geminiModel'][_0x2f2cd4(0x162)](_0x207744),_0x48646c=JSON['parse'](_0x3a2136[_0x2f2cd4(0x245)][_0x2f2cd4(0x2b0)]()[_0x2f2cd4(0x1fb)](/```json|```/g,'')[_0x2f2cd4(0x2b3)]());await _0xd99219[_0x2f2cd4(0x2b4)](_0x2f2cd4(0x276),{'val':JSON['stringify'](_0x48646c),'ack':!![]});if(_0x48646c[_0x2f2cd4(0x1a8)])await _0xd99219[_0x2f2cd4(0x2b4)](_0x2f2cd4(0x1c7),{'val':_0x48646c[_0x2f2cd4(0x1a8)],'ack':!![]});const _0x321fb2={'timestamp':Date[_0x2f2cd4(0x1f9)](),'id':Date[_0x2f2cd4(0x1f9)]()[_0x2f2cd4(0x1d0)](),'analysis':{'activity':{'summary':_0x48646c[_0x2f2cd4(0x1a8)],'isAlert':_0x48646c['isAlert'],'alertReason':_0x48646c[_0x2f2cd4(0x235)]},'comfort':{'automationProposal':_0x48646c[_0x2f2cd4(0x183)]}}};await updateAnalysisHistory(_0xd99219,_0x321fb2);const _0x3dcf0d=_0x48646c[_0x2f2cd4(0x20f)]||![];_0x3dcf0d!==_0xd99219[_0x2f2cd4(0x269)]&&(await _0xd99219[_0x2f2cd4(0x2b4)](_0x2f2cd4(0x2bf),{'val':_0x3dcf0d,'ack':!![]}),_0xd99219[_0x2f2cd4(0x269)]=_0x3dcf0d,_0x3dcf0d&&(await _0xd99219[_0x2f2cd4(0x2b4)]('analysis.alertReason',{'val':_0x48646c[_0x2f2cd4(0x235)],'ack':!![]}),sendNotification(_0xd99219,_0x2f2cd4(0x25a)+_0x48646c[_0x2f2cd4(0x235)],![],_0x48646c[_0x2f2cd4(0x290)])));if(_0x48646c['automationProposal']&&_0x48646c[_0x2f2cd4(0x183)]['detected']){await _0xd99219[_0x2f2cd4(0x2b4)](_0x2f2cd4(0x2b6),{'val':!![],'ack':!![]}),await _0xd99219['setStateAsync'](_0x2f2cd4(0x16e),{'val':_0x48646c[_0x2f2cd4(0x183)][_0x2f2cd4(0x282)],'ack':!![]}),await _0xd99219['setStateAsync'](_0x2f2cd4(0x174),{'val':_0x48646c[_0x2f2cd4(0x183)][_0x2f2cd4(0x1dd)],'ack':!![]}),await _0xd99219[_0x2f2cd4(0x2b4)](_0x2f2cd4(0x1ac),{'val':JSON[_0x2f2cd4(0x222)](_0x48646c['automationProposal'][_0x2f2cd4(0x252)]),'ack':!![]});if(_0x161846)executeAutomationAction(_0xd99219);}}catch(_0x5565dc){_0xd99219[_0x2f2cd4(0x149)][_0x2f2cd4(0x1e0)]('Gemini\x20Error:\x20'+_0x5565dc[_0x2f2cd4(0x19d)]);}}async function startSystem(_0x5259a1){const _0x685437=a0_0x152b34;_0x5259a1[_0x685437(0x149)][_0x685437(0x197)](_0x685437(0x233)),await initZombies(_0x5259a1);try{_0x5259a1['isProVersion']=await checkLicense(_0x5259a1[_0x685437(0x1f6)][_0x685437(0x1b6)]);}catch(_0x1b9902){}if(!_0x5259a1[_0x685437(0x1f6)][_0x685437(0x2a7)]||_0x5259a1[_0x685437(0x1f6)][_0x685437(0x2a7)]<0.1)_0x5259a1[_0x685437(0x1f6)]['inactivityThresholdHours']=0xc;await initHistory(_0x5259a1),await initSystemConfig(_0x5259a1);if(_0x5259a1[_0x685437(0x1f6)][_0x685437(0x1cf)])try{_0x5259a1[_0x685437(0x1fc)]=new GoogleGenerativeAI(_0x5259a1[_0x685437(0x1f6)][_0x685437(0x1cf)]),_0x5259a1[_0x685437(0x1d6)]=_0x5259a1[_0x685437(0x1fc)][_0x685437(0x285)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x685437(0x1aa)}}),_0x5259a1['log'][_0x685437(0x197)]('Gemini\x20AI\x20initialized.');}catch(_0x56abf5){_0x5259a1[_0x685437(0x149)][_0x685437(0x1e0)](_0x685437(0x1e6)+_0x56abf5['message']);}await createAllObjects(_0x5259a1),await loadSystemMode(_0x5259a1),await loadRawEventLog(_0x5259a1),await loadDailyDigests(_0x5259a1),_0x5259a1[_0x685437(0x1c3)](_0x685437(0x2c9)),_0x5259a1['subscribeStates'](LTM_DP_TRIGGER_DIGEST),_0x5259a1[_0x685437(0x1c3)](_0x685437(0x19b)),_0x5259a1[_0x685437(0x1c3)](_0x685437(0x13b)),_0x5259a1[_0x685437(0x1c3)](_0x685437(0x25f)),_0x5259a1['subscribeStates']('analysis.automation.autoApply'),_0x5259a1[_0x685437(0x1c3)]('analysis.training.triggerSecurity'),_0x5259a1[_0x685437(0x1c3)]('analysis.training.triggerHealth'),_0x5259a1[_0x685437(0x1c3)](_0x685437(0x148)),_0x5259a1[_0x685437(0x1c3)](_0x685437(0x2b9)),_0x5259a1[_0x685437(0x1c3)]('analysis.training.triggerTopology'),await initSensorSubscriptions(_0x5259a1),await initPresenceSubscriptions(_0x5259a1),await setupTelegramListener(_0x5259a1),setTimeout(()=>checkWifiPresence(_0x5259a1),0x1388);if(_0x5259a1[_0x685437(0x223)])clearInterval(_0x5259a1['analysisTimer']);const _0x3ac954=_0x5259a1[_0x685437(0x1f6)]['analysisInterval']||0xf;_0x3ac954>0x0&&(_0x5259a1[_0x685437(0x223)]=setInterval(()=>{runAutopilot(_0x5259a1);},_0x3ac954*0x3c*0x3e8)),schedulers['setupLtmScheduler'](_0x5259a1,()=>createDailyDigest(_0x5259a1)),schedulers[_0x685437(0x1d3)](_0x5259a1),schedulers[_0x685437(0x296)](_0x5259a1,()=>runBaselineDriftAnalysis(_0x5259a1)),schedulers[_0x685437(0x29c)](_0x5259a1,()=>sendMorningBriefing(_0x5259a1)),startPythonService(_0x5259a1),setTimeout(()=>{const _0x13522c=_0x685437;_0x5259a1[_0x13522c(0x2ab)]&&(runPythonHealthCheck(_0x5259a1),triggerGaitAnalysis(_0x5259a1),triggerEnergyPrediction(_0x5259a1)),updateHealthVector(_0x5259a1);},0x1388);}class CogniLiving extends utils[a0_0x152b34(0x216)]{constructor(_0x3f524e){const _0x4a7a83=a0_0x152b34;super({..._0x3f524e,'name':_0x4a7a83(0x194)}),this[_0x4a7a83(0x2a1)]=[],this[_0x4a7a83(0x1a2)]=[],this[_0x4a7a83(0x2a9)]=[],this[_0x4a7a83(0x261)]=[],this[_0x4a7a83(0x220)]={},this[_0x4a7a83(0x168)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x4a7a83(0x21b)]=!![],this[_0x4a7a83(0x22d)]=null,this['exitGraceTimer']=null,this[_0x4a7a83(0x2d0)]=![],this[_0x4a7a83(0x1fc)]=null,this[_0x4a7a83(0x1d6)]=null,this[_0x4a7a83(0x163)]=SYSTEM_MODES[_0x4a7a83(0x1c0)],this['isProVersion']=![],this[_0x4a7a83(0x269)]=![],this['systemUUID']=_0x4a7a83(0x24c),this[_0x4a7a83(0x223)]=null,this['ltmJob']=null,this['modeResetJob']=null,this[_0x4a7a83(0x2b7)]=null,this[_0x4a7a83(0x1bb)]=null,this[_0x4a7a83(0x2ab)]=null,this['dependencyInstallInProgress']=![],this['on'](_0x4a7a83(0x1ca),this['onReady'][_0x4a7a83(0x294)](this)),this['on']('stateChange',this[_0x4a7a83(0x2cb)]['bind'](this)),this['on'](_0x4a7a83(0x2c5),this[_0x4a7a83(0x20d)]['bind'](this)),this['on'](_0x4a7a83(0x19d),this['onMessage'][_0x4a7a83(0x294)](this));}async[a0_0x152b34(0x178)](){const _0x59ede8=a0_0x152b34;this[_0x59ede8(0x149)][_0x59ede8(0x197)](_0x59ede8(0x234)+this[_0x59ede8(0x175)]+')\x20-\x20SAFE\x20BOOT');if(!installer[_0x59ede8(0x2a2)](this,()=>startSystem(this)))return;}[a0_0x152b34(0x20d)](_0x41051b){const _0x9e421a=a0_0x152b34;if(this[_0x9e421a(0x223)])clearInterval(this['analysisTimer']);if(this[_0x9e421a(0x2b7)])clearInterval(this[_0x9e421a(0x2b7)]);if(this[_0x9e421a(0x29f)])this[_0x9e421a(0x29f)][_0x9e421a(0x2ac)]();if(this[_0x9e421a(0x23a)])this[_0x9e421a(0x23a)]['cancel']();if(this['briefingJob'])this[_0x9e421a(0x1bb)][_0x9e421a(0x2ac)]();if(this[_0x9e421a(0x22d)])clearTimeout(this[_0x9e421a(0x22d)]);if(this[_0x9e421a(0x143)])clearTimeout(this['exitGraceTimer']);stopPythonService(this),_0x41051b();}async['onStateChange'](_0x2dbbe5,_0x554298){const _0xee576c=a0_0x152b34;if(!_0x554298||this[_0xee576c(0x274)])return;if(_0x2dbbe5[_0xee576c(0x221)](_0xee576c(0x160))&&_0x2dbbe5[_0xee576c(0x250)](_0xee576c(0x1ef))&&_0x554298['val']){await handleTelegramResponse(this,_0x554298[_0xee576c(0x1f0)]);return;}if(_0x2dbbe5===this[_0xee576c(0x1cd)]+'.'+SYSTEM_DP_MODE){if(_0x554298[_0xee576c(0x1f0)]&&Object['values'](SYSTEM_MODES)['includes'](_0x554298['val'])){this[_0xee576c(0x163)]=_0x554298[_0xee576c(0x1f0)];if(_0x554298[_0xee576c(0x1f0)]===SYSTEM_MODES['VACATION'])await setPresence(this,![]);else await setPresence(this,!![]);}if(!_0x554298['ack'])this[_0xee576c(0x1b2)](_0x2dbbe5,{'val':this['currentSystemMode'],'ack':!![]});return;}if(!_0x554298[_0xee576c(0x24a)]){_0x2dbbe5[_0xee576c(0x221)](_0xee576c(0x2c9))&&_0x554298['val']&&(this[_0xee576c(0x1b2)](_0x2dbbe5,{'val':![],'ack':!![]}),runGeminiAnalysis(this));if(_0x2dbbe5[_0xee576c(0x221)](_0xee576c(0x230))&&_0x554298[_0xee576c(0x1f0)]){this['setState'](_0x2dbbe5,{'val':![],'ack':!![]});if(this[_0xee576c(0x236)])createDailyDigest(this);}_0x2dbbe5[_0xee576c(0x221)]('triggerBriefing')&&_0x554298[_0xee576c(0x1f0)]&&(this['setState'](_0x2dbbe5,{'val':![],'ack':!![]}),sendMorningBriefing(this));_0x2dbbe5[_0xee576c(0x221)](_0xee576c(0x26e))&&_0x554298[_0xee576c(0x1f0)]&&(this['setState'](_0x2dbbe5,{'val':![],'ack':!![]}),executeAutomationAction(this));if(_0x2dbbe5[_0xee576c(0x221)]('analysis.training.triggerSecurity')&&_0x554298[_0xee576c(0x1f0)]){this[_0xee576c(0x1b2)](_0x2dbbe5,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x313722=await this['getStateAsync']('LTM.trainingData.sequences');if(_0x313722&&_0x313722[_0xee576c(0x1f0)]){const _0x5ace3b=JSON[_0xee576c(0x21a)](_0x313722['val']);this[_0xee576c(0x149)][_0xee576c(0x197)](_0xee576c(0x229)),this[_0xee576c(0x2b4)]('analysis.training.status',{'val':_0xee576c(0x297),'ack':!![]}),sendToPython(this,_0xee576c(0x13c),{'sequences':_0x5ace3b});}}catch(_0x2202dc){this[_0xee576c(0x149)]['error'](_0xee576c(0x281)+_0x2202dc[_0xee576c(0x19d)]);}}if(_0x2dbbe5[_0xee576c(0x221)](_0xee576c(0x1d2))&&_0x554298[_0xee576c(0x1f0)]){this[_0xee576c(0x1b2)](_0x2dbbe5,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x21b8b8=await this[_0xee576c(0x140)](LTM_DP_DAILY_DIGESTS);if(_0x21b8b8&&_0x21b8b8[_0xee576c(0x1f0)])sendToPython(this,_0xee576c(0x20e),{'digests':JSON[_0xee576c(0x21a)](_0x21b8b8[_0xee576c(0x1f0)])});}catch(_0x34f488){}}if(_0x2dbbe5['includes'](_0xee576c(0x148))&&_0x554298[_0xee576c(0x1f0)]){this[_0xee576c(0x1b2)](_0x2dbbe5,{'val':![],'ack':!![]});if(this[_0xee576c(0x236)])try{const _0xa90e90=await this[_0xee576c(0x140)](_0xee576c(0x2c6));if(_0xa90e90&&_0xa90e90['val'])sendToPython(this,'TRAIN_ENERGY',{'points':JSON[_0xee576c(0x21a)](_0xa90e90['val'])});}catch(_0x3743cc){}}if(_0x2dbbe5[_0xee576c(0x221)](_0xee576c(0x2b9))&&_0x554298[_0xee576c(0x1f0)]){this[_0xee576c(0x1b2)](_0x2dbbe5,{'val':![],'ack':!![]});if(this[_0xee576c(0x236)])try{const _0x74dbbc=await this['getStateAsync'](LTM_DP_RAW_LOG);_0x74dbbc&&_0x74dbbc[_0xee576c(0x1f0)]&&(this[_0xee576c(0x149)][_0xee576c(0x197)](_0xee576c(0x204)),sendToPython(this,_0xee576c(0x22b),{'events':JSON[_0xee576c(0x21a)](_0x74dbbc[_0xee576c(0x1f0)])}));}catch(_0x3f4ec6){}}if(_0x2dbbe5[_0xee576c(0x221)](_0xee576c(0x1e4))&&_0x554298[_0xee576c(0x1f0)]){this[_0xee576c(0x1b2)](_0x2dbbe5,{'val':![],'ack':!![]});if(this[_0xee576c(0x236)])try{const _0x1df039=await this['getStateAsync'](_0xee576c(0x253));if(_0x1df039&&_0x1df039[_0xee576c(0x1f0)]){const _0x1c2868=JSON['parse'](_0x1df039['val']);this[_0xee576c(0x149)][_0xee576c(0x197)](_0xee576c(0x1dc)),sendToPython(this,_0xee576c(0x205),{'sequences':_0x1c2868});}}catch(_0x1fc6e3){this[_0xee576c(0x149)]['error']('Topology\x20Error:\x20'+_0x1fc6e3['message']);}}return;}if(this[_0xee576c(0x1f6)]['presenceDevices']&&this['config'][_0xee576c(0x1bd)][_0xee576c(0x221)](_0x2dbbe5)){await checkWifiPresence(this);return;}const _0x58900c=(this[_0xee576c(0x1f6)]['devices']||[])['find'](_0x1e92cb=>_0x1e92cb['id']===_0x2dbbe5);if(_0x58900c)processSensorEvent(this,_0x2dbbe5,_0x554298,_0x58900c);}async[a0_0x152b34(0x1ed)](_0x14a84c){const _0x1d23f8=a0_0x152b34;if(typeof _0x14a84c===_0x1d23f8(0x2cf)&&_0x14a84c['message']){if(_0x14a84c[_0x1d23f8(0x26f)]==='testApiKey'){const _0x132fdc=_0x14a84c[_0x1d23f8(0x19d)][_0x1d23f8(0x24e)]||this[_0x1d23f8(0x1f6)][_0x1d23f8(0x1cf)];if(!_0x132fdc)return this[_0x1d23f8(0x171)](_0x14a84c[_0x1d23f8(0x1c8)],_0x14a84c[_0x1d23f8(0x26f)],{'success':![],'message':'Kein\x20API\x20Key.'},_0x14a84c[_0x1d23f8(0x167)]);try{const _0x844102=new GoogleGenerativeAI(_0x132fdc),_0x2f8184=_0x844102[_0x1d23f8(0x285)]({'model':GEMINI_MODEL}),_0xd49c79=await _0x2f8184['generateContent']('Hi');this[_0x1d23f8(0x171)](_0x14a84c['from'],_0x14a84c[_0x1d23f8(0x26f)],{'success':!![],'message':'OK:\x20'+_0xd49c79['response'][_0x1d23f8(0x2b0)]()},_0x14a84c[_0x1d23f8(0x167)]);}catch(_0x50175c){this[_0x1d23f8(0x171)](_0x14a84c[_0x1d23f8(0x1c8)],_0x14a84c[_0x1d23f8(0x26f)],{'success':![],'message':_0x1d23f8(0x28e)+_0x50175c[_0x1d23f8(0x19d)]},_0x14a84c[_0x1d23f8(0x167)]);}}else{if(_0x14a84c[_0x1d23f8(0x26f)]===_0x1d23f8(0x29e)){const _0x4f82d7=await getWeatherContext(this),_0x3c2649=await getCalendarContext(this);this['sendTo'](_0x14a84c['from'],_0x14a84c[_0x1d23f8(0x26f)],{'success':!![],'weather':_0x4f82d7,'calendar':_0x3c2649},_0x14a84c[_0x1d23f8(0x167)]);}else{if(_0x14a84c[_0x1d23f8(0x26f)]==='getLtmData'){if(!this[_0x1d23f8(0x236)])return this['sendTo'](_0x14a84c[_0x1d23f8(0x1c8)],_0x14a84c['command'],{'success':![],'isPro':![]},_0x14a84c[_0x1d23f8(0x167)]);let _0x530bbf={'status':_0x1d23f8(0x27b)};try{const _0x262eca=await this['getStateAsync'](LTM_DP_DRIFT_STATUS);_0x530bbf[_0x1d23f8(0x210)]=_0x262eca?_0x262eca[_0x1d23f8(0x1f0)]:_0x1d23f8(0x27b);}catch(_0x5e1198){}this[_0x1d23f8(0x171)](_0x14a84c[_0x1d23f8(0x1c8)],_0x14a84c['command'],{'success':!![],'isPro':!![],'dailyDigests':this[_0x1d23f8(0x261)],'driftAnalysis':_0x530bbf,'analysisHistory':this[_0x1d23f8(0x1a2)]},_0x14a84c[_0x1d23f8(0x167)]);}else{if(_0x14a84c[_0x1d23f8(0x26f)]==='getOverviewData'){const _0x1b1a54=this[_0x1d23f8(0x261)]['length'],_0x1e8221=new Date(),_0x2b0495=new Date(_0x1e8221[_0x1d23f8(0x17d)](),_0x1e8221['getMonth'](),_0x1e8221['getDate']())[_0x1d23f8(0x292)](),_0x5047ea=this[_0x1d23f8(0x2a9)][_0x1d23f8(0x2bc)](_0x57d532=>new Date(_0x57d532[_0x1d23f8(0x2c0)])[_0x1d23f8(0x292)]()>_0x2b0495)[_0x1d23f8(0x284)],_0x4bf519=new Array(0x18)[_0x1d23f8(0x211)](0x0);this[_0x1d23f8(0x2a9)]['forEach'](_0x1f2474=>{const _0x45d9c2=_0x1d23f8,_0x198455=new Date(_0x1f2474['timestamp']);if(_0x198455[_0x45d9c2(0x292)]()>_0x2b0495)_0x4bf519[_0x198455[_0x45d9c2(0x1a4)]()]++;});let _0x29d90f={'status':_0x1d23f8(0x27b)};try{const _0x30af10=await this[_0x1d23f8(0x140)](LTM_DP_DRIFT_STATUS);_0x29d90f[_0x1d23f8(0x210)]=_0x30af10?_0x30af10['val']:_0x1d23f8(0x27b);}catch(_0x55e4aa){}let _0xbaa8a2='';try{const _0x4cfa0d=await this['getStateAsync'](_0x1d23f8(0x225));_0xbaa8a2=_0x4cfa0d?_0x4cfa0d[_0x1d23f8(0x1f0)]:'';}catch(_0x2dcf00){}let _0x35020c=null;!this[_0x1d23f8(0x1d6)]&&(_0x35020c=this[_0x1d23f8(0x1f6)][_0x1d23f8(0x1cf)]?_0x1d23f8(0x2a6):'Kein\x20API\x20Key!');let _0x541d4c={'detected':![],'description':'','targetId':'','targetValue':'','autoApply':![]};try{const _0x1a8736=await this['getStateAsync']('analysis.automation.patternDetected');if(_0x1a8736&&_0x1a8736['val']){_0x541d4c['detected']=!![];const _0x503de4=await this[_0x1d23f8(0x140)](_0x1d23f8(0x16e));_0x541d4c['description']=_0x503de4?_0x503de4[_0x1d23f8(0x1f0)]:'';const _0x3e010c=await this[_0x1d23f8(0x140)]('analysis.automation.targetId');_0x541d4c[_0x1d23f8(0x1dd)]=_0x3e010c?_0x3e010c[_0x1d23f8(0x1f0)]:'';const _0x45e306=await this[_0x1d23f8(0x140)](_0x1d23f8(0x1ac));_0x541d4c[_0x1d23f8(0x252)]=_0x45e306?_0x45e306[_0x1d23f8(0x1f0)]:'';}const _0x3772c5=await this['getStateAsync'](_0x1d23f8(0x29d));_0x541d4c[_0x1d23f8(0x1b8)]=_0x3772c5?!!_0x3772c5[_0x1d23f8(0x1f0)]:![];}catch(_0x444f6b){}this[_0x1d23f8(0x171)](_0x14a84c[_0x1d23f8(0x1c8)],_0x14a84c[_0x1d23f8(0x26f)],{'success':!![],'eventHistory':this[_0x1d23f8(0x2a1)][_0x1d23f8(0x215)](0x0,0xf),'stats':{'digestCount':_0x1b1a54,'eventCountToday':_0x5047ea,'hourlyActivity':_0x4bf519,'driftStatus':_0x29d90f[_0x1d23f8(0x210)],'isPresent':this[_0x1d23f8(0x21b)],'presenceWho':_0xbaa8a2,'minDays':this[_0x1d23f8(0x1f6)][_0x1d23f8(0x24d)]||0x7,'stbDays':this[_0x1d23f8(0x1f6)]['ltmStbWindowDays']||0xe,'ltbDays':this[_0x1d23f8(0x1f6)]['ltmLtbWindowDays']||0x3c,'systemError':_0x35020c},'automation':_0x541d4c},_0x14a84c[_0x1d23f8(0x167)]);}else{if(_0x14a84c[_0x1d23f8(0x26f)]===_0x1d23f8(0x2ae))try{const _0x3d0ce2=await scanner[_0x1d23f8(0x1ec)](this,_0x14a84c['message']||{});this[_0x1d23f8(0x171)](_0x14a84c['from'],_0x14a84c[_0x1d23f8(0x26f)],{'success':!![],'devices':_0x3d0ce2},_0x14a84c['callback']);}catch(_0x265197){this['sendTo'](_0x14a84c[_0x1d23f8(0x1c8)],_0x14a84c[_0x1d23f8(0x26f)],{'success':![],'error':_0x265197['message']},_0x14a84c[_0x1d23f8(0x167)]);}else{if(_0x14a84c[_0x1d23f8(0x26f)]==='getEnums'){const _0x410ac8=await this[_0x1d23f8(0x226)](_0x1d23f8(0x2bb),'enum'),_0x159629=[];if(_0x410ac8)for(const _0x3252b1 in _0x410ac8){const _0x2fe98d=_0x410ac8[_0x3252b1],_0x287ce3=(_0x2fe98d['common']&&typeof _0x2fe98d[_0x1d23f8(0x13e)][_0x1d23f8(0x1d4)]===_0x1d23f8(0x2cf)?_0x2fe98d[_0x1d23f8(0x13e)][_0x1d23f8(0x1d4)]['de']:_0x2fe98d['common'][_0x1d23f8(0x1d4)])||_0x2fe98d[_0x1d23f8(0x13e)]['name'];_0x159629[_0x1d23f8(0x293)]({'id':_0x3252b1,'name':_0x287ce3});}const _0x22e8ca=await this[_0x1d23f8(0x226)](_0x1d23f8(0x1b0),_0x1d23f8(0x1e3)),_0x12e691=[];if(_0x22e8ca)for(const _0x4fa65c in _0x22e8ca){const _0x4480ae=_0x22e8ca[_0x4fa65c],_0x1781ef=(_0x4480ae[_0x1d23f8(0x13e)]&&typeof _0x4480ae[_0x1d23f8(0x13e)]['name']==='object'?_0x4480ae[_0x1d23f8(0x13e)][_0x1d23f8(0x1d4)]['de']:_0x4480ae['common'][_0x1d23f8(0x1d4)])||_0x4fa65c[_0x1d23f8(0x266)]('.')[_0x1d23f8(0x249)]();_0x12e691['push'](_0x1781ef);}this[_0x1d23f8(0x171)](_0x14a84c[_0x1d23f8(0x1c8)],_0x14a84c[_0x1d23f8(0x26f)],{'success':!![],'enums':_0x159629,'rooms':_0x12e691},_0x14a84c[_0x1d23f8(0x167)]);}else{if(_0x14a84c[_0x1d23f8(0x26f)]==='getCalendarNames'){const _0x59b4b7=_0x14a84c[_0x1d23f8(0x19d)][_0x1d23f8(0x20a)];if(!_0x59b4b7)return this[_0x1d23f8(0x171)](_0x14a84c[_0x1d23f8(0x1c8)],_0x14a84c[_0x1d23f8(0x26f)],{'success':![],'error':'No\x20instance'},_0x14a84c[_0x1d23f8(0x167)]);const _0x44b959=await getCalendarNames(this,_0x59b4b7);this['sendTo'](_0x14a84c[_0x1d23f8(0x1c8)],_0x14a84c['command'],{'success':!![],'names':_0x44b959},_0x14a84c[_0x1d23f8(0x167)]);}else{if(_0x14a84c['command']===_0x1d23f8(0x1da)){const {targetId:_0x2e59ea,targetValue:_0x539f01}=_0x14a84c[_0x1d23f8(0x19d)];this['log'][_0x1d23f8(0x197)](_0x1d23f8(0x186)+_0x2e59ea+_0x1d23f8(0x25e)+_0x539f01),await this[_0x1d23f8(0x2b4)](_0x1d23f8(0x2b6),{'val':!![],'ack':!![]}),await this[_0x1d23f8(0x2b4)]('analysis.automation.description',{'val':_0x1d23f8(0x153)+_0x2e59ea,'ack':!![]}),await this[_0x1d23f8(0x2b4)](_0x1d23f8(0x174),{'val':_0x2e59ea,'ack':!![]}),await this[_0x1d23f8(0x2b4)](_0x1d23f8(0x1ac),{'val':_0x539f01,'ack':!![]}),this[_0x1d23f8(0x171)](_0x14a84c[_0x1d23f8(0x1c8)],_0x14a84c[_0x1d23f8(0x26f)],{'success':!![]},_0x14a84c[_0x1d23f8(0x167)]);}else{if(_0x14a84c[_0x1d23f8(0x26f)]==='submitFeedback'){const {historyId:_0x2f4019,rating:_0x74d445,comment:_0x6f8884,alertReason:_0x1bebdc}=_0x14a84c[_0x1d23f8(0x19d)];_0x2f4019&&_0x74d445?(await saveFeedback(this,{'timestamp':Date['now'](),'historyId':_0x2f4019,'rating':_0x74d445,'comment':_0x6f8884,'alertReason':_0x1bebdc}),this[_0x1d23f8(0x171)](_0x14a84c[_0x1d23f8(0x1c8)],_0x14a84c['command'],{'success':!![]},_0x14a84c[_0x1d23f8(0x167)])):this[_0x1d23f8(0x171)](_0x14a84c[_0x1d23f8(0x1c8)],_0x14a84c[_0x1d23f8(0x26f)],{'success':![],'error':'Missing\x20data'},_0x14a84c[_0x1d23f8(0x167)]);}else _0x14a84c[_0x1d23f8(0x26f)]===_0x1d23f8(0x1c5)&&(this[_0x1d23f8(0x149)][_0x1d23f8(0x197)](_0x1d23f8(0x1fd)),await this['setStateAsync']('analysis.automation.patternDetected',{'val':![],'ack':!![]}),await this['setStateAsync']('analysis.automation.description',{'val':'','ack':!![]}),this[_0x1d23f8(0x171)](_0x14a84c['from'],_0x14a84c['command'],{'success':!![]},_0x14a84c[_0x1d23f8(0x167)]));}}}}}}}}}}}if(require[a0_0x152b34(0x289)]!==module)module[a0_0x152b34(0x1f3)]=_0x3bdf4e=>new CogniLiving(_0x3bdf4e);else new CogniLiving();