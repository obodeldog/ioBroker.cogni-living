function a0_0x72ca(){const _0x1a306b=['cancel','currentSystemMode','smoke','AES_KEY','.\x0a\x20\x20\x20\x20\x20\x20\x20\x20MODUS:\x20','ack','notifyEmailInstance','Auto','.Summary.Current','rating','FAULT','\x20sent','notifySignalEnabled','9qkmOOa','LTM.rawEventLog','notifyTelegramEnabled','setStateAsync','systemConfig','257593lUHYdq','briefingTime','triggerBriefing','Last\x20Result','connection','online','Flur','.NextHours.Location_1.Day_1.current.symbol_desc','isPresent','PRIORITÃ„T:\x20Gesundheit\x20und\x20Sicherheit\x20fÃ¼r\x20Senioren\x20(AAL).\x20Erkenne\x20InaktivitÃ¤t,\x20potenzielle\x20StÃ¼rze\x20(indirekt),\x20Schlafunterbrechungen\x20und\x20nÃ¤chtliche\x20Unruhe.','date','onUnload','\x0a!!!\x20EXTERNAL\x20SYSTEM\x20WARNING\x20!!!\x0a','precip','ðŸš¨ðŸš¨\x20NOTFALL','/100\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20AktivitÃ¤t\x20seit\x2004:00\x20Uhr:\x20','runBaselineDriftAnalysis','manufacturer','events.history_debug_02','flur','KALENDER:\x20','val','accuweather.','LTM.driftAnalysis.baselineDrift','baselineDrift','.data.table','analysis.lastResult','@google/generative-ai','getForeignObjectAsync','10xFkdNc','Schalter/Licht','analysis.triggerBriefing','notifyPushoverInstance','notifyWhatsappEnabled','length','getGenerativeModel','daswetter.0','logDuplicates','none','setState','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20OUTPUT:\x20Nur\x20der\x20Nachrichtentext\x20(kein\x20JSON).\x20Integriere\x20den\x20Kontext\x20(Wetter/Kalender)\x20nur\x20wenn\x20relevant.','Wetter:\x20Deaktiviert','loadRawEventLog\x20failed:\x20','patternDetected','openweathermap.','Baseline\x20Status','KÃ¼che','DUTYCYCLE','number','sendMorningBriefing','N/A\x20(Pro\x20Feature)','analysisTimer','runAutopilot','testApiKey','Processing\x20Status','command','loadRawEventLog','PRO-','analysis.automation.patternDetected','scanForDevices','10857209srduaC','toLowerCase','notifySignalRecipient','ðŸŒ…\x20Daily\x20Briefing:\x0a','productname','_score','automationProposal','KALENDER:\x20Keine\x20Termine','motion','timestamp','SECTION','Analysiere\x20ausgewogen\x20auf\x20Gesundheit,\x20Sicherheit\x20und\x20Komfort.','system','normal','ON_TIME','generateContent','abortExitTimer','Urlaub','1448140QvmHbf','fenster','.forecast.current.state','Error\x20creating\x20objects:\x20','VIRTUAL_CHANNEL','lampe','Temperatur','useCalendar','string','loadDailyDigests','getStateAsync','material.','Briefing\x20Sched\x20Error:\x20','analysis.history_debug_03','generic','saveRawEventLog','test','events.history','.\x20ORT:\x20','uuid-not-found','temp','updateBaselineStatus','enum','cogni-living','startsWith','history.','admin.','suggestedAction','values','filter','geminiApiKey','AI\x20Emergency\x20Status','getCalendarContext','event','Garten','createAllObjects','last\x20action','weatherunderground.0','[Test]\x20Notification','systemUUID','stateChange','daswetter.','trim','deviationFromBaseline','status','lastAlertState','pop','feedbackHistory','Action','No\x20Key','setObjectNotExistsAsync','loadSystemMode','LTM.dailyDigests','Rauchmelder','weather','geminiModel','some','analysis.history_debug_00','unshift','replace','apiKey','getWeatherContext','analysis.deviationFromBaseline','temperatur','indicator','object','LTM.driftAnalysis.lastCheck','diele','bewegung','getLtmData','Analysis\x20Error:\x20','summary','presenceDevices','livingContext','notifyWhatsappRecipient','checkSystemObjects','schlaf','Lernphase\x20(','parse','Drift\x20Status','text','type','events.history_debug_03','dailyDigests','useWeather','ALARM','enum.functions.*','exports','version','sound','startExitTimer','latitude','LTM.triggerDailyDigest','Autopilot\x20error:\x20','Analysiere\x20Tag...','scriptProblem','onStateChange','ROLLE:\x20Smart\x20Home\x20Analyst.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20AKTUELLE\x20ZEIT:\x20','checkLtmDriftObjects','licht','sleepScore','bad','garten','WETTER:\x20Keine\x20Daten\x20gefunden\x20(Instanz\x20lÃ¤uft?)','effect','analysis.history_debug_01','\x0a!!!\x20END\x20WARNING\x20!!!\x0a','notifyTelegramInstance','lights','ltmStbWindowDays','Error\x20reading\x20calendar:\x20','Fokus\x20auf\x20Familienroutinen,\x20Kindersicherheit\x20und\x20allgemeines\x20Haushaltsmanagement.','json','guest','search','rawEventLog','indicator.alarm','\x22\x20was\x20','checkLicense','system.isPresent','âš ï¸\x20Alarm','firmware','Error\x20initHistory:\x20','Getting\x20Calendar\x20Context\x20from\x20','info','Daily\x20Digest\x20Error:\x20','button','inactivityMonitoringEnabled','namespace','GUEST','ltmLtbWindowDays','briefingJob','Alert\x20Reason','notifyEmailEnabled','wohnungstÃ¼r','ltmDriftCheckIntervalHours','resetAnalysisStates','Licht','PRIORITÃ„T:\x20Sicherheit.\x20Erkenne\x20Eindringlinge,\x20ungewÃ¶hnliche\x20Anwesenheit.','switch.light','88570hHQZOd','Creating\x20Daily\x20Digest\x20from\x20','Starting\x20Autopilot\x20(','setupBriefingScheduler','analysisHistory','write','saveDailyDigests','join','WETTER:\x20','exitGraceTimer','unload','eingang','WORKING','split','analysis.comfortSuggestion','OPERATING_VOLTAGE','native','analysis.activitySummary','main','info.','UNREACH','LOWBAT','isAlert','\x20presence\x20devices...','find','capabilities','eventHistory','6bqMomp','Automation\x20Proposals','analysis.automation.suggestedAction','unknown','analysis.trigger','response','testNotification','WETTER\x20ERROR:\x20','notes','No\x20recorded\x20events\x20yet.','scanDevices','members','COMBINED_PARAMETER','longitude','doors','Missing\x20data','includes','events.history_debug_00','system.mode','system.meta.uuid','catch','Bewegung','notifyPushoverEnabled','submitFeedback','ðŸš¨\x20EMERGENCY','subscribeForeignStatesAsync','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20DATEN:\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20SchlafqualitÃ¤t\x20letzte\x20Nacht:\x20','minDaysForBaseline','LTM\x20Sched\x20Error:\x20','LTM','\x20*\x20*\x20*','sensorLastValues','tÃ¼r','driftAnalysisTimer','scheduleJob','sat','error','reachable','occupancy','LTM.processingStatus','extendObjectAsync','rauch','initHistory','boolean','yr.','config','analysis.comfortSummary','CRITICAL\x20WARNING:\x20No\x20sensor\x20activity\x20detected\x20for\x20','common','channel','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','city','weatherInstance','griff','analysis.automation','\x20min).\x20Watchdog\x20Limit:\x20','Error\x20in\x20onMessage\x20command\x20','Gast','\x0a\x20\x20\x20\x20\x20\x20\x20\x20KONTEXT\x20(Wer\x20wohnt\x20hier?):\x20','analysis.history_debug_04','toUpperCase','genAI','analysis.health.notes','openweathermap','analysis.alertReason','Sending\x20notification:\x20\x22','fire','long','runGeminiAnalysis','analysis.health.sleepScore','inactivityThresholdHours','getSystemUUID','System\x20Mode','(((.+)+)+)+$','wohn','Last\x20raw\x20event','bind','haustÃ¼r','isExit','processSensorEvent','exitTimer','LTM.baselineStatus','alert','Restlessness\x20Level','\x20hours.\x20The\x20resident\x20might\x20be\x20incapacitated.\x20Risk\x20level:\x20HIGH.','warn','log','createDailyDigest','debug','licenseKey','alertReason','License\x20Check\x20failed:\x20','Deaktiviert\x20(Pro-Feature)','calendarInstance','uuid','process','checkLtmObjects','Error\x20checking\x20WiFi:\x20','hue','Baseline:\x20Inactive\x20(Pro\x20Feature).','N/A','level','sort','analysisInterval','Health\x20&\x20Sleep\x20Analysis','analysis.automation.description','system.config','modeResetJob','node-schedule','stringify','.\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20KONTEXT\x20(Wohnen):\x20','Health\x20Notes','\x0a\x20\x20\x20\x20\x20\x20\x20\x20INPUT:\x20','saveFeedback','notifyTelegramRecipient','Description','ROLLE:\x20Data\x20Scientist.\x20VERGLEICHE:\x20Dataset\x20A\x20(Recent)\x20vs\x20B\x20(Established).\x20ZIEL:\x20Erkenne\x20Drift.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aB\x20(LTB):\x0a','accuweather','state','health','Fokus\x20auf\x20Maximierung\x20von\x20Komfort,\x20Automatisierungseffizienz\x20und\x20Energieeinsparung.','LTM.driftAnalysis','Fenster/TÃ¼r','vacation','sendNotification','analysis.analysisHistory','restlessness','\x20(EMERGENCY)','Morning\x20Briefing\x20sent.','message','checkWifiPresence','aiPersona','link_quality','22012znfKXb','isGracePeriodActive','colormode','Aktiv\x20(','getEnums','.\x20PRÃ„SENZ:\x20','.\x0a\x20\x20\x20\x20\x20\x20\x20\x20EXTERNER\x20KONTEXT\x20(WICHTIG):\x20','archetype','activity','retry','Pattern\x20Detected','Reset\x20Sched\x20Error:\x20','rain','ltmJob','now','push','setupDriftAnalysisScheduler','getForeignObjectsAsync','\x0a\x0aA\x20(STB):\x0a','send','notifyWhatsappInstance','presence','subscribeStates','briefingEnabled','Zu\x20wenig\x20Daten\x20fÃ¼r\x20Daily\x20Digest.','expire','callback','temperature','Briefing\x20Error:\x20','splice','Daily\x20Digest\x20erstellt\x20&\x20gespeichert.','sensor.door','getForeignStateAsync','Drift\x20Analysis','Error\x20reading\x20configured\x20weather\x20instance:\x20','triggerDailyDigest','accuweather.0','setPresence','Generating\x20Morning\x20Briefing...','setupLtmScheduler','Deviation','openweathermap.0','Wohnzimmer','Drift\x20Sched\x20Error:\x20','siren','analysis.health.restlessness','analysis.feedbackHistory','NORMAL','\x20raw\x20events...','onReady','name','SABOTAGE','driftDetails','\x0a\x20\x20\x20\x20\x20\x20\x20\x20ZUSATZ-KONTEXT:\x20','analysis.isEmergency','icons-mfd.','system.','delObjectAsync','Daily\x20Digests','setupModeResetScheduler','Party','ROLLE:\x20Data\x20Analyst.\x20AUFGABE:\x20Fasse\x20den\x20heutigen\x20Tag\x20basierend\x20auf\x20den\x20Sensor-Logs\x20zusammen.\x0a\x20\x20\x20\x20\x20\x20\x20\x20PERSONA:\x20','de-DE','from','2121276yqQvlF','Trigger\x20Briefing\x20(Test)','Event\x20History','level.dimmer','mac\x20address','description','System\x20Status\x20&\x20Control','toISOString','AI\x20Alert\x20Status','onMessage','comfort','[TEST]\x20','ROLLE:\x20FÃ¼rsorglicher\x20Assistent.\x0a\x20\x20\x20\x20\x20\x20\x20\x20AUFGABE:\x20Schreibe\x20eine\x20kurze,\x20beruhigende\x20\x22Guten\x20Morgen\x22-Nachricht\x20an\x20die\x20AngehÃ¶rigen/Bewohner.\x0a\x20\x20\x20\x20\x20\x20\x20\x20TON:\x20Freundlich,\x20professionell,\x20kurz.\x0a\x20\x20\x20\x20\x20\x20\x20\x20PERSONA\x20(Fokus):\x20','application/json','69diUFax','sendTo','Badezimmer','models/gemini-flash-latest','0\x203\x20*\x20*\x20*','VACATION','2527696ykRNGX','LTM.driftAnalysis.driftDetails','Gemini\x20AI\x20initialized.','javascript.0.script','analysis.isAlert','.data.text','battery','Sleep\x20Score\x20(0-100)','isProVersion','DIRECTION','toString','uniqueid','sendToAsync','Bewegung\x20wÃ¤hrend\x20Exit-Timer\x20erkannt\x20->\x20Bewohner\x20ist\x20noch\x20da.','loadSystemMode\x20failed:\x20','PROCESS','loadDailyDigests\x20failed:\x20','.\x20PERSONA:\x20','\x20Tage)','slice','location','map','toLocaleString','role','Nein','text.alarm','update','uuid-error','createAllObjects\x20failed:\x20','Drift\x20Details','Schlafzimmer'];a0_0x72ca=function(){return _0x1a306b;};return a0_0x72ca();}const a0_0x3645aa=a0_0x2846;(function(_0x145380,_0xa737e1){const _0x5c6002=a0_0x2846,_0x2be6b5=_0x145380();while(!![]){try{const _0x556b15=-parseInt(_0x5c6002(0x1b4))/0x1*(parseInt(_0x5c6002(0x199))/0x2)+-parseInt(_0x5c6002(0x287))/0x3*(parseInt(_0x5c6002(0x239))/0x4)+-parseInt(_0x5c6002(0x10d))/0x5+-parseInt(_0x5c6002(0x279))/0x6+-parseInt(_0x5c6002(0xbf))/0x7+-parseInt(_0x5c6002(0x8e))/0x8*(-parseInt(_0x5c6002(0xba))/0x9)+parseInt(_0x5c6002(0xdc))/0xa*(parseInt(_0x5c6002(0xfb))/0xb);if(_0x556b15===_0xa737e1)break;else _0x2be6b5['push'](_0x2be6b5['shift']());}catch(_0x12429d){_0x2be6b5['push'](_0x2be6b5['shift']());}}}(a0_0x72ca,0x38549));const a0_0x23ab5c=(function(){let _0x4c9074=!![];return function(_0x1ee39f,_0x6db073){const _0x31ad1c=_0x4c9074?function(){if(_0x6db073){const _0x49163c=_0x6db073['apply'](_0x1ee39f,arguments);return _0x6db073=null,_0x49163c;}}:function(){};return _0x4c9074=![],_0x31ad1c;};}()),a0_0x344d86=a0_0x23ab5c(this,function(){const _0x39bee1=a0_0x2846;return a0_0x344d86['toString']()['search']('(((.+)+)+)+$')['toString']()['constructor'](a0_0x344d86)[_0x39bee1(0x17f)](_0x39bee1(0x1fd));});a0_0x344d86();'use strict';function a0_0x2846(_0x587b6d,_0x929b8f){const _0x175177=a0_0x72ca();return a0_0x2846=function(_0x344d86,_0x23ab5c){_0x344d86=_0x344d86-0x8e;let _0x72ca19=_0x175177[_0x344d86];return _0x72ca19;},a0_0x2846(_0x587b6d,_0x929b8f);}const utils=require('@iobroker/adapter-core'),{GoogleGenerativeAI}=require(a0_0x3645aa(0xda)),schedule=require(a0_0x3645aa(0x220)),HISTORY_MAX_SIZE=0x32,ANALYSIS_HISTORY_MAX_SIZE=0x64,RAW_LOG_MAX_SIZE=0x5dc,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL=a0_0x3645aa(0x28a),LTM_SCHEDULE=a0_0x3645aa(0x28b),MODE_RESET_SCHEDULE='0\x204\x20*\x20*\x20*',LTM_DP_RAW_LOG=a0_0x3645aa(0xbb),LTM_DP_DAILY_DIGESTS=a0_0x3645aa(0x141),LTM_DP_STATUS=a0_0x3645aa(0x1db),LTM_DP_TRIGGER_DIGEST=a0_0x3645aa(0x169),LTM_DP_BASELINE_STATUS=a0_0x3645aa(0x205),LTM_DP_DRIFT_CHANNEL=a0_0x3645aa(0x22d),LTM_DP_DRIFT_STATUS=a0_0x3645aa(0xd6),LTM_DP_DRIFT_DETAILS=a0_0x3645aa(0x8f),LTM_DP_DRIFT_LAST_CHECK=a0_0x3645aa(0x14f),SYSTEM_DP_MODE=a0_0x3645aa(0x1c6),SYSTEM_MODES={'NORMAL':a0_0x3645aa(0x108),'VACATION':a0_0x3645aa(0x22f),'PARTY':'party','GUEST':a0_0x3645aa(0x17e)},AUTO_RESET_MODES=[SYSTEM_MODES['PARTY'],SYSTEM_MODES['GUEST']],EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,PERSONA_MAPPING={'generic':a0_0x3645aa(0x106),'senior_aal':a0_0x3645aa(0xc8),'family':a0_0x3645aa(0x17c),'single_comfort':a0_0x3645aa(0x22c),'security':a0_0x3645aa(0x197)};class CogniLiving extends utils['Adapter']{constructor(_0x3667c5){const _0x47a7c8=a0_0x3645aa;super({..._0x3667c5,'name':_0x47a7c8(0x124)}),this['eventHistory']=[],this['analysisHistory']=[],this[_0x47a7c8(0x13c)]=[],this[_0x47a7c8(0x180)]=[],this[_0x47a7c8(0x160)]=[],this[_0x47a7c8(0x1d3)]={},this[_0x47a7c8(0xbe)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x47a7c8(0xc7)]=!![],this[_0x47a7c8(0x204)]=null,this[_0x47a7c8(0x1a2)]=null,this[_0x47a7c8(0x23a)]=![],this[_0x47a7c8(0x1f1)]=null,this[_0x47a7c8(0x144)]=null,this[_0x47a7c8(0xae)]=SYSTEM_MODES[_0x47a7c8(0x268)],this[_0x47a7c8(0x96)]=![],this[_0x47a7c8(0x13a)]=![],this[_0x47a7c8(0x134)]=_0x47a7c8(0x1b7),this[_0x47a7c8(0xf2)]=null,this[_0x47a7c8(0x246)]=null,this[_0x47a7c8(0x21f)]=null,this['driftAnalysisTimer']=null,this[_0x47a7c8(0x190)]=null,this['on']('ready',this[_0x47a7c8(0x26a)]['bind'](this)),this['on'](_0x47a7c8(0x135),this[_0x47a7c8(0x16d)][_0x47a7c8(0x200)](this)),this['on'](_0x47a7c8(0x1a3),this[_0x47a7c8(0xca)][_0x47a7c8(0x200)](this)),this['on']('message',this[_0x47a7c8(0x282)]['bind'](this));}async[a0_0x3645aa(0x14a)](){const _0x4250fe=a0_0x3645aa;try{if(!this['config'][_0x4250fe(0x161)])return _0x4250fe(0xe8);let _0x18585c='';const _0x3dfdd5=this[_0x4250fe(0x1e1)][_0x4250fe(0x1e8)];this['log'][_0x4250fe(0x20c)]('Getting\x20Weather\x20Context\x20from\x20'+(_0x3dfdd5||_0x4250fe(0xb4)));if(_0x3dfdd5)try{if(_0x3dfdd5[_0x4250fe(0x1c4)](_0x4250fe(0x229))){const _0x5e1c97=await this[_0x4250fe(0x259)](_0x3dfdd5+_0x4250fe(0xb5));if(_0x5e1c97&&_0x5e1c97['val'])_0x18585c=_0x5e1c97[_0x4250fe(0xd4)];}else{if(_0x3dfdd5[_0x4250fe(0x1c4)]('daswetter')){const _0x395409=await this['getForeignStateAsync'](_0x3dfdd5+_0x4250fe(0xc6));if(_0x395409&&_0x395409[_0x4250fe(0xd4)])_0x18585c=_0x395409[_0x4250fe(0xd4)];}else{if(_0x3dfdd5[_0x4250fe(0x1c4)](_0x4250fe(0x1f3))){const _0x1a5bee=await this[_0x4250fe(0x259)](_0x3dfdd5+_0x4250fe(0x10f));if(_0x1a5bee&&_0x1a5bee[_0x4250fe(0xd4)])_0x18585c=_0x1a5bee['val'];}}}}catch(_0x50bc34){this[_0x4250fe(0x20a)]['warn'](_0x4250fe(0x25b)+_0x50bc34[_0x4250fe(0x235)]);}if(!_0x18585c){const _0x5b0d9d=[_0x4250fe(0x25d),_0x4250fe(0xe3),_0x4250fe(0x132),_0x4250fe(0x262)];for(const _0xc4d1a4 of _0x5b0d9d){try{const _0x240139=await this[_0x4250fe(0xdb)](_0xc4d1a4);if(_0x240139){if(_0xc4d1a4[_0x4250fe(0x1c4)](_0x4250fe(0x229))){const _0x259e29=await this[_0x4250fe(0x259)](_0xc4d1a4+_0x4250fe(0xb5));if(_0x259e29&&_0x259e29[_0x4250fe(0xd4)]){_0x18585c=_0x259e29['val'];break;}}}}catch(_0x107d18){}}}return _0x18585c?_0x4250fe(0x1a1)+_0x18585c:_0x4250fe(0x174);}catch(_0x3c63b7){return _0x4250fe(0x1bb)+_0x3c63b7[_0x4250fe(0x235)];}}async['getCalendarContext'](){const _0x2157b2=a0_0x3645aa;try{if(!this['config'][_0x2157b2(0x114)])return'Kalender:\x20Deaktiviert';let _0x12621b='',_0x2559a8=this[_0x2157b2(0x1e1)][_0x2157b2(0x211)]||'ical.0';this[_0x2157b2(0x20a)][_0x2157b2(0x20c)](_0x2157b2(0x188)+_0x2559a8);try{const _0x5a98d5=await this[_0x2157b2(0x259)](_0x2559a8+_0x2157b2(0x93));if(_0x5a98d5&&_0x5a98d5[_0x2157b2(0xd4)])_0x12621b=_0x5a98d5[_0x2157b2(0xd4)];else{const _0x21feca=await this[_0x2157b2(0x259)](_0x2559a8+_0x2157b2(0xd8));_0x21feca&&_0x21feca[_0x2157b2(0xd4)]&&Array['isArray'](_0x21feca['val'])&&_0x21feca['val'][_0x2157b2(0xe1)]>0x0&&(_0x12621b=_0x21feca[_0x2157b2(0xd4)][_0x2157b2(0xa1)](0x0,0x3)[_0x2157b2(0xa3)](_0x47ca93=>_0x47ca93[_0x2157b2(0xc9)]+'\x20'+_0x47ca93[_0x2157b2(0x12e)])[_0x2157b2(0x1a0)](',\x20'));}}catch(_0x3e3b36){this['log'][_0x2157b2(0x209)](_0x2157b2(0x17b)+_0x3e3b36['message']);}return _0x12621b?_0x2157b2(0xd3)+_0x12621b:_0x2157b2(0x102);}catch(_0x12b128){return'KALENDER\x20ERROR:\x20'+_0x12b128[_0x2157b2(0x235)];}}async[a0_0x3645aa(0x1de)](){const _0x1c5b9c=a0_0x3645aa;try{const _0x2299bb=await this[_0x1c5b9c(0x117)](_0x1c5b9c(0x11e));_0x2299bb&&_0x2299bb[_0x1c5b9c(0xd4)]&&(this['eventHistory']=JSON['parse'](_0x2299bb['val'][_0x1c5b9c(0x98)]()));}catch(_0x5eb6e6){this[_0x1c5b9c(0x1b3)]=[];}try{const _0x201e9d=await this[_0x1c5b9c(0x117)](_0x1c5b9c(0x231));if(_0x201e9d&&_0x201e9d['val'])this[_0x1c5b9c(0x19d)]=JSON[_0x1c5b9c(0x15b)](_0x201e9d[_0x1c5b9c(0xd4)][_0x1c5b9c(0x98)]());}catch(_0x1822d8){this[_0x1c5b9c(0x19d)]=[];}}async[a0_0x3645aa(0x1fb)](){const _0x515202=a0_0x3645aa;try{const _0x428668=await this[_0x515202(0xdb)](_0x515202(0x1c7));if(_0x428668&&_0x428668[_0x515202(0x1a9)]&&_0x428668[_0x515202(0x1a9)][_0x515202(0x212)])return _0x428668[_0x515202(0x1a9)][_0x515202(0x212)];return _0x515202(0x120);}catch(_0x32f9f1){return _0x515202(0xa9);}}async[a0_0x3645aa(0x183)](_0x565672){const _0x3d460e=a0_0x3645aa;if(!_0x565672)return![];this[_0x3d460e(0x134)]=await this[_0x3d460e(0x1fb)]();if(_0x565672==='TEST-PRO-KEY'||_0x565672[_0x3d460e(0x125)](_0x3d460e(0xf8)))return!![];return![];}async[a0_0x3645aa(0x214)](){const _0x2ac598=a0_0x3645aa;await this[_0x2ac598(0x1dc)](_0x2ac598(0x1d1),{'type':_0x2ac598(0x1e5),'common':{'name':_0x2ac598(0x1d1)},'native':{}}),await this['extendObjectAsync'](LTM_DP_RAW_LOG,{'type':'state','common':{'name':'Raw\x20Log','type':_0x2ac598(0x115),'role':'json','read':!![],'write':![]},'native':{}}),await this[_0x2ac598(0x1dc)](LTM_DP_DAILY_DIGESTS,{'type':'state','common':{'name':_0x2ac598(0x273),'type':_0x2ac598(0x115),'role':'json','read':!![],'write':![]},'native':{}}),await this[_0x2ac598(0x1dc)](LTM_DP_STATUS,{'type':_0x2ac598(0x22a),'common':{'name':_0x2ac598(0xf5),'type':_0x2ac598(0x115),'role':'text','read':!![],'write':![]},'native':{}}),await this['extendObjectAsync'](LTM_DP_TRIGGER_DIGEST,{'type':_0x2ac598(0x22a),'common':{'name':'Trigger\x20Digest','type':_0x2ac598(0x1df),'role':_0x2ac598(0x18b),'read':!![],'write':!![],'def':![]},'native':{}}),await this[_0x2ac598(0x1dc)](LTM_DP_BASELINE_STATUS,{'type':'state','common':{'name':_0x2ac598(0xec),'type':_0x2ac598(0x115),'role':_0x2ac598(0x15d),'read':!![],'write':![]},'native':{}});}async[a0_0x3645aa(0x16f)](){const _0x54b4f0=a0_0x3645aa;await this[_0x54b4f0(0x1dc)](LTM_DP_DRIFT_CHANNEL,{'type':_0x54b4f0(0x1e5),'common':{'name':_0x54b4f0(0x25a)},'native':{}}),await this[_0x54b4f0(0x1dc)](LTM_DP_DRIFT_STATUS,{'type':_0x54b4f0(0x22a),'common':{'name':_0x54b4f0(0x15c),'type':_0x54b4f0(0x115),'role':_0x54b4f0(0x22a),'read':!![],'write':![],'def':_0x54b4f0(0x218)},'native':{}}),await this[_0x54b4f0(0x1dc)](LTM_DP_DRIFT_DETAILS,{'type':_0x54b4f0(0x22a),'common':{'name':_0x54b4f0(0xab),'type':'string','role':_0x54b4f0(0x15d),'read':!![],'write':![]},'native':{}}),await this[_0x54b4f0(0x1dc)](LTM_DP_DRIFT_LAST_CHECK,{'type':_0x54b4f0(0x22a),'common':{'name':'Last\x20Check','type':_0x54b4f0(0xef),'role':'date','read':!![],'write':![]},'native':{}});}async[a0_0x3645aa(0x158)](){const _0xc99f04=a0_0x3645aa;await this['extendObjectAsync'](_0xc99f04(0x107),{'type':'channel','common':{'name':_0xc99f04(0x27f)},'native':{}}),await this[_0xc99f04(0x1dc)](SYSTEM_DP_MODE,{'type':_0xc99f04(0x22a),'common':{'name':_0xc99f04(0x1fc),'type':_0xc99f04(0x115),'role':_0xc99f04(0x22a),'read':!![],'write':!![],'def':SYSTEM_MODES[_0xc99f04(0x268)],'states':{[SYSTEM_MODES[_0xc99f04(0x268)]]:'Normal',[SYSTEM_MODES[_0xc99f04(0x28c)]]:_0xc99f04(0x10c),[SYSTEM_MODES['PARTY']]:_0xc99f04(0x275),[SYSTEM_MODES[_0xc99f04(0x18e)]]:_0xc99f04(0x1ed)}},'native':{}});}async['createAllObjects'](){const _0x33420d=a0_0x3645aa;try{await this[_0x33420d(0x158)](),await this['setObjectNotExistsAsync'](_0x33420d(0x184),{'type':'state','common':{'name':'Presence\x20Status','type':'boolean','role':'indicator','read':!![],'write':![],'def':!![]},'native':{}}),await this[_0x33420d(0x13f)]('events.lastEvent',{'type':'state','common':{'name':_0x33420d(0x1ff),'type':_0x33420d(0x115),'role':_0x33420d(0x17d),'read':!![],'write':![]},'native':{}}),await this[_0x33420d(0x13f)]('events.history',{'type':'state','common':{'name':_0x33420d(0x27b),'type':'string','role':'json','read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x33420d(0x1b8),{'type':_0x33420d(0x22a),'common':{'name':'Trigger\x20Analysis','type':'boolean','role':_0x33420d(0x18b),'read':!![],'write':!![],'def':![]},'native':{}}),await this[_0x33420d(0x13f)](_0x33420d(0xde),{'type':_0x33420d(0x22a),'common':{'name':_0x33420d(0x27a),'type':_0x33420d(0x1df),'role':_0x33420d(0x18b),'read':!![],'write':!![],'def':![]},'native':{}}),await this[_0x33420d(0x13f)](_0x33420d(0xd9),{'type':_0x33420d(0x22a),'common':{'name':_0x33420d(0xc2),'type':_0x33420d(0x115),'role':_0x33420d(0x17d),'read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x33420d(0x92),{'type':'state','common':{'name':_0x33420d(0x281),'type':'boolean','role':_0x33420d(0x181),'read':!![],'write':![],'def':![]},'native':{}}),await this[_0x33420d(0x13f)](_0x33420d(0x26f),{'type':_0x33420d(0x22a),'common':{'name':_0x33420d(0x12c),'type':_0x33420d(0x1df),'role':'indicator.alarm.fire','read':!![],'write':![],'def':![]},'native':{}}),await this[_0x33420d(0x13f)](_0x33420d(0x1f4),{'type':_0x33420d(0x22a),'common':{'name':_0x33420d(0x191),'type':'string','role':_0x33420d(0xa7),'read':!![],'write':![]},'native':{}}),await this[_0x33420d(0x13f)](_0x33420d(0x1aa),{'type':_0x33420d(0x22a),'common':{'name':'Activity\x20Summary','type':'string','role':_0x33420d(0x15d),'read':!![],'write':![]},'native':{}}),await this[_0x33420d(0x13f)]('analysis.deviationFromBaseline',{'type':_0x33420d(0x22a),'common':{'name':_0x33420d(0x261),'type':_0x33420d(0x115),'role':'state','read':!![],'write':![],'def':_0x33420d(0x218)},'native':{}}),await this[_0x33420d(0x13f)](_0x33420d(0x1e2),{'type':_0x33420d(0x22a),'common':{'name':'Comfort\x20Summary','type':_0x33420d(0x115),'role':_0x33420d(0x15d),'read':!![],'write':![]},'native':{}}),await this[_0x33420d(0x13f)](_0x33420d(0x1a7),{'type':'state','common':{'name':'Comfort\x20Suggestion','type':_0x33420d(0x115),'role':_0x33420d(0x15d),'read':!![],'write':![]},'native':{}}),await this[_0x33420d(0x1dc)](_0x33420d(0x1ea),{'type':'channel','common':{'name':_0x33420d(0x1b5)},'native':{}}),await this[_0x33420d(0x13f)](_0x33420d(0xf9),{'type':_0x33420d(0x22a),'common':{'name':_0x33420d(0x243),'type':_0x33420d(0x1df),'role':_0x33420d(0x14d),'read':!![],'write':![],'def':![]},'native':{}}),await this[_0x33420d(0x13f)]('analysis.automation.description',{'type':_0x33420d(0x22a),'common':{'name':_0x33420d(0x227),'type':_0x33420d(0x115),'role':_0x33420d(0x15d),'read':!![],'write':![]},'native':{}}),await this[_0x33420d(0x13f)](_0x33420d(0x1b6),{'type':'state','common':{'name':_0x33420d(0x13d),'type':_0x33420d(0x115),'role':'text','read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x33420d(0x231),{'type':_0x33420d(0x22a),'common':{'name':'Logbook','type':_0x33420d(0x115),'role':'json','read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x33420d(0x13f)](_0x33420d(0x267),{'type':_0x33420d(0x22a),'common':{'name':'Feedback\x20Log','type':'string','role':_0x33420d(0x17d),'read':!![],'write':![],'def':'[]'},'native':{}}),await this['extendObjectAsync']('analysis.health',{'type':'channel','common':{'name':_0x33420d(0x21c)},'native':{}}),await this[_0x33420d(0x13f)](_0x33420d(0x1f9),{'type':_0x33420d(0x22a),'common':{'name':_0x33420d(0x95),'type':'number','role':'value.health','read':!![],'write':![],'def':0x0},'native':{}}),await this[_0x33420d(0x13f)](_0x33420d(0x266),{'type':_0x33420d(0x22a),'common':{'name':_0x33420d(0x207),'type':_0x33420d(0x115),'role':_0x33420d(0x15d),'read':!![],'write':![],'def':_0x33420d(0xe5)},'native':{}}),await this[_0x33420d(0x13f)](_0x33420d(0x1f2),{'type':_0x33420d(0x22a),'common':{'name':_0x33420d(0x223),'type':_0x33420d(0x115),'role':'text','read':!![],'write':![],'def':''},'native':{}}),await this[_0x33420d(0x214)](),await this['checkLtmDriftObjects']();}catch(_0x2e5446){this[_0x33420d(0x20a)][_0x33420d(0x1d8)](_0x33420d(0x110)+_0x2e5446['message']);}}async[a0_0x3645aa(0x26a)](){const _0x449bcb=a0_0x3645aa;this['log'][_0x449bcb(0x189)]('cogni-living\x20adapter\x20starting\x20(v'+this[_0x449bcb(0x165)]+')');try{const _0x239a83=[_0x449bcb(0x146),_0x449bcb(0x176),'analysis.history_debug_02',_0x449bcb(0x11a),_0x449bcb(0x1ef),_0x449bcb(0x1c5),'events.history_debug_01',_0x449bcb(0xd1),_0x449bcb(0x15f),'events.history_debug_04'];for(const _0x4eb601 of _0x239a83){try{const _0x5d61eb=await this['getObjectAsync'](_0x4eb601);_0x5d61eb&&await this[_0x449bcb(0x272)](_0x4eb601);}catch(_0xa80c5a){}}}catch(_0x20b5a1){}this['config'][_0x449bcb(0x20d)]=this[_0x449bcb(0x1e1)][_0x449bcb(0x20d)]||'';try{this[_0x449bcb(0x96)]=await this[_0x449bcb(0x183)](this['config'][_0x449bcb(0x20d)]);}catch(_0x76b570){this[_0x449bcb(0x20a)][_0x449bcb(0x1d8)](_0x449bcb(0x20f)+_0x76b570[_0x449bcb(0x235)]);}if(!this[_0x449bcb(0x1e1)][_0x449bcb(0x1fa)]||this[_0x449bcb(0x1e1)][_0x449bcb(0x1fa)]<0.1)this[_0x449bcb(0x1e1)][_0x449bcb(0x1fa)]=0xc;try{await this['initHistory']();}catch(_0x4e7d94){this['log'][_0x449bcb(0x1d8)](_0x449bcb(0x187)+_0x4e7d94[_0x449bcb(0x235)]);}try{const _0x2d6932=await this[_0x449bcb(0xdb)](_0x449bcb(0x21e));_0x2d6932&&_0x2d6932[_0x449bcb(0x1e4)]&&(this['systemConfig']={'latitude':_0x2d6932[_0x449bcb(0x1e4)][_0x449bcb(0x168)]||0x0,'longitude':_0x2d6932[_0x449bcb(0x1e4)][_0x449bcb(0x1c1)]||0x0,'city':_0x2d6932['common'][_0x449bcb(0x1e7)]||''});}catch(_0x4afb5e){}if(this[_0x449bcb(0x1e1)][_0x449bcb(0x12b)])try{this[_0x449bcb(0x1f1)]=new GoogleGenerativeAI(this['config'][_0x449bcb(0x12b)]),this[_0x449bcb(0x144)]=this[_0x449bcb(0x1f1)][_0x449bcb(0xe2)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x449bcb(0x286)}}),this[_0x449bcb(0x20a)]['info'](_0x449bcb(0x90));}catch(_0x21d876){this['log']['error']('Gemini\x20Init\x20Error:\x20'+_0x21d876['message']);}try{await this[_0x449bcb(0x130)]();}catch(_0x2a7b4b){this['log'][_0x449bcb(0x1d8)](_0x449bcb(0xaa)+_0x2a7b4b['message']);}try{await this[_0x449bcb(0x140)]();}catch(_0x3bc17a){this['log'][_0x449bcb(0x1d8)](_0x449bcb(0x9c)+_0x3bc17a[_0x449bcb(0x235)]);}try{await this[_0x449bcb(0xf7)]();}catch(_0x54e1a8){this[_0x449bcb(0x20a)][_0x449bcb(0x1d8)](_0x449bcb(0xe9)+_0x54e1a8[_0x449bcb(0x235)]);}try{await this['loadDailyDigests']();}catch(_0x4bb622){this[_0x449bcb(0x20a)][_0x449bcb(0x1d8)](_0x449bcb(0x9e)+_0x4bb622[_0x449bcb(0x235)]);}this[_0x449bcb(0x24f)](_0x449bcb(0x1b8)),this[_0x449bcb(0x24f)](LTM_DP_TRIGGER_DIGEST),this[_0x449bcb(0x24f)](_0x449bcb(0x1c6)),this[_0x449bcb(0x24f)](_0x449bcb(0xde));const _0x13ae4e=this['config']['devices'];if(_0x13ae4e&&_0x13ae4e[_0x449bcb(0xe1)]>0x0){this[_0x449bcb(0x20a)][_0x449bcb(0x189)]('Subscribing\x20to\x20'+_0x13ae4e[_0x449bcb(0xe1)]+'\x20sensors...');for(const _0x4278ef of _0x13ae4e){if(_0x4278ef['id']){await this[_0x449bcb(0x1cd)](_0x4278ef['id']);try{const _0x5af915=await this[_0x449bcb(0x259)](_0x4278ef['id']);if(_0x5af915)this['sensorLastValues'][_0x4278ef['id']]=_0x5af915[_0x449bcb(0xd4)];}catch(_0x16bc35){}}}}const _0x20fa79=this['config'][_0x449bcb(0x155)]||[];if(_0x20fa79[_0x449bcb(0xe1)]>0x0){this[_0x449bcb(0x20a)][_0x449bcb(0x189)]('Subscribing\x20to\x20'+_0x20fa79[_0x449bcb(0xe1)]+_0x449bcb(0x1b0));for(const _0x517583 of _0x20fa79){await this['subscribeForeignStatesAsync'](_0x517583);}try{await this['checkWifiPresence']();}catch(_0x475700){}}if(this[_0x449bcb(0xf2)])clearInterval(this[_0x449bcb(0xf2)]);const _0x29998a=this['config'][_0x449bcb(0x21b)]||0xf;_0x29998a>0x0&&(this['log'][_0x449bcb(0x189)](_0x449bcb(0x19b)+_0x29998a+_0x449bcb(0x1eb)+this[_0x449bcb(0x1e1)][_0x449bcb(0x1fa)]+'h.'),this['analysisTimer']=setInterval(()=>{const _0xdf2fe3=_0x449bcb;try{this[_0xdf2fe3(0xf3)]();}catch(_0x58ac64){this[_0xdf2fe3(0x20a)][_0xdf2fe3(0x1d8)](_0xdf2fe3(0x16a)+_0x58ac64['message']);}},_0x29998a*0x3c*0x3e8)),this[_0x449bcb(0x260)](),this[_0x449bcb(0x274)](),this[_0x449bcb(0x249)](),this[_0x449bcb(0x19c)]();}async[a0_0x3645aa(0x140)](){const _0x1b3d89=a0_0x3645aa;try{const _0x13a79d=await this[_0x1b3d89(0x117)](SYSTEM_DP_MODE);_0x13a79d&&_0x13a79d[_0x1b3d89(0xd4)]&&Object[_0x1b3d89(0x129)](SYSTEM_MODES)[_0x1b3d89(0x1c4)](_0x13a79d[_0x1b3d89(0xd4)])?this['currentSystemMode']=_0x13a79d[_0x1b3d89(0xd4)]:(this[_0x1b3d89(0xae)]=SYSTEM_MODES[_0x1b3d89(0x268)],await this[_0x1b3d89(0xbd)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES['NORMAL'],'ack':!![]}));}catch(_0x3f9ebb){this[_0x1b3d89(0xae)]=SYSTEM_MODES['NORMAL'];}}async[a0_0x3645aa(0xf7)](){const _0x2c910c=a0_0x3645aa;try{const _0x47b683=await this['getStateAsync'](LTM_DP_RAW_LOG);if(_0x47b683&&_0x47b683['val'])this['rawEventLog']=JSON[_0x2c910c(0x15b)](_0x47b683[_0x2c910c(0xd4)]);}catch(_0x49af58){this[_0x2c910c(0x180)]=[];}}async[a0_0x3645aa(0x116)](){const _0x2ec0ed=a0_0x3645aa;try{const _0x76307b=await this[_0x2ec0ed(0x117)](LTM_DP_DAILY_DIGESTS);if(_0x76307b&&_0x76307b['val'])this[_0x2ec0ed(0x160)]=JSON[_0x2ec0ed(0x15b)](_0x76307b[_0x2ec0ed(0xd4)]);}catch(_0x56878c){this[_0x2ec0ed(0x160)]=[];}await this[_0x2ec0ed(0x122)]();}async[a0_0x3645aa(0x122)](){const _0x16f809=a0_0x3645aa;if(!this[_0x16f809(0x96)]){await this['setStateAsync'](LTM_DP_BASELINE_STATUS,{'val':_0x16f809(0x210),'ack':!![]});return;}const _0x49e46d=this[_0x16f809(0x160)]['length']>=(this['config'][_0x16f809(0x1cf)]||0x7)?_0x16f809(0x23c)+this[_0x16f809(0x160)]['length']+_0x16f809(0xa0):_0x16f809(0x15a)+this[_0x16f809(0x160)][_0x16f809(0xe1)]+'/'+(this[_0x16f809(0x1e1)][_0x16f809(0x1cf)]||0x7)+')';await this[_0x16f809(0xbd)](LTM_DP_BASELINE_STATUS,{'val':_0x49e46d,'ack':!![]});}async[a0_0x3645aa(0x236)](){const _0x2f70b2=a0_0x3645aa;try{const _0x344621=this[_0x2f70b2(0x1e1)][_0x2f70b2(0x155)]||[];let _0x31b3c3=![];for(const _0x598663 of _0x344621){try{const _0x2a98a9=await this['getForeignStateAsync'](_0x598663);if(_0x2a98a9&&(_0x2a98a9[_0x2f70b2(0xd4)]===!![]||_0x2a98a9[_0x2f70b2(0xd4)]===_0x2f70b2(0xc4)||_0x2a98a9['val']===0x1)){_0x31b3c3=!![];break;}}catch(_0x2fb6c1){}}return _0x31b3c3&&(this[_0x2f70b2(0x204)]&&(this[_0x2f70b2(0x20a)]['info']('WiFi\x20Presence\x20detected\x20->\x20Aborting\x20Exit\x20Timer.\x20User\x20is\x20present.'),this[_0x2f70b2(0x10b)]()),!this[_0x2f70b2(0xc7)]&&this[_0x2f70b2(0xae)]===SYSTEM_MODES['NORMAL']&&this[_0x2f70b2(0x25e)](!![])),_0x31b3c3;}catch(_0x1fc541){return this[_0x2f70b2(0x20a)][_0x2f70b2(0x1d8)](_0x2f70b2(0x215)+_0x1fc541[_0x2f70b2(0x235)]),![];}}[a0_0x3645aa(0x260)](){const _0x3c4ec9=a0_0x3645aa;try{if(this['ltmJob'])this['ltmJob']['cancel']();if(!this[_0x3c4ec9(0x96)]){this[_0x3c4ec9(0xbd)](LTM_DP_STATUS,{'val':_0x3c4ec9(0x210),'ack':!![]});return;}this[_0x3c4ec9(0x246)]=schedule[_0x3c4ec9(0x1d6)](LTM_SCHEDULE,()=>this[_0x3c4ec9(0x20b)]());}catch(_0x8761d7){this['log'][_0x3c4ec9(0x1d8)](_0x3c4ec9(0x1d0)+_0x8761d7[_0x3c4ec9(0x235)]);}}['setupModeResetScheduler'](){const _0x45ad2c=a0_0x3645aa;try{if(this[_0x45ad2c(0x21f)])this['modeResetJob'][_0x45ad2c(0xad)]();this[_0x45ad2c(0x21f)]=schedule['scheduleJob'](MODE_RESET_SCHEDULE,async()=>{const _0x551281=_0x45ad2c;await this[_0x551281(0x140)](),AUTO_RESET_MODES[_0x551281(0x1c4)](this[_0x551281(0xae)])&&await this[_0x551281(0xbd)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES['NORMAL'],'ack':![]});});}catch(_0x3c2850){this[_0x45ad2c(0x20a)][_0x45ad2c(0x1d8)](_0x45ad2c(0x244)+_0x3c2850[_0x45ad2c(0x235)]);}}['setupDriftAnalysisScheduler'](){const _0xc4967c=a0_0x3645aa;try{if(this[_0xc4967c(0x1d5)])clearInterval(this[_0xc4967c(0x1d5)]);if(!this[_0xc4967c(0x96)])return;this[_0xc4967c(0x1d5)]=setInterval(()=>this[_0xc4967c(0xcf)](),(this[_0xc4967c(0x1e1)][_0xc4967c(0x194)]||0x18)*0x36ee80),setTimeout(()=>this[_0xc4967c(0xcf)](),0x1388);}catch(_0x2aefbc){this[_0xc4967c(0x20a)]['error'](_0xc4967c(0x264)+_0x2aefbc[_0xc4967c(0x235)]);}}[a0_0x3645aa(0x19c)](){const _0x263dc7=a0_0x3645aa;try{if(this[_0x263dc7(0x190)])this[_0x263dc7(0x190)][_0x263dc7(0xad)]();if(!this['config'][_0x263dc7(0x250)])return;const _0x192601=(this[_0x263dc7(0x1e1)][_0x263dc7(0xc0)]||'08:00')[_0x263dc7(0x1a6)](':'),_0x2473c7=parseInt(_0x192601[0x0])||0x8,_0x2c6a37=parseInt(_0x192601[0x1])||0x0,_0xae8997=_0x2c6a37+'\x20'+_0x2473c7+_0x263dc7(0x1d2);this[_0x263dc7(0x20a)]['info']('Scheduling\x20Morning\x20Briefing\x20for\x20'+_0x2473c7+':'+(_0x2c6a37<0xa?'0'+_0x2c6a37:_0x2c6a37)),this[_0x263dc7(0x190)]=schedule[_0x263dc7(0x1d6)](_0xae8997,()=>{const _0x5d938e=_0x263dc7;this[_0x5d938e(0xf0)]();});}catch(_0x4c8e12){this[_0x263dc7(0x20a)][_0x263dc7(0x1d8)](_0x263dc7(0x119)+_0x4c8e12[_0x263dc7(0x235)]);}}async['runBaselineDriftAnalysis'](){const _0x20355a=a0_0x3645aa;if(!this[_0x20355a(0x96)]||!this[_0x20355a(0x144)])return;const _0x27f226=this[_0x20355a(0x1e1)][_0x20355a(0x17a)]||0xe;if(this[_0x20355a(0x160)]['length']<_0x27f226+(this['config'][_0x20355a(0x1cf)]||0x7)){await this[_0x20355a(0xbd)](LTM_DP_DRIFT_STATUS,{'val':'N/A\x20(Learning)','ack':!![]});return;}const _0xca4c00=this[_0x20355a(0x160)][_0x20355a(0xa1)](-_0x27f226),_0x37311d=this[_0x20355a(0x160)]['slice'](0x0,this[_0x20355a(0x160)][_0x20355a(0xe1)]-_0x27f226),_0x5d6338=_0x20355a(0x228)+JSON[_0x20355a(0x221)](_0x37311d)+_0x20355a(0x24b)+JSON['stringify'](_0xca4c00);try{const _0x17d927=await this[_0x20355a(0x144)][_0x20355a(0x10a)](_0x5d6338),_0x286a09=JSON[_0x20355a(0x15b)](_0x17d927[_0x20355a(0x1b9)][_0x20355a(0x15d)]()['replace'](/```json|```/g,'')[_0x20355a(0x137)]());_0x286a09['baselineDrift']&&(await this[_0x20355a(0xbd)](LTM_DP_DRIFT_STATUS,{'val':_0x286a09[_0x20355a(0xd7)],'ack':!![]}),await this[_0x20355a(0xbd)](LTM_DP_DRIFT_DETAILS,{'val':_0x286a09[_0x20355a(0x26d)],'ack':!![]}),await this[_0x20355a(0xbd)](LTM_DP_DRIFT_LAST_CHECK,{'val':Date[_0x20355a(0x247)](),'ack':!![]}));}catch(_0x21b2aa){}}async['saveRawEventLog'](){const _0x53306b=a0_0x3645aa;this['rawEventLog'][_0x53306b(0xe1)]>RAW_LOG_MAX_SIZE&&this[_0x53306b(0x180)][_0x53306b(0x256)](0x0,this[_0x53306b(0x180)][_0x53306b(0xe1)]-RAW_LOG_MAX_SIZE),await this[_0x53306b(0xbd)](LTM_DP_RAW_LOG,{'val':JSON['stringify'](this[_0x53306b(0x180)]),'ack':!![]});}async[a0_0x3645aa(0x19f)](_0x2f4851=!![]){const _0x1b47b3=a0_0x3645aa,_0x43359d=this[_0x1b47b3(0x1e1)][_0x1b47b3(0x18f)]||0x3c;this[_0x1b47b3(0x160)][_0x1b47b3(0xe1)]>_0x43359d&&this[_0x1b47b3(0x160)]['splice'](0x0,this[_0x1b47b3(0x160)]['length']-_0x43359d);await this[_0x1b47b3(0xbd)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x1b47b3(0x221)](this[_0x1b47b3(0x160)]),'ack':!![]});if(_0x2f4851)await this['updateBaselineStatus']();}async['updateAnalysisHistory'](_0x5d5f49){const _0x248cdb=a0_0x3645aa;this['analysisHistory'][_0x248cdb(0x147)](_0x5d5f49);if(this[_0x248cdb(0x19d)][_0x248cdb(0xe1)]>ANALYSIS_HISTORY_MAX_SIZE)this[_0x248cdb(0x19d)][_0x248cdb(0x13b)]();await this[_0x248cdb(0xbd)](_0x248cdb(0x231),{'val':JSON[_0x248cdb(0x221)](this[_0x248cdb(0x19d)]),'ack':!![]});}async[a0_0x3645aa(0x195)](){const _0x51eb08=a0_0x3645aa;await this[_0x51eb08(0xbd)](_0x51eb08(0x1aa),{'val':'No\x20recent\x20activity.','ack':!![]}),await this[_0x51eb08(0xbd)](_0x51eb08(0x14b),{'val':this[_0x51eb08(0x96)]?'N/A\x20(No\x20Activity)':_0x51eb08(0xf1),'ack':!![]}),await this['setStateAsync']('analysis.isAlert',{'val':![],'ack':!![]}),await this[_0x51eb08(0xbd)](_0x51eb08(0x26f),{'val':![],'ack':!![]}),this[_0x51eb08(0x13a)]=![];}async['onMessage'](_0x2674c2){const _0x1cffdf=a0_0x3645aa;if(typeof _0x2674c2===_0x1cffdf(0x14e)&&_0x2674c2[_0x1cffdf(0x235)])try{if(_0x2674c2[_0x1cffdf(0xf6)]===_0x1cffdf(0xf4)){if(!_0x2674c2[_0x1cffdf(0x235)]['apiKey'])return this[_0x1cffdf(0x288)](_0x2674c2[_0x1cffdf(0x278)],_0x2674c2[_0x1cffdf(0xf6)],{'success':![],'message':_0x1cffdf(0x13e)},_0x2674c2[_0x1cffdf(0x253)]);try{const _0x218332=new GoogleGenerativeAI(_0x2674c2['message'][_0x1cffdf(0x149)])[_0x1cffdf(0xe2)]({'model':_0x1cffdf(0x28a)});await _0x218332[_0x1cffdf(0x10a)](_0x1cffdf(0x11d)),this[_0x1cffdf(0x288)](_0x2674c2[_0x1cffdf(0x278)],_0x2674c2['command'],{'success':!![],'message':'Success'},_0x2674c2[_0x1cffdf(0x253)]);}catch(_0x417bc9){this[_0x1cffdf(0x288)](_0x2674c2['from'],_0x2674c2['command'],{'success':![],'message':_0x417bc9[_0x1cffdf(0x235)]},_0x2674c2['callback']);}}else{if(_0x2674c2[_0x1cffdf(0xf6)]===_0x1cffdf(0x1ba)){const _0x4011b0=await this[_0x1cffdf(0x230)](_0x1cffdf(0x133),!![]);this['sendTo'](_0x2674c2[_0x1cffdf(0x278)],_0x2674c2[_0x1cffdf(0xf6)],{'success':_0x4011b0>0x0,'message':_0x4011b0+_0x1cffdf(0xb8)},_0x2674c2[_0x1cffdf(0x253)]);}else{if(_0x2674c2[_0x1cffdf(0xf6)]===_0x1cffdf(0x152)){if(!this[_0x1cffdf(0x96)])return this[_0x1cffdf(0x288)](_0x2674c2[_0x1cffdf(0x278)],_0x2674c2[_0x1cffdf(0xf6)],{'success':![],'isPro':![]},_0x2674c2[_0x1cffdf(0x253)]);let _0x4672db={'status':_0x1cffdf(0x218),'details':'','lastCheck':0x0};try{_0x4672db[_0x1cffdf(0x139)]=(await this['getStateAsync'](LTM_DP_DRIFT_STATUS))[_0x1cffdf(0xd4)],_0x4672db['details']=(await this[_0x1cffdf(0x117)](LTM_DP_DRIFT_DETAILS))['val'],_0x4672db['lastCheck']=(await this[_0x1cffdf(0x117)](LTM_DP_DRIFT_LAST_CHECK))['val'];}catch(_0x153fc6){}this[_0x1cffdf(0x288)](_0x2674c2['from'],_0x2674c2[_0x1cffdf(0xf6)],{'success':!![],'isPro':!![],'dailyDigests':this['dailyDigests'],'driftAnalysis':_0x4672db,'analysisHistory':this['analysisHistory']},_0x2674c2[_0x1cffdf(0x253)]);}else{if(_0x2674c2[_0x1cffdf(0xf6)]===_0x1cffdf(0x23d)){const _0x35cb48=await this[_0x1cffdf(0x24a)](_0x1cffdf(0x163),_0x1cffdf(0x123)),_0x55c4bd=[];if(_0x35cb48)for(const _0x5d13e2 in _0x35cb48){const _0x342b98=_0x35cb48[_0x5d13e2],_0x4c0829=(_0x342b98[_0x1cffdf(0x1e4)]&&typeof _0x342b98[_0x1cffdf(0x1e4)][_0x1cffdf(0x26b)]===_0x1cffdf(0x14e)?_0x342b98[_0x1cffdf(0x1e4)][_0x1cffdf(0x26b)]['de']:_0x342b98['common'][_0x1cffdf(0x26b)])||_0x342b98[_0x1cffdf(0x1e4)][_0x1cffdf(0x26b)];_0x55c4bd[_0x1cffdf(0x248)]({'id':_0x5d13e2,'name':_0x4c0829});}this[_0x1cffdf(0x288)](_0x2674c2[_0x1cffdf(0x278)],_0x2674c2['command'],{'success':!![],'enums':_0x55c4bd},_0x2674c2[_0x1cffdf(0x253)]);}else{if(_0x2674c2['command']===_0x1cffdf(0x1be))try{const _0x513123=await this[_0x1cffdf(0xfa)](_0x2674c2[_0x1cffdf(0x235)]||{});this[_0x1cffdf(0x288)](_0x2674c2[_0x1cffdf(0x278)],_0x2674c2[_0x1cffdf(0xf6)],{'success':!![],'devices':_0x513123},_0x2674c2[_0x1cffdf(0x253)]);}catch(_0xf94078){this[_0x1cffdf(0x288)](_0x2674c2[_0x1cffdf(0x278)],_0x2674c2[_0x1cffdf(0xf6)],{'success':![],'error':_0xf94078['message']},_0x2674c2[_0x1cffdf(0x253)]);}else{if(_0x2674c2['command']===_0x1cffdf(0x1cb)){const {historyId:_0x2cec42,rating:_0x366cd7,comment:_0x478b41,alertReason:_0x59b91e}=_0x2674c2[_0x1cffdf(0x235)];_0x2cec42&&_0x366cd7?(await this[_0x1cffdf(0x225)]({'timestamp':Date['now'](),'historyId':_0x2cec42,'rating':_0x366cd7,'comment':_0x478b41,'alertReason':_0x59b91e}),this['sendTo'](_0x2674c2[_0x1cffdf(0x278)],_0x2674c2[_0x1cffdf(0xf6)],{'success':!![]},_0x2674c2[_0x1cffdf(0x253)])):this[_0x1cffdf(0x288)](_0x2674c2[_0x1cffdf(0x278)],_0x2674c2['command'],{'success':![],'error':_0x1cffdf(0x1c3)},_0x2674c2[_0x1cffdf(0x253)]);}else{if(_0x2674c2[_0x1cffdf(0xf6)]==='testContext'){this['log'][_0x1cffdf(0x189)]('Context\x20Test\x20requested');const _0x2d4184=await this['getWeatherContext'](),_0x590bfb=await this[_0x1cffdf(0x12d)]();this['sendTo'](_0x2674c2[_0x1cffdf(0x278)],_0x2674c2[_0x1cffdf(0xf6)],{'success':!![],'weather':_0x2d4184,'calendar':_0x590bfb},_0x2674c2['callback']);}}}}}}}}catch(_0x538d70){this['log'][_0x1cffdf(0x1d8)](_0x1cffdf(0x1ec)+_0x2674c2[_0x1cffdf(0xf6)]+':\x20'+_0x538d70[_0x1cffdf(0x235)]);if(_0x2674c2[_0x1cffdf(0x253)])this[_0x1cffdf(0x288)](_0x2674c2[_0x1cffdf(0x278)],_0x2674c2[_0x1cffdf(0xf6)],{'success':![],'error':_0x538d70['message']},_0x2674c2[_0x1cffdf(0x253)]);}}async[a0_0x3645aa(0xfa)](_0x54878e={}){const _0x356f5e=a0_0x3645aa;this[_0x356f5e(0x20a)][_0x356f5e(0x189)]('Starting\x20Smart\x20Scan\x20with\x20filters:\x20'+JSON[_0x356f5e(0x221)](_0x54878e));const _0x11f1b3=[],_0x959c95=_0x54878e['motion']!==![],_0x4d04de=_0x54878e[_0x356f5e(0x1c2)]!==![],_0x5e94db=_0x54878e[_0x356f5e(0x179)]!==![],_0x84901b=_0x54878e[_0x356f5e(0x254)]===!![],_0x8a457e=_0x54878e[_0x356f5e(0x143)]===!![],_0x519356=_0x54878e['selectedFunctionIds']||[],_0x451c69=await this[_0x356f5e(0x24a)]('enum.rooms.*',_0x356f5e(0x123)),_0x56f27a=await this['getForeignObjectsAsync'](_0x356f5e(0x163),_0x356f5e(0x123)),_0x3e9346={},_0x56c7c8={},_0x3de990={},_0x5a9070=(_0x3a32ad,_0x2fa1af,_0x530853=![])=>{const _0x5892e5=_0x356f5e;if(!_0x3a32ad)return;for(const _0x29e86b in _0x3a32ad){const _0x1c3796=_0x3a32ad[_0x29e86b];if(_0x1c3796&&_0x1c3796['common']&&_0x1c3796[_0x5892e5(0x1e4)][_0x5892e5(0x1bf)]){const _0x4c2f51=(typeof _0x1c3796[_0x5892e5(0x1e4)][_0x5892e5(0x26b)]===_0x5892e5(0x14e)?_0x1c3796[_0x5892e5(0x1e4)][_0x5892e5(0x26b)]['de']:_0x1c3796[_0x5892e5(0x1e4)]['name'])||_0x1c3796[_0x5892e5(0x1e4)][_0x5892e5(0x26b)];if(_0x530853)_0x3de990[_0x29e86b]=_0x4c2f51;for(const _0x10241f of _0x1c3796[_0x5892e5(0x1e4)][_0x5892e5(0x1bf)]){if(_0x530853){if(!_0x2fa1af[_0x10241f])_0x2fa1af[_0x10241f]=[];_0x2fa1af[_0x10241f][_0x5892e5(0x248)](_0x29e86b);}else _0x2fa1af[_0x10241f]=_0x4c2f51;}}}};_0x5a9070(_0x451c69,_0x3e9346),_0x5a9070(_0x56f27a,_0x56c7c8,!![]);const _0x4a7af8=await this[_0x356f5e(0x24a)]('*',_0x356f5e(0x22a)),_0x4da99a=[_0x356f5e(0x1ad),_0x356f5e(0x1ae),'RSSI','ERROR',_0x356f5e(0xb7),_0x356f5e(0x26c),_0x356f5e(0x162),'CONFIG_PENDING',_0x356f5e(0xee),_0x356f5e(0x1a5),_0x356f5e(0x97),'STICKY_UNREACH',_0x356f5e(0x1a8),_0x356f5e(0x111),'INSTALL_TEST',_0x356f5e(0x1c0),'WEEK_PROGRAM',_0x356f5e(0x109),_0x356f5e(0x105),'ERROR_CODE',_0x356f5e(0x9d),_0x356f5e(0xb0),'CONNECTION',_0x356f5e(0x1d9),_0x356f5e(0x238),_0x356f5e(0x94),_0x356f5e(0xa8),_0x356f5e(0x186),_0x356f5e(0x165),_0x356f5e(0xc3),_0x356f5e(0x189),'signal','last_seen',_0x356f5e(0x131),_0x356f5e(0x240),_0x356f5e(0x206),'mode',_0x356f5e(0x23b),_0x356f5e(0x175),'xy','ct',_0x356f5e(0x216),_0x356f5e(0x1d7),_0x356f5e(0xff),_0x356f5e(0xd0),'modelid',_0x356f5e(0x99),_0x356f5e(0xf6),_0x356f5e(0x27d),_0x356f5e(0x27e),_0x356f5e(0x1b2),_0x356f5e(0x213),'scriptEnabled',_0x356f5e(0x16c),_0x356f5e(0x91),'detectionState','summary','icon','history','forecast',_0x356f5e(0x189),_0x356f5e(0x17d)];if(!_0x8a457e)_0x4da99a['push']('wetter',_0x356f5e(0x143),'wind','pressure','uv',_0x356f5e(0x245),_0x356f5e(0xcc));const _0x70f46e=[_0x356f5e(0x271),_0x356f5e(0x127),_0x356f5e(0x1ac),'vis.',_0x356f5e(0x126),_0x356f5e(0x118),_0x356f5e(0x270),'flot.'];if(!_0x8a457e)_0x70f46e['push'](_0x356f5e(0x136),'weatherunderground.',_0x356f5e(0xd5),_0x356f5e(0x1e0),_0x356f5e(0xeb));const _0x5edcbc=(_0x347d18,_0x1b7255,_0x305c12=![])=>{const _0x46e7e2=_0x356f5e,_0x1b6042=_0x347d18['split']('.');if(_0x1b7255[_0x347d18])return _0x1b7255[_0x347d18];if(_0x1b6042[_0x46e7e2(0xe1)]>0x2&&_0x1b7255[_0x1b6042[_0x46e7e2(0xa1)](0x0,-0x1)[_0x46e7e2(0x1a0)]('.')])return _0x1b7255[_0x1b6042[_0x46e7e2(0xa1)](0x0,-0x1)[_0x46e7e2(0x1a0)]('.')];if(_0x1b6042[_0x46e7e2(0xe1)]>0x3&&_0x1b7255[_0x1b6042[_0x46e7e2(0xa1)](0x0,-0x2)[_0x46e7e2(0x1a0)]('.')])return _0x1b7255[_0x1b6042[_0x46e7e2(0xa1)](0x0,-0x2)['join']('.')];return _0x305c12?[]:null;};for(const _0x38dea3 in _0x4a7af8){const _0x3b696f=_0x4a7af8[_0x38dea3];if(!_0x3b696f||!_0x3b696f['common'])continue;if(_0x70f46e['some'](_0xe9250=>_0x38dea3[_0x356f5e(0x125)](_0xe9250)))continue;const _0x118aed=_0x3b696f['common'][_0x356f5e(0xa5)]||'',_0x15dd6c=(_0x3b696f[_0x356f5e(0x1e4)][_0x356f5e(0x26b)]&&typeof _0x3b696f[_0x356f5e(0x1e4)]['name']===_0x356f5e(0x14e)?_0x3b696f['common'][_0x356f5e(0x26b)]['de']:_0x3b696f[_0x356f5e(0x1e4)][_0x356f5e(0x26b)])||'',_0x48832d=_0x15dd6c?_0x15dd6c['toLowerCase']():'',_0x170a2a=_0x38dea3[_0x356f5e(0xfc)](),_0x50c3e0=_0x5edcbc(_0x38dea3,_0x3e9346),_0x3ff4d2=_0x5edcbc(_0x38dea3,_0x56c7c8,!![]);let _0x28d30d=null,_0xd312dc=![];if(_0x3ff4d2&&_0x3ff4d2[_0x356f5e(0xe1)]>0x0){const _0x63fc99=_0x3ff4d2[_0x356f5e(0x1b1)](_0x87d71c=>_0x519356[_0x356f5e(0x1c4)](_0x87d71c));if(_0x63fc99){_0xd312dc=!![];const _0x2ae64c=_0x3de990[_0x63fc99];if(_0x170a2a[_0x356f5e(0x1c4)](_0x356f5e(0x24e))||_0x170a2a[_0x356f5e(0x1c4)](_0x356f5e(0x103)))_0x28d30d=_0x356f5e(0x1c9);else{if(_0x170a2a[_0x356f5e(0x1c4)](_0x356f5e(0xaf))||_0x170a2a[_0x356f5e(0x1c4)](_0x356f5e(0x1f6))||_0x48832d[_0x356f5e(0x1c4)](_0x356f5e(0x1dd)))_0x28d30d=_0x356f5e(0x142);else{if(_0x170a2a[_0x356f5e(0x1c4)]('state')||_0x170a2a[_0x356f5e(0x1c4)](_0x356f5e(0x219))||_0x170a2a['includes']('on'))_0x28d30d=_0x356f5e(0xdd);else _0x28d30d=_0x2ae64c;}}}}if(!_0xd312dc&&!_0x8a457e){if(_0x4da99a[_0x356f5e(0x145)](_0x19b902=>_0x48832d['includes'](_0x19b902)||_0x38dea3[_0x356f5e(0x1f0)]()[_0x356f5e(0x1c4)](_0x19b902)))continue;}if(!_0x28d30d&&_0x959c95){if(_0x118aed['includes']('sensor.motion')||_0x118aed[_0x356f5e(0x1c4)](_0x356f5e(0x1da))||_0x48832d[_0x356f5e(0x1c4)](_0x356f5e(0x151))||_0x48832d[_0x356f5e(0x1c4)]('prÃ¤senz'))_0x28d30d=_0x356f5e(0x1c9);}!_0x28d30d&&_0x4d04de&&((_0x170a2a['includes']('shutter_contact')||_0x118aed[_0x356f5e(0x1c4)](_0x356f5e(0x258))||_0x118aed['includes']('sensor.window')||(_0x48832d[_0x356f5e(0x1c4)](_0x356f5e(0x10e))||_0x48832d[_0x356f5e(0x1c4)](_0x356f5e(0x1d4)))&&!_0x48832d[_0x356f5e(0x1c4)](_0x356f5e(0x121))&&!_0x48832d[_0x356f5e(0x1c4)](_0x356f5e(0x1e9))&&(_0x3b696f['common'][_0x356f5e(0x15e)]===_0x356f5e(0x1df)||_0x3b696f['common'][_0x356f5e(0x15e)]==='number'))&&(_0x28d30d=_0x356f5e(0x22e)));if(!_0x28d30d&&_0x5e94db){if((_0x118aed['includes'](_0x356f5e(0x198))||_0x118aed[_0x356f5e(0x1c4)](_0x356f5e(0x27c))||_0x48832d['includes'](_0x356f5e(0x170))||_0x48832d[_0x356f5e(0x1c4)](_0x356f5e(0x112)))&&_0x3b696f[_0x356f5e(0x1e4)][_0x356f5e(0x19e)])_0x28d30d=_0x356f5e(0x196);}if(!_0x28d30d&&_0x84901b){if(_0x118aed['includes']('value.temperature')||_0x118aed[_0x356f5e(0x1c4)]('value.humidity')||_0x48832d[_0x356f5e(0x1c4)](_0x356f5e(0x14c)))_0x28d30d=_0x356f5e(0x113);}if(_0x28d30d){let _0x160f9c=_0x50c3e0||'';if(!_0x160f9c){if(_0x48832d['includes'](_0x356f5e(0x172)))_0x160f9c=_0x356f5e(0x289);else{if(_0x48832d[_0x356f5e(0x1c4)]('kÃ¼che'))_0x160f9c=_0x356f5e(0xed);else{if(_0x48832d[_0x356f5e(0x1c4)](_0x356f5e(0x1fe)))_0x160f9c=_0x356f5e(0x263);else{if(_0x48832d[_0x356f5e(0x1c4)](_0x356f5e(0x159)))_0x160f9c=_0x356f5e(0xac);else{if(_0x48832d['includes'](_0x356f5e(0xd2))||_0x48832d['includes'](_0x356f5e(0x150)))_0x160f9c=_0x356f5e(0xc5);else{if(_0x48832d[_0x356f5e(0x1c4)](_0x356f5e(0x173)))_0x160f9c=_0x356f5e(0x12f);}}}}}}let _0x2fe7fd=![];_0x28d30d===_0x356f5e(0x22e)&&((_0x48832d[_0x356f5e(0x1c4)](_0x356f5e(0x201))||_0x48832d['includes'](_0x356f5e(0x1a4))||_0x48832d[_0x356f5e(0x1c4)](_0x356f5e(0x193))||_0x160f9c&&_0x160f9c[_0x356f5e(0xfc)]()[_0x356f5e(0x1c4)](_0x356f5e(0xd2))&&_0x48832d[_0x356f5e(0x1c4)]('tÃ¼r'))&&(_0x2fe7fd=!![]));let _0x3f6ccc=0x0;if(_0xd312dc)_0x3f6ccc+=0x1e;else{if(_0x50c3e0)_0x3f6ccc+=0x14;else{if(_0x160f9c)_0x3f6ccc+=0xa;}}if(_0x2fe7fd)_0x3f6ccc+=0x5;_0x11f1b3['push']({'id':_0x38dea3,'name':_0x15dd6c||_0x38dea3,'type':_0x28d30d,'location':_0x160f9c,'logDuplicates':_0x28d30d===_0x356f5e(0x1c9),'isExit':_0x2fe7fd,'_score':_0x3f6ccc});}}return _0x11f1b3[_0x356f5e(0x21a)]((_0x2bdf28,_0x12c496)=>_0x12c496[_0x356f5e(0x100)]-_0x2bdf28[_0x356f5e(0x100)]),_0x11f1b3;}async[a0_0x3645aa(0x16d)](_0x1e402c,_0x55664a){const _0x14dde4=a0_0x3645aa;if(!_0x55664a)return;if(_0x1e402c===this[_0x14dde4(0x18d)]+'.'+SYSTEM_DP_MODE){_0x55664a[_0x14dde4(0xd4)]&&Object[_0x14dde4(0x129)](SYSTEM_MODES)['includes'](_0x55664a['val'])&&(this[_0x14dde4(0xae)]=_0x55664a[_0x14dde4(0xd4)],_0x55664a[_0x14dde4(0xd4)]===SYSTEM_MODES[_0x14dde4(0x28c)]?this[_0x14dde4(0x25e)](![]):this[_0x14dde4(0x25e)](!![]));if(!_0x55664a[_0x14dde4(0xb2)])this[_0x14dde4(0xe6)](_0x1e402c,{'val':this[_0x14dde4(0xae)],'ack':!![]});return;}if(!_0x55664a[_0x14dde4(0xb2)]){_0x1e402c[_0x14dde4(0x1c4)]('analysis.trigger')&&_0x55664a[_0x14dde4(0xd4)]&&(this[_0x14dde4(0xe6)](_0x1e402c,{'val':![],'ack':!![]}),this[_0x14dde4(0x1f8)]());if(_0x1e402c[_0x14dde4(0x1c4)](_0x14dde4(0x25c))&&_0x55664a['val']){this['setState'](_0x1e402c,{'val':![],'ack':!![]});if(this['isProVersion'])this[_0x14dde4(0x20b)]();}_0x1e402c['includes'](_0x14dde4(0xc1))&&_0x55664a['val']&&(this[_0x14dde4(0xe6)](_0x1e402c,{'val':![],'ack':!![]}),this[_0x14dde4(0xf0)]());return;}if(this[_0x14dde4(0x1e1)][_0x14dde4(0x155)]&&this[_0x14dde4(0x1e1)][_0x14dde4(0x155)]['includes'](_0x1e402c)){await this[_0x14dde4(0x236)]();return;}const _0x7c54e6=(this[_0x14dde4(0x1e1)]['devices']||[])[_0x14dde4(0x1b1)](_0x1e5121=>_0x1e5121['id']===_0x1e402c);if(_0x7c54e6)this[_0x14dde4(0x203)](_0x1e402c,_0x55664a,_0x7c54e6);}async[a0_0x3645aa(0x203)](_0x527843,_0x54eb58,_0x3ea717){const _0x430a1c=a0_0x3645aa;if(!_0x3ea717[_0x430a1c(0xe4)]&&this[_0x430a1c(0x1d3)][_0x527843]===_0x54eb58[_0x430a1c(0xd4)])return;this[_0x430a1c(0x1d3)][_0x527843]=_0x54eb58[_0x430a1c(0xd4)];if(this['isGracePeriodActive'])return;const _0x383121=await this[_0x430a1c(0x236)]();if(_0x383121){if(!this[_0x430a1c(0xc7)])this[_0x430a1c(0x25e)](!![]);}else{const _0x5549fb=_0x3ea717[_0x430a1c(0x202)]===!![];_0x5549fb?this['startExitTimer']():(this[_0x430a1c(0x204)]&&(this['log']['info'](_0x430a1c(0x9b)),this['abortExitTimer']()),!this[_0x430a1c(0xc7)]&&this[_0x430a1c(0xae)]===SYSTEM_MODES[_0x430a1c(0x268)]&&this[_0x430a1c(0x25e)](!![]));}const _0x2cc71a={'timestamp':_0x54eb58['ts'],'id':_0x527843,'name':_0x3ea717['name'],'value':_0x54eb58[_0x430a1c(0xd4)],'location':_0x3ea717[_0x430a1c(0xa2)],'type':_0x3ea717[_0x430a1c(0x15e)]};this['eventHistory'][_0x430a1c(0x147)](_0x2cc71a);if(this[_0x430a1c(0x1b3)][_0x430a1c(0xe1)]>HISTORY_MAX_SIZE)this['eventHistory'][_0x430a1c(0x13b)]();await this[_0x430a1c(0xbd)]('events.lastEvent',{'val':JSON['stringify'](_0x2cc71a),'ack':!![]}),await this[_0x430a1c(0xbd)](_0x430a1c(0x11e),{'val':JSON['stringify'](this[_0x430a1c(0x1b3)]),'ack':!![]}),this[_0x430a1c(0x180)]['push']({'timestamp':new Date(_0x54eb58['ts'])[_0x430a1c(0x280)](),'sensorName':_0x3ea717['name'],'location':_0x3ea717[_0x430a1c(0xa2)],'value':_0x54eb58['val']}),await this[_0x430a1c(0x11c)]();}[a0_0x3645aa(0x167)](){const _0x4f2ea2=a0_0x3645aa;this['abortExitTimer'](),this[_0x4f2ea2(0x23a)]=!![],this['exitGraceTimer']=setTimeout(()=>{const _0x5ac916=_0x4f2ea2;this[_0x5ac916(0x23a)]=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),this[_0x4f2ea2(0x204)]=setTimeout(()=>{const _0x3e50c8=_0x4f2ea2;this['setPresence'](![]),this[_0x3e50c8(0x204)]=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}[a0_0x3645aa(0x10b)](){const _0x31db39=a0_0x3645aa;if(this[_0x31db39(0x204)])clearTimeout(this[_0x31db39(0x204)]);if(this['exitGraceTimer'])clearTimeout(this[_0x31db39(0x1a2)]);this['exitTimer']=null,this[_0x31db39(0x1a2)]=null,this[_0x31db39(0x23a)]=![];}async[a0_0x3645aa(0x25e)](_0x133134){const _0xa417ab=a0_0x3645aa;if(this[_0xa417ab(0xc7)]===_0x133134)return;this[_0xa417ab(0xc7)]=_0x133134,await this[_0xa417ab(0xbd)]('system.isPresent',{'val':_0x133134,'ack':!![]});}['runAutopilot'](){const _0x260dc0=a0_0x3645aa,_0x130323=this[_0x260dc0(0x1e1)][_0x260dc0(0x1fa)],_0x11ba0b=this[_0x260dc0(0x1e1)][_0x260dc0(0x18c)],_0x49a34b=this[_0x260dc0(0x1b3)][_0x260dc0(0xe1)]>0x0?this['eventHistory'][0x0][_0x260dc0(0x104)]:Date[_0x260dc0(0x247)](),_0x108be4=(Date['now']()-_0x49a34b)/(0x3e8*0x3c*0x3c);let _0x48398c='';_0x11ba0b&&this[_0x260dc0(0xae)]===SYSTEM_MODES['NORMAL']&&this[_0x260dc0(0xc7)]&&(_0x108be4>_0x130323&&(_0x48398c=_0x260dc0(0x1e3)+_0x108be4['toFixed'](0x1)+_0x260dc0(0x208)));if(_0x48398c){this[_0x260dc0(0x1f8)](_0x48398c)[_0x260dc0(0x1c8)](_0x1b5949=>this[_0x260dc0(0x20a)][_0x260dc0(0x1d8)](_0x1b5949));return;}const _0xed8c8f=Date[_0x260dc0(0x247)](),_0x474a04=_0xed8c8f-_0x49a34b,_0x8f81cc=(this['config'][_0x260dc0(0x21b)]||0xf)*0x3c*0x3e8;this[_0x260dc0(0x1b3)][_0x260dc0(0xe1)]>0x0&&_0x474a04<=_0x8f81cc?this[_0x260dc0(0x1f8)]()[_0x260dc0(0x1c8)](_0x55ffb0=>this[_0x260dc0(0x20a)]['error'](_0x55ffb0)):!this[_0x260dc0(0x13a)]&&(this['setState']('analysis.isAlert',{'val':![],'ack':!![]}),this[_0x260dc0(0xe6)](_0x260dc0(0x26f),{'val':![],'ack':!![]}));}async[a0_0x3645aa(0x1f8)](_0x314641=''){const _0x1b0e0a=a0_0x3645aa;if(!this[_0x1b0e0a(0x144)])return;const _0x3f81d7=this['eventHistory'][_0x1b0e0a(0xe1)]>0x0?this[_0x1b0e0a(0x1b3)]:[{'note':_0x1b0e0a(0x1bd)}],_0x5903d3=PERSONA_MAPPING[this[_0x1b0e0a(0x1e1)][_0x1b0e0a(0x237)]||_0x1b0e0a(0x11b)],_0x4afe9f=this[_0x1b0e0a(0x1e1)][_0x1b0e0a(0x156)]||'',_0x1d8300=this[_0x1b0e0a(0xae)],_0x264da2=await this['getWeatherContext'](),_0x30b936=await this[_0x1b0e0a(0x12d)](),_0xd244d=(_0x264da2+'\x20'+_0x30b936)['trim'](),_0x3ace80=new Date(),_0x1a769d=_0x3ace80[_0x1b0e0a(0xa4)](_0x1b0e0a(0x277),{'weekday':_0x1b0e0a(0x1f7),'hour':'2-digit','minute':'2-digit'}),_0x4506be=this[_0x1b0e0a(0xbe)];let _0x51f49f='';if(this[_0x1b0e0a(0x13c)][_0x1b0e0a(0xe1)]>0x0){const _0x294678=this[_0x1b0e0a(0x13c)][_0x1b0e0a(0xa1)](0x0,0x3)[_0x1b0e0a(0xa3)](_0x35e563=>'User\x20Feedback:\x20Alarm\x20\x22'+_0x35e563[_0x1b0e0a(0x20e)]+_0x1b0e0a(0x182)+_0x35e563[_0x1b0e0a(0xb6)]+'.')[_0x1b0e0a(0x1a0)]('\x0a');_0x51f49f='\x0aFEEDBACK:\x0a'+_0x294678+'\x0a';}const _0x4495d4=_0x314641?_0x1b0e0a(0xcb)+_0x314641+_0x1b0e0a(0x177):'',_0x534ec0=_0x1b0e0a(0x217),_0x4542e8=_0x1b0e0a(0x16e)+_0x1a769d+_0x1b0e0a(0x11f)+_0x4506be[_0x1b0e0a(0x1e7)]+_0x1b0e0a(0xb1)+_0x1d8300+_0x1b0e0a(0x23e)+(this[_0x1b0e0a(0xc7)]?'Ja':_0x1b0e0a(0xa6))+_0x1b0e0a(0x222)+_0x4afe9f+_0x1b0e0a(0x9f)+_0x5903d3+_0x1b0e0a(0x23f)+_0xd244d+_0x1b0e0a(0x1e6)+_0x534ec0+'\x20'+_0x51f49f+'\x20'+_0x4495d4+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20EVENTS:\x20'+JSON[_0x1b0e0a(0x221)](_0x3f81d7)+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20AUFGABE:\x20Analysiere\x20die\x20Events\x20auf\x20AktivitÃ¤t,\x20Komfort\x20und\x20GESUNDHEIT.\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20Nutze\x20den\x20EXTERNEN\x20KONTEXT\x20(Wetter/Kalender)\x20um\x20Fehlalarme\x20zu\x20vermeiden\x20(z.B.\x20Regen\x20=\x20keine\x20GartenaktivitÃ¤t,\x20Termin\x20=\x20Abwesend).\x0a\x20\x20\x20\x20\x20\x20\x20\x20SCHEMA:\x20{\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22activity\x22:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22deviationFromBaseline\x22:\x20\x22string\x22,\x20\x22isAlert\x22:\x20bool,\x20\x22isEmergency\x22:\x20bool,\x20\x22alertReason\x22:\x20\x22string\x22\x20},\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22comfort\x22:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22suggestion\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22patternDetected\x22:\x20bool,\x20\x22description\x22:\x20\x22string\x22,\x20\x22suggestedAction\x22:\x20\x22string\x22\x20}\x20},\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22health\x22:\x20{\x20\x22sleepScore\x22:\x20number\x20(0-100),\x20\x22restlessness\x22:\x20\x22none|low|medium|high\x22,\x20\x22notes\x22:\x20\x22string\x22\x20}\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20}';try{const _0x5ca76d=await this[_0x1b0e0a(0x144)][_0x1b0e0a(0x10a)](_0x4542e8),_0x4d48a3=_0x5ca76d[_0x1b0e0a(0x1b9)][_0x1b0e0a(0x15d)]()[_0x1b0e0a(0x148)](/```json|```/g,'')['trim'](),_0x5d1686=JSON[_0x1b0e0a(0x15b)](_0x4d48a3);await this['setStateAsync'](_0x1b0e0a(0xd9),{'val':_0x4d48a3,'ack':!![]}),await this[_0x1b0e0a(0xbd)](_0x1b0e0a(0x1f4),{'val':_0x5d1686[_0x1b0e0a(0x241)]['alertReason']||'','ack':!![]}),await this[_0x1b0e0a(0xbd)](_0x1b0e0a(0x1aa),{'val':_0x5d1686['activity'][_0x1b0e0a(0x154)]||'N/A','ack':!![]}),await this[_0x1b0e0a(0xbd)]('analysis.deviationFromBaseline',{'val':_0x5d1686[_0x1b0e0a(0x241)][_0x1b0e0a(0x138)]||_0x1b0e0a(0x218),'ack':!![]});_0x5d1686[_0x1b0e0a(0x283)]&&(await this[_0x1b0e0a(0xbd)]('analysis.comfortSummary',{'val':_0x5d1686['comfort']['summary']||'','ack':!![]}),await this['setStateAsync']('analysis.comfortSuggestion',{'val':_0x5d1686['comfort']['suggestion']||'','ack':!![]}),_0x5d1686[_0x1b0e0a(0x283)][_0x1b0e0a(0x101)]&&(await this[_0x1b0e0a(0xbd)](_0x1b0e0a(0xf9),{'val':_0x5d1686['comfort'][_0x1b0e0a(0x101)][_0x1b0e0a(0xea)]||![],'ack':!![]}),await this[_0x1b0e0a(0xbd)](_0x1b0e0a(0x21d),{'val':_0x5d1686[_0x1b0e0a(0x283)][_0x1b0e0a(0x101)][_0x1b0e0a(0x27e)]||'','ack':!![]}),await this['setStateAsync'](_0x1b0e0a(0x1b6),{'val':_0x5d1686[_0x1b0e0a(0x283)][_0x1b0e0a(0x101)][_0x1b0e0a(0x128)]||'','ack':!![]})));_0x5d1686[_0x1b0e0a(0x22b)]&&(await this[_0x1b0e0a(0xbd)](_0x1b0e0a(0x1f9),{'val':typeof _0x5d1686[_0x1b0e0a(0x22b)][_0x1b0e0a(0x171)]===_0x1b0e0a(0xef)?_0x5d1686[_0x1b0e0a(0x22b)][_0x1b0e0a(0x171)]:0x0,'ack':!![]}),await this[_0x1b0e0a(0xbd)](_0x1b0e0a(0x266),{'val':_0x5d1686['health']['restlessness']||_0x1b0e0a(0xe5),'ack':!![]}),await this[_0x1b0e0a(0xbd)](_0x1b0e0a(0x1f2),{'val':_0x5d1686[_0x1b0e0a(0x22b)][_0x1b0e0a(0x1bc)]||'','ack':!![]}));const _0x424935=_0x5d1686[_0x1b0e0a(0x241)][_0x1b0e0a(0x1af)]||![],_0x262096=_0x5d1686[_0x1b0e0a(0x241)]['isEmergency']||![];if(_0x424935||_0x262096){await this['setStateAsync'](_0x1b0e0a(0x92),{'val':!![],'ack':!![]}),await this[_0x1b0e0a(0xbd)](_0x1b0e0a(0x26f),{'val':_0x262096,'ack':!![]});if(!this['lastAlertState']||_0x262096){const _0x3f627e=_0x262096?_0x1b0e0a(0xcd):_0x1b0e0a(0x185);this[_0x1b0e0a(0x230)](_0x3f627e+':\x20'+_0x5d1686[_0x1b0e0a(0x241)][_0x1b0e0a(0x20e)],![],_0x262096);}}else await this[_0x1b0e0a(0xbd)](_0x1b0e0a(0x92),{'val':![],'ack':!![]}),await this['setStateAsync'](_0x1b0e0a(0x26f),{'val':![],'ack':!![]});this[_0x1b0e0a(0x13a)]=_0x424935||_0x262096;const _0x5d005c={'timestamp':Date[_0x1b0e0a(0x247)](),'id':Date[_0x1b0e0a(0x247)]()[_0x1b0e0a(0x98)](),'analysis':_0x5d1686,'systemMode':_0x1d8300,'isPro':this['isProVersion']};this['updateAnalysisHistory'](_0x5d005c);}catch(_0x4d0ff7){this[_0x1b0e0a(0x20a)][_0x1b0e0a(0x1d8)](_0x1b0e0a(0x153)+_0x4d0ff7[_0x1b0e0a(0x235)]);}}async[a0_0x3645aa(0x20b)](){const _0x3b202a=a0_0x3645aa;if(!this[_0x3b202a(0x144)]||this[_0x3b202a(0x180)][_0x3b202a(0xe1)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await this['setStateAsync'](LTM_DP_STATUS,{'val':_0x3b202a(0x251),'ack':!![]});return;}this[_0x3b202a(0x20a)][_0x3b202a(0x189)](_0x3b202a(0x19a)+this['rawEventLog'][_0x3b202a(0xe1)]+_0x3b202a(0x269)),await this[_0x3b202a(0xbd)](LTM_DP_STATUS,{'val':_0x3b202a(0x16b),'ack':!![]});const _0x5b1ac=this[_0x3b202a(0x180)][_0x3b202a(0xe1)]>0x320?this[_0x3b202a(0x180)][_0x3b202a(0xa1)](this[_0x3b202a(0x180)]['length']-0x320):this['rawEventLog'],_0x4884c7=PERSONA_MAPPING[this[_0x3b202a(0x1e1)][_0x3b202a(0x237)]||'generic'],_0x19958c=_0x3b202a(0x276)+_0x4884c7+_0x3b202a(0x224)+JSON[_0x3b202a(0x221)](_0x5b1ac)+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20OUTPUT\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22,\x20\x22health\x22:\x20{\x20\x22sleepScore\x22:\x20number,\x20\x22restlessness\x22:\x20\x22string\x22\x20}\x20}';try{const _0x5a1813=await this['geminiModel'][_0x3b202a(0x10a)](_0x19958c),_0x111869=_0x5a1813['response'][_0x3b202a(0x15d)]()[_0x3b202a(0x148)](/```json|```/g,'')[_0x3b202a(0x137)](),_0x2ef215=JSON[_0x3b202a(0x15b)](_0x111869),_0xad483c={'timestamp':new Date()[_0x3b202a(0x280)](),'eventCount':this[_0x3b202a(0x180)][_0x3b202a(0xe1)],'summary':_0x2ef215[_0x3b202a(0x154)],'activityLevel':_0x2ef215['activityLevel'],'health':{'sleepScore':_0x2ef215[_0x3b202a(0x22b)]?_0x2ef215[_0x3b202a(0x22b)][_0x3b202a(0x171)]:0x0,'restlessness':_0x2ef215[_0x3b202a(0x22b)]?_0x2ef215[_0x3b202a(0x22b)][_0x3b202a(0x232)]:_0x3b202a(0xe5)},'systemMode':this[_0x3b202a(0xae)]};this['dailyDigests']['push'](_0xad483c),await this[_0x3b202a(0x19f)](),this[_0x3b202a(0x180)]=[],await this[_0x3b202a(0x11c)](),await this[_0x3b202a(0xbd)](LTM_DP_STATUS,{'val':_0x3b202a(0x257),'ack':!![]}),this['log'][_0x3b202a(0x189)]('Daily\x20Digest\x20created\x20successfully.');}catch(_0x10ad22){this[_0x3b202a(0x20a)][_0x3b202a(0x1d8)](_0x3b202a(0x18a)+_0x10ad22[_0x3b202a(0x235)]),await this[_0x3b202a(0xbd)](LTM_DP_STATUS,{'val':'Fehler:\x20'+_0x10ad22[_0x3b202a(0x235)],'ack':!![]});}}async['sendMorningBriefing'](){const _0x555525=a0_0x3645aa;if(!this['geminiModel'])return;this[_0x555525(0x20a)][_0x555525(0x189)](_0x555525(0x25f));const _0x5247b7=this[_0x555525(0x160)][_0x555525(0xe1)]>0x0?this[_0x555525(0x160)][this[_0x555525(0x160)][_0x555525(0xe1)]-0x1]:null,_0x3fabeb=_0x5247b7&&_0x5247b7['health']?_0x5247b7[_0x555525(0x22b)][_0x555525(0x171)]:_0x555525(0x218),_0x5bf36c=new Date();_0x5bf36c['setHours'](0x4,0x0,0x0,0x0);const _0x5916e7=this[_0x555525(0x1b3)][_0x555525(0x12a)](_0x2e7355=>new Date(_0x2e7355[_0x555525(0x104)])>_0x5bf36c),_0x458236=PERSONA_MAPPING[this[_0x555525(0x1e1)][_0x555525(0x237)]||_0x555525(0x11b)],_0x32f8b5=this['config']['livingContext']||'',_0x211887=await this[_0x555525(0x14a)](),_0x4d8404=await this[_0x555525(0x12d)](),_0x53b0b1=_0x555525(0x285)+_0x458236+_0x555525(0x1ee)+_0x32f8b5+_0x555525(0x26e)+_0x211887+'\x20'+_0x4d8404+_0x555525(0x1ce)+_0x3fabeb+_0x555525(0xce)+JSON['stringify'](_0x5916e7[_0x555525(0xa1)](0x0,0xa))+_0x555525(0xe7);try{const _0x3b6531=await this[_0x555525(0x144)][_0x555525(0x10a)](_0x53b0b1),_0x4ac2b7=_0x555525(0xfe)+_0x3b6531[_0x555525(0x1b9)]['text']()[_0x555525(0x137)]();this[_0x555525(0x230)](_0x4ac2b7),this[_0x555525(0x20a)][_0x555525(0x189)](_0x555525(0x234));}catch(_0x4bf91d){this[_0x555525(0x20a)][_0x555525(0x1d8)](_0x555525(0x255)+_0x4bf91d[_0x555525(0x235)]);}}async[a0_0x3645aa(0x230)](_0x324e38,_0x2be1ea=![],_0x346fa7=![]){const _0xc88f1e=a0_0x3645aa;this['log'][_0xc88f1e(0x189)]((_0x2be1ea?_0xc88f1e(0x284):'')+_0xc88f1e(0x1f5)+_0x324e38+'\x22'+(_0x346fa7?_0xc88f1e(0x233):''));const _0x190eb7=this[_0xc88f1e(0x1e1)];let _0xa83109=0x0;_0x190eb7[_0xc88f1e(0xbc)]&&_0x190eb7[_0xc88f1e(0x178)]&&(await this[_0xc88f1e(0x9a)](_0x190eb7[_0xc88f1e(0x178)],_0xc88f1e(0x24c),{'text':_0x324e38,'user':_0x190eb7[_0xc88f1e(0x226)]}),_0xa83109++);if(_0x190eb7[_0xc88f1e(0x1ca)]&&_0x190eb7[_0xc88f1e(0xdf)]){let _0x58533e={'message':_0x324e38,'title':_0x346fa7?_0xc88f1e(0x1cc):'Cogni-Living\x20Alert','priority':_0x346fa7?0x2:0x1,'device':_0x190eb7['notifyPushoverRecipient']};_0x346fa7&&(_0x58533e[_0xc88f1e(0x242)]=0x1e,_0x58533e[_0xc88f1e(0x252)]=0xe10,_0x58533e[_0xc88f1e(0x166)]=_0xc88f1e(0x265)),await this[_0xc88f1e(0x9a)](_0x190eb7[_0xc88f1e(0xdf)],_0xc88f1e(0x24c),_0x58533e),_0xa83109++;}return _0x190eb7[_0xc88f1e(0x192)]&&_0x190eb7[_0xc88f1e(0xb3)]&&(await this[_0xc88f1e(0x9a)](_0x190eb7[_0xc88f1e(0xb3)],_0xc88f1e(0x24c),{'text':_0x324e38,'to':_0x190eb7['notifyEmailRecipient']}),_0xa83109++),_0x190eb7[_0xc88f1e(0xe0)]&&_0x190eb7[_0xc88f1e(0x24d)]&&(await this[_0xc88f1e(0x9a)](_0x190eb7[_0xc88f1e(0x24d)],_0xc88f1e(0x24c),{'text':_0x324e38,'phone':_0x190eb7[_0xc88f1e(0x157)]}),_0xa83109++),_0x190eb7[_0xc88f1e(0xb9)]&&_0x190eb7['notifySignalInstance']&&(await this['sendToAsync'](_0x190eb7['notifySignalInstance'],_0xc88f1e(0x24c),{'text':_0x324e38,'phone':_0x190eb7[_0xc88f1e(0xfd)]}),_0xa83109++),_0xa83109;}['onUnload'](_0x39fda2){const _0x3e9ba7=a0_0x3645aa;if(this['analysisTimer'])clearInterval(this['analysisTimer']);if(this['driftAnalysisTimer'])clearInterval(this[_0x3e9ba7(0x1d5)]);if(this['ltmJob'])this[_0x3e9ba7(0x246)][_0x3e9ba7(0xad)]();if(this['modeResetJob'])this[_0x3e9ba7(0x21f)][_0x3e9ba7(0xad)]();if(this['briefingJob'])this[_0x3e9ba7(0x190)][_0x3e9ba7(0xad)]();if(this['exitTimer'])clearTimeout(this[_0x3e9ba7(0x204)]);if(this[_0x3e9ba7(0x1a2)])clearTimeout(this[_0x3e9ba7(0x1a2)]);_0x39fda2();}}if(require[a0_0x3645aa(0x1ab)]!==module)module[a0_0x3645aa(0x164)]=_0x4528b4=>new CogniLiving(_0x4528b4);else new CogniLiving();