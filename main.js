const a0_0x128d03=a0_0x4057;(function(_0x29fc20,_0x493a07){const _0x1ca4d6=a0_0x4057,_0x473fa0=_0x29fc20();while(!![]){try{const _0x4db601=parseInt(_0x1ca4d6(0x1d2))/0x1*(parseInt(_0x1ca4d6(0x184))/0x2)+parseInt(_0x1ca4d6(0x186))/0x3*(parseInt(_0x1ca4d6(0x25d))/0x4)+-parseInt(_0x1ca4d6(0x167))/0x5+parseInt(_0x1ca4d6(0x1a0))/0x6+parseInt(_0x1ca4d6(0x1d3))/0x7*(-parseInt(_0x1ca4d6(0x174))/0x8)+-parseInt(_0x1ca4d6(0x28c))/0x9+parseInt(_0x1ca4d6(0x1f4))/0xa*(parseInt(_0x1ca4d6(0x1e6))/0xb);if(_0x4db601===_0x493a07)break;else _0x473fa0['push'](_0x473fa0['shift']());}catch(_0x548686){_0x473fa0['push'](_0x473fa0['shift']());}}}(a0_0x6dac,0x90715));const a0_0x4f29bb=(function(){let _0x5f0fb0=!![];return function(_0x4073e0,_0x2c6f4b){const _0x3668e6=_0x5f0fb0?function(){const _0x4b0b91=a0_0x4057;if(_0x2c6f4b){const _0x5c2656=_0x2c6f4b[_0x4b0b91(0x1e3)](_0x4073e0,arguments);return _0x2c6f4b=null,_0x5c2656;}}:function(){};return _0x5f0fb0=![],_0x3668e6;};}()),a0_0x5373c1=a0_0x4f29bb(this,function(){const _0x8627fe=a0_0x4057;return a0_0x5373c1[_0x8627fe(0x251)]()[_0x8627fe(0x231)](_0x8627fe(0x1a4))['toString']()[_0x8627fe(0x16a)](a0_0x5373c1)[_0x8627fe(0x231)](_0x8627fe(0x1a4));});function a0_0x6dac(){const _0x48de39=['name','setState','forecast.current.weather','analysis.automation.description','getEnums','triggerGaitAnalysis','common','Standard','includes','initSystemConfig','ANOMALY\x20(Real\x20Threat?)','manual','2242330VwNMNQ','automation.triggerAction','analysis.health.todayVector','constructor','unshift','\x20min\x20ausbleiben.','forEach','security.alarm_triggered','setupBriefingScheduler','slice','pressureBuffer','@iobroker/adapter-core','driftAnalysisTimer','192xFzfdx','runAutopilot','weatherunderground.0','analysis.energy.pinnForecast','SYSTEM_MODES','fill','WiFi\x20Presence\x20detected.','exitTimer','rawEventLog','ðŸ””\x20Dies\x20ist\x20ein\x20Test\x20von\x20Cogni-Living.','minDaysForBaseline','[Infrasound]\x20Subscribing\x20to\x20external\x20sensor:\x20','\x20opened.\x20Peak\x20Pressure:\x20','analyzeWindowOpening','notifyPushoverEnabled','info','12844TNUCPs','Test','3ZYVgEm','ðŸ§ \x20Graph-Brain:\x20Training\x20Behaviour\x20Matrix\x20based\x20on\x20','sendMorningBriefing','debug','INTERNAL','PINN\x20AI\x20Forecast','TRAIN_COMFORT','protectAiMemory','OPTIMIZE_ENERGY','runBaselineDriftAnalysis','getMinutes','Reinforcement\x20Learning\x20Penalties','sendNotification','[Infrasound]\x20ðŸŸ¡\x20Debug-Mode:\x20Alarm\x20detected\x20but\x20suppressed\x20because\x20presence=true.','telegram','modeResetJob','cogni-living','sensor.door','setObjectNotExistsAsync','getOutsideTemperatureNumeric','floor','state','analysis.automation.patternDetected','analysis.topology.structure','\x20hPa.\x20Einbruch\x20wahrscheinlich.','processSensorEvent','3306390UUnMUp','checkAndInstall','setupLtmScheduler','analysis.energy.activeEnforcements','(((.+)+)+)+$','subscribeForeignStatesAsync','exitGraceTimer','analysis.health.activityTrend','object','currentSystemMode','PREDICT_ENERGY','lastTrackerEventTime','triggerInfrasoundCorrelation','sonn','enum','ðŸš¨\x20DRUCKWELLEN-ALARM!\x20StÃ¤rke:\x20','SET_TOPOLOGY','VACATION','analysis.energy.ventilationAlerts','getCalendarNames','getHours','trackerHeartbeat','calendarInstance','.data.table','message','onStateChange','infrasoundArmingId','Verbunden','setupModeResetScheduler','Verbindung\x20erfolgreich!','Keine\x20Sensor-AktivitÃ¤t','checkCalendarTriggers','some','startService','now','exports','./lib/recorder','inactivityThresholdHours','Gemini\x20Init\x20Error:\x20','memoryCache','sunny','\x20hPa\x20(Limit:\x20','warn','analysis.energy.rlPenalties','parse','.system.mode','cancel','calendarName','triggerBriefing','entries','29aRcFQW','126462AJCVnu','NORMAL','isProVersion','LTM.rawEventLog','key','main','scanDevices','executeAutomationAction','party','value','config','notifyTelegramEnabled','klar','setPresence','Fenster\x20geÃ¶ffnet:\x20','filter','apply','minutes_safe','TRAIN_ENERGY','207383HnsYXY','LTM.dailyDigests','dismissAutomation','analysis.training.triggerComfort','scores','system.presenceWho','subscribeForeignStates','find','heiter','simulateEnergyMPC','Kein\x20Wetter-Adapter','infrasoundLocked','updateLocation','ðŸŽ“\x20[RL-RESET]\x20Lern-Sperre\x20(Penalty)\x20fÃ¼r\x20\x27','510CYmdIH','infrasoundEnabled','./lib/automation','checkThermostats','infrasoundSensorId','SET_LEARNING_MODE','toFixed','push','stopService','length','./lib/topology','reed','val','\x20sequences...','updateTopologyMatrix','loadSystemMode','lastAlertState','ack','scanForDevices','CALIB','Key\x20not\x20found\x20or\x20not\x20provided','json','Simulation\x20durch\x20Admin\x20(Test)','resetRLPenalty','onUnload','ðŸ§ \x20Memory\x20Protection:\x20Restoring\x20persisted\x20AI-Calculations\x20(preventing\x20\x27Cold\x20Start\x27\x20amnesia).','sources','\x27\x20wurde\x20manuell\x20vom\x20Benutzer\x20gelÃ¶scht.','briefingJob','system.adapter.','analysis.automation.targetId','\x20rooms\x20(preventing\x20Cold\x20Start\x20Amnesia).','guest','appendToLog','checkWifiPresence','command','Activity-Level','analysis.energy.warmupTimes','Kein\x20Kalender-Adapter','triggerDailyDigest','clear','Party\x20Mode','./lib/python_bridge','analysis.training.triggerSecurity','subscribeStates','presenceDevices','send','join','Notification\x20Test\x20Failed:\x20','temperature','analysis.automation.autoApply','apiKey','testContext','@google/generative-ai','models/gemini-flash-latest','analysis.triggerBriefing','Active\x20Calendar\x20Enforcements\x20(Locks)','Sensors\x20used\x20for\x20Gait\x20Analysis','geminiApiKey','updateTopology','startSystem','search','LTM.trainingData.thermodynamics','analysisHistory','setHours','unload','âš ï¸\x20Graph-Brain:\x20No\x20training\x20sequences\x20found\x20in\x20LTM.','ALARM','trackerEnabled','bootTime','Keine\x20Antwort\x20von\x20Gemini','setStateAsync','times','pop','string','initHistory','dailyDigests','number','ready','onMessage','isGracePeriodActive','geminiModel','split','isSolar','LTM.baselineStatus','setupDriftAnalysisScheduler','from','genAI','handleInfrasound','error','monitorEnforcements','analysis.automation.triggerAction','getLtmData','toString','analysis.training.triggerEnergy','notifyTelegramInstance','Kein\x20API\x20Key\x20Ã¼bergeben','[Forensics]\x20Infrasound\x20Event\x20correlated:\x20','simulateButler','sensorLastValues','Gemini\x20AI\x20initialized.','thermostat','getOverviewData','[Infrasound]\x20ðŸš¨\x20ALARM\x20TRIGGERED!\x20Pressure\x20Wave:\x20','analysis.security.learningStatus','1658856dbFbwz','values','add','ANALYZE_TREND','Heizung\x20kann\x20','stringify','isPresent','checkSolarCondition','role','eventHistory','healthTrendInterval','sendTo','application/json','[Calibration]\x20Window\x20','ltmJob','ANALYZE_GAIT','type','window','text','map','notifyPushoverInstance','[Forensics]\x20Save\x20failed:\x20','location','./lib/scheduler','devices','\x20hPa\x20(Threshold:\x20','MATCH\x20(False\x20Positive)','LTM.triggerDailyDigest','analysis.training.triggerTopology','_calName','runGeminiAnalysis','analysisInterval','dependencyInstallInProgress','analysis.energy.warmupSources','daswetter.0','SYSTEM_DP_MODE','analysisTimer','runPythonHealthCheck','communicate.request','sort','bind','ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...','cogni-living\x20adapter\x20starting\x20(v','infrasoundThreshold','TRAIN_SECURITY','analysis.security.infrasoundLog','getGenerativeModel','5758497oWoYZy','TRAIN_HEALTH','./lib/scanner','Current.WeatherText','\x20Tage)','callback','General\x20Activity\x20Trend\x20(%)','.communicate.request','Gait\x20Speed\x20Calculation\x20Proof','endsWith','Guest\x20Mode','toLowerCase','abortExitTimer','onReady','log','sensor.window','getStateAsync','getForeignStateAsync','timestamp','Graph-Brain\x20Train\x20Error:\x20','triggerEnergyPrediction','updateHealthVector','analysis.automation.targetValue','createDailyDigest','LTM.trainingData.sequences','abs','Daten\x20nicht\x20verfÃ¼gbar','Gesendet','activityLevel','Warm-Up\x20Target\x20Temps\x20(JSON)','analysis.trigger','analysis.energy.warmupTargets'];a0_0x6dac=function(){return _0x48de39;};return a0_0x6dac();}function a0_0x4057(_0x47b57f,_0x4d28f2){const _0x4150c3=a0_0x6dac();return a0_0x4057=function(_0x5373c1,_0x4f29bb){_0x5373c1=_0x5373c1-0x157;let _0x6daca8=_0x4150c3[_0x5373c1];return _0x6daca8;},a0_0x4057(_0x47b57f,_0x4d28f2);}a0_0x5373c1();'use strict';const utils=require(a0_0x128d03(0x172)),{GoogleGenerativeAI}=require(a0_0x128d03(0x229)),installer=require('./lib/installer'),scanner=require(a0_0x128d03(0x28e)),schedulers=require(a0_0x128d03(0x274)),topology=require(a0_0x128d03(0x1fe)),setup=require('./lib/setup'),recorder=require(a0_0x128d03(0x1c4)),pythonBridge=require(a0_0x128d03(0x21e)),aiAgent=require('./lib/ai_agent'),deadMan=require('./lib/dead_man'),automation=require(a0_0x128d03(0x1f6)),GEMINI_MODEL=a0_0x128d03(0x22a),ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};class CogniLiving extends utils['Adapter']{constructor(_0x1ccc06){const _0x301b4d=a0_0x128d03;super({..._0x1ccc06,'name':_0x301b4d(0x196)}),this[_0x301b4d(0x266)]=[],this[_0x301b4d(0x233)]=[],this[_0x301b4d(0x17c)]=[],this[_0x301b4d(0x240)]=[],this[_0x301b4d(0x257)]={},this['systemConfig']={'latitude':0x0,'longitude':0x0,'city':''},this[_0x301b4d(0x263)]=!![],this[_0x301b4d(0x17b)]=null,this[_0x301b4d(0x1a6)]=null,this[_0x301b4d(0x244)]=![],this[_0x301b4d(0x24b)]=null,this[_0x301b4d(0x245)]=null,this['currentSystemMode']=setup[_0x301b4d(0x178)][_0x301b4d(0x1d4)],this[_0x301b4d(0x1d5)]=![],this[_0x301b4d(0x204)]=![],this[_0x301b4d(0x281)]=null,this['ltmJob']=null,this[_0x301b4d(0x195)]=null,this[_0x301b4d(0x173)]=null,this[_0x301b4d(0x210)]=null,this[_0x301b4d(0x1b5)]=null,this[_0x301b4d(0x267)]=null,this[_0x301b4d(0x27d)]=![],this['lastTrackerEventTime']=Date['now'](),this[_0x301b4d(0x1c7)]=null,this[_0x301b4d(0x239)]=Date[_0x301b4d(0x1c2)](),this[_0x301b4d(0x1f1)]=![],this[_0x301b4d(0x171)]=[],this['on'](_0x301b4d(0x242),this[_0x301b4d(0x299)][_0x301b4d(0x285)](this)),this['on']('stateChange',this[_0x301b4d(0x1b9)]['bind'](this)),this['on'](_0x301b4d(0x235),this['onUnload']['bind'](this)),this['on'](_0x301b4d(0x1b8),this[_0x301b4d(0x243)][_0x301b4d(0x285)](this));}async[a0_0x128d03(0x299)](){const _0xb4502c=a0_0x128d03;this[_0xb4502c(0x29a)][_0xb4502c(0x183)](_0xb4502c(0x287)+this['version']+')\x20-\x20Phase\x20D\x20(Forensic\x20Calibration)');if(!installer[_0xb4502c(0x1a1)](this,()=>this['startSystem']()))return;}async[a0_0x128d03(0x230)](){const _0x6404bd=a0_0x128d03;await setup['initZombies'](this);try{this[_0x6404bd(0x1d5)]=await setup['checkLicense'](this[_0x6404bd(0x1dd)]['licenseKey']);}catch(_0x3a2c62){}if(!this[_0x6404bd(0x1dd)][_0x6404bd(0x1c5)]||this['config'][_0x6404bd(0x1c5)]<0.1)this['config'][_0x6404bd(0x1c5)]=0xc;await setup[_0x6404bd(0x23f)](this),await setup[_0x6404bd(0x164)](this);try{const _0x1fec83=await this['getStateAsync']('analysis.energy.warmupTimes'),_0x6c2b01=await this[_0x6404bd(0x29c)]('analysis.energy.warmupSources');_0x1fec83&&_0x1fec83[_0x6404bd(0x200)]&&_0x6c2b01&&_0x6c2b01[_0x6404bd(0x200)]&&(Date[_0x6404bd(0x1c2)]()-_0x1fec83['ts']<0x4*0xe10*0x3e8&&(this[_0x6404bd(0x1c7)]={'times':JSON['parse'](_0x1fec83[_0x6404bd(0x200)]),'sources':JSON['parse'](_0x6c2b01[_0x6404bd(0x200)])},this[_0x6404bd(0x29a)][_0x6404bd(0x183)]('ðŸ§ \x20Memory:\x20Cache\x20hydrated\x20with\x20'+Object['keys'](this[_0x6404bd(0x1c7)][_0x6404bd(0x23c)])[_0x6404bd(0x1fd)]+_0x6404bd(0x213))));}catch(_0x2d5f84){this[_0x6404bd(0x29a)][_0x6404bd(0x1ca)]('Memory\x20Hydration\x20Failed:\x20'+_0x2d5f84[_0x6404bd(0x1b8)]);}if(this[_0x6404bd(0x1dd)][_0x6404bd(0x22e)])try{this[_0x6404bd(0x24b)]=new GoogleGenerativeAI(this[_0x6404bd(0x1dd)][_0x6404bd(0x22e)]),this[_0x6404bd(0x245)]=this[_0x6404bd(0x24b)][_0x6404bd(0x28b)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x6404bd(0x269)}}),this['log']['info'](_0x6404bd(0x258));}catch(_0x48f212){this[_0x6404bd(0x29a)]['error'](_0x6404bd(0x1c6)+_0x48f212[_0x6404bd(0x1b8)]);}await setup['createAllObjects'](this),await this[_0x6404bd(0x203)](),await this[_0x6404bd(0x198)](_0x6404bd(0x177),{'type':_0x6404bd(0x19b),'common':{'name':_0x6404bd(0x18b),'type':_0x6404bd(0x23e),'role':_0x6404bd(0x209),'read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x6404bd(0x1b2),{'type':_0x6404bd(0x19b),'common':{'name':'Active\x20Ventilation\x20Alerts','type':_0x6404bd(0x23e),'role':_0x6404bd(0x209),'read':!![],'write':![]},'native':{}}),await this[_0x6404bd(0x198)](_0x6404bd(0x219),{'type':_0x6404bd(0x19b),'common':{'name':'Warm-Up\x20Time\x20(Minutes\x20to\x20Target)','type':_0x6404bd(0x23e),'role':_0x6404bd(0x209),'read':!![],'write':![]},'native':{}}),await this[_0x6404bd(0x198)](_0x6404bd(0x15a),{'type':_0x6404bd(0x19b),'common':{'name':_0x6404bd(0x158),'type':_0x6404bd(0x23e),'role':_0x6404bd(0x209),'read':!![],'write':!![],'def':'{\x22default\x22:\x2021}'},'native':{}}),await this['setObjectNotExistsAsync'](_0x6404bd(0x1cb),{'type':_0x6404bd(0x19b),'common':{'name':_0x6404bd(0x191),'type':'string','role':_0x6404bd(0x209),'read':!![],'write':![],'def':'{}'},'native':{}}),await this[_0x6404bd(0x198)](_0x6404bd(0x1a7),{'type':_0x6404bd(0x19b),'common':{'name':_0x6404bd(0x292),'type':_0x6404bd(0x241),'role':_0x6404bd(0x1dc),'unit':'%','read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync']('analysis.health.gaitSensors',{'type':_0x6404bd(0x19b),'common':{'name':_0x6404bd(0x22d),'type':'string','role':_0x6404bd(0x26f),'read':!![],'write':![]},'native':{}}),await this[_0x6404bd(0x198)](_0x6404bd(0x1a3),{'type':_0x6404bd(0x19b),'common':{'name':_0x6404bd(0x22c),'type':_0x6404bd(0x23e),'role':_0x6404bd(0x209),'read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x6404bd(0x198)](_0x6404bd(0x28a),{'type':_0x6404bd(0x19b),'common':{'name':'Forensic\x20Infrasound\x20Log','type':_0x6404bd(0x23e),'role':'json','read':!![],'write':![],'def':'[]'},'native':{}}),await this['setObjectNotExistsAsync']('analysis.health.gaitDebug',{'type':'state','common':{'name':_0x6404bd(0x294),'type':_0x6404bd(0x23e),'role':_0x6404bd(0x26f),'read':!![],'write':![]},'native':{}});try{const _0x2b936f=await this[_0x6404bd(0x29c)](_0x6404bd(0x1d6));if(_0x2b936f&&_0x2b936f[_0x6404bd(0x200)])this[_0x6404bd(0x17c)]=JSON[_0x6404bd(0x1cc)](_0x2b936f[_0x6404bd(0x200)]);}catch(_0x28ed6c){this[_0x6404bd(0x17c)]=[];}try{const _0x488f57=await this['getStateAsync'](_0x6404bd(0x1e7));if(_0x488f57&&_0x488f57[_0x6404bd(0x200)])this[_0x6404bd(0x240)]=JSON['parse'](_0x488f57[_0x6404bd(0x200)]);}catch(_0x3b22a1){this['dailyDigests']=[];}const _0x32c72d=this[_0x6404bd(0x240)]['length']>=(this[_0x6404bd(0x1dd)][_0x6404bd(0x17e)]||0x7)?'Aktiv\x20('+this['dailyDigests']['length']+_0x6404bd(0x290):'Lernphase\x20('+this['dailyDigests'][_0x6404bd(0x1fd)]+'/'+(this['config'][_0x6404bd(0x17e)]||0x7)+')';await this[_0x6404bd(0x23b)](_0x6404bd(0x248),{'val':_0x32c72d,'ack':!![]}),this[_0x6404bd(0x220)](_0x6404bd(0x159)),this[_0x6404bd(0x220)](_0x6404bd(0x278)),this[_0x6404bd(0x220)]('system.mode'),this[_0x6404bd(0x220)](_0x6404bd(0x22b)),this[_0x6404bd(0x220)](_0x6404bd(0x24f)),this['subscribeStates'](_0x6404bd(0x226)),this[_0x6404bd(0x220)](_0x6404bd(0x21f)),this[_0x6404bd(0x220)]('analysis.training.triggerHealth'),this['subscribeStates'](_0x6404bd(0x252)),this[_0x6404bd(0x220)]('analysis.training.triggerComfort'),this[_0x6404bd(0x220)](_0x6404bd(0x279)),this[_0x6404bd(0x220)]('analysis.energy.mpcActive'),this['subscribeStates'](_0x6404bd(0x27e));this['config'][_0x6404bd(0x1f5)]&&this['config'][_0x6404bd(0x1f8)]&&(this[_0x6404bd(0x29a)][_0x6404bd(0x183)](_0x6404bd(0x17f)+this[_0x6404bd(0x1dd)][_0x6404bd(0x1f8)]),this[_0x6404bd(0x1ec)](this[_0x6404bd(0x1dd)][_0x6404bd(0x1f8)]));const _0x496bda=this[_0x6404bd(0x1dd)][_0x6404bd(0x275)];if(_0x496bda)for(const _0x24a997 of _0x496bda){await this['subscribeForeignStatesAsync'](_0x24a997['id']);}const _0x35cb73=this[_0x6404bd(0x1dd)][_0x6404bd(0x221)];if(_0x35cb73)for(const _0x29148f of _0x35cb73){await this[_0x6404bd(0x1a5)](_0x29148f);}if(this[_0x6404bd(0x1dd)]['notifyTelegramEnabled']&&this[_0x6404bd(0x1dd)][_0x6404bd(0x253)])await this[_0x6404bd(0x1a5)](this[_0x6404bd(0x1dd)]['notifyTelegramInstance']+_0x6404bd(0x293));setTimeout(()=>this[_0x6404bd(0x216)](),0x1388);if(this['analysisTimer'])clearInterval(this[_0x6404bd(0x281)]);const _0x1fffac=this[_0x6404bd(0x1dd)][_0x6404bd(0x27c)]||0xf;_0x1fffac>0x0&&(this['analysisTimer']=setInterval(()=>{const _0x4ecffa=_0x6404bd;this[_0x4ecffa(0x175)](),automation[_0x4ecffa(0x1bf)](this),automation[_0x4ecffa(0x24e)](this);},_0x1fffac*0x3c*0x3e8));setTimeout(()=>{const _0x43331d=_0x6404bd;automation[_0x43331d(0x1bf)](this),automation[_0x43331d(0x24e)](this);},0x2710);this['config'][_0x6404bd(0x238)]!==![]&&(this[_0x6404bd(0x1b5)]=setInterval(()=>{const _0xce7438=_0x6404bd;if(this[_0xce7438(0x1d5)]){const _0x265201=Date[_0xce7438(0x1c2)](),_0x429bf3=this[_0xce7438(0x1ab)]||_0x265201,_0x5136af=(_0x265201-_0x429bf3)/0x3e8;_0x5136af>0x2&&(this['lastTrackerEventTime']=_0x265201,pythonBridge['send'](this,'TRACK_EVENT',{'room':null,'dt':_0x5136af}));}},0xbb8));if(this[_0x6404bd(0x267)])clearInterval(this[_0x6404bd(0x267)]);this['healthTrendInterval']=setInterval(()=>{const _0x4afe82=_0x6404bd;this[_0x4afe82(0x1d5)]&&(this['log'][_0x4afe82(0x183)]('â¤ï¸\x20Auto-Heartbeat:\x20Aktualisiere\x20Gesundheits-Trends...'),this[_0x4afe82(0x282)]());},0x4*0x3c*0x3c*0x3e8),schedulers[_0x6404bd(0x1a2)](this,()=>aiAgent['createDailyDigest'](this,pythonBridge)),schedulers[_0x6404bd(0x1bc)](this),schedulers[_0x6404bd(0x249)](this,()=>aiAgent[_0x6404bd(0x18f)](this)),schedulers[_0x6404bd(0x16f)](this,()=>aiAgent[_0x6404bd(0x188)](this)),pythonBridge[_0x6404bd(0x1c1)](this,installer['PYTHON_EXE']),setTimeout(async()=>{const _0x2f9dfb=_0x6404bd;await topology[_0x2f9dfb(0x22f)](this);try{const _0x44f973=await this[_0x2f9dfb(0x29c)](_0x2f9dfb(0x19d));if(_0x44f973&&_0x44f973[_0x2f9dfb(0x200)])pythonBridge[_0x2f9dfb(0x222)](this,_0x2f9dfb(0x1b0),JSON[_0x2f9dfb(0x1cc)](_0x44f973['val']));}catch(_0x59187a){}this[_0x2f9dfb(0x282)](),this['triggerGaitAnalysis'](),this[_0x2f9dfb(0x2a0)](),this[_0x2f9dfb(0x2a1)]();},0x1388);}[a0_0x128d03(0x20c)](_0x374179){const _0x3af81b=a0_0x128d03;if(this[_0x3af81b(0x281)])clearInterval(this['analysisTimer']);if(this[_0x3af81b(0x173)])clearInterval(this['driftAnalysisTimer']);if(this[_0x3af81b(0x1b5)])clearInterval(this[_0x3af81b(0x1b5)]);if(this['healthTrendInterval'])clearInterval(this[_0x3af81b(0x267)]);if(this[_0x3af81b(0x26b)])this['ltmJob'][_0x3af81b(0x1ce)]();if(this[_0x3af81b(0x195)])this[_0x3af81b(0x195)][_0x3af81b(0x1ce)]();if(this[_0x3af81b(0x210)])this[_0x3af81b(0x210)][_0x3af81b(0x1ce)]();recorder[_0x3af81b(0x298)](this),pythonBridge[_0x3af81b(0x1fc)](this),_0x374179();}async[a0_0x128d03(0x1b9)](_0x6bf72,_0x5300cf){const _0xffc033=a0_0x128d03;if(!_0x5300cf||this[_0xffc033(0x27d)])return;if(_0x6bf72[_0xffc033(0x163)](_0xffc033(0x194))&&_0x6bf72['endsWith'](_0xffc033(0x283))&&_0x5300cf['val'])return;if(this[_0xffc033(0x1dd)]['infrasoundEnabled']&&_0x6bf72===this['config'][_0xffc033(0x1f8)]){this[_0xffc033(0x24c)](_0x5300cf[_0xffc033(0x200)]);return;}if(_0x6bf72===this['namespace']+_0xffc033(0x1cd)){if(_0x5300cf[_0xffc033(0x200)]&&Object[_0xffc033(0x25e)](setup['SYSTEM_MODES'])[_0xffc033(0x163)](_0x5300cf[_0xffc033(0x200)])){this[_0xffc033(0x1a9)]=_0x5300cf[_0xffc033(0x200)];if(_0x5300cf['val']===setup[_0xffc033(0x178)][_0xffc033(0x1b1)])await recorder[_0xffc033(0x1e0)](this,![]);else await recorder[_0xffc033(0x1e0)](this,!![]);if(this['isProVersion']){let _0xc35a0f=![],_0x5212a2=0x0,_0x365666=_0xffc033(0x166);if(this[_0xffc033(0x1a9)]===_0xffc033(0x1db))_0xc35a0f=!![],_0x5212a2=0x168,_0x365666=_0xffc033(0x21d);else this[_0xffc033(0x1a9)]===_0xffc033(0x214)&&(_0xc35a0f=!![],_0x5212a2=0x5a0,_0x365666=_0xffc033(0x296));pythonBridge[_0xffc033(0x222)](this,_0xffc033(0x1f9),{'active':_0xc35a0f,'duration':_0x5212a2,'label':_0x365666}),await this[_0xffc033(0x23b)](_0xffc033(0x25c),{'val':JSON['stringify']({'active':_0xc35a0f,'label':_0x365666,'timestamp':Date[_0xffc033(0x1c2)]()}),'ack':!![]});}}if(!_0x5300cf[_0xffc033(0x205)])this[_0xffc033(0x15c)](_0x6bf72,{'val':this[_0xffc033(0x1a9)],'ack':!![]});return;}_0x6bf72[_0xffc033(0x295)](_0xffc033(0x27e))&&_0x5300cf['ack']&&this[_0xffc033(0x18d)](_0x5300cf['val']);if(!_0x5300cf[_0xffc033(0x205)]){if(_0x6bf72['includes'](_0xffc033(0x159))&&_0x5300cf[_0xffc033(0x200)]){this['setState'](_0x6bf72,{'val':![],'ack':!![]}),aiAgent[_0xffc033(0x27b)](this);return;}if(_0x6bf72[_0xffc033(0x163)](_0xffc033(0x21b))&&_0x5300cf[_0xffc033(0x200)]){this[_0xffc033(0x15c)](_0x6bf72,{'val':![],'ack':!![]});if(this['isProVersion'])aiAgent[_0xffc033(0x2a3)](this,pythonBridge);return;}if(_0x6bf72[_0xffc033(0x163)](_0xffc033(0x1d0))&&_0x5300cf[_0xffc033(0x200)]){this[_0xffc033(0x15c)](_0x6bf72,{'val':![],'ack':!![]}),aiAgent[_0xffc033(0x188)](this);return;}if(_0x6bf72['includes'](_0xffc033(0x168))&&_0x5300cf[_0xffc033(0x200)]){this[_0xffc033(0x15c)](_0x6bf72,{'val':![],'ack':!![]}),aiAgent[_0xffc033(0x1da)](this);return;}if(_0x6bf72['includes'](_0xffc033(0x21f))&&_0x5300cf[_0xffc033(0x200)]){this[_0xffc033(0x15c)](_0x6bf72,{'val':![],'ack':!![]});if(this[_0xffc033(0x1d5)])try{const _0x38eb3c=await this[_0xffc033(0x29c)](_0xffc033(0x2a4));if(_0x38eb3c&&_0x38eb3c[_0xffc033(0x200)]){const _0x15ad11=JSON[_0xffc033(0x1cc)](_0x38eb3c['val']);this[_0xffc033(0x23b)]('analysis.training.status',{'val':'Sec-Training\x20started...','ack':!![]}),pythonBridge[_0xffc033(0x222)](this,_0xffc033(0x289),{'sequences':_0x15ad11});}}catch(_0x31f3de){}return;}if(_0x6bf72['includes']('analysis.training.triggerHealth')&&_0x5300cf['val']){this[_0xffc033(0x15c)](_0x6bf72,{'val':![],'ack':!![]});if(this[_0xffc033(0x1d5)])try{const _0x396a0b=await this['getStateAsync']('LTM.dailyDigests');if(_0x396a0b&&_0x396a0b[_0xffc033(0x200)])pythonBridge['send'](this,_0xffc033(0x28d),{'digests':JSON[_0xffc033(0x1cc)](_0x396a0b[_0xffc033(0x200)])});}catch(_0x4faff2){}return;}if(_0x6bf72['includes'](_0xffc033(0x252))&&_0x5300cf[_0xffc033(0x200)]){this['setState'](_0x6bf72,{'val':![],'ack':!![]});if(this[_0xffc033(0x1d5)])try{const _0x50d003=await this[_0xffc033(0x29c)](_0xffc033(0x232));if(_0x50d003&&_0x50d003['val'])pythonBridge[_0xffc033(0x222)](this,_0xffc033(0x1e5),{'points':JSON[_0xffc033(0x1cc)](_0x50d003['val'])});}catch(_0x3a94f5){}return;}if(_0x6bf72['includes'](_0xffc033(0x1e9))&&_0x5300cf['val']){this[_0xffc033(0x15c)](_0x6bf72,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x5cb38a=await this[_0xffc033(0x29c)](_0xffc033(0x1d6));if(_0x5cb38a&&_0x5cb38a[_0xffc033(0x200)])pythonBridge[_0xffc033(0x222)](this,_0xffc033(0x18c),{'events':JSON[_0xffc033(0x1cc)](_0x5cb38a[_0xffc033(0x200)])});}catch(_0x4ce8de){}return;}if(_0x6bf72[_0xffc033(0x163)](_0xffc033(0x279))&&_0x5300cf[_0xffc033(0x200)]){this[_0xffc033(0x15c)](_0x6bf72,{'val':![],'ack':!![]}),topology[_0xffc033(0x22f)](this);if(this['isProVersion'])try{const _0x84bf84=await this[_0xffc033(0x29c)](_0xffc033(0x2a4));if(_0x84bf84&&_0x84bf84['val']){const _0x201b89=JSON[_0xffc033(0x1cc)](_0x84bf84[_0xffc033(0x200)]);this['log']['info'](_0xffc033(0x187)+_0x201b89[_0xffc033(0x1fd)]+_0xffc033(0x201)),pythonBridge[_0xffc033(0x222)](this,'TRAIN_TOPOLOGY',{'sequences':_0x201b89});}else this['log']['warn'](_0xffc033(0x236));}catch(_0x1d4043){this[_0xffc033(0x29a)][_0xffc033(0x24d)](_0xffc033(0x29f)+_0x1d4043[_0xffc033(0x1b8)]);}return;}}if(this[_0xffc033(0x1dd)][_0xffc033(0x221)]&&this[_0xffc033(0x1dd)][_0xffc033(0x221)][_0xffc033(0x163)](_0x6bf72)){await this[_0xffc033(0x216)]();return;}const _0x497e85=(this[_0xffc033(0x1dd)][_0xffc033(0x275)]||[])[_0xffc033(0x1ed)](_0x300393=>_0x300393['id']===_0x6bf72);if(_0x497e85){const _0x19760d=await recorder[_0xffc033(0x19f)](this,_0x6bf72,_0x5300cf,_0x497e85);_0x19760d&&_0x19760d[_0xffc033(0x26d)]==='motion'&&_0x19760d[_0xffc033(0x273)]&&this[_0xffc033(0x1d5)]&&deadMan[_0xffc033(0x1f2)](this,_0x19760d[_0xffc033(0x273)]),_0x5300cf[_0xffc033(0x200)]&&(_0x5300cf['val']===!![]||_0x5300cf[_0xffc033(0x200)]===0x1||String(_0x5300cf[_0xffc033(0x200)])[_0xffc033(0x297)]()==='open')&&(_0x497e85['type']&&(_0x497e85[_0xffc033(0x26d)][_0xffc033(0x163)](_0xffc033(0x26e))||_0x497e85[_0xffc033(0x26d)][_0xffc033(0x163)]('door')||_0x497e85[_0xffc033(0x26d)][_0xffc033(0x163)]('magnet'))&&this[_0xffc033(0x181)](_0x497e85)),(_0x497e85[_0xffc033(0x26d)]==='temperature'||_0x497e85[_0xffc033(0x26d)]===_0xffc033(0x259))&&automation['cleanupGhostInterventions'](this);}}async['protectAiMemory'](_0x1f322b){const _0x2b79b2=a0_0x128d03;if(!this[_0x2b79b2(0x1c7)]||Date['now']()-this[_0x2b79b2(0x239)]>0x493e0)return;if(!this[_0x2b79b2(0x1c7)]['sources']||!this[_0x2b79b2(0x1c7)][_0x2b79b2(0x23c)])return;try{const _0x16f72b=JSON[_0x2b79b2(0x1cc)](_0x1f322b),_0x2e7c1b=this[_0x2b79b2(0x1c7)]['sources'];let _0x5b41ec=![];for(const _0x2b5807 in _0x2e7c1b){if(_0x2e7c1b[_0x2b5807]['includes']('AI')&&_0x16f72b[_0x2b5807]&&!_0x16f72b[_0x2b5807][_0x2b79b2(0x163)]('AI')){_0x5b41ec=!![];break;}}_0x5b41ec&&(this[_0x2b79b2(0x29a)][_0x2b79b2(0x183)](_0x2b79b2(0x20d)),await this[_0x2b79b2(0x23b)]('analysis.energy.warmupTimes',{'val':JSON[_0x2b79b2(0x262)](this[_0x2b79b2(0x1c7)][_0x2b79b2(0x23c)]),'ack':!![]}),await this['setStateAsync']('analysis.energy.warmupSources',{'val':JSON[_0x2b79b2(0x262)](this[_0x2b79b2(0x1c7)][_0x2b79b2(0x20e)]),'ack':!![]}));}catch(_0x539533){}}async[a0_0x128d03(0x243)](_0x19afce){const _0xcc740d=a0_0x128d03;if(typeof _0x19afce==='object'&&_0x19afce[_0xcc740d(0x1b8)]){if(_0x19afce[_0xcc740d(0x217)]===_0xcc740d(0x1f7))try{const _0x530217=await automation['scanThermostats'](this);this[_0xcc740d(0x268)](_0x19afce['from'],_0x19afce['command'],{'success':!![],'results':_0x530217},_0x19afce['callback']);}catch(_0x27d319){this[_0xcc740d(0x268)](_0x19afce['from'],_0x19afce[_0xcc740d(0x217)],{'success':![],'error':_0x27d319[_0xcc740d(0x1b8)]},_0x19afce[_0xcc740d(0x291)]);}else{if(_0x19afce[_0xcc740d(0x217)]===_0xcc740d(0x1ef))try{const {current_temps:_0x3d1001,t_out:_0x1af9ba,targets:_0x5b32d9,t_forecast:_0x26c890}=_0x19afce[_0xcc740d(0x1b8)],_0x42f563=[];let _0x469639={};try{const _0x5b4273=await this[_0xcc740d(0x29c)]('analysis.energy.insulationScore');if(_0x5b4273&&_0x5b4273[_0xcc740d(0x200)]){const _0x253933=JSON[_0xcc740d(0x1cc)](_0x5b4273[_0xcc740d(0x200)]);_0x469639=_0x253933[_0xcc740d(0x1ea)]||_0x253933;}}catch(_0x136b1e){}const _0x3a2f85=_0x26c890!==undefined&&_0x26c890!==null?(_0x1af9ba+_0x26c890)/0x2:_0x1af9ba;for(const [_0x34c5dc,_0x152403]of Object[_0xcc740d(0x1d1)](_0x3d1001)){const _0xd14291=_0x5b32d9[_0x34c5dc]||0x15;if(_0x152403<=_0xd14291)continue;let _0x4eae98=_0x469639[_0x34c5dc]||-0.5;if(_0x4eae98>=0x0)_0x4eae98=-0.5;const _0x41f24f=Math['abs'](_0x4eae98),_0x1f1aaa=_0x152403-_0xd14291;let _0x37e153=Math[_0xcc740d(0x19a)](_0x1f1aaa/_0x41f24f*0x3c);const _0x103f22=_0x152403-_0x1af9ba,_0x10421f=_0x152403-_0x3a2f85;if(_0x10421f!==0x0&&_0x103f22!==0x0){const _0x125b03=_0x103f22/_0x10421f;_0x37e153=Math['floor'](_0x37e153*_0x125b03);}if(_0x37e153>0xf){if(_0x37e153>0xf0)_0x37e153=0xf0;_0x42f563[_0xcc740d(0x1fb)]({'room':_0x34c5dc,'minutes_safe':_0x37e153,'target':_0xd14291,'current':_0x152403,'savings_msg':_0xcc740d(0x261)+_0x37e153+_0xcc740d(0x16c)});}}_0x42f563[_0xcc740d(0x284)]((_0x92940,_0xb75310)=>_0xb75310['minutes_safe']-_0x92940[_0xcc740d(0x1e4)]),this[_0xcc740d(0x268)](_0x19afce[_0xcc740d(0x24a)],_0x19afce[_0xcc740d(0x217)],{'success':!![],'proposals':_0x42f563},_0x19afce['callback']);}catch(_0x1e8aab){this['sendTo'](_0x19afce[_0xcc740d(0x24a)],_0x19afce['command'],{'success':![],'error':_0x1e8aab[_0xcc740d(0x1b8)]},_0x19afce[_0xcc740d(0x291)]);}else{if(_0x19afce[_0xcc740d(0x217)]===_0xcc740d(0x20b))try{const _0x23344b=_0x19afce[_0xcc740d(0x1b8)][_0xcc740d(0x1d7)],_0x422718=_0xcc740d(0x1cb),_0x1ec420=await this[_0xcc740d(0x29c)](_0x422718);let _0x209754={};if(_0x1ec420&&_0x1ec420[_0xcc740d(0x200)])try{_0x209754=JSON['parse'](_0x1ec420[_0xcc740d(0x200)]);}catch(_0x44f0fa){}_0x23344b&&_0x209754[_0x23344b]?(delete _0x209754[_0x23344b],await this[_0xcc740d(0x23b)](_0x422718,{'val':JSON['stringify'](_0x209754),'ack':!![]}),this[_0xcc740d(0x29a)][_0xcc740d(0x183)](_0xcc740d(0x1f3)+_0x23344b+_0xcc740d(0x20f)),this[_0xcc740d(0x268)](_0x19afce[_0xcc740d(0x24a)],_0x19afce[_0xcc740d(0x217)],{'success':!![]},_0x19afce[_0xcc740d(0x291)])):this[_0xcc740d(0x268)](_0x19afce[_0xcc740d(0x24a)],_0x19afce[_0xcc740d(0x217)],{'success':![],'error':_0xcc740d(0x208)},_0x19afce['callback']);}catch(_0x4c3f00){this[_0xcc740d(0x268)](_0x19afce[_0xcc740d(0x24a)],_0x19afce[_0xcc740d(0x217)],{'success':![],'error':_0x4c3f00[_0xcc740d(0x1b8)]},_0x19afce[_0xcc740d(0x291)]);}else{if(_0x19afce['command']===_0xcc740d(0x1e8))await this[_0xcc740d(0x23b)](_0xcc740d(0x19c),{'val':![],'ack':!![]}),await this[_0xcc740d(0x23b)](_0xcc740d(0x15e),{'val':'','ack':!![]}),await this[_0xcc740d(0x23b)](_0xcc740d(0x212),{'val':'','ack':!![]}),this[_0xcc740d(0x268)](_0x19afce[_0xcc740d(0x24a)],_0x19afce[_0xcc740d(0x217)],{'success':!![]},_0x19afce[_0xcc740d(0x291)]);else{if(_0x19afce[_0xcc740d(0x217)]===_0xcc740d(0x256)){const {targetId:_0xeaa577,targetValue:_0x317c19}=_0x19afce[_0xcc740d(0x1b8)];await this[_0xcc740d(0x23b)]('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),await this[_0xcc740d(0x23b)](_0xcc740d(0x15e),{'val':_0xcc740d(0x20a),'ack':!![]}),await this[_0xcc740d(0x23b)]('analysis.automation.targetId',{'val':_0xeaa577,'ack':!![]}),await this[_0xcc740d(0x23b)](_0xcc740d(0x2a2),{'val':String(_0x317c19),'ack':!![]}),this[_0xcc740d(0x268)](_0x19afce[_0xcc740d(0x24a)],_0x19afce[_0xcc740d(0x217)],{'success':!![]},_0x19afce['callback']);}else{if(_0x19afce[_0xcc740d(0x217)]==='testApiKey')try{const _0x27b17a=_0x19afce[_0xcc740d(0x1b8)][_0xcc740d(0x227)];if(!_0x27b17a)throw new Error(_0xcc740d(0x254));const _0x1aad22=new GoogleGenerativeAI(_0x27b17a),_0x1d80e6=_0x1aad22[_0xcc740d(0x28b)]({'model':GEMINI_MODEL}),_0x39a96b=await _0x1d80e6['generateContent'](_0xcc740d(0x185)),_0xf439c3=await _0x39a96b['response'];if(_0xf439c3['text']())this[_0xcc740d(0x268)](_0x19afce['from'],_0x19afce[_0xcc740d(0x217)],{'success':!![],'message':_0xcc740d(0x1bd)},_0x19afce[_0xcc740d(0x291)]);else throw new Error(_0xcc740d(0x23a));}catch(_0x2b8b70){this[_0xcc740d(0x268)](_0x19afce[_0xcc740d(0x24a)],_0x19afce['command'],{'success':![],'message':_0x2b8b70[_0xcc740d(0x1b8)]},_0x19afce['callback']);}else{if(_0x19afce[_0xcc740d(0x217)]===_0xcc740d(0x1d9))try{const _0x1a903d=await scanner[_0xcc740d(0x206)](this,_0x19afce[_0xcc740d(0x1b8)]||{});this[_0xcc740d(0x268)](_0x19afce[_0xcc740d(0x24a)],_0x19afce[_0xcc740d(0x217)],{'success':!![],'devices':_0x1a903d},_0x19afce[_0xcc740d(0x291)]);}catch(_0x49aeed){this[_0xcc740d(0x268)](_0x19afce[_0xcc740d(0x24a)],_0x19afce['command'],{'success':![],'error':_0x49aeed[_0xcc740d(0x1b8)]},_0x19afce[_0xcc740d(0x291)]);}else{if(_0x19afce[_0xcc740d(0x217)]===_0xcc740d(0x202))try{const {matrix:_0x260c57}=_0x19afce['message'],_0x24f5d8=await this[_0xcc740d(0x29c)]('analysis.topology.structure');if(_0x24f5d8&&_0x24f5d8['val']){const _0x2555cb=JSON[_0xcc740d(0x1cc)](_0x24f5d8[_0xcc740d(0x200)]);_0x2555cb['matrix']=_0x260c57,_0x2555cb['updated']=Date[_0xcc740d(0x1c2)](),await this[_0xcc740d(0x23b)]('analysis.topology.structure',{'val':JSON[_0xcc740d(0x262)](_0x2555cb),'ack':!![]}),pythonBridge['send'](this,'SET_TOPOLOGY',_0x2555cb);}this['sendTo'](_0x19afce[_0xcc740d(0x24a)],_0x19afce[_0xcc740d(0x217)],{'success':!![]},_0x19afce[_0xcc740d(0x291)]);}catch(_0x3f1135){this[_0xcc740d(0x29a)][_0xcc740d(0x24d)](_0x3f1135);}else{if(_0x19afce[_0xcc740d(0x217)]===_0xcc740d(0x250))this['sendTo'](_0x19afce['from'],_0x19afce['command'],{'success':!![],'dailyDigests':this['dailyDigests']||[],'analysisHistory':this[_0xcc740d(0x233)]||[]},_0x19afce['callback']);else{if(_0x19afce['command']===_0xcc740d(0x25a)){const _0x5ce80e=this[_0xcc740d(0x240)][_0xcc740d(0x1fd)],_0x5a8c60=new Array(0x18)[_0xcc740d(0x179)](0x0),_0x24ba84=new Date()[_0xcc740d(0x234)](0x0,0x0,0x0,0x0);this[_0xcc740d(0x266)]&&this[_0xcc740d(0x266)]['forEach'](_0x2bda23=>{const _0x38ef3b=_0xcc740d;if(_0x2bda23['timestamp']>=_0x24ba84){const _0x1990f0=new Date(_0x2bda23[_0x38ef3b(0x29e)])[_0x38ef3b(0x1b4)]();if(_0x1990f0>=0x0&&_0x1990f0<0x18)_0x5a8c60[_0x1990f0]++;}});let _0x9db8d7=![],_0x3025ba='',_0x2b792e='',_0x548066='';try{const _0x5deebf=await this[_0xcc740d(0x29c)](_0xcc740d(0x19c));if(_0x5deebf&&_0x5deebf[_0xcc740d(0x200)]){_0x9db8d7=!![];const _0x251722=await this[_0xcc740d(0x29c)](_0xcc740d(0x15e));_0x3025ba=_0x251722?_0x251722[_0xcc740d(0x200)]:'';const _0x51e0b5=await this[_0xcc740d(0x29c)]('analysis.automation.targetId');_0x2b792e=_0x51e0b5?_0x51e0b5['val']:'';const _0x255832=await this[_0xcc740d(0x29c)](_0xcc740d(0x2a2));_0x548066=_0x255832?_0x255832[_0xcc740d(0x200)]:'';}}catch(_0x5161bf){}const _0x16ec23=await this[_0xcc740d(0x264)](),_0x5d930a=(this[_0xcc740d(0x1dd)][_0xcc740d(0x275)]||[])[_0xcc740d(0x1c0)](_0x391f55=>_0x391f55['isSolar']),_0x2c36fe=_0x16ec23&&_0x5d930a;let _0x1c195f='';try{const _0x113f76=await this['getStateAsync'](_0xcc740d(0x1eb));if(_0x113f76&&_0x113f76[_0xcc740d(0x200)])_0x1c195f=_0x113f76[_0xcc740d(0x200)];}catch(_0x5d645a){}this[_0xcc740d(0x268)](_0x19afce[_0xcc740d(0x24a)],_0x19afce[_0xcc740d(0x217)],{'success':!![],'eventHistory':this[_0xcc740d(0x266)][_0xcc740d(0x170)](0x0,0xf),'stats':{'digestCount':_0x5ce80e,'isPresent':this[_0xcc740d(0x263)],'hourlyActivity':_0x5a8c60,'solarActive':_0x2c36fe,'presenceWho':_0x1c195f},'automation':{'detected':_0x9db8d7,'description':_0x3025ba,'targetId':_0x2b792e,'targetValue':_0x548066}},_0x19afce[_0xcc740d(0x291)]);}else{if(_0x19afce[_0xcc740d(0x217)]===_0xcc740d(0x15f)){const _0x2ba614=await this['getForeignObjectsAsync']('enum.functions.*','enum'),_0x3a861a=[];if(_0x2ba614)for(const _0x10c844 in _0x2ba614){const _0x2091d7=_0x2ba614[_0x10c844],_0x3c749a=(_0x2091d7[_0xcc740d(0x161)]&&typeof _0x2091d7[_0xcc740d(0x161)][_0xcc740d(0x15b)]===_0xcc740d(0x1a8)?_0x2091d7['common'][_0xcc740d(0x15b)]['de']:_0x2091d7[_0xcc740d(0x161)]['name'])||_0x2091d7['common'][_0xcc740d(0x15b)];_0x3a861a[_0xcc740d(0x1fb)]({'id':_0x10c844,'name':_0x3c749a});}const _0x47f882=await this['getForeignObjectsAsync']('enum.rooms.*',_0xcc740d(0x1ae)),_0x203e63=[];if(_0x47f882)for(const _0xe1e8d8 in _0x47f882){const _0x43e372=_0x47f882[_0xe1e8d8],_0x123e60=(_0x43e372[_0xcc740d(0x161)]&&typeof _0x43e372['common'][_0xcc740d(0x15b)]===_0xcc740d(0x1a8)?_0x43e372[_0xcc740d(0x161)][_0xcc740d(0x15b)]['de']:_0x43e372['common']['name'])||_0xe1e8d8[_0xcc740d(0x246)]('.')['pop']();_0x203e63[_0xcc740d(0x1fb)](_0x123e60);}this['sendTo'](_0x19afce[_0xcc740d(0x24a)],_0x19afce[_0xcc740d(0x217)],{'success':!![],'enums':_0x3a861a,'rooms':_0x203e63},_0x19afce[_0xcc740d(0x291)]);}else{if(_0x19afce[_0xcc740d(0x217)]===_0xcc740d(0x228))try{let _0x4cd8f4=_0xcc740d(0x1f0),_0x22c07d=_0xcc740d(0x21a);if(this[_0xcc740d(0x1dd)]['useWeather']){const _0x54d108=await recorder['getOutsideTemperatureNumeric'](this);_0x4cd8f4=_0x54d108!==null?_0x54d108+'Â°C':_0xcc740d(0x2a6);}if(this[_0xcc740d(0x1dd)][_0xcc740d(0x1b6)]){const _0x2f1897=await this['getForeignObjectAsync'](_0xcc740d(0x211)+this['config'][_0xcc740d(0x1b6)]);_0x22c07d=_0x2f1897?_0xcc740d(0x1bb):'Instanz\x20nicht\x20gefunden';}this[_0xcc740d(0x268)](_0x19afce['from'],_0x19afce[_0xcc740d(0x217)],{'success':!![],'weather':_0x4cd8f4,'calendar':_0x22c07d},_0x19afce[_0xcc740d(0x291)]);}catch(_0x42563e){this[_0xcc740d(0x268)](_0x19afce['from'],_0x19afce[_0xcc740d(0x217)],{'success':![],'error':_0x42563e[_0xcc740d(0x1b8)]},_0x19afce[_0xcc740d(0x291)]);}else{if(_0x19afce[_0xcc740d(0x217)]===_0xcc740d(0x1b3))try{const _0x1925e2=_0x19afce[_0xcc740d(0x1b8)]['instance'],_0x5bb20f=await this[_0xcc740d(0x29d)](_0x1925e2+_0xcc740d(0x1b7));let _0x478530=[];if(_0x5bb20f&&_0x5bb20f[_0xcc740d(0x200)]){const _0x486af7=JSON[_0xcc740d(0x1cc)](_0x5bb20f[_0xcc740d(0x200)]),_0x5dfeda=new Set();Array['isArray'](_0x486af7)&&_0x486af7[_0xcc740d(0x16d)](_0x482a6a=>{const _0x3e50f5=_0xcc740d;if(_0x482a6a[_0x3e50f5(0x27a)])_0x5dfeda[_0x3e50f5(0x25f)](_0x482a6a['_calName']);else{if(_0x482a6a['calendarName'])_0x5dfeda[_0x3e50f5(0x25f)](_0x482a6a[_0x3e50f5(0x1cf)]);}}),_0x478530=Array[_0xcc740d(0x24a)](_0x5dfeda)['sort']();}if(_0x478530[_0xcc740d(0x1fd)]===0x0)_0x478530=[_0xcc740d(0x162)];this[_0xcc740d(0x268)](_0x19afce['from'],_0x19afce[_0xcc740d(0x217)],{'success':!![],'names':_0x478530},_0x19afce[_0xcc740d(0x291)]);}catch(_0x219168){this[_0xcc740d(0x268)](_0x19afce['from'],_0x19afce[_0xcc740d(0x217)],{'success':![],'error':_0x219168['message']},_0x19afce[_0xcc740d(0x291)]);}else{if(_0x19afce[_0xcc740d(0x217)]==='testNotification')try{await setup[_0xcc740d(0x192)](this,_0xcc740d(0x17d),![],![]),this[_0xcc740d(0x268)](_0x19afce[_0xcc740d(0x24a)],_0x19afce['command'],{'success':!![],'message':_0xcc740d(0x2a7)},_0x19afce[_0xcc740d(0x291)]);}catch(_0x32f656){this[_0xcc740d(0x29a)][_0xcc740d(0x24d)](_0xcc740d(0x224)+_0x32f656['message']),this[_0xcc740d(0x268)](_0x19afce[_0xcc740d(0x24a)],_0x19afce[_0xcc740d(0x217)],{'success':![],'message':'Fehler:\x20'+_0x32f656[_0xcc740d(0x1b8)]},_0x19afce[_0xcc740d(0x291)]);}}}}}}}}}}}}}}}}async[a0_0x128d03(0x203)](){const _0x478616=a0_0x128d03;try{const _0x1ed37b=await this[_0x478616(0x29c)](setup[_0x478616(0x280)]);_0x1ed37b&&_0x1ed37b['val']&&Object[_0x478616(0x25e)](setup['SYSTEM_MODES'])[_0x478616(0x163)](_0x1ed37b['val'])?this[_0x478616(0x1a9)]=_0x1ed37b[_0x478616(0x200)]:(this['currentSystemMode']=setup['SYSTEM_MODES'][_0x478616(0x1d4)],await this[_0x478616(0x23b)](setup[_0x478616(0x280)],{'val':setup['SYSTEM_MODES'][_0x478616(0x1d4)],'ack':!![]}));}catch(_0x509d5f){this[_0x478616(0x1a9)]=setup['SYSTEM_MODES'][_0x478616(0x1d4)];}}async[a0_0x128d03(0x216)](){const _0x2346d1=a0_0x128d03;try{const _0x1faa42=this['config'][_0x2346d1(0x221)]||[];let _0x17093d=![];const _0x5b4059=[];for(const _0x53dbf8 of _0x1faa42){try{const _0x5a5b20=await this[_0x2346d1(0x29d)](_0x53dbf8);_0x5a5b20&&(_0x5a5b20[_0x2346d1(0x200)]===!![]||_0x5a5b20[_0x2346d1(0x200)]==='online'||_0x5a5b20[_0x2346d1(0x200)]===0x1)&&(_0x17093d=!![],_0x5b4059[_0x2346d1(0x1fb)](_0x53dbf8));}catch(_0x475fa2){}}return await this[_0x2346d1(0x23b)](_0x2346d1(0x1eb),{'val':_0x5b4059[_0x2346d1(0x223)](',\x20'),'ack':!![]}),_0x17093d&&(this['exitTimer']&&(this[_0x2346d1(0x29a)][_0x2346d1(0x183)](_0x2346d1(0x17a)),recorder['abortExitTimer'](this)),!this[_0x2346d1(0x263)]&&this[_0x2346d1(0x1a9)]===setup[_0x2346d1(0x178)][_0x2346d1(0x1d4)]&&await recorder['setPresence'](this,!![])),_0x17093d;}catch(_0x4e43a1){return![];}}async[a0_0x128d03(0x175)](){const _0x44535f=a0_0x128d03;this[_0x44535f(0x29a)][_0x44535f(0x189)](_0x44535f(0x286)),await aiAgent[_0x44535f(0x27b)](this),this[_0x44535f(0x2a1)](),this[_0x44535f(0x160)](),this[_0x44535f(0x2a0)]();}async[a0_0x128d03(0x264)](){const _0xd01473=a0_0x128d03,_0x57388d=[_0xd01473(0x176),'accuweather.0',_0xd01473(0x27f)],_0x18c14c=[_0xd01473(0x15d),_0xd01473(0x28f),'NextHours.Location_1.Day_1.current.symbol_desc'];for(const _0x2b1189 of _0x57388d){for(const _0x3f7747 of _0x18c14c){try{const _0x2c96f6=_0x2b1189+'.'+_0x3f7747,_0x16fe77=await this['getForeignStateAsync'](_0x2c96f6);if(_0x16fe77&&_0x16fe77[_0xd01473(0x200)]){const _0x4cef97=String(_0x16fe77[_0xd01473(0x200)])[_0xd01473(0x297)]();if(_0x4cef97[_0xd01473(0x163)](_0xd01473(0x1ad))||_0x4cef97[_0xd01473(0x163)](_0xd01473(0x1c8))||_0x4cef97[_0xd01473(0x163)](_0xd01473(0x1df))||_0x4cef97['includes'](_0xd01473(0x21c))||_0x4cef97[_0xd01473(0x163)](_0xd01473(0x1ee)))return!![];}}catch(_0x5567cc){}}}return![];}[a0_0x128d03(0x160)](){const _0x217bc0=a0_0x128d03;if(!this['isProVersion'])return;try{this['getState'](_0x217bc0(0x2a4),(_0x563f27,_0x5110a7)=>{const _0x44c7cb=_0x217bc0;_0x5110a7&&_0x5110a7[_0x44c7cb(0x200)]&&pythonBridge[_0x44c7cb(0x222)](this,_0x44c7cb(0x26c),{'sequences':JSON[_0x44c7cb(0x1cc)](_0x5110a7[_0x44c7cb(0x200)])});});}catch(_0x34d8c8){}}async[a0_0x128d03(0x2a0)](){const _0x50dd1e=a0_0x128d03;if(!this[_0x50dd1e(0x1d5)])return;try{const _0x4a20db=await recorder[_0x50dd1e(0x199)](this);if(_0x4a20db===null)return;const _0x1df447={},_0x827c5e={},_0x104a11=this[_0x50dd1e(0x1dd)]['devices']||[];for(const _0xd40941 of _0x104a11){if(_0xd40941[_0x50dd1e(0x26d)]===_0x50dd1e(0x225)&&_0xd40941[_0x50dd1e(0x273)]){const _0x437663=this[_0x50dd1e(0x257)][_0xd40941['id']];if(_0x437663!==undefined)_0x1df447[_0xd40941[_0x50dd1e(0x273)]]=_0x437663;if(_0xd40941[_0x50dd1e(0x247)])_0x827c5e[_0xd40941['location']]=!![];}}const _0x4300f9=await this['checkSolarCondition']();let _0x2f291d={};try{const _0x47789d=await this[_0x50dd1e(0x29c)](_0x50dd1e(0x15a));if(_0x47789d&&_0x47789d[_0x50dd1e(0x200)])_0x2f291d=JSON[_0x50dd1e(0x1cc)](_0x47789d[_0x50dd1e(0x200)]);}catch(_0x451f3b){}Object['keys'](_0x1df447)['length']>0x0&&(pythonBridge[_0x50dd1e(0x222)](this,_0x50dd1e(0x1aa),{'current_temps':_0x1df447,'t_out':_0x4a20db,'is_sunny':_0x4300f9,'solar_flags':_0x827c5e,'warmup_targets':_0x2f291d}),pythonBridge[_0x50dd1e(0x222)](this,_0x50dd1e(0x18e),{'current_temps':_0x1df447,'t_out':_0x4a20db,'targets':{}}));}catch(_0x414790){}}[a0_0x128d03(0x2a1)](){const _0x15fe5d=a0_0x128d03;if(!this[_0x15fe5d(0x17c)]||this['rawEventLog'][_0x15fe5d(0x1fd)]===0x0)return;const _0x2b082d=new Array(0x60)[_0x15fe5d(0x179)](0x0),_0x516297=new Date()[_0x15fe5d(0x234)](0x0,0x0,0x0,0x0);this[_0x15fe5d(0x17c)][_0x15fe5d(0x16d)](_0x13e27e=>{const _0x4157e8=_0x15fe5d,_0x3f4340=new Date(_0x13e27e['timestamp']);if(_0x3f4340['getTime']()>=_0x516297){const _0x105321=_0x3f4340['getHours'](),_0x13e590=_0x3f4340[_0x4157e8(0x190)](),_0x4979b4=_0x105321*0x4+Math[_0x4157e8(0x19a)](_0x13e590/0xf);if(_0x4979b4>=0x0&&_0x4979b4<0x60)_0x2b082d[_0x4979b4]++;}}),this[_0x15fe5d(0x23b)](_0x15fe5d(0x169),{'val':JSON[_0x15fe5d(0x262)](_0x2b082d),'ack':!![]});}[a0_0x128d03(0x282)](){const _0x1f7072=a0_0x128d03;if(!this[_0x1f7072(0x240)]||this[_0x1f7072(0x240)][_0x1f7072(0x1fd)]<0x2)return;const _0x315cb4=this[_0x1f7072(0x240)][_0x1f7072(0x270)](_0x53fd9c=>{const _0x25fd84=_0x1f7072,_0x51da07=(_0x53fd9c[_0x25fd84(0x157)]||'')[_0x25fd84(0x297)]();return ACTIVITY_LEVEL_MAP[_0x51da07]||0x32;});pythonBridge['send'](this,_0x1f7072(0x260),{'values':_0x315cb4,'tag':_0x1f7072(0x218)});}async['handleInfrasound'](_0x2fe4c4){const _0x4cd0ce=a0_0x128d03;if(_0x2fe4c4==null||typeof _0x2fe4c4!==_0x4cd0ce(0x241))return;const _0x38a318=Date['now']();this['pressureBuffer']['push']({'ts':_0x38a318,'val':_0x2fe4c4}),this[_0x4cd0ce(0x171)]=this[_0x4cd0ce(0x171)][_0x4cd0ce(0x1e2)](_0x3f14f8=>_0x38a318-_0x3f14f8['ts']<0x1388);if(this[_0x4cd0ce(0x1f1)])return;if(this[_0x4cd0ce(0x1dd)][_0x4cd0ce(0x1ba)]){const _0x439d83=await this[_0x4cd0ce(0x29d)](this['config'][_0x4cd0ce(0x1ba)]);if(_0x439d83&&!_0x439d83[_0x4cd0ce(0x200)])return;}const _0x911ee5=this[_0x4cd0ce(0x1dd)][_0x4cd0ce(0x288)]||0.04;if(Math[_0x4cd0ce(0x2a5)](_0x2fe4c4)>=_0x911ee5){this[_0x4cd0ce(0x29a)][_0x4cd0ce(0x1ca)](_0x4cd0ce(0x25b)+_0x2fe4c4+_0x4cd0ce(0x1c9)+_0x911ee5+')'),await this[_0x4cd0ce(0x23b)](_0x4cd0ce(0x16e),{'val':!![],'ack':!![]});const _0x5c5e5c=this['isPresent'];_0x5c5e5c?(this['log']['info'](_0x4cd0ce(0x193)),this[_0x4cd0ce(0x1ac)](_0x2fe4c4,_0x4cd0ce(0x18a))):(this[_0x4cd0ce(0x1ac)](_0x2fe4c4,'ALARM'),this[_0x4cd0ce(0x192)](_0x4cd0ce(0x1af)+_0x2fe4c4+_0x4cd0ce(0x19e))),this[_0x4cd0ce(0x1f1)]=!![],setTimeout(()=>{const _0xbc4ee9=_0x4cd0ce;this[_0xbc4ee9(0x1f1)]=![];},0x2710);}}async['triggerInfrasoundCorrelation'](_0x4260f9,_0x3a6239=a0_0x128d03(0x237)){const _0x27bccb=a0_0x128d03,_0x113bcd=Date['now'](),_0x54a342=this[_0x27bccb(0x1dd)]['devices']||[];setTimeout(async()=>{const _0x35cb87=_0x27bccb;let _0x2d6879=null,_0x32d4f3=_0x35cb87(0x1be);const _0x53aafe=[],_0x3fda6c=_0x54a342[_0x35cb87(0x1e2)](_0x1c81ea=>_0x1c81ea[_0x35cb87(0x26d)]&&(_0x1c81ea[_0x35cb87(0x26d)][_0x35cb87(0x163)](_0x35cb87(0x26e))||_0x1c81ea[_0x35cb87(0x26d)][_0x35cb87(0x163)]('door')||_0x1c81ea[_0x35cb87(0x26d)][_0x35cb87(0x163)]('magnet')||_0x1c81ea['type'][_0x35cb87(0x163)](_0x35cb87(0x1ff)))||_0x1c81ea[_0x35cb87(0x265)]&&(_0x1c81ea['role'][_0x35cb87(0x163)](_0x35cb87(0x29b))||_0x1c81ea[_0x35cb87(0x265)]['includes'](_0x35cb87(0x197))));for(const _0x19a3ec of _0x3fda6c){try{const _0x477b3a=await this[_0x35cb87(0x29d)](_0x19a3ec['id']);if(_0x477b3a){if(_0x477b3a['ts']>=_0x113bcd-0x7d0){_0x2d6879=_0x19a3ec[_0x35cb87(0x15b)]||_0x19a3ec['id'],_0x32d4f3='ErklÃ¤rt\x20durch:\x20'+_0x2d6879;break;}}}catch(_0x26f5d1){}}const _0x2a8bf5={'timestamp':_0x113bcd,'pressure':_0x4260f9,'isMatch':!!_0x2d6879,'explanation':_0x32d4f3,'type':_0x3a6239};await this[_0x35cb87(0x215)](_0x2a8bf5),this[_0x35cb87(0x29a)][_0x35cb87(0x183)](_0x35cb87(0x255)+(!!_0x2d6879?_0x35cb87(0x277):_0x35cb87(0x165)));},0x1388);}async['analyzeWindowOpening'](_0x33ff1a){const _0x13b004=a0_0x128d03,_0xf20f34=Date[_0x13b004(0x1c2)](),_0x220b63=_0x33ff1a[_0x13b004(0x15b)]||_0x33ff1a['id'][_0x13b004(0x246)]('.')[_0x13b004(0x23d)]();let _0x3cc784=0x0;setTimeout(async()=>{const _0x1b3a19=_0x13b004;this[_0x1b3a19(0x171)]['forEach'](_0x40e03d=>{const _0x34a5f3=_0x1b3a19;_0x40e03d['ts']>=_0xf20f34-0xfa0&&_0x40e03d['ts']<=_0xf20f34+0x3e8&&(Math['abs'](_0x40e03d[_0x34a5f3(0x200)])>Math[_0x34a5f3(0x2a5)](_0x3cc784)&&(_0x3cc784=_0x40e03d[_0x34a5f3(0x200)]));});const _0x3a0e15=this[_0x1b3a19(0x1dd)][_0x1b3a19(0x288)]||0.04,_0x50e3c4=Math[_0x1b3a19(0x2a5)](_0x3cc784)>=_0x3a0e15,_0x4b39ab={'timestamp':_0xf20f34,'pressure':_0x3cc784,'isMatch':_0x50e3c4,'explanation':_0x1b3a19(0x1e1)+_0x220b63,'type':_0x1b3a19(0x207)};await this['appendToLog'](_0x4b39ab),this[_0x1b3a19(0x29a)]['debug'](_0x1b3a19(0x26a)+_0x220b63+_0x1b3a19(0x180)+_0x3cc784[_0x1b3a19(0x1fa)](0x4)+_0x1b3a19(0x276)+_0x3a0e15+')');},0x1f4);}async[a0_0x128d03(0x215)](_0x226826){const _0x159f78=a0_0x128d03;try{const _0x5181ea=await this[_0x159f78(0x29c)](_0x159f78(0x28a));let _0x5d3e12=[];if(_0x5181ea&&_0x5181ea[_0x159f78(0x200)])_0x5d3e12=JSON[_0x159f78(0x1cc)](_0x5181ea[_0x159f78(0x200)]);_0x5d3e12[_0x159f78(0x16b)](_0x226826);if(_0x5d3e12[_0x159f78(0x1fd)]>0x14)_0x5d3e12=_0x5d3e12['slice'](0x0,0x14);await this['setStateAsync'](_0x159f78(0x28a),{'val':JSON[_0x159f78(0x262)](_0x5d3e12),'ack':!![]});}catch(_0x2916e8){this[_0x159f78(0x29a)][_0x159f78(0x24d)](_0x159f78(0x272)+_0x2916e8['message']);}}[a0_0x128d03(0x192)](_0x335ae6){const _0x3f841b=a0_0x128d03;this[_0x3f841b(0x1dd)][_0x3f841b(0x182)]&&this[_0x3f841b(0x1dd)]['notifyPushoverInstance']&&this[_0x3f841b(0x268)](this['config'][_0x3f841b(0x271)],_0x3f841b(0x222),{'message':_0x335ae6,'title':'Nuukanni\x20Security','priority':0x1}),this['config'][_0x3f841b(0x1de)]&&this[_0x3f841b(0x1dd)]['notifyTelegramInstance']&&this[_0x3f841b(0x268)](this[_0x3f841b(0x1dd)][_0x3f841b(0x253)],'send',{'text':_0x335ae6});}}if(require[a0_0x128d03(0x1d8)]!==module)module[a0_0x128d03(0x1c3)]=_0x3bda41=>new CogniLiving(_0x3bda41);else new CogniLiving();