const a0_0x21e0ef=a0_0x45d4;(function(_0x482d65,_0xab355){const _0x1d039d=a0_0x45d4,_0xdd6eda=_0x482d65();while(!![]){try{const _0x37a521=-parseInt(_0x1d039d(0x242))/0x1+parseInt(_0x1d039d(0x228))/0x2*(parseInt(_0x1d039d(0x1ff))/0x3)+-parseInt(_0x1d039d(0x1c4))/0x4*(parseInt(_0x1d039d(0x2e7))/0x5)+-parseInt(_0x1d039d(0x2d5))/0x6+parseInt(_0x1d039d(0x281))/0x7*(-parseInt(_0x1d039d(0x286))/0x8)+-parseInt(_0x1d039d(0x23e))/0x9+parseInt(_0x1d039d(0x1ce))/0xa;if(_0x37a521===_0xab355)break;else _0xdd6eda['push'](_0xdd6eda['shift']());}catch(_0x3ca1ed){_0xdd6eda['push'](_0xdd6eda['shift']());}}}(a0_0x17f9,0xe2c73));function a0_0x17f9(){const _0x506bb6=['TRAIN_HEALTH','5045517bqPNNp','cogni-living\x20adapter\x20starting\x20(v','Verbindung\x20erfolgreich!','onReady','214422sBhpDS','analysis.health.gaitSensors','runBaselineDriftAnalysis','getOutsideTemperatureNumeric','[Calibration]\x20Window\x20','analysis.health.activityTrend','runGeminiAnalysis','ready','ðŸŽ“\x20[RL-RESET]\x20Lern-Sperre\x20(Penalty)\x20fÃ¼r\x20\x27','system.adapter.','dismissAutomation','val','analysisHistory','debug','analysis.health.gaitDebug','genAI','startService','analysis.energy.warmupTargets','bind','analysis.automation.targetValue','Memory\x20Hydration\x20Failed:\x20','createDailyDigest','Lernphase\x20(','Kein\x20API\x20Key\x20Ã¼bergeben','notifyPushoverEnabled','Gait\x20Speed\x20Calculation\x20Proof','inactivityThresholdHours','[Infrasound]\x20ðŸŸ¡\x20Debug-Mode:\x20Alarm\x20detected\x20but\x20suppressed\x20because\x20presence=true.','type','analysis.energy.rlPenalties','NextHours.Location_1.Day_1.current.symbol_desc','triggerBriefing','klar','ðŸ§ \x20Memory:\x20Cache\x20hydrated\x20with\x20','getGenerativeModel','Daten\x20nicht\x20verfÃ¼gbar','onMessage','search','SYSTEM_MODES','sensorLastValues','SET_LEARNING_MODE','parse','sunny','heiter','sendNotification','isArray','warn','length','state','sendTo','currentSystemMode','./lib/python_bridge','isProVersion','magnet','onUnload','ðŸ§ \x20Memory\x20Protection:\x20Restoring\x20persisted\x20AI-Calculations\x20(preventing\x20\x27Cold\x20Start\x27\x20amnesia).','checkCalendarTriggers','geminiApiKey','add','Warm-Up\x20Target\x20Temps\x20(JSON)','analysis.security.learningStatus','analysis.training.triggerComfort','name','140mYkoRC','getState','activityLevel','updateLocation','memoryCache','58456Bajyiz','text','analysisInterval','sensor.door','command','simulateButler','(((.+)+)+)+$','Fenster\x20geÃ¶ffnet:\x20','triggerInfrasoundCorrelation','.communicate.request','value','daswetter.0','Reinforcement\x20Learning\x20Penalties','abortExitTimer','infrasoundLocked','analysis.training.triggerSecurity','getForeignStateAsync','eventHistory','subscribeStates','dailyDigests','toLowerCase','MATCH\x20(False\x20Positive)','json','location','executeAutomationAction','testApiKey','forEach','thermostat','analyzeWindowOpening','Nuukanni\x20Security','generateContent','includes','briefingJob','analysis.energy.warmupTimes','@google/generative-ai','scores','window','timestamp','notifyTelegramInstance','ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...','./lib/scheduler','analysis.automation.targetId','runPythonHealthCheck','slice','string','config','exports','toFixed','_calName','automation.triggerAction','Keine\x20Antwort\x20von\x20Gemini','[Infrasound]\x20ðŸš¨\x20ALARM\x20TRIGGERED!\x20Pressure\x20Wave:\x20','handleInfrasound','updateHealthVector','./lib/automation','Active\x20Calendar\x20Enforcements\x20(Locks)','subscribeForeignStates','isSolar','analysis.automation.patternDetected','exitGraceTimer','some','devices','ltmJob','analysis.training.triggerEnergy','CALIB','pressureBuffer','updated','setupDriftAnalysisScheduler','entries','isPresent','unshift','door','LTM.trainingData.thermodynamics','onStateChange','checkLicense','enum','presenceDevices','sources','LTM.dailyDigests','6649938PkCfPJ','analysis.training.status','analysis.trigger','open','monitorEnforcements','driftAnalysisTimer','exitTimer','\x27\x20wurde\x20manuell\x20vom\x20Benutzer\x20gelÃ¶scht.','Gemini\x20Init\x20Error:\x20','telegram','reed','.data.table','scanForDevices','analysis.training.triggerHealth','infrasoundArmingId','rawEventLog','geminiModel','protectAiMemory','30qmaiIi','getMinutes','ANOMALY\x20(Real\x20Threat?)','constructor','checkAndInstall','analysis.energy.ventilationAlerts','checkSolarCondition','Standard','trackerHeartbeat','ErklÃ¤rt\x20durch:\x20','analysis.security.infrasoundLog','infrasoundEnabled','./lib/recorder','error','SYSTEM_DP_MODE','Instanz\x20nicht\x20gefunden','Current.WeatherText','send','LTM.baselineStatus','[Forensics]\x20Infrasound\x20Event\x20correlated:\x20','lastAlertState','getStateAsync','analysis.energy.insulationScore','startSystem','PYTHON_EXE','object','times','cancel','ANALYZE_GAIT','analysis.automation.triggerAction','Sensors\x20used\x20for\x20Gait\x20Analysis','getLtmData','filter','Heizung\x20kann\x20','appendToLog','useWeather','analysis.energy.warmupSources','testNotification','loadSystemMode','split','minutes_safe','\x20opened.\x20Peak\x20Pressure:\x20','Keine\x20Sensor-AktivitÃ¤t','Adapter','7212RQvxWs','initHistory','General\x20Activity\x20Trend\x20(%)','triggerEnergyPrediction','\x20Tage)','dependencyInstallInProgress','analysis.automation.autoApply','infrasoundThreshold','subscribeForeignStatesAsync','Kein\x20Wetter-Adapter','26044340IBqjLK','calendarName','info','callback','endsWith','now','security.alarm_triggered','LTM.rawEventLog','log','toString','getEnums','getCalendarNames','triggerDailyDigest','sensor.window','online','infrasoundSensorId','WiFi\x20Presence\x20detected.','unload','systemConfig','ðŸ””\x20Dies\x20ist\x20ein\x20Test\x20von\x20Cogni-Living.','NORMAL','Active\x20Ventilation\x20Alerts','triggerGaitAnalysis','lastTrackerEventTime','notifyPushoverInstance','healthTrendInterval','runAutopilot','setHours','floor','Simulation\x20durch\x20Admin\x20(Test)','system.mode','LTM.trainingData.sequences','PINN\x20AI\x20Forecast','SET_TOPOLOGY','role','enum.rooms.*','updateTopology','{\x22default\x22:\x2021}','stringify','initSystemConfig','processSensorEvent','analysisTimer','setupModeResetScheduler','apply','[Forensics]\x20Save\x20failed:\x20','sort','motion','setStateAsync','analysis.topology.structure','15ATRSVG','Test','.system.mode','testContext','setPresence','setupLtmScheduler','system.presenceWho','simulateEnergyMPC','./lib/installer','setObjectNotExistsAsync','createAllObjects','number','trackerEnabled','checkThermostats','values','namespace','\x20hPa\x20(Threshold:\x20','getForeignObjectAsync','getHours','from','modeResetJob','application/json','TRAIN_COMFORT','party','analysis.automation.description','analysis.training.triggerTopology','setupBriefingScheduler','@iobroker/adapter-core','stopService','abs','apiKey','join','./lib/topology','setState','temperature','\x20min\x20ausbleiben.','analysis.energy.pinnForecast','Gesendet','find','Party\x20Mode','./lib/setup','145906XDYyhr','pop','message','ANALYZE_TREND','Gemini\x20AI\x20initialized.','[Infrasound]\x20Subscribing\x20to\x20external\x20sensor:\x20','guest','isGracePeriodActive','fill','ack','analysis.triggerBriefing','Sec-Training\x20started...','Aktiv\x20(','scanDevices','manual','Key\x20not\x20found\x20or\x20not\x20provided','common','PREDICT_ENERGY','push','cogni-living','\x20hPa.\x20Einbruch\x20wahrscheinlich.'];a0_0x17f9=function(){return _0x506bb6;};return a0_0x17f9();}const a0_0x1e2be8=(function(){let _0xfa64f3=!![];return function(_0x996c13,_0x2674bd){const _0x24945b=_0xfa64f3?function(){const _0x46e8fc=a0_0x45d4;if(_0x2674bd){const _0x3c63e6=_0x2674bd[_0x46e8fc(0x1f9)](_0x996c13,arguments);return _0x2674bd=null,_0x3c63e6;}}:function(){};return _0xfa64f3=![],_0x24945b;};}()),a0_0x4a4c00=a0_0x1e2be8(this,function(){const _0x4576ff=a0_0x45d4;return a0_0x4a4c00[_0x4576ff(0x1d7)]()[_0x4576ff(0x267)](_0x4576ff(0x28c))[_0x4576ff(0x1d7)]()[_0x4576ff(0x2ea)](a0_0x4a4c00)[_0x4576ff(0x267)](_0x4576ff(0x28c));});a0_0x4a4c00();'use strict';const utils=require(a0_0x21e0ef(0x21a)),{GoogleGenerativeAI}=require(a0_0x21e0ef(0x2a8)),installer=require(a0_0x21e0ef(0x207)),scanner=require('./lib/scanner'),schedulers=require(a0_0x21e0ef(0x2ae)),topology=require(a0_0x21e0ef(0x21f)),setup=require(a0_0x21e0ef(0x227)),recorder=require(a0_0x21e0ef(0x2f3)),pythonBridge=require(a0_0x21e0ef(0x275)),aiAgent=require('./lib/ai_agent'),deadMan=require('./lib/dead_man'),automation=require(a0_0x21e0ef(0x2bc)),GEMINI_MODEL='models/gemini-flash-latest',ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};class CogniLiving extends utils[a0_0x21e0ef(0x1c3)]{constructor(_0x1573e0){const _0x48b34c=a0_0x21e0ef;super({..._0x1573e0,'name':_0x48b34c(0x23b)}),this[_0x48b34c(0x297)]=[],this[_0x48b34c(0x24e)]=[],this[_0x48b34c(0x2e4)]=[],this['dailyDigests']=[],this[_0x48b34c(0x269)]={},this[_0x48b34c(0x1e0)]={'latitude':0x0,'longitude':0x0,'city':''},this['isPresent']=!![],this[_0x48b34c(0x2db)]=null,this[_0x48b34c(0x2c1)]=null,this[_0x48b34c(0x22f)]=![],this[_0x48b34c(0x251)]=null,this[_0x48b34c(0x2e5)]=null,this[_0x48b34c(0x274)]=setup['SYSTEM_MODES'][_0x48b34c(0x1e2)],this[_0x48b34c(0x276)]=![],this[_0x48b34c(0x1ac)]=![],this[_0x48b34c(0x1f7)]=null,this[_0x48b34c(0x2c4)]=null,this['modeResetJob']=null,this[_0x48b34c(0x2da)]=null,this[_0x48b34c(0x2a6)]=null,this[_0x48b34c(0x2ef)]=null,this[_0x48b34c(0x1e7)]=null,this[_0x48b34c(0x1c9)]=![],this[_0x48b34c(0x1e5)]=Date[_0x48b34c(0x1d3)](),this[_0x48b34c(0x285)]=null,this['bootTime']=Date[_0x48b34c(0x1d3)](),this['infrasoundLocked']=![],this[_0x48b34c(0x2c7)]=[],this['on'](_0x48b34c(0x249),this['onReady'][_0x48b34c(0x254)](this)),this['on']('stateChange',this[_0x48b34c(0x2cf)]['bind'](this)),this['on'](_0x48b34c(0x1df),this[_0x48b34c(0x278)][_0x48b34c(0x254)](this)),this['on']('message',this[_0x48b34c(0x266)][_0x48b34c(0x254)](this));}async[a0_0x21e0ef(0x241)](){const _0x55adeb=a0_0x21e0ef;this[_0x55adeb(0x1d6)][_0x55adeb(0x1d0)](_0x55adeb(0x23f)+this['version']+')\x20-\x20Phase\x20D\x20(Forensic\x20Calibration)');if(!installer[_0x55adeb(0x2eb)](this,()=>this['startSystem']()))return;}async[a0_0x21e0ef(0x1af)](){const _0xb37983=a0_0x21e0ef;await setup['initZombies'](this);try{this[_0xb37983(0x276)]=await setup[_0xb37983(0x2d0)](this[_0xb37983(0x2b3)]['licenseKey']);}catch(_0x5cb8ec){}if(!this['config'][_0xb37983(0x25c)]||this[_0xb37983(0x2b3)][_0xb37983(0x25c)]<0.1)this[_0xb37983(0x2b3)]['inactivityThresholdHours']=0xc;await setup[_0xb37983(0x1c5)](this),await setup[_0xb37983(0x1f5)](this);try{const _0x1d63ba=await this[_0xb37983(0x1ad)](_0xb37983(0x2a7)),_0x131bac=await this[_0xb37983(0x1ad)](_0xb37983(0x1bc));_0x1d63ba&&_0x1d63ba[_0xb37983(0x24d)]&&_0x131bac&&_0x131bac[_0xb37983(0x24d)]&&(Date[_0xb37983(0x1d3)]()-_0x1d63ba['ts']<0x4*0xe10*0x3e8&&(this[_0xb37983(0x285)]={'times':JSON['parse'](_0x1d63ba[_0xb37983(0x24d)]),'sources':JSON[_0xb37983(0x26b)](_0x131bac[_0xb37983(0x24d)])},this[_0xb37983(0x1d6)]['info'](_0xb37983(0x263)+Object['keys'](this[_0xb37983(0x285)][_0xb37983(0x1b2)])[_0xb37983(0x271)]+'\x20rooms\x20(preventing\x20Cold\x20Start\x20Amnesia).')));}catch(_0x198669){this[_0xb37983(0x1d6)]['warn'](_0xb37983(0x256)+_0x198669['message']);}if(this['config'][_0xb37983(0x27b)])try{this['genAI']=new GoogleGenerativeAI(this[_0xb37983(0x2b3)]['geminiApiKey']),this['geminiModel']=this[_0xb37983(0x251)][_0xb37983(0x264)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0xb37983(0x214)}}),this['log'][_0xb37983(0x1d0)](_0xb37983(0x22c));}catch(_0x14d4f6){this['log'][_0xb37983(0x2f4)](_0xb37983(0x2dd)+_0x14d4f6[_0xb37983(0x22a)]);}await setup[_0xb37983(0x209)](this),await this[_0xb37983(0x1be)](),await this['setObjectNotExistsAsync'](_0xb37983(0x223),{'type':_0xb37983(0x272),'common':{'name':_0xb37983(0x1ee),'type':_0xb37983(0x2b2),'role':_0xb37983(0x29c),'read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0xb37983(0x2ec),{'type':'state','common':{'name':_0xb37983(0x1e3),'type':_0xb37983(0x2b2),'role':'json','read':!![],'write':![]},'native':{}}),await this[_0xb37983(0x208)](_0xb37983(0x2a7),{'type':_0xb37983(0x272),'common':{'name':'Warm-Up\x20Time\x20(Minutes\x20to\x20Target)','type':_0xb37983(0x2b2),'role':_0xb37983(0x29c),'read':!![],'write':![]},'native':{}}),await this[_0xb37983(0x208)](_0xb37983(0x253),{'type':_0xb37983(0x272),'common':{'name':_0xb37983(0x27d),'type':_0xb37983(0x2b2),'role':_0xb37983(0x29c),'read':!![],'write':!![],'def':_0xb37983(0x1f3)},'native':{}}),await this[_0xb37983(0x208)]('analysis.energy.rlPenalties',{'type':_0xb37983(0x272),'common':{'name':_0xb37983(0x292),'type':_0xb37983(0x2b2),'role':'json','read':!![],'write':![],'def':'{}'},'native':{}}),await this['setObjectNotExistsAsync'](_0xb37983(0x247),{'type':_0xb37983(0x272),'common':{'name':_0xb37983(0x1c6),'type':_0xb37983(0x20a),'role':_0xb37983(0x290),'unit':'%','read':!![],'write':![]},'native':{}}),await this[_0xb37983(0x208)](_0xb37983(0x243),{'type':_0xb37983(0x272),'common':{'name':_0xb37983(0x1b6),'type':_0xb37983(0x2b2),'role':_0xb37983(0x287),'read':!![],'write':![]},'native':{}}),await this[_0xb37983(0x208)]('analysis.energy.activeEnforcements',{'type':_0xb37983(0x272),'common':{'name':_0xb37983(0x2bd),'type':_0xb37983(0x2b2),'role':_0xb37983(0x29c),'read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0xb37983(0x208)](_0xb37983(0x2f1),{'type':'state','common':{'name':'Forensic\x20Infrasound\x20Log','type':_0xb37983(0x2b2),'role':_0xb37983(0x29c),'read':!![],'write':![],'def':'[]'},'native':{}}),await this['setObjectNotExistsAsync'](_0xb37983(0x250),{'type':_0xb37983(0x272),'common':{'name':_0xb37983(0x25b),'type':_0xb37983(0x2b2),'role':_0xb37983(0x287),'read':!![],'write':![]},'native':{}});try{const _0x51c3de=await this[_0xb37983(0x1ad)]('LTM.rawEventLog');if(_0x51c3de&&_0x51c3de['val'])this[_0xb37983(0x2e4)]=JSON[_0xb37983(0x26b)](_0x51c3de['val']);}catch(_0x186c53){this[_0xb37983(0x2e4)]=[];}try{const _0x1916af=await this[_0xb37983(0x1ad)](_0xb37983(0x2d4));if(_0x1916af&&_0x1916af[_0xb37983(0x24d)])this['dailyDigests']=JSON['parse'](_0x1916af[_0xb37983(0x24d)]);}catch(_0x3b6786){this[_0xb37983(0x299)]=[];}const _0x16af85=this['dailyDigests']['length']>=(this[_0xb37983(0x2b3)]['minDaysForBaseline']||0x7)?_0xb37983(0x234)+this[_0xb37983(0x299)]['length']+_0xb37983(0x1c8):_0xb37983(0x258)+this[_0xb37983(0x299)][_0xb37983(0x271)]+'/'+(this[_0xb37983(0x2b3)]['minDaysForBaseline']||0x7)+')';await this[_0xb37983(0x1fd)](_0xb37983(0x1aa),{'val':_0x16af85,'ack':!![]}),this['subscribeStates'](_0xb37983(0x2d7)),this[_0xb37983(0x298)]('LTM.triggerDailyDigest'),this[_0xb37983(0x298)](_0xb37983(0x1ec)),this[_0xb37983(0x298)](_0xb37983(0x232)),this[_0xb37983(0x298)](_0xb37983(0x1b5)),this[_0xb37983(0x298)](_0xb37983(0x1ca)),this[_0xb37983(0x298)](_0xb37983(0x295)),this['subscribeStates']('analysis.training.triggerHealth'),this[_0xb37983(0x298)](_0xb37983(0x2c5)),this[_0xb37983(0x298)](_0xb37983(0x27f)),this[_0xb37983(0x298)](_0xb37983(0x218)),this[_0xb37983(0x298)]('analysis.energy.mpcActive'),this[_0xb37983(0x298)](_0xb37983(0x1bc));this[_0xb37983(0x2b3)][_0xb37983(0x2f2)]&&this['config'][_0xb37983(0x1dd)]&&(this[_0xb37983(0x1d6)][_0xb37983(0x1d0)](_0xb37983(0x22d)+this[_0xb37983(0x2b3)][_0xb37983(0x1dd)]),this[_0xb37983(0x2be)](this[_0xb37983(0x2b3)][_0xb37983(0x1dd)]));const _0xfce895=this[_0xb37983(0x2b3)][_0xb37983(0x2c3)];if(_0xfce895)for(const _0x580f18 of _0xfce895){await this[_0xb37983(0x1cc)](_0x580f18['id']);}const _0x3e41f5=this[_0xb37983(0x2b3)]['presenceDevices'];if(_0x3e41f5)for(const _0x1f5318 of _0x3e41f5){await this[_0xb37983(0x1cc)](_0x1f5318);}if(this[_0xb37983(0x2b3)]['notifyTelegramEnabled']&&this['config'][_0xb37983(0x2ac)])await this[_0xb37983(0x1cc)](this[_0xb37983(0x2b3)]['notifyTelegramInstance']+_0xb37983(0x28f));setTimeout(()=>this['checkWifiPresence'](),0x1388);if(this[_0xb37983(0x1f7)])clearInterval(this['analysisTimer']);const _0x4663c2=this[_0xb37983(0x2b3)][_0xb37983(0x288)]||0xf;_0x4663c2>0x0&&(this['analysisTimer']=setInterval(()=>{const _0x59e954=_0xb37983;this[_0x59e954(0x1e8)](),automation['checkCalendarTriggers'](this),automation[_0x59e954(0x2d9)](this);},_0x4663c2*0x3c*0x3e8));setTimeout(()=>{const _0x2ed0f0=_0xb37983;automation[_0x2ed0f0(0x27a)](this),automation[_0x2ed0f0(0x2d9)](this);},0x2710);this[_0xb37983(0x2b3)][_0xb37983(0x20b)]!==![]&&(this[_0xb37983(0x2ef)]=setInterval(()=>{const _0x114d07=_0xb37983;if(this[_0x114d07(0x276)]){const _0x5ae52e=Date[_0x114d07(0x1d3)](),_0x902d36=this[_0x114d07(0x1e5)]||_0x5ae52e,_0x4790fb=(_0x5ae52e-_0x902d36)/0x3e8;_0x4790fb>0x2&&(this[_0x114d07(0x1e5)]=_0x5ae52e,pythonBridge[_0x114d07(0x1a9)](this,'TRACK_EVENT',{'room':null,'dt':_0x4790fb}));}},0xbb8));if(this[_0xb37983(0x1e7)])clearInterval(this[_0xb37983(0x1e7)]);this[_0xb37983(0x1e7)]=setInterval(()=>{const _0x1c0fd7=_0xb37983;this['isProVersion']&&(this['log']['info']('â¤ï¸\x20Auto-Heartbeat:\x20Aktualisiere\x20Gesundheits-Trends...'),this[_0x1c0fd7(0x2b0)]());},0x4*0x3c*0x3c*0x3e8),schedulers[_0xb37983(0x204)](this,()=>aiAgent[_0xb37983(0x257)](this,pythonBridge)),schedulers[_0xb37983(0x1f8)](this),schedulers[_0xb37983(0x2c9)](this,()=>aiAgent[_0xb37983(0x244)](this)),schedulers[_0xb37983(0x219)](this,()=>aiAgent['sendMorningBriefing'](this)),pythonBridge[_0xb37983(0x252)](this,installer[_0xb37983(0x1b0)]),setTimeout(async()=>{const _0x552754=_0xb37983;await topology['updateTopology'](this);try{const _0x13c950=await this[_0x552754(0x1ad)](_0x552754(0x1fe));if(_0x13c950&&_0x13c950[_0x552754(0x24d)])pythonBridge[_0x552754(0x1a9)](this,_0x552754(0x1ef),JSON[_0x552754(0x26b)](_0x13c950[_0x552754(0x24d)]));}catch(_0x544ade){}this[_0x552754(0x2b0)](),this['triggerGaitAnalysis'](),this[_0x552754(0x1c7)](),this[_0x552754(0x2bb)]();},0x1388);}[a0_0x21e0ef(0x278)](_0x1e2f0c){const _0x56af24=a0_0x21e0ef;if(this['analysisTimer'])clearInterval(this['analysisTimer']);if(this[_0x56af24(0x2da)])clearInterval(this[_0x56af24(0x2da)]);if(this['trackerHeartbeat'])clearInterval(this[_0x56af24(0x2ef)]);if(this[_0x56af24(0x1e7)])clearInterval(this[_0x56af24(0x1e7)]);if(this[_0x56af24(0x2c4)])this[_0x56af24(0x2c4)]['cancel']();if(this[_0x56af24(0x213)])this[_0x56af24(0x213)]['cancel']();if(this[_0x56af24(0x2a6)])this[_0x56af24(0x2a6)][_0x56af24(0x1b3)]();recorder[_0x56af24(0x293)](this),pythonBridge[_0x56af24(0x21b)](this),_0x1e2f0c();}async[a0_0x21e0ef(0x2cf)](_0x3e0960,_0x5eedfc){const _0x62b664=a0_0x21e0ef;if(!_0x5eedfc||this['dependencyInstallInProgress'])return;if(_0x3e0960['includes'](_0x62b664(0x2de))&&_0x3e0960['endsWith']('communicate.request')&&_0x5eedfc[_0x62b664(0x24d)])return;if(this['config'][_0x62b664(0x2f2)]&&_0x3e0960===this['config'][_0x62b664(0x1dd)]){this[_0x62b664(0x2ba)](_0x5eedfc['val']);return;}if(_0x3e0960===this[_0x62b664(0x20e)]+_0x62b664(0x201)){if(_0x5eedfc[_0x62b664(0x24d)]&&Object['values'](setup[_0x62b664(0x268)])[_0x62b664(0x2a5)](_0x5eedfc[_0x62b664(0x24d)])){this[_0x62b664(0x274)]=_0x5eedfc[_0x62b664(0x24d)];if(_0x5eedfc[_0x62b664(0x24d)]===setup['SYSTEM_MODES']['VACATION'])await recorder['setPresence'](this,![]);else await recorder[_0x62b664(0x203)](this,!![]);if(this['isProVersion']){let _0x3e193d=![],_0xc1c8e7=0x0,_0x5ebd96=_0x62b664(0x236);if(this[_0x62b664(0x274)]===_0x62b664(0x216))_0x3e193d=!![],_0xc1c8e7=0x168,_0x5ebd96=_0x62b664(0x226);else this[_0x62b664(0x274)]===_0x62b664(0x22e)&&(_0x3e193d=!![],_0xc1c8e7=0x5a0,_0x5ebd96='Guest\x20Mode');pythonBridge['send'](this,_0x62b664(0x26a),{'active':_0x3e193d,'duration':_0xc1c8e7,'label':_0x5ebd96}),await this[_0x62b664(0x1fd)](_0x62b664(0x27e),{'val':JSON['stringify']({'active':_0x3e193d,'label':_0x5ebd96,'timestamp':Date['now']()}),'ack':!![]});}}if(!_0x5eedfc[_0x62b664(0x231)])this[_0x62b664(0x220)](_0x3e0960,{'val':this[_0x62b664(0x274)],'ack':!![]});return;}_0x3e0960[_0x62b664(0x1d2)](_0x62b664(0x1bc))&&_0x5eedfc[_0x62b664(0x231)]&&this[_0x62b664(0x2e6)](_0x5eedfc[_0x62b664(0x24d)]);if(!_0x5eedfc[_0x62b664(0x231)]){if(_0x3e0960[_0x62b664(0x2a5)](_0x62b664(0x2d7))&&_0x5eedfc[_0x62b664(0x24d)]){this[_0x62b664(0x220)](_0x3e0960,{'val':![],'ack':!![]}),aiAgent[_0x62b664(0x248)](this);return;}if(_0x3e0960[_0x62b664(0x2a5)](_0x62b664(0x1da))&&_0x5eedfc['val']){this[_0x62b664(0x220)](_0x3e0960,{'val':![],'ack':!![]});if(this[_0x62b664(0x276)])aiAgent[_0x62b664(0x257)](this,pythonBridge);return;}if(_0x3e0960[_0x62b664(0x2a5)](_0x62b664(0x261))&&_0x5eedfc['val']){this[_0x62b664(0x220)](_0x3e0960,{'val':![],'ack':!![]}),aiAgent['sendMorningBriefing'](this);return;}if(_0x3e0960['includes'](_0x62b664(0x2b7))&&_0x5eedfc['val']){this[_0x62b664(0x220)](_0x3e0960,{'val':![],'ack':!![]}),aiAgent[_0x62b664(0x29e)](this);return;}if(_0x3e0960[_0x62b664(0x2a5)]('analysis.training.triggerSecurity')&&_0x5eedfc['val']){this[_0x62b664(0x220)](_0x3e0960,{'val':![],'ack':!![]});if(this[_0x62b664(0x276)])try{const _0x292a48=await this['getStateAsync'](_0x62b664(0x1ed));if(_0x292a48&&_0x292a48[_0x62b664(0x24d)]){const _0x3d7a4a=JSON[_0x62b664(0x26b)](_0x292a48[_0x62b664(0x24d)]);this[_0x62b664(0x1fd)](_0x62b664(0x2d6),{'val':_0x62b664(0x233),'ack':!![]}),pythonBridge[_0x62b664(0x1a9)](this,'TRAIN_SECURITY',{'sequences':_0x3d7a4a});}}catch(_0x4eafea){}return;}if(_0x3e0960[_0x62b664(0x2a5)](_0x62b664(0x2e2))&&_0x5eedfc['val']){this['setState'](_0x3e0960,{'val':![],'ack':!![]});if(this[_0x62b664(0x276)])try{const _0xbed355=await this['getStateAsync']('LTM.dailyDigests');if(_0xbed355&&_0xbed355[_0x62b664(0x24d)])pythonBridge[_0x62b664(0x1a9)](this,_0x62b664(0x23d),{'digests':JSON[_0x62b664(0x26b)](_0xbed355['val'])});}catch(_0x4f0752){}return;}if(_0x3e0960[_0x62b664(0x2a5)]('analysis.training.triggerEnergy')&&_0x5eedfc[_0x62b664(0x24d)]){this['setState'](_0x3e0960,{'val':![],'ack':!![]});if(this[_0x62b664(0x276)])try{const _0x431a7d=await this[_0x62b664(0x1ad)](_0x62b664(0x2ce));if(_0x431a7d&&_0x431a7d[_0x62b664(0x24d)])pythonBridge[_0x62b664(0x1a9)](this,'TRAIN_ENERGY',{'points':JSON['parse'](_0x431a7d[_0x62b664(0x24d)])});}catch(_0x175648){}return;}if(_0x3e0960[_0x62b664(0x2a5)](_0x62b664(0x27f))&&_0x5eedfc[_0x62b664(0x24d)]){this['setState'](_0x3e0960,{'val':![],'ack':!![]});if(this[_0x62b664(0x276)])try{const _0x2edd8c=await this[_0x62b664(0x1ad)](_0x62b664(0x1d5));if(_0x2edd8c&&_0x2edd8c[_0x62b664(0x24d)])pythonBridge['send'](this,_0x62b664(0x215),{'events':JSON[_0x62b664(0x26b)](_0x2edd8c[_0x62b664(0x24d)])});}catch(_0x900e03){}return;}if(_0x3e0960['includes'](_0x62b664(0x218))&&_0x5eedfc[_0x62b664(0x24d)]){this['setState'](_0x3e0960,{'val':![],'ack':!![]}),topology[_0x62b664(0x1f2)](this);return;}}if(this[_0x62b664(0x2b3)]['presenceDevices']&&this['config'][_0x62b664(0x2d2)]['includes'](_0x3e0960)){await this['checkWifiPresence']();return;}const _0x292ae0=(this[_0x62b664(0x2b3)][_0x62b664(0x2c3)]||[])[_0x62b664(0x225)](_0x21f72=>_0x21f72['id']===_0x3e0960);if(_0x292ae0){const _0x546a88=await recorder[_0x62b664(0x1f6)](this,_0x3e0960,_0x5eedfc,_0x292ae0);_0x546a88&&_0x546a88[_0x62b664(0x25e)]===_0x62b664(0x1fc)&&_0x546a88['location']&&this[_0x62b664(0x276)]&&deadMan[_0x62b664(0x284)](this,_0x546a88[_0x62b664(0x29d)]),_0x5eedfc[_0x62b664(0x24d)]&&(_0x5eedfc[_0x62b664(0x24d)]===!![]||_0x5eedfc[_0x62b664(0x24d)]===0x1||String(_0x5eedfc[_0x62b664(0x24d)])[_0x62b664(0x29a)]()===_0x62b664(0x2d8))&&(_0x292ae0[_0x62b664(0x25e)]&&(_0x292ae0[_0x62b664(0x25e)]['includes']('window')||_0x292ae0['type'][_0x62b664(0x2a5)](_0x62b664(0x2cd))||_0x292ae0[_0x62b664(0x25e)][_0x62b664(0x2a5)]('magnet'))&&this['analyzeWindowOpening'](_0x292ae0)),(_0x292ae0['type']===_0x62b664(0x221)||_0x292ae0['type']===_0x62b664(0x2a1))&&automation['cleanupGhostInterventions'](this);}}async[a0_0x21e0ef(0x2e6)](_0x148e35){const _0x383725=a0_0x21e0ef;if(!this['memoryCache']||Date[_0x383725(0x1d3)]()-this['bootTime']>0x493e0)return;if(!this['memoryCache'][_0x383725(0x2d3)]||!this[_0x383725(0x285)][_0x383725(0x1b2)])return;try{const _0x92539a=JSON[_0x383725(0x26b)](_0x148e35),_0x4227af=this[_0x383725(0x285)][_0x383725(0x2d3)];let _0xf7661a=![];for(const _0x2dbe0f in _0x4227af){if(_0x4227af[_0x2dbe0f]['includes']('AI')&&_0x92539a[_0x2dbe0f]&&!_0x92539a[_0x2dbe0f][_0x383725(0x2a5)]('AI')){_0xf7661a=!![];break;}}_0xf7661a&&(this[_0x383725(0x1d6)][_0x383725(0x1d0)](_0x383725(0x279)),await this['setStateAsync'](_0x383725(0x2a7),{'val':JSON[_0x383725(0x1f4)](this['memoryCache'][_0x383725(0x1b2)]),'ack':!![]}),await this[_0x383725(0x1fd)](_0x383725(0x1bc),{'val':JSON['stringify'](this[_0x383725(0x285)][_0x383725(0x2d3)]),'ack':!![]}));}catch(_0x2b7d80){}}async[a0_0x21e0ef(0x266)](_0x10f171){const _0x3d4b2d=a0_0x21e0ef;if(typeof _0x10f171==='object'&&_0x10f171[_0x3d4b2d(0x22a)]){if(_0x10f171[_0x3d4b2d(0x28a)]===_0x3d4b2d(0x20c))try{const _0x99f0c6=await automation['scanThermostats'](this);this['sendTo'](_0x10f171[_0x3d4b2d(0x212)],_0x10f171[_0x3d4b2d(0x28a)],{'success':!![],'results':_0x99f0c6},_0x10f171[_0x3d4b2d(0x1d1)]);}catch(_0x3c93dd){this[_0x3d4b2d(0x273)](_0x10f171['from'],_0x10f171[_0x3d4b2d(0x28a)],{'success':![],'error':_0x3c93dd[_0x3d4b2d(0x22a)]},_0x10f171[_0x3d4b2d(0x1d1)]);}else{if(_0x10f171[_0x3d4b2d(0x28a)]===_0x3d4b2d(0x206))try{const {current_temps:_0x312f97,t_out:_0x28ff49,targets:_0x583402,t_forecast:_0x3f2088}=_0x10f171[_0x3d4b2d(0x22a)],_0x196df3=[];let _0x16e8ff={};try{const _0x3523fd=await this['getStateAsync'](_0x3d4b2d(0x1ae));if(_0x3523fd&&_0x3523fd['val']){const _0x5c2689=JSON[_0x3d4b2d(0x26b)](_0x3523fd['val']);_0x16e8ff=_0x5c2689[_0x3d4b2d(0x2a9)]||_0x5c2689;}}catch(_0x4a9ae6){}const _0x2cc846=_0x3f2088!==undefined&&_0x3f2088!==null?(_0x28ff49+_0x3f2088)/0x2:_0x28ff49;for(const [_0x5684e7,_0x5c1cd7]of Object[_0x3d4b2d(0x2ca)](_0x312f97)){const _0xfc0530=_0x583402[_0x5684e7]||0x15;if(_0x5c1cd7<=_0xfc0530)continue;let _0x4f1081=_0x16e8ff[_0x5684e7]||-0.5;if(_0x4f1081>=0x0)_0x4f1081=-0.5;const _0x22faeb=Math[_0x3d4b2d(0x21c)](_0x4f1081),_0x590c4b=_0x5c1cd7-_0xfc0530;let _0x52595b=Math[_0x3d4b2d(0x1ea)](_0x590c4b/_0x22faeb*0x3c);const _0x247753=_0x5c1cd7-_0x28ff49,_0x554fe6=_0x5c1cd7-_0x2cc846;if(_0x554fe6!==0x0&&_0x247753!==0x0){const _0x3cd3b3=_0x247753/_0x554fe6;_0x52595b=Math[_0x3d4b2d(0x1ea)](_0x52595b*_0x3cd3b3);}if(_0x52595b>0xf){if(_0x52595b>0xf0)_0x52595b=0xf0;_0x196df3['push']({'room':_0x5684e7,'minutes_safe':_0x52595b,'target':_0xfc0530,'current':_0x5c1cd7,'savings_msg':_0x3d4b2d(0x1b9)+_0x52595b+_0x3d4b2d(0x222)});}}_0x196df3[_0x3d4b2d(0x1fb)]((_0x21a80a,_0x5b0e95)=>_0x5b0e95[_0x3d4b2d(0x1c0)]-_0x21a80a['minutes_safe']),this['sendTo'](_0x10f171[_0x3d4b2d(0x212)],_0x10f171[_0x3d4b2d(0x28a)],{'success':!![],'proposals':_0x196df3},_0x10f171[_0x3d4b2d(0x1d1)]);}catch(_0x2b29c3){this[_0x3d4b2d(0x273)](_0x10f171[_0x3d4b2d(0x212)],_0x10f171[_0x3d4b2d(0x28a)],{'success':![],'error':_0x2b29c3['message']},_0x10f171[_0x3d4b2d(0x1d1)]);}else{if(_0x10f171['command']==='resetRLPenalty')try{const _0xd08479=_0x10f171[_0x3d4b2d(0x22a)]['key'],_0x433259=_0x3d4b2d(0x25f),_0x5cb6b7=await this['getStateAsync'](_0x433259);let _0x1c185d={};if(_0x5cb6b7&&_0x5cb6b7['val'])try{_0x1c185d=JSON[_0x3d4b2d(0x26b)](_0x5cb6b7[_0x3d4b2d(0x24d)]);}catch(_0x440f77){}_0xd08479&&_0x1c185d[_0xd08479]?(delete _0x1c185d[_0xd08479],await this['setStateAsync'](_0x433259,{'val':JSON[_0x3d4b2d(0x1f4)](_0x1c185d),'ack':!![]}),this['log']['info'](_0x3d4b2d(0x24a)+_0xd08479+_0x3d4b2d(0x2dc)),this[_0x3d4b2d(0x273)](_0x10f171[_0x3d4b2d(0x212)],_0x10f171[_0x3d4b2d(0x28a)],{'success':!![]},_0x10f171[_0x3d4b2d(0x1d1)])):this['sendTo'](_0x10f171['from'],_0x10f171[_0x3d4b2d(0x28a)],{'success':![],'error':_0x3d4b2d(0x237)},_0x10f171[_0x3d4b2d(0x1d1)]);}catch(_0x282ad0){this['sendTo'](_0x10f171[_0x3d4b2d(0x212)],_0x10f171[_0x3d4b2d(0x28a)],{'success':![],'error':_0x282ad0[_0x3d4b2d(0x22a)]},_0x10f171[_0x3d4b2d(0x1d1)]);}else{if(_0x10f171[_0x3d4b2d(0x28a)]===_0x3d4b2d(0x24c))await this[_0x3d4b2d(0x1fd)](_0x3d4b2d(0x2c0),{'val':![],'ack':!![]}),await this[_0x3d4b2d(0x1fd)]('analysis.automation.description',{'val':'','ack':!![]}),await this[_0x3d4b2d(0x1fd)]('analysis.automation.targetId',{'val':'','ack':!![]}),this['sendTo'](_0x10f171['from'],_0x10f171[_0x3d4b2d(0x28a)],{'success':!![]},_0x10f171[_0x3d4b2d(0x1d1)]);else{if(_0x10f171[_0x3d4b2d(0x28a)]===_0x3d4b2d(0x28b)){const {targetId:_0x41083c,targetValue:_0x5b5771}=_0x10f171[_0x3d4b2d(0x22a)];await this[_0x3d4b2d(0x1fd)](_0x3d4b2d(0x2c0),{'val':!![],'ack':!![]}),await this[_0x3d4b2d(0x1fd)](_0x3d4b2d(0x217),{'val':_0x3d4b2d(0x1eb),'ack':!![]}),await this[_0x3d4b2d(0x1fd)](_0x3d4b2d(0x2af),{'val':_0x41083c,'ack':!![]}),await this[_0x3d4b2d(0x1fd)](_0x3d4b2d(0x255),{'val':String(_0x5b5771),'ack':!![]}),this[_0x3d4b2d(0x273)](_0x10f171[_0x3d4b2d(0x212)],_0x10f171[_0x3d4b2d(0x28a)],{'success':!![]},_0x10f171[_0x3d4b2d(0x1d1)]);}else{if(_0x10f171['command']===_0x3d4b2d(0x29f))try{const _0x1c54fd=_0x10f171[_0x3d4b2d(0x22a)][_0x3d4b2d(0x21d)];if(!_0x1c54fd)throw new Error(_0x3d4b2d(0x259));const _0xcf0f5b=new GoogleGenerativeAI(_0x1c54fd),_0x54efe=_0xcf0f5b[_0x3d4b2d(0x264)]({'model':GEMINI_MODEL}),_0x186e26=await _0x54efe[_0x3d4b2d(0x2a4)](_0x3d4b2d(0x200)),_0x179c79=await _0x186e26['response'];if(_0x179c79[_0x3d4b2d(0x287)]())this[_0x3d4b2d(0x273)](_0x10f171[_0x3d4b2d(0x212)],_0x10f171['command'],{'success':!![],'message':_0x3d4b2d(0x240)},_0x10f171[_0x3d4b2d(0x1d1)]);else throw new Error(_0x3d4b2d(0x2b8));}catch(_0x50f0dd){this['sendTo'](_0x10f171[_0x3d4b2d(0x212)],_0x10f171[_0x3d4b2d(0x28a)],{'success':![],'message':_0x50f0dd[_0x3d4b2d(0x22a)]},_0x10f171[_0x3d4b2d(0x1d1)]);}else{if(_0x10f171[_0x3d4b2d(0x28a)]===_0x3d4b2d(0x235))try{const _0x318462=await scanner[_0x3d4b2d(0x2e1)](this,_0x10f171['message']||{});this['sendTo'](_0x10f171['from'],_0x10f171[_0x3d4b2d(0x28a)],{'success':!![],'devices':_0x318462},_0x10f171[_0x3d4b2d(0x1d1)]);}catch(_0x378c1d){this[_0x3d4b2d(0x273)](_0x10f171[_0x3d4b2d(0x212)],_0x10f171[_0x3d4b2d(0x28a)],{'success':![],'error':_0x378c1d[_0x3d4b2d(0x22a)]},_0x10f171[_0x3d4b2d(0x1d1)]);}else{if(_0x10f171[_0x3d4b2d(0x28a)]==='updateTopologyMatrix')try{const {matrix:_0x301521}=_0x10f171[_0x3d4b2d(0x22a)],_0x5891a4=await this[_0x3d4b2d(0x1ad)]('analysis.topology.structure');if(_0x5891a4&&_0x5891a4[_0x3d4b2d(0x24d)]){const _0x2e5e0b=JSON[_0x3d4b2d(0x26b)](_0x5891a4[_0x3d4b2d(0x24d)]);_0x2e5e0b['matrix']=_0x301521,_0x2e5e0b[_0x3d4b2d(0x2c8)]=Date[_0x3d4b2d(0x1d3)](),await this[_0x3d4b2d(0x1fd)]('analysis.topology.structure',{'val':JSON[_0x3d4b2d(0x1f4)](_0x2e5e0b),'ack':!![]}),pythonBridge[_0x3d4b2d(0x1a9)](this,_0x3d4b2d(0x1ef),_0x2e5e0b);}this[_0x3d4b2d(0x273)](_0x10f171[_0x3d4b2d(0x212)],_0x10f171[_0x3d4b2d(0x28a)],{'success':!![]},_0x10f171['callback']);}catch(_0x3a6537){this[_0x3d4b2d(0x1d6)][_0x3d4b2d(0x2f4)](_0x3a6537);}else{if(_0x10f171[_0x3d4b2d(0x28a)]===_0x3d4b2d(0x1b7))this[_0x3d4b2d(0x273)](_0x10f171['from'],_0x10f171[_0x3d4b2d(0x28a)],{'success':!![],'dailyDigests':this[_0x3d4b2d(0x299)]||[],'analysisHistory':this['analysisHistory']||[]},_0x10f171[_0x3d4b2d(0x1d1)]);else{if(_0x10f171[_0x3d4b2d(0x28a)]==='getOverviewData'){const _0x4017ce=this[_0x3d4b2d(0x299)][_0x3d4b2d(0x271)],_0x13ba6b=new Array(0x18)[_0x3d4b2d(0x230)](0x0),_0x234ae6=new Date()[_0x3d4b2d(0x1e9)](0x0,0x0,0x0,0x0);this[_0x3d4b2d(0x297)]&&this[_0x3d4b2d(0x297)]['forEach'](_0x5a0217=>{const _0x58f106=_0x3d4b2d;if(_0x5a0217[_0x58f106(0x2ab)]>=_0x234ae6){const _0x2e435a=new Date(_0x5a0217[_0x58f106(0x2ab)])[_0x58f106(0x211)]();if(_0x2e435a>=0x0&&_0x2e435a<0x18)_0x13ba6b[_0x2e435a]++;}});let _0x4160a3=![],_0x193027='',_0x4d9658='',_0x576e2e='';try{const _0x2b63bc=await this[_0x3d4b2d(0x1ad)]('analysis.automation.patternDetected');if(_0x2b63bc&&_0x2b63bc[_0x3d4b2d(0x24d)]){_0x4160a3=!![];const _0x44517b=await this[_0x3d4b2d(0x1ad)]('analysis.automation.description');_0x193027=_0x44517b?_0x44517b['val']:'';const _0x4eaca9=await this[_0x3d4b2d(0x1ad)]('analysis.automation.targetId');_0x4d9658=_0x4eaca9?_0x4eaca9[_0x3d4b2d(0x24d)]:'';const _0x30e236=await this[_0x3d4b2d(0x1ad)](_0x3d4b2d(0x255));_0x576e2e=_0x30e236?_0x30e236['val']:'';}}catch(_0x36d5df){}const _0x83c0e=await this[_0x3d4b2d(0x2ed)](),_0x35e855=(this[_0x3d4b2d(0x2b3)]['devices']||[])[_0x3d4b2d(0x2c2)](_0x477042=>_0x477042[_0x3d4b2d(0x2bf)]),_0x35cf0f=_0x83c0e&&_0x35e855;let _0x4ea737='';try{const _0x236b17=await this[_0x3d4b2d(0x1ad)](_0x3d4b2d(0x205));if(_0x236b17&&_0x236b17['val'])_0x4ea737=_0x236b17[_0x3d4b2d(0x24d)];}catch(_0x307125){}this[_0x3d4b2d(0x273)](_0x10f171[_0x3d4b2d(0x212)],_0x10f171[_0x3d4b2d(0x28a)],{'success':!![],'eventHistory':this[_0x3d4b2d(0x297)][_0x3d4b2d(0x2b1)](0x0,0xf),'stats':{'digestCount':_0x4017ce,'isPresent':this['isPresent'],'hourlyActivity':_0x13ba6b,'solarActive':_0x35cf0f,'presenceWho':_0x4ea737},'automation':{'detected':_0x4160a3,'description':_0x193027,'targetId':_0x4d9658,'targetValue':_0x576e2e}},_0x10f171[_0x3d4b2d(0x1d1)]);}else{if(_0x10f171[_0x3d4b2d(0x28a)]===_0x3d4b2d(0x1d8)){const _0x4e3fea=await this['getForeignObjectsAsync']('enum.functions.*','enum'),_0x241cf1=[];if(_0x4e3fea)for(const _0x576a87 in _0x4e3fea){const _0xc23023=_0x4e3fea[_0x576a87],_0x399a15=(_0xc23023[_0x3d4b2d(0x238)]&&typeof _0xc23023[_0x3d4b2d(0x238)][_0x3d4b2d(0x280)]===_0x3d4b2d(0x1b1)?_0xc23023[_0x3d4b2d(0x238)][_0x3d4b2d(0x280)]['de']:_0xc23023['common'][_0x3d4b2d(0x280)])||_0xc23023[_0x3d4b2d(0x238)]['name'];_0x241cf1[_0x3d4b2d(0x23a)]({'id':_0x576a87,'name':_0x399a15});}const _0xfce6a0=await this['getForeignObjectsAsync'](_0x3d4b2d(0x1f1),_0x3d4b2d(0x2d1)),_0x24c026=[];if(_0xfce6a0)for(const _0x270349 in _0xfce6a0){const _0x1838f3=_0xfce6a0[_0x270349],_0x3e492b=(_0x1838f3['common']&&typeof _0x1838f3[_0x3d4b2d(0x238)]['name']===_0x3d4b2d(0x1b1)?_0x1838f3[_0x3d4b2d(0x238)][_0x3d4b2d(0x280)]['de']:_0x1838f3[_0x3d4b2d(0x238)][_0x3d4b2d(0x280)])||_0x270349[_0x3d4b2d(0x1bf)]('.')['pop']();_0x24c026['push'](_0x3e492b);}this[_0x3d4b2d(0x273)](_0x10f171[_0x3d4b2d(0x212)],_0x10f171[_0x3d4b2d(0x28a)],{'success':!![],'enums':_0x241cf1,'rooms':_0x24c026},_0x10f171[_0x3d4b2d(0x1d1)]);}else{if(_0x10f171['command']===_0x3d4b2d(0x202))try{let _0x2bdfdf=_0x3d4b2d(0x1cd),_0x5151b5='Kein\x20Kalender-Adapter';if(this[_0x3d4b2d(0x2b3)][_0x3d4b2d(0x1bb)]){const _0x5a0d32=await recorder[_0x3d4b2d(0x245)](this);_0x2bdfdf=_0x5a0d32!==null?_0x5a0d32+'Â°C':_0x3d4b2d(0x265);}if(this['config']['calendarInstance']){const _0x5a20a5=await this[_0x3d4b2d(0x210)](_0x3d4b2d(0x24b)+this[_0x3d4b2d(0x2b3)]['calendarInstance']);_0x5151b5=_0x5a20a5?'Verbunden':_0x3d4b2d(0x2f6);}this['sendTo'](_0x10f171[_0x3d4b2d(0x212)],_0x10f171[_0x3d4b2d(0x28a)],{'success':!![],'weather':_0x2bdfdf,'calendar':_0x5151b5},_0x10f171[_0x3d4b2d(0x1d1)]);}catch(_0x2d5046){this[_0x3d4b2d(0x273)](_0x10f171[_0x3d4b2d(0x212)],_0x10f171[_0x3d4b2d(0x28a)],{'success':![],'error':_0x2d5046[_0x3d4b2d(0x22a)]},_0x10f171['callback']);}else{if(_0x10f171[_0x3d4b2d(0x28a)]===_0x3d4b2d(0x1d9))try{const _0x5862fd=_0x10f171[_0x3d4b2d(0x22a)]['instance'],_0x346fcc=await this[_0x3d4b2d(0x296)](_0x5862fd+_0x3d4b2d(0x2e0));let _0x167088=[];if(_0x346fcc&&_0x346fcc[_0x3d4b2d(0x24d)]){const _0x4f590d=JSON[_0x3d4b2d(0x26b)](_0x346fcc[_0x3d4b2d(0x24d)]),_0x547a96=new Set();Array[_0x3d4b2d(0x26f)](_0x4f590d)&&_0x4f590d['forEach'](_0x38bd4c=>{const _0x2a9e74=_0x3d4b2d;if(_0x38bd4c[_0x2a9e74(0x2b6)])_0x547a96[_0x2a9e74(0x27c)](_0x38bd4c[_0x2a9e74(0x2b6)]);else{if(_0x38bd4c['calendarName'])_0x547a96[_0x2a9e74(0x27c)](_0x38bd4c[_0x2a9e74(0x1cf)]);}}),_0x167088=Array['from'](_0x547a96)[_0x3d4b2d(0x1fb)]();}if(_0x167088[_0x3d4b2d(0x271)]===0x0)_0x167088=[_0x3d4b2d(0x2ee)];this[_0x3d4b2d(0x273)](_0x10f171[_0x3d4b2d(0x212)],_0x10f171['command'],{'success':!![],'names':_0x167088},_0x10f171['callback']);}catch(_0x291a67){this[_0x3d4b2d(0x273)](_0x10f171[_0x3d4b2d(0x212)],_0x10f171[_0x3d4b2d(0x28a)],{'success':![],'error':_0x291a67[_0x3d4b2d(0x22a)]},_0x10f171[_0x3d4b2d(0x1d1)]);}else{if(_0x10f171[_0x3d4b2d(0x28a)]===_0x3d4b2d(0x1bd))try{await setup[_0x3d4b2d(0x26e)](this,_0x3d4b2d(0x1e1),![],![]),this[_0x3d4b2d(0x273)](_0x10f171[_0x3d4b2d(0x212)],_0x10f171[_0x3d4b2d(0x28a)],{'success':!![],'message':_0x3d4b2d(0x224)},_0x10f171[_0x3d4b2d(0x1d1)]);}catch(_0x7c032c){this[_0x3d4b2d(0x1d6)][_0x3d4b2d(0x2f4)]('Notification\x20Test\x20Failed:\x20'+_0x7c032c[_0x3d4b2d(0x22a)]),this['sendTo'](_0x10f171[_0x3d4b2d(0x212)],_0x10f171[_0x3d4b2d(0x28a)],{'success':![],'message':'Fehler:\x20'+_0x7c032c['message']},_0x10f171[_0x3d4b2d(0x1d1)]);}}}}}}}}}}}}}}}}async[a0_0x21e0ef(0x1be)](){const _0x47b9f7=a0_0x21e0ef;try{const _0x1b32f2=await this[_0x47b9f7(0x1ad)](setup[_0x47b9f7(0x2f5)]);_0x1b32f2&&_0x1b32f2['val']&&Object[_0x47b9f7(0x20d)](setup[_0x47b9f7(0x268)])[_0x47b9f7(0x2a5)](_0x1b32f2[_0x47b9f7(0x24d)])?this[_0x47b9f7(0x274)]=_0x1b32f2[_0x47b9f7(0x24d)]:(this[_0x47b9f7(0x274)]=setup['SYSTEM_MODES'][_0x47b9f7(0x1e2)],await this['setStateAsync'](setup['SYSTEM_DP_MODE'],{'val':setup[_0x47b9f7(0x268)]['NORMAL'],'ack':!![]}));}catch(_0x54c8ea){this[_0x47b9f7(0x274)]=setup[_0x47b9f7(0x268)][_0x47b9f7(0x1e2)];}}async['checkWifiPresence'](){const _0x24d257=a0_0x21e0ef;try{const _0x312447=this[_0x24d257(0x2b3)][_0x24d257(0x2d2)]||[];let _0x56e595=![];const _0xe815df=[];for(const _0x585669 of _0x312447){try{const _0x35f9f1=await this[_0x24d257(0x296)](_0x585669);_0x35f9f1&&(_0x35f9f1['val']===!![]||_0x35f9f1['val']===_0x24d257(0x1dc)||_0x35f9f1[_0x24d257(0x24d)]===0x1)&&(_0x56e595=!![],_0xe815df['push'](_0x585669));}catch(_0x95bfe8){}}return await this[_0x24d257(0x1fd)](_0x24d257(0x205),{'val':_0xe815df[_0x24d257(0x21e)](',\x20'),'ack':!![]}),_0x56e595&&(this[_0x24d257(0x2db)]&&(this[_0x24d257(0x1d6)][_0x24d257(0x1d0)](_0x24d257(0x1de)),recorder[_0x24d257(0x293)](this)),!this[_0x24d257(0x2cb)]&&this[_0x24d257(0x274)]===setup[_0x24d257(0x268)][_0x24d257(0x1e2)]&&await recorder[_0x24d257(0x203)](this,!![])),_0x56e595;}catch(_0x104889){return![];}}async[a0_0x21e0ef(0x1e8)](){const _0x3759c1=a0_0x21e0ef;this[_0x3759c1(0x1d6)][_0x3759c1(0x24f)](_0x3759c1(0x2ad)),await aiAgent['runGeminiAnalysis'](this),this[_0x3759c1(0x2bb)](),this[_0x3759c1(0x1e4)](),this['triggerEnergyPrediction']();}async[a0_0x21e0ef(0x2ed)](){const _0x33a4ec=a0_0x21e0ef,_0x2f7144=['weatherunderground.0','accuweather.0',_0x33a4ec(0x291)],_0x55ac44=['forecast.current.weather',_0x33a4ec(0x1a8),_0x33a4ec(0x260)];for(const _0x2115cf of _0x2f7144){for(const _0x4a6127 of _0x55ac44){try{const _0x207244=_0x2115cf+'.'+_0x4a6127,_0x4c6c02=await this['getForeignStateAsync'](_0x207244);if(_0x4c6c02&&_0x4c6c02[_0x33a4ec(0x24d)]){const _0x727b3a=String(_0x4c6c02[_0x33a4ec(0x24d)])[_0x33a4ec(0x29a)]();if(_0x727b3a['includes']('sonn')||_0x727b3a[_0x33a4ec(0x2a5)](_0x33a4ec(0x26c))||_0x727b3a[_0x33a4ec(0x2a5)](_0x33a4ec(0x262))||_0x727b3a[_0x33a4ec(0x2a5)]('clear')||_0x727b3a[_0x33a4ec(0x2a5)](_0x33a4ec(0x26d)))return!![];}}catch(_0x572380){}}}return![];}[a0_0x21e0ef(0x1e4)](){const _0x225b42=a0_0x21e0ef;if(!this[_0x225b42(0x276)])return;try{this[_0x225b42(0x282)](_0x225b42(0x1ed),(_0x53414b,_0x516a0e)=>{const _0x45f570=_0x225b42;_0x516a0e&&_0x516a0e[_0x45f570(0x24d)]&&pythonBridge[_0x45f570(0x1a9)](this,_0x45f570(0x1b4),{'sequences':JSON['parse'](_0x516a0e[_0x45f570(0x24d)])});});}catch(_0x76bc39){}}async[a0_0x21e0ef(0x1c7)](){const _0x3a4ac6=a0_0x21e0ef;if(!this[_0x3a4ac6(0x276)])return;try{const _0x245719=await recorder[_0x3a4ac6(0x245)](this);if(_0x245719===null)return;const _0x5a3b3f={},_0x5caa16={},_0x54e4e4=this[_0x3a4ac6(0x2b3)][_0x3a4ac6(0x2c3)]||[];for(const _0x162602 of _0x54e4e4){if(_0x162602[_0x3a4ac6(0x25e)]===_0x3a4ac6(0x221)&&_0x162602[_0x3a4ac6(0x29d)]){const _0xcd96f3=this[_0x3a4ac6(0x269)][_0x162602['id']];if(_0xcd96f3!==undefined)_0x5a3b3f[_0x162602[_0x3a4ac6(0x29d)]]=_0xcd96f3;if(_0x162602[_0x3a4ac6(0x2bf)])_0x5caa16[_0x162602[_0x3a4ac6(0x29d)]]=!![];}}const _0x26f9a6=await this[_0x3a4ac6(0x2ed)]();let _0x30516e={};try{const _0x3bae81=await this[_0x3a4ac6(0x1ad)](_0x3a4ac6(0x253));if(_0x3bae81&&_0x3bae81[_0x3a4ac6(0x24d)])_0x30516e=JSON['parse'](_0x3bae81[_0x3a4ac6(0x24d)]);}catch(_0x280085){}Object['keys'](_0x5a3b3f)[_0x3a4ac6(0x271)]>0x0&&(pythonBridge[_0x3a4ac6(0x1a9)](this,_0x3a4ac6(0x239),{'current_temps':_0x5a3b3f,'t_out':_0x245719,'is_sunny':_0x26f9a6,'solar_flags':_0x5caa16,'warmup_targets':_0x30516e}),pythonBridge[_0x3a4ac6(0x1a9)](this,'OPTIMIZE_ENERGY',{'current_temps':_0x5a3b3f,'t_out':_0x245719,'targets':{}}));}catch(_0x1dda14){}}[a0_0x21e0ef(0x2bb)](){const _0xc252d9=a0_0x21e0ef;if(!this[_0xc252d9(0x2e4)]||this[_0xc252d9(0x2e4)]['length']===0x0)return;const _0x3c8851=new Array(0x60)[_0xc252d9(0x230)](0x0),_0x2f6edc=new Date()[_0xc252d9(0x1e9)](0x0,0x0,0x0,0x0);this[_0xc252d9(0x2e4)]['forEach'](_0x3a3592=>{const _0x107577=_0xc252d9,_0x2c1260=new Date(_0x3a3592[_0x107577(0x2ab)]);if(_0x2c1260['getTime']()>=_0x2f6edc){const _0x111b78=_0x2c1260[_0x107577(0x211)](),_0x2b80ea=_0x2c1260[_0x107577(0x2e8)](),_0x13ace5=_0x111b78*0x4+Math[_0x107577(0x1ea)](_0x2b80ea/0xf);if(_0x13ace5>=0x0&&_0x13ace5<0x60)_0x3c8851[_0x13ace5]++;}}),this['setStateAsync']('analysis.health.todayVector',{'val':JSON['stringify'](_0x3c8851),'ack':!![]});}[a0_0x21e0ef(0x2b0)](){const _0x50b798=a0_0x21e0ef;if(!this[_0x50b798(0x299)]||this[_0x50b798(0x299)][_0x50b798(0x271)]<0x2)return;const _0x471131=this[_0x50b798(0x299)]['map'](_0x2b6237=>{const _0x586fb8=_0x50b798,_0xdf0631=(_0x2b6237[_0x586fb8(0x283)]||'')[_0x586fb8(0x29a)]();return ACTIVITY_LEVEL_MAP[_0xdf0631]||0x32;});pythonBridge[_0x50b798(0x1a9)](this,_0x50b798(0x22b),{'values':_0x471131,'tag':'Activity-Level'});}async[a0_0x21e0ef(0x2ba)](_0x48ba3f){const _0x4a9d4e=a0_0x21e0ef;if(_0x48ba3f==null||typeof _0x48ba3f!==_0x4a9d4e(0x20a))return;const _0x2479ea=Date['now']();this[_0x4a9d4e(0x2c7)][_0x4a9d4e(0x23a)]({'ts':_0x2479ea,'val':_0x48ba3f}),this[_0x4a9d4e(0x2c7)]=this[_0x4a9d4e(0x2c7)]['filter'](_0x5d0ec3=>_0x2479ea-_0x5d0ec3['ts']<0x1388);if(this[_0x4a9d4e(0x294)])return;if(this[_0x4a9d4e(0x2b3)][_0x4a9d4e(0x2e3)]){const _0x234ea7=await this[_0x4a9d4e(0x296)](this[_0x4a9d4e(0x2b3)]['infrasoundArmingId']);if(_0x234ea7&&!_0x234ea7['val'])return;}const _0x5571be=this[_0x4a9d4e(0x2b3)]['infrasoundThreshold']||0.04;if(Math[_0x4a9d4e(0x21c)](_0x48ba3f)>=_0x5571be){this[_0x4a9d4e(0x1d6)][_0x4a9d4e(0x270)](_0x4a9d4e(0x2b9)+_0x48ba3f+'\x20hPa\x20(Limit:\x20'+_0x5571be+')'),await this[_0x4a9d4e(0x1fd)](_0x4a9d4e(0x1d4),{'val':!![],'ack':!![]});const _0x1aa5dd=this[_0x4a9d4e(0x2cb)];_0x1aa5dd?(this[_0x4a9d4e(0x1d6)][_0x4a9d4e(0x1d0)](_0x4a9d4e(0x25d)),this[_0x4a9d4e(0x28e)](_0x48ba3f,'INTERNAL')):(this[_0x4a9d4e(0x28e)](_0x48ba3f,'ALARM'),this['sendNotification']('ðŸš¨\x20DRUCKWELLEN-ALARM!\x20StÃ¤rke:\x20'+_0x48ba3f+_0x4a9d4e(0x23c))),this[_0x4a9d4e(0x294)]=!![],setTimeout(()=>{this['infrasoundLocked']=![];},0x2710);}}async[a0_0x21e0ef(0x28e)](_0x473d48,_0x303ed7='ALARM'){const _0x284d51=a0_0x21e0ef,_0x54c5c0=Date['now'](),_0x33dd0b=this[_0x284d51(0x2b3)][_0x284d51(0x2c3)]||[];setTimeout(async()=>{const _0x2b845b=_0x284d51;let _0x477396=null,_0x442c74=_0x2b845b(0x1c2);const _0x1d7f8e=[],_0x4fb197=_0x33dd0b[_0x2b845b(0x1b8)](_0x48b17b=>_0x48b17b['type']&&(_0x48b17b[_0x2b845b(0x25e)][_0x2b845b(0x2a5)](_0x2b845b(0x2aa))||_0x48b17b[_0x2b845b(0x25e)][_0x2b845b(0x2a5)]('door')||_0x48b17b[_0x2b845b(0x25e)][_0x2b845b(0x2a5)](_0x2b845b(0x277))||_0x48b17b['type']['includes'](_0x2b845b(0x2df)))||_0x48b17b[_0x2b845b(0x1f0)]&&(_0x48b17b['role'][_0x2b845b(0x2a5)](_0x2b845b(0x1db))||_0x48b17b[_0x2b845b(0x1f0)]['includes'](_0x2b845b(0x289))));for(const _0x289fe7 of _0x4fb197){try{const _0x1899f0=await this[_0x2b845b(0x296)](_0x289fe7['id']);if(_0x1899f0){if(_0x1899f0['ts']>=_0x54c5c0-0x7d0){_0x477396=_0x289fe7['name']||_0x289fe7['id'],_0x442c74=_0x2b845b(0x2f0)+_0x477396;break;}}}catch(_0x49f761){}}const _0x2bdc2e={'timestamp':_0x54c5c0,'pressure':_0x473d48,'isMatch':!!_0x477396,'explanation':_0x442c74,'type':_0x303ed7};await this[_0x2b845b(0x1ba)](_0x2bdc2e),this[_0x2b845b(0x1d6)][_0x2b845b(0x1d0)](_0x2b845b(0x1ab)+(!!_0x477396?_0x2b845b(0x29b):_0x2b845b(0x2e9)));},0x1388);}async[a0_0x21e0ef(0x2a2)](_0x37f2bc){const _0x544b16=a0_0x21e0ef,_0x1982d9=Date['now'](),_0x3d799c=_0x37f2bc[_0x544b16(0x280)]||_0x37f2bc['id'][_0x544b16(0x1bf)]('.')[_0x544b16(0x229)]();let _0x570e76=0x0;setTimeout(async()=>{const _0x5939d0=_0x544b16;this[_0x5939d0(0x2c7)][_0x5939d0(0x2a0)](_0xf69bb7=>{const _0x2718cd=_0x5939d0;_0xf69bb7['ts']>=_0x1982d9-0xfa0&&_0xf69bb7['ts']<=_0x1982d9+0x3e8&&(Math[_0x2718cd(0x21c)](_0xf69bb7[_0x2718cd(0x24d)])>Math[_0x2718cd(0x21c)](_0x570e76)&&(_0x570e76=_0xf69bb7[_0x2718cd(0x24d)]));});const _0x12a235=this['config'][_0x5939d0(0x1cb)]||0.04,_0x5799f7=Math[_0x5939d0(0x21c)](_0x570e76)>=_0x12a235,_0x4d7b83={'timestamp':_0x1982d9,'pressure':_0x570e76,'isMatch':_0x5799f7,'explanation':_0x5939d0(0x28d)+_0x3d799c,'type':_0x5939d0(0x2c6)};await this['appendToLog'](_0x4d7b83),this[_0x5939d0(0x1d6)][_0x5939d0(0x24f)](_0x5939d0(0x246)+_0x3d799c+_0x5939d0(0x1c1)+_0x570e76[_0x5939d0(0x2b5)](0x4)+_0x5939d0(0x20f)+_0x12a235+')');},0x1f4);}async[a0_0x21e0ef(0x1ba)](_0x32a512){const _0x19059e=a0_0x21e0ef;try{const _0x245e82=await this[_0x19059e(0x1ad)]('analysis.security.infrasoundLog');let _0x6712b3=[];if(_0x245e82&&_0x245e82[_0x19059e(0x24d)])_0x6712b3=JSON[_0x19059e(0x26b)](_0x245e82[_0x19059e(0x24d)]);_0x6712b3[_0x19059e(0x2cc)](_0x32a512);if(_0x6712b3['length']>0x14)_0x6712b3=_0x6712b3[_0x19059e(0x2b1)](0x0,0x14);await this['setStateAsync'](_0x19059e(0x2f1),{'val':JSON[_0x19059e(0x1f4)](_0x6712b3),'ack':!![]});}catch(_0x5e77c4){this[_0x19059e(0x1d6)]['error'](_0x19059e(0x1fa)+_0x5e77c4['message']);}}[a0_0x21e0ef(0x26e)](_0x51f740){const _0x5617be=a0_0x21e0ef;this[_0x5617be(0x2b3)][_0x5617be(0x25a)]&&this['config'][_0x5617be(0x1e6)]&&this[_0x5617be(0x273)](this[_0x5617be(0x2b3)][_0x5617be(0x1e6)],_0x5617be(0x1a9),{'message':_0x51f740,'title':_0x5617be(0x2a3),'priority':0x1}),this['config']['notifyTelegramEnabled']&&this[_0x5617be(0x2b3)]['notifyTelegramInstance']&&this['sendTo'](this[_0x5617be(0x2b3)][_0x5617be(0x2ac)],_0x5617be(0x1a9),{'text':_0x51f740});}}function a0_0x45d4(_0x51cbb6,_0x4acb18){const _0x591569=a0_0x17f9();return a0_0x45d4=function(_0x4a4c00,_0x1e2be8){_0x4a4c00=_0x4a4c00-0x1a8;let _0x17f9da=_0x591569[_0x4a4c00];return _0x17f9da;},a0_0x45d4(_0x51cbb6,_0x4acb18);}if(require['main']!==module)module[a0_0x21e0ef(0x2b4)]=_0x33092b=>new CogniLiving(_0x33092b);else new CogniLiving();