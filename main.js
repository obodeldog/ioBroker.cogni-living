const a0_0x1ca316=a0_0x54c5;(function(_0x22d072,_0x2a4e50){const _0xdd28b1=a0_0x54c5,_0x1fd863=_0x22d072();while(!![]){try{const _0x486d30=-parseInt(_0xdd28b1(0x2e8))/0x1*(-parseInt(_0xdd28b1(0x2a0))/0x2)+parseInt(_0xdd28b1(0x238))/0x3+-parseInt(_0xdd28b1(0x280))/0x4*(parseInt(_0xdd28b1(0x244))/0x5)+-parseInt(_0xdd28b1(0x2d8))/0x6*(-parseInt(_0xdd28b1(0x249))/0x7)+-parseInt(_0xdd28b1(0x1ce))/0x8+-parseInt(_0xdd28b1(0x1b6))/0x9+parseInt(_0xdd28b1(0x2e9))/0xa;if(_0x486d30===_0x2a4e50)break;else _0x1fd863['push'](_0x1fd863['shift']());}catch(_0x33ef6b){_0x1fd863['push'](_0x1fd863['shift']());}}}(a0_0x362a,0xe152e));const a0_0x3c62d2=(function(){let _0x426147=!![];return function(_0x209dda,_0x4124a0){const _0x50bfc7=_0x426147?function(){const _0x3fe579=a0_0x54c5;if(_0x4124a0){const _0x24dc12=_0x4124a0[_0x3fe579(0x16d)](_0x209dda,arguments);return _0x4124a0=null,_0x24dc12;}}:function(){};return _0x426147=![],_0x50bfc7;};}()),a0_0x15a522=a0_0x3c62d2(this,function(){const _0x4faf9e=a0_0x54c5;return a0_0x15a522[_0x4faf9e(0x287)]()[_0x4faf9e(0x25c)](_0x4faf9e(0x2a9))[_0x4faf9e(0x287)]()['constructor'](a0_0x15a522)[_0x4faf9e(0x25c)](_0x4faf9e(0x2a9));});a0_0x15a522();'use strict';function a0_0x362a(){const _0x44fd72=['Fokus\x20auf\x20Komfort.','openweathermap','getHours','isArray','motion','\x0a\x20\x20\x20\x20ROLLE:\x20KI-Hausverwalter\x20&\x20Gesundheits-Assistent.\x0a\x20\x20\x20\x20PERSONA:\x20','automation.triggerAction','LTM.triggerDailyDigest','Kalender:\x20Deaktiviert','dutycycle','âœ…\x20User\x20confirmed\x20ALARM\x20via\x20Telegram.\x20Resetting\x20system.','\x20(Value:\x20','Trigger\x20Action\x20Now','close','summary','[PYTHON]\x20Failed\x20to\x20start\x20(is\x20python3\x20installed?):\x20','\x20=\x20','getDate','inactivityThresholdHours','occupancy','stdin','\x0a\x0a\x20\x20\x20\x20AUFGABE:\x0a\x20\x20\x20\x201.\x20Analysiere\x20auf\x20Gesundheitsrisiken\x20(Sturz,\x20InaktivitÃ¤t).\x0a\x20\x20\x20\x202.\x20Analysiere\x20auf\x20Komfort/Automatisierung\x20(\x22Butler\x22).\x20Erkennst\x20du\x20ein\x20Muster?\x20(z.B.\x20\x22Wenn\x20Bewegung\x20Flur,\x20dann\x20Licht\x20an\x22).\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20FORMAT\x20(JSON\x20Only!):\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x22isAlert\x22:\x20boolean,\x0a\x20\x20\x20\x20\x20\x20\x22alertReason\x22:\x20\x22string\x20(kurz)\x22,\x0a\x20\x20\x20\x20\x20\x20\x22isEmergency\x22:\x20boolean,\x0a\x20\x20\x20\x20\x20\x20\x22summary\x22:\x20\x22string\x20(Was\x20passiert\x20gerade?)\x22,\x0a\x20\x20\x20\x20\x20\x20\x22automationProposal\x22:\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22detected\x22:\x20boolean,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22description\x22:\x20\x22string\x20(Was\x20soll\x20automatisiert\x20werden?)\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22targetId\x22:\x20\x22string\x20(ioBroker\x20ID,\x20z.B.\x200_userdata.0.light)\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22targetValue\x22:\x20\x22any\x20(Wert,\x20z.B.\x20true\x20oder\x2050)\x22\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20','analysis.feedbackHistory','\x20(Length:\x20','button','Restlessness\x20Level','pop','loc','N/A\x20(Learning)','Party','namespace','LTM\x20Sched\x20Error:\x20','useWeather','subscribeForeignStatesAsync','ready','events.lastEvent','custom','Alert\x20Reason','WETTER:\x20Keine\x20Daten\x20gefunden','name','Target\x20ID','[RECORDER\x20DEBUG]\x20Ignored\x20Event\x20','indicator','exitTimer','reachable','getForeignObjectAsync','text.alarm','Wetter:\x20Deaktiviert','simple-api.','analysis.analysisHistory','Unknown','setObjectNotExistsAsync','.\x0a\x20\x20\x20\x20SYSTEM_MODE:\x20','uuid-not-found','livingContext','guest','licht','\x20(Value\x20is\x20falsy:\x20','role','\x20|\x20Status:\x20','Trigger\x20Digest','material.','ðŸ\x20Guardian\x20Diagnosis\x20(','log','instance','dimmer','LTM.driftAnalysis.driftDetails',').\x20Saving\x20to\x20Training\x20Data.','Feedback\x20Log','analysis.automation.targetValue','weatherunderground','object','set_temperature','Target\x20Value','systemUUID','):\x20','exports','.\x20KONTEXT:\x20','analysis.isAlert','response','Subscribing\x20to\x20','split','val','Description','analysis.automation.targetId','Drift\x20Details','analysis.health.sleepScore','number','warn','dependencyInstallInProgress','weatherunderground.0','âš ï¸\x20ALARM:\x20','selectedFunctionIds','KALENDER:\x20Keine\x20relevanten\x20Termine','health','WiFi\x20Presence\x20detected\x20->\x20Aborting\x20Exit\x20Timer.\x20User\x20is\x20present.','indexOf','_score','shutter','system.meta.uuid','Scanning\x20for\x20devices\x20(V8:\x20Whitelist\x20Priority)...','briefingJob','licenseKey','members','Lernphase\x20(','notifyTelegramEnabled','tÃ¼r','analysis.activitySummary','Processing\x20Status','Gast','prÃ¤senz','analysis.automation.patternDetected','events.history','expire','briefingTime','service.py','PRIORITÃ„T:\x20Sicherheit.','.forecast.current.temperature','Alarm','Gemini\x20Analysis\x20Error:\x20','data','lowbat','timestamp','status','window','Exit\x20Sensor\x20triggered\x20(','daswetter','apply','Urlaub','\x20min).','weather','system.isPresent','baselineDrift','endsWith','minDaysForBaseline','description','toLowerCase','notifyEmailInstance','driftAnalysisTimer','normal','substring','notifyEmailRecipient','brightness','exitGraceTimer','date','unshift','Last\x20raw\x20event','boolean','python_service','\x0aSTB:\x20','callback','onUnload','lastIndexOf','VACATION','Kein\x20API\x20Key!','sensor','longitude','heizung','Starting\x20Autopilot\x20(','includes','scriptProblem','subscribeStates','ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','onStateChange','send','Auto\x20Apply\x20Rule','ltmJob','weatherInstance','Error:\x20','notifyPushoverEnabled','power','onMessage','systemConfig','info','splice','/100,\x20AktivitÃ¤t\x20seit\x2004:00:\x20','analysisHistory','analysisInterval','_calName','.\x0a\x20\x20\x20\x20NOTFALL-KONTEXT:\x20','TREND_RESULT','party','thermostat','Started\x20at\x20','analysis.automation.triggerAction','Cogni-Living','\x20hours.\x20Potential\x20incapacitation.','analysis.health.restlessness','setpoint','N/A','[RECORDER\x20DEBUG]\x20Accepting\x20Event\x20','Generating\x20Morning\x20Briefing...','direction','Guardian:\x20Sending\x20','âš ï¸\x20Python\x20missing\x20dependencies.\x20Triggering\x20Auto-Install...','analysis.health.trendValue','config_pending','Entry\x20detected\x20via\x20','state','getGenerativeModel','12887460GpSMTI','generic','ANALYZE_TREND','\x20events)...','analysis.deviationFromBaseline','temperature','\x20for\x20interactive\x20buttons...','.Summary.Current','\x22\x20--break-system-packages','Trend\x20Diagnosis\x20(Python)','PRIORITÃ„T:\x20Gesundheit/AAL.','GUEST','Briefing\x20Sched\x20Error:\x20','find','lastCheck','Invalid\x20JSON\x20from\x20Python:\x20','KALENDER:\x20','LTM.trainingData','system.presenceWho','siren','driftDetails','.forecast.current.state','activityLevel','\x20|\x20','7404344yiQQpD','door','COGNI_REQUEST_CALL','analysis.history_debug_00','...','join','lock','LTM.processingStatus','kontakt','testApiKey','system.','COGNI_CONFIRM_OK','analysis.isEmergency','extendObjectAsync','map','[PYTHON]\x20Service\x20exited\x20with\x20code\x20','update','scriptEnabled','Trigger\x20Briefing\x20(Test)','parse','\x20sensors...','Raw\x20Log','modeResetJob','Gemini\x20Init\x20Error:\x20','getForeignStateAsync','config','Keine\x20Analyse.','Deviation','Vom\x20Benutzer\x20bestÃ¤tigt\x20(OK).','\x27\x20not\x20in\x20allowed\x20list)','[PYTHON\x20ERR]\x20','system.mode','No\x20instance','genAI','Error\x20reading\x20calendar\x20table:\x20','ðŸ¤–\x20BUTLER\x20AUTO-APPLY:\x20Executing\x20','stringify','LTM','Error\x20in\x20onMessage\x20command\x20','ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20','Who\x20is\x20present?','analysis.health','getStateAsync','communicate.request','Fehler:\x20','indicator.alarm.fire','analysisTimer','enum','isEmergency','geminiApiKey','System\x20Mode','lights','\x20days\x20of\x20activity\x20data\x20to\x20Python...','onReady','bind','BUTLER\x20Execution\x20Error:\x20','setState','analysis.automation.description','dailyDigests','[RECORDER]\x20Discarding\x20short\x20sequence\x20(Length:\x20','@iobroker/adapter-core','Adapter','analysis.alertReason','âœ…\x20Alarm\x20quittiert.\x20System\x20normal.','[RECORDER]\x20Sequence\x20finished\x20(Steps:\x20','push','cogni-living','getCalendarNames\x20Error:\x20','IGNORING\x20DUPLICATE\x20(Cached):\x20','scheduleJob','Normal','NORMAL','blind','level','sleepScore','analysis.comfortSummary','events.history_debug_00','rollladen','notifyPushoverInstance','command','WETTER\x20ERROR:\x20','Comfort\x20Summary','useCalendar','.\x0a\x20\x20\x20\x20WETTER:\x20','currentSystemMode','Morning\x20Briefing\x20sent.','forEach','native','LTM.driftAnalysis','telegram','Aktiv\x20(','Training\x20Data\x20Sets','isPresent','analysis.health.trendDiagnosis','LTM.driftAnalysis.baselineDrift','analysis.lastResult','ðŸ\x20Starting\x20Python\x20Sidecar:\x20','Gemini\x20AI\x20initialized.','time','length','toFixed','analysis.health.notes','Drift\x20Analysis','\x20*\x20*\x20*','Thermodynamic\x20Data\x20Points','value.health','4419246nsNlZM','presence','toISOString','some','json','details','getFullYear','channel','catch','common','humidity','flot.','5qCuzwd','.\x20DATEN:\x20Schlaf\x20','vacation','delObjectAsync','sound','8745989rGJpFt','targetValue','AI\x20Emergency\x20Status','setStateAsync','admin.','round','city','.\x0a\x20\x20\x20\x20KONTEXT:\x20','getTime','.\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20INPUT\x20DATEN\x20(Letzte\x20Events):\x0a\x20\x20\x20\x20','calendarSelection','child_process','startsWith','sendToAsync','testNotification','writable','generateContent','fault','Verbindung\x20erfolgreich!\x20Antwort:\x20','search','notifyTelegramRecipient','path','.forecast.current.temp','ltmStbWindowDays','Error\x20checking\x20WiFi:\x20','stdout','connection','PARTY','getOverviewData','sendTo','rssi','string','history.','Pattern\x20Detected','text','outdoorSensorId','accuweather','trim','PRO-','Health\x20&\x20Sleep\x20Analysis','lastAlertState','error','aiPersona','Event\x20History','Comfort\x20Suggestion','presenceDevices','ROLLE:\x20FÃ¼rsorglicher\x20Assistent.\x20AUFGABE:\x20Schreibe\x20eine\x20kurze,\x20beruhigende\x20\x22Guten\x20Morgen\x22-Nachricht.\x20PERSONA:\x20','filter','automationProposal','enum.functions.*','alertReason','.communicate.request','ðŸŒ…\x20Daily\x20Briefing:\x0a','KALENDER:\x20Keine\x20Daten','Array\x20of\x20completed\x20movement\x20paths\x20for\x20ML\x20training','2184300QFSJwO','actual_temperature','Briefing\x20Error:\x20','info.','analysis.trigger','triggerBriefing','ðŸš¨\x20EMERGENCY','toString','write','getLtmData','HARD\x20WATCHDOG:\x20No\x20sensor\x20activity\x20detected\x20for\x20','\x20presence\x20devices...','from','KI-Modell\x20nicht\x20initialisiert','getForeignObjectsAsync','simulateButler','isGracePeriodActive','currentposition','pythonProcess',')\x20-\x20FUNCTIONS\x20FIRST\x20ARCHITECTURE','application/json','ical.0','analysis.triggerBriefing','sort','inactivityMonitoringEnabled','Last\x20Result','ðŸ“¡\x20Hooking\x20into\x20','Guardian:\x20Not\x20enough\x20history\x20data\x20for\x20trend\x20analysis\x20yet.','Trend\x20Value\x20(%)','Reset\x20Sched\x20Error:\x20','stateChange','ltmDriftCheckIntervalHours','248630ltQbWg','type','analysis.automation','klima','notifyPushoverRecipient','enum.rooms.*','ðŸ“ž\x20User\x20requested\x20CALL\x20via\x20Telegram!','javascript.','switch','(((.+)+)+)+$','briefingEnabled','debug','ðŸ\x20Stopping\x20Python\x20Sidecar...','daswetter.0','Keiner','replace','retry','Sending\x20notification:\x20\x22','position','0\x203\x20*\x20*\x20*','LTM.driftAnalysis.lastCheck','icons-mfd.','rawEventLog','Success:\x20Compressed\x20','\x20events','geminiModel','targetId','.NextHours.Location_1.Day_1.current.symbol_desc','calendarInstance','LTM.trainingData.thermodynamics','event','node-schedule','now','System\x20Status\x20&\x20Control','ðŸ§ª\x20Simulating\x20Butler\x20Proposal:\x20','eventHistory','KALENDER\x20ERROR:\x20','sensorLastValues','Scheduling\x20Morning\x20Briefing\x20for\x20','cancel','LTM.baselineStatus','toLocaleString','version','values','valve','âŒ\x20AUTO-FIX\x20FAILED.\x20Manual\x20interaction\x20required.','.data.table','light','devices','ltmLtbWindowDays','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','analysis.automation.autoApply','bewegung','Skipped\x20(No\x20AI\x20or\x20Data)','Last\x20Check','analysis.automation.suggestedAction','6HQJQTQ','Error\x20reading\x20outdoor\x20sensor\x20','uuid','Event\x20received:\x20','Deaktiviert\x20(Pro-Feature)','value','lampe','fill','main','Motion\x20detected\x20inside.\x20Aborting\x20Exit\x20Timer.','Action','Say\x20Hello','Drift\x20Status','isProVersion','analysis.comfortSuggestion','PONG','1tjLUmk','9796600yGDVni','\x20(Type\x20\x27','message','.Current.Temperature','detected','ack','WETTER:\x20','Trigger\x20Analysis','isAlert','slice','online','@google/generative-ai','LTM.trainingData.sequences','location','setForeignStateAsync','âŒ\x20FREE\x20MODE','SIMULATION:\x20Test-Vorschlag\x20fÃ¼r\x20','.\x20ZUSATZ:\x20'];a0_0x362a=function(){return _0x44fd72;};return a0_0x362a();}const utils=require(a0_0x1ca316(0x20a)),{GoogleGenerativeAI}=require(a0_0x1ca316(0x2f4)),schedule=require(a0_0x1ca316(0x2bf)),{spawn,exec}=require(a0_0x1ca316(0x254)),path=require(a0_0x1ca316(0x25e)),HISTORY_MAX_SIZE=0x32,RAW_LOG_MAX_SIZE=0x5dc,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL='models/gemini-flash-latest',LTM_SCHEDULE=a0_0x1ca316(0x2b3),MODE_RESET_SCHEDULE='0\x204\x20*\x20*\x20*',ANALYSIS_HISTORY_MAX_SIZE=0x64,EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,SEQUENCE_TIMEOUT_MS=0x5*0x3c*0x3e8,MAX_TRAINING_SET_SIZE=0x1f4,THERMO_LOG_SIZE=0x3e8,LTM_DP_RAW_LOG='LTM.rawEventLog',LTM_DP_DAILY_DIGESTS='LTM.dailyDigests',LTM_DP_STATUS=a0_0x1ca316(0x1d5),LTM_DP_TRIGGER_DIGEST=a0_0x1ca316(0x302),LTM_DP_BASELINE_STATUS=a0_0x1ca316(0x2c8),LTM_DP_DRIFT_CHANNEL=a0_0x1ca316(0x226),LTM_DP_DRIFT_STATUS=a0_0x1ca316(0x22c),LTM_DP_DRIFT_DETAILS=a0_0x1ca316(0x33d),LTM_DP_DRIFT_LAST_CHECK=a0_0x1ca316(0x2b4),SYSTEM_DP_MODE=a0_0x1ca316(0x1ed),HARD_IGNORE_TERMS=[a0_0x1ca316(0x18e),a0_0x1ca316(0x1df),a0_0x1ca316(0x1de),'unreach',a0_0x1ca316(0x167),a0_0x1ca316(0x267),a0_0x1ca316(0x263),'maintenance','error',a0_0x1ca316(0x25a),'working',a0_0x1ca316(0x1ae),'stick_unreach',a0_0x1ca316(0x1b2),a0_0x1ca316(0x304),'firmware',a0_0x1ca316(0x327),'link_quality'],BAD_NAMES=['targetposition',a0_0x1ca316(0x291),'state',a0_0x1ca316(0x217),a0_0x1ca316(0x2dd),a0_0x1ca316(0x17c),'on','off',a0_0x1ca316(0x2a8),a0_0x1ca316(0x2b2),a0_0x1ca316(0x35d),a0_0x1ca316(0x216),'cover','status','motion','presence',a0_0x1ca316(0x30e),a0_0x1ca316(0x1bb),a0_0x1ca316(0x242),a0_0x1ca316(0x198),'energy',a0_0x1ca316(0x1aa),a0_0x1ca316(0x2cc),a0_0x1ca316(0x281),a0_0x1ca316(0x343)],ADAPTER_BLACKLIST=[a0_0x1ca316(0x1d8),a0_0x1ca316(0x24d),a0_0x1ca316(0x283),'vis.',a0_0x1ca316(0x269),a0_0x1ca316(0x338),a0_0x1ca316(0x2b5),a0_0x1ca316(0x243),'echarts.',a0_0x1ca316(0x2a7),a0_0x1ca316(0x32b)],SYSTEM_MODES={'NORMAL':a0_0x1ca316(0x179),'VACATION':a0_0x1ca316(0x246),'PARTY':a0_0x1ca316(0x1a3),'GUEST':a0_0x1ca316(0x332)},AUTO_RESET_MODES=[SYSTEM_MODES[a0_0x1ca316(0x264)],SYSTEM_MODES[a0_0x1ca316(0x1c1)]],PERSONA_MAPPING={'generic':'Analysiere\x20ausgewogen.','senior_aal':a0_0x1ca316(0x1c0),'family':'Fokus\x20auf\x20Familienroutinen.','single_comfort':a0_0x1ca316(0x2fb),'security':a0_0x1ca316(0x36f)},ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};let activeSequence=[],sequenceTimer=null;async function initZombies(_0x1c1a91){const _0x2ad5e2=a0_0x1ca316;try{const _0x6d02d1=[_0x2ad5e2(0x1d1),_0x2ad5e2(0x21a)];for(const _0x352b06 of _0x6d02d1){try{const _0x196299=await _0x1c1a91['getObjectAsync'](_0x352b06);_0x196299&&await _0x1c1a91[_0x2ad5e2(0x247)](_0x352b06);}catch(_0x57cb1a){}}}catch(_0x2566af){}}async function initHistory(_0x21942f){const _0x39af3f=a0_0x1ca316;try{const _0x16de40=await _0x21942f['getStateAsync'](_0x39af3f(0x36b));_0x16de40&&_0x16de40['val']&&(_0x21942f['eventHistory']=JSON[_0x39af3f(0x1e1)](_0x16de40['val'][_0x39af3f(0x287)]()));}catch(_0x19bd64){_0x21942f[_0x39af3f(0x2c3)]=[];}try{const _0x612bdc=await _0x21942f[_0x39af3f(0x1f8)](_0x39af3f(0x32c));if(_0x612bdc&&_0x612bdc[_0x39af3f(0x34d)])_0x21942f[_0x39af3f(0x19e)]=JSON[_0x39af3f(0x1e1)](_0x612bdc[_0x39af3f(0x34d)]['toString']());}catch(_0x20c576){_0x21942f[_0x39af3f(0x19e)]=[];}if(_0x21942f[_0x39af3f(0x2c3)]&&_0x21942f['eventHistory'][_0x39af3f(0x231)]>0x0){_0x21942f[_0x39af3f(0x33a)][_0x39af3f(0x19b)]('Restoring\x20sensor\x20cache\x20from\x20history\x20('+_0x21942f[_0x39af3f(0x2c3)][_0x39af3f(0x231)]+_0x39af3f(0x1b9));for(let _0x194530=_0x21942f[_0x39af3f(0x2c3)][_0x39af3f(0x231)]-0x1;_0x194530>=0x0;_0x194530--){const _0x145702=_0x21942f[_0x39af3f(0x2c3)][_0x194530];_0x145702&&_0x145702['id']!==undefined&&_0x145702[_0x39af3f(0x2dd)]!==undefined&&(_0x21942f['sensorLastValues'][_0x145702['id']]=_0x145702[_0x39af3f(0x2dd)]);}}}async function initSystemConfig(_0x31d6cd){const _0x1ddef7=a0_0x1ca316;try{const _0x4fe934=await _0x31d6cd[_0x1ddef7(0x328)]('system.config');_0x4fe934&&_0x4fe934[_0x1ddef7(0x241)]&&(_0x31d6cd[_0x1ddef7(0x19a)]={'latitude':_0x4fe934['common']['latitude']||0x0,'longitude':_0x4fe934['common'][_0x1ddef7(0x18a)]||0x0,'city':_0x4fe934[_0x1ddef7(0x241)][_0x1ddef7(0x24f)]||''});}catch(_0x65fca3){}}async function checkLicense(_0x2cc9e9,_0x582187){const _0x46a284=a0_0x1ca316;if(!_0x582187)return![];_0x2cc9e9[_0x46a284(0x345)]=await getSystemUUID(_0x2cc9e9);if(_0x582187==='TEST-PRO-KEY'||_0x582187[_0x46a284(0x255)](_0x46a284(0x26f)))return!![];return![];}async function getSystemUUID(_0x515518){const _0x460e71=a0_0x1ca316;try{const _0x4a38b2=await _0x515518[_0x460e71(0x328)](_0x460e71(0x35e));if(_0x4a38b2&&_0x4a38b2[_0x460e71(0x225)]&&_0x4a38b2[_0x460e71(0x225)][_0x460e71(0x2da)])return _0x4a38b2[_0x460e71(0x225)][_0x460e71(0x2da)];return _0x460e71(0x330);}catch(_0x233fbc){return'uuid-error';}}async function createAllObjects(_0x11e16f){const _0x2d078a=a0_0x1ca316;await checkSystemObjects(_0x11e16f),await _0x11e16f[_0x2d078a(0x32e)](_0x2d078a(0x1c8),{'type':_0x2d078a(0x1b4),'common':{'name':_0x2d078a(0x1f6),'type':'string','role':'text','read':!![],'write':![],'def':''},'native':{}}),await _0x11e16f['setObjectNotExistsAsync'](_0x2d078a(0x31e),{'type':_0x2d078a(0x1b4),'common':{'name':_0x2d078a(0x180),'type':_0x2d078a(0x268),'role':_0x2d078a(0x23c),'read':!![],'write':![]},'native':{}}),await _0x11e16f[_0x2d078a(0x32e)](_0x2d078a(0x36b),{'type':_0x2d078a(0x1b4),'common':{'name':_0x2d078a(0x274),'type':_0x2d078a(0x268),'role':'json','read':!![],'write':![]},'native':{}}),await _0x11e16f[_0x2d078a(0x32e)](_0x2d078a(0x284),{'type':_0x2d078a(0x1b4),'common':{'name':_0x2d078a(0x2f0),'type':_0x2d078a(0x181),'role':_0x2d078a(0x313),'read':!![],'write':!![],'def':![]},'native':{}}),await _0x11e16f[_0x2d078a(0x32e)]('analysis.triggerBriefing',{'type':'state','common':{'name':_0x2d078a(0x1e0),'type':_0x2d078a(0x181),'role':_0x2d078a(0x313),'read':!![],'write':!![],'def':![]},'native':{}}),await _0x11e16f['setObjectNotExistsAsync'](_0x2d078a(0x22d),{'type':'state','common':{'name':_0x2d078a(0x299),'type':_0x2d078a(0x268),'role':_0x2d078a(0x23c),'read':!![],'write':![]},'native':{}}),await _0x11e16f[_0x2d078a(0x32e)](_0x2d078a(0x349),{'type':_0x2d078a(0x1b4),'common':{'name':'AI\x20Alert\x20Status','type':'boolean','role':'indicator.alarm','read':!![],'write':![],'def':![]},'native':{}}),await _0x11e16f[_0x2d078a(0x32e)](_0x2d078a(0x1da),{'type':_0x2d078a(0x1b4),'common':{'name':_0x2d078a(0x24b),'type':_0x2d078a(0x181),'role':_0x2d078a(0x1fb),'read':!![],'write':![],'def':![]},'native':{}}),await _0x11e16f[_0x2d078a(0x32e)]('analysis.alertReason',{'type':_0x2d078a(0x1b4),'common':{'name':_0x2d078a(0x320),'type':_0x2d078a(0x268),'role':_0x2d078a(0x329),'read':!![],'write':![]},'native':{}}),await _0x11e16f[_0x2d078a(0x32e)](_0x2d078a(0x366),{'type':'state','common':{'name':'Activity\x20Summary','type':_0x2d078a(0x268),'role':_0x2d078a(0x26b),'read':!![],'write':![]},'native':{}}),await _0x11e16f[_0x2d078a(0x32e)](_0x2d078a(0x1ba),{'type':_0x2d078a(0x1b4),'common':{'name':_0x2d078a(0x1e9),'type':_0x2d078a(0x268),'role':_0x2d078a(0x1b4),'read':!![],'write':![],'def':_0x2d078a(0x1ab)},'native':{}}),await _0x11e16f['setObjectNotExistsAsync'](_0x2d078a(0x219),{'type':'state','common':{'name':_0x2d078a(0x21f),'type':'string','role':_0x2d078a(0x26b),'read':!![],'write':![]},'native':{}}),await _0x11e16f[_0x2d078a(0x32e)](_0x2d078a(0x2e6),{'type':_0x2d078a(0x1b4),'common':{'name':_0x2d078a(0x275),'type':_0x2d078a(0x268),'role':'text','read':!![],'write':![]},'native':{}}),await _0x11e16f[_0x2d078a(0x1db)](_0x2d078a(0x2a2),{'type':_0x2d078a(0x23f),'common':{'name':'Automation\x20Proposals'},'native':{}}),await _0x11e16f[_0x2d078a(0x32e)](_0x2d078a(0x36a),{'type':_0x2d078a(0x1b4),'common':{'name':_0x2d078a(0x26a),'type':_0x2d078a(0x181),'role':_0x2d078a(0x325),'read':!![],'write':![],'def':![]},'native':{}}),await _0x11e16f[_0x2d078a(0x32e)](_0x2d078a(0x207),{'type':_0x2d078a(0x1b4),'common':{'name':_0x2d078a(0x34e),'type':_0x2d078a(0x268),'role':'text','read':!![],'write':![]},'native':{}}),await _0x11e16f[_0x2d078a(0x32e)](_0x2d078a(0x2d7),{'type':_0x2d078a(0x1b4),'common':{'name':_0x2d078a(0x2e2),'type':_0x2d078a(0x268),'role':_0x2d078a(0x26b),'read':!![],'write':![]},'native':{}}),await _0x11e16f[_0x2d078a(0x32e)](_0x2d078a(0x34f),{'type':_0x2d078a(0x1b4),'common':{'name':_0x2d078a(0x323),'type':'string','role':_0x2d078a(0x26b),'read':!![],'write':![]},'native':{}}),await _0x11e16f[_0x2d078a(0x32e)](_0x2d078a(0x340),{'type':_0x2d078a(0x1b4),'common':{'name':_0x2d078a(0x344),'type':_0x2d078a(0x268),'role':_0x2d078a(0x26b),'read':!![],'write':![]},'native':{}}),await _0x11e16f[_0x2d078a(0x32e)]('analysis.automation.autoApply',{'type':_0x2d078a(0x1b4),'common':{'name':_0x2d078a(0x193),'type':_0x2d078a(0x181),'role':_0x2d078a(0x2a8),'read':!![],'write':!![],'def':![]},'native':{}}),await _0x11e16f[_0x2d078a(0x32e)](_0x2d078a(0x1a6),{'type':'state','common':{'name':_0x2d078a(0x307),'type':_0x2d078a(0x181),'role':_0x2d078a(0x313),'read':!![],'write':!![],'def':![]},'native':{}}),await _0x11e16f[_0x2d078a(0x32e)](_0x2d078a(0x32c),{'type':'state','common':{'name':'Logbook','type':'string','role':'json','read':!![],'write':![],'def':'[]'},'native':{}}),await _0x11e16f['setObjectNotExistsAsync'](_0x2d078a(0x311),{'type':_0x2d078a(0x1b4),'common':{'name':_0x2d078a(0x33f),'type':'string','role':_0x2d078a(0x23c),'read':!![],'write':![],'def':'[]'},'native':{}}),await _0x11e16f[_0x2d078a(0x1db)](_0x2d078a(0x1f7),{'type':'channel','common':{'name':_0x2d078a(0x270)},'native':{}}),await _0x11e16f[_0x2d078a(0x32e)](_0x2d078a(0x351),{'type':_0x2d078a(0x1b4),'common':{'name':'Sleep\x20Score\x20(0-100)','type':_0x2d078a(0x352),'role':_0x2d078a(0x237),'read':!![],'write':![],'def':0x0},'native':{}}),await _0x11e16f['setObjectNotExistsAsync'](_0x2d078a(0x1a9),{'type':'state','common':{'name':_0x2d078a(0x314),'type':_0x2d078a(0x268),'role':_0x2d078a(0x26b),'read':!![],'write':![],'def':'none'},'native':{}}),await _0x11e16f['setObjectNotExistsAsync'](_0x2d078a(0x233),{'type':_0x2d078a(0x1b4),'common':{'name':'Health\x20Notes','type':_0x2d078a(0x268),'role':_0x2d078a(0x26b),'read':!![],'write':![],'def':''},'native':{}}),await _0x11e16f['setObjectNotExistsAsync']('analysis.health.trendDiagnosis',{'type':'state','common':{'name':_0x2d078a(0x1bf),'type':_0x2d078a(0x268),'role':'text','read':!![],'write':![],'def':_0x2d078a(0x1ab)},'native':{}}),await _0x11e16f[_0x2d078a(0x32e)](_0x2d078a(0x1b1),{'type':_0x2d078a(0x1b4),'common':{'name':_0x2d078a(0x29c),'type':_0x2d078a(0x352),'role':_0x2d078a(0x2dd),'read':!![],'write':![],'def':0x0},'native':{}}),await _0x11e16f[_0x2d078a(0x1db)](_0x2d078a(0x1c7),{'type':_0x2d078a(0x23f),'common':{'name':_0x2d078a(0x229)},'native':{}}),await _0x11e16f[_0x2d078a(0x32e)](_0x2d078a(0x2f5),{'type':_0x2d078a(0x1b4),'common':{'name':'Recorded\x20Motion\x20Sequences','type':'string','role':_0x2d078a(0x23c),'read':!![],'write':![],'def':'[]','desc':_0x2d078a(0x27f)},'native':{}}),await _0x11e16f[_0x2d078a(0x32e)](_0x2d078a(0x2bd),{'type':'state','common':{'name':_0x2d078a(0x236),'type':_0x2d078a(0x268),'role':_0x2d078a(0x23c),'read':!![],'write':![],'def':'[]','desc':'Correlation\x20between\x20Inside\x20Temp,\x20Outside\x20Temp\x20and\x20Time'},'native':{}}),await checkLtmObjects(_0x11e16f),await checkLtmDriftObjects(_0x11e16f);}function a0_0x54c5(_0x55ed5,_0x11d98a){const _0x22ca67=a0_0x362a();return a0_0x54c5=function(_0x15a522,_0x3c62d2){_0x15a522=_0x15a522-0x163;let _0x362a28=_0x22ca67[_0x15a522];return _0x362a28;},a0_0x54c5(_0x55ed5,_0x11d98a);}async function checkSystemObjects(_0x494445){const _0x5ceb58=a0_0x1ca316;await _0x494445[_0x5ceb58(0x1db)]('system',{'type':_0x5ceb58(0x23f),'common':{'name':_0x5ceb58(0x2c1)},'native':{}}),await _0x494445['extendObjectAsync'](SYSTEM_DP_MODE,{'type':_0x5ceb58(0x1b4),'common':{'name':_0x5ceb58(0x200),'type':_0x5ceb58(0x268),'role':_0x5ceb58(0x1b4),'read':!![],'write':!![],'def':SYSTEM_MODES[_0x5ceb58(0x215)],'states':{[SYSTEM_MODES[_0x5ceb58(0x215)]]:_0x5ceb58(0x214),[SYSTEM_MODES[_0x5ceb58(0x187)]]:_0x5ceb58(0x16e),[SYSTEM_MODES[_0x5ceb58(0x264)]]:_0x5ceb58(0x318),[SYSTEM_MODES['GUEST']]:_0x5ceb58(0x368)}},'native':{}});}async function checkLtmObjects(_0x5bdb31){const _0x397553=a0_0x1ca316;await _0x5bdb31[_0x397553(0x1db)](_0x397553(0x1f3),{'type':'channel','common':{'name':_0x397553(0x1f3)},'native':{}}),await _0x5bdb31[_0x397553(0x1db)](LTM_DP_RAW_LOG,{'type':_0x397553(0x1b4),'common':{'name':_0x397553(0x1e3),'type':_0x397553(0x268),'role':_0x397553(0x23c),'read':!![],'write':![]},'native':{}}),await _0x5bdb31[_0x397553(0x1db)](LTM_DP_DAILY_DIGESTS,{'type':_0x397553(0x1b4),'common':{'name':'Daily\x20Digests','type':'string','role':_0x397553(0x23c),'read':!![],'write':![]},'native':{}}),await _0x5bdb31[_0x397553(0x1db)](LTM_DP_STATUS,{'type':'state','common':{'name':_0x397553(0x367),'type':_0x397553(0x268),'role':_0x397553(0x26b),'read':!![],'write':![]},'native':{}}),await _0x5bdb31['extendObjectAsync'](LTM_DP_TRIGGER_DIGEST,{'type':_0x397553(0x1b4),'common':{'name':_0x397553(0x337),'type':_0x397553(0x181),'role':_0x397553(0x313),'read':!![],'write':!![],'def':![]},'native':{}}),await _0x5bdb31[_0x397553(0x1db)](LTM_DP_BASELINE_STATUS,{'type':_0x397553(0x1b4),'common':{'name':'Baseline\x20Status','type':'string','role':'text','read':!![],'write':![]},'native':{}});}async function checkLtmDriftObjects(_0xb412d9){const _0x449321=a0_0x1ca316;await _0xb412d9['extendObjectAsync'](LTM_DP_DRIFT_CHANNEL,{'type':_0x449321(0x23f),'common':{'name':_0x449321(0x234)},'native':{}}),await _0xb412d9['extendObjectAsync'](LTM_DP_DRIFT_STATUS,{'type':_0x449321(0x1b4),'common':{'name':_0x449321(0x2e4),'type':_0x449321(0x268),'role':_0x449321(0x1b4),'read':!![],'write':![],'def':_0x449321(0x1ab)},'native':{}}),await _0xb412d9[_0x449321(0x1db)](LTM_DP_DRIFT_DETAILS,{'type':_0x449321(0x1b4),'common':{'name':_0x449321(0x350),'type':'string','role':_0x449321(0x26b),'read':!![],'write':![]},'native':{}}),await _0xb412d9[_0x449321(0x1db)](LTM_DP_DRIFT_LAST_CHECK,{'type':'state','common':{'name':_0x449321(0x2d6),'type':_0x449321(0x352),'role':_0x449321(0x17e),'read':!![],'write':![]},'native':{}});}async function loadSystemMode(_0x46f58a){const _0x3fba4e=a0_0x1ca316;try{const _0x25db7f=await _0x46f58a['getStateAsync'](SYSTEM_DP_MODE);_0x25db7f&&_0x25db7f[_0x3fba4e(0x34d)]&&Object[_0x3fba4e(0x2cb)](SYSTEM_MODES)['includes'](_0x25db7f[_0x3fba4e(0x34d)])?_0x46f58a['currentSystemMode']=_0x25db7f['val']:(_0x46f58a[_0x3fba4e(0x222)]=SYSTEM_MODES['NORMAL'],await _0x46f58a['setStateAsync'](SYSTEM_DP_MODE,{'val':SYSTEM_MODES['NORMAL'],'ack':!![]}));}catch(_0x1796ff){_0x46f58a['currentSystemMode']=SYSTEM_MODES['NORMAL'];}}async function loadRawEventLog(_0xcf240c){const _0x336579=a0_0x1ca316;try{const _0xc06ec7=await _0xcf240c['getStateAsync'](LTM_DP_RAW_LOG);if(_0xc06ec7&&_0xc06ec7['val'])_0xcf240c[_0x336579(0x2b6)]=JSON[_0x336579(0x1e1)](_0xc06ec7[_0x336579(0x34d)]);}catch(_0xbdfe98){_0xcf240c['rawEventLog']=[];}}async function saveRawEventLog(_0x2231c3){const _0x823dd9=a0_0x1ca316;_0x2231c3[_0x823dd9(0x2b6)][_0x823dd9(0x231)]>RAW_LOG_MAX_SIZE&&_0x2231c3[_0x823dd9(0x2b6)][_0x823dd9(0x19c)](0x0,_0x2231c3[_0x823dd9(0x2b6)]['length']-RAW_LOG_MAX_SIZE),await _0x2231c3[_0x823dd9(0x24c)](LTM_DP_RAW_LOG,{'val':JSON['stringify'](_0x2231c3['rawEventLog']),'ack':!![]});}async function loadDailyDigests(_0x267a52){const _0x2cfa69=a0_0x1ca316;try{const _0xe787f1=await _0x267a52[_0x2cfa69(0x1f8)](LTM_DP_DAILY_DIGESTS);if(_0xe787f1&&_0xe787f1[_0x2cfa69(0x34d)])_0x267a52[_0x2cfa69(0x208)]=JSON[_0x2cfa69(0x1e1)](_0xe787f1[_0x2cfa69(0x34d)]);}catch(_0x10acfc){_0x267a52[_0x2cfa69(0x208)]=[];}await updateBaselineStatus(_0x267a52);}async function saveDailyDigests(_0x146e86,_0x9b31ac=!![]){const _0x41d2af=a0_0x1ca316,_0xc90e73=_0x146e86[_0x41d2af(0x1e7)][_0x41d2af(0x2d1)]||0x3c;_0x146e86[_0x41d2af(0x208)][_0x41d2af(0x231)]>_0xc90e73&&_0x146e86[_0x41d2af(0x208)][_0x41d2af(0x19c)](0x0,_0x146e86[_0x41d2af(0x208)][_0x41d2af(0x231)]-_0xc90e73);await _0x146e86[_0x41d2af(0x24c)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x41d2af(0x1f2)](_0x146e86[_0x41d2af(0x208)]),'ack':!![]});if(_0x9b31ac)await updateBaselineStatus(_0x146e86);}async function updateAnalysisHistory(_0xba4e69,_0x512cf7){const _0x1611c7=a0_0x1ca316;_0xba4e69[_0x1611c7(0x19e)][_0x1611c7(0x17f)](_0x512cf7);if(_0xba4e69[_0x1611c7(0x19e)]['length']>ANALYSIS_HISTORY_MAX_SIZE)_0xba4e69[_0x1611c7(0x19e)][_0x1611c7(0x315)]();await _0xba4e69[_0x1611c7(0x24c)](_0x1611c7(0x32c),{'val':JSON[_0x1611c7(0x1f2)](_0xba4e69[_0x1611c7(0x19e)]),'ack':!![]});}async function updateBaselineStatus(_0x55c812){const _0x3d9c89=a0_0x1ca316;if(!_0x55c812[_0x3d9c89(0x2e5)]){await _0x55c812['setStateAsync'](LTM_DP_BASELINE_STATUS,{'val':_0x3d9c89(0x2dc),'ack':!![]});return;}const _0x5f214c=_0x55c812[_0x3d9c89(0x208)][_0x3d9c89(0x231)]>=(_0x55c812[_0x3d9c89(0x1e7)][_0x3d9c89(0x174)]||0x7)?_0x3d9c89(0x228)+_0x55c812[_0x3d9c89(0x208)]['length']+'\x20Tage)':_0x3d9c89(0x363)+_0x55c812[_0x3d9c89(0x208)][_0x3d9c89(0x231)]+'/'+(_0x55c812[_0x3d9c89(0x1e7)][_0x3d9c89(0x174)]||0x7)+')';await _0x55c812[_0x3d9c89(0x24c)](LTM_DP_BASELINE_STATUS,{'val':_0x5f214c,'ack':!![]});}async function initSensorSubscriptions(_0x2e8a89){const _0x2d7bcd=a0_0x1ca316,_0x20cb08=_0x2e8a89[_0x2d7bcd(0x1e7)][_0x2d7bcd(0x2d0)];if(_0x20cb08&&_0x20cb08[_0x2d7bcd(0x231)]>0x0){_0x2e8a89[_0x2d7bcd(0x33a)][_0x2d7bcd(0x19b)](_0x2d7bcd(0x34b)+_0x20cb08[_0x2d7bcd(0x231)]+_0x2d7bcd(0x1e2));for(const _0x2a52b9 of _0x20cb08){if(_0x2a52b9['id']){await _0x2e8a89[_0x2d7bcd(0x31c)](_0x2a52b9['id']);try{const _0x593d5c=await _0x2e8a89[_0x2d7bcd(0x1e6)](_0x2a52b9['id']);if(_0x593d5c)_0x2e8a89[_0x2d7bcd(0x2c5)][_0x2a52b9['id']]=_0x593d5c[_0x2d7bcd(0x34d)];}catch(_0x1999f0){}}}}}async function initPresenceSubscriptions(_0xcc6018){const _0x36944b=a0_0x1ca316,_0x19c010=_0xcc6018[_0x36944b(0x1e7)][_0x36944b(0x276)]||[];if(_0x19c010[_0x36944b(0x231)]>0x0){_0xcc6018[_0x36944b(0x33a)]['info'](_0x36944b(0x34b)+_0x19c010[_0x36944b(0x231)]+_0x36944b(0x28b));for(const _0x4a0481 of _0x19c010){await _0xcc6018[_0x36944b(0x31c)](_0x4a0481);}try{await checkWifiPresence(_0xcc6018);}catch(_0x22b0eb){}}}async function getWeatherContext(_0x340a4a){const _0x198e83=a0_0x1ca316;try{if(!_0x340a4a[_0x198e83(0x1e7)]['useWeather'])return _0x198e83(0x32a);let _0x27e065='';const _0x45cb32=_0x340a4a[_0x198e83(0x1e7)][_0x198e83(0x195)];if(_0x45cb32)try{if(_0x45cb32[_0x198e83(0x18d)](_0x198e83(0x26d))){const _0xad5615=await _0x340a4a[_0x198e83(0x1e6)](_0x45cb32+_0x198e83(0x1bd));if(_0xad5615&&_0xad5615[_0x198e83(0x34d)])_0x27e065=_0xad5615[_0x198e83(0x34d)];}else{if(_0x45cb32[_0x198e83(0x18d)](_0x198e83(0x16c))){const _0x21f924=await _0x340a4a[_0x198e83(0x1e6)](_0x45cb32+_0x198e83(0x2bb));if(_0x21f924&&_0x21f924[_0x198e83(0x34d)])_0x27e065=_0x21f924[_0x198e83(0x34d)];}else{if(_0x45cb32[_0x198e83(0x18d)](_0x198e83(0x2fc))){const _0x17caf2=await _0x340a4a[_0x198e83(0x1e6)](_0x45cb32+_0x198e83(0x1cb));if(_0x17caf2&&_0x17caf2[_0x198e83(0x34d)])_0x27e065=_0x17caf2[_0x198e83(0x34d)];}}}}catch(_0x3c19d1){}if(!_0x27e065){const _0x3f0066=['accuweather.0',_0x198e83(0x2ad),_0x198e83(0x355),'openweathermap.0'];for(const _0x2d68eb of _0x3f0066){try{const _0x2e33fc=await _0x340a4a[_0x198e83(0x328)](_0x2d68eb);if(_0x2e33fc){if(_0x2d68eb[_0x198e83(0x18d)](_0x198e83(0x26d))){const _0xcdfd64=await _0x340a4a[_0x198e83(0x1e6)](_0x2d68eb+_0x198e83(0x1bd));if(_0xcdfd64&&_0xcdfd64['val']){_0x27e065=_0xcdfd64[_0x198e83(0x34d)];break;}}}}catch(_0x812559){}}}return _0x27e065?_0x198e83(0x2ef)+_0x27e065:_0x198e83(0x321);}catch(_0x83fb4b){return _0x198e83(0x21e)+_0x83fb4b[_0x198e83(0x2eb)];}}async function getCalendarContext(_0x26b1fe){const _0x380001=a0_0x1ca316;try{if(!_0x26b1fe[_0x380001(0x1e7)][_0x380001(0x220)])return _0x380001(0x303);let _0x47c433=_0x26b1fe[_0x380001(0x1e7)][_0x380001(0x2bc)]||_0x380001(0x295),_0x1acdb6=_0x26b1fe[_0x380001(0x1e7)][_0x380001(0x253)]||[];if(typeof _0x1acdb6===_0x380001(0x268))_0x1acdb6=_0x1acdb6[_0x380001(0x34c)](',');try{const _0x146b69=await _0x26b1fe[_0x380001(0x1e6)](_0x47c433+_0x380001(0x2ce));if(_0x146b69&&_0x146b69[_0x380001(0x34d)]){let _0x776eb3=tryParse(_0x146b69[_0x380001(0x34d)]);if(_0x776eb3&&Array['isArray'](_0x776eb3)){if(_0x1acdb6[_0x380001(0x231)]>0x0)_0x776eb3=_0x776eb3['filter'](_0x3a1aaa=>_0x1acdb6['includes'](_0x3a1aaa[_0x380001(0x1a0)]||''));else return'KALENDER:\x20Keine\x20Kalender\x20ausgewÃ¤hlt\x20(Bitte\x20in\x20Settings\x20konfigurieren)';if(_0x776eb3[_0x380001(0x231)]>0x0){const _0x3933fc=_0x776eb3['slice'](0x0,0x3)[_0x380001(0x1dc)](_0x1fdc0d=>{const _0x5dcba2=_0x380001;let _0x6739de=_0x1fdc0d['date'];if(_0x1fdc0d[_0x5dcba2(0x230)])_0x6739de+='\x20'+_0x1fdc0d[_0x5dcba2(0x230)];return _0x6739de+':\x20'+_0x1fdc0d[_0x5dcba2(0x2be)]+'\x20('+_0x1fdc0d['_calName']+')';});return _0x380001(0x1c6)+_0x3933fc[_0x380001(0x1d3)](_0x380001(0x1cd));}else return _0x380001(0x358);}}}catch(_0x42fc67){_0x26b1fe[_0x380001(0x33a)]['warn'](_0x380001(0x1f0)+_0x42fc67[_0x380001(0x2eb)]);}return _0x380001(0x27e);}catch(_0x41b0ba){return _0x380001(0x2c4)+_0x41b0ba['message'];}}async function getCalendarNames(_0x26854c,_0x1aa320){const _0x3a45fc=a0_0x1ca316;try{const _0x453320=await _0x26854c[_0x3a45fc(0x1e6)](_0x1aa320+_0x3a45fc(0x2ce));if(_0x453320&&_0x453320['val']){const _0xbcd3e3=tryParse(_0x453320[_0x3a45fc(0x34d)]);if(_0xbcd3e3&&Array[_0x3a45fc(0x2fe)](_0xbcd3e3)){const _0x15b433=[...new Set(_0xbcd3e3[_0x3a45fc(0x1dc)](_0x567a50=>_0x567a50[_0x3a45fc(0x1a0)])[_0x3a45fc(0x278)](Boolean))];return _0x15b433[_0x3a45fc(0x297)]();}}return[];}catch(_0x21f36a){return _0x26854c[_0x3a45fc(0x33a)][_0x3a45fc(0x272)](_0x3a45fc(0x211)+_0x21f36a[_0x3a45fc(0x2eb)]),[];}}async function checkWifiPresence(_0x1ee155){const _0xf9ad3f=a0_0x1ca316;try{const _0x44a2b1=_0x1ee155[_0xf9ad3f(0x1e7)][_0xf9ad3f(0x276)]||[];let _0x21f32e=![];const _0x1de46a=[];for(const _0x5c6aec of _0x44a2b1){try{const _0xc9099f=await _0x1ee155[_0xf9ad3f(0x1e6)](_0x5c6aec);if(_0xc9099f&&(_0xc9099f[_0xf9ad3f(0x34d)]===!![]||_0xc9099f['val']===_0xf9ad3f(0x2f3)||_0xc9099f['val']===0x1)){_0x21f32e=!![];const _0x3e147b=await _0x1ee155[_0xf9ad3f(0x328)](_0x5c6aec);let _0xf08084=_0x5c6aec;_0x3e147b&&_0x3e147b['common']&&_0x3e147b[_0xf9ad3f(0x241)][_0xf9ad3f(0x322)]&&(_0xf08084=typeof _0x3e147b[_0xf9ad3f(0x241)][_0xf9ad3f(0x322)]===_0xf9ad3f(0x342)?_0x3e147b[_0xf9ad3f(0x241)][_0xf9ad3f(0x322)]['de']||_0x3e147b[_0xf9ad3f(0x241)][_0xf9ad3f(0x322)]['en']:_0x3e147b['common']['name']),_0x1de46a[_0xf9ad3f(0x20f)](_0xf08084);}}catch(_0x226684){}}return await _0x1ee155[_0xf9ad3f(0x24c)](_0xf9ad3f(0x1c8),{'val':_0x1de46a[_0xf9ad3f(0x1d3)](',\x20'),'ack':!![]}),_0x21f32e&&(_0x1ee155[_0xf9ad3f(0x326)]&&(_0x1ee155[_0xf9ad3f(0x33a)]['info'](_0xf9ad3f(0x35a)),abortExitTimer(_0x1ee155)),!_0x1ee155[_0xf9ad3f(0x22a)]&&_0x1ee155[_0xf9ad3f(0x222)]===SYSTEM_MODES[_0xf9ad3f(0x215)]&&await setPresence(_0x1ee155,!![])),_0x21f32e;}catch(_0x738653){return _0x1ee155[_0xf9ad3f(0x33a)][_0xf9ad3f(0x272)](_0xf9ad3f(0x261)+_0x738653['message']),![];}}function startExitTimer(_0xd6a906){const _0x1e9b20=a0_0x1ca316;abortExitTimer(_0xd6a906),_0xd6a906[_0x1e9b20(0x290)]=!![],_0xd6a906[_0x1e9b20(0x17d)]=setTimeout(()=>{const _0x2bff07=_0x1e9b20;_0xd6a906[_0x2bff07(0x290)]=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),_0xd6a906[_0x1e9b20(0x326)]=setTimeout(()=>{const _0x5ed690=_0x1e9b20;setPresence(_0xd6a906,![]),_0xd6a906[_0x5ed690(0x326)]=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}function abortExitTimer(_0x596bd8){const _0x1283f0=a0_0x1ca316;if(_0x596bd8[_0x1283f0(0x326)])clearTimeout(_0x596bd8['exitTimer']);if(_0x596bd8[_0x1283f0(0x17d)])clearTimeout(_0x596bd8[_0x1283f0(0x17d)]);_0x596bd8[_0x1283f0(0x326)]=null,_0x596bd8['exitGraceTimer']=null,_0x596bd8['isGracePeriodActive']=![];}async function setPresence(_0x26995c,_0xd6fe5c){const _0x61c238=a0_0x1ca316;if(_0x26995c[_0x61c238(0x22a)]===_0xd6fe5c)return;_0x26995c[_0x61c238(0x22a)]=_0xd6fe5c,await _0x26995c[_0x61c238(0x24c)](_0x61c238(0x171),{'val':_0xd6fe5c,'ack':!![]});}async function saveFeedback(_0xfbf0c8,_0x44b505){const _0x3a5cc2=a0_0x1ca316;_0xfbf0c8[_0x3a5cc2(0x33a)][_0x3a5cc2(0x19b)]('Feedback\x20saved:\x20'+JSON['stringify'](_0x44b505));}async function runBaselineDriftAnalysis(_0xcbeaec){const _0x4212ef=a0_0x1ca316;if(!_0xcbeaec[_0x4212ef(0x2e5)]||!_0xcbeaec['geminiModel'])return;const _0x472d45=_0xcbeaec[_0x4212ef(0x1e7)][_0x4212ef(0x260)]||0xe;if(_0xcbeaec[_0x4212ef(0x208)][_0x4212ef(0x231)]<_0x472d45+(_0xcbeaec[_0x4212ef(0x1e7)][_0x4212ef(0x174)]||0x7)){await _0xcbeaec[_0x4212ef(0x24c)](LTM_DP_DRIFT_STATUS,{'val':_0x4212ef(0x317),'ack':!![]});return;}const _0x58f4d1=_0xcbeaec[_0x4212ef(0x208)][_0x4212ef(0x2f2)](-_0x472d45),_0x42db83=_0xcbeaec[_0x4212ef(0x208)]['slice'](0x0,_0xcbeaec[_0x4212ef(0x208)][_0x4212ef(0x231)]-_0x472d45),_0x5d6068=_0x4212ef(0x2d2)+JSON[_0x4212ef(0x1f2)](_0x42db83)+_0x4212ef(0x183)+JSON[_0x4212ef(0x1f2)](_0x58f4d1);try{const _0xa58239=await _0xcbeaec[_0x4212ef(0x2b9)][_0x4212ef(0x259)](_0x5d6068),_0x45f622=JSON[_0x4212ef(0x1e1)](_0xa58239[_0x4212ef(0x34a)]['text']()['replace'](/```json|```/g,'')[_0x4212ef(0x26e)]());_0x45f622['baselineDrift']&&(await _0xcbeaec[_0x4212ef(0x24c)](LTM_DP_DRIFT_STATUS,{'val':_0x45f622[_0x4212ef(0x172)],'ack':!![]}),await _0xcbeaec[_0x4212ef(0x24c)](LTM_DP_DRIFT_DETAILS,{'val':_0x45f622[_0x4212ef(0x1ca)],'ack':!![]}),await _0xcbeaec['setStateAsync'](LTM_DP_DRIFT_LAST_CHECK,{'val':Date[_0x4212ef(0x2c0)](),'ack':!![]}));}catch(_0x205918){}}function setupLtmScheduler(_0x1da6a0){const _0x303aaa=a0_0x1ca316;try{if(_0x1da6a0[_0x303aaa(0x194)])_0x1da6a0[_0x303aaa(0x194)][_0x303aaa(0x2c7)]();if(!_0x1da6a0[_0x303aaa(0x2e5)]){_0x1da6a0['setStateAsync'](LTM_DP_STATUS,{'val':_0x303aaa(0x2dc),'ack':!![]});return;}_0x1da6a0[_0x303aaa(0x194)]=schedule['scheduleJob'](LTM_SCHEDULE,()=>createDailyDigest(_0x1da6a0));}catch(_0x402a66){_0x1da6a0[_0x303aaa(0x33a)][_0x303aaa(0x272)](_0x303aaa(0x31a)+_0x402a66[_0x303aaa(0x2eb)]);}}function setupModeResetScheduler(_0xb7d313){const _0x476b36=a0_0x1ca316;try{if(_0xb7d313[_0x476b36(0x1e4)])_0xb7d313[_0x476b36(0x1e4)][_0x476b36(0x2c7)]();_0xb7d313[_0x476b36(0x1e4)]=schedule['scheduleJob'](MODE_RESET_SCHEDULE,async()=>{const _0x307cf1=_0x476b36;await loadSystemMode(_0xb7d313),AUTO_RESET_MODES[_0x307cf1(0x18d)](_0xb7d313['currentSystemMode'])&&await _0xb7d313[_0x307cf1(0x24c)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x307cf1(0x215)],'ack':![]});});}catch(_0x14d863){_0xb7d313['log'][_0x476b36(0x272)](_0x476b36(0x29d)+_0x14d863['message']);}}function setupDriftAnalysisScheduler(_0x43fb8d){const _0x2eb81c=a0_0x1ca316;try{if(_0x43fb8d[_0x2eb81c(0x178)])clearInterval(_0x43fb8d[_0x2eb81c(0x178)]);if(!_0x43fb8d['isProVersion'])return;_0x43fb8d[_0x2eb81c(0x178)]=setInterval(()=>runBaselineDriftAnalysis(_0x43fb8d),(_0x43fb8d[_0x2eb81c(0x1e7)][_0x2eb81c(0x29f)]||0x18)*0x36ee80),setTimeout(()=>runBaselineDriftAnalysis(_0x43fb8d),0x1388);}catch(_0x45f055){_0x43fb8d[_0x2eb81c(0x33a)][_0x2eb81c(0x272)]('Drift\x20Sched\x20Error:\x20'+_0x45f055[_0x2eb81c(0x2eb)]);}}function setupBriefingScheduler(_0x3f2d71){const _0x423b70=a0_0x1ca316;try{if(_0x3f2d71[_0x423b70(0x360)])_0x3f2d71[_0x423b70(0x360)]['cancel']();if(!_0x3f2d71[_0x423b70(0x1e7)][_0x423b70(0x2aa)])return;const _0x5528c2=(_0x3f2d71['config'][_0x423b70(0x36d)]||'08:00')[_0x423b70(0x34c)](':'),_0x28fb8f=parseInt(_0x5528c2[0x0])||0x8,_0x11d913=parseInt(_0x5528c2[0x1])||0x0,_0x412f51=_0x11d913+'\x20'+_0x28fb8f+_0x423b70(0x235);_0x3f2d71[_0x423b70(0x33a)][_0x423b70(0x19b)](_0x423b70(0x2c6)+_0x28fb8f+':'+(_0x11d913<0xa?'0'+_0x11d913:_0x11d913)),_0x3f2d71[_0x423b70(0x360)]=schedule[_0x423b70(0x213)](_0x412f51,()=>{sendMorningBriefing(_0x3f2d71);});}catch(_0xc952b5){_0x3f2d71[_0x423b70(0x33a)][_0x423b70(0x272)](_0x423b70(0x1c2)+_0xc952b5[_0x423b70(0x2eb)]);}}async function sendNotification(_0x18d475,_0x25d15e,_0x37e0f0=![],_0x304a41=![]){const _0x40d598=a0_0x1ca316;_0x18d475[_0x40d598(0x33a)]['info']((_0x37e0f0?'[TEST]\x20':'')+_0x40d598(0x2b1)+_0x25d15e+'\x22');const _0x17b402=_0x18d475[_0x40d598(0x1e7)];let _0x4cd169=0x0;if(_0x17b402[_0x40d598(0x364)]){let _0x3c2d1c={};(_0x25d15e[_0x40d598(0x18d)](_0x40d598(0x164))||_0x304a41)&&(_0x3c2d1c={'reply_markup':{'inline_keyboard':[[{'text':'âœ…\x20Alles\x20OK\x20(Reset)','callback_data':_0x40d598(0x1d9)}],[{'text':'ðŸ“ž\x20RÃ¼ckruf\x20anfordern','callback_data':_0x40d598(0x1d0)}]]}}),await _0x18d475[_0x40d598(0x256)](_0x17b402['notifyTelegramInstance'],_0x40d598(0x192),{'text':_0x25d15e,'user':_0x17b402[_0x40d598(0x25d)],..._0x3c2d1c}),_0x4cd169++;}if(_0x17b402[_0x40d598(0x197)]){let _0x490358={'message':_0x25d15e,'title':_0x304a41?_0x40d598(0x286):_0x40d598(0x1a7),'priority':_0x304a41?0x2:0x1,'device':_0x17b402[_0x40d598(0x2a4)]};_0x304a41&&(_0x490358[_0x40d598(0x2b0)]=0x1e,_0x490358[_0x40d598(0x36c)]=0xe10,_0x490358[_0x40d598(0x248)]=_0x40d598(0x1c9)),await _0x18d475[_0x40d598(0x256)](_0x17b402[_0x40d598(0x21c)],_0x40d598(0x192),_0x490358),_0x4cd169++;}return _0x17b402['notifyEmailEnabled']&&(await _0x18d475['sendToAsync'](_0x17b402[_0x40d598(0x177)],_0x40d598(0x192),{'text':_0x25d15e,'to':_0x17b402[_0x40d598(0x17b)]}),_0x4cd169++),_0x4cd169;}async function setupTelegramListener(_0x2ee85c){const _0x54891c=a0_0x1ca316,_0x898127=_0x2ee85c[_0x54891c(0x1e7)]['notifyTelegramInstance'];_0x2ee85c[_0x54891c(0x1e7)][_0x54891c(0x364)]&&_0x898127&&(_0x2ee85c[_0x54891c(0x33a)]['info'](_0x54891c(0x29a)+_0x898127+_0x54891c(0x1bc)),await _0x2ee85c['subscribeForeignStatesAsync'](_0x898127+_0x54891c(0x27c)));}async function handleTelegramResponse(_0x595525,_0x44923a){const _0x292d69=a0_0x1ca316;let _0x1d3e29=_0x44923a;_0x44923a[_0x292d69(0x255)]('[')&&(_0x1d3e29=_0x44923a[_0x292d69(0x17a)](_0x44923a[_0x292d69(0x35b)](']')+0x1));if(_0x1d3e29===_0x292d69(0x1d9))_0x595525['log']['info'](_0x292d69(0x305)),await _0x595525[_0x292d69(0x24c)](_0x292d69(0x349),{'val':![],'ack':!![]}),await _0x595525[_0x292d69(0x24c)](_0x292d69(0x20c),{'val':_0x292d69(0x1ea),'ack':!![]}),_0x595525['lastAlertState']=![],sendNotification(_0x595525,_0x292d69(0x20d),![]);else _0x1d3e29===_0x292d69(0x1d0)&&(_0x595525[_0x292d69(0x33a)][_0x292d69(0x353)](_0x292d69(0x2a6)),sendNotification(_0x595525,'ðŸ“ž\x20RÃœCKRUF\x20BITTE!\x20Der\x20Bewohner\x20hat\x20den\x20RÃ¼ckruf-Button\x20gedrÃ¼ckt.',![],!![]));}async function runAutopilot(_0x364558){const _0x1a7a4e=a0_0x1ca316,_0x8d959f=_0x364558[_0x1a7a4e(0x1e7)]['inactivityThresholdHours'],_0x321465=_0x364558[_0x1a7a4e(0x2c3)][_0x1a7a4e(0x231)]>0x0?_0x364558[_0x1a7a4e(0x2c3)][0x0]['timestamp']:Date[_0x1a7a4e(0x2c0)](),_0x324706=(Date[_0x1a7a4e(0x2c0)]()-_0x321465)/(0x3e8*0x3c*0x3c);let _0x19f64b='';_0x364558[_0x1a7a4e(0x1e7)][_0x1a7a4e(0x298)]&&_0x364558[_0x1a7a4e(0x222)]===SYSTEM_MODES[_0x1a7a4e(0x215)]&&_0x364558[_0x1a7a4e(0x22a)]&&(_0x324706>_0x8d959f&&(_0x19f64b=_0x1a7a4e(0x28a)+_0x324706[_0x1a7a4e(0x232)](0x1)+_0x1a7a4e(0x1a8))),runGeminiAnalysis(_0x364558,_0x19f64b)[_0x1a7a4e(0x240)](_0x5ce13f=>_0x364558['log'][_0x1a7a4e(0x272)](_0x5ce13f));}async function createDailyDigest(_0x466b46){const _0x1efd2a=a0_0x1ca316;if(!_0x466b46['isProVersion'])return;await _0x466b46[_0x1efd2a(0x24c)](LTM_DP_STATUS,{'val':_0x1efd2a(0x1a5)+new Date()[_0x1efd2a(0x2c9)](),'ack':!![]});if(!_0x466b46[_0x1efd2a(0x2b9)]||_0x466b46[_0x1efd2a(0x2b6)]['length']<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x466b46[_0x1efd2a(0x24c)](LTM_DP_STATUS,{'val':_0x1efd2a(0x2d5),'ack':!![]});return;}const _0x8353c7=JSON['parse'](JSON[_0x1efd2a(0x1f2)](_0x466b46[_0x1efd2a(0x2b6)])),_0x4ed18c=_0x8353c7[_0x1efd2a(0x231)],_0x34944a='ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a'+JSON[_0x1efd2a(0x1f2)](_0x8353c7);try{const _0x7d4e39=await _0x466b46[_0x1efd2a(0x2b9)][_0x1efd2a(0x259)](_0x34944a),_0x2e9d1b=JSON['parse'](_0x7d4e39[_0x1efd2a(0x34a)]['text']()[_0x1efd2a(0x2af)](/```json|```/g,'')['trim']());_0x2e9d1b[_0x1efd2a(0x309)]&&(_0x466b46[_0x1efd2a(0x208)][_0x1efd2a(0x20f)]({'timestamp':new Date()['toISOString'](),'eventCount':_0x4ed18c,'summary':_0x2e9d1b[_0x1efd2a(0x309)],'activityLevel':_0x2e9d1b[_0x1efd2a(0x1cc)],'systemMode':_0x466b46[_0x1efd2a(0x222)]}),await saveDailyDigests(_0x466b46),_0x466b46[_0x1efd2a(0x2b6)]=[],await saveRawEventLog(_0x466b46),await _0x466b46[_0x1efd2a(0x24c)](LTM_DP_STATUS,{'val':_0x1efd2a(0x2b7)+_0x4ed18c+_0x1efd2a(0x2b8),'ack':!![]}),runPythonHealthCheck(_0x466b46));}catch(_0x22bda3){await _0x466b46[_0x1efd2a(0x24c)](LTM_DP_STATUS,{'val':_0x1efd2a(0x196)+_0x22bda3['message'],'ack':!![]});}}async function sendMorningBriefing(_0xd62404){const _0x30c270=a0_0x1ca316;if(!_0xd62404['geminiModel'])return;_0xd62404[_0x30c270(0x33a)]['info'](_0x30c270(0x1ad));const _0x54e7e9=_0xd62404[_0x30c270(0x208)][_0x30c270(0x231)]>0x0?_0xd62404[_0x30c270(0x208)][_0xd62404[_0x30c270(0x208)]['length']-0x1]:null,_0x317b9e=_0x54e7e9&&_0x54e7e9[_0x30c270(0x359)]?_0x54e7e9[_0x30c270(0x359)][_0x30c270(0x218)]:'N/A',_0x1482b0=new Date();_0x1482b0['setHours'](0x4,0x0,0x0,0x0);const _0x3d6a4e=_0xd62404[_0x30c270(0x2c3)]['filter'](_0x2ca50b=>new Date(_0x2ca50b[_0x30c270(0x168)])>_0x1482b0),_0x30541d=PERSONA_MAPPING[_0xd62404['config']['aiPersona']||_0x30c270(0x1b7)],_0x1d0f8a=_0xd62404[_0x30c270(0x1e7)]['livingContext']||'',_0x1cdf9e=await getWeatherContext(_0xd62404),_0x2a0a02=await getCalendarContext(_0xd62404),_0x76776=_0x30c270(0x277)+_0x30541d+_0x30c270(0x348)+_0x1d0f8a+_0x30c270(0x2fa)+_0x1cdf9e+'\x20'+_0x2a0a02+_0x30c270(0x245)+_0x317b9e+_0x30c270(0x19d)+JSON['stringify'](_0x3d6a4e[_0x30c270(0x2f2)](0x0,0xa))+'.\x20OUTPUT:\x20Nur\x20Text.';try{const _0x2cc9f1=await _0xd62404[_0x30c270(0x2b9)][_0x30c270(0x259)](_0x76776),_0x520611=_0x30c270(0x27d)+_0x2cc9f1[_0x30c270(0x34a)][_0x30c270(0x26b)]()[_0x30c270(0x26e)]();sendNotification(_0xd62404,_0x520611),_0xd62404['log'][_0x30c270(0x19b)](_0x30c270(0x223));}catch(_0x58552b){_0xd62404[_0x30c270(0x33a)][_0x30c270(0x272)](_0x30c270(0x282)+_0x58552b['message']);}}async function scanForDevices(_0x4199d2,_0x9217f6){const _0xdc8845=a0_0x1ca316;_0x4199d2[_0xdc8845(0x33a)][_0xdc8845(0x19b)](_0xdc8845(0x35f));const _0x9e45e3=[],_0x3b35f9=await _0x4199d2[_0xdc8845(0x28e)]('*'),_0x1a59a6=await _0x4199d2[_0xdc8845(0x28e)](_0xdc8845(0x27a),_0xdc8845(0x1fd)),_0x509b3d=await _0x4199d2['getForeignObjectsAsync'](_0xdc8845(0x2a5),_0xdc8845(0x1fd)),_0x12fb04={};if(_0x1a59a6)for(const _0x54144a in _0x1a59a6){const _0xc7468=_0x1a59a6[_0x54144a][_0xdc8845(0x241)][_0xdc8845(0x362)]||[];_0xc7468[_0xdc8845(0x224)](_0x3eefea=>{const _0x1f4d08=_0xdc8845;if(!_0x12fb04[_0x3eefea])_0x12fb04[_0x3eefea]=[];_0x12fb04[_0x3eefea][_0x1f4d08(0x20f)](_0x54144a);});}const _0x24308d={};if(_0x509b3d)for(const _0x11a278 in _0x509b3d){const _0x1fefcf=_0x509b3d[_0x11a278][_0xdc8845(0x241)][_0xdc8845(0x362)]||[],_0x77bf78=typeof _0x509b3d[_0x11a278][_0xdc8845(0x241)][_0xdc8845(0x322)]===_0xdc8845(0x342)?_0x509b3d[_0x11a278][_0xdc8845(0x241)][_0xdc8845(0x322)]['de']:_0x509b3d[_0x11a278]['common'][_0xdc8845(0x322)];_0x1fefcf[_0xdc8845(0x224)](_0x4bdad3=>_0x24308d[_0x4bdad3]=_0x77bf78);}const _0x3e15ba=_0x9217f6[_0xdc8845(0x357)]||[],_0x32b4b1=_0x9217f6['motion']!==![],_0x1c7f7f=_0x9217f6['doors']!==![],_0x43c4e4=_0x9217f6[_0xdc8845(0x201)]!==![],_0xf7ed80=_0x9217f6[_0xdc8845(0x1bb)]===!![],_0x5c49dd=_0x9217f6[_0xdc8845(0x170)]===!![];for(const _0x43b8a7 in _0x3b35f9){const _0x30cb7e=_0x3b35f9[_0x43b8a7];if(_0x30cb7e[_0xdc8845(0x2a1)]!==_0xdc8845(0x1b4)||!_0x30cb7e[_0xdc8845(0x241)])continue;if(ADAPTER_BLACKLIST[_0xdc8845(0x23b)](_0x575823=>_0x43b8a7[_0xdc8845(0x255)](_0x575823))&&!_0x5c49dd)continue;const _0x3773dc=(_0x30cb7e['common'][_0xdc8845(0x335)]||'')[_0xdc8845(0x176)]();let _0x383a2b=(typeof _0x30cb7e[_0xdc8845(0x241)][_0xdc8845(0x322)]===_0xdc8845(0x342)?_0x30cb7e[_0xdc8845(0x241)][_0xdc8845(0x322)]['de']:_0x30cb7e['common'][_0xdc8845(0x322)])||_0x43b8a7;const _0x51248c=_0x383a2b[_0xdc8845(0x176)]();let _0x5217d2=![],_0x372371=![];if(_0x3e15ba[_0xdc8845(0x231)]>0x0){const _0x57e4bc=_0x12fb04[_0x43b8a7]||[],_0x580e55=_0x43b8a7['split']('.')[_0xdc8845(0x2f2)](0x0,-0x1)['join']('.'),_0x5e598c=_0x12fb04[_0x580e55]||[];(_0x57e4bc[_0xdc8845(0x23b)](_0x5a48e9=>_0x3e15ba[_0xdc8845(0x18d)](_0x5a48e9))||_0x5e598c[_0xdc8845(0x23b)](_0x562ae3=>_0x3e15ba[_0xdc8845(0x18d)](_0x562ae3)))&&(_0x5217d2=!![],_0x372371=!![]);}if(!_0x5217d2&&!_0x5c49dd){if(HARD_IGNORE_TERMS[_0xdc8845(0x23b)](_0xd03e33=>_0x43b8a7[_0xdc8845(0x18d)](_0xd03e33)||_0x51248c[_0xdc8845(0x18d)](_0xd03e33[_0xdc8845(0x176)]())))continue;}if(BAD_NAMES[_0xdc8845(0x23b)](_0x551e92=>_0x51248c===_0x551e92||_0x51248c[_0xdc8845(0x173)]('.'+_0x551e92))){const _0x37e280=_0x43b8a7[_0xdc8845(0x34c)]('.');if(_0x37e280[_0xdc8845(0x231)]>0x2){const _0x40257b=_0x37e280[_0xdc8845(0x2f2)](0x0,-0x1)[_0xdc8845(0x1d3)]('.'),_0x4e880e=_0x3b35f9[_0x40257b];if(_0x4e880e&&_0x4e880e[_0xdc8845(0x241)]&&_0x4e880e['common']['name']){const _0x4e3daa=typeof _0x4e880e['common'][_0xdc8845(0x322)]===_0xdc8845(0x342)?_0x4e880e['common'][_0xdc8845(0x322)]['de']:_0x4e880e[_0xdc8845(0x241)][_0xdc8845(0x322)];_0x4e3daa&&!_0x383a2b[_0xdc8845(0x18d)](_0x4e3daa)&&(_0x383a2b=_0x4e3daa+'\x20'+_0x383a2b);}}}let _0x25f89b='';if(_0x32b4b1&&(_0x3773dc[_0xdc8845(0x18d)]('motion')||_0x3773dc[_0xdc8845(0x18d)](_0xdc8845(0x30e))||_0x51248c['includes'](_0xdc8845(0x2d4))||_0x51248c[_0xdc8845(0x18d)](_0xdc8845(0x369))))_0x25f89b=_0xdc8845(0x2ff);else{if(!_0x25f89b&&_0x1c7f7f&&(_0x3773dc['includes'](_0xdc8845(0x1cf))||_0x3773dc[_0xdc8845(0x18d)]('window')||_0x3773dc[_0xdc8845(0x18d)](_0xdc8845(0x1d4))||_0x3773dc[_0xdc8845(0x18d)](_0xdc8845(0x216))||_0x3773dc['includes'](_0xdc8845(0x35d))||_0x51248c[_0xdc8845(0x18d)]('fenster')||_0x51248c['includes']('tÃ¼r')||_0x51248c[_0xdc8845(0x18d)](_0xdc8845(0x21b))))_0x25f89b='door';else{if(!_0x25f89b&&_0x43c4e4&&(_0x3773dc[_0xdc8845(0x18d)](_0xdc8845(0x2cf))||_0x3773dc[_0xdc8845(0x18d)](_0xdc8845(0x2a8))||_0x3773dc[_0xdc8845(0x18d)](_0xdc8845(0x33c))||_0x51248c[_0xdc8845(0x18d)](_0xdc8845(0x333))||_0x51248c[_0xdc8845(0x18d)](_0xdc8845(0x2de))||_0x51248c[_0xdc8845(0x18d)]('schalter'))){if(_0x30cb7e[_0xdc8845(0x241)][_0xdc8845(0x288)]||_0x3773dc[_0xdc8845(0x18d)](_0xdc8845(0x189)))_0x25f89b='light';}else{if(!_0x25f89b&&_0xf7ed80&&(_0x3773dc[_0xdc8845(0x18d)]('temperature')||_0x3773dc['includes'](_0xdc8845(0x242))||_0x3773dc['includes'](_0xdc8845(0x1a4))||_0x51248c[_0xdc8845(0x18d)]('temp')||_0x51248c['includes'](_0xdc8845(0x2a3))||_0x51248c[_0xdc8845(0x18d)](_0xdc8845(0x18b))))_0x25f89b=_0xdc8845(0x1bb);else{if(!_0x25f89b&&_0x372371)_0x25f89b='custom';}}}}if(_0x25f89b){let _0x14de20=_0x24308d[_0x43b8a7]||'';if(!_0x14de20){let _0x30d427=_0x43b8a7;for(let _0xadf721=0x0;_0xadf721<0x3;_0xadf721++){const _0x706d41=_0x30d427[_0xdc8845(0x186)]('.');if(_0x706d41===-0x1)break;_0x30d427=_0x30d427['substring'](0x0,_0x706d41);if(_0x24308d[_0x30d427]){_0x14de20=_0x24308d[_0x30d427];break;}}}_0x9e45e3[_0xdc8845(0x20f)]({'id':_0x43b8a7,'name':_0x383a2b,'location':_0x14de20,'type':_0x25f89b,'logDuplicates':_0x25f89b===_0xdc8845(0x2ff),'isExit':![],'_score':_0x14de20?0x50:_0x25f89b===_0xdc8845(0x31f)?0x5a:0x28});}}return _0x9e45e3[_0xdc8845(0x297)]((_0x58bed9,_0x30160e)=>_0x30160e[_0xdc8845(0x35c)]-_0x58bed9['_score']),_0x9e45e3;}async function executeAutomationAction(_0x1b42b6){const _0x2d9369=a0_0x1ca316;try{const _0x12aa6f=await _0x1b42b6[_0x2d9369(0x1f8)]('analysis.automation.targetId'),_0x44b1e7=await _0x1b42b6[_0x2d9369(0x1f8)](_0x2d9369(0x340));if(_0x12aa6f&&_0x12aa6f[_0x2d9369(0x34d)]&&_0x44b1e7){const _0x4a846e=_0x12aa6f[_0x2d9369(0x34d)];let _0x37b647=_0x44b1e7[_0x2d9369(0x34d)];try{_0x37b647=JSON[_0x2d9369(0x1e1)](_0x37b647);}catch(_0x2b6816){}_0x1b42b6[_0x2d9369(0x33a)][_0x2d9369(0x19b)](_0x2d9369(0x1f5)+_0x4a846e+_0x2d9369(0x30b)+_0x37b647),await _0x1b42b6[_0x2d9369(0x2f7)](_0x4a846e,_0x37b647);}else _0x1b42b6[_0x2d9369(0x33a)][_0x2d9369(0x353)](_0x2d9369(0x190));}catch(_0x573476){_0x1b42b6[_0x2d9369(0x33a)]['error'](_0x2d9369(0x205)+_0x573476['message']);}}function tryParse(_0x320ccc){try{return JSON['parse'](_0x320ccc);}catch(_0x592dc2){return null;}}async function recordSequence(_0x7be68,_0x275f12){const _0x1e61c0=a0_0x1ca316,_0x23cbde=(_0x275f12['type']||'')['toLowerCase'](),_0x5c1e9f=[_0x1e61c0(0x2ff),'bewegung','prÃ¤senz',_0x1e61c0(0x239),'occupancy',_0x1e61c0(0x1cf),_0x1e61c0(0x365),_0x1e61c0(0x16a),'fenster','contact',_0x1e61c0(0x1d6),'light',_0x1e61c0(0x333),_0x1e61c0(0x2a8),'schalter',_0x1e61c0(0x33c),'lampe'];if(!_0x5c1e9f[_0x1e61c0(0x23b)](_0x4f2d0c=>_0x23cbde[_0x1e61c0(0x18d)](_0x4f2d0c))){_0x7be68['log'][_0x1e61c0(0x2ab)](_0x1e61c0(0x324)+_0x275f12['id']+_0x1e61c0(0x2ea)+_0x275f12['type']+_0x1e61c0(0x1eb));return;}if(!_0x275f12['value']){_0x7be68[_0x1e61c0(0x33a)][_0x1e61c0(0x2ab)]('[RECORDER\x20DEBUG]\x20Ignored\x20Event\x20'+_0x275f12['id']+_0x1e61c0(0x334)+_0x275f12['value']+')');return;}_0x7be68[_0x1e61c0(0x33a)]['debug'](_0x1e61c0(0x1ac)+_0x275f12['id']+'\x20('+_0x275f12[_0x1e61c0(0x2f6)]+')');if(sequenceTimer)clearTimeout(sequenceTimer);const _0x56df88={'loc':_0x275f12[_0x1e61c0(0x2f6)]||_0x1e61c0(0x32d),'id':_0x275f12['id'],'ts':Date['now']()};activeSequence['push'](_0x56df88),_0x7be68[_0x1e61c0(0x33a)][_0x1e61c0(0x2ab)]('[RECORDER]\x20Added\x20step\x20to\x20sequence:\x20'+_0x56df88[_0x1e61c0(0x316)]+_0x1e61c0(0x312)+activeSequence[_0x1e61c0(0x231)]+')'),sequenceTimer=setTimeout(async()=>{const _0x1695e3=_0x1e61c0;activeSequence[_0x1695e3(0x231)]>0x1?await saveCompletedSequence(_0x7be68):(_0x7be68[_0x1695e3(0x33a)][_0x1695e3(0x2ab)](_0x1695e3(0x209)+activeSequence[_0x1695e3(0x231)]+')'),activeSequence=[]);},SEQUENCE_TIMEOUT_MS);}async function saveCompletedSequence(_0x21e559){const _0x52c027=a0_0x1ca316;try{_0x21e559[_0x52c027(0x33a)][_0x52c027(0x19b)](_0x52c027(0x20e)+activeSequence[_0x52c027(0x231)]+_0x52c027(0x33e));const _0x3b226b=await _0x21e559[_0x52c027(0x1f8)](_0x52c027(0x2f5));let _0xe8dd0e=[];if(_0x3b226b&&_0x3b226b[_0x52c027(0x34d)])try{_0xe8dd0e=JSON[_0x52c027(0x1e1)](_0x3b226b[_0x52c027(0x34d)]);}catch(_0x5c17cb){}const _0x157268=activeSequence[0x0]['ts'],_0x145e61=activeSequence[_0x52c027(0x1dc)](_0x2b7756=>({'loc':_0x2b7756['loc'],'t_delta':Math[_0x52c027(0x24e)]((_0x2b7756['ts']-_0x157268)/0x3e8)})),_0x51584e={'timestamp':new Date(_0x157268)[_0x52c027(0x23a)](),'steps':_0x145e61,'duration':Math[_0x52c027(0x24e)]((activeSequence[activeSequence[_0x52c027(0x231)]-0x1]['ts']-_0x157268)/0x3e8),'daytime':new Date(_0x157268)[_0x52c027(0x2fd)]()};_0xe8dd0e[_0x52c027(0x20f)](_0x51584e),_0xe8dd0e[_0x52c027(0x231)]>MAX_TRAINING_SET_SIZE&&_0xe8dd0e['shift'](),await _0x21e559['setStateAsync'](_0x52c027(0x2f5),{'val':JSON[_0x52c027(0x1f2)](_0xe8dd0e),'ack':!![]}),activeSequence=[],sequenceTimer=null;}catch(_0x408230){_0x21e559[_0x52c027(0x33a)]['error']('[RECORDER]\x20Error\x20saving\x20sequence:\x20'+_0x408230[_0x52c027(0x2eb)]);}}async function getOutsideTemperatureNumeric(_0x5c7566){const _0x4c78f7=a0_0x1ca316;if(_0x5c7566[_0x4c78f7(0x1e7)][_0x4c78f7(0x26c)])try{const _0x3589ff=await _0x5c7566['getForeignStateAsync'](_0x5c7566[_0x4c78f7(0x1e7)][_0x4c78f7(0x26c)]);if(_0x3589ff&&_0x3589ff[_0x4c78f7(0x34d)]!==undefined&&_0x3589ff[_0x4c78f7(0x34d)]!==null){const _0x2740fa=parseFloat(_0x3589ff[_0x4c78f7(0x34d)]);if(!isNaN(_0x2740fa))return _0x2740fa;}}catch(_0x3a62d6){_0x5c7566[_0x4c78f7(0x33a)][_0x4c78f7(0x353)](_0x4c78f7(0x2d9)+_0x5c7566[_0x4c78f7(0x1e7)][_0x4c78f7(0x26c)]+':\x20'+_0x3a62d6[_0x4c78f7(0x2eb)]);}const _0x329e78=_0x5c7566[_0x4c78f7(0x1e7)][_0x4c78f7(0x195)];if(!_0x5c7566[_0x4c78f7(0x1e7)][_0x4c78f7(0x31b)]||!_0x329e78)return null;try{let _0xa09b67='';if(_0x329e78[_0x4c78f7(0x18d)](_0x4c78f7(0x26d)))_0xa09b67=_0x329e78+_0x4c78f7(0x2ec);else{if(_0x329e78[_0x4c78f7(0x18d)](_0x4c78f7(0x16c)))_0xa09b67=_0x329e78+'.NextHours.Location_1.Day_1.current.temp_value';else{if(_0x329e78[_0x4c78f7(0x18d)](_0x4c78f7(0x2fc)))_0xa09b67=_0x329e78+_0x4c78f7(0x163);else{if(_0x329e78[_0x4c78f7(0x18d)](_0x4c78f7(0x341)))_0xa09b67=_0x329e78+_0x4c78f7(0x25f);}}}if(_0xa09b67){const _0x30eddb=await _0x5c7566['getForeignStateAsync'](_0xa09b67);if(_0x30eddb&&_0x30eddb[_0x4c78f7(0x34d)]!==undefined&&_0x30eddb[_0x4c78f7(0x34d)]!==null)return parseFloat(_0x30eddb[_0x4c78f7(0x34d)]);}}catch(_0x4b8570){}return null;}async function recordThermodynamics(_0x68fecd,_0x893bdc,_0x571737,_0x3921da){const _0x121c78=a0_0x1ca316,_0x13fbde=await getOutsideTemperatureNumeric(_0x68fecd),_0x3bc6d7=await _0x68fecd['getStateAsync'](_0x121c78(0x2bd));let _0x4acd0e=[];if(_0x3bc6d7&&_0x3bc6d7[_0x121c78(0x34d)])try{_0x4acd0e=JSON[_0x121c78(0x1e1)](_0x3bc6d7[_0x121c78(0x34d)]);}catch(_0x346c1b){}_0x4acd0e[_0x121c78(0x20f)]({'ts':Date['now'](),'room':_0x3921da||_0x121c78(0x32d),'t_in':_0x571737,'t_out':_0x13fbde});if(_0x4acd0e[_0x121c78(0x231)]>THERMO_LOG_SIZE)_0x4acd0e['shift']();await _0x68fecd[_0x121c78(0x24c)]('LTM.trainingData.thermodynamics',{'val':JSON[_0x121c78(0x1f2)](_0x4acd0e),'ack':!![]});}function installPythonDependencies(_0x3f7193){const _0x9f26f1=a0_0x1ca316;if(_0x3f7193['dependencyInstallInProgress'])return;_0x3f7193[_0x9f26f1(0x354)]=!![];const _0x5820bf=path[_0x9f26f1(0x1d3)](__dirname,_0x9f26f1(0x182),'requirements.txt');_0x3f7193['log'][_0x9f26f1(0x19b)]('ðŸ› ï¸\x20AUTO-FIX:\x20Installing\x20Python\x20dependencies\x20from\x20'+_0x5820bf+_0x9f26f1(0x1d2)),stopPythonService(_0x3f7193);const _0x4787d4='python3\x20-m\x20pip\x20install\x20-r\x20\x22'+_0x5820bf+_0x9f26f1(0x1be);exec(_0x4787d4,(_0x36c183,_0x3c8777,_0x1d7496)=>{const _0x533722=_0x9f26f1;_0x3f7193[_0x533722(0x354)]=![],_0x36c183?(_0x3f7193[_0x533722(0x33a)][_0x533722(0x272)](_0x533722(0x2cd)),_0x3f7193[_0x533722(0x33a)]['error']('Details:\x20'+(_0x1d7496||_0x36c183[_0x533722(0x2eb)])),_0x3f7193[_0x533722(0x33a)][_0x533722(0x272)]('TRY\x20THIS\x20MANUALLY:\x20sudo\x20apt\x20install\x20python3-pip\x20-y\x20&&\x20sudo\x20python3\x20-m\x20pip\x20install\x20-r\x20\x22'+_0x5820bf+_0x533722(0x1be))):(_0x3f7193['log'][_0x533722(0x19b)]('âœ…\x20AUTO-FIX\x20SUCCESS.\x20Dependencies\x20installed.\x20Restarting\x20Service...'),startPythonService(_0x3f7193));});}async function processSensorEvent(_0x19dbde,_0x36610d,_0x422979,_0x512479){const _0x5eb641=a0_0x1ca316;if(!_0x512479)return;const _0x357367=_0x422979[_0x5eb641(0x34d)],_0xe369c9=Date[_0x5eb641(0x2c0)]();_0x19dbde[_0x5eb641(0x33a)]['debug'](_0x5eb641(0x2db)+_0x36610d+_0x5eb641(0x30b)+_0x357367);const _0x486bdf=_0x19dbde['sensorLastValues'][_0x36610d];_0x19dbde['sensorLastValues'][_0x36610d]=_0x357367;if(!_0x512479['logDuplicates']&&_0x486bdf!=undefined&&_0x486bdf==_0x357367){_0x19dbde[_0x5eb641(0x33a)]['debug'](_0x5eb641(0x212)+_0x512479['name']+_0x5eb641(0x306)+_0x357367+')');return;}const _0x1fd2d7=(_0x512479[_0x5eb641(0x2a1)]||'')[_0x5eb641(0x176)](),_0x5e2372=_0x1fd2d7[_0x5eb641(0x18d)](_0x5eb641(0x1bb))||_0x1fd2d7[_0x5eb641(0x18d)]('temperatur')||_0x1fd2d7[_0x5eb641(0x18d)](_0x5eb641(0x2a3))||_0x1fd2d7['includes'](_0x5eb641(0x18b));_0x19dbde[_0x5eb641(0x2e5)]&&_0x5e2372&&recordThermodynamics(_0x19dbde,_0x36610d,_0x357367,_0x512479[_0x5eb641(0x2f6)]);const _0x3c5e78={'timestamp':_0xe369c9,'id':_0x36610d,'name':_0x512479[_0x5eb641(0x322)],'type':_0x512479['type'],'location':_0x512479['location'],'value':_0x357367};_0x19dbde[_0x5eb641(0x2c3)][_0x5eb641(0x17f)](_0x3c5e78);if(_0x19dbde[_0x5eb641(0x2c3)][_0x5eb641(0x231)]>HISTORY_MAX_SIZE)_0x19dbde[_0x5eb641(0x2c3)]['pop']();await _0x19dbde['setStateAsync'](_0x5eb641(0x31e),{'val':JSON['stringify'](_0x3c5e78),'ack':!![]}),await _0x19dbde[_0x5eb641(0x24c)](_0x5eb641(0x36b),{'val':JSON[_0x5eb641(0x1f2)](_0x19dbde['eventHistory']),'ack':!![]});_0x19dbde['isProVersion']&&(_0x19dbde['rawEventLog'][_0x5eb641(0x20f)](_0x3c5e78),await saveRawEventLog(_0x19dbde),recordSequence(_0x19dbde,_0x3c5e78));if(_0x512479['isExit']&&_0x357367===!![]){if(_0x19dbde[_0x5eb641(0x22a)]&&!_0x19dbde[_0x5eb641(0x290)])_0x19dbde[_0x5eb641(0x33a)]['info'](_0x5eb641(0x16b)+_0x512479[_0x5eb641(0x322)]+').\x20Starting\x20Timer.'),startExitTimer(_0x19dbde);else!_0x19dbde[_0x5eb641(0x22a)]&&(_0x19dbde[_0x5eb641(0x33a)][_0x5eb641(0x19b)](_0x5eb641(0x1b3)+_0x512479[_0x5eb641(0x322)]+'.\x20Welcome\x20home.'),await setPresence(_0x19dbde,!![]));}else _0x512479[_0x5eb641(0x2a1)]===_0x5eb641(0x2ff)&&_0x357367===!![]&&(_0x19dbde[_0x5eb641(0x326)]&&(_0x19dbde[_0x5eb641(0x33a)][_0x5eb641(0x19b)](_0x5eb641(0x2e1)),abortExitTimer(_0x19dbde)),!_0x19dbde[_0x5eb641(0x22a)]&&_0x19dbde[_0x5eb641(0x222)]===SYSTEM_MODES[_0x5eb641(0x215)]&&await setPresence(_0x19dbde,!![]));}async function runGeminiAnalysis(_0x2760a2,_0x99cead=''){const _0x54b180=a0_0x1ca316;if(!_0x2760a2[_0x54b180(0x2b9)])return;if(_0x2760a2[_0x54b180(0x2c3)][_0x54b180(0x231)]===0x0)return;const _0x54734c=_0x2760a2['eventHistory'][_0x54b180(0x2f2)](0x0,0xf),_0x412ab9=await getWeatherContext(_0x2760a2),_0x109a6c=_0x2760a2[_0x54b180(0x222)],_0x3539b9=PERSONA_MAPPING[_0x2760a2[_0x54b180(0x1e7)][_0x54b180(0x273)]||_0x54b180(0x1b7)],_0x4fb65a=_0x2760a2[_0x54b180(0x1e7)][_0x54b180(0x331)]||'Keine\x20Details.';let _0x2316f3=![];try{const _0x34411d=await _0x2760a2['getStateAsync'](_0x54b180(0x2d3));if(_0x34411d&&_0x34411d[_0x54b180(0x34d)])_0x2316f3=!![];}catch(_0x171035){}const _0x1bb787=_0x54b180(0x300)+_0x3539b9+_0x54b180(0x250)+_0x4fb65a+_0x54b180(0x32f)+_0x109a6c+_0x54b180(0x221)+_0x412ab9+_0x54b180(0x1a1)+(_0x99cead||_0x54b180(0x2ae))+_0x54b180(0x252)+JSON[_0x54b180(0x1f2)](_0x54734c)+_0x54b180(0x310);try{const _0x4be6df=await _0x2760a2[_0x54b180(0x2b9)][_0x54b180(0x259)](_0x1bb787),_0x16a732=_0x4be6df[_0x54b180(0x34a)][_0x54b180(0x26b)]()[_0x54b180(0x2af)](/```json|```/g,'')[_0x54b180(0x26e)](),_0x277254=JSON[_0x54b180(0x1e1)](_0x16a732);await _0x2760a2[_0x54b180(0x24c)](_0x54b180(0x22d),{'val':JSON['stringify'](_0x277254),'ack':!![]});_0x277254[_0x54b180(0x309)]&&await _0x2760a2[_0x54b180(0x24c)]('analysis.activitySummary',{'val':_0x277254[_0x54b180(0x309)],'ack':!![]});const _0x2fe133={'timestamp':Date['now'](),'id':Date['now']()[_0x54b180(0x287)](),'analysis':{'activity':{'summary':_0x277254[_0x54b180(0x309)]||_0x54b180(0x1e8),'isAlert':_0x277254['isAlert']||![],'alertReason':_0x277254['alertReason']},'comfort':{'automationProposal':_0x277254[_0x54b180(0x279)]}}};await updateAnalysisHistory(_0x2760a2,_0x2fe133);const _0x1c73a6=_0x277254[_0x54b180(0x2f1)]||![];_0x1c73a6!==_0x2760a2['lastAlertState']&&(await _0x2760a2[_0x54b180(0x24c)](_0x54b180(0x349),{'val':_0x1c73a6,'ack':!![]}),_0x2760a2[_0x54b180(0x271)]=_0x1c73a6,_0x1c73a6&&(await _0x2760a2[_0x54b180(0x24c)]('analysis.alertReason',{'val':_0x277254[_0x54b180(0x27b)],'ack':!![]}),sendNotification(_0x2760a2,_0x54b180(0x356)+_0x277254['alertReason'],![],_0x277254[_0x54b180(0x1fe)]))),_0x277254[_0x54b180(0x279)]&&_0x277254[_0x54b180(0x279)]['detected']&&_0x277254[_0x54b180(0x279)]['targetId']&&(_0x2760a2[_0x54b180(0x33a)]['info']('ðŸ¤–\x20BUTLER\x20PROPOSAL:\x20'+_0x277254[_0x54b180(0x279)]['description']),await _0x2760a2[_0x54b180(0x24c)]('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),await _0x2760a2['setStateAsync'](_0x54b180(0x207),{'val':_0x277254[_0x54b180(0x279)][_0x54b180(0x175)],'ack':!![]}),await _0x2760a2[_0x54b180(0x24c)]('analysis.automation.targetId',{'val':_0x277254['automationProposal']['targetId'],'ack':!![]}),await _0x2760a2[_0x54b180(0x24c)](_0x54b180(0x340),{'val':JSON[_0x54b180(0x1f2)](_0x277254[_0x54b180(0x279)][_0x54b180(0x24a)]),'ack':!![]}),_0x2316f3&&(_0x2760a2[_0x54b180(0x33a)][_0x54b180(0x19b)](_0x54b180(0x1f1)+_0x277254['automationProposal'][_0x54b180(0x2ba)]+_0x54b180(0x1d2)),await executeAutomationAction(_0x2760a2)));}catch(_0x46571e){_0x2760a2['log'][_0x54b180(0x272)](_0x54b180(0x165)+_0x46571e[_0x54b180(0x2eb)]);}}function sendToPython(_0x54f28d,_0x4cd0fb,_0x1de72d={}){const _0x2bddb2=a0_0x1ca316;if(!_0x54f28d[_0x2bddb2(0x292)]||!_0x54f28d[_0x2bddb2(0x292)]['stdin'][_0x2bddb2(0x258)])return;const _0x3779c8=JSON['stringify']({'command':_0x4cd0fb,..._0x1de72d});try{_0x54f28d[_0x2bddb2(0x292)][_0x2bddb2(0x30f)][_0x2bddb2(0x288)](_0x3779c8+'\x0a');}catch(_0x2a5b41){_0x54f28d[_0x2bddb2(0x33a)]['error']('Failed\x20to\x20send\x20to\x20Python:\x20'+_0x2a5b41[_0x2bddb2(0x2eb)]);}}function runPythonHealthCheck(_0x2b8596){const _0x59bb42=a0_0x1ca316;if(!_0x2b8596[_0x59bb42(0x208)]||_0x2b8596['dailyDigests'][_0x59bb42(0x231)]<0x2){_0x2b8596['log']['info'](_0x59bb42(0x29b));return;}const _0x2ce230=_0x2b8596[_0x59bb42(0x208)][_0x59bb42(0x1dc)](_0x333eb8=>{const _0x53ada2=_0x59bb42,_0x4bc8cf=(_0x333eb8[_0x53ada2(0x1cc)]||'')[_0x53ada2(0x176)]();return ACTIVITY_LEVEL_MAP[_0x4bc8cf]||0x32;});_0x2b8596[_0x59bb42(0x33a)][_0x59bb42(0x19b)](_0x59bb42(0x1af)+_0x2ce230[_0x59bb42(0x231)]+_0x59bb42(0x202)),sendToPython(_0x2b8596,_0x59bb42(0x1b8),{'values':_0x2ce230,'tag':'Activity-Level'});}function handlePythonResult(_0x328640,_0x550b6b){const _0x5ece02=a0_0x1ca316;if(_0x550b6b[_0x5ece02(0x2a1)]===_0x5ece02(0x2e7))_0x328640[_0x5ece02(0x33a)][_0x5ece02(0x2ab)]('ðŸ\x20Python\x20Pong\x20received!\x20Latency\x20check\x20passed.');else{if(_0x550b6b[_0x5ece02(0x2a1)]===_0x5ece02(0x1a2)){const {tag:_0xc39334,diagnosis:_0x1e02bb,change_percent:_0x1635bb}=_0x550b6b['payload'];_0x328640[_0x5ece02(0x33a)]['info'](_0x5ece02(0x339)+_0xc39334+_0x5ece02(0x346)+_0x1e02bb+'\x20('+_0x1635bb+'%)'),_0x328640[_0x5ece02(0x24c)](_0x5ece02(0x22b),{'val':_0x1e02bb,'ack':!![]}),_0x328640['setStateAsync'](_0x5ece02(0x1b1),{'val':_0x1635bb,'ack':!![]});}}}function startPythonService(_0x966a43){const _0x26b5ea=a0_0x1ca316;try{const _0x33de32=path['join'](__dirname,'python_service',_0x26b5ea(0x36e));_0x966a43[_0x26b5ea(0x33a)][_0x26b5ea(0x19b)](_0x26b5ea(0x22e)+_0x33de32),_0x966a43[_0x26b5ea(0x292)]=spawn('python3',[_0x33de32]),_0x966a43[_0x26b5ea(0x292)][_0x26b5ea(0x262)]['on'](_0x26b5ea(0x166),_0x219535=>{const _0x20941c=_0x26b5ea,_0x3b02e6=_0x219535[_0x20941c(0x287)]()[_0x20941c(0x34c)]('\x0a');_0x3b02e6['forEach'](_0x1e8995=>{const _0x5eb622=_0x20941c,_0x1b0087=_0x1e8995[_0x5eb622(0x26e)]();if(!_0x1b0087)return;if(_0x1b0087[_0x5eb622(0x255)]('[LOG]'))_0x966a43['log'][_0x5eb622(0x2ab)]('[PYTHON]\x20'+_0x1b0087[_0x5eb622(0x17a)](0x5)['trim']());else{if(_0x1b0087[_0x5eb622(0x255)]('[RESULT]'))try{const _0x2a7321=JSON[_0x5eb622(0x1e1)](_0x1b0087[_0x5eb622(0x17a)](0x8)[_0x5eb622(0x26e)]());handlePythonResult(_0x966a43,_0x2a7321);}catch(_0x39ab50){_0x966a43[_0x5eb622(0x33a)][_0x5eb622(0x353)](_0x5eb622(0x1c5)+_0x1b0087);}}(_0x1b0087['includes']('No\x20module\x20named')||_0x1b0087['includes']('Bibliotheken\x20nicht\x20gefunden')||_0x1b0087['includes']('ML-Libs\x20fehlen'))&&(_0x966a43[_0x5eb622(0x33a)]['warn'](_0x5eb622(0x1b0)),installPythonDependencies(_0x966a43));});}),_0x966a43['pythonProcess']['stderr']['on'](_0x26b5ea(0x166),_0x5189b0=>{const _0x49526c=_0x26b5ea,_0x5d3b04=_0x5189b0[_0x49526c(0x287)]()[_0x49526c(0x26e)]();_0x966a43[_0x49526c(0x33a)][_0x49526c(0x272)](_0x49526c(0x1ec)+_0x5d3b04);}),_0x966a43[_0x26b5ea(0x292)]['on'](_0x26b5ea(0x308),_0x1e5fbc=>{const _0x4df42f=_0x26b5ea;_0x966a43[_0x4df42f(0x33a)][_0x4df42f(0x19b)](_0x4df42f(0x1dd)+_0x1e5fbc),_0x966a43[_0x4df42f(0x292)]=null;}),_0x966a43[_0x26b5ea(0x292)]['on']('error',_0x429efc=>{const _0x3b8648=_0x26b5ea;_0x966a43[_0x3b8648(0x33a)][_0x3b8648(0x353)](_0x3b8648(0x30a)+_0x429efc[_0x3b8648(0x2eb)]);});}catch(_0x2de9b0){_0x966a43[_0x26b5ea(0x33a)][_0x26b5ea(0x272)]('Error\x20launching\x20Python\x20service:\x20'+_0x2de9b0[_0x26b5ea(0x2eb)]);}}function stopPythonService(_0x244ed3){const _0x653f09=a0_0x1ca316;if(_0x244ed3['pythonProcess']){_0x244ed3[_0x653f09(0x33a)][_0x653f09(0x19b)](_0x653f09(0x2ac));try{_0x244ed3[_0x653f09(0x292)]['kill']();}catch(_0x4ab5e3){_0x244ed3[_0x653f09(0x33a)][_0x653f09(0x353)]('Could\x20not\x20kill\x20Python\x20process:\x20'+_0x4ab5e3[_0x653f09(0x2eb)]);}_0x244ed3['pythonProcess']=null;}}class CogniLiving extends utils[a0_0x1ca316(0x20b)]{constructor(_0x113be0){const _0x4e260b=a0_0x1ca316;super({..._0x113be0,'name':_0x4e260b(0x210)}),this[_0x4e260b(0x2c3)]=[],this[_0x4e260b(0x19e)]=[],this['feedbackHistory']=[],this[_0x4e260b(0x2b6)]=[],this[_0x4e260b(0x208)]=[],this['sensorLastValues']={},this[_0x4e260b(0x19a)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x4e260b(0x22a)]=!![],this['exitTimer']=null,this[_0x4e260b(0x17d)]=null,this[_0x4e260b(0x290)]=![],this['genAI']=null,this[_0x4e260b(0x2b9)]=null,this['currentSystemMode']=SYSTEM_MODES[_0x4e260b(0x215)],this[_0x4e260b(0x2e5)]=![],this[_0x4e260b(0x271)]=![],this[_0x4e260b(0x345)]='unknown',this[_0x4e260b(0x1fc)]=null,this['ltmJob']=null,this[_0x4e260b(0x1e4)]=null,this[_0x4e260b(0x178)]=null,this[_0x4e260b(0x360)]=null,this['pythonProcess']=null,this[_0x4e260b(0x354)]=![],this['on'](_0x4e260b(0x31d),this[_0x4e260b(0x203)][_0x4e260b(0x204)](this)),this['on'](_0x4e260b(0x29e),this[_0x4e260b(0x191)]['bind'](this)),this['on']('unload',this[_0x4e260b(0x185)]['bind'](this)),this['on'](_0x4e260b(0x2eb),this[_0x4e260b(0x199)]['bind'](this));}async[a0_0x1ca316(0x203)](){const _0x4920a2=a0_0x1ca316;this[_0x4920a2(0x33a)][_0x4920a2(0x19b)]('cogni-living\x20adapter\x20starting\x20(v'+this[_0x4920a2(0x2ca)]+_0x4920a2(0x293)),await initZombies(this),this['config'][_0x4920a2(0x361)]=this[_0x4920a2(0x1e7)][_0x4920a2(0x361)]||'';try{this[_0x4920a2(0x2e5)]=await checkLicense(this,this['config']['licenseKey']);}catch(_0x1e686c){}this[_0x4920a2(0x33a)]['info']('[LICENSE\x20CHECK]\x20Key\x20present:\x20'+!!this['config'][_0x4920a2(0x361)]+_0x4920a2(0x336)+(this['isProVersion']?'âœ…\x20PRO\x20ACTIVATED':_0x4920a2(0x2f8)));if(!this[_0x4920a2(0x1e7)][_0x4920a2(0x30d)]||this[_0x4920a2(0x1e7)][_0x4920a2(0x30d)]<0.1)this['config']['inactivityThresholdHours']=0xc;await initHistory(this),await initSystemConfig(this);if(this[_0x4920a2(0x1e7)]['geminiApiKey'])try{this[_0x4920a2(0x1ef)]=new GoogleGenerativeAI(this[_0x4920a2(0x1e7)][_0x4920a2(0x1ff)]),this[_0x4920a2(0x2b9)]=this['genAI']['getGenerativeModel']({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x4920a2(0x294)}}),this['log'][_0x4920a2(0x19b)](_0x4920a2(0x22f));}catch(_0x54abcc){this['log'][_0x4920a2(0x272)](_0x4920a2(0x1e5)+_0x54abcc[_0x4920a2(0x2eb)]);}await createAllObjects(this),await loadSystemMode(this),await loadRawEventLog(this),await loadDailyDigests(this),this[_0x4920a2(0x18f)](_0x4920a2(0x284)),this[_0x4920a2(0x18f)](LTM_DP_TRIGGER_DIGEST),this[_0x4920a2(0x18f)](_0x4920a2(0x1ed)),this['subscribeStates'](_0x4920a2(0x296)),this[_0x4920a2(0x18f)](_0x4920a2(0x1a6)),this[_0x4920a2(0x18f)]('analysis.automation.autoApply'),await initSensorSubscriptions(this),await initPresenceSubscriptions(this),await setupTelegramListener(this),setTimeout(()=>checkWifiPresence(this),0x1388);if(this[_0x4920a2(0x1fc)])clearInterval(this[_0x4920a2(0x1fc)]);const _0x275df8=this[_0x4920a2(0x1e7)][_0x4920a2(0x19f)]||0xf;_0x275df8>0x0&&(this[_0x4920a2(0x33a)]['info'](_0x4920a2(0x18c)+_0x275df8+_0x4920a2(0x16f)),this[_0x4920a2(0x1fc)]=setInterval(()=>{runAutopilot(this);},_0x275df8*0x3c*0x3e8)),setupLtmScheduler(this),setupModeResetScheduler(this),setupDriftAnalysisScheduler(this),setupBriefingScheduler(this),startPythonService(this),setTimeout(()=>{const _0x2e7caa=_0x4920a2;this[_0x2e7caa(0x292)]&&runPythonHealthCheck(this);},0x1388);}[a0_0x1ca316(0x185)](_0x2fc9d8){const _0x42299e=a0_0x1ca316;if(this[_0x42299e(0x1fc)])clearInterval(this[_0x42299e(0x1fc)]);if(this[_0x42299e(0x178)])clearInterval(this['driftAnalysisTimer']);if(this['ltmJob'])this[_0x42299e(0x194)]['cancel']();if(this[_0x42299e(0x1e4)])this[_0x42299e(0x1e4)][_0x42299e(0x2c7)]();if(this['briefingJob'])this[_0x42299e(0x360)][_0x42299e(0x2c7)]();if(this[_0x42299e(0x326)])clearTimeout(this[_0x42299e(0x326)]);if(this[_0x42299e(0x17d)])clearTimeout(this['exitGraceTimer']);stopPythonService(this),_0x2fc9d8();}async['onStateChange'](_0x23f498,_0x26a3dd){const _0x38bb57=a0_0x1ca316;if(!_0x26a3dd)return;if(_0x23f498[_0x38bb57(0x18d)](_0x38bb57(0x227))&&_0x23f498['endsWith'](_0x38bb57(0x1f9))&&_0x26a3dd['val']){await handleTelegramResponse(this,_0x26a3dd[_0x38bb57(0x34d)]);return;}if(_0x23f498===this[_0x38bb57(0x319)]+'.'+SYSTEM_DP_MODE){_0x26a3dd[_0x38bb57(0x34d)]&&Object[_0x38bb57(0x2cb)](SYSTEM_MODES)[_0x38bb57(0x18d)](_0x26a3dd[_0x38bb57(0x34d)])&&(this[_0x38bb57(0x222)]=_0x26a3dd[_0x38bb57(0x34d)],_0x26a3dd[_0x38bb57(0x34d)]===SYSTEM_MODES[_0x38bb57(0x187)]?await setPresence(this,![]):await setPresence(this,!![]));if(!_0x26a3dd[_0x38bb57(0x2ee)])this[_0x38bb57(0x206)](_0x23f498,{'val':this[_0x38bb57(0x222)],'ack':!![]});return;}if(!_0x26a3dd['ack']){_0x23f498[_0x38bb57(0x18d)](_0x38bb57(0x284))&&_0x26a3dd['val']&&(this[_0x38bb57(0x206)](_0x23f498,{'val':![],'ack':!![]}),runGeminiAnalysis(this));if(_0x23f498[_0x38bb57(0x18d)]('triggerDailyDigest')&&_0x26a3dd[_0x38bb57(0x34d)]){this['setState'](_0x23f498,{'val':![],'ack':!![]});if(this[_0x38bb57(0x2e5)])createDailyDigest(this);}_0x23f498['includes'](_0x38bb57(0x285))&&_0x26a3dd['val']&&(this['setState'](_0x23f498,{'val':![],'ack':!![]}),sendMorningBriefing(this));_0x23f498[_0x38bb57(0x18d)](_0x38bb57(0x301))&&_0x26a3dd[_0x38bb57(0x34d)]&&(this[_0x38bb57(0x206)](_0x23f498,{'val':![],'ack':!![]}),executeAutomationAction(this));return;}if(this['config'][_0x38bb57(0x276)]&&this['config']['presenceDevices'][_0x38bb57(0x18d)](_0x23f498)){await checkWifiPresence(this);return;}const _0x2e0a15=(this['config'][_0x38bb57(0x2d0)]||[])[_0x38bb57(0x1c3)](_0x587554=>_0x587554['id']===_0x23f498);if(_0x2e0a15)processSensorEvent(this,_0x23f498,_0x26a3dd,_0x2e0a15);}async[a0_0x1ca316(0x199)](_0x6c895a){const _0x28f593=a0_0x1ca316;if(typeof _0x6c895a===_0x28f593(0x342)&&_0x6c895a['message'])try{if(_0x6c895a[_0x28f593(0x21d)]===_0x28f593(0x1d7)){const _0x2168e5=_0x6c895a['message']['apiKey']||this[_0x28f593(0x1e7)][_0x28f593(0x1ff)];if(!_0x2168e5)return this[_0x28f593(0x266)](_0x6c895a[_0x28f593(0x28c)],_0x6c895a[_0x28f593(0x21d)],{'success':![],'message':'Kein\x20API\x20Key\x20eingegeben.'},_0x6c895a[_0x28f593(0x184)]);try{const _0x205381=new GoogleGenerativeAI(_0x2168e5),_0x4df6c4=_0x205381[_0x28f593(0x1b5)]({'model':GEMINI_MODEL}),_0x1af3c6=await _0x4df6c4[_0x28f593(0x259)](_0x28f593(0x2e3)),_0x51b45a=await _0x1af3c6[_0x28f593(0x34a)],_0x5cfc8e=_0x51b45a['text']();this[_0x28f593(0x266)](_0x6c895a[_0x28f593(0x28c)],_0x6c895a[_0x28f593(0x21d)],{'success':!![],'message':_0x28f593(0x25b)+_0x5cfc8e['substring'](0x0,0x14)+'...'},_0x6c895a['callback']);}catch(_0x2cd1fc){this[_0x28f593(0x266)](_0x6c895a[_0x28f593(0x28c)],_0x6c895a[_0x28f593(0x21d)],{'success':![],'message':_0x28f593(0x1fa)+_0x2cd1fc[_0x28f593(0x2eb)]},_0x6c895a['callback']);}}else{if(_0x6c895a[_0x28f593(0x21d)]===_0x28f593(0x257)){}else{if(_0x6c895a[_0x28f593(0x21d)]===_0x28f593(0x289)){if(!this[_0x28f593(0x2e5)])return this[_0x28f593(0x266)](_0x6c895a[_0x28f593(0x28c)],_0x6c895a[_0x28f593(0x21d)],{'success':![],'isPro':![]},_0x6c895a[_0x28f593(0x184)]);let _0x346501={'status':'N/A','details':'','lastCheck':0x0};try{_0x346501[_0x28f593(0x169)]=(await this[_0x28f593(0x1f8)](LTM_DP_DRIFT_STATUS))[_0x28f593(0x34d)],_0x346501[_0x28f593(0x23d)]=(await this[_0x28f593(0x1f8)](LTM_DP_DRIFT_DETAILS))['val'],_0x346501[_0x28f593(0x1c4)]=(await this[_0x28f593(0x1f8)](LTM_DP_DRIFT_LAST_CHECK))['val'];}catch(_0x2ba33f){}const _0x356ca9=this[_0x28f593(0x19e)]||[];this[_0x28f593(0x266)](_0x6c895a[_0x28f593(0x28c)],_0x6c895a[_0x28f593(0x21d)],{'success':!![],'isPro':!![],'dailyDigests':this[_0x28f593(0x208)],'driftAnalysis':_0x346501,'analysisHistory':_0x356ca9},_0x6c895a[_0x28f593(0x184)]);}else{if(_0x6c895a[_0x28f593(0x21d)]===_0x28f593(0x265)){const _0x3dcfd5=this[_0x28f593(0x208)][_0x28f593(0x231)],_0x4357a3=new Date(),_0x5b9163=new Date(_0x4357a3[_0x28f593(0x23e)](),_0x4357a3['getMonth'](),_0x4357a3[_0x28f593(0x30c)]())[_0x28f593(0x251)](),_0x4862db=this[_0x28f593(0x2b6)][_0x28f593(0x278)](_0x20ff2a=>new Date(_0x20ff2a[_0x28f593(0x168)])[_0x28f593(0x251)]()>_0x5b9163)[_0x28f593(0x231)],_0x57e9e8=new Array(0x18)[_0x28f593(0x2df)](0x0);this['rawEventLog'][_0x28f593(0x224)](_0x2954e6=>{const _0x21717e=_0x28f593,_0x5c768e=new Date(_0x2954e6[_0x21717e(0x168)]);if(_0x5c768e[_0x21717e(0x251)]()>_0x5b9163)_0x57e9e8[_0x5c768e['getHours']()]++;});let _0x4f1311={'status':_0x28f593(0x1ab)};try{_0x4f1311[_0x28f593(0x169)]=(await this[_0x28f593(0x1f8)](LTM_DP_DRIFT_STATUS))[_0x28f593(0x34d)];}catch(_0x4acdcd){}let _0x4a400f='';try{const _0xfd6fc5=await this['getStateAsync'](_0x28f593(0x1c8));_0x4a400f=_0xfd6fc5?_0xfd6fc5['val']:'';}catch(_0x3439c6){}let _0x1aa33f=null;!this[_0x28f593(0x2b9)]&&(_0x1aa33f=this[_0x28f593(0x1e7)][_0x28f593(0x1ff)]?_0x28f593(0x28d):_0x28f593(0x188));let _0x54d719={'detected':![],'description':'','targetId':'','targetValue':'','autoApply':![]};try{const _0x2643fd=await this[_0x28f593(0x1f8)](_0x28f593(0x36a)),_0x528eef=await this[_0x28f593(0x1f8)](_0x28f593(0x207)),_0x37eb8f=await this[_0x28f593(0x1f8)]('analysis.automation.targetId'),_0x5ea455=await this['getStateAsync'](_0x28f593(0x340)),_0x1399a2=await this[_0x28f593(0x1f8)](_0x28f593(0x2d3));_0x2643fd&&_0x2643fd[_0x28f593(0x34d)]&&(_0x54d719[_0x28f593(0x2ed)]=!![],_0x54d719[_0x28f593(0x175)]=_0x528eef?_0x528eef[_0x28f593(0x34d)]:'',_0x54d719[_0x28f593(0x2ba)]=_0x37eb8f?_0x37eb8f[_0x28f593(0x34d)]:'',_0x54d719[_0x28f593(0x24a)]=_0x5ea455?_0x5ea455[_0x28f593(0x34d)]:''),_0x54d719['autoApply']=_0x1399a2?!!_0x1399a2[_0x28f593(0x34d)]:![];}catch(_0xad6aab){}this[_0x28f593(0x266)](_0x6c895a['from'],_0x6c895a[_0x28f593(0x21d)],{'success':!![],'eventHistory':this[_0x28f593(0x2c3)][_0x28f593(0x2f2)](0x0,0xf),'stats':{'digestCount':_0x3dcfd5,'eventCountToday':_0x4862db,'hourlyActivity':_0x57e9e8,'driftStatus':_0x4f1311[_0x28f593(0x169)],'isPresent':this[_0x28f593(0x22a)],'presenceWho':_0x4a400f,'minDays':this['config'][_0x28f593(0x174)]||0x7,'stbDays':this['config'][_0x28f593(0x260)]||0xe,'ltbDays':this[_0x28f593(0x1e7)]['ltmLtbWindowDays']||0x3c,'systemError':_0x1aa33f},'automation':_0x54d719},_0x6c895a[_0x28f593(0x184)]);}else{if(_0x6c895a[_0x28f593(0x21d)]==='getEnums'){const _0x35192a=await this[_0x28f593(0x28e)]('enum.functions.*',_0x28f593(0x1fd)),_0x442d25=[];if(_0x35192a)for(const _0x3490bb in _0x35192a){const _0x523617=_0x35192a[_0x3490bb],_0x2fefd6=(_0x523617[_0x28f593(0x241)]&&typeof _0x523617[_0x28f593(0x241)][_0x28f593(0x322)]===_0x28f593(0x342)?_0x523617[_0x28f593(0x241)]['name']['de']:_0x523617[_0x28f593(0x241)][_0x28f593(0x322)])||_0x523617[_0x28f593(0x241)]['name'];_0x442d25['push']({'id':_0x3490bb,'name':_0x2fefd6});}this[_0x28f593(0x266)](_0x6c895a['from'],_0x6c895a[_0x28f593(0x21d)],{'success':!![],'enums':_0x442d25},_0x6c895a[_0x28f593(0x184)]);}else{if(_0x6c895a[_0x28f593(0x21d)]==='scanDevices')try{const _0x19ee77=await scanForDevices(this,_0x6c895a[_0x28f593(0x2eb)]||{});this[_0x28f593(0x266)](_0x6c895a['from'],_0x6c895a[_0x28f593(0x21d)],{'success':!![],'devices':_0x19ee77},_0x6c895a[_0x28f593(0x184)]);}catch(_0x4940ad){this['sendTo'](_0x6c895a[_0x28f593(0x28c)],_0x6c895a[_0x28f593(0x21d)],{'success':![],'error':_0x4940ad['message']},_0x6c895a[_0x28f593(0x184)]);}else{if(_0x6c895a[_0x28f593(0x21d)]==='getCalendarNames'){const _0x37673e=_0x6c895a[_0x28f593(0x2eb)][_0x28f593(0x33b)];if(!_0x37673e)return this[_0x28f593(0x266)](_0x6c895a['from'],_0x6c895a[_0x28f593(0x21d)],{'success':![],'error':_0x28f593(0x1ee)},_0x6c895a[_0x28f593(0x184)]);const _0x1c2595=await getCalendarNames(this,_0x37673e);this[_0x28f593(0x266)](_0x6c895a[_0x28f593(0x28c)],_0x6c895a[_0x28f593(0x21d)],{'success':!![],'names':_0x1c2595},_0x6c895a[_0x28f593(0x184)]);}else{if(_0x6c895a[_0x28f593(0x21d)]===_0x28f593(0x28f)){const {targetId:_0x2ea09e,targetValue:_0x3efa58}=_0x6c895a[_0x28f593(0x2eb)];this[_0x28f593(0x33a)]['info'](_0x28f593(0x2c2)+_0x2ea09e+_0x28f593(0x30b)+_0x3efa58),await this['setStateAsync'](_0x28f593(0x36a),{'val':!![],'ack':!![]}),await this['setStateAsync'](_0x28f593(0x207),{'val':_0x28f593(0x2f9)+_0x2ea09e,'ack':!![]}),await this['setStateAsync'](_0x28f593(0x34f),{'val':_0x2ea09e,'ack':!![]}),await this[_0x28f593(0x24c)](_0x28f593(0x340),{'val':_0x3efa58,'ack':!![]}),this[_0x28f593(0x266)](_0x6c895a[_0x28f593(0x28c)],_0x6c895a['command'],{'success':!![]},_0x6c895a['callback']);}else{if(_0x6c895a['command']==='submitFeedback'){const {historyId:_0x4b4d6d,rating:_0x4a749b,comment:_0x46743e,alertReason:_0x2b3d0d}=_0x6c895a[_0x28f593(0x2eb)];_0x4b4d6d&&_0x4a749b?(await saveFeedback(this,{'timestamp':Date['now'](),'historyId':_0x4b4d6d,'rating':_0x4a749b,'comment':_0x46743e,'alertReason':_0x2b3d0d}),this['sendTo'](_0x6c895a[_0x28f593(0x28c)],_0x6c895a[_0x28f593(0x21d)],{'success':!![]},_0x6c895a[_0x28f593(0x184)])):this[_0x28f593(0x266)](_0x6c895a[_0x28f593(0x28c)],_0x6c895a[_0x28f593(0x21d)],{'success':![],'error':'Missing\x20data'},_0x6c895a['callback']);}else _0x6c895a[_0x28f593(0x21d)]==='dismissAutomation'&&(this[_0x28f593(0x33a)][_0x28f593(0x19b)]('User\x20dismissed\x20automation\x20proposal.'),await this['setStateAsync'](_0x28f593(0x36a),{'val':![],'ack':!![]}),await this['setStateAsync'](_0x28f593(0x207),{'val':'','ack':!![]}),this[_0x28f593(0x266)](_0x6c895a['from'],_0x6c895a[_0x28f593(0x21d)],{'success':!![]},_0x6c895a[_0x28f593(0x184)]));}}}}}}}}}catch(_0xb4e1c4){this[_0x28f593(0x33a)]['error'](_0x28f593(0x1f4)+_0x6c895a[_0x28f593(0x21d)]+':\x20'+_0xb4e1c4[_0x28f593(0x2eb)]);if(_0x6c895a[_0x28f593(0x184)])this[_0x28f593(0x266)](_0x6c895a[_0x28f593(0x28c)],_0x6c895a[_0x28f593(0x21d)],{'success':![],'error':_0xb4e1c4[_0x28f593(0x2eb)]},_0x6c895a[_0x28f593(0x184)]);}}}if(require[a0_0x1ca316(0x2e0)]!==module)module[a0_0x1ca316(0x347)]=_0x3218c1=>new CogniLiving(_0x3218c1);else new CogniLiving();