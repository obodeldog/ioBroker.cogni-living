function a0_0x3a2d(){const _0x50176e=['calendarName','find','callback','analysis.health.lastCheck','./lib/installer','manual','analysis.triggerBriefing','Gesendet','Instanz\x20nicht\x20gefunden','text','analysis.energy.warmupTimes','getState','abortExitTimer','getStateAsync','Key\x20not\x20found\x20or\x20not\x20provided','Notification\x20Test\x20Failed:\x20','_calName','checkThermostats','accuweather.0','analysis.automation.autoApply','ðŸŽ“\x20[RL-RESET]\x20Lern-Sperre\x20(Penalty)\x20fÃ¼r\x20\x27','triggerGaitAnalysis','testNotification','enum','./lib/dead_man','toLocaleDateString','updateLocation','1027924fXHhXu','subscribeStates','Sec-Training\x20started...','location','apiKey','analysis.training.triggerEnergy','analysis.health.todayVector','runBaselineDriftAnalysis','trackerEnabled','trackerHeartbeat','analysis.training.triggerComfort','search','sendTo','payload','Simulation\x20durch\x20Admin\x20(Test)','forEach','object','9TtZmUK','scanDevices','17784qMaclL','onUnload','Fehler:\x20','activityLevel','518105YIacmw','triggerDailyDigest','message','setStateAsync','setupBriefingScheduler','TRACK_EVENT','NORMAL','calendarInstance','Standard','analysis.security.learningStatus','useWeather','sonn','Active\x20Ventilation\x20Alerts','cleanupGhostInterventions','scores','values','isGracePeriodActive','Test','endsWith','\x20Tage)','sendNotification',')\x20-\x20Phase\x20D\x20(Evolution)','send','analysis.trigger','driftAnalysisTimer','command','TRAIN_HEALTH','enum.rooms.*','devices','VACATION','common','stateChange','from','triggerBriefing','TRAIN_ENERGY','thermostat','TRAIN_COMFORT','slice','createAllObjects','cogni-living','heiter','floor','cancel','short','getOutsideTemperatureNumeric','rawEventLog','getTime','{\x22default\x22:\x2021}','analysis.automation.targetValue','triggerEnergyPrediction','instance','updateTopology','./lib/ai_agent','isArray','runGeminiAnalysis','stringify','setHours','telegram','pop','updateTopologyMatrix','analysis.training.triggerSecurity','Warm-Up\x20Time\x20(Minutes\x20to\x20Target)','setupDriftAnalysisScheduler','json','sensorLastValues','analysisHistory','LTM.trainingData.thermodynamics','Warm-Up\x20Target\x20Temps\x20(JSON)','dailyDigests','checkWifiPresence','add','models/gemini-flash-latest','updated','PREDICT_ENERGY','key','runPythonHealthCheck','isPresent','.communicate.request','ðŸ\x20Python\x20Antwort\x20erhalten:\x20','error','./lib/topology','val','presenceDevices','map','minutes_safe','currentSystemMode','dismissAutomation','getMinutes','modeResetJob','setPresence','Verbunden','bind','startSystem','analysis.energy.insulationScore','setupLtmScheduler','stopService','WiFi\x20Presence\x20detected.','loadSystemMode','Daten\x20nicht\x20verfÃ¼gbar','communicate.request','ANALYZE_TREND','includes','onReady','info','notifyTelegramEnabled','Kein\x20Kalender-Adapter','analysis.training.triggerHealth','forecast.current.weather','LTM.trainingData.sequences','temperature','string','minDaysForBaseline','isSolar','ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...','executeAutomationAction','sort','initZombies','HEALTH_TRAIN_RESULT','getLtmData','simulateEnergyMPC','push','handlePythonMessage','analysis.training.triggerTopology','170577nefxiZ','entries','PYTHON_EXE','now','analysis.energy.ventilationAlerts','analysis.training.status','onMessage','Kein\x20Wetter-Adapter','geminiModel','SYSTEM_DP_MODE','briefingJob','analysis.topology.structure','eventHistory','de-DE','log','analysis.automation.targetId','OPTIMIZE_ENERGY','ðŸ””\x20Dies\x20ist\x20ein\x20Test\x20von\x20Cogni-Living.','5007540QVoDnI','subscribeForeignStatesAsync','analysis.energy.rlPenalties','initSystemConfig','ready','sunny','daswetter.0','party','Party\x20Mode','Activity-Level','TRAINING_COMPLETE','.system.mode','name','lastTrackerEventTime','analysis.energy.warmupTargets','ltmJob','getEnums','namespace','constructor','fill','isProVersion','split','klar','scanThermostats','setObjectNotExistsAsync','analysis.automation.description','runAutopilot','./lib/automation','HEALTH_RESULT','SET_TOPOLOGY','./lib/python_bridge','Kein\x20API\x20Key\x20Ã¼bergeben','getForeignStateAsync','setState','Verbindung\x20erfolgreich!','getForeignObjectAsync','Reinforcement\x20Learning\x20Penalties','type','debug','system.mode','118114zmnssB','version','SET_LEARNING_MODE','join','length','lastAlertState','analysis.automation.patternDetected','./lib/scheduler','scanForDevices','@google/generative-ai','Keine\x20Antwort\x20von\x20Gemini','ack','\x20min\x20ausbleiben.','genAI','dependencyInstallInProgress','analysisTimer','geminiApiKey','getCalendarNames','64aVRtRz','updateHealthVector','(((.+)+)+)+$','64595PSxqJS','LTM.dailyDigests','./lib/recorder','apply','analysis.energy.pinnForecast','exitTimer','licenseKey','parse','cogni-living\x20adapter\x20starting\x20(v','getForeignObjectsAsync','motion','231zSrboG','Bereit\x20(Training\x20beendet)','SYSTEM_MODES','timestamp','testApiKey','inactivityThresholdHours','checkLicense','onStateChange','createDailyDigest','weatherunderground.0','Gemini\x20Init\x20Error:\x20','getGenerativeModel','notifyTelegramInstance','setupModeResetScheduler','config','checkSolarCondition','state','testContext','2-digit'];a0_0x3a2d=function(){return _0x50176e;};return a0_0x3a2d();}const a0_0x53a8b2=a0_0x2334;(function(_0x2afa21,_0x47c62c){const _0x5de1eb=a0_0x2334,_0x31f971=_0x2afa21();while(!![]){try{const _0x1f909e=-parseInt(_0x5de1eb(0x182))/0x1+-parseInt(_0x5de1eb(0x11d))/0x2*(parseInt(_0x5de1eb(0x17c))/0x3)+parseInt(_0x5de1eb(0x16b))/0x4+-parseInt(_0x5de1eb(0x132))/0x5+parseInt(_0x5de1eb(0x17e))/0x6*(parseInt(_0x5de1eb(0x13d))/0x7)+-parseInt(_0x5de1eb(0x12f))/0x8*(-parseInt(_0x5de1eb(0x1fd))/0x9)+parseInt(_0x5de1eb(0x20f))/0xa;if(_0x1f909e===_0x47c62c)break;else _0x31f971['push'](_0x31f971['shift']());}catch(_0x2d9ac3){_0x31f971['push'](_0x31f971['shift']());}}}(a0_0x3a2d,0x48fe0));const a0_0x1078fe=(function(){let _0x3fb602=!![];return function(_0x26e1db,_0x52397d){const _0x2378bc=_0x3fb602?function(){const _0x54b5bf=a0_0x2334;if(_0x52397d){const _0x25d519=_0x52397d[_0x54b5bf(0x135)](_0x26e1db,arguments);return _0x52397d=null,_0x25d519;}}:function(){};return _0x3fb602=![],_0x2378bc;};}()),a0_0x4532be=a0_0x1078fe(this,function(){const _0x251eed=a0_0x2334;return a0_0x4532be['toString']()['search'](_0x251eed(0x131))['toString']()[_0x251eed(0x221)](a0_0x4532be)[_0x251eed(0x176)](_0x251eed(0x131));});a0_0x4532be();'use strict';function a0_0x2334(_0x53d582,_0xd66001){const _0xbca0aa=a0_0x3a2d();return a0_0x2334=function(_0x4532be,_0x1078fe){_0x4532be=_0x4532be-0x110;let _0x3a2d3c=_0xbca0aa[_0x4532be];return _0x3a2d3c;},a0_0x2334(_0x53d582,_0xd66001);}const utils=require('@iobroker/adapter-core'),{GoogleGenerativeAI}=require(a0_0x53a8b2(0x126)),installer=require(a0_0x53a8b2(0x154)),scanner=require('./lib/scanner'),schedulers=require(a0_0x53a8b2(0x124)),topology=require(a0_0x53a8b2(0x1d2)),setup=require('./lib/setup'),recorder=require(a0_0x53a8b2(0x134)),pythonBridge=require(a0_0x53a8b2(0x113)),aiAgent=require(a0_0x53a8b2(0x1b6)),deadMan=require(a0_0x53a8b2(0x168)),automation=require(a0_0x53a8b2(0x110)),GEMINI_MODEL=a0_0x53a8b2(0x1c9),ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};class CogniLiving extends utils['Adapter']{constructor(_0x5ce630){const _0x25d054=a0_0x53a8b2;super({..._0x5ce630,'name':_0x25d054(0x1a9)}),this['eventHistory']=[],this['analysisHistory']=[],this[_0x25d054(0x1af)]=[],this[_0x25d054(0x1c6)]=[],this[_0x25d054(0x1c2)]={},this['systemConfig']={'latitude':0x0,'longitude':0x0,'city':''},this[_0x25d054(0x1ce)]=!![],this[_0x25d054(0x137)]=null,this['exitGraceTimer']=null,this[_0x25d054(0x192)]=![],this[_0x25d054(0x12a)]=null,this['geminiModel']=null,this[_0x25d054(0x1d7)]=setup[_0x25d054(0x13f)][_0x25d054(0x188)],this['isProVersion']=![],this[_0x25d054(0x122)]=![],this['analysisTimer']=null,this[_0x25d054(0x21e)]=null,this[_0x25d054(0x1da)]=null,this[_0x25d054(0x19a)]=null,this[_0x25d054(0x207)]=null,this[_0x25d054(0x12b)]=![],this[_0x25d054(0x174)]=null,this[_0x25d054(0x21c)]=Date[_0x25d054(0x200)](),this['on'](_0x25d054(0x213),this[_0x25d054(0x1e8)][_0x25d054(0x1dd)](this)),this['on'](_0x25d054(0x1a1),this[_0x25d054(0x144)]['bind'](this)),this['on']('unload',this[_0x25d054(0x17f)][_0x25d054(0x1dd)](this)),this['on']('message',this[_0x25d054(0x203)][_0x25d054(0x1dd)](this));}async[a0_0x53a8b2(0x1e8)](){const _0x4e115b=a0_0x53a8b2;this[_0x4e115b(0x20b)][_0x4e115b(0x1e9)](_0x4e115b(0x13a)+this[_0x4e115b(0x11e)]+_0x4e115b(0x197));if(!installer['checkAndInstall'](this,()=>this[_0x4e115b(0x1de)]()))return;}async['startSystem'](){const _0x40fd5a=a0_0x53a8b2;await setup[_0x40fd5a(0x1f6)](this);try{this[_0x40fd5a(0x223)]=await setup[_0x40fd5a(0x143)](this['config'][_0x40fd5a(0x138)]);}catch(_0x4d3108){}if(!this['config'][_0x40fd5a(0x142)]||this[_0x40fd5a(0x14b)][_0x40fd5a(0x142)]<0.1)this[_0x40fd5a(0x14b)]['inactivityThresholdHours']=0xc;await setup['initHistory'](this),await setup[_0x40fd5a(0x212)](this);if(this[_0x40fd5a(0x14b)][_0x40fd5a(0x12d)])try{this['genAI']=new GoogleGenerativeAI(this['config'][_0x40fd5a(0x12d)]),this[_0x40fd5a(0x205)]=this['genAI'][_0x40fd5a(0x148)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':'application/json'}}),this[_0x40fd5a(0x20b)][_0x40fd5a(0x1e9)]('Gemini\x20AI\x20initialized.');}catch(_0x4e71a6){this[_0x40fd5a(0x20b)]['error'](_0x40fd5a(0x147)+_0x4e71a6[_0x40fd5a(0x184)]);}await setup[_0x40fd5a(0x1a8)](this),await this[_0x40fd5a(0x1e3)](),await this[_0x40fd5a(0x227)](_0x40fd5a(0x136),{'type':_0x40fd5a(0x14d),'common':{'name':'PINN\x20AI\x20Forecast','type':_0x40fd5a(0x1f0),'role':_0x40fd5a(0x1c1),'read':!![],'write':![]},'native':{}}),await this[_0x40fd5a(0x227)](_0x40fd5a(0x201),{'type':_0x40fd5a(0x14d),'common':{'name':_0x40fd5a(0x18e),'type':_0x40fd5a(0x1f0),'role':_0x40fd5a(0x1c1),'read':!![],'write':![]},'native':{}}),await this[_0x40fd5a(0x227)](_0x40fd5a(0x15a),{'type':'state','common':{'name':_0x40fd5a(0x1bf),'type':_0x40fd5a(0x1f0),'role':_0x40fd5a(0x1c1),'read':!![],'write':![]},'native':{}}),await this[_0x40fd5a(0x227)](_0x40fd5a(0x21d),{'type':_0x40fd5a(0x14d),'common':{'name':_0x40fd5a(0x1c5),'type':'string','role':'json','read':!![],'write':!![],'def':_0x40fd5a(0x1b1)},'native':{}}),await this[_0x40fd5a(0x227)](_0x40fd5a(0x211),{'type':_0x40fd5a(0x14d),'common':{'name':_0x40fd5a(0x119),'type':'string','role':'json','read':!![],'write':![],'def':'{}'},'native':{}});try{const _0x557645=await this[_0x40fd5a(0x15d)]('LTM.rawEventLog');if(_0x557645&&_0x557645[_0x40fd5a(0x1d3)])this['rawEventLog']=JSON[_0x40fd5a(0x139)](_0x557645[_0x40fd5a(0x1d3)]);}catch(_0x89d0b){this[_0x40fd5a(0x1af)]=[];}try{const _0x5598c6=await this[_0x40fd5a(0x15d)](_0x40fd5a(0x133));if(_0x5598c6&&_0x5598c6[_0x40fd5a(0x1d3)])this[_0x40fd5a(0x1c6)]=JSON[_0x40fd5a(0x139)](_0x5598c6[_0x40fd5a(0x1d3)]);}catch(_0x571248){this[_0x40fd5a(0x1c6)]=[];}const _0x4b7b85=this['dailyDigests'][_0x40fd5a(0x121)]>=(this[_0x40fd5a(0x14b)][_0x40fd5a(0x1f1)]||0x7)?'Aktiv\x20('+this[_0x40fd5a(0x1c6)][_0x40fd5a(0x121)]+_0x40fd5a(0x195):'Lernphase\x20('+this['dailyDigests'][_0x40fd5a(0x121)]+'/'+(this[_0x40fd5a(0x14b)][_0x40fd5a(0x1f1)]||0x7)+')';await this[_0x40fd5a(0x185)]('LTM.baselineStatus',{'val':_0x4b7b85,'ack':!![]}),this[_0x40fd5a(0x16c)](_0x40fd5a(0x199)),this[_0x40fd5a(0x16c)]('LTM.triggerDailyDigest'),this[_0x40fd5a(0x16c)](_0x40fd5a(0x11c)),this[_0x40fd5a(0x16c)](_0x40fd5a(0x156)),this['subscribeStates']('analysis.automation.triggerAction'),this[_0x40fd5a(0x16c)](_0x40fd5a(0x163)),this[_0x40fd5a(0x16c)](_0x40fd5a(0x1be)),this[_0x40fd5a(0x16c)](_0x40fd5a(0x1ec)),this[_0x40fd5a(0x16c)](_0x40fd5a(0x170)),this[_0x40fd5a(0x16c)](_0x40fd5a(0x175)),this[_0x40fd5a(0x16c)](_0x40fd5a(0x1fc)),this[_0x40fd5a(0x16c)]('analysis.energy.mpcActive');const _0x1920e2=this[_0x40fd5a(0x14b)][_0x40fd5a(0x19e)];if(_0x1920e2)for(const _0x429631 of _0x1920e2){await this[_0x40fd5a(0x210)](_0x429631['id']);}const _0x2c4d24=this[_0x40fd5a(0x14b)]['presenceDevices'];if(_0x2c4d24)for(const _0x2f7704 of _0x2c4d24){await this[_0x40fd5a(0x210)](_0x2f7704);}if(this['config'][_0x40fd5a(0x1ea)]&&this[_0x40fd5a(0x14b)][_0x40fd5a(0x149)])await this['subscribeForeignStatesAsync'](this['config'][_0x40fd5a(0x149)]+_0x40fd5a(0x1cf));setTimeout(()=>this[_0x40fd5a(0x1c7)](),0x1388);if(this[_0x40fd5a(0x12c)])clearInterval(this['analysisTimer']);const _0x55b4ce=this[_0x40fd5a(0x14b)]['analysisInterval']||0xf;_0x55b4ce>0x0&&(this[_0x40fd5a(0x12c)]=setInterval(()=>{const _0x48c586=_0x40fd5a;this[_0x48c586(0x229)](),automation['checkCalendarTriggers'](this);},_0x55b4ce*0x3c*0x3e8)),setTimeout(()=>automation['checkCalendarTriggers'](this),0x2710),this['config'][_0x40fd5a(0x173)]!==![]&&(this[_0x40fd5a(0x174)]=setInterval(()=>{const _0x52e4db=_0x40fd5a;if(this[_0x52e4db(0x223)]){const _0x1e44f7=Date[_0x52e4db(0x200)](),_0xbe14bb=this[_0x52e4db(0x21c)]||_0x1e44f7,_0x3d2d4c=(_0x1e44f7-_0xbe14bb)/0x3e8;_0x3d2d4c>0x2&&(this[_0x52e4db(0x21c)]=_0x1e44f7,pythonBridge['send'](this,_0x52e4db(0x187),{'room':null,'dt':_0x3d2d4c}));}},0xbb8)),schedulers[_0x40fd5a(0x1e0)](this,()=>aiAgent[_0x40fd5a(0x145)](this,pythonBridge)),schedulers[_0x40fd5a(0x14a)](this),schedulers[_0x40fd5a(0x1c0)](this,()=>aiAgent[_0x40fd5a(0x172)](this)),schedulers[_0x40fd5a(0x186)](this,()=>aiAgent['sendMorningBriefing'](this)),pythonBridge['startService'](this,installer[_0x40fd5a(0x1ff)],_0x34e80a=>this[_0x40fd5a(0x1fb)](_0x34e80a)),setTimeout(async()=>{const _0x303fb5=_0x40fd5a;await topology['updateTopology'](this);try{const _0x43f890=await this[_0x303fb5(0x15d)](_0x303fb5(0x208));if(_0x43f890&&_0x43f890[_0x303fb5(0x1d3)])pythonBridge[_0x303fb5(0x198)](this,_0x303fb5(0x112),JSON[_0x303fb5(0x139)](_0x43f890['val']));}catch(_0x4f6fd3){}this[_0x303fb5(0x1cd)](),this['triggerGaitAnalysis'](),this['triggerEnergyPrediction'](),this[_0x303fb5(0x130)]();},0x1388);}[a0_0x53a8b2(0x17f)](_0x599082){const _0x9ed667=a0_0x53a8b2;if(this[_0x9ed667(0x12c)])clearInterval(this['analysisTimer']);if(this[_0x9ed667(0x19a)])clearInterval(this[_0x9ed667(0x19a)]);if(this[_0x9ed667(0x174)])clearInterval(this['trackerHeartbeat']);if(this[_0x9ed667(0x21e)])this[_0x9ed667(0x21e)][_0x9ed667(0x1ac)]();if(this[_0x9ed667(0x1da)])this[_0x9ed667(0x1da)][_0x9ed667(0x1ac)]();if(this[_0x9ed667(0x207)])this['briefingJob']['cancel']();recorder[_0x9ed667(0x15c)](this),pythonBridge[_0x9ed667(0x1e1)](this),_0x599082();}async[a0_0x53a8b2(0x144)](_0x4ddc67,_0xe4a4a2){const _0x5b95f1=a0_0x53a8b2;if(!_0xe4a4a2||this['dependencyInstallInProgress'])return;if(_0x4ddc67[_0x5b95f1(0x1e7)](_0x5b95f1(0x1bb))&&_0x4ddc67[_0x5b95f1(0x194)](_0x5b95f1(0x1e5))&&_0xe4a4a2[_0x5b95f1(0x1d3)])return;if(_0x4ddc67===this[_0x5b95f1(0x220)]+_0x5b95f1(0x21a)){if(_0xe4a4a2['val']&&Object[_0x5b95f1(0x191)](setup[_0x5b95f1(0x13f)])[_0x5b95f1(0x1e7)](_0xe4a4a2['val'])){this[_0x5b95f1(0x1d7)]=_0xe4a4a2[_0x5b95f1(0x1d3)];if(_0xe4a4a2[_0x5b95f1(0x1d3)]===setup[_0x5b95f1(0x13f)][_0x5b95f1(0x19f)])await recorder['setPresence'](this,![]);else await recorder[_0x5b95f1(0x1db)](this,!![]);if(this['isProVersion']){let _0x3bc16d=![],_0x3cf48b=0x0,_0x4ad448=_0x5b95f1(0x155);if(this['currentSystemMode']===_0x5b95f1(0x216))_0x3bc16d=!![],_0x3cf48b=0x168,_0x4ad448=_0x5b95f1(0x217);else this[_0x5b95f1(0x1d7)]==='guest'&&(_0x3bc16d=!![],_0x3cf48b=0x5a0,_0x4ad448='Guest\x20Mode');pythonBridge[_0x5b95f1(0x198)](this,_0x5b95f1(0x11f),{'active':_0x3bc16d,'duration':_0x3cf48b,'label':_0x4ad448}),await this[_0x5b95f1(0x185)](_0x5b95f1(0x18b),{'val':JSON['stringify']({'active':_0x3bc16d,'label':_0x4ad448,'timestamp':Date[_0x5b95f1(0x200)]()}),'ack':!![]});}}if(!_0xe4a4a2[_0x5b95f1(0x128)])this[_0x5b95f1(0x116)](_0x4ddc67,{'val':this[_0x5b95f1(0x1d7)],'ack':!![]});return;}if(!_0xe4a4a2[_0x5b95f1(0x128)]){if(_0x4ddc67[_0x5b95f1(0x1e7)](_0x5b95f1(0x199))&&_0xe4a4a2[_0x5b95f1(0x1d3)]){this[_0x5b95f1(0x116)](_0x4ddc67,{'val':![],'ack':!![]}),aiAgent[_0x5b95f1(0x1b8)](this);return;}if(_0x4ddc67[_0x5b95f1(0x1e7)](_0x5b95f1(0x183))&&_0xe4a4a2[_0x5b95f1(0x1d3)]){this[_0x5b95f1(0x116)](_0x4ddc67,{'val':![],'ack':!![]});if(this[_0x5b95f1(0x223)])aiAgent['createDailyDigest'](this,pythonBridge);return;}if(_0x4ddc67[_0x5b95f1(0x1e7)](_0x5b95f1(0x1a3))&&_0xe4a4a2['val']){this[_0x5b95f1(0x116)](_0x4ddc67,{'val':![],'ack':!![]}),aiAgent['sendMorningBriefing'](this);return;}if(_0x4ddc67[_0x5b95f1(0x1e7)]('automation.triggerAction')&&_0xe4a4a2[_0x5b95f1(0x1d3)]){this[_0x5b95f1(0x116)](_0x4ddc67,{'val':![],'ack':!![]}),aiAgent[_0x5b95f1(0x1f4)](this);return;}if(_0x4ddc67['includes'](_0x5b95f1(0x1be))&&_0xe4a4a2[_0x5b95f1(0x1d3)]){this['setState'](_0x4ddc67,{'val':![],'ack':!![]});if(this[_0x5b95f1(0x223)])try{const _0xdba908=await this['getStateAsync'](_0x5b95f1(0x1ee));if(_0xdba908&&_0xdba908[_0x5b95f1(0x1d3)]){const _0xf92ac2=JSON[_0x5b95f1(0x139)](_0xdba908['val']);this[_0x5b95f1(0x185)]('analysis.training.status',{'val':_0x5b95f1(0x16d),'ack':!![]}),pythonBridge['send'](this,'TRAIN_SECURITY',{'sequences':_0xf92ac2});}}catch(_0x5f3f3d){}return;}if(_0x4ddc67[_0x5b95f1(0x1e7)]('analysis.training.triggerHealth')&&_0xe4a4a2[_0x5b95f1(0x1d3)]){this[_0x5b95f1(0x116)](_0x4ddc67,{'val':![],'ack':!![]});if(this[_0x5b95f1(0x223)])try{const _0x54d3b6=await this['getStateAsync'](_0x5b95f1(0x133));if(_0x54d3b6&&_0x54d3b6[_0x5b95f1(0x1d3)])pythonBridge[_0x5b95f1(0x198)](this,_0x5b95f1(0x19c),{'digests':JSON['parse'](_0x54d3b6[_0x5b95f1(0x1d3)])});}catch(_0xe77ba2){}return;}if(_0x4ddc67[_0x5b95f1(0x1e7)](_0x5b95f1(0x170))&&_0xe4a4a2['val']){this[_0x5b95f1(0x116)](_0x4ddc67,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x53496c=await this[_0x5b95f1(0x15d)](_0x5b95f1(0x1c4));if(_0x53496c&&_0x53496c[_0x5b95f1(0x1d3)])pythonBridge['send'](this,_0x5b95f1(0x1a4),{'points':JSON['parse'](_0x53496c[_0x5b95f1(0x1d3)])});}catch(_0x2ea6cd){}return;}if(_0x4ddc67[_0x5b95f1(0x1e7)](_0x5b95f1(0x175))&&_0xe4a4a2[_0x5b95f1(0x1d3)]){this['setState'](_0x4ddc67,{'val':![],'ack':!![]});if(this[_0x5b95f1(0x223)])try{const _0x3eb09c=await this[_0x5b95f1(0x15d)]('LTM.rawEventLog');if(_0x3eb09c&&_0x3eb09c[_0x5b95f1(0x1d3)])pythonBridge['send'](this,_0x5b95f1(0x1a6),{'events':JSON[_0x5b95f1(0x139)](_0x3eb09c[_0x5b95f1(0x1d3)])});}catch(_0x3d5b0c){}return;}if(_0x4ddc67[_0x5b95f1(0x1e7)](_0x5b95f1(0x1fc))&&_0xe4a4a2[_0x5b95f1(0x1d3)]){this[_0x5b95f1(0x116)](_0x4ddc67,{'val':![],'ack':!![]}),topology[_0x5b95f1(0x1b5)](this);return;}}if(this['config'][_0x5b95f1(0x1d4)]&&this[_0x5b95f1(0x14b)]['presenceDevices']['includes'](_0x4ddc67)){await this['checkWifiPresence']();return;}const _0x4d8cd9=(this[_0x5b95f1(0x14b)][_0x5b95f1(0x19e)]||[])[_0x5b95f1(0x151)](_0x5b8db6=>_0x5b8db6['id']===_0x4ddc67);if(_0x4d8cd9){const _0x59f6af=await recorder['processSensorEvent'](this,_0x4ddc67,_0xe4a4a2,_0x4d8cd9);_0x59f6af&&_0x59f6af[_0x5b95f1(0x11a)]===_0x5b95f1(0x13c)&&_0x59f6af[_0x5b95f1(0x16e)]&&this[_0x5b95f1(0x223)]&&deadMan[_0x5b95f1(0x16a)](this,_0x59f6af[_0x5b95f1(0x16e)]),(_0x4d8cd9[_0x5b95f1(0x11a)]===_0x5b95f1(0x1ef)||_0x4d8cd9[_0x5b95f1(0x11a)]===_0x5b95f1(0x1a5))&&automation[_0x5b95f1(0x18f)](this);}}async['onMessage'](_0xd77293){const _0x5d31cc=a0_0x53a8b2;if(typeof _0xd77293===_0x5d31cc(0x17b)&&_0xd77293['message']){if(_0xd77293['command']===_0x5d31cc(0x161))try{const _0x3fb011=await automation[_0x5d31cc(0x226)](this);this[_0x5d31cc(0x177)](_0xd77293[_0x5d31cc(0x1a2)],_0xd77293['command'],{'success':!![],'results':_0x3fb011},_0xd77293[_0x5d31cc(0x152)]);}catch(_0x3327a4){this[_0x5d31cc(0x177)](_0xd77293[_0x5d31cc(0x1a2)],_0xd77293['command'],{'success':![],'error':_0x3327a4[_0x5d31cc(0x184)]},_0xd77293[_0x5d31cc(0x152)]);}else{if(_0xd77293['command']===_0x5d31cc(0x1f9))try{const {current_temps:_0x341a32,t_out:_0x365a1f,targets:_0x1ff95a,t_forecast:_0x504f81}=_0xd77293['message'],_0x52fc2e=[];let _0x13a53b={};try{const _0x398841=await this[_0x5d31cc(0x15d)](_0x5d31cc(0x1df));if(_0x398841&&_0x398841[_0x5d31cc(0x1d3)]){const _0x5ac100=JSON['parse'](_0x398841[_0x5d31cc(0x1d3)]);_0x13a53b=_0x5ac100[_0x5d31cc(0x190)]||_0x5ac100;}}catch(_0x5721f3){}const _0x22f53b=_0x504f81!==undefined&&_0x504f81!==null?(_0x365a1f+_0x504f81)/0x2:_0x365a1f;for(const [_0x500562,_0x41c50f]of Object[_0x5d31cc(0x1fe)](_0x341a32)){const _0x987944=_0x1ff95a[_0x500562]||0x15;if(_0x41c50f<=_0x987944)continue;let _0x595877=_0x13a53b[_0x500562]||-0.5;if(_0x595877>=0x0)_0x595877=-0.5;const _0x3e1b64=Math['abs'](_0x595877),_0x371975=_0x41c50f-_0x987944;let _0x39ac63=Math['floor'](_0x371975/_0x3e1b64*0x3c);const _0x2a33db=_0x41c50f-_0x365a1f,_0xd1f007=_0x41c50f-_0x22f53b;if(_0xd1f007!==0x0&&_0x2a33db!==0x0){const _0x36b5b0=_0x2a33db/_0xd1f007;_0x39ac63=Math[_0x5d31cc(0x1ab)](_0x39ac63*_0x36b5b0);}if(_0x39ac63>0xf){if(_0x39ac63>0xf0)_0x39ac63=0xf0;_0x52fc2e[_0x5d31cc(0x1fa)]({'room':_0x500562,'minutes_safe':_0x39ac63,'target':_0x987944,'current':_0x41c50f,'savings_msg':'Heizung\x20kann\x20'+_0x39ac63+_0x5d31cc(0x129)});}}_0x52fc2e[_0x5d31cc(0x1f5)]((_0x3d42b6,_0x349d63)=>_0x349d63['minutes_safe']-_0x3d42b6[_0x5d31cc(0x1d6)]),this['sendTo'](_0xd77293[_0x5d31cc(0x1a2)],_0xd77293['command'],{'success':!![],'proposals':_0x52fc2e},_0xd77293[_0x5d31cc(0x152)]);}catch(_0x46faf9){this['sendTo'](_0xd77293[_0x5d31cc(0x1a2)],_0xd77293['command'],{'success':![],'error':_0x46faf9[_0x5d31cc(0x184)]},_0xd77293['callback']);}else{if(_0xd77293[_0x5d31cc(0x19b)]==='resetRLPenalty')try{const _0x170237=_0xd77293[_0x5d31cc(0x184)][_0x5d31cc(0x1cc)],_0x3bc31d='analysis.energy.rlPenalties',_0x2dbe99=await this[_0x5d31cc(0x15d)](_0x3bc31d);let _0x5c09f9={};if(_0x2dbe99&&_0x2dbe99[_0x5d31cc(0x1d3)])try{_0x5c09f9=JSON[_0x5d31cc(0x139)](_0x2dbe99['val']);}catch(_0x2707a3){}_0x170237&&_0x5c09f9[_0x170237]?(delete _0x5c09f9[_0x170237],await this[_0x5d31cc(0x185)](_0x3bc31d,{'val':JSON['stringify'](_0x5c09f9),'ack':!![]}),this['log'][_0x5d31cc(0x1e9)](_0x5d31cc(0x164)+_0x170237+'\x27\x20wurde\x20manuell\x20vom\x20Benutzer\x20gelÃ¶scht.'),this['sendTo'](_0xd77293[_0x5d31cc(0x1a2)],_0xd77293[_0x5d31cc(0x19b)],{'success':!![]},_0xd77293[_0x5d31cc(0x152)])):this[_0x5d31cc(0x177)](_0xd77293[_0x5d31cc(0x1a2)],_0xd77293[_0x5d31cc(0x19b)],{'success':![],'error':_0x5d31cc(0x15e)},_0xd77293['callback']);}catch(_0x564600){this['sendTo'](_0xd77293['from'],_0xd77293[_0x5d31cc(0x19b)],{'success':![],'error':_0x564600[_0x5d31cc(0x184)]},_0xd77293[_0x5d31cc(0x152)]);}else{if(_0xd77293['command']===_0x5d31cc(0x1d8))await this['setStateAsync']('analysis.automation.patternDetected',{'val':![],'ack':!![]}),await this[_0x5d31cc(0x185)](_0x5d31cc(0x228),{'val':'','ack':!![]}),await this['setStateAsync'](_0x5d31cc(0x20c),{'val':'','ack':!![]}),this[_0x5d31cc(0x177)](_0xd77293[_0x5d31cc(0x1a2)],_0xd77293[_0x5d31cc(0x19b)],{'success':!![]},_0xd77293['callback']);else{if(_0xd77293['command']==='simulateButler'){const {targetId:_0x1c8199,targetValue:_0x3cd31f}=_0xd77293[_0x5d31cc(0x184)];await this['setStateAsync']('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),await this[_0x5d31cc(0x185)](_0x5d31cc(0x228),{'val':_0x5d31cc(0x179),'ack':!![]}),await this[_0x5d31cc(0x185)](_0x5d31cc(0x20c),{'val':_0x1c8199,'ack':!![]}),await this[_0x5d31cc(0x185)](_0x5d31cc(0x1b2),{'val':String(_0x3cd31f),'ack':!![]}),this[_0x5d31cc(0x177)](_0xd77293[_0x5d31cc(0x1a2)],_0xd77293[_0x5d31cc(0x19b)],{'success':!![]},_0xd77293['callback']);}else{if(_0xd77293['command']===_0x5d31cc(0x141))try{const _0x2a5631=_0xd77293[_0x5d31cc(0x184)][_0x5d31cc(0x16f)];if(!_0x2a5631)throw new Error(_0x5d31cc(0x114));const _0x2d1015=new GoogleGenerativeAI(_0x2a5631),_0x245077=_0x2d1015[_0x5d31cc(0x148)]({'model':GEMINI_MODEL}),_0x26632e=await _0x245077['generateContent'](_0x5d31cc(0x193)),_0x2debb5=await _0x26632e['response'];if(_0x2debb5[_0x5d31cc(0x159)]())this[_0x5d31cc(0x177)](_0xd77293['from'],_0xd77293[_0x5d31cc(0x19b)],{'success':!![],'message':_0x5d31cc(0x117)},_0xd77293['callback']);else throw new Error(_0x5d31cc(0x127));}catch(_0x127349){this[_0x5d31cc(0x177)](_0xd77293[_0x5d31cc(0x1a2)],_0xd77293['command'],{'success':![],'message':_0x127349[_0x5d31cc(0x184)]},_0xd77293['callback']);}else{if(_0xd77293[_0x5d31cc(0x19b)]===_0x5d31cc(0x17d))try{const _0xf8a960=await scanner[_0x5d31cc(0x125)](this,_0xd77293[_0x5d31cc(0x184)]||{});this[_0x5d31cc(0x177)](_0xd77293[_0x5d31cc(0x1a2)],_0xd77293['command'],{'success':!![],'devices':_0xf8a960},_0xd77293[_0x5d31cc(0x152)]);}catch(_0x15bcfc){this['sendTo'](_0xd77293[_0x5d31cc(0x1a2)],_0xd77293['command'],{'success':![],'error':_0x15bcfc[_0x5d31cc(0x184)]},_0xd77293['callback']);}else{if(_0xd77293[_0x5d31cc(0x19b)]===_0x5d31cc(0x1bd))try{const {matrix:_0x293141}=_0xd77293[_0x5d31cc(0x184)],_0x3fd38f=await this[_0x5d31cc(0x15d)](_0x5d31cc(0x208));if(_0x3fd38f&&_0x3fd38f['val']){const _0x3c2002=JSON[_0x5d31cc(0x139)](_0x3fd38f[_0x5d31cc(0x1d3)]);_0x3c2002['matrix']=_0x293141,_0x3c2002[_0x5d31cc(0x1ca)]=Date['now'](),await this['setStateAsync']('analysis.topology.structure',{'val':JSON['stringify'](_0x3c2002),'ack':!![]}),pythonBridge[_0x5d31cc(0x198)](this,_0x5d31cc(0x112),_0x3c2002);}this['sendTo'](_0xd77293[_0x5d31cc(0x1a2)],_0xd77293[_0x5d31cc(0x19b)],{'success':!![]},_0xd77293['callback']);}catch(_0xbca4d7){this[_0x5d31cc(0x20b)][_0x5d31cc(0x1d1)](_0xbca4d7);}else{if(_0xd77293[_0x5d31cc(0x19b)]===_0x5d31cc(0x1f8))this[_0x5d31cc(0x177)](_0xd77293[_0x5d31cc(0x1a2)],_0xd77293[_0x5d31cc(0x19b)],{'success':!![],'dailyDigests':this['dailyDigests']||[],'analysisHistory':this[_0x5d31cc(0x1c3)]||[]},_0xd77293[_0x5d31cc(0x152)]);else{if(_0xd77293[_0x5d31cc(0x19b)]==='getOverviewData'){const _0x48ebec=this[_0x5d31cc(0x1c6)]['length'],_0xee7677=new Array(0x18)[_0x5d31cc(0x222)](0x0),_0x200b17=new Date()[_0x5d31cc(0x1ba)](0x0,0x0,0x0,0x0);this[_0x5d31cc(0x209)]&&this['eventHistory'][_0x5d31cc(0x17a)](_0x5ccc78=>{const _0x40c3d9=_0x5d31cc;if(_0x5ccc78[_0x40c3d9(0x140)]>=_0x200b17){const _0xb91d0f=new Date(_0x5ccc78['timestamp'])['getHours']();if(_0xb91d0f>=0x0&&_0xb91d0f<0x18)_0xee7677[_0xb91d0f]++;}});let _0x55247f=![],_0x30ecf6='',_0x147ef3='',_0x379357='';try{const _0x4a45b3=await this['getStateAsync'](_0x5d31cc(0x123));if(_0x4a45b3&&_0x4a45b3[_0x5d31cc(0x1d3)]){_0x55247f=!![];const _0x44e9d9=await this[_0x5d31cc(0x15d)](_0x5d31cc(0x228));_0x30ecf6=_0x44e9d9?_0x44e9d9[_0x5d31cc(0x1d3)]:'';const _0x2fa772=await this[_0x5d31cc(0x15d)]('analysis.automation.targetId');_0x147ef3=_0x2fa772?_0x2fa772[_0x5d31cc(0x1d3)]:'';const _0x1f035b=await this[_0x5d31cc(0x15d)](_0x5d31cc(0x1b2));_0x379357=_0x1f035b?_0x1f035b['val']:'';}}catch(_0x102e34){}const _0x3a2d7f=await this[_0x5d31cc(0x14c)](),_0x1fde3a=(this[_0x5d31cc(0x14b)][_0x5d31cc(0x19e)]||[])['some'](_0x1321c8=>_0x1321c8['isSolar']),_0x3182f7=_0x3a2d7f&&_0x1fde3a;this[_0x5d31cc(0x177)](_0xd77293['from'],_0xd77293[_0x5d31cc(0x19b)],{'success':!![],'eventHistory':this[_0x5d31cc(0x209)][_0x5d31cc(0x1a7)](0x0,0xf),'stats':{'digestCount':_0x48ebec,'isPresent':this[_0x5d31cc(0x1ce)],'hourlyActivity':_0xee7677,'solarActive':_0x3182f7},'automation':{'detected':_0x55247f,'description':_0x30ecf6,'targetId':_0x147ef3,'targetValue':_0x379357}},_0xd77293['callback']);}else{if(_0xd77293[_0x5d31cc(0x19b)]===_0x5d31cc(0x21f)){const _0x3704c2=await this[_0x5d31cc(0x13b)]('enum.functions.*',_0x5d31cc(0x167)),_0x3a7933=[];if(_0x3704c2)for(const _0x207f65 in _0x3704c2){const _0x363add=_0x3704c2[_0x207f65],_0x2348c5=(_0x363add[_0x5d31cc(0x1a0)]&&typeof _0x363add[_0x5d31cc(0x1a0)][_0x5d31cc(0x21b)]==='object'?_0x363add[_0x5d31cc(0x1a0)][_0x5d31cc(0x21b)]['de']:_0x363add['common'][_0x5d31cc(0x21b)])||_0x363add[_0x5d31cc(0x1a0)][_0x5d31cc(0x21b)];_0x3a7933[_0x5d31cc(0x1fa)]({'id':_0x207f65,'name':_0x2348c5});}const _0x422f60=await this[_0x5d31cc(0x13b)](_0x5d31cc(0x19d),_0x5d31cc(0x167)),_0x521b3c=[];if(_0x422f60)for(const _0x361b2a in _0x422f60){const _0x4de62b=_0x422f60[_0x361b2a],_0x43dd54=(_0x4de62b[_0x5d31cc(0x1a0)]&&typeof _0x4de62b['common'][_0x5d31cc(0x21b)]==='object'?_0x4de62b[_0x5d31cc(0x1a0)][_0x5d31cc(0x21b)]['de']:_0x4de62b[_0x5d31cc(0x1a0)][_0x5d31cc(0x21b)])||_0x361b2a[_0x5d31cc(0x224)]('.')[_0x5d31cc(0x1bc)]();_0x521b3c[_0x5d31cc(0x1fa)](_0x43dd54);}this[_0x5d31cc(0x177)](_0xd77293[_0x5d31cc(0x1a2)],_0xd77293['command'],{'success':!![],'enums':_0x3a7933,'rooms':_0x521b3c},_0xd77293[_0x5d31cc(0x152)]);}else{if(_0xd77293[_0x5d31cc(0x19b)]===_0x5d31cc(0x14e))try{let _0x21ca1f=_0x5d31cc(0x204),_0x1857eb=_0x5d31cc(0x1eb);if(this['config'][_0x5d31cc(0x18c)]){const _0x456850=await recorder[_0x5d31cc(0x1ae)](this);_0x21ca1f=_0x456850!==null?_0x456850+'Â°C':_0x5d31cc(0x1e4);}if(this[_0x5d31cc(0x14b)][_0x5d31cc(0x189)]){const _0x1cb33c=await this[_0x5d31cc(0x118)]('system.adapter.'+this[_0x5d31cc(0x14b)][_0x5d31cc(0x189)]);_0x1857eb=_0x1cb33c?_0x5d31cc(0x1dc):_0x5d31cc(0x158);}this[_0x5d31cc(0x177)](_0xd77293['from'],_0xd77293['command'],{'success':!![],'weather':_0x21ca1f,'calendar':_0x1857eb},_0xd77293[_0x5d31cc(0x152)]);}catch(_0x29498f){this[_0x5d31cc(0x177)](_0xd77293[_0x5d31cc(0x1a2)],_0xd77293[_0x5d31cc(0x19b)],{'success':![],'error':_0x29498f['message']},_0xd77293[_0x5d31cc(0x152)]);}else{if(_0xd77293['command']===_0x5d31cc(0x12e))try{const _0x55dedf=_0xd77293[_0x5d31cc(0x184)][_0x5d31cc(0x1b4)],_0x3e5880=await this[_0x5d31cc(0x115)](_0x55dedf+'.data.table');let _0x12c9fc=[];if(_0x3e5880&&_0x3e5880['val']){const _0x2db4b2=JSON[_0x5d31cc(0x139)](_0x3e5880[_0x5d31cc(0x1d3)]),_0x555124=new Set();Array[_0x5d31cc(0x1b7)](_0x2db4b2)&&_0x2db4b2[_0x5d31cc(0x17a)](_0x12fdd2=>{const _0x555da9=_0x5d31cc;if(_0x12fdd2[_0x555da9(0x160)])_0x555124[_0x555da9(0x1c8)](_0x12fdd2[_0x555da9(0x160)]);else{if(_0x12fdd2[_0x555da9(0x150)])_0x555124[_0x555da9(0x1c8)](_0x12fdd2[_0x555da9(0x150)]);}}),_0x12c9fc=Array[_0x5d31cc(0x1a2)](_0x555124)[_0x5d31cc(0x1f5)]();}if(_0x12c9fc[_0x5d31cc(0x121)]===0x0)_0x12c9fc=[_0x5d31cc(0x18a)];this['sendTo'](_0xd77293['from'],_0xd77293['command'],{'success':!![],'names':_0x12c9fc},_0xd77293['callback']);}catch(_0xbf5366){this[_0x5d31cc(0x177)](_0xd77293[_0x5d31cc(0x1a2)],_0xd77293[_0x5d31cc(0x19b)],{'success':![],'error':_0xbf5366[_0x5d31cc(0x184)]},_0xd77293['callback']);}else{if(_0xd77293['command']===_0x5d31cc(0x166))try{await setup[_0x5d31cc(0x196)](this,_0x5d31cc(0x20e),![],![]),this[_0x5d31cc(0x177)](_0xd77293[_0x5d31cc(0x1a2)],_0xd77293[_0x5d31cc(0x19b)],{'success':!![],'message':_0x5d31cc(0x157)},_0xd77293[_0x5d31cc(0x152)]);}catch(_0x47dc64){this[_0x5d31cc(0x20b)][_0x5d31cc(0x1d1)](_0x5d31cc(0x15f)+_0x47dc64['message']),this[_0x5d31cc(0x177)](_0xd77293[_0x5d31cc(0x1a2)],_0xd77293[_0x5d31cc(0x19b)],{'success':![],'message':_0x5d31cc(0x180)+_0x47dc64[_0x5d31cc(0x184)]},_0xd77293[_0x5d31cc(0x152)]);}}}}}}}}}}}}}}}}async[a0_0x53a8b2(0x1fb)](_0x48a5b4){const _0x463486=a0_0x53a8b2;if(!_0x48a5b4||!_0x48a5b4[_0x463486(0x11a)])return;this['log']['debug'](_0x463486(0x1d0)+_0x48a5b4[_0x463486(0x11a)]);if(_0x48a5b4[_0x463486(0x11a)]===_0x463486(0x1f7)||_0x48a5b4[_0x463486(0x11a)]===_0x463486(0x219)){const _0x13afc3=new Date(),_0xdca3d3=_0x13afc3[_0x463486(0x169)]('de-DE',{'day':_0x463486(0x14f),'month':'short','hour':_0x463486(0x14f),'minute':'2-digit'});this[_0x463486(0x20b)][_0x463486(0x1e9)]('âœ…\x20Health\x20Training\x20bestÃ¤tigt.\x20Setze\x20Datum\x20auf:\x20'+_0xdca3d3),await this[_0x463486(0x185)]('analysis.health.lastCheck',{'val':_0xdca3d3,'ack':!![]}),await this[_0x463486(0x185)](_0x463486(0x202),{'val':_0x463486(0x13e),'ack':!![]});}else{if(_0x48a5b4[_0x463486(0x11a)]==='HEALTH_TREND_RESULT'){const {trend_percent:_0x1499e1,details:_0x299029}=_0x48a5b4[_0x463486(0x178)],_0x165355=new Date(),_0x37183b=_0x165355[_0x463486(0x169)](_0x463486(0x20a),{'day':_0x463486(0x14f),'month':_0x463486(0x1ad),'hour':_0x463486(0x14f),'minute':_0x463486(0x14f)});await this['setStateAsync'](_0x463486(0x153),{'val':_0x37183b,'ack':!![]}),this['log']['info']('ðŸ“ˆ\x20Trend\x20Update:\x20'+_0x1499e1+'%\x20('+_0x299029+')');}else{if(_0x48a5b4[_0x463486(0x11a)]===_0x463486(0x111)){const _0x34ebb0=new Date(),_0x3bc021=_0x34ebb0[_0x463486(0x169)](_0x463486(0x20a),{'day':_0x463486(0x14f),'month':_0x463486(0x1ad),'hour':_0x463486(0x14f),'minute':'2-digit'});await this[_0x463486(0x185)](_0x463486(0x153),{'val':_0x3bc021,'ack':!![]});}}}}async[a0_0x53a8b2(0x1e3)](){const _0x477812=a0_0x53a8b2;try{const _0x9bcd52=await this[_0x477812(0x15d)](setup['SYSTEM_DP_MODE']);_0x9bcd52&&_0x9bcd52[_0x477812(0x1d3)]&&Object[_0x477812(0x191)](setup[_0x477812(0x13f)])[_0x477812(0x1e7)](_0x9bcd52[_0x477812(0x1d3)])?this[_0x477812(0x1d7)]=_0x9bcd52['val']:(this[_0x477812(0x1d7)]=setup[_0x477812(0x13f)][_0x477812(0x188)],await this[_0x477812(0x185)](setup[_0x477812(0x206)],{'val':setup[_0x477812(0x13f)][_0x477812(0x188)],'ack':!![]}));}catch(_0x494ebb){this[_0x477812(0x1d7)]=setup['SYSTEM_MODES'][_0x477812(0x188)];}}async[a0_0x53a8b2(0x1c7)](){const _0x456d39=a0_0x53a8b2;try{const _0x106a16=this[_0x456d39(0x14b)][_0x456d39(0x1d4)]||[];let _0x440bf6=![];const _0x352c17=[];for(const _0x4e8eb7 of _0x106a16){try{const _0x244420=await this['getForeignStateAsync'](_0x4e8eb7);_0x244420&&(_0x244420[_0x456d39(0x1d3)]===!![]||_0x244420[_0x456d39(0x1d3)]==='online'||_0x244420[_0x456d39(0x1d3)]===0x1)&&(_0x440bf6=!![],_0x352c17[_0x456d39(0x1fa)](_0x4e8eb7));}catch(_0x26e568){}}return await this[_0x456d39(0x185)]('system.presenceWho',{'val':_0x352c17[_0x456d39(0x120)](',\x20'),'ack':!![]}),_0x440bf6&&(this[_0x456d39(0x137)]&&(this[_0x456d39(0x20b)][_0x456d39(0x1e9)](_0x456d39(0x1e2)),recorder[_0x456d39(0x15c)](this)),!this[_0x456d39(0x1ce)]&&this[_0x456d39(0x1d7)]===setup['SYSTEM_MODES'][_0x456d39(0x188)]&&await recorder[_0x456d39(0x1db)](this,!![])),_0x440bf6;}catch(_0x1e090a){return![];}}async['runAutopilot'](){const _0x4c3dc8=a0_0x53a8b2;this[_0x4c3dc8(0x20b)][_0x4c3dc8(0x11b)](_0x4c3dc8(0x1f3)),await aiAgent[_0x4c3dc8(0x1b8)](this),this[_0x4c3dc8(0x130)](),this[_0x4c3dc8(0x165)](),this[_0x4c3dc8(0x1b3)]();}async[a0_0x53a8b2(0x14c)](){const _0x2b1030=a0_0x53a8b2,_0x20ad63=[_0x2b1030(0x146),_0x2b1030(0x162),_0x2b1030(0x215)],_0x2062f9=[_0x2b1030(0x1ed),'Current.WeatherText','NextHours.Location_1.Day_1.current.symbol_desc'];for(const _0x2022c0 of _0x20ad63){for(const _0x40ed16 of _0x2062f9){try{const _0x51cc26=_0x2022c0+'.'+_0x40ed16,_0x3a279e=await this[_0x2b1030(0x115)](_0x51cc26);if(_0x3a279e&&_0x3a279e[_0x2b1030(0x1d3)]){const _0x5addf0=String(_0x3a279e[_0x2b1030(0x1d3)])['toLowerCase']();if(_0x5addf0[_0x2b1030(0x1e7)](_0x2b1030(0x18d))||_0x5addf0[_0x2b1030(0x1e7)](_0x2b1030(0x214))||_0x5addf0[_0x2b1030(0x1e7)](_0x2b1030(0x225))||_0x5addf0[_0x2b1030(0x1e7)]('clear')||_0x5addf0[_0x2b1030(0x1e7)](_0x2b1030(0x1aa)))return!![];}}catch(_0x663304){}}}return![];}['triggerGaitAnalysis'](){const _0x547310=a0_0x53a8b2;if(!this['isProVersion'])return;try{this[_0x547310(0x15b)](_0x547310(0x1ee),(_0x1a121b,_0x4baccb)=>{const _0x1fe6d7=_0x547310;_0x4baccb&&_0x4baccb[_0x1fe6d7(0x1d3)]&&pythonBridge[_0x1fe6d7(0x198)](this,'ANALYZE_GAIT',{'sequences':JSON[_0x1fe6d7(0x139)](_0x4baccb[_0x1fe6d7(0x1d3)])});});}catch(_0x1ffb93){}}async['triggerEnergyPrediction'](){const _0x273f45=a0_0x53a8b2;if(!this[_0x273f45(0x223)])return;try{const _0x5344ec=await recorder[_0x273f45(0x1ae)](this);if(_0x5344ec===null)return;const _0x409063={},_0x33d035={},_0x2e94b7=this[_0x273f45(0x14b)]['devices']||[];for(const _0xe2ca6d of _0x2e94b7){if(_0xe2ca6d[_0x273f45(0x11a)]===_0x273f45(0x1ef)&&_0xe2ca6d[_0x273f45(0x16e)]){const _0x2098a3=this[_0x273f45(0x1c2)][_0xe2ca6d['id']];if(_0x2098a3!==undefined)_0x409063[_0xe2ca6d['location']]=_0x2098a3;if(_0xe2ca6d[_0x273f45(0x1f2)])_0x33d035[_0xe2ca6d['location']]=!![];}}const _0x1c42ff=await this[_0x273f45(0x14c)]();let _0x1cfc5f={};try{const _0x3e17a2=await this['getStateAsync']('analysis.energy.warmupTargets');if(_0x3e17a2&&_0x3e17a2[_0x273f45(0x1d3)])_0x1cfc5f=JSON[_0x273f45(0x139)](_0x3e17a2['val']);}catch(_0x452db9){}Object['keys'](_0x409063)['length']>0x0&&(pythonBridge[_0x273f45(0x198)](this,_0x273f45(0x1cb),{'current_temps':_0x409063,'t_out':_0x5344ec,'is_sunny':_0x1c42ff,'solar_flags':_0x33d035,'warmup_targets':_0x1cfc5f}),pythonBridge[_0x273f45(0x198)](this,_0x273f45(0x20d),{'current_temps':_0x409063,'t_out':_0x5344ec,'targets':{}}));}catch(_0x1f737d){}}[a0_0x53a8b2(0x130)](){const _0x408972=a0_0x53a8b2;if(!this[_0x408972(0x1af)]||this[_0x408972(0x1af)][_0x408972(0x121)]===0x0)return;const _0x1a43f1=new Array(0x60)[_0x408972(0x222)](0x0),_0x5b52d1=new Date()[_0x408972(0x1ba)](0x0,0x0,0x0,0x0);this['rawEventLog']['forEach'](_0x5ab95a=>{const _0x5e929e=_0x408972,_0x1cfb21=new Date(_0x5ab95a['timestamp']);if(_0x1cfb21[_0x5e929e(0x1b0)]()>=_0x5b52d1){const _0xd53358=_0x1cfb21['getHours'](),_0x5b0505=_0x1cfb21[_0x5e929e(0x1d9)](),_0xcb84d4=_0xd53358*0x4+Math[_0x5e929e(0x1ab)](_0x5b0505/0xf);if(_0xcb84d4>=0x0&&_0xcb84d4<0x60)_0x1a43f1[_0xcb84d4]++;}}),this['setStateAsync'](_0x408972(0x171),{'val':JSON[_0x408972(0x1b9)](_0x1a43f1),'ack':!![]});}['runPythonHealthCheck'](){const _0x902e54=a0_0x53a8b2;if(!this[_0x902e54(0x1c6)]||this[_0x902e54(0x1c6)][_0x902e54(0x121)]<0x2)return;const _0x60a4d0=this[_0x902e54(0x1c6)][_0x902e54(0x1d5)](_0x5054c7=>{const _0x1633cb=_0x902e54,_0x51e612=(_0x5054c7[_0x1633cb(0x181)]||'')['toLowerCase']();return ACTIVITY_LEVEL_MAP[_0x51e612]||0x32;});pythonBridge[_0x902e54(0x198)](this,_0x902e54(0x1e6),{'values':_0x60a4d0,'tag':_0x902e54(0x218)});}}if(require['main']!==module)module['exports']=_0x3ce18a=>new CogniLiving(_0x3ce18a);else new CogniLiving();