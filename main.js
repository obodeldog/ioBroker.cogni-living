const a0_0x3bbe85=a0_0x5da5;(function(_0x523559,_0x29dae9){const _0x5b810a=a0_0x5da5,_0x5ac599=_0x523559();while(!![]){try{const _0x5dfc40=-parseInt(_0x5b810a(0x270))/0x1+-parseInt(_0x5b810a(0x276))/0x2*(parseInt(_0x5b810a(0x277))/0x3)+parseInt(_0x5b810a(0x23e))/0x4*(-parseInt(_0x5b810a(0x2a8))/0x5)+-parseInt(_0x5b810a(0x251))/0x6+parseInt(_0x5b810a(0x2a0))/0x7+parseInt(_0x5b810a(0x24e))/0x8+parseInt(_0x5b810a(0x1f7))/0x9*(parseInt(_0x5b810a(0x261))/0xa);if(_0x5dfc40===_0x29dae9)break;else _0x5ac599['push'](_0x5ac599['shift']());}catch(_0x480514){_0x5ac599['push'](_0x5ac599['shift']());}}}(a0_0x28e0,0x65ba1));const a0_0x320d9d=(function(){let _0x46fd7b=!![];return function(_0x5770d4,_0x52ecc8){const _0x514b3c=_0x46fd7b?function(){if(_0x52ecc8){const _0x5f22d4=_0x52ecc8['apply'](_0x5770d4,arguments);return _0x52ecc8=null,_0x5f22d4;}}:function(){};return _0x46fd7b=![],_0x514b3c;};}()),a0_0x549c66=a0_0x320d9d(this,function(){const _0x11df1e=a0_0x5da5;return a0_0x549c66[_0x11df1e(0x2d6)]()[_0x11df1e(0x284)]('(((.+)+)+)+$')[_0x11df1e(0x2d6)]()[_0x11df1e(0x22b)](a0_0x549c66)[_0x11df1e(0x284)](_0x11df1e(0x27a));});a0_0x549c66();'use strict';const utils=require(a0_0x3bbe85(0x21c)),{GoogleGenerativeAI}=require('@google/generative-ai'),installer=require('./lib/installer'),scanner=require('./lib/scanner'),schedulers=require(a0_0x3bbe85(0x234)),topology=require(a0_0x3bbe85(0x235)),setup=require(a0_0x3bbe85(0x220)),recorder=require(a0_0x3bbe85(0x2bd)),pythonBridge=require(a0_0x3bbe85(0x213)),aiAgent=require(a0_0x3bbe85(0x1f2)),deadMan=require('./lib/dead_man'),automation=require('./lib/automation'),GEMINI_MODEL=a0_0x3bbe85(0x2d2),ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};function a0_0x28e0(){const _0x73fdee=['length','log','name','analysis.energy.warmupTargets','updateTopology','analysisTimer','analysis.automation.targetId','exports','runGeminiAnalysis','notifyTelegramEnabled','version','getLtmData','enum.rooms.*','lastTrackerEventTime','currentSystemMode','devices','checkAndInstall','bind','NORMAL','activityLevel','onReady','ANALYZE_GAIT','response','checkWifiPresence','2979991mtKDru','object','setHours','testContext','analysis.trigger','common','analysis.automation.description','telegram','63565vUfytW','motion','stopService','LTM.rawEventLog','getEnums','sort','analysis.security.learningStatus','Activity-Level','Test','checkLicense','TRACK_EVENT','minutes_safe','guest','isProVersion','LTM.trainingData.sequences','resetRLPenalty','modeResetJob','analysis.training.triggerHealth','analysis.energy.ventilationAlerts','trackerHeartbeat','getOutsideTemperatureNumeric','./lib/recorder','instance','triggerEnergyPrediction','heiter','forecast.current.weather','SYSTEM_DP_MODE','callback','LTM.trainingData.thermodynamics','LTM.triggerDailyDigest','forEach','system.presenceWho','lastAlertState','text','rawEventLog','initHistory','getForeignObjectsAsync','Notification\x20Test\x20Failed:\x20','setState','join','analysis.automation.targetValue','toLowerCase','models/gemini-flash-latest','minDaysForBaseline','Lernphase\x20(','scanThermostats','toString','NextHours.Location_1.Day_1.current.symbol_desc','Standard','isPresent','from','checkThermostats','checkSolarCondition','getForeignObjectAsync','Reinforcement\x20Learning\x20Penalties','json','testApiKey','useWeather','getOverviewData','timestamp','geminiModel','manual','enum','setupModeResetScheduler','enum.functions.*','onStateChange','ANALYZE_TREND','exitTimer','calendarInstance','PINN\x20AI\x20Forecast','updated','clear','{\x22default\x22:\x2021}','communicate.request','location','presenceDevices','checkCalendarTriggers','./lib/ai_agent','Kein\x20Wetter-Adapter','driftAnalysisTimer','subscribeStates','isGracePeriodActive','195354QolENp','briefingJob','sunny','unload','VACATION','Kein\x20API\x20Key\x20Ã¼bergeben','getForeignStateAsync','TRAIN_HEALTH','Key\x20not\x20found\x20or\x20not\x20provided','analysis.energy.pinnForecast','now','loadSystemMode','type','sendTo','OPTIMIZE_ENERGY','getCalendarNames','analysis.energy.insulationScore','analysis.health.todayVector','executeAutomationAction','scanForDevices','setStateAsync','getGenerativeModel','includes','TRAIN_SECURITY','abortExitTimer','updateLocation','getStateAsync','createAllObjects','./lib/python_bridge','command','analysisHistory','cancel','ack','analysis.training.triggerTopology','daswetter.0','isSolar','onMessage','@iobroker/adapter-core','Daten\x20nicht\x20verfÃ¼gbar','stringify','TRAIN_COMFORT','./lib/setup','processSensorEvent','scanDevices','val','Warm-Up\x20Target\x20Temps\x20(JSON)','keys','sensorLastValues','licenseKey','updateHealthVector','find','Current.WeatherText','constructor','createDailyDigest','Gemini\x20AI\x20initialized.','testNotification','state','Warm-Up\x20Time\x20(Minutes\x20to\x20Target)','map','fill','message','./lib/scheduler','./lib/topology','Verbindung\x20erfolgreich!','.system.mode','Verbunden','add','setupLtmScheduler','entries','parse','.data.table','4eYkCPI','_calName','simulateButler','sendMorningBriefing','getTime','sonn','dailyDigests','Adapter','SYSTEM_MODES','thermostat','config','analysis.training.triggerSecurity','runPythonHealthCheck','slice','error','triggerGaitAnalysis','599160ktZyfp','push','analysis.training.triggerEnergy','166932ZTQNiK','analysis.automation.patternDetected','setObjectNotExistsAsync','subscribeForeignStatesAsync','main','onUnload','analysis.training.status','analysis.training.triggerComfort','Keine\x20Antwort\x20von\x20Gemini','isArray','debug','Aktiv\x20(','cogni-living','temperature','getHours','ltmJob','170vSkxOU','analysis.energy.rlPenalties','send','split','analysis.topology.structure','startSystem','TRAIN_ENERGY','generateContent','inactivityThresholdHours','scores','setPresence','dismissAutomation','cogni-living\x20adapter\x20starting\x20(v','string','calendarName','394157rXpbly','runBaselineDriftAnalysis','matrix','getState','systemConfig','system.mode','82wQPXhO','1335AwPXtN','eventHistory','ðŸŽ“\x20[RL-RESET]\x20Lern-Sperre\x20(Penalty)\x20fÃ¼r\x20\x27','(((.+)+)+)+$','.communicate.request','\x20Tage)','dependencyInstallInProgress','analysis.energy.mpcActive','info','startService','floor','setupDriftAnalysisScheduler',')\x20-\x20Phase\x20D\x20(Evolution)','search','triggerBriefing','notifyTelegramInstance','LTM.baselineStatus'];a0_0x28e0=function(){return _0x73fdee;};return a0_0x28e0();}class CogniLiving extends utils[a0_0x3bbe85(0x245)]{constructor(_0x16c5a6){const _0x2a13e7=a0_0x3bbe85;super({..._0x16c5a6,'name':_0x2a13e7(0x25d)}),this[_0x2a13e7(0x278)]=[],this[_0x2a13e7(0x215)]=[],this[_0x2a13e7(0x2ca)]=[],this[_0x2a13e7(0x244)]=[],this[_0x2a13e7(0x226)]={},this[_0x2a13e7(0x274)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x2a13e7(0x2d9)]=!![],this[_0x2a13e7(0x1e8)]=null,this['exitGraceTimer']=null,this[_0x2a13e7(0x1f6)]=![],this['genAI']=null,this[_0x2a13e7(0x1e1)]=null,this['currentSystemMode']=setup[_0x2a13e7(0x246)][_0x2a13e7(0x29a)],this[_0x2a13e7(0x2b5)]=![],this[_0x2a13e7(0x2c8)]=![],this['analysisTimer']=null,this[_0x2a13e7(0x260)]=null,this[_0x2a13e7(0x2b8)]=null,this[_0x2a13e7(0x1f4)]=null,this[_0x2a13e7(0x1f8)]=null,this[_0x2a13e7(0x27d)]=![],this[_0x2a13e7(0x2bb)]=null,this['lastTrackerEventTime']=Date[_0x2a13e7(0x201)](),this['on']('ready',this[_0x2a13e7(0x29c)][_0x2a13e7(0x299)](this)),this['on']('stateChange',this[_0x2a13e7(0x1e6)][_0x2a13e7(0x299)](this)),this['on'](_0x2a13e7(0x1fa),this[_0x2a13e7(0x256)][_0x2a13e7(0x299)](this)),this['on'](_0x2a13e7(0x233),this[_0x2a13e7(0x21b)][_0x2a13e7(0x299)](this));}async[a0_0x3bbe85(0x29c)](){const _0x24e6c4=a0_0x3bbe85;this[_0x24e6c4(0x289)][_0x24e6c4(0x27f)](_0x24e6c4(0x26d)+this[_0x24e6c4(0x292)]+_0x24e6c4(0x283));if(!installer[_0x24e6c4(0x298)](this,()=>this[_0x24e6c4(0x266)]()))return;}async[a0_0x3bbe85(0x266)](){const _0x584b5b=a0_0x3bbe85;await setup['initZombies'](this);try{this[_0x584b5b(0x2b5)]=await setup[_0x584b5b(0x2b1)](this[_0x584b5b(0x248)][_0x584b5b(0x227)]);}catch(_0x301536){}if(!this[_0x584b5b(0x248)][_0x584b5b(0x269)]||this[_0x584b5b(0x248)][_0x584b5b(0x269)]<0.1)this[_0x584b5b(0x248)][_0x584b5b(0x269)]=0xc;await setup[_0x584b5b(0x2cb)](this),await setup['initSystemConfig'](this);if(this[_0x584b5b(0x248)]['geminiApiKey'])try{this['genAI']=new GoogleGenerativeAI(this[_0x584b5b(0x248)]['geminiApiKey']),this[_0x584b5b(0x1e1)]=this['genAI'][_0x584b5b(0x20c)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':'application/json'}}),this[_0x584b5b(0x289)][_0x584b5b(0x27f)](_0x584b5b(0x22d));}catch(_0x129839){this[_0x584b5b(0x289)][_0x584b5b(0x24c)]('Gemini\x20Init\x20Error:\x20'+_0x129839[_0x584b5b(0x233)]);}await setup[_0x584b5b(0x212)](this),await this['loadSystemMode'](),await this[_0x584b5b(0x253)](_0x584b5b(0x200),{'type':_0x584b5b(0x22f),'common':{'name':_0x584b5b(0x1ea),'type':_0x584b5b(0x26e),'role':_0x584b5b(0x2df),'read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x584b5b(0x2ba),{'type':_0x584b5b(0x22f),'common':{'name':'Active\x20Ventilation\x20Alerts','type':_0x584b5b(0x26e),'role':_0x584b5b(0x2df),'read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync']('analysis.energy.warmupTimes',{'type':_0x584b5b(0x22f),'common':{'name':_0x584b5b(0x230),'type':_0x584b5b(0x26e),'role':_0x584b5b(0x2df),'read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x584b5b(0x28b),{'type':_0x584b5b(0x22f),'common':{'name':_0x584b5b(0x224),'type':'string','role':_0x584b5b(0x2df),'read':!![],'write':!![],'def':_0x584b5b(0x1ed)},'native':{}}),await this['setObjectNotExistsAsync'](_0x584b5b(0x262),{'type':_0x584b5b(0x22f),'common':{'name':_0x584b5b(0x2de),'type':_0x584b5b(0x26e),'role':_0x584b5b(0x2df),'read':!![],'write':![],'def':'{}'},'native':{}});try{const _0x4d4ba9=await this[_0x584b5b(0x211)](_0x584b5b(0x2ab));if(_0x4d4ba9&&_0x4d4ba9[_0x584b5b(0x223)])this[_0x584b5b(0x2ca)]=JSON[_0x584b5b(0x23c)](_0x4d4ba9['val']);}catch(_0x41e09b){this[_0x584b5b(0x2ca)]=[];}try{const _0x1557d6=await this[_0x584b5b(0x211)]('LTM.dailyDigests');if(_0x1557d6&&_0x1557d6[_0x584b5b(0x223)])this[_0x584b5b(0x244)]=JSON[_0x584b5b(0x23c)](_0x1557d6['val']);}catch(_0x59ebcc){this[_0x584b5b(0x244)]=[];}const _0xe5461f=this[_0x584b5b(0x244)][_0x584b5b(0x288)]>=(this[_0x584b5b(0x248)]['minDaysForBaseline']||0x7)?_0x584b5b(0x25c)+this[_0x584b5b(0x244)][_0x584b5b(0x288)]+_0x584b5b(0x27c):_0x584b5b(0x2d4)+this['dailyDigests'][_0x584b5b(0x288)]+'/'+(this[_0x584b5b(0x248)][_0x584b5b(0x2d3)]||0x7)+')';await this[_0x584b5b(0x20b)](_0x584b5b(0x287),{'val':_0xe5461f,'ack':!![]}),this[_0x584b5b(0x1f5)](_0x584b5b(0x2a4)),this['subscribeStates'](_0x584b5b(0x2c5)),this[_0x584b5b(0x1f5)](_0x584b5b(0x275)),this[_0x584b5b(0x1f5)]('analysis.triggerBriefing'),this[_0x584b5b(0x1f5)]('analysis.automation.triggerAction'),this['subscribeStates']('analysis.automation.autoApply'),this[_0x584b5b(0x1f5)](_0x584b5b(0x249)),this[_0x584b5b(0x1f5)](_0x584b5b(0x2b9)),this[_0x584b5b(0x1f5)]('analysis.training.triggerEnergy'),this[_0x584b5b(0x1f5)](_0x584b5b(0x258)),this['subscribeStates']('analysis.training.triggerTopology'),this['subscribeStates'](_0x584b5b(0x27e));const _0x1264cf=this[_0x584b5b(0x248)]['devices'];if(_0x1264cf)for(const _0x328624 of _0x1264cf){await this[_0x584b5b(0x254)](_0x328624['id']);}const _0x4da3d9=this[_0x584b5b(0x248)][_0x584b5b(0x1f0)];if(_0x4da3d9)for(const _0xa618a of _0x4da3d9){await this[_0x584b5b(0x254)](_0xa618a);}if(this['config'][_0x584b5b(0x291)]&&this['config'][_0x584b5b(0x286)])await this[_0x584b5b(0x254)](this['config'][_0x584b5b(0x286)]+_0x584b5b(0x27b));setTimeout(()=>this[_0x584b5b(0x29f)](),0x1388);if(this[_0x584b5b(0x28d)])clearInterval(this[_0x584b5b(0x28d)]);const _0x503226=this[_0x584b5b(0x248)]['analysisInterval']||0xf;_0x503226>0x0&&(this['analysisTimer']=setInterval(()=>{const _0x4ccd5a=_0x584b5b;this['runAutopilot'](),automation[_0x4ccd5a(0x1f1)](this);},_0x503226*0x3c*0x3e8)),setTimeout(()=>automation[_0x584b5b(0x1f1)](this),0x2710),this['config']['trackerEnabled']!==![]&&(this[_0x584b5b(0x2bb)]=setInterval(()=>{const _0x1d6f4f=_0x584b5b;if(this[_0x1d6f4f(0x2b5)]){const _0x24e8ee=Date['now'](),_0x3a26ac=this['lastTrackerEventTime']||_0x24e8ee,_0x4d1bd6=(_0x24e8ee-_0x3a26ac)/0x3e8;_0x4d1bd6>0x2&&(this[_0x1d6f4f(0x295)]=_0x24e8ee,pythonBridge[_0x1d6f4f(0x263)](this,_0x1d6f4f(0x2b2),{'room':null,'dt':_0x4d1bd6}));}},0xbb8)),schedulers[_0x584b5b(0x23a)](this,()=>aiAgent[_0x584b5b(0x22c)](this,pythonBridge)),schedulers[_0x584b5b(0x1e4)](this),schedulers[_0x584b5b(0x282)](this,()=>aiAgent[_0x584b5b(0x271)](this)),schedulers['setupBriefingScheduler'](this,()=>aiAgent[_0x584b5b(0x241)](this)),pythonBridge[_0x584b5b(0x280)](this,installer['PYTHON_EXE']),setTimeout(async()=>{const _0x16d01e=_0x584b5b;await topology[_0x16d01e(0x28c)](this);try{const _0x2e3fd0=await this[_0x16d01e(0x211)](_0x16d01e(0x265));if(_0x2e3fd0&&_0x2e3fd0[_0x16d01e(0x223)])pythonBridge['send'](this,'SET_TOPOLOGY',JSON[_0x16d01e(0x23c)](_0x2e3fd0[_0x16d01e(0x223)]));}catch(_0x2ae688){}this[_0x16d01e(0x24a)](),this[_0x16d01e(0x24d)](),this[_0x16d01e(0x2bf)](),this[_0x16d01e(0x228)]();},0x1388);}[a0_0x3bbe85(0x256)](_0x313276){const _0x19c5d5=a0_0x3bbe85;if(this[_0x19c5d5(0x28d)])clearInterval(this[_0x19c5d5(0x28d)]);if(this[_0x19c5d5(0x1f4)])clearInterval(this[_0x19c5d5(0x1f4)]);if(this['trackerHeartbeat'])clearInterval(this[_0x19c5d5(0x2bb)]);if(this['ltmJob'])this[_0x19c5d5(0x260)]['cancel']();if(this[_0x19c5d5(0x2b8)])this[_0x19c5d5(0x2b8)]['cancel']();if(this[_0x19c5d5(0x1f8)])this[_0x19c5d5(0x1f8)][_0x19c5d5(0x216)]();recorder['abortExitTimer'](this),pythonBridge[_0x19c5d5(0x2aa)](this),_0x313276();}async[a0_0x3bbe85(0x1e6)](_0x50d734,_0x45c236){const _0xb2c426=a0_0x3bbe85;if(!_0x45c236||this[_0xb2c426(0x27d)])return;if(_0x50d734[_0xb2c426(0x20d)](_0xb2c426(0x2a7))&&_0x50d734['endsWith'](_0xb2c426(0x1ee))&&_0x45c236[_0xb2c426(0x223)])return;if(_0x50d734===this['namespace']+_0xb2c426(0x237)){if(_0x45c236[_0xb2c426(0x223)]&&Object['values'](setup[_0xb2c426(0x246)])[_0xb2c426(0x20d)](_0x45c236[_0xb2c426(0x223)])){this[_0xb2c426(0x296)]=_0x45c236[_0xb2c426(0x223)];if(_0x45c236[_0xb2c426(0x223)]===setup['SYSTEM_MODES'][_0xb2c426(0x1fb)])await recorder[_0xb2c426(0x26b)](this,![]);else await recorder[_0xb2c426(0x26b)](this,!![]);if(this[_0xb2c426(0x2b5)]){let _0x3cf60f=![],_0x2db2e7=0x0,_0x3e3da0=_0xb2c426(0x1e2);if(this[_0xb2c426(0x296)]==='party')_0x3cf60f=!![],_0x2db2e7=0x168,_0x3e3da0='Party\x20Mode';else this[_0xb2c426(0x296)]===_0xb2c426(0x2b4)&&(_0x3cf60f=!![],_0x2db2e7=0x5a0,_0x3e3da0='Guest\x20Mode');pythonBridge[_0xb2c426(0x263)](this,'SET_LEARNING_MODE',{'active':_0x3cf60f,'duration':_0x2db2e7,'label':_0x3e3da0}),await this[_0xb2c426(0x20b)](_0xb2c426(0x2ae),{'val':JSON[_0xb2c426(0x21e)]({'active':_0x3cf60f,'label':_0x3e3da0,'timestamp':Date['now']()}),'ack':!![]});}}if(!_0x45c236[_0xb2c426(0x217)])this[_0xb2c426(0x2ce)](_0x50d734,{'val':this[_0xb2c426(0x296)],'ack':!![]});return;}if(!_0x45c236[_0xb2c426(0x217)]){if(_0x50d734['includes']('analysis.trigger')&&_0x45c236[_0xb2c426(0x223)]){this[_0xb2c426(0x2ce)](_0x50d734,{'val':![],'ack':!![]}),aiAgent[_0xb2c426(0x290)](this);return;}if(_0x50d734[_0xb2c426(0x20d)]('triggerDailyDigest')&&_0x45c236[_0xb2c426(0x223)]){this[_0xb2c426(0x2ce)](_0x50d734,{'val':![],'ack':!![]});if(this[_0xb2c426(0x2b5)])aiAgent[_0xb2c426(0x22c)](this,pythonBridge);return;}if(_0x50d734[_0xb2c426(0x20d)](_0xb2c426(0x285))&&_0x45c236[_0xb2c426(0x223)]){this['setState'](_0x50d734,{'val':![],'ack':!![]}),aiAgent[_0xb2c426(0x241)](this);return;}if(_0x50d734['includes']('automation.triggerAction')&&_0x45c236['val']){this[_0xb2c426(0x2ce)](_0x50d734,{'val':![],'ack':!![]}),aiAgent[_0xb2c426(0x209)](this);return;}if(_0x50d734['includes'](_0xb2c426(0x249))&&_0x45c236[_0xb2c426(0x223)]){this[_0xb2c426(0x2ce)](_0x50d734,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x7801b2=await this[_0xb2c426(0x211)](_0xb2c426(0x2b6));if(_0x7801b2&&_0x7801b2['val']){const _0x17dfdb=JSON[_0xb2c426(0x23c)](_0x7801b2[_0xb2c426(0x223)]);this[_0xb2c426(0x20b)](_0xb2c426(0x257),{'val':'Sec-Training\x20started...','ack':!![]}),pythonBridge[_0xb2c426(0x263)](this,_0xb2c426(0x20e),{'sequences':_0x17dfdb});}}catch(_0x551d6a){}return;}if(_0x50d734['includes'](_0xb2c426(0x2b9))&&_0x45c236[_0xb2c426(0x223)]){this[_0xb2c426(0x2ce)](_0x50d734,{'val':![],'ack':!![]});if(this[_0xb2c426(0x2b5)])try{const _0x206ba7=await this[_0xb2c426(0x211)]('LTM.dailyDigests');if(_0x206ba7&&_0x206ba7[_0xb2c426(0x223)])pythonBridge[_0xb2c426(0x263)](this,_0xb2c426(0x1fe),{'digests':JSON[_0xb2c426(0x23c)](_0x206ba7[_0xb2c426(0x223)])});}catch(_0x1b9aac){}return;}if(_0x50d734[_0xb2c426(0x20d)](_0xb2c426(0x250))&&_0x45c236[_0xb2c426(0x223)]){this['setState'](_0x50d734,{'val':![],'ack':!![]});if(this[_0xb2c426(0x2b5)])try{const _0x43fc0e=await this[_0xb2c426(0x211)](_0xb2c426(0x2c4));if(_0x43fc0e&&_0x43fc0e['val'])pythonBridge[_0xb2c426(0x263)](this,_0xb2c426(0x267),{'points':JSON[_0xb2c426(0x23c)](_0x43fc0e[_0xb2c426(0x223)])});}catch(_0x19655a){}return;}if(_0x50d734['includes'](_0xb2c426(0x258))&&_0x45c236[_0xb2c426(0x223)]){this[_0xb2c426(0x2ce)](_0x50d734,{'val':![],'ack':!![]});if(this[_0xb2c426(0x2b5)])try{const _0x417165=await this[_0xb2c426(0x211)]('LTM.rawEventLog');if(_0x417165&&_0x417165[_0xb2c426(0x223)])pythonBridge[_0xb2c426(0x263)](this,_0xb2c426(0x21f),{'events':JSON[_0xb2c426(0x23c)](_0x417165[_0xb2c426(0x223)])});}catch(_0xe66eb4){}return;}if(_0x50d734['includes'](_0xb2c426(0x218))&&_0x45c236[_0xb2c426(0x223)]){this['setState'](_0x50d734,{'val':![],'ack':!![]}),topology['updateTopology'](this);return;}}if(this['config']['presenceDevices']&&this['config'][_0xb2c426(0x1f0)]['includes'](_0x50d734)){await this['checkWifiPresence']();return;}const _0x56c1fa=(this[_0xb2c426(0x248)][_0xb2c426(0x297)]||[])[_0xb2c426(0x229)](_0x254ef4=>_0x254ef4['id']===_0x50d734);if(_0x56c1fa){const _0x5a6c72=await recorder[_0xb2c426(0x221)](this,_0x50d734,_0x45c236,_0x56c1fa);_0x5a6c72&&_0x5a6c72[_0xb2c426(0x203)]===_0xb2c426(0x2a9)&&_0x5a6c72[_0xb2c426(0x1ef)]&&this[_0xb2c426(0x2b5)]&&deadMan[_0xb2c426(0x210)](this,_0x5a6c72['location']),(_0x56c1fa[_0xb2c426(0x203)]===_0xb2c426(0x25e)||_0x56c1fa[_0xb2c426(0x203)]===_0xb2c426(0x247))&&automation['cleanupGhostInterventions'](this);}}async[a0_0x3bbe85(0x21b)](_0x3efa01){const _0x417dce=a0_0x3bbe85;if(typeof _0x3efa01===_0x417dce(0x2a1)&&_0x3efa01[_0x417dce(0x233)]){if(_0x3efa01[_0x417dce(0x214)]===_0x417dce(0x2db))try{const _0x4e98c3=await automation[_0x417dce(0x2d5)](this);this[_0x417dce(0x204)](_0x3efa01[_0x417dce(0x2da)],_0x3efa01['command'],{'success':!![],'results':_0x4e98c3},_0x3efa01['callback']);}catch(_0x453edc){this['sendTo'](_0x3efa01[_0x417dce(0x2da)],_0x3efa01[_0x417dce(0x214)],{'success':![],'error':_0x453edc['message']},_0x3efa01['callback']);}else{if(_0x3efa01['command']==='simulateEnergyMPC')try{const {current_temps:_0x496324,t_out:_0xb9b00f,targets:_0x160ecc,t_forecast:_0x20adf4}=_0x3efa01[_0x417dce(0x233)],_0x40009f=[];let _0x222438={};try{const _0x2e4177=await this[_0x417dce(0x211)](_0x417dce(0x207));if(_0x2e4177&&_0x2e4177[_0x417dce(0x223)]){const _0xd4d471=JSON[_0x417dce(0x23c)](_0x2e4177[_0x417dce(0x223)]);_0x222438=_0xd4d471[_0x417dce(0x26a)]||_0xd4d471;}}catch(_0x3bc568){}const _0x2300bf=_0x20adf4!==undefined&&_0x20adf4!==null?(_0xb9b00f+_0x20adf4)/0x2:_0xb9b00f;for(const [_0x56a7c0,_0x1571fa]of Object[_0x417dce(0x23b)](_0x496324)){const _0x2b1dcb=_0x160ecc[_0x56a7c0]||0x15;if(_0x1571fa<=_0x2b1dcb)continue;let _0x3ab16c=_0x222438[_0x56a7c0]||-0.5;if(_0x3ab16c>=0x0)_0x3ab16c=-0.5;const _0x41c46b=Math['abs'](_0x3ab16c),_0x4bb462=_0x1571fa-_0x2b1dcb;let _0xec41e1=Math[_0x417dce(0x281)](_0x4bb462/_0x41c46b*0x3c);const _0x26b647=_0x1571fa-_0xb9b00f,_0x8bd6e1=_0x1571fa-_0x2300bf;if(_0x8bd6e1!==0x0&&_0x26b647!==0x0){const _0x1b5639=_0x26b647/_0x8bd6e1;_0xec41e1=Math[_0x417dce(0x281)](_0xec41e1*_0x1b5639);}if(_0xec41e1>0xf){if(_0xec41e1>0xf0)_0xec41e1=0xf0;_0x40009f[_0x417dce(0x24f)]({'room':_0x56a7c0,'minutes_safe':_0xec41e1,'target':_0x2b1dcb,'current':_0x1571fa,'savings_msg':'Heizung\x20kann\x20'+_0xec41e1+'\x20min\x20ausbleiben.'});}}_0x40009f[_0x417dce(0x2ad)]((_0x203ec9,_0x3af65a)=>_0x3af65a[_0x417dce(0x2b3)]-_0x203ec9[_0x417dce(0x2b3)]),this[_0x417dce(0x204)](_0x3efa01[_0x417dce(0x2da)],_0x3efa01['command'],{'success':!![],'proposals':_0x40009f},_0x3efa01[_0x417dce(0x2c3)]);}catch(_0x2c7e0e){this[_0x417dce(0x204)](_0x3efa01[_0x417dce(0x2da)],_0x3efa01[_0x417dce(0x214)],{'success':![],'error':_0x2c7e0e[_0x417dce(0x233)]},_0x3efa01[_0x417dce(0x2c3)]);}else{if(_0x3efa01[_0x417dce(0x214)]===_0x417dce(0x2b7))try{const _0x473593=_0x3efa01['message']['key'],_0x3557a1=_0x417dce(0x262),_0x1f5b14=await this[_0x417dce(0x211)](_0x3557a1);let _0x2a2402={};if(_0x1f5b14&&_0x1f5b14[_0x417dce(0x223)])try{_0x2a2402=JSON[_0x417dce(0x23c)](_0x1f5b14[_0x417dce(0x223)]);}catch(_0xb8b37a){}_0x473593&&_0x2a2402[_0x473593]?(delete _0x2a2402[_0x473593],await this[_0x417dce(0x20b)](_0x3557a1,{'val':JSON['stringify'](_0x2a2402),'ack':!![]}),this[_0x417dce(0x289)]['info'](_0x417dce(0x279)+_0x473593+'\x27\x20wurde\x20manuell\x20vom\x20Benutzer\x20gelÃ¶scht.'),this[_0x417dce(0x204)](_0x3efa01['from'],_0x3efa01[_0x417dce(0x214)],{'success':!![]},_0x3efa01[_0x417dce(0x2c3)])):this[_0x417dce(0x204)](_0x3efa01[_0x417dce(0x2da)],_0x3efa01[_0x417dce(0x214)],{'success':![],'error':_0x417dce(0x1ff)},_0x3efa01['callback']);}catch(_0x14dca0){this[_0x417dce(0x204)](_0x3efa01[_0x417dce(0x2da)],_0x3efa01[_0x417dce(0x214)],{'success':![],'error':_0x14dca0[_0x417dce(0x233)]},_0x3efa01[_0x417dce(0x2c3)]);}else{if(_0x3efa01[_0x417dce(0x214)]===_0x417dce(0x26c))await this[_0x417dce(0x20b)](_0x417dce(0x252),{'val':![],'ack':!![]}),await this[_0x417dce(0x20b)](_0x417dce(0x2a6),{'val':'','ack':!![]}),await this[_0x417dce(0x20b)](_0x417dce(0x28e),{'val':'','ack':!![]}),this[_0x417dce(0x204)](_0x3efa01[_0x417dce(0x2da)],_0x3efa01['command'],{'success':!![]},_0x3efa01[_0x417dce(0x2c3)]);else{if(_0x3efa01['command']===_0x417dce(0x240)){const {targetId:_0x3227a1,targetValue:_0x178177}=_0x3efa01['message'];await this['setStateAsync'](_0x417dce(0x252),{'val':!![],'ack':!![]}),await this[_0x417dce(0x20b)]('analysis.automation.description',{'val':'Simulation\x20durch\x20Admin\x20(Test)','ack':!![]}),await this[_0x417dce(0x20b)]('analysis.automation.targetId',{'val':_0x3227a1,'ack':!![]}),await this[_0x417dce(0x20b)](_0x417dce(0x2d0),{'val':String(_0x178177),'ack':!![]}),this[_0x417dce(0x204)](_0x3efa01[_0x417dce(0x2da)],_0x3efa01[_0x417dce(0x214)],{'success':!![]},_0x3efa01[_0x417dce(0x2c3)]);}else{if(_0x3efa01[_0x417dce(0x214)]===_0x417dce(0x1dd))try{const _0x240677=_0x3efa01[_0x417dce(0x233)]['apiKey'];if(!_0x240677)throw new Error(_0x417dce(0x1fc));const _0x3effd0=new GoogleGenerativeAI(_0x240677),_0x39b813=_0x3effd0['getGenerativeModel']({'model':GEMINI_MODEL}),_0x25a79d=await _0x39b813[_0x417dce(0x268)](_0x417dce(0x2b0)),_0x32d3ca=await _0x25a79d[_0x417dce(0x29e)];if(_0x32d3ca[_0x417dce(0x2c9)]())this[_0x417dce(0x204)](_0x3efa01[_0x417dce(0x2da)],_0x3efa01['command'],{'success':!![],'message':_0x417dce(0x236)},_0x3efa01[_0x417dce(0x2c3)]);else throw new Error(_0x417dce(0x259));}catch(_0x171db5){this[_0x417dce(0x204)](_0x3efa01[_0x417dce(0x2da)],_0x3efa01[_0x417dce(0x214)],{'success':![],'message':_0x171db5['message']},_0x3efa01[_0x417dce(0x2c3)]);}else{if(_0x3efa01[_0x417dce(0x214)]===_0x417dce(0x222))try{const _0x1389b4=await scanner[_0x417dce(0x20a)](this,_0x3efa01[_0x417dce(0x233)]||{});this[_0x417dce(0x204)](_0x3efa01[_0x417dce(0x2da)],_0x3efa01[_0x417dce(0x214)],{'success':!![],'devices':_0x1389b4},_0x3efa01[_0x417dce(0x2c3)]);}catch(_0x323f62){this[_0x417dce(0x204)](_0x3efa01['from'],_0x3efa01[_0x417dce(0x214)],{'success':![],'error':_0x323f62[_0x417dce(0x233)]},_0x3efa01[_0x417dce(0x2c3)]);}else{if(_0x3efa01['command']==='updateTopologyMatrix')try{const {matrix:_0x252f80}=_0x3efa01[_0x417dce(0x233)],_0x1bd459=await this[_0x417dce(0x211)](_0x417dce(0x265));if(_0x1bd459&&_0x1bd459[_0x417dce(0x223)]){const _0x54dc18=JSON[_0x417dce(0x23c)](_0x1bd459[_0x417dce(0x223)]);_0x54dc18[_0x417dce(0x272)]=_0x252f80,_0x54dc18[_0x417dce(0x1eb)]=Date[_0x417dce(0x201)](),await this[_0x417dce(0x20b)](_0x417dce(0x265),{'val':JSON[_0x417dce(0x21e)](_0x54dc18),'ack':!![]}),pythonBridge['send'](this,'SET_TOPOLOGY',_0x54dc18);}this['sendTo'](_0x3efa01[_0x417dce(0x2da)],_0x3efa01['command'],{'success':!![]},_0x3efa01[_0x417dce(0x2c3)]);}catch(_0x48baf2){this['log'][_0x417dce(0x24c)](_0x48baf2);}else{if(_0x3efa01[_0x417dce(0x214)]===_0x417dce(0x293))this['sendTo'](_0x3efa01[_0x417dce(0x2da)],_0x3efa01['command'],{'success':!![],'dailyDigests':this[_0x417dce(0x244)]||[],'analysisHistory':this['analysisHistory']||[]},_0x3efa01[_0x417dce(0x2c3)]);else{if(_0x3efa01['command']===_0x417dce(0x1df)){const _0x188d6d=this[_0x417dce(0x244)][_0x417dce(0x288)],_0x3995c3=new Array(0x18)[_0x417dce(0x232)](0x0),_0x401dde=new Date()[_0x417dce(0x2a2)](0x0,0x0,0x0,0x0);this['eventHistory']&&this['eventHistory']['forEach'](_0x355ce3=>{const _0xc33828=_0x417dce;if(_0x355ce3[_0xc33828(0x1e0)]>=_0x401dde){const _0xb7a164=new Date(_0x355ce3['timestamp'])[_0xc33828(0x25f)]();if(_0xb7a164>=0x0&&_0xb7a164<0x18)_0x3995c3[_0xb7a164]++;}});let _0x258198=![],_0x56f746='',_0x2e752b='',_0x37729e='';try{const _0x16046a=await this[_0x417dce(0x211)]('analysis.automation.patternDetected');if(_0x16046a&&_0x16046a[_0x417dce(0x223)]){_0x258198=!![];const _0x14a2ee=await this[_0x417dce(0x211)]('analysis.automation.description');_0x56f746=_0x14a2ee?_0x14a2ee[_0x417dce(0x223)]:'';const _0x31d4bf=await this[_0x417dce(0x211)]('analysis.automation.targetId');_0x2e752b=_0x31d4bf?_0x31d4bf[_0x417dce(0x223)]:'';const _0x1a33de=await this[_0x417dce(0x211)](_0x417dce(0x2d0));_0x37729e=_0x1a33de?_0x1a33de[_0x417dce(0x223)]:'';}}catch(_0x59f042){}const _0x580bc3=await this[_0x417dce(0x2dc)](),_0x42a26e=(this['config'][_0x417dce(0x297)]||[])['some'](_0x156f85=>_0x156f85[_0x417dce(0x21a)]),_0x4a4cd1=_0x580bc3&&_0x42a26e;this[_0x417dce(0x204)](_0x3efa01['from'],_0x3efa01['command'],{'success':!![],'eventHistory':this['eventHistory'][_0x417dce(0x24b)](0x0,0xf),'stats':{'digestCount':_0x188d6d,'isPresent':this[_0x417dce(0x2d9)],'hourlyActivity':_0x3995c3,'solarActive':_0x4a4cd1},'automation':{'detected':_0x258198,'description':_0x56f746,'targetId':_0x2e752b,'targetValue':_0x37729e}},_0x3efa01['callback']);}else{if(_0x3efa01[_0x417dce(0x214)]===_0x417dce(0x2ac)){const _0x5329f7=await this[_0x417dce(0x2cc)](_0x417dce(0x1e5),_0x417dce(0x1e3)),_0x17f5e7=[];if(_0x5329f7)for(const _0x370ff3 in _0x5329f7){const _0x22abae=_0x5329f7[_0x370ff3],_0x1e749b=(_0x22abae[_0x417dce(0x2a5)]&&typeof _0x22abae[_0x417dce(0x2a5)]['name']===_0x417dce(0x2a1)?_0x22abae[_0x417dce(0x2a5)][_0x417dce(0x28a)]['de']:_0x22abae[_0x417dce(0x2a5)][_0x417dce(0x28a)])||_0x22abae[_0x417dce(0x2a5)][_0x417dce(0x28a)];_0x17f5e7[_0x417dce(0x24f)]({'id':_0x370ff3,'name':_0x1e749b});}const _0x47b158=await this[_0x417dce(0x2cc)](_0x417dce(0x294),_0x417dce(0x1e3)),_0x4185b0=[];if(_0x47b158)for(const _0x3f7068 in _0x47b158){const _0x162dfb=_0x47b158[_0x3f7068],_0x37fc48=(_0x162dfb[_0x417dce(0x2a5)]&&typeof _0x162dfb['common']['name']==='object'?_0x162dfb[_0x417dce(0x2a5)][_0x417dce(0x28a)]['de']:_0x162dfb[_0x417dce(0x2a5)][_0x417dce(0x28a)])||_0x3f7068[_0x417dce(0x264)]('.')['pop']();_0x4185b0[_0x417dce(0x24f)](_0x37fc48);}this[_0x417dce(0x204)](_0x3efa01[_0x417dce(0x2da)],_0x3efa01[_0x417dce(0x214)],{'success':!![],'enums':_0x17f5e7,'rooms':_0x4185b0},_0x3efa01[_0x417dce(0x2c3)]);}else{if(_0x3efa01[_0x417dce(0x214)]===_0x417dce(0x2a3))try{let _0x5f28b3=_0x417dce(0x1f3),_0x37dbc0='Kein\x20Kalender-Adapter';if(this['config'][_0x417dce(0x1de)]){const _0x1bb077=await recorder[_0x417dce(0x2bc)](this);_0x5f28b3=_0x1bb077!==null?_0x1bb077+'Â°C':_0x417dce(0x21d);}if(this[_0x417dce(0x248)][_0x417dce(0x1e9)]){const _0x5a0ba6=await this[_0x417dce(0x2dd)]('system.adapter.'+this[_0x417dce(0x248)][_0x417dce(0x1e9)]);_0x37dbc0=_0x5a0ba6?_0x417dce(0x238):'Instanz\x20nicht\x20gefunden';}this['sendTo'](_0x3efa01['from'],_0x3efa01[_0x417dce(0x214)],{'success':!![],'weather':_0x5f28b3,'calendar':_0x37dbc0},_0x3efa01['callback']);}catch(_0x5d218d){this[_0x417dce(0x204)](_0x3efa01[_0x417dce(0x2da)],_0x3efa01['command'],{'success':![],'error':_0x5d218d[_0x417dce(0x233)]},_0x3efa01[_0x417dce(0x2c3)]);}else{if(_0x3efa01[_0x417dce(0x214)]===_0x417dce(0x206))try{const _0xf1d760=_0x3efa01['message'][_0x417dce(0x2be)],_0x2d7a66=await this[_0x417dce(0x1fd)](_0xf1d760+_0x417dce(0x23d));let _0x4b7627=[];if(_0x2d7a66&&_0x2d7a66[_0x417dce(0x223)]){const _0x19b46e=JSON[_0x417dce(0x23c)](_0x2d7a66['val']),_0x34a384=new Set();Array[_0x417dce(0x25a)](_0x19b46e)&&_0x19b46e[_0x417dce(0x2c6)](_0x583212=>{const _0x44137c=_0x417dce;if(_0x583212[_0x44137c(0x23f)])_0x34a384[_0x44137c(0x239)](_0x583212['_calName']);else{if(_0x583212[_0x44137c(0x26f)])_0x34a384[_0x44137c(0x239)](_0x583212['calendarName']);}}),_0x4b7627=Array[_0x417dce(0x2da)](_0x34a384)['sort']();}if(_0x4b7627[_0x417dce(0x288)]===0x0)_0x4b7627=[_0x417dce(0x2d8)];this[_0x417dce(0x204)](_0x3efa01[_0x417dce(0x2da)],_0x3efa01[_0x417dce(0x214)],{'success':!![],'names':_0x4b7627},_0x3efa01[_0x417dce(0x2c3)]);}catch(_0x24f1e5){this[_0x417dce(0x204)](_0x3efa01[_0x417dce(0x2da)],_0x3efa01[_0x417dce(0x214)],{'success':![],'error':_0x24f1e5[_0x417dce(0x233)]},_0x3efa01[_0x417dce(0x2c3)]);}else{if(_0x3efa01[_0x417dce(0x214)]===_0x417dce(0x22e))try{await setup['sendNotification'](this,'ðŸ””\x20Dies\x20ist\x20ein\x20Test\x20von\x20Cogni-Living.',![],![]),this[_0x417dce(0x204)](_0x3efa01[_0x417dce(0x2da)],_0x3efa01[_0x417dce(0x214)],{'success':!![],'message':'Gesendet'},_0x3efa01['callback']);}catch(_0xf8afe1){this[_0x417dce(0x289)][_0x417dce(0x24c)](_0x417dce(0x2cd)+_0xf8afe1[_0x417dce(0x233)]),this['sendTo'](_0x3efa01['from'],_0x3efa01[_0x417dce(0x214)],{'success':![],'message':'Fehler:\x20'+_0xf8afe1[_0x417dce(0x233)]},_0x3efa01[_0x417dce(0x2c3)]);}}}}}}}}}}}}}}}}async[a0_0x3bbe85(0x202)](){const _0x44851f=a0_0x3bbe85;try{const _0x42de6a=await this[_0x44851f(0x211)](setup[_0x44851f(0x2c2)]);_0x42de6a&&_0x42de6a[_0x44851f(0x223)]&&Object['values'](setup['SYSTEM_MODES'])[_0x44851f(0x20d)](_0x42de6a[_0x44851f(0x223)])?this[_0x44851f(0x296)]=_0x42de6a['val']:(this[_0x44851f(0x296)]=setup['SYSTEM_MODES'][_0x44851f(0x29a)],await this[_0x44851f(0x20b)](setup[_0x44851f(0x2c2)],{'val':setup[_0x44851f(0x246)][_0x44851f(0x29a)],'ack':!![]}));}catch(_0x53176e){this[_0x44851f(0x296)]=setup[_0x44851f(0x246)]['NORMAL'];}}async['checkWifiPresence'](){const _0x1a6e2f=a0_0x3bbe85;try{const _0x5db437=this['config'][_0x1a6e2f(0x1f0)]||[];let _0x3255b8=![];const _0x47a908=[];for(const _0x1e7148 of _0x5db437){try{const _0x51c263=await this[_0x1a6e2f(0x1fd)](_0x1e7148);_0x51c263&&(_0x51c263['val']===!![]||_0x51c263[_0x1a6e2f(0x223)]==='online'||_0x51c263[_0x1a6e2f(0x223)]===0x1)&&(_0x3255b8=!![],_0x47a908['push'](_0x1e7148));}catch(_0x145870){}}return await this[_0x1a6e2f(0x20b)](_0x1a6e2f(0x2c7),{'val':_0x47a908[_0x1a6e2f(0x2cf)](',\x20'),'ack':!![]}),_0x3255b8&&(this['exitTimer']&&(this[_0x1a6e2f(0x289)][_0x1a6e2f(0x27f)]('WiFi\x20Presence\x20detected.'),recorder[_0x1a6e2f(0x20f)](this)),!this[_0x1a6e2f(0x2d9)]&&this[_0x1a6e2f(0x296)]===setup[_0x1a6e2f(0x246)][_0x1a6e2f(0x29a)]&&await recorder['setPresence'](this,!![])),_0x3255b8;}catch(_0x3a3148){return![];}}async['runAutopilot'](){const _0x2812c2=a0_0x3bbe85;this[_0x2812c2(0x289)][_0x2812c2(0x25b)]('ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...'),await aiAgent['runGeminiAnalysis'](this),this[_0x2812c2(0x228)](),this['triggerGaitAnalysis'](),this[_0x2812c2(0x2bf)]();}async['checkSolarCondition'](){const _0x1b7a08=a0_0x3bbe85,_0x3b8cd6=['weatherunderground.0','accuweather.0',_0x1b7a08(0x219)],_0x3ef7d3=[_0x1b7a08(0x2c1),_0x1b7a08(0x22a),_0x1b7a08(0x2d7)];for(const _0x3b398f of _0x3b8cd6){for(const _0x542d0d of _0x3ef7d3){try{const _0x571536=_0x3b398f+'.'+_0x542d0d,_0x36972e=await this[_0x1b7a08(0x1fd)](_0x571536);if(_0x36972e&&_0x36972e['val']){const _0x5742b3=String(_0x36972e[_0x1b7a08(0x223)])[_0x1b7a08(0x2d1)]();if(_0x5742b3['includes'](_0x1b7a08(0x243))||_0x5742b3[_0x1b7a08(0x20d)](_0x1b7a08(0x1f9))||_0x5742b3['includes']('klar')||_0x5742b3[_0x1b7a08(0x20d)](_0x1b7a08(0x1ec))||_0x5742b3['includes'](_0x1b7a08(0x2c0)))return!![];}}catch(_0x141f16){}}}return![];}[a0_0x3bbe85(0x24d)](){const _0x53fbf1=a0_0x3bbe85;if(!this['isProVersion'])return;try{this[_0x53fbf1(0x273)](_0x53fbf1(0x2b6),(_0x58fc16,_0x27e85c)=>{const _0x952736=_0x53fbf1;_0x27e85c&&_0x27e85c[_0x952736(0x223)]&&pythonBridge['send'](this,_0x952736(0x29d),{'sequences':JSON[_0x952736(0x23c)](_0x27e85c['val'])});});}catch(_0x4ef57d){}}async[a0_0x3bbe85(0x2bf)](){const _0x4846a4=a0_0x3bbe85;if(!this[_0x4846a4(0x2b5)])return;try{const _0x5b7c52=await recorder[_0x4846a4(0x2bc)](this);if(_0x5b7c52===null)return;const _0x48c9d3={},_0x52e709={},_0x2e3616=this[_0x4846a4(0x248)][_0x4846a4(0x297)]||[];for(const _0x211150 of _0x2e3616){if(_0x211150[_0x4846a4(0x203)]===_0x4846a4(0x25e)&&_0x211150[_0x4846a4(0x1ef)]){const _0x4f8aea=this[_0x4846a4(0x226)][_0x211150['id']];if(_0x4f8aea!==undefined)_0x48c9d3[_0x211150[_0x4846a4(0x1ef)]]=_0x4f8aea;if(_0x211150['isSolar'])_0x52e709[_0x211150[_0x4846a4(0x1ef)]]=!![];}}const _0x26d988=await this[_0x4846a4(0x2dc)]();let _0x3a9f10={};try{const _0x3f9ebb=await this[_0x4846a4(0x211)](_0x4846a4(0x28b));if(_0x3f9ebb&&_0x3f9ebb[_0x4846a4(0x223)])_0x3a9f10=JSON[_0x4846a4(0x23c)](_0x3f9ebb[_0x4846a4(0x223)]);}catch(_0x1a83eb){}Object[_0x4846a4(0x225)](_0x48c9d3)['length']>0x0&&(pythonBridge[_0x4846a4(0x263)](this,'PREDICT_ENERGY',{'current_temps':_0x48c9d3,'t_out':_0x5b7c52,'is_sunny':_0x26d988,'solar_flags':_0x52e709,'warmup_targets':_0x3a9f10}),pythonBridge[_0x4846a4(0x263)](this,_0x4846a4(0x205),{'current_temps':_0x48c9d3,'t_out':_0x5b7c52,'targets':{}}));}catch(_0x4e8ff2){}}[a0_0x3bbe85(0x228)](){const _0x255081=a0_0x3bbe85;if(!this[_0x255081(0x2ca)]||this['rawEventLog'][_0x255081(0x288)]===0x0)return;const _0xf108a0=new Array(0x60)[_0x255081(0x232)](0x0),_0x27dec8=new Date()['setHours'](0x0,0x0,0x0,0x0);this[_0x255081(0x2ca)]['forEach'](_0x44cf57=>{const _0xc1de60=_0x255081,_0x9671e=new Date(_0x44cf57[_0xc1de60(0x1e0)]);if(_0x9671e[_0xc1de60(0x242)]()>=_0x27dec8){const _0x22b1de=_0x9671e['getHours'](),_0x156477=_0x9671e['getMinutes'](),_0x24f0e6=_0x22b1de*0x4+Math[_0xc1de60(0x281)](_0x156477/0xf);if(_0x24f0e6>=0x0&&_0x24f0e6<0x60)_0xf108a0[_0x24f0e6]++;}}),this[_0x255081(0x20b)](_0x255081(0x208),{'val':JSON['stringify'](_0xf108a0),'ack':!![]});}['runPythonHealthCheck'](){const _0x239077=a0_0x3bbe85;if(!this['dailyDigests']||this['dailyDigests']['length']<0x2)return;const _0x29bda8=this[_0x239077(0x244)][_0x239077(0x231)](_0x37c2be=>{const _0x28b65b=_0x239077,_0x9f0f9f=(_0x37c2be[_0x28b65b(0x29b)]||'')['toLowerCase']();return ACTIVITY_LEVEL_MAP[_0x9f0f9f]||0x32;});pythonBridge[_0x239077(0x263)](this,_0x239077(0x1e7),{'values':_0x29bda8,'tag':_0x239077(0x2af)});}}function a0_0x5da5(_0x15fd92,_0x5aae72){const _0x1b5f3a=a0_0x28e0();return a0_0x5da5=function(_0x549c66,_0x320d9d){_0x549c66=_0x549c66-0x1dd;let _0x28e054=_0x1b5f3a[_0x549c66];return _0x28e054;},a0_0x5da5(_0x15fd92,_0x5aae72);}if(require[a0_0x3bbe85(0x255)]!==module)module[a0_0x3bbe85(0x28f)]=_0x31ba2c=>new CogniLiving(_0x31ba2c);else new CogniLiving();