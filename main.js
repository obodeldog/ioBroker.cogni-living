const a0_0x4097f8=a0_0x1ef8;(function(_0xbd62aa,_0x26bb44){const _0x835667=a0_0x1ef8,_0x50269b=_0xbd62aa();while(!![]){try{const _0x31e854=parseInt(_0x835667(0x11f))/0x1+parseInt(_0x835667(0x133))/0x2*(parseInt(_0x835667(0x218))/0x3)+-parseInt(_0x835667(0xfe))/0x4*(-parseInt(_0x835667(0x249))/0x5)+-parseInt(_0x835667(0x263))/0x6+-parseInt(_0x835667(0x173))/0x7+-parseInt(_0x835667(0x1da))/0x8*(parseInt(_0x835667(0xfb))/0x9)+parseInt(_0x835667(0x1ca))/0xa*(-parseInt(_0x835667(0x123))/0xb);if(_0x31e854===_0x26bb44)break;else _0x50269b['push'](_0x50269b['shift']());}catch(_0x38e61d){_0x50269b['push'](_0x50269b['shift']());}}}(a0_0x3b81,0x1c8d9));const a0_0x1a311d=(function(){let _0x1ee3b8=!![];return function(_0x66b562,_0x3c975a){const _0x2f4933=_0x1ee3b8?function(){const _0x5e6052=a0_0x1ef8;if(_0x3c975a){const _0x263994=_0x3c975a[_0x5e6052(0x7b)](_0x66b562,arguments);return _0x3c975a=null,_0x263994;}}:function(){};return _0x1ee3b8=![],_0x2f4933;};}()),a0_0x10310a=a0_0x1a311d(this,function(){const _0x14f0a9=a0_0x1ef8;return a0_0x10310a['toString']()['search']('(((.+)+)+)+$')[_0x14f0a9(0x266)]()[_0x14f0a9(0x225)](a0_0x10310a)[_0x14f0a9(0xa1)]('(((.+)+)+)+$');});function a0_0x1ef8(_0x12ba6b,_0x579953){const _0x32b306=a0_0x3b81();return a0_0x1ef8=function(_0x10310a,_0x1a311d){_0x10310a=_0x10310a-0x64;let _0x3b8198=_0x32b306[_0x10310a];return _0x3b8198;},a0_0x1ef8(_0x12ba6b,_0x579953);}a0_0x10310a();'use strict';const utils=require(a0_0x4097f8(0x91)),{GoogleGenerativeAI}=require(a0_0x4097f8(0x1cc)),schedule=require(a0_0x4097f8(0xc8)),{spawn,exec}=require(a0_0x4097f8(0x11b)),path=require(a0_0x4097f8(0xd1)),HISTORY_MAX_SIZE=0x32,RAW_LOG_MAX_SIZE=0x5dc,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL=a0_0x4097f8(0x255),LTM_SCHEDULE=a0_0x4097f8(0x244),MODE_RESET_SCHEDULE='0\x204\x20*\x20*\x20*',ANALYSIS_HISTORY_MAX_SIZE=0x64,EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,SEQUENCE_TIMEOUT_MS=0x5*0x3c*0x3e8,MAX_TRAINING_SET_SIZE=0x1f4,THERMO_LOG_SIZE=0x3e8,LTM_DP_RAW_LOG=a0_0x4097f8(0xb6),LTM_DP_DAILY_DIGESTS=a0_0x4097f8(0x17f),LTM_DP_STATUS=a0_0x4097f8(0xcc),LTM_DP_TRIGGER_DIGEST=a0_0x4097f8(0x18e),LTM_DP_BASELINE_STATUS=a0_0x4097f8(0x13b),LTM_DP_DRIFT_CHANNEL='LTM.driftAnalysis',LTM_DP_DRIFT_STATUS='LTM.driftAnalysis.baselineDrift',LTM_DP_DRIFT_DETAILS='LTM.driftAnalysis.driftDetails',LTM_DP_DRIFT_LAST_CHECK=a0_0x4097f8(0xbd),SYSTEM_DP_MODE=a0_0x4097f8(0x1c8),HARD_IGNORE_TERMS=[a0_0x4097f8(0x130),a0_0x4097f8(0xa0),'update',a0_0x4097f8(0x23d),'lowbat',a0_0x4097f8(0x8f),a0_0x4097f8(0x21d),'maintenance',a0_0x4097f8(0x224),a0_0x4097f8(0xd8),a0_0x4097f8(0x21b),'direction',a0_0x4097f8(0x18c),a0_0x4097f8(0x24c),a0_0x4097f8(0x24a),'firmware',a0_0x4097f8(0x1d5),a0_0x4097f8(0x6e)],BAD_NAMES=['targetposition',a0_0x4097f8(0x22b),a0_0x4097f8(0x238),a0_0x4097f8(0xfd),'value',a0_0x4097f8(0xcd),'on',a0_0x4097f8(0x1a2),a0_0x4097f8(0xba),a0_0x4097f8(0x118),a0_0x4097f8(0x11e),a0_0x4097f8(0x83),a0_0x4097f8(0x202),'status',a0_0x4097f8(0x107),a0_0x4097f8(0x203),a0_0x4097f8(0x152),'temperature',a0_0x4097f8(0x75),a0_0x4097f8(0x6a),a0_0x4097f8(0x25e),a0_0x4097f8(0xad),a0_0x4097f8(0xbb),a0_0x4097f8(0x110),a0_0x4097f8(0x1fd)],ADAPTER_BLACKLIST=[a0_0x4097f8(0xf8),'admin.','info.',a0_0x4097f8(0x64),a0_0x4097f8(0x26b),a0_0x4097f8(0x1ee),a0_0x4097f8(0x74),a0_0x4097f8(0x6c),a0_0x4097f8(0x166),a0_0x4097f8(0x187),a0_0x4097f8(0x1e0)],SYSTEM_MODES={'NORMAL':a0_0x4097f8(0x134),'VACATION':'vacation','PARTY':'party','GUEST':a0_0x4097f8(0x65)},AUTO_RESET_MODES=[SYSTEM_MODES[a0_0x4097f8(0xe2)],SYSTEM_MODES[a0_0x4097f8(0x19a)]],PERSONA_MAPPING={'generic':a0_0x4097f8(0x17e),'senior_aal':a0_0x4097f8(0x1dd),'family':a0_0x4097f8(0x101),'single_comfort':a0_0x4097f8(0x270),'security':'PRIORITÃ„T:\x20Sicherheit.'},ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};let activeSequence=[],sequenceTimer=null;async function initZombies(_0x170123){const _0x565610=a0_0x4097f8;try{const _0x3ab571=[_0x565610(0xf2),'events.history_debug_00'];for(const _0x1aa01b of _0x3ab571){try{const _0x5d8646=await _0x170123[_0x565610(0x168)](_0x1aa01b);_0x5d8646&&await _0x170123[_0x565610(0x8b)](_0x1aa01b);}catch(_0x708a81){}}}catch(_0x39a518){}}async function initHistory(_0x20a1ad){const _0x56f153=a0_0x4097f8;try{const _0x1e0245=await _0x20a1ad['getStateAsync'](_0x56f153(0x188));_0x1e0245&&_0x1e0245[_0x56f153(0x122)]&&(_0x20a1ad[_0x56f153(0x1b5)]=JSON['parse'](_0x1e0245['val']['toString']()));}catch(_0x775d81){_0x20a1ad[_0x56f153(0x1b5)]=[];}try{const _0xde3d00=await _0x20a1ad[_0x56f153(0x1aa)](_0x56f153(0x174));if(_0xde3d00&&_0xde3d00[_0x56f153(0x122)])_0x20a1ad[_0x56f153(0x22d)]=JSON[_0x56f153(0xe1)](_0xde3d00[_0x56f153(0x122)][_0x56f153(0x266)]());}catch(_0x9bfab0){_0x20a1ad[_0x56f153(0x22d)]=[];}if(_0x20a1ad['eventHistory']&&_0x20a1ad['eventHistory'][_0x56f153(0x1d3)]>0x0){_0x20a1ad[_0x56f153(0x148)][_0x56f153(0xa2)]('Restoring\x20sensor\x20cache\x20from\x20history\x20('+_0x20a1ad[_0x56f153(0x1b5)][_0x56f153(0x1d3)]+_0x56f153(0x132));for(let _0x52dc2c=_0x20a1ad[_0x56f153(0x1b5)]['length']-0x1;_0x52dc2c>=0x0;_0x52dc2c--){const _0xf1d959=_0x20a1ad[_0x56f153(0x1b5)][_0x52dc2c];_0xf1d959&&_0xf1d959['id']!==undefined&&_0xf1d959['value']!==undefined&&(_0x20a1ad[_0x56f153(0x160)][_0xf1d959['id']]=_0xf1d959[_0x56f153(0xd4)]);}}}async function initSystemConfig(_0xdf5d04){const _0x344721=a0_0x4097f8;try{const _0x1e5ba8=await _0xdf5d04[_0x344721(0x247)](_0x344721(0x1bd));_0x1e5ba8&&_0x1e5ba8[_0x344721(0x209)]&&(_0xdf5d04[_0x344721(0xfa)]={'latitude':_0x1e5ba8[_0x344721(0x209)][_0x344721(0x252)]||0x0,'longitude':_0x1e5ba8[_0x344721(0x209)][_0x344721(0x15f)]||0x0,'city':_0x1e5ba8['common'][_0x344721(0x1c9)]||''});}catch(_0x5ca38c){}}async function checkLicense(_0x1d7acf,_0x205503){const _0x40e068=a0_0x4097f8;if(!_0x205503)return![];_0x1d7acf[_0x40e068(0x1db)]=await getSystemUUID(_0x1d7acf);if(_0x205503===_0x40e068(0x68)||_0x205503[_0x40e068(0x8a)]('PRO-'))return!![];return![];}async function getSystemUUID(_0x5e6ab1){const _0x2b9b9a=a0_0x4097f8;try{const _0x34ccc7=await _0x5e6ab1[_0x2b9b9a(0x247)](_0x2b9b9a(0x69));if(_0x34ccc7&&_0x34ccc7[_0x2b9b9a(0x138)]&&_0x34ccc7[_0x2b9b9a(0x138)][_0x2b9b9a(0x197)])return _0x34ccc7['native'][_0x2b9b9a(0x197)];return'uuid-not-found';}catch(_0x5b255c){return _0x2b9b9a(0xc9);}}async function createAllObjects(_0x14c49e){const _0x1764f6=a0_0x4097f8;await checkSystemObjects(_0x14c49e),await _0x14c49e[_0x1764f6(0x22c)](_0x1764f6(0x18f),{'type':_0x1764f6(0x238),'common':{'name':'Who\x20is\x20present?','type':_0x1764f6(0x182),'role':_0x1764f6(0x23e),'read':!![],'write':![],'def':''},'native':{}}),await _0x14c49e[_0x1764f6(0x22c)]('events.lastEvent',{'type':'state','common':{'name':_0x1764f6(0x14e),'type':'string','role':_0x1764f6(0x97),'read':!![],'write':![]},'native':{}}),await _0x14c49e[_0x1764f6(0x22c)](_0x1764f6(0x188),{'type':'state','common':{'name':'Event\x20History','type':_0x1764f6(0x182),'role':_0x1764f6(0x97),'read':!![],'write':![]},'native':{}}),await _0x14c49e[_0x1764f6(0x22c)]('analysis.trigger',{'type':_0x1764f6(0x238),'common':{'name':_0x1764f6(0x102),'type':_0x1764f6(0x18d),'role':'button','read':!![],'write':!![],'def':![]},'native':{}}),await _0x14c49e['setObjectNotExistsAsync'](_0x1764f6(0xa9),{'type':'state','common':{'name':'Trigger\x20Briefing\x20(Test)','type':_0x1764f6(0x18d),'role':'button','read':!![],'write':!![],'def':![]},'native':{}}),await _0x14c49e[_0x1764f6(0x22c)]('analysis.lastResult',{'type':_0x1764f6(0x238),'common':{'name':_0x1764f6(0x13a),'type':'string','role':_0x1764f6(0x97),'read':!![],'write':![]},'native':{}}),await _0x14c49e['setObjectNotExistsAsync'](_0x1764f6(0x6b),{'type':_0x1764f6(0x238),'common':{'name':_0x1764f6(0x77),'type':_0x1764f6(0x18d),'role':_0x1764f6(0x14b),'read':!![],'write':![],'def':![]},'native':{}}),await _0x14c49e[_0x1764f6(0x22c)](_0x1764f6(0xed),{'type':'state','common':{'name':'AI\x20Emergency\x20Status','type':_0x1764f6(0x18d),'role':'indicator.alarm.fire','read':!![],'write':![],'def':![]},'native':{}}),await _0x14c49e[_0x1764f6(0x22c)](_0x1764f6(0x22e),{'type':_0x1764f6(0x238),'common':{'name':_0x1764f6(0xb5),'type':'string','role':_0x1764f6(0x13c),'read':!![],'write':![]},'native':{}}),await _0x14c49e['setObjectNotExistsAsync']('analysis.activitySummary',{'type':'state','common':{'name':_0x1764f6(0x190),'type':'string','role':_0x1764f6(0x23e),'read':!![],'write':![]},'native':{}}),await _0x14c49e['setObjectNotExistsAsync'](_0x1764f6(0xa7),{'type':_0x1764f6(0x238),'common':{'name':_0x1764f6(0x195),'type':_0x1764f6(0x182),'role':_0x1764f6(0x238),'read':!![],'write':![],'def':'N/A'},'native':{}}),await _0x14c49e[_0x1764f6(0x22c)](_0x1764f6(0x220),{'type':_0x1764f6(0x238),'common':{'name':_0x1764f6(0x230),'type':'string','role':_0x1764f6(0x23e),'read':!![],'write':![]},'native':{}}),await _0x14c49e[_0x1764f6(0x22c)](_0x1764f6(0x9e),{'type':'state','common':{'name':_0x1764f6(0xcb),'type':_0x1764f6(0x182),'role':_0x1764f6(0x23e),'read':!![],'write':![]},'native':{}}),await _0x14c49e[_0x1764f6(0x20e)]('analysis.automation',{'type':_0x1764f6(0xc0),'common':{'name':'Automation\x20Proposals'},'native':{}}),await _0x14c49e[_0x1764f6(0x22c)](_0x1764f6(0x8c),{'type':_0x1764f6(0x238),'common':{'name':_0x1764f6(0xc5),'type':'boolean','role':_0x1764f6(0x1a4),'read':!![],'write':![],'def':![]},'native':{}}),await _0x14c49e['setObjectNotExistsAsync'](_0x1764f6(0xc7),{'type':_0x1764f6(0x238),'common':{'name':_0x1764f6(0x216),'type':_0x1764f6(0x182),'role':_0x1764f6(0x23e),'read':!![],'write':![]},'native':{}}),await _0x14c49e[_0x1764f6(0x22c)](_0x1764f6(0x20b),{'type':'state','common':{'name':_0x1764f6(0x261),'type':_0x1764f6(0x182),'role':_0x1764f6(0x23e),'read':!![],'write':![]},'native':{}}),await _0x14c49e[_0x1764f6(0x22c)]('analysis.automation.targetId',{'type':'state','common':{'name':_0x1764f6(0x259),'type':_0x1764f6(0x182),'role':_0x1764f6(0x23e),'read':!![],'write':![]},'native':{}}),await _0x14c49e[_0x1764f6(0x22c)](_0x1764f6(0x10a),{'type':_0x1764f6(0x238),'common':{'name':_0x1764f6(0x242),'type':_0x1764f6(0x182),'role':_0x1764f6(0x23e),'read':!![],'write':![]},'native':{}}),await _0x14c49e[_0x1764f6(0x22c)]('analysis.automation.autoApply',{'type':_0x1764f6(0x238),'common':{'name':_0x1764f6(0x246),'type':_0x1764f6(0x18d),'role':_0x1764f6(0xba),'read':!![],'write':!![],'def':![]},'native':{}}),await _0x14c49e['setObjectNotExistsAsync'](_0x1764f6(0x17b),{'type':_0x1764f6(0x238),'common':{'name':'Trigger\x20Action\x20Now','type':_0x1764f6(0x18d),'role':_0x1764f6(0x23f),'read':!![],'write':!![],'def':![]},'native':{}}),await _0x14c49e[_0x1764f6(0x22c)](_0x1764f6(0x174),{'type':_0x1764f6(0x238),'common':{'name':'Logbook','type':_0x1764f6(0x182),'role':_0x1764f6(0x97),'read':!![],'write':![],'def':'[]'},'native':{}}),await _0x14c49e[_0x1764f6(0x22c)]('analysis.feedbackHistory',{'type':'state','common':{'name':_0x1764f6(0xc6),'type':'string','role':_0x1764f6(0x97),'read':!![],'write':![],'def':'[]'},'native':{}}),await _0x14c49e[_0x1764f6(0x20e)](_0x1764f6(0x13d),{'type':_0x1764f6(0xc0),'common':{'name':_0x1764f6(0x221)},'native':{}}),await _0x14c49e['setObjectNotExistsAsync']('analysis.health.sleepScore',{'type':_0x1764f6(0x238),'common':{'name':_0x1764f6(0x21a),'type':_0x1764f6(0x16b),'role':_0x1764f6(0x7a),'read':!![],'write':![],'def':0x0},'native':{}}),await _0x14c49e['setObjectNotExistsAsync'](_0x1764f6(0x94),{'type':_0x1764f6(0x238),'common':{'name':'Restlessness\x20Level','type':_0x1764f6(0x182),'role':_0x1764f6(0x23e),'read':!![],'write':![],'def':'none'},'native':{}}),await _0x14c49e['setObjectNotExistsAsync'](_0x1764f6(0xd5),{'type':'state','common':{'name':_0x1764f6(0x239),'type':_0x1764f6(0x182),'role':_0x1764f6(0x23e),'read':!![],'write':![],'def':''},'native':{}}),await _0x14c49e[_0x1764f6(0x22c)](_0x1764f6(0xab),{'type':'state','common':{'name':_0x1764f6(0x1e2),'type':_0x1764f6(0x182),'role':_0x1764f6(0x23e),'read':!![],'write':![],'def':_0x1764f6(0x207)},'native':{}}),await _0x14c49e[_0x1764f6(0x22c)](_0x1764f6(0x99),{'type':_0x1764f6(0x238),'common':{'name':'Trend\x20Value\x20(%)','type':_0x1764f6(0x16b),'role':'value','read':!![],'write':![],'def':0x0},'native':{}}),await _0x14c49e[_0x1764f6(0x20e)]('LTM.trainingData',{'type':_0x1764f6(0xc0),'common':{'name':'Training\x20Data\x20Sets'},'native':{}}),await _0x14c49e['setObjectNotExistsAsync'](_0x1764f6(0x1c3),{'type':_0x1764f6(0x238),'common':{'name':_0x1764f6(0xea),'type':_0x1764f6(0x182),'role':_0x1764f6(0x97),'read':!![],'write':![],'def':'[]','desc':'Array\x20of\x20completed\x20movement\x20paths\x20for\x20ML\x20training'},'native':{}}),await _0x14c49e[_0x1764f6(0x22c)](_0x1764f6(0x1a9),{'type':_0x1764f6(0x238),'common':{'name':_0x1764f6(0x143),'type':_0x1764f6(0x182),'role':_0x1764f6(0x97),'read':!![],'write':![],'def':'[]','desc':_0x1764f6(0x24b)},'native':{}}),await checkLtmObjects(_0x14c49e),await checkLtmDriftObjects(_0x14c49e);}async function checkSystemObjects(_0x4a8f16){const _0x17838d=a0_0x4097f8;await _0x4a8f16[_0x17838d(0x20e)](_0x17838d(0x24d),{'type':_0x17838d(0xc0),'common':{'name':_0x17838d(0x17d)},'native':{}}),await _0x4a8f16[_0x17838d(0x20e)](SYSTEM_DP_MODE,{'type':'state','common':{'name':'System\x20Mode','type':_0x17838d(0x182),'role':'state','read':!![],'write':!![],'def':SYSTEM_MODES[_0x17838d(0xc2)],'states':{[SYSTEM_MODES[_0x17838d(0xc2)]]:'Normal',[SYSTEM_MODES['VACATION']]:_0x17838d(0x169),[SYSTEM_MODES[_0x17838d(0xe2)]]:'Party',[SYSTEM_MODES[_0x17838d(0x19a)]]:_0x17838d(0x1ed)}},'native':{}});}async function checkLtmObjects(_0x336783){const _0x27e3fb=a0_0x4097f8;await _0x336783[_0x27e3fb(0x20e)]('LTM',{'type':_0x27e3fb(0xc0),'common':{'name':_0x27e3fb(0x1e5)},'native':{}}),await _0x336783['extendObjectAsync'](LTM_DP_RAW_LOG,{'type':_0x27e3fb(0x238),'common':{'name':_0x27e3fb(0x1a6),'type':'string','role':'json','read':!![],'write':![]},'native':{}}),await _0x336783['extendObjectAsync'](LTM_DP_DAILY_DIGESTS,{'type':_0x27e3fb(0x238),'common':{'name':_0x27e3fb(0x128),'type':_0x27e3fb(0x182),'role':_0x27e3fb(0x97),'read':!![],'write':![]},'native':{}}),await _0x336783[_0x27e3fb(0x20e)](LTM_DP_STATUS,{'type':'state','common':{'name':'Processing\x20Status','type':_0x27e3fb(0x182),'role':_0x27e3fb(0x23e),'read':!![],'write':![]},'native':{}}),await _0x336783[_0x27e3fb(0x20e)](LTM_DP_TRIGGER_DIGEST,{'type':_0x27e3fb(0x238),'common':{'name':_0x27e3fb(0x19d),'type':'boolean','role':_0x27e3fb(0x23f),'read':!![],'write':!![],'def':![]},'native':{}}),await _0x336783[_0x27e3fb(0x20e)](LTM_DP_BASELINE_STATUS,{'type':'state','common':{'name':'Baseline\x20Status','type':_0x27e3fb(0x182),'role':'text','read':!![],'write':![]},'native':{}});}async function checkLtmDriftObjects(_0x276c38){const _0x495de4=a0_0x4097f8;await _0x276c38[_0x495de4(0x20e)](LTM_DP_DRIFT_CHANNEL,{'type':_0x495de4(0xc0),'common':{'name':_0x495de4(0x1f3)},'native':{}}),await _0x276c38[_0x495de4(0x20e)](LTM_DP_DRIFT_STATUS,{'type':_0x495de4(0x238),'common':{'name':'Drift\x20Status','type':_0x495de4(0x182),'role':'state','read':!![],'write':![],'def':_0x495de4(0x207)},'native':{}}),await _0x276c38[_0x495de4(0x20e)](LTM_DP_DRIFT_DETAILS,{'type':_0x495de4(0x238),'common':{'name':'Drift\x20Details','type':_0x495de4(0x182),'role':_0x495de4(0x23e),'read':!![],'write':![]},'native':{}}),await _0x276c38[_0x495de4(0x20e)](LTM_DP_DRIFT_LAST_CHECK,{'type':_0x495de4(0x238),'common':{'name':_0x495de4(0x150),'type':_0x495de4(0x16b),'role':_0x495de4(0x9b),'read':!![],'write':![]},'native':{}});}async function loadSystemMode(_0x407d66){const _0x15f291=a0_0x4097f8;try{const _0x2133b3=await _0x407d66[_0x15f291(0x1aa)](SYSTEM_DP_MODE);_0x2133b3&&_0x2133b3[_0x15f291(0x122)]&&Object[_0x15f291(0x194)](SYSTEM_MODES)['includes'](_0x2133b3[_0x15f291(0x122)])?_0x407d66['currentSystemMode']=_0x2133b3[_0x15f291(0x122)]:(_0x407d66[_0x15f291(0xd6)]=SYSTEM_MODES[_0x15f291(0xc2)],await _0x407d66['setStateAsync'](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x15f291(0xc2)],'ack':!![]}));}catch(_0x3b49fd){_0x407d66[_0x15f291(0xd6)]=SYSTEM_MODES['NORMAL'];}}async function loadRawEventLog(_0x18a190){const _0x396d11=a0_0x4097f8;try{const _0xde38fb=await _0x18a190[_0x396d11(0x1aa)](LTM_DP_RAW_LOG);if(_0xde38fb&&_0xde38fb[_0x396d11(0x122)])_0x18a190[_0x396d11(0xe0)]=JSON[_0x396d11(0xe1)](_0xde38fb[_0x396d11(0x122)]);}catch(_0x11e6cb){_0x18a190[_0x396d11(0xe0)]=[];}}async function saveRawEventLog(_0x585dd9){const _0x98d156=a0_0x4097f8;_0x585dd9[_0x98d156(0xe0)][_0x98d156(0x1d3)]>RAW_LOG_MAX_SIZE&&_0x585dd9['rawEventLog'][_0x98d156(0x178)](0x0,_0x585dd9[_0x98d156(0xe0)]['length']-RAW_LOG_MAX_SIZE),await _0x585dd9['setStateAsync'](LTM_DP_RAW_LOG,{'val':JSON['stringify'](_0x585dd9[_0x98d156(0xe0)]),'ack':!![]});}async function loadDailyDigests(_0x208c23){const _0x4a608e=a0_0x4097f8;try{const _0x51ad73=await _0x208c23['getStateAsync'](LTM_DP_DAILY_DIGESTS);if(_0x51ad73&&_0x51ad73[_0x4a608e(0x122)])_0x208c23[_0x4a608e(0x219)]=JSON[_0x4a608e(0xe1)](_0x51ad73[_0x4a608e(0x122)]);}catch(_0x276c81){_0x208c23[_0x4a608e(0x219)]=[];}await updateBaselineStatus(_0x208c23);}async function saveDailyDigests(_0x196ede,_0x425d4e=!![]){const _0xeaabe8=a0_0x4097f8,_0x14fcaa=_0x196ede[_0xeaabe8(0x111)][_0xeaabe8(0x121)]||0x3c;_0x196ede[_0xeaabe8(0x219)][_0xeaabe8(0x1d3)]>_0x14fcaa&&_0x196ede[_0xeaabe8(0x219)]['splice'](0x0,_0x196ede['dailyDigests'][_0xeaabe8(0x1d3)]-_0x14fcaa);await _0x196ede[_0xeaabe8(0x10e)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0xeaabe8(0x172)](_0x196ede[_0xeaabe8(0x219)]),'ack':!![]});if(_0x425d4e)await updateBaselineStatus(_0x196ede);}function a0_0x3b81(){const _0x58f25b=['outdoorSensorId','channel','setForeignStateAsync','NORMAL','isGracePeriodActive','.\x20Welcome\x20home.','Pattern\x20Detected','Feedback\x20Log','analysis.automation.description','node-schedule','uuid-error','N/A\x20(Learning)','Comfort\x20Suggestion','LTM.processingStatus','brightness','.forecast.current.temp','\x20hours.\x20Potential\x20incapacitation.','getFullYear','path','schalter','notifyEmailRecipient','value','analysis.health.notes','currentSystemMode','\x0a\x20\x20\x20\x20ROLLE:\x20KI-Hausverwalter\x20&\x20Gesundheits-Assistent.\x0a\x20\x20\x20\x20PERSONA:\x20','fault','autoApply','ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20','.NextHours.Location_1.Day_1.current.temp_value','Generating\x20Morning\x20Briefing...','enum.functions.*','ðŸ\x20Python\x20Pong\x20received!\x20Latency\x20check\x20passed.','sensor','rawEventLog','parse','PARTY','automationProposal','push','Alarm','licenseKey','unshift','type','main','Recorded\x20Motion\x20Sequences','isProVersion','.\x20OUTPUT:\x20Nur\x20Text.','analysis.isEmergency','message','map','.\x0a\x20\x20\x20\x20WETTER:\x20','round','analysis.history_debug_00','Kalender:\x20Deaktiviert','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','join',').\x20Starting\x20Timer.','toISOString','system.','WETTER:\x20','systemConfig','369IXoRHW','IGNORING\x20DUPLICATE\x20(Cached):\x20','level','4rHJjzZ','event','Error\x20launching\x20Python\x20service:\x20','Fokus\x20auf\x20Familienroutinen.','Trigger\x20Analysis','ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','submitFeedback','[RECORDER\x20DEBUG]\x20Ignored\x20Event\x20','\x20(Length:\x20','motion','time','light','analysis.automation.targetValue','[PYTHON]\x20Failed\x20to\x20start\x20(is\x20python3\x20installed?):\x20','Error\x20in\x20onMessage\x20command\x20','Event\x20received:\x20','setStateAsync','lampe','actual_temperature','config','sendTo','filter','system.isPresent','write','useCalendar','indexOf','position','ðŸ“ž\x20User\x20requested\x20CALL\x20via\x20Telegram!','tÃ¼r','child_process','find','weatherunderground','shutter','121653BzoAKZ','testNotification','ltmLtbWindowDays','val','11RtVOho','\x20Tage)','Started\x20at\x20','getOverviewData','exports','Daily\x20Digests','targetId','baselineDrift','Kein\x20API\x20Key!','Missing\x20data','getHours','livingContext','isAlert','scriptProblem','cancel','\x20events)...','292aMDngs','normal','role','KALENDER:\x20Keine\x20Daten','online','native','PONG','Last\x20Result','LTM.baselineStatus','text.alarm','analysis.health','getLtmData','application/json','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','No\x20instance','endsWith','Thermodynamic\x20Data\x20Points','\x20=\x20','getForeignStateAsync','geminiModel','location','log','isArray','dimmer','indicator.alarm','response','cogni-living','Last\x20raw\x20event','simulateButler','Last\x20Check','pop','occupancy','KI-Modell\x20nicht\x20initialisiert','description','forEach','analysis.activitySummary','ðŸ“¡\x20Hooking\x20into\x20','Lernphase\x20(','analysis.trigger','lights','Cogni-Living','ack','WiFi\x20Presence\x20detected\x20->\x20Aborting\x20Exit\x20Timer.\x20User\x20is\x20present.','generateContent','longitude','sensorLastValues','accuweather.0','notifyTelegramEnabled','[RESULT]','VACATION','from','echarts.','subscribeForeignStatesAsync','getObjectAsync','Urlaub','detected','number','Error\x20reading\x20outdoor\x20sensor\x20','[RECORDER]\x20Discarding\x20short\x20sequence\x20(Length:\x20','notifyPushoverEnabled','getMonth','_calName','\x20(Value\x20is\x20falsy:\x20','stringify','1150702HuDaMo','analysis.analysisHistory','licht','modeResetJob','unload','splice','setState','onStateChange','analysis.automation.triggerAction','.\x0a\x20\x20\x20\x20KONTEXT:\x20','System\x20Status\x20&\x20Control','Analysiere\x20ausgewogen.','LTM.dailyDigests','python3\x20-m\x20pip\x20install\x20-r\x20\x22','requirements.txt','string','.forecast.current.state','[LOG]','details','shift','javascript.','events.history','bewegung','âš ï¸\x20Python\x20missing\x20dependencies.\x20Triggering\x20Auto-Install...','weather','stick_unreach','boolean','LTM.triggerDailyDigest','system.presenceWho','Activity\x20Summary','presenceDevices','Scanning\x20for\x20devices\x20(V8:\x20Whitelist\x20Priority)...','status','values','Deviation','prÃ¤senz','uuid','toLowerCase','scheduleJob','GUEST','.NextHours.Location_1.Day_1.current.symbol_desc','communicate.request','Trigger\x20Digest','inactivityMonitoringEnabled','loc','openweathermap','Guardian:\x20Sending\x20','off','stateChange','indicator','analysis.automation.targetId','Raw\x20Log','temp','...','LTM.trainingData.thermodynamics','getStateAsync','now','getGenerativeModel','analysis.automation.autoApply','KALENDER\x20ERROR:\x20','notifyPushoverInstance','slice','catch','getCalendarNames','enum.rooms.*','No\x20module\x20named','eventHistory','unknown','dismissAutomation','Say\x20Hello','Verbindung\x20erfolgreich!\x20Antwort:\x20','feedbackHistory','COGNI_REQUEST_CALL','getCalendarNames\x20Error:\x20','system.config','\x20min).','weatherInstance','\x27\x20not\x20in\x20allowed\x20list)','subscribeStates','python3','LTM.trainingData.sequences','kontakt','members','window','[RECORDER]\x20Added\x20step\x20to\x20sequence:\x20','system.mode','city','309930HPrktp','telegram','@google/generative-ai','custom','notifyPushoverRecipient','heizung','\x20for\x20interactive\x20buttons...','openweathermap.0','sendToAsync','length','[PYTHON]\x20Service\x20exited\x20with\x20code\x20','reachable','isEmergency','exitGraceTimer','isPresent','replace','2536DVeJMx','systemUUID','triggerBriefing','PRIORITÃ„T:\x20Gesundheit/AAL.','Subscribing\x20to\x20','08:00','simple-api.','notifyEmailEnabled','Trend\x20Diagnosis\x20(Python)','generic','analysisTimer','LTM','/100,\x20AktivitÃ¤t\x20seit\x2004:00:\x20','pythonProcess','includes','ðŸ“ž\x20RÃ¼ckruf\x20anfordern','stdin','triggerDailyDigest','sort','Gast','material.','send','[RECORDER]\x20Error\x20saving\x20sequence:\x20','object','alertReason','Drift\x20Analysis','Drift\x20Sched\x20Error:\x20','Feedback\x20saved:\x20','getDate','accuweather','command','notifyTelegramRecipient','.Summary.Current','inactivityThresholdHours','_score','set_temperature','aiPersona','.\x0a\x20\x20\x20\x20NOTFALL-KONTEXT:\x20','ðŸ¤–\x20BUTLER\x20AUTO-APPLY:\x20Executing\x20','.data.table','cover','presence','Exit\x20Sensor\x20triggered\x20(','onUnload','\x20events','N/A','âœ…\x20AUTO-FIX\x20SUCCESS.\x20Dependencies\x20installed.\x20Restarting\x20Service...','common','briefingEnabled','analysis.automation.suggestedAction','\x20|\x20','getForeignObjectsAsync','extendObjectAsync','ltmJob','daswetter.0','warn','lastAlertState','namespace','ðŸ¤–\x20BUTLER\x20PROPOSAL:\x20','ical.0','Description','ltmDriftCheckIntervalHours','4707oFjnhO','dailyDigests','Sleep\x20Score\x20(0-100)','working','[TEST]\x20','connection','ðŸŒ…\x20Daily\x20Briefing:\x0a','summary','analysis.comfortSummary','Health\x20&\x20Sleep\x20Analysis','Deaktiviert\x20(Pro-Feature)','events.lastEvent','error','constructor','doors','instance','minDaysForBaseline','close','WETTER:\x20Keine\x20Daten\x20gefunden','currentposition','setObjectNotExistsAsync','analysisHistory','analysis.alertReason','\x20sensors...','Comfort\x20Summary','Kein\x20API\x20Key\x20eingegeben.','\x0a\x0a\x20\x20\x20\x20AUFGABE:\x0a\x20\x20\x20\x201.\x20Analysiere\x20auf\x20Gesundheitsrisiken\x20(Sturz,\x20InaktivitÃ¤t).\x0a\x20\x20\x20\x202.\x20Analysiere\x20auf\x20Komfort/Automatisierung\x20(\x22Butler\x22).\x20Erkennst\x20du\x20ein\x20Muster?\x20(z.B.\x20\x22Wenn\x20Bewegung\x20Flur,\x20dann\x20Licht\x20an\x22).\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20FORMAT\x20(JSON\x20Only!):\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x22isAlert\x22:\x20boolean,\x0a\x20\x20\x20\x20\x20\x20\x22alertReason\x22:\x20\x22string\x20(kurz)\x22,\x0a\x20\x20\x20\x20\x20\x20\x22isEmergency\x22:\x20boolean,\x0a\x20\x20\x20\x20\x20\x20\x22summary\x22:\x20\x22string\x20(Was\x20passiert\x20gerade?)\x22,\x0a\x20\x20\x20\x20\x20\x20\x22automationProposal\x22:\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22detected\x22:\x20boolean,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22description\x22:\x20\x22string\x20(Was\x20soll\x20automatisiert\x20werden?)\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22targetId\x22:\x20\x22string\x20(ioBroker\x20ID,\x20z.B.\x200_userdata.0.light)\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22targetValue\x22:\x20\x22any\x20(Wert,\x20z.B.\x20true\x20oder\x2050)\x22\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20','getTime','[RECORDER\x20DEBUG]\x20Accepting\x20Event\x20','\x20(Type\x20\x27','onMessage','dependencyInstallInProgress','state','Health\x20Notes','KALENDER:\x20','\x22\x20--break-system-packages','driftAnalysisTimer','unreach','text','button','calendarInstance','enum','Target\x20Value','analysisInterval','0\x203\x20*\x20*\x20*','name','Auto\x20Apply\x20Rule','getForeignObjectAsync','cogni-living\x20adapter\x20starting\x20(v','331790KYMJbB','dutycycle','Correlation\x20between\x20Inside\x20Temp,\x20Outside\x20Temp\x20and\x20Time','config_pending','system','.\x0a\x20\x20\x20\x20SYSTEM_MODE:\x20','Briefing\x20Sched\x20Error:\x20','Details:\x20','briefingJob','latitude','fill','activityLevel','models/gemini-flash-latest','User\x20dismissed\x20automation\x20proposal.','devices','calendarSelection','Target\x20ID','ROLLE:\x20FÃ¼rsorglicher\x20Assistent.\x20AUFGABE:\x20Schreibe\x20eine\x20kurze,\x20beruhigende\x20\x22Guten\x20Morgen\x22-Nachricht.\x20PERSONA:\x20','Briefing\x20Error:\x20','COGNI_CONFIRM_OK','âœ…\x20User\x20confirmed\x20ALARM\x20via\x20Telegram.\x20Resetting\x20system.','energy','.Current.Temperature','âŒ\x20FREE\x20MODE','Action','WETTER\x20ERROR:\x20','550536ScZVnu','data','thermostat','toString','split','python_service','health','\x20presence\x20devices...','history.','isExit','debug','getEnums','Fehler:\x20','Fokus\x20auf\x20Komfort.','automation.triggerAction','vis.','guest','.\x20DATEN:\x20Schlaf\x20','some','TEST-PRO-KEY','system.meta.uuid','power','analysis.isAlert','flot.','[PYTHON\x20ERR]\x20','link_quality','[LICENSE\x20CHECK]\x20Key\x20present:\x20','Reset\x20Sched\x20Error:\x20','TREND_RESULT','.\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20INPUT\x20DATEN\x20(Letzte\x20Events):\x0a\x20\x20\x20\x20','ltmStbWindowDays','icons-mfd.','humidity','Failed\x20to\x20send\x20to\x20Python:\x20','AI\x20Alert\x20Status','[RECORDER]\x20Sequence\x20finished\x20(Steps:\x20','Unknown','value.health','apply','bind','Scheduling\x20Morning\x20Briefing\x20for\x20','contact','[PYTHON]\x20','exitTimer','stderr','genAI','blind','targetValue','sound','ðŸ\x20Stopping\x20Python\x20Sidecar...','SIMULATION:\x20Test-Vorschlag\x20fÃ¼r\x20','trim','Error\x20checking\x20WiFi:\x20','startsWith','delObjectAsync','analysis.automation.patternDetected','Wetter:\x20Deaktiviert','temperature','rssi','Entry\x20detected\x20via\x20','@iobroker/adapter-core','Activity-Level','Morning\x20Briefing\x20sent.','analysis.health.restlessness','):\x20','geminiApiKey','json','timestamp','analysis.health.trendValue','substring','date',').\x20Saving\x20to\x20Training\x20Data.','analysis.lastResult','analysis.comfortSuggestion','ðŸ\x20Starting\x20Python\x20Sidecar:\x20','scriptEnabled','search','info','useWeather','Keine\x20Details.','weatherunderground.0','.\x20ZUSATZ:\x20','analysis.deviationFromBaseline','Sending\x20notification:\x20\x22','analysis.triggerBriefing','lastIndexOf','analysis.health.trendDiagnosis','stdout','setpoint','\x0aSTB:\x20','fenster','\x20*\x20*\x20*','ðŸ§ª\x20Simulating\x20Butler\x20Proposal:\x20','Error\x20reading\x20calendar\x20table:\x20','BUTLER\x20Execution\x20Error:\x20','.forecast.current.temperature','Alert\x20Reason','LTM.rawEventLog','lock','Starting\x20Autopilot\x20(','kill','switch','valve','callback','LTM.driftAnalysis.lastCheck','notifyTelegramInstance'];a0_0x3b81=function(){return _0x58f25b;};return a0_0x3b81();}async function updateAnalysisHistory(_0x252e54,_0xdc13d0){const _0x305ad7=a0_0x4097f8;_0x252e54['analysisHistory'][_0x305ad7(0xe7)](_0xdc13d0);if(_0x252e54['analysisHistory'][_0x305ad7(0x1d3)]>ANALYSIS_HISTORY_MAX_SIZE)_0x252e54['analysisHistory'][_0x305ad7(0x151)]();await _0x252e54[_0x305ad7(0x10e)](_0x305ad7(0x174),{'val':JSON[_0x305ad7(0x172)](_0x252e54[_0x305ad7(0x22d)]),'ack':!![]});}async function updateBaselineStatus(_0x4aa9bf){const _0x54b953=a0_0x4097f8;if(!_0x4aa9bf[_0x54b953(0xeb)]){await _0x4aa9bf[_0x54b953(0x10e)](LTM_DP_BASELINE_STATUS,{'val':_0x54b953(0x222),'ack':!![]});return;}const _0x22f7f1=_0x4aa9bf[_0x54b953(0x219)]['length']>=(_0x4aa9bf['config'][_0x54b953(0x228)]||0x7)?'Aktiv\x20('+_0x4aa9bf[_0x54b953(0x219)][_0x54b953(0x1d3)]+_0x54b953(0x124):_0x54b953(0x158)+_0x4aa9bf['dailyDigests'][_0x54b953(0x1d3)]+'/'+(_0x4aa9bf[_0x54b953(0x111)]['minDaysForBaseline']||0x7)+')';await _0x4aa9bf['setStateAsync'](LTM_DP_BASELINE_STATUS,{'val':_0x22f7f1,'ack':!![]});}async function initSensorSubscriptions(_0x3122f8){const _0x2ba313=a0_0x4097f8,_0x5dba8c=_0x3122f8[_0x2ba313(0x111)]['devices'];if(_0x5dba8c&&_0x5dba8c[_0x2ba313(0x1d3)]>0x0){_0x3122f8[_0x2ba313(0x148)][_0x2ba313(0xa2)](_0x2ba313(0x1de)+_0x5dba8c['length']+_0x2ba313(0x22f));for(const _0x2263cf of _0x5dba8c){if(_0x2263cf['id']){await _0x3122f8['subscribeForeignStatesAsync'](_0x2263cf['id']);try{const _0x4685f2=await _0x3122f8[_0x2ba313(0x145)](_0x2263cf['id']);if(_0x4685f2)_0x3122f8[_0x2ba313(0x160)][_0x2263cf['id']]=_0x4685f2[_0x2ba313(0x122)];}catch(_0x53286b){}}}}}async function initPresenceSubscriptions(_0x1f2264){const _0x567ad2=a0_0x4097f8,_0x3a7745=_0x1f2264['config'][_0x567ad2(0x191)]||[];if(_0x3a7745['length']>0x0){_0x1f2264[_0x567ad2(0x148)][_0x567ad2(0xa2)](_0x567ad2(0x1de)+_0x3a7745['length']+_0x567ad2(0x26a));for(const _0x4de1d8 of _0x3a7745){await _0x1f2264[_0x567ad2(0x167)](_0x4de1d8);}try{await checkWifiPresence(_0x1f2264);}catch(_0x2752f2){}}}async function getWeatherContext(_0x499d38){const _0x4e29b5=a0_0x4097f8;try{if(!_0x499d38[_0x4e29b5(0x111)][_0x4e29b5(0xa3)])return _0x4e29b5(0x8d);let _0x2fa144='';const _0x566384=_0x499d38[_0x4e29b5(0x111)][_0x4e29b5(0x1bf)];if(_0x566384)try{if(_0x566384[_0x4e29b5(0x1e8)](_0x4e29b5(0x1f7))){const _0x1191c1=await _0x499d38[_0x4e29b5(0x145)](_0x566384+_0x4e29b5(0x1fa));if(_0x1191c1&&_0x1191c1[_0x4e29b5(0x122)])_0x2fa144=_0x1191c1['val'];}else{if(_0x566384[_0x4e29b5(0x1e8)]('daswetter')){const _0x1320f5=await _0x499d38[_0x4e29b5(0x145)](_0x566384+_0x4e29b5(0x19b));if(_0x1320f5&&_0x1320f5[_0x4e29b5(0x122)])_0x2fa144=_0x1320f5['val'];}else{if(_0x566384[_0x4e29b5(0x1e8)](_0x4e29b5(0x1a0))){const _0x513af9=await _0x499d38[_0x4e29b5(0x145)](_0x566384+_0x4e29b5(0x183));if(_0x513af9&&_0x513af9[_0x4e29b5(0x122)])_0x2fa144=_0x513af9[_0x4e29b5(0x122)];}}}}catch(_0xa8d788){}if(!_0x2fa144){const _0x296e5b=[_0x4e29b5(0x161),_0x4e29b5(0x210),_0x4e29b5(0xa5),_0x4e29b5(0x1d1)];for(const _0x5c616a of _0x296e5b){try{const _0x59653f=await _0x499d38[_0x4e29b5(0x247)](_0x5c616a);if(_0x59653f){if(_0x5c616a[_0x4e29b5(0x1e8)]('accuweather')){const _0xf23080=await _0x499d38['getForeignStateAsync'](_0x5c616a+_0x4e29b5(0x1fa));if(_0xf23080&&_0xf23080[_0x4e29b5(0x122)]){_0x2fa144=_0xf23080[_0x4e29b5(0x122)];break;}}}}catch(_0xc525ce){}}}return _0x2fa144?_0x4e29b5(0xf9)+_0x2fa144:_0x4e29b5(0x22a);}catch(_0x18cb68){return _0x4e29b5(0x262)+_0x18cb68[_0x4e29b5(0xee)];}}async function getCalendarContext(_0x4769d1){const _0x4ccdd4=a0_0x4097f8;try{if(!_0x4769d1[_0x4ccdd4(0x111)][_0x4ccdd4(0x116)])return _0x4ccdd4(0xf3);let _0x421633=_0x4769d1[_0x4ccdd4(0x111)][_0x4ccdd4(0x240)]||_0x4ccdd4(0x215),_0x4ba995=_0x4769d1[_0x4ccdd4(0x111)][_0x4ccdd4(0x258)]||[];if(typeof _0x4ba995===_0x4ccdd4(0x182))_0x4ba995=_0x4ba995[_0x4ccdd4(0x267)](',');try{const _0x204a48=await _0x4769d1[_0x4ccdd4(0x145)](_0x421633+_0x4ccdd4(0x201));if(_0x204a48&&_0x204a48['val']){let _0x55f72d=tryParse(_0x204a48[_0x4ccdd4(0x122)]);if(_0x55f72d&&Array[_0x4ccdd4(0x149)](_0x55f72d)){if(_0x4ba995[_0x4ccdd4(0x1d3)]>0x0)_0x55f72d=_0x55f72d[_0x4ccdd4(0x113)](_0xae4183=>_0x4ba995[_0x4ccdd4(0x1e8)](_0xae4183['_calName']||''));else return'KALENDER:\x20Keine\x20Kalender\x20ausgewÃ¤hlt\x20(Bitte\x20in\x20Settings\x20konfigurieren)';if(_0x55f72d['length']>0x0){const _0x2a7388=_0x55f72d[_0x4ccdd4(0x1b0)](0x0,0x3)['map'](_0x39ea4f=>{const _0x4781ee=_0x4ccdd4;let _0x29dac6=_0x39ea4f[_0x4781ee(0x9b)];if(_0x39ea4f[_0x4781ee(0x108)])_0x29dac6+='\x20'+_0x39ea4f['time'];return _0x29dac6+':\x20'+_0x39ea4f[_0x4781ee(0xff)]+'\x20('+_0x39ea4f[_0x4781ee(0x170)]+')';});return _0x4ccdd4(0x23a)+_0x2a7388[_0x4ccdd4(0xf5)](_0x4ccdd4(0x20c));}else return'KALENDER:\x20Keine\x20relevanten\x20Termine';}}}catch(_0x244787){_0x4769d1[_0x4ccdd4(0x148)]['warn'](_0x4ccdd4(0xb2)+_0x244787[_0x4ccdd4(0xee)]);}return _0x4ccdd4(0x136);}catch(_0x7d3ba2){return _0x4ccdd4(0x1ae)+_0x7d3ba2[_0x4ccdd4(0xee)];}}async function getCalendarNames(_0xd5101,_0x402674){const _0x5e2c48=a0_0x4097f8;try{const _0x2bdba9=await _0xd5101['getForeignStateAsync'](_0x402674+_0x5e2c48(0x201));if(_0x2bdba9&&_0x2bdba9['val']){const _0xc88ab6=tryParse(_0x2bdba9[_0x5e2c48(0x122)]);if(_0xc88ab6&&Array['isArray'](_0xc88ab6)){const _0x4b8ea4=[...new Set(_0xc88ab6[_0x5e2c48(0xef)](_0x60f288=>_0x60f288['_calName'])[_0x5e2c48(0x113)](Boolean))];return _0x4b8ea4[_0x5e2c48(0x1ec)]();}}return[];}catch(_0x2d85c1){return _0xd5101[_0x5e2c48(0x148)][_0x5e2c48(0x224)](_0x5e2c48(0x1bc)+_0x2d85c1[_0x5e2c48(0xee)]),[];}}async function checkWifiPresence(_0x5db99b){const _0x46c215=a0_0x4097f8;try{const _0x56049d=_0x5db99b['config'][_0x46c215(0x191)]||[];let _0x533da5=![];const _0x3993eb=[];for(const _0x545679 of _0x56049d){try{const _0x4e25d3=await _0x5db99b[_0x46c215(0x145)](_0x545679);if(_0x4e25d3&&(_0x4e25d3[_0x46c215(0x122)]===!![]||_0x4e25d3[_0x46c215(0x122)]===_0x46c215(0x137)||_0x4e25d3[_0x46c215(0x122)]===0x1)){_0x533da5=!![];const _0x46763b=await _0x5db99b[_0x46c215(0x247)](_0x545679);let _0x464a51=_0x545679;_0x46763b&&_0x46763b[_0x46c215(0x209)]&&_0x46763b[_0x46c215(0x209)][_0x46c215(0x245)]&&(_0x464a51=typeof _0x46763b[_0x46c215(0x209)][_0x46c215(0x245)]==='object'?_0x46763b['common']['name']['de']||_0x46763b[_0x46c215(0x209)]['name']['en']:_0x46763b[_0x46c215(0x209)][_0x46c215(0x245)]),_0x3993eb['push'](_0x464a51);}}catch(_0x57b916){}}return await _0x5db99b[_0x46c215(0x10e)](_0x46c215(0x18f),{'val':_0x3993eb[_0x46c215(0xf5)](',\x20'),'ack':!![]}),_0x533da5&&(_0x5db99b[_0x46c215(0x80)]&&(_0x5db99b[_0x46c215(0x148)][_0x46c215(0xa2)](_0x46c215(0x15d)),abortExitTimer(_0x5db99b)),!_0x5db99b['isPresent']&&_0x5db99b[_0x46c215(0xd6)]===SYSTEM_MODES[_0x46c215(0xc2)]&&await setPresence(_0x5db99b,!![])),_0x533da5;}catch(_0x25435b){return _0x5db99b['log'][_0x46c215(0x224)](_0x46c215(0x89)+_0x25435b[_0x46c215(0xee)]),![];}}function startExitTimer(_0x13d04f){const _0x1b0a92=a0_0x4097f8;abortExitTimer(_0x13d04f),_0x13d04f[_0x1b0a92(0xc3)]=!![],_0x13d04f[_0x1b0a92(0x1d7)]=setTimeout(()=>{const _0x1ab5d6=_0x1b0a92;_0x13d04f[_0x1ab5d6(0xc3)]=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),_0x13d04f[_0x1b0a92(0x80)]=setTimeout(()=>{const _0x30565b=_0x1b0a92;setPresence(_0x13d04f,![]),_0x13d04f[_0x30565b(0x80)]=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}function abortExitTimer(_0x1682ae){const _0x5fea9=a0_0x4097f8;if(_0x1682ae['exitTimer'])clearTimeout(_0x1682ae[_0x5fea9(0x80)]);if(_0x1682ae[_0x5fea9(0x1d7)])clearTimeout(_0x1682ae[_0x5fea9(0x1d7)]);_0x1682ae[_0x5fea9(0x80)]=null,_0x1682ae[_0x5fea9(0x1d7)]=null,_0x1682ae[_0x5fea9(0xc3)]=![];}async function setPresence(_0x158cf6,_0x565a3f){const _0x40bc83=a0_0x4097f8;if(_0x158cf6[_0x40bc83(0x1d8)]===_0x565a3f)return;_0x158cf6[_0x40bc83(0x1d8)]=_0x565a3f,await _0x158cf6['setStateAsync'](_0x40bc83(0x114),{'val':_0x565a3f,'ack':!![]});}async function saveFeedback(_0x40100f,_0x3940fc){const _0x24c8b9=a0_0x4097f8;_0x40100f['log'][_0x24c8b9(0xa2)](_0x24c8b9(0x1f5)+JSON['stringify'](_0x3940fc));}async function runBaselineDriftAnalysis(_0x123693){const _0x252c8e=a0_0x4097f8;if(!_0x123693[_0x252c8e(0xeb)]||!_0x123693[_0x252c8e(0x146)])return;const _0x519913=_0x123693[_0x252c8e(0x111)][_0x252c8e(0x73)]||0xe;if(_0x123693[_0x252c8e(0x219)][_0x252c8e(0x1d3)]<_0x519913+(_0x123693[_0x252c8e(0x111)][_0x252c8e(0x228)]||0x7)){await _0x123693[_0x252c8e(0x10e)](LTM_DP_DRIFT_STATUS,{'val':_0x252c8e(0xca),'ack':!![]});return;}const _0x120c31=_0x123693[_0x252c8e(0x219)][_0x252c8e(0x1b0)](-_0x519913),_0x44b03c=_0x123693['dailyDigests'][_0x252c8e(0x1b0)](0x0,_0x123693[_0x252c8e(0x219)][_0x252c8e(0x1d3)]-_0x519913),_0x3d0090=_0x252c8e(0x140)+JSON[_0x252c8e(0x172)](_0x44b03c)+_0x252c8e(0xae)+JSON[_0x252c8e(0x172)](_0x120c31);try{const _0x40208b=await _0x123693['geminiModel'][_0x252c8e(0x15e)](_0x3d0090),_0x1f0075=JSON[_0x252c8e(0xe1)](_0x40208b[_0x252c8e(0x14c)][_0x252c8e(0x23e)]()[_0x252c8e(0x1d9)](/```json|```/g,'')['trim']());_0x1f0075[_0x252c8e(0x12a)]&&(await _0x123693[_0x252c8e(0x10e)](LTM_DP_DRIFT_STATUS,{'val':_0x1f0075[_0x252c8e(0x12a)],'ack':!![]}),await _0x123693[_0x252c8e(0x10e)](LTM_DP_DRIFT_DETAILS,{'val':_0x1f0075['driftDetails'],'ack':!![]}),await _0x123693[_0x252c8e(0x10e)](LTM_DP_DRIFT_LAST_CHECK,{'val':Date[_0x252c8e(0x1ab)](),'ack':!![]}));}catch(_0x3429be){}}function setupLtmScheduler(_0x37e3d3){const _0x10474c=a0_0x4097f8;try{if(_0x37e3d3[_0x10474c(0x20f)])_0x37e3d3[_0x10474c(0x20f)][_0x10474c(0x131)]();if(!_0x37e3d3['isProVersion']){_0x37e3d3[_0x10474c(0x10e)](LTM_DP_STATUS,{'val':'Deaktiviert\x20(Pro-Feature)','ack':!![]});return;}_0x37e3d3['ltmJob']=schedule[_0x10474c(0x199)](LTM_SCHEDULE,()=>createDailyDigest(_0x37e3d3));}catch(_0x20e111){_0x37e3d3['log'][_0x10474c(0x224)]('LTM\x20Sched\x20Error:\x20'+_0x20e111[_0x10474c(0xee)]);}}function setupModeResetScheduler(_0x1bf982){const _0x847f88=a0_0x4097f8;try{if(_0x1bf982[_0x847f88(0x176)])_0x1bf982[_0x847f88(0x176)][_0x847f88(0x131)]();_0x1bf982[_0x847f88(0x176)]=schedule[_0x847f88(0x199)](MODE_RESET_SCHEDULE,async()=>{const _0x3ed339=_0x847f88;await loadSystemMode(_0x1bf982),AUTO_RESET_MODES['includes'](_0x1bf982[_0x3ed339(0xd6)])&&await _0x1bf982[_0x3ed339(0x10e)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES['NORMAL'],'ack':![]});});}catch(_0x30c8d5){_0x1bf982[_0x847f88(0x148)]['error'](_0x847f88(0x70)+_0x30c8d5['message']);}}function setupDriftAnalysisScheduler(_0x29daa2){const _0x39471d=a0_0x4097f8;try{if(_0x29daa2[_0x39471d(0x23c)])clearInterval(_0x29daa2['driftAnalysisTimer']);if(!_0x29daa2[_0x39471d(0xeb)])return;_0x29daa2[_0x39471d(0x23c)]=setInterval(()=>runBaselineDriftAnalysis(_0x29daa2),(_0x29daa2['config'][_0x39471d(0x217)]||0x18)*0x36ee80),setTimeout(()=>runBaselineDriftAnalysis(_0x29daa2),0x1388);}catch(_0x5a71b7){_0x29daa2['log'][_0x39471d(0x224)](_0x39471d(0x1f4)+_0x5a71b7[_0x39471d(0xee)]);}}function setupBriefingScheduler(_0x2d33bb){const _0xe1ca0e=a0_0x4097f8;try{if(_0x2d33bb[_0xe1ca0e(0x251)])_0x2d33bb[_0xe1ca0e(0x251)][_0xe1ca0e(0x131)]();if(!_0x2d33bb[_0xe1ca0e(0x111)][_0xe1ca0e(0x20a)])return;const _0x7321f6=(_0x2d33bb['config']['briefingTime']||_0xe1ca0e(0x1df))[_0xe1ca0e(0x267)](':'),_0xd56d26=parseInt(_0x7321f6[0x0])||0x8,_0x4d82c5=parseInt(_0x7321f6[0x1])||0x0,_0x15bffb=_0x4d82c5+'\x20'+_0xd56d26+_0xe1ca0e(0xb0);_0x2d33bb['log'][_0xe1ca0e(0xa2)](_0xe1ca0e(0x7d)+_0xd56d26+':'+(_0x4d82c5<0xa?'0'+_0x4d82c5:_0x4d82c5)),_0x2d33bb['briefingJob']=schedule[_0xe1ca0e(0x199)](_0x15bffb,()=>{sendMorningBriefing(_0x2d33bb);});}catch(_0xe66bde){_0x2d33bb[_0xe1ca0e(0x148)][_0xe1ca0e(0x224)](_0xe1ca0e(0x24f)+_0xe66bde[_0xe1ca0e(0xee)]);}}async function sendNotification(_0x318c4e,_0x294d89,_0x289dc7=![],_0xedb589=![]){const _0x39c507=a0_0x4097f8;_0x318c4e['log']['info']((_0x289dc7?_0x39c507(0x21c):'')+_0x39c507(0xa8)+_0x294d89+'\x22');const _0x15cc17=_0x318c4e[_0x39c507(0x111)];let _0x137ac8=0x0;if(_0x15cc17[_0x39c507(0x162)]){let _0x21173d={};(_0x294d89[_0x39c507(0x1e8)](_0x39c507(0xe5))||_0xedb589)&&(_0x21173d={'reply_markup':{'inline_keyboard':[[{'text':'âœ…\x20Alles\x20OK\x20(Reset)','callback_data':_0x39c507(0x25c)}],[{'text':_0x39c507(0x1e9),'callback_data':'COGNI_REQUEST_CALL'}]]}}),await _0x318c4e[_0x39c507(0x1d2)](_0x15cc17[_0x39c507(0xbe)],'send',{'text':_0x294d89,'user':_0x15cc17[_0x39c507(0x1f9)],..._0x21173d}),_0x137ac8++;}if(_0x15cc17[_0x39c507(0x16e)]){let _0x5ee021={'message':_0x294d89,'title':_0xedb589?'ðŸš¨\x20EMERGENCY':_0x39c507(0x15b),'priority':_0xedb589?0x2:0x1,'device':_0x15cc17[_0x39c507(0x1ce)]};_0xedb589&&(_0x5ee021['retry']=0x1e,_0x5ee021['expire']=0xe10,_0x5ee021[_0x39c507(0x85)]='siren'),await _0x318c4e[_0x39c507(0x1d2)](_0x15cc17[_0x39c507(0x1af)],_0x39c507(0x1ef),_0x5ee021),_0x137ac8++;}return _0x15cc17[_0x39c507(0x1e1)]&&(await _0x318c4e[_0x39c507(0x1d2)](_0x15cc17['notifyEmailInstance'],_0x39c507(0x1ef),{'text':_0x294d89,'to':_0x15cc17[_0x39c507(0xd3)]}),_0x137ac8++),_0x137ac8;}async function setupTelegramListener(_0x117169){const _0x185608=a0_0x4097f8,_0x587859=_0x117169[_0x185608(0x111)]['notifyTelegramInstance'];_0x117169['config'][_0x185608(0x162)]&&_0x587859&&(_0x117169['log'][_0x185608(0xa2)](_0x185608(0x157)+_0x587859+_0x185608(0x1d0)),await _0x117169[_0x185608(0x167)](_0x587859+'.communicate.request'));}async function handleTelegramResponse(_0x2433db,_0x216819){const _0x1d4937=a0_0x4097f8;let _0x28831c=_0x216819;_0x216819[_0x1d4937(0x8a)]('[')&&(_0x28831c=_0x216819[_0x1d4937(0x9a)](_0x216819[_0x1d4937(0x117)](']')+0x1));if(_0x28831c===_0x1d4937(0x25c))_0x2433db[_0x1d4937(0x148)][_0x1d4937(0xa2)](_0x1d4937(0x25d)),await _0x2433db[_0x1d4937(0x10e)](_0x1d4937(0x6b),{'val':![],'ack':!![]}),await _0x2433db['setStateAsync'](_0x1d4937(0x22e),{'val':'Vom\x20Benutzer\x20bestÃ¤tigt\x20(OK).','ack':!![]}),_0x2433db['lastAlertState']=![],sendNotification(_0x2433db,'âœ…\x20Alarm\x20quittiert.\x20System\x20normal.',![]);else _0x28831c===_0x1d4937(0x1bb)&&(_0x2433db[_0x1d4937(0x148)]['warn'](_0x1d4937(0x119)),sendNotification(_0x2433db,'ðŸ“ž\x20RÃœCKRUF\x20BITTE!\x20Der\x20Bewohner\x20hat\x20den\x20RÃ¼ckruf-Button\x20gedrÃ¼ckt.',![],!![]));}async function runAutopilot(_0x3baa2b){const _0x4c8066=a0_0x4097f8,_0x51c9f7=_0x3baa2b[_0x4c8066(0x111)][_0x4c8066(0x1fb)],_0x37ff21=_0x3baa2b[_0x4c8066(0x1b5)][_0x4c8066(0x1d3)]>0x0?_0x3baa2b[_0x4c8066(0x1b5)][0x0][_0x4c8066(0x98)]:Date[_0x4c8066(0x1ab)](),_0x25ce3d=(Date['now']()-_0x37ff21)/(0x3e8*0x3c*0x3c);let _0x20f72a='';_0x3baa2b[_0x4c8066(0x111)][_0x4c8066(0x19e)]&&_0x3baa2b['currentSystemMode']===SYSTEM_MODES[_0x4c8066(0xc2)]&&_0x3baa2b[_0x4c8066(0x1d8)]&&(_0x25ce3d>_0x51c9f7&&(_0x20f72a='HARD\x20WATCHDOG:\x20No\x20sensor\x20activity\x20detected\x20for\x20'+_0x25ce3d['toFixed'](0x1)+_0x4c8066(0xcf))),runGeminiAnalysis(_0x3baa2b,_0x20f72a)[_0x4c8066(0x1b1)](_0x57e030=>_0x3baa2b[_0x4c8066(0x148)][_0x4c8066(0x224)](_0x57e030));}async function createDailyDigest(_0x10a6d6){const _0x1fcd53=a0_0x4097f8;if(!_0x10a6d6[_0x1fcd53(0xeb)])return;await _0x10a6d6[_0x1fcd53(0x10e)](LTM_DP_STATUS,{'val':_0x1fcd53(0x125)+new Date()['toLocaleString'](),'ack':!![]});if(!_0x10a6d6[_0x1fcd53(0x146)]||_0x10a6d6['rawEventLog'][_0x1fcd53(0x1d3)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x10a6d6[_0x1fcd53(0x10e)](LTM_DP_STATUS,{'val':'Skipped\x20(No\x20AI\x20or\x20Data)','ack':!![]});return;}const _0xbb52ea=JSON[_0x1fcd53(0xe1)](JSON[_0x1fcd53(0x172)](_0x10a6d6['rawEventLog'])),_0x125cdf=_0xbb52ea[_0x1fcd53(0x1d3)],_0x3a3dd8=_0x1fcd53(0xf4)+JSON[_0x1fcd53(0x172)](_0xbb52ea);try{const _0xb4d583=await _0x10a6d6['geminiModel'][_0x1fcd53(0x15e)](_0x3a3dd8),_0x36a11e=JSON[_0x1fcd53(0xe1)](_0xb4d583[_0x1fcd53(0x14c)][_0x1fcd53(0x23e)]()['replace'](/```json|```/g,'')[_0x1fcd53(0x88)]());_0x36a11e['summary']&&(_0x10a6d6[_0x1fcd53(0x219)]['push']({'timestamp':new Date()[_0x1fcd53(0xf7)](),'eventCount':_0x125cdf,'summary':_0x36a11e[_0x1fcd53(0x21f)],'activityLevel':_0x36a11e[_0x1fcd53(0x254)],'systemMode':_0x10a6d6[_0x1fcd53(0xd6)]}),await saveDailyDigests(_0x10a6d6),_0x10a6d6[_0x1fcd53(0xe0)]=[],await saveRawEventLog(_0x10a6d6),await _0x10a6d6['setStateAsync'](LTM_DP_STATUS,{'val':'Success:\x20Compressed\x20'+_0x125cdf+_0x1fcd53(0x206),'ack':!![]}),runPythonHealthCheck(_0x10a6d6));}catch(_0x5edf62){await _0x10a6d6[_0x1fcd53(0x10e)](LTM_DP_STATUS,{'val':'Error:\x20'+_0x5edf62[_0x1fcd53(0xee)],'ack':!![]});}}async function sendMorningBriefing(_0x2be756){const _0x312616=a0_0x4097f8;if(!_0x2be756['geminiModel'])return;_0x2be756[_0x312616(0x148)][_0x312616(0xa2)](_0x312616(0xdc));const _0x6b35ee=_0x2be756[_0x312616(0x219)][_0x312616(0x1d3)]>0x0?_0x2be756['dailyDigests'][_0x2be756['dailyDigests'][_0x312616(0x1d3)]-0x1]:null,_0x1709f6=_0x6b35ee&&_0x6b35ee[_0x312616(0x269)]?_0x6b35ee[_0x312616(0x269)]['sleepScore']:_0x312616(0x207),_0x5e6ec5=new Date();_0x5e6ec5['setHours'](0x4,0x0,0x0,0x0);const _0x24a89f=_0x2be756[_0x312616(0x1b5)][_0x312616(0x113)](_0x1588e7=>new Date(_0x1588e7[_0x312616(0x98)])>_0x5e6ec5),_0x2cea16=PERSONA_MAPPING[_0x2be756[_0x312616(0x111)]['aiPersona']||_0x312616(0x1e3)],_0x581237=_0x2be756[_0x312616(0x111)]['livingContext']||'',_0x296563=await getWeatherContext(_0x2be756),_0x4ab83f=await getCalendarContext(_0x2be756),_0x3e4198=_0x312616(0x25a)+_0x2cea16+'.\x20KONTEXT:\x20'+_0x581237+_0x312616(0xa6)+_0x296563+'\x20'+_0x4ab83f+_0x312616(0x66)+_0x1709f6+_0x312616(0x1e6)+JSON[_0x312616(0x172)](_0x24a89f[_0x312616(0x1b0)](0x0,0xa))+_0x312616(0xec);try{const _0xcacf24=await _0x2be756[_0x312616(0x146)][_0x312616(0x15e)](_0x3e4198),_0x1967de=_0x312616(0x21e)+_0xcacf24['response']['text']()[_0x312616(0x88)]();sendNotification(_0x2be756,_0x1967de),_0x2be756[_0x312616(0x148)][_0x312616(0xa2)](_0x312616(0x93));}catch(_0x5f1c6e){_0x2be756[_0x312616(0x148)]['error'](_0x312616(0x25b)+_0x5f1c6e[_0x312616(0xee)]);}}async function scanForDevices(_0x1df646,_0x4f03e9){const _0x3d1098=a0_0x4097f8;_0x1df646[_0x3d1098(0x148)][_0x3d1098(0xa2)](_0x3d1098(0x192));const _0x1d36f3=[],_0x1ee0d2=await _0x1df646[_0x3d1098(0x20d)]('*'),_0x3e02a3=await _0x1df646[_0x3d1098(0x20d)](_0x3d1098(0xdd),_0x3d1098(0x241)),_0x3e874a=await _0x1df646[_0x3d1098(0x20d)](_0x3d1098(0x1b3),'enum'),_0x2d6217={};if(_0x3e02a3)for(const _0x8d0c6 in _0x3e02a3){const _0xad4ac3=_0x3e02a3[_0x8d0c6][_0x3d1098(0x209)][_0x3d1098(0x1c5)]||[];_0xad4ac3[_0x3d1098(0x155)](_0x254d2e=>{const _0x19c66c=_0x3d1098;if(!_0x2d6217[_0x254d2e])_0x2d6217[_0x254d2e]=[];_0x2d6217[_0x254d2e][_0x19c66c(0xe4)](_0x8d0c6);});}const _0x11fc11={};if(_0x3e874a)for(const _0x1cdb8d in _0x3e874a){const _0x39f363=_0x3e874a[_0x1cdb8d][_0x3d1098(0x209)][_0x3d1098(0x1c5)]||[],_0x5eafd5=typeof _0x3e874a[_0x1cdb8d][_0x3d1098(0x209)][_0x3d1098(0x245)]===_0x3d1098(0x1f1)?_0x3e874a[_0x1cdb8d]['common'][_0x3d1098(0x245)]['de']:_0x3e874a[_0x1cdb8d][_0x3d1098(0x209)][_0x3d1098(0x245)];_0x39f363[_0x3d1098(0x155)](_0x424b46=>_0x11fc11[_0x424b46]=_0x5eafd5);}const _0x4b3b98=_0x4f03e9['selectedFunctionIds']||[],_0x261492=_0x4f03e9['motion']!==![],_0x455884=_0x4f03e9[_0x3d1098(0x226)]!==![],_0x49ccc1=_0x4f03e9[_0x3d1098(0x15a)]!==![],_0x278975=_0x4f03e9[_0x3d1098(0x8e)]===!![],_0x4265a0=_0x4f03e9[_0x3d1098(0x18b)]===!![];for(const _0xaed288 in _0x1ee0d2){const _0x93c069=_0x1ee0d2[_0xaed288];if(_0x93c069[_0x3d1098(0xe8)]!==_0x3d1098(0x238)||!_0x93c069[_0x3d1098(0x209)])continue;if(ADAPTER_BLACKLIST[_0x3d1098(0x67)](_0x1ff6c6=>_0xaed288[_0x3d1098(0x8a)](_0x1ff6c6))&&!_0x4265a0)continue;const _0x520fff=(_0x93c069['common'][_0x3d1098(0x135)]||'')[_0x3d1098(0x198)]();let _0x52c2ad=(typeof _0x93c069[_0x3d1098(0x209)][_0x3d1098(0x245)]===_0x3d1098(0x1f1)?_0x93c069[_0x3d1098(0x209)][_0x3d1098(0x245)]['de']:_0x93c069[_0x3d1098(0x209)]['name'])||_0xaed288;const _0xd81b2e=_0x52c2ad[_0x3d1098(0x198)]();let _0x4f5b21=![],_0x39b12b=![];if(_0x4b3b98[_0x3d1098(0x1d3)]>0x0){const _0x4ba3c8=_0x2d6217[_0xaed288]||[],_0x7b3a91=_0xaed288[_0x3d1098(0x267)]('.')[_0x3d1098(0x1b0)](0x0,-0x1)[_0x3d1098(0xf5)]('.'),_0x3fc6a4=_0x2d6217[_0x7b3a91]||[];(_0x4ba3c8[_0x3d1098(0x67)](_0x50d390=>_0x4b3b98['includes'](_0x50d390))||_0x3fc6a4[_0x3d1098(0x67)](_0x1ed5bf=>_0x4b3b98[_0x3d1098(0x1e8)](_0x1ed5bf)))&&(_0x4f5b21=!![],_0x39b12b=!![]);}if(!_0x4f5b21&&!_0x4265a0){if(HARD_IGNORE_TERMS[_0x3d1098(0x67)](_0x2219e3=>_0xaed288['includes'](_0x2219e3)||_0xd81b2e['includes'](_0x2219e3[_0x3d1098(0x198)]())))continue;}if(BAD_NAMES['some'](_0x2224ad=>_0xd81b2e===_0x2224ad||_0xd81b2e[_0x3d1098(0x142)]('.'+_0x2224ad))){const _0x21968e=_0xaed288['split']('.');if(_0x21968e['length']>0x2){const _0x1e950d=_0x21968e[_0x3d1098(0x1b0)](0x0,-0x1)[_0x3d1098(0xf5)]('.'),_0x223929=_0x1ee0d2[_0x1e950d];if(_0x223929&&_0x223929[_0x3d1098(0x209)]&&_0x223929[_0x3d1098(0x209)][_0x3d1098(0x245)]){const _0x5b3075=typeof _0x223929[_0x3d1098(0x209)][_0x3d1098(0x245)]===_0x3d1098(0x1f1)?_0x223929[_0x3d1098(0x209)][_0x3d1098(0x245)]['de']:_0x223929[_0x3d1098(0x209)][_0x3d1098(0x245)];_0x5b3075&&!_0x52c2ad['includes'](_0x5b3075)&&(_0x52c2ad=_0x5b3075+'\x20'+_0x52c2ad);}}}let _0x4c4b62='';if(_0x261492&&(_0x520fff[_0x3d1098(0x1e8)](_0x3d1098(0x107))||_0x520fff[_0x3d1098(0x1e8)]('occupancy')||_0xd81b2e[_0x3d1098(0x1e8)](_0x3d1098(0x189))||_0xd81b2e['includes'](_0x3d1098(0x196))))_0x4c4b62=_0x3d1098(0x107);else{if(!_0x4c4b62&&_0x455884&&(_0x520fff[_0x3d1098(0x1e8)]('door')||_0x520fff['includes'](_0x3d1098(0x1c6))||_0x520fff[_0x3d1098(0x1e8)](_0x3d1098(0xb7))||_0x520fff[_0x3d1098(0x1e8)](_0x3d1098(0x83))||_0x520fff[_0x3d1098(0x1e8)](_0x3d1098(0x11e))||_0xd81b2e[_0x3d1098(0x1e8)](_0x3d1098(0xaf))||_0xd81b2e['includes'](_0x3d1098(0x11a))||_0xd81b2e[_0x3d1098(0x1e8)]('rollladen')))_0x4c4b62='door';else{if(!_0x4c4b62&&_0x49ccc1&&(_0x520fff[_0x3d1098(0x1e8)](_0x3d1098(0x109))||_0x520fff['includes'](_0x3d1098(0xba))||_0x520fff[_0x3d1098(0x1e8)](_0x3d1098(0x14a))||_0xd81b2e[_0x3d1098(0x1e8)](_0x3d1098(0x175))||_0xd81b2e[_0x3d1098(0x1e8)](_0x3d1098(0x10f))||_0xd81b2e[_0x3d1098(0x1e8)](_0x3d1098(0xd2)))){if(_0x93c069[_0x3d1098(0x209)]['write']||_0x520fff['includes'](_0x3d1098(0xdf)))_0x4c4b62=_0x3d1098(0x109);}else{if(!_0x4c4b62&&_0x278975&&(_0x520fff['includes'](_0x3d1098(0x8e))||_0x520fff['includes'](_0x3d1098(0x75))||_0x520fff['includes'](_0x3d1098(0x265))||_0xd81b2e[_0x3d1098(0x1e8)](_0x3d1098(0x1a7))||_0xd81b2e['includes']('klima')||_0xd81b2e[_0x3d1098(0x1e8)](_0x3d1098(0x1cf))))_0x4c4b62=_0x3d1098(0x8e);else{if(!_0x4c4b62&&_0x39b12b)_0x4c4b62=_0x3d1098(0x1cd);}}}}if(_0x4c4b62){let _0x2d8bc8=_0x11fc11[_0xaed288]||'';if(!_0x2d8bc8){let _0x55a786=_0xaed288;for(let _0x290355=0x0;_0x290355<0x3;_0x290355++){const _0x4021df=_0x55a786[_0x3d1098(0xaa)]('.');if(_0x4021df===-0x1)break;_0x55a786=_0x55a786[_0x3d1098(0x9a)](0x0,_0x4021df);if(_0x11fc11[_0x55a786]){_0x2d8bc8=_0x11fc11[_0x55a786];break;}}}_0x1d36f3['push']({'id':_0xaed288,'name':_0x52c2ad,'location':_0x2d8bc8,'type':_0x4c4b62,'logDuplicates':_0x4c4b62==='motion','isExit':![],'_score':_0x2d8bc8?0x50:_0x4c4b62===_0x3d1098(0x1cd)?0x5a:0x28});}}return _0x1d36f3[_0x3d1098(0x1ec)]((_0x24107e,_0x497ae3)=>_0x497ae3[_0x3d1098(0x1fc)]-_0x24107e['_score']),_0x1d36f3;}async function executeAutomationAction(_0x143ccd){const _0x5b185f=a0_0x4097f8;try{const _0x4845b9=await _0x143ccd[_0x5b185f(0x1aa)]('analysis.automation.targetId'),_0x5a5fe7=await _0x143ccd['getStateAsync']('analysis.automation.targetValue');if(_0x4845b9&&_0x4845b9['val']&&_0x5a5fe7){const _0x4d858f=_0x4845b9['val'];let _0x4b2b02=_0x5a5fe7[_0x5b185f(0x122)];try{_0x4b2b02=JSON['parse'](_0x4b2b02);}catch(_0x43ab82){}_0x143ccd[_0x5b185f(0x148)][_0x5b185f(0xa2)](_0x5b185f(0xda)+_0x4d858f+_0x5b185f(0x144)+_0x4b2b02),await _0x143ccd[_0x5b185f(0xc1)](_0x4d858f,_0x4b2b02);}else _0x143ccd['log'][_0x5b185f(0x211)](_0x5b185f(0x103));}catch(_0x5a849b){_0x143ccd[_0x5b185f(0x148)]['error'](_0x5b185f(0xb3)+_0x5a849b['message']);}}function tryParse(_0x1380a4){const _0x3f0269=a0_0x4097f8;try{return JSON[_0x3f0269(0xe1)](_0x1380a4);}catch(_0x3fe86a){return null;}}async function recordSequence(_0x17c8fc,_0x5e089b){const _0xbb00e3=a0_0x4097f8,_0x2cfe3a=(_0x5e089b['type']||'')['toLowerCase'](),_0x206e2b=['motion',_0xbb00e3(0x189),'prÃ¤senz',_0xbb00e3(0x203),_0xbb00e3(0x152),'door','tÃ¼r',_0xbb00e3(0x1c6),_0xbb00e3(0xaf),_0xbb00e3(0x7e),_0xbb00e3(0x1c4),_0xbb00e3(0x109),_0xbb00e3(0x175),_0xbb00e3(0xba),_0xbb00e3(0xd2),_0xbb00e3(0x14a),_0xbb00e3(0x10f)];if(!_0x206e2b[_0xbb00e3(0x67)](_0x306c2e=>_0x2cfe3a[_0xbb00e3(0x1e8)](_0x306c2e))){_0x17c8fc[_0xbb00e3(0x148)][_0xbb00e3(0x26d)](_0xbb00e3(0x105)+_0x5e089b['id']+_0xbb00e3(0x235)+_0x5e089b[_0xbb00e3(0xe8)]+_0xbb00e3(0x1c0));return;}if(!_0x5e089b[_0xbb00e3(0xd4)]){_0x17c8fc[_0xbb00e3(0x148)][_0xbb00e3(0x26d)](_0xbb00e3(0x105)+_0x5e089b['id']+_0xbb00e3(0x171)+_0x5e089b['value']+')');return;}_0x17c8fc[_0xbb00e3(0x148)]['debug'](_0xbb00e3(0x234)+_0x5e089b['id']+'\x20('+_0x5e089b[_0xbb00e3(0x147)]+')');if(sequenceTimer)clearTimeout(sequenceTimer);const _0x303ed9={'loc':_0x5e089b['location']||'Unknown','id':_0x5e089b['id'],'ts':Date[_0xbb00e3(0x1ab)]()};activeSequence[_0xbb00e3(0xe4)](_0x303ed9),_0x17c8fc[_0xbb00e3(0x148)][_0xbb00e3(0x26d)](_0xbb00e3(0x1c7)+_0x303ed9[_0xbb00e3(0x19f)]+_0xbb00e3(0x106)+activeSequence[_0xbb00e3(0x1d3)]+')'),sequenceTimer=setTimeout(async()=>{const _0x3ed3e2=_0xbb00e3;activeSequence[_0x3ed3e2(0x1d3)]>0x1?await saveCompletedSequence(_0x17c8fc):(_0x17c8fc[_0x3ed3e2(0x148)]['debug'](_0x3ed3e2(0x16d)+activeSequence[_0x3ed3e2(0x1d3)]+')'),activeSequence=[]);},SEQUENCE_TIMEOUT_MS);}async function saveCompletedSequence(_0x4e687e){const _0x16cbc3=a0_0x4097f8;try{_0x4e687e[_0x16cbc3(0x148)][_0x16cbc3(0xa2)](_0x16cbc3(0x78)+activeSequence[_0x16cbc3(0x1d3)]+_0x16cbc3(0x9c));const _0x5027ea=await _0x4e687e['getStateAsync']('LTM.trainingData.sequences');let _0x465c33=[];if(_0x5027ea&&_0x5027ea[_0x16cbc3(0x122)])try{_0x465c33=JSON['parse'](_0x5027ea[_0x16cbc3(0x122)]);}catch(_0x14fe7c){}const _0x4042bd=activeSequence[0x0]['ts'],_0xf172c5=activeSequence[_0x16cbc3(0xef)](_0x43ba27=>({'loc':_0x43ba27[_0x16cbc3(0x19f)],'t_delta':Math[_0x16cbc3(0xf1)]((_0x43ba27['ts']-_0x4042bd)/0x3e8)})),_0x5f30b0={'timestamp':new Date(_0x4042bd)[_0x16cbc3(0xf7)](),'steps':_0xf172c5,'duration':Math['round']((activeSequence[activeSequence[_0x16cbc3(0x1d3)]-0x1]['ts']-_0x4042bd)/0x3e8),'daytime':new Date(_0x4042bd)[_0x16cbc3(0x12d)]()};_0x465c33[_0x16cbc3(0xe4)](_0x5f30b0),_0x465c33[_0x16cbc3(0x1d3)]>MAX_TRAINING_SET_SIZE&&_0x465c33[_0x16cbc3(0x186)](),await _0x4e687e[_0x16cbc3(0x10e)]('LTM.trainingData.sequences',{'val':JSON[_0x16cbc3(0x172)](_0x465c33),'ack':!![]}),activeSequence=[],sequenceTimer=null;}catch(_0xdef0f7){_0x4e687e[_0x16cbc3(0x148)][_0x16cbc3(0x224)](_0x16cbc3(0x1f0)+_0xdef0f7['message']);}}async function getOutsideTemperatureNumeric(_0x452e07){const _0x24c52f=a0_0x4097f8;if(_0x452e07[_0x24c52f(0x111)][_0x24c52f(0xbf)])try{const _0x3b7d5c=await _0x452e07[_0x24c52f(0x145)](_0x452e07[_0x24c52f(0x111)][_0x24c52f(0xbf)]);if(_0x3b7d5c&&_0x3b7d5c[_0x24c52f(0x122)]!==undefined&&_0x3b7d5c[_0x24c52f(0x122)]!==null){const _0x30b9ec=parseFloat(_0x3b7d5c['val']);if(!isNaN(_0x30b9ec))return _0x30b9ec;}}catch(_0x320655){_0x452e07[_0x24c52f(0x148)][_0x24c52f(0x211)](_0x24c52f(0x16c)+_0x452e07[_0x24c52f(0x111)]['outdoorSensorId']+':\x20'+_0x320655[_0x24c52f(0xee)]);}const _0x19972c=_0x452e07['config']['weatherInstance'];if(!_0x452e07[_0x24c52f(0x111)][_0x24c52f(0xa3)]||!_0x19972c)return null;try{let _0x1064b0='';if(_0x19972c['includes'](_0x24c52f(0x1f7)))_0x1064b0=_0x19972c+_0x24c52f(0x25f);else{if(_0x19972c[_0x24c52f(0x1e8)]('daswetter'))_0x1064b0=_0x19972c+_0x24c52f(0xdb);else{if(_0x19972c[_0x24c52f(0x1e8)](_0x24c52f(0x1a0)))_0x1064b0=_0x19972c+_0x24c52f(0xb4);else{if(_0x19972c['includes'](_0x24c52f(0x11d)))_0x1064b0=_0x19972c+_0x24c52f(0xce);}}}if(_0x1064b0){const _0x2aa0e2=await _0x452e07[_0x24c52f(0x145)](_0x1064b0);if(_0x2aa0e2&&_0x2aa0e2['val']!==undefined&&_0x2aa0e2[_0x24c52f(0x122)]!==null)return parseFloat(_0x2aa0e2[_0x24c52f(0x122)]);}}catch(_0x3ba5a9){}return null;}async function recordThermodynamics(_0x51e362,_0x3e52d4,_0x4113c6,_0x267246){const _0x3e4b42=a0_0x4097f8,_0x4efe93=await getOutsideTemperatureNumeric(_0x51e362),_0x1c306d=await _0x51e362['getStateAsync'](_0x3e4b42(0x1a9));let _0x27e80f=[];if(_0x1c306d&&_0x1c306d[_0x3e4b42(0x122)])try{_0x27e80f=JSON['parse'](_0x1c306d[_0x3e4b42(0x122)]);}catch(_0x4598c1){}_0x27e80f[_0x3e4b42(0xe4)]({'ts':Date['now'](),'room':_0x267246||_0x3e4b42(0x79),'t_in':_0x4113c6,'t_out':_0x4efe93});if(_0x27e80f[_0x3e4b42(0x1d3)]>THERMO_LOG_SIZE)_0x27e80f[_0x3e4b42(0x186)]();await _0x51e362[_0x3e4b42(0x10e)](_0x3e4b42(0x1a9),{'val':JSON[_0x3e4b42(0x172)](_0x27e80f),'ack':!![]});}async function processSensorEvent(_0x143f9a,_0x300ade,_0x148517,_0x4c8e59){const _0x300d1c=a0_0x4097f8;if(!_0x4c8e59)return;const _0x25fffc=_0x148517[_0x300d1c(0x122)],_0x296596=Date['now']();_0x143f9a[_0x300d1c(0x148)][_0x300d1c(0x26d)](_0x300d1c(0x10d)+_0x300ade+_0x300d1c(0x144)+_0x25fffc);const _0x210352=_0x143f9a[_0x300d1c(0x160)][_0x300ade];_0x143f9a[_0x300d1c(0x160)][_0x300ade]=_0x25fffc;if(!_0x4c8e59['logDuplicates']&&_0x210352!=undefined&&_0x210352==_0x25fffc){_0x143f9a[_0x300d1c(0x148)][_0x300d1c(0x26d)](_0x300d1c(0xfc)+_0x4c8e59[_0x300d1c(0x245)]+'\x20(Value:\x20'+_0x25fffc+')');return;}_0x143f9a[_0x300d1c(0xeb)]&&_0x4c8e59[_0x300d1c(0xe8)]==='temperature'&&recordThermodynamics(_0x143f9a,_0x300ade,_0x25fffc,_0x4c8e59[_0x300d1c(0x147)]);const _0x12a61c={'timestamp':_0x296596,'id':_0x300ade,'name':_0x4c8e59[_0x300d1c(0x245)],'type':_0x4c8e59['type'],'location':_0x4c8e59['location'],'value':_0x25fffc};_0x143f9a[_0x300d1c(0x1b5)][_0x300d1c(0xe7)](_0x12a61c);if(_0x143f9a[_0x300d1c(0x1b5)][_0x300d1c(0x1d3)]>HISTORY_MAX_SIZE)_0x143f9a['eventHistory'][_0x300d1c(0x151)]();await _0x143f9a['setStateAsync'](_0x300d1c(0x223),{'val':JSON[_0x300d1c(0x172)](_0x12a61c),'ack':!![]}),await _0x143f9a[_0x300d1c(0x10e)](_0x300d1c(0x188),{'val':JSON[_0x300d1c(0x172)](_0x143f9a[_0x300d1c(0x1b5)]),'ack':!![]});_0x143f9a[_0x300d1c(0xeb)]&&(_0x143f9a[_0x300d1c(0xe0)][_0x300d1c(0xe4)](_0x12a61c),await saveRawEventLog(_0x143f9a),recordSequence(_0x143f9a,_0x12a61c));if(_0x4c8e59[_0x300d1c(0x26c)]&&_0x25fffc===!![]){if(_0x143f9a[_0x300d1c(0x1d8)]&&!_0x143f9a[_0x300d1c(0xc3)])_0x143f9a[_0x300d1c(0x148)][_0x300d1c(0xa2)](_0x300d1c(0x204)+_0x4c8e59['name']+_0x300d1c(0xf6)),startExitTimer(_0x143f9a);else!_0x143f9a[_0x300d1c(0x1d8)]&&(_0x143f9a[_0x300d1c(0x148)][_0x300d1c(0xa2)](_0x300d1c(0x90)+_0x4c8e59[_0x300d1c(0x245)]+_0x300d1c(0xc4)),await setPresence(_0x143f9a,!![]));}else _0x4c8e59[_0x300d1c(0xe8)]===_0x300d1c(0x107)&&_0x25fffc===!![]&&(_0x143f9a['exitTimer']&&(_0x143f9a[_0x300d1c(0x148)][_0x300d1c(0xa2)]('Motion\x20detected\x20inside.\x20Aborting\x20Exit\x20Timer.'),abortExitTimer(_0x143f9a)),!_0x143f9a['isPresent']&&_0x143f9a[_0x300d1c(0xd6)]===SYSTEM_MODES['NORMAL']&&await setPresence(_0x143f9a,!![]));}async function runGeminiAnalysis(_0x4b81ac,_0x3d3607=''){const _0x5242cd=a0_0x4097f8;if(!_0x4b81ac['geminiModel'])return;if(_0x4b81ac[_0x5242cd(0x1b5)][_0x5242cd(0x1d3)]===0x0)return;const _0x3efd53=_0x4b81ac[_0x5242cd(0x1b5)][_0x5242cd(0x1b0)](0x0,0xf),_0x561f56=await getWeatherContext(_0x4b81ac),_0x15e202=_0x4b81ac['currentSystemMode'],_0x1aa382=PERSONA_MAPPING[_0x4b81ac[_0x5242cd(0x111)][_0x5242cd(0x1fe)]||_0x5242cd(0x1e3)],_0x55932d=_0x4b81ac[_0x5242cd(0x111)][_0x5242cd(0x12e)]||_0x5242cd(0xa4);let _0x51081d=![];try{const _0x2dbb91=await _0x4b81ac[_0x5242cd(0x1aa)](_0x5242cd(0x1ad));if(_0x2dbb91&&_0x2dbb91[_0x5242cd(0x122)])_0x51081d=!![];}catch(_0x10dc50){}const _0x20c71c=_0x5242cd(0xd7)+_0x1aa382+_0x5242cd(0x17c)+_0x55932d+_0x5242cd(0x24e)+_0x15e202+_0x5242cd(0xf0)+_0x561f56+_0x5242cd(0x1ff)+(_0x3d3607||'Keiner')+_0x5242cd(0x72)+JSON[_0x5242cd(0x172)](_0x3efd53)+_0x5242cd(0x232);try{const _0x5b5367=await _0x4b81ac[_0x5242cd(0x146)][_0x5242cd(0x15e)](_0x20c71c),_0x460a02=_0x5b5367[_0x5242cd(0x14c)][_0x5242cd(0x23e)]()[_0x5242cd(0x1d9)](/```json|```/g,'')[_0x5242cd(0x88)](),_0x31a2d3=JSON[_0x5242cd(0xe1)](_0x460a02);await _0x4b81ac[_0x5242cd(0x10e)](_0x5242cd(0x9d),{'val':JSON[_0x5242cd(0x172)](_0x31a2d3),'ack':!![]});_0x31a2d3[_0x5242cd(0x21f)]&&await _0x4b81ac['setStateAsync'](_0x5242cd(0x156),{'val':_0x31a2d3['summary'],'ack':!![]});const _0x165b0d={'timestamp':Date['now'](),'id':Date[_0x5242cd(0x1ab)]()['toString'](),'analysis':{'activity':{'summary':_0x31a2d3[_0x5242cd(0x21f)]||'Keine\x20Analyse.','isAlert':_0x31a2d3['isAlert']||![],'alertReason':_0x31a2d3[_0x5242cd(0x1f2)]},'comfort':{'automationProposal':_0x31a2d3[_0x5242cd(0xe3)]}}};await updateAnalysisHistory(_0x4b81ac,_0x165b0d);const _0x492f2f=_0x31a2d3[_0x5242cd(0x12f)]||![];_0x492f2f!==_0x4b81ac[_0x5242cd(0x212)]&&(await _0x4b81ac[_0x5242cd(0x10e)](_0x5242cd(0x6b),{'val':_0x492f2f,'ack':!![]}),_0x4b81ac[_0x5242cd(0x212)]=_0x492f2f,_0x492f2f&&(await _0x4b81ac['setStateAsync']('analysis.alertReason',{'val':_0x31a2d3['alertReason'],'ack':!![]}),sendNotification(_0x4b81ac,'âš ï¸\x20ALARM:\x20'+_0x31a2d3[_0x5242cd(0x1f2)],![],_0x31a2d3[_0x5242cd(0x1d6)]))),_0x31a2d3['automationProposal']&&_0x31a2d3[_0x5242cd(0xe3)]['detected']&&_0x31a2d3[_0x5242cd(0xe3)][_0x5242cd(0x129)]&&(_0x4b81ac[_0x5242cd(0x148)][_0x5242cd(0xa2)](_0x5242cd(0x214)+_0x31a2d3[_0x5242cd(0xe3)][_0x5242cd(0x154)]),await _0x4b81ac['setStateAsync'](_0x5242cd(0x8c),{'val':!![],'ack':!![]}),await _0x4b81ac['setStateAsync'](_0x5242cd(0xc7),{'val':_0x31a2d3[_0x5242cd(0xe3)][_0x5242cd(0x154)],'ack':!![]}),await _0x4b81ac['setStateAsync'](_0x5242cd(0x1a5),{'val':_0x31a2d3[_0x5242cd(0xe3)][_0x5242cd(0x129)],'ack':!![]}),await _0x4b81ac['setStateAsync'](_0x5242cd(0x10a),{'val':JSON[_0x5242cd(0x172)](_0x31a2d3['automationProposal']['targetValue']),'ack':!![]}),_0x51081d&&(_0x4b81ac[_0x5242cd(0x148)][_0x5242cd(0xa2)](_0x5242cd(0x200)+_0x31a2d3[_0x5242cd(0xe3)][_0x5242cd(0x129)]+_0x5242cd(0x1a8)),await executeAutomationAction(_0x4b81ac)));}catch(_0x241483){_0x4b81ac['log'][_0x5242cd(0x224)]('Gemini\x20Analysis\x20Error:\x20'+_0x241483[_0x5242cd(0xee)]);}}function installPythonDependencies(_0x48eab1){const _0x1381fc=a0_0x4097f8;if(_0x48eab1['dependencyInstallInProgress'])return;_0x48eab1[_0x1381fc(0x237)]=!![];const _0x39b066=path['join'](__dirname,_0x1381fc(0x268),_0x1381fc(0x181));_0x48eab1[_0x1381fc(0x148)]['info']('ðŸ› ï¸\x20AUTO-FIX:\x20Installing\x20Python\x20dependencies\x20from\x20'+_0x39b066+_0x1381fc(0x1a8)),stopPythonService(_0x48eab1);const _0x5c3845=_0x1381fc(0x180)+_0x39b066+_0x1381fc(0x23b);exec(_0x5c3845,(_0x205f8b,_0x163712,_0x1b76d8)=>{const _0x138fb7=_0x1381fc;_0x48eab1[_0x138fb7(0x237)]=![],_0x205f8b?(_0x48eab1[_0x138fb7(0x148)][_0x138fb7(0x224)]('âŒ\x20AUTO-FIX\x20FAILED.\x20Please\x20run\x20manually:\x20sudo\x20'+_0x5c3845),_0x48eab1[_0x138fb7(0x148)][_0x138fb7(0x224)](_0x138fb7(0x250)+(_0x1b76d8||_0x205f8b[_0x138fb7(0xee)]))):(_0x48eab1[_0x138fb7(0x148)]['info'](_0x138fb7(0x208)),startPythonService(_0x48eab1));});}function sendToPython(_0x7c01ae,_0x12a329,_0x39fb2d={}){const _0x260716=a0_0x4097f8;if(!_0x7c01ae[_0x260716(0x1e7)]||!_0x7c01ae[_0x260716(0x1e7)][_0x260716(0x1ea)]['writable'])return;const _0x373715=JSON[_0x260716(0x172)]({'command':_0x12a329,..._0x39fb2d});try{_0x7c01ae['pythonProcess'][_0x260716(0x1ea)][_0x260716(0x115)](_0x373715+'\x0a');}catch(_0x23683f){_0x7c01ae[_0x260716(0x148)][_0x260716(0x224)](_0x260716(0x76)+_0x23683f['message']);}}function runPythonHealthCheck(_0x1e0eec){const _0x157eb5=a0_0x4097f8;if(!_0x1e0eec['dailyDigests']||_0x1e0eec[_0x157eb5(0x219)][_0x157eb5(0x1d3)]<0x2){_0x1e0eec[_0x157eb5(0x148)][_0x157eb5(0xa2)]('Guardian:\x20Not\x20enough\x20history\x20data\x20for\x20trend\x20analysis\x20yet.');return;}const _0x854f22=_0x1e0eec[_0x157eb5(0x219)][_0x157eb5(0xef)](_0x24f257=>{const _0x374726=_0x157eb5,_0x12c033=(_0x24f257[_0x374726(0x254)]||'')['toLowerCase']();return ACTIVITY_LEVEL_MAP[_0x12c033]||0x32;});_0x1e0eec[_0x157eb5(0x148)][_0x157eb5(0xa2)](_0x157eb5(0x1a1)+_0x854f22[_0x157eb5(0x1d3)]+'\x20days\x20of\x20activity\x20data\x20to\x20Python...'),sendToPython(_0x1e0eec,'ANALYZE_TREND',{'values':_0x854f22,'tag':_0x157eb5(0x92)});}function handlePythonResult(_0x48caad,_0x4b0b61){const _0x41a158=a0_0x4097f8;if(_0x4b0b61[_0x41a158(0xe8)]===_0x41a158(0x139))_0x48caad[_0x41a158(0x148)][_0x41a158(0x26d)](_0x41a158(0xde));else{if(_0x4b0b61[_0x41a158(0xe8)]===_0x41a158(0x71)){const {tag:_0x15a567,diagnosis:_0x36b983,change_percent:_0x326344}=_0x4b0b61['payload'];_0x48caad[_0x41a158(0x148)][_0x41a158(0xa2)]('ðŸ\x20Guardian\x20Diagnosis\x20('+_0x15a567+_0x41a158(0x95)+_0x36b983+'\x20('+_0x326344+'%)'),_0x48caad[_0x41a158(0x10e)](_0x41a158(0xab),{'val':_0x36b983,'ack':!![]}),_0x48caad['setStateAsync'](_0x41a158(0x99),{'val':_0x326344,'ack':!![]});}}}function startPythonService(_0x5a1a7b){const _0x2dd527=a0_0x4097f8;try{const _0x119541=path['join'](__dirname,'python_service','service.py');_0x5a1a7b[_0x2dd527(0x148)][_0x2dd527(0xa2)](_0x2dd527(0x9f)+_0x119541),_0x5a1a7b[_0x2dd527(0x1e7)]=spawn(_0x2dd527(0x1c2),[_0x119541]),_0x5a1a7b[_0x2dd527(0x1e7)][_0x2dd527(0xac)]['on'](_0x2dd527(0x264),_0x51122d=>{const _0x5d1620=_0x2dd527,_0x4e133a=_0x51122d[_0x5d1620(0x266)]()['split']('\x0a');_0x4e133a[_0x5d1620(0x155)](_0x2c325e=>{const _0x1983eb=_0x5d1620,_0x2d41fe=_0x2c325e[_0x1983eb(0x88)]();if(!_0x2d41fe)return;if(_0x2d41fe[_0x1983eb(0x8a)](_0x1983eb(0x184)))_0x5a1a7b['log'][_0x1983eb(0x26d)](_0x1983eb(0x7f)+_0x2d41fe['substring'](0x5)[_0x1983eb(0x88)]());else{if(_0x2d41fe[_0x1983eb(0x8a)](_0x1983eb(0x163)))try{const _0xa86c5b=JSON['parse'](_0x2d41fe[_0x1983eb(0x9a)](0x8)[_0x1983eb(0x88)]());handlePythonResult(_0x5a1a7b,_0xa86c5b);}catch(_0x4f07bb){_0x5a1a7b[_0x1983eb(0x148)][_0x1983eb(0x211)]('Invalid\x20JSON\x20from\x20Python:\x20'+_0x2d41fe);}}(_0x2d41fe[_0x1983eb(0x1e8)](_0x1983eb(0x1b4))||_0x2d41fe[_0x1983eb(0x1e8)]('Bibliotheken\x20nicht\x20gefunden'))&&(_0x5a1a7b[_0x1983eb(0x148)][_0x1983eb(0x211)](_0x1983eb(0x18a)),installPythonDependencies(_0x5a1a7b));});}),_0x5a1a7b[_0x2dd527(0x1e7)][_0x2dd527(0x81)]['on']('data',_0xa9a08a=>{const _0x57e603=_0x2dd527,_0x15cb37=_0xa9a08a[_0x57e603(0x266)]()[_0x57e603(0x88)]();_0x5a1a7b['log']['error'](_0x57e603(0x6d)+_0x15cb37);}),_0x5a1a7b[_0x2dd527(0x1e7)]['on'](_0x2dd527(0x229),_0x38b081=>{const _0x1785b0=_0x2dd527;_0x5a1a7b[_0x1785b0(0x148)][_0x1785b0(0xa2)](_0x1785b0(0x1d4)+_0x38b081),_0x5a1a7b[_0x1785b0(0x1e7)]=null;}),_0x5a1a7b[_0x2dd527(0x1e7)]['on'](_0x2dd527(0x224),_0x2948c8=>{const _0x23e0db=_0x2dd527;_0x5a1a7b[_0x23e0db(0x148)][_0x23e0db(0x211)](_0x23e0db(0x10b)+_0x2948c8[_0x23e0db(0xee)]);});}catch(_0x5b0575){_0x5a1a7b['log'][_0x2dd527(0x224)](_0x2dd527(0x100)+_0x5b0575[_0x2dd527(0xee)]);}}function stopPythonService(_0x4df808){const _0x5a89aa=a0_0x4097f8;if(_0x4df808[_0x5a89aa(0x1e7)]){_0x4df808[_0x5a89aa(0x148)][_0x5a89aa(0xa2)](_0x5a89aa(0x86));try{_0x4df808['pythonProcess'][_0x5a89aa(0xb9)]();}catch(_0x3604b5){_0x4df808[_0x5a89aa(0x148)]['warn']('Could\x20not\x20kill\x20Python\x20process:\x20'+_0x3604b5['message']);}_0x4df808[_0x5a89aa(0x1e7)]=null;}}class CogniLiving extends utils['Adapter']{constructor(_0x4ea711){const _0x212068=a0_0x4097f8;super({..._0x4ea711,'name':_0x212068(0x14d)}),this[_0x212068(0x1b5)]=[],this[_0x212068(0x22d)]=[],this[_0x212068(0x1ba)]=[],this[_0x212068(0xe0)]=[],this[_0x212068(0x219)]=[],this['sensorLastValues']={},this[_0x212068(0xfa)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x212068(0x1d8)]=!![],this[_0x212068(0x80)]=null,this['exitGraceTimer']=null,this[_0x212068(0xc3)]=![],this['genAI']=null,this[_0x212068(0x146)]=null,this['currentSystemMode']=SYSTEM_MODES['NORMAL'],this['isProVersion']=![],this[_0x212068(0x212)]=![],this[_0x212068(0x1db)]=_0x212068(0x1b6),this[_0x212068(0x1e4)]=null,this[_0x212068(0x20f)]=null,this[_0x212068(0x176)]=null,this[_0x212068(0x23c)]=null,this[_0x212068(0x251)]=null,this[_0x212068(0x1e7)]=null,this['dependencyInstallInProgress']=![],this['on']('ready',this['onReady'][_0x212068(0x7c)](this)),this['on'](_0x212068(0x1a3),this[_0x212068(0x17a)]['bind'](this)),this['on'](_0x212068(0x177),this[_0x212068(0x205)][_0x212068(0x7c)](this)),this['on'](_0x212068(0xee),this[_0x212068(0x236)][_0x212068(0x7c)](this));}async['onReady'](){const _0x1c2a44=a0_0x4097f8;this[_0x1c2a44(0x148)]['info'](_0x1c2a44(0x248)+this['version']+')\x20-\x20FUNCTIONS\x20FIRST\x20ARCHITECTURE'),await initZombies(this),this[_0x1c2a44(0x111)][_0x1c2a44(0xe6)]=this[_0x1c2a44(0x111)][_0x1c2a44(0xe6)]||'';try{this[_0x1c2a44(0xeb)]=await checkLicense(this,this[_0x1c2a44(0x111)][_0x1c2a44(0xe6)]);}catch(_0x5c9cd6){}this[_0x1c2a44(0x148)]['info'](_0x1c2a44(0x6f)+!!this['config']['licenseKey']+'\x20|\x20Status:\x20'+(this[_0x1c2a44(0xeb)]?'âœ…\x20PRO\x20ACTIVATED':_0x1c2a44(0x260)));if(!this[_0x1c2a44(0x111)][_0x1c2a44(0x1fb)]||this[_0x1c2a44(0x111)][_0x1c2a44(0x1fb)]<0.1)this[_0x1c2a44(0x111)]['inactivityThresholdHours']=0xc;await initHistory(this),await initSystemConfig(this);if(this[_0x1c2a44(0x111)][_0x1c2a44(0x96)])try{this[_0x1c2a44(0x82)]=new GoogleGenerativeAI(this['config'][_0x1c2a44(0x96)]),this[_0x1c2a44(0x146)]=this[_0x1c2a44(0x82)][_0x1c2a44(0x1ac)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x1c2a44(0x13f)}}),this[_0x1c2a44(0x148)]['info']('Gemini\x20AI\x20initialized.');}catch(_0x4542c1){this[_0x1c2a44(0x148)][_0x1c2a44(0x224)]('Gemini\x20Init\x20Error:\x20'+_0x4542c1[_0x1c2a44(0xee)]);}await createAllObjects(this),await loadSystemMode(this),await loadRawEventLog(this),await loadDailyDigests(this),this['subscribeStates'](_0x1c2a44(0x159)),this[_0x1c2a44(0x1c1)](LTM_DP_TRIGGER_DIGEST),this['subscribeStates']('system.mode'),this[_0x1c2a44(0x1c1)]('analysis.triggerBriefing'),this['subscribeStates'](_0x1c2a44(0x17b)),this[_0x1c2a44(0x1c1)](_0x1c2a44(0x1ad)),await initSensorSubscriptions(this),await initPresenceSubscriptions(this),await setupTelegramListener(this),setTimeout(()=>checkWifiPresence(this),0x1388);if(this[_0x1c2a44(0x1e4)])clearInterval(this[_0x1c2a44(0x1e4)]);const _0x67dfa4=this['config'][_0x1c2a44(0x243)]||0xf;_0x67dfa4>0x0&&(this[_0x1c2a44(0x148)][_0x1c2a44(0xa2)](_0x1c2a44(0xb8)+_0x67dfa4+_0x1c2a44(0x1be)),this[_0x1c2a44(0x1e4)]=setInterval(()=>{runAutopilot(this);},_0x67dfa4*0x3c*0x3e8)),setupLtmScheduler(this),setupModeResetScheduler(this),setupDriftAnalysisScheduler(this),setupBriefingScheduler(this),startPythonService(this),setTimeout(()=>{const _0x650373=_0x1c2a44;this[_0x650373(0x1e7)]&&runPythonHealthCheck(this);},0x1388);}[a0_0x4097f8(0x205)](_0x24fea2){const _0x146c4a=a0_0x4097f8;if(this[_0x146c4a(0x1e4)])clearInterval(this[_0x146c4a(0x1e4)]);if(this[_0x146c4a(0x23c)])clearInterval(this[_0x146c4a(0x23c)]);if(this[_0x146c4a(0x20f)])this[_0x146c4a(0x20f)][_0x146c4a(0x131)]();if(this[_0x146c4a(0x176)])this['modeResetJob'][_0x146c4a(0x131)]();if(this[_0x146c4a(0x251)])this[_0x146c4a(0x251)][_0x146c4a(0x131)]();if(this[_0x146c4a(0x80)])clearTimeout(this['exitTimer']);if(this['exitGraceTimer'])clearTimeout(this['exitGraceTimer']);stopPythonService(this),_0x24fea2();}async[a0_0x4097f8(0x17a)](_0xd1231b,_0x4532a6){const _0xfe6aef=a0_0x4097f8;if(!_0x4532a6)return;if(_0xd1231b[_0xfe6aef(0x1e8)](_0xfe6aef(0x1cb))&&_0xd1231b[_0xfe6aef(0x142)](_0xfe6aef(0x19c))&&_0x4532a6[_0xfe6aef(0x122)]){await handleTelegramResponse(this,_0x4532a6[_0xfe6aef(0x122)]);return;}if(_0xd1231b===this[_0xfe6aef(0x213)]+'.'+SYSTEM_DP_MODE){_0x4532a6[_0xfe6aef(0x122)]&&Object[_0xfe6aef(0x194)](SYSTEM_MODES)[_0xfe6aef(0x1e8)](_0x4532a6[_0xfe6aef(0x122)])&&(this[_0xfe6aef(0xd6)]=_0x4532a6[_0xfe6aef(0x122)],_0x4532a6['val']===SYSTEM_MODES[_0xfe6aef(0x164)]?await setPresence(this,![]):await setPresence(this,!![]));if(!_0x4532a6[_0xfe6aef(0x15c)])this[_0xfe6aef(0x179)](_0xd1231b,{'val':this[_0xfe6aef(0xd6)],'ack':!![]});return;}if(!_0x4532a6['ack']){_0xd1231b[_0xfe6aef(0x1e8)](_0xfe6aef(0x159))&&_0x4532a6[_0xfe6aef(0x122)]&&(this[_0xfe6aef(0x179)](_0xd1231b,{'val':![],'ack':!![]}),runGeminiAnalysis(this));if(_0xd1231b[_0xfe6aef(0x1e8)](_0xfe6aef(0x1eb))&&_0x4532a6[_0xfe6aef(0x122)]){this[_0xfe6aef(0x179)](_0xd1231b,{'val':![],'ack':!![]});if(this[_0xfe6aef(0xeb)])createDailyDigest(this);}_0xd1231b[_0xfe6aef(0x1e8)](_0xfe6aef(0x1dc))&&_0x4532a6[_0xfe6aef(0x122)]&&(this[_0xfe6aef(0x179)](_0xd1231b,{'val':![],'ack':!![]}),sendMorningBriefing(this));_0xd1231b[_0xfe6aef(0x1e8)](_0xfe6aef(0x271))&&_0x4532a6[_0xfe6aef(0x122)]&&(this[_0xfe6aef(0x179)](_0xd1231b,{'val':![],'ack':!![]}),executeAutomationAction(this));return;}if(this[_0xfe6aef(0x111)]['presenceDevices']&&this[_0xfe6aef(0x111)][_0xfe6aef(0x191)][_0xfe6aef(0x1e8)](_0xd1231b)){await checkWifiPresence(this);return;}const _0x25c726=(this[_0xfe6aef(0x111)][_0xfe6aef(0x257)]||[])[_0xfe6aef(0x11c)](_0x33a026=>_0x33a026['id']===_0xd1231b);if(_0x25c726)processSensorEvent(this,_0xd1231b,_0x4532a6,_0x25c726);}async['onMessage'](_0x4657ba){const _0x54f6e9=a0_0x4097f8;if(typeof _0x4657ba===_0x54f6e9(0x1f1)&&_0x4657ba['message'])try{if(_0x4657ba['command']==='testApiKey'){const _0x400ab3=_0x4657ba[_0x54f6e9(0xee)]['apiKey']||this[_0x54f6e9(0x111)]['geminiApiKey'];if(!_0x400ab3)return this[_0x54f6e9(0x112)](_0x4657ba[_0x54f6e9(0x165)],_0x4657ba['command'],{'success':![],'message':_0x54f6e9(0x231)},_0x4657ba['callback']);try{const _0x14628f=new GoogleGenerativeAI(_0x400ab3),_0x87756c=_0x14628f[_0x54f6e9(0x1ac)]({'model':GEMINI_MODEL}),_0x1739c2=await _0x87756c[_0x54f6e9(0x15e)](_0x54f6e9(0x1b8)),_0x449cf0=await _0x1739c2['response'],_0x7716b1=_0x449cf0[_0x54f6e9(0x23e)]();this[_0x54f6e9(0x112)](_0x4657ba[_0x54f6e9(0x165)],_0x4657ba[_0x54f6e9(0x1f8)],{'success':!![],'message':_0x54f6e9(0x1b9)+_0x7716b1[_0x54f6e9(0x9a)](0x0,0x14)+_0x54f6e9(0x1a8)},_0x4657ba[_0x54f6e9(0xbc)]);}catch(_0x27cb9c){this[_0x54f6e9(0x112)](_0x4657ba[_0x54f6e9(0x165)],_0x4657ba[_0x54f6e9(0x1f8)],{'success':![],'message':_0x54f6e9(0x26f)+_0x27cb9c['message']},_0x4657ba['callback']);}}else{if(_0x4657ba[_0x54f6e9(0x1f8)]===_0x54f6e9(0x120)){}else{if(_0x4657ba[_0x54f6e9(0x1f8)]===_0x54f6e9(0x13e)){if(!this[_0x54f6e9(0xeb)])return this['sendTo'](_0x4657ba[_0x54f6e9(0x165)],_0x4657ba[_0x54f6e9(0x1f8)],{'success':![],'isPro':![]},_0x4657ba[_0x54f6e9(0xbc)]);let _0x559efe={'status':'N/A','details':'','lastCheck':0x0};try{_0x559efe[_0x54f6e9(0x193)]=(await this[_0x54f6e9(0x1aa)](LTM_DP_DRIFT_STATUS))[_0x54f6e9(0x122)],_0x559efe[_0x54f6e9(0x185)]=(await this[_0x54f6e9(0x1aa)](LTM_DP_DRIFT_DETAILS))[_0x54f6e9(0x122)],_0x559efe['lastCheck']=(await this[_0x54f6e9(0x1aa)](LTM_DP_DRIFT_LAST_CHECK))[_0x54f6e9(0x122)];}catch(_0x441a3f){}const _0xc46c0e=this[_0x54f6e9(0x22d)]||[];this[_0x54f6e9(0x112)](_0x4657ba[_0x54f6e9(0x165)],_0x4657ba[_0x54f6e9(0x1f8)],{'success':!![],'isPro':!![],'dailyDigests':this[_0x54f6e9(0x219)],'driftAnalysis':_0x559efe,'analysisHistory':_0xc46c0e},_0x4657ba['callback']);}else{if(_0x4657ba[_0x54f6e9(0x1f8)]===_0x54f6e9(0x126)){const _0xe1381a=this[_0x54f6e9(0x219)][_0x54f6e9(0x1d3)],_0x4d63a5=new Date(),_0xffa182=new Date(_0x4d63a5[_0x54f6e9(0xd0)](),_0x4d63a5[_0x54f6e9(0x16f)](),_0x4d63a5[_0x54f6e9(0x1f6)]())[_0x54f6e9(0x233)](),_0x1d34ee=this[_0x54f6e9(0xe0)][_0x54f6e9(0x113)](_0x45f6b6=>new Date(_0x45f6b6[_0x54f6e9(0x98)])[_0x54f6e9(0x233)]()>_0xffa182)['length'],_0x30af74=new Array(0x18)[_0x54f6e9(0x253)](0x0);this[_0x54f6e9(0xe0)][_0x54f6e9(0x155)](_0x24b2c9=>{const _0x3ac445=_0x54f6e9,_0x4eb0dc=new Date(_0x24b2c9['timestamp']);if(_0x4eb0dc[_0x3ac445(0x233)]()>_0xffa182)_0x30af74[_0x4eb0dc[_0x3ac445(0x12d)]()]++;});let _0x2d7687={'status':_0x54f6e9(0x207)};try{_0x2d7687[_0x54f6e9(0x193)]=(await this[_0x54f6e9(0x1aa)](LTM_DP_DRIFT_STATUS))['val'];}catch(_0x5f3ff9){}let _0x4cbc6b='';try{const _0x2a846a=await this[_0x54f6e9(0x1aa)](_0x54f6e9(0x18f));_0x4cbc6b=_0x2a846a?_0x2a846a[_0x54f6e9(0x122)]:'';}catch(_0x1ca1bf){}let _0x4d8775=null;!this[_0x54f6e9(0x146)]&&(_0x4d8775=this['config'][_0x54f6e9(0x96)]?_0x54f6e9(0x153):_0x54f6e9(0x12b));let _0x2407a0={'detected':![],'description':'','targetId':'','targetValue':'','autoApply':![]};try{const _0x79f361=await this[_0x54f6e9(0x1aa)]('analysis.automation.patternDetected'),_0x434b82=await this[_0x54f6e9(0x1aa)](_0x54f6e9(0xc7)),_0x1c09e9=await this[_0x54f6e9(0x1aa)](_0x54f6e9(0x1a5)),_0x11da64=await this['getStateAsync'](_0x54f6e9(0x10a)),_0x5eb924=await this[_0x54f6e9(0x1aa)]('analysis.automation.autoApply');_0x79f361&&_0x79f361['val']&&(_0x2407a0[_0x54f6e9(0x16a)]=!![],_0x2407a0[_0x54f6e9(0x154)]=_0x434b82?_0x434b82[_0x54f6e9(0x122)]:'',_0x2407a0['targetId']=_0x1c09e9?_0x1c09e9[_0x54f6e9(0x122)]:'',_0x2407a0[_0x54f6e9(0x84)]=_0x11da64?_0x11da64['val']:''),_0x2407a0[_0x54f6e9(0xd9)]=_0x5eb924?!!_0x5eb924[_0x54f6e9(0x122)]:![];}catch(_0x358ebd){}this[_0x54f6e9(0x112)](_0x4657ba[_0x54f6e9(0x165)],_0x4657ba[_0x54f6e9(0x1f8)],{'success':!![],'eventHistory':this[_0x54f6e9(0x1b5)][_0x54f6e9(0x1b0)](0x0,0xf),'stats':{'digestCount':_0xe1381a,'eventCountToday':_0x1d34ee,'hourlyActivity':_0x30af74,'driftStatus':_0x2d7687[_0x54f6e9(0x193)],'isPresent':this[_0x54f6e9(0x1d8)],'presenceWho':_0x4cbc6b,'minDays':this[_0x54f6e9(0x111)][_0x54f6e9(0x228)]||0x7,'stbDays':this['config']['ltmStbWindowDays']||0xe,'ltbDays':this[_0x54f6e9(0x111)][_0x54f6e9(0x121)]||0x3c,'systemError':_0x4d8775},'automation':_0x2407a0},_0x4657ba['callback']);}else{if(_0x4657ba[_0x54f6e9(0x1f8)]===_0x54f6e9(0x26e)){const _0x557970=await this[_0x54f6e9(0x20d)](_0x54f6e9(0xdd),_0x54f6e9(0x241)),_0x1b4ef1=[];if(_0x557970)for(const _0x10203c in _0x557970){const _0xc9b4c4=_0x557970[_0x10203c],_0xffd03d=(_0xc9b4c4[_0x54f6e9(0x209)]&&typeof _0xc9b4c4[_0x54f6e9(0x209)][_0x54f6e9(0x245)]===_0x54f6e9(0x1f1)?_0xc9b4c4[_0x54f6e9(0x209)][_0x54f6e9(0x245)]['de']:_0xc9b4c4[_0x54f6e9(0x209)][_0x54f6e9(0x245)])||_0xc9b4c4[_0x54f6e9(0x209)][_0x54f6e9(0x245)];_0x1b4ef1[_0x54f6e9(0xe4)]({'id':_0x10203c,'name':_0xffd03d});}this[_0x54f6e9(0x112)](_0x4657ba[_0x54f6e9(0x165)],_0x4657ba['command'],{'success':!![],'enums':_0x1b4ef1},_0x4657ba['callback']);}else{if(_0x4657ba['command']==='scanDevices')try{const _0x18bc0b=await scanForDevices(this,_0x4657ba['message']||{});this['sendTo'](_0x4657ba[_0x54f6e9(0x165)],_0x4657ba[_0x54f6e9(0x1f8)],{'success':!![],'devices':_0x18bc0b},_0x4657ba[_0x54f6e9(0xbc)]);}catch(_0x2c2d0a){this['sendTo'](_0x4657ba[_0x54f6e9(0x165)],_0x4657ba[_0x54f6e9(0x1f8)],{'success':![],'error':_0x2c2d0a[_0x54f6e9(0xee)]},_0x4657ba[_0x54f6e9(0xbc)]);}else{if(_0x4657ba[_0x54f6e9(0x1f8)]===_0x54f6e9(0x1b2)){const _0x866138=_0x4657ba['message'][_0x54f6e9(0x227)];if(!_0x866138)return this['sendTo'](_0x4657ba[_0x54f6e9(0x165)],_0x4657ba[_0x54f6e9(0x1f8)],{'success':![],'error':_0x54f6e9(0x141)},_0x4657ba[_0x54f6e9(0xbc)]);const _0x522e31=await getCalendarNames(this,_0x866138);this[_0x54f6e9(0x112)](_0x4657ba[_0x54f6e9(0x165)],_0x4657ba[_0x54f6e9(0x1f8)],{'success':!![],'names':_0x522e31},_0x4657ba[_0x54f6e9(0xbc)]);}else{if(_0x4657ba[_0x54f6e9(0x1f8)]===_0x54f6e9(0x14f)){const {targetId:_0x3d2811,targetValue:_0x45c4d8}=_0x4657ba[_0x54f6e9(0xee)];this[_0x54f6e9(0x148)][_0x54f6e9(0xa2)](_0x54f6e9(0xb1)+_0x3d2811+_0x54f6e9(0x144)+_0x45c4d8),await this[_0x54f6e9(0x10e)](_0x54f6e9(0x8c),{'val':!![],'ack':!![]}),await this['setStateAsync'](_0x54f6e9(0xc7),{'val':_0x54f6e9(0x87)+_0x3d2811,'ack':!![]}),await this['setStateAsync'](_0x54f6e9(0x1a5),{'val':_0x3d2811,'ack':!![]}),await this[_0x54f6e9(0x10e)](_0x54f6e9(0x10a),{'val':_0x45c4d8,'ack':!![]}),this['sendTo'](_0x4657ba[_0x54f6e9(0x165)],_0x4657ba[_0x54f6e9(0x1f8)],{'success':!![]},_0x4657ba[_0x54f6e9(0xbc)]);}else{if(_0x4657ba['command']===_0x54f6e9(0x104)){const {historyId:_0x2e0d62,rating:_0x3dbe3b,comment:_0x3e0aba,alertReason:_0x16648a}=_0x4657ba[_0x54f6e9(0xee)];_0x2e0d62&&_0x3dbe3b?(await saveFeedback(this,{'timestamp':Date[_0x54f6e9(0x1ab)](),'historyId':_0x2e0d62,'rating':_0x3dbe3b,'comment':_0x3e0aba,'alertReason':_0x16648a}),this['sendTo'](_0x4657ba[_0x54f6e9(0x165)],_0x4657ba[_0x54f6e9(0x1f8)],{'success':!![]},_0x4657ba[_0x54f6e9(0xbc)])):this[_0x54f6e9(0x112)](_0x4657ba[_0x54f6e9(0x165)],_0x4657ba[_0x54f6e9(0x1f8)],{'success':![],'error':_0x54f6e9(0x12c)},_0x4657ba[_0x54f6e9(0xbc)]);}else _0x4657ba[_0x54f6e9(0x1f8)]===_0x54f6e9(0x1b7)&&(this[_0x54f6e9(0x148)][_0x54f6e9(0xa2)](_0x54f6e9(0x256)),await this[_0x54f6e9(0x10e)](_0x54f6e9(0x8c),{'val':![],'ack':!![]}),await this[_0x54f6e9(0x10e)](_0x54f6e9(0xc7),{'val':'','ack':!![]}),this[_0x54f6e9(0x112)](_0x4657ba[_0x54f6e9(0x165)],_0x4657ba[_0x54f6e9(0x1f8)],{'success':!![]},_0x4657ba[_0x54f6e9(0xbc)]));}}}}}}}}}catch(_0x222f34){this[_0x54f6e9(0x148)]['error'](_0x54f6e9(0x10c)+_0x4657ba['command']+':\x20'+_0x222f34[_0x54f6e9(0xee)]);if(_0x4657ba[_0x54f6e9(0xbc)])this[_0x54f6e9(0x112)](_0x4657ba[_0x54f6e9(0x165)],_0x4657ba['command'],{'success':![],'error':_0x222f34[_0x54f6e9(0xee)]},_0x4657ba[_0x54f6e9(0xbc)]);}}}if(require[a0_0x4097f8(0xe9)]!==module)module[a0_0x4097f8(0x127)]=_0x7cd540=>new CogniLiving(_0x7cd540);else new CogniLiving();