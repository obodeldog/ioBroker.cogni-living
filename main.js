const a0_0x4b4a65=a0_0xb696;(function(_0x175bb4,_0x1dbc18){const _0x150cd9=a0_0xb696,_0xc0d78b=_0x175bb4();while(!![]){try{const _0x29338c=-parseInt(_0x150cd9(0x1e5))/0x1*(parseInt(_0x150cd9(0x189))/0x2)+parseInt(_0x150cd9(0x11b))/0x3+parseInt(_0x150cd9(0x109))/0x4*(-parseInt(_0x150cd9(0x130))/0x5)+parseInt(_0x150cd9(0x229))/0x6*(-parseInt(_0x150cd9(0x20b))/0x7)+parseInt(_0x150cd9(0x1f2))/0x8*(parseInt(_0x150cd9(0x1b9))/0x9)+-parseInt(_0x150cd9(0x216))/0xa*(parseInt(_0x150cd9(0x1c7))/0xb)+parseInt(_0x150cd9(0x186))/0xc;if(_0x29338c===_0x1dbc18)break;else _0xc0d78b['push'](_0xc0d78b['shift']());}catch(_0x54142b){_0xc0d78b['push'](_0xc0d78b['shift']());}}}(a0_0x7045,0xbf394));function a0_0x7045(){const _0x275d57=['sendMorningBriefing','‚ö†\x20Replay\x20skipped:\x20No\x20events\x20in\x20memory.','sendTo','setPresence','automation.triggerAction','moduleEnergy','healthTrendInterval','push','analysis.activity.roomStats','infrasoundLocked','executeAutomationAction','ack','460yhLThK','getHours','Warm-Up\x20Time','appendToLog','üì¶\x20Restored\x20','dependencyInstallInProgress','Daily\x20Activity\x20Vector\x20(48x30min)','path','‚Ü∫\x20Replaying\x20','setHours','message','Warte\x20auf\x20Analyse...','window','energy','command','config','setState','comfort','SYSTEM_MODES','guest','endsWith','inactivityThresholdHours','getEnums','enum.functions.*','getGenerativeModel','analysis.security.learningStatus','models/gemini-flash-latest','system.adapter.ical.','sendNotification','testContext','SYSTEM_DP_MODE','events.history','./lib/setup','health','apply','type','getHistoryData','then','security','loadSystemMode','activeModules','abortExitTimer','onUnload','checkSolarCondition','filter','protectAiMemory','haust√ºr','lastAlertState','checkCalendarTriggers','Gemini\x20Init\x20Error:\x20','moduleComfort','analysis.health.geminiNight','processSensorEvent','forEach','rows','dailyDigests','geminiApiKey','json','üêç\x20Triggering\x20Python\x20Health\x20Check\x20(Activity\x20Trend)...','./lib/dead_man','pop','response','Room\x20Dwell\x20Time\x20Stats','memoryCache','General\x20Activity\x20Trend','initHistory','unload','.system.mode','History\x20Save\x20Error:\x20','{\x22history\x22:{}}','utf8','subscribeForeignStates','party','exports','motion','times','createDailyDigest','temperature','./lib/ai_agent','analysis.trigger','systemConfig','replayTodayEvents','checkWifiPresence','Kein\x20API\x20Key\x20√ºbergeben.','analysis.training.status','\x20Kalender-Adapter\x20gefunden.','32595696oSCulv','sources','LTM.rawEventLog','2894508TuERrA','some','startService','.venv','driftAnalysisTimer','todayVector','name','error','moduleHealth','runGeminiAnalysis','triggerInfrasoundCorrelation','find','system','fill','length','analysis.health.todayRoomDetails','genAI','triggerEnergyPrediction','split','analysis.training.triggerTopology','state','location',')\x20-\x20Phase\x20E\x20(Scheduler\x20Fix)','.json','search','Party\x20Mode','values','analysis.health.todayVector','reduce','all','modules','ltmJob','\x22history\x22:{}','@iobroker/adapter-core','integrateRoomTime','object','briefingJob','getMinutes','VACATION','isProVersion','toString','isRelevantActivity','analysis.automation.patternDetected',',\x20Temp:\x20','cleanupGhostInterventions','analysis.energy.warmupSources','exitTimer','./lib/recorder','39573fAZHMB','min','toISOString','Room\x20History\x20(24h\x20Buckets)','Guest\x20Mode','subscribeForeignStatesAsync','Corrupt','infrasoundSensorId','NIGHT','calendarName','No\x20data','existsSync','CALCULATE_HEALTH_TREND','triggerGaitAnalysis','5405961VLRiFK','version','analysis.visualization.pulse','./lib/scheduler','number','onMessage','stringify','now','currentSystemMode','moduleSecurity','callback','\x20Tage)','NORMAL','application/json','[Integrator]\x20Error:\x20','setObjectNotExistsAsync','exitGraceTimer','ready','roomIntegratorTimer','Adapter','runAutopilot','\x20events\x20from\x20today...','replace','val','triggerDailyDigest','59\x2023\x20*\x20*\x20*','Keine\x20Daten','system.adapter.ical.È¶ô','Scan\x20Error:\x20','onReady','1yuHLjZ','scanForDevices','./lib/automation','pressureBuffer','...','open','analysis.automation.description','startSystem','send','date','trackerHeartbeat','analysis.prediction.trackerTopRoom','TRAIN_TOPOLOGY','2720QBADwV','rawEventLog','common','manual','getOverviewData','cogni-living\x20adapter\x20starting\x20(v','onStateChange','LTM.dailyDigests','parse','updateHealthVector','includes','@google/generative-ai','handleInfrasound','analyzeWindowOpening','python','eventHistory','Unknown','writeFileSync','debug','infrasoundEnabled','Gemini\x20Report\x20Day','join','generateHealthReport','slice','sensorLastValues','6196771jYhAXg','cogni-living','readFileSync','analysis.health.activityTrend','isPresent','Verbindung\x20erfolgreich:\x20','bootTime','historyJob','value','history','getStateAsync','10sZvJVb','enum.rooms.*','log','‚úÖ\x20History\x20saved:\x20','scheduleJob','LTM.triggerDailyDigest','text','analysis.training.triggerComfort','subscribeStates','timestamp','substring','presenceDevices','main','(((.+)+)+)+$','info','system.presenceWho','getAbsoluteDefaultDataDir','pulse','instance','6LbniFT','getObjectViewAsync','cancel','checkLicense','Failed\x20to\x20trigger\x20Python\x20Health\x20Check','initSystemConfig','runPythonHealthCheck','toLowerCase','geminiModel','LTM.trainingData.sequences','TRAIN_HEALTH','analysis.health.geminiDay','scanDevices','string','getForeignObjectsAsync','scanThermostats','isSolar','testApiKey','round','./lib/scanner','66048RMRgYc','analysis.activity.roomHistory','toLocaleDateString','updateTopology','setStateAsync','saveDailyHistory','from','getDate','devices','telegram','./lib/topology','analysisTimer','stateChange','üíæ\x20Saving\x20Daily\x20History\x20for\x20','Aktiv\x20(','analysis.energy.warmupTimes','LTM.baselineStatus','analysis.security.lastScore','2745078UYwPZw','door','Sec-Training\x20started...','bind','system.adapter.','analysis.training.triggerHealth','mkdirSync','thermostat','warn'];a0_0x7045=function(){return _0x275d57;};return a0_0x7045();}const a0_0xbbaf82=(function(){let _0x20b571=!![];return function(_0x1a1a2a,_0x185438){const _0x1aa057=_0x20b571?function(){const _0x34fd48=a0_0xb696;if(_0x185438){const _0x32c532=_0x185438[_0x34fd48(0x152)](_0x1a1a2a,arguments);return _0x185438=null,_0x32c532;}}:function(){};return _0x20b571=![],_0x1aa057;};}()),a0_0x5bd852=a0_0xbbaf82(this,function(){const _0x3c1654=a0_0xb696;return a0_0x5bd852['toString']()[_0x3c1654(0x1a1)](_0x3c1654(0x223))[_0x3c1654(0x1b1)]()['constructor'](a0_0x5bd852)[_0x3c1654(0x1a1)]('(((.+)+)+)+$');});a0_0x5bd852();'use strict';const utils=require(a0_0x4b4a65(0x1aa)),{GoogleGenerativeAI}=require(a0_0x4b4a65(0x1fd)),path=require(a0_0x4b4a65(0x137)),fs=require('fs'),installer=require('./lib/installer'),scanner=require(a0_0x4b4a65(0x108)),schedulers=require(a0_0x4b4a65(0x1ca)),topology=require(a0_0x4b4a65(0x113)),setup=require(a0_0x4b4a65(0x150)),recorder=require(a0_0x4b4a65(0x1b8)),pythonBridge=require('./lib/python_bridge'),aiAgent=require(a0_0x4b4a65(0x17e)),deadMan=require(a0_0x4b4a65(0x16b)),automation=require(a0_0x4b4a65(0x1e7)),GEMINI_MODEL=a0_0x4b4a65(0x14a);class CogniLiving extends utils[a0_0x4b4a65(0x1da)]{constructor(_0x1781d2){const _0x53e822=a0_0x4b4a65;super({..._0x1781d2,'name':_0x53e822(0x20c)}),this[_0x53e822(0x201)]=[],this['analysisHistory']=[],this[_0x53e822(0x1f3)]=[],this[_0x53e822(0x167)]=[],this[_0x53e822(0x20a)]={},this[_0x53e822(0x180)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x53e822(0x20f)]=!![],this[_0x53e822(0x1b7)]=null,this[_0x53e822(0x1d7)]=null,this['isGracePeriodActive']=![],this[_0x53e822(0x199)]=null,this[_0x53e822(0x231)]=null,this['currentSystemMode']=setup['SYSTEM_MODES'][_0x53e822(0x1d3)],this[_0x53e822(0x1b0)]=![],this[_0x53e822(0x15f)]=![],this['analysisTimer']=null,this[_0x53e822(0x1a8)]=null,this['modeResetJob']=null,this[_0x53e822(0x18d)]=null,this[_0x53e822(0x1ad)]=null,this[_0x53e822(0x212)]=null,this[_0x53e822(0x1ef)]=null,this[_0x53e822(0x12a)]=null,this[_0x53e822(0x1d9)]=null,this[_0x53e822(0x135)]=![],this['lastTrackerEventTime']=Date[_0x53e822(0x1ce)](),this[_0x53e822(0x16f)]=null,this[_0x53e822(0x211)]=Date['now'](),this[_0x53e822(0x12d)]=![],this[_0x53e822(0x1e8)]=[],this[_0x53e822(0x158)]={'health':!![],'security':!![],'energy':!![],'comfort':!![]},this['on'](_0x53e822(0x1d8),this['onReady']['bind'](this)),this['on'](_0x53e822(0x115),this[_0x53e822(0x1f8)][_0x53e822(0x11e)](this)),this['on'](_0x53e822(0x172),this['onUnload']['bind'](this)),this['on'](_0x53e822(0x13a),this[_0x53e822(0x1cc)][_0x53e822(0x11e)](this));}async[a0_0x4b4a65(0x1e4)](){const _0x490a21=a0_0x4b4a65;this[_0x490a21(0x218)][_0x490a21(0x224)](_0x490a21(0x1f7)+this[_0x490a21(0x1c8)]+_0x490a21(0x19f));if(this[_0x490a21(0x13f)][_0x490a21(0x191)]!==undefined)this['activeModules']['health']=this[_0x490a21(0x13f)][_0x490a21(0x191)];if(this['config'][_0x490a21(0x1d0)]!==undefined)this[_0x490a21(0x158)][_0x490a21(0x156)]=this['config'][_0x490a21(0x1d0)];if(this[_0x490a21(0x13f)][_0x490a21(0x129)]!==undefined)this[_0x490a21(0x158)]['energy']=this['config']['moduleEnergy'];if(this[_0x490a21(0x13f)][_0x490a21(0x162)]!==undefined)this[_0x490a21(0x158)][_0x490a21(0x141)]=this[_0x490a21(0x13f)]['moduleComfort'];if(this['config'][_0x490a21(0x1a7)])this['activeModules']={...this[_0x490a21(0x158)],...this[_0x490a21(0x13f)]['modules']};this[_0x490a21(0x1ec)]();}async[a0_0x4b4a65(0x1ec)](){const _0x21825f=a0_0x4b4a65;await setup['initZombies'](this);try{this['isProVersion']=await setup[_0x21825f(0x22c)](this[_0x21825f(0x13f)]['licenseKey']);}catch(_0x219b26){}if(!this['config'][_0x21825f(0x145)]||this[_0x21825f(0x13f)][_0x21825f(0x145)]<0.1)this[_0x21825f(0x13f)][_0x21825f(0x145)]=0xc;await setup[_0x21825f(0x171)](this),await setup[_0x21825f(0x22e)](this);try{const _0x17d4c7=await this['getStateAsync'](_0x21825f(0x118)),_0x449b4b=await this['getStateAsync'](_0x21825f(0x1b6));_0x17d4c7&&_0x17d4c7[_0x21825f(0x1de)]&&_0x449b4b&&_0x449b4b[_0x21825f(0x1de)]&&(Date[_0x21825f(0x1ce)]()-_0x17d4c7['ts']<0x4*0xe10*0x3e8&&(this[_0x21825f(0x16f)]={'times':JSON[_0x21825f(0x1fa)](_0x17d4c7[_0x21825f(0x1de)]),'sources':JSON[_0x21825f(0x1fa)](_0x449b4b['val'])}));}catch(_0x28405d){}if(this[_0x21825f(0x13f)][_0x21825f(0x168)])try{this['genAI']=new GoogleGenerativeAI(this[_0x21825f(0x13f)][_0x21825f(0x168)]),this['geminiModel']=this[_0x21825f(0x199)][_0x21825f(0x148)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x21825f(0x1d4)}});}catch(_0x89356b){this[_0x21825f(0x218)][_0x21825f(0x190)](_0x21825f(0x161)+_0x89356b['message']);}await setup['createAllObjects'](this),await this[_0x21825f(0x157)](),schedulers['initSchedules'](this),await this[_0x21825f(0x1d6)](_0x21825f(0x1c9),{'type':_0x21825f(0x19d),'common':{'name':'Live\x20Event\x20Pulse','type':_0x21825f(0x1cb),'role':_0x21825f(0x213),'read':!![],'write':![]},'native':{}}),await this[_0x21825f(0x1d6)](_0x21825f(0x12c),{'type':_0x21825f(0x19d),'common':{'name':_0x21825f(0x16e),'type':_0x21825f(0x236),'role':_0x21825f(0x169),'read':!![],'write':![],'def':'{\x22today\x22:{},\x20\x22yesterday\x22:{},\x20\x22date\x22:\x22\x22}'},'native':{}}),await this['setObjectNotExistsAsync']('analysis.activity.roomHistory',{'type':_0x21825f(0x19d),'common':{'name':_0x21825f(0x1bc),'type':'string','role':_0x21825f(0x169),'read':!![],'write':![],'def':_0x21825f(0x175)},'native':{}}),await this[_0x21825f(0x1d6)](_0x21825f(0x163),{'type':_0x21825f(0x19d),'common':{'name':'Gemini\x20Report\x20Night','type':_0x21825f(0x236),'role':'text','read':!![],'write':![],'def':_0x21825f(0x13b)},'native':{}}),await this[_0x21825f(0x1d6)](_0x21825f(0x234),{'type':_0x21825f(0x19d),'common':{'name':_0x21825f(0x206),'type':_0x21825f(0x236),'role':_0x21825f(0x21c),'read':!![],'write':![],'def':_0x21825f(0x13b)},'native':{}}),await this[_0x21825f(0x1d6)](_0x21825f(0x1a4),{'type':_0x21825f(0x19d),'common':{'name':_0x21825f(0x136),'type':_0x21825f(0x236),'role':_0x21825f(0x169),'read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x21825f(0x1d6)]('analysis.health.todayRoomDetails',{'type':_0x21825f(0x19d),'common':{'name':'Daily\x20Room\x20Details\x20(48x30min)','type':_0x21825f(0x236),'role':_0x21825f(0x169),'read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x21825f(0x1d6)](_0x21825f(0x20e),{'type':_0x21825f(0x19d),'common':{'name':_0x21825f(0x170),'type':'number','role':_0x21825f(0x213),'unit':'%','read':!![],'write':![]},'native':{}}),await this[_0x21825f(0x1d6)](_0x21825f(0x118),{'type':_0x21825f(0x19d),'common':{'name':_0x21825f(0x132),'type':'string','role':_0x21825f(0x169),'read':!![],'write':![]},'native':{}});try{const _0x39e3f5=await this['getStateAsync'](_0x21825f(0x14f));if(_0x39e3f5&&_0x39e3f5['val']){this[_0x21825f(0x201)]=JSON['parse'](_0x39e3f5[_0x21825f(0x1de)]);if(this[_0x21825f(0x1b0)]){const _0xd4d7d=await this[_0x21825f(0x215)]('LTM.rawEventLog');if(_0xd4d7d&&_0xd4d7d[_0x21825f(0x1de)])this[_0x21825f(0x1f3)]=JSON[_0x21825f(0x1fa)](_0xd4d7d[_0x21825f(0x1de)]);}this[_0x21825f(0x218)][_0x21825f(0x224)](_0x21825f(0x134)+this['eventHistory'][_0x21825f(0x197)]+'\x20events\x20from\x20standard\x20storage.');}}catch(_0x3454d6){this[_0x21825f(0x201)]=[];}try{const _0x2d64ca=await this['getStateAsync']('LTM.dailyDigests');if(_0x2d64ca&&_0x2d64ca['val'])this[_0x21825f(0x167)]=JSON['parse'](_0x2d64ca['val']);}catch(_0x457772){this[_0x21825f(0x167)]=[];}const _0x384aaa=this[_0x21825f(0x167)][_0x21825f(0x197)]>=(this['config']['minDaysForBaseline']||0x7)?_0x21825f(0x117)+this[_0x21825f(0x167)][_0x21825f(0x197)]+_0x21825f(0x1d2):'Lernphase\x20('+this[_0x21825f(0x167)][_0x21825f(0x197)]+'/'+(this[_0x21825f(0x13f)]['minDaysForBaseline']||0x7)+')';await this[_0x21825f(0x10d)](_0x21825f(0x119),{'val':_0x384aaa,'ack':!![]}),this[_0x21825f(0x21e)](_0x21825f(0x17f)),this[_0x21825f(0x21e)](_0x21825f(0x21b)),this[_0x21825f(0x21e)](_0x21825f(0x120));this[_0x21825f(0x13f)]['infrasoundEnabled']&&this[_0x21825f(0x13f)][_0x21825f(0x1c0)]&&this[_0x21825f(0x158)][_0x21825f(0x156)]&&this[_0x21825f(0x177)](this[_0x21825f(0x13f)][_0x21825f(0x1c0)]);const _0x5112d0=this[_0x21825f(0x13f)][_0x21825f(0x111)];if(_0x5112d0)for(const _0x5a2c62 of _0x5112d0){await this[_0x21825f(0x1be)](_0x5a2c62['id']);}const _0x5a0844=this[_0x21825f(0x13f)][_0x21825f(0x221)];if(_0x5a0844)for(const _0xeb6cd7 of _0x5a0844){await this[_0x21825f(0x1be)](_0xeb6cd7);}const _0x5a7ebe=require('node-schedule');if(this[_0x21825f(0x212)])this[_0x21825f(0x212)][_0x21825f(0x22b)]();this[_0x21825f(0x212)]=_0x5a7ebe[_0x21825f(0x21a)](_0x21825f(0x1e0),()=>{this['saveDailyHistory']();}),setTimeout(()=>this['replayTodayEvents'](),0x1388);if(this[_0x21825f(0x1d9)])clearInterval(this[_0x21825f(0x1d9)]);this['integrateRoomTime'](),this[_0x21825f(0x1d9)]=setInterval(async()=>{const _0x1a8ac2=_0x21825f;await this[_0x1a8ac2(0x1ab)]();},0x3c*0x3e8);if(this['healthTrendInterval'])clearInterval(this[_0x21825f(0x12a)]);this[_0x21825f(0x12a)]=setInterval(()=>{const _0x425b61=_0x21825f;this[_0x425b61(0x1b0)]&&this['activeModules']['health']&&this[_0x425b61(0x22f)]();},0x4*0x3c*0x3c*0x3e8);const _0x474b27=path['join'](__dirname,_0x21825f(0x18c),'bin',_0x21825f(0x200));pythonBridge[_0x21825f(0x18b)](this,_0x474b27);}[a0_0x4b4a65(0x15a)](_0x4398f4){const _0x5b4edf=a0_0x4b4a65;if(this['historyJob'])this[_0x5b4edf(0x212)][_0x5b4edf(0x22b)]();this[_0x5b4edf(0x10e)]()[_0x5b4edf(0x155)](()=>{const _0x37c874=_0x5b4edf;if(this[_0x37c874(0x114)])clearInterval(this[_0x37c874(0x114)]);if(this['roomIntegratorTimer'])clearInterval(this[_0x37c874(0x1d9)]);recorder[_0x37c874(0x159)](this),pythonBridge['stopService'](this),_0x4398f4();});}async[a0_0x4b4a65(0x181)](){const _0x439c91=a0_0x4b4a65;if(!this[_0x439c91(0x201)]||this[_0x439c91(0x201)][_0x439c91(0x197)]===0x0){this[_0x439c91(0x218)][_0x439c91(0x123)](_0x439c91(0x125));return;}this[_0x439c91(0x218)][_0x439c91(0x224)](_0x439c91(0x138)+this[_0x439c91(0x201)][_0x439c91(0x197)]+_0x439c91(0x1dc));const _0x25f271=new Date()[_0x439c91(0x139)](0x0,0x0,0x0,0x0),_0x556ec8=_0x439c91(0x10a);let _0x41a374={'history':{},'date':new Date()[_0x439c91(0x10b)]()};const _0x257dfb=_0x439c91(0x1a4),_0x147e68=_0x439c91(0x198);let _0x32ff58=new Array(0x30)['fill'](0x0),_0x42c1e8=Array['from']({'length':0x30},()=>[]);this[_0x439c91(0x201)]['forEach'](_0x3f330c=>{const _0x497257=_0x439c91;if(_0x3f330c['timestamp']>=_0x25f271){if(recorder[_0x497257(0x1b2)](_0x3f330c[_0x497257(0x153)],_0x3f330c[_0x497257(0x213)])){const _0x16f8fb=new Date(_0x3f330c[_0x497257(0x21f)]),_0x3e77c9=_0x16f8fb[_0x497257(0x131)]()*0x2+(_0x16f8fb[_0x497257(0x1ae)]()>=0x1e?0x1:0x0);if(_0x3e77c9<0x30){_0x32ff58[_0x3e77c9]++;const _0x56b432=_0x3f330c[_0x497257(0x19e)]||_0x3f330c[_0x497257(0x18f)]||'?';let _0x549269=_0x42c1e8[_0x3e77c9];!_0x549269[_0x497257(0x1fc)](_0x56b432)&&_0x549269[_0x497257(0x12b)](_0x56b432);}const _0x3be9c0=_0x16f8fb[_0x497257(0x131)]();let _0x14ec02=_0x3f330c[_0x497257(0x19e)]||_0x497257(0x202);const _0x435544=(this[_0x497257(0x13f)]['devices']||[])[_0x497257(0x194)](_0x145e65=>_0x145e65['location']===_0x14ec02);if(_0x435544)_0x14ec02=_0x435544[_0x497257(0x19e)];if(!_0x41a374['history'][_0x14ec02])_0x41a374[_0x497257(0x214)][_0x14ec02]=new Array(0x18)[_0x497257(0x196)](0x0);if(_0x41a374[_0x497257(0x214)][_0x14ec02][_0x3be9c0]<0x3c)_0x41a374[_0x497257(0x214)][_0x14ec02][_0x3be9c0]++;}}});const _0x408ef0=await this[_0x439c91(0x215)](_0x556ec8);(!_0x408ef0||!_0x408ef0[_0x439c91(0x1de)]||_0x408ef0[_0x439c91(0x1de)]==='{}'||_0x408ef0['val'][_0x439c91(0x1fc)](_0x439c91(0x1a9)))&&await this['setStateAsync'](_0x556ec8,{'val':JSON[_0x439c91(0x1cd)](_0x41a374),'ack':!![]}),await this['setStateAsync'](_0x257dfb,{'val':JSON[_0x439c91(0x1cd)](_0x32ff58),'ack':!![]}),await this[_0x439c91(0x10d)](_0x147e68,{'val':JSON['stringify'](_0x42c1e8),'ack':!![]}),this[_0x439c91(0x218)][_0x439c91(0x224)]('‚úÖ\x20Dashboard\x20Data\x20(Rooms\x20&\x20Timeline\x20&\x20Details)\x20restored.');}async['saveDailyHistory'](){const _0x112676=a0_0x4b4a65;if(!this[_0x112676(0x158)]['health'])return;const _0x124a15=new Date()[_0x112676(0x1bb)]()[_0x112676(0x19b)]('T')[0x0];this[_0x112676(0x218)][_0x112676(0x204)](_0x112676(0x116)+_0x124a15+_0x112676(0x1e9));try{const [_0x45d05a,_0x3e8eab,_0x3f3048,_0x112716,_0xdd3469,_0x531c5c]=await Promise[_0x112676(0x1a6)]([this['getStateAsync'](_0x112676(0x10a)),this['getStateAsync']('analysis.health.geminiNight'),this[_0x112676(0x215)](_0x112676(0x234)),this[_0x112676(0x215)](_0x112676(0x11a)),this[_0x112676(0x215)](_0x112676(0x1a4)),this[_0x112676(0x215)](_0x112676(0x20e))]),_0x3681d7=this['eventHistory'][_0x112676(0x15c)](_0x309ad7=>_0x309ad7[_0x112676(0x21f)]>=new Date()[_0x112676(0x139)](0x0,0x0,0x0,0x0)&&(_0x309ad7['name'][_0x112676(0x230)]()[_0x112676(0x1fc)](_0x112676(0x15e))||_0x309ad7[_0x112676(0x18f)][_0x112676(0x230)]()[_0x112676(0x1fc)]('terrasse'))&&(_0x309ad7[_0x112676(0x213)]===!![]||_0x309ad7[_0x112676(0x213)]==='open'))[_0x112676(0x197)];let _0x4fcf5a=0x55;if(_0x531c5c&&_0x531c5c[_0x112676(0x1de)]!==undefined)_0x4fcf5a=Math[_0x112676(0x1ba)](0x64,Math['max'](0x14,Math[_0x112676(0x107)](0x50+Number(_0x531c5c[_0x112676(0x1de)])*0x5)));const _0x338a03={'date':_0x124a15,'timestamp':Date['now'](),'roomHistory':_0x45d05a?.[_0x112676(0x1de)]?JSON[_0x112676(0x1fa)](_0x45d05a['val']):{},'geminiNight':_0x3e8eab?.[_0x112676(0x1de)]||'Keine\x20Daten','geminiDay':_0x3f3048?.[_0x112676(0x1de)]||_0x112676(0x1e1),'anomalyScore':_0x112716?.[_0x112676(0x1de)]||0.1,'todayVector':_0xdd3469?.[_0x112676(0x1de)]?JSON[_0x112676(0x1fa)](_0xdd3469[_0x112676(0x1de)]):new Array(0x30)[_0x112676(0x196)](0x0),'batteryLevel':_0x4fcf5a,'freshAirCount':_0x3681d7,'eventHistory':this['eventHistory']},_0x16b558=utils[_0x112676(0x226)](),_0x4d4c7e=path[_0x112676(0x207)](_0x16b558,_0x112676(0x20c),_0x112676(0x214));if(!fs['existsSync'](_0x4d4c7e))fs[_0x112676(0x121)](_0x4d4c7e,{'recursive':!![]});const _0x1cf1ec=path['join'](_0x4d4c7e,_0x124a15+_0x112676(0x1a0));fs[_0x112676(0x203)](_0x1cf1ec,JSON[_0x112676(0x1cd)](_0x338a03)),this[_0x112676(0x218)]['info'](_0x112676(0x219)+_0x1cf1ec);}catch(_0x25e9ae){this[_0x112676(0x218)][_0x112676(0x190)](_0x112676(0x174)+_0x25e9ae['message']);}}async['integrateRoomTime'](){const _0x5b0835=a0_0x4b4a65;if(!this[_0x5b0835(0x20f)])return;try{let _0x1b2b4f=null;try{const _0x20e4b9=await this[_0x5b0835(0x215)](_0x5b0835(0x1f0)),_0x1ac969=await this[_0x5b0835(0x215)]('analysis.prediction.trackerConfidence');if(_0x20e4b9&&_0x20e4b9[_0x5b0835(0x1de)]&&_0x1ac969&&_0x1ac969['val']&&_0x1ac969[_0x5b0835(0x1de)]>0.3){if(_0x20e4b9[_0x5b0835(0x1de)]!==_0x5b0835(0x202)&&_0x20e4b9[_0x5b0835(0x1de)]!=='Init...')_0x1b2b4f=_0x20e4b9[_0x5b0835(0x1de)];}}catch(_0xd329a4){}if(!_0x1b2b4f){const _0x45c03f=this[_0x5b0835(0x13f)]['devices']||[];for(const _0x476a25 of _0x45c03f){if(_0x476a25[_0x5b0835(0x153)]==='motion'&&_0x476a25['location'])try{const _0x21f30e=await this['getForeignStateAsync'](_0x476a25['id']);if(_0x21f30e&&(_0x21f30e[_0x5b0835(0x1de)]===!![]||_0x21f30e['val']==='on'||_0x21f30e[_0x5b0835(0x1de)]===0x1)){_0x1b2b4f=_0x476a25['location'];break;}}catch(_0x412886){}}}if(!_0x1b2b4f)return;const _0x113766=this[_0x5b0835(0x13f)][_0x5b0835(0x111)]||[];let _0x388fad=_0x1b2b4f;const _0x2898f1=_0x113766[_0x5b0835(0x194)](_0x373618=>_0x373618[_0x5b0835(0x19e)]&&_0x373618[_0x5b0835(0x19e)]['toLowerCase']()===_0x1b2b4f[_0x5b0835(0x230)]());if(_0x2898f1)_0x388fad=_0x2898f1[_0x5b0835(0x19e)];const _0x39ab90='analysis.activity.roomHistory',_0xdaae28=await this['getStateAsync'](_0x39ab90),_0x18db40=new Date()[_0x5b0835(0x10b)]();let _0x59b205={'history':{},'date':_0x18db40};if(_0xdaae28&&_0xdaae28['val'])try{_0x59b205=JSON['parse'](_0xdaae28['val']);}catch(_0x249b07){}_0x59b205[_0x5b0835(0x1ee)]!==_0x18db40&&(_0x59b205[_0x5b0835(0x214)]={},_0x59b205[_0x5b0835(0x1ee)]=_0x18db40);if(!_0x59b205['history'][_0x388fad])_0x59b205[_0x5b0835(0x214)][_0x388fad]=new Array(0x18)['fill'](0x0);const _0x46d787=new Date()[_0x5b0835(0x131)]();if(_0x59b205[_0x5b0835(0x214)][_0x388fad][_0x46d787]<0x3c)_0x59b205[_0x5b0835(0x214)][_0x388fad][_0x46d787]++;await this[_0x5b0835(0x10d)](_0x39ab90,{'val':JSON[_0x5b0835(0x1cd)](_0x59b205),'ack':!![]});}catch(_0x1d8392){this[_0x5b0835(0x218)][_0x5b0835(0x123)](_0x5b0835(0x1d5)+_0x1d8392['message']);}}async[a0_0x4b4a65(0x1cc)](_0x36e876){const _0x5e3444=a0_0x4b4a65;if(typeof _0x36e876===_0x5e3444(0x1ac)&&_0x36e876[_0x5e3444(0x13a)]){if(_0x36e876[_0x5e3444(0x13e)]===_0x5e3444(0x154)){const _0x33e0bd=_0x36e876[_0x5e3444(0x13a)][_0x5e3444(0x1ee)],_0x1ca814=utils['getAbsoluteDefaultDataDir'](),_0x42ded9=path[_0x5e3444(0x207)](_0x1ca814,'cogni-living',_0x5e3444(0x214),_0x33e0bd+_0x5e3444(0x1a0));if(fs[_0x5e3444(0x1c4)](_0x42ded9))try{const _0x18a34e=JSON[_0x5e3444(0x1fa)](fs[_0x5e3444(0x20d)](_0x42ded9,_0x5e3444(0x176)));this[_0x5e3444(0x126)](_0x36e876[_0x5e3444(0x10f)],_0x36e876[_0x5e3444(0x13e)],{'success':!![],'data':_0x18a34e},_0x36e876[_0x5e3444(0x1d1)]);}catch(_0x2bf03d){this[_0x5e3444(0x126)](_0x36e876[_0x5e3444(0x10f)],_0x36e876[_0x5e3444(0x13e)],{'success':![],'error':_0x5e3444(0x1bf)},_0x36e876[_0x5e3444(0x1d1)]);}else this[_0x5e3444(0x126)](_0x36e876[_0x5e3444(0x10f)],_0x36e876[_0x5e3444(0x13e)],{'success':![],'error':_0x5e3444(0x1c3)},_0x36e876['callback']);}else{if(_0x36e876[_0x5e3444(0x13e)]===_0x5e3444(0x1f6)){const _0x3b8e26=this[_0x5e3444(0x167)][_0x5e3444(0x197)];let _0x362136=new Array(0x30)[_0x5e3444(0x196)](0x0),_0xc5b95f=Array[_0x5e3444(0x10f)]({'length':0x30},()=>[]);try{const _0x21b79d=await this[_0x5e3444(0x215)]('analysis.health.todayVector');if(_0x21b79d&&_0x21b79d[_0x5e3444(0x1de)])_0x362136=JSON[_0x5e3444(0x1fa)](_0x21b79d[_0x5e3444(0x1de)]);const _0x434f7f=await this['getStateAsync'](_0x5e3444(0x198));if(_0x434f7f&&_0x434f7f[_0x5e3444(0x1de)])_0xc5b95f=JSON[_0x5e3444(0x1fa)](_0x434f7f[_0x5e3444(0x1de)]);}catch(_0x6f2362){}let _0x3bdc49=new Array(0x30)[_0x5e3444(0x196)](0x0);try{const _0x5c2438=new Date();_0x5c2438['setDate'](_0x5c2438[_0x5e3444(0x110)]()-0x1);const _0x47f87c=_0x5c2438[_0x5e3444(0x1bb)]()['split']('T')[0x0],_0xe6c1c2=utils[_0x5e3444(0x226)](),_0x4eb082=path[_0x5e3444(0x207)](_0xe6c1c2,_0x5e3444(0x20c),_0x5e3444(0x214),_0x47f87c+_0x5e3444(0x1a0));if(fs[_0x5e3444(0x1c4)](_0x4eb082)){const _0x3da0ce=JSON['parse'](fs['readFileSync'](_0x4eb082,_0x5e3444(0x176)));if(_0x3da0ce&&_0x3da0ce['todayVector'])_0x3bdc49=_0x3da0ce[_0x5e3444(0x18e)];}}catch(_0x40cb8e){}let _0x165799={'today':{},'yesterday':{}};try{const _0x14766d=await this[_0x5e3444(0x215)](_0x5e3444(0x12c));if(_0x14766d&&_0x14766d[_0x5e3444(0x1de)])_0x165799=JSON[_0x5e3444(0x1fa)](_0x14766d[_0x5e3444(0x1de)]);}catch(_0x46efb7){}let _0x3a2877=null;try{const _0xb48a26=await this['getStateAsync'](_0x5e3444(0x20e));if(_0xb48a26)_0x3a2877=_0xb48a26[_0x5e3444(0x1de)];}catch(_0x440f09){}if(_0x3a2877===undefined||_0x3a2877===null){const _0x1a1aad=_0x362136[_0x5e3444(0x1a5)]((_0x509250,_0x1ffed9)=>_0x509250+_0x1ffed9,0x0),_0x134b52=Math[_0x5e3444(0x1ba)](0x2,Math['max'](-0x2,(0x64-_0x1a1aad)/0x32));_0x3a2877=_0x134b52;}let _0x20dda6=![],_0x1589f3='',_0x471363='',_0x399847='';try{const _0x53322b=await this['getStateAsync'](_0x5e3444(0x1b3));if(_0x53322b&&_0x53322b['val']){_0x20dda6=!![];const _0x1c9e72=await this[_0x5e3444(0x215)](_0x5e3444(0x1eb));_0x1589f3=_0x1c9e72?_0x1c9e72[_0x5e3444(0x1de)]:'';const _0x23c3da=await this['getStateAsync']('analysis.automation.targetId');_0x471363=_0x23c3da?_0x23c3da[_0x5e3444(0x1de)]:'';const _0xf702a6=await this[_0x5e3444(0x215)]('analysis.automation.targetValue');_0x399847=_0xf702a6?_0xf702a6['val']:'';}}catch(_0x5c9fe3){}const _0x4774d5=await this[_0x5e3444(0x15b)](),_0x390c05=(this[_0x5e3444(0x13f)]['devices']||[])[_0x5e3444(0x18a)](_0x59a238=>_0x59a238[_0x5e3444(0x105)]),_0x464051=_0x4774d5&&_0x390c05;let _0x3c7089='';try{const _0x33e19b=await this[_0x5e3444(0x215)](_0x5e3444(0x225));if(_0x33e19b&&_0x33e19b[_0x5e3444(0x1de)])_0x3c7089=_0x33e19b[_0x5e3444(0x1de)];}catch(_0x2b9444){}this[_0x5e3444(0x126)](_0x36e876[_0x5e3444(0x10f)],_0x36e876['command'],{'success':!![],'eventHistory':this[_0x5e3444(0x201)][_0x5e3444(0x209)](0x0,0x7d0),'stats':{'digestCount':_0x3b8e26,'isPresent':this[_0x5e3444(0x20f)],'hourlyActivity':_0x362136,'hourlyDetails':_0xc5b95f,'yesterdayActivity':_0x3bdc49,'solarActive':_0x464051,'presenceWho':_0x3c7089,'roomStats':_0x165799,'activityTrend':_0x3a2877,'modules':this[_0x5e3444(0x158)]},'automation':{'detected':_0x20dda6,'description':_0x1589f3,'targetId':_0x471363,'targetValue':_0x399847}},_0x36e876[_0x5e3444(0x1d1)]);}else{if(_0x36e876[_0x5e3444(0x13e)]==='checkThermostats')try{const _0x20e8a5=await automation[_0x5e3444(0x104)](this);this[_0x5e3444(0x126)](_0x36e876[_0x5e3444(0x10f)],_0x36e876['command'],{'success':!![],'results':_0x20e8a5},_0x36e876[_0x5e3444(0x1d1)]);}catch(_0x3bb4a4){this['sendTo'](_0x36e876[_0x5e3444(0x10f)],_0x36e876[_0x5e3444(0x13e)],{'success':![],'error':_0x3bb4a4['message']},_0x36e876['callback']);}else{if(_0x36e876[_0x5e3444(0x13e)]===_0x5e3444(0x235))try{const _0x3ef405=await scanner[_0x5e3444(0x1e6)](this,_0x36e876['message']||{});this['sendTo'](_0x36e876[_0x5e3444(0x10f)],_0x36e876[_0x5e3444(0x13e)],{'success':!![],'devices':_0x3ef405},_0x36e876[_0x5e3444(0x1d1)]);}catch(_0xf69bcb){}else{if(_0x36e876['command']===_0x5e3444(0x146)){const _0x355cd9=await this[_0x5e3444(0x237)](_0x5e3444(0x147),'enum'),_0xb6a3b8=[];if(_0x355cd9)for(const _0x2fb0c6 in _0x355cd9){let _0x1fab96=_0x355cd9[_0x2fb0c6][_0x5e3444(0x1f4)][_0x5e3444(0x18f)];if(_0x1fab96&&typeof _0x1fab96===_0x5e3444(0x1ac))_0x1fab96=_0x1fab96['de']||_0x1fab96['en']||Object['values'](_0x1fab96)[0x0]||JSON[_0x5e3444(0x1cd)](_0x1fab96);_0xb6a3b8['push']({'id':_0x2fb0c6,'name':String(_0x1fab96||_0x2fb0c6)});}const _0x509769=await this[_0x5e3444(0x237)](_0x5e3444(0x217),'enum'),_0x3ddfe7=[];if(_0x509769)for(const _0x8644cf in _0x509769){let _0x190169=_0x509769[_0x8644cf][_0x5e3444(0x1f4)][_0x5e3444(0x18f)];if(_0x190169&&typeof _0x190169==='object')_0x190169=_0x190169['de']||_0x190169['en']||Object[_0x5e3444(0x1a3)](_0x190169)[0x0]||JSON['stringify'](_0x190169);_0x3ddfe7['push'](String(_0x190169||_0x8644cf[_0x5e3444(0x19b)]('.')[_0x5e3444(0x16c)]()));}this[_0x5e3444(0x126)](_0x36e876['from'],_0x36e876[_0x5e3444(0x13e)],{'success':!![],'enums':_0xb6a3b8,'rooms':_0x3ddfe7},_0x36e876[_0x5e3444(0x1d1)]);}else{if(_0x36e876[_0x5e3444(0x13e)]==='getCalendarNames')try{const _0x680e9c=await this[_0x5e3444(0x22a)](_0x5e3444(0x195),_0x5e3444(0x228),{'startkey':_0x5e3444(0x14b),'endkey':_0x5e3444(0x1e2)}),_0xc3210b=new Set();if(_0x680e9c&&_0x680e9c[_0x5e3444(0x166)])for(const _0x2fd31f of _0x680e9c[_0x5e3444(0x166)]){const _0x3fa587=_0x2fd31f['id'][_0x5e3444(0x1dd)](_0x5e3444(0x11f),''),_0x259a44=await this['getForeignStateAsync'](_0x3fa587+'.data.table');let _0x23abee=![];if(_0x259a44&&_0x259a44[_0x5e3444(0x1de)]){const _0x3f5cb5=typeof _0x259a44[_0x5e3444(0x1de)]===_0x5e3444(0x236)?JSON[_0x5e3444(0x1fa)](_0x259a44[_0x5e3444(0x1de)]):_0x259a44[_0x5e3444(0x1de)];Array['isArray'](_0x3f5cb5)&&_0x3f5cb5[_0x5e3444(0x165)](_0x58f28b=>{const _0x2d4f48=_0x5e3444;_0x58f28b[_0x2d4f48(0x1c2)]&&(_0xc3210b['add'](_0x58f28b['calendarName']),_0x23abee=!![]);});}!_0x23abee&&_0xc3210b['add'](_0x3fa587);}const _0x240eeb=Array[_0x5e3444(0x10f)](_0xc3210b);if(_0x240eeb[_0x5e3444(0x197)]===0x0)_0x240eeb[_0x5e3444(0x12b)]('Standard');this[_0x5e3444(0x126)](_0x36e876[_0x5e3444(0x10f)],_0x36e876['command'],{'success':!![],'names':_0x240eeb},_0x36e876['callback']);}catch(_0x13bd78){this[_0x5e3444(0x126)](_0x36e876[_0x5e3444(0x10f)],_0x36e876[_0x5e3444(0x13e)],{'success':![],'error':_0x5e3444(0x1e3)+_0x13bd78[_0x5e3444(0x13a)]},_0x36e876[_0x5e3444(0x1d1)]);}else{if(_0x36e876[_0x5e3444(0x13e)]===_0x5e3444(0x106))try{const _0x52dbff=_0x36e876[_0x5e3444(0x13a)]?_0x36e876[_0x5e3444(0x13a)]['apiKey']:'';if(!_0x52dbff)throw new Error(_0x5e3444(0x183));const _0x134cf4=new GoogleGenerativeAI(_0x52dbff),_0x22dfe9=_0x134cf4[_0x5e3444(0x148)]({'model':GEMINI_MODEL}),_0x51508d=await _0x22dfe9['generateContent']('Say\x20Hello'),_0x5ab955=await _0x51508d[_0x5e3444(0x16d)],_0x347b3b=_0x5ab955['text']();this[_0x5e3444(0x126)](_0x36e876[_0x5e3444(0x10f)],_0x36e876[_0x5e3444(0x13e)],{'success':!![],'message':_0x5e3444(0x210)+_0x347b3b[_0x5e3444(0x220)](0x0,0x14)+_0x5e3444(0x1e9)},_0x36e876['callback']);}catch(_0x58ebec){this['sendTo'](_0x36e876[_0x5e3444(0x10f)],_0x36e876[_0x5e3444(0x13e)],{'success':![],'message':_0x58ebec[_0x5e3444(0x13a)]},_0x36e876['callback']);}else{if(_0x36e876[_0x5e3444(0x13e)]===_0x5e3444(0x14d))try{const _0x42e636=await this[_0x5e3444(0x15b)](),_0x4b5edd=await this['getObjectViewAsync'](_0x5e3444(0x195),_0x5e3444(0x228),{'startkey':_0x5e3444(0x14b),'endkey':_0x5e3444(0x1e2)}),_0x2ec4f2=_0x4b5edd&&_0x4b5edd[_0x5e3444(0x166)]?_0x4b5edd[_0x5e3444(0x166)][_0x5e3444(0x197)]:0x0;this[_0x5e3444(0x126)](_0x36e876[_0x5e3444(0x10f)],_0x36e876['command'],{'success':!![],'weather':'Sonne:\x20'+_0x42e636+_0x5e3444(0x1b4)+(this[_0x5e3444(0x20a)][this[_0x5e3444(0x13f)]['outdoorSensorId']]||'?')+'¬∞C','calendar':_0x2ec4f2+_0x5e3444(0x185)},_0x36e876[_0x5e3444(0x1d1)]);}catch(_0x39df83){this[_0x5e3444(0x126)](_0x36e876[_0x5e3444(0x10f)],_0x36e876[_0x5e3444(0x13e)],{'success':![]},_0x36e876[_0x5e3444(0x1d1)]);}}}}}}}}}}[a0_0x4b4a65(0x22f)](){const _0x3b595d=a0_0x4b4a65;if(!this[_0x3b595d(0x158)][_0x3b595d(0x151)])return;this[_0x3b595d(0x218)][_0x3b595d(0x204)](_0x3b595d(0x16a));try{const _0x35f051=this['rawEventLog']||[];pythonBridge['send'](this,_0x3b595d(0x1c5),{'events':_0x35f051});}catch(_0x2d8fe9){this['log'][_0x3b595d(0x123)](_0x3b595d(0x22d));}}async[a0_0x4b4a65(0x1f8)](_0x516bcc,_0x264eb3){const _0x35ab2c=a0_0x4b4a65;if(!_0x264eb3||this[_0x35ab2c(0x135)])return;if(_0x516bcc[_0x35ab2c(0x1fc)](_0x35ab2c(0x112))&&_0x516bcc[_0x35ab2c(0x144)]('communicate.request')&&_0x264eb3[_0x35ab2c(0x1de)])return;if(this[_0x35ab2c(0x13f)][_0x35ab2c(0x205)]&&_0x516bcc===this[_0x35ab2c(0x13f)][_0x35ab2c(0x1c0)]&&this[_0x35ab2c(0x158)]['security']){this['handleInfrasound'](_0x264eb3[_0x35ab2c(0x1de)]);return;}if(_0x264eb3[_0x35ab2c(0x12f)]&&_0x516bcc[_0x35ab2c(0x144)](_0x35ab2c(0x227)))return;if(_0x516bcc===this['namespace']+_0x35ab2c(0x173)){if(_0x264eb3[_0x35ab2c(0x1de)]&&Object[_0x35ab2c(0x1a3)](setup[_0x35ab2c(0x142)])[_0x35ab2c(0x1fc)](_0x264eb3[_0x35ab2c(0x1de)])){this[_0x35ab2c(0x1cf)]=_0x264eb3[_0x35ab2c(0x1de)];if(_0x264eb3[_0x35ab2c(0x1de)]===setup[_0x35ab2c(0x142)][_0x35ab2c(0x1af)])await recorder[_0x35ab2c(0x127)](this,![]);else await recorder[_0x35ab2c(0x127)](this,!![]);if(this[_0x35ab2c(0x1b0)]){let _0x37613c=![],_0x53669d=0x0,_0x5a1982=_0x35ab2c(0x1f5);if(this['currentSystemMode']===_0x35ab2c(0x178))_0x37613c=!![],_0x53669d=0x168,_0x5a1982=_0x35ab2c(0x1a2);else this[_0x35ab2c(0x1cf)]===_0x35ab2c(0x143)&&(_0x37613c=!![],_0x53669d=0x5a0,_0x5a1982=_0x35ab2c(0x1bd));pythonBridge[_0x35ab2c(0x1ed)](this,'SET_LEARNING_MODE',{'active':_0x37613c,'duration':_0x53669d,'label':_0x5a1982}),await this[_0x35ab2c(0x10d)](_0x35ab2c(0x149),{'val':JSON[_0x35ab2c(0x1cd)]({'active':_0x37613c,'label':_0x5a1982,'timestamp':Date[_0x35ab2c(0x1ce)]()}),'ack':!![]});}}if(!_0x264eb3[_0x35ab2c(0x12f)])this[_0x35ab2c(0x140)](_0x516bcc,{'val':this[_0x35ab2c(0x1cf)],'ack':!![]});return;}if(_0x516bcc[_0x35ab2c(0x144)](_0x35ab2c(0x1b6))&&_0x264eb3[_0x35ab2c(0x12f)])this[_0x35ab2c(0x15d)](_0x264eb3[_0x35ab2c(0x1de)]);if(_0x516bcc[_0x35ab2c(0x144)]('analysis.energy.warmupTimes')&&_0x264eb3[_0x35ab2c(0x12f)]&&this[_0x35ab2c(0x158)][_0x35ab2c(0x13d)])automation[_0x35ab2c(0x160)](this);if(!_0x264eb3[_0x35ab2c(0x12f)]){if(_0x516bcc['includes'](_0x35ab2c(0x17f))&&_0x264eb3['val']){this[_0x35ab2c(0x140)](_0x516bcc,{'val':![],'ack':!![]}),aiAgent[_0x35ab2c(0x192)](this);return;}if(_0x516bcc[_0x35ab2c(0x1fc)](_0x35ab2c(0x1df))&&_0x264eb3[_0x35ab2c(0x1de)]){this[_0x35ab2c(0x140)](_0x516bcc,{'val':![],'ack':!![]});if(this[_0x35ab2c(0x1b0)])aiAgent[_0x35ab2c(0x17c)](this,pythonBridge);return;}if(_0x516bcc[_0x35ab2c(0x1fc)]('triggerBriefing')&&_0x264eb3['val']){this[_0x35ab2c(0x140)](_0x516bcc,{'val':![],'ack':!![]}),aiAgent[_0x35ab2c(0x124)](this);return;}if(_0x516bcc['includes'](_0x35ab2c(0x128))&&_0x264eb3['val']){this[_0x35ab2c(0x140)](_0x516bcc,{'val':![],'ack':!![]}),aiAgent[_0x35ab2c(0x12e)](this);return;}if(_0x516bcc['includes']('analysis.training.triggerSecurity')&&_0x264eb3['val']){this[_0x35ab2c(0x140)](_0x516bcc,{'val':![],'ack':!![]});if(this[_0x35ab2c(0x1b0)])try{const _0xa60146=await this[_0x35ab2c(0x215)](_0x35ab2c(0x232));if(_0xa60146&&_0xa60146[_0x35ab2c(0x1de)]){const _0x48fe94=JSON['parse'](_0xa60146['val']);this['setStateAsync'](_0x35ab2c(0x184),{'val':_0x35ab2c(0x11d),'ack':!![]}),pythonBridge['send'](this,'TRAIN_SECURITY',{'sequences':_0x48fe94});}}catch(_0x385347){}return;}if(_0x516bcc[_0x35ab2c(0x1fc)](_0x35ab2c(0x120))&&_0x264eb3['val']){this['setState'](_0x516bcc,{'val':![],'ack':!![]});if(this[_0x35ab2c(0x1b0)])try{this[_0x35ab2c(0x22f)]();const _0x846e87=await this[_0x35ab2c(0x215)](_0x35ab2c(0x1f9));if(_0x846e87&&_0x846e87[_0x35ab2c(0x1de)])pythonBridge[_0x35ab2c(0x1ed)](this,_0x35ab2c(0x233),{'digests':JSON[_0x35ab2c(0x1fa)](_0x846e87['val'])});aiAgent[_0x35ab2c(0x208)](this,_0x35ab2c(0x1c1)),setTimeout(()=>aiAgent[_0x35ab2c(0x208)](this,'DAY'),0x2ee0);}catch(_0x4d4e97){}return;}if(_0x516bcc[_0x35ab2c(0x1fc)]('analysis.training.triggerEnergy')&&_0x264eb3[_0x35ab2c(0x1de)]){this['setState'](_0x516bcc,{'val':![],'ack':!![]});if(this[_0x35ab2c(0x1b0)])try{const _0x426388=await this[_0x35ab2c(0x215)]('LTM.trainingData.thermodynamics');if(_0x426388&&_0x426388[_0x35ab2c(0x1de)])pythonBridge[_0x35ab2c(0x1ed)](this,'TRAIN_ENERGY',{'points':JSON[_0x35ab2c(0x1fa)](_0x426388[_0x35ab2c(0x1de)])});}catch(_0x412cab){}return;}if(_0x516bcc[_0x35ab2c(0x1fc)](_0x35ab2c(0x21d))&&_0x264eb3[_0x35ab2c(0x1de)]){this['setState'](_0x516bcc,{'val':![],'ack':!![]});if(this[_0x35ab2c(0x1b0)])try{const _0x5adfe0=await this[_0x35ab2c(0x215)](_0x35ab2c(0x188));if(_0x5adfe0&&_0x5adfe0['val']){const _0x45a6f6={};if(this['config'][_0x35ab2c(0x111)])this[_0x35ab2c(0x13f)][_0x35ab2c(0x111)][_0x35ab2c(0x165)](_0x3dfbaa=>{const _0x57010a=_0x35ab2c;if(_0x3dfbaa['id']&&_0x3dfbaa[_0x57010a(0x153)])_0x45a6f6[_0x3dfbaa['id']]=_0x3dfbaa[_0x57010a(0x153)];});pythonBridge[_0x35ab2c(0x1ed)](this,'TRAIN_COMFORT',{'events':JSON[_0x35ab2c(0x1fa)](_0x5adfe0['val']),'deviceMap':_0x45a6f6});}}catch(_0x3f40dc){}return;}if(_0x516bcc[_0x35ab2c(0x1fc)](_0x35ab2c(0x19c))&&_0x264eb3['val']){this[_0x35ab2c(0x140)](_0x516bcc,{'val':![],'ack':!![]}),topology[_0x35ab2c(0x10c)](this);if(this['isProVersion'])try{const _0x5671ec=await this[_0x35ab2c(0x215)](_0x35ab2c(0x232));if(_0x5671ec&&_0x5671ec[_0x35ab2c(0x1de)])pythonBridge[_0x35ab2c(0x1ed)](this,_0x35ab2c(0x1f1),{'sequences':JSON[_0x35ab2c(0x1fa)](_0x5671ec[_0x35ab2c(0x1de)])});}catch(_0x3ee294){}return;}}const _0x169e05=(this['config'][_0x35ab2c(0x111)]||[])[_0x35ab2c(0x194)](_0x353a13=>_0x353a13['id']===_0x516bcc);if(_0x169e05){const _0xd63556=await recorder[_0x35ab2c(0x164)](this,_0x516bcc,_0x264eb3,_0x169e05);_0xd63556&&this['setState'](_0x35ab2c(0x1c9),{'val':Date[_0x35ab2c(0x1ce)](),'ack':!![]});_0xd63556&&_0xd63556[_0x35ab2c(0x153)]===_0x35ab2c(0x17a)&&_0xd63556[_0x35ab2c(0x19e)]&&this[_0x35ab2c(0x1b0)]&&deadMan['updateLocation'](this,_0xd63556[_0x35ab2c(0x19e)]);_0x264eb3[_0x35ab2c(0x1de)]&&(_0x264eb3['val']===!![]||_0x264eb3[_0x35ab2c(0x1de)]===0x1||String(_0x264eb3[_0x35ab2c(0x1de)])['toLowerCase']()===_0x35ab2c(0x1ea))&&(_0x169e05['type']&&(_0x169e05[_0x35ab2c(0x153)][_0x35ab2c(0x1fc)](_0x35ab2c(0x13c))||_0x169e05[_0x35ab2c(0x153)][_0x35ab2c(0x1fc)](_0x35ab2c(0x11c)))&&this['analyzeWindowOpening'](_0x169e05));if(_0x169e05[_0x35ab2c(0x153)]===_0x35ab2c(0x17d)||_0x169e05[_0x35ab2c(0x153)]===_0x35ab2c(0x122)){if(this['activeModules'][_0x35ab2c(0x13d)])automation[_0x35ab2c(0x1b5)](this);}}}async[a0_0x4b4a65(0x15d)](_0x4e1d27){const _0x5ce87b=a0_0x4b4a65;if(!this[_0x5ce87b(0x16f)]||Date[_0x5ce87b(0x1ce)]()-this['bootTime']>0x493e0)return;try{const _0x2273f9=JSON['parse'](_0x4e1d27),_0x160042=this[_0x5ce87b(0x16f)]['sources'];let _0x12e482=![];for(const _0x3cfd97 in _0x160042){if(_0x160042[_0x3cfd97]['includes']('AI')&&_0x2273f9[_0x3cfd97]&&!_0x2273f9[_0x3cfd97]['includes']('AI')){_0x12e482=!![];break;}}_0x12e482&&(await this[_0x5ce87b(0x10d)](_0x5ce87b(0x118),{'val':JSON[_0x5ce87b(0x1cd)](this[_0x5ce87b(0x16f)][_0x5ce87b(0x17b)]),'ack':!![]}),await this[_0x5ce87b(0x10d)](_0x5ce87b(0x1b6),{'val':JSON[_0x5ce87b(0x1cd)](this[_0x5ce87b(0x16f)][_0x5ce87b(0x187)]),'ack':!![]}));}catch(_0x4ff734){}}async['loadSystemMode'](){const _0x4cc167=a0_0x4b4a65;try{const _0x2052d8=await this['getStateAsync'](setup[_0x4cc167(0x14e)]);if(_0x2052d8&&_0x2052d8[_0x4cc167(0x1de)])this[_0x4cc167(0x1cf)]=_0x2052d8[_0x4cc167(0x1de)];}catch(_0x25219c){this[_0x4cc167(0x1cf)]=setup[_0x4cc167(0x142)][_0x4cc167(0x1d3)];}}async[a0_0x4b4a65(0x182)](){return![];}async[a0_0x4b4a65(0x1db)](){const _0x4561ca=a0_0x4b4a65;await aiAgent[_0x4561ca(0x192)](this);this['activeModules'][_0x4561ca(0x151)]&&(this[_0x4561ca(0x1fb)](),this[_0x4561ca(0x1c6)]());if(this[_0x4561ca(0x158)][_0x4561ca(0x13d)])this[_0x4561ca(0x19a)]();}async[a0_0x4b4a65(0x15b)](){return![];}[a0_0x4b4a65(0x1c6)](){if(!this['isProVersion'])return;}async[a0_0x4b4a65(0x19a)](){}[a0_0x4b4a65(0x1fb)](){}async[a0_0x4b4a65(0x1fe)](_0x3a5ade){}async[a0_0x4b4a65(0x193)](_0x4f9ba9,_0xf4cab7){}async[a0_0x4b4a65(0x1ff)](_0xacc189){}async[a0_0x4b4a65(0x133)](_0x5a57e9){}[a0_0x4b4a65(0x14c)](_0x375c99){}}function a0_0xb696(_0x31ac16,_0x24d38c){const _0x4efbf1=a0_0x7045();return a0_0xb696=function(_0x5bd852,_0xbbaf82){_0x5bd852=_0x5bd852-0x104;let _0x704572=_0x4efbf1[_0x5bd852];return _0x704572;},a0_0xb696(_0x31ac16,_0x24d38c);}if(require[a0_0x4b4a65(0x222)]!==module)module[a0_0x4b4a65(0x179)]=_0x445462=>new CogniLiving(_0x445462);else new CogniLiving();