const a0_0x1bd7eb=a0_0x5527;(function(_0x3fee21,_0x214652){const _0x224ba1=a0_0x5527,_0x40e36e=_0x3fee21();while(!![]){try{const _0x27cdd9=parseInt(_0x224ba1(0x1f2))/0x1+-parseInt(_0x224ba1(0x24a))/0x2+-parseInt(_0x224ba1(0x227))/0x3+parseInt(_0x224ba1(0x271))/0x4*(parseInt(_0x224ba1(0x27d))/0x5)+-parseInt(_0x224ba1(0x234))/0x6*(-parseInt(_0x224ba1(0x229))/0x7)+-parseInt(_0x224ba1(0x1ea))/0x8*(parseInt(_0x224ba1(0x288))/0x9)+parseInt(_0x224ba1(0x259))/0xa*(-parseInt(_0x224ba1(0x1e0))/0xb);if(_0x27cdd9===_0x214652)break;else _0x40e36e['push'](_0x40e36e['shift']());}catch(_0x3bc673){_0x40e36e['push'](_0x40e36e['shift']());}}}(a0_0x5c0e,0xd2c17));const a0_0x158f6a=(function(){let _0x2abf39=!![];return function(_0x5e8abb,_0x1e6feb){const _0x3fa1d2=_0x2abf39?function(){const _0x1e64fe=a0_0x5527;if(_0x1e6feb){const _0x5cf2ac=_0x1e6feb[_0x1e64fe(0x256)](_0x5e8abb,arguments);return _0x1e6feb=null,_0x5cf2ac;}}:function(){};return _0x2abf39=![],_0x3fa1d2;};}()),a0_0x32ac22=a0_0x158f6a(this,function(){const _0x1ba164=a0_0x5527;return a0_0x32ac22['toString']()['search'](_0x1ba164(0x1e5))['toString']()[_0x1ba164(0x277)](a0_0x32ac22)['search'](_0x1ba164(0x1e5));});a0_0x32ac22();'use strict';function a0_0x5527(_0x277e73,_0x298d1e){const _0x1105b0=a0_0x5c0e();return a0_0x5527=function(_0x32ac22,_0x158f6a){_0x32ac22=_0x32ac22-0x1d3;let _0x5c0e75=_0x1105b0[_0x32ac22];return _0x5c0e75;},a0_0x5527(_0x277e73,_0x298d1e);}const utils=require(a0_0x1bd7eb(0x204)),{GoogleGenerativeAI}=require(a0_0x1bd7eb(0x1fa)),installer=require(a0_0x1bd7eb(0x22f)),scanner=require('./lib/scanner'),schedulers=require(a0_0x1bd7eb(0x223)),topology=require(a0_0x1bd7eb(0x1f5)),setup=require(a0_0x1bd7eb(0x28f)),recorder=require(a0_0x1bd7eb(0x25c)),pythonBridge=require(a0_0x1bd7eb(0x239)),aiAgent=require(a0_0x1bd7eb(0x279)),deadMan=require(a0_0x1bd7eb(0x21e)),GEMINI_MODEL='models/gemini-flash-latest',ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};function a0_0x5c0e(){const _0x1532a8=['isProVersion','calendarInstance','testNotification','./lib/scheduler','abortExitTimer','Adapter','updateHealthVector','1518516AFctMe','getForeignObjectsAsync','2737ItazEY','toLowerCase','onMessage','triggerBriefing','setPresence','LTM.trainingData.sequences','./lib/installer','updateLocation','motion','Gemini\x20AI\x20initialized.','runBaselineDriftAnalysis','14898JGzeoz','exitTimer','now','isPresent','currentSystemMode','./lib/python_bridge','updateTopology','TRAIN_HEALTH','system.adapter.','unload','bind','temperature','TRAIN_ENERGY','\x20Tage)','Standard','ANALYZE_GAIT','startSystem','rawEventLog','PYTHON_EXE','triggerGaitAnalysis','values','split','2384108KSOpFU','LTM.triggerDailyDigest','ready','getForeignStateAsync','error','.system.mode','getHours','getLtmData','getStateAsync','join','_calName','keys','apply','ltmJob','cogni-living\x20adapter\x20starting\x20(v','1900YSzMAy','callback','setHours','./lib/recorder','setupModeResetScheduler','sort','getState','setState','common','sendNotification','weatherInstance','getGenerativeModel','presenceDevices','setupLtmScheduler','inactivityThresholdHours','Instanz\x20nicht\x20gefunden','genAI','initSystemConfig','Lernphase\x20(','system.presenceWho','Activity-Level','updateTopologyMatrix','sendMorningBriefing','runAutopilot','16nHbeTI','forEach','ANALYZE_TREND','length','modeResetJob','exitGraceTimer','constructor','TRAIN_COMFORT','./lib/ai_agent','LTM.rawEventLog','Aktiv\x20(','notifyTelegramEnabled','679735zFWlgi','system.mode','enum','includes','LTM.baselineStatus','ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...','endsWith','message','exports','analysis.training.triggerSecurity','telegram','19161znnlZb','briefingJob','location','config','minDaysForBaseline','push','analysisInterval','./lib/setup','dailyDigests','log',')\x20-\x20Phase\x20C\x20(Calendar\x20Fix)','Kein\x20Wetter-Adapter','analysis.health.todayVector','devices','add','isGracePeriodActive','LTM.trainingData.thermodynamics','scanDevices','scanForDevices','object','map','getOutsideTemperatureNumeric','analysis.training.triggerTopology','name','version','triggerDailyDigest','geminiModel','info','SET_TOPOLOGY','isArray','sensorLastValues','lastAlertState','onUnload','stopService','dependencyInstallInProgress','debug','checkWifiPresence','analysisTimer','driftAnalysisTimer','updated','cancel','3069TrmjXp','setStateAsync','Daten\x20nicht\x20verfÃ¼gbar','namespace','checkAndInstall','(((.+)+)+)+$','setupBriefingScheduler','command','Kein\x20Kalender-Adapter','from','728MQXuHR','getEnums','analysis.training.triggerComfort','stateChange','ack','analysis.training.triggerEnergy','testApiKey','analysis.trigger','1293589iVzitC','analysis.automation.autoApply','onReady','./lib/topology','getCalendarNames','runPythonHealthCheck','SYSTEM_DP_MODE','WiFi\x20Presence\x20detected.','@google/generative-ai','main','parse','calendarName','processSensorEvent','enum.functions.*','getOverviewData','LTM.dailyDigests','subscribeStates','getMinutes','@iobroker/adapter-core','timestamp','stringify','.communicate.request','automation.triggerAction','runGeminiAnalysis','geminiApiKey','analysis.topology.structure','loadSystemMode','Gesendet','Gemini\x20Init\x20Error:\x20','val','application/json','eventHistory','send','SYSTEM_MODES','createAllObjects','sendTo','subscribeForeignStatesAsync','triggerEnergyPrediction','createDailyDigest','getTime','NORMAL','Verbunden','PREDICT_ENERGY','.data.table','./lib/dead_man','analysisHistory'];a0_0x5c0e=function(){return _0x1532a8;};return a0_0x5c0e();}class CogniLiving extends utils[a0_0x1bd7eb(0x225)]{constructor(_0x2c1337){const _0x26544b=a0_0x1bd7eb;super({..._0x2c1337,'name':'cogni-living'}),this[_0x26544b(0x211)]=[],this[_0x26544b(0x21f)]=[],this[_0x26544b(0x245)]=[],this[_0x26544b(0x290)]=[],this[_0x26544b(0x1d5)]={},this['systemConfig']={'latitude':0x0,'longitude':0x0,'city':''},this[_0x26544b(0x237)]=!![],this[_0x26544b(0x235)]=null,this[_0x26544b(0x276)]=null,this[_0x26544b(0x297)]=![],this[_0x26544b(0x269)]=null,this['geminiModel']=null,this[_0x26544b(0x238)]=setup[_0x26544b(0x213)][_0x26544b(0x21a)],this['isProVersion']=![],this[_0x26544b(0x1d6)]=![],this[_0x26544b(0x1dc)]=null,this[_0x26544b(0x257)]=null,this[_0x26544b(0x275)]=null,this[_0x26544b(0x1dd)]=null,this['briefingJob']=null,this[_0x26544b(0x1d9)]=![],this['on'](_0x26544b(0x24c),this[_0x26544b(0x1f4)][_0x26544b(0x23e)](this)),this['on'](_0x26544b(0x1ed),this['onStateChange'][_0x26544b(0x23e)](this)),this['on'](_0x26544b(0x23d),this[_0x26544b(0x1d7)]['bind'](this)),this['on'](_0x26544b(0x284),this[_0x26544b(0x22b)][_0x26544b(0x23e)](this));}async[a0_0x1bd7eb(0x1f4)](){const _0x2f1def=a0_0x1bd7eb;this[_0x2f1def(0x291)][_0x2f1def(0x2a3)](_0x2f1def(0x258)+this[_0x2f1def(0x2a0)]+_0x2f1def(0x292));if(!installer[_0x2f1def(0x1e4)](this,()=>this[_0x2f1def(0x244)]()))return;}async[a0_0x1bd7eb(0x244)](){const _0x5e2af5=a0_0x1bd7eb;await setup['initZombies'](this);try{this['isProVersion']=await setup['checkLicense'](this[_0x5e2af5(0x28b)]['licenseKey']);}catch(_0x51404f){}if(!this['config'][_0x5e2af5(0x267)]||this[_0x5e2af5(0x28b)][_0x5e2af5(0x267)]<0.1)this['config']['inactivityThresholdHours']=0xc;await setup['initHistory'](this),await setup[_0x5e2af5(0x26a)](this);if(this[_0x5e2af5(0x28b)][_0x5e2af5(0x20a)])try{this['genAI']=new GoogleGenerativeAI(this['config'][_0x5e2af5(0x20a)]),this[_0x5e2af5(0x2a2)]=this[_0x5e2af5(0x269)][_0x5e2af5(0x264)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x5e2af5(0x210)}}),this['log']['info'](_0x5e2af5(0x232));}catch(_0x39ffd7){this[_0x5e2af5(0x291)][_0x5e2af5(0x24e)](_0x5e2af5(0x20e)+_0x39ffd7['message']);}await setup[_0x5e2af5(0x214)](this),await this[_0x5e2af5(0x20c)]();try{const _0x2661cf=await this[_0x5e2af5(0x252)]('LTM.rawEventLog');if(_0x2661cf&&_0x2661cf[_0x5e2af5(0x20f)])this[_0x5e2af5(0x245)]=JSON[_0x5e2af5(0x1fc)](_0x2661cf[_0x5e2af5(0x20f)]);}catch(_0xcf70f5){this[_0x5e2af5(0x245)]=[];}try{const _0x47700e=await this[_0x5e2af5(0x252)](_0x5e2af5(0x201));if(_0x47700e&&_0x47700e[_0x5e2af5(0x20f)])this[_0x5e2af5(0x290)]=JSON['parse'](_0x47700e[_0x5e2af5(0x20f)]);}catch(_0x3ae63f){this[_0x5e2af5(0x290)]=[];}const _0x50e532=this['dailyDigests']['length']>=(this[_0x5e2af5(0x28b)][_0x5e2af5(0x28c)]||0x7)?_0x5e2af5(0x27b)+this[_0x5e2af5(0x290)][_0x5e2af5(0x274)]+_0x5e2af5(0x241):_0x5e2af5(0x26b)+this[_0x5e2af5(0x290)][_0x5e2af5(0x274)]+'/'+(this[_0x5e2af5(0x28b)][_0x5e2af5(0x28c)]||0x7)+')';await this[_0x5e2af5(0x1e1)](_0x5e2af5(0x281),{'val':_0x50e532,'ack':!![]}),this[_0x5e2af5(0x202)]('analysis.trigger'),this[_0x5e2af5(0x202)](_0x5e2af5(0x24b)),this[_0x5e2af5(0x202)](_0x5e2af5(0x27e)),this[_0x5e2af5(0x202)]('analysis.triggerBriefing'),this[_0x5e2af5(0x202)]('analysis.automation.triggerAction'),this['subscribeStates'](_0x5e2af5(0x1f3)),this['subscribeStates'](_0x5e2af5(0x286)),this[_0x5e2af5(0x202)]('analysis.training.triggerHealth'),this[_0x5e2af5(0x202)](_0x5e2af5(0x1ef)),this[_0x5e2af5(0x202)]('analysis.training.triggerComfort'),this['subscribeStates']('analysis.training.triggerTopology');const _0x46385b=this[_0x5e2af5(0x28b)][_0x5e2af5(0x295)];if(_0x46385b)for(const _0x2c8149 of _0x46385b){await this['subscribeForeignStatesAsync'](_0x2c8149['id']);}const _0x5971dc=this[_0x5e2af5(0x28b)][_0x5e2af5(0x265)];if(_0x5971dc)for(const _0x50745a of _0x5971dc){await this[_0x5e2af5(0x216)](_0x50745a);}if(this[_0x5e2af5(0x28b)][_0x5e2af5(0x27c)]&&this['config']['notifyTelegramInstance'])await this[_0x5e2af5(0x216)](this['config']['notifyTelegramInstance']+_0x5e2af5(0x207));setTimeout(()=>this['checkWifiPresence'](),0x1388);if(this['analysisTimer'])clearInterval(this[_0x5e2af5(0x1dc)]);const _0x4dfa15=this[_0x5e2af5(0x28b)][_0x5e2af5(0x28e)]||0xf;_0x4dfa15>0x0&&(this[_0x5e2af5(0x1dc)]=setInterval(()=>{this['runAutopilot']();},_0x4dfa15*0x3c*0x3e8)),schedulers[_0x5e2af5(0x266)](this,()=>aiAgent[_0x5e2af5(0x218)](this,pythonBridge)),schedulers[_0x5e2af5(0x25d)](this),schedulers['setupDriftAnalysisScheduler'](this,()=>aiAgent[_0x5e2af5(0x233)](this)),schedulers[_0x5e2af5(0x1e6)](this,()=>aiAgent[_0x5e2af5(0x26f)](this)),pythonBridge['startService'](this,installer[_0x5e2af5(0x246)]),setTimeout(async()=>{const _0x2e1aaa=_0x5e2af5;await topology[_0x2e1aaa(0x23a)](this);try{const _0x1a6b7f=await this[_0x2e1aaa(0x252)](_0x2e1aaa(0x20b));if(_0x1a6b7f&&_0x1a6b7f['val'])pythonBridge['send'](this,_0x2e1aaa(0x1d3),JSON['parse'](_0x1a6b7f[_0x2e1aaa(0x20f)]));}catch(_0x273ac1){}this[_0x2e1aaa(0x1f7)](),this[_0x2e1aaa(0x247)](),this['triggerEnergyPrediction'](),this['updateHealthVector']();},0x1388);}[a0_0x1bd7eb(0x1d7)](_0x25d583){const _0x2f01cb=a0_0x1bd7eb;if(this[_0x2f01cb(0x1dc)])clearInterval(this[_0x2f01cb(0x1dc)]);if(this[_0x2f01cb(0x1dd)])clearInterval(this[_0x2f01cb(0x1dd)]);if(this[_0x2f01cb(0x257)])this[_0x2f01cb(0x257)][_0x2f01cb(0x1df)]();if(this[_0x2f01cb(0x275)])this[_0x2f01cb(0x275)][_0x2f01cb(0x1df)]();if(this[_0x2f01cb(0x289)])this[_0x2f01cb(0x289)][_0x2f01cb(0x1df)]();recorder['abortExitTimer'](this),pythonBridge[_0x2f01cb(0x1d8)](this),_0x25d583();}async['onStateChange'](_0x4ade6e,_0x1db799){const _0x386aad=a0_0x1bd7eb;if(!_0x1db799||this[_0x386aad(0x1d9)])return;if(_0x4ade6e[_0x386aad(0x280)](_0x386aad(0x287))&&_0x4ade6e[_0x386aad(0x283)]('communicate.request')&&_0x1db799['val'])return;if(_0x4ade6e===this[_0x386aad(0x1e3)]+_0x386aad(0x24f)){if(_0x1db799[_0x386aad(0x20f)]&&Object[_0x386aad(0x248)](setup[_0x386aad(0x213)])[_0x386aad(0x280)](_0x1db799[_0x386aad(0x20f)])){this[_0x386aad(0x238)]=_0x1db799[_0x386aad(0x20f)];if(_0x1db799['val']===setup[_0x386aad(0x213)]['VACATION'])await recorder[_0x386aad(0x22d)](this,![]);else await recorder[_0x386aad(0x22d)](this,!![]);}if(!_0x1db799[_0x386aad(0x1ee)])this[_0x386aad(0x260)](_0x4ade6e,{'val':this[_0x386aad(0x238)],'ack':!![]});return;}if(!_0x1db799[_0x386aad(0x1ee)]){_0x4ade6e[_0x386aad(0x280)](_0x386aad(0x1f1))&&_0x1db799[_0x386aad(0x20f)]&&(this[_0x386aad(0x260)](_0x4ade6e,{'val':![],'ack':!![]}),aiAgent[_0x386aad(0x209)](this));if(_0x4ade6e[_0x386aad(0x280)](_0x386aad(0x2a1))&&_0x1db799[_0x386aad(0x20f)]){this['setState'](_0x4ade6e,{'val':![],'ack':!![]});if(this[_0x386aad(0x220)])aiAgent['createDailyDigest'](this,pythonBridge);}_0x4ade6e[_0x386aad(0x280)](_0x386aad(0x22c))&&_0x1db799['val']&&(this[_0x386aad(0x260)](_0x4ade6e,{'val':![],'ack':!![]}),aiAgent[_0x386aad(0x26f)](this));_0x4ade6e[_0x386aad(0x280)](_0x386aad(0x208))&&_0x1db799['val']&&(this['setState'](_0x4ade6e,{'val':![],'ack':!![]}),aiAgent['executeAutomationAction'](this));if(_0x4ade6e[_0x386aad(0x280)](_0x386aad(0x286))&&_0x1db799[_0x386aad(0x20f)]){this[_0x386aad(0x260)](_0x4ade6e,{'val':![],'ack':!![]});if(this[_0x386aad(0x220)])try{const _0x89b2d5=await this[_0x386aad(0x252)](_0x386aad(0x22e));if(_0x89b2d5&&_0x89b2d5['val']){const _0xc78ca3=JSON[_0x386aad(0x1fc)](_0x89b2d5[_0x386aad(0x20f)]);this[_0x386aad(0x1e1)]('analysis.training.status',{'val':'Sec-Training\x20started...','ack':!![]}),pythonBridge['send'](this,'TRAIN_SECURITY',{'sequences':_0xc78ca3});}}catch(_0x492e6a){}}if(_0x4ade6e[_0x386aad(0x280)]('analysis.training.triggerHealth')&&_0x1db799[_0x386aad(0x20f)]){this[_0x386aad(0x260)](_0x4ade6e,{'val':![],'ack':!![]});if(this[_0x386aad(0x220)])try{const _0x2b1d9c=await this[_0x386aad(0x252)](_0x386aad(0x201));if(_0x2b1d9c&&_0x2b1d9c[_0x386aad(0x20f)])pythonBridge['send'](this,_0x386aad(0x23b),{'digests':JSON[_0x386aad(0x1fc)](_0x2b1d9c[_0x386aad(0x20f)])});}catch(_0x59ec13){}}if(_0x4ade6e['includes'](_0x386aad(0x1ef))&&_0x1db799[_0x386aad(0x20f)]){this[_0x386aad(0x260)](_0x4ade6e,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x2a4412=await this[_0x386aad(0x252)](_0x386aad(0x298));if(_0x2a4412&&_0x2a4412[_0x386aad(0x20f)])pythonBridge[_0x386aad(0x212)](this,_0x386aad(0x240),{'points':JSON[_0x386aad(0x1fc)](_0x2a4412[_0x386aad(0x20f)])});}catch(_0x1fcf51){}}if(_0x4ade6e[_0x386aad(0x280)](_0x386aad(0x1ec))&&_0x1db799[_0x386aad(0x20f)]){this[_0x386aad(0x260)](_0x4ade6e,{'val':![],'ack':!![]});if(this[_0x386aad(0x220)])try{const _0x30bfe8=await this[_0x386aad(0x252)](_0x386aad(0x27a));if(_0x30bfe8&&_0x30bfe8[_0x386aad(0x20f)])pythonBridge[_0x386aad(0x212)](this,_0x386aad(0x278),{'events':JSON['parse'](_0x30bfe8[_0x386aad(0x20f)])});}catch(_0x373826){}}_0x4ade6e['includes'](_0x386aad(0x29e))&&_0x1db799[_0x386aad(0x20f)]&&(this['setState'](_0x4ade6e,{'val':![],'ack':!![]}),topology[_0x386aad(0x23a)](this));return;}if(this[_0x386aad(0x28b)][_0x386aad(0x265)]&&this[_0x386aad(0x28b)][_0x386aad(0x265)][_0x386aad(0x280)](_0x4ade6e)){await this['checkWifiPresence']();return;}const _0x4f3493=(this[_0x386aad(0x28b)][_0x386aad(0x295)]||[])['find'](_0xad9d74=>_0xad9d74['id']===_0x4ade6e);if(_0x4f3493){const _0x424adf=await recorder[_0x386aad(0x1fe)](this,_0x4ade6e,_0x1db799,_0x4f3493);_0x424adf&&_0x424adf['type']===_0x386aad(0x231)&&_0x424adf[_0x386aad(0x28a)]&&this[_0x386aad(0x220)]&&deadMan[_0x386aad(0x230)](this,_0x424adf[_0x386aad(0x28a)]);}}async[a0_0x1bd7eb(0x22b)](_0xe4f537){const _0x447147=a0_0x1bd7eb;if(typeof _0xe4f537===_0x447147(0x29b)&&_0xe4f537['message']){if(_0xe4f537[_0x447147(0x1e7)]===_0x447147(0x1f0)){}else{if(_0xe4f537['command']===_0x447147(0x299))try{const _0x2944c7=await scanner[_0x447147(0x29a)](this,_0xe4f537['message']||{});this[_0x447147(0x215)](_0xe4f537[_0x447147(0x1e9)],_0xe4f537[_0x447147(0x1e7)],{'success':!![],'devices':_0x2944c7},_0xe4f537[_0x447147(0x25a)]);}catch(_0x433bec){this[_0x447147(0x215)](_0xe4f537[_0x447147(0x1e9)],_0xe4f537[_0x447147(0x1e7)],{'success':![],'error':_0x433bec[_0x447147(0x284)]},_0xe4f537[_0x447147(0x25a)]);}else{if(_0xe4f537[_0x447147(0x1e7)]===_0x447147(0x26e)){const {matrix:_0x19de4b}=_0xe4f537[_0x447147(0x284)];try{const _0x3d97fc=await this[_0x447147(0x252)](_0x447147(0x20b));if(_0x3d97fc&&_0x3d97fc[_0x447147(0x20f)]){const _0x240380=JSON['parse'](_0x3d97fc['val']);_0x240380['matrix']=_0x19de4b,_0x240380[_0x447147(0x1de)]=Date[_0x447147(0x236)](),await this[_0x447147(0x1e1)](_0x447147(0x20b),{'val':JSON[_0x447147(0x206)](_0x240380),'ack':!![]}),pythonBridge[_0x447147(0x212)](this,'SET_TOPOLOGY',_0x240380);}this[_0x447147(0x215)](_0xe4f537[_0x447147(0x1e9)],_0xe4f537[_0x447147(0x1e7)],{'success':!![]},_0xe4f537['callback']);}catch(_0x3c68e6){}}else{if(_0xe4f537[_0x447147(0x1e7)]===_0x447147(0x251))this[_0x447147(0x215)](_0xe4f537[_0x447147(0x1e9)],_0xe4f537['command'],{'success':!![],'dailyDigests':this[_0x447147(0x290)]||[],'analysisHistory':this['analysisHistory']||[]},_0xe4f537[_0x447147(0x25a)]);else{if(_0xe4f537[_0x447147(0x1e7)]===_0x447147(0x200)){const _0x283b1f=this[_0x447147(0x290)]['length'],_0x4f0581=new Array(0x18)['fill'](0x0),_0xd84980=new Date()['setHours'](0x0,0x0,0x0,0x0);this[_0x447147(0x211)]&&this[_0x447147(0x211)]['forEach'](_0x151721=>{const _0x1575e3=_0x447147;if(_0x151721['timestamp']>=_0xd84980){const _0x5d54c4=new Date(_0x151721[_0x1575e3(0x205)])[_0x1575e3(0x250)]();if(_0x5d54c4>=0x0&&_0x5d54c4<0x18)_0x4f0581[_0x5d54c4]++;}}),this['sendTo'](_0xe4f537[_0x447147(0x1e9)],_0xe4f537[_0x447147(0x1e7)],{'success':!![],'eventHistory':this[_0x447147(0x211)]['slice'](0x0,0xf),'stats':{'digestCount':_0x283b1f,'isPresent':this[_0x447147(0x237)],'hourlyActivity':_0x4f0581},'automation':{'detected':![]}},_0xe4f537['callback']);}else{if(_0xe4f537[_0x447147(0x1e7)]===_0x447147(0x1eb)){const _0x42a589=await this[_0x447147(0x228)](_0x447147(0x1ff),_0x447147(0x27f)),_0x211fd9=[];if(_0x42a589)for(const _0x448a2f in _0x42a589){const _0x2e0c92=_0x42a589[_0x448a2f],_0xa45e88=(_0x2e0c92[_0x447147(0x261)]&&typeof _0x2e0c92['common'][_0x447147(0x29f)]===_0x447147(0x29b)?_0x2e0c92[_0x447147(0x261)][_0x447147(0x29f)]['de']:_0x2e0c92['common'][_0x447147(0x29f)])||_0x2e0c92[_0x447147(0x261)]['name'];_0x211fd9[_0x447147(0x28d)]({'id':_0x448a2f,'name':_0xa45e88});}const _0x2007f2=await this['getForeignObjectsAsync']('enum.rooms.*',_0x447147(0x27f)),_0x460972=[];if(_0x2007f2)for(const _0x327d13 in _0x2007f2){const _0x29f469=_0x2007f2[_0x327d13],_0x63d557=(_0x29f469[_0x447147(0x261)]&&typeof _0x29f469['common'][_0x447147(0x29f)]===_0x447147(0x29b)?_0x29f469['common'][_0x447147(0x29f)]['de']:_0x29f469[_0x447147(0x261)]['name'])||_0x327d13[_0x447147(0x249)]('.')['pop']();_0x460972[_0x447147(0x28d)](_0x63d557);}this[_0x447147(0x215)](_0xe4f537[_0x447147(0x1e9)],_0xe4f537[_0x447147(0x1e7)],{'success':!![],'enums':_0x211fd9,'rooms':_0x460972},_0xe4f537[_0x447147(0x25a)]);}else{if(_0xe4f537[_0x447147(0x1e7)]==='testContext'){let _0x337500=_0x447147(0x293),_0x3796b3=_0x447147(0x1e8);try{if(this[_0x447147(0x28b)][_0x447147(0x263)]){const _0x5b067c=await recorder[_0x447147(0x29d)](this);_0x337500=_0x5b067c!==null?_0x5b067c+'Â°C':_0x447147(0x1e2);}if(this[_0x447147(0x28b)][_0x447147(0x221)]){const _0x41c60a=await this['getForeignObjectAsync'](_0x447147(0x23c)+this[_0x447147(0x28b)][_0x447147(0x221)]);_0x3796b3=_0x41c60a?_0x447147(0x21b):_0x447147(0x268);}}catch(_0x325e61){_0x337500=_0x325e61['message'];}this['sendTo'](_0xe4f537[_0x447147(0x1e9)],_0xe4f537[_0x447147(0x1e7)],{'success':!![],'weather':_0x337500,'calendar':_0x3796b3},_0xe4f537[_0x447147(0x25a)]);}else{if(_0xe4f537['command']===_0x447147(0x1f6)){const _0x1b0ae5=_0xe4f537[_0x447147(0x284)]['instance'];try{const _0x1e881d=await this['getForeignStateAsync'](_0x1b0ae5+_0x447147(0x21d));let _0x1b3810=[];if(_0x1e881d&&_0x1e881d['val']){const _0x1efcf7=JSON[_0x447147(0x1fc)](_0x1e881d[_0x447147(0x20f)]),_0x4f4941=new Set();Array[_0x447147(0x1d4)](_0x1efcf7)&&_0x1efcf7['forEach'](_0x405984=>{const _0x42b9d4=_0x447147;if(_0x405984['_calName'])_0x4f4941[_0x42b9d4(0x296)](_0x405984[_0x42b9d4(0x254)]);else{if(_0x405984[_0x42b9d4(0x1fd)])_0x4f4941['add'](_0x405984[_0x42b9d4(0x1fd)]);}}),_0x1b3810=Array[_0x447147(0x1e9)](_0x4f4941)[_0x447147(0x25e)]();}if(_0x1b3810[_0x447147(0x274)]===0x0)_0x1b3810=[_0x447147(0x242)];this[_0x447147(0x215)](_0xe4f537[_0x447147(0x1e9)],_0xe4f537[_0x447147(0x1e7)],{'success':!![],'names':_0x1b3810},_0xe4f537['callback']);}catch(_0x104086){this[_0x447147(0x215)](_0xe4f537[_0x447147(0x1e9)],_0xe4f537['command'],{'success':![],'error':_0x104086[_0x447147(0x284)]},_0xe4f537[_0x447147(0x25a)]);}}else _0xe4f537[_0x447147(0x1e7)]===_0x447147(0x222)&&(await setup[_0x447147(0x262)](this,'ðŸ””\x20Dies\x20ist\x20ein\x20Test\x20von\x20Cogni-Living.',![],![]),this[_0x447147(0x215)](_0xe4f537[_0x447147(0x1e9)],_0xe4f537['command'],{'success':!![],'message':_0x447147(0x20d)},_0xe4f537[_0x447147(0x25a)]));}}}}}}}}}async[a0_0x1bd7eb(0x20c)](){const _0x87e7fa=a0_0x1bd7eb;try{const _0x238e9e=await this['getStateAsync'](setup[_0x87e7fa(0x1f8)]);_0x238e9e&&_0x238e9e[_0x87e7fa(0x20f)]&&Object[_0x87e7fa(0x248)](setup[_0x87e7fa(0x213)])[_0x87e7fa(0x280)](_0x238e9e['val'])?this[_0x87e7fa(0x238)]=_0x238e9e[_0x87e7fa(0x20f)]:(this[_0x87e7fa(0x238)]=setup[_0x87e7fa(0x213)][_0x87e7fa(0x21a)],await this[_0x87e7fa(0x1e1)](setup[_0x87e7fa(0x1f8)],{'val':setup[_0x87e7fa(0x213)][_0x87e7fa(0x21a)],'ack':!![]}));}catch(_0x5b9139){this[_0x87e7fa(0x238)]=setup[_0x87e7fa(0x213)][_0x87e7fa(0x21a)];}}async[a0_0x1bd7eb(0x1db)](){const _0x1f5451=a0_0x1bd7eb;try{const _0x4c318d=this[_0x1f5451(0x28b)]['presenceDevices']||[];let _0x1b7581=![];const _0x44604f=[];for(const _0x40b46b of _0x4c318d){try{const _0x292fc9=await this[_0x1f5451(0x24d)](_0x40b46b);_0x292fc9&&(_0x292fc9[_0x1f5451(0x20f)]===!![]||_0x292fc9[_0x1f5451(0x20f)]==='online'||_0x292fc9['val']===0x1)&&(_0x1b7581=!![],_0x44604f[_0x1f5451(0x28d)](_0x40b46b));}catch(_0x47c54b){}}return await this['setStateAsync'](_0x1f5451(0x26c),{'val':_0x44604f[_0x1f5451(0x253)](',\x20'),'ack':!![]}),_0x1b7581&&(this[_0x1f5451(0x235)]&&(this['log'][_0x1f5451(0x2a3)](_0x1f5451(0x1f9)),recorder[_0x1f5451(0x224)](this)),!this[_0x1f5451(0x237)]&&this[_0x1f5451(0x238)]===setup[_0x1f5451(0x213)][_0x1f5451(0x21a)]&&await recorder[_0x1f5451(0x22d)](this,!![])),_0x1b7581;}catch(_0x3966c8){return![];}}async[a0_0x1bd7eb(0x270)](){const _0x416929=a0_0x1bd7eb;this[_0x416929(0x291)][_0x416929(0x1da)](_0x416929(0x282)),await aiAgent[_0x416929(0x209)](this),this[_0x416929(0x226)](),this[_0x416929(0x247)](),this['triggerEnergyPrediction']();}[a0_0x1bd7eb(0x247)](){const _0x4a815a=a0_0x1bd7eb;if(!this[_0x4a815a(0x220)])return;try{this[_0x4a815a(0x25f)]('LTM.trainingData.sequences',(_0x17e0c2,_0x40bb0c)=>{const _0xc60e84=_0x4a815a;_0x40bb0c&&_0x40bb0c[_0xc60e84(0x20f)]&&pythonBridge[_0xc60e84(0x212)](this,_0xc60e84(0x243),{'sequences':JSON[_0xc60e84(0x1fc)](_0x40bb0c[_0xc60e84(0x20f)])});});}catch(_0x502e73){}}async[a0_0x1bd7eb(0x217)](){const _0xc9a941=a0_0x1bd7eb;if(!this['isProVersion'])return;try{const _0x5e946b=await recorder[_0xc9a941(0x29d)](this);if(_0x5e946b===null)return;const _0x48d818={},_0x41208d=this[_0xc9a941(0x28b)][_0xc9a941(0x295)]||[];for(const _0x3fae42 of _0x41208d){if(_0x3fae42['type']===_0xc9a941(0x23f)&&_0x3fae42[_0xc9a941(0x28a)]){const _0x58ba5a=this['sensorLastValues'][_0x3fae42['id']];if(_0x58ba5a!==undefined)_0x48d818[_0x3fae42[_0xc9a941(0x28a)]]=_0x58ba5a;}}Object[_0xc9a941(0x255)](_0x48d818)[_0xc9a941(0x274)]>0x0&&pythonBridge['send'](this,_0xc9a941(0x21c),{'current_temps':_0x48d818,'t_out':_0x5e946b});}catch(_0x21c77d){}}[a0_0x1bd7eb(0x226)](){const _0x2d8d66=a0_0x1bd7eb;if(!this[_0x2d8d66(0x245)]||this[_0x2d8d66(0x245)][_0x2d8d66(0x274)]===0x0)return;const _0x597272=new Array(0x60)['fill'](0x0),_0x888db0=new Date()[_0x2d8d66(0x25b)](0x0,0x0,0x0,0x0);this[_0x2d8d66(0x245)][_0x2d8d66(0x272)](_0x2c3874=>{const _0x5c92ef=_0x2d8d66,_0x6cc3fe=new Date(_0x2c3874['timestamp']);if(_0x6cc3fe[_0x5c92ef(0x219)]()>=_0x888db0){const _0x367957=_0x6cc3fe[_0x5c92ef(0x250)](),_0x2b8888=_0x6cc3fe[_0x5c92ef(0x203)](),_0x45e780=_0x367957*0x4+Math['floor'](_0x2b8888/0xf);if(_0x45e780>=0x0&&_0x45e780<0x60)_0x597272[_0x45e780]++;}}),this[_0x2d8d66(0x1e1)](_0x2d8d66(0x294),{'val':JSON[_0x2d8d66(0x206)](_0x597272),'ack':!![]});}[a0_0x1bd7eb(0x1f7)](){const _0x3f62c3=a0_0x1bd7eb;if(!this[_0x3f62c3(0x290)]||this[_0x3f62c3(0x290)][_0x3f62c3(0x274)]<0x2)return;const _0x332c50=this[_0x3f62c3(0x290)][_0x3f62c3(0x29c)](_0x50fc51=>{const _0x153776=_0x3f62c3,_0x3a1278=(_0x50fc51['activityLevel']||'')[_0x153776(0x22a)]();return ACTIVITY_LEVEL_MAP[_0x3a1278]||0x32;});pythonBridge[_0x3f62c3(0x212)](this,_0x3f62c3(0x273),{'values':_0x332c50,'tag':_0x3f62c3(0x26d)});}}if(require[a0_0x1bd7eb(0x1fb)]!==module)module[a0_0x1bd7eb(0x285)]=_0x27bf9a=>new CogniLiving(_0x27bf9a);else new CogniLiving();