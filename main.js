const a0_0x4459c1=a0_0x4777;(function(_0x20c6cd,_0x3faff3){const _0x6b934a=a0_0x4777,_0x21eafb=_0x20c6cd();while(!![]){try{const _0x5d9859=parseInt(_0x6b934a(0x1e6))/0x1+parseInt(_0x6b934a(0x241))/0x2*(-parseInt(_0x6b934a(0x25d))/0x3)+-parseInt(_0x6b934a(0x1f0))/0x4*(-parseInt(_0x6b934a(0x2d8))/0x5)+parseInt(_0x6b934a(0x2a5))/0x6*(parseInt(_0x6b934a(0x295))/0x7)+-parseInt(_0x6b934a(0x206))/0x8+parseInt(_0x6b934a(0x2ba))/0x9+parseInt(_0x6b934a(0x285))/0xa;if(_0x5d9859===_0x3faff3)break;else _0x21eafb['push'](_0x21eafb['shift']());}catch(_0x29d1d6){_0x21eafb['push'](_0x21eafb['shift']());}}}(a0_0x3420,0x407d5));const a0_0x325cd7=(function(){let _0x5bbcfd=!![];return function(_0xe27cef,_0x4f9dc1){const _0xef398c=_0x5bbcfd?function(){if(_0x4f9dc1){const _0x1ac040=_0x4f9dc1['apply'](_0xe27cef,arguments);return _0x4f9dc1=null,_0x1ac040;}}:function(){};return _0x5bbcfd=![],_0xef398c;};}()),a0_0x3bf183=a0_0x325cd7(this,function(){const _0x4ee004=a0_0x4777;return a0_0x3bf183[_0x4ee004(0x288)]()[_0x4ee004(0x2b8)](_0x4ee004(0x286))[_0x4ee004(0x288)]()['constructor'](a0_0x3bf183)['search'](_0x4ee004(0x286));});a0_0x3bf183();function a0_0x3420(){const _0x38529c=['forEach','automation.triggerAction','message','\x20rooms\x20(preventing\x20Cold\x20Start\x20Amnesia).','security.alarm_triggered','2341860FWDlJB','(((.+)+)+)+$','handleInfrasound','toString','ðŸ””\x20Dies\x20ist\x20ein\x20Test\x20von\x20Cogni-Living.','info','join','isArray','name','geminiModel','checkWifiPresence','useWeather','endsWith','cleanupGhostInterventions','main','Current.WeatherText','46977DBPtue','clear','setupModeResetScheduler','LTM.triggerDailyDigest','location','setStateAsync','analysis.health.gaitSensors','abs','SYSTEM_DP_MODE','[Infrasound]\x20ðŸš¨\x20ALARM\x20TRIGGERED!\x20Pressure\x20Wave:\x20','createAllObjects','ANALYZE_GAIT','checkCalendarTriggers','monitorEnforcements','resetRLPenalty','@google/generative-ai','42qlmLBr','sunny','Key\x20not\x20found\x20or\x20not\x20provided','NextHours.Location_1.Day_1.current.symbol_desc','callback','[Forensics]\x20Save\x20failed:\x20','keys','cogni-living','some','config','scanThermostats','presenceDevices','checkLicense','Sec-Training\x20started...','sensorLastValues','Kein\x20API\x20Key\x20Ã¼bergeben','OPTIMIZE_ENERGY','pressureBuffer','SET_TOPOLOGY','search','toLowerCase','1780794tpIqre','scores','role','analysisTimer','LTM.baselineStatus','Guest\x20Mode','.system.mode','Active\x20Ventilation\x20Alerts','Warm-Up\x20Target\x20Temps\x20(JSON)','@iobroker/adapter-core','analysis.automation.patternDetected','./lib/scheduler','ack','onUnload','timestamp','eventHistory','LTM.trainingData.sequences','loadSystemMode','createDailyDigest','parse','values','SYSTEM_MODES','CALIB','setHours','Fenster\x20geÃ¶ffnet:\x20','sendNotification','Daten\x20nicht\x20verfÃ¼gbar','bootTime','stopService','devices','156445JhYpEe','ANOMALY\x20(Real\x20Threat?)','protectAiMemory','testApiKey','runGeminiAnalysis','scanDevices','analysis.automation.autoApply','lastTrackerEventTime','isProVersion','log','Party\x20Mode','trackerEnabled','bind','getStateAsync','Kein\x20Kalender-Adapter','dependencyInstallInProgress','error','matrix','motion','geminiApiKey','onMessage','analysis.training.triggerHealth','currentSystemMode','stateChange','application/json','dailyDigests','pop','push','Sensors\x20used\x20for\x20Gait\x20Analysis','forecast.current.weather','analysis.security.infrasoundLog','\x20hPa\x20(Threshold:\x20','analysis.automation.targetId','modeResetJob','Heizung\x20kann\x20','enum.rooms.*','warn','getOverviewData','MATCH\x20(False\x20Positive)','notifyTelegramInstance','testContext','command','ALARM','./lib/topology','runPythonHealthCheck','Nuukanni\x20Security','{\x22default\x22:\x2021}','LTM.trainingData.thermodynamics','state','testNotification','string','.data.table','NORMAL','infrasoundLocked','getGenerativeModel','analysis.energy.mpcActive','enum','INTERNAL','analysis.energy.warmupTargets','communicate.request','setObjectNotExistsAsync','getState','analysis.automation.targetValue','minutes_safe','infrasoundSensorId','\x20Tage)','split','subscribeStates','subscribeForeignStatesAsync','analysis.energy.ventilationAlerts','startSystem','analysis.training.triggerEnergy','door','setupLtmScheduler','calendarInstance','getOutsideTemperatureNumeric','[Forensics]\x20Infrasound\x20Event\x20correlated:\x20','setState','healthTrendInterval','analyzeWindowOpening','telegram','119489PYUfrR','initSystemConfig','./lib/automation',')\x20-\x20Phase\x20D\x20(Forensic\x20Calibration)','send','triggerEnergyPrediction','analysis.energy.insulationScore','SET_LEARNING_MODE','./lib/installer','Memory\x20Hydration\x20Failed:\x20','32pGzfGB','analysis.training.triggerComfort','onStateChange','getHours','appendToLog','analysis.automation.description','getForeignStateAsync','WiFi\x20Presence\x20detected.','floor','from','startService','LTM.rawEventLog','klar','subscribeForeignStates','memoryCache','now','notifyTelegramEnabled','TRAIN_SECURITY','triggerBriefing','generateContent','_calName','map','2113032mdSlSK','system.adapter.','./lib/ai_agent','notifyPushoverInstance','val','isPresent','Activity-Level','updateTopology','times','daswetter.0','includes','system.presenceWho','setupBriefingScheduler','ðŸŽ“\x20[RL-RESET]\x20Lern-Sperre\x20(Penalty)\x20fÃ¼r\x20\x27','isSolar','analysisInterval','sendMorningBriefing','analysis.training.triggerSecurity','TRACK_EVENT','onReady','add','sort','PINN\x20AI\x20Forecast','updateTopologyMatrix','Gait\x20Speed\x20Calculation\x20Proof','heiter','Fehler:\x20','analysis.energy.warmupSources','json','genAI','getMinutes','simulateButler','updated','getLtmData','checkSolarCondition','analysis.energy.rlPenalties','systemConfig','system.mode','fill','â¤ï¸\x20Auto-Heartbeat:\x20Aktualisiere\x20Gesundheits-Trends...','runBaselineDriftAnalysis','[Infrasound]\x20ðŸŸ¡\x20Debug-Mode:\x20Alarm\x20detected\x20but\x20suppressed\x20because\x20presence=true.','getForeignObjectsAsync','instance','ðŸ§ \x20Memory\x20Protection:\x20Restoring\x20persisted\x20AI-Calculations\x20(preventing\x20\x27Cold\x20Start\x27\x20amnesia).','analysis.energy.warmupTimes','number','briefingJob','unload','sonn','sendTo','Warm-Up\x20Time\x20(Minutes\x20to\x20Target)','LTM.dailyDigests','toFixed','temperature','getForeignObjectAsync','cancel','Notification\x20Test\x20Failed:\x20','type','68DvKCLW','inactivityThresholdHours','Verbunden','updateHealthVector','PYTHON_EXE','rawEventLog','stringify','.communicate.request','simulateEnergyMPC','triggerGaitAnalysis','manual','setupDriftAnalysisScheduler','value','Standard','analysis.health.activityTrend','thermostat','debug','activityLevel','abortExitTimer','slice','analysis.energy.pinnForecast','infrasoundThreshold','Keine\x20Sensor-AktivitÃ¤t','magnet','Simulation\x20durch\x20Admin\x20(Test)','analysis.automation.triggerAction','./lib/scanner','analysis.training.triggerTopology','28284wxhqLW','analysis.training.status','exports','getCalendarNames','./lib/python_bridge','getTime','ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...','object','analysis.topology.structure','infrasoundArmingId','exitTimer','analysisHistory','version','\x20hPa.\x20Einbruch\x20wahrscheinlich.','driftAnalysisTimer','response','triggerInfrasoundCorrelation','text','length','calendarName','\x20opened.\x20Peak\x20Pressure:\x20','sensor.window','trackerHeartbeat','runAutopilot','ltmJob','common','\x20hPa\x20(Limit:\x20','window','infrasoundEnabled','minDaysForBaseline','setPresence','\x27\x20wurde\x20manuell\x20vom\x20Benutzer\x20gelÃ¶scht.','enum.functions.*','Keine\x20Antwort\x20von\x20Gemini','guest'];a0_0x3420=function(){return _0x38529c;};return a0_0x3420();}function a0_0x4777(_0x57f088,_0x5638ce){const _0x36e916=a0_0x3420();return a0_0x4777=function(_0x3bf183,_0x325cd7){_0x3bf183=_0x3bf183-0x19c;let _0x34205f=_0x36e916[_0x3bf183];return _0x34205f;},a0_0x4777(_0x57f088,_0x5638ce);}'use strict';const utils=require(a0_0x4459c1(0x2c3)),{GoogleGenerativeAI}=require(a0_0x4459c1(0x2a4)),installer=require(a0_0x4459c1(0x1ee)),scanner=require(a0_0x4459c1(0x25b)),schedulers=require(a0_0x4459c1(0x2c5)),topology=require(a0_0x4459c1(0x1c0)),setup=require('./lib/setup'),recorder=require('./lib/recorder'),pythonBridge=require(a0_0x4459c1(0x261)),aiAgent=require(a0_0x4459c1(0x208)),deadMan=require('./lib/dead_man'),automation=require(a0_0x4459c1(0x1e8)),GEMINI_MODEL='models/gemini-flash-latest',ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};class CogniLiving extends utils['Adapter']{constructor(_0x1b826d){const _0x574b7f=a0_0x4459c1;super({..._0x1b826d,'name':_0x574b7f(0x2ac)}),this[_0x574b7f(0x2c9)]=[],this['analysisHistory']=[],this['rawEventLog']=[],this[_0x574b7f(0x1ae)]=[],this['sensorLastValues']={},this[_0x574b7f(0x22a)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x574b7f(0x20b)]=!![],this[_0x574b7f(0x267)]=null,this['exitGraceTimer']=null,this['isGracePeriodActive']=![],this[_0x574b7f(0x223)]=null,this[_0x574b7f(0x28e)]=null,this[_0x574b7f(0x1ab)]=setup[_0x574b7f(0x2cf)][_0x574b7f(0x1c9)],this[_0x574b7f(0x19d)]=![],this['lastAlertState']=![],this[_0x574b7f(0x2bd)]=null,this[_0x574b7f(0x275)]=null,this[_0x574b7f(0x1b6)]=null,this[_0x574b7f(0x26b)]=null,this[_0x574b7f(0x235)]=null,this[_0x574b7f(0x273)]=null,this[_0x574b7f(0x1e3)]=null,this[_0x574b7f(0x1a4)]=![],this[_0x574b7f(0x19c)]=Date[_0x574b7f(0x1ff)](),this[_0x574b7f(0x1fe)]=null,this[_0x574b7f(0x2d5)]=Date[_0x574b7f(0x1ff)](),this[_0x574b7f(0x1ca)]=![],this[_0x574b7f(0x2b6)]=[],this['on']('ready',this[_0x574b7f(0x219)][_0x574b7f(0x1a1)](this)),this['on'](_0x574b7f(0x1ac),this[_0x574b7f(0x1f2)]['bind'](this)),this['on'](_0x574b7f(0x236),this[_0x574b7f(0x2c7)][_0x574b7f(0x1a1)](this)),this['on'](_0x574b7f(0x282),this[_0x574b7f(0x1a9)][_0x574b7f(0x1a1)](this));}async[a0_0x4459c1(0x219)](){const _0x6ec1da=a0_0x4459c1;this[_0x6ec1da(0x19e)][_0x6ec1da(0x28a)]('cogni-living\x20adapter\x20starting\x20(v'+this[_0x6ec1da(0x269)]+_0x6ec1da(0x1e9));if(!installer['checkAndInstall'](this,()=>this[_0x6ec1da(0x1db)]()))return;}async[a0_0x4459c1(0x1db)](){const _0x2c9fde=a0_0x4459c1;await setup['initZombies'](this);try{this[_0x2c9fde(0x19d)]=await setup[_0x2c9fde(0x2b1)](this[_0x2c9fde(0x2ae)]['licenseKey']);}catch(_0x5781b7){}if(!this[_0x2c9fde(0x2ae)][_0x2c9fde(0x242)]||this[_0x2c9fde(0x2ae)][_0x2c9fde(0x242)]<0.1)this[_0x2c9fde(0x2ae)][_0x2c9fde(0x242)]=0xc;await setup['initHistory'](this),await setup[_0x2c9fde(0x1e7)](this);try{const _0x16d6f3=await this[_0x2c9fde(0x1a2)]('analysis.energy.warmupTimes'),_0x2e845a=await this[_0x2c9fde(0x1a2)]('analysis.energy.warmupSources');_0x16d6f3&&_0x16d6f3[_0x2c9fde(0x20a)]&&_0x2e845a&&_0x2e845a[_0x2c9fde(0x20a)]&&(Date[_0x2c9fde(0x1ff)]()-_0x16d6f3['ts']<0x4*0xe10*0x3e8&&(this[_0x2c9fde(0x1fe)]={'times':JSON[_0x2c9fde(0x2cd)](_0x16d6f3[_0x2c9fde(0x20a)]),'sources':JSON[_0x2c9fde(0x2cd)](_0x2e845a[_0x2c9fde(0x20a)])},this[_0x2c9fde(0x19e)][_0x2c9fde(0x28a)]('ðŸ§ \x20Memory:\x20Cache\x20hydrated\x20with\x20'+Object[_0x2c9fde(0x2ab)](this['memoryCache'][_0x2c9fde(0x20e)])[_0x2c9fde(0x26f)]+_0x2c9fde(0x283))));}catch(_0x55a28d){this[_0x2c9fde(0x19e)][_0x2c9fde(0x1b9)](_0x2c9fde(0x1ef)+_0x55a28d['message']);}if(this[_0x2c9fde(0x2ae)][_0x2c9fde(0x1a8)])try{this[_0x2c9fde(0x223)]=new GoogleGenerativeAI(this[_0x2c9fde(0x2ae)][_0x2c9fde(0x1a8)]),this[_0x2c9fde(0x28e)]=this['genAI'][_0x2c9fde(0x1cb)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x2c9fde(0x1ad)}}),this[_0x2c9fde(0x19e)]['info']('Gemini\x20AI\x20initialized.');}catch(_0x2b755f){this[_0x2c9fde(0x19e)]['error']('Gemini\x20Init\x20Error:\x20'+_0x2b755f[_0x2c9fde(0x282)]);}await setup[_0x2c9fde(0x29f)](this),await this['loadSystemMode'](),await this[_0x2c9fde(0x1d1)](_0x2c9fde(0x255),{'type':_0x2c9fde(0x1c5),'common':{'name':_0x2c9fde(0x21c),'type':'string','role':_0x2c9fde(0x222),'read':!![],'write':![]},'native':{}}),await this[_0x2c9fde(0x1d1)](_0x2c9fde(0x1da),{'type':_0x2c9fde(0x1c5),'common':{'name':_0x2c9fde(0x2c1),'type':'string','role':_0x2c9fde(0x222),'read':!![],'write':![]},'native':{}}),await this[_0x2c9fde(0x1d1)](_0x2c9fde(0x233),{'type':_0x2c9fde(0x1c5),'common':{'name':_0x2c9fde(0x239),'type':_0x2c9fde(0x1c7),'role':_0x2c9fde(0x222),'read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x2c9fde(0x1cf),{'type':_0x2c9fde(0x1c5),'common':{'name':_0x2c9fde(0x2c2),'type':_0x2c9fde(0x1c7),'role':_0x2c9fde(0x222),'read':!![],'write':!![],'def':_0x2c9fde(0x1c3)},'native':{}}),await this[_0x2c9fde(0x1d1)]('analysis.energy.rlPenalties',{'type':_0x2c9fde(0x1c5),'common':{'name':'Reinforcement\x20Learning\x20Penalties','type':_0x2c9fde(0x1c7),'role':_0x2c9fde(0x222),'read':!![],'write':![],'def':'{}'},'native':{}}),await this[_0x2c9fde(0x1d1)](_0x2c9fde(0x24f),{'type':_0x2c9fde(0x1c5),'common':{'name':'General\x20Activity\x20Trend\x20(%)','type':_0x2c9fde(0x234),'role':_0x2c9fde(0x24d),'unit':'%','read':!![],'write':![]},'native':{}}),await this[_0x2c9fde(0x1d1)](_0x2c9fde(0x29b),{'type':_0x2c9fde(0x1c5),'common':{'name':_0x2c9fde(0x1b1),'type':_0x2c9fde(0x1c7),'role':_0x2c9fde(0x26e),'read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync']('analysis.energy.activeEnforcements',{'type':_0x2c9fde(0x1c5),'common':{'name':'Active\x20Calendar\x20Enforcements\x20(Locks)','type':_0x2c9fde(0x1c7),'role':_0x2c9fde(0x222),'read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x2c9fde(0x1d1)](_0x2c9fde(0x1b3),{'type':'state','common':{'name':'Forensic\x20Infrasound\x20Log','type':_0x2c9fde(0x1c7),'role':_0x2c9fde(0x222),'read':!![],'write':![],'def':'[]'},'native':{}}),await this['setObjectNotExistsAsync']('analysis.health.gaitDebug',{'type':_0x2c9fde(0x1c5),'common':{'name':_0x2c9fde(0x21e),'type':_0x2c9fde(0x1c7),'role':_0x2c9fde(0x26e),'read':!![],'write':![]},'native':{}});try{const _0x44f798=await this[_0x2c9fde(0x1a2)](_0x2c9fde(0x1fb));if(_0x44f798&&_0x44f798[_0x2c9fde(0x20a)])this['rawEventLog']=JSON[_0x2c9fde(0x2cd)](_0x44f798['val']);}catch(_0x3fe764){this['rawEventLog']=[];}try{const _0x24f4e3=await this[_0x2c9fde(0x1a2)](_0x2c9fde(0x23a));if(_0x24f4e3&&_0x24f4e3[_0x2c9fde(0x20a)])this[_0x2c9fde(0x1ae)]=JSON['parse'](_0x24f4e3[_0x2c9fde(0x20a)]);}catch(_0x8fe931){this['dailyDigests']=[];}const _0xab226c=this[_0x2c9fde(0x1ae)][_0x2c9fde(0x26f)]>=(this[_0x2c9fde(0x2ae)][_0x2c9fde(0x27a)]||0x7)?'Aktiv\x20('+this['dailyDigests'][_0x2c9fde(0x26f)]+_0x2c9fde(0x1d6):'Lernphase\x20('+this[_0x2c9fde(0x1ae)][_0x2c9fde(0x26f)]+'/'+(this[_0x2c9fde(0x2ae)][_0x2c9fde(0x27a)]||0x7)+')';await this[_0x2c9fde(0x29a)](_0x2c9fde(0x2be),{'val':_0xab226c,'ack':!![]}),this[_0x2c9fde(0x1d8)]('analysis.trigger'),this['subscribeStates'](_0x2c9fde(0x298)),this[_0x2c9fde(0x1d8)](_0x2c9fde(0x22b)),this[_0x2c9fde(0x1d8)]('analysis.triggerBriefing'),this[_0x2c9fde(0x1d8)](_0x2c9fde(0x25a)),this['subscribeStates'](_0x2c9fde(0x2de)),this[_0x2c9fde(0x1d8)](_0x2c9fde(0x217)),this[_0x2c9fde(0x1d8)](_0x2c9fde(0x1aa)),this[_0x2c9fde(0x1d8)](_0x2c9fde(0x1dc)),this[_0x2c9fde(0x1d8)]('analysis.training.triggerComfort'),this['subscribeStates'](_0x2c9fde(0x25c)),this[_0x2c9fde(0x1d8)](_0x2c9fde(0x1cc)),this[_0x2c9fde(0x1d8)](_0x2c9fde(0x221));this['config'][_0x2c9fde(0x279)]&&this[_0x2c9fde(0x2ae)][_0x2c9fde(0x1d5)]&&(this[_0x2c9fde(0x19e)][_0x2c9fde(0x28a)]('[Infrasound]\x20Subscribing\x20to\x20external\x20sensor:\x20'+this['config'][_0x2c9fde(0x1d5)]),this[_0x2c9fde(0x1fd)](this[_0x2c9fde(0x2ae)]['infrasoundSensorId']));const _0x237e27=this[_0x2c9fde(0x2ae)][_0x2c9fde(0x2d7)];if(_0x237e27)for(const _0x499121 of _0x237e27){await this['subscribeForeignStatesAsync'](_0x499121['id']);}const _0x2a0749=this[_0x2c9fde(0x2ae)][_0x2c9fde(0x2b0)];if(_0x2a0749)for(const _0x25df0b of _0x2a0749){await this[_0x2c9fde(0x1d9)](_0x25df0b);}if(this['config'][_0x2c9fde(0x200)]&&this[_0x2c9fde(0x2ae)][_0x2c9fde(0x1bc)])await this[_0x2c9fde(0x1d9)](this['config']['notifyTelegramInstance']+_0x2c9fde(0x248));setTimeout(()=>this[_0x2c9fde(0x28f)](),0x1388);if(this['analysisTimer'])clearInterval(this['analysisTimer']);const _0x7f7841=this['config'][_0x2c9fde(0x215)]||0xf;_0x7f7841>0x0&&(this[_0x2c9fde(0x2bd)]=setInterval(()=>{const _0x92ddc=_0x2c9fde;this[_0x92ddc(0x274)](),automation['checkCalendarTriggers'](this),automation['monitorEnforcements'](this);},_0x7f7841*0x3c*0x3e8));setTimeout(()=>{const _0x3ea7ff=_0x2c9fde;automation[_0x3ea7ff(0x2a1)](this),automation[_0x3ea7ff(0x2a2)](this);},0x2710);this['config'][_0x2c9fde(0x1a0)]!==![]&&(this[_0x2c9fde(0x273)]=setInterval(()=>{const _0x4afd18=_0x2c9fde;if(this[_0x4afd18(0x19d)]){const _0x1b9dec=Date[_0x4afd18(0x1ff)](),_0x41120f=this['lastTrackerEventTime']||_0x1b9dec,_0x3de6f4=(_0x1b9dec-_0x41120f)/0x3e8;_0x3de6f4>0x2&&(this['lastTrackerEventTime']=_0x1b9dec,pythonBridge[_0x4afd18(0x1ea)](this,_0x4afd18(0x218),{'room':null,'dt':_0x3de6f4}));}},0xbb8));if(this['healthTrendInterval'])clearInterval(this[_0x2c9fde(0x1e3)]);this[_0x2c9fde(0x1e3)]=setInterval(()=>{const _0x2b36ba=_0x2c9fde;this[_0x2b36ba(0x19d)]&&(this['log'][_0x2b36ba(0x28a)](_0x2b36ba(0x22d)),this[_0x2b36ba(0x1c1)]());},0x4*0x3c*0x3c*0x3e8),schedulers[_0x2c9fde(0x1de)](this,()=>aiAgent[_0x2c9fde(0x2cc)](this,pythonBridge)),schedulers[_0x2c9fde(0x297)](this),schedulers[_0x2c9fde(0x24c)](this,()=>aiAgent[_0x2c9fde(0x22e)](this)),schedulers[_0x2c9fde(0x212)](this,()=>aiAgent[_0x2c9fde(0x216)](this)),pythonBridge[_0x2c9fde(0x1fa)](this,installer[_0x2c9fde(0x245)]),setTimeout(async()=>{const _0x2f3ea6=_0x2c9fde;await topology[_0x2f3ea6(0x20d)](this);try{const _0x184377=await this[_0x2f3ea6(0x1a2)]('analysis.topology.structure');if(_0x184377&&_0x184377[_0x2f3ea6(0x20a)])pythonBridge[_0x2f3ea6(0x1ea)](this,_0x2f3ea6(0x2b7),JSON[_0x2f3ea6(0x2cd)](_0x184377[_0x2f3ea6(0x20a)]));}catch(_0x1ee7a0){}this[_0x2f3ea6(0x1c1)](),this[_0x2f3ea6(0x24a)](),this[_0x2f3ea6(0x1eb)](),this[_0x2f3ea6(0x244)]();},0x1388);}[a0_0x4459c1(0x2c7)](_0x3614aa){const _0x53c5df=a0_0x4459c1;if(this[_0x53c5df(0x2bd)])clearInterval(this[_0x53c5df(0x2bd)]);if(this[_0x53c5df(0x26b)])clearInterval(this[_0x53c5df(0x26b)]);if(this[_0x53c5df(0x273)])clearInterval(this[_0x53c5df(0x273)]);if(this[_0x53c5df(0x1e3)])clearInterval(this[_0x53c5df(0x1e3)]);if(this[_0x53c5df(0x275)])this[_0x53c5df(0x275)][_0x53c5df(0x23e)]();if(this['modeResetJob'])this[_0x53c5df(0x1b6)][_0x53c5df(0x23e)]();if(this[_0x53c5df(0x235)])this[_0x53c5df(0x235)][_0x53c5df(0x23e)]();recorder['abortExitTimer'](this),pythonBridge[_0x53c5df(0x2d6)](this),_0x3614aa();}async[a0_0x4459c1(0x1f2)](_0x551ba8,_0x2b2f1b){const _0xfa34fc=a0_0x4459c1;if(!_0x2b2f1b||this[_0xfa34fc(0x1a4)])return;if(_0x551ba8[_0xfa34fc(0x210)](_0xfa34fc(0x1e5))&&_0x551ba8[_0xfa34fc(0x291)](_0xfa34fc(0x1d0))&&_0x2b2f1b['val'])return;if(this[_0xfa34fc(0x2ae)][_0xfa34fc(0x279)]&&_0x551ba8===this['config'][_0xfa34fc(0x1d5)]){this[_0xfa34fc(0x287)](_0x2b2f1b[_0xfa34fc(0x20a)]);return;}if(_0x551ba8===this['namespace']+_0xfa34fc(0x2c0)){if(_0x2b2f1b[_0xfa34fc(0x20a)]&&Object[_0xfa34fc(0x2ce)](setup[_0xfa34fc(0x2cf)])[_0xfa34fc(0x210)](_0x2b2f1b[_0xfa34fc(0x20a)])){this[_0xfa34fc(0x1ab)]=_0x2b2f1b[_0xfa34fc(0x20a)];if(_0x2b2f1b[_0xfa34fc(0x20a)]===setup['SYSTEM_MODES']['VACATION'])await recorder[_0xfa34fc(0x27b)](this,![]);else await recorder['setPresence'](this,!![]);if(this[_0xfa34fc(0x19d)]){let _0x4b3fa3=![],_0x4ed3e9=0x0,_0x31a35d=_0xfa34fc(0x24b);if(this[_0xfa34fc(0x1ab)]==='party')_0x4b3fa3=!![],_0x4ed3e9=0x168,_0x31a35d=_0xfa34fc(0x19f);else this[_0xfa34fc(0x1ab)]===_0xfa34fc(0x27f)&&(_0x4b3fa3=!![],_0x4ed3e9=0x5a0,_0x31a35d=_0xfa34fc(0x2bf));pythonBridge[_0xfa34fc(0x1ea)](this,_0xfa34fc(0x1ed),{'active':_0x4b3fa3,'duration':_0x4ed3e9,'label':_0x31a35d}),await this[_0xfa34fc(0x29a)]('analysis.security.learningStatus',{'val':JSON[_0xfa34fc(0x247)]({'active':_0x4b3fa3,'label':_0x31a35d,'timestamp':Date[_0xfa34fc(0x1ff)]()}),'ack':!![]});}}if(!_0x2b2f1b['ack'])this[_0xfa34fc(0x1e2)](_0x551ba8,{'val':this[_0xfa34fc(0x1ab)],'ack':!![]});return;}_0x551ba8['endsWith'](_0xfa34fc(0x221))&&_0x2b2f1b[_0xfa34fc(0x2c6)]&&this[_0xfa34fc(0x2da)](_0x2b2f1b[_0xfa34fc(0x20a)]);if(!_0x2b2f1b[_0xfa34fc(0x2c6)]){if(_0x551ba8[_0xfa34fc(0x210)]('analysis.trigger')&&_0x2b2f1b[_0xfa34fc(0x20a)]){this[_0xfa34fc(0x1e2)](_0x551ba8,{'val':![],'ack':!![]}),aiAgent['runGeminiAnalysis'](this);return;}if(_0x551ba8['includes']('triggerDailyDigest')&&_0x2b2f1b[_0xfa34fc(0x20a)]){this[_0xfa34fc(0x1e2)](_0x551ba8,{'val':![],'ack':!![]});if(this['isProVersion'])aiAgent['createDailyDigest'](this,pythonBridge);return;}if(_0x551ba8[_0xfa34fc(0x210)](_0xfa34fc(0x202))&&_0x2b2f1b[_0xfa34fc(0x20a)]){this[_0xfa34fc(0x1e2)](_0x551ba8,{'val':![],'ack':!![]}),aiAgent[_0xfa34fc(0x216)](this);return;}if(_0x551ba8[_0xfa34fc(0x210)](_0xfa34fc(0x281))&&_0x2b2f1b[_0xfa34fc(0x20a)]){this[_0xfa34fc(0x1e2)](_0x551ba8,{'val':![],'ack':!![]}),aiAgent['executeAutomationAction'](this);return;}if(_0x551ba8[_0xfa34fc(0x210)]('analysis.training.triggerSecurity')&&_0x2b2f1b['val']){this['setState'](_0x551ba8,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x2891a7=await this[_0xfa34fc(0x1a2)]('LTM.trainingData.sequences');if(_0x2891a7&&_0x2891a7['val']){const _0x381073=JSON[_0xfa34fc(0x2cd)](_0x2891a7['val']);this[_0xfa34fc(0x29a)](_0xfa34fc(0x25e),{'val':_0xfa34fc(0x2b2),'ack':!![]}),pythonBridge[_0xfa34fc(0x1ea)](this,_0xfa34fc(0x201),{'sequences':_0x381073});}}catch(_0x1788d3){}return;}if(_0x551ba8[_0xfa34fc(0x210)](_0xfa34fc(0x1aa))&&_0x2b2f1b[_0xfa34fc(0x20a)]){this[_0xfa34fc(0x1e2)](_0x551ba8,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x25e221=await this[_0xfa34fc(0x1a2)](_0xfa34fc(0x23a));if(_0x25e221&&_0x25e221['val'])pythonBridge[_0xfa34fc(0x1ea)](this,'TRAIN_HEALTH',{'digests':JSON[_0xfa34fc(0x2cd)](_0x25e221['val'])});}catch(_0x52a6cb){}return;}if(_0x551ba8[_0xfa34fc(0x210)](_0xfa34fc(0x1dc))&&_0x2b2f1b['val']){this['setState'](_0x551ba8,{'val':![],'ack':!![]});if(this[_0xfa34fc(0x19d)])try{const _0x4ed209=await this[_0xfa34fc(0x1a2)](_0xfa34fc(0x1c4));if(_0x4ed209&&_0x4ed209[_0xfa34fc(0x20a)])pythonBridge[_0xfa34fc(0x1ea)](this,'TRAIN_ENERGY',{'points':JSON[_0xfa34fc(0x2cd)](_0x4ed209[_0xfa34fc(0x20a)])});}catch(_0x1e15f4){}return;}if(_0x551ba8[_0xfa34fc(0x210)](_0xfa34fc(0x1f1))&&_0x2b2f1b[_0xfa34fc(0x20a)]){this[_0xfa34fc(0x1e2)](_0x551ba8,{'val':![],'ack':!![]});if(this[_0xfa34fc(0x19d)])try{const _0x823e19=await this['getStateAsync'](_0xfa34fc(0x1fb));if(_0x823e19&&_0x823e19[_0xfa34fc(0x20a)])pythonBridge[_0xfa34fc(0x1ea)](this,'TRAIN_COMFORT',{'events':JSON[_0xfa34fc(0x2cd)](_0x823e19[_0xfa34fc(0x20a)])});}catch(_0x1ca89a){}return;}if(_0x551ba8[_0xfa34fc(0x210)](_0xfa34fc(0x25c))&&_0x2b2f1b[_0xfa34fc(0x20a)]){this[_0xfa34fc(0x1e2)](_0x551ba8,{'val':![],'ack':!![]}),topology[_0xfa34fc(0x20d)](this);return;}}if(this[_0xfa34fc(0x2ae)][_0xfa34fc(0x2b0)]&&this[_0xfa34fc(0x2ae)]['presenceDevices']['includes'](_0x551ba8)){await this[_0xfa34fc(0x28f)]();return;}const _0x288429=(this[_0xfa34fc(0x2ae)][_0xfa34fc(0x2d7)]||[])['find'](_0x5617f7=>_0x5617f7['id']===_0x551ba8);if(_0x288429){const _0x53b859=await recorder['processSensorEvent'](this,_0x551ba8,_0x2b2f1b,_0x288429);_0x53b859&&_0x53b859['type']===_0xfa34fc(0x1a7)&&_0x53b859['location']&&this['isProVersion']&&deadMan['updateLocation'](this,_0x53b859[_0xfa34fc(0x299)]),_0x2b2f1b[_0xfa34fc(0x20a)]&&(_0x2b2f1b[_0xfa34fc(0x20a)]===!![]||_0x2b2f1b[_0xfa34fc(0x20a)]===0x1||String(_0x2b2f1b[_0xfa34fc(0x20a)])[_0xfa34fc(0x2b9)]()==='open')&&(_0x288429[_0xfa34fc(0x240)]&&(_0x288429[_0xfa34fc(0x240)][_0xfa34fc(0x210)](_0xfa34fc(0x278))||_0x288429[_0xfa34fc(0x240)][_0xfa34fc(0x210)](_0xfa34fc(0x1dd))||_0x288429[_0xfa34fc(0x240)][_0xfa34fc(0x210)](_0xfa34fc(0x258)))&&this[_0xfa34fc(0x1e4)](_0x288429)),(_0x288429[_0xfa34fc(0x240)]===_0xfa34fc(0x23c)||_0x288429[_0xfa34fc(0x240)]===_0xfa34fc(0x250))&&automation[_0xfa34fc(0x292)](this);}}async['protectAiMemory'](_0x49042f){const _0x3073a8=a0_0x4459c1;if(!this[_0x3073a8(0x1fe)]||Date[_0x3073a8(0x1ff)]()-this[_0x3073a8(0x2d5)]>0x493e0)return;if(!this['memoryCache']['sources']||!this[_0x3073a8(0x1fe)]['times'])return;try{const _0x417902=JSON[_0x3073a8(0x2cd)](_0x49042f),_0x150126=this[_0x3073a8(0x1fe)]['sources'];let _0x4cda49=![];for(const _0x5c4611 in _0x150126){if(_0x150126[_0x5c4611][_0x3073a8(0x210)]('AI')&&_0x417902[_0x5c4611]&&!_0x417902[_0x5c4611][_0x3073a8(0x210)]('AI')){_0x4cda49=!![];break;}}_0x4cda49&&(this[_0x3073a8(0x19e)][_0x3073a8(0x28a)](_0x3073a8(0x232)),await this[_0x3073a8(0x29a)](_0x3073a8(0x233),{'val':JSON[_0x3073a8(0x247)](this[_0x3073a8(0x1fe)][_0x3073a8(0x20e)]),'ack':!![]}),await this['setStateAsync'](_0x3073a8(0x221),{'val':JSON[_0x3073a8(0x247)](this[_0x3073a8(0x1fe)]['sources']),'ack':!![]}));}catch(_0x9c2604){}}async[a0_0x4459c1(0x1a9)](_0x757c9d){const _0x5f24b2=a0_0x4459c1;if(typeof _0x757c9d===_0x5f24b2(0x264)&&_0x757c9d['message']){if(_0x757c9d[_0x5f24b2(0x1be)]==='checkThermostats')try{const _0x1ce74a=await automation[_0x5f24b2(0x2af)](this);this['sendTo'](_0x757c9d['from'],_0x757c9d['command'],{'success':!![],'results':_0x1ce74a},_0x757c9d[_0x5f24b2(0x2a9)]);}catch(_0x546da8){this['sendTo'](_0x757c9d[_0x5f24b2(0x1f9)],_0x757c9d['command'],{'success':![],'error':_0x546da8['message']},_0x757c9d[_0x5f24b2(0x2a9)]);}else{if(_0x757c9d[_0x5f24b2(0x1be)]===_0x5f24b2(0x249))try{const {current_temps:_0xf1827a,t_out:_0x41ca60,targets:_0x35ab9b,t_forecast:_0x2d93dc}=_0x757c9d[_0x5f24b2(0x282)],_0x3122c4=[];let _0xc03d33={};try{const _0xd05882=await this[_0x5f24b2(0x1a2)](_0x5f24b2(0x1ec));if(_0xd05882&&_0xd05882[_0x5f24b2(0x20a)]){const _0x378cd6=JSON[_0x5f24b2(0x2cd)](_0xd05882[_0x5f24b2(0x20a)]);_0xc03d33=_0x378cd6[_0x5f24b2(0x2bb)]||_0x378cd6;}}catch(_0xa61471){}const _0x366e9c=_0x2d93dc!==undefined&&_0x2d93dc!==null?(_0x41ca60+_0x2d93dc)/0x2:_0x41ca60;for(const [_0x4133f2,_0x3cdad9]of Object['entries'](_0xf1827a)){const _0x1d47a4=_0x35ab9b[_0x4133f2]||0x15;if(_0x3cdad9<=_0x1d47a4)continue;let _0x316586=_0xc03d33[_0x4133f2]||-0.5;if(_0x316586>=0x0)_0x316586=-0.5;const _0x314272=Math['abs'](_0x316586),_0x49256a=_0x3cdad9-_0x1d47a4;let _0x23d356=Math[_0x5f24b2(0x1f8)](_0x49256a/_0x314272*0x3c);const _0x5cc603=_0x3cdad9-_0x41ca60,_0x3a7bc6=_0x3cdad9-_0x366e9c;if(_0x3a7bc6!==0x0&&_0x5cc603!==0x0){const _0x2ebb3d=_0x5cc603/_0x3a7bc6;_0x23d356=Math[_0x5f24b2(0x1f8)](_0x23d356*_0x2ebb3d);}if(_0x23d356>0xf){if(_0x23d356>0xf0)_0x23d356=0xf0;_0x3122c4['push']({'room':_0x4133f2,'minutes_safe':_0x23d356,'target':_0x1d47a4,'current':_0x3cdad9,'savings_msg':_0x5f24b2(0x1b7)+_0x23d356+'\x20min\x20ausbleiben.'});}}_0x3122c4[_0x5f24b2(0x21b)]((_0x3d3972,_0x15f422)=>_0x15f422['minutes_safe']-_0x3d3972[_0x5f24b2(0x1d4)]),this['sendTo'](_0x757c9d[_0x5f24b2(0x1f9)],_0x757c9d[_0x5f24b2(0x1be)],{'success':!![],'proposals':_0x3122c4},_0x757c9d[_0x5f24b2(0x2a9)]);}catch(_0x405830){this[_0x5f24b2(0x238)](_0x757c9d[_0x5f24b2(0x1f9)],_0x757c9d[_0x5f24b2(0x1be)],{'success':![],'error':_0x405830[_0x5f24b2(0x282)]},_0x757c9d['callback']);}else{if(_0x757c9d[_0x5f24b2(0x1be)]===_0x5f24b2(0x2a3))try{const _0x178b15=_0x757c9d[_0x5f24b2(0x282)]['key'],_0x3b270f=_0x5f24b2(0x229),_0x37e891=await this['getStateAsync'](_0x3b270f);let _0x16d024={};if(_0x37e891&&_0x37e891[_0x5f24b2(0x20a)])try{_0x16d024=JSON['parse'](_0x37e891[_0x5f24b2(0x20a)]);}catch(_0x16fe55){}_0x178b15&&_0x16d024[_0x178b15]?(delete _0x16d024[_0x178b15],await this[_0x5f24b2(0x29a)](_0x3b270f,{'val':JSON['stringify'](_0x16d024),'ack':!![]}),this[_0x5f24b2(0x19e)][_0x5f24b2(0x28a)](_0x5f24b2(0x213)+_0x178b15+_0x5f24b2(0x27c)),this[_0x5f24b2(0x238)](_0x757c9d['from'],_0x757c9d[_0x5f24b2(0x1be)],{'success':!![]},_0x757c9d[_0x5f24b2(0x2a9)])):this[_0x5f24b2(0x238)](_0x757c9d[_0x5f24b2(0x1f9)],_0x757c9d[_0x5f24b2(0x1be)],{'success':![],'error':_0x5f24b2(0x2a7)},_0x757c9d[_0x5f24b2(0x2a9)]);}catch(_0x19987b){this['sendTo'](_0x757c9d[_0x5f24b2(0x1f9)],_0x757c9d[_0x5f24b2(0x1be)],{'success':![],'error':_0x19987b['message']},_0x757c9d['callback']);}else{if(_0x757c9d[_0x5f24b2(0x1be)]==='dismissAutomation')await this['setStateAsync'](_0x5f24b2(0x2c4),{'val':![],'ack':!![]}),await this[_0x5f24b2(0x29a)]('analysis.automation.description',{'val':'','ack':!![]}),await this[_0x5f24b2(0x29a)]('analysis.automation.targetId',{'val':'','ack':!![]}),this[_0x5f24b2(0x238)](_0x757c9d[_0x5f24b2(0x1f9)],_0x757c9d[_0x5f24b2(0x1be)],{'success':!![]},_0x757c9d[_0x5f24b2(0x2a9)]);else{if(_0x757c9d[_0x5f24b2(0x1be)]===_0x5f24b2(0x225)){const {targetId:_0x5560e9,targetValue:_0x87db16}=_0x757c9d[_0x5f24b2(0x282)];await this[_0x5f24b2(0x29a)](_0x5f24b2(0x2c4),{'val':!![],'ack':!![]}),await this[_0x5f24b2(0x29a)](_0x5f24b2(0x1f5),{'val':_0x5f24b2(0x259),'ack':!![]}),await this[_0x5f24b2(0x29a)](_0x5f24b2(0x1b5),{'val':_0x5560e9,'ack':!![]}),await this[_0x5f24b2(0x29a)](_0x5f24b2(0x1d3),{'val':String(_0x87db16),'ack':!![]}),this['sendTo'](_0x757c9d['from'],_0x757c9d[_0x5f24b2(0x1be)],{'success':!![]},_0x757c9d[_0x5f24b2(0x2a9)]);}else{if(_0x757c9d[_0x5f24b2(0x1be)]===_0x5f24b2(0x2db))try{const _0x2b8ef9=_0x757c9d['message']['apiKey'];if(!_0x2b8ef9)throw new Error(_0x5f24b2(0x2b4));const _0x28ed15=new GoogleGenerativeAI(_0x2b8ef9),_0x462c9b=_0x28ed15[_0x5f24b2(0x1cb)]({'model':GEMINI_MODEL}),_0x4741d5=await _0x462c9b[_0x5f24b2(0x203)]('Test'),_0x4e7002=await _0x4741d5[_0x5f24b2(0x26c)];if(_0x4e7002[_0x5f24b2(0x26e)]())this[_0x5f24b2(0x238)](_0x757c9d['from'],_0x757c9d['command'],{'success':!![],'message':'Verbindung\x20erfolgreich!'},_0x757c9d[_0x5f24b2(0x2a9)]);else throw new Error(_0x5f24b2(0x27e));}catch(_0x3afd8d){this[_0x5f24b2(0x238)](_0x757c9d[_0x5f24b2(0x1f9)],_0x757c9d[_0x5f24b2(0x1be)],{'success':![],'message':_0x3afd8d['message']},_0x757c9d['callback']);}else{if(_0x757c9d[_0x5f24b2(0x1be)]===_0x5f24b2(0x2dd))try{const _0x2d8575=await scanner['scanForDevices'](this,_0x757c9d[_0x5f24b2(0x282)]||{});this['sendTo'](_0x757c9d[_0x5f24b2(0x1f9)],_0x757c9d['command'],{'success':!![],'devices':_0x2d8575},_0x757c9d[_0x5f24b2(0x2a9)]);}catch(_0x209685){this[_0x5f24b2(0x238)](_0x757c9d[_0x5f24b2(0x1f9)],_0x757c9d[_0x5f24b2(0x1be)],{'success':![],'error':_0x209685['message']},_0x757c9d[_0x5f24b2(0x2a9)]);}else{if(_0x757c9d[_0x5f24b2(0x1be)]===_0x5f24b2(0x21d))try{const {matrix:_0x1d0fcc}=_0x757c9d['message'],_0x5b3d69=await this[_0x5f24b2(0x1a2)](_0x5f24b2(0x265));if(_0x5b3d69&&_0x5b3d69[_0x5f24b2(0x20a)]){const _0xbfa985=JSON[_0x5f24b2(0x2cd)](_0x5b3d69[_0x5f24b2(0x20a)]);_0xbfa985[_0x5f24b2(0x1a6)]=_0x1d0fcc,_0xbfa985[_0x5f24b2(0x226)]=Date['now'](),await this[_0x5f24b2(0x29a)](_0x5f24b2(0x265),{'val':JSON[_0x5f24b2(0x247)](_0xbfa985),'ack':!![]}),pythonBridge[_0x5f24b2(0x1ea)](this,'SET_TOPOLOGY',_0xbfa985);}this['sendTo'](_0x757c9d[_0x5f24b2(0x1f9)],_0x757c9d[_0x5f24b2(0x1be)],{'success':!![]},_0x757c9d[_0x5f24b2(0x2a9)]);}catch(_0x589e8b){this['log']['error'](_0x589e8b);}else{if(_0x757c9d[_0x5f24b2(0x1be)]===_0x5f24b2(0x227))this[_0x5f24b2(0x238)](_0x757c9d[_0x5f24b2(0x1f9)],_0x757c9d['command'],{'success':!![],'dailyDigests':this[_0x5f24b2(0x1ae)]||[],'analysisHistory':this[_0x5f24b2(0x268)]||[]},_0x757c9d[_0x5f24b2(0x2a9)]);else{if(_0x757c9d[_0x5f24b2(0x1be)]===_0x5f24b2(0x1ba)){const _0x43d37e=this[_0x5f24b2(0x1ae)][_0x5f24b2(0x26f)],_0x2f6453=new Array(0x18)[_0x5f24b2(0x22c)](0x0),_0xbf3633=new Date()[_0x5f24b2(0x2d1)](0x0,0x0,0x0,0x0);this[_0x5f24b2(0x2c9)]&&this[_0x5f24b2(0x2c9)][_0x5f24b2(0x280)](_0x9ea3f6=>{const _0x224765=_0x5f24b2;if(_0x9ea3f6[_0x224765(0x2c8)]>=_0xbf3633){const _0x1f5e93=new Date(_0x9ea3f6[_0x224765(0x2c8)])[_0x224765(0x1f3)]();if(_0x1f5e93>=0x0&&_0x1f5e93<0x18)_0x2f6453[_0x1f5e93]++;}});let _0x2d9bf2=![],_0x250f61='',_0x3b97c4='',_0xb3dcc6='';try{const _0x3b90fb=await this[_0x5f24b2(0x1a2)](_0x5f24b2(0x2c4));if(_0x3b90fb&&_0x3b90fb[_0x5f24b2(0x20a)]){_0x2d9bf2=!![];const _0x2415d5=await this[_0x5f24b2(0x1a2)](_0x5f24b2(0x1f5));_0x250f61=_0x2415d5?_0x2415d5[_0x5f24b2(0x20a)]:'';const _0x1a96a1=await this[_0x5f24b2(0x1a2)](_0x5f24b2(0x1b5));_0x3b97c4=_0x1a96a1?_0x1a96a1['val']:'';const _0xbea54c=await this[_0x5f24b2(0x1a2)](_0x5f24b2(0x1d3));_0xb3dcc6=_0xbea54c?_0xbea54c[_0x5f24b2(0x20a)]:'';}}catch(_0x5a70d5){}const _0x51a1e6=await this[_0x5f24b2(0x228)](),_0x2cae9d=(this[_0x5f24b2(0x2ae)][_0x5f24b2(0x2d7)]||[])[_0x5f24b2(0x2ad)](_0x2b435a=>_0x2b435a['isSolar']),_0x4ef1ef=_0x51a1e6&&_0x2cae9d;let _0x556315='';try{const _0x24e196=await this[_0x5f24b2(0x1a2)](_0x5f24b2(0x211));if(_0x24e196&&_0x24e196[_0x5f24b2(0x20a)])_0x556315=_0x24e196[_0x5f24b2(0x20a)];}catch(_0x4631c6){}this[_0x5f24b2(0x238)](_0x757c9d['from'],_0x757c9d['command'],{'success':!![],'eventHistory':this['eventHistory']['slice'](0x0,0xf),'stats':{'digestCount':_0x43d37e,'isPresent':this[_0x5f24b2(0x20b)],'hourlyActivity':_0x2f6453,'solarActive':_0x4ef1ef,'presenceWho':_0x556315},'automation':{'detected':_0x2d9bf2,'description':_0x250f61,'targetId':_0x3b97c4,'targetValue':_0xb3dcc6}},_0x757c9d[_0x5f24b2(0x2a9)]);}else{if(_0x757c9d[_0x5f24b2(0x1be)]==='getEnums'){const _0xe4dedf=await this[_0x5f24b2(0x230)](_0x5f24b2(0x27d),_0x5f24b2(0x1cd)),_0x19cd81=[];if(_0xe4dedf)for(const _0x562123 in _0xe4dedf){const _0x12a88b=_0xe4dedf[_0x562123],_0xf98ee2=(_0x12a88b[_0x5f24b2(0x276)]&&typeof _0x12a88b[_0x5f24b2(0x276)][_0x5f24b2(0x28d)]===_0x5f24b2(0x264)?_0x12a88b['common'][_0x5f24b2(0x28d)]['de']:_0x12a88b[_0x5f24b2(0x276)]['name'])||_0x12a88b[_0x5f24b2(0x276)][_0x5f24b2(0x28d)];_0x19cd81[_0x5f24b2(0x1b0)]({'id':_0x562123,'name':_0xf98ee2});}const _0x4d61a7=await this['getForeignObjectsAsync'](_0x5f24b2(0x1b8),_0x5f24b2(0x1cd)),_0x171ad5=[];if(_0x4d61a7)for(const _0xeead8b in _0x4d61a7){const _0x20044d=_0x4d61a7[_0xeead8b],_0x16c0f0=(_0x20044d[_0x5f24b2(0x276)]&&typeof _0x20044d[_0x5f24b2(0x276)][_0x5f24b2(0x28d)]===_0x5f24b2(0x264)?_0x20044d[_0x5f24b2(0x276)][_0x5f24b2(0x28d)]['de']:_0x20044d['common']['name'])||_0xeead8b[_0x5f24b2(0x1d7)]('.')['pop']();_0x171ad5[_0x5f24b2(0x1b0)](_0x16c0f0);}this[_0x5f24b2(0x238)](_0x757c9d[_0x5f24b2(0x1f9)],_0x757c9d['command'],{'success':!![],'enums':_0x19cd81,'rooms':_0x171ad5},_0x757c9d[_0x5f24b2(0x2a9)]);}else{if(_0x757c9d['command']===_0x5f24b2(0x1bd))try{let _0x31edc8='Kein\x20Wetter-Adapter',_0x119f98=_0x5f24b2(0x1a3);if(this[_0x5f24b2(0x2ae)][_0x5f24b2(0x290)]){const _0x42a933=await recorder[_0x5f24b2(0x1e0)](this);_0x31edc8=_0x42a933!==null?_0x42a933+'Â°C':_0x5f24b2(0x2d4);}if(this[_0x5f24b2(0x2ae)]['calendarInstance']){const _0x574f6a=await this[_0x5f24b2(0x23d)](_0x5f24b2(0x207)+this[_0x5f24b2(0x2ae)][_0x5f24b2(0x1df)]);_0x119f98=_0x574f6a?_0x5f24b2(0x243):'Instanz\x20nicht\x20gefunden';}this[_0x5f24b2(0x238)](_0x757c9d[_0x5f24b2(0x1f9)],_0x757c9d[_0x5f24b2(0x1be)],{'success':!![],'weather':_0x31edc8,'calendar':_0x119f98},_0x757c9d['callback']);}catch(_0x5ee189){this[_0x5f24b2(0x238)](_0x757c9d[_0x5f24b2(0x1f9)],_0x757c9d[_0x5f24b2(0x1be)],{'success':![],'error':_0x5ee189[_0x5f24b2(0x282)]},_0x757c9d[_0x5f24b2(0x2a9)]);}else{if(_0x757c9d[_0x5f24b2(0x1be)]===_0x5f24b2(0x260))try{const _0x182ab1=_0x757c9d[_0x5f24b2(0x282)][_0x5f24b2(0x231)],_0x325d57=await this['getForeignStateAsync'](_0x182ab1+_0x5f24b2(0x1c8));let _0x5a3e80=[];if(_0x325d57&&_0x325d57['val']){const _0x2eee76=JSON[_0x5f24b2(0x2cd)](_0x325d57[_0x5f24b2(0x20a)]),_0x7f4475=new Set();Array[_0x5f24b2(0x28c)](_0x2eee76)&&_0x2eee76['forEach'](_0x195f66=>{const _0x383678=_0x5f24b2;if(_0x195f66['_calName'])_0x7f4475['add'](_0x195f66[_0x383678(0x204)]);else{if(_0x195f66[_0x383678(0x270)])_0x7f4475[_0x383678(0x21a)](_0x195f66[_0x383678(0x270)]);}}),_0x5a3e80=Array['from'](_0x7f4475)[_0x5f24b2(0x21b)]();}if(_0x5a3e80[_0x5f24b2(0x26f)]===0x0)_0x5a3e80=[_0x5f24b2(0x24e)];this[_0x5f24b2(0x238)](_0x757c9d[_0x5f24b2(0x1f9)],_0x757c9d[_0x5f24b2(0x1be)],{'success':!![],'names':_0x5a3e80},_0x757c9d['callback']);}catch(_0x534566){this['sendTo'](_0x757c9d[_0x5f24b2(0x1f9)],_0x757c9d[_0x5f24b2(0x1be)],{'success':![],'error':_0x534566[_0x5f24b2(0x282)]},_0x757c9d[_0x5f24b2(0x2a9)]);}else{if(_0x757c9d[_0x5f24b2(0x1be)]===_0x5f24b2(0x1c6))try{await setup[_0x5f24b2(0x2d3)](this,_0x5f24b2(0x289),![],![]),this['sendTo'](_0x757c9d['from'],_0x757c9d['command'],{'success':!![],'message':'Gesendet'},_0x757c9d['callback']);}catch(_0x1493d0){this[_0x5f24b2(0x19e)][_0x5f24b2(0x1a5)](_0x5f24b2(0x23f)+_0x1493d0[_0x5f24b2(0x282)]),this[_0x5f24b2(0x238)](_0x757c9d[_0x5f24b2(0x1f9)],_0x757c9d[_0x5f24b2(0x1be)],{'success':![],'message':_0x5f24b2(0x220)+_0x1493d0[_0x5f24b2(0x282)]},_0x757c9d[_0x5f24b2(0x2a9)]);}}}}}}}}}}}}}}}}async[a0_0x4459c1(0x2cb)](){const _0x53bc92=a0_0x4459c1;try{const _0x7298f6=await this[_0x53bc92(0x1a2)](setup[_0x53bc92(0x29d)]);_0x7298f6&&_0x7298f6[_0x53bc92(0x20a)]&&Object[_0x53bc92(0x2ce)](setup['SYSTEM_MODES'])['includes'](_0x7298f6[_0x53bc92(0x20a)])?this[_0x53bc92(0x1ab)]=_0x7298f6['val']:(this[_0x53bc92(0x1ab)]=setup[_0x53bc92(0x2cf)][_0x53bc92(0x1c9)],await this[_0x53bc92(0x29a)](setup[_0x53bc92(0x29d)],{'val':setup[_0x53bc92(0x2cf)][_0x53bc92(0x1c9)],'ack':!![]}));}catch(_0x937382){this[_0x53bc92(0x1ab)]=setup['SYSTEM_MODES'][_0x53bc92(0x1c9)];}}async[a0_0x4459c1(0x28f)](){const _0x127cb6=a0_0x4459c1;try{const _0x3e954a=this[_0x127cb6(0x2ae)]['presenceDevices']||[];let _0x3a3644=![];const _0x33f5e7=[];for(const _0x558213 of _0x3e954a){try{const _0x54b812=await this[_0x127cb6(0x1f6)](_0x558213);_0x54b812&&(_0x54b812[_0x127cb6(0x20a)]===!![]||_0x54b812[_0x127cb6(0x20a)]==='online'||_0x54b812['val']===0x1)&&(_0x3a3644=!![],_0x33f5e7[_0x127cb6(0x1b0)](_0x558213));}catch(_0x1cd200){}}return await this['setStateAsync'](_0x127cb6(0x211),{'val':_0x33f5e7[_0x127cb6(0x28b)](',\x20'),'ack':!![]}),_0x3a3644&&(this[_0x127cb6(0x267)]&&(this[_0x127cb6(0x19e)][_0x127cb6(0x28a)](_0x127cb6(0x1f7)),recorder[_0x127cb6(0x253)](this)),!this[_0x127cb6(0x20b)]&&this[_0x127cb6(0x1ab)]===setup['SYSTEM_MODES'][_0x127cb6(0x1c9)]&&await recorder[_0x127cb6(0x27b)](this,!![])),_0x3a3644;}catch(_0x49628e){return![];}}async[a0_0x4459c1(0x274)](){const _0x5db70c=a0_0x4459c1;this[_0x5db70c(0x19e)]['debug'](_0x5db70c(0x263)),await aiAgent[_0x5db70c(0x2dc)](this),this[_0x5db70c(0x244)](),this['triggerGaitAnalysis'](),this[_0x5db70c(0x1eb)]();}async[a0_0x4459c1(0x228)](){const _0x3ecf8b=a0_0x4459c1,_0x43dd70=['weatherunderground.0','accuweather.0',_0x3ecf8b(0x20f)],_0x2f74af=[_0x3ecf8b(0x1b2),_0x3ecf8b(0x294),_0x3ecf8b(0x2a8)];for(const _0x142210 of _0x43dd70){for(const _0x43e371 of _0x2f74af){try{const _0x115e80=_0x142210+'.'+_0x43e371,_0x3c6f29=await this[_0x3ecf8b(0x1f6)](_0x115e80);if(_0x3c6f29&&_0x3c6f29[_0x3ecf8b(0x20a)]){const _0x1cf885=String(_0x3c6f29[_0x3ecf8b(0x20a)])['toLowerCase']();if(_0x1cf885['includes'](_0x3ecf8b(0x237))||_0x1cf885[_0x3ecf8b(0x210)](_0x3ecf8b(0x2a6))||_0x1cf885[_0x3ecf8b(0x210)](_0x3ecf8b(0x1fc))||_0x1cf885['includes'](_0x3ecf8b(0x296))||_0x1cf885['includes'](_0x3ecf8b(0x21f)))return!![];}}catch(_0x808d58){}}}return![];}[a0_0x4459c1(0x24a)](){const _0x4601a5=a0_0x4459c1;if(!this[_0x4601a5(0x19d)])return;try{this[_0x4601a5(0x1d2)](_0x4601a5(0x2ca),(_0x139103,_0x106cce)=>{const _0x381c4d=_0x4601a5;_0x106cce&&_0x106cce['val']&&pythonBridge['send'](this,_0x381c4d(0x2a0),{'sequences':JSON[_0x381c4d(0x2cd)](_0x106cce['val'])});});}catch(_0x2aead1){}}async['triggerEnergyPrediction'](){const _0x1b9ce9=a0_0x4459c1;if(!this[_0x1b9ce9(0x19d)])return;try{const _0x5cba04=await recorder[_0x1b9ce9(0x1e0)](this);if(_0x5cba04===null)return;const _0x19159e={},_0x5062cf={},_0x3b69c4=this[_0x1b9ce9(0x2ae)]['devices']||[];for(const _0x4b71c6 of _0x3b69c4){if(_0x4b71c6[_0x1b9ce9(0x240)]===_0x1b9ce9(0x23c)&&_0x4b71c6[_0x1b9ce9(0x299)]){const _0x4c78f7=this[_0x1b9ce9(0x2b3)][_0x4b71c6['id']];if(_0x4c78f7!==undefined)_0x19159e[_0x4b71c6['location']]=_0x4c78f7;if(_0x4b71c6[_0x1b9ce9(0x214)])_0x5062cf[_0x4b71c6[_0x1b9ce9(0x299)]]=!![];}}const _0x507aeb=await this[_0x1b9ce9(0x228)]();let _0x373127={};try{const _0x22e599=await this[_0x1b9ce9(0x1a2)](_0x1b9ce9(0x1cf));if(_0x22e599&&_0x22e599[_0x1b9ce9(0x20a)])_0x373127=JSON[_0x1b9ce9(0x2cd)](_0x22e599[_0x1b9ce9(0x20a)]);}catch(_0xfa466d){}Object[_0x1b9ce9(0x2ab)](_0x19159e)[_0x1b9ce9(0x26f)]>0x0&&(pythonBridge[_0x1b9ce9(0x1ea)](this,'PREDICT_ENERGY',{'current_temps':_0x19159e,'t_out':_0x5cba04,'is_sunny':_0x507aeb,'solar_flags':_0x5062cf,'warmup_targets':_0x373127}),pythonBridge[_0x1b9ce9(0x1ea)](this,_0x1b9ce9(0x2b5),{'current_temps':_0x19159e,'t_out':_0x5cba04,'targets':{}}));}catch(_0x1a75f2){}}[a0_0x4459c1(0x244)](){const _0x59fa23=a0_0x4459c1;if(!this['rawEventLog']||this[_0x59fa23(0x246)][_0x59fa23(0x26f)]===0x0)return;const _0x2e7463=new Array(0x60)[_0x59fa23(0x22c)](0x0),_0x46f638=new Date()[_0x59fa23(0x2d1)](0x0,0x0,0x0,0x0);this[_0x59fa23(0x246)][_0x59fa23(0x280)](_0x515b79=>{const _0x1e066e=_0x59fa23,_0xc20690=new Date(_0x515b79[_0x1e066e(0x2c8)]);if(_0xc20690[_0x1e066e(0x262)]()>=_0x46f638){const _0x2368ed=_0xc20690[_0x1e066e(0x1f3)](),_0x4af1f6=_0xc20690[_0x1e066e(0x224)](),_0x163b40=_0x2368ed*0x4+Math['floor'](_0x4af1f6/0xf);if(_0x163b40>=0x0&&_0x163b40<0x60)_0x2e7463[_0x163b40]++;}}),this['setStateAsync']('analysis.health.todayVector',{'val':JSON[_0x59fa23(0x247)](_0x2e7463),'ack':!![]});}[a0_0x4459c1(0x1c1)](){const _0x35dbe6=a0_0x4459c1;if(!this[_0x35dbe6(0x1ae)]||this[_0x35dbe6(0x1ae)]['length']<0x2)return;const _0x3fea04=this[_0x35dbe6(0x1ae)][_0x35dbe6(0x205)](_0x3eaaa9=>{const _0x44a219=_0x35dbe6,_0x257a13=(_0x3eaaa9[_0x44a219(0x252)]||'')['toLowerCase']();return ACTIVITY_LEVEL_MAP[_0x257a13]||0x32;});pythonBridge[_0x35dbe6(0x1ea)](this,'ANALYZE_TREND',{'values':_0x3fea04,'tag':_0x35dbe6(0x20c)});}async[a0_0x4459c1(0x287)](_0x1d6e13){const _0x4e88a3=a0_0x4459c1;if(_0x1d6e13==null||typeof _0x1d6e13!==_0x4e88a3(0x234))return;const _0x309f7d=Date[_0x4e88a3(0x1ff)]();this[_0x4e88a3(0x2b6)][_0x4e88a3(0x1b0)]({'ts':_0x309f7d,'val':_0x1d6e13}),this[_0x4e88a3(0x2b6)]=this['pressureBuffer']['filter'](_0x25c89e=>_0x309f7d-_0x25c89e['ts']<0x1388);if(this[_0x4e88a3(0x1ca)])return;if(this['config'][_0x4e88a3(0x266)]){const _0x54e5b4=await this['getForeignStateAsync'](this['config'][_0x4e88a3(0x266)]);if(_0x54e5b4&&!_0x54e5b4['val'])return;}const _0x19f060=this[_0x4e88a3(0x2ae)][_0x4e88a3(0x256)]||0.04;if(Math['abs'](_0x1d6e13)>=_0x19f060){this[_0x4e88a3(0x19e)][_0x4e88a3(0x1b9)](_0x4e88a3(0x29e)+_0x1d6e13+_0x4e88a3(0x277)+_0x19f060+')'),await this[_0x4e88a3(0x29a)](_0x4e88a3(0x284),{'val':!![],'ack':!![]});const _0x47d311=this['isPresent'];_0x47d311?(this['log'][_0x4e88a3(0x28a)](_0x4e88a3(0x22f)),this[_0x4e88a3(0x26d)](_0x1d6e13,_0x4e88a3(0x1ce))):(this['triggerInfrasoundCorrelation'](_0x1d6e13,_0x4e88a3(0x1bf)),this['sendNotification']('ðŸš¨\x20DRUCKWELLEN-ALARM!\x20StÃ¤rke:\x20'+_0x1d6e13+_0x4e88a3(0x26a))),this[_0x4e88a3(0x1ca)]=!![],setTimeout(()=>{const _0x5d9192=_0x4e88a3;this[_0x5d9192(0x1ca)]=![];},0x2710);}}async[a0_0x4459c1(0x26d)](_0x256175,_0x1602c4=a0_0x4459c1(0x1bf)){const _0x26486f=a0_0x4459c1,_0x48a5ab=Date[_0x26486f(0x1ff)](),_0x48eee6=this[_0x26486f(0x2ae)][_0x26486f(0x2d7)]||[];setTimeout(async()=>{const _0xfb4ecd=_0x26486f;let _0x5a8f2f=null,_0x23db7e=_0xfb4ecd(0x257);const _0x558200=[],_0x39c43b=_0x48eee6['filter'](_0x51b658=>_0x51b658[_0xfb4ecd(0x240)]&&(_0x51b658[_0xfb4ecd(0x240)][_0xfb4ecd(0x210)](_0xfb4ecd(0x278))||_0x51b658['type'][_0xfb4ecd(0x210)](_0xfb4ecd(0x1dd))||_0x51b658[_0xfb4ecd(0x240)]['includes'](_0xfb4ecd(0x258))||_0x51b658['type'][_0xfb4ecd(0x210)]('reed'))||_0x51b658[_0xfb4ecd(0x2bc)]&&(_0x51b658[_0xfb4ecd(0x2bc)][_0xfb4ecd(0x210)](_0xfb4ecd(0x272))||_0x51b658['role'][_0xfb4ecd(0x210)]('sensor.door')));for(const _0x579b7a of _0x39c43b){try{const _0x333c42=await this[_0xfb4ecd(0x1f6)](_0x579b7a['id']);if(_0x333c42){if(_0x333c42['ts']>=_0x48a5ab-0x7d0){_0x5a8f2f=_0x579b7a['name']||_0x579b7a['id'],_0x23db7e='ErklÃ¤rt\x20durch:\x20'+_0x5a8f2f;break;}}}catch(_0x185ebf){}}const _0x37da8d={'timestamp':_0x48a5ab,'pressure':_0x256175,'isMatch':!!_0x5a8f2f,'explanation':_0x23db7e,'type':_0x1602c4};await this['appendToLog'](_0x37da8d),this[_0xfb4ecd(0x19e)][_0xfb4ecd(0x28a)](_0xfb4ecd(0x1e1)+(!!_0x5a8f2f?_0xfb4ecd(0x1bb):_0xfb4ecd(0x2d9)));},0x1388);}async[a0_0x4459c1(0x1e4)](_0x5d577c){const _0x2bae6b=a0_0x4459c1,_0x411451=Date[_0x2bae6b(0x1ff)](),_0x909c3c=_0x5d577c[_0x2bae6b(0x28d)]||_0x5d577c['id'][_0x2bae6b(0x1d7)]('.')[_0x2bae6b(0x1af)]();let _0x4a241f=0x0;setTimeout(async()=>{const _0x2cb522=_0x2bae6b;this[_0x2cb522(0x2b6)][_0x2cb522(0x280)](_0x36d0eb=>{const _0x30bc8c=_0x2cb522;_0x36d0eb['ts']>=_0x411451-0xfa0&&_0x36d0eb['ts']<=_0x411451+0x3e8&&(Math[_0x30bc8c(0x29c)](_0x36d0eb['val'])>Math[_0x30bc8c(0x29c)](_0x4a241f)&&(_0x4a241f=_0x36d0eb[_0x30bc8c(0x20a)]));});const _0x120197=this['config']['infrasoundThreshold']||0.04,_0x2f3960=Math[_0x2cb522(0x29c)](_0x4a241f)>=_0x120197,_0x2bd115={'timestamp':_0x411451,'pressure':_0x4a241f,'isMatch':_0x2f3960,'explanation':_0x2cb522(0x2d2)+_0x909c3c,'type':_0x2cb522(0x2d0)};await this[_0x2cb522(0x1f4)](_0x2bd115),this['log'][_0x2cb522(0x251)]('[Calibration]\x20Window\x20'+_0x909c3c+_0x2cb522(0x271)+_0x4a241f[_0x2cb522(0x23b)](0x4)+_0x2cb522(0x1b4)+_0x120197+')');},0x1f4);}async['appendToLog'](_0x541aa9){const _0xd29c25=a0_0x4459c1;try{const _0x3e3241=await this['getStateAsync'](_0xd29c25(0x1b3));let _0x5777c2=[];if(_0x3e3241&&_0x3e3241[_0xd29c25(0x20a)])_0x5777c2=JSON['parse'](_0x3e3241[_0xd29c25(0x20a)]);_0x5777c2['unshift'](_0x541aa9);if(_0x5777c2['length']>0x14)_0x5777c2=_0x5777c2[_0xd29c25(0x254)](0x0,0x14);await this[_0xd29c25(0x29a)](_0xd29c25(0x1b3),{'val':JSON[_0xd29c25(0x247)](_0x5777c2),'ack':!![]});}catch(_0x2b7801){this[_0xd29c25(0x19e)]['error'](_0xd29c25(0x2aa)+_0x2b7801[_0xd29c25(0x282)]);}}[a0_0x4459c1(0x2d3)](_0x20c4f1){const _0x262f3e=a0_0x4459c1;this[_0x262f3e(0x2ae)]['notifyPushoverEnabled']&&this[_0x262f3e(0x2ae)][_0x262f3e(0x209)]&&this['sendTo'](this['config']['notifyPushoverInstance'],_0x262f3e(0x1ea),{'message':_0x20c4f1,'title':_0x262f3e(0x1c2),'priority':0x1}),this['config'][_0x262f3e(0x200)]&&this[_0x262f3e(0x2ae)][_0x262f3e(0x1bc)]&&this[_0x262f3e(0x238)](this[_0x262f3e(0x2ae)][_0x262f3e(0x1bc)],_0x262f3e(0x1ea),{'text':_0x20c4f1});}}if(require[a0_0x4459c1(0x293)]!==module)module[a0_0x4459c1(0x25f)]=_0x3ffd81=>new CogniLiving(_0x3ffd81);else new CogniLiving();