const a0_0x423834=a0_0x4f4c;(function(_0x3ac053,_0x17c071){const _0x568e7c=a0_0x4f4c,_0x2d77ce=_0x3ac053();while(!![]){try{const _0x3cf998=parseInt(_0x568e7c(0x231))/0x1+parseInt(_0x568e7c(0x16d))/0x2+-parseInt(_0x568e7c(0x15f))/0x3*(-parseInt(_0x568e7c(0x1be))/0x4)+-parseInt(_0x568e7c(0x21e))/0x5+-parseInt(_0x568e7c(0x14f))/0x6*(parseInt(_0x568e7c(0x1f3))/0x7)+-parseInt(_0x568e7c(0x195))/0x8*(-parseInt(_0x568e7c(0x1b4))/0x9)+parseInt(_0x568e7c(0x13f))/0xa*(parseInt(_0x568e7c(0x158))/0xb);if(_0x3cf998===_0x17c071)break;else _0x2d77ce['push'](_0x2d77ce['shift']());}catch(_0x293edc){_0x2d77ce['push'](_0x2d77ce['shift']());}}}(a0_0x2c47,0x3357f));const a0_0x30f5de=(function(){let _0x2a26ac=!![];return function(_0x5da24a,_0x98a314){const _0x151c78=_0x2a26ac?function(){if(_0x98a314){const _0x49a40a=_0x98a314['apply'](_0x5da24a,arguments);return _0x98a314=null,_0x49a40a;}}:function(){};return _0x2a26ac=![],_0x151c78;};}()),a0_0x5dd61e=a0_0x30f5de(this,function(){const _0x4468af=a0_0x4f4c;return a0_0x5dd61e['toString']()[_0x4468af(0x124)](_0x4468af(0x24a))[_0x4468af(0x24c)]()[_0x4468af(0x1d5)](a0_0x5dd61e)['search'](_0x4468af(0x24a));});function a0_0x2c47(){const _0x31b896=['sendTo','[Infrasound]\x20ðŸš¨\x20ALARM\x20TRIGGERED!\x20Pressure\x20Wave:\x20','name','setupBriefingScheduler','healthTrendInterval','1010888RFxRpb','geminiModel','split','forecast.current.weather','times','protectAiMemory','instance','timestamp','Current.WeatherText','initSystemConfig','number','checkLicense','getForeignObjectAsync','application/json','.system.mode','analysis.training.triggerEnergy','startSystem','thermostat','getState','string','keys','Verbindung\x20erfolgreich!','runGeminiAnalysis','matrix','automation.triggerAction','exitTimer','systemConfig','weatherunderground.0','ANALYZE_TREND','heiter','analysis.training.triggerSecurity','9wQnNkh','analysis.energy.warmupTargets','checkAndInstall','getHours','subscribeStates','notifyTelegramInstance','TRAIN_ENERGY','sensorLastValues','SYSTEM_DP_MODE','trackerEnabled','36CaDoiY','system.mode','Keine\x20Antwort\x20von\x20Gemini','analysis.energy.insulationScore','lastAlertState','Standard','security.alarm_triggered','dismissAutomation','analysis.health.gaitDebug','toLowerCase','setPresence','./lib/setup','now','Gesendet','analysisInterval','calendarInstance','./lib/scanner','ðŸŽ“\x20[RL-RESET]\x20Lern-Sperre\x20(Penalty)\x20fÃ¼r\x20\x27','genAI','Fehler:\x20','subscribeForeignStatesAsync','abs','key','constructor',')\x20-\x20Phase\x20D\x20(Memory\x20Hydration)','WiFi\x20Presence\x20detected.','VACATION','getEnums','onReady','\x27\x20wurde\x20manuell\x20vom\x20Benutzer\x20gelÃ¶scht.','initZombies','getForeignObjectsAsync','eventHistory','map','testContext','setObjectNotExistsAsync','bootTime','Sensors\x20used\x20for\x20Gait\x20Analysis','Active\x20Calendar\x20Enforcements\x20(Locks)','analysis.automation.description','\x20min\x20ausbleiben.','analysis.automation.patternDetected','Reinforcement\x20Learning\x20Penalties','./lib/python_bridge','includes','notifyTelegramEnabled','Adapter','analysis.energy.warmupSources','setupLtmScheduler','infrasoundArmingId','loadSystemMode','Kein\x20Wetter-Adapter','stopService','1302dnlqSM','currentSystemMode','enum.functions.*','warn','analysis.automation.triggerAction','sendMorningBriefing','notifyPushoverEnabled','Gait\x20Speed\x20Calculation\x20Proof','SYSTEM_MODES','Gemini\x20Init\x20Error:\x20','send','getLtmData','onStateChange','Daten\x20nicht\x20verfÃ¼gbar','runAutopilot','minDaysForBaseline','Memory\x20Hydration\x20Failed:\x20','getStateAsync','log','Simulation\x20durch\x20Admin\x20(Test)','getForeignStateAsync','runPythonHealthCheck','infrasoundEnabled','command','state','getCalendarNames','calendarName','driftAnalysisTimer','Nuukanni\x20Security','infrasoundLocked','triggerEnergyPrediction','slice','updated','licenseKey','motion','./lib/ai_agent','triggerBriefing','isProVersion','analysis.training.triggerHealth','analysis.triggerBriefing','{\x22default\x22:\x2021}','forEach','Guest\x20Mode','1617710cfhohA','analysis.security.learningStatus','lastTrackerEventTime','dependencyInstallInProgress','PREDICT_ENERGY','testNotification','pop','NextHours.Location_1.Day_1.current.symbol_desc','Lernphase\x20(','â¤ï¸\x20Auto-Heartbeat:\x20Aktualisiere\x20Gesundheits-Trends...','ANALYZE_GAIT','minutes_safe','config','ðŸš¨\x20DRUCKWELLEN-ALARM!\x20StÃ¤rke:\x20','unload','LTM.trainingData.thermodynamics','devices','NORMAL','floor','40523WePokB','value','ðŸ§ \x20Memory:\x20Cache\x20hydrated\x20with\x20','modeResetJob','getOverviewData','processSensorEvent','testApiKey','type','object','callback','analysis.health.activityTrend','abortExitTimer','analysis.energy.pinnForecast','scanThermostats','endsWith','subscribeForeignStates','\x20rooms\x20(preventing\x20Cold\x20Start\x20Amnesia).','some','online','enum','SET_TOPOLOGY','models/gemini-flash-latest','rawEventLog','resetRLPenalty','common','(((.+)+)+)+$','analysis.training.triggerComfort','toString','Warm-Up\x20Time\x20(Minutes\x20to\x20Target)','text','communicate.request','checkCalendarTriggers','updateHealthVector','monitorEnforcements','error','createAllObjects','main','search','getTime','useWeather','bind','analysis.automation.autoApply','notifyPushoverInstance','@iobroker/adapter-core','createDailyDigest','runBaselineDriftAnalysis','./lib/recorder','LTM.triggerDailyDigest','scores','accuweather.0','trackerHeartbeat','PINN\x20AI\x20Forecast','isGracePeriodActive','json','val','apiKey','sources','analysis.automation.targetId','Key\x20not\x20found\x20or\x20not\x20provided','PYTHON_EXE','enum.rooms.*','Active\x20Ventilation\x20Alerts','checkSolarCondition','activityLevel','20unQClX','push','onUnload','updateTopologyMatrix','analysisHistory','length','startService','scanForDevices','_calName','add','Kein\x20API\x20Key\x20Ã¼bergeben','cancel','sendNotification','guest','analysis.automation.targetValue','getOutsideTemperatureNumeric','12318ehURtN','executeAutomationAction','analysis.energy.ventilationAlerts','analysis.energy.rlPenalties','klar','checkWifiPresence','onMessage','isPresent','join','865491iWXJFM','message','version','parse','\x20hPa.\x20Einbruch\x20wahrscheinlich.','setStateAsync','fill','85119PEahzi','LTM.dailyDigests','party','exitGraceTimer','analysis.training.triggerTopology','analysis.trigger','stringify','from','simulateEnergyMPC','triggerGaitAnalysis','analysis.energy.warmupTimes','dailyDigests','getGenerativeModel','General\x20Activity\x20Trend\x20(%)','672200LeugxH','briefingJob','./lib/scheduler','info','checkThermostats','.data.table','cogni-living','ltmJob','isArray','analysisTimer','analysis.topology.structure','setState','Party\x20Mode','Kein\x20Kalender-Adapter','debug','setHours','updateTopology','sort','SET_LEARNING_MODE','TRAIN_HEALTH','generateContent','Test','./lib/installer','setupDriftAnalysisScheduler','isSolar','location','exports','simulateButler','presenceDevices','namespace','inactivityThresholdHours','values','infrasoundSensorId','stateChange','memoryCache'];a0_0x2c47=function(){return _0x31b896;};return a0_0x2c47();}a0_0x5dd61e();'use strict';function a0_0x4f4c(_0x47d4f8,_0x440cca){const _0x1d15a0=a0_0x2c47();return a0_0x4f4c=function(_0x5dd61e,_0x30f5de){_0x5dd61e=_0x5dd61e-0x11e;let _0x2c4711=_0x1d15a0[_0x5dd61e];return _0x2c4711;},a0_0x4f4c(_0x47d4f8,_0x440cca);}const utils=require(a0_0x423834(0x12a)),{GoogleGenerativeAI}=require('@google/generative-ai'),installer=require(a0_0x423834(0x183)),scanner=require(a0_0x423834(0x1ce)),schedulers=require(a0_0x423834(0x16f)),topology=require('./lib/topology'),setup=require(a0_0x423834(0x1c9)),recorder=require(a0_0x423834(0x12d)),pythonBridge=require(a0_0x423834(0x1e9)),aiAgent=require(a0_0x423834(0x216)),deadMan=require('./lib/dead_man'),automation=require('./lib/automation'),GEMINI_MODEL=a0_0x423834(0x246),ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};class CogniLiving extends utils[a0_0x423834(0x1ec)]{constructor(_0x204833){const _0x275380=a0_0x423834;super({..._0x204833,'name':_0x275380(0x173)}),this[_0x275380(0x1de)]=[],this[_0x275380(0x143)]=[],this[_0x275380(0x247)]=[],this[_0x275380(0x16a)]=[],this['sensorLastValues']={},this[_0x275380(0x1af)]={'latitude':0x0,'longitude':0x0,'city':''},this['isPresent']=!![],this[_0x275380(0x1ae)]=null,this[_0x275380(0x162)]=null,this[_0x275380(0x133)]=![],this[_0x275380(0x1d0)]=null,this[_0x275380(0x196)]=null,this[_0x275380(0x1f4)]=setup[_0x275380(0x1fb)][_0x275380(0x22f)],this['isProVersion']=![],this[_0x275380(0x1c2)]=![],this[_0x275380(0x176)]=null,this[_0x275380(0x174)]=null,this[_0x275380(0x234)]=null,this[_0x275380(0x20e)]=null,this[_0x275380(0x16e)]=null,this[_0x275380(0x131)]=null,this[_0x275380(0x194)]=null,this[_0x275380(0x221)]=![],this['lastTrackerEventTime']=Date[_0x275380(0x1ca)](),this[_0x275380(0x18f)]=null,this['bootTime']=Date[_0x275380(0x1ca)](),this[_0x275380(0x210)]=![],this['on']('ready',this['onReady'][_0x275380(0x127)](this)),this['on'](_0x275380(0x18e),this[_0x275380(0x1ff)][_0x275380(0x127)](this)),this['on'](_0x275380(0x22c),this['onUnload']['bind'](this)),this['on'](_0x275380(0x159),this[_0x275380(0x155)][_0x275380(0x127)](this));}async[a0_0x423834(0x1da)](){const _0xb6217c=a0_0x423834;this[_0xb6217c(0x205)][_0xb6217c(0x170)]('cogni-living\x20adapter\x20starting\x20(v'+this[_0xb6217c(0x15a)]+_0xb6217c(0x1d6));if(!installer[_0xb6217c(0x1b6)](this,()=>this[_0xb6217c(0x1a5)]()))return;}async['startSystem'](){const _0x207858=a0_0x423834;await setup[_0x207858(0x1dc)](this);try{this[_0x207858(0x218)]=await setup[_0x207858(0x1a0)](this[_0x207858(0x22a)][_0x207858(0x214)]);}catch(_0x4e4d9d){}if(!this[_0x207858(0x22a)][_0x207858(0x18b)]||this['config']['inactivityThresholdHours']<0.1)this['config'][_0x207858(0x18b)]=0xc;await setup['initHistory'](this),await setup[_0x207858(0x19e)](this);try{const _0x4f02f0=await this['getStateAsync'](_0x207858(0x169)),_0x59d3d9=await this[_0x207858(0x204)](_0x207858(0x1ed));_0x4f02f0&&_0x4f02f0[_0x207858(0x135)]&&_0x59d3d9&&_0x59d3d9['val']&&(Date[_0x207858(0x1ca)]()-_0x4f02f0['ts']<0x4*0xe10*0x3e8&&(this['memoryCache']={'times':JSON[_0x207858(0x15b)](_0x4f02f0[_0x207858(0x135)]),'sources':JSON['parse'](_0x59d3d9[_0x207858(0x135)])},this[_0x207858(0x205)]['info'](_0x207858(0x233)+Object[_0x207858(0x1a9)](this[_0x207858(0x18f)]['times'])[_0x207858(0x144)]+_0x207858(0x241))));}catch(_0x11f696){this['log'][_0x207858(0x1f6)](_0x207858(0x203)+_0x11f696[_0x207858(0x159)]);}if(this[_0x207858(0x22a)]['geminiApiKey'])try{this[_0x207858(0x1d0)]=new GoogleGenerativeAI(this[_0x207858(0x22a)]['geminiApiKey']),this[_0x207858(0x196)]=this['genAI'][_0x207858(0x16b)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x207858(0x1a2)}}),this[_0x207858(0x205)][_0x207858(0x170)]('Gemini\x20AI\x20initialized.');}catch(_0x252fea){this[_0x207858(0x205)][_0x207858(0x121)](_0x207858(0x1fc)+_0x252fea['message']);}await setup[_0x207858(0x122)](this),await this['loadSystemMode'](),await this[_0x207858(0x1e1)](_0x207858(0x23d),{'type':'state','common':{'name':_0x207858(0x132),'type':'string','role':_0x207858(0x134),'read':!![],'write':![]},'native':{}}),await this[_0x207858(0x1e1)](_0x207858(0x151),{'type':_0x207858(0x20b),'common':{'name':_0x207858(0x13c),'type':'string','role':_0x207858(0x134),'read':!![],'write':![]},'native':{}}),await this[_0x207858(0x1e1)](_0x207858(0x169),{'type':_0x207858(0x20b),'common':{'name':_0x207858(0x24d),'type':'string','role':_0x207858(0x134),'read':!![],'write':![]},'native':{}}),await this[_0x207858(0x1e1)](_0x207858(0x1b5),{'type':_0x207858(0x20b),'common':{'name':'Warm-Up\x20Target\x20Temps\x20(JSON)','type':_0x207858(0x1a8),'role':_0x207858(0x134),'read':!![],'write':!![],'def':_0x207858(0x21b)},'native':{}}),await this[_0x207858(0x1e1)](_0x207858(0x152),{'type':_0x207858(0x20b),'common':{'name':_0x207858(0x1e8),'type':_0x207858(0x1a8),'role':'json','read':!![],'write':![],'def':'{}'},'native':{}}),await this[_0x207858(0x1e1)](_0x207858(0x23b),{'type':_0x207858(0x20b),'common':{'name':_0x207858(0x16c),'type':_0x207858(0x19f),'role':_0x207858(0x232),'unit':'%','read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync']('analysis.health.gaitSensors',{'type':_0x207858(0x20b),'common':{'name':_0x207858(0x1e3),'type':'string','role':_0x207858(0x24e),'read':!![],'write':![]},'native':{}}),await this[_0x207858(0x1e1)]('analysis.energy.activeEnforcements',{'type':_0x207858(0x20b),'common':{'name':_0x207858(0x1e4),'type':'string','role':_0x207858(0x134),'read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x207858(0x1e1)](_0x207858(0x1c6),{'type':_0x207858(0x20b),'common':{'name':_0x207858(0x1fa),'type':_0x207858(0x1a8),'role':_0x207858(0x24e),'read':!![],'write':![]},'native':{}});try{const _0x4d52d8=await this['getStateAsync']('LTM.rawEventLog');if(_0x4d52d8&&_0x4d52d8['val'])this[_0x207858(0x247)]=JSON[_0x207858(0x15b)](_0x4d52d8[_0x207858(0x135)]);}catch(_0x5b081f){this['rawEventLog']=[];}try{const _0x3ccd22=await this['getStateAsync'](_0x207858(0x160));if(_0x3ccd22&&_0x3ccd22[_0x207858(0x135)])this['dailyDigests']=JSON[_0x207858(0x15b)](_0x3ccd22[_0x207858(0x135)]);}catch(_0x2f9059){this[_0x207858(0x16a)]=[];}const _0x38662c=this['dailyDigests'][_0x207858(0x144)]>=(this[_0x207858(0x22a)][_0x207858(0x202)]||0x7)?'Aktiv\x20('+this[_0x207858(0x16a)]['length']+'\x20Tage)':_0x207858(0x226)+this[_0x207858(0x16a)][_0x207858(0x144)]+'/'+(this[_0x207858(0x22a)][_0x207858(0x202)]||0x7)+')';await this[_0x207858(0x15d)]('LTM.baselineStatus',{'val':_0x38662c,'ack':!![]}),this['subscribeStates'](_0x207858(0x164)),this[_0x207858(0x1b8)](_0x207858(0x12e)),this['subscribeStates'](_0x207858(0x1bf)),this[_0x207858(0x1b8)](_0x207858(0x21a)),this[_0x207858(0x1b8)](_0x207858(0x1f7)),this[_0x207858(0x1b8)](_0x207858(0x128)),this[_0x207858(0x1b8)]('analysis.training.triggerSecurity'),this['subscribeStates'](_0x207858(0x219)),this[_0x207858(0x1b8)](_0x207858(0x1a4)),this['subscribeStates']('analysis.training.triggerComfort'),this[_0x207858(0x1b8)](_0x207858(0x163)),this[_0x207858(0x1b8)]('analysis.energy.mpcActive'),this[_0x207858(0x1b8)](_0x207858(0x1ed));this[_0x207858(0x22a)][_0x207858(0x209)]&&this['config'][_0x207858(0x18d)]&&(this[_0x207858(0x205)][_0x207858(0x170)]('[Infrasound]\x20Subscribing\x20to\x20external\x20sensor:\x20'+this[_0x207858(0x22a)][_0x207858(0x18d)]),this[_0x207858(0x240)](this['config'][_0x207858(0x18d)]));const _0x1bdd31=this[_0x207858(0x22a)]['devices'];if(_0x1bdd31)for(const _0x2eb42d of _0x1bdd31){await this[_0x207858(0x1d2)](_0x2eb42d['id']);}const _0x5ad8c2=this[_0x207858(0x22a)][_0x207858(0x189)];if(_0x5ad8c2)for(const _0x281a0f of _0x5ad8c2){await this['subscribeForeignStatesAsync'](_0x281a0f);}if(this[_0x207858(0x22a)][_0x207858(0x1eb)]&&this[_0x207858(0x22a)][_0x207858(0x1b9)])await this[_0x207858(0x1d2)](this[_0x207858(0x22a)][_0x207858(0x1b9)]+'.communicate.request');setTimeout(()=>this[_0x207858(0x154)](),0x1388);if(this[_0x207858(0x176)])clearInterval(this[_0x207858(0x176)]);const _0xd259ed=this[_0x207858(0x22a)][_0x207858(0x1cc)]||0xf;_0xd259ed>0x0&&(this[_0x207858(0x176)]=setInterval(()=>{const _0x26465f=_0x207858;this[_0x26465f(0x201)](),automation[_0x26465f(0x11e)](this),automation[_0x26465f(0x120)](this);},_0xd259ed*0x3c*0x3e8));setTimeout(()=>{const _0x53810c=_0x207858;automation[_0x53810c(0x11e)](this),automation[_0x53810c(0x120)](this);},0x2710);this['config'][_0x207858(0x1bd)]!==![]&&(this[_0x207858(0x131)]=setInterval(()=>{const _0x5bfd21=_0x207858;if(this[_0x5bfd21(0x218)]){const _0x26c0e4=Date[_0x5bfd21(0x1ca)](),_0x5c8162=this['lastTrackerEventTime']||_0x26c0e4,_0x5466f1=(_0x26c0e4-_0x5c8162)/0x3e8;_0x5466f1>0x2&&(this[_0x5bfd21(0x220)]=_0x26c0e4,pythonBridge[_0x5bfd21(0x1fd)](this,'TRACK_EVENT',{'room':null,'dt':_0x5466f1}));}},0xbb8));if(this[_0x207858(0x194)])clearInterval(this[_0x207858(0x194)]);this[_0x207858(0x194)]=setInterval(()=>{const _0x1e5d14=_0x207858;this['isProVersion']&&(this[_0x1e5d14(0x205)][_0x1e5d14(0x170)](_0x1e5d14(0x227)),this[_0x1e5d14(0x208)]());},0x4*0x3c*0x3c*0x3e8),schedulers[_0x207858(0x1ee)](this,()=>aiAgent[_0x207858(0x12b)](this,pythonBridge)),schedulers['setupModeResetScheduler'](this),schedulers[_0x207858(0x184)](this,()=>aiAgent[_0x207858(0x12c)](this)),schedulers[_0x207858(0x193)](this,()=>aiAgent[_0x207858(0x1f8)](this)),pythonBridge[_0x207858(0x145)](this,installer[_0x207858(0x13a)]),setTimeout(async()=>{const _0x63299d=_0x207858;await topology['updateTopology'](this);try{const _0x51a383=await this['getStateAsync']('analysis.topology.structure');if(_0x51a383&&_0x51a383[_0x63299d(0x135)])pythonBridge[_0x63299d(0x1fd)](this,_0x63299d(0x245),JSON[_0x63299d(0x15b)](_0x51a383[_0x63299d(0x135)]));}catch(_0x7242b1){}this[_0x63299d(0x208)](),this[_0x63299d(0x168)](),this['triggerEnergyPrediction'](),this[_0x63299d(0x11f)]();},0x1388);}[a0_0x423834(0x141)](_0x2910f9){const _0x556c4a=a0_0x423834;if(this['analysisTimer'])clearInterval(this['analysisTimer']);if(this['driftAnalysisTimer'])clearInterval(this[_0x556c4a(0x20e)]);if(this[_0x556c4a(0x131)])clearInterval(this[_0x556c4a(0x131)]);if(this[_0x556c4a(0x194)])clearInterval(this['healthTrendInterval']);if(this[_0x556c4a(0x174)])this[_0x556c4a(0x174)][_0x556c4a(0x14a)]();if(this[_0x556c4a(0x234)])this[_0x556c4a(0x234)]['cancel']();if(this[_0x556c4a(0x16e)])this[_0x556c4a(0x16e)][_0x556c4a(0x14a)]();recorder[_0x556c4a(0x23c)](this),pythonBridge[_0x556c4a(0x1f2)](this),_0x2910f9();}async[a0_0x423834(0x1ff)](_0x552452,_0x94e8b0){const _0x5eb705=a0_0x423834;if(!_0x94e8b0||this[_0x5eb705(0x221)])return;if(_0x552452[_0x5eb705(0x1ea)]('telegram')&&_0x552452[_0x5eb705(0x23f)](_0x5eb705(0x24f))&&_0x94e8b0[_0x5eb705(0x135)])return;if(this[_0x5eb705(0x22a)][_0x5eb705(0x209)]&&_0x552452===this[_0x5eb705(0x22a)][_0x5eb705(0x18d)]){this['handleInfrasound'](_0x94e8b0[_0x5eb705(0x135)]);return;}if(_0x552452===this[_0x5eb705(0x18a)]+_0x5eb705(0x1a3)){if(_0x94e8b0[_0x5eb705(0x135)]&&Object[_0x5eb705(0x18c)](setup[_0x5eb705(0x1fb)])[_0x5eb705(0x1ea)](_0x94e8b0[_0x5eb705(0x135)])){this[_0x5eb705(0x1f4)]=_0x94e8b0[_0x5eb705(0x135)];if(_0x94e8b0[_0x5eb705(0x135)]===setup[_0x5eb705(0x1fb)][_0x5eb705(0x1d8)])await recorder[_0x5eb705(0x1c8)](this,![]);else await recorder['setPresence'](this,!![]);if(this[_0x5eb705(0x218)]){let _0xfed3e2=![],_0x716304=0x0,_0x3bebb0='manual';if(this[_0x5eb705(0x1f4)]===_0x5eb705(0x161))_0xfed3e2=!![],_0x716304=0x168,_0x3bebb0=_0x5eb705(0x179);else this['currentSystemMode']===_0x5eb705(0x14c)&&(_0xfed3e2=!![],_0x716304=0x5a0,_0x3bebb0=_0x5eb705(0x21d));pythonBridge['send'](this,_0x5eb705(0x17f),{'active':_0xfed3e2,'duration':_0x716304,'label':_0x3bebb0}),await this['setStateAsync'](_0x5eb705(0x21f),{'val':JSON[_0x5eb705(0x165)]({'active':_0xfed3e2,'label':_0x3bebb0,'timestamp':Date[_0x5eb705(0x1ca)]()}),'ack':!![]});}}if(!_0x94e8b0['ack'])this['setState'](_0x552452,{'val':this[_0x5eb705(0x1f4)],'ack':!![]});return;}_0x552452[_0x5eb705(0x23f)](_0x5eb705(0x1ed))&&_0x94e8b0['ack']&&this[_0x5eb705(0x19a)](_0x94e8b0[_0x5eb705(0x135)]);if(!_0x94e8b0['ack']){if(_0x552452[_0x5eb705(0x1ea)]('analysis.trigger')&&_0x94e8b0['val']){this[_0x5eb705(0x178)](_0x552452,{'val':![],'ack':!![]}),aiAgent[_0x5eb705(0x1ab)](this);return;}if(_0x552452['includes']('triggerDailyDigest')&&_0x94e8b0['val']){this['setState'](_0x552452,{'val':![],'ack':!![]});if(this[_0x5eb705(0x218)])aiAgent[_0x5eb705(0x12b)](this,pythonBridge);return;}if(_0x552452[_0x5eb705(0x1ea)](_0x5eb705(0x217))&&_0x94e8b0[_0x5eb705(0x135)]){this[_0x5eb705(0x178)](_0x552452,{'val':![],'ack':!![]}),aiAgent[_0x5eb705(0x1f8)](this);return;}if(_0x552452[_0x5eb705(0x1ea)](_0x5eb705(0x1ad))&&_0x94e8b0[_0x5eb705(0x135)]){this[_0x5eb705(0x178)](_0x552452,{'val':![],'ack':!![]}),aiAgent[_0x5eb705(0x150)](this);return;}if(_0x552452['includes'](_0x5eb705(0x1b3))&&_0x94e8b0[_0x5eb705(0x135)]){this[_0x5eb705(0x178)](_0x552452,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x23b603=await this[_0x5eb705(0x204)]('LTM.trainingData.sequences');if(_0x23b603&&_0x23b603[_0x5eb705(0x135)]){const _0x1eb587=JSON['parse'](_0x23b603['val']);this['setStateAsync']('analysis.training.status',{'val':'Sec-Training\x20started...','ack':!![]}),pythonBridge[_0x5eb705(0x1fd)](this,'TRAIN_SECURITY',{'sequences':_0x1eb587});}}catch(_0xb9cdfe){}return;}if(_0x552452[_0x5eb705(0x1ea)](_0x5eb705(0x219))&&_0x94e8b0[_0x5eb705(0x135)]){this[_0x5eb705(0x178)](_0x552452,{'val':![],'ack':!![]});if(this[_0x5eb705(0x218)])try{const _0x1fe510=await this[_0x5eb705(0x204)]('LTM.dailyDigests');if(_0x1fe510&&_0x1fe510[_0x5eb705(0x135)])pythonBridge['send'](this,_0x5eb705(0x180),{'digests':JSON[_0x5eb705(0x15b)](_0x1fe510[_0x5eb705(0x135)])});}catch(_0x5b463c){}return;}if(_0x552452['includes'](_0x5eb705(0x1a4))&&_0x94e8b0[_0x5eb705(0x135)]){this[_0x5eb705(0x178)](_0x552452,{'val':![],'ack':!![]});if(this[_0x5eb705(0x218)])try{const _0xd114d7=await this[_0x5eb705(0x204)](_0x5eb705(0x22d));if(_0xd114d7&&_0xd114d7[_0x5eb705(0x135)])pythonBridge[_0x5eb705(0x1fd)](this,_0x5eb705(0x1ba),{'points':JSON[_0x5eb705(0x15b)](_0xd114d7['val'])});}catch(_0x12b675){}return;}if(_0x552452[_0x5eb705(0x1ea)](_0x5eb705(0x24b))&&_0x94e8b0['val']){this['setState'](_0x552452,{'val':![],'ack':!![]});if(this[_0x5eb705(0x218)])try{const _0x4466ab=await this[_0x5eb705(0x204)]('LTM.rawEventLog');if(_0x4466ab&&_0x4466ab[_0x5eb705(0x135)])pythonBridge[_0x5eb705(0x1fd)](this,'TRAIN_COMFORT',{'events':JSON[_0x5eb705(0x15b)](_0x4466ab[_0x5eb705(0x135)])});}catch(_0x3397bd){}return;}if(_0x552452[_0x5eb705(0x1ea)](_0x5eb705(0x163))&&_0x94e8b0['val']){this['setState'](_0x552452,{'val':![],'ack':!![]}),topology[_0x5eb705(0x17d)](this);return;}}if(this[_0x5eb705(0x22a)][_0x5eb705(0x189)]&&this[_0x5eb705(0x22a)][_0x5eb705(0x189)][_0x5eb705(0x1ea)](_0x552452)){await this[_0x5eb705(0x154)]();return;}const _0x1e42d7=(this[_0x5eb705(0x22a)][_0x5eb705(0x22e)]||[])['find'](_0x192d91=>_0x192d91['id']===_0x552452);if(_0x1e42d7){const _0x22c5b1=await recorder[_0x5eb705(0x236)](this,_0x552452,_0x94e8b0,_0x1e42d7);_0x22c5b1&&_0x22c5b1['type']===_0x5eb705(0x215)&&_0x22c5b1['location']&&this[_0x5eb705(0x218)]&&deadMan['updateLocation'](this,_0x22c5b1[_0x5eb705(0x186)]),(_0x1e42d7[_0x5eb705(0x238)]==='temperature'||_0x1e42d7[_0x5eb705(0x238)]===_0x5eb705(0x1a6))&&automation['cleanupGhostInterventions'](this);}}async['protectAiMemory'](_0x268bb5){const _0x5da775=a0_0x423834;if(!this['memoryCache']||Date[_0x5da775(0x1ca)]()-this[_0x5da775(0x1e2)]>0x493e0)return;if(!this[_0x5da775(0x18f)][_0x5da775(0x137)]||!this[_0x5da775(0x18f)][_0x5da775(0x199)])return;try{const _0x3f7768=JSON[_0x5da775(0x15b)](_0x268bb5),_0x34163f=this[_0x5da775(0x18f)]['sources'];let _0x5663fe=![];for(const _0x2a05c7 in _0x34163f){if(_0x34163f[_0x2a05c7][_0x5da775(0x1ea)]('AI')&&_0x3f7768[_0x2a05c7]&&!_0x3f7768[_0x2a05c7][_0x5da775(0x1ea)]('AI')){_0x5663fe=!![];break;}}_0x5663fe&&(this['log'][_0x5da775(0x170)]('ðŸ§ \x20Memory\x20Protection:\x20Restoring\x20persisted\x20AI-Calculations\x20(preventing\x20\x27Cold\x20Start\x27\x20amnesia).'),await this['setStateAsync'](_0x5da775(0x169),{'val':JSON[_0x5da775(0x165)](this[_0x5da775(0x18f)][_0x5da775(0x199)]),'ack':!![]}),await this[_0x5da775(0x15d)](_0x5da775(0x1ed),{'val':JSON[_0x5da775(0x165)](this[_0x5da775(0x18f)]['sources']),'ack':!![]}));}catch(_0x4cad62){}}async[a0_0x423834(0x155)](_0x1d3594){const _0x5083ac=a0_0x423834;if(typeof _0x1d3594===_0x5083ac(0x239)&&_0x1d3594['message']){if(_0x1d3594['command']===_0x5083ac(0x171))try{const _0x3f883d=await automation[_0x5083ac(0x23e)](this);this[_0x5083ac(0x190)](_0x1d3594[_0x5083ac(0x166)],_0x1d3594['command'],{'success':!![],'results':_0x3f883d},_0x1d3594[_0x5083ac(0x23a)]);}catch(_0x5a9cd8){this[_0x5083ac(0x190)](_0x1d3594[_0x5083ac(0x166)],_0x1d3594[_0x5083ac(0x20a)],{'success':![],'error':_0x5a9cd8['message']},_0x1d3594[_0x5083ac(0x23a)]);}else{if(_0x1d3594[_0x5083ac(0x20a)]===_0x5083ac(0x167))try{const {current_temps:_0x2ed6ca,t_out:_0xd1cb6a,targets:_0x48d53b,t_forecast:_0x20844b}=_0x1d3594[_0x5083ac(0x159)],_0x5866ac=[];let _0x12536e={};try{const _0x367904=await this[_0x5083ac(0x204)](_0x5083ac(0x1c1));if(_0x367904&&_0x367904[_0x5083ac(0x135)]){const _0x29576a=JSON[_0x5083ac(0x15b)](_0x367904[_0x5083ac(0x135)]);_0x12536e=_0x29576a[_0x5083ac(0x12f)]||_0x29576a;}}catch(_0x3fdf9e){}const _0x2e59b7=_0x20844b!==undefined&&_0x20844b!==null?(_0xd1cb6a+_0x20844b)/0x2:_0xd1cb6a;for(const [_0x2dc02c,_0x5f4bc5]of Object['entries'](_0x2ed6ca)){const _0x52382d=_0x48d53b[_0x2dc02c]||0x15;if(_0x5f4bc5<=_0x52382d)continue;let _0x445a33=_0x12536e[_0x2dc02c]||-0.5;if(_0x445a33>=0x0)_0x445a33=-0.5;const _0x295f70=Math[_0x5083ac(0x1d3)](_0x445a33),_0x5c8499=_0x5f4bc5-_0x52382d;let _0x347d84=Math[_0x5083ac(0x230)](_0x5c8499/_0x295f70*0x3c);const _0x2b43b3=_0x5f4bc5-_0xd1cb6a,_0x2ecd33=_0x5f4bc5-_0x2e59b7;if(_0x2ecd33!==0x0&&_0x2b43b3!==0x0){const _0x260b17=_0x2b43b3/_0x2ecd33;_0x347d84=Math[_0x5083ac(0x230)](_0x347d84*_0x260b17);}if(_0x347d84>0xf){if(_0x347d84>0xf0)_0x347d84=0xf0;_0x5866ac['push']({'room':_0x2dc02c,'minutes_safe':_0x347d84,'target':_0x52382d,'current':_0x5f4bc5,'savings_msg':'Heizung\x20kann\x20'+_0x347d84+_0x5083ac(0x1e6)});}}_0x5866ac[_0x5083ac(0x17e)]((_0x20bb10,_0x2b4dc5)=>_0x2b4dc5[_0x5083ac(0x229)]-_0x20bb10[_0x5083ac(0x229)]),this[_0x5083ac(0x190)](_0x1d3594[_0x5083ac(0x166)],_0x1d3594[_0x5083ac(0x20a)],{'success':!![],'proposals':_0x5866ac},_0x1d3594['callback']);}catch(_0x11cb11){this['sendTo'](_0x1d3594['from'],_0x1d3594['command'],{'success':![],'error':_0x11cb11[_0x5083ac(0x159)]},_0x1d3594['callback']);}else{if(_0x1d3594[_0x5083ac(0x20a)]===_0x5083ac(0x248))try{const _0x469719=_0x1d3594[_0x5083ac(0x159)][_0x5083ac(0x1d4)],_0x39772f=_0x5083ac(0x152),_0x2b4216=await this[_0x5083ac(0x204)](_0x39772f);let _0x5c0392={};if(_0x2b4216&&_0x2b4216[_0x5083ac(0x135)])try{_0x5c0392=JSON[_0x5083ac(0x15b)](_0x2b4216[_0x5083ac(0x135)]);}catch(_0x71c93e){}_0x469719&&_0x5c0392[_0x469719]?(delete _0x5c0392[_0x469719],await this[_0x5083ac(0x15d)](_0x39772f,{'val':JSON[_0x5083ac(0x165)](_0x5c0392),'ack':!![]}),this[_0x5083ac(0x205)][_0x5083ac(0x170)](_0x5083ac(0x1cf)+_0x469719+_0x5083ac(0x1db)),this[_0x5083ac(0x190)](_0x1d3594[_0x5083ac(0x166)],_0x1d3594['command'],{'success':!![]},_0x1d3594[_0x5083ac(0x23a)])):this['sendTo'](_0x1d3594['from'],_0x1d3594[_0x5083ac(0x20a)],{'success':![],'error':_0x5083ac(0x139)},_0x1d3594['callback']);}catch(_0x358c28){this[_0x5083ac(0x190)](_0x1d3594['from'],_0x1d3594['command'],{'success':![],'error':_0x358c28[_0x5083ac(0x159)]},_0x1d3594[_0x5083ac(0x23a)]);}else{if(_0x1d3594[_0x5083ac(0x20a)]===_0x5083ac(0x1c5))await this['setStateAsync'](_0x5083ac(0x1e7),{'val':![],'ack':!![]}),await this[_0x5083ac(0x15d)]('analysis.automation.description',{'val':'','ack':!![]}),await this[_0x5083ac(0x15d)](_0x5083ac(0x138),{'val':'','ack':!![]}),this[_0x5083ac(0x190)](_0x1d3594[_0x5083ac(0x166)],_0x1d3594['command'],{'success':!![]},_0x1d3594['callback']);else{if(_0x1d3594[_0x5083ac(0x20a)]===_0x5083ac(0x188)){const {targetId:_0x2ccb71,targetValue:_0x4022a5}=_0x1d3594[_0x5083ac(0x159)];await this['setStateAsync'](_0x5083ac(0x1e7),{'val':!![],'ack':!![]}),await this[_0x5083ac(0x15d)](_0x5083ac(0x1e5),{'val':_0x5083ac(0x206),'ack':!![]}),await this[_0x5083ac(0x15d)](_0x5083ac(0x138),{'val':_0x2ccb71,'ack':!![]}),await this[_0x5083ac(0x15d)]('analysis.automation.targetValue',{'val':String(_0x4022a5),'ack':!![]}),this['sendTo'](_0x1d3594[_0x5083ac(0x166)],_0x1d3594[_0x5083ac(0x20a)],{'success':!![]},_0x1d3594[_0x5083ac(0x23a)]);}else{if(_0x1d3594[_0x5083ac(0x20a)]===_0x5083ac(0x237))try{const _0x2b298d=_0x1d3594[_0x5083ac(0x159)][_0x5083ac(0x136)];if(!_0x2b298d)throw new Error(_0x5083ac(0x149));const _0x4de462=new GoogleGenerativeAI(_0x2b298d),_0x1b0616=_0x4de462[_0x5083ac(0x16b)]({'model':GEMINI_MODEL}),_0x4ae624=await _0x1b0616[_0x5083ac(0x181)](_0x5083ac(0x182)),_0x5e2d81=await _0x4ae624['response'];if(_0x5e2d81[_0x5083ac(0x24e)]())this[_0x5083ac(0x190)](_0x1d3594[_0x5083ac(0x166)],_0x1d3594[_0x5083ac(0x20a)],{'success':!![],'message':_0x5083ac(0x1aa)},_0x1d3594[_0x5083ac(0x23a)]);else throw new Error(_0x5083ac(0x1c0));}catch(_0x6be6a4){this[_0x5083ac(0x190)](_0x1d3594[_0x5083ac(0x166)],_0x1d3594['command'],{'success':![],'message':_0x6be6a4['message']},_0x1d3594['callback']);}else{if(_0x1d3594[_0x5083ac(0x20a)]==='scanDevices')try{const _0x5bb04f=await scanner[_0x5083ac(0x146)](this,_0x1d3594[_0x5083ac(0x159)]||{});this[_0x5083ac(0x190)](_0x1d3594[_0x5083ac(0x166)],_0x1d3594[_0x5083ac(0x20a)],{'success':!![],'devices':_0x5bb04f},_0x1d3594[_0x5083ac(0x23a)]);}catch(_0x113f2e){this[_0x5083ac(0x190)](_0x1d3594[_0x5083ac(0x166)],_0x1d3594[_0x5083ac(0x20a)],{'success':![],'error':_0x113f2e[_0x5083ac(0x159)]},_0x1d3594[_0x5083ac(0x23a)]);}else{if(_0x1d3594['command']===_0x5083ac(0x142))try{const {matrix:_0x38e066}=_0x1d3594[_0x5083ac(0x159)],_0x4787a8=await this[_0x5083ac(0x204)](_0x5083ac(0x177));if(_0x4787a8&&_0x4787a8[_0x5083ac(0x135)]){const _0x54f9b7=JSON[_0x5083ac(0x15b)](_0x4787a8['val']);_0x54f9b7[_0x5083ac(0x1ac)]=_0x38e066,_0x54f9b7[_0x5083ac(0x213)]=Date[_0x5083ac(0x1ca)](),await this[_0x5083ac(0x15d)](_0x5083ac(0x177),{'val':JSON['stringify'](_0x54f9b7),'ack':!![]}),pythonBridge[_0x5083ac(0x1fd)](this,'SET_TOPOLOGY',_0x54f9b7);}this[_0x5083ac(0x190)](_0x1d3594[_0x5083ac(0x166)],_0x1d3594['command'],{'success':!![]},_0x1d3594[_0x5083ac(0x23a)]);}catch(_0x3f06b2){this[_0x5083ac(0x205)]['error'](_0x3f06b2);}else{if(_0x1d3594[_0x5083ac(0x20a)]===_0x5083ac(0x1fe))this[_0x5083ac(0x190)](_0x1d3594['from'],_0x1d3594[_0x5083ac(0x20a)],{'success':!![],'dailyDigests':this['dailyDigests']||[],'analysisHistory':this[_0x5083ac(0x143)]||[]},_0x1d3594[_0x5083ac(0x23a)]);else{if(_0x1d3594[_0x5083ac(0x20a)]===_0x5083ac(0x235)){const _0x1cc1ae=this[_0x5083ac(0x16a)][_0x5083ac(0x144)],_0x557e63=new Array(0x18)[_0x5083ac(0x15e)](0x0),_0x714a6f=new Date()[_0x5083ac(0x17c)](0x0,0x0,0x0,0x0);this['eventHistory']&&this[_0x5083ac(0x1de)][_0x5083ac(0x21c)](_0x19e86b=>{const _0xacf1e8=_0x5083ac;if(_0x19e86b[_0xacf1e8(0x19c)]>=_0x714a6f){const _0x13db56=new Date(_0x19e86b[_0xacf1e8(0x19c)])[_0xacf1e8(0x1b7)]();if(_0x13db56>=0x0&&_0x13db56<0x18)_0x557e63[_0x13db56]++;}});let _0x1cb9a1=![],_0x321736='',_0xdebbff='',_0x5229e2='';try{const _0x5a7bd3=await this[_0x5083ac(0x204)](_0x5083ac(0x1e7));if(_0x5a7bd3&&_0x5a7bd3[_0x5083ac(0x135)]){_0x1cb9a1=!![];const _0x137003=await this[_0x5083ac(0x204)](_0x5083ac(0x1e5));_0x321736=_0x137003?_0x137003['val']:'';const _0x385564=await this[_0x5083ac(0x204)](_0x5083ac(0x138));_0xdebbff=_0x385564?_0x385564[_0x5083ac(0x135)]:'';const _0x36c29c=await this[_0x5083ac(0x204)](_0x5083ac(0x14d));_0x5229e2=_0x36c29c?_0x36c29c[_0x5083ac(0x135)]:'';}}catch(_0x217d29){}const _0x263b96=await this[_0x5083ac(0x13d)](),_0x5bf54c=(this[_0x5083ac(0x22a)][_0x5083ac(0x22e)]||[])[_0x5083ac(0x242)](_0xe239f9=>_0xe239f9['isSolar']),_0x476545=_0x263b96&&_0x5bf54c;this['sendTo'](_0x1d3594[_0x5083ac(0x166)],_0x1d3594[_0x5083ac(0x20a)],{'success':!![],'eventHistory':this[_0x5083ac(0x1de)][_0x5083ac(0x212)](0x0,0xf),'stats':{'digestCount':_0x1cc1ae,'isPresent':this['isPresent'],'hourlyActivity':_0x557e63,'solarActive':_0x476545},'automation':{'detected':_0x1cb9a1,'description':_0x321736,'targetId':_0xdebbff,'targetValue':_0x5229e2}},_0x1d3594['callback']);}else{if(_0x1d3594[_0x5083ac(0x20a)]===_0x5083ac(0x1d9)){const _0x3806dc=await this['getForeignObjectsAsync'](_0x5083ac(0x1f5),_0x5083ac(0x244)),_0x27aea7=[];if(_0x3806dc)for(const _0x4d4fdd in _0x3806dc){const _0x3e99f1=_0x3806dc[_0x4d4fdd],_0x2a71e1=(_0x3e99f1['common']&&typeof _0x3e99f1[_0x5083ac(0x249)]['name']==='object'?_0x3e99f1[_0x5083ac(0x249)]['name']['de']:_0x3e99f1[_0x5083ac(0x249)][_0x5083ac(0x192)])||_0x3e99f1['common']['name'];_0x27aea7['push']({'id':_0x4d4fdd,'name':_0x2a71e1});}const _0x2698df=await this[_0x5083ac(0x1dd)](_0x5083ac(0x13b),_0x5083ac(0x244)),_0x11a3ad=[];if(_0x2698df)for(const _0x91ecd9 in _0x2698df){const _0x312b04=_0x2698df[_0x91ecd9],_0x112e23=(_0x312b04[_0x5083ac(0x249)]&&typeof _0x312b04['common']['name']===_0x5083ac(0x239)?_0x312b04[_0x5083ac(0x249)][_0x5083ac(0x192)]['de']:_0x312b04[_0x5083ac(0x249)]['name'])||_0x91ecd9[_0x5083ac(0x197)]('.')[_0x5083ac(0x224)]();_0x11a3ad[_0x5083ac(0x140)](_0x112e23);}this[_0x5083ac(0x190)](_0x1d3594['from'],_0x1d3594[_0x5083ac(0x20a)],{'success':!![],'enums':_0x27aea7,'rooms':_0x11a3ad},_0x1d3594[_0x5083ac(0x23a)]);}else{if(_0x1d3594['command']===_0x5083ac(0x1e0))try{let _0x442d58=_0x5083ac(0x1f1),_0x56e4e1=_0x5083ac(0x17a);if(this[_0x5083ac(0x22a)][_0x5083ac(0x126)]){const _0x4951b3=await recorder[_0x5083ac(0x14e)](this);_0x442d58=_0x4951b3!==null?_0x4951b3+'Â°C':_0x5083ac(0x200);}if(this[_0x5083ac(0x22a)][_0x5083ac(0x1cd)]){const _0x683397=await this[_0x5083ac(0x1a1)]('system.adapter.'+this[_0x5083ac(0x22a)][_0x5083ac(0x1cd)]);_0x56e4e1=_0x683397?'Verbunden':'Instanz\x20nicht\x20gefunden';}this['sendTo'](_0x1d3594[_0x5083ac(0x166)],_0x1d3594[_0x5083ac(0x20a)],{'success':!![],'weather':_0x442d58,'calendar':_0x56e4e1},_0x1d3594['callback']);}catch(_0x1f59dd){this[_0x5083ac(0x190)](_0x1d3594[_0x5083ac(0x166)],_0x1d3594[_0x5083ac(0x20a)],{'success':![],'error':_0x1f59dd[_0x5083ac(0x159)]},_0x1d3594[_0x5083ac(0x23a)]);}else{if(_0x1d3594[_0x5083ac(0x20a)]===_0x5083ac(0x20c))try{const _0x1880f8=_0x1d3594[_0x5083ac(0x159)][_0x5083ac(0x19b)],_0x2547ce=await this['getForeignStateAsync'](_0x1880f8+_0x5083ac(0x172));let _0x96fda5=[];if(_0x2547ce&&_0x2547ce[_0x5083ac(0x135)]){const _0x299228=JSON[_0x5083ac(0x15b)](_0x2547ce['val']),_0x2907a3=new Set();Array[_0x5083ac(0x175)](_0x299228)&&_0x299228[_0x5083ac(0x21c)](_0x1f62f5=>{const _0x1b820b=_0x5083ac;if(_0x1f62f5[_0x1b820b(0x147)])_0x2907a3[_0x1b820b(0x148)](_0x1f62f5[_0x1b820b(0x147)]);else{if(_0x1f62f5[_0x1b820b(0x20d)])_0x2907a3[_0x1b820b(0x148)](_0x1f62f5[_0x1b820b(0x20d)]);}}),_0x96fda5=Array['from'](_0x2907a3)[_0x5083ac(0x17e)]();}if(_0x96fda5['length']===0x0)_0x96fda5=[_0x5083ac(0x1c3)];this[_0x5083ac(0x190)](_0x1d3594[_0x5083ac(0x166)],_0x1d3594['command'],{'success':!![],'names':_0x96fda5},_0x1d3594['callback']);}catch(_0x5da464){this['sendTo'](_0x1d3594[_0x5083ac(0x166)],_0x1d3594['command'],{'success':![],'error':_0x5da464[_0x5083ac(0x159)]},_0x1d3594['callback']);}else{if(_0x1d3594[_0x5083ac(0x20a)]===_0x5083ac(0x223))try{await setup[_0x5083ac(0x14b)](this,'ðŸ””\x20Dies\x20ist\x20ein\x20Test\x20von\x20Cogni-Living.',![],![]),this[_0x5083ac(0x190)](_0x1d3594[_0x5083ac(0x166)],_0x1d3594['command'],{'success':!![],'message':_0x5083ac(0x1cb)},_0x1d3594[_0x5083ac(0x23a)]);}catch(_0x33504a){this['log'][_0x5083ac(0x121)]('Notification\x20Test\x20Failed:\x20'+_0x33504a[_0x5083ac(0x159)]),this[_0x5083ac(0x190)](_0x1d3594['from'],_0x1d3594[_0x5083ac(0x20a)],{'success':![],'message':_0x5083ac(0x1d1)+_0x33504a[_0x5083ac(0x159)]},_0x1d3594[_0x5083ac(0x23a)]);}}}}}}}}}}}}}}}}async[a0_0x423834(0x1f0)](){const _0x53c93e=a0_0x423834;try{const _0x41bf49=await this['getStateAsync'](setup['SYSTEM_DP_MODE']);_0x41bf49&&_0x41bf49[_0x53c93e(0x135)]&&Object[_0x53c93e(0x18c)](setup[_0x53c93e(0x1fb)])[_0x53c93e(0x1ea)](_0x41bf49[_0x53c93e(0x135)])?this[_0x53c93e(0x1f4)]=_0x41bf49[_0x53c93e(0x135)]:(this['currentSystemMode']=setup[_0x53c93e(0x1fb)][_0x53c93e(0x22f)],await this[_0x53c93e(0x15d)](setup[_0x53c93e(0x1bc)],{'val':setup[_0x53c93e(0x1fb)][_0x53c93e(0x22f)],'ack':!![]}));}catch(_0x1c6638){this[_0x53c93e(0x1f4)]=setup[_0x53c93e(0x1fb)][_0x53c93e(0x22f)];}}async[a0_0x423834(0x154)](){const _0x53ecef=a0_0x423834;try{const _0x4abfe2=this[_0x53ecef(0x22a)]['presenceDevices']||[];let _0x1642c0=![];const _0x5151d9=[];for(const _0x2d4f3e of _0x4abfe2){try{const _0x4a0dc8=await this[_0x53ecef(0x207)](_0x2d4f3e);_0x4a0dc8&&(_0x4a0dc8['val']===!![]||_0x4a0dc8[_0x53ecef(0x135)]===_0x53ecef(0x243)||_0x4a0dc8[_0x53ecef(0x135)]===0x1)&&(_0x1642c0=!![],_0x5151d9[_0x53ecef(0x140)](_0x2d4f3e));}catch(_0x4e51d0){}}return await this[_0x53ecef(0x15d)]('system.presenceWho',{'val':_0x5151d9[_0x53ecef(0x157)](',\x20'),'ack':!![]}),_0x1642c0&&(this[_0x53ecef(0x1ae)]&&(this[_0x53ecef(0x205)][_0x53ecef(0x170)](_0x53ecef(0x1d7)),recorder[_0x53ecef(0x23c)](this)),!this[_0x53ecef(0x156)]&&this['currentSystemMode']===setup[_0x53ecef(0x1fb)][_0x53ecef(0x22f)]&&await recorder[_0x53ecef(0x1c8)](this,!![])),_0x1642c0;}catch(_0x5b065b){return![];}}async['runAutopilot'](){const _0xafe1ef=a0_0x423834;this[_0xafe1ef(0x205)][_0xafe1ef(0x17b)]('ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...'),await aiAgent[_0xafe1ef(0x1ab)](this),this[_0xafe1ef(0x11f)](),this[_0xafe1ef(0x168)](),this[_0xafe1ef(0x211)]();}async[a0_0x423834(0x13d)](){const _0x185864=a0_0x423834,_0xd376a9=[_0x185864(0x1b0),_0x185864(0x130),'daswetter.0'],_0x5ec1bd=[_0x185864(0x198),_0x185864(0x19d),_0x185864(0x225)];for(const _0x4d61a8 of _0xd376a9){for(const _0x297998 of _0x5ec1bd){try{const _0x11d82c=_0x4d61a8+'.'+_0x297998,_0x21064c=await this[_0x185864(0x207)](_0x11d82c);if(_0x21064c&&_0x21064c['val']){const _0x109c69=String(_0x21064c[_0x185864(0x135)])[_0x185864(0x1c7)]();if(_0x109c69['includes']('sonn')||_0x109c69[_0x185864(0x1ea)]('sunny')||_0x109c69['includes'](_0x185864(0x153))||_0x109c69[_0x185864(0x1ea)]('clear')||_0x109c69[_0x185864(0x1ea)](_0x185864(0x1b2)))return!![];}}catch(_0x10e62d){}}}return![];}[a0_0x423834(0x168)](){const _0x3eba7a=a0_0x423834;if(!this[_0x3eba7a(0x218)])return;try{this[_0x3eba7a(0x1a7)]('LTM.trainingData.sequences',(_0xccf1c5,_0x20fa25)=>{const _0x1672a6=_0x3eba7a;_0x20fa25&&_0x20fa25[_0x1672a6(0x135)]&&pythonBridge[_0x1672a6(0x1fd)](this,_0x1672a6(0x228),{'sequences':JSON[_0x1672a6(0x15b)](_0x20fa25[_0x1672a6(0x135)])});});}catch(_0x2de868){}}async[a0_0x423834(0x211)](){const _0x3c0e0b=a0_0x423834;if(!this[_0x3c0e0b(0x218)])return;try{const _0x469aaf=await recorder[_0x3c0e0b(0x14e)](this);if(_0x469aaf===null)return;const _0x122d02={},_0x4d60d6={},_0x11b113=this['config'][_0x3c0e0b(0x22e)]||[];for(const _0x2b5745 of _0x11b113){if(_0x2b5745[_0x3c0e0b(0x238)]==='temperature'&&_0x2b5745[_0x3c0e0b(0x186)]){const _0x303b3a=this[_0x3c0e0b(0x1bb)][_0x2b5745['id']];if(_0x303b3a!==undefined)_0x122d02[_0x2b5745[_0x3c0e0b(0x186)]]=_0x303b3a;if(_0x2b5745[_0x3c0e0b(0x185)])_0x4d60d6[_0x2b5745[_0x3c0e0b(0x186)]]=!![];}}const _0x5b8134=await this[_0x3c0e0b(0x13d)]();let _0x402787={};try{const _0x120265=await this[_0x3c0e0b(0x204)](_0x3c0e0b(0x1b5));if(_0x120265&&_0x120265[_0x3c0e0b(0x135)])_0x402787=JSON[_0x3c0e0b(0x15b)](_0x120265[_0x3c0e0b(0x135)]);}catch(_0x5b6b53){}Object['keys'](_0x122d02)[_0x3c0e0b(0x144)]>0x0&&(pythonBridge[_0x3c0e0b(0x1fd)](this,_0x3c0e0b(0x222),{'current_temps':_0x122d02,'t_out':_0x469aaf,'is_sunny':_0x5b8134,'solar_flags':_0x4d60d6,'warmup_targets':_0x402787}),pythonBridge[_0x3c0e0b(0x1fd)](this,'OPTIMIZE_ENERGY',{'current_temps':_0x122d02,'t_out':_0x469aaf,'targets':{}}));}catch(_0x473e9c){}}[a0_0x423834(0x11f)](){const _0x367959=a0_0x423834;if(!this[_0x367959(0x247)]||this[_0x367959(0x247)][_0x367959(0x144)]===0x0)return;const _0x3f4380=new Array(0x60)[_0x367959(0x15e)](0x0),_0x5dc435=new Date()[_0x367959(0x17c)](0x0,0x0,0x0,0x0);this['rawEventLog'][_0x367959(0x21c)](_0x4a1200=>{const _0x2a2b9f=_0x367959,_0x5d54db=new Date(_0x4a1200[_0x2a2b9f(0x19c)]);if(_0x5d54db[_0x2a2b9f(0x125)]()>=_0x5dc435){const _0x4d180c=_0x5d54db[_0x2a2b9f(0x1b7)](),_0x5ebe4f=_0x5d54db['getMinutes'](),_0x5d1d8a=_0x4d180c*0x4+Math[_0x2a2b9f(0x230)](_0x5ebe4f/0xf);if(_0x5d1d8a>=0x0&&_0x5d1d8a<0x60)_0x3f4380[_0x5d1d8a]++;}}),this[_0x367959(0x15d)]('analysis.health.todayVector',{'val':JSON[_0x367959(0x165)](_0x3f4380),'ack':!![]});}[a0_0x423834(0x208)](){const _0x168edf=a0_0x423834;if(!this[_0x168edf(0x16a)]||this[_0x168edf(0x16a)][_0x168edf(0x144)]<0x2)return;const _0x1057f5=this[_0x168edf(0x16a)][_0x168edf(0x1df)](_0x2c4a7d=>{const _0x3f9b8e=_0x168edf,_0x1c211e=(_0x2c4a7d[_0x3f9b8e(0x13e)]||'')['toLowerCase']();return ACTIVITY_LEVEL_MAP[_0x1c211e]||0x32;});pythonBridge[_0x168edf(0x1fd)](this,_0x168edf(0x1b1),{'values':_0x1057f5,'tag':'Activity-Level'});}async['handleInfrasound'](_0x1fe7ae){const _0x45fc95=a0_0x423834;if(_0x1fe7ae==null||typeof _0x1fe7ae!==_0x45fc95(0x19f))return;if(this[_0x45fc95(0x210)])return;if(this[_0x45fc95(0x22a)]['infrasoundArmingId']){const _0x18301e=await this[_0x45fc95(0x207)](this[_0x45fc95(0x22a)][_0x45fc95(0x1ef)]);if(_0x18301e&&!_0x18301e[_0x45fc95(0x135)])return;}const _0x48907c=this[_0x45fc95(0x22a)]['infrasoundThreshold']||0.04;Math['abs'](_0x1fe7ae)>=_0x48907c&&(this[_0x45fc95(0x205)][_0x45fc95(0x1f6)](_0x45fc95(0x191)+_0x1fe7ae+'\x20hPa\x20(Limit:\x20'+_0x48907c+')'),await this[_0x45fc95(0x15d)](_0x45fc95(0x1c4),{'val':!![],'ack':!![]}),this[_0x45fc95(0x14b)](_0x45fc95(0x22b)+_0x1fe7ae+_0x45fc95(0x15c)),this[_0x45fc95(0x210)]=!![],setTimeout(()=>{this['infrasoundLocked']=![];},0x2710));}[a0_0x423834(0x14b)](_0x4ac1fc){const _0x1c1ec2=a0_0x423834;this[_0x1c1ec2(0x22a)][_0x1c1ec2(0x1f9)]&&this[_0x1c1ec2(0x22a)][_0x1c1ec2(0x129)]&&this[_0x1c1ec2(0x190)](this[_0x1c1ec2(0x22a)][_0x1c1ec2(0x129)],_0x1c1ec2(0x1fd),{'message':_0x4ac1fc,'title':_0x1c1ec2(0x20f),'priority':0x1}),this[_0x1c1ec2(0x22a)][_0x1c1ec2(0x1eb)]&&this[_0x1c1ec2(0x22a)][_0x1c1ec2(0x1b9)]&&this[_0x1c1ec2(0x190)](this['config'][_0x1c1ec2(0x1b9)],_0x1c1ec2(0x1fd),{'text':_0x4ac1fc});}}if(require[a0_0x423834(0x123)]!==module)module[a0_0x423834(0x187)]=_0x4c05c5=>new CogniLiving(_0x4c05c5);else new CogniLiving();