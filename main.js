const a0_0x2215e7=a0_0x4d98;(function(_0xe81678,_0x778b29){const _0x532d83=a0_0x4d98,_0x3341ee=_0xe81678();while(!![]){try{const _0x33b828=-parseInt(_0x532d83(0x129))/0x1+-parseInt(_0x532d83(0xf4))/0x2+parseInt(_0x532d83(0x206))/0x3+-parseInt(_0x532d83(0x105))/0x4+parseInt(_0x532d83(0x20e))/0x5*(-parseInt(_0x532d83(0xf5))/0x6)+-parseInt(_0x532d83(0x149))/0x7+parseInt(_0x532d83(0x1cf))/0x8;if(_0x33b828===_0x778b29)break;else _0x3341ee['push'](_0x3341ee['shift']());}catch(_0x2c0f98){_0x3341ee['push'](_0x3341ee['shift']());}}}(a0_0x44a6,0x9f607));const a0_0x2a00af=(function(){let _0x1789e2=!![];return function(_0x37926e,_0x3e4eea){const _0x18670b=_0x1789e2?function(){const _0x1e509a=a0_0x4d98;if(_0x3e4eea){const _0x120d26=_0x3e4eea[_0x1e509a(0x131)](_0x37926e,arguments);return _0x3e4eea=null,_0x120d26;}}:function(){};return _0x1789e2=![],_0x18670b;};}()),a0_0x3f5cc3=a0_0x2a00af(this,function(){const _0x10e91b=a0_0x4d98;return a0_0x3f5cc3[_0x10e91b(0x197)]()[_0x10e91b(0x123)](_0x10e91b(0x128))[_0x10e91b(0x197)]()[_0x10e91b(0x1d3)](a0_0x3f5cc3)[_0x10e91b(0x123)](_0x10e91b(0x128));});a0_0x3f5cc3();'use strict';const utils=require('@iobroker/adapter-core'),{GoogleGenerativeAI}=require(a0_0x2215e7(0x14a)),{spawn}=require(a0_0x2215e7(0x1cd)),path=require(a0_0x2215e7(0x150)),fs=require('fs'),installer=require(a0_0x2215e7(0x106)),scanner=require(a0_0x2215e7(0x14f)),schedulers=require(a0_0x2215e7(0x22f)),HISTORY_MAX_SIZE=0x32,RAW_LOG_MAX_SIZE=0x9c4,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL=a0_0x2215e7(0x127),SEQUENCE_TIMEOUT_MS=0x5*0x3c*0x3e8,MAX_TRAINING_SET_SIZE=0x1f4,THERMO_LOG_SIZE=0x3e8,EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,LTM_DP_RAW_LOG=a0_0x2215e7(0xd2),LTM_DP_DAILY_DIGESTS=a0_0x2215e7(0x22e),LTM_DP_STATUS=a0_0x2215e7(0x1be),LTM_DP_TRIGGER_DIGEST=a0_0x2215e7(0x1ee),LTM_DP_BASELINE_STATUS=a0_0x2215e7(0x22c),LTM_DP_DRIFT_CHANNEL=a0_0x2215e7(0x1da),LTM_DP_DRIFT_STATUS=a0_0x2215e7(0x23a),LTM_DP_DRIFT_DETAILS=a0_0x2215e7(0x21b),LTM_DP_DRIFT_LAST_CHECK=a0_0x2215e7(0x170),SYSTEM_DP_MODE=a0_0x2215e7(0xe2),SYSTEM_MODES={'NORMAL':'normal','VACATION':a0_0x2215e7(0xf9),'PARTY':a0_0x2215e7(0x1bc),'GUEST':a0_0x2215e7(0x191)},AUTO_RESET_MODES=[SYSTEM_MODES[a0_0x2215e7(0xb3)],SYSTEM_MODES[a0_0x2215e7(0x18d)]],PERSONA_MAPPING={'generic':a0_0x2215e7(0x144),'senior_aal':'PRIORIT√ÑT:\x20Gesundheit/AAL.','family':'Fokus\x20auf\x20Familienroutinen.','single_comfort':a0_0x2215e7(0xe7),'security':a0_0x2215e7(0x216)},ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};let activeSequence=[],sequenceTimer=null;async function initZombies(_0x44b4fc){const _0x5526d0=a0_0x2215e7;try{const _0x1081a5=[_0x5526d0(0xac),_0x5526d0(0x1ed)];for(const _0x159f8e of _0x1081a5){try{const _0x3b6c8a=await _0x44b4fc[_0x5526d0(0x1a6)](_0x159f8e);if(_0x3b6c8a)await _0x44b4fc['delObjectAsync'](_0x159f8e);}catch(_0x402145){}}}catch(_0x36da35){}}function a0_0x4d98(_0x4bbb61,_0x1f8fbe){const _0xaa79f2=a0_0x44a6();return a0_0x4d98=function(_0x3f5cc3,_0x2a00af){_0x3f5cc3=_0x3f5cc3-0xa3;let _0x44a69d=_0xaa79f2[_0x3f5cc3];return _0x44a69d;},a0_0x4d98(_0x4bbb61,_0x1f8fbe);}async function checkLicense(_0x4d52b1){return!![];}async function initHistory(_0x4802b2){const _0x46523f=a0_0x2215e7;try{const _0x25d7ed=await _0x4802b2[_0x46523f(0x17a)](_0x46523f(0x1a5));_0x25d7ed&&_0x25d7ed[_0x46523f(0x228)]&&(_0x4802b2[_0x46523f(0x160)]=JSON['parse'](_0x25d7ed['val']['toString']()));}catch(_0x5458ea){_0x4802b2[_0x46523f(0x160)]=[];}try{const _0x5a0ed6=await _0x4802b2[_0x46523f(0x17a)]('analysis.analysisHistory');if(_0x5a0ed6&&_0x5a0ed6[_0x46523f(0x228)])_0x4802b2[_0x46523f(0x1df)]=JSON[_0x46523f(0x1af)](_0x5a0ed6[_0x46523f(0x228)][_0x46523f(0x197)]());}catch(_0xd9de4c){_0x4802b2[_0x46523f(0x1df)]=[];}if(_0x4802b2['eventHistory']&&_0x4802b2['eventHistory'][_0x46523f(0x19b)]>0x0){_0x4802b2[_0x46523f(0x109)][_0x46523f(0x207)](_0x46523f(0xe4));for(let _0x11181a=_0x4802b2[_0x46523f(0x160)]['length']-0x1;_0x11181a>=0x0;_0x11181a--){const _0x5ba785=_0x4802b2[_0x46523f(0x160)][_0x11181a];if(_0x5ba785&&_0x5ba785['id']!==undefined&&_0x5ba785['value']!==undefined)_0x4802b2[_0x46523f(0x204)][_0x5ba785['id']]=_0x5ba785[_0x46523f(0x158)];}}}async function initSystemConfig(_0x5b1740){const _0x92f31a=a0_0x2215e7;try{const _0x4ef9a4=await _0x5b1740[_0x92f31a(0x236)](_0x92f31a(0x178));if(_0x4ef9a4&&_0x4ef9a4['common'])_0x5b1740[_0x92f31a(0x193)]={'latitude':_0x4ef9a4[_0x92f31a(0x1c9)]['latitude']||0x0,'longitude':_0x4ef9a4[_0x92f31a(0x1c9)]['longitude']||0x0,'city':_0x4ef9a4[_0x92f31a(0x1c9)][_0x92f31a(0x113)]||''};}catch(_0x35aaac){}}async function createAllObjects(_0x594f86){const _0x12b9f6=a0_0x2215e7;await _0x594f86[_0x12b9f6(0xbd)](_0x12b9f6(0xb9),{'type':_0x12b9f6(0xc7),'common':{'name':'System'},'native':{}}),await _0x594f86[_0x12b9f6(0xbd)](SYSTEM_DP_MODE,{'type':_0x12b9f6(0xc0),'common':{'name':'System\x20Mode','type':'string','role':'state','read':!![],'write':!![],'def':SYSTEM_MODES[_0x12b9f6(0x218)]},'native':{}}),await _0x594f86[_0x12b9f6(0x1ca)]('system.presenceWho',{'type':_0x12b9f6(0xc0),'common':{'name':_0x12b9f6(0x14e),'type':'string','role':_0x12b9f6(0x134),'read':!![],'write':![]},'native':{}}),await _0x594f86[_0x12b9f6(0x1ca)](_0x12b9f6(0x136),{'type':_0x12b9f6(0xc0),'common':{'name':'Last\x20raw\x20event','type':'string','role':_0x12b9f6(0x1f4),'read':!![],'write':![]},'native':{}}),await _0x594f86[_0x12b9f6(0x1ca)]('events.history',{'type':_0x12b9f6(0xc0),'common':{'name':'Event\x20History','type':_0x12b9f6(0x11f),'role':_0x12b9f6(0x1f4),'read':!![],'write':![]},'native':{}}),await _0x594f86[_0x12b9f6(0xbd)]('analysis.training',{'type':_0x12b9f6(0xc7),'common':{'name':_0x12b9f6(0xe6)},'native':{}}),await _0x594f86[_0x12b9f6(0x1ca)](_0x12b9f6(0x21f),{'type':_0x12b9f6(0xc0),'common':{'name':_0x12b9f6(0xaa),'type':_0x12b9f6(0x21a),'role':_0x12b9f6(0x1ad),'read':!![],'write':!![]},'native':{}}),await _0x594f86[_0x12b9f6(0x1ca)](_0x12b9f6(0xb4),{'type':_0x12b9f6(0xc0),'common':{'name':_0x12b9f6(0x1c2),'type':_0x12b9f6(0x21a),'role':_0x12b9f6(0x1ad),'read':!![],'write':!![]},'native':{}}),await _0x594f86[_0x12b9f6(0x1ca)](_0x12b9f6(0xf3),{'type':_0x12b9f6(0xc0),'common':{'name':_0x12b9f6(0x13d),'type':_0x12b9f6(0x21a),'role':_0x12b9f6(0x1ad),'read':!![],'write':!![]},'native':{}}),await _0x594f86['setObjectNotExistsAsync'](_0x12b9f6(0x1b0),{'type':_0x12b9f6(0xc0),'common':{'name':'Train\x20Comfort','type':_0x12b9f6(0x21a),'role':_0x12b9f6(0x1ad),'read':!![],'write':!![]},'native':{}}),await _0x594f86[_0x12b9f6(0x1ca)](_0x12b9f6(0xf6),{'type':_0x12b9f6(0xc0),'common':{'name':'Build\x20Topology','type':_0x12b9f6(0x21a),'role':_0x12b9f6(0x1ad),'read':!![],'write':!![]},'native':{}}),await _0x594f86[_0x12b9f6(0x1ca)](_0x12b9f6(0x126),{'type':_0x12b9f6(0xc0),'common':{'name':_0x12b9f6(0x130),'type':_0x12b9f6(0x11f),'role':'text','read':!![],'write':![]},'native':{}}),await _0x594f86[_0x12b9f6(0xbd)](_0x12b9f6(0x13c),{'type':_0x12b9f6(0xc7),'common':{'name':'Security\x20Monitor'},'native':{}}),await _0x594f86[_0x12b9f6(0x1ca)](_0x12b9f6(0x189),{'type':_0x12b9f6(0xc0),'common':{'name':'Anomaly\x20Score','type':_0x12b9f6(0xe1),'role':_0x12b9f6(0x158),'read':!![],'write':![]},'native':{}}),await _0x594f86[_0x12b9f6(0x1ca)]('analysis.security.currentThreshold',{'type':_0x12b9f6(0xc0),'common':{'name':_0x12b9f6(0x22d),'type':_0x12b9f6(0xe1),'role':_0x12b9f6(0x158),'read':!![],'write':![],'def':0.05},'native':{}}),await _0x594f86[_0x12b9f6(0x1ca)](_0x12b9f6(0x201),{'type':_0x12b9f6(0xc0),'common':{'name':'Last\x20Check','type':'string','role':_0x12b9f6(0xb5),'read':!![],'write':![]},'native':{}}),await _0x594f86[_0x12b9f6(0x1ca)](_0x12b9f6(0x192),{'type':_0x12b9f6(0xc0),'common':{'name':_0x12b9f6(0x224),'type':_0x12b9f6(0x11f),'role':_0x12b9f6(0x1f4),'read':!![],'write':![]},'native':{}}),await _0x594f86[_0x12b9f6(0xbd)](_0x12b9f6(0x162),{'type':'channel','common':{'name':_0x12b9f6(0x198)},'native':{}}),await _0x594f86['setObjectNotExistsAsync'](_0x12b9f6(0x187),{'type':_0x12b9f6(0xc0),'common':{'name':_0x12b9f6(0xd0),'type':_0x12b9f6(0x11f),'role':_0x12b9f6(0xb5),'read':!![],'write':![]},'native':{}}),await _0x594f86[_0x12b9f6(0x1ca)](_0x12b9f6(0x1f0),{'type':'state','common':{'name':_0x12b9f6(0x182),'type':_0x12b9f6(0x21a),'role':_0x12b9f6(0xec),'read':!![],'write':![]},'native':{}}),await _0x594f86[_0x12b9f6(0x1ca)](_0x12b9f6(0x1e6),{'type':_0x12b9f6(0xc0),'common':{'name':_0x12b9f6(0x17c),'type':_0x12b9f6(0x11f),'role':_0x12b9f6(0x134),'read':!![],'write':![]},'native':{}}),await _0x594f86[_0x12b9f6(0x1ca)]('analysis.health.trendValue',{'type':_0x12b9f6(0xc0),'common':{'name':_0x12b9f6(0x167),'type':_0x12b9f6(0xe1),'role':_0x12b9f6(0x158),'read':!![],'write':![]},'native':{}}),await _0x594f86[_0x12b9f6(0x1ca)]('analysis.health.todayVector',{'type':'state','common':{'name':_0x12b9f6(0x12c),'type':_0x12b9f6(0x11f),'role':_0x12b9f6(0x1f4),'read':!![],'write':![]},'native':{}}),await _0x594f86[_0x12b9f6(0x1ca)](_0x12b9f6(0xe9),{'type':_0x12b9f6(0xc0),'common':{'name':_0x12b9f6(0x11a),'type':_0x12b9f6(0xe1),'role':'value','read':!![],'write':![]},'native':{}}),await _0x594f86[_0x12b9f6(0xbd)]('analysis.energy',{'type':_0x12b9f6(0xc7),'common':{'name':'Energy\x20Intelligence'},'native':{}}),await _0x594f86[_0x12b9f6(0x1ca)](_0x12b9f6(0xb1),{'type':_0x12b9f6(0xc0),'common':{'name':_0x12b9f6(0x1fb),'type':_0x12b9f6(0x11f),'role':'text','read':!![],'write':![]},'native':{}}),await _0x594f86[_0x12b9f6(0x1ca)](_0x12b9f6(0xbf),{'type':_0x12b9f6(0xc0),'common':{'name':_0x12b9f6(0xd3),'type':_0x12b9f6(0x11f),'role':_0x12b9f6(0x134),'read':!![],'write':![]},'native':{}}),await _0x594f86[_0x12b9f6(0x1ca)]('analysis.energy.forecast',{'type':_0x12b9f6(0xc0),'common':{'name':'Temperature\x20Forecast','type':_0x12b9f6(0x11f),'role':_0x12b9f6(0x1f4),'read':!![],'write':![]},'native':{}}),await _0x594f86[_0x12b9f6(0xbd)](_0x12b9f6(0xa6),{'type':'channel','common':{'name':_0x12b9f6(0xa6)},'native':{}}),await _0x594f86[_0x12b9f6(0xbd)](LTM_DP_RAW_LOG,{'type':_0x12b9f6(0xc0),'common':{'name':_0x12b9f6(0x1b5),'type':_0x12b9f6(0x11f),'role':'json','read':!![],'write':![]},'native':{}}),await _0x594f86[_0x12b9f6(0xbd)](LTM_DP_DAILY_DIGESTS,{'type':_0x12b9f6(0xc0),'common':{'name':'Daily\x20Digests','type':_0x12b9f6(0x11f),'role':_0x12b9f6(0x1f4),'read':!![],'write':![]},'native':{}}),await _0x594f86[_0x12b9f6(0x1ca)](_0x12b9f6(0x186),{'type':_0x12b9f6(0xc0),'common':{'name':'Sequences','type':_0x12b9f6(0x11f),'role':_0x12b9f6(0x1f4),'read':!![],'write':![]},'native':{}}),await _0x594f86[_0x12b9f6(0x1ca)](_0x12b9f6(0x213),{'type':_0x12b9f6(0xc0),'common':{'name':'Thermodynamics','type':_0x12b9f6(0x11f),'role':'json','read':!![],'write':![]},'native':{}}),await _0x594f86[_0x12b9f6(0x1ca)](_0x12b9f6(0x168),{'type':_0x12b9f6(0xc0),'common':{'name':_0x12b9f6(0x23d),'type':_0x12b9f6(0x21a),'role':_0x12b9f6(0x1ad),'read':!![],'write':!![]},'native':{}}),await _0x594f86[_0x12b9f6(0x1ca)](_0x12b9f6(0x17f),{'type':'state','common':{'name':_0x12b9f6(0xf7),'type':_0x12b9f6(0x21a),'role':_0x12b9f6(0x1ad),'read':!![],'write':!![]},'native':{}}),await _0x594f86[_0x12b9f6(0x1ca)]('analysis.isAlert',{'type':_0x12b9f6(0xc0),'common':{'name':'Alert\x20Status','type':'boolean','role':_0x12b9f6(0x10a),'read':!![],'write':![]},'native':{}}),await _0x594f86[_0x12b9f6(0x1ca)](_0x12b9f6(0x1d2),{'type':_0x12b9f6(0xc0),'common':{'name':'Alert\x20Reason','type':_0x12b9f6(0x11f),'role':_0x12b9f6(0x221),'read':!![],'write':![]},'native':{}}),await _0x594f86[_0x12b9f6(0x1ca)](_0x12b9f6(0x12e),{'type':_0x12b9f6(0xc0),'common':{'name':_0x12b9f6(0x21e),'type':_0x12b9f6(0x11f),'role':_0x12b9f6(0x134),'read':!![],'write':![]},'native':{}}),await _0x594f86[_0x12b9f6(0x1ca)](_0x12b9f6(0xcf),{'type':_0x12b9f6(0xc0),'common':{'name':'Pattern\x20Detected','type':'boolean','role':_0x12b9f6(0xec),'read':!![],'write':![]},'native':{}}),await _0x594f86[_0x12b9f6(0x1ca)](_0x12b9f6(0x230),{'type':_0x12b9f6(0xc0),'common':{'name':_0x12b9f6(0x183),'type':_0x12b9f6(0x11f),'role':_0x12b9f6(0x134),'read':!![],'write':![]},'native':{}}),await _0x594f86[_0x12b9f6(0x1ca)](_0x12b9f6(0x1b6),{'type':_0x12b9f6(0xc0),'common':{'name':'Detected\x20Patterns','type':_0x12b9f6(0x11f),'role':'json','read':!![],'write':![]},'native':{}}),await _0x594f86[_0x12b9f6(0x1ca)](_0x12b9f6(0xc4),{'type':_0x12b9f6(0xc0),'common':{'name':_0x12b9f6(0xe3),'type':_0x12b9f6(0x11f),'role':_0x12b9f6(0x134),'read':!![],'write':![]},'native':{}}),await _0x594f86['setObjectNotExistsAsync'](_0x12b9f6(0x1c5),{'type':_0x12b9f6(0xc0),'common':{'name':_0x12b9f6(0xed),'type':'string','role':_0x12b9f6(0x134),'read':!![],'write':![]},'native':{}}),await _0x594f86[_0x12b9f6(0x1ca)](_0x12b9f6(0x118),{'type':'state','common':{'name':_0x12b9f6(0x1ce),'type':_0x12b9f6(0x21a),'role':_0x12b9f6(0x1ec),'read':!![],'write':!![]},'native':{}}),await _0x594f86[_0x12b9f6(0x1ca)]('analysis.automation.triggerAction',{'type':_0x12b9f6(0xc0),'common':{'name':_0x12b9f6(0x13e),'type':'boolean','role':_0x12b9f6(0x1ad),'read':!![],'write':!![]},'native':{}});}async function loadSystemMode(_0x4ccc97){const _0x38cb6f=a0_0x2215e7;try{const _0x1c4f68=await _0x4ccc97['getStateAsync'](SYSTEM_DP_MODE);_0x1c4f68&&_0x1c4f68[_0x38cb6f(0x228)]&&Object[_0x38cb6f(0x156)](SYSTEM_MODES)['includes'](_0x1c4f68['val'])?_0x4ccc97[_0x38cb6f(0x1d6)]=_0x1c4f68[_0x38cb6f(0x228)]:(_0x4ccc97['currentSystemMode']=SYSTEM_MODES[_0x38cb6f(0x218)],await _0x4ccc97['setStateAsync'](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x38cb6f(0x218)],'ack':!![]}));}catch(_0x2e2b34){_0x4ccc97[_0x38cb6f(0x1d6)]=SYSTEM_MODES[_0x38cb6f(0x218)];}}async function loadRawEventLog(_0x19832d){const _0x3bcef4=a0_0x2215e7;try{const _0x3d78e4=await _0x19832d[_0x3bcef4(0x17a)](LTM_DP_RAW_LOG);if(_0x3d78e4&&_0x3d78e4[_0x3bcef4(0x228)])_0x19832d[_0x3bcef4(0x223)]=JSON[_0x3bcef4(0x1af)](_0x3d78e4['val']);}catch(_0x46e9c4){_0x19832d['rawEventLog']=[];}}async function saveRawEventLog(_0x1b50a7){const _0x7ff51b=a0_0x2215e7;if(_0x1b50a7['rawEventLog'][_0x7ff51b(0x19b)]>RAW_LOG_MAX_SIZE)_0x1b50a7[_0x7ff51b(0x223)][_0x7ff51b(0xbb)](0x0,_0x1b50a7[_0x7ff51b(0x223)][_0x7ff51b(0x19b)]-RAW_LOG_MAX_SIZE);await _0x1b50a7[_0x7ff51b(0xbe)](LTM_DP_RAW_LOG,{'val':JSON[_0x7ff51b(0x17e)](_0x1b50a7['rawEventLog']),'ack':!![]});}async function loadDailyDigests(_0x470675){const _0x1346c3=a0_0x2215e7;try{const _0x4772d0=await _0x470675[_0x1346c3(0x17a)](LTM_DP_DAILY_DIGESTS);if(_0x4772d0&&_0x4772d0[_0x1346c3(0x228)])_0x470675['dailyDigests']=JSON[_0x1346c3(0x1af)](_0x4772d0['val']);}catch(_0x1f834a){_0x470675[_0x1346c3(0x1a9)]=[];}await updateBaselineStatus(_0x470675);}async function saveDailyDigests(_0x259dbb,_0x9acecc=!![]){const _0x3bb4ba=a0_0x2215e7,_0x27bc32=_0x259dbb[_0x3bb4ba(0xa5)][_0x3bb4ba(0x229)]||0x3c;_0x259dbb[_0x3bb4ba(0x1a9)]['length']>_0x27bc32&&_0x259dbb[_0x3bb4ba(0x1a9)][_0x3bb4ba(0xbb)](0x0,_0x259dbb[_0x3bb4ba(0x1a9)]['length']-_0x27bc32);await _0x259dbb['setStateAsync'](LTM_DP_DAILY_DIGESTS,{'val':JSON['stringify'](_0x259dbb[_0x3bb4ba(0x1a9)]),'ack':!![]});if(_0x9acecc)await updateBaselineStatus(_0x259dbb);}async function updateAnalysisHistory(_0x2eabb3,_0xea77fe){const _0x3c6026=a0_0x2215e7;_0x2eabb3[_0x3c6026(0x1df)]['unshift'](_0xea77fe);if(_0x2eabb3['analysisHistory'][_0x3c6026(0x19b)]>HISTORY_MAX_SIZE)_0x2eabb3[_0x3c6026(0x1df)][_0x3c6026(0x10e)]();await _0x2eabb3[_0x3c6026(0xbe)](_0x3c6026(0x112),{'val':JSON[_0x3c6026(0x17e)](_0x2eabb3[_0x3c6026(0x1df)]),'ack':!![]});}async function updateBaselineStatus(_0x445192){const _0x51ef82=a0_0x2215e7;if(!_0x445192[_0x51ef82(0xdd)]){await _0x445192[_0x51ef82(0xbe)](LTM_DP_BASELINE_STATUS,{'val':_0x51ef82(0x202),'ack':!![]});return;}const _0x6f57ab=_0x445192[_0x51ef82(0x1a9)][_0x51ef82(0x19b)]>=(_0x445192[_0x51ef82(0xa5)][_0x51ef82(0x142)]||0x7)?_0x51ef82(0x135)+_0x445192[_0x51ef82(0x1a9)][_0x51ef82(0x19b)]+_0x51ef82(0xeb):_0x51ef82(0x137)+_0x445192['dailyDigests'][_0x51ef82(0x19b)]+'/'+(_0x445192[_0x51ef82(0xa5)][_0x51ef82(0x142)]||0x7)+')';await _0x445192[_0x51ef82(0xbe)](LTM_DP_BASELINE_STATUS,{'val':_0x6f57ab,'ack':!![]});}async function initSensorSubscriptions(_0x2edf02){const _0x5c0508=a0_0x2215e7,_0x51f80d=_0x2edf02['config'][_0x5c0508(0xb2)];if(_0x51f80d)for(const _0x369834 of _0x51f80d){await _0x2edf02[_0x5c0508(0x16c)](_0x369834['id']);}}async function initPresenceSubscriptions(_0x1d1b11){const _0x474ffc=a0_0x2215e7,_0x567ee1=_0x1d1b11[_0x474ffc(0xa5)][_0x474ffc(0x1d0)];if(_0x567ee1)for(const _0x176694 of _0x567ee1){await _0x1d1b11[_0x474ffc(0x16c)](_0x176694);}}async function setupTelegramListener(_0x178ff1){const _0x93ae8e=a0_0x2215e7,_0x159ed1=_0x178ff1[_0x93ae8e(0xa5)][_0x93ae8e(0x159)];if(_0x178ff1[_0x93ae8e(0xa5)][_0x93ae8e(0x1ac)]&&_0x159ed1)await _0x178ff1[_0x93ae8e(0x16c)](_0x159ed1+_0x93ae8e(0x151));}async function checkWifiPresence(_0x35fbec){const _0x249664=a0_0x2215e7;try{const _0x252805=_0x35fbec[_0x249664(0xa5)][_0x249664(0x1d0)]||[];let _0x3272ec=![];const _0x4744ed=[];for(const _0x11f61b of _0x252805){try{const _0x274b54=await _0x35fbec['getForeignStateAsync'](_0x11f61b);_0x274b54&&(_0x274b54[_0x249664(0x228)]===!![]||_0x274b54[_0x249664(0x228)]===_0x249664(0x1c3)||_0x274b54[_0x249664(0x228)]===0x1)&&(_0x3272ec=!![],_0x4744ed[_0x249664(0x19f)](_0x11f61b));}catch(_0x2ad1d8){}}return await _0x35fbec[_0x249664(0xbe)]('system.presenceWho',{'val':_0x4744ed[_0x249664(0xc1)](',\x20'),'ack':!![]}),_0x3272ec&&(_0x35fbec[_0x249664(0x1ae)]&&(_0x35fbec[_0x249664(0x109)][_0x249664(0x207)](_0x249664(0x1e3)),abortExitTimer(_0x35fbec)),!_0x35fbec['isPresent']&&_0x35fbec[_0x249664(0x1d6)]===SYSTEM_MODES[_0x249664(0x218)]&&await setPresence(_0x35fbec,!![])),_0x3272ec;}catch(_0x4b090d){return![];}}function startExitTimer(_0x1abe3e){const _0x2478fe=a0_0x2215e7;abortExitTimer(_0x1abe3e),_0x1abe3e[_0x2478fe(0xc9)]=!![],_0x1abe3e[_0x2478fe(0x1de)]=setTimeout(()=>{const _0x1cb032=_0x2478fe;_0x1abe3e[_0x1cb032(0xc9)]=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),_0x1abe3e[_0x2478fe(0x1ae)]=setTimeout(()=>{const _0x15dffa=_0x2478fe;setPresence(_0x1abe3e,![]),_0x1abe3e[_0x15dffa(0x1ae)]=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}function abortExitTimer(_0x350455){const _0x187a5a=a0_0x2215e7;if(_0x350455['exitTimer'])clearTimeout(_0x350455[_0x187a5a(0x1ae)]);if(_0x350455['exitGraceTimer'])clearTimeout(_0x350455[_0x187a5a(0x1de)]);_0x350455[_0x187a5a(0x1ae)]=null,_0x350455['exitGraceTimer']=null,_0x350455[_0x187a5a(0xc9)]=![];}async function setPresence(_0x32ac1,_0x4edf91){const _0x37ebe5=a0_0x2215e7;if(_0x32ac1[_0x37ebe5(0xc5)]===_0x4edf91)return;_0x32ac1[_0x37ebe5(0xc5)]=_0x4edf91,await _0x32ac1[_0x37ebe5(0xbe)](_0x37ebe5(0x235),{'val':_0x4edf91,'ack':!![]});}async function executeAutomationAction(_0x1d508d){const _0x43b6df=a0_0x2215e7;try{const _0x4e6531=await _0x1d508d[_0x43b6df(0x17a)](_0x43b6df(0xc4)),_0xd10f8=await _0x1d508d[_0x43b6df(0x17a)](_0x43b6df(0x1c5));if(_0x4e6531&&_0x4e6531['val']&&_0xd10f8){const _0x51d685=_0x4e6531[_0x43b6df(0x228)];let _0x5e3529=_0xd10f8[_0x43b6df(0x228)];try{_0x5e3529=JSON[_0x43b6df(0x1af)](_0x5e3529);}catch(_0x188fd1){}_0x1d508d[_0x43b6df(0x109)][_0x43b6df(0x207)](_0x43b6df(0xfb)+_0x51d685+_0x43b6df(0x1aa)+_0x5e3529),await _0x1d508d['setForeignStateAsync'](_0x51d685,_0x5e3529);}else _0x1d508d['log'][_0x43b6df(0x140)](_0x43b6df(0x234));}catch(_0x1c1803){_0x1d508d[_0x43b6df(0x109)][_0x43b6df(0x19e)](_0x43b6df(0xe5)+_0x1c1803[_0x43b6df(0x227)]);}}async function processSensorEvent(_0x2058d8,_0x34a82e,_0x45e013,_0x5a5df0){const _0x37a19e=a0_0x2215e7;if(!_0x5a5df0)return;const _0x1406df=_0x45e013['val'],_0x5b0dae=Date['now'](),_0x4afaa1=_0x2058d8[_0x37a19e(0x204)][_0x34a82e];_0x2058d8[_0x37a19e(0x204)][_0x34a82e]=_0x1406df;if(!_0x5a5df0[_0x37a19e(0x188)]&&_0x4afaa1!=undefined&&_0x4afaa1==_0x1406df)return;const _0x52382c=(_0x5a5df0[_0x37a19e(0x153)]||'')['toLowerCase'](),_0x505c0c=_0x52382c[_0x37a19e(0x12f)](_0x37a19e(0x180))||_0x52382c[_0x37a19e(0x12f)](_0x37a19e(0x1cc))||_0x52382c[_0x37a19e(0x12f)](_0x37a19e(0xee))||_0x52382c[_0x37a19e(0x12f)](_0x37a19e(0x148));_0x2058d8[_0x37a19e(0xdd)]&&_0x505c0c&&recordThermodynamics(_0x2058d8,_0x34a82e,_0x1406df,_0x5a5df0[_0x37a19e(0xff)]);const _0x5eef86={'timestamp':_0x5b0dae,'id':_0x34a82e,'name':_0x5a5df0['name'],'type':_0x5a5df0[_0x37a19e(0x153)],'location':_0x5a5df0[_0x37a19e(0xff)],'value':_0x1406df};_0x2058d8[_0x37a19e(0x160)][_0x37a19e(0x20c)](_0x5eef86);if(_0x2058d8[_0x37a19e(0x160)][_0x37a19e(0x19b)]>HISTORY_MAX_SIZE)_0x2058d8[_0x37a19e(0x160)][_0x37a19e(0x10e)]();await _0x2058d8[_0x37a19e(0xbe)]('events.lastEvent',{'val':JSON[_0x37a19e(0x17e)](_0x5eef86),'ack':!![]}),await _0x2058d8['setStateAsync'](_0x37a19e(0x1a5),{'val':JSON['stringify'](_0x2058d8[_0x37a19e(0x160)]),'ack':!![]});_0x2058d8[_0x37a19e(0xdd)]&&(_0x2058d8['rawEventLog'][_0x37a19e(0x19f)](_0x5eef86),await saveRawEventLog(_0x2058d8),recordSequence(_0x2058d8,_0x5eef86));if(_0x5a5df0[_0x37a19e(0x203)]&&_0x1406df===!![]){if(_0x2058d8['isPresent']&&!_0x2058d8[_0x37a19e(0xc9)])startExitTimer(_0x2058d8);else{if(!_0x2058d8[_0x37a19e(0xc5)])setPresence(_0x2058d8,!![]);}}else{if(_0x5a5df0['type']===_0x37a19e(0xf2)&&_0x1406df===!![]){if(_0x2058d8[_0x37a19e(0x1ae)])abortExitTimer(_0x2058d8);if(!_0x2058d8['isPresent']&&_0x2058d8[_0x37a19e(0x1d6)]===SYSTEM_MODES[_0x37a19e(0x218)])setPresence(_0x2058d8,!![]);}}}async function recordThermodynamics(_0x584b73,_0x401d4a,_0x21d850,_0x3ebf36){const _0x8bd060=a0_0x2215e7,_0x1ce8fb=await getOutsideTemperatureNumeric(_0x584b73),_0x15bfe5=await _0x584b73[_0x8bd060(0x17a)](_0x8bd060(0x213));let _0x86985f=[];if(_0x15bfe5&&_0x15bfe5[_0x8bd060(0x228)])try{_0x86985f=JSON['parse'](_0x15bfe5[_0x8bd060(0x228)]);}catch(_0x49bc1d){}_0x86985f[_0x8bd060(0x19f)]({'ts':Date['now'](),'room':_0x3ebf36||_0x8bd060(0x1b7),'t_in':_0x21d850,'t_out':_0x1ce8fb});if(_0x86985f[_0x8bd060(0x19b)]>THERMO_LOG_SIZE)_0x86985f[_0x8bd060(0x14d)]();await _0x584b73[_0x8bd060(0xbe)](_0x8bd060(0x213),{'val':JSON['stringify'](_0x86985f),'ack':!![]});}async function getOutsideTemperatureNumeric(_0x571fbf){const _0x463242=a0_0x2215e7;if(_0x571fbf['config'][_0x463242(0x20b)])try{const _0x5295d3=await _0x571fbf[_0x463242(0xd7)](_0x571fbf['config'][_0x463242(0x20b)]);if(_0x5295d3&&_0x5295d3[_0x463242(0x228)]!==undefined&&_0x5295d3['val']!==null)return parseFloat(_0x5295d3['val']);}catch(_0x375ea9){}const _0x3e007a=_0x571fbf[_0x463242(0xa5)][_0x463242(0x116)];if(!_0x571fbf['config']['useWeather']||!_0x3e007a)return null;try{let _0x10ad21='';if(_0x3e007a[_0x463242(0x12f)](_0x463242(0x16e)))_0x10ad21=_0x3e007a+'.Current.Temperature';else{if(_0x3e007a[_0x463242(0x12f)](_0x463242(0x211)))_0x10ad21=_0x3e007a+_0x463242(0x1db);else{if(_0x3e007a[_0x463242(0x12f)](_0x463242(0x1c8)))_0x10ad21=_0x3e007a+'.forecast.current.temperature';else{if(_0x3e007a['includes'](_0x463242(0x174)))_0x10ad21=_0x3e007a+'.forecast.current.temp';}}}if(_0x10ad21){const _0x196747=await _0x571fbf[_0x463242(0xd7)](_0x10ad21);if(_0x196747&&_0x196747['val']!==undefined&&_0x196747[_0x463242(0x228)]!==null)return parseFloat(_0x196747[_0x463242(0x228)]);}}catch(_0x26ef3c){}return null;}async function recordSequence(_0x3eac53,_0x479799){const _0x34f447=a0_0x2215e7,_0xb76bf=(_0x479799[_0x34f447(0x153)]||'')[_0x34f447(0x177)](),_0x437270=[_0x34f447(0xf2),_0x34f447(0xce),_0x34f447(0xae),'presence',_0x34f447(0x108),'door',_0x34f447(0x23b),'window','fenster',_0x34f447(0x200),_0x34f447(0x133),_0x34f447(0xea),_0x34f447(0x1ba),'switch',_0x34f447(0xe8),'dimmer',_0x34f447(0x15d)];if(!_0x437270[_0x34f447(0xa3)](_0x4e09a7=>_0xb76bf[_0x34f447(0x12f)](_0x4e09a7)))return;if(!_0x479799[_0x34f447(0x158)])return;if(sequenceTimer)clearTimeout(sequenceTimer);activeSequence[_0x34f447(0x19f)]({'loc':_0x479799[_0x34f447(0xff)]||_0x34f447(0x1b7),'id':_0x479799['id'],'ts':Date[_0x34f447(0x175)]()}),sequenceTimer=setTimeout(async()=>{const _0x2dbf8b=_0x34f447;if(activeSequence[_0x2dbf8b(0x19b)]>0x1)await saveCompletedSequence(_0x3eac53);activeSequence=[];},SEQUENCE_TIMEOUT_MS);}async function saveCompletedSequence(_0x3686d1){const _0x2a63fa=a0_0x2215e7;try{const _0x4dc7d6=await _0x3686d1['getStateAsync'](_0x2a63fa(0x186));let _0x20189e=[];if(_0x4dc7d6&&_0x4dc7d6[_0x2a63fa(0x228)])try{_0x20189e=JSON['parse'](_0x4dc7d6['val']);}catch(_0x501cd9){}const _0x195455=activeSequence[0x0]['ts'],_0x557e96=activeSequence['map'](_0x8ecd3a=>({'loc':_0x8ecd3a[_0x2a63fa(0x18c)],'t_delta':Math[_0x2a63fa(0xdf)]((_0x8ecd3a['ts']-_0x195455)/0x3e8)})),_0x4b7885={'timestamp':new Date(_0x195455)['toISOString'](),'steps':_0x557e96,'duration':Math['round']((activeSequence[activeSequence[_0x2a63fa(0x19b)]-0x1]['ts']-_0x195455)/0x3e8),'daytime':new Date(_0x195455)['getHours']()};_0x20189e[_0x2a63fa(0x19f)](_0x4b7885);if(_0x20189e['length']>MAX_TRAINING_SET_SIZE)_0x20189e[_0x2a63fa(0x14d)]();await _0x3686d1[_0x2a63fa(0xbe)]('LTM.trainingData.sequences',{'val':JSON[_0x2a63fa(0x17e)](_0x20189e),'ack':!![]}),runSecurityCheck(_0x3686d1,_0x4b7885);}catch(_0x4fc02f){_0x3686d1[_0x2a63fa(0x109)][_0x2a63fa(0x19e)]('[RECORDER]\x20Error:\x20'+_0x4fc02f['message']);}}function runSecurityCheck(_0x5826d2,_0x229756){const _0x554b4e=a0_0x2215e7;if(!_0x5826d2[_0x554b4e(0xdd)])return;sendToPython(_0x5826d2,_0x554b4e(0x11b),{'sequence':_0x229756});}async function createDailyDigest(_0x38ad5e){const _0x86adb1=a0_0x2215e7;if(!_0x38ad5e[_0x86adb1(0xdd)])return;await _0x38ad5e[_0x86adb1(0xbe)](LTM_DP_STATUS,{'val':_0x86adb1(0x1f8),'ack':!![]});if(!_0x38ad5e[_0x86adb1(0x141)]||_0x38ad5e['rawEventLog'][_0x86adb1(0x19b)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x38ad5e[_0x86adb1(0xbe)](LTM_DP_STATUS,{'val':_0x86adb1(0x21c),'ack':!![]});return;}const _0x171408=JSON[_0x86adb1(0x1af)](JSON[_0x86adb1(0x17e)](_0x38ad5e[_0x86adb1(0x223)])),_0x51e1f4=_0x171408['length'],_0x21cf40='ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a'+JSON['stringify'](_0x171408);try{const _0x23fcd8=await _0x38ad5e[_0x86adb1(0x141)][_0x86adb1(0xfa)](_0x21cf40),_0x51024d=JSON[_0x86adb1(0x1af)](_0x23fcd8[_0x86adb1(0x1ab)][_0x86adb1(0x134)]()[_0x86adb1(0x19d)](/```json|```/g,'')[_0x86adb1(0x104)]()),_0x2f6091={'timestamp':new Date()[_0x86adb1(0x1e2)](),'eventCount':_0x51e1f4,'summary':_0x51024d['summary']||_0x86adb1(0xfe),'activityLevel':_0x51024d[_0x86adb1(0x12b)]||_0x86adb1(0x13b),'systemMode':_0x38ad5e[_0x86adb1(0x1d6)]};_0x38ad5e[_0x86adb1(0x1a9)][_0x86adb1(0x19f)](_0x2f6091),await saveDailyDigests(_0x38ad5e),_0x38ad5e[_0x86adb1(0x223)]=[],await saveRawEventLog(_0x38ad5e),await _0x38ad5e[_0x86adb1(0xbe)](LTM_DP_STATUS,{'val':'Success','ack':!![]});if(_0x38ad5e[_0x86adb1(0xdd)])sendToPython(_0x38ad5e,'ANALYZE_HEALTH',{'digest':_0x2f6091});}catch(_0xd0d6e4){_0x38ad5e[_0x86adb1(0x109)]['error'](_0xd0d6e4[_0x86adb1(0x227)]);}}async function runBaselineDriftAnalysis(_0x384de8){const _0x41fab0=a0_0x2215e7;if(!_0x384de8[_0x41fab0(0xdd)]||!_0x384de8[_0x41fab0(0x141)])return;const _0x5555b8=_0x384de8[_0x41fab0(0xa5)][_0x41fab0(0x233)]||0xe;if(_0x384de8['dailyDigests'][_0x41fab0(0x19b)]<_0x5555b8+0x7){await _0x384de8[_0x41fab0(0xbe)](LTM_DP_DRIFT_STATUS,{'val':_0x41fab0(0xa4),'ack':!![]});return;}const _0x100ff2=_0x384de8[_0x41fab0(0x1a9)][_0x41fab0(0x1e9)](-_0x5555b8),_0x66a9f6=_0x384de8[_0x41fab0(0x1a9)][_0x41fab0(0x1e9)](0x0,_0x384de8[_0x41fab0(0x1a9)][_0x41fab0(0x19b)]-_0x5555b8),_0x46155e=_0x41fab0(0x1fd)+JSON['stringify'](_0x66a9f6)+_0x41fab0(0x143)+JSON[_0x41fab0(0x17e)](_0x100ff2);try{const _0x31e4c6=await _0x384de8['geminiModel'][_0x41fab0(0xfa)](_0x46155e),_0x47017a=JSON['parse'](_0x31e4c6[_0x41fab0(0x1ab)][_0x41fab0(0x134)]()[_0x41fab0(0x19d)](/```json|```/g,'')[_0x41fab0(0x104)]());_0x47017a[_0x41fab0(0xa9)]&&(await _0x384de8[_0x41fab0(0xbe)](LTM_DP_DRIFT_STATUS,{'val':_0x47017a[_0x41fab0(0xa9)],'ack':!![]}),await _0x384de8[_0x41fab0(0xbe)](LTM_DP_DRIFT_DETAILS,{'val':_0x47017a[_0x41fab0(0x1fc)],'ack':!![]}),await _0x384de8[_0x41fab0(0xbe)](LTM_DP_DRIFT_LAST_CHECK,{'val':Date[_0x41fab0(0x175)](),'ack':!![]}));}catch(_0x5d15ad){}}function a0_0x44a6(){const _0x584ac0=['LTM','üï∏Ô∏è\x20Topology\x20Map\x20updated.','close','baselineDrift','Train\x20Security','testContext','analysis.history_debug_00','change_percent','pr√§senz','exports','onMessage','analysis.energy.insulationScore','devices','PARTY','analysis.training.triggerHealth','date','enum.functions.*','[RESULT]','triggerBriefing','system','Training\x20Error:\x20','splice','getFullYear','extendObjectAsync','setStateAsync','analysis.energy.heatingScore','state','join',')\x20-\x20SAFE\x20BOOT','TREND_RESULT','analysis.automation.targetId','isPresent','\x20new\x20patterns.','channel','ltmJob','isGracePeriodActive','rating','‚úÖ\x20HEALTH\x20TRAINED.','scanForDevices','status','bewegung','analysis.automation.patternDetected','Last\x20Check','existsSync','LTM.rawEventLog','Heating\x20Score','üß™\x20Simulating\x20Butler\x20Proposal:\x20','python_service','rule','getForeignStateAsync','licenseKey','üõãÔ∏è\x20BUTLER:\x20Keine\x20neuen\x20Muster\x20gefunden.','üêç\x20Python\x20Pong','object','analysis.energy.forecast','isProVersion','analysis.health.trendValue','round','‚ö†Ô∏è\x20SECURITY\x20ALARM:\x20','number','system.mode','Target\x20ID','Restoring\x20sensor\x20cache...','BUTLER\x20Execution\x20Error:\x20','AI\x20Training','Fokus\x20auf\x20Komfort.','schalter','analysis.health.gaitSpeed','light','\x20Tage)','indicator','Target\x20Value','klima','sendTo','Gemini\x20AI\x20initialized.','getMinutes','motion','analysis.training.triggerEnergy','61406PjJJRo','6iZsmnD','analysis.training.triggerTopology','Trigger\x20Briefing','¬∞C,\x20','vacation','generateContent','ü§ñ\x20BUTLER:\x20Executing\x20Action\x20->\x20','üï∏Ô∏è\x20Building\x20Topology\x20Matrix...','BUILD_TOPOLOGY','Digest','location','TOPOLOGY_RESULT','\x20->\x20','[LOG]','ENERGY_TRAIN_RESULT','trim','639876HNFZFN','./lib/installer','targetId','occupancy','log','indicator.alarm','N/A','geminiApiKey','KI-Modell\x20nicht\x20initialisiert','pop','stdin','onStateChange','analysis.security.currentThreshold','analysis.analysisHistory','city','üöÄ\x20Starting\x20NUUKANNI\x20Logic\x20(v0.12.10)...','Err:\x20','weatherInstance','aiPersona','analysis.automation.autoApply','toFixed','Gait\x20Speed\x20Trend','ANALYZE_SEQUENCE','ANOMALY','inactivityThresholdHours','üìù\x20Feedback\x20received:\x20','string','.forecast.current.state','cancel','dismissAutomation','search','.\x20EMERGENCY:\x20','debug','analysis.training.status','models/gemini-flash-latest','(((.+)+)+)+$','1105243wZyqjJ','setupBriefingScheduler','activityLevel','Today\x20Vector\x20(15m)','analysis.isAlert','analysis.activitySummary','includes','Training\x20Status','apply','useCalendar','kontakt','text','Aktiv\x20(','events.lastEvent','Lernphase\x20(','Unbekannt','.forecast.current.temperature','success','normal','analysis.security','Train\x20Energy','Trigger\x20Action','setupLtmScheduler','warn','geminiModel','minDaysForBaseline','\x0aSTB:\x20','Analysiere\x20ausgewogen.','cogni-living\x20adapter\x20starting\x20(v','getDate','callback','heizung','2692137EPwjqV','@google/generative-ai','detected','Failed:\x20','shift','Who\x20is\x20present?','./lib/scanner','path','.communicate.request','instance','type','analysisInterval','unknown','values','threshold','value','notifyTelegramInstance','writable','onUnload','ü§ñ\x20Autopilot:\x20Running\x20periodic\x20analysis...','lampe','Gemini\x20Error:\x20','targetValue','eventHistory','autoApply','analysis.health','ack','from','Keine\x20Termine.','substring','Trend\x20Value','analysis.trigger','getCalendarNames','Gemini\x20Init\x20Error:\x20','HEALTH_TRAIN_RESULT','subscribeForeignStatesAsync','application/json','accuweather','getEnums','LTM.driftAnalysis.lastCheck','analysis.automation.triggerAction','getGenerativeModel','Sec-Training\x20started...','weatherunderground','now','Keine\x20Wetterdaten\x20verf√ºgbar.','toLowerCase','system.config','description','getStateAsync','setHours','Trend','split','stringify','analysis.triggerBriefing','temperature','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','Anomaly\x20Detected','Description','python3','checkAndInstall','LTM.trainingData.sequences','analysis.health.lastCheck','logDuplicates','analysis.security.lastScore','COMFORT_RESULT','dependencyInstallInProgress','loc','GUEST','startsWith','.\x20EVENTS:\x20','apiKey','guest','analysis.security.topologyMatrix','systemConfig','ANALYZE_TREND','scanDevices','Kein\x20API\x20Key.','toString','Health\x20Analysis','.\x20SYSTEM_MODE:\x20','testApiKey','length','pythonProcess','replace','error','push','keys','timestamp','Regel\x20erkannt:\x20','User\x20dismissed\x20automation\x20proposal.','lastAlertState','events.history','getObjectAsync','analysisTimer','getForeignObjectsAsync','dailyDigests','\x20=\x20','response','notifyTelegramEnabled','button','exitTimer','parse','analysis.training.triggerComfort','analysis.lastResult','briefingJob','command','genAI','Raw\x20Log','analysis.automation.detectedPatterns','Unknown','getHours','kill','licht','name','party','forEach','LTM.processingStatus','write','details','is_anomaly','Train\x20Health','online','Wetterdaten\x20deaktiviert.','analysis.automation.targetValue','confidence','stdout','openweathermap','common','setObjectNotExistsAsync','diagnosis','temperatur','child_process','Auto\x20Apply','21934808aChbrW','presenceDevices','TRAIN_ENERGY','analysis.alertReason','constructor','GAIT_RESULT','fill','currentSystemMode','system.presenceWho','TRAIN_HEALTH','No\x20instance','LTM.driftAnalysis','.NextHours.Location_1.Day_1.current.temp_value','ready','summary','exitGraceTimer','analysisHistory','getLtmData','TRAIN_SECURITY','toISOString','WiFi\x20Presence\x20detected.','automationProposal','Topology\x20Error:\x20','analysis.health.trendDiagnosis','reason','unload','slice','analysis.health.todayVector','Ungew√∂hnliches\x20Bewegungsmuster!\x20(Score:\x20','switch','events.history_debug_00','LTM.triggerDailyDigest','üß†\x20Triggering\x20Security\x20Training...','analysis.health.isAnomaly','üõ°Ô∏è\x20SECURITY\x20CHECK:\x20Score\x20','Error\x20launching\x20Python:\x20','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','json','modeResetJob','floor','enum','Started...','bind','PYTHON_EXE','Insulation\x20Score','driftDetails','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','systemUUID','TRAIN_COMFORT','contact','analysis.security.lastCheck','Deaktiviert\x20(Pro-Feature)','isExit','sensorLastValues','map','1347375fbQuGy','info','stateChange','[PYTHON]\x20','main','outdoorSensorId','unshift','TRAINING_COMPLETE','4288315byaHVi','üõãÔ∏è\x20BUTLER:\x20Found\x20','Missing\x20data','daswetter','.Current.Temperature','LTM.trainingData.thermodynamics','isAlert','simulateButler','PRIORIT√ÑT:\x20Sicherheit.','subscribeStates','NORMAL','setupModeResetScheduler','boolean','LTM.driftAnalysis.driftDetails','Skipped\x20(No\x20AI\x20or\x20Data)','getOverviewData','Activity\x20Summary','analysis.training.triggerSecurity','.Current.WeatherText','text.alarm','endsWith','rawEventLog','Topology\x20Matrix','payload','insulation','message','val','ltmLtbWindowDays','ANALYZE_GAIT','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','LTM.baselineStatus','Current\x20Threshold','LTM.dailyDigests','./lib/scheduler','analysis.automation.description','setState','.\x20ANWESEND:\x20','ltmStbWindowDays','ü§ñ\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','system.isPresent','getForeignObjectAsync','PONG','alertReason','üõãÔ∏è\x20Triggering\x20Comfort\x20Analysis\x20(Pattern\x20Mining)...','LTM.driftAnalysis.baselineDrift','t√ºr','onReady','Trigger\x20Analysis','Success:\x20','getTime','Activity-Level','some','N/A\x20(Learning)','config'];a0_0x44a6=function(){return _0x584ac0;};return a0_0x44a6();}async function sendMorningBriefing(_0x3ccc08){const _0x3fceb4=a0_0x2215e7;if(!_0x3ccc08[_0x3fceb4(0x141)])return;try{const _0x1d3425=_0x3fceb4(0x181),_0x5ae717=await _0x3ccc08[_0x3fceb4(0x141)][_0x3fceb4(0xfa)](_0x1d3425),_0x1c2b17=_0x5ae717['response'][_0x3fceb4(0x134)]();sendNotification(_0x3ccc08,'üåÖ\x20Morning\x20Briefing:\x0a'+_0x1c2b17);}catch(_0x381b3a){_0x3ccc08[_0x3fceb4(0x109)][_0x3fceb4(0x19e)]('Briefing\x20Error:\x20'+_0x381b3a['message']);}}function stopPythonService(_0x4c1780){const _0xfbe050=a0_0x2215e7;if(_0x4c1780[_0xfbe050(0x19c)]){try{_0x4c1780[_0xfbe050(0x19c)][_0xfbe050(0x1b9)]();}catch(_0x3b65a4){}_0x4c1780['pythonProcess']=null;}}function sendToPython(_0x497c60,_0x317e34,_0x28f64f={}){const _0x4af08a=a0_0x2215e7;if(!_0x497c60[_0x4af08a(0x19c)]||!_0x497c60[_0x4af08a(0x19c)]['stdin'][_0x4af08a(0x15a)])return;const _0x34004a=JSON[_0x4af08a(0x17e)]({'command':_0x317e34,..._0x28f64f});try{_0x497c60[_0x4af08a(0x19c)][_0x4af08a(0x10f)][_0x4af08a(0x1bf)](_0x34004a+'\x0a');}catch(_0x4e0f62){}}function runPythonHealthCheck(_0x483fab){const _0x47cf1c=a0_0x2215e7;if(!_0x483fab[_0x47cf1c(0x1a9)]||_0x483fab[_0x47cf1c(0x1a9)]['length']<0x2)return;const _0x4d3b5c=_0x483fab['dailyDigests'][_0x47cf1c(0x205)](_0x3a5299=>{const _0xf78f25=_0x47cf1c,_0x185214=(_0x3a5299['activityLevel']||'')[_0xf78f25(0x177)]();return ACTIVITY_LEVEL_MAP[_0x185214]||0x32;});sendToPython(_0x483fab,_0x47cf1c(0x194),{'values':_0x4d3b5c,'tag':_0x47cf1c(0x240)});}function handlePythonResult(_0x586aff,_0x2f2502){const _0x887751=a0_0x2215e7;if(_0x2f2502[_0x887751(0x153)]===_0x887751(0x237))_0x586aff[_0x887751(0x109)][_0x887751(0x125)](_0x887751(0xda));else{if(_0x2f2502['type']==='SECURITY_RESULT'){const {anomaly_score:_0xbb0a4c,is_anomaly:_0x5818a3,threshold:_0x3d7edb,explanation:_0x36370c}=_0x2f2502[_0x887751(0x225)];_0x586aff[_0x887751(0x109)][_0x887751(0x207)](_0x887751(0x1f1)+_0xbb0a4c[_0x887751(0x119)](0x5)+_0x887751(0x101)+(_0x5818a3?_0x887751(0x11c):'OK')),_0x586aff[_0x887751(0xbe)]('analysis.security.lastScore',{'val':_0xbb0a4c,'ack':!![]}),_0x586aff[_0x887751(0xbe)](_0x887751(0x201),{'val':new Date()[_0x887751(0x1e2)](),'ack':!![]});if(_0x3d7edb)_0x586aff['setStateAsync'](_0x887751(0x111),{'val':_0x3d7edb,'ack':!![]});if(_0x5818a3){let _0x2436f8=_0x887751(0x1eb)+_0xbb0a4c['toFixed'](0x4)+')';if(_0x36370c&&_0x36370c!=='Unknown')_0x2436f8+='\x0aGrund:\x20'+_0x36370c;_0x586aff['setStateAsync'](_0x887751(0x12d),{'val':!![],'ack':!![]}),_0x586aff[_0x887751(0xbe)]('analysis.alertReason',{'val':_0x2436f8,'ack':!![]}),sendNotification(_0x586aff,_0x887751(0xe0)+_0x2436f8,![],!![]);}}else{if(_0x2f2502[_0x887751(0x153)]===_0x887751(0x20d)){const _0x1b8a23=_0x2f2502[_0x887751(0x225)][_0x887751(0x1c0)]||'',_0x31c238=_0x2f2502[_0x887751(0x225)][_0x887751(0x157)],_0x1524fc=_0x2f2502[_0x887751(0x225)][_0x887751(0x13a)]?_0x887751(0x23e)+new Date()['toLocaleTimeString']()+'\x20('+_0x1b8a23+')':_0x887751(0x14c)+_0x2f2502[_0x887751(0x225)][_0x887751(0x1e7)];_0x586aff[_0x887751(0xbe)](_0x887751(0x126),{'val':_0x1524fc,'ack':!![]});if(_0x2f2502['payload'][_0x887751(0x13a)]&&_0x31c238)_0x586aff['setStateAsync'](_0x887751(0x111),{'val':_0x31c238,'ack':!![]});}else{if(_0x2f2502[_0x887751(0x153)]===_0x887751(0x18a)){const {patterns:_0x4eb1ab}=_0x2f2502[_0x887751(0x225)];if(_0x4eb1ab&&_0x4eb1ab[_0x887751(0x19b)]>0x0){_0x586aff['log'][_0x887751(0x207)](_0x887751(0x20f)+_0x4eb1ab[_0x887751(0x19b)]+_0x887751(0xc6)),_0x586aff[_0x887751(0xbe)](_0x887751(0x1b6),{'val':JSON[_0x887751(0x17e)](_0x4eb1ab),'ack':!![]});const _0x41e400=_0x4eb1ab[0x0],_0x1bf04b=_0x887751(0x1a2)+_0x41e400[_0x887751(0xd6)]+'\x20('+(_0x41e400[_0x887751(0x1c6)]*0x64)[_0x887751(0x119)](0x0)+'%)';_0x586aff['setStateAsync'](_0x887751(0xcf),{'val':!![],'ack':!![]}),_0x586aff[_0x887751(0xbe)](_0x887751(0x230),{'val':_0x1bf04b,'ack':!![]});}else _0x586aff['log'][_0x887751(0x207)](_0x887751(0xd9)),_0x586aff[_0x887751(0xbe)](_0x887751(0xcf),{'val':![],'ack':!![]}),_0x586aff[_0x887751(0xbe)](_0x887751(0x1b6),{'val':'[]','ack':!![]});}else{if(_0x2f2502[_0x887751(0x153)]===_0x887751(0x103)){if(_0x2f2502[_0x887751(0x225)][_0x887751(0x13a)])try{const _0x2511b5=JSON[_0x887751(0x1af)](_0x2f2502['payload'][_0x887751(0x1c0)]);if(_0x2511b5['insulation'])_0x586aff['setStateAsync'](_0x887751(0xb1),{'val':JSON[_0x887751(0x17e)](_0x2511b5[_0x887751(0x226)]),'ack':!![]});if(_0x2511b5['heating'])_0x586aff[_0x887751(0xbe)](_0x887751(0xbf),{'val':JSON[_0x887751(0x17e)](_0x2511b5['heating']),'ack':!![]});}catch(_0x3133d3){}}else{if(_0x2f2502[_0x887751(0x153)]===_0x887751(0x16b)){if(_0x2f2502[_0x887751(0x225)][_0x887751(0x13a)])_0x586aff[_0x887751(0x109)][_0x887751(0x207)](_0x887751(0xcb));}else{if(_0x2f2502['type']==='HEALTH_RESULT')_0x586aff[_0x887751(0xbe)]('analysis.health.lastCheck',{'val':new Date()[_0x887751(0x1e2)](),'ack':!![]}),_0x586aff[_0x887751(0xbe)]('analysis.health.isAnomaly',{'val':_0x2f2502[_0x887751(0x225)][_0x887751(0x1c1)],'ack':!![]});else{if(_0x2f2502[_0x887751(0x153)]===_0x887751(0xc3))_0x586aff[_0x887751(0xbe)](_0x887751(0x1e6),{'val':_0x2f2502['payload'][_0x887751(0x1cb)],'ack':!![]}),_0x586aff['setStateAsync'](_0x887751(0xde),{'val':_0x2f2502[_0x887751(0x225)][_0x887751(0xad)],'ack':!![]});else{if(_0x2f2502['type']===_0x887751(0x1d4)){const {speed_trend:_0x36ea63}=_0x2f2502[_0x887751(0x225)];if(_0x36ea63!==undefined)_0x586aff[_0x887751(0xbe)](_0x887751(0xe9),{'val':_0x36ea63,'ack':!![]});}else{if(_0x2f2502[_0x887751(0x153)]==='ENERGY_PREDICT_RESULT'){const {forecast:_0x111820}=_0x2f2502['payload'];if(_0x111820)_0x586aff['setStateAsync'](_0x887751(0xdc),{'val':JSON[_0x887751(0x17e)](_0x111820),'ack':!![]});}else{if(_0x2f2502['type']===_0x887751(0x100)){const {data:_0x4f932c}=_0x2f2502[_0x887751(0x225)];_0x4f932c&&(_0x586aff[_0x887751(0x109)][_0x887751(0x207)](_0x887751(0xa7)),_0x586aff[_0x887751(0xbe)](_0x887751(0x192),{'val':JSON[_0x887751(0x17e)](_0x4f932c),'ack':!![]}));}}}}}}}}}}}}function startPythonService(_0x1f04f7){const _0xf4f597=a0_0x2215e7;let _0x10298e=_0xf4f597(0x184);if(fs[_0xf4f597(0xd1)](installer[_0xf4f597(0x1fa)]))_0x10298e=installer[_0xf4f597(0x1fa)];try{const _0x145ef6=path['join'](__dirname,_0xf4f597(0xd5),'service.py');_0x1f04f7['pythonProcess']=spawn(_0x10298e,[_0x145ef6]),_0x1f04f7[_0xf4f597(0x19c)][_0xf4f597(0x1c7)]['on']('data',_0x3fe080=>{const _0x244b51=_0xf4f597,_0x1ba980=_0x3fe080['toString']()[_0x244b51(0x17d)]('\x0a');_0x1ba980['forEach'](_0x45c6ce=>{const _0x3ac711=_0x244b51,_0x38381e=_0x45c6ce['trim']();if(!_0x38381e)return;if(_0x38381e['startsWith'](_0x3ac711(0x102)))_0x1f04f7[_0x3ac711(0x109)][_0x3ac711(0x125)](_0x3ac711(0x209)+_0x38381e[_0x3ac711(0x166)](0x5)[_0x3ac711(0x104)]());else{if(_0x38381e[_0x3ac711(0x18e)](_0x3ac711(0xb7)))try{const _0x51a597=JSON[_0x3ac711(0x1af)](_0x38381e[_0x3ac711(0x166)](0x8)[_0x3ac711(0x104)]());handlePythonResult(_0x1f04f7,_0x51a597);}catch(_0x53cabf){}}});}),_0x1f04f7[_0xf4f597(0x19c)]['on'](_0xf4f597(0xa8),_0x54b912=>{const _0x2477ed=_0xf4f597;_0x1f04f7[_0x2477ed(0x19c)]=null;});}catch(_0x2b48b6){_0x1f04f7[_0xf4f597(0x109)][_0xf4f597(0x19e)](_0xf4f597(0x1f2)+_0x2b48b6[_0xf4f597(0x227)]);}}async function runAutopilot(_0x41889b){const _0x37e177=a0_0x2215e7;_0x41889b[_0x37e177(0x109)][_0x37e177(0x125)](_0x37e177(0x15c)),await runGeminiAnalysis(_0x41889b),updateHealthVector(_0x41889b),triggerGaitAnalysis(_0x41889b),triggerEnergyPrediction(_0x41889b);}async function triggerGaitAnalysis(_0x2f944c){const _0x23164a=a0_0x2215e7;if(!_0x2f944c[_0x23164a(0xdd)])return;try{const _0x37ddfc=await _0x2f944c[_0x23164a(0x17a)](_0x23164a(0x186));_0x37ddfc&&_0x37ddfc[_0x23164a(0x228)]&&sendToPython(_0x2f944c,_0x23164a(0x22a),{'sequences':JSON['parse'](_0x37ddfc['val'])});}catch(_0x4b5048){}}async function triggerEnergyPrediction(_0x4cafef){const _0x5ac7aa=a0_0x2215e7;if(!_0x4cafef[_0x5ac7aa(0xdd)])return;try{const _0x1e3add=await getOutsideTemperatureNumeric(_0x4cafef);if(_0x1e3add===null)return;const _0x1f3508={},_0x35d571=_0x4cafef['config'][_0x5ac7aa(0xb2)]||[];for(const _0x458db3 of _0x35d571){if(_0x458db3[_0x5ac7aa(0x153)]===_0x5ac7aa(0x180)&&_0x458db3[_0x5ac7aa(0xff)]){const _0x223fa9=_0x4cafef[_0x5ac7aa(0x204)][_0x458db3['id']];if(_0x223fa9!==undefined)_0x1f3508[_0x458db3[_0x5ac7aa(0xff)]]=_0x223fa9;}}Object[_0x5ac7aa(0x1a0)](_0x1f3508)[_0x5ac7aa(0x19b)]>0x0&&sendToPython(_0x4cafef,'PREDICT_ENERGY',{'current_temps':_0x1f3508,'t_out':_0x1e3add});}catch(_0x59c767){}}function updateHealthVector(_0x1c99fb){const _0x408cae=a0_0x2215e7;if(!_0x1c99fb['rawEventLog']||_0x1c99fb[_0x408cae(0x223)][_0x408cae(0x19b)]===0x0)return;const _0x5e9dc1=new Array(0x60)[_0x408cae(0x1d5)](0x0),_0x507910=new Date()[_0x408cae(0x17b)](0x0,0x0,0x0,0x0);_0x1c99fb[_0x408cae(0x223)][_0x408cae(0x1bd)](_0x1efc26=>{const _0x533bd6=_0x408cae,_0xaa680=new Date(_0x1efc26[_0x533bd6(0x1a1)]);if(_0xaa680[_0x533bd6(0x23f)]()>=_0x507910){const _0x5896a4=_0xaa680[_0x533bd6(0x1b8)](),_0x24aa16=_0xaa680[_0x533bd6(0xf1)](),_0x1906d8=_0x5896a4*0x4+Math[_0x533bd6(0x1f6)](_0x24aa16/0xf);if(_0x1906d8>=0x0&&_0x1906d8<0x60)_0x5e9dc1[_0x1906d8]++;}}),_0x1c99fb[_0x408cae(0xbe)](_0x408cae(0x1ea),{'val':JSON['stringify'](_0x5e9dc1),'ack':!![]});}async function getWeatherContext(_0x510a0e){const _0x57ec4b=a0_0x2215e7;if(!_0x510a0e['config']['useWeather']||!_0x510a0e[_0x57ec4b(0xa5)][_0x57ec4b(0x116)])return _0x57ec4b(0x1c4);try{const _0x24c0ea=_0x510a0e[_0x57ec4b(0xa5)][_0x57ec4b(0x116)];let _0x50cae8=await _0x510a0e[_0x57ec4b(0xd7)](_0x24c0ea+_0x57ec4b(0x212));if(!_0x50cae8)_0x50cae8=await _0x510a0e[_0x57ec4b(0xd7)](_0x24c0ea+_0x57ec4b(0x139));let _0xd7e788=await _0x510a0e['getForeignStateAsync'](_0x24c0ea+_0x57ec4b(0x220));if(!_0xd7e788)_0xd7e788=await _0x510a0e[_0x57ec4b(0xd7)](_0x24c0ea+_0x57ec4b(0x120));if(_0x50cae8&&_0xd7e788)return _0x50cae8[_0x57ec4b(0x228)]+_0x57ec4b(0xf8)+_0xd7e788[_0x57ec4b(0x228)];}catch(_0xb120c9){}return _0x57ec4b(0x176);}async function getCalendarContext(_0x1f9baf){const _0x55c871=a0_0x2215e7;if(!_0x1f9baf[_0x55c871(0xa5)][_0x55c871(0x132)]||!_0x1f9baf['config']['calendarInstance'])return'Kalender\x20deaktiviert.';return _0x55c871(0x165);}async function getCalendarNames(_0x132bfc,_0x5094d0){return[];}async function saveFeedback(_0x2de27d,_0x38caa2){const _0x54eb90=a0_0x2215e7;_0x2de27d['log'][_0x54eb90(0x207)](_0x54eb90(0x11e)+_0x38caa2[_0x54eb90(0xca)]);}async function runGeminiAnalysis(_0x282f6e,_0x3e57d0=''){const _0x5d8bfb=a0_0x2215e7;if(!_0x282f6e['geminiModel'])return;if(_0x282f6e['eventHistory'][_0x5d8bfb(0x19b)]===0x0)return;const _0x283c26=_0x282f6e[_0x5d8bfb(0x160)]['slice'](0x0,0xf),_0x2a98cf=await getWeatherContext(_0x282f6e),_0x163d2b=_0x282f6e['currentSystemMode'],_0x16da35=PERSONA_MAPPING[_0x282f6e['config'][_0x5d8bfb(0x117)]||'generic'],_0x3294bc=_0x282f6e[_0x5d8bfb(0xa5)]['livingContext']||'Keine\x20Details.';let _0x1d33bc=_0x5d8bfb(0x138);try{const _0x5bd156=await _0x282f6e[_0x5d8bfb(0x17a)](_0x5d8bfb(0x1d7));if(_0x5bd156&&_0x5bd156[_0x5d8bfb(0x228)])_0x1d33bc=_0x5bd156[_0x5d8bfb(0x228)];}catch(_0x527c69){}let _0x159ebc=![];try{const _0x31c5b4=await _0x282f6e[_0x5d8bfb(0x17a)](_0x5d8bfb(0x118));if(_0x31c5b4&&_0x31c5b4[_0x5d8bfb(0x228)])_0x159ebc=!![];}catch(_0x5dabe6){}const _0x480b8a=_0x5d8bfb(0x1f3)+_0x16da35+'.\x20KONTEXT:\x20'+_0x3294bc+_0x5d8bfb(0x199)+_0x163d2b+'.\x20WETTER:\x20'+_0x2a98cf+_0x5d8bfb(0x232)+_0x1d33bc+_0x5d8bfb(0x18f)+JSON[_0x5d8bfb(0x17e)](_0x283c26)+_0x5d8bfb(0x124)+_0x3e57d0+_0x5d8bfb(0x22b);try{const _0x43861b=await _0x282f6e[_0x5d8bfb(0x141)]['generateContent'](_0x480b8a),_0xde914b=JSON[_0x5d8bfb(0x1af)](_0x43861b['response']['text']()['replace'](/```json|```/g,'')['trim']());await _0x282f6e['setStateAsync'](_0x5d8bfb(0x1b1),{'val':JSON[_0x5d8bfb(0x17e)](_0xde914b),'ack':!![]});if(_0xde914b[_0x5d8bfb(0x1dd)])await _0x282f6e[_0x5d8bfb(0xbe)](_0x5d8bfb(0x12e),{'val':_0xde914b[_0x5d8bfb(0x1dd)],'ack':!![]});const _0x358e7a={'timestamp':Date[_0x5d8bfb(0x175)](),'id':Date[_0x5d8bfb(0x175)]()['toString'](),'analysis':{'activity':{'summary':_0xde914b[_0x5d8bfb(0x1dd)],'isAlert':_0xde914b[_0x5d8bfb(0x214)],'alertReason':_0xde914b[_0x5d8bfb(0x238)]},'comfort':{'automationProposal':_0xde914b[_0x5d8bfb(0x1e4)]}}};await updateAnalysisHistory(_0x282f6e,_0x358e7a);const _0x22c4da=_0xde914b[_0x5d8bfb(0x214)]||![];_0x22c4da!==_0x282f6e['lastAlertState']&&(await _0x282f6e['setStateAsync']('analysis.isAlert',{'val':_0x22c4da,'ack':!![]}),_0x282f6e[_0x5d8bfb(0x1a4)]=_0x22c4da,_0x22c4da&&(await _0x282f6e[_0x5d8bfb(0xbe)]('analysis.alertReason',{'val':_0xde914b['alertReason'],'ack':!![]}),sendNotification(_0x282f6e,'‚ö†Ô∏è\x20ALARM:\x20'+_0xde914b[_0x5d8bfb(0x238)],![],_0xde914b['isEmergency'])));if(_0xde914b['automationProposal']&&_0xde914b[_0x5d8bfb(0x1e4)][_0x5d8bfb(0x14b)]){await _0x282f6e[_0x5d8bfb(0xbe)](_0x5d8bfb(0xcf),{'val':!![],'ack':!![]}),await _0x282f6e[_0x5d8bfb(0xbe)]('analysis.automation.description',{'val':_0xde914b[_0x5d8bfb(0x1e4)][_0x5d8bfb(0x179)],'ack':!![]}),await _0x282f6e[_0x5d8bfb(0xbe)](_0x5d8bfb(0xc4),{'val':_0xde914b['automationProposal'][_0x5d8bfb(0x107)],'ack':!![]}),await _0x282f6e[_0x5d8bfb(0xbe)](_0x5d8bfb(0x1c5),{'val':JSON[_0x5d8bfb(0x17e)](_0xde914b[_0x5d8bfb(0x1e4)][_0x5d8bfb(0x15f)]),'ack':!![]});if(_0x159ebc)executeAutomationAction(_0x282f6e);}}catch(_0x492bb3){_0x282f6e['log'][_0x5d8bfb(0x19e)](_0x5d8bfb(0x15e)+_0x492bb3[_0x5d8bfb(0x227)]);}}async function startSystem(_0x10d0a0){const _0x3626dc=a0_0x2215e7;_0x10d0a0['log'][_0x3626dc(0x207)](_0x3626dc(0x114)),await initZombies(_0x10d0a0);try{_0x10d0a0[_0x3626dc(0xdd)]=await checkLicense(_0x10d0a0['config'][_0x3626dc(0xd8)]);}catch(_0x558882){}if(!_0x10d0a0[_0x3626dc(0xa5)][_0x3626dc(0x11d)]||_0x10d0a0[_0x3626dc(0xa5)]['inactivityThresholdHours']<0.1)_0x10d0a0[_0x3626dc(0xa5)][_0x3626dc(0x11d)]=0xc;await initHistory(_0x10d0a0),await initSystemConfig(_0x10d0a0);if(_0x10d0a0[_0x3626dc(0xa5)][_0x3626dc(0x10c)])try{_0x10d0a0[_0x3626dc(0x1b4)]=new GoogleGenerativeAI(_0x10d0a0[_0x3626dc(0xa5)][_0x3626dc(0x10c)]),_0x10d0a0[_0x3626dc(0x141)]=_0x10d0a0[_0x3626dc(0x1b4)][_0x3626dc(0x172)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x3626dc(0x16d)}}),_0x10d0a0[_0x3626dc(0x109)][_0x3626dc(0x207)](_0x3626dc(0xf0));}catch(_0xec95a9){_0x10d0a0['log'][_0x3626dc(0x19e)](_0x3626dc(0x16a)+_0xec95a9['message']);}await createAllObjects(_0x10d0a0),await loadSystemMode(_0x10d0a0),await loadRawEventLog(_0x10d0a0),await loadDailyDigests(_0x10d0a0),_0x10d0a0[_0x3626dc(0x217)](_0x3626dc(0x168)),_0x10d0a0[_0x3626dc(0x217)](LTM_DP_TRIGGER_DIGEST),_0x10d0a0[_0x3626dc(0x217)](_0x3626dc(0xe2)),_0x10d0a0[_0x3626dc(0x217)](_0x3626dc(0x17f)),_0x10d0a0[_0x3626dc(0x217)](_0x3626dc(0x171)),_0x10d0a0[_0x3626dc(0x217)](_0x3626dc(0x118)),_0x10d0a0[_0x3626dc(0x217)](_0x3626dc(0x21f)),_0x10d0a0[_0x3626dc(0x217)](_0x3626dc(0xb4)),_0x10d0a0[_0x3626dc(0x217)]('analysis.training.triggerEnergy'),_0x10d0a0[_0x3626dc(0x217)](_0x3626dc(0x1b0)),_0x10d0a0[_0x3626dc(0x217)](_0x3626dc(0xf6)),await initSensorSubscriptions(_0x10d0a0),await initPresenceSubscriptions(_0x10d0a0),await setupTelegramListener(_0x10d0a0),setTimeout(()=>checkWifiPresence(_0x10d0a0),0x1388);if(_0x10d0a0[_0x3626dc(0x1a7)])clearInterval(_0x10d0a0[_0x3626dc(0x1a7)]);const _0x5717cc=_0x10d0a0[_0x3626dc(0xa5)][_0x3626dc(0x154)]||0xf;_0x5717cc>0x0&&(_0x10d0a0[_0x3626dc(0x1a7)]=setInterval(()=>{runAutopilot(_0x10d0a0);},_0x5717cc*0x3c*0x3e8)),schedulers[_0x3626dc(0x13f)](_0x10d0a0,()=>createDailyDigest(_0x10d0a0)),schedulers[_0x3626dc(0x219)](_0x10d0a0),schedulers['setupDriftAnalysisScheduler'](_0x10d0a0,()=>runBaselineDriftAnalysis(_0x10d0a0)),schedulers[_0x3626dc(0x12a)](_0x10d0a0,()=>sendMorningBriefing(_0x10d0a0)),startPythonService(_0x10d0a0),setTimeout(()=>{const _0x4e9da3=_0x3626dc;_0x10d0a0[_0x4e9da3(0x19c)]&&(runPythonHealthCheck(_0x10d0a0),triggerGaitAnalysis(_0x10d0a0),triggerEnergyPrediction(_0x10d0a0)),updateHealthVector(_0x10d0a0);},0x1388);}class CogniLiving extends utils['Adapter']{constructor(_0x4b099d){const _0x71507a=a0_0x2215e7;super({..._0x4b099d,'name':'cogni-living'}),this[_0x71507a(0x160)]=[],this[_0x71507a(0x1df)]=[],this[_0x71507a(0x223)]=[],this[_0x71507a(0x1a9)]=[],this['sensorLastValues']={},this[_0x71507a(0x193)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x71507a(0xc5)]=!![],this[_0x71507a(0x1ae)]=null,this['exitGraceTimer']=null,this[_0x71507a(0xc9)]=![],this['genAI']=null,this[_0x71507a(0x141)]=null,this['currentSystemMode']=SYSTEM_MODES[_0x71507a(0x218)],this[_0x71507a(0xdd)]=![],this[_0x71507a(0x1a4)]=![],this[_0x71507a(0x1fe)]=_0x71507a(0x155),this[_0x71507a(0x1a7)]=null,this[_0x71507a(0xc8)]=null,this['modeResetJob']=null,this['driftAnalysisTimer']=null,this['briefingJob']=null,this['pythonProcess']=null,this[_0x71507a(0x18b)]=![],this['on'](_0x71507a(0x1dc),this[_0x71507a(0x23c)][_0x71507a(0x1f9)](this)),this['on'](_0x71507a(0x208),this[_0x71507a(0x110)][_0x71507a(0x1f9)](this)),this['on'](_0x71507a(0x1e8),this[_0x71507a(0x15b)][_0x71507a(0x1f9)](this)),this['on'](_0x71507a(0x227),this[_0x71507a(0xb0)][_0x71507a(0x1f9)](this));}async[a0_0x2215e7(0x23c)](){const _0x27f471=a0_0x2215e7;this['log'][_0x27f471(0x207)](_0x27f471(0x145)+this['version']+_0x27f471(0xc2));if(!installer[_0x27f471(0x185)](this,()=>startSystem(this)))return;}[a0_0x2215e7(0x15b)](_0x4875b8){const _0x39088a=a0_0x2215e7;if(this[_0x39088a(0x1a7)])clearInterval(this[_0x39088a(0x1a7)]);if(this['driftAnalysisTimer'])clearInterval(this['driftAnalysisTimer']);if(this[_0x39088a(0xc8)])this[_0x39088a(0xc8)][_0x39088a(0x121)]();if(this[_0x39088a(0x1f5)])this[_0x39088a(0x1f5)][_0x39088a(0x121)]();if(this[_0x39088a(0x1b2)])this[_0x39088a(0x1b2)][_0x39088a(0x121)]();if(this['exitTimer'])clearTimeout(this['exitTimer']);if(this[_0x39088a(0x1de)])clearTimeout(this[_0x39088a(0x1de)]);stopPythonService(this),_0x4875b8();}async['onStateChange'](_0x563bd2,_0x2d2e56){const _0x327403=a0_0x2215e7;if(!_0x2d2e56||this[_0x327403(0x18b)])return;if(_0x563bd2[_0x327403(0x12f)]('telegram')&&_0x563bd2[_0x327403(0x222)]('communicate.request')&&_0x2d2e56[_0x327403(0x228)]){await handleTelegramResponse(this,_0x2d2e56[_0x327403(0x228)]);return;}if(_0x563bd2===this['namespace']+'.'+SYSTEM_DP_MODE){if(_0x2d2e56[_0x327403(0x228)]&&Object[_0x327403(0x156)](SYSTEM_MODES)['includes'](_0x2d2e56[_0x327403(0x228)])){this[_0x327403(0x1d6)]=_0x2d2e56['val'];if(_0x2d2e56[_0x327403(0x228)]===SYSTEM_MODES['VACATION'])await setPresence(this,![]);else await setPresence(this,!![]);}if(!_0x2d2e56[_0x327403(0x163)])this[_0x327403(0x231)](_0x563bd2,{'val':this[_0x327403(0x1d6)],'ack':!![]});return;}if(!_0x2d2e56['ack']){_0x563bd2[_0x327403(0x12f)](_0x327403(0x168))&&_0x2d2e56['val']&&(this[_0x327403(0x231)](_0x563bd2,{'val':![],'ack':!![]}),runGeminiAnalysis(this));if(_0x563bd2[_0x327403(0x12f)]('triggerDailyDigest')&&_0x2d2e56[_0x327403(0x228)]){this[_0x327403(0x231)](_0x563bd2,{'val':![],'ack':!![]});if(this[_0x327403(0xdd)])createDailyDigest(this);}_0x563bd2[_0x327403(0x12f)](_0x327403(0xb8))&&_0x2d2e56['val']&&(this[_0x327403(0x231)](_0x563bd2,{'val':![],'ack':!![]}),sendMorningBriefing(this));_0x563bd2[_0x327403(0x12f)]('automation.triggerAction')&&_0x2d2e56['val']&&(this[_0x327403(0x231)](_0x563bd2,{'val':![],'ack':!![]}),executeAutomationAction(this));if(_0x563bd2[_0x327403(0x12f)](_0x327403(0x21f))&&_0x2d2e56[_0x327403(0x228)]){this['setState'](_0x563bd2,{'val':![],'ack':!![]});if(this[_0x327403(0xdd)])try{const _0x208a08=await this[_0x327403(0x17a)]('LTM.trainingData.sequences');if(_0x208a08&&_0x208a08[_0x327403(0x228)]){const _0x26771c=JSON[_0x327403(0x1af)](_0x208a08['val']);this[_0x327403(0x109)]['info'](_0x327403(0x1ef)),this[_0x327403(0xbe)](_0x327403(0x126),{'val':_0x327403(0x173),'ack':!![]}),sendToPython(this,_0x327403(0x1e1),{'sequences':_0x26771c});}}catch(_0x3e8952){this[_0x327403(0x109)][_0x327403(0x19e)](_0x327403(0xba)+_0x3e8952[_0x327403(0x227)]);}}if(_0x563bd2[_0x327403(0x12f)](_0x327403(0xb4))&&_0x2d2e56['val']){this[_0x327403(0x231)](_0x563bd2,{'val':![],'ack':!![]});if(this[_0x327403(0xdd)])try{const _0x3ca6d0=await this['getStateAsync'](LTM_DP_DAILY_DIGESTS);if(_0x3ca6d0&&_0x3ca6d0[_0x327403(0x228)])sendToPython(this,_0x327403(0x1d8),{'digests':JSON[_0x327403(0x1af)](_0x3ca6d0[_0x327403(0x228)])});}catch(_0x572eb1){}}if(_0x563bd2[_0x327403(0x12f)]('analysis.training.triggerEnergy')&&_0x2d2e56[_0x327403(0x228)]){this[_0x327403(0x231)](_0x563bd2,{'val':![],'ack':!![]});if(this[_0x327403(0xdd)])try{const _0x2e6d5e=await this[_0x327403(0x17a)](_0x327403(0x213));if(_0x2e6d5e&&_0x2e6d5e['val'])sendToPython(this,_0x327403(0x1d1),{'points':JSON[_0x327403(0x1af)](_0x2e6d5e[_0x327403(0x228)])});}catch(_0x50c75){}}if(_0x563bd2[_0x327403(0x12f)](_0x327403(0x1b0))&&_0x2d2e56[_0x327403(0x228)]){this[_0x327403(0x231)](_0x563bd2,{'val':![],'ack':!![]});if(this[_0x327403(0xdd)])try{const _0xd9e855=await this['getStateAsync'](LTM_DP_RAW_LOG);_0xd9e855&&_0xd9e855['val']&&(this['log'][_0x327403(0x207)](_0x327403(0x239)),sendToPython(this,_0x327403(0x1ff),{'events':JSON[_0x327403(0x1af)](_0xd9e855[_0x327403(0x228)])}));}catch(_0x51c599){}}if(_0x563bd2[_0x327403(0x12f)](_0x327403(0xf6))&&_0x2d2e56[_0x327403(0x228)]){this[_0x327403(0x231)](_0x563bd2,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x134c6a=await this[_0x327403(0x17a)](_0x327403(0x186));if(_0x134c6a&&_0x134c6a[_0x327403(0x228)]){const _0x3c9899=JSON[_0x327403(0x1af)](_0x134c6a[_0x327403(0x228)]);this[_0x327403(0x109)][_0x327403(0x207)](_0x327403(0xfc)),sendToPython(this,_0x327403(0xfd),{'sequences':_0x3c9899});}}catch(_0x433a6e){this[_0x327403(0x109)][_0x327403(0x19e)](_0x327403(0x1e5)+_0x433a6e[_0x327403(0x227)]);}}return;}if(this[_0x327403(0xa5)]['presenceDevices']&&this[_0x327403(0xa5)]['presenceDevices']['includes'](_0x563bd2)){await checkWifiPresence(this);return;}const _0x5d4409=(this[_0x327403(0xa5)][_0x327403(0xb2)]||[])['find'](_0x192c25=>_0x192c25['id']===_0x563bd2);if(_0x5d4409)processSensorEvent(this,_0x563bd2,_0x2d2e56,_0x5d4409);}async[a0_0x2215e7(0xb0)](_0x155a4b){const _0x4b570d=a0_0x2215e7;if(typeof _0x155a4b===_0x4b570d(0xdb)&&_0x155a4b[_0x4b570d(0x227)]){if(_0x155a4b[_0x4b570d(0x1b3)]===_0x4b570d(0x19a)){const _0x2d28d2=_0x155a4b[_0x4b570d(0x227)][_0x4b570d(0x190)]||this['config'][_0x4b570d(0x10c)];if(!_0x2d28d2)return this['sendTo'](_0x155a4b['from'],_0x155a4b[_0x4b570d(0x1b3)],{'success':![],'message':_0x4b570d(0x196)},_0x155a4b[_0x4b570d(0x147)]);try{const _0x642113=new GoogleGenerativeAI(_0x2d28d2),_0x37b63e=_0x642113[_0x4b570d(0x172)]({'model':GEMINI_MODEL}),_0x5644c2=await _0x37b63e[_0x4b570d(0xfa)]('Hi');this[_0x4b570d(0xef)](_0x155a4b[_0x4b570d(0x164)],_0x155a4b['command'],{'success':!![],'message':'OK:\x20'+_0x5644c2[_0x4b570d(0x1ab)]['text']()},_0x155a4b['callback']);}catch(_0x1e2caa){this['sendTo'](_0x155a4b[_0x4b570d(0x164)],_0x155a4b[_0x4b570d(0x1b3)],{'success':![],'message':_0x4b570d(0x115)+_0x1e2caa[_0x4b570d(0x227)]},_0x155a4b['callback']);}}else{if(_0x155a4b['command']===_0x4b570d(0xab)){const _0x33338c=await getWeatherContext(this),_0x597860=await getCalendarContext(this);this[_0x4b570d(0xef)](_0x155a4b[_0x4b570d(0x164)],_0x155a4b[_0x4b570d(0x1b3)],{'success':!![],'weather':_0x33338c,'calendar':_0x597860},_0x155a4b['callback']);}else{if(_0x155a4b[_0x4b570d(0x1b3)]===_0x4b570d(0x1e0)){if(!this[_0x4b570d(0xdd)])return this[_0x4b570d(0xef)](_0x155a4b[_0x4b570d(0x164)],_0x155a4b['command'],{'success':![],'isPro':![]},_0x155a4b[_0x4b570d(0x147)]);let _0x49050d={'status':_0x4b570d(0x10b)};try{const _0x162e41=await this['getStateAsync'](LTM_DP_DRIFT_STATUS);_0x49050d[_0x4b570d(0xcd)]=_0x162e41?_0x162e41[_0x4b570d(0x228)]:_0x4b570d(0x10b);}catch(_0x1d3cb1){}this[_0x4b570d(0xef)](_0x155a4b[_0x4b570d(0x164)],_0x155a4b[_0x4b570d(0x1b3)],{'success':!![],'isPro':!![],'dailyDigests':this[_0x4b570d(0x1a9)],'driftAnalysis':_0x49050d,'analysisHistory':this['analysisHistory']},_0x155a4b[_0x4b570d(0x147)]);}else{if(_0x155a4b[_0x4b570d(0x1b3)]===_0x4b570d(0x21d)){const _0x46bc4d=this[_0x4b570d(0x1a9)][_0x4b570d(0x19b)],_0x42ede3=new Date(),_0xa39c17=new Date(_0x42ede3[_0x4b570d(0xbc)](),_0x42ede3['getMonth'](),_0x42ede3[_0x4b570d(0x146)]())['getTime'](),_0xd57453=this[_0x4b570d(0x223)]['filter'](_0x9b7f4b=>new Date(_0x9b7f4b['timestamp'])[_0x4b570d(0x23f)]()>_0xa39c17)[_0x4b570d(0x19b)],_0x50ee03=new Array(0x18)[_0x4b570d(0x1d5)](0x0);this[_0x4b570d(0x223)]['forEach'](_0x59c182=>{const _0x179985=_0x4b570d,_0x568895=new Date(_0x59c182[_0x179985(0x1a1)]);if(_0x568895[_0x179985(0x23f)]()>_0xa39c17)_0x50ee03[_0x568895[_0x179985(0x1b8)]()]++;});let _0x1c622e={'status':_0x4b570d(0x10b)};try{const _0x22dbca=await this[_0x4b570d(0x17a)](LTM_DP_DRIFT_STATUS);_0x1c622e[_0x4b570d(0xcd)]=_0x22dbca?_0x22dbca[_0x4b570d(0x228)]:_0x4b570d(0x10b);}catch(_0x5cfeb8){}let _0x462db3='';try{const _0x578c9c=await this[_0x4b570d(0x17a)](_0x4b570d(0x1d7));_0x462db3=_0x578c9c?_0x578c9c['val']:'';}catch(_0x12caca){}let _0x499fa5=null;!this[_0x4b570d(0x141)]&&(_0x499fa5=this[_0x4b570d(0xa5)]['geminiApiKey']?_0x4b570d(0x10d):'Kein\x20API\x20Key!');let _0x20a84e={'detected':![],'description':'','targetId':'','targetValue':'','autoApply':![]};try{const _0x15b5b9=await this[_0x4b570d(0x17a)](_0x4b570d(0xcf));if(_0x15b5b9&&_0x15b5b9[_0x4b570d(0x228)]){_0x20a84e[_0x4b570d(0x14b)]=!![];const _0x2a73d4=await this['getStateAsync'](_0x4b570d(0x230));_0x20a84e[_0x4b570d(0x179)]=_0x2a73d4?_0x2a73d4['val']:'';const _0x17fbc2=await this['getStateAsync']('analysis.automation.targetId');_0x20a84e['targetId']=_0x17fbc2?_0x17fbc2['val']:'';const _0x5f18b7=await this['getStateAsync']('analysis.automation.targetValue');_0x20a84e['targetValue']=_0x5f18b7?_0x5f18b7[_0x4b570d(0x228)]:'';}const _0x23e2b0=await this['getStateAsync'](_0x4b570d(0x118));_0x20a84e[_0x4b570d(0x161)]=_0x23e2b0?!!_0x23e2b0['val']:![];}catch(_0x4db189){}this[_0x4b570d(0xef)](_0x155a4b[_0x4b570d(0x164)],_0x155a4b[_0x4b570d(0x1b3)],{'success':!![],'eventHistory':this[_0x4b570d(0x160)][_0x4b570d(0x1e9)](0x0,0xf),'stats':{'digestCount':_0x46bc4d,'eventCountToday':_0xd57453,'hourlyActivity':_0x50ee03,'driftStatus':_0x1c622e[_0x4b570d(0xcd)],'isPresent':this['isPresent'],'presenceWho':_0x462db3,'minDays':this[_0x4b570d(0xa5)][_0x4b570d(0x142)]||0x7,'stbDays':this[_0x4b570d(0xa5)]['ltmStbWindowDays']||0xe,'ltbDays':this[_0x4b570d(0xa5)][_0x4b570d(0x229)]||0x3c,'systemError':_0x499fa5},'automation':_0x20a84e},_0x155a4b[_0x4b570d(0x147)]);}else{if(_0x155a4b[_0x4b570d(0x1b3)]===_0x4b570d(0x195))try{const _0x209c6e=await scanner[_0x4b570d(0xcc)](this,_0x155a4b['message']||{});this[_0x4b570d(0xef)](_0x155a4b['from'],_0x155a4b['command'],{'success':!![],'devices':_0x209c6e},_0x155a4b[_0x4b570d(0x147)]);}catch(_0x11e857){this[_0x4b570d(0xef)](_0x155a4b[_0x4b570d(0x164)],_0x155a4b['command'],{'success':![],'error':_0x11e857[_0x4b570d(0x227)]},_0x155a4b[_0x4b570d(0x147)]);}else{if(_0x155a4b['command']===_0x4b570d(0x16f)){const _0x343dbf=await this[_0x4b570d(0x1a8)](_0x4b570d(0xb6),'enum'),_0x3c16e1=[];if(_0x343dbf)for(const _0x8a3172 in _0x343dbf){const _0x3a8e15=_0x343dbf[_0x8a3172],_0x564d4d=(_0x3a8e15[_0x4b570d(0x1c9)]&&typeof _0x3a8e15['common'][_0x4b570d(0x1bb)]===_0x4b570d(0xdb)?_0x3a8e15[_0x4b570d(0x1c9)][_0x4b570d(0x1bb)]['de']:_0x3a8e15[_0x4b570d(0x1c9)]['name'])||_0x3a8e15[_0x4b570d(0x1c9)]['name'];_0x3c16e1[_0x4b570d(0x19f)]({'id':_0x8a3172,'name':_0x564d4d});}const _0x3b4d34=await this['getForeignObjectsAsync']('enum.rooms.*',_0x4b570d(0x1f7)),_0x41bfe3=[];if(_0x3b4d34)for(const _0xa01732 in _0x3b4d34){const _0x5b9812=_0x3b4d34[_0xa01732],_0x1e0e8c=(_0x5b9812[_0x4b570d(0x1c9)]&&typeof _0x5b9812[_0x4b570d(0x1c9)][_0x4b570d(0x1bb)]===_0x4b570d(0xdb)?_0x5b9812[_0x4b570d(0x1c9)][_0x4b570d(0x1bb)]['de']:_0x5b9812[_0x4b570d(0x1c9)][_0x4b570d(0x1bb)])||_0xa01732['split']('.')[_0x4b570d(0x10e)]();_0x41bfe3[_0x4b570d(0x19f)](_0x1e0e8c);}this[_0x4b570d(0xef)](_0x155a4b[_0x4b570d(0x164)],_0x155a4b[_0x4b570d(0x1b3)],{'success':!![],'enums':_0x3c16e1,'rooms':_0x41bfe3},_0x155a4b['callback']);}else{if(_0x155a4b[_0x4b570d(0x1b3)]===_0x4b570d(0x169)){const _0xdcbdaf=_0x155a4b[_0x4b570d(0x227)][_0x4b570d(0x152)];if(!_0xdcbdaf)return this[_0x4b570d(0xef)](_0x155a4b[_0x4b570d(0x164)],_0x155a4b['command'],{'success':![],'error':_0x4b570d(0x1d9)},_0x155a4b[_0x4b570d(0x147)]);const _0x9e5400=await getCalendarNames(this,_0xdcbdaf);this[_0x4b570d(0xef)](_0x155a4b[_0x4b570d(0x164)],_0x155a4b['command'],{'success':!![],'names':_0x9e5400},_0x155a4b[_0x4b570d(0x147)]);}else{if(_0x155a4b['command']===_0x4b570d(0x215)){const {targetId:_0x96f3a7,targetValue:_0x311359}=_0x155a4b[_0x4b570d(0x227)];this['log']['info'](_0x4b570d(0xd4)+_0x96f3a7+_0x4b570d(0x1aa)+_0x311359),await this[_0x4b570d(0xbe)](_0x4b570d(0xcf),{'val':!![],'ack':!![]}),await this[_0x4b570d(0xbe)](_0x4b570d(0x230),{'val':'SIMULATION:\x20Test-Vorschlag\x20f√ºr\x20'+_0x96f3a7,'ack':!![]}),await this['setStateAsync'](_0x4b570d(0xc4),{'val':_0x96f3a7,'ack':!![]}),await this[_0x4b570d(0xbe)]('analysis.automation.targetValue',{'val':_0x311359,'ack':!![]}),this[_0x4b570d(0xef)](_0x155a4b['from'],_0x155a4b[_0x4b570d(0x1b3)],{'success':!![]},_0x155a4b['callback']);}else{if(_0x155a4b['command']==='submitFeedback'){const {historyId:_0x3b5182,rating:_0x2995e4,comment:_0x5bf22d,alertReason:_0x3d56cc}=_0x155a4b['message'];_0x3b5182&&_0x2995e4?(await saveFeedback(this,{'timestamp':Date['now'](),'historyId':_0x3b5182,'rating':_0x2995e4,'comment':_0x5bf22d,'alertReason':_0x3d56cc}),this[_0x4b570d(0xef)](_0x155a4b[_0x4b570d(0x164)],_0x155a4b[_0x4b570d(0x1b3)],{'success':!![]},_0x155a4b['callback'])):this['sendTo'](_0x155a4b[_0x4b570d(0x164)],_0x155a4b[_0x4b570d(0x1b3)],{'success':![],'error':_0x4b570d(0x210)},_0x155a4b[_0x4b570d(0x147)]);}else _0x155a4b[_0x4b570d(0x1b3)]===_0x4b570d(0x122)&&(this[_0x4b570d(0x109)][_0x4b570d(0x207)](_0x4b570d(0x1a3)),await this[_0x4b570d(0xbe)](_0x4b570d(0xcf),{'val':![],'ack':!![]}),await this[_0x4b570d(0xbe)](_0x4b570d(0x230),{'val':'','ack':!![]}),this[_0x4b570d(0xef)](_0x155a4b['from'],_0x155a4b[_0x4b570d(0x1b3)],{'success':!![]},_0x155a4b[_0x4b570d(0x147)]));}}}}}}}}}}}if(require[a0_0x2215e7(0x20a)]!==module)module[a0_0x2215e7(0xaf)]=_0x24c401=>new CogniLiving(_0x24c401);else new CogniLiving();