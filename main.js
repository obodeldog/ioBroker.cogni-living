const a0_0x289825=a0_0x36ec;(function(_0x3b6e98,_0x53a27f){const _0x5b69a4=a0_0x36ec,_0x449637=_0x3b6e98();while(!![]){try{const _0x264941=parseInt(_0x5b69a4(0x167))/0x1*(-parseInt(_0x5b69a4(0x123))/0x2)+parseInt(_0x5b69a4(0xeb))/0x3+-parseInt(_0x5b69a4(0x130))/0x4+-parseInt(_0x5b69a4(0x114))/0x5*(-parseInt(_0x5b69a4(0xc3))/0x6)+-parseInt(_0x5b69a4(0x153))/0x7*(parseInt(_0x5b69a4(0xb1))/0x8)+parseInt(_0x5b69a4(0xbe))/0x9+parseInt(_0x5b69a4(0x111))/0xa*(parseInt(_0x5b69a4(0x169))/0xb);if(_0x264941===_0x53a27f)break;else _0x449637['push'](_0x449637['shift']());}catch(_0x366804){_0x449637['push'](_0x449637['shift']());}}}(a0_0x15de,0x54551));function a0_0x15de(){const _0x1c09b4=['automation.triggerAction','40uLKbdZ','search','driftAnalysisTimer','forEach','weatherInstance','startSystem','apiKey','getHours','_calName','triggerBriefing','application/json','includes','runBaselineDriftAnalysis','1479393tuWvnq','subscribeForeignStatesAsync','./lib/scheduler','constructor','exitTimer','1281234aDRgjl','triggerEnergyPrediction','matrix','keys','currentSystemMode','command','testNotification','triggerDailyDigest','VACATION','response','Verbunden','presenceDevices','getGenerativeModel','generateContent','.communicate.request','calendarInstance','message','scanForDevices','common','Keine\x20Antwort\x20von\x20Gemini','stopService','abortExitTimer','analysisHistory','TRAIN_COMFORT','subscribeStates','floor','activityLevel','@iobroker/adapter-core','text','LTM.triggerDailyDigest','Notification\x20Test\x20Failed:\x20','getTime','isPresent','genAI','loadSystemMode','LTM.trainingData.sequences','analysis.training.status','models/gemini-flash-latest','isProVersion','SYSTEM_MODES','1015638wWkOlO','getEnums','add',')\x20-\x20Phase\x20C\x20(Hardened)','setState','unload','setupLtmScheduler','info','notifyTelegramInstance','./lib/dead_man','initSystemConfig','pop','now','Daten\x20nicht\x20verfÃ¼gbar','sendMorningBriefing','updateTopologyMatrix','analysis.training.triggerSecurity','cogni-living\x20adapter\x20starting\x20(v','ltmJob','.system.mode','analysis.triggerBriefing','PREDICT_ENERGY','Standard','getState','calendarName','main','initHistory','name','Instanz\x20nicht\x20gefunden','TRAIN_HEALTH','sensorLastValues','setPresence','sort','updateTopology','ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...','analysis.training.triggerEnergy','callback','initZombies','80MzWqqg','getForeignStateAsync','geminiApiKey','10aFKQFf','slice','runPythonHealthCheck','Aktiv\x20(','stringify','analysis.automation.autoApply','analysis.topology.structure','online','@google/generative-ai','dailyDigests','bind','exitGraceTimer','Adapter','getForeignObjectsAsync','Lernphase\x20(','146654pqEBlk','enum','length','SYSTEM_DP_MODE','toLowerCase','./lib/python_bridge','stateChange','runGeminiAnalysis','ANALYZE_GAIT','eventHistory','instance','./lib/recorder','cancel','1859720UJvCqX','startService','location','toString','push','setHours','type','getCalendarNames','join','./lib/setup','runAutopilot','testApiKey','values','LTM.baselineStatus','updateHealthVector','timestamp','sendTo','minDaysForBaseline','log','analysisInterval','from','processSensorEvent','checkWifiPresence','Verbindung\x20erfolgreich!','analysis.training.triggerTopology','systemConfig','LTM.rawEventLog','getStateAsync','onReady','\x20Tage)','TRAIN_SECURITY','ack','./lib/scanner','devices','temperature','926317kaFFXp','Sec-Training\x20started...','inactivityThresholdHours','updated','dependencyInstallInProgress','isArray','communicate.request','setupBriefingScheduler','Gemini\x20AI\x20initialized.','system.mode','analysis.health.todayVector','licenseKey','analysis.training.triggerHealth','modeResetJob','getMinutes','val','LTM.dailyDigests','fill','analysisTimer','Test','1BkIFTu','ready','846087fbfHOq','setupModeResetScheduler','analysis.training.triggerComfort','error','rawEventLog','isGracePeriodActive','./lib/topology','briefingJob','cogni-living','setupDriftAnalysisScheduler','send','Gemini\x20Init\x20Error:\x20','NORMAL','LTM.trainingData.thermodynamics','object','getOutsideTemperatureNumeric','ANALYZE_TREND','config','Kein\x20API\x20Key\x20Ã¼bergeben','parse','./lib/ai_agent','Activity-Level','triggerGaitAnalysis','createDailyDigest','notifyTelegramEnabled','analysis.trigger','setStateAsync','map'];a0_0x15de=function(){return _0x1c09b4;};return a0_0x15de();}const a0_0x50845d=(function(){let _0x1b7482=!![];return function(_0x1832a4,_0x6efa6){const _0xacc29f=_0x1b7482?function(){if(_0x6efa6){const _0x574bba=_0x6efa6['apply'](_0x1832a4,arguments);return _0x6efa6=null,_0x574bba;}}:function(){};return _0x1b7482=![],_0xacc29f;};}()),a0_0x469849=a0_0x50845d(this,function(){const _0x1a8a45=a0_0x36ec;return a0_0x469849[_0x1a8a45(0x133)]()[_0x1a8a45(0xb2)]('(((.+)+)+)+$')['toString']()[_0x1a8a45(0xc1)](a0_0x469849)[_0x1a8a45(0xb2)]('(((.+)+)+)+$');});a0_0x469849();'use strict';function a0_0x36ec(_0x5ba141,_0x57ad09){const _0x11c459=a0_0x15de();return a0_0x36ec=function(_0x469849,_0x50845d){_0x469849=_0x469849-0xa2;let _0x15de51=_0x11c459[_0x469849];return _0x15de51;},a0_0x36ec(_0x5ba141,_0x57ad09);}const utils=require(a0_0x289825(0xde)),{GoogleGenerativeAI}=require(a0_0x289825(0x11c)),installer=require('./lib/installer'),scanner=require(a0_0x289825(0x150)),schedulers=require(a0_0x289825(0xc0)),topology=require(a0_0x289825(0x16f)),setup=require(a0_0x289825(0x139)),recorder=require(a0_0x289825(0x12e)),pythonBridge=require(a0_0x289825(0x128)),aiAgent=require(a0_0x289825(0xa8)),deadMan=require(a0_0x289825(0xf4)),GEMINI_MODEL=a0_0x289825(0xe8),ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};class CogniLiving extends utils[a0_0x289825(0x120)]{constructor(_0x5569b8){const _0x5b31c2=a0_0x289825;super({..._0x5569b8,'name':_0x5b31c2(0x171)}),this['eventHistory']=[],this[_0x5b31c2(0xd9)]=[],this['rawEventLog']=[],this[_0x5b31c2(0x11d)]=[],this[_0x5b31c2(0x109)]={},this[_0x5b31c2(0x149)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x5b31c2(0xe3)]=!![],this[_0x5b31c2(0xc2)]=null,this[_0x5b31c2(0x11f)]=null,this[_0x5b31c2(0x16e)]=![],this['genAI']=null,this['geminiModel']=null,this[_0x5b31c2(0xc7)]=setup[_0x5b31c2(0xea)][_0x5b31c2(0x175)],this[_0x5b31c2(0xe9)]=![],this['lastAlertState']=![],this[_0x5b31c2(0x165)]=null,this[_0x5b31c2(0xfd)]=null,this[_0x5b31c2(0x160)]=null,this[_0x5b31c2(0xb3)]=null,this[_0x5b31c2(0x170)]=null,this['dependencyInstallInProgress']=![],this['on'](_0x5b31c2(0x168),this[_0x5b31c2(0x14c)][_0x5b31c2(0x11e)](this)),this['on'](_0x5b31c2(0x129),this['onStateChange'][_0x5b31c2(0x11e)](this)),this['on'](_0x5b31c2(0xf0),this['onUnload']['bind'](this)),this['on']('message',this['onMessage'][_0x5b31c2(0x11e)](this));}async[a0_0x289825(0x14c)](){const _0x3cc217=a0_0x289825;this[_0x3cc217(0x142)][_0x3cc217(0xf2)](_0x3cc217(0xfc)+this['version']+_0x3cc217(0xee));if(!installer['checkAndInstall'](this,()=>this[_0x3cc217(0xb6)]()))return;}async[a0_0x289825(0xb6)](){const _0xe210ec=a0_0x289825;await setup[_0xe210ec(0x110)](this);try{this['isProVersion']=await setup['checkLicense'](this['config'][_0xe210ec(0x15e)]);}catch(_0x36549b){}if(!this[_0xe210ec(0xa5)][_0xe210ec(0x155)]||this[_0xe210ec(0xa5)][_0xe210ec(0x155)]<0.1)this[_0xe210ec(0xa5)][_0xe210ec(0x155)]=0xc;await setup[_0xe210ec(0x105)](this),await setup[_0xe210ec(0xf5)](this);if(this[_0xe210ec(0xa5)][_0xe210ec(0x113)])try{this[_0xe210ec(0xe4)]=new GoogleGenerativeAI(this[_0xe210ec(0xa5)]['geminiApiKey']),this['geminiModel']=this[_0xe210ec(0xe4)][_0xe210ec(0xcf)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0xe210ec(0xbb)}}),this[_0xe210ec(0x142)][_0xe210ec(0xf2)](_0xe210ec(0x15b));}catch(_0x4457ae){this[_0xe210ec(0x142)][_0xe210ec(0x16c)](_0xe210ec(0x174)+_0x4457ae[_0xe210ec(0xd3)]);}await setup['createAllObjects'](this),await this[_0xe210ec(0xe5)]();try{const _0xd037e8=await this['getStateAsync']('LTM.rawEventLog');if(_0xd037e8&&_0xd037e8[_0xe210ec(0x162)])this[_0xe210ec(0x16d)]=JSON[_0xe210ec(0xa7)](_0xd037e8[_0xe210ec(0x162)]);}catch(_0x44f7a4){this['rawEventLog']=[];}try{const _0x1273d4=await this[_0xe210ec(0x14b)](_0xe210ec(0x163));if(_0x1273d4&&_0x1273d4['val'])this['dailyDigests']=JSON[_0xe210ec(0xa7)](_0x1273d4['val']);}catch(_0x4843fe){this[_0xe210ec(0x11d)]=[];}const _0x2a468f=this[_0xe210ec(0x11d)][_0xe210ec(0x125)]>=(this[_0xe210ec(0xa5)][_0xe210ec(0x141)]||0x7)?_0xe210ec(0x117)+this[_0xe210ec(0x11d)][_0xe210ec(0x125)]+_0xe210ec(0x14d):_0xe210ec(0x122)+this[_0xe210ec(0x11d)][_0xe210ec(0x125)]+'/'+(this[_0xe210ec(0xa5)]['minDaysForBaseline']||0x7)+')';await this[_0xe210ec(0xae)](_0xe210ec(0x13d),{'val':_0x2a468f,'ack':!![]}),this[_0xe210ec(0xdb)](_0xe210ec(0xad)),this[_0xe210ec(0xdb)](_0xe210ec(0xe0)),this['subscribeStates'](_0xe210ec(0x15c)),this['subscribeStates'](_0xe210ec(0xff)),this[_0xe210ec(0xdb)]('analysis.automation.triggerAction'),this[_0xe210ec(0xdb)](_0xe210ec(0x119)),this['subscribeStates']('analysis.training.triggerSecurity'),this[_0xe210ec(0xdb)](_0xe210ec(0x15f)),this['subscribeStates'](_0xe210ec(0x10e)),this[_0xe210ec(0xdb)](_0xe210ec(0x16b)),this[_0xe210ec(0xdb)](_0xe210ec(0x148));const _0x5a9a96=this[_0xe210ec(0xa5)][_0xe210ec(0x151)];if(_0x5a9a96)for(const _0x2930bd of _0x5a9a96){await this['subscribeForeignStatesAsync'](_0x2930bd['id']);}const _0x1504bd=this['config'][_0xe210ec(0xce)];if(_0x1504bd)for(const _0x24cc8a of _0x1504bd){await this['subscribeForeignStatesAsync'](_0x24cc8a);}if(this[_0xe210ec(0xa5)][_0xe210ec(0xac)]&&this[_0xe210ec(0xa5)][_0xe210ec(0xf3)])await this[_0xe210ec(0xbf)](this[_0xe210ec(0xa5)][_0xe210ec(0xf3)]+_0xe210ec(0xd1));setTimeout(()=>this[_0xe210ec(0x146)](),0x1388);if(this['analysisTimer'])clearInterval(this[_0xe210ec(0x165)]);const _0x1a3555=this[_0xe210ec(0xa5)][_0xe210ec(0x143)]||0xf;_0x1a3555>0x0&&(this[_0xe210ec(0x165)]=setInterval(()=>{this['runAutopilot']();},_0x1a3555*0x3c*0x3e8)),schedulers[_0xe210ec(0xf1)](this,()=>aiAgent['createDailyDigest'](this,pythonBridge)),schedulers[_0xe210ec(0x16a)](this),schedulers[_0xe210ec(0x172)](this,()=>aiAgent[_0xe210ec(0xbd)](this)),schedulers[_0xe210ec(0x15a)](this,()=>aiAgent[_0xe210ec(0xf9)](this)),pythonBridge[_0xe210ec(0x131)](this,installer['PYTHON_EXE']),setTimeout(async()=>{const _0x120f4=_0xe210ec;await topology[_0x120f4(0x10c)](this);try{const _0x29eec9=await this[_0x120f4(0x14b)]('analysis.topology.structure');if(_0x29eec9&&_0x29eec9[_0x120f4(0x162)])pythonBridge[_0x120f4(0x173)](this,'SET_TOPOLOGY',JSON[_0x120f4(0xa7)](_0x29eec9['val']));}catch(_0x92936e){}this[_0x120f4(0x116)](),this['triggerGaitAnalysis'](),this[_0x120f4(0xc4)](),this[_0x120f4(0x13e)]();},0x1388);}['onUnload'](_0x57b830){const _0x5f5089=a0_0x289825;if(this[_0x5f5089(0x165)])clearInterval(this[_0x5f5089(0x165)]);if(this[_0x5f5089(0xb3)])clearInterval(this['driftAnalysisTimer']);if(this[_0x5f5089(0xfd)])this['ltmJob'][_0x5f5089(0x12f)]();if(this[_0x5f5089(0x160)])this[_0x5f5089(0x160)][_0x5f5089(0x12f)]();if(this[_0x5f5089(0x170)])this[_0x5f5089(0x170)][_0x5f5089(0x12f)]();recorder['abortExitTimer'](this),pythonBridge[_0x5f5089(0xd7)](this),_0x57b830();}async['onStateChange'](_0x2b1b6c,_0x2cac77){const _0x2214fb=a0_0x289825;if(!_0x2cac77||this[_0x2214fb(0x157)])return;if(_0x2b1b6c['includes']('telegram')&&_0x2b1b6c['endsWith'](_0x2214fb(0x159))&&_0x2cac77[_0x2214fb(0x162)])return;if(_0x2b1b6c===this['namespace']+_0x2214fb(0xfe)){if(_0x2cac77[_0x2214fb(0x162)]&&Object['values'](setup[_0x2214fb(0xea)])['includes'](_0x2cac77[_0x2214fb(0x162)])){this[_0x2214fb(0xc7)]=_0x2cac77[_0x2214fb(0x162)];if(_0x2cac77[_0x2214fb(0x162)]===setup[_0x2214fb(0xea)][_0x2214fb(0xcb)])await recorder[_0x2214fb(0x10a)](this,![]);else await recorder[_0x2214fb(0x10a)](this,!![]);}if(!_0x2cac77[_0x2214fb(0x14f)])this[_0x2214fb(0xef)](_0x2b1b6c,{'val':this[_0x2214fb(0xc7)],'ack':!![]});return;}if(!_0x2cac77[_0x2214fb(0x14f)]){_0x2b1b6c[_0x2214fb(0xbc)](_0x2214fb(0xad))&&_0x2cac77[_0x2214fb(0x162)]&&(this[_0x2214fb(0xef)](_0x2b1b6c,{'val':![],'ack':!![]}),aiAgent['runGeminiAnalysis'](this));if(_0x2b1b6c['includes'](_0x2214fb(0xca))&&_0x2cac77[_0x2214fb(0x162)]){this[_0x2214fb(0xef)](_0x2b1b6c,{'val':![],'ack':!![]});if(this[_0x2214fb(0xe9)])aiAgent[_0x2214fb(0xab)](this,pythonBridge);}_0x2b1b6c[_0x2214fb(0xbc)](_0x2214fb(0xba))&&_0x2cac77[_0x2214fb(0x162)]&&(this[_0x2214fb(0xef)](_0x2b1b6c,{'val':![],'ack':!![]}),aiAgent[_0x2214fb(0xf9)](this));_0x2b1b6c[_0x2214fb(0xbc)](_0x2214fb(0xb0))&&_0x2cac77[_0x2214fb(0x162)]&&(this[_0x2214fb(0xef)](_0x2b1b6c,{'val':![],'ack':!![]}),aiAgent['executeAutomationAction'](this));if(_0x2b1b6c['includes'](_0x2214fb(0xfb))&&_0x2cac77['val']){this['setState'](_0x2b1b6c,{'val':![],'ack':!![]});if(this[_0x2214fb(0xe9)])try{const _0x1683f3=await this[_0x2214fb(0x14b)](_0x2214fb(0xe6));if(_0x1683f3&&_0x1683f3[_0x2214fb(0x162)]){const _0x3171e4=JSON['parse'](_0x1683f3[_0x2214fb(0x162)]);this[_0x2214fb(0xae)](_0x2214fb(0xe7),{'val':_0x2214fb(0x154),'ack':!![]}),pythonBridge[_0x2214fb(0x173)](this,_0x2214fb(0x14e),{'sequences':_0x3171e4});}}catch(_0x1235f7){}}if(_0x2b1b6c['includes']('analysis.training.triggerHealth')&&_0x2cac77[_0x2214fb(0x162)]){this[_0x2214fb(0xef)](_0x2b1b6c,{'val':![],'ack':!![]});if(this[_0x2214fb(0xe9)])try{const _0x22dc71=await this[_0x2214fb(0x14b)]('LTM.dailyDigests');if(_0x22dc71&&_0x22dc71[_0x2214fb(0x162)])pythonBridge[_0x2214fb(0x173)](this,_0x2214fb(0x108),{'digests':JSON[_0x2214fb(0xa7)](_0x22dc71[_0x2214fb(0x162)])});}catch(_0x87d43f){}}if(_0x2b1b6c[_0x2214fb(0xbc)](_0x2214fb(0x10e))&&_0x2cac77[_0x2214fb(0x162)]){this['setState'](_0x2b1b6c,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x257d4e=await this[_0x2214fb(0x14b)](_0x2214fb(0x176));if(_0x257d4e&&_0x257d4e[_0x2214fb(0x162)])pythonBridge['send'](this,'TRAIN_ENERGY',{'points':JSON[_0x2214fb(0xa7)](_0x257d4e[_0x2214fb(0x162)])});}catch(_0x1085e3){}}if(_0x2b1b6c[_0x2214fb(0xbc)]('analysis.training.triggerComfort')&&_0x2cac77[_0x2214fb(0x162)]){this[_0x2214fb(0xef)](_0x2b1b6c,{'val':![],'ack':!![]});if(this[_0x2214fb(0xe9)])try{const _0x3e48e3=await this[_0x2214fb(0x14b)](_0x2214fb(0x14a));if(_0x3e48e3&&_0x3e48e3[_0x2214fb(0x162)])pythonBridge['send'](this,_0x2214fb(0xda),{'events':JSON[_0x2214fb(0xa7)](_0x3e48e3[_0x2214fb(0x162)])});}catch(_0x1d3474){}}_0x2b1b6c[_0x2214fb(0xbc)](_0x2214fb(0x148))&&_0x2cac77['val']&&(this[_0x2214fb(0xef)](_0x2b1b6c,{'val':![],'ack':!![]}),topology[_0x2214fb(0x10c)](this));return;}if(this[_0x2214fb(0xa5)][_0x2214fb(0xce)]&&this[_0x2214fb(0xa5)][_0x2214fb(0xce)]['includes'](_0x2b1b6c)){await this['checkWifiPresence']();return;}const _0x1c0d80=(this[_0x2214fb(0xa5)][_0x2214fb(0x151)]||[])['find'](_0x192829=>_0x192829['id']===_0x2b1b6c);if(_0x1c0d80){const _0x538eb2=await recorder[_0x2214fb(0x145)](this,_0x2b1b6c,_0x2cac77,_0x1c0d80);_0x538eb2&&_0x538eb2['type']==='motion'&&_0x538eb2[_0x2214fb(0x132)]&&this[_0x2214fb(0xe9)]&&deadMan['updateLocation'](this,_0x538eb2[_0x2214fb(0x132)]);}}async['onMessage'](_0xf56880){const _0x4fd9dd=a0_0x289825;if(typeof _0xf56880==='object'&&_0xf56880[_0x4fd9dd(0xd3)]){if(_0xf56880[_0x4fd9dd(0xc8)]===_0x4fd9dd(0x13b))try{const _0x2c8bf3=_0xf56880[_0x4fd9dd(0xd3)][_0x4fd9dd(0xb7)];if(!_0x2c8bf3)throw new Error(_0x4fd9dd(0xa6));const _0x30a177=new GoogleGenerativeAI(_0x2c8bf3),_0x5a2bfc=_0x30a177[_0x4fd9dd(0xcf)]({'model':GEMINI_MODEL}),_0x4c2754=await _0x5a2bfc[_0x4fd9dd(0xd0)](_0x4fd9dd(0x166)),_0x19c339=await _0x4c2754[_0x4fd9dd(0xcc)];if(_0x19c339[_0x4fd9dd(0xdf)]())this['sendTo'](_0xf56880[_0x4fd9dd(0x144)],_0xf56880[_0x4fd9dd(0xc8)],{'success':!![],'message':_0x4fd9dd(0x147)},_0xf56880[_0x4fd9dd(0x10f)]);else throw new Error(_0x4fd9dd(0xd6));}catch(_0x8c19e7){this['sendTo'](_0xf56880[_0x4fd9dd(0x144)],_0xf56880[_0x4fd9dd(0xc8)],{'success':![],'message':_0x8c19e7[_0x4fd9dd(0xd3)]},_0xf56880['callback']);}else{if(_0xf56880[_0x4fd9dd(0xc8)]==='scanDevices')try{const _0x27d589=await scanner[_0x4fd9dd(0xd4)](this,_0xf56880[_0x4fd9dd(0xd3)]||{});this[_0x4fd9dd(0x140)](_0xf56880[_0x4fd9dd(0x144)],_0xf56880['command'],{'success':!![],'devices':_0x27d589},_0xf56880[_0x4fd9dd(0x10f)]);}catch(_0x50fe0b){this['sendTo'](_0xf56880[_0x4fd9dd(0x144)],_0xf56880[_0x4fd9dd(0xc8)],{'success':![],'error':_0x50fe0b['message']},_0xf56880['callback']);}else{if(_0xf56880[_0x4fd9dd(0xc8)]===_0x4fd9dd(0xfa))try{const {matrix:_0x438955}=_0xf56880[_0x4fd9dd(0xd3)],_0x283820=await this[_0x4fd9dd(0x14b)](_0x4fd9dd(0x11a));if(_0x283820&&_0x283820[_0x4fd9dd(0x162)]){const _0x387be7=JSON[_0x4fd9dd(0xa7)](_0x283820[_0x4fd9dd(0x162)]);_0x387be7[_0x4fd9dd(0xc5)]=_0x438955,_0x387be7[_0x4fd9dd(0x156)]=Date[_0x4fd9dd(0xf7)](),await this[_0x4fd9dd(0xae)]('analysis.topology.structure',{'val':JSON[_0x4fd9dd(0x118)](_0x387be7),'ack':!![]}),pythonBridge[_0x4fd9dd(0x173)](this,'SET_TOPOLOGY',_0x387be7);}this[_0x4fd9dd(0x140)](_0xf56880[_0x4fd9dd(0x144)],_0xf56880['command'],{'success':!![]},_0xf56880[_0x4fd9dd(0x10f)]);}catch(_0x437f04){this[_0x4fd9dd(0x142)][_0x4fd9dd(0x16c)](_0x437f04);}else{if(_0xf56880[_0x4fd9dd(0xc8)]==='getLtmData')this[_0x4fd9dd(0x140)](_0xf56880['from'],_0xf56880[_0x4fd9dd(0xc8)],{'success':!![],'dailyDigests':this[_0x4fd9dd(0x11d)]||[],'analysisHistory':this[_0x4fd9dd(0xd9)]||[]},_0xf56880[_0x4fd9dd(0x10f)]);else{if(_0xf56880[_0x4fd9dd(0xc8)]==='getOverviewData'){const _0x5d776b=this[_0x4fd9dd(0x11d)][_0x4fd9dd(0x125)],_0x4aae25=new Array(0x18)[_0x4fd9dd(0x164)](0x0),_0x1df54c=new Date()[_0x4fd9dd(0x135)](0x0,0x0,0x0,0x0);this[_0x4fd9dd(0x12c)]&&this[_0x4fd9dd(0x12c)]['forEach'](_0x1d59cb=>{const _0x415d4a=_0x4fd9dd;if(_0x1d59cb['timestamp']>=_0x1df54c){const _0x16758c=new Date(_0x1d59cb[_0x415d4a(0x13f)])['getHours']();if(_0x16758c>=0x0&&_0x16758c<0x18)_0x4aae25[_0x16758c]++;}}),this[_0x4fd9dd(0x140)](_0xf56880[_0x4fd9dd(0x144)],_0xf56880[_0x4fd9dd(0xc8)],{'success':!![],'eventHistory':this[_0x4fd9dd(0x12c)][_0x4fd9dd(0x115)](0x0,0xf),'stats':{'digestCount':_0x5d776b,'isPresent':this[_0x4fd9dd(0xe3)],'hourlyActivity':_0x4aae25},'automation':{'detected':![]}},_0xf56880[_0x4fd9dd(0x10f)]);}else{if(_0xf56880['command']===_0x4fd9dd(0xec)){const _0x2294f9=await this[_0x4fd9dd(0x121)]('enum.functions.*',_0x4fd9dd(0x124)),_0x14e029=[];if(_0x2294f9)for(const _0xb6d0e4 in _0x2294f9){const _0x184bb2=_0x2294f9[_0xb6d0e4],_0x49dc4a=(_0x184bb2[_0x4fd9dd(0xd5)]&&typeof _0x184bb2['common']['name']===_0x4fd9dd(0xa2)?_0x184bb2[_0x4fd9dd(0xd5)][_0x4fd9dd(0x106)]['de']:_0x184bb2[_0x4fd9dd(0xd5)]['name'])||_0x184bb2[_0x4fd9dd(0xd5)][_0x4fd9dd(0x106)];_0x14e029[_0x4fd9dd(0x134)]({'id':_0xb6d0e4,'name':_0x49dc4a});}const _0x3ed4d5=await this[_0x4fd9dd(0x121)]('enum.rooms.*',_0x4fd9dd(0x124)),_0x2154ed=[];if(_0x3ed4d5)for(const _0x4c3635 in _0x3ed4d5){const _0x220176=_0x3ed4d5[_0x4c3635],_0x1bf9bc=(_0x220176[_0x4fd9dd(0xd5)]&&typeof _0x220176[_0x4fd9dd(0xd5)][_0x4fd9dd(0x106)]===_0x4fd9dd(0xa2)?_0x220176['common'][_0x4fd9dd(0x106)]['de']:_0x220176[_0x4fd9dd(0xd5)]['name'])||_0x4c3635['split']('.')[_0x4fd9dd(0xf6)]();_0x2154ed[_0x4fd9dd(0x134)](_0x1bf9bc);}this[_0x4fd9dd(0x140)](_0xf56880[_0x4fd9dd(0x144)],_0xf56880[_0x4fd9dd(0xc8)],{'success':!![],'enums':_0x14e029,'rooms':_0x2154ed},_0xf56880[_0x4fd9dd(0x10f)]);}else{if(_0xf56880[_0x4fd9dd(0xc8)]==='testContext')try{let _0x4ca8df='Kein\x20Wetter-Adapter',_0x5ca16d='Kein\x20Kalender-Adapter';if(this[_0x4fd9dd(0xa5)][_0x4fd9dd(0xb5)]){const _0x17c327=await recorder[_0x4fd9dd(0xa3)](this);_0x4ca8df=_0x17c327!==null?_0x17c327+'Â°C':_0x4fd9dd(0xf8);}if(this[_0x4fd9dd(0xa5)]['calendarInstance']){const _0x5947ad=await this['getForeignObjectAsync']('system.adapter.'+this[_0x4fd9dd(0xa5)][_0x4fd9dd(0xd2)]);_0x5ca16d=_0x5947ad?_0x4fd9dd(0xcd):_0x4fd9dd(0x107);}this[_0x4fd9dd(0x140)](_0xf56880[_0x4fd9dd(0x144)],_0xf56880[_0x4fd9dd(0xc8)],{'success':!![],'weather':_0x4ca8df,'calendar':_0x5ca16d},_0xf56880['callback']);}catch(_0x505ee6){this[_0x4fd9dd(0x140)](_0xf56880[_0x4fd9dd(0x144)],_0xf56880['command'],{'success':![],'error':_0x505ee6[_0x4fd9dd(0xd3)]},_0xf56880[_0x4fd9dd(0x10f)]);}else{if(_0xf56880['command']===_0x4fd9dd(0x137))try{const _0x2ed116=_0xf56880[_0x4fd9dd(0xd3)][_0x4fd9dd(0x12d)],_0x337748=await this[_0x4fd9dd(0x112)](_0x2ed116+'.data.table');let _0x2c31c3=[];if(_0x337748&&_0x337748[_0x4fd9dd(0x162)]){const _0x1fb20c=JSON[_0x4fd9dd(0xa7)](_0x337748['val']),_0x400836=new Set();Array[_0x4fd9dd(0x158)](_0x1fb20c)&&_0x1fb20c['forEach'](_0x47e032=>{const _0xfcb301=_0x4fd9dd;if(_0x47e032[_0xfcb301(0xb9)])_0x400836[_0xfcb301(0xed)](_0x47e032[_0xfcb301(0xb9)]);else{if(_0x47e032[_0xfcb301(0x103)])_0x400836[_0xfcb301(0xed)](_0x47e032['calendarName']);}}),_0x2c31c3=Array[_0x4fd9dd(0x144)](_0x400836)[_0x4fd9dd(0x10b)]();}if(_0x2c31c3[_0x4fd9dd(0x125)]===0x0)_0x2c31c3=[_0x4fd9dd(0x101)];this[_0x4fd9dd(0x140)](_0xf56880['from'],_0xf56880['command'],{'success':!![],'names':_0x2c31c3},_0xf56880[_0x4fd9dd(0x10f)]);}catch(_0xcb6d77){this[_0x4fd9dd(0x140)](_0xf56880[_0x4fd9dd(0x144)],_0xf56880[_0x4fd9dd(0xc8)],{'success':![],'error':_0xcb6d77[_0x4fd9dd(0xd3)]},_0xf56880[_0x4fd9dd(0x10f)]);}else{if(_0xf56880[_0x4fd9dd(0xc8)]===_0x4fd9dd(0xc9))try{await setup['sendNotification'](this,'ðŸ””\x20Dies\x20ist\x20ein\x20Test\x20von\x20Cogni-Living.',![],![]),this[_0x4fd9dd(0x140)](_0xf56880[_0x4fd9dd(0x144)],_0xf56880['command'],{'success':!![],'message':'Gesendet'},_0xf56880[_0x4fd9dd(0x10f)]);}catch(_0x4866a6){this['log']['error'](_0x4fd9dd(0xe1)+_0x4866a6['message']),this[_0x4fd9dd(0x140)](_0xf56880[_0x4fd9dd(0x144)],_0xf56880[_0x4fd9dd(0xc8)],{'success':![],'message':'Fehler:\x20'+_0x4866a6[_0x4fd9dd(0xd3)]},_0xf56880[_0x4fd9dd(0x10f)]);}}}}}}}}}}}async[a0_0x289825(0xe5)](){const _0x5c3b03=a0_0x289825;try{const _0xef71fc=await this['getStateAsync'](setup[_0x5c3b03(0x126)]);_0xef71fc&&_0xef71fc[_0x5c3b03(0x162)]&&Object[_0x5c3b03(0x13c)](setup['SYSTEM_MODES'])[_0x5c3b03(0xbc)](_0xef71fc[_0x5c3b03(0x162)])?this[_0x5c3b03(0xc7)]=_0xef71fc['val']:(this[_0x5c3b03(0xc7)]=setup[_0x5c3b03(0xea)][_0x5c3b03(0x175)],await this[_0x5c3b03(0xae)](setup[_0x5c3b03(0x126)],{'val':setup['SYSTEM_MODES']['NORMAL'],'ack':!![]}));}catch(_0x23f040){this[_0x5c3b03(0xc7)]=setup['SYSTEM_MODES'][_0x5c3b03(0x175)];}}async['checkWifiPresence'](){const _0x5ca573=a0_0x289825;try{const _0x42a248=this['config']['presenceDevices']||[];let _0x289536=![];const _0x125c2d=[];for(const _0x342311 of _0x42a248){try{const _0x565df5=await this[_0x5ca573(0x112)](_0x342311);_0x565df5&&(_0x565df5[_0x5ca573(0x162)]===!![]||_0x565df5[_0x5ca573(0x162)]===_0x5ca573(0x11b)||_0x565df5[_0x5ca573(0x162)]===0x1)&&(_0x289536=!![],_0x125c2d[_0x5ca573(0x134)](_0x342311));}catch(_0x438e1f){}}return await this['setStateAsync']('system.presenceWho',{'val':_0x125c2d[_0x5ca573(0x138)](',\x20'),'ack':!![]}),_0x289536&&(this['exitTimer']&&(this['log'][_0x5ca573(0xf2)]('WiFi\x20Presence\x20detected.'),recorder[_0x5ca573(0xd8)](this)),!this[_0x5ca573(0xe3)]&&this[_0x5ca573(0xc7)]===setup[_0x5ca573(0xea)][_0x5ca573(0x175)]&&await recorder[_0x5ca573(0x10a)](this,!![])),_0x289536;}catch(_0x2b771a){return![];}}async[a0_0x289825(0x13a)](){const _0x2b3032=a0_0x289825;this[_0x2b3032(0x142)]['debug'](_0x2b3032(0x10d)),await aiAgent[_0x2b3032(0x12a)](this),this[_0x2b3032(0x13e)](),this[_0x2b3032(0xaa)](),this[_0x2b3032(0xc4)]();}[a0_0x289825(0xaa)](){const _0x4f16b7=a0_0x289825;if(!this[_0x4f16b7(0xe9)])return;try{this[_0x4f16b7(0x102)](_0x4f16b7(0xe6),(_0x473b60,_0x478f81)=>{const _0x11bd14=_0x4f16b7;_0x478f81&&_0x478f81[_0x11bd14(0x162)]&&pythonBridge[_0x11bd14(0x173)](this,_0x11bd14(0x12b),{'sequences':JSON[_0x11bd14(0xa7)](_0x478f81[_0x11bd14(0x162)])});});}catch(_0x34a38f){}}async[a0_0x289825(0xc4)](){const _0x305e14=a0_0x289825;if(!this[_0x305e14(0xe9)])return;try{const _0xd25c7c=await recorder[_0x305e14(0xa3)](this);if(_0xd25c7c===null)return;const _0x5f4dbc={},_0x3afa18=this[_0x305e14(0xa5)][_0x305e14(0x151)]||[];for(const _0x653f10 of _0x3afa18){if(_0x653f10[_0x305e14(0x136)]===_0x305e14(0x152)&&_0x653f10[_0x305e14(0x132)]){const _0x8755f4=this['sensorLastValues'][_0x653f10['id']];if(_0x8755f4!==undefined)_0x5f4dbc[_0x653f10[_0x305e14(0x132)]]=_0x8755f4;}}Object[_0x305e14(0xc6)](_0x5f4dbc)[_0x305e14(0x125)]>0x0&&pythonBridge[_0x305e14(0x173)](this,_0x305e14(0x100),{'current_temps':_0x5f4dbc,'t_out':_0xd25c7c});}catch(_0x5055d9){}}['updateHealthVector'](){const _0x12332c=a0_0x289825;if(!this['rawEventLog']||this['rawEventLog'][_0x12332c(0x125)]===0x0)return;const _0x38a477=new Array(0x60)['fill'](0x0),_0x4454dc=new Date()[_0x12332c(0x135)](0x0,0x0,0x0,0x0);this['rawEventLog'][_0x12332c(0xb4)](_0x43c92b=>{const _0xc64fc6=_0x12332c,_0x5d0c4b=new Date(_0x43c92b['timestamp']);if(_0x5d0c4b[_0xc64fc6(0xe2)]()>=_0x4454dc){const _0x2447b0=_0x5d0c4b[_0xc64fc6(0xb8)](),_0x7a37c2=_0x5d0c4b[_0xc64fc6(0x161)](),_0x30fcdf=_0x2447b0*0x4+Math[_0xc64fc6(0xdc)](_0x7a37c2/0xf);if(_0x30fcdf>=0x0&&_0x30fcdf<0x60)_0x38a477[_0x30fcdf]++;}}),this[_0x12332c(0xae)](_0x12332c(0x15d),{'val':JSON[_0x12332c(0x118)](_0x38a477),'ack':!![]});}['runPythonHealthCheck'](){const _0x2a2d6f=a0_0x289825;if(!this[_0x2a2d6f(0x11d)]||this[_0x2a2d6f(0x11d)][_0x2a2d6f(0x125)]<0x2)return;const _0x130aed=this[_0x2a2d6f(0x11d)][_0x2a2d6f(0xaf)](_0x6863e5=>{const _0x510cfd=_0x2a2d6f,_0x17c822=(_0x6863e5[_0x510cfd(0xdd)]||'')[_0x510cfd(0x127)]();return ACTIVITY_LEVEL_MAP[_0x17c822]||0x32;});pythonBridge[_0x2a2d6f(0x173)](this,_0x2a2d6f(0xa4),{'values':_0x130aed,'tag':_0x2a2d6f(0xa9)});}}if(require[a0_0x289825(0x104)]!==module)module['exports']=_0x342213=>new CogniLiving(_0x342213);else new CogniLiving();