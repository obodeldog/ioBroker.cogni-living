const a0_0x525b69=a0_0x4358;(function(_0xe56246,_0x36eda3){const _0x3e2749=a0_0x4358,_0x3bef77=_0xe56246();while(!![]){try{const _0x1f52e5=parseInt(_0x3e2749(0x93))/0x1+-parseInt(_0x3e2749(0x13f))/0x2+parseInt(_0x3e2749(0x89))/0x3+parseInt(_0x3e2749(0x13d))/0x4*(parseInt(_0x3e2749(0x124))/0x5)+-parseInt(_0x3e2749(0x91))/0x6+parseInt(_0x3e2749(0x18f))/0x7*(parseInt(_0x3e2749(0xbf))/0x8)+-parseInt(_0x3e2749(0x121))/0x9*(parseInt(_0x3e2749(0x7c))/0xa);if(_0x1f52e5===_0x36eda3)break;else _0x3bef77['push'](_0x3bef77['shift']());}catch(_0x57bec5){_0x3bef77['push'](_0x3bef77['shift']());}}}(a0_0x5527,0x68dd7));const a0_0x48e229=(function(){let _0x2fbac6=!![];return function(_0x120234,_0x2f8ae8){const _0x1a14a3=_0x2fbac6?function(){const _0x2b9d68=a0_0x4358;if(_0x2f8ae8){const _0x31e53b=_0x2f8ae8[_0x2b9d68(0x167)](_0x120234,arguments);return _0x2f8ae8=null,_0x31e53b;}}:function(){};return _0x2fbac6=![],_0x1a14a3;};}()),a0_0x4214d7=a0_0x48e229(this,function(){const _0x548324=a0_0x4358;return a0_0x4214d7[_0x548324(0xe3)]()[_0x548324(0x1ba)](_0x548324(0xa6))[_0x548324(0xe3)]()[_0x548324(0x69)](a0_0x4214d7)[_0x548324(0x1ba)](_0x548324(0xa6));});function a0_0x4358(_0x4c664c,_0x31a795){const _0x2894b5=a0_0x5527();return a0_0x4358=function(_0x4214d7,_0x48e229){_0x4214d7=_0x4214d7-0x68;let _0x5527f6=_0x2894b5[_0x4214d7];return _0x5527f6;},a0_0x4358(_0x4c664c,_0x31a795);}a0_0x4214d7();'use strict';const utils=require('@iobroker/adapter-core'),{GoogleGenerativeAI}=require(a0_0x525b69(0x15a)),installer=require('./lib/installer'),scanner=require('./lib/scanner'),schedulers=require(a0_0x525b69(0x1a2)),topology=require(a0_0x525b69(0x105)),setup=require('./lib/setup'),recorder=require(a0_0x525b69(0x116)),pythonBridge=require(a0_0x525b69(0x7d)),aiAgent=require('./lib/ai_agent'),deadMan=require(a0_0x525b69(0x14e)),automation=require(a0_0x525b69(0x17d)),GEMINI_MODEL=a0_0x525b69(0xcc),ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};function a0_0x5527(){const _0x32140e=['Kein\x20API\x20Key\x20Ã¼bergeben','infrasoundSensorId','Forensic\x20Infrasound\x20Log','message','ALARM','LTM.trainingData.sequences','string','setObjectNotExistsAsync','{\x22default\x22:\x2021}','Heizung\x20kann\x20','type','motion','getOutsideTemperatureNumeric','Warm-Up\x20Target\x20Temps\x20(JSON)','analysis.energy.warmupTargets','debug','3073637iFuPrd','[Forensics]\x20Save\x20failed:\x20','triggerDailyDigest','join','onMessage','common','updateHealthVector','getGenerativeModel','getHours','lastTrackerEventTime','config','NORMAL','forEach','sensor.door','getForeignStateAsync','log','getStateAsync','\x20hPa.\x20Einbruch\x20wahrscheinlich.','slice','./lib/scheduler','values','OPTIMIZE_ENERGY','error','analysisHistory','door','analysis.training.triggerSecurity','unload','abs','INTERNAL','Gemini\x20AI\x20initialized.','analysis.automation.description','pop','triggerGaitAnalysis','analysis.automation.autoApply','ack','Gemini\x20Init\x20Error:\x20','ðŸ§ \x20Memory:\x20Cache\x20hydrated\x20with\x20','entries','\x20min\x20ausbleiben.','CALIB','analysis.security.learningStatus','analysisTimer','getCalendarNames','search','name','checkAndInstall','constructor','parse','stringify','ðŸ””\x20Dies\x20ist\x20ein\x20Test\x20von\x20Cogni-Living.','analysis.training.status','Kein\x20Kalender-Adapter','\x27\x20wurde\x20manuell\x20vom\x20Benutzer\x20gelÃ¶scht.','testNotification','value','subscribeForeignStatesAsync','MATCH\x20(False\x20Positive)','analysis.health.activityTrend','abortExitTimer','text','sunny','map','matrix','from','Current.WeatherText','60XBQzVk','./lib/python_bridge','setStateAsync','magnet','analysis.triggerBriefing','checkSolarCondition','Adapter','toFixed','getTime','Gesendet','find','processSensorEvent','times','1304553vSqUrw','Verbindung\x20erfolgreich!','ANOMALY\x20(Real\x20Threat?)','[Infrasound]\x20ðŸŸ¡\x20Debug-Mode:\x20Alarm\x20detected\x20but\x20suppressed\x20because\x20presence=true.','getMinutes','heiter','checkWifiPresence','systemConfig','2291298RapDFd','generateContent','138289aaDOvT','analysis.health.todayVector','dailyDigests','sonn','âš ï¸\x20Graph-Brain:\x20No\x20training\x20sequences\x20found\x20in\x20LTM.','TRAIN_HEALTH','eventHistory','Verbunden','analysis.trigger','runBaselineDriftAnalysis','command','lastAlertState','state','Kein\x20Wetter-Adapter','getForeignObjectsAsync','timestamp','LTM.rawEventLog','resetRLPenalty','PYTHON_EXE','(((.+)+)+)+$','location','isSolar','endsWith','Active\x20Ventilation\x20Alerts','analysis.automation.triggerAction','response','runGeminiAnalysis','genAI','analysisInterval','\x20sequences...','apiKey','cogni-living\x20adapter\x20starting\x20(v','infrasoundLocked','version','inactivityThresholdHours','Keine\x20Sensor-AktivitÃ¤t','bootTime','sensorLastValues','enum.rooms.*','exitTimer','add','open','notifyTelegramInstance','Test','8ZmcjjH','instance','LTM.dailyDigests','geminiApiKey','activityLevel','ðŸ§ \x20Graph-Brain:\x20Training\x20Behaviour\x20Matrix\x20based\x20on\x20','SYSTEM_DP_MODE','analysis.health.gaitDebug','scanThermostats','LTM.triggerDailyDigest','analysis.training.triggerComfort','isProVersion','infrasoundArmingId','models/gemini-flash-latest','Instanz\x20nicht\x20gefunden','analysis.automation.targetValue','Key\x20not\x20found\x20or\x20not\x20provided','isGracePeriodActive','filter','main','Daten\x20nicht\x20verfÃ¼gbar','rawEventLog','updated','analysis.automation.patternDetected','WiFi\x20Presence\x20detected.','security.alarm_triggered','scores','PREDICT_ENERGY','loadSystemMode','Guest\x20Mode','setupBriefingScheduler','currentSystemMode','stateChange','minutes_safe','object','temperature','toString','startSystem','floor','number','getForeignObjectAsync','ðŸŽ“\x20[RL-RESET]\x20Lern-Sperre\x20(Penalty)\x20fÃ¼r\x20\x27','manual','calendarInstance','modeResetJob','subscribeStates','scanDevices','briefingJob','memoryCache','updateLocation','analysis.energy.warmupTimes','ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...','analyzeWindowOpening','includes','sources','PINN\x20AI\x20Forecast','protectAiMemory','Warm-Up\x20Time\x20(Minutes\x20to\x20Target)','dependencyInstallInProgress','system.mode','callback','.data.table','analysis.training.triggerTopology','Standard','[Calibration]\x20Window\x20','TRAIN_TOPOLOGY','testContext','Graph-Brain\x20Train\x20Error:\x20','Nuukanni\x20Security','appendToLog','./lib/topology','checkCalendarTriggers','checkThermostats','NextHours.Location_1.Day_1.current.symbol_desc','[Forensics]\x20Infrasound\x20Event\x20correlated:\x20','sensor.window','SET_LEARNING_MODE','pressureBuffer',')\x20-\x20Phase\x20D\x20(Forensic\x20Calibration)','role','VACATION','thermostat','useWeather','TRAIN_SECURITY','length','updateTopology','checkLicense','./lib/recorder','Sensors\x20used\x20for\x20Gait\x20Analysis','analysis.topology.structure','setPresence','exports','analysis.energy.ventilationAlerts','sendNotification','keys','geminiModel','SET_TOPOLOGY','TRAIN_COMFORT','802188SLMyBt','setupModeResetScheduler','runAutopilot','5ebhtaD','getLtmData','daswetter.0','minDaysForBaseline','runPythonHealthCheck','cleanupGhostInterventions','notifyPushoverInstance','analysis.automation.targetId','sendMorningBriefing','ANALYZE_GAIT','exitGraceTimer','triggerBriefing','createAllObjects','ltmJob','Fehler:\x20','initHistory','enum','[Infrasound]\x20Subscribing\x20to\x20external\x20sensor:\x20','devices','warn','setState','\x20hPa\x20(Limit:\x20','TRAIN_ENERGY','triggerInfrasoundCorrelation','trackerHeartbeat','2203568twGJIB','analysis.health.gaitSensors','433842FIhovC','automation.triggerAction','handleInfrasound','party','healthTrendInterval','Activity-Level','\x20Tage)','ready','toLowerCase','Fenster\x20geÃ¶ffnet:\x20','LTM.baselineStatus','trackerEnabled','calendarName','online','analysis.security.infrasoundLog','./lib/dead_man','setHours','isPresent','window','send','analysis.training.triggerEnergy','val','bind','onReady','sort','fill','Simulation\x20durch\x20Admin\x20(Test)','@google/generative-ai','[Infrasound]\x20ðŸš¨\x20ALARM\x20TRIGGERED!\x20Pressure\x20Wave:\x20','subscribeForeignStates','testApiKey','Memory\x20Hydration\x20Failed:\x20','notifyPushoverEnabled','â¤ï¸\x20Auto-Heartbeat:\x20Aktualisiere\x20Gesundheits-Trends...','initZombies','onStateChange','system.presenceWho','unshift','driftAnalysisTimer','triggerEnergyPrediction','apply','cancel','_calName','push','json','createDailyDigest','analysis.energy.warmupSources','analysis.energy.rlPenalties','info','initSystemConfig','setupLtmScheduler','simulateEnergyMPC','infrasoundThreshold','now','sendTo','notifyTelegramEnabled','ðŸš¨\x20DRUCKWELLEN-ALARM!\x20StÃ¤rke:\x20','presenceDevices','\x20opened.\x20Peak\x20Pressure:\x20','Notification\x20Test\x20Failed:\x20','SYSTEM_MODES','Aktiv\x20(','./lib/automation','analysis.training.triggerHealth'];a0_0x5527=function(){return _0x32140e;};return a0_0x5527();}class CogniLiving extends utils[a0_0x525b69(0x82)]{constructor(_0x55105f){const _0x9cef07=a0_0x525b69;super({..._0x55105f,'name':'cogni-living'}),this[_0x9cef07(0x99)]=[],this[_0x9cef07(0x1a6)]=[],this[_0x9cef07(0xd4)]=[],this[_0x9cef07(0x95)]=[],this[_0x9cef07(0xb8)]={},this[_0x9cef07(0x90)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x9cef07(0x150)]=!![],this[_0x9cef07(0xba)]=null,this[_0x9cef07(0x12e)]=null,this[_0x9cef07(0xd0)]=![],this[_0x9cef07(0xae)]=null,this['geminiModel']=null,this['currentSystemMode']=setup[_0x9cef07(0x17b)][_0x9cef07(0x19a)],this[_0x9cef07(0xca)]=![],this[_0x9cef07(0x9e)]=![],this[_0x9cef07(0x1b8)]=null,this[_0x9cef07(0x131)]=null,this[_0x9cef07(0xeb)]=null,this[_0x9cef07(0x165)]=null,this[_0x9cef07(0xee)]=null,this['trackerHeartbeat']=null,this[_0x9cef07(0x143)]=null,this[_0x9cef07(0xf9)]=![],this[_0x9cef07(0x198)]=Date[_0x9cef07(0x174)](),this[_0x9cef07(0xef)]=null,this['bootTime']=Date['now'](),this[_0x9cef07(0xb3)]=![],this[_0x9cef07(0x10c)]=[],this['on'](_0x9cef07(0x146),this[_0x9cef07(0x156)]['bind'](this)),this['on'](_0x9cef07(0xdf),this[_0x9cef07(0x162)][_0x9cef07(0x155)](this)),this['on'](_0x9cef07(0x1a9),this['onUnload'][_0x9cef07(0x155)](this)),this['on'](_0x9cef07(0x182),this['onMessage'][_0x9cef07(0x155)](this));}async[a0_0x525b69(0x156)](){const _0x3f43e1=a0_0x525b69;this['log'][_0x3f43e1(0x16f)](_0x3f43e1(0xb2)+this[_0x3f43e1(0xb4)]+_0x3f43e1(0x10d));if(!installer[_0x3f43e1(0x68)](this,()=>this[_0x3f43e1(0xe4)]()))return;}async[a0_0x525b69(0xe4)](){const _0x1c6686=a0_0x525b69;await setup[_0x1c6686(0x161)](this);try{this['isProVersion']=await setup[_0x1c6686(0x115)](this[_0x1c6686(0x199)]['licenseKey']);}catch(_0x482b6a){}if(!this[_0x1c6686(0x199)][_0x1c6686(0xb5)]||this['config'][_0x1c6686(0xb5)]<0.1)this['config'][_0x1c6686(0xb5)]=0xc;await setup[_0x1c6686(0x133)](this),await setup[_0x1c6686(0x170)](this);try{const _0x4a4432=await this['getStateAsync'](_0x1c6686(0xf1)),_0x25c11e=await this[_0x1c6686(0x19f)](_0x1c6686(0x16d));_0x4a4432&&_0x4a4432[_0x1c6686(0x154)]&&_0x25c11e&&_0x25c11e[_0x1c6686(0x154)]&&(Date['now']()-_0x4a4432['ts']<0x4*0xe10*0x3e8&&(this[_0x1c6686(0xef)]={'times':JSON[_0x1c6686(0x6a)](_0x4a4432[_0x1c6686(0x154)]),'sources':JSON['parse'](_0x25c11e[_0x1c6686(0x154)])},this[_0x1c6686(0x19e)]['info'](_0x1c6686(0x1b3)+Object[_0x1c6686(0x11d)](this[_0x1c6686(0xef)][_0x1c6686(0x88)])[_0x1c6686(0x113)]+'\x20rooms\x20(preventing\x20Cold\x20Start\x20Amnesia).')));}catch(_0x65e2bb){this[_0x1c6686(0x19e)][_0x1c6686(0x137)](_0x1c6686(0x15e)+_0x65e2bb[_0x1c6686(0x182)]);}if(this[_0x1c6686(0x199)]['geminiApiKey'])try{this[_0x1c6686(0xae)]=new GoogleGenerativeAI(this[_0x1c6686(0x199)][_0x1c6686(0xc2)]),this[_0x1c6686(0x11e)]=this[_0x1c6686(0xae)][_0x1c6686(0x196)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':'application/json'}}),this['log']['info'](_0x1c6686(0x1ac));}catch(_0x4137cb){this[_0x1c6686(0x19e)][_0x1c6686(0x1a5)](_0x1c6686(0x1b2)+_0x4137cb[_0x1c6686(0x182)]);}await setup[_0x1c6686(0x130)](this),await this[_0x1c6686(0xdb)](),await this['setObjectNotExistsAsync']('analysis.energy.pinnForecast',{'type':_0x1c6686(0x9f),'common':{'name':_0x1c6686(0xf6),'type':'string','role':_0x1c6686(0x16b),'read':!![],'write':![]},'native':{}}),await this[_0x1c6686(0x186)](_0x1c6686(0x11b),{'type':_0x1c6686(0x9f),'common':{'name':_0x1c6686(0xaa),'type':_0x1c6686(0x185),'role':_0x1c6686(0x16b),'read':!![],'write':![]},'native':{}}),await this[_0x1c6686(0x186)](_0x1c6686(0xf1),{'type':_0x1c6686(0x9f),'common':{'name':_0x1c6686(0xf8),'type':_0x1c6686(0x185),'role':_0x1c6686(0x16b),'read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x1c6686(0x18d),{'type':_0x1c6686(0x9f),'common':{'name':_0x1c6686(0x18c),'type':_0x1c6686(0x185),'role':_0x1c6686(0x16b),'read':!![],'write':!![],'def':_0x1c6686(0x187)},'native':{}}),await this[_0x1c6686(0x186)](_0x1c6686(0x16e),{'type':_0x1c6686(0x9f),'common':{'name':'Reinforcement\x20Learning\x20Penalties','type':'string','role':'json','read':!![],'write':![],'def':'{}'},'native':{}}),await this[_0x1c6686(0x186)](_0x1c6686(0x74),{'type':_0x1c6686(0x9f),'common':{'name':'General\x20Activity\x20Trend\x20(%)','type':'number','role':_0x1c6686(0x71),'unit':'%','read':!![],'write':![]},'native':{}}),await this[_0x1c6686(0x186)](_0x1c6686(0x13e),{'type':_0x1c6686(0x9f),'common':{'name':_0x1c6686(0x117),'type':'string','role':_0x1c6686(0x76),'read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync']('analysis.energy.activeEnforcements',{'type':_0x1c6686(0x9f),'common':{'name':'Active\x20Calendar\x20Enforcements\x20(Locks)','type':_0x1c6686(0x185),'role':_0x1c6686(0x16b),'read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x1c6686(0x186)](_0x1c6686(0x14d),{'type':_0x1c6686(0x9f),'common':{'name':_0x1c6686(0x181),'type':_0x1c6686(0x185),'role':_0x1c6686(0x16b),'read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x1c6686(0x186)](_0x1c6686(0xc6),{'type':_0x1c6686(0x9f),'common':{'name':'Gait\x20Speed\x20Calculation\x20Proof','type':_0x1c6686(0x185),'role':'text','read':!![],'write':![]},'native':{}});try{const _0x296f32=await this['getStateAsync'](_0x1c6686(0xa3));if(_0x296f32&&_0x296f32[_0x1c6686(0x154)])this['rawEventLog']=JSON[_0x1c6686(0x6a)](_0x296f32[_0x1c6686(0x154)]);}catch(_0x22e230){this[_0x1c6686(0xd4)]=[];}try{const _0x16a1a3=await this[_0x1c6686(0x19f)](_0x1c6686(0xc1));if(_0x16a1a3&&_0x16a1a3[_0x1c6686(0x154)])this[_0x1c6686(0x95)]=JSON['parse'](_0x16a1a3[_0x1c6686(0x154)]);}catch(_0xb4013d){this[_0x1c6686(0x95)]=[];}const _0xf7c397=this[_0x1c6686(0x95)]['length']>=(this[_0x1c6686(0x199)][_0x1c6686(0x127)]||0x7)?_0x1c6686(0x17c)+this[_0x1c6686(0x95)][_0x1c6686(0x113)]+_0x1c6686(0x145):'Lernphase\x20('+this[_0x1c6686(0x95)]['length']+'/'+(this[_0x1c6686(0x199)][_0x1c6686(0x127)]||0x7)+')';await this[_0x1c6686(0x7e)](_0x1c6686(0x149),{'val':_0xf7c397,'ack':!![]}),this[_0x1c6686(0xec)](_0x1c6686(0x9b)),this[_0x1c6686(0xec)](_0x1c6686(0xc8)),this[_0x1c6686(0xec)](_0x1c6686(0xfa)),this[_0x1c6686(0xec)](_0x1c6686(0x80)),this[_0x1c6686(0xec)](_0x1c6686(0xab)),this[_0x1c6686(0xec)](_0x1c6686(0x1b0)),this['subscribeStates']('analysis.training.triggerSecurity'),this[_0x1c6686(0xec)]('analysis.training.triggerHealth'),this[_0x1c6686(0xec)](_0x1c6686(0x153)),this[_0x1c6686(0xec)]('analysis.training.triggerComfort'),this['subscribeStates'](_0x1c6686(0xfd)),this[_0x1c6686(0xec)]('analysis.energy.mpcActive'),this[_0x1c6686(0xec)](_0x1c6686(0x16d));this[_0x1c6686(0x199)]['infrasoundEnabled']&&this['config'][_0x1c6686(0x180)]&&(this['log'][_0x1c6686(0x16f)](_0x1c6686(0x135)+this[_0x1c6686(0x199)][_0x1c6686(0x180)]),this[_0x1c6686(0x15c)](this[_0x1c6686(0x199)]['infrasoundSensorId']));const _0x5ef5a0=this[_0x1c6686(0x199)][_0x1c6686(0x136)];if(_0x5ef5a0)for(const _0x312306 of _0x5ef5a0){await this[_0x1c6686(0x72)](_0x312306['id']);}const _0x44bae5=this[_0x1c6686(0x199)]['presenceDevices'];if(_0x44bae5)for(const _0x20a11f of _0x44bae5){await this[_0x1c6686(0x72)](_0x20a11f);}if(this[_0x1c6686(0x199)][_0x1c6686(0x176)]&&this[_0x1c6686(0x199)][_0x1c6686(0xbd)])await this[_0x1c6686(0x72)](this[_0x1c6686(0x199)][_0x1c6686(0xbd)]+'.communicate.request');setTimeout(()=>this[_0x1c6686(0x8f)](),0x1388);if(this['analysisTimer'])clearInterval(this[_0x1c6686(0x1b8)]);const _0x250260=this['config'][_0x1c6686(0xaf)]||0xf;_0x250260>0x0&&(this[_0x1c6686(0x1b8)]=setInterval(()=>{const _0x3841ab=_0x1c6686;this[_0x3841ab(0x123)](),automation[_0x3841ab(0x106)](this),automation['monitorEnforcements'](this);},_0x250260*0x3c*0x3e8));setTimeout(()=>{const _0x1a0a21=_0x1c6686;automation[_0x1a0a21(0x106)](this),automation['monitorEnforcements'](this);},0x2710);this[_0x1c6686(0x199)][_0x1c6686(0x14a)]!==![]&&(this['trackerHeartbeat']=setInterval(()=>{const _0x10b35a=_0x1c6686;if(this[_0x10b35a(0xca)]){const _0x4f54dd=Date[_0x10b35a(0x174)](),_0x3338a4=this['lastTrackerEventTime']||_0x4f54dd,_0x16e083=(_0x4f54dd-_0x3338a4)/0x3e8;_0x16e083>0x2&&(this[_0x10b35a(0x198)]=_0x4f54dd,pythonBridge['send'](this,'TRACK_EVENT',{'room':null,'dt':_0x16e083}));}},0xbb8));if(this[_0x1c6686(0x143)])clearInterval(this['healthTrendInterval']);this[_0x1c6686(0x143)]=setInterval(()=>{const _0x3b6cdf=_0x1c6686;this[_0x3b6cdf(0xca)]&&(this['log'][_0x3b6cdf(0x16f)](_0x3b6cdf(0x160)),this['runPythonHealthCheck']());},0x4*0x3c*0x3c*0x3e8),schedulers[_0x1c6686(0x171)](this,()=>aiAgent['createDailyDigest'](this,pythonBridge)),schedulers[_0x1c6686(0x122)](this),schedulers['setupDriftAnalysisScheduler'](this,()=>aiAgent[_0x1c6686(0x9c)](this)),schedulers[_0x1c6686(0xdd)](this,()=>aiAgent[_0x1c6686(0x12c)](this)),pythonBridge['startService'](this,installer[_0x1c6686(0xa5)]),setTimeout(async()=>{const _0x9060ec=_0x1c6686;await topology[_0x9060ec(0x114)](this);try{const _0x306d05=await this['getStateAsync']('analysis.topology.structure');if(_0x306d05&&_0x306d05[_0x9060ec(0x154)])pythonBridge['send'](this,_0x9060ec(0x11f),JSON[_0x9060ec(0x6a)](_0x306d05[_0x9060ec(0x154)]));}catch(_0x3c38c5){}this[_0x9060ec(0x128)](),this['triggerGaitAnalysis'](),this[_0x9060ec(0x166)](),this[_0x9060ec(0x195)]();},0x1388);}['onUnload'](_0x2d28e0){const _0x3e4b03=a0_0x525b69;if(this[_0x3e4b03(0x1b8)])clearInterval(this[_0x3e4b03(0x1b8)]);if(this[_0x3e4b03(0x165)])clearInterval(this[_0x3e4b03(0x165)]);if(this[_0x3e4b03(0x13c)])clearInterval(this[_0x3e4b03(0x13c)]);if(this[_0x3e4b03(0x143)])clearInterval(this[_0x3e4b03(0x143)]);if(this[_0x3e4b03(0x131)])this['ltmJob'][_0x3e4b03(0x168)]();if(this[_0x3e4b03(0xeb)])this['modeResetJob'][_0x3e4b03(0x168)]();if(this[_0x3e4b03(0xee)])this['briefingJob'][_0x3e4b03(0x168)]();recorder['abortExitTimer'](this),pythonBridge['stopService'](this),_0x2d28e0();}async[a0_0x525b69(0x162)](_0x366bad,_0x57d890){const _0x16c92d=a0_0x525b69;if(!_0x57d890||this['dependencyInstallInProgress'])return;if(_0x366bad['includes']('telegram')&&_0x366bad[_0x16c92d(0xa9)]('communicate.request')&&_0x57d890[_0x16c92d(0x154)])return;if(this[_0x16c92d(0x199)]['infrasoundEnabled']&&_0x366bad===this[_0x16c92d(0x199)][_0x16c92d(0x180)]){this[_0x16c92d(0x141)](_0x57d890[_0x16c92d(0x154)]);return;}if(_0x366bad===this['namespace']+'.system.mode'){if(_0x57d890[_0x16c92d(0x154)]&&Object[_0x16c92d(0x1a3)](setup['SYSTEM_MODES'])[_0x16c92d(0xf4)](_0x57d890[_0x16c92d(0x154)])){this[_0x16c92d(0xde)]=_0x57d890[_0x16c92d(0x154)];if(_0x57d890['val']===setup[_0x16c92d(0x17b)][_0x16c92d(0x10f)])await recorder[_0x16c92d(0x119)](this,![]);else await recorder[_0x16c92d(0x119)](this,!![]);if(this[_0x16c92d(0xca)]){let _0x345161=![],_0x3908c8=0x0,_0x59e6b2=_0x16c92d(0xe9);if(this[_0x16c92d(0xde)]===_0x16c92d(0x142))_0x345161=!![],_0x3908c8=0x168,_0x59e6b2='Party\x20Mode';else this[_0x16c92d(0xde)]==='guest'&&(_0x345161=!![],_0x3908c8=0x5a0,_0x59e6b2=_0x16c92d(0xdc));pythonBridge[_0x16c92d(0x152)](this,_0x16c92d(0x10b),{'active':_0x345161,'duration':_0x3908c8,'label':_0x59e6b2}),await this[_0x16c92d(0x7e)](_0x16c92d(0x1b7),{'val':JSON[_0x16c92d(0x6b)]({'active':_0x345161,'label':_0x59e6b2,'timestamp':Date[_0x16c92d(0x174)]()}),'ack':!![]});}}if(!_0x57d890[_0x16c92d(0x1b1)])this[_0x16c92d(0x138)](_0x366bad,{'val':this[_0x16c92d(0xde)],'ack':!![]});return;}_0x366bad['endsWith'](_0x16c92d(0x16d))&&_0x57d890[_0x16c92d(0x1b1)]&&this['protectAiMemory'](_0x57d890['val']);if(!_0x57d890[_0x16c92d(0x1b1)]){if(_0x366bad[_0x16c92d(0xf4)](_0x16c92d(0x9b))&&_0x57d890['val']){this[_0x16c92d(0x138)](_0x366bad,{'val':![],'ack':!![]}),aiAgent[_0x16c92d(0xad)](this);return;}if(_0x366bad['includes'](_0x16c92d(0x191))&&_0x57d890[_0x16c92d(0x154)]){this[_0x16c92d(0x138)](_0x366bad,{'val':![],'ack':!![]});if(this[_0x16c92d(0xca)])aiAgent[_0x16c92d(0x16c)](this,pythonBridge);return;}if(_0x366bad[_0x16c92d(0xf4)](_0x16c92d(0x12f))&&_0x57d890['val']){this[_0x16c92d(0x138)](_0x366bad,{'val':![],'ack':!![]}),aiAgent[_0x16c92d(0x12c)](this);return;}if(_0x366bad[_0x16c92d(0xf4)](_0x16c92d(0x140))&&_0x57d890[_0x16c92d(0x154)]){this[_0x16c92d(0x138)](_0x366bad,{'val':![],'ack':!![]}),aiAgent['executeAutomationAction'](this);return;}if(_0x366bad[_0x16c92d(0xf4)](_0x16c92d(0x1a8))&&_0x57d890[_0x16c92d(0x154)]){this[_0x16c92d(0x138)](_0x366bad,{'val':![],'ack':!![]});if(this[_0x16c92d(0xca)])try{const _0x31c20a=await this[_0x16c92d(0x19f)]('LTM.trainingData.sequences');if(_0x31c20a&&_0x31c20a[_0x16c92d(0x154)]){const _0x5f4442=JSON[_0x16c92d(0x6a)](_0x31c20a[_0x16c92d(0x154)]);this['setStateAsync'](_0x16c92d(0x6d),{'val':'Sec-Training\x20started...','ack':!![]}),pythonBridge[_0x16c92d(0x152)](this,_0x16c92d(0x112),{'sequences':_0x5f4442});}}catch(_0x1b0bb2){}return;}if(_0x366bad['includes'](_0x16c92d(0x17e))&&_0x57d890[_0x16c92d(0x154)]){this['setState'](_0x366bad,{'val':![],'ack':!![]});if(this[_0x16c92d(0xca)])try{const _0x17ef7d=await this[_0x16c92d(0x19f)](_0x16c92d(0xc1));if(_0x17ef7d&&_0x17ef7d[_0x16c92d(0x154)])pythonBridge[_0x16c92d(0x152)](this,_0x16c92d(0x98),{'digests':JSON[_0x16c92d(0x6a)](_0x17ef7d[_0x16c92d(0x154)])});}catch(_0x4dd24d){}return;}if(_0x366bad[_0x16c92d(0xf4)](_0x16c92d(0x153))&&_0x57d890[_0x16c92d(0x154)]){this[_0x16c92d(0x138)](_0x366bad,{'val':![],'ack':!![]});if(this[_0x16c92d(0xca)])try{const _0x3853b0=await this[_0x16c92d(0x19f)]('LTM.trainingData.thermodynamics');if(_0x3853b0&&_0x3853b0[_0x16c92d(0x154)])pythonBridge[_0x16c92d(0x152)](this,_0x16c92d(0x13a),{'points':JSON[_0x16c92d(0x6a)](_0x3853b0[_0x16c92d(0x154)])});}catch(_0xb2cb7c){}return;}if(_0x366bad[_0x16c92d(0xf4)](_0x16c92d(0xc9))&&_0x57d890[_0x16c92d(0x154)]){this[_0x16c92d(0x138)](_0x366bad,{'val':![],'ack':!![]});if(this[_0x16c92d(0xca)])try{const _0x3f424b=await this[_0x16c92d(0x19f)]('LTM.rawEventLog');if(_0x3f424b&&_0x3f424b['val'])pythonBridge['send'](this,_0x16c92d(0x120),{'events':JSON['parse'](_0x3f424b[_0x16c92d(0x154)])});}catch(_0x57a288){}return;}if(_0x366bad['includes'](_0x16c92d(0xfd))&&_0x57d890[_0x16c92d(0x154)]){this[_0x16c92d(0x138)](_0x366bad,{'val':![],'ack':!![]}),topology[_0x16c92d(0x114)](this);if(this['isProVersion'])try{const _0x4b08b1=await this[_0x16c92d(0x19f)](_0x16c92d(0x184));if(_0x4b08b1&&_0x4b08b1['val']){const _0x5aec64=JSON[_0x16c92d(0x6a)](_0x4b08b1['val']);this[_0x16c92d(0x19e)][_0x16c92d(0x16f)](_0x16c92d(0xc4)+_0x5aec64['length']+_0x16c92d(0xb0)),pythonBridge[_0x16c92d(0x152)](this,_0x16c92d(0x100),{'sequences':_0x5aec64});}else this['log']['warn'](_0x16c92d(0x97));}catch(_0x2d3dfc){this[_0x16c92d(0x19e)][_0x16c92d(0x1a5)](_0x16c92d(0x102)+_0x2d3dfc[_0x16c92d(0x182)]);}return;}}if(this[_0x16c92d(0x199)][_0x16c92d(0x178)]&&this[_0x16c92d(0x199)][_0x16c92d(0x178)][_0x16c92d(0xf4)](_0x366bad)){await this[_0x16c92d(0x8f)]();return;}const _0x4c7c45=(this[_0x16c92d(0x199)][_0x16c92d(0x136)]||[])[_0x16c92d(0x86)](_0x41a88=>_0x41a88['id']===_0x366bad);if(_0x4c7c45){const _0x3ce019=await recorder[_0x16c92d(0x87)](this,_0x366bad,_0x57d890,_0x4c7c45);_0x3ce019&&_0x3ce019[_0x16c92d(0x189)]===_0x16c92d(0x18a)&&_0x3ce019[_0x16c92d(0xa7)]&&this[_0x16c92d(0xca)]&&deadMan[_0x16c92d(0xf0)](this,_0x3ce019[_0x16c92d(0xa7)]),_0x57d890[_0x16c92d(0x154)]&&(_0x57d890[_0x16c92d(0x154)]===!![]||_0x57d890[_0x16c92d(0x154)]===0x1||String(_0x57d890[_0x16c92d(0x154)])[_0x16c92d(0x147)]()===_0x16c92d(0xbc))&&(_0x4c7c45[_0x16c92d(0x189)]&&(_0x4c7c45[_0x16c92d(0x189)][_0x16c92d(0xf4)](_0x16c92d(0x151))||_0x4c7c45[_0x16c92d(0x189)][_0x16c92d(0xf4)](_0x16c92d(0x1a7))||_0x4c7c45[_0x16c92d(0x189)]['includes'](_0x16c92d(0x7f)))&&this['analyzeWindowOpening'](_0x4c7c45)),(_0x4c7c45['type']===_0x16c92d(0xe2)||_0x4c7c45['type']===_0x16c92d(0x110))&&automation[_0x16c92d(0x129)](this);}}async[a0_0x525b69(0xf7)](_0x5e07fc){const _0x510532=a0_0x525b69;if(!this['memoryCache']||Date[_0x510532(0x174)]()-this[_0x510532(0xb7)]>0x493e0)return;if(!this['memoryCache'][_0x510532(0xf5)]||!this[_0x510532(0xef)]['times'])return;try{const _0x357bc0=JSON[_0x510532(0x6a)](_0x5e07fc),_0x2389f1=this[_0x510532(0xef)][_0x510532(0xf5)];let _0x4eb877=![];for(const _0x420821 in _0x2389f1){if(_0x2389f1[_0x420821][_0x510532(0xf4)]('AI')&&_0x357bc0[_0x420821]&&!_0x357bc0[_0x420821][_0x510532(0xf4)]('AI')){_0x4eb877=!![];break;}}_0x4eb877&&(this['log'][_0x510532(0x16f)]('ðŸ§ \x20Memory\x20Protection:\x20Restoring\x20persisted\x20AI-Calculations\x20(preventing\x20\x27Cold\x20Start\x27\x20amnesia).'),await this[_0x510532(0x7e)](_0x510532(0xf1),{'val':JSON['stringify'](this[_0x510532(0xef)][_0x510532(0x88)]),'ack':!![]}),await this[_0x510532(0x7e)](_0x510532(0x16d),{'val':JSON[_0x510532(0x6b)](this[_0x510532(0xef)][_0x510532(0xf5)]),'ack':!![]}));}catch(_0x1ea59a){}}async[a0_0x525b69(0x193)](_0x4934d7){const _0x5b496b=a0_0x525b69;if(typeof _0x4934d7===_0x5b496b(0xe1)&&_0x4934d7[_0x5b496b(0x182)]){if(_0x4934d7[_0x5b496b(0x9d)]===_0x5b496b(0x107))try{const _0x3a7a1d=await automation[_0x5b496b(0xc7)](this);this[_0x5b496b(0x175)](_0x4934d7[_0x5b496b(0x7a)],_0x4934d7['command'],{'success':!![],'results':_0x3a7a1d},_0x4934d7[_0x5b496b(0xfb)]);}catch(_0x389ce5){this[_0x5b496b(0x175)](_0x4934d7['from'],_0x4934d7[_0x5b496b(0x9d)],{'success':![],'error':_0x389ce5[_0x5b496b(0x182)]},_0x4934d7[_0x5b496b(0xfb)]);}else{if(_0x4934d7[_0x5b496b(0x9d)]===_0x5b496b(0x172))try{const {current_temps:_0x1f0003,t_out:_0xdcbbf8,targets:_0x5f564f,t_forecast:_0x33db89}=_0x4934d7[_0x5b496b(0x182)],_0x3eebb1=[];let _0x58264a={};try{const _0x4011af=await this[_0x5b496b(0x19f)]('analysis.energy.insulationScore');if(_0x4011af&&_0x4011af[_0x5b496b(0x154)]){const _0x18a5d1=JSON[_0x5b496b(0x6a)](_0x4011af[_0x5b496b(0x154)]);_0x58264a=_0x18a5d1[_0x5b496b(0xd9)]||_0x18a5d1;}}catch(_0x5656c2){}const _0x2a9103=_0x33db89!==undefined&&_0x33db89!==null?(_0xdcbbf8+_0x33db89)/0x2:_0xdcbbf8;for(const [_0xaece1a,_0x6ee6f7]of Object[_0x5b496b(0x1b4)](_0x1f0003)){const _0x4bd03b=_0x5f564f[_0xaece1a]||0x15;if(_0x6ee6f7<=_0x4bd03b)continue;let _0x13d19c=_0x58264a[_0xaece1a]||-0.5;if(_0x13d19c>=0x0)_0x13d19c=-0.5;const _0x1d721c=Math[_0x5b496b(0x1aa)](_0x13d19c),_0xac6a7d=_0x6ee6f7-_0x4bd03b;let _0x5232bd=Math[_0x5b496b(0xe5)](_0xac6a7d/_0x1d721c*0x3c);const _0x27cb22=_0x6ee6f7-_0xdcbbf8,_0x2494ae=_0x6ee6f7-_0x2a9103;if(_0x2494ae!==0x0&&_0x27cb22!==0x0){const _0x3331a9=_0x27cb22/_0x2494ae;_0x5232bd=Math['floor'](_0x5232bd*_0x3331a9);}if(_0x5232bd>0xf){if(_0x5232bd>0xf0)_0x5232bd=0xf0;_0x3eebb1[_0x5b496b(0x16a)]({'room':_0xaece1a,'minutes_safe':_0x5232bd,'target':_0x4bd03b,'current':_0x6ee6f7,'savings_msg':_0x5b496b(0x188)+_0x5232bd+_0x5b496b(0x1b5)});}}_0x3eebb1[_0x5b496b(0x157)]((_0x25fe0c,_0x5b5618)=>_0x5b5618['minutes_safe']-_0x25fe0c[_0x5b496b(0xe0)]),this[_0x5b496b(0x175)](_0x4934d7['from'],_0x4934d7[_0x5b496b(0x9d)],{'success':!![],'proposals':_0x3eebb1},_0x4934d7[_0x5b496b(0xfb)]);}catch(_0x2a4a74){this[_0x5b496b(0x175)](_0x4934d7['from'],_0x4934d7[_0x5b496b(0x9d)],{'success':![],'error':_0x2a4a74[_0x5b496b(0x182)]},_0x4934d7[_0x5b496b(0xfb)]);}else{if(_0x4934d7[_0x5b496b(0x9d)]===_0x5b496b(0xa4))try{const _0x5e71df=_0x4934d7[_0x5b496b(0x182)]['key'],_0x19c465=_0x5b496b(0x16e),_0x5d066c=await this[_0x5b496b(0x19f)](_0x19c465);let _0x4d4ec7={};if(_0x5d066c&&_0x5d066c['val'])try{_0x4d4ec7=JSON['parse'](_0x5d066c['val']);}catch(_0x476b63){}_0x5e71df&&_0x4d4ec7[_0x5e71df]?(delete _0x4d4ec7[_0x5e71df],await this[_0x5b496b(0x7e)](_0x19c465,{'val':JSON[_0x5b496b(0x6b)](_0x4d4ec7),'ack':!![]}),this[_0x5b496b(0x19e)][_0x5b496b(0x16f)](_0x5b496b(0xe8)+_0x5e71df+_0x5b496b(0x6f)),this[_0x5b496b(0x175)](_0x4934d7[_0x5b496b(0x7a)],_0x4934d7[_0x5b496b(0x9d)],{'success':!![]},_0x4934d7[_0x5b496b(0xfb)])):this[_0x5b496b(0x175)](_0x4934d7[_0x5b496b(0x7a)],_0x4934d7[_0x5b496b(0x9d)],{'success':![],'error':_0x5b496b(0xcf)},_0x4934d7[_0x5b496b(0xfb)]);}catch(_0x920069){this[_0x5b496b(0x175)](_0x4934d7[_0x5b496b(0x7a)],_0x4934d7[_0x5b496b(0x9d)],{'success':![],'error':_0x920069[_0x5b496b(0x182)]},_0x4934d7['callback']);}else{if(_0x4934d7[_0x5b496b(0x9d)]==='dismissAutomation')await this[_0x5b496b(0x7e)](_0x5b496b(0xd6),{'val':![],'ack':!![]}),await this[_0x5b496b(0x7e)]('analysis.automation.description',{'val':'','ack':!![]}),await this[_0x5b496b(0x7e)](_0x5b496b(0x12b),{'val':'','ack':!![]}),this[_0x5b496b(0x175)](_0x4934d7['from'],_0x4934d7['command'],{'success':!![]},_0x4934d7[_0x5b496b(0xfb)]);else{if(_0x4934d7[_0x5b496b(0x9d)]==='simulateButler'){const {targetId:_0x2b091c,targetValue:_0x4b5a0b}=_0x4934d7[_0x5b496b(0x182)];await this[_0x5b496b(0x7e)](_0x5b496b(0xd6),{'val':!![],'ack':!![]}),await this[_0x5b496b(0x7e)](_0x5b496b(0x1ad),{'val':_0x5b496b(0x159),'ack':!![]}),await this[_0x5b496b(0x7e)](_0x5b496b(0x12b),{'val':_0x2b091c,'ack':!![]}),await this[_0x5b496b(0x7e)](_0x5b496b(0xce),{'val':String(_0x4b5a0b),'ack':!![]}),this[_0x5b496b(0x175)](_0x4934d7[_0x5b496b(0x7a)],_0x4934d7['command'],{'success':!![]},_0x4934d7[_0x5b496b(0xfb)]);}else{if(_0x4934d7[_0x5b496b(0x9d)]===_0x5b496b(0x15d))try{const _0x25025b=_0x4934d7[_0x5b496b(0x182)][_0x5b496b(0xb1)];if(!_0x25025b)throw new Error(_0x5b496b(0x17f));const _0x1bceb6=new GoogleGenerativeAI(_0x25025b),_0x2cb0fd=_0x1bceb6[_0x5b496b(0x196)]({'model':GEMINI_MODEL}),_0x4bac14=await _0x2cb0fd[_0x5b496b(0x92)](_0x5b496b(0xbe)),_0x444bac=await _0x4bac14[_0x5b496b(0xac)];if(_0x444bac[_0x5b496b(0x76)]())this[_0x5b496b(0x175)](_0x4934d7[_0x5b496b(0x7a)],_0x4934d7[_0x5b496b(0x9d)],{'success':!![],'message':_0x5b496b(0x8a)},_0x4934d7[_0x5b496b(0xfb)]);else throw new Error('Keine\x20Antwort\x20von\x20Gemini');}catch(_0x568eba){this[_0x5b496b(0x175)](_0x4934d7[_0x5b496b(0x7a)],_0x4934d7[_0x5b496b(0x9d)],{'success':![],'message':_0x568eba[_0x5b496b(0x182)]},_0x4934d7[_0x5b496b(0xfb)]);}else{if(_0x4934d7[_0x5b496b(0x9d)]===_0x5b496b(0xed))try{const _0xe3ed2d=await scanner['scanForDevices'](this,_0x4934d7[_0x5b496b(0x182)]||{});this[_0x5b496b(0x175)](_0x4934d7[_0x5b496b(0x7a)],_0x4934d7[_0x5b496b(0x9d)],{'success':!![],'devices':_0xe3ed2d},_0x4934d7[_0x5b496b(0xfb)]);}catch(_0x3e39e4){this[_0x5b496b(0x175)](_0x4934d7['from'],_0x4934d7[_0x5b496b(0x9d)],{'success':![],'error':_0x3e39e4['message']},_0x4934d7[_0x5b496b(0xfb)]);}else{if(_0x4934d7[_0x5b496b(0x9d)]==='updateTopologyMatrix')try{const {matrix:_0x310d8f}=_0x4934d7[_0x5b496b(0x182)],_0x2a36b9=await this[_0x5b496b(0x19f)](_0x5b496b(0x118));if(_0x2a36b9&&_0x2a36b9[_0x5b496b(0x154)]){const _0x3433a2=JSON[_0x5b496b(0x6a)](_0x2a36b9[_0x5b496b(0x154)]);_0x3433a2[_0x5b496b(0x79)]=_0x310d8f,_0x3433a2[_0x5b496b(0xd5)]=Date[_0x5b496b(0x174)](),await this[_0x5b496b(0x7e)](_0x5b496b(0x118),{'val':JSON[_0x5b496b(0x6b)](_0x3433a2),'ack':!![]}),pythonBridge[_0x5b496b(0x152)](this,'SET_TOPOLOGY',_0x3433a2);}this[_0x5b496b(0x175)](_0x4934d7[_0x5b496b(0x7a)],_0x4934d7[_0x5b496b(0x9d)],{'success':!![]},_0x4934d7[_0x5b496b(0xfb)]);}catch(_0x2c87c0){this[_0x5b496b(0x19e)]['error'](_0x2c87c0);}else{if(_0x4934d7[_0x5b496b(0x9d)]===_0x5b496b(0x125))this['sendTo'](_0x4934d7[_0x5b496b(0x7a)],_0x4934d7[_0x5b496b(0x9d)],{'success':!![],'dailyDigests':this[_0x5b496b(0x95)]||[],'analysisHistory':this['analysisHistory']||[]},_0x4934d7[_0x5b496b(0xfb)]);else{if(_0x4934d7[_0x5b496b(0x9d)]==='getOverviewData'){const _0xedabdd=this[_0x5b496b(0x95)][_0x5b496b(0x113)],_0x1da81b=new Array(0x18)[_0x5b496b(0x158)](0x0),_0x13561f=new Date()[_0x5b496b(0x14f)](0x0,0x0,0x0,0x0);this[_0x5b496b(0x99)]&&this[_0x5b496b(0x99)][_0x5b496b(0x19b)](_0x1c0706=>{const _0x425deb=_0x5b496b;if(_0x1c0706[_0x425deb(0xa2)]>=_0x13561f){const _0x143542=new Date(_0x1c0706['timestamp'])[_0x425deb(0x197)]();if(_0x143542>=0x0&&_0x143542<0x18)_0x1da81b[_0x143542]++;}});let _0x1c5962=![],_0x4442aa='',_0x1deb34='',_0x400746='';try{const _0x430654=await this[_0x5b496b(0x19f)](_0x5b496b(0xd6));if(_0x430654&&_0x430654[_0x5b496b(0x154)]){_0x1c5962=!![];const _0x5ba84c=await this[_0x5b496b(0x19f)](_0x5b496b(0x1ad));_0x4442aa=_0x5ba84c?_0x5ba84c['val']:'';const _0x14a136=await this[_0x5b496b(0x19f)](_0x5b496b(0x12b));_0x1deb34=_0x14a136?_0x14a136[_0x5b496b(0x154)]:'';const _0x255416=await this[_0x5b496b(0x19f)](_0x5b496b(0xce));_0x400746=_0x255416?_0x255416[_0x5b496b(0x154)]:'';}}catch(_0x7bc52e){}const _0x551e5e=await this[_0x5b496b(0x81)](),_0x1cfc2b=(this[_0x5b496b(0x199)][_0x5b496b(0x136)]||[])['some'](_0x5c0ca2=>_0x5c0ca2['isSolar']),_0x4d4d96=_0x551e5e&&_0x1cfc2b;let _0x501ac9='';try{const _0x4ce6f3=await this[_0x5b496b(0x19f)](_0x5b496b(0x163));if(_0x4ce6f3&&_0x4ce6f3['val'])_0x501ac9=_0x4ce6f3[_0x5b496b(0x154)];}catch(_0x1e141c){}this[_0x5b496b(0x175)](_0x4934d7[_0x5b496b(0x7a)],_0x4934d7[_0x5b496b(0x9d)],{'success':!![],'eventHistory':this[_0x5b496b(0x99)][_0x5b496b(0x1a1)](0x0,0xf),'stats':{'digestCount':_0xedabdd,'isPresent':this[_0x5b496b(0x150)],'hourlyActivity':_0x1da81b,'solarActive':_0x4d4d96,'presenceWho':_0x501ac9},'automation':{'detected':_0x1c5962,'description':_0x4442aa,'targetId':_0x1deb34,'targetValue':_0x400746}},_0x4934d7[_0x5b496b(0xfb)]);}else{if(_0x4934d7[_0x5b496b(0x9d)]==='getEnums'){const _0x4579f2=await this[_0x5b496b(0xa1)]('enum.functions.*',_0x5b496b(0x134)),_0x530304=[];if(_0x4579f2)for(const _0xa94114 in _0x4579f2){const _0x25e67d=_0x4579f2[_0xa94114],_0x4fcec9=(_0x25e67d[_0x5b496b(0x194)]&&typeof _0x25e67d['common'][_0x5b496b(0x1bb)]===_0x5b496b(0xe1)?_0x25e67d[_0x5b496b(0x194)]['name']['de']:_0x25e67d[_0x5b496b(0x194)][_0x5b496b(0x1bb)])||_0x25e67d[_0x5b496b(0x194)][_0x5b496b(0x1bb)];_0x530304[_0x5b496b(0x16a)]({'id':_0xa94114,'name':_0x4fcec9});}const _0x3a5afa=await this[_0x5b496b(0xa1)](_0x5b496b(0xb9),'enum'),_0x3046a6=[];if(_0x3a5afa)for(const _0x48a87d in _0x3a5afa){const _0x2e54f1=_0x3a5afa[_0x48a87d],_0x539151=(_0x2e54f1['common']&&typeof _0x2e54f1[_0x5b496b(0x194)][_0x5b496b(0x1bb)]===_0x5b496b(0xe1)?_0x2e54f1[_0x5b496b(0x194)][_0x5b496b(0x1bb)]['de']:_0x2e54f1['common'][_0x5b496b(0x1bb)])||_0x48a87d['split']('.')[_0x5b496b(0x1ae)]();_0x3046a6['push'](_0x539151);}this['sendTo'](_0x4934d7[_0x5b496b(0x7a)],_0x4934d7[_0x5b496b(0x9d)],{'success':!![],'enums':_0x530304,'rooms':_0x3046a6},_0x4934d7[_0x5b496b(0xfb)]);}else{if(_0x4934d7[_0x5b496b(0x9d)]===_0x5b496b(0x101))try{let _0x5d22d9=_0x5b496b(0xa0),_0x1e5812=_0x5b496b(0x6e);if(this[_0x5b496b(0x199)][_0x5b496b(0x111)]){const _0x177f30=await recorder[_0x5b496b(0x18b)](this);_0x5d22d9=_0x177f30!==null?_0x177f30+'Â°C':_0x5b496b(0xd3);}if(this['config'][_0x5b496b(0xea)]){const _0x161dee=await this[_0x5b496b(0xe7)]('system.adapter.'+this[_0x5b496b(0x199)]['calendarInstance']);_0x1e5812=_0x161dee?_0x5b496b(0x9a):_0x5b496b(0xcd);}this['sendTo'](_0x4934d7[_0x5b496b(0x7a)],_0x4934d7[_0x5b496b(0x9d)],{'success':!![],'weather':_0x5d22d9,'calendar':_0x1e5812},_0x4934d7['callback']);}catch(_0xd8da86){this[_0x5b496b(0x175)](_0x4934d7[_0x5b496b(0x7a)],_0x4934d7[_0x5b496b(0x9d)],{'success':![],'error':_0xd8da86[_0x5b496b(0x182)]},_0x4934d7['callback']);}else{if(_0x4934d7[_0x5b496b(0x9d)]===_0x5b496b(0x1b9))try{const _0x5dc332=_0x4934d7[_0x5b496b(0x182)][_0x5b496b(0xc0)],_0x2e2475=await this[_0x5b496b(0x19d)](_0x5dc332+_0x5b496b(0xfc));let _0x4f2eca=[];if(_0x2e2475&&_0x2e2475[_0x5b496b(0x154)]){const _0x45eb9e=JSON[_0x5b496b(0x6a)](_0x2e2475['val']),_0x41263e=new Set();Array['isArray'](_0x45eb9e)&&_0x45eb9e[_0x5b496b(0x19b)](_0xbd75ef=>{const _0x3667e2=_0x5b496b;if(_0xbd75ef[_0x3667e2(0x169)])_0x41263e[_0x3667e2(0xbb)](_0xbd75ef[_0x3667e2(0x169)]);else{if(_0xbd75ef[_0x3667e2(0x14b)])_0x41263e[_0x3667e2(0xbb)](_0xbd75ef[_0x3667e2(0x14b)]);}}),_0x4f2eca=Array['from'](_0x41263e)[_0x5b496b(0x157)]();}if(_0x4f2eca['length']===0x0)_0x4f2eca=[_0x5b496b(0xfe)];this[_0x5b496b(0x175)](_0x4934d7[_0x5b496b(0x7a)],_0x4934d7[_0x5b496b(0x9d)],{'success':!![],'names':_0x4f2eca},_0x4934d7[_0x5b496b(0xfb)]);}catch(_0x3c8966){this['sendTo'](_0x4934d7[_0x5b496b(0x7a)],_0x4934d7[_0x5b496b(0x9d)],{'success':![],'error':_0x3c8966['message']},_0x4934d7[_0x5b496b(0xfb)]);}else{if(_0x4934d7[_0x5b496b(0x9d)]===_0x5b496b(0x70))try{await setup[_0x5b496b(0x11c)](this,_0x5b496b(0x6c),![],![]),this['sendTo'](_0x4934d7[_0x5b496b(0x7a)],_0x4934d7[_0x5b496b(0x9d)],{'success':!![],'message':_0x5b496b(0x85)},_0x4934d7[_0x5b496b(0xfb)]);}catch(_0x452928){this['log'][_0x5b496b(0x1a5)](_0x5b496b(0x17a)+_0x452928[_0x5b496b(0x182)]),this[_0x5b496b(0x175)](_0x4934d7[_0x5b496b(0x7a)],_0x4934d7[_0x5b496b(0x9d)],{'success':![],'message':_0x5b496b(0x132)+_0x452928[_0x5b496b(0x182)]},_0x4934d7[_0x5b496b(0xfb)]);}}}}}}}}}}}}}}}}async[a0_0x525b69(0xdb)](){const _0xa8eea9=a0_0x525b69;try{const _0xf37944=await this[_0xa8eea9(0x19f)](setup[_0xa8eea9(0xc5)]);_0xf37944&&_0xf37944[_0xa8eea9(0x154)]&&Object[_0xa8eea9(0x1a3)](setup['SYSTEM_MODES'])['includes'](_0xf37944[_0xa8eea9(0x154)])?this[_0xa8eea9(0xde)]=_0xf37944[_0xa8eea9(0x154)]:(this[_0xa8eea9(0xde)]=setup[_0xa8eea9(0x17b)][_0xa8eea9(0x19a)],await this[_0xa8eea9(0x7e)](setup['SYSTEM_DP_MODE'],{'val':setup[_0xa8eea9(0x17b)][_0xa8eea9(0x19a)],'ack':!![]}));}catch(_0x199b88){this[_0xa8eea9(0xde)]=setup['SYSTEM_MODES']['NORMAL'];}}async[a0_0x525b69(0x8f)](){const _0x1a3b9d=a0_0x525b69;try{const _0x549207=this['config'][_0x1a3b9d(0x178)]||[];let _0x463fb3=![];const _0x4841f8=[];for(const _0x2b720a of _0x549207){try{const _0x281ef0=await this['getForeignStateAsync'](_0x2b720a);_0x281ef0&&(_0x281ef0['val']===!![]||_0x281ef0[_0x1a3b9d(0x154)]===_0x1a3b9d(0x14c)||_0x281ef0[_0x1a3b9d(0x154)]===0x1)&&(_0x463fb3=!![],_0x4841f8['push'](_0x2b720a));}catch(_0x590bc6){}}return await this['setStateAsync']('system.presenceWho',{'val':_0x4841f8[_0x1a3b9d(0x192)](',\x20'),'ack':!![]}),_0x463fb3&&(this[_0x1a3b9d(0xba)]&&(this[_0x1a3b9d(0x19e)][_0x1a3b9d(0x16f)](_0x1a3b9d(0xd7)),recorder[_0x1a3b9d(0x75)](this)),!this[_0x1a3b9d(0x150)]&&this[_0x1a3b9d(0xde)]===setup[_0x1a3b9d(0x17b)][_0x1a3b9d(0x19a)]&&await recorder[_0x1a3b9d(0x119)](this,!![])),_0x463fb3;}catch(_0x28807f){return![];}}async['runAutopilot'](){const _0xfd1d04=a0_0x525b69;this[_0xfd1d04(0x19e)][_0xfd1d04(0x18e)](_0xfd1d04(0xf2)),await aiAgent[_0xfd1d04(0xad)](this),this[_0xfd1d04(0x195)](),this[_0xfd1d04(0x1af)](),this[_0xfd1d04(0x166)]();}async['checkSolarCondition'](){const _0x4b3977=a0_0x525b69,_0x4609c9=['weatherunderground.0','accuweather.0',_0x4b3977(0x126)],_0x465913=['forecast.current.weather',_0x4b3977(0x7b),_0x4b3977(0x108)];for(const _0x37d776 of _0x4609c9){for(const _0x268bbe of _0x465913){try{const _0x3414f9=_0x37d776+'.'+_0x268bbe,_0x4b8e0a=await this['getForeignStateAsync'](_0x3414f9);if(_0x4b8e0a&&_0x4b8e0a[_0x4b3977(0x154)]){const _0x264da1=String(_0x4b8e0a['val'])[_0x4b3977(0x147)]();if(_0x264da1['includes'](_0x4b3977(0x96))||_0x264da1[_0x4b3977(0xf4)](_0x4b3977(0x77))||_0x264da1[_0x4b3977(0xf4)]('klar')||_0x264da1[_0x4b3977(0xf4)]('clear')||_0x264da1[_0x4b3977(0xf4)](_0x4b3977(0x8e)))return!![];}}catch(_0x45284a){}}}return![];}[a0_0x525b69(0x1af)](){const _0x5e6aeb=a0_0x525b69;if(!this['isProVersion'])return;try{this['getState'](_0x5e6aeb(0x184),(_0x4123da,_0x2792bd)=>{const _0x27cde2=_0x5e6aeb;_0x2792bd&&_0x2792bd[_0x27cde2(0x154)]&&pythonBridge[_0x27cde2(0x152)](this,_0x27cde2(0x12d),{'sequences':JSON[_0x27cde2(0x6a)](_0x2792bd[_0x27cde2(0x154)])});});}catch(_0x39a2f4){}}async[a0_0x525b69(0x166)](){const _0x3e1212=a0_0x525b69;if(!this[_0x3e1212(0xca)])return;try{const _0x1681a3=await recorder['getOutsideTemperatureNumeric'](this);if(_0x1681a3===null)return;const _0x20be02={},_0x39517a={},_0x2a075c=this[_0x3e1212(0x199)][_0x3e1212(0x136)]||[];for(const _0x1c5af6 of _0x2a075c){if(_0x1c5af6['type']==='temperature'&&_0x1c5af6[_0x3e1212(0xa7)]){const _0x563f0b=this['sensorLastValues'][_0x1c5af6['id']];if(_0x563f0b!==undefined)_0x20be02[_0x1c5af6[_0x3e1212(0xa7)]]=_0x563f0b;if(_0x1c5af6[_0x3e1212(0xa8)])_0x39517a[_0x1c5af6[_0x3e1212(0xa7)]]=!![];}}const _0x5d8fc9=await this[_0x3e1212(0x81)]();let _0x29249d={};try{const _0x836e85=await this[_0x3e1212(0x19f)](_0x3e1212(0x18d));if(_0x836e85&&_0x836e85[_0x3e1212(0x154)])_0x29249d=JSON[_0x3e1212(0x6a)](_0x836e85['val']);}catch(_0x449805){}Object[_0x3e1212(0x11d)](_0x20be02)[_0x3e1212(0x113)]>0x0&&(pythonBridge[_0x3e1212(0x152)](this,_0x3e1212(0xda),{'current_temps':_0x20be02,'t_out':_0x1681a3,'is_sunny':_0x5d8fc9,'solar_flags':_0x39517a,'warmup_targets':_0x29249d}),pythonBridge[_0x3e1212(0x152)](this,_0x3e1212(0x1a4),{'current_temps':_0x20be02,'t_out':_0x1681a3,'targets':{}}));}catch(_0x6d9b70){}}[a0_0x525b69(0x195)](){const _0x51750a=a0_0x525b69;if(!this['rawEventLog']||this[_0x51750a(0xd4)][_0x51750a(0x113)]===0x0)return;const _0x41f878=new Array(0x60)['fill'](0x0),_0x220472=new Date()[_0x51750a(0x14f)](0x0,0x0,0x0,0x0);this['rawEventLog']['forEach'](_0x3d6d6b=>{const _0x4bc10c=_0x51750a,_0x364e9a=new Date(_0x3d6d6b[_0x4bc10c(0xa2)]);if(_0x364e9a[_0x4bc10c(0x84)]()>=_0x220472){const _0x33a25d=_0x364e9a[_0x4bc10c(0x197)](),_0x4ed88a=_0x364e9a[_0x4bc10c(0x8d)](),_0x377f74=_0x33a25d*0x4+Math[_0x4bc10c(0xe5)](_0x4ed88a/0xf);if(_0x377f74>=0x0&&_0x377f74<0x60)_0x41f878[_0x377f74]++;}}),this[_0x51750a(0x7e)](_0x51750a(0x94),{'val':JSON[_0x51750a(0x6b)](_0x41f878),'ack':!![]});}['runPythonHealthCheck'](){const _0x3b519c=a0_0x525b69;if(!this[_0x3b519c(0x95)]||this[_0x3b519c(0x95)][_0x3b519c(0x113)]<0x2)return;const _0x4101de=this[_0x3b519c(0x95)][_0x3b519c(0x78)](_0x4aae78=>{const _0x3d96c6=_0x3b519c,_0x2d65b5=(_0x4aae78[_0x3d96c6(0xc3)]||'')[_0x3d96c6(0x147)]();return ACTIVITY_LEVEL_MAP[_0x2d65b5]||0x32;});pythonBridge[_0x3b519c(0x152)](this,'ANALYZE_TREND',{'values':_0x4101de,'tag':_0x3b519c(0x144)});}async[a0_0x525b69(0x141)](_0x8b7840){const _0xeffbef=a0_0x525b69;if(_0x8b7840==null||typeof _0x8b7840!==_0xeffbef(0xe6))return;const _0x21c25e=Date[_0xeffbef(0x174)]();this[_0xeffbef(0x10c)]['push']({'ts':_0x21c25e,'val':_0x8b7840}),this['pressureBuffer']=this[_0xeffbef(0x10c)][_0xeffbef(0xd1)](_0x2268ea=>_0x21c25e-_0x2268ea['ts']<0x1388);if(this[_0xeffbef(0xb3)])return;if(this[_0xeffbef(0x199)][_0xeffbef(0xcb)]){const _0x3da9a6=await this['getForeignStateAsync'](this['config'][_0xeffbef(0xcb)]);if(_0x3da9a6&&!_0x3da9a6[_0xeffbef(0x154)])return;}const _0x3c904f=this[_0xeffbef(0x199)][_0xeffbef(0x173)]||0.04;if(Math['abs'](_0x8b7840)>=_0x3c904f){this[_0xeffbef(0x19e)][_0xeffbef(0x137)](_0xeffbef(0x15b)+_0x8b7840+_0xeffbef(0x139)+_0x3c904f+')'),await this[_0xeffbef(0x7e)](_0xeffbef(0xd8),{'val':!![],'ack':!![]});const _0x5399fc=this[_0xeffbef(0x150)];_0x5399fc?(this['log'][_0xeffbef(0x16f)](_0xeffbef(0x8c)),this['triggerInfrasoundCorrelation'](_0x8b7840,_0xeffbef(0x1ab))):(this['triggerInfrasoundCorrelation'](_0x8b7840,_0xeffbef(0x183)),this[_0xeffbef(0x11c)](_0xeffbef(0x177)+_0x8b7840+_0xeffbef(0x1a0))),this['infrasoundLocked']=!![],setTimeout(()=>{const _0x4104f6=_0xeffbef;this[_0x4104f6(0xb3)]=![];},0x2710);}}async[a0_0x525b69(0x13b)](_0x48b699,_0x6e0340=a0_0x525b69(0x183)){const _0x5a6aad=a0_0x525b69,_0x94470e=Date[_0x5a6aad(0x174)](),_0x1bc604=this[_0x5a6aad(0x199)]['devices']||[];setTimeout(async()=>{const _0x302b0e=_0x5a6aad;let _0x5f24ce=null,_0x471318=_0x302b0e(0xb6);const _0x2f761e=[],_0x225768=_0x1bc604[_0x302b0e(0xd1)](_0x3703c7=>_0x3703c7[_0x302b0e(0x189)]&&(_0x3703c7[_0x302b0e(0x189)]['includes'](_0x302b0e(0x151))||_0x3703c7[_0x302b0e(0x189)][_0x302b0e(0xf4)](_0x302b0e(0x1a7))||_0x3703c7['type'][_0x302b0e(0xf4)](_0x302b0e(0x7f))||_0x3703c7[_0x302b0e(0x189)]['includes']('reed'))||_0x3703c7[_0x302b0e(0x10e)]&&(_0x3703c7[_0x302b0e(0x10e)][_0x302b0e(0xf4)](_0x302b0e(0x10a))||_0x3703c7['role'][_0x302b0e(0xf4)](_0x302b0e(0x19c))));for(const _0x4636c5 of _0x225768){try{const _0x406b6e=await this['getForeignStateAsync'](_0x4636c5['id']);if(_0x406b6e){if(_0x406b6e['ts']>=_0x94470e-0x7d0){_0x5f24ce=_0x4636c5[_0x302b0e(0x1bb)]||_0x4636c5['id'],_0x471318='ErklÃ¤rt\x20durch:\x20'+_0x5f24ce;break;}}}catch(_0x3234a0){}}const _0x48ac7d={'timestamp':_0x94470e,'pressure':_0x48b699,'isMatch':!!_0x5f24ce,'explanation':_0x471318,'type':_0x6e0340};await this[_0x302b0e(0x104)](_0x48ac7d),this[_0x302b0e(0x19e)][_0x302b0e(0x16f)](_0x302b0e(0x109)+(!!_0x5f24ce?_0x302b0e(0x73):_0x302b0e(0x8b)));},0x1388);}async[a0_0x525b69(0xf3)](_0x25fdf1){const _0x291327=a0_0x525b69,_0x42522c=Date[_0x291327(0x174)](),_0x1fe2b8=_0x25fdf1[_0x291327(0x1bb)]||_0x25fdf1['id']['split']('.')[_0x291327(0x1ae)]();let _0x30c78c=0x0;setTimeout(async()=>{const _0xbbcacb=_0x291327;this[_0xbbcacb(0x10c)]['forEach'](_0x25dca0=>{const _0x420d2c=_0xbbcacb;_0x25dca0['ts']>=_0x42522c-0xfa0&&_0x25dca0['ts']<=_0x42522c+0x3e8&&(Math[_0x420d2c(0x1aa)](_0x25dca0[_0x420d2c(0x154)])>Math[_0x420d2c(0x1aa)](_0x30c78c)&&(_0x30c78c=_0x25dca0['val']));});const _0x271c67=this['config'][_0xbbcacb(0x173)]||0.04,_0x9ac52c=Math[_0xbbcacb(0x1aa)](_0x30c78c)>=_0x271c67,_0x308bfe={'timestamp':_0x42522c,'pressure':_0x30c78c,'isMatch':_0x9ac52c,'explanation':_0xbbcacb(0x148)+_0x1fe2b8,'type':_0xbbcacb(0x1b6)};await this[_0xbbcacb(0x104)](_0x308bfe),this[_0xbbcacb(0x19e)][_0xbbcacb(0x18e)](_0xbbcacb(0xff)+_0x1fe2b8+_0xbbcacb(0x179)+_0x30c78c[_0xbbcacb(0x83)](0x4)+'\x20hPa\x20(Threshold:\x20'+_0x271c67+')');},0x1f4);}async[a0_0x525b69(0x104)](_0x3923ca){const _0x221835=a0_0x525b69;try{const _0x40e03e=await this['getStateAsync']('analysis.security.infrasoundLog');let _0x632e58=[];if(_0x40e03e&&_0x40e03e[_0x221835(0x154)])_0x632e58=JSON[_0x221835(0x6a)](_0x40e03e[_0x221835(0x154)]);_0x632e58[_0x221835(0x164)](_0x3923ca);if(_0x632e58[_0x221835(0x113)]>0x14)_0x632e58=_0x632e58[_0x221835(0x1a1)](0x0,0x14);await this[_0x221835(0x7e)](_0x221835(0x14d),{'val':JSON[_0x221835(0x6b)](_0x632e58),'ack':!![]});}catch(_0x286273){this[_0x221835(0x19e)]['error'](_0x221835(0x190)+_0x286273['message']);}}[a0_0x525b69(0x11c)](_0x5c06ec){const _0x14aa6c=a0_0x525b69;this[_0x14aa6c(0x199)][_0x14aa6c(0x15f)]&&this[_0x14aa6c(0x199)][_0x14aa6c(0x12a)]&&this['sendTo'](this['config'][_0x14aa6c(0x12a)],'send',{'message':_0x5c06ec,'title':_0x14aa6c(0x103),'priority':0x1}),this[_0x14aa6c(0x199)][_0x14aa6c(0x176)]&&this[_0x14aa6c(0x199)][_0x14aa6c(0xbd)]&&this[_0x14aa6c(0x175)](this[_0x14aa6c(0x199)][_0x14aa6c(0xbd)],'send',{'text':_0x5c06ec});}}if(require[a0_0x525b69(0xd2)]!==module)module[a0_0x525b69(0x11a)]=_0x6c0820=>new CogniLiving(_0x6c0820);else new CogniLiving();