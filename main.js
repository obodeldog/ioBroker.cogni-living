const a0_0x323635=a0_0x48f6;(function(_0x1a2049,_0x671b9b){const _0x4f4ce2=a0_0x48f6,_0x33e1a5=_0x1a2049();while(!![]){try{const _0x2bd872=-parseInt(_0x4f4ce2(0x16d))/0x1*(-parseInt(_0x4f4ce2(0x137))/0x2)+parseInt(_0x4f4ce2(0xeb))/0x3*(-parseInt(_0x4f4ce2(0x141))/0x4)+-parseInt(_0x4f4ce2(0x17a))/0x5+parseInt(_0x4f4ce2(0x128))/0x6+parseInt(_0x4f4ce2(0x179))/0x7*(parseInt(_0x4f4ce2(0xc7))/0x8)+parseInt(_0x4f4ce2(0x110))/0x9+-parseInt(_0x4f4ce2(0x164))/0xa*(-parseInt(_0x4f4ce2(0xed))/0xb);if(_0x2bd872===_0x671b9b)break;else _0x33e1a5['push'](_0x33e1a5['shift']());}catch(_0x126889){_0x33e1a5['push'](_0x33e1a5['shift']());}}}(a0_0x2862,0xe47d2));function a0_0x2862(){const _0x219352=['enum','location','140236bvDGus','(((.+)+)+)+$','LTM.triggerDailyDigest','analysis.energy.warmupTimes','getGenerativeModel','TRAIN_COMFORT','subscribeForeignStatesAsync','sendMorningBriefing','licenseKey','updateTopologyMatrix','triggerEnergyPrediction','cogni-living','analysis.automation.triggerAction','sendNotification','ack','some','inactivityThresholdHours','\x20->\x20','getForeignObjectsAsync','entries','getHours','SET_TOPOLOGY','getMinutes','./lib/ai_agent','runAutopilot','setupDriftAnalysisScheduler','isGracePeriodActive','setupBriefingScheduler','checkCalendarTriggers','updateTopology','\x20(Ack:\x20','abs','minutes_safe','analysisTimer','stringify','2789310wnONAD','setStateAsync','analysis.energy.pinnForecast','config','type','onMessage','analysis.topology.structure','slice','analysis.triggerBriefing','3ISbHyY','runGeminiAnalysis','split','analysis.automation.targetId','Kein\x20Kalender-Adapter','system.adapter.','SYSTEM_MODES','SET_LEARNING_MODE','.system.mode','LTM.trainingData.thermodynamics','pop','find','35pGgQbw','6720715vHJTAQ','ANALYZE_GAIT','dependencyInstallInProgress','geminiModel','Test','toLowerCase','Standard','./lib/scheduler','getTime','./lib/topology','systemConfig','length','briefingJob','executeAutomationAction','PREDICT_ENERGY','updateLocation','onReady','getLtmData','ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...','isArray','isSolar','genAI','val','includes','text','getForeignStateAsync','Warm-Up\x20Time\x20(Minutes\x20to\x20Target)','getStateAsync','\x20min\x20ausbleiben.','setObjectNotExistsAsync','callback','name','./lib/dead_man','analysis.automation.autoApply','Warm-Up\x20Target\x20Temps\x20(JSON)','heiter','Keine\x20Antwort\x20von\x20Gemini','./lib/recorder','parse','runPythonHealthCheck','analysis.training.triggerSecurity','log','forEach','calendarName','getState','weatherunderground.0','testNotification','ðŸ””\x20Dies\x20ist\x20ein\x20Test\x20von\x20Cogni-Living.','scanForDevices','analysis.security.learningStatus','geminiApiKey','command','useWeather','cancel','Daten\x20nicht\x20verfÃ¼gbar','add','lastTrackerEventTime','sendTo','json','enum.functions.*','apiKey','motion','isPresent','Instanz\x20nicht\x20gefunden','clear','getEnums','checkWifiPresence','loadSystemMode','search','startService','isProVersion','hm-rpc.0.000A1D898C1821.1.ACTUAL_TEMPERATURE','NORMAL','analysis.energy.warmupTargets','VACATION','triggerBriefing','sunny','matrix','subscribeStates','setupModeResetScheduler','analysisInterval','361448omFeXB','setPresence','bind','map','lastAlertState','sort','analysisHistory','guest','processSensorEvent','analysis.training.triggerEnergy','analysis.automation.targetValue','notifyTelegramInstance','keys','Gesendet','sensorLastValues','checkSolarCondition','Kein\x20Wetter-Adapter','string','trackerEnabled','push','minDaysForBaseline','createDailyDigest','./lib/installer','info','Guest\x20Mode','fill','ltmJob','triggerGaitAnalysis','analysis.health.todayVector','Activity-Level','\x20Tage)','analysis.automation.description','SYSTEM_DP_MODE','setState','onStateChange','LTM.trainingData.sequences','60FDaPOz','createAllObjects','22DgYeCf','scanThermostats','getOverviewData','rawEventLog','exports','devices','unload','sonn','daswetter.0','namespace','_calName','object','Kein\x20API\x20Key\x20Ã¼bergeben','stateChange','Sec-Training\x20started...','calendarInstance','getForeignObjectAsync','triggerDailyDigest','presenceDevices','manual','currentSystemMode','.data.table','send','simulateButler','updateHealthVector','Adapter','message','./lib/python_bridge','eventHistory','floor','analysis.training.triggerTopology','scores','Gemini\x20Init\x20Error:\x20','abortExitTimer','TRACK_EVENT','12275712DmpvAF','timestamp','analysis.trigger','analysis.energy.mpcActive','now','system.presenceWho','error','PYTHON_EXE','forecast.current.weather','updated','from','trackerHeartbeat','LTM.dailyDigests','generateContent','Aktiv\x20(','Notification\x20Test\x20Failed:\x20','models/gemini-flash-latest','online','values','common','modeResetJob','startSystem','apply','setHours','779130xVzkVg','response','Verbunden','analysis.automation.patternDetected','scanDevices','toString','getOutsideTemperatureNumeric','.communicate.request','enum.rooms.*','simulateEnergyMPC','analysis.energy.ventilationAlerts','testContext','checkLicense','dailyDigests','analysis.training.triggerHealth','469082BHsfxO','exitTimer','state','analysis.training.triggerComfort','Simulation\x20durch\x20Admin\x20(Test)','onUnload','driftAnalysisTimer','getCalendarNames'];a0_0x2862=function(){return _0x219352;};return a0_0x2862();}function a0_0x48f6(_0x26ff03,_0x633309){const _0x22374a=a0_0x2862();return a0_0x48f6=function(_0x1b9048,_0x1daf76){_0x1b9048=_0x1b9048-0xae;let _0x286260=_0x22374a[_0x1b9048];return _0x286260;},a0_0x48f6(_0x26ff03,_0x633309);}const a0_0x1daf76=(function(){let _0x4f7dbc=!![];return function(_0x4a4150,_0x382073){const _0x1433e0=_0x4f7dbc?function(){const _0x403e16=a0_0x48f6;if(_0x382073){const _0x178c08=_0x382073[_0x403e16(0x126)](_0x4a4150,arguments);return _0x382073=null,_0x178c08;}}:function(){};return _0x4f7dbc=![],_0x1433e0;};}()),a0_0x1b9048=a0_0x1daf76(this,function(){const _0x3a9e1a=a0_0x48f6;return a0_0x1b9048[_0x3a9e1a(0x12d)]()[_0x3a9e1a(0xba)](_0x3a9e1a(0x142))['toString']()['constructor'](a0_0x1b9048)[_0x3a9e1a(0xba)](_0x3a9e1a(0x142));});a0_0x1b9048();'use strict';const utils=require('@iobroker/adapter-core'),{GoogleGenerativeAI}=require('@google/generative-ai'),installer=require(a0_0x323635(0xdd)),scanner=require('./lib/scanner'),schedulers=require(a0_0x323635(0x181)),topology=require(a0_0x323635(0x183)),setup=require('./lib/setup'),recorder=require(a0_0x323635(0x19f)),pythonBridge=require(a0_0x323635(0x108)),aiAgent=require(a0_0x323635(0x158)),deadMan=require(a0_0x323635(0x19a)),automation=require('./lib/automation'),GEMINI_MODEL=a0_0x323635(0x120),ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};class CogniLiving extends utils[a0_0x323635(0x106)]{constructor(_0x13777b){const _0x5472f2=a0_0x323635;super({..._0x13777b,'name':_0x5472f2(0x14c)}),this['eventHistory']=[],this[_0x5472f2(0xcd)]=[],this[_0x5472f2(0xf0)]=[],this[_0x5472f2(0x135)]=[],this[_0x5472f2(0xd5)]={},this[_0x5472f2(0x184)]={'latitude':0x0,'longitude':0x0,'city':''},this['isPresent']=!![],this[_0x5472f2(0x138)]=null,this['exitGraceTimer']=null,this[_0x5472f2(0x15b)]=![],this[_0x5472f2(0x18f)]=null,this[_0x5472f2(0x17d)]=null,this['currentSystemMode']=setup['SYSTEM_MODES'][_0x5472f2(0xbe)],this[_0x5472f2(0xbc)]=![],this[_0x5472f2(0xcb)]=![],this[_0x5472f2(0x162)]=null,this['ltmJob']=null,this[_0x5472f2(0x124)]=null,this['driftAnalysisTimer']=null,this[_0x5472f2(0x186)]=null,this[_0x5472f2(0x17c)]=![],this[_0x5472f2(0x11b)]=null,this['lastTrackerEventTime']=Date['now'](),this['on']('ready',this['onReady'][_0x5472f2(0xc9)](this)),this['on'](_0x5472f2(0xfa),this[_0x5472f2(0xe9)]['bind'](this)),this['on'](_0x5472f2(0xf3),this[_0x5472f2(0x13c)]['bind'](this)),this['on'](_0x5472f2(0x107),this[_0x5472f2(0x169)][_0x5472f2(0xc9)](this));}async[a0_0x323635(0x18a)](){const _0x5251ff=a0_0x323635;this[_0x5251ff(0x1a3)][_0x5251ff(0xde)]('cogni-living\x20adapter\x20starting\x20(v'+this['version']+')\x20-\x20Phase\x20D\x20(Evolution)');if(!installer['checkAndInstall'](this,()=>this['startSystem']()))return;}async[a0_0x323635(0x125)](){const _0x40a2a0=a0_0x323635;await setup['initZombies'](this);try{this['isProVersion']=await setup[_0x40a2a0(0x134)](this[_0x40a2a0(0x167)][_0x40a2a0(0x149)]);}catch(_0x1105a5){}if(!this[_0x40a2a0(0x167)][_0x40a2a0(0x151)]||this[_0x40a2a0(0x167)][_0x40a2a0(0x151)]<0.1)this[_0x40a2a0(0x167)][_0x40a2a0(0x151)]=0xc;await setup['initHistory'](this),await setup['initSystemConfig'](this);if(this[_0x40a2a0(0x167)][_0x40a2a0(0x1ac)])try{this[_0x40a2a0(0x18f)]=new GoogleGenerativeAI(this[_0x40a2a0(0x167)][_0x40a2a0(0x1ac)]),this[_0x40a2a0(0x17d)]=this[_0x40a2a0(0x18f)][_0x40a2a0(0x145)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':'application/json'}}),this[_0x40a2a0(0x1a3)][_0x40a2a0(0xde)]('Gemini\x20AI\x20initialized.');}catch(_0x5a3c83){this['log'][_0x40a2a0(0x116)](_0x40a2a0(0x10d)+_0x5a3c83[_0x40a2a0(0x107)]);}await setup[_0x40a2a0(0xec)](this),await this[_0x40a2a0(0xb9)](),await this['setObjectNotExistsAsync'](_0x40a2a0(0x166),{'type':_0x40a2a0(0x139),'common':{'name':'PINN\x20AI\x20Forecast','type':'string','role':_0x40a2a0(0xb0),'read':!![],'write':![]},'native':{}}),await this[_0x40a2a0(0x197)](_0x40a2a0(0x132),{'type':_0x40a2a0(0x139),'common':{'name':'Active\x20Ventilation\x20Alerts','type':_0x40a2a0(0xd8),'role':'json','read':!![],'write':![]},'native':{}}),await this[_0x40a2a0(0x197)](_0x40a2a0(0x144),{'type':_0x40a2a0(0x139),'common':{'name':_0x40a2a0(0x194),'type':_0x40a2a0(0xd8),'role':'json','read':!![],'write':![]},'native':{}}),await this[_0x40a2a0(0x197)](_0x40a2a0(0xbf),{'type':_0x40a2a0(0x139),'common':{'name':_0x40a2a0(0x19c),'type':_0x40a2a0(0xd8),'role':_0x40a2a0(0xb0),'read':!![],'write':!![],'def':'{\x22default\x22:\x2021}'},'native':{}});try{const _0x22d33e=await this[_0x40a2a0(0x195)]('LTM.rawEventLog');if(_0x22d33e&&_0x22d33e[_0x40a2a0(0x190)])this[_0x40a2a0(0xf0)]=JSON['parse'](_0x22d33e[_0x40a2a0(0x190)]);}catch(_0x41a962){this['rawEventLog']=[];}try{const _0x3d8a5a=await this[_0x40a2a0(0x195)](_0x40a2a0(0x11c));if(_0x3d8a5a&&_0x3d8a5a[_0x40a2a0(0x190)])this['dailyDigests']=JSON[_0x40a2a0(0x1a0)](_0x3d8a5a[_0x40a2a0(0x190)]);}catch(_0xa6b251){this[_0x40a2a0(0x135)]=[];}const _0x59e0d5=this[_0x40a2a0(0x135)]['length']>=(this['config']['minDaysForBaseline']||0x7)?_0x40a2a0(0x11e)+this[_0x40a2a0(0x135)][_0x40a2a0(0x185)]+_0x40a2a0(0xe5):'Lernphase\x20('+this[_0x40a2a0(0x135)][_0x40a2a0(0x185)]+'/'+(this[_0x40a2a0(0x167)][_0x40a2a0(0xdb)]||0x7)+')';await this[_0x40a2a0(0x165)]('LTM.baselineStatus',{'val':_0x59e0d5,'ack':!![]}),this['subscribeStates'](_0x40a2a0(0x112)),this[_0x40a2a0(0xc4)](_0x40a2a0(0x143)),this['subscribeStates']('system.mode'),this['subscribeStates'](_0x40a2a0(0x16c)),this['subscribeStates'](_0x40a2a0(0x14d)),this[_0x40a2a0(0xc4)](_0x40a2a0(0x19b)),this['subscribeStates']('analysis.training.triggerSecurity'),this[_0x40a2a0(0xc4)](_0x40a2a0(0x136)),this['subscribeStates'](_0x40a2a0(0xd0)),this['subscribeStates'](_0x40a2a0(0x13a)),this[_0x40a2a0(0xc4)](_0x40a2a0(0x10b)),this[_0x40a2a0(0xc4)](_0x40a2a0(0x113));const _0x2b9ce7=this['config'][_0x40a2a0(0xf2)];if(_0x2b9ce7)for(const _0x5f5c93 of _0x2b9ce7){await this[_0x40a2a0(0x147)](_0x5f5c93['id']);}const _0x3f4233=this[_0x40a2a0(0x167)][_0x40a2a0(0xff)];if(_0x3f4233)for(const _0x4d0f45 of _0x3f4233){await this['subscribeForeignStatesAsync'](_0x4d0f45);}if(this['config']['notifyTelegramEnabled']&&this['config'][_0x40a2a0(0xd2)])await this['subscribeForeignStatesAsync'](this[_0x40a2a0(0x167)][_0x40a2a0(0xd2)]+_0x40a2a0(0x12f));setTimeout(()=>this[_0x40a2a0(0xb8)](),0x1388);if(this[_0x40a2a0(0x162)])clearInterval(this[_0x40a2a0(0x162)]);const _0xed61b8=this['config'][_0x40a2a0(0xc6)]||0xf;_0xed61b8>0x0&&(this[_0x40a2a0(0x162)]=setInterval(()=>{const _0x37e630=_0x40a2a0;this[_0x37e630(0x159)](),automation[_0x37e630(0x15d)](this);},_0xed61b8*0x3c*0x3e8)),setTimeout(()=>automation[_0x40a2a0(0x15d)](this),0x2710),this[_0x40a2a0(0x167)][_0x40a2a0(0xd9)]!==![]&&(this[_0x40a2a0(0x11b)]=setInterval(()=>{const _0x4f6bed=_0x40a2a0;if(this[_0x4f6bed(0xbc)]){const _0x11bb36=Date['now'](),_0x22d209=this[_0x4f6bed(0xae)]||_0x11bb36,_0x11f643=(_0x11bb36-_0x22d209)/0x3e8;_0x11f643>0x2&&(this[_0x4f6bed(0xae)]=_0x11bb36,pythonBridge[_0x4f6bed(0x103)](this,_0x4f6bed(0x10f),{'room':null,'dt':_0x11f643}));}},0xbb8)),schedulers['setupLtmScheduler'](this,()=>aiAgent[_0x40a2a0(0xdc)](this,pythonBridge)),schedulers[_0x40a2a0(0xc5)](this),schedulers[_0x40a2a0(0x15a)](this,()=>aiAgent['runBaselineDriftAnalysis'](this)),schedulers[_0x40a2a0(0x15c)](this,()=>aiAgent['sendMorningBriefing'](this)),pythonBridge[_0x40a2a0(0xbb)](this,installer[_0x40a2a0(0x117)]),setTimeout(async()=>{const _0x28e507=_0x40a2a0;await topology['updateTopology'](this);try{const _0x3fa014=await this[_0x28e507(0x195)](_0x28e507(0x16a));if(_0x3fa014&&_0x3fa014['val'])pythonBridge['send'](this,_0x28e507(0x156),JSON['parse'](_0x3fa014[_0x28e507(0x190)]));}catch(_0x4e6130){}this[_0x28e507(0x1a1)](),this['triggerGaitAnalysis'](),this['triggerEnergyPrediction'](),this['updateHealthVector']();},0x1388);}[a0_0x323635(0x13c)](_0x3856e4){const _0x5ec6dd=a0_0x323635;if(this[_0x5ec6dd(0x162)])clearInterval(this[_0x5ec6dd(0x162)]);if(this[_0x5ec6dd(0x13d)])clearInterval(this[_0x5ec6dd(0x13d)]);if(this[_0x5ec6dd(0x11b)])clearInterval(this[_0x5ec6dd(0x11b)]);if(this[_0x5ec6dd(0xe1)])this['ltmJob']['cancel']();if(this[_0x5ec6dd(0x124)])this['modeResetJob'][_0x5ec6dd(0x1af)]();if(this[_0x5ec6dd(0x186)])this[_0x5ec6dd(0x186)]['cancel']();recorder['abortExitTimer'](this),pythonBridge['stopService'](this),_0x3856e4();}async[a0_0x323635(0xe9)](_0x137325,_0x1d96e2){const _0x4522ce=a0_0x323635;if(_0x137325[_0x4522ce(0x191)](_0x4522ce(0xbd)))this[_0x4522ce(0x1a3)][_0x4522ce(0xde)]('DEBUG\x20CHECK:\x20'+_0x137325+_0x4522ce(0x152)+_0x1d96e2[_0x4522ce(0x190)]+_0x4522ce(0x15f)+_0x1d96e2['ack']+')');if(!_0x1d96e2||this[_0x4522ce(0x17c)])return;if(_0x137325[_0x4522ce(0x191)]('telegram')&&_0x137325['endsWith']('communicate.request')&&_0x1d96e2[_0x4522ce(0x190)])return;if(_0x137325===this[_0x4522ce(0xf6)]+_0x4522ce(0x175)){if(_0x1d96e2['val']&&Object[_0x4522ce(0x122)](setup[_0x4522ce(0x173)])[_0x4522ce(0x191)](_0x1d96e2[_0x4522ce(0x190)])){this[_0x4522ce(0x101)]=_0x1d96e2[_0x4522ce(0x190)];if(_0x1d96e2[_0x4522ce(0x190)]===setup[_0x4522ce(0x173)][_0x4522ce(0xc0)])await recorder['setPresence'](this,![]);else await recorder[_0x4522ce(0xc8)](this,!![]);if(this[_0x4522ce(0xbc)]){let _0x44f6f7=![],_0x53da64=0x0,_0x40d131=_0x4522ce(0x100);if(this[_0x4522ce(0x101)]==='party')_0x44f6f7=!![],_0x53da64=0x168,_0x40d131='Party\x20Mode';else this[_0x4522ce(0x101)]===_0x4522ce(0xce)&&(_0x44f6f7=!![],_0x53da64=0x5a0,_0x40d131=_0x4522ce(0xdf));pythonBridge[_0x4522ce(0x103)](this,_0x4522ce(0x174),{'active':_0x44f6f7,'duration':_0x53da64,'label':_0x40d131}),await this['setStateAsync'](_0x4522ce(0x1ab),{'val':JSON[_0x4522ce(0x163)]({'active':_0x44f6f7,'label':_0x40d131,'timestamp':Date[_0x4522ce(0x114)]()}),'ack':!![]});}}if(!_0x1d96e2[_0x4522ce(0x14f)])this['setState'](_0x137325,{'val':this[_0x4522ce(0x101)],'ack':!![]});return;}if(!_0x1d96e2[_0x4522ce(0x14f)]){_0x137325[_0x4522ce(0x191)](_0x4522ce(0x112))&&_0x1d96e2[_0x4522ce(0x190)]&&(this[_0x4522ce(0xe8)](_0x137325,{'val':![],'ack':!![]}),aiAgent[_0x4522ce(0x16e)](this));if(_0x137325['includes'](_0x4522ce(0xfe))&&_0x1d96e2[_0x4522ce(0x190)]){this['setState'](_0x137325,{'val':![],'ack':!![]});if(this[_0x4522ce(0xbc)])aiAgent[_0x4522ce(0xdc)](this,pythonBridge);}_0x137325[_0x4522ce(0x191)](_0x4522ce(0xc1))&&_0x1d96e2[_0x4522ce(0x190)]&&(this[_0x4522ce(0xe8)](_0x137325,{'val':![],'ack':!![]}),aiAgent[_0x4522ce(0x148)](this));_0x137325[_0x4522ce(0x191)]('automation.triggerAction')&&_0x1d96e2[_0x4522ce(0x190)]&&(this[_0x4522ce(0xe8)](_0x137325,{'val':![],'ack':!![]}),aiAgent[_0x4522ce(0x187)](this));if(_0x137325['includes'](_0x4522ce(0x1a2))&&_0x1d96e2[_0x4522ce(0x190)]){this[_0x4522ce(0xe8)](_0x137325,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x3b4694=await this[_0x4522ce(0x195)](_0x4522ce(0xea));if(_0x3b4694&&_0x3b4694['val']){const _0x1d669c=JSON[_0x4522ce(0x1a0)](_0x3b4694[_0x4522ce(0x190)]);this[_0x4522ce(0x165)]('analysis.training.status',{'val':_0x4522ce(0xfb),'ack':!![]}),pythonBridge['send'](this,'TRAIN_SECURITY',{'sequences':_0x1d669c});}}catch(_0x42fb6b){}}if(_0x137325[_0x4522ce(0x191)]('analysis.training.triggerHealth')&&_0x1d96e2['val']){this[_0x4522ce(0xe8)](_0x137325,{'val':![],'ack':!![]});if(this[_0x4522ce(0xbc)])try{const _0x37287b=await this[_0x4522ce(0x195)](_0x4522ce(0x11c));if(_0x37287b&&_0x37287b[_0x4522ce(0x190)])pythonBridge[_0x4522ce(0x103)](this,'TRAIN_HEALTH',{'digests':JSON[_0x4522ce(0x1a0)](_0x37287b[_0x4522ce(0x190)])});}catch(_0x1db6c1){}}if(_0x137325['includes'](_0x4522ce(0xd0))&&_0x1d96e2[_0x4522ce(0x190)]){this[_0x4522ce(0xe8)](_0x137325,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0xd6332c=await this['getStateAsync'](_0x4522ce(0x176));if(_0xd6332c&&_0xd6332c[_0x4522ce(0x190)])pythonBridge[_0x4522ce(0x103)](this,'TRAIN_ENERGY',{'points':JSON[_0x4522ce(0x1a0)](_0xd6332c[_0x4522ce(0x190)])});}catch(_0x1b8397){}}if(_0x137325[_0x4522ce(0x191)](_0x4522ce(0x13a))&&_0x1d96e2[_0x4522ce(0x190)]){this[_0x4522ce(0xe8)](_0x137325,{'val':![],'ack':!![]});if(this[_0x4522ce(0xbc)])try{const _0x6ecfb9=await this[_0x4522ce(0x195)]('LTM.rawEventLog');if(_0x6ecfb9&&_0x6ecfb9[_0x4522ce(0x190)])pythonBridge['send'](this,_0x4522ce(0x146),{'events':JSON[_0x4522ce(0x1a0)](_0x6ecfb9[_0x4522ce(0x190)])});}catch(_0x5d8b40){}}_0x137325[_0x4522ce(0x191)](_0x4522ce(0x10b))&&_0x1d96e2[_0x4522ce(0x190)]&&(this[_0x4522ce(0xe8)](_0x137325,{'val':![],'ack':!![]}),topology[_0x4522ce(0x15e)](this));return;}if(this[_0x4522ce(0x167)][_0x4522ce(0xff)]&&this[_0x4522ce(0x167)]['presenceDevices'][_0x4522ce(0x191)](_0x137325)){await this[_0x4522ce(0xb8)]();return;}const _0x577e32=(this[_0x4522ce(0x167)][_0x4522ce(0xf2)]||[])[_0x4522ce(0x178)](_0x17c303=>_0x17c303['id']===_0x137325);if(_0x577e32){const _0x3f4604=await recorder[_0x4522ce(0xcf)](this,_0x137325,_0x1d96e2,_0x577e32);_0x3f4604&&_0x3f4604[_0x4522ce(0x168)]===_0x4522ce(0xb3)&&_0x3f4604['location']&&this[_0x4522ce(0xbc)]&&deadMan[_0x4522ce(0x189)](this,_0x3f4604['location']);}}async[a0_0x323635(0x169)](_0x23af79){const _0x33c6cb=a0_0x323635;if(typeof _0x23af79===_0x33c6cb(0xf8)&&_0x23af79[_0x33c6cb(0x107)]){if(_0x23af79[_0x33c6cb(0x1ad)]==='checkThermostats')try{const _0x55d65b=await automation[_0x33c6cb(0xee)](this);this['sendTo'](_0x23af79['from'],_0x23af79[_0x33c6cb(0x1ad)],{'success':!![],'results':_0x55d65b},_0x23af79[_0x33c6cb(0x198)]);}catch(_0x103555){this['sendTo'](_0x23af79[_0x33c6cb(0x11a)],_0x23af79[_0x33c6cb(0x1ad)],{'success':![],'error':_0x103555[_0x33c6cb(0x107)]},_0x23af79['callback']);}else{if(_0x23af79[_0x33c6cb(0x1ad)]===_0x33c6cb(0x131))try{const {current_temps:_0x50c9fe,t_out:_0x2f5b1e,targets:_0x1942b6,t_forecast:_0xfb6b2a}=_0x23af79[_0x33c6cb(0x107)],_0x5a7cb6=[];let _0x2a075b={};try{const _0x5be098=await this[_0x33c6cb(0x195)]('analysis.energy.insulationScore');if(_0x5be098&&_0x5be098[_0x33c6cb(0x190)]){const _0x3cf60f=JSON['parse'](_0x5be098[_0x33c6cb(0x190)]);_0x2a075b=_0x3cf60f[_0x33c6cb(0x10c)]||_0x3cf60f;}}catch(_0x106d34){}const _0x17f677=_0xfb6b2a!==undefined&&_0xfb6b2a!==null?(_0x2f5b1e+_0xfb6b2a)/0x2:_0x2f5b1e;for(const [_0x1e73d9,_0x404b63]of Object[_0x33c6cb(0x154)](_0x50c9fe)){const _0x4bb2a6=_0x1942b6[_0x1e73d9]||0x15;if(_0x404b63<=_0x4bb2a6)continue;let _0x5c0e01=_0x2a075b[_0x1e73d9]||-0.5;if(_0x5c0e01>=0x0)_0x5c0e01=-0.5;const _0x5cd95f=Math[_0x33c6cb(0x160)](_0x5c0e01),_0x16b497=_0x404b63-_0x4bb2a6;let _0x42e8a8=Math[_0x33c6cb(0x10a)](_0x16b497/_0x5cd95f*0x3c);const _0x179d01=_0x404b63-_0x2f5b1e,_0x4b0f15=_0x404b63-_0x17f677;if(_0x4b0f15!==0x0&&_0x179d01!==0x0){const _0x38488a=_0x179d01/_0x4b0f15;_0x42e8a8=Math['floor'](_0x42e8a8*_0x38488a);}if(_0x42e8a8>0xf){if(_0x42e8a8>0xf0)_0x42e8a8=0xf0;_0x5a7cb6[_0x33c6cb(0xda)]({'room':_0x1e73d9,'minutes_safe':_0x42e8a8,'target':_0x4bb2a6,'current':_0x404b63,'savings_msg':'Heizung\x20kann\x20'+_0x42e8a8+_0x33c6cb(0x196)});}}_0x5a7cb6['sort']((_0x361713,_0x5f4c1c)=>_0x5f4c1c[_0x33c6cb(0x161)]-_0x361713[_0x33c6cb(0x161)]),this['sendTo'](_0x23af79[_0x33c6cb(0x11a)],_0x23af79[_0x33c6cb(0x1ad)],{'success':!![],'proposals':_0x5a7cb6},_0x23af79[_0x33c6cb(0x198)]);}catch(_0x40949f){this[_0x33c6cb(0xaf)](_0x23af79['from'],_0x23af79[_0x33c6cb(0x1ad)],{'success':![],'error':_0x40949f[_0x33c6cb(0x107)]},_0x23af79['callback']);}else{if(_0x23af79[_0x33c6cb(0x1ad)]==='dismissAutomation')await this[_0x33c6cb(0x165)]('analysis.automation.patternDetected',{'val':![],'ack':!![]}),await this[_0x33c6cb(0x165)]('analysis.automation.description',{'val':'','ack':!![]}),await this[_0x33c6cb(0x165)]('analysis.automation.targetId',{'val':'','ack':!![]}),this['sendTo'](_0x23af79[_0x33c6cb(0x11a)],_0x23af79['command'],{'success':!![]},_0x23af79[_0x33c6cb(0x198)]);else{if(_0x23af79['command']===_0x33c6cb(0x104)){const {targetId:_0x19eb93,targetValue:_0x1b7085}=_0x23af79[_0x33c6cb(0x107)];await this[_0x33c6cb(0x165)](_0x33c6cb(0x12b),{'val':!![],'ack':!![]}),await this['setStateAsync'](_0x33c6cb(0xe6),{'val':_0x33c6cb(0x13b),'ack':!![]}),await this[_0x33c6cb(0x165)](_0x33c6cb(0x170),{'val':_0x19eb93,'ack':!![]}),await this['setStateAsync']('analysis.automation.targetValue',{'val':String(_0x1b7085),'ack':!![]}),this[_0x33c6cb(0xaf)](_0x23af79[_0x33c6cb(0x11a)],_0x23af79[_0x33c6cb(0x1ad)],{'success':!![]},_0x23af79[_0x33c6cb(0x198)]);}else{if(_0x23af79[_0x33c6cb(0x1ad)]==='testApiKey')try{const _0x45a36b=_0x23af79[_0x33c6cb(0x107)][_0x33c6cb(0xb2)];if(!_0x45a36b)throw new Error(_0x33c6cb(0xf9));const _0x2b91d0=new GoogleGenerativeAI(_0x45a36b),_0x30fb41=_0x2b91d0[_0x33c6cb(0x145)]({'model':GEMINI_MODEL}),_0x3b2e93=await _0x30fb41[_0x33c6cb(0x11d)](_0x33c6cb(0x17e)),_0x82d226=await _0x3b2e93[_0x33c6cb(0x129)];if(_0x82d226[_0x33c6cb(0x192)]())this[_0x33c6cb(0xaf)](_0x23af79[_0x33c6cb(0x11a)],_0x23af79[_0x33c6cb(0x1ad)],{'success':!![],'message':'Verbindung\x20erfolgreich!'},_0x23af79[_0x33c6cb(0x198)]);else throw new Error(_0x33c6cb(0x19e));}catch(_0xbb547c){this['sendTo'](_0x23af79[_0x33c6cb(0x11a)],_0x23af79[_0x33c6cb(0x1ad)],{'success':![],'message':_0xbb547c[_0x33c6cb(0x107)]},_0x23af79['callback']);}else{if(_0x23af79[_0x33c6cb(0x1ad)]===_0x33c6cb(0x12c))try{const _0x131ea5=await scanner[_0x33c6cb(0x1aa)](this,_0x23af79[_0x33c6cb(0x107)]||{});this[_0x33c6cb(0xaf)](_0x23af79[_0x33c6cb(0x11a)],_0x23af79[_0x33c6cb(0x1ad)],{'success':!![],'devices':_0x131ea5},_0x23af79[_0x33c6cb(0x198)]);}catch(_0x3ebd89){this['sendTo'](_0x23af79[_0x33c6cb(0x11a)],_0x23af79[_0x33c6cb(0x1ad)],{'success':![],'error':_0x3ebd89[_0x33c6cb(0x107)]},_0x23af79[_0x33c6cb(0x198)]);}else{if(_0x23af79[_0x33c6cb(0x1ad)]===_0x33c6cb(0x14a))try{const {matrix:_0xc95724}=_0x23af79[_0x33c6cb(0x107)],_0x3b2930=await this[_0x33c6cb(0x195)](_0x33c6cb(0x16a));if(_0x3b2930&&_0x3b2930[_0x33c6cb(0x190)]){const _0x3564c9=JSON[_0x33c6cb(0x1a0)](_0x3b2930[_0x33c6cb(0x190)]);_0x3564c9[_0x33c6cb(0xc3)]=_0xc95724,_0x3564c9[_0x33c6cb(0x119)]=Date['now'](),await this[_0x33c6cb(0x165)](_0x33c6cb(0x16a),{'val':JSON[_0x33c6cb(0x163)](_0x3564c9),'ack':!![]}),pythonBridge[_0x33c6cb(0x103)](this,_0x33c6cb(0x156),_0x3564c9);}this[_0x33c6cb(0xaf)](_0x23af79[_0x33c6cb(0x11a)],_0x23af79[_0x33c6cb(0x1ad)],{'success':!![]},_0x23af79[_0x33c6cb(0x198)]);}catch(_0x265ffc){this[_0x33c6cb(0x1a3)][_0x33c6cb(0x116)](_0x265ffc);}else{if(_0x23af79['command']===_0x33c6cb(0x18b))this['sendTo'](_0x23af79[_0x33c6cb(0x11a)],_0x23af79[_0x33c6cb(0x1ad)],{'success':!![],'dailyDigests':this[_0x33c6cb(0x135)]||[],'analysisHistory':this['analysisHistory']||[]},_0x23af79['callback']);else{if(_0x23af79[_0x33c6cb(0x1ad)]===_0x33c6cb(0xef)){const _0x3258ba=this['dailyDigests'][_0x33c6cb(0x185)],_0xc42d7e=new Array(0x18)[_0x33c6cb(0xe0)](0x0),_0x564eaa=new Date()[_0x33c6cb(0x127)](0x0,0x0,0x0,0x0);this[_0x33c6cb(0x109)]&&this[_0x33c6cb(0x109)][_0x33c6cb(0x1a4)](_0x356bf3=>{const _0x2ef668=_0x33c6cb;if(_0x356bf3[_0x2ef668(0x111)]>=_0x564eaa){const _0x2db206=new Date(_0x356bf3[_0x2ef668(0x111)])[_0x2ef668(0x155)]();if(_0x2db206>=0x0&&_0x2db206<0x18)_0xc42d7e[_0x2db206]++;}});let _0x1ccbea=![],_0x4493b2='',_0x276704='',_0xaa5715='';try{const _0x3d9d87=await this[_0x33c6cb(0x195)](_0x33c6cb(0x12b));if(_0x3d9d87&&_0x3d9d87['val']){_0x1ccbea=!![];const _0x14992b=await this[_0x33c6cb(0x195)](_0x33c6cb(0xe6));_0x4493b2=_0x14992b?_0x14992b[_0x33c6cb(0x190)]:'';const _0x516f59=await this['getStateAsync']('analysis.automation.targetId');_0x276704=_0x516f59?_0x516f59[_0x33c6cb(0x190)]:'';const _0x1e7066=await this[_0x33c6cb(0x195)](_0x33c6cb(0xd1));_0xaa5715=_0x1e7066?_0x1e7066[_0x33c6cb(0x190)]:'';}}catch(_0x4e0a8f){}const _0x46d825=await this[_0x33c6cb(0xd6)](),_0x5d931d=(this[_0x33c6cb(0x167)][_0x33c6cb(0xf2)]||[])[_0x33c6cb(0x150)](_0x3fda90=>_0x3fda90[_0x33c6cb(0x18e)]),_0x23c083=_0x46d825&&_0x5d931d;this[_0x33c6cb(0xaf)](_0x23af79[_0x33c6cb(0x11a)],_0x23af79['command'],{'success':!![],'eventHistory':this[_0x33c6cb(0x109)][_0x33c6cb(0x16b)](0x0,0xf),'stats':{'digestCount':_0x3258ba,'isPresent':this[_0x33c6cb(0xb4)],'hourlyActivity':_0xc42d7e,'solarActive':_0x23c083},'automation':{'detected':_0x1ccbea,'description':_0x4493b2,'targetId':_0x276704,'targetValue':_0xaa5715}},_0x23af79['callback']);}else{if(_0x23af79[_0x33c6cb(0x1ad)]===_0x33c6cb(0xb7)){const _0x222826=await this[_0x33c6cb(0x153)](_0x33c6cb(0xb1),_0x33c6cb(0x13f)),_0x4227d5=[];if(_0x222826)for(const _0x3cdeb1 in _0x222826){const _0x35f962=_0x222826[_0x3cdeb1],_0x40225d=(_0x35f962[_0x33c6cb(0x123)]&&typeof _0x35f962[_0x33c6cb(0x123)]['name']===_0x33c6cb(0xf8)?_0x35f962['common']['name']['de']:_0x35f962[_0x33c6cb(0x123)][_0x33c6cb(0x199)])||_0x35f962['common']['name'];_0x4227d5[_0x33c6cb(0xda)]({'id':_0x3cdeb1,'name':_0x40225d});}const _0x57e522=await this['getForeignObjectsAsync'](_0x33c6cb(0x130),_0x33c6cb(0x13f)),_0x2cb121=[];if(_0x57e522)for(const _0x3e89f7 in _0x57e522){const _0x319645=_0x57e522[_0x3e89f7],_0x573442=(_0x319645[_0x33c6cb(0x123)]&&typeof _0x319645[_0x33c6cb(0x123)][_0x33c6cb(0x199)]===_0x33c6cb(0xf8)?_0x319645['common'][_0x33c6cb(0x199)]['de']:_0x319645[_0x33c6cb(0x123)]['name'])||_0x3e89f7[_0x33c6cb(0x16f)]('.')[_0x33c6cb(0x177)]();_0x2cb121[_0x33c6cb(0xda)](_0x573442);}this['sendTo'](_0x23af79['from'],_0x23af79[_0x33c6cb(0x1ad)],{'success':!![],'enums':_0x4227d5,'rooms':_0x2cb121},_0x23af79[_0x33c6cb(0x198)]);}else{if(_0x23af79['command']===_0x33c6cb(0x133))try{let _0x1b87d4=_0x33c6cb(0xd7),_0x573cc3=_0x33c6cb(0x171);if(this[_0x33c6cb(0x167)][_0x33c6cb(0x1ae)]){const _0x16217c=await recorder[_0x33c6cb(0x12e)](this);_0x1b87d4=_0x16217c!==null?_0x16217c+'Â°C':_0x33c6cb(0x1b0);}if(this[_0x33c6cb(0x167)]['calendarInstance']){const _0x223b8e=await this[_0x33c6cb(0xfd)](_0x33c6cb(0x172)+this[_0x33c6cb(0x167)][_0x33c6cb(0xfc)]);_0x573cc3=_0x223b8e?_0x33c6cb(0x12a):_0x33c6cb(0xb5);}this['sendTo'](_0x23af79[_0x33c6cb(0x11a)],_0x23af79[_0x33c6cb(0x1ad)],{'success':!![],'weather':_0x1b87d4,'calendar':_0x573cc3},_0x23af79[_0x33c6cb(0x198)]);}catch(_0x5b8173){this[_0x33c6cb(0xaf)](_0x23af79[_0x33c6cb(0x11a)],_0x23af79[_0x33c6cb(0x1ad)],{'success':![],'error':_0x5b8173[_0x33c6cb(0x107)]},_0x23af79[_0x33c6cb(0x198)]);}else{if(_0x23af79[_0x33c6cb(0x1ad)]===_0x33c6cb(0x13e))try{const _0x1185f3=_0x23af79[_0x33c6cb(0x107)]['instance'],_0x2b3935=await this[_0x33c6cb(0x193)](_0x1185f3+_0x33c6cb(0x102));let _0x4b6d9c=[];if(_0x2b3935&&_0x2b3935[_0x33c6cb(0x190)]){const _0xb2166=JSON[_0x33c6cb(0x1a0)](_0x2b3935['val']),_0xaf3f1e=new Set();Array[_0x33c6cb(0x18d)](_0xb2166)&&_0xb2166['forEach'](_0x394e88=>{const _0x2a2952=_0x33c6cb;if(_0x394e88[_0x2a2952(0xf7)])_0xaf3f1e[_0x2a2952(0x1b1)](_0x394e88[_0x2a2952(0xf7)]);else{if(_0x394e88['calendarName'])_0xaf3f1e[_0x2a2952(0x1b1)](_0x394e88[_0x2a2952(0x1a5)]);}}),_0x4b6d9c=Array[_0x33c6cb(0x11a)](_0xaf3f1e)[_0x33c6cb(0xcc)]();}if(_0x4b6d9c['length']===0x0)_0x4b6d9c=[_0x33c6cb(0x180)];this[_0x33c6cb(0xaf)](_0x23af79['from'],_0x23af79[_0x33c6cb(0x1ad)],{'success':!![],'names':_0x4b6d9c},_0x23af79['callback']);}catch(_0x193bf2){this[_0x33c6cb(0xaf)](_0x23af79['from'],_0x23af79[_0x33c6cb(0x1ad)],{'success':![],'error':_0x193bf2[_0x33c6cb(0x107)]},_0x23af79[_0x33c6cb(0x198)]);}else{if(_0x23af79[_0x33c6cb(0x1ad)]===_0x33c6cb(0x1a8))try{await setup[_0x33c6cb(0x14e)](this,_0x33c6cb(0x1a9),![],![]),this[_0x33c6cb(0xaf)](_0x23af79['from'],_0x23af79[_0x33c6cb(0x1ad)],{'success':!![],'message':_0x33c6cb(0xd4)},_0x23af79[_0x33c6cb(0x198)]);}catch(_0x14811b){this[_0x33c6cb(0x1a3)][_0x33c6cb(0x116)](_0x33c6cb(0x11f)+_0x14811b[_0x33c6cb(0x107)]),this[_0x33c6cb(0xaf)](_0x23af79['from'],_0x23af79[_0x33c6cb(0x1ad)],{'success':![],'message':'Fehler:\x20'+_0x14811b[_0x33c6cb(0x107)]},_0x23af79['callback']);}}}}}}}}}}}}}}}async[a0_0x323635(0xb9)](){const _0x3ca210=a0_0x323635;try{const _0x16603f=await this[_0x3ca210(0x195)](setup[_0x3ca210(0xe7)]);_0x16603f&&_0x16603f['val']&&Object[_0x3ca210(0x122)](setup[_0x3ca210(0x173)])[_0x3ca210(0x191)](_0x16603f[_0x3ca210(0x190)])?this[_0x3ca210(0x101)]=_0x16603f[_0x3ca210(0x190)]:(this[_0x3ca210(0x101)]=setup[_0x3ca210(0x173)][_0x3ca210(0xbe)],await this[_0x3ca210(0x165)](setup[_0x3ca210(0xe7)],{'val':setup[_0x3ca210(0x173)][_0x3ca210(0xbe)],'ack':!![]}));}catch(_0x22c089){this[_0x3ca210(0x101)]=setup[_0x3ca210(0x173)][_0x3ca210(0xbe)];}}async[a0_0x323635(0xb8)](){const _0x1d0981=a0_0x323635;try{const _0x25caaf=this[_0x1d0981(0x167)]['presenceDevices']||[];let _0x42a128=![];const _0x8f618b=[];for(const _0x586164 of _0x25caaf){try{const _0x140820=await this[_0x1d0981(0x193)](_0x586164);_0x140820&&(_0x140820[_0x1d0981(0x190)]===!![]||_0x140820[_0x1d0981(0x190)]===_0x1d0981(0x121)||_0x140820['val']===0x1)&&(_0x42a128=!![],_0x8f618b[_0x1d0981(0xda)](_0x586164));}catch(_0x1093d4){}}return await this[_0x1d0981(0x165)](_0x1d0981(0x115),{'val':_0x8f618b['join'](',\x20'),'ack':!![]}),_0x42a128&&(this[_0x1d0981(0x138)]&&(this[_0x1d0981(0x1a3)][_0x1d0981(0xde)]('WiFi\x20Presence\x20detected.'),recorder[_0x1d0981(0x10e)](this)),!this[_0x1d0981(0xb4)]&&this[_0x1d0981(0x101)]===setup['SYSTEM_MODES'][_0x1d0981(0xbe)]&&await recorder[_0x1d0981(0xc8)](this,!![])),_0x42a128;}catch(_0x4a213d){return![];}}async[a0_0x323635(0x159)](){const _0x421c9c=a0_0x323635;this[_0x421c9c(0x1a3)]['debug'](_0x421c9c(0x18c)),await aiAgent[_0x421c9c(0x16e)](this),this[_0x421c9c(0x105)](),this[_0x421c9c(0xe2)](),this[_0x421c9c(0x14b)]();}async[a0_0x323635(0xd6)](){const _0x312468=a0_0x323635,_0x4d3f3e=[_0x312468(0x1a7),'accuweather.0',_0x312468(0xf5)],_0x30b708=[_0x312468(0x118),'Current.WeatherText','NextHours.Location_1.Day_1.current.symbol_desc'];for(const _0xb79b45 of _0x4d3f3e){for(const _0x2251a5 of _0x30b708){try{const _0x3b4c30=_0xb79b45+'.'+_0x2251a5,_0x335dee=await this[_0x312468(0x193)](_0x3b4c30);if(_0x335dee&&_0x335dee[_0x312468(0x190)]){const _0x9d97b4=String(_0x335dee[_0x312468(0x190)])['toLowerCase']();if(_0x9d97b4[_0x312468(0x191)](_0x312468(0xf4))||_0x9d97b4[_0x312468(0x191)](_0x312468(0xc2))||_0x9d97b4[_0x312468(0x191)]('klar')||_0x9d97b4[_0x312468(0x191)](_0x312468(0xb6))||_0x9d97b4[_0x312468(0x191)](_0x312468(0x19d)))return!![];}}catch(_0x1117ab){}}}return![];}['triggerGaitAnalysis'](){const _0xfe462c=a0_0x323635;if(!this[_0xfe462c(0xbc)])return;try{this[_0xfe462c(0x1a6)](_0xfe462c(0xea),(_0x3c139b,_0x3ab2b8)=>{const _0x2d3880=_0xfe462c;_0x3ab2b8&&_0x3ab2b8[_0x2d3880(0x190)]&&pythonBridge[_0x2d3880(0x103)](this,_0x2d3880(0x17b),{'sequences':JSON['parse'](_0x3ab2b8[_0x2d3880(0x190)])});});}catch(_0x1ba970){}}async[a0_0x323635(0x14b)](){const _0x275f39=a0_0x323635;if(!this[_0x275f39(0xbc)])return;try{const _0xbce766=await recorder['getOutsideTemperatureNumeric'](this);if(_0xbce766===null)return;const _0x5716bb={},_0x2d30a0={},_0x14070c=this[_0x275f39(0x167)][_0x275f39(0xf2)]||[];for(const _0x47d3d9 of _0x14070c){if(_0x47d3d9[_0x275f39(0x168)]==='temperature'&&_0x47d3d9['location']){const _0x53550f=this['sensorLastValues'][_0x47d3d9['id']];if(_0x53550f!==undefined)_0x5716bb[_0x47d3d9[_0x275f39(0x140)]]=_0x53550f;if(_0x47d3d9['isSolar'])_0x2d30a0[_0x47d3d9[_0x275f39(0x140)]]=!![];}}const _0x523c59=await this[_0x275f39(0xd6)]();let _0xa387b2={};try{const _0x1143f7=await this[_0x275f39(0x195)]('analysis.energy.warmupTargets');if(_0x1143f7&&_0x1143f7[_0x275f39(0x190)])_0xa387b2=JSON[_0x275f39(0x1a0)](_0x1143f7[_0x275f39(0x190)]);}catch(_0x3f22ad){}Object[_0x275f39(0xd3)](_0x5716bb)['length']>0x0&&(pythonBridge['send'](this,_0x275f39(0x188),{'current_temps':_0x5716bb,'t_out':_0xbce766,'is_sunny':_0x523c59,'solar_flags':_0x2d30a0,'warmup_targets':_0xa387b2}),pythonBridge[_0x275f39(0x103)](this,'OPTIMIZE_ENERGY',{'current_temps':_0x5716bb,'t_out':_0xbce766,'targets':{}}));}catch(_0x52796b){}}['updateHealthVector'](){const _0x2d4d48=a0_0x323635;if(!this[_0x2d4d48(0xf0)]||this['rawEventLog'][_0x2d4d48(0x185)]===0x0)return;const _0x1a4160=new Array(0x60)[_0x2d4d48(0xe0)](0x0),_0x10e42b=new Date()[_0x2d4d48(0x127)](0x0,0x0,0x0,0x0);this[_0x2d4d48(0xf0)][_0x2d4d48(0x1a4)](_0x433690=>{const _0x251522=_0x2d4d48,_0x2e7a5b=new Date(_0x433690[_0x251522(0x111)]);if(_0x2e7a5b[_0x251522(0x182)]()>=_0x10e42b){const _0x54ba51=_0x2e7a5b[_0x251522(0x155)](),_0x390657=_0x2e7a5b[_0x251522(0x157)](),_0x39b445=_0x54ba51*0x4+Math[_0x251522(0x10a)](_0x390657/0xf);if(_0x39b445>=0x0&&_0x39b445<0x60)_0x1a4160[_0x39b445]++;}}),this['setStateAsync'](_0x2d4d48(0xe3),{'val':JSON['stringify'](_0x1a4160),'ack':!![]});}[a0_0x323635(0x1a1)](){const _0x2ebb13=a0_0x323635;if(!this[_0x2ebb13(0x135)]||this[_0x2ebb13(0x135)]['length']<0x2)return;const _0xeaa6cc=this['dailyDigests'][_0x2ebb13(0xca)](_0x436011=>{const _0x12183f=_0x2ebb13,_0x369a9f=(_0x436011['activityLevel']||'')[_0x12183f(0x17f)]();return ACTIVITY_LEVEL_MAP[_0x369a9f]||0x32;});pythonBridge[_0x2ebb13(0x103)](this,'ANALYZE_TREND',{'values':_0xeaa6cc,'tag':_0x2ebb13(0xe4)});}}if(require['main']!==module)module[a0_0x323635(0xf1)]=_0x4e58ff=>new CogniLiving(_0x4e58ff);else new CogniLiving();