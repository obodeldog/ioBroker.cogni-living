const a0_0x1e6efe=a0_0x2dd8;(function(_0x184c96,_0x5e7f9b){const _0x4e797e=a0_0x2dd8,_0x2cda8f=_0x184c96();while(!![]){try{const _0x3b746b=parseInt(_0x4e797e(0x157))/0x1*(-parseInt(_0x4e797e(0x1ce))/0x2)+parseInt(_0x4e797e(0x20a))/0x3*(parseInt(_0x4e797e(0x14d))/0x4)+-parseInt(_0x4e797e(0x180))/0x5*(-parseInt(_0x4e797e(0x1d0))/0x6)+parseInt(_0x4e797e(0x1b0))/0x7*(parseInt(_0x4e797e(0x1a6))/0x8)+parseInt(_0x4e797e(0x161))/0x9*(parseInt(_0x4e797e(0x1ee))/0xa)+parseInt(_0x4e797e(0x1b6))/0xb+-parseInt(_0x4e797e(0x1de))/0xc;if(_0x3b746b===_0x5e7f9b)break;else _0x2cda8f['push'](_0x2cda8f['shift']());}catch(_0x18b7c7){_0x2cda8f['push'](_0x2cda8f['shift']());}}}(a0_0x4c5a,0x7ae53));const a0_0x2f1dc1=(function(){let _0x21a29e=!![];return function(_0xad0209,_0x3431e4){const _0x187e47=_0x21a29e?function(){const _0x9ec6df=a0_0x2dd8;if(_0x3431e4){const _0x2612c7=_0x3431e4[_0x9ec6df(0x1fa)](_0xad0209,arguments);return _0x3431e4=null,_0x2612c7;}}:function(){};return _0x21a29e=![],_0x187e47;};}()),a0_0x417fed=a0_0x2f1dc1(this,function(){const _0x5c425b=a0_0x2dd8;return a0_0x417fed[_0x5c425b(0x215)]()[_0x5c425b(0x201)](_0x5c425b(0x1db))['toString']()['constructor'](a0_0x417fed)[_0x5c425b(0x201)](_0x5c425b(0x1db));});function a0_0x2dd8(_0xbbe729,_0x4a83da){const _0x4a9ed1=a0_0x4c5a();return a0_0x2dd8=function(_0x417fed,_0x2f1dc1){_0x417fed=_0x417fed-0x140;let _0x4c5afe=_0x4a9ed1[_0x417fed];return _0x4c5afe;},a0_0x2dd8(_0xbbe729,_0x4a83da);}a0_0x417fed();'use strict';const utils=require(a0_0x1e6efe(0x1c8)),{GoogleGenerativeAI}=require(a0_0x1e6efe(0x1f5)),installer=require(a0_0x1e6efe(0x1d8)),scanner=require(a0_0x1e6efe(0x183)),schedulers=require(a0_0x1e6efe(0x20c)),topology=require(a0_0x1e6efe(0x1cc)),setup=require(a0_0x1e6efe(0x1c6)),recorder=require(a0_0x1e6efe(0x211)),pythonBridge=require('./lib/python_bridge'),aiAgent=require(a0_0x1e6efe(0x208)),deadMan=require(a0_0x1e6efe(0x195)),GEMINI_MODEL=a0_0x1e6efe(0x15b),ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};function a0_0x4c5a(){const _0x323948=['namespace','sendNotification','1312gleNfw','error','dependencyInstallInProgress','toLowerCase','exitTimer','scanDevices','scanForDevices','triggerDailyDigest','object','calendarInstance','35273gSdxSI','\x20Tage)','calendarName','Gesendet','runPythonHealthCheck','getLtmData','10905675XYCaOx','WiFi\x20Presence\x20detected.','fill','checkAndInstall','join','now','Kein\x20Wetter-Adapter','SET_TOPOLOGY','inactivityThresholdHours','forEach','updateTopology','enum.functions.*','LTM.rawEventLog','updateLocation','LTM.triggerDailyDigest','analysisTimer','./lib/setup','notifyTelegramInstance','@iobroker/adapter-core','processSensorEvent','isProVersion','motion','./lib/topology','checkWifiPresence','2zSyLEB','find','804glsxqc','location','ltmJob','Verbunden','enum.rooms.*','_calName','triggerBriefing','includes','./lib/installer','add','Kein\x20API\x20Key\x20Ã¼bergeben','(((.+)+)+)+$','stopService','stateChange','32056344Mmqzkt','SYSTEM_DP_MODE','text','modeResetJob','common','ANALYZE_TREND','temperature','timestamp','analysis.training.triggerEnergy','val','floor','push','analysis.training.triggerSecurity','analysis.triggerBriefing','driftAnalysisTimer','main','1770zsGtOV','analysis.automation.autoApply','runGeminiAnalysis','SYSTEM_MODES','systemConfig','analysis.trigger','onMessage','@google/generative-ai','.system.mode','ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...','cancel','LTM.dailyDigests','apply','bind','keys','analysisInterval','subscribeStates','sensorLastValues','Lernphase\x20(','search','stringify',')\x20-\x20Phase\x20C\x20(Hardened)','executeAutomationAction','testContext','triggerEnergyPrediction','endsWith','./lib/ai_agent','getGenerativeModel','234663NWjfRq','abortExitTimer','./lib/scheduler','setupBriefingScheduler','loadSystemMode','setStateAsync','application/json','./lib/recorder','activityLevel','ready','info','toString','geminiApiKey','getHours','LTM.trainingData.thermodynamics','callback','telegram','Gemini\x20Init\x20Error:\x20','currentSystemMode','type','analysis.training.triggerTopology','cogni-living\x20adapter\x20starting\x20(v','updated','Activity-Level','getEnums','length','updateHealthVector','getCalendarNames','48eJYZav','presenceDevices','initSystemConfig','cogni-living','geminiModel','Aktiv\x20(','PYTHON_EXE','pop','minDaysForBaseline','isPresent','338894RTQFgc','analysis.topology.structure','analysis.automation.triggerAction','TRAIN_COMFORT','models/gemini-flash-latest','notifyTelegramEnabled','sendMorningBriefing','genAI','triggerGaitAnalysis','from','10278bfVtsH','getState','eventHistory','command','name','LTM.baselineStatus','devices','createAllObjects','Test','values','getForeignStateAsync','NORMAL','dailyDigests','parse','setHours','instance','.communicate.request','matrix','getTime','getStateAsync','ack','getForeignObjectAsync','config','slice','lastAlertState','map','analysis.health.todayVector','sendTo','Verbindung\x20erfolgreich!','analysis.training.triggerHealth','apiKey','20710FgwWZg','automation.triggerAction','response','./lib/scanner','setPresence','briefingJob','exports','Sec-Training\x20started...','message','startSystem','analysis.training.triggerComfort','online','getForeignObjectsAsync','getOutsideTemperatureNumeric','setState','Adapter','isArray','subscribeForeignStatesAsync','licenseKey','Gemini\x20AI\x20initialized.','updateTopologyMatrix','./lib/dead_man','onReady','log','VACATION','sort','Notification\x20Test\x20Failed:\x20','rawEventLog','send','weatherInstance','checkLicense','unload','version','onStateChange','runAutopilot','enum'];a0_0x4c5a=function(){return _0x323948;};return a0_0x4c5a();}class CogniLiving extends utils[a0_0x1e6efe(0x18f)]{constructor(_0x5a2b15){const _0x574bb6=a0_0x1e6efe;super({..._0x5a2b15,'name':_0x574bb6(0x150)}),this['eventHistory']=[],this['analysisHistory']=[],this[_0x574bb6(0x19b)]=[],this[_0x574bb6(0x16d)]=[],this[_0x574bb6(0x1ff)]={},this[_0x574bb6(0x1f2)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x574bb6(0x156)]=!![],this[_0x574bb6(0x1aa)]=null,this['exitGraceTimer']=null,this['isGracePeriodActive']=![],this[_0x574bb6(0x15e)]=null,this[_0x574bb6(0x151)]=null,this[_0x574bb6(0x143)]=setup[_0x574bb6(0x1f1)]['NORMAL'],this[_0x574bb6(0x1ca)]=![],this[_0x574bb6(0x179)]=![],this[_0x574bb6(0x1c5)]=null,this[_0x574bb6(0x1d2)]=null,this[_0x574bb6(0x1e1)]=null,this[_0x574bb6(0x1ec)]=null,this['briefingJob']=null,this[_0x574bb6(0x1a8)]=![],this['on'](_0x574bb6(0x213),this[_0x574bb6(0x196)]['bind'](this)),this['on'](_0x574bb6(0x1dd),this['onStateChange']['bind'](this)),this['on'](_0x574bb6(0x19f),this['onUnload'][_0x574bb6(0x1fb)](this)),this['on'](_0x574bb6(0x188),this['onMessage'][_0x574bb6(0x1fb)](this));}async['onReady'](){const _0x202a56=a0_0x1e6efe;this[_0x202a56(0x197)][_0x202a56(0x214)](_0x202a56(0x146)+this[_0x202a56(0x1a0)]+_0x202a56(0x203));if(!installer[_0x202a56(0x1b9)](this,()=>this['startSystem']()))return;}async[a0_0x1e6efe(0x189)](){const _0x25e8ff=a0_0x1e6efe;await setup['initZombies'](this);try{this[_0x25e8ff(0x1ca)]=await setup[_0x25e8ff(0x19e)](this['config'][_0x25e8ff(0x192)]);}catch(_0x57733a){}if(!this[_0x25e8ff(0x177)][_0x25e8ff(0x1be)]||this[_0x25e8ff(0x177)]['inactivityThresholdHours']<0.1)this[_0x25e8ff(0x177)][_0x25e8ff(0x1be)]=0xc;await setup['initHistory'](this),await setup[_0x25e8ff(0x14f)](this);if(this[_0x25e8ff(0x177)][_0x25e8ff(0x216)])try{this[_0x25e8ff(0x15e)]=new GoogleGenerativeAI(this[_0x25e8ff(0x177)][_0x25e8ff(0x216)]),this[_0x25e8ff(0x151)]=this[_0x25e8ff(0x15e)][_0x25e8ff(0x209)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x25e8ff(0x210)}}),this[_0x25e8ff(0x197)][_0x25e8ff(0x214)](_0x25e8ff(0x193));}catch(_0x32aeac){this[_0x25e8ff(0x197)]['error'](_0x25e8ff(0x142)+_0x32aeac['message']);}await setup[_0x25e8ff(0x168)](this),await this[_0x25e8ff(0x20e)]();try{const _0x4016ed=await this['getStateAsync'](_0x25e8ff(0x1c2));if(_0x4016ed&&_0x4016ed[_0x25e8ff(0x1e7)])this[_0x25e8ff(0x19b)]=JSON['parse'](_0x4016ed[_0x25e8ff(0x1e7)]);}catch(_0x3d94cd){this[_0x25e8ff(0x19b)]=[];}try{const _0x4f028d=await this[_0x25e8ff(0x174)]('LTM.dailyDigests');if(_0x4f028d&&_0x4f028d[_0x25e8ff(0x1e7)])this[_0x25e8ff(0x16d)]=JSON['parse'](_0x4f028d[_0x25e8ff(0x1e7)]);}catch(_0x55d3c0){this[_0x25e8ff(0x16d)]=[];}const _0x1dd7f3=this[_0x25e8ff(0x16d)]['length']>=(this[_0x25e8ff(0x177)]['minDaysForBaseline']||0x7)?_0x25e8ff(0x152)+this[_0x25e8ff(0x16d)]['length']+_0x25e8ff(0x1b1):_0x25e8ff(0x200)+this[_0x25e8ff(0x16d)][_0x25e8ff(0x14a)]+'/'+(this[_0x25e8ff(0x177)][_0x25e8ff(0x155)]||0x7)+')';await this[_0x25e8ff(0x20f)](_0x25e8ff(0x166),{'val':_0x1dd7f3,'ack':!![]}),this[_0x25e8ff(0x1fe)](_0x25e8ff(0x1f3)),this[_0x25e8ff(0x1fe)](_0x25e8ff(0x1c4)),this[_0x25e8ff(0x1fe)]('system.mode'),this['subscribeStates'](_0x25e8ff(0x1eb)),this['subscribeStates'](_0x25e8ff(0x159)),this[_0x25e8ff(0x1fe)](_0x25e8ff(0x1ef)),this[_0x25e8ff(0x1fe)]('analysis.training.triggerSecurity'),this['subscribeStates'](_0x25e8ff(0x17e)),this[_0x25e8ff(0x1fe)](_0x25e8ff(0x1e6)),this[_0x25e8ff(0x1fe)](_0x25e8ff(0x18a)),this[_0x25e8ff(0x1fe)]('analysis.training.triggerTopology');const _0x4024c6=this[_0x25e8ff(0x177)][_0x25e8ff(0x167)];if(_0x4024c6)for(const _0x2a80ec of _0x4024c6){await this[_0x25e8ff(0x191)](_0x2a80ec['id']);}const _0x3b8eb4=this[_0x25e8ff(0x177)][_0x25e8ff(0x14e)];if(_0x3b8eb4)for(const _0x49cfa9 of _0x3b8eb4){await this[_0x25e8ff(0x191)](_0x49cfa9);}if(this[_0x25e8ff(0x177)][_0x25e8ff(0x15c)]&&this[_0x25e8ff(0x177)][_0x25e8ff(0x1c7)])await this[_0x25e8ff(0x191)](this[_0x25e8ff(0x177)][_0x25e8ff(0x1c7)]+_0x25e8ff(0x171));setTimeout(()=>this[_0x25e8ff(0x1cd)](),0x1388);if(this[_0x25e8ff(0x1c5)])clearInterval(this['analysisTimer']);const _0x452c1c=this[_0x25e8ff(0x177)][_0x25e8ff(0x1fd)]||0xf;_0x452c1c>0x0&&(this[_0x25e8ff(0x1c5)]=setInterval(()=>{const _0x55be12=_0x25e8ff;this[_0x55be12(0x1a2)]();},_0x452c1c*0x3c*0x3e8)),schedulers['setupLtmScheduler'](this,()=>aiAgent['createDailyDigest'](this,pythonBridge)),schedulers['setupModeResetScheduler'](this),schedulers['setupDriftAnalysisScheduler'](this,()=>aiAgent['runBaselineDriftAnalysis'](this)),schedulers[_0x25e8ff(0x20d)](this,()=>aiAgent['sendMorningBriefing'](this)),pythonBridge['startService'](this,installer[_0x25e8ff(0x153)]),setTimeout(async()=>{const _0x28968c=_0x25e8ff;await topology[_0x28968c(0x1c0)](this);try{const _0x1b12f7=await this[_0x28968c(0x174)](_0x28968c(0x158));if(_0x1b12f7&&_0x1b12f7[_0x28968c(0x1e7)])pythonBridge['send'](this,'SET_TOPOLOGY',JSON[_0x28968c(0x16e)](_0x1b12f7[_0x28968c(0x1e7)]));}catch(_0x199d54){}this[_0x28968c(0x1b4)](),this[_0x28968c(0x15f)](),this[_0x28968c(0x206)](),this['updateHealthVector']();},0x1388);}['onUnload'](_0x455c27){const _0x1f3e26=a0_0x1e6efe;if(this[_0x1f3e26(0x1c5)])clearInterval(this[_0x1f3e26(0x1c5)]);if(this[_0x1f3e26(0x1ec)])clearInterval(this[_0x1f3e26(0x1ec)]);if(this[_0x1f3e26(0x1d2)])this[_0x1f3e26(0x1d2)][_0x1f3e26(0x1f8)]();if(this[_0x1f3e26(0x1e1)])this[_0x1f3e26(0x1e1)][_0x1f3e26(0x1f8)]();if(this[_0x1f3e26(0x185)])this['briefingJob'][_0x1f3e26(0x1f8)]();recorder[_0x1f3e26(0x20b)](this),pythonBridge[_0x1f3e26(0x1dc)](this),_0x455c27();}async[a0_0x1e6efe(0x1a1)](_0x13b6d3,_0x1e0f80){const _0x3c4358=a0_0x1e6efe;if(!_0x1e0f80||this['dependencyInstallInProgress'])return;if(_0x13b6d3[_0x3c4358(0x1d7)](_0x3c4358(0x141))&&_0x13b6d3[_0x3c4358(0x207)]('communicate.request')&&_0x1e0f80[_0x3c4358(0x1e7)])return;if(_0x13b6d3===this[_0x3c4358(0x1a4)]+_0x3c4358(0x1f6)){if(_0x1e0f80[_0x3c4358(0x1e7)]&&Object[_0x3c4358(0x16a)](setup[_0x3c4358(0x1f1)])[_0x3c4358(0x1d7)](_0x1e0f80[_0x3c4358(0x1e7)])){this[_0x3c4358(0x143)]=_0x1e0f80[_0x3c4358(0x1e7)];if(_0x1e0f80[_0x3c4358(0x1e7)]===setup[_0x3c4358(0x1f1)][_0x3c4358(0x198)])await recorder['setPresence'](this,![]);else await recorder['setPresence'](this,!![]);}if(!_0x1e0f80[_0x3c4358(0x175)])this[_0x3c4358(0x18e)](_0x13b6d3,{'val':this[_0x3c4358(0x143)],'ack':!![]});return;}if(!_0x1e0f80[_0x3c4358(0x175)]){_0x13b6d3[_0x3c4358(0x1d7)](_0x3c4358(0x1f3))&&_0x1e0f80[_0x3c4358(0x1e7)]&&(this[_0x3c4358(0x18e)](_0x13b6d3,{'val':![],'ack':!![]}),aiAgent[_0x3c4358(0x1f0)](this));if(_0x13b6d3[_0x3c4358(0x1d7)](_0x3c4358(0x1ad))&&_0x1e0f80['val']){this[_0x3c4358(0x18e)](_0x13b6d3,{'val':![],'ack':!![]});if(this[_0x3c4358(0x1ca)])aiAgent['createDailyDigest'](this,pythonBridge);}_0x13b6d3[_0x3c4358(0x1d7)](_0x3c4358(0x1d6))&&_0x1e0f80['val']&&(this[_0x3c4358(0x18e)](_0x13b6d3,{'val':![],'ack':!![]}),aiAgent[_0x3c4358(0x15d)](this));_0x13b6d3[_0x3c4358(0x1d7)](_0x3c4358(0x181))&&_0x1e0f80[_0x3c4358(0x1e7)]&&(this['setState'](_0x13b6d3,{'val':![],'ack':!![]}),aiAgent[_0x3c4358(0x204)](this));if(_0x13b6d3[_0x3c4358(0x1d7)](_0x3c4358(0x1ea))&&_0x1e0f80[_0x3c4358(0x1e7)]){this[_0x3c4358(0x18e)](_0x13b6d3,{'val':![],'ack':!![]});if(this[_0x3c4358(0x1ca)])try{const _0x4449f9=await this[_0x3c4358(0x174)]('LTM.trainingData.sequences');if(_0x4449f9&&_0x4449f9[_0x3c4358(0x1e7)]){const _0x1f837f=JSON['parse'](_0x4449f9[_0x3c4358(0x1e7)]);this['setStateAsync']('analysis.training.status',{'val':_0x3c4358(0x187),'ack':!![]}),pythonBridge[_0x3c4358(0x19c)](this,'TRAIN_SECURITY',{'sequences':_0x1f837f});}}catch(_0x20bda4){}}if(_0x13b6d3[_0x3c4358(0x1d7)]('analysis.training.triggerHealth')&&_0x1e0f80[_0x3c4358(0x1e7)]){this[_0x3c4358(0x18e)](_0x13b6d3,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x4020ca=await this[_0x3c4358(0x174)](_0x3c4358(0x1f9));if(_0x4020ca&&_0x4020ca[_0x3c4358(0x1e7)])pythonBridge[_0x3c4358(0x19c)](this,'TRAIN_HEALTH',{'digests':JSON[_0x3c4358(0x16e)](_0x4020ca['val'])});}catch(_0x33109f){}}if(_0x13b6d3[_0x3c4358(0x1d7)](_0x3c4358(0x1e6))&&_0x1e0f80[_0x3c4358(0x1e7)]){this[_0x3c4358(0x18e)](_0x13b6d3,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x360eac=await this[_0x3c4358(0x174)](_0x3c4358(0x218));if(_0x360eac&&_0x360eac[_0x3c4358(0x1e7)])pythonBridge[_0x3c4358(0x19c)](this,'TRAIN_ENERGY',{'points':JSON['parse'](_0x360eac['val'])});}catch(_0x54a82f){}}if(_0x13b6d3['includes'](_0x3c4358(0x18a))&&_0x1e0f80[_0x3c4358(0x1e7)]){this[_0x3c4358(0x18e)](_0x13b6d3,{'val':![],'ack':!![]});if(this[_0x3c4358(0x1ca)])try{const _0x17ec1a=await this[_0x3c4358(0x174)](_0x3c4358(0x1c2));if(_0x17ec1a&&_0x17ec1a[_0x3c4358(0x1e7)])pythonBridge[_0x3c4358(0x19c)](this,_0x3c4358(0x15a),{'events':JSON[_0x3c4358(0x16e)](_0x17ec1a[_0x3c4358(0x1e7)])});}catch(_0x2ca664){}}_0x13b6d3[_0x3c4358(0x1d7)](_0x3c4358(0x145))&&_0x1e0f80[_0x3c4358(0x1e7)]&&(this[_0x3c4358(0x18e)](_0x13b6d3,{'val':![],'ack':!![]}),topology['updateTopology'](this));return;}if(this[_0x3c4358(0x177)][_0x3c4358(0x14e)]&&this[_0x3c4358(0x177)]['presenceDevices'][_0x3c4358(0x1d7)](_0x13b6d3)){await this[_0x3c4358(0x1cd)]();return;}const _0x53c2a1=(this[_0x3c4358(0x177)][_0x3c4358(0x167)]||[])[_0x3c4358(0x1cf)](_0x110ce2=>_0x110ce2['id']===_0x13b6d3);if(_0x53c2a1){const _0x2a3c5f=await recorder[_0x3c4358(0x1c9)](this,_0x13b6d3,_0x1e0f80,_0x53c2a1);_0x2a3c5f&&_0x2a3c5f[_0x3c4358(0x144)]===_0x3c4358(0x1cb)&&_0x2a3c5f[_0x3c4358(0x1d1)]&&this[_0x3c4358(0x1ca)]&&deadMan[_0x3c4358(0x1c3)](this,_0x2a3c5f['location']);}}async[a0_0x1e6efe(0x1f4)](_0x492f3b){const _0x2f553d=a0_0x1e6efe;if(typeof _0x492f3b==='object'&&_0x492f3b['message']){if(_0x492f3b[_0x2f553d(0x164)]==='testApiKey')try{const _0x5af13d=_0x492f3b[_0x2f553d(0x188)][_0x2f553d(0x17f)];if(!_0x5af13d)throw new Error(_0x2f553d(0x1da));const _0x5df596=new GoogleGenerativeAI(_0x5af13d),_0x5a3c7c=_0x5df596[_0x2f553d(0x209)]({'model':GEMINI_MODEL}),_0x16f3ce=await _0x5a3c7c['generateContent'](_0x2f553d(0x169)),_0x4a0b07=await _0x16f3ce[_0x2f553d(0x182)];if(_0x4a0b07[_0x2f553d(0x1e0)]())this['sendTo'](_0x492f3b['from'],_0x492f3b['command'],{'success':!![],'message':_0x2f553d(0x17d)},_0x492f3b[_0x2f553d(0x140)]);else throw new Error('Keine\x20Antwort\x20von\x20Gemini');}catch(_0xd7c4f9){this[_0x2f553d(0x17c)](_0x492f3b[_0x2f553d(0x160)],_0x492f3b[_0x2f553d(0x164)],{'success':![],'message':_0xd7c4f9[_0x2f553d(0x188)]},_0x492f3b[_0x2f553d(0x140)]);}else{if(_0x492f3b[_0x2f553d(0x164)]===_0x2f553d(0x1ab))try{const _0x4ebfd9=await scanner[_0x2f553d(0x1ac)](this,_0x492f3b[_0x2f553d(0x188)]||{});this[_0x2f553d(0x17c)](_0x492f3b[_0x2f553d(0x160)],_0x492f3b[_0x2f553d(0x164)],{'success':!![],'devices':_0x4ebfd9},_0x492f3b[_0x2f553d(0x140)]);}catch(_0x279af7){this[_0x2f553d(0x17c)](_0x492f3b['from'],_0x492f3b[_0x2f553d(0x164)],{'success':![],'error':_0x279af7[_0x2f553d(0x188)]},_0x492f3b[_0x2f553d(0x140)]);}else{if(_0x492f3b['command']===_0x2f553d(0x194))try{const {matrix:_0x5ace60}=_0x492f3b[_0x2f553d(0x188)],_0x5827f1=await this['getStateAsync'](_0x2f553d(0x158));if(_0x5827f1&&_0x5827f1['val']){const _0x3cb51f=JSON['parse'](_0x5827f1[_0x2f553d(0x1e7)]);_0x3cb51f[_0x2f553d(0x172)]=_0x5ace60,_0x3cb51f[_0x2f553d(0x147)]=Date[_0x2f553d(0x1bb)](),await this[_0x2f553d(0x20f)](_0x2f553d(0x158),{'val':JSON['stringify'](_0x3cb51f),'ack':!![]}),pythonBridge[_0x2f553d(0x19c)](this,_0x2f553d(0x1bd),_0x3cb51f);}this[_0x2f553d(0x17c)](_0x492f3b[_0x2f553d(0x160)],_0x492f3b['command'],{'success':!![]},_0x492f3b[_0x2f553d(0x140)]);}catch(_0x3e0d83){this['log'][_0x2f553d(0x1a7)](_0x3e0d83);}else{if(_0x492f3b['command']===_0x2f553d(0x1b5))this[_0x2f553d(0x17c)](_0x492f3b[_0x2f553d(0x160)],_0x492f3b[_0x2f553d(0x164)],{'success':!![],'dailyDigests':this['dailyDigests']||[],'analysisHistory':this['analysisHistory']||[]},_0x492f3b['callback']);else{if(_0x492f3b['command']==='getOverviewData'){const _0x259e8d=this[_0x2f553d(0x16d)][_0x2f553d(0x14a)],_0x4b3975=new Array(0x18)['fill'](0x0),_0x62e2a9=new Date()[_0x2f553d(0x16f)](0x0,0x0,0x0,0x0);this[_0x2f553d(0x163)]&&this['eventHistory'][_0x2f553d(0x1bf)](_0x308c0a=>{const _0x3b33a3=_0x2f553d;if(_0x308c0a['timestamp']>=_0x62e2a9){const _0x121f3a=new Date(_0x308c0a['timestamp'])[_0x3b33a3(0x217)]();if(_0x121f3a>=0x0&&_0x121f3a<0x18)_0x4b3975[_0x121f3a]++;}}),this[_0x2f553d(0x17c)](_0x492f3b['from'],_0x492f3b['command'],{'success':!![],'eventHistory':this[_0x2f553d(0x163)][_0x2f553d(0x178)](0x0,0xf),'stats':{'digestCount':_0x259e8d,'isPresent':this['isPresent'],'hourlyActivity':_0x4b3975},'automation':{'detected':![]}},_0x492f3b[_0x2f553d(0x140)]);}else{if(_0x492f3b[_0x2f553d(0x164)]===_0x2f553d(0x149)){const _0x429a3d=await this[_0x2f553d(0x18c)](_0x2f553d(0x1c1),_0x2f553d(0x1a3)),_0x42827d=[];if(_0x429a3d)for(const _0x552e4f in _0x429a3d){const _0x3148ab=_0x429a3d[_0x552e4f],_0x43270c=(_0x3148ab['common']&&typeof _0x3148ab['common']['name']===_0x2f553d(0x1ae)?_0x3148ab[_0x2f553d(0x1e2)][_0x2f553d(0x165)]['de']:_0x3148ab[_0x2f553d(0x1e2)]['name'])||_0x3148ab[_0x2f553d(0x1e2)]['name'];_0x42827d[_0x2f553d(0x1e9)]({'id':_0x552e4f,'name':_0x43270c});}const _0x333191=await this[_0x2f553d(0x18c)](_0x2f553d(0x1d4),_0x2f553d(0x1a3)),_0x46bf32=[];if(_0x333191)for(const _0x31830e in _0x333191){const _0x21c925=_0x333191[_0x31830e],_0x5bafa2=(_0x21c925[_0x2f553d(0x1e2)]&&typeof _0x21c925[_0x2f553d(0x1e2)][_0x2f553d(0x165)]==='object'?_0x21c925[_0x2f553d(0x1e2)]['name']['de']:_0x21c925[_0x2f553d(0x1e2)][_0x2f553d(0x165)])||_0x31830e['split']('.')[_0x2f553d(0x154)]();_0x46bf32[_0x2f553d(0x1e9)](_0x5bafa2);}this[_0x2f553d(0x17c)](_0x492f3b['from'],_0x492f3b['command'],{'success':!![],'enums':_0x42827d,'rooms':_0x46bf32},_0x492f3b[_0x2f553d(0x140)]);}else{if(_0x492f3b[_0x2f553d(0x164)]===_0x2f553d(0x205))try{let _0x1be3c2=_0x2f553d(0x1bc),_0x320f89='Kein\x20Kalender-Adapter';if(this['config'][_0x2f553d(0x19d)]){const _0x2d63d6=await recorder[_0x2f553d(0x18d)](this);_0x1be3c2=_0x2d63d6!==null?_0x2d63d6+'Â°C':'Daten\x20nicht\x20verfÃ¼gbar';}if(this[_0x2f553d(0x177)][_0x2f553d(0x1af)]){const _0x20df7a=await this[_0x2f553d(0x176)]('system.adapter.'+this[_0x2f553d(0x177)][_0x2f553d(0x1af)]);_0x320f89=_0x20df7a?_0x2f553d(0x1d3):'Instanz\x20nicht\x20gefunden';}this['sendTo'](_0x492f3b[_0x2f553d(0x160)],_0x492f3b[_0x2f553d(0x164)],{'success':!![],'weather':_0x1be3c2,'calendar':_0x320f89},_0x492f3b[_0x2f553d(0x140)]);}catch(_0x509684){this[_0x2f553d(0x17c)](_0x492f3b['from'],_0x492f3b[_0x2f553d(0x164)],{'success':![],'error':_0x509684[_0x2f553d(0x188)]},_0x492f3b[_0x2f553d(0x140)]);}else{if(_0x492f3b[_0x2f553d(0x164)]===_0x2f553d(0x14c))try{const _0x5eebd3=_0x492f3b[_0x2f553d(0x188)][_0x2f553d(0x170)],_0x4d9677=await this[_0x2f553d(0x16b)](_0x5eebd3+'.data.table');let _0x32a87a=[];if(_0x4d9677&&_0x4d9677[_0x2f553d(0x1e7)]){const _0x14546f=JSON['parse'](_0x4d9677[_0x2f553d(0x1e7)]),_0x375834=new Set();Array[_0x2f553d(0x190)](_0x14546f)&&_0x14546f[_0x2f553d(0x1bf)](_0x4be665=>{const _0xd05c72=_0x2f553d;if(_0x4be665['_calName'])_0x375834['add'](_0x4be665[_0xd05c72(0x1d5)]);else{if(_0x4be665[_0xd05c72(0x1b2)])_0x375834[_0xd05c72(0x1d9)](_0x4be665[_0xd05c72(0x1b2)]);}}),_0x32a87a=Array[_0x2f553d(0x160)](_0x375834)[_0x2f553d(0x199)]();}if(_0x32a87a['length']===0x0)_0x32a87a=['Standard'];this[_0x2f553d(0x17c)](_0x492f3b[_0x2f553d(0x160)],_0x492f3b[_0x2f553d(0x164)],{'success':!![],'names':_0x32a87a},_0x492f3b[_0x2f553d(0x140)]);}catch(_0x39ee98){this[_0x2f553d(0x17c)](_0x492f3b[_0x2f553d(0x160)],_0x492f3b[_0x2f553d(0x164)],{'success':![],'error':_0x39ee98[_0x2f553d(0x188)]},_0x492f3b[_0x2f553d(0x140)]);}else{if(_0x492f3b[_0x2f553d(0x164)]==='testNotification')try{await setup[_0x2f553d(0x1a5)](this,'ðŸ””\x20Dies\x20ist\x20ein\x20Test\x20von\x20Cogni-Living.',![],![]),this[_0x2f553d(0x17c)](_0x492f3b['from'],_0x492f3b['command'],{'success':!![],'message':_0x2f553d(0x1b3)},_0x492f3b[_0x2f553d(0x140)]);}catch(_0x337455){this[_0x2f553d(0x197)][_0x2f553d(0x1a7)](_0x2f553d(0x19a)+_0x337455[_0x2f553d(0x188)]),this[_0x2f553d(0x17c)](_0x492f3b['from'],_0x492f3b[_0x2f553d(0x164)],{'success':![],'message':'Fehler:\x20'+_0x337455['message']},_0x492f3b['callback']);}}}}}}}}}}}async[a0_0x1e6efe(0x20e)](){const _0x4319d4=a0_0x1e6efe;try{const _0x1ab5a0=await this[_0x4319d4(0x174)](setup['SYSTEM_DP_MODE']);_0x1ab5a0&&_0x1ab5a0[_0x4319d4(0x1e7)]&&Object[_0x4319d4(0x16a)](setup['SYSTEM_MODES'])[_0x4319d4(0x1d7)](_0x1ab5a0['val'])?this[_0x4319d4(0x143)]=_0x1ab5a0[_0x4319d4(0x1e7)]:(this[_0x4319d4(0x143)]=setup['SYSTEM_MODES']['NORMAL'],await this[_0x4319d4(0x20f)](setup[_0x4319d4(0x1df)],{'val':setup[_0x4319d4(0x1f1)][_0x4319d4(0x16c)],'ack':!![]}));}catch(_0x3b2e89){this[_0x4319d4(0x143)]=setup[_0x4319d4(0x1f1)]['NORMAL'];}}async[a0_0x1e6efe(0x1cd)](){const _0x5e8c36=a0_0x1e6efe;try{const _0x29de5f=this['config']['presenceDevices']||[];let _0x14c0df=![];const _0x4efd9f=[];for(const _0x402e66 of _0x29de5f){try{const _0xc2dadc=await this['getForeignStateAsync'](_0x402e66);_0xc2dadc&&(_0xc2dadc[_0x5e8c36(0x1e7)]===!![]||_0xc2dadc[_0x5e8c36(0x1e7)]===_0x5e8c36(0x18b)||_0xc2dadc['val']===0x1)&&(_0x14c0df=!![],_0x4efd9f[_0x5e8c36(0x1e9)](_0x402e66));}catch(_0x4e46dd){}}return await this['setStateAsync']('system.presenceWho',{'val':_0x4efd9f[_0x5e8c36(0x1ba)](',\x20'),'ack':!![]}),_0x14c0df&&(this['exitTimer']&&(this['log'][_0x5e8c36(0x214)](_0x5e8c36(0x1b7)),recorder[_0x5e8c36(0x20b)](this)),!this[_0x5e8c36(0x156)]&&this[_0x5e8c36(0x143)]===setup[_0x5e8c36(0x1f1)][_0x5e8c36(0x16c)]&&await recorder[_0x5e8c36(0x184)](this,!![])),_0x14c0df;}catch(_0xaa0c57){return![];}}async[a0_0x1e6efe(0x1a2)](){const _0x1b7e72=a0_0x1e6efe;this[_0x1b7e72(0x197)]['debug'](_0x1b7e72(0x1f7)),await aiAgent['runGeminiAnalysis'](this),this['updateHealthVector'](),this['triggerGaitAnalysis'](),this[_0x1b7e72(0x206)]();}['triggerGaitAnalysis'](){const _0x54bbd5=a0_0x1e6efe;if(!this[_0x54bbd5(0x1ca)])return;try{this[_0x54bbd5(0x162)]('LTM.trainingData.sequences',(_0x3b46b1,_0x13ab1e)=>{const _0x4b3262=_0x54bbd5;_0x13ab1e&&_0x13ab1e[_0x4b3262(0x1e7)]&&pythonBridge[_0x4b3262(0x19c)](this,'ANALYZE_GAIT',{'sequences':JSON['parse'](_0x13ab1e[_0x4b3262(0x1e7)])});});}catch(_0x1a5406){}}async['triggerEnergyPrediction'](){const _0x2302ce=a0_0x1e6efe;if(!this[_0x2302ce(0x1ca)])return;try{const _0xb4c9c5=await recorder[_0x2302ce(0x18d)](this);if(_0xb4c9c5===null)return;const _0x55a6ff={},_0x22844d=this['config'][_0x2302ce(0x167)]||[];for(const _0xcad03 of _0x22844d){if(_0xcad03[_0x2302ce(0x144)]===_0x2302ce(0x1e4)&&_0xcad03[_0x2302ce(0x1d1)]){const _0x434ec2=this['sensorLastValues'][_0xcad03['id']];if(_0x434ec2!==undefined)_0x55a6ff[_0xcad03[_0x2302ce(0x1d1)]]=_0x434ec2;}}Object[_0x2302ce(0x1fc)](_0x55a6ff)[_0x2302ce(0x14a)]>0x0&&pythonBridge[_0x2302ce(0x19c)](this,'PREDICT_ENERGY',{'current_temps':_0x55a6ff,'t_out':_0xb4c9c5});}catch(_0x1a4f2b){}}[a0_0x1e6efe(0x14b)](){const _0x2cbdb5=a0_0x1e6efe;if(!this[_0x2cbdb5(0x19b)]||this[_0x2cbdb5(0x19b)][_0x2cbdb5(0x14a)]===0x0)return;const _0x21dfca=new Array(0x60)[_0x2cbdb5(0x1b8)](0x0),_0x48649e=new Date()[_0x2cbdb5(0x16f)](0x0,0x0,0x0,0x0);this[_0x2cbdb5(0x19b)]['forEach'](_0x144ddf=>{const _0x57672d=_0x2cbdb5,_0x5e8a1c=new Date(_0x144ddf[_0x57672d(0x1e5)]);if(_0x5e8a1c[_0x57672d(0x173)]()>=_0x48649e){const _0x4e848d=_0x5e8a1c[_0x57672d(0x217)](),_0x1d6a8e=_0x5e8a1c['getMinutes'](),_0x451296=_0x4e848d*0x4+Math[_0x57672d(0x1e8)](_0x1d6a8e/0xf);if(_0x451296>=0x0&&_0x451296<0x60)_0x21dfca[_0x451296]++;}}),this[_0x2cbdb5(0x20f)](_0x2cbdb5(0x17b),{'val':JSON[_0x2cbdb5(0x202)](_0x21dfca),'ack':!![]});}[a0_0x1e6efe(0x1b4)](){const _0x3c6604=a0_0x1e6efe;if(!this[_0x3c6604(0x16d)]||this[_0x3c6604(0x16d)]['length']<0x2)return;const _0x3ec3ee=this['dailyDigests'][_0x3c6604(0x17a)](_0x2ad4b1=>{const _0x143b01=_0x3c6604,_0x365ce1=(_0x2ad4b1[_0x143b01(0x212)]||'')[_0x143b01(0x1a9)]();return ACTIVITY_LEVEL_MAP[_0x365ce1]||0x32;});pythonBridge[_0x3c6604(0x19c)](this,_0x3c6604(0x1e3),{'values':_0x3ec3ee,'tag':_0x3c6604(0x148)});}}if(require[a0_0x1e6efe(0x1ed)]!==module)module[a0_0x1e6efe(0x186)]=_0x5b92c0=>new CogniLiving(_0x5b92c0);else new CogniLiving();