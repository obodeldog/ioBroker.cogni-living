const a0_0x588062=a0_0xcc06;(function(_0x3d8a98,_0x27e4f5){const _0x2bb177=a0_0xcc06,_0x2f4ee2=_0x3d8a98();while(!![]){try{const _0x31044c=-parseInt(_0x2bb177(0x103))/0x1*(-parseInt(_0x2bb177(0xe9))/0x2)+-parseInt(_0x2bb177(0x12b))/0x3*(-parseInt(_0x2bb177(0x12f))/0x4)+parseInt(_0x2bb177(0x146))/0x5+-parseInt(_0x2bb177(0x17f))/0x6*(parseInt(_0x2bb177(0xfa))/0x7)+parseInt(_0x2bb177(0x11e))/0x8+parseInt(_0x2bb177(0xff))/0x9+parseInt(_0x2bb177(0x136))/0xa*(-parseInt(_0x2bb177(0x105))/0xb);if(_0x31044c===_0x27e4f5)break;else _0x2f4ee2['push'](_0x2f4ee2['shift']());}catch(_0x33a59b){_0x2f4ee2['push'](_0x2f4ee2['shift']());}}}(a0_0x4d28,0x85121));const a0_0x2878c9=(function(){let _0x2e765c=!![];return function(_0x15696b,_0x1f13ab){const _0x5dbf7f=_0x2e765c?function(){if(_0x1f13ab){const _0x154dd6=_0x1f13ab['apply'](_0x15696b,arguments);return _0x1f13ab=null,_0x154dd6;}}:function(){};return _0x2e765c=![],_0x5dbf7f;};}()),a0_0x598132=a0_0x2878c9(this,function(){const _0x13b588=a0_0xcc06;return a0_0x598132['toString']()[_0x13b588(0xe8)](_0x13b588(0x14c))['toString']()[_0x13b588(0x180)](a0_0x598132)[_0x13b588(0xe8)](_0x13b588(0x14c));});a0_0x598132();'use strict';function a0_0xcc06(_0x7712d1,_0x9aa571){const _0x4ea30b=a0_0x4d28();return a0_0xcc06=function(_0x598132,_0x2878c9){_0x598132=_0x598132-0xe7;let _0x4d28c7=_0x4ea30b[_0x598132];return _0x4d28c7;},a0_0xcc06(_0x7712d1,_0x9aa571);}function a0_0x4d28(){const _0x4b7c3e=['error','notifyTelegramEnabled','sendTo','7969563OGwyiz','runAutopilot','dependencyInstallInProgress','callback','4UTidAl','loadSystemMode','3956326rdqVgN','stopService','setPresence','setupModeResetScheduler','updated','location','subscribeStates','geminiApiKey','LTM.trainingData.sequences','isGracePeriodActive','val','analysis.topology.structure','parse','motion','Gemini\x20AI\x20initialized.','scanForDevices','presenceDevices','log','stringify','notifyTelegramInstance','analysis.training.triggerComfort','communicate.request','./lib/recorder','TRAIN_SECURITY','setState','7502072bZNYGB','values','analysis.training.status','LTM.trainingData.thermodynamics','lastAlertState','exitTimer','isPresent','endsWith','map','debug','getState','matrix','bind','81hXySMY','send','cogni-living','Gemini\x20Init\x20Error:\x20','2540gCWGXD','common','VACATION','ltmJob','SYSTEM_DP_MODE','getOutsideTemperatureNumeric','enum.rooms.*','70tXKNDO','testApiKey','LTM.baselineStatus','NORMAL','inactivityThresholdHours','setupLtmScheduler','Activity-Level','.system.mode','getStateAsync','analysisInterval','includes','systemConfig','cancel','briefingJob','executeAutomationAction','Lernphase\x20(','3069385ajuiPk','createDailyDigest','.communicate.request','scanDevices','./lib/ai_agent','analysis.trigger','(((.+)+)+)+$','setupDriftAnalysisScheduler','getForeignObjectsAsync','createAllObjects','analysisHistory','LTM.dailyDigests','analysisTimer','getEnums','sendMorningBriefing','models/gemini-flash-latest','subscribeForeignStatesAsync','length','timestamp','getLtmData','triggerEnergyPrediction','getOverviewData','namespace','LTM.rawEventLog','./lib/dead_man','type','updateLocation','\x20Tage)','@iobroker/adapter-core','setupBriefingScheduler','command','minDaysForBaseline','triggerBriefing','TRAIN_ENERGY','SET_TOPOLOGY','info','LTM.triggerDailyDigest','checkAndInstall','object','forEach','exports','geminiModel','push','analysis.triggerBriefing','getHours','unload','ðŸ§ \x20Triggering\x20Security\x20Training...','triggerGaitAnalysis','message','eventHistory','updateTopology','ðŸ•¸ï¸\x20Manually\x20triggering\x20Topology\x20Update...','name','SYSTEM_MODES','dailyDigests','floor','ANALYZE_TREND','2000742HYfQPT','constructor','./lib/setup','initZombies','analysis.training.triggerHealth','getMinutes','ready','toLowerCase','devices','./lib/installer','system.presenceWho','config','runBaselineDriftAnalysis','setHours','analysis.automation.triggerAction','ðŸ•¸ï¸\x20Topology\x20Graph\x20manually\x20updated\x20by\x20user.','updateTopologyMatrix','./lib/scanner','TRAIN_COMFORT','currentSystemMode','analysis.training.triggerSecurity','./lib/python_bridge','main','runPythonHealthCheck','join','genAI','rawEventLog','fill','TRAIN_HEALTH','modeResetJob','setStateAsync','online','find','analysis.health.todayVector','onMessage','updateHealthVector','runGeminiAnalysis','pop','now','from','triggerDailyDigest','Sec-Training\x20started...','startService','ack','analysis.training.triggerTopology','search','470944RbiwRY','sensorLastValues','Training\x20Error:\x20','onUnload','startSystem','ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...','analysis.training.triggerEnergy','system.mode','Topology\x20Update\x20Error:\x20','./lib/topology','telegram','isProVersion','enum.functions.*','enum','driftAnalysisTimer','getForeignStateAsync','PYTHON_EXE','7ZdhbFJ','checkWifiPresence'];a0_0x4d28=function(){return _0x4b7c3e;};return a0_0x4d28();}const utils=require(a0_0x588062(0x162)),{GoogleGenerativeAI}=require('@google/generative-ai'),installer=require(a0_0x588062(0x188)),scanner=require(a0_0x588062(0x190)),schedulers=require('./lib/scheduler'),topology=require(a0_0x588062(0xf2)),setup=require(a0_0x588062(0x181)),recorder=require(a0_0x588062(0x11b)),pythonBridge=require(a0_0x588062(0x194)),aiAgent=require(a0_0x588062(0x14a)),deadMan=require(a0_0x588062(0x15e)),GEMINI_MODEL=a0_0x588062(0x155),ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};class CogniLiving extends utils['Adapter']{constructor(_0x11f4d3){const _0x316552=a0_0x588062;super({..._0x11f4d3,'name':_0x316552(0x12d)}),this[_0x316552(0x177)]=[],this[_0x316552(0x150)]=[],this[_0x316552(0x199)]=[],this[_0x316552(0x17c)]=[],this[_0x316552(0xea)]={},this[_0x316552(0x141)]={'latitude':0x0,'longitude':0x0,'city':''},this['isPresent']=!![],this['exitTimer']=null,this['exitGraceTimer']=null,this[_0x316552(0x10e)]=![],this[_0x316552(0x198)]=null,this[_0x316552(0x16f)]=null,this['currentSystemMode']=setup[_0x316552(0x17b)][_0x316552(0x139)],this['isProVersion']=![],this[_0x316552(0x122)]=![],this[_0x316552(0x152)]=null,this['ltmJob']=null,this['modeResetJob']=null,this[_0x316552(0xf7)]=null,this['briefingJob']=null,this[_0x316552(0x101)]=![],this['on'](_0x316552(0x185),this['onReady'][_0x316552(0x12a)](this)),this['on']('stateChange',this['onStateChange'][_0x316552(0x12a)](this)),this['on'](_0x316552(0x173),this[_0x316552(0xec)]['bind'](this)),this['on'](_0x316552(0x176),this[_0x316552(0x1a1)][_0x316552(0x12a)](this));}async['onReady'](){const _0x2a11ea=a0_0x588062;this[_0x2a11ea(0x116)][_0x2a11ea(0x169)]('cogni-living\x20adapter\x20starting\x20(v'+this['version']+')\x20-\x20Phase\x20C\x20(Dead\x20Man\x20Switch)');if(!installer[_0x2a11ea(0x16b)](this,()=>this['startSystem']()))return;}async[a0_0x588062(0xed)](){const _0x59fa25=a0_0x588062;await setup[_0x59fa25(0x182)](this);try{this['isProVersion']=await setup['checkLicense'](this[_0x59fa25(0x18a)]['licenseKey']);}catch(_0x4ef164){}if(!this[_0x59fa25(0x18a)][_0x59fa25(0x13a)]||this['config'][_0x59fa25(0x13a)]<0.1)this['config'][_0x59fa25(0x13a)]=0xc;await setup['initHistory'](this),await setup['initSystemConfig'](this);if(this['config'][_0x59fa25(0x10c)])try{this['genAI']=new GoogleGenerativeAI(this[_0x59fa25(0x18a)][_0x59fa25(0x10c)]),this['geminiModel']=this[_0x59fa25(0x198)]['getGenerativeModel']({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':'application/json'}}),this[_0x59fa25(0x116)][_0x59fa25(0x169)](_0x59fa25(0x113));}catch(_0x276b04){this['log'][_0x59fa25(0xfc)](_0x59fa25(0x12e)+_0x276b04['message']);}await setup[_0x59fa25(0x14f)](this),await this['loadSystemMode']();try{const _0x3b2208=await this[_0x59fa25(0x13e)]('LTM.rawEventLog');if(_0x3b2208&&_0x3b2208['val'])this['rawEventLog']=JSON['parse'](_0x3b2208['val']);}catch(_0x123958){this['rawEventLog']=[];}try{const _0x1a0efc=await this[_0x59fa25(0x13e)](_0x59fa25(0x151));if(_0x1a0efc&&_0x1a0efc[_0x59fa25(0x10f)])this[_0x59fa25(0x17c)]=JSON[_0x59fa25(0x111)](_0x1a0efc[_0x59fa25(0x10f)]);}catch(_0x28c21c){this['dailyDigests']=[];}const _0x24516c=this[_0x59fa25(0x17c)]['length']>=(this['config'][_0x59fa25(0x165)]||0x7)?'Aktiv\x20('+this[_0x59fa25(0x17c)][_0x59fa25(0x157)]+_0x59fa25(0x161):_0x59fa25(0x145)+this['dailyDigests'][_0x59fa25(0x157)]+'/'+(this[_0x59fa25(0x18a)][_0x59fa25(0x165)]||0x7)+')';await this[_0x59fa25(0x19d)](_0x59fa25(0x138),{'val':_0x24516c,'ack':!![]}),this[_0x59fa25(0x10b)](_0x59fa25(0x14b)),this[_0x59fa25(0x10b)](_0x59fa25(0x16a)),this[_0x59fa25(0x10b)](_0x59fa25(0xf0)),this['subscribeStates'](_0x59fa25(0x171)),this[_0x59fa25(0x10b)](_0x59fa25(0x18d)),this[_0x59fa25(0x10b)]('analysis.automation.autoApply'),this[_0x59fa25(0x10b)](_0x59fa25(0x193)),this['subscribeStates'](_0x59fa25(0x183)),this[_0x59fa25(0x10b)](_0x59fa25(0xef)),this[_0x59fa25(0x10b)](_0x59fa25(0x119)),this[_0x59fa25(0x10b)](_0x59fa25(0xe7));const _0x156f6f=this['config'][_0x59fa25(0x187)];if(_0x156f6f)for(const _0x505f2e of _0x156f6f){await this[_0x59fa25(0x156)](_0x505f2e['id']);}const _0xebb9c5=this[_0x59fa25(0x18a)][_0x59fa25(0x115)];if(_0xebb9c5)for(const _0xcdb3ca of _0xebb9c5){await this[_0x59fa25(0x156)](_0xcdb3ca);}if(this[_0x59fa25(0x18a)][_0x59fa25(0xfd)]&&this[_0x59fa25(0x18a)][_0x59fa25(0x118)])await this['subscribeForeignStatesAsync'](this[_0x59fa25(0x18a)]['notifyTelegramInstance']+_0x59fa25(0x148));setTimeout(()=>this[_0x59fa25(0xfb)](),0x1388);if(this['analysisTimer'])clearInterval(this[_0x59fa25(0x152)]);const _0x4f7055=this[_0x59fa25(0x18a)][_0x59fa25(0x13f)]||0xf;_0x4f7055>0x0&&(this['analysisTimer']=setInterval(()=>{const _0x44a8f4=_0x59fa25;this[_0x44a8f4(0x100)]();},_0x4f7055*0x3c*0x3e8)),schedulers[_0x59fa25(0x13b)](this,()=>aiAgent['createDailyDigest'](this,pythonBridge)),schedulers[_0x59fa25(0x108)](this),schedulers[_0x59fa25(0x14d)](this,()=>aiAgent[_0x59fa25(0x18b)](this)),schedulers[_0x59fa25(0x163)](this,()=>aiAgent[_0x59fa25(0x154)](this)),pythonBridge[_0x59fa25(0x1a9)](this,installer[_0x59fa25(0xf9)]),setTimeout(async()=>{const _0x2be7b9=_0x59fa25;await topology[_0x2be7b9(0x178)](this);try{const _0x1953dd=await this[_0x2be7b9(0x13e)](_0x2be7b9(0x110));if(_0x1953dd&&_0x1953dd['val'])pythonBridge[_0x2be7b9(0x12c)](this,_0x2be7b9(0x168),JSON[_0x2be7b9(0x111)](_0x1953dd[_0x2be7b9(0x10f)]));}catch(_0xa1229f){}this[_0x2be7b9(0x196)](),this[_0x2be7b9(0x175)](),this[_0x2be7b9(0x15a)](),this[_0x2be7b9(0x1a2)]();},0x1388);}[a0_0x588062(0xec)](_0x369d01){const _0x4ff9d0=a0_0x588062;if(this['analysisTimer'])clearInterval(this[_0x4ff9d0(0x152)]);if(this[_0x4ff9d0(0xf7)])clearInterval(this[_0x4ff9d0(0xf7)]);if(this[_0x4ff9d0(0x132)])this[_0x4ff9d0(0x132)]['cancel']();if(this[_0x4ff9d0(0x19c)])this[_0x4ff9d0(0x19c)][_0x4ff9d0(0x142)]();if(this[_0x4ff9d0(0x143)])this[_0x4ff9d0(0x143)]['cancel']();recorder['abortExitTimer'](this),pythonBridge[_0x4ff9d0(0x106)](this),_0x369d01();}async['onStateChange'](_0x5e8452,_0x1f71f0){const _0x184b18=a0_0x588062;if(!_0x1f71f0||this[_0x184b18(0x101)])return;if(_0x5e8452[_0x184b18(0x140)](_0x184b18(0xf3))&&_0x5e8452[_0x184b18(0x125)](_0x184b18(0x11a))&&_0x1f71f0['val'])return;if(_0x5e8452===this[_0x184b18(0x15c)]+_0x184b18(0x13d)){if(_0x1f71f0['val']&&Object[_0x184b18(0x11f)](setup[_0x184b18(0x17b)])[_0x184b18(0x140)](_0x1f71f0[_0x184b18(0x10f)])){this[_0x184b18(0x192)]=_0x1f71f0[_0x184b18(0x10f)];if(_0x1f71f0[_0x184b18(0x10f)]===setup[_0x184b18(0x17b)][_0x184b18(0x131)])await recorder['setPresence'](this,![]);else await recorder[_0x184b18(0x107)](this,!![]);}if(!_0x1f71f0[_0x184b18(0x1aa)])this[_0x184b18(0x11d)](_0x5e8452,{'val':this[_0x184b18(0x192)],'ack':!![]});return;}if(!_0x1f71f0[_0x184b18(0x1aa)]){_0x5e8452[_0x184b18(0x140)](_0x184b18(0x14b))&&_0x1f71f0[_0x184b18(0x10f)]&&(this['setState'](_0x5e8452,{'val':![],'ack':!![]}),aiAgent['runGeminiAnalysis'](this));if(_0x5e8452[_0x184b18(0x140)](_0x184b18(0x1a7))&&_0x1f71f0[_0x184b18(0x10f)]){this[_0x184b18(0x11d)](_0x5e8452,{'val':![],'ack':!![]});if(this[_0x184b18(0xf4)])aiAgent[_0x184b18(0x147)](this,pythonBridge);}_0x5e8452[_0x184b18(0x140)](_0x184b18(0x166))&&_0x1f71f0[_0x184b18(0x10f)]&&(this['setState'](_0x5e8452,{'val':![],'ack':!![]}),aiAgent[_0x184b18(0x154)](this));_0x5e8452[_0x184b18(0x140)]('automation.triggerAction')&&_0x1f71f0[_0x184b18(0x10f)]&&(this[_0x184b18(0x11d)](_0x5e8452,{'val':![],'ack':!![]}),aiAgent[_0x184b18(0x144)](this));if(_0x5e8452[_0x184b18(0x140)](_0x184b18(0x193))&&_0x1f71f0['val']){this[_0x184b18(0x11d)](_0x5e8452,{'val':![],'ack':!![]});if(this[_0x184b18(0xf4)])try{const _0x3c9d9b=await this[_0x184b18(0x13e)](_0x184b18(0x10d));if(_0x3c9d9b&&_0x3c9d9b['val']){const _0x3ad30e=JSON[_0x184b18(0x111)](_0x3c9d9b[_0x184b18(0x10f)]);this[_0x184b18(0x116)][_0x184b18(0x169)](_0x184b18(0x174)),this[_0x184b18(0x19d)](_0x184b18(0x120),{'val':_0x184b18(0x1a8),'ack':!![]}),pythonBridge[_0x184b18(0x12c)](this,_0x184b18(0x11c),{'sequences':_0x3ad30e});}}catch(_0x2385ef){this[_0x184b18(0x116)]['error'](_0x184b18(0xeb)+_0x2385ef[_0x184b18(0x176)]);}}if(_0x5e8452[_0x184b18(0x140)](_0x184b18(0x183))&&_0x1f71f0[_0x184b18(0x10f)]){this[_0x184b18(0x11d)](_0x5e8452,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x5187cb=await this[_0x184b18(0x13e)](_0x184b18(0x151));if(_0x5187cb&&_0x5187cb[_0x184b18(0x10f)])pythonBridge[_0x184b18(0x12c)](this,_0x184b18(0x19b),{'digests':JSON[_0x184b18(0x111)](_0x5187cb[_0x184b18(0x10f)])});}catch(_0x1fcf64){}}if(_0x5e8452[_0x184b18(0x140)](_0x184b18(0xef))&&_0x1f71f0[_0x184b18(0x10f)]){this[_0x184b18(0x11d)](_0x5e8452,{'val':![],'ack':!![]});if(this[_0x184b18(0xf4)])try{const _0x13e84e=await this[_0x184b18(0x13e)](_0x184b18(0x121));if(_0x13e84e&&_0x13e84e[_0x184b18(0x10f)])pythonBridge[_0x184b18(0x12c)](this,_0x184b18(0x167),{'points':JSON[_0x184b18(0x111)](_0x13e84e['val'])});}catch(_0x40fbc4){}}if(_0x5e8452[_0x184b18(0x140)](_0x184b18(0x119))&&_0x1f71f0['val']){this[_0x184b18(0x11d)](_0x5e8452,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x4022b3=await this[_0x184b18(0x13e)](_0x184b18(0x15d));_0x4022b3&&_0x4022b3[_0x184b18(0x10f)]&&(this[_0x184b18(0x116)]['info']('ðŸ›‹ï¸\x20Triggering\x20Comfort\x20Analysis\x20(Pattern\x20Mining)...'),pythonBridge[_0x184b18(0x12c)](this,_0x184b18(0x191),{'events':JSON[_0x184b18(0x111)](_0x4022b3[_0x184b18(0x10f)])}));}catch(_0x293742){}}_0x5e8452[_0x184b18(0x140)](_0x184b18(0xe7))&&_0x1f71f0['val']&&(this[_0x184b18(0x11d)](_0x5e8452,{'val':![],'ack':!![]}),this[_0x184b18(0x116)][_0x184b18(0x169)](_0x184b18(0x179)),topology['updateTopology'](this));return;}if(this[_0x184b18(0x18a)]['presenceDevices']&&this['config'][_0x184b18(0x115)][_0x184b18(0x140)](_0x5e8452)){await this[_0x184b18(0xfb)]();return;}const _0x2d1514=(this[_0x184b18(0x18a)]['devices']||[])[_0x184b18(0x19f)](_0x431440=>_0x431440['id']===_0x5e8452);if(_0x2d1514){const _0x260732=await recorder['processSensorEvent'](this,_0x5e8452,_0x1f71f0,_0x2d1514);_0x260732&&_0x260732[_0x184b18(0x15f)]===_0x184b18(0x112)&&_0x260732[_0x184b18(0x10a)]&&this['isProVersion']&&deadMan[_0x184b18(0x160)](this,_0x260732['location']);}}async[a0_0x588062(0x1a1)](_0x431fe2){const _0x138d9f=a0_0x588062;if(typeof _0x431fe2===_0x138d9f(0x16c)&&_0x431fe2[_0x138d9f(0x176)]){if(_0x431fe2[_0x138d9f(0x164)]===_0x138d9f(0x137)){}else{if(_0x431fe2[_0x138d9f(0x164)]===_0x138d9f(0x149))try{const _0x3e511d=await scanner[_0x138d9f(0x114)](this,_0x431fe2[_0x138d9f(0x176)]||{});this['sendTo'](_0x431fe2[_0x138d9f(0x1a6)],_0x431fe2[_0x138d9f(0x164)],{'success':!![],'devices':_0x3e511d},_0x431fe2['callback']);}catch(_0x2882dd){this[_0x138d9f(0xfe)](_0x431fe2[_0x138d9f(0x1a6)],_0x431fe2[_0x138d9f(0x164)],{'success':![],'error':_0x2882dd[_0x138d9f(0x176)]},_0x431fe2[_0x138d9f(0x102)]);}else{if(_0x431fe2['command']===_0x138d9f(0x18f)){const {matrix:_0x10058f}=_0x431fe2[_0x138d9f(0x176)];try{const _0x224158=await this[_0x138d9f(0x13e)](_0x138d9f(0x110));if(_0x224158&&_0x224158[_0x138d9f(0x10f)]){const _0x3ac30a=JSON['parse'](_0x224158[_0x138d9f(0x10f)]);_0x3ac30a[_0x138d9f(0x129)]=_0x10058f,_0x3ac30a[_0x138d9f(0x109)]=Date[_0x138d9f(0x1a5)](),await this['setStateAsync'](_0x138d9f(0x110),{'val':JSON[_0x138d9f(0x117)](_0x3ac30a),'ack':!![]}),this['log'][_0x138d9f(0x169)](_0x138d9f(0x18e)),pythonBridge[_0x138d9f(0x12c)](this,_0x138d9f(0x168),_0x3ac30a);}this['sendTo'](_0x431fe2[_0x138d9f(0x1a6)],_0x431fe2['command'],{'success':!![]},_0x431fe2['callback']);}catch(_0x198304){this[_0x138d9f(0x116)]['error'](_0x138d9f(0xf1)+_0x198304[_0x138d9f(0x176)]);}}else{if(_0x431fe2[_0x138d9f(0x164)]===_0x138d9f(0x159))this[_0x138d9f(0xfe)](_0x431fe2[_0x138d9f(0x1a6)],_0x431fe2[_0x138d9f(0x164)],{'success':!![],'dailyDigests':this['dailyDigests']||[],'analysisHistory':this[_0x138d9f(0x150)]||[]},_0x431fe2[_0x138d9f(0x102)]);else{if(_0x431fe2[_0x138d9f(0x164)]===_0x138d9f(0x15b)){const _0x47342f=this[_0x138d9f(0x17c)]['length'],_0x36302e=new Array(0x18)[_0x138d9f(0x19a)](0x0),_0x165f5c=new Date()[_0x138d9f(0x18c)](0x0,0x0,0x0,0x0);this['eventHistory']&&this['eventHistory']['forEach'](_0x1ca86b=>{const _0xdc7204=_0x138d9f;if(_0x1ca86b[_0xdc7204(0x158)]>=_0x165f5c){const _0x169678=new Date(_0x1ca86b['timestamp'])[_0xdc7204(0x172)]();if(_0x169678>=0x0&&_0x169678<0x18)_0x36302e[_0x169678]++;}}),this['sendTo'](_0x431fe2['from'],_0x431fe2[_0x138d9f(0x164)],{'success':!![],'eventHistory':this[_0x138d9f(0x177)]['slice'](0x0,0xf),'stats':{'digestCount':_0x47342f,'isPresent':this[_0x138d9f(0x124)],'hourlyActivity':_0x36302e},'automation':{'detected':![]}},_0x431fe2['callback']);}else{if(_0x431fe2['command']===_0x138d9f(0x153)){const _0x42a58c=await this[_0x138d9f(0x14e)](_0x138d9f(0xf5),_0x138d9f(0xf6)),_0x55ffeb=[];if(_0x42a58c)for(const _0x47db01 in _0x42a58c){const _0x5cd161=_0x42a58c[_0x47db01],_0x3ac069=(_0x5cd161['common']&&typeof _0x5cd161[_0x138d9f(0x130)]['name']===_0x138d9f(0x16c)?_0x5cd161[_0x138d9f(0x130)][_0x138d9f(0x17a)]['de']:_0x5cd161[_0x138d9f(0x130)][_0x138d9f(0x17a)])||_0x5cd161['common'][_0x138d9f(0x17a)];_0x55ffeb[_0x138d9f(0x170)]({'id':_0x47db01,'name':_0x3ac069});}const _0x53ee76=await this[_0x138d9f(0x14e)](_0x138d9f(0x135),_0x138d9f(0xf6)),_0x1e9c74=[];if(_0x53ee76)for(const _0xc90106 in _0x53ee76){const _0x23d675=_0x53ee76[_0xc90106],_0x26611a=(_0x23d675[_0x138d9f(0x130)]&&typeof _0x23d675['common'][_0x138d9f(0x17a)]==='object'?_0x23d675[_0x138d9f(0x130)][_0x138d9f(0x17a)]['de']:_0x23d675[_0x138d9f(0x130)][_0x138d9f(0x17a)])||_0xc90106['split']('.')[_0x138d9f(0x1a4)]();_0x1e9c74[_0x138d9f(0x170)](_0x26611a);}this[_0x138d9f(0xfe)](_0x431fe2[_0x138d9f(0x1a6)],_0x431fe2['command'],{'success':!![],'enums':_0x55ffeb,'rooms':_0x1e9c74},_0x431fe2['callback']);}}}}}}}}async[a0_0x588062(0x104)](){const _0x4b9d0a=a0_0x588062;try{const _0x52ae75=await this['getStateAsync'](setup[_0x4b9d0a(0x133)]);_0x52ae75&&_0x52ae75['val']&&Object[_0x4b9d0a(0x11f)](setup[_0x4b9d0a(0x17b)])[_0x4b9d0a(0x140)](_0x52ae75[_0x4b9d0a(0x10f)])?this[_0x4b9d0a(0x192)]=_0x52ae75[_0x4b9d0a(0x10f)]:(this[_0x4b9d0a(0x192)]=setup['SYSTEM_MODES'][_0x4b9d0a(0x139)],await this[_0x4b9d0a(0x19d)](setup[_0x4b9d0a(0x133)],{'val':setup['SYSTEM_MODES']['NORMAL'],'ack':!![]}));}catch(_0x1cea23){this[_0x4b9d0a(0x192)]=setup[_0x4b9d0a(0x17b)][_0x4b9d0a(0x139)];}}async[a0_0x588062(0xfb)](){const _0xb6b162=a0_0x588062;try{const _0xd72ae5=this[_0xb6b162(0x18a)][_0xb6b162(0x115)]||[];let _0x22c1c9=![];const _0xc0b1b7=[];for(const _0x3eb308 of _0xd72ae5){try{const _0x23d2ff=await this[_0xb6b162(0xf8)](_0x3eb308);_0x23d2ff&&(_0x23d2ff[_0xb6b162(0x10f)]===!![]||_0x23d2ff[_0xb6b162(0x10f)]===_0xb6b162(0x19e)||_0x23d2ff[_0xb6b162(0x10f)]===0x1)&&(_0x22c1c9=!![],_0xc0b1b7[_0xb6b162(0x170)](_0x3eb308));}catch(_0x4e6385){}}return await this[_0xb6b162(0x19d)](_0xb6b162(0x189),{'val':_0xc0b1b7[_0xb6b162(0x197)](',\x20'),'ack':!![]}),_0x22c1c9&&(this[_0xb6b162(0x123)]&&(this[_0xb6b162(0x116)]['info']('WiFi\x20Presence\x20detected.'),recorder['abortExitTimer'](this)),!this[_0xb6b162(0x124)]&&this[_0xb6b162(0x192)]===setup[_0xb6b162(0x17b)][_0xb6b162(0x139)]&&await recorder[_0xb6b162(0x107)](this,!![])),_0x22c1c9;}catch(_0x57260a){return![];}}async['runAutopilot'](){const _0x56081c=a0_0x588062;this[_0x56081c(0x116)][_0x56081c(0x127)](_0x56081c(0xee)),await aiAgent[_0x56081c(0x1a3)](this),this['updateHealthVector'](),this[_0x56081c(0x175)](),this[_0x56081c(0x15a)]();}[a0_0x588062(0x175)](){const _0xd8f0f2=a0_0x588062;if(!this[_0xd8f0f2(0xf4)])return;try{this[_0xd8f0f2(0x128)](_0xd8f0f2(0x10d),(_0x290256,_0x239229)=>{const _0x121ec0=_0xd8f0f2;_0x239229&&_0x239229['val']&&pythonBridge[_0x121ec0(0x12c)](this,'ANALYZE_GAIT',{'sequences':JSON[_0x121ec0(0x111)](_0x239229[_0x121ec0(0x10f)])});});}catch(_0x40445c){}}async[a0_0x588062(0x15a)](){const _0x98727d=a0_0x588062;if(!this[_0x98727d(0xf4)])return;try{const _0x4b6da0=await recorder[_0x98727d(0x134)](this);if(_0x4b6da0===null)return;const _0x4c9c9e={},_0x43850f=this[_0x98727d(0x18a)]['devices']||[];for(const _0x169328 of _0x43850f){if(_0x169328['type']==='temperature'&&_0x169328[_0x98727d(0x10a)]){const _0x25adec=this[_0x98727d(0xea)][_0x169328['id']];if(_0x25adec!==undefined)_0x4c9c9e[_0x169328['location']]=_0x25adec;}}Object['keys'](_0x4c9c9e)[_0x98727d(0x157)]>0x0&&pythonBridge[_0x98727d(0x12c)](this,'PREDICT_ENERGY',{'current_temps':_0x4c9c9e,'t_out':_0x4b6da0});}catch(_0x39f118){}}[a0_0x588062(0x1a2)](){const _0x35cc3b=a0_0x588062;if(!this[_0x35cc3b(0x199)]||this[_0x35cc3b(0x199)][_0x35cc3b(0x157)]===0x0)return;const _0x1899a2=new Array(0x60)[_0x35cc3b(0x19a)](0x0),_0x54d972=new Date()[_0x35cc3b(0x18c)](0x0,0x0,0x0,0x0);this['rawEventLog'][_0x35cc3b(0x16d)](_0x626180=>{const _0x16415a=_0x35cc3b,_0x42899b=new Date(_0x626180[_0x16415a(0x158)]);if(_0x42899b['getTime']()>=_0x54d972){const _0x271510=_0x42899b[_0x16415a(0x172)](),_0x23851c=_0x42899b[_0x16415a(0x184)](),_0x3613dd=_0x271510*0x4+Math[_0x16415a(0x17d)](_0x23851c/0xf);if(_0x3613dd>=0x0&&_0x3613dd<0x60)_0x1899a2[_0x3613dd]++;}}),this[_0x35cc3b(0x19d)](_0x35cc3b(0x1a0),{'val':JSON['stringify'](_0x1899a2),'ack':!![]});}[a0_0x588062(0x196)](){const _0x231dbf=a0_0x588062;if(!this['dailyDigests']||this[_0x231dbf(0x17c)]['length']<0x2)return;const _0xb2ea6=this[_0x231dbf(0x17c)][_0x231dbf(0x126)](_0x1f9d9e=>{const _0x54ca37=_0x231dbf,_0xd2234=(_0x1f9d9e['activityLevel']||'')[_0x54ca37(0x186)]();return ACTIVITY_LEVEL_MAP[_0xd2234]||0x32;});pythonBridge[_0x231dbf(0x12c)](this,_0x231dbf(0x17e),{'values':_0xb2ea6,'tag':_0x231dbf(0x13c)});}}if(require[a0_0x588062(0x195)]!==module)module[a0_0x588062(0x16e)]=_0x4b0488=>new CogniLiving(_0x4b0488);else new CogniLiving();