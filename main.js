const a0_0x20e0a3=a0_0x2b77;(function(_0x14bbe2,_0x51dd03){const _0x79807c=a0_0x2b77,_0x1ffc22=_0x14bbe2();while(!![]){try{const _0x2fb086=-parseInt(_0x79807c(0x202))/0x1*(parseInt(_0x79807c(0x1e5))/0x2)+parseInt(_0x79807c(0x269))/0x3+-parseInt(_0x79807c(0x22d))/0x4*(parseInt(_0x79807c(0x1d9))/0x5)+parseInt(_0x79807c(0x26c))/0x6*(-parseInt(_0x79807c(0x20f))/0x7)+parseInt(_0x79807c(0x1df))/0x8*(parseInt(_0x79807c(0x26d))/0x9)+-parseInt(_0x79807c(0x1cf))/0xa*(parseInt(_0x79807c(0x1bc))/0xb)+-parseInt(_0x79807c(0x228))/0xc*(-parseInt(_0x79807c(0x221))/0xd);if(_0x2fb086===_0x51dd03)break;else _0x1ffc22['push'](_0x1ffc22['shift']());}catch(_0x2fcd29){_0x1ffc22['push'](_0x1ffc22['shift']());}}}(a0_0x366b,0x25623));const a0_0x14f543=(function(){let _0x420c3b=!![];return function(_0x18ddff,_0x3286cb){const _0x4438c2=_0x420c3b?function(){const _0x43fd5c=a0_0x2b77;if(_0x3286cb){const _0x416fcb=_0x3286cb[_0x43fd5c(0x282)](_0x18ddff,arguments);return _0x3286cb=null,_0x416fcb;}}:function(){};return _0x420c3b=![],_0x4438c2;};}()),a0_0x352acc=a0_0x14f543(this,function(){const _0x181e5d=a0_0x2b77;return a0_0x352acc['toString']()[_0x181e5d(0x211)]('(((.+)+)+)+$')['toString']()[_0x181e5d(0x280)](a0_0x352acc)[_0x181e5d(0x211)](_0x181e5d(0x227));});function a0_0x2b77(_0x449f08,_0x22bc5d){const _0x3811c0=a0_0x366b();return a0_0x2b77=function(_0x352acc,_0x14f543){_0x352acc=_0x352acc-0x1b0;let _0x366b4f=_0x3811c0[_0x352acc];return _0x366b4f;},a0_0x2b77(_0x449f08,_0x22bc5d);}a0_0x352acc();'use strict';const utils=require('@iobroker/adapter-core'),{GoogleGenerativeAI}=require('@google/generative-ai'),installer=require(a0_0x20e0a3(0x1fa)),scanner=require(a0_0x20e0a3(0x235)),schedulers=require('./lib/scheduler'),topology=require(a0_0x20e0a3(0x1cb)),setup=require(a0_0x20e0a3(0x255)),recorder=require('./lib/recorder'),pythonBridge=require(a0_0x20e0a3(0x205)),aiAgent=require(a0_0x20e0a3(0x287)),deadMan=require(a0_0x20e0a3(0x23e)),GEMINI_MODEL=a0_0x20e0a3(0x267),ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};function a0_0x366b(){const _0xc6b31=['triggerDailyDigest','activityLevel','setupModeResetScheduler','log','getGenerativeModel','./lib/setup','subscribeForeignStatesAsync','endsWith','LTM.rawEventLog','sort','setPresence','\x20Tage)','Standard','common','_calName','createDailyDigest','onMessage','Gesendet','telegram','sensorLastValues','from','apiKey','keys','models/gemini-flash-latest','Test','390852QAWQbM','geminiModel','message','6462Kaycfi','21267Zqhvkx','SYSTEM_MODES','onStateChange','ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...','dailyDigests','geminiApiKey','triggerEnergyPrediction','Gemini\x20Init\x20Error:\x20','abortExitTimer','analysis.automation.triggerAction','temperature','briefingJob','sendMorningBriefing','analysis.topology.structure','Lernphase\x20(','executeAutomationAction','Aktiv\x20(','instance','Instanz\x20nicht\x20gefunden','constructor','getStateAsync','apply','config','setupBriefingScheduler','startSystem','push','./lib/ai_agent','Kein\x20API\x20Key\x20Ã¼bergeben','stopService','values','analysis.training.triggerHealth','floor','dependencyInstallInProgress','notifyTelegramInstance','send','command','notifyTelegramEnabled','isProVersion','Gemini\x20AI\x20initialized.','cancel','stringify','948607xsutpo','application/json','analysis.training.triggerSecurity','setupDriftAnalysisScheduler','genAI','toLowerCase','system.presenceWho','stateChange','ANALYZE_GAIT','bind','ltmJob','analysis.automation.autoApply','enum.functions.*','getHours','exitGraceTimer','./lib/topology','system.adapter.','SYSTEM_DP_MODE','LTM.dailyDigests','10mFwHQX','type','updateTopologyMatrix','ack',')\x20-\x20Phase\x20C\x20(Hardened)','currentSystemMode','triggerGaitAnalysis','enum','checkLicense','automation.triggerAction','5oqFDQz','Keine\x20Antwort\x20von\x20Gemini','updateLocation','initHistory','sendTo','Adapter','32QDgxPr','getEnums','.data.table','online','Verbindung\x20erfolgreich!','val','2748VrabDM','analysis.training.status','Activity-Level','isArray','analysis.training.triggerEnergy','.communicate.request','analysis.triggerBriefing','TRAIN_SECURITY','isPresent','forEach','checkWifiPresence','.system.mode','driftAnalysisTimer','main','setupLtmScheduler','Kein\x20Kalender-Adapter','minDaysForBaseline','getTime','object','updateTopology','cogni-living\x20adapter\x20starting\x20(v','./lib/installer','updateHealthVector','onReady','initZombies','fill','weatherInstance','length','updated','75lhInrd','sendNotification','ANALYZE_TREND','./lib/python_bridge','presenceDevices','inactivityThresholdHours','location','PREDICT_ENERGY','LTM.trainingData.sequences','communicate.request','setState','parse','devices','763pQGudZ','debug','search','getOverviewData','subscribeStates','text','Daten\x20nicht\x20verfÃ¼gbar','eventHistory','cogni-living','calendarName','getState','isGracePeriodActive','runGeminiAnalysis','NORMAL','calendarInstance','ready','TRAIN_COMFORT','response','6633068BABXPg','licenseKey','analysis.trigger','exports','rawEventLog','loadSystemMode','(((.+)+)+)+$','12WOUfmj','getOutsideTemperatureNumeric','getForeignObjectsAsync','scanDevices','LTM.baselineStatus','760676xgoUpy','timestamp','WiFi\x20Presence\x20detected.','SET_TOPOLOGY','analysisHistory','split','add','error','./lib/scanner','Fehler:\x20','runPythonHealthCheck','runAutopilot','modeResetJob','analysis.training.triggerComfort','setHours','getForeignStateAsync','name','./lib/dead_man','onUnload','TRAIN_ENERGY','find','motion','analysisTimer','systemConfig','info','enum.rooms.*','pop','Notification\x20Test\x20Failed:\x20','callback','setStateAsync','slice','lastAlertState','analysisInterval','includes','map'];a0_0x366b=function(){return _0xc6b31;};return a0_0x366b();}class CogniLiving extends utils[a0_0x20e0a3(0x1de)]{constructor(_0x58aacd){const _0x2339ae=a0_0x20e0a3;super({..._0x58aacd,'name':_0x2339ae(0x217)}),this[_0x2339ae(0x216)]=[],this[_0x2339ae(0x231)]=[],this['rawEventLog']=[],this[_0x2339ae(0x271)]=[],this[_0x2339ae(0x263)]={},this[_0x2339ae(0x244)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x2339ae(0x1ed)]=!![],this['exitTimer']=null,this[_0x2339ae(0x1ca)]=null,this[_0x2339ae(0x21a)]=![],this[_0x2339ae(0x1c0)]=null,this[_0x2339ae(0x26a)]=null,this[_0x2339ae(0x1d4)]=setup[_0x2339ae(0x26e)]['NORMAL'],this[_0x2339ae(0x1b8)]=![],this[_0x2339ae(0x24c)]=![],this['analysisTimer']=null,this[_0x2339ae(0x1c6)]=null,this[_0x2339ae(0x239)]=null,this[_0x2339ae(0x1f1)]=null,this['briefingJob']=null,this[_0x2339ae(0x1b3)]=![],this['on'](_0x2339ae(0x21e),this[_0x2339ae(0x1fc)][_0x2339ae(0x1c5)](this)),this['on'](_0x2339ae(0x1c3),this[_0x2339ae(0x26f)][_0x2339ae(0x1c5)](this)),this['on']('unload',this[_0x2339ae(0x23f)][_0x2339ae(0x1c5)](this)),this['on'](_0x2339ae(0x26b),this[_0x2339ae(0x260)][_0x2339ae(0x1c5)](this));}async[a0_0x20e0a3(0x1fc)](){const _0x5c4ad1=a0_0x20e0a3;this[_0x5c4ad1(0x253)][_0x5c4ad1(0x245)](_0x5c4ad1(0x1f9)+this['version']+_0x5c4ad1(0x1d3));if(!installer['checkAndInstall'](this,()=>this[_0x5c4ad1(0x285)]()))return;}async[a0_0x20e0a3(0x285)](){const _0x2b20f3=a0_0x20e0a3;await setup[_0x2b20f3(0x1fd)](this);try{this['isProVersion']=await setup[_0x2b20f3(0x1d7)](this['config'][_0x2b20f3(0x222)]);}catch(_0x10d276){}if(!this[_0x2b20f3(0x283)]['inactivityThresholdHours']||this['config'][_0x2b20f3(0x207)]<0.1)this[_0x2b20f3(0x283)]['inactivityThresholdHours']=0xc;await setup[_0x2b20f3(0x1dc)](this),await setup['initSystemConfig'](this);if(this['config'][_0x2b20f3(0x272)])try{this[_0x2b20f3(0x1c0)]=new GoogleGenerativeAI(this[_0x2b20f3(0x283)][_0x2b20f3(0x272)]),this[_0x2b20f3(0x26a)]=this['genAI'][_0x2b20f3(0x254)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x2b20f3(0x1bd)}}),this[_0x2b20f3(0x253)][_0x2b20f3(0x245)](_0x2b20f3(0x1b9));}catch(_0x5e87f2){this[_0x2b20f3(0x253)][_0x2b20f3(0x234)](_0x2b20f3(0x274)+_0x5e87f2[_0x2b20f3(0x26b)]);}await setup['createAllObjects'](this),await this[_0x2b20f3(0x226)]();try{const _0x5bd3a0=await this['getStateAsync'](_0x2b20f3(0x258));if(_0x5bd3a0&&_0x5bd3a0['val'])this[_0x2b20f3(0x225)]=JSON['parse'](_0x5bd3a0[_0x2b20f3(0x1e4)]);}catch(_0x196f80){this[_0x2b20f3(0x225)]=[];}try{const _0x3ed828=await this['getStateAsync'](_0x2b20f3(0x1ce));if(_0x3ed828&&_0x3ed828[_0x2b20f3(0x1e4)])this['dailyDigests']=JSON[_0x2b20f3(0x20d)](_0x3ed828[_0x2b20f3(0x1e4)]);}catch(_0x1f6089){this[_0x2b20f3(0x271)]=[];}const _0x1fd819=this[_0x2b20f3(0x271)]['length']>=(this[_0x2b20f3(0x283)]['minDaysForBaseline']||0x7)?_0x2b20f3(0x27d)+this[_0x2b20f3(0x271)][_0x2b20f3(0x200)]+_0x2b20f3(0x25b):_0x2b20f3(0x27b)+this[_0x2b20f3(0x271)][_0x2b20f3(0x200)]+'/'+(this[_0x2b20f3(0x283)][_0x2b20f3(0x1f5)]||0x7)+')';await this[_0x2b20f3(0x24a)](_0x2b20f3(0x22c),{'val':_0x1fd819,'ack':!![]}),this[_0x2b20f3(0x213)]('analysis.trigger'),this[_0x2b20f3(0x213)]('LTM.triggerDailyDigest'),this[_0x2b20f3(0x213)]('system.mode'),this['subscribeStates'](_0x2b20f3(0x1eb)),this['subscribeStates'](_0x2b20f3(0x276)),this[_0x2b20f3(0x213)](_0x2b20f3(0x1c7)),this[_0x2b20f3(0x213)](_0x2b20f3(0x1be)),this[_0x2b20f3(0x213)]('analysis.training.triggerHealth'),this[_0x2b20f3(0x213)](_0x2b20f3(0x1e9)),this[_0x2b20f3(0x213)](_0x2b20f3(0x23a)),this[_0x2b20f3(0x213)]('analysis.training.triggerTopology');const _0x479619=this[_0x2b20f3(0x283)][_0x2b20f3(0x20e)];if(_0x479619)for(const _0x22838c of _0x479619){await this[_0x2b20f3(0x256)](_0x22838c['id']);}const _0x246f73=this[_0x2b20f3(0x283)][_0x2b20f3(0x206)];if(_0x246f73)for(const _0x126fc0 of _0x246f73){await this[_0x2b20f3(0x256)](_0x126fc0);}if(this[_0x2b20f3(0x283)][_0x2b20f3(0x1b7)]&&this['config'][_0x2b20f3(0x1b4)])await this[_0x2b20f3(0x256)](this[_0x2b20f3(0x283)][_0x2b20f3(0x1b4)]+_0x2b20f3(0x1ea));setTimeout(()=>this[_0x2b20f3(0x1ef)](),0x1388);if(this[_0x2b20f3(0x243)])clearInterval(this[_0x2b20f3(0x243)]);const _0x38ad38=this[_0x2b20f3(0x283)][_0x2b20f3(0x24d)]||0xf;_0x38ad38>0x0&&(this[_0x2b20f3(0x243)]=setInterval(()=>{const _0x2c4808=_0x2b20f3;this[_0x2c4808(0x238)]();},_0x38ad38*0x3c*0x3e8)),schedulers[_0x2b20f3(0x1f3)](this,()=>aiAgent[_0x2b20f3(0x25f)](this,pythonBridge)),schedulers[_0x2b20f3(0x252)](this),schedulers[_0x2b20f3(0x1bf)](this,()=>aiAgent['runBaselineDriftAnalysis'](this)),schedulers[_0x2b20f3(0x284)](this,()=>aiAgent[_0x2b20f3(0x279)](this)),pythonBridge['startService'](this,installer['PYTHON_EXE']),setTimeout(async()=>{const _0x464721=_0x2b20f3;await topology[_0x464721(0x1f8)](this);try{const _0x111cf5=await this[_0x464721(0x281)](_0x464721(0x27a));if(_0x111cf5&&_0x111cf5[_0x464721(0x1e4)])pythonBridge[_0x464721(0x1b5)](this,_0x464721(0x230),JSON[_0x464721(0x20d)](_0x111cf5[_0x464721(0x1e4)]));}catch(_0xbdfc48){}this[_0x464721(0x237)](),this['triggerGaitAnalysis'](),this['triggerEnergyPrediction'](),this[_0x464721(0x1fb)]();},0x1388);}[a0_0x20e0a3(0x23f)](_0x3a6c38){const _0x261cb0=a0_0x20e0a3;if(this[_0x261cb0(0x243)])clearInterval(this[_0x261cb0(0x243)]);if(this[_0x261cb0(0x1f1)])clearInterval(this[_0x261cb0(0x1f1)]);if(this[_0x261cb0(0x1c6)])this[_0x261cb0(0x1c6)][_0x261cb0(0x1ba)]();if(this[_0x261cb0(0x239)])this[_0x261cb0(0x239)][_0x261cb0(0x1ba)]();if(this[_0x261cb0(0x278)])this[_0x261cb0(0x278)]['cancel']();recorder['abortExitTimer'](this),pythonBridge[_0x261cb0(0x289)](this),_0x3a6c38();}async[a0_0x20e0a3(0x26f)](_0x5720dc,_0x14f8a8){const _0x264afc=a0_0x20e0a3;if(!_0x14f8a8||this['dependencyInstallInProgress'])return;if(_0x5720dc['includes'](_0x264afc(0x262))&&_0x5720dc[_0x264afc(0x257)](_0x264afc(0x20b))&&_0x14f8a8['val'])return;if(_0x5720dc===this['namespace']+_0x264afc(0x1f0)){if(_0x14f8a8['val']&&Object[_0x264afc(0x1b0)](setup['SYSTEM_MODES'])['includes'](_0x14f8a8['val'])){this['currentSystemMode']=_0x14f8a8['val'];if(_0x14f8a8[_0x264afc(0x1e4)]===setup[_0x264afc(0x26e)]['VACATION'])await recorder[_0x264afc(0x25a)](this,![]);else await recorder[_0x264afc(0x25a)](this,!![]);}if(!_0x14f8a8[_0x264afc(0x1d2)])this[_0x264afc(0x20c)](_0x5720dc,{'val':this[_0x264afc(0x1d4)],'ack':!![]});return;}if(!_0x14f8a8[_0x264afc(0x1d2)]){_0x5720dc[_0x264afc(0x24e)](_0x264afc(0x223))&&_0x14f8a8[_0x264afc(0x1e4)]&&(this['setState'](_0x5720dc,{'val':![],'ack':!![]}),aiAgent['runGeminiAnalysis'](this));if(_0x5720dc[_0x264afc(0x24e)](_0x264afc(0x250))&&_0x14f8a8[_0x264afc(0x1e4)]){this[_0x264afc(0x20c)](_0x5720dc,{'val':![],'ack':!![]});if(this[_0x264afc(0x1b8)])aiAgent[_0x264afc(0x25f)](this,pythonBridge);}_0x5720dc[_0x264afc(0x24e)]('triggerBriefing')&&_0x14f8a8[_0x264afc(0x1e4)]&&(this['setState'](_0x5720dc,{'val':![],'ack':!![]}),aiAgent[_0x264afc(0x279)](this));_0x5720dc[_0x264afc(0x24e)](_0x264afc(0x1d8))&&_0x14f8a8[_0x264afc(0x1e4)]&&(this[_0x264afc(0x20c)](_0x5720dc,{'val':![],'ack':!![]}),aiAgent[_0x264afc(0x27c)](this));if(_0x5720dc[_0x264afc(0x24e)]('analysis.training.triggerSecurity')&&_0x14f8a8['val']){this[_0x264afc(0x20c)](_0x5720dc,{'val':![],'ack':!![]});if(this[_0x264afc(0x1b8)])try{const _0x1595a9=await this[_0x264afc(0x281)](_0x264afc(0x20a));if(_0x1595a9&&_0x1595a9[_0x264afc(0x1e4)]){const _0x593e28=JSON['parse'](_0x1595a9[_0x264afc(0x1e4)]);this[_0x264afc(0x24a)](_0x264afc(0x1e6),{'val':'Sec-Training\x20started...','ack':!![]}),pythonBridge[_0x264afc(0x1b5)](this,_0x264afc(0x1ec),{'sequences':_0x593e28});}}catch(_0x35602b){}}if(_0x5720dc[_0x264afc(0x24e)](_0x264afc(0x1b1))&&_0x14f8a8[_0x264afc(0x1e4)]){this['setState'](_0x5720dc,{'val':![],'ack':!![]});if(this[_0x264afc(0x1b8)])try{const _0x2f62a5=await this[_0x264afc(0x281)](_0x264afc(0x1ce));if(_0x2f62a5&&_0x2f62a5[_0x264afc(0x1e4)])pythonBridge[_0x264afc(0x1b5)](this,'TRAIN_HEALTH',{'digests':JSON[_0x264afc(0x20d)](_0x2f62a5['val'])});}catch(_0xe45175){}}if(_0x5720dc[_0x264afc(0x24e)](_0x264afc(0x1e9))&&_0x14f8a8[_0x264afc(0x1e4)]){this[_0x264afc(0x20c)](_0x5720dc,{'val':![],'ack':!![]});if(this[_0x264afc(0x1b8)])try{const _0x5f0b23=await this[_0x264afc(0x281)]('LTM.trainingData.thermodynamics');if(_0x5f0b23&&_0x5f0b23['val'])pythonBridge['send'](this,_0x264afc(0x240),{'points':JSON[_0x264afc(0x20d)](_0x5f0b23[_0x264afc(0x1e4)])});}catch(_0x29b5f4){}}if(_0x5720dc[_0x264afc(0x24e)]('analysis.training.triggerComfort')&&_0x14f8a8[_0x264afc(0x1e4)]){this[_0x264afc(0x20c)](_0x5720dc,{'val':![],'ack':!![]});if(this[_0x264afc(0x1b8)])try{const _0x1edcbd=await this[_0x264afc(0x281)]('LTM.rawEventLog');if(_0x1edcbd&&_0x1edcbd['val'])pythonBridge['send'](this,_0x264afc(0x21f),{'events':JSON[_0x264afc(0x20d)](_0x1edcbd['val'])});}catch(_0x4df352){}}_0x5720dc[_0x264afc(0x24e)]('analysis.training.triggerTopology')&&_0x14f8a8['val']&&(this['setState'](_0x5720dc,{'val':![],'ack':!![]}),topology['updateTopology'](this));return;}if(this[_0x264afc(0x283)][_0x264afc(0x206)]&&this[_0x264afc(0x283)][_0x264afc(0x206)]['includes'](_0x5720dc)){await this[_0x264afc(0x1ef)]();return;}const _0x4506a7=(this[_0x264afc(0x283)]['devices']||[])[_0x264afc(0x241)](_0x343c34=>_0x343c34['id']===_0x5720dc);if(_0x4506a7){const _0x5ba2f8=await recorder['processSensorEvent'](this,_0x5720dc,_0x14f8a8,_0x4506a7);_0x5ba2f8&&_0x5ba2f8[_0x264afc(0x1d0)]===_0x264afc(0x242)&&_0x5ba2f8[_0x264afc(0x208)]&&this[_0x264afc(0x1b8)]&&deadMan[_0x264afc(0x1db)](this,_0x5ba2f8[_0x264afc(0x208)]);}}async[a0_0x20e0a3(0x260)](_0x147ab2){const _0x4f87b9=a0_0x20e0a3;if(typeof _0x147ab2===_0x4f87b9(0x1f7)&&_0x147ab2[_0x4f87b9(0x26b)]){if(_0x147ab2[_0x4f87b9(0x1b6)]==='testApiKey')try{const _0x2de2cb=_0x147ab2[_0x4f87b9(0x26b)][_0x4f87b9(0x265)];if(!_0x2de2cb)throw new Error(_0x4f87b9(0x288));const _0x4952c2=new GoogleGenerativeAI(_0x2de2cb),_0x1b0674=_0x4952c2[_0x4f87b9(0x254)]({'model':GEMINI_MODEL}),_0x47144e=await _0x1b0674['generateContent'](_0x4f87b9(0x268)),_0x27f5c5=await _0x47144e[_0x4f87b9(0x220)];if(_0x27f5c5[_0x4f87b9(0x214)]())this['sendTo'](_0x147ab2[_0x4f87b9(0x264)],_0x147ab2[_0x4f87b9(0x1b6)],{'success':!![],'message':_0x4f87b9(0x1e3)},_0x147ab2['callback']);else throw new Error(_0x4f87b9(0x1da));}catch(_0x32834d){this['sendTo'](_0x147ab2['from'],_0x147ab2[_0x4f87b9(0x1b6)],{'success':![],'message':_0x32834d[_0x4f87b9(0x26b)]},_0x147ab2[_0x4f87b9(0x249)]);}else{if(_0x147ab2[_0x4f87b9(0x1b6)]===_0x4f87b9(0x22b))try{const _0x511cc9=await scanner['scanForDevices'](this,_0x147ab2[_0x4f87b9(0x26b)]||{});this[_0x4f87b9(0x1dd)](_0x147ab2[_0x4f87b9(0x264)],_0x147ab2[_0x4f87b9(0x1b6)],{'success':!![],'devices':_0x511cc9},_0x147ab2['callback']);}catch(_0x50c112){this[_0x4f87b9(0x1dd)](_0x147ab2['from'],_0x147ab2[_0x4f87b9(0x1b6)],{'success':![],'error':_0x50c112[_0x4f87b9(0x26b)]},_0x147ab2[_0x4f87b9(0x249)]);}else{if(_0x147ab2[_0x4f87b9(0x1b6)]===_0x4f87b9(0x1d1))try{const {matrix:_0x3dd5be}=_0x147ab2['message'],_0x1b34bf=await this[_0x4f87b9(0x281)](_0x4f87b9(0x27a));if(_0x1b34bf&&_0x1b34bf[_0x4f87b9(0x1e4)]){const _0x578b1e=JSON[_0x4f87b9(0x20d)](_0x1b34bf[_0x4f87b9(0x1e4)]);_0x578b1e['matrix']=_0x3dd5be,_0x578b1e[_0x4f87b9(0x201)]=Date['now'](),await this[_0x4f87b9(0x24a)](_0x4f87b9(0x27a),{'val':JSON['stringify'](_0x578b1e),'ack':!![]}),pythonBridge[_0x4f87b9(0x1b5)](this,_0x4f87b9(0x230),_0x578b1e);}this['sendTo'](_0x147ab2['from'],_0x147ab2[_0x4f87b9(0x1b6)],{'success':!![]},_0x147ab2[_0x4f87b9(0x249)]);}catch(_0x521420){this[_0x4f87b9(0x253)][_0x4f87b9(0x234)](_0x521420);}else{if(_0x147ab2[_0x4f87b9(0x1b6)]==='getLtmData')this[_0x4f87b9(0x1dd)](_0x147ab2[_0x4f87b9(0x264)],_0x147ab2[_0x4f87b9(0x1b6)],{'success':!![],'dailyDigests':this[_0x4f87b9(0x271)]||[],'analysisHistory':this[_0x4f87b9(0x231)]||[]},_0x147ab2['callback']);else{if(_0x147ab2[_0x4f87b9(0x1b6)]===_0x4f87b9(0x212)){const _0x7bca85=this[_0x4f87b9(0x271)][_0x4f87b9(0x200)],_0x12a8db=new Array(0x18)['fill'](0x0),_0x59ac7f=new Date()[_0x4f87b9(0x23b)](0x0,0x0,0x0,0x0);this[_0x4f87b9(0x216)]&&this['eventHistory'][_0x4f87b9(0x1ee)](_0x5a1436=>{const _0x2356b9=_0x4f87b9;if(_0x5a1436['timestamp']>=_0x59ac7f){const _0x2b9111=new Date(_0x5a1436[_0x2356b9(0x22e)])[_0x2356b9(0x1c9)]();if(_0x2b9111>=0x0&&_0x2b9111<0x18)_0x12a8db[_0x2b9111]++;}}),this['sendTo'](_0x147ab2[_0x4f87b9(0x264)],_0x147ab2['command'],{'success':!![],'eventHistory':this['eventHistory'][_0x4f87b9(0x24b)](0x0,0xf),'stats':{'digestCount':_0x7bca85,'isPresent':this['isPresent'],'hourlyActivity':_0x12a8db},'automation':{'detected':![]}},_0x147ab2[_0x4f87b9(0x249)]);}else{if(_0x147ab2[_0x4f87b9(0x1b6)]===_0x4f87b9(0x1e0)){const _0x532596=await this['getForeignObjectsAsync'](_0x4f87b9(0x1c8),_0x4f87b9(0x1d6)),_0x2c5b80=[];if(_0x532596)for(const _0xd27984 in _0x532596){const _0x5e9189=_0x532596[_0xd27984],_0x43d302=(_0x5e9189[_0x4f87b9(0x25d)]&&typeof _0x5e9189[_0x4f87b9(0x25d)][_0x4f87b9(0x23d)]===_0x4f87b9(0x1f7)?_0x5e9189[_0x4f87b9(0x25d)][_0x4f87b9(0x23d)]['de']:_0x5e9189[_0x4f87b9(0x25d)]['name'])||_0x5e9189['common'][_0x4f87b9(0x23d)];_0x2c5b80['push']({'id':_0xd27984,'name':_0x43d302});}const _0xd70ee9=await this[_0x4f87b9(0x22a)](_0x4f87b9(0x246),_0x4f87b9(0x1d6)),_0x547609=[];if(_0xd70ee9)for(const _0x5ea9a2 in _0xd70ee9){const _0x5ef93e=_0xd70ee9[_0x5ea9a2],_0x4e75ac=(_0x5ef93e[_0x4f87b9(0x25d)]&&typeof _0x5ef93e[_0x4f87b9(0x25d)][_0x4f87b9(0x23d)]===_0x4f87b9(0x1f7)?_0x5ef93e['common'][_0x4f87b9(0x23d)]['de']:_0x5ef93e[_0x4f87b9(0x25d)][_0x4f87b9(0x23d)])||_0x5ea9a2[_0x4f87b9(0x232)]('.')[_0x4f87b9(0x247)]();_0x547609['push'](_0x4e75ac);}this['sendTo'](_0x147ab2[_0x4f87b9(0x264)],_0x147ab2['command'],{'success':!![],'enums':_0x2c5b80,'rooms':_0x547609},_0x147ab2[_0x4f87b9(0x249)]);}else{if(_0x147ab2[_0x4f87b9(0x1b6)]==='testContext')try{let _0x23c08b='Kein\x20Wetter-Adapter',_0x4b6aa8=_0x4f87b9(0x1f4);if(this[_0x4f87b9(0x283)][_0x4f87b9(0x1ff)]){const _0x11c416=await recorder[_0x4f87b9(0x229)](this);_0x23c08b=_0x11c416!==null?_0x11c416+'Â°C':_0x4f87b9(0x215);}if(this[_0x4f87b9(0x283)][_0x4f87b9(0x21d)]){const _0xb28b86=await this['getForeignObjectAsync'](_0x4f87b9(0x1cc)+this['config'][_0x4f87b9(0x21d)]);_0x4b6aa8=_0xb28b86?'Verbunden':_0x4f87b9(0x27f);}this[_0x4f87b9(0x1dd)](_0x147ab2[_0x4f87b9(0x264)],_0x147ab2[_0x4f87b9(0x1b6)],{'success':!![],'weather':_0x23c08b,'calendar':_0x4b6aa8},_0x147ab2['callback']);}catch(_0x439e19){this[_0x4f87b9(0x1dd)](_0x147ab2[_0x4f87b9(0x264)],_0x147ab2[_0x4f87b9(0x1b6)],{'success':![],'error':_0x439e19[_0x4f87b9(0x26b)]},_0x147ab2[_0x4f87b9(0x249)]);}else{if(_0x147ab2['command']==='getCalendarNames')try{const _0x1af169=_0x147ab2[_0x4f87b9(0x26b)][_0x4f87b9(0x27e)],_0xd2fc50=await this['getForeignStateAsync'](_0x1af169+_0x4f87b9(0x1e1));let _0x1fbbc9=[];if(_0xd2fc50&&_0xd2fc50[_0x4f87b9(0x1e4)]){const _0x56a992=JSON[_0x4f87b9(0x20d)](_0xd2fc50[_0x4f87b9(0x1e4)]),_0x1e3b65=new Set();Array[_0x4f87b9(0x1e8)](_0x56a992)&&_0x56a992[_0x4f87b9(0x1ee)](_0x5d1204=>{const _0x21844c=_0x4f87b9;if(_0x5d1204[_0x21844c(0x25e)])_0x1e3b65['add'](_0x5d1204[_0x21844c(0x25e)]);else{if(_0x5d1204[_0x21844c(0x218)])_0x1e3b65[_0x21844c(0x233)](_0x5d1204['calendarName']);}}),_0x1fbbc9=Array['from'](_0x1e3b65)[_0x4f87b9(0x259)]();}if(_0x1fbbc9['length']===0x0)_0x1fbbc9=[_0x4f87b9(0x25c)];this[_0x4f87b9(0x1dd)](_0x147ab2[_0x4f87b9(0x264)],_0x147ab2[_0x4f87b9(0x1b6)],{'success':!![],'names':_0x1fbbc9},_0x147ab2[_0x4f87b9(0x249)]);}catch(_0x4dc42b){this[_0x4f87b9(0x1dd)](_0x147ab2[_0x4f87b9(0x264)],_0x147ab2['command'],{'success':![],'error':_0x4dc42b[_0x4f87b9(0x26b)]},_0x147ab2['callback']);}else{if(_0x147ab2[_0x4f87b9(0x1b6)]==='testNotification')try{await setup[_0x4f87b9(0x203)](this,'ðŸ””\x20Dies\x20ist\x20ein\x20Test\x20von\x20Cogni-Living.',![],![]),this[_0x4f87b9(0x1dd)](_0x147ab2[_0x4f87b9(0x264)],_0x147ab2['command'],{'success':!![],'message':_0x4f87b9(0x261)},_0x147ab2[_0x4f87b9(0x249)]);}catch(_0x175530){this['log']['error'](_0x4f87b9(0x248)+_0x175530[_0x4f87b9(0x26b)]),this[_0x4f87b9(0x1dd)](_0x147ab2[_0x4f87b9(0x264)],_0x147ab2[_0x4f87b9(0x1b6)],{'success':![],'message':_0x4f87b9(0x236)+_0x175530['message']},_0x147ab2[_0x4f87b9(0x249)]);}}}}}}}}}}}async[a0_0x20e0a3(0x226)](){const _0x171fff=a0_0x20e0a3;try{const _0x4d3fb6=await this[_0x171fff(0x281)](setup[_0x171fff(0x1cd)]);_0x4d3fb6&&_0x4d3fb6[_0x171fff(0x1e4)]&&Object['values'](setup[_0x171fff(0x26e)])[_0x171fff(0x24e)](_0x4d3fb6['val'])?this[_0x171fff(0x1d4)]=_0x4d3fb6[_0x171fff(0x1e4)]:(this[_0x171fff(0x1d4)]=setup['SYSTEM_MODES'][_0x171fff(0x21c)],await this[_0x171fff(0x24a)](setup['SYSTEM_DP_MODE'],{'val':setup['SYSTEM_MODES']['NORMAL'],'ack':!![]}));}catch(_0x3f7415){this[_0x171fff(0x1d4)]=setup[_0x171fff(0x26e)][_0x171fff(0x21c)];}}async[a0_0x20e0a3(0x1ef)](){const _0x478a10=a0_0x20e0a3;try{const _0x3591d9=this[_0x478a10(0x283)][_0x478a10(0x206)]||[];let _0x8252f8=![];const _0x5a17af=[];for(const _0x11e53b of _0x3591d9){try{const _0x418317=await this[_0x478a10(0x23c)](_0x11e53b);_0x418317&&(_0x418317[_0x478a10(0x1e4)]===!![]||_0x418317[_0x478a10(0x1e4)]===_0x478a10(0x1e2)||_0x418317['val']===0x1)&&(_0x8252f8=!![],_0x5a17af[_0x478a10(0x286)](_0x11e53b));}catch(_0x950e4c){}}return await this[_0x478a10(0x24a)](_0x478a10(0x1c2),{'val':_0x5a17af['join'](',\x20'),'ack':!![]}),_0x8252f8&&(this['exitTimer']&&(this[_0x478a10(0x253)][_0x478a10(0x245)](_0x478a10(0x22f)),recorder[_0x478a10(0x275)](this)),!this[_0x478a10(0x1ed)]&&this[_0x478a10(0x1d4)]===setup[_0x478a10(0x26e)][_0x478a10(0x21c)]&&await recorder[_0x478a10(0x25a)](this,!![])),_0x8252f8;}catch(_0x1b8124){return![];}}async[a0_0x20e0a3(0x238)](){const _0x564630=a0_0x20e0a3;this[_0x564630(0x253)][_0x564630(0x210)](_0x564630(0x270)),await aiAgent[_0x564630(0x21b)](this),this[_0x564630(0x1fb)](),this[_0x564630(0x1d5)](),this[_0x564630(0x273)]();}[a0_0x20e0a3(0x1d5)](){const _0x1c3b9b=a0_0x20e0a3;if(!this[_0x1c3b9b(0x1b8)])return;try{this[_0x1c3b9b(0x219)](_0x1c3b9b(0x20a),(_0x39b911,_0x121fcb)=>{const _0x48c6c5=_0x1c3b9b;_0x121fcb&&_0x121fcb['val']&&pythonBridge['send'](this,_0x48c6c5(0x1c4),{'sequences':JSON[_0x48c6c5(0x20d)](_0x121fcb['val'])});});}catch(_0x68a6c6){}}async[a0_0x20e0a3(0x273)](){const _0x549d87=a0_0x20e0a3;if(!this[_0x549d87(0x1b8)])return;try{const _0x480817=await recorder['getOutsideTemperatureNumeric'](this);if(_0x480817===null)return;const _0x182aba={},_0x42cff7=this[_0x549d87(0x283)][_0x549d87(0x20e)]||[];for(const _0x3515e0 of _0x42cff7){if(_0x3515e0[_0x549d87(0x1d0)]===_0x549d87(0x277)&&_0x3515e0[_0x549d87(0x208)]){const _0x5d5721=this[_0x549d87(0x263)][_0x3515e0['id']];if(_0x5d5721!==undefined)_0x182aba[_0x3515e0[_0x549d87(0x208)]]=_0x5d5721;}}Object[_0x549d87(0x266)](_0x182aba)[_0x549d87(0x200)]>0x0&&pythonBridge[_0x549d87(0x1b5)](this,_0x549d87(0x209),{'current_temps':_0x182aba,'t_out':_0x480817});}catch(_0x11aed3){}}[a0_0x20e0a3(0x1fb)](){const _0x3edcaf=a0_0x20e0a3;if(!this[_0x3edcaf(0x225)]||this[_0x3edcaf(0x225)]['length']===0x0)return;const _0x43e3f8=new Array(0x60)[_0x3edcaf(0x1fe)](0x0),_0x247d65=new Date()['setHours'](0x0,0x0,0x0,0x0);this['rawEventLog'][_0x3edcaf(0x1ee)](_0xbadadb=>{const _0x3fb85d=_0x3edcaf,_0x27a5e5=new Date(_0xbadadb[_0x3fb85d(0x22e)]);if(_0x27a5e5[_0x3fb85d(0x1f6)]()>=_0x247d65){const _0x4b65c9=_0x27a5e5[_0x3fb85d(0x1c9)](),_0x244a4e=_0x27a5e5['getMinutes'](),_0x527660=_0x4b65c9*0x4+Math[_0x3fb85d(0x1b2)](_0x244a4e/0xf);if(_0x527660>=0x0&&_0x527660<0x60)_0x43e3f8[_0x527660]++;}}),this['setStateAsync']('analysis.health.todayVector',{'val':JSON[_0x3edcaf(0x1bb)](_0x43e3f8),'ack':!![]});}['runPythonHealthCheck'](){const _0x50f8b0=a0_0x20e0a3;if(!this[_0x50f8b0(0x271)]||this[_0x50f8b0(0x271)]['length']<0x2)return;const _0x23d577=this[_0x50f8b0(0x271)][_0x50f8b0(0x24f)](_0x1421e1=>{const _0x4bb6fc=_0x50f8b0,_0x2afcf5=(_0x1421e1[_0x4bb6fc(0x251)]||'')[_0x4bb6fc(0x1c1)]();return ACTIVITY_LEVEL_MAP[_0x2afcf5]||0x32;});pythonBridge['send'](this,_0x50f8b0(0x204),{'values':_0x23d577,'tag':_0x50f8b0(0x1e7)});}}if(require[a0_0x20e0a3(0x1f2)]!==module)module[a0_0x20e0a3(0x224)]=_0x516631=>new CogniLiving(_0x516631);else new CogniLiving();