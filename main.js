const a0_0x2868c6=a0_0x3cbe;(function(_0x222014,_0x567ca4){const _0x39624e=a0_0x3cbe,_0x4c2310=_0x222014();while(!![]){try{const _0x15f141=-parseInt(_0x39624e(0x2ef))/0x1+-parseInt(_0x39624e(0x1db))/0x2+-parseInt(_0x39624e(0x2bf))/0x3*(parseInt(_0x39624e(0x16e))/0x4)+-parseInt(_0x39624e(0x2c5))/0x5*(-parseInt(_0x39624e(0x1fb))/0x6)+-parseInt(_0x39624e(0x16b))/0x7*(-parseInt(_0x39624e(0x245))/0x8)+-parseInt(_0x39624e(0x271))/0x9*(parseInt(_0x39624e(0x22a))/0xa)+parseInt(_0x39624e(0x225))/0xb;if(_0x15f141===_0x567ca4)break;else _0x4c2310['push'](_0x4c2310['shift']());}catch(_0x5916ac){_0x4c2310['push'](_0x4c2310['shift']());}}}(a0_0x5b88,0x88f53));const a0_0x5ebf56=(function(){let _0x4c9541=!![];return function(_0x4bb4a6,_0x1eeca5){const _0x7b8f9f=_0x4c9541?function(){const _0x30f81f=a0_0x3cbe;if(_0x1eeca5){const _0x1a2e04=_0x1eeca5[_0x30f81f(0x29c)](_0x4bb4a6,arguments);return _0x1eeca5=null,_0x1a2e04;}}:function(){};return _0x4c9541=![],_0x7b8f9f;};}()),a0_0x1bbef9=a0_0x5ebf56(this,function(){const _0x3e161e=a0_0x3cbe;return a0_0x1bbef9[_0x3e161e(0x22f)]()['search']('(((.+)+)+)+$')['toString']()[_0x3e161e(0x1fa)](a0_0x1bbef9)['search'](_0x3e161e(0x1c6));});a0_0x1bbef9();'use strict';const utils=require(a0_0x2868c6(0x235)),{GoogleGenerativeAI}=require(a0_0x2868c6(0x21e)),{spawn}=require(a0_0x2868c6(0x1ea)),path=require(a0_0x2868c6(0x1e1)),fs=require('fs'),installer=require(a0_0x2868c6(0x243)),scanner=require('./lib/scanner'),schedulers=require('./lib/scheduler'),HISTORY_MAX_SIZE=0x32,RAW_LOG_MAX_SIZE=0x9c4,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL=a0_0x2868c6(0x1b3),SEQUENCE_TIMEOUT_MS=0x5*0x3c*0x3e8,MAX_TRAINING_SET_SIZE=0x1f4,THERMO_LOG_SIZE=0x3e8,EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,LTM_DP_RAW_LOG=a0_0x2868c6(0x2ad),LTM_DP_DAILY_DIGESTS=a0_0x2868c6(0x198),LTM_DP_STATUS=a0_0x2868c6(0x2a3),LTM_DP_TRIGGER_DIGEST=a0_0x2868c6(0x2b7),LTM_DP_BASELINE_STATUS='LTM.baselineStatus',LTM_DP_DRIFT_CHANNEL='LTM.driftAnalysis',LTM_DP_DRIFT_STATUS=a0_0x2868c6(0x237),LTM_DP_DRIFT_DETAILS='LTM.driftAnalysis.driftDetails',LTM_DP_DRIFT_LAST_CHECK=a0_0x2868c6(0x255),SYSTEM_DP_MODE=a0_0x2868c6(0x195),SYSTEM_MODES={'NORMAL':'normal','VACATION':a0_0x2868c6(0x1c4),'PARTY':a0_0x2868c6(0x1b2),'GUEST':a0_0x2868c6(0x263)},AUTO_RESET_MODES=[SYSTEM_MODES[a0_0x2868c6(0x2dd)],SYSTEM_MODES['GUEST']],PERSONA_MAPPING={'generic':'Analysiere\x20ausgewogen.','senior_aal':'PRIORIT√ÑT:\x20Gesundheit/AAL.','family':'Fokus\x20auf\x20Familienroutinen.','single_comfort':a0_0x2868c6(0x2cd),'security':a0_0x2868c6(0x16a)},ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};let activeSequence=[],sequenceTimer=null;async function initZombies(_0x1f1018){const _0xa03967=a0_0x2868c6;try{const _0x225d29=[_0xa03967(0x277),'events.history_debug_00'];for(const _0x26d81c of _0x225d29){try{const _0x10724b=await _0x1f1018['getObjectAsync'](_0x26d81c);if(_0x10724b)await _0x1f1018[_0xa03967(0x2f0)](_0x26d81c);}catch(_0x3d57d1){}}}catch(_0xafd77f){}}async function checkLicense(_0x54cb19){return!![];}async function initHistory(_0x592e32){const _0x5be693=a0_0x2868c6;try{const _0x59469f=await _0x592e32[_0x5be693(0x1e6)](_0x5be693(0x1e2));_0x59469f&&_0x59469f['val']&&(_0x592e32[_0x5be693(0x2ce)]=JSON[_0x5be693(0x291)](_0x59469f[_0x5be693(0x29d)][_0x5be693(0x22f)]()));}catch(_0x41ea1e){_0x592e32[_0x5be693(0x2ce)]=[];}try{const _0x36252a=await _0x592e32[_0x5be693(0x1e6)](_0x5be693(0x2c2));if(_0x36252a&&_0x36252a[_0x5be693(0x29d)])_0x592e32['analysisHistory']=JSON['parse'](_0x36252a[_0x5be693(0x29d)][_0x5be693(0x22f)]());}catch(_0x29d283){_0x592e32[_0x5be693(0x200)]=[];}if(_0x592e32[_0x5be693(0x2ce)]&&_0x592e32[_0x5be693(0x2ce)][_0x5be693(0x269)]>0x0){_0x592e32['log'][_0x5be693(0x1f8)]('Restoring\x20sensor\x20cache...');for(let _0x2bd153=_0x592e32[_0x5be693(0x2ce)]['length']-0x1;_0x2bd153>=0x0;_0x2bd153--){const _0x22ff31=_0x592e32['eventHistory'][_0x2bd153];if(_0x22ff31&&_0x22ff31['id']!==undefined&&_0x22ff31[_0x5be693(0x163)]!==undefined)_0x592e32[_0x5be693(0x1ba)][_0x22ff31['id']]=_0x22ff31['value'];}}}async function initSystemConfig(_0x3ed00e){const _0x3e8a41=a0_0x2868c6;try{const _0x49fa43=await _0x3ed00e['getForeignObjectAsync']('system.config');if(_0x49fa43&&_0x49fa43[_0x3e8a41(0x2a9)])_0x3ed00e['systemConfig']={'latitude':_0x49fa43[_0x3e8a41(0x2a9)][_0x3e8a41(0x170)]||0x0,'longitude':_0x49fa43[_0x3e8a41(0x2a9)][_0x3e8a41(0x193)]||0x0,'city':_0x49fa43['common'][_0x3e8a41(0x167)]||''};}catch(_0x5cd1b9){}}async function createAllObjects(_0x5215a6){const _0x35f2d3=a0_0x2868c6;await _0x5215a6[_0x35f2d3(0x2c4)](_0x35f2d3(0x2e7),{'type':_0x35f2d3(0x19b),'common':{'name':_0x35f2d3(0x186)},'native':{}}),await _0x5215a6['extendObjectAsync'](SYSTEM_DP_MODE,{'type':_0x35f2d3(0x247),'common':{'name':_0x35f2d3(0x24b),'type':_0x35f2d3(0x215),'role':_0x35f2d3(0x247),'read':!![],'write':!![],'def':SYSTEM_MODES[_0x35f2d3(0x1ca)]},'native':{}}),await _0x5215a6['setObjectNotExistsAsync'](_0x35f2d3(0x1d6),{'type':'state','common':{'name':_0x35f2d3(0x1aa),'type':'string','role':'text','read':!![],'write':![]},'native':{}}),await _0x5215a6[_0x35f2d3(0x1d9)](_0x35f2d3(0x17f),{'type':_0x35f2d3(0x247),'common':{'name':_0x35f2d3(0x27b),'type':_0x35f2d3(0x215),'role':_0x35f2d3(0x17b),'read':!![],'write':![]},'native':{}}),await _0x5215a6[_0x35f2d3(0x1d9)](_0x35f2d3(0x1e2),{'type':'state','common':{'name':_0x35f2d3(0x241),'type':_0x35f2d3(0x215),'role':_0x35f2d3(0x17b),'read':!![],'write':![]},'native':{}}),await _0x5215a6['extendObjectAsync'](_0x35f2d3(0x199),{'type':_0x35f2d3(0x19b),'common':{'name':_0x35f2d3(0x290)},'native':{}}),await _0x5215a6[_0x35f2d3(0x1d9)]('analysis.training.triggerSecurity',{'type':'state','common':{'name':_0x35f2d3(0x1eb),'type':_0x35f2d3(0x204),'role':'button','read':!![],'write':!![]},'native':{}}),await _0x5215a6[_0x35f2d3(0x1d9)]('analysis.training.triggerHealth',{'type':_0x35f2d3(0x247),'common':{'name':_0x35f2d3(0x236),'type':_0x35f2d3(0x204),'role':_0x35f2d3(0x294),'read':!![],'write':!![]},'native':{}}),await _0x5215a6[_0x35f2d3(0x1d9)]('analysis.training.triggerEnergy',{'type':_0x35f2d3(0x247),'common':{'name':_0x35f2d3(0x2e3),'type':_0x35f2d3(0x204),'role':'button','read':!![],'write':!![]},'native':{}}),await _0x5215a6[_0x35f2d3(0x1d9)](_0x35f2d3(0x1be),{'type':_0x35f2d3(0x247),'common':{'name':'Train\x20Comfort','type':'boolean','role':_0x35f2d3(0x294),'read':!![],'write':!![]},'native':{}}),await _0x5215a6[_0x35f2d3(0x1d9)](_0x35f2d3(0x2bb),{'type':_0x35f2d3(0x247),'common':{'name':_0x35f2d3(0x1c7),'type':'boolean','role':_0x35f2d3(0x294),'read':!![],'write':!![]},'native':{}}),await _0x5215a6['setObjectNotExistsAsync'](_0x35f2d3(0x19a),{'type':_0x35f2d3(0x247),'common':{'name':_0x35f2d3(0x175),'type':_0x35f2d3(0x215),'role':'text','read':!![],'write':![]},'native':{}}),await _0x5215a6[_0x35f2d3(0x2c4)](_0x35f2d3(0x279),{'type':_0x35f2d3(0x19b),'common':{'name':'Security\x20Monitor'},'native':{}}),await _0x5215a6[_0x35f2d3(0x1d9)]('analysis.security.lastScore',{'type':_0x35f2d3(0x247),'common':{'name':'Anomaly\x20Score','type':_0x35f2d3(0x1cd),'role':_0x35f2d3(0x163),'read':!![],'write':![]},'native':{}}),await _0x5215a6[_0x35f2d3(0x1d9)](_0x35f2d3(0x2a5),{'type':_0x35f2d3(0x247),'common':{'name':_0x35f2d3(0x2e4),'type':_0x35f2d3(0x1cd),'role':_0x35f2d3(0x163),'read':!![],'write':![],'def':0.05},'native':{}}),await _0x5215a6[_0x35f2d3(0x1d9)](_0x35f2d3(0x21a),{'type':'state','common':{'name':'Last\x20Check','type':_0x35f2d3(0x215),'role':_0x35f2d3(0x27e),'read':!![],'write':![]},'native':{}}),await _0x5215a6['setObjectNotExistsAsync']('analysis.security.topologyMatrix',{'type':_0x35f2d3(0x247),'common':{'name':'Topology\x20Matrix','type':_0x35f2d3(0x215),'role':_0x35f2d3(0x17b),'read':!![],'write':![]},'native':{}}),await _0x5215a6[_0x35f2d3(0x2c4)](_0x35f2d3(0x214),{'type':_0x35f2d3(0x19b),'common':{'name':_0x35f2d3(0x1b9)},'native':{}}),await _0x5215a6[_0x35f2d3(0x1d9)](_0x35f2d3(0x259),{'type':_0x35f2d3(0x247),'common':{'name':_0x35f2d3(0x1ee),'type':_0x35f2d3(0x215),'role':_0x35f2d3(0x27e),'read':!![],'write':![]},'native':{}}),await _0x5215a6[_0x35f2d3(0x1d9)]('analysis.health.isAnomaly',{'type':'state','common':{'name':_0x35f2d3(0x1ae),'type':_0x35f2d3(0x204),'role':'indicator','read':!![],'write':![]},'native':{}}),await _0x5215a6[_0x35f2d3(0x1d9)]('analysis.health.trendDiagnosis',{'type':_0x35f2d3(0x247),'common':{'name':_0x35f2d3(0x1fc),'type':_0x35f2d3(0x215),'role':_0x35f2d3(0x25f),'read':!![],'write':![]},'native':{}}),await _0x5215a6['setObjectNotExistsAsync'](_0x35f2d3(0x1f4),{'type':'state','common':{'name':_0x35f2d3(0x1b6),'type':_0x35f2d3(0x1cd),'role':_0x35f2d3(0x163),'read':!![],'write':![]},'native':{}}),await _0x5215a6[_0x35f2d3(0x1d9)](_0x35f2d3(0x1a6),{'type':_0x35f2d3(0x247),'common':{'name':_0x35f2d3(0x23c),'type':'string','role':_0x35f2d3(0x17b),'read':!![],'write':![]},'native':{}}),await _0x5215a6[_0x35f2d3(0x1d9)]('analysis.health.gaitSpeed',{'type':'state','common':{'name':_0x35f2d3(0x2ac),'type':'number','role':_0x35f2d3(0x163),'read':!![],'write':![]},'native':{}}),await _0x5215a6['extendObjectAsync'](_0x35f2d3(0x218),{'type':_0x35f2d3(0x19b),'common':{'name':'Energy\x20Intelligence'},'native':{}}),await _0x5215a6['setObjectNotExistsAsync'](_0x35f2d3(0x1d0),{'type':'state','common':{'name':_0x35f2d3(0x25e),'type':_0x35f2d3(0x215),'role':'text','read':!![],'write':![]},'native':{}}),await _0x5215a6[_0x35f2d3(0x1d9)]('analysis.energy.heatingScore',{'type':'state','common':{'name':_0x35f2d3(0x174),'type':_0x35f2d3(0x215),'role':_0x35f2d3(0x25f),'read':!![],'write':![]},'native':{}}),await _0x5215a6[_0x35f2d3(0x1d9)](_0x35f2d3(0x222),{'type':_0x35f2d3(0x247),'common':{'name':_0x35f2d3(0x18a),'type':_0x35f2d3(0x215),'role':'json','read':!![],'write':![]},'native':{}}),await _0x5215a6['extendObjectAsync']('LTM',{'type':_0x35f2d3(0x19b),'common':{'name':'LTM'},'native':{}}),await _0x5215a6[_0x35f2d3(0x2c4)](LTM_DP_RAW_LOG,{'type':_0x35f2d3(0x247),'common':{'name':_0x35f2d3(0x2a2),'type':_0x35f2d3(0x215),'role':_0x35f2d3(0x17b),'read':!![],'write':![]},'native':{}}),await _0x5215a6[_0x35f2d3(0x2c4)](LTM_DP_DAILY_DIGESTS,{'type':_0x35f2d3(0x247),'common':{'name':_0x35f2d3(0x2e1),'type':_0x35f2d3(0x215),'role':'json','read':!![],'write':![]},'native':{}}),await _0x5215a6['setObjectNotExistsAsync']('LTM.trainingData.sequences',{'type':_0x35f2d3(0x247),'common':{'name':_0x35f2d3(0x293),'type':_0x35f2d3(0x215),'role':_0x35f2d3(0x17b),'read':!![],'write':![]},'native':{}}),await _0x5215a6['setObjectNotExistsAsync'](_0x35f2d3(0x289),{'type':_0x35f2d3(0x247),'common':{'name':_0x35f2d3(0x275),'type':_0x35f2d3(0x215),'role':_0x35f2d3(0x17b),'read':!![],'write':![]},'native':{}}),await _0x5215a6[_0x35f2d3(0x1d9)]('analysis.trigger',{'type':_0x35f2d3(0x247),'common':{'name':'Trigger\x20Analysis','type':_0x35f2d3(0x204),'role':'button','read':!![],'write':!![]},'native':{}}),await _0x5215a6['setObjectNotExistsAsync']('analysis.triggerBriefing',{'type':_0x35f2d3(0x247),'common':{'name':_0x35f2d3(0x296),'type':_0x35f2d3(0x204),'role':'button','read':!![],'write':!![]},'native':{}}),await _0x5215a6[_0x35f2d3(0x1d9)](_0x35f2d3(0x213),{'type':_0x35f2d3(0x247),'common':{'name':_0x35f2d3(0x190),'type':'boolean','role':'indicator.alarm','read':!![],'write':![]},'native':{}}),await _0x5215a6[_0x35f2d3(0x1d9)]('analysis.alertReason',{'type':_0x35f2d3(0x247),'common':{'name':'Alert\x20Reason','type':'string','role':'text.alarm','read':!![],'write':![]},'native':{}}),await _0x5215a6[_0x35f2d3(0x1d9)](_0x35f2d3(0x1ec),{'type':'state','common':{'name':_0x35f2d3(0x24d),'type':_0x35f2d3(0x215),'role':_0x35f2d3(0x25f),'read':!![],'write':![]},'native':{}}),await _0x5215a6[_0x35f2d3(0x1d9)]('analysis.automation.patternDetected',{'type':_0x35f2d3(0x247),'common':{'name':'Pattern\x20Detected','type':_0x35f2d3(0x204),'role':_0x35f2d3(0x230),'read':!![],'write':![]},'native':{}}),await _0x5215a6[_0x35f2d3(0x1d9)](_0x35f2d3(0x18c),{'type':_0x35f2d3(0x247),'common':{'name':'Description','type':'string','role':_0x35f2d3(0x25f),'read':!![],'write':![]},'native':{}}),await _0x5215a6[_0x35f2d3(0x1d9)](_0x35f2d3(0x270),{'type':'state','common':{'name':_0x35f2d3(0x1d4),'type':_0x35f2d3(0x215),'role':'json','read':!![],'write':![]},'native':{}}),await _0x5215a6[_0x35f2d3(0x1d9)](_0x35f2d3(0x202),{'type':_0x35f2d3(0x247),'common':{'name':_0x35f2d3(0x264),'type':'string','role':_0x35f2d3(0x25f),'read':!![],'write':![]},'native':{}}),await _0x5215a6[_0x35f2d3(0x1d9)](_0x35f2d3(0x2dc),{'type':_0x35f2d3(0x247),'common':{'name':_0x35f2d3(0x173),'type':_0x35f2d3(0x215),'role':_0x35f2d3(0x25f),'read':!![],'write':![]},'native':{}}),await _0x5215a6[_0x35f2d3(0x1d9)](_0x35f2d3(0x273),{'type':_0x35f2d3(0x247),'common':{'name':_0x35f2d3(0x2a0),'type':_0x35f2d3(0x204),'role':_0x35f2d3(0x2a8),'read':!![],'write':!![]},'native':{}}),await _0x5215a6[_0x35f2d3(0x1d9)]('analysis.automation.triggerAction',{'type':_0x35f2d3(0x247),'common':{'name':_0x35f2d3(0x1a5),'type':_0x35f2d3(0x204),'role':'button','read':!![],'write':!![]},'native':{}});}async function loadSystemMode(_0xe6a8cb){const _0x126f4e=a0_0x2868c6;try{const _0x59aaf4=await _0xe6a8cb[_0x126f4e(0x1e6)](SYSTEM_DP_MODE);_0x59aaf4&&_0x59aaf4[_0x126f4e(0x29d)]&&Object[_0x126f4e(0x226)](SYSTEM_MODES)[_0x126f4e(0x20e)](_0x59aaf4[_0x126f4e(0x29d)])?_0xe6a8cb['currentSystemMode']=_0x59aaf4[_0x126f4e(0x29d)]:(_0xe6a8cb['currentSystemMode']=SYSTEM_MODES[_0x126f4e(0x1ca)],await _0xe6a8cb['setStateAsync'](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x126f4e(0x1ca)],'ack':!![]}));}catch(_0x24dcff){_0xe6a8cb[_0x126f4e(0x2e5)]=SYSTEM_MODES[_0x126f4e(0x1ca)];}}async function loadRawEventLog(_0x35c3d1){const _0x116d06=a0_0x2868c6;try{const _0x309081=await _0x35c3d1[_0x116d06(0x1e6)](LTM_DP_RAW_LOG);if(_0x309081&&_0x309081[_0x116d06(0x29d)])_0x35c3d1['rawEventLog']=JSON['parse'](_0x309081['val']);}catch(_0x259c30){_0x35c3d1['rawEventLog']=[];}}async function saveRawEventLog(_0x4fb1fe){const _0x2222ec=a0_0x2868c6;if(_0x4fb1fe['rawEventLog'][_0x2222ec(0x269)]>RAW_LOG_MAX_SIZE)_0x4fb1fe[_0x2222ec(0x189)][_0x2222ec(0x22d)](0x0,_0x4fb1fe[_0x2222ec(0x189)][_0x2222ec(0x269)]-RAW_LOG_MAX_SIZE);await _0x4fb1fe[_0x2222ec(0x2e8)](LTM_DP_RAW_LOG,{'val':JSON[_0x2222ec(0x185)](_0x4fb1fe[_0x2222ec(0x189)]),'ack':!![]});}async function loadDailyDigests(_0x199d5f){const _0x52d91a=a0_0x2868c6;try{const _0x312473=await _0x199d5f[_0x52d91a(0x1e6)](LTM_DP_DAILY_DIGESTS);if(_0x312473&&_0x312473[_0x52d91a(0x29d)])_0x199d5f[_0x52d91a(0x2eb)]=JSON[_0x52d91a(0x291)](_0x312473[_0x52d91a(0x29d)]);}catch(_0x331703){_0x199d5f[_0x52d91a(0x2eb)]=[];}await updateBaselineStatus(_0x199d5f);}async function saveDailyDigests(_0x3bcbc3,_0x371073=!![]){const _0x5dda5c=a0_0x2868c6,_0x3c904a=_0x3bcbc3['config'][_0x5dda5c(0x1d1)]||0x3c;_0x3bcbc3[_0x5dda5c(0x2eb)]['length']>_0x3c904a&&_0x3bcbc3[_0x5dda5c(0x2eb)][_0x5dda5c(0x22d)](0x0,_0x3bcbc3[_0x5dda5c(0x2eb)]['length']-_0x3c904a);await _0x3bcbc3[_0x5dda5c(0x2e8)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x5dda5c(0x185)](_0x3bcbc3['dailyDigests']),'ack':!![]});if(_0x371073)await updateBaselineStatus(_0x3bcbc3);}async function updateAnalysisHistory(_0x44c466,_0x4ffdd7){const _0x166004=a0_0x2868c6;_0x44c466['analysisHistory'][_0x166004(0x1fd)](_0x4ffdd7);if(_0x44c466[_0x166004(0x200)][_0x166004(0x269)]>HISTORY_MAX_SIZE)_0x44c466[_0x166004(0x200)][_0x166004(0x234)]();await _0x44c466[_0x166004(0x2e8)]('analysis.analysisHistory',{'val':JSON[_0x166004(0x185)](_0x44c466[_0x166004(0x200)]),'ack':!![]});}async function updateBaselineStatus(_0x1718a8){const _0x50dc91=a0_0x2868c6;if(!_0x1718a8['isProVersion']){await _0x1718a8[_0x50dc91(0x2e8)](LTM_DP_BASELINE_STATUS,{'val':_0x50dc91(0x2ae),'ack':!![]});return;}const _0x10f725=_0x1718a8[_0x50dc91(0x2eb)][_0x50dc91(0x269)]>=(_0x1718a8['config'][_0x50dc91(0x1f6)]||0x7)?'Aktiv\x20('+_0x1718a8['dailyDigests'][_0x50dc91(0x269)]+'\x20Tage)':_0x50dc91(0x206)+_0x1718a8[_0x50dc91(0x2eb)][_0x50dc91(0x269)]+'/'+(_0x1718a8[_0x50dc91(0x194)][_0x50dc91(0x1f6)]||0x7)+')';await _0x1718a8[_0x50dc91(0x2e8)](LTM_DP_BASELINE_STATUS,{'val':_0x10f725,'ack':!![]});}async function initSensorSubscriptions(_0x413b37){const _0x4387bb=a0_0x2868c6,_0x5700ba=_0x413b37['config'][_0x4387bb(0x2b8)];if(_0x5700ba)for(const _0x1ec4fc of _0x5700ba){await _0x413b37[_0x4387bb(0x1e5)](_0x1ec4fc['id']);}}async function initPresenceSubscriptions(_0x4c6afe){const _0x9c9621=a0_0x2868c6,_0x11a7b8=_0x4c6afe[_0x9c9621(0x194)]['presenceDevices'];if(_0x11a7b8)for(const _0x48984e of _0x11a7b8){await _0x4c6afe[_0x9c9621(0x1e5)](_0x48984e);}}async function setupTelegramListener(_0x3c8d62){const _0x565d7b=a0_0x2868c6,_0x441f44=_0x3c8d62[_0x565d7b(0x194)][_0x565d7b(0x1ff)];if(_0x3c8d62['config']['notifyTelegramEnabled']&&_0x441f44)await _0x3c8d62[_0x565d7b(0x1e5)](_0x441f44+_0x565d7b(0x284));}async function checkWifiPresence(_0xd5c8e9){const _0x2ccdfd=a0_0x2868c6;try{const _0x3413d3=_0xd5c8e9[_0x2ccdfd(0x194)][_0x2ccdfd(0x16c)]||[];let _0x3913de=![];const _0x584837=[];for(const _0x26e482 of _0x3413d3){try{const _0x55b639=await _0xd5c8e9[_0x2ccdfd(0x2db)](_0x26e482);_0x55b639&&(_0x55b639[_0x2ccdfd(0x29d)]===!![]||_0x55b639[_0x2ccdfd(0x29d)]===_0x2ccdfd(0x1d7)||_0x55b639[_0x2ccdfd(0x29d)]===0x1)&&(_0x3913de=!![],_0x584837[_0x2ccdfd(0x1c2)](_0x26e482));}catch(_0x44ad8b){}}return await _0xd5c8e9[_0x2ccdfd(0x2e8)](_0x2ccdfd(0x1d6),{'val':_0x584837[_0x2ccdfd(0x176)](',\x20'),'ack':!![]}),_0x3913de&&(_0xd5c8e9[_0x2ccdfd(0x1f2)]&&(_0xd5c8e9[_0x2ccdfd(0x2b3)]['info'](_0x2ccdfd(0x22c)),abortExitTimer(_0xd5c8e9)),!_0xd5c8e9[_0x2ccdfd(0x20a)]&&_0xd5c8e9[_0x2ccdfd(0x2e5)]===SYSTEM_MODES[_0x2ccdfd(0x1ca)]&&await setPresence(_0xd5c8e9,!![])),_0x3913de;}catch(_0x36c587){return![];}}function startExitTimer(_0x2b6990){const _0x4a9b9e=a0_0x2868c6;abortExitTimer(_0x2b6990),_0x2b6990[_0x4a9b9e(0x27c)]=!![],_0x2b6990[_0x4a9b9e(0x2b6)]=setTimeout(()=>{const _0x27cf87=_0x4a9b9e;_0x2b6990[_0x27cf87(0x27c)]=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),_0x2b6990[_0x4a9b9e(0x1f2)]=setTimeout(()=>{const _0x5349dc=_0x4a9b9e;setPresence(_0x2b6990,![]),_0x2b6990[_0x5349dc(0x1f2)]=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}function abortExitTimer(_0xb002aa){const _0x14f1d8=a0_0x2868c6;if(_0xb002aa[_0x14f1d8(0x1f2)])clearTimeout(_0xb002aa[_0x14f1d8(0x1f2)]);if(_0xb002aa[_0x14f1d8(0x2b6)])clearTimeout(_0xb002aa['exitGraceTimer']);_0xb002aa[_0x14f1d8(0x1f2)]=null,_0xb002aa['exitGraceTimer']=null,_0xb002aa[_0x14f1d8(0x27c)]=![];}async function setPresence(_0x8a9016,_0x45cce5){const _0xac21a6=a0_0x2868c6;if(_0x8a9016['isPresent']===_0x45cce5)return;_0x8a9016[_0xac21a6(0x20a)]=_0x45cce5,await _0x8a9016[_0xac21a6(0x2e8)](_0xac21a6(0x22e),{'val':_0x45cce5,'ack':!![]});}async function executeAutomationAction(_0x38d5d3){const _0x189dd8=a0_0x2868c6;try{const _0x1a5e3b=await _0x38d5d3[_0x189dd8(0x1e6)](_0x189dd8(0x202)),_0x5e4cd4=await _0x38d5d3['getStateAsync'](_0x189dd8(0x2dc));if(_0x1a5e3b&&_0x1a5e3b[_0x189dd8(0x29d)]&&_0x5e4cd4){const _0x3cb07e=_0x1a5e3b[_0x189dd8(0x29d)];let _0x200c1a=_0x5e4cd4[_0x189dd8(0x29d)];try{_0x200c1a=JSON[_0x189dd8(0x291)](_0x200c1a);}catch(_0x1da2ff){}_0x38d5d3['log'][_0x189dd8(0x1f8)](_0x189dd8(0x1ab)+_0x3cb07e+_0x189dd8(0x283)+_0x200c1a),await _0x38d5d3[_0x189dd8(0x228)](_0x3cb07e,_0x200c1a);}else _0x38d5d3[_0x189dd8(0x2b3)]['warn']('ü§ñ\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.');}catch(_0x30b00a){_0x38d5d3[_0x189dd8(0x2b3)][_0x189dd8(0x2ec)](_0x189dd8(0x161)+_0x30b00a[_0x189dd8(0x1fe)]);}}async function processSensorEvent(_0x178548,_0x60f360,_0x4047de,_0x4eac59){const _0x52ce78=a0_0x2868c6;if(!_0x4eac59)return;const _0x291546=_0x4047de[_0x52ce78(0x29d)],_0x2d1223=Date['now'](),_0x32e015=_0x178548[_0x52ce78(0x1ba)][_0x60f360];_0x178548[_0x52ce78(0x1ba)][_0x60f360]=_0x291546;if(!_0x4eac59[_0x52ce78(0x29f)]&&_0x32e015!=undefined&&_0x32e015==_0x291546)return;const _0x50369f=(_0x4eac59['type']||'')[_0x52ce78(0x2df)](),_0x74910c=_0x50369f[_0x52ce78(0x20e)]('temperature')||_0x50369f[_0x52ce78(0x20e)](_0x52ce78(0x1b5))||_0x50369f[_0x52ce78(0x20e)]('klima')||_0x50369f[_0x52ce78(0x20e)](_0x52ce78(0x2c6));_0x178548[_0x52ce78(0x27a)]&&_0x74910c&&recordThermodynamics(_0x178548,_0x60f360,_0x291546,_0x4eac59['location']);const _0x14b9c5={'timestamp':_0x2d1223,'id':_0x60f360,'name':_0x4eac59[_0x52ce78(0x1a0)],'type':_0x4eac59[_0x52ce78(0x2d2)],'location':_0x4eac59[_0x52ce78(0x180)],'value':_0x291546};_0x178548[_0x52ce78(0x2ce)]['unshift'](_0x14b9c5);if(_0x178548[_0x52ce78(0x2ce)][_0x52ce78(0x269)]>HISTORY_MAX_SIZE)_0x178548[_0x52ce78(0x2ce)][_0x52ce78(0x234)]();await _0x178548[_0x52ce78(0x2e8)](_0x52ce78(0x17f),{'val':JSON[_0x52ce78(0x185)](_0x14b9c5),'ack':!![]}),await _0x178548[_0x52ce78(0x2e8)](_0x52ce78(0x1e2),{'val':JSON['stringify'](_0x178548[_0x52ce78(0x2ce)]),'ack':!![]});_0x178548[_0x52ce78(0x27a)]&&(_0x178548[_0x52ce78(0x189)][_0x52ce78(0x1c2)](_0x14b9c5),await saveRawEventLog(_0x178548),recordSequence(_0x178548,_0x14b9c5));if(_0x4eac59['isExit']&&_0x291546===!![]){if(_0x178548[_0x52ce78(0x20a)]&&!_0x178548[_0x52ce78(0x27c)])startExitTimer(_0x178548);else{if(!_0x178548[_0x52ce78(0x20a)])setPresence(_0x178548,!![]);}}else{if(_0x4eac59['type']===_0x52ce78(0x2be)&&_0x291546===!![]){if(_0x178548['exitTimer'])abortExitTimer(_0x178548);if(!_0x178548[_0x52ce78(0x20a)]&&_0x178548[_0x52ce78(0x2e5)]===SYSTEM_MODES['NORMAL'])setPresence(_0x178548,!![]);}}}async function recordThermodynamics(_0x2a3ff3,_0x154982,_0x444ab4,_0x65ccf2){const _0x2eb02a=a0_0x2868c6,_0x4bcbdb=await getOutsideTemperatureNumeric(_0x2a3ff3),_0x4dadb9=await _0x2a3ff3['getStateAsync'](_0x2eb02a(0x289));let _0x25be5c=[];if(_0x4dadb9&&_0x4dadb9[_0x2eb02a(0x29d)])try{_0x25be5c=JSON['parse'](_0x4dadb9['val']);}catch(_0x11ed30){}_0x25be5c[_0x2eb02a(0x1c2)]({'ts':Date[_0x2eb02a(0x192)](),'room':_0x65ccf2||_0x2eb02a(0x18e),'t_in':_0x444ab4,'t_out':_0x4bcbdb});if(_0x25be5c[_0x2eb02a(0x269)]>THERMO_LOG_SIZE)_0x25be5c['shift']();await _0x2a3ff3[_0x2eb02a(0x2e8)](_0x2eb02a(0x289),{'val':JSON['stringify'](_0x25be5c),'ack':!![]});}async function getOutsideTemperatureNumeric(_0x178e38){const _0x3799e1=a0_0x2868c6;if(_0x178e38[_0x3799e1(0x194)][_0x3799e1(0x29e)])try{const _0x23445e=await _0x178e38[_0x3799e1(0x2db)](_0x178e38[_0x3799e1(0x194)]['outdoorSensorId']);if(_0x23445e&&_0x23445e['val']!==undefined&&_0x23445e[_0x3799e1(0x29d)]!==null)return parseFloat(_0x23445e[_0x3799e1(0x29d)]);}catch(_0xb4a37b){}const _0x34f44d=_0x178e38[_0x3799e1(0x194)][_0x3799e1(0x232)];if(!_0x178e38[_0x3799e1(0x194)]['useWeather']||!_0x34f44d)return null;try{let _0x41224b='';if(_0x34f44d[_0x3799e1(0x20e)](_0x3799e1(0x1d3)))_0x41224b=_0x34f44d+_0x3799e1(0x288);else{if(_0x34f44d[_0x3799e1(0x20e)](_0x3799e1(0x248)))_0x41224b=_0x34f44d+_0x3799e1(0x298);else{if(_0x34f44d[_0x3799e1(0x20e)]('openweathermap'))_0x41224b=_0x34f44d+'.forecast.current.temperature';else{if(_0x34f44d[_0x3799e1(0x20e)](_0x3799e1(0x282)))_0x41224b=_0x34f44d+'.forecast.current.temp';}}}if(_0x41224b){const _0x199d1b=await _0x178e38[_0x3799e1(0x2db)](_0x41224b);if(_0x199d1b&&_0x199d1b[_0x3799e1(0x29d)]!==undefined&&_0x199d1b[_0x3799e1(0x29d)]!==null)return parseFloat(_0x199d1b['val']);}}catch(_0xe22cc4){}return null;}async function recordSequence(_0x150f23,_0x3ffb3c){const _0x4e52fc=a0_0x2868c6,_0xd2af0c=(_0x3ffb3c[_0x4e52fc(0x2d2)]||'')[_0x4e52fc(0x2df)](),_0x45225c=[_0x4e52fc(0x2be),_0x4e52fc(0x20d),_0x4e52fc(0x209),_0x4e52fc(0x1c0),_0x4e52fc(0x1bc),_0x4e52fc(0x23a),'t√ºr',_0x4e52fc(0x203),_0x4e52fc(0x1cf),'contact',_0x4e52fc(0x18b),_0x4e52fc(0x28c),_0x4e52fc(0x2d7),'switch',_0x4e52fc(0x261),_0x4e52fc(0x27f),_0x4e52fc(0x2c1)];if(!_0x45225c[_0x4e52fc(0x2cb)](_0x5daf10=>_0xd2af0c['includes'](_0x5daf10)))return;if(!_0x3ffb3c[_0x4e52fc(0x163)])return;if(sequenceTimer)clearTimeout(sequenceTimer);activeSequence['push']({'loc':_0x3ffb3c[_0x4e52fc(0x180)]||_0x4e52fc(0x18e),'id':_0x3ffb3c['id'],'ts':Date[_0x4e52fc(0x192)]()}),sequenceTimer=setTimeout(async()=>{const _0x282182=_0x4e52fc;if(activeSequence[_0x282182(0x269)]>0x1)await saveCompletedSequence(_0x150f23);activeSequence=[];},SEQUENCE_TIMEOUT_MS);}async function saveCompletedSequence(_0x5a72ac){const _0x482925=a0_0x2868c6;try{const _0x1f7373=await _0x5a72ac[_0x482925(0x1e6)](_0x482925(0x29a));let _0x5021d5=[];if(_0x1f7373&&_0x1f7373['val'])try{_0x5021d5=JSON[_0x482925(0x291)](_0x1f7373[_0x482925(0x29d)]);}catch(_0x575d82){}const _0x46e4ef=activeSequence[0x0]['ts'],_0x524ebf=activeSequence[_0x482925(0x205)](_0x233f35=>({'loc':_0x233f35[_0x482925(0x1a1)],'t_delta':Math[_0x482925(0x23b)]((_0x233f35['ts']-_0x46e4ef)/0x3e8)})),_0x1eaf86={'timestamp':new Date(_0x46e4ef)[_0x482925(0x17c)](),'steps':_0x524ebf,'duration':Math[_0x482925(0x23b)]((activeSequence[activeSequence[_0x482925(0x269)]-0x1]['ts']-_0x46e4ef)/0x3e8),'daytime':new Date(_0x46e4ef)[_0x482925(0x2da)]()};_0x5021d5[_0x482925(0x1c2)](_0x1eaf86);if(_0x5021d5[_0x482925(0x269)]>MAX_TRAINING_SET_SIZE)_0x5021d5[_0x482925(0x1c8)]();await _0x5a72ac['setStateAsync'](_0x482925(0x29a),{'val':JSON[_0x482925(0x185)](_0x5021d5),'ack':!![]}),runSecurityCheck(_0x5a72ac,_0x1eaf86);}catch(_0xf1f18a){_0x5a72ac['log'][_0x482925(0x2ec)](_0x482925(0x2ba)+_0xf1f18a[_0x482925(0x1fe)]);}}function runSecurityCheck(_0x1ecfdb,_0x2ca12){if(!_0x1ecfdb['isProVersion'])return;sendToPython(_0x1ecfdb,'ANALYZE_SEQUENCE',{'sequence':_0x2ca12});}async function createDailyDigest(_0x1537a1){const _0x2cd18c=a0_0x2868c6;if(!_0x1537a1[_0x2cd18c(0x27a)])return;await _0x1537a1[_0x2cd18c(0x2e8)](LTM_DP_STATUS,{'val':'Started...','ack':!![]});if(!_0x1537a1['geminiModel']||_0x1537a1[_0x2cd18c(0x189)]['length']<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x1537a1[_0x2cd18c(0x2e8)](LTM_DP_STATUS,{'val':_0x2cd18c(0x18d),'ack':!![]});return;}const _0x1ee39c=JSON['parse'](JSON[_0x2cd18c(0x185)](_0x1537a1['rawEventLog'])),_0x36656a=_0x1ee39c[_0x2cd18c(0x269)],_0x5204e0='ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a'+JSON[_0x2cd18c(0x185)](_0x1ee39c);try{const _0x3e3d6a=await _0x1537a1[_0x2cd18c(0x231)][_0x2cd18c(0x187)](_0x5204e0),_0x369606=JSON[_0x2cd18c(0x291)](_0x3e3d6a['response'][_0x2cd18c(0x25f)]()[_0x2cd18c(0x24e)](/```json|```/g,'')['trim']()),_0x31b655={'timestamp':new Date()[_0x2cd18c(0x17c)](),'eventCount':_0x36656a,'summary':_0x369606[_0x2cd18c(0x16d)]||'Digest','activityLevel':_0x369606[_0x2cd18c(0x169)]||_0x2cd18c(0x19f),'systemMode':_0x1537a1[_0x2cd18c(0x2e5)]};_0x1537a1[_0x2cd18c(0x2eb)][_0x2cd18c(0x1c2)](_0x31b655),await saveDailyDigests(_0x1537a1),_0x1537a1[_0x2cd18c(0x189)]=[],await saveRawEventLog(_0x1537a1),await _0x1537a1['setStateAsync'](LTM_DP_STATUS,{'val':_0x2cd18c(0x2c8),'ack':!![]});if(_0x1537a1[_0x2cd18c(0x27a)])sendToPython(_0x1537a1,_0x2cd18c(0x2d5),{'digest':_0x31b655});}catch(_0x18030b){_0x1537a1[_0x2cd18c(0x2b3)]['error'](_0x18030b[_0x2cd18c(0x1fe)]);}}async function runBaselineDriftAnalysis(_0x90d9f0){const _0x3ef8d8=a0_0x2868c6;if(!_0x90d9f0[_0x3ef8d8(0x27a)]||!_0x90d9f0['geminiModel'])return;const _0x57b143=_0x90d9f0[_0x3ef8d8(0x194)][_0x3ef8d8(0x2b5)]||0xe;if(_0x90d9f0[_0x3ef8d8(0x2eb)]['length']<_0x57b143+0x7){await _0x90d9f0['setStateAsync'](LTM_DP_DRIFT_STATUS,{'val':_0x3ef8d8(0x2ca),'ack':!![]});return;}const _0x57abd2=_0x90d9f0[_0x3ef8d8(0x2eb)][_0x3ef8d8(0x25d)](-_0x57b143),_0x37a6d8=_0x90d9f0['dailyDigests'][_0x3ef8d8(0x25d)](0x0,_0x90d9f0[_0x3ef8d8(0x2eb)][_0x3ef8d8(0x269)]-_0x57b143),_0x1af442=_0x3ef8d8(0x1dc)+JSON[_0x3ef8d8(0x185)](_0x37a6d8)+'\x0aSTB:\x20'+JSON[_0x3ef8d8(0x185)](_0x57abd2);try{const _0x3cf9f0=await _0x90d9f0[_0x3ef8d8(0x231)][_0x3ef8d8(0x187)](_0x1af442),_0x55e204=JSON[_0x3ef8d8(0x291)](_0x3cf9f0[_0x3ef8d8(0x2ee)]['text']()[_0x3ef8d8(0x24e)](/```json|```/g,'')['trim']());_0x55e204['baselineDrift']&&(await _0x90d9f0[_0x3ef8d8(0x2e8)](LTM_DP_DRIFT_STATUS,{'val':_0x55e204['baselineDrift'],'ack':!![]}),await _0x90d9f0['setStateAsync'](LTM_DP_DRIFT_DETAILS,{'val':_0x55e204[_0x3ef8d8(0x229)],'ack':!![]}),await _0x90d9f0[_0x3ef8d8(0x2e8)](LTM_DP_DRIFT_LAST_CHECK,{'val':Date[_0x3ef8d8(0x192)](),'ack':!![]}));}catch(_0x4baf10){}}async function sendMorningBriefing(_0x2742e2){const _0x4b45a2=a0_0x2868c6;if(!_0x2742e2['geminiModel'])return;try{const _0x1cc2ec=_0x4b45a2(0x2bd),_0x16a72f=await _0x2742e2['geminiModel'][_0x4b45a2(0x187)](_0x1cc2ec),_0x90c30a=_0x16a72f[_0x4b45a2(0x2ee)]['text']();sendNotification(_0x2742e2,_0x4b45a2(0x2b9)+_0x90c30a);}catch(_0x2c89d2){_0x2742e2[_0x4b45a2(0x2b3)][_0x4b45a2(0x2ec)]('Briefing\x20Error:\x20'+_0x2c89d2[_0x4b45a2(0x1fe)]);}}function stopPythonService(_0x258594){const _0x38879c=a0_0x2868c6;if(_0x258594[_0x38879c(0x166)]){try{_0x258594['pythonProcess'][_0x38879c(0x267)]();}catch(_0x274fa1){}_0x258594[_0x38879c(0x166)]=null;}}function sendToPython(_0x38504f,_0x9ec343,_0x3b72c6={}){const _0x16c031=a0_0x2868c6;if(!_0x38504f[_0x16c031(0x166)]||!_0x38504f[_0x16c031(0x166)][_0x16c031(0x22b)][_0x16c031(0x188)])return;const _0x462596=JSON[_0x16c031(0x185)]({'command':_0x9ec343,..._0x3b72c6});try{_0x38504f[_0x16c031(0x166)][_0x16c031(0x22b)][_0x16c031(0x258)](_0x462596+'\x0a');}catch(_0x1e2987){}}function runPythonHealthCheck(_0x323310){const _0x2b8c6d=a0_0x2868c6;if(!_0x323310[_0x2b8c6d(0x2eb)]||_0x323310['dailyDigests'][_0x2b8c6d(0x269)]<0x2)return;const _0x3b20ed=_0x323310[_0x2b8c6d(0x2eb)][_0x2b8c6d(0x205)](_0x37a6ba=>{const _0x20d0f4=_0x2b8c6d,_0x3ed54d=(_0x37a6ba[_0x20d0f4(0x169)]||'')[_0x20d0f4(0x2df)]();return ACTIVITY_LEVEL_MAP[_0x3ed54d]||0x32;});sendToPython(_0x323310,_0x2b8c6d(0x21d),{'values':_0x3b20ed,'tag':_0x2b8c6d(0x299)});}function handlePythonResult(_0x310e77,_0x357f60){const _0xe28ca0=a0_0x2868c6;if(_0x357f60[_0xe28ca0(0x2d2)]===_0xe28ca0(0x25c))_0x310e77['log'][_0xe28ca0(0x1bb)]('üêç\x20Python\x20Pong');else{if(_0x357f60[_0xe28ca0(0x2d2)]===_0xe28ca0(0x1d5)){const {anomaly_score:_0x38180e,is_anomaly:_0xeb7d6a,threshold:_0x18f446,explanation:_0x441715}=_0x357f60[_0xe28ca0(0x262)];_0x310e77[_0xe28ca0(0x2b3)][_0xe28ca0(0x1f8)](_0xe28ca0(0x28b)+_0x38180e[_0xe28ca0(0x2c7)](0x5)+_0xe28ca0(0x210)+(_0xeb7d6a?'ANOMALY':'OK')),_0x310e77['setStateAsync'](_0xe28ca0(0x2ea),{'val':_0x38180e,'ack':!![]}),_0x310e77['setStateAsync'](_0xe28ca0(0x21a),{'val':new Date()[_0xe28ca0(0x17c)](),'ack':!![]});if(_0x18f446)_0x310e77[_0xe28ca0(0x2e8)]('analysis.security.currentThreshold',{'val':_0x18f446,'ack':!![]});if(_0xeb7d6a){let _0x429f6d='Ungew√∂hnliches\x20Bewegungsmuster!\x20(Score:\x20'+_0x38180e[_0xe28ca0(0x2c7)](0x4)+')';if(_0x441715&&_0x441715!==_0xe28ca0(0x18e))_0x429f6d+=_0xe28ca0(0x1ad)+_0x441715;_0x310e77[_0xe28ca0(0x2e8)](_0xe28ca0(0x213),{'val':!![],'ack':!![]}),_0x310e77[_0xe28ca0(0x2e8)]('analysis.alertReason',{'val':_0x429f6d,'ack':!![]}),sendNotification(_0x310e77,'‚ö†Ô∏è\x20SECURITY\x20ALARM:\x20'+_0x429f6d,![],!![]);}}else{if(_0x357f60[_0xe28ca0(0x2d2)]==='TRAINING_COMPLETE'){const _0x4cd967=_0x357f60[_0xe28ca0(0x262)][_0xe28ca0(0x223)]||'',_0x22eed2=_0x357f60[_0xe28ca0(0x262)][_0xe28ca0(0x219)],_0x2755aa=_0x357f60['payload'][_0xe28ca0(0x252)]?_0xe28ca0(0x29b)+new Date()[_0xe28ca0(0x183)]()+'\x20('+_0x4cd967+')':'Failed:\x20'+_0x357f60[_0xe28ca0(0x262)][_0xe28ca0(0x2d3)];_0x310e77[_0xe28ca0(0x2e8)](_0xe28ca0(0x19a),{'val':_0x2755aa,'ack':!![]});if(_0x357f60[_0xe28ca0(0x262)]['success']&&_0x22eed2)_0x310e77[_0xe28ca0(0x2e8)]('analysis.security.currentThreshold',{'val':_0x22eed2,'ack':!![]});}else{if(_0x357f60[_0xe28ca0(0x2d2)]===_0xe28ca0(0x2c9)){const {patterns:_0x1371d0}=_0x357f60[_0xe28ca0(0x262)];if(_0x1371d0&&_0x1371d0[_0xe28ca0(0x269)]>0x0){_0x310e77[_0xe28ca0(0x2b3)][_0xe28ca0(0x1f8)]('üõãÔ∏è\x20BUTLER:\x20Found\x20'+_0x1371d0[_0xe28ca0(0x269)]+'\x20new\x20patterns.'),_0x310e77['setStateAsync'](_0xe28ca0(0x270),{'val':JSON[_0xe28ca0(0x185)](_0x1371d0),'ack':!![]});const _0x4fa80d=_0x1371d0[0x0],_0x48e2a4=_0xe28ca0(0x1a4)+_0x4fa80d[_0xe28ca0(0x1d2)]+'\x20('+(_0x4fa80d[_0xe28ca0(0x256)]*0x64)[_0xe28ca0(0x2c7)](0x0)+'%)';_0x310e77[_0xe28ca0(0x2e8)](_0xe28ca0(0x2ab),{'val':!![],'ack':!![]}),_0x310e77[_0xe28ca0(0x2e8)]('analysis.automation.description',{'val':_0x48e2a4,'ack':!![]});}else _0x310e77[_0xe28ca0(0x2b3)]['info'](_0xe28ca0(0x2f3)),_0x310e77[_0xe28ca0(0x2e8)](_0xe28ca0(0x2ab),{'val':![],'ack':!![]}),_0x310e77[_0xe28ca0(0x2e8)](_0xe28ca0(0x270),{'val':'[]','ack':!![]});}else{if(_0x357f60['type']==='ENERGY_TRAIN_RESULT'){if(_0x357f60[_0xe28ca0(0x262)]['success'])try{const _0x2e597e=JSON[_0xe28ca0(0x291)](_0x357f60[_0xe28ca0(0x262)]['details']);if(_0x2e597e[_0xe28ca0(0x278)])_0x310e77['setStateAsync']('analysis.energy.insulationScore',{'val':JSON[_0xe28ca0(0x185)](_0x2e597e[_0xe28ca0(0x278)]),'ack':!![]});if(_0x2e597e['heating'])_0x310e77[_0xe28ca0(0x2e8)](_0xe28ca0(0x16f),{'val':JSON['stringify'](_0x2e597e[_0xe28ca0(0x272)]),'ack':!![]});}catch(_0x450545){}}else{if(_0x357f60[_0xe28ca0(0x2d2)]===_0xe28ca0(0x211)){if(_0x357f60[_0xe28ca0(0x262)][_0xe28ca0(0x252)])_0x310e77[_0xe28ca0(0x2b3)][_0xe28ca0(0x1f8)](_0xe28ca0(0x2a1));}else{if(_0x357f60[_0xe28ca0(0x2d2)]===_0xe28ca0(0x240))_0x310e77[_0xe28ca0(0x2e8)](_0xe28ca0(0x259),{'val':new Date()['toISOString'](),'ack':!![]}),_0x310e77[_0xe28ca0(0x2e8)](_0xe28ca0(0x26e),{'val':_0x357f60[_0xe28ca0(0x262)][_0xe28ca0(0x2d8)],'ack':!![]});else{if(_0x357f60[_0xe28ca0(0x2d2)]===_0xe28ca0(0x2f1))_0x310e77[_0xe28ca0(0x2e8)](_0xe28ca0(0x2af),{'val':_0x357f60[_0xe28ca0(0x262)][_0xe28ca0(0x2de)],'ack':!![]}),_0x310e77[_0xe28ca0(0x2e8)]('analysis.health.trendValue',{'val':_0x357f60[_0xe28ca0(0x262)][_0xe28ca0(0x165)],'ack':!![]});else{if(_0x357f60[_0xe28ca0(0x2d2)]===_0xe28ca0(0x168)){const {speed_trend:_0x2fd62e}=_0x357f60[_0xe28ca0(0x262)];if(_0x2fd62e!==undefined)_0x310e77[_0xe28ca0(0x2e8)](_0xe28ca0(0x178),{'val':_0x2fd62e,'ack':!![]});}else{if(_0x357f60[_0xe28ca0(0x2d2)]===_0xe28ca0(0x1e3)){const {forecast:_0x5a18fb}=_0x357f60[_0xe28ca0(0x262)];if(_0x5a18fb)_0x310e77[_0xe28ca0(0x2e8)](_0xe28ca0(0x222),{'val':JSON[_0xe28ca0(0x185)](_0x5a18fb),'ack':!![]});}else{if(_0x357f60[_0xe28ca0(0x2d2)]===_0xe28ca0(0x2d1)){const {data:_0x6df0dc}=_0x357f60[_0xe28ca0(0x262)];_0x6df0dc&&(_0x310e77[_0xe28ca0(0x2b3)][_0xe28ca0(0x1f8)](_0xe28ca0(0x2f4)),_0x310e77['setStateAsync'](_0xe28ca0(0x244),{'val':JSON['stringify'](_0x6df0dc),'ack':!![]}));}}}}}}}}}}}}function startPythonService(_0x57dcba){const _0x3372da=a0_0x2868c6;let _0x51916f='python3';if(fs[_0x3372da(0x287)](installer['PYTHON_EXE']))_0x51916f=installer['PYTHON_EXE'];try{const _0x583cff=path[_0x3372da(0x176)](__dirname,_0x3372da(0x2ed),'service.py');_0x57dcba['pythonProcess']=spawn(_0x51916f,[_0x583cff]),_0x57dcba[_0x3372da(0x166)][_0x3372da(0x276)]['on'](_0x3372da(0x1b4),_0x5ee7e0=>{const _0x312423=_0x5ee7e0['toString']()['split']('\x0a');_0x312423['forEach'](_0x4be835=>{const _0x5c97ae=a0_0x3cbe,_0x4174bc=_0x4be835[_0x5c97ae(0x254)]();if(!_0x4174bc)return;if(_0x4174bc[_0x5c97ae(0x2cc)](_0x5c97ae(0x292)))_0x57dcba[_0x5c97ae(0x2b3)][_0x5c97ae(0x1bb)](_0x5c97ae(0x2c3)+_0x4174bc[_0x5c97ae(0x162)](0x5)['trim']());else{if(_0x4174bc['startsWith'](_0x5c97ae(0x1da)))try{const _0x1dd504=JSON[_0x5c97ae(0x291)](_0x4174bc[_0x5c97ae(0x162)](0x8)[_0x5c97ae(0x254)]());handlePythonResult(_0x57dcba,_0x1dd504);}catch(_0x41958f){}}});}),_0x57dcba['pythonProcess']['on'](_0x3372da(0x233),_0x20d52b=>{const _0x11c9a0=_0x3372da;_0x57dcba[_0x11c9a0(0x166)]=null;});}catch(_0x472ca4){_0x57dcba[_0x3372da(0x2b3)][_0x3372da(0x2ec)](_0x3372da(0x295)+_0x472ca4[_0x3372da(0x1fe)]);}}async function runAutopilot(_0x3c4d1b){const _0x35a9a5=a0_0x2868c6;_0x3c4d1b[_0x35a9a5(0x2b3)][_0x35a9a5(0x1bb)](_0x35a9a5(0x1b1)),await runGeminiAnalysis(_0x3c4d1b),updateHealthVector(_0x3c4d1b),triggerGaitAnalysis(_0x3c4d1b),triggerEnergyPrediction(_0x3c4d1b);}async function triggerGaitAnalysis(_0x45a3ae){const _0x33fd0c=a0_0x2868c6;if(!_0x45a3ae['isProVersion'])return;try{const _0x555b00=await _0x45a3ae[_0x33fd0c(0x1e6)](_0x33fd0c(0x29a));_0x555b00&&_0x555b00['val']&&sendToPython(_0x45a3ae,'ANALYZE_GAIT',{'sequences':JSON[_0x33fd0c(0x291)](_0x555b00[_0x33fd0c(0x29d)])});}catch(_0xde9454){}}async function triggerEnergyPrediction(_0x37a633){const _0x312441=a0_0x2868c6;if(!_0x37a633[_0x312441(0x27a)])return;try{const _0x52ad35=await getOutsideTemperatureNumeric(_0x37a633);if(_0x52ad35===null)return;const _0x48736e={},_0xc7d12=_0x37a633[_0x312441(0x194)][_0x312441(0x2b8)]||[];for(const _0x57cd3b of _0xc7d12){if(_0x57cd3b[_0x312441(0x2d2)]==='temperature'&&_0x57cd3b['location']){const _0x24db65=_0x37a633['sensorLastValues'][_0x57cd3b['id']];if(_0x24db65!==undefined)_0x48736e[_0x57cd3b[_0x312441(0x180)]]=_0x24db65;}}Object[_0x312441(0x1f0)](_0x48736e)[_0x312441(0x269)]>0x0&&sendToPython(_0x37a633,_0x312441(0x1bd),{'current_temps':_0x48736e,'t_out':_0x52ad35});}catch(_0x4b7dfb){}}function updateHealthVector(_0x1a97d7){const _0x2e7ccc=a0_0x2868c6;if(!_0x1a97d7[_0x2e7ccc(0x189)]||_0x1a97d7[_0x2e7ccc(0x189)][_0x2e7ccc(0x269)]===0x0)return;const _0x3543bf=new Array(0x60)[_0x2e7ccc(0x20f)](0x0),_0x4f826c=new Date()[_0x2e7ccc(0x19c)](0x0,0x0,0x0,0x0);_0x1a97d7[_0x2e7ccc(0x189)][_0x2e7ccc(0x177)](_0x50f2c9=>{const _0x2954c7=_0x2e7ccc,_0x26d3de=new Date(_0x50f2c9[_0x2954c7(0x1c5)]);if(_0x26d3de[_0x2954c7(0x27d)]()>=_0x4f826c){const _0x4f3dca=_0x26d3de[_0x2954c7(0x2da)](),_0x5dca89=_0x26d3de[_0x2954c7(0x23f)](),_0x41c28d=_0x4f3dca*0x4+Math[_0x2954c7(0x1f5)](_0x5dca89/0xf);if(_0x41c28d>=0x0&&_0x41c28d<0x60)_0x3543bf[_0x41c28d]++;}}),_0x1a97d7[_0x2e7ccc(0x2e8)](_0x2e7ccc(0x1a6),{'val':JSON[_0x2e7ccc(0x185)](_0x3543bf),'ack':!![]});}function a0_0x3cbe(_0x5e0d3a,_0x281144){const _0x2b5224=a0_0x5b88();return a0_0x3cbe=function(_0x1bbef9,_0x5ebf56){_0x1bbef9=_0x1bbef9-0x161;let _0x5b8859=_0x2b5224[_0x1bbef9];return _0x5b8859;},a0_0x3cbe(_0x5e0d3a,_0x281144);}function a0_0x5b88(){const _0x3f810c=['summary','2856556kiWAAh','analysis.energy.heatingScore','latitude',')\x20-\x20SAFE\x20BOOT','cancel','Target\x20Value','Heating\x20Score','Training\x20Status','join','forEach','analysis.health.gaitSpeed','analysis.training.triggerSecurity','.\x20WETTER:\x20','json','toISOString','setupModeResetScheduler','licenseKey','events.lastEvent','location','getOverviewData','getGenerativeModel','toLocaleTimeString','cogni-living\x20adapter\x20starting\x20(v','stringify','System','generateContent','writable','rawEventLog','Temperature\x20Forecast','kontakt','analysis.automation.description','Skipped\x20(No\x20AI\x20or\x20Data)','Unknown','inactivityThresholdHours','Alert\x20Status','analysis.automation.triggerAction','now','longitude','config','system.mode','subscribeStates','SIMULATION:\x20Test-Vorschlag\x20f√ºr\x20','LTM.dailyDigests','analysis.training','analysis.training.status','channel','setHours','Kein\x20API\x20Key.','useWeather','normal','name','loc','analysis.trigger','simulateButler','Regel\x20erkannt:\x20','Trigger\x20Action','analysis.health.todayVector','lastAlertState','targetValue','analysis.lastResult','Who\x20is\x20present?','ü§ñ\x20BUTLER:\x20Executing\x20Action\x20->\x20','dependencyInstallInProgress','\x0aGrund:\x20','Anomaly\x20Detected','TRAIN_COMFORT','description','ü§ñ\x20Autopilot:\x20Running\x20periodic\x20analysis...','party','models/gemini-flash-latest','data','temperatur','Trend\x20Value','setupLtmScheduler','.forecast.current.temperature','Health\x20Analysis','sensorLastValues','debug','occupancy','PREDICT_ENERGY','analysis.training.triggerComfort','Gemini\x20Init\x20Error:\x20','presence','testApiKey','push','OK:\x20','vacation','timestamp','(((.+)+)+)+$','Build\x20Topology','shift','BUILD_TOPOLOGY','NORMAL','VACATION','command','number','getForeignObjectsAsync','fenster','analysis.energy.insulationScore','ltmLtbWindowDays','rule','accuweather','Detected\x20Patterns','SECURITY_RESULT','system.presenceWho','online','status','setObjectNotExistsAsync','[RESULT]','2162418OaEeam','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','analysisInterval','setupDriftAnalysisScheduler','Err:\x20','Keine\x20Termine.','path','events.history','ENERGY_PREDICT_RESULT','Kalender\x20deaktiviert.','subscribeForeignStatesAsync','getStateAsync','callback','ready','systemConfig','child_process','Train\x20Security','analysis.activitySummary','Kein\x20API\x20Key!','Last\x20Check','targetId','keys','Training\x20Error:\x20','exitTimer','getDate','analysis.health.trendValue','floor','minDaysForBaseline','endsWith','info','‚ö†Ô∏è\x20ALARM:\x20','constructor','4348356OwXsEl','Trend','unshift','message','notifyTelegramInstance','analysisHistory','Topology\x20Error:\x20','analysis.automation.targetId','window','boolean','map','Lernphase\x20(','.forecast.current.state','onUnload','pr√§senz','isPresent','cogni-living','enum','bewegung','includes','fill','\x20->\x20','HEALTH_TRAIN_RESULT','apiKey','analysis.isAlert','analysis.health','string','checkAndInstall','No\x20instance','analysis.energy','threshold','analysis.security.lastCheck','üï∏Ô∏è\x20Building\x20Topology\x20Matrix...','enum.rooms.*','ANALYZE_TREND','@google/generative-ai','namespace','getFullYear','getEnums','analysis.energy.forecast','details','Adapter','30473377WVzVgw','values','briefingJob','setForeignStateAsync','driftDetails','1670bYarWF','stdin','WiFi\x20Presence\x20detected.','splice','system.isPresent','toString','indicator','geminiModel','weatherInstance','close','pop','@iobroker/adapter-core','Train\x20Health','LTM.driftAnalysis.baselineDrift','.\x20EVENTS:\x20','driftAnalysisTimer','door','round','Today\x20Vector\x20(15m)','isEmergency','geminiApiKey','getMinutes','HEALTH_RESULT','Event\x20History','Sec-Training\x20started...','./lib/installer','analysis.security.topologyMatrix','30736lpfWON','üß™\x20Simulating\x20Butler\x20Proposal:\x20','state','daswetter','object','.\x20SYSTEM_MODE:\x20','System\x20Mode','dismissAutomation','Activity\x20Summary','replace','getMonth','genAI','onStateChange','success','modeResetJob','trim','LTM.driftAnalysis.lastCheck','confidence','üß†\x20Triggering\x20Security\x20Training...','write','analysis.health.lastCheck','instance','alertReason','PONG','slice','Insulation\x20Score','text','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','schalter','payload','guest','Target\x20ID','calendarInstance','.\x20EMERGENCY:\x20','kill','.\x20KONTEXT:\x20','length','scanForDevices','analysis.alertReason','üìù\x20Feedback\x20received:\x20','Keine\x20Wetterdaten\x20verf√ºgbar.','analysis.health.isAnomaly','version','analysis.automation.detectedPatterns','31068bOeYGM','heating','analysis.automation.autoApply','isAlert','Thermodynamics','stdout','analysis.history_debug_00','insulation','analysis.security','isProVersion','Last\x20raw\x20event','isGracePeriodActive','getTime','date','dimmer','from','TRAIN_HEALTH','weatherunderground','\x20=\x20','.communicate.request','enum.functions.*','autoApply','existsSync','.Current.Temperature','LTM.trainingData.thermodynamics','setState','üõ°Ô∏è\x20SECURITY\x20CHECK:\x20Score\x20','light','setupBriefingScheduler','filter','communicate.request','AI\x20Training','parse','[LOG]','Sequences','button','Error\x20launching\x20Python:\x20','Trigger\x20Briefing','unload','.NextHours.Location_1.Day_1.current.temp_value','Activity-Level','LTM.trainingData.sequences','Success:\x20','apply','val','outdoorSensorId','logDuplicates','Auto\x20Apply','‚úÖ\x20HEALTH\x20TRAINED.','Raw\x20Log','LTM.processingStatus','ltmJob','analysis.security.currentThreshold','getCalendarNames','N/A','switch','common','sendTo','analysis.automation.patternDetected','Gait\x20Speed\x20Trend','LTM.rawEventLog','Deaktiviert\x20(Pro-Feature)','analysis.health.trendDiagnosis','automationProposal','livingContext','useCalendar','log','scanDevices','ltmStbWindowDays','exitGraceTimer','LTM.triggerDailyDigest','devices','üåÖ\x20Morning\x20Briefing:\x0a','[RECORDER]\x20Error:\x20','analysis.training.triggerTopology','¬∞C,\x20','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','motion','3AokBPd','Keine\x20Details.','lampe','analysis.analysisHistory','[PYTHON]\x20','extendObjectAsync','5gDMPmm','heizung','toFixed','Success','COMFORT_RESULT','N/A\x20(Learning)','some','startsWith','Fokus\x20auf\x20Komfort.','eventHistory','onMessage','analysisTimer','TOPOLOGY_RESULT','type','reason','triggerBriefing','ANALYZE_HEALTH','bind','licht','is_anomaly','analysis.triggerBriefing','getHours','getForeignStateAsync','analysis.automation.targetValue','PARTY','diagnosis','toLowerCase','TRAIN_SECURITY','Daily\x20Digests','triggerDailyDigest','Train\x20Energy','Current\x20Threshold','currentSystemMode','Gemini\x20Error:\x20','system','setStateAsync','analysis.training.triggerEnergy','analysis.security.lastScore','dailyDigests','error','python_service','response','996368RSXitU','delObjectAsync','TREND_RESULT','Missing\x20data','üõãÔ∏è\x20BUTLER:\x20Keine\x20neuen\x20Muster\x20gefunden.','üï∏Ô∏è\x20Topology\x20Map\x20updated.','Gemini\x20AI\x20initialized.','BUTLER\x20Execution\x20Error:\x20','substring','value','ack','change_percent','pythonProcess','city','GAIT_RESULT','activityLevel','PRIORIT√ÑT:\x20Sicherheit.','791xKHrTV','presenceDevices'];a0_0x5b88=function(){return _0x3f810c;};return a0_0x5b88();}async function getWeatherContext(_0x5a6c48){const _0x8ada8c=a0_0x2868c6;if(!_0x5a6c48[_0x8ada8c(0x194)][_0x8ada8c(0x19e)]||!_0x5a6c48[_0x8ada8c(0x194)][_0x8ada8c(0x232)])return'Wetterdaten\x20deaktiviert.';try{const _0x53360a=_0x5a6c48[_0x8ada8c(0x194)][_0x8ada8c(0x232)];let _0x1ae673=await _0x5a6c48[_0x8ada8c(0x2db)](_0x53360a+_0x8ada8c(0x288));if(!_0x1ae673)_0x1ae673=await _0x5a6c48[_0x8ada8c(0x2db)](_0x53360a+_0x8ada8c(0x1b8));let _0x79b45b=await _0x5a6c48[_0x8ada8c(0x2db)](_0x53360a+'.Current.WeatherText');if(!_0x79b45b)_0x79b45b=await _0x5a6c48[_0x8ada8c(0x2db)](_0x53360a+_0x8ada8c(0x207));if(_0x1ae673&&_0x79b45b)return _0x1ae673[_0x8ada8c(0x29d)]+_0x8ada8c(0x2bc)+_0x79b45b['val'];}catch(_0x455973){}return _0x8ada8c(0x26d);}async function getCalendarContext(_0x16085d){const _0x240e34=a0_0x2868c6;if(!_0x16085d['config'][_0x240e34(0x2b2)]||!_0x16085d['config'][_0x240e34(0x265)])return _0x240e34(0x1e4);return _0x240e34(0x1e0);}async function getCalendarNames(_0x3bd0d8,_0x3a60e4){return[];}async function saveFeedback(_0x4a6565,_0x1c0327){const _0x28d6ad=a0_0x2868c6;_0x4a6565[_0x28d6ad(0x2b3)][_0x28d6ad(0x1f8)](_0x28d6ad(0x26c)+_0x1c0327['rating']);}async function runGeminiAnalysis(_0x3f61bd,_0x358840=''){const _0x553568=a0_0x2868c6;if(!_0x3f61bd[_0x553568(0x231)])return;if(_0x3f61bd[_0x553568(0x2ce)][_0x553568(0x269)]===0x0)return;const _0x35f0f1=_0x3f61bd['eventHistory'][_0x553568(0x25d)](0x0,0xf),_0x5719b5=await getWeatherContext(_0x3f61bd),_0x5cd456=_0x3f61bd[_0x553568(0x2e5)],_0x969575=PERSONA_MAPPING[_0x3f61bd[_0x553568(0x194)]['aiPersona']||'generic'],_0x392fde=_0x3f61bd[_0x553568(0x194)][_0x553568(0x2b1)]||_0x553568(0x2c0);let _0x2857fa='Unbekannt';try{const _0xc33fd4=await _0x3f61bd['getStateAsync'](_0x553568(0x1d6));if(_0xc33fd4&&_0xc33fd4[_0x553568(0x29d)])_0x2857fa=_0xc33fd4[_0x553568(0x29d)];}catch(_0x34675f){}let _0x57966a=![];try{const _0x49db6c=await _0x3f61bd[_0x553568(0x1e6)]('analysis.automation.autoApply');if(_0x49db6c&&_0x49db6c[_0x553568(0x29d)])_0x57966a=!![];}catch(_0x2a31ef){}const _0x3052cb=_0x553568(0x260)+_0x969575+_0x553568(0x268)+_0x392fde+_0x553568(0x24a)+_0x5cd456+_0x553568(0x17a)+_0x5719b5+'.\x20ANWESEND:\x20'+_0x2857fa+_0x553568(0x238)+JSON[_0x553568(0x185)](_0x35f0f1)+_0x553568(0x266)+_0x358840+'.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}';try{const _0x52f427=await _0x3f61bd['geminiModel'][_0x553568(0x187)](_0x3052cb),_0x4a248d=JSON[_0x553568(0x291)](_0x52f427[_0x553568(0x2ee)]['text']()['replace'](/```json|```/g,'')[_0x553568(0x254)]());await _0x3f61bd[_0x553568(0x2e8)](_0x553568(0x1a9),{'val':JSON[_0x553568(0x185)](_0x4a248d),'ack':!![]});if(_0x4a248d[_0x553568(0x16d)])await _0x3f61bd[_0x553568(0x2e8)](_0x553568(0x1ec),{'val':_0x4a248d[_0x553568(0x16d)],'ack':!![]});const _0x33d3a1={'timestamp':Date[_0x553568(0x192)](),'id':Date['now']()[_0x553568(0x22f)](),'analysis':{'activity':{'summary':_0x4a248d[_0x553568(0x16d)],'isAlert':_0x4a248d[_0x553568(0x274)],'alertReason':_0x4a248d[_0x553568(0x25b)]},'comfort':{'automationProposal':_0x4a248d[_0x553568(0x2b0)]}}};await updateAnalysisHistory(_0x3f61bd,_0x33d3a1);const _0x2ddc2f=_0x4a248d[_0x553568(0x274)]||![];_0x2ddc2f!==_0x3f61bd[_0x553568(0x1a7)]&&(await _0x3f61bd[_0x553568(0x2e8)]('analysis.isAlert',{'val':_0x2ddc2f,'ack':!![]}),_0x3f61bd[_0x553568(0x1a7)]=_0x2ddc2f,_0x2ddc2f&&(await _0x3f61bd[_0x553568(0x2e8)](_0x553568(0x26b),{'val':_0x4a248d[_0x553568(0x25b)],'ack':!![]}),sendNotification(_0x3f61bd,_0x553568(0x1f9)+_0x4a248d['alertReason'],![],_0x4a248d[_0x553568(0x23d)])));if(_0x4a248d[_0x553568(0x2b0)]&&_0x4a248d[_0x553568(0x2b0)]['detected']){await _0x3f61bd[_0x553568(0x2e8)](_0x553568(0x2ab),{'val':!![],'ack':!![]}),await _0x3f61bd[_0x553568(0x2e8)](_0x553568(0x18c),{'val':_0x4a248d['automationProposal'][_0x553568(0x1b0)],'ack':!![]}),await _0x3f61bd[_0x553568(0x2e8)]('analysis.automation.targetId',{'val':_0x4a248d[_0x553568(0x2b0)][_0x553568(0x1ef)],'ack':!![]}),await _0x3f61bd[_0x553568(0x2e8)](_0x553568(0x2dc),{'val':JSON[_0x553568(0x185)](_0x4a248d[_0x553568(0x2b0)][_0x553568(0x1a8)]),'ack':!![]});if(_0x57966a)executeAutomationAction(_0x3f61bd);}}catch(_0x4fd3d9){_0x3f61bd[_0x553568(0x2b3)][_0x553568(0x2ec)](_0x553568(0x2e6)+_0x4fd3d9[_0x553568(0x1fe)]);}}async function startSystem(_0x1dc92f){const _0x35269d=a0_0x2868c6;_0x1dc92f[_0x35269d(0x2b3)][_0x35269d(0x1f8)]('üöÄ\x20Starting\x20NUUKANNI\x20Logic\x20(v0.12.10)...'),await initZombies(_0x1dc92f);try{_0x1dc92f['isProVersion']=await checkLicense(_0x1dc92f['config'][_0x35269d(0x17e)]);}catch(_0x4e2c59){}if(!_0x1dc92f[_0x35269d(0x194)]['inactivityThresholdHours']||_0x1dc92f[_0x35269d(0x194)][_0x35269d(0x18f)]<0.1)_0x1dc92f[_0x35269d(0x194)][_0x35269d(0x18f)]=0xc;await initHistory(_0x1dc92f),await initSystemConfig(_0x1dc92f);if(_0x1dc92f['config']['geminiApiKey'])try{_0x1dc92f[_0x35269d(0x250)]=new GoogleGenerativeAI(_0x1dc92f[_0x35269d(0x194)][_0x35269d(0x23e)]),_0x1dc92f['geminiModel']=_0x1dc92f[_0x35269d(0x250)][_0x35269d(0x182)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':'application/json'}}),_0x1dc92f['log'][_0x35269d(0x1f8)](_0x35269d(0x2f5));}catch(_0x5bc49a){_0x1dc92f[_0x35269d(0x2b3)]['error'](_0x35269d(0x1bf)+_0x5bc49a['message']);}await createAllObjects(_0x1dc92f),await loadSystemMode(_0x1dc92f),await loadRawEventLog(_0x1dc92f),await loadDailyDigests(_0x1dc92f),_0x1dc92f[_0x35269d(0x196)](_0x35269d(0x1a2)),_0x1dc92f[_0x35269d(0x196)](LTM_DP_TRIGGER_DIGEST),_0x1dc92f[_0x35269d(0x196)](_0x35269d(0x195)),_0x1dc92f['subscribeStates'](_0x35269d(0x2d9)),_0x1dc92f['subscribeStates'](_0x35269d(0x191)),_0x1dc92f[_0x35269d(0x196)](_0x35269d(0x273)),_0x1dc92f[_0x35269d(0x196)](_0x35269d(0x179)),_0x1dc92f['subscribeStates']('analysis.training.triggerHealth'),_0x1dc92f[_0x35269d(0x196)]('analysis.training.triggerEnergy'),_0x1dc92f[_0x35269d(0x196)](_0x35269d(0x1be)),_0x1dc92f[_0x35269d(0x196)]('analysis.training.triggerTopology'),await initSensorSubscriptions(_0x1dc92f),await initPresenceSubscriptions(_0x1dc92f),await setupTelegramListener(_0x1dc92f),setTimeout(()=>checkWifiPresence(_0x1dc92f),0x1388);if(_0x1dc92f[_0x35269d(0x2d0)])clearInterval(_0x1dc92f[_0x35269d(0x2d0)]);const _0x5a9671=_0x1dc92f['config'][_0x35269d(0x1dd)]||0xf;_0x5a9671>0x0&&(_0x1dc92f['analysisTimer']=setInterval(()=>{runAutopilot(_0x1dc92f);},_0x5a9671*0x3c*0x3e8)),schedulers[_0x35269d(0x1b7)](_0x1dc92f,()=>createDailyDigest(_0x1dc92f)),schedulers[_0x35269d(0x17d)](_0x1dc92f),schedulers[_0x35269d(0x1de)](_0x1dc92f,()=>runBaselineDriftAnalysis(_0x1dc92f)),schedulers[_0x35269d(0x28d)](_0x1dc92f,()=>sendMorningBriefing(_0x1dc92f)),startPythonService(_0x1dc92f),setTimeout(()=>{const _0x1801c2=_0x35269d;_0x1dc92f[_0x1801c2(0x166)]&&(runPythonHealthCheck(_0x1dc92f),triggerGaitAnalysis(_0x1dc92f),triggerEnergyPrediction(_0x1dc92f)),updateHealthVector(_0x1dc92f);},0x1388);}class CogniLiving extends utils[a0_0x2868c6(0x224)]{constructor(_0x1cfc77){const _0x248662=a0_0x2868c6;super({..._0x1cfc77,'name':_0x248662(0x20b)}),this[_0x248662(0x2ce)]=[],this[_0x248662(0x200)]=[],this['rawEventLog']=[],this[_0x248662(0x2eb)]=[],this['sensorLastValues']={},this[_0x248662(0x1e9)]={'latitude':0x0,'longitude':0x0,'city':''},this['isPresent']=!![],this[_0x248662(0x1f2)]=null,this[_0x248662(0x2b6)]=null,this['isGracePeriodActive']=![],this[_0x248662(0x250)]=null,this[_0x248662(0x231)]=null,this[_0x248662(0x2e5)]=SYSTEM_MODES[_0x248662(0x1ca)],this['isProVersion']=![],this[_0x248662(0x1a7)]=![],this['systemUUID']='unknown',this['analysisTimer']=null,this[_0x248662(0x2a4)]=null,this[_0x248662(0x253)]=null,this[_0x248662(0x239)]=null,this[_0x248662(0x227)]=null,this[_0x248662(0x166)]=null,this[_0x248662(0x1ac)]=![],this['on'](_0x248662(0x1e8),this['onReady']['bind'](this)),this['on']('stateChange',this['onStateChange']['bind'](this)),this['on'](_0x248662(0x297),this['onUnload']['bind'](this)),this['on'](_0x248662(0x1fe),this['onMessage'][_0x248662(0x2d6)](this));}async['onReady'](){const _0x1a81ab=a0_0x2868c6;this[_0x1a81ab(0x2b3)][_0x1a81ab(0x1f8)](_0x1a81ab(0x184)+this[_0x1a81ab(0x26f)]+_0x1a81ab(0x171));if(!installer[_0x1a81ab(0x216)](this,()=>startSystem(this)))return;}[a0_0x2868c6(0x208)](_0x5a44ac){const _0x4fe506=a0_0x2868c6;if(this['analysisTimer'])clearInterval(this[_0x4fe506(0x2d0)]);if(this['driftAnalysisTimer'])clearInterval(this['driftAnalysisTimer']);if(this[_0x4fe506(0x2a4)])this[_0x4fe506(0x2a4)][_0x4fe506(0x172)]();if(this[_0x4fe506(0x253)])this['modeResetJob'][_0x4fe506(0x172)]();if(this['briefingJob'])this[_0x4fe506(0x227)][_0x4fe506(0x172)]();if(this['exitTimer'])clearTimeout(this[_0x4fe506(0x1f2)]);if(this['exitGraceTimer'])clearTimeout(this[_0x4fe506(0x2b6)]);stopPythonService(this),_0x5a44ac();}async[a0_0x2868c6(0x251)](_0x18d523,_0x45d21a){const _0x5699f0=a0_0x2868c6;if(!_0x45d21a||this[_0x5699f0(0x1ac)])return;if(_0x18d523['includes']('telegram')&&_0x18d523[_0x5699f0(0x1f7)](_0x5699f0(0x28f))&&_0x45d21a[_0x5699f0(0x29d)]){await handleTelegramResponse(this,_0x45d21a[_0x5699f0(0x29d)]);return;}if(_0x18d523===this[_0x5699f0(0x21f)]+'.'+SYSTEM_DP_MODE){if(_0x45d21a[_0x5699f0(0x29d)]&&Object[_0x5699f0(0x226)](SYSTEM_MODES)['includes'](_0x45d21a[_0x5699f0(0x29d)])){this[_0x5699f0(0x2e5)]=_0x45d21a[_0x5699f0(0x29d)];if(_0x45d21a['val']===SYSTEM_MODES[_0x5699f0(0x1cb)])await setPresence(this,![]);else await setPresence(this,!![]);}if(!_0x45d21a[_0x5699f0(0x164)])this[_0x5699f0(0x28a)](_0x18d523,{'val':this[_0x5699f0(0x2e5)],'ack':!![]});return;}if(!_0x45d21a[_0x5699f0(0x164)]){_0x18d523[_0x5699f0(0x20e)]('analysis.trigger')&&_0x45d21a[_0x5699f0(0x29d)]&&(this[_0x5699f0(0x28a)](_0x18d523,{'val':![],'ack':!![]}),runGeminiAnalysis(this));if(_0x18d523[_0x5699f0(0x20e)](_0x5699f0(0x2e2))&&_0x45d21a[_0x5699f0(0x29d)]){this[_0x5699f0(0x28a)](_0x18d523,{'val':![],'ack':!![]});if(this[_0x5699f0(0x27a)])createDailyDigest(this);}_0x18d523['includes'](_0x5699f0(0x2d4))&&_0x45d21a['val']&&(this[_0x5699f0(0x28a)](_0x18d523,{'val':![],'ack':!![]}),sendMorningBriefing(this));_0x18d523[_0x5699f0(0x20e)]('automation.triggerAction')&&_0x45d21a[_0x5699f0(0x29d)]&&(this[_0x5699f0(0x28a)](_0x18d523,{'val':![],'ack':!![]}),executeAutomationAction(this));if(_0x18d523[_0x5699f0(0x20e)](_0x5699f0(0x179))&&_0x45d21a['val']){this[_0x5699f0(0x28a)](_0x18d523,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x59200e=await this[_0x5699f0(0x1e6)](_0x5699f0(0x29a));if(_0x59200e&&_0x59200e[_0x5699f0(0x29d)]){const _0x139b35=JSON[_0x5699f0(0x291)](_0x59200e['val']);this[_0x5699f0(0x2b3)][_0x5699f0(0x1f8)](_0x5699f0(0x257)),this['setStateAsync'](_0x5699f0(0x19a),{'val':_0x5699f0(0x242),'ack':!![]}),sendToPython(this,_0x5699f0(0x2e0),{'sequences':_0x139b35});}}catch(_0x510e34){this[_0x5699f0(0x2b3)]['error'](_0x5699f0(0x1f1)+_0x510e34[_0x5699f0(0x1fe)]);}}if(_0x18d523[_0x5699f0(0x20e)]('analysis.training.triggerHealth')&&_0x45d21a[_0x5699f0(0x29d)]){this[_0x5699f0(0x28a)](_0x18d523,{'val':![],'ack':!![]});if(this[_0x5699f0(0x27a)])try{const _0x103d42=await this['getStateAsync'](LTM_DP_DAILY_DIGESTS);if(_0x103d42&&_0x103d42['val'])sendToPython(this,_0x5699f0(0x281),{'digests':JSON[_0x5699f0(0x291)](_0x103d42[_0x5699f0(0x29d)])});}catch(_0x5e6211){}}if(_0x18d523['includes'](_0x5699f0(0x2e9))&&_0x45d21a[_0x5699f0(0x29d)]){this[_0x5699f0(0x28a)](_0x18d523,{'val':![],'ack':!![]});if(this[_0x5699f0(0x27a)])try{const _0x1d8d7f=await this[_0x5699f0(0x1e6)]('LTM.trainingData.thermodynamics');if(_0x1d8d7f&&_0x1d8d7f['val'])sendToPython(this,'TRAIN_ENERGY',{'points':JSON[_0x5699f0(0x291)](_0x1d8d7f['val'])});}catch(_0x503918){}}if(_0x18d523[_0x5699f0(0x20e)](_0x5699f0(0x1be))&&_0x45d21a['val']){this[_0x5699f0(0x28a)](_0x18d523,{'val':![],'ack':!![]});if(this[_0x5699f0(0x27a)])try{const _0x26f6c8=await this['getStateAsync'](LTM_DP_RAW_LOG);_0x26f6c8&&_0x26f6c8[_0x5699f0(0x29d)]&&(this[_0x5699f0(0x2b3)][_0x5699f0(0x1f8)]('üõãÔ∏è\x20Triggering\x20Comfort\x20Analysis\x20(Pattern\x20Mining)...'),sendToPython(this,_0x5699f0(0x1af),{'events':JSON[_0x5699f0(0x291)](_0x26f6c8[_0x5699f0(0x29d)])}));}catch(_0x3aa0d8){}}if(_0x18d523[_0x5699f0(0x20e)](_0x5699f0(0x2bb))&&_0x45d21a['val']){this['setState'](_0x18d523,{'val':![],'ack':!![]});if(this[_0x5699f0(0x27a)])try{const _0x59aaf3=await this[_0x5699f0(0x1e6)](_0x5699f0(0x29a));if(_0x59aaf3&&_0x59aaf3[_0x5699f0(0x29d)]){const _0x525531=JSON['parse'](_0x59aaf3['val']);this['log']['info'](_0x5699f0(0x21b)),sendToPython(this,_0x5699f0(0x1c9),{'sequences':_0x525531});}}catch(_0x3c7f2a){this[_0x5699f0(0x2b3)][_0x5699f0(0x2ec)](_0x5699f0(0x201)+_0x3c7f2a[_0x5699f0(0x1fe)]);}}return;}if(this[_0x5699f0(0x194)][_0x5699f0(0x16c)]&&this[_0x5699f0(0x194)][_0x5699f0(0x16c)]['includes'](_0x18d523)){await checkWifiPresence(this);return;}const _0x1490a0=(this['config'][_0x5699f0(0x2b8)]||[])['find'](_0x29875d=>_0x29875d['id']===_0x18d523);if(_0x1490a0)processSensorEvent(this,_0x18d523,_0x45d21a,_0x1490a0);}async[a0_0x2868c6(0x2cf)](_0x7c7d9){const _0xf57aa7=a0_0x2868c6;if(typeof _0x7c7d9===_0xf57aa7(0x249)&&_0x7c7d9['message']){if(_0x7c7d9[_0xf57aa7(0x1cc)]===_0xf57aa7(0x1c1)){const _0x6a2fa0=_0x7c7d9[_0xf57aa7(0x1fe)][_0xf57aa7(0x212)]||this['config'][_0xf57aa7(0x23e)];if(!_0x6a2fa0)return this[_0xf57aa7(0x2aa)](_0x7c7d9[_0xf57aa7(0x280)],_0x7c7d9[_0xf57aa7(0x1cc)],{'success':![],'message':_0xf57aa7(0x19d)},_0x7c7d9[_0xf57aa7(0x1e7)]);try{const _0x65bdcb=new GoogleGenerativeAI(_0x6a2fa0),_0x496e02=_0x65bdcb[_0xf57aa7(0x182)]({'model':GEMINI_MODEL}),_0x497f2a=await _0x496e02['generateContent']('Hi');this['sendTo'](_0x7c7d9[_0xf57aa7(0x280)],_0x7c7d9[_0xf57aa7(0x1cc)],{'success':!![],'message':_0xf57aa7(0x1c3)+_0x497f2a[_0xf57aa7(0x2ee)][_0xf57aa7(0x25f)]()},_0x7c7d9[_0xf57aa7(0x1e7)]);}catch(_0x2da6fa){this[_0xf57aa7(0x2aa)](_0x7c7d9[_0xf57aa7(0x280)],_0x7c7d9[_0xf57aa7(0x1cc)],{'success':![],'message':_0xf57aa7(0x1df)+_0x2da6fa[_0xf57aa7(0x1fe)]},_0x7c7d9[_0xf57aa7(0x1e7)]);}}else{if(_0x7c7d9['command']==='testContext'){const _0x310317=await getWeatherContext(this),_0x311319=await getCalendarContext(this);this[_0xf57aa7(0x2aa)](_0x7c7d9['from'],_0x7c7d9[_0xf57aa7(0x1cc)],{'success':!![],'weather':_0x310317,'calendar':_0x311319},_0x7c7d9[_0xf57aa7(0x1e7)]);}else{if(_0x7c7d9[_0xf57aa7(0x1cc)]==='getLtmData'){if(!this[_0xf57aa7(0x27a)])return this[_0xf57aa7(0x2aa)](_0x7c7d9[_0xf57aa7(0x280)],_0x7c7d9[_0xf57aa7(0x1cc)],{'success':![],'isPro':![]},_0x7c7d9[_0xf57aa7(0x1e7)]);let _0x3c015f={'status':_0xf57aa7(0x2a7)};try{const _0x276036=await this[_0xf57aa7(0x1e6)](LTM_DP_DRIFT_STATUS);_0x3c015f[_0xf57aa7(0x1d8)]=_0x276036?_0x276036[_0xf57aa7(0x29d)]:'N/A';}catch(_0x2a21b3){}this[_0xf57aa7(0x2aa)](_0x7c7d9['from'],_0x7c7d9[_0xf57aa7(0x1cc)],{'success':!![],'isPro':!![],'dailyDigests':this[_0xf57aa7(0x2eb)],'driftAnalysis':_0x3c015f,'analysisHistory':this[_0xf57aa7(0x200)]},_0x7c7d9[_0xf57aa7(0x1e7)]);}else{if(_0x7c7d9[_0xf57aa7(0x1cc)]===_0xf57aa7(0x181)){const _0x503a44=this['dailyDigests'][_0xf57aa7(0x269)],_0x553822=new Date(),_0x37fb59=new Date(_0x553822[_0xf57aa7(0x220)](),_0x553822[_0xf57aa7(0x24f)](),_0x553822[_0xf57aa7(0x1f3)]())['getTime'](),_0x4cbe67=this[_0xf57aa7(0x189)][_0xf57aa7(0x28e)](_0x3e04ff=>new Date(_0x3e04ff[_0xf57aa7(0x1c5)])[_0xf57aa7(0x27d)]()>_0x37fb59)[_0xf57aa7(0x269)],_0x36c3e5=new Array(0x18)[_0xf57aa7(0x20f)](0x0);this[_0xf57aa7(0x189)][_0xf57aa7(0x177)](_0x5893a3=>{const _0x2affde=new Date(_0x5893a3['timestamp']);if(_0x2affde['getTime']()>_0x37fb59)_0x36c3e5[_0x2affde['getHours']()]++;});let _0x3847e7={'status':_0xf57aa7(0x2a7)};try{const _0x4d4602=await this[_0xf57aa7(0x1e6)](LTM_DP_DRIFT_STATUS);_0x3847e7[_0xf57aa7(0x1d8)]=_0x4d4602?_0x4d4602['val']:'N/A';}catch(_0x43b363){}let _0x1af735='';try{const _0x327440=await this['getStateAsync'](_0xf57aa7(0x1d6));_0x1af735=_0x327440?_0x327440[_0xf57aa7(0x29d)]:'';}catch(_0x4c569a){}let _0xf4fe25=null;!this[_0xf57aa7(0x231)]&&(_0xf4fe25=this[_0xf57aa7(0x194)]['geminiApiKey']?'KI-Modell\x20nicht\x20initialisiert':_0xf57aa7(0x1ed));let _0x5d24b6={'detected':![],'description':'','targetId':'','targetValue':'','autoApply':![]};try{const _0x5b0635=await this[_0xf57aa7(0x1e6)](_0xf57aa7(0x2ab));if(_0x5b0635&&_0x5b0635['val']){_0x5d24b6['detected']=!![];const _0x4bea67=await this['getStateAsync'](_0xf57aa7(0x18c));_0x5d24b6['description']=_0x4bea67?_0x4bea67[_0xf57aa7(0x29d)]:'';const _0x39a0fb=await this[_0xf57aa7(0x1e6)](_0xf57aa7(0x202));_0x5d24b6[_0xf57aa7(0x1ef)]=_0x39a0fb?_0x39a0fb[_0xf57aa7(0x29d)]:'';const _0x111977=await this['getStateAsync'](_0xf57aa7(0x2dc));_0x5d24b6[_0xf57aa7(0x1a8)]=_0x111977?_0x111977['val']:'';}const _0x35d065=await this[_0xf57aa7(0x1e6)]('analysis.automation.autoApply');_0x5d24b6[_0xf57aa7(0x286)]=_0x35d065?!!_0x35d065['val']:![];}catch(_0x5b6f59){}this['sendTo'](_0x7c7d9['from'],_0x7c7d9[_0xf57aa7(0x1cc)],{'success':!![],'eventHistory':this[_0xf57aa7(0x2ce)]['slice'](0x0,0xf),'stats':{'digestCount':_0x503a44,'eventCountToday':_0x4cbe67,'hourlyActivity':_0x36c3e5,'driftStatus':_0x3847e7[_0xf57aa7(0x1d8)],'isPresent':this[_0xf57aa7(0x20a)],'presenceWho':_0x1af735,'minDays':this[_0xf57aa7(0x194)][_0xf57aa7(0x1f6)]||0x7,'stbDays':this[_0xf57aa7(0x194)]['ltmStbWindowDays']||0xe,'ltbDays':this[_0xf57aa7(0x194)][_0xf57aa7(0x1d1)]||0x3c,'systemError':_0xf4fe25},'automation':_0x5d24b6},_0x7c7d9['callback']);}else{if(_0x7c7d9[_0xf57aa7(0x1cc)]===_0xf57aa7(0x2b4))try{const _0x287bdb=await scanner[_0xf57aa7(0x26a)](this,_0x7c7d9[_0xf57aa7(0x1fe)]||{});this[_0xf57aa7(0x2aa)](_0x7c7d9[_0xf57aa7(0x280)],_0x7c7d9[_0xf57aa7(0x1cc)],{'success':!![],'devices':_0x287bdb},_0x7c7d9[_0xf57aa7(0x1e7)]);}catch(_0x236468){this['sendTo'](_0x7c7d9[_0xf57aa7(0x280)],_0x7c7d9['command'],{'success':![],'error':_0x236468[_0xf57aa7(0x1fe)]},_0x7c7d9[_0xf57aa7(0x1e7)]);}else{if(_0x7c7d9[_0xf57aa7(0x1cc)]===_0xf57aa7(0x221)){const _0x205747=await this[_0xf57aa7(0x1ce)](_0xf57aa7(0x285),_0xf57aa7(0x20c)),_0x12db31=[];if(_0x205747)for(const _0x365644 in _0x205747){const _0x2dc4f8=_0x205747[_0x365644],_0x4c9db0=(_0x2dc4f8[_0xf57aa7(0x2a9)]&&typeof _0x2dc4f8[_0xf57aa7(0x2a9)][_0xf57aa7(0x1a0)]===_0xf57aa7(0x249)?_0x2dc4f8['common'][_0xf57aa7(0x1a0)]['de']:_0x2dc4f8['common']['name'])||_0x2dc4f8[_0xf57aa7(0x2a9)][_0xf57aa7(0x1a0)];_0x12db31[_0xf57aa7(0x1c2)]({'id':_0x365644,'name':_0x4c9db0});}const _0x28150a=await this[_0xf57aa7(0x1ce)](_0xf57aa7(0x21c),_0xf57aa7(0x20c)),_0x59bc43=[];if(_0x28150a)for(const _0x4e30ce in _0x28150a){const _0x3fc719=_0x28150a[_0x4e30ce],_0x4b0fc7=(_0x3fc719[_0xf57aa7(0x2a9)]&&typeof _0x3fc719['common']['name']===_0xf57aa7(0x249)?_0x3fc719[_0xf57aa7(0x2a9)][_0xf57aa7(0x1a0)]['de']:_0x3fc719[_0xf57aa7(0x2a9)][_0xf57aa7(0x1a0)])||_0x4e30ce['split']('.')['pop']();_0x59bc43['push'](_0x4b0fc7);}this['sendTo'](_0x7c7d9[_0xf57aa7(0x280)],_0x7c7d9[_0xf57aa7(0x1cc)],{'success':!![],'enums':_0x12db31,'rooms':_0x59bc43},_0x7c7d9['callback']);}else{if(_0x7c7d9[_0xf57aa7(0x1cc)]===_0xf57aa7(0x2a6)){const _0x139a31=_0x7c7d9[_0xf57aa7(0x1fe)][_0xf57aa7(0x25a)];if(!_0x139a31)return this[_0xf57aa7(0x2aa)](_0x7c7d9['from'],_0x7c7d9['command'],{'success':![],'error':_0xf57aa7(0x217)},_0x7c7d9['callback']);const _0x278b7d=await getCalendarNames(this,_0x139a31);this[_0xf57aa7(0x2aa)](_0x7c7d9[_0xf57aa7(0x280)],_0x7c7d9[_0xf57aa7(0x1cc)],{'success':!![],'names':_0x278b7d},_0x7c7d9['callback']);}else{if(_0x7c7d9[_0xf57aa7(0x1cc)]===_0xf57aa7(0x1a3)){const {targetId:_0x38e58c,targetValue:_0x5d6680}=_0x7c7d9[_0xf57aa7(0x1fe)];this[_0xf57aa7(0x2b3)][_0xf57aa7(0x1f8)](_0xf57aa7(0x246)+_0x38e58c+_0xf57aa7(0x283)+_0x5d6680),await this['setStateAsync'](_0xf57aa7(0x2ab),{'val':!![],'ack':!![]}),await this[_0xf57aa7(0x2e8)](_0xf57aa7(0x18c),{'val':_0xf57aa7(0x197)+_0x38e58c,'ack':!![]}),await this[_0xf57aa7(0x2e8)]('analysis.automation.targetId',{'val':_0x38e58c,'ack':!![]}),await this['setStateAsync'](_0xf57aa7(0x2dc),{'val':_0x5d6680,'ack':!![]}),this[_0xf57aa7(0x2aa)](_0x7c7d9[_0xf57aa7(0x280)],_0x7c7d9['command'],{'success':!![]},_0x7c7d9[_0xf57aa7(0x1e7)]);}else{if(_0x7c7d9[_0xf57aa7(0x1cc)]==='submitFeedback'){const {historyId:_0x17a701,rating:_0x441114,comment:_0x3ffc7b,alertReason:_0x361458}=_0x7c7d9[_0xf57aa7(0x1fe)];_0x17a701&&_0x441114?(await saveFeedback(this,{'timestamp':Date['now'](),'historyId':_0x17a701,'rating':_0x441114,'comment':_0x3ffc7b,'alertReason':_0x361458}),this[_0xf57aa7(0x2aa)](_0x7c7d9[_0xf57aa7(0x280)],_0x7c7d9[_0xf57aa7(0x1cc)],{'success':!![]},_0x7c7d9[_0xf57aa7(0x1e7)])):this[_0xf57aa7(0x2aa)](_0x7c7d9[_0xf57aa7(0x280)],_0x7c7d9[_0xf57aa7(0x1cc)],{'success':![],'error':_0xf57aa7(0x2f2)},_0x7c7d9[_0xf57aa7(0x1e7)]);}else _0x7c7d9[_0xf57aa7(0x1cc)]===_0xf57aa7(0x24c)&&(this[_0xf57aa7(0x2b3)][_0xf57aa7(0x1f8)]('User\x20dismissed\x20automation\x20proposal.'),await this[_0xf57aa7(0x2e8)](_0xf57aa7(0x2ab),{'val':![],'ack':!![]}),await this[_0xf57aa7(0x2e8)]('analysis.automation.description',{'val':'','ack':!![]}),this['sendTo'](_0x7c7d9[_0xf57aa7(0x280)],_0x7c7d9['command'],{'success':!![]},_0x7c7d9[_0xf57aa7(0x1e7)]));}}}}}}}}}}}if(require['main']!==module)module['exports']=_0x537de9=>new CogniLiving(_0x537de9);else new CogniLiving();