function a0_0x3dcb(){const _0x4d7c98=['getTime','.uptime','updateSchedulePreview','isProVersion','initSchedules','executeAutomationAction','enum.rooms.*','events.history','name','lastTrackerEventTime','infrasoundLocked','\x20rooms)','Room\x20History\x20(24h\x20Buckets)','activeModules','comfort','TRAIN_COMFORT','checkSolarCondition','system.adapter.ical.È¶ô','security','all','enum','bind','Corrupt','stateChange','isRelevantActivity','createDailyDigest','triggerGaitAnalysis\x20parse\x20error:\x20',':\x20Temp-Differenz\x20','toISOString','ready','toLocaleTimeString','constructor','values','moduleHealth','Scan\x20Error:\x20','getMinutes','systemConfig','.last_seen','stringify','./lib/ai_agent','cancel','Standard','Kein\x20API\x20Key\x20√ºbergeben.','bootTime','analysis.health.geminiDay','{\x22today\x22:{},\x20\x22yesterday\x22:{},\x20\x22date\x22:\x22\x22}','onMessage','analysis.prediction.trackerTopRoom','dailyDigests','üö®\x20INFRASCHALL-ALARM:\x20Anomalie\x20bei\x20Abwesenheit\x20(scharf)!','.json','cogni-living','bin','daswetter.0','filter','push','./lib/scheduler','analysisTimer','Sonne:\x20','rawEventLog','send','¬∞C\x20(Innen:\x20','2382381vtyymu','pop','analysis.training.triggerHealth','common','(((.+)+)+)+$','cleanupGhostInterventions','analysis.energy.warmupTimes','./lib/installer','join','number','rows','driftAnalysisTimer','analysis.automation.description','analysis.trigger','triggerHealth\x20error:\x20','location','Niemand','useCalendar','moduleSecurity','\x20events\x20from\x20standard\x20storage.','memoryCache','sendMorningBriefing','NIGHT','shift','date','analysis.ventilation.lastWindow','times','apiKey','sources','analysis.visualization.pulse','apply','string','utf8','calendarName','inactivityThresholdHours','.venv','analysis.security.lastScore','accuweather.0','floor','initHistory','triggerGaitAnalysis\x20error:\x20','runPythonHealthCheck','analysis.training.triggerSecurity','existsSync','exitGraceTimer','toFixed','protectAiMemory','analysis.energy.warmupSources','Live\x20Event\x20Pulse','4959122fCzoLk','subscribeStates','toLowerCase','‚ö†\x20Replay\x20skipped:\x20No\x20events\x20in\x20memory.','SYSTEM_MODES','.isOnline','substring','saveDailyHistory','eventHistory','./lib/topology','communicate.request','sendTo','isSolar','.data.table','val','triggerEnergyPrediction\x20Error:\x20','unload','2772282clOGow','infrasoundArmingId','\x20(Threshold)','includes','appendToLog','timestamp','analysis.automation.patternDetected','initZombies','Unknown','324284Hygyov','TRAIN_TOPOLOGY','DAY','updateHealthVector','getHours','.system.mode','triggerEnergyPrediction','stopService','exports','sendNotification','instance','analysis.automation.targetId','...','analysisHistory','de-DE','cogni-living\x20adapter\x20starting\x20(v','21eGJFjk','system.adapter.ical.','motion','ltmJob','\x20Kalender-Adapter\x20gefunden.','analysis.health.activityTrend','forEach','open','@google/generative-ai','üîä\x20Infraschall:\x20','analysis.energy.warmupTargets','exitTimer','round','setPresence','analysis.health.geminiNight','39554UvYxBW','window','parse','LTM.rawEventLog','analysis.training.triggerComfort','namespace','roomIntegratorTimer','text','LTM.triggerDailyDigest','analyzeWindowOpening\x20error:\x20','L√ºften\x20empfohlen','setObjectNotExistsAsync','debug','guest','./lib/scanner','updateTopology','\x20events\x20from\x20today...','Gemini\x20Init\x20Error:\x20','\x20>\x20','from','üîä\x20Infraschall-Alarm:\x20','handleInfrasound','{\x22history\x22:{}}','Adapter','PREDICT_ENERGY','analyzeWindowOpening','./lib/setup','forecast.current.weather','scanThermostats','party','Current.WeatherText','message','getForeignStateAsync','system.presenceWho','door','geminiApiKey','analysis.automation.targetValue','geminiModel','readFileSync','node-schedule','getStateAsync','testApiKey','custom','Warte\x20auf\x20Analyse...','online','then','licenseKey','info','analysis.prediction.trackerConfidence','energy','klar','todayVector','type','scanForDevices','ack','length','replayTodayEvents','processSensorEvent','Room\x20Dwell\x20Time\x20Stats','getDate','setDate','sonn','config','value','testContext','system','currentSystemMode','2967290YhnNcl','fill','temperature','isPresent','getAbsoluteDefaultDataDir','checkWifiPresence','search','CALCULATE_HEALTH_TREND','üêç\x20Triggering\x20Python\x20Health\x20Check\x20(Activity\x20Trend)...','startSystem','getCalendarNames','setHours','some','isArray','üîÆ\x20Energy\x20Prediction\x20triggered\x20(','telegram','infrasoundThreshold','analysis.activity.roomHistory','./lib/automation','runAutopilot','dependencyInstallInProgress','Guest\x20Mode','pressureBuffer','loadSystemMode','weatherunderground.0','heiter','abs','NextHours.Location_1.Day_1.current.symbol_desc','Say\x20Hello','generateContent','üíæ\x20Saving\x20Daily\x20History\x20for\x20','Daily\x20Activity\x20Vector\x20(48x30min)','üì¶\x20Restored\x20','getOverviewData','state','refreshCalendar\x20failed:\x20','Gute\x20L√ºftungsm√∂glichkeit!','sensorLastValues','History\x20Save\x20Error:\x20','weatherTempId','checkCalendarTriggers','history','analysis.training.triggerEnergy','presenceDevices','./lib/python_bridge','2-digit','presenceCheckTimer','command','VACATION','Sec-Training\x20started...','triggerGaitAnalysis','warn','main','@iobroker/adapter-core','object','General\x20Activity\x20Trend','subscribeForeignStates','analysis.health.todayVector','analysis.health.todayRoomDetails','healthTrendInterval','updateLocation','subscribeForeignStatesAsync','onReady','setStateAsync','Event','thermostat','¬∞C)','¬∞C,\x20Au√üen:\x20','find','haust√ºr','application/json','isGracePeriodActive','now','replace','infrasoundSensorId','SET_LEARNING_MODE','LTM.dailyDigests','moduleEnergy','12585630XqrQQE','üí®\x20L√ºftung\x20in\x20','analysis.activity.roomStats','keys','üìù\x20Manual\x20event\x20logged:\x20','toString','Lernphase\x20(',')\x20-\x20Phase\x20E\x20(Scheduler\x20Fix)','integrateRoomTime','Init...','devices','threshold_exceeded','checkLicense','No\x20data','Warm-Up\x20Time','Verbindung\x20erfolgreich:\x20','LTM.trainingData.sequences','runGeminiAnalysis','genAI','error','Daily\x20Room\x20Details\x20(48x30min)','calendarCheckTimer','slice','getGenerativeModel','log','modeResetJob','onUnload','NORMAL','moduleComfort','add','analysis.security.learningStatus','./lib/dead_man','createAllObjects','split','infrasoundEnabled','8iOGySR','setState','startService','Keine\x20Daten','briefingJob','callback','historyJob','abortExitTimer','health','max','toLocaleDateString','\x20sequences','üö∂\x20Gait\x20Analysis\x20triggered\x20with\x20','TRAIN_SECURITY','scanDevices','endsWith','8IIUZVu'];a0_0x3dcb=function(){return _0x4d7c98;};return a0_0x3dcb();}const a0_0x1f67ae=a0_0x571b;(function(_0x5d8707,_0x2299e1){const _0x597527=a0_0x571b,_0x3dbd50=_0x5d8707();while(!![]){try{const _0x420f02=parseInt(_0x597527(0x1c7))/0x1*(-parseInt(_0x597527(0x113))/0x2)+-parseInt(_0x597527(0x104))/0x3*(-parseInt(_0x597527(0xf4))/0x4)+parseInt(_0x597527(0x156))/0x5+-parseInt(_0x597527(0x258))/0x6+-parseInt(_0x597527(0x247))/0x7+-parseInt(_0x597527(0x1d7))/0x8*(parseInt(_0x597527(0x216))/0x9)+parseInt(_0x597527(0x1a4))/0xa;if(_0x420f02===_0x2299e1)break;else _0x3dbd50['push'](_0x3dbd50['shift']());}catch(_0x5c011d){_0x3dbd50['push'](_0x3dbd50['shift']());}}}(a0_0x3dcb,0xc9af4));const a0_0x1d5e75=(function(){let _0x26abcc=!![];return function(_0x41b56c,_0x967aff){const _0x31a119=_0x26abcc?function(){const _0x264f1f=a0_0x571b;if(_0x967aff){const _0x5da571=_0x967aff[_0x264f1f(0x234)](_0x41b56c,arguments);return _0x967aff=null,_0x5da571;}}:function(){};return _0x26abcc=![],_0x31a119;};}()),a0_0x114057=a0_0x1d5e75(this,function(){const _0x566ad6=a0_0x571b;return a0_0x114057[_0x566ad6(0x1a9)]()[_0x566ad6(0x15c)](_0x566ad6(0x21a))['toString']()[_0x566ad6(0x1f7)](a0_0x114057)[_0x566ad6(0x15c)]('(((.+)+)+)+$');});a0_0x114057();'use strict';const utils=require(a0_0x1f67ae(0x18b)),{GoogleGenerativeAI}=require(a0_0x1f67ae(0x10c)),path=require('path'),fs=require('fs'),installer=require(a0_0x1f67ae(0x21d)),scanner=require(a0_0x1f67ae(0x121)),schedulers=require(a0_0x1f67ae(0x210)),topology=require(a0_0x1f67ae(0x250)),setup=require(a0_0x1f67ae(0x12d)),recorder=require('./lib/recorder'),pythonBridge=require(a0_0x1f67ae(0x182)),aiAgent=require(a0_0x1f67ae(0x1ff)),deadMan=require(a0_0x1f67ae(0x1c3)),automation=require(a0_0x1f67ae(0x168)),GEMINI_MODEL='models/gemini-flash-latest';function a0_0x571b(_0x2590fc,_0x44f99a){const _0x3995b2=a0_0x3dcb();return a0_0x571b=function(_0x114057,_0x1d5e75){_0x114057=_0x114057-0xee;let _0x3dcb25=_0x3995b2[_0x114057];return _0x3dcb25;},a0_0x571b(_0x2590fc,_0x44f99a);}class CogniLiving extends utils[a0_0x1f67ae(0x12a)]{constructor(_0xf53fb2){const _0x1c318e=a0_0x1f67ae;super({..._0xf53fb2,'name':_0x1c318e(0x20b)}),this[_0x1c318e(0x24f)]=[],this[_0x1c318e(0x101)]=[],this[_0x1c318e(0x213)]=[],this['dailyDigests']=[],this[_0x1c318e(0x17b)]={},this[_0x1c318e(0x1fc)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x1c318e(0x159)]=!![],this[_0x1c318e(0x10f)]=null,this[_0x1c318e(0x242)]=null,this[_0x1c318e(0x19d)]=![],this[_0x1c318e(0x1b6)]=null,this[_0x1c318e(0x138)]=null,this[_0x1c318e(0x155)]=setup['SYSTEM_MODES'][_0x1c318e(0x1bf)],this[_0x1c318e(0x1db)]=![],this['lastAlertState']=![],this[_0x1c318e(0x211)]=null,this['calendarCheckTimer']=null,this[_0x1c318e(0x184)]=null,this[_0x1c318e(0x107)]=null,this[_0x1c318e(0x1bd)]=null,this[_0x1c318e(0x221)]=null,this[_0x1c318e(0x1cb)]=null,this[_0x1c318e(0x1cd)]=null,this['trackerHeartbeat']=null,this[_0x1c318e(0x191)]=null,this[_0x1c318e(0x119)]=null,this[_0x1c318e(0x16a)]=![],this[_0x1c318e(0x1e1)]=Date[_0x1c318e(0x19e)](),this[_0x1c318e(0x22a)]=null,this[_0x1c318e(0x203)]=Date['now'](),this['infrasoundLocked']=![],this['pressureBuffer']=[],this[_0x1c318e(0x1e5)]={'health':!![],'security':!![],'energy':!![],'comfort':!![]},this['on'](_0x1c318e(0x1f5),this[_0x1c318e(0x194)][_0x1c318e(0x1ed)](this)),this['on'](_0x1c318e(0x1ef),this['onStateChange'][_0x1c318e(0x1ed)](this)),this['on'](_0x1c318e(0x257),this[_0x1c318e(0x1be)][_0x1c318e(0x1ed)](this)),this['on'](_0x1c318e(0x132),this[_0x1c318e(0x206)][_0x1c318e(0x1ed)](this));}async[a0_0x1f67ae(0x194)](){const _0x34aced=a0_0x1f67ae;this[_0x34aced(0x1bc)][_0x34aced(0x142)](_0x34aced(0x103)+this['version']+_0x34aced(0x1ab));if(this[_0x34aced(0x151)][_0x34aced(0x1f9)]!==undefined)this[_0x34aced(0x1e5)][_0x34aced(0x1cf)]=this[_0x34aced(0x151)][_0x34aced(0x1f9)];if(this[_0x34aced(0x151)][_0x34aced(0x228)]!==undefined)this[_0x34aced(0x1e5)][_0x34aced(0x1ea)]=this[_0x34aced(0x151)][_0x34aced(0x228)];if(this[_0x34aced(0x151)][_0x34aced(0x1a3)]!==undefined)this[_0x34aced(0x1e5)][_0x34aced(0x144)]=this[_0x34aced(0x151)]['moduleEnergy'];if(this[_0x34aced(0x151)][_0x34aced(0x1c0)]!==undefined)this[_0x34aced(0x1e5)][_0x34aced(0x1e6)]=this['config'][_0x34aced(0x1c0)];if(this[_0x34aced(0x151)]['modules'])this[_0x34aced(0x1e5)]={...this[_0x34aced(0x1e5)],...this['config']['modules']};this[_0x34aced(0x15f)]();}async[a0_0x1f67ae(0x15f)](){const _0x67358b=a0_0x1f67ae;await setup[_0x67358b(0xf2)](this);try{this[_0x67358b(0x1db)]=await setup[_0x67358b(0x1b0)](this[_0x67358b(0x151)][_0x67358b(0x141)]);}catch(_0x14c4aa){}if(!this[_0x67358b(0x151)][_0x67358b(0x238)]||this[_0x67358b(0x151)]['inactivityThresholdHours']<0.1)this[_0x67358b(0x151)][_0x67358b(0x238)]=0xc;await setup[_0x67358b(0x23d)](this),await setup['initSystemConfig'](this);try{const _0x39fb59=await this[_0x67358b(0x13b)](_0x67358b(0x21c)),_0x102f4f=await this['getStateAsync'](_0x67358b(0x245));_0x39fb59&&_0x39fb59['val']&&_0x102f4f&&_0x102f4f[_0x67358b(0x255)]&&(Date[_0x67358b(0x19e)]()-_0x39fb59['ts']<0x4*0xe10*0x3e8&&(this[_0x67358b(0x22a)]={'times':JSON[_0x67358b(0x115)](_0x39fb59[_0x67358b(0x255)]),'sources':JSON[_0x67358b(0x115)](_0x102f4f[_0x67358b(0x255)])}));}catch(_0x5ad3f8){}if(this[_0x67358b(0x151)][_0x67358b(0x136)])try{this[_0x67358b(0x1b6)]=new GoogleGenerativeAI(this[_0x67358b(0x151)]['geminiApiKey']),this[_0x67358b(0x138)]=this[_0x67358b(0x1b6)][_0x67358b(0x1bb)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x67358b(0x19c)}});}catch(_0x12cf53){this[_0x67358b(0x1bc)]['error'](_0x67358b(0x124)+_0x12cf53[_0x67358b(0x132)]);}await setup[_0x67358b(0x1c4)](this),await this[_0x67358b(0x16d)](),schedulers[_0x67358b(0x1dc)](this),await this['setObjectNotExistsAsync'](_0x67358b(0x233),{'type':_0x67358b(0x178),'common':{'name':_0x67358b(0x246),'type':_0x67358b(0x21f),'role':_0x67358b(0x152),'read':!![],'write':![]},'native':{}}),await this[_0x67358b(0x11e)](_0x67358b(0x1a6),{'type':_0x67358b(0x178),'common':{'name':_0x67358b(0x14d),'type':'string','role':'json','read':!![],'write':![],'def':_0x67358b(0x205)},'native':{}}),await this[_0x67358b(0x11e)](_0x67358b(0x167),{'type':_0x67358b(0x178),'common':{'name':_0x67358b(0x1e4),'type':_0x67358b(0x235),'role':'json','read':!![],'write':![],'def':_0x67358b(0x129)},'native':{}}),await this[_0x67358b(0x11e)](_0x67358b(0x112),{'type':_0x67358b(0x178),'common':{'name':'Gemini\x20Report\x20Night','type':_0x67358b(0x235),'role':_0x67358b(0x11a),'read':!![],'write':![],'def':_0x67358b(0x13e)},'native':{}}),await this[_0x67358b(0x11e)](_0x67358b(0x204),{'type':_0x67358b(0x178),'common':{'name':'Gemini\x20Report\x20Day','type':'string','role':'text','read':!![],'write':![],'def':'Warte\x20auf\x20Analyse...'},'native':{}}),await this[_0x67358b(0x11e)](_0x67358b(0x18f),{'type':_0x67358b(0x178),'common':{'name':_0x67358b(0x175),'type':_0x67358b(0x235),'role':'json','read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x67358b(0x11e)]('analysis.health.todayRoomDetails',{'type':_0x67358b(0x178),'common':{'name':_0x67358b(0x1b8),'type':_0x67358b(0x235),'role':'json','read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x67358b(0x11e)](_0x67358b(0x109),{'type':_0x67358b(0x178),'common':{'name':_0x67358b(0x18d),'type':_0x67358b(0x21f),'role':_0x67358b(0x152),'unit':'%','read':!![],'write':![]},'native':{}}),await this[_0x67358b(0x11e)](_0x67358b(0x21c),{'type':_0x67358b(0x178),'common':{'name':_0x67358b(0x1b2),'type':_0x67358b(0x235),'role':'json','read':!![],'write':![]},'native':{}});try{const _0x23ec7c=await this[_0x67358b(0x13b)](_0x67358b(0x1df));if(_0x23ec7c&&_0x23ec7c['val']){this['eventHistory']=JSON['parse'](_0x23ec7c['val']);if(this[_0x67358b(0x1db)]){const _0x12bed2=await this[_0x67358b(0x13b)](_0x67358b(0x116));if(_0x12bed2&&_0x12bed2[_0x67358b(0x255)])this[_0x67358b(0x213)]=JSON[_0x67358b(0x115)](_0x12bed2[_0x67358b(0x255)]);}this[_0x67358b(0x1bc)][_0x67358b(0x142)](_0x67358b(0x176)+this[_0x67358b(0x24f)][_0x67358b(0x14a)]+_0x67358b(0x229));}}catch(_0xc7a1af){this[_0x67358b(0x24f)]=[];}try{const _0x10ad41=await this[_0x67358b(0x13b)](_0x67358b(0x1a2));if(_0x10ad41&&_0x10ad41[_0x67358b(0x255)])this[_0x67358b(0x208)]=JSON[_0x67358b(0x115)](_0x10ad41[_0x67358b(0x255)]);}catch(_0x1dc40b){this[_0x67358b(0x208)]=[];}const _0x2c2d36=this[_0x67358b(0x208)][_0x67358b(0x14a)]>=(this['config']['minDaysForBaseline']||0x7)?'Aktiv\x20('+this[_0x67358b(0x208)][_0x67358b(0x14a)]+'\x20Tage)':_0x67358b(0x1aa)+this[_0x67358b(0x208)]['length']+'/'+(this[_0x67358b(0x151)]['minDaysForBaseline']||0x7)+')';await this['setStateAsync']('LTM.baselineStatus',{'val':_0x2c2d36,'ack':!![]}),this[_0x67358b(0x248)](_0x67358b(0x223)),this[_0x67358b(0x248)](_0x67358b(0x11b)),this[_0x67358b(0x248)](_0x67358b(0x218));this['config'][_0x67358b(0x1c6)]&&this['config'][_0x67358b(0x1a0)]&&this['activeModules'][_0x67358b(0x1ea)]&&this[_0x67358b(0x18e)](this[_0x67358b(0x151)][_0x67358b(0x1a0)]);const _0x3fc479=this['config']['devices'];if(_0x3fc479)for(const _0x3d67a8 of _0x3fc479){await this[_0x67358b(0x193)](_0x3d67a8['id']);}const _0x458378=this[_0x67358b(0x151)][_0x67358b(0x181)];if(_0x458378)for(const _0x4cd15c of _0x458378){await this[_0x67358b(0x193)](_0x4cd15c);}const _0x5d38e4=require(_0x67358b(0x13a));if(this[_0x67358b(0x1cd)])this[_0x67358b(0x1cd)][_0x67358b(0x200)]();this[_0x67358b(0x1cd)]=_0x5d38e4['scheduleJob']('59\x2023\x20*\x20*\x20*',()=>{const _0xefb9ac=_0x67358b;this[_0xefb9ac(0x24e)]();}),setTimeout(()=>this[_0x67358b(0x14b)](),0x1388);if(this[_0x67358b(0x119)])clearInterval(this['roomIntegratorTimer']);this[_0x67358b(0x1ac)](),this[_0x67358b(0x119)]=setInterval(async()=>{await this['integrateRoomTime']();},0x3c*0x3e8);if(this[_0x67358b(0x191)])clearInterval(this['healthTrendInterval']);this['healthTrendInterval']=setInterval(()=>{const _0x453ad0=_0x67358b;this[_0x453ad0(0x1db)]&&this[_0x453ad0(0x1e5)][_0x453ad0(0x1cf)]&&this[_0x453ad0(0x23f)]();},0x4*0x3c*0x3c*0x3e8);if(this[_0x67358b(0x211)])clearInterval(this['analysisTimer']);this['activeModules']['energy']&&(this[_0x67358b(0x211)]=setInterval(()=>{this['triggerEnergyPrediction']();},0xf*0x3c*0x3e8),setTimeout(()=>this[_0x67358b(0xfa)](),0x2710));if(this[_0x67358b(0x1b9)])clearInterval(this[_0x67358b(0x1b9)]);this[_0x67358b(0x151)][_0x67358b(0x227)]&&this['activeModules'][_0x67358b(0x144)]&&(this[_0x67358b(0x1b9)]=setInterval(()=>{const _0x56e5d7=_0x67358b;automation[_0x56e5d7(0x17e)](this);},0x2*0x3c*0x3e8),setTimeout(()=>automation[_0x67358b(0x17e)](this),0x3a98));if(this[_0x67358b(0x184)])clearInterval(this['presenceCheckTimer']);this['config'][_0x67358b(0x181)]&&this[_0x67358b(0x151)][_0x67358b(0x181)][_0x67358b(0x14a)]>0x0&&(this['presenceCheckTimer']=setInterval(async()=>{const _0x55e299=_0x67358b;await this[_0x55e299(0x15b)]();},0x3c*0x3e8),setTimeout(async()=>await this[_0x67358b(0x15b)](),0x1388));const _0x309107=path[_0x67358b(0x21e)](__dirname,_0x67358b(0x239),_0x67358b(0x20c),'python');pythonBridge[_0x67358b(0x1c9)](this,_0x309107);}[a0_0x1f67ae(0x1be)](_0x5391c1){const _0x506ada=a0_0x1f67ae;if(this['historyJob'])this[_0x506ada(0x1cd)][_0x506ada(0x200)]();this[_0x506ada(0x24e)]()[_0x506ada(0x140)](()=>{const _0x1a82f2=_0x506ada;if(this['analysisTimer'])clearInterval(this[_0x1a82f2(0x211)]);if(this[_0x1a82f2(0x1b9)])clearInterval(this['calendarCheckTimer']);if(this[_0x1a82f2(0x184)])clearInterval(this[_0x1a82f2(0x184)]);if(this['roomIntegratorTimer'])clearInterval(this[_0x1a82f2(0x119)]);recorder[_0x1a82f2(0x1ce)](this),pythonBridge[_0x1a82f2(0xfb)](this),_0x5391c1();});}async[a0_0x1f67ae(0x14b)](){const _0x557a5f=a0_0x1f67ae;if(!this[_0x557a5f(0x24f)]||this[_0x557a5f(0x24f)][_0x557a5f(0x14a)]===0x0){this[_0x557a5f(0x1bc)]['warn'](_0x557a5f(0x24a));return;}this[_0x557a5f(0x1bc)][_0x557a5f(0x142)]('‚Ü∫\x20Replaying\x20'+this['eventHistory']['length']+_0x557a5f(0x123));const _0x2d528f=new Date()[_0x557a5f(0x161)](0x0,0x0,0x0,0x0),_0x4d0fc8=_0x557a5f(0x167);let _0x3a4adc={'history':{},'date':new Date()[_0x557a5f(0x1d1)]()};const _0x7a64b5=_0x557a5f(0x18f),_0x4aa85d=_0x557a5f(0x190);let _0x2b6a9e=new Array(0x30)[_0x557a5f(0x157)](0x0),_0x46b8bd=Array[_0x557a5f(0x126)]({'length':0x30},()=>[]);this[_0x557a5f(0x24f)][_0x557a5f(0x10a)](_0x1bbd2a=>{const _0x2f6092=_0x557a5f;if(_0x1bbd2a[_0x2f6092(0xf0)]>=_0x2d528f){if(recorder[_0x2f6092(0x1f0)](_0x1bbd2a[_0x2f6092(0x147)],_0x1bbd2a[_0x2f6092(0x152)])){const _0x119479=new Date(_0x1bbd2a['timestamp']),_0x1868ae=_0x119479[_0x2f6092(0xf8)]()*0x2+(_0x119479['getMinutes']()>=0x1e?0x1:0x0);if(_0x1868ae<0x30){_0x2b6a9e[_0x1868ae]++;const _0x456d03=_0x1bbd2a[_0x2f6092(0x225)]||_0x1bbd2a[_0x2f6092(0x1e0)]||'?';let _0x202a4b=_0x46b8bd[_0x1868ae];!_0x202a4b[_0x2f6092(0xee)](_0x456d03)&&_0x202a4b[_0x2f6092(0x20f)](_0x456d03);}const _0x3ddb43=_0x119479['getHours']();let _0x534139=_0x1bbd2a['location']||_0x2f6092(0xf3);const _0x103e0a=(this[_0x2f6092(0x151)][_0x2f6092(0x1ae)]||[])['find'](_0x13918a=>_0x13918a[_0x2f6092(0x225)]===_0x534139);if(_0x103e0a)_0x534139=_0x103e0a['location'];if(!_0x3a4adc[_0x2f6092(0x17f)][_0x534139])_0x3a4adc[_0x2f6092(0x17f)][_0x534139]=new Array(0x18)[_0x2f6092(0x157)](0x0);if(_0x3a4adc[_0x2f6092(0x17f)][_0x534139][_0x3ddb43]<0x3c)_0x3a4adc['history'][_0x534139][_0x3ddb43]++;}}});const _0x3e57eb=await this[_0x557a5f(0x13b)](_0x4d0fc8);(!_0x3e57eb||!_0x3e57eb['val']||_0x3e57eb[_0x557a5f(0x255)]==='{}'||_0x3e57eb['val'][_0x557a5f(0xee)]('\x22history\x22:{}'))&&await this['setStateAsync'](_0x4d0fc8,{'val':JSON[_0x557a5f(0x1fe)](_0x3a4adc),'ack':!![]}),await this[_0x557a5f(0x195)](_0x7a64b5,{'val':JSON[_0x557a5f(0x1fe)](_0x2b6a9e),'ack':!![]}),await this['setStateAsync'](_0x4aa85d,{'val':JSON['stringify'](_0x46b8bd),'ack':!![]}),this[_0x557a5f(0x1bc)][_0x557a5f(0x142)]('‚úÖ\x20Dashboard\x20Data\x20(Rooms\x20&\x20Timeline\x20&\x20Details)\x20restored.');}async[a0_0x1f67ae(0x24e)](){const _0x340f87=a0_0x1f67ae;if(!this[_0x340f87(0x1e5)][_0x340f87(0x1cf)])return;const _0x42ca82=new Date()[_0x340f87(0x1f4)]()['split']('T')[0x0];this[_0x340f87(0x1bc)][_0x340f87(0x11f)](_0x340f87(0x174)+_0x42ca82+'...');try{const [_0x48359e,_0x773aeb,_0x2c27b7,_0x4d4583,_0xe228c0,_0x9c2a7c]=await Promise[_0x340f87(0x1eb)]([this[_0x340f87(0x13b)](_0x340f87(0x167)),this[_0x340f87(0x13b)](_0x340f87(0x112)),this['getStateAsync'](_0x340f87(0x204)),this[_0x340f87(0x13b)](_0x340f87(0x23a)),this[_0x340f87(0x13b)]('analysis.health.todayVector'),this[_0x340f87(0x13b)](_0x340f87(0x109))]),_0x2aef0c=this['eventHistory'][_0x340f87(0x20e)](_0x66ea14=>_0x66ea14[_0x340f87(0xf0)]>=new Date()[_0x340f87(0x161)](0x0,0x0,0x0,0x0)&&(_0x66ea14[_0x340f87(0x1e0)]['toLowerCase']()[_0x340f87(0xee)](_0x340f87(0x19b))||_0x66ea14[_0x340f87(0x1e0)]['toLowerCase']()[_0x340f87(0xee)]('terrasse'))&&(_0x66ea14['value']===!![]||_0x66ea14[_0x340f87(0x152)]==='open'))[_0x340f87(0x14a)];let _0x4bc67c=0x55;if(_0x9c2a7c&&_0x9c2a7c[_0x340f87(0x255)]!==undefined)_0x4bc67c=Math['min'](0x64,Math['max'](0x14,Math[_0x340f87(0x110)](0x50+Number(_0x9c2a7c['val'])*0x5)));const _0x2bddcf={'date':_0x42ca82,'timestamp':Date[_0x340f87(0x19e)](),'roomHistory':_0x48359e?.['val']?JSON[_0x340f87(0x115)](_0x48359e[_0x340f87(0x255)]):{},'geminiNight':_0x773aeb?.[_0x340f87(0x255)]||'Keine\x20Daten','geminiDay':_0x2c27b7?.['val']||_0x340f87(0x1ca),'anomalyScore':_0x4d4583?.['val']||0.1,'todayVector':_0xe228c0?.[_0x340f87(0x255)]?JSON[_0x340f87(0x115)](_0xe228c0['val']):new Array(0x30)['fill'](0x0),'batteryLevel':_0x4bc67c,'freshAirCount':_0x2aef0c,'eventHistory':this['eventHistory']},_0x283523=utils[_0x340f87(0x15a)](),_0x5398d9=path[_0x340f87(0x21e)](_0x283523,_0x340f87(0x20b),_0x340f87(0x17f));if(!fs['existsSync'](_0x5398d9))fs['mkdirSync'](_0x5398d9,{'recursive':!![]});const _0x53f06d=path[_0x340f87(0x21e)](_0x5398d9,_0x42ca82+_0x340f87(0x20a));fs['writeFileSync'](_0x53f06d,JSON[_0x340f87(0x1fe)](_0x2bddcf)),this[_0x340f87(0x1bc)][_0x340f87(0x142)]('‚úÖ\x20History\x20saved:\x20'+_0x53f06d);}catch(_0x3e34ce){this[_0x340f87(0x1bc)][_0x340f87(0x1b7)](_0x340f87(0x17c)+_0x3e34ce[_0x340f87(0x132)]);}}async[a0_0x1f67ae(0x1ac)](){const _0x301735=a0_0x1f67ae;if(!this[_0x301735(0x159)])return;try{let _0x1cceda=null;try{const _0x2997b2=await this[_0x301735(0x13b)](_0x301735(0x207)),_0x50497e=await this[_0x301735(0x13b)](_0x301735(0x143));if(_0x2997b2&&_0x2997b2[_0x301735(0x255)]&&_0x50497e&&_0x50497e[_0x301735(0x255)]&&_0x50497e[_0x301735(0x255)]>0.3){if(_0x2997b2[_0x301735(0x255)]!=='Unknown'&&_0x2997b2[_0x301735(0x255)]!==_0x301735(0x1ad))_0x1cceda=_0x2997b2[_0x301735(0x255)];}}catch(_0x4697e6){}if(!_0x1cceda){const _0x1602c5=this['config'][_0x301735(0x1ae)]||[];for(const _0x59c9ab of _0x1602c5){if(_0x59c9ab[_0x301735(0x147)]===_0x301735(0x106)&&_0x59c9ab['location'])try{const _0x1b6c7f=await this[_0x301735(0x133)](_0x59c9ab['id']);if(_0x1b6c7f&&(_0x1b6c7f['val']===!![]||_0x1b6c7f[_0x301735(0x255)]==='on'||_0x1b6c7f['val']===0x1)){_0x1cceda=_0x59c9ab[_0x301735(0x225)];break;}}catch(_0x8e8e49){}}}if(!_0x1cceda)return;const _0x325d72=this[_0x301735(0x151)]['devices']||[];let _0x65083e=_0x1cceda;const _0x30ff7c=_0x325d72[_0x301735(0x19a)](_0x5d2dd8=>_0x5d2dd8['location']&&_0x5d2dd8[_0x301735(0x225)][_0x301735(0x249)]()===_0x1cceda[_0x301735(0x249)]());if(_0x30ff7c)_0x65083e=_0x30ff7c[_0x301735(0x225)];const _0x5ed5de=_0x301735(0x167),_0xb0c198=await this[_0x301735(0x13b)](_0x5ed5de),_0x2ac291=new Date()['toLocaleDateString']();let _0x298d6d={'history':{},'date':_0x2ac291};if(_0xb0c198&&_0xb0c198[_0x301735(0x255)])try{_0x298d6d=JSON[_0x301735(0x115)](_0xb0c198[_0x301735(0x255)]);}catch(_0x1d9dc2){}_0x298d6d['date']!==_0x2ac291&&(_0x298d6d[_0x301735(0x17f)]={},_0x298d6d[_0x301735(0x22e)]=_0x2ac291);if(!_0x298d6d[_0x301735(0x17f)][_0x65083e])_0x298d6d[_0x301735(0x17f)][_0x65083e]=new Array(0x18)[_0x301735(0x157)](0x0);const _0x20ac41=new Date()['getHours']();if(_0x298d6d['history'][_0x65083e][_0x20ac41]<0x3c)_0x298d6d[_0x301735(0x17f)][_0x65083e][_0x20ac41]++;await this['setStateAsync'](_0x5ed5de,{'val':JSON[_0x301735(0x1fe)](_0x298d6d),'ack':!![]});}catch(_0x346322){this[_0x301735(0x1bc)][_0x301735(0x189)]('[Integrator]\x20Error:\x20'+_0x346322[_0x301735(0x132)]);}}async[a0_0x1f67ae(0x206)](_0x502b69){const _0x5bdbc1=a0_0x1f67ae;if(typeof _0x502b69===_0x5bdbc1(0x18c)&&_0x502b69[_0x5bdbc1(0x132)]){if(_0x502b69[_0x5bdbc1(0x185)]==='getHistoryData'){const _0x54bfe4=_0x502b69[_0x5bdbc1(0x132)][_0x5bdbc1(0x22e)],_0x364fce=utils[_0x5bdbc1(0x15a)](),_0x33dc66=path[_0x5bdbc1(0x21e)](_0x364fce,_0x5bdbc1(0x20b),_0x5bdbc1(0x17f),_0x54bfe4+_0x5bdbc1(0x20a));if(fs[_0x5bdbc1(0x241)](_0x33dc66))try{const _0x1f0633=JSON[_0x5bdbc1(0x115)](fs[_0x5bdbc1(0x139)](_0x33dc66,_0x5bdbc1(0x236)));this[_0x5bdbc1(0x252)](_0x502b69['from'],_0x502b69[_0x5bdbc1(0x185)],{'success':!![],'data':_0x1f0633},_0x502b69[_0x5bdbc1(0x1cc)]);}catch(_0x355b12){this[_0x5bdbc1(0x252)](_0x502b69[_0x5bdbc1(0x126)],_0x502b69[_0x5bdbc1(0x185)],{'success':![],'error':_0x5bdbc1(0x1ee)},_0x502b69[_0x5bdbc1(0x1cc)]);}else this['sendTo'](_0x502b69[_0x5bdbc1(0x126)],_0x502b69[_0x5bdbc1(0x185)],{'success':![],'error':_0x5bdbc1(0x1b1)},_0x502b69[_0x5bdbc1(0x1cc)]);}else{if(_0x502b69[_0x5bdbc1(0x185)]===_0x5bdbc1(0x177)){const _0x2d8b64=this[_0x5bdbc1(0x208)][_0x5bdbc1(0x14a)];let _0x540a3a=new Array(0x30)['fill'](0x0),_0x229659=Array[_0x5bdbc1(0x126)]({'length':0x30},()=>[]);try{const _0x25ed38=await this['getStateAsync']('analysis.health.todayVector');if(_0x25ed38&&_0x25ed38[_0x5bdbc1(0x255)])_0x540a3a=JSON[_0x5bdbc1(0x115)](_0x25ed38[_0x5bdbc1(0x255)]);const _0x2556a1=await this[_0x5bdbc1(0x13b)]('analysis.health.todayRoomDetails');if(_0x2556a1&&_0x2556a1[_0x5bdbc1(0x255)])_0x229659=JSON[_0x5bdbc1(0x115)](_0x2556a1[_0x5bdbc1(0x255)]);}catch(_0x420a57){}let _0x383525=new Array(0x30)[_0x5bdbc1(0x157)](0x0);try{const _0x50eace=new Date();_0x50eace[_0x5bdbc1(0x14f)](_0x50eace[_0x5bdbc1(0x14e)]()-0x1);const _0x29acdc=_0x50eace['toISOString']()[_0x5bdbc1(0x1c5)]('T')[0x0],_0x4a147a=utils[_0x5bdbc1(0x15a)](),_0x23e9d8=path[_0x5bdbc1(0x21e)](_0x4a147a,_0x5bdbc1(0x20b),_0x5bdbc1(0x17f),_0x29acdc+_0x5bdbc1(0x20a));if(fs[_0x5bdbc1(0x241)](_0x23e9d8)){const _0x3d153c=JSON[_0x5bdbc1(0x115)](fs[_0x5bdbc1(0x139)](_0x23e9d8,'utf8'));if(_0x3d153c&&_0x3d153c['todayVector'])_0x383525=_0x3d153c[_0x5bdbc1(0x146)];}}catch(_0xb843b2){}let _0x32c0bc={'today':{},'yesterday':{}};try{const _0x2329ec=await this[_0x5bdbc1(0x13b)]('analysis.activity.roomStats');if(_0x2329ec&&_0x2329ec[_0x5bdbc1(0x255)])_0x32c0bc=JSON[_0x5bdbc1(0x115)](_0x2329ec['val']);}catch(_0x3d9836){}let _0x57b6aa=null;try{const _0x31f011=await this[_0x5bdbc1(0x13b)](_0x5bdbc1(0x109));if(_0x31f011)_0x57b6aa=_0x31f011[_0x5bdbc1(0x255)];}catch(_0x3df16){}if(_0x57b6aa===undefined||_0x57b6aa===null){const _0x4c3d2e=_0x540a3a['reduce']((_0x5d5eab,_0x44ab3b)=>_0x5d5eab+_0x44ab3b,0x0),_0x353ba3=Math['min'](0x2,Math[_0x5bdbc1(0x1d0)](-0x2,(0x64-_0x4c3d2e)/0x32));_0x57b6aa=_0x353ba3;}let _0x340415=![],_0x469e03='',_0x4eb5dc='',_0x536a39='';try{const _0x283609=await this['getStateAsync'](_0x5bdbc1(0xf1));if(_0x283609&&_0x283609[_0x5bdbc1(0x255)]){_0x340415=!![];const _0x333d01=await this[_0x5bdbc1(0x13b)](_0x5bdbc1(0x222));_0x469e03=_0x333d01?_0x333d01[_0x5bdbc1(0x255)]:'';const _0x3b7b99=await this[_0x5bdbc1(0x13b)](_0x5bdbc1(0xff));_0x4eb5dc=_0x3b7b99?_0x3b7b99[_0x5bdbc1(0x255)]:'';const _0x408d6f=await this[_0x5bdbc1(0x13b)](_0x5bdbc1(0x137));_0x536a39=_0x408d6f?_0x408d6f['val']:'';}}catch(_0xf9427){}const _0x3b2fbb=await this['checkSolarCondition'](),_0x9adbd9=(this['config']['devices']||[])[_0x5bdbc1(0x162)](_0x377096=>_0x377096[_0x5bdbc1(0x253)]),_0x4d3418=_0x3b2fbb&&_0x9adbd9;let _0x4efe6d='';try{const _0x1dbdd8=await this[_0x5bdbc1(0x13b)]('system.presenceWho');if(_0x1dbdd8&&_0x1dbdd8[_0x5bdbc1(0x255)])_0x4efe6d=_0x1dbdd8['val'];}catch(_0x1c633d){}this[_0x5bdbc1(0x252)](_0x502b69[_0x5bdbc1(0x126)],_0x502b69[_0x5bdbc1(0x185)],{'success':!![],'eventHistory':this['eventHistory'][_0x5bdbc1(0x1ba)](0x0,0x7d0),'stats':{'digestCount':_0x2d8b64,'isPresent':this[_0x5bdbc1(0x159)],'hourlyActivity':_0x540a3a,'hourlyDetails':_0x229659,'yesterdayActivity':_0x383525,'solarActive':_0x4d3418,'presenceWho':_0x4efe6d,'roomStats':_0x32c0bc,'activityTrend':_0x57b6aa,'modules':this[_0x5bdbc1(0x1e5)]},'automation':{'detected':_0x340415,'description':_0x469e03,'targetId':_0x4eb5dc,'targetValue':_0x536a39}},_0x502b69[_0x5bdbc1(0x1cc)]);}else{if(_0x502b69[_0x5bdbc1(0x185)]==='checkThermostats')try{const _0x42cdd9=await automation[_0x5bdbc1(0x12f)](this);this['sendTo'](_0x502b69[_0x5bdbc1(0x126)],_0x502b69[_0x5bdbc1(0x185)],{'success':!![],'results':_0x42cdd9},_0x502b69[_0x5bdbc1(0x1cc)]);}catch(_0x168e32){this['sendTo'](_0x502b69[_0x5bdbc1(0x126)],_0x502b69[_0x5bdbc1(0x185)],{'success':![],'error':_0x168e32['message']},_0x502b69[_0x5bdbc1(0x1cc)]);}else{if(_0x502b69[_0x5bdbc1(0x185)]===_0x5bdbc1(0x1d5))try{const _0x293789=await scanner[_0x5bdbc1(0x148)](this,_0x502b69[_0x5bdbc1(0x132)]||{});this[_0x5bdbc1(0x252)](_0x502b69[_0x5bdbc1(0x126)],_0x502b69['command'],{'success':!![],'devices':_0x293789},_0x502b69[_0x5bdbc1(0x1cc)]);}catch(_0x122941){}else{if(_0x502b69['command']==='getEnums'){const _0x15b293=await this['getForeignObjectsAsync']('enum.functions.*',_0x5bdbc1(0x1ec)),_0x563f9b=[];if(_0x15b293)for(const _0x443e26 in _0x15b293){let _0x24b93e=_0x15b293[_0x443e26][_0x5bdbc1(0x219)][_0x5bdbc1(0x1e0)];if(_0x24b93e&&typeof _0x24b93e===_0x5bdbc1(0x18c))_0x24b93e=_0x24b93e['de']||_0x24b93e['en']||Object['values'](_0x24b93e)[0x0]||JSON['stringify'](_0x24b93e);_0x563f9b[_0x5bdbc1(0x20f)]({'id':_0x443e26,'name':String(_0x24b93e||_0x443e26)});}const _0x18b801=await this['getForeignObjectsAsync'](_0x5bdbc1(0x1de),'enum'),_0x4d97b2=[];if(_0x18b801)for(const _0x505cd8 in _0x18b801){let _0x1a6df1=_0x18b801[_0x505cd8]['common'][_0x5bdbc1(0x1e0)];if(_0x1a6df1&&typeof _0x1a6df1===_0x5bdbc1(0x18c))_0x1a6df1=_0x1a6df1['de']||_0x1a6df1['en']||Object[_0x5bdbc1(0x1f8)](_0x1a6df1)[0x0]||JSON[_0x5bdbc1(0x1fe)](_0x1a6df1);_0x4d97b2[_0x5bdbc1(0x20f)](String(_0x1a6df1||_0x505cd8[_0x5bdbc1(0x1c5)]('.')['pop']()));}this[_0x5bdbc1(0x252)](_0x502b69[_0x5bdbc1(0x126)],_0x502b69['command'],{'success':!![],'enums':_0x563f9b,'rooms':_0x4d97b2},_0x502b69['callback']);}else{if(_0x502b69[_0x5bdbc1(0x185)]===_0x5bdbc1(0x160))try{const _0x590fc2=await this['getObjectViewAsync'](_0x5bdbc1(0x154),_0x5bdbc1(0xfe),{'startkey':_0x5bdbc1(0x105),'endkey':_0x5bdbc1(0x1e9)}),_0x2b9178=new Set();if(_0x590fc2&&_0x590fc2[_0x5bdbc1(0x220)])for(const _0x167d65 of _0x590fc2[_0x5bdbc1(0x220)]){const _0x26d667=_0x167d65['id'][_0x5bdbc1(0x19f)]('system.adapter.',''),_0x3caa73=await this[_0x5bdbc1(0x133)](_0x26d667+_0x5bdbc1(0x254));let _0x2f3e4a=![];if(_0x3caa73&&_0x3caa73[_0x5bdbc1(0x255)]){const _0x4c6f02=typeof _0x3caa73[_0x5bdbc1(0x255)]===_0x5bdbc1(0x235)?JSON[_0x5bdbc1(0x115)](_0x3caa73['val']):_0x3caa73[_0x5bdbc1(0x255)];Array[_0x5bdbc1(0x163)](_0x4c6f02)&&_0x4c6f02[_0x5bdbc1(0x10a)](_0x12bb6a=>{const _0x3c6338=_0x5bdbc1;_0x12bb6a[_0x3c6338(0x237)]&&(_0x2b9178[_0x3c6338(0x1c1)](_0x12bb6a['calendarName']),_0x2f3e4a=!![]);});}!_0x2f3e4a&&_0x2b9178[_0x5bdbc1(0x1c1)](_0x26d667);}const _0x12ce38=Array[_0x5bdbc1(0x126)](_0x2b9178);if(_0x12ce38[_0x5bdbc1(0x14a)]===0x0)_0x12ce38['push'](_0x5bdbc1(0x201));this[_0x5bdbc1(0x252)](_0x502b69['from'],_0x502b69['command'],{'success':!![],'names':_0x12ce38},_0x502b69[_0x5bdbc1(0x1cc)]);}catch(_0x3248c8){this[_0x5bdbc1(0x252)](_0x502b69[_0x5bdbc1(0x126)],_0x502b69[_0x5bdbc1(0x185)],{'success':![],'error':_0x5bdbc1(0x1fa)+_0x3248c8[_0x5bdbc1(0x132)]},_0x502b69[_0x5bdbc1(0x1cc)]);}else{if(_0x502b69['command']==='refreshCalendar')try{await automation[_0x5bdbc1(0x1da)](this),this[_0x5bdbc1(0x252)](_0x502b69[_0x5bdbc1(0x126)],_0x502b69[_0x5bdbc1(0x185)],{'success':!![]},_0x502b69[_0x5bdbc1(0x1cc)]);}catch(_0xce376b){this[_0x5bdbc1(0x1bc)][_0x5bdbc1(0x189)](_0x5bdbc1(0x179)+_0xce376b[_0x5bdbc1(0x132)]),this[_0x5bdbc1(0x252)](_0x502b69[_0x5bdbc1(0x126)],_0x502b69[_0x5bdbc1(0x185)],{'success':![],'error':_0xce376b['message']},_0x502b69['callback']);}else{if(_0x502b69[_0x5bdbc1(0x185)]===_0x5bdbc1(0x13c))try{const _0x5adcdc=_0x502b69['message']?_0x502b69[_0x5bdbc1(0x132)][_0x5bdbc1(0x231)]:'';if(!_0x5adcdc)throw new Error(_0x5bdbc1(0x202));const _0x338f90=new GoogleGenerativeAI(_0x5adcdc),_0x2dce22=_0x338f90[_0x5bdbc1(0x1bb)]({'model':GEMINI_MODEL}),_0x3e4ffe=await _0x2dce22[_0x5bdbc1(0x173)](_0x5bdbc1(0x172)),_0xf86a3f=await _0x3e4ffe['response'],_0x90061a=_0xf86a3f[_0x5bdbc1(0x11a)]();this[_0x5bdbc1(0x252)](_0x502b69[_0x5bdbc1(0x126)],_0x502b69['command'],{'success':!![],'message':_0x5bdbc1(0x1b3)+_0x90061a[_0x5bdbc1(0x24d)](0x0,0x14)+_0x5bdbc1(0x100)},_0x502b69['callback']);}catch(_0xc2dde6){this[_0x5bdbc1(0x252)](_0x502b69[_0x5bdbc1(0x126)],_0x502b69['command'],{'success':![],'message':_0xc2dde6[_0x5bdbc1(0x132)]},_0x502b69[_0x5bdbc1(0x1cc)]);}else{if(_0x502b69[_0x5bdbc1(0x185)]===_0x5bdbc1(0x153))try{const _0x17893b=await this[_0x5bdbc1(0x1e8)](),_0x1a8f52=await this['getObjectViewAsync'](_0x5bdbc1(0x154),_0x5bdbc1(0xfe),{'startkey':_0x5bdbc1(0x105),'endkey':_0x5bdbc1(0x1e9)}),_0x1b2013=_0x1a8f52&&_0x1a8f52[_0x5bdbc1(0x220)]?_0x1a8f52[_0x5bdbc1(0x220)]['length']:0x0;this[_0x5bdbc1(0x252)](_0x502b69['from'],_0x502b69[_0x5bdbc1(0x185)],{'success':!![],'weather':_0x5bdbc1(0x212)+_0x17893b+',\x20Temp:\x20'+(this[_0x5bdbc1(0x17b)][this[_0x5bdbc1(0x151)]['outdoorSensorId']]||'?')+'¬∞C','calendar':_0x1b2013+_0x5bdbc1(0x108)},_0x502b69['callback']);}catch(_0xb70094){this['sendTo'](_0x502b69[_0x5bdbc1(0x126)],_0x502b69[_0x5bdbc1(0x185)],{'success':![]},_0x502b69['callback']);}}}}}}}}}}}[a0_0x1f67ae(0x23f)](){const _0x59b068=a0_0x1f67ae;if(!this[_0x59b068(0x1e5)][_0x59b068(0x1cf)])return;this[_0x59b068(0x1bc)][_0x59b068(0x11f)](_0x59b068(0x15e));try{const _0x540f05=this[_0x59b068(0x213)]||[];pythonBridge[_0x59b068(0x214)](this,_0x59b068(0x15d),{'events':_0x540f05});}catch(_0x478804){this['log'][_0x59b068(0x189)]('Failed\x20to\x20trigger\x20Python\x20Health\x20Check');}}async['onStateChange'](_0x1800cd,_0x3ba7d7){const _0x40628b=a0_0x1f67ae;if(!_0x3ba7d7||this[_0x40628b(0x16a)])return;if(_0x1800cd[_0x40628b(0xee)](_0x40628b(0x165))&&_0x1800cd['endsWith'](_0x40628b(0x251))&&_0x3ba7d7['val'])return;if(this[_0x40628b(0x151)]['infrasoundEnabled']&&_0x1800cd===this[_0x40628b(0x151)]['infrasoundSensorId']&&this[_0x40628b(0x1e5)][_0x40628b(0x1ea)]){this[_0x40628b(0x128)](_0x3ba7d7[_0x40628b(0x255)]);return;}if(_0x3ba7d7[_0x40628b(0x149)]&&_0x1800cd[_0x40628b(0x1d6)]('pulse'))return;if(_0x1800cd===this[_0x40628b(0x118)]+_0x40628b(0xf9)){if(_0x3ba7d7['val']&&Object['values'](setup[_0x40628b(0x24b)])[_0x40628b(0xee)](_0x3ba7d7[_0x40628b(0x255)])){this['currentSystemMode']=_0x3ba7d7[_0x40628b(0x255)];if(_0x3ba7d7[_0x40628b(0x255)]===setup[_0x40628b(0x24b)][_0x40628b(0x186)])await recorder[_0x40628b(0x111)](this,![]);else await recorder['setPresence'](this,!![]);if(this[_0x40628b(0x1db)]){let _0x3af90b=![],_0x56793a=0x0,_0x2c4833='manual';if(this[_0x40628b(0x155)]===_0x40628b(0x130))_0x3af90b=!![],_0x56793a=0x168,_0x2c4833='Party\x20Mode';else this[_0x40628b(0x155)]===_0x40628b(0x120)&&(_0x3af90b=!![],_0x56793a=0x5a0,_0x2c4833=_0x40628b(0x16b));pythonBridge[_0x40628b(0x214)](this,_0x40628b(0x1a1),{'active':_0x3af90b,'duration':_0x56793a,'label':_0x2c4833}),await this[_0x40628b(0x195)](_0x40628b(0x1c2),{'val':JSON[_0x40628b(0x1fe)]({'active':_0x3af90b,'label':_0x2c4833,'timestamp':Date['now']()}),'ack':!![]});}}if(!_0x3ba7d7[_0x40628b(0x149)])this['setState'](_0x1800cd,{'val':this[_0x40628b(0x155)],'ack':!![]});return;}if(_0x1800cd[_0x40628b(0x1d6)](_0x40628b(0x245))&&_0x3ba7d7['ack'])this[_0x40628b(0x244)](_0x3ba7d7[_0x40628b(0x255)]);if(_0x1800cd['endsWith']('analysis.energy.warmupTimes')&&_0x3ba7d7['ack']&&this[_0x40628b(0x1e5)][_0x40628b(0x144)])automation[_0x40628b(0x17e)](this);if(!_0x3ba7d7[_0x40628b(0x149)]){if(_0x1800cd[_0x40628b(0xee)](_0x40628b(0x223))&&_0x3ba7d7[_0x40628b(0x255)]){this[_0x40628b(0x1c8)](_0x1800cd,{'val':![],'ack':!![]}),aiAgent['runGeminiAnalysis'](this);return;}if(_0x1800cd[_0x40628b(0xee)]('triggerDailyDigest')&&_0x3ba7d7[_0x40628b(0x255)]){this[_0x40628b(0x1c8)](_0x1800cd,{'val':![],'ack':!![]});if(this[_0x40628b(0x1db)])aiAgent[_0x40628b(0x1f1)](this,pythonBridge);return;}if(_0x1800cd['includes']('triggerBriefing')&&_0x3ba7d7[_0x40628b(0x255)]){this[_0x40628b(0x1c8)](_0x1800cd,{'val':![],'ack':!![]}),aiAgent[_0x40628b(0x22b)](this);return;}if(_0x1800cd[_0x40628b(0xee)]('automation.triggerAction')&&_0x3ba7d7[_0x40628b(0x255)]){this['setState'](_0x1800cd,{'val':![],'ack':!![]}),aiAgent[_0x40628b(0x1dd)](this);return;}if(_0x1800cd[_0x40628b(0xee)](_0x40628b(0x240))&&_0x3ba7d7['val']){this[_0x40628b(0x1c8)](_0x1800cd,{'val':![],'ack':!![]});if(this[_0x40628b(0x1db)])try{const _0x26a16b=await this[_0x40628b(0x13b)](_0x40628b(0x1b4));if(_0x26a16b&&_0x26a16b['val']){const _0x39c3e1=JSON[_0x40628b(0x115)](_0x26a16b['val']);this[_0x40628b(0x195)]('analysis.training.status',{'val':_0x40628b(0x187),'ack':!![]}),pythonBridge[_0x40628b(0x214)](this,_0x40628b(0x1d4),{'sequences':_0x39c3e1});}}catch(_0x337b1d){}return;}if(_0x1800cd[_0x40628b(0xee)](_0x40628b(0x218))&&_0x3ba7d7['val']){this[_0x40628b(0x1c8)](_0x1800cd,{'val':![],'ack':!![]});try{aiAgent['generateHealthReport'](this,_0x40628b(0x22c)),setTimeout(()=>aiAgent['generateHealthReport'](this,_0x40628b(0xf6)),0x2ee0);if(this[_0x40628b(0x1db)]){this[_0x40628b(0x23f)]();const _0x121206=await this[_0x40628b(0x13b)](_0x40628b(0x1a2));if(_0x121206&&_0x121206[_0x40628b(0x255)])pythonBridge[_0x40628b(0x214)](this,'TRAIN_HEALTH',{'digests':JSON[_0x40628b(0x115)](_0x121206[_0x40628b(0x255)])});}}catch(_0x4f2502){this['log'][_0x40628b(0x189)](_0x40628b(0x224)+_0x4f2502['message']);}return;}if(_0x1800cd[_0x40628b(0xee)](_0x40628b(0x180))&&_0x3ba7d7[_0x40628b(0x255)]){this[_0x40628b(0x1c8)](_0x1800cd,{'val':![],'ack':!![]}),await this[_0x40628b(0xfa)]();return;}if(_0x1800cd[_0x40628b(0xee)](_0x40628b(0x117))&&_0x3ba7d7['val']){this[_0x40628b(0x1c8)](_0x1800cd,{'val':![],'ack':!![]});if(this[_0x40628b(0x1db)])try{const _0x36c788=await this[_0x40628b(0x13b)](_0x40628b(0x116));if(_0x36c788&&_0x36c788['val']){const _0xb68c4b={};if(this['config']['devices'])this[_0x40628b(0x151)][_0x40628b(0x1ae)][_0x40628b(0x10a)](_0x31dae4=>{const _0x59634a=_0x40628b;if(_0x31dae4['id']&&_0x31dae4['type'])_0xb68c4b[_0x31dae4['id']]=_0x31dae4[_0x59634a(0x147)];});pythonBridge[_0x40628b(0x214)](this,_0x40628b(0x1e7),{'events':JSON[_0x40628b(0x115)](_0x36c788[_0x40628b(0x255)]),'deviceMap':_0xb68c4b});}}catch(_0x821fd7){}return;}if(_0x1800cd[_0x40628b(0xee)]('analysis.training.triggerTopology')&&_0x3ba7d7['val']){this['setState'](_0x1800cd,{'val':![],'ack':!![]}),topology[_0x40628b(0x122)](this);if(this['isProVersion'])try{const _0xfc5ff4=await this['getStateAsync'](_0x40628b(0x1b4));if(_0xfc5ff4&&_0xfc5ff4[_0x40628b(0x255)])pythonBridge[_0x40628b(0x214)](this,_0x40628b(0xf5),{'sequences':JSON[_0x40628b(0x115)](_0xfc5ff4[_0x40628b(0x255)])});}catch(_0xf969d4){}return;}}const _0x2f501a=(this[_0x40628b(0x151)][_0x40628b(0x1ae)]||[])[_0x40628b(0x19a)](_0x2815f8=>_0x2815f8['id']===_0x1800cd);if(_0x2f501a){const _0x54e8c6=await recorder[_0x40628b(0x14c)](this,_0x1800cd,_0x3ba7d7,_0x2f501a);_0x54e8c6&&this['setState'](_0x40628b(0x233),{'val':Date['now'](),'ack':!![]});_0x54e8c6&&_0x54e8c6[_0x40628b(0x147)]===_0x40628b(0x106)&&_0x54e8c6[_0x40628b(0x225)]&&this[_0x40628b(0x1db)]&&deadMan[_0x40628b(0x192)](this,_0x54e8c6[_0x40628b(0x225)]);_0x3ba7d7[_0x40628b(0x255)]&&(_0x3ba7d7[_0x40628b(0x255)]===!![]||_0x3ba7d7[_0x40628b(0x255)]===0x1||String(_0x3ba7d7['val'])['toLowerCase']()===_0x40628b(0x10b))&&(_0x2f501a['type']&&(_0x2f501a[_0x40628b(0x147)]['includes'](_0x40628b(0x114))||_0x2f501a[_0x40628b(0x147)][_0x40628b(0xee)](_0x40628b(0x135)))&&this[_0x40628b(0x12c)](_0x2f501a));if(_0x2f501a[_0x40628b(0x147)]===_0x40628b(0x158)||_0x2f501a[_0x40628b(0x147)]===_0x40628b(0x197)){if(this[_0x40628b(0x1e5)][_0x40628b(0x144)])automation[_0x40628b(0x21b)](this);}}}async[a0_0x1f67ae(0x244)](_0x5798f6){const _0x8ca3c2=a0_0x1f67ae;if(!this[_0x8ca3c2(0x22a)]||Date[_0x8ca3c2(0x19e)]()-this[_0x8ca3c2(0x203)]>0x493e0)return;try{const _0x388a30=JSON['parse'](_0x5798f6),_0x39026b=this['memoryCache'][_0x8ca3c2(0x232)];let _0x57118d=![];for(const _0x167f58 in _0x39026b){if(_0x39026b[_0x167f58][_0x8ca3c2(0xee)]('AI')&&_0x388a30[_0x167f58]&&!_0x388a30[_0x167f58][_0x8ca3c2(0xee)]('AI')){_0x57118d=!![];break;}}_0x57118d&&(await this[_0x8ca3c2(0x195)](_0x8ca3c2(0x21c),{'val':JSON[_0x8ca3c2(0x1fe)](this['memoryCache'][_0x8ca3c2(0x230)]),'ack':!![]}),await this[_0x8ca3c2(0x195)](_0x8ca3c2(0x245),{'val':JSON[_0x8ca3c2(0x1fe)](this[_0x8ca3c2(0x22a)][_0x8ca3c2(0x232)]),'ack':!![]}));}catch(_0x311e52){}}async[a0_0x1f67ae(0x16d)](){const _0xe129b7=a0_0x1f67ae;try{const _0x4c8460=await this['getStateAsync'](setup['SYSTEM_DP_MODE']);if(_0x4c8460&&_0x4c8460[_0xe129b7(0x255)])this[_0xe129b7(0x155)]=_0x4c8460[_0xe129b7(0x255)];}catch(_0x299f81){this[_0xe129b7(0x155)]=setup[_0xe129b7(0x24b)][_0xe129b7(0x1bf)];}}async[a0_0x1f67ae(0x15b)](){const _0xfab683=a0_0x1f67ae,_0x208642=this[_0xfab683(0x151)]['presenceDevices']||[];if(_0x208642['length']===0x0)return![];const _0x273c98=[],_0x1bc3d0=Date[_0xfab683(0x19e)](),_0x58b145=0x5*0x3c*0x3e8;for(const _0x2b4d98 of _0x208642){try{let _0x2f8258=![];try{const _0x3fe1d5=await this[_0xfab683(0x133)](_0x2b4d98+_0xfab683(0x24c));if(_0x3fe1d5&&_0x3fe1d5[_0xfab683(0x255)]===!![])_0x2f8258=!![];}catch(_0x1c94e1){}if(!_0x2f8258)try{const _0x3bad57=await this[_0xfab683(0x133)](_0x2b4d98+_0xfab683(0x1fd));if(_0x3bad57&&_0x3bad57['ts']){const _0x212451=_0x1bc3d0-_0x3bad57['ts'];if(_0x212451<_0x58b145)_0x2f8258=!![];}}catch(_0x493b75){}if(!_0x2f8258)try{const _0x386a92=await this[_0xfab683(0x133)](_0x2b4d98+_0xfab683(0x1d9));if(_0x386a92&&typeof _0x386a92['val']===_0xfab683(0x21f)&&_0x386a92['val']>0x0)_0x2f8258=!![];}catch(_0x3864e9){}if(!_0x2f8258)try{const _0x5cd49d=await this[_0xfab683(0x133)](_0x2b4d98);if(_0x5cd49d){const _0x20c9de=_0x1bc3d0-(_0x5cd49d['ts']||0x0);_0x20c9de<_0x58b145&&(_0x5cd49d[_0xfab683(0x255)]===!![]||_0x5cd49d[_0xfab683(0x255)]===_0xfab683(0x13f)||_0x5cd49d[_0xfab683(0x255)]===0x1)&&(_0x2f8258=!![]);}}catch(_0x512256){}if(_0x2f8258){const _0x4a1527=_0x2b4d98[_0xfab683(0x1c5)]('.'),_0x5b3eb5=_0x4a1527[_0x4a1527[_0xfab683(0x14a)]-0x1]||_0x2b4d98;_0x273c98[_0xfab683(0x20f)](_0x5b3eb5);}}catch(_0x52610d){this[_0xfab683(0x1bc)]['warn']('checkWifiPresence:\x20Error\x20checking\x20'+_0x2b4d98+':\x20'+_0x52610d[_0xfab683(0x132)]);}}const _0x5846c1=_0x273c98[_0xfab683(0x14a)]>0x0?_0x273c98[_0xfab683(0x21e)](',\x20'):_0xfab683(0x226);return await this['setStateAsync'](_0xfab683(0x134),{'val':_0x5846c1,'ack':!![]}),_0x273c98['length']>0x0;}async[a0_0x1f67ae(0x169)](){const _0xfaa965=a0_0x1f67ae;await aiAgent[_0xfaa965(0x1b5)](this);this['activeModules']['health']&&(this[_0xfaa965(0xf7)](),this[_0xfaa965(0x188)]());if(this['activeModules'][_0xfaa965(0x144)])this['triggerEnergyPrediction']();}async[a0_0x1f67ae(0x1e8)](){const _0x977f9d=a0_0x1f67ae,_0x16a998=[_0x977f9d(0x16e),_0x977f9d(0x23b),_0x977f9d(0x20d)],_0x512a78=[_0x977f9d(0x12e),_0x977f9d(0x131),_0x977f9d(0x171)];for(const _0x5a2ae4 of _0x16a998){for(const _0xcd712a of _0x512a78){try{const _0x3729b4=_0x5a2ae4+'.'+_0xcd712a,_0x44b549=await this[_0x977f9d(0x133)](_0x3729b4);if(_0x44b549&&_0x44b549[_0x977f9d(0x255)]){const _0x5e211a=String(_0x44b549[_0x977f9d(0x255)])['toLowerCase']();if(_0x5e211a['includes']('sunny')||_0x5e211a[_0x977f9d(0xee)](_0x977f9d(0x16f))||_0x5e211a['includes'](_0x977f9d(0x145))||_0x5e211a[_0x977f9d(0xee)](_0x977f9d(0x150))||_0x5e211a['includes']('clear'))return this[_0x977f9d(0x1bc)]['debug']('‚òÄÔ∏è\x20Solar\x20Condition:\x20SUNNY\x20detected\x20via\x20'+_0x3729b4),!![];}}catch(_0x2a52bb){}}}return![];}[a0_0x1f67ae(0x188)](){const _0x376829=a0_0x1f67ae;if(!this[_0x376829(0x1db)])return;try{this[_0x376829(0x13b)]('LTM.trainingData.sequences',(_0x2e2956,_0x274f18)=>{const _0x7f1123=_0x376829;if(_0x2e2956||!_0x274f18||!_0x274f18['val'])return;try{const _0x3ec772=JSON[_0x7f1123(0x115)](_0x274f18[_0x7f1123(0x255)]);if(!_0x3ec772||_0x3ec772[_0x7f1123(0x14a)]===0x0)return;pythonBridge['send'](this,'ANALYZE_GAIT',{'sequences':_0x3ec772}),this[_0x7f1123(0x1bc)][_0x7f1123(0x11f)](_0x7f1123(0x1d3)+_0x3ec772[_0x7f1123(0x14a)]+_0x7f1123(0x1d2));}catch(_0x435783){this[_0x7f1123(0x1bc)][_0x7f1123(0x189)](_0x7f1123(0x1f2)+_0x435783[_0x7f1123(0x132)]);}});}catch(_0x16d719){this[_0x376829(0x1bc)]['warn'](_0x376829(0x23e)+_0x16d719[_0x376829(0x132)]);}}async[a0_0x1f67ae(0xfa)](){const _0x2ba6d0=a0_0x1f67ae;if(!this[_0x2ba6d0(0x1db)]||!this[_0x2ba6d0(0x1e5)]['energy'])return;try{const _0x46a79d={},_0x1fe7d5={},_0xe8f6e0=this[_0x2ba6d0(0x151)][_0x2ba6d0(0x1ae)]||[];for(const _0x3c60d6 of _0xe8f6e0){if((_0x3c60d6[_0x2ba6d0(0x147)]===_0x2ba6d0(0x158)||_0x3c60d6[_0x2ba6d0(0x147)]===_0x2ba6d0(0x197))&&_0x3c60d6[_0x2ba6d0(0x225)])try{const _0x496000=await this[_0x2ba6d0(0x133)](_0x3c60d6['id']);_0x496000&&typeof _0x496000[_0x2ba6d0(0x255)]==='number'&&(_0x46a79d[_0x3c60d6[_0x2ba6d0(0x225)]]=_0x496000['val'],_0x1fe7d5[_0x3c60d6[_0x2ba6d0(0x225)]]=_0x3c60d6['isSolar']||![]);}catch(_0x4648e7){}}let _0x130806=0xa;if(this[_0x2ba6d0(0x151)][_0x2ba6d0(0x17d)])try{const _0x59695a=await this['getForeignStateAsync'](this[_0x2ba6d0(0x151)][_0x2ba6d0(0x17d)]);if(_0x59695a&&typeof _0x59695a[_0x2ba6d0(0x255)]===_0x2ba6d0(0x21f))_0x130806=_0x59695a[_0x2ba6d0(0x255)];}catch(_0x49e78e){}const _0x104684=await this['checkSolarCondition']();let _0x94e110={};try{const _0x1fae2f=await this[_0x2ba6d0(0x13b)](_0x2ba6d0(0x10e));if(_0x1fae2f&&_0x1fae2f[_0x2ba6d0(0x255)])_0x94e110=JSON[_0x2ba6d0(0x115)](_0x1fae2f[_0x2ba6d0(0x255)]);}catch(_0x388baa){}pythonBridge[_0x2ba6d0(0x214)](this,_0x2ba6d0(0x12b),{'current_temps':_0x46a79d,'t_out':_0x130806,'is_sunny':_0x104684,'solar_flags':_0x1fe7d5,'warmup_targets':_0x94e110}),this[_0x2ba6d0(0x1bc)][_0x2ba6d0(0x142)](_0x2ba6d0(0x164)+Object[_0x2ba6d0(0x1a7)](_0x46a79d)['length']+_0x2ba6d0(0x1e3));}catch(_0x23211b){this['log']['warn'](_0x2ba6d0(0x256)+_0x23211b[_0x2ba6d0(0x132)]);}}['updateHealthVector'](){const _0x3ca917=a0_0x1f67ae;if(!this[_0x3ca917(0x213)]||this[_0x3ca917(0x213)]['length']===0x0)return;const _0xe581ae=new Array(0x30)[_0x3ca917(0x157)](0x0),_0x8b119d=Array['from']({'length':0x30},()=>[]),_0x3b2d47=new Date()[_0x3ca917(0x161)](0x0,0x0,0x0,0x0);this[_0x3ca917(0x213)][_0x3ca917(0x10a)](_0x30941e=>{const _0x4dbd2a=_0x3ca917,_0x163a94=new Date(_0x30941e[_0x4dbd2a(0xf0)]);if(_0x163a94[_0x4dbd2a(0x1d8)]()>=_0x3b2d47){const _0x51a880=_0x163a94['getHours'](),_0x2d3a67=_0x163a94[_0x4dbd2a(0x1fb)](),_0x57ace7=_0x51a880*0x2+Math[_0x4dbd2a(0x23c)](_0x2d3a67/0x1e);_0x57ace7>=0x0&&_0x57ace7<0x30&&(_0xe581ae[_0x57ace7]++,_0x8b119d[_0x57ace7]['push']({'time':_0x163a94['toLocaleTimeString'](_0x4dbd2a(0x102),{'hour':_0x4dbd2a(0x183),'minute':'2-digit'}),'location':_0x30941e[_0x4dbd2a(0x225)]||'Unbekannt','type':_0x30941e[_0x4dbd2a(0x147)]||_0x4dbd2a(0x196)}));}}),this[_0x3ca917(0x195)](_0x3ca917(0x18f),{'val':JSON['stringify'](_0xe581ae),'ack':!![]}),this['setStateAsync'](_0x3ca917(0x190),{'val':JSON[_0x3ca917(0x1fe)](_0x8b119d),'ack':!![]});}async[a0_0x1f67ae(0x128)](_0x30a7f4){const _0x5469ba=a0_0x1f67ae;if(!this['config'][_0x5469ba(0x1c6)]||typeof _0x30a7f4!=='number')return;const _0x2fb8f7=this['config'][_0x5469ba(0x166)]||0.04;this[_0x5469ba(0x16c)]['push']({'timestamp':Date[_0x5469ba(0x19e)](),'value':_0x30a7f4}),this['pressureBuffer'][_0x5469ba(0x14a)]>0x64&&this[_0x5469ba(0x16c)][_0x5469ba(0x22d)](),_0x30a7f4>_0x2fb8f7&&!this[_0x5469ba(0x1e2)]&&(this[_0x5469ba(0x1e2)]=!![],this[_0x5469ba(0x1bc)][_0x5469ba(0x189)](_0x5469ba(0x127)+_0x30a7f4[_0x5469ba(0x243)](0x4)+_0x5469ba(0x125)+_0x2fb8f7+_0x5469ba(0x25a)),await this['triggerInfrasoundCorrelation'](_0x30a7f4,_0x5469ba(0x1af)),setTimeout(()=>{const _0x151e68=_0x5469ba;this[_0x151e68(0x1e2)]=![];},0x5*0x3c*0x3e8));}async['triggerInfrasoundCorrelation'](_0x2fcfdb,_0x37af2a){const _0x549cd2=a0_0x1f67ae;if(!this['isPresent']){const _0x3a98e8=this['eventHistory'][_0x549cd2(0x1ba)](0x0,0xa),_0xcae10=_0x3a98e8['map'](_0x3198d6=>new Date(_0x3198d6['timestamp'])[_0x549cd2(0x1f6)](_0x549cd2(0x102))+'\x20-\x20'+(_0x3198d6[_0x549cd2(0x225)]||_0x549cd2(0xf3))+':\x20'+_0x3198d6[_0x549cd2(0x1e0)])[_0x549cd2(0x21e)]('\x0a');this[_0x549cd2(0x1bc)]['warn']('üîä\x20FORENSIC:\x20Infraschall\x20bei\x20Abwesenheit!\x20Pressure:\x20'+_0x2fcfdb[_0x549cd2(0x243)](0x4)+',\x20Events:\x0a'+_0xcae10);if(this['config'][_0x549cd2(0x259)])try{const _0x508f80=await this[_0x549cd2(0x133)](this[_0x549cd2(0x151)][_0x549cd2(0x259)]);_0x508f80&&_0x508f80[_0x549cd2(0x255)]===!![]&&(await this['setStateAsync']('analysis.safety.infrasoundAlert',{'val':JSON[_0x549cd2(0x1fe)]({'timestamp':Date[_0x549cd2(0x19e)](),'pressure':_0x2fcfdb[_0x549cd2(0x243)](0x4),'eventType':_0x37af2a,'recentEvents':_0x3a98e8[_0x549cd2(0x1ba)](0x0,0x3)}),'ack':!![]}),this[_0x549cd2(0x1bc)][_0x549cd2(0x1b7)](_0x549cd2(0x209)));}catch(_0x1bee0f){}}else this['log'][_0x549cd2(0x11f)](_0x549cd2(0x10d)+_0x2fcfdb[_0x549cd2(0x243)](0x4)+'\x20(Bewohner\x20anwesend\x20-\x20normal)');}async[a0_0x1f67ae(0x12c)](_0xb95d0f){const _0x481651=a0_0x1f67ae;if(!_0xb95d0f||!_0xb95d0f[_0x481651(0x225)])return;try{const _0x6db983=(this['config']['devices']||[])[_0x481651(0x20e)](_0x34c19b=>_0x34c19b[_0x481651(0x225)]===_0xb95d0f['location']&&(_0x34c19b[_0x481651(0x147)]==='temperature'||_0x34c19b[_0x481651(0x147)]===_0x481651(0x197)));if(_0x6db983[_0x481651(0x14a)]===0x0)return;const _0x489016=await this[_0x481651(0x133)](_0x6db983[0x0]['id']);if(!_0x489016||typeof _0x489016[_0x481651(0x255)]!==_0x481651(0x21f))return;const _0x41c8a1=_0x489016[_0x481651(0x255)];let _0x232d5b=null;if(this[_0x481651(0x151)][_0x481651(0x17d)]){const _0x3e08b5=await this[_0x481651(0x133)](this[_0x481651(0x151)][_0x481651(0x17d)]);_0x3e08b5&&typeof _0x3e08b5[_0x481651(0x255)]===_0x481651(0x21f)&&(_0x232d5b=_0x3e08b5['val']);}if(_0x232d5b!==null){const _0x1e3cbd=Math[_0x481651(0x170)](_0x41c8a1-_0x232d5b);_0x1e3cbd>0x3&&(this[_0x481651(0x1bc)][_0x481651(0x11f)](_0x481651(0x1a5)+_0xb95d0f['location']+_0x481651(0x1f3)+_0x1e3cbd[_0x481651(0x243)](0x1)+_0x481651(0x215)+_0x41c8a1+_0x481651(0x199)+_0x232d5b+_0x481651(0x198)),await this[_0x481651(0x195)](_0x481651(0x22f),{'val':JSON['stringify']({'room':_0xb95d0f[_0x481651(0x225)],'timestamp':Date[_0x481651(0x19e)](),'tempDiff':_0x1e3cbd[_0x481651(0x243)](0x1),'recommendation':_0x1e3cbd>0x5?_0x481651(0x17a):_0x481651(0x11d)}),'ack':!![]}));}}catch(_0x178087){this[_0x481651(0x1bc)]['warn'](_0x481651(0x11c)+_0x178087[_0x481651(0x132)]);}}async[a0_0x1f67ae(0xef)](_0x1fdbf6){const _0x3cfb15=a0_0x1f67ae;if(!_0x1fdbf6||typeof _0x1fdbf6!==_0x3cfb15(0x18c))return;const _0x33c144={'timestamp':_0x1fdbf6[_0x3cfb15(0xf0)]||Date[_0x3cfb15(0x19e)](),'id':_0x1fdbf6['id']||Date['now']()['toString'](),'name':_0x1fdbf6[_0x3cfb15(0x1e0)]||'Manual\x20Event','type':_0x1fdbf6[_0x3cfb15(0x147)]||_0x3cfb15(0x13d),'location':_0x1fdbf6[_0x3cfb15(0x225)]||_0x3cfb15(0xf3),'value':_0x1fdbf6['value']||null};this[_0x3cfb15(0x24f)]['unshift'](_0x33c144);if(this[_0x3cfb15(0x24f)][_0x3cfb15(0x14a)]>0x1388)this['eventHistory'][_0x3cfb15(0x217)]();await this['setStateAsync']('events.history',{'val':JSON[_0x3cfb15(0x1fe)](this[_0x3cfb15(0x24f)]),'ack':!![]}),this[_0x3cfb15(0x1bc)][_0x3cfb15(0x11f)](_0x3cfb15(0x1a8)+_0x33c144[_0x3cfb15(0x1e0)]+'\x20('+_0x33c144[_0x3cfb15(0x225)]+')');}[a0_0x1f67ae(0xfd)](_0x2b611c){}}if(require[a0_0x1f67ae(0x18a)]!==module)module[a0_0x1f67ae(0xfc)]=_0x31838e=>new CogniLiving(_0x31838e);else new CogniLiving();