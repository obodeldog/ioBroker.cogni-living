function a0_0x8726(){const _0x20c6e2=['role','ROLLE:\x20F√ºrsorglicher\x20Assistent.\x0a\x20\x20\x20\x20\x20\x20\x20\x20AUFGABE:\x20Schreibe\x20eine\x20kurze,\x20beruhigende\x20\x22Guten\x20Morgen\x22-Nachricht\x20an\x20die\x20Angeh√∂rigen/Bewohner.\x0a\x20\x20\x20\x20\x20\x20\x20\x20TON:\x20Freundlich,\x20professionell,\x20kurz.\x0a\x20\x20\x20\x20\x20\x20\x20\x20PERSONA\x20(Fokus):\x20','status','state','startExitTimer','getForeignObjectAsync','wohnungst√ºr','genAI','\x20sent','length','activity','eingang','getSystemUUID','runAutopilot','getCalendarNames\x20Error:\x20','setStateAsync','loadRawEventLog','geminiApiKey','.NextHours.Location_1.Day_1.current.symbol_desc','0\x204\x20*\x20*\x20*','getLtmData','getObjectAsync','WETTER:\x20Keine\x20Daten','analysis.lastResult','cogni-living\x20adapter\x20starting\x20(v','exitTimer','\x0a\x20\x20\x20\x20\x20\x20\x20\x20INPUT:\x20','toUpperCase','driftAnalysisTimer','useCalendar','analysis.activitySummary','response','lastAlertState','STICKY_UNREACH','link_quality','isArray','mac\x20address','sensor.door','callback','enum.rooms.*','main','map','split','Wohnzimmer','Drift\x20Analysis','smoke','notifySignalRecipient','Missing\x20data','info.','Licht','LTM.triggerDailyDigest','griff','lampe','summary','last\x20action','now','[TEST]\x20','triggerDailyDigest','Briefing\x20Error:\x20','@google/generative-ai','toFixed','calendarSelection','subscribeForeignStatesAsync','OPERATING_VOLTAGE','checkLtmObjects','firmware','number','checkLicense','city','Drift\x20Status','\x20hours.\x20The\x20resident\x20might\x20be\x20incapacitated.\x20Risk\x20level:\x20HIGH.','Fenster/T√ºr','_score','siren','admin.','sendToAsync','Fokus\x20auf\x20Maximierung\x20von\x20Komfort,\x20Automatisierungseffizienz\x20und\x20Energieeinsparung.','sendMorningBriefing','1445716LIKYJs','includes','LTM.driftAnalysis','modelid','effect','some','analysis.history_debug_04','Error\x20reading\x20calendar\x20table:\x20','enum','initHistory','restlessness','analysis.history_debug_02','setupModeResetScheduler','constructor','apiKey','location','onMessage','PRO-','accuweather','\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20AUFGABE:\x20Analysiere\x20die\x20Events\x20auf\x20Aktivit√§t,\x20Komfort\x20und\x20GESUNDHEIT.\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20Nutze\x20den\x20EXTERNEN\x20KONTEXT\x20(Wetter/Kalender)\x20um\x20Fehlalarme\x20zu\x20vermeiden\x20(z.B.\x20Regen\x20=\x20keine\x20Gartenaktivit√§t,\x20Termin\x20=\x20Abwesend).\x0a\x20\x20\x20\x20\x20\x20\x20\x20SCHEMA:\x20{\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22activity\x22:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22deviationFromBaseline\x22:\x20\x22string\x22,\x20\x22isAlert\x22:\x20bool,\x20\x22isEmergency\x22:\x20bool,\x20\x22alertReason\x22:\x20\x22string\x22\x20},\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22comfort\x22:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22suggestion\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22patternDetected\x22:\x20bool,\x20\x22description\x22:\x20\x22string\x22,\x20\x22suggestedAction\x22:\x20\x22string\x22\x20}\x20},\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22health\x22:\x20{\x20\x22sleepScore\x22:\x20number\x20(0-100),\x20\x22restlessness\x22:\x20\x22none|low|medium|high\x22,\x20\x22notes\x22:\x20\x22string\x22\x20}\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20}','Creating\x20Daily\x20Digest\x20from\x20','history.','date','notifyTelegramRecipient','VIRTUAL_CHANNEL','process','k√ºche','warn','uuid-error','catch','button','daswetter.','icon','.forecast.current.state','KALENDER\x20ERROR:\x20','Zu\x20wenig\x20Daten\x20f√ºr\x20Daily\x20Digest.','.\x20ORT:\x20','ROLLE:\x20Data\x20Analyst.\x20AUFGABE:\x20Fasse\x20den\x20heutigen\x20Tag\x20basierend\x20auf\x20den\x20Sensor-Logs\x20zusammen.\x0a\x20\x20\x20\x20\x20\x20\x20\x20PERSONA:\x20','config','rating','icons-mfd.','2-digit','setupBriefingScheduler','Fehler:\x20','unknown','notifyPushoverEnabled','1026FXDfVb','checkWifiPresence','saveFeedback','abortExitTimer','setState','ready','createAllObjects','Daily\x20Digest\x20erstellt\x20&\x20gespeichert.','ROLLE:\x20Smart\x20Home\x20Analyst.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20AKTUELLE\x20ZEIT:\x20','latitude','\x0a!!!\x20EXTERNAL\x20SYSTEM\x20WARNING\x20!!!\x0a','getCalendarContext','activityLevel','üö®\x20EMERGENCY','openweathermap','common','setPresence','members','fire','getStateAsync','Autopilot\x20error:\x20','eventHistory','Generating\x20Morning\x20Briefing...','setHours','Analysiere\x20Tag...','vis.','weatherunderground.0','longitude','events.history','system','Last\x20Check','loadSystemMode','modeResetJob','temperatur','NORMAL','openweathermap.','analysis.analysisHistory','useWeather','isGracePeriodActive','notifyPushoverInstance','analysis.automation.patternDetected','uuid','Flur','update','Kalender:\x20Deaktiviert','Daily\x20Digest\x20Error:\x20','\x20sensors...','\x20presence\x20devices...','scanDevices','doors','weather','(((.+)+)+)+$','javascript.0.script','updateAnalysisHistory','Urlaub','.\x20PR√ÑSENZ:\x20','slice','loadRawEventLog\x20failed:\x20','111870YLfKgl','dailyDigests','Success','@iobroker/adapter-core','object','Morning\x20Briefing\x20sent.','DIRECTION','archetype','message','pr√§senz','extendObjectAsync','PROCESS','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20OUTPUT:\x20Nur\x20der\x20Nachrichtentext\x20(kein\x20JSON).\x20Integriere\x20den\x20Kontext\x20(Wetter/Kalender)\x20nur\x20wenn\x20relevant.','parse','analysis.alertReason','notifyWhatsappInstance','6903400mDpPNb','.\x0a\x20\x20\x20\x20\x20\x20\x20\x20EXTERNER\x20KONTEXT\x20(WICHTIG):\x20','setupLtmScheduler','ERROR','Nein','analysis.isEmergency','fenster','notifyTelegramEnabled','trim','Normal','analysis.deviationFromBaseline','automationProposal','analysis.health.notes','isEmergency','hue','toString','deviationFromBaseline','VACATION','.Summary.Current','analysisHistory','analysisTimer','Analysiere\x20ausgewogen\x20auf\x20Gesundheit,\x20Sicherheit\x20und\x20Komfort.','üåÖ\x20Daily\x20Briefing:\x0a','colormode','Adapter','Schlafzimmer','feedbackHistory','TEST-PRO-KEY','20nHcFro','flot.','PRIORIT√ÑT:\x20Gesundheit\x20und\x20Sicherheit\x20f√ºr\x20Senioren\x20(AAL).\x20Erkenne\x20Inaktivit√§t,\x20potenzielle\x20St√ºrze\x20(indirekt),\x20Schlafunterbrechungen\x20und\x20n√§chtliche\x20Unruhe.','UNREACH','triggerBriefing','rawEventLog','Wetter:\x20Deaktiviert','log','No\x20instance','LTM.baselineStatus','1QgPwDy','LTM.rawEventLog','notifyWhatsappRecipient','currentSystemMode','saveRawEventLog','notes','guest','.\x20PERSONA:\x20','notifyEmailRecipient','licht','KALENDER:\x20Keine\x20Daten','isAlert','battery','\x0a!!!\x20END\x20WARNING\x20!!!\x0a','timestamp','runGeminiAnalysis','Trigger\x20Digest','\x20(EMERGENCY)','channel','native','systemConfig','4092363HYiqDC','loadDailyDigests\x20failed:\x20','occupancy','isProVersion','long','475974XTmqBX','WETTER:\x20','AES_KEY','inactivityThresholdHours','getWeatherContext','Baseline:\x20Inactive\x20(Pro\x20Feature).','namespace','info','tryParse','de-DE','temp','json','productname','WORKING','LTM.driftAnalysis.baselineDrift','pop','Gast','PARTY','startsWith','Rauchmelder','KALENDER:\x20Keine\x20relevanten\x20Termine','subscribeStates','Daily\x20Digests','value.humidity','geminiModel','setupDriftAnalysisScheduler','\x0a\x20\x20\x20\x20\x20\x20\x20\x20ZUSATZ-KONTEXT:\x20','Baseline\x20Status','string','reachable','rauch','analysisInterval','onStateChange','stateChange','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','Temperatur','aiPersona','signal','analysis.automation.description','Gemini\x20AI\x20initialized.','testContext','analysis.automation.suggestedAction','4157340cMQDdH','getGenerativeModel','wohn','generateContent','models/gemini-flash-latest','analysis.trigger','_calName','Gemini\x20Init\x20Error:\x20','Party','analysis.triggerBriefing','mode','text','unshift','system.meta.uuid','analysis.history_debug_01','shutter_contact','checkLtmDriftObjects','COMBINED_PARAMETER','bad','briefingJob','filter','toISOString','LTM.driftAnalysis.driftDetails','sat','1684664pMQLMB','val','analysis.history_debug_00','getCalendarNames','accuweather.','exitGraceTimer','error','connection','system.mode','Bewegung','from','submitFeedback','diele','System\x20Mode','accuweather.0','events.history_debug_00','ALARM','Garten','weatherunderground.','analysis.comfortSummary','selectedFunctionIds','scanForDevices','events.history_debug_04','getForeignStateAsync','health','KALENDER:\x20','sensorLastValues','send','presence','search','ack','events.lastEvent','comfort','ERROR_CODE','SABOTAGE','livingContext','level.dimmer','unload','Fokus\x20auf\x20Familienroutinen,\x20Kindersicherheit\x20und\x20allgemeines\x20Haushaltsmanagement.','retry','Cogni-Living\x20Alert','push','Badezimmer','Error\x20in\x20onMessage\x20command\x20','processSensorEvent','licenseKey','N/A','CRITICAL\x20WARNING:\x20No\x20sensor\x20activity\x20detected\x20for\x20','bind','scriptProblem','daswetter.0','sleepScore','‚ö†Ô∏è\x20Alarm','logDuplicates','FAULT','manufacturer','analysis.isAlert','description','Starting\x20Autopilot\x20(','/100\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Aktivit√§t\x20seit\x2004:00\x20Uhr:\x20','notifyEmailInstance','alertReason','GUEST','expire','presenceDevices','normal','Starting\x20Smart\x20Scan\x20with\x20filters:\x20','events.history_debug_02','onUnload','isPresent','WETTER\x20ERROR:\x20','ltmJob','system.','KALENDER:\x20Keine\x20Kalender\x20ausgew√§hlt\x20(Bitte\x20in\x20Settings\x20konfigurieren)','generic','isExit','.data.table','analysis.health.restlessness','daswetter','test','command','loadSystemMode\x20failed:\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20KONTEXT\x20(Wer\x20wohnt\x20hier?):\x20','onReady','name','events.history_debug_01','Processing\x20Status','enum.functions.*','cancel','systemUUID','t√ºr','flur','join','type','Subscribing\x20to\x20','saveDailyDigests','sort','motion','devices','time','party','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20DATEN:\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Schlafqualit√§t\x20letzte\x20Nacht:\x20','toLowerCase','version','notifySignalInstance','Analysis\x20Error:\x20','stringify','detectionState','haust√ºr','temperature','sendNotification','sound','getForeignObjectsAsync','none','Daily\x20Digest\x20created\x20successfully.','RSSI','\x0aFEEDBACK:\x0a','Sending\x20notification:\x20\x22','ical.0','LTM','\x0a\x20\x20\x20\x20\x20\x20\x20\x20OUTPUT\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22,\x20\x22health\x22:\x20{\x20\x22sleepScore\x22:\x20number,\x20\x22restlessness\x22:\x20\x22string\x22\x20}\x20}','application/json','replace','LTM.driftAnalysis.lastCheck','sendTo','boolean','yr.','notifySignalEnabled','8ppKPzj'];a0_0x8726=function(){return _0x20c6e2;};return a0_0x8726();}const a0_0x77f8a9=a0_0x39ef;(function(_0x3ad1f8,_0x29fd82){const _0x34ac76=a0_0x39ef,_0x3a61a3=_0x3ad1f8();while(!![]){try{const _0x20a0f0=parseInt(_0x34ac76(0x1df))/0x1*(parseInt(_0x34ac76(0x23b))/0x2)+-parseInt(_0x34ac76(0x1f9))/0x3+parseInt(_0x34ac76(0x30a))/0x4*(parseInt(_0x34ac76(0x1d5))/0x5)+parseInt(_0x34ac76(0x223))/0x6+-parseInt(_0x34ac76(0x1b9))/0x7*(parseInt(_0x34ac76(0x2bb))/0x8)+-parseInt(_0x34ac76(0x338))/0x9*(parseInt(_0x34ac76(0x1a9))/0xa)+parseInt(_0x34ac76(0x1f4))/0xb;if(_0x20a0f0===_0x29fd82)break;else _0x3a61a3['push'](_0x3a61a3['shift']());}catch(_0xb6cf66){_0x3a61a3['push'](_0x3a61a3['shift']());}}}(a0_0x8726,0xe3bbb));const a0_0x10b9f1=(function(){let _0x3e1ef3=!![];return function(_0xe4730,_0x50a722){const _0x1b2fd1=_0x3e1ef3?function(){if(_0x50a722){const _0x141047=_0x50a722['apply'](_0xe4730,arguments);return _0x50a722=null,_0x141047;}}:function(){};return _0x3e1ef3=![],_0x1b2fd1;};}()),a0_0x213bb3=a0_0x10b9f1(this,function(){const _0x9e5bb2=a0_0x39ef;return a0_0x213bb3[_0x9e5bb2(0x1c8)]()[_0x9e5bb2(0x258)]('(((.+)+)+)+$')[_0x9e5bb2(0x1c8)]()[_0x9e5bb2(0x317)](a0_0x213bb3)[_0x9e5bb2(0x258)](_0x9e5bb2(0x1a2));});a0_0x213bb3();'use strict';const utils=require(a0_0x77f8a9(0x1ac)),{GoogleGenerativeAI}=require(a0_0x77f8a9(0x2f7)),schedule=require('node-schedule'),HISTORY_MAX_SIZE=0x32,ANALYSIS_HISTORY_MAX_SIZE=0x64,RAW_LOG_MAX_SIZE=0x5dc,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL=a0_0x77f8a9(0x227),LTM_SCHEDULE='0\x203\x20*\x20*\x20*',MODE_RESET_SCHEDULE=a0_0x77f8a9(0x2cf),LTM_DP_RAW_LOG=a0_0x77f8a9(0x1e0),LTM_DP_DAILY_DIGESTS='LTM.dailyDigests',LTM_DP_STATUS='LTM.processingStatus',LTM_DP_TRIGGER_DIGEST=a0_0x77f8a9(0x2ee),LTM_DP_BASELINE_STATUS=a0_0x77f8a9(0x1de),LTM_DP_DRIFT_CHANNEL=a0_0x77f8a9(0x30c),LTM_DP_DRIFT_STATUS=a0_0x77f8a9(0x207),LTM_DP_DRIFT_DETAILS=a0_0x77f8a9(0x239),LTM_DP_DRIFT_LAST_CHECK=a0_0x77f8a9(0x2b6),SYSTEM_DP_MODE=a0_0x77f8a9(0x243),SYSTEM_MODES={'NORMAL':a0_0x77f8a9(0x27c),'VACATION':'vacation','PARTY':a0_0x77f8a9(0x29f),'GUEST':a0_0x77f8a9(0x1e5)},AUTO_RESET_MODES=[SYSTEM_MODES['PARTY'],SYSTEM_MODES[a0_0x77f8a9(0x279)]],EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,PERSONA_MAPPING={'generic':a0_0x77f8a9(0x1ce),'senior_aal':a0_0x77f8a9(0x1d7),'family':a0_0x77f8a9(0x261),'single_comfort':a0_0x77f8a9(0x308),'security':'PRIORIT√ÑT:\x20Sicherheit.\x20Erkenne\x20Eindringlinge,\x20ungew√∂hnliche\x20Anwesenheit.'};class CogniLiving extends utils[a0_0x77f8a9(0x1d1)]{constructor(_0x1b71eb){const _0x4eabb1=a0_0x77f8a9;super({..._0x1b71eb,'name':'cogni-living'}),this[_0x4eabb1(0x34d)]=[],this[_0x4eabb1(0x1cc)]=[],this[_0x4eabb1(0x1d3)]=[],this[_0x4eabb1(0x1da)]=[],this[_0x4eabb1(0x1aa)]=[],this['sensorLastValues']={},this[_0x4eabb1(0x1f3)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x4eabb1(0x280)]=!![],this[_0x4eabb1(0x2d5)]=null,this[_0x4eabb1(0x240)]=null,this[_0x4eabb1(0x195)]=![],this['genAI']=null,this[_0x4eabb1(0x211)]=null,this[_0x4eabb1(0x1e2)]=SYSTEM_MODES[_0x4eabb1(0x191)],this[_0x4eabb1(0x1f7)]=![],this[_0x4eabb1(0x2dc)]=![],this[_0x4eabb1(0x294)]=_0x4eabb1(0x336),this[_0x4eabb1(0x1cd)]=null,this[_0x4eabb1(0x282)]=null,this[_0x4eabb1(0x18f)]=null,this[_0x4eabb1(0x2d8)]=null,this[_0x4eabb1(0x236)]=null,this['on'](_0x4eabb1(0x33d),this[_0x4eabb1(0x28e)][_0x4eabb1(0x26b)](this)),this['on'](_0x4eabb1(0x21a),this[_0x4eabb1(0x219)][_0x4eabb1(0x26b)](this)),this['on'](_0x4eabb1(0x260),this[_0x4eabb1(0x27f)][_0x4eabb1(0x26b)](this)),this['on'](_0x4eabb1(0x1b1),this[_0x4eabb1(0x31a)][_0x4eabb1(0x26b)](this));}async['onReady'](){const _0x5b603d=a0_0x77f8a9;this[_0x5b603d(0x1dc)][_0x5b603d(0x200)](_0x5b603d(0x2d4)+this[_0x5b603d(0x2a2)]+')');try{const _0x52fba5=[_0x5b603d(0x23d),_0x5b603d(0x231),_0x5b603d(0x315),'analysis.history_debug_03',_0x5b603d(0x310),_0x5b603d(0x24a),_0x5b603d(0x290),_0x5b603d(0x27e),'events.history_debug_03',_0x5b603d(0x251)];for(const _0x421f7a of _0x52fba5){try{const _0x335ebc=await this[_0x5b603d(0x2d1)](_0x421f7a);_0x335ebc&&await this['delObjectAsync'](_0x421f7a);}catch(_0x4ceab5){}}}catch(_0x2e8975){}this['config'][_0x5b603d(0x268)]=this[_0x5b603d(0x330)][_0x5b603d(0x268)]||'';try{this[_0x5b603d(0x1f7)]=await this['checkLicense'](this[_0x5b603d(0x330)][_0x5b603d(0x268)]);}catch(_0x5051e8){this[_0x5b603d(0x1dc)][_0x5b603d(0x241)]('License\x20Check\x20failed:\x20'+_0x5051e8[_0x5b603d(0x1b1)]);}if(!this[_0x5b603d(0x330)][_0x5b603d(0x1fc)]||this[_0x5b603d(0x330)][_0x5b603d(0x1fc)]<0.1)this[_0x5b603d(0x330)][_0x5b603d(0x1fc)]=0xc;try{await this[_0x5b603d(0x313)]();}catch(_0x276cc8){this[_0x5b603d(0x1dc)][_0x5b603d(0x241)]('Error\x20initHistory:\x20'+_0x276cc8['message']);}try{const _0x444ee3=await this[_0x5b603d(0x2c1)]('system.config');_0x444ee3&&_0x444ee3['common']&&(this[_0x5b603d(0x1f3)]={'latitude':_0x444ee3['common'][_0x5b603d(0x341)]||0x0,'longitude':_0x444ee3['common'][_0x5b603d(0x353)]||0x0,'city':_0x444ee3[_0x5b603d(0x347)][_0x5b603d(0x300)]||''});}catch(_0x2e7eb9){}if(this['config'][_0x5b603d(0x2cd)])try{this[_0x5b603d(0x2c3)]=new GoogleGenerativeAI(this[_0x5b603d(0x330)][_0x5b603d(0x2cd)]),this[_0x5b603d(0x211)]=this[_0x5b603d(0x2c3)][_0x5b603d(0x224)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x5b603d(0x2b4)}}),this[_0x5b603d(0x1dc)]['info'](_0x5b603d(0x220));}catch(_0x213922){this[_0x5b603d(0x1dc)][_0x5b603d(0x241)](_0x5b603d(0x22a)+_0x213922[_0x5b603d(0x1b1)]);}try{await this[_0x5b603d(0x33e)]();}catch(_0x23b4b8){this[_0x5b603d(0x1dc)][_0x5b603d(0x241)]('createAllObjects\x20failed:\x20'+_0x23b4b8[_0x5b603d(0x1b1)]);}try{await this[_0x5b603d(0x357)]();}catch(_0x513cc8){this[_0x5b603d(0x1dc)][_0x5b603d(0x241)](_0x5b603d(0x28c)+_0x513cc8['message']);}try{await this[_0x5b603d(0x2cc)]();}catch(_0x4da562){this[_0x5b603d(0x1dc)]['error'](_0x5b603d(0x1a8)+_0x4da562[_0x5b603d(0x1b1)]);}try{await this['loadDailyDigests']();}catch(_0x2b6737){this[_0x5b603d(0x1dc)][_0x5b603d(0x241)](_0x5b603d(0x1f5)+_0x2b6737[_0x5b603d(0x1b1)]);}this[_0x5b603d(0x20e)]('analysis.trigger'),this[_0x5b603d(0x20e)](LTM_DP_TRIGGER_DIGEST),this['subscribeStates'](_0x5b603d(0x243)),this[_0x5b603d(0x20e)](_0x5b603d(0x22c));const _0x32c4df=this[_0x5b603d(0x330)][_0x5b603d(0x29d)];if(_0x32c4df&&_0x32c4df[_0x5b603d(0x2c5)]>0x0){this[_0x5b603d(0x1dc)][_0x5b603d(0x200)](_0x5b603d(0x299)+_0x32c4df['length']+_0x5b603d(0x19d));for(const _0x38c520 of _0x32c4df){if(_0x38c520['id']){await this[_0x5b603d(0x2fa)](_0x38c520['id']);try{const _0x57b012=await this[_0x5b603d(0x252)](_0x38c520['id']);if(_0x57b012)this[_0x5b603d(0x255)][_0x38c520['id']]=_0x57b012[_0x5b603d(0x23c)];}catch(_0x326131){}}}}const _0x43caa8=this[_0x5b603d(0x330)][_0x5b603d(0x27b)]||[];if(_0x43caa8[_0x5b603d(0x2c5)]>0x0){this[_0x5b603d(0x1dc)][_0x5b603d(0x200)](_0x5b603d(0x299)+_0x43caa8[_0x5b603d(0x2c5)]+_0x5b603d(0x19e));for(const _0x19e792 of _0x43caa8){await this[_0x5b603d(0x2fa)](_0x19e792);}try{await this['checkWifiPresence']();}catch(_0x22a756){}}if(this['analysisTimer'])clearInterval(this[_0x5b603d(0x1cd)]);const _0x1bde5e=this['config'][_0x5b603d(0x218)]||0xf;_0x1bde5e>0x0&&(this[_0x5b603d(0x1dc)][_0x5b603d(0x200)](_0x5b603d(0x275)+_0x1bde5e+'\x20min).\x20Watchdog\x20Limit:\x20'+this[_0x5b603d(0x330)][_0x5b603d(0x1fc)]+'h.'),this[_0x5b603d(0x1cd)]=setInterval(()=>{const _0x126d91=_0x5b603d;try{this[_0x126d91(0x2c9)]();}catch(_0x536183){this[_0x126d91(0x1dc)][_0x126d91(0x241)](_0x126d91(0x34c)+_0x536183[_0x126d91(0x1b1)]);}},_0x1bde5e*0x3c*0x3e8)),this[_0x5b603d(0x1bb)](),this[_0x5b603d(0x316)](),this[_0x5b603d(0x212)](),this[_0x5b603d(0x334)]();}[a0_0x77f8a9(0x27f)](_0x256dee){const _0x467d60=a0_0x77f8a9;if(this[_0x467d60(0x1cd)])clearInterval(this[_0x467d60(0x1cd)]);if(this[_0x467d60(0x2d8)])clearInterval(this[_0x467d60(0x2d8)]);if(this[_0x467d60(0x282)])this[_0x467d60(0x282)][_0x467d60(0x293)]();if(this[_0x467d60(0x18f)])this[_0x467d60(0x18f)]['cancel']();if(this[_0x467d60(0x236)])this[_0x467d60(0x236)][_0x467d60(0x293)]();if(this[_0x467d60(0x2d5)])clearTimeout(this[_0x467d60(0x2d5)]);if(this['exitGraceTimer'])clearTimeout(this['exitGraceTimer']);_0x256dee();}async['onStateChange'](_0x52157f,_0x35b2f3){const _0x37780e=a0_0x77f8a9;if(!_0x35b2f3)return;if(_0x52157f===this[_0x37780e(0x1ff)]+'.'+SYSTEM_DP_MODE){_0x35b2f3[_0x37780e(0x23c)]&&Object['values'](SYSTEM_MODES)[_0x37780e(0x30b)](_0x35b2f3['val'])&&(this[_0x37780e(0x1e2)]=_0x35b2f3['val'],_0x35b2f3[_0x37780e(0x23c)]===SYSTEM_MODES[_0x37780e(0x1ca)]?this['setPresence'](![]):this[_0x37780e(0x348)](!![]));if(!_0x35b2f3[_0x37780e(0x259)])this['setState'](_0x52157f,{'val':this['currentSystemMode'],'ack':!![]});return;}if(!_0x35b2f3['ack']){_0x52157f[_0x37780e(0x30b)](_0x37780e(0x228))&&_0x35b2f3[_0x37780e(0x23c)]&&(this[_0x37780e(0x33c)](_0x52157f,{'val':![],'ack':!![]}),this[_0x37780e(0x1ee)]());if(_0x52157f[_0x37780e(0x30b)](_0x37780e(0x2f5))&&_0x35b2f3['val']){this['setState'](_0x52157f,{'val':![],'ack':!![]});if(this[_0x37780e(0x1f7)])this['createDailyDigest']();}_0x52157f[_0x37780e(0x30b)](_0x37780e(0x1d9))&&_0x35b2f3[_0x37780e(0x23c)]&&(this[_0x37780e(0x33c)](_0x52157f,{'val':![],'ack':!![]}),this['sendMorningBriefing']());return;}if(this[_0x37780e(0x330)][_0x37780e(0x27b)]&&this['config'][_0x37780e(0x27b)][_0x37780e(0x30b)](_0x52157f)){await this[_0x37780e(0x339)]();return;}const _0x4ec307=(this[_0x37780e(0x330)]['devices']||[])['find'](_0x86bd3b=>_0x86bd3b['id']===_0x52157f);if(_0x4ec307)this[_0x37780e(0x267)](_0x52157f,_0x35b2f3,_0x4ec307);}async[a0_0x77f8a9(0x31a)](_0x68a66){const _0x496197=a0_0x77f8a9;if(typeof _0x68a66===_0x496197(0x1ad)&&_0x68a66[_0x496197(0x1b1)])try{if(_0x68a66[_0x496197(0x28b)]==='testApiKey'){if(!_0x68a66['message'][_0x496197(0x318)])return this[_0x496197(0x2b7)](_0x68a66[_0x496197(0x245)],_0x68a66[_0x496197(0x28b)],{'success':![],'message':'No\x20Key'},_0x68a66['callback']);try{const _0x2eced6=new GoogleGenerativeAI(_0x68a66[_0x496197(0x1b1)][_0x496197(0x318)])[_0x496197(0x224)]({'model':_0x496197(0x227)});await _0x2eced6[_0x496197(0x226)](_0x496197(0x28a)),this[_0x496197(0x2b7)](_0x68a66[_0x496197(0x245)],_0x68a66['command'],{'success':!![],'message':_0x496197(0x1ab)},_0x68a66[_0x496197(0x2e2)]);}catch(_0x15b591){this[_0x496197(0x2b7)](_0x68a66['from'],_0x68a66[_0x496197(0x28b)],{'success':![],'message':_0x15b591[_0x496197(0x1b1)]},_0x68a66[_0x496197(0x2e2)]);}}else{if(_0x68a66['command']==='testNotification'){const _0x214315=await this[_0x496197(0x2a9)]('[Test]\x20Notification',!![]);this['sendTo'](_0x68a66['from'],_0x68a66[_0x496197(0x28b)],{'success':_0x214315>0x0,'message':_0x214315+_0x496197(0x2c4)},_0x68a66[_0x496197(0x2e2)]);}else{if(_0x68a66[_0x496197(0x28b)]===_0x496197(0x2d0)){if(!this[_0x496197(0x1f7)])return this[_0x496197(0x2b7)](_0x68a66['from'],_0x68a66['command'],{'success':![],'isPro':![]},_0x68a66[_0x496197(0x2e2)]);let _0x38fb71={'status':_0x496197(0x269),'details':'','lastCheck':0x0};try{_0x38fb71[_0x496197(0x2be)]=(await this[_0x496197(0x34b)](LTM_DP_DRIFT_STATUS))[_0x496197(0x23c)],_0x38fb71['details']=(await this[_0x496197(0x34b)](LTM_DP_DRIFT_DETAILS))[_0x496197(0x23c)],_0x38fb71['lastCheck']=(await this[_0x496197(0x34b)](LTM_DP_DRIFT_LAST_CHECK))['val'];}catch(_0x4fce03){}this['sendTo'](_0x68a66['from'],_0x68a66[_0x496197(0x28b)],{'success':!![],'isPro':!![],'dailyDigests':this[_0x496197(0x1aa)],'driftAnalysis':_0x38fb71,'analysisHistory':this[_0x496197(0x1cc)]},_0x68a66['callback']);}else{if(_0x68a66[_0x496197(0x28b)]==='getEnums'){const _0x3908b7=await this['getForeignObjectsAsync'](_0x496197(0x292),_0x496197(0x312)),_0x50852e=[];if(_0x3908b7)for(const _0x4e5557 in _0x3908b7){const _0x35c9c3=_0x3908b7[_0x4e5557],_0x23cff2=(_0x35c9c3['common']&&typeof _0x35c9c3[_0x496197(0x347)]['name']===_0x496197(0x1ad)?_0x35c9c3['common'][_0x496197(0x28f)]['de']:_0x35c9c3[_0x496197(0x347)][_0x496197(0x28f)])||_0x35c9c3[_0x496197(0x347)][_0x496197(0x28f)];_0x50852e[_0x496197(0x264)]({'id':_0x4e5557,'name':_0x23cff2});}this['sendTo'](_0x68a66[_0x496197(0x245)],_0x68a66[_0x496197(0x28b)],{'success':!![],'enums':_0x50852e},_0x68a66[_0x496197(0x2e2)]);}else{if(_0x68a66[_0x496197(0x28b)]===_0x496197(0x19f))try{const _0x338940=await this[_0x496197(0x250)](_0x68a66[_0x496197(0x1b1)]||{});this[_0x496197(0x2b7)](_0x68a66[_0x496197(0x245)],_0x68a66['command'],{'success':!![],'devices':_0x338940},_0x68a66[_0x496197(0x2e2)]);}catch(_0x24fcb5){this[_0x496197(0x2b7)](_0x68a66[_0x496197(0x245)],_0x68a66[_0x496197(0x28b)],{'success':![],'error':_0x24fcb5[_0x496197(0x1b1)]},_0x68a66[_0x496197(0x2e2)]);}else{if(_0x68a66[_0x496197(0x28b)]===_0x496197(0x246)){const {historyId:_0x11bc2c,rating:_0x59c133,comment:_0x54f857,alertReason:_0x4ca2b5}=_0x68a66['message'];_0x11bc2c&&_0x59c133?(await this[_0x496197(0x33a)]({'timestamp':Date['now'](),'historyId':_0x11bc2c,'rating':_0x59c133,'comment':_0x54f857,'alertReason':_0x4ca2b5}),this[_0x496197(0x2b7)](_0x68a66[_0x496197(0x245)],_0x68a66[_0x496197(0x28b)],{'success':!![]},_0x68a66[_0x496197(0x2e2)])):this[_0x496197(0x2b7)](_0x68a66[_0x496197(0x245)],_0x68a66[_0x496197(0x28b)],{'success':![],'error':_0x496197(0x2eb)},_0x68a66[_0x496197(0x2e2)]);}else{if(_0x68a66[_0x496197(0x28b)]===_0x496197(0x221)){const _0x58b5b9=await this['getWeatherContext'](),_0x3e066d=await this[_0x496197(0x343)]();this[_0x496197(0x2b7)](_0x68a66[_0x496197(0x245)],_0x68a66[_0x496197(0x28b)],{'success':!![],'weather':_0x58b5b9,'calendar':_0x3e066d},_0x68a66[_0x496197(0x2e2)]);}else{if(_0x68a66[_0x496197(0x28b)]===_0x496197(0x23e)){const _0x186cff=_0x68a66[_0x496197(0x1b1)]['instance'];if(!_0x186cff)return this[_0x496197(0x2b7)](_0x68a66[_0x496197(0x245)],_0x68a66['command'],{'success':![],'error':_0x496197(0x1dd)},_0x68a66[_0x496197(0x2e2)]);const _0xa32b2d=await this[_0x496197(0x23e)](_0x186cff);this[_0x496197(0x2b7)](_0x68a66[_0x496197(0x245)],_0x68a66[_0x496197(0x28b)],{'success':!![],'names':_0xa32b2d},_0x68a66[_0x496197(0x2e2)]);}}}}}}}}}catch(_0x41b7a6){this[_0x496197(0x1dc)][_0x496197(0x241)](_0x496197(0x266)+_0x68a66['command']+':\x20'+_0x41b7a6[_0x496197(0x1b1)]);if(_0x68a66['callback'])this[_0x496197(0x2b7)](_0x68a66[_0x496197(0x245)],_0x68a66[_0x496197(0x28b)],{'success':![],'error':_0x41b7a6[_0x496197(0x1b1)]},_0x68a66[_0x496197(0x2e2)]);}}async[a0_0x77f8a9(0x267)](_0x11280b,_0x1a4a55,_0x27182c){const _0x458b98=a0_0x77f8a9;if(!_0x27182c[_0x458b98(0x270)]&&this[_0x458b98(0x255)][_0x11280b]===_0x1a4a55[_0x458b98(0x23c)])return;this[_0x458b98(0x255)][_0x11280b]=_0x1a4a55['val'];if(this['isGracePeriodActive'])return;const _0x138838=await this[_0x458b98(0x339)]();if(_0x138838){if(!this[_0x458b98(0x280)])this[_0x458b98(0x348)](!![]);}else{const _0x4c9a8d=_0x27182c[_0x458b98(0x286)]===!![];_0x4c9a8d?this[_0x458b98(0x2c0)]():(this[_0x458b98(0x2d5)]&&(this[_0x458b98(0x1dc)][_0x458b98(0x200)]('Bewegung\x20w√§hrend\x20Exit-Timer\x20erkannt\x20->\x20Bewohner\x20ist\x20noch\x20da.'),this[_0x458b98(0x33b)]()),!this['isPresent']&&this[_0x458b98(0x1e2)]===SYSTEM_MODES[_0x458b98(0x191)]&&this[_0x458b98(0x348)](!![]));}const _0x108bc4={'timestamp':_0x1a4a55['ts'],'id':_0x11280b,'name':_0x27182c['name'],'value':_0x1a4a55[_0x458b98(0x23c)],'location':_0x27182c[_0x458b98(0x319)],'type':_0x27182c[_0x458b98(0x298)]};this[_0x458b98(0x34d)][_0x458b98(0x22f)](_0x108bc4);if(this[_0x458b98(0x34d)][_0x458b98(0x2c5)]>HISTORY_MAX_SIZE)this[_0x458b98(0x34d)][_0x458b98(0x208)]();await this[_0x458b98(0x2cb)](_0x458b98(0x25a),{'val':JSON['stringify'](_0x108bc4),'ack':!![]}),await this[_0x458b98(0x2cb)](_0x458b98(0x354),{'val':JSON['stringify'](this[_0x458b98(0x34d)]),'ack':!![]}),this[_0x458b98(0x1da)][_0x458b98(0x264)]({'timestamp':new Date(_0x1a4a55['ts'])[_0x458b98(0x238)](),'sensorName':_0x27182c[_0x458b98(0x28f)],'location':_0x27182c[_0x458b98(0x319)],'value':_0x1a4a55[_0x458b98(0x23c)]}),await this[_0x458b98(0x1e3)]();}async[a0_0x77f8a9(0x2c9)](){const _0x4ba90e=a0_0x77f8a9,_0x20f37c=this[_0x4ba90e(0x330)][_0x4ba90e(0x1fc)],_0x260708=this[_0x4ba90e(0x330)]['inactivityMonitoringEnabled'],_0x267043=this[_0x4ba90e(0x34d)][_0x4ba90e(0x2c5)]>0x0?this[_0x4ba90e(0x34d)][0x0][_0x4ba90e(0x1ed)]:Date['now'](),_0x135e45=(Date[_0x4ba90e(0x2f3)]()-_0x267043)/(0x3e8*0x3c*0x3c);let _0x42fc6a='';_0x260708&&this[_0x4ba90e(0x1e2)]===SYSTEM_MODES[_0x4ba90e(0x191)]&&this[_0x4ba90e(0x280)]&&(_0x135e45>_0x20f37c&&(_0x42fc6a=_0x4ba90e(0x26a)+_0x135e45[_0x4ba90e(0x2f8)](0x1)+_0x4ba90e(0x302)));if(_0x42fc6a){this[_0x4ba90e(0x1ee)](_0x42fc6a)['catch'](_0x50a1ad=>this['log'][_0x4ba90e(0x241)](_0x50a1ad));return;}const _0x39be8d=Date[_0x4ba90e(0x2f3)](),_0x1dc230=_0x39be8d-_0x267043,_0x86a3f4=(this[_0x4ba90e(0x330)][_0x4ba90e(0x218)]||0xf)*0x3c*0x3e8;this['eventHistory'][_0x4ba90e(0x2c5)]>0x0&&_0x1dc230<=_0x86a3f4?this[_0x4ba90e(0x1ee)]()[_0x4ba90e(0x327)](_0xaeafef=>this[_0x4ba90e(0x1dc)]['error'](_0xaeafef)):!this[_0x4ba90e(0x2dc)]&&(this[_0x4ba90e(0x33c)](_0x4ba90e(0x273),{'val':![],'ack':!![]}),this['setState'](_0x4ba90e(0x1be),{'val':![],'ack':!![]}));}async[a0_0x77f8a9(0x1ee)](_0x38b02e=''){const _0x7b499f=a0_0x77f8a9;if(!this[_0x7b499f(0x211)])return;const _0x28b7cf=this[_0x7b499f(0x34d)][_0x7b499f(0x2c5)]>0x0?this['eventHistory']:[{'note':'No\x20recorded\x20events\x20yet.'}],_0x5dfd76=PERSONA_MAPPING[this['config']['aiPersona']||'generic'],_0x3ca79d=this[_0x7b499f(0x330)]['livingContext']||'',_0x3652e4=this['currentSystemMode'],_0x312983=await this[_0x7b499f(0x1fd)](),_0x1d8eb8=await this[_0x7b499f(0x343)](),_0x116414=(_0x312983+'\x20'+_0x1d8eb8)[_0x7b499f(0x1c1)](),_0x3e33d5=new Date(),_0x2c170d=_0x3e33d5['toLocaleString'](_0x7b499f(0x202),{'weekday':_0x7b499f(0x1f8),'hour':_0x7b499f(0x333),'minute':_0x7b499f(0x333)}),_0x358a8e=this[_0x7b499f(0x1f3)];let _0x1c284a='';if(this['feedbackHistory'][_0x7b499f(0x2c5)]>0x0){const _0x4e1f58=this[_0x7b499f(0x1d3)][_0x7b499f(0x1a7)](0x0,0x3)['map'](_0x4378aa=>'User\x20Feedback:\x20Alarm\x20\x22'+_0x4378aa[_0x7b499f(0x278)]+'\x22\x20was\x20'+_0x4378aa[_0x7b499f(0x331)]+'.')[_0x7b499f(0x297)]('\x0a');_0x1c284a=_0x7b499f(0x2af)+_0x4e1f58+'\x0a';}const _0x58d0a7=_0x38b02e?_0x7b499f(0x342)+_0x38b02e+_0x7b499f(0x1ec):'',_0x88983c=_0x7b499f(0x1fe),_0x589f5d=_0x7b499f(0x340)+_0x2c170d+_0x7b499f(0x32e)+_0x358a8e[_0x7b499f(0x300)]+'.\x0a\x20\x20\x20\x20\x20\x20\x20\x20MODUS:\x20'+_0x3652e4+_0x7b499f(0x1a6)+(this[_0x7b499f(0x280)]?'Ja':_0x7b499f(0x1bd))+'.\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20KONTEXT\x20(Wohnen):\x20'+_0x3ca79d+_0x7b499f(0x1e6)+_0x5dfd76+_0x7b499f(0x1ba)+_0x116414+_0x7b499f(0x21b)+_0x88983c+'\x20'+_0x1c284a+'\x20'+_0x58d0a7+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20EVENTS:\x20'+JSON[_0x7b499f(0x2a5)](_0x28b7cf)+_0x7b499f(0x31d);try{const _0x506599=await this[_0x7b499f(0x211)][_0x7b499f(0x226)](_0x589f5d),_0x3f6539=_0x506599[_0x7b499f(0x2db)][_0x7b499f(0x22e)]()[_0x7b499f(0x2b5)](/```json|```/g,'')[_0x7b499f(0x1c1)](),_0x2609d0=JSON[_0x7b499f(0x1b6)](_0x3f6539);await this[_0x7b499f(0x2cb)](_0x7b499f(0x2d3),{'val':_0x3f6539,'ack':!![]}),await this[_0x7b499f(0x2cb)](_0x7b499f(0x1b7),{'val':_0x2609d0['activity']['alertReason']||'','ack':!![]}),await this[_0x7b499f(0x2cb)](_0x7b499f(0x2da),{'val':_0x2609d0[_0x7b499f(0x2c6)]['summary']||_0x7b499f(0x269),'ack':!![]}),await this[_0x7b499f(0x2cb)](_0x7b499f(0x1c3),{'val':_0x2609d0[_0x7b499f(0x2c6)][_0x7b499f(0x1c9)]||_0x7b499f(0x269),'ack':!![]});_0x2609d0[_0x7b499f(0x25b)]&&(await this[_0x7b499f(0x2cb)](_0x7b499f(0x24e),{'val':_0x2609d0[_0x7b499f(0x25b)][_0x7b499f(0x2f1)]||'','ack':!![]}),await this['setStateAsync']('analysis.comfortSuggestion',{'val':_0x2609d0[_0x7b499f(0x25b)]['suggestion']||'','ack':!![]}),_0x2609d0['comfort'][_0x7b499f(0x1c4)]&&(await this[_0x7b499f(0x2cb)](_0x7b499f(0x197),{'val':_0x2609d0['comfort'][_0x7b499f(0x1c4)]['patternDetected']||![],'ack':!![]}),await this[_0x7b499f(0x2cb)](_0x7b499f(0x21f),{'val':_0x2609d0[_0x7b499f(0x25b)]['automationProposal']['description']||'','ack':!![]}),await this['setStateAsync'](_0x7b499f(0x222),{'val':_0x2609d0['comfort']['automationProposal']['suggestedAction']||'','ack':!![]})));_0x2609d0['health']&&(await this[_0x7b499f(0x2cb)]('analysis.health.sleepScore',{'val':typeof _0x2609d0[_0x7b499f(0x253)][_0x7b499f(0x26e)]===_0x7b499f(0x2fe)?_0x2609d0['health']['sleepScore']:0x0,'ack':!![]}),await this['setStateAsync'](_0x7b499f(0x288),{'val':_0x2609d0[_0x7b499f(0x253)][_0x7b499f(0x314)]||_0x7b499f(0x2ac),'ack':!![]}),await this['setStateAsync'](_0x7b499f(0x1c5),{'val':_0x2609d0['health'][_0x7b499f(0x1e4)]||'','ack':!![]}));const _0x37320f=_0x2609d0[_0x7b499f(0x2c6)][_0x7b499f(0x1ea)]||![],_0x4ca37c=_0x2609d0['activity'][_0x7b499f(0x1c6)]||![];if(_0x37320f||_0x4ca37c){await this[_0x7b499f(0x2cb)](_0x7b499f(0x273),{'val':!![],'ack':!![]}),await this['setStateAsync']('analysis.isEmergency',{'val':_0x4ca37c,'ack':!![]});if(!this[_0x7b499f(0x2dc)]||_0x4ca37c){const _0x102b4e=_0x4ca37c?'üö®üö®\x20NOTFALL':_0x7b499f(0x26f);this[_0x7b499f(0x2a9)](_0x102b4e+':\x20'+_0x2609d0[_0x7b499f(0x2c6)]['alertReason'],![],_0x4ca37c);}}else await this[_0x7b499f(0x2cb)](_0x7b499f(0x273),{'val':![],'ack':!![]}),await this['setStateAsync']('analysis.isEmergency',{'val':![],'ack':!![]});this[_0x7b499f(0x2dc)]=_0x37320f||_0x4ca37c;const _0x4a4f05={'timestamp':Date[_0x7b499f(0x2f3)](),'id':Date[_0x7b499f(0x2f3)]()[_0x7b499f(0x1c8)](),'analysis':_0x2609d0,'systemMode':_0x3652e4,'isPro':this['isProVersion']};this[_0x7b499f(0x1a4)](_0x4a4f05);}catch(_0x2c279b){this[_0x7b499f(0x1dc)][_0x7b499f(0x241)](_0x7b499f(0x2a4)+_0x2c279b[_0x7b499f(0x1b1)]);}}async['createDailyDigest'](){const _0x2a8871=a0_0x77f8a9;if(!this[_0x2a8871(0x211)]||this[_0x2a8871(0x1da)][_0x2a8871(0x2c5)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await this[_0x2a8871(0x2cb)](LTM_DP_STATUS,{'val':_0x2a8871(0x32d),'ack':!![]});return;}this[_0x2a8871(0x1dc)][_0x2a8871(0x200)](_0x2a8871(0x31e)+this['rawEventLog']['length']+'\x20raw\x20events...'),await this[_0x2a8871(0x2cb)](LTM_DP_STATUS,{'val':_0x2a8871(0x350),'ack':!![]});const _0x4ea267=this['rawEventLog'][_0x2a8871(0x2c5)]>0x320?this[_0x2a8871(0x1da)][_0x2a8871(0x1a7)](this[_0x2a8871(0x1da)][_0x2a8871(0x2c5)]-0x320):this[_0x2a8871(0x1da)],_0x14cc1f=PERSONA_MAPPING[this[_0x2a8871(0x330)][_0x2a8871(0x21d)]||'generic'],_0x169459=_0x2a8871(0x32f)+_0x14cc1f+_0x2a8871(0x2d6)+JSON[_0x2a8871(0x2a5)](_0x4ea267)+_0x2a8871(0x2b3);try{const _0x2b1599=await this[_0x2a8871(0x211)]['generateContent'](_0x169459),_0x540bf0=_0x2b1599[_0x2a8871(0x2db)][_0x2a8871(0x22e)]()[_0x2a8871(0x2b5)](/```json|```/g,'')[_0x2a8871(0x1c1)](),_0x8e9150=JSON[_0x2a8871(0x1b6)](_0x540bf0),_0x532677={'timestamp':new Date()[_0x2a8871(0x238)](),'eventCount':this['rawEventLog'][_0x2a8871(0x2c5)],'summary':_0x8e9150[_0x2a8871(0x2f1)],'activityLevel':_0x8e9150[_0x2a8871(0x344)],'health':{'sleepScore':_0x8e9150[_0x2a8871(0x253)]?_0x8e9150[_0x2a8871(0x253)][_0x2a8871(0x26e)]:0x0,'restlessness':_0x8e9150[_0x2a8871(0x253)]?_0x8e9150['health'][_0x2a8871(0x314)]:_0x2a8871(0x2ac)},'systemMode':this['currentSystemMode']};this[_0x2a8871(0x1aa)][_0x2a8871(0x264)](_0x532677),await this[_0x2a8871(0x29a)](),this[_0x2a8871(0x1da)]=[],await this[_0x2a8871(0x1e3)](),await this[_0x2a8871(0x2cb)](LTM_DP_STATUS,{'val':_0x2a8871(0x33f),'ack':!![]}),this[_0x2a8871(0x1dc)]['info'](_0x2a8871(0x2ad));}catch(_0x4ab6f2){this[_0x2a8871(0x1dc)][_0x2a8871(0x241)](_0x2a8871(0x19c)+_0x4ab6f2[_0x2a8871(0x1b1)]),await this['setStateAsync'](LTM_DP_STATUS,{'val':_0x2a8871(0x335)+_0x4ab6f2[_0x2a8871(0x1b1)],'ack':!![]});}}async[a0_0x77f8a9(0x309)](){const _0x1d7b98=a0_0x77f8a9;if(!this[_0x1d7b98(0x211)])return;this['log'][_0x1d7b98(0x200)](_0x1d7b98(0x34e));const _0x333e86=this[_0x1d7b98(0x1aa)][_0x1d7b98(0x2c5)]>0x0?this[_0x1d7b98(0x1aa)][this[_0x1d7b98(0x1aa)]['length']-0x1]:null,_0x25e413=_0x333e86&&_0x333e86[_0x1d7b98(0x253)]?_0x333e86[_0x1d7b98(0x253)][_0x1d7b98(0x26e)]:_0x1d7b98(0x269),_0x1dc1bb=new Date();_0x1dc1bb[_0x1d7b98(0x34f)](0x4,0x0,0x0,0x0);const _0x5bddc2=this['eventHistory'][_0x1d7b98(0x237)](_0xdc9788=>new Date(_0xdc9788[_0x1d7b98(0x1ed)])>_0x1dc1bb),_0x3a2988=PERSONA_MAPPING[this[_0x1d7b98(0x330)][_0x1d7b98(0x21d)]||_0x1d7b98(0x285)],_0x157cf5=this[_0x1d7b98(0x330)][_0x1d7b98(0x25e)]||'',_0x2114cc=await this[_0x1d7b98(0x1fd)](),_0x5a071f=await this[_0x1d7b98(0x343)](),_0x7bdc42=_0x1d7b98(0x2bd)+_0x3a2988+_0x1d7b98(0x28d)+_0x157cf5+_0x1d7b98(0x213)+_0x2114cc+'\x20'+_0x5a071f+_0x1d7b98(0x2a0)+_0x25e413+_0x1d7b98(0x276)+JSON[_0x1d7b98(0x2a5)](_0x5bddc2[_0x1d7b98(0x1a7)](0x0,0xa))+_0x1d7b98(0x1b5);try{const _0x3e78d8=await this[_0x1d7b98(0x211)]['generateContent'](_0x7bdc42),_0x5c02a7=_0x1d7b98(0x1cf)+_0x3e78d8[_0x1d7b98(0x2db)][_0x1d7b98(0x22e)]()['trim']();this[_0x1d7b98(0x2a9)](_0x5c02a7),this[_0x1d7b98(0x1dc)][_0x1d7b98(0x200)](_0x1d7b98(0x1ae));}catch(_0x13a0ec){this['log'][_0x1d7b98(0x241)](_0x1d7b98(0x2f6)+_0x13a0ec[_0x1d7b98(0x1b1)]);}}[a0_0x77f8a9(0x201)](_0x39651c){const _0xdcd7c0=a0_0x77f8a9;if(typeof _0x39651c===_0xdcd7c0(0x1ad))return _0x39651c;try{return JSON[_0xdcd7c0(0x1b6)](_0x39651c);}catch(_0x10c643){return null;}}async['getWeatherContext'](){const _0x37a551=a0_0x77f8a9;try{if(!this[_0x37a551(0x330)][_0x37a551(0x194)])return _0x37a551(0x1db);let _0x129c6b='';const _0x18f6f3=this[_0x37a551(0x330)]['weatherInstance'];if(_0x18f6f3)try{if(_0x18f6f3[_0x37a551(0x30b)](_0x37a551(0x31c))){const _0x223097=await this[_0x37a551(0x252)](_0x18f6f3+_0x37a551(0x1cb));if(_0x223097&&_0x223097[_0x37a551(0x23c)])_0x129c6b=_0x223097[_0x37a551(0x23c)];}else{if(_0x18f6f3[_0x37a551(0x30b)](_0x37a551(0x289))){const _0x6730a7=await this[_0x37a551(0x252)](_0x18f6f3+_0x37a551(0x2ce));if(_0x6730a7&&_0x6730a7[_0x37a551(0x23c)])_0x129c6b=_0x6730a7[_0x37a551(0x23c)];}else{if(_0x18f6f3[_0x37a551(0x30b)](_0x37a551(0x346))){const _0x281204=await this[_0x37a551(0x252)](_0x18f6f3+_0x37a551(0x32b));if(_0x281204&&_0x281204[_0x37a551(0x23c)])_0x129c6b=_0x281204['val'];}}}}catch(_0x2a35da){}if(!_0x129c6b){const _0x11c215=[_0x37a551(0x249),_0x37a551(0x26d),_0x37a551(0x352),'openweathermap.0'];for(const _0xf0eef2 of _0x11c215){try{const _0x59763f=await this[_0x37a551(0x2c1)](_0xf0eef2);if(_0x59763f){if(_0xf0eef2['includes']('accuweather')){const _0x365f03=await this['getForeignStateAsync'](_0xf0eef2+_0x37a551(0x1cb));if(_0x365f03&&_0x365f03[_0x37a551(0x23c)]){_0x129c6b=_0x365f03[_0x37a551(0x23c)];break;}}}}catch(_0x5034ea){}}}return _0x129c6b?_0x37a551(0x1fa)+_0x129c6b:_0x37a551(0x2d2);}catch(_0x18c8bc){return _0x37a551(0x281)+_0x18c8bc['message'];}}async[a0_0x77f8a9(0x343)](){const _0x49cfe3=a0_0x77f8a9;try{if(!this[_0x49cfe3(0x330)][_0x49cfe3(0x2d9)])return _0x49cfe3(0x19b);let _0x273998=this[_0x49cfe3(0x330)]['calendarInstance']||_0x49cfe3(0x2b1),_0x580192=this[_0x49cfe3(0x330)][_0x49cfe3(0x2f9)]||[];if(typeof _0x580192===_0x49cfe3(0x215))_0x580192=_0x580192[_0x49cfe3(0x2e6)](',');try{const _0x4b14c3=await this[_0x49cfe3(0x252)](_0x273998+_0x49cfe3(0x287));if(_0x4b14c3&&_0x4b14c3[_0x49cfe3(0x23c)]){let _0x47ba13=this[_0x49cfe3(0x201)](_0x4b14c3['val']);if(_0x47ba13&&Array[_0x49cfe3(0x2df)](_0x47ba13)){if(_0x580192[_0x49cfe3(0x2c5)]>0x0)_0x47ba13=_0x47ba13[_0x49cfe3(0x237)](_0x79d066=>_0x580192['includes'](_0x79d066[_0x49cfe3(0x229)]||''));else return _0x49cfe3(0x284);if(_0x47ba13[_0x49cfe3(0x2c5)]>0x0){const _0x3c49a1=_0x47ba13[_0x49cfe3(0x1a7)](0x0,0x3)[_0x49cfe3(0x2e5)](_0x2e0ad2=>{const _0x480802=_0x49cfe3;let _0x51385d=_0x2e0ad2[_0x480802(0x320)];if(_0x2e0ad2['time'])_0x51385d+='\x20'+_0x2e0ad2[_0x480802(0x29e)];return _0x51385d+':\x20'+_0x2e0ad2['event']+'\x20('+_0x2e0ad2[_0x480802(0x229)]+')';});return _0x49cfe3(0x254)+_0x3c49a1[_0x49cfe3(0x297)]('\x20|\x20');}else return _0x49cfe3(0x20d);}}}catch(_0x43e49d){this[_0x49cfe3(0x1dc)][_0x49cfe3(0x325)](_0x49cfe3(0x311)+_0x43e49d[_0x49cfe3(0x1b1)]);}return _0x49cfe3(0x1e9);}catch(_0x218e53){return _0x49cfe3(0x32c)+_0x218e53[_0x49cfe3(0x1b1)];}}async[a0_0x77f8a9(0x23e)](_0x585728){const _0x3b697d=a0_0x77f8a9;try{const _0x2a7450=await this[_0x3b697d(0x252)](_0x585728+_0x3b697d(0x287));if(_0x2a7450&&_0x2a7450[_0x3b697d(0x23c)]){const _0x1afc08=this['tryParse'](_0x2a7450['val']);if(_0x1afc08&&Array[_0x3b697d(0x2df)](_0x1afc08)){const _0x2fbe2d=[...new Set(_0x1afc08[_0x3b697d(0x2e5)](_0x59bfec=>_0x59bfec[_0x3b697d(0x229)])[_0x3b697d(0x237)](Boolean))];return _0x2fbe2d[_0x3b697d(0x29b)]();}}return[];}catch(_0x244ae1){return this[_0x3b697d(0x1dc)][_0x3b697d(0x241)](_0x3b697d(0x2ca)+_0x244ae1[_0x3b697d(0x1b1)]),[];}}async[a0_0x77f8a9(0x313)](){const _0x37dcd5=a0_0x77f8a9;try{const _0x18288d=await this[_0x37dcd5(0x34b)](_0x37dcd5(0x354));_0x18288d&&_0x18288d[_0x37dcd5(0x23c)]&&(this[_0x37dcd5(0x34d)]=JSON[_0x37dcd5(0x1b6)](_0x18288d[_0x37dcd5(0x23c)][_0x37dcd5(0x1c8)]()));}catch(_0x3f8c0f){this['eventHistory']=[];}try{const _0x4a204b=await this[_0x37dcd5(0x34b)](_0x37dcd5(0x193));if(_0x4a204b&&_0x4a204b[_0x37dcd5(0x23c)])this[_0x37dcd5(0x1cc)]=JSON[_0x37dcd5(0x1b6)](_0x4a204b[_0x37dcd5(0x23c)][_0x37dcd5(0x1c8)]());}catch(_0x59984){this[_0x37dcd5(0x1cc)]=[];}}async['getSystemUUID'](){const _0x45a934=a0_0x77f8a9;try{const _0xdc83f3=await this[_0x45a934(0x2c1)](_0x45a934(0x230));if(_0xdc83f3&&_0xdc83f3[_0x45a934(0x1f2)]&&_0xdc83f3[_0x45a934(0x1f2)][_0x45a934(0x198)])return _0xdc83f3[_0x45a934(0x1f2)]['uuid'];return'uuid-not-found';}catch(_0x4cb77f){return _0x45a934(0x326);}}async[a0_0x77f8a9(0x2ff)](_0x81caa1){const _0x40af0c=a0_0x77f8a9;if(!_0x81caa1)return![];this[_0x40af0c(0x294)]=await this[_0x40af0c(0x2c8)]();if(_0x81caa1===_0x40af0c(0x1d4)||_0x81caa1['startsWith'](_0x40af0c(0x31b)))return!![];return![];}async[a0_0x77f8a9(0x2fc)](){const _0x19e307=a0_0x77f8a9;await this[_0x19e307(0x1b3)](_0x19e307(0x2b2),{'type':_0x19e307(0x1f1),'common':{'name':_0x19e307(0x2b2)},'native':{}}),await this['extendObjectAsync'](LTM_DP_RAW_LOG,{'type':_0x19e307(0x2bf),'common':{'name':'Raw\x20Log','type':_0x19e307(0x215),'role':'json','read':!![],'write':![]},'native':{}}),await this[_0x19e307(0x1b3)](LTM_DP_DAILY_DIGESTS,{'type':'state','common':{'name':_0x19e307(0x20f),'type':'string','role':_0x19e307(0x204),'read':!![],'write':![]},'native':{}}),await this[_0x19e307(0x1b3)](LTM_DP_STATUS,{'type':'state','common':{'name':_0x19e307(0x291),'type':_0x19e307(0x215),'role':_0x19e307(0x22e),'read':!![],'write':![]},'native':{}}),await this[_0x19e307(0x1b3)](LTM_DP_TRIGGER_DIGEST,{'type':_0x19e307(0x2bf),'common':{'name':_0x19e307(0x1ef),'type':_0x19e307(0x2b8),'role':_0x19e307(0x328),'read':!![],'write':!![],'def':![]},'native':{}}),await this[_0x19e307(0x1b3)](LTM_DP_BASELINE_STATUS,{'type':_0x19e307(0x2bf),'common':{'name':_0x19e307(0x214),'type':_0x19e307(0x215),'role':_0x19e307(0x22e),'read':!![],'write':![]},'native':{}});}async[a0_0x77f8a9(0x233)](){const _0x15cd6d=a0_0x77f8a9;await this['extendObjectAsync'](LTM_DP_DRIFT_CHANNEL,{'type':_0x15cd6d(0x1f1),'common':{'name':_0x15cd6d(0x2e8)},'native':{}}),await this[_0x15cd6d(0x1b3)](LTM_DP_DRIFT_STATUS,{'type':_0x15cd6d(0x2bf),'common':{'name':_0x15cd6d(0x301),'type':_0x15cd6d(0x215),'role':_0x15cd6d(0x2bf),'read':!![],'write':![],'def':_0x15cd6d(0x269)},'native':{}}),await this[_0x15cd6d(0x1b3)](LTM_DP_DRIFT_DETAILS,{'type':'state','common':{'name':'Drift\x20Details','type':_0x15cd6d(0x215),'role':_0x15cd6d(0x22e),'read':!![],'write':![]},'native':{}}),await this['extendObjectAsync'](LTM_DP_DRIFT_LAST_CHECK,{'type':_0x15cd6d(0x2bf),'common':{'name':_0x15cd6d(0x356),'type':_0x15cd6d(0x2fe),'role':_0x15cd6d(0x320),'read':!![],'write':![]},'native':{}});}async['checkSystemObjects'](){const _0x26b046=a0_0x77f8a9;await this[_0x26b046(0x1b3)](_0x26b046(0x355),{'type':_0x26b046(0x1f1),'common':{'name':'System\x20Status\x20&\x20Control'},'native':{}}),await this[_0x26b046(0x1b3)](SYSTEM_DP_MODE,{'type':_0x26b046(0x2bf),'common':{'name':_0x26b046(0x248),'type':_0x26b046(0x215),'role':_0x26b046(0x2bf),'read':!![],'write':!![],'def':SYSTEM_MODES[_0x26b046(0x191)],'states':{[SYSTEM_MODES[_0x26b046(0x191)]]:_0x26b046(0x1c2),[SYSTEM_MODES[_0x26b046(0x1ca)]]:_0x26b046(0x1a5),[SYSTEM_MODES[_0x26b046(0x20a)]]:_0x26b046(0x22b),[SYSTEM_MODES[_0x26b046(0x279)]]:_0x26b046(0x209)}},'native':{}});}async['sendNotification'](_0x540fb2,_0x7b55b5=![],_0x3d7d09=![]){const _0x2b0f16=a0_0x77f8a9;this[_0x2b0f16(0x1dc)][_0x2b0f16(0x200)]((_0x7b55b5?_0x2b0f16(0x2f4):'')+_0x2b0f16(0x2b0)+_0x540fb2+'\x22'+(_0x3d7d09?_0x2b0f16(0x1f0):''));const _0x7f5fd9=this[_0x2b0f16(0x330)];let _0x6be3dd=0x0;_0x7f5fd9[_0x2b0f16(0x1c0)]&&_0x7f5fd9['notifyTelegramInstance']&&(await this[_0x2b0f16(0x307)](_0x7f5fd9['notifyTelegramInstance'],_0x2b0f16(0x256),{'text':_0x540fb2,'user':_0x7f5fd9[_0x2b0f16(0x321)]}),_0x6be3dd++);if(_0x7f5fd9[_0x2b0f16(0x337)]&&_0x7f5fd9[_0x2b0f16(0x196)]){let _0xdee57e={'message':_0x540fb2,'title':_0x3d7d09?_0x2b0f16(0x345):_0x2b0f16(0x263),'priority':_0x3d7d09?0x2:0x1,'device':_0x7f5fd9['notifyPushoverRecipient']};_0x3d7d09&&(_0xdee57e[_0x2b0f16(0x262)]=0x1e,_0xdee57e[_0x2b0f16(0x27a)]=0xe10,_0xdee57e[_0x2b0f16(0x2aa)]=_0x2b0f16(0x305)),await this['sendToAsync'](_0x7f5fd9[_0x2b0f16(0x196)],_0x2b0f16(0x256),_0xdee57e),_0x6be3dd++;}return _0x7f5fd9['notifyEmailEnabled']&&_0x7f5fd9[_0x2b0f16(0x277)]&&(await this[_0x2b0f16(0x307)](_0x7f5fd9['notifyEmailInstance'],_0x2b0f16(0x256),{'text':_0x540fb2,'to':_0x7f5fd9[_0x2b0f16(0x1e7)]}),_0x6be3dd++),_0x7f5fd9['notifyWhatsappEnabled']&&_0x7f5fd9[_0x2b0f16(0x1b8)]&&(await this[_0x2b0f16(0x307)](_0x7f5fd9[_0x2b0f16(0x1b8)],'send',{'text':_0x540fb2,'phone':_0x7f5fd9[_0x2b0f16(0x1e1)]}),_0x6be3dd++),_0x7f5fd9[_0x2b0f16(0x2ba)]&&_0x7f5fd9[_0x2b0f16(0x2a3)]&&(await this[_0x2b0f16(0x307)](_0x7f5fd9[_0x2b0f16(0x2a3)],_0x2b0f16(0x256),{'text':_0x540fb2,'phone':_0x7f5fd9[_0x2b0f16(0x2ea)]}),_0x6be3dd++),_0x6be3dd;}async['scanForDevices'](_0x4380a2={}){const _0x22e30a=a0_0x77f8a9;this[_0x22e30a(0x1dc)][_0x22e30a(0x200)](_0x22e30a(0x27d)+JSON[_0x22e30a(0x2a5)](_0x4380a2));const _0xd87261=[],_0x27817b=_0x4380a2['motion']!==![],_0x4aa678=_0x4380a2[_0x22e30a(0x1a0)]!==![],_0x2eca52=_0x4380a2['lights']!==![],_0x102ebb=_0x4380a2[_0x22e30a(0x2a8)]===!![],_0x37d57a=_0x4380a2[_0x22e30a(0x1a1)]===!![],_0xe63021=_0x4380a2[_0x22e30a(0x24f)]||[],_0x514db6=await this[_0x22e30a(0x2ab)](_0x22e30a(0x2e3),_0x22e30a(0x312)),_0x12c0c5=await this[_0x22e30a(0x2ab)](_0x22e30a(0x292),_0x22e30a(0x312)),_0x51e7a2={},_0x59ed32={},_0x3e4f25={},_0x2f1db2=(_0x5ad666,_0x587f88,_0xf1909=![])=>{const _0x17fe95=_0x22e30a;if(!_0x5ad666)return;for(const _0x5c86d8 in _0x5ad666){const _0x275b02=_0x5ad666[_0x5c86d8];if(_0x275b02&&_0x275b02['common']&&_0x275b02[_0x17fe95(0x347)][_0x17fe95(0x349)]){const _0x6a5f10=(typeof _0x275b02['common'][_0x17fe95(0x28f)]==='object'?_0x275b02[_0x17fe95(0x347)]['name']['de']:_0x275b02['common'][_0x17fe95(0x28f)])||_0x275b02[_0x17fe95(0x347)][_0x17fe95(0x28f)];if(_0xf1909)_0x3e4f25[_0x5c86d8]=_0x6a5f10;for(const _0x29aaac of _0x275b02['common'][_0x17fe95(0x349)]){if(_0xf1909){if(!_0x587f88[_0x29aaac])_0x587f88[_0x29aaac]=[];_0x587f88[_0x29aaac][_0x17fe95(0x264)](_0x5c86d8);}else _0x587f88[_0x29aaac]=_0x6a5f10;}}}};_0x2f1db2(_0x514db6,_0x51e7a2),_0x2f1db2(_0x12c0c5,_0x59ed32,!![]);const _0x32cefe=await this[_0x22e30a(0x2ab)]('*',_0x22e30a(0x2bf)),_0x4b8540=[_0x22e30a(0x283),_0x22e30a(0x306),_0x22e30a(0x2ec),_0x22e30a(0x351),_0x22e30a(0x31f),'material.',_0x22e30a(0x332),_0x22e30a(0x1d6)];if(!_0x37d57a)_0x4b8540['push'](_0x22e30a(0x329),_0x22e30a(0x24d),_0x22e30a(0x23f),_0x22e30a(0x2b9),_0x22e30a(0x192));const _0x1143cd=[_0x22e30a(0x1d8),'LOWBAT',_0x22e30a(0x2ae),_0x22e30a(0x1bc),_0x22e30a(0x271),_0x22e30a(0x25d),_0x22e30a(0x24b),'CONFIG_PENDING','DUTYCYCLE',_0x22e30a(0x206),_0x22e30a(0x1af),_0x22e30a(0x2dd),_0x22e30a(0x2fb),_0x22e30a(0x322),'INSTALL_TEST',_0x22e30a(0x234),'WEEK_PROGRAM','ON_TIME','SECTION',_0x22e30a(0x25c),_0x22e30a(0x1b4),_0x22e30a(0x1fb),'CONNECTION',_0x22e30a(0x216),_0x22e30a(0x2de),_0x22e30a(0x1eb),_0x22e30a(0x19a),_0x22e30a(0x2fd),_0x22e30a(0x2a2),_0x22e30a(0x242),'info',_0x22e30a(0x21e),'last_seen',_0x22e30a(0x2f2),_0x22e30a(0x1b0),'alert',_0x22e30a(0x22d),_0x22e30a(0x1d0),_0x22e30a(0x30e),'xy','ct',_0x22e30a(0x1c7),_0x22e30a(0x23a),_0x22e30a(0x205),_0x22e30a(0x272),_0x22e30a(0x30d),'uniqueid',_0x22e30a(0x28b),_0x22e30a(0x2e0),_0x22e30a(0x274),'capabilities',_0x22e30a(0x323),'scriptEnabled',_0x22e30a(0x26c),_0x22e30a(0x1a3),_0x22e30a(0x2a6),_0x22e30a(0x2f1),_0x22e30a(0x32a),'history','forecast',_0x22e30a(0x200),_0x22e30a(0x204)],_0x1bd03c=(_0x10be46,_0xfd4c56,_0x2291d7=![])=>{const _0x18fbae=_0x22e30a,_0x297ffe=_0x10be46[_0x18fbae(0x2e6)]('.');if(_0xfd4c56[_0x10be46])return _0xfd4c56[_0x10be46];if(_0x297ffe[_0x18fbae(0x2c5)]>0x2&&_0xfd4c56[_0x297ffe[_0x18fbae(0x1a7)](0x0,-0x1)[_0x18fbae(0x297)]('.')])return _0xfd4c56[_0x297ffe['slice'](0x0,-0x1)[_0x18fbae(0x297)]('.')];if(_0x297ffe['length']>0x3&&_0xfd4c56[_0x297ffe[_0x18fbae(0x1a7)](0x0,-0x2)['join']('.')])return _0xfd4c56[_0x297ffe[_0x18fbae(0x1a7)](0x0,-0x2)['join']('.')];return _0x2291d7?[]:null;};for(const _0x433664 in _0x32cefe){const _0x3fa5a8=_0x32cefe[_0x433664];if(!_0x3fa5a8||!_0x3fa5a8['common'])continue;if(_0x4b8540[_0x22e30a(0x30f)](_0x3c78ea=>_0x433664[_0x22e30a(0x20b)](_0x3c78ea)))continue;const _0x40cb82=_0x3fa5a8[_0x22e30a(0x347)][_0x22e30a(0x2bc)]||'',_0x5a1c9f=(_0x3fa5a8[_0x22e30a(0x347)][_0x22e30a(0x28f)]&&typeof _0x3fa5a8['common'][_0x22e30a(0x28f)]===_0x22e30a(0x1ad)?_0x3fa5a8['common']['name']['de']:_0x3fa5a8['common']['name'])||'',_0x5a480d=_0x5a1c9f?_0x5a1c9f[_0x22e30a(0x2a1)]():'',_0x49edad=_0x433664['toLowerCase'](),_0x17efb1=_0x1bd03c(_0x433664,_0x51e7a2),_0x25fc25=_0x1bd03c(_0x433664,_0x59ed32,!![]);let _0x23c887=null,_0x1b7ebf=![];if(_0x25fc25&&_0x25fc25[_0x22e30a(0x2c5)]>0x0){const _0x1a327b=_0x25fc25['find'](_0x10e2ca=>_0xe63021[_0x22e30a(0x30b)](_0x10e2ca));if(_0x1a327b){_0x1b7ebf=!![];const _0x1058cf=_0x3e4f25[_0x1a327b];if(_0x49edad[_0x22e30a(0x30b)](_0x22e30a(0x257))||_0x49edad['includes'](_0x22e30a(0x29c)))_0x23c887=_0x22e30a(0x244);else{if(_0x49edad[_0x22e30a(0x30b)](_0x22e30a(0x2e9))||_0x49edad[_0x22e30a(0x30b)](_0x22e30a(0x34a))||_0x5a480d[_0x22e30a(0x30b)](_0x22e30a(0x217)))_0x23c887=_0x22e30a(0x20c);else{if(_0x49edad[_0x22e30a(0x30b)](_0x22e30a(0x2bf))||_0x49edad[_0x22e30a(0x30b)]('level')||_0x49edad['includes']('on'))_0x23c887='Schalter/Licht';else _0x23c887=_0x1058cf;}}}}if(!_0x1b7ebf&&!_0x37d57a){if(_0x1143cd[_0x22e30a(0x30f)](_0x2e48c0=>_0x5a480d[_0x22e30a(0x30b)](_0x2e48c0)||_0x433664[_0x22e30a(0x2d7)]()[_0x22e30a(0x30b)](_0x2e48c0)))continue;}if(!_0x23c887&&_0x27817b){if(_0x40cb82[_0x22e30a(0x30b)]('sensor.motion')||_0x40cb82[_0x22e30a(0x30b)](_0x22e30a(0x1f6))||_0x5a480d[_0x22e30a(0x30b)]('bewegung')||_0x5a480d['includes'](_0x22e30a(0x1b2)))_0x23c887='Bewegung';}!_0x23c887&&_0x4aa678&&((_0x49edad[_0x22e30a(0x30b)](_0x22e30a(0x232))||_0x40cb82[_0x22e30a(0x30b)](_0x22e30a(0x2e1))||_0x40cb82[_0x22e30a(0x30b)]('sensor.window')||(_0x5a480d[_0x22e30a(0x30b)](_0x22e30a(0x1bf))||_0x5a480d[_0x22e30a(0x30b)](_0x22e30a(0x295)))&&!_0x5a480d['includes'](_0x22e30a(0x203))&&!_0x5a480d[_0x22e30a(0x30b)](_0x22e30a(0x2ef))&&(_0x3fa5a8['common'][_0x22e30a(0x298)]===_0x22e30a(0x2b8)||_0x3fa5a8[_0x22e30a(0x347)][_0x22e30a(0x298)]===_0x22e30a(0x2fe)))&&(_0x23c887=_0x22e30a(0x303)));if(!_0x23c887&&_0x2eca52){if((_0x40cb82[_0x22e30a(0x30b)]('switch.light')||_0x40cb82[_0x22e30a(0x30b)](_0x22e30a(0x25f))||_0x5a480d[_0x22e30a(0x30b)](_0x22e30a(0x1e8))||_0x5a480d[_0x22e30a(0x30b)](_0x22e30a(0x2f0)))&&_0x3fa5a8[_0x22e30a(0x347)]['write'])_0x23c887=_0x22e30a(0x2ed);}if(!_0x23c887&&_0x102ebb){if(_0x40cb82[_0x22e30a(0x30b)]('value.temperature')||_0x40cb82[_0x22e30a(0x30b)](_0x22e30a(0x210))||_0x5a480d['includes'](_0x22e30a(0x190)))_0x23c887=_0x22e30a(0x21c);}if(_0x23c887){let _0x47b99e=_0x17efb1||'';if(!_0x47b99e){if(_0x5a480d[_0x22e30a(0x30b)](_0x22e30a(0x235)))_0x47b99e=_0x22e30a(0x265);else{if(_0x5a480d['includes'](_0x22e30a(0x324)))_0x47b99e='K√ºche';else{if(_0x5a480d['includes'](_0x22e30a(0x225)))_0x47b99e=_0x22e30a(0x2e7);else{if(_0x5a480d[_0x22e30a(0x30b)]('schlaf'))_0x47b99e=_0x22e30a(0x1d2);else{if(_0x5a480d['includes']('flur')||_0x5a480d[_0x22e30a(0x30b)](_0x22e30a(0x247)))_0x47b99e=_0x22e30a(0x199);else{if(_0x5a480d[_0x22e30a(0x30b)]('garten'))_0x47b99e=_0x22e30a(0x24c);}}}}}}let _0x4b41b7=![];_0x23c887==='Fenster/T√ºr'&&((_0x5a480d[_0x22e30a(0x30b)](_0x22e30a(0x2a7))||_0x5a480d[_0x22e30a(0x30b)](_0x22e30a(0x2c7))||_0x5a480d['includes'](_0x22e30a(0x2c2))||_0x47b99e&&_0x47b99e[_0x22e30a(0x2a1)]()[_0x22e30a(0x30b)](_0x22e30a(0x296))&&_0x5a480d[_0x22e30a(0x30b)](_0x22e30a(0x295)))&&(_0x4b41b7=!![]));let _0xfe95bb=0x0;if(_0x1b7ebf)_0xfe95bb+=0x1e;else{if(_0x17efb1)_0xfe95bb+=0x14;else{if(_0x47b99e)_0xfe95bb+=0xa;}}if(_0x4b41b7)_0xfe95bb+=0x5;_0xd87261[_0x22e30a(0x264)]({'id':_0x433664,'name':_0x5a1c9f||_0x433664,'type':_0x23c887,'location':_0x47b99e,'logDuplicates':_0x23c887===_0x22e30a(0x244),'isExit':_0x4b41b7,'_score':_0xfe95bb});}}return _0xd87261[_0x22e30a(0x29b)]((_0x3bc8e8,_0x5cd30a)=>_0x5cd30a['_score']-_0x3bc8e8[_0x22e30a(0x304)]),_0xd87261;}}function a0_0x39ef(_0x4cb66f,_0x2eb109){const _0xe89c9=a0_0x8726();return a0_0x39ef=function(_0x213bb3,_0x10b9f1){_0x213bb3=_0x213bb3-0x18f;let _0x8726dd=_0xe89c9[_0x213bb3];return _0x8726dd;},a0_0x39ef(_0x4cb66f,_0x2eb109);}if(require[a0_0x77f8a9(0x2e4)]!==module)module['exports']=_0x20de98=>new CogniLiving(_0x20de98);else new CogniLiving();