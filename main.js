const a0_0x2aacef=a0_0x5931;function a0_0x5931(_0x462ce3,_0x17b097){const _0x47b713=a0_0x3ad5();return a0_0x5931=function(_0x1ea4d7,_0x5347c8){_0x1ea4d7=_0x1ea4d7-0x17e;let _0x3ad5c1=_0x47b713[_0x1ea4d7];return _0x3ad5c1;},a0_0x5931(_0x462ce3,_0x17b097);}(function(_0x1c3ee2,_0x5520fe){const _0x17b489=a0_0x5931,_0x4a1d61=_0x1c3ee2();while(!![]){try{const _0x254c3d=parseInt(_0x17b489(0x2e8))/0x1*(-parseInt(_0x17b489(0x2de))/0x2)+-parseInt(_0x17b489(0x1ac))/0x3+-parseInt(_0x17b489(0x28e))/0x4+parseInt(_0x17b489(0x273))/0x5*(parseInt(_0x17b489(0x2ac))/0x6)+parseInt(_0x17b489(0x24c))/0x7*(-parseInt(_0x17b489(0x277))/0x8)+parseInt(_0x17b489(0x1fd))/0x9*(-parseInt(_0x17b489(0x2d6))/0xa)+parseInt(_0x17b489(0x213))/0xb;if(_0x254c3d===_0x5520fe)break;else _0x4a1d61['push'](_0x4a1d61['shift']());}catch(_0x374e8c){_0x4a1d61['push'](_0x4a1d61['shift']());}}}(a0_0x3ad5,0x4c3dd));function a0_0x3ad5(){const _0x41cdda=['modeResetJob','Kein\x20API\x20Key\x20konfiguriert!','presenceDevices','setupDriftAnalysisScheduler','power','initPresenceSubscriptions','bind','simple-api.','push','sendToAsync','[Test]\x20Interaktiver\x20Alarm','working','_calName','isPresent','calendarSelection','analysisHistory','WETTER:\x20','initSensorSubscriptions','Deaktiviert\x20(Pro-Feature)','lowbat','switch','normal','21RNxkqT','patternDetected','LTM','\x20for\x20interactive\x20buttons...','setupModeResetScheduler','WiFi\x20Presence\x20detected\x20->\x20Aborting\x20Exit\x20Timer.\x20User\x20is\x20present.','replace','useWeather','KALENDER\x20ERROR:\x20','analysis.isAlert','checkSystemObjects','stringify','party','Feedback\x20saved:\x20','notifyEmailEnabled','\x20Phase\x203:\x20DRIFT\x20ACTIVE.\x20Compare\x20recent\x20events\x20against\x20long-term\x20patterns.','LTM.driftAnalysis.lastCheck','accuweather.0','toString','updateBaselineStatus','energy','runGeminiAnalysis','genAI','error','toLocaleString','Subscribing\x20to\x20','info','val','baselineDrift','ical.0','KALENDER:\x20Keine\x20Kalender\x20ausgewÃ¤hlt\x20(Bitte\x20in\x20Settings\x20konfigurieren)','lastCheck','weatherunderground.0','\x20*\x20*\x20*','humidity','alertReason','logDuplicates','echarts.','getForeignStateAsync','5jzwMRA','Processing\x20Status','startExitTimer','.NextHours.Location_1.Day_1.current.symbol_desc','916392ClbDEo','sendNotification','exitGraceTimer','extendObjectAsync','triggerDailyDigest','toISOString','cover','communicate.request','daswetter.0','checkLicense','weatherInstance','pop','.\x0a\x20\x20\x20\x20\x20\x20\x20\x20','isAlert','systemConfig','motion','âœ…\x20Alles\x20OK\x20(Reset)','LTM.rawEventLog','system.mode','location','catch','isArray','notifyPushoverInstance','2238688dxpALI','long','node-schedule','system.config','javascript.','text','scheduleJob','@google/generative-ai','notifyTelegramEnabled','Lernphase\x20(','Scheduling\x20Morning\x20Briefing\x20for\x20','Drift\x20Status','getWeatherContext','Drift\x20Sched\x20Error:\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20CRITICAL\x20SAFETY\x20CHECK:\x0a\x20\x20\x20\x20\x20\x20\x20\x201.\x20Sofort/Ad-Hoc:\x20Ist\x20es\x20jetzt\x20(','latitude','history.','0\x203\x20*\x20*\x20*','setupTelegramListener','main','inactivityThresholdHours','ltmJob','level','COGNI_CONFIRM_OK','saveRawEventLog','cancel','PRIORITÃ„T:\x20Gesundheit\x20und\x20Sicherheit\x20fÃ¼r\x20Senioren\x20(AAL).\x20Erkenne\x20InaktivitÃ¤t,\x20potenzielle\x20StÃ¼rze\x20(indirekt),\x20Schlafunterbrechungen\x20und\x20nÃ¤chtliche\x20Unruhe.','fault','info.','N/A','3570558SxwUVJ','Gemini\x20Init\x20Error:\x20','ðŸš¨\x20EMERGENCY','abortExitTimer','Gemini\x20AI\x20initialized.','system','values','inactivityMonitoringEnabled','analysis.automation.patternDetected','Adapter','createAllObjects','valve','channel','checkLtmObjects','HARD\x20WATCHDOG:\x20No\x20sensor\x20activity\x20detected\x20for\x20','currentposition','loadSystemMode','analysis.lastResult','openweathermap','getOverviewData','LTM.driftAnalysis','setStateAsync','\x20presence\x20devices...','LTM.driftAnalysis.driftDetails','lastAlertState','LTM.triggerDailyDigest','ack','systemUUID','PARTY','minDaysForBaseline','send','initSystemConfig','longitude','\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20SCHEMA:\x20{\x20\x22activity\x22:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22deviationFromBaseline\x22:\x20\x22string\x22,\x20\x22isAlert\x22:\x20bool,\x20\x22isEmergency\x22:\x20bool,\x20\x22alertReason\x22:\x20\x22string\x22\x20},\x20\x22comfort\x22:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22suggestion\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22patternDetected\x22:\x20bool,\x20\x22description\x22:\x20\x22string\x22,\x20\x22suggestedAction\x22:\x20\x22string\x22\x20}\x20},\x20\x22health\x22:\x20{\x20\x22sleepScore\x22:\x20number\x20(0-100),\x20\x22restlessness\x22:\x20\x22none|low|medium|high\x22,\x20\x22notes\x22:\x20\x22string\x22\x20}\x20}','\x0a\x20\x20\x20\x20\x20\x20\x20\x20EVENTS:\x20','System\x20Mode','online','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','updateAnalysisHistory','Error\x20reading\x20calendar\x20table:\x20','System\x20Status\x20&\x20Control','livingContext','10ulQWND','includes','detected','splice','icons-mfd.','calendarInstance','ltmStbWindowDays','expire','98jEkcYi','dailyDigests','scanForDevices','subscribeStates','ROLLE:\x20Smart\x20Home\x20Analyst.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20AKTUELLE\x20ZEIT:\x20','events.lastEvent','driftAnalysisTimer','currentSystemMode','config','cogni-living\x20adapter\x20starting\x20(v','8123fEkmOT','.communicate.request','update','scriptEnabled','substring','ðŸ“ž\x20RÃœCKRUF\x20BITTE!\x20Der\x20Bewohner\x20hat\x20den\x20RÃ¼ckruf-Button\x20gedrÃ¼ckt.','comfort','\x20sensors...','âœ…\x20Alarm\x20quittiert.\x20System\x20normal.','LTM.dailyDigests','notifyPushoverRecipient','presence','ðŸ“¡\x20Hooking\x20into\x20','json','occupancy','Vom\x20Benutzer\x20bestÃ¤tigt\x20(OK).','events.history','[TEST]\x20','briefingJob','object','shutter','name','Error\x20checking\x20WiFi:\x20','.forecast.current.state','Starting\x20Autopilot\x20(','isExit','setupLtmScheduler','devices','daswetter','onUnload','set_temperature','notifyTelegramRecipient','onReady','details','getStateAsync','Party','command','Briefing\x20Sched\x20Error:\x20','state','Cogni-Living','response','analysis.activitySummary','analysis.alertReason','analysis.trigger','timestamp','setupBriefingScheduler',')\x20verdÃ¤chtig\x20still?\x20Erwartest\x20du\x20basierend\x20auf\x20der\x20Tageszeit\x20AktivitÃ¤t\x20(z.B.\x20Morgens\x20Aufstehen)?\x20Wenn\x20ja\x20->\x20ALARM.\x0a\x20\x20\x20\x20\x20\x20\x20\x202.\x20Akut\x20(vs.\x20STB):\x20Weicht\x20das\x20heutige\x20Verhalten\x20stark\x20von\x20den\x20letzten\x2014\x20Tagen\x20ab?\x20(z.B.\x205x\x20Toilette\x20statt\x203x).\x20Wenn\x20ja\x20->\x20WARNUNG.\x0a\x20\x20\x20\x20\x20\x20\x20\x203.\x20Schleichend\x20(Drift):\x20(Nur\x20relevant\x20wenn\x20Phase\x203\x20aktiv)\x20Gibt\x20es\x20einen\x20langsamen\x20Trend\x20ins\x20Negative?\x0a\x20\x20\x20\x20\x20\x20\x20\x20Ignoriere\x20Fehlalarme\x20durch\x20Kontext:\x20','unshift','\x20Tage)','Analysis\x20Error:\x20','ðŸš¨ðŸš¨\x20NOTFALL','split','guest','string','Urlaub','callback','NORMAL','KALENDER:\x20Keine\x20relevanten\x20Termine','@iobroker/adapter-core','tryParse','getCalendarContext','system.','Wetter:\x20Deaktiviert','1850646NvsJxm','testApiKey','log',')\x20-\x20PHASE\x202b:\x20INTERACTIVE','VACATION','.data.table','from','city','models/gemini-flash-latest','exitTimer','loadRawEventLog','summary','uuid-not-found','analysis.analysisHistory','\x20|\x20','getSystemUUID','KI-Modell\x20nicht\x20initialisiert\x20(Neustart\x20erforderlich?)','cogni-living','material.','Phase\x202:\x20ACUTE\x20MONITORING.\x20STB\x20(Last\x2014d):\x20','\x0aSTB:\x20','siren','boolean','time','Daily\x20Digests','off','getForeignObjectAsync','telegram','notifyPushoverEnabled','blind','Normal','type','handleTelegramResponse','native','direction','unreach','map','(((.+)+)+)+$','driftDetails','dutycycle','value','Reset\x20Sched\x20Error:\x20','LTM.driftAnalysis.baselineDrift','runAutopilot','slice','description','uuid','KALENDER:\x20','setPresence','notifyEmailRecipient','subscribeForeignStatesAsync','checkLtmDriftObjects','generateContent','geminiModel','uuid-error','analysis.automation.description','Drift\x20Details','createDailyDigest','system.meta.uuid','filter','feedbackHistory','warn','sound','checkWifiPresence','firmware','maintenance','getCalendarNames\x20Error:\x20','PRO-','number','.\x20PERSONA:\x20','runBaselineDriftAnalysis','setHours','automationProposal','sendMorningBriefing','briefingTime','GUEST','aiPersona','length','now','saveFeedback','Keine\x20neuen\x20Automatisierungs-Muster\x20erkannt.','4865472rRYLUz','sendTo','getLtmData','0\x204\x20*\x20*\x20*','version','isProVersion','Last\x20Check','date','status','activity','2-digit','common','getGenerativeModel','retry','Raw\x20Log','No\x20recorded\x20events\x20yet.','message','analysisTimer','sensorLastValues','testNotification','Pro\x20Feature','isGracePeriodActive','23936308WDolxX','notifyTelegramInstance','Nein','accuweather','COGNI_REQUEST_CALL','licenseKey','startsWith','openweathermap.0','application/json','search','.\x20MODUS:\x20','scanDevices','eventHistory','âœ…\x20User\x20confirmed\x20ALARM\x20via\x20Telegram.\x20Resetting\x20system.','trim','isEmergency','toFixed','button','setState','parse','notifyEmailInstance','find','TEST-PRO-KEY','ltmDriftCheckIntervalHours','briefingEnabled','LTM.baselineStatus','endsWith','Fokus\x20auf\x20Familienroutinen,\x20Kindersicherheit\x20und\x20allgemeines\x20Haushaltsmanagement.','sort','processSensorEvent','geminiApiKey','unknown','generic','LTM.processingStatus','rawEventLog'];a0_0x3ad5=function(){return _0x41cdda;};return a0_0x3ad5();}const a0_0x5347c8=(function(){let _0x3af91a=!![];return function(_0x533a4b,_0x3fdbc6){const _0x110213=_0x3af91a?function(){if(_0x3fdbc6){const _0x42360c=_0x3fdbc6['apply'](_0x533a4b,arguments);return _0x3fdbc6=null,_0x42360c;}}:function(){};return _0x3af91a=![],_0x110213;};}()),a0_0x1ea4d7=a0_0x5347c8(this,function(){const _0x3b57a5=a0_0x5931;return a0_0x1ea4d7[_0x3b57a5(0x25e)]()[_0x3b57a5(0x21c)](_0x3b57a5(0x1d1))[_0x3b57a5(0x25e)]()['constructor'](a0_0x1ea4d7)[_0x3b57a5(0x21c)](_0x3b57a5(0x1d1));});a0_0x1ea4d7();'use strict';const utils=require(a0_0x2aacef(0x1a7)),{GoogleGenerativeAI}=require(a0_0x2aacef(0x295)),schedule=require(a0_0x2aacef(0x290)),HISTORY_MAX_SIZE=0x32,RAW_LOG_MAX_SIZE=0x5dc,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL=a0_0x2aacef(0x1b4),LTM_SCHEDULE=a0_0x2aacef(0x29f),MODE_RESET_SCHEDULE=a0_0x2aacef(0x200),ANALYSIS_HISTORY_MAX_SIZE=0x64,LTM_DP_RAW_LOG=a0_0x2aacef(0x288),LTM_DP_DAILY_DIGESTS=a0_0x2aacef(0x2f1),LTM_DP_STATUS=a0_0x2aacef(0x234),LTM_DP_TRIGGER_DIGEST=a0_0x2aacef(0x2c5),LTM_DP_BASELINE_STATUS=a0_0x2aacef(0x22c),LTM_DP_DRIFT_CHANNEL=a0_0x2aacef(0x2c0),LTM_DP_DRIFT_STATUS=a0_0x2aacef(0x1d6),LTM_DP_DRIFT_DETAILS=a0_0x2aacef(0x2c3),LTM_DP_DRIFT_LAST_CHECK=a0_0x2aacef(0x25c),SYSTEM_DP_MODE=a0_0x2aacef(0x289),HARD_IGNORE_TERMS=['scriptProblem',a0_0x2aacef(0x2eb),a0_0x2aacef(0x2ea),a0_0x2aacef(0x1cf),a0_0x2aacef(0x249),'rssi','connection',a0_0x2aacef(0x1ed),'error',a0_0x2aacef(0x2a9),a0_0x2aacef(0x241),a0_0x2aacef(0x1ce),'stick_unreach','config_pending',a0_0x2aacef(0x1d3),a0_0x2aacef(0x1ec),'reachable','link_quality'],GENERIC_NAMES=['targetposition',a0_0x2aacef(0x2bb),a0_0x2aacef(0x193),a0_0x2aacef(0x2a4),a0_0x2aacef(0x1d4),'brightness','on',a0_0x2aacef(0x1c5),a0_0x2aacef(0x24a),'position',a0_0x2aacef(0x181),a0_0x2aacef(0x1c9),a0_0x2aacef(0x27d),'status',a0_0x2aacef(0x286),a0_0x2aacef(0x2f3),a0_0x2aacef(0x2f6),'temperature',a0_0x2aacef(0x26e),a0_0x2aacef(0x23a),a0_0x2aacef(0x260),'setpoint',a0_0x2aacef(0x2b7),'actual_temperature',a0_0x2aacef(0x18b)],ADAPTER_BLACKLIST=[a0_0x2aacef(0x1aa),'admin.',a0_0x2aacef(0x2aa),'vis.',a0_0x2aacef(0x29e),a0_0x2aacef(0x1be),a0_0x2aacef(0x2da),'flot.',a0_0x2aacef(0x271),a0_0x2aacef(0x292),a0_0x2aacef(0x23d)],SYSTEM_MODES={'NORMAL':a0_0x2aacef(0x24b),'VACATION':'vacation','PARTY':a0_0x2aacef(0x258),'GUEST':a0_0x2aacef(0x1a1)},AUTO_RESET_MODES=[SYSTEM_MODES[a0_0x2aacef(0x2c8)],SYSTEM_MODES[a0_0x2aacef(0x1f7)]],PERSONA_MAPPING={'generic':'Analysiere\x20ausgewogen\x20auf\x20Gesundheit,\x20Sicherheit\x20und\x20Komfort.','senior_aal':a0_0x2aacef(0x2a8),'family':a0_0x2aacef(0x22e),'single_comfort':'Fokus\x20auf\x20Maximierung\x20von\x20Komfort,\x20Automatisierungseffizienz\x20und\x20Energieeinsparung.','security':'PRIORITÃ„T:\x20Sicherheit.\x20Erkenne\x20Eindringlinge,\x20ungewÃ¶hnliche\x20Anwesenheit.'};class CogniLiving extends utils[a0_0x2aacef(0x2b5)]{constructor(_0x191bea){const _0x59bec4=a0_0x2aacef;super({..._0x191bea,'name':_0x59bec4(0x1bd)}),this['eventHistory']=[],this['analysisHistory']=[],this[_0x59bec4(0x1e8)]=[],this[_0x59bec4(0x235)]=[],this[_0x59bec4(0x2df)]=[],this[_0x59bec4(0x20f)]={},this[_0x59bec4(0x285)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x59bec4(0x243)]=!![],this[_0x59bec4(0x1b5)]=null,this['exitGraceTimer']=null,this[_0x59bec4(0x212)]=![],this['genAI']=null,this[_0x59bec4(0x1e1)]=null,this[_0x59bec4(0x2e5)]=SYSTEM_MODES[_0x59bec4(0x1a5)],this[_0x59bec4(0x202)]=![],this[_0x59bec4(0x2c4)]=![],this[_0x59bec4(0x2c7)]=_0x59bec4(0x232),this[_0x59bec4(0x20e)]=null,this[_0x59bec4(0x2a3)]=null,this['modeResetJob']=null,this[_0x59bec4(0x2e4)]=null,this[_0x59bec4(0x17f)]=null,this['on']('ready',this[_0x59bec4(0x18d)]['bind'](this)),this['on']('stateChange',this['onStateChange'][_0x59bec4(0x23c)](this)),this['on']('unload',this['onUnload'][_0x59bec4(0x23c)](this)),this['on'](_0x59bec4(0x20d),this['onMessage'][_0x59bec4(0x23c)](this));}async[a0_0x2aacef(0x18d)](){const _0x407e9c=a0_0x2aacef;this[_0x407e9c(0x1ae)][_0x407e9c(0x266)](_0x407e9c(0x2e7)+this[_0x407e9c(0x201)]+_0x407e9c(0x1af)),await this['initZombies'](),this[_0x407e9c(0x2e6)][_0x407e9c(0x218)]=this[_0x407e9c(0x2e6)]['licenseKey']||'';try{this[_0x407e9c(0x202)]=await this[_0x407e9c(0x280)](this[_0x407e9c(0x2e6)]['licenseKey']);}catch(_0x236ece){}if(!this[_0x407e9c(0x2e6)][_0x407e9c(0x2a2)]||this[_0x407e9c(0x2e6)]['inactivityThresholdHours']<0.1)this[_0x407e9c(0x2e6)][_0x407e9c(0x2a2)]=0xc;await this['initHistory'](),await this[_0x407e9c(0x2cb)]();if(this[_0x407e9c(0x2e6)][_0x407e9c(0x231)])try{this[_0x407e9c(0x262)]=new GoogleGenerativeAI(this[_0x407e9c(0x2e6)][_0x407e9c(0x231)]),this[_0x407e9c(0x1e1)]=this[_0x407e9c(0x262)][_0x407e9c(0x209)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x407e9c(0x21b)}}),this[_0x407e9c(0x1ae)][_0x407e9c(0x266)](_0x407e9c(0x2b0));}catch(_0x2c636f){this[_0x407e9c(0x1ae)][_0x407e9c(0x263)](_0x407e9c(0x2ad)+_0x2c636f[_0x407e9c(0x20d)]);}await this[_0x407e9c(0x2b6)](),await this[_0x407e9c(0x2bc)](),await this['loadRawEventLog'](),await this['loadDailyDigests'](),this[_0x407e9c(0x2e1)](_0x407e9c(0x198)),this['subscribeStates'](LTM_DP_TRIGGER_DIGEST),this[_0x407e9c(0x2e1)](_0x407e9c(0x289)),this[_0x407e9c(0x2e1)]('analysis.triggerBriefing'),this[_0x407e9c(0x2e1)]('analysis.isAlert'),await this[_0x407e9c(0x247)](),await this[_0x407e9c(0x23b)](),await this[_0x407e9c(0x2a0)]();if(this[_0x407e9c(0x20e)])clearInterval(this[_0x407e9c(0x20e)]);const _0x445b35=this[_0x407e9c(0x2e6)]['analysisInterval']||0xf;_0x445b35>0x0&&(this['log'][_0x407e9c(0x266)](_0x407e9c(0x185)+_0x445b35+'\x20min).'),this['analysisTimer']=setInterval(()=>{const _0x1ac494=_0x407e9c;this[_0x1ac494(0x1d7)]();},_0x445b35*0x3c*0x3e8)),this[_0x407e9c(0x187)](),this['setupModeResetScheduler'](),this[_0x407e9c(0x239)](),this[_0x407e9c(0x19a)]();}[a0_0x2aacef(0x18a)](_0x365668){const _0x16be64=a0_0x2aacef;if(this[_0x16be64(0x20e)])clearInterval(this['analysisTimer']);if(this[_0x16be64(0x2e4)])clearInterval(this[_0x16be64(0x2e4)]);if(this[_0x16be64(0x2a3)])this[_0x16be64(0x2a3)][_0x16be64(0x2a7)]();if(this[_0x16be64(0x236)])this[_0x16be64(0x236)][_0x16be64(0x2a7)]();if(this['briefingJob'])this['briefingJob'][_0x16be64(0x2a7)]();if(this[_0x16be64(0x1b5)])clearTimeout(this['exitTimer']);if(this[_0x16be64(0x279)])clearTimeout(this[_0x16be64(0x279)]);_0x365668();}async['onStateChange'](_0xdf8490,_0x56de16){const _0x53b0b=a0_0x2aacef;if(!_0x56de16)return;if(_0xdf8490[_0x53b0b(0x2d7)](_0x53b0b(0x1c7))&&_0xdf8490[_0x53b0b(0x22d)](_0x53b0b(0x27e))&&_0x56de16[_0x53b0b(0x267)]){await this['handleTelegramResponse'](_0x56de16[_0x53b0b(0x267)]);return;}if(_0xdf8490===this['namespace']+'.'+SYSTEM_DP_MODE){_0x56de16[_0x53b0b(0x267)]&&Object[_0x53b0b(0x2b2)](SYSTEM_MODES)[_0x53b0b(0x2d7)](_0x56de16[_0x53b0b(0x267)])&&(this[_0x53b0b(0x2e5)]=_0x56de16['val'],_0x56de16[_0x53b0b(0x267)]===SYSTEM_MODES[_0x53b0b(0x1b0)]?await this[_0x53b0b(0x1dc)](![]):await this[_0x53b0b(0x1dc)](!![]));if(!_0x56de16[_0x53b0b(0x2c6)])this[_0x53b0b(0x225)](_0xdf8490,{'val':this[_0x53b0b(0x2e5)],'ack':!![]});return;}if(!_0x56de16[_0x53b0b(0x2c6)]){_0xdf8490[_0x53b0b(0x2d7)]('analysis.trigger')&&_0x56de16[_0x53b0b(0x267)]&&(this[_0x53b0b(0x225)](_0xdf8490,{'val':![],'ack':!![]}),this[_0x53b0b(0x261)]());if(_0xdf8490['includes'](_0x53b0b(0x27b))&&_0x56de16['val']){this[_0x53b0b(0x225)](_0xdf8490,{'val':![],'ack':!![]});if(this[_0x53b0b(0x202)])this[_0x53b0b(0x1e5)]();}_0xdf8490[_0x53b0b(0x2d7)]('triggerBriefing')&&_0x56de16[_0x53b0b(0x267)]&&(this[_0x53b0b(0x225)](_0xdf8490,{'val':![],'ack':!![]}),this[_0x53b0b(0x1f5)]());return;}if(this[_0x53b0b(0x2e6)][_0x53b0b(0x238)]&&this[_0x53b0b(0x2e6)][_0x53b0b(0x238)][_0x53b0b(0x2d7)](_0xdf8490)){await this[_0x53b0b(0x1eb)]();return;}const _0x2bc5d8=(this[_0x53b0b(0x2e6)][_0x53b0b(0x188)]||[])[_0x53b0b(0x228)](_0x81215e=>_0x81215e['id']===_0xdf8490);if(_0x2bc5d8)this[_0x53b0b(0x230)](_0xdf8490,_0x56de16,_0x2bc5d8);}async[a0_0x2aacef(0x2a0)](){const _0x4b95ff=a0_0x2aacef,_0x523bd6=this['config']['notifyTelegramInstance'];this['config'][_0x4b95ff(0x296)]&&_0x523bd6&&(this[_0x4b95ff(0x1ae)]['info'](_0x4b95ff(0x2f4)+_0x523bd6+_0x4b95ff(0x24f)),await this[_0x4b95ff(0x1de)](_0x523bd6+_0x4b95ff(0x2e9)));}async[a0_0x2aacef(0x1cc)](_0x151e49){const _0x14a11f=a0_0x2aacef;let _0x44b8b3=_0x151e49;_0x151e49[_0x14a11f(0x219)]('[')&&(_0x44b8b3=_0x151e49[_0x14a11f(0x2ec)](_0x151e49['indexOf'](']')+0x1));if(_0x44b8b3==='COGNI_CONFIRM_OK')this[_0x14a11f(0x1ae)]['info'](_0x14a11f(0x220)),await this[_0x14a11f(0x2c1)]('analysis.isAlert',{'val':![],'ack':!![]}),await this['setStateAsync'](_0x14a11f(0x197),{'val':_0x14a11f(0x2f7),'ack':!![]}),this[_0x14a11f(0x2c4)]=![],this[_0x14a11f(0x278)](_0x14a11f(0x2f0),![]);else _0x44b8b3===_0x14a11f(0x217)&&(this[_0x14a11f(0x1ae)]['warn']('ðŸ“ž\x20User\x20requested\x20CALL\x20via\x20Telegram!'),this[_0x14a11f(0x278)](_0x14a11f(0x2ed),![],!![]));}async['onMessage'](_0x4d10cf){const _0x3535c4=a0_0x2aacef;if(typeof _0x4d10cf===_0x3535c4(0x180)&&_0x4d10cf['message'])try{if(_0x4d10cf['command']===_0x3535c4(0x1ad)){}else{if(_0x4d10cf['command']===_0x3535c4(0x210)){const _0x6cd28c=await this[_0x3535c4(0x278)](_0x3535c4(0x240),!![],!![]);this[_0x3535c4(0x1fe)](_0x4d10cf[_0x3535c4(0x1b2)],_0x4d10cf[_0x3535c4(0x191)],{'success':_0x6cd28c>0x0,'message':_0x6cd28c+'\x20sent'},_0x4d10cf[_0x3535c4(0x1a4)]);}else{if(_0x4d10cf[_0x3535c4(0x191)]===_0x3535c4(0x1ff)){if(!this['isProVersion'])return this[_0x3535c4(0x1fe)](_0x4d10cf[_0x3535c4(0x1b2)],_0x4d10cf['command'],{'success':![],'isPro':![]},_0x4d10cf['callback']);let _0x3226e2={'status':_0x3535c4(0x2ab),'details':'','lastCheck':0x0};try{_0x3226e2[_0x3535c4(0x205)]=(await this[_0x3535c4(0x18f)](LTM_DP_DRIFT_STATUS))[_0x3535c4(0x267)],_0x3226e2[_0x3535c4(0x18e)]=(await this[_0x3535c4(0x18f)](LTM_DP_DRIFT_DETAILS))[_0x3535c4(0x267)],_0x3226e2[_0x3535c4(0x26b)]=(await this[_0x3535c4(0x18f)](LTM_DP_DRIFT_LAST_CHECK))[_0x3535c4(0x267)];}catch(_0x1fe5a8){}const _0x17e0cc=this[_0x3535c4(0x245)]||[];this['sendTo'](_0x4d10cf['from'],_0x4d10cf[_0x3535c4(0x191)],{'success':!![],'isPro':!![],'dailyDigests':this[_0x3535c4(0x2df)],'driftAnalysis':_0x3226e2,'analysisHistory':_0x17e0cc},_0x4d10cf[_0x3535c4(0x1a4)]);}else{if(_0x4d10cf[_0x3535c4(0x191)]===_0x3535c4(0x2bf)){const _0x2c96a5=this[_0x3535c4(0x2df)]['length'],_0x2d41ae=this[_0x3535c4(0x21f)][_0x3535c4(0x1e7)](_0x335d9f=>_0x335d9f[_0x3535c4(0x199)]>new Date()[_0x3535c4(0x1f3)](0x0,0x0,0x0,0x0))[_0x3535c4(0x1f9)];let _0x22dcdf={'status':'N/A'};try{_0x22dcdf[_0x3535c4(0x205)]=(await this[_0x3535c4(0x18f)](LTM_DP_DRIFT_STATUS))['val'];}catch(_0x522327){}let _0x1446a3=null;!this['geminiModel']&&(_0x1446a3=this['config'][_0x3535c4(0x231)]?_0x3535c4(0x1bc):_0x3535c4(0x237));let _0x2bd223={'detected':![],'description':''};try{const _0xad5c0=await this[_0x3535c4(0x18f)](_0x3535c4(0x2b4)),_0x5d7136=await this[_0x3535c4(0x18f)](_0x3535c4(0x1e3));_0xad5c0&&_0xad5c0[_0x3535c4(0x267)]&&(_0x2bd223[_0x3535c4(0x2d8)]=!![],_0x2bd223[_0x3535c4(0x1d9)]=_0x5d7136?_0x5d7136[_0x3535c4(0x267)]:'');}catch(_0x1dcda8){}this['sendTo'](_0x4d10cf[_0x3535c4(0x1b2)],_0x4d10cf['command'],{'success':!![],'eventHistory':this[_0x3535c4(0x21f)][_0x3535c4(0x1d8)](0x0,0xf),'stats':{'digestCount':_0x2c96a5,'eventCountToday':_0x2d41ae,'driftStatus':_0x22dcdf[_0x3535c4(0x205)],'isPresent':this[_0x3535c4(0x243)],'minDays':this['config'][_0x3535c4(0x2c9)]||0x7,'stbDays':this[_0x3535c4(0x2e6)]['ltmStbWindowDays']||0xe,'ltbDays':this['config']['ltmLtbWindowDays']||0x3c,'systemError':_0x1446a3},'automation':_0x2bd223},_0x4d10cf[_0x3535c4(0x1a4)]);}else{if(_0x4d10cf['command']==='getEnums'){}else{if(_0x4d10cf[_0x3535c4(0x191)]===_0x3535c4(0x21e))try{const _0x120f93=await this[_0x3535c4(0x2e0)](_0x4d10cf[_0x3535c4(0x20d)]||{});this[_0x3535c4(0x1fe)](_0x4d10cf['from'],_0x4d10cf[_0x3535c4(0x191)],{'success':!![],'devices':_0x120f93},_0x4d10cf['callback']);}catch(_0x1390df){this['sendTo'](_0x4d10cf['from'],_0x4d10cf['command'],{'success':![],'error':_0x1390df[_0x3535c4(0x20d)]},_0x4d10cf[_0x3535c4(0x1a4)]);}}}}}}}catch(_0x2ee1d7){}}async[a0_0x2aacef(0x230)](_0x50e9bf,_0x64169c,_0x4b0ecf){const _0x12b66a=a0_0x2aacef;if(!_0x4b0ecf[_0x12b66a(0x270)]&&this['sensorLastValues'][_0x50e9bf]===_0x64169c[_0x12b66a(0x267)])return;this[_0x12b66a(0x20f)][_0x50e9bf]=_0x64169c[_0x12b66a(0x267)];if(this[_0x12b66a(0x212)])return;const _0x4efffc=await this[_0x12b66a(0x1eb)]();if(_0x4efffc){if(!this[_0x12b66a(0x243)])await this[_0x12b66a(0x1dc)](!![]);}else{const _0x5dc0a8=_0x4b0ecf[_0x12b66a(0x186)]===!![];if(_0x5dc0a8)this[_0x12b66a(0x275)]();else{if(this[_0x12b66a(0x1b5)])this[_0x12b66a(0x2af)]();if(!this[_0x12b66a(0x243)]&&this[_0x12b66a(0x2e5)]===SYSTEM_MODES[_0x12b66a(0x1a5)])await this[_0x12b66a(0x1dc)](!![]);}}const _0xa4370a={'timestamp':_0x64169c['ts'],'id':_0x50e9bf,'name':_0x4b0ecf[_0x12b66a(0x182)],'value':_0x64169c[_0x12b66a(0x267)],'location':_0x4b0ecf[_0x12b66a(0x28a)],'type':_0x4b0ecf[_0x12b66a(0x1cb)]};this[_0x12b66a(0x21f)]['unshift'](_0xa4370a);if(this[_0x12b66a(0x21f)][_0x12b66a(0x1f9)]>HISTORY_MAX_SIZE)this['eventHistory'][_0x12b66a(0x282)]();await this['setStateAsync'](_0x12b66a(0x2e3),{'val':JSON[_0x12b66a(0x257)](_0xa4370a),'ack':!![]}),await this[_0x12b66a(0x2c1)]('events.history',{'val':JSON[_0x12b66a(0x257)](this[_0x12b66a(0x21f)]),'ack':!![]}),this[_0x12b66a(0x235)][_0x12b66a(0x23e)]({'timestamp':new Date(_0x64169c['ts'])[_0x12b66a(0x27c)](),'sensorName':_0x4b0ecf['name'],'location':_0x4b0ecf[_0x12b66a(0x28a)],'value':_0x64169c[_0x12b66a(0x267)]}),await this[_0x12b66a(0x2a6)]();}async[a0_0x2aacef(0x261)](_0x448cb1=''){const _0x89ec1d=a0_0x2aacef;if(!this[_0x89ec1d(0x1e1)]){this[_0x89ec1d(0x1ae)][_0x89ec1d(0x1e9)]('Triggered\x20analysis\x20but\x20Gemini\x20AI\x20is\x20not\x20initialized!\x20Check\x20API\x20Key.');return;}const _0xd44657=this[_0x89ec1d(0x21f)][_0x89ec1d(0x1f9)]>0x0?this[_0x89ec1d(0x21f)]:[{'note':_0x89ec1d(0x20c)}],_0x414925=PERSONA_MAPPING[this[_0x89ec1d(0x2e6)][_0x89ec1d(0x1f8)]||_0x89ec1d(0x233)],_0x1309f8=this['config'][_0x89ec1d(0x2d5)]||'',_0x5bd8f4=this['currentSystemMode'],_0x31f0e4=await this[_0x89ec1d(0x29a)](),_0x5495fa=await this[_0x89ec1d(0x1a9)](),_0x2904a1=(_0x31f0e4+'\x20'+_0x5495fa)[_0x89ec1d(0x221)](),_0x82c4c3=new Date(),_0x32dbf9=_0x82c4c3[_0x89ec1d(0x264)]('de-DE',{'weekday':_0x89ec1d(0x28f),'hour':_0x89ec1d(0x207),'minute':_0x89ec1d(0x207)});let _0x2fba38='Phase\x201:\x20Learning\x20(No\x20Baseline).\x20Rely\x20on\x20common\x20sense.';const _0x3d8604=this['dailyDigests'][_0x89ec1d(0x1f9)];if(this[_0x89ec1d(0x202)]&&_0x3d8604>=(this[_0x89ec1d(0x2e6)][_0x89ec1d(0x2c9)]||0x7)){const _0x3824b1=this['dailyDigests'][_0x89ec1d(0x1d8)](-(this[_0x89ec1d(0x2e6)][_0x89ec1d(0x2dc)]||0xe));_0x2fba38=_0x89ec1d(0x1bf)+JSON[_0x89ec1d(0x257)](_0x3824b1)+'.';if(_0x3d8604>=0x1e)_0x2fba38+=_0x89ec1d(0x25b);}const _0x56a4e=_0x89ec1d(0x29c)+_0x32dbf9+_0x89ec1d(0x19b)+_0x2904a1+_0x89ec1d(0x2d1),_0x46b173=_0x89ec1d(0x2e2)+_0x32dbf9+_0x89ec1d(0x21d)+_0x5bd8f4+'.\x20PRÃ„SENZ:\x20'+(this['isPresent']?'Ja':_0x89ec1d(0x215))+'.\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20KONTEXT:\x20'+_0x1309f8+_0x89ec1d(0x1f1)+_0x414925+_0x89ec1d(0x283)+_0x2fba38+'\x20'+(_0x448cb1?_0x448cb1:'')+_0x89ec1d(0x2d1)+_0x56a4e+_0x89ec1d(0x2ce)+JSON[_0x89ec1d(0x257)](_0xd44657)+_0x89ec1d(0x2cd);try{const _0x4fe70e=await this[_0x89ec1d(0x1e1)][_0x89ec1d(0x1e0)](_0x46b173),_0x27a43e=_0x4fe70e[_0x89ec1d(0x195)][_0x89ec1d(0x293)]()[_0x89ec1d(0x252)](/```json|```/g,'')[_0x89ec1d(0x221)](),_0x16b596=JSON[_0x89ec1d(0x226)](_0x27a43e);await this[_0x89ec1d(0x2c1)](_0x89ec1d(0x2bd),{'val':_0x27a43e,'ack':!![]}),await this[_0x89ec1d(0x2c1)]('analysis.alertReason',{'val':_0x16b596[_0x89ec1d(0x206)][_0x89ec1d(0x26f)]||'','ack':!![]}),await this[_0x89ec1d(0x2c1)](_0x89ec1d(0x196),{'val':_0x16b596[_0x89ec1d(0x206)][_0x89ec1d(0x1b7)]||_0x89ec1d(0x2ab),'ack':!![]});const _0x3d2d21=_0x16b596[_0x89ec1d(0x2ee)][_0x89ec1d(0x1f4)],_0x3bbe37=this[_0x89ec1d(0x202)]?_0x3d2d21[_0x89ec1d(0x24d)]:![];await this['setStateAsync'](_0x89ec1d(0x2b4),{'val':_0x3bbe37,'ack':!![]});let _0x5c964d=_0x89ec1d(0x211);if(this['isProVersion'])_0x5c964d=_0x3bbe37?_0x3d2d21[_0x89ec1d(0x1d9)]:_0x89ec1d(0x1fc);await this[_0x89ec1d(0x2c1)](_0x89ec1d(0x1e3),{'val':_0x5c964d,'ack':!![]});if(_0x16b596[_0x89ec1d(0x206)][_0x89ec1d(0x284)]||_0x16b596[_0x89ec1d(0x206)][_0x89ec1d(0x222)]){await this[_0x89ec1d(0x2c1)]('analysis.isAlert',{'val':!![],'ack':!![]});if(!this[_0x89ec1d(0x2c4)]||_0x16b596[_0x89ec1d(0x206)][_0x89ec1d(0x222)]){const _0x12c693=_0x16b596[_0x89ec1d(0x206)][_0x89ec1d(0x222)]?_0x89ec1d(0x19f):'âš ï¸\x20Alarm';this[_0x89ec1d(0x278)](_0x12c693+':\x20'+_0x16b596[_0x89ec1d(0x206)][_0x89ec1d(0x26f)],![],_0x16b596[_0x89ec1d(0x206)][_0x89ec1d(0x222)]);}}else await this[_0x89ec1d(0x2c1)](_0x89ec1d(0x255),{'val':![],'ack':!![]});this['lastAlertState']=_0x16b596[_0x89ec1d(0x206)][_0x89ec1d(0x284)]||_0x16b596[_0x89ec1d(0x206)][_0x89ec1d(0x222)];const _0xcbb2be={'timestamp':Date['now'](),'id':Date['now']()[_0x89ec1d(0x25e)](),'analysis':_0x16b596,'systemMode':_0x5bd8f4,'isPro':this[_0x89ec1d(0x202)]};this[_0x89ec1d(0x2d2)](_0xcbb2be);}catch(_0x10df25){this['log'][_0x89ec1d(0x263)](_0x89ec1d(0x19e)+_0x10df25[_0x89ec1d(0x20d)]);}}async[a0_0x2aacef(0x1d7)](){const _0x2eb190=a0_0x2aacef,_0x142ecc=this['config'][_0x2eb190(0x2a2)],_0xcc66e7=this[_0x2eb190(0x21f)][_0x2eb190(0x1f9)]>0x0?this[_0x2eb190(0x21f)][0x0][_0x2eb190(0x199)]:Date[_0x2eb190(0x1fa)](),_0xeaefbe=(Date[_0x2eb190(0x1fa)]()-_0xcc66e7)/(0x3e8*0x3c*0x3c);let _0x3681a3='';this[_0x2eb190(0x2e6)][_0x2eb190(0x2b3)]&&this[_0x2eb190(0x2e5)]===SYSTEM_MODES[_0x2eb190(0x1a5)]&&this[_0x2eb190(0x243)]&&(_0xeaefbe>_0x142ecc&&(_0x3681a3=_0x2eb190(0x2ba)+_0xeaefbe[_0x2eb190(0x223)](0x1)+'\x20hours.\x20Potential\x20incapacitation.')),this['runGeminiAnalysis'](_0x3681a3)[_0x2eb190(0x28b)](_0x2de985=>this[_0x2eb190(0x1ae)][_0x2eb190(0x263)](_0x2de985));}async[a0_0x2aacef(0x1e5)](){}async[a0_0x2aacef(0x1f5)](){}async[a0_0x2aacef(0x2e0)](_0x464c75){return[];}[a0_0x2aacef(0x1a8)](_0xf1cb28){const _0x5afa7c=a0_0x2aacef;if(typeof _0xf1cb28===_0x5afa7c(0x180))return _0xf1cb28;try{return JSON['parse'](_0xf1cb28);}catch(_0x3ad0a4){return null;}}async['initZombies'](){}async['initHistory'](){const _0xb62a26=a0_0x2aacef;try{const _0x1ac4d8=await this['getStateAsync'](_0xb62a26(0x2f8));_0x1ac4d8&&_0x1ac4d8['val']&&(this['eventHistory']=JSON[_0xb62a26(0x226)](_0x1ac4d8[_0xb62a26(0x267)][_0xb62a26(0x25e)]()));}catch(_0x10af1b){this[_0xb62a26(0x21f)]=[];}try{const _0x849c57=await this[_0xb62a26(0x18f)](_0xb62a26(0x1b9));if(_0x849c57&&_0x849c57[_0xb62a26(0x267)])this[_0xb62a26(0x245)]=JSON[_0xb62a26(0x226)](_0x849c57[_0xb62a26(0x267)][_0xb62a26(0x25e)]());}catch(_0x213895){this['analysisHistory']=[];}}async[a0_0x2aacef(0x2cb)](){const _0x425e0c=a0_0x2aacef;try{const _0x21ce64=await this[_0x425e0c(0x1c6)](_0x425e0c(0x291));_0x21ce64&&_0x21ce64[_0x425e0c(0x208)]&&(this[_0x425e0c(0x285)]={'latitude':_0x21ce64['common'][_0x425e0c(0x29d)]||0x0,'longitude':_0x21ce64[_0x425e0c(0x208)][_0x425e0c(0x2cc)]||0x0,'city':_0x21ce64['common'][_0x425e0c(0x1b3)]||''});}catch(_0x304372){}}async[a0_0x2aacef(0x280)](_0x4b5f7a){const _0xcc1730=a0_0x2aacef;if(!_0x4b5f7a)return![];this['systemUUID']=await this[_0xcc1730(0x1bb)]();if(_0x4b5f7a===_0xcc1730(0x229)||_0x4b5f7a[_0xcc1730(0x219)](_0xcc1730(0x1ef)))return!![];return![];}async[a0_0x2aacef(0x1bb)](){const _0x378f6a=a0_0x2aacef;try{const _0x2f7343=await this[_0x378f6a(0x1c6)](_0x378f6a(0x1e6));if(_0x2f7343&&_0x2f7343['native']&&_0x2f7343[_0x378f6a(0x1cd)][_0x378f6a(0x1da)])return _0x2f7343[_0x378f6a(0x1cd)][_0x378f6a(0x1da)];return _0x378f6a(0x1b8);}catch(_0x29e0e3){return _0x378f6a(0x1e2);}}async[a0_0x2aacef(0x2b6)](){}async[a0_0x2aacef(0x256)](){const _0x445019=a0_0x2aacef;await this[_0x445019(0x27a)](_0x445019(0x2b1),{'type':'channel','common':{'name':_0x445019(0x2d4)},'native':{}}),await this[_0x445019(0x27a)](SYSTEM_DP_MODE,{'type':_0x445019(0x193),'common':{'name':_0x445019(0x2cf),'type':_0x445019(0x1a2),'role':_0x445019(0x193),'read':!![],'write':!![],'def':SYSTEM_MODES[_0x445019(0x1a5)],'states':{[SYSTEM_MODES[_0x445019(0x1a5)]]:_0x445019(0x1ca),[SYSTEM_MODES[_0x445019(0x1b0)]]:_0x445019(0x1a3),[SYSTEM_MODES[_0x445019(0x2c8)]]:_0x445019(0x190),[SYSTEM_MODES[_0x445019(0x1f7)]]:'Gast'}},'native':{}});}async[a0_0x2aacef(0x2b9)](){const _0x4751f9=a0_0x2aacef;await this[_0x4751f9(0x27a)]('LTM',{'type':_0x4751f9(0x2b8),'common':{'name':_0x4751f9(0x24e)},'native':{}}),await this[_0x4751f9(0x27a)](LTM_DP_RAW_LOG,{'type':_0x4751f9(0x193),'common':{'name':_0x4751f9(0x20b),'type':_0x4751f9(0x1a2),'role':_0x4751f9(0x2f5),'read':!![],'write':![]},'native':{}}),await this[_0x4751f9(0x27a)](LTM_DP_DAILY_DIGESTS,{'type':_0x4751f9(0x193),'common':{'name':_0x4751f9(0x1c4),'type':'string','role':'json','read':!![],'write':![]},'native':{}}),await this[_0x4751f9(0x27a)](LTM_DP_STATUS,{'type':_0x4751f9(0x193),'common':{'name':_0x4751f9(0x274),'type':_0x4751f9(0x1a2),'role':'text','read':!![],'write':![]},'native':{}}),await this[_0x4751f9(0x27a)](LTM_DP_TRIGGER_DIGEST,{'type':'state','common':{'name':'Trigger\x20Digest','type':_0x4751f9(0x1c2),'role':_0x4751f9(0x224),'read':!![],'write':!![],'def':![]},'native':{}}),await this[_0x4751f9(0x27a)](LTM_DP_BASELINE_STATUS,{'type':_0x4751f9(0x193),'common':{'name':'Baseline\x20Status','type':_0x4751f9(0x1a2),'role':'text','read':!![],'write':![]},'native':{}});}async[a0_0x2aacef(0x1df)](){const _0x25f828=a0_0x2aacef;await this[_0x25f828(0x27a)](LTM_DP_DRIFT_CHANNEL,{'type':_0x25f828(0x2b8),'common':{'name':'Drift\x20Analysis'},'native':{}}),await this[_0x25f828(0x27a)](LTM_DP_DRIFT_STATUS,{'type':_0x25f828(0x193),'common':{'name':_0x25f828(0x299),'type':_0x25f828(0x1a2),'role':_0x25f828(0x193),'read':!![],'write':![],'def':_0x25f828(0x2ab)},'native':{}}),await this[_0x25f828(0x27a)](LTM_DP_DRIFT_DETAILS,{'type':_0x25f828(0x193),'common':{'name':_0x25f828(0x1e4),'type':_0x25f828(0x1a2),'role':_0x25f828(0x293),'read':!![],'write':![]},'native':{}}),await this[_0x25f828(0x27a)](LTM_DP_DRIFT_LAST_CHECK,{'type':'state','common':{'name':_0x25f828(0x203),'type':_0x25f828(0x1f0),'role':_0x25f828(0x204),'read':!![],'write':![]},'native':{}});}async[a0_0x2aacef(0x2bc)](){const _0x26b312=a0_0x2aacef;try{const _0x1f462d=await this[_0x26b312(0x18f)](SYSTEM_DP_MODE);_0x1f462d&&_0x1f462d[_0x26b312(0x267)]&&Object[_0x26b312(0x2b2)](SYSTEM_MODES)['includes'](_0x1f462d['val'])?this[_0x26b312(0x2e5)]=_0x1f462d['val']:(this[_0x26b312(0x2e5)]=SYSTEM_MODES['NORMAL'],await this[_0x26b312(0x2c1)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES['NORMAL'],'ack':!![]}));}catch(_0x29aec7){this[_0x26b312(0x2e5)]=SYSTEM_MODES['NORMAL'];}}async[a0_0x2aacef(0x1b6)](){const _0x1e155a=a0_0x2aacef;try{const _0x51556c=await this[_0x1e155a(0x18f)](LTM_DP_RAW_LOG);if(_0x51556c&&_0x51556c[_0x1e155a(0x267)])this[_0x1e155a(0x235)]=JSON[_0x1e155a(0x226)](_0x51556c[_0x1e155a(0x267)]);}catch(_0x43dc63){this[_0x1e155a(0x235)]=[];}}async[a0_0x2aacef(0x2a6)](){const _0xf96c3b=a0_0x2aacef;this[_0xf96c3b(0x235)][_0xf96c3b(0x1f9)]>RAW_LOG_MAX_SIZE&&this['rawEventLog'][_0xf96c3b(0x2d9)](0x0,this[_0xf96c3b(0x235)][_0xf96c3b(0x1f9)]-RAW_LOG_MAX_SIZE),await this[_0xf96c3b(0x2c1)](LTM_DP_RAW_LOG,{'val':JSON['stringify'](this[_0xf96c3b(0x235)]),'ack':!![]});}async['loadDailyDigests'](){const _0x272787=a0_0x2aacef;try{const _0x577e31=await this[_0x272787(0x18f)](LTM_DP_DAILY_DIGESTS);if(_0x577e31&&_0x577e31[_0x272787(0x267)])this[_0x272787(0x2df)]=JSON['parse'](_0x577e31[_0x272787(0x267)]);}catch(_0x843122){this['dailyDigests']=[];}await this[_0x272787(0x25f)]();}async['saveDailyDigests'](_0x241690=!![]){const _0xe4a6b6=a0_0x2aacef,_0x21b337=this[_0xe4a6b6(0x2e6)]['ltmLtbWindowDays']||0x3c;this[_0xe4a6b6(0x2df)][_0xe4a6b6(0x1f9)]>_0x21b337&&this[_0xe4a6b6(0x2df)][_0xe4a6b6(0x2d9)](0x0,this[_0xe4a6b6(0x2df)][_0xe4a6b6(0x1f9)]-_0x21b337);await this[_0xe4a6b6(0x2c1)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0xe4a6b6(0x257)](this[_0xe4a6b6(0x2df)]),'ack':!![]});if(_0x241690)await this['updateBaselineStatus']();}async[a0_0x2aacef(0x2d2)](_0x308e2a){const _0x9528a=a0_0x2aacef;this[_0x9528a(0x245)][_0x9528a(0x19c)](_0x308e2a);if(this[_0x9528a(0x245)]['length']>ANALYSIS_HISTORY_MAX_SIZE)this[_0x9528a(0x245)][_0x9528a(0x282)]();await this['setStateAsync'](_0x9528a(0x1b9),{'val':JSON[_0x9528a(0x257)](this['analysisHistory']),'ack':!![]});}async[a0_0x2aacef(0x25f)](){const _0x170573=a0_0x2aacef;if(!this[_0x170573(0x202)]){await this[_0x170573(0x2c1)](LTM_DP_BASELINE_STATUS,{'val':_0x170573(0x248),'ack':!![]});return;}const _0x2b7122=this[_0x170573(0x2df)][_0x170573(0x1f9)]>=(this[_0x170573(0x2e6)][_0x170573(0x2c9)]||0x7)?'Aktiv\x20('+this['dailyDigests'][_0x170573(0x1f9)]+_0x170573(0x19d):_0x170573(0x297)+this[_0x170573(0x2df)]['length']+'/'+(this['config'][_0x170573(0x2c9)]||0x7)+')';await this[_0x170573(0x2c1)](LTM_DP_BASELINE_STATUS,{'val':_0x2b7122,'ack':!![]});}async[a0_0x2aacef(0x247)](){const _0x3c6263=a0_0x2aacef,_0x24e607=this[_0x3c6263(0x2e6)][_0x3c6263(0x188)];if(_0x24e607&&_0x24e607[_0x3c6263(0x1f9)]>0x0){this[_0x3c6263(0x1ae)][_0x3c6263(0x266)](_0x3c6263(0x265)+_0x24e607[_0x3c6263(0x1f9)]+_0x3c6263(0x2ef));for(const _0x4a6064 of _0x24e607){if(_0x4a6064['id']){await this['subscribeForeignStatesAsync'](_0x4a6064['id']);try{const _0x300946=await this[_0x3c6263(0x272)](_0x4a6064['id']);if(_0x300946)this['sensorLastValues'][_0x4a6064['id']]=_0x300946['val'];}catch(_0x2e2a08){}}}}}async[a0_0x2aacef(0x23b)](){const _0x149705=a0_0x2aacef,_0x21851d=this['config'][_0x149705(0x238)]||[];if(_0x21851d[_0x149705(0x1f9)]>0x0){this[_0x149705(0x1ae)]['info'](_0x149705(0x265)+_0x21851d['length']+_0x149705(0x2c2));for(const _0x3c8614 of _0x21851d){await this[_0x149705(0x1de)](_0x3c8614);}try{await this['checkWifiPresence']();}catch(_0x7f180d){}}}async[a0_0x2aacef(0x29a)](){const _0x3c5e20=a0_0x2aacef;try{if(!this['config'][_0x3c5e20(0x253)])return _0x3c5e20(0x1ab);let _0x4be14c='';const _0x325177=this[_0x3c5e20(0x2e6)][_0x3c5e20(0x281)];if(_0x325177)try{if(_0x325177['includes'](_0x3c5e20(0x216))){const _0x46e457=await this[_0x3c5e20(0x272)](_0x325177+'.Summary.Current');if(_0x46e457&&_0x46e457[_0x3c5e20(0x267)])_0x4be14c=_0x46e457[_0x3c5e20(0x267)];}else{if(_0x325177[_0x3c5e20(0x2d7)](_0x3c5e20(0x189))){const _0x2d5224=await this['getForeignStateAsync'](_0x325177+_0x3c5e20(0x276));if(_0x2d5224&&_0x2d5224[_0x3c5e20(0x267)])_0x4be14c=_0x2d5224[_0x3c5e20(0x267)];}else{if(_0x325177[_0x3c5e20(0x2d7)](_0x3c5e20(0x2be))){const _0x38a97b=await this[_0x3c5e20(0x272)](_0x325177+_0x3c5e20(0x184));if(_0x38a97b&&_0x38a97b[_0x3c5e20(0x267)])_0x4be14c=_0x38a97b['val'];}}}}catch(_0x51f988){}if(!_0x4be14c){const _0xe1be75=[_0x3c5e20(0x25d),_0x3c5e20(0x27f),_0x3c5e20(0x26c),_0x3c5e20(0x21a)];for(const _0x40f352 of _0xe1be75){try{const _0x4e5825=await this[_0x3c5e20(0x1c6)](_0x40f352);if(_0x4e5825){if(_0x40f352[_0x3c5e20(0x2d7)](_0x3c5e20(0x216))){const _0x53b0c1=await this['getForeignStateAsync'](_0x40f352+'.Summary.Current');if(_0x53b0c1&&_0x53b0c1['val']){_0x4be14c=_0x53b0c1[_0x3c5e20(0x267)];break;}}}}catch(_0x3ae845){}}}return _0x4be14c?_0x3c5e20(0x246)+_0x4be14c:'WETTER:\x20Keine\x20Daten\x20gefunden';}catch(_0x185b41){return'WETTER\x20ERROR:\x20'+_0x185b41['message'];}}async[a0_0x2aacef(0x1a9)](){const _0x28e7ab=a0_0x2aacef;try{if(!this[_0x28e7ab(0x2e6)]['useCalendar'])return'Kalender:\x20Deaktiviert';let _0x256a95=this['config'][_0x28e7ab(0x2db)]||_0x28e7ab(0x269),_0x224e30=this[_0x28e7ab(0x2e6)][_0x28e7ab(0x244)]||[];if(typeof _0x224e30===_0x28e7ab(0x1a2))_0x224e30=_0x224e30['split'](',');try{const _0x5a42d7=await this[_0x28e7ab(0x272)](_0x256a95+_0x28e7ab(0x1b1));if(_0x5a42d7&&_0x5a42d7['val']){let _0x5d3a34=this[_0x28e7ab(0x1a8)](_0x5a42d7[_0x28e7ab(0x267)]);if(_0x5d3a34&&Array[_0x28e7ab(0x28c)](_0x5d3a34)){if(_0x224e30[_0x28e7ab(0x1f9)]>0x0)_0x5d3a34=_0x5d3a34[_0x28e7ab(0x1e7)](_0x80dc7b=>_0x224e30[_0x28e7ab(0x2d7)](_0x80dc7b[_0x28e7ab(0x242)]||''));else return _0x28e7ab(0x26a);if(_0x5d3a34[_0x28e7ab(0x1f9)]>0x0){const _0x1c24cf=_0x5d3a34[_0x28e7ab(0x1d8)](0x0,0x3)['map'](_0x59bffb=>{const _0x2d55a8=_0x28e7ab;let _0x3e31ed=_0x59bffb[_0x2d55a8(0x204)];if(_0x59bffb[_0x2d55a8(0x1c3)])_0x3e31ed+='\x20'+_0x59bffb[_0x2d55a8(0x1c3)];return _0x3e31ed+':\x20'+_0x59bffb['event']+'\x20('+_0x59bffb[_0x2d55a8(0x242)]+')';});return _0x28e7ab(0x1db)+_0x1c24cf['join'](_0x28e7ab(0x1ba));}else return _0x28e7ab(0x1a6);}}}catch(_0x1fcbdd){this[_0x28e7ab(0x1ae)][_0x28e7ab(0x1e9)](_0x28e7ab(0x2d3)+_0x1fcbdd[_0x28e7ab(0x20d)]);}return'KALENDER:\x20Keine\x20Daten';}catch(_0x503c14){return _0x28e7ab(0x254)+_0x503c14[_0x28e7ab(0x20d)];}}async['getCalendarNames'](_0x507204){const _0x23e112=a0_0x2aacef;try{const _0x312692=await this['getForeignStateAsync'](_0x507204+_0x23e112(0x1b1));if(_0x312692&&_0x312692[_0x23e112(0x267)]){const _0x54feb6=this[_0x23e112(0x1a8)](_0x312692[_0x23e112(0x267)]);if(_0x54feb6&&Array['isArray'](_0x54feb6)){const _0x57f65e=[...new Set(_0x54feb6[_0x23e112(0x1d0)](_0x41789c=>_0x41789c[_0x23e112(0x242)])['filter'](Boolean))];return _0x57f65e[_0x23e112(0x22f)]();}}return[];}catch(_0x28889f){return this[_0x23e112(0x1ae)][_0x23e112(0x263)](_0x23e112(0x1ee)+_0x28889f[_0x23e112(0x20d)]),[];}}async[a0_0x2aacef(0x1eb)](){const _0x34dc27=a0_0x2aacef;try{const _0xa9e5f8=this[_0x34dc27(0x2e6)][_0x34dc27(0x238)]||[];let _0x373dfb=![];for(const _0x5d5fcb of _0xa9e5f8){try{const _0x566895=await this[_0x34dc27(0x272)](_0x5d5fcb);if(_0x566895&&(_0x566895['val']===!![]||_0x566895['val']===_0x34dc27(0x2d0)||_0x566895[_0x34dc27(0x267)]===0x1)){_0x373dfb=!![];break;}}catch(_0x53a47f){}}return _0x373dfb&&(this[_0x34dc27(0x1b5)]&&(this['log'][_0x34dc27(0x266)](_0x34dc27(0x251)),this[_0x34dc27(0x2af)]()),!this[_0x34dc27(0x243)]&&this[_0x34dc27(0x2e5)]===SYSTEM_MODES['NORMAL']&&await this[_0x34dc27(0x1dc)](!![])),_0x373dfb;}catch(_0x574393){return this[_0x34dc27(0x1ae)]['error'](_0x34dc27(0x183)+_0x574393[_0x34dc27(0x20d)]),![];}}[a0_0x2aacef(0x275)](){const _0x145eab=a0_0x2aacef;this[_0x145eab(0x2af)](),this[_0x145eab(0x212)]=!![],this[_0x145eab(0x279)]=setTimeout(()=>{const _0x14602e=_0x145eab;this[_0x14602e(0x212)]=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),this[_0x145eab(0x1b5)]=setTimeout(()=>{const _0x583d4a=_0x145eab;this[_0x583d4a(0x1dc)](![]),this['exitTimer']=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}['abortExitTimer'](){const _0x472e75=a0_0x2aacef;if(this['exitTimer'])clearTimeout(this[_0x472e75(0x1b5)]);if(this[_0x472e75(0x279)])clearTimeout(this[_0x472e75(0x279)]);this[_0x472e75(0x1b5)]=null,this['exitGraceTimer']=null,this[_0x472e75(0x212)]=![];}async[a0_0x2aacef(0x1dc)](_0x49028a){const _0x514d1a=a0_0x2aacef;if(this[_0x514d1a(0x243)]===_0x49028a)return;this[_0x514d1a(0x243)]=_0x49028a,await this[_0x514d1a(0x2c1)]('system.isPresent',{'val':_0x49028a,'ack':!![]});}async[a0_0x2aacef(0x1fb)](_0x38f4db){const _0x444117=a0_0x2aacef;this[_0x444117(0x1ae)][_0x444117(0x266)](_0x444117(0x259)+JSON[_0x444117(0x257)](_0x38f4db));}async[a0_0x2aacef(0x1f2)](){const _0x442f82=a0_0x2aacef;if(!this['isProVersion']||!this[_0x442f82(0x1e1)])return;const _0x25f716=this[_0x442f82(0x2e6)]['ltmStbWindowDays']||0xe;if(this[_0x442f82(0x2df)][_0x442f82(0x1f9)]<_0x25f716+(this[_0x442f82(0x2e6)][_0x442f82(0x2c9)]||0x7)){await this['setStateAsync'](LTM_DP_DRIFT_STATUS,{'val':'N/A\x20(Learning)','ack':!![]});return;}const _0x52db8c=this[_0x442f82(0x2df)][_0x442f82(0x1d8)](-_0x25f716),_0x1043e4=this[_0x442f82(0x2df)][_0x442f82(0x1d8)](0x0,this[_0x442f82(0x2df)][_0x442f82(0x1f9)]-_0x25f716),_0x25d905='ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20'+JSON[_0x442f82(0x257)](_0x1043e4)+_0x442f82(0x1c0)+JSON['stringify'](_0x52db8c);try{const _0x168060=await this['geminiModel'][_0x442f82(0x1e0)](_0x25d905),_0x19188d=JSON['parse'](_0x168060[_0x442f82(0x195)]['text']()[_0x442f82(0x252)](/```json|```/g,'')[_0x442f82(0x221)]());_0x19188d[_0x442f82(0x268)]&&(await this[_0x442f82(0x2c1)](LTM_DP_DRIFT_STATUS,{'val':_0x19188d[_0x442f82(0x268)],'ack':!![]}),await this[_0x442f82(0x2c1)](LTM_DP_DRIFT_DETAILS,{'val':_0x19188d[_0x442f82(0x1d2)],'ack':!![]}),await this[_0x442f82(0x2c1)](LTM_DP_DRIFT_LAST_CHECK,{'val':Date[_0x442f82(0x1fa)](),'ack':!![]}));}catch(_0x1a97c4){}}[a0_0x2aacef(0x187)](){const _0x84af24=a0_0x2aacef;try{if(this['ltmJob'])this['ltmJob'][_0x84af24(0x2a7)]();if(!this[_0x84af24(0x202)]){this[_0x84af24(0x2c1)](LTM_DP_STATUS,{'val':_0x84af24(0x248),'ack':!![]});return;}this[_0x84af24(0x2a3)]=schedule['scheduleJob'](LTM_SCHEDULE,()=>this[_0x84af24(0x1e5)]());}catch(_0x1c72e0){this['log']['error']('LTM\x20Sched\x20Error:\x20'+_0x1c72e0[_0x84af24(0x20d)]);}}[a0_0x2aacef(0x250)](){const _0x224e1f=a0_0x2aacef;try{if(this[_0x224e1f(0x236)])this['modeResetJob']['cancel']();this[_0x224e1f(0x236)]=schedule[_0x224e1f(0x294)](MODE_RESET_SCHEDULE,async()=>{const _0x1a2d43=_0x224e1f;await this[_0x1a2d43(0x2bc)](),AUTO_RESET_MODES[_0x1a2d43(0x2d7)](this[_0x1a2d43(0x2e5)])&&await this['setStateAsync'](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x1a2d43(0x1a5)],'ack':![]});});}catch(_0x1f6162){this[_0x224e1f(0x1ae)]['error'](_0x224e1f(0x1d5)+_0x1f6162['message']);}}['setupDriftAnalysisScheduler'](){const _0x43fa78=a0_0x2aacef;try{if(this[_0x43fa78(0x2e4)])clearInterval(this[_0x43fa78(0x2e4)]);if(!this[_0x43fa78(0x202)])return;this[_0x43fa78(0x2e4)]=setInterval(()=>this[_0x43fa78(0x1f2)](),(this[_0x43fa78(0x2e6)][_0x43fa78(0x22a)]||0x18)*0x36ee80),setTimeout(()=>this[_0x43fa78(0x1f2)](),0x1388);}catch(_0x27b749){this['log'][_0x43fa78(0x263)](_0x43fa78(0x29b)+_0x27b749[_0x43fa78(0x20d)]);}}['setupBriefingScheduler'](){const _0x465eaf=a0_0x2aacef;try{if(this[_0x465eaf(0x17f)])this['briefingJob'][_0x465eaf(0x2a7)]();if(!this['config'][_0x465eaf(0x22b)])return;const _0x5ee847=(this[_0x465eaf(0x2e6)][_0x465eaf(0x1f6)]||'08:00')[_0x465eaf(0x1a0)](':'),_0x20898c=parseInt(_0x5ee847[0x0])||0x8,_0x314977=parseInt(_0x5ee847[0x1])||0x0,_0x2faf88=_0x314977+'\x20'+_0x20898c+_0x465eaf(0x26d);this[_0x465eaf(0x1ae)][_0x465eaf(0x266)](_0x465eaf(0x298)+_0x20898c+':'+(_0x314977<0xa?'0'+_0x314977:_0x314977)),this[_0x465eaf(0x17f)]=schedule['scheduleJob'](_0x2faf88,()=>{const _0x3548ed=_0x465eaf;this[_0x3548ed(0x1f5)]();});}catch(_0x3bc553){this[_0x465eaf(0x1ae)][_0x465eaf(0x263)](_0x465eaf(0x192)+_0x3bc553[_0x465eaf(0x20d)]);}}async['sendNotification'](_0x24042b,_0x3070cf=![],_0x50187d=![]){const _0x5ce34b=a0_0x2aacef;this['log']['info']((_0x3070cf?_0x5ce34b(0x17e):'')+'Sending\x20notification:\x20\x22'+_0x24042b+'\x22');const _0x32499e=this[_0x5ce34b(0x2e6)];let _0x363da4=0x0;if(_0x32499e[_0x5ce34b(0x296)]&&_0x32499e[_0x5ce34b(0x214)]){let _0x14af23={};(_0x24042b[_0x5ce34b(0x2d7)]('Alarm')||_0x50187d)&&(_0x14af23={'reply_markup':{'inline_keyboard':[[{'text':_0x5ce34b(0x287),'callback_data':_0x5ce34b(0x2a5)}],[{'text':'ðŸ“ž\x20RÃ¼ckruf\x20anfordern','callback_data':'COGNI_REQUEST_CALL'}]]}}),await this[_0x5ce34b(0x23f)](_0x32499e[_0x5ce34b(0x214)],_0x5ce34b(0x2ca),{'text':_0x24042b,'user':_0x32499e[_0x5ce34b(0x18c)],..._0x14af23}),_0x363da4++;}if(_0x32499e[_0x5ce34b(0x1c8)]&&_0x32499e[_0x5ce34b(0x28d)]){let _0x4a961a={'message':_0x24042b,'title':_0x50187d?_0x5ce34b(0x2ae):_0x5ce34b(0x194),'priority':_0x50187d?0x2:0x1,'device':_0x32499e[_0x5ce34b(0x2f2)]};_0x50187d&&(_0x4a961a[_0x5ce34b(0x20a)]=0x1e,_0x4a961a[_0x5ce34b(0x2dd)]=0xe10,_0x4a961a[_0x5ce34b(0x1ea)]=_0x5ce34b(0x1c1)),await this[_0x5ce34b(0x23f)](_0x32499e['notifyPushoverInstance'],'send',_0x4a961a),_0x363da4++;}return _0x32499e[_0x5ce34b(0x25a)]&&_0x32499e[_0x5ce34b(0x227)]&&(await this[_0x5ce34b(0x23f)](_0x32499e[_0x5ce34b(0x227)],'send',{'text':_0x24042b,'to':_0x32499e[_0x5ce34b(0x1dd)]}),_0x363da4++),_0x363da4;}}if(require[a0_0x2aacef(0x2a1)]!==module)module['exports']=_0x2ffc5a=>new CogniLiving(_0x2ffc5a);else new CogniLiving();