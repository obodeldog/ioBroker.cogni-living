const a0_0x14b3e5=a0_0x4d2a;(function(_0x4a743b,_0x4f12c4){const _0x27cf86=a0_0x4d2a,_0x455a1d=_0x4a743b();while(!![]){try{const _0x110df8=parseInt(_0x27cf86(0x377))/0x1+-parseInt(_0x27cf86(0x3ab))/0x2*(-parseInt(_0x27cf86(0x360))/0x3)+-parseInt(_0x27cf86(0x349))/0x4*(parseInt(_0x27cf86(0x279))/0x5)+-parseInt(_0x27cf86(0x1e8))/0x6*(-parseInt(_0x27cf86(0x2b7))/0x7)+-parseInt(_0x27cf86(0x230))/0x8+-parseInt(_0x27cf86(0x398))/0x9+parseInt(_0x27cf86(0x1e5))/0xa*(-parseInt(_0x27cf86(0x374))/0xb);if(_0x110df8===_0x4f12c4)break;else _0x455a1d['push'](_0x455a1d['shift']());}catch(_0x2b8393){_0x455a1d['push'](_0x455a1d['shift']());}}}(a0_0x44bd,0x688a2));const a0_0x5f5063=(function(){let _0x5c66a8=!![];return function(_0x41e008,_0x504755){const _0x3c2fe0=_0x5c66a8?function(){if(_0x504755){const _0xbdf3e6=_0x504755['apply'](_0x41e008,arguments);return _0x504755=null,_0xbdf3e6;}}:function(){};return _0x5c66a8=![],_0x3c2fe0;};}()),a0_0x5ebe08=a0_0x5f5063(this,function(){const _0x29e2c2=a0_0x4d2a;return a0_0x5ebe08[_0x29e2c2(0x25d)]()['search'](_0x29e2c2(0x2b6))[_0x29e2c2(0x25d)]()[_0x29e2c2(0x21e)](a0_0x5ebe08)[_0x29e2c2(0x312)](_0x29e2c2(0x2b6));});a0_0x5ebe08();'use strict';const utils=require('@iobroker/adapter-core'),{GoogleGenerativeAI}=require(a0_0x14b3e5(0x1e2)),schedule=require(a0_0x14b3e5(0x2f2)),HISTORY_MAX_SIZE=0x32,ANALYSIS_HISTORY_MAX_SIZE=0x64,RAW_LOG_MAX_SIZE=0x5dc,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL=a0_0x14b3e5(0x32f),LTM_SCHEDULE=a0_0x14b3e5(0x391),MODE_RESET_SCHEDULE=a0_0x14b3e5(0x1f7),LTM_DP_RAW_LOG=a0_0x14b3e5(0x29d),LTM_DP_DAILY_DIGESTS='LTM.dailyDigests',LTM_DP_STATUS=a0_0x14b3e5(0x218),LTM_DP_TRIGGER_DIGEST=a0_0x14b3e5(0x2e8),LTM_DP_BASELINE_STATUS=a0_0x14b3e5(0x2e2),LTM_DP_DRIFT_CHANNEL=a0_0x14b3e5(0x26c),LTM_DP_DRIFT_STATUS=a0_0x14b3e5(0x2b9),LTM_DP_DRIFT_DETAILS='LTM.driftAnalysis.driftDetails',LTM_DP_DRIFT_LAST_CHECK=a0_0x14b3e5(0x205),SYSTEM_DP_MODE=a0_0x14b3e5(0x233),SYSTEM_MODES={'NORMAL':a0_0x14b3e5(0x1db),'VACATION':'vacation','PARTY':a0_0x14b3e5(0x2fd),'GUEST':a0_0x14b3e5(0x246)},AUTO_RESET_MODES=[SYSTEM_MODES[a0_0x14b3e5(0x2c0)],SYSTEM_MODES[a0_0x14b3e5(0x2d3)]],EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,PERSONA_MAPPING={'generic':a0_0x14b3e5(0x228),'senior_aal':a0_0x14b3e5(0x3a7),'family':a0_0x14b3e5(0x35e),'single_comfort':a0_0x14b3e5(0x3a8),'security':a0_0x14b3e5(0x1e3)};class CogniLiving extends utils['Adapter']{constructor(_0x365901){const _0x3d6840=a0_0x14b3e5;super({..._0x365901,'name':_0x3d6840(0x255)}),this[_0x3d6840(0x2b0)]=[],this[_0x3d6840(0x1ea)]=[],this[_0x3d6840(0x238)]=[],this[_0x3d6840(0x355)]=[],this[_0x3d6840(0x27e)]=[],this[_0x3d6840(0x1f3)]={},this[_0x3d6840(0x24c)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x3d6840(0x23f)]=!![],this[_0x3d6840(0x25e)]=null,this['exitGraceTimer']=null,this[_0x3d6840(0x250)]=![],this[_0x3d6840(0x3b4)]=null,this[_0x3d6840(0x2fc)]=null,this[_0x3d6840(0x1ec)]=SYSTEM_MODES[_0x3d6840(0x310)],this[_0x3d6840(0x231)]=![],this[_0x3d6840(0x2ae)]=![],this[_0x3d6840(0x2f5)]=_0x3d6840(0x2ad),this[_0x3d6840(0x303)]=null,this[_0x3d6840(0x1f6)]=null,this[_0x3d6840(0x2b2)]=null,this[_0x3d6840(0x2c1)]=null,this[_0x3d6840(0x276)]=null,this['on'](_0x3d6840(0x384),this[_0x3d6840(0x28d)]['bind'](this)),this['on']('stateChange',this[_0x3d6840(0x3c9)][_0x3d6840(0x29b)](this)),this['on'](_0x3d6840(0x2d2),this[_0x3d6840(0x3d1)][_0x3d6840(0x29b)](this)),this['on'](_0x3d6840(0x3a3),this['onMessage'][_0x3d6840(0x29b)](this));}async[a0_0x14b3e5(0x30c)](){const _0x58c32e=a0_0x14b3e5;try{if(!this[_0x58c32e(0x207)][_0x58c32e(0x2bc)])return _0x58c32e(0x35b);let _0x214638='';const _0x3edc19=this[_0x58c32e(0x207)][_0x58c32e(0x2fe)];if(_0x3edc19)try{if(_0x3edc19[_0x58c32e(0x26b)](_0x58c32e(0x29a))){const _0x211fae=await this[_0x58c32e(0x309)](_0x3edc19+_0x58c32e(0x204));if(_0x211fae&&_0x211fae[_0x58c32e(0x29c)])_0x214638=_0x211fae['val'];}else{if(_0x3edc19[_0x58c32e(0x26b)]('daswetter')){const _0x253862=await this[_0x58c32e(0x309)](_0x3edc19+_0x58c32e(0x262));if(_0x253862&&_0x253862['val'])_0x214638=_0x253862[_0x58c32e(0x29c)];}else{if(_0x3edc19['includes']('openweathermap')){const _0x2a01f1=await this[_0x58c32e(0x309)](_0x3edc19+_0x58c32e(0x2cc));if(_0x2a01f1&&_0x2a01f1[_0x58c32e(0x29c)])_0x214638=_0x2a01f1['val'];}}}}catch(_0x3618e6){this['log']['warn'](_0x58c32e(0x367)+_0x3618e6[_0x58c32e(0x3a3)]);}if(!_0x214638){const _0x5030dc=[_0x58c32e(0x2bf),_0x58c32e(0x388),'weatherunderground.0',_0x58c32e(0x21b)];for(const _0x397c9b of _0x5030dc){try{const _0x28379d=await this['getForeignObjectAsync'](_0x397c9b);if(_0x28379d){if(_0x397c9b[_0x58c32e(0x26b)](_0x58c32e(0x29a))){const _0x593d16=await this[_0x58c32e(0x309)](_0x397c9b+'.Summary.Current');if(_0x593d16&&_0x593d16['val']){_0x214638=_0x593d16['val'];break;}}}}catch(_0x410319){}}}return _0x214638?_0x58c32e(0x1dd)+_0x214638:_0x58c32e(0x267);}catch(_0x400342){return _0x58c32e(0x379)+_0x400342['message'];}}async[a0_0x14b3e5(0x320)](){const _0xfce005=a0_0x14b3e5;try{if(!this['config'][_0xfce005(0x26d)])return _0xfce005(0x3c8);let _0x5acfbe=this[_0xfce005(0x207)]['calendarInstance']||_0xfce005(0x36b),_0x3746b6=this[_0xfce005(0x207)][_0xfce005(0x1fe)]||[];if(typeof _0x3746b6===_0xfce005(0x217))_0x3746b6=_0x3746b6[_0xfce005(0x37e)](',');this['log'][_0xfce005(0x368)]('Getting\x20Calendar\x20Context\x20from\x20'+_0x5acfbe+_0xfce005(0x3a4)+JSON[_0xfce005(0x297)](_0x3746b6)+')');try{const _0x4d4b30=await this['getForeignStateAsync'](_0x5acfbe+'.data.table');if(_0x4d4b30&&_0x4d4b30['val']&&Array[_0xfce005(0x33d)](_0x4d4b30[_0xfce005(0x29c)])){let _0x39a9c7=_0x4d4b30[_0xfce005(0x29c)];if(_0x3746b6[_0xfce005(0x2db)]>0x0)_0x39a9c7=_0x39a9c7['filter'](_0x1525f2=>{const _0xe0c977=_0xfce005,_0x789a6d=_0x1525f2[_0xe0c977(0x237)]||'';return _0x3746b6['includes'](_0x789a6d);});else return'KALENDER:\x20Keine\x20Kalender\x20ausgewählt\x20(Bitte\x20in\x20Settings\x20konfigurieren)';if(_0x39a9c7[_0xfce005(0x2db)]>0x0){const _0x2a491a=_0x39a9c7[_0xfce005(0x23b)](0x0,0x3)['map'](_0xebd26=>{const _0x41de34=_0xfce005;let _0x48d6c5=_0xebd26[_0x41de34(0x1ef)];if(_0xebd26[_0x41de34(0x226)])_0x48d6c5+='\x20'+_0xebd26[_0x41de34(0x226)];return _0x48d6c5+':\x20'+_0xebd26[_0x41de34(0x342)]+'\x20('+_0xebd26[_0x41de34(0x237)]+')';});return _0xfce005(0x380)+_0x2a491a['join'](_0xfce005(0x281));}else return'KALENDER:\x20Keine\x20relevanten\x20Termine\x20(in\x20ausgewählten\x20Kalendern)';}}catch(_0x4b0dc0){this[_0xfce005(0x2eb)][_0xfce005(0x305)](_0xfce005(0x1f2)+_0x4b0dc0[_0xfce005(0x3a3)]);}return _0xfce005(0x3cf);}catch(_0x542951){return _0xfce005(0x22a)+_0x542951[_0xfce005(0x3a3)];}}async[a0_0x14b3e5(0x2a1)](_0x17cf4a){const _0x2317b4=a0_0x14b3e5;try{const _0x33cffd=await this['getForeignStateAsync'](_0x17cf4a+_0x2317b4(0x28f));if(_0x33cffd&&_0x33cffd[_0x2317b4(0x29c)]&&Array[_0x2317b4(0x33d)](_0x33cffd[_0x2317b4(0x29c)])){const _0x1bb289=[...new Set(_0x33cffd['val']['map'](_0x34d9a4=>_0x34d9a4[_0x2317b4(0x237)])[_0x2317b4(0x33b)](Boolean))];return _0x1bb289[_0x2317b4(0x24b)]();}return[];}catch(_0x2f635d){return[];}}async['initHistory'](){const _0x4167aa=a0_0x14b3e5;try{const _0x5ead84=await this[_0x4167aa(0x2bd)](_0x4167aa(0x27b));_0x5ead84&&_0x5ead84[_0x4167aa(0x29c)]&&(this[_0x4167aa(0x2b0)]=JSON['parse'](_0x5ead84[_0x4167aa(0x29c)][_0x4167aa(0x25d)]()));}catch(_0x143288){this['eventHistory']=[];}try{const _0x5c1891=await this['getStateAsync'](_0x4167aa(0x2af));if(_0x5c1891&&_0x5c1891['val'])this[_0x4167aa(0x1ea)]=JSON['parse'](_0x5c1891[_0x4167aa(0x29c)][_0x4167aa(0x25d)]());}catch(_0x2bf8c7){this[_0x4167aa(0x1ea)]=[];}}async[a0_0x14b3e5(0x263)](){const _0x3955a6=a0_0x14b3e5;try{const _0x50fd1a=await this['getForeignObjectAsync'](_0x3955a6(0x1fb));if(_0x50fd1a&&_0x50fd1a[_0x3955a6(0x36c)]&&_0x50fd1a[_0x3955a6(0x36c)][_0x3955a6(0x2a8)])return _0x50fd1a['native']['uuid'];return _0x3955a6(0x2e5);}catch(_0x524016){return'uuid-error';}}async['checkLicense'](_0x5cb238){const _0x501c39=a0_0x14b3e5;if(!_0x5cb238)return![];this[_0x501c39(0x2f5)]=await this[_0x501c39(0x263)]();if(_0x5cb238==='TEST-PRO-KEY'||_0x5cb238[_0x501c39(0x3c4)]('PRO-'))return!![];return![];}async[a0_0x14b3e5(0x378)](){const _0xcb9660=a0_0x14b3e5;await this['extendObjectAsync']('LTM',{'type':_0xcb9660(0x376),'common':{'name':_0xcb9660(0x346)},'native':{}}),await this['extendObjectAsync'](LTM_DP_RAW_LOG,{'type':_0xcb9660(0x32e),'common':{'name':_0xcb9660(0x385),'type':_0xcb9660(0x217),'role':_0xcb9660(0x264),'read':!![],'write':![]},'native':{}}),await this[_0xcb9660(0x370)](LTM_DP_DAILY_DIGESTS,{'type':_0xcb9660(0x32e),'common':{'name':_0xcb9660(0x28b),'type':_0xcb9660(0x217),'role':_0xcb9660(0x264),'read':!![],'write':![]},'native':{}}),await this[_0xcb9660(0x370)](LTM_DP_STATUS,{'type':_0xcb9660(0x32e),'common':{'name':_0xcb9660(0x348),'type':_0xcb9660(0x217),'role':_0xcb9660(0x39f),'read':!![],'write':![]},'native':{}}),await this[_0xcb9660(0x370)](LTM_DP_TRIGGER_DIGEST,{'type':_0xcb9660(0x32e),'common':{'name':_0xcb9660(0x29e),'type':_0xcb9660(0x22f),'role':_0xcb9660(0x3b3),'read':!![],'write':!![],'def':![]},'native':{}}),await this['extendObjectAsync'](LTM_DP_BASELINE_STATUS,{'type':_0xcb9660(0x32e),'common':{'name':_0xcb9660(0x395),'type':'string','role':_0xcb9660(0x39f),'read':!![],'write':![]},'native':{}});}async[a0_0x14b3e5(0x339)](){const _0x1ed5c7=a0_0x14b3e5;await this[_0x1ed5c7(0x370)](LTM_DP_DRIFT_CHANNEL,{'type':_0x1ed5c7(0x376),'common':{'name':_0x1ed5c7(0x29f)},'native':{}}),await this[_0x1ed5c7(0x370)](LTM_DP_DRIFT_STATUS,{'type':_0x1ed5c7(0x32e),'common':{'name':_0x1ed5c7(0x3b1),'type':_0x1ed5c7(0x217),'role':'state','read':!![],'write':![],'def':_0x1ed5c7(0x304)},'native':{}}),await this[_0x1ed5c7(0x370)](LTM_DP_DRIFT_DETAILS,{'type':_0x1ed5c7(0x32e),'common':{'name':'Drift\x20Details','type':_0x1ed5c7(0x217),'role':_0x1ed5c7(0x39f),'read':!![],'write':![]},'native':{}}),await this[_0x1ed5c7(0x370)](LTM_DP_DRIFT_LAST_CHECK,{'type':_0x1ed5c7(0x32e),'common':{'name':_0x1ed5c7(0x295),'type':_0x1ed5c7(0x256),'role':'date','read':!![],'write':![]},'native':{}});}async[a0_0x14b3e5(0x363)](){const _0x155218=a0_0x14b3e5;await this[_0x155218(0x370)](_0x155218(0x2d9),{'type':_0x155218(0x376),'common':{'name':_0x155218(0x3a2)},'native':{}}),await this[_0x155218(0x370)](SYSTEM_DP_MODE,{'type':'state','common':{'name':_0x155218(0x2b1),'type':_0x155218(0x217),'role':'state','read':!![],'write':!![],'def':SYSTEM_MODES[_0x155218(0x310)],'states':{[SYSTEM_MODES['NORMAL']]:_0x155218(0x209),[SYSTEM_MODES[_0x155218(0x3a1)]]:'Urlaub',[SYSTEM_MODES[_0x155218(0x2c0)]]:'Party',[SYSTEM_MODES['GUEST']]:_0x155218(0x3a9)}},'native':{}});}async['createAllObjects'](){const _0x506c71=a0_0x14b3e5;try{await this[_0x506c71(0x363)](),await this[_0x506c71(0x1f5)](_0x506c71(0x362),{'type':_0x506c71(0x32e),'common':{'name':_0x506c71(0x3aa),'type':_0x506c71(0x22f),'role':_0x506c71(0x3c7),'read':!![],'write':![],'def':!![]},'native':{}}),await this[_0x506c71(0x1f5)](_0x506c71(0x289),{'type':'state','common':{'name':_0x506c71(0x331),'type':'string','role':'json','read':!![],'write':![]},'native':{}}),await this[_0x506c71(0x1f5)](_0x506c71(0x27b),{'type':_0x506c71(0x32e),'common':{'name':_0x506c71(0x33f),'type':'string','role':_0x506c71(0x264),'read':!![],'write':![]},'native':{}}),await this[_0x506c71(0x1f5)](_0x506c71(0x27a),{'type':'state','common':{'name':_0x506c71(0x299),'type':_0x506c71(0x22f),'role':_0x506c71(0x3b3),'read':!![],'write':!![],'def':![]},'native':{}}),await this[_0x506c71(0x1f5)](_0x506c71(0x31a),{'type':'state','common':{'name':_0x506c71(0x294),'type':_0x506c71(0x22f),'role':'button','read':!![],'write':!![],'def':![]},'native':{}}),await this[_0x506c71(0x1f5)](_0x506c71(0x369),{'type':_0x506c71(0x32e),'common':{'name':_0x506c71(0x2c3),'type':_0x506c71(0x217),'role':'json','read':!![],'write':![]},'native':{}}),await this[_0x506c71(0x1f5)](_0x506c71(0x2df),{'type':_0x506c71(0x32e),'common':{'name':_0x506c71(0x2f3),'type':'boolean','role':_0x506c71(0x2a9),'read':!![],'write':![],'def':![]},'native':{}}),await this[_0x506c71(0x1f5)](_0x506c71(0x285),{'type':_0x506c71(0x32e),'common':{'name':_0x506c71(0x2b5),'type':_0x506c71(0x22f),'role':_0x506c71(0x206),'read':!![],'write':![],'def':![]},'native':{}}),await this['setObjectNotExistsAsync']('analysis.alertReason',{'type':_0x506c71(0x32e),'common':{'name':_0x506c71(0x37c),'type':_0x506c71(0x217),'role':_0x506c71(0x1e9),'read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x506c71(0x257),{'type':_0x506c71(0x32e),'common':{'name':_0x506c71(0x1ff),'type':_0x506c71(0x217),'role':_0x506c71(0x39f),'read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync']('analysis.deviationFromBaseline',{'type':_0x506c71(0x32e),'common':{'name':_0x506c71(0x359),'type':_0x506c71(0x217),'role':_0x506c71(0x32e),'read':!![],'write':![],'def':'N/A'},'native':{}}),await this[_0x506c71(0x1f5)]('analysis.comfortSummary',{'type':'state','common':{'name':_0x506c71(0x344),'type':_0x506c71(0x217),'role':_0x506c71(0x39f),'read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x506c71(0x33a),{'type':_0x506c71(0x32e),'common':{'name':_0x506c71(0x24a),'type':_0x506c71(0x217),'role':'text','read':!![],'write':![]},'native':{}}),await this['extendObjectAsync'](_0x506c71(0x220),{'type':_0x506c71(0x376),'common':{'name':_0x506c71(0x394)},'native':{}}),await this[_0x506c71(0x1f5)](_0x506c71(0x364),{'type':_0x506c71(0x32e),'common':{'name':'Pattern\x20Detected','type':_0x506c71(0x22f),'role':_0x506c71(0x3c7),'read':!![],'write':![],'def':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x506c71(0x2e9),{'type':_0x506c71(0x32e),'common':{'name':'Description','type':_0x506c71(0x217),'role':_0x506c71(0x39f),'read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x506c71(0x315),{'type':_0x506c71(0x32e),'common':{'name':'Action','type':_0x506c71(0x217),'role':'text','read':!![],'write':![]},'native':{}}),await this[_0x506c71(0x1f5)]('analysis.analysisHistory',{'type':'state','common':{'name':_0x506c71(0x215),'type':_0x506c71(0x217),'role':_0x506c71(0x264),'read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x506c71(0x1f5)]('analysis.feedbackHistory',{'type':_0x506c71(0x32e),'common':{'name':_0x506c71(0x1dc),'type':_0x506c71(0x217),'role':'json','read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x506c71(0x370)](_0x506c71(0x3bd),{'type':'channel','common':{'name':_0x506c71(0x381)},'native':{}}),await this[_0x506c71(0x1f5)](_0x506c71(0x358),{'type':_0x506c71(0x32e),'common':{'name':'Sleep\x20Score\x20(0-100)','type':_0x506c71(0x256),'role':_0x506c71(0x3ac),'read':!![],'write':![],'def':0x0},'native':{}}),await this[_0x506c71(0x1f5)](_0x506c71(0x34d),{'type':_0x506c71(0x32e),'common':{'name':_0x506c71(0x336),'type':_0x506c71(0x217),'role':_0x506c71(0x39f),'read':!![],'write':![],'def':_0x506c71(0x249)},'native':{}}),await this[_0x506c71(0x1f5)]('analysis.health.notes',{'type':_0x506c71(0x32e),'common':{'name':'Health\x20Notes','type':_0x506c71(0x217),'role':_0x506c71(0x39f),'read':!![],'write':![],'def':''},'native':{}}),await this[_0x506c71(0x378)](),await this[_0x506c71(0x339)]();}catch(_0x2df347){this[_0x506c71(0x2eb)][_0x506c71(0x2f9)](_0x506c71(0x390)+_0x2df347[_0x506c71(0x3a3)]);}}async['onReady'](){const _0x450931=a0_0x14b3e5;this['log'][_0x450931(0x2a5)](_0x450931(0x373)+this[_0x450931(0x34e)]+')');try{const _0x5d64b8=[_0x450931(0x31b),'analysis.history_debug_01',_0x450931(0x260),_0x450931(0x345),_0x450931(0x35a),'events.history_debug_00',_0x450931(0x28e),_0x450931(0x325),_0x450931(0x2ec),'events.history_debug_04'];for(const _0x3e9ec4 of _0x5d64b8){try{const _0x5cb89f=await this[_0x450931(0x356)](_0x3e9ec4);_0x5cb89f&&await this[_0x450931(0x1fc)](_0x3e9ec4);}catch(_0x3fe382){}}}catch(_0x21c9d7){}this[_0x450931(0x207)][_0x450931(0x3b7)]=this[_0x450931(0x207)][_0x450931(0x3b7)]||'';try{this[_0x450931(0x231)]=await this[_0x450931(0x274)](this[_0x450931(0x207)][_0x450931(0x3b7)]);}catch(_0x4ddf51){this['log'][_0x450931(0x2f9)]('License\x20Check\x20failed:\x20'+_0x4ddf51[_0x450931(0x3a3)]);}if(!this[_0x450931(0x207)][_0x450931(0x2ea)]||this[_0x450931(0x207)][_0x450931(0x2ea)]<0.1)this[_0x450931(0x207)][_0x450931(0x2ea)]=0xc;try{await this[_0x450931(0x383)]();}catch(_0x4fc2a5){this[_0x450931(0x2eb)][_0x450931(0x2f9)](_0x450931(0x350)+_0x4fc2a5[_0x450931(0x3a3)]);}try{const _0x14094d=await this[_0x450931(0x354)](_0x450931(0x3a6));_0x14094d&&_0x14094d[_0x450931(0x1f1)]&&(this[_0x450931(0x24c)]={'latitude':_0x14094d[_0x450931(0x1f1)][_0x450931(0x3bf)]||0x0,'longitude':_0x14094d[_0x450931(0x1f1)]['longitude']||0x0,'city':_0x14094d['common']['city']||''});}catch(_0x3c1192){}if(this[_0x450931(0x207)][_0x450931(0x270)])try{this['genAI']=new GoogleGenerativeAI(this[_0x450931(0x207)][_0x450931(0x270)]),this['geminiModel']=this['genAI']['getGenerativeModel']({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':'application/json'}}),this['log'][_0x450931(0x2a5)](_0x450931(0x2be));}catch(_0xc8b57c){this[_0x450931(0x2eb)][_0x450931(0x2f9)](_0x450931(0x2bb)+_0xc8b57c[_0x450931(0x3a3)]);}try{await this['createAllObjects']();}catch(_0x1f68cf){this['log'][_0x450931(0x2f9)](_0x450931(0x3b6)+_0x1f68cf[_0x450931(0x3a3)]);}try{await this[_0x450931(0x2c6)]();}catch(_0x30dbcd){this['log'][_0x450931(0x2f9)]('loadSystemMode\x20failed:\x20'+_0x30dbcd['message']);}try{await this[_0x450931(0x2ca)]();}catch(_0x5cd472){this[_0x450931(0x2eb)][_0x450931(0x2f9)](_0x450931(0x2cb)+_0x5cd472[_0x450931(0x3a3)]);}try{await this['loadDailyDigests']();}catch(_0x296411){this[_0x450931(0x2eb)][_0x450931(0x2f9)](_0x450931(0x302)+_0x296411[_0x450931(0x3a3)]);}this[_0x450931(0x271)](_0x450931(0x27a)),this[_0x450931(0x271)](LTM_DP_TRIGGER_DIGEST),this[_0x450931(0x271)](_0x450931(0x233)),this[_0x450931(0x271)](_0x450931(0x31a));const _0x7799a4=this[_0x450931(0x207)][_0x450931(0x2ce)];if(_0x7799a4&&_0x7799a4['length']>0x0){this[_0x450931(0x2eb)]['info'](_0x450931(0x247)+_0x7799a4[_0x450931(0x2db)]+_0x450931(0x28a));for(const _0x183df9 of _0x7799a4){if(_0x183df9['id']){await this['subscribeForeignStatesAsync'](_0x183df9['id']);try{const _0x435697=await this[_0x450931(0x309)](_0x183df9['id']);if(_0x435697)this[_0x450931(0x1f3)][_0x183df9['id']]=_0x435697['val'];}catch(_0x54d551){}}}}const _0x14a5d1=this['config']['presenceDevices']||[];if(_0x14a5d1[_0x450931(0x2db)]>0x0){this[_0x450931(0x2eb)][_0x450931(0x2a5)]('Subscribing\x20to\x20'+_0x14a5d1['length']+_0x450931(0x3ad));for(const _0x44e9cf of _0x14a5d1){await this[_0x450931(0x32b)](_0x44e9cf);}try{await this['checkWifiPresence']();}catch(_0xfde561){}}if(this[_0x450931(0x303)])clearInterval(this[_0x450931(0x303)]);const _0x178c37=this[_0x450931(0x207)][_0x450931(0x242)]||0xf;_0x178c37>0x0&&(this[_0x450931(0x2eb)][_0x450931(0x2a5)](_0x450931(0x225)+_0x178c37+'\x20min).\x20Watchdog\x20Limit:\x20'+this[_0x450931(0x207)][_0x450931(0x2ea)]+'h.'),this[_0x450931(0x303)]=setInterval(()=>{const _0x182bfc=_0x450931;try{this[_0x182bfc(0x3cd)]();}catch(_0x17b962){this[_0x182bfc(0x2eb)]['error']('Autopilot\x20error:\x20'+_0x17b962[_0x182bfc(0x3a3)]);}},_0x178c37*0x3c*0x3e8)),this[_0x450931(0x254)](),this[_0x450931(0x22b)](),this[_0x450931(0x386)](),this[_0x450931(0x34a)]();}async['loadSystemMode'](){const _0xeb189f=a0_0x14b3e5;try{const _0x2c9b8d=await this[_0xeb189f(0x2bd)](SYSTEM_DP_MODE);_0x2c9b8d&&_0x2c9b8d[_0xeb189f(0x29c)]&&Object[_0xeb189f(0x341)](SYSTEM_MODES)[_0xeb189f(0x26b)](_0x2c9b8d[_0xeb189f(0x29c)])?this[_0xeb189f(0x1ec)]=_0x2c9b8d['val']:(this[_0xeb189f(0x1ec)]=SYSTEM_MODES['NORMAL'],await this['setStateAsync'](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0xeb189f(0x310)],'ack':!![]}));}catch(_0x44cdcd){this[_0xeb189f(0x1ec)]=SYSTEM_MODES['NORMAL'];}}async[a0_0x14b3e5(0x2ca)](){const _0x1b6aee=a0_0x14b3e5;try{const _0x5322b9=await this[_0x1b6aee(0x2bd)](LTM_DP_RAW_LOG);if(_0x5322b9&&_0x5322b9['val'])this[_0x1b6aee(0x355)]=JSON[_0x1b6aee(0x2d5)](_0x5322b9[_0x1b6aee(0x29c)]);}catch(_0xac32b4){this['rawEventLog']=[];}}async['loadDailyDigests'](){const _0x4f827c=a0_0x14b3e5;try{const _0x41250e=await this['getStateAsync'](LTM_DP_DAILY_DIGESTS);if(_0x41250e&&_0x41250e[_0x4f827c(0x29c)])this[_0x4f827c(0x27e)]=JSON['parse'](_0x41250e[_0x4f827c(0x29c)]);}catch(_0xd0d78f){this['dailyDigests']=[];}await this[_0x4f827c(0x24d)]();}async[a0_0x14b3e5(0x24d)](){const _0x1836c2=a0_0x14b3e5;if(!this['isProVersion']){await this['setStateAsync'](LTM_DP_BASELINE_STATUS,{'val':'Deaktiviert\x20(Pro-Feature)','ack':!![]});return;}const _0x5ee12f=this[_0x1836c2(0x27e)][_0x1836c2(0x2db)]>=(this[_0x1836c2(0x207)][_0x1836c2(0x37d)]||0x7)?_0x1836c2(0x252)+this[_0x1836c2(0x27e)]['length']+_0x1836c2(0x389):_0x1836c2(0x357)+this['dailyDigests'][_0x1836c2(0x2db)]+'/'+(this[_0x1836c2(0x207)][_0x1836c2(0x37d)]||0x7)+')';await this[_0x1836c2(0x38e)](LTM_DP_BASELINE_STATUS,{'val':_0x5ee12f,'ack':!![]});}async[a0_0x14b3e5(0x282)](){const _0x4d3d37=a0_0x14b3e5;try{const _0xbb3fa7=this['config']['presenceDevices']||[];let _0x2e6c2a=![];for(const _0x37b5bc of _0xbb3fa7){try{const _0x5efd6b=await this[_0x4d3d37(0x309)](_0x37b5bc);if(_0x5efd6b&&(_0x5efd6b['val']===!![]||_0x5efd6b[_0x4d3d37(0x29c)]===_0x4d3d37(0x2cf)||_0x5efd6b['val']===0x1)){_0x2e6c2a=!![];break;}}catch(_0x3ea927){}}return _0x2e6c2a&&(this[_0x4d3d37(0x25e)]&&(this[_0x4d3d37(0x2eb)]['info'](_0x4d3d37(0x38d)),this[_0x4d3d37(0x245)]()),!this[_0x4d3d37(0x23f)]&&this['currentSystemMode']===SYSTEM_MODES[_0x4d3d37(0x310)]&&this[_0x4d3d37(0x2d1)](!![])),_0x2e6c2a;}catch(_0x10437d){return this[_0x4d3d37(0x2eb)][_0x4d3d37(0x2f9)](_0x4d3d37(0x3c5)+_0x10437d[_0x4d3d37(0x3a3)]),![];}}[a0_0x14b3e5(0x254)](){const _0x1c0ad8=a0_0x14b3e5;try{if(this[_0x1c0ad8(0x1f6)])this[_0x1c0ad8(0x1f6)]['cancel']();if(!this['isProVersion']){this['setStateAsync'](LTM_DP_STATUS,{'val':_0x1c0ad8(0x30d),'ack':!![]});return;}this[_0x1c0ad8(0x1f6)]=schedule[_0x1c0ad8(0x296)](LTM_SCHEDULE,()=>this['createDailyDigest']());}catch(_0x23597c){this[_0x1c0ad8(0x2eb)][_0x1c0ad8(0x2f9)](_0x1c0ad8(0x259)+_0x23597c[_0x1c0ad8(0x3a3)]);}}['setupModeResetScheduler'](){const _0x22d3bd=a0_0x14b3e5;try{if(this['modeResetJob'])this['modeResetJob'][_0x22d3bd(0x2e0)]();this[_0x22d3bd(0x2b2)]=schedule[_0x22d3bd(0x296)](MODE_RESET_SCHEDULE,async()=>{const _0x3c457e=_0x22d3bd;await this[_0x3c457e(0x2c6)](),AUTO_RESET_MODES[_0x3c457e(0x26b)](this[_0x3c457e(0x1ec)])&&await this[_0x3c457e(0x38e)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x3c457e(0x310)],'ack':![]});});}catch(_0x194b4d){this[_0x22d3bd(0x2eb)][_0x22d3bd(0x2f9)](_0x22d3bd(0x244)+_0x194b4d[_0x22d3bd(0x3a3)]);}}[a0_0x14b3e5(0x386)](){const _0x2d3502=a0_0x14b3e5;try{if(this[_0x2d3502(0x2c1)])clearInterval(this[_0x2d3502(0x2c1)]);if(!this[_0x2d3502(0x231)])return;this[_0x2d3502(0x2c1)]=setInterval(()=>this[_0x2d3502(0x2d4)](),(this['config'][_0x2d3502(0x248)]||0x18)*0x36ee80),setTimeout(()=>this[_0x2d3502(0x2d4)](),0x1388);}catch(_0x9e9fd4){this[_0x2d3502(0x2eb)]['error'](_0x2d3502(0x23a)+_0x9e9fd4[_0x2d3502(0x3a3)]);}}[a0_0x14b3e5(0x34a)](){const _0x45c333=a0_0x14b3e5;try{if(this['briefingJob'])this['briefingJob'][_0x45c333(0x2e0)]();if(!this[_0x45c333(0x207)]['briefingEnabled'])return;const _0x56a20f=(this[_0x45c333(0x207)]['briefingTime']||'08:00')[_0x45c333(0x37e)](':'),_0x3cc13d=parseInt(_0x56a20f[0x0])||0x8,_0x10bacf=parseInt(_0x56a20f[0x1])||0x0,_0x1e87ad=_0x10bacf+'\x20'+_0x3cc13d+_0x45c333(0x2c5);this['log'][_0x45c333(0x2a5)]('Scheduling\x20Morning\x20Briefing\x20for\x20'+_0x3cc13d+':'+(_0x10bacf<0xa?'0'+_0x10bacf:_0x10bacf)),this[_0x45c333(0x276)]=schedule['scheduleJob'](_0x1e87ad,()=>{const _0xe6e8b9=_0x45c333;this[_0xe6e8b9(0x20d)]();});}catch(_0x3b9ac0){this[_0x45c333(0x2eb)][_0x45c333(0x2f9)](_0x45c333(0x210)+_0x3b9ac0[_0x45c333(0x3a3)]);}}async[a0_0x14b3e5(0x2d4)](){const _0x27acf6=a0_0x14b3e5;if(!this['isProVersion']||!this['geminiModel'])return;const _0x5ad92d=this[_0x27acf6(0x207)][_0x27acf6(0x224)]||0xe;if(this[_0x27acf6(0x27e)]['length']<_0x5ad92d+(this[_0x27acf6(0x207)][_0x27acf6(0x37d)]||0x7)){await this[_0x27acf6(0x38e)](LTM_DP_DRIFT_STATUS,{'val':_0x27acf6(0x2c8),'ack':!![]});return;}const _0x2e7b2d=this['dailyDigests'][_0x27acf6(0x23b)](-_0x5ad92d),_0x200fa2=this[_0x27acf6(0x27e)][_0x27acf6(0x23b)](0x0,this[_0x27acf6(0x27e)][_0x27acf6(0x2db)]-_0x5ad92d),_0x9a63ad=_0x27acf6(0x30a)+JSON[_0x27acf6(0x297)](_0x200fa2)+'\x0a\x0aA\x20(STB):\x0a'+JSON['stringify'](_0x2e7b2d);try{const _0x4ea37f=await this['geminiModel'][_0x27acf6(0x308)](_0x9a63ad),_0x5e172b=JSON[_0x27acf6(0x2d5)](_0x4ea37f[_0x27acf6(0x290)]['text']()[_0x27acf6(0x3c6)](/```json|```/g,'')[_0x27acf6(0x31c)]());_0x5e172b[_0x27acf6(0x318)]&&(await this[_0x27acf6(0x38e)](LTM_DP_DRIFT_STATUS,{'val':_0x5e172b['baselineDrift'],'ack':!![]}),await this['setStateAsync'](LTM_DP_DRIFT_DETAILS,{'val':_0x5e172b[_0x27acf6(0x2d8)],'ack':!![]}),await this[_0x27acf6(0x38e)](LTM_DP_DRIFT_LAST_CHECK,{'val':Date[_0x27acf6(0x280)](),'ack':!![]}));}catch(_0xbe83c0){}}async['saveRawEventLog'](){const _0x327668=a0_0x14b3e5;this[_0x327668(0x355)][_0x327668(0x2db)]>RAW_LOG_MAX_SIZE&&this[_0x327668(0x355)][_0x327668(0x291)](0x0,this['rawEventLog']['length']-RAW_LOG_MAX_SIZE),await this[_0x327668(0x38e)](LTM_DP_RAW_LOG,{'val':JSON[_0x327668(0x297)](this[_0x327668(0x355)]),'ack':!![]});}async['saveDailyDigests'](_0x2ae2aa=!![]){const _0x1dbd08=a0_0x14b3e5,_0x2ae857=this[_0x1dbd08(0x207)][_0x1dbd08(0x317)]||0x3c;this[_0x1dbd08(0x27e)][_0x1dbd08(0x2db)]>_0x2ae857&&this['dailyDigests']['splice'](0x0,this['dailyDigests'][_0x1dbd08(0x2db)]-_0x2ae857);await this['setStateAsync'](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x1dbd08(0x297)](this[_0x1dbd08(0x27e)]),'ack':!![]});if(_0x2ae2aa)await this['updateBaselineStatus']();}async['updateAnalysisHistory'](_0x33ca90){const _0xb76861=a0_0x14b3e5;this['analysisHistory'][_0xb76861(0x2ac)](_0x33ca90);if(this[_0xb76861(0x1ea)][_0xb76861(0x2db)]>ANALYSIS_HISTORY_MAX_SIZE)this[_0xb76861(0x1ea)][_0xb76861(0x37b)]();await this[_0xb76861(0x38e)](_0xb76861(0x2af),{'val':JSON[_0xb76861(0x297)](this[_0xb76861(0x1ea)]),'ack':!![]});}async[a0_0x14b3e5(0x372)](){const _0x1794a0=a0_0x14b3e5;await this[_0x1794a0(0x38e)]('analysis.activitySummary',{'val':_0x1794a0(0x393),'ack':!![]}),await this[_0x1794a0(0x38e)]('analysis.deviationFromBaseline',{'val':this[_0x1794a0(0x231)]?_0x1794a0(0x2ed):'N/A\x20(Pro\x20Feature)','ack':!![]}),await this[_0x1794a0(0x38e)](_0x1794a0(0x2df),{'val':![],'ack':!![]}),await this[_0x1794a0(0x38e)]('analysis.isEmergency',{'val':![],'ack':!![]}),this[_0x1794a0(0x2ae)]=![];}async[a0_0x14b3e5(0x3c2)](_0x39c710){const _0xf8ee1c=a0_0x14b3e5;if(typeof _0x39c710==='object'&&_0x39c710[_0xf8ee1c(0x3a3)])try{if(_0x39c710[_0xf8ee1c(0x313)]===_0xf8ee1c(0x23d)){if(!_0x39c710['message'][_0xf8ee1c(0x307)])return this['sendTo'](_0x39c710[_0xf8ee1c(0x33e)],_0x39c710[_0xf8ee1c(0x313)],{'success':![],'message':'No\x20Key'},_0x39c710[_0xf8ee1c(0x24f)]);try{const _0xac111b=new GoogleGenerativeAI(_0x39c710[_0xf8ee1c(0x3a3)][_0xf8ee1c(0x307)])[_0xf8ee1c(0x20c)]({'model':_0xf8ee1c(0x32f)});await _0xac111b[_0xf8ee1c(0x308)]('test'),this[_0xf8ee1c(0x2f4)](_0x39c710[_0xf8ee1c(0x33e)],_0x39c710[_0xf8ee1c(0x313)],{'success':!![],'message':_0xf8ee1c(0x1d9)},_0x39c710[_0xf8ee1c(0x24f)]);}catch(_0x4ee3d7){this['sendTo'](_0x39c710[_0xf8ee1c(0x33e)],_0x39c710[_0xf8ee1c(0x313)],{'success':![],'message':_0x4ee3d7[_0xf8ee1c(0x3a3)]},_0x39c710[_0xf8ee1c(0x24f)]);}}else{if(_0x39c710['command']===_0xf8ee1c(0x2e1)){const _0x2ace58=await this[_0xf8ee1c(0x222)]('[Test]\x20Notification',!![]);this[_0xf8ee1c(0x2f4)](_0x39c710['from'],_0x39c710[_0xf8ee1c(0x313)],{'success':_0x2ace58>0x0,'message':_0x2ace58+_0xf8ee1c(0x20a)},_0x39c710[_0xf8ee1c(0x24f)]);}else{if(_0x39c710[_0xf8ee1c(0x313)]===_0xf8ee1c(0x24e)){if(!this[_0xf8ee1c(0x231)])return this[_0xf8ee1c(0x2f4)](_0x39c710['from'],_0x39c710[_0xf8ee1c(0x313)],{'success':![],'isPro':![]},_0x39c710['callback']);let _0x123fce={'status':_0xf8ee1c(0x304),'details':'','lastCheck':0x0};try{_0x123fce[_0xf8ee1c(0x1f4)]=(await this[_0xf8ee1c(0x2bd)](LTM_DP_DRIFT_STATUS))[_0xf8ee1c(0x29c)],_0x123fce[_0xf8ee1c(0x273)]=(await this[_0xf8ee1c(0x2bd)](LTM_DP_DRIFT_DETAILS))['val'],_0x123fce[_0xf8ee1c(0x202)]=(await this[_0xf8ee1c(0x2bd)](LTM_DP_DRIFT_LAST_CHECK))[_0xf8ee1c(0x29c)];}catch(_0x1f32ce){}this['sendTo'](_0x39c710[_0xf8ee1c(0x33e)],_0x39c710[_0xf8ee1c(0x313)],{'success':!![],'isPro':!![],'dailyDigests':this[_0xf8ee1c(0x27e)],'driftAnalysis':_0x123fce,'analysisHistory':this[_0xf8ee1c(0x1ea)]},_0x39c710[_0xf8ee1c(0x24f)]);}else{if(_0x39c710[_0xf8ee1c(0x313)]===_0xf8ee1c(0x208)){const _0x5f2ce3=await this[_0xf8ee1c(0x211)]('enum.functions.*',_0xf8ee1c(0x2dd)),_0x416ceb=[];if(_0x5f2ce3)for(const _0x20cc5e in _0x5f2ce3){const _0xd0c52d=_0x5f2ce3[_0x20cc5e],_0x69996e=(_0xd0c52d[_0xf8ee1c(0x1f1)]&&typeof _0xd0c52d['common']['name']==='object'?_0xd0c52d[_0xf8ee1c(0x1f1)][_0xf8ee1c(0x316)]['de']:_0xd0c52d[_0xf8ee1c(0x1f1)][_0xf8ee1c(0x316)])||_0xd0c52d[_0xf8ee1c(0x1f1)][_0xf8ee1c(0x316)];_0x416ceb['push']({'id':_0x20cc5e,'name':_0x69996e});}this[_0xf8ee1c(0x2f4)](_0x39c710[_0xf8ee1c(0x33e)],_0x39c710['command'],{'success':!![],'enums':_0x416ceb},_0x39c710[_0xf8ee1c(0x24f)]);}else{if(_0x39c710[_0xf8ee1c(0x313)]===_0xf8ee1c(0x1da))try{const _0x31ba81=await this[_0xf8ee1c(0x2c2)](_0x39c710['message']||{});this[_0xf8ee1c(0x2f4)](_0x39c710[_0xf8ee1c(0x33e)],_0x39c710[_0xf8ee1c(0x313)],{'success':!![],'devices':_0x31ba81},_0x39c710[_0xf8ee1c(0x24f)]);}catch(_0x42c755){this[_0xf8ee1c(0x2f4)](_0x39c710[_0xf8ee1c(0x33e)],_0x39c710[_0xf8ee1c(0x313)],{'success':![],'error':_0x42c755[_0xf8ee1c(0x3a3)]},_0x39c710[_0xf8ee1c(0x24f)]);}else{if(_0x39c710['command']==='submitFeedback'){const {historyId:_0x16a75c,rating:_0x513138,comment:_0x1000d8,alertReason:_0x24545e}=_0x39c710['message'];_0x16a75c&&_0x513138?(await this[_0xf8ee1c(0x25a)]({'timestamp':Date[_0xf8ee1c(0x280)](),'historyId':_0x16a75c,'rating':_0x513138,'comment':_0x1000d8,'alertReason':_0x24545e}),this[_0xf8ee1c(0x2f4)](_0x39c710[_0xf8ee1c(0x33e)],_0x39c710[_0xf8ee1c(0x313)],{'success':!![]},_0x39c710['callback'])):this[_0xf8ee1c(0x2f4)](_0x39c710[_0xf8ee1c(0x33e)],_0x39c710[_0xf8ee1c(0x313)],{'success':![],'error':'Missing\x20data'},_0x39c710[_0xf8ee1c(0x24f)]);}else{if(_0x39c710[_0xf8ee1c(0x313)]==='testContext'){this[_0xf8ee1c(0x2eb)][_0xf8ee1c(0x2a5)](_0xf8ee1c(0x26a));const _0x372c8f=await this['getWeatherContext'](),_0x3a6fe7=await this[_0xf8ee1c(0x320)]();this[_0xf8ee1c(0x2f4)](_0x39c710[_0xf8ee1c(0x33e)],_0x39c710[_0xf8ee1c(0x313)],{'success':!![],'weather':_0x372c8f,'calendar':_0x3a6fe7},_0x39c710[_0xf8ee1c(0x24f)]);}else{if(_0x39c710[_0xf8ee1c(0x313)]===_0xf8ee1c(0x2a1)){const _0x4f7eef=_0x39c710['message']['instance'];if(!_0x4f7eef)return this['sendTo'](_0x39c710['from'],_0x39c710[_0xf8ee1c(0x313)],{'success':![],'error':'No\x20instance'},_0x39c710['callback']);const _0x73c39c=await this[_0xf8ee1c(0x2a1)](_0x4f7eef);this[_0xf8ee1c(0x2f4)](_0x39c710[_0xf8ee1c(0x33e)],_0x39c710[_0xf8ee1c(0x313)],{'success':!![],'names':_0x73c39c},_0x39c710['callback']);}}}}}}}}}catch(_0x374c4e){this[_0xf8ee1c(0x2eb)]['error']('Error\x20in\x20onMessage\x20command\x20'+_0x39c710[_0xf8ee1c(0x313)]+':\x20'+_0x374c4e[_0xf8ee1c(0x3a3)]);if(_0x39c710['callback'])this['sendTo'](_0x39c710[_0xf8ee1c(0x33e)],_0x39c710[_0xf8ee1c(0x313)],{'success':![],'error':_0x374c4e[_0xf8ee1c(0x3a3)]},_0x39c710[_0xf8ee1c(0x24f)]);}}async[a0_0x14b3e5(0x2c2)](_0x23fb9f={}){const _0x35c874=a0_0x14b3e5;this['log'][_0x35c874(0x2a5)](_0x35c874(0x201)+JSON[_0x35c874(0x297)](_0x23fb9f));const _0x4c8c21=[],_0x1998c5=_0x23fb9f[_0x35c874(0x21d)]!==![],_0x554b62=_0x23fb9f[_0x35c874(0x2aa)]!==![],_0xe22470=_0x23fb9f['lights']!==![],_0x513765=_0x23fb9f['temperature']===!![],_0x17c56a=_0x23fb9f[_0x35c874(0x22c)]===!![],_0x366cc1=_0x23fb9f['selectedFunctionIds']||[],_0xa8006e=await this[_0x35c874(0x211)](_0x35c874(0x2f0),_0x35c874(0x2dd)),_0x18c7e1=await this[_0x35c874(0x211)](_0x35c874(0x30f),_0x35c874(0x2dd)),_0x24fc04={},_0xd77404={},_0x3340e6={},_0x1cac98=(_0x4d90c3,_0x3df9f4,_0x222911=![])=>{const _0x3f9065=_0x35c874;if(!_0x4d90c3)return;for(const _0x43848a in _0x4d90c3){const _0x1deb4c=_0x4d90c3[_0x43848a];if(_0x1deb4c&&_0x1deb4c['common']&&_0x1deb4c[_0x3f9065(0x1f1)][_0x3f9065(0x261)]){const _0x56c459=(typeof _0x1deb4c[_0x3f9065(0x1f1)][_0x3f9065(0x316)]==='object'?_0x1deb4c[_0x3f9065(0x1f1)][_0x3f9065(0x316)]['de']:_0x1deb4c[_0x3f9065(0x1f1)][_0x3f9065(0x316)])||_0x1deb4c[_0x3f9065(0x1f1)]['name'];if(_0x222911)_0x3340e6[_0x43848a]=_0x56c459;for(const _0x3f1989 of _0x1deb4c[_0x3f9065(0x1f1)][_0x3f9065(0x261)]){if(_0x222911){if(!_0x3df9f4[_0x3f1989])_0x3df9f4[_0x3f1989]=[];_0x3df9f4[_0x3f1989]['push'](_0x43848a);}else _0x3df9f4[_0x3f1989]=_0x56c459;}}}};_0x1cac98(_0xa8006e,_0x24fc04),_0x1cac98(_0x18c7e1,_0xd77404,!![]);const _0x2431bf=await this['getForeignObjectsAsync']('*',_0x35c874(0x32e)),_0x179f8f=[_0x35c874(0x2a4),_0x35c874(0x35f),_0x35c874(0x22e),_0x35c874(0x27c),_0x35c874(0x223),_0x35c874(0x3ba),_0x35c874(0x34f),'CONFIG_PENDING',_0x35c874(0x1de),'WORKING',_0x35c874(0x1ed),_0x35c874(0x2b8),_0x35c874(0x2f8),'VIRTUAL_CHANNEL',_0x35c874(0x38f),_0x35c874(0x235),_0x35c874(0x3c0),_0x35c874(0x326),_0x35c874(0x287),_0x35c874(0x36f),_0x35c874(0x3af),_0x35c874(0x243),_0x35c874(0x269),_0x35c874(0x314),_0x35c874(0x343),_0x35c874(0x3b5),_0x35c874(0x2da),_0x35c874(0x2de),'version','connection',_0x35c874(0x2a5),_0x35c874(0x239),'last_seen','last\x20action','archetype',_0x35c874(0x268),_0x35c874(0x284),_0x35c874(0x20b),'effect','xy','ct','hue',_0x35c874(0x330),_0x35c874(0x39d),_0x35c874(0x26f),_0x35c874(0x283),_0x35c874(0x371),'command',_0x35c874(0x2b4),_0x35c874(0x32c),_0x35c874(0x2a0),_0x35c874(0x35d),'scriptEnabled','scriptProblem','javascript.0.script',_0x35c874(0x236),_0x35c874(0x375),_0x35c874(0x20f),_0x35c874(0x30b),_0x35c874(0x1ee),'info',_0x35c874(0x264)];if(!_0x17c56a)_0x179f8f[_0x35c874(0x241)]('wetter',_0x35c874(0x22c),'wind',_0x35c874(0x232),'uv',_0x35c874(0x347),'precip');const _0x4e431b=[_0x35c874(0x2fb),_0x35c874(0x292),_0x35c874(0x200),_0x35c874(0x26e),_0x35c874(0x28c),_0x35c874(0x337),_0x35c874(0x272),_0x35c874(0x1fa)];if(!_0x17c56a)_0x4e431b[_0x35c874(0x241)](_0x35c874(0x2fa),_0x35c874(0x27d),_0x35c874(0x2ff),_0x35c874(0x2d7),_0x35c874(0x1eb));const _0x1997c4=(_0x508a3d,_0x3e7436,_0x2abfc8=![])=>{const _0x2167d5=_0x35c874,_0x42ac99=_0x508a3d['split']('.');if(_0x3e7436[_0x508a3d])return _0x3e7436[_0x508a3d];if(_0x42ac99[_0x2167d5(0x2db)]>0x2&&_0x3e7436[_0x42ac99[_0x2167d5(0x23b)](0x0,-0x1)[_0x2167d5(0x38b)]('.')])return _0x3e7436[_0x42ac99['slice'](0x0,-0x1)['join']('.')];if(_0x42ac99[_0x2167d5(0x2db)]>0x3&&_0x3e7436[_0x42ac99['slice'](0x0,-0x2)[_0x2167d5(0x38b)]('.')])return _0x3e7436[_0x42ac99[_0x2167d5(0x23b)](0x0,-0x2)[_0x2167d5(0x38b)]('.')];return _0x2abfc8?[]:null;};for(const _0x1bebec in _0x2431bf){const _0x167c60=_0x2431bf[_0x1bebec];if(!_0x167c60||!_0x167c60[_0x35c874(0x1f1)])continue;if(_0x4e431b[_0x35c874(0x39a)](_0x34bea5=>_0x1bebec[_0x35c874(0x3c4)](_0x34bea5)))continue;const _0x468403=_0x167c60['common'][_0x35c874(0x33c)]||'',_0x3b3488=(_0x167c60[_0x35c874(0x1f1)]['name']&&typeof _0x167c60[_0x35c874(0x1f1)]['name']===_0x35c874(0x35c)?_0x167c60[_0x35c874(0x1f1)][_0x35c874(0x316)]['de']:_0x167c60[_0x35c874(0x1f1)][_0x35c874(0x316)])||'',_0x56cbf5=_0x3b3488?_0x3b3488[_0x35c874(0x277)]():'',_0x12909d=_0x1bebec[_0x35c874(0x277)](),_0xeca320=_0x1997c4(_0x1bebec,_0x24fc04),_0x57dc88=_0x1997c4(_0x1bebec,_0xd77404,!![]);let _0x1d1b0a=null,_0x55783f=![];if(_0x57dc88&&_0x57dc88[_0x35c874(0x2db)]>0x0){const _0x4ab20a=_0x57dc88[_0x35c874(0x3b2)](_0x4275ba=>_0x366cc1[_0x35c874(0x26b)](_0x4275ba));if(_0x4ab20a){_0x55783f=!![];const _0x32f848=_0x3340e6[_0x4ab20a];if(_0x12909d[_0x35c874(0x26b)]('presence')||_0x12909d['includes'](_0x35c874(0x21d)))_0x1d1b0a='Bewegung';else{if(_0x12909d['includes']('smoke')||_0x12909d['includes'](_0x35c874(0x361))||_0x56cbf5[_0x35c874(0x26b)](_0x35c874(0x240)))_0x1d1b0a=_0x35c874(0x275);else{if(_0x12909d[_0x35c874(0x26b)](_0x35c874(0x32e))||_0x12909d[_0x35c874(0x26b)](_0x35c874(0x227))||_0x12909d[_0x35c874(0x26b)]('on'))_0x1d1b0a='Schalter/Licht';else _0x1d1b0a=_0x32f848;}}}}if(!_0x55783f&&!_0x17c56a){if(_0x179f8f[_0x35c874(0x39a)](_0x9599a7=>_0x56cbf5[_0x35c874(0x26b)](_0x9599a7)||_0x1bebec[_0x35c874(0x2e3)]()['includes'](_0x9599a7)))continue;}if(!_0x1d1b0a&&_0x1998c5){if(_0x468403[_0x35c874(0x26b)]('sensor.motion')||_0x468403['includes'](_0x35c874(0x214))||_0x56cbf5[_0x35c874(0x26b)]('bewegung')||_0x56cbf5[_0x35c874(0x26b)](_0x35c874(0x1e0)))_0x1d1b0a=_0x35c874(0x23e);}!_0x1d1b0a&&_0x554b62&&((_0x12909d[_0x35c874(0x26b)](_0x35c874(0x366))||_0x468403[_0x35c874(0x26b)](_0x35c874(0x1e1))||_0x468403[_0x35c874(0x26b)](_0x35c874(0x387))||(_0x56cbf5['includes'](_0x35c874(0x253))||_0x56cbf5[_0x35c874(0x26b)]('tür'))&&!_0x56cbf5[_0x35c874(0x26b)]('temp')&&!_0x56cbf5[_0x35c874(0x26b)]('griff')&&(_0x167c60['common'][_0x35c874(0x298)]===_0x35c874(0x22f)||_0x167c60['common']['type']===_0x35c874(0x256)))&&(_0x1d1b0a='Fenster/Tür'));if(!_0x1d1b0a&&_0xe22470){if((_0x468403[_0x35c874(0x26b)]('switch.light')||_0x468403['includes']('level.dimmer')||_0x56cbf5[_0x35c874(0x26b)](_0x35c874(0x2ba))||_0x56cbf5[_0x35c874(0x26b)](_0x35c874(0x3ca)))&&_0x167c60['common']['write'])_0x1d1b0a='Licht';}if(!_0x1d1b0a&&_0x513765){if(_0x468403['includes'](_0x35c874(0x39c))||_0x468403[_0x35c874(0x26b)](_0x35c874(0x1e6))||_0x56cbf5[_0x35c874(0x26b)](_0x35c874(0x32a)))_0x1d1b0a=_0x35c874(0x1f9);}if(_0x1d1b0a){let _0x14150b=_0xeca320||'';if(!_0x14150b){if(_0x56cbf5[_0x35c874(0x26b)]('bad'))_0x14150b=_0x35c874(0x306);else{if(_0x56cbf5[_0x35c874(0x26b)](_0x35c874(0x2e7)))_0x14150b=_0x35c874(0x38a);else{if(_0x56cbf5[_0x35c874(0x26b)]('wohn'))_0x14150b=_0x35c874(0x1df);else{if(_0x56cbf5[_0x35c874(0x26b)](_0x35c874(0x37f)))_0x14150b='Schlafzimmer';else{if(_0x56cbf5[_0x35c874(0x26b)]('flur')||_0x56cbf5[_0x35c874(0x26b)](_0x35c874(0x2c4)))_0x14150b=_0x35c874(0x2f6);else{if(_0x56cbf5[_0x35c874(0x26b)](_0x35c874(0x328)))_0x14150b=_0x35c874(0x300);}}}}}}let _0xdee69d=![];_0x1d1b0a===_0x35c874(0x321)&&((_0x56cbf5['includes'](_0x35c874(0x20e))||_0x56cbf5[_0x35c874(0x26b)](_0x35c874(0x39e))||_0x56cbf5[_0x35c874(0x26b)](_0x35c874(0x34c))||_0x14150b&&_0x14150b[_0x35c874(0x277)]()[_0x35c874(0x26b)]('flur')&&_0x56cbf5['includes']('tür'))&&(_0xdee69d=!![]));let _0x5311cc=0x0;if(_0x55783f)_0x5311cc+=0x1e;else{if(_0xeca320)_0x5311cc+=0x14;else{if(_0x14150b)_0x5311cc+=0xa;}}if(_0xdee69d)_0x5311cc+=0x5;_0x4c8c21[_0x35c874(0x241)]({'id':_0x1bebec,'name':_0x3b3488||_0x1bebec,'type':_0x1d1b0a,'location':_0x14150b,'logDuplicates':_0x1d1b0a==='Bewegung','isExit':_0xdee69d,'_score':_0x5311cc});}}return _0x4c8c21[_0x35c874(0x24b)]((_0x56afca,_0x1c496e)=>_0x1c496e[_0x35c874(0x221)]-_0x56afca[_0x35c874(0x221)]),_0x4c8c21;}async[a0_0x14b3e5(0x282)](){const _0x181e78=a0_0x14b3e5,_0x347872=this[_0x181e78(0x207)][_0x181e78(0x1fd)]||[];let _0x4454cf=![];for(const _0x22beb3 of _0x347872){try{const _0x5683e4=await this[_0x181e78(0x309)](_0x22beb3);if(_0x5683e4&&(_0x5683e4[_0x181e78(0x29c)]===!![]||_0x5683e4[_0x181e78(0x29c)]===_0x181e78(0x2cf)||_0x5683e4[_0x181e78(0x29c)]===0x1)){_0x4454cf=!![];break;}}catch(_0x3d3f4c){}}return _0x4454cf&&(this[_0x181e78(0x25e)]&&(this[_0x181e78(0x2eb)][_0x181e78(0x2a5)](_0x181e78(0x38d)),this[_0x181e78(0x245)]()),!this[_0x181e78(0x23f)]&&this[_0x181e78(0x1ec)]===SYSTEM_MODES[_0x181e78(0x310)]&&this['setPresence'](!![])),_0x4454cf;}async[a0_0x14b3e5(0x3c9)](_0x5efd8e,_0x3a0307){const _0x561b8d=a0_0x14b3e5;if(!_0x3a0307)return;if(_0x5efd8e===this[_0x561b8d(0x3bb)]+'.'+SYSTEM_DP_MODE){_0x3a0307[_0x561b8d(0x29c)]&&Object[_0x561b8d(0x341)](SYSTEM_MODES)[_0x561b8d(0x26b)](_0x3a0307[_0x561b8d(0x29c)])&&(this['currentSystemMode']=_0x3a0307[_0x561b8d(0x29c)],_0x3a0307[_0x561b8d(0x29c)]===SYSTEM_MODES[_0x561b8d(0x3a1)]?this[_0x561b8d(0x2d1)](![]):this[_0x561b8d(0x2d1)](!![]));if(!_0x3a0307[_0x561b8d(0x30e)])this['setState'](_0x5efd8e,{'val':this['currentSystemMode'],'ack':!![]});return;}if(!_0x3a0307[_0x561b8d(0x30e)]){_0x5efd8e[_0x561b8d(0x26b)]('analysis.trigger')&&_0x3a0307['val']&&(this[_0x561b8d(0x266)](_0x5efd8e,{'val':![],'ack':!![]}),this[_0x561b8d(0x301)]());if(_0x5efd8e[_0x561b8d(0x26b)](_0x561b8d(0x351))&&_0x3a0307[_0x561b8d(0x29c)]){this[_0x561b8d(0x266)](_0x5efd8e,{'val':![],'ack':!![]});if(this[_0x561b8d(0x231)])this[_0x561b8d(0x27f)]();}_0x5efd8e[_0x561b8d(0x26b)](_0x561b8d(0x365))&&_0x3a0307[_0x561b8d(0x29c)]&&(this[_0x561b8d(0x266)](_0x5efd8e,{'val':![],'ack':!![]}),this[_0x561b8d(0x20d)]());return;}if(this['config'][_0x561b8d(0x1fd)]&&this[_0x561b8d(0x207)]['presenceDevices']['includes'](_0x5efd8e)){await this[_0x561b8d(0x282)]();return;}const _0x4481e4=(this['config'][_0x561b8d(0x2ce)]||[])[_0x561b8d(0x3b2)](_0x3acf00=>_0x3acf00['id']===_0x5efd8e);if(_0x4481e4)this[_0x561b8d(0x352)](_0x5efd8e,_0x3a0307,_0x4481e4);}async['processSensorEvent'](_0x168467,_0x16596a,_0x22639e){const _0x212b60=a0_0x14b3e5;if(!_0x22639e[_0x212b60(0x25f)]&&this[_0x212b60(0x1f3)][_0x168467]===_0x16596a[_0x212b60(0x29c)])return;this[_0x212b60(0x1f3)][_0x168467]=_0x16596a[_0x212b60(0x29c)];if(this['isGracePeriodActive'])return;const _0x3fe267=await this[_0x212b60(0x282)]();if(_0x3fe267){if(!this[_0x212b60(0x23f)])this[_0x212b60(0x2d1)](!![]);}else{const _0x3ccd2e=_0x22639e['isExit']===!![];_0x3ccd2e?this[_0x212b60(0x21a)]():(this[_0x212b60(0x25e)]&&(this[_0x212b60(0x2eb)][_0x212b60(0x2a5)](_0x212b60(0x2b3)),this[_0x212b60(0x245)]()),!this[_0x212b60(0x23f)]&&this['currentSystemMode']===SYSTEM_MODES[_0x212b60(0x310)]&&this[_0x212b60(0x2d1)](!![]));}const _0x5bc4a1={'timestamp':_0x16596a['ts'],'id':_0x168467,'name':_0x22639e[_0x212b60(0x316)],'value':_0x16596a[_0x212b60(0x29c)],'location':_0x22639e['location'],'type':_0x22639e[_0x212b60(0x298)]};this[_0x212b60(0x2b0)][_0x212b60(0x2ac)](_0x5bc4a1);if(this['eventHistory'][_0x212b60(0x2db)]>HISTORY_MAX_SIZE)this[_0x212b60(0x2b0)][_0x212b60(0x37b)]();await this[_0x212b60(0x38e)](_0x212b60(0x289),{'val':JSON[_0x212b60(0x297)](_0x5bc4a1),'ack':!![]}),await this[_0x212b60(0x38e)]('events.history',{'val':JSON[_0x212b60(0x297)](this[_0x212b60(0x2b0)]),'ack':!![]}),this['rawEventLog'][_0x212b60(0x241)]({'timestamp':new Date(_0x16596a['ts'])[_0x212b60(0x392)](),'sensorName':_0x22639e['name'],'location':_0x22639e['location'],'value':_0x16596a['val']}),await this[_0x212b60(0x2c9)]();}[a0_0x14b3e5(0x21a)](){const _0x4be2ee=a0_0x14b3e5;this[_0x4be2ee(0x245)](),this['isGracePeriodActive']=!![],this[_0x4be2ee(0x203)]=setTimeout(()=>{const _0x501b4a=_0x4be2ee;this[_0x501b4a(0x250)]=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),this[_0x4be2ee(0x25e)]=setTimeout(()=>{const _0x366ee0=_0x4be2ee;this[_0x366ee0(0x2d1)](![]),this['exitTimer']=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}[a0_0x14b3e5(0x245)](){const _0x395b83=a0_0x14b3e5;if(this[_0x395b83(0x25e)])clearTimeout(this[_0x395b83(0x25e)]);if(this[_0x395b83(0x203)])clearTimeout(this[_0x395b83(0x203)]);this['exitTimer']=null,this['exitGraceTimer']=null,this['isGracePeriodActive']=![];}async[a0_0x14b3e5(0x2d1)](_0x272e32){const _0x2c8916=a0_0x14b3e5;if(this[_0x2c8916(0x23f)]===_0x272e32)return;this[_0x2c8916(0x23f)]=_0x272e32,await this['setStateAsync'](_0x2c8916(0x362),{'val':_0x272e32,'ack':!![]});}[a0_0x14b3e5(0x3cd)](){const _0x223dd8=a0_0x14b3e5,_0x2d4a54=this[_0x223dd8(0x207)][_0x223dd8(0x2ea)],_0x57ae67=this[_0x223dd8(0x207)]['inactivityMonitoringEnabled'],_0x5dcb24=this[_0x223dd8(0x2b0)][_0x223dd8(0x2db)]>0x0?this[_0x223dd8(0x2b0)][0x0][_0x223dd8(0x288)]:Date[_0x223dd8(0x280)](),_0x399998=(Date[_0x223dd8(0x280)]()-_0x5dcb24)/(0x3e8*0x3c*0x3c);let _0x139d3d='';_0x57ae67&&this[_0x223dd8(0x1ec)]===SYSTEM_MODES['NORMAL']&&this[_0x223dd8(0x23f)]&&(_0x399998>_0x2d4a54&&(_0x139d3d=_0x223dd8(0x332)+_0x399998[_0x223dd8(0x2ee)](0x1)+'\x20hours.\x20The\x20resident\x20might\x20be\x20incapacitated.\x20Risk\x20level:\x20HIGH.'));if(_0x139d3d){this['runGeminiAnalysis'](_0x139d3d)[_0x223dd8(0x2ab)](_0x9c5d8f=>this[_0x223dd8(0x2eb)][_0x223dd8(0x2f9)](_0x9c5d8f));return;}const _0x48d583=Date[_0x223dd8(0x280)](),_0x254148=_0x48d583-_0x5dcb24,_0x46731f=(this[_0x223dd8(0x207)]['analysisInterval']||0xf)*0x3c*0x3e8;this['eventHistory'][_0x223dd8(0x2db)]>0x0&&_0x254148<=_0x46731f?this['runGeminiAnalysis']()[_0x223dd8(0x2ab)](_0x4e0ed7=>this[_0x223dd8(0x2eb)][_0x223dd8(0x2f9)](_0x4e0ed7)):!this['lastAlertState']&&(this['setState'](_0x223dd8(0x2df),{'val':![],'ack':!![]}),this[_0x223dd8(0x266)](_0x223dd8(0x285),{'val':![],'ack':!![]}));}async['runGeminiAnalysis'](_0x23a58c=''){const _0x1f50e8=a0_0x14b3e5;if(!this[_0x1f50e8(0x2fc)])return;const _0x538ad9=this['eventHistory'][_0x1f50e8(0x2db)]>0x0?this[_0x1f50e8(0x2b0)]:[{'note':'No\x20recorded\x20events\x20yet.'}],_0x5cf899=PERSONA_MAPPING[this[_0x1f50e8(0x207)][_0x1f50e8(0x3c1)]||_0x1f50e8(0x36e)],_0x455d9e=this[_0x1f50e8(0x207)][_0x1f50e8(0x324)]||'',_0x46986b=this[_0x1f50e8(0x1ec)],_0x19f9c9=await this[_0x1f50e8(0x30c)](),_0x1c9e01=await this[_0x1f50e8(0x320)](),_0x206a36=(_0x19f9c9+'\x20'+_0x1c9e01)[_0x1f50e8(0x31c)](),_0xbc45ed=new Date(),_0x58aadd=_0xbc45ed['toLocaleString'](_0x1f50e8(0x3cb),{'weekday':_0x1f50e8(0x265),'hour':_0x1f50e8(0x323),'minute':_0x1f50e8(0x323)}),_0x1dfefe=this[_0x1f50e8(0x24c)];let _0x4d564b='';if(this[_0x1f50e8(0x238)][_0x1f50e8(0x2db)]>0x0){const _0x51220b=this[_0x1f50e8(0x238)][_0x1f50e8(0x23b)](0x0,0x3)[_0x1f50e8(0x234)](_0x141350=>_0x1f50e8(0x397)+_0x141350['alertReason']+'\x22\x20was\x20'+_0x141350['rating']+'.')[_0x1f50e8(0x38b)]('\x0a');_0x4d564b=_0x1f50e8(0x3bc)+_0x51220b+'\x0a';}const _0x37c44c=_0x23a58c?_0x1f50e8(0x329)+_0x23a58c+_0x1f50e8(0x3cc):'',_0x2e10e9=_0x1f50e8(0x229),_0x46cea1='ROLLE:\x20Smart\x20Home\x20Analyst.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20AKTUELLE\x20ZEIT:\x20'+_0x58aadd+_0x1f50e8(0x34b)+_0x1dfefe[_0x1f50e8(0x2e6)]+_0x1f50e8(0x322)+_0x46986b+_0x1f50e8(0x31e)+(this['isPresent']?'Ja':_0x1f50e8(0x2f1))+_0x1f50e8(0x286)+_0x455d9e+'.\x20PERSONA:\x20'+_0x5cf899+_0x1f50e8(0x2a3)+_0x206a36+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+_0x2e10e9+'\x20'+_0x4d564b+'\x20'+_0x37c44c+_0x1f50e8(0x2a6)+JSON[_0x1f50e8(0x297)](_0x538ad9)+_0x1f50e8(0x1e7);try{const _0x4ab56c=await this[_0x1f50e8(0x2fc)][_0x1f50e8(0x308)](_0x46cea1),_0x51ba2f=_0x4ab56c['response'][_0x1f50e8(0x39f)]()['replace'](/```json|```/g,'')[_0x1f50e8(0x31c)](),_0x4be26c=JSON[_0x1f50e8(0x2d5)](_0x51ba2f);await this[_0x1f50e8(0x38e)](_0x1f50e8(0x369),{'val':_0x51ba2f,'ack':!![]}),await this[_0x1f50e8(0x38e)](_0x1f50e8(0x213),{'val':_0x4be26c[_0x1f50e8(0x2f7)]['alertReason']||'','ack':!![]}),await this['setStateAsync'](_0x1f50e8(0x257),{'val':_0x4be26c[_0x1f50e8(0x2f7)][_0x1f50e8(0x375)]||_0x1f50e8(0x304),'ack':!![]}),await this['setStateAsync']('analysis.deviationFromBaseline',{'val':_0x4be26c[_0x1f50e8(0x2f7)]['deviationFromBaseline']||'N/A','ack':!![]});_0x4be26c['comfort']&&(await this['setStateAsync'](_0x1f50e8(0x32d),{'val':_0x4be26c[_0x1f50e8(0x2d0)][_0x1f50e8(0x375)]||'','ack':!![]}),await this[_0x1f50e8(0x38e)](_0x1f50e8(0x33a),{'val':_0x4be26c[_0x1f50e8(0x2d0)][_0x1f50e8(0x278)]||'','ack':!![]}),_0x4be26c['comfort'][_0x1f50e8(0x3ce)]&&(await this[_0x1f50e8(0x38e)](_0x1f50e8(0x364),{'val':_0x4be26c[_0x1f50e8(0x2d0)][_0x1f50e8(0x3ce)]['patternDetected']||![],'ack':!![]}),await this[_0x1f50e8(0x38e)](_0x1f50e8(0x2e9),{'val':_0x4be26c[_0x1f50e8(0x2d0)]['automationProposal']['description']||'','ack':!![]}),await this[_0x1f50e8(0x38e)](_0x1f50e8(0x315),{'val':_0x4be26c[_0x1f50e8(0x2d0)][_0x1f50e8(0x3ce)][_0x1f50e8(0x39b)]||'','ack':!![]})));_0x4be26c[_0x1f50e8(0x37a)]&&(await this[_0x1f50e8(0x38e)](_0x1f50e8(0x358),{'val':typeof _0x4be26c[_0x1f50e8(0x37a)][_0x1f50e8(0x338)]===_0x1f50e8(0x256)?_0x4be26c[_0x1f50e8(0x37a)]['sleepScore']:0x0,'ack':!![]}),await this['setStateAsync']('analysis.health.restlessness',{'val':_0x4be26c[_0x1f50e8(0x37a)][_0x1f50e8(0x21f)]||_0x1f50e8(0x249),'ack':!![]}),await this[_0x1f50e8(0x38e)](_0x1f50e8(0x2cd),{'val':_0x4be26c['health'][_0x1f50e8(0x3b9)]||'','ack':!![]}));const _0x58c429=_0x4be26c[_0x1f50e8(0x2f7)]['isAlert']||![],_0x44e7c3=_0x4be26c['activity']['isEmergency']||![];if(_0x58c429||_0x44e7c3){await this[_0x1f50e8(0x38e)](_0x1f50e8(0x2df),{'val':!![],'ack':!![]}),await this[_0x1f50e8(0x38e)]('analysis.isEmergency',{'val':_0x44e7c3,'ack':!![]});if(!this['lastAlertState']||_0x44e7c3){const _0x5277d5=_0x44e7c3?_0x1f50e8(0x3a0):_0x1f50e8(0x333);this[_0x1f50e8(0x222)](_0x5277d5+':\x20'+_0x4be26c[_0x1f50e8(0x2f7)]['alertReason'],![],_0x44e7c3);}}else await this['setStateAsync'](_0x1f50e8(0x2df),{'val':![],'ack':!![]}),await this[_0x1f50e8(0x38e)](_0x1f50e8(0x285),{'val':![],'ack':!![]});this[_0x1f50e8(0x2ae)]=_0x58c429||_0x44e7c3;const _0x3b0222={'timestamp':Date[_0x1f50e8(0x280)](),'id':Date[_0x1f50e8(0x280)]()[_0x1f50e8(0x25d)](),'analysis':_0x4be26c,'systemMode':_0x46986b,'isPro':this[_0x1f50e8(0x231)]};this[_0x1f50e8(0x2ef)](_0x3b0222);}catch(_0x153623){this['log'][_0x1f50e8(0x2f9)](_0x1f50e8(0x2e4)+_0x153623[_0x1f50e8(0x3a3)]);}}async['createDailyDigest'](){const _0xb78c68=a0_0x14b3e5;if(!this['geminiModel']||this['rawEventLog']['length']<LTM_MIN_EVENTS_FOR_COMPRESSION){await this[_0xb78c68(0x38e)](LTM_DP_STATUS,{'val':_0xb78c68(0x3a5),'ack':!![]});return;}this[_0xb78c68(0x2eb)][_0xb78c68(0x2a5)](_0xb78c68(0x258)+this[_0xb78c68(0x355)]['length']+_0xb78c68(0x2c7)),await this[_0xb78c68(0x38e)](LTM_DP_STATUS,{'val':'Analysiere\x20Tag...','ack':!![]});const _0x44ecd2=this[_0xb78c68(0x355)][_0xb78c68(0x2db)]>0x320?this[_0xb78c68(0x355)][_0xb78c68(0x23b)](this['rawEventLog'][_0xb78c68(0x2db)]-0x320):this['rawEventLog'],_0x4aa16d=PERSONA_MAPPING[this[_0xb78c68(0x207)][_0xb78c68(0x3c1)]||_0xb78c68(0x36e)],_0x351da3=_0xb78c68(0x353)+_0x4aa16d+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20INPUT:\x20'+JSON[_0xb78c68(0x297)](_0x44ecd2)+_0xb78c68(0x293);try{const _0x5f239c=await this[_0xb78c68(0x2fc)][_0xb78c68(0x308)](_0x351da3),_0x39cec0=_0x5f239c[_0xb78c68(0x290)]['text']()['replace'](/```json|```/g,'')['trim'](),_0x2782dc=JSON['parse'](_0x39cec0),_0x11b484={'timestamp':new Date()[_0xb78c68(0x392)](),'eventCount':this[_0xb78c68(0x355)][_0xb78c68(0x2db)],'summary':_0x2782dc[_0xb78c68(0x375)],'activityLevel':_0x2782dc[_0xb78c68(0x36a)],'health':{'sleepScore':_0x2782dc[_0xb78c68(0x37a)]?_0x2782dc[_0xb78c68(0x37a)][_0xb78c68(0x338)]:0x0,'restlessness':_0x2782dc[_0xb78c68(0x37a)]?_0x2782dc[_0xb78c68(0x37a)][_0xb78c68(0x21f)]:'none'},'systemMode':this[_0xb78c68(0x1ec)]};this[_0xb78c68(0x27e)][_0xb78c68(0x241)](_0x11b484),await this[_0xb78c68(0x219)](),this[_0xb78c68(0x355)]=[],await this['saveRawEventLog'](),await this[_0xb78c68(0x38e)](LTM_DP_STATUS,{'val':_0xb78c68(0x327),'ack':!![]}),this[_0xb78c68(0x2eb)]['info']('Daily\x20Digest\x20created\x20successfully.');}catch(_0xf2bcd3){this[_0xb78c68(0x2eb)][_0xb78c68(0x2f9)](_0xb78c68(0x3ae)+_0xf2bcd3[_0xb78c68(0x3a3)]),await this[_0xb78c68(0x38e)](LTM_DP_STATUS,{'val':'Fehler:\x20'+_0xf2bcd3['message'],'ack':!![]});}}async[a0_0x14b3e5(0x20d)](){const _0x222d2c=a0_0x14b3e5;if(!this[_0x222d2c(0x2fc)])return;this['log'][_0x222d2c(0x2a5)]('Generating\x20Morning\x20Briefing...');const _0x2c4f02=this['dailyDigests'][_0x222d2c(0x2db)]>0x0?this[_0x222d2c(0x27e)][this[_0x222d2c(0x27e)][_0x222d2c(0x2db)]-0x1]:null,_0x3371e7=_0x2c4f02&&_0x2c4f02['health']?_0x2c4f02[_0x222d2c(0x37a)][_0x222d2c(0x338)]:'N/A',_0xb64e35=new Date();_0xb64e35[_0x222d2c(0x25c)](0x4,0x0,0x0,0x0);const _0x2be375=this['eventHistory']['filter'](_0x30fcae=>new Date(_0x30fcae[_0x222d2c(0x288)])>_0xb64e35),_0x3ddc21=PERSONA_MAPPING[this[_0x222d2c(0x207)][_0x222d2c(0x3c1)]||_0x222d2c(0x36e)],_0x2052b6=this[_0x222d2c(0x207)]['livingContext']||'',_0x2d150e=await this[_0x222d2c(0x30c)](),_0x2c6110=await this[_0x222d2c(0x320)](),_0x26a7b7=_0x222d2c(0x3be)+_0x3ddc21+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20KONTEXT\x20(Wer\x20wohnt\x20hier?):\x20'+_0x2052b6+_0x222d2c(0x2a7)+_0x2d150e+'\x20'+_0x2c6110+_0x222d2c(0x2a2)+_0x3371e7+_0x222d2c(0x1f0)+JSON[_0x222d2c(0x297)](_0x2be375[_0x222d2c(0x23b)](0x0,0xa))+_0x222d2c(0x3b0);try{const _0x615582=await this[_0x222d2c(0x2fc)][_0x222d2c(0x308)](_0x26a7b7),_0x558405=_0x222d2c(0x25b)+_0x615582[_0x222d2c(0x290)][_0x222d2c(0x39f)]()[_0x222d2c(0x31c)]();this['sendNotification'](_0x558405),this['log'][_0x222d2c(0x2a5)](_0x222d2c(0x1e4));}catch(_0x1bbdf8){this['log'][_0x222d2c(0x2f9)]('Briefing\x20Error:\x20'+_0x1bbdf8[_0x222d2c(0x3a3)]);}}async[a0_0x14b3e5(0x222)](_0x41ab41,_0x96d3c3=![],_0x35c8b8=![]){const _0xde2ee=a0_0x14b3e5;this['log']['info']((_0x96d3c3?_0xde2ee(0x21c):'')+_0xde2ee(0x3d0)+_0x41ab41+'\x22'+(_0x35c8b8?_0xde2ee(0x36d):''));const _0x3a4f3e=this[_0xde2ee(0x207)];let _0x496865=0x0;_0x3a4f3e[_0xde2ee(0x396)]&&_0x3a4f3e[_0xde2ee(0x1f8)]&&(await this[_0xde2ee(0x340)](_0x3a4f3e['notifyTelegramInstance'],'send',{'text':_0x41ab41,'user':_0x3a4f3e[_0xde2ee(0x216)]}),_0x496865++);if(_0x3a4f3e[_0xde2ee(0x2d6)]&&_0x3a4f3e[_0xde2ee(0x319)]){let _0x436439={'message':_0x41ab41,'title':_0x35c8b8?_0xde2ee(0x38c):_0xde2ee(0x399),'priority':_0x35c8b8?0x2:0x1,'device':_0x3a4f3e[_0xde2ee(0x3b8)]};_0x35c8b8&&(_0x436439['retry']=0x1e,_0x436439[_0xde2ee(0x22d)]=0xe10,_0x436439['sound']='siren'),await this['sendToAsync'](_0x3a4f3e[_0xde2ee(0x319)],_0xde2ee(0x3c3),_0x436439),_0x496865++;}return _0x3a4f3e['notifyEmailEnabled']&&_0x3a4f3e['notifyEmailInstance']&&(await this['sendToAsync'](_0x3a4f3e[_0xde2ee(0x335)],_0xde2ee(0x3c3),{'text':_0x41ab41,'to':_0x3a4f3e[_0xde2ee(0x212)]}),_0x496865++),_0x3a4f3e[_0xde2ee(0x2dc)]&&_0x3a4f3e[_0xde2ee(0x311)]&&(await this[_0xde2ee(0x340)](_0x3a4f3e[_0xde2ee(0x311)],'send',{'text':_0x41ab41,'phone':_0x3a4f3e[_0xde2ee(0x382)]}),_0x496865++),_0x3a4f3e[_0xde2ee(0x31d)]&&_0x3a4f3e[_0xde2ee(0x31f)]&&(await this['sendToAsync'](_0x3a4f3e[_0xde2ee(0x31f)],_0xde2ee(0x3c3),{'text':_0x41ab41,'phone':_0x3a4f3e[_0xde2ee(0x23c)]}),_0x496865++),_0x496865;}[a0_0x14b3e5(0x3d1)](_0x23690d){const _0x445666=a0_0x14b3e5;if(this[_0x445666(0x303)])clearInterval(this[_0x445666(0x303)]);if(this[_0x445666(0x2c1)])clearInterval(this[_0x445666(0x2c1)]);if(this['ltmJob'])this[_0x445666(0x1f6)][_0x445666(0x2e0)]();if(this[_0x445666(0x2b2)])this[_0x445666(0x2b2)][_0x445666(0x2e0)]();if(this['briefingJob'])this[_0x445666(0x276)][_0x445666(0x2e0)]();if(this[_0x445666(0x25e)])clearTimeout(this[_0x445666(0x25e)]);if(this[_0x445666(0x203)])clearTimeout(this['exitGraceTimer']);_0x23690d();}}function a0_0x4d2a(_0x3a241f,_0x147b03){const _0x49de54=a0_0x44bd();return a0_0x4d2a=function(_0x5ebe08,_0x5f5063){_0x5ebe08=_0x5ebe08-0x1d9;let _0x44bdea=_0x49de54[_0x5ebe08];return _0x44bdea;},a0_0x4d2a(_0x3a241f,_0x147b03);}function a0_0x44bd(){const _0x5bde4f=['analysis.health.sleepScore','Deviation','analysis.history_debug_04','Wetter:\x20Deaktiviert','object','process','Fokus\x20auf\x20Familienroutinen,\x20Kindersicherheit\x20und\x20allgemeines\x20Haushaltsmanagement.','LOWBAT','828546BMgelE','fire','system.isPresent','checkSystemObjects','analysis.automation.patternDetected','triggerBriefing','shutter_contact','Error\x20reading\x20configured\x20weather\x20instance:\x20','debug','analysis.lastResult','activityLevel','ical.0','native','\x20(EMERGENCY)','generic','ERROR_CODE','extendObjectAsync','uniqueid','resetAnalysisStates','cogni-living\x20adapter\x20starting\x20(v','5894119gSPVgk','summary','channel','405899BhtCTq','checkLtmObjects','WETTER\x20ERROR:\x20','health','pop','Alert\x20Reason','minDaysForBaseline','split','schlaf','KALENDER:\x20','Health\x20&\x20Sleep\x20Analysis','notifyWhatsappRecipient','initHistory','ready','Raw\x20Log','setupDriftAnalysisScheduler','sensor.window','daswetter.0','\x20Tage)','Küche','join','🚨\x20EMERGENCY','WiFi\x20Presence\x20detected\x20->\x20Aborting\x20Exit\x20Timer.\x20User\x20is\x20present.','setStateAsync','INSTALL_TEST','Error\x20creating\x20objects:\x20','0\x203\x20*\x20*\x20*','toISOString','No\x20recent\x20activity.','Automation\x20Proposals','Baseline\x20Status','notifyTelegramEnabled','User\x20Feedback:\x20Alarm\x20\x22','2353356uPpwQw','Cogni-Living\x20Alert','some','suggestedAction','value.temperature','productname','eingang','text','🚨🚨\x20NOTFALL','VACATION','System\x20Status\x20&\x20Control','message','\x20(Whitelist:\x20','Zu\x20wenig\x20Daten\x20für\x20Daily\x20Digest.','system.config','PRIORITÄT:\x20Gesundheit\x20und\x20Sicherheit\x20für\x20Senioren\x20(AAL).\x20Erkenne\x20Inaktivität,\x20potenzielle\x20Stürze\x20(indirekt),\x20Schlafunterbrechungen\x20und\x20nächtliche\x20Unruhe.','Fokus\x20auf\x20Maximierung\x20von\x20Komfort,\x20Automatisierungseffizienz\x20und\x20Energieeinsparung.','Gast','Presence\x20Status','4uFUnqT','value.health','\x20presence\x20devices...','Daily\x20Digest\x20Error:\x20','PROCESS','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20OUTPUT:\x20Nur\x20der\x20Nachrichtentext\x20(kein\x20JSON).\x20Integriere\x20den\x20Kontext\x20(Wetter/Kalender)\x20nur\x20wenn\x20relevant.','Drift\x20Status','find','button','genAI','battery','createAllObjects\x20failed:\x20','licenseKey','notifyPushoverRecipient','notes','SABOTAGE','namespace','\x0aFEEDBACK:\x0a','analysis.health','ROLLE:\x20Fürsorglicher\x20Assistent.\x0a\x20\x20\x20\x20\x20\x20\x20\x20AUFGABE:\x20Schreibe\x20eine\x20kurze,\x20beruhigende\x20\x22Guten\x20Morgen\x22-Nachricht\x20an\x20die\x20Angehörigen/Bewohner.\x0a\x20\x20\x20\x20\x20\x20\x20\x20TON:\x20Freundlich,\x20professionell,\x20kurz.\x0a\x20\x20\x20\x20\x20\x20\x20\x20PERSONA\x20(Fokus):\x20','latitude','WEEK_PROGRAM','aiPersona','onMessage','send','startsWith','Error\x20checking\x20WiFi:\x20','replace','indicator','Kalender:\x20Deaktiviert','onStateChange','lampe','de-DE','\x0a!!!\x20END\x20WARNING\x20!!!\x0a','runAutopilot','automationProposal','KALENDER:\x20Keine\x20Daten','Sending\x20notification:\x20\x22','onUnload','Success','scanDevices','normal','Feedback\x20Log','WETTER:\x20','DUTYCYCLE','Wohnzimmer','präsenz','sensor.door','@google/generative-ai','PRIORITÄT:\x20Sicherheit.\x20Erkenne\x20Eindringlinge,\x20ungewöhnliche\x20Anwesenheit.','Morning\x20Briefing\x20sent.','10hncGGF','value.humidity','\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20AUFGABE:\x20Analysiere\x20die\x20Events\x20auf\x20Aktivität,\x20Komfort\x20und\x20GESUNDHEIT.\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20Nutze\x20den\x20EXTERNEN\x20KONTEXT\x20(Wetter/Kalender)\x20um\x20Fehlalarme\x20zu\x20vermeiden\x20(z.B.\x20Regen\x20=\x20keine\x20Gartenaktivität,\x20Termin\x20=\x20Abwesend).\x0a\x20\x20\x20\x20\x20\x20\x20\x20SCHEMA:\x20{\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22activity\x22:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22deviationFromBaseline\x22:\x20\x22string\x22,\x20\x22isAlert\x22:\x20bool,\x20\x22isEmergency\x22:\x20bool,\x20\x22alertReason\x22:\x20\x22string\x22\x20},\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22comfort\x22:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22suggestion\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22patternDetected\x22:\x20bool,\x20\x22description\x22:\x20\x22string\x22,\x20\x22suggestedAction\x22:\x20\x22string\x22\x20}\x20},\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22health\x22:\x20{\x20\x22sleepScore\x22:\x20number\x20(0-100),\x20\x22restlessness\x22:\x20\x22none|low|medium|high\x22,\x20\x22notes\x22:\x20\x22string\x22\x20}\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20}','126UhWjLn','text.alarm','analysisHistory','openweathermap.','currentSystemMode','DIRECTION','forecast','date','/100\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Aktivität\x20seit\x2004:00\x20Uhr:\x20','common','Error\x20reading\x20calendar\x20table:\x20','sensorLastValues','status','setObjectNotExistsAsync','ltmJob','0\x204\x20*\x20*\x20*','notifyTelegramInstance','Temperatur','flot.','system.meta.uuid','delObjectAsync','presenceDevices','calendarSelection','Activity\x20Summary','info.','Starting\x20Smart\x20Scan\x20with\x20filters:\x20','lastCheck','exitGraceTimer','.Summary.Current','LTM.driftAnalysis.lastCheck','indicator.alarm.fire','config','getEnums','Normal','\x20sent','colormode','getGenerativeModel','sendMorningBriefing','haustür','icon','Briefing\x20Sched\x20Error:\x20','getForeignObjectsAsync','notifyEmailRecipient','analysis.alertReason','occupancy','Logbook','notifyTelegramRecipient','string','LTM.processingStatus','saveDailyDigests','startExitTimer','openweathermap.0','[TEST]\x20','motion','constructor','restlessness','analysis.automation','_score','sendNotification','FAULT','ltmStbWindowDays','Starting\x20Autopilot\x20(','time','level','Analysiere\x20ausgewogen\x20auf\x20Gesundheit,\x20Sicherheit\x20und\x20Komfort.','Baseline:\x20Inactive\x20(Pro\x20Feature).','KALENDER\x20ERROR:\x20','setupModeResetScheduler','weather','expire','RSSI','boolean','612992cYnoHw','isProVersion','pressure','system.mode','map','COMBINED_PARAMETER','detectionState','_calName','feedbackHistory','signal','Drift\x20Sched\x20Error:\x20','slice','notifySignalRecipient','testApiKey','Bewegung','isPresent','rauch','push','analysisInterval','AES_KEY','Reset\x20Sched\x20Error:\x20','abortExitTimer','guest','Subscribing\x20to\x20','ltmDriftCheckIntervalHours','none','Comfort\x20Suggestion','sort','systemConfig','updateBaselineStatus','getLtmData','callback','isGracePeriodActive','main','Aktiv\x20(','fenster','setupLtmScheduler','cogni-living','number','analysis.activitySummary','Creating\x20Daily\x20Digest\x20from\x20','LTM\x20Sched\x20Error:\x20','saveFeedback','🌅\x20Daily\x20Briefing:\x0a','setHours','toString','exitTimer','logDuplicates','analysis.history_debug_02','members','.NextHours.Location_1.Day_1.current.symbol_desc','getSystemUUID','json','long','setState','WETTER:\x20Keine\x20Daten\x20gefunden','alert','CONNECTION','Context\x20Test\x20requested','includes','LTM.driftAnalysis','useCalendar','vis.','manufacturer','geminiApiKey','subscribeStates','icons-mfd.','details','checkLicense','Rauchmelder','briefingJob','toLowerCase','suggestion','35ggzJYK','analysis.trigger','events.history','ERROR','weatherunderground.','dailyDigests','createDailyDigest','now','\x20|\x20','checkWifiPresence','modelid','mode','analysis.isEmergency','.\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20KONTEXT\x20(Wohnen):\x20','SECTION','timestamp','events.lastEvent','\x20sensors...','Daily\x20Digests','history.','onReady','events.history_debug_01','.data.table','response','splice','admin.','\x0a\x20\x20\x20\x20\x20\x20\x20\x20OUTPUT\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22,\x20\x22health\x22:\x20{\x20\x22sleepScore\x22:\x20number,\x20\x22restlessness\x22:\x20\x22string\x22\x20}\x20}','Trigger\x20Briefing\x20(Test)','Last\x20Check','scheduleJob','stringify','type','Trigger\x20Analysis','accuweather','bind','val','LTM.rawEventLog','Trigger\x20Digest','Drift\x20Analysis','capabilities','getCalendarNames','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20DATEN:\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Schlafqualität\x20letzte\x20Nacht:\x20','.\x0a\x20\x20\x20\x20\x20\x20\x20\x20EXTERNER\x20KONTEXT\x20(WICHTIG):\x20','UNREACH','info','\x0a\x20\x20\x20\x20\x20\x20\x20\x20EVENTS:\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20ZUSATZ-KONTEXT:\x20','uuid','indicator.alarm','doors','catch','unshift','unknown','lastAlertState','analysis.analysisHistory','eventHistory','System\x20Mode','modeResetJob','Bewegung\x20während\x20Exit-Timer\x20erkannt\x20->\x20Bewohner\x20ist\x20noch\x20da.','mac\x20address','AI\x20Emergency\x20Status','(((.+)+)+)+$','129213BVtFAV','STICKY_UNREACH','LTM.driftAnalysis.baselineDrift','licht','Gemini\x20Init\x20Error:\x20','useWeather','getStateAsync','Gemini\x20AI\x20initialized.','accuweather.0','PARTY','driftAnalysisTimer','scanForDevices','Last\x20Result','diele','\x20*\x20*\x20*','loadSystemMode','\x20raw\x20events...','N/A\x20(Learning)','saveRawEventLog','loadRawEventLog','loadRawEventLog\x20failed:\x20','.forecast.current.state','analysis.health.notes','devices','online','comfort','setPresence','unload','GUEST','runBaselineDriftAnalysis','parse','notifyPushoverEnabled','yr.','driftDetails','system','update','length','notifyWhatsappEnabled','enum','firmware','analysis.isAlert','cancel','testNotification','LTM.baselineStatus','toUpperCase','Analysis\x20Error:\x20','uuid-not-found','city','küche','LTM.triggerDailyDigest','analysis.automation.description','inactivityThresholdHours','log','events.history_debug_03','N/A\x20(No\x20Activity)','toFixed','updateAnalysisHistory','enum.rooms.*','Nein','node-schedule','AI\x20Alert\x20Status','sendTo','systemUUID','Flur','activity','OPERATING_VOLTAGE','error','daswetter.','system.','geminiModel','party','weatherInstance','accuweather.','Garten','runGeminiAnalysis','loadDailyDigests\x20failed:\x20','analysisTimer','N/A','warn','Badezimmer','apiKey','generateContent','getForeignStateAsync','ROLLE:\x20Data\x20Scientist.\x20VERGLEICHE:\x20Dataset\x20A\x20(Recent)\x20vs\x20B\x20(Established).\x20ZIEL:\x20Erkenne\x20Drift.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aB\x20(LTB):\x0a','history','getWeatherContext','Deaktiviert\x20(Pro-Feature)','ack','enum.functions.*','NORMAL','notifyWhatsappInstance','search','command','reachable','analysis.automation.suggestedAction','name','ltmLtbWindowDays','baselineDrift','notifyPushoverInstance','analysis.triggerBriefing','analysis.history_debug_00','trim','notifySignalEnabled','.\x20PRÄSENZ:\x20','notifySignalInstance','getCalendarContext','Fenster/Tür','.\x0a\x20\x20\x20\x20\x20\x20\x20\x20MODUS:\x20','2-digit','livingContext','events.history_debug_02','ON_TIME','Daily\x20Digest\x20erstellt\x20&\x20gespeichert.','garten','\x0a!!!\x20EXTERNAL\x20SYSTEM\x20WARNING\x20!!!\x0a','temperatur','subscribeForeignStatesAsync','description','analysis.comfortSummary','state','models/gemini-flash-latest','sat','Last\x20raw\x20event','CRITICAL\x20WARNING:\x20No\x20sensor\x20activity\x20detected\x20for\x20','⚠️\x20Alarm','exports','notifyEmailInstance','Restlessness\x20Level','material.','sleepScore','checkLtmDriftObjects','analysis.comfortSuggestion','filter','role','isArray','from','Event\x20History','sendToAsync','values','event','link_quality','Comfort\x20Summary','analysis.history_debug_03','LTM','rain','Processing\x20Status','25012yUccqc','setupBriefingScheduler','.\x20ORT:\x20','wohnungstür','analysis.health.restlessness','version','ALARM','Error\x20initHistory:\x20','triggerDailyDigest','processSensorEvent','ROLLE:\x20Data\x20Analyst.\x20AUFGABE:\x20Fasse\x20den\x20heutigen\x20Tag\x20basierend\x20auf\x20den\x20Sensor-Logs\x20zusammen.\x0a\x20\x20\x20\x20\x20\x20\x20\x20PERSONA:\x20','getForeignObjectAsync','rawEventLog','getObjectAsync','Lernphase\x20('];a0_0x44bd=function(){return _0x5bde4f;};return a0_0x44bd();}if(require[a0_0x14b3e5(0x251)]!==module)module[a0_0x14b3e5(0x334)]=_0xd38387=>new CogniLiving(_0xd38387);else new CogniLiving();