const a0_0x5ac575=a0_0x31df;(function(_0x9e098a,_0x26cc27){const _0x3871cd=a0_0x31df,_0x47a354=_0x9e098a();while(!![]){try{const _0x8c4ff7=parseInt(_0x3871cd(0x20c))/0x1+-parseInt(_0x3871cd(0x2b7))/0x2*(-parseInt(_0x3871cd(0x30d))/0x3)+-parseInt(_0x3871cd(0x2b1))/0x4+-parseInt(_0x3871cd(0x1ba))/0x5*(-parseInt(_0x3871cd(0x2a6))/0x6)+-parseInt(_0x3871cd(0x28e))/0x7+parseInt(_0x3871cd(0x339))/0x8*(parseInt(_0x3871cd(0x2a1))/0x9)+-parseInt(_0x3871cd(0x220))/0xa*(parseInt(_0x3871cd(0x1f9))/0xb);if(_0x8c4ff7===_0x26cc27)break;else _0x47a354['push'](_0x47a354['shift']());}catch(_0x44265c){_0x47a354['push'](_0x47a354['shift']());}}}(a0_0x3587,0xd033f));const a0_0x14057d=(function(){let _0x2acca5=!![];return function(_0x52f6bd,_0x31aeb7){const _0x316169=_0x2acca5?function(){const _0x1a5912=a0_0x31df;if(_0x31aeb7){const _0x25465d=_0x31aeb7[_0x1a5912(0x264)](_0x52f6bd,arguments);return _0x31aeb7=null,_0x25465d;}}:function(){};return _0x2acca5=![],_0x316169;};}()),a0_0x119baa=a0_0x14057d(this,function(){const _0x2ff0d2=a0_0x31df;return a0_0x119baa[_0x2ff0d2(0x1d1)]()[_0x2ff0d2(0x251)]('(((.+)+)+)+$')[_0x2ff0d2(0x1d1)]()[_0x2ff0d2(0x2fe)](a0_0x119baa)[_0x2ff0d2(0x251)]('(((.+)+)+)+$');});a0_0x119baa();'use strict';const utils=require('@iobroker/adapter-core'),{GoogleGenerativeAI}=require(a0_0x5ac575(0x1db)),{spawn}=require(a0_0x5ac575(0x2df)),path=require(a0_0x5ac575(0x332)),fs=require('fs'),installer=require('./lib/installer'),scanner=require('./lib/scanner'),schedulers=require(a0_0x5ac575(0x2d7)),HISTORY_MAX_SIZE=0x32,RAW_LOG_MAX_SIZE=0x9c4,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL=a0_0x5ac575(0x208),SEQUENCE_TIMEOUT_MS=0x5*0x3c*0x3e8,MAX_TRAINING_SET_SIZE=0x1f4,THERMO_LOG_SIZE=0x3e8,EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,LTM_DP_RAW_LOG='LTM.rawEventLog',LTM_DP_DAILY_DIGESTS=a0_0x5ac575(0x293),LTM_DP_STATUS=a0_0x5ac575(0x254),LTM_DP_TRIGGER_DIGEST=a0_0x5ac575(0x2a0),LTM_DP_BASELINE_STATUS=a0_0x5ac575(0x33e),LTM_DP_DRIFT_CHANNEL=a0_0x5ac575(0x2d3),LTM_DP_DRIFT_STATUS='LTM.driftAnalysis.baselineDrift',LTM_DP_DRIFT_DETAILS=a0_0x5ac575(0x258),LTM_DP_DRIFT_LAST_CHECK=a0_0x5ac575(0x2e3),SYSTEM_DP_MODE=a0_0x5ac575(0x1f6),SYSTEM_MODES={'NORMAL':a0_0x5ac575(0x1ea),'VACATION':a0_0x5ac575(0x335),'PARTY':a0_0x5ac575(0x2c5),'GUEST':a0_0x5ac575(0x2f0)},AUTO_RESET_MODES=[SYSTEM_MODES[a0_0x5ac575(0x1c9)],SYSTEM_MODES[a0_0x5ac575(0x26e)]],PERSONA_MAPPING={'generic':a0_0x5ac575(0x2ba),'senior_aal':'PRIORITÃ„T:\x20Gesundheit/AAL.','family':a0_0x5ac575(0x1e5),'single_comfort':'Fokus\x20auf\x20Komfort.','security':'PRIORITÃ„T:\x20Sicherheit.'},ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};let activeSequence=[],sequenceTimer=null;async function initZombies(_0x2fd0ca){const _0x431f83=a0_0x5ac575;try{const _0x4508a8=[_0x431f83(0x1be),_0x431f83(0x216)];for(const _0x5eca21 of _0x4508a8){try{const _0x267ccf=await _0x2fd0ca[_0x431f83(0x1cc)](_0x5eca21);if(_0x267ccf)await _0x2fd0ca[_0x431f83(0x2bf)](_0x5eca21);}catch(_0x2d5304){}}}catch(_0x4a1c29){}}async function checkLicense(_0x54ac26){return!![];}async function initHistory(_0x1c5d01){const _0x4afbb9=a0_0x5ac575;try{const _0x496d8f=await _0x1c5d01['getStateAsync'](_0x4afbb9(0x25b));_0x496d8f&&_0x496d8f[_0x4afbb9(0x32c)]&&(_0x1c5d01[_0x4afbb9(0x33d)]=JSON['parse'](_0x496d8f[_0x4afbb9(0x32c)][_0x4afbb9(0x1d1)]()));}catch(_0x5def2f){_0x1c5d01['eventHistory']=[];}try{const _0x7da8d5=await _0x1c5d01[_0x4afbb9(0x280)]('analysis.analysisHistory');if(_0x7da8d5&&_0x7da8d5[_0x4afbb9(0x32c)])_0x1c5d01[_0x4afbb9(0x2f5)]=JSON['parse'](_0x7da8d5[_0x4afbb9(0x32c)][_0x4afbb9(0x1d1)]());}catch(_0x3e26f4){_0x1c5d01[_0x4afbb9(0x2f5)]=[];}if(_0x1c5d01['eventHistory']&&_0x1c5d01[_0x4afbb9(0x33d)][_0x4afbb9(0x28c)]>0x0){_0x1c5d01[_0x4afbb9(0x243)][_0x4afbb9(0x2da)](_0x4afbb9(0x32d));for(let _0x48e0a0=_0x1c5d01[_0x4afbb9(0x33d)]['length']-0x1;_0x48e0a0>=0x0;_0x48e0a0--){const _0x1e4f1c=_0x1c5d01[_0x4afbb9(0x33d)][_0x48e0a0];if(_0x1e4f1c&&_0x1e4f1c['id']!==undefined&&_0x1e4f1c['value']!==undefined)_0x1c5d01[_0x4afbb9(0x268)][_0x1e4f1c['id']]=_0x1e4f1c[_0x4afbb9(0x33f)];}}}async function initSystemConfig(_0x27663d){const _0x357106=a0_0x5ac575;try{const _0x10433a=await _0x27663d['getForeignObjectAsync']('system.config');if(_0x10433a&&_0x10433a[_0x357106(0x269)])_0x27663d[_0x357106(0x29e)]={'latitude':_0x10433a[_0x357106(0x269)][_0x357106(0x30e)]||0x0,'longitude':_0x10433a['common'][_0x357106(0x21c)]||0x0,'city':_0x10433a[_0x357106(0x269)]['city']||''};}catch(_0x48e613){}}async function createAllObjects(_0x54fd0b){const _0x176560=a0_0x5ac575;await _0x54fd0b[_0x176560(0x215)](_0x176560(0x317),{'type':_0x176560(0x316),'common':{'name':_0x176560(0x1f8)},'native':{}}),await _0x54fd0b[_0x176560(0x215)](SYSTEM_DP_MODE,{'type':_0x176560(0x1b8),'common':{'name':'System\x20Mode','type':_0x176560(0x2bb),'role':_0x176560(0x1b8),'read':!![],'write':!![],'def':SYSTEM_MODES[_0x176560(0x2b3)]},'native':{}}),await _0x54fd0b[_0x176560(0x31b)]('system.presenceWho',{'type':_0x176560(0x1b8),'common':{'name':'Who\x20is\x20present?','type':'string','role':_0x176560(0x305),'read':!![],'write':![]},'native':{}}),await _0x54fd0b['setObjectNotExistsAsync']('events.lastEvent',{'type':'state','common':{'name':_0x176560(0x1f5),'type':'string','role':_0x176560(0x1c4),'read':!![],'write':![]},'native':{}}),await _0x54fd0b['setObjectNotExistsAsync'](_0x176560(0x25b),{'type':_0x176560(0x1b8),'common':{'name':'Event\x20History','type':'string','role':_0x176560(0x1c4),'read':!![],'write':![]},'native':{}}),await _0x54fd0b[_0x176560(0x215)](_0x176560(0x346),{'type':'channel','common':{'name':'AI\x20Training'},'native':{}}),await _0x54fd0b['setObjectNotExistsAsync'](_0x176560(0x2e9),{'type':_0x176560(0x1b8),'common':{'name':_0x176560(0x228),'type':'boolean','role':_0x176560(0x26f),'read':!![],'write':!![]},'native':{}}),await _0x54fd0b[_0x176560(0x31b)](_0x176560(0x21e),{'type':'state','common':{'name':_0x176560(0x2aa),'type':_0x176560(0x20a),'role':'button','read':!![],'write':!![]},'native':{}}),await _0x54fd0b[_0x176560(0x31b)](_0x176560(0x23c),{'type':_0x176560(0x1b8),'common':{'name':_0x176560(0x2b6),'type':_0x176560(0x20a),'role':'button','read':!![],'write':!![]},'native':{}}),await _0x54fd0b[_0x176560(0x31b)](_0x176560(0x2d1),{'type':_0x176560(0x1b8),'common':{'name':'Train\x20Comfort','type':_0x176560(0x20a),'role':_0x176560(0x26f),'read':!![],'write':!![]},'native':{}}),await _0x54fd0b['setObjectNotExistsAsync'](_0x176560(0x241),{'type':_0x176560(0x1b8),'common':{'name':_0x176560(0x1c2),'type':_0x176560(0x20a),'role':'button','read':!![],'write':!![]},'native':{}}),await _0x54fd0b[_0x176560(0x31b)]('analysis.training.status',{'type':'state','common':{'name':_0x176560(0x242),'type':_0x176560(0x2bb),'role':_0x176560(0x305),'read':!![],'write':![]},'native':{}}),await _0x54fd0b['extendObjectAsync']('analysis.security',{'type':_0x176560(0x316),'common':{'name':'Security\x20Monitor'},'native':{}}),await _0x54fd0b[_0x176560(0x31b)](_0x176560(0x29f),{'type':_0x176560(0x1b8),'common':{'name':_0x176560(0x201),'type':'number','role':'value','read':!![],'write':![]},'native':{}}),await _0x54fd0b[_0x176560(0x31b)](_0x176560(0x2d5),{'type':_0x176560(0x1b8),'common':{'name':_0x176560(0x1dc),'type':_0x176560(0x1f2),'role':_0x176560(0x33f),'read':!![],'write':![],'def':0.05},'native':{}}),await _0x54fd0b[_0x176560(0x31b)](_0x176560(0x29b),{'type':_0x176560(0x1b8),'common':{'name':_0x176560(0x1e0),'type':_0x176560(0x2bb),'role':_0x176560(0x236),'read':!![],'write':![]},'native':{}}),await _0x54fd0b[_0x176560(0x31b)](_0x176560(0x2dc),{'type':_0x176560(0x1b8),'common':{'name':'Topology\x20Matrix','type':_0x176560(0x2bb),'role':'json','read':!![],'write':![]},'native':{}}),await _0x54fd0b[_0x176560(0x215)]('analysis.health',{'type':'channel','common':{'name':_0x176560(0x338)},'native':{}}),await _0x54fd0b[_0x176560(0x31b)](_0x176560(0x2a2),{'type':_0x176560(0x1b8),'common':{'name':'Last\x20Check','type':'string','role':'date','read':!![],'write':![]},'native':{}}),await _0x54fd0b['setObjectNotExistsAsync']('analysis.health.isAnomaly',{'type':'state','common':{'name':'Anomaly\x20Detected','type':_0x176560(0x20a),'role':'indicator','read':!![],'write':![]},'native':{}}),await _0x54fd0b[_0x176560(0x31b)](_0x176560(0x24f),{'type':_0x176560(0x1b8),'common':{'name':'Trend','type':'string','role':_0x176560(0x305),'read':!![],'write':![]},'native':{}}),await _0x54fd0b[_0x176560(0x31b)](_0x176560(0x287),{'type':_0x176560(0x1b8),'common':{'name':'Trend\x20Value','type':_0x176560(0x1f2),'role':_0x176560(0x33f),'read':!![],'write':![]},'native':{}}),await _0x54fd0b['setObjectNotExistsAsync'](_0x176560(0x325),{'type':_0x176560(0x1b8),'common':{'name':'Today\x20Vector\x20(15m)','type':_0x176560(0x2bb),'role':_0x176560(0x1c4),'read':!![],'write':![]},'native':{}}),await _0x54fd0b['setObjectNotExistsAsync']('analysis.health.gaitSpeed',{'type':'state','common':{'name':_0x176560(0x28a),'type':_0x176560(0x1f2),'role':_0x176560(0x33f),'read':!![],'write':![]},'native':{}}),await _0x54fd0b[_0x176560(0x215)]('analysis.energy',{'type':_0x176560(0x316),'common':{'name':_0x176560(0x2f1)},'native':{}}),await _0x54fd0b[_0x176560(0x31b)](_0x176560(0x2ef),{'type':_0x176560(0x1b8),'common':{'name':'Insulation\x20Score','type':'string','role':_0x176560(0x305),'read':!![],'write':![]},'native':{}}),await _0x54fd0b['setObjectNotExistsAsync'](_0x176560(0x247),{'type':'state','common':{'name':_0x176560(0x248),'type':'string','role':_0x176560(0x305),'read':!![],'write':![]},'native':{}}),await _0x54fd0b[_0x176560(0x31b)]('analysis.energy.forecast',{'type':_0x176560(0x1b8),'common':{'name':'Temperature\x20Forecast','type':'string','role':_0x176560(0x1c4),'read':!![],'write':![]},'native':{}}),await _0x54fd0b[_0x176560(0x215)]('LTM',{'type':'channel','common':{'name':_0x176560(0x2dd)},'native':{}}),await _0x54fd0b[_0x176560(0x215)](LTM_DP_RAW_LOG,{'type':'state','common':{'name':_0x176560(0x33a),'type':'string','role':_0x176560(0x1c4),'read':!![],'write':![]},'native':{}}),await _0x54fd0b[_0x176560(0x215)](LTM_DP_DAILY_DIGESTS,{'type':_0x176560(0x1b8),'common':{'name':_0x176560(0x24c),'type':_0x176560(0x2bb),'role':_0x176560(0x1c4),'read':!![],'write':![]},'native':{}}),await _0x54fd0b[_0x176560(0x31b)](_0x176560(0x1d4),{'type':_0x176560(0x1b8),'common':{'name':_0x176560(0x27a),'type':'string','role':_0x176560(0x1c4),'read':!![],'write':![]},'native':{}}),await _0x54fd0b['setObjectNotExistsAsync'](_0x176560(0x1e2),{'type':_0x176560(0x1b8),'common':{'name':_0x176560(0x299),'type':_0x176560(0x2bb),'role':_0x176560(0x1c4),'read':!![],'write':![]},'native':{}}),await _0x54fd0b[_0x176560(0x31b)](_0x176560(0x323),{'type':_0x176560(0x1b8),'common':{'name':_0x176560(0x28f),'type':_0x176560(0x20a),'role':_0x176560(0x26f),'read':!![],'write':!![]},'native':{}}),await _0x54fd0b[_0x176560(0x31b)](_0x176560(0x2d6),{'type':'state','common':{'name':_0x176560(0x2a3),'type':'boolean','role':_0x176560(0x26f),'read':!![],'write':!![]},'native':{}}),await _0x54fd0b[_0x176560(0x31b)](_0x176560(0x272),{'type':_0x176560(0x1b8),'common':{'name':'Alert\x20Status','type':_0x176560(0x20a),'role':'indicator.alarm','read':!![],'write':![]},'native':{}}),await _0x54fd0b[_0x176560(0x31b)](_0x176560(0x2ad),{'type':_0x176560(0x1b8),'common':{'name':'Alert\x20Reason','type':_0x176560(0x2bb),'role':_0x176560(0x1ed),'read':!![],'write':![]},'native':{}}),await _0x54fd0b[_0x176560(0x31b)](_0x176560(0x1b3),{'type':_0x176560(0x1b8),'common':{'name':_0x176560(0x224),'type':_0x176560(0x2bb),'role':_0x176560(0x305),'read':!![],'write':![]},'native':{}}),await _0x54fd0b['setObjectNotExistsAsync'](_0x176560(0x302),{'type':_0x176560(0x1b8),'common':{'name':_0x176560(0x214),'type':_0x176560(0x20a),'role':_0x176560(0x24b),'read':!![],'write':![]},'native':{}}),await _0x54fd0b['setObjectNotExistsAsync'](_0x176560(0x344),{'type':_0x176560(0x1b8),'common':{'name':_0x176560(0x319),'type':_0x176560(0x2bb),'role':_0x176560(0x305),'read':!![],'write':![]},'native':{}}),await _0x54fd0b[_0x176560(0x31b)](_0x176560(0x1d6),{'type':'state','common':{'name':_0x176560(0x219),'type':_0x176560(0x2bb),'role':'json','read':!![],'write':![]},'native':{}}),await _0x54fd0b['setObjectNotExistsAsync'](_0x176560(0x1b9),{'type':'state','common':{'name':_0x176560(0x282),'type':'string','role':'text','read':!![],'write':![]},'native':{}}),await _0x54fd0b[_0x176560(0x31b)](_0x176560(0x1d9),{'type':_0x176560(0x1b8),'common':{'name':_0x176560(0x312),'type':'string','role':_0x176560(0x305),'read':!![],'write':![]},'native':{}}),await _0x54fd0b[_0x176560(0x31b)]('analysis.automation.autoApply',{'type':_0x176560(0x1b8),'common':{'name':_0x176560(0x2c6),'type':_0x176560(0x20a),'role':_0x176560(0x2d2),'read':!![],'write':!![]},'native':{}}),await _0x54fd0b[_0x176560(0x31b)](_0x176560(0x1f4),{'type':_0x176560(0x1b8),'common':{'name':'Trigger\x20Action','type':'boolean','role':'button','read':!![],'write':!![]},'native':{}});}function a0_0x3587(){const _0x152653=['join','boolean','tÃ¼r','658179DEkQPs','enum','bind','ðŸ§ª\x20Simulating\x20Butler\x20Proposal:\x20','setupDriftAnalysisScheduler','light','SIMULATION:\x20Test-Vorschlag\x20fÃ¼r\x20','ltmLtbWindowDays','Pattern\x20Detected','extendObjectAsync','events.history_debug_00','.\x20KONTEXT:\x20','.\x20EVENTS:\x20','Detected\x20Patterns','isPresent','includes','longitude','debug','analysis.training.triggerHealth','ANALYZE_GAIT','110ppLOCY','getHours','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','ðŸ•¸ï¸\x20Topology\x20Map\x20updated.','Activity\x20Summary','round','\x20->\x20','door','Train\x20Security','bewegung','summary','ðŸ›‹ï¸\x20Triggering\x20Comfort\x20Analysis\x20(Pattern\x20Mining)...','targetId','forEach','Gemini\x20Error:\x20','Kalender\x20deaktiviert.','COMFORT_RESULT','application/json','heating','slice','.\x20WETTER:\x20','ðŸ›¡ï¸\x20SECURITY\x20CHECK:\x20Score\x20','date','TOPOLOGY_RESULT','substring','Keine\x20Details.','generic','simulateButler','analysis.training.triggerEnergy','ðŸ›‹ï¸\x20BUTLER:\x20Found\x20','TRAIN_HEALTH','inactivityThresholdHours','dailyDigests','analysis.training.triggerTopology','Training\x20Status','log','setHours',')\x20-\x20SAFE\x20BOOT','TRAINING_COMPLETE','analysis.energy.heatingScore','Heating\x20Score','Training\x20Error:\x20','notifyTelegramEnabled','indicator','Daily\x20Digests','unload','PYTHON_EXE','analysis.health.trendDiagnosis','dimmer','search','rawEventLog','splice','LTM.processingStatus','systemUUID','OK:\x20','ðŸ\x20Python\x20Pong','LTM.driftAnalysis.driftDetails','Wetterdaten\x20deaktiviert.','message','events.history','setupLtmScheduler','heizung','isAlert','weatherInstance','getForeignStateAsync','modeResetJob','geminiApiKey','calendarInstance','apply','error','openweathermap','ANALYZE_SEQUENCE','sensorLastValues','common','licht','Kein\x20API\x20Key!','subscribeForeignStatesAsync','dismissAutomation','GUEST','button','cancel','Keine\x20Termine.','analysis.isAlert','system.presenceWho','N/A\x20(Learning)','Briefing\x20Error:\x20','object','BUILD_TOPOLOGY','ltmJob','response','Sequences','onStateChange','main','outdoorSensorId','split','setupModeResetScheduler','getStateAsync','isProVersion','Target\x20ID','TRAIN_SECURITY','Success','some','isExit','analysis.health.trendValue','toFixed','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','Gait\x20Speed\x20Trend','Error\x20launching\x20Python:\x20','length','briefingJob','5051221BMPGEw','Trigger\x20Analysis','alertReason','accuweather','service.py','LTM.dailyDigests','endsWith','stringify','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','name','scanDevices','Thermodynamics','map','analysis.security.lastCheck','Aktiv\x20(','TRAIN_COMFORT','systemConfig','analysis.security.lastScore','LTM.triggerDailyDigest','8649UFuvoN','analysis.health.lastCheck','Trigger\x20Briefing','existsSync','setStateAsync','6Zlsbfl','useCalendar','Sec-Training\x20started...','sendTo','Train\x20Health','kontakt','.Current.WeatherText','analysis.alertReason','ðŸ“\x20Feedback\x20received:\x20','setForeignStateAsync','getDate','2299184OdXTug','[PYTHON]\x20','NORMAL','window','cogni-living','Train\x20Energy','314sJjopK','find','currentSystemMode','Analysiere\x20ausgewogen.','string','licenseKey','dependencyInstallInProgress','toISOString','delObjectAsync','ðŸ•¸ï¸\x20Building\x20Topology\x20Matrix...','logDuplicates','detected','\x20=\x20','livingContext','party','Auto\x20Apply','daswetter','toLowerCase','ENERGY_PREDICT_RESULT','data','exitTimer','Err:\x20','PONG','isEmergency','TREND_RESULT','push','analysis.training.triggerComfort','switch','LTM.driftAnalysis','baselineDrift','analysis.security.currentThreshold','analysis.triggerBriefing','./lib/scheduler','diagnosis','analysisInterval','info','.\x20EMERGENCY:\x20','analysis.security.topologyMatrix','LTM','\x20Tage)','child_process','stateChange','[RECORDER]\x20Error:\x20','ack','LTM.driftAnalysis.lastCheck','success','ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','aiPersona','location','onReady','analysis.training.triggerSecurity','status','.communicate.request','Kein\x20API\x20Key.','description','writable','analysis.energy.insulationScore','guest','Energy\x20Intelligence','change_percent','ANALYZE_TREND','namespace','analysisHistory','âš ï¸\x20ALARM:\x20','pythonProcess','occupancy','Skipped\x20(No\x20AI\x20or\x20Data)','analysis.energy.forecast','useWeather','Unknown','driftAnalysisTimer','constructor','keys','parse','values','analysis.automation.patternDetected','presenceDevices','getMinutes','text','unknown','subscribeStates','ðŸ›‹ï¸\x20BUTLER:\x20Keine\x20neuen\x20Muster\x20gefunden.','weatherunderground','getFullYear','BUTLER\x20Execution\x20Error:\x20','now','16869nDcmEz','latitude','Deaktiviert\x20(Pro-Feature)','analysis.training.status','isGracePeriodActive','Target\x20Value','python3','lampe','Keine\x20Wetterdaten\x20verfÃ¼gbar.','channel','system','analysis.analysisHistory','Description','User\x20dismissed\x20automation\x20proposal.','setObjectNotExistsAsync','geminiModel','onUnload','devices','automationProposal','No\x20instance','enum.rooms.*','shift','analysis.trigger','âœ…\x20HEALTH\x20TRAINED.','analysis.health.todayVector','klima','lastAlertState','details','warn','insulation','Â°C,\x20','val','Restoring\x20sensor\x20cache...','Topology\x20Error:\x20','unshift','HEALTH_RESULT','trim','path','exports','Regel\x20erkannt:\x20','vacation','stdin','pop','Health\x20Analysis','712Trlmbu','Raw\x20Log','getGenerativeModel','triggerDailyDigest','eventHistory','LTM.baselineStatus','value','analysis.automation.autoApply','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','Unbekannt','SECURITY_RESULT','analysis.automation.description','getMonth','analysis.training','\x0aGrund:\x20','callback','toLocaleTimeString','contact','[RESULT]','rating','loc','VACATION','analysis.activitySummary','checkAndInstall','reason','getForeignObjectsAsync','minDaysForBaseline','state','analysis.automation.targetId','7377385jctGWm','HEALTH_TRAIN_RESULT','Missing\x20data','Activity-Level','analysis.history_debug_00','exitGraceTimer','filter','from','Build\x20Topology','payload','json','ready','ltmStbWindowDays','type','instance','PARTY','python_service','temperatur','getObjectAsync','schalter','ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20','ðŸŒ…\x20Morning\x20Briefing:\x0a','.forecast.current.temperature','toString','Gemini\x20AI\x20initialized.','events.lastEvent','LTM.trainingData.sequences','enum.functions.*','analysis.automation.detectedPatterns','.Current.Temperature','ENERGY_TRAIN_RESULT','analysis.automation.targetValue','is_anomaly','@google/generative-ai','Current\x20Threshold','generateContent','ðŸš€\x20Starting\x20NUUKANNI\x20Logic\x20(v0.12.10)...','getOverviewData','Last\x20Check','notifyTelegramInstance','LTM.trainingData.thermodynamics','activityLevel','rule','Fokus\x20auf\x20Familienroutinen.','getEnums','online','command','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','normal','setState','config','text.alarm','Lernphase\x20(','write','apiKey','floor','number','temperature','analysis.automation.triggerAction','Last\x20raw\x20event','system.mode','motion','System','952798BZkDto','analysisTimer','Failed:\x20','onMessage','timestamp','N/A','replace','getTime','Anomaly\x20Score','close','startsWith','[LOG]','genAI','confidence','version','models/gemini-flash-latest'];a0_0x3587=function(){return _0x152653;};return a0_0x3587();}async function loadSystemMode(_0x42829b){const _0x52afbc=a0_0x5ac575;try{const _0x3a9f58=await _0x42829b[_0x52afbc(0x280)](SYSTEM_DP_MODE);_0x3a9f58&&_0x3a9f58[_0x52afbc(0x32c)]&&Object[_0x52afbc(0x301)](SYSTEM_MODES)[_0x52afbc(0x21b)](_0x3a9f58[_0x52afbc(0x32c)])?_0x42829b[_0x52afbc(0x2b9)]=_0x3a9f58[_0x52afbc(0x32c)]:(_0x42829b[_0x52afbc(0x2b9)]=SYSTEM_MODES[_0x52afbc(0x2b3)],await _0x42829b['setStateAsync'](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x52afbc(0x2b3)],'ack':!![]}));}catch(_0x5427bf){_0x42829b['currentSystemMode']=SYSTEM_MODES[_0x52afbc(0x2b3)];}}async function loadRawEventLog(_0x5d7426){const _0x588495=a0_0x5ac575;try{const _0x39959c=await _0x5d7426[_0x588495(0x280)](LTM_DP_RAW_LOG);if(_0x39959c&&_0x39959c[_0x588495(0x32c)])_0x5d7426[_0x588495(0x252)]=JSON[_0x588495(0x300)](_0x39959c[_0x588495(0x32c)]);}catch(_0x15386f){_0x5d7426['rawEventLog']=[];}}async function saveRawEventLog(_0x59591a){const _0x30372d=a0_0x5ac575;if(_0x59591a[_0x30372d(0x252)]['length']>RAW_LOG_MAX_SIZE)_0x59591a[_0x30372d(0x252)][_0x30372d(0x253)](0x0,_0x59591a[_0x30372d(0x252)]['length']-RAW_LOG_MAX_SIZE);await _0x59591a[_0x30372d(0x2a5)](LTM_DP_RAW_LOG,{'val':JSON[_0x30372d(0x295)](_0x59591a['rawEventLog']),'ack':!![]});}async function loadDailyDigests(_0xcdcc0b){const _0x3cc863=a0_0x5ac575;try{const _0x1faa31=await _0xcdcc0b['getStateAsync'](LTM_DP_DAILY_DIGESTS);if(_0x1faa31&&_0x1faa31[_0x3cc863(0x32c)])_0xcdcc0b[_0x3cc863(0x240)]=JSON[_0x3cc863(0x300)](_0x1faa31['val']);}catch(_0x29975b){_0xcdcc0b[_0x3cc863(0x240)]=[];}await updateBaselineStatus(_0xcdcc0b);}async function saveDailyDigests(_0x6e4be6,_0x334cf5=!![]){const _0xb12f15=a0_0x5ac575,_0x3de2dc=_0x6e4be6[_0xb12f15(0x1ec)][_0xb12f15(0x213)]||0x3c;_0x6e4be6[_0xb12f15(0x240)][_0xb12f15(0x28c)]>_0x3de2dc&&_0x6e4be6['dailyDigests'][_0xb12f15(0x253)](0x0,_0x6e4be6['dailyDigests'][_0xb12f15(0x28c)]-_0x3de2dc);await _0x6e4be6[_0xb12f15(0x2a5)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0xb12f15(0x295)](_0x6e4be6[_0xb12f15(0x240)]),'ack':!![]});if(_0x334cf5)await updateBaselineStatus(_0x6e4be6);}async function updateAnalysisHistory(_0x4e0aa1,_0x1465d2){const _0x59b7ae=a0_0x5ac575;_0x4e0aa1['analysisHistory'][_0x59b7ae(0x32f)](_0x1465d2);if(_0x4e0aa1[_0x59b7ae(0x2f5)][_0x59b7ae(0x28c)]>HISTORY_MAX_SIZE)_0x4e0aa1[_0x59b7ae(0x2f5)][_0x59b7ae(0x337)]();await _0x4e0aa1[_0x59b7ae(0x2a5)](_0x59b7ae(0x318),{'val':JSON[_0x59b7ae(0x295)](_0x4e0aa1['analysisHistory']),'ack':!![]});}async function updateBaselineStatus(_0x20a8c7){const _0x483017=a0_0x5ac575;if(!_0x20a8c7[_0x483017(0x281)]){await _0x20a8c7['setStateAsync'](LTM_DP_BASELINE_STATUS,{'val':_0x483017(0x30f),'ack':!![]});return;}const _0xdc0411=_0x20a8c7[_0x483017(0x240)]['length']>=(_0x20a8c7[_0x483017(0x1ec)][_0x483017(0x1b7)]||0x7)?_0x483017(0x29c)+_0x20a8c7[_0x483017(0x240)]['length']+_0x483017(0x2de):_0x483017(0x1ee)+_0x20a8c7[_0x483017(0x240)]['length']+'/'+(_0x20a8c7['config']['minDaysForBaseline']||0x7)+')';await _0x20a8c7[_0x483017(0x2a5)](LTM_DP_BASELINE_STATUS,{'val':_0xdc0411,'ack':!![]});}async function initSensorSubscriptions(_0x5c3d7c){const _0x313dd4=a0_0x5ac575,_0x46018f=_0x5c3d7c[_0x313dd4(0x1ec)][_0x313dd4(0x31e)];if(_0x46018f)for(const _0x3c78e7 of _0x46018f){await _0x5c3d7c[_0x313dd4(0x26c)](_0x3c78e7['id']);}}async function initPresenceSubscriptions(_0x2408ff){const _0x585b6c=a0_0x5ac575,_0x2ace41=_0x2408ff['config'][_0x585b6c(0x303)];if(_0x2ace41)for(const _0xc07dc2 of _0x2ace41){await _0x2408ff[_0x585b6c(0x26c)](_0xc07dc2);}}async function setupTelegramListener(_0x4daa0f){const _0x4c594b=a0_0x5ac575,_0x2dbc18=_0x4daa0f[_0x4c594b(0x1ec)][_0x4c594b(0x1e1)];if(_0x4daa0f[_0x4c594b(0x1ec)][_0x4c594b(0x24a)]&&_0x2dbc18)await _0x4daa0f[_0x4c594b(0x26c)](_0x2dbc18+_0x4c594b(0x2eb));}async function checkWifiPresence(_0x1b3b14){const _0xcc4d1d=a0_0x5ac575;try{const _0x29d997=_0x1b3b14[_0xcc4d1d(0x1ec)][_0xcc4d1d(0x303)]||[];let _0x17804b=![];const _0x2d7f5f=[];for(const _0x5dbd6f of _0x29d997){try{const _0x573b4d=await _0x1b3b14['getForeignStateAsync'](_0x5dbd6f);_0x573b4d&&(_0x573b4d['val']===!![]||_0x573b4d[_0xcc4d1d(0x32c)]===_0xcc4d1d(0x1e7)||_0x573b4d[_0xcc4d1d(0x32c)]===0x1)&&(_0x17804b=!![],_0x2d7f5f['push'](_0x5dbd6f));}catch(_0x20af3){}}return await _0x1b3b14[_0xcc4d1d(0x2a5)](_0xcc4d1d(0x273),{'val':_0x2d7f5f[_0xcc4d1d(0x209)](',\x20'),'ack':!![]}),_0x17804b&&(_0x1b3b14[_0xcc4d1d(0x2cb)]&&(_0x1b3b14[_0xcc4d1d(0x243)]['info']('WiFi\x20Presence\x20detected.'),abortExitTimer(_0x1b3b14)),!_0x1b3b14[_0xcc4d1d(0x21a)]&&_0x1b3b14[_0xcc4d1d(0x2b9)]===SYSTEM_MODES[_0xcc4d1d(0x2b3)]&&await setPresence(_0x1b3b14,!![])),_0x17804b;}catch(_0x5079ec){return![];}}function startExitTimer(_0x155163){const _0x358367=a0_0x5ac575;abortExitTimer(_0x155163),_0x155163[_0x358367(0x311)]=!![],_0x155163[_0x358367(0x1bf)]=setTimeout(()=>{const _0x228728=_0x358367;_0x155163[_0x228728(0x311)]=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),_0x155163[_0x358367(0x2cb)]=setTimeout(()=>{const _0x5e5387=_0x358367;setPresence(_0x155163,![]),_0x155163[_0x5e5387(0x2cb)]=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}function a0_0x31df(_0x52eacd,_0x2ca268){const _0x338763=a0_0x3587();return a0_0x31df=function(_0x119baa,_0x14057d){_0x119baa=_0x119baa-0x1b1;let _0x358748=_0x338763[_0x119baa];return _0x358748;},a0_0x31df(_0x52eacd,_0x2ca268);}function abortExitTimer(_0x56b0cc){const _0x4a35fe=a0_0x5ac575;if(_0x56b0cc[_0x4a35fe(0x2cb)])clearTimeout(_0x56b0cc[_0x4a35fe(0x2cb)]);if(_0x56b0cc['exitGraceTimer'])clearTimeout(_0x56b0cc[_0x4a35fe(0x1bf)]);_0x56b0cc[_0x4a35fe(0x2cb)]=null,_0x56b0cc[_0x4a35fe(0x1bf)]=null,_0x56b0cc['isGracePeriodActive']=![];}async function setPresence(_0x4fbef7,_0x12bd4e){const _0x56abb9=a0_0x5ac575;if(_0x4fbef7[_0x56abb9(0x21a)]===_0x12bd4e)return;_0x4fbef7['isPresent']=_0x12bd4e,await _0x4fbef7['setStateAsync']('system.isPresent',{'val':_0x12bd4e,'ack':!![]});}async function executeAutomationAction(_0x148b65){const _0x2cb213=a0_0x5ac575;try{const _0x551a02=await _0x148b65[_0x2cb213(0x280)](_0x2cb213(0x1b9)),_0x12e75e=await _0x148b65[_0x2cb213(0x280)]('analysis.automation.targetValue');if(_0x551a02&&_0x551a02[_0x2cb213(0x32c)]&&_0x12e75e){const _0x269c22=_0x551a02['val'];let _0x126540=_0x12e75e[_0x2cb213(0x32c)];try{_0x126540=JSON[_0x2cb213(0x300)](_0x126540);}catch(_0x1c4d3b){}_0x148b65[_0x2cb213(0x243)][_0x2cb213(0x2da)](_0x2cb213(0x1ce)+_0x269c22+_0x2cb213(0x2c3)+_0x126540),await _0x148b65[_0x2cb213(0x2af)](_0x269c22,_0x126540);}else _0x148b65['log'][_0x2cb213(0x329)](_0x2cb213(0x2e5));}catch(_0x47dd9b){_0x148b65[_0x2cb213(0x243)][_0x2cb213(0x265)](_0x2cb213(0x30b)+_0x47dd9b[_0x2cb213(0x25a)]);}}async function processSensorEvent(_0x4720e0,_0x3b3f77,_0x362cac,_0x17b84e){const _0x12ab4d=a0_0x5ac575;if(!_0x17b84e)return;const _0x35c92b=_0x362cac['val'],_0x4d64eb=Date['now'](),_0x54a9c5=_0x4720e0['sensorLastValues'][_0x3b3f77];_0x4720e0[_0x12ab4d(0x268)][_0x3b3f77]=_0x35c92b;if(!_0x17b84e[_0x12ab4d(0x2c1)]&&_0x54a9c5!=undefined&&_0x54a9c5==_0x35c92b)return;const _0x33e305=(_0x17b84e[_0x12ab4d(0x1c7)]||'')[_0x12ab4d(0x2c8)](),_0x38584f=_0x33e305[_0x12ab4d(0x21b)](_0x12ab4d(0x1f3))||_0x33e305['includes'](_0x12ab4d(0x1cb))||_0x33e305[_0x12ab4d(0x21b)](_0x12ab4d(0x326))||_0x33e305['includes'](_0x12ab4d(0x25d));_0x4720e0[_0x12ab4d(0x281)]&&_0x38584f&&recordThermodynamics(_0x4720e0,_0x3b3f77,_0x35c92b,_0x17b84e[_0x12ab4d(0x2e7)]);const _0x4a0ccd={'timestamp':_0x4d64eb,'id':_0x3b3f77,'name':_0x17b84e[_0x12ab4d(0x297)],'type':_0x17b84e[_0x12ab4d(0x1c7)],'location':_0x17b84e[_0x12ab4d(0x2e7)],'value':_0x35c92b};_0x4720e0['eventHistory'][_0x12ab4d(0x32f)](_0x4a0ccd);if(_0x4720e0['eventHistory'][_0x12ab4d(0x28c)]>HISTORY_MAX_SIZE)_0x4720e0['eventHistory']['pop']();await _0x4720e0[_0x12ab4d(0x2a5)](_0x12ab4d(0x1d3),{'val':JSON[_0x12ab4d(0x295)](_0x4a0ccd),'ack':!![]}),await _0x4720e0[_0x12ab4d(0x2a5)](_0x12ab4d(0x25b),{'val':JSON['stringify'](_0x4720e0['eventHistory']),'ack':!![]});_0x4720e0['isProVersion']&&(_0x4720e0['rawEventLog'][_0x12ab4d(0x2d0)](_0x4a0ccd),await saveRawEventLog(_0x4720e0),recordSequence(_0x4720e0,_0x4a0ccd));if(_0x17b84e[_0x12ab4d(0x286)]&&_0x35c92b===!![]){if(_0x4720e0[_0x12ab4d(0x21a)]&&!_0x4720e0[_0x12ab4d(0x311)])startExitTimer(_0x4720e0);else{if(!_0x4720e0[_0x12ab4d(0x21a)])setPresence(_0x4720e0,!![]);}}else{if(_0x17b84e[_0x12ab4d(0x1c7)]==='motion'&&_0x35c92b===!![]){if(_0x4720e0['exitTimer'])abortExitTimer(_0x4720e0);if(!_0x4720e0[_0x12ab4d(0x21a)]&&_0x4720e0[_0x12ab4d(0x2b9)]===SYSTEM_MODES[_0x12ab4d(0x2b3)])setPresence(_0x4720e0,!![]);}}}async function recordThermodynamics(_0x4d3971,_0x1b93ce,_0x221199,_0x1975b9){const _0x21c1f0=a0_0x5ac575,_0x813ce8=await getOutsideTemperatureNumeric(_0x4d3971),_0x50a8be=await _0x4d3971['getStateAsync']('LTM.trainingData.thermodynamics');let _0x125e47=[];if(_0x50a8be&&_0x50a8be[_0x21c1f0(0x32c)])try{_0x125e47=JSON[_0x21c1f0(0x300)](_0x50a8be[_0x21c1f0(0x32c)]);}catch(_0x44fd7a){}_0x125e47[_0x21c1f0(0x2d0)]({'ts':Date[_0x21c1f0(0x30c)](),'room':_0x1975b9||_0x21c1f0(0x2fc),'t_in':_0x221199,'t_out':_0x813ce8});if(_0x125e47[_0x21c1f0(0x28c)]>THERMO_LOG_SIZE)_0x125e47[_0x21c1f0(0x322)]();await _0x4d3971[_0x21c1f0(0x2a5)](_0x21c1f0(0x1e2),{'val':JSON[_0x21c1f0(0x295)](_0x125e47),'ack':!![]});}async function getOutsideTemperatureNumeric(_0x138239){const _0x4889d2=a0_0x5ac575;if(_0x138239[_0x4889d2(0x1ec)][_0x4889d2(0x27d)])try{const _0xae1d9d=await _0x138239[_0x4889d2(0x260)](_0x138239['config'][_0x4889d2(0x27d)]);if(_0xae1d9d&&_0xae1d9d[_0x4889d2(0x32c)]!==undefined&&_0xae1d9d[_0x4889d2(0x32c)]!==null)return parseFloat(_0xae1d9d[_0x4889d2(0x32c)]);}catch(_0x3e14ce){}const _0x1fb416=_0x138239['config'][_0x4889d2(0x25f)];if(!_0x138239[_0x4889d2(0x1ec)][_0x4889d2(0x2fb)]||!_0x1fb416)return null;try{let _0xef9fa6='';if(_0x1fb416[_0x4889d2(0x21b)](_0x4889d2(0x291)))_0xef9fa6=_0x1fb416+_0x4889d2(0x1d7);else{if(_0x1fb416[_0x4889d2(0x21b)](_0x4889d2(0x2c7)))_0xef9fa6=_0x1fb416+'.NextHours.Location_1.Day_1.current.temp_value';else{if(_0x1fb416['includes'](_0x4889d2(0x266)))_0xef9fa6=_0x1fb416+_0x4889d2(0x1d0);else{if(_0x1fb416[_0x4889d2(0x21b)](_0x4889d2(0x309)))_0xef9fa6=_0x1fb416+'.forecast.current.temp';}}}if(_0xef9fa6){const _0x2b49f4=await _0x138239[_0x4889d2(0x260)](_0xef9fa6);if(_0x2b49f4&&_0x2b49f4[_0x4889d2(0x32c)]!==undefined&&_0x2b49f4['val']!==null)return parseFloat(_0x2b49f4[_0x4889d2(0x32c)]);}}catch(_0xd27e48){}return null;}async function recordSequence(_0x43e284,_0x27d982){const _0x61996f=a0_0x5ac575,_0x20f0a6=(_0x27d982[_0x61996f(0x1c7)]||'')[_0x61996f(0x2c8)](),_0x4bfa6d=[_0x61996f(0x1f7),_0x61996f(0x229),'prÃ¤senz','presence',_0x61996f(0x2f8),_0x61996f(0x227),_0x61996f(0x20b),_0x61996f(0x2b4),'fenster',_0x61996f(0x34a),_0x61996f(0x2ab),_0x61996f(0x211),_0x61996f(0x26a),_0x61996f(0x2d2),_0x61996f(0x1cd),_0x61996f(0x250),_0x61996f(0x314)];if(!_0x4bfa6d[_0x61996f(0x285)](_0x523d1f=>_0x20f0a6[_0x61996f(0x21b)](_0x523d1f)))return;if(!_0x27d982[_0x61996f(0x33f)])return;if(sequenceTimer)clearTimeout(sequenceTimer);activeSequence[_0x61996f(0x2d0)]({'loc':_0x27d982['location']||_0x61996f(0x2fc),'id':_0x27d982['id'],'ts':Date[_0x61996f(0x30c)]()}),sequenceTimer=setTimeout(async()=>{if(activeSequence['length']>0x1)await saveCompletedSequence(_0x43e284);activeSequence=[];},SEQUENCE_TIMEOUT_MS);}async function saveCompletedSequence(_0x3c0915){const _0x974dc=a0_0x5ac575;try{const _0x21a3f0=await _0x3c0915[_0x974dc(0x280)]('LTM.trainingData.sequences');let _0x852e8a=[];if(_0x21a3f0&&_0x21a3f0[_0x974dc(0x32c)])try{_0x852e8a=JSON['parse'](_0x21a3f0[_0x974dc(0x32c)]);}catch(_0x4b5cc1){}const _0xddd7ef=activeSequence[0x0]['ts'],_0x35ffd6=activeSequence['map'](_0x16a859=>({'loc':_0x16a859[_0x974dc(0x1b1)],'t_delta':Math[_0x974dc(0x225)]((_0x16a859['ts']-_0xddd7ef)/0x3e8)})),_0x1ead6c={'timestamp':new Date(_0xddd7ef)[_0x974dc(0x2be)](),'steps':_0x35ffd6,'duration':Math[_0x974dc(0x225)]((activeSequence[activeSequence[_0x974dc(0x28c)]-0x1]['ts']-_0xddd7ef)/0x3e8),'daytime':new Date(_0xddd7ef)['getHours']()};_0x852e8a[_0x974dc(0x2d0)](_0x1ead6c);if(_0x852e8a['length']>MAX_TRAINING_SET_SIZE)_0x852e8a['shift']();await _0x3c0915[_0x974dc(0x2a5)](_0x974dc(0x1d4),{'val':JSON['stringify'](_0x852e8a),'ack':!![]}),runSecurityCheck(_0x3c0915,_0x1ead6c);}catch(_0xa37e69){_0x3c0915['log'][_0x974dc(0x265)](_0x974dc(0x2e1)+_0xa37e69[_0x974dc(0x25a)]);}}function runSecurityCheck(_0x58d8be,_0x5ba89f){const _0x8c3a2c=a0_0x5ac575;if(!_0x58d8be['isProVersion'])return;sendToPython(_0x58d8be,_0x8c3a2c(0x267),{'sequence':_0x5ba89f});}async function createDailyDigest(_0x42a10){const _0x39794a=a0_0x5ac575;if(!_0x42a10['isProVersion'])return;await _0x42a10[_0x39794a(0x2a5)](LTM_DP_STATUS,{'val':'Started...','ack':!![]});if(!_0x42a10[_0x39794a(0x31c)]||_0x42a10[_0x39794a(0x252)][_0x39794a(0x28c)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x42a10[_0x39794a(0x2a5)](LTM_DP_STATUS,{'val':_0x39794a(0x2f9),'ack':!![]});return;}const _0x2289fb=JSON[_0x39794a(0x300)](JSON['stringify'](_0x42a10['rawEventLog'])),_0x991f15=_0x2289fb[_0x39794a(0x28c)],_0x8aeec3=_0x39794a(0x222)+JSON[_0x39794a(0x295)](_0x2289fb);try{const _0x24e82=await _0x42a10[_0x39794a(0x31c)][_0x39794a(0x1dd)](_0x8aeec3),_0x3c967e=JSON[_0x39794a(0x300)](_0x24e82[_0x39794a(0x279)][_0x39794a(0x305)]()[_0x39794a(0x1ff)](/```json|```/g,'')['trim']()),_0x2445dc={'timestamp':new Date()['toISOString'](),'eventCount':_0x991f15,'summary':_0x3c967e['summary']||'Digest','activityLevel':_0x3c967e[_0x39794a(0x1e3)]||'normal','systemMode':_0x42a10[_0x39794a(0x2b9)]};_0x42a10['dailyDigests'][_0x39794a(0x2d0)](_0x2445dc),await saveDailyDigests(_0x42a10),_0x42a10[_0x39794a(0x252)]=[],await saveRawEventLog(_0x42a10),await _0x42a10['setStateAsync'](LTM_DP_STATUS,{'val':_0x39794a(0x284),'ack':!![]});if(_0x42a10[_0x39794a(0x281)])sendToPython(_0x42a10,'ANALYZE_HEALTH',{'digest':_0x2445dc});}catch(_0x54c58a){_0x42a10[_0x39794a(0x243)][_0x39794a(0x265)](_0x54c58a[_0x39794a(0x25a)]);}}async function runBaselineDriftAnalysis(_0x123384){const _0x2611a7=a0_0x5ac575;if(!_0x123384[_0x2611a7(0x281)]||!_0x123384[_0x2611a7(0x31c)])return;const _0x5b660b=_0x123384['config']['ltmStbWindowDays']||0xe;if(_0x123384[_0x2611a7(0x240)][_0x2611a7(0x28c)]<_0x5b660b+0x7){await _0x123384[_0x2611a7(0x2a5)](LTM_DP_DRIFT_STATUS,{'val':_0x2611a7(0x274),'ack':!![]});return;}const _0x1ecbbc=_0x123384[_0x2611a7(0x240)][_0x2611a7(0x233)](-_0x5b660b),_0x4dfea7=_0x123384['dailyDigests']['slice'](0x0,_0x123384['dailyDigests'][_0x2611a7(0x28c)]-_0x5b660b),_0xe9dd53=_0x2611a7(0x296)+JSON[_0x2611a7(0x295)](_0x4dfea7)+'\x0aSTB:\x20'+JSON['stringify'](_0x1ecbbc);try{const _0x4ab505=await _0x123384[_0x2611a7(0x31c)][_0x2611a7(0x1dd)](_0xe9dd53),_0x35f607=JSON[_0x2611a7(0x300)](_0x4ab505['response'][_0x2611a7(0x305)]()[_0x2611a7(0x1ff)](/```json|```/g,'')['trim']());_0x35f607[_0x2611a7(0x2d4)]&&(await _0x123384[_0x2611a7(0x2a5)](LTM_DP_DRIFT_STATUS,{'val':_0x35f607[_0x2611a7(0x2d4)],'ack':!![]}),await _0x123384[_0x2611a7(0x2a5)](LTM_DP_DRIFT_DETAILS,{'val':_0x35f607['driftDetails'],'ack':!![]}),await _0x123384[_0x2611a7(0x2a5)](LTM_DP_DRIFT_LAST_CHECK,{'val':Date[_0x2611a7(0x30c)](),'ack':!![]}));}catch(_0x2fd1ec){}}async function sendMorningBriefing(_0x4fab07){const _0x2a19c4=a0_0x5ac575;if(!_0x4fab07[_0x2a19c4(0x31c)])return;try{const _0x4fb0b2=_0x2a19c4(0x1e9),_0x278106=await _0x4fab07[_0x2a19c4(0x31c)][_0x2a19c4(0x1dd)](_0x4fb0b2),_0x21aab6=_0x278106['response'][_0x2a19c4(0x305)]();sendNotification(_0x4fab07,_0x2a19c4(0x1cf)+_0x21aab6);}catch(_0x48d4d8){_0x4fab07[_0x2a19c4(0x243)][_0x2a19c4(0x265)](_0x2a19c4(0x275)+_0x48d4d8[_0x2a19c4(0x25a)]);}}function stopPythonService(_0x160bcb){const _0x624969=a0_0x5ac575;if(_0x160bcb['pythonProcess']){try{_0x160bcb[_0x624969(0x2f7)]['kill']();}catch(_0x3aa33a){}_0x160bcb[_0x624969(0x2f7)]=null;}}function sendToPython(_0x39f852,_0x7a479e,_0xd6297a={}){const _0x2353e8=a0_0x5ac575;if(!_0x39f852[_0x2353e8(0x2f7)]||!_0x39f852['pythonProcess'][_0x2353e8(0x336)][_0x2353e8(0x2ee)])return;const _0x3018eb=JSON[_0x2353e8(0x295)]({'command':_0x7a479e,..._0xd6297a});try{_0x39f852[_0x2353e8(0x2f7)][_0x2353e8(0x336)][_0x2353e8(0x1ef)](_0x3018eb+'\x0a');}catch(_0x3a95a7){}}function runPythonHealthCheck(_0x4efacd){const _0x1f5cb9=a0_0x5ac575;if(!_0x4efacd[_0x1f5cb9(0x240)]||_0x4efacd['dailyDigests'][_0x1f5cb9(0x28c)]<0x2)return;const _0x5416f4=_0x4efacd['dailyDigests'][_0x1f5cb9(0x29a)](_0x38348f=>{const _0x50448f=_0x1f5cb9,_0x34921a=(_0x38348f[_0x50448f(0x1e3)]||'')[_0x50448f(0x2c8)]();return ACTIVITY_LEVEL_MAP[_0x34921a]||0x32;});sendToPython(_0x4efacd,_0x1f5cb9(0x2f3),{'values':_0x5416f4,'tag':_0x1f5cb9(0x1bd)});}function handlePythonResult(_0x159d96,_0x3af80a){const _0x37e3aa=a0_0x5ac575;if(_0x3af80a[_0x37e3aa(0x1c7)]===_0x37e3aa(0x2cd))_0x159d96[_0x37e3aa(0x243)]['debug'](_0x37e3aa(0x257));else{if(_0x3af80a[_0x37e3aa(0x1c7)]===_0x37e3aa(0x343)){const {anomaly_score:_0x472822,is_anomaly:_0x43718f,threshold:_0x29d322,explanation:_0x4ca3b0}=_0x3af80a['payload'];_0x159d96['log'][_0x37e3aa(0x2da)](_0x37e3aa(0x235)+_0x472822[_0x37e3aa(0x288)](0x5)+_0x37e3aa(0x226)+(_0x43718f?'ANOMALY':'OK')),_0x159d96[_0x37e3aa(0x2a5)](_0x37e3aa(0x29f),{'val':_0x472822,'ack':!![]}),_0x159d96[_0x37e3aa(0x2a5)]('analysis.security.lastCheck',{'val':new Date()[_0x37e3aa(0x2be)](),'ack':!![]});if(_0x29d322)_0x159d96['setStateAsync'](_0x37e3aa(0x2d5),{'val':_0x29d322,'ack':!![]});if(_0x43718f){let _0x4c705c=_0x37e3aa(0x289)+_0x472822[_0x37e3aa(0x288)](0x4)+')';if(_0x4ca3b0&&_0x4ca3b0!=='Unknown')_0x4c705c+=_0x37e3aa(0x347)+_0x4ca3b0;_0x159d96[_0x37e3aa(0x2a5)](_0x37e3aa(0x272),{'val':!![],'ack':!![]}),_0x159d96[_0x37e3aa(0x2a5)](_0x37e3aa(0x2ad),{'val':_0x4c705c,'ack':!![]}),sendNotification(_0x159d96,'âš ï¸\x20SECURITY\x20ALARM:\x20'+_0x4c705c,![],!![]);}}else{if(_0x3af80a[_0x37e3aa(0x1c7)]===_0x37e3aa(0x246)){const _0x1d55b9=_0x3af80a[_0x37e3aa(0x1c3)]['details']||'',_0x2d0434=_0x3af80a[_0x37e3aa(0x1c3)]['threshold'],_0xb49490=_0x3af80a[_0x37e3aa(0x1c3)][_0x37e3aa(0x2e4)]?'Success:\x20'+new Date()[_0x37e3aa(0x349)]()+'\x20('+_0x1d55b9+')':_0x37e3aa(0x1fb)+_0x3af80a[_0x37e3aa(0x1c3)][_0x37e3aa(0x1b5)];_0x159d96['setStateAsync'](_0x37e3aa(0x310),{'val':_0xb49490,'ack':!![]});if(_0x3af80a[_0x37e3aa(0x1c3)]['success']&&_0x2d0434)_0x159d96[_0x37e3aa(0x2a5)]('analysis.security.currentThreshold',{'val':_0x2d0434,'ack':!![]});}else{if(_0x3af80a['type']===_0x37e3aa(0x230)){const {patterns:_0xb49a23}=_0x3af80a[_0x37e3aa(0x1c3)];if(_0xb49a23&&_0xb49a23[_0x37e3aa(0x28c)]>0x0){_0x159d96[_0x37e3aa(0x243)]['info'](_0x37e3aa(0x23d)+_0xb49a23[_0x37e3aa(0x28c)]+'\x20new\x20patterns.'),_0x159d96[_0x37e3aa(0x2a5)](_0x37e3aa(0x1d6),{'val':JSON[_0x37e3aa(0x295)](_0xb49a23),'ack':!![]});const _0x482cd7=_0xb49a23[0x0],_0xd3da6=_0x37e3aa(0x334)+_0x482cd7[_0x37e3aa(0x1e4)]+'\x20('+(_0x482cd7[_0x37e3aa(0x206)]*0x64)[_0x37e3aa(0x288)](0x0)+'%)';_0x159d96[_0x37e3aa(0x2a5)](_0x37e3aa(0x302),{'val':!![],'ack':!![]}),_0x159d96[_0x37e3aa(0x2a5)](_0x37e3aa(0x344),{'val':_0xd3da6,'ack':!![]});}else _0x159d96['log'][_0x37e3aa(0x2da)](_0x37e3aa(0x308)),_0x159d96[_0x37e3aa(0x2a5)]('analysis.automation.patternDetected',{'val':![],'ack':!![]}),_0x159d96[_0x37e3aa(0x2a5)](_0x37e3aa(0x1d6),{'val':'[]','ack':!![]});}else{if(_0x3af80a[_0x37e3aa(0x1c7)]===_0x37e3aa(0x1d8)){if(_0x3af80a['payload'][_0x37e3aa(0x2e4)])try{const _0x1bf82f=JSON[_0x37e3aa(0x300)](_0x3af80a[_0x37e3aa(0x1c3)][_0x37e3aa(0x328)]);if(_0x1bf82f[_0x37e3aa(0x32a)])_0x159d96[_0x37e3aa(0x2a5)](_0x37e3aa(0x2ef),{'val':JSON[_0x37e3aa(0x295)](_0x1bf82f[_0x37e3aa(0x32a)]),'ack':!![]});if(_0x1bf82f[_0x37e3aa(0x232)])_0x159d96[_0x37e3aa(0x2a5)](_0x37e3aa(0x247),{'val':JSON[_0x37e3aa(0x295)](_0x1bf82f[_0x37e3aa(0x232)]),'ack':!![]});}catch(_0xd8728a){}}else{if(_0x3af80a['type']===_0x37e3aa(0x1bb)){if(_0x3af80a[_0x37e3aa(0x1c3)][_0x37e3aa(0x2e4)])_0x159d96[_0x37e3aa(0x243)][_0x37e3aa(0x2da)](_0x37e3aa(0x324));}else{if(_0x3af80a[_0x37e3aa(0x1c7)]===_0x37e3aa(0x330))_0x159d96[_0x37e3aa(0x2a5)](_0x37e3aa(0x2a2),{'val':new Date()['toISOString'](),'ack':!![]}),_0x159d96['setStateAsync']('analysis.health.isAnomaly',{'val':_0x3af80a[_0x37e3aa(0x1c3)][_0x37e3aa(0x1da)],'ack':!![]});else{if(_0x3af80a[_0x37e3aa(0x1c7)]===_0x37e3aa(0x2cf))_0x159d96[_0x37e3aa(0x2a5)](_0x37e3aa(0x24f),{'val':_0x3af80a[_0x37e3aa(0x1c3)][_0x37e3aa(0x2d8)],'ack':!![]}),_0x159d96[_0x37e3aa(0x2a5)](_0x37e3aa(0x287),{'val':_0x3af80a[_0x37e3aa(0x1c3)][_0x37e3aa(0x2f2)],'ack':!![]});else{if(_0x3af80a['type']==='GAIT_RESULT'){const {speed_trend:_0x40069e}=_0x3af80a['payload'];if(_0x40069e!==undefined)_0x159d96['setStateAsync']('analysis.health.gaitSpeed',{'val':_0x40069e,'ack':!![]});}else{if(_0x3af80a['type']===_0x37e3aa(0x2c9)){const {forecast:_0x3c4f03}=_0x3af80a[_0x37e3aa(0x1c3)];if(_0x3c4f03)_0x159d96[_0x37e3aa(0x2a5)](_0x37e3aa(0x2fa),{'val':JSON['stringify'](_0x3c4f03),'ack':!![]});}else{if(_0x3af80a[_0x37e3aa(0x1c7)]===_0x37e3aa(0x237)){const {data:_0x4c0a1b}=_0x3af80a[_0x37e3aa(0x1c3)];_0x4c0a1b&&(_0x159d96[_0x37e3aa(0x243)][_0x37e3aa(0x2da)](_0x37e3aa(0x223)),_0x159d96[_0x37e3aa(0x2a5)](_0x37e3aa(0x2dc),{'val':JSON[_0x37e3aa(0x295)](_0x4c0a1b),'ack':!![]}));}}}}}}}}}}}}function startPythonService(_0x245531){const _0x1cbc13=a0_0x5ac575;let _0x87f544=_0x1cbc13(0x313);if(fs[_0x1cbc13(0x2a4)](installer[_0x1cbc13(0x24e)]))_0x87f544=installer['PYTHON_EXE'];try{const _0x3ef331=path[_0x1cbc13(0x209)](__dirname,_0x1cbc13(0x1ca),_0x1cbc13(0x292));_0x245531['pythonProcess']=spawn(_0x87f544,[_0x3ef331]),_0x245531[_0x1cbc13(0x2f7)]['stdout']['on'](_0x1cbc13(0x2ca),_0x465655=>{const _0x316b98=_0x1cbc13,_0x7e2397=_0x465655[_0x316b98(0x1d1)]()[_0x316b98(0x27e)]('\x0a');_0x7e2397[_0x316b98(0x22d)](_0x5d3f7f=>{const _0x544ab5=_0x316b98,_0x4abc0e=_0x5d3f7f[_0x544ab5(0x331)]();if(!_0x4abc0e)return;if(_0x4abc0e['startsWith'](_0x544ab5(0x204)))_0x245531[_0x544ab5(0x243)][_0x544ab5(0x21d)](_0x544ab5(0x2b2)+_0x4abc0e[_0x544ab5(0x238)](0x5)[_0x544ab5(0x331)]());else{if(_0x4abc0e[_0x544ab5(0x203)](_0x544ab5(0x34b)))try{const _0x2cb2e9=JSON['parse'](_0x4abc0e[_0x544ab5(0x238)](0x8)[_0x544ab5(0x331)]());handlePythonResult(_0x245531,_0x2cb2e9);}catch(_0x108498){}}});}),_0x245531[_0x1cbc13(0x2f7)]['on'](_0x1cbc13(0x202),_0x44dcde=>{const _0xf635c9=_0x1cbc13;_0x245531[_0xf635c9(0x2f7)]=null;});}catch(_0x324e04){_0x245531['log'][_0x1cbc13(0x265)](_0x1cbc13(0x28b)+_0x324e04[_0x1cbc13(0x25a)]);}}async function runAutopilot(_0x527777){const _0x3b776f=a0_0x5ac575;_0x527777['log'][_0x3b776f(0x21d)]('ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...'),await runGeminiAnalysis(_0x527777),updateHealthVector(_0x527777),triggerGaitAnalysis(_0x527777),triggerEnergyPrediction(_0x527777);}async function triggerGaitAnalysis(_0x3a51eb){const _0x485160=a0_0x5ac575;if(!_0x3a51eb[_0x485160(0x281)])return;try{const _0xfb7add=await _0x3a51eb[_0x485160(0x280)](_0x485160(0x1d4));_0xfb7add&&_0xfb7add['val']&&sendToPython(_0x3a51eb,_0x485160(0x21f),{'sequences':JSON[_0x485160(0x300)](_0xfb7add['val'])});}catch(_0x51a12a){}}async function triggerEnergyPrediction(_0x24b1ef){const _0x28c65c=a0_0x5ac575;if(!_0x24b1ef['isProVersion'])return;try{const _0x372f67=await getOutsideTemperatureNumeric(_0x24b1ef);if(_0x372f67===null)return;const _0x4ade2a={},_0x1151fb=_0x24b1ef[_0x28c65c(0x1ec)][_0x28c65c(0x31e)]||[];for(const _0x5ca842 of _0x1151fb){if(_0x5ca842[_0x28c65c(0x1c7)]===_0x28c65c(0x1f3)&&_0x5ca842[_0x28c65c(0x2e7)]){const _0x1159d8=_0x24b1ef[_0x28c65c(0x268)][_0x5ca842['id']];if(_0x1159d8!==undefined)_0x4ade2a[_0x5ca842[_0x28c65c(0x2e7)]]=_0x1159d8;}}Object[_0x28c65c(0x2ff)](_0x4ade2a)[_0x28c65c(0x28c)]>0x0&&sendToPython(_0x24b1ef,'PREDICT_ENERGY',{'current_temps':_0x4ade2a,'t_out':_0x372f67});}catch(_0x107dad){}}function updateHealthVector(_0x394213){const _0x58938f=a0_0x5ac575;if(!_0x394213['rawEventLog']||_0x394213[_0x58938f(0x252)][_0x58938f(0x28c)]===0x0)return;const _0x3fd986=new Array(0x60)['fill'](0x0),_0x5a7baf=new Date()[_0x58938f(0x244)](0x0,0x0,0x0,0x0);_0x394213[_0x58938f(0x252)][_0x58938f(0x22d)](_0x380e1d=>{const _0x336024=_0x58938f,_0x53a32f=new Date(_0x380e1d['timestamp']);if(_0x53a32f[_0x336024(0x200)]()>=_0x5a7baf){const _0x5627c5=_0x53a32f[_0x336024(0x221)](),_0x589271=_0x53a32f[_0x336024(0x304)](),_0x3e9b8a=_0x5627c5*0x4+Math[_0x336024(0x1f1)](_0x589271/0xf);if(_0x3e9b8a>=0x0&&_0x3e9b8a<0x60)_0x3fd986[_0x3e9b8a]++;}}),_0x394213['setStateAsync'](_0x58938f(0x325),{'val':JSON[_0x58938f(0x295)](_0x3fd986),'ack':!![]});}async function getWeatherContext(_0x46acb1){const _0x25c2de=a0_0x5ac575;if(!_0x46acb1[_0x25c2de(0x1ec)][_0x25c2de(0x2fb)]||!_0x46acb1[_0x25c2de(0x1ec)]['weatherInstance'])return _0x25c2de(0x259);try{const _0x1d9dfc=_0x46acb1[_0x25c2de(0x1ec)][_0x25c2de(0x25f)];let _0x3952a6=await _0x46acb1['getForeignStateAsync'](_0x1d9dfc+_0x25c2de(0x1d7));if(!_0x3952a6)_0x3952a6=await _0x46acb1[_0x25c2de(0x260)](_0x1d9dfc+'.forecast.current.temperature');let _0xc69483=await _0x46acb1['getForeignStateAsync'](_0x1d9dfc+_0x25c2de(0x2ac));if(!_0xc69483)_0xc69483=await _0x46acb1[_0x25c2de(0x260)](_0x1d9dfc+'.forecast.current.state');if(_0x3952a6&&_0xc69483)return _0x3952a6['val']+_0x25c2de(0x32b)+_0xc69483[_0x25c2de(0x32c)];}catch(_0x2d1c79){}return _0x25c2de(0x315);}async function getCalendarContext(_0x5cf706){const _0x236bf2=a0_0x5ac575;if(!_0x5cf706[_0x236bf2(0x1ec)][_0x236bf2(0x2a7)]||!_0x5cf706[_0x236bf2(0x1ec)][_0x236bf2(0x263)])return _0x236bf2(0x22f);return _0x236bf2(0x271);}async function getCalendarNames(_0xdb6360,_0x207224){return[];}async function saveFeedback(_0x121c7c,_0x2502d4){const _0x36c63a=a0_0x5ac575;_0x121c7c[_0x36c63a(0x243)][_0x36c63a(0x2da)](_0x36c63a(0x2ae)+_0x2502d4[_0x36c63a(0x34c)]);}async function runGeminiAnalysis(_0x551390,_0x500801=''){const _0x5a5c0d=a0_0x5ac575;if(!_0x551390[_0x5a5c0d(0x31c)])return;if(_0x551390['eventHistory'][_0x5a5c0d(0x28c)]===0x0)return;const _0x2dd1a6=_0x551390[_0x5a5c0d(0x33d)][_0x5a5c0d(0x233)](0x0,0xf),_0x54baeb=await getWeatherContext(_0x551390),_0x1ce082=_0x551390[_0x5a5c0d(0x2b9)],_0x445504=PERSONA_MAPPING[_0x551390[_0x5a5c0d(0x1ec)][_0x5a5c0d(0x2e6)]||_0x5a5c0d(0x23a)],_0x44dc89=_0x551390[_0x5a5c0d(0x1ec)][_0x5a5c0d(0x2c4)]||_0x5a5c0d(0x239);let _0x3a6817=_0x5a5c0d(0x342);try{const _0xbad99f=await _0x551390[_0x5a5c0d(0x280)](_0x5a5c0d(0x273));if(_0xbad99f&&_0xbad99f[_0x5a5c0d(0x32c)])_0x3a6817=_0xbad99f[_0x5a5c0d(0x32c)];}catch(_0x2fcfc2){}let _0x5b7a21=![];try{const _0x2788fe=await _0x551390[_0x5a5c0d(0x280)](_0x5a5c0d(0x340));if(_0x2788fe&&_0x2788fe['val'])_0x5b7a21=!![];}catch(_0xc9ac21){}const _0x222b9f=_0x5a5c0d(0x341)+_0x445504+_0x5a5c0d(0x217)+_0x44dc89+'.\x20SYSTEM_MODE:\x20'+_0x1ce082+_0x5a5c0d(0x234)+_0x54baeb+'.\x20ANWESEND:\x20'+_0x3a6817+_0x5a5c0d(0x218)+JSON['stringify'](_0x2dd1a6)+_0x5a5c0d(0x2db)+_0x500801+'.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}';try{const _0xb9a797=await _0x551390['geminiModel']['generateContent'](_0x222b9f),_0x3a94a8=JSON[_0x5a5c0d(0x300)](_0xb9a797['response'][_0x5a5c0d(0x305)]()[_0x5a5c0d(0x1ff)](/```json|```/g,'')[_0x5a5c0d(0x331)]());await _0x551390[_0x5a5c0d(0x2a5)]('analysis.lastResult',{'val':JSON[_0x5a5c0d(0x295)](_0x3a94a8),'ack':!![]});if(_0x3a94a8['summary'])await _0x551390['setStateAsync'](_0x5a5c0d(0x1b3),{'val':_0x3a94a8[_0x5a5c0d(0x22a)],'ack':!![]});const _0x2c5368={'timestamp':Date['now'](),'id':Date[_0x5a5c0d(0x30c)]()[_0x5a5c0d(0x1d1)](),'analysis':{'activity':{'summary':_0x3a94a8[_0x5a5c0d(0x22a)],'isAlert':_0x3a94a8[_0x5a5c0d(0x25e)],'alertReason':_0x3a94a8[_0x5a5c0d(0x290)]},'comfort':{'automationProposal':_0x3a94a8['automationProposal']}}};await updateAnalysisHistory(_0x551390,_0x2c5368);const _0x97dd45=_0x3a94a8[_0x5a5c0d(0x25e)]||![];_0x97dd45!==_0x551390[_0x5a5c0d(0x327)]&&(await _0x551390[_0x5a5c0d(0x2a5)](_0x5a5c0d(0x272),{'val':_0x97dd45,'ack':!![]}),_0x551390[_0x5a5c0d(0x327)]=_0x97dd45,_0x97dd45&&(await _0x551390[_0x5a5c0d(0x2a5)](_0x5a5c0d(0x2ad),{'val':_0x3a94a8[_0x5a5c0d(0x290)],'ack':!![]}),sendNotification(_0x551390,_0x5a5c0d(0x2f6)+_0x3a94a8[_0x5a5c0d(0x290)],![],_0x3a94a8[_0x5a5c0d(0x2ce)])));if(_0x3a94a8[_0x5a5c0d(0x31f)]&&_0x3a94a8[_0x5a5c0d(0x31f)][_0x5a5c0d(0x2c2)]){await _0x551390[_0x5a5c0d(0x2a5)]('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),await _0x551390[_0x5a5c0d(0x2a5)](_0x5a5c0d(0x344),{'val':_0x3a94a8[_0x5a5c0d(0x31f)][_0x5a5c0d(0x2ed)],'ack':!![]}),await _0x551390[_0x5a5c0d(0x2a5)](_0x5a5c0d(0x1b9),{'val':_0x3a94a8[_0x5a5c0d(0x31f)][_0x5a5c0d(0x22c)],'ack':!![]}),await _0x551390['setStateAsync'](_0x5a5c0d(0x1d9),{'val':JSON[_0x5a5c0d(0x295)](_0x3a94a8[_0x5a5c0d(0x31f)]['targetValue']),'ack':!![]});if(_0x5b7a21)executeAutomationAction(_0x551390);}}catch(_0x5d4189){_0x551390['log'][_0x5a5c0d(0x265)](_0x5a5c0d(0x22e)+_0x5d4189[_0x5a5c0d(0x25a)]);}}async function startSystem(_0x502a1e){const _0x8c373e=a0_0x5ac575;_0x502a1e[_0x8c373e(0x243)][_0x8c373e(0x2da)](_0x8c373e(0x1de)),await initZombies(_0x502a1e);try{_0x502a1e[_0x8c373e(0x281)]=await checkLicense(_0x502a1e[_0x8c373e(0x1ec)][_0x8c373e(0x2bc)]);}catch(_0x3f7778){}if(!_0x502a1e[_0x8c373e(0x1ec)][_0x8c373e(0x23f)]||_0x502a1e[_0x8c373e(0x1ec)][_0x8c373e(0x23f)]<0.1)_0x502a1e[_0x8c373e(0x1ec)][_0x8c373e(0x23f)]=0xc;await initHistory(_0x502a1e),await initSystemConfig(_0x502a1e);if(_0x502a1e[_0x8c373e(0x1ec)][_0x8c373e(0x262)])try{_0x502a1e['genAI']=new GoogleGenerativeAI(_0x502a1e['config'][_0x8c373e(0x262)]),_0x502a1e[_0x8c373e(0x31c)]=_0x502a1e['genAI'][_0x8c373e(0x33b)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x8c373e(0x231)}}),_0x502a1e[_0x8c373e(0x243)][_0x8c373e(0x2da)](_0x8c373e(0x1d2));}catch(_0x171224){_0x502a1e[_0x8c373e(0x243)]['error']('Gemini\x20Init\x20Error:\x20'+_0x171224[_0x8c373e(0x25a)]);}await createAllObjects(_0x502a1e),await loadSystemMode(_0x502a1e),await loadRawEventLog(_0x502a1e),await loadDailyDigests(_0x502a1e),_0x502a1e[_0x8c373e(0x307)](_0x8c373e(0x323)),_0x502a1e[_0x8c373e(0x307)](LTM_DP_TRIGGER_DIGEST),_0x502a1e['subscribeStates'](_0x8c373e(0x1f6)),_0x502a1e[_0x8c373e(0x307)](_0x8c373e(0x2d6)),_0x502a1e[_0x8c373e(0x307)]('analysis.automation.triggerAction'),_0x502a1e[_0x8c373e(0x307)](_0x8c373e(0x340)),_0x502a1e[_0x8c373e(0x307)]('analysis.training.triggerSecurity'),_0x502a1e[_0x8c373e(0x307)](_0x8c373e(0x21e)),_0x502a1e[_0x8c373e(0x307)](_0x8c373e(0x23c)),_0x502a1e['subscribeStates'](_0x8c373e(0x2d1)),_0x502a1e['subscribeStates'](_0x8c373e(0x241)),await initSensorSubscriptions(_0x502a1e),await initPresenceSubscriptions(_0x502a1e),await setupTelegramListener(_0x502a1e),setTimeout(()=>checkWifiPresence(_0x502a1e),0x1388);if(_0x502a1e['analysisTimer'])clearInterval(_0x502a1e[_0x8c373e(0x1fa)]);const _0x4e5125=_0x502a1e[_0x8c373e(0x1ec)][_0x8c373e(0x2d9)]||0xf;_0x4e5125>0x0&&(_0x502a1e[_0x8c373e(0x1fa)]=setInterval(()=>{runAutopilot(_0x502a1e);},_0x4e5125*0x3c*0x3e8)),schedulers[_0x8c373e(0x25c)](_0x502a1e,()=>createDailyDigest(_0x502a1e)),schedulers[_0x8c373e(0x27f)](_0x502a1e),schedulers[_0x8c373e(0x210)](_0x502a1e,()=>runBaselineDriftAnalysis(_0x502a1e)),schedulers['setupBriefingScheduler'](_0x502a1e,()=>sendMorningBriefing(_0x502a1e)),startPythonService(_0x502a1e),setTimeout(()=>{const _0x4130e4=_0x8c373e;_0x502a1e[_0x4130e4(0x2f7)]&&(runPythonHealthCheck(_0x502a1e),triggerGaitAnalysis(_0x502a1e),triggerEnergyPrediction(_0x502a1e)),updateHealthVector(_0x502a1e);},0x1388);}class CogniLiving extends utils['Adapter']{constructor(_0x67179a){const _0x3a1bda=a0_0x5ac575;super({..._0x67179a,'name':_0x3a1bda(0x2b5)}),this[_0x3a1bda(0x33d)]=[],this[_0x3a1bda(0x2f5)]=[],this[_0x3a1bda(0x252)]=[],this[_0x3a1bda(0x240)]=[],this[_0x3a1bda(0x268)]={},this[_0x3a1bda(0x29e)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x3a1bda(0x21a)]=!![],this[_0x3a1bda(0x2cb)]=null,this[_0x3a1bda(0x1bf)]=null,this[_0x3a1bda(0x311)]=![],this[_0x3a1bda(0x205)]=null,this[_0x3a1bda(0x31c)]=null,this[_0x3a1bda(0x2b9)]=SYSTEM_MODES[_0x3a1bda(0x2b3)],this[_0x3a1bda(0x281)]=![],this[_0x3a1bda(0x327)]=![],this[_0x3a1bda(0x255)]=_0x3a1bda(0x306),this[_0x3a1bda(0x1fa)]=null,this[_0x3a1bda(0x278)]=null,this[_0x3a1bda(0x261)]=null,this['driftAnalysisTimer']=null,this['briefingJob']=null,this['pythonProcess']=null,this['dependencyInstallInProgress']=![],this['on'](_0x3a1bda(0x1c5),this[_0x3a1bda(0x2e8)]['bind'](this)),this['on'](_0x3a1bda(0x2e0),this['onStateChange']['bind'](this)),this['on'](_0x3a1bda(0x24d),this['onUnload']['bind'](this)),this['on'](_0x3a1bda(0x25a),this[_0x3a1bda(0x1fc)][_0x3a1bda(0x20e)](this));}async[a0_0x5ac575(0x2e8)](){const _0x27a7ad=a0_0x5ac575;this[_0x27a7ad(0x243)][_0x27a7ad(0x2da)]('cogni-living\x20adapter\x20starting\x20(v'+this[_0x27a7ad(0x207)]+_0x27a7ad(0x245));if(!installer[_0x27a7ad(0x1b4)](this,()=>startSystem(this)))return;}[a0_0x5ac575(0x31d)](_0x3bc583){const _0x418bf8=a0_0x5ac575;if(this['analysisTimer'])clearInterval(this[_0x418bf8(0x1fa)]);if(this[_0x418bf8(0x2fd)])clearInterval(this[_0x418bf8(0x2fd)]);if(this[_0x418bf8(0x278)])this[_0x418bf8(0x278)][_0x418bf8(0x270)]();if(this['modeResetJob'])this['modeResetJob'][_0x418bf8(0x270)]();if(this[_0x418bf8(0x28d)])this[_0x418bf8(0x28d)]['cancel']();if(this['exitTimer'])clearTimeout(this['exitTimer']);if(this[_0x418bf8(0x1bf)])clearTimeout(this[_0x418bf8(0x1bf)]);stopPythonService(this),_0x3bc583();}async[a0_0x5ac575(0x27b)](_0x39c130,_0x2b6b12){const _0x14da8d=a0_0x5ac575;if(!_0x2b6b12||this[_0x14da8d(0x2bd)])return;if(_0x39c130[_0x14da8d(0x21b)]('telegram')&&_0x39c130[_0x14da8d(0x294)]('communicate.request')&&_0x2b6b12[_0x14da8d(0x32c)]){await handleTelegramResponse(this,_0x2b6b12[_0x14da8d(0x32c)]);return;}if(_0x39c130===this[_0x14da8d(0x2f4)]+'.'+SYSTEM_DP_MODE){if(_0x2b6b12['val']&&Object[_0x14da8d(0x301)](SYSTEM_MODES)['includes'](_0x2b6b12[_0x14da8d(0x32c)])){this[_0x14da8d(0x2b9)]=_0x2b6b12[_0x14da8d(0x32c)];if(_0x2b6b12[_0x14da8d(0x32c)]===SYSTEM_MODES[_0x14da8d(0x1b2)])await setPresence(this,![]);else await setPresence(this,!![]);}if(!_0x2b6b12[_0x14da8d(0x2e2)])this[_0x14da8d(0x1eb)](_0x39c130,{'val':this['currentSystemMode'],'ack':!![]});return;}if(!_0x2b6b12['ack']){_0x39c130['includes'](_0x14da8d(0x323))&&_0x2b6b12[_0x14da8d(0x32c)]&&(this['setState'](_0x39c130,{'val':![],'ack':!![]}),runGeminiAnalysis(this));if(_0x39c130['includes'](_0x14da8d(0x33c))&&_0x2b6b12['val']){this['setState'](_0x39c130,{'val':![],'ack':!![]});if(this[_0x14da8d(0x281)])createDailyDigest(this);}_0x39c130['includes']('triggerBriefing')&&_0x2b6b12[_0x14da8d(0x32c)]&&(this[_0x14da8d(0x1eb)](_0x39c130,{'val':![],'ack':!![]}),sendMorningBriefing(this));_0x39c130[_0x14da8d(0x21b)]('automation.triggerAction')&&_0x2b6b12[_0x14da8d(0x32c)]&&(this['setState'](_0x39c130,{'val':![],'ack':!![]}),executeAutomationAction(this));if(_0x39c130[_0x14da8d(0x21b)](_0x14da8d(0x2e9))&&_0x2b6b12[_0x14da8d(0x32c)]){this[_0x14da8d(0x1eb)](_0x39c130,{'val':![],'ack':!![]});if(this[_0x14da8d(0x281)])try{const _0x9b0929=await this[_0x14da8d(0x280)](_0x14da8d(0x1d4));if(_0x9b0929&&_0x9b0929['val']){const _0x2fc15b=JSON['parse'](_0x9b0929[_0x14da8d(0x32c)]);this[_0x14da8d(0x243)][_0x14da8d(0x2da)]('ðŸ§ \x20Triggering\x20Security\x20Training...'),this['setStateAsync'](_0x14da8d(0x310),{'val':_0x14da8d(0x2a8),'ack':!![]}),sendToPython(this,_0x14da8d(0x283),{'sequences':_0x2fc15b});}}catch(_0x462cc8){this['log'][_0x14da8d(0x265)](_0x14da8d(0x249)+_0x462cc8['message']);}}if(_0x39c130[_0x14da8d(0x21b)]('analysis.training.triggerHealth')&&_0x2b6b12[_0x14da8d(0x32c)]){this[_0x14da8d(0x1eb)](_0x39c130,{'val':![],'ack':!![]});if(this[_0x14da8d(0x281)])try{const _0x2a3a71=await this[_0x14da8d(0x280)](LTM_DP_DAILY_DIGESTS);if(_0x2a3a71&&_0x2a3a71['val'])sendToPython(this,_0x14da8d(0x23e),{'digests':JSON['parse'](_0x2a3a71[_0x14da8d(0x32c)])});}catch(_0x3ac0fb){}}if(_0x39c130[_0x14da8d(0x21b)](_0x14da8d(0x23c))&&_0x2b6b12[_0x14da8d(0x32c)]){this[_0x14da8d(0x1eb)](_0x39c130,{'val':![],'ack':!![]});if(this[_0x14da8d(0x281)])try{const _0x2ac762=await this['getStateAsync'](_0x14da8d(0x1e2));if(_0x2ac762&&_0x2ac762['val'])sendToPython(this,'TRAIN_ENERGY',{'points':JSON['parse'](_0x2ac762['val'])});}catch(_0x189b02){}}if(_0x39c130[_0x14da8d(0x21b)]('analysis.training.triggerComfort')&&_0x2b6b12[_0x14da8d(0x32c)]){this[_0x14da8d(0x1eb)](_0x39c130,{'val':![],'ack':!![]});if(this[_0x14da8d(0x281)])try{const _0x5a8717=await this[_0x14da8d(0x280)](LTM_DP_RAW_LOG);_0x5a8717&&_0x5a8717['val']&&(this[_0x14da8d(0x243)][_0x14da8d(0x2da)](_0x14da8d(0x22b)),sendToPython(this,_0x14da8d(0x29d),{'events':JSON[_0x14da8d(0x300)](_0x5a8717['val'])}));}catch(_0x4a8f31){}}if(_0x39c130[_0x14da8d(0x21b)](_0x14da8d(0x241))&&_0x2b6b12[_0x14da8d(0x32c)]){this['setState'](_0x39c130,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x54aa30=await this[_0x14da8d(0x280)]('LTM.trainingData.sequences');if(_0x54aa30&&_0x54aa30[_0x14da8d(0x32c)]){const _0x3ddc6b=JSON[_0x14da8d(0x300)](_0x54aa30['val']);this[_0x14da8d(0x243)][_0x14da8d(0x2da)](_0x14da8d(0x2c0)),sendToPython(this,_0x14da8d(0x277),{'sequences':_0x3ddc6b});}}catch(_0x25ca0e){this[_0x14da8d(0x243)][_0x14da8d(0x265)](_0x14da8d(0x32e)+_0x25ca0e[_0x14da8d(0x25a)]);}}return;}if(this['config'][_0x14da8d(0x303)]&&this['config'][_0x14da8d(0x303)][_0x14da8d(0x21b)](_0x39c130)){await checkWifiPresence(this);return;}const _0x3ee645=(this[_0x14da8d(0x1ec)][_0x14da8d(0x31e)]||[])[_0x14da8d(0x2b8)](_0x348ce0=>_0x348ce0['id']===_0x39c130);if(_0x3ee645)processSensorEvent(this,_0x39c130,_0x2b6b12,_0x3ee645);}async[a0_0x5ac575(0x1fc)](_0x555d82){const _0x15837d=a0_0x5ac575;if(typeof _0x555d82===_0x15837d(0x276)&&_0x555d82[_0x15837d(0x25a)]){if(_0x555d82[_0x15837d(0x1e8)]==='testApiKey'){const _0x249f7a=_0x555d82[_0x15837d(0x25a)][_0x15837d(0x1f0)]||this[_0x15837d(0x1ec)][_0x15837d(0x262)];if(!_0x249f7a)return this[_0x15837d(0x2a9)](_0x555d82['from'],_0x555d82[_0x15837d(0x1e8)],{'success':![],'message':_0x15837d(0x2ec)},_0x555d82['callback']);try{const _0x7317d8=new GoogleGenerativeAI(_0x249f7a),_0x1ca2c1=_0x7317d8[_0x15837d(0x33b)]({'model':GEMINI_MODEL}),_0x1df406=await _0x1ca2c1[_0x15837d(0x1dd)]('Hi');this[_0x15837d(0x2a9)](_0x555d82['from'],_0x555d82[_0x15837d(0x1e8)],{'success':!![],'message':_0x15837d(0x256)+_0x1df406[_0x15837d(0x279)][_0x15837d(0x305)]()},_0x555d82[_0x15837d(0x348)]);}catch(_0x30a407){this[_0x15837d(0x2a9)](_0x555d82[_0x15837d(0x1c1)],_0x555d82[_0x15837d(0x1e8)],{'success':![],'message':_0x15837d(0x2cc)+_0x30a407['message']},_0x555d82[_0x15837d(0x348)]);}}else{if(_0x555d82[_0x15837d(0x1e8)]==='testContext'){const _0x569c38=await getWeatherContext(this),_0x33072d=await getCalendarContext(this);this[_0x15837d(0x2a9)](_0x555d82[_0x15837d(0x1c1)],_0x555d82[_0x15837d(0x1e8)],{'success':!![],'weather':_0x569c38,'calendar':_0x33072d},_0x555d82[_0x15837d(0x348)]);}else{if(_0x555d82[_0x15837d(0x1e8)]==='getLtmData'){if(!this['isProVersion'])return this['sendTo'](_0x555d82[_0x15837d(0x1c1)],_0x555d82[_0x15837d(0x1e8)],{'success':![],'isPro':![]},_0x555d82[_0x15837d(0x348)]);let _0x3a0859={'status':'N/A'};try{const _0x567e77=await this[_0x15837d(0x280)](LTM_DP_DRIFT_STATUS);_0x3a0859[_0x15837d(0x2ea)]=_0x567e77?_0x567e77[_0x15837d(0x32c)]:'N/A';}catch(_0x13ffb8){}this[_0x15837d(0x2a9)](_0x555d82[_0x15837d(0x1c1)],_0x555d82['command'],{'success':!![],'isPro':!![],'dailyDigests':this['dailyDigests'],'driftAnalysis':_0x3a0859,'analysisHistory':this[_0x15837d(0x2f5)]},_0x555d82[_0x15837d(0x348)]);}else{if(_0x555d82[_0x15837d(0x1e8)]===_0x15837d(0x1df)){const _0xcaf2=this[_0x15837d(0x240)][_0x15837d(0x28c)],_0x2348f8=new Date(),_0x2ee00c=new Date(_0x2348f8[_0x15837d(0x30a)](),_0x2348f8[_0x15837d(0x345)](),_0x2348f8[_0x15837d(0x2b0)]())[_0x15837d(0x200)](),_0x474327=this['rawEventLog'][_0x15837d(0x1c0)](_0x574862=>new Date(_0x574862[_0x15837d(0x1fd)])['getTime']()>_0x2ee00c)[_0x15837d(0x28c)],_0x1d4524=new Array(0x18)['fill'](0x0);this[_0x15837d(0x252)]['forEach'](_0x1afe99=>{const _0x3dd36b=_0x15837d,_0x51a13a=new Date(_0x1afe99['timestamp']);if(_0x51a13a[_0x3dd36b(0x200)]()>_0x2ee00c)_0x1d4524[_0x51a13a[_0x3dd36b(0x221)]()]++;});let _0x9fce9={'status':_0x15837d(0x1fe)};try{const _0x490de7=await this['getStateAsync'](LTM_DP_DRIFT_STATUS);_0x9fce9['status']=_0x490de7?_0x490de7[_0x15837d(0x32c)]:_0x15837d(0x1fe);}catch(_0xa2fe83){}let _0x43afd7='';try{const _0x2f621b=await this['getStateAsync']('system.presenceWho');_0x43afd7=_0x2f621b?_0x2f621b['val']:'';}catch(_0x4c1bb0){}let _0x253367=null;!this[_0x15837d(0x31c)]&&(_0x253367=this[_0x15837d(0x1ec)][_0x15837d(0x262)]?'KI-Modell\x20nicht\x20initialisiert':_0x15837d(0x26b));let _0x1ded7c={'detected':![],'description':'','targetId':'','targetValue':'','autoApply':![]};try{const _0x856a7f=await this[_0x15837d(0x280)](_0x15837d(0x302));if(_0x856a7f&&_0x856a7f[_0x15837d(0x32c)]){_0x1ded7c[_0x15837d(0x2c2)]=!![];const _0x106ef2=await this[_0x15837d(0x280)]('analysis.automation.description');_0x1ded7c[_0x15837d(0x2ed)]=_0x106ef2?_0x106ef2['val']:'';const _0x15c708=await this['getStateAsync'](_0x15837d(0x1b9));_0x1ded7c[_0x15837d(0x22c)]=_0x15c708?_0x15c708[_0x15837d(0x32c)]:'';const _0x283858=await this[_0x15837d(0x280)](_0x15837d(0x1d9));_0x1ded7c['targetValue']=_0x283858?_0x283858[_0x15837d(0x32c)]:'';}const _0x47b0d6=await this[_0x15837d(0x280)](_0x15837d(0x340));_0x1ded7c['autoApply']=_0x47b0d6?!!_0x47b0d6['val']:![];}catch(_0x45b94f){}this[_0x15837d(0x2a9)](_0x555d82['from'],_0x555d82[_0x15837d(0x1e8)],{'success':!![],'eventHistory':this[_0x15837d(0x33d)]['slice'](0x0,0xf),'stats':{'digestCount':_0xcaf2,'eventCountToday':_0x474327,'hourlyActivity':_0x1d4524,'driftStatus':_0x9fce9[_0x15837d(0x2ea)],'isPresent':this[_0x15837d(0x21a)],'presenceWho':_0x43afd7,'minDays':this['config']['minDaysForBaseline']||0x7,'stbDays':this[_0x15837d(0x1ec)][_0x15837d(0x1c6)]||0xe,'ltbDays':this[_0x15837d(0x1ec)][_0x15837d(0x213)]||0x3c,'systemError':_0x253367},'automation':_0x1ded7c},_0x555d82[_0x15837d(0x348)]);}else{if(_0x555d82[_0x15837d(0x1e8)]===_0x15837d(0x298))try{const _0x51c3d1=await scanner['scanForDevices'](this,_0x555d82[_0x15837d(0x25a)]||{});this[_0x15837d(0x2a9)](_0x555d82['from'],_0x555d82['command'],{'success':!![],'devices':_0x51c3d1},_0x555d82['callback']);}catch(_0x57ef02){this['sendTo'](_0x555d82[_0x15837d(0x1c1)],_0x555d82['command'],{'success':![],'error':_0x57ef02[_0x15837d(0x25a)]},_0x555d82[_0x15837d(0x348)]);}else{if(_0x555d82[_0x15837d(0x1e8)]===_0x15837d(0x1e6)){const _0x2e2dfb=await this[_0x15837d(0x1b6)](_0x15837d(0x1d5),_0x15837d(0x20d)),_0x39dad5=[];if(_0x2e2dfb)for(const _0x11115d in _0x2e2dfb){const _0x14295c=_0x2e2dfb[_0x11115d],_0x467b30=(_0x14295c['common']&&typeof _0x14295c['common'][_0x15837d(0x297)]==='object'?_0x14295c[_0x15837d(0x269)]['name']['de']:_0x14295c[_0x15837d(0x269)]['name'])||_0x14295c[_0x15837d(0x269)][_0x15837d(0x297)];_0x39dad5[_0x15837d(0x2d0)]({'id':_0x11115d,'name':_0x467b30});}const _0x8ec1f4=await this[_0x15837d(0x1b6)](_0x15837d(0x321),'enum'),_0xb25d3c=[];if(_0x8ec1f4)for(const _0x16de34 in _0x8ec1f4){const _0x373c26=_0x8ec1f4[_0x16de34],_0x50e9f5=(_0x373c26[_0x15837d(0x269)]&&typeof _0x373c26[_0x15837d(0x269)]['name']===_0x15837d(0x276)?_0x373c26[_0x15837d(0x269)][_0x15837d(0x297)]['de']:_0x373c26[_0x15837d(0x269)]['name'])||_0x16de34[_0x15837d(0x27e)]('.')[_0x15837d(0x337)]();_0xb25d3c[_0x15837d(0x2d0)](_0x50e9f5);}this[_0x15837d(0x2a9)](_0x555d82[_0x15837d(0x1c1)],_0x555d82['command'],{'success':!![],'enums':_0x39dad5,'rooms':_0xb25d3c},_0x555d82[_0x15837d(0x348)]);}else{if(_0x555d82['command']==='getCalendarNames'){const _0x43157f=_0x555d82[_0x15837d(0x25a)][_0x15837d(0x1c8)];if(!_0x43157f)return this[_0x15837d(0x2a9)](_0x555d82[_0x15837d(0x1c1)],_0x555d82['command'],{'success':![],'error':_0x15837d(0x320)},_0x555d82['callback']);const _0xb80f11=await getCalendarNames(this,_0x43157f);this[_0x15837d(0x2a9)](_0x555d82['from'],_0x555d82[_0x15837d(0x1e8)],{'success':!![],'names':_0xb80f11},_0x555d82['callback']);}else{if(_0x555d82[_0x15837d(0x1e8)]===_0x15837d(0x23b)){const {targetId:_0x5e53b2,targetValue:_0x29fe6f}=_0x555d82['message'];this[_0x15837d(0x243)][_0x15837d(0x2da)](_0x15837d(0x20f)+_0x5e53b2+_0x15837d(0x2c3)+_0x29fe6f),await this[_0x15837d(0x2a5)]('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),await this[_0x15837d(0x2a5)](_0x15837d(0x344),{'val':_0x15837d(0x212)+_0x5e53b2,'ack':!![]}),await this[_0x15837d(0x2a5)](_0x15837d(0x1b9),{'val':_0x5e53b2,'ack':!![]}),await this['setStateAsync'](_0x15837d(0x1d9),{'val':_0x29fe6f,'ack':!![]}),this[_0x15837d(0x2a9)](_0x555d82[_0x15837d(0x1c1)],_0x555d82['command'],{'success':!![]},_0x555d82[_0x15837d(0x348)]);}else{if(_0x555d82[_0x15837d(0x1e8)]==='submitFeedback'){const {historyId:_0x3be17b,rating:_0x181b64,comment:_0x595294,alertReason:_0x5c4e97}=_0x555d82[_0x15837d(0x25a)];_0x3be17b&&_0x181b64?(await saveFeedback(this,{'timestamp':Date[_0x15837d(0x30c)](),'historyId':_0x3be17b,'rating':_0x181b64,'comment':_0x595294,'alertReason':_0x5c4e97}),this[_0x15837d(0x2a9)](_0x555d82['from'],_0x555d82[_0x15837d(0x1e8)],{'success':!![]},_0x555d82[_0x15837d(0x348)])):this[_0x15837d(0x2a9)](_0x555d82[_0x15837d(0x1c1)],_0x555d82[_0x15837d(0x1e8)],{'success':![],'error':_0x15837d(0x1bc)},_0x555d82['callback']);}else _0x555d82[_0x15837d(0x1e8)]===_0x15837d(0x26d)&&(this[_0x15837d(0x243)]['info'](_0x15837d(0x31a)),await this[_0x15837d(0x2a5)]('analysis.automation.patternDetected',{'val':![],'ack':!![]}),await this[_0x15837d(0x2a5)]('analysis.automation.description',{'val':'','ack':!![]}),this[_0x15837d(0x2a9)](_0x555d82[_0x15837d(0x1c1)],_0x555d82[_0x15837d(0x1e8)],{'success':!![]},_0x555d82[_0x15837d(0x348)]));}}}}}}}}}}}if(require[a0_0x5ac575(0x27c)]!==module)module[a0_0x5ac575(0x333)]=_0x1e0a9b=>new CogniLiving(_0x1e0a9b);else new CogniLiving();