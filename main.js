const a0_0x3a72a5=a0_0x1ef7;function a0_0x1ef7(_0x10d02a,_0x3694d2){const _0x375f12=a0_0x201d();return a0_0x1ef7=function(_0x21aab1,_0x286c7b){_0x21aab1=_0x21aab1-0x15f;let _0x201d7f=_0x375f12[_0x21aab1];return _0x201d7f;},a0_0x1ef7(_0x10d02a,_0x3694d2);}(function(_0x43dd7b,_0xc97b53){const _0x3978e9=a0_0x1ef7,_0x279471=_0x43dd7b();while(!![]){try{const _0x5945ac=parseInt(_0x3978e9(0x223))/0x1+parseInt(_0x3978e9(0x1b5))/0x2*(parseInt(_0x3978e9(0x253))/0x3)+parseInt(_0x3978e9(0x26f))/0x4*(parseInt(_0x3978e9(0x1c0))/0x5)+-parseInt(_0x3978e9(0x241))/0x6+-parseInt(_0x3978e9(0x1a9))/0x7+parseInt(_0x3978e9(0x19e))/0x8+-parseInt(_0x3978e9(0x1b1))/0x9;if(_0x5945ac===_0xc97b53)break;else _0x279471['push'](_0x279471['shift']());}catch(_0x5b5932){_0x279471['push'](_0x279471['shift']());}}}(a0_0x201d,0xeb63d));const a0_0x286c7b=(function(){let _0x4e9ce9=!![];return function(_0x164578,_0x45801c){const _0x17c554=_0x4e9ce9?function(){const _0x39a8db=a0_0x1ef7;if(_0x45801c){const _0x1509d9=_0x45801c[_0x39a8db(0x235)](_0x164578,arguments);return _0x45801c=null,_0x1509d9;}}:function(){};return _0x4e9ce9=![],_0x17c554;};}()),a0_0x21aab1=a0_0x286c7b(this,function(){const _0x49bf81=a0_0x1ef7;return a0_0x21aab1[_0x49bf81(0x161)]()['search']('(((.+)+)+)+$')[_0x49bf81(0x161)]()['constructor'](a0_0x21aab1)['search'](_0x49bf81(0x218));});a0_0x21aab1();'use strict';function a0_0x201d(){const _0x4602ad=['./lib/scanner','string','\x20hPa.\x20Einbruch\x20wahrscheinlich.','ready','analysis.energy.insulationScore','modeResetJob','analysis.energy.warmupTimes','notifyTelegramInstance','system.adapter.','handleInfrasound','ErklÃ¤rt\x20durch:\x20','online','forecast.current.weather','enum','scores','getForeignObjectsAsync','slice','triggerDailyDigest','analysis.automation.patternDetected','callback','monitorEnforcements','getGenerativeModel','rawEventLog','log','abs','Reinforcement\x20Learning\x20Penalties','infrasoundLocked','OPTIMIZE_ENERGY','guest','parse','manual','NextHours.Location_1.Day_1.current.symbol_desc','ltmJob','getForeignObjectAsync','Test','cleanupGhostInterventions','updateLocation','from','_calName','name','Gemini\x20AI\x20initialized.','useWeather','geminiModel','unshift','healthTrendInterval','[Forensics]\x20Infrasound\x20Event\x20correlated:\x20','debug','createDailyDigest','calendarInstance','checkWifiPresence','ðŸ§ \x20Memory:\x20Cache\x20hydrated\x20with\x20','config','startSystem','systemConfig','clear','ANALYZE_TREND','runPythonHealthCheck','updateHealthVector','system.mode','toString','TRAIN_HEALTH','ALARM','includes','dailyDigests','analysis.health.gaitDebug','unload','TRAIN_COMFORT','version','json','Kein\x20Kalender-Adapter','getState','dismissAutomation','sources','Could\x20not\x20read\x20daily\x20vector:\x20','Keine\x20Sensor-AktivitÃ¤t','stopService','testContext','testApiKey','genAI','Sensors\x20used\x20for\x20Gait\x20Analysis','SYSTEM_MODES','add','times','\x20min\x20ausbleiben.','setupBriefingScheduler','type','ANALYZE_GAIT','analysis.training.triggerComfort','location','send','onStateChange','LTM.dailyDigests','Verbindung\x20erfolgreich!','./lib/scheduler','map','checkLicense','./lib/python_bridge','temperature','Simulation\x20durch\x20Admin\x20(Test)','{\x22default\x22:\x2021}','toFixed','text','notifyPushoverInstance','Comfort\x20Train\x20Error:\x20','communicate.request','reed','Warm-Up\x20Time\x20(Minutes\x20to\x20Target)','exports','analysis.energy.ventilationAlerts','keys','isPresent','VACATION','abortExitTimer','timestamp','weatherunderground.0','lastTrackerEventTime','./lib/ai_agent','analysis.trigger','initZombies','door','2754448prlNTJ','checkCalendarTriggers','updateTopology','inactivityThresholdHours','getTime','sensorLastValues','geminiApiKey','isProVersion','ðŸš¨\x20DRUCKWELLEN-ALARM!\x20StÃ¤rke:\x20','[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]','updated','7083153NEMadE','licenseKey','sort','updateSchedulePreview','ðŸ§ \x20Memory\x20Protection:\x20Restoring\x20persisted\x20AI-Calculations\x20(preventing\x20\x27Cold\x20Start\x27\x20amnesia).','getHours','cogni-living','sendMorningBriefing','4457646etSVww','PINN\x20AI\x20Forecast','message','Verbunden','3529556DbLyjU','LTM.baselineStatus','Notification\x20Test\x20Failed:\x20','analysis.topology.structure','notifyTelegramEnabled','application/json','ðŸ¤–\x20Butler\x20Training\x20started.\x20Injecting\x20knowledge\x20about\x20','setPresence','./lib/setup','val','pop','18715vvjtvT','analysis.energy.activeEnforcements','endsWith','PYTHON_EXE','briefingJob','bind','ðŸ§ \x20Graph-Brain:\x20Training\x20Behaviour\x20Matrix\x20based\x20on\x20','SET_LEARNING_MODE','floor','cogni-living\x20adapter\x20starting\x20(v','onMessage','push','Standard','runAutopilot','setStateAsync','./lib/installer','find','General\x20Activity\x20Trend\x20(%)','[Infrasound]\x20Subscribing\x20to\x20external\x20sensor:\x20','resetRLPenalty','LTM.trainingData.sequences','warn','daswetter.0','Lernphase\x20(','calendarName','runBaselineDriftAnalysis','filter','LTM.trainingData.thermodynamics','[Calibration]\x20Window\x20','eventHistory','checkSolarCondition','subscribeForeignStates','analysis.automation.description','sensor.window','isGracePeriodActive','NORMAL','setObjectNotExistsAsync','Guest\x20Mode','sensor.door','Daily\x20Activity\x20Vector\x20(24h)','setHours','isArray','infrasoundSensorId','infrasoundThreshold','analysis.energy.rlPenalties','driftAnalysisTimer','response','fill','[Infrasound]\x20ðŸŸ¡\x20Debug-Mode:\x20Alarm\x20detected\x20but\x20suppressed\x20because\x20presence=true.','Activity-Level','infrasoundEnabled','.system.mode','triggerInfrasoundCorrelation','scanDevices','key','initHistory','state','toLowerCase','analyzeWindowOpening','Kein\x20API\x20Key\x20Ã¼bergeben','analysis.training.triggerSecurity','analysisTimer','WiFi\x20Presence\x20detected.','value','setState','analysisInterval','analysis.automation.targetId','Daten\x20nicht\x20verfÃ¼gbar','getLtmData','triggerEnergyPrediction','join','command','presenceDevices','getStateAsync','getEnums','.communicate.request','open','values','loadSystemMode','common','onUnload','./lib/topology','SYSTEM_DP_MODE','window','appendToLog','LTM.rawEventLog','system.presenceWho','Key\x20not\x20found\x20or\x20not\x20provided','(((.+)+)+)+$','Sec-Training\x20started...','Fenster\x20geÃ¶ffnet:\x20','analysis.triggerBriefing','role','analysis.health.activityTrend','subscribeStates','protectAiMemory','currentSystemMode','ack','simulateButler','359970oqyHFw','dependencyInstallInProgress','ANOMALY\x20(Real\x20Threat?)','Fehler:\x20','number','./lib/recorder','getForeignStateAsync','entries','object','analysis.training.triggerTopology','trackerHeartbeat','stringify','motion','refreshCalendar','getMinutes','[Infrasound]\x20ðŸš¨\x20ALARM\x20TRIGGERED!\x20Pressure\x20Wave:\x20','memoryCache','.data.table','apply','@iobroker/adapter-core','subscribeForeignStatesAsync','SET_TOPOLOGY','bootTime','analysis.security.infrasoundLog','startService','Graph-Brain\x20Train\x20Error:\x20','sendTo','./lib/automation','checkThermostats','TRAIN_ENERGY','2434266CVPdOn','pressureBuffer','analysis.security.learningStatus','triggerGaitAnalysis','INTERNAL','triggerBriefing','Kein\x20Wetter-Adapter','analysis.automation.targetValue','analysis.energy.warmupSources','LTM.triggerDailyDigest','analysis.health.todayVector','thermostat','split','updateTopologyMatrix','accuweather.0','Party\x20Mode','runGeminiAnalysis','onReady','3yfQbvi','forEach','Nuukanni\x20Security','minutes_safe','ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...','cancel','testNotification','length','analysis.automation.triggerAction','sendNotification','analysis.training.triggerHealth','klar','createAllObjects','error','enum.functions.*','info','Instanz\x20nicht\x20gefunden','minDaysForBaseline','isSolar','activityLevel','TRACK_EVENT','devices','exitTimer','telegram','Gesendet','infrasoundArmingId','Keine\x20Antwort\x20von\x20Gemini','Forensic\x20Infrasound\x20Log','436tIIOgx','analysis.energy.warmupTargets','now','TRAIN_SECURITY','executeAutomationAction','analysis.automation.autoApply'];a0_0x201d=function(){return _0x4602ad;};return a0_0x201d();}const utils=require(a0_0x3a72a5(0x236)),{GoogleGenerativeAI}=require('@google/generative-ai'),installer=require(a0_0x3a72a5(0x1cf)),scanner=require(a0_0x3a72a5(0x275)),schedulers=require(a0_0x3a72a5(0x183)),topology=require(a0_0x3a72a5(0x211)),setup=require(a0_0x3a72a5(0x1bd)),recorder=require(a0_0x3a72a5(0x228)),pythonBridge=require(a0_0x3a72a5(0x186)),aiAgent=require(a0_0x3a72a5(0x19a)),deadMan=require('./lib/dead_man'),automation=require(a0_0x3a72a5(0x23e)),GEMINI_MODEL='models/gemini-flash-latest',ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};class CogniLiving extends utils['Adapter']{constructor(_0x12bacc){const _0x1da5a0=a0_0x3a72a5;super({..._0x12bacc,'name':_0x1da5a0(0x1af)}),this[_0x1da5a0(0x1dd)]=[],this['analysisHistory']=[],this[_0x1da5a0(0x28b)]=[],this['dailyDigests']=[],this['sensorLastValues']={},this[_0x1da5a0(0x2aa)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x1da5a0(0x194)]=!![],this[_0x1da5a0(0x269)]=null,this['exitGraceTimer']=null,this[_0x1da5a0(0x1e2)]=![],this[_0x1da5a0(0x174)]=null,this['geminiModel']=null,this['currentSystemMode']=setup[_0x1da5a0(0x176)][_0x1da5a0(0x1e3)],this[_0x1da5a0(0x1a5)]=![],this['lastAlertState']=![],this['analysisTimer']=null,this['ltmJob']=null,this[_0x1da5a0(0x27a)]=null,this[_0x1da5a0(0x1ed)]=null,this[_0x1da5a0(0x1c4)]=null,this['trackerHeartbeat']=null,this[_0x1da5a0(0x2a1)]=null,this[_0x1da5a0(0x224)]=![],this[_0x1da5a0(0x199)]=Date['now'](),this[_0x1da5a0(0x233)]=null,this[_0x1da5a0(0x239)]=Date[_0x1da5a0(0x271)](),this[_0x1da5a0(0x28f)]=![],this[_0x1da5a0(0x242)]=[],this['on'](_0x1da5a0(0x278),this[_0x1da5a0(0x252)][_0x1da5a0(0x1c5)](this)),this['on']('stateChange',this[_0x1da5a0(0x180)]['bind'](this)),this['on'](_0x1da5a0(0x167),this['onUnload'][_0x1da5a0(0x1c5)](this)),this['on'](_0x1da5a0(0x1b3),this[_0x1da5a0(0x1ca)][_0x1da5a0(0x1c5)](this));}async['onReady'](){const _0x115a30=a0_0x3a72a5;this[_0x115a30(0x28c)][_0x115a30(0x262)](_0x115a30(0x1c9)+this[_0x115a30(0x169)]+')\x20-\x20Phase\x20D\x20(Comfort\x20Refinement)');if(!installer['checkAndInstall'](this,()=>this['startSystem']()))return;}async[a0_0x3a72a5(0x2a9)](){const _0x30c9b4=a0_0x3a72a5;await setup[_0x30c9b4(0x19c)](this);try{this[_0x30c9b4(0x1a5)]=await setup[_0x30c9b4(0x185)](this['config'][_0x30c9b4(0x1aa)]);}catch(_0x3cd826){}if(!this[_0x30c9b4(0x2a8)]['inactivityThresholdHours']||this[_0x30c9b4(0x2a8)][_0x30c9b4(0x1a1)]<0.1)this[_0x30c9b4(0x2a8)][_0x30c9b4(0x1a1)]=0xc;await setup[_0x30c9b4(0x1f7)](this),await setup['initSystemConfig'](this);try{const _0x1ffc73=await this[_0x30c9b4(0x209)](_0x30c9b4(0x27b)),_0x68ab76=await this[_0x30c9b4(0x209)](_0x30c9b4(0x249));_0x1ffc73&&_0x1ffc73[_0x30c9b4(0x1be)]&&_0x68ab76&&_0x68ab76[_0x30c9b4(0x1be)]&&(Date[_0x30c9b4(0x271)]()-_0x1ffc73['ts']<0x4*0xe10*0x3e8&&(this[_0x30c9b4(0x233)]={'times':JSON['parse'](_0x1ffc73[_0x30c9b4(0x1be)]),'sources':JSON[_0x30c9b4(0x292)](_0x68ab76[_0x30c9b4(0x1be)])},this['log'][_0x30c9b4(0x262)](_0x30c9b4(0x2a7)+Object[_0x30c9b4(0x193)](this[_0x30c9b4(0x233)][_0x30c9b4(0x178)])[_0x30c9b4(0x25a)]+'\x20rooms\x20(preventing\x20Cold\x20Start\x20Amnesia).')));}catch(_0x5d36b7){this['log'][_0x30c9b4(0x1d5)]('Memory\x20Hydration\x20Failed:\x20'+_0x5d36b7[_0x30c9b4(0x1b3)]);}if(this[_0x30c9b4(0x2a8)][_0x30c9b4(0x1a4)])try{this[_0x30c9b4(0x174)]=new GoogleGenerativeAI(this['config'][_0x30c9b4(0x1a4)]),this[_0x30c9b4(0x29f)]=this[_0x30c9b4(0x174)][_0x30c9b4(0x28a)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x30c9b4(0x1ba)}}),this[_0x30c9b4(0x28c)]['info'](_0x30c9b4(0x29d));}catch(_0x2178de){this[_0x30c9b4(0x28c)][_0x30c9b4(0x260)]('Gemini\x20Init\x20Error:\x20'+_0x2178de[_0x30c9b4(0x1b3)]);}await setup[_0x30c9b4(0x25f)](this),await this[_0x30c9b4(0x20e)](),await this[_0x30c9b4(0x1e4)]('analysis.energy.pinnForecast',{'type':_0x30c9b4(0x1f8),'common':{'name':_0x30c9b4(0x1b2),'type':'string','role':'json','read':!![],'write':![]},'native':{}}),await this[_0x30c9b4(0x1e4)](_0x30c9b4(0x192),{'type':_0x30c9b4(0x1f8),'common':{'name':'Active\x20Ventilation\x20Alerts','type':'string','role':'json','read':!![],'write':![]},'native':{}}),await this[_0x30c9b4(0x1e4)](_0x30c9b4(0x27b),{'type':_0x30c9b4(0x1f8),'common':{'name':_0x30c9b4(0x190),'type':_0x30c9b4(0x276),'role':'json','read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x30c9b4(0x270),{'type':_0x30c9b4(0x1f8),'common':{'name':'Warm-Up\x20Target\x20Temps\x20(JSON)','type':_0x30c9b4(0x276),'role':_0x30c9b4(0x16a),'read':!![],'write':!![],'def':_0x30c9b4(0x189)},'native':{}}),await this['setObjectNotExistsAsync'](_0x30c9b4(0x1ec),{'type':_0x30c9b4(0x1f8),'common':{'name':_0x30c9b4(0x28e),'type':_0x30c9b4(0x276),'role':_0x30c9b4(0x16a),'read':!![],'write':![],'def':'{}'},'native':{}}),await this[_0x30c9b4(0x1e4)](_0x30c9b4(0x21d),{'type':'state','common':{'name':_0x30c9b4(0x1d1),'type':'number','role':_0x30c9b4(0x1ff),'unit':'%','read':!![],'write':![]},'native':{}}),await this[_0x30c9b4(0x1e4)]('analysis.health.gaitSensors',{'type':_0x30c9b4(0x1f8),'common':{'name':_0x30c9b4(0x175),'type':_0x30c9b4(0x276),'role':_0x30c9b4(0x18b),'read':!![],'write':![]},'native':{}}),await this[_0x30c9b4(0x1e4)](_0x30c9b4(0x1c1),{'type':_0x30c9b4(0x1f8),'common':{'name':'Active\x20Calendar\x20Enforcements\x20(Locks)','type':_0x30c9b4(0x276),'role':'json','read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x30c9b4(0x1e4)](_0x30c9b4(0x23a),{'type':_0x30c9b4(0x1f8),'common':{'name':_0x30c9b4(0x26e),'type':_0x30c9b4(0x276),'role':_0x30c9b4(0x16a),'read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x30c9b4(0x1e4)](_0x30c9b4(0x166),{'type':'state','common':{'name':'Gait\x20Speed\x20Calculation\x20Proof','type':_0x30c9b4(0x276),'role':_0x30c9b4(0x18b),'read':!![],'write':![]},'native':{}}),await this[_0x30c9b4(0x1e4)](_0x30c9b4(0x24b),{'type':'state','common':{'name':_0x30c9b4(0x1e7),'type':_0x30c9b4(0x276),'role':_0x30c9b4(0x16a),'read':!![],'write':![],'def':_0x30c9b4(0x1a7)},'native':{}});try{const _0x2f17ed=await this[_0x30c9b4(0x209)]('LTM.rawEventLog');if(_0x2f17ed&&_0x2f17ed[_0x30c9b4(0x1be)])this[_0x30c9b4(0x28b)]=JSON[_0x30c9b4(0x292)](_0x2f17ed['val']);}catch(_0x31281c){this[_0x30c9b4(0x28b)]=[];}try{const _0x31a074=await this['getStateAsync'](_0x30c9b4(0x181));if(_0x31a074&&_0x31a074[_0x30c9b4(0x1be)])this[_0x30c9b4(0x165)]=JSON[_0x30c9b4(0x292)](_0x31a074[_0x30c9b4(0x1be)]);}catch(_0x27623a){this[_0x30c9b4(0x165)]=[];}const _0x4c35da=this['dailyDigests'][_0x30c9b4(0x25a)]>=(this[_0x30c9b4(0x2a8)][_0x30c9b4(0x264)]||0x7)?'Aktiv\x20('+this['dailyDigests']['length']+'\x20Tage)':_0x30c9b4(0x1d7)+this[_0x30c9b4(0x165)][_0x30c9b4(0x25a)]+'/'+(this['config']['minDaysForBaseline']||0x7)+')';await this['setStateAsync'](_0x30c9b4(0x1b6),{'val':_0x4c35da,'ack':!![]}),this['subscribeStates'](_0x30c9b4(0x19b)),this['subscribeStates'](_0x30c9b4(0x24a)),this[_0x30c9b4(0x21e)](_0x30c9b4(0x160)),this[_0x30c9b4(0x21e)](_0x30c9b4(0x21b)),this['subscribeStates'](_0x30c9b4(0x25b)),this[_0x30c9b4(0x21e)](_0x30c9b4(0x274)),this[_0x30c9b4(0x21e)](_0x30c9b4(0x1fc)),this['subscribeStates'](_0x30c9b4(0x25d)),this['subscribeStates']('analysis.training.triggerEnergy'),this[_0x30c9b4(0x21e)](_0x30c9b4(0x17d)),this[_0x30c9b4(0x21e)](_0x30c9b4(0x22c)),this[_0x30c9b4(0x21e)]('analysis.energy.mpcActive'),this[_0x30c9b4(0x21e)](_0x30c9b4(0x249));this['config'][_0x30c9b4(0x1f2)]&&this[_0x30c9b4(0x2a8)][_0x30c9b4(0x1ea)]&&(this[_0x30c9b4(0x28c)][_0x30c9b4(0x262)](_0x30c9b4(0x1d2)+this[_0x30c9b4(0x2a8)][_0x30c9b4(0x1ea)]),this[_0x30c9b4(0x1df)](this[_0x30c9b4(0x2a8)][_0x30c9b4(0x1ea)]));const _0x552e13=this[_0x30c9b4(0x2a8)][_0x30c9b4(0x268)];if(_0x552e13)for(const _0x51d10c of _0x552e13){await this['subscribeForeignStatesAsync'](_0x51d10c['id']);}const _0x515b82=this['config'][_0x30c9b4(0x208)];if(_0x515b82)for(const _0xb84e67 of _0x515b82){await this[_0x30c9b4(0x237)](_0xb84e67);}if(this['config'][_0x30c9b4(0x1b9)]&&this[_0x30c9b4(0x2a8)][_0x30c9b4(0x27c)])await this[_0x30c9b4(0x237)](this['config'][_0x30c9b4(0x27c)]+_0x30c9b4(0x20b));setTimeout(()=>this['checkWifiPresence'](),0x1388);if(this[_0x30c9b4(0x1fd)])clearInterval(this[_0x30c9b4(0x1fd)]);const _0xb382a9=this[_0x30c9b4(0x2a8)][_0x30c9b4(0x201)]||0xf;_0xb382a9>0x0&&(this[_0x30c9b4(0x1fd)]=setInterval(()=>{const _0x38b2b1=_0x30c9b4;this[_0x38b2b1(0x1cd)](),automation[_0x38b2b1(0x19f)](this),automation[_0x38b2b1(0x289)](this);},_0xb382a9*0x3c*0x3e8));setTimeout(()=>{const _0x3676f3=_0x30c9b4;automation[_0x3676f3(0x19f)](this),automation[_0x3676f3(0x289)](this);},0x2710);this['config']['trackerEnabled']!==![]&&(this[_0x30c9b4(0x22d)]=setInterval(()=>{const _0x56ade2=_0x30c9b4;if(this[_0x56ade2(0x1a5)]){const _0x4f72b6=Date['now'](),_0x223a55=this[_0x56ade2(0x199)]||_0x4f72b6,_0x202f45=(_0x4f72b6-_0x223a55)/0x3e8;_0x202f45>0x2&&(this[_0x56ade2(0x199)]=_0x4f72b6,pythonBridge[_0x56ade2(0x17f)](this,_0x56ade2(0x267),{'room':null,'dt':_0x202f45}));}},0xbb8));if(this['healthTrendInterval'])clearInterval(this[_0x30c9b4(0x2a1)]);this[_0x30c9b4(0x2a1)]=setInterval(()=>{const _0x52d94a=_0x30c9b4;this[_0x52d94a(0x1a5)]&&(this[_0x52d94a(0x28c)][_0x52d94a(0x262)]('â¤ï¸\x20Auto-Heartbeat:\x20Aktualisiere\x20Gesundheits-Trends...'),this[_0x52d94a(0x2ad)]());},0x4*0x3c*0x3c*0x3e8),schedulers['setupLtmScheduler'](this,()=>aiAgent[_0x30c9b4(0x2a4)](this,pythonBridge)),schedulers['setupModeResetScheduler'](this),schedulers['setupDriftAnalysisScheduler'](this,()=>aiAgent[_0x30c9b4(0x1d9)](this)),schedulers[_0x30c9b4(0x17a)](this,()=>aiAgent[_0x30c9b4(0x1b0)](this)),pythonBridge[_0x30c9b4(0x23b)](this,installer[_0x30c9b4(0x1c3)]),setTimeout(async()=>{const _0x1ac280=_0x30c9b4;await topology[_0x1ac280(0x1a0)](this);try{const _0x1d23af=await this['getStateAsync'](_0x1ac280(0x1b8));if(_0x1d23af&&_0x1d23af[_0x1ac280(0x1be)])pythonBridge[_0x1ac280(0x17f)](this,_0x1ac280(0x238),JSON[_0x1ac280(0x292)](_0x1d23af[_0x1ac280(0x1be)]));}catch(_0x51f524){}this[_0x1ac280(0x2ad)](),this[_0x1ac280(0x244)](),this[_0x1ac280(0x205)](),this[_0x1ac280(0x15f)]();},0x1388);}[a0_0x3a72a5(0x210)](_0x589165){const _0x124f9b=a0_0x3a72a5;if(this[_0x124f9b(0x1fd)])clearInterval(this[_0x124f9b(0x1fd)]);if(this[_0x124f9b(0x1ed)])clearInterval(this['driftAnalysisTimer']);if(this[_0x124f9b(0x22d)])clearInterval(this[_0x124f9b(0x22d)]);if(this[_0x124f9b(0x2a1)])clearInterval(this[_0x124f9b(0x2a1)]);if(this[_0x124f9b(0x295)])this[_0x124f9b(0x295)][_0x124f9b(0x258)]();if(this[_0x124f9b(0x27a)])this[_0x124f9b(0x27a)][_0x124f9b(0x258)]();if(this[_0x124f9b(0x1c4)])this[_0x124f9b(0x1c4)]['cancel']();recorder[_0x124f9b(0x196)](this),pythonBridge[_0x124f9b(0x171)](this),_0x589165();}async['onStateChange'](_0x329da2,_0xa12c78){const _0x468a4c=a0_0x3a72a5;if(!_0xa12c78||this['dependencyInstallInProgress'])return;if(_0x329da2[_0x468a4c(0x164)](_0x468a4c(0x26a))&&_0x329da2[_0x468a4c(0x1c2)](_0x468a4c(0x18e))&&_0xa12c78[_0x468a4c(0x1be)])return;if(this[_0x468a4c(0x2a8)][_0x468a4c(0x1f2)]&&_0x329da2===this['config'][_0x468a4c(0x1ea)]){this[_0x468a4c(0x27e)](_0xa12c78[_0x468a4c(0x1be)]);return;}if(_0x329da2===this['namespace']+_0x468a4c(0x1f3)){if(_0xa12c78[_0x468a4c(0x1be)]&&Object['values'](setup[_0x468a4c(0x176)])['includes'](_0xa12c78[_0x468a4c(0x1be)])){this[_0x468a4c(0x220)]=_0xa12c78[_0x468a4c(0x1be)];if(_0xa12c78[_0x468a4c(0x1be)]===setup['SYSTEM_MODES'][_0x468a4c(0x195)])await recorder[_0x468a4c(0x1bc)](this,![]);else await recorder[_0x468a4c(0x1bc)](this,!![]);if(this[_0x468a4c(0x1a5)]){let _0x1e31bc=![],_0xcdeca9=0x0,_0x27e361=_0x468a4c(0x293);if(this[_0x468a4c(0x220)]==='party')_0x1e31bc=!![],_0xcdeca9=0x168,_0x27e361=_0x468a4c(0x250);else this[_0x468a4c(0x220)]===_0x468a4c(0x291)&&(_0x1e31bc=!![],_0xcdeca9=0x5a0,_0x27e361=_0x468a4c(0x1e5));pythonBridge[_0x468a4c(0x17f)](this,_0x468a4c(0x1c7),{'active':_0x1e31bc,'duration':_0xcdeca9,'label':_0x27e361}),await this[_0x468a4c(0x1ce)](_0x468a4c(0x243),{'val':JSON[_0x468a4c(0x22e)]({'active':_0x1e31bc,'label':_0x27e361,'timestamp':Date[_0x468a4c(0x271)]()}),'ack':!![]});}}if(!_0xa12c78[_0x468a4c(0x221)])this[_0x468a4c(0x200)](_0x329da2,{'val':this[_0x468a4c(0x220)],'ack':!![]});return;}_0x329da2[_0x468a4c(0x1c2)](_0x468a4c(0x249))&&_0xa12c78[_0x468a4c(0x221)]&&this['protectAiMemory'](_0xa12c78[_0x468a4c(0x1be)]);if(!_0xa12c78[_0x468a4c(0x221)]){if(_0x329da2['includes'](_0x468a4c(0x19b))&&_0xa12c78[_0x468a4c(0x1be)]){this[_0x468a4c(0x200)](_0x329da2,{'val':![],'ack':!![]}),aiAgent[_0x468a4c(0x251)](this);return;}if(_0x329da2[_0x468a4c(0x164)](_0x468a4c(0x286))&&_0xa12c78[_0x468a4c(0x1be)]){this[_0x468a4c(0x200)](_0x329da2,{'val':![],'ack':!![]});if(this[_0x468a4c(0x1a5)])aiAgent[_0x468a4c(0x2a4)](this,pythonBridge);return;}if(_0x329da2[_0x468a4c(0x164)](_0x468a4c(0x246))&&_0xa12c78['val']){this[_0x468a4c(0x200)](_0x329da2,{'val':![],'ack':!![]}),aiAgent[_0x468a4c(0x1b0)](this);return;}if(_0x329da2['includes']('automation.triggerAction')&&_0xa12c78[_0x468a4c(0x1be)]){this['setState'](_0x329da2,{'val':![],'ack':!![]}),aiAgent[_0x468a4c(0x273)](this);return;}if(_0x329da2[_0x468a4c(0x164)](_0x468a4c(0x1fc))&&_0xa12c78[_0x468a4c(0x1be)]){this['setState'](_0x329da2,{'val':![],'ack':!![]});if(this[_0x468a4c(0x1a5)])try{const _0x13913f=await this[_0x468a4c(0x209)](_0x468a4c(0x1d4));if(_0x13913f&&_0x13913f[_0x468a4c(0x1be)]){const _0x173678=JSON[_0x468a4c(0x292)](_0x13913f[_0x468a4c(0x1be)]);this[_0x468a4c(0x1ce)]('analysis.training.status',{'val':_0x468a4c(0x219),'ack':!![]}),pythonBridge[_0x468a4c(0x17f)](this,_0x468a4c(0x272),{'sequences':_0x173678});}}catch(_0x35d873){}return;}if(_0x329da2[_0x468a4c(0x164)](_0x468a4c(0x25d))&&_0xa12c78[_0x468a4c(0x1be)]){this['setState'](_0x329da2,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x2ef084=await this[_0x468a4c(0x209)](_0x468a4c(0x181));if(_0x2ef084&&_0x2ef084[_0x468a4c(0x1be)])pythonBridge[_0x468a4c(0x17f)](this,_0x468a4c(0x162),{'digests':JSON[_0x468a4c(0x292)](_0x2ef084[_0x468a4c(0x1be)])});}catch(_0x3b095b){}return;}if(_0x329da2[_0x468a4c(0x164)]('analysis.training.triggerEnergy')&&_0xa12c78[_0x468a4c(0x1be)]){this['setState'](_0x329da2,{'val':![],'ack':!![]});if(this[_0x468a4c(0x1a5)])try{const _0x29c107=await this[_0x468a4c(0x209)](_0x468a4c(0x1db));if(_0x29c107&&_0x29c107[_0x468a4c(0x1be)])pythonBridge[_0x468a4c(0x17f)](this,_0x468a4c(0x240),{'points':JSON[_0x468a4c(0x292)](_0x29c107[_0x468a4c(0x1be)])});}catch(_0x3443bb){}return;}if(_0x329da2['includes']('analysis.training.triggerComfort')&&_0xa12c78['val']){this['setState'](_0x329da2,{'val':![],'ack':!![]});if(this[_0x468a4c(0x1a5)])try{const _0xa35e64=await this[_0x468a4c(0x209)](_0x468a4c(0x215));if(_0xa35e64&&_0xa35e64['val']){const _0x124138={};this[_0x468a4c(0x2a8)][_0x468a4c(0x268)]&&Array[_0x468a4c(0x1e9)](this[_0x468a4c(0x2a8)][_0x468a4c(0x268)])&&this[_0x468a4c(0x2a8)][_0x468a4c(0x268)][_0x468a4c(0x254)](_0x1c9a34=>{const _0x5197dc=_0x468a4c;if(_0x1c9a34['id']&&_0x1c9a34[_0x5197dc(0x17b)])_0x124138[_0x1c9a34['id']]=_0x1c9a34[_0x5197dc(0x17b)];}),this['log']['info'](_0x468a4c(0x1bb)+Object['keys'](_0x124138)[_0x468a4c(0x25a)]+'\x20devices.'),pythonBridge['send'](this,_0x468a4c(0x168),{'events':JSON[_0x468a4c(0x292)](_0xa35e64[_0x468a4c(0x1be)]),'deviceMap':_0x124138});}}catch(_0x562b66){this['log']['error'](_0x468a4c(0x18d)+_0x562b66[_0x468a4c(0x1b3)]);}return;}if(_0x329da2['includes']('analysis.training.triggerTopology')&&_0xa12c78['val']){this[_0x468a4c(0x200)](_0x329da2,{'val':![],'ack':!![]}),topology[_0x468a4c(0x1a0)](this);if(this[_0x468a4c(0x1a5)])try{const _0x500002=await this[_0x468a4c(0x209)](_0x468a4c(0x1d4));if(_0x500002&&_0x500002[_0x468a4c(0x1be)]){const _0x39e2c1=JSON[_0x468a4c(0x292)](_0x500002['val']);this[_0x468a4c(0x28c)][_0x468a4c(0x262)](_0x468a4c(0x1c6)+_0x39e2c1[_0x468a4c(0x25a)]+'\x20sequences...'),pythonBridge[_0x468a4c(0x17f)](this,'TRAIN_TOPOLOGY',{'sequences':_0x39e2c1});}else this[_0x468a4c(0x28c)]['warn']('âš ï¸\x20Graph-Brain:\x20No\x20training\x20sequences\x20found\x20in\x20LTM.');}catch(_0x168bd8){this[_0x468a4c(0x28c)][_0x468a4c(0x260)](_0x468a4c(0x23c)+_0x168bd8[_0x468a4c(0x1b3)]);}return;}}if(this[_0x468a4c(0x2a8)][_0x468a4c(0x208)]&&this[_0x468a4c(0x2a8)][_0x468a4c(0x208)][_0x468a4c(0x164)](_0x329da2)){await this[_0x468a4c(0x2a6)]();return;}const _0x1a938e=(this['config'][_0x468a4c(0x268)]||[])[_0x468a4c(0x1d0)](_0x5ac450=>_0x5ac450['id']===_0x329da2);if(_0x1a938e){const _0x182ee8=await recorder['processSensorEvent'](this,_0x329da2,_0xa12c78,_0x1a938e);_0x182ee8&&_0x182ee8['type']===_0x468a4c(0x22f)&&_0x182ee8[_0x468a4c(0x17e)]&&this[_0x468a4c(0x1a5)]&&deadMan[_0x468a4c(0x299)](this,_0x182ee8[_0x468a4c(0x17e)]),_0xa12c78[_0x468a4c(0x1be)]&&(_0xa12c78['val']===!![]||_0xa12c78[_0x468a4c(0x1be)]===0x1||String(_0xa12c78[_0x468a4c(0x1be)])[_0x468a4c(0x1f9)]()===_0x468a4c(0x20c))&&(_0x1a938e['type']&&(_0x1a938e['type'][_0x468a4c(0x164)](_0x468a4c(0x213))||_0x1a938e['type'][_0x468a4c(0x164)](_0x468a4c(0x19d))||_0x1a938e[_0x468a4c(0x17b)]['includes']('magnet'))&&this['analyzeWindowOpening'](_0x1a938e)),(_0x1a938e[_0x468a4c(0x17b)]===_0x468a4c(0x187)||_0x1a938e[_0x468a4c(0x17b)]===_0x468a4c(0x24c))&&automation[_0x468a4c(0x298)](this);}}async[a0_0x3a72a5(0x21f)](_0x483063){const _0x3c6bad=a0_0x3a72a5;if(!this['memoryCache']||Date[_0x3c6bad(0x271)]()-this[_0x3c6bad(0x239)]>0x493e0)return;if(!this[_0x3c6bad(0x233)]['sources']||!this['memoryCache'][_0x3c6bad(0x178)])return;try{const _0x1f7e35=JSON[_0x3c6bad(0x292)](_0x483063),_0x3a0b38=this[_0x3c6bad(0x233)][_0x3c6bad(0x16e)];let _0x4f4b95=![];for(const _0x20bd18 in _0x3a0b38){if(_0x3a0b38[_0x20bd18][_0x3c6bad(0x164)]('AI')&&_0x1f7e35[_0x20bd18]&&!_0x1f7e35[_0x20bd18][_0x3c6bad(0x164)]('AI')){_0x4f4b95=!![];break;}}_0x4f4b95&&(this[_0x3c6bad(0x28c)][_0x3c6bad(0x262)](_0x3c6bad(0x1ad)),await this[_0x3c6bad(0x1ce)](_0x3c6bad(0x27b),{'val':JSON[_0x3c6bad(0x22e)](this[_0x3c6bad(0x233)][_0x3c6bad(0x178)]),'ack':!![]}),await this['setStateAsync'](_0x3c6bad(0x249),{'val':JSON['stringify'](this['memoryCache'][_0x3c6bad(0x16e)]),'ack':!![]}));}catch(_0xf9e1bf){}}async[a0_0x3a72a5(0x1ca)](_0x186b47){const _0x4e834f=a0_0x3a72a5;if(typeof _0x186b47==='object'&&_0x186b47[_0x4e834f(0x1b3)]){if(_0x186b47[_0x4e834f(0x207)]===_0x4e834f(0x23f))try{const _0x572e23=await automation['scanThermostats'](this);this[_0x4e834f(0x23d)](_0x186b47[_0x4e834f(0x29a)],_0x186b47[_0x4e834f(0x207)],{'success':!![],'results':_0x572e23},_0x186b47[_0x4e834f(0x288)]);}catch(_0x1f2655){this[_0x4e834f(0x23d)](_0x186b47[_0x4e834f(0x29a)],_0x186b47['command'],{'success':![],'error':_0x1f2655[_0x4e834f(0x1b3)]},_0x186b47['callback']);}else{if(_0x186b47[_0x4e834f(0x207)]==='simulateEnergyMPC')try{const {current_temps:_0x3e467d,t_out:_0x5a146a,targets:_0x28080e,t_forecast:_0x86ae44}=_0x186b47[_0x4e834f(0x1b3)],_0x2510db=[];let _0x41ed7a={};try{const _0x20d9dd=await this[_0x4e834f(0x209)](_0x4e834f(0x279));if(_0x20d9dd&&_0x20d9dd[_0x4e834f(0x1be)]){const _0x57ce58=JSON[_0x4e834f(0x292)](_0x20d9dd[_0x4e834f(0x1be)]);_0x41ed7a=_0x57ce58[_0x4e834f(0x283)]||_0x57ce58;}}catch(_0x7eaab0){}const _0x2295cd=_0x86ae44!==undefined&&_0x86ae44!==null?(_0x5a146a+_0x86ae44)/0x2:_0x5a146a;for(const [_0x22d666,_0x1d97fa]of Object[_0x4e834f(0x22a)](_0x3e467d)){const _0x2341e9=_0x28080e[_0x22d666]||0x15;if(_0x1d97fa<=_0x2341e9)continue;let _0x428d5d=_0x41ed7a[_0x22d666]||-0.5;if(_0x428d5d>=0x0)_0x428d5d=-0.5;const _0x399dfc=Math['abs'](_0x428d5d),_0x4116fb=_0x1d97fa-_0x2341e9;let _0x2b9790=Math[_0x4e834f(0x1c8)](_0x4116fb/_0x399dfc*0x3c);const _0x3e5032=_0x1d97fa-_0x5a146a,_0x2684dc=_0x1d97fa-_0x2295cd;if(_0x2684dc!==0x0&&_0x3e5032!==0x0){const _0x15b49f=_0x3e5032/_0x2684dc;_0x2b9790=Math[_0x4e834f(0x1c8)](_0x2b9790*_0x15b49f);}if(_0x2b9790>0xf){if(_0x2b9790>0xf0)_0x2b9790=0xf0;_0x2510db['push']({'room':_0x22d666,'minutes_safe':_0x2b9790,'target':_0x2341e9,'current':_0x1d97fa,'savings_msg':'Heizung\x20kann\x20'+_0x2b9790+_0x4e834f(0x179)});}}_0x2510db[_0x4e834f(0x1ab)]((_0x22c2e6,_0x865416)=>_0x865416[_0x4e834f(0x256)]-_0x22c2e6['minutes_safe']),this[_0x4e834f(0x23d)](_0x186b47[_0x4e834f(0x29a)],_0x186b47[_0x4e834f(0x207)],{'success':!![],'proposals':_0x2510db},_0x186b47[_0x4e834f(0x288)]);}catch(_0x727e7d){this[_0x4e834f(0x23d)](_0x186b47['from'],_0x186b47[_0x4e834f(0x207)],{'success':![],'error':_0x727e7d[_0x4e834f(0x1b3)]},_0x186b47['callback']);}else{if(_0x186b47[_0x4e834f(0x207)]===_0x4e834f(0x230))try{await automation[_0x4e834f(0x1ac)](this),this[_0x4e834f(0x23d)](_0x186b47[_0x4e834f(0x29a)],_0x186b47[_0x4e834f(0x207)],{'success':!![]},_0x186b47[_0x4e834f(0x288)]);}catch(_0x1ad9b0){this[_0x4e834f(0x23d)](_0x186b47[_0x4e834f(0x29a)],_0x186b47[_0x4e834f(0x207)],{'success':![],'error':_0x1ad9b0[_0x4e834f(0x1b3)]},_0x186b47[_0x4e834f(0x288)]);}else{if(_0x186b47[_0x4e834f(0x207)]===_0x4e834f(0x1d3))try{const _0x47e519=_0x186b47['message'][_0x4e834f(0x1f6)],_0xf359c5=_0x4e834f(0x1ec),_0x4add91=await this[_0x4e834f(0x209)](_0xf359c5);let _0x448037={};if(_0x4add91&&_0x4add91[_0x4e834f(0x1be)])try{_0x448037=JSON[_0x4e834f(0x292)](_0x4add91[_0x4e834f(0x1be)]);}catch(_0x9e1d93){}_0x47e519&&_0x448037[_0x47e519]?(delete _0x448037[_0x47e519],await this[_0x4e834f(0x1ce)](_0xf359c5,{'val':JSON['stringify'](_0x448037),'ack':!![]}),this[_0x4e834f(0x28c)]['info']('ðŸŽ“\x20[RL-RESET]\x20Lern-Sperre\x20(Penalty)\x20fÃ¼r\x20\x27'+_0x47e519+'\x27\x20wurde\x20manuell\x20vom\x20Benutzer\x20gelÃ¶scht.'),this['sendTo'](_0x186b47['from'],_0x186b47[_0x4e834f(0x207)],{'success':!![]},_0x186b47['callback'])):this['sendTo'](_0x186b47[_0x4e834f(0x29a)],_0x186b47[_0x4e834f(0x207)],{'success':![],'error':_0x4e834f(0x217)},_0x186b47[_0x4e834f(0x288)]);}catch(_0x1200ac){this['sendTo'](_0x186b47[_0x4e834f(0x29a)],_0x186b47[_0x4e834f(0x207)],{'success':![],'error':_0x1200ac[_0x4e834f(0x1b3)]},_0x186b47[_0x4e834f(0x288)]);}else{if(_0x186b47[_0x4e834f(0x207)]===_0x4e834f(0x16d))await this['setStateAsync'](_0x4e834f(0x287),{'val':![],'ack':!![]}),await this[_0x4e834f(0x1ce)]('analysis.automation.description',{'val':'','ack':!![]}),await this['setStateAsync'](_0x4e834f(0x202),{'val':'','ack':!![]}),this[_0x4e834f(0x23d)](_0x186b47['from'],_0x186b47[_0x4e834f(0x207)],{'success':!![]},_0x186b47[_0x4e834f(0x288)]);else{if(_0x186b47[_0x4e834f(0x207)]===_0x4e834f(0x222)){const {targetId:_0x23f235,targetValue:_0x5ef794}=_0x186b47[_0x4e834f(0x1b3)];await this['setStateAsync'](_0x4e834f(0x287),{'val':!![],'ack':!![]}),await this[_0x4e834f(0x1ce)](_0x4e834f(0x1e0),{'val':_0x4e834f(0x188),'ack':!![]}),await this['setStateAsync'](_0x4e834f(0x202),{'val':_0x23f235,'ack':!![]}),await this['setStateAsync'](_0x4e834f(0x248),{'val':String(_0x5ef794),'ack':!![]}),this[_0x4e834f(0x23d)](_0x186b47[_0x4e834f(0x29a)],_0x186b47[_0x4e834f(0x207)],{'success':!![]},_0x186b47[_0x4e834f(0x288)]);}else{if(_0x186b47[_0x4e834f(0x207)]===_0x4e834f(0x173))try{const _0x3a44a0=_0x186b47[_0x4e834f(0x1b3)]['apiKey'];if(!_0x3a44a0)throw new Error(_0x4e834f(0x1fb));const _0x41f3f1=new GoogleGenerativeAI(_0x3a44a0),_0x4d28fc=_0x41f3f1['getGenerativeModel']({'model':GEMINI_MODEL}),_0x37d96e=await _0x4d28fc['generateContent'](_0x4e834f(0x297)),_0x592eed=await _0x37d96e[_0x4e834f(0x1ee)];if(_0x592eed['text']())this[_0x4e834f(0x23d)](_0x186b47[_0x4e834f(0x29a)],_0x186b47['command'],{'success':!![],'message':_0x4e834f(0x182)},_0x186b47[_0x4e834f(0x288)]);else throw new Error(_0x4e834f(0x26d));}catch(_0x1ada92){this[_0x4e834f(0x23d)](_0x186b47[_0x4e834f(0x29a)],_0x186b47['command'],{'success':![],'message':_0x1ada92[_0x4e834f(0x1b3)]},_0x186b47[_0x4e834f(0x288)]);}else{if(_0x186b47[_0x4e834f(0x207)]===_0x4e834f(0x1f5))try{const _0x955e44=await scanner['scanForDevices'](this,_0x186b47[_0x4e834f(0x1b3)]||{});this[_0x4e834f(0x23d)](_0x186b47['from'],_0x186b47['command'],{'success':!![],'devices':_0x955e44},_0x186b47['callback']);}catch(_0x5658f1){this[_0x4e834f(0x23d)](_0x186b47[_0x4e834f(0x29a)],_0x186b47[_0x4e834f(0x207)],{'success':![],'error':_0x5658f1[_0x4e834f(0x1b3)]},_0x186b47[_0x4e834f(0x288)]);}else{if(_0x186b47[_0x4e834f(0x207)]===_0x4e834f(0x24e))try{const {matrix:_0x3d9d13}=_0x186b47[_0x4e834f(0x1b3)],_0x1b9205=await this['getStateAsync'](_0x4e834f(0x1b8));if(_0x1b9205&&_0x1b9205[_0x4e834f(0x1be)]){const _0x3f1bd8=JSON[_0x4e834f(0x292)](_0x1b9205['val']);_0x3f1bd8['matrix']=_0x3d9d13,_0x3f1bd8[_0x4e834f(0x1a8)]=Date['now'](),await this['setStateAsync'](_0x4e834f(0x1b8),{'val':JSON[_0x4e834f(0x22e)](_0x3f1bd8),'ack':!![]}),pythonBridge[_0x4e834f(0x17f)](this,'SET_TOPOLOGY',_0x3f1bd8);}this[_0x4e834f(0x23d)](_0x186b47[_0x4e834f(0x29a)],_0x186b47[_0x4e834f(0x207)],{'success':!![]},_0x186b47[_0x4e834f(0x288)]);}catch(_0x4be700){this['log'][_0x4e834f(0x260)](_0x4be700);}else{if(_0x186b47[_0x4e834f(0x207)]===_0x4e834f(0x204))this[_0x4e834f(0x23d)](_0x186b47[_0x4e834f(0x29a)],_0x186b47[_0x4e834f(0x207)],{'success':!![],'dailyDigests':this['dailyDigests']||[],'analysisHistory':this['analysisHistory']||[]},_0x186b47[_0x4e834f(0x288)]);else{if(_0x186b47[_0x4e834f(0x207)]==='getOverviewData'){const _0x4a5584=this[_0x4e834f(0x165)]['length'];let _0x2107d9=new Array(0x18)[_0x4e834f(0x1ef)](0x0);try{const _0x4e4f40=await this[_0x4e834f(0x209)](_0x4e834f(0x24b));if(_0x4e4f40&&_0x4e4f40['val'])_0x2107d9=JSON['parse'](_0x4e4f40['val']);else{const _0x3d9149=new Date()[_0x4e834f(0x1e8)](0x0,0x0,0x0,0x0);this[_0x4e834f(0x1dd)]&&this[_0x4e834f(0x1dd)][_0x4e834f(0x254)](_0x26a0e9=>{const _0x2fa9bf=_0x4e834f;if(_0x26a0e9[_0x2fa9bf(0x197)]>=_0x3d9149){const _0x15850a=new Date(_0x26a0e9[_0x2fa9bf(0x197)])[_0x2fa9bf(0x1ae)]();if(_0x15850a>=0x0&&_0x15850a<0x18)_0x2107d9[_0x15850a]++;}});}}catch(_0x438f33){this[_0x4e834f(0x28c)]['warn'](_0x4e834f(0x16f)+_0x438f33[_0x4e834f(0x1b3)]);}let _0x2d2296=![],_0x17c40a='',_0x4a5cb9='',_0x346b10='';try{const _0x15b44f=await this[_0x4e834f(0x209)](_0x4e834f(0x287));if(_0x15b44f&&_0x15b44f[_0x4e834f(0x1be)]){_0x2d2296=!![];const _0x2e0297=await this['getStateAsync'](_0x4e834f(0x1e0));_0x17c40a=_0x2e0297?_0x2e0297[_0x4e834f(0x1be)]:'';const _0xa9a72b=await this[_0x4e834f(0x209)](_0x4e834f(0x202));_0x4a5cb9=_0xa9a72b?_0xa9a72b[_0x4e834f(0x1be)]:'';const _0x487dca=await this[_0x4e834f(0x209)](_0x4e834f(0x248));_0x346b10=_0x487dca?_0x487dca[_0x4e834f(0x1be)]:'';}}catch(_0x554a74){}const _0x3cec03=await this[_0x4e834f(0x1de)](),_0x1e49e4=(this['config'][_0x4e834f(0x268)]||[])['some'](_0x51f96b=>_0x51f96b[_0x4e834f(0x265)]),_0x5bbd31=_0x3cec03&&_0x1e49e4;let _0x48b60c='';try{const _0x201f78=await this['getStateAsync'](_0x4e834f(0x216));if(_0x201f78&&_0x201f78['val'])_0x48b60c=_0x201f78[_0x4e834f(0x1be)];}catch(_0x5db4ab){}this['sendTo'](_0x186b47['from'],_0x186b47['command'],{'success':!![],'eventHistory':this[_0x4e834f(0x1dd)][_0x4e834f(0x285)](0x0,0x64),'stats':{'digestCount':_0x4a5584,'isPresent':this[_0x4e834f(0x194)],'hourlyActivity':_0x2107d9,'solarActive':_0x5bbd31,'presenceWho':_0x48b60c},'automation':{'detected':_0x2d2296,'description':_0x17c40a,'targetId':_0x4a5cb9,'targetValue':_0x346b10}},_0x186b47[_0x4e834f(0x288)]);}else{if(_0x186b47[_0x4e834f(0x207)]===_0x4e834f(0x20a)){const _0x38ab4d=await this[_0x4e834f(0x284)](_0x4e834f(0x261),_0x4e834f(0x282)),_0x1ed53f=[];if(_0x38ab4d)for(const _0x2ec35f in _0x38ab4d){const _0x224e69=_0x38ab4d[_0x2ec35f],_0x2c6fdf=(_0x224e69[_0x4e834f(0x20f)]&&typeof _0x224e69['common'][_0x4e834f(0x29c)]==='object'?_0x224e69[_0x4e834f(0x20f)][_0x4e834f(0x29c)]['de']:_0x224e69[_0x4e834f(0x20f)][_0x4e834f(0x29c)])||_0x224e69[_0x4e834f(0x20f)][_0x4e834f(0x29c)];_0x1ed53f[_0x4e834f(0x1cb)]({'id':_0x2ec35f,'name':_0x2c6fdf});}const _0x3ac4b6=await this[_0x4e834f(0x284)]('enum.rooms.*',_0x4e834f(0x282)),_0x45f08b=[];if(_0x3ac4b6)for(const _0x529ac3 in _0x3ac4b6){const _0x2507ad=_0x3ac4b6[_0x529ac3],_0x256236=(_0x2507ad['common']&&typeof _0x2507ad[_0x4e834f(0x20f)][_0x4e834f(0x29c)]===_0x4e834f(0x22b)?_0x2507ad[_0x4e834f(0x20f)][_0x4e834f(0x29c)]['de']:_0x2507ad[_0x4e834f(0x20f)]['name'])||_0x529ac3[_0x4e834f(0x24d)]('.')[_0x4e834f(0x1bf)]();_0x45f08b[_0x4e834f(0x1cb)](_0x256236);}this[_0x4e834f(0x23d)](_0x186b47[_0x4e834f(0x29a)],_0x186b47['command'],{'success':!![],'enums':_0x1ed53f,'rooms':_0x45f08b},_0x186b47[_0x4e834f(0x288)]);}else{if(_0x186b47[_0x4e834f(0x207)]===_0x4e834f(0x172))try{let _0x4d5870=_0x4e834f(0x247),_0x3f7bc0=_0x4e834f(0x16b);if(this['config'][_0x4e834f(0x29e)]){const _0x357f94=await recorder['getOutsideTemperatureNumeric'](this);_0x4d5870=_0x357f94!==null?_0x357f94+'Â°C':_0x4e834f(0x203);}if(this[_0x4e834f(0x2a8)][_0x4e834f(0x2a5)]){const _0x2ad3d7=await this[_0x4e834f(0x296)](_0x4e834f(0x27d)+this[_0x4e834f(0x2a8)][_0x4e834f(0x2a5)]);_0x3f7bc0=_0x2ad3d7?_0x4e834f(0x1b4):_0x4e834f(0x263);}this[_0x4e834f(0x23d)](_0x186b47[_0x4e834f(0x29a)],_0x186b47['command'],{'success':!![],'weather':_0x4d5870,'calendar':_0x3f7bc0},_0x186b47['callback']);}catch(_0x2bf62f){this[_0x4e834f(0x23d)](_0x186b47[_0x4e834f(0x29a)],_0x186b47[_0x4e834f(0x207)],{'success':![],'error':_0x2bf62f[_0x4e834f(0x1b3)]},_0x186b47[_0x4e834f(0x288)]);}else{if(_0x186b47['command']==='getCalendarNames')try{const _0x3aacb7=_0x186b47[_0x4e834f(0x1b3)]['instance'],_0xfb8b0c=await this[_0x4e834f(0x229)](_0x3aacb7+_0x4e834f(0x234));let _0x34374d=[];if(_0xfb8b0c&&_0xfb8b0c['val']){const _0x16a62c=JSON[_0x4e834f(0x292)](_0xfb8b0c[_0x4e834f(0x1be)]),_0x245342=new Set();Array[_0x4e834f(0x1e9)](_0x16a62c)&&_0x16a62c[_0x4e834f(0x254)](_0x434e11=>{const _0x304438=_0x4e834f;if(_0x434e11[_0x304438(0x29b)])_0x245342[_0x304438(0x177)](_0x434e11['_calName']);else{if(_0x434e11[_0x304438(0x1d8)])_0x245342[_0x304438(0x177)](_0x434e11[_0x304438(0x1d8)]);}}),_0x34374d=Array[_0x4e834f(0x29a)](_0x245342)['sort']();}if(_0x34374d[_0x4e834f(0x25a)]===0x0)_0x34374d=[_0x4e834f(0x1cc)];this[_0x4e834f(0x23d)](_0x186b47[_0x4e834f(0x29a)],_0x186b47[_0x4e834f(0x207)],{'success':!![],'names':_0x34374d},_0x186b47[_0x4e834f(0x288)]);}catch(_0x7ac121){this['sendTo'](_0x186b47[_0x4e834f(0x29a)],_0x186b47['command'],{'success':![],'error':_0x7ac121[_0x4e834f(0x1b3)]},_0x186b47[_0x4e834f(0x288)]);}else{if(_0x186b47['command']===_0x4e834f(0x259))try{await setup[_0x4e834f(0x25c)](this,'ðŸ””\x20Dies\x20ist\x20ein\x20Test\x20von\x20Cogni-Living.',![],![]),this['sendTo'](_0x186b47[_0x4e834f(0x29a)],_0x186b47['command'],{'success':!![],'message':_0x4e834f(0x26b)},_0x186b47['callback']);}catch(_0xcc2ad8){this['log'][_0x4e834f(0x260)](_0x4e834f(0x1b7)+_0xcc2ad8[_0x4e834f(0x1b3)]),this[_0x4e834f(0x23d)](_0x186b47['from'],_0x186b47[_0x4e834f(0x207)],{'success':![],'message':_0x4e834f(0x226)+_0xcc2ad8['message']},_0x186b47[_0x4e834f(0x288)]);}}}}}}}}}}}}}}}}}async['loadSystemMode'](){const _0x590053=a0_0x3a72a5;try{const _0x11d893=await this[_0x590053(0x209)](setup['SYSTEM_DP_MODE']);_0x11d893&&_0x11d893[_0x590053(0x1be)]&&Object[_0x590053(0x20d)](setup[_0x590053(0x176)])['includes'](_0x11d893['val'])?this['currentSystemMode']=_0x11d893['val']:(this[_0x590053(0x220)]=setup[_0x590053(0x176)][_0x590053(0x1e3)],await this[_0x590053(0x1ce)](setup[_0x590053(0x212)],{'val':setup[_0x590053(0x176)]['NORMAL'],'ack':!![]}));}catch(_0x186026){this['currentSystemMode']=setup[_0x590053(0x176)]['NORMAL'];}}async[a0_0x3a72a5(0x2a6)](){const _0x2b213e=a0_0x3a72a5;try{const _0x4eacf6=this['config'][_0x2b213e(0x208)]||[];let _0x107496=![];const _0x5677a7=[];for(const _0x35e5ea of _0x4eacf6){try{const _0x1aa788=await this[_0x2b213e(0x229)](_0x35e5ea);_0x1aa788&&(_0x1aa788[_0x2b213e(0x1be)]===!![]||_0x1aa788[_0x2b213e(0x1be)]===_0x2b213e(0x280)||_0x1aa788['val']===0x1)&&(_0x107496=!![],_0x5677a7[_0x2b213e(0x1cb)](_0x35e5ea));}catch(_0x2336c1){}}return await this[_0x2b213e(0x1ce)](_0x2b213e(0x216),{'val':_0x5677a7[_0x2b213e(0x206)](',\x20'),'ack':!![]}),_0x107496&&(this['exitTimer']&&(this['log']['info'](_0x2b213e(0x1fe)),recorder[_0x2b213e(0x196)](this)),!this[_0x2b213e(0x194)]&&this[_0x2b213e(0x220)]===setup[_0x2b213e(0x176)][_0x2b213e(0x1e3)]&&await recorder[_0x2b213e(0x1bc)](this,!![])),_0x107496;}catch(_0x17760f){return![];}}async['runAutopilot'](){const _0x3fad98=a0_0x3a72a5;this['log'][_0x3fad98(0x2a3)](_0x3fad98(0x257)),await aiAgent['runGeminiAnalysis'](this),this['updateHealthVector'](),this[_0x3fad98(0x244)](),this[_0x3fad98(0x205)]();}async['checkSolarCondition'](){const _0xf233c5=a0_0x3a72a5,_0x30b7a7=[_0xf233c5(0x198),_0xf233c5(0x24f),_0xf233c5(0x1d6)],_0xcc0d67=[_0xf233c5(0x281),'Current.WeatherText',_0xf233c5(0x294)];for(const _0x2e4f4e of _0x30b7a7){for(const _0x42810f of _0xcc0d67){try{const _0x46c7a4=_0x2e4f4e+'.'+_0x42810f,_0x4e7dee=await this['getForeignStateAsync'](_0x46c7a4);if(_0x4e7dee&&_0x4e7dee[_0xf233c5(0x1be)]){const _0x2306b3=String(_0x4e7dee[_0xf233c5(0x1be)])[_0xf233c5(0x1f9)]();if(_0x2306b3[_0xf233c5(0x164)]('sonn')||_0x2306b3[_0xf233c5(0x164)]('sunny')||_0x2306b3[_0xf233c5(0x164)](_0xf233c5(0x25e))||_0x2306b3['includes'](_0xf233c5(0x2ab))||_0x2306b3['includes']('heiter'))return!![];}}catch(_0x2ae721){}}}return![];}[a0_0x3a72a5(0x244)](){const _0x5e9389=a0_0x3a72a5;if(!this[_0x5e9389(0x1a5)])return;try{this[_0x5e9389(0x16c)](_0x5e9389(0x1d4),(_0x1cd44c,_0x3e02a7)=>{const _0x3ec796=_0x5e9389;_0x3e02a7&&_0x3e02a7[_0x3ec796(0x1be)]&&pythonBridge['send'](this,_0x3ec796(0x17c),{'sequences':JSON['parse'](_0x3e02a7[_0x3ec796(0x1be)])});});}catch(_0xcc492f){}}async[a0_0x3a72a5(0x205)](){const _0xe4fa4a=a0_0x3a72a5;if(!this['isProVersion'])return;try{const _0x40ba2c=await recorder['getOutsideTemperatureNumeric'](this);if(_0x40ba2c===null)return;const _0xcca3c9={},_0x280360={},_0xae1c81=this[_0xe4fa4a(0x2a8)][_0xe4fa4a(0x268)]||[];for(const _0x12a8b4 of _0xae1c81){if(_0x12a8b4[_0xe4fa4a(0x17b)]===_0xe4fa4a(0x187)&&_0x12a8b4['location']){const _0x13df11=this[_0xe4fa4a(0x1a3)][_0x12a8b4['id']];if(_0x13df11!==undefined)_0xcca3c9[_0x12a8b4['location']]=_0x13df11;if(_0x12a8b4[_0xe4fa4a(0x265)])_0x280360[_0x12a8b4[_0xe4fa4a(0x17e)]]=!![];}}const _0x4324f1=await this['checkSolarCondition']();let _0x435dd1={};try{const _0x528416=await this[_0xe4fa4a(0x209)](_0xe4fa4a(0x270));if(_0x528416&&_0x528416['val'])_0x435dd1=JSON['parse'](_0x528416[_0xe4fa4a(0x1be)]);}catch(_0x8d73c4){}Object['keys'](_0xcca3c9)[_0xe4fa4a(0x25a)]>0x0&&(pythonBridge[_0xe4fa4a(0x17f)](this,'PREDICT_ENERGY',{'current_temps':_0xcca3c9,'t_out':_0x40ba2c,'is_sunny':_0x4324f1,'solar_flags':_0x280360,'warmup_targets':_0x435dd1}),pythonBridge[_0xe4fa4a(0x17f)](this,_0xe4fa4a(0x290),{'current_temps':_0xcca3c9,'t_out':_0x40ba2c,'targets':{}}));}catch(_0x4e3dc8){}}[a0_0x3a72a5(0x15f)](){const _0x204dd8=a0_0x3a72a5;if(!this[_0x204dd8(0x28b)]||this[_0x204dd8(0x28b)]['length']===0x0)return;const _0x11b57f=new Array(0x60)[_0x204dd8(0x1ef)](0x0),_0x2f8730=new Date()['setHours'](0x0,0x0,0x0,0x0);this[_0x204dd8(0x28b)][_0x204dd8(0x254)](_0x50a1ce=>{const _0x4d4342=_0x204dd8,_0x5455b1=new Date(_0x50a1ce['timestamp']);if(_0x5455b1[_0x4d4342(0x1a2)]()>=_0x2f8730){const _0x39eee2=_0x5455b1[_0x4d4342(0x1ae)](),_0x1d993a=_0x5455b1[_0x4d4342(0x231)](),_0x29c6d3=_0x39eee2*0x4+Math[_0x4d4342(0x1c8)](_0x1d993a/0xf);if(_0x29c6d3>=0x0&&_0x29c6d3<0x60)_0x11b57f[_0x29c6d3]++;}});}[a0_0x3a72a5(0x2ad)](){const _0x3d6e09=a0_0x3a72a5;if(!this[_0x3d6e09(0x165)]||this[_0x3d6e09(0x165)][_0x3d6e09(0x25a)]<0x2)return;const _0x33e03c=this[_0x3d6e09(0x165)][_0x3d6e09(0x184)](_0x332ed1=>{const _0x5ad744=_0x3d6e09,_0xb6ff2c=(_0x332ed1[_0x5ad744(0x266)]||'')[_0x5ad744(0x1f9)]();return ACTIVITY_LEVEL_MAP[_0xb6ff2c]||0x32;});pythonBridge['send'](this,_0x3d6e09(0x2ac),{'values':_0x33e03c,'tag':_0x3d6e09(0x1f1)});}async[a0_0x3a72a5(0x27e)](_0x1c78b3){const _0x55a652=a0_0x3a72a5;if(_0x1c78b3==null||typeof _0x1c78b3!==_0x55a652(0x227))return;const _0x355252=Date[_0x55a652(0x271)]();this['pressureBuffer']['push']({'ts':_0x355252,'val':_0x1c78b3}),this[_0x55a652(0x242)]=this['pressureBuffer'][_0x55a652(0x1da)](_0x3ae4d6=>_0x355252-_0x3ae4d6['ts']<0x1388);if(this[_0x55a652(0x28f)])return;if(this['config'][_0x55a652(0x26c)]){const _0x47eb58=await this[_0x55a652(0x229)](this[_0x55a652(0x2a8)]['infrasoundArmingId']);if(_0x47eb58&&!_0x47eb58['val'])return;}const _0x1bde3b=this['config'][_0x55a652(0x1eb)]||0.04;if(Math[_0x55a652(0x28d)](_0x1c78b3)>=_0x1bde3b){this[_0x55a652(0x28c)][_0x55a652(0x1d5)](_0x55a652(0x232)+_0x1c78b3+'\x20hPa\x20(Limit:\x20'+_0x1bde3b+')'),await this[_0x55a652(0x1ce)]('security.alarm_triggered',{'val':!![],'ack':!![]});const _0x41a3a4=this[_0x55a652(0x194)];_0x41a3a4?(this[_0x55a652(0x28c)][_0x55a652(0x262)](_0x55a652(0x1f0)),this[_0x55a652(0x1f4)](_0x1c78b3,_0x55a652(0x245))):(this[_0x55a652(0x1f4)](_0x1c78b3,'ALARM'),this[_0x55a652(0x25c)](_0x55a652(0x1a6)+_0x1c78b3+_0x55a652(0x277))),this[_0x55a652(0x28f)]=!![],setTimeout(()=>{const _0x4dcad9=_0x55a652;this[_0x4dcad9(0x28f)]=![];},0x2710);}}async['triggerInfrasoundCorrelation'](_0x30baf4,_0x49424f=a0_0x3a72a5(0x163)){const _0x3c1932=a0_0x3a72a5,_0x5ec64e=Date[_0x3c1932(0x271)](),_0x428e0c=this[_0x3c1932(0x2a8)][_0x3c1932(0x268)]||[];setTimeout(async()=>{const _0x14f984=_0x3c1932;let _0x37b0ed=null,_0x3f315d=_0x14f984(0x170);const _0xf82e9f=_0x428e0c[_0x14f984(0x1da)](_0x280bc2=>_0x280bc2[_0x14f984(0x17b)]&&(_0x280bc2[_0x14f984(0x17b)][_0x14f984(0x164)]('window')||_0x280bc2['type']['includes'](_0x14f984(0x19d))||_0x280bc2[_0x14f984(0x17b)][_0x14f984(0x164)]('magnet')||_0x280bc2['type'][_0x14f984(0x164)](_0x14f984(0x18f)))||_0x280bc2[_0x14f984(0x21c)]&&(_0x280bc2[_0x14f984(0x21c)]['includes'](_0x14f984(0x1e1))||_0x280bc2[_0x14f984(0x21c)][_0x14f984(0x164)](_0x14f984(0x1e6))));for(const _0x54d592 of _0xf82e9f){try{const _0x44ed4e=await this[_0x14f984(0x229)](_0x54d592['id']);if(_0x44ed4e){if(_0x44ed4e['ts']>=_0x5ec64e-0x7d0){_0x37b0ed=_0x54d592[_0x14f984(0x29c)]||_0x54d592['id'],_0x3f315d=_0x14f984(0x27f)+_0x37b0ed;break;}}}catch(_0x265a95){}}const _0x296672={'timestamp':_0x5ec64e,'pressure':_0x30baf4,'isMatch':!!_0x37b0ed,'explanation':_0x3f315d,'type':_0x49424f};await this['appendToLog'](_0x296672),this[_0x14f984(0x28c)]['info'](_0x14f984(0x2a2)+(!!_0x37b0ed?'MATCH\x20(False\x20Positive)':_0x14f984(0x225)));},0x1388);}async[a0_0x3a72a5(0x1fa)](_0x41b67c){const _0x3f404b=a0_0x3a72a5,_0x29b503=Date[_0x3f404b(0x271)](),_0x34178e=_0x41b67c[_0x3f404b(0x29c)]||_0x41b67c['id'][_0x3f404b(0x24d)]('.')[_0x3f404b(0x1bf)]();let _0x511e3e=0x0;setTimeout(async()=>{const _0x19a348=_0x3f404b;this[_0x19a348(0x242)][_0x19a348(0x254)](_0xf9273e=>{const _0x796890=_0x19a348;_0xf9273e['ts']>=_0x29b503-0xfa0&&_0xf9273e['ts']<=_0x29b503+0x3e8&&(Math[_0x796890(0x28d)](_0xf9273e['val'])>Math[_0x796890(0x28d)](_0x511e3e)&&(_0x511e3e=_0xf9273e[_0x796890(0x1be)]));});const _0x1a4b91=this[_0x19a348(0x2a8)][_0x19a348(0x1eb)]||0.04,_0xebc324=Math[_0x19a348(0x28d)](_0x511e3e)>=_0x1a4b91,_0x567db0={'timestamp':_0x29b503,'pressure':_0x511e3e,'isMatch':_0xebc324,'explanation':_0x19a348(0x21a)+_0x34178e,'type':'CALIB'};await this[_0x19a348(0x214)](_0x567db0),this['log'][_0x19a348(0x2a3)](_0x19a348(0x1dc)+_0x34178e+'\x20opened.\x20Peak\x20Pressure:\x20'+_0x511e3e[_0x19a348(0x18a)](0x4)+'\x20hPa\x20(Threshold:\x20'+_0x1a4b91+')');},0x1f4);}async[a0_0x3a72a5(0x214)](_0x472a4f){const _0x522291=a0_0x3a72a5;try{const _0x2e1876=await this[_0x522291(0x209)](_0x522291(0x23a));let _0xca224f=[];if(_0x2e1876&&_0x2e1876['val'])_0xca224f=JSON[_0x522291(0x292)](_0x2e1876[_0x522291(0x1be)]);_0xca224f[_0x522291(0x2a0)](_0x472a4f);if(_0xca224f[_0x522291(0x25a)]>0x14)_0xca224f=_0xca224f[_0x522291(0x285)](0x0,0x14);await this[_0x522291(0x1ce)](_0x522291(0x23a),{'val':JSON['stringify'](_0xca224f),'ack':!![]});}catch(_0x2f090b){this[_0x522291(0x28c)][_0x522291(0x260)]('[Forensics]\x20Save\x20failed:\x20'+_0x2f090b[_0x522291(0x1b3)]);}}[a0_0x3a72a5(0x25c)](_0x44117f){const _0x21a726=a0_0x3a72a5;this['config']['notifyPushoverEnabled']&&this[_0x21a726(0x2a8)][_0x21a726(0x18c)]&&this['sendTo'](this[_0x21a726(0x2a8)][_0x21a726(0x18c)],_0x21a726(0x17f),{'message':_0x44117f,'title':_0x21a726(0x255),'priority':0x1}),this[_0x21a726(0x2a8)][_0x21a726(0x1b9)]&&this['config'][_0x21a726(0x27c)]&&this[_0x21a726(0x23d)](this[_0x21a726(0x2a8)][_0x21a726(0x27c)],_0x21a726(0x17f),{'text':_0x44117f});}}if(require['main']!==module)module[a0_0x3a72a5(0x191)]=_0x4f70bc=>new CogniLiving(_0x4f70bc);else new CogniLiving();