const a0_0x22f06c=a0_0x21c0;(function(_0x277353,_0x5e2d9e){const _0x3126b7=a0_0x21c0,_0x44831e=_0x277353();while(!![]){try{const _0x2c2264=-parseInt(_0x3126b7(0x1fb))/0x1*(parseInt(_0x3126b7(0x23e))/0x2)+-parseInt(_0x3126b7(0x187))/0x3*(-parseInt(_0x3126b7(0x227))/0x4)+-parseInt(_0x3126b7(0x191))/0x5+-parseInt(_0x3126b7(0x19b))/0x6*(parseInt(_0x3126b7(0x167))/0x7)+-parseInt(_0x3126b7(0x182))/0x8*(-parseInt(_0x3126b7(0x1eb))/0x9)+-parseInt(_0x3126b7(0x1b9))/0xa*(parseInt(_0x3126b7(0x1a6))/0xb)+-parseInt(_0x3126b7(0x240))/0xc*(-parseInt(_0x3126b7(0x231))/0xd);if(_0x2c2264===_0x5e2d9e)break;else _0x44831e['push'](_0x44831e['shift']());}catch(_0x2901b0){_0x44831e['push'](_0x44831e['shift']());}}}(a0_0x248d,0x5f2c7));const a0_0x2e154e=(function(){let _0x4286ed=!![];return function(_0x214eb6,_0x1ec309){const _0x25019e=_0x4286ed?function(){const _0x2eca50=a0_0x21c0;if(_0x1ec309){const _0x1e1c5e=_0x1ec309[_0x2eca50(0x1c5)](_0x214eb6,arguments);return _0x1ec309=null,_0x1e1c5e;}}:function(){};return _0x4286ed=![],_0x25019e;};}()),a0_0x4916af=a0_0x2e154e(this,function(){const _0x211a0b=a0_0x21c0;return a0_0x4916af[_0x211a0b(0x150)]()[_0x211a0b(0x228)](_0x211a0b(0x190))[_0x211a0b(0x150)]()[_0x211a0b(0x1fa)](a0_0x4916af)[_0x211a0b(0x228)](_0x211a0b(0x190));});a0_0x4916af();'use strict';const utils=require(a0_0x22f06c(0x154)),{GoogleGenerativeAI}=require(a0_0x22f06c(0x1ce)),schedule=require('node-schedule'),{spawn,exec,execSync}=require(a0_0x22f06c(0x13f)),path=require(a0_0x22f06c(0x143)),fs=require('fs'),HISTORY_MAX_SIZE=0x32,RAW_LOG_MAX_SIZE=0x9c4,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL='models/gemini-flash-latest',LTM_SCHEDULE=a0_0x22f06c(0x213),MODE_RESET_SCHEDULE=a0_0x22f06c(0x16f),SEQUENCE_TIMEOUT_MS=0x5*0x3c*0x3e8,MAX_TRAINING_SET_SIZE=0x1f4,THERMO_LOG_SIZE=0x3e8,EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,LTM_DP_RAW_LOG='LTM.rawEventLog',LTM_DP_DAILY_DIGESTS=a0_0x22f06c(0x188),LTM_DP_STATUS='LTM.processingStatus',LTM_DP_TRIGGER_DIGEST=a0_0x22f06c(0x1a2),LTM_DP_BASELINE_STATUS=a0_0x22f06c(0x21f),LTM_DP_DRIFT_CHANNEL=a0_0x22f06c(0x20f),LTM_DP_DRIFT_STATUS=a0_0x22f06c(0x1a5),LTM_DP_DRIFT_DETAILS='LTM.driftAnalysis.driftDetails',LTM_DP_DRIFT_LAST_CHECK=a0_0x22f06c(0x1a4),SYSTEM_DP_MODE=a0_0x22f06c(0x220),SYSTEM_MODES={'NORMAL':'normal','VACATION':a0_0x22f06c(0x23b),'PARTY':a0_0x22f06c(0x1da),'GUEST':a0_0x22f06c(0x163)},AUTO_RESET_MODES=[SYSTEM_MODES[a0_0x22f06c(0x147)],SYSTEM_MODES[a0_0x22f06c(0x1c8)]],PERSONA_MAPPING={'generic':a0_0x22f06c(0x1a7),'senior_aal':a0_0x22f06c(0x22c),'family':a0_0x22f06c(0x158),'single_comfort':a0_0x22f06c(0x176),'security':a0_0x22f06c(0x1d5)},ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0},IS_WIN=process[a0_0x22f06c(0x136)]==='win32',PERSISTENT_DIR=path[a0_0x22f06c(0x216)](__dirname,'.venv'),VENV_PATH=PERSISTENT_DIR,PYTHON_EXE=IS_WIN?path['join'](VENV_PATH,a0_0x22f06c(0x156),'python.exe'):path[a0_0x22f06c(0x216)](VENV_PATH,a0_0x22f06c(0x235),a0_0x22f06c(0x23f)),PIP_EXE=IS_WIN?path[a0_0x22f06c(0x216)](VENV_PATH,a0_0x22f06c(0x156),'pip.exe'):path[a0_0x22f06c(0x216)](VENV_PATH,a0_0x22f06c(0x235),a0_0x22f06c(0x1a9));let activeSequence=[],sequenceTimer=null;async function startSystem(_0x3d0a0a){const _0x2686be=a0_0x22f06c;_0x3d0a0a[_0x2686be(0x204)][_0x2686be(0x14a)](_0x2686be(0x210)),await initZombies(_0x3d0a0a);try{_0x3d0a0a[_0x2686be(0x1ae)]=await checkLicense(_0x3d0a0a['config']['licenseKey']);}catch(_0x40eb11){}if(!_0x3d0a0a[_0x2686be(0x1ff)][_0x2686be(0x175)]||_0x3d0a0a[_0x2686be(0x1ff)]['inactivityThresholdHours']<0.1)_0x3d0a0a[_0x2686be(0x1ff)][_0x2686be(0x175)]=0xc;await initHistory(_0x3d0a0a),await initSystemConfig(_0x3d0a0a);if(_0x3d0a0a[_0x2686be(0x1ff)][_0x2686be(0x17c)])try{_0x3d0a0a[_0x2686be(0x1b3)]=new GoogleGenerativeAI(_0x3d0a0a[_0x2686be(0x1ff)]['geminiApiKey']),_0x3d0a0a[_0x2686be(0x1e8)]=_0x3d0a0a['genAI'][_0x2686be(0x14b)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x2686be(0x20a)}}),_0x3d0a0a[_0x2686be(0x204)][_0x2686be(0x14a)](_0x2686be(0x229));}catch(_0x3864b0){_0x3d0a0a['log'][_0x2686be(0x1e4)](_0x2686be(0x181)+_0x3864b0[_0x2686be(0x132)]);}await createAllObjects(_0x3d0a0a),await loadSystemMode(_0x3d0a0a),await loadRawEventLog(_0x3d0a0a),await loadDailyDigests(_0x3d0a0a),_0x3d0a0a[_0x2686be(0x16d)](_0x2686be(0x1bb)),_0x3d0a0a[_0x2686be(0x16d)](LTM_DP_TRIGGER_DIGEST),_0x3d0a0a[_0x2686be(0x16d)](_0x2686be(0x220)),_0x3d0a0a[_0x2686be(0x16d)]('analysis.triggerBriefing'),_0x3d0a0a[_0x2686be(0x16d)](_0x2686be(0x1de)),_0x3d0a0a[_0x2686be(0x16d)](_0x2686be(0x21c)),_0x3d0a0a[_0x2686be(0x16d)]('analysis.training.triggerSecurity'),_0x3d0a0a[_0x2686be(0x16d)](_0x2686be(0x13e)),_0x3d0a0a[_0x2686be(0x16d)]('analysis.training.triggerEnergy'),_0x3d0a0a[_0x2686be(0x16d)](_0x2686be(0x18a)),_0x3d0a0a[_0x2686be(0x16d)](_0x2686be(0x242)),await initSensorSubscriptions(_0x3d0a0a),await initPresenceSubscriptions(_0x3d0a0a),await setupTelegramListener(_0x3d0a0a),setTimeout(()=>checkWifiPresence(_0x3d0a0a),0x1388);if(_0x3d0a0a['analysisTimer'])clearInterval(_0x3d0a0a[_0x2686be(0x1a3)]);const _0x41e2df=_0x3d0a0a['config'][_0x2686be(0x18d)]||0xf;_0x41e2df>0x0&&(_0x3d0a0a[_0x2686be(0x1a3)]=setInterval(()=>{runAutopilot(_0x3d0a0a);},_0x41e2df*0x3c*0x3e8)),setupLtmScheduler(_0x3d0a0a),setupModeResetScheduler(_0x3d0a0a),setupDriftAnalysisScheduler(_0x3d0a0a),setupBriefingScheduler(_0x3d0a0a),startPythonService(_0x3d0a0a),setTimeout(()=>{const _0x285463=_0x2686be;_0x3d0a0a[_0x285463(0x1f3)]&&(runPythonHealthCheck(_0x3d0a0a),triggerGaitAnalysis(_0x3d0a0a),triggerEnergyPrediction(_0x3d0a0a)),updateHealthVector(_0x3d0a0a);},0x1388);}async function runAutopilot(_0x1c196e){const _0x4ecac5=a0_0x22f06c;_0x1c196e[_0x4ecac5(0x204)]['debug'](_0x4ecac5(0x15a)),await runGeminiAnalysis(_0x1c196e),updateHealthVector(_0x1c196e),triggerGaitAnalysis(_0x1c196e),triggerEnergyPrediction(_0x1c196e);}async function triggerGaitAnalysis(_0x4734a0){const _0xa2b772=a0_0x22f06c;if(!_0x4734a0[_0xa2b772(0x1ae)])return;try{const _0x2a34f0=await _0x4734a0[_0xa2b772(0x19e)](_0xa2b772(0x155));_0x2a34f0&&_0x2a34f0[_0xa2b772(0x1c9)]&&sendToPython(_0x4734a0,_0xa2b772(0x1b5),{'sequences':JSON[_0xa2b772(0x1f2)](_0x2a34f0[_0xa2b772(0x1c9)])});}catch(_0x17eadf){}}async function triggerEnergyPrediction(_0x419c30){const _0x366dcb=a0_0x22f06c;if(!_0x419c30['isProVersion'])return;try{const _0x52f258=await getOutsideTemperatureNumeric(_0x419c30);if(_0x52f258===null)return;const _0x2deedc={},_0x579ba4=_0x419c30[_0x366dcb(0x1ff)][_0x366dcb(0x198)]||[];for(const _0x30ef78 of _0x579ba4){if(_0x30ef78[_0x366dcb(0x1ee)]==='temperature'&&_0x30ef78[_0x366dcb(0x1c1)]){const _0x5f21c1=_0x419c30[_0x366dcb(0x186)][_0x30ef78['id']];if(_0x5f21c1!==undefined)_0x2deedc[_0x30ef78[_0x366dcb(0x1c1)]]=_0x5f21c1;}}Object['keys'](_0x2deedc)[_0x366dcb(0x23c)]>0x0&&sendToPython(_0x419c30,_0x366dcb(0x172),{'current_temps':_0x2deedc,'t_out':_0x52f258});}catch(_0x1dda34){}}function updateHealthVector(_0x13a82c){const _0x4403b8=a0_0x22f06c;if(!_0x13a82c[_0x4403b8(0x1ea)]||_0x13a82c['rawEventLog']['length']===0x0)return;const _0x143451=new Array(0x60)[_0x4403b8(0x222)](0x0),_0x25e36b=new Date()['setHours'](0x0,0x0,0x0,0x0);_0x13a82c[_0x4403b8(0x1ea)][_0x4403b8(0x21d)](_0x50fc77=>{const _0x181b37=_0x4403b8,_0x1f97cb=new Date(_0x50fc77[_0x181b37(0x1f4)]);if(_0x1f97cb[_0x181b37(0x144)]()>=_0x25e36b){const _0x451273=_0x1f97cb['getHours'](),_0x36067d=_0x1f97cb[_0x181b37(0x1ad)](),_0xbbe1d8=_0x451273*0x4+Math['floor'](_0x36067d/0xf);if(_0xbbe1d8>=0x0&&_0xbbe1d8<0x60)_0x143451[_0xbbe1d8]++;}}),_0x13a82c[_0x4403b8(0x243)](_0x4403b8(0x200),{'val':JSON[_0x4403b8(0x1b0)](_0x143451),'ack':!![]});}async function scanForDevices(_0xbeebf9,_0x5e766c){const _0x5bea1b=a0_0x22f06c;_0xbeebf9[_0x5bea1b(0x204)][_0x5bea1b(0x14a)]('ðŸ”\x20Scanning\x20for\x20devices\x20(Smart\x20Strategy)...');const _0x180df4=[],_0x2cccf4=await _0xbeebf9[_0x5bea1b(0x1af)]('*'),_0x1da333={};try{const _0x3f48c5=await _0xbeebf9[_0x5bea1b(0x1af)](_0x5bea1b(0x159),_0x5bea1b(0x22b));for(const _0x2312ab in _0x3f48c5){const _0xf56071=_0x3f48c5[_0x2312ab],_0x2be849=(_0xf56071['common']&&typeof _0xf56071[_0x5bea1b(0x1c7)][_0x5bea1b(0x1d0)]===_0x5bea1b(0x142)?_0xf56071[_0x5bea1b(0x1c7)][_0x5bea1b(0x1d0)]['de']:_0xf56071[_0x5bea1b(0x1c7)][_0x5bea1b(0x1d0)])||_0xf56071[_0x5bea1b(0x1c7)][_0x5bea1b(0x1d0)];if(_0xf56071[_0x5bea1b(0x1c7)]&&_0xf56071[_0x5bea1b(0x1c7)][_0x5bea1b(0x225)])for(const _0x230753 of _0xf56071[_0x5bea1b(0x1c7)][_0x5bea1b(0x225)]){_0x1da333[_0x230753]=_0x2be849;}}}catch(_0x44bd7b){_0xbeebf9[_0x5bea1b(0x204)][_0x5bea1b(0x185)](_0x5bea1b(0x22d)+_0x44bd7b[_0x5bea1b(0x132)]);}let _0x7f5735=null,_0xb980e1={};if(_0x5e766c[_0x5bea1b(0x1c4)]&&_0x5e766c['selectedFunctionIds'][_0x5bea1b(0x23c)]>0x0){_0x7f5735=new Set();for(const _0x2d24f2 of _0x5e766c[_0x5bea1b(0x1c4)]){const _0x22ca8f=await _0xbeebf9[_0x5bea1b(0x205)](_0x2d24f2);if(_0x22ca8f&&_0x22ca8f[_0x5bea1b(0x1c7)]&&_0x22ca8f[_0x5bea1b(0x1c7)][_0x5bea1b(0x225)]){let _0x5dff10=null;const _0x382485=_0x2d24f2['toLowerCase']();if(_0x382485[_0x5bea1b(0x17d)]('light')||_0x382485[_0x5bea1b(0x17d)](_0x5bea1b(0x1e9)))_0x5dff10=_0x5bea1b(0x1cf);else{if(_0x382485[_0x5bea1b(0x17d)]('heating')||_0x382485[_0x5bea1b(0x17d)](_0x5bea1b(0x13c)))_0x5dff10='temperature';else{if(_0x382485['includes']('window')||_0x382485['includes']('fenster'))_0x5dff10='door';}}for(const _0x5274de of _0x22ca8f[_0x5bea1b(0x1c7)][_0x5bea1b(0x225)]){_0x7f5735['add'](_0x5274de);if(_0x5dff10)_0xb980e1[_0x5274de]=_0x5dff10;}}}}for(const _0xa5bb46 in _0x2cccf4){const _0x182e5c=_0x2cccf4[_0xa5bb46];if(_0x182e5c&&_0x182e5c['common']&&_0x182e5c[_0x5bea1b(0x1ee)]===_0x5bea1b(0x171)){if(_0x7f5735){let _0x5c351e=_0x7f5735['has'](_0xa5bb46);if(!_0x5c351e){const _0x5de0df=_0xa5bb46['split']('.'),_0xe0041a=_0x5de0df[_0x5bea1b(0x20e)](0x0,-0x1)[_0x5bea1b(0x216)]('.'),_0xda969d=_0x5de0df['slice'](0x0,-0x2)['join']('.');if(_0x7f5735[_0x5bea1b(0x19f)](_0xe0041a)){_0x5c351e=!![];if(_0xb980e1[_0xe0041a])_0xb980e1[_0xa5bb46]=_0xb980e1[_0xe0041a];}else{if(_0x7f5735['has'](_0xda969d)){_0x5c351e=!![];if(_0xb980e1[_0xda969d])_0xb980e1[_0xa5bb46]=_0xb980e1[_0xda969d];}}}if(!_0x5c351e)continue;}let _0x35bebd=(_0x182e5c['common'][_0x5bea1b(0x1d0)]&&typeof _0x182e5c[_0x5bea1b(0x1c7)][_0x5bea1b(0x1d0)]===_0x5bea1b(0x142)?_0x182e5c['common']['name']['de']:_0x182e5c['common'][_0x5bea1b(0x1d0)])||'';const _0x261bd8=(_0x182e5c[_0x5bea1b(0x1c7)][_0x5bea1b(0x1d1)]||'')[_0x5bea1b(0x214)](),_0x49ae87=_0x35bebd[_0x5bea1b(0x214)]();let _0xe32f02=_0xb980e1[_0xa5bb46]||null;if(!_0xe32f02){if(_0x5e766c[_0x5bea1b(0x196)]&&(_0x261bd8[_0x5bea1b(0x17d)]('motion')||_0x49ae87[_0x5bea1b(0x17d)](_0x5bea1b(0x1a1))||_0x261bd8[_0x5bea1b(0x17d)](_0x5bea1b(0x168))))_0xe32f02=_0x5bea1b(0x196);else{if(_0x5e766c[_0x5bea1b(0x1c2)]&&(_0x261bd8[_0x5bea1b(0x17d)](_0x5bea1b(0x183))||_0x261bd8['includes'](_0x5bea1b(0x14f))||_0x49ae87[_0x5bea1b(0x17d)](_0x5bea1b(0x1d6))||_0x49ae87[_0x5bea1b(0x17d)](_0x5bea1b(0x161))||_0x261bd8[_0x5bea1b(0x17d)]('contact')))_0xe32f02=_0x5bea1b(0x183);else{if(_0x5e766c[_0x5bea1b(0x162)]&&(_0x261bd8[_0x5bea1b(0x17d)](_0x5bea1b(0x1cf))||_0x261bd8[_0x5bea1b(0x17d)](_0x5bea1b(0x233))||_0x49ae87[_0x5bea1b(0x17d)](_0x5bea1b(0x1e9))||_0x261bd8['includes'](_0x5bea1b(0x1d9))))_0xe32f02=_0x5bea1b(0x1cf);else{if(_0x5e766c['temperature']&&(_0x261bd8[_0x5bea1b(0x17d)]('temperature')||_0x49ae87[_0x5bea1b(0x17d)](_0x5bea1b(0x160))||_0x261bd8[_0x5bea1b(0x17d)]('thermostat')))_0xe32f02=_0x5bea1b(0x23d);}}}}if(_0xe32f02){const _0x1b954c=[_0x5bea1b(0x157),_0x5bea1b(0x171),_0x5bea1b(0x194),'value','on',_0x5bea1b(0x133),'power','brightness',_0x5bea1b(0x1c0),_0x5bea1b(0x207),_0x5bea1b(0x23d),_0x5bea1b(0x1cb),_0x5bea1b(0x168)],_0x3efcbb=!_0x35bebd||_0x1b954c[_0x5bea1b(0x1be)](_0x53d69c=>_0x49ae87===_0x53d69c||_0x49ae87[_0x5bea1b(0x17d)](_0x53d69c));if(_0x3efcbb){const _0x28ecac=_0xa5bb46[_0x5bea1b(0x153)]('.'),_0x1181b5=_0x28ecac['slice'](0x0,-0x1)[_0x5bea1b(0x216)]('.'),_0x42d4e0=_0x2cccf4[_0x1181b5];if(_0x42d4e0&&_0x42d4e0[_0x5bea1b(0x1c7)]&&_0x42d4e0[_0x5bea1b(0x1c7)][_0x5bea1b(0x1d0)]){let _0x456c0d=(typeof _0x42d4e0['common'][_0x5bea1b(0x1d0)]===_0x5bea1b(0x142)?_0x42d4e0[_0x5bea1b(0x1c7)][_0x5bea1b(0x1d0)]['de']:_0x42d4e0[_0x5bea1b(0x1c7)]['name'])||'';if(!_0x456c0d||_0x456c0d[_0x5bea1b(0x214)]()[_0x5bea1b(0x17d)](_0x5bea1b(0x146))||_0x456c0d===_0x1181b5[_0x5bea1b(0x153)]('.')['pop']()){const _0x538f0d=_0x28ecac[_0x5bea1b(0x20e)](0x0,-0x2)['join']('.'),_0x5b682c=_0x2cccf4[_0x538f0d];_0x5b682c&&_0x5b682c[_0x5bea1b(0x1c7)]&&_0x5b682c[_0x5bea1b(0x1c7)][_0x5bea1b(0x1d0)]&&(_0x456c0d=(typeof _0x5b682c[_0x5bea1b(0x1c7)][_0x5bea1b(0x1d0)]==='object'?_0x5b682c[_0x5bea1b(0x1c7)]['name']['de']:_0x5b682c[_0x5bea1b(0x1c7)][_0x5bea1b(0x1d0)])||'');}_0x456c0d&&(_0x35bebd=_0x456c0d+'\x20('+(_0x35bebd||_0xa5bb46[_0x5bea1b(0x153)]('.')[_0x5bea1b(0x226)]())+')');}}let _0x40a93d=_0x1da333[_0xa5bb46];if(!_0x40a93d){const _0x52a388=_0xa5bb46[_0x5bea1b(0x153)]('.')[_0x5bea1b(0x20e)](0x0,-0x1)[_0x5bea1b(0x216)]('.');_0x40a93d=_0x1da333[_0x52a388];}if(!_0x40a93d){const _0x1a5c9d=_0xa5bb46[_0x5bea1b(0x153)]('.')[_0x5bea1b(0x20e)](0x0,-0x2)['join']('.');_0x40a93d=_0x1da333[_0x1a5c9d];}if(!_0x40a93d){const _0x332062=_0xa5bb46[_0x5bea1b(0x153)]('.');if(_0x332062[_0x5bea1b(0x23c)]>0x2)_0x40a93d=_0x332062[0x2];}_0x180df4[_0x5bea1b(0x239)]({'id':_0xa5bb46,'name':_0x35bebd||_0xa5bb46,'type':_0xe32f02,'location':_0x40a93d||'','_score':_0x7f5735?0x5a:0x32});}}}return _0xbeebf9[_0x5bea1b(0x204)][_0x5bea1b(0x14a)](_0x5bea1b(0x184)+_0x180df4[_0x5bea1b(0x23c)]+'\x20candidates.'),_0x180df4;}async function getWeatherContext(_0x551392){const _0x359a25=a0_0x22f06c;if(!_0x551392['config'][_0x359a25(0x219)]||!_0x551392[_0x359a25(0x1ff)][_0x359a25(0x1ec)])return _0x359a25(0x14d);try{const _0x2c8c0d=_0x551392[_0x359a25(0x1ff)][_0x359a25(0x1ec)];let _0x3ad8b9=await _0x551392[_0x359a25(0x238)](_0x2c8c0d+_0x359a25(0x223));if(!_0x3ad8b9)_0x3ad8b9=await _0x551392[_0x359a25(0x238)](_0x2c8c0d+'.forecast.current.temperature');let _0x591a16=await _0x551392[_0x359a25(0x238)](_0x2c8c0d+_0x359a25(0x1ed));if(!_0x591a16)_0x591a16=await _0x551392[_0x359a25(0x238)](_0x2c8c0d+_0x359a25(0x166));if(_0x3ad8b9&&_0x591a16)return _0x3ad8b9[_0x359a25(0x1c9)]+'Â°C,\x20'+_0x591a16[_0x359a25(0x1c9)];}catch(_0x49da7f){}return _0x359a25(0x169);}function a0_0x248d(){const _0x5bbae7=['3475577rdQmGY','presence','Keine\x20Wetterdaten\x20verfÃ¼gbar.','exports','N/A','getOverviewData','subscribeStates','âœ…\x20Fast-Boot:\x20Environment\x20healthy.\x20Skipping\x20installation.','0\x204\x20*\x20*\x20*','analysis.training.status','state','PREDICT_ENERGY','description','bind','inactivityThresholdHours','Fokus\x20auf\x20Komfort.','namespace','08:00','response','system.presenceWho','triggerDailyDigest','geminiApiKey','includes','python3\x20-m\x20venv\x20\x22','VACATION','filter','Gemini\x20Init\x20Error:\x20','16BluoHo','door','ðŸ”\x20Scan\x20finished.\x20Found\x20','warn','sensorLastValues','24VWbwNk','LTM.dailyDigests','instance','analysis.training.triggerComfort','getDate','\x20*\x20*\x20*','analysisInterval','TRAIN_SECURITY','endsWith','(((.+)+)+)+$','983380DJcHrP','TRAIN_ENERGY','No\x20instance','level','cogni-living','motion','ðŸ\x20Checking\x20Python\x20environment...','devices','BUILD_TOPOLOGY','rating','6lrxFOU','ðŸ›‹ï¸\x20Triggering\x20Comfort\x20Analysis\x20(Pattern\x20Mining)...','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','getStateAsync','has','dismissAutomation','bewegung','LTM.triggerDailyDigest','analysisTimer','LTM.driftAnalysis.lastCheck','LTM.driftAnalysis.baselineDrift','11drnyzm','Analysiere\x20ausgewogen.','\x22\x20-c\x20\x22import\x20tensorflow;\x20print(\x27libs_ok\x27)\x22','pip','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','dailyDigests','dependencyInstallInProgress','getMinutes','isProVersion','getForeignObjectsAsync','stringify','briefingJob','ready','genAI','OK:\x20','ANALYZE_GAIT','Permission\x20denied','ðŸ§ \x20Triggering\x20Security\x20Training...','values','3937340TYeHWl','trim','analysis.trigger','onUnload','text','some','ltmLtbWindowDays','status','location','doors','Adapter','selectedFunctionIds','apply','User\x20dismissed\x20automation\x20proposal.','common','GUEST','val','driftAnalysisTimer','setpoint','scheduleJob','ack','@google/generative-ai','light','name','role','getEnums','main','onMessage','PRIORITÃ„T:\x20Sicherheit.','tÃ¼r','NORMAL','isGracePeriodActive','level.dimmer','party','ltmStbWindowDays','Creating\x20new\x20VENV...','enum.functions.*','analysis.automation.triggerAction','from','\x22\x20install\x20-r\x20\x22',')\x20-\x20SAFE\x20BOOT','existsSync','analysis.training.triggerSecurity','error','onReady','simulateButler','ltmDriftCheckIntervalHours','geminiModel','licht','rawEventLog','55206zVkQXe','weatherInstance','.Current.WeatherText','type','getFullYear','briefingTime','apiKey','parse','pythonProcess','timestamp','generateContent','Briefing\x20Sched\x20Error:\x20','calendarInstance','version','modeResetJob','constructor','1wSVQji','Kalender\x20deaktiviert.','Kein\x20API\x20Key.','exitGraceTimer','config','analysis.health.todayVector','ltmJob','find','briefingEnabled','log','getForeignObjectAsync','replace','temp','analysis.automation.targetValue','ðŸŒ…\x20Morning\x20Briefing:\x0a','application/json','ðŸ›‘\x20PERMISSION\x20ERROR:\x20Der\x20Adapter\x20darf\x20das\x20VENV\x20nicht\x20anlegen.','targetId','analysis.automation.patternDetected','slice','LTM.driftAnalysis','ðŸš€\x20Starting\x20NUUKANNI\x20Logic\x20(v0.12.3)...','sendTo','.\x20(Is\x20\x27python3-venv\x27\x20installed?\x20\x27sudo\x20apt\x20install\x20python3-venv\x27)','0\x203\x20*\x20*\x20*','toLowerCase','lastAlertState','join','TRAIN_HEALTH','Delete\x20failed:\x20','useWeather','stateChange','âš ï¸\x20Python\x20VENV\x20or\x20PIP\x20missing.\x20Installing...','analysis.automation.autoApply','forEach','getCalendarNames','LTM.baselineStatus','system.mode','cancel','fill','.Current.Temperature','Err:\x20','members','pop','5180KXtUfV','search','Gemini\x20AI\x20initialized.','analysisHistory','enum','PRIORITÃ„T:\x20Gesundheit/AAL.','Could\x20not\x20load\x20rooms:\x20','\x0aSTB:\x20','driftDetails','analysis.automation.targetId','23902723filSKX','Missing\x20data','switch','command','bin','Sec-Training\x20started...','analysis.training.triggerEnergy','getForeignStateAsync','push','presenceDevices','vacation','length','temperature','769094BavJUo','python','12zPGtpB','Installing\x20pip\x20packages...\x20(Caching\x20enabled)','analysis.training.triggerTopology','setStateAsync','message','off','callback','âœ…\x20INSTALL\x20SUCCESS.','platform','exitTimer','systemUUID','â™»ï¸\x20Found\x20broken\x20VENV\x20(no\x20pip).\x20Deleting\x20and\x20recreating...','SIMULATION:\x20Test-Vorschlag\x20fÃ¼r\x20','onStateChange','heizung','KI-Modell\x20nicht\x20initialisiert','analysis.training.triggerHealth','child_process','unknown','isPresent','object','path','getTime','unload','channel','PARTY','eventHistory','setState','info','getGenerativeModel','currentSystemMode','Wetterdaten\x20deaktiviert.','now','window','toString','communicate.request','analysis.automation.description','split','@iobroker/adapter-core','LTM.trainingData.sequences','Scripts','occupancy','Fokus\x20auf\x20Familienroutinen.','enum.rooms.*','ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...','python_service','getHours','Training\x20Error:\x20','requirements.txt','LTM\x20Sched\x20Error:\x20','temperatur','fenster','lights','guest','testContext','baselineDrift','.forecast.current.state'];a0_0x248d=function(){return _0x5bbae7;};return a0_0x248d();}async function getCalendarContext(_0x12e816){const _0x48455c=a0_0x22f06c;if(!_0x12e816['config']['useCalendar']||!_0x12e816[_0x48455c(0x1ff)][_0x48455c(0x1f7)])return _0x48455c(0x1fc);return'Keine\x20Termine.';}async function getCalendarNames(_0x3faec9,_0x48bdb9){return[];}async function saveFeedback(_0xcf85e0,_0x5715a8){const _0x4bfb75=a0_0x22f06c;_0xcf85e0[_0x4bfb75(0x204)]['info']('ðŸ“\x20Feedback\x20received:\x20'+_0x5715a8[_0x4bfb75(0x19a)]);}async function sendMorningBriefing(_0x1ede8f){const _0x184b9a=a0_0x22f06c;if(!_0x1ede8f[_0x184b9a(0x1e8)])return;try{const _0x208ace=_0x184b9a(0x19d),_0x5aa6fb=await _0x1ede8f[_0x184b9a(0x1e8)][_0x184b9a(0x1f5)](_0x208ace),_0x9e8cd1=_0x5aa6fb[_0x184b9a(0x179)][_0x184b9a(0x1bd)]();sendNotification(_0x1ede8f,_0x184b9a(0x209)+_0x9e8cd1);}catch(_0x25b9f5){_0x1ede8f['log'][_0x184b9a(0x1e4)]('Briefing\x20Error:\x20'+_0x25b9f5['message']);}}function checkAndInstall(_0x35c175){const _0x56c265=a0_0x22f06c;if(fs[_0x56c265(0x1e2)](PYTHON_EXE)&&fs[_0x56c265(0x1e2)](PIP_EXE))try{return _0x35c175[_0x56c265(0x204)][_0x56c265(0x14a)](_0x56c265(0x197)),execSync('\x22'+PYTHON_EXE+_0x56c265(0x1a8),{'timeout':0x3a98}),_0x35c175[_0x56c265(0x204)][_0x56c265(0x14a)](_0x56c265(0x16e)),!![];}catch(_0x3ef302){_0x35c175['log']['warn']('âš ï¸\x20Fast-Boot\x20failed\x20(Broken\x20VENV\x20or\x20Missing\x20Libs).\x20Triggering\x20Self-Healing...');}else _0x35c175[_0x56c265(0x204)][_0x56c265(0x185)](_0x56c265(0x21b));return installPythonDependencies(_0x35c175),![];}function a0_0x21c0(_0x5ed49a,_0x3561f2){const _0x37997d=a0_0x248d();return a0_0x21c0=function(_0x4916af,_0x2e154e){_0x4916af=_0x4916af-0x132;let _0x248d7a=_0x37997d[_0x4916af];return _0x248d7a;},a0_0x21c0(_0x5ed49a,_0x3561f2);}function installPythonDependencies(_0x4f75a0){const _0x3d2d93=a0_0x22f06c;if(_0x4f75a0['dependencyInstallInProgress'])return;_0x4f75a0[_0x3d2d93(0x1ac)]=!![];const _0x559cd9=path[_0x3d2d93(0x216)](__dirname,_0x3d2d93(0x15b),_0x3d2d93(0x15e));stopPythonService(_0x4f75a0);if(fs[_0x3d2d93(0x1e2)](VENV_PATH)&&!fs[_0x3d2d93(0x1e2)](PIP_EXE)){_0x4f75a0[_0x3d2d93(0x204)][_0x3d2d93(0x185)](_0x3d2d93(0x139));try{fs['rmSync'](VENV_PATH,{'recursive':!![],'force':!![]});}catch(_0x376cca){_0x4f75a0[_0x3d2d93(0x204)][_0x3d2d93(0x1e4)](_0x3d2d93(0x218)+_0x376cca[_0x3d2d93(0x132)]);}}if(!fs[_0x3d2d93(0x1e2)](VENV_PATH))try{_0x4f75a0['log'][_0x3d2d93(0x14a)](_0x3d2d93(0x1dc)),execSync(_0x3d2d93(0x17e)+VENV_PATH+'\x22');}catch(_0xa2a971){_0x4f75a0[_0x3d2d93(0x1ac)]=![];_0xa2a971[_0x3d2d93(0x132)][_0x3d2d93(0x17d)]('EACCES')||_0xa2a971[_0x3d2d93(0x132)][_0x3d2d93(0x17d)](_0x3d2d93(0x1b6))?(_0x4f75a0[_0x3d2d93(0x204)]['error'](_0x3d2d93(0x20b)),_0x4f75a0['log'][_0x3d2d93(0x1e4)]('ðŸ‘‰\x20LÃ–SUNG\x20(SSH):\x20sudo\x20chown\x20-R\x20iobroker:iobroker\x20'+path[_0x3d2d93(0x216)](__dirname))):_0x4f75a0[_0x3d2d93(0x204)][_0x3d2d93(0x1e4)]('âŒ\x20VENV\x20CREATION\x20FAILED:\x20'+_0xa2a971[_0x3d2d93(0x132)]+_0x3d2d93(0x212));return;}installRequirementsInVenv(_0x4f75a0,_0x559cd9);}function installRequirementsInVenv(_0x3fd316,_0x2ad208){const _0x4d3402=a0_0x22f06c;_0x3fd316[_0x4d3402(0x204)][_0x4d3402(0x14a)](_0x4d3402(0x241));const _0x81d8dd='\x22'+PIP_EXE+_0x4d3402(0x1e0)+_0x2ad208+'\x22';exec(_0x81d8dd,{'timeout':0x1b7740},(_0x196a0e,_0x1d1466,_0x167ceb)=>{const _0x164f9b=_0x4d3402;_0x3fd316[_0x164f9b(0x1ac)]=![];if(_0x196a0e){_0x3fd316[_0x164f9b(0x204)][_0x164f9b(0x1e4)]('âŒ\x20INSTALL\x20FAILED:\x20'+(_0x167ceb||_0x196a0e[_0x164f9b(0x132)]));try{fs['rmSync'](VENV_PATH,{'recursive':!![],'force':!![]});}catch(_0x359f97){}}else _0x3fd316[_0x164f9b(0x204)][_0x164f9b(0x14a)](_0x164f9b(0x135)),startSystem(_0x3fd316);});}function setupLtmScheduler(_0x33a656){const _0x17e699=a0_0x22f06c;try{if(_0x33a656[_0x17e699(0x201)])_0x33a656[_0x17e699(0x201)][_0x17e699(0x221)]();if(!_0x33a656[_0x17e699(0x1ae)])return;_0x33a656['ltmJob']=schedule[_0x17e699(0x1cc)](LTM_SCHEDULE,()=>createDailyDigest(_0x33a656));}catch(_0x198641){_0x33a656[_0x17e699(0x204)][_0x17e699(0x1e4)](_0x17e699(0x15f)+_0x198641[_0x17e699(0x132)]);}}function setupModeResetScheduler(_0xdd4402){const _0x18085c=a0_0x22f06c;try{if(_0xdd4402[_0x18085c(0x1f9)])_0xdd4402[_0x18085c(0x1f9)][_0x18085c(0x221)]();_0xdd4402[_0x18085c(0x1f9)]=schedule[_0x18085c(0x1cc)](MODE_RESET_SCHEDULE,async()=>{const _0x5cdbe7=_0x18085c;await loadSystemMode(_0xdd4402),AUTO_RESET_MODES['includes'](_0xdd4402[_0x5cdbe7(0x14c)])&&await _0xdd4402[_0x5cdbe7(0x243)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x5cdbe7(0x1d7)],'ack':![]});});}catch(_0x3ebc27){_0xdd4402['log']['error']('Reset\x20Sched\x20Error:\x20'+_0x3ebc27[_0x18085c(0x132)]);}}function setupDriftAnalysisScheduler(_0x36aec9){const _0x3d3e10=a0_0x22f06c;try{if(_0x36aec9[_0x3d3e10(0x1ca)])clearInterval(_0x36aec9['driftAnalysisTimer']);if(!_0x36aec9[_0x3d3e10(0x1ae)])return;_0x36aec9['driftAnalysisTimer']=setInterval(()=>runBaselineDriftAnalysis(_0x36aec9),(_0x36aec9[_0x3d3e10(0x1ff)][_0x3d3e10(0x1e7)]||0x18)*0x36ee80),setTimeout(()=>runBaselineDriftAnalysis(_0x36aec9),0x1388);}catch(_0x53cb74){_0x36aec9[_0x3d3e10(0x204)][_0x3d3e10(0x1e4)]('Drift\x20Sched\x20Error:\x20'+_0x53cb74[_0x3d3e10(0x132)]);}}function setupBriefingScheduler(_0x380500){const _0x2ce26c=a0_0x22f06c;try{if(_0x380500[_0x2ce26c(0x1b1)])_0x380500['briefingJob'][_0x2ce26c(0x221)]();if(!_0x380500[_0x2ce26c(0x1ff)][_0x2ce26c(0x203)])return;const _0x3aa229=(_0x380500[_0x2ce26c(0x1ff)][_0x2ce26c(0x1f0)]||_0x2ce26c(0x178))[_0x2ce26c(0x153)](':'),_0x225076=parseInt(_0x3aa229[0x0])||0x8,_0x41560e=parseInt(_0x3aa229[0x1])||0x0,_0x5ae68d=_0x41560e+'\x20'+_0x225076+_0x2ce26c(0x18c);_0x380500['briefingJob']=schedule[_0x2ce26c(0x1cc)](_0x5ae68d,()=>{sendMorningBriefing(_0x380500);});}catch(_0x563a96){_0x380500[_0x2ce26c(0x204)][_0x2ce26c(0x1e4)](_0x2ce26c(0x1f6)+_0x563a96['message']);}}async function runBaselineDriftAnalysis(_0x1ba8dc){const _0x55fc04=a0_0x22f06c;if(!_0x1ba8dc['isProVersion']||!_0x1ba8dc[_0x55fc04(0x1e8)])return;const _0x408d2c=_0x1ba8dc[_0x55fc04(0x1ff)]['ltmStbWindowDays']||0xe;if(_0x1ba8dc[_0x55fc04(0x1ab)][_0x55fc04(0x23c)]<_0x408d2c+0x7){await _0x1ba8dc[_0x55fc04(0x243)](LTM_DP_DRIFT_STATUS,{'val':'N/A\x20(Learning)','ack':!![]});return;}const _0x31162d=_0x1ba8dc[_0x55fc04(0x1ab)][_0x55fc04(0x20e)](-_0x408d2c),_0x4a6be2=_0x1ba8dc['dailyDigests'][_0x55fc04(0x20e)](0x0,_0x1ba8dc[_0x55fc04(0x1ab)][_0x55fc04(0x23c)]-_0x408d2c),_0x2730be=_0x55fc04(0x1aa)+JSON['stringify'](_0x4a6be2)+_0x55fc04(0x22e)+JSON[_0x55fc04(0x1b0)](_0x31162d);try{const _0x28bc0b=await _0x1ba8dc[_0x55fc04(0x1e8)][_0x55fc04(0x1f5)](_0x2730be),_0x32b0ab=JSON[_0x55fc04(0x1f2)](_0x28bc0b[_0x55fc04(0x179)]['text']()[_0x55fc04(0x206)](/```json|```/g,'')[_0x55fc04(0x1ba)]());_0x32b0ab[_0x55fc04(0x165)]&&(await _0x1ba8dc[_0x55fc04(0x243)](LTM_DP_DRIFT_STATUS,{'val':_0x32b0ab[_0x55fc04(0x165)],'ack':!![]}),await _0x1ba8dc[_0x55fc04(0x243)](LTM_DP_DRIFT_DETAILS,{'val':_0x32b0ab[_0x55fc04(0x22f)],'ack':!![]}),await _0x1ba8dc['setStateAsync'](LTM_DP_DRIFT_LAST_CHECK,{'val':Date[_0x55fc04(0x14e)](),'ack':!![]}));}catch(_0x46f404){}}class CogniLiving extends utils[a0_0x22f06c(0x1c3)]{constructor(_0x4bc90e){const _0x2131a0=a0_0x22f06c;super({..._0x4bc90e,'name':_0x2131a0(0x195)}),this[_0x2131a0(0x148)]=[],this['analysisHistory']=[],this[_0x2131a0(0x1ea)]=[],this[_0x2131a0(0x1ab)]=[],this[_0x2131a0(0x186)]={},this['systemConfig']={'latitude':0x0,'longitude':0x0,'city':''},this[_0x2131a0(0x141)]=!![],this[_0x2131a0(0x137)]=null,this['exitGraceTimer']=null,this[_0x2131a0(0x1d8)]=![],this['genAI']=null,this[_0x2131a0(0x1e8)]=null,this['currentSystemMode']=SYSTEM_MODES[_0x2131a0(0x1d7)],this['isProVersion']=![],this[_0x2131a0(0x215)]=![],this[_0x2131a0(0x138)]=_0x2131a0(0x140),this[_0x2131a0(0x1a3)]=null,this[_0x2131a0(0x201)]=null,this[_0x2131a0(0x1f9)]=null,this[_0x2131a0(0x1ca)]=null,this[_0x2131a0(0x1b1)]=null,this[_0x2131a0(0x1f3)]=null,this[_0x2131a0(0x1ac)]=![],this['on'](_0x2131a0(0x1b2),this[_0x2131a0(0x1e5)][_0x2131a0(0x174)](this)),this['on'](_0x2131a0(0x21a),this[_0x2131a0(0x13b)][_0x2131a0(0x174)](this)),this['on'](_0x2131a0(0x145),this[_0x2131a0(0x1bc)][_0x2131a0(0x174)](this)),this['on']('message',this[_0x2131a0(0x1d4)][_0x2131a0(0x174)](this));}async['onReady'](){const _0x4c959c=a0_0x22f06c;this[_0x4c959c(0x204)]['info']('cogni-living\x20adapter\x20starting\x20(v'+this[_0x4c959c(0x1f8)]+_0x4c959c(0x1e1));if(!checkAndInstall(this))return;await startSystem(this);}['onUnload'](_0x97a641){const _0x36d260=a0_0x22f06c;if(this['analysisTimer'])clearInterval(this[_0x36d260(0x1a3)]);if(this[_0x36d260(0x1ca)])clearInterval(this[_0x36d260(0x1ca)]);if(this[_0x36d260(0x201)])this[_0x36d260(0x201)][_0x36d260(0x221)]();if(this[_0x36d260(0x1f9)])this['modeResetJob'][_0x36d260(0x221)]();if(this[_0x36d260(0x1b1)])this['briefingJob'][_0x36d260(0x221)]();if(this[_0x36d260(0x137)])clearTimeout(this[_0x36d260(0x137)]);if(this[_0x36d260(0x1fe)])clearTimeout(this[_0x36d260(0x1fe)]);stopPythonService(this),_0x97a641();}async[a0_0x22f06c(0x13b)](_0x4652af,_0x4f4724){const _0x18bef5=a0_0x22f06c;if(!_0x4f4724||this[_0x18bef5(0x1ac)])return;if(_0x4652af[_0x18bef5(0x17d)]('telegram')&&_0x4652af[_0x18bef5(0x18f)](_0x18bef5(0x151))&&_0x4f4724['val']){await handleTelegramResponse(this,_0x4f4724[_0x18bef5(0x1c9)]);return;}if(_0x4652af===this[_0x18bef5(0x177)]+'.'+SYSTEM_DP_MODE){if(_0x4f4724[_0x18bef5(0x1c9)]&&Object[_0x18bef5(0x1b8)](SYSTEM_MODES)['includes'](_0x4f4724[_0x18bef5(0x1c9)])){this[_0x18bef5(0x14c)]=_0x4f4724['val'];if(_0x4f4724[_0x18bef5(0x1c9)]===SYSTEM_MODES[_0x18bef5(0x17f)])await setPresence(this,![]);else await setPresence(this,!![]);}if(!_0x4f4724[_0x18bef5(0x1cd)])this[_0x18bef5(0x149)](_0x4652af,{'val':this[_0x18bef5(0x14c)],'ack':!![]});return;}if(!_0x4f4724[_0x18bef5(0x1cd)]){_0x4652af['includes']('analysis.trigger')&&_0x4f4724[_0x18bef5(0x1c9)]&&(this[_0x18bef5(0x149)](_0x4652af,{'val':![],'ack':!![]}),runGeminiAnalysis(this));if(_0x4652af[_0x18bef5(0x17d)](_0x18bef5(0x17b))&&_0x4f4724[_0x18bef5(0x1c9)]){this[_0x18bef5(0x149)](_0x4652af,{'val':![],'ack':!![]});if(this[_0x18bef5(0x1ae)])createDailyDigest(this);}_0x4652af[_0x18bef5(0x17d)]('triggerBriefing')&&_0x4f4724[_0x18bef5(0x1c9)]&&(this[_0x18bef5(0x149)](_0x4652af,{'val':![],'ack':!![]}),sendMorningBriefing(this));_0x4652af[_0x18bef5(0x17d)]('automation.triggerAction')&&_0x4f4724[_0x18bef5(0x1c9)]&&(this[_0x18bef5(0x149)](_0x4652af,{'val':![],'ack':!![]}),executeAutomationAction(this));if(_0x4652af[_0x18bef5(0x17d)](_0x18bef5(0x1e3))&&_0x4f4724[_0x18bef5(0x1c9)]){this['setState'](_0x4652af,{'val':![],'ack':!![]});if(this[_0x18bef5(0x1ae)])try{const _0x22fb5b=await this[_0x18bef5(0x19e)]('LTM.trainingData.sequences');if(_0x22fb5b&&_0x22fb5b[_0x18bef5(0x1c9)]){const _0x175b5c=JSON['parse'](_0x22fb5b[_0x18bef5(0x1c9)]);this['log'][_0x18bef5(0x14a)](_0x18bef5(0x1b7)),this[_0x18bef5(0x243)](_0x18bef5(0x170),{'val':_0x18bef5(0x236),'ack':!![]}),sendToPython(this,_0x18bef5(0x18e),{'sequences':_0x175b5c});}}catch(_0x41ab34){this['log']['error'](_0x18bef5(0x15d)+_0x41ab34['message']);}}if(_0x4652af['includes']('analysis.training.triggerHealth')&&_0x4f4724[_0x18bef5(0x1c9)]){this[_0x18bef5(0x149)](_0x4652af,{'val':![],'ack':!![]});if(this[_0x18bef5(0x1ae)])try{const _0xe9668e=await this[_0x18bef5(0x19e)](LTM_DP_DAILY_DIGESTS);if(_0xe9668e&&_0xe9668e[_0x18bef5(0x1c9)])sendToPython(this,_0x18bef5(0x217),{'digests':JSON['parse'](_0xe9668e['val'])});}catch(_0x296e42){}}if(_0x4652af['includes'](_0x18bef5(0x237))&&_0x4f4724['val']){this[_0x18bef5(0x149)](_0x4652af,{'val':![],'ack':!![]});if(this[_0x18bef5(0x1ae)])try{const _0xeebd19=await this[_0x18bef5(0x19e)]('LTM.trainingData.thermodynamics');if(_0xeebd19&&_0xeebd19['val'])sendToPython(this,_0x18bef5(0x192),{'points':JSON['parse'](_0xeebd19[_0x18bef5(0x1c9)])});}catch(_0x4a46e6){}}if(_0x4652af[_0x18bef5(0x17d)](_0x18bef5(0x18a))&&_0x4f4724['val']){this[_0x18bef5(0x149)](_0x4652af,{'val':![],'ack':!![]});if(this[_0x18bef5(0x1ae)])try{const _0x32196a=await this[_0x18bef5(0x19e)](LTM_DP_RAW_LOG);_0x32196a&&_0x32196a[_0x18bef5(0x1c9)]&&(this[_0x18bef5(0x204)][_0x18bef5(0x14a)](_0x18bef5(0x19c)),sendToPython(this,'TRAIN_COMFORT',{'events':JSON[_0x18bef5(0x1f2)](_0x32196a[_0x18bef5(0x1c9)])}));}catch(_0x28eab1){}}if(_0x4652af['includes'](_0x18bef5(0x242))&&_0x4f4724[_0x18bef5(0x1c9)]){this[_0x18bef5(0x149)](_0x4652af,{'val':![],'ack':!![]});if(this[_0x18bef5(0x1ae)])try{const _0x3adfa4=await this[_0x18bef5(0x19e)](_0x18bef5(0x155));if(_0x3adfa4&&_0x3adfa4[_0x18bef5(0x1c9)]){const _0x31542e=JSON[_0x18bef5(0x1f2)](_0x3adfa4[_0x18bef5(0x1c9)]);this[_0x18bef5(0x204)]['info']('ðŸ•¸ï¸\x20Building\x20Topology\x20Matrix...'),sendToPython(this,_0x18bef5(0x199),{'sequences':_0x31542e});}}catch(_0x39c48b){this[_0x18bef5(0x204)][_0x18bef5(0x1e4)]('Topology\x20Error:\x20'+_0x39c48b[_0x18bef5(0x132)]);}}return;}if(this['config'][_0x18bef5(0x23a)]&&this[_0x18bef5(0x1ff)][_0x18bef5(0x23a)][_0x18bef5(0x17d)](_0x4652af)){await checkWifiPresence(this);return;}const _0x52892b=(this[_0x18bef5(0x1ff)]['devices']||[])[_0x18bef5(0x202)](_0x2fd65f=>_0x2fd65f['id']===_0x4652af);if(_0x52892b)processSensorEvent(this,_0x4652af,_0x4f4724,_0x52892b);}async[a0_0x22f06c(0x1d4)](_0x48f8a0){const _0x5b81c7=a0_0x22f06c;if(typeof _0x48f8a0===_0x5b81c7(0x142)&&_0x48f8a0[_0x5b81c7(0x132)]){if(_0x48f8a0[_0x5b81c7(0x234)]==='testApiKey'){const _0x8f1cb9=_0x48f8a0['message'][_0x5b81c7(0x1f1)]||this[_0x5b81c7(0x1ff)][_0x5b81c7(0x17c)];if(!_0x8f1cb9)return this[_0x5b81c7(0x211)](_0x48f8a0[_0x5b81c7(0x1df)],_0x48f8a0[_0x5b81c7(0x234)],{'success':![],'message':_0x5b81c7(0x1fd)},_0x48f8a0['callback']);try{const _0xa242ab=new GoogleGenerativeAI(_0x8f1cb9),_0x351016=_0xa242ab[_0x5b81c7(0x14b)]({'model':GEMINI_MODEL}),_0x33128d=await _0x351016[_0x5b81c7(0x1f5)]('Hi');this['sendTo'](_0x48f8a0[_0x5b81c7(0x1df)],_0x48f8a0[_0x5b81c7(0x234)],{'success':!![],'message':_0x5b81c7(0x1b4)+_0x33128d[_0x5b81c7(0x179)][_0x5b81c7(0x1bd)]()},_0x48f8a0[_0x5b81c7(0x134)]);}catch(_0x3642e7){this[_0x5b81c7(0x211)](_0x48f8a0[_0x5b81c7(0x1df)],_0x48f8a0['command'],{'success':![],'message':_0x5b81c7(0x224)+_0x3642e7[_0x5b81c7(0x132)]},_0x48f8a0['callback']);}}else{if(_0x48f8a0[_0x5b81c7(0x234)]===_0x5b81c7(0x164)){const _0x289104=await getWeatherContext(this),_0x6c6973=await getCalendarContext(this);this[_0x5b81c7(0x211)](_0x48f8a0[_0x5b81c7(0x1df)],_0x48f8a0[_0x5b81c7(0x234)],{'success':!![],'weather':_0x289104,'calendar':_0x6c6973},_0x48f8a0[_0x5b81c7(0x134)]);}else{if(_0x48f8a0[_0x5b81c7(0x234)]==='getLtmData'){if(!this[_0x5b81c7(0x1ae)])return this[_0x5b81c7(0x211)](_0x48f8a0['from'],_0x48f8a0[_0x5b81c7(0x234)],{'success':![],'isPro':![]},_0x48f8a0['callback']);let _0x2d8526={'status':_0x5b81c7(0x16b)};try{const _0x1db3ca=await this[_0x5b81c7(0x19e)](LTM_DP_DRIFT_STATUS);_0x2d8526[_0x5b81c7(0x1c0)]=_0x1db3ca?_0x1db3ca[_0x5b81c7(0x1c9)]:_0x5b81c7(0x16b);}catch(_0x3c4e08){}this[_0x5b81c7(0x211)](_0x48f8a0[_0x5b81c7(0x1df)],_0x48f8a0[_0x5b81c7(0x234)],{'success':!![],'isPro':!![],'dailyDigests':this[_0x5b81c7(0x1ab)],'driftAnalysis':_0x2d8526,'analysisHistory':this[_0x5b81c7(0x22a)]},_0x48f8a0[_0x5b81c7(0x134)]);}else{if(_0x48f8a0['command']===_0x5b81c7(0x16c)){const _0x1eb496=this[_0x5b81c7(0x1ab)][_0x5b81c7(0x23c)],_0x4cbac5=new Date(),_0x50995d=new Date(_0x4cbac5[_0x5b81c7(0x1ef)](),_0x4cbac5['getMonth'](),_0x4cbac5[_0x5b81c7(0x18b)]())[_0x5b81c7(0x144)](),_0x953bd2=this[_0x5b81c7(0x1ea)][_0x5b81c7(0x180)](_0x4244e1=>new Date(_0x4244e1[_0x5b81c7(0x1f4)])[_0x5b81c7(0x144)]()>_0x50995d)['length'],_0x5b91a5=new Array(0x18)[_0x5b81c7(0x222)](0x0);this['rawEventLog']['forEach'](_0x1ee0d4=>{const _0x187ccc=_0x5b81c7,_0x400d75=new Date(_0x1ee0d4['timestamp']);if(_0x400d75[_0x187ccc(0x144)]()>_0x50995d)_0x5b91a5[_0x400d75[_0x187ccc(0x15c)]()]++;});let _0xf60870={'status':_0x5b81c7(0x16b)};try{const _0x4e75ac=await this[_0x5b81c7(0x19e)](LTM_DP_DRIFT_STATUS);_0xf60870['status']=_0x4e75ac?_0x4e75ac[_0x5b81c7(0x1c9)]:_0x5b81c7(0x16b);}catch(_0x2b0223){}let _0x736d50='';try{const _0x1a64ed=await this[_0x5b81c7(0x19e)](_0x5b81c7(0x17a));_0x736d50=_0x1a64ed?_0x1a64ed['val']:'';}catch(_0x283254){}let _0x5c8e09=null;!this[_0x5b81c7(0x1e8)]&&(_0x5c8e09=this[_0x5b81c7(0x1ff)][_0x5b81c7(0x17c)]?_0x5b81c7(0x13d):'Kein\x20API\x20Key!');let _0x17324d={'detected':![],'description':'','targetId':'','targetValue':'','autoApply':![]};try{const _0x47bce4=await this[_0x5b81c7(0x19e)](_0x5b81c7(0x20d));if(_0x47bce4&&_0x47bce4['val']){_0x17324d['detected']=!![];const _0x339af4=await this[_0x5b81c7(0x19e)](_0x5b81c7(0x152));_0x17324d[_0x5b81c7(0x173)]=_0x339af4?_0x339af4['val']:'';const _0x25f074=await this[_0x5b81c7(0x19e)](_0x5b81c7(0x230));_0x17324d[_0x5b81c7(0x20c)]=_0x25f074?_0x25f074[_0x5b81c7(0x1c9)]:'';const _0x5ce71e=await this[_0x5b81c7(0x19e)](_0x5b81c7(0x208));_0x17324d['targetValue']=_0x5ce71e?_0x5ce71e['val']:'';}const _0x189778=await this['getStateAsync'](_0x5b81c7(0x21c));_0x17324d['autoApply']=_0x189778?!!_0x189778[_0x5b81c7(0x1c9)]:![];}catch(_0x276e4d){}this[_0x5b81c7(0x211)](_0x48f8a0['from'],_0x48f8a0[_0x5b81c7(0x234)],{'success':!![],'eventHistory':this['eventHistory'][_0x5b81c7(0x20e)](0x0,0xf),'stats':{'digestCount':_0x1eb496,'eventCountToday':_0x953bd2,'hourlyActivity':_0x5b91a5,'driftStatus':_0xf60870[_0x5b81c7(0x1c0)],'isPresent':this[_0x5b81c7(0x141)],'presenceWho':_0x736d50,'minDays':this[_0x5b81c7(0x1ff)]['minDaysForBaseline']||0x7,'stbDays':this[_0x5b81c7(0x1ff)][_0x5b81c7(0x1db)]||0xe,'ltbDays':this[_0x5b81c7(0x1ff)][_0x5b81c7(0x1bf)]||0x3c,'systemError':_0x5c8e09},'automation':_0x17324d},_0x48f8a0[_0x5b81c7(0x134)]);}else{if(_0x48f8a0[_0x5b81c7(0x234)]==='scanDevices')try{const _0x4b79be=await scanForDevices(this,_0x48f8a0[_0x5b81c7(0x132)]||{});this['sendTo'](_0x48f8a0[_0x5b81c7(0x1df)],_0x48f8a0[_0x5b81c7(0x234)],{'success':!![],'devices':_0x4b79be},_0x48f8a0[_0x5b81c7(0x134)]);}catch(_0x5b9209){this[_0x5b81c7(0x211)](_0x48f8a0[_0x5b81c7(0x1df)],_0x48f8a0[_0x5b81c7(0x234)],{'success':![],'error':_0x5b9209[_0x5b81c7(0x132)]},_0x48f8a0[_0x5b81c7(0x134)]);}else{if(_0x48f8a0[_0x5b81c7(0x234)]===_0x5b81c7(0x1d2)){const _0x11ee00=await this[_0x5b81c7(0x1af)](_0x5b81c7(0x1dd),_0x5b81c7(0x22b)),_0x3fb06b=[];if(_0x11ee00)for(const _0x1ad823 in _0x11ee00){const _0x570c63=_0x11ee00[_0x1ad823],_0xa1c409=(_0x570c63[_0x5b81c7(0x1c7)]&&typeof _0x570c63['common'][_0x5b81c7(0x1d0)]==='object'?_0x570c63[_0x5b81c7(0x1c7)][_0x5b81c7(0x1d0)]['de']:_0x570c63[_0x5b81c7(0x1c7)]['name'])||_0x570c63[_0x5b81c7(0x1c7)]['name'];_0x3fb06b[_0x5b81c7(0x239)]({'id':_0x1ad823,'name':_0xa1c409});}const _0x4776de=await this['getForeignObjectsAsync'](_0x5b81c7(0x159),_0x5b81c7(0x22b)),_0x1430da=[];if(_0x4776de)for(const _0x355868 in _0x4776de){const _0x5318ec=_0x4776de[_0x355868],_0x5a15ec=(_0x5318ec['common']&&typeof _0x5318ec['common']['name']===_0x5b81c7(0x142)?_0x5318ec[_0x5b81c7(0x1c7)][_0x5b81c7(0x1d0)]['de']:_0x5318ec[_0x5b81c7(0x1c7)][_0x5b81c7(0x1d0)])||_0x355868[_0x5b81c7(0x153)]('.')['pop']();_0x1430da['push'](_0x5a15ec);}this[_0x5b81c7(0x211)](_0x48f8a0[_0x5b81c7(0x1df)],_0x48f8a0[_0x5b81c7(0x234)],{'success':!![],'enums':_0x3fb06b,'rooms':_0x1430da},_0x48f8a0['callback']);}else{if(_0x48f8a0['command']===_0x5b81c7(0x21e)){const _0x401324=_0x48f8a0[_0x5b81c7(0x132)][_0x5b81c7(0x189)];if(!_0x401324)return this[_0x5b81c7(0x211)](_0x48f8a0['from'],_0x48f8a0['command'],{'success':![],'error':_0x5b81c7(0x193)},_0x48f8a0[_0x5b81c7(0x134)]);const _0x38e0a1=await getCalendarNames(this,_0x401324);this[_0x5b81c7(0x211)](_0x48f8a0[_0x5b81c7(0x1df)],_0x48f8a0[_0x5b81c7(0x234)],{'success':!![],'names':_0x38e0a1},_0x48f8a0[_0x5b81c7(0x134)]);}else{if(_0x48f8a0[_0x5b81c7(0x234)]===_0x5b81c7(0x1e6)){const {targetId:_0x1ac603,targetValue:_0x45d8d8}=_0x48f8a0[_0x5b81c7(0x132)];this[_0x5b81c7(0x204)][_0x5b81c7(0x14a)]('ðŸ§ª\x20Simulating\x20Butler\x20Proposal:\x20'+_0x1ac603+'\x20=\x20'+_0x45d8d8),await this[_0x5b81c7(0x243)](_0x5b81c7(0x20d),{'val':!![],'ack':!![]}),await this[_0x5b81c7(0x243)]('analysis.automation.description',{'val':_0x5b81c7(0x13a)+_0x1ac603,'ack':!![]}),await this[_0x5b81c7(0x243)](_0x5b81c7(0x230),{'val':_0x1ac603,'ack':!![]}),await this[_0x5b81c7(0x243)](_0x5b81c7(0x208),{'val':_0x45d8d8,'ack':!![]}),this[_0x5b81c7(0x211)](_0x48f8a0[_0x5b81c7(0x1df)],_0x48f8a0['command'],{'success':!![]},_0x48f8a0[_0x5b81c7(0x134)]);}else{if(_0x48f8a0[_0x5b81c7(0x234)]==='submitFeedback'){const {historyId:_0x376bff,rating:_0x363e8c,comment:_0x5ed6b0,alertReason:_0xf6d1a5}=_0x48f8a0[_0x5b81c7(0x132)];_0x376bff&&_0x363e8c?(await saveFeedback(this,{'timestamp':Date['now'](),'historyId':_0x376bff,'rating':_0x363e8c,'comment':_0x5ed6b0,'alertReason':_0xf6d1a5}),this[_0x5b81c7(0x211)](_0x48f8a0[_0x5b81c7(0x1df)],_0x48f8a0[_0x5b81c7(0x234)],{'success':!![]},_0x48f8a0['callback'])):this[_0x5b81c7(0x211)](_0x48f8a0[_0x5b81c7(0x1df)],_0x48f8a0[_0x5b81c7(0x234)],{'success':![],'error':_0x5b81c7(0x232)},_0x48f8a0[_0x5b81c7(0x134)]);}else _0x48f8a0[_0x5b81c7(0x234)]===_0x5b81c7(0x1a0)&&(this['log'][_0x5b81c7(0x14a)](_0x5b81c7(0x1c6)),await this[_0x5b81c7(0x243)](_0x5b81c7(0x20d),{'val':![],'ack':!![]}),await this[_0x5b81c7(0x243)]('analysis.automation.description',{'val':'','ack':!![]}),this['sendTo'](_0x48f8a0[_0x5b81c7(0x1df)],_0x48f8a0[_0x5b81c7(0x234)],{'success':!![]},_0x48f8a0[_0x5b81c7(0x134)]));}}}}}}}}}}}if(require[a0_0x22f06c(0x1d3)]!==module)module[a0_0x22f06c(0x16a)]=_0x1835c8=>new CogniLiving(_0x1835c8);else new CogniLiving();