const a0_0xae3d61=a0_0x572c;(function(_0x184e90,_0xa048df){const _0x3dd20b=a0_0x572c,_0x5c6444=_0x184e90();while(!![]){try{const _0x9ee41b=-parseInt(_0x3dd20b(0x191))/0x1*(parseInt(_0x3dd20b(0x162))/0x2)+parseInt(_0x3dd20b(0x1df))/0x3+-parseInt(_0x3dd20b(0x108))/0x4*(parseInt(_0x3dd20b(0x202))/0x5)+-parseInt(_0x3dd20b(0x20d))/0x6*(-parseInt(_0x3dd20b(0x1a6))/0x7)+-parseInt(_0x3dd20b(0xf3))/0x8*(parseInt(_0x3dd20b(0x10e))/0x9)+parseInt(_0x3dd20b(0x14f))/0xa*(-parseInt(_0x3dd20b(0x18e))/0xb)+-parseInt(_0x3dd20b(0x1f4))/0xc*(-parseInt(_0x3dd20b(0x21d))/0xd);if(_0x9ee41b===_0xa048df)break;else _0x5c6444['push'](_0x5c6444['shift']());}catch(_0x3e3e30){_0x5c6444['push'](_0x5c6444['shift']());}}}(a0_0x10cf,0x848bf));function a0_0x572c(_0x52084f,_0x45142d){const _0x6fd441=a0_0x10cf();return a0_0x572c=function(_0x3deaad,_0x422281){_0x3deaad=_0x3deaad-0xcd;let _0x10cfff=_0x6fd441[_0x3deaad];return _0x10cfff;},a0_0x572c(_0x52084f,_0x45142d);}const a0_0x422281=(function(){let _0x22ce4a=!![];return function(_0x3b307b,_0x216528){const _0x23f65a=_0x22ce4a?function(){const _0x3c64a0=a0_0x572c;if(_0x216528){const _0x1620b3=_0x216528[_0x3c64a0(0x1e7)](_0x3b307b,arguments);return _0x216528=null,_0x1620b3;}}:function(){};return _0x22ce4a=![],_0x23f65a;};}()),a0_0x3deaad=a0_0x422281(this,function(){const _0x9b82a5=a0_0x572c;return a0_0x3deaad['toString']()[_0x9b82a5(0x17f)](_0x9b82a5(0x149))[_0x9b82a5(0x172)]()[_0x9b82a5(0x125)](a0_0x3deaad)[_0x9b82a5(0x17f)](_0x9b82a5(0x149));});function a0_0x10cf(){const _0x2ddb53=[':\x20Temp-Differenz\x20','subscribeStates','Scan\x20Error:\x20','instance','Sec-Training\x20started...','trackerHeartbeat','analysis.ventilation.lastWindow','callback','inactivityThresholdHours','window','node-schedule','Gemini\x20Report\x20Night','analysis.energy.warmupSources','analysis.automation.targetValue','./lib/scanner','Guest\x20Mode','enum.rooms.*','SYSTEM_MODES','./lib/recorder','analysis.prediction.trackerConfidence','driftAnalysisTimer','scheduleJob','constructor','comfort','protectAiMemory','common','bootTime','version','Live\x20Event\x20Pulse','state','analyzeWindowOpening\x20error:\x20','toLowerCase','LTM.trainingData.sequences','isSolar','stringify','onStateChange','bin','enum','\x20events\x20from\x20standard\x20storage.','./lib/installer','subscribeForeignStatesAsync','üí®\x20L√ºftung\x20in\x20','outdoorSensorId','min','parse','initZombies','checkCalendarTriggers','setHours','length','Niemand','analysis.health.geminiDay','sensorLastValues','analysis.automation.targetId','fill','telegram','join','mkdirSync','./lib/scheduler','(((.+)+)+)+$','analysis.training.triggerTopology','times','rawEventLog','.uptime','History\x20Save\x20Error:\x20','331220UIfIkO','automation.triggerAction','Adapter','terrasse','\x20Tage)','checkWifiPresence','setStateAsync','bind','üêç\x20Triggering\x20Python\x20Health\x20Check\x20(Activity\x20Trend)...','\x20rooms)','Unbekannt','moduleEnergy','getTime','cancel','name','presenceDevices','error','sonn','response','2XfPBvF','updateHealthVector','sendNotification','TRAIN_TOPOLOGY','59\x2023\x20*\x20*\x20*','object','systemConfig','Current.WeatherText','security','moduleSecurity','getStateAsync','.data.table','abortExitTimer','CALCULATE_HEALTH_TREND','toLocaleTimeString','./lib/topology','toString','system.presenceWho','activeModules','setObjectNotExistsAsync','door','‚úÖ\x20History\x20saved:\x20','send','getOverviewData','healthTrendInterval','calendarName','now','startService','analysis.training.status','search','scanDevices','initHistory','‚òÄÔ∏è\x20Solar\x20Condition:\x20SUNNY\x20detected\x20via\x20','Daily\x20Room\x20Details\x20(48x30min)','infrasoundEnabled','guest','.system.mode','daswetter.0','toISOString','analysisTimer','eventHistory','.venv','loadSystemMode','Party\x20Mode','297luiTJM','ltmJob','lastTrackerEventTime','808219poobUz','setState','analysis.energy.warmupTimes','calendarCheckTimer','analysis.security.learningStatus','generateContent','setDate','Gute\x20L√ºftungsm√∂glichkeit!','thermostat','genAI','.json','readFileSync','LTM.triggerDailyDigest','minDaysForBaseline','integrateRoomTime','Init...','then','geminiApiKey','values','toLocaleDateString','testApiKey','35cMIAZq','getObjectViewAsync','Sonne:\x20','getMinutes','handleInfrasound','from','analysis.energy.warmupTargets','briefingJob','getHistoryData','scanThermostats','pulse','message','string','haust√ºr','getForeignObjectsAsync','analysis.training.triggerComfort','all','SET_LEARNING_MODE','config','.isOnline','forEach','existsSync','analysis.training.triggerSecurity','devices','isGracePeriodActive','triggerBriefing','analysis.training.triggerEnergy','writeFileSync','split','analysis.prediction.trackerTopRoom','TRAIN_SECURITY','saveDailyHistory','sources','startSystem','system.adapter.ical.','slice','DAY','weatherTempId','application/json','cogni-living\x20adapter\x20starting\x20(v','motion','generateHealthReport','analysis.health.todayRoomDetails','Keine\x20Daten','Kein\x20API\x20Key\x20√ºbergeben.','.last_seen','getAbsoluteDefaultDataDir','timestamp','max','LTM.rawEventLog','keys','./lib/setup','clear','system','exitGraceTimer','date','analysis.visualization.pulse','785349bIkLZX','Event','Room\x20Dwell\x20Time\x20Stats','apiKey','‚ö†\x20Replay\x20skipped:\x20No\x20events\x20in\x20memory.','party','analysis.training.triggerHealth','./lib/automation','apply','Say\x20Hello','cogni-living','analysis.trigger','roomIntegratorTimer','Room\x20History\x20(24h\x20Buckets)','¬∞C)','json','analysis.health.geminiNight','namespace','createAllObjects','debug','analysis.health.todayVector','420276wTanXx','dependencyInstallInProgress','todayVector','\x20events\x20from\x20today...','isArray','endsWith','communicate.request','find','onUnload','getHours','pressureBuffer','memoryCache','analysis.automation.patternDetected','Warte\x20auf\x20Analyse...','15SyqOAp','val','number','Lernphase\x20(','isPresent','updateLocation','moduleHealth','Standard','useCalendar','Gemini\x20Init\x20Error:\x20','log','712242hXtexC','add','[Integrator]\x20Error:\x20','\x20Kalender-Adapter\x20gefunden.','de-DE','ack','triggerEnergyPrediction','floor','VACATION','modeResetJob','LTM.baselineStatus','getEnums','analysis.activity.roomHistory','NORMAL','triggerInfrasoundCorrelation','geminiModel','806JSKAyB','analysis.automation.description','open','SYSTEM_DP_MODE','warn','ANALYZE_GAIT','NextHours.Location_1.Day_1.current.symbol_desc','analysis.activity.roomStats','currentSystemMode','üö∂\x20Gait\x20Analysis\x20triggered\x20with\x20','Gemini\x20Report\x20Day','temperature','value','type','utf8','runGeminiAnalysis','sunny','dailyDigests','online','getForeignStateAsync','main','Failed\x20to\x20trigger\x20Python\x20Health\x20Check','TRAIN_HEALTH','infrasoundSensorId','moduleComfort','üîÆ\x20Energy\x20Prediction\x20triggered\x20(','analysisHistory','Daily\x20Activity\x20Vector\x20(48x30min)','includes','licenseKey','events.history','replayTodayEvents','Corrupt','sendTo','checkSolarCondition','push','some','system.adapter.ical.È¶ô','triggerGaitAnalysis','historyJob','system.adapter.','energy','‚úÖ\x20Dashboard\x20Data\x20(Rooms\x20&\x20Timeline\x20&\x20Details)\x20restored.','./lib/dead_man','ready','reduce','{\x22history\x22:{}}','\x22history\x22:{}','runAutopilot','rows','replace','toFixed','modules','analysis.security.lastScore','initSchedules','history','@iobroker/adapter-core','checkThermostats','refreshCalendar\x20failed:\x20','isProVersion','2-digit','11280KYrbzG','Warm-Up\x20Time','Unknown','Aktiv\x20(','text','pop','analyzeWindowOpening','getGenerativeModel','runPythonHealthCheck','location','triggerGaitAnalysis\x20error:\x20','processSensorEvent','cleanupGhostInterventions','presenceCheckTimer','onReady','info','NIGHT','General\x20Activity\x20Trend','updateSchedulePreview','filter','command','874440qYwIJI','health','setPresence','LTM.dailyDigests','onMessage','...','801lXuyLX'];a0_0x10cf=function(){return _0x2ddb53;};return a0_0x10cf();}a0_0x3deaad();'use strict';const utils=require(a0_0xae3d61(0xee)),{GoogleGenerativeAI}=require('@google/generative-ai'),path=require('path'),fs=require('fs'),installer=require(a0_0xae3d61(0x136)),scanner=require(a0_0xae3d61(0x11d)),schedulers=require(a0_0xae3d61(0x148)),topology=require(a0_0xae3d61(0x171)),setup=require(a0_0xae3d61(0x1d9)),recorder=require(a0_0xae3d61(0x121)),pythonBridge=require('./lib/python_bridge'),aiAgent=require('./lib/ai_agent'),deadMan=require(a0_0xae3d61(0xe1)),automation=require(a0_0xae3d61(0x1e6)),GEMINI_MODEL='models/gemini-flash-latest';class CogniLiving extends utils[a0_0xae3d61(0x151)]{constructor(_0xb74d57){const _0x388dd0=a0_0xae3d61;super({..._0xb74d57,'name':_0x388dd0(0x1e9)}),this['eventHistory']=[],this[_0x388dd0(0xd0)]=[],this['rawEventLog']=[],this[_0x388dd0(0x22e)]=[],this['sensorLastValues']={},this[_0x388dd0(0x168)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x388dd0(0x206)]=!![],this['exitTimer']=null,this[_0x388dd0(0x1dc)]=null,this[_0x388dd0(0x1be)]=![],this[_0x388dd0(0x19a)]=null,this['geminiModel']=null,this[_0x388dd0(0x225)]=setup[_0x388dd0(0x120)][_0x388dd0(0x21a)],this[_0x388dd0(0xf1)]=![],this['lastAlertState']=![],this[_0x388dd0(0x189)]=null,this[_0x388dd0(0x194)]=null,this[_0x388dd0(0x100)]=null,this[_0x388dd0(0x18f)]=null,this[_0x388dd0(0x216)]=null,this[_0x388dd0(0x123)]=null,this[_0x388dd0(0x1ad)]=null,this[_0x388dd0(0xdd)]=null,this[_0x388dd0(0x114)]=null,this[_0x388dd0(0x17a)]=null,this[_0x388dd0(0x1eb)]=null,this[_0x388dd0(0x1f5)]=![],this[_0x388dd0(0x190)]=Date[_0x388dd0(0x17c)](),this[_0x388dd0(0x1ff)]=null,this[_0x388dd0(0x129)]=Date[_0x388dd0(0x17c)](),this['infrasoundLocked']=![],this[_0x388dd0(0x1fe)]=[],this[_0x388dd0(0x174)]={'health':!![],'security':!![],'energy':!![],'comfort':!![]},this['on'](_0x388dd0(0xe2),this[_0x388dd0(0x101)][_0x388dd0(0x156)](this)),this['on']('stateChange',this[_0x388dd0(0x132)]['bind'](this)),this['on']('unload',this[_0x388dd0(0x1fc)][_0x388dd0(0x156)](this)),this['on'](_0x388dd0(0x1b1),this[_0x388dd0(0x10c)][_0x388dd0(0x156)](this));}async['onReady'](){const _0x383ce8=a0_0xae3d61;this[_0x383ce8(0x20c)][_0x383ce8(0x102)](_0x383ce8(0x1cd)+this[_0x383ce8(0x12a)]+')\x20-\x20Phase\x20E\x20(Scheduler\x20Fix)');if(this[_0x383ce8(0x1b8)][_0x383ce8(0x208)]!==undefined)this[_0x383ce8(0x174)]['health']=this[_0x383ce8(0x1b8)][_0x383ce8(0x208)];if(this['config'][_0x383ce8(0x16b)]!==undefined)this[_0x383ce8(0x174)]['security']=this['config']['moduleSecurity'];if(this[_0x383ce8(0x1b8)][_0x383ce8(0x15a)]!==undefined)this[_0x383ce8(0x174)][_0x383ce8(0xdf)]=this[_0x383ce8(0x1b8)][_0x383ce8(0x15a)];if(this[_0x383ce8(0x1b8)][_0x383ce8(0xce)]!==undefined)this[_0x383ce8(0x174)][_0x383ce8(0x126)]=this['config'][_0x383ce8(0xce)];if(this['config'][_0x383ce8(0xea)])this[_0x383ce8(0x174)]={...this[_0x383ce8(0x174)],...this[_0x383ce8(0x1b8)][_0x383ce8(0xea)]};this[_0x383ce8(0x1c7)]();}async['startSystem'](){const _0x454f4b=a0_0xae3d61;await setup[_0x454f4b(0x13c)](this);try{this[_0x454f4b(0xf1)]=await setup['checkLicense'](this[_0x454f4b(0x1b8)][_0x454f4b(0xd3)]);}catch(_0x44dc46){}if(!this['config'][_0x454f4b(0x117)]||this[_0x454f4b(0x1b8)][_0x454f4b(0x117)]<0.1)this[_0x454f4b(0x1b8)][_0x454f4b(0x117)]=0xc;await setup[_0x454f4b(0x181)](this),await setup['initSystemConfig'](this);try{const _0x3516f2=await this[_0x454f4b(0x16c)](_0x454f4b(0x193)),_0xba52fb=await this['getStateAsync'](_0x454f4b(0x11b));_0x3516f2&&_0x3516f2[_0x454f4b(0x203)]&&_0xba52fb&&_0xba52fb[_0x454f4b(0x203)]&&(Date[_0x454f4b(0x17c)]()-_0x3516f2['ts']<0x4*0xe10*0x3e8&&(this['memoryCache']={'times':JSON[_0x454f4b(0x13b)](_0x3516f2[_0x454f4b(0x203)]),'sources':JSON[_0x454f4b(0x13b)](_0xba52fb[_0x454f4b(0x203)])}));}catch(_0x56898f){}if(this[_0x454f4b(0x1b8)][_0x454f4b(0x1a2)])try{this[_0x454f4b(0x19a)]=new GoogleGenerativeAI(this['config']['geminiApiKey']),this[_0x454f4b(0x21c)]=this[_0x454f4b(0x19a)][_0x454f4b(0xfa)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x454f4b(0x1cc)}});}catch(_0x157e2e){this[_0x454f4b(0x20c)]['error'](_0x454f4b(0x20b)+_0x157e2e[_0x454f4b(0x1b1)]);}await setup[_0x454f4b(0x1f1)](this),await this[_0x454f4b(0x18c)](),schedulers[_0x454f4b(0xec)](this),await this[_0x454f4b(0x175)](_0x454f4b(0x1de),{'type':'state','common':{'name':_0x454f4b(0x12b),'type':_0x454f4b(0x204),'role':_0x454f4b(0x229),'read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x454f4b(0x224),{'type':_0x454f4b(0x12c),'common':{'name':_0x454f4b(0x1e1),'type':_0x454f4b(0x1b2),'role':_0x454f4b(0x1ee),'read':!![],'write':![],'def':'{\x22today\x22:{},\x20\x22yesterday\x22:{},\x20\x22date\x22:\x22\x22}'},'native':{}}),await this[_0x454f4b(0x175)](_0x454f4b(0x219),{'type':_0x454f4b(0x12c),'common':{'name':_0x454f4b(0x1ec),'type':_0x454f4b(0x1b2),'role':_0x454f4b(0x1ee),'read':!![],'write':![],'def':_0x454f4b(0xe4)},'native':{}}),await this[_0x454f4b(0x175)](_0x454f4b(0x1ef),{'type':_0x454f4b(0x12c),'common':{'name':_0x454f4b(0x11a),'type':_0x454f4b(0x1b2),'role':_0x454f4b(0xf7),'read':!![],'write':![],'def':_0x454f4b(0x201)},'native':{}}),await this[_0x454f4b(0x175)](_0x454f4b(0x141),{'type':_0x454f4b(0x12c),'common':{'name':_0x454f4b(0x227),'type':'string','role':_0x454f4b(0xf7),'read':!![],'write':![],'def':_0x454f4b(0x201)},'native':{}}),await this[_0x454f4b(0x175)](_0x454f4b(0x1f3),{'type':_0x454f4b(0x12c),'common':{'name':_0x454f4b(0xd1),'type':_0x454f4b(0x1b2),'role':_0x454f4b(0x1ee),'read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x454f4b(0x175)](_0x454f4b(0x1d0),{'type':_0x454f4b(0x12c),'common':{'name':_0x454f4b(0x183),'type':_0x454f4b(0x1b2),'role':_0x454f4b(0x1ee),'read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x454f4b(0x175)]('analysis.health.activityTrend',{'type':_0x454f4b(0x12c),'common':{'name':_0x454f4b(0x104),'type':_0x454f4b(0x204),'role':_0x454f4b(0x229),'unit':'%','read':!![],'write':![]},'native':{}}),await this[_0x454f4b(0x175)](_0x454f4b(0x193),{'type':_0x454f4b(0x12c),'common':{'name':_0x454f4b(0xf4),'type':_0x454f4b(0x1b2),'role':_0x454f4b(0x1ee),'read':!![],'write':![]},'native':{}});try{const _0x365d83=await this[_0x454f4b(0x16c)](_0x454f4b(0xd4));if(_0x365d83&&_0x365d83[_0x454f4b(0x203)]){this[_0x454f4b(0x18a)]=JSON[_0x454f4b(0x13b)](_0x365d83[_0x454f4b(0x203)]);if(this['isProVersion']){const _0x55abc7=await this[_0x454f4b(0x16c)]('LTM.rawEventLog');if(_0x55abc7&&_0x55abc7[_0x454f4b(0x203)])this[_0x454f4b(0x14c)]=JSON['parse'](_0x55abc7[_0x454f4b(0x203)]);}this[_0x454f4b(0x20c)][_0x454f4b(0x102)]('üì¶\x20Restored\x20'+this[_0x454f4b(0x18a)][_0x454f4b(0x13f)]+_0x454f4b(0x135));}}catch(_0x19b50a){this[_0x454f4b(0x18a)]=[];}try{const _0x1bf902=await this['getStateAsync'](_0x454f4b(0x10b));if(_0x1bf902&&_0x1bf902[_0x454f4b(0x203)])this[_0x454f4b(0x22e)]=JSON[_0x454f4b(0x13b)](_0x1bf902[_0x454f4b(0x203)]);}catch(_0x4cb394){this['dailyDigests']=[];}const _0x137284=this[_0x454f4b(0x22e)][_0x454f4b(0x13f)]>=(this[_0x454f4b(0x1b8)][_0x454f4b(0x19e)]||0x7)?_0x454f4b(0xf6)+this[_0x454f4b(0x22e)]['length']+_0x454f4b(0x153):_0x454f4b(0x205)+this[_0x454f4b(0x22e)]['length']+'/'+(this[_0x454f4b(0x1b8)]['minDaysForBaseline']||0x7)+')';await this[_0x454f4b(0x155)](_0x454f4b(0x217),{'val':_0x137284,'ack':!![]}),this[_0x454f4b(0x110)](_0x454f4b(0x1ea)),this['subscribeStates'](_0x454f4b(0x19d)),this[_0x454f4b(0x110)](_0x454f4b(0x1e5));this[_0x454f4b(0x1b8)][_0x454f4b(0x184)]&&this['config'][_0x454f4b(0xcd)]&&this[_0x454f4b(0x174)]['security']&&this['subscribeForeignStates'](this[_0x454f4b(0x1b8)][_0x454f4b(0xcd)]);const _0x2c53fd=this['config'][_0x454f4b(0x1bd)];if(_0x2c53fd)for(const _0x502154 of _0x2c53fd){await this[_0x454f4b(0x137)](_0x502154['id']);}const _0x102039=this[_0x454f4b(0x1b8)][_0x454f4b(0x15e)];if(_0x102039)for(const _0x736bfc of _0x102039){await this[_0x454f4b(0x137)](_0x736bfc);}const _0x4e28eb=require(_0x454f4b(0x119));if(this[_0x454f4b(0xdd)])this[_0x454f4b(0xdd)][_0x454f4b(0x15c)]();this['historyJob']=_0x4e28eb[_0x454f4b(0x124)](_0x454f4b(0x166),()=>{const _0x2872b9=_0x454f4b;this[_0x2872b9(0x1c5)]();}),setTimeout(()=>this['replayTodayEvents'](),0x1388);if(this[_0x454f4b(0x1eb)])clearInterval(this['roomIntegratorTimer']);this[_0x454f4b(0x19f)](),this['roomIntegratorTimer']=setInterval(async()=>{const _0x2276bd=_0x454f4b;await this[_0x2276bd(0x19f)]();},0x3c*0x3e8);if(this[_0x454f4b(0x17a)])clearInterval(this[_0x454f4b(0x17a)]);this[_0x454f4b(0x17a)]=setInterval(()=>{const _0x23b713=_0x454f4b;this[_0x23b713(0xf1)]&&this[_0x23b713(0x174)][_0x23b713(0x109)]&&this[_0x23b713(0xfb)]();},0x4*0x3c*0x3c*0x3e8);if(this[_0x454f4b(0x189)])clearInterval(this[_0x454f4b(0x189)]);this[_0x454f4b(0x174)][_0x454f4b(0xdf)]&&(this[_0x454f4b(0x189)]=setInterval(()=>{const _0x174617=_0x454f4b;this[_0x174617(0x213)]();},0xf*0x3c*0x3e8),setTimeout(()=>this[_0x454f4b(0x213)](),0x2710));if(this[_0x454f4b(0x194)])clearInterval(this[_0x454f4b(0x194)]);this[_0x454f4b(0x1b8)][_0x454f4b(0x20a)]&&this[_0x454f4b(0x174)][_0x454f4b(0xdf)]&&(this[_0x454f4b(0x194)]=setInterval(()=>{const _0x191f0a=_0x454f4b;automation[_0x191f0a(0x13d)](this);},0x2*0x3c*0x3e8),setTimeout(()=>automation['checkCalendarTriggers'](this),0x3a98));if(this[_0x454f4b(0x100)])clearInterval(this['presenceCheckTimer']);this['config'][_0x454f4b(0x15e)]&&this[_0x454f4b(0x1b8)]['presenceDevices']['length']>0x0&&(this[_0x454f4b(0x100)]=setInterval(async()=>{const _0x429cd0=_0x454f4b;await this[_0x429cd0(0x154)]();},0x3c*0x3e8),setTimeout(async()=>await this[_0x454f4b(0x154)](),0x1388));const _0x1d073f=path['join'](__dirname,_0x454f4b(0x18b),_0x454f4b(0x133),'python');pythonBridge[_0x454f4b(0x17d)](this,_0x1d073f);}[a0_0xae3d61(0x1fc)](_0x343334){const _0x4129ed=a0_0xae3d61;if(this['historyJob'])this[_0x4129ed(0xdd)][_0x4129ed(0x15c)]();this['saveDailyHistory']()[_0x4129ed(0x1a1)](()=>{const _0x4d5503=_0x4129ed;if(this[_0x4d5503(0x189)])clearInterval(this[_0x4d5503(0x189)]);if(this[_0x4d5503(0x194)])clearInterval(this[_0x4d5503(0x194)]);if(this['presenceCheckTimer'])clearInterval(this[_0x4d5503(0x100)]);if(this[_0x4d5503(0x1eb)])clearInterval(this[_0x4d5503(0x1eb)]);recorder[_0x4d5503(0x16e)](this),pythonBridge['stopService'](this),_0x343334();});}async[a0_0xae3d61(0xd5)](){const _0x2370d2=a0_0xae3d61;if(!this[_0x2370d2(0x18a)]||this[_0x2370d2(0x18a)][_0x2370d2(0x13f)]===0x0){this[_0x2370d2(0x20c)]['warn'](_0x2370d2(0x1e3));return;}this[_0x2370d2(0x20c)][_0x2370d2(0x102)]('‚Ü∫\x20Replaying\x20'+this[_0x2370d2(0x18a)][_0x2370d2(0x13f)]+_0x2370d2(0x1f7));const _0x4b2b7a=new Date()[_0x2370d2(0x13e)](0x0,0x0,0x0,0x0),_0x5f4a2d=_0x2370d2(0x219);let _0x3c157c={'history':{},'date':new Date()[_0x2370d2(0x1a4)]()};const _0x1734f1=_0x2370d2(0x1f3),_0x593f74=_0x2370d2(0x1d0);let _0x409416=new Array(0x30)[_0x2370d2(0x144)](0x0),_0x19b4d4=Array[_0x2370d2(0x1ab)]({'length':0x30},()=>[]);this[_0x2370d2(0x18a)][_0x2370d2(0x1ba)](_0x3dc9cc=>{const _0x25b262=_0x2370d2;if(_0x3dc9cc[_0x25b262(0x1d5)]>=_0x4b2b7a){if(recorder['isRelevantActivity'](_0x3dc9cc[_0x25b262(0x22a)],_0x3dc9cc[_0x25b262(0x229)])){const _0x2baff8=new Date(_0x3dc9cc[_0x25b262(0x1d5)]),_0x16a7e1=_0x2baff8[_0x25b262(0x1fd)]()*0x2+(_0x2baff8[_0x25b262(0x1a9)]()>=0x1e?0x1:0x0);if(_0x16a7e1<0x30){_0x409416[_0x16a7e1]++;const _0x2b99e3=_0x3dc9cc['location']||_0x3dc9cc[_0x25b262(0x15d)]||'?';let _0x59d8d4=_0x19b4d4[_0x16a7e1];!_0x59d8d4[_0x25b262(0xd2)](_0x2b99e3)&&_0x59d8d4[_0x25b262(0xd9)](_0x2b99e3);}const _0x36b9e5=_0x2baff8[_0x25b262(0x1fd)]();let _0xf5a2bd=_0x3dc9cc[_0x25b262(0xfc)]||_0x25b262(0xf5);const _0x3ddd27=(this[_0x25b262(0x1b8)][_0x25b262(0x1bd)]||[])[_0x25b262(0x1fb)](_0x5ac483=>_0x5ac483[_0x25b262(0xfc)]===_0xf5a2bd);if(_0x3ddd27)_0xf5a2bd=_0x3ddd27[_0x25b262(0xfc)];if(!_0x3c157c[_0x25b262(0xed)][_0xf5a2bd])_0x3c157c[_0x25b262(0xed)][_0xf5a2bd]=new Array(0x18)[_0x25b262(0x144)](0x0);if(_0x3c157c[_0x25b262(0xed)][_0xf5a2bd][_0x36b9e5]<0x3c)_0x3c157c[_0x25b262(0xed)][_0xf5a2bd][_0x36b9e5]++;}}});const _0x2ca56e=await this[_0x2370d2(0x16c)](_0x5f4a2d);(!_0x2ca56e||!_0x2ca56e[_0x2370d2(0x203)]||_0x2ca56e['val']==='{}'||_0x2ca56e[_0x2370d2(0x203)][_0x2370d2(0xd2)](_0x2370d2(0xe5)))&&await this['setStateAsync'](_0x5f4a2d,{'val':JSON[_0x2370d2(0x131)](_0x3c157c),'ack':!![]}),await this['setStateAsync'](_0x1734f1,{'val':JSON['stringify'](_0x409416),'ack':!![]}),await this['setStateAsync'](_0x593f74,{'val':JSON['stringify'](_0x19b4d4),'ack':!![]}),this[_0x2370d2(0x20c)]['info'](_0x2370d2(0xe0));}async[a0_0xae3d61(0x1c5)](){const _0x1ff0a6=a0_0xae3d61;if(!this[_0x1ff0a6(0x174)][_0x1ff0a6(0x109)])return;const _0x3c40c3=new Date()[_0x1ff0a6(0x188)]()[_0x1ff0a6(0x1c2)]('T')[0x0];this[_0x1ff0a6(0x20c)]['debug']('üíæ\x20Saving\x20Daily\x20History\x20for\x20'+_0x3c40c3+_0x1ff0a6(0x10d));try{const [_0x698b2d,_0x59e958,_0xc9c909,_0xbc888b,_0x263c58,_0x5d38f6]=await Promise[_0x1ff0a6(0x1b6)]([this[_0x1ff0a6(0x16c)]('analysis.activity.roomHistory'),this[_0x1ff0a6(0x16c)](_0x1ff0a6(0x1ef)),this[_0x1ff0a6(0x16c)](_0x1ff0a6(0x141)),this['getStateAsync'](_0x1ff0a6(0xeb)),this[_0x1ff0a6(0x16c)](_0x1ff0a6(0x1f3)),this[_0x1ff0a6(0x16c)]('analysis.health.activityTrend')]),_0x527a1b=this[_0x1ff0a6(0x18a)][_0x1ff0a6(0x106)](_0x52f561=>_0x52f561[_0x1ff0a6(0x1d5)]>=new Date()[_0x1ff0a6(0x13e)](0x0,0x0,0x0,0x0)&&(_0x52f561[_0x1ff0a6(0x15d)][_0x1ff0a6(0x12e)]()[_0x1ff0a6(0xd2)](_0x1ff0a6(0x1b3))||_0x52f561['name'][_0x1ff0a6(0x12e)]()['includes'](_0x1ff0a6(0x152)))&&(_0x52f561[_0x1ff0a6(0x229)]===!![]||_0x52f561[_0x1ff0a6(0x229)]===_0x1ff0a6(0x21f)))[_0x1ff0a6(0x13f)];let _0xf78ebe=0x55;if(_0x5d38f6&&_0x5d38f6[_0x1ff0a6(0x203)]!==undefined)_0xf78ebe=Math[_0x1ff0a6(0x13a)](0x64,Math[_0x1ff0a6(0x1d6)](0x14,Math['round'](0x50+Number(_0x5d38f6['val'])*0x5)));const _0x3c3752={'date':_0x3c40c3,'timestamp':Date[_0x1ff0a6(0x17c)](),'roomHistory':_0x698b2d?.['val']?JSON[_0x1ff0a6(0x13b)](_0x698b2d[_0x1ff0a6(0x203)]):{},'geminiNight':_0x59e958?.[_0x1ff0a6(0x203)]||_0x1ff0a6(0x1d1),'geminiDay':_0xc9c909?.['val']||'Keine\x20Daten','anomalyScore':_0xbc888b?.['val']||0.1,'todayVector':_0x263c58?.[_0x1ff0a6(0x203)]?JSON['parse'](_0x263c58[_0x1ff0a6(0x203)]):new Array(0x30)[_0x1ff0a6(0x144)](0x0),'batteryLevel':_0xf78ebe,'freshAirCount':_0x527a1b,'eventHistory':this[_0x1ff0a6(0x18a)]},_0x4e7f73=utils[_0x1ff0a6(0x1d4)](),_0x2b1b29=path['join'](_0x4e7f73,'cogni-living',_0x1ff0a6(0xed));if(!fs[_0x1ff0a6(0x1bb)](_0x2b1b29))fs[_0x1ff0a6(0x147)](_0x2b1b29,{'recursive':!![]});const _0x52faaa=path[_0x1ff0a6(0x146)](_0x2b1b29,_0x3c40c3+_0x1ff0a6(0x19b));fs[_0x1ff0a6(0x1c1)](_0x52faaa,JSON[_0x1ff0a6(0x131)](_0x3c3752)),this[_0x1ff0a6(0x20c)]['info'](_0x1ff0a6(0x177)+_0x52faaa);}catch(_0x57446f){this[_0x1ff0a6(0x20c)][_0x1ff0a6(0x15f)](_0x1ff0a6(0x14e)+_0x57446f[_0x1ff0a6(0x1b1)]);}}async['integrateRoomTime'](){const _0x5834b6=a0_0xae3d61;if(!this[_0x5834b6(0x206)])return;try{let _0x4e00e1=null;try{const _0x1e7f19=await this['getStateAsync'](_0x5834b6(0x1c3)),_0x2aad5c=await this[_0x5834b6(0x16c)](_0x5834b6(0x122));if(_0x1e7f19&&_0x1e7f19[_0x5834b6(0x203)]&&_0x2aad5c&&_0x2aad5c[_0x5834b6(0x203)]&&_0x2aad5c[_0x5834b6(0x203)]>0.3){if(_0x1e7f19[_0x5834b6(0x203)]!==_0x5834b6(0xf5)&&_0x1e7f19[_0x5834b6(0x203)]!==_0x5834b6(0x1a0))_0x4e00e1=_0x1e7f19[_0x5834b6(0x203)];}}catch(_0x3dfc2b){}if(!_0x4e00e1){const _0x44374f=this[_0x5834b6(0x1b8)][_0x5834b6(0x1bd)]||[];for(const _0x3e18a3 of _0x44374f){if(_0x3e18a3['type']==='motion'&&_0x3e18a3[_0x5834b6(0xfc)])try{const _0x51634a=await this['getForeignStateAsync'](_0x3e18a3['id']);if(_0x51634a&&(_0x51634a[_0x5834b6(0x203)]===!![]||_0x51634a[_0x5834b6(0x203)]==='on'||_0x51634a[_0x5834b6(0x203)]===0x1)){_0x4e00e1=_0x3e18a3[_0x5834b6(0xfc)];break;}}catch(_0x67568f){}}}if(!_0x4e00e1)return;const _0x505f21=this['config']['devices']||[];let _0xc67f6c=_0x4e00e1;const _0x5c92d7=_0x505f21[_0x5834b6(0x1fb)](_0x115d16=>_0x115d16[_0x5834b6(0xfc)]&&_0x115d16[_0x5834b6(0xfc)][_0x5834b6(0x12e)]()===_0x4e00e1[_0x5834b6(0x12e)]());if(_0x5c92d7)_0xc67f6c=_0x5c92d7[_0x5834b6(0xfc)];const _0x5d24ab=_0x5834b6(0x219),_0x555d14=await this['getStateAsync'](_0x5d24ab),_0x409896=new Date()[_0x5834b6(0x1a4)]();let _0x6fcee1={'history':{},'date':_0x409896};if(_0x555d14&&_0x555d14[_0x5834b6(0x203)])try{_0x6fcee1=JSON['parse'](_0x555d14['val']);}catch(_0x341917){}_0x6fcee1['date']!==_0x409896&&(_0x6fcee1[_0x5834b6(0xed)]={},_0x6fcee1[_0x5834b6(0x1dd)]=_0x409896);if(!_0x6fcee1[_0x5834b6(0xed)][_0xc67f6c])_0x6fcee1[_0x5834b6(0xed)][_0xc67f6c]=new Array(0x18)['fill'](0x0);const _0x5bfb0e=new Date()[_0x5834b6(0x1fd)]();if(_0x6fcee1['history'][_0xc67f6c][_0x5bfb0e]<0x3c)_0x6fcee1[_0x5834b6(0xed)][_0xc67f6c][_0x5bfb0e]++;await this['setStateAsync'](_0x5d24ab,{'val':JSON['stringify'](_0x6fcee1),'ack':!![]});}catch(_0x5e1663){this['log']['warn'](_0x5834b6(0x20f)+_0x5e1663[_0x5834b6(0x1b1)]);}}async['onMessage'](_0x368f2a){const _0x34f9dd=a0_0xae3d61;if(typeof _0x368f2a===_0x34f9dd(0x167)&&_0x368f2a[_0x34f9dd(0x1b1)]){if(_0x368f2a[_0x34f9dd(0x107)]===_0x34f9dd(0x1ae)){const _0x193fa9=_0x368f2a['message']['date'],_0x9a77a9=utils['getAbsoluteDefaultDataDir'](),_0x3503d5=path[_0x34f9dd(0x146)](_0x9a77a9,'cogni-living',_0x34f9dd(0xed),_0x193fa9+_0x34f9dd(0x19b));if(fs[_0x34f9dd(0x1bb)](_0x3503d5))try{const _0x58c596=JSON['parse'](fs[_0x34f9dd(0x19c)](_0x3503d5,_0x34f9dd(0x22b)));this[_0x34f9dd(0xd7)](_0x368f2a[_0x34f9dd(0x1ab)],_0x368f2a[_0x34f9dd(0x107)],{'success':!![],'data':_0x58c596},_0x368f2a[_0x34f9dd(0x116)]);}catch(_0x1983c4){this[_0x34f9dd(0xd7)](_0x368f2a['from'],_0x368f2a[_0x34f9dd(0x107)],{'success':![],'error':_0x34f9dd(0xd6)},_0x368f2a[_0x34f9dd(0x116)]);}else this[_0x34f9dd(0xd7)](_0x368f2a[_0x34f9dd(0x1ab)],_0x368f2a[_0x34f9dd(0x107)],{'success':![],'error':'No\x20data'},_0x368f2a['callback']);}else{if(_0x368f2a['command']===_0x34f9dd(0x179)){const _0x40a411=this['dailyDigests']['length'];let _0x587cbf=new Array(0x30)[_0x34f9dd(0x144)](0x0),_0x56103a=Array[_0x34f9dd(0x1ab)]({'length':0x30},()=>[]);try{const _0xe50a85=await this[_0x34f9dd(0x16c)](_0x34f9dd(0x1f3));if(_0xe50a85&&_0xe50a85['val'])_0x587cbf=JSON[_0x34f9dd(0x13b)](_0xe50a85['val']);const _0x16e983=await this[_0x34f9dd(0x16c)](_0x34f9dd(0x1d0));if(_0x16e983&&_0x16e983[_0x34f9dd(0x203)])_0x56103a=JSON[_0x34f9dd(0x13b)](_0x16e983[_0x34f9dd(0x203)]);}catch(_0x2113d5){}let _0x5f4c63=new Array(0x30)[_0x34f9dd(0x144)](0x0);try{const _0x15fe11=new Date();_0x15fe11[_0x34f9dd(0x197)](_0x15fe11['getDate']()-0x1);const _0x4205e7=_0x15fe11['toISOString']()['split']('T')[0x0],_0x1ef684=utils[_0x34f9dd(0x1d4)](),_0x4793d3=path[_0x34f9dd(0x146)](_0x1ef684,_0x34f9dd(0x1e9),_0x34f9dd(0xed),_0x4205e7+_0x34f9dd(0x19b));if(fs[_0x34f9dd(0x1bb)](_0x4793d3)){const _0x164e46=JSON[_0x34f9dd(0x13b)](fs[_0x34f9dd(0x19c)](_0x4793d3,_0x34f9dd(0x22b)));if(_0x164e46&&_0x164e46[_0x34f9dd(0x1f6)])_0x5f4c63=_0x164e46[_0x34f9dd(0x1f6)];}}catch(_0x3d7e6c){}let _0x44b854={'today':{},'yesterday':{}};try{const _0x53e753=await this[_0x34f9dd(0x16c)](_0x34f9dd(0x224));if(_0x53e753&&_0x53e753[_0x34f9dd(0x203)])_0x44b854=JSON[_0x34f9dd(0x13b)](_0x53e753[_0x34f9dd(0x203)]);}catch(_0x5b809c){}let _0x835e85=null;try{const _0x3d8ed0=await this[_0x34f9dd(0x16c)]('analysis.health.activityTrend');if(_0x3d8ed0)_0x835e85=_0x3d8ed0[_0x34f9dd(0x203)];}catch(_0x247705){}if(_0x835e85===undefined||_0x835e85===null){const _0x5a191d=_0x587cbf[_0x34f9dd(0xe3)]((_0x20e954,_0x471c05)=>_0x20e954+_0x471c05,0x0),_0x304266=Math['min'](0x2,Math[_0x34f9dd(0x1d6)](-0x2,(0x64-_0x5a191d)/0x32));_0x835e85=_0x304266;}let _0x4e9387=![],_0x1ac048='',_0x457b6c='',_0x26f063='';try{const _0x25a760=await this[_0x34f9dd(0x16c)](_0x34f9dd(0x200));if(_0x25a760&&_0x25a760[_0x34f9dd(0x203)]){_0x4e9387=!![];const _0x3a422a=await this['getStateAsync'](_0x34f9dd(0x21e));_0x1ac048=_0x3a422a?_0x3a422a['val']:'';const _0x244c9c=await this[_0x34f9dd(0x16c)](_0x34f9dd(0x143));_0x457b6c=_0x244c9c?_0x244c9c[_0x34f9dd(0x203)]:'';const _0x553e4f=await this[_0x34f9dd(0x16c)](_0x34f9dd(0x11c));_0x26f063=_0x553e4f?_0x553e4f[_0x34f9dd(0x203)]:'';}}catch(_0x15f51b){}const _0x91b157=await this[_0x34f9dd(0xd8)](),_0x183322=(this['config'][_0x34f9dd(0x1bd)]||[])[_0x34f9dd(0xda)](_0x5c0b12=>_0x5c0b12[_0x34f9dd(0x130)]),_0x8ce8c9=_0x91b157&&_0x183322;let _0x3dc38b='';try{const _0x23e560=await this['getStateAsync'](_0x34f9dd(0x173));if(_0x23e560&&_0x23e560[_0x34f9dd(0x203)])_0x3dc38b=_0x23e560[_0x34f9dd(0x203)];}catch(_0x4b5a52){}this[_0x34f9dd(0xd7)](_0x368f2a[_0x34f9dd(0x1ab)],_0x368f2a['command'],{'success':!![],'eventHistory':this[_0x34f9dd(0x18a)][_0x34f9dd(0x1c9)](0x0,0x7d0),'stats':{'digestCount':_0x40a411,'isPresent':this[_0x34f9dd(0x206)],'hourlyActivity':_0x587cbf,'hourlyDetails':_0x56103a,'yesterdayActivity':_0x5f4c63,'solarActive':_0x8ce8c9,'presenceWho':_0x3dc38b,'roomStats':_0x44b854,'activityTrend':_0x835e85,'modules':this[_0x34f9dd(0x174)]},'automation':{'detected':_0x4e9387,'description':_0x1ac048,'targetId':_0x457b6c,'targetValue':_0x26f063}},_0x368f2a[_0x34f9dd(0x116)]);}else{if(_0x368f2a['command']===_0x34f9dd(0xef))try{const _0x6bab32=await automation[_0x34f9dd(0x1af)](this);this[_0x34f9dd(0xd7)](_0x368f2a[_0x34f9dd(0x1ab)],_0x368f2a[_0x34f9dd(0x107)],{'success':!![],'results':_0x6bab32},_0x368f2a[_0x34f9dd(0x116)]);}catch(_0x35cefd){this[_0x34f9dd(0xd7)](_0x368f2a['from'],_0x368f2a[_0x34f9dd(0x107)],{'success':![],'error':_0x35cefd[_0x34f9dd(0x1b1)]},_0x368f2a[_0x34f9dd(0x116)]);}else{if(_0x368f2a[_0x34f9dd(0x107)]===_0x34f9dd(0x180))try{const _0x159ad0=await scanner['scanForDevices'](this,_0x368f2a[_0x34f9dd(0x1b1)]||{});this[_0x34f9dd(0xd7)](_0x368f2a[_0x34f9dd(0x1ab)],_0x368f2a[_0x34f9dd(0x107)],{'success':!![],'devices':_0x159ad0},_0x368f2a[_0x34f9dd(0x116)]);}catch(_0x42c4ee){}else{if(_0x368f2a[_0x34f9dd(0x107)]===_0x34f9dd(0x218)){const _0x16f372=await this[_0x34f9dd(0x1b4)]('enum.functions.*',_0x34f9dd(0x134)),_0x1f6fe9=[];if(_0x16f372)for(const _0x1ef1cb in _0x16f372){let _0x32a54a=_0x16f372[_0x1ef1cb]['common']['name'];if(_0x32a54a&&typeof _0x32a54a===_0x34f9dd(0x167))_0x32a54a=_0x32a54a['de']||_0x32a54a['en']||Object['values'](_0x32a54a)[0x0]||JSON[_0x34f9dd(0x131)](_0x32a54a);_0x1f6fe9[_0x34f9dd(0xd9)]({'id':_0x1ef1cb,'name':String(_0x32a54a||_0x1ef1cb)});}const _0x5823d4=await this[_0x34f9dd(0x1b4)](_0x34f9dd(0x11f),_0x34f9dd(0x134)),_0x3f4c23=[];if(_0x5823d4)for(const _0x2fce05 in _0x5823d4){let _0xa0ae56=_0x5823d4[_0x2fce05][_0x34f9dd(0x128)][_0x34f9dd(0x15d)];if(_0xa0ae56&&typeof _0xa0ae56===_0x34f9dd(0x167))_0xa0ae56=_0xa0ae56['de']||_0xa0ae56['en']||Object[_0x34f9dd(0x1a3)](_0xa0ae56)[0x0]||JSON[_0x34f9dd(0x131)](_0xa0ae56);_0x3f4c23[_0x34f9dd(0xd9)](String(_0xa0ae56||_0x2fce05[_0x34f9dd(0x1c2)]('.')[_0x34f9dd(0xf8)]()));}this['sendTo'](_0x368f2a[_0x34f9dd(0x1ab)],_0x368f2a['command'],{'success':!![],'enums':_0x1f6fe9,'rooms':_0x3f4c23},_0x368f2a[_0x34f9dd(0x116)]);}else{if(_0x368f2a[_0x34f9dd(0x107)]==='getCalendarNames')try{const _0x159e23=await this[_0x34f9dd(0x1a7)](_0x34f9dd(0x1db),_0x34f9dd(0x112),{'startkey':_0x34f9dd(0x1c8),'endkey':_0x34f9dd(0xdb)}),_0xbb2038=new Set();if(_0x159e23&&_0x159e23[_0x34f9dd(0xe7)])for(const _0x71e822 of _0x159e23[_0x34f9dd(0xe7)]){const _0x12ff3a=_0x71e822['id'][_0x34f9dd(0xe8)](_0x34f9dd(0xde),''),_0x2e9249=await this[_0x34f9dd(0x230)](_0x12ff3a+_0x34f9dd(0x16d));let _0x1b0dfd=![];if(_0x2e9249&&_0x2e9249['val']){const _0x2236c3=typeof _0x2e9249[_0x34f9dd(0x203)]===_0x34f9dd(0x1b2)?JSON[_0x34f9dd(0x13b)](_0x2e9249['val']):_0x2e9249['val'];Array[_0x34f9dd(0x1f8)](_0x2236c3)&&_0x2236c3[_0x34f9dd(0x1ba)](_0x1b9f59=>{const _0x153d98=_0x34f9dd;_0x1b9f59[_0x153d98(0x17b)]&&(_0xbb2038[_0x153d98(0x20e)](_0x1b9f59[_0x153d98(0x17b)]),_0x1b0dfd=!![]);});}!_0x1b0dfd&&_0xbb2038[_0x34f9dd(0x20e)](_0x12ff3a);}const _0xbdc9c3=Array[_0x34f9dd(0x1ab)](_0xbb2038);if(_0xbdc9c3[_0x34f9dd(0x13f)]===0x0)_0xbdc9c3[_0x34f9dd(0xd9)](_0x34f9dd(0x209));this['sendTo'](_0x368f2a['from'],_0x368f2a['command'],{'success':!![],'names':_0xbdc9c3},_0x368f2a[_0x34f9dd(0x116)]);}catch(_0x195dcd){this[_0x34f9dd(0xd7)](_0x368f2a[_0x34f9dd(0x1ab)],_0x368f2a[_0x34f9dd(0x107)],{'success':![],'error':_0x34f9dd(0x111)+_0x195dcd[_0x34f9dd(0x1b1)]},_0x368f2a[_0x34f9dd(0x116)]);}else{if(_0x368f2a[_0x34f9dd(0x107)]==='refreshCalendar')try{await automation[_0x34f9dd(0x105)](this),this[_0x34f9dd(0xd7)](_0x368f2a['from'],_0x368f2a[_0x34f9dd(0x107)],{'success':!![]},_0x368f2a['callback']);}catch(_0x1c1ca0){this['log'][_0x34f9dd(0x221)](_0x34f9dd(0xf0)+_0x1c1ca0[_0x34f9dd(0x1b1)]),this[_0x34f9dd(0xd7)](_0x368f2a['from'],_0x368f2a[_0x34f9dd(0x107)],{'success':![],'error':_0x1c1ca0[_0x34f9dd(0x1b1)]},_0x368f2a[_0x34f9dd(0x116)]);}else{if(_0x368f2a['command']===_0x34f9dd(0x1a5))try{const _0x4831a9=_0x368f2a[_0x34f9dd(0x1b1)]?_0x368f2a[_0x34f9dd(0x1b1)][_0x34f9dd(0x1e2)]:'';if(!_0x4831a9)throw new Error(_0x34f9dd(0x1d2));const _0x29d22a=new GoogleGenerativeAI(_0x4831a9),_0x477e8b=_0x29d22a['getGenerativeModel']({'model':GEMINI_MODEL}),_0x2dbe4f=await _0x477e8b[_0x34f9dd(0x196)](_0x34f9dd(0x1e8)),_0x5cd651=await _0x2dbe4f[_0x34f9dd(0x161)],_0x46c1e2=_0x5cd651[_0x34f9dd(0xf7)]();this[_0x34f9dd(0xd7)](_0x368f2a['from'],_0x368f2a[_0x34f9dd(0x107)],{'success':!![],'message':'Verbindung\x20erfolgreich:\x20'+_0x46c1e2['substring'](0x0,0x14)+'...'},_0x368f2a[_0x34f9dd(0x116)]);}catch(_0x1a2805){this[_0x34f9dd(0xd7)](_0x368f2a[_0x34f9dd(0x1ab)],_0x368f2a[_0x34f9dd(0x107)],{'success':![],'message':_0x1a2805[_0x34f9dd(0x1b1)]},_0x368f2a[_0x34f9dd(0x116)]);}else{if(_0x368f2a[_0x34f9dd(0x107)]==='testContext')try{const _0x2f6cc4=await this[_0x34f9dd(0xd8)](),_0x29c0bc=await this[_0x34f9dd(0x1a7)](_0x34f9dd(0x1db),_0x34f9dd(0x112),{'startkey':'system.adapter.ical.','endkey':_0x34f9dd(0xdb)}),_0x431a54=_0x29c0bc&&_0x29c0bc['rows']?_0x29c0bc['rows'][_0x34f9dd(0x13f)]:0x0;this[_0x34f9dd(0xd7)](_0x368f2a[_0x34f9dd(0x1ab)],_0x368f2a[_0x34f9dd(0x107)],{'success':!![],'weather':_0x34f9dd(0x1a8)+_0x2f6cc4+',\x20Temp:\x20'+(this[_0x34f9dd(0x142)][this[_0x34f9dd(0x1b8)][_0x34f9dd(0x139)]]||'?')+'¬∞C','calendar':_0x431a54+_0x34f9dd(0x210)},_0x368f2a[_0x34f9dd(0x116)]);}catch(_0x56536a){this[_0x34f9dd(0xd7)](_0x368f2a[_0x34f9dd(0x1ab)],_0x368f2a[_0x34f9dd(0x107)],{'success':![]},_0x368f2a[_0x34f9dd(0x116)]);}}}}}}}}}}}['runPythonHealthCheck'](){const _0xd3e7e1=a0_0xae3d61;if(!this[_0xd3e7e1(0x174)]['health'])return;this[_0xd3e7e1(0x20c)][_0xd3e7e1(0x1f2)](_0xd3e7e1(0x157));try{const _0xec73c4=this[_0xd3e7e1(0x14c)]||[];pythonBridge[_0xd3e7e1(0x178)](this,_0xd3e7e1(0x16f),{'events':_0xec73c4});}catch(_0x4c82f3){this[_0xd3e7e1(0x20c)][_0xd3e7e1(0x221)](_0xd3e7e1(0x232));}}async[a0_0xae3d61(0x132)](_0x590d74,_0x217523){const _0x5499e0=a0_0xae3d61;if(!_0x217523||this[_0x5499e0(0x1f5)])return;if(_0x590d74[_0x5499e0(0xd2)](_0x5499e0(0x145))&&_0x590d74[_0x5499e0(0x1f9)](_0x5499e0(0x1fa))&&_0x217523['val'])return;if(this[_0x5499e0(0x1b8)][_0x5499e0(0x184)]&&_0x590d74===this['config']['infrasoundSensorId']&&this[_0x5499e0(0x174)][_0x5499e0(0x16a)]){this[_0x5499e0(0x1aa)](_0x217523[_0x5499e0(0x203)]);return;}if(_0x217523[_0x5499e0(0x212)]&&_0x590d74[_0x5499e0(0x1f9)](_0x5499e0(0x1b0)))return;if(_0x590d74===this[_0x5499e0(0x1f0)]+_0x5499e0(0x186)){if(_0x217523[_0x5499e0(0x203)]&&Object['values'](setup[_0x5499e0(0x120)])[_0x5499e0(0xd2)](_0x217523[_0x5499e0(0x203)])){this[_0x5499e0(0x225)]=_0x217523[_0x5499e0(0x203)];if(_0x217523[_0x5499e0(0x203)]===setup['SYSTEM_MODES'][_0x5499e0(0x215)])await recorder[_0x5499e0(0x10a)](this,![]);else await recorder[_0x5499e0(0x10a)](this,!![]);if(this['isProVersion']){let _0x2ff6ec=![],_0x2eac34=0x0,_0xa3c967='manual';if(this[_0x5499e0(0x225)]===_0x5499e0(0x1e4))_0x2ff6ec=!![],_0x2eac34=0x168,_0xa3c967=_0x5499e0(0x18d);else this[_0x5499e0(0x225)]===_0x5499e0(0x185)&&(_0x2ff6ec=!![],_0x2eac34=0x5a0,_0xa3c967=_0x5499e0(0x11e));pythonBridge[_0x5499e0(0x178)](this,_0x5499e0(0x1b7),{'active':_0x2ff6ec,'duration':_0x2eac34,'label':_0xa3c967}),await this[_0x5499e0(0x155)](_0x5499e0(0x195),{'val':JSON[_0x5499e0(0x131)]({'active':_0x2ff6ec,'label':_0xa3c967,'timestamp':Date[_0x5499e0(0x17c)]()}),'ack':!![]});}}if(!_0x217523[_0x5499e0(0x212)])this[_0x5499e0(0x192)](_0x590d74,{'val':this[_0x5499e0(0x225)],'ack':!![]});return;}if(_0x590d74['endsWith'](_0x5499e0(0x11b))&&_0x217523[_0x5499e0(0x212)])this[_0x5499e0(0x127)](_0x217523[_0x5499e0(0x203)]);if(_0x590d74['endsWith'](_0x5499e0(0x193))&&_0x217523[_0x5499e0(0x212)]&&this[_0x5499e0(0x174)][_0x5499e0(0xdf)])automation[_0x5499e0(0x13d)](this);if(!_0x217523[_0x5499e0(0x212)]){if(_0x590d74[_0x5499e0(0xd2)](_0x5499e0(0x1ea))&&_0x217523['val']){this[_0x5499e0(0x192)](_0x590d74,{'val':![],'ack':!![]}),aiAgent[_0x5499e0(0x22c)](this);return;}if(_0x590d74[_0x5499e0(0xd2)]('triggerDailyDigest')&&_0x217523[_0x5499e0(0x203)]){this[_0x5499e0(0x192)](_0x590d74,{'val':![],'ack':!![]});if(this['isProVersion'])aiAgent['createDailyDigest'](this,pythonBridge);return;}if(_0x590d74['includes'](_0x5499e0(0x1bf))&&_0x217523['val']){this['setState'](_0x590d74,{'val':![],'ack':!![]}),aiAgent['sendMorningBriefing'](this);return;}if(_0x590d74[_0x5499e0(0xd2)](_0x5499e0(0x150))&&_0x217523[_0x5499e0(0x203)]){this['setState'](_0x590d74,{'val':![],'ack':!![]}),aiAgent['executeAutomationAction'](this);return;}if(_0x590d74[_0x5499e0(0xd2)](_0x5499e0(0x1bc))&&_0x217523['val']){this[_0x5499e0(0x192)](_0x590d74,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x1deda5=await this[_0x5499e0(0x16c)](_0x5499e0(0x12f));if(_0x1deda5&&_0x1deda5[_0x5499e0(0x203)]){const _0x8db464=JSON['parse'](_0x1deda5[_0x5499e0(0x203)]);this[_0x5499e0(0x155)](_0x5499e0(0x17e),{'val':_0x5499e0(0x113),'ack':!![]}),pythonBridge[_0x5499e0(0x178)](this,_0x5499e0(0x1c4),{'sequences':_0x8db464});}}catch(_0x620d8){}return;}if(_0x590d74['includes'](_0x5499e0(0x1e5))&&_0x217523[_0x5499e0(0x203)]){this[_0x5499e0(0x192)](_0x590d74,{'val':![],'ack':!![]});if(this[_0x5499e0(0xf1)])try{this[_0x5499e0(0xfb)]();const _0x30d228=await this[_0x5499e0(0x16c)](_0x5499e0(0x10b));if(_0x30d228&&_0x30d228[_0x5499e0(0x203)])pythonBridge[_0x5499e0(0x178)](this,_0x5499e0(0x233),{'digests':JSON[_0x5499e0(0x13b)](_0x30d228[_0x5499e0(0x203)])});aiAgent[_0x5499e0(0x1cf)](this,_0x5499e0(0x103)),setTimeout(()=>aiAgent[_0x5499e0(0x1cf)](this,_0x5499e0(0x1ca)),0x2ee0);}catch(_0x50bba7){}return;}if(_0x590d74['includes'](_0x5499e0(0x1c0))&&_0x217523[_0x5499e0(0x203)]){this['setState'](_0x590d74,{'val':![],'ack':!![]}),await this['triggerEnergyPrediction']();return;}if(_0x590d74[_0x5499e0(0xd2)](_0x5499e0(0x1b5))&&_0x217523[_0x5499e0(0x203)]){this[_0x5499e0(0x192)](_0x590d74,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x107c57=await this[_0x5499e0(0x16c)](_0x5499e0(0x1d7));if(_0x107c57&&_0x107c57[_0x5499e0(0x203)]){const _0x3a9a63={};if(this[_0x5499e0(0x1b8)][_0x5499e0(0x1bd)])this[_0x5499e0(0x1b8)][_0x5499e0(0x1bd)]['forEach'](_0x5bde4b=>{const _0x249655=_0x5499e0;if(_0x5bde4b['id']&&_0x5bde4b['type'])_0x3a9a63[_0x5bde4b['id']]=_0x5bde4b[_0x249655(0x22a)];});pythonBridge['send'](this,'TRAIN_COMFORT',{'events':JSON[_0x5499e0(0x13b)](_0x107c57[_0x5499e0(0x203)]),'deviceMap':_0x3a9a63});}}catch(_0x19a75e){}return;}if(_0x590d74[_0x5499e0(0xd2)](_0x5499e0(0x14a))&&_0x217523[_0x5499e0(0x203)]){this[_0x5499e0(0x192)](_0x590d74,{'val':![],'ack':!![]}),topology['updateTopology'](this);if(this[_0x5499e0(0xf1)])try{const _0x6ff071=await this[_0x5499e0(0x16c)](_0x5499e0(0x12f));if(_0x6ff071&&_0x6ff071[_0x5499e0(0x203)])pythonBridge[_0x5499e0(0x178)](this,_0x5499e0(0x165),{'sequences':JSON[_0x5499e0(0x13b)](_0x6ff071[_0x5499e0(0x203)])});}catch(_0x16767d){}return;}}const _0x2abcb5=(this['config'][_0x5499e0(0x1bd)]||[])[_0x5499e0(0x1fb)](_0x598442=>_0x598442['id']===_0x590d74);if(_0x2abcb5){const _0x4836d0=await recorder[_0x5499e0(0xfe)](this,_0x590d74,_0x217523,_0x2abcb5);_0x4836d0&&this[_0x5499e0(0x192)]('analysis.visualization.pulse',{'val':Date['now'](),'ack':!![]});_0x4836d0&&_0x4836d0[_0x5499e0(0x22a)]===_0x5499e0(0x1ce)&&_0x4836d0['location']&&this[_0x5499e0(0xf1)]&&deadMan[_0x5499e0(0x207)](this,_0x4836d0[_0x5499e0(0xfc)]);_0x217523[_0x5499e0(0x203)]&&(_0x217523[_0x5499e0(0x203)]===!![]||_0x217523[_0x5499e0(0x203)]===0x1||String(_0x217523['val'])[_0x5499e0(0x12e)]()===_0x5499e0(0x21f))&&(_0x2abcb5[_0x5499e0(0x22a)]&&(_0x2abcb5[_0x5499e0(0x22a)]['includes'](_0x5499e0(0x118))||_0x2abcb5[_0x5499e0(0x22a)]['includes'](_0x5499e0(0x176)))&&this[_0x5499e0(0xf9)](_0x2abcb5));if(_0x2abcb5[_0x5499e0(0x22a)]===_0x5499e0(0x228)||_0x2abcb5[_0x5499e0(0x22a)]==='thermostat'){if(this[_0x5499e0(0x174)][_0x5499e0(0xdf)])automation[_0x5499e0(0xff)](this);}}}async[a0_0xae3d61(0x127)](_0x4d0a75){const _0x4b533c=a0_0xae3d61;if(!this['memoryCache']||Date['now']()-this[_0x4b533c(0x129)]>0x493e0)return;try{const _0x1b227c=JSON[_0x4b533c(0x13b)](_0x4d0a75),_0x1b2457=this[_0x4b533c(0x1ff)]['sources'];let _0x5deadf=![];for(const _0x4e4126 in _0x1b2457){if(_0x1b2457[_0x4e4126][_0x4b533c(0xd2)]('AI')&&_0x1b227c[_0x4e4126]&&!_0x1b227c[_0x4e4126][_0x4b533c(0xd2)]('AI')){_0x5deadf=!![];break;}}_0x5deadf&&(await this[_0x4b533c(0x155)](_0x4b533c(0x193),{'val':JSON[_0x4b533c(0x131)](this[_0x4b533c(0x1ff)][_0x4b533c(0x14b)]),'ack':!![]}),await this[_0x4b533c(0x155)](_0x4b533c(0x11b),{'val':JSON['stringify'](this[_0x4b533c(0x1ff)][_0x4b533c(0x1c6)]),'ack':!![]}));}catch(_0x2d806f){}}async[a0_0xae3d61(0x18c)](){const _0x2433c2=a0_0xae3d61;try{const _0x4c4163=await this['getStateAsync'](setup[_0x2433c2(0x220)]);if(_0x4c4163&&_0x4c4163['val'])this['currentSystemMode']=_0x4c4163[_0x2433c2(0x203)];}catch(_0x2c122a){this[_0x2433c2(0x225)]=setup[_0x2433c2(0x120)][_0x2433c2(0x21a)];}}async['checkWifiPresence'](){const _0x328dcb=a0_0xae3d61,_0x19d0a6=this[_0x328dcb(0x1b8)][_0x328dcb(0x15e)]||[];if(_0x19d0a6[_0x328dcb(0x13f)]===0x0)return![];const _0x1c507f=[],_0x325fde=Date['now'](),_0x2c4613=0x5*0x3c*0x3e8;for(const _0x504bb0 of _0x19d0a6){try{let _0x755a0=![];try{const _0x2ba584=await this[_0x328dcb(0x230)](_0x504bb0+_0x328dcb(0x1b9));if(_0x2ba584&&_0x2ba584[_0x328dcb(0x203)]===!![])_0x755a0=!![];}catch(_0x30d3f1){}if(!_0x755a0)try{const _0x229f98=await this[_0x328dcb(0x230)](_0x504bb0+_0x328dcb(0x1d3));if(_0x229f98&&_0x229f98['ts']){const _0x17d337=_0x325fde-_0x229f98['ts'];if(_0x17d337<_0x2c4613)_0x755a0=!![];}}catch(_0x7597e5){}if(!_0x755a0)try{const _0x307ed4=await this[_0x328dcb(0x230)](_0x504bb0+_0x328dcb(0x14d));if(_0x307ed4&&typeof _0x307ed4[_0x328dcb(0x203)]===_0x328dcb(0x204)&&_0x307ed4[_0x328dcb(0x203)]>0x0)_0x755a0=!![];}catch(_0x518a20){}if(!_0x755a0)try{const _0x54a977=await this[_0x328dcb(0x230)](_0x504bb0);if(_0x54a977){const _0x10b08e=_0x325fde-(_0x54a977['ts']||0x0);_0x10b08e<_0x2c4613&&(_0x54a977[_0x328dcb(0x203)]===!![]||_0x54a977[_0x328dcb(0x203)]===_0x328dcb(0x22f)||_0x54a977[_0x328dcb(0x203)]===0x1)&&(_0x755a0=!![]);}}catch(_0x3d3057){}if(_0x755a0){const _0x1fb3e2=_0x504bb0[_0x328dcb(0x1c2)]('.'),_0x2ba242=_0x1fb3e2[_0x1fb3e2['length']-0x1]||_0x504bb0;_0x1c507f['push'](_0x2ba242);}}catch(_0x37d674){this[_0x328dcb(0x20c)][_0x328dcb(0x221)]('checkWifiPresence:\x20Error\x20checking\x20'+_0x504bb0+':\x20'+_0x37d674[_0x328dcb(0x1b1)]);}}const _0x4f4c41=_0x1c507f['length']>0x0?_0x1c507f[_0x328dcb(0x146)](',\x20'):_0x328dcb(0x140);return await this[_0x328dcb(0x155)](_0x328dcb(0x173),{'val':_0x4f4c41,'ack':!![]}),_0x1c507f['length']>0x0;}async[a0_0xae3d61(0xe6)](){const _0x39da3c=a0_0xae3d61;await aiAgent['runGeminiAnalysis'](this);this[_0x39da3c(0x174)][_0x39da3c(0x109)]&&(this[_0x39da3c(0x163)](),this[_0x39da3c(0xdc)]());if(this['activeModules'][_0x39da3c(0xdf)])this['triggerEnergyPrediction']();}async[a0_0xae3d61(0xd8)](){const _0x56b8cf=a0_0xae3d61,_0x3e12f7=['weatherunderground.0','accuweather.0',_0x56b8cf(0x187)],_0x31d340=['forecast.current.weather',_0x56b8cf(0x169),_0x56b8cf(0x223)];for(const _0x3de202 of _0x3e12f7){for(const _0x2d94d1 of _0x31d340){try{const _0x601f42=_0x3de202+'.'+_0x2d94d1,_0x5828cc=await this[_0x56b8cf(0x230)](_0x601f42);if(_0x5828cc&&_0x5828cc['val']){const _0x23765b=String(_0x5828cc[_0x56b8cf(0x203)])['toLowerCase']();if(_0x23765b[_0x56b8cf(0xd2)](_0x56b8cf(0x22d))||_0x23765b[_0x56b8cf(0xd2)]('heiter')||_0x23765b[_0x56b8cf(0xd2)]('klar')||_0x23765b['includes'](_0x56b8cf(0x160))||_0x23765b[_0x56b8cf(0xd2)](_0x56b8cf(0x1da)))return this[_0x56b8cf(0x20c)]['debug'](_0x56b8cf(0x182)+_0x601f42),!![];}}catch(_0x2ce45b){}}}return![];}['triggerGaitAnalysis'](){const _0x59939d=a0_0xae3d61;if(!this[_0x59939d(0xf1)])return;try{this['getStateAsync']('LTM.trainingData.sequences',(_0x19f1dc,_0x54d899)=>{const _0x3620dd=_0x59939d;if(_0x19f1dc||!_0x54d899||!_0x54d899[_0x3620dd(0x203)])return;try{const _0x4fe438=JSON[_0x3620dd(0x13b)](_0x54d899['val']);if(!_0x4fe438||_0x4fe438[_0x3620dd(0x13f)]===0x0)return;pythonBridge[_0x3620dd(0x178)](this,_0x3620dd(0x222),{'sequences':_0x4fe438}),this[_0x3620dd(0x20c)][_0x3620dd(0x1f2)](_0x3620dd(0x226)+_0x4fe438[_0x3620dd(0x13f)]+'\x20sequences');}catch(_0xb9a429){this[_0x3620dd(0x20c)][_0x3620dd(0x221)]('triggerGaitAnalysis\x20parse\x20error:\x20'+_0xb9a429[_0x3620dd(0x1b1)]);}});}catch(_0x105086){this[_0x59939d(0x20c)][_0x59939d(0x221)](_0x59939d(0xfd)+_0x105086[_0x59939d(0x1b1)]);}}async['triggerEnergyPrediction'](){const _0x567e77=a0_0xae3d61;if(!this[_0x567e77(0xf1)]||!this[_0x567e77(0x174)][_0x567e77(0xdf)])return;try{const _0x69c9dd={},_0x34c0eb={},_0xa2e832=this[_0x567e77(0x1b8)][_0x567e77(0x1bd)]||[];for(const _0x531b49 of _0xa2e832){if((_0x531b49[_0x567e77(0x22a)]===_0x567e77(0x228)||_0x531b49[_0x567e77(0x22a)]===_0x567e77(0x199))&&_0x531b49[_0x567e77(0xfc)])try{const _0x224cbb=await this[_0x567e77(0x230)](_0x531b49['id']);_0x224cbb&&typeof _0x224cbb[_0x567e77(0x203)]===_0x567e77(0x204)&&(_0x69c9dd[_0x531b49[_0x567e77(0xfc)]]=_0x224cbb[_0x567e77(0x203)],_0x34c0eb[_0x531b49[_0x567e77(0xfc)]]=_0x531b49[_0x567e77(0x130)]||![]);}catch(_0x29ae70){}}let _0x194934=0xa;if(this['config']['weatherTempId'])try{const _0x2507fc=await this[_0x567e77(0x230)](this[_0x567e77(0x1b8)][_0x567e77(0x1cb)]);if(_0x2507fc&&typeof _0x2507fc[_0x567e77(0x203)]===_0x567e77(0x204))_0x194934=_0x2507fc['val'];}catch(_0x4027bc){}const _0x4ae4fe=await this[_0x567e77(0xd8)]();let _0x4780ba={};try{const _0x525e7c=await this[_0x567e77(0x16c)](_0x567e77(0x1ac));if(_0x525e7c&&_0x525e7c[_0x567e77(0x203)])_0x4780ba=JSON[_0x567e77(0x13b)](_0x525e7c[_0x567e77(0x203)]);}catch(_0x2c9306){}pythonBridge['send'](this,'PREDICT_ENERGY',{'current_temps':_0x69c9dd,'t_out':_0x194934,'is_sunny':_0x4ae4fe,'solar_flags':_0x34c0eb,'warmup_targets':_0x4780ba}),this[_0x567e77(0x20c)][_0x567e77(0x102)](_0x567e77(0xcf)+Object[_0x567e77(0x1d8)](_0x69c9dd)[_0x567e77(0x13f)]+_0x567e77(0x158));}catch(_0x51d3fd){this['log']['warn']('triggerEnergyPrediction\x20Error:\x20'+_0x51d3fd[_0x567e77(0x1b1)]);}}[a0_0xae3d61(0x163)](){const _0x16fff8=a0_0xae3d61;if(!this[_0x16fff8(0x14c)]||this[_0x16fff8(0x14c)][_0x16fff8(0x13f)]===0x0)return;const _0x16198a=new Array(0x30)['fill'](0x0),_0x476dae=Array[_0x16fff8(0x1ab)]({'length':0x30},()=>[]),_0x52f7e1=new Date()['setHours'](0x0,0x0,0x0,0x0);this['rawEventLog'][_0x16fff8(0x1ba)](_0x23a706=>{const _0x435d9f=_0x16fff8,_0x282831=new Date(_0x23a706[_0x435d9f(0x1d5)]);if(_0x282831[_0x435d9f(0x15b)]()>=_0x52f7e1){const _0x3356b8=_0x282831[_0x435d9f(0x1fd)](),_0x1c1da1=_0x282831[_0x435d9f(0x1a9)](),_0xcea3c=_0x3356b8*0x2+Math[_0x435d9f(0x214)](_0x1c1da1/0x1e);_0xcea3c>=0x0&&_0xcea3c<0x30&&(_0x16198a[_0xcea3c]++,_0x476dae[_0xcea3c][_0x435d9f(0xd9)]({'time':_0x282831[_0x435d9f(0x170)](_0x435d9f(0x211),{'hour':_0x435d9f(0xf2),'minute':'2-digit'}),'location':_0x23a706[_0x435d9f(0xfc)]||_0x435d9f(0x159),'type':_0x23a706[_0x435d9f(0x22a)]||_0x435d9f(0x1e0)}));}}),this[_0x16fff8(0x155)](_0x16fff8(0x1f3),{'val':JSON['stringify'](_0x16198a),'ack':!![]}),this[_0x16fff8(0x155)](_0x16fff8(0x1d0),{'val':JSON[_0x16fff8(0x131)](_0x476dae),'ack':!![]});}async['handleInfrasound'](_0x1af476){}async[a0_0xae3d61(0x21b)](_0x5d3a8c,_0x774f3a){}async['analyzeWindowOpening'](_0x426b2e){const _0x4c76a4=a0_0xae3d61;if(!_0x426b2e||!_0x426b2e[_0x4c76a4(0xfc)])return;try{const _0x2a1b03=(this[_0x4c76a4(0x1b8)][_0x4c76a4(0x1bd)]||[])[_0x4c76a4(0x106)](_0x2a55fb=>_0x2a55fb['location']===_0x426b2e[_0x4c76a4(0xfc)]&&(_0x2a55fb[_0x4c76a4(0x22a)]===_0x4c76a4(0x228)||_0x2a55fb[_0x4c76a4(0x22a)]==='thermostat'));if(_0x2a1b03[_0x4c76a4(0x13f)]===0x0)return;const _0x3f6cac=await this[_0x4c76a4(0x230)](_0x2a1b03[0x0]['id']);if(!_0x3f6cac||typeof _0x3f6cac[_0x4c76a4(0x203)]!==_0x4c76a4(0x204))return;const _0x279cd0=_0x3f6cac['val'];let _0x584cc1=null;if(this[_0x4c76a4(0x1b8)][_0x4c76a4(0x1cb)]){const _0x482e0a=await this[_0x4c76a4(0x230)](this['config'][_0x4c76a4(0x1cb)]);_0x482e0a&&typeof _0x482e0a[_0x4c76a4(0x203)]===_0x4c76a4(0x204)&&(_0x584cc1=_0x482e0a[_0x4c76a4(0x203)]);}if(_0x584cc1!==null){const _0x5d014a=Math['abs'](_0x279cd0-_0x584cc1);_0x5d014a>0x3&&(this['log']['debug'](_0x4c76a4(0x138)+_0x426b2e['location']+_0x4c76a4(0x10f)+_0x5d014a[_0x4c76a4(0xe9)](0x1)+'¬∞C\x20(Innen:\x20'+_0x279cd0+'¬∞C,\x20Au√üen:\x20'+_0x584cc1+_0x4c76a4(0x1ed)),await this[_0x4c76a4(0x155)](_0x4c76a4(0x115),{'val':JSON['stringify']({'room':_0x426b2e[_0x4c76a4(0xfc)],'timestamp':Date[_0x4c76a4(0x17c)](),'tempDiff':_0x5d014a['toFixed'](0x1),'recommendation':_0x5d014a>0x5?_0x4c76a4(0x198):'L√ºften\x20empfohlen'}),'ack':!![]}));}}catch(_0x4d24ca){this[_0x4c76a4(0x20c)]['warn'](_0x4c76a4(0x12d)+_0x4d24ca[_0x4c76a4(0x1b1)]);}}async['appendToLog'](_0x7c5f07){}[a0_0xae3d61(0x164)](_0x1f3f6b){}}if(require[a0_0xae3d61(0x231)]!==module)module['exports']=_0x39d5f8=>new CogniLiving(_0x39d5f8);else new CogniLiving();