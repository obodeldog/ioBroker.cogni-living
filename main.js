const a0_0x5c43b6=a0_0x1e7a;(function(_0x107157,_0x16e75f){const _0x1f0c4d=a0_0x1e7a,_0x52407f=_0x107157();while(!![]){try{const _0x1fdd6a=parseInt(_0x1f0c4d(0x1a0))/0x1*(-parseInt(_0x1f0c4d(0x23f))/0x2)+-parseInt(_0x1f0c4d(0x28f))/0x3*(parseInt(_0x1f0c4d(0x2ce))/0x4)+-parseInt(_0x1f0c4d(0x280))/0x5+parseInt(_0x1f0c4d(0x258))/0x6*(parseInt(_0x1f0c4d(0x1ca))/0x7)+parseInt(_0x1f0c4d(0x179))/0x8*(parseInt(_0x1f0c4d(0x148))/0x9)+parseInt(_0x1f0c4d(0x22a))/0xa+parseInt(_0x1f0c4d(0x1d2))/0xb;if(_0x1fdd6a===_0x16e75f)break;else _0x52407f['push'](_0x52407f['shift']());}catch(_0x307c81){_0x52407f['push'](_0x52407f['shift']());}}}(a0_0x26de,0xe5463));const a0_0x502ed1=(function(){let _0x13bb3c=!![];return function(_0x164ba5,_0x3a9b9b){const _0xe4c28b=_0x13bb3c?function(){const _0xd9d907=a0_0x1e7a;if(_0x3a9b9b){const _0x1b529e=_0x3a9b9b[_0xd9d907(0x2e3)](_0x164ba5,arguments);return _0x3a9b9b=null,_0x1b529e;}}:function(){};return _0x13bb3c=![],_0xe4c28b;};}()),a0_0x416420=a0_0x502ed1(this,function(){const _0x1a5844=a0_0x1e7a;return a0_0x416420[_0x1a5844(0x2bd)]()[_0x1a5844(0x288)](_0x1a5844(0x2c2))[_0x1a5844(0x2bd)]()[_0x1a5844(0x2cf)](a0_0x416420)[_0x1a5844(0x288)](_0x1a5844(0x2c2));});a0_0x416420();'use strict';const utils=require('@iobroker/adapter-core'),{GoogleGenerativeAI}=require('@google/generative-ai'),schedule=require(a0_0x5c43b6(0x165)),{spawn,exec}=require(a0_0x5c43b6(0x17a)),path=require(a0_0x5c43b6(0x29e)),fs=require('fs'),HISTORY_MAX_SIZE=0x32,RAW_LOG_MAX_SIZE=0x5dc,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL=a0_0x5c43b6(0x2a5),LTM_SCHEDULE=a0_0x5c43b6(0x23e),MODE_RESET_SCHEDULE='0\x204\x20*\x20*\x20*',SEQUENCE_TIMEOUT_MS=0x5*0x3c*0x3e8,MAX_TRAINING_SET_SIZE=0x1f4,THERMO_LOG_SIZE=0x3e8,EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,LTM_DP_RAW_LOG=a0_0x5c43b6(0x204),LTM_DP_DAILY_DIGESTS='LTM.dailyDigests',LTM_DP_STATUS=a0_0x5c43b6(0x282),LTM_DP_TRIGGER_DIGEST=a0_0x5c43b6(0x1f6),LTM_DP_BASELINE_STATUS='LTM.baselineStatus',LTM_DP_DRIFT_CHANNEL=a0_0x5c43b6(0x1c8),LTM_DP_DRIFT_STATUS=a0_0x5c43b6(0x16b),LTM_DP_DRIFT_DETAILS='LTM.driftAnalysis.driftDetails',LTM_DP_DRIFT_LAST_CHECK=a0_0x5c43b6(0x1e2),SYSTEM_DP_MODE='system.mode',SYSTEM_MODES={'NORMAL':a0_0x5c43b6(0x2a9),'VACATION':a0_0x5c43b6(0x2c7),'PARTY':a0_0x5c43b6(0x146),'GUEST':a0_0x5c43b6(0x1a1)},AUTO_RESET_MODES=[SYSTEM_MODES[a0_0x5c43b6(0x23d)],SYSTEM_MODES['GUEST']],PERSONA_MAPPING={'generic':a0_0x5c43b6(0x1f9),'senior_aal':'PRIORITÃ„T:\x20Gesundheit/AAL.','family':a0_0x5c43b6(0x169),'single_comfort':a0_0x5c43b6(0x1ee),'security':a0_0x5c43b6(0x1b5)},ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0},BAD_NAMES=[a0_0x5c43b6(0x2a2),a0_0x5c43b6(0x271),a0_0x5c43b6(0x15c),a0_0x5c43b6(0x170),a0_0x5c43b6(0x2b0),a0_0x5c43b6(0x13c),'on',a0_0x5c43b6(0x208),a0_0x5c43b6(0x27b),a0_0x5c43b6(0x281),'shutter','blind','cover','status',a0_0x5c43b6(0x2e2),'presence','occupancy',a0_0x5c43b6(0x1d5),a0_0x5c43b6(0x182),'power',a0_0x5c43b6(0x1e6),a0_0x5c43b6(0x2d8),a0_0x5c43b6(0x225),'actual_temperature','set_temperature'],ADAPTER_BLACKLIST=[a0_0x5c43b6(0x1f1),a0_0x5c43b6(0x293),a0_0x5c43b6(0x2d3),a0_0x5c43b6(0x18d),a0_0x5c43b6(0x1ab),a0_0x5c43b6(0x1b1),a0_0x5c43b6(0x137),a0_0x5c43b6(0x145),'echarts.','javascript.',a0_0x5c43b6(0x22e)],IS_WIN=process[a0_0x5c43b6(0x23c)]==='win32',PERSISTENT_DIR=path['join'](__dirname,a0_0x5c43b6(0x19a)),VENV_PATH=PERSISTENT_DIR,PYTHON_EXE=IS_WIN?path[a0_0x5c43b6(0x25f)](VENV_PATH,a0_0x5c43b6(0x1a3),a0_0x5c43b6(0x1a2)):path[a0_0x5c43b6(0x25f)](VENV_PATH,'bin',a0_0x5c43b6(0x243)),PIP_EXE=IS_WIN?path['join'](VENV_PATH,a0_0x5c43b6(0x1a3),a0_0x5c43b6(0x1bd)):path[a0_0x5c43b6(0x25f)](VENV_PATH,'bin',a0_0x5c43b6(0x2cc));let activeSequence=[],sequenceTimer=null,panicMode=![];function a0_0x26de(){const _0x2b96dd=['expire','val','Trigger\x20Action','KI-Modell\x20nicht\x20initialisiert','motion','apply','icons-mfd.','\x20->\x20','dimmer','setStateAsync','fenster','brightness','Who\x20is\x20present?','Reset\x20Sched\x20Error:\x20','telegram','timestamp','main','unshift','subscribeStates','Sec-Training\x20started...','flot.','party','Target\x20Value','36ckSQjW','[RESULT]','isPresent','analysis.training.triggerSecurity','automationProposal','is_anomaly','Cogni-Living','parse','NORMAL','analysis.automation.targetValue','common','Started...','OK:\x20','rmSync','LTM\x20Sched\x20Error:\x20','enum.functions.*','genAI','COGNI_REQUEST_CALL','application/json','analysis.energy.heatingScore','state','from','analysis.energy','simulateButler','notifyEmailEnabled','Trend','enum','analysis.triggerBriefing','.forecast.current.temp','node-schedule','status','forEach','window','Fokus\x20auf\x20Familienroutinen.','Alert\x20Status','LTM.driftAnalysis.baselineDrift','slice','Deaktiviert\x20(Pro-Feature)','logDuplicates','Installing\x20pip\x20packages...','level','HEALTH_TRAIN_RESULT','service.py','startsWith','\x20Tage)','systemUUID','ltmStbWindowDays','âš ï¸\x20SECURITY\x20ALARM:\x20','getLtmData','1396152kiWIKB','child_process','isProVersion','analysis.automation.triggerAction','lastAlertState','notifyPushoverInstance','ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','getTime','toLocaleTimeString','humidity','Vom\x20Benutzer\x20bestÃ¤tigt\x20(OK).','autoApply','isGracePeriodActive','Anomaly\x20Detected','Digest','cogni-living','livingContext','object','heating','stdin','vis.','getForeignObjectAsync','Description','triggerBriefing','writable','json','Target\x20ID','isAlert','accuweather','WiFi\x20Presence\x20detected.','setForeignStateAsync','isEmergency','triggerDailyDigest','../../iobroker-data/cogni-living-venv','licht','substring','notifyTelegramRecipient','analysis.security.currentThreshold','notifyPushoverRecipient','383PeHKKM','guest','python.exe','Scripts','analysis.isAlert','system.isPresent','namespace','insulation','map','analysis.alertReason','stdout','history.','getDate','08:00','exitGraceTimer','analysisInterval','ltmLtbWindowDays','material.','success','analysis.health.isAnomaly','sound','PRIORITÃ„T:\x20Sicherheit.','presence','briefingJob','ðŸ\x20Python\x20Pong','stateChange','âœ…\x20Alles\x20OK\x20(Reset)','ðŸ“ž\x20RÃ¼ckruf\x20anfordern','includes','pip.exe','Drift\x20Sched\x20Error:\x20','splice','existsSync','Pattern\x20Detected','testContext','analysis.automation.description','payload','analysisTimer','.\x20EMERGENCY:\x20','baselineDrift','LTM.driftAnalysis','button','10042361vrdupg',')\x20-\x20SAFE\x20BOOT','briefingTime','Missing\x20data','analysis.automation.patternDetected','response','TRAIN_HEALTH','weatherInstance','21168323HhtcXa','detected','system.presenceWho','temperature','TRAIN_ENERGY','activityLevel','getGenerativeModel','unload','command','trim','daswetter','find','analysis.health','system.config','getMonth','SECURITY_RESULT','LTM.driftAnalysis.lastCheck','.forecast.current.temperature','system','debug','energy','onUnload','prÃ¤senz','schalter','setObjectNotExistsAsync','bind','extendObjectAsync','filter','Fokus\x20auf\x20Komfort.','version','modeResetJob','system.','Success','message','Success:\x20','LTM','LTM.triggerDailyDigest','rawEventLog','type','Analysiere\x20ausgewogen.','Activity\x20Summary','Kein\x20API\x20Key!','Daily\x20Digests','Adapter','getEnums','ðŸš€\x20Starting\x20System\x20Logic...','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','reason','System','devices','LTM.rawEventLog','values','analysis.security.lastScore','N/A\x20(Learning)','off','Raw\x20Log','stringify','generic','ðŸ§ª\x20Simulating\x20Butler\x20Proposal:\x20','analysis.trigger','text','testApiKey','toISOString','analysis.automation.autoApply','requirements.txt','analysis.energy.insulationScore','âš ï¸\x20Persistentes\x20Python\x20VENV\x20fehlt\x20(','System\x20Mode','latitude','weatherunderground','\x0aGrund:\x20','ðŸ“ž\x20RÃœCKRUF\x20BITTE!\x20Der\x20Bewohner\x20hat\x20den\x20RÃ¼ckruf-Button\x20gedrÃ¼ckt.','setState','analysis.training.triggerEnergy','User\x20dismissed\x20automation\x20proposal.','number','targetId','sendToAsync','siren','events.history_debug_00','Anomaly\x20Score','boolean','indexOf','valve','kontakt','channel','shift','currentSystemMode','1167480zPQEtG','ANALYZE_TREND','now','automation.triggerAction','simple-api.','Last\x20Check','send','getStateAsync','TREND_RESULT','getForeignStateAsync','events.history','length','geminiModel','onStateChange','Training\x20Status','tÃ¼r','ðŸ› ï¸\x20Creating\x20Persistent\x20VENV\x20at:\x20','Train\x20Health','platform','PARTY','0\x203\x20*\x20*\x20*','1468tQYXKU','notifyTelegramEnabled','\x0aSTB:\x20','analysis.security.lastCheck','python','Health\x20Analysis','indicator','analysis.training','COGNI_CONFIRM_OK','Trend\x20Value','callback','outdoorSensorId','toFixed','scanDevices','temperatur','python_service','LTM.trainingData.thermodynamics','presenceDevices','alertReason','âŒ\x20INSTALL\x20FAILED:\x20','âœ…\x20INSTALL\x20SUCCESS.','ltmJob','driftAnalysisTimer','push','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','6FjzRSS','toLowerCase','Failed:\x20','targetValue','âš ï¸\x20ALARM:\x20','analysis.health.trendValue','ANOMALY','join','Keine\x20Details.','.\x20WETTER:\x20','Gemini\x20AI\x20initialized.','pythonProcess','.Current.Temperature','indicator.alarm','Auto\x20Apply','log','notifyEmailInstance','summary','Thermodynamics','Train\x20Security','inactivityThresholdHours','analysis.health.trendDiagnosis','HEALTH_RESULT','notifyTelegramInstance','geminiApiKey','currentposition','round','\x20=\x20','communicate.request','Insulation\x20Score','info','config','analysis.training.triggerHealth','pop','ðŸ§ \x20Triggering\x20Security\x20Training...','switch','exports','.\x20EVENTS:\x20','submitFeedback','analysis.activitySummary','6009560LDyKWu','position','LTM.processingStatus','ANALYZE_HEALTH','VACATION','events.lastEvent','endsWith','onMessage','search','N/A','openweathermap','useWeather','cancel','Heating\x20Score','aiPersona','5255097VvWXaF','.\x20ANWESEND:\x20','analysis.lastResult','subscribeForeignStatesAsync','admin.','ðŸ›¡ï¸\x20SECURITY\x20CHECK:\x20Score\x20','Unknown','occupancy','driftDetails','analysis.automation.targetId','analysisHistory','getCalendarNames','eventHistory','sendTo','PONG','path','Event\x20History','generateContent','Alarm','targetposition','split','instance','models/gemini-flash-latest','text.alarm','location','.communicate.request','normal','Trigger\x20Briefing','ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20','heizung','analysis.security','ðŸš¨\x20EMERGENCY','systemConfig','value','scheduleJob','ltmDriftCheckIntervalHours','Alert\x20Reason','dailyDigests','details','Unbekannt','minDaysForBaseline','name','getHours','[LOG]','exitTimer','replace','toString','warn','some','sensorLastValues','.\x20SYSTEM_MODE:\x20','(((.+)+)+)+$','Restoring\x20sensor\x20cache...','bewegung','Gemini\x20Error:\x20','No\x20instance','vacation','Train\x20Energy','TRAIN_SECURITY','system.mode','diagnosis','pip','Error\x20launching\x20Python:\x20','4tzFzxa','constructor','[PYTHON]\x20','briefingEnabled','light','info.','error','date','kill','ðŸŽ¯\x20Training\x20Success.\x20New\x20Threshold\x20set\x20to:\x20','setpoint','dependencyInstallInProgress','.\x20KONTEXT:\x20','âœ…\x20HEALTH\x20TRAINED.','string','unknown'];a0_0x26de=function(){return _0x2b96dd;};return a0_0x26de();}async function startSystem(_0x747f9a){const _0x3847aa=a0_0x5c43b6;_0x747f9a['log'][_0x3847aa(0x276)](_0x3847aa(0x1ff)),await initZombies(_0x747f9a);try{_0x747f9a[_0x3847aa(0x17b)]=await checkLicense(_0x747f9a['config']['licenseKey']);}catch(_0x389ff6){}if(!_0x747f9a[_0x3847aa(0x277)][_0x3847aa(0x26c)]||_0x747f9a[_0x3847aa(0x277)][_0x3847aa(0x26c)]<0.1)_0x747f9a[_0x3847aa(0x277)][_0x3847aa(0x26c)]=0xc;await initHistory(_0x747f9a),await initSystemConfig(_0x747f9a);if(_0x747f9a[_0x3847aa(0x277)]['geminiApiKey'])try{_0x747f9a[_0x3847aa(0x158)]=new GoogleGenerativeAI(_0x747f9a['config'][_0x3847aa(0x270)]),_0x747f9a[_0x3847aa(0x236)]=_0x747f9a['genAI'][_0x3847aa(0x1d8)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x3847aa(0x15a)}}),_0x747f9a['log']['info'](_0x3847aa(0x262));}catch(_0xc83610){_0x747f9a[_0x3847aa(0x267)][_0x3847aa(0x2d4)]('Gemini\x20Init\x20Error:\x20'+_0xc83610['message']);}await createAllObjects(_0x747f9a),await loadSystemMode(_0x747f9a),await loadRawEventLog(_0x747f9a),await loadDailyDigests(_0x747f9a),_0x747f9a[_0x3847aa(0x143)]('analysis.trigger'),_0x747f9a['subscribeStates'](LTM_DP_TRIGGER_DIGEST),_0x747f9a[_0x3847aa(0x143)](_0x3847aa(0x2ca)),_0x747f9a[_0x3847aa(0x143)]('analysis.triggerBriefing'),_0x747f9a[_0x3847aa(0x143)](_0x3847aa(0x17c)),_0x747f9a[_0x3847aa(0x143)](_0x3847aa(0x211)),_0x747f9a[_0x3847aa(0x143)](_0x3847aa(0x14b)),_0x747f9a[_0x3847aa(0x143)](_0x3847aa(0x278)),_0x747f9a['subscribeStates'](_0x3847aa(0x21b)),await initSensorSubscriptions(_0x747f9a),await initPresenceSubscriptions(_0x747f9a),await setupTelegramListener(_0x747f9a),setTimeout(()=>checkWifiPresence(_0x747f9a),0x1388);if(_0x747f9a[_0x3847aa(0x1c5)])clearInterval(_0x747f9a[_0x3847aa(0x1c5)]);const _0x879464=_0x747f9a[_0x3847aa(0x277)][_0x3847aa(0x1af)]||0xf;_0x879464>0x0&&(_0x747f9a['analysisTimer']=setInterval(()=>{runAutopilot(_0x747f9a);},_0x879464*0x3c*0x3e8)),setupLtmScheduler(_0x747f9a),setupModeResetScheduler(_0x747f9a),setupDriftAnalysisScheduler(_0x747f9a),setupBriefingScheduler(_0x747f9a),startPythonService(_0x747f9a),setTimeout(()=>{if(_0x747f9a['pythonProcess'])runPythonHealthCheck(_0x747f9a);},0x1388);}function checkAndInstall(_0x2f6c1d){const _0x5a7c72=a0_0x5c43b6;if(!fs[_0x5a7c72(0x1c0)](VENV_PATH)||!fs[_0x5a7c72(0x1c0)](PIP_EXE))return _0x2f6c1d[_0x5a7c72(0x267)][_0x5a7c72(0x2be)](_0x5a7c72(0x214)+VENV_PATH+').\x20Installiere...'),installPythonDependencies(_0x2f6c1d),![];return!![];}function installPythonDependencies(_0x54eba4){const _0x4a3ca5=a0_0x5c43b6;if(_0x54eba4['dependencyInstallInProgress'])return;_0x54eba4[_0x4a3ca5(0x2d9)]=!![];const _0x4b63f4=path[_0x4a3ca5(0x25f)](__dirname,_0x4a3ca5(0x24e),_0x4a3ca5(0x212));stopPythonService(_0x54eba4);if(fs['existsSync'](VENV_PATH)&&!fs[_0x4a3ca5(0x1c0)](PIP_EXE))try{fs[_0x4a3ca5(0x155)](VENV_PATH,{'recursive':!![],'force':!![]});}catch(_0x5f45e5){}_0x54eba4[_0x4a3ca5(0x267)][_0x4a3ca5(0x276)](_0x4a3ca5(0x23a)+VENV_PATH),exec('python3\x20-m\x20venv\x20\x22'+VENV_PATH+'\x22',_0x2464a5=>{const _0x4c1261=_0x4a3ca5;if(_0x2464a5){_0x54eba4[_0x4c1261(0x267)]['error']('âŒ\x20VENV\x20FAILED.\x20Run:\x20sudo\x20apt\x20install\x20python3-venv'),_0x54eba4['dependencyInstallInProgress']=![];return;}installRequirementsInVenv(_0x54eba4,_0x4b63f4);});}function installRequirementsInVenv(_0x3168d7,_0x2fb770){const _0x168822=a0_0x5c43b6;_0x3168d7[_0x168822(0x267)]['info'](_0x168822(0x16f));const _0x170e54='\x22'+PIP_EXE+'\x22\x20install\x20--no-cache-dir\x20--force-reinstall\x20-r\x20\x22'+_0x2fb770+'\x22';exec(_0x170e54,{'timeout':0x124f80},(_0x3afcaa,_0x387be8,_0x46fac7)=>{const _0x1ca85b=_0x168822;_0x3168d7['dependencyInstallInProgress']=![],_0x3afcaa?_0x3168d7[_0x1ca85b(0x267)][_0x1ca85b(0x2d4)](_0x1ca85b(0x252)+(_0x46fac7||_0x3afcaa[_0x1ca85b(0x1f3)])):(_0x3168d7[_0x1ca85b(0x267)][_0x1ca85b(0x276)](_0x1ca85b(0x253)),startSystem(_0x3168d7));});}async function initZombies(_0xaa2871){const _0x4c92dc=a0_0x5c43b6;try{const _0x33c28a=['analysis.history_debug_00',_0x4c92dc(0x221)];for(const _0xac1418 of _0x33c28a){try{const _0x163ac5=await _0xaa2871['getObjectAsync'](_0xac1418);if(_0x163ac5)await _0xaa2871['delObjectAsync'](_0xac1418);}catch(_0x3439cf){}}}catch(_0x5d4363){}}async function checkLicense(_0x1e8133){return!![];}async function initHistory(_0x5cf13d){const _0x5bae9c=a0_0x5c43b6;try{const _0x1fa149=await _0x5cf13d['getStateAsync'](_0x5bae9c(0x234));_0x1fa149&&_0x1fa149['val']&&(_0x5cf13d[_0x5bae9c(0x29b)]=JSON[_0x5bae9c(0x14f)](_0x1fa149[_0x5bae9c(0x2df)][_0x5bae9c(0x2bd)]()));}catch(_0x5267f5){_0x5cf13d[_0x5bae9c(0x29b)]=[];}try{const _0x11dd4a=await _0x5cf13d[_0x5bae9c(0x231)]('analysis.analysisHistory');if(_0x11dd4a&&_0x11dd4a['val'])_0x5cf13d[_0x5bae9c(0x299)]=JSON[_0x5bae9c(0x14f)](_0x11dd4a[_0x5bae9c(0x2df)][_0x5bae9c(0x2bd)]());}catch(_0xb04ac8){_0x5cf13d[_0x5bae9c(0x299)]=[];}if(_0x5cf13d[_0x5bae9c(0x29b)]&&_0x5cf13d[_0x5bae9c(0x29b)][_0x5bae9c(0x235)]>0x0){_0x5cf13d[_0x5bae9c(0x267)][_0x5bae9c(0x276)](_0x5bae9c(0x2c3));for(let _0x18cc1a=_0x5cf13d[_0x5bae9c(0x29b)][_0x5bae9c(0x235)]-0x1;_0x18cc1a>=0x0;_0x18cc1a--){const _0x4fda26=_0x5cf13d[_0x5bae9c(0x29b)][_0x18cc1a];if(_0x4fda26&&_0x4fda26['id']!==undefined&&_0x4fda26[_0x5bae9c(0x2b0)]!==undefined)_0x5cf13d[_0x5bae9c(0x2c0)][_0x4fda26['id']]=_0x4fda26[_0x5bae9c(0x2b0)];}}}async function initSystemConfig(_0x3eac20){const _0x405d55=a0_0x5c43b6;try{const _0x5bce55=await _0x3eac20[_0x405d55(0x18e)](_0x405d55(0x1df));if(_0x5bce55&&_0x5bce55[_0x405d55(0x152)])_0x3eac20[_0x405d55(0x2af)]={'latitude':_0x5bce55[_0x405d55(0x152)][_0x405d55(0x216)]||0x0,'longitude':_0x5bce55['common']['longitude']||0x0,'city':_0x5bce55[_0x405d55(0x152)]['city']||''};}catch(_0x1366e1){}}async function createAllObjects(_0x1778fc){const _0x14a623=a0_0x5c43b6;await _0x1778fc['extendObjectAsync'](_0x14a623(0x1e4),{'type':_0x14a623(0x227),'common':{'name':_0x14a623(0x202)},'native':{}}),await _0x1778fc[_0x14a623(0x1ec)](SYSTEM_DP_MODE,{'type':'state','common':{'name':_0x14a623(0x215),'type':_0x14a623(0x2dc),'role':_0x14a623(0x15c),'read':!![],'write':!![],'def':SYSTEM_MODES[_0x14a623(0x150)]},'native':{}}),await _0x1778fc[_0x14a623(0x1ea)](_0x14a623(0x1d4),{'type':'state','common':{'name':_0x14a623(0x13d),'type':_0x14a623(0x2dc),'role':_0x14a623(0x20e),'read':!![],'write':![]},'native':{}}),await _0x1778fc[_0x14a623(0x1ea)](_0x14a623(0x285),{'type':_0x14a623(0x15c),'common':{'name':'Last\x20raw\x20event','type':_0x14a623(0x2dc),'role':'json','read':!![],'write':![]},'native':{}}),await _0x1778fc[_0x14a623(0x1ea)]('events.history',{'type':_0x14a623(0x15c),'common':{'name':_0x14a623(0x29f),'type':_0x14a623(0x2dc),'role':'json','read':!![],'write':![]},'native':{}}),await _0x1778fc[_0x14a623(0x1ec)](_0x14a623(0x246),{'type':_0x14a623(0x227),'common':{'name':'AI\x20Training'},'native':{}}),await _0x1778fc['setObjectNotExistsAsync']('analysis.training.triggerSecurity',{'type':_0x14a623(0x15c),'common':{'name':_0x14a623(0x26b),'type':'boolean','role':_0x14a623(0x1c9),'read':!![],'write':!![]},'native':{}}),await _0x1778fc[_0x14a623(0x1ea)](_0x14a623(0x278),{'type':_0x14a623(0x15c),'common':{'name':_0x14a623(0x23b),'type':_0x14a623(0x223),'role':'button','read':!![],'write':!![]},'native':{}}),await _0x1778fc[_0x14a623(0x1ea)]('analysis.training.triggerEnergy',{'type':_0x14a623(0x15c),'common':{'name':_0x14a623(0x2c8),'type':_0x14a623(0x223),'role':'button','read':!![],'write':!![]},'native':{}}),await _0x1778fc['setObjectNotExistsAsync']('analysis.training.status',{'type':_0x14a623(0x15c),'common':{'name':_0x14a623(0x238),'type':'string','role':'text','read':!![],'write':![]},'native':{}}),await _0x1778fc['extendObjectAsync'](_0x14a623(0x2ad),{'type':_0x14a623(0x227),'common':{'name':'Security\x20Monitor'},'native':{}}),await _0x1778fc[_0x14a623(0x1ea)](_0x14a623(0x206),{'type':'state','common':{'name':_0x14a623(0x222),'type':'number','role':_0x14a623(0x2b0),'read':!![],'write':![]},'native':{}}),await _0x1778fc[_0x14a623(0x1ea)](_0x14a623(0x19e),{'type':'state','common':{'name':'Current\x20Threshold','type':_0x14a623(0x21d),'role':_0x14a623(0x2b0),'read':!![],'write':![],'def':0.05},'native':{}}),await _0x1778fc[_0x14a623(0x1ea)]('analysis.security.lastCheck',{'type':_0x14a623(0x15c),'common':{'name':_0x14a623(0x22f),'type':'string','role':'date','read':!![],'write':![]},'native':{}}),await _0x1778fc[_0x14a623(0x1ec)](_0x14a623(0x1de),{'type':_0x14a623(0x227),'common':{'name':_0x14a623(0x244)},'native':{}}),await _0x1778fc['setObjectNotExistsAsync']('analysis.health.lastCheck',{'type':_0x14a623(0x15c),'common':{'name':'Last\x20Check','type':_0x14a623(0x2dc),'role':_0x14a623(0x2d5),'read':!![],'write':![]},'native':{}}),await _0x1778fc['setObjectNotExistsAsync'](_0x14a623(0x1b3),{'type':_0x14a623(0x15c),'common':{'name':_0x14a623(0x186),'type':_0x14a623(0x223),'role':_0x14a623(0x245),'read':!![],'write':![]},'native':{}}),await _0x1778fc[_0x14a623(0x1ea)](_0x14a623(0x26d),{'type':_0x14a623(0x15c),'common':{'name':_0x14a623(0x161),'type':'string','role':_0x14a623(0x20e),'read':!![],'write':![]},'native':{}}),await _0x1778fc['setObjectNotExistsAsync'](_0x14a623(0x25d),{'type':_0x14a623(0x15c),'common':{'name':_0x14a623(0x248),'type':_0x14a623(0x21d),'role':_0x14a623(0x2b0),'read':!![],'write':![]},'native':{}}),await _0x1778fc['extendObjectAsync'](_0x14a623(0x15e),{'type':_0x14a623(0x227),'common':{'name':'Energy\x20Intelligence'},'native':{}}),await _0x1778fc['setObjectNotExistsAsync'](_0x14a623(0x213),{'type':'state','common':{'name':_0x14a623(0x275),'type':'string','role':_0x14a623(0x20e),'read':!![],'write':![]},'native':{}}),await _0x1778fc[_0x14a623(0x1ea)](_0x14a623(0x15b),{'type':_0x14a623(0x15c),'common':{'name':_0x14a623(0x28d),'type':_0x14a623(0x2dc),'role':_0x14a623(0x20e),'read':!![],'write':![]},'native':{}}),await _0x1778fc['extendObjectAsync']('LTM',{'type':_0x14a623(0x227),'common':{'name':_0x14a623(0x1f5)},'native':{}}),await _0x1778fc[_0x14a623(0x1ec)](LTM_DP_RAW_LOG,{'type':_0x14a623(0x15c),'common':{'name':_0x14a623(0x209),'type':_0x14a623(0x2dc),'role':_0x14a623(0x192),'read':!![],'write':![]},'native':{}}),await _0x1778fc[_0x14a623(0x1ec)](LTM_DP_DAILY_DIGESTS,{'type':'state','common':{'name':_0x14a623(0x1fc),'type':'string','role':_0x14a623(0x192),'read':!![],'write':![]},'native':{}}),await _0x1778fc[_0x14a623(0x1ea)]('LTM.trainingData.sequences',{'type':_0x14a623(0x15c),'common':{'name':'Sequences','type':_0x14a623(0x2dc),'role':'json','read':!![],'write':![]},'native':{}}),await _0x1778fc[_0x14a623(0x1ea)](_0x14a623(0x24f),{'type':_0x14a623(0x15c),'common':{'name':_0x14a623(0x26a),'type':'string','role':'json','read':!![],'write':![]},'native':{}}),await _0x1778fc[_0x14a623(0x1ea)](_0x14a623(0x20d),{'type':_0x14a623(0x15c),'common':{'name':'Trigger\x20Analysis','type':'boolean','role':_0x14a623(0x1c9),'read':!![],'write':!![]},'native':{}}),await _0x1778fc[_0x14a623(0x1ea)](_0x14a623(0x163),{'type':'state','common':{'name':_0x14a623(0x2aa),'type':_0x14a623(0x223),'role':_0x14a623(0x1c9),'read':!![],'write':!![]},'native':{}}),await _0x1778fc[_0x14a623(0x1ea)](_0x14a623(0x1a4),{'type':_0x14a623(0x15c),'common':{'name':_0x14a623(0x16a),'type':_0x14a623(0x223),'role':_0x14a623(0x265),'read':!![],'write':![]},'native':{}}),await _0x1778fc[_0x14a623(0x1ea)](_0x14a623(0x1a9),{'type':_0x14a623(0x15c),'common':{'name':_0x14a623(0x2b3),'type':_0x14a623(0x2dc),'role':_0x14a623(0x2a6),'read':!![],'write':![]},'native':{}}),await _0x1778fc[_0x14a623(0x1ea)](_0x14a623(0x27f),{'type':_0x14a623(0x15c),'common':{'name':_0x14a623(0x1fa),'type':_0x14a623(0x2dc),'role':_0x14a623(0x20e),'read':!![],'write':![]},'native':{}}),await _0x1778fc[_0x14a623(0x1ea)](_0x14a623(0x1ce),{'type':_0x14a623(0x15c),'common':{'name':_0x14a623(0x1c1),'type':'boolean','role':_0x14a623(0x245),'read':!![],'write':![]},'native':{}}),await _0x1778fc[_0x14a623(0x1ea)](_0x14a623(0x1c3),{'type':_0x14a623(0x15c),'common':{'name':_0x14a623(0x18f),'type':_0x14a623(0x2dc),'role':_0x14a623(0x20e),'read':!![],'write':![]},'native':{}}),await _0x1778fc[_0x14a623(0x1ea)](_0x14a623(0x298),{'type':_0x14a623(0x15c),'common':{'name':_0x14a623(0x193),'type':_0x14a623(0x2dc),'role':_0x14a623(0x20e),'read':!![],'write':![]},'native':{}}),await _0x1778fc['setObjectNotExistsAsync'](_0x14a623(0x151),{'type':_0x14a623(0x15c),'common':{'name':_0x14a623(0x147),'type':'string','role':'text','read':!![],'write':![]},'native':{}}),await _0x1778fc[_0x14a623(0x1ea)]('analysis.automation.autoApply',{'type':_0x14a623(0x15c),'common':{'name':_0x14a623(0x266),'type':_0x14a623(0x223),'role':'switch','read':!![],'write':!![]},'native':{}}),await _0x1778fc[_0x14a623(0x1ea)](_0x14a623(0x17c),{'type':_0x14a623(0x15c),'common':{'name':_0x14a623(0x2e0),'type':_0x14a623(0x223),'role':_0x14a623(0x1c9),'read':!![],'write':!![]},'native':{}});}async function loadSystemMode(_0x246a5a){const _0x1c8df1=a0_0x5c43b6;try{const _0x5a4750=await _0x246a5a[_0x1c8df1(0x231)](SYSTEM_DP_MODE);_0x5a4750&&_0x5a4750[_0x1c8df1(0x2df)]&&Object[_0x1c8df1(0x205)](SYSTEM_MODES)[_0x1c8df1(0x1bc)](_0x5a4750[_0x1c8df1(0x2df)])?_0x246a5a[_0x1c8df1(0x229)]=_0x5a4750[_0x1c8df1(0x2df)]:(_0x246a5a[_0x1c8df1(0x229)]=SYSTEM_MODES[_0x1c8df1(0x150)],await _0x246a5a[_0x1c8df1(0x13a)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES['NORMAL'],'ack':!![]}));}catch(_0xe81d6d){_0x246a5a[_0x1c8df1(0x229)]=SYSTEM_MODES[_0x1c8df1(0x150)];}}async function loadRawEventLog(_0x229d5c){const _0x22f621=a0_0x5c43b6;try{const _0x227f82=await _0x229d5c['getStateAsync'](LTM_DP_RAW_LOG);if(_0x227f82&&_0x227f82[_0x22f621(0x2df)])_0x229d5c[_0x22f621(0x1f7)]=JSON[_0x22f621(0x14f)](_0x227f82[_0x22f621(0x2df)]);}catch(_0x4c7f56){_0x229d5c['rawEventLog']=[];}}async function saveRawEventLog(_0x701f7c){const _0x2d862e=a0_0x5c43b6;if(_0x701f7c[_0x2d862e(0x1f7)][_0x2d862e(0x235)]>RAW_LOG_MAX_SIZE)_0x701f7c[_0x2d862e(0x1f7)][_0x2d862e(0x1bf)](0x0,_0x701f7c[_0x2d862e(0x1f7)][_0x2d862e(0x235)]-RAW_LOG_MAX_SIZE);await _0x701f7c[_0x2d862e(0x13a)](LTM_DP_RAW_LOG,{'val':JSON[_0x2d862e(0x20a)](_0x701f7c[_0x2d862e(0x1f7)]),'ack':!![]});}async function loadDailyDigests(_0x3fe158){const _0x4f6a94=a0_0x5c43b6;try{const _0x613f0e=await _0x3fe158[_0x4f6a94(0x231)](LTM_DP_DAILY_DIGESTS);if(_0x613f0e&&_0x613f0e['val'])_0x3fe158[_0x4f6a94(0x2b4)]=JSON[_0x4f6a94(0x14f)](_0x613f0e[_0x4f6a94(0x2df)]);}catch(_0x4e2da3){_0x3fe158['dailyDigests']=[];}await updateBaselineStatus(_0x3fe158);}async function saveDailyDigests(_0x3e046a,_0x2f80f1=!![]){const _0x5ae6f6=a0_0x5c43b6,_0x7841d0=_0x3e046a[_0x5ae6f6(0x277)]['ltmLtbWindowDays']||0x3c;_0x3e046a[_0x5ae6f6(0x2b4)][_0x5ae6f6(0x235)]>_0x7841d0&&_0x3e046a[_0x5ae6f6(0x2b4)][_0x5ae6f6(0x1bf)](0x0,_0x3e046a[_0x5ae6f6(0x2b4)][_0x5ae6f6(0x235)]-_0x7841d0);await _0x3e046a[_0x5ae6f6(0x13a)](LTM_DP_DAILY_DIGESTS,{'val':JSON['stringify'](_0x3e046a[_0x5ae6f6(0x2b4)]),'ack':!![]});if(_0x2f80f1)await updateBaselineStatus(_0x3e046a);}async function updateAnalysisHistory(_0x555812,_0xf4b284){const _0x588c13=a0_0x5c43b6;_0x555812[_0x588c13(0x299)][_0x588c13(0x142)](_0xf4b284);if(_0x555812[_0x588c13(0x299)][_0x588c13(0x235)]>HISTORY_MAX_SIZE)_0x555812[_0x588c13(0x299)][_0x588c13(0x279)]();await _0x555812[_0x588c13(0x13a)]('analysis.analysisHistory',{'val':JSON[_0x588c13(0x20a)](_0x555812[_0x588c13(0x299)]),'ack':!![]});}async function updateBaselineStatus(_0x13eb03){const _0x1d2d6c=a0_0x5c43b6;if(!_0x13eb03[_0x1d2d6c(0x17b)]){await _0x13eb03[_0x1d2d6c(0x13a)](LTM_DP_BASELINE_STATUS,{'val':_0x1d2d6c(0x16d),'ack':!![]});return;}const _0x5a1628=_0x13eb03['dailyDigests'][_0x1d2d6c(0x235)]>=(_0x13eb03[_0x1d2d6c(0x277)]['minDaysForBaseline']||0x7)?'Aktiv\x20('+_0x13eb03[_0x1d2d6c(0x2b4)][_0x1d2d6c(0x235)]+_0x1d2d6c(0x174):'Lernphase\x20('+_0x13eb03[_0x1d2d6c(0x2b4)][_0x1d2d6c(0x235)]+'/'+(_0x13eb03[_0x1d2d6c(0x277)][_0x1d2d6c(0x2b7)]||0x7)+')';await _0x13eb03[_0x1d2d6c(0x13a)](LTM_DP_BASELINE_STATUS,{'val':_0x5a1628,'ack':!![]});}async function initSensorSubscriptions(_0x3ea880){const _0x29ea3f=a0_0x5c43b6,_0x1b7590=_0x3ea880['config'][_0x29ea3f(0x203)];if(_0x1b7590)for(const _0x42ba2a of _0x1b7590){await _0x3ea880[_0x29ea3f(0x292)](_0x42ba2a['id']);}}async function initPresenceSubscriptions(_0x5ad2e7){const _0x1bb1be=_0x5ad2e7['config']['presenceDevices'];if(_0x1bb1be)for(const _0x2c38ad of _0x1bb1be){await _0x5ad2e7['subscribeForeignStatesAsync'](_0x2c38ad);}}async function setupTelegramListener(_0x1ce3ec){const _0x403985=a0_0x5c43b6,_0x25ad52=_0x1ce3ec['config'][_0x403985(0x26f)];if(_0x1ce3ec[_0x403985(0x277)][_0x403985(0x240)]&&_0x25ad52)await _0x1ce3ec['subscribeForeignStatesAsync'](_0x25ad52+_0x403985(0x2a8));}async function checkWifiPresence(_0x55b296){const _0x10f0e9=a0_0x5c43b6;try{const _0x2d657f=_0x55b296['config'][_0x10f0e9(0x250)]||[];let _0x1a73b4=![];const _0x117c34=[];for(const _0x445dd0 of _0x2d657f){try{const _0x32fb00=await _0x55b296['getForeignStateAsync'](_0x445dd0);_0x32fb00&&(_0x32fb00['val']===!![]||_0x32fb00[_0x10f0e9(0x2df)]==='online'||_0x32fb00[_0x10f0e9(0x2df)]===0x1)&&(_0x1a73b4=!![],_0x117c34['push'](_0x445dd0));}catch(_0x9d0ff0){}}return await _0x55b296[_0x10f0e9(0x13a)](_0x10f0e9(0x1d4),{'val':_0x117c34[_0x10f0e9(0x25f)](',\x20'),'ack':!![]}),_0x1a73b4&&(_0x55b296[_0x10f0e9(0x2bb)]&&(_0x55b296['log'][_0x10f0e9(0x276)](_0x10f0e9(0x196)),abortExitTimer(_0x55b296)),!_0x55b296[_0x10f0e9(0x14a)]&&_0x55b296[_0x10f0e9(0x229)]===SYSTEM_MODES[_0x10f0e9(0x150)]&&await setPresence(_0x55b296,!![])),_0x1a73b4;}catch(_0x40c6bc){return![];}}function startExitTimer(_0x2edc8f){const _0x574dd3=a0_0x5c43b6;abortExitTimer(_0x2edc8f),_0x2edc8f['isGracePeriodActive']=!![],_0x2edc8f[_0x574dd3(0x1ae)]=setTimeout(()=>{const _0x4dcf30=_0x574dd3;_0x2edc8f[_0x4dcf30(0x185)]=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),_0x2edc8f[_0x574dd3(0x2bb)]=setTimeout(()=>{setPresence(_0x2edc8f,![]),_0x2edc8f['exitTimer']=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}function abortExitTimer(_0x4b761c){const _0xb425b5=a0_0x5c43b6;if(_0x4b761c[_0xb425b5(0x2bb)])clearTimeout(_0x4b761c['exitTimer']);if(_0x4b761c[_0xb425b5(0x1ae)])clearTimeout(_0x4b761c[_0xb425b5(0x1ae)]);_0x4b761c['exitTimer']=null,_0x4b761c[_0xb425b5(0x1ae)]=null,_0x4b761c['isGracePeriodActive']=![];}async function setPresence(_0x5d2b51,_0x38e230){const _0x53e30a=a0_0x5c43b6;if(_0x5d2b51['isPresent']===_0x38e230)return;_0x5d2b51[_0x53e30a(0x14a)]=_0x38e230,await _0x5d2b51['setStateAsync'](_0x53e30a(0x1a5),{'val':_0x38e230,'ack':!![]});}async function executeAutomationAction(_0x55eef3){const _0x450dad=a0_0x5c43b6;try{const _0x54c75b=await _0x55eef3[_0x450dad(0x231)](_0x450dad(0x298)),_0x2618b6=await _0x55eef3['getStateAsync'](_0x450dad(0x151));if(_0x54c75b&&_0x54c75b[_0x450dad(0x2df)]&&_0x2618b6){const _0x129a4b=_0x54c75b[_0x450dad(0x2df)];let _0x13b8a1=_0x2618b6[_0x450dad(0x2df)];try{_0x13b8a1=JSON['parse'](_0x13b8a1);}catch(_0x59189f){}_0x55eef3[_0x450dad(0x267)][_0x450dad(0x276)](_0x450dad(0x2ab)+_0x129a4b+_0x450dad(0x273)+_0x13b8a1),await _0x55eef3[_0x450dad(0x197)](_0x129a4b,_0x13b8a1);}else _0x55eef3['log'][_0x450dad(0x2be)](_0x450dad(0x17f));}catch(_0x2544ef){_0x55eef3['log'][_0x450dad(0x2d4)]('BUTLER\x20Execution\x20Error:\x20'+_0x2544ef[_0x450dad(0x1f3)]);}}async function processSensorEvent(_0x46b86b,_0x335377,_0x3b22b6,_0x275c53){const _0x13286b=a0_0x5c43b6;if(!_0x275c53)return;const _0x8c15e6=_0x3b22b6['val'],_0x1ebe71=Date[_0x13286b(0x22c)](),_0x1c0a39=_0x46b86b[_0x13286b(0x2c0)][_0x335377];_0x46b86b[_0x13286b(0x2c0)][_0x335377]=_0x8c15e6;if(!_0x275c53[_0x13286b(0x16e)]&&_0x1c0a39!=undefined&&_0x1c0a39==_0x8c15e6)return;const _0x54571e=(_0x275c53[_0x13286b(0x1f8)]||'')[_0x13286b(0x259)](),_0x2e8a5a=_0x54571e[_0x13286b(0x1bc)]('temperature')||_0x54571e['includes'](_0x13286b(0x24d))||_0x54571e[_0x13286b(0x1bc)]('klima')||_0x54571e[_0x13286b(0x1bc)](_0x13286b(0x2ac));_0x46b86b['isProVersion']&&_0x2e8a5a&&recordThermodynamics(_0x46b86b,_0x335377,_0x8c15e6,_0x275c53[_0x13286b(0x2a7)]);const _0x270787={'timestamp':_0x1ebe71,'id':_0x335377,'name':_0x275c53[_0x13286b(0x2b8)],'type':_0x275c53[_0x13286b(0x1f8)],'location':_0x275c53[_0x13286b(0x2a7)],'value':_0x8c15e6};_0x46b86b[_0x13286b(0x29b)][_0x13286b(0x142)](_0x270787);if(_0x46b86b[_0x13286b(0x29b)][_0x13286b(0x235)]>HISTORY_MAX_SIZE)_0x46b86b['eventHistory'][_0x13286b(0x279)]();await _0x46b86b[_0x13286b(0x13a)]('events.lastEvent',{'val':JSON[_0x13286b(0x20a)](_0x270787),'ack':!![]}),await _0x46b86b['setStateAsync']('events.history',{'val':JSON[_0x13286b(0x20a)](_0x46b86b[_0x13286b(0x29b)]),'ack':!![]});_0x46b86b[_0x13286b(0x17b)]&&(_0x46b86b[_0x13286b(0x1f7)][_0x13286b(0x256)](_0x270787),await saveRawEventLog(_0x46b86b),recordSequence(_0x46b86b,_0x270787));if(_0x275c53['isExit']&&_0x8c15e6===!![]){if(_0x46b86b[_0x13286b(0x14a)]&&!_0x46b86b[_0x13286b(0x185)])startExitTimer(_0x46b86b);else{if(!_0x46b86b[_0x13286b(0x14a)])setPresence(_0x46b86b,!![]);}}else{if(_0x275c53[_0x13286b(0x1f8)]===_0x13286b(0x2e2)&&_0x8c15e6===!![]){if(_0x46b86b['exitTimer'])abortExitTimer(_0x46b86b);if(!_0x46b86b[_0x13286b(0x14a)]&&_0x46b86b[_0x13286b(0x229)]===SYSTEM_MODES[_0x13286b(0x150)])setPresence(_0x46b86b,!![]);}}}async function recordThermodynamics(_0x2c056f,_0x14a7a8,_0x308648,_0x4042ac){const _0x2b65a6=a0_0x5c43b6,_0x3c412e=await getOutsideTemperatureNumeric(_0x2c056f),_0x3c32eb=await _0x2c056f[_0x2b65a6(0x231)]('LTM.trainingData.thermodynamics');let _0x3e62d1=[];if(_0x3c32eb&&_0x3c32eb[_0x2b65a6(0x2df)])try{_0x3e62d1=JSON[_0x2b65a6(0x14f)](_0x3c32eb['val']);}catch(_0x500da3){}_0x3e62d1['push']({'ts':Date['now'](),'room':_0x4042ac||'Unknown','t_in':_0x308648,'t_out':_0x3c412e});if(_0x3e62d1['length']>THERMO_LOG_SIZE)_0x3e62d1['shift']();await _0x2c056f[_0x2b65a6(0x13a)](_0x2b65a6(0x24f),{'val':JSON['stringify'](_0x3e62d1),'ack':!![]});}function a0_0x1e7a(_0x3429bc,_0x39d1d4){const _0x50831f=a0_0x26de();return a0_0x1e7a=function(_0x416420,_0x502ed1){_0x416420=_0x416420-0x137;let _0x26def8=_0x50831f[_0x416420];return _0x26def8;},a0_0x1e7a(_0x3429bc,_0x39d1d4);}async function getOutsideTemperatureNumeric(_0x55ac1c){const _0x1671fa=a0_0x5c43b6;if(_0x55ac1c[_0x1671fa(0x277)][_0x1671fa(0x24a)])try{const _0x57ebbf=await _0x55ac1c['getForeignStateAsync'](_0x55ac1c[_0x1671fa(0x277)]['outdoorSensorId']);if(_0x57ebbf&&_0x57ebbf[_0x1671fa(0x2df)]!==undefined&&_0x57ebbf[_0x1671fa(0x2df)]!==null)return parseFloat(_0x57ebbf[_0x1671fa(0x2df)]);}catch(_0x5ba342){}const _0x4ab0f1=_0x55ac1c[_0x1671fa(0x277)][_0x1671fa(0x1d1)];if(!_0x55ac1c[_0x1671fa(0x277)][_0x1671fa(0x28b)]||!_0x4ab0f1)return null;try{let _0x3ab56a='';if(_0x4ab0f1[_0x1671fa(0x1bc)](_0x1671fa(0x195)))_0x3ab56a=_0x4ab0f1+_0x1671fa(0x264);else{if(_0x4ab0f1[_0x1671fa(0x1bc)](_0x1671fa(0x1dc)))_0x3ab56a=_0x4ab0f1+'.NextHours.Location_1.Day_1.current.temp_value';else{if(_0x4ab0f1[_0x1671fa(0x1bc)](_0x1671fa(0x28a)))_0x3ab56a=_0x4ab0f1+_0x1671fa(0x1e3);else{if(_0x4ab0f1['includes'](_0x1671fa(0x217)))_0x3ab56a=_0x4ab0f1+_0x1671fa(0x164);}}}if(_0x3ab56a){const _0x253fef=await _0x55ac1c[_0x1671fa(0x233)](_0x3ab56a);if(_0x253fef&&_0x253fef[_0x1671fa(0x2df)]!==undefined&&_0x253fef[_0x1671fa(0x2df)]!==null)return parseFloat(_0x253fef[_0x1671fa(0x2df)]);}}catch(_0xb26c47){}return null;}async function recordSequence(_0x27925b,_0x2d40f9){const _0x1d4a92=a0_0x5c43b6,_0x416fe7=(_0x2d40f9[_0x1d4a92(0x1f8)]||'')[_0x1d4a92(0x259)](),_0x260cae=[_0x1d4a92(0x2e2),_0x1d4a92(0x2c4),_0x1d4a92(0x1e8),_0x1d4a92(0x1b6),_0x1d4a92(0x296),'door',_0x1d4a92(0x239),_0x1d4a92(0x168),_0x1d4a92(0x13b),'contact',_0x1d4a92(0x226),_0x1d4a92(0x2d2),_0x1d4a92(0x19b),_0x1d4a92(0x27b),_0x1d4a92(0x1e9),_0x1d4a92(0x139),'lampe'];if(!_0x260cae[_0x1d4a92(0x2bf)](_0x5e0776=>_0x416fe7[_0x1d4a92(0x1bc)](_0x5e0776)))return;if(!_0x2d40f9[_0x1d4a92(0x2b0)])return;if(sequenceTimer)clearTimeout(sequenceTimer);activeSequence[_0x1d4a92(0x256)]({'loc':_0x2d40f9[_0x1d4a92(0x2a7)]||_0x1d4a92(0x295),'id':_0x2d40f9['id'],'ts':Date[_0x1d4a92(0x22c)]()}),sequenceTimer=setTimeout(async()=>{const _0x3386a9=_0x1d4a92;if(activeSequence[_0x3386a9(0x235)]>0x1)await saveCompletedSequence(_0x27925b);activeSequence=[];},SEQUENCE_TIMEOUT_MS);}async function saveCompletedSequence(_0x11fba2){const _0x4c5d20=a0_0x5c43b6;try{const _0x2b593b=await _0x11fba2[_0x4c5d20(0x231)]('LTM.trainingData.sequences');let _0x516290=[];if(_0x2b593b&&_0x2b593b[_0x4c5d20(0x2df)])try{_0x516290=JSON[_0x4c5d20(0x14f)](_0x2b593b[_0x4c5d20(0x2df)]);}catch(_0xe0709e){}const _0x1b00a2=activeSequence[0x0]['ts'],_0x48654d=activeSequence[_0x4c5d20(0x1a8)](_0x34afa9=>({'loc':_0x34afa9['loc'],'t_delta':Math[_0x4c5d20(0x272)]((_0x34afa9['ts']-_0x1b00a2)/0x3e8)})),_0x1b8f18={'timestamp':new Date(_0x1b00a2)[_0x4c5d20(0x210)](),'steps':_0x48654d,'duration':Math[_0x4c5d20(0x272)]((activeSequence[activeSequence[_0x4c5d20(0x235)]-0x1]['ts']-_0x1b00a2)/0x3e8),'daytime':new Date(_0x1b00a2)[_0x4c5d20(0x2b9)]()};_0x516290[_0x4c5d20(0x256)](_0x1b8f18);if(_0x516290[_0x4c5d20(0x235)]>MAX_TRAINING_SET_SIZE)_0x516290[_0x4c5d20(0x228)]();await _0x11fba2[_0x4c5d20(0x13a)]('LTM.trainingData.sequences',{'val':JSON[_0x4c5d20(0x20a)](_0x516290),'ack':!![]}),runSecurityCheck(_0x11fba2,_0x1b8f18);}catch(_0x1ed7a2){_0x11fba2[_0x4c5d20(0x267)][_0x4c5d20(0x2d4)]('[RECORDER]\x20Error:\x20'+_0x1ed7a2[_0x4c5d20(0x1f3)]);}}function runSecurityCheck(_0x55e6ef,_0xe43369){const _0x1c9bb9=a0_0x5c43b6;if(!_0x55e6ef[_0x1c9bb9(0x17b)])return;sendToPython(_0x55e6ef,'ANALYZE_SEQUENCE',{'sequence':_0xe43369});}function sendToPython(_0x2850e8,_0xf2e3db,_0x816c07={}){const _0x222b52=a0_0x5c43b6;if(!_0x2850e8[_0x222b52(0x263)]||!_0x2850e8[_0x222b52(0x263)][_0x222b52(0x18c)][_0x222b52(0x191)])return;const _0x2c71b0=JSON[_0x222b52(0x20a)]({'command':_0xf2e3db,..._0x816c07});try{_0x2850e8[_0x222b52(0x263)]['stdin']['write'](_0x2c71b0+'\x0a');}catch(_0x5f0220){}}function startPythonService(_0x5631c8){const _0x1e4b4a=a0_0x5c43b6;let _0x2c1219='python3';if(fs['existsSync'](PYTHON_EXE))_0x2c1219=PYTHON_EXE;try{const _0x260889=path[_0x1e4b4a(0x25f)](__dirname,'python_service',_0x1e4b4a(0x172));_0x5631c8[_0x1e4b4a(0x263)]=spawn(_0x2c1219,[_0x260889]),_0x5631c8[_0x1e4b4a(0x263)][_0x1e4b4a(0x1aa)]['on']('data',_0x4e6c01=>{const _0x30479a=_0x1e4b4a,_0x8a781c=_0x4e6c01[_0x30479a(0x2bd)]()['split']('\x0a');_0x8a781c[_0x30479a(0x167)](_0x1ad5b7=>{const _0x1c4f81=_0x30479a,_0x587486=_0x1ad5b7[_0x1c4f81(0x1db)]();if(!_0x587486)return;if(_0x587486['startsWith'](_0x1c4f81(0x2ba)))_0x5631c8[_0x1c4f81(0x267)][_0x1c4f81(0x1e5)](_0x1c4f81(0x2d0)+_0x587486[_0x1c4f81(0x19c)](0x5)['trim']());else{if(_0x587486[_0x1c4f81(0x173)](_0x1c4f81(0x149)))try{const _0x25a4d0=JSON[_0x1c4f81(0x14f)](_0x587486[_0x1c4f81(0x19c)](0x8)[_0x1c4f81(0x1db)]());handlePythonResult(_0x5631c8,_0x25a4d0);}catch(_0x41ab7c){}}});}),_0x5631c8[_0x1e4b4a(0x263)]['on']('close',_0x5f2628=>{const _0x3717fa=_0x1e4b4a;_0x5631c8[_0x3717fa(0x263)]=null;});}catch(_0x41fbab){_0x5631c8['log'][_0x1e4b4a(0x2d4)](_0x1e4b4a(0x2cd)+_0x41fbab[_0x1e4b4a(0x1f3)]);}}function stopPythonService(_0x182006){const _0xc3144e=a0_0x5c43b6;if(_0x182006[_0xc3144e(0x263)]){try{_0x182006[_0xc3144e(0x263)][_0xc3144e(0x2d6)]();}catch(_0x5e35d0){}_0x182006[_0xc3144e(0x263)]=null;}}function handlePythonResult(_0x2b8147,_0x4bff5c){const _0x1397e8=a0_0x5c43b6;if(_0x4bff5c[_0x1397e8(0x1f8)]===_0x1397e8(0x29d))_0x2b8147['log'][_0x1397e8(0x1e5)](_0x1397e8(0x1b8));else{if(_0x4bff5c[_0x1397e8(0x1f8)]===_0x1397e8(0x1e1)){const {anomaly_score:_0x45d773,is_anomaly:_0x7af621,threshold:_0x132873,explanation:_0x10612f}=_0x4bff5c[_0x1397e8(0x1c4)];_0x2b8147[_0x1397e8(0x267)][_0x1397e8(0x276)](_0x1397e8(0x294)+_0x45d773[_0x1397e8(0x24b)](0x5)+_0x1397e8(0x138)+(_0x7af621?_0x1397e8(0x25e):'OK')),_0x2b8147[_0x1397e8(0x13a)](_0x1397e8(0x206),{'val':_0x45d773,'ack':!![]}),_0x2b8147['setStateAsync'](_0x1397e8(0x242),{'val':new Date()[_0x1397e8(0x210)](),'ack':!![]});if(_0x132873)_0x2b8147[_0x1397e8(0x13a)]('analysis.security.currentThreshold',{'val':_0x132873,'ack':!![]});if(_0x7af621){let _0x515d5c='UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20'+_0x45d773[_0x1397e8(0x24b)](0x4)+')';_0x10612f&&_0x10612f!==_0x1397e8(0x295)&&(_0x515d5c+=_0x1397e8(0x218)+_0x10612f),_0x2b8147[_0x1397e8(0x13a)](_0x1397e8(0x1a4),{'val':!![],'ack':!![]}),_0x2b8147[_0x1397e8(0x13a)](_0x1397e8(0x1a9),{'val':_0x515d5c,'ack':!![]}),sendNotification(_0x2b8147,_0x1397e8(0x177)+_0x515d5c,![],!![]);}}else{if(_0x4bff5c[_0x1397e8(0x1f8)]==='TRAINING_COMPLETE'){const _0xf25ea=_0x4bff5c[_0x1397e8(0x1c4)][_0x1397e8(0x2b5)]||'',_0x4c1436=_0x4bff5c[_0x1397e8(0x1c4)]['threshold'],_0x314ca9=_0x4bff5c[_0x1397e8(0x1c4)][_0x1397e8(0x1b2)]?_0x1397e8(0x1f4)+new Date()[_0x1397e8(0x181)]()+'\x20('+_0xf25ea+')':_0x1397e8(0x25a)+_0x4bff5c['payload'][_0x1397e8(0x201)];_0x2b8147[_0x1397e8(0x13a)]('analysis.training.status',{'val':_0x314ca9,'ack':!![]}),_0x4bff5c[_0x1397e8(0x1c4)][_0x1397e8(0x1b2)]&&_0x4c1436&&(_0x2b8147['log'][_0x1397e8(0x276)](_0x1397e8(0x2d7)+_0x4c1436),_0x2b8147[_0x1397e8(0x13a)](_0x1397e8(0x19e),{'val':_0x4c1436,'ack':!![]}));}else{if(_0x4bff5c[_0x1397e8(0x1f8)]==='ENERGY_TRAIN_RESULT'){if(_0x4bff5c[_0x1397e8(0x1c4)][_0x1397e8(0x1b2)])try{const _0x2baa53=JSON[_0x1397e8(0x14f)](_0x4bff5c['payload'][_0x1397e8(0x2b5)]);if(_0x2baa53[_0x1397e8(0x1a7)])_0x2b8147[_0x1397e8(0x13a)](_0x1397e8(0x213),{'val':JSON[_0x1397e8(0x20a)](_0x2baa53[_0x1397e8(0x1a7)]),'ack':!![]});if(_0x2baa53[_0x1397e8(0x18b)])_0x2b8147['setStateAsync'](_0x1397e8(0x15b),{'val':JSON['stringify'](_0x2baa53[_0x1397e8(0x18b)]),'ack':!![]});}catch(_0x36e6d4){}}else{if(_0x4bff5c[_0x1397e8(0x1f8)]===_0x1397e8(0x171)){if(_0x4bff5c[_0x1397e8(0x1c4)]['success'])_0x2b8147[_0x1397e8(0x267)][_0x1397e8(0x276)](_0x1397e8(0x2db));}else{if(_0x4bff5c[_0x1397e8(0x1f8)]===_0x1397e8(0x26e))_0x2b8147['setStateAsync']('analysis.health.lastCheck',{'val':new Date()['toISOString'](),'ack':!![]}),_0x2b8147[_0x1397e8(0x13a)]('analysis.health.isAnomaly',{'val':_0x4bff5c[_0x1397e8(0x1c4)][_0x1397e8(0x14d)],'ack':!![]});else _0x4bff5c['type']===_0x1397e8(0x232)&&(_0x2b8147[_0x1397e8(0x13a)](_0x1397e8(0x26d),{'val':_0x4bff5c[_0x1397e8(0x1c4)][_0x1397e8(0x2cb)],'ack':!![]}),_0x2b8147[_0x1397e8(0x13a)](_0x1397e8(0x25d),{'val':_0x4bff5c[_0x1397e8(0x1c4)]['change_percent'],'ack':!![]}));}}}}}}function runPythonHealthCheck(_0x3ed1fd){const _0x490c01=a0_0x5c43b6;if(!_0x3ed1fd['dailyDigests']||_0x3ed1fd['dailyDigests'][_0x490c01(0x235)]<0x2)return;const _0x6629d5=_0x3ed1fd[_0x490c01(0x2b4)][_0x490c01(0x1a8)](_0x269a7d=>{const _0x37eb2f=_0x490c01,_0x28f866=(_0x269a7d[_0x37eb2f(0x1d7)]||'')[_0x37eb2f(0x259)]();return ACTIVITY_LEVEL_MAP[_0x28f866]||0x32;});sendToPython(_0x3ed1fd,_0x490c01(0x22b),{'values':_0x6629d5,'tag':'Activity-Level'});}async function handleTelegramResponse(_0xd9eece,_0x460d66){const _0x1f0d4a=a0_0x5c43b6;let _0x40aa0c=_0x460d66;_0x460d66[_0x1f0d4a(0x173)]('[')&&(_0x40aa0c=_0x460d66[_0x1f0d4a(0x19c)](_0x460d66[_0x1f0d4a(0x224)](']')+0x1));if(_0x40aa0c===_0x1f0d4a(0x247))await _0xd9eece[_0x1f0d4a(0x13a)](_0x1f0d4a(0x1a4),{'val':![],'ack':!![]}),await _0xd9eece[_0x1f0d4a(0x13a)](_0x1f0d4a(0x1a9),{'val':_0x1f0d4a(0x183),'ack':!![]}),_0xd9eece[_0x1f0d4a(0x17d)]=![],sendNotification(_0xd9eece,'âœ…\x20Alarm\x20quittiert.\x20System\x20normal.',![]);else _0x40aa0c===_0x1f0d4a(0x159)&&sendNotification(_0xd9eece,_0x1f0d4a(0x219),![],!![]);}async function sendNotification(_0x78e1d,_0xbf5c41,_0x48144a=![],_0x4a72fb=![]){const _0xc68f9e=a0_0x5c43b6,_0x6f67f2=_0x78e1d[_0xc68f9e(0x277)];if(_0x6f67f2[_0xc68f9e(0x240)]){let _0x26489e={};(_0xbf5c41[_0xc68f9e(0x1bc)](_0xc68f9e(0x2a1))||_0x4a72fb)&&(_0x26489e={'reply_markup':{'inline_keyboard':[[{'text':_0xc68f9e(0x1ba),'callback_data':_0xc68f9e(0x247)}],[{'text':_0xc68f9e(0x1bb),'callback_data':'COGNI_REQUEST_CALL'}]]}}),await _0x78e1d[_0xc68f9e(0x21f)](_0x6f67f2['notifyTelegramInstance'],_0xc68f9e(0x230),{'text':_0xbf5c41,'user':_0x6f67f2[_0xc68f9e(0x19d)],..._0x26489e});}if(_0x6f67f2['notifyPushoverEnabled']){let _0x256358={'message':_0xbf5c41,'title':_0x4a72fb?_0xc68f9e(0x2ae):_0xc68f9e(0x14e),'priority':_0x4a72fb?0x2:0x1,'device':_0x6f67f2[_0xc68f9e(0x19f)]};_0x4a72fb&&(_0x256358['retry']=0x1e,_0x256358[_0xc68f9e(0x2de)]=0xe10,_0x256358[_0xc68f9e(0x1b4)]=_0xc68f9e(0x220)),await _0x78e1d[_0xc68f9e(0x21f)](_0x6f67f2[_0xc68f9e(0x17e)],'send',_0x256358);}_0x6f67f2[_0xc68f9e(0x160)]&&await _0x78e1d[_0xc68f9e(0x21f)](_0x6f67f2[_0xc68f9e(0x268)],_0xc68f9e(0x230),{'text':_0xbf5c41,'to':_0x6f67f2['notifyEmailRecipient']});}async function runGeminiAnalysis(_0x19d6f0,_0x3b2b79=''){const _0x1b6f45=a0_0x5c43b6;if(!_0x19d6f0['geminiModel'])return;if(_0x19d6f0[_0x1b6f45(0x29b)][_0x1b6f45(0x235)]===0x0)return;const _0x453853=_0x19d6f0[_0x1b6f45(0x29b)][_0x1b6f45(0x16c)](0x0,0xf),_0x43223c=await getWeatherContext(_0x19d6f0),_0x1bb438=_0x19d6f0['currentSystemMode'],_0x39e7f8=PERSONA_MAPPING[_0x19d6f0[_0x1b6f45(0x277)][_0x1b6f45(0x28e)]||_0x1b6f45(0x20b)],_0x3dd18a=_0x19d6f0[_0x1b6f45(0x277)][_0x1b6f45(0x189)]||_0x1b6f45(0x260);let _0x210e3c=_0x1b6f45(0x2b6);try{const _0x1f3d09=await _0x19d6f0['getStateAsync']('system.presenceWho');if(_0x1f3d09&&_0x1f3d09[_0x1b6f45(0x2df)])_0x210e3c=_0x1f3d09['val'];}catch(_0x37049a){}let _0x57dcbf=![];try{const _0x32e8ab=await _0x19d6f0[_0x1b6f45(0x231)](_0x1b6f45(0x211));if(_0x32e8ab&&_0x32e8ab[_0x1b6f45(0x2df)])_0x57dcbf=!![];}catch(_0x1fffc1){}const _0x46f4c9='ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20'+_0x39e7f8+_0x1b6f45(0x2da)+_0x3dd18a+_0x1b6f45(0x2c1)+_0x1bb438+_0x1b6f45(0x261)+_0x43223c+_0x1b6f45(0x290)+_0x210e3c+_0x1b6f45(0x27d)+JSON['stringify'](_0x453853)+_0x1b6f45(0x1c6)+_0x3b2b79+_0x1b6f45(0x257);try{const _0x20ced5=await _0x19d6f0['geminiModel']['generateContent'](_0x46f4c9),_0x463c78=JSON[_0x1b6f45(0x14f)](_0x20ced5['response'][_0x1b6f45(0x20e)]()[_0x1b6f45(0x2bc)](/```json|```/g,'')[_0x1b6f45(0x1db)]());await _0x19d6f0[_0x1b6f45(0x13a)](_0x1b6f45(0x291),{'val':JSON[_0x1b6f45(0x20a)](_0x463c78),'ack':!![]});if(_0x463c78[_0x1b6f45(0x269)])await _0x19d6f0[_0x1b6f45(0x13a)](_0x1b6f45(0x27f),{'val':_0x463c78[_0x1b6f45(0x269)],'ack':!![]});const _0x4ffaff={'timestamp':Date['now'](),'id':Date[_0x1b6f45(0x22c)]()['toString'](),'analysis':{'activity':{'summary':_0x463c78['summary'],'isAlert':_0x463c78['isAlert'],'alertReason':_0x463c78[_0x1b6f45(0x251)]},'comfort':{'automationProposal':_0x463c78[_0x1b6f45(0x14c)]}}};await updateAnalysisHistory(_0x19d6f0,_0x4ffaff);const _0x4cfdfa=_0x463c78[_0x1b6f45(0x194)]||![];_0x4cfdfa!==_0x19d6f0[_0x1b6f45(0x17d)]&&(await _0x19d6f0['setStateAsync'](_0x1b6f45(0x1a4),{'val':_0x4cfdfa,'ack':!![]}),_0x19d6f0['lastAlertState']=_0x4cfdfa,_0x4cfdfa&&(await _0x19d6f0[_0x1b6f45(0x13a)](_0x1b6f45(0x1a9),{'val':_0x463c78['alertReason'],'ack':!![]}),sendNotification(_0x19d6f0,_0x1b6f45(0x25c)+_0x463c78[_0x1b6f45(0x251)],![],_0x463c78[_0x1b6f45(0x198)])));if(_0x463c78['automationProposal']&&_0x463c78[_0x1b6f45(0x14c)][_0x1b6f45(0x1d3)]){await _0x19d6f0[_0x1b6f45(0x13a)]('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),await _0x19d6f0[_0x1b6f45(0x13a)](_0x1b6f45(0x1c3),{'val':_0x463c78[_0x1b6f45(0x14c)]['description'],'ack':!![]}),await _0x19d6f0[_0x1b6f45(0x13a)](_0x1b6f45(0x298),{'val':_0x463c78[_0x1b6f45(0x14c)]['targetId'],'ack':!![]}),await _0x19d6f0[_0x1b6f45(0x13a)]('analysis.automation.targetValue',{'val':JSON['stringify'](_0x463c78[_0x1b6f45(0x14c)][_0x1b6f45(0x25b)]),'ack':!![]});if(_0x57dcbf)executeAutomationAction(_0x19d6f0);}}catch(_0x4d7d21){_0x19d6f0[_0x1b6f45(0x267)]['error'](_0x1b6f45(0x2c5)+_0x4d7d21['message']);}}async function createDailyDigest(_0x4539b3){const _0x5777a1=a0_0x5c43b6;if(!_0x4539b3[_0x5777a1(0x17b)])return;await _0x4539b3[_0x5777a1(0x13a)](LTM_DP_STATUS,{'val':_0x5777a1(0x153),'ack':!![]});if(!_0x4539b3[_0x5777a1(0x236)]||_0x4539b3[_0x5777a1(0x1f7)][_0x5777a1(0x235)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x4539b3['setStateAsync'](LTM_DP_STATUS,{'val':'Skipped\x20(No\x20AI\x20or\x20Data)','ack':!![]});return;}const _0x4e4f38=JSON[_0x5777a1(0x14f)](JSON[_0x5777a1(0x20a)](_0x4539b3[_0x5777a1(0x1f7)])),_0x40f720=_0x4e4f38[_0x5777a1(0x235)],_0x35e9b7=_0x5777a1(0x200)+JSON[_0x5777a1(0x20a)](_0x4e4f38);try{const _0x19cea8=await _0x4539b3[_0x5777a1(0x236)][_0x5777a1(0x2a0)](_0x35e9b7),_0x3d4e35=JSON['parse'](_0x19cea8[_0x5777a1(0x1cf)][_0x5777a1(0x20e)]()[_0x5777a1(0x2bc)](/```json|```/g,'')['trim']()),_0x2deb2e={'timestamp':new Date()['toISOString'](),'eventCount':_0x40f720,'summary':_0x3d4e35[_0x5777a1(0x269)]||_0x5777a1(0x187),'activityLevel':_0x3d4e35[_0x5777a1(0x1d7)]||_0x5777a1(0x2a9),'systemMode':_0x4539b3['currentSystemMode']};_0x4539b3[_0x5777a1(0x2b4)]['push'](_0x2deb2e),await saveDailyDigests(_0x4539b3),_0x4539b3[_0x5777a1(0x1f7)]=[],await saveRawEventLog(_0x4539b3),await _0x4539b3[_0x5777a1(0x13a)](LTM_DP_STATUS,{'val':_0x5777a1(0x1f2),'ack':!![]});if(_0x4539b3[_0x5777a1(0x17b)])sendToPython(_0x4539b3,_0x5777a1(0x283),{'digest':_0x2deb2e});}catch(_0x362793){_0x4539b3[_0x5777a1(0x267)][_0x5777a1(0x2d4)](_0x362793[_0x5777a1(0x1f3)]);}}function setupLtmScheduler(_0x11408b){const _0x123e5d=a0_0x5c43b6;try{if(_0x11408b[_0x123e5d(0x254)])_0x11408b[_0x123e5d(0x254)][_0x123e5d(0x28c)]();if(!_0x11408b['isProVersion'])return;_0x11408b[_0x123e5d(0x254)]=schedule[_0x123e5d(0x2b1)](LTM_SCHEDULE,()=>createDailyDigest(_0x11408b));}catch(_0x223508){_0x11408b[_0x123e5d(0x267)][_0x123e5d(0x2d4)](_0x123e5d(0x156)+_0x223508['message']);}}function setupModeResetScheduler(_0x52e513){const _0x1287bf=a0_0x5c43b6;try{if(_0x52e513[_0x1287bf(0x1f0)])_0x52e513[_0x1287bf(0x1f0)][_0x1287bf(0x28c)]();_0x52e513[_0x1287bf(0x1f0)]=schedule['scheduleJob'](MODE_RESET_SCHEDULE,async()=>{const _0x3d22f8=_0x1287bf;await loadSystemMode(_0x52e513),AUTO_RESET_MODES[_0x3d22f8(0x1bc)](_0x52e513[_0x3d22f8(0x229)])&&await _0x52e513[_0x3d22f8(0x13a)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES['NORMAL'],'ack':![]});});}catch(_0x7598f4){_0x52e513[_0x1287bf(0x267)][_0x1287bf(0x2d4)](_0x1287bf(0x13e)+_0x7598f4[_0x1287bf(0x1f3)]);}}function setupDriftAnalysisScheduler(_0x485fc1){const _0xf58375=a0_0x5c43b6;try{if(_0x485fc1[_0xf58375(0x255)])clearInterval(_0x485fc1[_0xf58375(0x255)]);if(!_0x485fc1['isProVersion'])return;_0x485fc1['driftAnalysisTimer']=setInterval(()=>runBaselineDriftAnalysis(_0x485fc1),(_0x485fc1[_0xf58375(0x277)][_0xf58375(0x2b2)]||0x18)*0x36ee80),setTimeout(()=>runBaselineDriftAnalysis(_0x485fc1),0x1388);}catch(_0x108d5a){_0x485fc1[_0xf58375(0x267)]['error'](_0xf58375(0x1be)+_0x108d5a['message']);}}function setupBriefingScheduler(_0x3f3b9d){const _0x58195a=a0_0x5c43b6;try{if(_0x3f3b9d[_0x58195a(0x1b7)])_0x3f3b9d[_0x58195a(0x1b7)]['cancel']();if(!_0x3f3b9d[_0x58195a(0x277)][_0x58195a(0x2d1)])return;const _0x22bdf9=(_0x3f3b9d[_0x58195a(0x277)][_0x58195a(0x1cc)]||_0x58195a(0x1ad))[_0x58195a(0x2a3)](':'),_0x194d2d=parseInt(_0x22bdf9[0x0])||0x8,_0x1277c5=parseInt(_0x22bdf9[0x1])||0x0,_0x5d85ce=_0x1277c5+'\x20'+_0x194d2d+'\x20*\x20*\x20*';_0x3f3b9d[_0x58195a(0x1b7)]=schedule[_0x58195a(0x2b1)](_0x5d85ce,()=>{sendMorningBriefing(_0x3f3b9d);});}catch(_0x593cf1){_0x3f3b9d[_0x58195a(0x267)]['error']('Briefing\x20Sched\x20Error:\x20'+_0x593cf1[_0x58195a(0x1f3)]);}}async function runBaselineDriftAnalysis(_0x549b0a){const _0x1d4826=a0_0x5c43b6;if(!_0x549b0a[_0x1d4826(0x17b)]||!_0x549b0a[_0x1d4826(0x236)])return;const _0x3b8d00=_0x549b0a['config']['ltmStbWindowDays']||0xe;if(_0x549b0a[_0x1d4826(0x2b4)][_0x1d4826(0x235)]<_0x3b8d00+0x7){await _0x549b0a[_0x1d4826(0x13a)](LTM_DP_DRIFT_STATUS,{'val':_0x1d4826(0x207),'ack':!![]});return;}const _0x785915=_0x549b0a[_0x1d4826(0x2b4)][_0x1d4826(0x16c)](-_0x3b8d00),_0x5ce963=_0x549b0a[_0x1d4826(0x2b4)]['slice'](0x0,_0x549b0a[_0x1d4826(0x2b4)][_0x1d4826(0x235)]-_0x3b8d00),_0x5516ad='ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20'+JSON[_0x1d4826(0x20a)](_0x5ce963)+_0x1d4826(0x241)+JSON[_0x1d4826(0x20a)](_0x785915);try{const _0xe41999=await _0x549b0a[_0x1d4826(0x236)][_0x1d4826(0x2a0)](_0x5516ad),_0x25ca3f=JSON[_0x1d4826(0x14f)](_0xe41999['response']['text']()[_0x1d4826(0x2bc)](/```json|```/g,'')[_0x1d4826(0x1db)]());_0x25ca3f[_0x1d4826(0x1c7)]&&(await _0x549b0a[_0x1d4826(0x13a)](LTM_DP_DRIFT_STATUS,{'val':_0x25ca3f[_0x1d4826(0x1c7)],'ack':!![]}),await _0x549b0a[_0x1d4826(0x13a)](LTM_DP_DRIFT_DETAILS,{'val':_0x25ca3f[_0x1d4826(0x297)],'ack':!![]}),await _0x549b0a[_0x1d4826(0x13a)](LTM_DP_DRIFT_LAST_CHECK,{'val':Date[_0x1d4826(0x22c)](),'ack':!![]}));}catch(_0x56ec04){}}class CogniLiving extends utils[a0_0x5c43b6(0x1fd)]{constructor(_0x36275c){const _0x4e1d26=a0_0x5c43b6;super({..._0x36275c,'name':_0x4e1d26(0x188)}),this['eventHistory']=[],this[_0x4e1d26(0x299)]=[],this[_0x4e1d26(0x1f7)]=[],this[_0x4e1d26(0x2b4)]=[],this[_0x4e1d26(0x2c0)]={},this['systemConfig']={'latitude':0x0,'longitude':0x0,'city':''},this['isPresent']=!![],this[_0x4e1d26(0x2bb)]=null,this[_0x4e1d26(0x1ae)]=null,this[_0x4e1d26(0x185)]=![],this[_0x4e1d26(0x158)]=null,this[_0x4e1d26(0x236)]=null,this[_0x4e1d26(0x229)]=SYSTEM_MODES['NORMAL'],this[_0x4e1d26(0x17b)]=![],this[_0x4e1d26(0x17d)]=![],this[_0x4e1d26(0x175)]=_0x4e1d26(0x2dd),this[_0x4e1d26(0x1c5)]=null,this[_0x4e1d26(0x254)]=null,this[_0x4e1d26(0x1f0)]=null,this['driftAnalysisTimer']=null,this[_0x4e1d26(0x1b7)]=null,this[_0x4e1d26(0x263)]=null,this[_0x4e1d26(0x2d9)]=![],this['on']('ready',this['onReady'][_0x4e1d26(0x1eb)](this)),this['on'](_0x4e1d26(0x1b9),this[_0x4e1d26(0x237)]['bind'](this)),this['on'](_0x4e1d26(0x1d9),this[_0x4e1d26(0x1e7)]['bind'](this)),this['on'](_0x4e1d26(0x1f3),this[_0x4e1d26(0x287)]['bind'](this));}async['onReady'](){const _0x5239ea=a0_0x5c43b6;this[_0x5239ea(0x267)][_0x5239ea(0x276)]('cogni-living\x20adapter\x20starting\x20(v'+this[_0x5239ea(0x1ef)]+_0x5239ea(0x1cb));if(!checkAndInstall(this))return;await startSystem(this);}[a0_0x5c43b6(0x1e7)](_0x573bd6){const _0x43ad0e=a0_0x5c43b6;if(this[_0x43ad0e(0x1c5)])clearInterval(this[_0x43ad0e(0x1c5)]);if(this[_0x43ad0e(0x255)])clearInterval(this[_0x43ad0e(0x255)]);if(this[_0x43ad0e(0x254)])this[_0x43ad0e(0x254)][_0x43ad0e(0x28c)]();if(this[_0x43ad0e(0x1f0)])this[_0x43ad0e(0x1f0)][_0x43ad0e(0x28c)]();if(this[_0x43ad0e(0x1b7)])this[_0x43ad0e(0x1b7)][_0x43ad0e(0x28c)]();if(this[_0x43ad0e(0x2bb)])clearTimeout(this[_0x43ad0e(0x2bb)]);if(this[_0x43ad0e(0x1ae)])clearTimeout(this[_0x43ad0e(0x1ae)]);stopPythonService(this),_0x573bd6();}async[a0_0x5c43b6(0x237)](_0x176d4f,_0x2940c8){const _0x294eda=a0_0x5c43b6;if(!_0x2940c8||this[_0x294eda(0x2d9)])return;if(_0x176d4f[_0x294eda(0x1bc)](_0x294eda(0x13f))&&_0x176d4f[_0x294eda(0x286)](_0x294eda(0x274))&&_0x2940c8['val']){await handleTelegramResponse(this,_0x2940c8['val']);return;}if(_0x176d4f===this[_0x294eda(0x1a6)]+'.'+SYSTEM_DP_MODE){if(_0x2940c8[_0x294eda(0x2df)]&&Object['values'](SYSTEM_MODES)[_0x294eda(0x1bc)](_0x2940c8[_0x294eda(0x2df)])){this[_0x294eda(0x229)]=_0x2940c8[_0x294eda(0x2df)];if(_0x2940c8['val']===SYSTEM_MODES[_0x294eda(0x284)])await setPresence(this,![]);else await setPresence(this,!![]);}if(!_0x2940c8['ack'])this[_0x294eda(0x21a)](_0x176d4f,{'val':this[_0x294eda(0x229)],'ack':!![]});return;}if(!_0x2940c8['ack']){_0x176d4f['includes'](_0x294eda(0x20d))&&_0x2940c8[_0x294eda(0x2df)]&&(this['setState'](_0x176d4f,{'val':![],'ack':!![]}),runGeminiAnalysis(this));if(_0x176d4f['includes'](_0x294eda(0x199))&&_0x2940c8[_0x294eda(0x2df)]){this[_0x294eda(0x21a)](_0x176d4f,{'val':![],'ack':!![]});if(this[_0x294eda(0x17b)])createDailyDigest(this);}_0x176d4f[_0x294eda(0x1bc)](_0x294eda(0x190))&&_0x2940c8[_0x294eda(0x2df)]&&(this[_0x294eda(0x21a)](_0x176d4f,{'val':![],'ack':!![]}),sendMorningBriefing(this));_0x176d4f[_0x294eda(0x1bc)](_0x294eda(0x22d))&&_0x2940c8[_0x294eda(0x2df)]&&(this[_0x294eda(0x21a)](_0x176d4f,{'val':![],'ack':!![]}),executeAutomationAction(this));if(_0x176d4f[_0x294eda(0x1bc)](_0x294eda(0x14b))&&_0x2940c8[_0x294eda(0x2df)]){this['setState'](_0x176d4f,{'val':![],'ack':!![]});if(this[_0x294eda(0x17b)])try{const _0x183c99=await this[_0x294eda(0x231)]('LTM.trainingData.sequences');if(_0x183c99&&_0x183c99[_0x294eda(0x2df)]){const _0x1b1ee0=JSON[_0x294eda(0x14f)](_0x183c99[_0x294eda(0x2df)]);this['log'][_0x294eda(0x276)](_0x294eda(0x27a)),this[_0x294eda(0x13a)]('analysis.training.status',{'val':_0x294eda(0x144),'ack':!![]}),sendToPython(this,_0x294eda(0x2c9),{'sequences':_0x1b1ee0});}}catch(_0x5addbf){this['log'][_0x294eda(0x2d4)]('Training\x20Error:\x20'+_0x5addbf['message']);}}if(_0x176d4f['includes']('analysis.training.triggerHealth')&&_0x2940c8[_0x294eda(0x2df)]){this[_0x294eda(0x21a)](_0x176d4f,{'val':![],'ack':!![]});if(this[_0x294eda(0x17b)])try{const _0x5116f2=await this[_0x294eda(0x231)](LTM_DP_DAILY_DIGESTS);if(_0x5116f2&&_0x5116f2[_0x294eda(0x2df)])sendToPython(this,_0x294eda(0x1d0),{'digests':JSON[_0x294eda(0x14f)](_0x5116f2[_0x294eda(0x2df)])});}catch(_0x17fa6f){}}if(_0x176d4f['includes']('analysis.training.triggerEnergy')&&_0x2940c8[_0x294eda(0x2df)]){this[_0x294eda(0x21a)](_0x176d4f,{'val':![],'ack':!![]});if(this[_0x294eda(0x17b)])try{const _0x4aa23e=await this['getStateAsync'](_0x294eda(0x24f));if(_0x4aa23e&&_0x4aa23e[_0x294eda(0x2df)])sendToPython(this,_0x294eda(0x1d6),{'points':JSON['parse'](_0x4aa23e[_0x294eda(0x2df)])});}catch(_0x3c8050){}}return;}if(this['config'][_0x294eda(0x250)]&&this[_0x294eda(0x277)]['presenceDevices'][_0x294eda(0x1bc)](_0x176d4f)){await checkWifiPresence(this);return;}const _0x1e62b8=(this[_0x294eda(0x277)][_0x294eda(0x203)]||[])[_0x294eda(0x1dd)](_0x43e8f2=>_0x43e8f2['id']===_0x176d4f);if(_0x1e62b8)processSensorEvent(this,_0x176d4f,_0x2940c8,_0x1e62b8);}async[a0_0x5c43b6(0x287)](_0x273f82){const _0x429e5b=a0_0x5c43b6;if(typeof _0x273f82===_0x429e5b(0x18a)&&_0x273f82['message']){if(_0x273f82['command']===_0x429e5b(0x20f)){const _0x1db5cf=_0x273f82[_0x429e5b(0x1f3)]['apiKey']||this[_0x429e5b(0x277)]['geminiApiKey'];if(!_0x1db5cf)return this[_0x429e5b(0x29c)](_0x273f82[_0x429e5b(0x15d)],_0x273f82[_0x429e5b(0x1da)],{'success':![],'message':'Kein\x20API\x20Key.'},_0x273f82[_0x429e5b(0x249)]);try{const _0x47ae8f=new GoogleGenerativeAI(_0x1db5cf),_0x7b95e=_0x47ae8f[_0x429e5b(0x1d8)]({'model':GEMINI_MODEL}),_0x2c1046=await _0x7b95e[_0x429e5b(0x2a0)]('Hi');this[_0x429e5b(0x29c)](_0x273f82[_0x429e5b(0x15d)],_0x273f82[_0x429e5b(0x1da)],{'success':!![],'message':_0x429e5b(0x154)+_0x2c1046[_0x429e5b(0x1cf)][_0x429e5b(0x20e)]()},_0x273f82['callback']);}catch(_0x2c541f){this['sendTo'](_0x273f82[_0x429e5b(0x15d)],_0x273f82['command'],{'success':![],'message':'Err:\x20'+_0x2c541f[_0x429e5b(0x1f3)]},_0x273f82[_0x429e5b(0x249)]);}}else{if(_0x273f82[_0x429e5b(0x1da)]===_0x429e5b(0x1c2)){const _0xfdc42=await getWeatherContext(this),_0x1eb37b=await getCalendarContext(this);this[_0x429e5b(0x29c)](_0x273f82['from'],_0x273f82[_0x429e5b(0x1da)],{'success':!![],'weather':_0xfdc42,'calendar':_0x1eb37b},_0x273f82['callback']);}else{if(_0x273f82[_0x429e5b(0x1da)]===_0x429e5b(0x178)){if(!this[_0x429e5b(0x17b)])return this[_0x429e5b(0x29c)](_0x273f82[_0x429e5b(0x15d)],_0x273f82[_0x429e5b(0x1da)],{'success':![],'isPro':![]},_0x273f82[_0x429e5b(0x249)]);let _0x90d208={'status':_0x429e5b(0x289)};try{const _0x554041=await this[_0x429e5b(0x231)](LTM_DP_DRIFT_STATUS);_0x90d208[_0x429e5b(0x166)]=_0x554041?_0x554041[_0x429e5b(0x2df)]:'N/A';}catch(_0x2bdbfa){}this[_0x429e5b(0x29c)](_0x273f82[_0x429e5b(0x15d)],_0x273f82[_0x429e5b(0x1da)],{'success':!![],'isPro':!![],'dailyDigests':this[_0x429e5b(0x2b4)],'driftAnalysis':_0x90d208,'analysisHistory':this['analysisHistory']},_0x273f82[_0x429e5b(0x249)]);}else{if(_0x273f82['command']==='getOverviewData'){const _0x4d0783=this['dailyDigests'][_0x429e5b(0x235)],_0x42b7dc=new Date(),_0x182b41=new Date(_0x42b7dc['getFullYear'](),_0x42b7dc[_0x429e5b(0x1e0)](),_0x42b7dc[_0x429e5b(0x1ac)]())[_0x429e5b(0x180)](),_0x2abb7c=this[_0x429e5b(0x1f7)][_0x429e5b(0x1ed)](_0x141512=>new Date(_0x141512[_0x429e5b(0x140)])['getTime']()>_0x182b41)['length'],_0x4768d5=new Array(0x18)['fill'](0x0);this[_0x429e5b(0x1f7)][_0x429e5b(0x167)](_0x21de74=>{const _0x2f76d4=_0x429e5b,_0x4fd08b=new Date(_0x21de74[_0x2f76d4(0x140)]);if(_0x4fd08b[_0x2f76d4(0x180)]()>_0x182b41)_0x4768d5[_0x4fd08b[_0x2f76d4(0x2b9)]()]++;});let _0x2daca9={'status':_0x429e5b(0x289)};try{const _0xb2df90=await this[_0x429e5b(0x231)](LTM_DP_DRIFT_STATUS);_0x2daca9[_0x429e5b(0x166)]=_0xb2df90?_0xb2df90[_0x429e5b(0x2df)]:_0x429e5b(0x289);}catch(_0x27ab83){}let _0x1e34af='';try{const _0x4cf75a=await this[_0x429e5b(0x231)](_0x429e5b(0x1d4));_0x1e34af=_0x4cf75a?_0x4cf75a[_0x429e5b(0x2df)]:'';}catch(_0x49ff5e){}let _0x15ea79=null;!this['geminiModel']&&(_0x15ea79=this['config'][_0x429e5b(0x270)]?_0x429e5b(0x2e1):_0x429e5b(0x1fb));let _0x1d1c49={'detected':![],'description':'','targetId':'','targetValue':'','autoApply':![]};try{const _0x37cebc=await this[_0x429e5b(0x231)]('analysis.automation.patternDetected');if(_0x37cebc&&_0x37cebc[_0x429e5b(0x2df)]){_0x1d1c49[_0x429e5b(0x1d3)]=!![];const _0x5ce3bf=await this['getStateAsync'](_0x429e5b(0x1c3));_0x1d1c49['description']=_0x5ce3bf?_0x5ce3bf[_0x429e5b(0x2df)]:'';const _0x40428d=await this['getStateAsync'](_0x429e5b(0x298));_0x1d1c49[_0x429e5b(0x21e)]=_0x40428d?_0x40428d[_0x429e5b(0x2df)]:'';const _0x341a76=await this[_0x429e5b(0x231)](_0x429e5b(0x151));_0x1d1c49[_0x429e5b(0x25b)]=_0x341a76?_0x341a76[_0x429e5b(0x2df)]:'';}const _0x7e98de=await this[_0x429e5b(0x231)](_0x429e5b(0x211));_0x1d1c49[_0x429e5b(0x184)]=_0x7e98de?!!_0x7e98de[_0x429e5b(0x2df)]:![];}catch(_0x1e9ca2){}this['sendTo'](_0x273f82['from'],_0x273f82[_0x429e5b(0x1da)],{'success':!![],'eventHistory':this[_0x429e5b(0x29b)][_0x429e5b(0x16c)](0x0,0xf),'stats':{'digestCount':_0x4d0783,'eventCountToday':_0x2abb7c,'hourlyActivity':_0x4768d5,'driftStatus':_0x2daca9[_0x429e5b(0x166)],'isPresent':this[_0x429e5b(0x14a)],'presenceWho':_0x1e34af,'minDays':this[_0x429e5b(0x277)][_0x429e5b(0x2b7)]||0x7,'stbDays':this[_0x429e5b(0x277)][_0x429e5b(0x176)]||0xe,'ltbDays':this[_0x429e5b(0x277)][_0x429e5b(0x1b0)]||0x3c,'systemError':_0x15ea79},'automation':_0x1d1c49},_0x273f82[_0x429e5b(0x249)]);}else{if(_0x273f82[_0x429e5b(0x1da)]===_0x429e5b(0x24c))try{const _0x22428e=await scanForDevices(this,_0x273f82[_0x429e5b(0x1f3)]||{});this['sendTo'](_0x273f82[_0x429e5b(0x15d)],_0x273f82[_0x429e5b(0x1da)],{'success':!![],'devices':_0x22428e},_0x273f82[_0x429e5b(0x249)]);}catch(_0x43af20){this['sendTo'](_0x273f82[_0x429e5b(0x15d)],_0x273f82[_0x429e5b(0x1da)],{'success':![],'error':_0x43af20[_0x429e5b(0x1f3)]},_0x273f82[_0x429e5b(0x249)]);}else{if(_0x273f82[_0x429e5b(0x1da)]===_0x429e5b(0x1fe)){const _0x4d3c0d=await this['getForeignObjectsAsync'](_0x429e5b(0x157),_0x429e5b(0x162)),_0x200a0c=[];if(_0x4d3c0d)for(const _0x26f65 in _0x4d3c0d){const _0x52bb4b=_0x4d3c0d[_0x26f65],_0x4f6fdb=(_0x52bb4b[_0x429e5b(0x152)]&&typeof _0x52bb4b[_0x429e5b(0x152)]['name']==='object'?_0x52bb4b[_0x429e5b(0x152)][_0x429e5b(0x2b8)]['de']:_0x52bb4b[_0x429e5b(0x152)]['name'])||_0x52bb4b[_0x429e5b(0x152)]['name'];_0x200a0c[_0x429e5b(0x256)]({'id':_0x26f65,'name':_0x4f6fdb});}this[_0x429e5b(0x29c)](_0x273f82[_0x429e5b(0x15d)],_0x273f82[_0x429e5b(0x1da)],{'success':!![],'enums':_0x200a0c},_0x273f82[_0x429e5b(0x249)]);}else{if(_0x273f82[_0x429e5b(0x1da)]===_0x429e5b(0x29a)){const _0x40919c=_0x273f82[_0x429e5b(0x1f3)][_0x429e5b(0x2a4)];if(!_0x40919c)return this['sendTo'](_0x273f82[_0x429e5b(0x15d)],_0x273f82['command'],{'success':![],'error':_0x429e5b(0x2c6)},_0x273f82[_0x429e5b(0x249)]);const _0x363ec4=await getCalendarNames(this,_0x40919c);this['sendTo'](_0x273f82['from'],_0x273f82['command'],{'success':!![],'names':_0x363ec4},_0x273f82[_0x429e5b(0x249)]);}else{if(_0x273f82[_0x429e5b(0x1da)]===_0x429e5b(0x15f)){const {targetId:_0x1849b1,targetValue:_0x38bd78}=_0x273f82[_0x429e5b(0x1f3)];this[_0x429e5b(0x267)][_0x429e5b(0x276)](_0x429e5b(0x20c)+_0x1849b1+'\x20=\x20'+_0x38bd78),await this[_0x429e5b(0x13a)](_0x429e5b(0x1ce),{'val':!![],'ack':!![]}),await this[_0x429e5b(0x13a)]('analysis.automation.description',{'val':'SIMULATION:\x20Test-Vorschlag\x20fÃ¼r\x20'+_0x1849b1,'ack':!![]}),await this[_0x429e5b(0x13a)](_0x429e5b(0x298),{'val':_0x1849b1,'ack':!![]}),await this[_0x429e5b(0x13a)](_0x429e5b(0x151),{'val':_0x38bd78,'ack':!![]}),this['sendTo'](_0x273f82['from'],_0x273f82[_0x429e5b(0x1da)],{'success':!![]},_0x273f82[_0x429e5b(0x249)]);}else{if(_0x273f82[_0x429e5b(0x1da)]===_0x429e5b(0x27e)){const {historyId:_0x16d668,rating:_0x1581a8,comment:_0x428905,alertReason:_0x499531}=_0x273f82[_0x429e5b(0x1f3)];_0x16d668&&_0x1581a8?(await saveFeedback(this,{'timestamp':Date[_0x429e5b(0x22c)](),'historyId':_0x16d668,'rating':_0x1581a8,'comment':_0x428905,'alertReason':_0x499531}),this['sendTo'](_0x273f82[_0x429e5b(0x15d)],_0x273f82['command'],{'success':!![]},_0x273f82['callback'])):this[_0x429e5b(0x29c)](_0x273f82['from'],_0x273f82[_0x429e5b(0x1da)],{'success':![],'error':_0x429e5b(0x1cd)},_0x273f82['callback']);}else _0x273f82[_0x429e5b(0x1da)]==='dismissAutomation'&&(this[_0x429e5b(0x267)]['info'](_0x429e5b(0x21c)),await this[_0x429e5b(0x13a)](_0x429e5b(0x1ce),{'val':![],'ack':!![]}),await this['setStateAsync'](_0x429e5b(0x1c3),{'val':'','ack':!![]}),this[_0x429e5b(0x29c)](_0x273f82[_0x429e5b(0x15d)],_0x273f82[_0x429e5b(0x1da)],{'success':!![]},_0x273f82[_0x429e5b(0x249)]));}}}}}}}}}}}if(require[a0_0x5c43b6(0x141)]!==module)module[a0_0x5c43b6(0x27c)]=_0x415ba1=>new CogniLiving(_0x415ba1);else new CogniLiving();