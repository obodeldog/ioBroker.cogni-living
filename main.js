const a0_0x5a7bc1=a0_0x173b;(function(_0x55f20b,_0x234041){const _0x47e754=a0_0x173b,_0x299830=_0x55f20b();while(!![]){try{const _0x595478=-parseInt(_0x47e754(0x23a))/0x1+-parseInt(_0x47e754(0x2ab))/0x2*(-parseInt(_0x47e754(0x246))/0x3)+parseInt(_0x47e754(0x310))/0x4*(-parseInt(_0x47e754(0x21b))/0x5)+-parseInt(_0x47e754(0x2df))/0x6+parseInt(_0x47e754(0x1bd))/0x7+-parseInt(_0x47e754(0x2cd))/0x8*(parseInt(_0x47e754(0x279))/0x9)+parseInt(_0x47e754(0x208))/0xa*(parseInt(_0x47e754(0x1ad))/0xb);if(_0x595478===_0x234041)break;else _0x299830['push'](_0x299830['shift']());}catch(_0x74f9b2){_0x299830['push'](_0x299830['shift']());}}}(a0_0x40ba,0x68bd8));const a0_0x14f6bb=(function(){let _0x526449=!![];return function(_0x3ec46f,_0x4d8427){const _0x2c852e=_0x526449?function(){if(_0x4d8427){const _0x3fafef=_0x4d8427['apply'](_0x3ec46f,arguments);return _0x4d8427=null,_0x3fafef;}}:function(){};return _0x526449=![],_0x2c852e;};}()),a0_0x34f32c=a0_0x14f6bb(this,function(){const _0x26c86f=a0_0x173b;return a0_0x34f32c[_0x26c86f(0x2e9)]()[_0x26c86f(0x227)](_0x26c86f(0x2a5))[_0x26c86f(0x2e9)]()[_0x26c86f(0x28e)](a0_0x34f32c)[_0x26c86f(0x227)](_0x26c86f(0x2a5));});a0_0x34f32c();'use strict';const utils=require(a0_0x5a7bc1(0x312)),{GoogleGenerativeAI}=require(a0_0x5a7bc1(0x2c0)),{spawn}=require('child_process'),path=require(a0_0x5a7bc1(0x2b4)),fs=require('fs'),installer=require(a0_0x5a7bc1(0x242)),scanner=require(a0_0x5a7bc1(0x294)),schedulers=require(a0_0x5a7bc1(0x258)),HISTORY_MAX_SIZE=0x32,RAW_LOG_MAX_SIZE=0x9c4,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL=a0_0x5a7bc1(0x2b3),SEQUENCE_TIMEOUT_MS=0x5*0x3c*0x3e8,MAX_TRAINING_SET_SIZE=0x1f4,THERMO_LOG_SIZE=0x3e8,EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,LTM_DP_RAW_LOG=a0_0x5a7bc1(0x2d5),LTM_DP_DAILY_DIGESTS=a0_0x5a7bc1(0x241),LTM_DP_STATUS=a0_0x5a7bc1(0x1e4),LTM_DP_TRIGGER_DIGEST=a0_0x5a7bc1(0x1df),LTM_DP_BASELINE_STATUS='LTM.baselineStatus',LTM_DP_DRIFT_CHANNEL='LTM.driftAnalysis',LTM_DP_DRIFT_STATUS=a0_0x5a7bc1(0x1ca),LTM_DP_DRIFT_DETAILS=a0_0x5a7bc1(0x2c8),LTM_DP_DRIFT_LAST_CHECK=a0_0x5a7bc1(0x1cc),SYSTEM_DP_MODE='system.mode',SYSTEM_MODES={'NORMAL':a0_0x5a7bc1(0x20f),'VACATION':'vacation','PARTY':a0_0x5a7bc1(0x2d4),'GUEST':a0_0x5a7bc1(0x313)},AUTO_RESET_MODES=[SYSTEM_MODES[a0_0x5a7bc1(0x2a6)],SYSTEM_MODES[a0_0x5a7bc1(0x23e)]],PERSONA_MAPPING={'generic':a0_0x5a7bc1(0x316),'senior_aal':a0_0x5a7bc1(0x290),'family':a0_0x5a7bc1(0x2fc),'single_comfort':a0_0x5a7bc1(0x2b2),'security':'PRIORIT√ÑT:\x20Sicherheit.'},ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};let activeSequence=[],sequenceTimer=null;async function initZombies(_0x4b390b){const _0x2b6144=a0_0x5a7bc1;try{const _0x59fcb6=[_0x2b6144(0x26c),_0x2b6144(0x2f1)];for(const _0x4882d5 of _0x59fcb6){try{const _0x109979=await _0x4b390b[_0x2b6144(0x1a1)](_0x4882d5);if(_0x109979)await _0x4b390b[_0x2b6144(0x1d6)](_0x4882d5);}catch(_0x403837){}}}catch(_0x2c2140){}}async function checkLicense(_0xa4f5dc){return!![];}async function initHistory(_0x38be39){const _0xe2b88e=a0_0x5a7bc1;try{const _0x5f09b6=await _0x38be39[_0xe2b88e(0x293)](_0xe2b88e(0x1b8));_0x5f09b6&&_0x5f09b6[_0xe2b88e(0x2ad)]&&(_0x38be39[_0xe2b88e(0x2ff)]=JSON[_0xe2b88e(0x236)](_0x5f09b6['val'][_0xe2b88e(0x2e9)]()));}catch(_0x28ce80){_0x38be39[_0xe2b88e(0x2ff)]=[];}try{const _0x7e9364=await _0x38be39[_0xe2b88e(0x293)]('analysis.analysisHistory');if(_0x7e9364&&_0x7e9364[_0xe2b88e(0x2ad)])_0x38be39[_0xe2b88e(0x202)]=JSON[_0xe2b88e(0x236)](_0x7e9364['val']['toString']());}catch(_0x2e160b){_0x38be39[_0xe2b88e(0x202)]=[];}if(_0x38be39[_0xe2b88e(0x2ff)]&&_0x38be39[_0xe2b88e(0x2ff)][_0xe2b88e(0x20a)]>0x0){_0x38be39[_0xe2b88e(0x27e)]['info'](_0xe2b88e(0x1ab));for(let _0x592e1e=_0x38be39['eventHistory'][_0xe2b88e(0x20a)]-0x1;_0x592e1e>=0x0;_0x592e1e--){const _0x48be7f=_0x38be39[_0xe2b88e(0x2ff)][_0x592e1e];if(_0x48be7f&&_0x48be7f['id']!==undefined&&_0x48be7f['value']!==undefined)_0x38be39['sensorLastValues'][_0x48be7f['id']]=_0x48be7f[_0xe2b88e(0x1c1)];}}}async function initSystemConfig(_0x96469){const _0x4fe06f=a0_0x5a7bc1;try{const _0x524976=await _0x96469[_0x4fe06f(0x2e1)](_0x4fe06f(0x1f7));if(_0x524976&&_0x524976[_0x4fe06f(0x329)])_0x96469[_0x4fe06f(0x1c2)]={'latitude':_0x524976[_0x4fe06f(0x329)]['latitude']||0x0,'longitude':_0x524976[_0x4fe06f(0x329)][_0x4fe06f(0x1ff)]||0x0,'city':_0x524976['common'][_0x4fe06f(0x1fd)]||''};}catch(_0x5e15d3){}}async function createAllObjects(_0x9cb130){const _0x2a835c=a0_0x5a7bc1;await _0x9cb130['extendObjectAsync'](_0x2a835c(0x29a),{'type':_0x2a835c(0x307),'common':{'name':'System'},'native':{}}),await _0x9cb130[_0x2a835c(0x1da)](SYSTEM_DP_MODE,{'type':_0x2a835c(0x1e9),'common':{'name':'System\x20Mode','type':'string','role':_0x2a835c(0x1e9),'read':!![],'write':!![],'def':SYSTEM_MODES[_0x2a835c(0x1fc)]},'native':{}}),await _0x9cb130[_0x2a835c(0x1a9)](_0x2a835c(0x1ba),{'type':'state','common':{'name':_0x2a835c(0x2f0),'type':'string','role':_0x2a835c(0x1f6),'read':!![],'write':![]},'native':{}}),await _0x9cb130[_0x2a835c(0x1a9)](_0x2a835c(0x1dc),{'type':_0x2a835c(0x1e9),'common':{'name':_0x2a835c(0x1fe),'type':_0x2a835c(0x32a),'role':_0x2a835c(0x1ae),'read':!![],'write':![]},'native':{}}),await _0x9cb130[_0x2a835c(0x1a9)](_0x2a835c(0x1b8),{'type':'state','common':{'name':_0x2a835c(0x254),'type':_0x2a835c(0x32a),'role':'json','read':!![],'write':![]},'native':{}}),await _0x9cb130[_0x2a835c(0x1da)](_0x2a835c(0x235),{'type':_0x2a835c(0x307),'common':{'name':_0x2a835c(0x206)},'native':{}}),await _0x9cb130[_0x2a835c(0x1a9)]('analysis.training.triggerSecurity',{'type':'state','common':{'name':_0x2a835c(0x2c6),'type':_0x2a835c(0x1bc),'role':_0x2a835c(0x297),'read':!![],'write':!![]},'native':{}}),await _0x9cb130[_0x2a835c(0x1a9)](_0x2a835c(0x1e5),{'type':_0x2a835c(0x1e9),'common':{'name':_0x2a835c(0x2f7),'type':_0x2a835c(0x1bc),'role':'button','read':!![],'write':!![]},'native':{}}),await _0x9cb130[_0x2a835c(0x1a9)](_0x2a835c(0x328),{'type':_0x2a835c(0x1e9),'common':{'name':_0x2a835c(0x1b0),'type':_0x2a835c(0x1bc),'role':_0x2a835c(0x297),'read':!![],'write':!![]},'native':{}}),await _0x9cb130[_0x2a835c(0x1a9)](_0x2a835c(0x231),{'type':'state','common':{'name':_0x2a835c(0x22a),'type':_0x2a835c(0x1bc),'role':_0x2a835c(0x297),'read':!![],'write':!![]},'native':{}}),await _0x9cb130[_0x2a835c(0x1a9)]('analysis.training.triggerTopology',{'type':_0x2a835c(0x1e9),'common':{'name':'Build\x20Topology','type':_0x2a835c(0x1bc),'role':_0x2a835c(0x297),'read':!![],'write':!![]},'native':{}}),await _0x9cb130[_0x2a835c(0x1a9)](_0x2a835c(0x1ef),{'type':_0x2a835c(0x1e9),'common':{'name':_0x2a835c(0x2f3),'type':_0x2a835c(0x32a),'role':'text','read':!![],'write':![]},'native':{}}),await _0x9cb130['extendObjectAsync'](_0x2a835c(0x24a),{'type':_0x2a835c(0x307),'common':{'name':'Security\x20Monitor'},'native':{}}),await _0x9cb130['setObjectNotExistsAsync'](_0x2a835c(0x244),{'type':_0x2a835c(0x1e9),'common':{'name':_0x2a835c(0x1a3),'type':'number','role':_0x2a835c(0x1c1),'read':!![],'write':![]},'native':{}}),await _0x9cb130[_0x2a835c(0x1a9)](_0x2a835c(0x1e6),{'type':_0x2a835c(0x1e9),'common':{'name':_0x2a835c(0x1e2),'type':_0x2a835c(0x1a8),'role':_0x2a835c(0x1c1),'read':!![],'write':![],'def':0.05},'native':{}}),await _0x9cb130[_0x2a835c(0x1a9)](_0x2a835c(0x267),{'type':_0x2a835c(0x1e9),'common':{'name':_0x2a835c(0x31e),'type':'string','role':'date','read':!![],'write':![]},'native':{}}),await _0x9cb130[_0x2a835c(0x1a9)](_0x2a835c(0x201),{'type':_0x2a835c(0x1e9),'common':{'name':'Topology\x20Matrix','type':_0x2a835c(0x32a),'role':'json','read':!![],'write':![]},'native':{}}),await _0x9cb130[_0x2a835c(0x1da)](_0x2a835c(0x230),{'type':'channel','common':{'name':'Health\x20Analysis'},'native':{}}),await _0x9cb130[_0x2a835c(0x1a9)](_0x2a835c(0x253),{'type':_0x2a835c(0x1e9),'common':{'name':'Last\x20Check','type':_0x2a835c(0x32a),'role':'date','read':!![],'write':![]},'native':{}}),await _0x9cb130[_0x2a835c(0x1a9)](_0x2a835c(0x22c),{'type':_0x2a835c(0x1e9),'common':{'name':_0x2a835c(0x260),'type':_0x2a835c(0x1bc),'role':'indicator','read':!![],'write':![]},'native':{}}),await _0x9cb130[_0x2a835c(0x1a9)](_0x2a835c(0x2ce),{'type':'state','common':{'name':_0x2a835c(0x2a0),'type':_0x2a835c(0x32a),'role':_0x2a835c(0x1f6),'read':!![],'write':![]},'native':{}}),await _0x9cb130['setObjectNotExistsAsync'](_0x2a835c(0x1d8),{'type':_0x2a835c(0x1e9),'common':{'name':_0x2a835c(0x240),'type':_0x2a835c(0x1a8),'role':'value','read':!![],'write':![]},'native':{}}),await _0x9cb130['setObjectNotExistsAsync'](_0x2a835c(0x20c),{'type':_0x2a835c(0x1e9),'common':{'name':_0x2a835c(0x2a8),'type':_0x2a835c(0x32a),'role':_0x2a835c(0x1ae),'read':!![],'write':![]},'native':{}}),await _0x9cb130[_0x2a835c(0x1a9)](_0x2a835c(0x2b8),{'type':_0x2a835c(0x1e9),'common':{'name':'Gait\x20Speed\x20Trend','type':_0x2a835c(0x1a8),'role':_0x2a835c(0x1c1),'read':!![],'write':![]},'native':{}}),await _0x9cb130['extendObjectAsync'](_0x2a835c(0x266),{'type':'channel','common':{'name':'Energy\x20Intelligence'},'native':{}}),await _0x9cb130[_0x2a835c(0x1a9)]('analysis.energy.insulationScore',{'type':'state','common':{'name':_0x2a835c(0x21e),'type':'string','role':_0x2a835c(0x1f6),'read':!![],'write':![]},'native':{}}),await _0x9cb130[_0x2a835c(0x1a9)]('analysis.energy.heatingScore',{'type':_0x2a835c(0x1e9),'common':{'name':_0x2a835c(0x247),'type':'string','role':_0x2a835c(0x1f6),'read':!![],'write':![]},'native':{}}),await _0x9cb130[_0x2a835c(0x1a9)](_0x2a835c(0x2da),{'type':_0x2a835c(0x1e9),'common':{'name':_0x2a835c(0x1e0),'type':_0x2a835c(0x32a),'role':_0x2a835c(0x1ae),'read':!![],'write':![]},'native':{}}),await _0x9cb130[_0x2a835c(0x1da)](_0x2a835c(0x2e2),{'type':_0x2a835c(0x307),'common':{'name':'LTM'},'native':{}}),await _0x9cb130[_0x2a835c(0x1da)](LTM_DP_RAW_LOG,{'type':_0x2a835c(0x1e9),'common':{'name':'Raw\x20Log','type':'string','role':_0x2a835c(0x1ae),'read':!![],'write':![]},'native':{}}),await _0x9cb130[_0x2a835c(0x1da)](LTM_DP_DAILY_DIGESTS,{'type':_0x2a835c(0x1e9),'common':{'name':'Daily\x20Digests','type':_0x2a835c(0x32a),'role':_0x2a835c(0x1ae),'read':!![],'write':![]},'native':{}}),await _0x9cb130['setObjectNotExistsAsync'](_0x2a835c(0x234),{'type':'state','common':{'name':_0x2a835c(0x31c),'type':_0x2a835c(0x32a),'role':_0x2a835c(0x1ae),'read':!![],'write':![]},'native':{}}),await _0x9cb130[_0x2a835c(0x1a9)]('LTM.trainingData.thermodynamics',{'type':'state','common':{'name':_0x2a835c(0x1a5),'type':_0x2a835c(0x32a),'role':_0x2a835c(0x1ae),'read':!![],'write':![]},'native':{}}),await _0x9cb130[_0x2a835c(0x1a9)](_0x2a835c(0x1d9),{'type':_0x2a835c(0x1e9),'common':{'name':_0x2a835c(0x212),'type':_0x2a835c(0x1bc),'role':_0x2a835c(0x297),'read':!![],'write':!![]},'native':{}}),await _0x9cb130[_0x2a835c(0x1a9)](_0x2a835c(0x207),{'type':'state','common':{'name':_0x2a835c(0x262),'type':'boolean','role':'button','read':!![],'write':!![]},'native':{}}),await _0x9cb130[_0x2a835c(0x1a9)]('analysis.isAlert',{'type':'state','common':{'name':_0x2a835c(0x2a1),'type':'boolean','role':'indicator.alarm','read':!![],'write':![]},'native':{}}),await _0x9cb130[_0x2a835c(0x1a9)](_0x2a835c(0x1b4),{'type':_0x2a835c(0x1e9),'common':{'name':_0x2a835c(0x1d2),'type':_0x2a835c(0x32a),'role':_0x2a835c(0x2cf),'read':!![],'write':![]},'native':{}}),await _0x9cb130[_0x2a835c(0x1a9)](_0x2a835c(0x2b7),{'type':_0x2a835c(0x1e9),'common':{'name':_0x2a835c(0x281),'type':_0x2a835c(0x32a),'role':_0x2a835c(0x1f6),'read':!![],'write':![]},'native':{}}),await _0x9cb130[_0x2a835c(0x1a9)]('analysis.automation.patternDetected',{'type':_0x2a835c(0x1e9),'common':{'name':'Pattern\x20Detected','type':_0x2a835c(0x1bc),'role':_0x2a835c(0x321),'read':!![],'write':![]},'native':{}}),await _0x9cb130[_0x2a835c(0x1a9)]('analysis.automation.description',{'type':_0x2a835c(0x1e9),'common':{'name':'Description','type':_0x2a835c(0x32a),'role':'text','read':!![],'write':![]},'native':{}}),await _0x9cb130[_0x2a835c(0x1a9)]('analysis.automation.detectedPatterns',{'type':_0x2a835c(0x1e9),'common':{'name':_0x2a835c(0x1dd),'type':'string','role':_0x2a835c(0x1ae),'read':!![],'write':![]},'native':{}}),await _0x9cb130[_0x2a835c(0x1a9)](_0x2a835c(0x1ce),{'type':_0x2a835c(0x1e9),'common':{'name':_0x2a835c(0x1d1),'type':'string','role':_0x2a835c(0x1f6),'read':!![],'write':![]},'native':{}}),await _0x9cb130['setObjectNotExistsAsync'](_0x2a835c(0x200),{'type':_0x2a835c(0x1e9),'common':{'name':_0x2a835c(0x1bb),'type':'string','role':_0x2a835c(0x1f6),'read':!![],'write':![]},'native':{}}),await _0x9cb130[_0x2a835c(0x1a9)]('analysis.automation.autoApply',{'type':_0x2a835c(0x1e9),'common':{'name':_0x2a835c(0x1be),'type':_0x2a835c(0x1bc),'role':'switch','read':!![],'write':!![]},'native':{}}),await _0x9cb130[_0x2a835c(0x1a9)](_0x2a835c(0x317),{'type':_0x2a835c(0x1e9),'common':{'name':'Trigger\x20Action','type':_0x2a835c(0x1bc),'role':_0x2a835c(0x297),'read':!![],'write':!![]},'native':{}});}async function loadSystemMode(_0x3a8bce){const _0x12a55c=a0_0x5a7bc1;try{const _0x8aa42c=await _0x3a8bce[_0x12a55c(0x293)](SYSTEM_DP_MODE);_0x8aa42c&&_0x8aa42c[_0x12a55c(0x2ad)]&&Object[_0x12a55c(0x192)](SYSTEM_MODES)['includes'](_0x8aa42c['val'])?_0x3a8bce['currentSystemMode']=_0x8aa42c[_0x12a55c(0x2ad)]:(_0x3a8bce[_0x12a55c(0x19e)]=SYSTEM_MODES['NORMAL'],await _0x3a8bce[_0x12a55c(0x2bb)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x12a55c(0x1fc)],'ack':!![]}));}catch(_0x5cccd6){_0x3a8bce[_0x12a55c(0x19e)]=SYSTEM_MODES['NORMAL'];}}async function loadRawEventLog(_0x40575d){const _0x29cb40=a0_0x5a7bc1;try{const _0x3eae03=await _0x40575d['getStateAsync'](LTM_DP_RAW_LOG);if(_0x3eae03&&_0x3eae03[_0x29cb40(0x2ad)])_0x40575d[_0x29cb40(0x1eb)]=JSON[_0x29cb40(0x236)](_0x3eae03[_0x29cb40(0x2ad)]);}catch(_0x37c6a){_0x40575d[_0x29cb40(0x1eb)]=[];}}function a0_0x173b(_0xc0629c,_0x55a6a8){const _0x35daff=a0_0x40ba();return a0_0x173b=function(_0x34f32c,_0x14f6bb){_0x34f32c=_0x34f32c-0x191;let _0x40badd=_0x35daff[_0x34f32c];return _0x40badd;},a0_0x173b(_0xc0629c,_0x55a6a8);}async function saveRawEventLog(_0x2227de){const _0x3582b6=a0_0x5a7bc1;if(_0x2227de['rawEventLog']['length']>RAW_LOG_MAX_SIZE)_0x2227de[_0x3582b6(0x1eb)]['splice'](0x0,_0x2227de[_0x3582b6(0x1eb)][_0x3582b6(0x20a)]-RAW_LOG_MAX_SIZE);await _0x2227de['setStateAsync'](LTM_DP_RAW_LOG,{'val':JSON[_0x3582b6(0x211)](_0x2227de[_0x3582b6(0x1eb)]),'ack':!![]});}async function loadDailyDigests(_0x4ec9e4){const _0x29346e=a0_0x5a7bc1;try{const _0x189376=await _0x4ec9e4[_0x29346e(0x293)](LTM_DP_DAILY_DIGESTS);if(_0x189376&&_0x189376['val'])_0x4ec9e4[_0x29346e(0x245)]=JSON[_0x29346e(0x236)](_0x189376[_0x29346e(0x2ad)]);}catch(_0x1ad15a){_0x4ec9e4[_0x29346e(0x245)]=[];}await updateBaselineStatus(_0x4ec9e4);}async function saveDailyDigests(_0x3c7fd5,_0x4f46de=!![]){const _0x2f6c96=a0_0x5a7bc1,_0x565979=_0x3c7fd5['config'][_0x2f6c96(0x291)]||0x3c;_0x3c7fd5[_0x2f6c96(0x245)]['length']>_0x565979&&_0x3c7fd5[_0x2f6c96(0x245)][_0x2f6c96(0x1c0)](0x0,_0x3c7fd5[_0x2f6c96(0x245)][_0x2f6c96(0x20a)]-_0x565979);await _0x3c7fd5[_0x2f6c96(0x2bb)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x2f6c96(0x211)](_0x3c7fd5[_0x2f6c96(0x245)]),'ack':!![]});if(_0x4f46de)await updateBaselineStatus(_0x3c7fd5);}async function updateAnalysisHistory(_0x10063a,_0x314d36){const _0xc4e450=a0_0x5a7bc1;_0x10063a[_0xc4e450(0x202)]['unshift'](_0x314d36);if(_0x10063a[_0xc4e450(0x202)]['length']>HISTORY_MAX_SIZE)_0x10063a['analysisHistory'][_0xc4e450(0x30a)]();await _0x10063a['setStateAsync'](_0xc4e450(0x20b),{'val':JSON[_0xc4e450(0x211)](_0x10063a[_0xc4e450(0x202)]),'ack':!![]});}async function updateBaselineStatus(_0x5e6e17){const _0x17e73d=a0_0x5a7bc1;if(!_0x5e6e17[_0x17e73d(0x233)]){await _0x5e6e17['setStateAsync'](LTM_DP_BASELINE_STATUS,{'val':'Deaktiviert\x20(Pro-Feature)','ack':!![]});return;}const _0xca79df=_0x5e6e17[_0x17e73d(0x245)][_0x17e73d(0x20a)]>=(_0x5e6e17[_0x17e73d(0x265)][_0x17e73d(0x2dd)]||0x7)?'Aktiv\x20('+_0x5e6e17[_0x17e73d(0x245)][_0x17e73d(0x20a)]+'\x20Tage)':_0x17e73d(0x1e1)+_0x5e6e17[_0x17e73d(0x245)][_0x17e73d(0x20a)]+'/'+(_0x5e6e17[_0x17e73d(0x265)][_0x17e73d(0x2dd)]||0x7)+')';await _0x5e6e17[_0x17e73d(0x2bb)](LTM_DP_BASELINE_STATUS,{'val':_0xca79df,'ack':!![]});}async function initSensorSubscriptions(_0xd05951){const _0x2408eb=a0_0x5a7bc1,_0x3c97b3=_0xd05951[_0x2408eb(0x265)]['devices'];if(_0x3c97b3)for(const _0x1bea80 of _0x3c97b3){await _0xd05951[_0x2408eb(0x2c7)](_0x1bea80['id']);}}async function initPresenceSubscriptions(_0x1f6e3c){const _0x104c01=a0_0x5a7bc1,_0x24cb36=_0x1f6e3c[_0x104c01(0x265)][_0x104c01(0x2ed)];if(_0x24cb36)for(const _0xdbce47 of _0x24cb36){await _0x1f6e3c[_0x104c01(0x2c7)](_0xdbce47);}}async function setupTelegramListener(_0x43a742){const _0x397b54=a0_0x5a7bc1,_0x5499ef=_0x43a742[_0x397b54(0x265)][_0x397b54(0x1c4)];if(_0x43a742['config'][_0x397b54(0x30d)]&&_0x5499ef)await _0x43a742[_0x397b54(0x2c7)](_0x5499ef+'.communicate.request');}async function checkWifiPresence(_0x41641a){const _0x290d25=a0_0x5a7bc1;try{const _0x1cc4c8=_0x41641a[_0x290d25(0x265)][_0x290d25(0x2ed)]||[];let _0x22b633=![];const _0x576ad6=[];for(const _0x59c53e of _0x1cc4c8){try{const _0xed44e3=await _0x41641a[_0x290d25(0x219)](_0x59c53e);_0xed44e3&&(_0xed44e3[_0x290d25(0x2ad)]===!![]||_0xed44e3['val']==='online'||_0xed44e3['val']===0x1)&&(_0x22b633=!![],_0x576ad6[_0x290d25(0x1a4)](_0x59c53e));}catch(_0x3b6961){}}return await _0x41641a['setStateAsync'](_0x290d25(0x1ba),{'val':_0x576ad6[_0x290d25(0x25a)](',\x20'),'ack':!![]}),_0x22b633&&(_0x41641a[_0x290d25(0x1c8)]&&(_0x41641a[_0x290d25(0x27e)]['info'](_0x290d25(0x319)),abortExitTimer(_0x41641a)),!_0x41641a['isPresent']&&_0x41641a[_0x290d25(0x19e)]===SYSTEM_MODES[_0x290d25(0x1fc)]&&await setPresence(_0x41641a,!![])),_0x22b633;}catch(_0x14d590){return![];}}function startExitTimer(_0x26c921){const _0xb0b70c=a0_0x5a7bc1;abortExitTimer(_0x26c921),_0x26c921[_0xb0b70c(0x2d3)]=!![],_0x26c921[_0xb0b70c(0x2b6)]=setTimeout(()=>{_0x26c921['isGracePeriodActive']=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),_0x26c921[_0xb0b70c(0x1c8)]=setTimeout(()=>{const _0x198f58=_0xb0b70c;setPresence(_0x26c921,![]),_0x26c921[_0x198f58(0x1c8)]=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}function abortExitTimer(_0x4b6b01){const _0x12a35d=a0_0x5a7bc1;if(_0x4b6b01[_0x12a35d(0x1c8)])clearTimeout(_0x4b6b01[_0x12a35d(0x1c8)]);if(_0x4b6b01['exitGraceTimer'])clearTimeout(_0x4b6b01[_0x12a35d(0x2b6)]);_0x4b6b01[_0x12a35d(0x1c8)]=null,_0x4b6b01[_0x12a35d(0x2b6)]=null,_0x4b6b01[_0x12a35d(0x2d3)]=![];}async function setPresence(_0x303ee8,_0x1f2be5){const _0xaf154b=a0_0x5a7bc1;if(_0x303ee8['isPresent']===_0x1f2be5)return;_0x303ee8['isPresent']=_0x1f2be5,await _0x303ee8[_0xaf154b(0x2bb)](_0xaf154b(0x237),{'val':_0x1f2be5,'ack':!![]});}async function executeAutomationAction(_0x386bfd){const _0x1bb612=a0_0x5a7bc1;try{const _0x3e5f14=await _0x386bfd[_0x1bb612(0x293)](_0x1bb612(0x1ce)),_0x57d4db=await _0x386bfd[_0x1bb612(0x293)](_0x1bb612(0x200));if(_0x3e5f14&&_0x3e5f14['val']&&_0x57d4db){const _0x467d8d=_0x3e5f14[_0x1bb612(0x2ad)];let _0xc03a1a=_0x57d4db[_0x1bb612(0x2ad)];try{_0xc03a1a=JSON['parse'](_0xc03a1a);}catch(_0x1dc22a){}_0x386bfd[_0x1bb612(0x27e)][_0x1bb612(0x1fb)](_0x1bb612(0x2a3)+_0x467d8d+'\x20=\x20'+_0xc03a1a),await _0x386bfd[_0x1bb612(0x2c2)](_0x467d8d,_0xc03a1a);}else _0x386bfd[_0x1bb612(0x27e)]['warn'](_0x1bb612(0x1f3));}catch(_0x515d7d){_0x386bfd[_0x1bb612(0x27e)][_0x1bb612(0x25b)](_0x1bb612(0x2ef)+_0x515d7d[_0x1bb612(0x21c)]);}}async function processSensorEvent(_0x168f01,_0x12d123,_0x463e38,_0x52c9f4){const _0x1b52f0=a0_0x5a7bc1;if(!_0x52c9f4)return;const _0x404095=_0x463e38[_0x1b52f0(0x2ad)],_0x247d09=Date['now'](),_0xffea7=_0x168f01[_0x1b52f0(0x29b)][_0x12d123];_0x168f01[_0x1b52f0(0x29b)][_0x12d123]=_0x404095;if(!_0x52c9f4[_0x1b52f0(0x193)]&&_0xffea7!=undefined&&_0xffea7==_0x404095)return;const _0x36c6de=(_0x52c9f4[_0x1b52f0(0x303)]||'')['toLowerCase'](),_0x54f903=_0x36c6de[_0x1b52f0(0x225)]('temperature')||_0x36c6de[_0x1b52f0(0x225)]('temperatur')||_0x36c6de[_0x1b52f0(0x225)]('klima')||_0x36c6de['includes'](_0x1b52f0(0x2af));_0x168f01[_0x1b52f0(0x233)]&&_0x54f903&&recordThermodynamics(_0x168f01,_0x12d123,_0x404095,_0x52c9f4[_0x1b52f0(0x326)]);const _0x5ef468={'timestamp':_0x247d09,'id':_0x12d123,'name':_0x52c9f4[_0x1b52f0(0x2fd)],'type':_0x52c9f4[_0x1b52f0(0x303)],'location':_0x52c9f4['location'],'value':_0x404095};_0x168f01[_0x1b52f0(0x2ff)]['unshift'](_0x5ef468);if(_0x168f01[_0x1b52f0(0x2ff)][_0x1b52f0(0x20a)]>HISTORY_MAX_SIZE)_0x168f01[_0x1b52f0(0x2ff)]['pop']();await _0x168f01[_0x1b52f0(0x2bb)](_0x1b52f0(0x1dc),{'val':JSON[_0x1b52f0(0x211)](_0x5ef468),'ack':!![]}),await _0x168f01[_0x1b52f0(0x2bb)](_0x1b52f0(0x1b8),{'val':JSON['stringify'](_0x168f01['eventHistory']),'ack':!![]});_0x168f01[_0x1b52f0(0x233)]&&(_0x168f01[_0x1b52f0(0x1eb)][_0x1b52f0(0x1a4)](_0x5ef468),await saveRawEventLog(_0x168f01),recordSequence(_0x168f01,_0x5ef468));if(_0x52c9f4[_0x1b52f0(0x1a0)]&&_0x404095===!![]){if(_0x168f01[_0x1b52f0(0x28a)]&&!_0x168f01[_0x1b52f0(0x2d3)])startExitTimer(_0x168f01);else{if(!_0x168f01[_0x1b52f0(0x28a)])setPresence(_0x168f01,!![]);}}else{if(_0x52c9f4['type']===_0x1b52f0(0x283)&&_0x404095===!![]){if(_0x168f01[_0x1b52f0(0x1c8)])abortExitTimer(_0x168f01);if(!_0x168f01[_0x1b52f0(0x28a)]&&_0x168f01[_0x1b52f0(0x19e)]===SYSTEM_MODES[_0x1b52f0(0x1fc)])setPresence(_0x168f01,!![]);}}}async function recordThermodynamics(_0x517cb2,_0x1c5c15,_0x251524,_0x3a585b){const _0x4ac050=a0_0x5a7bc1,_0x2139de=await getOutsideTemperatureNumeric(_0x517cb2),_0x3532cb=await _0x517cb2[_0x4ac050(0x293)](_0x4ac050(0x2db));let _0x2f1db1=[];if(_0x3532cb&&_0x3532cb[_0x4ac050(0x2ad)])try{_0x2f1db1=JSON[_0x4ac050(0x236)](_0x3532cb[_0x4ac050(0x2ad)]);}catch(_0x26c1f7){}_0x2f1db1['push']({'ts':Date[_0x4ac050(0x20e)](),'room':_0x3a585b||_0x4ac050(0x1d5),'t_in':_0x251524,'t_out':_0x2139de});if(_0x2f1db1['length']>THERMO_LOG_SIZE)_0x2f1db1[_0x4ac050(0x214)]();await _0x517cb2[_0x4ac050(0x2bb)](_0x4ac050(0x2db),{'val':JSON['stringify'](_0x2f1db1),'ack':!![]});}async function getOutsideTemperatureNumeric(_0x23ba35){const _0x348046=a0_0x5a7bc1;if(_0x23ba35['config']['outdoorSensorId'])try{const _0xfd6925=await _0x23ba35[_0x348046(0x219)](_0x23ba35[_0x348046(0x265)][_0x348046(0x27b)]);if(_0xfd6925&&_0xfd6925['val']!==undefined&&_0xfd6925[_0x348046(0x2ad)]!==null)return parseFloat(_0xfd6925[_0x348046(0x2ad)]);}catch(_0x5e50b7){}const _0x562a0c=_0x23ba35[_0x348046(0x265)][_0x348046(0x239)];if(!_0x23ba35[_0x348046(0x265)][_0x348046(0x23d)]||!_0x562a0c)return null;try{let _0x4e17ba='';if(_0x562a0c[_0x348046(0x225)](_0x348046(0x306)))_0x4e17ba=_0x562a0c+_0x348046(0x1b9);else{if(_0x562a0c[_0x348046(0x225)](_0x348046(0x250)))_0x4e17ba=_0x562a0c+_0x348046(0x1b2);else{if(_0x562a0c['includes']('openweathermap'))_0x4e17ba=_0x562a0c+'.forecast.current.temperature';else{if(_0x562a0c['includes'](_0x348046(0x229)))_0x4e17ba=_0x562a0c+'.forecast.current.temp';}}}if(_0x4e17ba){const _0xf65fa6=await _0x23ba35[_0x348046(0x219)](_0x4e17ba);if(_0xf65fa6&&_0xf65fa6['val']!==undefined&&_0xf65fa6[_0x348046(0x2ad)]!==null)return parseFloat(_0xf65fa6[_0x348046(0x2ad)]);}}catch(_0x247f32){}return null;}async function recordSequence(_0x1fb0c4,_0x37ecba){const _0x13bd10=a0_0x5a7bc1,_0x1bfa5d=(_0x37ecba['type']||'')[_0x13bd10(0x24f)](),_0x543475=[_0x13bd10(0x283),_0x13bd10(0x305),'pr√§senz',_0x13bd10(0x251),_0x13bd10(0x1c5),_0x13bd10(0x1ec),'t√ºr',_0x13bd10(0x1b7),_0x13bd10(0x25c),_0x13bd10(0x1ee),_0x13bd10(0x264),_0x13bd10(0x217),_0x13bd10(0x2f9),_0x13bd10(0x24b),'schalter','dimmer','lampe'];if(!_0x543475[_0x13bd10(0x221)](_0x37e161=>_0x1bfa5d[_0x13bd10(0x225)](_0x37e161)))return;if(!_0x37ecba[_0x13bd10(0x1c1)])return;if(sequenceTimer)clearTimeout(sequenceTimer);activeSequence[_0x13bd10(0x1a4)]({'loc':_0x37ecba[_0x13bd10(0x326)]||_0x13bd10(0x1d5),'id':_0x37ecba['id'],'ts':Date[_0x13bd10(0x20e)]()}),sequenceTimer=setTimeout(async()=>{const _0x2ada86=_0x13bd10;if(activeSequence[_0x2ada86(0x20a)]>0x1)await saveCompletedSequence(_0x1fb0c4);activeSequence=[];},SEQUENCE_TIMEOUT_MS);}async function saveCompletedSequence(_0x459c45){const _0x1da0b5=a0_0x5a7bc1;try{const _0x348b28=await _0x459c45[_0x1da0b5(0x293)](_0x1da0b5(0x234));let _0x5940ca=[];if(_0x348b28&&_0x348b28[_0x1da0b5(0x2ad)])try{_0x5940ca=JSON[_0x1da0b5(0x236)](_0x348b28[_0x1da0b5(0x2ad)]);}catch(_0x5ccba4){}const _0x410364=activeSequence[0x0]['ts'],_0x3de23a=activeSequence['map'](_0x5dbb24=>({'loc':_0x5dbb24['loc'],'t_delta':Math[_0x1da0b5(0x22d)]((_0x5dbb24['ts']-_0x410364)/0x3e8)})),_0x224c60={'timestamp':new Date(_0x410364)[_0x1da0b5(0x2eb)](),'steps':_0x3de23a,'duration':Math[_0x1da0b5(0x22d)]((activeSequence[activeSequence[_0x1da0b5(0x20a)]-0x1]['ts']-_0x410364)/0x3e8),'daytime':new Date(_0x410364)[_0x1da0b5(0x30c)]()};_0x5940ca[_0x1da0b5(0x1a4)](_0x224c60);if(_0x5940ca['length']>MAX_TRAINING_SET_SIZE)_0x5940ca[_0x1da0b5(0x214)]();await _0x459c45[_0x1da0b5(0x2bb)]('LTM.trainingData.sequences',{'val':JSON['stringify'](_0x5940ca),'ack':!![]}),runSecurityCheck(_0x459c45,_0x224c60);}catch(_0x31dc2b){_0x459c45[_0x1da0b5(0x27e)][_0x1da0b5(0x25b)]('[RECORDER]\x20Error:\x20'+_0x31dc2b[_0x1da0b5(0x21c)]);}}function a0_0x40ba(){const _0x3d5556=['forEach','LTM.driftAnalysis.baselineDrift','exports','LTM.driftAnalysis.lastCheck','threshold','analysis.automation.targetId','Training\x20Error:\x20','analysis.training.triggerTopology','Target\x20ID','Alert\x20Reason','ltmStbWindowDays','close','Unknown','delObjectAsync','analysis.isAlert','analysis.health.trendValue','analysis.trigger','extendObjectAsync','python_service','events.lastEvent','Detected\x20Patterns','analysis.automation.autoApply','LTM.triggerDailyDigest','Temperature\x20Forecast','Lernphase\x20(','Current\x20Threshold','sendTo','LTM.processingStatus','analysis.training.triggerHealth','analysis.security.currentThreshold','heating','Gemini\x20Error:\x20','state','system.mode','rawEventLog','door','\x0aGrund:\x20','contact','analysis.training.status','‚ö†Ô∏è\x20ALARM:\x20','ANALYZE_HEALTH','\x0aSTB:\x20','ü§ñ\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','autoApply','analysisTimer','text','system.config','‚úÖ\x20HEALTH\x20TRAINED.','Error\x20launching\x20Python:\x20','analysis.automation.detectedPatterns','info','NORMAL','city','Last\x20raw\x20event','longitude','analysis.automation.targetValue','analysis.security.topologyMatrix','analysisHistory','debug','üß†\x20Triggering\x20Security\x20Training...','Gemini\x20Init\x20Error:\x20','AI\x20Training','analysis.triggerBriefing','30oSSkfz','Keine\x20Termine.','length','analysis.analysisHistory','analysis.health.todayVector','setupLtmScheduler','now','normal','generateContent','stringify','Trigger\x20Analysis','geminiModel','shift','inactivityThresholdHours','enum.rooms.*','light','analysis.training.triggerSecurity','getForeignStateAsync','toLocaleTimeString','6150sGFdvZ','message','pythonProcess','Insulation\x20Score','useCalendar','analysis.automation.description','some','modeResetJob','[PYTHON]\x20','Started...','includes','alertReason','search','object','weatherunderground','Train\x20Comfort','substring','analysis.health.isAnomaly','round','keys','stateChange','analysis.health','analysis.training.triggerComfort','is_anomaly','isProVersion','LTM.trainingData.sequences','analysis.training','parse','system.isPresent','activityLevel','weatherInstance','152047orhMBs','onUnload','setupModeResetScheduler','useWeather','GUEST','telegram','Trend\x20Value','LTM.dailyDigests','./lib/installer','\x20new\x20patterns.','analysis.security.lastScore','dailyDigests','105WFOzhl','Heating\x20Score','analysis.lastResult','briefingJob','analysis.security','switch','callback','Skipped\x20(No\x20AI\x20or\x20Data)','KI-Modell\x20nicht\x20initialisiert','toLowerCase','daswetter','presence','üìù\x20Feedback\x20received:\x20','analysis.health.lastCheck','Event\x20History',')\x20-\x20SAFE\x20BOOT','endsWith','cogni-living\x20adapter\x20starting\x20(v','./lib/scheduler','TRAINING_COMPLETE','join','error','fenster','analysis.energy.insulationScore','getForeignObjectsAsync','writable','Anomaly\x20Detected','SECURITY_RESULT','Trigger\x20Briefing','SIMULATION:\x20Test-Vorschlag\x20f√ºr\x20','kontakt','config','analysis.energy','analysis.security.lastCheck','command','TRAIN_SECURITY','data','triggerBriefing','analysis.history_debug_00','automationProposal','success','üöÄ\x20Starting\x20NUUKANNI\x20Logic\x20(v0.12.10)...','Activity-Level','automation.triggerAction','diagnosis','Success:\x20','onMessage','ready','split','communicate.request','baselineDrift','1276137vQWrdb','Err:\x20','outdoorSensorId','cancel','summary','log','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','getMinutes','Activity\x20Summary','TRAIN_HEALTH','motion','Topology\x20Error:\x20','detected','aiPersona','unknown','response','ü§ñ\x20Autopilot:\x20Running\x20periodic\x20analysis...','isPresent','ANALYZE_GAIT','üõãÔ∏è\x20Triggering\x20Comfort\x20Analysis\x20(Pattern\x20Mining)...','PYTHON_EXE','constructor','Gemini\x20AI\x20initialized.','PRIORIT√ÑT:\x20Gesundheit/AAL.','ltmLtbWindowDays','TOPOLOGY_RESULT','getStateAsync','./lib/scanner','ANALYZE_TREND','.\x20WETTER:\x20','button','TRAIN_COMFORT','getFullYear','system','sensorLastValues','setState','getOverviewData','üõãÔ∏è\x20BUTLER:\x20Found\x20','üõãÔ∏è\x20BUTLER:\x20Keine\x20neuen\x20Muster\x20gefunden.','Trend','Alert\x20Status','Unbekannt','ü§ñ\x20BUTLER:\x20Executing\x20Action\x20->\x20','setupDriftAnalysisScheduler','(((.+)+)+)+$','PARTY','payload','Today\x20Vector\x20(15m)','bind','Regel\x20erkannt:\x20','29956iUVjeT','N/A','val','.\x20ANWESEND:\x20','heizung','üï∏Ô∏è\x20Building\x20Topology\x20Matrix...','from','Fokus\x20auf\x20Komfort.','models/gemini-flash-latest','path','timestamp','exitGraceTimer','analysis.activitySummary','analysis.health.gaitSpeed','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','simulateButler','setStateAsync','isAlert','TRAIN_ENERGY','find','getDate','@google/generative-ai','ack','setForeignStateAsync','onReady','rule','üï∏Ô∏è\x20Topology\x20Map\x20updated.','Train\x20Security','subscribeForeignStatesAsync','LTM.driftAnalysis.driftDetails','\x20->\x20','HEALTH_TRAIN_RESULT','üõ°Ô∏è\x20SECURITY\x20CHECK:\x20Score\x20','service.py','32GXSuKA','analysis.health.trendDiagnosis','text.alarm','onStateChange','üåÖ\x20Morning\x20Briefing:\x0a','\x20=\x20','isGracePeriodActive','party','LTM.rawEventLog','change_percent','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','confidence','Keine\x20Wetterdaten\x20verf√ºgbar.','analysis.energy.forecast','LTM.trainingData.thermodynamics','livingContext','minDaysForBaseline','application/json','1973874UeUSyP','.\x20KONTEXT:\x20','getForeignObjectAsync','LTM','¬∞C,\x20','toFixed','floor','temperature','rating','isEmergency','toString','dependencyInstallInProgress','toISOString','startsWith','presenceDevices','main','BUTLER\x20Execution\x20Error:\x20','Who\x20is\x20present?','events.history_debug_00','trim','Training\x20Status','No\x20instance','enum.functions.*','.\x20EVENTS:\x20','Train\x20Health','getTime','licht','.forecast.current.temperature','targetId','Fokus\x20auf\x20Familienroutinen.','name','üß™\x20Simulating\x20Butler\x20Proposal:\x20','eventHistory','testContext','subscribeStates','analysis.automation.patternDetected','type','apiKey','bewegung','accuweather','channel','PONG','GAIT_RESULT','pop','driftAnalysisTimer','getHours','notifyTelegramEnabled','[RESULT]','.Current.WeatherText','1784hDhEpN','submitFeedback','@iobroker/adapter-core','guest','getGenerativeModel','details','Analysiere\x20ausgewogen.','analysis.automation.triggerAction','setupBriefingScheduler','WiFi\x20Presence\x20detected.','ENERGY_TRAIN_RESULT','ltmJob','Sequences','genAI','Last\x20Check','[LOG]','calendarInstance','indicator','dismissAutomation','enum','getMonth','lastAlertState','location','version','analysis.training.triggerEnergy','common','string','Kein\x20API\x20Key!','values','logDuplicates','ANALYZE_SEQUENCE','ANOMALY','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','Wetterdaten\x20deaktiviert.','Sec-Training\x20started...','getCalendarNames','PREDICT_ENERGY','fill','geminiApiKey','setHours','currentSystemMode','status','isExit','getObjectAsync','.\x20EMERGENCY:\x20','Anomaly\x20Score','push','Thermodynamics','licenseKey','Missing\x20data','number','setObjectNotExistsAsync','replace','Restoring\x20sensor\x20cache...','description','5281727wgnfot','json','unload','Train\x20Energy','Ungew√∂hnliches\x20Bewegungsmuster!\x20(Score:\x20','.NextHours.Location_1.Day_1.current.temp_value','testApiKey','analysis.alertReason','slice','generic','window','events.history','.Current.Temperature','system.presenceWho','Target\x20Value','boolean','427651tzGkqD','Auto\x20Apply','targetValue','splice','value','systemConfig','VACATION','notifyTelegramInstance','occupancy','systemUUID','User\x20dismissed\x20automation\x20proposal.','exitTimer'];a0_0x40ba=function(){return _0x3d5556;};return a0_0x40ba();}function runSecurityCheck(_0x514d12,_0x50c91b){const _0x32eb42=a0_0x5a7bc1;if(!_0x514d12[_0x32eb42(0x233)])return;sendToPython(_0x514d12,_0x32eb42(0x194),{'sequence':_0x50c91b});}async function createDailyDigest(_0x1fb544){const _0x2a7ef1=a0_0x5a7bc1;if(!_0x1fb544[_0x2a7ef1(0x233)])return;await _0x1fb544['setStateAsync'](LTM_DP_STATUS,{'val':_0x2a7ef1(0x224),'ack':!![]});if(!_0x1fb544[_0x2a7ef1(0x213)]||_0x1fb544['rawEventLog']['length']<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x1fb544[_0x2a7ef1(0x2bb)](LTM_DP_STATUS,{'val':_0x2a7ef1(0x24d),'ack':!![]});return;}const _0x402913=JSON[_0x2a7ef1(0x236)](JSON['stringify'](_0x1fb544[_0x2a7ef1(0x1eb)])),_0x59bc43=_0x402913[_0x2a7ef1(0x20a)],_0x7345ea=_0x2a7ef1(0x2b9)+JSON[_0x2a7ef1(0x211)](_0x402913);try{const _0x2e31aa=await _0x1fb544[_0x2a7ef1(0x213)][_0x2a7ef1(0x210)](_0x7345ea),_0x5e18c7=JSON[_0x2a7ef1(0x236)](_0x2e31aa[_0x2a7ef1(0x288)]['text']()[_0x2a7ef1(0x1aa)](/```json|```/g,'')[_0x2a7ef1(0x2f2)]()),_0x47d7a0={'timestamp':new Date()['toISOString'](),'eventCount':_0x59bc43,'summary':_0x5e18c7[_0x2a7ef1(0x27d)]||'Digest','activityLevel':_0x5e18c7[_0x2a7ef1(0x238)]||'normal','systemMode':_0x1fb544[_0x2a7ef1(0x19e)]};_0x1fb544[_0x2a7ef1(0x245)]['push'](_0x47d7a0),await saveDailyDigests(_0x1fb544),_0x1fb544[_0x2a7ef1(0x1eb)]=[],await saveRawEventLog(_0x1fb544),await _0x1fb544[_0x2a7ef1(0x2bb)](LTM_DP_STATUS,{'val':'Success','ack':!![]});if(_0x1fb544[_0x2a7ef1(0x233)])sendToPython(_0x1fb544,_0x2a7ef1(0x1f1),{'digest':_0x47d7a0});}catch(_0x1167f4){_0x1fb544[_0x2a7ef1(0x27e)]['error'](_0x1167f4[_0x2a7ef1(0x21c)]);}}async function runBaselineDriftAnalysis(_0x1d5c29){const _0x166768=a0_0x5a7bc1;if(!_0x1d5c29['isProVersion']||!_0x1d5c29[_0x166768(0x213)])return;const _0x1f34e1=_0x1d5c29['config']['ltmStbWindowDays']||0xe;if(_0x1d5c29[_0x166768(0x245)][_0x166768(0x20a)]<_0x1f34e1+0x7){await _0x1d5c29[_0x166768(0x2bb)](LTM_DP_DRIFT_STATUS,{'val':'N/A\x20(Learning)','ack':!![]});return;}const _0x2045d4=_0x1d5c29[_0x166768(0x245)][_0x166768(0x1b5)](-_0x1f34e1),_0x19731a=_0x1d5c29[_0x166768(0x245)]['slice'](0x0,_0x1d5c29[_0x166768(0x245)][_0x166768(0x20a)]-_0x1f34e1),_0xb15e74=_0x166768(0x27f)+JSON[_0x166768(0x211)](_0x19731a)+_0x166768(0x1f2)+JSON[_0x166768(0x211)](_0x2045d4);try{const _0x38dc7f=await _0x1d5c29[_0x166768(0x213)]['generateContent'](_0xb15e74),_0x10d8e3=JSON['parse'](_0x38dc7f[_0x166768(0x288)][_0x166768(0x1f6)]()[_0x166768(0x1aa)](/```json|```/g,'')[_0x166768(0x2f2)]());_0x10d8e3[_0x166768(0x278)]&&(await _0x1d5c29[_0x166768(0x2bb)](LTM_DP_DRIFT_STATUS,{'val':_0x10d8e3['baselineDrift'],'ack':!![]}),await _0x1d5c29[_0x166768(0x2bb)](LTM_DP_DRIFT_DETAILS,{'val':_0x10d8e3['driftDetails'],'ack':!![]}),await _0x1d5c29[_0x166768(0x2bb)](LTM_DP_DRIFT_LAST_CHECK,{'val':Date[_0x166768(0x20e)](),'ack':!![]}));}catch(_0x498271){}}async function sendMorningBriefing(_0x221624){const _0x12569f=a0_0x5a7bc1;if(!_0x221624[_0x12569f(0x213)])return;try{const _0x1fc109='Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.',_0x3f2ad1=await _0x221624['geminiModel'][_0x12569f(0x210)](_0x1fc109),_0x58491b=_0x3f2ad1['response'][_0x12569f(0x1f6)]();sendNotification(_0x221624,_0x12569f(0x2d1)+_0x58491b);}catch(_0x508784){_0x221624[_0x12569f(0x27e)]['error']('Briefing\x20Error:\x20'+_0x508784[_0x12569f(0x21c)]);}}function stopPythonService(_0x35c52b){const _0x24e7c8=a0_0x5a7bc1;if(_0x35c52b['pythonProcess']){try{_0x35c52b[_0x24e7c8(0x21d)]['kill']();}catch(_0x4edcbf){}_0x35c52b[_0x24e7c8(0x21d)]=null;}}function sendToPython(_0x1af168,_0x1515b6,_0x5ed25f={}){const _0x1e791f=a0_0x5a7bc1;if(!_0x1af168[_0x1e791f(0x21d)]||!_0x1af168[_0x1e791f(0x21d)]['stdin'][_0x1e791f(0x25f)])return;const _0x188359=JSON['stringify']({'command':_0x1515b6,..._0x5ed25f});try{_0x1af168[_0x1e791f(0x21d)]['stdin']['write'](_0x188359+'\x0a');}catch(_0x564fd5){}}function runPythonHealthCheck(_0x4f84c9){const _0x58b28d=a0_0x5a7bc1;if(!_0x4f84c9[_0x58b28d(0x245)]||_0x4f84c9['dailyDigests']['length']<0x2)return;const _0x4edcb3=_0x4f84c9[_0x58b28d(0x245)]['map'](_0x249919=>{const _0x154c32=(_0x249919['activityLevel']||'')['toLowerCase']();return ACTIVITY_LEVEL_MAP[_0x154c32]||0x32;});sendToPython(_0x4f84c9,_0x58b28d(0x295),{'values':_0x4edcb3,'tag':_0x58b28d(0x270)});}function handlePythonResult(_0x562ddf,_0xd2eb08){const _0x18e002=a0_0x5a7bc1;if(_0xd2eb08[_0x18e002(0x303)]===_0x18e002(0x308))_0x562ddf['log'][_0x18e002(0x203)]('üêç\x20Python\x20Pong');else{if(_0xd2eb08['type']===_0x18e002(0x261)){const {anomaly_score:_0x1d8f54,is_anomaly:_0x3eaf82,threshold:_0x4b8bb1,explanation:_0x1af5c5}=_0xd2eb08[_0x18e002(0x2a7)];_0x562ddf[_0x18e002(0x27e)][_0x18e002(0x1fb)](_0x18e002(0x2cb)+_0x1d8f54[_0x18e002(0x2e4)](0x5)+_0x18e002(0x2c9)+(_0x3eaf82?_0x18e002(0x195):'OK')),_0x562ddf[_0x18e002(0x2bb)](_0x18e002(0x244),{'val':_0x1d8f54,'ack':!![]}),_0x562ddf[_0x18e002(0x2bb)](_0x18e002(0x267),{'val':new Date()[_0x18e002(0x2eb)](),'ack':!![]});if(_0x4b8bb1)_0x562ddf[_0x18e002(0x2bb)]('analysis.security.currentThreshold',{'val':_0x4b8bb1,'ack':!![]});if(_0x3eaf82){let _0x3f1e59=_0x18e002(0x1b1)+_0x1d8f54[_0x18e002(0x2e4)](0x4)+')';if(_0x1af5c5&&_0x1af5c5!==_0x18e002(0x1d5))_0x3f1e59+=_0x18e002(0x1ed)+_0x1af5c5;_0x562ddf[_0x18e002(0x2bb)](_0x18e002(0x1d7),{'val':!![],'ack':!![]}),_0x562ddf['setStateAsync'](_0x18e002(0x1b4),{'val':_0x3f1e59,'ack':!![]}),sendNotification(_0x562ddf,'‚ö†Ô∏è\x20SECURITY\x20ALARM:\x20'+_0x3f1e59,![],!![]);}}else{if(_0xd2eb08[_0x18e002(0x303)]===_0x18e002(0x259)){const _0x48300a=_0xd2eb08['payload']['details']||'',_0xd61b19=_0xd2eb08[_0x18e002(0x2a7)][_0x18e002(0x1cd)],_0x1e3186=_0xd2eb08[_0x18e002(0x2a7)][_0x18e002(0x26e)]?_0x18e002(0x273)+new Date()[_0x18e002(0x21a)]()+'\x20('+_0x48300a+')':'Failed:\x20'+_0xd2eb08[_0x18e002(0x2a7)]['reason'];_0x562ddf[_0x18e002(0x2bb)](_0x18e002(0x1ef),{'val':_0x1e3186,'ack':!![]});if(_0xd2eb08[_0x18e002(0x2a7)][_0x18e002(0x26e)]&&_0xd61b19)_0x562ddf[_0x18e002(0x2bb)](_0x18e002(0x1e6),{'val':_0xd61b19,'ack':!![]});}else{if(_0xd2eb08[_0x18e002(0x303)]==='COMFORT_RESULT'){const {patterns:_0x2f1d88}=_0xd2eb08[_0x18e002(0x2a7)];if(_0x2f1d88&&_0x2f1d88[_0x18e002(0x20a)]>0x0){_0x562ddf[_0x18e002(0x27e)]['info'](_0x18e002(0x29e)+_0x2f1d88[_0x18e002(0x20a)]+_0x18e002(0x243)),_0x562ddf[_0x18e002(0x2bb)]('analysis.automation.detectedPatterns',{'val':JSON[_0x18e002(0x211)](_0x2f1d88),'ack':!![]});const _0xfb5947=_0x2f1d88[0x0],_0x3f846a=_0x18e002(0x2aa)+_0xfb5947[_0x18e002(0x2c4)]+'\x20('+(_0xfb5947[_0x18e002(0x2d8)]*0x64)[_0x18e002(0x2e4)](0x0)+'%)';_0x562ddf[_0x18e002(0x2bb)](_0x18e002(0x302),{'val':!![],'ack':!![]}),_0x562ddf[_0x18e002(0x2bb)]('analysis.automation.description',{'val':_0x3f846a,'ack':!![]});}else _0x562ddf[_0x18e002(0x27e)]['info'](_0x18e002(0x29f)),_0x562ddf[_0x18e002(0x2bb)](_0x18e002(0x302),{'val':![],'ack':!![]}),_0x562ddf['setStateAsync'](_0x18e002(0x1fa),{'val':'[]','ack':!![]});}else{if(_0xd2eb08[_0x18e002(0x303)]===_0x18e002(0x31a)){if(_0xd2eb08[_0x18e002(0x2a7)][_0x18e002(0x26e)])try{const _0x24afad=JSON[_0x18e002(0x236)](_0xd2eb08[_0x18e002(0x2a7)][_0x18e002(0x315)]);if(_0x24afad['insulation'])_0x562ddf[_0x18e002(0x2bb)](_0x18e002(0x25d),{'val':JSON[_0x18e002(0x211)](_0x24afad['insulation']),'ack':!![]});if(_0x24afad[_0x18e002(0x1e7)])_0x562ddf[_0x18e002(0x2bb)]('analysis.energy.heatingScore',{'val':JSON['stringify'](_0x24afad[_0x18e002(0x1e7)]),'ack':!![]});}catch(_0x181ff2){}}else{if(_0xd2eb08['type']===_0x18e002(0x2ca)){if(_0xd2eb08[_0x18e002(0x2a7)][_0x18e002(0x26e)])_0x562ddf[_0x18e002(0x27e)][_0x18e002(0x1fb)](_0x18e002(0x1f8));}else{if(_0xd2eb08[_0x18e002(0x303)]==='HEALTH_RESULT')_0x562ddf['setStateAsync'](_0x18e002(0x253),{'val':new Date()[_0x18e002(0x2eb)](),'ack':!![]}),_0x562ddf[_0x18e002(0x2bb)](_0x18e002(0x22c),{'val':_0xd2eb08['payload'][_0x18e002(0x232)],'ack':!![]});else{if(_0xd2eb08[_0x18e002(0x303)]==='TREND_RESULT')_0x562ddf['setStateAsync'](_0x18e002(0x2ce),{'val':_0xd2eb08['payload'][_0x18e002(0x272)],'ack':!![]}),_0x562ddf[_0x18e002(0x2bb)]('analysis.health.trendValue',{'val':_0xd2eb08[_0x18e002(0x2a7)][_0x18e002(0x2d6)],'ack':!![]});else{if(_0xd2eb08[_0x18e002(0x303)]===_0x18e002(0x309)){const {speed_trend:_0x1643d5}=_0xd2eb08['payload'];if(_0x1643d5!==undefined)_0x562ddf['setStateAsync'](_0x18e002(0x2b8),{'val':_0x1643d5,'ack':!![]});}else{if(_0xd2eb08[_0x18e002(0x303)]==='ENERGY_PREDICT_RESULT'){const {forecast:_0x2ef140}=_0xd2eb08[_0x18e002(0x2a7)];if(_0x2ef140)_0x562ddf[_0x18e002(0x2bb)]('analysis.energy.forecast',{'val':JSON['stringify'](_0x2ef140),'ack':!![]});}else{if(_0xd2eb08[_0x18e002(0x303)]===_0x18e002(0x292)){const {data:_0x8b6bcb}=_0xd2eb08['payload'];_0x8b6bcb&&(_0x562ddf[_0x18e002(0x27e)]['info'](_0x18e002(0x2c5)),_0x562ddf['setStateAsync'](_0x18e002(0x201),{'val':JSON[_0x18e002(0x211)](_0x8b6bcb),'ack':!![]}));}}}}}}}}}}}}function startPythonService(_0x525328){const _0x46e63b=a0_0x5a7bc1;let _0x37eb73='python3';if(fs['existsSync'](installer[_0x46e63b(0x28d)]))_0x37eb73=installer[_0x46e63b(0x28d)];try{const _0xc6acee=path[_0x46e63b(0x25a)](__dirname,_0x46e63b(0x1db),_0x46e63b(0x2cc));_0x525328[_0x46e63b(0x21d)]=spawn(_0x37eb73,[_0xc6acee]),_0x525328[_0x46e63b(0x21d)]['stdout']['on'](_0x46e63b(0x26a),_0x4dc5f8=>{const _0x1b8f3a=_0x46e63b,_0x14d36d=_0x4dc5f8[_0x1b8f3a(0x2e9)]()['split']('\x0a');_0x14d36d['forEach'](_0x21a9ac=>{const _0xe842fb=_0x1b8f3a,_0x1b4817=_0x21a9ac['trim']();if(!_0x1b4817)return;if(_0x1b4817[_0xe842fb(0x2ec)](_0xe842fb(0x31f)))_0x525328['log']['debug'](_0xe842fb(0x223)+_0x1b4817[_0xe842fb(0x22b)](0x5)[_0xe842fb(0x2f2)]());else{if(_0x1b4817['startsWith'](_0xe842fb(0x30e)))try{const _0x4f86af=JSON[_0xe842fb(0x236)](_0x1b4817[_0xe842fb(0x22b)](0x8)['trim']());handlePythonResult(_0x525328,_0x4f86af);}catch(_0x27709b){}}});}),_0x525328[_0x46e63b(0x21d)]['on'](_0x46e63b(0x1d4),_0x1d8b46=>{const _0x2f1c63=_0x46e63b;_0x525328[_0x2f1c63(0x21d)]=null;});}catch(_0x1ef293){_0x525328[_0x46e63b(0x27e)][_0x46e63b(0x25b)](_0x46e63b(0x1f9)+_0x1ef293[_0x46e63b(0x21c)]);}}async function runAutopilot(_0x3769a5){const _0x5720f1=a0_0x5a7bc1;_0x3769a5[_0x5720f1(0x27e)][_0x5720f1(0x203)](_0x5720f1(0x289)),await runGeminiAnalysis(_0x3769a5),updateHealthVector(_0x3769a5),triggerGaitAnalysis(_0x3769a5),triggerEnergyPrediction(_0x3769a5);}async function triggerGaitAnalysis(_0x4d46e9){const _0x3c835d=a0_0x5a7bc1;if(!_0x4d46e9[_0x3c835d(0x233)])return;try{const _0x3cf298=await _0x4d46e9['getStateAsync'](_0x3c835d(0x234));_0x3cf298&&_0x3cf298['val']&&sendToPython(_0x4d46e9,_0x3c835d(0x28b),{'sequences':JSON[_0x3c835d(0x236)](_0x3cf298[_0x3c835d(0x2ad)])});}catch(_0x2c38e7){}}async function triggerEnergyPrediction(_0x25e415){const _0x2bd079=a0_0x5a7bc1;if(!_0x25e415[_0x2bd079(0x233)])return;try{const _0x58ee47=await getOutsideTemperatureNumeric(_0x25e415);if(_0x58ee47===null)return;const _0x1827cc={},_0x378f50=_0x25e415[_0x2bd079(0x265)]['devices']||[];for(const _0x69abaa of _0x378f50){if(_0x69abaa[_0x2bd079(0x303)]===_0x2bd079(0x2e6)&&_0x69abaa['location']){const _0x2e02a5=_0x25e415['sensorLastValues'][_0x69abaa['id']];if(_0x2e02a5!==undefined)_0x1827cc[_0x69abaa['location']]=_0x2e02a5;}}Object[_0x2bd079(0x22e)](_0x1827cc)[_0x2bd079(0x20a)]>0x0&&sendToPython(_0x25e415,_0x2bd079(0x19a),{'current_temps':_0x1827cc,'t_out':_0x58ee47});}catch(_0xeeee18){}}function updateHealthVector(_0x20954c){const _0x544525=a0_0x5a7bc1;if(!_0x20954c[_0x544525(0x1eb)]||_0x20954c[_0x544525(0x1eb)]['length']===0x0)return;const _0x262f09=new Array(0x60)['fill'](0x0),_0x3dee41=new Date()[_0x544525(0x19d)](0x0,0x0,0x0,0x0);_0x20954c[_0x544525(0x1eb)][_0x544525(0x1c9)](_0x604b88=>{const _0x23bf21=_0x544525,_0x4a869c=new Date(_0x604b88[_0x23bf21(0x2b5)]);if(_0x4a869c[_0x23bf21(0x2f8)]()>=_0x3dee41){const _0x33a447=_0x4a869c[_0x23bf21(0x30c)](),_0x5b2c23=_0x4a869c[_0x23bf21(0x280)](),_0x5c774a=_0x33a447*0x4+Math[_0x23bf21(0x2e5)](_0x5b2c23/0xf);if(_0x5c774a>=0x0&&_0x5c774a<0x60)_0x262f09[_0x5c774a]++;}}),_0x20954c[_0x544525(0x2bb)](_0x544525(0x20c),{'val':JSON[_0x544525(0x211)](_0x262f09),'ack':!![]});}async function getWeatherContext(_0x10d727){const _0x48d3a5=a0_0x5a7bc1;if(!_0x10d727[_0x48d3a5(0x265)][_0x48d3a5(0x23d)]||!_0x10d727[_0x48d3a5(0x265)][_0x48d3a5(0x239)])return _0x48d3a5(0x197);try{const _0x3a8fba=_0x10d727[_0x48d3a5(0x265)][_0x48d3a5(0x239)];let _0x2eb89e=await _0x10d727['getForeignStateAsync'](_0x3a8fba+_0x48d3a5(0x1b9));if(!_0x2eb89e)_0x2eb89e=await _0x10d727[_0x48d3a5(0x219)](_0x3a8fba+_0x48d3a5(0x2fa));let _0x563e96=await _0x10d727[_0x48d3a5(0x219)](_0x3a8fba+_0x48d3a5(0x30f));if(!_0x563e96)_0x563e96=await _0x10d727[_0x48d3a5(0x219)](_0x3a8fba+'.forecast.current.state');if(_0x2eb89e&&_0x563e96)return _0x2eb89e[_0x48d3a5(0x2ad)]+_0x48d3a5(0x2e3)+_0x563e96['val'];}catch(_0x558692){}return _0x48d3a5(0x2d9);}async function getCalendarContext(_0x43d666){const _0x987d78=a0_0x5a7bc1;if(!_0x43d666[_0x987d78(0x265)][_0x987d78(0x21f)]||!_0x43d666['config'][_0x987d78(0x320)])return'Kalender\x20deaktiviert.';return _0x987d78(0x209);}async function getCalendarNames(_0x2f6aa4,_0x23be6b){return[];}async function saveFeedback(_0x381b89,_0x25aa28){const _0x2897c6=a0_0x5a7bc1;_0x381b89[_0x2897c6(0x27e)][_0x2897c6(0x1fb)](_0x2897c6(0x252)+_0x25aa28[_0x2897c6(0x2e7)]);}async function runGeminiAnalysis(_0x2f4a2b,_0x564de6=''){const _0x32e2cd=a0_0x5a7bc1;if(!_0x2f4a2b[_0x32e2cd(0x213)])return;if(_0x2f4a2b[_0x32e2cd(0x2ff)][_0x32e2cd(0x20a)]===0x0)return;const _0x3f82a6=_0x2f4a2b[_0x32e2cd(0x2ff)][_0x32e2cd(0x1b5)](0x0,0xf),_0x135573=await getWeatherContext(_0x2f4a2b),_0x21d4f0=_0x2f4a2b[_0x32e2cd(0x19e)],_0x3e28de=PERSONA_MAPPING[_0x2f4a2b[_0x32e2cd(0x265)][_0x32e2cd(0x286)]||_0x32e2cd(0x1b6)],_0x297573=_0x2f4a2b[_0x32e2cd(0x265)][_0x32e2cd(0x2dc)]||'Keine\x20Details.';let _0x45419d=_0x32e2cd(0x2a2);try{const _0x1278fc=await _0x2f4a2b[_0x32e2cd(0x293)](_0x32e2cd(0x1ba));if(_0x1278fc&&_0x1278fc[_0x32e2cd(0x2ad)])_0x45419d=_0x1278fc[_0x32e2cd(0x2ad)];}catch(_0x565cf9){}let _0x5bd367=![];try{const _0x945d99=await _0x2f4a2b[_0x32e2cd(0x293)]('analysis.automation.autoApply');if(_0x945d99&&_0x945d99[_0x32e2cd(0x2ad)])_0x5bd367=!![];}catch(_0x15103e){}const _0x28f93a=_0x32e2cd(0x2d7)+_0x3e28de+_0x32e2cd(0x2e0)+_0x297573+'.\x20SYSTEM_MODE:\x20'+_0x21d4f0+_0x32e2cd(0x296)+_0x135573+_0x32e2cd(0x2ae)+_0x45419d+_0x32e2cd(0x2f6)+JSON[_0x32e2cd(0x211)](_0x3f82a6)+_0x32e2cd(0x1a2)+_0x564de6+_0x32e2cd(0x196);try{const _0x2cad61=await _0x2f4a2b['geminiModel'][_0x32e2cd(0x210)](_0x28f93a),_0x4d21a7=JSON['parse'](_0x2cad61[_0x32e2cd(0x288)]['text']()[_0x32e2cd(0x1aa)](/```json|```/g,'')['trim']());await _0x2f4a2b[_0x32e2cd(0x2bb)](_0x32e2cd(0x248),{'val':JSON[_0x32e2cd(0x211)](_0x4d21a7),'ack':!![]});if(_0x4d21a7['summary'])await _0x2f4a2b['setStateAsync']('analysis.activitySummary',{'val':_0x4d21a7[_0x32e2cd(0x27d)],'ack':!![]});const _0x1acb9f={'timestamp':Date[_0x32e2cd(0x20e)](),'id':Date['now']()[_0x32e2cd(0x2e9)](),'analysis':{'activity':{'summary':_0x4d21a7[_0x32e2cd(0x27d)],'isAlert':_0x4d21a7[_0x32e2cd(0x2bc)],'alertReason':_0x4d21a7[_0x32e2cd(0x226)]},'comfort':{'automationProposal':_0x4d21a7[_0x32e2cd(0x26d)]}}};await updateAnalysisHistory(_0x2f4a2b,_0x1acb9f);const _0x4d4afb=_0x4d21a7[_0x32e2cd(0x2bc)]||![];_0x4d4afb!==_0x2f4a2b[_0x32e2cd(0x325)]&&(await _0x2f4a2b[_0x32e2cd(0x2bb)](_0x32e2cd(0x1d7),{'val':_0x4d4afb,'ack':!![]}),_0x2f4a2b[_0x32e2cd(0x325)]=_0x4d4afb,_0x4d4afb&&(await _0x2f4a2b['setStateAsync'](_0x32e2cd(0x1b4),{'val':_0x4d21a7[_0x32e2cd(0x226)],'ack':!![]}),sendNotification(_0x2f4a2b,_0x32e2cd(0x1f0)+_0x4d21a7[_0x32e2cd(0x226)],![],_0x4d21a7[_0x32e2cd(0x2e8)])));if(_0x4d21a7[_0x32e2cd(0x26d)]&&_0x4d21a7['automationProposal'][_0x32e2cd(0x285)]){await _0x2f4a2b[_0x32e2cd(0x2bb)](_0x32e2cd(0x302),{'val':!![],'ack':!![]}),await _0x2f4a2b['setStateAsync'](_0x32e2cd(0x220),{'val':_0x4d21a7[_0x32e2cd(0x26d)][_0x32e2cd(0x1ac)],'ack':!![]}),await _0x2f4a2b[_0x32e2cd(0x2bb)](_0x32e2cd(0x1ce),{'val':_0x4d21a7[_0x32e2cd(0x26d)]['targetId'],'ack':!![]}),await _0x2f4a2b['setStateAsync'](_0x32e2cd(0x200),{'val':JSON['stringify'](_0x4d21a7['automationProposal'][_0x32e2cd(0x1bf)]),'ack':!![]});if(_0x5bd367)executeAutomationAction(_0x2f4a2b);}}catch(_0x56d7e7){_0x2f4a2b[_0x32e2cd(0x27e)][_0x32e2cd(0x25b)](_0x32e2cd(0x1e8)+_0x56d7e7[_0x32e2cd(0x21c)]);}}async function startSystem(_0x1ada89){const _0x407422=a0_0x5a7bc1;_0x1ada89[_0x407422(0x27e)]['info'](_0x407422(0x26f)),await initZombies(_0x1ada89);try{_0x1ada89['isProVersion']=await checkLicense(_0x1ada89[_0x407422(0x265)][_0x407422(0x1a6)]);}catch(_0x441bb5){}if(!_0x1ada89[_0x407422(0x265)][_0x407422(0x215)]||_0x1ada89[_0x407422(0x265)][_0x407422(0x215)]<0.1)_0x1ada89[_0x407422(0x265)][_0x407422(0x215)]=0xc;await initHistory(_0x1ada89),await initSystemConfig(_0x1ada89);if(_0x1ada89[_0x407422(0x265)][_0x407422(0x19c)])try{_0x1ada89['genAI']=new GoogleGenerativeAI(_0x1ada89[_0x407422(0x265)][_0x407422(0x19c)]),_0x1ada89['geminiModel']=_0x1ada89[_0x407422(0x31d)][_0x407422(0x314)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x407422(0x2de)}}),_0x1ada89[_0x407422(0x27e)][_0x407422(0x1fb)](_0x407422(0x28f));}catch(_0x190224){_0x1ada89[_0x407422(0x27e)]['error'](_0x407422(0x205)+_0x190224[_0x407422(0x21c)]);}await createAllObjects(_0x1ada89),await loadSystemMode(_0x1ada89),await loadRawEventLog(_0x1ada89),await loadDailyDigests(_0x1ada89),_0x1ada89[_0x407422(0x301)](_0x407422(0x1d9)),_0x1ada89[_0x407422(0x301)](LTM_DP_TRIGGER_DIGEST),_0x1ada89[_0x407422(0x301)](_0x407422(0x1ea)),_0x1ada89[_0x407422(0x301)](_0x407422(0x207)),_0x1ada89[_0x407422(0x301)](_0x407422(0x317)),_0x1ada89['subscribeStates'](_0x407422(0x1de)),_0x1ada89[_0x407422(0x301)](_0x407422(0x218)),_0x1ada89[_0x407422(0x301)]('analysis.training.triggerHealth'),_0x1ada89[_0x407422(0x301)](_0x407422(0x328)),_0x1ada89[_0x407422(0x301)](_0x407422(0x231)),_0x1ada89[_0x407422(0x301)](_0x407422(0x1d0)),await initSensorSubscriptions(_0x1ada89),await initPresenceSubscriptions(_0x1ada89),await setupTelegramListener(_0x1ada89),setTimeout(()=>checkWifiPresence(_0x1ada89),0x1388);if(_0x1ada89[_0x407422(0x1f5)])clearInterval(_0x1ada89[_0x407422(0x1f5)]);const _0x473f2a=_0x1ada89[_0x407422(0x265)]['analysisInterval']||0xf;_0x473f2a>0x0&&(_0x1ada89['analysisTimer']=setInterval(()=>{runAutopilot(_0x1ada89);},_0x473f2a*0x3c*0x3e8)),schedulers[_0x407422(0x20d)](_0x1ada89,()=>createDailyDigest(_0x1ada89)),schedulers[_0x407422(0x23c)](_0x1ada89),schedulers[_0x407422(0x2a4)](_0x1ada89,()=>runBaselineDriftAnalysis(_0x1ada89)),schedulers[_0x407422(0x318)](_0x1ada89,()=>sendMorningBriefing(_0x1ada89)),startPythonService(_0x1ada89),setTimeout(()=>{const _0xf6f2f6=_0x407422;_0x1ada89[_0xf6f2f6(0x21d)]&&(runPythonHealthCheck(_0x1ada89),triggerGaitAnalysis(_0x1ada89),triggerEnergyPrediction(_0x1ada89)),updateHealthVector(_0x1ada89);},0x1388);}class CogniLiving extends utils['Adapter']{constructor(_0x10cf23){const _0x68c574=a0_0x5a7bc1;super({..._0x10cf23,'name':'cogni-living'}),this['eventHistory']=[],this[_0x68c574(0x202)]=[],this[_0x68c574(0x1eb)]=[],this[_0x68c574(0x245)]=[],this[_0x68c574(0x29b)]={},this['systemConfig']={'latitude':0x0,'longitude':0x0,'city':''},this[_0x68c574(0x28a)]=!![],this[_0x68c574(0x1c8)]=null,this[_0x68c574(0x2b6)]=null,this[_0x68c574(0x2d3)]=![],this['genAI']=null,this[_0x68c574(0x213)]=null,this['currentSystemMode']=SYSTEM_MODES['NORMAL'],this['isProVersion']=![],this[_0x68c574(0x325)]=![],this[_0x68c574(0x1c6)]=_0x68c574(0x287),this[_0x68c574(0x1f5)]=null,this['ltmJob']=null,this['modeResetJob']=null,this['driftAnalysisTimer']=null,this[_0x68c574(0x249)]=null,this[_0x68c574(0x21d)]=null,this[_0x68c574(0x2ea)]=![],this['on'](_0x68c574(0x275),this[_0x68c574(0x2c3)][_0x68c574(0x2a9)](this)),this['on'](_0x68c574(0x22f),this['onStateChange'][_0x68c574(0x2a9)](this)),this['on'](_0x68c574(0x1af),this[_0x68c574(0x23b)][_0x68c574(0x2a9)](this)),this['on'](_0x68c574(0x21c),this['onMessage']['bind'](this));}async[a0_0x5a7bc1(0x2c3)](){const _0x37348d=a0_0x5a7bc1;this[_0x37348d(0x27e)][_0x37348d(0x1fb)](_0x37348d(0x257)+this[_0x37348d(0x327)]+_0x37348d(0x255));if(!installer['checkAndInstall'](this,()=>startSystem(this)))return;}[a0_0x5a7bc1(0x23b)](_0x1d4cc9){const _0xa37fac=a0_0x5a7bc1;if(this['analysisTimer'])clearInterval(this[_0xa37fac(0x1f5)]);if(this['driftAnalysisTimer'])clearInterval(this[_0xa37fac(0x30b)]);if(this[_0xa37fac(0x31b)])this[_0xa37fac(0x31b)][_0xa37fac(0x27c)]();if(this['modeResetJob'])this[_0xa37fac(0x222)][_0xa37fac(0x27c)]();if(this[_0xa37fac(0x249)])this[_0xa37fac(0x249)][_0xa37fac(0x27c)]();if(this[_0xa37fac(0x1c8)])clearTimeout(this['exitTimer']);if(this[_0xa37fac(0x2b6)])clearTimeout(this[_0xa37fac(0x2b6)]);stopPythonService(this),_0x1d4cc9();}async[a0_0x5a7bc1(0x2d0)](_0xcfcb0f,_0x11491e){const _0x4563e8=a0_0x5a7bc1;if(!_0x11491e||this[_0x4563e8(0x2ea)])return;if(_0xcfcb0f[_0x4563e8(0x225)](_0x4563e8(0x23f))&&_0xcfcb0f[_0x4563e8(0x256)](_0x4563e8(0x277))&&_0x11491e[_0x4563e8(0x2ad)]){await handleTelegramResponse(this,_0x11491e[_0x4563e8(0x2ad)]);return;}if(_0xcfcb0f===this['namespace']+'.'+SYSTEM_DP_MODE){if(_0x11491e[_0x4563e8(0x2ad)]&&Object['values'](SYSTEM_MODES)[_0x4563e8(0x225)](_0x11491e[_0x4563e8(0x2ad)])){this[_0x4563e8(0x19e)]=_0x11491e['val'];if(_0x11491e[_0x4563e8(0x2ad)]===SYSTEM_MODES[_0x4563e8(0x1c3)])await setPresence(this,![]);else await setPresence(this,!![]);}if(!_0x11491e[_0x4563e8(0x2c1)])this[_0x4563e8(0x29c)](_0xcfcb0f,{'val':this[_0x4563e8(0x19e)],'ack':!![]});return;}if(!_0x11491e[_0x4563e8(0x2c1)]){_0xcfcb0f[_0x4563e8(0x225)](_0x4563e8(0x1d9))&&_0x11491e[_0x4563e8(0x2ad)]&&(this[_0x4563e8(0x29c)](_0xcfcb0f,{'val':![],'ack':!![]}),runGeminiAnalysis(this));if(_0xcfcb0f[_0x4563e8(0x225)]('triggerDailyDigest')&&_0x11491e['val']){this['setState'](_0xcfcb0f,{'val':![],'ack':!![]});if(this[_0x4563e8(0x233)])createDailyDigest(this);}_0xcfcb0f[_0x4563e8(0x225)](_0x4563e8(0x26b))&&_0x11491e[_0x4563e8(0x2ad)]&&(this[_0x4563e8(0x29c)](_0xcfcb0f,{'val':![],'ack':!![]}),sendMorningBriefing(this));_0xcfcb0f[_0x4563e8(0x225)](_0x4563e8(0x271))&&_0x11491e[_0x4563e8(0x2ad)]&&(this[_0x4563e8(0x29c)](_0xcfcb0f,{'val':![],'ack':!![]}),executeAutomationAction(this));if(_0xcfcb0f['includes'](_0x4563e8(0x218))&&_0x11491e[_0x4563e8(0x2ad)]){this[_0x4563e8(0x29c)](_0xcfcb0f,{'val':![],'ack':!![]});if(this[_0x4563e8(0x233)])try{const _0x450077=await this['getStateAsync'](_0x4563e8(0x234));if(_0x450077&&_0x450077[_0x4563e8(0x2ad)]){const _0x2e944a=JSON[_0x4563e8(0x236)](_0x450077[_0x4563e8(0x2ad)]);this[_0x4563e8(0x27e)][_0x4563e8(0x1fb)](_0x4563e8(0x204)),this['setStateAsync'](_0x4563e8(0x1ef),{'val':_0x4563e8(0x198),'ack':!![]}),sendToPython(this,_0x4563e8(0x269),{'sequences':_0x2e944a});}}catch(_0x12de42){this[_0x4563e8(0x27e)]['error'](_0x4563e8(0x1cf)+_0x12de42[_0x4563e8(0x21c)]);}}if(_0xcfcb0f[_0x4563e8(0x225)](_0x4563e8(0x1e5))&&_0x11491e['val']){this['setState'](_0xcfcb0f,{'val':![],'ack':!![]});if(this[_0x4563e8(0x233)])try{const _0x4f6552=await this[_0x4563e8(0x293)](LTM_DP_DAILY_DIGESTS);if(_0x4f6552&&_0x4f6552[_0x4563e8(0x2ad)])sendToPython(this,_0x4563e8(0x282),{'digests':JSON[_0x4563e8(0x236)](_0x4f6552[_0x4563e8(0x2ad)])});}catch(_0x517737){}}if(_0xcfcb0f['includes']('analysis.training.triggerEnergy')&&_0x11491e[_0x4563e8(0x2ad)]){this[_0x4563e8(0x29c)](_0xcfcb0f,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x333b98=await this['getStateAsync'](_0x4563e8(0x2db));if(_0x333b98&&_0x333b98[_0x4563e8(0x2ad)])sendToPython(this,_0x4563e8(0x2bd),{'points':JSON[_0x4563e8(0x236)](_0x333b98[_0x4563e8(0x2ad)])});}catch(_0xe90ca9){}}if(_0xcfcb0f[_0x4563e8(0x225)](_0x4563e8(0x231))&&_0x11491e['val']){this[_0x4563e8(0x29c)](_0xcfcb0f,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x5ca0ba=await this[_0x4563e8(0x293)](LTM_DP_RAW_LOG);_0x5ca0ba&&_0x5ca0ba[_0x4563e8(0x2ad)]&&(this[_0x4563e8(0x27e)][_0x4563e8(0x1fb)](_0x4563e8(0x28c)),sendToPython(this,_0x4563e8(0x298),{'events':JSON[_0x4563e8(0x236)](_0x5ca0ba[_0x4563e8(0x2ad)])}));}catch(_0x5e2732){}}if(_0xcfcb0f[_0x4563e8(0x225)]('analysis.training.triggerTopology')&&_0x11491e[_0x4563e8(0x2ad)]){this['setState'](_0xcfcb0f,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x52c94c=await this[_0x4563e8(0x293)](_0x4563e8(0x234));if(_0x52c94c&&_0x52c94c[_0x4563e8(0x2ad)]){const _0x5b423e=JSON[_0x4563e8(0x236)](_0x52c94c[_0x4563e8(0x2ad)]);this['log'][_0x4563e8(0x1fb)](_0x4563e8(0x2b0)),sendToPython(this,'BUILD_TOPOLOGY',{'sequences':_0x5b423e});}}catch(_0xb85b6a){this['log'][_0x4563e8(0x25b)](_0x4563e8(0x284)+_0xb85b6a[_0x4563e8(0x21c)]);}}return;}if(this[_0x4563e8(0x265)][_0x4563e8(0x2ed)]&&this[_0x4563e8(0x265)]['presenceDevices'][_0x4563e8(0x225)](_0xcfcb0f)){await checkWifiPresence(this);return;}const _0x1eb217=(this[_0x4563e8(0x265)]['devices']||[])[_0x4563e8(0x2be)](_0x55e82a=>_0x55e82a['id']===_0xcfcb0f);if(_0x1eb217)processSensorEvent(this,_0xcfcb0f,_0x11491e,_0x1eb217);}async[a0_0x5a7bc1(0x274)](_0x5f010a){const _0xa5c4d1=a0_0x5a7bc1;if(typeof _0x5f010a===_0xa5c4d1(0x228)&&_0x5f010a[_0xa5c4d1(0x21c)]){if(_0x5f010a['command']===_0xa5c4d1(0x1b3)){const _0x407275=_0x5f010a[_0xa5c4d1(0x21c)][_0xa5c4d1(0x304)]||this[_0xa5c4d1(0x265)][_0xa5c4d1(0x19c)];if(!_0x407275)return this[_0xa5c4d1(0x1e3)](_0x5f010a[_0xa5c4d1(0x2b1)],_0x5f010a['command'],{'success':![],'message':'Kein\x20API\x20Key.'},_0x5f010a[_0xa5c4d1(0x24c)]);try{const _0x208cda=new GoogleGenerativeAI(_0x407275),_0x4b278d=_0x208cda[_0xa5c4d1(0x314)]({'model':GEMINI_MODEL}),_0xd2b612=await _0x4b278d['generateContent']('Hi');this[_0xa5c4d1(0x1e3)](_0x5f010a[_0xa5c4d1(0x2b1)],_0x5f010a[_0xa5c4d1(0x268)],{'success':!![],'message':'OK:\x20'+_0xd2b612['response'][_0xa5c4d1(0x1f6)]()},_0x5f010a[_0xa5c4d1(0x24c)]);}catch(_0x478353){this[_0xa5c4d1(0x1e3)](_0x5f010a['from'],_0x5f010a['command'],{'success':![],'message':_0xa5c4d1(0x27a)+_0x478353[_0xa5c4d1(0x21c)]},_0x5f010a[_0xa5c4d1(0x24c)]);}}else{if(_0x5f010a[_0xa5c4d1(0x268)]===_0xa5c4d1(0x300)){const _0x236099=await getWeatherContext(this),_0x962b26=await getCalendarContext(this);this[_0xa5c4d1(0x1e3)](_0x5f010a[_0xa5c4d1(0x2b1)],_0x5f010a[_0xa5c4d1(0x268)],{'success':!![],'weather':_0x236099,'calendar':_0x962b26},_0x5f010a['callback']);}else{if(_0x5f010a[_0xa5c4d1(0x268)]==='getLtmData'){if(!this[_0xa5c4d1(0x233)])return this[_0xa5c4d1(0x1e3)](_0x5f010a[_0xa5c4d1(0x2b1)],_0x5f010a[_0xa5c4d1(0x268)],{'success':![],'isPro':![]},_0x5f010a['callback']);let _0x32ebea={'status':_0xa5c4d1(0x2ac)};try{const _0x11f470=await this[_0xa5c4d1(0x293)](LTM_DP_DRIFT_STATUS);_0x32ebea[_0xa5c4d1(0x19f)]=_0x11f470?_0x11f470[_0xa5c4d1(0x2ad)]:_0xa5c4d1(0x2ac);}catch(_0x2558da){}this['sendTo'](_0x5f010a['from'],_0x5f010a['command'],{'success':!![],'isPro':!![],'dailyDigests':this[_0xa5c4d1(0x245)],'driftAnalysis':_0x32ebea,'analysisHistory':this['analysisHistory']},_0x5f010a['callback']);}else{if(_0x5f010a[_0xa5c4d1(0x268)]===_0xa5c4d1(0x29d)){const _0x5b5af3=this[_0xa5c4d1(0x245)][_0xa5c4d1(0x20a)],_0x4b6a23=new Date(),_0x3b5a02=new Date(_0x4b6a23[_0xa5c4d1(0x299)](),_0x4b6a23[_0xa5c4d1(0x324)](),_0x4b6a23[_0xa5c4d1(0x2bf)]())['getTime'](),_0x315d7c=this['rawEventLog']['filter'](_0x5992a5=>new Date(_0x5992a5[_0xa5c4d1(0x2b5)])['getTime']()>_0x3b5a02)[_0xa5c4d1(0x20a)],_0x4b61b4=new Array(0x18)[_0xa5c4d1(0x19b)](0x0);this[_0xa5c4d1(0x1eb)]['forEach'](_0x237dd9=>{const _0x493983=_0xa5c4d1,_0x2ac67a=new Date(_0x237dd9[_0x493983(0x2b5)]);if(_0x2ac67a[_0x493983(0x2f8)]()>_0x3b5a02)_0x4b61b4[_0x2ac67a['getHours']()]++;});let _0x268b26={'status':_0xa5c4d1(0x2ac)};try{const _0x5c80f0=await this[_0xa5c4d1(0x293)](LTM_DP_DRIFT_STATUS);_0x268b26[_0xa5c4d1(0x19f)]=_0x5c80f0?_0x5c80f0[_0xa5c4d1(0x2ad)]:'N/A';}catch(_0x48a911){}let _0x21290b='';try{const _0x25e0df=await this[_0xa5c4d1(0x293)](_0xa5c4d1(0x1ba));_0x21290b=_0x25e0df?_0x25e0df[_0xa5c4d1(0x2ad)]:'';}catch(_0x2de53c){}let _0x2ec3a3=null;!this['geminiModel']&&(_0x2ec3a3=this['config']['geminiApiKey']?_0xa5c4d1(0x24e):_0xa5c4d1(0x191));let _0x2efb80={'detected':![],'description':'','targetId':'','targetValue':'','autoApply':![]};try{const _0x593b7c=await this[_0xa5c4d1(0x293)](_0xa5c4d1(0x302));if(_0x593b7c&&_0x593b7c['val']){_0x2efb80[_0xa5c4d1(0x285)]=!![];const _0x4b2c0a=await this[_0xa5c4d1(0x293)]('analysis.automation.description');_0x2efb80[_0xa5c4d1(0x1ac)]=_0x4b2c0a?_0x4b2c0a[_0xa5c4d1(0x2ad)]:'';const _0x133a19=await this[_0xa5c4d1(0x293)]('analysis.automation.targetId');_0x2efb80[_0xa5c4d1(0x2fb)]=_0x133a19?_0x133a19['val']:'';const _0x3a6807=await this[_0xa5c4d1(0x293)](_0xa5c4d1(0x200));_0x2efb80[_0xa5c4d1(0x1bf)]=_0x3a6807?_0x3a6807[_0xa5c4d1(0x2ad)]:'';}const _0x2e82fc=await this['getStateAsync'](_0xa5c4d1(0x1de));_0x2efb80[_0xa5c4d1(0x1f4)]=_0x2e82fc?!!_0x2e82fc[_0xa5c4d1(0x2ad)]:![];}catch(_0x17c758){}this[_0xa5c4d1(0x1e3)](_0x5f010a[_0xa5c4d1(0x2b1)],_0x5f010a[_0xa5c4d1(0x268)],{'success':!![],'eventHistory':this[_0xa5c4d1(0x2ff)][_0xa5c4d1(0x1b5)](0x0,0xf),'stats':{'digestCount':_0x5b5af3,'eventCountToday':_0x315d7c,'hourlyActivity':_0x4b61b4,'driftStatus':_0x268b26[_0xa5c4d1(0x19f)],'isPresent':this[_0xa5c4d1(0x28a)],'presenceWho':_0x21290b,'minDays':this[_0xa5c4d1(0x265)]['minDaysForBaseline']||0x7,'stbDays':this[_0xa5c4d1(0x265)][_0xa5c4d1(0x1d3)]||0xe,'ltbDays':this[_0xa5c4d1(0x265)][_0xa5c4d1(0x291)]||0x3c,'systemError':_0x2ec3a3},'automation':_0x2efb80},_0x5f010a[_0xa5c4d1(0x24c)]);}else{if(_0x5f010a['command']==='scanDevices')try{const _0x5220a7=await scanner['scanForDevices'](this,_0x5f010a[_0xa5c4d1(0x21c)]||{});this[_0xa5c4d1(0x1e3)](_0x5f010a[_0xa5c4d1(0x2b1)],_0x5f010a[_0xa5c4d1(0x268)],{'success':!![],'devices':_0x5220a7},_0x5f010a[_0xa5c4d1(0x24c)]);}catch(_0x50fa69){this[_0xa5c4d1(0x1e3)](_0x5f010a['from'],_0x5f010a[_0xa5c4d1(0x268)],{'success':![],'error':_0x50fa69[_0xa5c4d1(0x21c)]},_0x5f010a['callback']);}else{if(_0x5f010a['command']==='getEnums'){const _0x66871a=await this['getForeignObjectsAsync'](_0xa5c4d1(0x2f5),'enum'),_0x2fb56b=[];if(_0x66871a)for(const _0x5dcbd3 in _0x66871a){const _0x2f2a5f=_0x66871a[_0x5dcbd3],_0x276e78=(_0x2f2a5f[_0xa5c4d1(0x329)]&&typeof _0x2f2a5f[_0xa5c4d1(0x329)][_0xa5c4d1(0x2fd)]===_0xa5c4d1(0x228)?_0x2f2a5f[_0xa5c4d1(0x329)][_0xa5c4d1(0x2fd)]['de']:_0x2f2a5f[_0xa5c4d1(0x329)]['name'])||_0x2f2a5f['common'][_0xa5c4d1(0x2fd)];_0x2fb56b[_0xa5c4d1(0x1a4)]({'id':_0x5dcbd3,'name':_0x276e78});}const _0x1c3243=await this[_0xa5c4d1(0x25e)](_0xa5c4d1(0x216),_0xa5c4d1(0x323)),_0x558066=[];if(_0x1c3243)for(const _0x12f0d3 in _0x1c3243){const _0x567a08=_0x1c3243[_0x12f0d3],_0x129066=(_0x567a08['common']&&typeof _0x567a08[_0xa5c4d1(0x329)][_0xa5c4d1(0x2fd)]==='object'?_0x567a08[_0xa5c4d1(0x329)][_0xa5c4d1(0x2fd)]['de']:_0x567a08['common'][_0xa5c4d1(0x2fd)])||_0x12f0d3[_0xa5c4d1(0x276)]('.')[_0xa5c4d1(0x30a)]();_0x558066[_0xa5c4d1(0x1a4)](_0x129066);}this['sendTo'](_0x5f010a[_0xa5c4d1(0x2b1)],_0x5f010a[_0xa5c4d1(0x268)],{'success':!![],'enums':_0x2fb56b,'rooms':_0x558066},_0x5f010a[_0xa5c4d1(0x24c)]);}else{if(_0x5f010a[_0xa5c4d1(0x268)]===_0xa5c4d1(0x199)){const _0x890ac5=_0x5f010a['message']['instance'];if(!_0x890ac5)return this[_0xa5c4d1(0x1e3)](_0x5f010a['from'],_0x5f010a[_0xa5c4d1(0x268)],{'success':![],'error':_0xa5c4d1(0x2f4)},_0x5f010a['callback']);const _0x4794d3=await getCalendarNames(this,_0x890ac5);this['sendTo'](_0x5f010a[_0xa5c4d1(0x2b1)],_0x5f010a[_0xa5c4d1(0x268)],{'success':!![],'names':_0x4794d3},_0x5f010a[_0xa5c4d1(0x24c)]);}else{if(_0x5f010a['command']===_0xa5c4d1(0x2ba)){const {targetId:_0x1b40b5,targetValue:_0x2eba72}=_0x5f010a['message'];this[_0xa5c4d1(0x27e)][_0xa5c4d1(0x1fb)](_0xa5c4d1(0x2fe)+_0x1b40b5+_0xa5c4d1(0x2d2)+_0x2eba72),await this[_0xa5c4d1(0x2bb)](_0xa5c4d1(0x302),{'val':!![],'ack':!![]}),await this[_0xa5c4d1(0x2bb)](_0xa5c4d1(0x220),{'val':_0xa5c4d1(0x263)+_0x1b40b5,'ack':!![]}),await this[_0xa5c4d1(0x2bb)](_0xa5c4d1(0x1ce),{'val':_0x1b40b5,'ack':!![]}),await this[_0xa5c4d1(0x2bb)](_0xa5c4d1(0x200),{'val':_0x2eba72,'ack':!![]}),this[_0xa5c4d1(0x1e3)](_0x5f010a['from'],_0x5f010a['command'],{'success':!![]},_0x5f010a[_0xa5c4d1(0x24c)]);}else{if(_0x5f010a[_0xa5c4d1(0x268)]===_0xa5c4d1(0x311)){const {historyId:_0xdb6c1d,rating:_0x5e5806,comment:_0x2ab40a,alertReason:_0x1fbcf8}=_0x5f010a[_0xa5c4d1(0x21c)];_0xdb6c1d&&_0x5e5806?(await saveFeedback(this,{'timestamp':Date[_0xa5c4d1(0x20e)](),'historyId':_0xdb6c1d,'rating':_0x5e5806,'comment':_0x2ab40a,'alertReason':_0x1fbcf8}),this[_0xa5c4d1(0x1e3)](_0x5f010a[_0xa5c4d1(0x2b1)],_0x5f010a[_0xa5c4d1(0x268)],{'success':!![]},_0x5f010a['callback'])):this[_0xa5c4d1(0x1e3)](_0x5f010a[_0xa5c4d1(0x2b1)],_0x5f010a[_0xa5c4d1(0x268)],{'success':![],'error':_0xa5c4d1(0x1a7)},_0x5f010a['callback']);}else _0x5f010a[_0xa5c4d1(0x268)]===_0xa5c4d1(0x322)&&(this[_0xa5c4d1(0x27e)]['info'](_0xa5c4d1(0x1c7)),await this[_0xa5c4d1(0x2bb)](_0xa5c4d1(0x302),{'val':![],'ack':!![]}),await this[_0xa5c4d1(0x2bb)](_0xa5c4d1(0x220),{'val':'','ack':!![]}),this[_0xa5c4d1(0x1e3)](_0x5f010a[_0xa5c4d1(0x2b1)],_0x5f010a[_0xa5c4d1(0x268)],{'success':!![]},_0x5f010a[_0xa5c4d1(0x24c)]));}}}}}}}}}}}if(require[a0_0x5a7bc1(0x2ee)]!==module)module[a0_0x5a7bc1(0x1cb)]=_0x1be712=>new CogniLiving(_0x1be712);else new CogniLiving();