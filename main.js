const a0_0x3c717c=a0_0x4b68;(function(_0x26233f,_0x253cb2){const _0x783f66=a0_0x4b68,_0x1acd80=_0x26233f();while(!![]){try{const _0x13ca58=parseInt(_0x783f66(0x154))/0x1+-parseInt(_0x783f66(0x219))/0x2*(parseInt(_0x783f66(0x1ba))/0x3)+-parseInt(_0x783f66(0x1a0))/0x4*(-parseInt(_0x783f66(0x25e))/0x5)+parseInt(_0x783f66(0x1b7))/0x6*(parseInt(_0x783f66(0x1e9))/0x7)+-parseInt(_0x783f66(0x1a8))/0x8+-parseInt(_0x783f66(0x160))/0x9+parseInt(_0x783f66(0x130))/0xa*(-parseInt(_0x783f66(0x22a))/0xb);if(_0x13ca58===_0x253cb2)break;else _0x1acd80['push'](_0x1acd80['shift']());}catch(_0x50e62c){_0x1acd80['push'](_0x1acd80['shift']());}}}(a0_0x37ee,0xc0220));const a0_0x3f9100=(function(){let _0x3274e4=!![];return function(_0x3aac01,_0x656cc2){const _0x27456=_0x3274e4?function(){const _0x1f37d5=a0_0x4b68;if(_0x656cc2){const _0x9aaa7b=_0x656cc2[_0x1f37d5(0x229)](_0x3aac01,arguments);return _0x656cc2=null,_0x9aaa7b;}}:function(){};return _0x3274e4=![],_0x27456;};}()),a0_0x3baaff=a0_0x3f9100(this,function(){const _0x5cbe9a=a0_0x4b68;return a0_0x3baaff['toString']()[_0x5cbe9a(0x186)](_0x5cbe9a(0x244))[_0x5cbe9a(0x1e7)]()[_0x5cbe9a(0x16c)](a0_0x3baaff)[_0x5cbe9a(0x186)]('(((.+)+)+)+$');});a0_0x3baaff();'use strict';const utils=require(a0_0x3c717c(0xe6)),{GoogleGenerativeAI}=require(a0_0x3c717c(0x20e)),{spawn}=require('child_process'),path=require(a0_0x3c717c(0x1bf)),fs=require('fs'),installer=require('./lib/installer'),scanner=require('./lib/scanner'),schedulers=require(a0_0x3c717c(0x13e)),HISTORY_MAX_SIZE=0x32,RAW_LOG_MAX_SIZE=0x9c4,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL=a0_0x3c717c(0x119),SEQUENCE_TIMEOUT_MS=0x5*0x3c*0x3e8,MAX_TRAINING_SET_SIZE=0x1f4,THERMO_LOG_SIZE=0x3e8,EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,LTM_DP_RAW_LOG=a0_0x3c717c(0x107),LTM_DP_DAILY_DIGESTS='LTM.dailyDigests',LTM_DP_STATUS=a0_0x3c717c(0x14a),LTM_DP_TRIGGER_DIGEST='LTM.triggerDailyDigest',LTM_DP_BASELINE_STATUS=a0_0x3c717c(0x19c),LTM_DP_DRIFT_CHANNEL=a0_0x3c717c(0x1ce),LTM_DP_DRIFT_STATUS=a0_0x3c717c(0x128),LTM_DP_DRIFT_DETAILS=a0_0x3c717c(0x176),LTM_DP_DRIFT_LAST_CHECK=a0_0x3c717c(0x25b),SYSTEM_DP_MODE=a0_0x3c717c(0x26e),SYSTEM_MODES={'NORMAL':a0_0x3c717c(0x1e4),'VACATION':a0_0x3c717c(0x215),'PARTY':a0_0x3c717c(0x1c2),'GUEST':a0_0x3c717c(0x1e5)},AUTO_RESET_MODES=[SYSTEM_MODES[a0_0x3c717c(0x257)],SYSTEM_MODES['GUEST']],PERSONA_MAPPING={'generic':a0_0x3c717c(0x203),'senior_aal':a0_0x3c717c(0x25d),'family':a0_0x3c717c(0x10e),'single_comfort':a0_0x3c717c(0x1ee),'security':a0_0x3c717c(0x13c)},ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};let activeSequence=[],sequenceTimer=null;async function initZombies(_0x5b6329){const _0x5e86fc=a0_0x3c717c;try{const _0x706cbe=['analysis.history_debug_00',_0x5e86fc(0x1b9)];for(const _0x3dfe95 of _0x706cbe){try{const _0x152c6e=await _0x5b6329[_0x5e86fc(0x1d4)](_0x3dfe95);if(_0x152c6e)await _0x5b6329['delObjectAsync'](_0x3dfe95);}catch(_0x45242f){}}}catch(_0x399f17){}}async function checkLicense(_0x5698d4){return!![];}async function initHistory(_0x49eb37){const _0x24b695=a0_0x3c717c;try{const _0x5ccd70=await _0x49eb37['getStateAsync'](_0x24b695(0x199));_0x5ccd70&&_0x5ccd70['val']&&(_0x49eb37[_0x24b695(0x151)]=JSON['parse'](_0x5ccd70[_0x24b695(0x18b)][_0x24b695(0x1e7)]()));}catch(_0xa06acf){_0x49eb37['eventHistory']=[];}try{const _0x5d5687=await _0x49eb37[_0x24b695(0xfb)]('analysis.analysisHistory');if(_0x5d5687&&_0x5d5687[_0x24b695(0x18b)])_0x49eb37['analysisHistory']=JSON[_0x24b695(0x1b4)](_0x5d5687[_0x24b695(0x18b)][_0x24b695(0x1e7)]());}catch(_0x4f6e0c){_0x49eb37[_0x24b695(0x168)]=[];}if(_0x49eb37[_0x24b695(0x151)]&&_0x49eb37[_0x24b695(0x151)][_0x24b695(0xe5)]>0x0){_0x49eb37[_0x24b695(0x247)][_0x24b695(0x1cd)](_0x24b695(0x24b));for(let _0x36adc8=_0x49eb37[_0x24b695(0x151)]['length']-0x1;_0x36adc8>=0x0;_0x36adc8--){const _0x53e56e=_0x49eb37[_0x24b695(0x151)][_0x36adc8];if(_0x53e56e&&_0x53e56e['id']!==undefined&&_0x53e56e[_0x24b695(0x146)]!==undefined)_0x49eb37[_0x24b695(0x19e)][_0x53e56e['id']]=_0x53e56e[_0x24b695(0x146)];}}}async function initSystemConfig(_0x387ae3){const _0x47ae1a=a0_0x3c717c;try{const _0x37f798=await _0x387ae3['getForeignObjectAsync'](_0x47ae1a(0x167));if(_0x37f798&&_0x37f798['common'])_0x387ae3['systemConfig']={'latitude':_0x37f798[_0x47ae1a(0x24a)][_0x47ae1a(0x197)]||0x0,'longitude':_0x37f798[_0x47ae1a(0x24a)][_0x47ae1a(0x1dd)]||0x0,'city':_0x37f798[_0x47ae1a(0x24a)]['city']||''};}catch(_0x33d61e){}}async function createAllObjects(_0x6c25d6){const _0x1e6bbf=a0_0x3c717c;await _0x6c25d6[_0x1e6bbf(0x15e)](_0x1e6bbf(0x11c),{'type':_0x1e6bbf(0x188),'common':{'name':_0x1e6bbf(0x114)},'native':{}}),await _0x6c25d6[_0x1e6bbf(0x15e)](SYSTEM_DP_MODE,{'type':_0x1e6bbf(0x166),'common':{'name':'System\x20Mode','type':_0x1e6bbf(0x278),'role':_0x1e6bbf(0x166),'read':!![],'write':!![],'def':SYSTEM_MODES[_0x1e6bbf(0x112)]},'native':{}}),await _0x6c25d6[_0x1e6bbf(0xda)](_0x1e6bbf(0x25a),{'type':_0x1e6bbf(0x166),'common':{'name':'Who\x20is\x20present?','type':_0x1e6bbf(0x278),'role':'text','read':!![],'write':![]},'native':{}}),await _0x6c25d6[_0x1e6bbf(0xda)]('events.lastEvent',{'type':'state','common':{'name':_0x1e6bbf(0x1b2),'type':_0x1e6bbf(0x278),'role':'json','read':!![],'write':![]},'native':{}}),await _0x6c25d6['setObjectNotExistsAsync'](_0x1e6bbf(0x199),{'type':_0x1e6bbf(0x166),'common':{'name':_0x1e6bbf(0x277),'type':'string','role':_0x1e6bbf(0x1fe),'read':!![],'write':![]},'native':{}}),await _0x6c25d6[_0x1e6bbf(0x15e)]('analysis.training',{'type':_0x1e6bbf(0x188),'common':{'name':_0x1e6bbf(0x198)},'native':{}}),await _0x6c25d6[_0x1e6bbf(0xda)]('analysis.training.triggerSecurity',{'type':_0x1e6bbf(0x166),'common':{'name':'Train\x20Security','type':_0x1e6bbf(0x22c),'role':_0x1e6bbf(0x1b1),'read':!![],'write':!![]},'native':{}}),await _0x6c25d6[_0x1e6bbf(0xda)]('analysis.training.triggerHealth',{'type':'state','common':{'name':_0x1e6bbf(0xe9),'type':'boolean','role':_0x1e6bbf(0x1b1),'read':!![],'write':!![]},'native':{}}),await _0x6c25d6[_0x1e6bbf(0xda)]('analysis.training.triggerEnergy',{'type':_0x1e6bbf(0x166),'common':{'name':_0x1e6bbf(0x1b5),'type':_0x1e6bbf(0x22c),'role':_0x1e6bbf(0x1b1),'read':!![],'write':!![]},'native':{}}),await _0x6c25d6[_0x1e6bbf(0xda)](_0x1e6bbf(0x231),{'type':_0x1e6bbf(0x166),'common':{'name':'Train\x20Comfort','type':_0x1e6bbf(0x22c),'role':_0x1e6bbf(0x1b1),'read':!![],'write':!![]},'native':{}}),await _0x6c25d6[_0x1e6bbf(0xda)]('analysis.training.triggerTopology',{'type':_0x1e6bbf(0x166),'common':{'name':'Build\x20Topology','type':_0x1e6bbf(0x22c),'role':_0x1e6bbf(0x1b1),'read':!![],'write':!![]},'native':{}}),await _0x6c25d6[_0x1e6bbf(0xda)](_0x1e6bbf(0x26f),{'type':'state','common':{'name':'Training\x20Status','type':_0x1e6bbf(0x278),'role':'text','read':!![],'write':![]},'native':{}}),await _0x6c25d6[_0x1e6bbf(0x15e)](_0x1e6bbf(0x21b),{'type':_0x1e6bbf(0x188),'common':{'name':_0x1e6bbf(0x12f)},'native':{}}),await _0x6c25d6[_0x1e6bbf(0xda)]('analysis.security.lastScore',{'type':'state','common':{'name':_0x1e6bbf(0x121),'type':'number','role':_0x1e6bbf(0x146),'read':!![],'write':![]},'native':{}}),await _0x6c25d6[_0x1e6bbf(0xda)](_0x1e6bbf(0x24c),{'type':_0x1e6bbf(0x166),'common':{'name':_0x1e6bbf(0x17d),'type':'number','role':_0x1e6bbf(0x146),'read':!![],'write':![],'def':0.05},'native':{}}),await _0x6c25d6[_0x1e6bbf(0xda)]('analysis.security.lastCheck',{'type':'state','common':{'name':_0x1e6bbf(0x25f),'type':_0x1e6bbf(0x278),'role':_0x1e6bbf(0x105),'read':!![],'write':![]},'native':{}}),await _0x6c25d6[_0x1e6bbf(0xda)]('analysis.security.topologyMatrix',{'type':_0x1e6bbf(0x166),'common':{'name':_0x1e6bbf(0x1a5),'type':_0x1e6bbf(0x278),'role':'json','read':!![],'write':![]},'native':{}}),await _0x6c25d6[_0x1e6bbf(0x15e)](_0x1e6bbf(0x222),{'type':_0x1e6bbf(0x188),'common':{'name':_0x1e6bbf(0xea)},'native':{}}),await _0x6c25d6['setObjectNotExistsAsync'](_0x1e6bbf(0x16a),{'type':_0x1e6bbf(0x166),'common':{'name':'Last\x20Check','type':_0x1e6bbf(0x278),'role':_0x1e6bbf(0x105),'read':!![],'write':![]},'native':{}}),await _0x6c25d6['setObjectNotExistsAsync'](_0x1e6bbf(0x1d5),{'type':'state','common':{'name':_0x1e6bbf(0x271),'type':_0x1e6bbf(0x22c),'role':'indicator','read':!![],'write':![]},'native':{}}),await _0x6c25d6[_0x1e6bbf(0xda)](_0x1e6bbf(0x22d),{'type':_0x1e6bbf(0x166),'common':{'name':_0x1e6bbf(0x196),'type':_0x1e6bbf(0x278),'role':_0x1e6bbf(0xfd),'read':!![],'write':![]},'native':{}}),await _0x6c25d6[_0x1e6bbf(0xda)](_0x1e6bbf(0x106),{'type':_0x1e6bbf(0x166),'common':{'name':_0x1e6bbf(0x17f),'type':'number','role':'value','read':!![],'write':![]},'native':{}}),await _0x6c25d6[_0x1e6bbf(0xda)](_0x1e6bbf(0x135),{'type':_0x1e6bbf(0x166),'common':{'name':'Today\x20Vector\x20(15m)','type':_0x1e6bbf(0x278),'role':_0x1e6bbf(0x1fe),'read':!![],'write':![]},'native':{}}),await _0x6c25d6[_0x1e6bbf(0xda)](_0x1e6bbf(0x15c),{'type':_0x1e6bbf(0x166),'common':{'name':_0x1e6bbf(0x21e),'type':_0x1e6bbf(0x17a),'role':'value','read':!![],'write':![]},'native':{}}),await _0x6c25d6['extendObjectAsync'](_0x1e6bbf(0x115),{'type':_0x1e6bbf(0x188),'common':{'name':_0x1e6bbf(0x11b)},'native':{}}),await _0x6c25d6[_0x1e6bbf(0xda)](_0x1e6bbf(0x23c),{'type':_0x1e6bbf(0x166),'common':{'name':_0x1e6bbf(0x179),'type':'string','role':'text','read':!![],'write':![]},'native':{}}),await _0x6c25d6[_0x1e6bbf(0xda)](_0x1e6bbf(0x252),{'type':_0x1e6bbf(0x166),'common':{'name':_0x1e6bbf(0x142),'type':_0x1e6bbf(0x278),'role':_0x1e6bbf(0xfd),'read':!![],'write':![]},'native':{}}),await _0x6c25d6[_0x1e6bbf(0xda)](_0x1e6bbf(0x162),{'type':_0x1e6bbf(0x166),'common':{'name':'Temperature\x20Forecast','type':_0x1e6bbf(0x278),'role':'json','read':!![],'write':![]},'native':{}}),await _0x6c25d6[_0x1e6bbf(0x15e)]('LTM',{'type':_0x1e6bbf(0x188),'common':{'name':'LTM'},'native':{}}),await _0x6c25d6['extendObjectAsync'](LTM_DP_RAW_LOG,{'type':_0x1e6bbf(0x166),'common':{'name':_0x1e6bbf(0x266),'type':_0x1e6bbf(0x278),'role':_0x1e6bbf(0x1fe),'read':!![],'write':![]},'native':{}}),await _0x6c25d6['extendObjectAsync'](LTM_DP_DAILY_DIGESTS,{'type':_0x1e6bbf(0x166),'common':{'name':'Daily\x20Digests','type':_0x1e6bbf(0x278),'role':_0x1e6bbf(0x1fe),'read':!![],'write':![]},'native':{}}),await _0x6c25d6[_0x1e6bbf(0xda)](_0x1e6bbf(0x264),{'type':_0x1e6bbf(0x166),'common':{'name':_0x1e6bbf(0x161),'type':_0x1e6bbf(0x278),'role':_0x1e6bbf(0x1fe),'read':!![],'write':![]},'native':{}}),await _0x6c25d6[_0x1e6bbf(0xda)]('LTM.trainingData.thermodynamics',{'type':_0x1e6bbf(0x166),'common':{'name':_0x1e6bbf(0x1be),'type':'string','role':_0x1e6bbf(0x1fe),'read':!![],'write':![]},'native':{}}),await _0x6c25d6[_0x1e6bbf(0xda)](_0x1e6bbf(0x1a2),{'type':_0x1e6bbf(0x166),'common':{'name':_0x1e6bbf(0x11a),'type':_0x1e6bbf(0x22c),'role':_0x1e6bbf(0x1b1),'read':!![],'write':!![]},'native':{}}),await _0x6c25d6[_0x1e6bbf(0xda)](_0x1e6bbf(0x1bd),{'type':_0x1e6bbf(0x166),'common':{'name':_0x1e6bbf(0x236),'type':_0x1e6bbf(0x22c),'role':_0x1e6bbf(0x1b1),'read':!![],'write':!![]},'native':{}}),await _0x6c25d6['setObjectNotExistsAsync']('analysis.isAlert',{'type':_0x1e6bbf(0x166),'common':{'name':_0x1e6bbf(0x20b),'type':'boolean','role':_0x1e6bbf(0x14b),'read':!![],'write':![]},'native':{}}),await _0x6c25d6['setObjectNotExistsAsync'](_0x1e6bbf(0x1f7),{'type':_0x1e6bbf(0x166),'common':{'name':_0x1e6bbf(0x213),'type':_0x1e6bbf(0x278),'role':_0x1e6bbf(0x1f4),'read':!![],'write':![]},'native':{}}),await _0x6c25d6['setObjectNotExistsAsync'](_0x1e6bbf(0x120),{'type':_0x1e6bbf(0x166),'common':{'name':_0x1e6bbf(0x262),'type':_0x1e6bbf(0x278),'role':_0x1e6bbf(0xfd),'read':!![],'write':![]},'native':{}}),await _0x6c25d6['setObjectNotExistsAsync'](_0x1e6bbf(0x1ab),{'type':'state','common':{'name':_0x1e6bbf(0xe3),'type':_0x1e6bbf(0x22c),'role':_0x1e6bbf(0x20a),'read':!![],'write':![]},'native':{}}),await _0x6c25d6[_0x1e6bbf(0xda)](_0x1e6bbf(0x1a6),{'type':_0x1e6bbf(0x166),'common':{'name':'Description','type':_0x1e6bbf(0x278),'role':'text','read':!![],'write':![]},'native':{}}),await _0x6c25d6[_0x1e6bbf(0xda)](_0x1e6bbf(0x24e),{'type':_0x1e6bbf(0x166),'common':{'name':_0x1e6bbf(0x208),'type':_0x1e6bbf(0x278),'role':_0x1e6bbf(0x1fe),'read':!![],'write':![]},'native':{}}),await _0x6c25d6[_0x1e6bbf(0xda)]('analysis.automation.targetId',{'type':_0x1e6bbf(0x166),'common':{'name':_0x1e6bbf(0x12c),'type':_0x1e6bbf(0x278),'role':_0x1e6bbf(0xfd),'read':!![],'write':![]},'native':{}}),await _0x6c25d6[_0x1e6bbf(0xda)](_0x1e6bbf(0x18d),{'type':_0x1e6bbf(0x166),'common':{'name':'Target\x20Value','type':_0x1e6bbf(0x278),'role':_0x1e6bbf(0xfd),'read':!![],'write':![]},'native':{}}),await _0x6c25d6[_0x1e6bbf(0xda)](_0x1e6bbf(0x1ea),{'type':'state','common':{'name':_0x1e6bbf(0x17b),'type':'boolean','role':_0x1e6bbf(0x152),'read':!![],'write':!![]},'native':{}}),await _0x6c25d6[_0x1e6bbf(0xda)](_0x1e6bbf(0x18a),{'type':_0x1e6bbf(0x166),'common':{'name':_0x1e6bbf(0x144),'type':'boolean','role':_0x1e6bbf(0x1b1),'read':!![],'write':!![]},'native':{}});}async function loadSystemMode(_0x259039){const _0x11b4e0=a0_0x3c717c;try{const _0x817df6=await _0x259039[_0x11b4e0(0xfb)](SYSTEM_DP_MODE);_0x817df6&&_0x817df6[_0x11b4e0(0x18b)]&&Object[_0x11b4e0(0x263)](SYSTEM_MODES)[_0x11b4e0(0x184)](_0x817df6[_0x11b4e0(0x18b)])?_0x259039[_0x11b4e0(0x1d9)]=_0x817df6['val']:(_0x259039['currentSystemMode']=SYSTEM_MODES['NORMAL'],await _0x259039[_0x11b4e0(0x1a3)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x11b4e0(0x112)],'ack':!![]}));}catch(_0x428db1){_0x259039[_0x11b4e0(0x1d9)]=SYSTEM_MODES[_0x11b4e0(0x112)];}}async function loadRawEventLog(_0x42de02){const _0x52f47f=a0_0x3c717c;try{const _0x12eba5=await _0x42de02[_0x52f47f(0xfb)](LTM_DP_RAW_LOG);if(_0x12eba5&&_0x12eba5[_0x52f47f(0x18b)])_0x42de02[_0x52f47f(0x1e1)]=JSON['parse'](_0x12eba5[_0x52f47f(0x18b)]);}catch(_0x216c14){_0x42de02[_0x52f47f(0x1e1)]=[];}}async function saveRawEventLog(_0x499e71){const _0x4b16fd=a0_0x3c717c;if(_0x499e71[_0x4b16fd(0x1e1)][_0x4b16fd(0xe5)]>RAW_LOG_MAX_SIZE)_0x499e71[_0x4b16fd(0x1e1)][_0x4b16fd(0x23f)](0x0,_0x499e71[_0x4b16fd(0x1e1)][_0x4b16fd(0xe5)]-RAW_LOG_MAX_SIZE);await _0x499e71[_0x4b16fd(0x1a3)](LTM_DP_RAW_LOG,{'val':JSON[_0x4b16fd(0x202)](_0x499e71[_0x4b16fd(0x1e1)]),'ack':!![]});}async function loadDailyDigests(_0x50188b){const _0x3ca4e8=a0_0x3c717c;try{const _0x38debc=await _0x50188b[_0x3ca4e8(0xfb)](LTM_DP_DAILY_DIGESTS);if(_0x38debc&&_0x38debc[_0x3ca4e8(0x18b)])_0x50188b[_0x3ca4e8(0x110)]=JSON['parse'](_0x38debc['val']);}catch(_0x2d755c){_0x50188b[_0x3ca4e8(0x110)]=[];}await updateBaselineStatus(_0x50188b);}async function saveDailyDigests(_0x5cf350,_0x355ddf=!![]){const _0x17b7a2=a0_0x3c717c,_0x2fd505=_0x5cf350['config'][_0x17b7a2(0xf8)]||0x3c;_0x5cf350[_0x17b7a2(0x110)][_0x17b7a2(0xe5)]>_0x2fd505&&_0x5cf350[_0x17b7a2(0x110)][_0x17b7a2(0x23f)](0x0,_0x5cf350[_0x17b7a2(0x110)][_0x17b7a2(0xe5)]-_0x2fd505);await _0x5cf350['setStateAsync'](LTM_DP_DAILY_DIGESTS,{'val':JSON['stringify'](_0x5cf350[_0x17b7a2(0x110)]),'ack':!![]});if(_0x355ddf)await updateBaselineStatus(_0x5cf350);}async function updateAnalysisHistory(_0x18f03d,_0x59f4c2){const _0x46f1ce=a0_0x3c717c;_0x18f03d['analysisHistory'][_0x46f1ce(0x139)](_0x59f4c2);if(_0x18f03d[_0x46f1ce(0x168)]['length']>HISTORY_MAX_SIZE)_0x18f03d[_0x46f1ce(0x168)][_0x46f1ce(0x1db)]();await _0x18f03d[_0x46f1ce(0x1a3)](_0x46f1ce(0x253),{'val':JSON[_0x46f1ce(0x202)](_0x18f03d[_0x46f1ce(0x168)]),'ack':!![]});}async function updateBaselineStatus(_0x64d967){const _0xe58248=a0_0x3c717c;if(!_0x64d967[_0xe58248(0x13a)]){await _0x64d967['setStateAsync'](LTM_DP_BASELINE_STATUS,{'val':_0xe58248(0x147),'ack':!![]});return;}const _0xb8f3f2=_0x64d967[_0xe58248(0x110)][_0xe58248(0xe5)]>=(_0x64d967[_0xe58248(0x232)][_0xe58248(0x103)]||0x7)?_0xe58248(0x1d3)+_0x64d967[_0xe58248(0x110)][_0xe58248(0xe5)]+'\x20Tage)':_0xe58248(0x1cf)+_0x64d967[_0xe58248(0x110)][_0xe58248(0xe5)]+'/'+(_0x64d967[_0xe58248(0x232)][_0xe58248(0x103)]||0x7)+')';await _0x64d967['setStateAsync'](LTM_DP_BASELINE_STATUS,{'val':_0xb8f3f2,'ack':!![]});}async function initSensorSubscriptions(_0x30ae52){const _0x12c2b5=a0_0x3c717c,_0x22cae6=_0x30ae52[_0x12c2b5(0x232)]['devices'];if(_0x22cae6)for(const _0x213588 of _0x22cae6){await _0x30ae52[_0x12c2b5(0x268)](_0x213588['id']);}}async function initPresenceSubscriptions(_0xb49dbf){const _0x23f8d6=a0_0x3c717c,_0x438a07=_0xb49dbf[_0x23f8d6(0x232)][_0x23f8d6(0x138)];if(_0x438a07)for(const _0x56c7a8 of _0x438a07){await _0xb49dbf[_0x23f8d6(0x268)](_0x56c7a8);}}async function setupTelegramListener(_0x188893){const _0x4fc4b1=a0_0x3c717c,_0x4613b6=_0x188893['config'][_0x4fc4b1(0x178)];if(_0x188893[_0x4fc4b1(0x232)][_0x4fc4b1(0xf0)]&&_0x4613b6)await _0x188893[_0x4fc4b1(0x268)](_0x4613b6+_0x4fc4b1(0x248));}async function checkWifiPresence(_0x925678){const _0x1450fa=a0_0x3c717c;try{const _0x3c911c=_0x925678[_0x1450fa(0x232)]['presenceDevices']||[];let _0x392a72=![];const _0x37cd4b=[];for(const _0x31faa4 of _0x3c911c){try{const _0x3e072e=await _0x925678[_0x1450fa(0x227)](_0x31faa4);_0x3e072e&&(_0x3e072e[_0x1450fa(0x18b)]===!![]||_0x3e072e[_0x1450fa(0x18b)]===_0x1450fa(0x1f2)||_0x3e072e['val']===0x1)&&(_0x392a72=!![],_0x37cd4b[_0x1450fa(0x185)](_0x31faa4));}catch(_0x3ccc3d){}}return await _0x925678[_0x1450fa(0x1a3)](_0x1450fa(0x25a),{'val':_0x37cd4b['join'](',\x20'),'ack':!![]}),_0x392a72&&(_0x925678['exitTimer']&&(_0x925678[_0x1450fa(0x247)][_0x1450fa(0x1cd)]('WiFi\x20Presence\x20detected.'),abortExitTimer(_0x925678)),!_0x925678['isPresent']&&_0x925678['currentSystemMode']===SYSTEM_MODES[_0x1450fa(0x112)]&&await setPresence(_0x925678,!![])),_0x392a72;}catch(_0xea3dab){return![];}}function startExitTimer(_0x4672fe){const _0x242e0c=a0_0x3c717c;abortExitTimer(_0x4672fe),_0x4672fe[_0x242e0c(0x272)]=!![],_0x4672fe[_0x242e0c(0x21d)]=setTimeout(()=>{const _0x10ce06=_0x242e0c;_0x4672fe[_0x10ce06(0x272)]=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),_0x4672fe[_0x242e0c(0x156)]=setTimeout(()=>{const _0x433e9d=_0x242e0c;setPresence(_0x4672fe,![]),_0x4672fe[_0x433e9d(0x156)]=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}function a0_0x37ee(){const _0x4ca4b4=['presenceDevices','unshift','isProVersion','lastAlertState','PRIORITÃ„T:\x20Sicherheit.','cancel','./lib/scheduler','startsWith','ðŸ•¸ï¸\x20Topology\x20Map\x20updated.','getOverviewData','Heating\x20Score','generateContent','Trigger\x20Action','[LOG]','value','Deaktiviert\x20(Pro-Feature)','occupancy','motion','LTM.processingStatus','indicator.alarm','Err:\x20','GAIT_RESULT','data','.\x20KONTEXT:\x20','openweathermap','eventHistory','switch','Kalender\x20deaktiviert.','1528072MIKjNz','Missing\x20data','exitTimer','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','setHours','.\x20ANWESEND:\x20','threshold','status','analysis.health.gaitSpeed','exports','extendObjectAsync','Briefing\x20Error:\x20','13311972GdWLSX','Sequences','analysis.energy.forecast','Â°C,\x20',')\x20-\x20SAFE\x20BOOT','enum','state','system.config','analysisHistory','endsWith','analysis.health.lastCheck','Started...','constructor','loc','generic','genAI','Kein\x20API\x20Key!','getGenerativeModel','TRAINING_COMPLETE','Digest','service.py','daswetter','LTM.driftAnalysis.driftDetails','from','notifyTelegramInstance','Insulation\x20Score','number','Auto\x20Apply','temperature','Current\x20Threshold','analysisInterval','Trend\x20Value','OK:\x20','ðŸ§ª\x20Simulating\x20Butler\x20Proposal:\x20','ltmJob','reason','includes','push','search','\x20new\x20patterns.','channel','window','analysis.automation.triggerAction','val','diagnosis','analysis.automation.targetValue','write','alertReason','SIMULATION:\x20Test-Vorschlag\x20fÃ¼r\x20','ðŸ\x20Python\x20Pong','weatherInstance','ðŸ“\x20Feedback\x20received:\x20','.\x20SYSTEM_MODE:\x20','scanForDevices','Trend','latitude','AI\x20Training','events.history','trim','ðŸ§ \x20Triggering\x20Security\x20Training...','LTM.baselineStatus','toISOString','sensorLastValues','isAlert','2078452LDBPqU','getHours','analysis.trigger','setStateAsync','baselineDrift','Topology\x20Matrix','analysis.automation.description','analysis.training.triggerSecurity','201568ZTAFFt','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','fill','analysis.automation.patternDetected','Activity-Level','filter','light','ðŸ›¡ï¸\x20SECURITY\x20CHECK:\x20Score\x20','testContext','button','Last\x20raw\x20event','driftDetails','parse','Train\x20Energy','PREDICT_ENERGY','6MWQvAX','type','events.history_debug_00','353139VeFScx','isExit','system.isPresent','analysis.triggerBriefing','Thermodynamics','path','heating','aiPersona','party','analysis.security.lastCheck','writable','warn','TRAIN_HEALTH','ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','Topology\x20Error:\x20','ðŸ•¸ï¸\x20Building\x20Topology\x20Matrix...','targetValue','isEmergency','accuweather','info','LTM.driftAnalysis','Lernphase\x20(','toLocaleTimeString','prÃ¤senz','rating','Aktiv\x20(','getObjectAsync','analysis.health.isAnomaly','TREND_RESULT','payload','LTM.trainingData.thermodynamics','currentSystemMode','âš ï¸\x20SECURITY\x20ALARM:\x20','pop','TRAIN_SECURITY','longitude','analysis.training.triggerHealth','N/A','analysisTimer','rawEventLog','analysis.training.triggerTopology','callback','normal','guest','toFixed','toString','.Current.WeatherText','4500293iwNONv','analysis.automation.autoApply','simulateButler','ltmStbWindowDays','systemConfig','Fokus\x20auf\x20Komfort.','licenseKey','join','name','online','getLtmData','text.alarm','âš ï¸\x20ALARM:\x20','heizung','analysis.alertReason','getForeignObjectsAsync','bewegung','description','activityLevel','getEnums','kill','json','\x20->\x20','isPresent','devices','stringify','Analysiere\x20ausgewogen.','\x20=\x20','useWeather','python3','enum.rooms.*','Detected\x20Patterns','floor','indicator','Alert\x20Status','Success:\x20','timestamp','@google/generative-ai','ack','substring','\x0aGrund:\x20','schalter','Alert\x20Reason','detected','vacation','licht','fenster','useCalendar','2WDpacP','PONG','analysis.security','automationProposal','exitGraceTimer','Gait\x20Speed\x20Trend','getTime','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','stdin','analysis.health','contact','now','Training\x20Error:\x20','geminiModel','getForeignStateAsync','kontakt','apply','4103MrGRMj','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','boolean','analysis.health.trendDiagnosis','Failed:\x20','pythonProcess','slice','analysis.training.triggerComfort','config','rule','BUTLER\x20Execution\x20Error:\x20','analysis.training.triggerEnergy','Trigger\x20Briefing','analysis.isAlert','[PYTHON]\x20','.Current.Temperature','split','ðŸ›‹ï¸\x20Triggering\x20Comfort\x20Analysis\x20(Pattern\x20Mining)...','analysis.energy.insulationScore','checkAndInstall','bind','splice','analysis.automation.targetId','Keine\x20Wetterdaten\x20verfÃ¼gbar.','calendarInstance','ready','(((.+)+)+)+$','Kein\x20API\x20Key.','namespace','log','.communicate.request','object','common','Restoring\x20sensor\x20cache...','analysis.security.currentThreshold','ANALYZE_SEQUENCE','analysis.automation.detectedPatterns','scanDevices','Wetterdaten\x20deaktiviert.','outdoorSensorId','analysis.energy.heatingScore','analysis.analysisHistory','lampe','setState','briefingJob','PARTY','map','triggerDailyDigest','system.presenceWho','LTM.driftAnalysis.lastCheck','ENERGY_TRAIN_RESULT','PRIORITÃ„T:\x20Gesundheit/AAL.','10Suaoqs','Last\x20Check','ANALYZE_HEALTH','Unknown','Activity\x20Summary','values','LTM.trainingData.sequences','.forecast.current.temperature','Raw\x20Log','logDuplicates','subscribeForeignStatesAsync','inactivityThresholdHours','toLowerCase','driftAnalysisTimer','geminiApiKey','presence','system.mode','analysis.training.status','SECURITY_RESULT','Anomaly\x20Detected','isGracePeriodActive','.forecast.current.temp','systemUUID','onMessage','testApiKey','Event\x20History','string','.\x20EVENTS:\x20','forEach','subscribeStates','setObjectNotExistsAsync','analysis.security.lastScore','apiKey','PYTHON_EXE','is_anomaly','summary','events.lastEvent','response','COMFORT_RESULT','Pattern\x20Detected','[RECORDER]\x20Error:\x20','length','@iobroker/adapter-core','dependencyInstallInProgress','ðŸ›‹ï¸\x20BUTLER:\x20Found\x20','Train\x20Health','Health\x20Analysis','onUnload','some','sendTo','shift','application/json','notifyTelegramEnabled','getMonth','Keine\x20Termine.','debug','location','.\x20EMERGENCY:\x20','onStateChange','Success','ltmLtbWindowDays','command','Gemini\x20Error:\x20','getStateAsync','version','text','triggerBriefing','VACATION','cogni-living\x20adapter\x20starting\x20(v','change_percent','ðŸš€\x20Starting\x20NUUKANNI\x20Logic\x20(v0.12.10)...','minDaysForBaseline','main','date','analysis.health.trendValue','LTM.rawEventLog','round','HEALTH_TRAIN_RESULT','ðŸŒ…\x20Morning\x20Briefing:\x0a','tÃ¼r','python_service','cogni-living','Fokus\x20auf\x20Familienroutinen.','getDate','dailyDigests','Gemini\x20Init\x20Error:\x20','NORMAL','User\x20dismissed\x20automation\x20proposal.','System','analysis.energy','keys','modeResetJob','message','models/gemini-flash-latest','Trigger\x20Analysis','Energy\x20Intelligence','system','TOPOLOGY_RESULT','close','stdout','analysis.activitySummary','Anomaly\x20Score','ENERGY_PREDICT_RESULT','instance','Error\x20launching\x20Python:\x20','setupModeResetScheduler','Skipped\x20(No\x20AI\x20or\x20Data)','automation.triggerAction','LTM.driftAnalysis.baselineDrift','dismissAutomation','weatherunderground','communicate.request','Target\x20ID','setupBriefingScheduler','No\x20instance','Security\x20Monitor','21480oZBAVa','replace','insulation','success','error','analysis.health.todayVector','TRAIN_COMFORT','ANALYZE_GAIT'];a0_0x37ee=function(){return _0x4ca4b4;};return a0_0x37ee();}function abortExitTimer(_0x39f887){const _0x46be7c=a0_0x3c717c;if(_0x39f887[_0x46be7c(0x156)])clearTimeout(_0x39f887['exitTimer']);if(_0x39f887['exitGraceTimer'])clearTimeout(_0x39f887['exitGraceTimer']);_0x39f887[_0x46be7c(0x156)]=null,_0x39f887[_0x46be7c(0x21d)]=null,_0x39f887[_0x46be7c(0x272)]=![];}async function setPresence(_0x5876a2,_0x1a8398){const _0xbd6fdf=a0_0x3c717c;if(_0x5876a2[_0xbd6fdf(0x200)]===_0x1a8398)return;_0x5876a2['isPresent']=_0x1a8398,await _0x5876a2['setStateAsync'](_0xbd6fdf(0x1bc),{'val':_0x1a8398,'ack':!![]});}async function executeAutomationAction(_0x578df3){const _0x181bc2=a0_0x3c717c;try{const _0x45aaa1=await _0x578df3[_0x181bc2(0xfb)](_0x181bc2(0x240)),_0x52e377=await _0x578df3[_0x181bc2(0xfb)](_0x181bc2(0x18d));if(_0x45aaa1&&_0x45aaa1[_0x181bc2(0x18b)]&&_0x52e377){const _0x1c812f=_0x45aaa1[_0x181bc2(0x18b)];let _0x11a27d=_0x52e377[_0x181bc2(0x18b)];try{_0x11a27d=JSON[_0x181bc2(0x1b4)](_0x11a27d);}catch(_0x44b9b7){}_0x578df3['log'][_0x181bc2(0x1cd)]('ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20'+_0x1c812f+_0x181bc2(0x204)+_0x11a27d),await _0x578df3['setForeignStateAsync'](_0x1c812f,_0x11a27d);}else _0x578df3[_0x181bc2(0x247)][_0x181bc2(0x1c5)](_0x181bc2(0x1c7));}catch(_0x5cc8bc){_0x578df3['log']['error'](_0x181bc2(0x234)+_0x5cc8bc[_0x181bc2(0x118)]);}}async function processSensorEvent(_0x30635e,_0x367b0c,_0x428d19,_0x13c200){const _0x3e2192=a0_0x3c717c;if(!_0x13c200)return;const _0x3e848b=_0x428d19[_0x3e2192(0x18b)],_0x4c7761=Date[_0x3e2192(0x224)](),_0x24b762=_0x30635e['sensorLastValues'][_0x367b0c];_0x30635e[_0x3e2192(0x19e)][_0x367b0c]=_0x3e848b;if(!_0x13c200[_0x3e2192(0x267)]&&_0x24b762!=undefined&&_0x24b762==_0x3e848b)return;const _0x31dbe6=(_0x13c200[_0x3e2192(0x1b8)]||'')['toLowerCase'](),_0x4b16a7=_0x31dbe6[_0x3e2192(0x184)](_0x3e2192(0x17c))||_0x31dbe6[_0x3e2192(0x184)]('temperatur')||_0x31dbe6[_0x3e2192(0x184)]('klima')||_0x31dbe6[_0x3e2192(0x184)](_0x3e2192(0x1f6));_0x30635e[_0x3e2192(0x13a)]&&_0x4b16a7&&recordThermodynamics(_0x30635e,_0x367b0c,_0x3e848b,_0x13c200[_0x3e2192(0xf4)]);const _0x3594f1={'timestamp':_0x4c7761,'id':_0x367b0c,'name':_0x13c200['name'],'type':_0x13c200[_0x3e2192(0x1b8)],'location':_0x13c200[_0x3e2192(0xf4)],'value':_0x3e848b};_0x30635e['eventHistory'][_0x3e2192(0x139)](_0x3594f1);if(_0x30635e[_0x3e2192(0x151)]['length']>HISTORY_MAX_SIZE)_0x30635e[_0x3e2192(0x151)]['pop']();await _0x30635e['setStateAsync'](_0x3e2192(0xe0),{'val':JSON['stringify'](_0x3594f1),'ack':!![]}),await _0x30635e[_0x3e2192(0x1a3)](_0x3e2192(0x199),{'val':JSON[_0x3e2192(0x202)](_0x30635e['eventHistory']),'ack':!![]});_0x30635e[_0x3e2192(0x13a)]&&(_0x30635e['rawEventLog'][_0x3e2192(0x185)](_0x3594f1),await saveRawEventLog(_0x30635e),recordSequence(_0x30635e,_0x3594f1));if(_0x13c200[_0x3e2192(0x1bb)]&&_0x3e848b===!![]){if(_0x30635e[_0x3e2192(0x200)]&&!_0x30635e[_0x3e2192(0x272)])startExitTimer(_0x30635e);else{if(!_0x30635e[_0x3e2192(0x200)])setPresence(_0x30635e,!![]);}}else{if(_0x13c200['type']===_0x3e2192(0x149)&&_0x3e848b===!![]){if(_0x30635e[_0x3e2192(0x156)])abortExitTimer(_0x30635e);if(!_0x30635e[_0x3e2192(0x200)]&&_0x30635e[_0x3e2192(0x1d9)]===SYSTEM_MODES[_0x3e2192(0x112)])setPresence(_0x30635e,!![]);}}}async function recordThermodynamics(_0x4f73d5,_0x4a398c,_0x3c768b,_0x12c577){const _0x80a3a1=a0_0x3c717c,_0x12d13b=await getOutsideTemperatureNumeric(_0x4f73d5),_0xe7fac=await _0x4f73d5[_0x80a3a1(0xfb)](_0x80a3a1(0x1d8));let _0x223be8=[];if(_0xe7fac&&_0xe7fac[_0x80a3a1(0x18b)])try{_0x223be8=JSON['parse'](_0xe7fac[_0x80a3a1(0x18b)]);}catch(_0x3d4c9b){}_0x223be8[_0x80a3a1(0x185)]({'ts':Date[_0x80a3a1(0x224)](),'room':_0x12c577||_0x80a3a1(0x261),'t_in':_0x3c768b,'t_out':_0x12d13b});if(_0x223be8[_0x80a3a1(0xe5)]>THERMO_LOG_SIZE)_0x223be8[_0x80a3a1(0xee)]();await _0x4f73d5['setStateAsync'](_0x80a3a1(0x1d8),{'val':JSON[_0x80a3a1(0x202)](_0x223be8),'ack':!![]});}async function getOutsideTemperatureNumeric(_0x2b799c){const _0x4cb3ac=a0_0x3c717c;if(_0x2b799c[_0x4cb3ac(0x232)][_0x4cb3ac(0x251)])try{const _0x195a7d=await _0x2b799c[_0x4cb3ac(0x227)](_0x2b799c[_0x4cb3ac(0x232)][_0x4cb3ac(0x251)]);if(_0x195a7d&&_0x195a7d['val']!==undefined&&_0x195a7d[_0x4cb3ac(0x18b)]!==null)return parseFloat(_0x195a7d['val']);}catch(_0x5b1051){}const _0x1391d1=_0x2b799c[_0x4cb3ac(0x232)][_0x4cb3ac(0x192)];if(!_0x2b799c[_0x4cb3ac(0x232)][_0x4cb3ac(0x205)]||!_0x1391d1)return null;try{let _0x227aa6='';if(_0x1391d1[_0x4cb3ac(0x184)](_0x4cb3ac(0x1cc)))_0x227aa6=_0x1391d1+_0x4cb3ac(0x239);else{if(_0x1391d1[_0x4cb3ac(0x184)](_0x4cb3ac(0x175)))_0x227aa6=_0x1391d1+'.NextHours.Location_1.Day_1.current.temp_value';else{if(_0x1391d1[_0x4cb3ac(0x184)](_0x4cb3ac(0x150)))_0x227aa6=_0x1391d1+_0x4cb3ac(0x265);else{if(_0x1391d1[_0x4cb3ac(0x184)](_0x4cb3ac(0x12a)))_0x227aa6=_0x1391d1+_0x4cb3ac(0x273);}}}if(_0x227aa6){const _0x4014c5=await _0x2b799c[_0x4cb3ac(0x227)](_0x227aa6);if(_0x4014c5&&_0x4014c5['val']!==undefined&&_0x4014c5['val']!==null)return parseFloat(_0x4014c5['val']);}}catch(_0x36a8fd){}return null;}async function recordSequence(_0x1f8448,_0x5c52a4){const _0x4d7586=a0_0x3c717c,_0x33cd83=(_0x5c52a4[_0x4d7586(0x1b8)]||'')[_0x4d7586(0x26a)](),_0x21c56d=[_0x4d7586(0x149),_0x4d7586(0x1f9),_0x4d7586(0x1d1),_0x4d7586(0x26d),_0x4d7586(0x148),'door',_0x4d7586(0x10b),_0x4d7586(0x189),_0x4d7586(0x217),_0x4d7586(0x223),_0x4d7586(0x228),_0x4d7586(0x1ae),_0x4d7586(0x216),_0x4d7586(0x152),_0x4d7586(0x212),'dimmer',_0x4d7586(0x254)];if(!_0x21c56d[_0x4d7586(0xec)](_0x5e0e2e=>_0x33cd83[_0x4d7586(0x184)](_0x5e0e2e)))return;if(!_0x5c52a4[_0x4d7586(0x146)])return;if(sequenceTimer)clearTimeout(sequenceTimer);activeSequence[_0x4d7586(0x185)]({'loc':_0x5c52a4[_0x4d7586(0xf4)]||'Unknown','id':_0x5c52a4['id'],'ts':Date[_0x4d7586(0x224)]()}),sequenceTimer=setTimeout(async()=>{if(activeSequence['length']>0x1)await saveCompletedSequence(_0x1f8448);activeSequence=[];},SEQUENCE_TIMEOUT_MS);}async function saveCompletedSequence(_0x2969f2){const _0x5ef444=a0_0x3c717c;try{const _0x2e49eb=await _0x2969f2[_0x5ef444(0xfb)](_0x5ef444(0x264));let _0x41b258=[];if(_0x2e49eb&&_0x2e49eb[_0x5ef444(0x18b)])try{_0x41b258=JSON[_0x5ef444(0x1b4)](_0x2e49eb[_0x5ef444(0x18b)]);}catch(_0x2fc8d0){}const _0x3d9ffa=activeSequence[0x0]['ts'],_0x393ec0=activeSequence[_0x5ef444(0x258)](_0x18ff59=>({'loc':_0x18ff59[_0x5ef444(0x16d)],'t_delta':Math[_0x5ef444(0x108)]((_0x18ff59['ts']-_0x3d9ffa)/0x3e8)})),_0x14c0bd={'timestamp':new Date(_0x3d9ffa)[_0x5ef444(0x19d)](),'steps':_0x393ec0,'duration':Math[_0x5ef444(0x108)]((activeSequence[activeSequence[_0x5ef444(0xe5)]-0x1]['ts']-_0x3d9ffa)/0x3e8),'daytime':new Date(_0x3d9ffa)[_0x5ef444(0x1a1)]()};_0x41b258['push'](_0x14c0bd);if(_0x41b258[_0x5ef444(0xe5)]>MAX_TRAINING_SET_SIZE)_0x41b258[_0x5ef444(0xee)]();await _0x2969f2[_0x5ef444(0x1a3)](_0x5ef444(0x264),{'val':JSON[_0x5ef444(0x202)](_0x41b258),'ack':!![]}),runSecurityCheck(_0x2969f2,_0x14c0bd);}catch(_0x4d58f4){_0x2969f2[_0x5ef444(0x247)]['error'](_0x5ef444(0xe4)+_0x4d58f4['message']);}}function runSecurityCheck(_0xd7252a,_0x1ec266){const _0x351eb7=a0_0x3c717c;if(!_0xd7252a['isProVersion'])return;sendToPython(_0xd7252a,_0x351eb7(0x24d),{'sequence':_0x1ec266});}async function createDailyDigest(_0x2cfa97){const _0x537192=a0_0x3c717c;if(!_0x2cfa97[_0x537192(0x13a)])return;await _0x2cfa97[_0x537192(0x1a3)](LTM_DP_STATUS,{'val':_0x537192(0x16b),'ack':!![]});if(!_0x2cfa97['geminiModel']||_0x2cfa97[_0x537192(0x1e1)][_0x537192(0xe5)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x2cfa97[_0x537192(0x1a3)](LTM_DP_STATUS,{'val':_0x537192(0x126),'ack':!![]});return;}const _0x1cb8b4=JSON[_0x537192(0x1b4)](JSON[_0x537192(0x202)](_0x2cfa97[_0x537192(0x1e1)])),_0x14690f=_0x1cb8b4['length'],_0x31607d=_0x537192(0x1a9)+JSON[_0x537192(0x202)](_0x1cb8b4);try{const _0x324b34=await _0x2cfa97[_0x537192(0x226)][_0x537192(0x143)](_0x31607d),_0x179abf=JSON[_0x537192(0x1b4)](_0x324b34[_0x537192(0xe1)][_0x537192(0xfd)]()[_0x537192(0x131)](/```json|```/g,'')[_0x537192(0x19a)]()),_0x130021={'timestamp':new Date()['toISOString'](),'eventCount':_0x14690f,'summary':_0x179abf[_0x537192(0xdf)]||_0x537192(0x173),'activityLevel':_0x179abf[_0x537192(0x1fb)]||'normal','systemMode':_0x2cfa97[_0x537192(0x1d9)]};_0x2cfa97[_0x537192(0x110)][_0x537192(0x185)](_0x130021),await saveDailyDigests(_0x2cfa97),_0x2cfa97['rawEventLog']=[],await saveRawEventLog(_0x2cfa97),await _0x2cfa97[_0x537192(0x1a3)](LTM_DP_STATUS,{'val':_0x537192(0xf7),'ack':!![]});if(_0x2cfa97['isProVersion'])sendToPython(_0x2cfa97,_0x537192(0x260),{'digest':_0x130021});}catch(_0x3bd6ad){_0x2cfa97[_0x537192(0x247)]['error'](_0x3bd6ad[_0x537192(0x118)]);}}function a0_0x4b68(_0x17d6bb,_0x343839){const _0x1cf095=a0_0x37ee();return a0_0x4b68=function(_0x3baaff,_0x3f9100){_0x3baaff=_0x3baaff-0xd9;let _0x37eea4=_0x1cf095[_0x3baaff];return _0x37eea4;},a0_0x4b68(_0x17d6bb,_0x343839);}async function runBaselineDriftAnalysis(_0x1c1301){const _0x531bd=a0_0x3c717c;if(!_0x1c1301[_0x531bd(0x13a)]||!_0x1c1301[_0x531bd(0x226)])return;const _0x166855=_0x1c1301[_0x531bd(0x232)]['ltmStbWindowDays']||0xe;if(_0x1c1301[_0x531bd(0x110)][_0x531bd(0xe5)]<_0x166855+0x7){await _0x1c1301['setStateAsync'](LTM_DP_DRIFT_STATUS,{'val':'N/A\x20(Learning)','ack':!![]});return;}const _0x2bb9bd=_0x1c1301[_0x531bd(0x110)][_0x531bd(0x230)](-_0x166855),_0xb70ff=_0x1c1301[_0x531bd(0x110)][_0x531bd(0x230)](0x0,_0x1c1301[_0x531bd(0x110)][_0x531bd(0xe5)]-_0x166855),_0xef1f00='ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20'+JSON[_0x531bd(0x202)](_0xb70ff)+'\x0aSTB:\x20'+JSON[_0x531bd(0x202)](_0x2bb9bd);try{const _0x505f9c=await _0x1c1301[_0x531bd(0x226)][_0x531bd(0x143)](_0xef1f00),_0x439650=JSON['parse'](_0x505f9c['response'][_0x531bd(0xfd)]()[_0x531bd(0x131)](/```json|```/g,'')['trim']());_0x439650[_0x531bd(0x1a4)]&&(await _0x1c1301['setStateAsync'](LTM_DP_DRIFT_STATUS,{'val':_0x439650[_0x531bd(0x1a4)],'ack':!![]}),await _0x1c1301[_0x531bd(0x1a3)](LTM_DP_DRIFT_DETAILS,{'val':_0x439650[_0x531bd(0x1b3)],'ack':!![]}),await _0x1c1301[_0x531bd(0x1a3)](LTM_DP_DRIFT_LAST_CHECK,{'val':Date[_0x531bd(0x224)](),'ack':!![]}));}catch(_0x10bb16){}}async function sendMorningBriefing(_0x5a25dd){const _0x4a319a=a0_0x3c717c;if(!_0x5a25dd[_0x4a319a(0x226)])return;try{const _0x28b37f=_0x4a319a(0x157),_0x348231=await _0x5a25dd['geminiModel'][_0x4a319a(0x143)](_0x28b37f),_0x2d7259=_0x348231[_0x4a319a(0xe1)][_0x4a319a(0xfd)]();sendNotification(_0x5a25dd,_0x4a319a(0x10a)+_0x2d7259);}catch(_0x4d1859){_0x5a25dd[_0x4a319a(0x247)]['error'](_0x4a319a(0x15f)+_0x4d1859['message']);}}function stopPythonService(_0x329ac9){const _0x50d6e1=a0_0x3c717c;if(_0x329ac9[_0x50d6e1(0x22f)]){try{_0x329ac9['pythonProcess'][_0x50d6e1(0x1fd)]();}catch(_0x58ffe1){}_0x329ac9[_0x50d6e1(0x22f)]=null;}}function sendToPython(_0x2ce5fa,_0xa05bef,_0xe0b543={}){const _0xdcd6fa=a0_0x3c717c;if(!_0x2ce5fa[_0xdcd6fa(0x22f)]||!_0x2ce5fa['pythonProcess'][_0xdcd6fa(0x221)][_0xdcd6fa(0x1c4)])return;const _0x2a3ddb=JSON[_0xdcd6fa(0x202)]({'command':_0xa05bef,..._0xe0b543});try{_0x2ce5fa[_0xdcd6fa(0x22f)][_0xdcd6fa(0x221)][_0xdcd6fa(0x18e)](_0x2a3ddb+'\x0a');}catch(_0x2aa38c){}}function runPythonHealthCheck(_0xdca169){const _0x53f033=a0_0x3c717c;if(!_0xdca169['dailyDigests']||_0xdca169['dailyDigests'][_0x53f033(0xe5)]<0x2)return;const _0x43d16c=_0xdca169['dailyDigests'][_0x53f033(0x258)](_0x4be59c=>{const _0x26e09b=_0x53f033,_0x470e25=(_0x4be59c[_0x26e09b(0x1fb)]||'')[_0x26e09b(0x26a)]();return ACTIVITY_LEVEL_MAP[_0x470e25]||0x32;});sendToPython(_0xdca169,'ANALYZE_TREND',{'values':_0x43d16c,'tag':_0x53f033(0x1ac)});}function handlePythonResult(_0x262b68,_0x543f56){const _0x2d85be=a0_0x3c717c;if(_0x543f56[_0x2d85be(0x1b8)]===_0x2d85be(0x21a))_0x262b68['log'][_0x2d85be(0xf3)](_0x2d85be(0x191));else{if(_0x543f56['type']===_0x2d85be(0x270)){const {anomaly_score:_0x41d85c,is_anomaly:_0x3f9d2c,threshold:_0x3acd7c,explanation:_0x2d65f7}=_0x543f56[_0x2d85be(0x1d7)];_0x262b68['log'][_0x2d85be(0x1cd)](_0x2d85be(0x1af)+_0x41d85c[_0x2d85be(0x1e6)](0x5)+_0x2d85be(0x1ff)+(_0x3f9d2c?'ANOMALY':'OK')),_0x262b68[_0x2d85be(0x1a3)](_0x2d85be(0xdb),{'val':_0x41d85c,'ack':!![]}),_0x262b68['setStateAsync'](_0x2d85be(0x1c3),{'val':new Date()[_0x2d85be(0x19d)](),'ack':!![]});if(_0x3acd7c)_0x262b68[_0x2d85be(0x1a3)]('analysis.security.currentThreshold',{'val':_0x3acd7c,'ack':!![]});if(_0x3f9d2c){let _0x13e0ac=_0x2d85be(0x220)+_0x41d85c[_0x2d85be(0x1e6)](0x4)+')';if(_0x2d65f7&&_0x2d65f7!=='Unknown')_0x13e0ac+=_0x2d85be(0x211)+_0x2d65f7;_0x262b68[_0x2d85be(0x1a3)](_0x2d85be(0x237),{'val':!![],'ack':!![]}),_0x262b68[_0x2d85be(0x1a3)](_0x2d85be(0x1f7),{'val':_0x13e0ac,'ack':!![]}),sendNotification(_0x262b68,_0x2d85be(0x1da)+_0x13e0ac,![],!![]);}}else{if(_0x543f56[_0x2d85be(0x1b8)]===_0x2d85be(0x172)){const _0x443661=_0x543f56[_0x2d85be(0x1d7)]['details']||'',_0x12006b=_0x543f56['payload'][_0x2d85be(0x15a)],_0x378084=_0x543f56[_0x2d85be(0x1d7)][_0x2d85be(0x133)]?_0x2d85be(0x20c)+new Date()[_0x2d85be(0x1d0)]()+'\x20('+_0x443661+')':_0x2d85be(0x22e)+_0x543f56['payload'][_0x2d85be(0x183)];_0x262b68['setStateAsync']('analysis.training.status',{'val':_0x378084,'ack':!![]});if(_0x543f56[_0x2d85be(0x1d7)][_0x2d85be(0x133)]&&_0x12006b)_0x262b68[_0x2d85be(0x1a3)](_0x2d85be(0x24c),{'val':_0x12006b,'ack':!![]});}else{if(_0x543f56[_0x2d85be(0x1b8)]===_0x2d85be(0xe2)){const {patterns:_0x252108}=_0x543f56[_0x2d85be(0x1d7)];if(_0x252108&&_0x252108[_0x2d85be(0xe5)]>0x0){_0x262b68[_0x2d85be(0x247)][_0x2d85be(0x1cd)](_0x2d85be(0xe8)+_0x252108['length']+_0x2d85be(0x187)),_0x262b68[_0x2d85be(0x1a3)]('analysis.automation.detectedPatterns',{'val':JSON['stringify'](_0x252108),'ack':!![]});const _0x10e2b7=_0x252108[0x0],_0x175394='Regel\x20erkannt:\x20'+_0x10e2b7[_0x2d85be(0x233)]+'\x20('+(_0x10e2b7['confidence']*0x64)[_0x2d85be(0x1e6)](0x0)+'%)';_0x262b68[_0x2d85be(0x1a3)](_0x2d85be(0x1ab),{'val':!![],'ack':!![]}),_0x262b68['setStateAsync']('analysis.automation.description',{'val':_0x175394,'ack':!![]});}else _0x262b68['log'][_0x2d85be(0x1cd)]('ðŸ›‹ï¸\x20BUTLER:\x20Keine\x20neuen\x20Muster\x20gefunden.'),_0x262b68[_0x2d85be(0x1a3)](_0x2d85be(0x1ab),{'val':![],'ack':!![]}),_0x262b68[_0x2d85be(0x1a3)](_0x2d85be(0x24e),{'val':'[]','ack':!![]});}else{if(_0x543f56[_0x2d85be(0x1b8)]===_0x2d85be(0x25c)){if(_0x543f56[_0x2d85be(0x1d7)]['success'])try{const _0x570309=JSON['parse'](_0x543f56[_0x2d85be(0x1d7)]['details']);if(_0x570309['insulation'])_0x262b68['setStateAsync'](_0x2d85be(0x23c),{'val':JSON[_0x2d85be(0x202)](_0x570309[_0x2d85be(0x132)]),'ack':!![]});if(_0x570309['heating'])_0x262b68[_0x2d85be(0x1a3)](_0x2d85be(0x252),{'val':JSON[_0x2d85be(0x202)](_0x570309[_0x2d85be(0x1c0)]),'ack':!![]});}catch(_0x453f53){}}else{if(_0x543f56[_0x2d85be(0x1b8)]===_0x2d85be(0x109)){if(_0x543f56['payload'][_0x2d85be(0x133)])_0x262b68[_0x2d85be(0x247)][_0x2d85be(0x1cd)]('âœ…\x20HEALTH\x20TRAINED.');}else{if(_0x543f56[_0x2d85be(0x1b8)]==='HEALTH_RESULT')_0x262b68[_0x2d85be(0x1a3)](_0x2d85be(0x16a),{'val':new Date()[_0x2d85be(0x19d)](),'ack':!![]}),_0x262b68[_0x2d85be(0x1a3)](_0x2d85be(0x1d5),{'val':_0x543f56['payload'][_0x2d85be(0xde)],'ack':!![]});else{if(_0x543f56[_0x2d85be(0x1b8)]===_0x2d85be(0x1d6))_0x262b68[_0x2d85be(0x1a3)]('analysis.health.trendDiagnosis',{'val':_0x543f56['payload'][_0x2d85be(0x18c)],'ack':!![]}),_0x262b68['setStateAsync'](_0x2d85be(0x106),{'val':_0x543f56[_0x2d85be(0x1d7)][_0x2d85be(0x101)],'ack':!![]});else{if(_0x543f56[_0x2d85be(0x1b8)]===_0x2d85be(0x14d)){const {speed_trend:_0x2b3928}=_0x543f56[_0x2d85be(0x1d7)];if(_0x2b3928!==undefined)_0x262b68[_0x2d85be(0x1a3)](_0x2d85be(0x15c),{'val':_0x2b3928,'ack':!![]});}else{if(_0x543f56['type']===_0x2d85be(0x122)){const {forecast:_0x2a904a}=_0x543f56['payload'];if(_0x2a904a)_0x262b68[_0x2d85be(0x1a3)]('analysis.energy.forecast',{'val':JSON['stringify'](_0x2a904a),'ack':!![]});}else{if(_0x543f56[_0x2d85be(0x1b8)]===_0x2d85be(0x11d)){const {data:_0x28aa7f}=_0x543f56[_0x2d85be(0x1d7)];_0x28aa7f&&(_0x262b68[_0x2d85be(0x247)][_0x2d85be(0x1cd)](_0x2d85be(0x140)),_0x262b68[_0x2d85be(0x1a3)]('analysis.security.topologyMatrix',{'val':JSON['stringify'](_0x28aa7f),'ack':!![]}));}}}}}}}}}}}}function startPythonService(_0x1530c5){const _0x2b7686=a0_0x3c717c;let _0x27e6d7=_0x2b7686(0x206);if(fs['existsSync'](installer[_0x2b7686(0xdd)]))_0x27e6d7=installer[_0x2b7686(0xdd)];try{const _0x18d67e=path[_0x2b7686(0x1f0)](__dirname,_0x2b7686(0x10c),_0x2b7686(0x174));_0x1530c5[_0x2b7686(0x22f)]=spawn(_0x27e6d7,[_0x18d67e]),_0x1530c5[_0x2b7686(0x22f)][_0x2b7686(0x11f)]['on'](_0x2b7686(0x14e),_0x40b25c=>{const _0x3cc675=_0x2b7686,_0x14e50f=_0x40b25c[_0x3cc675(0x1e7)]()[_0x3cc675(0x23a)]('\x0a');_0x14e50f['forEach'](_0x310012=>{const _0x56412d=_0x3cc675,_0x337cbc=_0x310012[_0x56412d(0x19a)]();if(!_0x337cbc)return;if(_0x337cbc['startsWith'](_0x56412d(0x145)))_0x1530c5[_0x56412d(0x247)][_0x56412d(0xf3)](_0x56412d(0x238)+_0x337cbc[_0x56412d(0x210)](0x5)[_0x56412d(0x19a)]());else{if(_0x337cbc[_0x56412d(0x13f)]('[RESULT]'))try{const _0x54b1d5=JSON[_0x56412d(0x1b4)](_0x337cbc['substring'](0x8)[_0x56412d(0x19a)]());handlePythonResult(_0x1530c5,_0x54b1d5);}catch(_0x57a922){}}});}),_0x1530c5[_0x2b7686(0x22f)]['on'](_0x2b7686(0x11e),_0xdfd8eb=>{const _0x22a1b3=_0x2b7686;_0x1530c5[_0x22a1b3(0x22f)]=null;});}catch(_0x4398b1){_0x1530c5[_0x2b7686(0x247)][_0x2b7686(0x134)](_0x2b7686(0x124)+_0x4398b1[_0x2b7686(0x118)]);}}async function runAutopilot(_0x390438){const _0x50b335=a0_0x3c717c;_0x390438['log'][_0x50b335(0xf3)]('ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...'),await runGeminiAnalysis(_0x390438),updateHealthVector(_0x390438),triggerGaitAnalysis(_0x390438),triggerEnergyPrediction(_0x390438);}async function triggerGaitAnalysis(_0x2f7b8d){const _0x51eb5f=a0_0x3c717c;if(!_0x2f7b8d['isProVersion'])return;try{const _0x36b03e=await _0x2f7b8d[_0x51eb5f(0xfb)](_0x51eb5f(0x264));_0x36b03e&&_0x36b03e[_0x51eb5f(0x18b)]&&sendToPython(_0x2f7b8d,_0x51eb5f(0x137),{'sequences':JSON[_0x51eb5f(0x1b4)](_0x36b03e[_0x51eb5f(0x18b)])});}catch(_0x31e334){}}async function triggerEnergyPrediction(_0x1a6f97){const _0x3d4337=a0_0x3c717c;if(!_0x1a6f97['isProVersion'])return;try{const _0x425876=await getOutsideTemperatureNumeric(_0x1a6f97);if(_0x425876===null)return;const _0x1f2e44={},_0x3c0686=_0x1a6f97['config'][_0x3d4337(0x201)]||[];for(const _0x3b2b5c of _0x3c0686){if(_0x3b2b5c['type']===_0x3d4337(0x17c)&&_0x3b2b5c[_0x3d4337(0xf4)]){const _0x53131a=_0x1a6f97['sensorLastValues'][_0x3b2b5c['id']];if(_0x53131a!==undefined)_0x1f2e44[_0x3b2b5c['location']]=_0x53131a;}}Object[_0x3d4337(0x116)](_0x1f2e44)[_0x3d4337(0xe5)]>0x0&&sendToPython(_0x1a6f97,_0x3d4337(0x1b6),{'current_temps':_0x1f2e44,'t_out':_0x425876});}catch(_0x27dab9){}}function updateHealthVector(_0x4bdcfb){const _0x2d3e84=a0_0x3c717c;if(!_0x4bdcfb['rawEventLog']||_0x4bdcfb[_0x2d3e84(0x1e1)]['length']===0x0)return;const _0x5bf899=new Array(0x60)['fill'](0x0),_0x36766c=new Date()[_0x2d3e84(0x158)](0x0,0x0,0x0,0x0);_0x4bdcfb[_0x2d3e84(0x1e1)][_0x2d3e84(0x27a)](_0x4e021f=>{const _0x4a603a=_0x2d3e84,_0x42ec8b=new Date(_0x4e021f['timestamp']);if(_0x42ec8b[_0x4a603a(0x21f)]()>=_0x36766c){const _0x30f085=_0x42ec8b[_0x4a603a(0x1a1)](),_0x5ea124=_0x42ec8b['getMinutes'](),_0x283067=_0x30f085*0x4+Math[_0x4a603a(0x209)](_0x5ea124/0xf);if(_0x283067>=0x0&&_0x283067<0x60)_0x5bf899[_0x283067]++;}}),_0x4bdcfb['setStateAsync']('analysis.health.todayVector',{'val':JSON['stringify'](_0x5bf899),'ack':!![]});}async function getWeatherContext(_0x13751c){const _0x112f60=a0_0x3c717c;if(!_0x13751c[_0x112f60(0x232)][_0x112f60(0x205)]||!_0x13751c['config'][_0x112f60(0x192)])return _0x112f60(0x250);try{const _0x338d06=_0x13751c[_0x112f60(0x232)][_0x112f60(0x192)];let _0x444259=await _0x13751c['getForeignStateAsync'](_0x338d06+_0x112f60(0x239));if(!_0x444259)_0x444259=await _0x13751c[_0x112f60(0x227)](_0x338d06+_0x112f60(0x265));let _0x17d75a=await _0x13751c[_0x112f60(0x227)](_0x338d06+_0x112f60(0x1e8));if(!_0x17d75a)_0x17d75a=await _0x13751c[_0x112f60(0x227)](_0x338d06+'.forecast.current.state');if(_0x444259&&_0x17d75a)return _0x444259['val']+_0x112f60(0x163)+_0x17d75a[_0x112f60(0x18b)];}catch(_0x17a142){}return _0x112f60(0x241);}async function getCalendarContext(_0x5a2e16){const _0x25bff2=a0_0x3c717c;if(!_0x5a2e16[_0x25bff2(0x232)][_0x25bff2(0x218)]||!_0x5a2e16[_0x25bff2(0x232)][_0x25bff2(0x242)])return _0x25bff2(0x153);return _0x25bff2(0xf2);}async function getCalendarNames(_0x6ea386,_0x49ca10){return[];}async function saveFeedback(_0x299ea6,_0x5ebd80){const _0x5000fe=a0_0x3c717c;_0x299ea6[_0x5000fe(0x247)][_0x5000fe(0x1cd)](_0x5000fe(0x193)+_0x5ebd80[_0x5000fe(0x1d2)]);}async function runGeminiAnalysis(_0x120d2a,_0x591ec7=''){const _0x56ed80=a0_0x3c717c;if(!_0x120d2a['geminiModel'])return;if(_0x120d2a['eventHistory']['length']===0x0)return;const _0x92e837=_0x120d2a['eventHistory'][_0x56ed80(0x230)](0x0,0xf),_0x4d180a=await getWeatherContext(_0x120d2a),_0x557cea=_0x120d2a[_0x56ed80(0x1d9)],_0x48ac80=PERSONA_MAPPING[_0x120d2a[_0x56ed80(0x232)][_0x56ed80(0x1c1)]||_0x56ed80(0x16e)],_0x5c74ec=_0x120d2a[_0x56ed80(0x232)]['livingContext']||'Keine\x20Details.';let _0x45b257='Unbekannt';try{const _0x502056=await _0x120d2a[_0x56ed80(0xfb)](_0x56ed80(0x25a));if(_0x502056&&_0x502056['val'])_0x45b257=_0x502056[_0x56ed80(0x18b)];}catch(_0x53f88b){}let _0x26d3a8=![];try{const _0x5aa13d=await _0x120d2a[_0x56ed80(0xfb)]('analysis.automation.autoApply');if(_0x5aa13d&&_0x5aa13d[_0x56ed80(0x18b)])_0x26d3a8=!![];}catch(_0xc9655a){}const _0x3edf8a=_0x56ed80(0x22b)+_0x48ac80+_0x56ed80(0x14f)+_0x5c74ec+_0x56ed80(0x194)+_0x557cea+'.\x20WETTER:\x20'+_0x4d180a+_0x56ed80(0x159)+_0x45b257+_0x56ed80(0x279)+JSON['stringify'](_0x92e837)+_0x56ed80(0xf5)+_0x591ec7+'.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}';try{const _0x4caea4=await _0x120d2a['geminiModel'][_0x56ed80(0x143)](_0x3edf8a),_0x3371e3=JSON['parse'](_0x4caea4['response'][_0x56ed80(0xfd)]()['replace'](/```json|```/g,'')['trim']());await _0x120d2a[_0x56ed80(0x1a3)]('analysis.lastResult',{'val':JSON[_0x56ed80(0x202)](_0x3371e3),'ack':!![]});if(_0x3371e3[_0x56ed80(0xdf)])await _0x120d2a[_0x56ed80(0x1a3)](_0x56ed80(0x120),{'val':_0x3371e3[_0x56ed80(0xdf)],'ack':!![]});const _0x6c3a5f={'timestamp':Date[_0x56ed80(0x224)](),'id':Date[_0x56ed80(0x224)]()[_0x56ed80(0x1e7)](),'analysis':{'activity':{'summary':_0x3371e3['summary'],'isAlert':_0x3371e3[_0x56ed80(0x19f)],'alertReason':_0x3371e3[_0x56ed80(0x18f)]},'comfort':{'automationProposal':_0x3371e3[_0x56ed80(0x21c)]}}};await updateAnalysisHistory(_0x120d2a,_0x6c3a5f);const _0x35665a=_0x3371e3[_0x56ed80(0x19f)]||![];_0x35665a!==_0x120d2a[_0x56ed80(0x13b)]&&(await _0x120d2a[_0x56ed80(0x1a3)](_0x56ed80(0x237),{'val':_0x35665a,'ack':!![]}),_0x120d2a[_0x56ed80(0x13b)]=_0x35665a,_0x35665a&&(await _0x120d2a['setStateAsync']('analysis.alertReason',{'val':_0x3371e3[_0x56ed80(0x18f)],'ack':!![]}),sendNotification(_0x120d2a,_0x56ed80(0x1f5)+_0x3371e3[_0x56ed80(0x18f)],![],_0x3371e3[_0x56ed80(0x1cb)])));if(_0x3371e3['automationProposal']&&_0x3371e3['automationProposal'][_0x56ed80(0x214)]){await _0x120d2a[_0x56ed80(0x1a3)](_0x56ed80(0x1ab),{'val':!![],'ack':!![]}),await _0x120d2a[_0x56ed80(0x1a3)](_0x56ed80(0x1a6),{'val':_0x3371e3[_0x56ed80(0x21c)][_0x56ed80(0x1fa)],'ack':!![]}),await _0x120d2a[_0x56ed80(0x1a3)](_0x56ed80(0x240),{'val':_0x3371e3[_0x56ed80(0x21c)]['targetId'],'ack':!![]}),await _0x120d2a[_0x56ed80(0x1a3)]('analysis.automation.targetValue',{'val':JSON[_0x56ed80(0x202)](_0x3371e3[_0x56ed80(0x21c)][_0x56ed80(0x1ca)]),'ack':!![]});if(_0x26d3a8)executeAutomationAction(_0x120d2a);}}catch(_0x21e73c){_0x120d2a[_0x56ed80(0x247)]['error'](_0x56ed80(0xfa)+_0x21e73c[_0x56ed80(0x118)]);}}async function startSystem(_0xecdb58){const _0x3700d1=a0_0x3c717c;_0xecdb58['log'][_0x3700d1(0x1cd)](_0x3700d1(0x102)),await initZombies(_0xecdb58);try{_0xecdb58[_0x3700d1(0x13a)]=await checkLicense(_0xecdb58[_0x3700d1(0x232)][_0x3700d1(0x1ef)]);}catch(_0x289e4d){}if(!_0xecdb58[_0x3700d1(0x232)][_0x3700d1(0x269)]||_0xecdb58[_0x3700d1(0x232)][_0x3700d1(0x269)]<0.1)_0xecdb58[_0x3700d1(0x232)][_0x3700d1(0x269)]=0xc;await initHistory(_0xecdb58),await initSystemConfig(_0xecdb58);if(_0xecdb58[_0x3700d1(0x232)][_0x3700d1(0x26c)])try{_0xecdb58[_0x3700d1(0x16f)]=new GoogleGenerativeAI(_0xecdb58['config'][_0x3700d1(0x26c)]),_0xecdb58['geminiModel']=_0xecdb58[_0x3700d1(0x16f)][_0x3700d1(0x171)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x3700d1(0xef)}}),_0xecdb58[_0x3700d1(0x247)]['info']('Gemini\x20AI\x20initialized.');}catch(_0x325c7f){_0xecdb58[_0x3700d1(0x247)][_0x3700d1(0x134)](_0x3700d1(0x111)+_0x325c7f[_0x3700d1(0x118)]);}await createAllObjects(_0xecdb58),await loadSystemMode(_0xecdb58),await loadRawEventLog(_0xecdb58),await loadDailyDigests(_0xecdb58),_0xecdb58[_0x3700d1(0xd9)](_0x3700d1(0x1a2)),_0xecdb58[_0x3700d1(0xd9)](LTM_DP_TRIGGER_DIGEST),_0xecdb58[_0x3700d1(0xd9)](_0x3700d1(0x26e)),_0xecdb58[_0x3700d1(0xd9)](_0x3700d1(0x1bd)),_0xecdb58[_0x3700d1(0xd9)](_0x3700d1(0x18a)),_0xecdb58[_0x3700d1(0xd9)](_0x3700d1(0x1ea)),_0xecdb58['subscribeStates'](_0x3700d1(0x1a7)),_0xecdb58[_0x3700d1(0xd9)](_0x3700d1(0x1de)),_0xecdb58['subscribeStates'](_0x3700d1(0x235)),_0xecdb58['subscribeStates'](_0x3700d1(0x231)),_0xecdb58[_0x3700d1(0xd9)](_0x3700d1(0x1e2)),await initSensorSubscriptions(_0xecdb58),await initPresenceSubscriptions(_0xecdb58),await setupTelegramListener(_0xecdb58),setTimeout(()=>checkWifiPresence(_0xecdb58),0x1388);if(_0xecdb58[_0x3700d1(0x1e0)])clearInterval(_0xecdb58[_0x3700d1(0x1e0)]);const _0x375257=_0xecdb58['config'][_0x3700d1(0x17e)]||0xf;_0x375257>0x0&&(_0xecdb58['analysisTimer']=setInterval(()=>{runAutopilot(_0xecdb58);},_0x375257*0x3c*0x3e8)),schedulers['setupLtmScheduler'](_0xecdb58,()=>createDailyDigest(_0xecdb58)),schedulers[_0x3700d1(0x125)](_0xecdb58),schedulers['setupDriftAnalysisScheduler'](_0xecdb58,()=>runBaselineDriftAnalysis(_0xecdb58)),schedulers[_0x3700d1(0x12d)](_0xecdb58,()=>sendMorningBriefing(_0xecdb58)),startPythonService(_0xecdb58),setTimeout(()=>{const _0x348ce8=_0x3700d1;_0xecdb58[_0x348ce8(0x22f)]&&(runPythonHealthCheck(_0xecdb58),triggerGaitAnalysis(_0xecdb58),triggerEnergyPrediction(_0xecdb58)),updateHealthVector(_0xecdb58);},0x1388);}class CogniLiving extends utils['Adapter']{constructor(_0x3ab41b){const _0x108625=a0_0x3c717c;super({..._0x3ab41b,'name':_0x108625(0x10d)}),this[_0x108625(0x151)]=[],this[_0x108625(0x168)]=[],this['rawEventLog']=[],this[_0x108625(0x110)]=[],this[_0x108625(0x19e)]={},this[_0x108625(0x1ed)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x108625(0x200)]=!![],this[_0x108625(0x156)]=null,this['exitGraceTimer']=null,this[_0x108625(0x272)]=![],this[_0x108625(0x16f)]=null,this['geminiModel']=null,this[_0x108625(0x1d9)]=SYSTEM_MODES[_0x108625(0x112)],this[_0x108625(0x13a)]=![],this[_0x108625(0x13b)]=![],this[_0x108625(0x274)]='unknown',this[_0x108625(0x1e0)]=null,this['ltmJob']=null,this[_0x108625(0x117)]=null,this['driftAnalysisTimer']=null,this[_0x108625(0x256)]=null,this[_0x108625(0x22f)]=null,this[_0x108625(0xe7)]=![],this['on'](_0x108625(0x243),this['onReady']['bind'](this)),this['on']('stateChange',this[_0x108625(0xf6)][_0x108625(0x23e)](this)),this['on']('unload',this[_0x108625(0xeb)]['bind'](this)),this['on'](_0x108625(0x118),this[_0x108625(0x275)][_0x108625(0x23e)](this));}async['onReady'](){const _0x2cc0d6=a0_0x3c717c;this[_0x2cc0d6(0x247)][_0x2cc0d6(0x1cd)](_0x2cc0d6(0x100)+this[_0x2cc0d6(0xfc)]+_0x2cc0d6(0x164));if(!installer[_0x2cc0d6(0x23d)](this,()=>startSystem(this)))return;}[a0_0x3c717c(0xeb)](_0x4c4874){const _0x1e1f47=a0_0x3c717c;if(this[_0x1e1f47(0x1e0)])clearInterval(this[_0x1e1f47(0x1e0)]);if(this[_0x1e1f47(0x26b)])clearInterval(this[_0x1e1f47(0x26b)]);if(this[_0x1e1f47(0x182)])this[_0x1e1f47(0x182)][_0x1e1f47(0x13d)]();if(this[_0x1e1f47(0x117)])this[_0x1e1f47(0x117)][_0x1e1f47(0x13d)]();if(this[_0x1e1f47(0x256)])this[_0x1e1f47(0x256)][_0x1e1f47(0x13d)]();if(this[_0x1e1f47(0x156)])clearTimeout(this[_0x1e1f47(0x156)]);if(this['exitGraceTimer'])clearTimeout(this['exitGraceTimer']);stopPythonService(this),_0x4c4874();}async['onStateChange'](_0x725a95,_0x375b15){const _0x364571=a0_0x3c717c;if(!_0x375b15||this[_0x364571(0xe7)])return;if(_0x725a95[_0x364571(0x184)]('telegram')&&_0x725a95[_0x364571(0x169)](_0x364571(0x12b))&&_0x375b15['val']){await handleTelegramResponse(this,_0x375b15[_0x364571(0x18b)]);return;}if(_0x725a95===this[_0x364571(0x246)]+'.'+SYSTEM_DP_MODE){if(_0x375b15[_0x364571(0x18b)]&&Object[_0x364571(0x263)](SYSTEM_MODES)[_0x364571(0x184)](_0x375b15[_0x364571(0x18b)])){this[_0x364571(0x1d9)]=_0x375b15[_0x364571(0x18b)];if(_0x375b15[_0x364571(0x18b)]===SYSTEM_MODES[_0x364571(0xff)])await setPresence(this,![]);else await setPresence(this,!![]);}if(!_0x375b15[_0x364571(0x20f)])this[_0x364571(0x255)](_0x725a95,{'val':this[_0x364571(0x1d9)],'ack':!![]});return;}if(!_0x375b15['ack']){_0x725a95[_0x364571(0x184)]('analysis.trigger')&&_0x375b15[_0x364571(0x18b)]&&(this['setState'](_0x725a95,{'val':![],'ack':!![]}),runGeminiAnalysis(this));if(_0x725a95[_0x364571(0x184)](_0x364571(0x259))&&_0x375b15[_0x364571(0x18b)]){this[_0x364571(0x255)](_0x725a95,{'val':![],'ack':!![]});if(this['isProVersion'])createDailyDigest(this);}_0x725a95[_0x364571(0x184)](_0x364571(0xfe))&&_0x375b15[_0x364571(0x18b)]&&(this[_0x364571(0x255)](_0x725a95,{'val':![],'ack':!![]}),sendMorningBriefing(this));_0x725a95[_0x364571(0x184)](_0x364571(0x127))&&_0x375b15['val']&&(this[_0x364571(0x255)](_0x725a95,{'val':![],'ack':!![]}),executeAutomationAction(this));if(_0x725a95[_0x364571(0x184)](_0x364571(0x1a7))&&_0x375b15['val']){this['setState'](_0x725a95,{'val':![],'ack':!![]});if(this[_0x364571(0x13a)])try{const _0xeb03ac=await this[_0x364571(0xfb)](_0x364571(0x264));if(_0xeb03ac&&_0xeb03ac['val']){const _0x1e68ad=JSON['parse'](_0xeb03ac[_0x364571(0x18b)]);this[_0x364571(0x247)][_0x364571(0x1cd)](_0x364571(0x19b)),this[_0x364571(0x1a3)](_0x364571(0x26f),{'val':'Sec-Training\x20started...','ack':!![]}),sendToPython(this,_0x364571(0x1dc),{'sequences':_0x1e68ad});}}catch(_0x4794c2){this[_0x364571(0x247)][_0x364571(0x134)](_0x364571(0x225)+_0x4794c2[_0x364571(0x118)]);}}if(_0x725a95['includes'](_0x364571(0x1de))&&_0x375b15[_0x364571(0x18b)]){this[_0x364571(0x255)](_0x725a95,{'val':![],'ack':!![]});if(this[_0x364571(0x13a)])try{const _0x1b9759=await this[_0x364571(0xfb)](LTM_DP_DAILY_DIGESTS);if(_0x1b9759&&_0x1b9759['val'])sendToPython(this,_0x364571(0x1c6),{'digests':JSON[_0x364571(0x1b4)](_0x1b9759[_0x364571(0x18b)])});}catch(_0xffc8e){}}if(_0x725a95[_0x364571(0x184)]('analysis.training.triggerEnergy')&&_0x375b15[_0x364571(0x18b)]){this[_0x364571(0x255)](_0x725a95,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x208ab1=await this[_0x364571(0xfb)](_0x364571(0x1d8));if(_0x208ab1&&_0x208ab1[_0x364571(0x18b)])sendToPython(this,'TRAIN_ENERGY',{'points':JSON[_0x364571(0x1b4)](_0x208ab1[_0x364571(0x18b)])});}catch(_0x132a97){}}if(_0x725a95[_0x364571(0x184)]('analysis.training.triggerComfort')&&_0x375b15[_0x364571(0x18b)]){this[_0x364571(0x255)](_0x725a95,{'val':![],'ack':!![]});if(this[_0x364571(0x13a)])try{const _0xf61c68=await this[_0x364571(0xfb)](LTM_DP_RAW_LOG);_0xf61c68&&_0xf61c68[_0x364571(0x18b)]&&(this['log'][_0x364571(0x1cd)](_0x364571(0x23b)),sendToPython(this,_0x364571(0x136),{'events':JSON[_0x364571(0x1b4)](_0xf61c68['val'])}));}catch(_0x490d0c){}}if(_0x725a95[_0x364571(0x184)](_0x364571(0x1e2))&&_0x375b15[_0x364571(0x18b)]){this['setState'](_0x725a95,{'val':![],'ack':!![]});if(this[_0x364571(0x13a)])try{const _0x227f9f=await this[_0x364571(0xfb)](_0x364571(0x264));if(_0x227f9f&&_0x227f9f[_0x364571(0x18b)]){const _0x474226=JSON['parse'](_0x227f9f['val']);this[_0x364571(0x247)][_0x364571(0x1cd)](_0x364571(0x1c9)),sendToPython(this,'BUILD_TOPOLOGY',{'sequences':_0x474226});}}catch(_0x32837c){this['log']['error'](_0x364571(0x1c8)+_0x32837c['message']);}}return;}if(this[_0x364571(0x232)][_0x364571(0x138)]&&this['config'][_0x364571(0x138)]['includes'](_0x725a95)){await checkWifiPresence(this);return;}const _0x31133f=(this['config'][_0x364571(0x201)]||[])['find'](_0x247349=>_0x247349['id']===_0x725a95);if(_0x31133f)processSensorEvent(this,_0x725a95,_0x375b15,_0x31133f);}async[a0_0x3c717c(0x275)](_0x42a06d){const _0x144874=a0_0x3c717c;if(typeof _0x42a06d===_0x144874(0x249)&&_0x42a06d[_0x144874(0x118)]){if(_0x42a06d['command']===_0x144874(0x276)){const _0x1adfdd=_0x42a06d[_0x144874(0x118)][_0x144874(0xdc)]||this[_0x144874(0x232)][_0x144874(0x26c)];if(!_0x1adfdd)return this[_0x144874(0xed)](_0x42a06d['from'],_0x42a06d[_0x144874(0xf9)],{'success':![],'message':_0x144874(0x245)},_0x42a06d[_0x144874(0x1e3)]);try{const _0x4e04b8=new GoogleGenerativeAI(_0x1adfdd),_0x5d79b8=_0x4e04b8[_0x144874(0x171)]({'model':GEMINI_MODEL}),_0x3aced2=await _0x5d79b8[_0x144874(0x143)]('Hi');this[_0x144874(0xed)](_0x42a06d[_0x144874(0x177)],_0x42a06d[_0x144874(0xf9)],{'success':!![],'message':_0x144874(0x180)+_0x3aced2[_0x144874(0xe1)]['text']()},_0x42a06d[_0x144874(0x1e3)]);}catch(_0x8d311a){this['sendTo'](_0x42a06d[_0x144874(0x177)],_0x42a06d[_0x144874(0xf9)],{'success':![],'message':_0x144874(0x14c)+_0x8d311a[_0x144874(0x118)]},_0x42a06d[_0x144874(0x1e3)]);}}else{if(_0x42a06d[_0x144874(0xf9)]===_0x144874(0x1b0)){const _0x31c0ab=await getWeatherContext(this),_0x4d0c61=await getCalendarContext(this);this[_0x144874(0xed)](_0x42a06d[_0x144874(0x177)],_0x42a06d[_0x144874(0xf9)],{'success':!![],'weather':_0x31c0ab,'calendar':_0x4d0c61},_0x42a06d[_0x144874(0x1e3)]);}else{if(_0x42a06d[_0x144874(0xf9)]===_0x144874(0x1f3)){if(!this[_0x144874(0x13a)])return this[_0x144874(0xed)](_0x42a06d[_0x144874(0x177)],_0x42a06d[_0x144874(0xf9)],{'success':![],'isPro':![]},_0x42a06d['callback']);let _0xdeab3={'status':_0x144874(0x1df)};try{const _0x5a7acd=await this[_0x144874(0xfb)](LTM_DP_DRIFT_STATUS);_0xdeab3['status']=_0x5a7acd?_0x5a7acd['val']:_0x144874(0x1df);}catch(_0xb2f5e5){}this[_0x144874(0xed)](_0x42a06d[_0x144874(0x177)],_0x42a06d[_0x144874(0xf9)],{'success':!![],'isPro':!![],'dailyDigests':this[_0x144874(0x110)],'driftAnalysis':_0xdeab3,'analysisHistory':this[_0x144874(0x168)]},_0x42a06d[_0x144874(0x1e3)]);}else{if(_0x42a06d[_0x144874(0xf9)]===_0x144874(0x141)){const _0x45365c=this['dailyDigests'][_0x144874(0xe5)],_0x291a9a=new Date(),_0x407598=new Date(_0x291a9a['getFullYear'](),_0x291a9a[_0x144874(0xf1)](),_0x291a9a[_0x144874(0x10f)]())[_0x144874(0x21f)](),_0x142cda=this[_0x144874(0x1e1)][_0x144874(0x1ad)](_0xa8ca50=>new Date(_0xa8ca50[_0x144874(0x20d)])[_0x144874(0x21f)]()>_0x407598)[_0x144874(0xe5)],_0x2d846d=new Array(0x18)[_0x144874(0x1aa)](0x0);this[_0x144874(0x1e1)][_0x144874(0x27a)](_0x1c2e1d=>{const _0x4d4537=_0x144874,_0x3de84a=new Date(_0x1c2e1d[_0x4d4537(0x20d)]);if(_0x3de84a['getTime']()>_0x407598)_0x2d846d[_0x3de84a[_0x4d4537(0x1a1)]()]++;});let _0x45ccff={'status':_0x144874(0x1df)};try{const _0x507c5b=await this[_0x144874(0xfb)](LTM_DP_DRIFT_STATUS);_0x45ccff[_0x144874(0x15b)]=_0x507c5b?_0x507c5b[_0x144874(0x18b)]:_0x144874(0x1df);}catch(_0x23e833){}let _0x30d753='';try{const _0x3236e1=await this[_0x144874(0xfb)](_0x144874(0x25a));_0x30d753=_0x3236e1?_0x3236e1[_0x144874(0x18b)]:'';}catch(_0x4982ef){}let _0x3d8df4=null;!this['geminiModel']&&(_0x3d8df4=this['config'][_0x144874(0x26c)]?'KI-Modell\x20nicht\x20initialisiert':_0x144874(0x170));let _0x14176a={'detected':![],'description':'','targetId':'','targetValue':'','autoApply':![]};try{const _0xcae261=await this[_0x144874(0xfb)](_0x144874(0x1ab));if(_0xcae261&&_0xcae261['val']){_0x14176a['detected']=!![];const _0x3bc6a3=await this[_0x144874(0xfb)](_0x144874(0x1a6));_0x14176a[_0x144874(0x1fa)]=_0x3bc6a3?_0x3bc6a3[_0x144874(0x18b)]:'';const _0x3f6e9d=await this['getStateAsync'](_0x144874(0x240));_0x14176a['targetId']=_0x3f6e9d?_0x3f6e9d['val']:'';const _0x3d76ad=await this['getStateAsync'](_0x144874(0x18d));_0x14176a['targetValue']=_0x3d76ad?_0x3d76ad[_0x144874(0x18b)]:'';}const _0x1e8512=await this[_0x144874(0xfb)](_0x144874(0x1ea));_0x14176a['autoApply']=_0x1e8512?!!_0x1e8512[_0x144874(0x18b)]:![];}catch(_0x4d1a63){}this['sendTo'](_0x42a06d[_0x144874(0x177)],_0x42a06d[_0x144874(0xf9)],{'success':!![],'eventHistory':this[_0x144874(0x151)]['slice'](0x0,0xf),'stats':{'digestCount':_0x45365c,'eventCountToday':_0x142cda,'hourlyActivity':_0x2d846d,'driftStatus':_0x45ccff[_0x144874(0x15b)],'isPresent':this[_0x144874(0x200)],'presenceWho':_0x30d753,'minDays':this[_0x144874(0x232)][_0x144874(0x103)]||0x7,'stbDays':this['config'][_0x144874(0x1ec)]||0xe,'ltbDays':this[_0x144874(0x232)][_0x144874(0xf8)]||0x3c,'systemError':_0x3d8df4},'automation':_0x14176a},_0x42a06d[_0x144874(0x1e3)]);}else{if(_0x42a06d['command']===_0x144874(0x24f))try{const _0x86a59e=await scanner[_0x144874(0x195)](this,_0x42a06d[_0x144874(0x118)]||{});this['sendTo'](_0x42a06d['from'],_0x42a06d[_0x144874(0xf9)],{'success':!![],'devices':_0x86a59e},_0x42a06d[_0x144874(0x1e3)]);}catch(_0x33b258){this[_0x144874(0xed)](_0x42a06d[_0x144874(0x177)],_0x42a06d['command'],{'success':![],'error':_0x33b258[_0x144874(0x118)]},_0x42a06d[_0x144874(0x1e3)]);}else{if(_0x42a06d['command']===_0x144874(0x1fc)){const _0x1d181e=await this[_0x144874(0x1f8)]('enum.functions.*',_0x144874(0x165)),_0x2715dc=[];if(_0x1d181e)for(const _0x1d4e57 in _0x1d181e){const _0x4fefb2=_0x1d181e[_0x1d4e57],_0x51af2c=(_0x4fefb2[_0x144874(0x24a)]&&typeof _0x4fefb2[_0x144874(0x24a)][_0x144874(0x1f1)]===_0x144874(0x249)?_0x4fefb2['common'][_0x144874(0x1f1)]['de']:_0x4fefb2[_0x144874(0x24a)]['name'])||_0x4fefb2[_0x144874(0x24a)][_0x144874(0x1f1)];_0x2715dc['push']({'id':_0x1d4e57,'name':_0x51af2c});}const _0x4d2334=await this[_0x144874(0x1f8)](_0x144874(0x207),_0x144874(0x165)),_0x5a2ecd=[];if(_0x4d2334)for(const _0x34a1f6 in _0x4d2334){const _0x107000=_0x4d2334[_0x34a1f6],_0xbaa191=(_0x107000[_0x144874(0x24a)]&&typeof _0x107000[_0x144874(0x24a)]['name']===_0x144874(0x249)?_0x107000['common']['name']['de']:_0x107000['common'][_0x144874(0x1f1)])||_0x34a1f6[_0x144874(0x23a)]('.')[_0x144874(0x1db)]();_0x5a2ecd['push'](_0xbaa191);}this[_0x144874(0xed)](_0x42a06d[_0x144874(0x177)],_0x42a06d[_0x144874(0xf9)],{'success':!![],'enums':_0x2715dc,'rooms':_0x5a2ecd},_0x42a06d[_0x144874(0x1e3)]);}else{if(_0x42a06d['command']==='getCalendarNames'){const _0x2d9591=_0x42a06d[_0x144874(0x118)][_0x144874(0x123)];if(!_0x2d9591)return this['sendTo'](_0x42a06d[_0x144874(0x177)],_0x42a06d[_0x144874(0xf9)],{'success':![],'error':_0x144874(0x12e)},_0x42a06d[_0x144874(0x1e3)]);const _0x1e70e1=await getCalendarNames(this,_0x2d9591);this[_0x144874(0xed)](_0x42a06d[_0x144874(0x177)],_0x42a06d[_0x144874(0xf9)],{'success':!![],'names':_0x1e70e1},_0x42a06d[_0x144874(0x1e3)]);}else{if(_0x42a06d['command']===_0x144874(0x1eb)){const {targetId:_0x439ce6,targetValue:_0xa7e145}=_0x42a06d[_0x144874(0x118)];this[_0x144874(0x247)]['info'](_0x144874(0x181)+_0x439ce6+_0x144874(0x204)+_0xa7e145),await this[_0x144874(0x1a3)](_0x144874(0x1ab),{'val':!![],'ack':!![]}),await this['setStateAsync'](_0x144874(0x1a6),{'val':_0x144874(0x190)+_0x439ce6,'ack':!![]}),await this[_0x144874(0x1a3)](_0x144874(0x240),{'val':_0x439ce6,'ack':!![]}),await this['setStateAsync'](_0x144874(0x18d),{'val':_0xa7e145,'ack':!![]}),this[_0x144874(0xed)](_0x42a06d['from'],_0x42a06d['command'],{'success':!![]},_0x42a06d['callback']);}else{if(_0x42a06d['command']==='submitFeedback'){const {historyId:_0x305266,rating:_0x490879,comment:_0x120fd2,alertReason:_0x29e62a}=_0x42a06d['message'];_0x305266&&_0x490879?(await saveFeedback(this,{'timestamp':Date[_0x144874(0x224)](),'historyId':_0x305266,'rating':_0x490879,'comment':_0x120fd2,'alertReason':_0x29e62a}),this[_0x144874(0xed)](_0x42a06d[_0x144874(0x177)],_0x42a06d[_0x144874(0xf9)],{'success':!![]},_0x42a06d['callback'])):this[_0x144874(0xed)](_0x42a06d[_0x144874(0x177)],_0x42a06d[_0x144874(0xf9)],{'success':![],'error':_0x144874(0x155)},_0x42a06d[_0x144874(0x1e3)]);}else _0x42a06d[_0x144874(0xf9)]===_0x144874(0x129)&&(this[_0x144874(0x247)][_0x144874(0x1cd)](_0x144874(0x113)),await this[_0x144874(0x1a3)](_0x144874(0x1ab),{'val':![],'ack':!![]}),await this['setStateAsync'](_0x144874(0x1a6),{'val':'','ack':!![]}),this['sendTo'](_0x42a06d[_0x144874(0x177)],_0x42a06d[_0x144874(0xf9)],{'success':!![]},_0x42a06d[_0x144874(0x1e3)]));}}}}}}}}}}}if(require[a0_0x3c717c(0x104)]!==module)module[a0_0x3c717c(0x15d)]=_0x7440d6=>new CogniLiving(_0x7440d6);else new CogniLiving();