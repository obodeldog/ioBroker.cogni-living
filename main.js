const a0_0x1e747b=a0_0xd2d6;(function(_0x363958,_0x4bdc97){const _0x1505b4=a0_0xd2d6,_0x2e60f1=_0x363958();while(!![]){try{const _0x1f82e6=-parseInt(_0x1505b4(0x1cd))/0x1*(-parseInt(_0x1505b4(0x2cc))/0x2)+-parseInt(_0x1505b4(0x1bd))/0x3*(-parseInt(_0x1505b4(0x2ca))/0x4)+parseInt(_0x1505b4(0x2a4))/0x5*(-parseInt(_0x1505b4(0x128))/0x6)+parseInt(_0x1505b4(0x1de))/0x7*(parseInt(_0x1505b4(0x265))/0x8)+-parseInt(_0x1505b4(0x320))/0x9+-parseInt(_0x1505b4(0x1c7))/0xa+-parseInt(_0x1505b4(0x15d))/0xb*(-parseInt(_0x1505b4(0x2a1))/0xc);if(_0x1f82e6===_0x4bdc97)break;else _0x2e60f1['push'](_0x2e60f1['shift']());}catch(_0x4f7616){_0x2e60f1['push'](_0x2e60f1['shift']());}}}(a0_0x4c51,0x8e4a8));const a0_0x313efe=(function(){let _0x32428c=!![];return function(_0x2db56c,_0x59697e){const _0x9ced3a=_0x32428c?function(){const _0x11bde7=a0_0xd2d6;if(_0x59697e){const _0x5d8cc4=_0x59697e[_0x11bde7(0x326)](_0x2db56c,arguments);return _0x59697e=null,_0x5d8cc4;}}:function(){};return _0x32428c=![],_0x9ced3a;};}()),a0_0x6accaa=a0_0x313efe(this,function(){const _0x22fe21=a0_0xd2d6;return a0_0x6accaa[_0x22fe21(0x32d)]()['search'](_0x22fe21(0x232))[_0x22fe21(0x32d)]()[_0x22fe21(0x15f)](a0_0x6accaa)[_0x22fe21(0x1f8)](_0x22fe21(0x232));});a0_0x6accaa();'use strict';const utils=require(a0_0x1e747b(0x261)),{GoogleGenerativeAI}=require(a0_0x1e747b(0x292)),schedule=require(a0_0x1e747b(0x228)),{spawn,exec}=require('child_process'),path=require(a0_0x1e747b(0x1d3)),HISTORY_MAX_SIZE=0x32,RAW_LOG_MAX_SIZE=0x5dc,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL=a0_0x1e747b(0x319),LTM_SCHEDULE=a0_0x1e747b(0x31e),MODE_RESET_SCHEDULE=a0_0x1e747b(0x1a7),ANALYSIS_HISTORY_MAX_SIZE=0x64,EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,SEQUENCE_TIMEOUT_MS=0x5*0x3c*0x3e8,MAX_TRAINING_SET_SIZE=0x1f4,THERMO_LOG_SIZE=0x3e8,LTM_DP_RAW_LOG='LTM.rawEventLog',LTM_DP_DAILY_DIGESTS=a0_0x1e747b(0x12a),LTM_DP_STATUS=a0_0x1e747b(0x19c),LTM_DP_TRIGGER_DIGEST=a0_0x1e747b(0x235),LTM_DP_BASELINE_STATUS='LTM.baselineStatus',LTM_DP_DRIFT_CHANNEL=a0_0x1e747b(0x1b9),LTM_DP_DRIFT_STATUS=a0_0x1e747b(0x226),LTM_DP_DRIFT_DETAILS=a0_0x1e747b(0x225),LTM_DP_DRIFT_LAST_CHECK=a0_0x1e747b(0x245),SYSTEM_DP_MODE='system.mode',HARD_IGNORE_TERMS=[a0_0x1e747b(0x161),a0_0x1e747b(0x2f4),a0_0x1e747b(0x2e5),'unreach',a0_0x1e747b(0x23e),a0_0x1e747b(0x1ed),a0_0x1e747b(0x21c),'maintenance',a0_0x1e747b(0x285),a0_0x1e747b(0x2f3),a0_0x1e747b(0x167),a0_0x1e747b(0x2d0),a0_0x1e747b(0x1c3),a0_0x1e747b(0x21a),a0_0x1e747b(0x32f),a0_0x1e747b(0x233),'reachable',a0_0x1e747b(0x2ef)],BAD_NAMES=[a0_0x1e747b(0x2c2),a0_0x1e747b(0x13a),a0_0x1e747b(0x31a),'level',a0_0x1e747b(0x2b4),a0_0x1e747b(0x1ab),'on',a0_0x1e747b(0x1b8),a0_0x1e747b(0x277),a0_0x1e747b(0x19d),a0_0x1e747b(0x1e1),'blind',a0_0x1e747b(0x23d),'status','motion',a0_0x1e747b(0x197),a0_0x1e747b(0x256),a0_0x1e747b(0x30c),a0_0x1e747b(0x2d9),a0_0x1e747b(0x1af),a0_0x1e747b(0x240),a0_0x1e747b(0x2ae),a0_0x1e747b(0x169),a0_0x1e747b(0x304),a0_0x1e747b(0x18f)],ADAPTER_BLACKLIST=[a0_0x1e747b(0x17b),a0_0x1e747b(0x1b3),'info.','vis.',a0_0x1e747b(0x230),'material.',a0_0x1e747b(0x1dd),a0_0x1e747b(0x207),a0_0x1e747b(0x313),a0_0x1e747b(0x243),a0_0x1e747b(0x231)],SYSTEM_MODES={'NORMAL':a0_0x1e747b(0x26c),'VACATION':a0_0x1e747b(0x23b),'PARTY':a0_0x1e747b(0x2a6),'GUEST':a0_0x1e747b(0x165)},AUTO_RESET_MODES=[SYSTEM_MODES[a0_0x1e747b(0x127)],SYSTEM_MODES['GUEST']],PERSONA_MAPPING={'generic':'Analysiere\x20ausgewogen.','senior_aal':a0_0x1e747b(0x291),'family':a0_0x1e747b(0x2be),'single_comfort':a0_0x1e747b(0x195),'security':'PRIORIT√ÑT:\x20Sicherheit.'},ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};let activeSequence=[],sequenceTimer=null;async function initZombies(_0x1ef410){const _0x978c9d=a0_0x1e747b;try{const _0x2a002c=['analysis.history_debug_00',_0x978c9d(0x2fc)];for(const _0x107456 of _0x2a002c){try{const _0x526f83=await _0x1ef410[_0x978c9d(0x1b4)](_0x107456);_0x526f83&&await _0x1ef410[_0x978c9d(0x125)](_0x107456);}catch(_0x5ea389){}}}catch(_0x811330){}}async function initHistory(_0x5e3797){const _0x1a5085=a0_0x1e747b;try{const _0x175f5c=await _0x5e3797[_0x1a5085(0x1d0)](_0x1a5085(0x12d));_0x175f5c&&_0x175f5c[_0x1a5085(0x2c6)]&&(_0x5e3797[_0x1a5085(0x23a)]=JSON[_0x1a5085(0x316)](_0x175f5c[_0x1a5085(0x2c6)][_0x1a5085(0x32d)]()));}catch(_0x283c85){_0x5e3797['eventHistory']=[];}try{const _0x1dfdb7=await _0x5e3797['getStateAsync']('analysis.analysisHistory');if(_0x1dfdb7&&_0x1dfdb7[_0x1a5085(0x2c6)])_0x5e3797[_0x1a5085(0x13b)]=JSON[_0x1a5085(0x316)](_0x1dfdb7[_0x1a5085(0x2c6)]['toString']());}catch(_0x162d25){_0x5e3797[_0x1a5085(0x13b)]=[];}if(_0x5e3797[_0x1a5085(0x23a)]&&_0x5e3797[_0x1a5085(0x23a)][_0x1a5085(0x17a)]>0x0){_0x5e3797[_0x1a5085(0x324)][_0x1a5085(0x1f4)](_0x1a5085(0x1ad)+_0x5e3797['eventHistory'][_0x1a5085(0x17a)]+_0x1a5085(0x28c));for(let _0x463f95=_0x5e3797['eventHistory'][_0x1a5085(0x17a)]-0x1;_0x463f95>=0x0;_0x463f95--){const _0x348290=_0x5e3797['eventHistory'][_0x463f95];_0x348290&&_0x348290['id']!==undefined&&_0x348290[_0x1a5085(0x2b4)]!==undefined&&(_0x5e3797['sensorLastValues'][_0x348290['id']]=_0x348290['value']);}}}function a0_0xd2d6(_0x24f000,_0x23482a){const _0x2c783b=a0_0x4c51();return a0_0xd2d6=function(_0x6accaa,_0x313efe){_0x6accaa=_0x6accaa-0x125;let _0x4c51ce=_0x2c783b[_0x6accaa];return _0x4c51ce;},a0_0xd2d6(_0x24f000,_0x23482a);}async function initSystemConfig(_0x132954){const _0x37b301=a0_0x1e747b;try{const _0x167019=await _0x132954[_0x37b301(0x32c)]('system.config');_0x167019&&_0x167019[_0x37b301(0x17d)]&&(_0x132954[_0x37b301(0x2b5)]={'latitude':_0x167019['common'][_0x37b301(0x1a4)]||0x0,'longitude':_0x167019[_0x37b301(0x17d)][_0x37b301(0x296)]||0x0,'city':_0x167019[_0x37b301(0x17d)][_0x37b301(0x295)]||''});}catch(_0x2227ed){}}async function checkLicense(_0x45550b,_0xd4bc8a){const _0x8c103f=a0_0x1e747b;if(!_0xd4bc8a)return![];_0x45550b['systemUUID']=await getSystemUUID(_0x45550b);if(_0xd4bc8a==='TEST-PRO-KEY'||_0xd4bc8a[_0x8c103f(0x2ed)](_0x8c103f(0x2aa)))return!![];return![];}async function getSystemUUID(_0xd811c2){const _0x135258=a0_0x1e747b;try{const _0x19b95a=await _0xd811c2['getForeignObjectAsync'](_0x135258(0x2b1));if(_0x19b95a&&_0x19b95a[_0x135258(0x20d)]&&_0x19b95a[_0x135258(0x20d)][_0x135258(0x2cd)])return _0x19b95a[_0x135258(0x20d)][_0x135258(0x2cd)];return _0x135258(0x1a5);}catch(_0x3623e6){return _0x135258(0x12c);}}async function createAllObjects(_0x2cb626){const _0x56966f=a0_0x1e747b;await checkSystemObjects(_0x2cb626),await _0x2cb626[_0x56966f(0x2ba)](_0x56966f(0x286),{'type':_0x56966f(0x31a),'common':{'name':_0x56966f(0x249),'type':'string','role':_0x56966f(0x26f),'read':!![],'write':![],'def':''},'native':{}}),await _0x2cb626['setObjectNotExistsAsync']('events.lastEvent',{'type':_0x56966f(0x31a),'common':{'name':_0x56966f(0x298),'type':_0x56966f(0x2ea),'role':_0x56966f(0x223),'read':!![],'write':![]},'native':{}}),await _0x2cb626['setObjectNotExistsAsync']('events.history',{'type':_0x56966f(0x31a),'common':{'name':_0x56966f(0x174),'type':'string','role':'json','read':!![],'write':![]},'native':{}}),await _0x2cb626[_0x56966f(0x2ba)](_0x56966f(0x1f1),{'type':_0x56966f(0x31a),'common':{'name':_0x56966f(0x17f),'type':_0x56966f(0x267),'role':_0x56966f(0x26e),'read':!![],'write':!![],'def':![]},'native':{}}),await _0x2cb626['setObjectNotExistsAsync'](_0x56966f(0x16c),{'type':_0x56966f(0x31a),'common':{'name':'Trigger\x20Briefing\x20(Test)','type':_0x56966f(0x267),'role':_0x56966f(0x26e),'read':!![],'write':!![],'def':![]},'native':{}}),await _0x2cb626[_0x56966f(0x2ba)](_0x56966f(0x255),{'type':_0x56966f(0x31a),'common':{'name':_0x56966f(0x2a2),'type':_0x56966f(0x2ea),'role':'json','read':!![],'write':![]},'native':{}}),await _0x2cb626['setObjectNotExistsAsync'](_0x56966f(0x264),{'type':_0x56966f(0x31a),'common':{'name':_0x56966f(0x227),'type':'boolean','role':_0x56966f(0x14f),'read':!![],'write':![],'def':![]},'native':{}}),await _0x2cb626[_0x56966f(0x2ba)](_0x56966f(0x272),{'type':_0x56966f(0x31a),'common':{'name':_0x56966f(0x132),'type':_0x56966f(0x267),'role':'indicator.alarm.fire','read':!![],'write':![],'def':![]},'native':{}}),await _0x2cb626[_0x56966f(0x2ba)]('analysis.alertReason',{'type':_0x56966f(0x31a),'common':{'name':_0x56966f(0x1be),'type':_0x56966f(0x2ea),'role':_0x56966f(0x262),'read':!![],'write':![]},'native':{}}),await _0x2cb626[_0x56966f(0x2ba)](_0x56966f(0x14a),{'type':_0x56966f(0x31a),'common':{'name':'Activity\x20Summary','type':_0x56966f(0x2ea),'role':_0x56966f(0x26f),'read':!![],'write':![]},'native':{}}),await _0x2cb626['setObjectNotExistsAsync']('analysis.deviationFromBaseline',{'type':_0x56966f(0x31a),'common':{'name':_0x56966f(0x1a2),'type':_0x56966f(0x2ea),'role':_0x56966f(0x31a),'read':!![],'write':![],'def':_0x56966f(0x170)},'native':{}}),await _0x2cb626[_0x56966f(0x2ba)](_0x56966f(0x288),{'type':_0x56966f(0x31a),'common':{'name':_0x56966f(0x213),'type':_0x56966f(0x2ea),'role':'text','read':!![],'write':![]},'native':{}}),await _0x2cb626[_0x56966f(0x2ba)]('analysis.comfortSuggestion',{'type':'state','common':{'name':_0x56966f(0x323),'type':_0x56966f(0x2ea),'role':_0x56966f(0x26f),'read':!![],'write':![]},'native':{}}),await _0x2cb626[_0x56966f(0x1b6)](_0x56966f(0x330),{'type':_0x56966f(0x2ac),'common':{'name':_0x56966f(0x284)},'native':{}}),await _0x2cb626[_0x56966f(0x2ba)](_0x56966f(0x177),{'type':_0x56966f(0x31a),'common':{'name':_0x56966f(0x325),'type':'boolean','role':'indicator','read':!![],'write':![],'def':![]},'native':{}}),await _0x2cb626['setObjectNotExistsAsync'](_0x56966f(0x1f6),{'type':_0x56966f(0x31a),'common':{'name':_0x56966f(0x23f),'type':_0x56966f(0x2ea),'role':_0x56966f(0x26f),'read':!![],'write':![]},'native':{}}),await _0x2cb626[_0x56966f(0x2ba)](_0x56966f(0x206),{'type':_0x56966f(0x31a),'common':{'name':_0x56966f(0x17c),'type':'string','role':'text','read':!![],'write':![]},'native':{}}),await _0x2cb626[_0x56966f(0x2ba)](_0x56966f(0x216),{'type':_0x56966f(0x31a),'common':{'name':_0x56966f(0x158),'type':_0x56966f(0x2ea),'role':'text','read':!![],'write':![]},'native':{}}),await _0x2cb626[_0x56966f(0x2ba)]('analysis.automation.targetValue',{'type':'state','common':{'name':'Target\x20Value','type':'string','role':_0x56966f(0x26f),'read':!![],'write':![]},'native':{}}),await _0x2cb626[_0x56966f(0x2ba)](_0x56966f(0x2de),{'type':_0x56966f(0x31a),'common':{'name':_0x56966f(0x2b7),'type':_0x56966f(0x267),'role':_0x56966f(0x277),'read':!![],'write':!![],'def':![]},'native':{}}),await _0x2cb626[_0x56966f(0x2ba)]('analysis.automation.triggerAction',{'type':_0x56966f(0x31a),'common':{'name':'Trigger\x20Action\x20Now','type':'boolean','role':_0x56966f(0x26e),'read':!![],'write':!![],'def':![]},'native':{}}),await _0x2cb626[_0x56966f(0x2ba)](_0x56966f(0x1c5),{'type':_0x56966f(0x31a),'common':{'name':_0x56966f(0x1f0),'type':_0x56966f(0x2ea),'role':'json','read':!![],'write':![],'def':'[]'},'native':{}}),await _0x2cb626['setObjectNotExistsAsync'](_0x56966f(0x178),{'type':_0x56966f(0x31a),'common':{'name':_0x56966f(0x180),'type':_0x56966f(0x2ea),'role':_0x56966f(0x223),'read':!![],'write':![],'def':'[]'},'native':{}}),await _0x2cb626[_0x56966f(0x1b6)](_0x56966f(0x32e),{'type':'channel','common':{'name':_0x56966f(0x25f)},'native':{}}),await _0x2cb626[_0x56966f(0x2ba)](_0x56966f(0x1d5),{'type':_0x56966f(0x31a),'common':{'name':_0x56966f(0x2b3),'type':_0x56966f(0x13d),'role':_0x56966f(0x29d),'read':!![],'write':![],'def':0x0},'native':{}}),await _0x2cb626['setObjectNotExistsAsync'](_0x56966f(0x329),{'type':_0x56966f(0x31a),'common':{'name':_0x56966f(0x275),'type':'string','role':'text','read':!![],'write':![],'def':_0x56966f(0x301)},'native':{}}),await _0x2cb626[_0x56966f(0x2ba)]('analysis.health.notes',{'type':_0x56966f(0x31a),'common':{'name':_0x56966f(0x2e2),'type':_0x56966f(0x2ea),'role':_0x56966f(0x26f),'read':!![],'write':![],'def':''},'native':{}}),await _0x2cb626[_0x56966f(0x2ba)](_0x56966f(0x2a5),{'type':_0x56966f(0x31a),'common':{'name':_0x56966f(0x22b),'type':'string','role':_0x56966f(0x26f),'read':!![],'write':![],'def':'N/A'},'native':{}}),await _0x2cb626[_0x56966f(0x2ba)]('analysis.health.trendValue',{'type':_0x56966f(0x31a),'common':{'name':_0x56966f(0x182),'type':_0x56966f(0x13d),'role':_0x56966f(0x2b4),'read':!![],'write':![],'def':0x0},'native':{}}),await _0x2cb626['extendObjectAsync']('LTM.trainingData',{'type':'channel','common':{'name':_0x56966f(0x1a1)},'native':{}}),await _0x2cb626[_0x56966f(0x2ba)](_0x56966f(0x16a),{'type':_0x56966f(0x31a),'common':{'name':_0x56966f(0x29c),'type':_0x56966f(0x2ea),'role':'json','read':!![],'write':![],'def':'[]','desc':_0x56966f(0x1ba)},'native':{}}),await _0x2cb626[_0x56966f(0x2ba)](_0x56966f(0x276),{'type':_0x56966f(0x31a),'common':{'name':_0x56966f(0x25c),'type':'string','role':_0x56966f(0x223),'read':!![],'write':![],'def':'[]','desc':'Correlation\x20between\x20Inside\x20Temp,\x20Outside\x20Temp\x20and\x20Time'},'native':{}}),await checkLtmObjects(_0x2cb626),await checkLtmDriftObjects(_0x2cb626);}async function checkSystemObjects(_0x587c07){const _0x24601d=a0_0x1e747b;await _0x587c07[_0x24601d(0x1b6)](_0x24601d(0x1ec),{'type':'channel','common':{'name':'System\x20Status\x20&\x20Control'},'native':{}}),await _0x587c07['extendObjectAsync'](SYSTEM_DP_MODE,{'type':_0x24601d(0x31a),'common':{'name':_0x24601d(0x2c8),'type':_0x24601d(0x2ea),'role':_0x24601d(0x31a),'read':!![],'write':!![],'def':SYSTEM_MODES['NORMAL'],'states':{[SYSTEM_MODES['NORMAL']]:_0x24601d(0x1da),[SYSTEM_MODES['VACATION']]:_0x24601d(0x30d),[SYSTEM_MODES[_0x24601d(0x127)]]:_0x24601d(0x266),[SYSTEM_MODES['GUEST']]:_0x24601d(0x2d7)}},'native':{}});}async function checkLtmObjects(_0x1c18a8){const _0x24c6a3=a0_0x1e747b;await _0x1c18a8[_0x24c6a3(0x1b6)](_0x24c6a3(0x12b),{'type':_0x24c6a3(0x2ac),'common':{'name':_0x24c6a3(0x12b)},'native':{}}),await _0x1c18a8[_0x24c6a3(0x1b6)](LTM_DP_RAW_LOG,{'type':_0x24c6a3(0x31a),'common':{'name':'Raw\x20Log','type':_0x24c6a3(0x2ea),'role':_0x24c6a3(0x223),'read':!![],'write':![]},'native':{}}),await _0x1c18a8['extendObjectAsync'](LTM_DP_DAILY_DIGESTS,{'type':_0x24c6a3(0x31a),'common':{'name':_0x24c6a3(0x198),'type':_0x24c6a3(0x2ea),'role':_0x24c6a3(0x223),'read':!![],'write':![]},'native':{}}),await _0x1c18a8[_0x24c6a3(0x1b6)](LTM_DP_STATUS,{'type':_0x24c6a3(0x31a),'common':{'name':'Processing\x20Status','type':_0x24c6a3(0x2ea),'role':'text','read':!![],'write':![]},'native':{}}),await _0x1c18a8[_0x24c6a3(0x1b6)](LTM_DP_TRIGGER_DIGEST,{'type':_0x24c6a3(0x31a),'common':{'name':_0x24c6a3(0x142),'type':_0x24c6a3(0x267),'role':_0x24c6a3(0x26e),'read':!![],'write':!![],'def':![]},'native':{}}),await _0x1c18a8['extendObjectAsync'](LTM_DP_BASELINE_STATUS,{'type':_0x24c6a3(0x31a),'common':{'name':'Baseline\x20Status','type':'string','role':_0x24c6a3(0x26f),'read':!![],'write':![]},'native':{}});}async function checkLtmDriftObjects(_0x59f06a){const _0x28981e=a0_0x1e747b;await _0x59f06a[_0x28981e(0x1b6)](LTM_DP_DRIFT_CHANNEL,{'type':'channel','common':{'name':_0x28981e(0x199)},'native':{}}),await _0x59f06a['extendObjectAsync'](LTM_DP_DRIFT_STATUS,{'type':_0x28981e(0x31a),'common':{'name':_0x28981e(0x30e),'type':_0x28981e(0x2ea),'role':'state','read':!![],'write':![],'def':_0x28981e(0x170)},'native':{}}),await _0x59f06a[_0x28981e(0x1b6)](LTM_DP_DRIFT_DETAILS,{'type':_0x28981e(0x31a),'common':{'name':_0x28981e(0x211),'type':'string','role':_0x28981e(0x26f),'read':!![],'write':![]},'native':{}}),await _0x59f06a[_0x28981e(0x1b6)](LTM_DP_DRIFT_LAST_CHECK,{'type':_0x28981e(0x31a),'common':{'name':_0x28981e(0x1c9),'type':'number','role':_0x28981e(0x229),'read':!![],'write':![]},'native':{}});}async function loadSystemMode(_0x295dc){const _0x412f38=a0_0x1e747b;try{const _0x55cee0=await _0x295dc[_0x412f38(0x1d0)](SYSTEM_DP_MODE);_0x55cee0&&_0x55cee0['val']&&Object['values'](SYSTEM_MODES)[_0x412f38(0x26d)](_0x55cee0[_0x412f38(0x2c6)])?_0x295dc['currentSystemMode']=_0x55cee0['val']:(_0x295dc[_0x412f38(0x139)]=SYSTEM_MODES['NORMAL'],await _0x295dc[_0x412f38(0x129)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES['NORMAL'],'ack':!![]}));}catch(_0x2d7c09){_0x295dc[_0x412f38(0x139)]=SYSTEM_MODES['NORMAL'];}}async function loadRawEventLog(_0x4a0310){const _0x9520c7=a0_0x1e747b;try{const _0x2a6291=await _0x4a0310[_0x9520c7(0x1d0)](LTM_DP_RAW_LOG);if(_0x2a6291&&_0x2a6291[_0x9520c7(0x2c6)])_0x4a0310[_0x9520c7(0x2c1)]=JSON[_0x9520c7(0x316)](_0x2a6291[_0x9520c7(0x2c6)]);}catch(_0x3d57ac){_0x4a0310[_0x9520c7(0x2c1)]=[];}}async function saveRawEventLog(_0x5110d9){const _0x5f2ea6=a0_0x1e747b;_0x5110d9['rawEventLog'][_0x5f2ea6(0x17a)]>RAW_LOG_MAX_SIZE&&_0x5110d9[_0x5f2ea6(0x2c1)][_0x5f2ea6(0x212)](0x0,_0x5110d9['rawEventLog'][_0x5f2ea6(0x17a)]-RAW_LOG_MAX_SIZE),await _0x5110d9[_0x5f2ea6(0x129)](LTM_DP_RAW_LOG,{'val':JSON[_0x5f2ea6(0x2fd)](_0x5110d9[_0x5f2ea6(0x2c1)]),'ack':!![]});}async function loadDailyDigests(_0x49c966){const _0x2d08ad=a0_0x1e747b;try{const _0x3fd65f=await _0x49c966[_0x2d08ad(0x1d0)](LTM_DP_DAILY_DIGESTS);if(_0x3fd65f&&_0x3fd65f[_0x2d08ad(0x2c6)])_0x49c966[_0x2d08ad(0x183)]=JSON[_0x2d08ad(0x316)](_0x3fd65f['val']);}catch(_0x2d5d09){_0x49c966['dailyDigests']=[];}await updateBaselineStatus(_0x49c966);}function a0_0x4c51(){const _0x402151=['power','Guardian:\x20Sending\x20','Drift\x20Sched\x20Error:\x20','üìû\x20User\x20requested\x20CALL\x20via\x20Telegram!','admin.','getObjectAsync','role','extendObjectAsync','üìû\x20R√úCKRUF\x20BITTE!\x20Der\x20Bewohner\x20hat\x20den\x20R√ºckruf-Button\x20gedr√ºckt.','off','LTM.driftAnalysis','Array\x20of\x20completed\x20movement\x20paths\x20for\x20ML\x20training','KALENDER\x20ERROR:\x20','onMessage','8031fqpLWw','Alert\x20Reason','cogni-living\x20adapter\x20starting\x20(v','generic','notifyPushoverEnabled','üö®\x20EMERGENCY','stick_unreach','bind','analysis.analysisHistory','presenceDevices','5979600qRJAaK','KI-Modell\x20nicht\x20initialisiert','Last\x20Check','[RECORDER]\x20Error\x20saving\x20sequence:\x20','Started\x20at\x20','filter','4701gwnvsD','No\x20module\x20named','unknown','getStateAsync','notifyPushoverInstance','getForeignStateAsync','path','python_service','analysis.health.sleepScore','communicate.request','briefingTime','status','N/A\x20(Learning)','Normal','.\x20KONTEXT:\x20','loc','icons-mfd.','56SHzUML','subscribeStates','lock','shutter','[PYTHON]\x20Failed\x20to\x20start\x20(is\x20python3\x20installed?):\x20','schalter','main','[LOG]','_score','\x20=\x20','generateContent','ü§ñ\x20BUTLER:\x20Executing\x20Action\x20->\x20','enum.functions.*','Keiner','system','rssi','.forecast.current.temp','pythonProcess','Logbook','analysis.trigger',')\x20-\x20FUNCTIONS\x20FIRST\x20ARCHITECTURE','subscribeForeignStatesAsync','info','find','analysis.automation.description','weather','search','testApiKey','Gemini\x20AI\x20initialized.','BUTLER\x20Execution\x20Error:\x20','Lernphase\x20(','isGracePeriodActive','door','WETTER:\x20','\x20|\x20Status:\x20','pr√§senz','command','summary','HARD\x20WATCHDOG:\x20No\x20sensor\x20activity\x20detected\x20for\x20','Fehler:\x20','analysis.automation.suggestedAction','flot.','light','geminiModel','isEmergency','IGNORING\x20DUPLICATE\x20(Cached):\x20','inactivityMonitoringEnabled','native','Deaktiviert\x20(Pro-Feature)','scanDevices','notifyTelegramEnabled','Drift\x20Details','splice','Comfort\x20Summary','Exit\x20Sensor\x20triggered\x20(','.forecast.current.state','analysis.automation.targetId','replace','forEach','\x20for\x20interactive\x20buttons...','config_pending','sort','connection','No\x20instance','\x20(Value\x20is\x20falsy:\x20','geminiApiKey','enum.rooms.*','):\x20','Generating\x20Morning\x20Briefing...','json','sensor','LTM.driftAnalysis.driftDetails','LTM.driftAnalysis.baselineDrift','AI\x20Alert\x20Status','node-schedule','date','KALENDER:\x20Keine\x20Daten','Trend\x20Diagnosis\x20(Python)','\x22\x20--break-system-packages','sound','members','shift','history.','simple-api.','(((.+)+)+)+$','firmware','toLowerCase','LTM.triggerDailyDigest','debug','send','type','Adapter','eventHistory','vacation','ack','cover','lowbat','Description','energy','exitGraceTimer','modeResetJob','javascript.','sendTo','LTM.driftAnalysis.lastCheck','minDaysForBaseline','stdin','Gemini\x20Analysis\x20Error:\x20','Who\x20is\x20present?','WiFi\x20Presence\x20detected\x20->\x20Aborting\x20Exit\x20Timer.\x20User\x20is\x20present.','WETTER\x20ERROR:\x20','analysis.alertReason','getHours','\x20days\x20of\x20activity\x20data\x20to\x20Python...','analysisInterval','indexOf','object','system.isPresent','sensorLastValues','name','analysis.lastResult','occupancy','lampe','data','ANALYZE_TREND','‚ùå\x20AUTO-FIX\x20FAILED.\x20Please\x20run\x20manually:\x20sudo\x20','Sending\x20notification:\x20\x22','Thermodynamic\x20Data\x20Points','push','aiPersona','Health\x20&\x20Sleep\x20Analysis','analysisTimer','@iobroker/adapter-core','text.alarm','split','analysis.isAlert','90368HdyBdM','Party','boolean','‚úÖ\x20AUTO-FIX\x20SUCCESS.\x20Dependencies\x20installed.\x20Restarting\x20Service...','driftAnalysisTimer','values','message','normal','includes','button','text','requirements.txt','warn','analysis.isEmergency','licht','logDuplicates','Restlessness\x20Level','LTM.trainingData.thermodynamics','switch','.\x0a\x20\x20\x20\x20KONTEXT:\x20','ltmStbWindowDays','activityLevel','[PYTHON]\x20Service\x20exited\x20with\x20code\x20','motion','window','üêç\x20Stopping\x20Python\x20Sidecar...','siren','onUnload','notifyTelegramInstance','outdoorSensorId','Cogni-Living','Automation\x20Proposals','error','system.presenceWho','licenseKey','analysis.comfortSummary','join','briefingEnabled','now','\x20events)...','Wetter:\x20Deaktiviert','system.mode','analysis.automation.triggerAction','exitTimer','PRIORIT√ÑT:\x20Gesundheit/AAL.','@google/generative-ai','livingContext','Unknown','city','longitude','selectedFunctionIds','Last\x20raw\x20event','üß™\x20Simulating\x20Butler\x20Proposal:\x20','[PYTHON\x20ERR]\x20','lastAlertState','Recorded\x20Motion\x20Sequences','value.health','Missing\x20data','enum','onReady','11532pdavBs','Last\x20Result','toISOString','930595ipfpUh','analysis.health.trendDiagnosis','party','Alarm',').\x20Saving\x20to\x20Training\x20Data.','cogni-living','PRO-','setHours','channel','blind','setpoint','.data.table','Vom\x20Benutzer\x20best√§tigt\x20(OK).','system.meta.uuid','[RECORDER]\x20Discarding\x20short\x20sequence\x20(Length:\x20','Sleep\x20Score\x20(0-100)','value','systemConfig','unshift','Auto\x20Apply\x20Rule','.Current.Temperature','submitFeedback','setObjectNotExistsAsync','isPresent','pop','dependencyInstallInProgress','Fokus\x20auf\x20Familienroutinen.','Briefing\x20Error:\x20','[RECORDER]\x20Sequence\x20finished\x20(Steps:\x20','rawEventLog','targetposition','inactivityThresholdHours','COGNI_CONFIRM_OK','üõ†Ô∏è\x20AUTO-FIX:\x20Installing\x20Python\x20dependencies\x20from\x20','val','payload','System\x20Mode','substring','1276HbGHum','‚ö†Ô∏è\x20ALARM:\x20','30kNpCWJ','uuid','.communicate.request','getOverviewData','direction','map','ü§ñ\x20BUTLER\x20PROPOSAL:\x20','.\x20OUTPUT:\x20Nur\x20Text.','Kein\x20API\x20Key!','getGenerativeModel','isProVersion','Gast','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','humidity','Keine\x20Details.','notifyTelegramRecipient','Kein\x20API\x20Key\x20eingegeben.','version','analysis.automation.autoApply','Error\x20reading\x20calendar\x20table:\x20','location','getTime','Health\x20Notes','Skipped\x20(No\x20AI\x20or\x20Data)','custom','update','ROLLE:\x20F√ºrsorglicher\x20Assistent.\x20AUFGABE:\x20Schreibe\x20eine\x20kurze,\x20beruhigende\x20\x22Guten\x20Morgen\x22-Nachricht.\x20PERSONA:\x20','daswetter','round','toFixed','string','/100,\x20Aktivit√§t\x20seit\x2004:00:\x20','time','startsWith','lastIndexOf','link_quality','fenster','cancel','trim','fault','scriptEnabled','COGNI_REQUEST_CALL','bewegung','automationProposal','baselineDrift','ltmDriftCheckIntervalHours','heizung','setForeignStateAsync','events.history_debug_00','stringify','‚ùå\x20FREE\x20MODE','from','stateChange','none','openweathermap','weatherunderground','actual_temperature','dimmer','notifyEmailInstance','calendarInstance','temp','\x20events','üêç\x20Guardian\x20Diagnosis\x20(','üåÖ\x20Daily\x20Briefing:\x0a','temperature','Urlaub','Drift\x20Status','üì°\x20Hooking\x20into\x20','sleepScore','Motion\x20detected\x20inside.\x20Aborting\x20Exit\x20Timer.','onStateChange','echarts.','NORMAL','description','parse','_calName','notifyEmailEnabled','models/gemini-flash-latest','state','.NextHours.Location_1.Day_1.current.symbol_desc','[LICENSE\x20CHECK]\x20Key\x20present:\x20','briefingJob','0\x203\x20*\x20*\x20*','Scheduling\x20Morning\x20Briefing\x20for\x20','4229217KaFQCq','getForeignObjectsAsync','.forecast.current.temperature','Comfort\x20Suggestion','log','Pattern\x20Detected','apply','SIMULATION:\x20Test-Vorschlag\x20f√ºr\x20','ltmLtbWindowDays','analysis.health.restlessness','expire','python3','getForeignObjectAsync','toString','analysis.health','dutycycle','analysis.automation','delObjectAsync','writable','PARTY','12kkzyxa','setStateAsync','LTM.dailyDigests','LTM','uuid-error','events.history','getCalendarNames','driftDetails','Entry\x20detected\x20via\x20','close','AI\x20Emergency\x20Status','[PYTHON]\x20','VACATION','detected','Failed\x20to\x20send\x20to\x20Python:\x20','useCalendar','...','currentSystemMode','currentposition','analysisHistory','[RECORDER\x20DEBUG]\x20Accepting\x20Event\x20','number','t√ºr','kontakt','systemUUID','ü§ñ\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','Trigger\x20Digest','namespace','Invalid\x20JSON\x20from\x20Python:\x20','daswetter.0','events.lastEvent','\x20|\x20','automation.triggerAction','TREND_RESULT','analysis.activitySummary','scheduleJob','stdout','alertReason','analysis.health.trendValue','indicator.alarm','\x20*\x20*\x20*','application/json','Could\x20not\x20kill\x20Python\x20process:\x20','Say\x20Hello','config','\x20hours.\x20Potential\x20incapacitation.','accuweather.0','lights','Target\x20ID','.\x20ZUSATZ:\x20','\x20(Value:\x20','Bibliotheken\x20nicht\x20gefunden','Starting\x20Autopilot\x20(','11539DlAnNy','üêç\x20Starting\x20Python\x20Sidecar:\x20','constructor','\x0aSTB:\x20','scriptProblem','timestamp','setState','Subscribing\x20to\x20','guest','genAI','working','apiKey','valve','LTM.trainingData.sequences','isArray','analysis.triggerBriefing','retry','targetId','analysis.automation.targetValue','N/A','Error\x20launching\x20Python\x20service:\x20','callback','‚úÖ\x20Alles\x20OK\x20(Reset)','Event\x20History','weatherInstance','some','analysis.automation.patternDetected','analysis.feedbackHistory','triggerDailyDigest','length','system.','Action','common','sendToAsync','Trigger\x20Analysis','Feedback\x20Log','notifyPushoverRecipient','Trend\x20Value\x20(%)','dailyDigests','Aktiv\x20(','triggerBriefing','Error:\x20','.\x0a\x20\x20\x20\x20NOTFALL-KONTEXT:\x20','write','response','dismissAutomation','unload','contact','ltmJob','Guardian:\x20Not\x20enough\x20history\x20data\x20for\x20trend\x20analysis\x20yet.','set_temperature','stderr','devices','ical.0','useWeather','ready','Fokus\x20auf\x20Komfort.','endsWith','presence','Daily\x20Digests','Drift\x20Analysis','accuweather','catch','LTM.processingStatus','position','python3\x20-m\x20pip\x20install\x20-r\x20\x22','Success:\x20Compressed\x20','klima','Training\x20Data\x20Sets','Deviation','[RECORDER\x20DEBUG]\x20Ignored\x20Event\x20','latitude','uuid-not-found','[RECORDER]\x20Added\x20step\x20to\x20sequence:\x20','0\x204\x20*\x20*\x20*','LTM\x20Sched\x20Error:\x20','08:00','slice','brightness','targetValue','Restoring\x20sensor\x20cache\x20from\x20history\x20(','üìû\x20R√ºckruf\x20anfordern'];a0_0x4c51=function(){return _0x402151;};return a0_0x4c51();}async function saveDailyDigests(_0x4887d2,_0x42a5b5=!![]){const _0x51c4d4=a0_0x1e747b,_0x210e3d=_0x4887d2[_0x51c4d4(0x154)][_0x51c4d4(0x328)]||0x3c;_0x4887d2[_0x51c4d4(0x183)][_0x51c4d4(0x17a)]>_0x210e3d&&_0x4887d2['dailyDigests'][_0x51c4d4(0x212)](0x0,_0x4887d2[_0x51c4d4(0x183)]['length']-_0x210e3d);await _0x4887d2[_0x51c4d4(0x129)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x51c4d4(0x2fd)](_0x4887d2[_0x51c4d4(0x183)]),'ack':!![]});if(_0x42a5b5)await updateBaselineStatus(_0x4887d2);}async function updateAnalysisHistory(_0x3194ad,_0x3b1753){const _0x3371f0=a0_0x1e747b;_0x3194ad[_0x3371f0(0x13b)][_0x3371f0(0x2b6)](_0x3b1753);if(_0x3194ad[_0x3371f0(0x13b)][_0x3371f0(0x17a)]>ANALYSIS_HISTORY_MAX_SIZE)_0x3194ad[_0x3371f0(0x13b)]['pop']();await _0x3194ad[_0x3371f0(0x129)](_0x3371f0(0x1c5),{'val':JSON[_0x3371f0(0x2fd)](_0x3194ad['analysisHistory']),'ack':!![]});}async function updateBaselineStatus(_0x3e2135){const _0x2fc187=a0_0x1e747b;if(!_0x3e2135[_0x2fc187(0x2d6)]){await _0x3e2135[_0x2fc187(0x129)](LTM_DP_BASELINE_STATUS,{'val':_0x2fc187(0x20e),'ack':!![]});return;}const _0x523be=_0x3e2135['dailyDigests'][_0x2fc187(0x17a)]>=(_0x3e2135[_0x2fc187(0x154)][_0x2fc187(0x246)]||0x7)?_0x2fc187(0x184)+_0x3e2135[_0x2fc187(0x183)][_0x2fc187(0x17a)]+'\x20Tage)':_0x2fc187(0x1fc)+_0x3e2135[_0x2fc187(0x183)]['length']+'/'+(_0x3e2135['config'][_0x2fc187(0x246)]||0x7)+')';await _0x3e2135[_0x2fc187(0x129)](LTM_DP_BASELINE_STATUS,{'val':_0x523be,'ack':!![]});}async function initSensorSubscriptions(_0x19faa2){const _0x3e98c5=a0_0x1e747b,_0x530d46=_0x19faa2['config'][_0x3e98c5(0x191)];if(_0x530d46&&_0x530d46[_0x3e98c5(0x17a)]>0x0){_0x19faa2[_0x3e98c5(0x324)][_0x3e98c5(0x1f4)](_0x3e98c5(0x164)+_0x530d46[_0x3e98c5(0x17a)]+'\x20sensors...');for(const _0x211b4d of _0x530d46){if(_0x211b4d['id']){await _0x19faa2[_0x3e98c5(0x1f3)](_0x211b4d['id']);try{const _0x71f399=await _0x19faa2[_0x3e98c5(0x1d2)](_0x211b4d['id']);if(_0x71f399)_0x19faa2['sensorLastValues'][_0x211b4d['id']]=_0x71f399['val'];}catch(_0x17d994){}}}}}async function initPresenceSubscriptions(_0x426b86){const _0x237fe0=a0_0x1e747b,_0x15eb1f=_0x426b86[_0x237fe0(0x154)][_0x237fe0(0x1c6)]||[];if(_0x15eb1f[_0x237fe0(0x17a)]>0x0){_0x426b86[_0x237fe0(0x324)][_0x237fe0(0x1f4)](_0x237fe0(0x164)+_0x15eb1f[_0x237fe0(0x17a)]+'\x20presence\x20devices...');for(const _0x412fc6 of _0x15eb1f){await _0x426b86[_0x237fe0(0x1f3)](_0x412fc6);}try{await checkWifiPresence(_0x426b86);}catch(_0x3ff04d){}}}async function getWeatherContext(_0x3a2f63){const _0x52649e=a0_0x1e747b;try{if(!_0x3a2f63[_0x52649e(0x154)][_0x52649e(0x193)])return _0x52649e(0x28d);let _0x8d9d43='';const _0x4bcc01=_0x3a2f63['config']['weatherInstance'];if(_0x4bcc01)try{if(_0x4bcc01[_0x52649e(0x26d)]('accuweather')){const _0x4936e3=await _0x3a2f63[_0x52649e(0x1d2)](_0x4bcc01+'.Summary.Current');if(_0x4936e3&&_0x4936e3[_0x52649e(0x2c6)])_0x8d9d43=_0x4936e3[_0x52649e(0x2c6)];}else{if(_0x4bcc01[_0x52649e(0x26d)](_0x52649e(0x2e7))){const _0x345f96=await _0x3a2f63[_0x52649e(0x1d2)](_0x4bcc01+_0x52649e(0x31b));if(_0x345f96&&_0x345f96[_0x52649e(0x2c6)])_0x8d9d43=_0x345f96[_0x52649e(0x2c6)];}else{if(_0x4bcc01[_0x52649e(0x26d)](_0x52649e(0x302))){const _0x1b85ed=await _0x3a2f63[_0x52649e(0x1d2)](_0x4bcc01+_0x52649e(0x215));if(_0x1b85ed&&_0x1b85ed['val'])_0x8d9d43=_0x1b85ed[_0x52649e(0x2c6)];}}}}catch(_0x60e40f){}if(!_0x8d9d43){const _0x9341b4=[_0x52649e(0x156),_0x52649e(0x145),'weatherunderground.0','openweathermap.0'];for(const _0x2fd85a of _0x9341b4){try{const _0xf29058=await _0x3a2f63['getForeignObjectAsync'](_0x2fd85a);if(_0xf29058){if(_0x2fd85a[_0x52649e(0x26d)]('accuweather')){const _0x126c2e=await _0x3a2f63[_0x52649e(0x1d2)](_0x2fd85a+'.Summary.Current');if(_0x126c2e&&_0x126c2e['val']){_0x8d9d43=_0x126c2e[_0x52649e(0x2c6)];break;}}}}catch(_0x116f64){}}}return _0x8d9d43?_0x52649e(0x1ff)+_0x8d9d43:'WETTER:\x20Keine\x20Daten\x20gefunden';}catch(_0x558ae4){return _0x52649e(0x24b)+_0x558ae4['message'];}}async function getCalendarContext(_0x36979d){const _0x51c2b6=a0_0x1e747b;try{if(!_0x36979d['config'][_0x51c2b6(0x137)])return'Kalender:\x20Deaktiviert';let _0x44b47a=_0x36979d['config'][_0x51c2b6(0x307)]||_0x51c2b6(0x192),_0x404a85=_0x36979d[_0x51c2b6(0x154)]['calendarSelection']||[];if(typeof _0x404a85==='string')_0x404a85=_0x404a85['split'](',');try{const _0x4980ea=await _0x36979d[_0x51c2b6(0x1d2)](_0x44b47a+'.data.table');if(_0x4980ea&&_0x4980ea[_0x51c2b6(0x2c6)]){let _0x418f52=tryParse(_0x4980ea[_0x51c2b6(0x2c6)]);if(_0x418f52&&Array[_0x51c2b6(0x16b)](_0x418f52)){if(_0x404a85[_0x51c2b6(0x17a)]>0x0)_0x418f52=_0x418f52[_0x51c2b6(0x1cc)](_0x4a60b5=>_0x404a85[_0x51c2b6(0x26d)](_0x4a60b5['_calName']||''));else return'KALENDER:\x20Keine\x20Kalender\x20ausgew√§hlt\x20(Bitte\x20in\x20Settings\x20konfigurieren)';if(_0x418f52[_0x51c2b6(0x17a)]>0x0){const _0xd852b6=_0x418f52['slice'](0x0,0x3)['map'](_0x5bcb9b=>{const _0x1bf269=_0x51c2b6;let _0x201397=_0x5bcb9b[_0x1bf269(0x229)];if(_0x5bcb9b[_0x1bf269(0x2ec)])_0x201397+='\x20'+_0x5bcb9b[_0x1bf269(0x2ec)];return _0x201397+':\x20'+_0x5bcb9b['event']+'\x20('+_0x5bcb9b[_0x1bf269(0x317)]+')';});return'KALENDER:\x20'+_0xd852b6['join'](_0x51c2b6(0x147));}else return'KALENDER:\x20Keine\x20relevanten\x20Termine';}}}catch(_0x326a1d){_0x36979d[_0x51c2b6(0x324)]['warn'](_0x51c2b6(0x2df)+_0x326a1d[_0x51c2b6(0x26b)]);}return _0x51c2b6(0x22a);}catch(_0x435445){return _0x51c2b6(0x1bb)+_0x435445[_0x51c2b6(0x26b)];}}async function getCalendarNames(_0x5db61c,_0x1e8aeb){const _0x128e65=a0_0x1e747b;try{const _0x511890=await _0x5db61c[_0x128e65(0x1d2)](_0x1e8aeb+_0x128e65(0x2af));if(_0x511890&&_0x511890[_0x128e65(0x2c6)]){const _0x8e7ca7=tryParse(_0x511890[_0x128e65(0x2c6)]);if(_0x8e7ca7&&Array[_0x128e65(0x16b)](_0x8e7ca7)){const _0x171ee5=[...new Set(_0x8e7ca7['map'](_0x112d20=>_0x112d20[_0x128e65(0x317)])['filter'](Boolean))];return _0x171ee5[_0x128e65(0x21b)]();}}return[];}catch(_0x5cc891){return _0x5db61c['log']['error']('getCalendarNames\x20Error:\x20'+_0x5cc891[_0x128e65(0x26b)]),[];}}async function checkWifiPresence(_0x4335ac){const _0x47acfa=a0_0x1e747b;try{const _0x2f56c8=_0x4335ac[_0x47acfa(0x154)][_0x47acfa(0x1c6)]||[];let _0x2378e8=![];const _0x500e4d=[];for(const _0x234401 of _0x2f56c8){try{const _0x2ab1be=await _0x4335ac[_0x47acfa(0x1d2)](_0x234401);if(_0x2ab1be&&(_0x2ab1be[_0x47acfa(0x2c6)]===!![]||_0x2ab1be['val']==='online'||_0x2ab1be[_0x47acfa(0x2c6)]===0x1)){_0x2378e8=!![];const _0x5661db=await _0x4335ac['getForeignObjectAsync'](_0x234401);let _0x2c3dad=_0x234401;_0x5661db&&_0x5661db[_0x47acfa(0x17d)]&&_0x5661db[_0x47acfa(0x17d)][_0x47acfa(0x254)]&&(_0x2c3dad=typeof _0x5661db[_0x47acfa(0x17d)]['name']===_0x47acfa(0x251)?_0x5661db[_0x47acfa(0x17d)]['name']['de']||_0x5661db['common']['name']['en']:_0x5661db[_0x47acfa(0x17d)][_0x47acfa(0x254)]),_0x500e4d['push'](_0x2c3dad);}}catch(_0x20094e){}}return await _0x4335ac[_0x47acfa(0x129)](_0x47acfa(0x286),{'val':_0x500e4d['join'](',\x20'),'ack':!![]}),_0x2378e8&&(_0x4335ac[_0x47acfa(0x290)]&&(_0x4335ac[_0x47acfa(0x324)]['info'](_0x47acfa(0x24a)),abortExitTimer(_0x4335ac)),!_0x4335ac[_0x47acfa(0x2bb)]&&_0x4335ac['currentSystemMode']===SYSTEM_MODES[_0x47acfa(0x314)]&&await setPresence(_0x4335ac,!![])),_0x2378e8;}catch(_0x31c39c){return _0x4335ac[_0x47acfa(0x324)][_0x47acfa(0x285)]('Error\x20checking\x20WiFi:\x20'+_0x31c39c[_0x47acfa(0x26b)]),![];}}function startExitTimer(_0x5e6c09){const _0x492849=a0_0x1e747b;abortExitTimer(_0x5e6c09),_0x5e6c09[_0x492849(0x1fd)]=!![],_0x5e6c09[_0x492849(0x241)]=setTimeout(()=>{const _0x2ba21d=_0x492849;_0x5e6c09[_0x2ba21d(0x1fd)]=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),_0x5e6c09[_0x492849(0x290)]=setTimeout(()=>{setPresence(_0x5e6c09,![]),_0x5e6c09['exitTimer']=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}function abortExitTimer(_0x4ab22f){const _0x3ac963=a0_0x1e747b;if(_0x4ab22f[_0x3ac963(0x290)])clearTimeout(_0x4ab22f[_0x3ac963(0x290)]);if(_0x4ab22f['exitGraceTimer'])clearTimeout(_0x4ab22f[_0x3ac963(0x241)]);_0x4ab22f[_0x3ac963(0x290)]=null,_0x4ab22f[_0x3ac963(0x241)]=null,_0x4ab22f[_0x3ac963(0x1fd)]=![];}async function setPresence(_0x52b1c4,_0x5b3556){const _0x234d69=a0_0x1e747b;if(_0x52b1c4[_0x234d69(0x2bb)]===_0x5b3556)return;_0x52b1c4[_0x234d69(0x2bb)]=_0x5b3556,await _0x52b1c4[_0x234d69(0x129)](_0x234d69(0x252),{'val':_0x5b3556,'ack':!![]});}async function saveFeedback(_0x5e6895,_0x4da2b4){const _0x1e51e1=a0_0x1e747b;_0x5e6895[_0x1e51e1(0x324)]['info']('Feedback\x20saved:\x20'+JSON['stringify'](_0x4da2b4));}async function runBaselineDriftAnalysis(_0x4f5b1b){const _0x525b31=a0_0x1e747b;if(!_0x4f5b1b[_0x525b31(0x2d6)]||!_0x4f5b1b[_0x525b31(0x209)])return;const _0x14e410=_0x4f5b1b['config'][_0x525b31(0x279)]||0xe;if(_0x4f5b1b[_0x525b31(0x183)][_0x525b31(0x17a)]<_0x14e410+(_0x4f5b1b[_0x525b31(0x154)]['minDaysForBaseline']||0x7)){await _0x4f5b1b[_0x525b31(0x129)](LTM_DP_DRIFT_STATUS,{'val':_0x525b31(0x1d9),'ack':!![]});return;}const _0x345497=_0x4f5b1b[_0x525b31(0x183)][_0x525b31(0x1aa)](-_0x14e410),_0x2b99a8=_0x4f5b1b[_0x525b31(0x183)][_0x525b31(0x1aa)](0x0,_0x4f5b1b[_0x525b31(0x183)][_0x525b31(0x17a)]-_0x14e410),_0x16faa5=_0x525b31(0x2d8)+JSON[_0x525b31(0x2fd)](_0x2b99a8)+_0x525b31(0x160)+JSON[_0x525b31(0x2fd)](_0x345497);try{const _0xafebb0=await _0x4f5b1b[_0x525b31(0x209)][_0x525b31(0x1e8)](_0x16faa5),_0x5d72f6=JSON['parse'](_0xafebb0[_0x525b31(0x189)][_0x525b31(0x26f)]()[_0x525b31(0x217)](/```json|```/g,'')[_0x525b31(0x2f2)]());_0x5d72f6[_0x525b31(0x2f8)]&&(await _0x4f5b1b[_0x525b31(0x129)](LTM_DP_DRIFT_STATUS,{'val':_0x5d72f6[_0x525b31(0x2f8)],'ack':!![]}),await _0x4f5b1b[_0x525b31(0x129)](LTM_DP_DRIFT_DETAILS,{'val':_0x5d72f6[_0x525b31(0x12f)],'ack':!![]}),await _0x4f5b1b[_0x525b31(0x129)](LTM_DP_DRIFT_LAST_CHECK,{'val':Date['now'](),'ack':!![]}));}catch(_0x11549c){}}function setupLtmScheduler(_0x2b6627){const _0x1ebb43=a0_0x1e747b;try{if(_0x2b6627['ltmJob'])_0x2b6627[_0x1ebb43(0x18d)][_0x1ebb43(0x2f1)]();if(!_0x2b6627[_0x1ebb43(0x2d6)]){_0x2b6627[_0x1ebb43(0x129)](LTM_DP_STATUS,{'val':_0x1ebb43(0x20e),'ack':!![]});return;}_0x2b6627[_0x1ebb43(0x18d)]=schedule[_0x1ebb43(0x14b)](LTM_SCHEDULE,()=>createDailyDigest(_0x2b6627));}catch(_0x14c338){_0x2b6627['log'][_0x1ebb43(0x285)](_0x1ebb43(0x1a8)+_0x14c338[_0x1ebb43(0x26b)]);}}function setupModeResetScheduler(_0x26820b){const _0x11bc41=a0_0x1e747b;try{if(_0x26820b[_0x11bc41(0x242)])_0x26820b['modeResetJob'][_0x11bc41(0x2f1)]();_0x26820b[_0x11bc41(0x242)]=schedule[_0x11bc41(0x14b)](MODE_RESET_SCHEDULE,async()=>{const _0x2b8723=_0x11bc41;await loadSystemMode(_0x26820b),AUTO_RESET_MODES['includes'](_0x26820b[_0x2b8723(0x139)])&&await _0x26820b[_0x2b8723(0x129)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x2b8723(0x314)],'ack':![]});});}catch(_0x1848bc){_0x26820b[_0x11bc41(0x324)][_0x11bc41(0x285)]('Reset\x20Sched\x20Error:\x20'+_0x1848bc[_0x11bc41(0x26b)]);}}function setupDriftAnalysisScheduler(_0x107781){const _0xd04738=a0_0x1e747b;try{if(_0x107781[_0xd04738(0x269)])clearInterval(_0x107781[_0xd04738(0x269)]);if(!_0x107781['isProVersion'])return;_0x107781[_0xd04738(0x269)]=setInterval(()=>runBaselineDriftAnalysis(_0x107781),(_0x107781[_0xd04738(0x154)][_0xd04738(0x2f9)]||0x18)*0x36ee80),setTimeout(()=>runBaselineDriftAnalysis(_0x107781),0x1388);}catch(_0x183ed3){_0x107781[_0xd04738(0x324)][_0xd04738(0x285)](_0xd04738(0x1b1)+_0x183ed3[_0xd04738(0x26b)]);}}function setupBriefingScheduler(_0x4cc3c2){const _0x2e7dc1=a0_0x1e747b;try{if(_0x4cc3c2['briefingJob'])_0x4cc3c2[_0x2e7dc1(0x31d)]['cancel']();if(!_0x4cc3c2['config'][_0x2e7dc1(0x28a)])return;const _0x18af69=(_0x4cc3c2[_0x2e7dc1(0x154)][_0x2e7dc1(0x1d7)]||_0x2e7dc1(0x1a9))[_0x2e7dc1(0x263)](':'),_0x83c09e=parseInt(_0x18af69[0x0])||0x8,_0xea5111=parseInt(_0x18af69[0x1])||0x0,_0x593abe=_0xea5111+'\x20'+_0x83c09e+_0x2e7dc1(0x150);_0x4cc3c2[_0x2e7dc1(0x324)][_0x2e7dc1(0x1f4)](_0x2e7dc1(0x31f)+_0x83c09e+':'+(_0xea5111<0xa?'0'+_0xea5111:_0xea5111)),_0x4cc3c2[_0x2e7dc1(0x31d)]=schedule[_0x2e7dc1(0x14b)](_0x593abe,()=>{sendMorningBriefing(_0x4cc3c2);});}catch(_0x3c8f46){_0x4cc3c2[_0x2e7dc1(0x324)][_0x2e7dc1(0x285)]('Briefing\x20Sched\x20Error:\x20'+_0x3c8f46['message']);}}async function sendNotification(_0x4760ad,_0x59cfe7,_0x1ba1a5=![],_0x4d0897=![]){const _0x1d5538=a0_0x1e747b;_0x4760ad['log'][_0x1d5538(0x1f4)]((_0x1ba1a5?'[TEST]\x20':'')+_0x1d5538(0x25b)+_0x59cfe7+'\x22');const _0x2148e2=_0x4760ad[_0x1d5538(0x154)];let _0x3d6205=0x0;if(_0x2148e2[_0x1d5538(0x210)]){let _0x11ecd6={};(_0x59cfe7[_0x1d5538(0x26d)](_0x1d5538(0x2a7))||_0x4d0897)&&(_0x11ecd6={'reply_markup':{'inline_keyboard':[[{'text':_0x1d5538(0x173),'callback_data':_0x1d5538(0x2c4)}],[{'text':_0x1d5538(0x1ae),'callback_data':_0x1d5538(0x2f5)}]]}}),await _0x4760ad[_0x1d5538(0x17e)](_0x2148e2[_0x1d5538(0x281)],_0x1d5538(0x237),{'text':_0x59cfe7,'user':_0x2148e2[_0x1d5538(0x2db)],..._0x11ecd6}),_0x3d6205++;}if(_0x2148e2[_0x1d5538(0x1c1)]){let _0x1269c6={'message':_0x59cfe7,'title':_0x4d0897?_0x1d5538(0x1c2):_0x1d5538(0x283),'priority':_0x4d0897?0x2:0x1,'device':_0x2148e2[_0x1d5538(0x181)]};_0x4d0897&&(_0x1269c6[_0x1d5538(0x16d)]=0x1e,_0x1269c6[_0x1d5538(0x32a)]=0xe10,_0x1269c6[_0x1d5538(0x22d)]=_0x1d5538(0x27f)),await _0x4760ad[_0x1d5538(0x17e)](_0x2148e2[_0x1d5538(0x1d1)],_0x1d5538(0x237),_0x1269c6),_0x3d6205++;}return _0x2148e2[_0x1d5538(0x318)]&&(await _0x4760ad[_0x1d5538(0x17e)](_0x2148e2[_0x1d5538(0x306)],_0x1d5538(0x237),{'text':_0x59cfe7,'to':_0x2148e2['notifyEmailRecipient']}),_0x3d6205++),_0x3d6205;}async function setupTelegramListener(_0x2ebd87){const _0x7b0f8f=a0_0x1e747b,_0xd8194e=_0x2ebd87[_0x7b0f8f(0x154)][_0x7b0f8f(0x281)];_0x2ebd87[_0x7b0f8f(0x154)][_0x7b0f8f(0x210)]&&_0xd8194e&&(_0x2ebd87[_0x7b0f8f(0x324)][_0x7b0f8f(0x1f4)](_0x7b0f8f(0x30f)+_0xd8194e+_0x7b0f8f(0x219)),await _0x2ebd87['subscribeForeignStatesAsync'](_0xd8194e+_0x7b0f8f(0x2ce)));}async function handleTelegramResponse(_0x2a5bf8,_0x50f1f4){const _0x58a43e=a0_0x1e747b;let _0x59a5c5=_0x50f1f4;_0x50f1f4['startsWith']('[')&&(_0x59a5c5=_0x50f1f4[_0x58a43e(0x2c9)](_0x50f1f4[_0x58a43e(0x250)](']')+0x1));if(_0x59a5c5===_0x58a43e(0x2c4))_0x2a5bf8[_0x58a43e(0x324)][_0x58a43e(0x1f4)]('‚úÖ\x20User\x20confirmed\x20ALARM\x20via\x20Telegram.\x20Resetting\x20system.'),await _0x2a5bf8['setStateAsync'](_0x58a43e(0x264),{'val':![],'ack':!![]}),await _0x2a5bf8[_0x58a43e(0x129)](_0x58a43e(0x24c),{'val':_0x58a43e(0x2b0),'ack':!![]}),_0x2a5bf8[_0x58a43e(0x29b)]=![],sendNotification(_0x2a5bf8,'‚úÖ\x20Alarm\x20quittiert.\x20System\x20normal.',![]);else _0x59a5c5==='COGNI_REQUEST_CALL'&&(_0x2a5bf8['log'][_0x58a43e(0x271)](_0x58a43e(0x1b2)),sendNotification(_0x2a5bf8,_0x58a43e(0x1b7),![],!![]));}async function runAutopilot(_0x3d8f08){const _0xee2d42=a0_0x1e747b,_0x41ee32=_0x3d8f08[_0xee2d42(0x154)][_0xee2d42(0x2c3)],_0x529895=_0x3d8f08[_0xee2d42(0x23a)][_0xee2d42(0x17a)]>0x0?_0x3d8f08[_0xee2d42(0x23a)][0x0][_0xee2d42(0x162)]:Date[_0xee2d42(0x28b)](),_0x3f9c83=(Date['now']()-_0x529895)/(0x3e8*0x3c*0x3c);let _0x38eba1='';_0x3d8f08['config'][_0xee2d42(0x20c)]&&_0x3d8f08['currentSystemMode']===SYSTEM_MODES[_0xee2d42(0x314)]&&_0x3d8f08[_0xee2d42(0x2bb)]&&(_0x3f9c83>_0x41ee32&&(_0x38eba1=_0xee2d42(0x204)+_0x3f9c83[_0xee2d42(0x2e9)](0x1)+_0xee2d42(0x155))),runGeminiAnalysis(_0x3d8f08,_0x38eba1)[_0xee2d42(0x19b)](_0x1ec895=>_0x3d8f08[_0xee2d42(0x324)][_0xee2d42(0x285)](_0x1ec895));}async function createDailyDigest(_0x3673a4){const _0x20fc53=a0_0x1e747b;if(!_0x3673a4[_0x20fc53(0x2d6)])return;await _0x3673a4[_0x20fc53(0x129)](LTM_DP_STATUS,{'val':_0x20fc53(0x1cb)+new Date()['toLocaleString'](),'ack':!![]});if(!_0x3673a4[_0x20fc53(0x209)]||_0x3673a4[_0x20fc53(0x2c1)][_0x20fc53(0x17a)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x3673a4[_0x20fc53(0x129)](LTM_DP_STATUS,{'val':_0x20fc53(0x2e3),'ack':!![]});return;}const _0x58d23d=JSON['parse'](JSON[_0x20fc53(0x2fd)](_0x3673a4['rawEventLog'])),_0x550a8d=_0x58d23d[_0x20fc53(0x17a)],_0x1534fe='ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a'+JSON[_0x20fc53(0x2fd)](_0x58d23d);try{const _0x2a8335=await _0x3673a4[_0x20fc53(0x209)][_0x20fc53(0x1e8)](_0x1534fe),_0x3895eb=JSON[_0x20fc53(0x316)](_0x2a8335['response'][_0x20fc53(0x26f)]()[_0x20fc53(0x217)](/```json|```/g,'')[_0x20fc53(0x2f2)]());_0x3895eb[_0x20fc53(0x203)]&&(_0x3673a4['dailyDigests'][_0x20fc53(0x25d)]({'timestamp':new Date()[_0x20fc53(0x2a3)](),'eventCount':_0x550a8d,'summary':_0x3895eb[_0x20fc53(0x203)],'activityLevel':_0x3895eb[_0x20fc53(0x27a)],'systemMode':_0x3673a4[_0x20fc53(0x139)]}),await saveDailyDigests(_0x3673a4),_0x3673a4[_0x20fc53(0x2c1)]=[],await saveRawEventLog(_0x3673a4),await _0x3673a4[_0x20fc53(0x129)](LTM_DP_STATUS,{'val':_0x20fc53(0x19f)+_0x550a8d+_0x20fc53(0x309),'ack':!![]}),runPythonHealthCheck(_0x3673a4));}catch(_0x535d5a){await _0x3673a4[_0x20fc53(0x129)](LTM_DP_STATUS,{'val':_0x20fc53(0x186)+_0x535d5a[_0x20fc53(0x26b)],'ack':!![]});}}async function sendMorningBriefing(_0x11e436){const _0xdcfc5e=a0_0x1e747b;if(!_0x11e436['geminiModel'])return;_0x11e436[_0xdcfc5e(0x324)][_0xdcfc5e(0x1f4)](_0xdcfc5e(0x222));const _0x5f16d5=_0x11e436['dailyDigests'][_0xdcfc5e(0x17a)]>0x0?_0x11e436[_0xdcfc5e(0x183)][_0x11e436[_0xdcfc5e(0x183)][_0xdcfc5e(0x17a)]-0x1]:null,_0x43ea95=_0x5f16d5&&_0x5f16d5['health']?_0x5f16d5['health'][_0xdcfc5e(0x310)]:_0xdcfc5e(0x170),_0x149f85=new Date();_0x149f85[_0xdcfc5e(0x2ab)](0x4,0x0,0x0,0x0);const _0x1831cb=_0x11e436[_0xdcfc5e(0x23a)]['filter'](_0x336556=>new Date(_0x336556[_0xdcfc5e(0x162)])>_0x149f85),_0x1c2ff4=PERSONA_MAPPING[_0x11e436[_0xdcfc5e(0x154)][_0xdcfc5e(0x25e)]||_0xdcfc5e(0x1c0)],_0x54e7e5=_0x11e436[_0xdcfc5e(0x154)]['livingContext']||'',_0x43d5ea=await getWeatherContext(_0x11e436),_0x354b0e=await getCalendarContext(_0x11e436),_0x3001d3=_0xdcfc5e(0x2e6)+_0x1c2ff4+_0xdcfc5e(0x1db)+_0x54e7e5+_0xdcfc5e(0x159)+_0x43d5ea+'\x20'+_0x354b0e+'.\x20DATEN:\x20Schlaf\x20'+_0x43ea95+_0xdcfc5e(0x2eb)+JSON[_0xdcfc5e(0x2fd)](_0x1831cb[_0xdcfc5e(0x1aa)](0x0,0xa))+_0xdcfc5e(0x2d3);try{const _0x366285=await _0x11e436[_0xdcfc5e(0x209)][_0xdcfc5e(0x1e8)](_0x3001d3),_0x170fbc=_0xdcfc5e(0x30b)+_0x366285[_0xdcfc5e(0x189)][_0xdcfc5e(0x26f)]()[_0xdcfc5e(0x2f2)]();sendNotification(_0x11e436,_0x170fbc),_0x11e436[_0xdcfc5e(0x324)]['info']('Morning\x20Briefing\x20sent.');}catch(_0x2d9ff4){_0x11e436[_0xdcfc5e(0x324)][_0xdcfc5e(0x285)](_0xdcfc5e(0x2bf)+_0x2d9ff4['message']);}}async function scanForDevices(_0x52c6ca,_0x59f8a8){const _0x1fec92=a0_0x1e747b;_0x52c6ca[_0x1fec92(0x324)]['info']('Scanning\x20for\x20devices\x20(V8:\x20Whitelist\x20Priority)...');const _0x561659=[],_0xf344c5=await _0x52c6ca[_0x1fec92(0x321)]('*'),_0xcea1f0=await _0x52c6ca[_0x1fec92(0x321)]('enum.functions.*',_0x1fec92(0x29f)),_0xd2ab4b=await _0x52c6ca[_0x1fec92(0x321)](_0x1fec92(0x220),_0x1fec92(0x29f)),_0x29e52e={};if(_0xcea1f0)for(const _0x26819c in _0xcea1f0){const _0x34a50a=_0xcea1f0[_0x26819c][_0x1fec92(0x17d)]['members']||[];_0x34a50a[_0x1fec92(0x218)](_0x1d7886=>{const _0x17662d=_0x1fec92;if(!_0x29e52e[_0x1d7886])_0x29e52e[_0x1d7886]=[];_0x29e52e[_0x1d7886][_0x17662d(0x25d)](_0x26819c);});}const _0x5948c6={};if(_0xd2ab4b)for(const _0xe4874a in _0xd2ab4b){const _0x24f7b6=_0xd2ab4b[_0xe4874a][_0x1fec92(0x17d)][_0x1fec92(0x22e)]||[],_0x2b5b3d=typeof _0xd2ab4b[_0xe4874a][_0x1fec92(0x17d)]['name']===_0x1fec92(0x251)?_0xd2ab4b[_0xe4874a][_0x1fec92(0x17d)][_0x1fec92(0x254)]['de']:_0xd2ab4b[_0xe4874a][_0x1fec92(0x17d)][_0x1fec92(0x254)];_0x24f7b6[_0x1fec92(0x218)](_0x35942e=>_0x5948c6[_0x35942e]=_0x2b5b3d);}const _0x435620=_0x59f8a8[_0x1fec92(0x297)]||[],_0x29301f=_0x59f8a8['motion']!==![],_0x5de129=_0x59f8a8['doors']!==![],_0x53490a=_0x59f8a8[_0x1fec92(0x157)]!==![],_0x171195=_0x59f8a8[_0x1fec92(0x30c)]===!![],_0x1f9463=_0x59f8a8[_0x1fec92(0x1f7)]===!![];for(const _0x309515 in _0xf344c5){const _0x1c3cc9=_0xf344c5[_0x309515];if(_0x1c3cc9[_0x1fec92(0x238)]!=='state'||!_0x1c3cc9['common'])continue;if(ADAPTER_BLACKLIST[_0x1fec92(0x176)](_0x18c92d=>_0x309515[_0x1fec92(0x2ed)](_0x18c92d))&&!_0x1f9463)continue;const _0x101b2f=(_0x1c3cc9[_0x1fec92(0x17d)][_0x1fec92(0x1b5)]||'')[_0x1fec92(0x234)]();let _0x688acf=(typeof _0x1c3cc9[_0x1fec92(0x17d)][_0x1fec92(0x254)]==='object'?_0x1c3cc9[_0x1fec92(0x17d)][_0x1fec92(0x254)]['de']:_0x1c3cc9[_0x1fec92(0x17d)][_0x1fec92(0x254)])||_0x309515;const _0x46ec23=_0x688acf[_0x1fec92(0x234)]();let _0x15a0e2=![],_0x465ea1=![];if(_0x435620[_0x1fec92(0x17a)]>0x0){const _0x597828=_0x29e52e[_0x309515]||[],_0x5a89b9=_0x309515['split']('.')[_0x1fec92(0x1aa)](0x0,-0x1)[_0x1fec92(0x289)]('.'),_0x2eca02=_0x29e52e[_0x5a89b9]||[];(_0x597828[_0x1fec92(0x176)](_0x2dcdf5=>_0x435620['includes'](_0x2dcdf5))||_0x2eca02[_0x1fec92(0x176)](_0x3fb90a=>_0x435620['includes'](_0x3fb90a)))&&(_0x15a0e2=!![],_0x465ea1=!![]);}if(!_0x15a0e2&&!_0x1f9463){if(HARD_IGNORE_TERMS[_0x1fec92(0x176)](_0x37d6a8=>_0x309515[_0x1fec92(0x26d)](_0x37d6a8)||_0x46ec23[_0x1fec92(0x26d)](_0x37d6a8[_0x1fec92(0x234)]())))continue;}if(BAD_NAMES[_0x1fec92(0x176)](_0x2743c7=>_0x46ec23===_0x2743c7||_0x46ec23[_0x1fec92(0x196)]('.'+_0x2743c7))){const _0x28a57d=_0x309515[_0x1fec92(0x263)]('.');if(_0x28a57d[_0x1fec92(0x17a)]>0x2){const _0x1f5f62=_0x28a57d[_0x1fec92(0x1aa)](0x0,-0x1)[_0x1fec92(0x289)]('.'),_0x1bf2e5=_0xf344c5[_0x1f5f62];if(_0x1bf2e5&&_0x1bf2e5[_0x1fec92(0x17d)]&&_0x1bf2e5[_0x1fec92(0x17d)]['name']){const _0x45f9ab=typeof _0x1bf2e5['common'][_0x1fec92(0x254)]===_0x1fec92(0x251)?_0x1bf2e5['common'][_0x1fec92(0x254)]['de']:_0x1bf2e5[_0x1fec92(0x17d)][_0x1fec92(0x254)];_0x45f9ab&&!_0x688acf[_0x1fec92(0x26d)](_0x45f9ab)&&(_0x688acf=_0x45f9ab+'\x20'+_0x688acf);}}}let _0x7d9677='';if(_0x29301f&&(_0x101b2f[_0x1fec92(0x26d)](_0x1fec92(0x27c))||_0x101b2f[_0x1fec92(0x26d)](_0x1fec92(0x256))||_0x46ec23[_0x1fec92(0x26d)](_0x1fec92(0x2f6))||_0x46ec23[_0x1fec92(0x26d)]('pr√§senz')))_0x7d9677=_0x1fec92(0x27c);else{if(!_0x7d9677&&_0x5de129&&(_0x101b2f['includes'](_0x1fec92(0x1fe))||_0x101b2f['includes'](_0x1fec92(0x27d))||_0x101b2f[_0x1fec92(0x26d)](_0x1fec92(0x1e0))||_0x101b2f[_0x1fec92(0x26d)](_0x1fec92(0x2ad))||_0x101b2f[_0x1fec92(0x26d)](_0x1fec92(0x1e1))||_0x46ec23[_0x1fec92(0x26d)](_0x1fec92(0x2f0))||_0x46ec23[_0x1fec92(0x26d)](_0x1fec92(0x13e))||_0x46ec23[_0x1fec92(0x26d)]('rollladen')))_0x7d9677=_0x1fec92(0x1fe);else{if(!_0x7d9677&&_0x53490a&&(_0x101b2f[_0x1fec92(0x26d)](_0x1fec92(0x208))||_0x101b2f['includes'](_0x1fec92(0x277))||_0x101b2f['includes']('dimmer')||_0x46ec23[_0x1fec92(0x26d)](_0x1fec92(0x273))||_0x46ec23[_0x1fec92(0x26d)](_0x1fec92(0x257))||_0x46ec23[_0x1fec92(0x26d)](_0x1fec92(0x1e3)))){if(_0x1c3cc9['common'][_0x1fec92(0x188)]||_0x101b2f[_0x1fec92(0x26d)](_0x1fec92(0x224)))_0x7d9677=_0x1fec92(0x208);}else{if(!_0x7d9677&&_0x171195&&(_0x101b2f[_0x1fec92(0x26d)](_0x1fec92(0x30c))||_0x101b2f[_0x1fec92(0x26d)](_0x1fec92(0x2d9))||_0x101b2f[_0x1fec92(0x26d)]('thermostat')||_0x46ec23[_0x1fec92(0x26d)](_0x1fec92(0x308))||_0x46ec23[_0x1fec92(0x26d)](_0x1fec92(0x1a0))||_0x46ec23[_0x1fec92(0x26d)](_0x1fec92(0x2fa))))_0x7d9677=_0x1fec92(0x30c);else{if(!_0x7d9677&&_0x465ea1)_0x7d9677='custom';}}}}if(_0x7d9677){let _0x2dc5eb=_0x5948c6[_0x309515]||'';if(!_0x2dc5eb){let _0x3cf0d1=_0x309515;for(let _0x1762c6=0x0;_0x1762c6<0x3;_0x1762c6++){const _0x814e59=_0x3cf0d1[_0x1fec92(0x2ee)]('.');if(_0x814e59===-0x1)break;_0x3cf0d1=_0x3cf0d1[_0x1fec92(0x2c9)](0x0,_0x814e59);if(_0x5948c6[_0x3cf0d1]){_0x2dc5eb=_0x5948c6[_0x3cf0d1];break;}}}_0x561659[_0x1fec92(0x25d)]({'id':_0x309515,'name':_0x688acf,'location':_0x2dc5eb,'type':_0x7d9677,'logDuplicates':_0x7d9677===_0x1fec92(0x27c),'isExit':![],'_score':_0x2dc5eb?0x50:_0x7d9677===_0x1fec92(0x2e4)?0x5a:0x28});}}return _0x561659[_0x1fec92(0x21b)]((_0x307b05,_0x1cd509)=>_0x1cd509[_0x1fec92(0x1e6)]-_0x307b05['_score']),_0x561659;}async function executeAutomationAction(_0xf3beb3){const _0x1d4265=a0_0x1e747b;try{const _0x3f92ea=await _0xf3beb3['getStateAsync'](_0x1d4265(0x216)),_0x80631=await _0xf3beb3[_0x1d4265(0x1d0)](_0x1d4265(0x16f));if(_0x3f92ea&&_0x3f92ea['val']&&_0x80631){const _0x206b04=_0x3f92ea[_0x1d4265(0x2c6)];let _0x124e0c=_0x80631['val'];try{_0x124e0c=JSON[_0x1d4265(0x316)](_0x124e0c);}catch(_0x33b216){}_0xf3beb3[_0x1d4265(0x324)][_0x1d4265(0x1f4)](_0x1d4265(0x1e9)+_0x206b04+'\x20=\x20'+_0x124e0c),await _0xf3beb3[_0x1d4265(0x2fb)](_0x206b04,_0x124e0c);}else _0xf3beb3[_0x1d4265(0x324)][_0x1d4265(0x271)](_0x1d4265(0x141));}catch(_0x1803f8){_0xf3beb3[_0x1d4265(0x324)][_0x1d4265(0x285)](_0x1d4265(0x1fb)+_0x1803f8[_0x1d4265(0x26b)]);}}function tryParse(_0x17f811){const _0x1ffe90=a0_0x1e747b;try{return JSON[_0x1ffe90(0x316)](_0x17f811);}catch(_0x4d956b){return null;}}async function recordSequence(_0x6c249c,_0x596026){const _0x34375a=a0_0x1e747b,_0x527c8b=(_0x596026[_0x34375a(0x238)]||'')['toLowerCase'](),_0x46da99=[_0x34375a(0x27c),_0x34375a(0x2f6),_0x34375a(0x201),_0x34375a(0x197),_0x34375a(0x256),_0x34375a(0x1fe),_0x34375a(0x13e),_0x34375a(0x27d),_0x34375a(0x2f0),_0x34375a(0x18c),_0x34375a(0x13f),_0x34375a(0x208),_0x34375a(0x273),_0x34375a(0x277),_0x34375a(0x1e3),_0x34375a(0x305),_0x34375a(0x257)];if(!_0x46da99['some'](_0x2f5335=>_0x527c8b[_0x34375a(0x26d)](_0x2f5335))){_0x6c249c[_0x34375a(0x324)][_0x34375a(0x236)](_0x34375a(0x1a3)+_0x596026['id']+'\x20(Type\x20\x27'+_0x596026[_0x34375a(0x238)]+'\x27\x20not\x20in\x20allowed\x20list)');return;}if(!_0x596026['value']){_0x6c249c[_0x34375a(0x324)]['debug'](_0x34375a(0x1a3)+_0x596026['id']+_0x34375a(0x21e)+_0x596026['value']+')');return;}_0x6c249c[_0x34375a(0x324)]['debug'](_0x34375a(0x13c)+_0x596026['id']+'\x20('+_0x596026[_0x34375a(0x2e0)]+')');if(sequenceTimer)clearTimeout(sequenceTimer);const _0x80ff34={'loc':_0x596026[_0x34375a(0x2e0)]||'Unknown','id':_0x596026['id'],'ts':Date[_0x34375a(0x28b)]()};activeSequence[_0x34375a(0x25d)](_0x80ff34),_0x6c249c[_0x34375a(0x324)]['debug'](_0x34375a(0x1a6)+_0x80ff34[_0x34375a(0x1dc)]+'\x20(Length:\x20'+activeSequence['length']+')'),sequenceTimer=setTimeout(async()=>{const _0xada260=_0x34375a;activeSequence[_0xada260(0x17a)]>0x1?await saveCompletedSequence(_0x6c249c):(_0x6c249c[_0xada260(0x324)][_0xada260(0x236)](_0xada260(0x2b2)+activeSequence[_0xada260(0x17a)]+')'),activeSequence=[]);},SEQUENCE_TIMEOUT_MS);}async function saveCompletedSequence(_0x49c464){const _0x522fe2=a0_0x1e747b;try{_0x49c464[_0x522fe2(0x324)]['info'](_0x522fe2(0x2c0)+activeSequence[_0x522fe2(0x17a)]+_0x522fe2(0x2a8));const _0x192799=await _0x49c464[_0x522fe2(0x1d0)](_0x522fe2(0x16a));let _0x574676=[];if(_0x192799&&_0x192799[_0x522fe2(0x2c6)])try{_0x574676=JSON['parse'](_0x192799[_0x522fe2(0x2c6)]);}catch(_0x5b005d){}const _0x1f0ee7=activeSequence[0x0]['ts'],_0x328b90=activeSequence[_0x522fe2(0x2d1)](_0xb803c1=>({'loc':_0xb803c1['loc'],'t_delta':Math[_0x522fe2(0x2e8)]((_0xb803c1['ts']-_0x1f0ee7)/0x3e8)})),_0x546553={'timestamp':new Date(_0x1f0ee7)[_0x522fe2(0x2a3)](),'steps':_0x328b90,'duration':Math['round']((activeSequence[activeSequence[_0x522fe2(0x17a)]-0x1]['ts']-_0x1f0ee7)/0x3e8),'daytime':new Date(_0x1f0ee7)['getHours']()};_0x574676[_0x522fe2(0x25d)](_0x546553),_0x574676[_0x522fe2(0x17a)]>MAX_TRAINING_SET_SIZE&&_0x574676[_0x522fe2(0x22f)](),await _0x49c464[_0x522fe2(0x129)]('LTM.trainingData.sequences',{'val':JSON[_0x522fe2(0x2fd)](_0x574676),'ack':!![]}),activeSequence=[],sequenceTimer=null;}catch(_0x294b2b){_0x49c464[_0x522fe2(0x324)][_0x522fe2(0x285)](_0x522fe2(0x1ca)+_0x294b2b[_0x522fe2(0x26b)]);}}async function getOutsideTemperatureNumeric(_0x136220){const _0x30cfbc=a0_0x1e747b;if(_0x136220[_0x30cfbc(0x154)]['outdoorSensorId'])try{const _0x1f26dc=await _0x136220[_0x30cfbc(0x1d2)](_0x136220[_0x30cfbc(0x154)][_0x30cfbc(0x282)]);if(_0x1f26dc&&_0x1f26dc[_0x30cfbc(0x2c6)]!==undefined&&_0x1f26dc[_0x30cfbc(0x2c6)]!==null){const _0x4ddf1c=parseFloat(_0x1f26dc['val']);if(!isNaN(_0x4ddf1c))return _0x4ddf1c;}}catch(_0x335729){_0x136220[_0x30cfbc(0x324)][_0x30cfbc(0x271)]('Error\x20reading\x20outdoor\x20sensor\x20'+_0x136220[_0x30cfbc(0x154)][_0x30cfbc(0x282)]+':\x20'+_0x335729[_0x30cfbc(0x26b)]);}const _0x460b2a=_0x136220[_0x30cfbc(0x154)][_0x30cfbc(0x175)];if(!_0x136220[_0x30cfbc(0x154)][_0x30cfbc(0x193)]||!_0x460b2a)return null;try{let _0x2ada11='';if(_0x460b2a['includes'](_0x30cfbc(0x19a)))_0x2ada11=_0x460b2a+_0x30cfbc(0x2b8);else{if(_0x460b2a[_0x30cfbc(0x26d)]('daswetter'))_0x2ada11=_0x460b2a+'.NextHours.Location_1.Day_1.current.temp_value';else{if(_0x460b2a['includes'](_0x30cfbc(0x302)))_0x2ada11=_0x460b2a+_0x30cfbc(0x322);else{if(_0x460b2a[_0x30cfbc(0x26d)](_0x30cfbc(0x303)))_0x2ada11=_0x460b2a+_0x30cfbc(0x1ee);}}}if(_0x2ada11){const _0xefbc69=await _0x136220[_0x30cfbc(0x1d2)](_0x2ada11);if(_0xefbc69&&_0xefbc69[_0x30cfbc(0x2c6)]!==undefined&&_0xefbc69[_0x30cfbc(0x2c6)]!==null)return parseFloat(_0xefbc69['val']);}}catch(_0x3ff5f5){}return null;}async function recordThermodynamics(_0x11554d,_0x54a19b,_0x44445f,_0x1e1b58){const _0x5c657b=a0_0x1e747b,_0x213429=await getOutsideTemperatureNumeric(_0x11554d),_0x35dcba=await _0x11554d[_0x5c657b(0x1d0)]('LTM.trainingData.thermodynamics');let _0x55051b=[];if(_0x35dcba&&_0x35dcba[_0x5c657b(0x2c6)])try{_0x55051b=JSON[_0x5c657b(0x316)](_0x35dcba[_0x5c657b(0x2c6)]);}catch(_0x3ab25a){}_0x55051b[_0x5c657b(0x25d)]({'ts':Date[_0x5c657b(0x28b)](),'room':_0x1e1b58||_0x5c657b(0x294),'t_in':_0x44445f,'t_out':_0x213429});if(_0x55051b[_0x5c657b(0x17a)]>THERMO_LOG_SIZE)_0x55051b[_0x5c657b(0x22f)]();await _0x11554d['setStateAsync'](_0x5c657b(0x276),{'val':JSON[_0x5c657b(0x2fd)](_0x55051b),'ack':!![]});}async function processSensorEvent(_0x1daefd,_0x3d9883,_0x4cbb60,_0x32c1b6){const _0xdfef56=a0_0x1e747b;if(!_0x32c1b6)return;const _0x49510d=_0x4cbb60[_0xdfef56(0x2c6)],_0xd8781a=Date[_0xdfef56(0x28b)]();_0x1daefd['log'][_0xdfef56(0x236)]('Event\x20received:\x20'+_0x3d9883+'\x20=\x20'+_0x49510d);const _0x448613=_0x1daefd['sensorLastValues'][_0x3d9883];_0x1daefd['sensorLastValues'][_0x3d9883]=_0x49510d;if(!_0x32c1b6[_0xdfef56(0x274)]&&_0x448613!=undefined&&_0x448613==_0x49510d){_0x1daefd['log'][_0xdfef56(0x236)](_0xdfef56(0x20b)+_0x32c1b6['name']+_0xdfef56(0x15a)+_0x49510d+')');return;}_0x1daefd[_0xdfef56(0x2d6)]&&_0x32c1b6[_0xdfef56(0x238)]===_0xdfef56(0x30c)&&recordThermodynamics(_0x1daefd,_0x3d9883,_0x49510d,_0x32c1b6[_0xdfef56(0x2e0)]);const _0x1ff7c0={'timestamp':_0xd8781a,'id':_0x3d9883,'name':_0x32c1b6[_0xdfef56(0x254)],'type':_0x32c1b6['type'],'location':_0x32c1b6[_0xdfef56(0x2e0)],'value':_0x49510d};_0x1daefd[_0xdfef56(0x23a)][_0xdfef56(0x2b6)](_0x1ff7c0);if(_0x1daefd[_0xdfef56(0x23a)][_0xdfef56(0x17a)]>HISTORY_MAX_SIZE)_0x1daefd[_0xdfef56(0x23a)][_0xdfef56(0x2bc)]();await _0x1daefd[_0xdfef56(0x129)](_0xdfef56(0x146),{'val':JSON[_0xdfef56(0x2fd)](_0x1ff7c0),'ack':!![]}),await _0x1daefd[_0xdfef56(0x129)]('events.history',{'val':JSON['stringify'](_0x1daefd[_0xdfef56(0x23a)]),'ack':!![]});_0x1daefd[_0xdfef56(0x2d6)]&&(_0x1daefd[_0xdfef56(0x2c1)]['push'](_0x1ff7c0),await saveRawEventLog(_0x1daefd),recordSequence(_0x1daefd,_0x1ff7c0));if(_0x32c1b6['isExit']&&_0x49510d===!![]){if(_0x1daefd[_0xdfef56(0x2bb)]&&!_0x1daefd['isGracePeriodActive'])_0x1daefd['log'][_0xdfef56(0x1f4)](_0xdfef56(0x214)+_0x32c1b6[_0xdfef56(0x254)]+').\x20Starting\x20Timer.'),startExitTimer(_0x1daefd);else!_0x1daefd['isPresent']&&(_0x1daefd[_0xdfef56(0x324)][_0xdfef56(0x1f4)](_0xdfef56(0x130)+_0x32c1b6[_0xdfef56(0x254)]+'.\x20Welcome\x20home.'),await setPresence(_0x1daefd,!![]));}else _0x32c1b6[_0xdfef56(0x238)]===_0xdfef56(0x27c)&&_0x49510d===!![]&&(_0x1daefd[_0xdfef56(0x290)]&&(_0x1daefd[_0xdfef56(0x324)][_0xdfef56(0x1f4)](_0xdfef56(0x311)),abortExitTimer(_0x1daefd)),!_0x1daefd[_0xdfef56(0x2bb)]&&_0x1daefd[_0xdfef56(0x139)]===SYSTEM_MODES[_0xdfef56(0x314)]&&await setPresence(_0x1daefd,!![]));}async function runGeminiAnalysis(_0xedca0e,_0x2334f8=''){const _0xac5a8a=a0_0x1e747b;if(!_0xedca0e['geminiModel'])return;if(_0xedca0e[_0xac5a8a(0x23a)][_0xac5a8a(0x17a)]===0x0)return;const _0x5f2a5d=_0xedca0e[_0xac5a8a(0x23a)][_0xac5a8a(0x1aa)](0x0,0xf),_0x3ff979=await getWeatherContext(_0xedca0e),_0x5c061a=_0xedca0e[_0xac5a8a(0x139)],_0x40f67c=PERSONA_MAPPING[_0xedca0e['config'][_0xac5a8a(0x25e)]||_0xac5a8a(0x1c0)],_0x2b416e=_0xedca0e[_0xac5a8a(0x154)][_0xac5a8a(0x293)]||_0xac5a8a(0x2da);let _0x6aa5e8=![];try{const _0x1b726e=await _0xedca0e['getStateAsync'](_0xac5a8a(0x2de));if(_0x1b726e&&_0x1b726e[_0xac5a8a(0x2c6)])_0x6aa5e8=!![];}catch(_0x5c9276){}const _0x51a79a='\x0a\x20\x20\x20\x20ROLLE:\x20KI-Hausverwalter\x20&\x20Gesundheits-Assistent.\x0a\x20\x20\x20\x20PERSONA:\x20'+_0x40f67c+_0xac5a8a(0x278)+_0x2b416e+'.\x0a\x20\x20\x20\x20SYSTEM_MODE:\x20'+_0x5c061a+'.\x0a\x20\x20\x20\x20WETTER:\x20'+_0x3ff979+_0xac5a8a(0x187)+(_0x2334f8||_0xac5a8a(0x1eb))+'.\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20INPUT\x20DATEN\x20(Letzte\x20Events):\x0a\x20\x20\x20\x20'+JSON[_0xac5a8a(0x2fd)](_0x5f2a5d)+'\x0a\x0a\x20\x20\x20\x20AUFGABE:\x0a\x20\x20\x20\x201.\x20Analysiere\x20auf\x20Gesundheitsrisiken\x20(Sturz,\x20Inaktivit√§t).\x0a\x20\x20\x20\x202.\x20Analysiere\x20auf\x20Komfort/Automatisierung\x20(\x22Butler\x22).\x20Erkennst\x20du\x20ein\x20Muster?\x20(z.B.\x20\x22Wenn\x20Bewegung\x20Flur,\x20dann\x20Licht\x20an\x22).\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20FORMAT\x20(JSON\x20Only!):\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x22isAlert\x22:\x20boolean,\x0a\x20\x20\x20\x20\x20\x20\x22alertReason\x22:\x20\x22string\x20(kurz)\x22,\x0a\x20\x20\x20\x20\x20\x20\x22isEmergency\x22:\x20boolean,\x0a\x20\x20\x20\x20\x20\x20\x22summary\x22:\x20\x22string\x20(Was\x20passiert\x20gerade?)\x22,\x0a\x20\x20\x20\x20\x20\x20\x22automationProposal\x22:\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22detected\x22:\x20boolean,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22description\x22:\x20\x22string\x20(Was\x20soll\x20automatisiert\x20werden?)\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22targetId\x22:\x20\x22string\x20(ioBroker\x20ID,\x20z.B.\x200_userdata.0.light)\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22targetValue\x22:\x20\x22any\x20(Wert,\x20z.B.\x20true\x20oder\x2050)\x22\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20';try{const _0x3637bc=await _0xedca0e[_0xac5a8a(0x209)][_0xac5a8a(0x1e8)](_0x51a79a),_0x9e92a4=_0x3637bc[_0xac5a8a(0x189)][_0xac5a8a(0x26f)]()[_0xac5a8a(0x217)](/```json|```/g,'')[_0xac5a8a(0x2f2)](),_0x45552e=JSON[_0xac5a8a(0x316)](_0x9e92a4);await _0xedca0e['setStateAsync'](_0xac5a8a(0x255),{'val':JSON[_0xac5a8a(0x2fd)](_0x45552e),'ack':!![]});_0x45552e[_0xac5a8a(0x203)]&&await _0xedca0e['setStateAsync'](_0xac5a8a(0x14a),{'val':_0x45552e[_0xac5a8a(0x203)],'ack':!![]});const _0x5d2336={'timestamp':Date[_0xac5a8a(0x28b)](),'id':Date['now']()[_0xac5a8a(0x32d)](),'analysis':{'activity':{'summary':_0x45552e[_0xac5a8a(0x203)]||'Keine\x20Analyse.','isAlert':_0x45552e['isAlert']||![],'alertReason':_0x45552e[_0xac5a8a(0x14d)]},'comfort':{'automationProposal':_0x45552e[_0xac5a8a(0x2f7)]}}};await updateAnalysisHistory(_0xedca0e,_0x5d2336);const _0xe04133=_0x45552e['isAlert']||![];_0xe04133!==_0xedca0e['lastAlertState']&&(await _0xedca0e[_0xac5a8a(0x129)](_0xac5a8a(0x264),{'val':_0xe04133,'ack':!![]}),_0xedca0e[_0xac5a8a(0x29b)]=_0xe04133,_0xe04133&&(await _0xedca0e[_0xac5a8a(0x129)](_0xac5a8a(0x24c),{'val':_0x45552e[_0xac5a8a(0x14d)],'ack':!![]}),sendNotification(_0xedca0e,_0xac5a8a(0x2cb)+_0x45552e[_0xac5a8a(0x14d)],![],_0x45552e[_0xac5a8a(0x20a)]))),_0x45552e[_0xac5a8a(0x2f7)]&&_0x45552e[_0xac5a8a(0x2f7)]['detected']&&_0x45552e['automationProposal'][_0xac5a8a(0x16e)]&&(_0xedca0e[_0xac5a8a(0x324)][_0xac5a8a(0x1f4)](_0xac5a8a(0x2d2)+_0x45552e['automationProposal']['description']),await _0xedca0e[_0xac5a8a(0x129)](_0xac5a8a(0x177),{'val':!![],'ack':!![]}),await _0xedca0e['setStateAsync'](_0xac5a8a(0x1f6),{'val':_0x45552e[_0xac5a8a(0x2f7)]['description'],'ack':!![]}),await _0xedca0e['setStateAsync'](_0xac5a8a(0x216),{'val':_0x45552e[_0xac5a8a(0x2f7)][_0xac5a8a(0x16e)],'ack':!![]}),await _0xedca0e[_0xac5a8a(0x129)](_0xac5a8a(0x16f),{'val':JSON[_0xac5a8a(0x2fd)](_0x45552e['automationProposal'][_0xac5a8a(0x1ac)]),'ack':!![]}),_0x6aa5e8&&(_0xedca0e[_0xac5a8a(0x324)]['info']('ü§ñ\x20BUTLER\x20AUTO-APPLY:\x20Executing\x20'+_0x45552e[_0xac5a8a(0x2f7)][_0xac5a8a(0x16e)]+_0xac5a8a(0x138)),await executeAutomationAction(_0xedca0e)));}catch(_0x416048){_0xedca0e['log'][_0xac5a8a(0x285)](_0xac5a8a(0x248)+_0x416048[_0xac5a8a(0x26b)]);}}function installPythonDependencies(_0x1e41d9){const _0x3650c6=a0_0x1e747b;if(_0x1e41d9[_0x3650c6(0x2bd)])return;_0x1e41d9['dependencyInstallInProgress']=!![];const _0x1f39df=path[_0x3650c6(0x289)](__dirname,_0x3650c6(0x1d4),_0x3650c6(0x270));_0x1e41d9[_0x3650c6(0x324)]['info'](_0x3650c6(0x2c5)+_0x1f39df+_0x3650c6(0x138)),stopPythonService(_0x1e41d9);const _0xe1e58f=_0x3650c6(0x19e)+_0x1f39df+_0x3650c6(0x22c);exec(_0xe1e58f,(_0x58effb,_0x5c6647,_0x557852)=>{const _0x35bb87=_0x3650c6;_0x1e41d9[_0x35bb87(0x2bd)]=![],_0x58effb?(_0x1e41d9[_0x35bb87(0x324)][_0x35bb87(0x285)](_0x35bb87(0x25a)+_0xe1e58f),_0x1e41d9['log'][_0x35bb87(0x285)]('Details:\x20'+(_0x557852||_0x58effb[_0x35bb87(0x26b)]))):(_0x1e41d9[_0x35bb87(0x324)]['info'](_0x35bb87(0x268)),startPythonService(_0x1e41d9));});}function sendToPython(_0x4d4dcb,_0x2edf61,_0x479302={}){const _0x2302f5=a0_0x1e747b;if(!_0x4d4dcb['pythonProcess']||!_0x4d4dcb[_0x2302f5(0x1ef)]['stdin'][_0x2302f5(0x126)])return;const _0x1bb00e=JSON[_0x2302f5(0x2fd)]({'command':_0x2edf61,..._0x479302});try{_0x4d4dcb['pythonProcess'][_0x2302f5(0x247)][_0x2302f5(0x188)](_0x1bb00e+'\x0a');}catch(_0x5bbe1c){_0x4d4dcb[_0x2302f5(0x324)][_0x2302f5(0x285)](_0x2302f5(0x136)+_0x5bbe1c[_0x2302f5(0x26b)]);}}function runPythonHealthCheck(_0x39f1a6){const _0x4ec773=a0_0x1e747b;if(!_0x39f1a6[_0x4ec773(0x183)]||_0x39f1a6[_0x4ec773(0x183)]['length']<0x2){_0x39f1a6[_0x4ec773(0x324)][_0x4ec773(0x1f4)](_0x4ec773(0x18e));return;}const _0xff16ac=_0x39f1a6[_0x4ec773(0x183)][_0x4ec773(0x2d1)](_0x256370=>{const _0x4bc7a8=(_0x256370['activityLevel']||'')['toLowerCase']();return ACTIVITY_LEVEL_MAP[_0x4bc7a8]||0x32;});_0x39f1a6['log'][_0x4ec773(0x1f4)](_0x4ec773(0x1b0)+_0xff16ac['length']+_0x4ec773(0x24e)),sendToPython(_0x39f1a6,_0x4ec773(0x259),{'values':_0xff16ac,'tag':'Activity-Level'});}function handlePythonResult(_0x2eb4ce,_0x3bd994){const _0x60686=a0_0x1e747b;if(_0x3bd994['type']==='PONG')_0x2eb4ce[_0x60686(0x324)][_0x60686(0x236)]('üêç\x20Python\x20Pong\x20received!\x20Latency\x20check\x20passed.');else{if(_0x3bd994[_0x60686(0x238)]===_0x60686(0x149)){const {tag:_0xfe8249,diagnosis:_0x4f6628,change_percent:_0x2fda6e}=_0x3bd994[_0x60686(0x2c7)];_0x2eb4ce[_0x60686(0x324)]['info'](_0x60686(0x30a)+_0xfe8249+_0x60686(0x221)+_0x4f6628+'\x20('+_0x2fda6e+'%)'),_0x2eb4ce[_0x60686(0x129)]('analysis.health.trendDiagnosis',{'val':_0x4f6628,'ack':!![]}),_0x2eb4ce[_0x60686(0x129)](_0x60686(0x14e),{'val':_0x2fda6e,'ack':!![]});}}}function startPythonService(_0x56170e){const _0x3f43e3=a0_0x1e747b;try{const _0x542e39=path[_0x3f43e3(0x289)](__dirname,_0x3f43e3(0x1d4),'service.py');_0x56170e['log'][_0x3f43e3(0x1f4)](_0x3f43e3(0x15e)+_0x542e39),_0x56170e[_0x3f43e3(0x1ef)]=spawn(_0x3f43e3(0x32b),[_0x542e39]),_0x56170e['pythonProcess'][_0x3f43e3(0x14c)]['on'](_0x3f43e3(0x258),_0x28cf65=>{const _0x17cadd=_0x3f43e3,_0x2f93d9=_0x28cf65[_0x17cadd(0x32d)]()['split']('\x0a');_0x2f93d9[_0x17cadd(0x218)](_0x164244=>{const _0x37c8f2=_0x17cadd,_0x4d6e6f=_0x164244[_0x37c8f2(0x2f2)]();if(!_0x4d6e6f)return;if(_0x4d6e6f[_0x37c8f2(0x2ed)](_0x37c8f2(0x1e5)))_0x56170e['log'][_0x37c8f2(0x236)](_0x37c8f2(0x133)+_0x4d6e6f[_0x37c8f2(0x2c9)](0x5)['trim']());else{if(_0x4d6e6f[_0x37c8f2(0x2ed)]('[RESULT]'))try{const _0x8819d7=JSON[_0x37c8f2(0x316)](_0x4d6e6f[_0x37c8f2(0x2c9)](0x8)[_0x37c8f2(0x2f2)]());handlePythonResult(_0x56170e,_0x8819d7);}catch(_0x40352b){_0x56170e[_0x37c8f2(0x324)][_0x37c8f2(0x271)](_0x37c8f2(0x144)+_0x4d6e6f);}}(_0x4d6e6f['includes'](_0x37c8f2(0x1ce))||_0x4d6e6f[_0x37c8f2(0x26d)](_0x37c8f2(0x15b)))&&(_0x56170e[_0x37c8f2(0x324)]['warn']('‚ö†Ô∏è\x20Python\x20missing\x20dependencies.\x20Triggering\x20Auto-Install...'),installPythonDependencies(_0x56170e));});}),_0x56170e['pythonProcess'][_0x3f43e3(0x190)]['on'](_0x3f43e3(0x258),_0x31da52=>{const _0x4ec32e=_0x3f43e3,_0x19c2f6=_0x31da52[_0x4ec32e(0x32d)]()[_0x4ec32e(0x2f2)]();_0x56170e[_0x4ec32e(0x324)]['error'](_0x4ec32e(0x29a)+_0x19c2f6);}),_0x56170e[_0x3f43e3(0x1ef)]['on'](_0x3f43e3(0x131),_0x2e657=>{const _0x431dbb=_0x3f43e3;_0x56170e[_0x431dbb(0x324)]['info'](_0x431dbb(0x27b)+_0x2e657),_0x56170e[_0x431dbb(0x1ef)]=null;}),_0x56170e[_0x3f43e3(0x1ef)]['on']('error',_0x820732=>{const _0x3d6fa5=_0x3f43e3;_0x56170e[_0x3d6fa5(0x324)][_0x3d6fa5(0x271)](_0x3d6fa5(0x1e2)+_0x820732[_0x3d6fa5(0x26b)]);});}catch(_0x595079){_0x56170e[_0x3f43e3(0x324)][_0x3f43e3(0x285)](_0x3f43e3(0x171)+_0x595079['message']);}}function stopPythonService(_0x3e00a8){const _0x3e0d37=a0_0x1e747b;if(_0x3e00a8['pythonProcess']){_0x3e00a8['log'][_0x3e0d37(0x1f4)](_0x3e0d37(0x27e));try{_0x3e00a8[_0x3e0d37(0x1ef)]['kill']();}catch(_0x5c6d6a){_0x3e00a8['log'][_0x3e0d37(0x271)](_0x3e0d37(0x152)+_0x5c6d6a[_0x3e0d37(0x26b)]);}_0x3e00a8[_0x3e0d37(0x1ef)]=null;}}class CogniLiving extends utils[a0_0x1e747b(0x239)]{constructor(_0xa9a4e5){const _0x246717=a0_0x1e747b;super({..._0xa9a4e5,'name':_0x246717(0x2a9)}),this['eventHistory']=[],this[_0x246717(0x13b)]=[],this['feedbackHistory']=[],this[_0x246717(0x2c1)]=[],this[_0x246717(0x183)]=[],this[_0x246717(0x253)]={},this[_0x246717(0x2b5)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x246717(0x2bb)]=!![],this['exitTimer']=null,this[_0x246717(0x241)]=null,this[_0x246717(0x1fd)]=![],this[_0x246717(0x166)]=null,this[_0x246717(0x209)]=null,this[_0x246717(0x139)]=SYSTEM_MODES[_0x246717(0x314)],this[_0x246717(0x2d6)]=![],this[_0x246717(0x29b)]=![],this[_0x246717(0x140)]=_0x246717(0x1cf),this['analysisTimer']=null,this[_0x246717(0x18d)]=null,this[_0x246717(0x242)]=null,this[_0x246717(0x269)]=null,this[_0x246717(0x31d)]=null,this[_0x246717(0x1ef)]=null,this[_0x246717(0x2bd)]=![],this['on'](_0x246717(0x194),this[_0x246717(0x2a0)][_0x246717(0x1c4)](this)),this['on'](_0x246717(0x300),this[_0x246717(0x312)][_0x246717(0x1c4)](this)),this['on'](_0x246717(0x18b),this[_0x246717(0x280)][_0x246717(0x1c4)](this)),this['on'](_0x246717(0x26b),this[_0x246717(0x1bc)][_0x246717(0x1c4)](this));}async[a0_0x1e747b(0x2a0)](){const _0x28a50d=a0_0x1e747b;this[_0x28a50d(0x324)]['info'](_0x28a50d(0x1bf)+this[_0x28a50d(0x2dd)]+_0x28a50d(0x1f2)),await initZombies(this),this[_0x28a50d(0x154)][_0x28a50d(0x287)]=this[_0x28a50d(0x154)][_0x28a50d(0x287)]||'';try{this[_0x28a50d(0x2d6)]=await checkLicense(this,this['config'][_0x28a50d(0x287)]);}catch(_0x34487c){}this[_0x28a50d(0x324)][_0x28a50d(0x1f4)](_0x28a50d(0x31c)+!!this[_0x28a50d(0x154)][_0x28a50d(0x287)]+_0x28a50d(0x200)+(this[_0x28a50d(0x2d6)]?'‚úÖ\x20PRO\x20ACTIVATED':_0x28a50d(0x2fe)));if(!this[_0x28a50d(0x154)]['inactivityThresholdHours']||this[_0x28a50d(0x154)][_0x28a50d(0x2c3)]<0.1)this['config']['inactivityThresholdHours']=0xc;await initHistory(this),await initSystemConfig(this);if(this[_0x28a50d(0x154)][_0x28a50d(0x21f)])try{this[_0x28a50d(0x166)]=new GoogleGenerativeAI(this[_0x28a50d(0x154)][_0x28a50d(0x21f)]),this['geminiModel']=this[_0x28a50d(0x166)][_0x28a50d(0x2d5)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x28a50d(0x151)}}),this['log'][_0x28a50d(0x1f4)](_0x28a50d(0x1fa));}catch(_0x487cbf){this[_0x28a50d(0x324)]['error']('Gemini\x20Init\x20Error:\x20'+_0x487cbf['message']);}await createAllObjects(this),await loadSystemMode(this),await loadRawEventLog(this),await loadDailyDigests(this),this[_0x28a50d(0x1df)](_0x28a50d(0x1f1)),this[_0x28a50d(0x1df)](LTM_DP_TRIGGER_DIGEST),this[_0x28a50d(0x1df)](_0x28a50d(0x28e)),this[_0x28a50d(0x1df)]('analysis.triggerBriefing'),this['subscribeStates'](_0x28a50d(0x28f)),this[_0x28a50d(0x1df)](_0x28a50d(0x2de)),await initSensorSubscriptions(this),await initPresenceSubscriptions(this),await setupTelegramListener(this),setTimeout(()=>checkWifiPresence(this),0x1388);if(this['analysisTimer'])clearInterval(this[_0x28a50d(0x260)]);const _0x21bddc=this[_0x28a50d(0x154)][_0x28a50d(0x24f)]||0xf;_0x21bddc>0x0&&(this[_0x28a50d(0x324)][_0x28a50d(0x1f4)](_0x28a50d(0x15c)+_0x21bddc+'\x20min).'),this['analysisTimer']=setInterval(()=>{runAutopilot(this);},_0x21bddc*0x3c*0x3e8)),setupLtmScheduler(this),setupModeResetScheduler(this),setupDriftAnalysisScheduler(this),setupBriefingScheduler(this),startPythonService(this),setTimeout(()=>{const _0x39016b=_0x28a50d;this[_0x39016b(0x1ef)]&&runPythonHealthCheck(this);},0x1388);}[a0_0x1e747b(0x280)](_0x26d9db){const _0x2edfb0=a0_0x1e747b;if(this['analysisTimer'])clearInterval(this['analysisTimer']);if(this[_0x2edfb0(0x269)])clearInterval(this['driftAnalysisTimer']);if(this[_0x2edfb0(0x18d)])this[_0x2edfb0(0x18d)][_0x2edfb0(0x2f1)]();if(this[_0x2edfb0(0x242)])this['modeResetJob'][_0x2edfb0(0x2f1)]();if(this['briefingJob'])this[_0x2edfb0(0x31d)]['cancel']();if(this[_0x2edfb0(0x290)])clearTimeout(this['exitTimer']);if(this[_0x2edfb0(0x241)])clearTimeout(this[_0x2edfb0(0x241)]);stopPythonService(this),_0x26d9db();}async[a0_0x1e747b(0x312)](_0x2999ef,_0x841608){const _0x41f873=a0_0x1e747b;if(!_0x841608)return;if(_0x2999ef[_0x41f873(0x26d)]('telegram')&&_0x2999ef[_0x41f873(0x196)](_0x41f873(0x1d6))&&_0x841608[_0x41f873(0x2c6)]){await handleTelegramResponse(this,_0x841608[_0x41f873(0x2c6)]);return;}if(_0x2999ef===this[_0x41f873(0x143)]+'.'+SYSTEM_DP_MODE){_0x841608[_0x41f873(0x2c6)]&&Object[_0x41f873(0x26a)](SYSTEM_MODES)['includes'](_0x841608[_0x41f873(0x2c6)])&&(this['currentSystemMode']=_0x841608['val'],_0x841608[_0x41f873(0x2c6)]===SYSTEM_MODES[_0x41f873(0x134)]?await setPresence(this,![]):await setPresence(this,!![]));if(!_0x841608[_0x41f873(0x23c)])this['setState'](_0x2999ef,{'val':this[_0x41f873(0x139)],'ack':!![]});return;}if(!_0x841608[_0x41f873(0x23c)]){_0x2999ef[_0x41f873(0x26d)](_0x41f873(0x1f1))&&_0x841608[_0x41f873(0x2c6)]&&(this[_0x41f873(0x163)](_0x2999ef,{'val':![],'ack':!![]}),runGeminiAnalysis(this));if(_0x2999ef[_0x41f873(0x26d)](_0x41f873(0x179))&&_0x841608[_0x41f873(0x2c6)]){this[_0x41f873(0x163)](_0x2999ef,{'val':![],'ack':!![]});if(this['isProVersion'])createDailyDigest(this);}_0x2999ef[_0x41f873(0x26d)](_0x41f873(0x185))&&_0x841608[_0x41f873(0x2c6)]&&(this[_0x41f873(0x163)](_0x2999ef,{'val':![],'ack':!![]}),sendMorningBriefing(this));_0x2999ef[_0x41f873(0x26d)](_0x41f873(0x148))&&_0x841608[_0x41f873(0x2c6)]&&(this['setState'](_0x2999ef,{'val':![],'ack':!![]}),executeAutomationAction(this));return;}if(this[_0x41f873(0x154)]['presenceDevices']&&this[_0x41f873(0x154)][_0x41f873(0x1c6)][_0x41f873(0x26d)](_0x2999ef)){await checkWifiPresence(this);return;}const _0x319531=(this[_0x41f873(0x154)]['devices']||[])[_0x41f873(0x1f5)](_0x37114b=>_0x37114b['id']===_0x2999ef);if(_0x319531)processSensorEvent(this,_0x2999ef,_0x841608,_0x319531);}async['onMessage'](_0x329f46){const _0x108563=a0_0x1e747b;if(typeof _0x329f46==='object'&&_0x329f46['message'])try{if(_0x329f46['command']===_0x108563(0x1f9)){const _0x1c54cf=_0x329f46[_0x108563(0x26b)][_0x108563(0x168)]||this[_0x108563(0x154)]['geminiApiKey'];if(!_0x1c54cf)return this[_0x108563(0x244)](_0x329f46['from'],_0x329f46[_0x108563(0x202)],{'success':![],'message':_0x108563(0x2dc)},_0x329f46[_0x108563(0x172)]);try{const _0x41aac5=new GoogleGenerativeAI(_0x1c54cf),_0x39ca34=_0x41aac5['getGenerativeModel']({'model':GEMINI_MODEL}),_0x40f14d=await _0x39ca34[_0x108563(0x1e8)](_0x108563(0x153)),_0x322df4=await _0x40f14d['response'],_0x160f9e=_0x322df4[_0x108563(0x26f)]();this[_0x108563(0x244)](_0x329f46[_0x108563(0x2ff)],_0x329f46[_0x108563(0x202)],{'success':!![],'message':'Verbindung\x20erfolgreich!\x20Antwort:\x20'+_0x160f9e[_0x108563(0x2c9)](0x0,0x14)+'...'},_0x329f46['callback']);}catch(_0x4fe4ea){this[_0x108563(0x244)](_0x329f46[_0x108563(0x2ff)],_0x329f46['command'],{'success':![],'message':_0x108563(0x205)+_0x4fe4ea['message']},_0x329f46['callback']);}}else{if(_0x329f46[_0x108563(0x202)]==='testNotification'){}else{if(_0x329f46[_0x108563(0x202)]==='getLtmData'){if(!this['isProVersion'])return this['sendTo'](_0x329f46[_0x108563(0x2ff)],_0x329f46['command'],{'success':![],'isPro':![]},_0x329f46['callback']);let _0xa075dc={'status':'N/A','details':'','lastCheck':0x0};try{_0xa075dc[_0x108563(0x1d8)]=(await this[_0x108563(0x1d0)](LTM_DP_DRIFT_STATUS))['val'],_0xa075dc['details']=(await this[_0x108563(0x1d0)](LTM_DP_DRIFT_DETAILS))[_0x108563(0x2c6)],_0xa075dc['lastCheck']=(await this[_0x108563(0x1d0)](LTM_DP_DRIFT_LAST_CHECK))[_0x108563(0x2c6)];}catch(_0x28439a){}const _0x166abf=this['analysisHistory']||[];this['sendTo'](_0x329f46[_0x108563(0x2ff)],_0x329f46[_0x108563(0x202)],{'success':!![],'isPro':!![],'dailyDigests':this['dailyDigests'],'driftAnalysis':_0xa075dc,'analysisHistory':_0x166abf},_0x329f46[_0x108563(0x172)]);}else{if(_0x329f46[_0x108563(0x202)]===_0x108563(0x2cf)){const _0x34ca67=this[_0x108563(0x183)][_0x108563(0x17a)],_0x1e4595=new Date(),_0x17accb=new Date(_0x1e4595['getFullYear'](),_0x1e4595['getMonth'](),_0x1e4595['getDate']())[_0x108563(0x2e1)](),_0x9d6b24=this[_0x108563(0x2c1)][_0x108563(0x1cc)](_0x2d6743=>new Date(_0x2d6743[_0x108563(0x162)])[_0x108563(0x2e1)]()>_0x17accb)[_0x108563(0x17a)],_0x4d9648=new Array(0x18)['fill'](0x0);this[_0x108563(0x2c1)][_0x108563(0x218)](_0x481407=>{const _0xb7ba7c=_0x108563,_0x2084c3=new Date(_0x481407[_0xb7ba7c(0x162)]);if(_0x2084c3[_0xb7ba7c(0x2e1)]()>_0x17accb)_0x4d9648[_0x2084c3[_0xb7ba7c(0x24d)]()]++;});let _0x2bf133={'status':_0x108563(0x170)};try{_0x2bf133[_0x108563(0x1d8)]=(await this['getStateAsync'](LTM_DP_DRIFT_STATUS))[_0x108563(0x2c6)];}catch(_0x5431ef){}let _0x50958f='';try{const _0x4125cb=await this[_0x108563(0x1d0)](_0x108563(0x286));_0x50958f=_0x4125cb?_0x4125cb[_0x108563(0x2c6)]:'';}catch(_0x9c8c6e){}let _0x38901f=null;!this[_0x108563(0x209)]&&(_0x38901f=this[_0x108563(0x154)][_0x108563(0x21f)]?_0x108563(0x1c8):_0x108563(0x2d4));let _0x53c342={'detected':![],'description':'','targetId':'','targetValue':'','autoApply':![]};try{const _0x329094=await this[_0x108563(0x1d0)](_0x108563(0x177)),_0x39cf84=await this[_0x108563(0x1d0)]('analysis.automation.description'),_0x18a1fb=await this['getStateAsync'](_0x108563(0x216)),_0xc66441=await this[_0x108563(0x1d0)](_0x108563(0x16f)),_0x5f2c43=await this['getStateAsync'](_0x108563(0x2de));_0x329094&&_0x329094[_0x108563(0x2c6)]&&(_0x53c342[_0x108563(0x135)]=!![],_0x53c342[_0x108563(0x315)]=_0x39cf84?_0x39cf84[_0x108563(0x2c6)]:'',_0x53c342[_0x108563(0x16e)]=_0x18a1fb?_0x18a1fb[_0x108563(0x2c6)]:'',_0x53c342[_0x108563(0x1ac)]=_0xc66441?_0xc66441[_0x108563(0x2c6)]:''),_0x53c342['autoApply']=_0x5f2c43?!!_0x5f2c43[_0x108563(0x2c6)]:![];}catch(_0x3ee614){}this['sendTo'](_0x329f46[_0x108563(0x2ff)],_0x329f46[_0x108563(0x202)],{'success':!![],'eventHistory':this[_0x108563(0x23a)][_0x108563(0x1aa)](0x0,0xf),'stats':{'digestCount':_0x34ca67,'eventCountToday':_0x9d6b24,'hourlyActivity':_0x4d9648,'driftStatus':_0x2bf133[_0x108563(0x1d8)],'isPresent':this[_0x108563(0x2bb)],'presenceWho':_0x50958f,'minDays':this[_0x108563(0x154)][_0x108563(0x246)]||0x7,'stbDays':this['config'][_0x108563(0x279)]||0xe,'ltbDays':this[_0x108563(0x154)]['ltmLtbWindowDays']||0x3c,'systemError':_0x38901f},'automation':_0x53c342},_0x329f46[_0x108563(0x172)]);}else{if(_0x329f46['command']==='getEnums'){const _0xdcd7b2=await this[_0x108563(0x321)](_0x108563(0x1ea),_0x108563(0x29f)),_0x46a12c=[];if(_0xdcd7b2)for(const _0x180157 in _0xdcd7b2){const _0x924a3f=_0xdcd7b2[_0x180157],_0x4222f0=(_0x924a3f['common']&&typeof _0x924a3f['common']['name']===_0x108563(0x251)?_0x924a3f['common']['name']['de']:_0x924a3f['common']['name'])||_0x924a3f[_0x108563(0x17d)][_0x108563(0x254)];_0x46a12c[_0x108563(0x25d)]({'id':_0x180157,'name':_0x4222f0});}this[_0x108563(0x244)](_0x329f46[_0x108563(0x2ff)],_0x329f46['command'],{'success':!![],'enums':_0x46a12c},_0x329f46[_0x108563(0x172)]);}else{if(_0x329f46[_0x108563(0x202)]===_0x108563(0x20f))try{const _0x17c3a5=await scanForDevices(this,_0x329f46['message']||{});this[_0x108563(0x244)](_0x329f46['from'],_0x329f46[_0x108563(0x202)],{'success':!![],'devices':_0x17c3a5},_0x329f46[_0x108563(0x172)]);}catch(_0x3ee4ac){this[_0x108563(0x244)](_0x329f46[_0x108563(0x2ff)],_0x329f46['command'],{'success':![],'error':_0x3ee4ac[_0x108563(0x26b)]},_0x329f46[_0x108563(0x172)]);}else{if(_0x329f46[_0x108563(0x202)]===_0x108563(0x12e)){const _0x32c3da=_0x329f46['message']['instance'];if(!_0x32c3da)return this[_0x108563(0x244)](_0x329f46[_0x108563(0x2ff)],_0x329f46['command'],{'success':![],'error':_0x108563(0x21d)},_0x329f46[_0x108563(0x172)]);const _0x648e83=await getCalendarNames(this,_0x32c3da);this[_0x108563(0x244)](_0x329f46[_0x108563(0x2ff)],_0x329f46[_0x108563(0x202)],{'success':!![],'names':_0x648e83},_0x329f46[_0x108563(0x172)]);}else{if(_0x329f46[_0x108563(0x202)]==='simulateButler'){const {targetId:_0x2dcdd0,targetValue:_0x9f6396}=_0x329f46['message'];this['log'][_0x108563(0x1f4)](_0x108563(0x299)+_0x2dcdd0+_0x108563(0x1e7)+_0x9f6396),await this[_0x108563(0x129)](_0x108563(0x177),{'val':!![],'ack':!![]}),await this[_0x108563(0x129)](_0x108563(0x1f6),{'val':_0x108563(0x327)+_0x2dcdd0,'ack':!![]}),await this[_0x108563(0x129)](_0x108563(0x216),{'val':_0x2dcdd0,'ack':!![]}),await this['setStateAsync'](_0x108563(0x16f),{'val':_0x9f6396,'ack':!![]}),this[_0x108563(0x244)](_0x329f46[_0x108563(0x2ff)],_0x329f46['command'],{'success':!![]},_0x329f46['callback']);}else{if(_0x329f46['command']===_0x108563(0x2b9)){const {historyId:_0x4e10a7,rating:_0x432bc,comment:_0x14e8fc,alertReason:_0x148bce}=_0x329f46[_0x108563(0x26b)];_0x4e10a7&&_0x432bc?(await saveFeedback(this,{'timestamp':Date[_0x108563(0x28b)](),'historyId':_0x4e10a7,'rating':_0x432bc,'comment':_0x14e8fc,'alertReason':_0x148bce}),this['sendTo'](_0x329f46[_0x108563(0x2ff)],_0x329f46[_0x108563(0x202)],{'success':!![]},_0x329f46[_0x108563(0x172)])):this[_0x108563(0x244)](_0x329f46[_0x108563(0x2ff)],_0x329f46['command'],{'success':![],'error':_0x108563(0x29e)},_0x329f46[_0x108563(0x172)]);}else _0x329f46[_0x108563(0x202)]===_0x108563(0x18a)&&(this['log'][_0x108563(0x1f4)]('User\x20dismissed\x20automation\x20proposal.'),await this[_0x108563(0x129)]('analysis.automation.patternDetected',{'val':![],'ack':!![]}),await this[_0x108563(0x129)](_0x108563(0x1f6),{'val':'','ack':!![]}),this[_0x108563(0x244)](_0x329f46[_0x108563(0x2ff)],_0x329f46[_0x108563(0x202)],{'success':!![]},_0x329f46[_0x108563(0x172)]));}}}}}}}}}catch(_0x1362c1){this['log'][_0x108563(0x285)]('Error\x20in\x20onMessage\x20command\x20'+_0x329f46[_0x108563(0x202)]+':\x20'+_0x1362c1[_0x108563(0x26b)]);if(_0x329f46['callback'])this[_0x108563(0x244)](_0x329f46['from'],_0x329f46[_0x108563(0x202)],{'success':![],'error':_0x1362c1['message']},_0x329f46[_0x108563(0x172)]);}}}if(require[a0_0x1e747b(0x1e4)]!==module)module['exports']=_0x46704a=>new CogniLiving(_0x46704a);else new CogniLiving();