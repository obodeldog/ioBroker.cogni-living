function a0_0x129a(){const _0x494159=['analysis.prediction.trackerConfidence','instance','isProVersion','type','LTM.rawEventLog','testContext','üö®\x20INFRASCHALL-ALARM:\x20Anomalie\x20bei\x20Abwesenheit\x20(scharf)!','presenceCheckTimer','getEnums','updateTopologyMatrix','getAbsoluteDefaultDataDir','\x20Tage)','moduleComfort','[Integrator]\x20Error:\x20','¬∞C,\x20Au√üen:\x20','analysis.visualization.pulse','common','security','rows','getGenerativeModel','generateHealthReport','replayTodayEvents','\x22history\x22:{}','klar','Unbekannt','Gemini\x20Report\x20Night','object','üîä\x20FORENSIC:\x20Infraschall\x20bei\x20Abwesenheit!\x20Pressure:\x20',',\x20Events:\x0a','thermostat','isPresent','includes','text','1895470aSqnuO','Init...','getCalendarNames','ERROR','VACATION','value','LTM.dailyDigests','Sec-Training\x20started...','system.presenceWho','TRAIN_COMFORT','window','\x20-\x20','getHistoryData','testApiKey','\x20events\x20from\x20standard\x20storage.','isSolar','3120192kBeAch','./lib/recorder','analysis.energy.warmupSources','updateTopologyMatrix\x20failed:\x20','analysis.prediction.trackerTopRoom','briefingJob','open','getHours','analysis.health.todayVector','.isOnline','getForeignStateAsync','sendTo','system','Party\x20Mode','door','historyJob','currentSystemMode','accuweather.0','devices','isArray','getForeignObjectsAsync','presenceDevices','166493ZSIXhW','message','existsSync','readFileSync','Room\x20History\x20(24h\x20Buckets)','toLowerCase','length','Scan\x20Error:\x20','values','analysis.safety.infrasoundAlert','runGeminiAnalysis','timestamp','debug','analysis.health.geminiDay','modeResetJob','triggerGaitAnalysis','SET_LEARNING_MODE','send','üì¶\x20Restored\x20','analysisTimer','üêç\x20Triggering\x20Python\x20Health\x20Check\x20(Activity\x20Trend)...','calendarCheckTimer','threshold_exceeded','toISOString','refreshCalendar','abs','name','generateContent','calendarName','PREDICT_ENERGY','ltmJob','CALCULATE_HEALTH_TREND','Warte\x20auf\x20Analyse...','subscribeForeignStatesAsync','analysis.topology.structure','114yJrPwj','trackerHeartbeat','communicate.request','Standard','triggerGaitAnalysis\x20error:\x20','string','‚òÄÔ∏è\x20Solar\x20Condition:\x20SUNNY\x20detected\x20via\x20','checkSolarCondition','infrasoundLocked','sonn','response','runPythonHealthCheck','initSystemConfig','Live\x20Event\x20Pulse','setStateAsync','onMessage','getObjectViewAsync','./lib/setup','Keine\x20Daten','setState','@iobroker/adapter-core','number','moduleEnergy','...','isRelevantActivity','geminiApiKey','3050958xUqYjl','executeAutomationAction','roomIntegratorTimer','system.adapter.ical.','subscribeStates','getMinutes','guest','keys','triggerInfrasoundCorrelation','saveDailyHistory','updated','Event','\x20Kalender-Adapter\x20gefunden.','val','reduce','Corrupt','SYSTEM_MODES','node-schedule','59\x2023\x20*\x20*\x20*','forecast.current.weather','min','analysisHistory','.venv','.last_seen','onReady','analyzeWindowOpening','exitGraceTimer','json','\x20(Bewohner\x20anwesend\x20-\x20normal)','triggerHealth\x20error:\x20','‚úÖ\x20History\x20saved:\x20','processSensorEvent','Lernphase\x20(','getStateAsync','analysis.training.status','checkCalendarTriggers','infrasoundSensorId','daswetter.0','todayVector','‚úÖ\x20Dashboard\x20Data\x20(Rooms\x20&\x20Timeline\x20&\x20Details)\x20restored.','setObjectNotExistsAsync','toFixed','command','callback','forEach','Gemini\x20Report\x20Day','main','analysis.ventilation.lastWindow','.system.mode','¬∞C)','SYSTEM_DP_MODE','filter','date','isGracePeriodActive','abortExitTimer','analysis.automation.description','getOverviewData','temperature','error','Invalid\x20matrix\x20data','toLocaleDateString','handleInfrasound','de-DE','integrateRoomTime','online','dependencyInstallInProgress','geminiModel','./lib/ai_agent','enum.functions.*','4776008NNcfag','./lib/scanner','Daily\x20Room\x20Details\x20(48x30min)','initHistory','analysis.activity.roomHistory','analysis.automation.targetId','loadSystemMode','setDate','Warm-Up\x20Time','healthTrendInterval','createAllObjects','ANALYZE_GAIT','driftAnalysisTimer','protectAiMemory','\x20events\x20from\x20today...','Gute\x20L√ºftungsm√∂glichkeit!','analysis.training.triggerHealth','(((.+)+)+)+$','./lib/topology','unshift','slice','system.adapter.ical.È¶ô','LTM.trainingData.sequences','fill','licenseKey','join','split','toString','parse','analyzeWindowOpening\x20error:\x20','events.history','sunny','NextHours.Location_1.Day_1.current.symbol_desc','onUnload','modules','Failed\x20to\x20trigger\x20Python\x20Health\x20Check','info','add','2317118bUfWia','telegram','manual','lastTrackerEventTime','General\x20Activity\x20Trend','stringify','triggerEnergyPrediction','eventHistory','utf8','location','push','getDate','bind','now','analysis.automation.targetValue','infrasoundEnabled','getTime','Say\x20Hello','pressureBuffer','analysis.health.geminiNight','activeModules','Sonne:\x20','cogni-living','triggerEnergyPrediction\x20Error:\x20','log','weatherTempId','createDailyDigest','find','TRAIN_TOPOLOGY','NIGHT','sensorLastValues','all','analysis.automation.patternDetected','DAY','Verbindung\x20erfolgreich:\x20','enum','Gemini\x20Init\x20Error:\x20','inactivityThresholdHours','floor','analysis.energy.warmupTimes','analysis.training.triggerSecurity','./lib/installer','onStateChange','matrix','updateLocation','No\x20data','custom','{\x22history\x22:{}}','memoryCache','system.adapter.','Aktiv\x20(','endsWith','./lib/automation','checkLicense','stopService','heiter','infrasoundArmingId','toLocaleTimeString','initSchedules','¬∞C\x20(Innen:\x20','L√ºften\x20empfohlen','analysis.training.triggerEnergy','some','updateHealthVector','analysis.health.gaitSpeed','üí®\x20L√ºftung\x20in\x20','analysis.activity.roomStats','updateSchedulePreview','\x20(Threshold)','energy',':\x20Temp-Differenz\x20','moduleSecurity','motion','from','cogni-living\x20adapter\x20starting\x20(v','stateChange','writeFileSync','checkWifiPresence','minDaysForBaseline','analysis.health.activityTrend','genAI','2-digit','analysis.health.todayRoomDetails','.json','refreshCalendar\x20failed:\x20','pop','analysis.trigger','NORMAL','shift','updateTopology','sendMorningBriefing','mkdirSync','cancel','sources','max','warn','sendNotification','application/json','triggerDailyDigest','exitTimer','useCalendar','Room\x20Dwell\x20Time\x20Stats','appendToLog','analysis.security.learningStatus','üíæ\x20Saving\x20Daily\x20History\x20for\x20','config','search','Guest\x20Mode','bootTime','startSystem','state','ack','üîä\x20Infraschall-Alarm:\x20','setPresence','rawEventLog','history','apply','models/gemini-flash-latest','checkThermostats','namespace','8197vbsBMp','Current.WeatherText','round','Unknown','dailyDigests','9kIaAhg','triggerGaitAnalysis\x20parse\x20error:\x20','checkWifiPresence:\x20Error\x20checking\x20','apiKey','Niemand','initZombies','LTM.baselineStatus','üîÆ\x20Energy\x20Prediction\x20triggered\x20(','version','scanForDevices','health','setHours'];a0_0x129a=function(){return _0x494159;};return a0_0x129a();}function a0_0x4763(_0x2c2981,_0x2aa3db){const _0x1b1e7d=a0_0x129a();return a0_0x4763=function(_0xd4f82b,_0x19b6da){_0xd4f82b=_0xd4f82b-0xd7;let _0x129a2e=_0x1b1e7d[_0xd4f82b];return _0x129a2e;},a0_0x4763(_0x2c2981,_0x2aa3db);}const a0_0x204416=a0_0x4763;(function(_0x1047e8,_0x5a291e){const _0x34a55f=a0_0x4763,_0x282602=_0x1047e8();while(!![]){try{const _0x2a38ca=parseInt(_0x34a55f(0x1b1))/0x1+-parseInt(_0x34a55f(0xe1))/0x2+parseInt(_0x34a55f(0x1ee))/0x3+parseInt(_0x34a55f(0x19b))/0x4+parseInt(_0x34a55f(0x18b))/0x5+-parseInt(_0x34a55f(0x1d4))/0x6*(-parseInt(_0x34a55f(0x159))/0x7)+-parseInt(_0x34a55f(0x233))/0x8*(parseInt(_0x34a55f(0x15e))/0x9);if(_0x2a38ca===_0x5a291e)break;else _0x282602['push'](_0x282602['shift']());}catch(_0x1e91f7){_0x282602['push'](_0x282602['shift']());}}}(a0_0x129a,0x94c1e));const a0_0x19b6da=(function(){let _0x1a7514=!![];return function(_0x4b34eb,_0x3a1916){const _0x15d9c1=_0x1a7514?function(){const _0x507246=a0_0x4763;if(_0x3a1916){const _0x375e6c=_0x3a1916[_0x507246(0x155)](_0x4b34eb,arguments);return _0x3a1916=null,_0x375e6c;}}:function(){};return _0x1a7514=![],_0x15d9c1;};}()),a0_0xd4f82b=a0_0x19b6da(this,function(){const _0x5318c8=a0_0x4763;return a0_0xd4f82b[_0x5318c8(0x24e)]()['search'](_0x5318c8(0x244))['toString']()['constructor'](a0_0xd4f82b)[_0x5318c8(0x14b)](_0x5318c8(0x244));});a0_0xd4f82b();'use strict';const utils=require(a0_0x204416(0x1e8)),{GoogleGenerativeAI}=require('@google/generative-ai'),path=require('path'),fs=require('fs'),installer=require(a0_0x204416(0x10a)),scanner=require(a0_0x204416(0x234)),schedulers=require('./lib/scheduler'),topology=require(a0_0x204416(0x245)),setup=require(a0_0x204416(0x1e5)),recorder=require(a0_0x204416(0x19c)),pythonBridge=require('./lib/python_bridge'),aiAgent=require(a0_0x204416(0x231)),deadMan=require('./lib/dead_man'),automation=require(a0_0x204416(0x115)),GEMINI_MODEL=a0_0x204416(0x156);class CogniLiving extends utils['Adapter']{constructor(_0x18f7c9){const _0x3a52c3=a0_0x204416;super({..._0x18f7c9,'name':_0x3a52c3(0xf7)}),this[_0x3a52c3(0xe8)]=[],this[_0x3a52c3(0x203)]=[],this[_0x3a52c3(0x153)]=[],this['dailyDigests']=[],this[_0x3a52c3(0xff)]={},this['systemConfig']={'latitude':0x0,'longitude':0x0,'city':''},this[_0x3a52c3(0x188)]=!![],this[_0x3a52c3(0x144)]=null,this[_0x3a52c3(0x208)]=null,this[_0x3a52c3(0x223)]=![],this[_0x3a52c3(0x131)]=null,this[_0x3a52c3(0x230)]=null,this[_0x3a52c3(0x1ab)]=setup[_0x3a52c3(0x1fe)][_0x3a52c3(0x138)],this[_0x3a52c3(0x16c)]=![],this['lastAlertState']=![],this['analysisTimer']=null,this[_0x3a52c3(0x1c6)]=null,this[_0x3a52c3(0x171)]=null,this[_0x3a52c3(0x1cf)]=null,this[_0x3a52c3(0x1bf)]=null,this[_0x3a52c3(0x23f)]=null,this[_0x3a52c3(0x1a0)]=null,this[_0x3a52c3(0x1aa)]=null,this[_0x3a52c3(0x1d5)]=null,this[_0x3a52c3(0x23c)]=null,this[_0x3a52c3(0x1f0)]=null,this[_0x3a52c3(0x22f)]=![],this[_0x3a52c3(0xe4)]=Date[_0x3a52c3(0xee)](),this['memoryCache']=null,this[_0x3a52c3(0x14d)]=Date[_0x3a52c3(0xee)](),this[_0x3a52c3(0x1dc)]=![],this['pressureBuffer']=[],this[_0x3a52c3(0xf5)]={'health':!![],'security':!![],'energy':!![],'comfort':!![]},this['on']('ready',this['onReady'][_0x3a52c3(0xed)](this)),this['on'](_0x3a52c3(0x12c),this[_0x3a52c3(0x10b)][_0x3a52c3(0xed)](this)),this['on']('unload',this[_0x3a52c3(0xdc)][_0x3a52c3(0xed)](this)),this['on'](_0x3a52c3(0x1b2),this[_0x3a52c3(0x1e3)][_0x3a52c3(0xed)](this));}async[a0_0x204416(0x206)](){const _0x4affbe=a0_0x204416;this[_0x4affbe(0xf9)][_0x4affbe(0xdf)](_0x4affbe(0x12b)+this[_0x4affbe(0x166)]+')\x20-\x20Phase\x20E\x20(Scheduler\x20Fix)');if(this[_0x4affbe(0x14a)]['moduleHealth']!==undefined)this[_0x4affbe(0xf5)]['health']=this[_0x4affbe(0x14a)]['moduleHealth'];if(this[_0x4affbe(0x14a)][_0x4affbe(0x128)]!==undefined)this['activeModules']['security']=this[_0x4affbe(0x14a)]['moduleSecurity'];if(this['config'][_0x4affbe(0x1ea)]!==undefined)this[_0x4affbe(0xf5)][_0x4affbe(0x126)]=this[_0x4affbe(0x14a)][_0x4affbe(0x1ea)];if(this['config'][_0x4affbe(0x176)]!==undefined)this[_0x4affbe(0xf5)]['comfort']=this[_0x4affbe(0x14a)][_0x4affbe(0x176)];if(this[_0x4affbe(0x14a)][_0x4affbe(0xdd)])this[_0x4affbe(0xf5)]={...this[_0x4affbe(0xf5)],...this['config'][_0x4affbe(0xdd)]};this[_0x4affbe(0x14e)]();}async['startSystem'](){const _0x4af074=a0_0x204416;await setup[_0x4af074(0x163)](this);try{this[_0x4af074(0x16c)]=await setup[_0x4af074(0x116)](this['config'][_0x4af074(0x24b)]);}catch(_0x1ba567){}if(!this[_0x4af074(0x14a)]['inactivityThresholdHours']||this[_0x4af074(0x14a)][_0x4af074(0x106)]<0.1)this['config'][_0x4af074(0x106)]=0xc;await setup[_0x4af074(0x236)](this),await setup[_0x4af074(0x1e0)](this),topology[_0x4af074(0x13a)](this);try{const _0x2c874b=await this[_0x4af074(0x20f)](_0x4af074(0x108)),_0x53c5c8=await this['getStateAsync']('analysis.energy.warmupSources');_0x2c874b&&_0x2c874b[_0x4af074(0x1fb)]&&_0x53c5c8&&_0x53c5c8[_0x4af074(0x1fb)]&&(Date['now']()-_0x2c874b['ts']<0x4*0xe10*0x3e8&&(this[_0x4af074(0x111)]={'times':JSON[_0x4af074(0xd7)](_0x2c874b[_0x4af074(0x1fb)]),'sources':JSON[_0x4af074(0xd7)](_0x53c5c8[_0x4af074(0x1fb)])}));}catch(_0x597783){}if(this[_0x4af074(0x14a)][_0x4af074(0x1ed)])try{this[_0x4af074(0x131)]=new GoogleGenerativeAI(this[_0x4af074(0x14a)][_0x4af074(0x1ed)]),this[_0x4af074(0x230)]=this[_0x4af074(0x131)][_0x4af074(0x17d)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x4af074(0x142)}});}catch(_0x296e92){this[_0x4af074(0xf9)][_0x4af074(0x228)](_0x4af074(0x105)+_0x296e92[_0x4af074(0x1b2)]);}await setup[_0x4af074(0x23d)](this),await this[_0x4af074(0x239)](),schedulers[_0x4af074(0x11b)](this),await this[_0x4af074(0x216)]('analysis.visualization.pulse',{'type':_0x4af074(0x14f),'common':{'name':_0x4af074(0x1e1),'type':_0x4af074(0x1e9),'role':_0x4af074(0x190),'read':!![],'write':![]},'native':{}}),await this[_0x4af074(0x216)](_0x4af074(0x123),{'type':_0x4af074(0x14f),'common':{'name':_0x4af074(0x146),'type':'string','role':_0x4af074(0x209),'read':!![],'write':![],'def':'{\x22today\x22:{},\x20\x22yesterday\x22:{},\x20\x22date\x22:\x22\x22}'},'native':{}}),await this[_0x4af074(0x216)](_0x4af074(0x237),{'type':_0x4af074(0x14f),'common':{'name':_0x4af074(0x1b5),'type':_0x4af074(0x1d9),'role':_0x4af074(0x209),'read':!![],'write':![],'def':_0x4af074(0x110)},'native':{}}),await this[_0x4af074(0x216)](_0x4af074(0xf4),{'type':'state','common':{'name':_0x4af074(0x183),'type':_0x4af074(0x1d9),'role':_0x4af074(0x18a),'read':!![],'write':![],'def':_0x4af074(0x1d1)},'native':{}}),await this[_0x4af074(0x216)]('analysis.health.geminiDay',{'type':'state','common':{'name':_0x4af074(0x21b),'type':_0x4af074(0x1d9),'role':'text','read':!![],'write':![],'def':_0x4af074(0x1d1)},'native':{}}),await this[_0x4af074(0x216)]('analysis.health.todayVector',{'type':_0x4af074(0x14f),'common':{'name':'Daily\x20Activity\x20Vector\x20(48x30min)','type':_0x4af074(0x1d9),'role':_0x4af074(0x209),'read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x4af074(0x216)](_0x4af074(0x133),{'type':_0x4af074(0x14f),'common':{'name':_0x4af074(0x235),'type':_0x4af074(0x1d9),'role':_0x4af074(0x209),'read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x4af074(0x216)]('analysis.health.activityTrend',{'type':_0x4af074(0x14f),'common':{'name':_0x4af074(0xe5),'type':_0x4af074(0x1e9),'role':_0x4af074(0x190),'unit':'%','read':!![],'write':![]},'native':{}}),await this[_0x4af074(0x216)](_0x4af074(0x108),{'type':_0x4af074(0x14f),'common':{'name':_0x4af074(0x23b),'type':_0x4af074(0x1d9),'role':_0x4af074(0x209),'read':!![],'write':![]},'native':{}});try{const _0x1c7407=await this[_0x4af074(0x20f)](_0x4af074(0xd9));if(_0x1c7407&&_0x1c7407[_0x4af074(0x1fb)]){this[_0x4af074(0xe8)]=JSON[_0x4af074(0xd7)](_0x1c7407[_0x4af074(0x1fb)]);if(this['isProVersion']){const _0x1e8ae1=await this[_0x4af074(0x20f)](_0x4af074(0x16e));if(_0x1e8ae1&&_0x1e8ae1['val'])this[_0x4af074(0x153)]=JSON[_0x4af074(0xd7)](_0x1e8ae1[_0x4af074(0x1fb)]);}this[_0x4af074(0xf9)]['info'](_0x4af074(0x1c3)+this[_0x4af074(0xe8)][_0x4af074(0x1b7)]+_0x4af074(0x199));}}catch(_0x4918a6){this[_0x4af074(0xe8)]=[];}try{const _0x4d3fcf=await this[_0x4af074(0x20f)](_0x4af074(0x191));if(_0x4d3fcf&&_0x4d3fcf[_0x4af074(0x1fb)])this['dailyDigests']=JSON['parse'](_0x4d3fcf[_0x4af074(0x1fb)]);}catch(_0x29161e){this[_0x4af074(0x15d)]=[];}const _0x712fd6=this[_0x4af074(0x15d)][_0x4af074(0x1b7)]>=(this[_0x4af074(0x14a)][_0x4af074(0x12f)]||0x7)?_0x4af074(0x113)+this[_0x4af074(0x15d)][_0x4af074(0x1b7)]+_0x4af074(0x175):_0x4af074(0x20e)+this['dailyDigests']['length']+'/'+(this[_0x4af074(0x14a)]['minDaysForBaseline']||0x7)+')';await this[_0x4af074(0x1e2)](_0x4af074(0x164),{'val':_0x712fd6,'ack':!![]}),this[_0x4af074(0x1f2)](_0x4af074(0x137)),this[_0x4af074(0x1f2)]('LTM.triggerDailyDigest'),this[_0x4af074(0x1f2)](_0x4af074(0x243));this[_0x4af074(0x14a)][_0x4af074(0xf0)]&&this[_0x4af074(0x14a)][_0x4af074(0x212)]&&this[_0x4af074(0xf5)][_0x4af074(0x17b)]&&this['subscribeForeignStates'](this[_0x4af074(0x14a)][_0x4af074(0x212)]);const _0x15493a=this[_0x4af074(0x14a)][_0x4af074(0x1ad)];if(_0x15493a)for(const _0x20d5bd of _0x15493a){await this[_0x4af074(0x1d2)](_0x20d5bd['id']);}const _0x4e1bbf=this['config']['presenceDevices'];if(_0x4e1bbf)for(const _0x21da99 of _0x4e1bbf){await this['subscribeForeignStatesAsync'](_0x21da99);}const _0x336e81=require(_0x4af074(0x1ff));if(this[_0x4af074(0x1aa)])this[_0x4af074(0x1aa)][_0x4af074(0x13d)]();this[_0x4af074(0x1aa)]=_0x336e81['scheduleJob'](_0x4af074(0x200),()=>{const _0x5bfa41=_0x4af074;this[_0x5bfa41(0x1f7)]();}),setTimeout(()=>this[_0x4af074(0x17f)](),0x1388);if(this['roomIntegratorTimer'])clearInterval(this[_0x4af074(0x1f0)]);this[_0x4af074(0x22d)](),this['roomIntegratorTimer']=setInterval(async()=>{const _0xbea10a=_0x4af074;await this[_0xbea10a(0x22d)]();},0x3c*0x3e8);if(this[_0x4af074(0x23c)])clearInterval(this['healthTrendInterval']);this['healthTrendInterval']=setInterval(()=>{const _0x4385e5=_0x4af074;this[_0x4385e5(0x16c)]&&this[_0x4385e5(0xf5)][_0x4385e5(0x168)]&&this['runPythonHealthCheck']();},0x4*0x3c*0x3c*0x3e8);if(this['analysisTimer'])clearInterval(this['analysisTimer']);this[_0x4af074(0xf5)][_0x4af074(0x126)]&&(this[_0x4af074(0x1c4)]=setInterval(()=>{const _0x2999e6=_0x4af074;this[_0x2999e6(0xe7)]();},0xf*0x3c*0x3e8),setTimeout(()=>this['triggerEnergyPrediction'](),0x2710));if(this[_0x4af074(0x1c6)])clearInterval(this[_0x4af074(0x1c6)]);this[_0x4af074(0x14a)][_0x4af074(0x145)]&&this[_0x4af074(0xf5)][_0x4af074(0x126)]&&(this[_0x4af074(0x1c6)]=setInterval(()=>{const _0x5b5eb5=_0x4af074;automation[_0x5b5eb5(0x211)](this);},0x2*0x3c*0x3e8),setTimeout(()=>automation[_0x4af074(0x211)](this),0x3a98));if(this[_0x4af074(0x171)])clearInterval(this['presenceCheckTimer']);this[_0x4af074(0x14a)][_0x4af074(0x1b0)]&&this[_0x4af074(0x14a)][_0x4af074(0x1b0)][_0x4af074(0x1b7)]>0x0&&(this['presenceCheckTimer']=setInterval(async()=>{const _0x46227e=_0x4af074;await this[_0x46227e(0x12e)]();},0x3c*0x3e8),setTimeout(async()=>await this[_0x4af074(0x12e)](),0x1388));const _0x5bc81e=path[_0x4af074(0x24c)](__dirname,_0x4af074(0x204),'bin','python');pythonBridge['startService'](this,_0x5bc81e);}[a0_0x204416(0xdc)](_0x5d5f7f){const _0x36f950=a0_0x204416;if(this[_0x36f950(0x1aa)])this[_0x36f950(0x1aa)][_0x36f950(0x13d)]();this[_0x36f950(0x1f7)]()['then'](()=>{const _0x585132=_0x36f950;if(this[_0x585132(0x1c4)])clearInterval(this[_0x585132(0x1c4)]);if(this[_0x585132(0x1c6)])clearInterval(this[_0x585132(0x1c6)]);if(this['presenceCheckTimer'])clearInterval(this[_0x585132(0x171)]);if(this[_0x585132(0x1f0)])clearInterval(this[_0x585132(0x1f0)]);recorder[_0x585132(0x224)](this),pythonBridge[_0x585132(0x117)](this),_0x5d5f7f();});}async['replayTodayEvents'](){const _0x11488d=a0_0x204416;if(!this[_0x11488d(0xe8)]||this[_0x11488d(0xe8)][_0x11488d(0x1b7)]===0x0){this[_0x11488d(0xf9)][_0x11488d(0x140)]('‚ö†\x20Replay\x20skipped:\x20No\x20events\x20in\x20memory.');return;}this[_0x11488d(0xf9)][_0x11488d(0xdf)]('‚Ü∫\x20Replaying\x20'+this['eventHistory']['length']+_0x11488d(0x241));const _0x42dd37=new Date()['setHours'](0x0,0x0,0x0,0x0),_0x3bdf3b=_0x11488d(0x237);let _0x58efe5={'history':{},'date':new Date()[_0x11488d(0x22a)]()};const _0x419c2c=_0x11488d(0x1a3),_0x89f635=_0x11488d(0x133);let _0x1560ee=new Array(0x30)[_0x11488d(0x24a)](0x0),_0x38bec5=Array['from']({'length':0x30},()=>[]);this[_0x11488d(0xe8)][_0x11488d(0x21a)](_0x1a53f9=>{const _0x37087d=_0x11488d;if(_0x1a53f9[_0x37087d(0x1bc)]>=_0x42dd37){if(recorder[_0x37087d(0x1ec)](_0x1a53f9[_0x37087d(0x16d)],_0x1a53f9[_0x37087d(0x190)])){const _0x358f6f=new Date(_0x1a53f9[_0x37087d(0x1bc)]),_0x39c296=_0x358f6f[_0x37087d(0x1a2)]()*0x2+(_0x358f6f['getMinutes']()>=0x1e?0x1:0x0);if(_0x39c296<0x30){_0x1560ee[_0x39c296]++;const _0x4821f6=_0x1a53f9['location']||_0x1a53f9['name']||'?';let _0x5383ca=_0x38bec5[_0x39c296];!_0x5383ca['includes'](_0x4821f6)&&_0x5383ca['push'](_0x4821f6);}const _0x53e314=_0x358f6f[_0x37087d(0x1a2)]();let _0x2f99d5=_0x1a53f9[_0x37087d(0xea)]||'Unknown';const _0x347881=(this['config'][_0x37087d(0x1ad)]||[])[_0x37087d(0xfc)](_0x47a840=>_0x47a840[_0x37087d(0xea)]===_0x2f99d5);if(_0x347881)_0x2f99d5=_0x347881[_0x37087d(0xea)];if(!_0x58efe5['history'][_0x2f99d5])_0x58efe5[_0x37087d(0x154)][_0x2f99d5]=new Array(0x18)['fill'](0x0);if(_0x58efe5[_0x37087d(0x154)][_0x2f99d5][_0x53e314]<0x3c)_0x58efe5[_0x37087d(0x154)][_0x2f99d5][_0x53e314]++;}}});const _0x10d5f7=await this[_0x11488d(0x20f)](_0x3bdf3b);(!_0x10d5f7||!_0x10d5f7[_0x11488d(0x1fb)]||_0x10d5f7[_0x11488d(0x1fb)]==='{}'||_0x10d5f7[_0x11488d(0x1fb)]['includes'](_0x11488d(0x180)))&&await this[_0x11488d(0x1e2)](_0x3bdf3b,{'val':JSON['stringify'](_0x58efe5),'ack':!![]}),await this[_0x11488d(0x1e2)](_0x419c2c,{'val':JSON[_0x11488d(0xe6)](_0x1560ee),'ack':!![]}),await this[_0x11488d(0x1e2)](_0x89f635,{'val':JSON[_0x11488d(0xe6)](_0x38bec5),'ack':!![]}),this[_0x11488d(0xf9)]['info'](_0x11488d(0x215));}async[a0_0x204416(0x1f7)](){const _0x3ac08d=a0_0x204416;if(!this['activeModules'][_0x3ac08d(0x168)])return;const _0x378560=new Date()[_0x3ac08d(0x1c8)]()[_0x3ac08d(0x24d)]('T')[0x0];this[_0x3ac08d(0xf9)][_0x3ac08d(0x1bd)](_0x3ac08d(0x149)+_0x378560+_0x3ac08d(0x1eb));try{const [_0x543768,_0x5d314c,_0x64a122,_0x34f690,_0x20bfa1,_0x1e8836,_0x1888b5]=await Promise[_0x3ac08d(0x100)]([this[_0x3ac08d(0x20f)](_0x3ac08d(0x237)),this[_0x3ac08d(0x20f)](_0x3ac08d(0xf4)),this[_0x3ac08d(0x20f)](_0x3ac08d(0x1be)),this[_0x3ac08d(0x20f)]('analysis.security.lastScore'),this['getStateAsync'](_0x3ac08d(0x1a3)),this[_0x3ac08d(0x20f)](_0x3ac08d(0x130)),this[_0x3ac08d(0x20f)](_0x3ac08d(0x121))]),_0x1bd986=new Date()[_0x3ac08d(0x169)](0x0,0x0,0x0,0x0),_0x170b9d=this['eventHistory'][_0x3ac08d(0x221)](_0x1e1a76=>_0x1e1a76[_0x3ac08d(0x1bc)]>=_0x1bd986&&(_0x1e1a76[_0x3ac08d(0x1cb)]['toLowerCase']()[_0x3ac08d(0x189)]('haust√ºr')||_0x1e1a76['name'][_0x3ac08d(0x1b6)]()[_0x3ac08d(0x189)]('terrasse'))&&(_0x1e1a76[_0x3ac08d(0x190)]===!![]||_0x1e1a76[_0x3ac08d(0x190)]===_0x3ac08d(0x1a1)))[_0x3ac08d(0x1b7)];let _0x4ebf54=0x55;if(_0x1e8836&&_0x1e8836[_0x3ac08d(0x1fb)]!==undefined)_0x4ebf54=Math[_0x3ac08d(0x202)](0x64,Math[_0x3ac08d(0x13f)](0x14,Math[_0x3ac08d(0x15b)](0x50+Number(_0x1e8836[_0x3ac08d(0x1fb)])*0x5)));const _0x5dc3b7=this['eventHistory'][_0x3ac08d(0x221)](_0xfbfed=>_0xfbfed[_0x3ac08d(0x1bc)]>=_0x1bd986),_0x3ff625={'date':_0x378560,'timestamp':Date[_0x3ac08d(0xee)](),'roomHistory':_0x543768?.['val']?JSON[_0x3ac08d(0xd7)](_0x543768[_0x3ac08d(0x1fb)]):{},'geminiNight':_0x5d314c?.[_0x3ac08d(0x1fb)]||_0x3ac08d(0x1e6),'geminiDay':_0x64a122?.['val']||_0x3ac08d(0x1e6),'anomalyScore':_0x34f690?.['val']||0.1,'todayVector':_0x20bfa1?.[_0x3ac08d(0x1fb)]?JSON[_0x3ac08d(0xd7)](_0x20bfa1['val']):new Array(0x30)[_0x3ac08d(0x24a)](0x0),'batteryLevel':_0x4ebf54,'freshAirCount':_0x170b9d,'gaitSpeed':_0x1888b5?.[_0x3ac08d(0x1fb)]!==undefined&&_0x1888b5?.[_0x3ac08d(0x1fb)]!==null?Number(_0x1888b5[_0x3ac08d(0x1fb)]):null,'eventHistory':_0x5dc3b7},_0x49696f=utils[_0x3ac08d(0x174)](),_0x461b7b=path[_0x3ac08d(0x24c)](_0x49696f,_0x3ac08d(0xf7),_0x3ac08d(0x154));if(!fs['existsSync'](_0x461b7b))fs[_0x3ac08d(0x13c)](_0x461b7b,{'recursive':!![]});const _0x11fbcf=path[_0x3ac08d(0x24c)](_0x461b7b,_0x378560+_0x3ac08d(0x134));fs[_0x3ac08d(0x12d)](_0x11fbcf,JSON[_0x3ac08d(0xe6)](_0x3ff625)),this['log']['info'](_0x3ac08d(0x20c)+_0x11fbcf);}catch(_0x2b3c77){this['log']['error']('History\x20Save\x20Error:\x20'+_0x2b3c77[_0x3ac08d(0x1b2)]);}}async[a0_0x204416(0x22d)](){const _0x310bf2=a0_0x204416;if(!this[_0x310bf2(0x188)])return;try{let _0x62302a=null;try{const _0x117564=await this[_0x310bf2(0x20f)](_0x310bf2(0x19f)),_0x41d2d2=await this['getStateAsync'](_0x310bf2(0x16a));if(_0x117564&&_0x117564[_0x310bf2(0x1fb)]&&_0x41d2d2&&_0x41d2d2[_0x310bf2(0x1fb)]&&_0x41d2d2['val']>0.3){if(_0x117564['val']!=='Unknown'&&_0x117564[_0x310bf2(0x1fb)]!==_0x310bf2(0x18c))_0x62302a=_0x117564[_0x310bf2(0x1fb)];}}catch(_0x59bbf5){}if(!_0x62302a){const _0x22a220=this['config'][_0x310bf2(0x1ad)]||[];for(const _0x253faf of _0x22a220){if(_0x253faf['type']==='motion'&&_0x253faf['location'])try{const _0x3729b2=await this[_0x310bf2(0x1a5)](_0x253faf['id']);if(_0x3729b2&&(_0x3729b2[_0x310bf2(0x1fb)]===!![]||_0x3729b2[_0x310bf2(0x1fb)]==='on'||_0x3729b2['val']===0x1)){_0x62302a=_0x253faf[_0x310bf2(0xea)];break;}}catch(_0x2cc4a5){}}}if(!_0x62302a)return;const _0x16259d=this[_0x310bf2(0x14a)][_0x310bf2(0x1ad)]||[];let _0x3ef298=_0x62302a;const _0x351e14=_0x16259d['find'](_0x56a118=>_0x56a118[_0x310bf2(0xea)]&&_0x56a118['location'][_0x310bf2(0x1b6)]()===_0x62302a[_0x310bf2(0x1b6)]());if(_0x351e14)_0x3ef298=_0x351e14[_0x310bf2(0xea)];const _0x5c6d42=_0x310bf2(0x237),_0x291689=await this['getStateAsync'](_0x5c6d42),_0x28af04=new Date()[_0x310bf2(0x22a)]();let _0x528112={'history':{},'date':_0x28af04};if(_0x291689&&_0x291689['val'])try{_0x528112=JSON['parse'](_0x291689[_0x310bf2(0x1fb)]);}catch(_0x3bd31e){}_0x528112[_0x310bf2(0x222)]!==_0x28af04&&(_0x528112[_0x310bf2(0x154)]={},_0x528112['date']=_0x28af04);if(!_0x528112['history'][_0x3ef298])_0x528112['history'][_0x3ef298]=new Array(0x18)['fill'](0x0);const _0x233af6=new Date()['getHours']();if(_0x528112[_0x310bf2(0x154)][_0x3ef298][_0x233af6]<0x3c)_0x528112['history'][_0x3ef298][_0x233af6]++;await this[_0x310bf2(0x1e2)](_0x5c6d42,{'val':JSON[_0x310bf2(0xe6)](_0x528112),'ack':!![]});}catch(_0x2561db){this[_0x310bf2(0xf9)][_0x310bf2(0x140)](_0x310bf2(0x177)+_0x2561db[_0x310bf2(0x1b2)]);}}async[a0_0x204416(0x1e3)](_0x1573ec){const _0x102908=a0_0x204416;if(typeof _0x1573ec===_0x102908(0x184)&&_0x1573ec['message']){if(_0x1573ec[_0x102908(0x218)]===_0x102908(0x197)){const _0xe0b346=_0x1573ec[_0x102908(0x1b2)][_0x102908(0x222)],_0x5216de=utils['getAbsoluteDefaultDataDir'](),_0x3087f8=path['join'](_0x5216de,'cogni-living',_0x102908(0x154),_0xe0b346+_0x102908(0x134));if(fs['existsSync'](_0x3087f8))try{const _0x16ffe3=JSON[_0x102908(0xd7)](fs[_0x102908(0x1b4)](_0x3087f8,_0x102908(0xe9)));this['sendTo'](_0x1573ec[_0x102908(0x12a)],_0x1573ec['command'],{'success':!![],'data':_0x16ffe3},_0x1573ec[_0x102908(0x219)]);}catch(_0x228178){this[_0x102908(0x1a6)](_0x1573ec[_0x102908(0x12a)],_0x1573ec[_0x102908(0x218)],{'success':![],'error':_0x102908(0x1fd)},_0x1573ec[_0x102908(0x219)]);}else this[_0x102908(0x1a6)](_0x1573ec[_0x102908(0x12a)],_0x1573ec[_0x102908(0x218)],{'success':![],'error':_0x102908(0x10e)},_0x1573ec[_0x102908(0x219)]);}else{if(_0x1573ec[_0x102908(0x218)]===_0x102908(0x226)){const _0x561ea8=this[_0x102908(0x15d)][_0x102908(0x1b7)];let _0x489067=new Array(0x30)[_0x102908(0x24a)](0x0),_0x164329=Array[_0x102908(0x12a)]({'length':0x30},()=>[]);try{const _0x579715=await this[_0x102908(0x20f)](_0x102908(0x1a3));if(_0x579715&&_0x579715[_0x102908(0x1fb)])_0x489067=JSON[_0x102908(0xd7)](_0x579715['val']);const _0x5de8f1=await this[_0x102908(0x20f)](_0x102908(0x133));if(_0x5de8f1&&_0x5de8f1[_0x102908(0x1fb)])_0x164329=JSON[_0x102908(0xd7)](_0x5de8f1[_0x102908(0x1fb)]);}catch(_0x195406){}let _0x454656=new Array(0x30)[_0x102908(0x24a)](0x0);try{const _0xeed242=new Date();_0xeed242[_0x102908(0x23a)](_0xeed242[_0x102908(0xec)]()-0x1);const _0x3a46c3=_0xeed242['toISOString']()[_0x102908(0x24d)]('T')[0x0],_0x124936=utils[_0x102908(0x174)](),_0xd10353=path[_0x102908(0x24c)](_0x124936,_0x102908(0xf7),_0x102908(0x154),_0x3a46c3+_0x102908(0x134));if(fs[_0x102908(0x1b3)](_0xd10353)){const _0x2a5162=JSON['parse'](fs[_0x102908(0x1b4)](_0xd10353,'utf8'));if(_0x2a5162&&_0x2a5162[_0x102908(0x214)])_0x454656=_0x2a5162[_0x102908(0x214)];}}catch(_0x44c25b){}let _0xb68d9d={'today':{},'yesterday':{}};try{const _0x519a78=await this['getStateAsync']('analysis.activity.roomStats');if(_0x519a78&&_0x519a78[_0x102908(0x1fb)])_0xb68d9d=JSON['parse'](_0x519a78[_0x102908(0x1fb)]);}catch(_0x3a7b17){}let _0x54d3e0=null;try{const _0x3e663e=await this[_0x102908(0x20f)](_0x102908(0x130));if(_0x3e663e)_0x54d3e0=_0x3e663e[_0x102908(0x1fb)];}catch(_0x39c018){}if(_0x54d3e0===undefined||_0x54d3e0===null){const _0x5ae9e6=_0x489067[_0x102908(0x1fc)]((_0x140cba,_0x359909)=>_0x140cba+_0x359909,0x0),_0x13930c=Math['min'](0x2,Math[_0x102908(0x13f)](-0x2,(0x64-_0x5ae9e6)/0x32));_0x54d3e0=_0x13930c;}let _0xfe268a=![],_0x3b0401='',_0x1d9216='',_0x2bcf75='';try{const _0x2a1bd1=await this[_0x102908(0x20f)](_0x102908(0x101));if(_0x2a1bd1&&_0x2a1bd1[_0x102908(0x1fb)]){_0xfe268a=!![];const _0x45cc11=await this[_0x102908(0x20f)](_0x102908(0x225));_0x3b0401=_0x45cc11?_0x45cc11[_0x102908(0x1fb)]:'';const _0x3ac3ae=await this[_0x102908(0x20f)](_0x102908(0x238));_0x1d9216=_0x3ac3ae?_0x3ac3ae[_0x102908(0x1fb)]:'';const _0x3dec87=await this[_0x102908(0x20f)](_0x102908(0xef));_0x2bcf75=_0x3dec87?_0x3dec87[_0x102908(0x1fb)]:'';}}catch(_0xdbfee2){}const _0x13936e=await this[_0x102908(0x1db)](),_0x423cf4=(this[_0x102908(0x14a)][_0x102908(0x1ad)]||[])[_0x102908(0x11f)](_0x5bf774=>_0x5bf774[_0x102908(0x19a)]),_0x4fccac=_0x13936e&&_0x423cf4;let _0x4a06f3='';try{const _0x500faf=await this[_0x102908(0x20f)](_0x102908(0x193));if(_0x500faf&&_0x500faf[_0x102908(0x1fb)])_0x4a06f3=_0x500faf[_0x102908(0x1fb)];}catch(_0x29d7e5){}this[_0x102908(0x1a6)](_0x1573ec[_0x102908(0x12a)],_0x1573ec[_0x102908(0x218)],{'success':!![],'eventHistory':this['eventHistory'][_0x102908(0x247)](0x0,0x7d0),'stats':{'digestCount':_0x561ea8,'isPresent':this[_0x102908(0x188)],'hourlyActivity':_0x489067,'hourlyDetails':_0x164329,'yesterdayActivity':_0x454656,'solarActive':_0x4fccac,'presenceWho':_0x4a06f3,'roomStats':_0xb68d9d,'activityTrend':_0x54d3e0,'modules':this['activeModules']},'automation':{'detected':_0xfe268a,'description':_0x3b0401,'targetId':_0x1d9216,'targetValue':_0x2bcf75}},_0x1573ec['callback']);}else{if(_0x1573ec[_0x102908(0x218)]===_0x102908(0x157))try{const _0x1243dc=await automation['scanThermostats'](this);this[_0x102908(0x1a6)](_0x1573ec[_0x102908(0x12a)],_0x1573ec[_0x102908(0x218)],{'success':!![],'results':_0x1243dc},_0x1573ec[_0x102908(0x219)]);}catch(_0x196605){this[_0x102908(0x1a6)](_0x1573ec[_0x102908(0x12a)],_0x1573ec[_0x102908(0x218)],{'success':![],'error':_0x196605[_0x102908(0x1b2)]},_0x1573ec[_0x102908(0x219)]);}else{if(_0x1573ec['command']==='scanDevices')try{const _0x13377d=await scanner[_0x102908(0x167)](this,_0x1573ec[_0x102908(0x1b2)]||{});this['sendTo'](_0x1573ec[_0x102908(0x12a)],_0x1573ec[_0x102908(0x218)],{'success':!![],'devices':_0x13377d},_0x1573ec['callback']);}catch(_0x3d8295){}else{if(_0x1573ec[_0x102908(0x218)]===_0x102908(0x172)){const _0x1fb5cc=await this[_0x102908(0x1af)](_0x102908(0x232),_0x102908(0x104)),_0x1a8bfb=[];if(_0x1fb5cc)for(const _0x2a55a1 in _0x1fb5cc){let _0xcbbd4a=_0x1fb5cc[_0x2a55a1][_0x102908(0x17a)][_0x102908(0x1cb)];if(_0xcbbd4a&&typeof _0xcbbd4a===_0x102908(0x184))_0xcbbd4a=_0xcbbd4a['de']||_0xcbbd4a['en']||Object[_0x102908(0x1b9)](_0xcbbd4a)[0x0]||JSON[_0x102908(0xe6)](_0xcbbd4a);_0x1a8bfb[_0x102908(0xeb)]({'id':_0x2a55a1,'name':String(_0xcbbd4a||_0x2a55a1)});}const _0x56ab0b=await this[_0x102908(0x1af)]('enum.rooms.*','enum'),_0x44100d=[];if(_0x56ab0b)for(const _0xe7f16b in _0x56ab0b){let _0x3883d8=_0x56ab0b[_0xe7f16b]['common']['name'];if(_0x3883d8&&typeof _0x3883d8===_0x102908(0x184))_0x3883d8=_0x3883d8['de']||_0x3883d8['en']||Object['values'](_0x3883d8)[0x0]||JSON[_0x102908(0xe6)](_0x3883d8);_0x44100d[_0x102908(0xeb)](String(_0x3883d8||_0xe7f16b[_0x102908(0x24d)]('.')['pop']()));}this[_0x102908(0x1a6)](_0x1573ec[_0x102908(0x12a)],_0x1573ec[_0x102908(0x218)],{'success':!![],'enums':_0x1a8bfb,'rooms':_0x44100d},_0x1573ec[_0x102908(0x219)]);}else{if(_0x1573ec['command']===_0x102908(0x18d))try{const _0x2dfd65=await this[_0x102908(0x1e4)](_0x102908(0x1a7),'instance',{'startkey':_0x102908(0x1f1),'endkey':_0x102908(0x248)}),_0x4872cc=new Set();if(_0x2dfd65&&_0x2dfd65[_0x102908(0x17c)])for(const _0x236050 of _0x2dfd65[_0x102908(0x17c)]){const _0x159110=_0x236050['id']['replace'](_0x102908(0x112),''),_0x1ddc70=await this['getForeignStateAsync'](_0x159110+'.data.table');let _0x357ce6=![];if(_0x1ddc70&&_0x1ddc70[_0x102908(0x1fb)]){const _0x1b0e30=typeof _0x1ddc70[_0x102908(0x1fb)]===_0x102908(0x1d9)?JSON[_0x102908(0xd7)](_0x1ddc70[_0x102908(0x1fb)]):_0x1ddc70[_0x102908(0x1fb)];Array[_0x102908(0x1ae)](_0x1b0e30)&&_0x1b0e30[_0x102908(0x21a)](_0x4a76d1=>{const _0xbeca7b=_0x102908;_0x4a76d1[_0xbeca7b(0x1cd)]&&(_0x4872cc[_0xbeca7b(0xe0)](_0x4a76d1[_0xbeca7b(0x1cd)]),_0x357ce6=!![]);});}!_0x357ce6&&_0x4872cc[_0x102908(0xe0)](_0x159110);}const _0x7b26a6=Array[_0x102908(0x12a)](_0x4872cc);if(_0x7b26a6['length']===0x0)_0x7b26a6['push'](_0x102908(0x1d7));this[_0x102908(0x1a6)](_0x1573ec['from'],_0x1573ec[_0x102908(0x218)],{'success':!![],'names':_0x7b26a6},_0x1573ec['callback']);}catch(_0x30ab2c){this[_0x102908(0x1a6)](_0x1573ec[_0x102908(0x12a)],_0x1573ec[_0x102908(0x218)],{'success':![],'error':_0x102908(0x1b8)+_0x30ab2c[_0x102908(0x1b2)]},_0x1573ec[_0x102908(0x219)]);}else{if(_0x1573ec['command']===_0x102908(0x1c9))try{await automation[_0x102908(0x124)](this),this[_0x102908(0x1a6)](_0x1573ec[_0x102908(0x12a)],_0x1573ec[_0x102908(0x218)],{'success':!![]},_0x1573ec['callback']);}catch(_0x3927ac){this['log']['warn'](_0x102908(0x135)+_0x3927ac[_0x102908(0x1b2)]),this['sendTo'](_0x1573ec[_0x102908(0x12a)],_0x1573ec[_0x102908(0x218)],{'success':![],'error':_0x3927ac['message']},_0x1573ec[_0x102908(0x219)]);}else{if(_0x1573ec[_0x102908(0x218)]===_0x102908(0x173))try{const _0x155de7=_0x1573ec[_0x102908(0x1b2)][_0x102908(0x10c)];if(!_0x155de7||!Array['isArray'](_0x155de7))throw new Error(_0x102908(0x229));const _0x4172af=await this[_0x102908(0x20f)]('analysis.topology.structure');if(_0x4172af&&_0x4172af[_0x102908(0x1fb)]){const _0x4caec3=JSON[_0x102908(0xd7)](_0x4172af[_0x102908(0x1fb)]);_0x4caec3[_0x102908(0x10c)]=_0x155de7,_0x4caec3[_0x102908(0x1f8)]=Date['now'](),await this[_0x102908(0x1e2)](_0x102908(0x1d3),{'val':JSON['stringify'](_0x4caec3),'ack':!![]}),this[_0x102908(0xf9)][_0x102908(0x1bd)]('üï∏Ô∏è\x20Topology\x20Matrix\x20manually\x20updated\x20by\x20user.'),this[_0x102908(0x1a6)](_0x1573ec[_0x102908(0x12a)],_0x1573ec[_0x102908(0x218)],{'success':!![]},_0x1573ec['callback']);}else throw new Error('No\x20topology\x20data\x20found');}catch(_0x1b44fc){this[_0x102908(0xf9)][_0x102908(0x140)](_0x102908(0x19e)+_0x1b44fc[_0x102908(0x1b2)]),this[_0x102908(0x1a6)](_0x1573ec[_0x102908(0x12a)],_0x1573ec['command'],{'success':![],'error':_0x1b44fc[_0x102908(0x1b2)]},_0x1573ec[_0x102908(0x219)]);}else{if(_0x1573ec[_0x102908(0x218)]==='pythonBridge')try{const _0x49f787=_0x1573ec[_0x102908(0x1b2)][_0x102908(0x218)],_0x34a921=_0x1573ec[_0x102908(0x1b2)];this[_0x102908(0xf9)][_0x102908(0x1bd)]('[PythonBridge]\x20Forwarding\x20command:\x20'+_0x49f787),pythonBridge[_0x102908(0x1c2)](this,_0x49f787,_0x34a921,_0x31158a=>{const _0x18e363=_0x102908;this[_0x18e363(0x1a6)](_0x1573ec[_0x18e363(0x12a)],_0x1573ec[_0x18e363(0x218)],_0x31158a,_0x1573ec[_0x18e363(0x219)]);});}catch(_0x2d1b63){this[_0x102908(0xf9)][_0x102908(0x140)]('pythonBridge\x20command\x20failed:\x20'+_0x2d1b63[_0x102908(0x1b2)]),this[_0x102908(0x1a6)](_0x1573ec[_0x102908(0x12a)],_0x1573ec[_0x102908(0x218)],{'type':_0x102908(0x18e),'payload':_0x2d1b63['message']},_0x1573ec[_0x102908(0x219)]);}else{if(_0x1573ec[_0x102908(0x218)]===_0x102908(0x198))try{const _0x10709c=_0x1573ec['message']?_0x1573ec[_0x102908(0x1b2)][_0x102908(0x161)]:'';if(!_0x10709c)throw new Error('Kein\x20API\x20Key\x20√ºbergeben.');const _0x33965d=new GoogleGenerativeAI(_0x10709c),_0x53812e=_0x33965d['getGenerativeModel']({'model':GEMINI_MODEL}),_0x179718=await _0x53812e[_0x102908(0x1cc)](_0x102908(0xf2)),_0x4b62e4=await _0x179718[_0x102908(0x1de)],_0x25ba9a=_0x4b62e4[_0x102908(0x18a)]();this[_0x102908(0x1a6)](_0x1573ec['from'],_0x1573ec[_0x102908(0x218)],{'success':!![],'message':_0x102908(0x103)+_0x25ba9a['substring'](0x0,0x14)+_0x102908(0x1eb)},_0x1573ec['callback']);}catch(_0x3e6ae5){this[_0x102908(0x1a6)](_0x1573ec[_0x102908(0x12a)],_0x1573ec[_0x102908(0x218)],{'success':![],'message':_0x3e6ae5[_0x102908(0x1b2)]},_0x1573ec[_0x102908(0x219)]);}else{if(_0x1573ec[_0x102908(0x218)]===_0x102908(0x16f))try{const _0xfc7aea=await this[_0x102908(0x1db)](),_0x10f556=await this[_0x102908(0x1e4)](_0x102908(0x1a7),_0x102908(0x16b),{'startkey':_0x102908(0x1f1),'endkey':_0x102908(0x248)}),_0x534827=_0x10f556&&_0x10f556[_0x102908(0x17c)]?_0x10f556[_0x102908(0x17c)][_0x102908(0x1b7)]:0x0;this[_0x102908(0x1a6)](_0x1573ec[_0x102908(0x12a)],_0x1573ec[_0x102908(0x218)],{'success':!![],'weather':_0x102908(0xf6)+_0xfc7aea+',\x20Temp:\x20'+(this['sensorLastValues'][this[_0x102908(0x14a)]['outdoorSensorId']]||'?')+'¬∞C','calendar':_0x534827+_0x102908(0x1fa)},_0x1573ec[_0x102908(0x219)]);}catch(_0xa0e52){this['sendTo'](_0x1573ec['from'],_0x1573ec[_0x102908(0x218)],{'success':![]},_0x1573ec[_0x102908(0x219)]);}}}}}}}}}}}}}[a0_0x204416(0x1df)](){const _0x51e3c8=a0_0x204416;if(!this[_0x51e3c8(0xf5)][_0x51e3c8(0x168)])return;this['log']['debug'](_0x51e3c8(0x1c5));try{const _0x72dfcb=this[_0x51e3c8(0x153)]||[];pythonBridge['send'](this,_0x51e3c8(0x1d0),{'events':_0x72dfcb});}catch(_0x4090e9){this['log']['warn'](_0x51e3c8(0xde));}}async[a0_0x204416(0x10b)](_0x409940,_0xb22462){const _0x388fe7=a0_0x204416;if(!_0xb22462||this[_0x388fe7(0x22f)])return;if(_0x409940[_0x388fe7(0x189)](_0x388fe7(0xe2))&&_0x409940[_0x388fe7(0x114)](_0x388fe7(0x1d6))&&_0xb22462['val'])return;if(this[_0x388fe7(0x14a)]['infrasoundEnabled']&&_0x409940===this['config'][_0x388fe7(0x212)]&&this[_0x388fe7(0xf5)]['security']){this[_0x388fe7(0x22b)](_0xb22462[_0x388fe7(0x1fb)]);return;}if(_0xb22462[_0x388fe7(0x150)]&&_0x409940[_0x388fe7(0x114)]('pulse'))return;if(_0x409940===this[_0x388fe7(0x158)]+_0x388fe7(0x21e)){if(_0xb22462[_0x388fe7(0x1fb)]&&Object[_0x388fe7(0x1b9)](setup['SYSTEM_MODES'])['includes'](_0xb22462['val'])){this['currentSystemMode']=_0xb22462[_0x388fe7(0x1fb)];if(_0xb22462[_0x388fe7(0x1fb)]===setup[_0x388fe7(0x1fe)][_0x388fe7(0x18f)])await recorder['setPresence'](this,![]);else await recorder[_0x388fe7(0x152)](this,!![]);if(this[_0x388fe7(0x16c)]){let _0x2adf8d=![],_0x1b8642=0x0,_0x40750c=_0x388fe7(0xe3);if(this['currentSystemMode']==='party')_0x2adf8d=!![],_0x1b8642=0x168,_0x40750c=_0x388fe7(0x1a8);else this[_0x388fe7(0x1ab)]===_0x388fe7(0x1f4)&&(_0x2adf8d=!![],_0x1b8642=0x5a0,_0x40750c=_0x388fe7(0x14c));pythonBridge['send'](this,_0x388fe7(0x1c1),{'active':_0x2adf8d,'duration':_0x1b8642,'label':_0x40750c}),await this[_0x388fe7(0x1e2)](_0x388fe7(0x148),{'val':JSON[_0x388fe7(0xe6)]({'active':_0x2adf8d,'label':_0x40750c,'timestamp':Date[_0x388fe7(0xee)]()}),'ack':!![]});}}if(!_0xb22462['ack'])this[_0x388fe7(0x1e7)](_0x409940,{'val':this[_0x388fe7(0x1ab)],'ack':!![]});return;}if(_0x409940[_0x388fe7(0x114)](_0x388fe7(0x19d))&&_0xb22462[_0x388fe7(0x150)])this[_0x388fe7(0x240)](_0xb22462[_0x388fe7(0x1fb)]);if(_0x409940['endsWith'](_0x388fe7(0x108))&&_0xb22462['ack']&&this[_0x388fe7(0xf5)]['energy'])automation[_0x388fe7(0x211)](this);if(!_0xb22462['ack']){if(_0x409940['includes']('analysis.trigger')&&_0xb22462['val']){this['setState'](_0x409940,{'val':![],'ack':!![]}),aiAgent[_0x388fe7(0x1bb)](this);return;}if(_0x409940[_0x388fe7(0x189)](_0x388fe7(0x143))&&_0xb22462[_0x388fe7(0x1fb)]){this[_0x388fe7(0x1e7)](_0x409940,{'val':![],'ack':!![]});if(this[_0x388fe7(0x16c)])aiAgent[_0x388fe7(0xfb)](this,pythonBridge);return;}if(_0x409940['includes']('triggerBriefing')&&_0xb22462[_0x388fe7(0x1fb)]){this[_0x388fe7(0x1e7)](_0x409940,{'val':![],'ack':!![]}),aiAgent[_0x388fe7(0x13b)](this);return;}if(_0x409940[_0x388fe7(0x189)]('automation.triggerAction')&&_0xb22462['val']){this[_0x388fe7(0x1e7)](_0x409940,{'val':![],'ack':!![]}),aiAgent[_0x388fe7(0x1ef)](this);return;}if(_0x409940[_0x388fe7(0x189)](_0x388fe7(0x109))&&_0xb22462[_0x388fe7(0x1fb)]){this[_0x388fe7(0x1e7)](_0x409940,{'val':![],'ack':!![]});if(this[_0x388fe7(0x16c)])try{const _0x348aca=await this[_0x388fe7(0x20f)]('LTM.trainingData.sequences');if(_0x348aca&&_0x348aca[_0x388fe7(0x1fb)]){const _0x4b6f40=JSON[_0x388fe7(0xd7)](_0x348aca[_0x388fe7(0x1fb)]);this[_0x388fe7(0x1e2)](_0x388fe7(0x210),{'val':_0x388fe7(0x192),'ack':!![]}),pythonBridge[_0x388fe7(0x1c2)](this,'TRAIN_SECURITY',{'sequences':_0x4b6f40});}}catch(_0x1f0513){}return;}if(_0x409940['includes'](_0x388fe7(0x243))&&_0xb22462[_0x388fe7(0x1fb)]){this['setState'](_0x409940,{'val':![],'ack':!![]});try{aiAgent['generateHealthReport'](this,_0x388fe7(0xfe)),setTimeout(()=>aiAgent[_0x388fe7(0x17e)](this,_0x388fe7(0x102)),0x2ee0);if(this[_0x388fe7(0x16c)]){this['runPythonHealthCheck']();const _0x1c0423=await this['getStateAsync']('LTM.dailyDigests');if(_0x1c0423&&_0x1c0423['val'])pythonBridge[_0x388fe7(0x1c2)](this,'TRAIN_HEALTH',{'digests':JSON[_0x388fe7(0xd7)](_0x1c0423[_0x388fe7(0x1fb)])});}}catch(_0x1de101){this[_0x388fe7(0xf9)]['warn'](_0x388fe7(0x20b)+_0x1de101['message']);}return;}if(_0x409940[_0x388fe7(0x189)](_0x388fe7(0x11e))&&_0xb22462[_0x388fe7(0x1fb)]){this[_0x388fe7(0x1e7)](_0x409940,{'val':![],'ack':!![]}),await this[_0x388fe7(0xe7)]();return;}if(_0x409940['includes']('analysis.training.triggerComfort')&&_0xb22462[_0x388fe7(0x1fb)]){this[_0x388fe7(0x1e7)](_0x409940,{'val':![],'ack':!![]});if(this[_0x388fe7(0x16c)])try{const _0x5ce492=await this[_0x388fe7(0x20f)](_0x388fe7(0x16e));if(_0x5ce492&&_0x5ce492['val']){const _0x23c962={};if(this[_0x388fe7(0x14a)][_0x388fe7(0x1ad)])this['config'][_0x388fe7(0x1ad)][_0x388fe7(0x21a)](_0x5d7106=>{const _0x34a213=_0x388fe7;if(_0x5d7106['id']&&_0x5d7106[_0x34a213(0x16d)])_0x23c962[_0x5d7106['id']]=_0x5d7106[_0x34a213(0x16d)];});pythonBridge[_0x388fe7(0x1c2)](this,_0x388fe7(0x194),{'events':JSON[_0x388fe7(0xd7)](_0x5ce492[_0x388fe7(0x1fb)]),'deviceMap':_0x23c962});}}catch(_0x2b18b9){}return;}if(_0x409940[_0x388fe7(0x189)]('analysis.training.triggerTopology')&&_0xb22462[_0x388fe7(0x1fb)]){this[_0x388fe7(0x1e7)](_0x409940,{'val':![],'ack':!![]}),topology[_0x388fe7(0x13a)](this);if(this['isProVersion'])try{const _0x2f73b3=await this[_0x388fe7(0x20f)](_0x388fe7(0x249));if(_0x2f73b3&&_0x2f73b3['val'])pythonBridge[_0x388fe7(0x1c2)](this,_0x388fe7(0xfd),{'sequences':JSON[_0x388fe7(0xd7)](_0x2f73b3[_0x388fe7(0x1fb)])});}catch(_0x395cc9){}return;}}const _0x3a31be=(this[_0x388fe7(0x14a)][_0x388fe7(0x1ad)]||[])[_0x388fe7(0xfc)](_0x361e95=>_0x361e95['id']===_0x409940);if(_0x3a31be){const _0x52c080=await recorder[_0x388fe7(0x20d)](this,_0x409940,_0xb22462,_0x3a31be);_0x52c080&&this[_0x388fe7(0x1e7)](_0x388fe7(0x179),{'val':Date[_0x388fe7(0xee)](),'ack':!![]});_0x52c080&&_0x52c080[_0x388fe7(0x16d)]===_0x388fe7(0x129)&&_0x52c080[_0x388fe7(0xea)]&&this['isProVersion']&&deadMan[_0x388fe7(0x10d)](this,_0x52c080[_0x388fe7(0xea)]);_0xb22462[_0x388fe7(0x1fb)]&&(_0xb22462[_0x388fe7(0x1fb)]===!![]||_0xb22462[_0x388fe7(0x1fb)]===0x1||String(_0xb22462[_0x388fe7(0x1fb)])[_0x388fe7(0x1b6)]()==='open')&&(_0x3a31be['type']&&(_0x3a31be[_0x388fe7(0x16d)][_0x388fe7(0x189)](_0x388fe7(0x195))||_0x3a31be[_0x388fe7(0x16d)][_0x388fe7(0x189)](_0x388fe7(0x1a9)))&&this[_0x388fe7(0x207)](_0x3a31be));if(_0x3a31be[_0x388fe7(0x16d)]===_0x388fe7(0x227)||_0x3a31be[_0x388fe7(0x16d)]===_0x388fe7(0x187)){if(this[_0x388fe7(0xf5)]['energy'])automation['cleanupGhostInterventions'](this);}}}async[a0_0x204416(0x240)](_0x257afb){const _0x1677df=a0_0x204416;if(!this[_0x1677df(0x111)]||Date[_0x1677df(0xee)]()-this['bootTime']>0x493e0)return;try{const _0xbcfcc0=JSON[_0x1677df(0xd7)](_0x257afb),_0x3bda10=this[_0x1677df(0x111)][_0x1677df(0x13e)];let _0x38bcad=![];for(const _0x1a2bac in _0x3bda10){if(_0x3bda10[_0x1a2bac]['includes']('AI')&&_0xbcfcc0[_0x1a2bac]&&!_0xbcfcc0[_0x1a2bac][_0x1677df(0x189)]('AI')){_0x38bcad=!![];break;}}_0x38bcad&&(await this[_0x1677df(0x1e2)](_0x1677df(0x108),{'val':JSON[_0x1677df(0xe6)](this[_0x1677df(0x111)]['times']),'ack':!![]}),await this[_0x1677df(0x1e2)](_0x1677df(0x19d),{'val':JSON[_0x1677df(0xe6)](this['memoryCache']['sources']),'ack':!![]}));}catch(_0x54047e){}}async[a0_0x204416(0x239)](){const _0x3a00c2=a0_0x204416;try{const _0x1f5bbf=await this[_0x3a00c2(0x20f)](setup[_0x3a00c2(0x220)]);if(_0x1f5bbf&&_0x1f5bbf[_0x3a00c2(0x1fb)])this[_0x3a00c2(0x1ab)]=_0x1f5bbf[_0x3a00c2(0x1fb)];}catch(_0x3b90a5){this[_0x3a00c2(0x1ab)]=setup[_0x3a00c2(0x1fe)][_0x3a00c2(0x138)];}}async[a0_0x204416(0x12e)](){const _0x1cb003=a0_0x204416,_0x27dedb=this[_0x1cb003(0x14a)]['presenceDevices']||[];if(_0x27dedb[_0x1cb003(0x1b7)]===0x0)return![];const _0x34d037=[],_0x392300=Date['now'](),_0x26b6d4=0x5*0x3c*0x3e8;for(const _0x193739 of _0x27dedb){try{let _0x4dac99=![];try{const _0x56be7a=await this[_0x1cb003(0x1a5)](_0x193739+_0x1cb003(0x1a4));if(_0x56be7a&&_0x56be7a['val']===!![])_0x4dac99=!![];}catch(_0x258620){}if(!_0x4dac99)try{const _0x3a4bca=await this[_0x1cb003(0x1a5)](_0x193739+_0x1cb003(0x205));if(_0x3a4bca&&_0x3a4bca['ts']){const _0x62d333=_0x392300-_0x3a4bca['ts'];if(_0x62d333<_0x26b6d4)_0x4dac99=!![];}}catch(_0x51cf71){}if(!_0x4dac99)try{const _0x3302ca=await this['getForeignStateAsync'](_0x193739+'.uptime');if(_0x3302ca&&typeof _0x3302ca[_0x1cb003(0x1fb)]===_0x1cb003(0x1e9)&&_0x3302ca['val']>0x0)_0x4dac99=!![];}catch(_0x3349c9){}if(!_0x4dac99)try{const _0x5054c0=await this['getForeignStateAsync'](_0x193739);if(_0x5054c0){const _0x56653f=_0x392300-(_0x5054c0['ts']||0x0);_0x56653f<_0x26b6d4&&(_0x5054c0[_0x1cb003(0x1fb)]===!![]||_0x5054c0['val']===_0x1cb003(0x22e)||_0x5054c0['val']===0x1)&&(_0x4dac99=!![]);}}catch(_0x13f5c9){}if(_0x4dac99){const _0x71b9f6=_0x193739[_0x1cb003(0x24d)]('.'),_0xce06f1=_0x71b9f6[_0x71b9f6[_0x1cb003(0x1b7)]-0x1]||_0x193739;_0x34d037['push'](_0xce06f1);}}catch(_0x25e3c2){this[_0x1cb003(0xf9)][_0x1cb003(0x140)](_0x1cb003(0x160)+_0x193739+':\x20'+_0x25e3c2[_0x1cb003(0x1b2)]);}}const _0x1cee2a=_0x34d037['length']>0x0?_0x34d037[_0x1cb003(0x24c)](',\x20'):_0x1cb003(0x162);return await this[_0x1cb003(0x1e2)](_0x1cb003(0x193),{'val':_0x1cee2a,'ack':!![]}),_0x34d037['length']>0x0;}async['runAutopilot'](){const _0xbb87c=a0_0x204416;await aiAgent[_0xbb87c(0x1bb)](this);this[_0xbb87c(0xf5)][_0xbb87c(0x168)]&&(this[_0xbb87c(0x120)](),this['triggerGaitAnalysis']());if(this[_0xbb87c(0xf5)][_0xbb87c(0x126)])this[_0xbb87c(0xe7)]();}async[a0_0x204416(0x1db)](){const _0x1677c7=a0_0x204416,_0x439562=['weatherunderground.0',_0x1677c7(0x1ac),_0x1677c7(0x213)],_0x31a32b=[_0x1677c7(0x201),_0x1677c7(0x15a),_0x1677c7(0xdb)];for(const _0x362022 of _0x439562){for(const _0x157cca of _0x31a32b){try{const _0xc7e34f=_0x362022+'.'+_0x157cca,_0x147762=await this[_0x1677c7(0x1a5)](_0xc7e34f);if(_0x147762&&_0x147762[_0x1677c7(0x1fb)]){const _0x2b20dd=String(_0x147762[_0x1677c7(0x1fb)])['toLowerCase']();if(_0x2b20dd[_0x1677c7(0x189)](_0x1677c7(0xda))||_0x2b20dd[_0x1677c7(0x189)](_0x1677c7(0x118))||_0x2b20dd[_0x1677c7(0x189)](_0x1677c7(0x181))||_0x2b20dd['includes'](_0x1677c7(0x1dd))||_0x2b20dd[_0x1677c7(0x189)]('clear'))return this[_0x1677c7(0xf9)][_0x1677c7(0x1bd)](_0x1677c7(0x1da)+_0xc7e34f),!![];}}catch(_0x1103c2){}}}return![];}[a0_0x204416(0x1c0)](){const _0xc71faa=a0_0x204416;if(!this[_0xc71faa(0x16c)])return;try{this[_0xc71faa(0x20f)]('LTM.trainingData.sequences',(_0x209bb3,_0x2c9c55)=>{const _0x107167=_0xc71faa;if(_0x209bb3||!_0x2c9c55||!_0x2c9c55['val'])return;try{const _0x595e2e=JSON[_0x107167(0xd7)](_0x2c9c55[_0x107167(0x1fb)]);if(!_0x595e2e||_0x595e2e['length']===0x0)return;pythonBridge[_0x107167(0x1c2)](this,_0x107167(0x23e),{'sequences':_0x595e2e}),this[_0x107167(0xf9)][_0x107167(0x1bd)]('üö∂\x20Gait\x20Analysis\x20triggered\x20with\x20'+_0x595e2e[_0x107167(0x1b7)]+'\x20sequences');}catch(_0x32bf35){this['log']['warn'](_0x107167(0x15f)+_0x32bf35[_0x107167(0x1b2)]);}});}catch(_0x40a671){this[_0xc71faa(0xf9)][_0xc71faa(0x140)](_0xc71faa(0x1d8)+_0x40a671['message']);}}async[a0_0x204416(0xe7)](){const _0x8151ac=a0_0x204416;if(!this[_0x8151ac(0x16c)]||!this[_0x8151ac(0xf5)]['energy'])return;try{const _0x88c02a={},_0x4948ee={},_0x53aa69=this[_0x8151ac(0x14a)][_0x8151ac(0x1ad)]||[];for(const _0x1cfea1 of _0x53aa69){if((_0x1cfea1[_0x8151ac(0x16d)]===_0x8151ac(0x227)||_0x1cfea1[_0x8151ac(0x16d)]==='thermostat')&&_0x1cfea1['location'])try{const _0x1fa42f=await this['getForeignStateAsync'](_0x1cfea1['id']);_0x1fa42f&&typeof _0x1fa42f[_0x8151ac(0x1fb)]==='number'&&(_0x88c02a[_0x1cfea1['location']]=_0x1fa42f[_0x8151ac(0x1fb)],_0x4948ee[_0x1cfea1[_0x8151ac(0xea)]]=_0x1cfea1[_0x8151ac(0x19a)]||![]);}catch(_0xbdff){}}let _0x404454=0xa;if(this[_0x8151ac(0x14a)][_0x8151ac(0xfa)])try{const _0x23ded7=await this[_0x8151ac(0x1a5)](this[_0x8151ac(0x14a)][_0x8151ac(0xfa)]);if(_0x23ded7&&typeof _0x23ded7['val']===_0x8151ac(0x1e9))_0x404454=_0x23ded7[_0x8151ac(0x1fb)];}catch(_0x255fee){}const _0x4cb893=await this[_0x8151ac(0x1db)]();let _0x3b95d5={};try{const _0xebdb7f=await this['getStateAsync']('analysis.energy.warmupTargets');if(_0xebdb7f&&_0xebdb7f[_0x8151ac(0x1fb)])_0x3b95d5=JSON[_0x8151ac(0xd7)](_0xebdb7f[_0x8151ac(0x1fb)]);}catch(_0x158217){}pythonBridge[_0x8151ac(0x1c2)](this,_0x8151ac(0x1ce),{'current_temps':_0x88c02a,'t_out':_0x404454,'is_sunny':_0x4cb893,'solar_flags':_0x4948ee,'warmup_targets':_0x3b95d5}),this[_0x8151ac(0xf9)][_0x8151ac(0xdf)](_0x8151ac(0x165)+Object[_0x8151ac(0x1f5)](_0x88c02a)['length']+'\x20rooms)');}catch(_0x2bef74){this[_0x8151ac(0xf9)][_0x8151ac(0x140)](_0x8151ac(0xf8)+_0x2bef74['message']);}}[a0_0x204416(0x120)](){const _0x1a6548=a0_0x204416;if(!this['rawEventLog']||this['rawEventLog'][_0x1a6548(0x1b7)]===0x0)return;const _0x1b19eb=new Array(0x30)[_0x1a6548(0x24a)](0x0),_0xd9e233=Array[_0x1a6548(0x12a)]({'length':0x30},()=>[]),_0x5363a8=new Date()[_0x1a6548(0x169)](0x0,0x0,0x0,0x0);this[_0x1a6548(0x153)][_0x1a6548(0x21a)](_0x30f840=>{const _0x597aac=_0x1a6548,_0x28d4f5=new Date(_0x30f840['timestamp']);if(_0x28d4f5[_0x597aac(0xf1)]()>=_0x5363a8){const _0x4e4893=_0x28d4f5[_0x597aac(0x1a2)](),_0x41aa4a=_0x28d4f5[_0x597aac(0x1f3)](),_0x23904b=_0x4e4893*0x2+Math[_0x597aac(0x107)](_0x41aa4a/0x1e);_0x23904b>=0x0&&_0x23904b<0x30&&(_0x1b19eb[_0x23904b]++,_0xd9e233[_0x23904b][_0x597aac(0xeb)]({'time':_0x28d4f5[_0x597aac(0x11a)](_0x597aac(0x22c),{'hour':_0x597aac(0x132),'minute':_0x597aac(0x132)}),'location':_0x30f840['location']||_0x597aac(0x182),'type':_0x30f840['type']||_0x597aac(0x1f9)}));}}),this[_0x1a6548(0x1e2)]('analysis.health.todayVector',{'val':JSON[_0x1a6548(0xe6)](_0x1b19eb),'ack':!![]}),this[_0x1a6548(0x1e2)](_0x1a6548(0x133),{'val':JSON[_0x1a6548(0xe6)](_0xd9e233),'ack':!![]});}async[a0_0x204416(0x22b)](_0xe9fad3){const _0x1e9bf1=a0_0x204416;if(!this[_0x1e9bf1(0x14a)]['infrasoundEnabled']||typeof _0xe9fad3!==_0x1e9bf1(0x1e9))return;const _0x25ff2c=this[_0x1e9bf1(0x14a)]['infrasoundThreshold']||0.04;this[_0x1e9bf1(0xf3)][_0x1e9bf1(0xeb)]({'timestamp':Date[_0x1e9bf1(0xee)](),'value':_0xe9fad3}),this[_0x1e9bf1(0xf3)][_0x1e9bf1(0x1b7)]>0x64&&this['pressureBuffer'][_0x1e9bf1(0x139)](),_0xe9fad3>_0x25ff2c&&!this[_0x1e9bf1(0x1dc)]&&(this[_0x1e9bf1(0x1dc)]=!![],this['log'][_0x1e9bf1(0x140)](_0x1e9bf1(0x151)+_0xe9fad3[_0x1e9bf1(0x217)](0x4)+'\x20>\x20'+_0x25ff2c+_0x1e9bf1(0x125)),await this[_0x1e9bf1(0x1f6)](_0xe9fad3,_0x1e9bf1(0x1c7)),setTimeout(()=>{const _0x506cc8=_0x1e9bf1;this[_0x506cc8(0x1dc)]=![];},0x5*0x3c*0x3e8));}async['triggerInfrasoundCorrelation'](_0x3153c9,_0x4ebf91){const _0x2ba5f4=a0_0x204416;if(!this[_0x2ba5f4(0x188)]){const _0x1f5b43=this[_0x2ba5f4(0xe8)][_0x2ba5f4(0x247)](0x0,0xa),_0x3c8bd4=_0x1f5b43['map'](_0xdc4bcf=>new Date(_0xdc4bcf[_0x2ba5f4(0x1bc)])['toLocaleTimeString'](_0x2ba5f4(0x22c))+_0x2ba5f4(0x196)+(_0xdc4bcf[_0x2ba5f4(0xea)]||'Unknown')+':\x20'+_0xdc4bcf[_0x2ba5f4(0x1cb)])[_0x2ba5f4(0x24c)]('\x0a');this[_0x2ba5f4(0xf9)][_0x2ba5f4(0x140)](_0x2ba5f4(0x185)+_0x3153c9[_0x2ba5f4(0x217)](0x4)+_0x2ba5f4(0x186)+_0x3c8bd4);if(this['config'][_0x2ba5f4(0x119)])try{const _0x16d6bc=await this[_0x2ba5f4(0x1a5)](this[_0x2ba5f4(0x14a)][_0x2ba5f4(0x119)]);_0x16d6bc&&_0x16d6bc[_0x2ba5f4(0x1fb)]===!![]&&(await this[_0x2ba5f4(0x1e2)](_0x2ba5f4(0x1ba),{'val':JSON[_0x2ba5f4(0xe6)]({'timestamp':Date[_0x2ba5f4(0xee)](),'pressure':_0x3153c9[_0x2ba5f4(0x217)](0x4),'eventType':_0x4ebf91,'recentEvents':_0x1f5b43[_0x2ba5f4(0x247)](0x0,0x3)}),'ack':!![]}),this['log'][_0x2ba5f4(0x228)](_0x2ba5f4(0x170)));}catch(_0x4ef9b5){}}else this[_0x2ba5f4(0xf9)]['debug']('üîä\x20Infraschall:\x20'+_0x3153c9[_0x2ba5f4(0x217)](0x4)+_0x2ba5f4(0x20a));}async[a0_0x204416(0x207)](_0x4d324c){const _0x19927b=a0_0x204416;if(!_0x4d324c||!_0x4d324c[_0x19927b(0xea)])return;try{const _0x5ee0c9=(this['config'][_0x19927b(0x1ad)]||[])['filter'](_0x1460b9=>_0x1460b9[_0x19927b(0xea)]===_0x4d324c['location']&&(_0x1460b9[_0x19927b(0x16d)]===_0x19927b(0x227)||_0x1460b9[_0x19927b(0x16d)]===_0x19927b(0x187)));if(_0x5ee0c9[_0x19927b(0x1b7)]===0x0)return;const _0xbccaca=await this['getForeignStateAsync'](_0x5ee0c9[0x0]['id']);if(!_0xbccaca||typeof _0xbccaca[_0x19927b(0x1fb)]!=='number')return;const _0x2c1bdc=_0xbccaca['val'];let _0x5adc6a=null;if(this['config'][_0x19927b(0xfa)]){const _0x4b05fc=await this[_0x19927b(0x1a5)](this['config'][_0x19927b(0xfa)]);_0x4b05fc&&typeof _0x4b05fc['val']===_0x19927b(0x1e9)&&(_0x5adc6a=_0x4b05fc['val']);}if(_0x5adc6a!==null){const _0x43d740=Math[_0x19927b(0x1ca)](_0x2c1bdc-_0x5adc6a);_0x43d740>0x3&&(this[_0x19927b(0xf9)][_0x19927b(0x1bd)](_0x19927b(0x122)+_0x4d324c[_0x19927b(0xea)]+_0x19927b(0x127)+_0x43d740['toFixed'](0x1)+_0x19927b(0x11c)+_0x2c1bdc+_0x19927b(0x178)+_0x5adc6a+_0x19927b(0x21f)),await this[_0x19927b(0x1e2)](_0x19927b(0x21d),{'val':JSON['stringify']({'room':_0x4d324c[_0x19927b(0xea)],'timestamp':Date[_0x19927b(0xee)](),'tempDiff':_0x43d740[_0x19927b(0x217)](0x1),'recommendation':_0x43d740>0x5?_0x19927b(0x242):_0x19927b(0x11d)}),'ack':!![]}));}}catch(_0x5127f9){this[_0x19927b(0xf9)][_0x19927b(0x140)](_0x19927b(0xd8)+_0x5127f9[_0x19927b(0x1b2)]);}}async[a0_0x204416(0x147)](_0x3d4f76){const _0x57a425=a0_0x204416;if(!_0x3d4f76||typeof _0x3d4f76!==_0x57a425(0x184))return;const _0xdf90d={'timestamp':_0x3d4f76[_0x57a425(0x1bc)]||Date[_0x57a425(0xee)](),'id':_0x3d4f76['id']||Date[_0x57a425(0xee)]()[_0x57a425(0x24e)](),'name':_0x3d4f76['name']||'Manual\x20Event','type':_0x3d4f76['type']||_0x57a425(0x10f),'location':_0x3d4f76['location']||_0x57a425(0x15c),'value':_0x3d4f76['value']||null};this['eventHistory'][_0x57a425(0x246)](_0xdf90d);if(this['eventHistory'][_0x57a425(0x1b7)]>0x1388)this[_0x57a425(0xe8)][_0x57a425(0x136)]();await this[_0x57a425(0x1e2)](_0x57a425(0xd9),{'val':JSON['stringify'](this['eventHistory']),'ack':!![]}),this[_0x57a425(0xf9)][_0x57a425(0x1bd)]('üìù\x20Manual\x20event\x20logged:\x20'+_0xdf90d[_0x57a425(0x1cb)]+'\x20('+_0xdf90d['location']+')');}[a0_0x204416(0x141)](_0x139e44){}}if(require[a0_0x204416(0x21c)]!==module)module['exports']=_0x40ecdf=>new CogniLiving(_0x40ecdf);else new CogniLiving();