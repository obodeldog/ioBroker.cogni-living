const a0_0x18ffa8=a0_0xf66b;(function(_0x3aea56,_0x47a4f3){const _0x5e0a14=a0_0xf66b,_0x471ef7=_0x3aea56();while(!![]){try{const _0x2f9ffe=parseInt(_0x5e0a14(0xde))/0x1*(-parseInt(_0x5e0a14(0xf0))/0x2)+parseInt(_0x5e0a14(0x238))/0x3*(parseInt(_0x5e0a14(0x13d))/0x4)+-parseInt(_0x5e0a14(0x125))/0x5*(-parseInt(_0x5e0a14(0x1a7))/0x6)+parseInt(_0x5e0a14(0x140))/0x7*(parseInt(_0x5e0a14(0x1ed))/0x8)+parseInt(_0x5e0a14(0x252))/0x9+parseInt(_0x5e0a14(0x225))/0xa*(parseInt(_0x5e0a14(0x226))/0xb)+-parseInt(_0x5e0a14(0x143))/0xc;if(_0x2f9ffe===_0x47a4f3)break;else _0x471ef7['push'](_0x471ef7['shift']());}catch(_0x51d3a3){_0x471ef7['push'](_0x471ef7['shift']());}}}(a0_0x4129,0x59ee4));const a0_0x2b36b0=(function(){let _0x20bf9d=!![];return function(_0x14380b,_0x322474){const _0x487552=_0x20bf9d?function(){const _0x53ce17=a0_0xf66b;if(_0x322474){const _0x24c9f7=_0x322474[_0x53ce17(0x1db)](_0x14380b,arguments);return _0x322474=null,_0x24c9f7;}}:function(){};return _0x20bf9d=![],_0x487552;};}()),a0_0x1191ef=a0_0x2b36b0(this,function(){const _0x30c3c7=a0_0xf66b;return a0_0x1191ef[_0x30c3c7(0x111)]()[_0x30c3c7(0xc7)](_0x30c3c7(0x1e8))[_0x30c3c7(0x111)]()[_0x30c3c7(0x13f)](a0_0x1191ef)[_0x30c3c7(0xc7)](_0x30c3c7(0x1e8));});a0_0x1191ef();function a0_0xf66b(_0x33691c,_0x4d1dd6){const _0x416797=a0_0x4129();return a0_0xf66b=function(_0x1191ef,_0x2b36b0){_0x1191ef=_0x1191ef-0xab;let _0x412941=_0x416797[_0x1191ef];return _0x412941;},a0_0xf66b(_0x33691c,_0x4d1dd6);}'use strict';const utils=require(a0_0x18ffa8(0x151)),{GoogleGenerativeAI}=require(a0_0x18ffa8(0x244)),schedule=require(a0_0x18ffa8(0x1c4)),HISTORY_MAX_SIZE=0x32,RAW_LOG_MAX_SIZE=0x5dc,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL='models/gemini-flash-latest',LTM_SCHEDULE=a0_0x18ffa8(0xf8),MODE_RESET_SCHEDULE=a0_0x18ffa8(0x15b),ANALYSIS_HISTORY_MAX_SIZE=0x64,LTM_DP_RAW_LOG=a0_0x18ffa8(0x14a),LTM_DP_DAILY_DIGESTS=a0_0x18ffa8(0xca),LTM_DP_STATUS=a0_0x18ffa8(0x21e),LTM_DP_TRIGGER_DIGEST=a0_0x18ffa8(0xc4),LTM_DP_BASELINE_STATUS='LTM.baselineStatus',LTM_DP_DRIFT_CHANNEL=a0_0x18ffa8(0x1aa),LTM_DP_DRIFT_STATUS=a0_0x18ffa8(0x1ef),LTM_DP_DRIFT_DETAILS=a0_0x18ffa8(0x247),LTM_DP_DRIFT_LAST_CHECK=a0_0x18ffa8(0x16a),SYSTEM_DP_MODE=a0_0x18ffa8(0x103),HARD_IGNORE_TERMS=[a0_0x18ffa8(0x241),a0_0x18ffa8(0x231),'rssi','connection',a0_0x18ffa8(0x13c),a0_0x18ffa8(0x1dc),'fault',a0_0x18ffa8(0x14d),a0_0x18ffa8(0x11f),a0_0x18ffa8(0x19b),a0_0x18ffa8(0x10b),a0_0x18ffa8(0x1a6),a0_0x18ffa8(0x200),'reachable',a0_0x18ffa8(0x23c)],BAD_NAMES=[a0_0x18ffa8(0xe2),'currentposition',a0_0x18ffa8(0x234),a0_0x18ffa8(0xd0),a0_0x18ffa8(0x232),a0_0x18ffa8(0x17c),'on',a0_0x18ffa8(0xec),a0_0x18ffa8(0xc3),a0_0x18ffa8(0x1bd),a0_0x18ffa8(0x215),'blind',a0_0x18ffa8(0x146),a0_0x18ffa8(0x1bc),a0_0x18ffa8(0x100),a0_0x18ffa8(0x1ea),a0_0x18ffa8(0xf3),'temperature',a0_0x18ffa8(0xc5),a0_0x18ffa8(0xf6),a0_0x18ffa8(0x194),'setpoint',a0_0x18ffa8(0x1a3)],ADAPTER_BLACKLIST=[a0_0x18ffa8(0x121),a0_0x18ffa8(0x116),a0_0x18ffa8(0x1af),a0_0x18ffa8(0x141),a0_0x18ffa8(0x152),a0_0x18ffa8(0x219),a0_0x18ffa8(0x254),a0_0x18ffa8(0x189),a0_0x18ffa8(0x1d9),'simple-api.'],SYSTEM_MODES={'NORMAL':a0_0x18ffa8(0x1fb),'VACATION':a0_0x18ffa8(0x1b9),'PARTY':a0_0x18ffa8(0x1ae),'GUEST':a0_0x18ffa8(0x1b5)},AUTO_RESET_MODES=[SYSTEM_MODES[a0_0x18ffa8(0xcc)],SYSTEM_MODES[a0_0x18ffa8(0x1e2)]],PERSONA_MAPPING={'generic':'Analysiere\x20ausgewogen\x20auf\x20Gesundheit,\x20Sicherheit\x20und\x20Komfort.','senior_aal':a0_0x18ffa8(0xf1),'family':a0_0x18ffa8(0x19f),'single_comfort':a0_0x18ffa8(0x17e),'security':a0_0x18ffa8(0x1d0)};function a0_0x4129(){const _0x2a76ae=['generateContent','direction','\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20SCHEMA:\x20{\x20\x22activity\x22:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22deviationFromBaseline\x22:\x20\x22string\x22,\x20\x22isAlert\x22:\x20bool,\x20\x22isEmergency\x22:\x20bool,\x20\x22alertReason\x22:\x20\x22string\x22\x20},\x20\x22comfort\x22:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22suggestion\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22patternDetected\x22:\x20bool,\x20\x22description\x22:\x20\x22string\x22,\x20\x22suggestedAction\x22:\x20\x22string\x22\x20}\x20},\x20\x22health\x22:\x20{\x20\x22sleepScore\x22:\x20number\x20(0-100),\x20\x22restlessness\x22:\x20\x22none|low|medium|high\x22,\x20\x22notes\x22:\x20\x22string\x22\x20}\x20}','system.','setPresence','notifyEmailRecipient','weatherInstance','91405nJtXbk','Deviation','System\x20Status\x20&\x20Control','triggerBriefing','calendarInstance','systemConfig','notifyPushoverInstance','KALENDER\x20ERROR:\x20','N/A\x20(Learning)','toLocaleString','ltmStbWindowDays','LTM','briefingJob','analysis.health.notes','Pattern\x20Detected','‚ö†Ô∏è\x20Alarm','replace','version','sendMorningBriefing','TEST-PRO-KEY','includes','Automation\x20Proposals','selectedFunctionIds','maintenance','1034404Hpakij','bind','constructor','102858auaekD','vis.','cogni-living','10990812kmpiWo','Schlafzimmer','rollladen','cover','livingContext','splice','extendObjectAsync','LTM.rawEventLog','driftAnalysisTimer','checkLtmDriftObjects','working','PRO-','getCalendarContext','licht','@iobroker/adapter-core','history.','Action','info','members','AI\x20Emergency\x20Status','\x20Tage)','split','N/A','WETTER\x20ERROR:\x20','0\x204\x20*\x20*\x20*','Reset\x20Sched\x20Error:\x20','Last\x20Check','briefingEnabled','timestamp','onStateChange','\x20|\x20','date','event','system','push','testNotification','setupLtmScheduler','notifyTelegramRecipient','analysis.trigger','LTM.driftAnalysis.lastCheck','ROLLE:\x20Smart\x20Home\x20Analyst.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20AKTUELLE\x20ZEIT:\x20','Sleep\x20Score\x20(0-100)','analysisHistory','Deaktiviert\x20(Pro-Feature)','boolean','KALENDER:\x20','send','cogni-living\x20adapter\x20starting\x20(v','toLowerCase','online','WETTER:\x20','Badezimmer','sendToAsync','geminiModel','setupBriefingScheduler','getWeatherContext','none','brightness','temp','Fokus\x20auf\x20Maximierung\x20von\x20Komfort,\x20Automatisierungseffizienz\x20und\x20Energieeinsparung.','loadSystemMode','inactivityThresholdHours','accuweather.0','toISOString','.\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20KONTEXT:\x20','thermostat','KALENDER:\x20Keine\x20relevanten\x20Termine','common','analysis.automation.suggestedAction','.\x20MODUS:\x20','flot.','Health\x20&\x20Sleep\x20Analysis','ltmJob','setupDriftAnalysisScheduler','lastAlertState','analysis.health.restlessness','analysis.automation.patternDetected','accuweather','json','setHours','sendNotification','energy','door','cancel','openweathermap.0','generic','isGracePeriodActive','driftDetails','stick_unreach','calendarSelection','Wohnzimmer','now','Fokus\x20auf\x20Familienroutinen,\x20Kindersicherheit\x20und\x20allgemeines\x20Haushaltsmanagement.','_calName','NORMAL','number','valve','Daily\x20Digests','üö®üö®\x20NOTFALL','dutycycle','144toJODV','Last\x20raw\x20event','application/json','LTM.driftAnalysis','Wetter:\x20Deaktiviert','ltmLtbWindowDays','getEnums','party','info.','getStateAsync','slice','log','genAI','notifyEmailEnabled','guest','analysis.feedbackHistory','[CALENDAR]\x20Found\x20','ack','vacation','location','analysisTimer','status','position','dailyDigests','saveRawEventLog','channel','08:00','dimmer','runAutopilot','node-schedule','Subscribing\x20to\x20','tryParse','Adapter','system.meta.uuid','Raw\x20Log','ready','native','bad','parse','message','config','PRIORIT√ÑT:\x20Sicherheit.\x20Erkenne\x20Eindringlinge,\x20ungew√∂hnliche\x20Anwesenheit.','üö®\x20EMERGENCY','long','map','Error\x20in\x20onMessage\x20command\x20','isExit','\x0a\x20\x20\x20\x20\x20\x20\x20\x20EVENTS:\x20','Activity\x20Summary','WETTER:\x20Keine\x20Daten\x20gefunden','echarts.','stringify','apply','error','ltmDriftCheckIntervalHours','AI\x20Alert\x20Status','initSensorSubscriptions','Lernphase\x20(','\x20calendars:\x20','GUEST','enum.rooms.*','startExitTimer','\x20presence\x20devices...','flur','Drift\x20Sched\x20Error:\x20','(((.+)+)+)+$','schalter','presence','getForeignStateAsync','scanDevices','32fwPzox','light','LTM.driftAnalysis.baselineDrift','namespace','isPresent','events.lastEvent','aiPersona','exitGraceTimer','summary','scanForDevices','notifyTelegramEnabled','analysis.comfortSuggestion','updateBaselineStatus','analysis.alertReason','normal','weather','presenceDevices','abortExitTimer','HARD\x20WATCHDOG:\x20No\x20sensor\x20activity\x20detected\x20for\x20','firmware','analysis.lastResult','enum','notifyPushoverRecipient','values','geminiApiKey','loadRawEventLog','KALENDER:\x20Keine\x20Daten','useWeather','runGeminiAnalysis','triggerDailyDigest','analysis.health','rawEventLog','getSystemUUID','isEmergency','.forecast.current.state','text.alarm','.data.table','updateAnalysisHistory','useCalendar','Sending\x20notification:\x20\x22','shutter','\x0aSTB:\x20','Last\x20Result','initZombies','material.','join','scheduleJob','exitTimer','setStateAsync','LTM.processingStatus','Aktiv\x20(','eventHistory','isProVersion','expire','custom','Trigger\x20Digest','11540sVDgPC','2156MbCGjh','getCalendarNames','K√ºche','\x20Phase\x203:\x20DRIFT\x20ACTIVE.\x20Compare\x20recent\x20events\x20against\x20long-term\x20patterns.','getForeignObjectsAsync','checkWifiPresence','\x20sensors...','some','getForeignObjectAsync','KALENDER:\x20Keine\x20Kalender\x20ausgew√§hlt\x20(Bitte\x20in\x20Settings\x20konfigurieren)','.\x20PERSONA:\x20','lowbat','value','setObjectNotExistsAsync','state','response','wohn','setupModeResetScheduler','3LmlaRc','Health\x20Notes','subscribeStates','events.history','link_quality','Baseline\x20Status','onUnload','uuid-not-found','subscribeForeignStatesAsync','unreach','temperature','getOverviewData','@google/generative-ai','2-digit','latitude','LTM.driftAnalysis.driftDetails','fenster','Drift\x20Analysis','val','modeResetJob','_score','object','filter','WiFi\x20Presence\x20detected\x20->\x20Aborting\x20Exit\x20Timer.\x20User\x20is\x20present.','Scheduling\x20Morning\x20Briefing\x20for\x20','Gemini\x20AI\x20initialized.','6129531cEzugb','indicator','icons-mfd.','notifyPushoverEnabled','lastIndexOf','Feedback\x20Log','schlaf','exports','Comfort\x20Summary','Comfort\x20Suggestion','isAlert','main','Flur','analysisInterval','createDailyDigest','enum.functions.*','toFixed','processSensorEvent','pop','text','klima','minDaysForBaseline','Gast','t√ºr','loadDailyDigests','indicator.alarm.fire','analysis.activitySummary','switch','LTM.triggerDailyDigest','humidity','.\x20PR√ÑSENZ:\x20','search','unshift','onReady','LTM.dailyDigests','endsWith','PARTY','analysis.analysisHistory','weatherunderground.0','doors','level','.Summary.Current','licenseKey','button','activity','initSystemConfig','daswetter.0','setState','Phase\x202:\x20ACUTE\x20MONITORING.\x20STB\x20(Last\x2014d):\x20','isArray','Starting\x20Autopilot\x20(','openweathermap','sendTo','Party','6651srStcj','system.isPresent','testApiKey','createAllObjects','targetposition','longitude','onMessage','length','analysis.automation','analysis.automation.description','unload','runBaselineDriftAnalysis','retry','analysis.deviationFromBaseline','off',')\x20verd√§chtig\x20still?\x20Erwartest\x20du\x20basierend\x20auf\x20der\x20Tageszeit\x20Aktivit√§t\x20(z.B.\x20Morgens\x20Aufstehen)?\x20Wenn\x20ja\x20->\x20ALARM.\x0a\x20\x20\x20\x20\x20\x20\x20\x202.\x20Akut\x20(vs.\x20STB):\x20Weicht\x20das\x20heutige\x20Verhalten\x20stark\x20von\x20den\x20letzten\x2014\x20Tagen\x20ab?\x20(z.B.\x205x\x20Toilette\x20statt\x203x).\x20Wenn\x20ja\x20->\x20WARNUNG.\x0a\x20\x20\x20\x20\x20\x20\x20\x203.\x20Schleichend\x20(Drift):\x20(Nur\x20relevant\x20wenn\x20Phase\x203\x20aktiv)\x20Gibt\x20es\x20einen\x20langsamen\x20Trend\x20ins\x20Negative?\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20Ignoriere\x20Fehlalarme\x20durch\x20Kontext:\x20','getLtmData','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','114bRfyNH','PRIORIT√ÑT:\x20Gesundheit\x20und\x20Sicherheit\x20f√ºr\x20Senioren\x20(AAL).\x20Erkenne\x20Inaktivit√§t,\x20potenzielle\x20St√ºrze\x20(indirekt),\x20Schlafunterbrechungen\x20und\x20n√§chtliche\x20Unruhe.','currentSystemMode','occupancy','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','Restlessness\x20Level','power','startsWith','0\x203\x20*\x20*\x20*','analysis.isAlert','system.config','Error\x20reading\x20calendar\x20table:\x20','callback','initHistory','command','name','motion','indicator.alarm','Scanning\x20for\x20devices\x20(V7:\x20Basics\x20+\x20Explicit\x20Whitelist)...','system.mode','initPresenceSubscriptions','saveDailyDigests','logDuplicates','Alert\x20Reason','string','time','substring','config_pending','city','warn','type','briefingTime','trim','toString','de-DE','baselineDrift','write','forEach','admin.','checkLicense','from','k√ºche','Kalender:\x20Deaktiviert','No\x20instance','analysis.triggerBriefing','sensorLastValues'];a0_0x4129=function(){return _0x2a76ae;};return a0_0x4129();}class CogniLiving extends utils[a0_0x18ffa8(0x1c7)]{constructor(_0x56b2ff){const _0xbc0ae6=a0_0x18ffa8;super({..._0x56b2ff,'name':_0xbc0ae6(0x142)}),this['eventHistory']=[],this[_0xbc0ae6(0x16d)]=[],this['feedbackHistory']=[],this[_0xbc0ae6(0x20c)]=[],this[_0xbc0ae6(0x1be)]=[],this[_0xbc0ae6(0x11d)]={},this[_0xbc0ae6(0x12a)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0xbc0ae6(0x1f1)]=!![],this['exitTimer']=null,this[_0xbc0ae6(0x1f4)]=null,this['isGracePeriodActive']=![],this[_0xbc0ae6(0x1b3)]=null,this[_0xbc0ae6(0x178)]=null,this['currentSystemMode']=SYSTEM_MODES[_0xbc0ae6(0x1a1)],this[_0xbc0ae6(0x221)]=![],this['lastAlertState']=![],this['systemUUID']='unknown',this[_0xbc0ae6(0x1bb)]=null,this[_0xbc0ae6(0x18b)]=null,this[_0xbc0ae6(0x24b)]=null,this[_0xbc0ae6(0x14b)]=null,this[_0xbc0ae6(0x131)]=null,this['on'](_0xbc0ae6(0x1ca),this[_0xbc0ae6(0xc9)]['bind'](this)),this['on']('stateChange',this[_0xbc0ae6(0x160)][_0xbc0ae6(0x13e)](this)),this['on'](_0xbc0ae6(0xe8),this['onUnload'][_0xbc0ae6(0x13e)](this)),this['on']('message',this[_0xbc0ae6(0xe4)][_0xbc0ae6(0x13e)](this));}async[a0_0x18ffa8(0xc9)](){const _0x47a3fc=a0_0x18ffa8;this[_0x47a3fc(0x1b2)][_0x47a3fc(0x154)](_0x47a3fc(0x172)+this[_0x47a3fc(0x136)]+')'),await this[_0x47a3fc(0x218)](),this[_0x47a3fc(0x1cf)][_0x47a3fc(0xd2)]=this['config'][_0x47a3fc(0xd2)]||'';try{this[_0x47a3fc(0x221)]=await this[_0x47a3fc(0x117)](this['config'][_0x47a3fc(0xd2)]);}catch(_0x36328a){}if(!this[_0x47a3fc(0x1cf)][_0x47a3fc(0x180)]||this[_0x47a3fc(0x1cf)][_0x47a3fc(0x180)]<0.1)this[_0x47a3fc(0x1cf)]['inactivityThresholdHours']=0xc;await this[_0x47a3fc(0xfd)](),await this[_0x47a3fc(0xd5)]();if(this[_0x47a3fc(0x1cf)]['geminiApiKey'])try{this[_0x47a3fc(0x1b3)]=new GoogleGenerativeAI(this[_0x47a3fc(0x1cf)][_0x47a3fc(0x205)]),this[_0x47a3fc(0x178)]=this[_0x47a3fc(0x1b3)]['getGenerativeModel']({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x47a3fc(0x1a9)}}),this[_0x47a3fc(0x1b2)][_0x47a3fc(0x154)](_0x47a3fc(0x251));}catch(_0x3b9858){this['log'][_0x47a3fc(0x1dc)]('Gemini\x20Init\x20Error:\x20'+_0x3b9858[_0x47a3fc(0x1ce)]);}await this[_0x47a3fc(0xe1)](),await this[_0x47a3fc(0x17f)](),await this['loadRawEventLog'](),await this[_0x47a3fc(0xc0)](),this[_0x47a3fc(0x23a)](_0x47a3fc(0x169)),this['subscribeStates'](LTM_DP_TRIGGER_DIGEST),this[_0x47a3fc(0x23a)]('system.mode'),this[_0x47a3fc(0x23a)](_0x47a3fc(0x11c)),await this[_0x47a3fc(0x1df)](),await this['initPresenceSubscriptions']();if(this[_0x47a3fc(0x1bb)])clearInterval(this['analysisTimer']);const _0x42db01=this[_0x47a3fc(0x1cf)][_0x47a3fc(0xb5)]||0xf;_0x42db01>0x0&&(this[_0x47a3fc(0x1b2)][_0x47a3fc(0x154)](_0x47a3fc(0xda)+_0x42db01+'\x20min).'),this[_0x47a3fc(0x1bb)]=setInterval(()=>{const _0xb15205=_0x47a3fc;this[_0xb15205(0x1c3)]();},_0x42db01*0x3c*0x3e8)),this[_0x47a3fc(0x167)](),this[_0x47a3fc(0x237)](),this[_0x47a3fc(0x18c)](),this[_0x47a3fc(0x179)]();}[a0_0x18ffa8(0x23e)](_0x19de53){const _0x507ce4=a0_0x18ffa8;if(this['analysisTimer'])clearInterval(this[_0x507ce4(0x1bb)]);if(this['driftAnalysisTimer'])clearInterval(this['driftAnalysisTimer']);if(this[_0x507ce4(0x18b)])this[_0x507ce4(0x18b)]['cancel']();if(this[_0x507ce4(0x24b)])this['modeResetJob']['cancel']();if(this[_0x507ce4(0x131)])this['briefingJob']['cancel']();if(this[_0x507ce4(0x21c)])clearTimeout(this['exitTimer']);if(this[_0x507ce4(0x1f4)])clearTimeout(this[_0x507ce4(0x1f4)]);_0x19de53();}async[a0_0x18ffa8(0x160)](_0x10598a,_0x17514c){const _0x523eb5=a0_0x18ffa8;if(!_0x17514c)return;if(_0x10598a===this[_0x523eb5(0x1f0)]+'.'+SYSTEM_DP_MODE){_0x17514c[_0x523eb5(0x24a)]&&Object[_0x523eb5(0x204)](SYSTEM_MODES)[_0x523eb5(0x139)](_0x17514c[_0x523eb5(0x24a)])&&(this[_0x523eb5(0xf2)]=_0x17514c[_0x523eb5(0x24a)],_0x17514c[_0x523eb5(0x24a)]===SYSTEM_MODES['VACATION']?await this[_0x523eb5(0x122)](![]):await this[_0x523eb5(0x122)](!![]));if(!_0x17514c[_0x523eb5(0x1b8)])this['setState'](_0x10598a,{'val':this[_0x523eb5(0xf2)],'ack':!![]});return;}if(!_0x17514c['ack']){_0x10598a[_0x523eb5(0x139)](_0x523eb5(0x169))&&_0x17514c['val']&&(this['setState'](_0x10598a,{'val':![],'ack':!![]}),this['runGeminiAnalysis']());if(_0x10598a['includes'](_0x523eb5(0x20a))&&_0x17514c[_0x523eb5(0x24a)]){this['setState'](_0x10598a,{'val':![],'ack':!![]});if(this[_0x523eb5(0x221)])this[_0x523eb5(0xb6)]();}_0x10598a[_0x523eb5(0x139)](_0x523eb5(0x128))&&_0x17514c[_0x523eb5(0x24a)]&&(this[_0x523eb5(0xd7)](_0x10598a,{'val':![],'ack':!![]}),this['sendMorningBriefing']());return;}if(this[_0x523eb5(0x1cf)]['presenceDevices']&&this[_0x523eb5(0x1cf)][_0x523eb5(0x1fd)][_0x523eb5(0x139)](_0x10598a)){await this[_0x523eb5(0x22b)]();return;}const _0x4c97f6=(this[_0x523eb5(0x1cf)]['devices']||[])['find'](_0x1ca5d6=>_0x1ca5d6['id']===_0x10598a);if(_0x4c97f6)this[_0x523eb5(0xb9)](_0x10598a,_0x17514c,_0x4c97f6);}async[a0_0x18ffa8(0xe4)](_0x36f174){const _0x3cb4ab=a0_0x18ffa8;if(typeof _0x36f174==='object'&&_0x36f174[_0x3cb4ab(0x1ce)])try{if(_0x36f174[_0x3cb4ab(0xfe)]===_0x3cb4ab(0xe0)){}else{if(_0x36f174[_0x3cb4ab(0xfe)]===_0x3cb4ab(0x166)){}else{if(_0x36f174[_0x3cb4ab(0xfe)]===_0x3cb4ab(0xee)){}else{if(_0x36f174[_0x3cb4ab(0xfe)]===_0x3cb4ab(0x243)){const _0x1914c1=this[_0x3cb4ab(0x1be)][_0x3cb4ab(0xe5)],_0x47d082=this[_0x3cb4ab(0x220)][_0x3cb4ab(0x24e)](_0x5ea632=>_0x5ea632[_0x3cb4ab(0x15f)]>new Date()[_0x3cb4ab(0x192)](0x0,0x0,0x0,0x0))[_0x3cb4ab(0xe5)];let _0x516214={'status':'N/A'};try{_0x516214['status']=(await this[_0x3cb4ab(0x1b0)](LTM_DP_DRIFT_STATUS))[_0x3cb4ab(0x24a)];}catch(_0x1ce3c4){}this['sendTo'](_0x36f174[_0x3cb4ab(0x118)],_0x36f174['command'],{'success':!![],'eventHistory':this[_0x3cb4ab(0x220)][_0x3cb4ab(0x1b1)](0x0,0xf),'stats':{'digestCount':_0x1914c1,'eventCountToday':_0x47d082,'driftStatus':_0x516214[_0x3cb4ab(0x1bc)],'isPresent':this[_0x3cb4ab(0x1f1)],'minDays':this[_0x3cb4ab(0x1cf)][_0x3cb4ab(0xbd)]||0x7,'stbDays':this[_0x3cb4ab(0x1cf)]['ltmStbWindowDays']||0xe,'ltbDays':this[_0x3cb4ab(0x1cf)][_0x3cb4ab(0x1ac)]||0x3c}},_0x36f174[_0x3cb4ab(0xfc)]);}else{if(_0x36f174[_0x3cb4ab(0xfe)]===_0x3cb4ab(0x1ad)){}else{if(_0x36f174[_0x3cb4ab(0xfe)]===_0x3cb4ab(0x1ec))try{const _0x513342=await this['scanForDevices'](_0x36f174[_0x3cb4ab(0x1ce)]||{});this['sendTo'](_0x36f174[_0x3cb4ab(0x118)],_0x36f174['command'],{'success':!![],'devices':_0x513342},_0x36f174['callback']);}catch(_0x4f2bf4){this[_0x3cb4ab(0xdc)](_0x36f174['from'],_0x36f174[_0x3cb4ab(0xfe)],{'success':![],'error':_0x4f2bf4[_0x3cb4ab(0x1ce)]},_0x36f174[_0x3cb4ab(0xfc)]);}else{if(_0x36f174[_0x3cb4ab(0xfe)]===_0x3cb4ab(0x227)){const _0x27b5ad=_0x36f174[_0x3cb4ab(0x1ce)]['instance'];if(!_0x27b5ad)return this[_0x3cb4ab(0xdc)](_0x36f174[_0x3cb4ab(0x118)],_0x36f174['command'],{'success':![],'error':_0x3cb4ab(0x11b)},_0x36f174[_0x3cb4ab(0xfc)]);this[_0x3cb4ab(0x1b2)][_0x3cb4ab(0x154)]('[CALENDAR]\x20Searching\x20in\x20instance:\x20'+_0x27b5ad);const _0x15eaa7=await this[_0x3cb4ab(0x227)](_0x27b5ad);this['log'][_0x3cb4ab(0x154)](_0x3cb4ab(0x1b7)+_0x15eaa7[_0x3cb4ab(0xe5)]+_0x3cb4ab(0x1e1)+_0x15eaa7[_0x3cb4ab(0x21a)](',\x20')),this[_0x3cb4ab(0xdc)](_0x36f174[_0x3cb4ab(0x118)],_0x36f174[_0x3cb4ab(0xfe)],{'success':!![],'names':_0x15eaa7},_0x36f174[_0x3cb4ab(0xfc)]);}}}}}}}}catch(_0xb364d0){this[_0x3cb4ab(0x1b2)][_0x3cb4ab(0x1dc)](_0x3cb4ab(0x1d4)+_0x36f174[_0x3cb4ab(0xfe)]+':\x20'+_0xb364d0['message']);if(_0x36f174[_0x3cb4ab(0xfc)])this[_0x3cb4ab(0xdc)](_0x36f174[_0x3cb4ab(0x118)],_0x36f174[_0x3cb4ab(0xfe)],{'success':![],'error':_0xb364d0[_0x3cb4ab(0x1ce)]},_0x36f174['callback']);}}async[a0_0x18ffa8(0xb9)](_0x1c2b8f,_0xc552ce,_0x257c1e){const _0x210226=a0_0x18ffa8;if(!_0x257c1e[_0x210226(0x106)]&&this[_0x210226(0x11d)][_0x1c2b8f]===_0xc552ce[_0x210226(0x24a)])return;this['sensorLastValues'][_0x1c2b8f]=_0xc552ce['val'];if(this[_0x210226(0x199)])return;const _0x17f912=await this[_0x210226(0x22b)]();if(_0x17f912){if(!this[_0x210226(0x1f1)])await this[_0x210226(0x122)](!![]);}else{const _0x622b28=_0x257c1e[_0x210226(0x1d5)]===!![];if(_0x622b28)this[_0x210226(0x1e4)]();else{if(this[_0x210226(0x21c)])this[_0x210226(0x1fe)]();if(!this['isPresent']&&this[_0x210226(0xf2)]===SYSTEM_MODES[_0x210226(0x1a1)])await this[_0x210226(0x122)](!![]);}}const _0x29577e={'timestamp':_0xc552ce['ts'],'id':_0x1c2b8f,'name':_0x257c1e[_0x210226(0xff)],'value':_0xc552ce['val'],'location':_0x257c1e[_0x210226(0x1ba)],'type':_0x257c1e['type']};this[_0x210226(0x220)][_0x210226(0xc8)](_0x29577e);if(this[_0x210226(0x220)][_0x210226(0xe5)]>HISTORY_MAX_SIZE)this['eventHistory'][_0x210226(0xba)]();await this[_0x210226(0x21d)](_0x210226(0x1f2),{'val':JSON['stringify'](_0x29577e),'ack':!![]}),await this[_0x210226(0x21d)](_0x210226(0x23b),{'val':JSON[_0x210226(0x1da)](this[_0x210226(0x220)]),'ack':!![]}),this['rawEventLog'][_0x210226(0x165)]({'timestamp':new Date(_0xc552ce['ts'])[_0x210226(0x182)](),'sensorName':_0x257c1e[_0x210226(0xff)],'location':_0x257c1e[_0x210226(0x1ba)],'value':_0xc552ce['val']}),await this[_0x210226(0x1bf)]();}async[a0_0x18ffa8(0x209)](_0x154414=''){const _0x543a95=a0_0x18ffa8;if(!this['geminiModel'])return;const _0x371a43=this[_0x543a95(0x220)][_0x543a95(0xe5)]>0x0?this[_0x543a95(0x220)]:[{'note':'No\x20recorded\x20events\x20yet.'}],_0x11a73a=PERSONA_MAPPING[this['config'][_0x543a95(0x1f3)]||_0x543a95(0x198)],_0x5b2135=this['config'][_0x543a95(0x147)]||'',_0x14afb7=this[_0x543a95(0xf2)],_0x1aa229=await this['getWeatherContext'](),_0x45fc32=await this[_0x543a95(0x14f)](),_0x50e703=(_0x1aa229+'\x20'+_0x45fc32)[_0x543a95(0x110)](),_0x335a2a=new Date(),_0x5c8024=_0x335a2a[_0x543a95(0x12e)](_0x543a95(0x112),{'weekday':_0x543a95(0x1d2),'hour':_0x543a95(0x245),'minute':_0x543a95(0x245)});let _0x277694='Phase\x201:\x20Learning\x20(No\x20Baseline).\x20Rely\x20on\x20common\x20sense.';const _0x3f86c2=this['dailyDigests'][_0x543a95(0xe5)];if(this[_0x543a95(0x221)]&&_0x3f86c2>=(this[_0x543a95(0x1cf)][_0x543a95(0xbd)]||0x7)){const _0x199678=this['dailyDigests'][_0x543a95(0x1b1)](-(this[_0x543a95(0x1cf)][_0x543a95(0x12f)]||0xe));_0x277694=_0x543a95(0xd8)+JSON[_0x543a95(0x1da)](_0x199678)+'.',_0x3f86c2>=0x1e&&(_0x277694+=_0x543a95(0x229));}const _0x59c284='\x0a\x20\x20\x20\x20\x20\x20\x20\x20CRITICAL\x20SAFETY\x20CHECK:\x0a\x20\x20\x20\x20\x20\x20\x20\x201.\x20Sofort/Ad-Hoc:\x20Ist\x20es\x20jetzt\x20('+_0x5c8024+_0x543a95(0xed)+_0x50e703+_0x543a95(0xf4),_0x2c5248=_0x543a95(0x16b)+_0x5c8024+_0x543a95(0x188)+_0x14afb7+_0x543a95(0xc6)+(this[_0x543a95(0x1f1)]?'Ja':'Nein')+_0x543a95(0x183)+_0x5b2135+_0x543a95(0x230)+_0x11a73a+'.\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+_0x277694+'\x20'+(_0x154414?_0x154414:'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+_0x59c284+_0x543a95(0x1d6)+JSON[_0x543a95(0x1da)](_0x371a43)+_0x543a95(0x120);try{const _0xfe3024=await this[_0x543a95(0x178)][_0x543a95(0x11e)](_0x2c5248),_0x454c96=_0xfe3024[_0x543a95(0x235)][_0x543a95(0xbb)]()[_0x543a95(0x135)](/```json|```/g,'')['trim'](),_0x24617c=JSON['parse'](_0x454c96);await this[_0x543a95(0x21d)](_0x543a95(0x201),{'val':_0x454c96,'ack':!![]}),await this[_0x543a95(0x21d)](_0x543a95(0x1fa),{'val':_0x24617c[_0x543a95(0xd4)]['alertReason']||'','ack':!![]}),await this[_0x543a95(0x21d)](_0x543a95(0xc2),{'val':_0x24617c[_0x543a95(0xd4)][_0x543a95(0x1f5)]||_0x543a95(0x159),'ack':!![]});if(_0x24617c['activity'][_0x543a95(0xb2)]||_0x24617c['activity']['isEmergency']){await this[_0x543a95(0x21d)](_0x543a95(0xf9),{'val':!![],'ack':!![]});if(!this[_0x543a95(0x18d)]||_0x24617c[_0x543a95(0xd4)][_0x543a95(0x20e)]){const _0x46fd82=_0x24617c['activity']['isEmergency']?_0x543a95(0x1a5):_0x543a95(0x134);this[_0x543a95(0x193)](_0x46fd82+':\x20'+_0x24617c['activity']['alertReason'],![],_0x24617c[_0x543a95(0xd4)][_0x543a95(0x20e)]);}}else await this[_0x543a95(0x21d)](_0x543a95(0xf9),{'val':![],'ack':!![]});this[_0x543a95(0x18d)]=_0x24617c[_0x543a95(0xd4)][_0x543a95(0xb2)]||_0x24617c[_0x543a95(0xd4)][_0x543a95(0x20e)];const _0x6c9814={'timestamp':Date[_0x543a95(0x19e)](),'id':Date[_0x543a95(0x19e)]()[_0x543a95(0x111)](),'analysis':_0x24617c,'systemMode':_0x14afb7,'isPro':this[_0x543a95(0x221)]};this[_0x543a95(0x212)](_0x6c9814);}catch(_0x22f959){this['log'][_0x543a95(0x1dc)]('Analysis\x20Error:\x20'+_0x22f959[_0x543a95(0x1ce)]);}}async[a0_0x18ffa8(0x1c3)](){const _0x42b4c9=a0_0x18ffa8,_0x1b8019=this[_0x42b4c9(0x1cf)][_0x42b4c9(0x180)],_0x1d053e=this[_0x42b4c9(0x220)][_0x42b4c9(0xe5)]>0x0?this[_0x42b4c9(0x220)][0x0][_0x42b4c9(0x15f)]:Date['now'](),_0x49fa20=(Date[_0x42b4c9(0x19e)]()-_0x1d053e)/(0x3e8*0x3c*0x3c);let _0x295bf4='';this[_0x42b4c9(0x1cf)]['inactivityMonitoringEnabled']&&this[_0x42b4c9(0xf2)]===SYSTEM_MODES[_0x42b4c9(0x1a1)]&&this['isPresent']&&(_0x49fa20>_0x1b8019&&(_0x295bf4=_0x42b4c9(0x1ff)+_0x49fa20[_0x42b4c9(0xb8)](0x1)+'\x20hours.\x20Potential\x20incapacitation.')),this['runGeminiAnalysis'](_0x295bf4)['catch'](_0x626288=>this[_0x42b4c9(0x1b2)]['error'](_0x626288));}async['createDailyDigest'](){}async['sendMorningBriefing'](){}async[a0_0x18ffa8(0x1f6)](_0x2854c2){const _0x5886ae=a0_0x18ffa8;this[_0x5886ae(0x1b2)]['info'](_0x5886ae(0x102));const _0x304e7a=[],_0x297b8b=await this[_0x5886ae(0x22a)]('*'),_0x592a9d=await this[_0x5886ae(0x22a)](_0x5886ae(0xb7),_0x5886ae(0x202)),_0x398cdf=await this[_0x5886ae(0x22a)](_0x5886ae(0x1e3),_0x5886ae(0x202)),_0x522c47={};if(_0x592a9d)for(const _0x401b5c in _0x592a9d){const _0x18fd48=_0x592a9d[_0x401b5c]['common']['members']||[];_0x18fd48[_0x5886ae(0x115)](_0x1a7e60=>{if(!_0x522c47[_0x1a7e60])_0x522c47[_0x1a7e60]=[];_0x522c47[_0x1a7e60]['push'](_0x401b5c);});}const _0x2986ff={};if(_0x398cdf)for(const _0x546a10 in _0x398cdf){const _0x22ac06=_0x398cdf[_0x546a10][_0x5886ae(0x186)][_0x5886ae(0x155)]||[],_0x3b88cf=typeof _0x398cdf[_0x546a10][_0x5886ae(0x186)][_0x5886ae(0xff)]===_0x5886ae(0x24d)?_0x398cdf[_0x546a10][_0x5886ae(0x186)]['name']['de']:_0x398cdf[_0x546a10][_0x5886ae(0x186)][_0x5886ae(0xff)];_0x22ac06[_0x5886ae(0x115)](_0x1ecca9=>_0x2986ff[_0x1ecca9]=_0x3b88cf);}const _0x58c993=_0x2854c2[_0x5886ae(0x13b)]||[],_0x5168d0=_0x2854c2[_0x5886ae(0x100)]!==![],_0x2291e2=_0x2854c2[_0x5886ae(0xcf)]!==![],_0x564c91=_0x2854c2['lights']!==![],_0x540005=_0x2854c2[_0x5886ae(0x242)]===!![],_0x3a7993=_0x2854c2[_0x5886ae(0x1fc)]===!![];for(const _0x4a89da in _0x297b8b){const _0x190b6b=_0x297b8b[_0x4a89da];if(_0x190b6b[_0x5886ae(0x10e)]!=='state'||!_0x190b6b['common'])continue;if(ADAPTER_BLACKLIST[_0x5886ae(0x22d)](_0x5da692=>_0x4a89da[_0x5886ae(0xf7)](_0x5da692))&&!_0x3a7993)continue;const _0x535046=(_0x190b6b[_0x5886ae(0x186)]['role']||'')[_0x5886ae(0x173)]();let _0x1e08f4=(typeof _0x190b6b[_0x5886ae(0x186)]['name']===_0x5886ae(0x24d)?_0x190b6b['common']['name']['de']:_0x190b6b[_0x5886ae(0x186)][_0x5886ae(0xff)])||_0x4a89da;const _0xb21cf8=_0x1e08f4[_0x5886ae(0x173)]();let _0x29dbfd=![],_0x481df7=![];if(_0x58c993[_0x5886ae(0xe5)]>0x0){const _0x23de4a=_0x522c47[_0x4a89da]||[],_0x2ff9de=_0x4a89da[_0x5886ae(0x158)]('.')[_0x5886ae(0x1b1)](0x0,-0x1)[_0x5886ae(0x21a)]('.'),_0x245916=_0x522c47[_0x2ff9de]||[],_0x70dabd=_0x4a89da[_0x5886ae(0x158)]('.')['slice'](0x0,-0x2)[_0x5886ae(0x21a)]('.'),_0x56e1f0=_0x522c47[_0x70dabd]||[];(_0x23de4a[_0x5886ae(0x22d)](_0x115866=>_0x58c993[_0x5886ae(0x139)](_0x115866))||_0x245916[_0x5886ae(0x22d)](_0x1a126a=>_0x58c993[_0x5886ae(0x139)](_0x1a126a))||_0x56e1f0[_0x5886ae(0x22d)](_0x28f94c=>_0x58c993['includes'](_0x28f94c)))&&(_0x29dbfd=!![],_0x481df7=!![]);}if(!_0x29dbfd&&!_0x3a7993){if(HARD_IGNORE_TERMS[_0x5886ae(0x22d)](_0x5c3250=>_0x4a89da[_0x5886ae(0x139)](_0x5c3250)||_0xb21cf8['includes'](_0x5c3250[_0x5886ae(0x173)]())))continue;}if(BAD_NAMES[_0x5886ae(0x22d)](_0x18977d=>_0xb21cf8===_0x18977d||_0xb21cf8[_0x5886ae(0xcb)]('.'+_0x18977d))){const _0x169af6=_0x4a89da[_0x5886ae(0x158)]('.');if(_0x169af6[_0x5886ae(0xe5)]>0x2){const _0x43d2de=_0x169af6[_0x5886ae(0x1b1)](0x0,-0x1)['join']('.'),_0x18026b=_0x297b8b[_0x43d2de];if(_0x18026b&&_0x18026b[_0x5886ae(0x186)]&&_0x18026b['common'][_0x5886ae(0xff)]){const _0x481bb4=typeof _0x18026b['common'][_0x5886ae(0xff)]===_0x5886ae(0x24d)?_0x18026b[_0x5886ae(0x186)][_0x5886ae(0xff)]['de']:_0x18026b[_0x5886ae(0x186)][_0x5886ae(0xff)];_0x481bb4&&!_0x1e08f4[_0x5886ae(0x139)](_0x481bb4)&&(_0x1e08f4=_0x481bb4+'\x20'+_0x1e08f4);}}}let _0xdfc7a6='';if(_0x5168d0&&(_0x535046['includes']('motion')||_0x535046[_0x5886ae(0x139)]('occupancy')||_0xb21cf8['includes']('bewegung')||_0xb21cf8[_0x5886ae(0x139)]('pr√§senz')))_0xdfc7a6=_0x5886ae(0x100);else{if(!_0xdfc7a6&&_0x2291e2&&(_0x535046[_0x5886ae(0x139)](_0x5886ae(0x195))||_0x535046[_0x5886ae(0x139)]('window')||_0x535046[_0x5886ae(0x139)]('lock')||_0x535046[_0x5886ae(0x139)]('blind')||_0x535046[_0x5886ae(0x139)]('shutter')||_0xb21cf8[_0x5886ae(0x139)](_0x5886ae(0x248))||_0xb21cf8[_0x5886ae(0x139)](_0x5886ae(0xbf))||_0xb21cf8[_0x5886ae(0x139)](_0x5886ae(0x145))))_0xdfc7a6=_0x5886ae(0x195);else{if(!_0xdfc7a6&&_0x564c91&&(_0x535046['includes']('light')||_0x535046['includes']('switch')||_0x535046[_0x5886ae(0x139)](_0x5886ae(0x1c2))||_0xb21cf8[_0x5886ae(0x139)](_0x5886ae(0x150))||_0xb21cf8[_0x5886ae(0x139)]('lampe')||_0xb21cf8['includes'](_0x5886ae(0x1e9)))){if(_0x190b6b[_0x5886ae(0x186)][_0x5886ae(0x114)]||_0x535046['includes']('sensor')||_0xb21cf8['includes']('switch'))_0xdfc7a6=_0x5886ae(0x1ee);}else{if(!_0xdfc7a6&&_0x540005&&(_0x535046[_0x5886ae(0x139)](_0x5886ae(0x242))||_0x535046[_0x5886ae(0x139)](_0x5886ae(0xc5))||_0x535046[_0x5886ae(0x139)](_0x5886ae(0x184))||_0xb21cf8[_0x5886ae(0x139)](_0x5886ae(0x17d))||_0xb21cf8[_0x5886ae(0x139)](_0x5886ae(0xbc))||_0xb21cf8[_0x5886ae(0x139)]('heizung')))_0xdfc7a6=_0x5886ae(0x242);else{if(!_0xdfc7a6&&_0x481df7)_0xdfc7a6=_0x5886ae(0x223);}}}}if(_0xdfc7a6){let _0x5bce1f=_0x2986ff[_0x4a89da]||'';if(!_0x5bce1f){let _0x28c8d9=_0x4a89da;for(let _0x537b69=0x0;_0x537b69<0x3;_0x537b69++){const _0x1867b6=_0x28c8d9[_0x5886ae(0xac)]('.');if(_0x1867b6===-0x1)break;_0x28c8d9=_0x28c8d9[_0x5886ae(0x10a)](0x0,_0x1867b6);if(_0x2986ff[_0x28c8d9]){_0x5bce1f=_0x2986ff[_0x28c8d9];break;}}}if(!_0x5bce1f){const _0x32bae5=(_0x4a89da+'\x20'+_0x1e08f4)[_0x5886ae(0x173)]();if(_0x32bae5[_0x5886ae(0x139)](_0x5886ae(0x1cc))||_0x32bae5['includes']('wc'))_0x5bce1f=_0x5886ae(0x176);else{if(_0x32bae5[_0x5886ae(0x139)](_0x5886ae(0x119)))_0x5bce1f=_0x5886ae(0x228);else{if(_0x32bae5[_0x5886ae(0x139)](_0x5886ae(0x236)))_0x5bce1f=_0x5886ae(0x19d);else{if(_0x32bae5[_0x5886ae(0x139)](_0x5886ae(0xae)))_0x5bce1f=_0x5886ae(0x144);else{if(_0x32bae5['includes'](_0x5886ae(0x1e6)))_0x5bce1f=_0x5886ae(0xb4);}}}}}_0x304e7a[_0x5886ae(0x165)]({'id':_0x4a89da,'name':_0x1e08f4,'location':_0x5bce1f,'type':_0xdfc7a6,'logDuplicates':_0xdfc7a6==='motion','isExit':![],'_score':_0x5bce1f?0x50:_0xdfc7a6==='custom'?0x5a:0x28});}}return _0x304e7a['sort']((_0x1a1e5f,_0x114e9f)=>_0x114e9f[_0x5886ae(0x24c)]-_0x1a1e5f[_0x5886ae(0x24c)]),_0x304e7a;}[a0_0x18ffa8(0x1c6)](_0x2eb248){const _0xe03d93=a0_0x18ffa8;if(typeof _0x2eb248===_0xe03d93(0x24d))return _0x2eb248;try{return JSON[_0xe03d93(0x1cd)](_0x2eb248);}catch(_0x52b980){return null;}}async[a0_0x18ffa8(0x218)](){}async[a0_0x18ffa8(0xfd)](){const _0x2a6b1b=a0_0x18ffa8;try{const _0x56ecf1=await this[_0x2a6b1b(0x1b0)](_0x2a6b1b(0x23b));_0x56ecf1&&_0x56ecf1['val']&&(this[_0x2a6b1b(0x220)]=JSON[_0x2a6b1b(0x1cd)](_0x56ecf1['val'][_0x2a6b1b(0x111)]()));}catch(_0x3f36ad){this[_0x2a6b1b(0x220)]=[];}try{const _0x279f99=await this[_0x2a6b1b(0x1b0)]('analysis.analysisHistory');if(_0x279f99&&_0x279f99['val'])this[_0x2a6b1b(0x16d)]=JSON[_0x2a6b1b(0x1cd)](_0x279f99[_0x2a6b1b(0x24a)][_0x2a6b1b(0x111)]());}catch(_0x49b9f7){this[_0x2a6b1b(0x16d)]=[];}}async[a0_0x18ffa8(0xd5)](){const _0x1ab305=a0_0x18ffa8;try{const _0x3d2730=await this[_0x1ab305(0x22e)](_0x1ab305(0xfa));_0x3d2730&&_0x3d2730[_0x1ab305(0x186)]&&(this[_0x1ab305(0x12a)]={'latitude':_0x3d2730[_0x1ab305(0x186)][_0x1ab305(0x246)]||0x0,'longitude':_0x3d2730['common'][_0x1ab305(0xe3)]||0x0,'city':_0x3d2730[_0x1ab305(0x186)][_0x1ab305(0x10c)]||''});}catch(_0x3943bd){}}async[a0_0x18ffa8(0x117)](_0x55cbee){const _0x37b9b7=a0_0x18ffa8;if(!_0x55cbee)return![];this['systemUUID']=await this[_0x37b9b7(0x20d)]();if(_0x55cbee===_0x37b9b7(0x138)||_0x55cbee[_0x37b9b7(0xf7)](_0x37b9b7(0x14e)))return!![];return![];}async[a0_0x18ffa8(0x20d)](){const _0x4c873d=a0_0x18ffa8;try{const _0x514b70=await this[_0x4c873d(0x22e)](_0x4c873d(0x1c8));if(_0x514b70&&_0x514b70['native']&&_0x514b70[_0x4c873d(0x1cb)]['uuid'])return _0x514b70['native']['uuid'];return _0x4c873d(0x23f);}catch(_0x2bd75a){return'uuid-error';}}async[a0_0x18ffa8(0xe1)](){const _0x4fe8a8=a0_0x18ffa8;await this['checkSystemObjects'](),await this[_0x4fe8a8(0x233)](_0x4fe8a8(0x1f2),{'type':_0x4fe8a8(0x234),'common':{'name':_0x4fe8a8(0x1a8),'type':_0x4fe8a8(0x108),'role':'json','read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x4fe8a8(0x23b),{'type':_0x4fe8a8(0x234),'common':{'name':'Event\x20History','type':_0x4fe8a8(0x108),'role':_0x4fe8a8(0x191),'read':!![],'write':![]},'native':{}}),await this[_0x4fe8a8(0x233)]('analysis.trigger',{'type':_0x4fe8a8(0x234),'common':{'name':'Trigger\x20Analysis','type':'boolean','role':_0x4fe8a8(0xd3),'read':!![],'write':!![],'def':![]},'native':{}}),await this[_0x4fe8a8(0x233)]('analysis.triggerBriefing',{'type':'state','common':{'name':'Trigger\x20Briefing\x20(Test)','type':'boolean','role':_0x4fe8a8(0xd3),'read':!![],'write':!![],'def':![]},'native':{}}),await this[_0x4fe8a8(0x233)](_0x4fe8a8(0x201),{'type':'state','common':{'name':_0x4fe8a8(0x217),'type':_0x4fe8a8(0x108),'role':_0x4fe8a8(0x191),'read':!![],'write':![]},'native':{}}),await this[_0x4fe8a8(0x233)](_0x4fe8a8(0xf9),{'type':_0x4fe8a8(0x234),'common':{'name':_0x4fe8a8(0x1de),'type':'boolean','role':_0x4fe8a8(0x101),'read':!![],'write':![],'def':![]},'native':{}}),await this[_0x4fe8a8(0x233)]('analysis.isEmergency',{'type':_0x4fe8a8(0x234),'common':{'name':_0x4fe8a8(0x156),'type':_0x4fe8a8(0x16f),'role':_0x4fe8a8(0xc1),'read':!![],'write':![],'def':![]},'native':{}}),await this[_0x4fe8a8(0x233)](_0x4fe8a8(0x1fa),{'type':_0x4fe8a8(0x234),'common':{'name':_0x4fe8a8(0x107),'type':_0x4fe8a8(0x108),'role':_0x4fe8a8(0x210),'read':!![],'write':![]},'native':{}}),await this[_0x4fe8a8(0x233)]('analysis.activitySummary',{'type':_0x4fe8a8(0x234),'common':{'name':_0x4fe8a8(0x1d7),'type':_0x4fe8a8(0x108),'role':_0x4fe8a8(0xbb),'read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x4fe8a8(0xeb),{'type':_0x4fe8a8(0x234),'common':{'name':_0x4fe8a8(0x126),'type':_0x4fe8a8(0x108),'role':_0x4fe8a8(0x234),'read':!![],'write':![],'def':_0x4fe8a8(0x159)},'native':{}}),await this[_0x4fe8a8(0x233)]('analysis.comfortSummary',{'type':'state','common':{'name':_0x4fe8a8(0xb0),'type':_0x4fe8a8(0x108),'role':_0x4fe8a8(0xbb),'read':!![],'write':![]},'native':{}}),await this[_0x4fe8a8(0x233)](_0x4fe8a8(0x1f8),{'type':'state','common':{'name':_0x4fe8a8(0xb1),'type':_0x4fe8a8(0x108),'role':_0x4fe8a8(0xbb),'read':!![],'write':![]},'native':{}}),await this[_0x4fe8a8(0x149)](_0x4fe8a8(0xe6),{'type':'channel','common':{'name':_0x4fe8a8(0x13a)},'native':{}}),await this['setObjectNotExistsAsync'](_0x4fe8a8(0x18f),{'type':_0x4fe8a8(0x234),'common':{'name':_0x4fe8a8(0x133),'type':_0x4fe8a8(0x16f),'role':_0x4fe8a8(0x253),'read':!![],'write':![],'def':![]},'native':{}}),await this[_0x4fe8a8(0x233)](_0x4fe8a8(0xe7),{'type':_0x4fe8a8(0x234),'common':{'name':'Description','type':_0x4fe8a8(0x108),'role':_0x4fe8a8(0xbb),'read':!![],'write':![]},'native':{}}),await this[_0x4fe8a8(0x233)](_0x4fe8a8(0x187),{'type':_0x4fe8a8(0x234),'common':{'name':_0x4fe8a8(0x153),'type':_0x4fe8a8(0x108),'role':_0x4fe8a8(0xbb),'read':!![],'write':![]},'native':{}}),await this[_0x4fe8a8(0x233)]('analysis.analysisHistory',{'type':_0x4fe8a8(0x234),'common':{'name':'Logbook','type':_0x4fe8a8(0x108),'role':_0x4fe8a8(0x191),'read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x4fe8a8(0x233)](_0x4fe8a8(0x1b6),{'type':'state','common':{'name':_0x4fe8a8(0xad),'type':'string','role':'json','read':!![],'write':![],'def':'[]'},'native':{}}),await this['extendObjectAsync'](_0x4fe8a8(0x20b),{'type':_0x4fe8a8(0x1c0),'common':{'name':_0x4fe8a8(0x18a)},'native':{}}),await this[_0x4fe8a8(0x233)]('analysis.health.sleepScore',{'type':_0x4fe8a8(0x234),'common':{'name':_0x4fe8a8(0x16c),'type':'number','role':'value.health','read':!![],'write':![],'def':0x0},'native':{}}),await this[_0x4fe8a8(0x233)](_0x4fe8a8(0x18e),{'type':_0x4fe8a8(0x234),'common':{'name':_0x4fe8a8(0xf5),'type':_0x4fe8a8(0x108),'role':_0x4fe8a8(0xbb),'read':!![],'write':![],'def':_0x4fe8a8(0x17b)},'native':{}}),await this[_0x4fe8a8(0x233)](_0x4fe8a8(0x132),{'type':_0x4fe8a8(0x234),'common':{'name':_0x4fe8a8(0x239),'type':_0x4fe8a8(0x108),'role':_0x4fe8a8(0xbb),'read':!![],'write':![],'def':''},'native':{}}),await this['checkLtmObjects'](),await this[_0x4fe8a8(0x14c)]();}async['checkSystemObjects'](){const _0x244fba=a0_0x18ffa8;await this[_0x244fba(0x149)](_0x244fba(0x164),{'type':_0x244fba(0x1c0),'common':{'name':_0x244fba(0x127)},'native':{}}),await this[_0x244fba(0x149)](SYSTEM_DP_MODE,{'type':_0x244fba(0x234),'common':{'name':'System\x20Mode','type':_0x244fba(0x108),'role':_0x244fba(0x234),'read':!![],'write':!![],'def':SYSTEM_MODES['NORMAL'],'states':{[SYSTEM_MODES[_0x244fba(0x1a1)]]:'Normal',[SYSTEM_MODES['VACATION']]:'Urlaub',[SYSTEM_MODES[_0x244fba(0xcc)]]:_0x244fba(0xdd),[SYSTEM_MODES[_0x244fba(0x1e2)]]:_0x244fba(0xbe)}},'native':{}});}async['checkLtmObjects'](){const _0x177b2b=a0_0x18ffa8;await this[_0x177b2b(0x149)](_0x177b2b(0x130),{'type':'channel','common':{'name':_0x177b2b(0x130)},'native':{}}),await this['extendObjectAsync'](LTM_DP_RAW_LOG,{'type':_0x177b2b(0x234),'common':{'name':_0x177b2b(0x1c9),'type':_0x177b2b(0x108),'role':'json','read':!![],'write':![]},'native':{}}),await this[_0x177b2b(0x149)](LTM_DP_DAILY_DIGESTS,{'type':_0x177b2b(0x234),'common':{'name':_0x177b2b(0x1a4),'type':_0x177b2b(0x108),'role':_0x177b2b(0x191),'read':!![],'write':![]},'native':{}}),await this['extendObjectAsync'](LTM_DP_STATUS,{'type':_0x177b2b(0x234),'common':{'name':'Processing\x20Status','type':'string','role':_0x177b2b(0xbb),'read':!![],'write':![]},'native':{}}),await this[_0x177b2b(0x149)](LTM_DP_TRIGGER_DIGEST,{'type':_0x177b2b(0x234),'common':{'name':_0x177b2b(0x224),'type':_0x177b2b(0x16f),'role':_0x177b2b(0xd3),'read':!![],'write':!![],'def':![]},'native':{}}),await this[_0x177b2b(0x149)](LTM_DP_BASELINE_STATUS,{'type':_0x177b2b(0x234),'common':{'name':_0x177b2b(0x23d),'type':'string','role':'text','read':!![],'write':![]},'native':{}});}async[a0_0x18ffa8(0x14c)](){const _0x2caf6c=a0_0x18ffa8;await this[_0x2caf6c(0x149)](LTM_DP_DRIFT_CHANNEL,{'type':'channel','common':{'name':_0x2caf6c(0x249)},'native':{}}),await this[_0x2caf6c(0x149)](LTM_DP_DRIFT_STATUS,{'type':'state','common':{'name':'Drift\x20Status','type':_0x2caf6c(0x108),'role':_0x2caf6c(0x234),'read':!![],'write':![],'def':_0x2caf6c(0x159)},'native':{}}),await this[_0x2caf6c(0x149)](LTM_DP_DRIFT_DETAILS,{'type':_0x2caf6c(0x234),'common':{'name':'Drift\x20Details','type':_0x2caf6c(0x108),'role':_0x2caf6c(0xbb),'read':!![],'write':![]},'native':{}}),await this[_0x2caf6c(0x149)](LTM_DP_DRIFT_LAST_CHECK,{'type':_0x2caf6c(0x234),'common':{'name':_0x2caf6c(0x15d),'type':_0x2caf6c(0x1a2),'role':'date','read':!![],'write':![]},'native':{}});}async['loadSystemMode'](){const _0x3c0720=a0_0x18ffa8;try{const _0x8ffa68=await this[_0x3c0720(0x1b0)](SYSTEM_DP_MODE);_0x8ffa68&&_0x8ffa68[_0x3c0720(0x24a)]&&Object[_0x3c0720(0x204)](SYSTEM_MODES)[_0x3c0720(0x139)](_0x8ffa68[_0x3c0720(0x24a)])?this[_0x3c0720(0xf2)]=_0x8ffa68[_0x3c0720(0x24a)]:(this[_0x3c0720(0xf2)]=SYSTEM_MODES[_0x3c0720(0x1a1)],await this[_0x3c0720(0x21d)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES['NORMAL'],'ack':!![]}));}catch(_0x5d7e56){this[_0x3c0720(0xf2)]=SYSTEM_MODES[_0x3c0720(0x1a1)];}}async[a0_0x18ffa8(0x206)](){const _0x3009a1=a0_0x18ffa8;try{const _0x2ecaf1=await this[_0x3009a1(0x1b0)](LTM_DP_RAW_LOG);if(_0x2ecaf1&&_0x2ecaf1[_0x3009a1(0x24a)])this[_0x3009a1(0x20c)]=JSON[_0x3009a1(0x1cd)](_0x2ecaf1['val']);}catch(_0x34431c){this['rawEventLog']=[];}}async[a0_0x18ffa8(0xc0)](){const _0x3d0f32=a0_0x18ffa8;try{const _0x5b1821=await this['getStateAsync'](LTM_DP_DAILY_DIGESTS);if(_0x5b1821&&_0x5b1821['val'])this['dailyDigests']=JSON[_0x3d0f32(0x1cd)](_0x5b1821[_0x3d0f32(0x24a)]);}catch(_0x57edb5){this[_0x3d0f32(0x1be)]=[];}await this['updateBaselineStatus']();}async[a0_0x18ffa8(0x1bf)](){const _0x303514=a0_0x18ffa8;this[_0x303514(0x20c)][_0x303514(0xe5)]>RAW_LOG_MAX_SIZE&&this[_0x303514(0x20c)]['splice'](0x0,this[_0x303514(0x20c)][_0x303514(0xe5)]-RAW_LOG_MAX_SIZE),await this[_0x303514(0x21d)](LTM_DP_RAW_LOG,{'val':JSON[_0x303514(0x1da)](this[_0x303514(0x20c)]),'ack':!![]});}async[a0_0x18ffa8(0x105)](_0x7dd78a=!![]){const _0x68930f=a0_0x18ffa8,_0x1a5e59=this[_0x68930f(0x1cf)][_0x68930f(0x1ac)]||0x3c;this[_0x68930f(0x1be)][_0x68930f(0xe5)]>_0x1a5e59&&this[_0x68930f(0x1be)][_0x68930f(0x148)](0x0,this[_0x68930f(0x1be)][_0x68930f(0xe5)]-_0x1a5e59);await this['setStateAsync'](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x68930f(0x1da)](this[_0x68930f(0x1be)]),'ack':!![]});if(_0x7dd78a)await this[_0x68930f(0x1f9)]();}async[a0_0x18ffa8(0x212)](_0x765926){const _0x28a246=a0_0x18ffa8;this[_0x28a246(0x16d)][_0x28a246(0xc8)](_0x765926);if(this[_0x28a246(0x16d)][_0x28a246(0xe5)]>ANALYSIS_HISTORY_MAX_SIZE)this[_0x28a246(0x16d)][_0x28a246(0xba)]();await this['setStateAsync'](_0x28a246(0xcd),{'val':JSON[_0x28a246(0x1da)](this['analysisHistory']),'ack':!![]});}async[a0_0x18ffa8(0x1f9)](){const _0xabb1bb=a0_0x18ffa8;if(!this[_0xabb1bb(0x221)]){await this[_0xabb1bb(0x21d)](LTM_DP_BASELINE_STATUS,{'val':_0xabb1bb(0x16e),'ack':!![]});return;}const _0x32c7fe=this[_0xabb1bb(0x1be)][_0xabb1bb(0xe5)]>=(this[_0xabb1bb(0x1cf)][_0xabb1bb(0xbd)]||0x7)?_0xabb1bb(0x21f)+this['dailyDigests'][_0xabb1bb(0xe5)]+_0xabb1bb(0x157):_0xabb1bb(0x1e0)+this[_0xabb1bb(0x1be)][_0xabb1bb(0xe5)]+'/'+(this['config'][_0xabb1bb(0xbd)]||0x7)+')';await this[_0xabb1bb(0x21d)](LTM_DP_BASELINE_STATUS,{'val':_0x32c7fe,'ack':!![]});}async[a0_0x18ffa8(0x1df)](){const _0xf717d7=a0_0x18ffa8,_0x412ef4=this[_0xf717d7(0x1cf)]['devices'];if(_0x412ef4&&_0x412ef4[_0xf717d7(0xe5)]>0x0){this[_0xf717d7(0x1b2)][_0xf717d7(0x154)]('Subscribing\x20to\x20'+_0x412ef4[_0xf717d7(0xe5)]+_0xf717d7(0x22c));for(const _0x4e1d45 of _0x412ef4){if(_0x4e1d45['id']){await this[_0xf717d7(0x240)](_0x4e1d45['id']);try{const _0x553912=await this['getForeignStateAsync'](_0x4e1d45['id']);if(_0x553912)this['sensorLastValues'][_0x4e1d45['id']]=_0x553912[_0xf717d7(0x24a)];}catch(_0x154cc3){}}}}}async[a0_0x18ffa8(0x104)](){const _0xff0aab=a0_0x18ffa8,_0x584cea=this[_0xff0aab(0x1cf)][_0xff0aab(0x1fd)]||[];if(_0x584cea[_0xff0aab(0xe5)]>0x0){this['log'][_0xff0aab(0x154)](_0xff0aab(0x1c5)+_0x584cea[_0xff0aab(0xe5)]+_0xff0aab(0x1e5));for(const _0x57542d of _0x584cea){await this['subscribeForeignStatesAsync'](_0x57542d);}try{await this[_0xff0aab(0x22b)]();}catch(_0x448ade){}}}async[a0_0x18ffa8(0x17a)](){const _0x4ee77e=a0_0x18ffa8;try{if(!this[_0x4ee77e(0x1cf)][_0x4ee77e(0x208)])return _0x4ee77e(0x1ab);let _0x2eae01='';const _0x4a3f8=this[_0x4ee77e(0x1cf)][_0x4ee77e(0x124)];if(_0x4a3f8)try{if(_0x4a3f8[_0x4ee77e(0x139)](_0x4ee77e(0x190))){const _0x39c9f3=await this['getForeignStateAsync'](_0x4a3f8+'.Summary.Current');if(_0x39c9f3&&_0x39c9f3[_0x4ee77e(0x24a)])_0x2eae01=_0x39c9f3[_0x4ee77e(0x24a)];}else{if(_0x4a3f8[_0x4ee77e(0x139)]('daswetter')){const _0x1fe8de=await this[_0x4ee77e(0x1eb)](_0x4a3f8+'.NextHours.Location_1.Day_1.current.symbol_desc');if(_0x1fe8de&&_0x1fe8de[_0x4ee77e(0x24a)])_0x2eae01=_0x1fe8de[_0x4ee77e(0x24a)];}else{if(_0x4a3f8['includes'](_0x4ee77e(0xdb))){const _0x14f27f=await this['getForeignStateAsync'](_0x4a3f8+_0x4ee77e(0x20f));if(_0x14f27f&&_0x14f27f[_0x4ee77e(0x24a)])_0x2eae01=_0x14f27f[_0x4ee77e(0x24a)];}}}}catch(_0x1e7024){}if(!_0x2eae01){const _0x32cada=[_0x4ee77e(0x181),_0x4ee77e(0xd6),_0x4ee77e(0xce),_0x4ee77e(0x197)];for(const _0x536c56 of _0x32cada){try{const _0x2572f7=await this[_0x4ee77e(0x22e)](_0x536c56);if(_0x2572f7){if(_0x536c56[_0x4ee77e(0x139)](_0x4ee77e(0x190))){const _0x43e63e=await this[_0x4ee77e(0x1eb)](_0x536c56+_0x4ee77e(0xd1));if(_0x43e63e&&_0x43e63e[_0x4ee77e(0x24a)]){_0x2eae01=_0x43e63e[_0x4ee77e(0x24a)];break;}}}}catch(_0x4f1a40){}}}return _0x2eae01?_0x4ee77e(0x175)+_0x2eae01:_0x4ee77e(0x1d8);}catch(_0x11cea9){return _0x4ee77e(0x15a)+_0x11cea9[_0x4ee77e(0x1ce)];}}async[a0_0x18ffa8(0x14f)](){const _0x37764c=a0_0x18ffa8;try{if(!this[_0x37764c(0x1cf)][_0x37764c(0x213)])return _0x37764c(0x11a);let _0x57b4a6=this[_0x37764c(0x1cf)][_0x37764c(0x129)]||'ical.0',_0x57cb89=this[_0x37764c(0x1cf)][_0x37764c(0x19c)]||[];if(typeof _0x57cb89===_0x37764c(0x108))_0x57cb89=_0x57cb89[_0x37764c(0x158)](',');try{const _0x501c70=await this[_0x37764c(0x1eb)](_0x57b4a6+'.data.table');if(_0x501c70&&_0x501c70[_0x37764c(0x24a)]){let _0x5dcdbb=this[_0x37764c(0x1c6)](_0x501c70[_0x37764c(0x24a)]);if(_0x5dcdbb&&Array[_0x37764c(0xd9)](_0x5dcdbb)){if(_0x57cb89[_0x37764c(0xe5)]>0x0)_0x5dcdbb=_0x5dcdbb['filter'](_0x1c3b90=>_0x57cb89[_0x37764c(0x139)](_0x1c3b90[_0x37764c(0x1a0)]||''));else return _0x37764c(0x22f);if(_0x5dcdbb[_0x37764c(0xe5)]>0x0){const _0x33b486=_0x5dcdbb['slice'](0x0,0x3)[_0x37764c(0x1d3)](_0x56f044=>{const _0x4daa50=_0x37764c;let _0x2357d1=_0x56f044[_0x4daa50(0x162)];if(_0x56f044[_0x4daa50(0x109)])_0x2357d1+='\x20'+_0x56f044[_0x4daa50(0x109)];return _0x2357d1+':\x20'+_0x56f044[_0x4daa50(0x163)]+'\x20('+_0x56f044[_0x4daa50(0x1a0)]+')';});return _0x37764c(0x170)+_0x33b486['join'](_0x37764c(0x161));}else return _0x37764c(0x185);}}}catch(_0x5e8a04){this[_0x37764c(0x1b2)][_0x37764c(0x10d)](_0x37764c(0xfb)+_0x5e8a04[_0x37764c(0x1ce)]);}return _0x37764c(0x207);}catch(_0x4e273e){return _0x37764c(0x12c)+_0x4e273e[_0x37764c(0x1ce)];}}async[a0_0x18ffa8(0x227)](_0x3ec89b){const _0x3364c0=a0_0x18ffa8;try{const _0x6b8872=await this['getForeignStateAsync'](_0x3ec89b+_0x3364c0(0x211));if(_0x6b8872&&_0x6b8872[_0x3364c0(0x24a)]){const _0xb47cbc=this[_0x3364c0(0x1c6)](_0x6b8872[_0x3364c0(0x24a)]);if(_0xb47cbc&&Array['isArray'](_0xb47cbc)){const _0x4777c4=[...new Set(_0xb47cbc[_0x3364c0(0x1d3)](_0x553bef=>_0x553bef[_0x3364c0(0x1a0)])[_0x3364c0(0x24e)](Boolean))];return _0x4777c4['sort']();}}return[];}catch(_0x4a585b){return this[_0x3364c0(0x1b2)][_0x3364c0(0x1dc)]('getCalendarNames\x20Error:\x20'+_0x4a585b[_0x3364c0(0x1ce)]),[];}}async[a0_0x18ffa8(0x22b)](){const _0x44d593=a0_0x18ffa8;try{const _0x13032c=this[_0x44d593(0x1cf)]['presenceDevices']||[];let _0x543e9e=![];for(const _0x5ab8f4 of _0x13032c){try{const _0x268b61=await this[_0x44d593(0x1eb)](_0x5ab8f4);if(_0x268b61&&(_0x268b61[_0x44d593(0x24a)]===!![]||_0x268b61[_0x44d593(0x24a)]===_0x44d593(0x174)||_0x268b61['val']===0x1)){_0x543e9e=!![];break;}}catch(_0x404331){}}return _0x543e9e&&(this[_0x44d593(0x21c)]&&(this[_0x44d593(0x1b2)][_0x44d593(0x154)](_0x44d593(0x24f)),this[_0x44d593(0x1fe)]()),!this[_0x44d593(0x1f1)]&&this[_0x44d593(0xf2)]===SYSTEM_MODES['NORMAL']&&await this['setPresence'](!![])),_0x543e9e;}catch(_0x321884){return this[_0x44d593(0x1b2)][_0x44d593(0x1dc)]('Error\x20checking\x20WiFi:\x20'+_0x321884[_0x44d593(0x1ce)]),![];}}['startExitTimer'](){const _0x5446f1=a0_0x18ffa8;this[_0x5446f1(0x1fe)](),this[_0x5446f1(0x199)]=!![],this[_0x5446f1(0x1f4)]=setTimeout(()=>{const _0xcc6597=_0x5446f1;this[_0xcc6597(0x199)]=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),this['exitTimer']=setTimeout(()=>{const _0x391554=_0x5446f1;this[_0x391554(0x122)](![]),this[_0x391554(0x21c)]=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}[a0_0x18ffa8(0x1fe)](){const _0x517a98=a0_0x18ffa8;if(this['exitTimer'])clearTimeout(this[_0x517a98(0x21c)]);if(this[_0x517a98(0x1f4)])clearTimeout(this[_0x517a98(0x1f4)]);this[_0x517a98(0x21c)]=null,this[_0x517a98(0x1f4)]=null,this[_0x517a98(0x199)]=![];}async['setPresence'](_0x303e8d){const _0x313669=a0_0x18ffa8;if(this[_0x313669(0x1f1)]===_0x303e8d)return;this['isPresent']=_0x303e8d,await this['setStateAsync'](_0x313669(0xdf),{'val':_0x303e8d,'ack':!![]});}async['saveFeedback'](_0x51071c){const _0x5e318c=a0_0x18ffa8;this[_0x5e318c(0x1b2)][_0x5e318c(0x154)]('Feedback\x20saved:\x20'+JSON[_0x5e318c(0x1da)](_0x51071c));}async['runBaselineDriftAnalysis'](){const _0x26d244=a0_0x18ffa8;if(!this['isProVersion']||!this[_0x26d244(0x178)])return;const _0x34dd68=this[_0x26d244(0x1cf)][_0x26d244(0x12f)]||0xe;if(this[_0x26d244(0x1be)][_0x26d244(0xe5)]<_0x34dd68+(this[_0x26d244(0x1cf)][_0x26d244(0xbd)]||0x7)){await this['setStateAsync'](LTM_DP_DRIFT_STATUS,{'val':_0x26d244(0x12d),'ack':!![]});return;}const _0x322d32=this[_0x26d244(0x1be)][_0x26d244(0x1b1)](-_0x34dd68),_0x237e43=this['dailyDigests']['slice'](0x0,this[_0x26d244(0x1be)][_0x26d244(0xe5)]-_0x34dd68),_0x4a7b29=_0x26d244(0xef)+JSON[_0x26d244(0x1da)](_0x237e43)+_0x26d244(0x216)+JSON['stringify'](_0x322d32);try{const _0x58a928=await this[_0x26d244(0x178)][_0x26d244(0x11e)](_0x4a7b29),_0xeb2e04=JSON['parse'](_0x58a928[_0x26d244(0x235)][_0x26d244(0xbb)]()[_0x26d244(0x135)](/```json|```/g,'')[_0x26d244(0x110)]());_0xeb2e04['baselineDrift']&&(await this[_0x26d244(0x21d)](LTM_DP_DRIFT_STATUS,{'val':_0xeb2e04[_0x26d244(0x113)],'ack':!![]}),await this[_0x26d244(0x21d)](LTM_DP_DRIFT_DETAILS,{'val':_0xeb2e04[_0x26d244(0x19a)],'ack':!![]}),await this[_0x26d244(0x21d)](LTM_DP_DRIFT_LAST_CHECK,{'val':Date[_0x26d244(0x19e)](),'ack':!![]}));}catch(_0x2a37ba){}}[a0_0x18ffa8(0x167)](){const _0x721ab3=a0_0x18ffa8;try{if(this[_0x721ab3(0x18b)])this[_0x721ab3(0x18b)][_0x721ab3(0x196)]();if(!this[_0x721ab3(0x221)]){this[_0x721ab3(0x21d)](LTM_DP_STATUS,{'val':_0x721ab3(0x16e),'ack':!![]});return;}this[_0x721ab3(0x18b)]=schedule[_0x721ab3(0x21b)](LTM_SCHEDULE,()=>this[_0x721ab3(0xb6)]());}catch(_0x22b367){this[_0x721ab3(0x1b2)]['error']('LTM\x20Sched\x20Error:\x20'+_0x22b367[_0x721ab3(0x1ce)]);}}[a0_0x18ffa8(0x237)](){const _0x38257a=a0_0x18ffa8;try{if(this[_0x38257a(0x24b)])this['modeResetJob']['cancel']();this[_0x38257a(0x24b)]=schedule[_0x38257a(0x21b)](MODE_RESET_SCHEDULE,async()=>{const _0x3f7d5f=_0x38257a;await this[_0x3f7d5f(0x17f)](),AUTO_RESET_MODES[_0x3f7d5f(0x139)](this[_0x3f7d5f(0xf2)])&&await this[_0x3f7d5f(0x21d)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x3f7d5f(0x1a1)],'ack':![]});});}catch(_0x31825d){this[_0x38257a(0x1b2)][_0x38257a(0x1dc)](_0x38257a(0x15c)+_0x31825d[_0x38257a(0x1ce)]);}}[a0_0x18ffa8(0x18c)](){const _0x44f8aa=a0_0x18ffa8;try{if(this['driftAnalysisTimer'])clearInterval(this[_0x44f8aa(0x14b)]);if(!this['isProVersion'])return;this[_0x44f8aa(0x14b)]=setInterval(()=>this[_0x44f8aa(0xe9)](),(this[_0x44f8aa(0x1cf)][_0x44f8aa(0x1dd)]||0x18)*0x36ee80),setTimeout(()=>this['runBaselineDriftAnalysis'](),0x1388);}catch(_0xd7392a){this[_0x44f8aa(0x1b2)][_0x44f8aa(0x1dc)](_0x44f8aa(0x1e7)+_0xd7392a[_0x44f8aa(0x1ce)]);}}[a0_0x18ffa8(0x179)](){const _0x59d720=a0_0x18ffa8;try{if(this[_0x59d720(0x131)])this[_0x59d720(0x131)][_0x59d720(0x196)]();if(!this[_0x59d720(0x1cf)][_0x59d720(0x15e)])return;const _0x15f49a=(this[_0x59d720(0x1cf)][_0x59d720(0x10f)]||_0x59d720(0x1c1))[_0x59d720(0x158)](':'),_0x5fb5e8=parseInt(_0x15f49a[0x0])||0x8,_0x314bc4=parseInt(_0x15f49a[0x1])||0x0,_0x223aff=_0x314bc4+'\x20'+_0x5fb5e8+'\x20*\x20*\x20*';this[_0x59d720(0x1b2)][_0x59d720(0x154)](_0x59d720(0x250)+_0x5fb5e8+':'+(_0x314bc4<0xa?'0'+_0x314bc4:_0x314bc4)),this['briefingJob']=schedule[_0x59d720(0x21b)](_0x223aff,()=>{const _0x27e6f6=_0x59d720;this[_0x27e6f6(0x137)]();});}catch(_0x1b7dc2){this[_0x59d720(0x1b2)][_0x59d720(0x1dc)]('Briefing\x20Sched\x20Error:\x20'+_0x1b7dc2[_0x59d720(0x1ce)]);}}async[a0_0x18ffa8(0x193)](_0x4e6398,_0x5bb8f6=![],_0x1ac074=![]){const _0x4e1d4b=a0_0x18ffa8;this['log'][_0x4e1d4b(0x154)]((_0x5bb8f6?'[TEST]\x20':'')+_0x4e1d4b(0x214)+_0x4e6398+'\x22');const _0x561bc8=this[_0x4e1d4b(0x1cf)];let _0x35ef39=0x0;_0x561bc8[_0x4e1d4b(0x1f7)]&&(await this[_0x4e1d4b(0x177)](_0x561bc8['notifyTelegramInstance'],_0x4e1d4b(0x171),{'text':_0x4e6398,'user':_0x561bc8[_0x4e1d4b(0x168)]}),_0x35ef39++);if(_0x561bc8[_0x4e1d4b(0xab)]){let _0x2d1e8d={'message':_0x4e6398,'title':_0x1ac074?_0x4e1d4b(0x1d1):'Cogni-Living','priority':_0x1ac074?0x2:0x1,'device':_0x561bc8[_0x4e1d4b(0x203)]};_0x1ac074&&(_0x2d1e8d[_0x4e1d4b(0xea)]=0x1e,_0x2d1e8d[_0x4e1d4b(0x222)]=0xe10,_0x2d1e8d['sound']='siren'),await this[_0x4e1d4b(0x177)](_0x561bc8[_0x4e1d4b(0x12b)],'send',_0x2d1e8d),_0x35ef39++;}return _0x561bc8[_0x4e1d4b(0x1b4)]&&(await this[_0x4e1d4b(0x177)](_0x561bc8['notifyEmailInstance'],_0x4e1d4b(0x171),{'text':_0x4e6398,'to':_0x561bc8[_0x4e1d4b(0x123)]}),_0x35ef39++),_0x35ef39;}}if(require[a0_0x18ffa8(0xb3)]!==module)module[a0_0x18ffa8(0xaf)]=_0x56baec=>new CogniLiving(_0x56baec);else new CogniLiving();