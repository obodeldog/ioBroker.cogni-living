const a0_0x2fe610=a0_0x4f06;(function(_0x3d2403,_0x39da10){const _0x379eb6=a0_0x4f06,_0x420bb9=_0x3d2403();while(!![]){try{const _0x4f9b96=-parseInt(_0x379eb6(0x1d2))/0x1*(-parseInt(_0x379eb6(0x252))/0x2)+-parseInt(_0x379eb6(0x27d))/0x3*(parseInt(_0x379eb6(0x233))/0x4)+parseInt(_0x379eb6(0x28a))/0x5+parseInt(_0x379eb6(0x2a8))/0x6*(-parseInt(_0x379eb6(0x29a))/0x7)+parseInt(_0x379eb6(0x275))/0x8+parseInt(_0x379eb6(0x1c3))/0x9+-parseInt(_0x379eb6(0x26f))/0xa;if(_0x4f9b96===_0x39da10)break;else _0x420bb9['push'](_0x420bb9['shift']());}catch(_0xdde862){_0x420bb9['push'](_0x420bb9['shift']());}}}(a0_0x5ad0,0x79ca9));function a0_0x5ad0(){const _0x415575=['GAIT_RESULT','getObjectAsync','Event\x20History','Started...','payload','analysis.health.gaitSpeed','description','Gemini\x20Init\x20Error:\x20','276VRteHo','systemUUID','prÃ¤senz','livingContext','ðŸ•¸ï¸\x20Building\x20Topology\x20Matrix...','BUILD_TOPOLOGY','checkAndInstall','length','analysis.health.trendDiagnosis','useCalendar','message','onUnload','inactivityThresholdHours','ðŸŒ…\x20Morning\x20Briefing:\x0a','minDaysForBaseline','exitTimer','analysis.health.lastCheck','analysis.automation.triggerAction','filter','scanForDevices','isProVersion','search','Training\x20Error:\x20','main','rating','onStateChange','analysis.training.triggerComfort','val','genAI','5483040MTbDss','bind','toFixed','\x0aGrund:\x20','NORMAL','briefingJob','1699568FNIxdn','analysis.isAlert','delObjectAsync','Energy\x20Intelligence','Security\x20Monitor','shift','currentSystemMode','(((.+)+)+)+$','36TjKcUJ','Digest','data','analysis.lastResult','WiFi\x20Presence\x20detected.','Restoring\x20sensor\x20cache...','scanDevices','reason','object','isPresent','analysis.alertReason','getLtmData','analysisHistory','3242525UWRyUu','LTM.rawEventLog','Regel\x20erkannt:\x20','light','@iobroker/adapter-core','kontakt','vacation','Target\x20Value','triggerDailyDigest','endsWith','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','toString','namespace','error','generateContent','indicator.alarm','133LhdVoI','Unbekannt','ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','getOverviewData','ENERGY_TRAIN_RESULT','summary','Train\x20Energy','HEALTH_RESULT','unload','type','analysis.automation.targetValue','klima','setObjectNotExistsAsync','LTM.processingStatus','82950LHbOmt','diagnosis','Current\x20Threshold','modeResetJob','location','exitGraceTimer','Training\x20Status','targetId','city','systemConfig','config','Thermodynamics','setupLtmScheduler','analysisTimer','apply','analysis.security.lastCheck','dependencyInstallInProgress','switch','aiPersona','Keine\x20Details.','GUEST','response','analysis.health','rawEventLog','notifyTelegramEnabled','Insulation\x20Score','system.config','Fokus\x20auf\x20Familienroutinen.','split','.communicate.request','[PYTHON]\x20','@google/generative-ai','Last\x20Check','analysis.automation.patternDetected','dimmer','Activity-Level','isEmergency','ðŸ\x20Python\x20Pong','\x20->\x20','TRAIN_SECURITY','button','communicate.request','getForeignObjectsAsync','driftDetails','stringify','Anomaly\x20Detected','baselineDrift','calendarInstance','occupancy','\x20new\x20patterns.','setStateAsync','N/A','Trigger\x20Action','isAlert','boolean','forEach','latitude','TRAIN_HEALTH','geminiApiKey','toISOString','[RESULT]','.forecast.current.temperature','analysis.energy','./lib/scanner','window','Aktiv\x20(','confidence','fill','push','Keine\x20Termine.','notifyTelegramInstance','log','subscribeStates','submitFeedback','TRAIN_ENERGY','values','analysis.health.trendValue','TOPOLOGY_RESULT','LTM.driftAnalysis.baselineDrift','Raw\x20Log','ltmStbWindowDays','Anomaly\x20Score','PRIORITÃ„T:\x20Gesundheit/AAL.','heizung','find','normal','OK:\x20','analysis.history_debug_00','Lernphase\x20(','setupDriftAnalysisScheduler','Train\x20Comfort','bewegung','pop','analysis.security.currentThreshold','getHours','./lib/installer','\x20Tage)','onReady','devices','analysis.automation.description','temperatur','application/json','enum','analysis.training.triggerHealth','\x20=\x20','geminiModel','Topology\x20Matrix','Analysiere\x20ausgewogen.','string','LTM.triggerDailyDigest','stdout','heating','enum.functions.*','presenceDevices','includes','setState','Auto\x20Apply','Gemini\x20AI\x20initialized.','getCalendarNames','analysis.training.status','text','is_anomaly','Heating\x20Score','outdoorSensorId','[LOG]','parse','ðŸš€\x20Starting\x20NUUKANNI\x20Logic\x20(v0.12.10)...','automation.triggerAction','automationProposal','getEnums','door','enum.rooms.*','analysis.automation.autoApply','constructor','âš ï¸\x20ALARM:\x20','trim','driftAnalysisTimer','analysis.energy.forecast','analysis.security.topologyMatrix','stateChange','ðŸ“\x20Feedback\x20received:\x20','sensorLastValues','Adapter','.Current.Temperature','COMFORT_RESULT','Error\x20launching\x20Python:\x20','isGracePeriodActive','LTM','channel','lastAlertState','command','analysis.training.triggerSecurity','Target\x20ID','stdin','debug','instance','party','analysis.health.todayVector','analysis.training.triggerEnergy','toLowerCase','Success','LTM.driftAnalysis','date','setForeignStateAsync','Unknown','unshift','analysis.energy.heatingScore','getDate','cogni-living','service.py','longitude','AI\x20Training','Description','Train\x20Security','tÃ¼r','sendTo','getForeignStateAsync','info','logDuplicates','rule','PRIORITÃ„T:\x20Sicherheit.','âš ï¸\x20SECURITY\x20ALARM:\x20','Trend\x20Value','ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20','testApiKey','6873939EeiQfD','from','TRAINING_COMPLETE','name','accuweather','Topology\x20Error:\x20','cogni-living\x20adapter\x20starting\x20(v','analysis.training','getMinutes','ðŸ›‹ï¸\x20BUTLER:\x20Keine\x20neuen\x20Muster\x20gefunden.','success','status','timestamp','autoApply','analysisInterval','1873YCsWti','generic','now','join','.\x20EMERGENCY:\x20','.Current.WeatherText','subscribeForeignStatesAsync','useWeather','LTM.driftAnalysis.lastCheck','indicator','.\x20WETTER:\x20','Alert\x20Status','events.history_debug_00','analysis.training.triggerTopology','.forecast.current.state','insulation','round','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','replace','Detected\x20Patterns','splice','ANALYZE_HEALTH','.NextHours.Location_1.Day_1.current.temp_value','LTM.trainingData.thermodynamics','writable','VACATION','./lib/scheduler','existsSync','analysis.triggerBriefing','system','Gait\x20Speed\x20Trend','ðŸ›‹ï¸\x20BUTLER:\x20Found\x20','number','ltmLtbWindowDays','HEALTH_TRAIN_RESULT','TRAIN_COMFORT','callback','ack','PYTHON_EXE','Kein\x20API\x20Key!','extendObjectAsync','.\x20KONTEXT:\x20','events.lastEvent','analysis.energy.insulationScore','Alert\x20Reason','toLocaleTimeString','ltmJob','PONG','value','LTM.baselineStatus','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','slice','triggerBriefing','contact','events.history','exports','system.isPresent','common','analysis.analysisHistory','KI-Modell\x20nicht\x20initialisiert','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','Last\x20raw\x20event','weatherInstance','state','Temperature\x20Forecast','detected','Â°C,\x20','pythonProcess','analysis.automation.detectedPatterns','âœ…\x20HEALTH\x20TRAINED.','getGenerativeModel','\x0aSTB:\x20','analysis.security.lastScore','User\x20dismissed\x20automation\x20proposal.','analysis.trigger','cancel','N/A\x20(Learning)','LTM.trainingData.sequences','text.alarm','.\x20EVENTS:\x20','ðŸ›¡ï¸\x20SECURITY\x20CHECK:\x20Score\x20','analysis.activitySummary','schalter','Trigger\x20Analysis','ðŸ•¸ï¸\x20Topology\x20Map\x20updated.','ðŸ›‹ï¸\x20Triggering\x20Comfort\x20Analysis\x20(Pattern\x20Mining)...','temperature','ready','details','motion','floor','child_process','System\x20Mode','lampe','PREDICT_ENERGY','onMessage','[RECORDER]\x20Error:\x20','191120wgsUVv','json','Trend','path','analysis.automation.targetId','startsWith','alertReason','getTime','write','dailyDigests','getStateAsync','eventHistory','system.presenceWho','Train\x20Health','analysis.health.isAnomaly','system.mode','openweathermap','substring','map','threshold','keys','Kein\x20API\x20Key.','.forecast.current.temp'];a0_0x5ad0=function(){return _0x415575;};return a0_0x5ad0();}const a0_0x51453e=(function(){let _0x4af724=!![];return function(_0x1da607,_0x1e3021){const _0x303a72=_0x4af724?function(){const _0x1a2c6e=a0_0x4f06;if(_0x1e3021){const _0x21ac39=_0x1e3021[_0x1a2c6e(0x2b6)](_0x1da607,arguments);return _0x1e3021=null,_0x21ac39;}}:function(){};return _0x4af724=![],_0x303a72;};}()),a0_0x44f7d2=a0_0x51453e(this,function(){const _0x6fef0b=a0_0x4f06;return a0_0x44f7d2[_0x6fef0b(0x295)]()[_0x6fef0b(0x267)](_0x6fef0b(0x27c))[_0x6fef0b(0x295)]()[_0x6fef0b(0x32d)](a0_0x44f7d2)[_0x6fef0b(0x267)]('(((.+)+)+)+$');});a0_0x44f7d2();'use strict';const utils=require(a0_0x2fe610(0x28e)),{GoogleGenerativeAI}=require(a0_0x2fe610(0x2c7)),{spawn}=require(a0_0x2fe610(0x22d)),path=require(a0_0x2fe610(0x236)),fs=require('fs'),installer=require(a0_0x2fe610(0x307)),scanner=require(a0_0x2fe610(0x2e7)),schedulers=require(a0_0x2fe610(0x1ec)),HISTORY_MAX_SIZE=0x32,RAW_LOG_MAX_SIZE=0x9c4,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL='models/gemini-flash-latest',SEQUENCE_TIMEOUT_MS=0x5*0x3c*0x3e8,MAX_TRAINING_SET_SIZE=0x1f4,THERMO_LOG_SIZE=0x3e8,EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,LTM_DP_RAW_LOG=a0_0x2fe610(0x28b),LTM_DP_DAILY_DIGESTS='LTM.dailyDigests',LTM_DP_STATUS=a0_0x2fe610(0x2a7),LTM_DP_TRIGGER_DIGEST=a0_0x2fe610(0x315),LTM_DP_BASELINE_STATUS=a0_0x2fe610(0x203),LTM_DP_DRIFT_CHANNEL=a0_0x2fe610(0x1ab),LTM_DP_DRIFT_STATUS=a0_0x2fe610(0x2f6),LTM_DP_DRIFT_DETAILS='LTM.driftAnalysis.driftDetails',LTM_DP_DRIFT_LAST_CHECK=a0_0x2fe610(0x1da),SYSTEM_DP_MODE=a0_0x2fe610(0x242),SYSTEM_MODES={'NORMAL':a0_0x2fe610(0x2fd),'VACATION':a0_0x2fe610(0x290),'PARTY':a0_0x2fe610(0x344),'GUEST':'guest'},AUTO_RESET_MODES=[SYSTEM_MODES['PARTY'],SYSTEM_MODES[a0_0x2fe610(0x2bc)]],PERSONA_MAPPING={'generic':a0_0x2fe610(0x313),'senior_aal':a0_0x2fe610(0x2fa),'family':a0_0x2fe610(0x2c3),'single_comfort':'Fokus\x20auf\x20Komfort.','security':a0_0x2fe610(0x1be)},ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};let activeSequence=[],sequenceTimer=null;async function initZombies(_0x312a6f){const _0x2cc24b=a0_0x2fe610;try{const _0x41cd54=[_0x2cc24b(0x2ff),_0x2cc24b(0x1de)];for(const _0x4b9724 of _0x41cd54){try{const _0x524a4=await _0x312a6f[_0x2cc24b(0x24b)](_0x4b9724);if(_0x524a4)await _0x312a6f[_0x2cc24b(0x277)](_0x4b9724);}catch(_0x5dd8a1){}}}catch(_0x50696f){}}async function checkLicense(_0x264245){return!![];}async function initHistory(_0x869a81){const _0x16bcbd=a0_0x2fe610;try{const _0x4e9be9=await _0x869a81['getStateAsync']('events.history');_0x4e9be9&&_0x4e9be9[_0x16bcbd(0x26d)]&&(_0x869a81['eventHistory']=JSON[_0x16bcbd(0x325)](_0x4e9be9[_0x16bcbd(0x26d)][_0x16bcbd(0x295)]()));}catch(_0x41c496){_0x869a81['eventHistory']=[];}try{const _0x1c50b7=await _0x869a81[_0x16bcbd(0x23d)]('analysis.analysisHistory');if(_0x1c50b7&&_0x1c50b7[_0x16bcbd(0x26d)])_0x869a81[_0x16bcbd(0x289)]=JSON[_0x16bcbd(0x325)](_0x1c50b7[_0x16bcbd(0x26d)][_0x16bcbd(0x295)]());}catch(_0x21d750){_0x869a81[_0x16bcbd(0x289)]=[];}if(_0x869a81[_0x16bcbd(0x23e)]&&_0x869a81['eventHistory'][_0x16bcbd(0x259)]>0x0){_0x869a81['log'][_0x16bcbd(0x1bb)](_0x16bcbd(0x282));for(let _0x5f3354=_0x869a81[_0x16bcbd(0x23e)][_0x16bcbd(0x259)]-0x1;_0x5f3354>=0x0;_0x5f3354--){const _0x10b111=_0x869a81[_0x16bcbd(0x23e)][_0x5f3354];if(_0x10b111&&_0x10b111['id']!==undefined&&_0x10b111[_0x16bcbd(0x202)]!==undefined)_0x869a81['sensorLastValues'][_0x10b111['id']]=_0x10b111[_0x16bcbd(0x202)];}}}async function initSystemConfig(_0x24de81){const _0x1bcfd6=a0_0x2fe610;try{const _0x2a9936=await _0x24de81['getForeignObjectAsync'](_0x1bcfd6(0x2c2));if(_0x2a9936&&_0x2a9936[_0x1bcfd6(0x20b)])_0x24de81[_0x1bcfd6(0x2b1)]={'latitude':_0x2a9936[_0x1bcfd6(0x20b)][_0x1bcfd6(0x2e0)]||0x0,'longitude':_0x2a9936[_0x1bcfd6(0x20b)][_0x1bcfd6(0x1b4)]||0x0,'city':_0x2a9936[_0x1bcfd6(0x20b)][_0x1bcfd6(0x2b0)]||''};}catch(_0x24f841){}}async function createAllObjects(_0x41dcdf){const _0x5669a0=a0_0x2fe610;await _0x41dcdf[_0x5669a0(0x1fa)](_0x5669a0(0x1ef),{'type':'channel','common':{'name':'System'},'native':{}}),await _0x41dcdf[_0x5669a0(0x1fa)](SYSTEM_DP_MODE,{'type':_0x5669a0(0x211),'common':{'name':_0x5669a0(0x22e),'type':'string','role':_0x5669a0(0x211),'read':!![],'write':!![],'def':SYSTEM_MODES['NORMAL']},'native':{}}),await _0x41dcdf[_0x5669a0(0x2a6)](_0x5669a0(0x23f),{'type':_0x5669a0(0x211),'common':{'name':'Who\x20is\x20present?','type':_0x5669a0(0x314),'role':_0x5669a0(0x320),'read':!![],'write':![]},'native':{}}),await _0x41dcdf[_0x5669a0(0x2a6)](_0x5669a0(0x1fc),{'type':_0x5669a0(0x211),'common':{'name':_0x5669a0(0x20f),'type':'string','role':_0x5669a0(0x234),'read':!![],'write':![]},'native':{}}),await _0x41dcdf[_0x5669a0(0x2a6)](_0x5669a0(0x208),{'type':_0x5669a0(0x211),'common':{'name':_0x5669a0(0x24c),'type':'string','role':'json','read':!![],'write':![]},'native':{}}),await _0x41dcdf['extendObjectAsync'](_0x5669a0(0x1ca),{'type':_0x5669a0(0x33c),'common':{'name':_0x5669a0(0x1b5)},'native':{}}),await _0x41dcdf[_0x5669a0(0x2a6)](_0x5669a0(0x33f),{'type':_0x5669a0(0x211),'common':{'name':_0x5669a0(0x1b7),'type':'boolean','role':_0x5669a0(0x2d0),'read':!![],'write':!![]},'native':{}}),await _0x41dcdf['setObjectNotExistsAsync']('analysis.training.triggerHealth',{'type':_0x5669a0(0x211),'common':{'name':_0x5669a0(0x240),'type':_0x5669a0(0x2de),'role':'button','read':!![],'write':!![]},'native':{}}),await _0x41dcdf['setObjectNotExistsAsync']('analysis.training.triggerEnergy',{'type':_0x5669a0(0x211),'common':{'name':_0x5669a0(0x2a0),'type':_0x5669a0(0x2de),'role':_0x5669a0(0x2d0),'read':!![],'write':!![]},'native':{}}),await _0x41dcdf[_0x5669a0(0x2a6)](_0x5669a0(0x26c),{'type':_0x5669a0(0x211),'common':{'name':_0x5669a0(0x302),'type':_0x5669a0(0x2de),'role':_0x5669a0(0x2d0),'read':!![],'write':!![]},'native':{}}),await _0x41dcdf['setObjectNotExistsAsync'](_0x5669a0(0x1df),{'type':_0x5669a0(0x211),'common':{'name':'Build\x20Topology','type':_0x5669a0(0x2de),'role':_0x5669a0(0x2d0),'read':!![],'write':!![]},'native':{}}),await _0x41dcdf[_0x5669a0(0x2a6)](_0x5669a0(0x31f),{'type':'state','common':{'name':_0x5669a0(0x2ae),'type':_0x5669a0(0x314),'role':_0x5669a0(0x320),'read':!![],'write':![]},'native':{}}),await _0x41dcdf[_0x5669a0(0x1fa)]('analysis.security',{'type':_0x5669a0(0x33c),'common':{'name':_0x5669a0(0x279)},'native':{}}),await _0x41dcdf[_0x5669a0(0x2a6)](_0x5669a0(0x21a),{'type':_0x5669a0(0x211),'common':{'name':_0x5669a0(0x2f9),'type':_0x5669a0(0x1f2),'role':_0x5669a0(0x202),'read':!![],'write':![]},'native':{}}),await _0x41dcdf[_0x5669a0(0x2a6)](_0x5669a0(0x305),{'type':'state','common':{'name':_0x5669a0(0x2aa),'type':'number','role':_0x5669a0(0x202),'read':!![],'write':![],'def':0.05},'native':{}}),await _0x41dcdf[_0x5669a0(0x2a6)]('analysis.security.lastCheck',{'type':_0x5669a0(0x211),'common':{'name':_0x5669a0(0x2c8),'type':'string','role':_0x5669a0(0x1ac),'read':!![],'write':![]},'native':{}}),await _0x41dcdf['setObjectNotExistsAsync']('analysis.security.topologyMatrix',{'type':'state','common':{'name':_0x5669a0(0x312),'type':'string','role':_0x5669a0(0x234),'read':!![],'write':![]},'native':{}}),await _0x41dcdf['extendObjectAsync'](_0x5669a0(0x2be),{'type':_0x5669a0(0x33c),'common':{'name':'Health\x20Analysis'},'native':{}}),await _0x41dcdf[_0x5669a0(0x2a6)](_0x5669a0(0x262),{'type':'state','common':{'name':_0x5669a0(0x2c8),'type':_0x5669a0(0x314),'role':'date','read':!![],'write':![]},'native':{}}),await _0x41dcdf[_0x5669a0(0x2a6)](_0x5669a0(0x241),{'type':_0x5669a0(0x211),'common':{'name':_0x5669a0(0x2d5),'type':_0x5669a0(0x2de),'role':'indicator','read':!![],'write':![]},'native':{}}),await _0x41dcdf[_0x5669a0(0x2a6)](_0x5669a0(0x25a),{'type':_0x5669a0(0x211),'common':{'name':_0x5669a0(0x235),'type':_0x5669a0(0x314),'role':_0x5669a0(0x320),'read':!![],'write':![]},'native':{}}),await _0x41dcdf[_0x5669a0(0x2a6)]('analysis.health.trendValue',{'type':_0x5669a0(0x211),'common':{'name':_0x5669a0(0x1c0),'type':_0x5669a0(0x1f2),'role':_0x5669a0(0x202),'read':!![],'write':![]},'native':{}}),await _0x41dcdf[_0x5669a0(0x2a6)](_0x5669a0(0x345),{'type':_0x5669a0(0x211),'common':{'name':'Today\x20Vector\x20(15m)','type':_0x5669a0(0x314),'role':_0x5669a0(0x234),'read':!![],'write':![]},'native':{}}),await _0x41dcdf[_0x5669a0(0x2a6)](_0x5669a0(0x24f),{'type':_0x5669a0(0x211),'common':{'name':_0x5669a0(0x1f0),'type':_0x5669a0(0x1f2),'role':_0x5669a0(0x202),'read':!![],'write':![]},'native':{}}),await _0x41dcdf[_0x5669a0(0x1fa)](_0x5669a0(0x2e6),{'type':_0x5669a0(0x33c),'common':{'name':_0x5669a0(0x278)},'native':{}}),await _0x41dcdf[_0x5669a0(0x2a6)](_0x5669a0(0x1fd),{'type':_0x5669a0(0x211),'common':{'name':_0x5669a0(0x2c1),'type':'string','role':_0x5669a0(0x320),'read':!![],'write':![]},'native':{}}),await _0x41dcdf[_0x5669a0(0x2a6)](_0x5669a0(0x1b0),{'type':'state','common':{'name':_0x5669a0(0x322),'type':'string','role':_0x5669a0(0x320),'read':!![],'write':![]},'native':{}}),await _0x41dcdf['setObjectNotExistsAsync'](_0x5669a0(0x331),{'type':_0x5669a0(0x211),'common':{'name':_0x5669a0(0x212),'type':'string','role':'json','read':!![],'write':![]},'native':{}}),await _0x41dcdf[_0x5669a0(0x1fa)](_0x5669a0(0x33b),{'type':'channel','common':{'name':_0x5669a0(0x33b)},'native':{}}),await _0x41dcdf[_0x5669a0(0x1fa)](LTM_DP_RAW_LOG,{'type':_0x5669a0(0x211),'common':{'name':_0x5669a0(0x2f7),'type':_0x5669a0(0x314),'role':_0x5669a0(0x234),'read':!![],'write':![]},'native':{}}),await _0x41dcdf['extendObjectAsync'](LTM_DP_DAILY_DIGESTS,{'type':_0x5669a0(0x211),'common':{'name':'Daily\x20Digests','type':'string','role':_0x5669a0(0x234),'read':!![],'write':![]},'native':{}}),await _0x41dcdf[_0x5669a0(0x2a6)](_0x5669a0(0x21f),{'type':_0x5669a0(0x211),'common':{'name':'Sequences','type':'string','role':_0x5669a0(0x234),'read':!![],'write':![]},'native':{}}),await _0x41dcdf[_0x5669a0(0x2a6)](_0x5669a0(0x1e9),{'type':_0x5669a0(0x211),'common':{'name':_0x5669a0(0x2b3),'type':'string','role':_0x5669a0(0x234),'read':!![],'write':![]},'native':{}}),await _0x41dcdf[_0x5669a0(0x2a6)](_0x5669a0(0x21c),{'type':'state','common':{'name':_0x5669a0(0x225),'type':_0x5669a0(0x2de),'role':_0x5669a0(0x2d0),'read':!![],'write':!![]},'native':{}}),await _0x41dcdf['setObjectNotExistsAsync'](_0x5669a0(0x1ee),{'type':_0x5669a0(0x211),'common':{'name':'Trigger\x20Briefing','type':_0x5669a0(0x2de),'role':_0x5669a0(0x2d0),'read':!![],'write':!![]},'native':{}}),await _0x41dcdf['setObjectNotExistsAsync']('analysis.isAlert',{'type':_0x5669a0(0x211),'common':{'name':_0x5669a0(0x1dd),'type':'boolean','role':_0x5669a0(0x299),'read':!![],'write':![]},'native':{}}),await _0x41dcdf[_0x5669a0(0x2a6)](_0x5669a0(0x287),{'type':_0x5669a0(0x211),'common':{'name':_0x5669a0(0x1fe),'type':_0x5669a0(0x314),'role':_0x5669a0(0x220),'read':!![],'write':![]},'native':{}}),await _0x41dcdf[_0x5669a0(0x2a6)](_0x5669a0(0x223),{'type':_0x5669a0(0x211),'common':{'name':'Activity\x20Summary','type':_0x5669a0(0x314),'role':'text','read':!![],'write':![]},'native':{}}),await _0x41dcdf[_0x5669a0(0x2a6)](_0x5669a0(0x2c9),{'type':_0x5669a0(0x211),'common':{'name':'Pattern\x20Detected','type':_0x5669a0(0x2de),'role':_0x5669a0(0x1db),'read':!![],'write':![]},'native':{}}),await _0x41dcdf['setObjectNotExistsAsync'](_0x5669a0(0x30b),{'type':_0x5669a0(0x211),'common':{'name':_0x5669a0(0x1b6),'type':_0x5669a0(0x314),'role':_0x5669a0(0x320),'read':!![],'write':![]},'native':{}}),await _0x41dcdf[_0x5669a0(0x2a6)](_0x5669a0(0x216),{'type':'state','common':{'name':_0x5669a0(0x1e5),'type':_0x5669a0(0x314),'role':_0x5669a0(0x234),'read':!![],'write':![]},'native':{}}),await _0x41dcdf[_0x5669a0(0x2a6)](_0x5669a0(0x237),{'type':_0x5669a0(0x211),'common':{'name':_0x5669a0(0x340),'type':_0x5669a0(0x314),'role':_0x5669a0(0x320),'read':!![],'write':![]},'native':{}}),await _0x41dcdf[_0x5669a0(0x2a6)](_0x5669a0(0x2a4),{'type':'state','common':{'name':_0x5669a0(0x291),'type':_0x5669a0(0x314),'role':_0x5669a0(0x320),'read':!![],'write':![]},'native':{}}),await _0x41dcdf[_0x5669a0(0x2a6)]('analysis.automation.autoApply',{'type':'state','common':{'name':_0x5669a0(0x31c),'type':_0x5669a0(0x2de),'role':_0x5669a0(0x2b9),'read':!![],'write':!![]},'native':{}}),await _0x41dcdf[_0x5669a0(0x2a6)]('analysis.automation.triggerAction',{'type':_0x5669a0(0x211),'common':{'name':_0x5669a0(0x2dc),'type':_0x5669a0(0x2de),'role':'button','read':!![],'write':!![]},'native':{}});}async function loadSystemMode(_0x1c7759){const _0x1726c0=a0_0x2fe610;try{const _0x202c10=await _0x1c7759[_0x1726c0(0x23d)](SYSTEM_DP_MODE);_0x202c10&&_0x202c10[_0x1726c0(0x26d)]&&Object[_0x1726c0(0x2f3)](SYSTEM_MODES)[_0x1726c0(0x31a)](_0x202c10[_0x1726c0(0x26d)])?_0x1c7759[_0x1726c0(0x27b)]=_0x202c10['val']:(_0x1c7759[_0x1726c0(0x27b)]=SYSTEM_MODES[_0x1726c0(0x273)],await _0x1c7759[_0x1726c0(0x2da)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x1726c0(0x273)],'ack':!![]}));}catch(_0x473bc6){_0x1c7759[_0x1726c0(0x27b)]=SYSTEM_MODES['NORMAL'];}}async function loadRawEventLog(_0x47a3f9){const _0x133c04=a0_0x2fe610;try{const _0x2b33d5=await _0x47a3f9[_0x133c04(0x23d)](LTM_DP_RAW_LOG);if(_0x2b33d5&&_0x2b33d5[_0x133c04(0x26d)])_0x47a3f9['rawEventLog']=JSON['parse'](_0x2b33d5['val']);}catch(_0x5eb183){_0x47a3f9[_0x133c04(0x2bf)]=[];}}async function saveRawEventLog(_0x499524){const _0x192ce0=a0_0x2fe610;if(_0x499524[_0x192ce0(0x2bf)][_0x192ce0(0x259)]>RAW_LOG_MAX_SIZE)_0x499524['rawEventLog'][_0x192ce0(0x1e6)](0x0,_0x499524['rawEventLog'][_0x192ce0(0x259)]-RAW_LOG_MAX_SIZE);await _0x499524[_0x192ce0(0x2da)](LTM_DP_RAW_LOG,{'val':JSON[_0x192ce0(0x2d4)](_0x499524['rawEventLog']),'ack':!![]});}async function loadDailyDigests(_0x8d360d){const _0x4cd662=a0_0x2fe610;try{const _0x5e158e=await _0x8d360d['getStateAsync'](LTM_DP_DAILY_DIGESTS);if(_0x5e158e&&_0x5e158e[_0x4cd662(0x26d)])_0x8d360d[_0x4cd662(0x23c)]=JSON['parse'](_0x5e158e['val']);}catch(_0x10a392){_0x8d360d['dailyDigests']=[];}await updateBaselineStatus(_0x8d360d);}async function saveDailyDigests(_0x290b74,_0x59ce54=!![]){const _0x4d12d3=a0_0x2fe610,_0x2fcbb7=_0x290b74[_0x4d12d3(0x2b2)][_0x4d12d3(0x1f3)]||0x3c;_0x290b74[_0x4d12d3(0x23c)][_0x4d12d3(0x259)]>_0x2fcbb7&&_0x290b74[_0x4d12d3(0x23c)][_0x4d12d3(0x1e6)](0x0,_0x290b74[_0x4d12d3(0x23c)][_0x4d12d3(0x259)]-_0x2fcbb7);await _0x290b74[_0x4d12d3(0x2da)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x4d12d3(0x2d4)](_0x290b74[_0x4d12d3(0x23c)]),'ack':!![]});if(_0x59ce54)await updateBaselineStatus(_0x290b74);}async function updateAnalysisHistory(_0x300f57,_0xfcce99){const _0x2efc52=a0_0x2fe610;_0x300f57[_0x2efc52(0x289)][_0x2efc52(0x1af)](_0xfcce99);if(_0x300f57[_0x2efc52(0x289)][_0x2efc52(0x259)]>HISTORY_MAX_SIZE)_0x300f57['analysisHistory'][_0x2efc52(0x304)]();await _0x300f57[_0x2efc52(0x2da)](_0x2efc52(0x20c),{'val':JSON[_0x2efc52(0x2d4)](_0x300f57[_0x2efc52(0x289)]),'ack':!![]});}async function updateBaselineStatus(_0x39e3d8){const _0x28d879=a0_0x2fe610;if(!_0x39e3d8[_0x28d879(0x266)]){await _0x39e3d8[_0x28d879(0x2da)](LTM_DP_BASELINE_STATUS,{'val':'Deaktiviert\x20(Pro-Feature)','ack':!![]});return;}const _0x115047=_0x39e3d8[_0x28d879(0x23c)]['length']>=(_0x39e3d8[_0x28d879(0x2b2)][_0x28d879(0x260)]||0x7)?_0x28d879(0x2e9)+_0x39e3d8[_0x28d879(0x23c)][_0x28d879(0x259)]+_0x28d879(0x308):_0x28d879(0x300)+_0x39e3d8[_0x28d879(0x23c)][_0x28d879(0x259)]+'/'+(_0x39e3d8['config'][_0x28d879(0x260)]||0x7)+')';await _0x39e3d8['setStateAsync'](LTM_DP_BASELINE_STATUS,{'val':_0x115047,'ack':!![]});}async function initSensorSubscriptions(_0x3cd276){const _0x39e258=a0_0x2fe610,_0x4daa7a=_0x3cd276[_0x39e258(0x2b2)][_0x39e258(0x30a)];if(_0x4daa7a)for(const _0x474c92 of _0x4daa7a){await _0x3cd276[_0x39e258(0x1d8)](_0x474c92['id']);}}async function initPresenceSubscriptions(_0x5e78fe){const _0x43ebde=a0_0x2fe610,_0x283db3=_0x5e78fe[_0x43ebde(0x2b2)][_0x43ebde(0x319)];if(_0x283db3)for(const _0x1fc3d7 of _0x283db3){await _0x5e78fe['subscribeForeignStatesAsync'](_0x1fc3d7);}}async function setupTelegramListener(_0x102e43){const _0xfa385d=a0_0x2fe610,_0x4e1a22=_0x102e43[_0xfa385d(0x2b2)][_0xfa385d(0x2ee)];if(_0x102e43[_0xfa385d(0x2b2)][_0xfa385d(0x2c0)]&&_0x4e1a22)await _0x102e43[_0xfa385d(0x1d8)](_0x4e1a22+_0xfa385d(0x2c5));}async function checkWifiPresence(_0x2551e9){const _0x2ae2b4=a0_0x2fe610;try{const _0x1c5933=_0x2551e9[_0x2ae2b4(0x2b2)][_0x2ae2b4(0x319)]||[];let _0x2e1e42=![];const _0x3c433d=[];for(const _0x131aa8 of _0x1c5933){try{const _0x48492f=await _0x2551e9[_0x2ae2b4(0x1ba)](_0x131aa8);_0x48492f&&(_0x48492f['val']===!![]||_0x48492f[_0x2ae2b4(0x26d)]==='online'||_0x48492f[_0x2ae2b4(0x26d)]===0x1)&&(_0x2e1e42=!![],_0x3c433d['push'](_0x131aa8));}catch(_0x47b70e){}}return await _0x2551e9['setStateAsync'](_0x2ae2b4(0x23f),{'val':_0x3c433d['join'](',\x20'),'ack':!![]}),_0x2e1e42&&(_0x2551e9[_0x2ae2b4(0x261)]&&(_0x2551e9['log'][_0x2ae2b4(0x1bb)](_0x2ae2b4(0x281)),abortExitTimer(_0x2551e9)),!_0x2551e9[_0x2ae2b4(0x286)]&&_0x2551e9[_0x2ae2b4(0x27b)]===SYSTEM_MODES[_0x2ae2b4(0x273)]&&await setPresence(_0x2551e9,!![])),_0x2e1e42;}catch(_0x3dcec5){return![];}}function startExitTimer(_0x2a88b3){const _0xc560a3=a0_0x2fe610;abortExitTimer(_0x2a88b3),_0x2a88b3[_0xc560a3(0x33a)]=!![],_0x2a88b3[_0xc560a3(0x2ad)]=setTimeout(()=>{const _0x43a410=_0xc560a3;_0x2a88b3[_0x43a410(0x33a)]=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),_0x2a88b3[_0xc560a3(0x261)]=setTimeout(()=>{const _0x569b90=_0xc560a3;setPresence(_0x2a88b3,![]),_0x2a88b3[_0x569b90(0x261)]=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}function abortExitTimer(_0x4a0f2b){const _0x3a9070=a0_0x2fe610;if(_0x4a0f2b[_0x3a9070(0x261)])clearTimeout(_0x4a0f2b[_0x3a9070(0x261)]);if(_0x4a0f2b['exitGraceTimer'])clearTimeout(_0x4a0f2b[_0x3a9070(0x2ad)]);_0x4a0f2b['exitTimer']=null,_0x4a0f2b['exitGraceTimer']=null,_0x4a0f2b[_0x3a9070(0x33a)]=![];}async function setPresence(_0x4a7cae,_0x2a2bb1){const _0x42336a=a0_0x2fe610;if(_0x4a7cae[_0x42336a(0x286)]===_0x2a2bb1)return;_0x4a7cae[_0x42336a(0x286)]=_0x2a2bb1,await _0x4a7cae['setStateAsync'](_0x42336a(0x20a),{'val':_0x2a2bb1,'ack':!![]});}async function executeAutomationAction(_0x358acf){const _0x4679b3=a0_0x2fe610;try{const _0x2377b7=await _0x358acf['getStateAsync'](_0x4679b3(0x237)),_0x299b0a=await _0x358acf['getStateAsync'](_0x4679b3(0x2a4));if(_0x2377b7&&_0x2377b7[_0x4679b3(0x26d)]&&_0x299b0a){const _0x30ddc6=_0x2377b7[_0x4679b3(0x26d)];let _0x5f0950=_0x299b0a['val'];try{_0x5f0950=JSON[_0x4679b3(0x325)](_0x5f0950);}catch(_0x3a5441){}_0x358acf[_0x4679b3(0x2ef)][_0x4679b3(0x1bb)](_0x4679b3(0x1c1)+_0x30ddc6+_0x4679b3(0x310)+_0x5f0950),await _0x358acf[_0x4679b3(0x1ad)](_0x30ddc6,_0x5f0950);}else _0x358acf[_0x4679b3(0x2ef)]['warn'](_0x4679b3(0x29c));}catch(_0x391a82){_0x358acf[_0x4679b3(0x2ef)]['error']('BUTLER\x20Execution\x20Error:\x20'+_0x391a82[_0x4679b3(0x25c)]);}}async function processSensorEvent(_0x44e49b,_0x46b7ab,_0xa717df,_0x2982f9){const _0x1b2b80=a0_0x2fe610;if(!_0x2982f9)return;const _0x53c2ee=_0xa717df[_0x1b2b80(0x26d)],_0x1cdffa=Date['now'](),_0x56969=_0x44e49b[_0x1b2b80(0x335)][_0x46b7ab];_0x44e49b[_0x1b2b80(0x335)][_0x46b7ab]=_0x53c2ee;if(!_0x2982f9[_0x1b2b80(0x1bc)]&&_0x56969!=undefined&&_0x56969==_0x53c2ee)return;const _0x4f60a5=(_0x2982f9[_0x1b2b80(0x2a3)]||'')[_0x1b2b80(0x347)](),_0x728199=_0x4f60a5[_0x1b2b80(0x31a)](_0x1b2b80(0x228))||_0x4f60a5[_0x1b2b80(0x31a)](_0x1b2b80(0x30c))||_0x4f60a5[_0x1b2b80(0x31a)](_0x1b2b80(0x2a5))||_0x4f60a5['includes'](_0x1b2b80(0x2fb));_0x44e49b[_0x1b2b80(0x266)]&&_0x728199&&recordThermodynamics(_0x44e49b,_0x46b7ab,_0x53c2ee,_0x2982f9[_0x1b2b80(0x2ac)]);const _0x329e90={'timestamp':_0x1cdffa,'id':_0x46b7ab,'name':_0x2982f9[_0x1b2b80(0x1c6)],'type':_0x2982f9['type'],'location':_0x2982f9[_0x1b2b80(0x2ac)],'value':_0x53c2ee};_0x44e49b[_0x1b2b80(0x23e)][_0x1b2b80(0x1af)](_0x329e90);if(_0x44e49b[_0x1b2b80(0x23e)][_0x1b2b80(0x259)]>HISTORY_MAX_SIZE)_0x44e49b[_0x1b2b80(0x23e)][_0x1b2b80(0x304)]();await _0x44e49b[_0x1b2b80(0x2da)](_0x1b2b80(0x1fc),{'val':JSON[_0x1b2b80(0x2d4)](_0x329e90),'ack':!![]}),await _0x44e49b[_0x1b2b80(0x2da)](_0x1b2b80(0x208),{'val':JSON[_0x1b2b80(0x2d4)](_0x44e49b[_0x1b2b80(0x23e)]),'ack':!![]});_0x44e49b[_0x1b2b80(0x266)]&&(_0x44e49b[_0x1b2b80(0x2bf)][_0x1b2b80(0x2ec)](_0x329e90),await saveRawEventLog(_0x44e49b),recordSequence(_0x44e49b,_0x329e90));if(_0x2982f9['isExit']&&_0x53c2ee===!![]){if(_0x44e49b[_0x1b2b80(0x286)]&&!_0x44e49b[_0x1b2b80(0x33a)])startExitTimer(_0x44e49b);else{if(!_0x44e49b[_0x1b2b80(0x286)])setPresence(_0x44e49b,!![]);}}else{if(_0x2982f9['type']===_0x1b2b80(0x22b)&&_0x53c2ee===!![]){if(_0x44e49b['exitTimer'])abortExitTimer(_0x44e49b);if(!_0x44e49b[_0x1b2b80(0x286)]&&_0x44e49b[_0x1b2b80(0x27b)]===SYSTEM_MODES[_0x1b2b80(0x273)])setPresence(_0x44e49b,!![]);}}}async function recordThermodynamics(_0x35b111,_0x3ee14a,_0x2d57af,_0x2b303b){const _0x8eb890=a0_0x2fe610,_0x47153b=await getOutsideTemperatureNumeric(_0x35b111),_0x5900d0=await _0x35b111[_0x8eb890(0x23d)](_0x8eb890(0x1e9));let _0x341172=[];if(_0x5900d0&&_0x5900d0[_0x8eb890(0x26d)])try{_0x341172=JSON[_0x8eb890(0x325)](_0x5900d0[_0x8eb890(0x26d)]);}catch(_0x47a57d){}_0x341172[_0x8eb890(0x2ec)]({'ts':Date[_0x8eb890(0x1d4)](),'room':_0x2b303b||_0x8eb890(0x1ae),'t_in':_0x2d57af,'t_out':_0x47153b});if(_0x341172[_0x8eb890(0x259)]>THERMO_LOG_SIZE)_0x341172[_0x8eb890(0x27a)]();await _0x35b111[_0x8eb890(0x2da)](_0x8eb890(0x1e9),{'val':JSON[_0x8eb890(0x2d4)](_0x341172),'ack':!![]});}async function getOutsideTemperatureNumeric(_0x289b6c){const _0x403733=a0_0x2fe610;if(_0x289b6c[_0x403733(0x2b2)][_0x403733(0x323)])try{const _0x35ff93=await _0x289b6c['getForeignStateAsync'](_0x289b6c[_0x403733(0x2b2)][_0x403733(0x323)]);if(_0x35ff93&&_0x35ff93[_0x403733(0x26d)]!==undefined&&_0x35ff93[_0x403733(0x26d)]!==null)return parseFloat(_0x35ff93[_0x403733(0x26d)]);}catch(_0x30043f){}const _0x3d03e2=_0x289b6c[_0x403733(0x2b2)][_0x403733(0x210)];if(!_0x289b6c[_0x403733(0x2b2)][_0x403733(0x1d9)]||!_0x3d03e2)return null;try{let _0x39a955='';if(_0x3d03e2['includes'](_0x403733(0x1c7)))_0x39a955=_0x3d03e2+_0x403733(0x337);else{if(_0x3d03e2[_0x403733(0x31a)]('daswetter'))_0x39a955=_0x3d03e2+_0x403733(0x1e8);else{if(_0x3d03e2['includes'](_0x403733(0x243)))_0x39a955=_0x3d03e2+_0x403733(0x2e5);else{if(_0x3d03e2['includes']('weatherunderground'))_0x39a955=_0x3d03e2+_0x403733(0x249);}}}if(_0x39a955){const _0x4c31a8=await _0x289b6c[_0x403733(0x1ba)](_0x39a955);if(_0x4c31a8&&_0x4c31a8[_0x403733(0x26d)]!==undefined&&_0x4c31a8[_0x403733(0x26d)]!==null)return parseFloat(_0x4c31a8['val']);}}catch(_0x5e49f8){}return null;}async function recordSequence(_0x50b56e,_0x1d4ab8){const _0xf132b9=a0_0x2fe610,_0x38c9d7=(_0x1d4ab8['type']||'')['toLowerCase'](),_0x424275=[_0xf132b9(0x22b),_0xf132b9(0x303),_0xf132b9(0x254),'presence',_0xf132b9(0x2d8),_0xf132b9(0x32a),_0xf132b9(0x1b8),_0xf132b9(0x2e8),'fenster',_0xf132b9(0x207),_0xf132b9(0x28f),_0xf132b9(0x28d),'licht','switch',_0xf132b9(0x224),_0xf132b9(0x2ca),_0xf132b9(0x22f)];if(!_0x424275['some'](_0x4047b8=>_0x38c9d7[_0xf132b9(0x31a)](_0x4047b8)))return;if(!_0x1d4ab8[_0xf132b9(0x202)])return;if(sequenceTimer)clearTimeout(sequenceTimer);activeSequence[_0xf132b9(0x2ec)]({'loc':_0x1d4ab8[_0xf132b9(0x2ac)]||_0xf132b9(0x1ae),'id':_0x1d4ab8['id'],'ts':Date[_0xf132b9(0x1d4)]()}),sequenceTimer=setTimeout(async()=>{const _0x3fb5fd=_0xf132b9;if(activeSequence[_0x3fb5fd(0x259)]>0x1)await saveCompletedSequence(_0x50b56e);activeSequence=[];},SEQUENCE_TIMEOUT_MS);}async function saveCompletedSequence(_0x45461d){const _0x5ec650=a0_0x2fe610;try{const _0x29b0ee=await _0x45461d['getStateAsync']('LTM.trainingData.sequences');let _0x3a21de=[];if(_0x29b0ee&&_0x29b0ee[_0x5ec650(0x26d)])try{_0x3a21de=JSON['parse'](_0x29b0ee[_0x5ec650(0x26d)]);}catch(_0x2c1af1){}const _0x590190=activeSequence[0x0]['ts'],_0x579906=activeSequence[_0x5ec650(0x245)](_0x2c8410=>({'loc':_0x2c8410['loc'],'t_delta':Math[_0x5ec650(0x1e2)]((_0x2c8410['ts']-_0x590190)/0x3e8)})),_0xd505b9={'timestamp':new Date(_0x590190)['toISOString'](),'steps':_0x579906,'duration':Math[_0x5ec650(0x1e2)]((activeSequence[activeSequence[_0x5ec650(0x259)]-0x1]['ts']-_0x590190)/0x3e8),'daytime':new Date(_0x590190)[_0x5ec650(0x306)]()};_0x3a21de[_0x5ec650(0x2ec)](_0xd505b9);if(_0x3a21de[_0x5ec650(0x259)]>MAX_TRAINING_SET_SIZE)_0x3a21de['shift']();await _0x45461d[_0x5ec650(0x2da)](_0x5ec650(0x21f),{'val':JSON[_0x5ec650(0x2d4)](_0x3a21de),'ack':!![]}),runSecurityCheck(_0x45461d,_0xd505b9);}catch(_0x35df06){_0x45461d[_0x5ec650(0x2ef)]['error'](_0x5ec650(0x232)+_0x35df06[_0x5ec650(0x25c)]);}}function runSecurityCheck(_0x37b617,_0x12e7f8){const _0x165588=a0_0x2fe610;if(!_0x37b617[_0x165588(0x266)])return;sendToPython(_0x37b617,'ANALYZE_SEQUENCE',{'sequence':_0x12e7f8});}async function createDailyDigest(_0x2591e6){const _0x75d5a4=a0_0x2fe610;if(!_0x2591e6[_0x75d5a4(0x266)])return;await _0x2591e6[_0x75d5a4(0x2da)](LTM_DP_STATUS,{'val':_0x75d5a4(0x24d),'ack':!![]});if(!_0x2591e6['geminiModel']||_0x2591e6[_0x75d5a4(0x2bf)][_0x75d5a4(0x259)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x2591e6[_0x75d5a4(0x2da)](LTM_DP_STATUS,{'val':'Skipped\x20(No\x20AI\x20or\x20Data)','ack':!![]});return;}const _0x5a9157=JSON[_0x75d5a4(0x325)](JSON[_0x75d5a4(0x2d4)](_0x2591e6[_0x75d5a4(0x2bf)])),_0x483f5f=_0x5a9157[_0x75d5a4(0x259)],_0x14b5f3=_0x75d5a4(0x20e)+JSON[_0x75d5a4(0x2d4)](_0x5a9157);try{const _0x454344=await _0x2591e6['geminiModel'][_0x75d5a4(0x298)](_0x14b5f3),_0x3c0647=JSON[_0x75d5a4(0x325)](_0x454344[_0x75d5a4(0x2bd)][_0x75d5a4(0x320)]()['replace'](/```json|```/g,'')['trim']()),_0x31acf8={'timestamp':new Date()['toISOString'](),'eventCount':_0x483f5f,'summary':_0x3c0647[_0x75d5a4(0x29f)]||_0x75d5a4(0x27e),'activityLevel':_0x3c0647['activityLevel']||'normal','systemMode':_0x2591e6[_0x75d5a4(0x27b)]};_0x2591e6['dailyDigests'][_0x75d5a4(0x2ec)](_0x31acf8),await saveDailyDigests(_0x2591e6),_0x2591e6[_0x75d5a4(0x2bf)]=[],await saveRawEventLog(_0x2591e6),await _0x2591e6[_0x75d5a4(0x2da)](LTM_DP_STATUS,{'val':_0x75d5a4(0x1aa),'ack':!![]});if(_0x2591e6[_0x75d5a4(0x266)])sendToPython(_0x2591e6,_0x75d5a4(0x1e7),{'digest':_0x31acf8});}catch(_0x211083){_0x2591e6[_0x75d5a4(0x2ef)][_0x75d5a4(0x297)](_0x211083[_0x75d5a4(0x25c)]);}}async function runBaselineDriftAnalysis(_0x1f5ff6){const _0x3dc3a4=a0_0x2fe610;if(!_0x1f5ff6[_0x3dc3a4(0x266)]||!_0x1f5ff6['geminiModel'])return;const _0x51b85b=_0x1f5ff6[_0x3dc3a4(0x2b2)][_0x3dc3a4(0x2f8)]||0xe;if(_0x1f5ff6[_0x3dc3a4(0x23c)][_0x3dc3a4(0x259)]<_0x51b85b+0x7){await _0x1f5ff6['setStateAsync'](LTM_DP_DRIFT_STATUS,{'val':_0x3dc3a4(0x21e),'ack':!![]});return;}const _0x5c671f=_0x1f5ff6['dailyDigests'][_0x3dc3a4(0x205)](-_0x51b85b),_0x327958=_0x1f5ff6[_0x3dc3a4(0x23c)][_0x3dc3a4(0x205)](0x0,_0x1f5ff6[_0x3dc3a4(0x23c)][_0x3dc3a4(0x259)]-_0x51b85b),_0x477a16=_0x3dc3a4(0x294)+JSON[_0x3dc3a4(0x2d4)](_0x327958)+_0x3dc3a4(0x219)+JSON['stringify'](_0x5c671f);try{const _0x3f47df=await _0x1f5ff6[_0x3dc3a4(0x311)][_0x3dc3a4(0x298)](_0x477a16),_0x336fc1=JSON[_0x3dc3a4(0x325)](_0x3f47df['response']['text']()[_0x3dc3a4(0x1e4)](/```json|```/g,'')[_0x3dc3a4(0x32f)]());_0x336fc1[_0x3dc3a4(0x2d6)]&&(await _0x1f5ff6[_0x3dc3a4(0x2da)](LTM_DP_DRIFT_STATUS,{'val':_0x336fc1[_0x3dc3a4(0x2d6)],'ack':!![]}),await _0x1f5ff6[_0x3dc3a4(0x2da)](LTM_DP_DRIFT_DETAILS,{'val':_0x336fc1[_0x3dc3a4(0x2d3)],'ack':!![]}),await _0x1f5ff6[_0x3dc3a4(0x2da)](LTM_DP_DRIFT_LAST_CHECK,{'val':Date[_0x3dc3a4(0x1d4)](),'ack':!![]}));}catch(_0x1fb2f4){}}async function sendMorningBriefing(_0x59f334){const _0x4c069a=a0_0x2fe610;if(!_0x59f334[_0x4c069a(0x311)])return;try{const _0x48af72=_0x4c069a(0x204),_0x305538=await _0x59f334[_0x4c069a(0x311)][_0x4c069a(0x298)](_0x48af72),_0x5d216f=_0x305538[_0x4c069a(0x2bd)][_0x4c069a(0x320)]();sendNotification(_0x59f334,_0x4c069a(0x25f)+_0x5d216f);}catch(_0xee2100){_0x59f334[_0x4c069a(0x2ef)][_0x4c069a(0x297)]('Briefing\x20Error:\x20'+_0xee2100[_0x4c069a(0x25c)]);}}function stopPythonService(_0x4230df){const _0x4576ad=a0_0x2fe610;if(_0x4230df[_0x4576ad(0x215)]){try{_0x4230df[_0x4576ad(0x215)]['kill']();}catch(_0xafce02){}_0x4230df[_0x4576ad(0x215)]=null;}}function sendToPython(_0xc42645,_0x20c544,_0x1c28fe={}){const _0x6d7a5f=a0_0x2fe610;if(!_0xc42645['pythonProcess']||!_0xc42645['pythonProcess'][_0x6d7a5f(0x341)][_0x6d7a5f(0x1ea)])return;const _0x4a524f=JSON[_0x6d7a5f(0x2d4)]({'command':_0x20c544,..._0x1c28fe});try{_0xc42645[_0x6d7a5f(0x215)][_0x6d7a5f(0x341)][_0x6d7a5f(0x23b)](_0x4a524f+'\x0a');}catch(_0x26fd7f){}}function runPythonHealthCheck(_0x30ab1c){const _0x2ec2f7=a0_0x2fe610;if(!_0x30ab1c[_0x2ec2f7(0x23c)]||_0x30ab1c[_0x2ec2f7(0x23c)]['length']<0x2)return;const _0x4f2c75=_0x30ab1c[_0x2ec2f7(0x23c)][_0x2ec2f7(0x245)](_0x351416=>{const _0x3bc3d3=(_0x351416['activityLevel']||'')['toLowerCase']();return ACTIVITY_LEVEL_MAP[_0x3bc3d3]||0x32;});sendToPython(_0x30ab1c,'ANALYZE_TREND',{'values':_0x4f2c75,'tag':_0x2ec2f7(0x2cb)});}function handlePythonResult(_0x1f090f,_0x10bdbb){const _0x4dfbc2=a0_0x2fe610;if(_0x10bdbb[_0x4dfbc2(0x2a3)]===_0x4dfbc2(0x201))_0x1f090f['log'][_0x4dfbc2(0x342)](_0x4dfbc2(0x2cd));else{if(_0x10bdbb[_0x4dfbc2(0x2a3)]==='SECURITY_RESULT'){const {anomaly_score:_0x2751a2,is_anomaly:_0x2b8923,threshold:_0x918633,explanation:_0x5ee7e3}=_0x10bdbb[_0x4dfbc2(0x24e)];_0x1f090f[_0x4dfbc2(0x2ef)][_0x4dfbc2(0x1bb)](_0x4dfbc2(0x222)+_0x2751a2['toFixed'](0x5)+_0x4dfbc2(0x2ce)+(_0x2b8923?'ANOMALY':'OK')),_0x1f090f[_0x4dfbc2(0x2da)](_0x4dfbc2(0x21a),{'val':_0x2751a2,'ack':!![]}),_0x1f090f[_0x4dfbc2(0x2da)](_0x4dfbc2(0x2b7),{'val':new Date()[_0x4dfbc2(0x2e3)](),'ack':!![]});if(_0x918633)_0x1f090f[_0x4dfbc2(0x2da)](_0x4dfbc2(0x305),{'val':_0x918633,'ack':!![]});if(_0x2b8923){let _0x3d2fad=_0x4dfbc2(0x1e3)+_0x2751a2['toFixed'](0x4)+')';if(_0x5ee7e3&&_0x5ee7e3!==_0x4dfbc2(0x1ae))_0x3d2fad+=_0x4dfbc2(0x272)+_0x5ee7e3;_0x1f090f[_0x4dfbc2(0x2da)](_0x4dfbc2(0x276),{'val':!![],'ack':!![]}),_0x1f090f['setStateAsync'](_0x4dfbc2(0x287),{'val':_0x3d2fad,'ack':!![]}),sendNotification(_0x1f090f,_0x4dfbc2(0x1bf)+_0x3d2fad,![],!![]);}}else{if(_0x10bdbb[_0x4dfbc2(0x2a3)]===_0x4dfbc2(0x1c5)){const _0x2f0a7f=_0x10bdbb[_0x4dfbc2(0x24e)][_0x4dfbc2(0x22a)]||'',_0xe29b23=_0x10bdbb[_0x4dfbc2(0x24e)][_0x4dfbc2(0x246)],_0x5b84d7=_0x10bdbb[_0x4dfbc2(0x24e)][_0x4dfbc2(0x1cd)]?'Success:\x20'+new Date()[_0x4dfbc2(0x1ff)]()+'\x20('+_0x2f0a7f+')':'Failed:\x20'+_0x10bdbb[_0x4dfbc2(0x24e)][_0x4dfbc2(0x284)];_0x1f090f[_0x4dfbc2(0x2da)](_0x4dfbc2(0x31f),{'val':_0x5b84d7,'ack':!![]});if(_0x10bdbb[_0x4dfbc2(0x24e)][_0x4dfbc2(0x1cd)]&&_0xe29b23)_0x1f090f[_0x4dfbc2(0x2da)](_0x4dfbc2(0x305),{'val':_0xe29b23,'ack':!![]});}else{if(_0x10bdbb['type']===_0x4dfbc2(0x338)){const {patterns:_0x36e3d7}=_0x10bdbb[_0x4dfbc2(0x24e)];if(_0x36e3d7&&_0x36e3d7[_0x4dfbc2(0x259)]>0x0){_0x1f090f[_0x4dfbc2(0x2ef)][_0x4dfbc2(0x1bb)](_0x4dfbc2(0x1f1)+_0x36e3d7[_0x4dfbc2(0x259)]+_0x4dfbc2(0x2d9)),_0x1f090f['setStateAsync'](_0x4dfbc2(0x216),{'val':JSON[_0x4dfbc2(0x2d4)](_0x36e3d7),'ack':!![]});const _0x410ff6=_0x36e3d7[0x0],_0x52187c=_0x4dfbc2(0x28c)+_0x410ff6[_0x4dfbc2(0x1bd)]+'\x20('+(_0x410ff6[_0x4dfbc2(0x2ea)]*0x64)[_0x4dfbc2(0x271)](0x0)+'%)';_0x1f090f['setStateAsync'](_0x4dfbc2(0x2c9),{'val':!![],'ack':!![]}),_0x1f090f['setStateAsync'](_0x4dfbc2(0x30b),{'val':_0x52187c,'ack':!![]});}else _0x1f090f['log'][_0x4dfbc2(0x1bb)](_0x4dfbc2(0x1cc)),_0x1f090f[_0x4dfbc2(0x2da)](_0x4dfbc2(0x2c9),{'val':![],'ack':!![]}),_0x1f090f[_0x4dfbc2(0x2da)](_0x4dfbc2(0x216),{'val':'[]','ack':!![]});}else{if(_0x10bdbb['type']===_0x4dfbc2(0x29e)){if(_0x10bdbb['payload'][_0x4dfbc2(0x1cd)])try{const _0x31cf2b=JSON['parse'](_0x10bdbb[_0x4dfbc2(0x24e)][_0x4dfbc2(0x22a)]);if(_0x31cf2b[_0x4dfbc2(0x1e1)])_0x1f090f[_0x4dfbc2(0x2da)](_0x4dfbc2(0x1fd),{'val':JSON[_0x4dfbc2(0x2d4)](_0x31cf2b['insulation']),'ack':!![]});if(_0x31cf2b[_0x4dfbc2(0x317)])_0x1f090f[_0x4dfbc2(0x2da)](_0x4dfbc2(0x1b0),{'val':JSON[_0x4dfbc2(0x2d4)](_0x31cf2b[_0x4dfbc2(0x317)]),'ack':!![]});}catch(_0x56c84a){}}else{if(_0x10bdbb['type']===_0x4dfbc2(0x1f4)){if(_0x10bdbb[_0x4dfbc2(0x24e)][_0x4dfbc2(0x1cd)])_0x1f090f[_0x4dfbc2(0x2ef)]['info'](_0x4dfbc2(0x217));}else{if(_0x10bdbb[_0x4dfbc2(0x2a3)]===_0x4dfbc2(0x2a1))_0x1f090f['setStateAsync'](_0x4dfbc2(0x262),{'val':new Date()['toISOString'](),'ack':!![]}),_0x1f090f[_0x4dfbc2(0x2da)](_0x4dfbc2(0x241),{'val':_0x10bdbb[_0x4dfbc2(0x24e)][_0x4dfbc2(0x321)],'ack':!![]});else{if(_0x10bdbb[_0x4dfbc2(0x2a3)]==='TREND_RESULT')_0x1f090f[_0x4dfbc2(0x2da)](_0x4dfbc2(0x25a),{'val':_0x10bdbb[_0x4dfbc2(0x24e)][_0x4dfbc2(0x2a9)],'ack':!![]}),_0x1f090f[_0x4dfbc2(0x2da)](_0x4dfbc2(0x2f4),{'val':_0x10bdbb[_0x4dfbc2(0x24e)]['change_percent'],'ack':!![]});else{if(_0x10bdbb[_0x4dfbc2(0x2a3)]===_0x4dfbc2(0x24a)){const {speed_trend:_0x210845}=_0x10bdbb[_0x4dfbc2(0x24e)];if(_0x210845!==undefined)_0x1f090f[_0x4dfbc2(0x2da)](_0x4dfbc2(0x24f),{'val':_0x210845,'ack':!![]});}else{if(_0x10bdbb[_0x4dfbc2(0x2a3)]==='ENERGY_PREDICT_RESULT'){const {forecast:_0x31a95a}=_0x10bdbb[_0x4dfbc2(0x24e)];if(_0x31a95a)_0x1f090f['setStateAsync'](_0x4dfbc2(0x331),{'val':JSON[_0x4dfbc2(0x2d4)](_0x31a95a),'ack':!![]});}else{if(_0x10bdbb[_0x4dfbc2(0x2a3)]===_0x4dfbc2(0x2f5)){const {data:_0x2c84b1}=_0x10bdbb[_0x4dfbc2(0x24e)];_0x2c84b1&&(_0x1f090f[_0x4dfbc2(0x2ef)][_0x4dfbc2(0x1bb)](_0x4dfbc2(0x226)),_0x1f090f[_0x4dfbc2(0x2da)](_0x4dfbc2(0x332),{'val':JSON['stringify'](_0x2c84b1),'ack':!![]}));}}}}}}}}}}}}function startPythonService(_0x3aabdf){const _0x136096=a0_0x2fe610;let _0x4f8006='python3';if(fs[_0x136096(0x1ed)](installer[_0x136096(0x1f8)]))_0x4f8006=installer[_0x136096(0x1f8)];try{const _0x51399b=path[_0x136096(0x1d5)](__dirname,'python_service',_0x136096(0x1b3));_0x3aabdf[_0x136096(0x215)]=spawn(_0x4f8006,[_0x51399b]),_0x3aabdf[_0x136096(0x215)][_0x136096(0x316)]['on'](_0x136096(0x27f),_0x38248f=>{const _0x13eb79=_0x136096,_0x271928=_0x38248f[_0x13eb79(0x295)]()['split']('\x0a');_0x271928[_0x13eb79(0x2df)](_0x5b07da=>{const _0x1a2bbb=_0x13eb79,_0x51d6ae=_0x5b07da['trim']();if(!_0x51d6ae)return;if(_0x51d6ae[_0x1a2bbb(0x238)](_0x1a2bbb(0x324)))_0x3aabdf[_0x1a2bbb(0x2ef)][_0x1a2bbb(0x342)](_0x1a2bbb(0x2c6)+_0x51d6ae[_0x1a2bbb(0x244)](0x5)['trim']());else{if(_0x51d6ae['startsWith'](_0x1a2bbb(0x2e4)))try{const _0x34358d=JSON[_0x1a2bbb(0x325)](_0x51d6ae[_0x1a2bbb(0x244)](0x8)['trim']());handlePythonResult(_0x3aabdf,_0x34358d);}catch(_0x39ac77){}}});}),_0x3aabdf[_0x136096(0x215)]['on']('close',_0x1386ef=>{const _0x12fc04=_0x136096;_0x3aabdf[_0x12fc04(0x215)]=null;});}catch(_0x47ae8a){_0x3aabdf[_0x136096(0x2ef)][_0x136096(0x297)](_0x136096(0x339)+_0x47ae8a['message']);}}async function runAutopilot(_0x194869){const _0x5d6f5e=a0_0x2fe610;_0x194869[_0x5d6f5e(0x2ef)][_0x5d6f5e(0x342)]('ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...'),await runGeminiAnalysis(_0x194869),updateHealthVector(_0x194869),triggerGaitAnalysis(_0x194869),triggerEnergyPrediction(_0x194869);}async function triggerGaitAnalysis(_0x14c4fc){const _0x5cb068=a0_0x2fe610;if(!_0x14c4fc[_0x5cb068(0x266)])return;try{const _0x317689=await _0x14c4fc[_0x5cb068(0x23d)](_0x5cb068(0x21f));_0x317689&&_0x317689['val']&&sendToPython(_0x14c4fc,'ANALYZE_GAIT',{'sequences':JSON[_0x5cb068(0x325)](_0x317689[_0x5cb068(0x26d)])});}catch(_0xf60785){}}async function triggerEnergyPrediction(_0x562656){const _0x447aac=a0_0x2fe610;if(!_0x562656[_0x447aac(0x266)])return;try{const _0x14279e=await getOutsideTemperatureNumeric(_0x562656);if(_0x14279e===null)return;const _0x2aff7c={},_0x55608e=_0x562656[_0x447aac(0x2b2)][_0x447aac(0x30a)]||[];for(const _0x403494 of _0x55608e){if(_0x403494[_0x447aac(0x2a3)]===_0x447aac(0x228)&&_0x403494[_0x447aac(0x2ac)]){const _0x1b8825=_0x562656[_0x447aac(0x335)][_0x403494['id']];if(_0x1b8825!==undefined)_0x2aff7c[_0x403494[_0x447aac(0x2ac)]]=_0x1b8825;}}Object[_0x447aac(0x247)](_0x2aff7c)[_0x447aac(0x259)]>0x0&&sendToPython(_0x562656,_0x447aac(0x230),{'current_temps':_0x2aff7c,'t_out':_0x14279e});}catch(_0x58bb64){}}function updateHealthVector(_0x4f693b){const _0x4e73cd=a0_0x2fe610;if(!_0x4f693b[_0x4e73cd(0x2bf)]||_0x4f693b[_0x4e73cd(0x2bf)][_0x4e73cd(0x259)]===0x0)return;const _0x4367b9=new Array(0x60)[_0x4e73cd(0x2eb)](0x0),_0x34aae4=new Date()['setHours'](0x0,0x0,0x0,0x0);_0x4f693b[_0x4e73cd(0x2bf)]['forEach'](_0x55ead4=>{const _0x40debd=_0x4e73cd,_0x317a47=new Date(_0x55ead4[_0x40debd(0x1cf)]);if(_0x317a47[_0x40debd(0x23a)]()>=_0x34aae4){const _0x215051=_0x317a47['getHours'](),_0x55ca76=_0x317a47[_0x40debd(0x1cb)](),_0x3fcbde=_0x215051*0x4+Math[_0x40debd(0x22c)](_0x55ca76/0xf);if(_0x3fcbde>=0x0&&_0x3fcbde<0x60)_0x4367b9[_0x3fcbde]++;}}),_0x4f693b['setStateAsync']('analysis.health.todayVector',{'val':JSON['stringify'](_0x4367b9),'ack':!![]});}function a0_0x4f06(_0x531ecd,_0x5a50a0){const _0x3d5059=a0_0x5ad0();return a0_0x4f06=function(_0x44f7d2,_0x51453e){_0x44f7d2=_0x44f7d2-0x1aa;let _0x5ad0c8=_0x3d5059[_0x44f7d2];return _0x5ad0c8;},a0_0x4f06(_0x531ecd,_0x5a50a0);}async function getWeatherContext(_0x10120e){const _0x4c11ec=a0_0x2fe610;if(!_0x10120e['config'][_0x4c11ec(0x1d9)]||!_0x10120e[_0x4c11ec(0x2b2)][_0x4c11ec(0x210)])return'Wetterdaten\x20deaktiviert.';try{const _0x376567=_0x10120e[_0x4c11ec(0x2b2)][_0x4c11ec(0x210)];let _0x42b8eb=await _0x10120e[_0x4c11ec(0x1ba)](_0x376567+_0x4c11ec(0x337));if(!_0x42b8eb)_0x42b8eb=await _0x10120e[_0x4c11ec(0x1ba)](_0x376567+_0x4c11ec(0x2e5));let _0x4a6cd8=await _0x10120e[_0x4c11ec(0x1ba)](_0x376567+_0x4c11ec(0x1d7));if(!_0x4a6cd8)_0x4a6cd8=await _0x10120e['getForeignStateAsync'](_0x376567+_0x4c11ec(0x1e0));if(_0x42b8eb&&_0x4a6cd8)return _0x42b8eb['val']+_0x4c11ec(0x214)+_0x4a6cd8[_0x4c11ec(0x26d)];}catch(_0x143ecc){}return'Keine\x20Wetterdaten\x20verfÃ¼gbar.';}async function getCalendarContext(_0x119ead){const _0x565e11=a0_0x2fe610;if(!_0x119ead['config'][_0x565e11(0x25b)]||!_0x119ead['config'][_0x565e11(0x2d7)])return'Kalender\x20deaktiviert.';return _0x565e11(0x2ed);}async function getCalendarNames(_0x4bd784,_0x3f4f04){return[];}async function saveFeedback(_0x432b26,_0x48d5aa){const _0x295005=a0_0x2fe610;_0x432b26[_0x295005(0x2ef)][_0x295005(0x1bb)](_0x295005(0x334)+_0x48d5aa[_0x295005(0x26a)]);}async function runGeminiAnalysis(_0x439d8b,_0x67a643=''){const _0x38d48a=a0_0x2fe610;if(!_0x439d8b[_0x38d48a(0x311)])return;if(_0x439d8b[_0x38d48a(0x23e)][_0x38d48a(0x259)]===0x0)return;const _0x57b0a8=_0x439d8b[_0x38d48a(0x23e)]['slice'](0x0,0xf),_0x48f67e=await getWeatherContext(_0x439d8b),_0x2d6ba1=_0x439d8b[_0x38d48a(0x27b)],_0x2eabed=PERSONA_MAPPING[_0x439d8b[_0x38d48a(0x2b2)][_0x38d48a(0x2ba)]||_0x38d48a(0x1d3)],_0x6528ed=_0x439d8b[_0x38d48a(0x2b2)][_0x38d48a(0x255)]||_0x38d48a(0x2bb);let _0x2cb90f=_0x38d48a(0x29b);try{const _0x486b4b=await _0x439d8b[_0x38d48a(0x23d)](_0x38d48a(0x23f));if(_0x486b4b&&_0x486b4b[_0x38d48a(0x26d)])_0x2cb90f=_0x486b4b[_0x38d48a(0x26d)];}catch(_0x259579){}let _0x41943a=![];try{const _0x29495e=await _0x439d8b[_0x38d48a(0x23d)](_0x38d48a(0x32c));if(_0x29495e&&_0x29495e['val'])_0x41943a=!![];}catch(_0x3fe9a){}const _0x147f2d='ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20'+_0x2eabed+_0x38d48a(0x1fb)+_0x6528ed+'.\x20SYSTEM_MODE:\x20'+_0x2d6ba1+_0x38d48a(0x1dc)+_0x48f67e+'.\x20ANWESEND:\x20'+_0x2cb90f+_0x38d48a(0x221)+JSON[_0x38d48a(0x2d4)](_0x57b0a8)+_0x38d48a(0x1d6)+_0x67a643+'.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}';try{const _0x355d94=await _0x439d8b[_0x38d48a(0x311)][_0x38d48a(0x298)](_0x147f2d),_0x1dc22e=JSON[_0x38d48a(0x325)](_0x355d94[_0x38d48a(0x2bd)][_0x38d48a(0x320)]()[_0x38d48a(0x1e4)](/```json|```/g,'')[_0x38d48a(0x32f)]());await _0x439d8b[_0x38d48a(0x2da)](_0x38d48a(0x280),{'val':JSON['stringify'](_0x1dc22e),'ack':!![]});if(_0x1dc22e['summary'])await _0x439d8b[_0x38d48a(0x2da)]('analysis.activitySummary',{'val':_0x1dc22e[_0x38d48a(0x29f)],'ack':!![]});const _0x175db1={'timestamp':Date[_0x38d48a(0x1d4)](),'id':Date[_0x38d48a(0x1d4)]()['toString'](),'analysis':{'activity':{'summary':_0x1dc22e[_0x38d48a(0x29f)],'isAlert':_0x1dc22e[_0x38d48a(0x2dd)],'alertReason':_0x1dc22e[_0x38d48a(0x239)]},'comfort':{'automationProposal':_0x1dc22e[_0x38d48a(0x328)]}}};await updateAnalysisHistory(_0x439d8b,_0x175db1);const _0x177d14=_0x1dc22e[_0x38d48a(0x2dd)]||![];_0x177d14!==_0x439d8b['lastAlertState']&&(await _0x439d8b[_0x38d48a(0x2da)](_0x38d48a(0x276),{'val':_0x177d14,'ack':!![]}),_0x439d8b['lastAlertState']=_0x177d14,_0x177d14&&(await _0x439d8b[_0x38d48a(0x2da)]('analysis.alertReason',{'val':_0x1dc22e[_0x38d48a(0x239)],'ack':!![]}),sendNotification(_0x439d8b,_0x38d48a(0x32e)+_0x1dc22e['alertReason'],![],_0x1dc22e[_0x38d48a(0x2cc)])));if(_0x1dc22e[_0x38d48a(0x328)]&&_0x1dc22e[_0x38d48a(0x328)][_0x38d48a(0x213)]){await _0x439d8b[_0x38d48a(0x2da)](_0x38d48a(0x2c9),{'val':!![],'ack':!![]}),await _0x439d8b[_0x38d48a(0x2da)](_0x38d48a(0x30b),{'val':_0x1dc22e['automationProposal'][_0x38d48a(0x250)],'ack':!![]}),await _0x439d8b[_0x38d48a(0x2da)](_0x38d48a(0x237),{'val':_0x1dc22e['automationProposal'][_0x38d48a(0x2af)],'ack':!![]}),await _0x439d8b[_0x38d48a(0x2da)]('analysis.automation.targetValue',{'val':JSON[_0x38d48a(0x2d4)](_0x1dc22e[_0x38d48a(0x328)]['targetValue']),'ack':!![]});if(_0x41943a)executeAutomationAction(_0x439d8b);}}catch(_0x2006d8){_0x439d8b[_0x38d48a(0x2ef)][_0x38d48a(0x297)]('Gemini\x20Error:\x20'+_0x2006d8['message']);}}async function startSystem(_0x47fdaa){const _0x3c6aa8=a0_0x2fe610;_0x47fdaa['log'][_0x3c6aa8(0x1bb)](_0x3c6aa8(0x326)),await initZombies(_0x47fdaa);try{_0x47fdaa[_0x3c6aa8(0x266)]=await checkLicense(_0x47fdaa[_0x3c6aa8(0x2b2)]['licenseKey']);}catch(_0x59407e){}if(!_0x47fdaa[_0x3c6aa8(0x2b2)]['inactivityThresholdHours']||_0x47fdaa[_0x3c6aa8(0x2b2)]['inactivityThresholdHours']<0.1)_0x47fdaa[_0x3c6aa8(0x2b2)][_0x3c6aa8(0x25e)]=0xc;await initHistory(_0x47fdaa),await initSystemConfig(_0x47fdaa);if(_0x47fdaa[_0x3c6aa8(0x2b2)][_0x3c6aa8(0x2e2)])try{_0x47fdaa[_0x3c6aa8(0x26e)]=new GoogleGenerativeAI(_0x47fdaa[_0x3c6aa8(0x2b2)]['geminiApiKey']),_0x47fdaa[_0x3c6aa8(0x311)]=_0x47fdaa['genAI'][_0x3c6aa8(0x218)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x3c6aa8(0x30d)}}),_0x47fdaa[_0x3c6aa8(0x2ef)][_0x3c6aa8(0x1bb)](_0x3c6aa8(0x31d));}catch(_0x38acbd){_0x47fdaa[_0x3c6aa8(0x2ef)]['error'](_0x3c6aa8(0x251)+_0x38acbd['message']);}await createAllObjects(_0x47fdaa),await loadSystemMode(_0x47fdaa),await loadRawEventLog(_0x47fdaa),await loadDailyDigests(_0x47fdaa),_0x47fdaa[_0x3c6aa8(0x2f0)](_0x3c6aa8(0x21c)),_0x47fdaa['subscribeStates'](LTM_DP_TRIGGER_DIGEST),_0x47fdaa[_0x3c6aa8(0x2f0)]('system.mode'),_0x47fdaa[_0x3c6aa8(0x2f0)]('analysis.triggerBriefing'),_0x47fdaa[_0x3c6aa8(0x2f0)](_0x3c6aa8(0x263)),_0x47fdaa['subscribeStates'](_0x3c6aa8(0x32c)),_0x47fdaa[_0x3c6aa8(0x2f0)]('analysis.training.triggerSecurity'),_0x47fdaa[_0x3c6aa8(0x2f0)](_0x3c6aa8(0x30f)),_0x47fdaa[_0x3c6aa8(0x2f0)]('analysis.training.triggerEnergy'),_0x47fdaa[_0x3c6aa8(0x2f0)]('analysis.training.triggerComfort'),_0x47fdaa['subscribeStates'](_0x3c6aa8(0x1df)),await initSensorSubscriptions(_0x47fdaa),await initPresenceSubscriptions(_0x47fdaa),await setupTelegramListener(_0x47fdaa),setTimeout(()=>checkWifiPresence(_0x47fdaa),0x1388);if(_0x47fdaa[_0x3c6aa8(0x2b5)])clearInterval(_0x47fdaa['analysisTimer']);const _0x5f2f7f=_0x47fdaa[_0x3c6aa8(0x2b2)][_0x3c6aa8(0x1d1)]||0xf;_0x5f2f7f>0x0&&(_0x47fdaa[_0x3c6aa8(0x2b5)]=setInterval(()=>{runAutopilot(_0x47fdaa);},_0x5f2f7f*0x3c*0x3e8)),schedulers[_0x3c6aa8(0x2b4)](_0x47fdaa,()=>createDailyDigest(_0x47fdaa)),schedulers['setupModeResetScheduler'](_0x47fdaa),schedulers[_0x3c6aa8(0x301)](_0x47fdaa,()=>runBaselineDriftAnalysis(_0x47fdaa)),schedulers['setupBriefingScheduler'](_0x47fdaa,()=>sendMorningBriefing(_0x47fdaa)),startPythonService(_0x47fdaa),setTimeout(()=>{_0x47fdaa['pythonProcess']&&(runPythonHealthCheck(_0x47fdaa),triggerGaitAnalysis(_0x47fdaa),triggerEnergyPrediction(_0x47fdaa)),updateHealthVector(_0x47fdaa);},0x1388);}class CogniLiving extends utils[a0_0x2fe610(0x336)]{constructor(_0x2fcc03){const _0x4f72e6=a0_0x2fe610;super({..._0x2fcc03,'name':_0x4f72e6(0x1b2)}),this['eventHistory']=[],this[_0x4f72e6(0x289)]=[],this[_0x4f72e6(0x2bf)]=[],this['dailyDigests']=[],this[_0x4f72e6(0x335)]={},this['systemConfig']={'latitude':0x0,'longitude':0x0,'city':''},this[_0x4f72e6(0x286)]=!![],this[_0x4f72e6(0x261)]=null,this[_0x4f72e6(0x2ad)]=null,this[_0x4f72e6(0x33a)]=![],this[_0x4f72e6(0x26e)]=null,this['geminiModel']=null,this['currentSystemMode']=SYSTEM_MODES[_0x4f72e6(0x273)],this[_0x4f72e6(0x266)]=![],this[_0x4f72e6(0x33d)]=![],this[_0x4f72e6(0x253)]='unknown',this['analysisTimer']=null,this[_0x4f72e6(0x200)]=null,this[_0x4f72e6(0x2ab)]=null,this['driftAnalysisTimer']=null,this[_0x4f72e6(0x274)]=null,this[_0x4f72e6(0x215)]=null,this[_0x4f72e6(0x2b8)]=![],this['on'](_0x4f72e6(0x229),this[_0x4f72e6(0x309)][_0x4f72e6(0x270)](this)),this['on'](_0x4f72e6(0x333),this[_0x4f72e6(0x26b)][_0x4f72e6(0x270)](this)),this['on'](_0x4f72e6(0x2a2),this[_0x4f72e6(0x25d)][_0x4f72e6(0x270)](this)),this['on']('message',this[_0x4f72e6(0x231)][_0x4f72e6(0x270)](this));}async[a0_0x2fe610(0x309)](){const _0x425449=a0_0x2fe610;this[_0x425449(0x2ef)][_0x425449(0x1bb)](_0x425449(0x1c9)+this['version']+')\x20-\x20SAFE\x20BOOT');if(!installer[_0x425449(0x258)](this,()=>startSystem(this)))return;}[a0_0x2fe610(0x25d)](_0x18bf53){const _0x52e219=a0_0x2fe610;if(this[_0x52e219(0x2b5)])clearInterval(this[_0x52e219(0x2b5)]);if(this['driftAnalysisTimer'])clearInterval(this[_0x52e219(0x330)]);if(this[_0x52e219(0x200)])this[_0x52e219(0x200)][_0x52e219(0x21d)]();if(this[_0x52e219(0x2ab)])this[_0x52e219(0x2ab)][_0x52e219(0x21d)]();if(this[_0x52e219(0x274)])this[_0x52e219(0x274)][_0x52e219(0x21d)]();if(this[_0x52e219(0x261)])clearTimeout(this['exitTimer']);if(this['exitGraceTimer'])clearTimeout(this[_0x52e219(0x2ad)]);stopPythonService(this),_0x18bf53();}async[a0_0x2fe610(0x26b)](_0x18acfe,_0xffe3c6){const _0xd538f9=a0_0x2fe610;if(!_0xffe3c6||this['dependencyInstallInProgress'])return;if(_0x18acfe['includes']('telegram')&&_0x18acfe[_0xd538f9(0x293)](_0xd538f9(0x2d1))&&_0xffe3c6['val']){await handleTelegramResponse(this,_0xffe3c6['val']);return;}if(_0x18acfe===this[_0xd538f9(0x296)]+'.'+SYSTEM_DP_MODE){if(_0xffe3c6[_0xd538f9(0x26d)]&&Object[_0xd538f9(0x2f3)](SYSTEM_MODES)['includes'](_0xffe3c6[_0xd538f9(0x26d)])){this[_0xd538f9(0x27b)]=_0xffe3c6[_0xd538f9(0x26d)];if(_0xffe3c6[_0xd538f9(0x26d)]===SYSTEM_MODES[_0xd538f9(0x1eb)])await setPresence(this,![]);else await setPresence(this,!![]);}if(!_0xffe3c6['ack'])this['setState'](_0x18acfe,{'val':this[_0xd538f9(0x27b)],'ack':!![]});return;}if(!_0xffe3c6[_0xd538f9(0x1f7)]){_0x18acfe['includes'](_0xd538f9(0x21c))&&_0xffe3c6[_0xd538f9(0x26d)]&&(this[_0xd538f9(0x31b)](_0x18acfe,{'val':![],'ack':!![]}),runGeminiAnalysis(this));if(_0x18acfe[_0xd538f9(0x31a)](_0xd538f9(0x292))&&_0xffe3c6['val']){this['setState'](_0x18acfe,{'val':![],'ack':!![]});if(this[_0xd538f9(0x266)])createDailyDigest(this);}_0x18acfe['includes'](_0xd538f9(0x206))&&_0xffe3c6[_0xd538f9(0x26d)]&&(this[_0xd538f9(0x31b)](_0x18acfe,{'val':![],'ack':!![]}),sendMorningBriefing(this));_0x18acfe[_0xd538f9(0x31a)](_0xd538f9(0x327))&&_0xffe3c6[_0xd538f9(0x26d)]&&(this[_0xd538f9(0x31b)](_0x18acfe,{'val':![],'ack':!![]}),executeAutomationAction(this));if(_0x18acfe[_0xd538f9(0x31a)](_0xd538f9(0x33f))&&_0xffe3c6[_0xd538f9(0x26d)]){this['setState'](_0x18acfe,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x3d83b0=await this[_0xd538f9(0x23d)](_0xd538f9(0x21f));if(_0x3d83b0&&_0x3d83b0[_0xd538f9(0x26d)]){const _0x3b24b1=JSON[_0xd538f9(0x325)](_0x3d83b0[_0xd538f9(0x26d)]);this[_0xd538f9(0x2ef)][_0xd538f9(0x1bb)]('ðŸ§ \x20Triggering\x20Security\x20Training...'),this['setStateAsync'](_0xd538f9(0x31f),{'val':'Sec-Training\x20started...','ack':!![]}),sendToPython(this,_0xd538f9(0x2cf),{'sequences':_0x3b24b1});}}catch(_0x1d5957){this[_0xd538f9(0x2ef)][_0xd538f9(0x297)](_0xd538f9(0x268)+_0x1d5957[_0xd538f9(0x25c)]);}}if(_0x18acfe['includes'](_0xd538f9(0x30f))&&_0xffe3c6['val']){this['setState'](_0x18acfe,{'val':![],'ack':!![]});if(this[_0xd538f9(0x266)])try{const _0x2c88e9=await this[_0xd538f9(0x23d)](LTM_DP_DAILY_DIGESTS);if(_0x2c88e9&&_0x2c88e9[_0xd538f9(0x26d)])sendToPython(this,_0xd538f9(0x2e1),{'digests':JSON[_0xd538f9(0x325)](_0x2c88e9[_0xd538f9(0x26d)])});}catch(_0x456a88){}}if(_0x18acfe[_0xd538f9(0x31a)](_0xd538f9(0x346))&&_0xffe3c6[_0xd538f9(0x26d)]){this[_0xd538f9(0x31b)](_0x18acfe,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x407407=await this[_0xd538f9(0x23d)]('LTM.trainingData.thermodynamics');if(_0x407407&&_0x407407[_0xd538f9(0x26d)])sendToPython(this,_0xd538f9(0x2f2),{'points':JSON[_0xd538f9(0x325)](_0x407407[_0xd538f9(0x26d)])});}catch(_0x28803f){}}if(_0x18acfe[_0xd538f9(0x31a)](_0xd538f9(0x26c))&&_0xffe3c6[_0xd538f9(0x26d)]){this[_0xd538f9(0x31b)](_0x18acfe,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x4fd1c3=await this['getStateAsync'](LTM_DP_RAW_LOG);_0x4fd1c3&&_0x4fd1c3[_0xd538f9(0x26d)]&&(this[_0xd538f9(0x2ef)][_0xd538f9(0x1bb)](_0xd538f9(0x227)),sendToPython(this,_0xd538f9(0x1f5),{'events':JSON[_0xd538f9(0x325)](_0x4fd1c3[_0xd538f9(0x26d)])}));}catch(_0x14f3b3){}}if(_0x18acfe[_0xd538f9(0x31a)](_0xd538f9(0x1df))&&_0xffe3c6['val']){this[_0xd538f9(0x31b)](_0x18acfe,{'val':![],'ack':!![]});if(this[_0xd538f9(0x266)])try{const _0x2dd979=await this[_0xd538f9(0x23d)](_0xd538f9(0x21f));if(_0x2dd979&&_0x2dd979[_0xd538f9(0x26d)]){const _0x5f59e8=JSON['parse'](_0x2dd979[_0xd538f9(0x26d)]);this['log'][_0xd538f9(0x1bb)](_0xd538f9(0x256)),sendToPython(this,_0xd538f9(0x257),{'sequences':_0x5f59e8});}}catch(_0x29f586){this[_0xd538f9(0x2ef)]['error'](_0xd538f9(0x1c8)+_0x29f586['message']);}}return;}if(this[_0xd538f9(0x2b2)][_0xd538f9(0x319)]&&this[_0xd538f9(0x2b2)]['presenceDevices']['includes'](_0x18acfe)){await checkWifiPresence(this);return;}const _0xc334eb=(this[_0xd538f9(0x2b2)][_0xd538f9(0x30a)]||[])[_0xd538f9(0x2fc)](_0x47000d=>_0x47000d['id']===_0x18acfe);if(_0xc334eb)processSensorEvent(this,_0x18acfe,_0xffe3c6,_0xc334eb);}async[a0_0x2fe610(0x231)](_0x34f8f0){const _0x15bde6=a0_0x2fe610;if(typeof _0x34f8f0===_0x15bde6(0x285)&&_0x34f8f0[_0x15bde6(0x25c)]){if(_0x34f8f0['command']===_0x15bde6(0x1c2)){const _0x5746d5=_0x34f8f0[_0x15bde6(0x25c)]['apiKey']||this[_0x15bde6(0x2b2)][_0x15bde6(0x2e2)];if(!_0x5746d5)return this[_0x15bde6(0x1b9)](_0x34f8f0[_0x15bde6(0x1c4)],_0x34f8f0['command'],{'success':![],'message':_0x15bde6(0x248)},_0x34f8f0[_0x15bde6(0x1f6)]);try{const _0x69dd9b=new GoogleGenerativeAI(_0x5746d5),_0x2bc89a=_0x69dd9b[_0x15bde6(0x218)]({'model':GEMINI_MODEL}),_0x2bd67f=await _0x2bc89a[_0x15bde6(0x298)]('Hi');this[_0x15bde6(0x1b9)](_0x34f8f0['from'],_0x34f8f0[_0x15bde6(0x33e)],{'success':!![],'message':_0x15bde6(0x2fe)+_0x2bd67f[_0x15bde6(0x2bd)]['text']()},_0x34f8f0[_0x15bde6(0x1f6)]);}catch(_0x1934dd){this[_0x15bde6(0x1b9)](_0x34f8f0[_0x15bde6(0x1c4)],_0x34f8f0['command'],{'success':![],'message':'Err:\x20'+_0x1934dd[_0x15bde6(0x25c)]},_0x34f8f0[_0x15bde6(0x1f6)]);}}else{if(_0x34f8f0[_0x15bde6(0x33e)]==='testContext'){const _0x514d9f=await getWeatherContext(this),_0xf04515=await getCalendarContext(this);this['sendTo'](_0x34f8f0[_0x15bde6(0x1c4)],_0x34f8f0['command'],{'success':!![],'weather':_0x514d9f,'calendar':_0xf04515},_0x34f8f0[_0x15bde6(0x1f6)]);}else{if(_0x34f8f0[_0x15bde6(0x33e)]===_0x15bde6(0x288)){if(!this['isProVersion'])return this[_0x15bde6(0x1b9)](_0x34f8f0['from'],_0x34f8f0[_0x15bde6(0x33e)],{'success':![],'isPro':![]},_0x34f8f0[_0x15bde6(0x1f6)]);let _0xba3dd7={'status':_0x15bde6(0x2db)};try{const _0x2f1121=await this[_0x15bde6(0x23d)](LTM_DP_DRIFT_STATUS);_0xba3dd7[_0x15bde6(0x1ce)]=_0x2f1121?_0x2f1121['val']:'N/A';}catch(_0x246dd6){}this[_0x15bde6(0x1b9)](_0x34f8f0[_0x15bde6(0x1c4)],_0x34f8f0['command'],{'success':!![],'isPro':!![],'dailyDigests':this[_0x15bde6(0x23c)],'driftAnalysis':_0xba3dd7,'analysisHistory':this[_0x15bde6(0x289)]},_0x34f8f0['callback']);}else{if(_0x34f8f0[_0x15bde6(0x33e)]===_0x15bde6(0x29d)){const _0x45f488=this[_0x15bde6(0x23c)][_0x15bde6(0x259)],_0x14fcf2=new Date(),_0x489e81=new Date(_0x14fcf2['getFullYear'](),_0x14fcf2['getMonth'](),_0x14fcf2[_0x15bde6(0x1b1)]())[_0x15bde6(0x23a)](),_0x4e19e6=this[_0x15bde6(0x2bf)][_0x15bde6(0x264)](_0xed9a41=>new Date(_0xed9a41[_0x15bde6(0x1cf)])[_0x15bde6(0x23a)]()>_0x489e81)[_0x15bde6(0x259)],_0x484d25=new Array(0x18)[_0x15bde6(0x2eb)](0x0);this[_0x15bde6(0x2bf)][_0x15bde6(0x2df)](_0x4ba2dd=>{const _0x4a5ec4=_0x15bde6,_0x115916=new Date(_0x4ba2dd['timestamp']);if(_0x115916[_0x4a5ec4(0x23a)]()>_0x489e81)_0x484d25[_0x115916[_0x4a5ec4(0x306)]()]++;});let _0xa5ba3f={'status':'N/A'};try{const _0x156fac=await this[_0x15bde6(0x23d)](LTM_DP_DRIFT_STATUS);_0xa5ba3f[_0x15bde6(0x1ce)]=_0x156fac?_0x156fac['val']:_0x15bde6(0x2db);}catch(_0x20a0d3){}let _0x7adbe6='';try{const _0x2d86d7=await this['getStateAsync']('system.presenceWho');_0x7adbe6=_0x2d86d7?_0x2d86d7['val']:'';}catch(_0xbbee68){}let _0x4253e8=null;!this[_0x15bde6(0x311)]&&(_0x4253e8=this[_0x15bde6(0x2b2)][_0x15bde6(0x2e2)]?_0x15bde6(0x20d):_0x15bde6(0x1f9));let _0x4e9897={'detected':![],'description':'','targetId':'','targetValue':'','autoApply':![]};try{const _0x592c0b=await this['getStateAsync'](_0x15bde6(0x2c9));if(_0x592c0b&&_0x592c0b[_0x15bde6(0x26d)]){_0x4e9897[_0x15bde6(0x213)]=!![];const _0x267dee=await this[_0x15bde6(0x23d)](_0x15bde6(0x30b));_0x4e9897['description']=_0x267dee?_0x267dee[_0x15bde6(0x26d)]:'';const _0x4bffd9=await this[_0x15bde6(0x23d)](_0x15bde6(0x237));_0x4e9897['targetId']=_0x4bffd9?_0x4bffd9[_0x15bde6(0x26d)]:'';const _0x7a8af9=await this[_0x15bde6(0x23d)](_0x15bde6(0x2a4));_0x4e9897['targetValue']=_0x7a8af9?_0x7a8af9[_0x15bde6(0x26d)]:'';}const _0x591ba0=await this[_0x15bde6(0x23d)](_0x15bde6(0x32c));_0x4e9897[_0x15bde6(0x1d0)]=_0x591ba0?!!_0x591ba0[_0x15bde6(0x26d)]:![];}catch(_0x22a283){}this[_0x15bde6(0x1b9)](_0x34f8f0['from'],_0x34f8f0[_0x15bde6(0x33e)],{'success':!![],'eventHistory':this['eventHistory'][_0x15bde6(0x205)](0x0,0xf),'stats':{'digestCount':_0x45f488,'eventCountToday':_0x4e19e6,'hourlyActivity':_0x484d25,'driftStatus':_0xa5ba3f[_0x15bde6(0x1ce)],'isPresent':this['isPresent'],'presenceWho':_0x7adbe6,'minDays':this[_0x15bde6(0x2b2)][_0x15bde6(0x260)]||0x7,'stbDays':this['config'][_0x15bde6(0x2f8)]||0xe,'ltbDays':this[_0x15bde6(0x2b2)][_0x15bde6(0x1f3)]||0x3c,'systemError':_0x4253e8},'automation':_0x4e9897},_0x34f8f0[_0x15bde6(0x1f6)]);}else{if(_0x34f8f0[_0x15bde6(0x33e)]===_0x15bde6(0x283))try{const _0x41a841=await scanner[_0x15bde6(0x265)](this,_0x34f8f0[_0x15bde6(0x25c)]||{});this[_0x15bde6(0x1b9)](_0x34f8f0[_0x15bde6(0x1c4)],_0x34f8f0[_0x15bde6(0x33e)],{'success':!![],'devices':_0x41a841},_0x34f8f0['callback']);}catch(_0x20fc33){this[_0x15bde6(0x1b9)](_0x34f8f0[_0x15bde6(0x1c4)],_0x34f8f0[_0x15bde6(0x33e)],{'success':![],'error':_0x20fc33[_0x15bde6(0x25c)]},_0x34f8f0[_0x15bde6(0x1f6)]);}else{if(_0x34f8f0['command']===_0x15bde6(0x329)){const _0x47d696=await this[_0x15bde6(0x2d2)](_0x15bde6(0x318),_0x15bde6(0x30e)),_0xaef9a6=[];if(_0x47d696)for(const _0x5c6a3c in _0x47d696){const _0x504fe0=_0x47d696[_0x5c6a3c],_0x2b154a=(_0x504fe0[_0x15bde6(0x20b)]&&typeof _0x504fe0[_0x15bde6(0x20b)]['name']===_0x15bde6(0x285)?_0x504fe0[_0x15bde6(0x20b)][_0x15bde6(0x1c6)]['de']:_0x504fe0[_0x15bde6(0x20b)][_0x15bde6(0x1c6)])||_0x504fe0[_0x15bde6(0x20b)][_0x15bde6(0x1c6)];_0xaef9a6['push']({'id':_0x5c6a3c,'name':_0x2b154a});}const _0x32d2a3=await this[_0x15bde6(0x2d2)](_0x15bde6(0x32b),'enum'),_0x548920=[];if(_0x32d2a3)for(const _0x19351c in _0x32d2a3){const _0x5e2489=_0x32d2a3[_0x19351c],_0x6e5da=(_0x5e2489['common']&&typeof _0x5e2489[_0x15bde6(0x20b)][_0x15bde6(0x1c6)]===_0x15bde6(0x285)?_0x5e2489['common'][_0x15bde6(0x1c6)]['de']:_0x5e2489[_0x15bde6(0x20b)][_0x15bde6(0x1c6)])||_0x19351c[_0x15bde6(0x2c4)]('.')['pop']();_0x548920[_0x15bde6(0x2ec)](_0x6e5da);}this[_0x15bde6(0x1b9)](_0x34f8f0['from'],_0x34f8f0[_0x15bde6(0x33e)],{'success':!![],'enums':_0xaef9a6,'rooms':_0x548920},_0x34f8f0[_0x15bde6(0x1f6)]);}else{if(_0x34f8f0[_0x15bde6(0x33e)]===_0x15bde6(0x31e)){const _0x383124=_0x34f8f0['message'][_0x15bde6(0x343)];if(!_0x383124)return this['sendTo'](_0x34f8f0[_0x15bde6(0x1c4)],_0x34f8f0[_0x15bde6(0x33e)],{'success':![],'error':'No\x20instance'},_0x34f8f0[_0x15bde6(0x1f6)]);const _0x1c3f0f=await getCalendarNames(this,_0x383124);this[_0x15bde6(0x1b9)](_0x34f8f0['from'],_0x34f8f0[_0x15bde6(0x33e)],{'success':!![],'names':_0x1c3f0f},_0x34f8f0[_0x15bde6(0x1f6)]);}else{if(_0x34f8f0[_0x15bde6(0x33e)]==='simulateButler'){const {targetId:_0x1bd5cb,targetValue:_0x31eb36}=_0x34f8f0[_0x15bde6(0x25c)];this['log'][_0x15bde6(0x1bb)]('ðŸ§ª\x20Simulating\x20Butler\x20Proposal:\x20'+_0x1bd5cb+'\x20=\x20'+_0x31eb36),await this[_0x15bde6(0x2da)](_0x15bde6(0x2c9),{'val':!![],'ack':!![]}),await this['setStateAsync'](_0x15bde6(0x30b),{'val':'SIMULATION:\x20Test-Vorschlag\x20fÃ¼r\x20'+_0x1bd5cb,'ack':!![]}),await this[_0x15bde6(0x2da)]('analysis.automation.targetId',{'val':_0x1bd5cb,'ack':!![]}),await this['setStateAsync'](_0x15bde6(0x2a4),{'val':_0x31eb36,'ack':!![]}),this['sendTo'](_0x34f8f0[_0x15bde6(0x1c4)],_0x34f8f0['command'],{'success':!![]},_0x34f8f0[_0x15bde6(0x1f6)]);}else{if(_0x34f8f0[_0x15bde6(0x33e)]===_0x15bde6(0x2f1)){const {historyId:_0x323c4f,rating:_0x1a38d6,comment:_0x1bcacd,alertReason:_0xd1a9d6}=_0x34f8f0[_0x15bde6(0x25c)];_0x323c4f&&_0x1a38d6?(await saveFeedback(this,{'timestamp':Date[_0x15bde6(0x1d4)](),'historyId':_0x323c4f,'rating':_0x1a38d6,'comment':_0x1bcacd,'alertReason':_0xd1a9d6}),this['sendTo'](_0x34f8f0[_0x15bde6(0x1c4)],_0x34f8f0[_0x15bde6(0x33e)],{'success':!![]},_0x34f8f0[_0x15bde6(0x1f6)])):this[_0x15bde6(0x1b9)](_0x34f8f0[_0x15bde6(0x1c4)],_0x34f8f0[_0x15bde6(0x33e)],{'success':![],'error':'Missing\x20data'},_0x34f8f0['callback']);}else _0x34f8f0[_0x15bde6(0x33e)]==='dismissAutomation'&&(this[_0x15bde6(0x2ef)]['info'](_0x15bde6(0x21b)),await this[_0x15bde6(0x2da)](_0x15bde6(0x2c9),{'val':![],'ack':!![]}),await this[_0x15bde6(0x2da)](_0x15bde6(0x30b),{'val':'','ack':!![]}),this[_0x15bde6(0x1b9)](_0x34f8f0[_0x15bde6(0x1c4)],_0x34f8f0[_0x15bde6(0x33e)],{'success':!![]},_0x34f8f0[_0x15bde6(0x1f6)]));}}}}}}}}}}}if(require[a0_0x2fe610(0x269)]!==module)module[a0_0x2fe610(0x209)]=_0x46f3be=>new CogniLiving(_0x46f3be);else new CogniLiving();