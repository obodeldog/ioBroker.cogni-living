const a0_0x2a2b6f=a0_0x574d;function a0_0x2708(){const _0x1387d7=['thermostat','Gemini\x20Report\x20Day','events.history','analysis.activity.roomHistory','Scan\x20Error:\x20','message','security','initZombies','response','triggerEnergyPrediction','startSystem','activeModules','LTM.rawEventLog','rows','system.adapter.','üîä\x20FORENSIC:\x20Infraschall\x20bei\x20Abwesenheit!\x20Pressure:\x20','¬∞C\x20(Innen:\x20','analysis.training.triggerHealth','devices','party','scanDevices','health','¬∞C)','guest','saveDailyHistory','all','analyzeWindowOpening\x20error:\x20','onReady','motion','weatherTempId','cancel','infrasoundSensorId','onStateChange','6222CsoJLi','üîä\x20Infraschall:\x20','loadSystemMode','ack','4143924fFQNPR','Sonne:\x20','common','updateTopology','toString','scheduleJob','licenseKey','triggerEnergyPrediction\x20Error:\x20','üö∂\x20Gait\x20Analysis\x20triggered\x20with\x20','59\x2023\x20*\x20*\x20*','analysis.health.todayRoomDetails','calendarCheckTimer','min','parse','\x22history\x22:{}','PREDICT_ENERGY','location','fill','checkWifiPresence:\x20Error\x20checking\x20','Party\x20Mode','üö®\x20INFRASCHALL-ALARM:\x20Anomalie\x20bei\x20Abwesenheit\x20(scharf)!','command','infrasoundArmingId','Init...','analysis.security.learningStatus','587018MeNWZl','from','haust√ºr','reduce','includes','.isOnline','infrasoundThreshold','\x20rooms)','getCalendarNames','setHours','moduleHealth','subscribeStates','instance','split','analysis.health.todayVector','abortExitTimer','substring','LTM.dailyDigests','checkCalendarTriggers','scanForDevices','updateHealthVector','system.adapter.ical.','[Integrator]\x20Error:\x20','toLowerCase','integrateRoomTime','dailyDigests','@iobroker/adapter-core','floor','Guest\x20Mode','exitGraceTimer','SET_LEARNING_MODE','bootTime','temperature','\x20(Bewohner\x20anwesend\x20-\x20normal)','Gemini\x20Report\x20Night','setState','getStateAsync','push','NORMAL','modules','enum','comfort','1698Xqoqja','startService','checkSolarCondition','./lib/ai_agent','üîä\x20Infraschall-Alarm:\x20','Sec-Training\x20started...','bin','ANALYZE_GAIT','healthTrendInterval','genAI','getTime','sunny','Niemand','analysis.energy.warmupSources','getHistoryData','./lib/automation','generateHealthReport','currentSystemMode','history','8mWuccz','then','number','./lib/python_bridge','mkdirSync','48653436njMdSg','add','\x20-\x20','‚úÖ\x20History\x20saved:\x20','triggerGaitAnalysis\x20error:\x20','triggerGaitAnalysis','ready','object','models/gemini-flash-latest','üíæ\x20Saving\x20Daily\x20History\x20for\x20','testContext','filter','apiKey','de-DE','setPresence','daswetter.0','üìù\x20Manual\x20event\x20logged:\x20','onMessage','sendMorningBriefing','initSchedules','moduleComfort','telegram','updateSchedulePreview','rawEventLog','infrasoundLocked','enum.rooms.*','toLocaleDateString','useCalendar','name','refreshCalendar','getForeignObjectsAsync','VACATION','initSystemConfig','analysis.trigger',',\x20Events:\x0a',')\x20-\x20Phase\x20E\x20(Scheduler\x20Fix)','eventHistory','handleInfrasound','Standard','{\x22today\x22:{},\x20\x22yesterday\x22:{},\x20\x22date\x22:\x22\x22}','5KFkNog','\x20(Threshold)','analysis.prediction.trackerTopRoom','dependencyInstallInProgress','testApiKey','modeResetJob','enum.functions.*','path','analysis.health.activityTrend','analyzeWindowOpening','value','analysis.automation.patternDetected','Adapter','infrasoundEnabled','L√ºften\x20empfohlen','setStateAsync','analysis.energy.warmupTargets','Daily\x20Activity\x20Vector\x20(48x30min)','sendTo','General\x20Activity\x20Trend','./lib/setup','pressureBuffer','slice','History\x20Save\x20Error:\x20','SYSTEM_MODES','analysis.security.lastScore','system.presenceWho','triggerBriefing','analysis.health.geminiDay','moduleEnergy','.last_seen','10ZNIgaG','existsSync','forEach','analysisTimer','toLocaleTimeString','info','application/json','5271vOVlpk','Unknown','toISOString','python','log','isRelevantActivity','./lib/installer','subscribeForeignStates','utf8','NIGHT','inactivityThresholdHours','isSolar','createDailyDigest','Gute\x20L√ºftungsm√∂glichkeit!','max','Aktiv\x20(','find','onUnload','length','Warte\x20auf\x20Analyse...','manual','json','sendNotification','getGenerativeModel','.data.table','analysis.energy.warmupTimes','bind','isProVersion','pulse','Live\x20Event\x20Pulse','error','lastAlertState','LTM.triggerDailyDigest','system','./lib/recorder','getMinutes','keys','date','weatherunderground.0','subscribeForeignStatesAsync','forecast.current.weather','endsWith','getForeignStateAsync','NextHours.Location_1.Day_1.current.symbol_desc','isGracePeriodActive','unload','presenceDevices','briefingJob','klar','\x20sequences','apply','538LAUDOw','heiter','driftAnalysisTimer','door','Current.WeatherText','Daily\x20Room\x20Details\x20(48x30min)','presenceCheckTimer','open','automation.triggerAction','getDate','triggerInfrasoundCorrelation','moduleSecurity','geminiApiKey','stopService','isPresent','replace','checkThermostats','ltmJob','checkLicense','cleanupGhostInterventions','checkWifiPresence','analysis.automation.targetValue','analysisHistory','appendToLog','3799940hiTyrS','.json','energy','runPythonHealthCheck','abs','...','./lib/topology','exitTimer','historyJob','geminiModel','protectAiMemory','some','.venv','config','getObjectViewAsync','analysis.visualization.pulse','replayTodayEvents','generateContent','communicate.request','./lib/scanner','lastTrackerEventTime','sources','üîÆ\x20Energy\x20Prediction\x20triggered\x20(','analysis.safety.infrasoundAlert','map','calendarName','version','system.adapter.ical.È¶ô','\x20>\x20','custom','type','scanThermostats','Room\x20History\x20(24h\x20Buckets)','getAbsoluteDefaultDataDir','Unbekannt','TRAIN_COMFORT','initHistory','analysis.health.geminiNight','\x20events\x20from\x20standard\x20storage.','TRAIN_SECURITY','getHours','join','\x20events\x20from\x20today...','{\x22history\x22:{}}','cogni-living\x20adapter\x20starting\x20(v','analysis.activity.roomStats','cogni-living','search','state','setObjectNotExistsAsync','warn','constructor','stringify','memoryCache','analysis.automation.description','send','Verbindung\x20erfolgreich:\x20','debug','timestamp','shift','minDaysForBaseline','callback','No\x20data','üì¶\x20Restored\x20','text','analysis.training.triggerSecurity','stateChange','\x20Tage)','DAY','LTM.baselineStatus','üêç\x20Triggering\x20Python\x20Health\x20Check\x20(Activity\x20Trend)...','8796733KgLYMz','values','val','2-digit','(((.+)+)+)+$','triggerDailyDigest','analysis.prediction.trackerConfidence','¬∞C,\x20Au√üen:\x20','\x20Kalender-Adapter\x20gefunden.','main','node-schedule','round','Keine\x20Daten','getEnums','roomIntegratorTimer','string','window','./lib/dead_man','Corrupt','LTM.trainingData.sequences','toFixed','accuweather.0','Kein\x20API\x20Key\x20√ºbergeben.','analysis.training.triggerEnergy','Lernphase\x20(','isArray','now','triggerHealth\x20error:\x20'];a0_0x2708=function(){return _0x1387d7;};return a0_0x2708();}(function(_0x5e03fe,_0x1a64ce){const _0x1c3098=a0_0x574d,_0x14ba99=_0x5e03fe();while(!![]){try{const _0x54d393=-parseInt(_0x1c3098(0x269))/0x1+-parseInt(_0x1c3098(0x1b0))/0x2*(parseInt(_0x1c3098(0x24c))/0x3)+parseInt(_0x1c3098(0x1c8))/0x4*(-parseInt(_0x1c3098(0x2d3))/0x5)+parseInt(_0x1c3098(0x293))/0x6*(-parseInt(_0x1c3098(0x17d))/0x7)+parseInt(_0x1c3098(0x2a6))/0x8*(-parseInt(_0x1c3098(0x250))/0x9)+parseInt(_0x1c3098(0x176))/0xa*(-parseInt(_0x1c3098(0x20f))/0xb)+parseInt(_0x1c3098(0x2ab))/0xc;if(_0x54d393===_0x1a64ce)break;else _0x14ba99['push'](_0x14ba99['shift']());}catch(_0x30fa0e){_0x14ba99['push'](_0x14ba99['shift']());}}}(a0_0x2708,0x76ba2));const a0_0x2e3acd=(function(){let _0x10b00f=!![];return function(_0x46fe19,_0xcee6a5){const _0x571cdf=_0x10b00f?function(){const _0x508e6f=a0_0x574d;if(_0xcee6a5){const _0x67fa8a=_0xcee6a5[_0x508e6f(0x1af)](_0x46fe19,arguments);return _0xcee6a5=null,_0x67fa8a;}}:function(){};return _0x10b00f=![],_0x571cdf;};}()),a0_0x26b65a=a0_0x2e3acd(this,function(){const _0x3f4cf3=a0_0x574d;return a0_0x26b65a[_0x3f4cf3(0x254)]()[_0x3f4cf3(0x1f7)](_0x3f4cf3(0x213))[_0x3f4cf3(0x254)]()[_0x3f4cf3(0x1fb)](a0_0x26b65a)[_0x3f4cf3(0x1f7)](_0x3f4cf3(0x213));});a0_0x26b65a();'use strict';const utils=require(a0_0x2a2b6f(0x283)),{GoogleGenerativeAI}=require('@google/generative-ai'),path=require(a0_0x2a2b6f(0x15e)),fs=require('fs'),installer=require(a0_0x2a2b6f(0x183)),scanner=require(a0_0x2a2b6f(0x1db)),schedulers=require('./lib/scheduler'),topology=require(a0_0x2a2b6f(0x1ce)),setup=require(a0_0x2a2b6f(0x16b)),recorder=require(a0_0x2a2b6f(0x19f)),pythonBridge=require(a0_0x2a2b6f(0x2a9)),aiAgent=require(a0_0x2a2b6f(0x296)),deadMan=require(a0_0x2a2b6f(0x220)),automation=require(a0_0x2a2b6f(0x2a2)),GEMINI_MODEL=a0_0x2a2b6f(0x2b3);function a0_0x574d(_0x3147a9,_0x272fa1){const _0x3df48c=a0_0x2708();return a0_0x574d=function(_0x26b65a,_0x2e3acd){_0x26b65a=_0x26b65a-0x158;let _0x270810=_0x3df48c[_0x26b65a];return _0x270810;},a0_0x574d(_0x3147a9,_0x272fa1);}class CogniLiving extends utils[a0_0x2a2b6f(0x163)]{constructor(_0x43480b){const _0x20f20e=a0_0x2a2b6f;super({..._0x43480b,'name':_0x20f20e(0x1f6)}),this['eventHistory']=[],this[_0x20f20e(0x1c6)]=[],this[_0x20f20e(0x2c2)]=[],this['dailyDigests']=[],this['sensorLastValues']={},this['systemConfig']={'latitude':0x0,'longitude':0x0,'city':''},this[_0x20f20e(0x1be)]=!![],this[_0x20f20e(0x1cf)]=null,this[_0x20f20e(0x286)]=null,this[_0x20f20e(0x1a9)]=![],this[_0x20f20e(0x29c)]=null,this['geminiModel']=null,this[_0x20f20e(0x2a4)]=setup[_0x20f20e(0x16f)][_0x20f20e(0x28f)],this['isProVersion']=![],this[_0x20f20e(0x19c)]=![],this[_0x20f20e(0x179)]=null,this['calendarCheckTimer']=null,this[_0x20f20e(0x1b6)]=null,this[_0x20f20e(0x1c1)]=null,this[_0x20f20e(0x15c)]=null,this[_0x20f20e(0x1b2)]=null,this[_0x20f20e(0x1ac)]=null,this[_0x20f20e(0x1d0)]=null,this['trackerHeartbeat']=null,this[_0x20f20e(0x29b)]=null,this[_0x20f20e(0x21d)]=null,this[_0x20f20e(0x15a)]=![],this[_0x20f20e(0x1dc)]=Date[_0x20f20e(0x229)](),this['memoryCache']=null,this[_0x20f20e(0x288)]=Date[_0x20f20e(0x229)](),this[_0x20f20e(0x2c3)]=![],this[_0x20f20e(0x16c)]=[],this[_0x20f20e(0x236)]={'health':!![],'security':!![],'energy':!![],'comfort':!![]},this['on'](_0x20f20e(0x2b1),this[_0x20f20e(0x246)][_0x20f20e(0x197)](this)),this['on'](_0x20f20e(0x20a),this['onStateChange'][_0x20f20e(0x197)](this)),this['on'](_0x20f20e(0x1aa),this[_0x20f20e(0x18e)][_0x20f20e(0x197)](this)),this['on'](_0x20f20e(0x230),this['onMessage'][_0x20f20e(0x197)](this));}async[a0_0x2a2b6f(0x246)](){const _0x4754b3=a0_0x2a2b6f;this[_0x4754b3(0x181)][_0x4754b3(0x17b)](_0x4754b3(0x1f4)+this[_0x4754b3(0x1e2)]+_0x4754b3(0x2ce));if(this[_0x4754b3(0x1d5)]['moduleHealth']!==undefined)this['activeModules']['health']=this[_0x4754b3(0x1d5)][_0x4754b3(0x273)];if(this[_0x4754b3(0x1d5)][_0x4754b3(0x1bb)]!==undefined)this[_0x4754b3(0x236)][_0x4754b3(0x231)]=this[_0x4754b3(0x1d5)][_0x4754b3(0x1bb)];if(this[_0x4754b3(0x1d5)][_0x4754b3(0x174)]!==undefined)this['activeModules'][_0x4754b3(0x1ca)]=this[_0x4754b3(0x1d5)][_0x4754b3(0x174)];if(this['config']['moduleComfort']!==undefined)this[_0x4754b3(0x236)][_0x4754b3(0x292)]=this[_0x4754b3(0x1d5)][_0x4754b3(0x2bf)];if(this[_0x4754b3(0x1d5)]['modules'])this[_0x4754b3(0x236)]={...this[_0x4754b3(0x236)],...this[_0x4754b3(0x1d5)][_0x4754b3(0x290)]};this[_0x4754b3(0x235)]();}async[a0_0x2a2b6f(0x235)](){const _0x1cbcf0=a0_0x2a2b6f;await setup[_0x1cbcf0(0x232)](this);try{this['isProVersion']=await setup[_0x1cbcf0(0x1c2)](this[_0x1cbcf0(0x1d5)][_0x1cbcf0(0x256)]);}catch(_0x475c52){}if(!this[_0x1cbcf0(0x1d5)]['inactivityThresholdHours']||this[_0x1cbcf0(0x1d5)][_0x1cbcf0(0x187)]<0.1)this['config']['inactivityThresholdHours']=0xc;await setup[_0x1cbcf0(0x1ec)](this),await setup[_0x1cbcf0(0x2cb)](this);try{const _0x10e8b9=await this['getStateAsync']('analysis.energy.warmupTimes'),_0x502964=await this[_0x1cbcf0(0x28d)]('analysis.energy.warmupSources');_0x10e8b9&&_0x10e8b9[_0x1cbcf0(0x211)]&&_0x502964&&_0x502964[_0x1cbcf0(0x211)]&&(Date[_0x1cbcf0(0x229)]()-_0x10e8b9['ts']<0x4*0xe10*0x3e8&&(this[_0x1cbcf0(0x1fd)]={'times':JSON[_0x1cbcf0(0x25d)](_0x10e8b9[_0x1cbcf0(0x211)]),'sources':JSON[_0x1cbcf0(0x25d)](_0x502964[_0x1cbcf0(0x211)])}));}catch(_0x2ab652){}if(this[_0x1cbcf0(0x1d5)][_0x1cbcf0(0x1bc)])try{this[_0x1cbcf0(0x29c)]=new GoogleGenerativeAI(this[_0x1cbcf0(0x1d5)][_0x1cbcf0(0x1bc)]),this[_0x1cbcf0(0x1d1)]=this[_0x1cbcf0(0x29c)][_0x1cbcf0(0x194)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x1cbcf0(0x17c)}});}catch(_0x5362a3){this[_0x1cbcf0(0x181)][_0x1cbcf0(0x19b)]('Gemini\x20Init\x20Error:\x20'+_0x5362a3['message']);}await setup['createAllObjects'](this),await this[_0x1cbcf0(0x24e)](),schedulers[_0x1cbcf0(0x2be)](this),await this[_0x1cbcf0(0x1f9)]('analysis.visualization.pulse',{'type':_0x1cbcf0(0x1f8),'common':{'name':_0x1cbcf0(0x19a),'type':_0x1cbcf0(0x2a8),'role':_0x1cbcf0(0x161),'read':!![],'write':![]},'native':{}}),await this[_0x1cbcf0(0x1f9)](_0x1cbcf0(0x1f5),{'type':_0x1cbcf0(0x1f8),'common':{'name':'Room\x20Dwell\x20Time\x20Stats','type':_0x1cbcf0(0x21e),'role':_0x1cbcf0(0x192),'read':!![],'write':![],'def':_0x1cbcf0(0x2d2)},'native':{}}),await this[_0x1cbcf0(0x1f9)](_0x1cbcf0(0x22e),{'type':'state','common':{'name':_0x1cbcf0(0x1e8),'type':_0x1cbcf0(0x21e),'role':'json','read':!![],'write':![],'def':_0x1cbcf0(0x1f3)},'native':{}}),await this['setObjectNotExistsAsync']('analysis.health.geminiNight',{'type':_0x1cbcf0(0x1f8),'common':{'name':_0x1cbcf0(0x28b),'type':'string','role':'text','read':!![],'write':![],'def':_0x1cbcf0(0x190)},'native':{}}),await this[_0x1cbcf0(0x1f9)]('analysis.health.geminiDay',{'type':_0x1cbcf0(0x1f8),'common':{'name':_0x1cbcf0(0x22c),'type':_0x1cbcf0(0x21e),'role':'text','read':!![],'write':![],'def':'Warte\x20auf\x20Analyse...'},'native':{}}),await this[_0x1cbcf0(0x1f9)]('analysis.health.todayVector',{'type':_0x1cbcf0(0x1f8),'common':{'name':_0x1cbcf0(0x168),'type':_0x1cbcf0(0x21e),'role':_0x1cbcf0(0x192),'read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x1cbcf0(0x1f9)]('analysis.health.todayRoomDetails',{'type':_0x1cbcf0(0x1f8),'common':{'name':_0x1cbcf0(0x1b5),'type':_0x1cbcf0(0x21e),'role':_0x1cbcf0(0x192),'read':!![],'write':![],'def':'[]'},'native':{}}),await this['setObjectNotExistsAsync'](_0x1cbcf0(0x15f),{'type':_0x1cbcf0(0x1f8),'common':{'name':_0x1cbcf0(0x16a),'type':'number','role':_0x1cbcf0(0x161),'unit':'%','read':!![],'write':![]},'native':{}}),await this[_0x1cbcf0(0x1f9)]('analysis.energy.warmupTimes',{'type':_0x1cbcf0(0x1f8),'common':{'name':'Warm-Up\x20Time','type':'string','role':_0x1cbcf0(0x192),'read':!![],'write':![]},'native':{}});try{const _0xd500a8=await this[_0x1cbcf0(0x28d)](_0x1cbcf0(0x22d));if(_0xd500a8&&_0xd500a8[_0x1cbcf0(0x211)]){this[_0x1cbcf0(0x2cf)]=JSON[_0x1cbcf0(0x25d)](_0xd500a8[_0x1cbcf0(0x211)]);if(this['isProVersion']){const _0x4e041d=await this['getStateAsync'](_0x1cbcf0(0x237));if(_0x4e041d&&_0x4e041d[_0x1cbcf0(0x211)])this['rawEventLog']=JSON[_0x1cbcf0(0x25d)](_0x4e041d[_0x1cbcf0(0x211)]);}this[_0x1cbcf0(0x181)]['info'](_0x1cbcf0(0x207)+this['eventHistory']['length']+_0x1cbcf0(0x1ee));}}catch(_0x34a281){this[_0x1cbcf0(0x2cf)]=[];}try{const _0x579dfe=await this[_0x1cbcf0(0x28d)]('LTM.dailyDigests');if(_0x579dfe&&_0x579dfe['val'])this[_0x1cbcf0(0x282)]=JSON[_0x1cbcf0(0x25d)](_0x579dfe[_0x1cbcf0(0x211)]);}catch(_0x2f6f33){this[_0x1cbcf0(0x282)]=[];}const _0x42e445=this[_0x1cbcf0(0x282)][_0x1cbcf0(0x18f)]>=(this[_0x1cbcf0(0x1d5)]['minDaysForBaseline']||0x7)?_0x1cbcf0(0x18c)+this['dailyDigests'][_0x1cbcf0(0x18f)]+_0x1cbcf0(0x20b):_0x1cbcf0(0x227)+this[_0x1cbcf0(0x282)][_0x1cbcf0(0x18f)]+'/'+(this[_0x1cbcf0(0x1d5)][_0x1cbcf0(0x204)]||0x7)+')';await this[_0x1cbcf0(0x166)](_0x1cbcf0(0x20d),{'val':_0x42e445,'ack':!![]}),this['subscribeStates'](_0x1cbcf0(0x2cc)),this['subscribeStates'](_0x1cbcf0(0x19d)),this[_0x1cbcf0(0x274)](_0x1cbcf0(0x23c));this[_0x1cbcf0(0x1d5)][_0x1cbcf0(0x164)]&&this[_0x1cbcf0(0x1d5)][_0x1cbcf0(0x24a)]&&this['activeModules'][_0x1cbcf0(0x231)]&&this[_0x1cbcf0(0x184)](this[_0x1cbcf0(0x1d5)][_0x1cbcf0(0x24a)]);const _0x5b896c=this[_0x1cbcf0(0x1d5)][_0x1cbcf0(0x23d)];if(_0x5b896c)for(const _0xb7fd7d of _0x5b896c){await this[_0x1cbcf0(0x1a4)](_0xb7fd7d['id']);}const _0x29d148=this[_0x1cbcf0(0x1d5)]['presenceDevices'];if(_0x29d148)for(const _0x3cb4f5 of _0x29d148){await this[_0x1cbcf0(0x1a4)](_0x3cb4f5);}const _0x4627c6=require(_0x1cbcf0(0x219));if(this[_0x1cbcf0(0x1d0)])this['historyJob'][_0x1cbcf0(0x249)]();this['historyJob']=_0x4627c6[_0x1cbcf0(0x255)](_0x1cbcf0(0x259),()=>{const _0x3fda37=_0x1cbcf0;this[_0x3fda37(0x243)]();}),setTimeout(()=>this[_0x1cbcf0(0x1d8)](),0x1388);if(this['roomIntegratorTimer'])clearInterval(this[_0x1cbcf0(0x21d)]);this[_0x1cbcf0(0x281)](),this[_0x1cbcf0(0x21d)]=setInterval(async()=>{await this['integrateRoomTime']();},0x3c*0x3e8);if(this[_0x1cbcf0(0x29b)])clearInterval(this[_0x1cbcf0(0x29b)]);this['healthTrendInterval']=setInterval(()=>{const _0x1855ac=_0x1cbcf0;this[_0x1855ac(0x198)]&&this['activeModules'][_0x1855ac(0x240)]&&this['runPythonHealthCheck']();},0x4*0x3c*0x3c*0x3e8);if(this[_0x1cbcf0(0x179)])clearInterval(this[_0x1cbcf0(0x179)]);this[_0x1cbcf0(0x236)]['energy']&&(this[_0x1cbcf0(0x179)]=setInterval(()=>{const _0x200cc1=_0x1cbcf0;this[_0x200cc1(0x234)]();},0xf*0x3c*0x3e8),setTimeout(()=>this[_0x1cbcf0(0x234)](),0x2710));if(this['calendarCheckTimer'])clearInterval(this[_0x1cbcf0(0x25b)]);this[_0x1cbcf0(0x1d5)][_0x1cbcf0(0x2c6)]&&this[_0x1cbcf0(0x236)][_0x1cbcf0(0x1ca)]&&(this[_0x1cbcf0(0x25b)]=setInterval(()=>{const _0x358fb3=_0x1cbcf0;automation[_0x358fb3(0x27b)](this);},0x2*0x3c*0x3e8),setTimeout(()=>automation['checkCalendarTriggers'](this),0x3a98));if(this['presenceCheckTimer'])clearInterval(this[_0x1cbcf0(0x1b6)]);this[_0x1cbcf0(0x1d5)]['presenceDevices']&&this[_0x1cbcf0(0x1d5)][_0x1cbcf0(0x1ab)][_0x1cbcf0(0x18f)]>0x0&&(this[_0x1cbcf0(0x1b6)]=setInterval(async()=>{const _0x1f3371=_0x1cbcf0;await this[_0x1f3371(0x1c4)]();},0x3c*0x3e8),setTimeout(async()=>await this[_0x1cbcf0(0x1c4)](),0x1388));const _0x2fbbc8=path['join'](__dirname,_0x1cbcf0(0x1d4),_0x1cbcf0(0x299),_0x1cbcf0(0x180));pythonBridge[_0x1cbcf0(0x294)](this,_0x2fbbc8);}['onUnload'](_0x207a3b){const _0x4aeccc=a0_0x2a2b6f;if(this[_0x4aeccc(0x1d0)])this[_0x4aeccc(0x1d0)]['cancel']();this[_0x4aeccc(0x243)]()[_0x4aeccc(0x2a7)](()=>{const _0x1b2046=_0x4aeccc;if(this[_0x1b2046(0x179)])clearInterval(this[_0x1b2046(0x179)]);if(this['calendarCheckTimer'])clearInterval(this[_0x1b2046(0x25b)]);if(this[_0x1b2046(0x1b6)])clearInterval(this[_0x1b2046(0x1b6)]);if(this[_0x1b2046(0x21d)])clearInterval(this['roomIntegratorTimer']);recorder[_0x1b2046(0x278)](this),pythonBridge[_0x1b2046(0x1bd)](this),_0x207a3b();});}async[a0_0x2a2b6f(0x1d8)](){const _0x1bc845=a0_0x2a2b6f;if(!this[_0x1bc845(0x2cf)]||this[_0x1bc845(0x2cf)][_0x1bc845(0x18f)]===0x0){this[_0x1bc845(0x181)]['warn']('‚ö†\x20Replay\x20skipped:\x20No\x20events\x20in\x20memory.');return;}this[_0x1bc845(0x181)][_0x1bc845(0x17b)]('‚Ü∫\x20Replaying\x20'+this['eventHistory'][_0x1bc845(0x18f)]+_0x1bc845(0x1f2));const _0x522889=new Date()[_0x1bc845(0x272)](0x0,0x0,0x0,0x0),_0x5e1868=_0x1bc845(0x22e);let _0x4ef094={'history':{},'date':new Date()[_0x1bc845(0x2c5)]()};const _0x3a5acf=_0x1bc845(0x277),_0x8a35ae='analysis.health.todayRoomDetails';let _0x203496=new Array(0x30)[_0x1bc845(0x261)](0x0),_0xdf9a3a=Array['from']({'length':0x30},()=>[]);this[_0x1bc845(0x2cf)][_0x1bc845(0x178)](_0x7e2e22=>{const _0x4292fc=_0x1bc845;if(_0x7e2e22[_0x4292fc(0x202)]>=_0x522889){if(recorder[_0x4292fc(0x182)](_0x7e2e22[_0x4292fc(0x1e6)],_0x7e2e22['value'])){const _0x4b71c2=new Date(_0x7e2e22[_0x4292fc(0x202)]),_0x445e2f=_0x4b71c2[_0x4292fc(0x1f0)]()*0x2+(_0x4b71c2['getMinutes']()>=0x1e?0x1:0x0);if(_0x445e2f<0x30){_0x203496[_0x445e2f]++;const _0x34650d=_0x7e2e22[_0x4292fc(0x260)]||_0x7e2e22['name']||'?';let _0x12840c=_0xdf9a3a[_0x445e2f];!_0x12840c['includes'](_0x34650d)&&_0x12840c[_0x4292fc(0x28e)](_0x34650d);}const _0x54d850=_0x4b71c2['getHours']();let _0x5647fc=_0x7e2e22['location']||_0x4292fc(0x17e);const _0x317b5d=(this['config'][_0x4292fc(0x23d)]||[])['find'](_0x257bd2=>_0x257bd2[_0x4292fc(0x260)]===_0x5647fc);if(_0x317b5d)_0x5647fc=_0x317b5d[_0x4292fc(0x260)];if(!_0x4ef094[_0x4292fc(0x2a5)][_0x5647fc])_0x4ef094[_0x4292fc(0x2a5)][_0x5647fc]=new Array(0x18)[_0x4292fc(0x261)](0x0);if(_0x4ef094['history'][_0x5647fc][_0x54d850]<0x3c)_0x4ef094[_0x4292fc(0x2a5)][_0x5647fc][_0x54d850]++;}}});const _0x36aa21=await this[_0x1bc845(0x28d)](_0x5e1868);(!_0x36aa21||!_0x36aa21[_0x1bc845(0x211)]||_0x36aa21['val']==='{}'||_0x36aa21['val'][_0x1bc845(0x26d)](_0x1bc845(0x25e)))&&await this[_0x1bc845(0x166)](_0x5e1868,{'val':JSON[_0x1bc845(0x1fc)](_0x4ef094),'ack':!![]}),await this[_0x1bc845(0x166)](_0x3a5acf,{'val':JSON[_0x1bc845(0x1fc)](_0x203496),'ack':!![]}),await this['setStateAsync'](_0x8a35ae,{'val':JSON[_0x1bc845(0x1fc)](_0xdf9a3a),'ack':!![]}),this[_0x1bc845(0x181)][_0x1bc845(0x17b)]('‚úÖ\x20Dashboard\x20Data\x20(Rooms\x20&\x20Timeline\x20&\x20Details)\x20restored.');}async[a0_0x2a2b6f(0x243)](){const _0x3038bc=a0_0x2a2b6f;if(!this[_0x3038bc(0x236)]['health'])return;const _0x787d0e=new Date()[_0x3038bc(0x17f)]()[_0x3038bc(0x276)]('T')[0x0];this['log']['debug'](_0x3038bc(0x2b4)+_0x787d0e+_0x3038bc(0x1cd));try{const [_0x2fbc3d,_0x17688b,_0x3901e9,_0x6ec37a,_0x362bf9,_0x32eff9]=await Promise[_0x3038bc(0x244)]([this[_0x3038bc(0x28d)](_0x3038bc(0x22e)),this[_0x3038bc(0x28d)](_0x3038bc(0x1ed)),this[_0x3038bc(0x28d)](_0x3038bc(0x173)),this['getStateAsync'](_0x3038bc(0x170)),this[_0x3038bc(0x28d)]('analysis.health.todayVector'),this[_0x3038bc(0x28d)]('analysis.health.activityTrend')]),_0x46b06a=this[_0x3038bc(0x2cf)]['filter'](_0x5a68d4=>_0x5a68d4['timestamp']>=new Date()['setHours'](0x0,0x0,0x0,0x0)&&(_0x5a68d4[_0x3038bc(0x2c7)]['toLowerCase']()[_0x3038bc(0x26d)](_0x3038bc(0x26b))||_0x5a68d4[_0x3038bc(0x2c7)]['toLowerCase']()[_0x3038bc(0x26d)]('terrasse'))&&(_0x5a68d4[_0x3038bc(0x161)]===!![]||_0x5a68d4[_0x3038bc(0x161)]===_0x3038bc(0x1b7)))[_0x3038bc(0x18f)];let _0x1c2b0e=0x55;if(_0x32eff9&&_0x32eff9['val']!==undefined)_0x1c2b0e=Math[_0x3038bc(0x25c)](0x64,Math[_0x3038bc(0x18b)](0x14,Math[_0x3038bc(0x21a)](0x50+Number(_0x32eff9[_0x3038bc(0x211)])*0x5)));const _0x27b0ef={'date':_0x787d0e,'timestamp':Date[_0x3038bc(0x229)](),'roomHistory':_0x2fbc3d?.[_0x3038bc(0x211)]?JSON['parse'](_0x2fbc3d[_0x3038bc(0x211)]):{},'geminiNight':_0x17688b?.[_0x3038bc(0x211)]||_0x3038bc(0x21b),'geminiDay':_0x3901e9?.[_0x3038bc(0x211)]||_0x3038bc(0x21b),'anomalyScore':_0x6ec37a?.['val']||0.1,'todayVector':_0x362bf9?.[_0x3038bc(0x211)]?JSON['parse'](_0x362bf9[_0x3038bc(0x211)]):new Array(0x30)[_0x3038bc(0x261)](0x0),'batteryLevel':_0x1c2b0e,'freshAirCount':_0x46b06a,'eventHistory':this[_0x3038bc(0x2cf)]},_0x10b1b6=utils[_0x3038bc(0x1e9)](),_0x4edb54=path['join'](_0x10b1b6,_0x3038bc(0x1f6),'history');if(!fs[_0x3038bc(0x177)](_0x4edb54))fs[_0x3038bc(0x2aa)](_0x4edb54,{'recursive':!![]});const _0x4323e3=path['join'](_0x4edb54,_0x787d0e+'.json');fs['writeFileSync'](_0x4323e3,JSON[_0x3038bc(0x1fc)](_0x27b0ef)),this[_0x3038bc(0x181)][_0x3038bc(0x17b)](_0x3038bc(0x2ae)+_0x4323e3);}catch(_0x11dc84){this[_0x3038bc(0x181)][_0x3038bc(0x19b)](_0x3038bc(0x16e)+_0x11dc84['message']);}}async[a0_0x2a2b6f(0x281)](){const _0xd6bcde=a0_0x2a2b6f;if(!this['isPresent'])return;try{let _0x13c07f=null;try{const _0x2660ea=await this[_0xd6bcde(0x28d)](_0xd6bcde(0x159)),_0x5a48ee=await this[_0xd6bcde(0x28d)](_0xd6bcde(0x215));if(_0x2660ea&&_0x2660ea['val']&&_0x5a48ee&&_0x5a48ee[_0xd6bcde(0x211)]&&_0x5a48ee['val']>0.3){if(_0x2660ea[_0xd6bcde(0x211)]!==_0xd6bcde(0x17e)&&_0x2660ea[_0xd6bcde(0x211)]!==_0xd6bcde(0x267))_0x13c07f=_0x2660ea[_0xd6bcde(0x211)];}}catch(_0x191ee4){}if(!_0x13c07f){const _0x2d7060=this[_0xd6bcde(0x1d5)][_0xd6bcde(0x23d)]||[];for(const _0x3c3d97 of _0x2d7060){if(_0x3c3d97[_0xd6bcde(0x1e6)]==='motion'&&_0x3c3d97[_0xd6bcde(0x260)])try{const _0x1a43c1=await this[_0xd6bcde(0x1a7)](_0x3c3d97['id']);if(_0x1a43c1&&(_0x1a43c1[_0xd6bcde(0x211)]===!![]||_0x1a43c1[_0xd6bcde(0x211)]==='on'||_0x1a43c1['val']===0x1)){_0x13c07f=_0x3c3d97[_0xd6bcde(0x260)];break;}}catch(_0x352919){}}}if(!_0x13c07f)return;const _0x510a53=this[_0xd6bcde(0x1d5)][_0xd6bcde(0x23d)]||[];let _0x383af0=_0x13c07f;const _0x3ca6d7=_0x510a53[_0xd6bcde(0x18d)](_0x1676dd=>_0x1676dd[_0xd6bcde(0x260)]&&_0x1676dd[_0xd6bcde(0x260)][_0xd6bcde(0x280)]()===_0x13c07f[_0xd6bcde(0x280)]());if(_0x3ca6d7)_0x383af0=_0x3ca6d7['location'];const _0x4c1a79=_0xd6bcde(0x22e),_0x250f91=await this[_0xd6bcde(0x28d)](_0x4c1a79),_0x1a752f=new Date()[_0xd6bcde(0x2c5)]();let _0x4b0072={'history':{},'date':_0x1a752f};if(_0x250f91&&_0x250f91[_0xd6bcde(0x211)])try{_0x4b0072=JSON['parse'](_0x250f91[_0xd6bcde(0x211)]);}catch(_0x490d14){}_0x4b0072['date']!==_0x1a752f&&(_0x4b0072[_0xd6bcde(0x2a5)]={},_0x4b0072['date']=_0x1a752f);if(!_0x4b0072[_0xd6bcde(0x2a5)][_0x383af0])_0x4b0072[_0xd6bcde(0x2a5)][_0x383af0]=new Array(0x18)[_0xd6bcde(0x261)](0x0);const _0xa7bf47=new Date()[_0xd6bcde(0x1f0)]();if(_0x4b0072['history'][_0x383af0][_0xa7bf47]<0x3c)_0x4b0072[_0xd6bcde(0x2a5)][_0x383af0][_0xa7bf47]++;await this[_0xd6bcde(0x166)](_0x4c1a79,{'val':JSON[_0xd6bcde(0x1fc)](_0x4b0072),'ack':!![]});}catch(_0x159780){this[_0xd6bcde(0x181)][_0xd6bcde(0x1fa)](_0xd6bcde(0x27f)+_0x159780[_0xd6bcde(0x230)]);}}async[a0_0x2a2b6f(0x2bc)](_0x183d41){const _0x57f237=a0_0x2a2b6f;if(typeof _0x183d41===_0x57f237(0x2b2)&&_0x183d41[_0x57f237(0x230)]){if(_0x183d41[_0x57f237(0x265)]===_0x57f237(0x2a1)){const _0x2729da=_0x183d41[_0x57f237(0x230)][_0x57f237(0x1a2)],_0x5eb71a=utils[_0x57f237(0x1e9)](),_0x2aae83=path[_0x57f237(0x1f1)](_0x5eb71a,'cogni-living','history',_0x2729da+'.json');if(fs[_0x57f237(0x177)](_0x2aae83))try{const _0xc38da6=JSON[_0x57f237(0x25d)](fs['readFileSync'](_0x2aae83,_0x57f237(0x185)));this[_0x57f237(0x169)](_0x183d41[_0x57f237(0x26a)],_0x183d41[_0x57f237(0x265)],{'success':!![],'data':_0xc38da6},_0x183d41[_0x57f237(0x205)]);}catch(_0x1b4623){this[_0x57f237(0x169)](_0x183d41[_0x57f237(0x26a)],_0x183d41[_0x57f237(0x265)],{'success':![],'error':_0x57f237(0x221)},_0x183d41['callback']);}else this[_0x57f237(0x169)](_0x183d41[_0x57f237(0x26a)],_0x183d41[_0x57f237(0x265)],{'success':![],'error':_0x57f237(0x206)},_0x183d41[_0x57f237(0x205)]);}else{if(_0x183d41[_0x57f237(0x265)]==='getOverviewData'){const _0x4d22f5=this[_0x57f237(0x282)][_0x57f237(0x18f)];let _0xa9e6db=new Array(0x30)['fill'](0x0),_0x1b8540=Array['from']({'length':0x30},()=>[]);try{const _0x5f14ee=await this[_0x57f237(0x28d)](_0x57f237(0x277));if(_0x5f14ee&&_0x5f14ee[_0x57f237(0x211)])_0xa9e6db=JSON[_0x57f237(0x25d)](_0x5f14ee[_0x57f237(0x211)]);const _0x2125f7=await this[_0x57f237(0x28d)](_0x57f237(0x25a));if(_0x2125f7&&_0x2125f7[_0x57f237(0x211)])_0x1b8540=JSON[_0x57f237(0x25d)](_0x2125f7[_0x57f237(0x211)]);}catch(_0x38e6fd){}let _0x387e91=new Array(0x30)[_0x57f237(0x261)](0x0);try{const _0x319897=new Date();_0x319897['setDate'](_0x319897[_0x57f237(0x1b9)]()-0x1);const _0x59315d=_0x319897[_0x57f237(0x17f)]()[_0x57f237(0x276)]('T')[0x0],_0x5ef62d=utils[_0x57f237(0x1e9)](),_0x195ac0=path['join'](_0x5ef62d,_0x57f237(0x1f6),_0x57f237(0x2a5),_0x59315d+_0x57f237(0x1c9));if(fs[_0x57f237(0x177)](_0x195ac0)){const _0x13244f=JSON[_0x57f237(0x25d)](fs['readFileSync'](_0x195ac0,_0x57f237(0x185)));if(_0x13244f&&_0x13244f['todayVector'])_0x387e91=_0x13244f['todayVector'];}}catch(_0x1aeea9){}let _0x877c6c={'today':{},'yesterday':{}};try{const _0x19e747=await this[_0x57f237(0x28d)](_0x57f237(0x1f5));if(_0x19e747&&_0x19e747['val'])_0x877c6c=JSON[_0x57f237(0x25d)](_0x19e747[_0x57f237(0x211)]);}catch(_0x524bba){}let _0x1e23bd=null;try{const _0x3ddce5=await this[_0x57f237(0x28d)]('analysis.health.activityTrend');if(_0x3ddce5)_0x1e23bd=_0x3ddce5[_0x57f237(0x211)];}catch(_0x10ae8d){}if(_0x1e23bd===undefined||_0x1e23bd===null){const _0x1b10c8=_0xa9e6db[_0x57f237(0x26c)]((_0x129f83,_0x44da58)=>_0x129f83+_0x44da58,0x0),_0xa45d45=Math[_0x57f237(0x25c)](0x2,Math[_0x57f237(0x18b)](-0x2,(0x64-_0x1b10c8)/0x32));_0x1e23bd=_0xa45d45;}let _0x39ae8b=![],_0x59a2dd='',_0xec4487='',_0x17113e='';try{const _0x5d92c5=await this[_0x57f237(0x28d)](_0x57f237(0x162));if(_0x5d92c5&&_0x5d92c5[_0x57f237(0x211)]){_0x39ae8b=!![];const _0x34326b=await this[_0x57f237(0x28d)](_0x57f237(0x1fe));_0x59a2dd=_0x34326b?_0x34326b[_0x57f237(0x211)]:'';const _0x2ef647=await this[_0x57f237(0x28d)]('analysis.automation.targetId');_0xec4487=_0x2ef647?_0x2ef647[_0x57f237(0x211)]:'';const _0x1c3977=await this[_0x57f237(0x28d)](_0x57f237(0x1c5));_0x17113e=_0x1c3977?_0x1c3977[_0x57f237(0x211)]:'';}}catch(_0x36322c){}const _0x44376f=await this[_0x57f237(0x295)](),_0x20cec0=(this[_0x57f237(0x1d5)]['devices']||[])[_0x57f237(0x1d3)](_0x28a679=>_0x28a679[_0x57f237(0x188)]),_0xb3fa07=_0x44376f&&_0x20cec0;let _0xa77b56='';try{const _0x5bcb81=await this['getStateAsync'](_0x57f237(0x171));if(_0x5bcb81&&_0x5bcb81[_0x57f237(0x211)])_0xa77b56=_0x5bcb81[_0x57f237(0x211)];}catch(_0x724938){}this['sendTo'](_0x183d41[_0x57f237(0x26a)],_0x183d41['command'],{'success':!![],'eventHistory':this[_0x57f237(0x2cf)][_0x57f237(0x16d)](0x0,0x7d0),'stats':{'digestCount':_0x4d22f5,'isPresent':this[_0x57f237(0x1be)],'hourlyActivity':_0xa9e6db,'hourlyDetails':_0x1b8540,'yesterdayActivity':_0x387e91,'solarActive':_0xb3fa07,'presenceWho':_0xa77b56,'roomStats':_0x877c6c,'activityTrend':_0x1e23bd,'modules':this[_0x57f237(0x236)]},'automation':{'detected':_0x39ae8b,'description':_0x59a2dd,'targetId':_0xec4487,'targetValue':_0x17113e}},_0x183d41[_0x57f237(0x205)]);}else{if(_0x183d41[_0x57f237(0x265)]===_0x57f237(0x1c0))try{const _0xf8e2e0=await automation[_0x57f237(0x1e7)](this);this[_0x57f237(0x169)](_0x183d41['from'],_0x183d41['command'],{'success':!![],'results':_0xf8e2e0},_0x183d41[_0x57f237(0x205)]);}catch(_0x30f8f6){this['sendTo'](_0x183d41[_0x57f237(0x26a)],_0x183d41[_0x57f237(0x265)],{'success':![],'error':_0x30f8f6[_0x57f237(0x230)]},_0x183d41[_0x57f237(0x205)]);}else{if(_0x183d41[_0x57f237(0x265)]===_0x57f237(0x23f))try{const _0x237d33=await scanner[_0x57f237(0x27c)](this,_0x183d41[_0x57f237(0x230)]||{});this['sendTo'](_0x183d41[_0x57f237(0x26a)],_0x183d41[_0x57f237(0x265)],{'success':!![],'devices':_0x237d33},_0x183d41['callback']);}catch(_0x54abf9){}else{if(_0x183d41[_0x57f237(0x265)]===_0x57f237(0x21c)){const _0x43b7d8=await this[_0x57f237(0x2c9)](_0x57f237(0x15d),_0x57f237(0x291)),_0x2386e7=[];if(_0x43b7d8)for(const _0x414070 in _0x43b7d8){let _0x13a7e6=_0x43b7d8[_0x414070][_0x57f237(0x252)][_0x57f237(0x2c7)];if(_0x13a7e6&&typeof _0x13a7e6===_0x57f237(0x2b2))_0x13a7e6=_0x13a7e6['de']||_0x13a7e6['en']||Object[_0x57f237(0x210)](_0x13a7e6)[0x0]||JSON[_0x57f237(0x1fc)](_0x13a7e6);_0x2386e7[_0x57f237(0x28e)]({'id':_0x414070,'name':String(_0x13a7e6||_0x414070)});}const _0x1e9748=await this['getForeignObjectsAsync'](_0x57f237(0x2c4),_0x57f237(0x291)),_0x2dad43=[];if(_0x1e9748)for(const _0x21dcf1 in _0x1e9748){let _0x2bee67=_0x1e9748[_0x21dcf1][_0x57f237(0x252)]['name'];if(_0x2bee67&&typeof _0x2bee67===_0x57f237(0x2b2))_0x2bee67=_0x2bee67['de']||_0x2bee67['en']||Object[_0x57f237(0x210)](_0x2bee67)[0x0]||JSON[_0x57f237(0x1fc)](_0x2bee67);_0x2dad43[_0x57f237(0x28e)](String(_0x2bee67||_0x21dcf1[_0x57f237(0x276)]('.')['pop']()));}this[_0x57f237(0x169)](_0x183d41[_0x57f237(0x26a)],_0x183d41[_0x57f237(0x265)],{'success':!![],'enums':_0x2386e7,'rooms':_0x2dad43},_0x183d41[_0x57f237(0x205)]);}else{if(_0x183d41[_0x57f237(0x265)]===_0x57f237(0x271))try{const _0x27ab77=await this['getObjectViewAsync'](_0x57f237(0x19e),_0x57f237(0x275),{'startkey':'system.adapter.ical.','endkey':'system.adapter.ical.È¶ô'}),_0x5d59ed=new Set();if(_0x27ab77&&_0x27ab77[_0x57f237(0x238)])for(const _0x328506 of _0x27ab77[_0x57f237(0x238)]){const _0x56dc9c=_0x328506['id'][_0x57f237(0x1bf)](_0x57f237(0x239),''),_0x4d9c0c=await this[_0x57f237(0x1a7)](_0x56dc9c+_0x57f237(0x195));let _0xf00ab0=![];if(_0x4d9c0c&&_0x4d9c0c[_0x57f237(0x211)]){const _0x5c29ba=typeof _0x4d9c0c[_0x57f237(0x211)]===_0x57f237(0x21e)?JSON[_0x57f237(0x25d)](_0x4d9c0c[_0x57f237(0x211)]):_0x4d9c0c['val'];Array[_0x57f237(0x228)](_0x5c29ba)&&_0x5c29ba['forEach'](_0x42610e=>{const _0x3aba66=_0x57f237;_0x42610e[_0x3aba66(0x1e1)]&&(_0x5d59ed[_0x3aba66(0x2ac)](_0x42610e[_0x3aba66(0x1e1)]),_0xf00ab0=!![]);});}!_0xf00ab0&&_0x5d59ed[_0x57f237(0x2ac)](_0x56dc9c);}const _0x26d519=Array[_0x57f237(0x26a)](_0x5d59ed);if(_0x26d519[_0x57f237(0x18f)]===0x0)_0x26d519[_0x57f237(0x28e)](_0x57f237(0x2d1));this['sendTo'](_0x183d41[_0x57f237(0x26a)],_0x183d41[_0x57f237(0x265)],{'success':!![],'names':_0x26d519},_0x183d41[_0x57f237(0x205)]);}catch(_0x40df8e){this['sendTo'](_0x183d41[_0x57f237(0x26a)],_0x183d41[_0x57f237(0x265)],{'success':![],'error':_0x57f237(0x22f)+_0x40df8e[_0x57f237(0x230)]},_0x183d41['callback']);}else{if(_0x183d41[_0x57f237(0x265)]===_0x57f237(0x2c8))try{await automation[_0x57f237(0x2c1)](this),this[_0x57f237(0x169)](_0x183d41['from'],_0x183d41[_0x57f237(0x265)],{'success':!![]},_0x183d41[_0x57f237(0x205)]);}catch(_0x23d150){this['log'][_0x57f237(0x1fa)]('refreshCalendar\x20failed:\x20'+_0x23d150['message']),this[_0x57f237(0x169)](_0x183d41[_0x57f237(0x26a)],_0x183d41[_0x57f237(0x265)],{'success':![],'error':_0x23d150[_0x57f237(0x230)]},_0x183d41[_0x57f237(0x205)]);}else{if(_0x183d41[_0x57f237(0x265)]===_0x57f237(0x15b))try{const _0x550ff7=_0x183d41[_0x57f237(0x230)]?_0x183d41[_0x57f237(0x230)][_0x57f237(0x2b7)]:'';if(!_0x550ff7)throw new Error(_0x57f237(0x225));const _0x2da95c=new GoogleGenerativeAI(_0x550ff7),_0x42a662=_0x2da95c['getGenerativeModel']({'model':GEMINI_MODEL}),_0xe9985f=await _0x42a662[_0x57f237(0x1d9)]('Say\x20Hello'),_0x25199f=await _0xe9985f[_0x57f237(0x233)],_0x36ea02=_0x25199f[_0x57f237(0x208)]();this[_0x57f237(0x169)](_0x183d41[_0x57f237(0x26a)],_0x183d41[_0x57f237(0x265)],{'success':!![],'message':_0x57f237(0x200)+_0x36ea02[_0x57f237(0x279)](0x0,0x14)+_0x57f237(0x1cd)},_0x183d41['callback']);}catch(_0x5db3ed){this['sendTo'](_0x183d41[_0x57f237(0x26a)],_0x183d41['command'],{'success':![],'message':_0x5db3ed[_0x57f237(0x230)]},_0x183d41['callback']);}else{if(_0x183d41[_0x57f237(0x265)]===_0x57f237(0x2b5))try{const _0x550f55=await this[_0x57f237(0x295)](),_0x1fbe07=await this[_0x57f237(0x1d6)]('system',_0x57f237(0x275),{'startkey':_0x57f237(0x27e),'endkey':_0x57f237(0x1e3)}),_0xc12fe7=_0x1fbe07&&_0x1fbe07[_0x57f237(0x238)]?_0x1fbe07[_0x57f237(0x238)][_0x57f237(0x18f)]:0x0;this[_0x57f237(0x169)](_0x183d41[_0x57f237(0x26a)],_0x183d41['command'],{'success':!![],'weather':_0x57f237(0x251)+_0x550f55+',\x20Temp:\x20'+(this['sensorLastValues'][this[_0x57f237(0x1d5)]['outdoorSensorId']]||'?')+'¬∞C','calendar':_0xc12fe7+_0x57f237(0x217)},_0x183d41[_0x57f237(0x205)]);}catch(_0x25e75e){this[_0x57f237(0x169)](_0x183d41[_0x57f237(0x26a)],_0x183d41[_0x57f237(0x265)],{'success':![]},_0x183d41[_0x57f237(0x205)]);}}}}}}}}}}}['runPythonHealthCheck'](){const _0x2c0a4d=a0_0x2a2b6f;if(!this[_0x2c0a4d(0x236)][_0x2c0a4d(0x240)])return;this[_0x2c0a4d(0x181)]['debug'](_0x2c0a4d(0x20e));try{const _0x579987=this[_0x2c0a4d(0x2c2)]||[];pythonBridge['send'](this,'CALCULATE_HEALTH_TREND',{'events':_0x579987});}catch(_0x297029){this[_0x2c0a4d(0x181)][_0x2c0a4d(0x1fa)]('Failed\x20to\x20trigger\x20Python\x20Health\x20Check');}}async[a0_0x2a2b6f(0x24b)](_0x12bf87,_0x321ad8){const _0x387ecb=a0_0x2a2b6f;if(!_0x321ad8||this[_0x387ecb(0x15a)])return;if(_0x12bf87[_0x387ecb(0x26d)](_0x387ecb(0x2c0))&&_0x12bf87[_0x387ecb(0x1a6)](_0x387ecb(0x1da))&&_0x321ad8[_0x387ecb(0x211)])return;if(this[_0x387ecb(0x1d5)][_0x387ecb(0x164)]&&_0x12bf87===this[_0x387ecb(0x1d5)][_0x387ecb(0x24a)]&&this[_0x387ecb(0x236)][_0x387ecb(0x231)]){this[_0x387ecb(0x2d0)](_0x321ad8[_0x387ecb(0x211)]);return;}if(_0x321ad8[_0x387ecb(0x24f)]&&_0x12bf87[_0x387ecb(0x1a6)](_0x387ecb(0x199)))return;if(_0x12bf87===this['namespace']+'.system.mode'){if(_0x321ad8['val']&&Object['values'](setup[_0x387ecb(0x16f)])[_0x387ecb(0x26d)](_0x321ad8[_0x387ecb(0x211)])){this[_0x387ecb(0x2a4)]=_0x321ad8[_0x387ecb(0x211)];if(_0x321ad8['val']===setup['SYSTEM_MODES'][_0x387ecb(0x2ca)])await recorder['setPresence'](this,![]);else await recorder[_0x387ecb(0x2b9)](this,!![]);if(this[_0x387ecb(0x198)]){let _0x34fba1=![],_0x1e44ec=0x0,_0x5a6781=_0x387ecb(0x191);if(this['currentSystemMode']===_0x387ecb(0x23e))_0x34fba1=!![],_0x1e44ec=0x168,_0x5a6781=_0x387ecb(0x263);else this['currentSystemMode']===_0x387ecb(0x242)&&(_0x34fba1=!![],_0x1e44ec=0x5a0,_0x5a6781=_0x387ecb(0x285));pythonBridge['send'](this,_0x387ecb(0x287),{'active':_0x34fba1,'duration':_0x1e44ec,'label':_0x5a6781}),await this[_0x387ecb(0x166)](_0x387ecb(0x268),{'val':JSON[_0x387ecb(0x1fc)]({'active':_0x34fba1,'label':_0x5a6781,'timestamp':Date[_0x387ecb(0x229)]()}),'ack':!![]});}}if(!_0x321ad8['ack'])this['setState'](_0x12bf87,{'val':this[_0x387ecb(0x2a4)],'ack':!![]});return;}if(_0x12bf87[_0x387ecb(0x1a6)]('analysis.energy.warmupSources')&&_0x321ad8['ack'])this[_0x387ecb(0x1d2)](_0x321ad8[_0x387ecb(0x211)]);if(_0x12bf87['endsWith'](_0x387ecb(0x196))&&_0x321ad8[_0x387ecb(0x24f)]&&this['activeModules'][_0x387ecb(0x1ca)])automation[_0x387ecb(0x27b)](this);if(!_0x321ad8['ack']){if(_0x12bf87['includes']('analysis.trigger')&&_0x321ad8[_0x387ecb(0x211)]){this[_0x387ecb(0x28c)](_0x12bf87,{'val':![],'ack':!![]}),aiAgent['runGeminiAnalysis'](this);return;}if(_0x12bf87[_0x387ecb(0x26d)](_0x387ecb(0x214))&&_0x321ad8[_0x387ecb(0x211)]){this[_0x387ecb(0x28c)](_0x12bf87,{'val':![],'ack':!![]});if(this['isProVersion'])aiAgent[_0x387ecb(0x189)](this,pythonBridge);return;}if(_0x12bf87[_0x387ecb(0x26d)](_0x387ecb(0x172))&&_0x321ad8[_0x387ecb(0x211)]){this[_0x387ecb(0x28c)](_0x12bf87,{'val':![],'ack':!![]}),aiAgent[_0x387ecb(0x2bd)](this);return;}if(_0x12bf87[_0x387ecb(0x26d)](_0x387ecb(0x1b8))&&_0x321ad8[_0x387ecb(0x211)]){this[_0x387ecb(0x28c)](_0x12bf87,{'val':![],'ack':!![]}),aiAgent['executeAutomationAction'](this);return;}if(_0x12bf87[_0x387ecb(0x26d)](_0x387ecb(0x209))&&_0x321ad8[_0x387ecb(0x211)]){this['setState'](_0x12bf87,{'val':![],'ack':!![]});if(this[_0x387ecb(0x198)])try{const _0x3af1f7=await this[_0x387ecb(0x28d)](_0x387ecb(0x222));if(_0x3af1f7&&_0x3af1f7[_0x387ecb(0x211)]){const _0x26fa93=JSON['parse'](_0x3af1f7[_0x387ecb(0x211)]);this['setStateAsync']('analysis.training.status',{'val':_0x387ecb(0x298),'ack':!![]}),pythonBridge['send'](this,_0x387ecb(0x1ef),{'sequences':_0x26fa93});}}catch(_0xdf6603){}return;}if(_0x12bf87[_0x387ecb(0x26d)](_0x387ecb(0x23c))&&_0x321ad8[_0x387ecb(0x211)]){this[_0x387ecb(0x28c)](_0x12bf87,{'val':![],'ack':!![]});try{aiAgent[_0x387ecb(0x2a3)](this,_0x387ecb(0x186)),setTimeout(()=>aiAgent[_0x387ecb(0x2a3)](this,_0x387ecb(0x20c)),0x2ee0);if(this[_0x387ecb(0x198)]){this[_0x387ecb(0x1cb)]();const _0x49cc9b=await this['getStateAsync'](_0x387ecb(0x27a));if(_0x49cc9b&&_0x49cc9b[_0x387ecb(0x211)])pythonBridge[_0x387ecb(0x1ff)](this,'TRAIN_HEALTH',{'digests':JSON[_0x387ecb(0x25d)](_0x49cc9b[_0x387ecb(0x211)])});}}catch(_0x37c048){this['log'][_0x387ecb(0x1fa)](_0x387ecb(0x22a)+_0x37c048[_0x387ecb(0x230)]);}return;}if(_0x12bf87[_0x387ecb(0x26d)](_0x387ecb(0x226))&&_0x321ad8[_0x387ecb(0x211)]){this[_0x387ecb(0x28c)](_0x12bf87,{'val':![],'ack':!![]}),await this[_0x387ecb(0x234)]();return;}if(_0x12bf87[_0x387ecb(0x26d)]('analysis.training.triggerComfort')&&_0x321ad8[_0x387ecb(0x211)]){this['setState'](_0x12bf87,{'val':![],'ack':!![]});if(this[_0x387ecb(0x198)])try{const _0x383099=await this[_0x387ecb(0x28d)](_0x387ecb(0x237));if(_0x383099&&_0x383099[_0x387ecb(0x211)]){const _0x4c0c8b={};if(this['config']['devices'])this[_0x387ecb(0x1d5)][_0x387ecb(0x23d)]['forEach'](_0x46218f=>{const _0x5fd3f9=_0x387ecb;if(_0x46218f['id']&&_0x46218f['type'])_0x4c0c8b[_0x46218f['id']]=_0x46218f[_0x5fd3f9(0x1e6)];});pythonBridge[_0x387ecb(0x1ff)](this,_0x387ecb(0x1eb),{'events':JSON[_0x387ecb(0x25d)](_0x383099['val']),'deviceMap':_0x4c0c8b});}}catch(_0x104f08){}return;}if(_0x12bf87[_0x387ecb(0x26d)]('analysis.training.triggerTopology')&&_0x321ad8[_0x387ecb(0x211)]){this[_0x387ecb(0x28c)](_0x12bf87,{'val':![],'ack':!![]}),topology[_0x387ecb(0x253)](this);if(this[_0x387ecb(0x198)])try{const _0x4e9762=await this[_0x387ecb(0x28d)](_0x387ecb(0x222));if(_0x4e9762&&_0x4e9762['val'])pythonBridge[_0x387ecb(0x1ff)](this,'TRAIN_TOPOLOGY',{'sequences':JSON[_0x387ecb(0x25d)](_0x4e9762[_0x387ecb(0x211)])});}catch(_0x216bee){}return;}}const _0x5eb253=(this[_0x387ecb(0x1d5)]['devices']||[])['find'](_0x3644ed=>_0x3644ed['id']===_0x12bf87);if(_0x5eb253){const _0x4a9f11=await recorder['processSensorEvent'](this,_0x12bf87,_0x321ad8,_0x5eb253);_0x4a9f11&&this['setState'](_0x387ecb(0x1d7),{'val':Date[_0x387ecb(0x229)](),'ack':!![]});_0x4a9f11&&_0x4a9f11[_0x387ecb(0x1e6)]===_0x387ecb(0x247)&&_0x4a9f11[_0x387ecb(0x260)]&&this[_0x387ecb(0x198)]&&deadMan['updateLocation'](this,_0x4a9f11[_0x387ecb(0x260)]);_0x321ad8[_0x387ecb(0x211)]&&(_0x321ad8[_0x387ecb(0x211)]===!![]||_0x321ad8[_0x387ecb(0x211)]===0x1||String(_0x321ad8[_0x387ecb(0x211)])[_0x387ecb(0x280)]()===_0x387ecb(0x1b7))&&(_0x5eb253['type']&&(_0x5eb253[_0x387ecb(0x1e6)]['includes'](_0x387ecb(0x21f))||_0x5eb253[_0x387ecb(0x1e6)][_0x387ecb(0x26d)](_0x387ecb(0x1b3)))&&this[_0x387ecb(0x160)](_0x5eb253));if(_0x5eb253[_0x387ecb(0x1e6)]===_0x387ecb(0x289)||_0x5eb253[_0x387ecb(0x1e6)]==='thermostat'){if(this[_0x387ecb(0x236)][_0x387ecb(0x1ca)])automation[_0x387ecb(0x1c3)](this);}}}async[a0_0x2a2b6f(0x1d2)](_0x43a827){const _0x4602c1=a0_0x2a2b6f;if(!this[_0x4602c1(0x1fd)]||Date['now']()-this[_0x4602c1(0x288)]>0x493e0)return;try{const _0x5071fa=JSON[_0x4602c1(0x25d)](_0x43a827),_0x28eb29=this[_0x4602c1(0x1fd)][_0x4602c1(0x1dd)];let _0x45dcc0=![];for(const _0x386cf9 in _0x28eb29){if(_0x28eb29[_0x386cf9][_0x4602c1(0x26d)]('AI')&&_0x5071fa[_0x386cf9]&&!_0x5071fa[_0x386cf9][_0x4602c1(0x26d)]('AI')){_0x45dcc0=!![];break;}}_0x45dcc0&&(await this[_0x4602c1(0x166)](_0x4602c1(0x196),{'val':JSON[_0x4602c1(0x1fc)](this[_0x4602c1(0x1fd)]['times']),'ack':!![]}),await this[_0x4602c1(0x166)](_0x4602c1(0x2a0),{'val':JSON[_0x4602c1(0x1fc)](this['memoryCache']['sources']),'ack':!![]}));}catch(_0x3f15fa){}}async[a0_0x2a2b6f(0x24e)](){const _0x42cbbc=a0_0x2a2b6f;try{const _0x3e5222=await this[_0x42cbbc(0x28d)](setup['SYSTEM_DP_MODE']);if(_0x3e5222&&_0x3e5222[_0x42cbbc(0x211)])this[_0x42cbbc(0x2a4)]=_0x3e5222[_0x42cbbc(0x211)];}catch(_0x164e49){this[_0x42cbbc(0x2a4)]=setup[_0x42cbbc(0x16f)][_0x42cbbc(0x28f)];}}async['checkWifiPresence'](){const _0x16226d=a0_0x2a2b6f,_0x1bdb71=this['config'][_0x16226d(0x1ab)]||[];if(_0x1bdb71[_0x16226d(0x18f)]===0x0)return![];const _0x38b0b8=[],_0x3b78ae=Date[_0x16226d(0x229)](),_0x314274=0x5*0x3c*0x3e8;for(const _0x6031b4 of _0x1bdb71){try{let _0x7fd4ec=![];try{const _0x412311=await this['getForeignStateAsync'](_0x6031b4+_0x16226d(0x26e));if(_0x412311&&_0x412311[_0x16226d(0x211)]===!![])_0x7fd4ec=!![];}catch(_0x858b38){}if(!_0x7fd4ec)try{const _0x349589=await this[_0x16226d(0x1a7)](_0x6031b4+_0x16226d(0x175));if(_0x349589&&_0x349589['ts']){const _0x897c6c=_0x3b78ae-_0x349589['ts'];if(_0x897c6c<_0x314274)_0x7fd4ec=!![];}}catch(_0x1ab267){}if(!_0x7fd4ec)try{const _0x28eb15=await this[_0x16226d(0x1a7)](_0x6031b4+'.uptime');if(_0x28eb15&&typeof _0x28eb15[_0x16226d(0x211)]===_0x16226d(0x2a8)&&_0x28eb15[_0x16226d(0x211)]>0x0)_0x7fd4ec=!![];}catch(_0x1ef1cb){}if(!_0x7fd4ec)try{const _0x8e0c86=await this['getForeignStateAsync'](_0x6031b4);if(_0x8e0c86){const _0x3324f5=_0x3b78ae-(_0x8e0c86['ts']||0x0);_0x3324f5<_0x314274&&(_0x8e0c86[_0x16226d(0x211)]===!![]||_0x8e0c86['val']==='online'||_0x8e0c86['val']===0x1)&&(_0x7fd4ec=!![]);}}catch(_0x33a36d){}if(_0x7fd4ec){const _0x1731a0=_0x6031b4['split']('.'),_0x30b87f=_0x1731a0[_0x1731a0[_0x16226d(0x18f)]-0x1]||_0x6031b4;_0x38b0b8['push'](_0x30b87f);}}catch(_0x346c0e){this[_0x16226d(0x181)][_0x16226d(0x1fa)](_0x16226d(0x262)+_0x6031b4+':\x20'+_0x346c0e[_0x16226d(0x230)]);}}const _0x19b710=_0x38b0b8[_0x16226d(0x18f)]>0x0?_0x38b0b8[_0x16226d(0x1f1)](',\x20'):_0x16226d(0x29f);return await this[_0x16226d(0x166)](_0x16226d(0x171),{'val':_0x19b710,'ack':!![]}),_0x38b0b8['length']>0x0;}async['runAutopilot'](){const _0x3d20f5=a0_0x2a2b6f;await aiAgent['runGeminiAnalysis'](this);this['activeModules'][_0x3d20f5(0x240)]&&(this[_0x3d20f5(0x27d)](),this[_0x3d20f5(0x2b0)]());if(this[_0x3d20f5(0x236)][_0x3d20f5(0x1ca)])this[_0x3d20f5(0x234)]();}async[a0_0x2a2b6f(0x295)](){const _0x216b38=a0_0x2a2b6f,_0x1b29e8=[_0x216b38(0x1a3),_0x216b38(0x224),_0x216b38(0x2ba)],_0x270e5e=[_0x216b38(0x1a5),_0x216b38(0x1b4),_0x216b38(0x1a8)];for(const _0x3c5590 of _0x1b29e8){for(const _0x21aaa0 of _0x270e5e){try{const _0x202c58=_0x3c5590+'.'+_0x21aaa0,_0x18c14b=await this[_0x216b38(0x1a7)](_0x202c58);if(_0x18c14b&&_0x18c14b[_0x216b38(0x211)]){const _0x25cbc9=String(_0x18c14b['val'])[_0x216b38(0x280)]();if(_0x25cbc9[_0x216b38(0x26d)](_0x216b38(0x29e))||_0x25cbc9['includes'](_0x216b38(0x1b1))||_0x25cbc9[_0x216b38(0x26d)](_0x216b38(0x1ad))||_0x25cbc9[_0x216b38(0x26d)]('sonn')||_0x25cbc9['includes']('clear'))return this[_0x216b38(0x181)]['debug']('‚òÄÔ∏è\x20Solar\x20Condition:\x20SUNNY\x20detected\x20via\x20'+_0x202c58),!![];}}catch(_0x724bc3){}}}return![];}[a0_0x2a2b6f(0x2b0)](){const _0x258ad8=a0_0x2a2b6f;if(!this[_0x258ad8(0x198)])return;try{this[_0x258ad8(0x28d)](_0x258ad8(0x222),(_0x4d7ba4,_0x361908)=>{const _0x473d53=_0x258ad8;if(_0x4d7ba4||!_0x361908||!_0x361908[_0x473d53(0x211)])return;try{const _0x44804e=JSON[_0x473d53(0x25d)](_0x361908[_0x473d53(0x211)]);if(!_0x44804e||_0x44804e[_0x473d53(0x18f)]===0x0)return;pythonBridge[_0x473d53(0x1ff)](this,_0x473d53(0x29a),{'sequences':_0x44804e}),this[_0x473d53(0x181)][_0x473d53(0x201)](_0x473d53(0x258)+_0x44804e[_0x473d53(0x18f)]+_0x473d53(0x1ae));}catch(_0x27e342){this[_0x473d53(0x181)]['warn']('triggerGaitAnalysis\x20parse\x20error:\x20'+_0x27e342[_0x473d53(0x230)]);}});}catch(_0xe409ba){this['log'][_0x258ad8(0x1fa)](_0x258ad8(0x2af)+_0xe409ba[_0x258ad8(0x230)]);}}async[a0_0x2a2b6f(0x234)](){const _0x205ad6=a0_0x2a2b6f;if(!this['isProVersion']||!this['activeModules'][_0x205ad6(0x1ca)])return;try{const _0x4193c1={},_0x3cdf22={},_0x4272ec=this['config'][_0x205ad6(0x23d)]||[];for(const _0x31a6db of _0x4272ec){if((_0x31a6db['type']===_0x205ad6(0x289)||_0x31a6db[_0x205ad6(0x1e6)]===_0x205ad6(0x22b))&&_0x31a6db[_0x205ad6(0x260)])try{const _0x13a4c8=await this[_0x205ad6(0x1a7)](_0x31a6db['id']);_0x13a4c8&&typeof _0x13a4c8[_0x205ad6(0x211)]===_0x205ad6(0x2a8)&&(_0x4193c1[_0x31a6db[_0x205ad6(0x260)]]=_0x13a4c8[_0x205ad6(0x211)],_0x3cdf22[_0x31a6db[_0x205ad6(0x260)]]=_0x31a6db['isSolar']||![]);}catch(_0x33eb7a){}}let _0x218919=0xa;if(this[_0x205ad6(0x1d5)][_0x205ad6(0x248)])try{const _0x47026=await this[_0x205ad6(0x1a7)](this['config']['weatherTempId']);if(_0x47026&&typeof _0x47026[_0x205ad6(0x211)]===_0x205ad6(0x2a8))_0x218919=_0x47026[_0x205ad6(0x211)];}catch(_0x26daa1){}const _0x411b9f=await this['checkSolarCondition']();let _0x2778cd={};try{const _0x294aaa=await this[_0x205ad6(0x28d)](_0x205ad6(0x167));if(_0x294aaa&&_0x294aaa[_0x205ad6(0x211)])_0x2778cd=JSON[_0x205ad6(0x25d)](_0x294aaa[_0x205ad6(0x211)]);}catch(_0x45a359){}pythonBridge['send'](this,_0x205ad6(0x25f),{'current_temps':_0x4193c1,'t_out':_0x218919,'is_sunny':_0x411b9f,'solar_flags':_0x3cdf22,'warmup_targets':_0x2778cd}),this[_0x205ad6(0x181)][_0x205ad6(0x17b)](_0x205ad6(0x1de)+Object[_0x205ad6(0x1a1)](_0x4193c1)[_0x205ad6(0x18f)]+_0x205ad6(0x270));}catch(_0xd902d2){this[_0x205ad6(0x181)][_0x205ad6(0x1fa)](_0x205ad6(0x257)+_0xd902d2['message']);}}['updateHealthVector'](){const _0x1d4ca3=a0_0x2a2b6f;if(!this['rawEventLog']||this[_0x1d4ca3(0x2c2)][_0x1d4ca3(0x18f)]===0x0)return;const _0x25bbd9=new Array(0x30)[_0x1d4ca3(0x261)](0x0),_0x413126=Array[_0x1d4ca3(0x26a)]({'length':0x30},()=>[]),_0x5c0bd4=new Date()['setHours'](0x0,0x0,0x0,0x0);this[_0x1d4ca3(0x2c2)][_0x1d4ca3(0x178)](_0x4f2493=>{const _0x112898=_0x1d4ca3,_0x43b93e=new Date(_0x4f2493[_0x112898(0x202)]);if(_0x43b93e[_0x112898(0x29d)]()>=_0x5c0bd4){const _0x4e5e65=_0x43b93e[_0x112898(0x1f0)](),_0x4c7b08=_0x43b93e[_0x112898(0x1a0)](),_0x216597=_0x4e5e65*0x2+Math[_0x112898(0x284)](_0x4c7b08/0x1e);_0x216597>=0x0&&_0x216597<0x30&&(_0x25bbd9[_0x216597]++,_0x413126[_0x216597][_0x112898(0x28e)]({'time':_0x43b93e[_0x112898(0x17a)](_0x112898(0x2b8),{'hour':_0x112898(0x212),'minute':_0x112898(0x212)}),'location':_0x4f2493[_0x112898(0x260)]||_0x112898(0x1ea),'type':_0x4f2493['type']||'Event'}));}}),this[_0x1d4ca3(0x166)]('analysis.health.todayVector',{'val':JSON[_0x1d4ca3(0x1fc)](_0x25bbd9),'ack':!![]}),this[_0x1d4ca3(0x166)](_0x1d4ca3(0x25a),{'val':JSON[_0x1d4ca3(0x1fc)](_0x413126),'ack':!![]});}async['handleInfrasound'](_0x56f3f1){const _0x2fae11=a0_0x2a2b6f;if(!this[_0x2fae11(0x1d5)][_0x2fae11(0x164)]||typeof _0x56f3f1!==_0x2fae11(0x2a8))return;const _0x4aa101=this[_0x2fae11(0x1d5)][_0x2fae11(0x26f)]||0.04;this[_0x2fae11(0x16c)][_0x2fae11(0x28e)]({'timestamp':Date[_0x2fae11(0x229)](),'value':_0x56f3f1}),this[_0x2fae11(0x16c)][_0x2fae11(0x18f)]>0x64&&this[_0x2fae11(0x16c)][_0x2fae11(0x203)](),_0x56f3f1>_0x4aa101&&!this[_0x2fae11(0x2c3)]&&(this[_0x2fae11(0x2c3)]=!![],this['log']['warn'](_0x2fae11(0x297)+_0x56f3f1[_0x2fae11(0x223)](0x4)+_0x2fae11(0x1e4)+_0x4aa101+_0x2fae11(0x158)),await this[_0x2fae11(0x1ba)](_0x56f3f1,'threshold_exceeded'),setTimeout(()=>{const _0x49534b=_0x2fae11;this[_0x49534b(0x2c3)]=![];},0x5*0x3c*0x3e8));}async[a0_0x2a2b6f(0x1ba)](_0x2c2ca7,_0x2c8f72){const _0x197d68=a0_0x2a2b6f;if(!this['isPresent']){const _0x1bb92e=this[_0x197d68(0x2cf)][_0x197d68(0x16d)](0x0,0xa),_0x1e190c=_0x1bb92e[_0x197d68(0x1e0)](_0x4a6616=>new Date(_0x4a6616['timestamp'])['toLocaleTimeString'](_0x197d68(0x2b8))+_0x197d68(0x2ad)+(_0x4a6616['location']||_0x197d68(0x17e))+':\x20'+_0x4a6616['name'])[_0x197d68(0x1f1)]('\x0a');this['log'][_0x197d68(0x1fa)](_0x197d68(0x23a)+_0x2c2ca7[_0x197d68(0x223)](0x4)+_0x197d68(0x2cd)+_0x1e190c);if(this['config'][_0x197d68(0x266)])try{const _0x3f2193=await this[_0x197d68(0x1a7)](this[_0x197d68(0x1d5)][_0x197d68(0x266)]);_0x3f2193&&_0x3f2193[_0x197d68(0x211)]===!![]&&(await this[_0x197d68(0x166)](_0x197d68(0x1df),{'val':JSON[_0x197d68(0x1fc)]({'timestamp':Date[_0x197d68(0x229)](),'pressure':_0x2c2ca7['toFixed'](0x4),'eventType':_0x2c8f72,'recentEvents':_0x1bb92e[_0x197d68(0x16d)](0x0,0x3)}),'ack':!![]}),this[_0x197d68(0x181)][_0x197d68(0x19b)](_0x197d68(0x264)));}catch(_0x5a208c){}}else this[_0x197d68(0x181)][_0x197d68(0x201)](_0x197d68(0x24d)+_0x2c2ca7['toFixed'](0x4)+_0x197d68(0x28a));}async[a0_0x2a2b6f(0x160)](_0x25d26a){const _0x321232=a0_0x2a2b6f;if(!_0x25d26a||!_0x25d26a['location'])return;try{const _0x272bd1=(this[_0x321232(0x1d5)][_0x321232(0x23d)]||[])[_0x321232(0x2b6)](_0x3c7fbf=>_0x3c7fbf['location']===_0x25d26a['location']&&(_0x3c7fbf[_0x321232(0x1e6)]==='temperature'||_0x3c7fbf[_0x321232(0x1e6)]===_0x321232(0x22b)));if(_0x272bd1[_0x321232(0x18f)]===0x0)return;const _0x4fc33d=await this[_0x321232(0x1a7)](_0x272bd1[0x0]['id']);if(!_0x4fc33d||typeof _0x4fc33d[_0x321232(0x211)]!=='number')return;const _0x1e0ef5=_0x4fc33d[_0x321232(0x211)];let _0x15215f=null;if(this[_0x321232(0x1d5)][_0x321232(0x248)]){const _0x4b38ac=await this[_0x321232(0x1a7)](this[_0x321232(0x1d5)]['weatherTempId']);_0x4b38ac&&typeof _0x4b38ac[_0x321232(0x211)]===_0x321232(0x2a8)&&(_0x15215f=_0x4b38ac[_0x321232(0x211)]);}if(_0x15215f!==null){const _0x285ad0=Math[_0x321232(0x1cc)](_0x1e0ef5-_0x15215f);_0x285ad0>0x3&&(this['log'][_0x321232(0x201)]('üí®\x20L√ºftung\x20in\x20'+_0x25d26a['location']+':\x20Temp-Differenz\x20'+_0x285ad0['toFixed'](0x1)+_0x321232(0x23b)+_0x1e0ef5+_0x321232(0x216)+_0x15215f+_0x321232(0x241)),await this[_0x321232(0x166)]('analysis.ventilation.lastWindow',{'val':JSON[_0x321232(0x1fc)]({'room':_0x25d26a[_0x321232(0x260)],'timestamp':Date['now'](),'tempDiff':_0x285ad0[_0x321232(0x223)](0x1),'recommendation':_0x285ad0>0x5?_0x321232(0x18a):_0x321232(0x165)}),'ack':!![]}));}}catch(_0xb6cec8){this[_0x321232(0x181)][_0x321232(0x1fa)](_0x321232(0x245)+_0xb6cec8['message']);}}async[a0_0x2a2b6f(0x1c7)](_0xde4f0b){const _0x4dcaff=a0_0x2a2b6f;if(!_0xde4f0b||typeof _0xde4f0b!==_0x4dcaff(0x2b2))return;const _0x5c04f0={'timestamp':_0xde4f0b['timestamp']||Date[_0x4dcaff(0x229)](),'id':_0xde4f0b['id']||Date['now']()[_0x4dcaff(0x254)](),'name':_0xde4f0b[_0x4dcaff(0x2c7)]||'Manual\x20Event','type':_0xde4f0b[_0x4dcaff(0x1e6)]||_0x4dcaff(0x1e5),'location':_0xde4f0b['location']||_0x4dcaff(0x17e),'value':_0xde4f0b['value']||null};this[_0x4dcaff(0x2cf)]['unshift'](_0x5c04f0);if(this[_0x4dcaff(0x2cf)]['length']>0x1388)this[_0x4dcaff(0x2cf)]['pop']();await this[_0x4dcaff(0x166)](_0x4dcaff(0x22d),{'val':JSON[_0x4dcaff(0x1fc)](this[_0x4dcaff(0x2cf)]),'ack':!![]}),this[_0x4dcaff(0x181)][_0x4dcaff(0x201)](_0x4dcaff(0x2bb)+_0x5c04f0[_0x4dcaff(0x2c7)]+'\x20('+_0x5c04f0[_0x4dcaff(0x260)]+')');}[a0_0x2a2b6f(0x193)](_0x1ce279){}}if(require[a0_0x2a2b6f(0x218)]!==module)module['exports']=_0x4c5d35=>new CogniLiving(_0x4c5d35);else new CogniLiving();