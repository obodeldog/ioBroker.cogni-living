const a0_0xd9776a=a0_0x2486;function a0_0x4db8(){const _0x3d0181=['map','getCalendarNames','analysisTimer','cogni-living','object','endsWith','presenceDevices','SET_TOPOLOGY','startSystem','.system.mode','.communicate.request','@iobroker/adapter-core','LTM.dailyDigests','Kein\x20API\x20Key\x20Ã¼bergeben','TRAIN_COMFORT','Instanz\x20nicht\x20gefunden','testNotification','apply','command','analysis.training.status','find','abortExitTimer','updateTopology','main','Adapter','./lib/setup','systemConfig','./lib/recorder','dailyDigests','getForeignStateAsync','updateTopologyMatrix','checkLicense','Standard','analysis.triggerBriefing','subscribeStates','Keine\x20Antwort\x20von\x20Gemini','sendTo','notifyTelegramInstance','scanDevices','1423980hGhlWx','motion','geminiModel','analysisHistory','updateHealthVector','callback','2308670rdoEFJ','genAI','analysis.trigger','currentSystemMode','PREDICT_ENERGY','system.mode','exports','devices','inactivityThresholdHours','triggerBriefing','3MyYdXM','modeResetJob','scanForDevices','triggerDailyDigest','LTM.trainingData.thermodynamics','Test','LTM.trainingData.sequences','getTime','namespace','automation.triggerAction','_calName','dependencyInstallInProgress','getEnums','Kein\x20Kalender-Adapter','getOverviewData','keys','notifyTelegramEnabled','system.presenceWho','stopService','generateContent','setupDriftAnalysisScheduler','onStateChange','location','analysis.training.triggerTopology','cancel','enum.functions.*','bind','communicate.request','initZombies','sort','briefingJob','setupBriefingScheduler','testContext','getForeignObjectAsync','triggerEnergyPrediction','values','telegram','isProVersion','testApiKey','ltmJob','runBaselineDriftAnalysis','onUnload','constructor','setupLtmScheduler','stateChange','getStateAsync','getOutsideTemperatureNumeric','startService','getLtmData','includes','parse','getMinutes','name','SYSTEM_DP_MODE','analysis.training.triggerHealth','calendarName','VACATION','processSensorEvent','enum','getHours','ready','ANALYZE_GAIT','Gemini\x20AI\x20initialized.','LTM.rawEventLog','send','./lib/scanner','Verbindung\x20erfolgreich!','./lib/dead_man','from','isArray','10uNROck','rawEventLog','exitGraceTimer','now','analysisInterval','runGeminiAnalysis','Activity-Level','fill','subscribeForeignStatesAsync','val','response','cogni-living\x20adapter\x20starting\x20(v','geminiApiKey','createDailyDigest','@google/generative-ai','Lernphase\x20(','isPresent','analysis.topology.structure','setPresence','analysis.training.triggerComfort','triggerGaitAnalysis','log','matrix','onReady','ack','join','temperature','Sec-Training\x20started...','setStateAsync','setupModeResetScheduler','getForeignObjectsAsync','common','info','initSystemConfig','toString','4452267pyjBGQ','isGracePeriodActive','version','models/gemini-flash-latest','driftAnalysisTimer','eventHistory','message','type','exitTimer','timestamp','\x20Tage)','1798876lJTrab','Verbunden','SYSTEM_MODES','runPythonHealthCheck','449278jSzNAq','text','NORMAL','42912490yzzNVT','length','setHours','sensorLastValues','enum.rooms.*','toLowerCase','search','Fehler:\x20','lastAlertState','calendarInstance','setState','getGenerativeModel','config','forEach','.data.table','stringify','error','weatherInstance','Aktiv\x20(','18mKUVZd','add','debug','updated','updateLocation','push','minDaysForBaseline','activityLevel','runAutopilot','5736344dGTTOj','onMessage','LTM.baselineStatus','(((.+)+)+)+$','ANALYZE_TREND','executeAutomationAction','checkWifiPresence'];a0_0x4db8=function(){return _0x3d0181;};return a0_0x4db8();}(function(_0x2115d6,_0x3e19e9){const _0xf52fc0=a0_0x2486,_0x458801=_0x2115d6();while(!![]){try{const _0x2ccddd=parseInt(_0xf52fc0(0x190))/0x1*(parseInt(_0xf52fc0(0x133))/0x2)+parseInt(_0xf52fc0(0x1f9))/0x3+-parseInt(_0xf52fc0(0x12f))/0x4*(-parseInt(_0xf52fc0(0x1d6))/0x5)+parseInt(_0xf52fc0(0x180))/0x6+parseInt(_0xf52fc0(0x186))/0x7+-parseInt(_0xf52fc0(0x152))/0x8*(-parseInt(_0xf52fc0(0x149))/0x9)+-parseInt(_0xf52fc0(0x136))/0xa;if(_0x2ccddd===_0x3e19e9)break;else _0x458801['push'](_0x458801['shift']());}catch(_0x263d31){_0x458801['push'](_0x458801['shift']());}}}(a0_0x4db8,0xbb5bd));const a0_0x78c32b=(function(){let _0x5b37c4=!![];return function(_0x2683b3,_0x1c55d3){const _0x43aeb8=_0x5b37c4?function(){const _0x17c3f6=a0_0x2486;if(_0x1c55d3){const _0x3103ba=_0x1c55d3[_0x17c3f6(0x16a)](_0x2683b3,arguments);return _0x1c55d3=null,_0x3103ba;}}:function(){};return _0x5b37c4=![],_0x43aeb8;};}()),a0_0x397146=a0_0x78c32b(this,function(){const _0x5f5ab2=a0_0x2486;return a0_0x397146[_0x5f5ab2(0x1f8)]()[_0x5f5ab2(0x13c)](_0x5f5ab2(0x155))[_0x5f5ab2(0x1f8)]()[_0x5f5ab2(0x1ba)](a0_0x397146)[_0x5f5ab2(0x13c)](_0x5f5ab2(0x155));});a0_0x397146();'use strict';const utils=require(a0_0xd9776a(0x164)),{GoogleGenerativeAI}=require(a0_0xd9776a(0x1e4)),installer=require('./lib/installer'),scanner=require(a0_0xd9776a(0x1d1)),schedulers=require('./lib/scheduler'),topology=require('./lib/topology'),setup=require(a0_0xd9776a(0x172)),recorder=require(a0_0xd9776a(0x174)),pythonBridge=require('./lib/python_bridge'),aiAgent=require('./lib/ai_agent'),deadMan=require(a0_0xd9776a(0x1d3)),GEMINI_MODEL=a0_0xd9776a(0x127),ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};class CogniLiving extends utils[a0_0xd9776a(0x171)]{constructor(_0x4fc843){const _0x30e00f=a0_0xd9776a;super({..._0x4fc843,'name':_0x30e00f(0x15c)}),this[_0x30e00f(0x129)]=[],this['analysisHistory']=[],this[_0x30e00f(0x1d7)]=[],this[_0x30e00f(0x175)]=[],this[_0x30e00f(0x139)]={},this[_0x30e00f(0x173)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x30e00f(0x1e6)]=!![],this['exitTimer']=null,this[_0x30e00f(0x1d8)]=null,this[_0x30e00f(0x125)]=![],this[_0x30e00f(0x187)]=null,this[_0x30e00f(0x182)]=null,this['currentSystemMode']=setup['SYSTEM_MODES'][_0x30e00f(0x135)],this[_0x30e00f(0x1b5)]=![],this[_0x30e00f(0x13e)]=![],this['analysisTimer']=null,this['ltmJob']=null,this['modeResetJob']=null,this[_0x30e00f(0x128)]=null,this[_0x30e00f(0x1ae)]=null,this[_0x30e00f(0x19b)]=![],this['on'](_0x30e00f(0x1cc),this[_0x30e00f(0x1ed)][_0x30e00f(0x1aa)](this)),this['on'](_0x30e00f(0x1bc),this[_0x30e00f(0x1a5)][_0x30e00f(0x1aa)](this)),this['on']('unload',this[_0x30e00f(0x1b9)][_0x30e00f(0x1aa)](this)),this['on'](_0x30e00f(0x12a),this[_0x30e00f(0x153)][_0x30e00f(0x1aa)](this));}async[a0_0xd9776a(0x1ed)](){const _0x5dd62d=a0_0xd9776a;this[_0x5dd62d(0x1eb)][_0x5dd62d(0x1f6)](_0x5dd62d(0x1e1)+this[_0x5dd62d(0x126)]+')\x20-\x20Phase\x20C\x20(Hardened)');if(!installer['checkAndInstall'](this,()=>this[_0x5dd62d(0x161)]()))return;}async[a0_0xd9776a(0x161)](){const _0x21743c=a0_0xd9776a;await setup[_0x21743c(0x1ac)](this);try{this['isProVersion']=await setup[_0x21743c(0x178)](this['config']['licenseKey']);}catch(_0x2685a6){}if(!this[_0x21743c(0x142)][_0x21743c(0x18e)]||this[_0x21743c(0x142)][_0x21743c(0x18e)]<0.1)this['config'][_0x21743c(0x18e)]=0xc;await setup['initHistory'](this),await setup[_0x21743c(0x1f7)](this);if(this[_0x21743c(0x142)][_0x21743c(0x1e2)])try{this[_0x21743c(0x187)]=new GoogleGenerativeAI(this[_0x21743c(0x142)][_0x21743c(0x1e2)]),this[_0x21743c(0x182)]=this[_0x21743c(0x187)][_0x21743c(0x141)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':'application/json'}}),this[_0x21743c(0x1eb)][_0x21743c(0x1f6)](_0x21743c(0x1ce));}catch(_0x1cff87){this['log']['error']('Gemini\x20Init\x20Error:\x20'+_0x1cff87[_0x21743c(0x12a)]);}await setup['createAllObjects'](this),await this['loadSystemMode']();try{const _0x26ca11=await this[_0x21743c(0x1bd)](_0x21743c(0x1cf));if(_0x26ca11&&_0x26ca11[_0x21743c(0x1df)])this[_0x21743c(0x1d7)]=JSON[_0x21743c(0x1c2)](_0x26ca11[_0x21743c(0x1df)]);}catch(_0x21fc17){this[_0x21743c(0x1d7)]=[];}try{const _0x5f1589=await this['getStateAsync']('LTM.dailyDigests');if(_0x5f1589&&_0x5f1589[_0x21743c(0x1df)])this[_0x21743c(0x175)]=JSON[_0x21743c(0x1c2)](_0x5f1589[_0x21743c(0x1df)]);}catch(_0x31c8a7){this[_0x21743c(0x175)]=[];}const _0x7d83b8=this['dailyDigests'][_0x21743c(0x137)]>=(this['config'][_0x21743c(0x14f)]||0x7)?_0x21743c(0x148)+this['dailyDigests']['length']+_0x21743c(0x12e):_0x21743c(0x1e5)+this[_0x21743c(0x175)][_0x21743c(0x137)]+'/'+(this[_0x21743c(0x142)][_0x21743c(0x14f)]||0x7)+')';await this[_0x21743c(0x1f2)](_0x21743c(0x154),{'val':_0x7d83b8,'ack':!![]}),this[_0x21743c(0x17b)](_0x21743c(0x188)),this[_0x21743c(0x17b)]('LTM.triggerDailyDigest'),this[_0x21743c(0x17b)](_0x21743c(0x18b)),this['subscribeStates'](_0x21743c(0x17a)),this[_0x21743c(0x17b)]('analysis.automation.triggerAction'),this[_0x21743c(0x17b)]('analysis.automation.autoApply'),this[_0x21743c(0x17b)]('analysis.training.triggerSecurity'),this[_0x21743c(0x17b)](_0x21743c(0x1c6)),this[_0x21743c(0x17b)]('analysis.training.triggerEnergy'),this[_0x21743c(0x17b)](_0x21743c(0x1e9)),this['subscribeStates'](_0x21743c(0x1a7));const _0xf1fea7=this[_0x21743c(0x142)][_0x21743c(0x18d)];if(_0xf1fea7)for(const _0x16532f of _0xf1fea7){await this['subscribeForeignStatesAsync'](_0x16532f['id']);}const _0x44d4e1=this[_0x21743c(0x142)]['presenceDevices'];if(_0x44d4e1)for(const _0x4d8532 of _0x44d4e1){await this['subscribeForeignStatesAsync'](_0x4d8532);}if(this[_0x21743c(0x142)][_0x21743c(0x1a0)]&&this[_0x21743c(0x142)][_0x21743c(0x17e)])await this[_0x21743c(0x1de)](this[_0x21743c(0x142)]['notifyTelegramInstance']+_0x21743c(0x163));setTimeout(()=>this['checkWifiPresence'](),0x1388);if(this[_0x21743c(0x15b)])clearInterval(this[_0x21743c(0x15b)]);const _0x278cc7=this[_0x21743c(0x142)][_0x21743c(0x1da)]||0xf;_0x278cc7>0x0&&(this[_0x21743c(0x15b)]=setInterval(()=>{this['runAutopilot']();},_0x278cc7*0x3c*0x3e8)),schedulers[_0x21743c(0x1bb)](this,()=>aiAgent[_0x21743c(0x1e3)](this,pythonBridge)),schedulers[_0x21743c(0x1f3)](this),schedulers[_0x21743c(0x1a4)](this,()=>aiAgent[_0x21743c(0x1b8)](this)),schedulers[_0x21743c(0x1af)](this,()=>aiAgent['sendMorningBriefing'](this)),pythonBridge[_0x21743c(0x1bf)](this,installer['PYTHON_EXE']),setTimeout(async()=>{const _0x2284d2=_0x21743c;await topology[_0x2284d2(0x16f)](this);try{const _0x4adbe2=await this['getStateAsync']('analysis.topology.structure');if(_0x4adbe2&&_0x4adbe2[_0x2284d2(0x1df)])pythonBridge[_0x2284d2(0x1d0)](this,_0x2284d2(0x160),JSON['parse'](_0x4adbe2[_0x2284d2(0x1df)]));}catch(_0x3d539c){}this[_0x2284d2(0x132)](),this[_0x2284d2(0x1ea)](),this[_0x2284d2(0x1b2)](),this[_0x2284d2(0x184)]();},0x1388);}['onUnload'](_0x92fbb9){const _0xfd78cc=a0_0xd9776a;if(this[_0xfd78cc(0x15b)])clearInterval(this[_0xfd78cc(0x15b)]);if(this[_0xfd78cc(0x128)])clearInterval(this[_0xfd78cc(0x128)]);if(this[_0xfd78cc(0x1b7)])this['ltmJob'][_0xfd78cc(0x1a8)]();if(this[_0xfd78cc(0x191)])this[_0xfd78cc(0x191)][_0xfd78cc(0x1a8)]();if(this['briefingJob'])this[_0xfd78cc(0x1ae)][_0xfd78cc(0x1a8)]();recorder['abortExitTimer'](this),pythonBridge[_0xfd78cc(0x1a2)](this),_0x92fbb9();}async[a0_0xd9776a(0x1a5)](_0x31aea5,_0x569c31){const _0x127818=a0_0xd9776a;if(!_0x569c31||this[_0x127818(0x19b)])return;if(_0x31aea5[_0x127818(0x1c1)](_0x127818(0x1b4))&&_0x31aea5[_0x127818(0x15e)](_0x127818(0x1ab))&&_0x569c31[_0x127818(0x1df)])return;if(_0x31aea5===this[_0x127818(0x198)]+_0x127818(0x162)){if(_0x569c31[_0x127818(0x1df)]&&Object[_0x127818(0x1b3)](setup[_0x127818(0x131)])[_0x127818(0x1c1)](_0x569c31[_0x127818(0x1df)])){this[_0x127818(0x189)]=_0x569c31[_0x127818(0x1df)];if(_0x569c31[_0x127818(0x1df)]===setup[_0x127818(0x131)][_0x127818(0x1c8)])await recorder[_0x127818(0x1e8)](this,![]);else await recorder[_0x127818(0x1e8)](this,!![]);}if(!_0x569c31['ack'])this[_0x127818(0x140)](_0x31aea5,{'val':this[_0x127818(0x189)],'ack':!![]});return;}if(!_0x569c31[_0x127818(0x1ee)]){_0x31aea5[_0x127818(0x1c1)](_0x127818(0x188))&&_0x569c31[_0x127818(0x1df)]&&(this[_0x127818(0x140)](_0x31aea5,{'val':![],'ack':!![]}),aiAgent['runGeminiAnalysis'](this));if(_0x31aea5['includes'](_0x127818(0x193))&&_0x569c31['val']){this[_0x127818(0x140)](_0x31aea5,{'val':![],'ack':!![]});if(this['isProVersion'])aiAgent[_0x127818(0x1e3)](this,pythonBridge);}_0x31aea5['includes'](_0x127818(0x18f))&&_0x569c31[_0x127818(0x1df)]&&(this[_0x127818(0x140)](_0x31aea5,{'val':![],'ack':!![]}),aiAgent['sendMorningBriefing'](this));_0x31aea5[_0x127818(0x1c1)](_0x127818(0x199))&&_0x569c31['val']&&(this['setState'](_0x31aea5,{'val':![],'ack':!![]}),aiAgent[_0x127818(0x157)](this));if(_0x31aea5[_0x127818(0x1c1)]('analysis.training.triggerSecurity')&&_0x569c31[_0x127818(0x1df)]){this[_0x127818(0x140)](_0x31aea5,{'val':![],'ack':!![]});if(this[_0x127818(0x1b5)])try{const _0x4ec3a1=await this[_0x127818(0x1bd)](_0x127818(0x196));if(_0x4ec3a1&&_0x4ec3a1[_0x127818(0x1df)]){const _0x58aea3=JSON['parse'](_0x4ec3a1['val']);this[_0x127818(0x1f2)](_0x127818(0x16c),{'val':_0x127818(0x1f1),'ack':!![]}),pythonBridge[_0x127818(0x1d0)](this,'TRAIN_SECURITY',{'sequences':_0x58aea3});}}catch(_0x4307aa){}}if(_0x31aea5[_0x127818(0x1c1)](_0x127818(0x1c6))&&_0x569c31[_0x127818(0x1df)]){this['setState'](_0x31aea5,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x1c739e=await this[_0x127818(0x1bd)](_0x127818(0x165));if(_0x1c739e&&_0x1c739e['val'])pythonBridge['send'](this,'TRAIN_HEALTH',{'digests':JSON[_0x127818(0x1c2)](_0x1c739e[_0x127818(0x1df)])});}catch(_0x3a7cdb){}}if(_0x31aea5['includes']('analysis.training.triggerEnergy')&&_0x569c31['val']){this[_0x127818(0x140)](_0x31aea5,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x39e8e7=await this[_0x127818(0x1bd)](_0x127818(0x194));if(_0x39e8e7&&_0x39e8e7[_0x127818(0x1df)])pythonBridge[_0x127818(0x1d0)](this,'TRAIN_ENERGY',{'points':JSON[_0x127818(0x1c2)](_0x39e8e7['val'])});}catch(_0x110b64){}}if(_0x31aea5[_0x127818(0x1c1)](_0x127818(0x1e9))&&_0x569c31[_0x127818(0x1df)]){this[_0x127818(0x140)](_0x31aea5,{'val':![],'ack':!![]});if(this[_0x127818(0x1b5)])try{const _0x5bccaa=await this[_0x127818(0x1bd)](_0x127818(0x1cf));if(_0x5bccaa&&_0x5bccaa[_0x127818(0x1df)])pythonBridge[_0x127818(0x1d0)](this,_0x127818(0x167),{'events':JSON[_0x127818(0x1c2)](_0x5bccaa[_0x127818(0x1df)])});}catch(_0x3cfee2){}}_0x31aea5['includes']('analysis.training.triggerTopology')&&_0x569c31[_0x127818(0x1df)]&&(this[_0x127818(0x140)](_0x31aea5,{'val':![],'ack':!![]}),topology['updateTopology'](this));return;}if(this[_0x127818(0x142)][_0x127818(0x15f)]&&this[_0x127818(0x142)][_0x127818(0x15f)][_0x127818(0x1c1)](_0x31aea5)){await this[_0x127818(0x158)]();return;}const _0xf0f260=(this[_0x127818(0x142)][_0x127818(0x18d)]||[])[_0x127818(0x16d)](_0x1488d5=>_0x1488d5['id']===_0x31aea5);if(_0xf0f260){const _0x59a7ba=await recorder[_0x127818(0x1c9)](this,_0x31aea5,_0x569c31,_0xf0f260);_0x59a7ba&&_0x59a7ba[_0x127818(0x12b)]===_0x127818(0x181)&&_0x59a7ba[_0x127818(0x1a6)]&&this['isProVersion']&&deadMan[_0x127818(0x14d)](this,_0x59a7ba[_0x127818(0x1a6)]);}}async[a0_0xd9776a(0x153)](_0x2d8590){const _0x2797bb=a0_0xd9776a;if(typeof _0x2d8590===_0x2797bb(0x15d)&&_0x2d8590['message']){if(_0x2d8590['command']===_0x2797bb(0x1b6))try{const _0x44e92c=_0x2d8590['message']['apiKey'];if(!_0x44e92c)throw new Error(_0x2797bb(0x166));const _0x5261ff=new GoogleGenerativeAI(_0x44e92c),_0xc57597=_0x5261ff[_0x2797bb(0x141)]({'model':GEMINI_MODEL}),_0x5803fd=await _0xc57597[_0x2797bb(0x1a3)](_0x2797bb(0x195)),_0x2598a8=await _0x5803fd[_0x2797bb(0x1e0)];if(_0x2598a8[_0x2797bb(0x134)]())this[_0x2797bb(0x17d)](_0x2d8590['from'],_0x2d8590['command'],{'success':!![],'message':_0x2797bb(0x1d2)},_0x2d8590[_0x2797bb(0x185)]);else throw new Error(_0x2797bb(0x17c));}catch(_0x46b6d1){this[_0x2797bb(0x17d)](_0x2d8590['from'],_0x2d8590[_0x2797bb(0x16b)],{'success':![],'message':_0x46b6d1['message']},_0x2d8590['callback']);}else{if(_0x2d8590[_0x2797bb(0x16b)]===_0x2797bb(0x17f))try{const _0x5a615d=await scanner[_0x2797bb(0x192)](this,_0x2d8590[_0x2797bb(0x12a)]||{});this['sendTo'](_0x2d8590[_0x2797bb(0x1d4)],_0x2d8590[_0x2797bb(0x16b)],{'success':!![],'devices':_0x5a615d},_0x2d8590['callback']);}catch(_0x3bc1fc){this[_0x2797bb(0x17d)](_0x2d8590[_0x2797bb(0x1d4)],_0x2d8590['command'],{'success':![],'error':_0x3bc1fc[_0x2797bb(0x12a)]},_0x2d8590[_0x2797bb(0x185)]);}else{if(_0x2d8590[_0x2797bb(0x16b)]===_0x2797bb(0x177))try{const {matrix:_0x47a2e8}=_0x2d8590[_0x2797bb(0x12a)],_0x41a98e=await this[_0x2797bb(0x1bd)](_0x2797bb(0x1e7));if(_0x41a98e&&_0x41a98e[_0x2797bb(0x1df)]){const _0x489db3=JSON[_0x2797bb(0x1c2)](_0x41a98e['val']);_0x489db3[_0x2797bb(0x1ec)]=_0x47a2e8,_0x489db3[_0x2797bb(0x14c)]=Date[_0x2797bb(0x1d9)](),await this[_0x2797bb(0x1f2)](_0x2797bb(0x1e7),{'val':JSON[_0x2797bb(0x145)](_0x489db3),'ack':!![]}),pythonBridge[_0x2797bb(0x1d0)](this,_0x2797bb(0x160),_0x489db3);}this[_0x2797bb(0x17d)](_0x2d8590[_0x2797bb(0x1d4)],_0x2d8590[_0x2797bb(0x16b)],{'success':!![]},_0x2d8590[_0x2797bb(0x185)]);}catch(_0x418072){this[_0x2797bb(0x1eb)][_0x2797bb(0x146)](_0x418072);}else{if(_0x2d8590[_0x2797bb(0x16b)]===_0x2797bb(0x1c0))this['sendTo'](_0x2d8590[_0x2797bb(0x1d4)],_0x2d8590[_0x2797bb(0x16b)],{'success':!![],'dailyDigests':this[_0x2797bb(0x175)]||[],'analysisHistory':this[_0x2797bb(0x183)]||[]},_0x2d8590[_0x2797bb(0x185)]);else{if(_0x2d8590[_0x2797bb(0x16b)]===_0x2797bb(0x19e)){const _0x254601=this[_0x2797bb(0x175)][_0x2797bb(0x137)],_0x2b1c8a=new Array(0x18)[_0x2797bb(0x1dd)](0x0),_0x4e1c93=new Date()[_0x2797bb(0x138)](0x0,0x0,0x0,0x0);this[_0x2797bb(0x129)]&&this[_0x2797bb(0x129)][_0x2797bb(0x143)](_0x423098=>{const _0x14f4fa=_0x2797bb;if(_0x423098[_0x14f4fa(0x12d)]>=_0x4e1c93){const _0x49b510=new Date(_0x423098[_0x14f4fa(0x12d)])[_0x14f4fa(0x1cb)]();if(_0x49b510>=0x0&&_0x49b510<0x18)_0x2b1c8a[_0x49b510]++;}}),this[_0x2797bb(0x17d)](_0x2d8590[_0x2797bb(0x1d4)],_0x2d8590['command'],{'success':!![],'eventHistory':this['eventHistory']['slice'](0x0,0xf),'stats':{'digestCount':_0x254601,'isPresent':this[_0x2797bb(0x1e6)],'hourlyActivity':_0x2b1c8a},'automation':{'detected':![]}},_0x2d8590[_0x2797bb(0x185)]);}else{if(_0x2d8590[_0x2797bb(0x16b)]===_0x2797bb(0x19c)){const _0x435574=await this[_0x2797bb(0x1f4)](_0x2797bb(0x1a9),'enum'),_0x1e99b1=[];if(_0x435574)for(const _0x16d6ee in _0x435574){const _0xa41acc=_0x435574[_0x16d6ee],_0xf5bf56=(_0xa41acc[_0x2797bb(0x1f5)]&&typeof _0xa41acc['common'][_0x2797bb(0x1c4)]===_0x2797bb(0x15d)?_0xa41acc['common'][_0x2797bb(0x1c4)]['de']:_0xa41acc[_0x2797bb(0x1f5)][_0x2797bb(0x1c4)])||_0xa41acc[_0x2797bb(0x1f5)]['name'];_0x1e99b1[_0x2797bb(0x14e)]({'id':_0x16d6ee,'name':_0xf5bf56});}const _0x4a35a6=await this[_0x2797bb(0x1f4)](_0x2797bb(0x13a),_0x2797bb(0x1ca)),_0xf1eaa8=[];if(_0x4a35a6)for(const _0x2f741d in _0x4a35a6){const _0x51e9c5=_0x4a35a6[_0x2f741d],_0x2c631a=(_0x51e9c5['common']&&typeof _0x51e9c5['common'][_0x2797bb(0x1c4)]==='object'?_0x51e9c5[_0x2797bb(0x1f5)][_0x2797bb(0x1c4)]['de']:_0x51e9c5[_0x2797bb(0x1f5)][_0x2797bb(0x1c4)])||_0x2f741d['split']('.')['pop']();_0xf1eaa8[_0x2797bb(0x14e)](_0x2c631a);}this[_0x2797bb(0x17d)](_0x2d8590[_0x2797bb(0x1d4)],_0x2d8590[_0x2797bb(0x16b)],{'success':!![],'enums':_0x1e99b1,'rooms':_0xf1eaa8},_0x2d8590[_0x2797bb(0x185)]);}else{if(_0x2d8590[_0x2797bb(0x16b)]===_0x2797bb(0x1b0))try{let _0x519caf='Kein\x20Wetter-Adapter',_0x466e0b=_0x2797bb(0x19d);if(this[_0x2797bb(0x142)][_0x2797bb(0x147)]){const _0x2befb9=await recorder[_0x2797bb(0x1be)](this);_0x519caf=_0x2befb9!==null?_0x2befb9+'Â°C':'Daten\x20nicht\x20verfÃ¼gbar';}if(this[_0x2797bb(0x142)][_0x2797bb(0x13f)]){const _0x3ebcf7=await this[_0x2797bb(0x1b1)]('system.adapter.'+this[_0x2797bb(0x142)]['calendarInstance']);_0x466e0b=_0x3ebcf7?_0x2797bb(0x130):_0x2797bb(0x168);}this['sendTo'](_0x2d8590[_0x2797bb(0x1d4)],_0x2d8590[_0x2797bb(0x16b)],{'success':!![],'weather':_0x519caf,'calendar':_0x466e0b},_0x2d8590[_0x2797bb(0x185)]);}catch(_0x564f4b){this['sendTo'](_0x2d8590['from'],_0x2d8590[_0x2797bb(0x16b)],{'success':![],'error':_0x564f4b[_0x2797bb(0x12a)]},_0x2d8590[_0x2797bb(0x185)]);}else{if(_0x2d8590[_0x2797bb(0x16b)]===_0x2797bb(0x15a))try{const _0xa0ddff=_0x2d8590['message']['instance'],_0x532a4b=await this['getForeignStateAsync'](_0xa0ddff+_0x2797bb(0x144));let _0x4ec47a=[];if(_0x532a4b&&_0x532a4b['val']){const _0x15244e=JSON[_0x2797bb(0x1c2)](_0x532a4b['val']),_0x218239=new Set();Array[_0x2797bb(0x1d5)](_0x15244e)&&_0x15244e['forEach'](_0xa3ac14=>{const _0x194c74=_0x2797bb;if(_0xa3ac14[_0x194c74(0x19a)])_0x218239[_0x194c74(0x14a)](_0xa3ac14[_0x194c74(0x19a)]);else{if(_0xa3ac14[_0x194c74(0x1c7)])_0x218239['add'](_0xa3ac14[_0x194c74(0x1c7)]);}}),_0x4ec47a=Array['from'](_0x218239)[_0x2797bb(0x1ad)]();}if(_0x4ec47a['length']===0x0)_0x4ec47a=[_0x2797bb(0x179)];this[_0x2797bb(0x17d)](_0x2d8590['from'],_0x2d8590[_0x2797bb(0x16b)],{'success':!![],'names':_0x4ec47a},_0x2d8590[_0x2797bb(0x185)]);}catch(_0xca7271){this['sendTo'](_0x2d8590[_0x2797bb(0x1d4)],_0x2d8590['command'],{'success':![],'error':_0xca7271[_0x2797bb(0x12a)]},_0x2d8590[_0x2797bb(0x185)]);}else{if(_0x2d8590['command']===_0x2797bb(0x169))try{await setup['sendNotification'](this,'ðŸ””\x20Dies\x20ist\x20ein\x20Test\x20von\x20Cogni-Living.',![],![]),this['sendTo'](_0x2d8590['from'],_0x2d8590[_0x2797bb(0x16b)],{'success':!![],'message':'Gesendet'},_0x2d8590['callback']);}catch(_0xfcedfc){this[_0x2797bb(0x1eb)]['error']('Notification\x20Test\x20Failed:\x20'+_0xfcedfc[_0x2797bb(0x12a)]),this[_0x2797bb(0x17d)](_0x2d8590[_0x2797bb(0x1d4)],_0x2d8590[_0x2797bb(0x16b)],{'success':![],'message':_0x2797bb(0x13d)+_0xfcedfc[_0x2797bb(0x12a)]},_0x2d8590['callback']);}}}}}}}}}}}async['loadSystemMode'](){const _0x3a7376=a0_0xd9776a;try{const _0x21fd85=await this[_0x3a7376(0x1bd)](setup[_0x3a7376(0x1c5)]);_0x21fd85&&_0x21fd85[_0x3a7376(0x1df)]&&Object[_0x3a7376(0x1b3)](setup[_0x3a7376(0x131)])['includes'](_0x21fd85['val'])?this['currentSystemMode']=_0x21fd85[_0x3a7376(0x1df)]:(this[_0x3a7376(0x189)]=setup[_0x3a7376(0x131)]['NORMAL'],await this[_0x3a7376(0x1f2)](setup[_0x3a7376(0x1c5)],{'val':setup[_0x3a7376(0x131)][_0x3a7376(0x135)],'ack':!![]}));}catch(_0xcc02e6){this['currentSystemMode']=setup[_0x3a7376(0x131)][_0x3a7376(0x135)];}}async[a0_0xd9776a(0x158)](){const _0x2d0743=a0_0xd9776a;try{const _0x29a649=this['config']['presenceDevices']||[];let _0x1fc5bd=![];const _0x5d2338=[];for(const _0x3c5705 of _0x29a649){try{const _0x291c7f=await this[_0x2d0743(0x176)](_0x3c5705);_0x291c7f&&(_0x291c7f[_0x2d0743(0x1df)]===!![]||_0x291c7f[_0x2d0743(0x1df)]==='online'||_0x291c7f['val']===0x1)&&(_0x1fc5bd=!![],_0x5d2338[_0x2d0743(0x14e)](_0x3c5705));}catch(_0x2583d9){}}return await this[_0x2d0743(0x1f2)](_0x2d0743(0x1a1),{'val':_0x5d2338[_0x2d0743(0x1ef)](',\x20'),'ack':!![]}),_0x1fc5bd&&(this[_0x2d0743(0x12c)]&&(this['log']['info']('WiFi\x20Presence\x20detected.'),recorder[_0x2d0743(0x16e)](this)),!this['isPresent']&&this['currentSystemMode']===setup[_0x2d0743(0x131)][_0x2d0743(0x135)]&&await recorder[_0x2d0743(0x1e8)](this,!![])),_0x1fc5bd;}catch(_0x406b48){return![];}}async[a0_0xd9776a(0x151)](){const _0x33ecbd=a0_0xd9776a;this[_0x33ecbd(0x1eb)][_0x33ecbd(0x14b)]('ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...'),await aiAgent[_0x33ecbd(0x1db)](this),this[_0x33ecbd(0x184)](),this['triggerGaitAnalysis'](),this['triggerEnergyPrediction']();}[a0_0xd9776a(0x1ea)](){const _0x118b51=a0_0xd9776a;if(!this['isProVersion'])return;try{this['getState'](_0x118b51(0x196),(_0x41ff1e,_0x54ca88)=>{const _0x415cc6=_0x118b51;_0x54ca88&&_0x54ca88[_0x415cc6(0x1df)]&&pythonBridge['send'](this,_0x415cc6(0x1cd),{'sequences':JSON[_0x415cc6(0x1c2)](_0x54ca88[_0x415cc6(0x1df)])});});}catch(_0x33be3d){}}async[a0_0xd9776a(0x1b2)](){const _0x59b956=a0_0xd9776a;if(!this[_0x59b956(0x1b5)])return;try{const _0x19d3d0=await recorder['getOutsideTemperatureNumeric'](this);if(_0x19d3d0===null)return;const _0x2f9199={},_0x1bd06a=this[_0x59b956(0x142)][_0x59b956(0x18d)]||[];for(const _0x4a07d8 of _0x1bd06a){if(_0x4a07d8[_0x59b956(0x12b)]===_0x59b956(0x1f0)&&_0x4a07d8['location']){const _0x5597cf=this[_0x59b956(0x139)][_0x4a07d8['id']];if(_0x5597cf!==undefined)_0x2f9199[_0x4a07d8[_0x59b956(0x1a6)]]=_0x5597cf;}}Object[_0x59b956(0x19f)](_0x2f9199)['length']>0x0&&pythonBridge[_0x59b956(0x1d0)](this,_0x59b956(0x18a),{'current_temps':_0x2f9199,'t_out':_0x19d3d0});}catch(_0x1cc4cf){}}[a0_0xd9776a(0x184)](){const _0x4c092f=a0_0xd9776a;if(!this[_0x4c092f(0x1d7)]||this[_0x4c092f(0x1d7)]['length']===0x0)return;const _0x5deef6=new Array(0x60)[_0x4c092f(0x1dd)](0x0),_0x13bc70=new Date()[_0x4c092f(0x138)](0x0,0x0,0x0,0x0);this[_0x4c092f(0x1d7)][_0x4c092f(0x143)](_0x5ffabf=>{const _0x457295=_0x4c092f,_0x30e340=new Date(_0x5ffabf[_0x457295(0x12d)]);if(_0x30e340[_0x457295(0x197)]()>=_0x13bc70){const _0x57a114=_0x30e340['getHours'](),_0x6628f3=_0x30e340[_0x457295(0x1c3)](),_0x370f98=_0x57a114*0x4+Math['floor'](_0x6628f3/0xf);if(_0x370f98>=0x0&&_0x370f98<0x60)_0x5deef6[_0x370f98]++;}}),this[_0x4c092f(0x1f2)]('analysis.health.todayVector',{'val':JSON['stringify'](_0x5deef6),'ack':!![]});}[a0_0xd9776a(0x132)](){const _0x208e68=a0_0xd9776a;if(!this[_0x208e68(0x175)]||this[_0x208e68(0x175)][_0x208e68(0x137)]<0x2)return;const _0x2bf1c8=this[_0x208e68(0x175)][_0x208e68(0x159)](_0x464e01=>{const _0x26b9cd=_0x208e68,_0x29aba6=(_0x464e01[_0x26b9cd(0x150)]||'')[_0x26b9cd(0x13b)]();return ACTIVITY_LEVEL_MAP[_0x29aba6]||0x32;});pythonBridge[_0x208e68(0x1d0)](this,_0x208e68(0x156),{'values':_0x2bf1c8,'tag':_0x208e68(0x1dc)});}}function a0_0x2486(_0x2c7e32,_0x11ce82){const _0x221137=a0_0x4db8();return a0_0x2486=function(_0x397146,_0x78c32b){_0x397146=_0x397146-0x125;let _0x4db8f9=_0x221137[_0x397146];return _0x4db8f9;},a0_0x2486(_0x2c7e32,_0x11ce82);}if(require[a0_0xd9776a(0x170)]!==module)module[a0_0xd9776a(0x18c)]=_0x506f38=>new CogniLiving(_0x506f38);else new CogniLiving();