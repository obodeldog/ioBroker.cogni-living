function a0_0x54e5(){const _0x27c135=['ROLLE:\x20Smart\x20Home\x20Analyst.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20AKTUELLE\x20ZEIT:\x20','system.meta.uuid','openweathermap.','exports','feedbackHistory','process','analysis.deviationFromBaseline','Temperatur','subscribeStates','getLtmData','common','map','uuid-not-found','sleepScore','Activity\x20Summary','CONFIG_PENDING','catch','Drift\x20Analysis','licenseKey','lastAlertState','No\x20recent\x20activity.','ROLLE:\x20Data\x20Scientist.\x20VERGLEICHE:\x20Dataset\x20A\x20(Recent)\x20vs\x20B\x20(Established).\x20ZIEL:\x20Erkenne\x20Drift.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aB\x20(LTB):\x0a','enum.functions.*','callback','analysisInterval','wohnungst√ºr','Last\x20raw\x20event','selectedFunctionIds','Licht','LTM.baselineStatus','Schalter/Licht','notifyPushoverInstance','exitGraceTimer','latitude','cogni-living\x20adapter\x20starting\x20(v','DIRECTION','parse','getForeignObjectAsync','isPresent','53347bcRlop','info.','analysis.lastResult','Baseline\x20Status','string','motion','.\x0a\x20\x20\x20\x20\x20\x20\x20\x20','replace','de-DE','pr√§senz','level','suggestedAction','Alert\x20Reason','patternDetected','createAllObjects','system.','level.dimmer','effect','message','\x0aFEEDBACK:\x0a','notifyTelegramInstance','UNREACH','isExit','cancel','analysis.history_debug_01','generateContent','Adapter','PRIORIT√ÑT:\x20Sicherheit.\x20Erkenne\x20Eindringlinge,\x20ungew√∂hnliche\x20Anwesenheit.','weather','capabilities','apply','link_quality','Nein','eingang','native','inactivityMonitoringEnabled','value.temperature','subscribeForeignStatesAsync','events.history_debug_04','longitude','analysis.isEmergency','last_seen','exitTimer','analysis.history_debug_02','Cogni-Living\x20Alert','PRIORIT√ÑT:\x20Gesundheit\x20und\x20Sicherheit\x20f√ºr\x20Senioren\x20(AAL).\x20Erkenne\x20Inaktivit√§t,\x20potenzielle\x20St√ºrze\x20(indirekt),\x20Schlafunterbrechungen\x20und\x20n√§chtliche\x20Unruhe.','.\x20ORT:\x20','processSensorEvent','minDaysForBaseline','notifyEmailInstance','firmware','LTM.triggerDailyDigest','events.history_debug_01','value.health','analysis.health','onUnload','location','notifyWhatsappInstance','history.','wind','setStateAsync','runGeminiAnalysis','scanDevices','suggestion','Deaktiviert\x20(Pro-Feature)','16rlDvnU','text.alarm','vacation','status','description','guest','fire','PRO-','WEEK_PROGRAM','231DneiCB','events.lastEvent','Bewegung\x20w√§hrend\x20Exit-Timer\x20erkannt\x20->\x20Bewohner\x20ist\x20noch\x20da.','analysis.health.sleepScore','rawEventLog','haust√ºr','temp','retry','events.history','system.isPresent','currentSystemMode','\x22\x20was\x20','find','\x20presence\x20devices...','analysis.alertReason','log','PARTY','LTM.driftAnalysis','forecast','automationProposal','N/A\x20(No\x20Activity)','driftAnalysisTimer','LTM.driftAnalysis.driftDetails','error','toLowerCase','includes','sendToAsync','k√ºche','analysis.comfortSuggestion','analysisHistory','online','toFixed','application/json','analysis.comfortSummary','runAutopilot','apiKey','2-digit','N/A\x20(Pro\x20Feature)','sensor.window','setupModeResetScheduler','\x20sent','Daily\x20Digests','isEmergency','Flur','from','Comfort\x20Suggestion','Last\x20Result','precip','sendNotification','277113AeXrVb','Pattern\x20Detected','\x0a!!!\x20END\x20WARNING\x20!!!\x0a','analysis.automation','events.history_debug_02','AES_KEY','accuweather.','LTM.driftAnalysis.baselineDrift','scheduleJob','Wohnzimmer','toString','analysis.isAlert','CONNECTION','Health\x20Notes','checkLtmObjects','enum.rooms.*','Fenster/T√ºr','Action','some','loadHistoryFromState','notifyWhatsappRecipient','ERROR','devices','STICKY_UNREACH','Subscribing\x20to\x20','node-schedule','uuid','comfort','weatherunderground.','\x20(EMERGENCY)','COMBINED_PARAMETER','flur','val','garten','Last\x20Check','checkLtmDriftObjects','setupDriftAnalysisScheduler','ltmJob','Deviation','analysisTimer','splice','analysis.analysisHistory','delObjectAsync','Gemini\x20Init\x20Error:\x20','scriptEnabled','setPresence','geminiModel','.\x20PR√ÑSENZ:\x20','No\x20Key','analysis.automation.description','Comfort\x20Summary','Sleep\x20Score\x20(0-100)','json','system','date','1508210lrDdvg','party','WORKING','_score','admin.','rain','inactivityThresholdHours','getSystemUUID','Automation\x20Proposals','number','getForeignStateAsync','resetAnalysisStates','reachable','hue','analysis.activitySummary','role','temperature','channel','value.humidity','join','connection','analysis.history_debug_04','indicator.alarm','stringify','sensor.motion','bind','LTM','ltmStbWindowDays','startExitTimer','modeResetJob','bewegung','üö®\x20EMERGENCY','.\x0a\x20\x20\x20\x20\x20\x20\x20\x20MODUS:\x20','0\x203\x20*\x20*\x20*','VACATION','getStateAsync','summary','sensorLastValues','Restlessness\x20Level','132440tqNugm','analysis.trigger','Raw\x20Log','Bewegung','test','analysis.history_debug_03','object','Rauchmelder','Baseline:\x20Inactive\x20(Pro\x20Feature).','Description','notifyWhatsappEnabled','toUpperCase','systemConfig','getGenerativeModel','update','trim','mac\x20address','ack','VIRTUAL_CHANNEL','uniqueid','analysis.history_debug_00','text','setState','expire','startsWith','none','boolean','command','LOWBAT','updateBaselineStatus','deviationFromBaseline','pressure','notifyTelegramEnabled','systemUUID','N/A','Analysiere\x20ausgewogen\x20auf\x20Gesundheit,\x20Sicherheit\x20und\x20Komfort.','timestamp','Garten','detectionState','analysis.automation.patternDetected','\x0a\x0aA\x20(STB):\x0a','fenster','length','4098300Lpxbow','version','main','No\x20recorded\x20events\x20yet.','Lernphase\x20(','sound','split','isProVersion','Sending\x20notification:\x20\x22','normal','genAI','Party','getObjectAsync','notes','response','logDuplicates','saveRawEventLog','updateAnalysisHistory','PROCESS','testApiKey','[Test]\x20Notification','TEST-PRO-KEY','name','Presence\x20Status','yr.','\x20min).\x20Watchdog\x20Limit:\x20','unknown','checkSystemObjects','javascript.0.script','4JKNESQ','LTM.dailyDigests','daswetter.','lampe','indicator.alarm.fire','loadDailyDigests','griff','alertReason','diele','Success','notifySignalRecipient','runBaselineDriftAnalysis','CRITICAL\x20WARNING:\x20No\x20sensor\x20activity\x20detected\x20for\x20','sendTo','checkWifiPresence','t√ºr','\x20sensors...','checkLicense','‚ö†Ô∏è\x20Alarm','getForeignObjectsAsync','RSSI','now','ON_TIME','notifyTelegramRecipient','isGracePeriodActive','315948WGBovp','push','SECTION','config','extendObjectAsync','Logbook','setupLtmScheduler','Urlaub','slice','geminiApiKey','LTM.driftAnalysis.lastCheck','baselineDrift','onMessage','values','signal','System\x20Mode','NORMAL','analysis.health.restlessness','pop','saveDailyDigests','city','analysis.feedbackHistory','notifyEmailRecipient','N/A\x20(Learning)','Health\x20&\x20Sleep\x20Analysis','mode','AI\x20Emergency\x20Status','notifySignalEnabled','vis.','unshift','material.','abortExitTimer','User\x20Feedback:\x20Alarm\x20\x22','Processing\x20Status','long','K√ºche','setObjectNotExistsAsync','presenceDevices','8kspzaU','constructor','Gemini\x20AI\x20initialized.','saveFeedback','triggerDailyDigest','\x0a!!!\x20EXTERNAL\x20SYSTEM\x20WARNING\x20!!!\x0a','loadRawEventLog','Starting\x20Smart\x20Scan\x20with\x20filters:\x20','activity','onReady','lights','createDailyDigest','state','health','uuid-error','dailyDigests','727695ecQOdr','ALARM','enum','eventHistory','type','indicator','notifyPushoverEnabled','rating','onStateChange','\x20Tage)','members','cogni-living','analysis.automation.suggestedAction','colormode','loadSystemMode','\x0a\x20\x20\x20\x20\x20\x20\x20\x20EVENTS:\x20','notifySignalInstance','icon','send','doors','Missing\x20data','Schlafzimmer','150iinfVP','info'];a0_0x54e5=function(){return _0x27c135;};return a0_0x54e5();}const a0_0x4d47b4=a0_0x5356;(function(_0x1b7fac,_0x3b3a7d){const _0x188f01=a0_0x5356,_0x59493f=_0x1b7fac();while(!![]){try{const _0x28a257=parseInt(_0x188f01(0x19e))/0x1*(parseInt(_0x188f01(0x2fe))/0x2)+-parseInt(_0x188f01(0x219))/0x3*(-parseInt(_0x188f01(0x2bf))/0x4)+-parseInt(_0x188f01(0x250))/0x5+-parseInt(_0x188f01(0x175))/0x6*(-parseInt(_0x188f01(0x277))/0x7)+-parseInt(_0x188f01(0x1df))/0x8*(-parseInt(_0x188f01(0x30e))/0x9)+parseInt(_0x188f01(0x2a2))/0xa+parseInt(_0x188f01(0x1e8))/0xb*(-parseInt(_0x188f01(0x2d8))/0xc);if(_0x28a257===_0x3b3a7d)break;else _0x59493f['push'](_0x59493f['shift']());}catch(_0x182246){_0x59493f['push'](_0x59493f['shift']());}}}(a0_0x54e5,0x79084));const a0_0x4d5311=(function(){let _0x47305a=!![];return function(_0x29809b,_0x5406c4){const _0x3550da=_0x47305a?function(){const _0x5e967a=a0_0x5356;if(_0x5406c4){const _0x402491=_0x5406c4[_0x5e967a(0x1bc)](_0x29809b,arguments);return _0x5406c4=null,_0x402491;}}:function(){};return _0x47305a=![],_0x3550da;};}()),a0_0x4ab199=a0_0x4d5311(this,function(){const _0xff81eb=a0_0x5356;return a0_0x4ab199[_0xff81eb(0x223)]()['search']('(((.+)+)+)+$')[_0xff81eb(0x223)]()[_0xff81eb(0x2ff)](a0_0x4ab199)['search']('(((.+)+)+)+$');});function a0_0x5356(_0x2b335f,_0x5d67da){const _0x402898=a0_0x54e5();return a0_0x5356=function(_0x4ab199,_0x4d5311){_0x4ab199=_0x4ab199-0x162;let _0x54e53a=_0x402898[_0x4ab199];return _0x54e53a;},a0_0x5356(_0x2b335f,_0x5d67da);}a0_0x4ab199();'use strict';const utils=require('@iobroker/adapter-core'),{GoogleGenerativeAI}=require('@google/generative-ai'),schedule=require(a0_0x4d47b4(0x232)),HISTORY_MAX_SIZE=0x32,FEEDBACK_MAX_SIZE=0x14,GEMINI_MODEL='models/gemini-flash-latest',ANALYSIS_HISTORY_MAX_SIZE=0x64,RAW_LOG_MAX_SIZE=0x5dc,DAILY_DIGEST_MAX_SIZE_LIMIT=0xb4,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,LTM_SCHEDULE=a0_0x4d47b4(0x271),LTM_DP_RAW_LOG='LTM.rawEventLog',LTM_DP_DAILY_DIGESTS=a0_0x4d47b4(0x2c0),LTM_DP_STATUS='LTM.processingStatus',LTM_DP_TRIGGER_DIGEST=a0_0x4d47b4(0x1d1),LTM_DP_BASELINE_STATUS=a0_0x4d47b4(0x194),LTM_DP_DRIFT_CHANNEL=a0_0x4d47b4(0x1f9),LTM_DP_DRIFT_STATUS=a0_0x4d47b4(0x220),LTM_DP_DRIFT_DETAILS=a0_0x4d47b4(0x1fe),LTM_DP_DRIFT_LAST_CHECK=a0_0x4d47b4(0x2e2),SYSTEM_DP_MODE='system.mode',MODE_RESET_SCHEDULE='0\x204\x20*\x20*\x20*',SYSTEM_MODES={'NORMAL':a0_0x4d47b4(0x2ab),'VACATION':a0_0x4d47b4(0x1e1),'PARTY':a0_0x4d47b4(0x251),'GUEST':a0_0x4d47b4(0x1e4)},AUTO_RESET_MODES=[SYSTEM_MODES['PARTY'],SYSTEM_MODES['GUEST']],EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,PERSONA_MAPPING={'generic':a0_0x4d47b4(0x29a),'senior_aal':a0_0x4d47b4(0x1cb),'family':'Fokus\x20auf\x20Familienroutinen,\x20Kindersicherheit\x20und\x20allgemeines\x20Haushaltsmanagement.','single_comfort':'Fokus\x20auf\x20Maximierung\x20von\x20Komfort,\x20Automatisierungseffizienz\x20und\x20Energieeinsparung.','security':a0_0x4d47b4(0x1b9)};class CogniLiving extends utils[a0_0x4d47b4(0x1b8)]{constructor(_0x2617b0){const _0x54fd46=a0_0x4d47b4;super({..._0x2617b0,'name':_0x54fd46(0x16a)}),this[_0x54fd46(0x162)]=[],this['analysisHistory']=[],this[_0x54fd46(0x17b)]=[],this[_0x54fd46(0x1ec)]=[],this[_0x54fd46(0x30d)]=[],this[_0x54fd46(0x275)]={},this[_0x54fd46(0x283)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x54fd46(0x19d)]=!![],this[_0x54fd46(0x1c8)]=null,this[_0x54fd46(0x197)]=null,this[_0x54fd46(0x2d7)]=![],this[_0x54fd46(0x2ac)]=null,this[_0x54fd46(0x247)]=null,this['currentSystemMode']=SYSTEM_MODES[_0x54fd46(0x2e8)],this[_0x54fd46(0x2a9)]=![],this[_0x54fd46(0x18a)]=![],this[_0x54fd46(0x298)]=_0x54fd46(0x2bc),this[_0x54fd46(0x240)]=null,this[_0x54fd46(0x23e)]=null,this[_0x54fd46(0x26d)]=null,this[_0x54fd46(0x1fd)]=null,this['on']('ready',this['onReady'][_0x54fd46(0x269)](this)),this['on']('stateChange',this[_0x54fd46(0x167)][_0x54fd46(0x269)](this)),this['on']('unload',this[_0x54fd46(0x1d5)][_0x54fd46(0x269)](this)),this['on'](_0x54fd46(0x1b0),this[_0x54fd46(0x2e4)]['bind'](this));}async[a0_0x4d47b4(0x307)](){const _0x1aac2c=a0_0x4d47b4;this[_0x1aac2c(0x1f7)]['info'](_0x1aac2c(0x199)+this[_0x1aac2c(0x2a3)]+')');const _0x2401e9=[_0x1aac2c(0x28b),_0x1aac2c(0x1b6),_0x1aac2c(0x1c9),_0x1aac2c(0x27c),_0x1aac2c(0x265),'events.history_debug_00',_0x1aac2c(0x1d2),_0x1aac2c(0x21d),'events.history_debug_03',_0x1aac2c(0x1c4)];for(const _0x25ecae of _0x2401e9){try{const _0xcc73c4=await this[_0x1aac2c(0x2ae)](_0x25ecae);_0xcc73c4&&await this[_0x1aac2c(0x243)](_0x25ecae);}catch(_0x219680){}}this[_0x1aac2c(0x2db)][_0x1aac2c(0x189)]=this[_0x1aac2c(0x2db)][_0x1aac2c(0x189)]||'',this[_0x1aac2c(0x2a9)]=await this[_0x1aac2c(0x2d0)](this[_0x1aac2c(0x2db)][_0x1aac2c(0x189)]);if(!this['config']['inactivityThresholdHours']||this['config'][_0x1aac2c(0x256)]<0.1)this[_0x1aac2c(0x2db)][_0x1aac2c(0x256)]=0xc;await this[_0x1aac2c(0x22c)]();try{const _0x343c6c=await this[_0x1aac2c(0x19c)]('system.config');_0x343c6c&&_0x343c6c['common']&&(this[_0x1aac2c(0x283)]={'latitude':_0x343c6c[_0x1aac2c(0x181)][_0x1aac2c(0x198)]||0x0,'longitude':_0x343c6c['common'][_0x1aac2c(0x1c5)]||0x0,'city':_0x343c6c[_0x1aac2c(0x181)]['city']||''});}catch(_0x45610e){}if(this[_0x1aac2c(0x2db)][_0x1aac2c(0x2e1)])try{this[_0x1aac2c(0x2ac)]=new GoogleGenerativeAI(this[_0x1aac2c(0x2db)][_0x1aac2c(0x2e1)]),this[_0x1aac2c(0x247)]=this['genAI'][_0x1aac2c(0x284)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x1aac2c(0x208)}}),this[_0x1aac2c(0x1f7)][_0x1aac2c(0x176)](_0x1aac2c(0x300));}catch(_0x896b7b){this[_0x1aac2c(0x1f7)][_0x1aac2c(0x1ff)](_0x1aac2c(0x244)+_0x896b7b[_0x1aac2c(0x1b0)]);}await this[_0x1aac2c(0x1ac)](),await this[_0x1aac2c(0x16d)](),await this[_0x1aac2c(0x304)](),await this['loadDailyDigests'](),this[_0x1aac2c(0x17f)]('analysis.trigger'),this[_0x1aac2c(0x17f)](LTM_DP_TRIGGER_DIGEST),this[_0x1aac2c(0x17f)]('system.mode');const _0x1dd953=this[_0x1aac2c(0x2db)][_0x1aac2c(0x22f)];if(_0x1dd953&&_0x1dd953[_0x1aac2c(0x2a1)]>0x0){this[_0x1aac2c(0x1f7)]['info']('Subscribing\x20to\x20'+_0x1dd953[_0x1aac2c(0x2a1)]+_0x1aac2c(0x2cf));for(const _0x179bfa of _0x1dd953){if(_0x179bfa['id']){await this[_0x1aac2c(0x1c3)](_0x179bfa['id']);try{const _0x26db47=await this[_0x1aac2c(0x25a)](_0x179bfa['id']);if(_0x26db47)this[_0x1aac2c(0x275)][_0x179bfa['id']]=_0x26db47[_0x1aac2c(0x239)];}catch(_0x116ef7){}}}}const _0x375c66=this[_0x1aac2c(0x2db)][_0x1aac2c(0x2fd)]||[];if(_0x375c66[_0x1aac2c(0x2a1)]>0x0){this['log'][_0x1aac2c(0x176)](_0x1aac2c(0x231)+_0x375c66[_0x1aac2c(0x2a1)]+_0x1aac2c(0x1f5));for(const _0x24870f of _0x375c66){await this[_0x1aac2c(0x1c3)](_0x24870f);}await this[_0x1aac2c(0x2cd)]();}if(this[_0x1aac2c(0x240)])clearInterval(this[_0x1aac2c(0x240)]);const _0x1d85cc=this[_0x1aac2c(0x2db)][_0x1aac2c(0x18f)]||0xf;_0x1d85cc>0x0&&(this['log'][_0x1aac2c(0x176)]('Starting\x20Autopilot\x20('+_0x1d85cc+_0x1aac2c(0x2bb)+this['config'][_0x1aac2c(0x256)]+'h.'),this['analysisTimer']=setInterval(()=>this[_0x1aac2c(0x20a)](),_0x1d85cc*0x3c*0x3e8)),this[_0x1aac2c(0x2de)](),this['setupModeResetScheduler'](),this[_0x1aac2c(0x23d)]();}async['scanForDevices'](_0x3dcbcf={}){const _0x22ec84=a0_0x4d47b4;this[_0x22ec84(0x1f7)][_0x22ec84(0x176)](_0x22ec84(0x305)+JSON[_0x22ec84(0x267)](_0x3dcbcf));const _0x54d5e7=[],_0x371e4e=_0x3dcbcf['motion']!==![],_0x1dc8ea=_0x3dcbcf[_0x22ec84(0x172)]!==![],_0x13ac7c=_0x3dcbcf[_0x22ec84(0x308)]!==![],_0x31f5a2=_0x3dcbcf[_0x22ec84(0x260)]===!![],_0x589263=_0x3dcbcf['weather']===!![],_0x305294=_0x3dcbcf[_0x22ec84(0x192)]||[],_0x2d8d0f=await this[_0x22ec84(0x2d2)](_0x22ec84(0x228),_0x22ec84(0x310)),_0x453ad4=await this[_0x22ec84(0x2d2)](_0x22ec84(0x18d),_0x22ec84(0x310)),_0x1fd0dc={},_0x394e14={},_0x3ac6d0={},_0xaa641f=(_0x27099a,_0x2ce7cf,_0x52eae9=![])=>{const _0x4dc263=_0x22ec84;if(!_0x27099a)return;for(const _0x12be13 in _0x27099a){const _0x59221d=_0x27099a[_0x12be13];if(_0x59221d&&_0x59221d['common']&&_0x59221d[_0x4dc263(0x181)][_0x4dc263(0x169)]){const _0x198f1e=(typeof _0x59221d[_0x4dc263(0x181)]['name']===_0x4dc263(0x27d)?_0x59221d[_0x4dc263(0x181)][_0x4dc263(0x2b8)]['de']:_0x59221d[_0x4dc263(0x181)]['name'])||_0x59221d['common'][_0x4dc263(0x2b8)];if(_0x52eae9)_0x3ac6d0[_0x12be13]=_0x198f1e;for(const _0x2a6e50 of _0x59221d['common'][_0x4dc263(0x169)]){if(_0x52eae9){if(!_0x2ce7cf[_0x2a6e50])_0x2ce7cf[_0x2a6e50]=[];_0x2ce7cf[_0x2a6e50]['push'](_0x12be13);}else _0x2ce7cf[_0x2a6e50]=_0x198f1e;}}}};_0xaa641f(_0x2d8d0f,_0x1fd0dc),_0xaa641f(_0x453ad4,_0x394e14,!![]);const _0x527502=await this[_0x22ec84(0x2d2)]('*','state'),_0x314673=[_0x22ec84(0x1b3),_0x22ec84(0x293),_0x22ec84(0x2d3),_0x22ec84(0x22e),'FAULT','SABOTAGE',_0x22ec84(0x30f),_0x22ec84(0x186),'DUTYCYCLE',_0x22ec84(0x252),_0x22ec84(0x19a),_0x22ec84(0x230),'OPERATING_VOLTAGE',_0x22ec84(0x289),'INSTALL_TEST',_0x22ec84(0x237),_0x22ec84(0x1e7),_0x22ec84(0x2d5),_0x22ec84(0x2da),'ERROR_CODE',_0x22ec84(0x2b4),_0x22ec84(0x21e),_0x22ec84(0x225),_0x22ec84(0x25c),_0x22ec84(0x1bd),'battery',_0x22ec84(0x285),_0x22ec84(0x1d0),'version',_0x22ec84(0x264),_0x22ec84(0x176),_0x22ec84(0x2e6),_0x22ec84(0x1c7),'last\x20action','archetype','alert',_0x22ec84(0x2f1),_0x22ec84(0x16c),_0x22ec84(0x1af),'xy','ct',_0x22ec84(0x25d),'sat','productname','manufacturer','modelid',_0x22ec84(0x28a),_0x22ec84(0x292),_0x22ec84(0x287),'description',_0x22ec84(0x1bb),_0x22ec84(0x17c),_0x22ec84(0x245),'scriptProblem',_0x22ec84(0x2be),_0x22ec84(0x29d),_0x22ec84(0x274),_0x22ec84(0x170),'history',_0x22ec84(0x1fa),'info',_0x22ec84(0x24d)];if(!_0x589263)_0x314673[_0x22ec84(0x2d9)]('wetter',_0x22ec84(0x1ba),_0x22ec84(0x1d9),_0x22ec84(0x296),'uv',_0x22ec84(0x255),_0x22ec84(0x217));const _0x148d37=[_0x22ec84(0x1ad),_0x22ec84(0x254),_0x22ec84(0x19f),_0x22ec84(0x2f4),_0x22ec84(0x1d8),_0x22ec84(0x2f6),'icons-mfd.','flot.'];if(!_0x589263)_0x148d37[_0x22ec84(0x2d9)](_0x22ec84(0x2c1),_0x22ec84(0x235),_0x22ec84(0x21f),_0x22ec84(0x2ba),_0x22ec84(0x179));const _0x98df42=(_0x245c9c,_0x11ad88,_0x52c23b=![])=>{const _0x29e32a=_0x22ec84,_0x1affd0=_0x245c9c[_0x29e32a(0x2a8)]('.');if(_0x11ad88[_0x245c9c])return _0x11ad88[_0x245c9c];if(_0x1affd0[_0x29e32a(0x2a1)]>0x2&&_0x11ad88[_0x1affd0[_0x29e32a(0x2e0)](0x0,-0x1)[_0x29e32a(0x263)]('.')])return _0x11ad88[_0x1affd0[_0x29e32a(0x2e0)](0x0,-0x1)['join']('.')];if(_0x1affd0[_0x29e32a(0x2a1)]>0x3&&_0x11ad88[_0x1affd0[_0x29e32a(0x2e0)](0x0,-0x2)[_0x29e32a(0x263)]('.')])return _0x11ad88[_0x1affd0[_0x29e32a(0x2e0)](0x0,-0x2)['join']('.')];return _0x52c23b?[]:null;};for(const _0x264008 in _0x527502){const _0x38daed=_0x527502[_0x264008];if(!_0x38daed||!_0x38daed[_0x22ec84(0x181)])continue;if(_0x148d37[_0x22ec84(0x22b)](_0x10e2db=>_0x264008[_0x22ec84(0x28f)](_0x10e2db)))continue;const _0x47ea20=_0x38daed[_0x22ec84(0x181)][_0x22ec84(0x25f)]||'',_0x203042=(_0x38daed[_0x22ec84(0x181)]['name']&&typeof _0x38daed['common']['name']===_0x22ec84(0x27d)?_0x38daed[_0x22ec84(0x181)][_0x22ec84(0x2b8)]['de']:_0x38daed[_0x22ec84(0x181)][_0x22ec84(0x2b8)])||'',_0x5bc6a4=_0x203042?_0x203042['toLowerCase']():'',_0x12b2e5=_0x264008[_0x22ec84(0x200)](),_0x4e225f=_0x98df42(_0x264008,_0x1fd0dc),_0x3c753c=_0x98df42(_0x264008,_0x394e14,!![]);let _0x5411e4=null,_0x289673=![];if(_0x3c753c&&_0x3c753c['length']>0x0){const _0x4aa458=_0x3c753c['find'](_0x1ed855=>_0x305294[_0x22ec84(0x201)](_0x1ed855));if(_0x4aa458){_0x289673=!![];const _0x36e5bf=_0x3ac6d0[_0x4aa458];if(_0x12b2e5['includes']('presence')||_0x12b2e5[_0x22ec84(0x201)](_0x22ec84(0x1a3)))_0x5411e4='Bewegung';else{if(_0x12b2e5[_0x22ec84(0x201)]('smoke')||_0x12b2e5[_0x22ec84(0x201)](_0x22ec84(0x1e5))||_0x5bc6a4[_0x22ec84(0x201)]('rauch'))_0x5411e4=_0x22ec84(0x27e);else{if(_0x12b2e5['includes'](_0x22ec84(0x30a))||_0x12b2e5[_0x22ec84(0x201)](_0x22ec84(0x1a8))||_0x12b2e5['includes']('on'))_0x5411e4=_0x22ec84(0x195);else _0x5411e4=_0x36e5bf;}}}}if(!_0x289673&&!_0x589263){if(_0x314673['some'](_0x2bfe2f=>_0x5bc6a4[_0x22ec84(0x201)](_0x2bfe2f)||_0x264008[_0x22ec84(0x282)]()['includes'](_0x2bfe2f)))continue;}if(!_0x5411e4&&_0x371e4e){if(_0x47ea20['includes'](_0x22ec84(0x268))||_0x47ea20[_0x22ec84(0x201)]('occupancy')||_0x5bc6a4['includes'](_0x22ec84(0x26e))||_0x5bc6a4[_0x22ec84(0x201)](_0x22ec84(0x1a7)))_0x5411e4=_0x22ec84(0x27a);}!_0x5411e4&&_0x1dc8ea&&((_0x12b2e5[_0x22ec84(0x201)]('shutter_contact')||_0x47ea20[_0x22ec84(0x201)]('sensor.door')||_0x47ea20['includes'](_0x22ec84(0x20e))||(_0x5bc6a4['includes'](_0x22ec84(0x2a0))||_0x5bc6a4[_0x22ec84(0x201)]('t√ºr'))&&!_0x5bc6a4[_0x22ec84(0x201)](_0x22ec84(0x1ee))&&!_0x5bc6a4['includes'](_0x22ec84(0x2c5))&&(_0x38daed[_0x22ec84(0x181)][_0x22ec84(0x163)]===_0x22ec84(0x291)||_0x38daed[_0x22ec84(0x181)][_0x22ec84(0x163)]===_0x22ec84(0x259)))&&(_0x5411e4=_0x22ec84(0x229)));if(!_0x5411e4&&_0x13ac7c){if((_0x47ea20['includes']('switch.light')||_0x47ea20[_0x22ec84(0x201)](_0x22ec84(0x1ae))||_0x5bc6a4[_0x22ec84(0x201)]('licht')||_0x5bc6a4['includes'](_0x22ec84(0x2c2)))&&_0x38daed[_0x22ec84(0x181)]['write'])_0x5411e4=_0x22ec84(0x193);}if(!_0x5411e4&&_0x31f5a2){if(_0x47ea20[_0x22ec84(0x201)](_0x22ec84(0x1c2))||_0x47ea20['includes'](_0x22ec84(0x262))||_0x5bc6a4['includes']('temperatur'))_0x5411e4=_0x22ec84(0x17e);}if(_0x5411e4){let _0x1ec116=_0x4e225f||'';if(!_0x1ec116){if(_0x5bc6a4[_0x22ec84(0x201)]('bad'))_0x1ec116='Badezimmer';else{if(_0x5bc6a4[_0x22ec84(0x201)](_0x22ec84(0x203)))_0x1ec116=_0x22ec84(0x2fb);else{if(_0x5bc6a4['includes']('wohn'))_0x1ec116=_0x22ec84(0x222);else{if(_0x5bc6a4[_0x22ec84(0x201)]('schlaf'))_0x1ec116=_0x22ec84(0x174);else{if(_0x5bc6a4[_0x22ec84(0x201)](_0x22ec84(0x238))||_0x5bc6a4[_0x22ec84(0x201)](_0x22ec84(0x2c7)))_0x1ec116=_0x22ec84(0x213);else{if(_0x5bc6a4[_0x22ec84(0x201)](_0x22ec84(0x23a)))_0x1ec116=_0x22ec84(0x29c);}}}}}}let _0x4bd01c=![];_0x5411e4==='Fenster/T√ºr'&&((_0x5bc6a4[_0x22ec84(0x201)](_0x22ec84(0x1ed))||_0x5bc6a4[_0x22ec84(0x201)](_0x22ec84(0x1bf))||_0x5bc6a4[_0x22ec84(0x201)](_0x22ec84(0x190))||_0x1ec116&&_0x1ec116[_0x22ec84(0x200)]()[_0x22ec84(0x201)]('flur')&&_0x5bc6a4[_0x22ec84(0x201)](_0x22ec84(0x2ce)))&&(_0x4bd01c=!![]));let _0x6693ba=0x0;if(_0x289673)_0x6693ba+=0x1e;else{if(_0x4e225f)_0x6693ba+=0x14;else{if(_0x1ec116)_0x6693ba+=0xa;}}if(_0x4bd01c)_0x6693ba+=0x5;_0x54d5e7[_0x22ec84(0x2d9)]({'id':_0x264008,'name':_0x203042||_0x264008,'type':_0x5411e4,'location':_0x1ec116,'logDuplicates':_0x5411e4===_0x22ec84(0x27a),'isExit':_0x4bd01c,'_score':_0x6693ba});}}return _0x54d5e7['sort']((_0x34cb91,_0x78e104)=>_0x78e104[_0x22ec84(0x253)]-_0x34cb91[_0x22ec84(0x253)]),_0x54d5e7;}async[a0_0x4d47b4(0x2cd)](){const _0x48fe37=a0_0x4d47b4,_0x5b25a3=this[_0x48fe37(0x2db)]['presenceDevices']||[];let _0x3ecb41=![];for(const _0x5c481b of _0x5b25a3){try{const _0x255ade=await this['getForeignStateAsync'](_0x5c481b);if(_0x255ade&&(_0x255ade[_0x48fe37(0x239)]===!![]||_0x255ade[_0x48fe37(0x239)]===_0x48fe37(0x206)||_0x255ade[_0x48fe37(0x239)]===0x1)){_0x3ecb41=!![];break;}}catch(_0x21bab1){}}return _0x3ecb41&&(this[_0x48fe37(0x1c8)]&&(this[_0x48fe37(0x1f7)][_0x48fe37(0x176)]('WiFi\x20Presence\x20detected\x20->\x20Aborting\x20Exit\x20Timer.\x20User\x20is\x20present.'),this[_0x48fe37(0x2f7)]()),!this['isPresent']&&this[_0x48fe37(0x1f2)]===SYSTEM_MODES[_0x48fe37(0x2e8)]&&this['setPresence'](!![])),_0x3ecb41;}async[a0_0x4d47b4(0x167)](_0x211127,_0x2a9392){const _0x31324e=a0_0x4d47b4;if(!_0x2a9392)return;if(_0x211127===this['namespace']+'.'+SYSTEM_DP_MODE){_0x2a9392['val']&&Object[_0x31324e(0x2e5)](SYSTEM_MODES)['includes'](_0x2a9392[_0x31324e(0x239)])&&(this[_0x31324e(0x1f2)]=_0x2a9392[_0x31324e(0x239)],_0x2a9392[_0x31324e(0x239)]===SYSTEM_MODES['VACATION']?this[_0x31324e(0x246)](![]):this[_0x31324e(0x246)](!![]));if(!_0x2a9392[_0x31324e(0x288)])this[_0x31324e(0x28d)](_0x211127,{'val':this[_0x31324e(0x1f2)],'ack':!![]});return;}if(!_0x2a9392[_0x31324e(0x288)]){_0x211127[_0x31324e(0x201)](_0x31324e(0x278))&&_0x2a9392['val']&&(this[_0x31324e(0x28d)](_0x211127,{'val':![],'ack':!![]}),this[_0x31324e(0x1db)]());if(_0x211127[_0x31324e(0x201)](_0x31324e(0x302))&&_0x2a9392[_0x31324e(0x239)]){this[_0x31324e(0x28d)](_0x211127,{'val':![],'ack':!![]});if(this[_0x31324e(0x2a9)])this[_0x31324e(0x309)]();}return;}if(this[_0x31324e(0x2db)][_0x31324e(0x2fd)]&&this[_0x31324e(0x2db)][_0x31324e(0x2fd)]['includes'](_0x211127)){await this['checkWifiPresence']();return;}const _0x49402a=(this['config']['devices']||[])[_0x31324e(0x1f4)](_0x2eb380=>_0x2eb380['id']===_0x211127);if(_0x49402a)this['processSensorEvent'](_0x211127,_0x2a9392,_0x49402a);}async[a0_0x4d47b4(0x1cd)](_0x35e173,_0xac75b5,_0x5a51f7){const _0x2c4fe2=a0_0x4d47b4;if(!_0x5a51f7[_0x2c4fe2(0x2b1)]&&this['sensorLastValues'][_0x35e173]===_0xac75b5['val'])return;this['sensorLastValues'][_0x35e173]=_0xac75b5['val'];if(this[_0x2c4fe2(0x2d7)])return;const _0x5b4433=await this[_0x2c4fe2(0x2cd)]();if(_0x5b4433){if(!this['isPresent'])this['setPresence'](!![]);}else{const _0x594ed8=_0x5a51f7[_0x2c4fe2(0x1b4)]===!![];_0x594ed8?this[_0x2c4fe2(0x26c)]():(this[_0x2c4fe2(0x1c8)]&&(this[_0x2c4fe2(0x1f7)][_0x2c4fe2(0x176)](_0x2c4fe2(0x1ea)),this['abortExitTimer']()),!this['isPresent']&&this['currentSystemMode']===SYSTEM_MODES['NORMAL']&&this[_0x2c4fe2(0x246)](!![]));}const _0x1f9036={'timestamp':_0xac75b5['ts'],'id':_0x35e173,'name':_0x5a51f7[_0x2c4fe2(0x2b8)],'value':_0xac75b5[_0x2c4fe2(0x239)],'location':_0x5a51f7['location'],'type':_0x5a51f7[_0x2c4fe2(0x163)]};this[_0x2c4fe2(0x162)][_0x2c4fe2(0x2f5)](_0x1f9036);if(this['eventHistory']['length']>HISTORY_MAX_SIZE)this[_0x2c4fe2(0x162)][_0x2c4fe2(0x2ea)]();await this['setStateAsync'](_0x2c4fe2(0x1e9),{'val':JSON[_0x2c4fe2(0x267)](_0x1f9036),'ack':!![]}),await this[_0x2c4fe2(0x1da)]('events.history',{'val':JSON[_0x2c4fe2(0x267)](this[_0x2c4fe2(0x162)]),'ack':!![]}),this[_0x2c4fe2(0x1ec)][_0x2c4fe2(0x2d9)]({'timestamp':new Date(_0xac75b5['ts'])['toISOString'](),'sensorName':_0x5a51f7[_0x2c4fe2(0x2b8)],'location':_0x5a51f7[_0x2c4fe2(0x1d6)],'value':_0xac75b5['val']}),await this['saveRawEventLog']();}[a0_0x4d47b4(0x26c)](){const _0x22f4bc=a0_0x4d47b4;this[_0x22f4bc(0x2f7)](),this[_0x22f4bc(0x2d7)]=!![],this[_0x22f4bc(0x197)]=setTimeout(()=>{const _0x83000e=_0x22f4bc;this[_0x83000e(0x2d7)]=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),this['exitTimer']=setTimeout(()=>{const _0x4fcb50=_0x22f4bc;this[_0x4fcb50(0x246)](![]),this['exitTimer']=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}[a0_0x4d47b4(0x2f7)](){const _0x4ab809=a0_0x4d47b4;if(this[_0x4ab809(0x1c8)])clearTimeout(this['exitTimer']);if(this[_0x4ab809(0x197)])clearTimeout(this[_0x4ab809(0x197)]);this['exitTimer']=null,this[_0x4ab809(0x197)]=null,this[_0x4ab809(0x2d7)]=![];}async[a0_0x4d47b4(0x246)](_0x277e6f){const _0x28b435=a0_0x4d47b4;if(this[_0x28b435(0x19d)]===_0x277e6f)return;this['isPresent']=_0x277e6f,await this[_0x28b435(0x1da)]('system.isPresent',{'val':_0x277e6f,'ack':!![]});}[a0_0x4d47b4(0x20a)](){const _0x160765=a0_0x4d47b4,_0x4fe256=this[_0x160765(0x2db)]['inactivityThresholdHours'],_0x54bdbc=this[_0x160765(0x2db)][_0x160765(0x1c1)],_0x39281b=this[_0x160765(0x162)][_0x160765(0x2a1)]>0x0?this[_0x160765(0x162)][0x0][_0x160765(0x29b)]:Date[_0x160765(0x2d4)](),_0x1af385=(Date['now']()-_0x39281b)/(0x3e8*0x3c*0x3c);let _0x3e97d4='';_0x54bdbc&&this[_0x160765(0x1f2)]===SYSTEM_MODES[_0x160765(0x2e8)]&&this[_0x160765(0x19d)]&&(_0x1af385>_0x4fe256&&(_0x3e97d4=_0x160765(0x2cb)+_0x1af385[_0x160765(0x207)](0x1)+'\x20hours.\x20The\x20resident\x20might\x20be\x20incapacitated.\x20Risk\x20level:\x20HIGH.'));if(_0x3e97d4){this[_0x160765(0x1db)](_0x3e97d4)[_0x160765(0x187)](_0x54e6f0=>this[_0x160765(0x1f7)][_0x160765(0x1ff)](_0x54e6f0));return;}const _0x35a865=Date[_0x160765(0x2d4)](),_0x2c1e5a=_0x35a865-_0x39281b,_0x5d0e3b=(this['config'][_0x160765(0x18f)]||0xf)*0x3c*0x3e8;this[_0x160765(0x162)]['length']>0x0&&_0x2c1e5a<=_0x5d0e3b?this[_0x160765(0x1db)]()[_0x160765(0x187)](_0x1071da=>this[_0x160765(0x1f7)]['error'](_0x1071da)):!this['lastAlertState']&&(this['setState']('analysis.isAlert',{'val':![],'ack':!![]}),this['setState']('analysis.isEmergency',{'val':![],'ack':!![]}));}async[a0_0x4d47b4(0x1db)](_0x406691=''){const _0x111bf9=a0_0x4d47b4;if(!this[_0x111bf9(0x247)])return;const _0x404587=this[_0x111bf9(0x162)][_0x111bf9(0x2a1)]>0x0?this[_0x111bf9(0x162)]:[{'note':_0x111bf9(0x2a5)}],_0x51858c=PERSONA_MAPPING[this[_0x111bf9(0x2db)]['aiPersona']||'generic'],_0x4e2c58=this[_0x111bf9(0x2db)]['livingContext']||'',_0x4641e5=this[_0x111bf9(0x1f2)],_0x514632=new Date(),_0x4f6032=_0x514632['toLocaleString'](_0x111bf9(0x1a6),{'weekday':_0x111bf9(0x2fa),'hour':'2-digit','minute':_0x111bf9(0x20c)}),_0x446194=this[_0x111bf9(0x283)];let _0xc9d4c0='';if(this[_0x111bf9(0x17b)][_0x111bf9(0x2a1)]>0x0){const _0xe197a1=this[_0x111bf9(0x17b)][_0x111bf9(0x2e0)](0x0,0x3)[_0x111bf9(0x182)](_0x59d042=>_0x111bf9(0x2f8)+_0x59d042[_0x111bf9(0x2c6)]+_0x111bf9(0x1f3)+_0x59d042[_0x111bf9(0x166)]+'.')[_0x111bf9(0x263)]('\x0a');_0xc9d4c0=_0x111bf9(0x1b1)+_0xe197a1+'\x0a';}const _0x3fb9c0=_0x406691?_0x111bf9(0x303)+_0x406691+_0x111bf9(0x21b):'',_0x534b03=_0x111bf9(0x27f),_0x5d5b0c=_0x111bf9(0x177)+_0x4f6032+_0x111bf9(0x1cc)+_0x446194[_0x111bf9(0x2ec)]+_0x111bf9(0x270)+_0x4641e5+_0x111bf9(0x248)+(this['isPresent']?'Ja':_0x111bf9(0x1be))+'.\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20KONTEXT:\x20'+_0x4e2c58+'.\x20PERSONA:\x20'+_0x51858c+_0x111bf9(0x1a4)+_0x534b03+'\x20'+_0xc9d4c0+'\x20'+_0x3fb9c0+_0x111bf9(0x16e)+JSON[_0x111bf9(0x267)](_0x404587)+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20AUFGABE:\x20Analysiere\x20die\x20Events\x20auf\x20Aktivit√§t,\x20Komfort\x20und\x20GESUNDHEIT\x20(Schlaf/Unruhe).\x0a\x20\x20\x20\x20\x20\x20\x20\x20SCHEMA:\x20{\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22activity\x22:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22deviationFromBaseline\x22:\x20\x22string\x22,\x20\x22isAlert\x22:\x20bool,\x20\x22isEmergency\x22:\x20bool,\x20\x22alertReason\x22:\x20\x22string\x22\x20},\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22comfort\x22:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22suggestion\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22patternDetected\x22:\x20bool,\x20\x22description\x22:\x20\x22string\x22,\x20\x22suggestedAction\x22:\x20\x22string\x22\x20}\x20},\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22health\x22:\x20{\x20\x22sleepScore\x22:\x20number\x20(0-100,\x20100=perfekt,\x20sch√§tze\x20bei\x20Nachtdaten),\x20\x22restlessness\x22:\x20\x22none|low|medium|high\x22,\x20\x22notes\x22:\x20\x22string\x22\x20}\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20}';try{const _0x3a70e4=await this['geminiModel'][_0x111bf9(0x1b7)](_0x5d5b0c),_0x205e44=_0x3a70e4[_0x111bf9(0x2b0)][_0x111bf9(0x28c)]()['replace'](/```json|```/g,'')[_0x111bf9(0x286)](),_0x51dc33=JSON[_0x111bf9(0x19b)](_0x205e44);await this[_0x111bf9(0x1da)](_0x111bf9(0x1a0),{'val':_0x205e44,'ack':!![]}),await this[_0x111bf9(0x1da)](_0x111bf9(0x1f6),{'val':_0x51dc33[_0x111bf9(0x306)]['alertReason']||'','ack':!![]}),await this[_0x111bf9(0x1da)](_0x111bf9(0x25e),{'val':_0x51dc33[_0x111bf9(0x306)][_0x111bf9(0x274)]||_0x111bf9(0x299),'ack':!![]}),await this[_0x111bf9(0x1da)](_0x111bf9(0x17d),{'val':_0x51dc33[_0x111bf9(0x306)][_0x111bf9(0x295)]||_0x111bf9(0x299),'ack':!![]});_0x51dc33[_0x111bf9(0x234)]&&(await this[_0x111bf9(0x1da)](_0x111bf9(0x209),{'val':_0x51dc33[_0x111bf9(0x234)][_0x111bf9(0x274)]||'','ack':!![]}),await this['setStateAsync'](_0x111bf9(0x204),{'val':_0x51dc33['comfort'][_0x111bf9(0x1dd)]||'','ack':!![]}),_0x51dc33[_0x111bf9(0x234)]['automationProposal']&&(await this[_0x111bf9(0x1da)](_0x111bf9(0x29e),{'val':_0x51dc33[_0x111bf9(0x234)][_0x111bf9(0x1fb)][_0x111bf9(0x1ab)]||![],'ack':!![]}),await this[_0x111bf9(0x1da)](_0x111bf9(0x24a),{'val':_0x51dc33[_0x111bf9(0x234)]['automationProposal'][_0x111bf9(0x1e3)]||'','ack':!![]}),await this[_0x111bf9(0x1da)]('analysis.automation.suggestedAction',{'val':_0x51dc33[_0x111bf9(0x234)]['automationProposal'][_0x111bf9(0x1a9)]||'','ack':!![]})));_0x51dc33[_0x111bf9(0x30b)]&&(await this['setStateAsync'](_0x111bf9(0x1eb),{'val':typeof _0x51dc33[_0x111bf9(0x30b)][_0x111bf9(0x184)]===_0x111bf9(0x259)?_0x51dc33['health'][_0x111bf9(0x184)]:0x0,'ack':!![]}),await this[_0x111bf9(0x1da)](_0x111bf9(0x2e9),{'val':_0x51dc33['health']['restlessness']||_0x111bf9(0x290),'ack':!![]}),await this['setStateAsync']('analysis.health.notes',{'val':_0x51dc33['health'][_0x111bf9(0x2af)]||'','ack':!![]}));const _0x10a0e2=_0x51dc33[_0x111bf9(0x306)]['isAlert']||![],_0x5eb6a1=_0x51dc33[_0x111bf9(0x306)][_0x111bf9(0x212)]||![];if(_0x10a0e2||_0x5eb6a1){await this[_0x111bf9(0x1da)]('analysis.isAlert',{'val':!![],'ack':!![]}),await this[_0x111bf9(0x1da)]('analysis.isEmergency',{'val':_0x5eb6a1,'ack':!![]});if(!this[_0x111bf9(0x18a)]||_0x5eb6a1){const _0x1645ea=_0x5eb6a1?'üö®üö®\x20NOTFALL':_0x111bf9(0x2d1);this[_0x111bf9(0x218)](_0x1645ea+':\x20'+_0x51dc33[_0x111bf9(0x306)][_0x111bf9(0x2c6)],![],_0x5eb6a1);}}else await this[_0x111bf9(0x1da)](_0x111bf9(0x224),{'val':![],'ack':!![]}),await this[_0x111bf9(0x1da)]('analysis.isEmergency',{'val':![],'ack':!![]});this[_0x111bf9(0x18a)]=_0x10a0e2||_0x5eb6a1;const _0x5642a7={'timestamp':Date[_0x111bf9(0x2d4)](),'id':Date[_0x111bf9(0x2d4)]()[_0x111bf9(0x223)](),'analysis':_0x51dc33,'systemMode':_0x4641e5,'isPro':this[_0x111bf9(0x2a9)]};this[_0x111bf9(0x2b3)](_0x5642a7);}catch(_0x4d5f3b){this[_0x111bf9(0x1f7)][_0x111bf9(0x1ff)]('Analysis\x20Error:\x20'+_0x4d5f3b['message']);}}async[a0_0x4d47b4(0x22c)](){const _0x51f177=a0_0x4d47b4;try{const _0x3052ff=await this['getStateAsync'](_0x51f177(0x1f0));_0x3052ff&&_0x3052ff[_0x51f177(0x239)]&&(this[_0x51f177(0x162)]=JSON['parse'](_0x3052ff[_0x51f177(0x239)][_0x51f177(0x223)]()));}catch(_0x3b934a){this[_0x51f177(0x162)]=[];}try{const _0x290948=await this['getStateAsync']('analysis.analysisHistory');if(_0x290948&&_0x290948[_0x51f177(0x239)])this[_0x51f177(0x205)]=JSON['parse'](_0x290948[_0x51f177(0x239)]['toString']());}catch(_0x1a3c29){this['analysisHistory']=[];}}async['createAllObjects'](){const _0x1a5ee0=a0_0x4d47b4;await this[_0x1a5ee0(0x2bd)](),await this['setObjectNotExistsAsync'](_0x1a5ee0(0x1f1),{'type':_0x1a5ee0(0x30a),'common':{'name':_0x1a5ee0(0x2b9),'type':_0x1a5ee0(0x291),'role':_0x1a5ee0(0x164),'read':!![],'write':![],'def':!![]},'native':{}}),await this[_0x1a5ee0(0x2fc)](_0x1a5ee0(0x1e9),{'type':_0x1a5ee0(0x30a),'common':{'name':_0x1a5ee0(0x191),'type':_0x1a5ee0(0x1a2),'role':_0x1a5ee0(0x24d),'read':!![],'write':![]},'native':{}}),await this[_0x1a5ee0(0x2fc)](_0x1a5ee0(0x1f0),{'type':_0x1a5ee0(0x30a),'common':{'name':'Event\x20History','type':_0x1a5ee0(0x1a2),'role':_0x1a5ee0(0x24d),'read':!![],'write':![]},'native':{}}),await this[_0x1a5ee0(0x2fc)](_0x1a5ee0(0x278),{'type':_0x1a5ee0(0x30a),'common':{'name':'Trigger\x20Analysis','type':_0x1a5ee0(0x291),'role':'button','read':!![],'write':!![],'def':![]},'native':{}}),await this[_0x1a5ee0(0x2fc)](_0x1a5ee0(0x1a0),{'type':'state','common':{'name':_0x1a5ee0(0x216),'type':_0x1a5ee0(0x1a2),'role':'json','read':!![],'write':![]},'native':{}}),await this[_0x1a5ee0(0x2fc)]('analysis.isAlert',{'type':_0x1a5ee0(0x30a),'common':{'name':'AI\x20Alert\x20Status','type':_0x1a5ee0(0x291),'role':_0x1a5ee0(0x266),'read':!![],'write':![],'def':![]},'native':{}}),await this[_0x1a5ee0(0x2fc)](_0x1a5ee0(0x1c6),{'type':'state','common':{'name':_0x1a5ee0(0x2f2),'type':_0x1a5ee0(0x291),'role':_0x1a5ee0(0x2c3),'read':!![],'write':![],'def':![]},'native':{}}),await this[_0x1a5ee0(0x2fc)](_0x1a5ee0(0x1f6),{'type':_0x1a5ee0(0x30a),'common':{'name':_0x1a5ee0(0x1aa),'type':_0x1a5ee0(0x1a2),'role':_0x1a5ee0(0x1e0),'read':!![],'write':![]},'native':{}}),await this[_0x1a5ee0(0x2fc)]('analysis.activitySummary',{'type':'state','common':{'name':_0x1a5ee0(0x185),'type':_0x1a5ee0(0x1a2),'role':'text','read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x1a5ee0(0x17d),{'type':_0x1a5ee0(0x30a),'common':{'name':_0x1a5ee0(0x23f),'type':'string','role':_0x1a5ee0(0x30a),'read':!![],'write':![],'def':_0x1a5ee0(0x299)},'native':{}}),await this[_0x1a5ee0(0x2fc)](_0x1a5ee0(0x209),{'type':_0x1a5ee0(0x30a),'common':{'name':_0x1a5ee0(0x24b),'type':_0x1a5ee0(0x1a2),'role':_0x1a5ee0(0x28c),'read':!![],'write':![]},'native':{}}),await this[_0x1a5ee0(0x2fc)](_0x1a5ee0(0x204),{'type':'state','common':{'name':_0x1a5ee0(0x215),'type':_0x1a5ee0(0x1a2),'role':_0x1a5ee0(0x28c),'read':!![],'write':![]},'native':{}}),await this[_0x1a5ee0(0x2dc)](_0x1a5ee0(0x21c),{'type':_0x1a5ee0(0x261),'common':{'name':_0x1a5ee0(0x258)},'native':{}}),await this[_0x1a5ee0(0x2fc)]('analysis.automation.patternDetected',{'type':'state','common':{'name':_0x1a5ee0(0x21a),'type':_0x1a5ee0(0x291),'role':_0x1a5ee0(0x164),'read':!![],'write':![],'def':![]},'native':{}}),await this[_0x1a5ee0(0x2fc)](_0x1a5ee0(0x24a),{'type':_0x1a5ee0(0x30a),'common':{'name':_0x1a5ee0(0x280),'type':_0x1a5ee0(0x1a2),'role':_0x1a5ee0(0x28c),'read':!![],'write':![]},'native':{}}),await this[_0x1a5ee0(0x2fc)](_0x1a5ee0(0x16b),{'type':_0x1a5ee0(0x30a),'common':{'name':_0x1a5ee0(0x22a),'type':_0x1a5ee0(0x1a2),'role':_0x1a5ee0(0x28c),'read':!![],'write':![]},'native':{}}),await this[_0x1a5ee0(0x2fc)](_0x1a5ee0(0x242),{'type':'state','common':{'name':_0x1a5ee0(0x2dd),'type':_0x1a5ee0(0x1a2),'role':_0x1a5ee0(0x24d),'read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x1a5ee0(0x2fc)](_0x1a5ee0(0x2ed),{'type':'state','common':{'name':'Feedback\x20Log','type':_0x1a5ee0(0x1a2),'role':'json','read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x1a5ee0(0x2dc)](_0x1a5ee0(0x1d4),{'type':_0x1a5ee0(0x261),'common':{'name':_0x1a5ee0(0x2f0)},'native':{}}),await this[_0x1a5ee0(0x2fc)](_0x1a5ee0(0x1eb),{'type':_0x1a5ee0(0x30a),'common':{'name':_0x1a5ee0(0x24c),'type':_0x1a5ee0(0x259),'role':_0x1a5ee0(0x1d3),'read':!![],'write':![],'def':0x0},'native':{}}),await this[_0x1a5ee0(0x2fc)](_0x1a5ee0(0x2e9),{'type':_0x1a5ee0(0x30a),'common':{'name':_0x1a5ee0(0x276),'type':_0x1a5ee0(0x1a2),'role':_0x1a5ee0(0x28c),'read':!![],'write':![],'def':_0x1a5ee0(0x290)},'native':{}}),await this[_0x1a5ee0(0x2fc)]('analysis.health.notes',{'type':_0x1a5ee0(0x30a),'common':{'name':_0x1a5ee0(0x226),'type':_0x1a5ee0(0x1a2),'role':_0x1a5ee0(0x28c),'read':!![],'write':![],'def':''},'native':{}}),await this[_0x1a5ee0(0x227)](),await this[_0x1a5ee0(0x23c)]();}async[a0_0x4d47b4(0x2bd)](){const _0x5b10e8=a0_0x4d47b4;await this[_0x5b10e8(0x2dc)](_0x5b10e8(0x24e),{'type':_0x5b10e8(0x261),'common':{'name':'System\x20Status\x20&\x20Control'},'native':{}}),await this[_0x5b10e8(0x2dc)](SYSTEM_DP_MODE,{'type':_0x5b10e8(0x30a),'common':{'name':_0x5b10e8(0x2e7),'type':_0x5b10e8(0x1a2),'role':_0x5b10e8(0x30a),'read':!![],'write':!![],'def':SYSTEM_MODES[_0x5b10e8(0x2e8)],'states':{[SYSTEM_MODES[_0x5b10e8(0x2e8)]]:'Normal',[SYSTEM_MODES[_0x5b10e8(0x272)]]:_0x5b10e8(0x2df),[SYSTEM_MODES[_0x5b10e8(0x1f8)]]:_0x5b10e8(0x2ad),[SYSTEM_MODES['GUEST']]:'Gast'}},'native':{}});}async[a0_0x4d47b4(0x218)](_0x3392f3,_0x497d6b=![],_0x62a45b=![]){const _0x20daf2=a0_0x4d47b4;this['log'][_0x20daf2(0x176)]((_0x497d6b?'[TEST]\x20':'')+_0x20daf2(0x2aa)+_0x3392f3+'\x22'+(_0x62a45b?_0x20daf2(0x236):''));const _0x1d46b5=this[_0x20daf2(0x2db)];let _0x1f97dc=0x0;_0x1d46b5[_0x20daf2(0x297)]&&_0x1d46b5['notifyTelegramInstance']&&(await this[_0x20daf2(0x202)](_0x1d46b5[_0x20daf2(0x1b2)],_0x20daf2(0x171),{'text':_0x3392f3,'user':_0x1d46b5[_0x20daf2(0x2d6)]}),_0x1f97dc++);if(_0x1d46b5[_0x20daf2(0x165)]&&_0x1d46b5[_0x20daf2(0x196)]){let _0x1d1629={'message':_0x3392f3,'title':_0x62a45b?_0x20daf2(0x26f):_0x20daf2(0x1ca),'priority':_0x62a45b?0x2:0x1,'device':_0x1d46b5['notifyPushoverRecipient']};_0x62a45b&&(_0x1d1629[_0x20daf2(0x1ef)]=0x1e,_0x1d1629[_0x20daf2(0x28e)]=0xe10,_0x1d1629[_0x20daf2(0x2a7)]='siren'),await this[_0x20daf2(0x202)](_0x1d46b5['notifyPushoverInstance'],_0x20daf2(0x171),_0x1d1629),_0x1f97dc++;}return _0x1d46b5['notifyEmailEnabled']&&_0x1d46b5[_0x20daf2(0x1cf)]&&(await this[_0x20daf2(0x202)](_0x1d46b5[_0x20daf2(0x1cf)],'send',{'text':_0x3392f3,'to':_0x1d46b5[_0x20daf2(0x2ee)]}),_0x1f97dc++),_0x1d46b5[_0x20daf2(0x281)]&&_0x1d46b5[_0x20daf2(0x1d7)]&&(await this[_0x20daf2(0x202)](_0x1d46b5[_0x20daf2(0x1d7)],_0x20daf2(0x171),{'text':_0x3392f3,'phone':_0x1d46b5[_0x20daf2(0x22d)]}),_0x1f97dc++),_0x1d46b5[_0x20daf2(0x2f3)]&&_0x1d46b5['notifySignalInstance']&&(await this[_0x20daf2(0x202)](_0x1d46b5[_0x20daf2(0x16f)],_0x20daf2(0x171),{'text':_0x3392f3,'phone':_0x1d46b5[_0x20daf2(0x2c9)]}),_0x1f97dc++),_0x1f97dc;}async[a0_0x4d47b4(0x304)](){const _0x51c086=a0_0x4d47b4;try{const _0x56098c=await this['getStateAsync'](LTM_DP_RAW_LOG);if(_0x56098c&&_0x56098c[_0x51c086(0x239)])this['rawEventLog']=JSON[_0x51c086(0x19b)](_0x56098c['val']);}catch(_0x2410d1){this['rawEventLog']=[];}}async[a0_0x4d47b4(0x2b2)](){const _0xaf16fe=a0_0x4d47b4;this[_0xaf16fe(0x1ec)]['length']>RAW_LOG_MAX_SIZE&&this['rawEventLog'][_0xaf16fe(0x241)](0x0,this[_0xaf16fe(0x1ec)]['length']-RAW_LOG_MAX_SIZE),await this[_0xaf16fe(0x1da)](LTM_DP_RAW_LOG,{'val':JSON[_0xaf16fe(0x267)](this['rawEventLog']),'ack':!![]});}async[a0_0x4d47b4(0x2c4)](){const _0x2cb83a=a0_0x4d47b4;try{const _0x518825=await this['getStateAsync'](LTM_DP_DAILY_DIGESTS);if(_0x518825&&_0x518825['val'])this[_0x2cb83a(0x30d)]=JSON[_0x2cb83a(0x19b)](_0x518825[_0x2cb83a(0x239)]);}catch(_0x38751e){this['dailyDigests']=[];}await this[_0x2cb83a(0x294)]();}async[a0_0x4d47b4(0x2eb)](_0x1d359f=!![]){const _0x250806=a0_0x4d47b4,_0x506c61=this[_0x250806(0x2db)]['ltmLtbWindowDays']||0x3c;this['dailyDigests'][_0x250806(0x2a1)]>_0x506c61&&this[_0x250806(0x30d)][_0x250806(0x241)](0x0,this[_0x250806(0x30d)]['length']-_0x506c61);await this[_0x250806(0x1da)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x250806(0x267)](this['dailyDigests']),'ack':!![]});if(_0x1d359f)await this[_0x250806(0x294)]();}[a0_0x4d47b4(0x2de)](){const _0x410eb9=a0_0x4d47b4;if(this[_0x410eb9(0x23e)])this[_0x410eb9(0x23e)][_0x410eb9(0x1b5)]();if(!this[_0x410eb9(0x2a9)]){this[_0x410eb9(0x1da)](LTM_DP_STATUS,{'val':_0x410eb9(0x1de),'ack':!![]});return;}this['ltmJob']=schedule[_0x410eb9(0x221)](LTM_SCHEDULE,()=>this[_0x410eb9(0x309)]());}[a0_0x4d47b4(0x23d)](){const _0x1edd58=a0_0x4d47b4;if(this[_0x1edd58(0x1fd)])clearInterval(this['driftAnalysisTimer']);if(!this['isProVersion'])return;this[_0x1edd58(0x1fd)]=setInterval(()=>this[_0x1edd58(0x2ca)](),(this[_0x1edd58(0x2db)]['ltmDriftCheckIntervalHours']||0x18)*0x36ee80),setTimeout(()=>this[_0x1edd58(0x2ca)](),0x1388);}async[a0_0x4d47b4(0x25b)](){const _0x50240f=a0_0x4d47b4;await this[_0x50240f(0x1da)](_0x50240f(0x25e),{'val':_0x50240f(0x18b),'ack':!![]}),await this[_0x50240f(0x1da)](_0x50240f(0x17d),{'val':this[_0x50240f(0x2a9)]?_0x50240f(0x1fc):_0x50240f(0x20d),'ack':!![]}),await this[_0x50240f(0x1da)]('analysis.isAlert',{'val':![],'ack':!![]}),await this[_0x50240f(0x1da)]('analysis.isEmergency',{'val':![],'ack':!![]}),this[_0x50240f(0x18a)]=![];}async['updateAnalysisHistory'](_0x2593c8){const _0x48d909=a0_0x4d47b4;this[_0x48d909(0x205)][_0x48d909(0x2f5)](_0x2593c8);if(this['analysisHistory']['length']>ANALYSIS_HISTORY_MAX_SIZE)this[_0x48d909(0x205)][_0x48d909(0x2ea)]();await this[_0x48d909(0x1da)]('analysis.analysisHistory',{'val':JSON[_0x48d909(0x267)](this[_0x48d909(0x205)]),'ack':!![]});}[a0_0x4d47b4(0x20f)](){const _0x22933f=a0_0x4d47b4;if(this['modeResetJob'])this['modeResetJob']['cancel']();this['modeResetJob']=schedule[_0x22933f(0x221)](MODE_RESET_SCHEDULE,async()=>{const _0x5e2ef9=_0x22933f;await this[_0x5e2ef9(0x16d)](),AUTO_RESET_MODES['includes'](this[_0x5e2ef9(0x1f2)])&&await this[_0x5e2ef9(0x1da)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x5e2ef9(0x2e8)],'ack':![]});});}async[a0_0x4d47b4(0x294)](){const _0x3fd69a=a0_0x4d47b4;if(!this['isProVersion']){await this[_0x3fd69a(0x1da)](LTM_DP_BASELINE_STATUS,{'val':_0x3fd69a(0x1de),'ack':!![]});return;}const _0x34dd4f=this[_0x3fd69a(0x30d)][_0x3fd69a(0x2a1)]>=(this[_0x3fd69a(0x2db)][_0x3fd69a(0x1ce)]||0x7)?'Aktiv\x20('+this[_0x3fd69a(0x30d)]['length']+_0x3fd69a(0x168):_0x3fd69a(0x2a6)+this[_0x3fd69a(0x30d)][_0x3fd69a(0x2a1)]+'/'+(this[_0x3fd69a(0x2db)][_0x3fd69a(0x1ce)]||0x7)+')';await this[_0x3fd69a(0x1da)](LTM_DP_BASELINE_STATUS,{'val':_0x34dd4f,'ack':!![]});}async['checkLtmObjects'](){const _0x48e1b5=a0_0x4d47b4;await this['extendObjectAsync'](_0x48e1b5(0x26a),{'type':'channel','common':{'name':_0x48e1b5(0x26a)},'native':{}}),await this['extendObjectAsync'](LTM_DP_RAW_LOG,{'type':'state','common':{'name':_0x48e1b5(0x279),'type':'string','role':_0x48e1b5(0x24d),'read':!![],'write':![]},'native':{}}),await this[_0x48e1b5(0x2dc)](LTM_DP_DAILY_DIGESTS,{'type':'state','common':{'name':_0x48e1b5(0x211),'type':_0x48e1b5(0x1a2),'role':_0x48e1b5(0x24d),'read':!![],'write':![]},'native':{}}),await this[_0x48e1b5(0x2dc)](LTM_DP_STATUS,{'type':'state','common':{'name':_0x48e1b5(0x2f9),'type':'string','role':_0x48e1b5(0x28c),'read':!![],'write':![]},'native':{}}),await this[_0x48e1b5(0x2dc)](LTM_DP_TRIGGER_DIGEST,{'type':'state','common':{'name':'Trigger\x20Digest','type':_0x48e1b5(0x291),'role':'button','read':!![],'write':!![],'def':![]},'native':{}}),await this[_0x48e1b5(0x2dc)](LTM_DP_BASELINE_STATUS,{'type':_0x48e1b5(0x30a),'common':{'name':_0x48e1b5(0x1a1),'type':'string','role':_0x48e1b5(0x28c),'read':!![],'write':![]},'native':{}});}async[a0_0x4d47b4(0x23c)](){const _0x5f19af=a0_0x4d47b4;await this[_0x5f19af(0x2dc)](LTM_DP_DRIFT_CHANNEL,{'type':'channel','common':{'name':_0x5f19af(0x188)},'native':{}}),await this[_0x5f19af(0x2dc)](LTM_DP_DRIFT_STATUS,{'type':'state','common':{'name':'Drift\x20Status','type':_0x5f19af(0x1a2),'role':_0x5f19af(0x30a),'read':!![],'write':![],'def':_0x5f19af(0x299)},'native':{}}),await this[_0x5f19af(0x2dc)](LTM_DP_DRIFT_DETAILS,{'type':_0x5f19af(0x30a),'common':{'name':'Drift\x20Details','type':_0x5f19af(0x1a2),'role':_0x5f19af(0x28c),'read':!![],'write':![]},'native':{}}),await this[_0x5f19af(0x2dc)](LTM_DP_DRIFT_LAST_CHECK,{'type':_0x5f19af(0x30a),'common':{'name':_0x5f19af(0x23b),'type':'number','role':_0x5f19af(0x24f),'read':!![],'write':![]},'native':{}});}async[a0_0x4d47b4(0x2ca)](){const _0x3515d4=a0_0x4d47b4;if(!this['isProVersion']||!this[_0x3515d4(0x247)])return;const _0x2c3193=this[_0x3515d4(0x2db)][_0x3515d4(0x26b)]||0xe;if(this[_0x3515d4(0x30d)][_0x3515d4(0x2a1)]<_0x2c3193+(this[_0x3515d4(0x2db)][_0x3515d4(0x1ce)]||0x7)){await this[_0x3515d4(0x1da)](LTM_DP_DRIFT_STATUS,{'val':_0x3515d4(0x2ef),'ack':!![]});return;}const _0x2b11f2=this[_0x3515d4(0x30d)][_0x3515d4(0x2e0)](-_0x2c3193),_0x86dc45=this[_0x3515d4(0x30d)]['slice'](0x0,this['dailyDigests']['length']-_0x2c3193),_0x3444f8=_0x3515d4(0x18c)+JSON[_0x3515d4(0x267)](_0x86dc45)+_0x3515d4(0x29f)+JSON[_0x3515d4(0x267)](_0x2b11f2);try{const _0x2f4baa=await this['geminiModel'][_0x3515d4(0x1b7)](_0x3444f8),_0x3bc601=JSON[_0x3515d4(0x19b)](_0x2f4baa[_0x3515d4(0x2b0)][_0x3515d4(0x28c)]()[_0x3515d4(0x1a5)](/```json|```/g,'')[_0x3515d4(0x286)]());_0x3bc601[_0x3515d4(0x2e3)]&&(await this[_0x3515d4(0x1da)](LTM_DP_DRIFT_STATUS,{'val':_0x3bc601[_0x3515d4(0x2e3)],'ack':!![]}),await this[_0x3515d4(0x1da)](LTM_DP_DRIFT_DETAILS,{'val':_0x3bc601['driftDetails'],'ack':!![]}),await this['setStateAsync'](LTM_DP_DRIFT_LAST_CHECK,{'val':Date[_0x3515d4(0x2d4)](),'ack':!![]}));}catch(_0xff900a){}}async[a0_0x4d47b4(0x16d)](){const _0x233826=a0_0x4d47b4;try{const _0x4952a2=await this[_0x233826(0x273)](SYSTEM_DP_MODE);_0x4952a2&&_0x4952a2[_0x233826(0x239)]&&Object[_0x233826(0x2e5)](SYSTEM_MODES)[_0x233826(0x201)](_0x4952a2[_0x233826(0x239)])?this['currentSystemMode']=_0x4952a2['val']:(this[_0x233826(0x1f2)]=SYSTEM_MODES[_0x233826(0x2e8)],await this[_0x233826(0x1da)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES['NORMAL'],'ack':!![]}));}catch(_0x1cba3d){this[_0x233826(0x1f2)]=SYSTEM_MODES[_0x233826(0x2e8)];}}async['getSystemUUID'](){const _0x3f6722=a0_0x4d47b4;try{const _0x556486=await this[_0x3f6722(0x19c)](_0x3f6722(0x178));if(_0x556486&&_0x556486[_0x3f6722(0x1c0)]&&_0x556486['native'][_0x3f6722(0x233)])return _0x556486['native']['uuid'];return _0x3f6722(0x183);}catch(_0xa34846){return _0x3f6722(0x30c);}}async[a0_0x4d47b4(0x2d0)](_0x2a35cc){const _0x3e495c=a0_0x4d47b4;if(!_0x2a35cc)return![];this[_0x3e495c(0x298)]=await this[_0x3e495c(0x257)]();if(_0x2a35cc===_0x3e495c(0x2b7)||_0x2a35cc[_0x3e495c(0x28f)](_0x3e495c(0x1e6)))return!![];return![];}[a0_0x4d47b4(0x1d5)](_0x2a374e){const _0x4861b3=a0_0x4d47b4;if(this[_0x4861b3(0x240)])clearInterval(this[_0x4861b3(0x240)]);if(this[_0x4861b3(0x1fd)])clearInterval(this[_0x4861b3(0x1fd)]);if(this['ltmJob'])this[_0x4861b3(0x23e)][_0x4861b3(0x1b5)]();if(this[_0x4861b3(0x26d)])this[_0x4861b3(0x26d)][_0x4861b3(0x1b5)]();if(this[_0x4861b3(0x1c8)])clearTimeout(this[_0x4861b3(0x1c8)]);if(this['exitGraceTimer'])clearTimeout(this['exitGraceTimer']);_0x2a374e();}async[a0_0x4d47b4(0x2e4)](_0x21b46d){const _0xf8fbb9=a0_0x4d47b4;if(typeof _0x21b46d===_0xf8fbb9(0x27d)&&_0x21b46d['message']){if(_0x21b46d[_0xf8fbb9(0x292)]===_0xf8fbb9(0x2b5)){if(!_0x21b46d['message'][_0xf8fbb9(0x20b)])return this[_0xf8fbb9(0x2cc)](_0x21b46d[_0xf8fbb9(0x214)],_0x21b46d['command'],{'success':![],'message':_0xf8fbb9(0x249)},_0x21b46d['callback']);try{const _0x2c81fb=new GoogleGenerativeAI(_0x21b46d[_0xf8fbb9(0x1b0)][_0xf8fbb9(0x20b)])['getGenerativeModel']({'model':'models/gemini-flash-latest'});await _0x2c81fb[_0xf8fbb9(0x1b7)](_0xf8fbb9(0x27b)),this[_0xf8fbb9(0x2cc)](_0x21b46d[_0xf8fbb9(0x214)],_0x21b46d[_0xf8fbb9(0x292)],{'success':!![],'message':_0xf8fbb9(0x2c8)},_0x21b46d[_0xf8fbb9(0x18e)]);}catch(_0x4cd697){this[_0xf8fbb9(0x2cc)](_0x21b46d['from'],_0x21b46d[_0xf8fbb9(0x292)],{'success':![],'message':_0x4cd697['message']},_0x21b46d[_0xf8fbb9(0x18e)]);}}else{if(_0x21b46d['command']==='testNotification'){const _0x44dd4b=await this[_0xf8fbb9(0x218)](_0xf8fbb9(0x2b6),!![]);this[_0xf8fbb9(0x2cc)](_0x21b46d['from'],_0x21b46d[_0xf8fbb9(0x292)],{'success':_0x44dd4b>0x0,'message':_0x44dd4b+_0xf8fbb9(0x210)},_0x21b46d[_0xf8fbb9(0x18e)]);}else{if(_0x21b46d[_0xf8fbb9(0x292)]===_0xf8fbb9(0x180)){if(!this[_0xf8fbb9(0x2a9)])return this[_0xf8fbb9(0x2cc)](_0x21b46d[_0xf8fbb9(0x214)],_0x21b46d[_0xf8fbb9(0x292)],{'success':![],'isPro':![]},_0x21b46d[_0xf8fbb9(0x18e)]);let _0x38b840={'status':_0xf8fbb9(0x299),'details':'','lastCheck':0x0};try{_0x38b840[_0xf8fbb9(0x1e2)]=(await this[_0xf8fbb9(0x273)](LTM_DP_DRIFT_STATUS))['val'],_0x38b840['details']=(await this['getStateAsync'](LTM_DP_DRIFT_DETAILS))[_0xf8fbb9(0x239)],_0x38b840['lastCheck']=(await this[_0xf8fbb9(0x273)](LTM_DP_DRIFT_LAST_CHECK))[_0xf8fbb9(0x239)];}catch(_0x515ef9){}this[_0xf8fbb9(0x2cc)](_0x21b46d[_0xf8fbb9(0x214)],_0x21b46d[_0xf8fbb9(0x292)],{'success':!![],'isPro':!![],'dailyDigests':this[_0xf8fbb9(0x30d)],'driftAnalysis':_0x38b840,'analysisHistory':this[_0xf8fbb9(0x205)]},_0x21b46d['callback']);}else{if(_0x21b46d[_0xf8fbb9(0x292)]==='getEnums'){const _0x43f2f9=await this['getForeignObjectsAsync'](_0xf8fbb9(0x18d),'enum'),_0x1dd0f9=[];if(_0x43f2f9)for(const _0x3712a1 in _0x43f2f9){const _0x4772ea=_0x43f2f9[_0x3712a1],_0x3c6703=(_0x4772ea['common']&&typeof _0x4772ea[_0xf8fbb9(0x181)][_0xf8fbb9(0x2b8)]==='object'?_0x4772ea['common'][_0xf8fbb9(0x2b8)]['de']:_0x4772ea[_0xf8fbb9(0x181)][_0xf8fbb9(0x2b8)])||_0x4772ea[_0xf8fbb9(0x181)]['name'];_0x1dd0f9[_0xf8fbb9(0x2d9)]({'id':_0x3712a1,'name':_0x3c6703});}this[_0xf8fbb9(0x2cc)](_0x21b46d['from'],_0x21b46d[_0xf8fbb9(0x292)],{'success':!![],'enums':_0x1dd0f9},_0x21b46d[_0xf8fbb9(0x18e)]);}else{if(_0x21b46d['command']===_0xf8fbb9(0x1dc))try{const _0x3ece83=await this['scanForDevices'](_0x21b46d[_0xf8fbb9(0x1b0)]||{});this[_0xf8fbb9(0x2cc)](_0x21b46d[_0xf8fbb9(0x214)],_0x21b46d[_0xf8fbb9(0x292)],{'success':!![],'devices':_0x3ece83},_0x21b46d[_0xf8fbb9(0x18e)]);}catch(_0x28f06a){this[_0xf8fbb9(0x2cc)](_0x21b46d['from'],_0x21b46d['command'],{'success':![],'error':_0x28f06a[_0xf8fbb9(0x1b0)]},_0x21b46d[_0xf8fbb9(0x18e)]);}else{if(_0x21b46d[_0xf8fbb9(0x292)]==='submitFeedback'){const {historyId:_0x31f016,rating:_0xd1402e,comment:_0x40726e,alertReason:_0x5dcb0c}=_0x21b46d[_0xf8fbb9(0x1b0)];_0x31f016&&_0xd1402e?(await this[_0xf8fbb9(0x301)]({'timestamp':Date[_0xf8fbb9(0x2d4)](),'historyId':_0x31f016,'rating':_0xd1402e,'comment':_0x40726e,'alertReason':_0x5dcb0c}),this[_0xf8fbb9(0x2cc)](_0x21b46d[_0xf8fbb9(0x214)],_0x21b46d[_0xf8fbb9(0x292)],{'success':!![]},_0x21b46d[_0xf8fbb9(0x18e)])):this[_0xf8fbb9(0x2cc)](_0x21b46d[_0xf8fbb9(0x214)],_0x21b46d[_0xf8fbb9(0x292)],{'success':![],'error':_0xf8fbb9(0x173)},_0x21b46d['callback']);}}}}}}}}}if(require[a0_0x4d47b4(0x2a4)]!==module)module[a0_0x4d47b4(0x17a)]=_0x2f5760=>new CogniLiving(_0x2f5760);else new CogniLiving();