const a0_0x4e310a=a0_0x12cc;(function(_0x374422,_0x5e0bd4){const _0x41fb5d=a0_0x12cc,_0x436619=_0x374422();while(!![]){try{const _0x5bd029=parseInt(_0x41fb5d(0x138))/0x1+parseInt(_0x41fb5d(0x180))/0x2*(-parseInt(_0x41fb5d(0x17c))/0x3)+parseInt(_0x41fb5d(0x1dd))/0x4+-parseInt(_0x41fb5d(0x18a))/0x5*(-parseInt(_0x41fb5d(0x112))/0x6)+-parseInt(_0x41fb5d(0x123))/0x7+parseInt(_0x41fb5d(0xeb))/0x8*(parseInt(_0x41fb5d(0x19a))/0x9)+-parseInt(_0x41fb5d(0x19c))/0xa*(parseInt(_0x41fb5d(0x1c3))/0xb);if(_0x5bd029===_0x5e0bd4)break;else _0x436619['push'](_0x436619['shift']());}catch(_0x318793){_0x436619['push'](_0x436619['shift']());}}}(a0_0x11f5,0x3e792));const a0_0x402749=(function(){let _0xe4c4a2=!![];return function(_0x4ba42b,_0x2272e6){const _0x3d9c41=_0xe4c4a2?function(){if(_0x2272e6){const _0x1e9428=_0x2272e6['apply'](_0x4ba42b,arguments);return _0x2272e6=null,_0x1e9428;}}:function(){};return _0xe4c4a2=![],_0x3d9c41;};}()),a0_0x1f28ed=a0_0x402749(this,function(){const _0x16dd65=a0_0x12cc;return a0_0x1f28ed[_0x16dd65(0x1a6)]()[_0x16dd65(0x1a4)](_0x16dd65(0x103))[_0x16dd65(0x1a6)]()[_0x16dd65(0x12a)](a0_0x1f28ed)[_0x16dd65(0x1a4)](_0x16dd65(0x103));});a0_0x1f28ed();function a0_0x12cc(_0x120e37,_0x9dbed4){const _0x4e4eb6=a0_0x11f5();return a0_0x12cc=function(_0x1f28ed,_0x402749){_0x1f28ed=_0x1f28ed-0xe0;let _0x11f5a3=_0x4e4eb6[_0x1f28ed];return _0x11f5a3;},a0_0x12cc(_0x120e37,_0x9dbed4);}'use strict';const utils=require(a0_0x4e310a(0x162)),{GoogleGenerativeAI}=require(a0_0x4e310a(0x12b)),installer=require(a0_0x4e310a(0x145)),scanner=require(a0_0x4e310a(0x14d)),schedulers=require(a0_0x4e310a(0x159)),topology=require(a0_0x4e310a(0x1b8)),setup=require(a0_0x4e310a(0x107)),recorder=require(a0_0x4e310a(0x12d)),pythonBridge=require(a0_0x4e310a(0x167)),aiAgent=require('./lib/ai_agent'),deadMan=require('./lib/dead_man'),automation=require('./lib/automation'),GEMINI_MODEL=a0_0x4e310a(0x106),ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};function a0_0x11f5(){const _0x18f251=['analysis.energy.ventilationAlerts','Adapter','eventHistory','temperature','setupBriefingScheduler','bind','getForeignObjectAsync','setObjectNotExistsAsync','TRAIN_ENERGY','./lib/installer','presenceDevices','heiter','cogni-living\x20adapter\x20starting\x20(v','LTM.triggerDailyDigest','simulateButler','{\x22default\x22:\x2021}','type','./lib/scanner','abs','abortExitTimer','checkWifiPresence','val','sort','analysis.automation.targetValue','command','updateLocation','updateTopology','ANALYZE_TREND','analysisTimer','./lib/scheduler','analysis.triggerBriefing','setState','onReady','subscribeStates','currentSystemMode','updateHealthVector','now','trackerEnabled','@iobroker/adapter-core','entries','ready','getOverviewData','SYSTEM_DP_MODE','./lib/python_bridge','TRACK_EVENT','.system.mode','fill','checkSolarCondition','onMessage','Sec-Training\x20started...','analysis.training.triggerComfort','simulateEnergyMPC','apiKey','location','modeResetJob','rawEventLog','add','debug','analysis.security.learningStatus','analysis.training.triggerHealth','isGracePeriodActive','analysis.energy.warmupTargets','Lernphase\x20(','analysis.automation.targetId','48JTxchG','analysis.health.todayVector','config','createAllObjects','63376cnigpr','scanThermostats','isProVersion','setupLtmScheduler','log','sensorLastValues','automation.triggerAction','useWeather','analysis.energy.pinnForecast','getStateAsync','57845DrmAwk','checkThermostats','json','getOutsideTemperatureNumeric','scanDevices','.communicate.request','getForeignStateAsync','ack','inactivityThresholdHours','testContext','Party\x20Mode','instance','sendTo','analysis.energy.insulationScore','Verbindung\x20erfolgreich!','getHours','459CaefiO','runAutopilot','10SbfUej','version','\x20Tage)','SET_LEARNING_MODE','timestamp','getGenerativeModel','enum.rooms.*','PINN\x20AI\x20Forecast','search','dailyDigests','toString','state','startService','ðŸ””\x20Dies\x20ist\x20ein\x20Test\x20von\x20Cogni-Living.','testApiKey','LTM.dailyDigests','isPresent','dependencyInstallInProgress','calendarInstance','\x20min\x20ausbleiben.','TRAIN_COMFORT','main','analysis.trigger','genAI','devices','Kein\x20API\x20Key\x20Ã¼bergeben','briefingJob','onUnload','./lib/topology','Kein\x20Kalender-Adapter','object','geminiModel','slice','loadSystemMode','calendarName','Fehler:\x20','_calName','exitTimer','notifyTelegramEnabled','4910158vsEDtd','setStateAsync','toLowerCase','setupDriftAnalysisScheduler','system.presenceWho','values','online','klar','Notification\x20Test\x20Failed:\x20','initSystemConfig','TRAIN_SECURITY','response','exports','subscribeForeignStatesAsync','ANALYZE_GAIT','manual','Warm-Up\x20Time\x20(Minutes\x20to\x20Target)','getEnums','getLtmData','some','NORMAL','SET_TOPOLOGY','driftAnalysisTimer','ltmJob','join','setHours','1234268zXwlvy','name','runGeminiAnalysis','triggerGaitAnalysis','VACATION','updated','notifyTelegramInstance','checkCalendarTriggers','startSystem','length','guest','floor','communicate.request','setupModeResetScheduler','error','info','scanForDevices','from','ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...','triggerEnergyPrediction','string','getCalendarNames','53024bgiPCV','lastTrackerEventTime','Heizung\x20kann\x20','enum.functions.*','callback','updateTopologyMatrix','minDaysForBaseline','motion','getMinutes','runPythonHealthCheck','Simulation\x20durch\x20Admin\x20(Test)','forEach','analysis.energy.rlPenalties','SYSTEM_MODES','LTM.trainingData.thermodynamics','sendNotification','daswetter.0','find','getState','application/json','trackerHeartbeat','triggerBriefing','analysisHistory','analysis.training.triggerTopology','(((.+)+)+)+$','isSolar','analysis.topology.structure','models/gemini-flash-latest','./lib/setup','onStateChange','sendMorningBriefing','runBaselineDriftAnalysis','.data.table','TRAIN_HEALTH','clear','analysis.automation.patternDetected','sunny','triggerDailyDigest','enum','246vuftuk','analysisInterval','push','LTM.trainingData.sequences','analysis.automation.description','includes','stateChange','PYTHON_EXE','systemConfig','Active\x20Ventilation\x20Alerts','cancel','Guest\x20Mode',')\x20-\x20Phase\x20D\x20(Evolution)','analysis.training.triggerSecurity','stringify','Aktiv\x20(','exitGraceTimer','757666xnkgMR','Gemini\x20AI\x20initialized.','createDailyDigest','scores','NextHours.Location_1.Day_1.current.symbol_desc','unload','parse','constructor','@google/generative-ai','Current.WeatherText','./lib/recorder','LTM.baselineStatus','Test','initZombies','analysis.automation.triggerAction','sonn','OPTIMIZE_ENERGY','geminiApiKey','common','WiFi\x20Presence\x20detected.','message','196590oxZyHQ','stopService','send','Kein\x20Wetter-Adapter'];a0_0x11f5=function(){return _0x18f251;};return a0_0x11f5();}class CogniLiving extends utils[a0_0x4e310a(0x13d)]{constructor(_0x333342){const _0x1ec4d2=a0_0x4e310a;super({..._0x333342,'name':'cogni-living'}),this[_0x1ec4d2(0x13e)]=[],this['analysisHistory']=[],this[_0x1ec4d2(0x173)]=[],this[_0x1ec4d2(0x1a5)]=[],this['sensorLastValues']={},this[_0x1ec4d2(0x11a)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x1ec4d2(0x1ac)]=!![],this[_0x1ec4d2(0x1c1)]=null,this[_0x1ec4d2(0x122)]=null,this[_0x1ec4d2(0x178)]=![],this[_0x1ec4d2(0x1b3)]=null,this[_0x1ec4d2(0x1bb)]=null,this[_0x1ec4d2(0x15e)]=setup[_0x1ec4d2(0xf8)]['NORMAL'],this['isProVersion']=![],this['lastAlertState']=![],this[_0x1ec4d2(0x158)]=null,this['ltmJob']=null,this[_0x1ec4d2(0x172)]=null,this['driftAnalysisTimer']=null,this['briefingJob']=null,this[_0x1ec4d2(0x1ad)]=![],this[_0x1ec4d2(0xff)]=null,this[_0x1ec4d2(0xec)]=Date[_0x1ec4d2(0x160)](),this['on'](_0x1ec4d2(0x164),this[_0x1ec4d2(0x15c)][_0x1ec4d2(0x141)](this)),this['on'](_0x1ec4d2(0x118),this[_0x1ec4d2(0x108)][_0x1ec4d2(0x141)](this)),this['on'](_0x1ec4d2(0x128),this[_0x1ec4d2(0x1b7)][_0x1ec4d2(0x141)](this)),this['on'](_0x1ec4d2(0x137),this['onMessage'][_0x1ec4d2(0x141)](this));}async[a0_0x4e310a(0x15c)](){const _0xfbfb10=a0_0x4e310a;this['log'][_0xfbfb10(0xe4)](_0xfbfb10(0x148)+this[_0xfbfb10(0x19d)]+_0xfbfb10(0x11e));if(!installer['checkAndInstall'](this,()=>this[_0xfbfb10(0x1e5)]()))return;}async[a0_0x4e310a(0x1e5)](){const _0x1bf2a4=a0_0x4e310a;await setup[_0x1bf2a4(0x130)](this);try{this['isProVersion']=await setup['checkLicense'](this[_0x1bf2a4(0x17e)]['licenseKey']);}catch(_0x2a3e4a){}if(!this[_0x1bf2a4(0x17e)][_0x1bf2a4(0x192)]||this['config'][_0x1bf2a4(0x192)]<0.1)this['config'][_0x1bf2a4(0x192)]=0xc;await setup['initHistory'](this),await setup[_0x1bf2a4(0x1cc)](this);if(this['config'][_0x1bf2a4(0x134)])try{this[_0x1bf2a4(0x1b3)]=new GoogleGenerativeAI(this[_0x1bf2a4(0x17e)]['geminiApiKey']),this[_0x1bf2a4(0x1bb)]=this[_0x1bf2a4(0x1b3)][_0x1bf2a4(0x1a1)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x1bf2a4(0xfe)}}),this[_0x1bf2a4(0x184)][_0x1bf2a4(0xe4)](_0x1bf2a4(0x124));}catch(_0x2d54e0){this[_0x1bf2a4(0x184)][_0x1bf2a4(0xe3)]('Gemini\x20Init\x20Error:\x20'+_0x2d54e0[_0x1bf2a4(0x137)]);}await setup[_0x1bf2a4(0x17f)](this),await this[_0x1bf2a4(0x1bd)](),await this['setObjectNotExistsAsync'](_0x1bf2a4(0x188),{'type':_0x1bf2a4(0x1a7),'common':{'name':_0x1bf2a4(0x1a3),'type':_0x1bf2a4(0xe9),'role':_0x1bf2a4(0x18c),'read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x1bf2a4(0x13c),{'type':_0x1bf2a4(0x1a7),'common':{'name':_0x1bf2a4(0x11b),'type':_0x1bf2a4(0xe9),'role':_0x1bf2a4(0x18c),'read':!![],'write':![]},'native':{}}),await this[_0x1bf2a4(0x143)]('analysis.energy.warmupTimes',{'type':_0x1bf2a4(0x1a7),'common':{'name':_0x1bf2a4(0x1d3),'type':_0x1bf2a4(0xe9),'role':_0x1bf2a4(0x18c),'read':!![],'write':![]},'native':{}}),await this[_0x1bf2a4(0x143)](_0x1bf2a4(0x179),{'type':_0x1bf2a4(0x1a7),'common':{'name':'Warm-Up\x20Target\x20Temps\x20(JSON)','type':_0x1bf2a4(0xe9),'role':_0x1bf2a4(0x18c),'read':!![],'write':!![],'def':_0x1bf2a4(0x14b)},'native':{}}),await this[_0x1bf2a4(0x143)](_0x1bf2a4(0xf7),{'type':_0x1bf2a4(0x1a7),'common':{'name':'Reinforcement\x20Learning\x20Penalties','type':'string','role':_0x1bf2a4(0x18c),'read':!![],'write':![],'def':'{}'},'native':{}});try{const _0x3b9ac5=await this[_0x1bf2a4(0x189)]('LTM.rawEventLog');if(_0x3b9ac5&&_0x3b9ac5[_0x1bf2a4(0x151)])this[_0x1bf2a4(0x173)]=JSON[_0x1bf2a4(0x129)](_0x3b9ac5[_0x1bf2a4(0x151)]);}catch(_0x3a5d72){this['rawEventLog']=[];}try{const _0x406c31=await this['getStateAsync'](_0x1bf2a4(0x1ab));if(_0x406c31&&_0x406c31[_0x1bf2a4(0x151)])this['dailyDigests']=JSON['parse'](_0x406c31[_0x1bf2a4(0x151)]);}catch(_0x178d45){this[_0x1bf2a4(0x1a5)]=[];}const _0x562659=this[_0x1bf2a4(0x1a5)][_0x1bf2a4(0x1e6)]>=(this[_0x1bf2a4(0x17e)][_0x1bf2a4(0xf1)]||0x7)?_0x1bf2a4(0x121)+this[_0x1bf2a4(0x1a5)][_0x1bf2a4(0x1e6)]+_0x1bf2a4(0x19e):_0x1bf2a4(0x17a)+this[_0x1bf2a4(0x1a5)][_0x1bf2a4(0x1e6)]+'/'+(this[_0x1bf2a4(0x17e)][_0x1bf2a4(0xf1)]||0x7)+')';await this['setStateAsync'](_0x1bf2a4(0x12e),{'val':_0x562659,'ack':!![]}),this[_0x1bf2a4(0x15d)](_0x1bf2a4(0x1b2)),this[_0x1bf2a4(0x15d)](_0x1bf2a4(0x149)),this[_0x1bf2a4(0x15d)]('system.mode'),this['subscribeStates'](_0x1bf2a4(0x15a)),this[_0x1bf2a4(0x15d)](_0x1bf2a4(0x131)),this[_0x1bf2a4(0x15d)]('analysis.automation.autoApply'),this[_0x1bf2a4(0x15d)](_0x1bf2a4(0x11f)),this[_0x1bf2a4(0x15d)]('analysis.training.triggerHealth'),this[_0x1bf2a4(0x15d)]('analysis.training.triggerEnergy'),this[_0x1bf2a4(0x15d)](_0x1bf2a4(0x16e)),this[_0x1bf2a4(0x15d)](_0x1bf2a4(0x102)),this[_0x1bf2a4(0x15d)]('analysis.energy.mpcActive');const _0x17042a=this[_0x1bf2a4(0x17e)][_0x1bf2a4(0x1b4)];if(_0x17042a)for(const _0x4ac8fb of _0x17042a){await this['subscribeForeignStatesAsync'](_0x4ac8fb['id']);}const _0x24c4ce=this[_0x1bf2a4(0x17e)][_0x1bf2a4(0x146)];if(_0x24c4ce)for(const _0x8a9930 of _0x24c4ce){await this[_0x1bf2a4(0x1d0)](_0x8a9930);}if(this[_0x1bf2a4(0x17e)][_0x1bf2a4(0x1c2)]&&this[_0x1bf2a4(0x17e)][_0x1bf2a4(0x1e3)])await this['subscribeForeignStatesAsync'](this[_0x1bf2a4(0x17e)][_0x1bf2a4(0x1e3)]+_0x1bf2a4(0x18f));setTimeout(()=>this[_0x1bf2a4(0x150)](),0x1388);if(this[_0x1bf2a4(0x158)])clearInterval(this[_0x1bf2a4(0x158)]);const _0x495fd3=this[_0x1bf2a4(0x17e)][_0x1bf2a4(0x113)]||0xf;_0x495fd3>0x0&&(this[_0x1bf2a4(0x158)]=setInterval(()=>{const _0x2281c3=_0x1bf2a4;this[_0x2281c3(0x19b)](),automation[_0x2281c3(0x1e4)](this);},_0x495fd3*0x3c*0x3e8)),setTimeout(()=>automation['checkCalendarTriggers'](this),0x2710),this[_0x1bf2a4(0x17e)][_0x1bf2a4(0x161)]!==![]&&(this[_0x1bf2a4(0xff)]=setInterval(()=>{const _0xb87f14=_0x1bf2a4;if(this[_0xb87f14(0x182)]){const _0x5c10af=Date[_0xb87f14(0x160)](),_0x497d9d=this[_0xb87f14(0xec)]||_0x5c10af,_0x29f22b=(_0x5c10af-_0x497d9d)/0x3e8;_0x29f22b>0x2&&(this[_0xb87f14(0xec)]=_0x5c10af,pythonBridge[_0xb87f14(0x13a)](this,_0xb87f14(0x168),{'room':null,'dt':_0x29f22b}));}},0xbb8)),schedulers[_0x1bf2a4(0x183)](this,()=>aiAgent['createDailyDigest'](this,pythonBridge)),schedulers[_0x1bf2a4(0xe2)](this),schedulers[_0x1bf2a4(0x1c6)](this,()=>aiAgent[_0x1bf2a4(0x10a)](this)),schedulers[_0x1bf2a4(0x140)](this,()=>aiAgent[_0x1bf2a4(0x109)](this)),pythonBridge[_0x1bf2a4(0x1a8)](this,installer[_0x1bf2a4(0x119)]),setTimeout(async()=>{const _0x1bdf02=_0x1bf2a4;await topology['updateTopology'](this);try{const _0x9ef242=await this['getStateAsync'](_0x1bdf02(0x105));if(_0x9ef242&&_0x9ef242[_0x1bdf02(0x151)])pythonBridge[_0x1bdf02(0x13a)](this,_0x1bdf02(0x1d8),JSON[_0x1bdf02(0x129)](_0x9ef242[_0x1bdf02(0x151)]));}catch(_0x588436){}this[_0x1bdf02(0xf4)](),this[_0x1bdf02(0x1e0)](),this[_0x1bdf02(0xe8)](),this[_0x1bdf02(0x15f)]();},0x1388);}['onUnload'](_0x506e26){const _0x2c9cc4=a0_0x4e310a;if(this[_0x2c9cc4(0x158)])clearInterval(this[_0x2c9cc4(0x158)]);if(this[_0x2c9cc4(0x1d9)])clearInterval(this[_0x2c9cc4(0x1d9)]);if(this[_0x2c9cc4(0xff)])clearInterval(this[_0x2c9cc4(0xff)]);if(this[_0x2c9cc4(0x1da)])this[_0x2c9cc4(0x1da)][_0x2c9cc4(0x11c)]();if(this[_0x2c9cc4(0x172)])this[_0x2c9cc4(0x172)]['cancel']();if(this[_0x2c9cc4(0x1b6)])this[_0x2c9cc4(0x1b6)][_0x2c9cc4(0x11c)]();recorder[_0x2c9cc4(0x14f)](this),pythonBridge[_0x2c9cc4(0x139)](this),_0x506e26();}async['onStateChange'](_0x3593a4,_0x1b545d){const _0x5d9be8=a0_0x4e310a;if(!_0x1b545d||this[_0x5d9be8(0x1ad)])return;if(_0x3593a4[_0x5d9be8(0x117)]('telegram')&&_0x3593a4['endsWith'](_0x5d9be8(0xe1))&&_0x1b545d[_0x5d9be8(0x151)])return;if(_0x3593a4===this['namespace']+_0x5d9be8(0x169)){if(_0x1b545d[_0x5d9be8(0x151)]&&Object[_0x5d9be8(0x1c8)](setup['SYSTEM_MODES'])[_0x5d9be8(0x117)](_0x1b545d[_0x5d9be8(0x151)])){this[_0x5d9be8(0x15e)]=_0x1b545d['val'];if(_0x1b545d[_0x5d9be8(0x151)]===setup[_0x5d9be8(0xf8)][_0x5d9be8(0x1e1)])await recorder['setPresence'](this,![]);else await recorder['setPresence'](this,!![]);if(this[_0x5d9be8(0x182)]){let _0x1ff22d=![],_0xbbaa1d=0x0,_0x429486=_0x5d9be8(0x1d2);if(this[_0x5d9be8(0x15e)]==='party')_0x1ff22d=!![],_0xbbaa1d=0x168,_0x429486=_0x5d9be8(0x194);else this[_0x5d9be8(0x15e)]===_0x5d9be8(0x1e7)&&(_0x1ff22d=!![],_0xbbaa1d=0x5a0,_0x429486=_0x5d9be8(0x11d));pythonBridge[_0x5d9be8(0x13a)](this,_0x5d9be8(0x19f),{'active':_0x1ff22d,'duration':_0xbbaa1d,'label':_0x429486}),await this[_0x5d9be8(0x1c4)](_0x5d9be8(0x176),{'val':JSON['stringify']({'active':_0x1ff22d,'label':_0x429486,'timestamp':Date[_0x5d9be8(0x160)]()}),'ack':!![]});}}if(!_0x1b545d[_0x5d9be8(0x191)])this['setState'](_0x3593a4,{'val':this['currentSystemMode'],'ack':!![]});return;}if(!_0x1b545d[_0x5d9be8(0x191)]){if(_0x3593a4[_0x5d9be8(0x117)](_0x5d9be8(0x1b2))&&_0x1b545d[_0x5d9be8(0x151)]){this[_0x5d9be8(0x15b)](_0x3593a4,{'val':![],'ack':!![]}),aiAgent[_0x5d9be8(0x1df)](this);return;}if(_0x3593a4[_0x5d9be8(0x117)](_0x5d9be8(0x110))&&_0x1b545d[_0x5d9be8(0x151)]){this[_0x5d9be8(0x15b)](_0x3593a4,{'val':![],'ack':!![]});if(this[_0x5d9be8(0x182)])aiAgent[_0x5d9be8(0x125)](this,pythonBridge);return;}if(_0x3593a4['includes'](_0x5d9be8(0x100))&&_0x1b545d[_0x5d9be8(0x151)]){this[_0x5d9be8(0x15b)](_0x3593a4,{'val':![],'ack':!![]}),aiAgent[_0x5d9be8(0x109)](this);return;}if(_0x3593a4[_0x5d9be8(0x117)](_0x5d9be8(0x186))&&_0x1b545d[_0x5d9be8(0x151)]){this[_0x5d9be8(0x15b)](_0x3593a4,{'val':![],'ack':!![]}),aiAgent['executeAutomationAction'](this);return;}if(_0x3593a4[_0x5d9be8(0x117)](_0x5d9be8(0x11f))&&_0x1b545d[_0x5d9be8(0x151)]){this[_0x5d9be8(0x15b)](_0x3593a4,{'val':![],'ack':!![]});if(this[_0x5d9be8(0x182)])try{const _0x59239e=await this[_0x5d9be8(0x189)](_0x5d9be8(0x115));if(_0x59239e&&_0x59239e['val']){const _0x405c97=JSON[_0x5d9be8(0x129)](_0x59239e['val']);this[_0x5d9be8(0x1c4)]('analysis.training.status',{'val':_0x5d9be8(0x16d),'ack':!![]}),pythonBridge[_0x5d9be8(0x13a)](this,_0x5d9be8(0x1cd),{'sequences':_0x405c97});}}catch(_0x31a463){}return;}if(_0x3593a4['includes'](_0x5d9be8(0x177))&&_0x1b545d[_0x5d9be8(0x151)]){this[_0x5d9be8(0x15b)](_0x3593a4,{'val':![],'ack':!![]});if(this[_0x5d9be8(0x182)])try{const _0x4c33fe=await this[_0x5d9be8(0x189)](_0x5d9be8(0x1ab));if(_0x4c33fe&&_0x4c33fe[_0x5d9be8(0x151)])pythonBridge[_0x5d9be8(0x13a)](this,_0x5d9be8(0x10c),{'digests':JSON[_0x5d9be8(0x129)](_0x4c33fe[_0x5d9be8(0x151)])});}catch(_0x4e33e2){}return;}if(_0x3593a4[_0x5d9be8(0x117)]('analysis.training.triggerEnergy')&&_0x1b545d[_0x5d9be8(0x151)]){this[_0x5d9be8(0x15b)](_0x3593a4,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x265ce2=await this[_0x5d9be8(0x189)](_0x5d9be8(0xf9));if(_0x265ce2&&_0x265ce2[_0x5d9be8(0x151)])pythonBridge[_0x5d9be8(0x13a)](this,_0x5d9be8(0x144),{'points':JSON[_0x5d9be8(0x129)](_0x265ce2['val'])});}catch(_0x5eae74){}return;}if(_0x3593a4['includes'](_0x5d9be8(0x16e))&&_0x1b545d[_0x5d9be8(0x151)]){this['setState'](_0x3593a4,{'val':![],'ack':!![]});if(this[_0x5d9be8(0x182)])try{const _0x1f6385=await this[_0x5d9be8(0x189)]('LTM.rawEventLog');if(_0x1f6385&&_0x1f6385[_0x5d9be8(0x151)])pythonBridge['send'](this,_0x5d9be8(0x1b0),{'events':JSON[_0x5d9be8(0x129)](_0x1f6385[_0x5d9be8(0x151)])});}catch(_0x6adfee){}return;}if(_0x3593a4['includes'](_0x5d9be8(0x102))&&_0x1b545d[_0x5d9be8(0x151)]){this[_0x5d9be8(0x15b)](_0x3593a4,{'val':![],'ack':!![]}),topology[_0x5d9be8(0x156)](this);return;}}if(this['config'][_0x5d9be8(0x146)]&&this[_0x5d9be8(0x17e)][_0x5d9be8(0x146)][_0x5d9be8(0x117)](_0x3593a4)){await this[_0x5d9be8(0x150)]();return;}const _0x4c1fb8=(this['config'][_0x5d9be8(0x1b4)]||[])[_0x5d9be8(0xfc)](_0x4cef5d=>_0x4cef5d['id']===_0x3593a4);if(_0x4c1fb8){const _0x31a3b1=await recorder['processSensorEvent'](this,_0x3593a4,_0x1b545d,_0x4c1fb8);_0x31a3b1&&_0x31a3b1[_0x5d9be8(0x14c)]===_0x5d9be8(0xf2)&&_0x31a3b1[_0x5d9be8(0x171)]&&this[_0x5d9be8(0x182)]&&deadMan[_0x5d9be8(0x155)](this,_0x31a3b1[_0x5d9be8(0x171)]),(_0x4c1fb8[_0x5d9be8(0x14c)]===_0x5d9be8(0x13f)||_0x4c1fb8[_0x5d9be8(0x14c)]==='thermostat')&&automation['cleanupGhostInterventions'](this);}}async[a0_0x4e310a(0x16c)](_0x2fa43c){const _0x351bab=a0_0x4e310a;if(typeof _0x2fa43c===_0x351bab(0x1ba)&&_0x2fa43c[_0x351bab(0x137)]){if(_0x2fa43c[_0x351bab(0x154)]===_0x351bab(0x18b))try{const _0x1013a2=await automation[_0x351bab(0x181)](this);this[_0x351bab(0x196)](_0x2fa43c['from'],_0x2fa43c['command'],{'success':!![],'results':_0x1013a2},_0x2fa43c[_0x351bab(0xef)]);}catch(_0x1118e7){this[_0x351bab(0x196)](_0x2fa43c[_0x351bab(0xe6)],_0x2fa43c['command'],{'success':![],'error':_0x1118e7[_0x351bab(0x137)]},_0x2fa43c[_0x351bab(0xef)]);}else{if(_0x2fa43c['command']===_0x351bab(0x16f))try{const {current_temps:_0xf76059,t_out:_0x354aca,targets:_0x3e119e,t_forecast:_0x3ba99b}=_0x2fa43c[_0x351bab(0x137)],_0x1b9143=[];let _0x6ad8b0={};try{const _0x337e19=await this[_0x351bab(0x189)](_0x351bab(0x197));if(_0x337e19&&_0x337e19['val']){const _0xc4f2e4=JSON[_0x351bab(0x129)](_0x337e19['val']);_0x6ad8b0=_0xc4f2e4[_0x351bab(0x126)]||_0xc4f2e4;}}catch(_0x4c484c){}const _0x5e6eeb=_0x3ba99b!==undefined&&_0x3ba99b!==null?(_0x354aca+_0x3ba99b)/0x2:_0x354aca;for(const [_0x518298,_0x15d5ad]of Object[_0x351bab(0x163)](_0xf76059)){const _0x56033a=_0x3e119e[_0x518298]||0x15;if(_0x15d5ad<=_0x56033a)continue;let _0x2f23b0=_0x6ad8b0[_0x518298]||-0.5;if(_0x2f23b0>=0x0)_0x2f23b0=-0.5;const _0xad0217=Math[_0x351bab(0x14e)](_0x2f23b0),_0x2d6433=_0x15d5ad-_0x56033a;let _0x50d2a4=Math[_0x351bab(0xe0)](_0x2d6433/_0xad0217*0x3c);const _0x3944c2=_0x15d5ad-_0x354aca,_0x47bdba=_0x15d5ad-_0x5e6eeb;if(_0x47bdba!==0x0&&_0x3944c2!==0x0){const _0x4c4046=_0x3944c2/_0x47bdba;_0x50d2a4=Math['floor'](_0x50d2a4*_0x4c4046);}if(_0x50d2a4>0xf){if(_0x50d2a4>0xf0)_0x50d2a4=0xf0;_0x1b9143[_0x351bab(0x114)]({'room':_0x518298,'minutes_safe':_0x50d2a4,'target':_0x56033a,'current':_0x15d5ad,'savings_msg':_0x351bab(0xed)+_0x50d2a4+_0x351bab(0x1af)});}}_0x1b9143[_0x351bab(0x152)]((_0x1eedb3,_0x2c8777)=>_0x2c8777['minutes_safe']-_0x1eedb3['minutes_safe']),this['sendTo'](_0x2fa43c['from'],_0x2fa43c['command'],{'success':!![],'proposals':_0x1b9143},_0x2fa43c[_0x351bab(0xef)]);}catch(_0x86d58c){this[_0x351bab(0x196)](_0x2fa43c['from'],_0x2fa43c[_0x351bab(0x154)],{'success':![],'error':_0x86d58c[_0x351bab(0x137)]},_0x2fa43c['callback']);}else{if(_0x2fa43c[_0x351bab(0x154)]==='dismissAutomation')await this[_0x351bab(0x1c4)](_0x351bab(0x10e),{'val':![],'ack':!![]}),await this[_0x351bab(0x1c4)]('analysis.automation.description',{'val':'','ack':!![]}),await this[_0x351bab(0x1c4)](_0x351bab(0x17b),{'val':'','ack':!![]}),this['sendTo'](_0x2fa43c[_0x351bab(0xe6)],_0x2fa43c[_0x351bab(0x154)],{'success':!![]},_0x2fa43c[_0x351bab(0xef)]);else{if(_0x2fa43c[_0x351bab(0x154)]===_0x351bab(0x14a)){const {targetId:_0x16001d,targetValue:_0x2f5f6b}=_0x2fa43c[_0x351bab(0x137)];await this[_0x351bab(0x1c4)](_0x351bab(0x10e),{'val':!![],'ack':!![]}),await this[_0x351bab(0x1c4)]('analysis.automation.description',{'val':_0x351bab(0xf5),'ack':!![]}),await this[_0x351bab(0x1c4)](_0x351bab(0x17b),{'val':_0x16001d,'ack':!![]}),await this[_0x351bab(0x1c4)](_0x351bab(0x153),{'val':String(_0x2f5f6b),'ack':!![]}),this[_0x351bab(0x196)](_0x2fa43c[_0x351bab(0xe6)],_0x2fa43c[_0x351bab(0x154)],{'success':!![]},_0x2fa43c[_0x351bab(0xef)]);}else{if(_0x2fa43c['command']===_0x351bab(0x1aa))try{const _0x478a06=_0x2fa43c['message'][_0x351bab(0x170)];if(!_0x478a06)throw new Error(_0x351bab(0x1b5));const _0x4011f0=new GoogleGenerativeAI(_0x478a06),_0x57f560=_0x4011f0[_0x351bab(0x1a1)]({'model':GEMINI_MODEL}),_0x5c9d97=await _0x57f560['generateContent'](_0x351bab(0x12f)),_0x9d1925=await _0x5c9d97[_0x351bab(0x1ce)];if(_0x9d1925['text']())this['sendTo'](_0x2fa43c[_0x351bab(0xe6)],_0x2fa43c['command'],{'success':!![],'message':_0x351bab(0x198)},_0x2fa43c[_0x351bab(0xef)]);else throw new Error('Keine\x20Antwort\x20von\x20Gemini');}catch(_0x4a7566){this[_0x351bab(0x196)](_0x2fa43c[_0x351bab(0xe6)],_0x2fa43c['command'],{'success':![],'message':_0x4a7566[_0x351bab(0x137)]},_0x2fa43c[_0x351bab(0xef)]);}else{if(_0x2fa43c[_0x351bab(0x154)]===_0x351bab(0x18e))try{const _0x1dce66=await scanner[_0x351bab(0xe5)](this,_0x2fa43c[_0x351bab(0x137)]||{});this['sendTo'](_0x2fa43c[_0x351bab(0xe6)],_0x2fa43c[_0x351bab(0x154)],{'success':!![],'devices':_0x1dce66},_0x2fa43c['callback']);}catch(_0x27504d){this[_0x351bab(0x196)](_0x2fa43c['from'],_0x2fa43c[_0x351bab(0x154)],{'success':![],'error':_0x27504d[_0x351bab(0x137)]},_0x2fa43c[_0x351bab(0xef)]);}else{if(_0x2fa43c['command']===_0x351bab(0xf0))try{const {matrix:_0x269089}=_0x2fa43c['message'],_0x159c98=await this[_0x351bab(0x189)](_0x351bab(0x105));if(_0x159c98&&_0x159c98['val']){const _0x184233=JSON[_0x351bab(0x129)](_0x159c98['val']);_0x184233['matrix']=_0x269089,_0x184233[_0x351bab(0x1e2)]=Date[_0x351bab(0x160)](),await this[_0x351bab(0x1c4)](_0x351bab(0x105),{'val':JSON['stringify'](_0x184233),'ack':!![]}),pythonBridge[_0x351bab(0x13a)](this,_0x351bab(0x1d8),_0x184233);}this[_0x351bab(0x196)](_0x2fa43c[_0x351bab(0xe6)],_0x2fa43c[_0x351bab(0x154)],{'success':!![]},_0x2fa43c['callback']);}catch(_0xe68c6f){this['log'][_0x351bab(0xe3)](_0xe68c6f);}else{if(_0x2fa43c['command']===_0x351bab(0x1d5))this['sendTo'](_0x2fa43c['from'],_0x2fa43c[_0x351bab(0x154)],{'success':!![],'dailyDigests':this[_0x351bab(0x1a5)]||[],'analysisHistory':this[_0x351bab(0x101)]||[]},_0x2fa43c[_0x351bab(0xef)]);else{if(_0x2fa43c[_0x351bab(0x154)]===_0x351bab(0x165)){const _0x5ceb0c=this[_0x351bab(0x1a5)]['length'],_0x1d0cc6=new Array(0x18)[_0x351bab(0x16a)](0x0),_0x1217e3=new Date()[_0x351bab(0x1dc)](0x0,0x0,0x0,0x0);this['eventHistory']&&this['eventHistory']['forEach'](_0x179822=>{const _0x24e827=_0x351bab;if(_0x179822[_0x24e827(0x1a0)]>=_0x1217e3){const _0x1a43bc=new Date(_0x179822[_0x24e827(0x1a0)])[_0x24e827(0x199)]();if(_0x1a43bc>=0x0&&_0x1a43bc<0x18)_0x1d0cc6[_0x1a43bc]++;}});let _0x59138d=![],_0x3d35c8='',_0x451963='',_0x4c8e9f='';try{const _0x759f21=await this['getStateAsync']('analysis.automation.patternDetected');if(_0x759f21&&_0x759f21[_0x351bab(0x151)]){_0x59138d=!![];const _0x1858a3=await this[_0x351bab(0x189)](_0x351bab(0x116));_0x3d35c8=_0x1858a3?_0x1858a3[_0x351bab(0x151)]:'';const _0x21527a=await this[_0x351bab(0x189)]('analysis.automation.targetId');_0x451963=_0x21527a?_0x21527a['val']:'';const _0x484ccc=await this[_0x351bab(0x189)](_0x351bab(0x153));_0x4c8e9f=_0x484ccc?_0x484ccc[_0x351bab(0x151)]:'';}}catch(_0x1d7ff8){}const _0x1e26d1=await this['checkSolarCondition'](),_0x415276=(this[_0x351bab(0x17e)][_0x351bab(0x1b4)]||[])[_0x351bab(0x1d6)](_0x31ca32=>_0x31ca32['isSolar']),_0x5aa216=_0x1e26d1&&_0x415276;this['sendTo'](_0x2fa43c[_0x351bab(0xe6)],_0x2fa43c[_0x351bab(0x154)],{'success':!![],'eventHistory':this[_0x351bab(0x13e)][_0x351bab(0x1bc)](0x0,0xf),'stats':{'digestCount':_0x5ceb0c,'isPresent':this[_0x351bab(0x1ac)],'hourlyActivity':_0x1d0cc6,'solarActive':_0x5aa216},'automation':{'detected':_0x59138d,'description':_0x3d35c8,'targetId':_0x451963,'targetValue':_0x4c8e9f}},_0x2fa43c[_0x351bab(0xef)]);}else{if(_0x2fa43c['command']===_0x351bab(0x1d4)){const _0x2fdb6a=await this['getForeignObjectsAsync'](_0x351bab(0xee),'enum'),_0x597a42=[];if(_0x2fdb6a)for(const _0x26cb1b in _0x2fdb6a){const _0x43b0c3=_0x2fdb6a[_0x26cb1b],_0x307b59=(_0x43b0c3['common']&&typeof _0x43b0c3[_0x351bab(0x135)][_0x351bab(0x1de)]===_0x351bab(0x1ba)?_0x43b0c3['common']['name']['de']:_0x43b0c3[_0x351bab(0x135)][_0x351bab(0x1de)])||_0x43b0c3[_0x351bab(0x135)][_0x351bab(0x1de)];_0x597a42[_0x351bab(0x114)]({'id':_0x26cb1b,'name':_0x307b59});}const _0x37686f=await this['getForeignObjectsAsync'](_0x351bab(0x1a2),_0x351bab(0x111)),_0x2e0dd1=[];if(_0x37686f)for(const _0x9ee825 in _0x37686f){const _0x2c3318=_0x37686f[_0x9ee825],_0x5a965e=(_0x2c3318[_0x351bab(0x135)]&&typeof _0x2c3318['common'][_0x351bab(0x1de)]===_0x351bab(0x1ba)?_0x2c3318[_0x351bab(0x135)][_0x351bab(0x1de)]['de']:_0x2c3318['common'][_0x351bab(0x1de)])||_0x9ee825['split']('.')['pop']();_0x2e0dd1[_0x351bab(0x114)](_0x5a965e);}this['sendTo'](_0x2fa43c[_0x351bab(0xe6)],_0x2fa43c['command'],{'success':!![],'enums':_0x597a42,'rooms':_0x2e0dd1},_0x2fa43c[_0x351bab(0xef)]);}else{if(_0x2fa43c['command']===_0x351bab(0x193))try{let _0xd972bd=_0x351bab(0x13b),_0x2da63e=_0x351bab(0x1b9);if(this[_0x351bab(0x17e)][_0x351bab(0x187)]){const _0x41eb58=await recorder[_0x351bab(0x18d)](this);_0xd972bd=_0x41eb58!==null?_0x41eb58+'Â°C':'Daten\x20nicht\x20verfÃ¼gbar';}if(this[_0x351bab(0x17e)][_0x351bab(0x1ae)]){const _0x22e42b=await this[_0x351bab(0x142)]('system.adapter.'+this[_0x351bab(0x17e)][_0x351bab(0x1ae)]);_0x2da63e=_0x22e42b?'Verbunden':'Instanz\x20nicht\x20gefunden';}this['sendTo'](_0x2fa43c[_0x351bab(0xe6)],_0x2fa43c[_0x351bab(0x154)],{'success':!![],'weather':_0xd972bd,'calendar':_0x2da63e},_0x2fa43c[_0x351bab(0xef)]);}catch(_0x3c7efe){this['sendTo'](_0x2fa43c[_0x351bab(0xe6)],_0x2fa43c[_0x351bab(0x154)],{'success':![],'error':_0x3c7efe[_0x351bab(0x137)]},_0x2fa43c['callback']);}else{if(_0x2fa43c[_0x351bab(0x154)]===_0x351bab(0xea))try{const _0x24fb5b=_0x2fa43c['message'][_0x351bab(0x195)],_0x1ae6b2=await this[_0x351bab(0x190)](_0x24fb5b+_0x351bab(0x10b));let _0xb06f3c=[];if(_0x1ae6b2&&_0x1ae6b2['val']){const _0x1d0249=JSON[_0x351bab(0x129)](_0x1ae6b2[_0x351bab(0x151)]),_0x3fa837=new Set();Array['isArray'](_0x1d0249)&&_0x1d0249[_0x351bab(0xf6)](_0x3eba8f=>{const _0x3430b7=_0x351bab;if(_0x3eba8f[_0x3430b7(0x1c0)])_0x3fa837['add'](_0x3eba8f[_0x3430b7(0x1c0)]);else{if(_0x3eba8f[_0x3430b7(0x1be)])_0x3fa837[_0x3430b7(0x174)](_0x3eba8f[_0x3430b7(0x1be)]);}}),_0xb06f3c=Array['from'](_0x3fa837)[_0x351bab(0x152)]();}if(_0xb06f3c[_0x351bab(0x1e6)]===0x0)_0xb06f3c=['Standard'];this[_0x351bab(0x196)](_0x2fa43c[_0x351bab(0xe6)],_0x2fa43c[_0x351bab(0x154)],{'success':!![],'names':_0xb06f3c},_0x2fa43c[_0x351bab(0xef)]);}catch(_0x330ceb){this[_0x351bab(0x196)](_0x2fa43c[_0x351bab(0xe6)],_0x2fa43c[_0x351bab(0x154)],{'success':![],'error':_0x330ceb['message']},_0x2fa43c['callback']);}else{if(_0x2fa43c['command']==='testNotification')try{await setup[_0x351bab(0xfa)](this,_0x351bab(0x1a9),![],![]),this[_0x351bab(0x196)](_0x2fa43c[_0x351bab(0xe6)],_0x2fa43c[_0x351bab(0x154)],{'success':!![],'message':'Gesendet'},_0x2fa43c[_0x351bab(0xef)]);}catch(_0x36db9e){this[_0x351bab(0x184)][_0x351bab(0xe3)](_0x351bab(0x1cb)+_0x36db9e[_0x351bab(0x137)]),this[_0x351bab(0x196)](_0x2fa43c[_0x351bab(0xe6)],_0x2fa43c['command'],{'success':![],'message':_0x351bab(0x1bf)+_0x36db9e[_0x351bab(0x137)]},_0x2fa43c[_0x351bab(0xef)]);}}}}}}}}}}}}}}}async['loadSystemMode'](){const _0x211b7b=a0_0x4e310a;try{const _0x5a062b=await this[_0x211b7b(0x189)](setup['SYSTEM_DP_MODE']);_0x5a062b&&_0x5a062b[_0x211b7b(0x151)]&&Object[_0x211b7b(0x1c8)](setup[_0x211b7b(0xf8)])['includes'](_0x5a062b['val'])?this[_0x211b7b(0x15e)]=_0x5a062b[_0x211b7b(0x151)]:(this[_0x211b7b(0x15e)]=setup[_0x211b7b(0xf8)][_0x211b7b(0x1d7)],await this[_0x211b7b(0x1c4)](setup[_0x211b7b(0x166)],{'val':setup['SYSTEM_MODES'][_0x211b7b(0x1d7)],'ack':!![]}));}catch(_0x576911){this['currentSystemMode']=setup['SYSTEM_MODES']['NORMAL'];}}async['checkWifiPresence'](){const _0x3dba6f=a0_0x4e310a;try{const _0x7a7fd7=this['config']['presenceDevices']||[];let _0x2beac6=![];const _0x5463db=[];for(const _0x47bda7 of _0x7a7fd7){try{const _0x2c0933=await this['getForeignStateAsync'](_0x47bda7);_0x2c0933&&(_0x2c0933[_0x3dba6f(0x151)]===!![]||_0x2c0933['val']===_0x3dba6f(0x1c9)||_0x2c0933[_0x3dba6f(0x151)]===0x1)&&(_0x2beac6=!![],_0x5463db[_0x3dba6f(0x114)](_0x47bda7));}catch(_0x2d5989){}}return await this[_0x3dba6f(0x1c4)](_0x3dba6f(0x1c7),{'val':_0x5463db[_0x3dba6f(0x1db)](',\x20'),'ack':!![]}),_0x2beac6&&(this[_0x3dba6f(0x1c1)]&&(this['log'][_0x3dba6f(0xe4)](_0x3dba6f(0x136)),recorder[_0x3dba6f(0x14f)](this)),!this[_0x3dba6f(0x1ac)]&&this[_0x3dba6f(0x15e)]===setup[_0x3dba6f(0xf8)]['NORMAL']&&await recorder['setPresence'](this,!![])),_0x2beac6;}catch(_0x2a5a45){return![];}}async['runAutopilot'](){const _0x319238=a0_0x4e310a;this[_0x319238(0x184)][_0x319238(0x175)](_0x319238(0xe7)),await aiAgent['runGeminiAnalysis'](this),this[_0x319238(0x15f)](),this[_0x319238(0x1e0)](),this[_0x319238(0xe8)]();}async[a0_0x4e310a(0x16b)](){const _0x2439c3=a0_0x4e310a,_0x32a179=['weatherunderground.0','accuweather.0',_0x2439c3(0xfb)],_0xfb1b2b=['forecast.current.weather',_0x2439c3(0x12c),_0x2439c3(0x127)];for(const _0x52a4b4 of _0x32a179){for(const _0x199b56 of _0xfb1b2b){try{const _0xa2c516=_0x52a4b4+'.'+_0x199b56,_0x53b7e1=await this[_0x2439c3(0x190)](_0xa2c516);if(_0x53b7e1&&_0x53b7e1[_0x2439c3(0x151)]){const _0x139508=String(_0x53b7e1[_0x2439c3(0x151)])[_0x2439c3(0x1c5)]();if(_0x139508['includes'](_0x2439c3(0x132))||_0x139508['includes'](_0x2439c3(0x10f))||_0x139508[_0x2439c3(0x117)](_0x2439c3(0x1ca))||_0x139508[_0x2439c3(0x117)](_0x2439c3(0x10d))||_0x139508['includes'](_0x2439c3(0x147)))return!![];}}catch(_0x34d683){}}}return![];}[a0_0x4e310a(0x1e0)](){const _0x295492=a0_0x4e310a;if(!this[_0x295492(0x182)])return;try{this[_0x295492(0xfd)](_0x295492(0x115),(_0x35c2f4,_0x4b5270)=>{const _0x4f28ca=_0x295492;_0x4b5270&&_0x4b5270['val']&&pythonBridge['send'](this,_0x4f28ca(0x1d1),{'sequences':JSON['parse'](_0x4b5270[_0x4f28ca(0x151)])});});}catch(_0x591acd){}}async[a0_0x4e310a(0xe8)](){const _0x3bb42c=a0_0x4e310a;if(!this[_0x3bb42c(0x182)])return;try{const _0x10f977=await recorder[_0x3bb42c(0x18d)](this);if(_0x10f977===null)return;const _0xd25175={},_0x51ed65={},_0xd7a1b6=this['config'][_0x3bb42c(0x1b4)]||[];for(const _0x545126 of _0xd7a1b6){if(_0x545126[_0x3bb42c(0x14c)]===_0x3bb42c(0x13f)&&_0x545126[_0x3bb42c(0x171)]){const _0x1aa188=this[_0x3bb42c(0x185)][_0x545126['id']];if(_0x1aa188!==undefined)_0xd25175[_0x545126['location']]=_0x1aa188;if(_0x545126[_0x3bb42c(0x104)])_0x51ed65[_0x545126['location']]=!![];}}const _0x5467cf=await this[_0x3bb42c(0x16b)]();let _0x5d232a={};try{const _0xed0dfa=await this[_0x3bb42c(0x189)](_0x3bb42c(0x179));if(_0xed0dfa&&_0xed0dfa['val'])_0x5d232a=JSON[_0x3bb42c(0x129)](_0xed0dfa[_0x3bb42c(0x151)]);}catch(_0x59819a){}Object['keys'](_0xd25175)[_0x3bb42c(0x1e6)]>0x0&&(pythonBridge['send'](this,'PREDICT_ENERGY',{'current_temps':_0xd25175,'t_out':_0x10f977,'is_sunny':_0x5467cf,'solar_flags':_0x51ed65,'warmup_targets':_0x5d232a}),pythonBridge[_0x3bb42c(0x13a)](this,_0x3bb42c(0x133),{'current_temps':_0xd25175,'t_out':_0x10f977,'targets':{}}));}catch(_0x223e00){}}[a0_0x4e310a(0x15f)](){const _0x542297=a0_0x4e310a;if(!this[_0x542297(0x173)]||this[_0x542297(0x173)][_0x542297(0x1e6)]===0x0)return;const _0x20055e=new Array(0x60)[_0x542297(0x16a)](0x0),_0x1c682a=new Date()['setHours'](0x0,0x0,0x0,0x0);this['rawEventLog']['forEach'](_0x2d5414=>{const _0x51d216=_0x542297,_0x5597b2=new Date(_0x2d5414[_0x51d216(0x1a0)]);if(_0x5597b2['getTime']()>=_0x1c682a){const _0x5764c5=_0x5597b2[_0x51d216(0x199)](),_0x37efc9=_0x5597b2[_0x51d216(0xf3)](),_0xebcd20=_0x5764c5*0x4+Math[_0x51d216(0xe0)](_0x37efc9/0xf);if(_0xebcd20>=0x0&&_0xebcd20<0x60)_0x20055e[_0xebcd20]++;}}),this[_0x542297(0x1c4)](_0x542297(0x17d),{'val':JSON[_0x542297(0x120)](_0x20055e),'ack':!![]});}[a0_0x4e310a(0xf4)](){const _0x5c7fb0=a0_0x4e310a;if(!this[_0x5c7fb0(0x1a5)]||this[_0x5c7fb0(0x1a5)][_0x5c7fb0(0x1e6)]<0x2)return;const _0x34c41e=this['dailyDigests']['map'](_0x563fd7=>{const _0xf08401=_0x5c7fb0,_0x45c76f=(_0x563fd7['activityLevel']||'')[_0xf08401(0x1c5)]();return ACTIVITY_LEVEL_MAP[_0x45c76f]||0x32;});pythonBridge[_0x5c7fb0(0x13a)](this,_0x5c7fb0(0x157),{'values':_0x34c41e,'tag':'Activity-Level'});}}if(require[a0_0x4e310a(0x1b1)]!==module)module[a0_0x4e310a(0x1cf)]=_0x350f78=>new CogniLiving(_0x350f78);else new CogniLiving();