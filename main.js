function a0_0x9f8f(_0x5f00ec,_0x58210a){const _0x17ecea=a0_0x25ff();return a0_0x9f8f=function(_0x470291,_0x3da8c1){_0x470291=_0x470291-0x7b;let _0x25ff36=_0x17ecea[_0x470291];return _0x25ff36;},a0_0x9f8f(_0x5f00ec,_0x58210a);}const a0_0x543e7c=a0_0x9f8f;(function(_0x357716,_0x38a7ee){const _0x2d405f=a0_0x9f8f,_0x193661=_0x357716();while(!![]){try{const _0x449651=-parseInt(_0x2d405f(0x19b))/0x1*(-parseInt(_0x2d405f(0x126))/0x2)+-parseInt(_0x2d405f(0x154))/0x3*(parseInt(_0x2d405f(0x103))/0x4)+-parseInt(_0x2d405f(0xb1))/0x5*(-parseInt(_0x2d405f(0x19e))/0x6)+parseInt(_0x2d405f(0x121))/0x7*(-parseInt(_0x2d405f(0xa1))/0x8)+-parseInt(_0x2d405f(0xeb))/0x9*(parseInt(_0x2d405f(0xab))/0xa)+parseInt(_0x2d405f(0xbd))/0xb+-parseInt(_0x2d405f(0x175))/0xc*(parseInt(_0x2d405f(0x95))/0xd);if(_0x449651===_0x38a7ee)break;else _0x193661['push'](_0x193661['shift']());}catch(_0x22bfdb){_0x193661['push'](_0x193661['shift']());}}}(a0_0x25ff,0xa2c70));const a0_0x3da8c1=(function(){let _0x54d35f=!![];return function(_0x3d78cc,_0x48c581){const _0x2c3188=_0x54d35f?function(){const _0xf76784=a0_0x9f8f;if(_0x48c581){const _0xe6c13=_0x48c581[_0xf76784(0xd9)](_0x3d78cc,arguments);return _0x48c581=null,_0xe6c13;}}:function(){};return _0x54d35f=![],_0x2c3188;};}()),a0_0x470291=a0_0x3da8c1(this,function(){const _0x95b55b=a0_0x9f8f;return a0_0x470291[_0x95b55b(0x123)]()[_0x95b55b(0x14f)](_0x95b55b(0xd8))[_0x95b55b(0x123)]()[_0x95b55b(0x107)](a0_0x470291)['search'](_0x95b55b(0xd8));});a0_0x470291();'use strict';const utils=require(a0_0x543e7c(0x11a)),{GoogleGenerativeAI}=require(a0_0x543e7c(0x9d)),path=require(a0_0x543e7c(0x115)),fs=require('fs'),installer=require(a0_0x543e7c(0xaa)),scanner=require(a0_0x543e7c(0x19c)),schedulers=require(a0_0x543e7c(0x86)),topology=require(a0_0x543e7c(0xaf)),setup=require(a0_0x543e7c(0x8b)),recorder=require(a0_0x543e7c(0xf7)),pythonBridge=require(a0_0x543e7c(0x8a)),aiAgent=require('./lib/ai_agent'),deadMan=require(a0_0x543e7c(0xdd)),automation=require(a0_0x543e7c(0xe5)),GEMINI_MODEL=a0_0x543e7c(0x140);class CogniLiving extends utils[a0_0x543e7c(0x11d)]{constructor(_0x510f6c){const _0xdfcf08=a0_0x543e7c;super({..._0x510f6c,'name':'cogni-living'}),this[_0xdfcf08(0x163)]=[],this[_0xdfcf08(0x177)]=[],this[_0xdfcf08(0x137)]=[],this['dailyDigests']=[],this['sensorLastValues']={},this[_0xdfcf08(0x198)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0xdfcf08(0x10f)]=!![],this[_0xdfcf08(0x19a)]=null,this[_0xdfcf08(0x9f)]=null,this['isGracePeriodActive']=![],this[_0xdfcf08(0x184)]=null,this[_0xdfcf08(0xd3)]=null,this['currentSystemMode']=setup[_0xdfcf08(0x124)][_0xdfcf08(0x192)],this[_0xdfcf08(0xff)]=![],this[_0xdfcf08(0x18b)]=![],this['analysisTimer']=null,this[_0xdfcf08(0xcf)]=null,this[_0xdfcf08(0x8c)]=null,this[_0xdfcf08(0xda)]=null,this['briefingJob']=null,this[_0xdfcf08(0xe1)]=null,this[_0xdfcf08(0x12e)]=null,this[_0xdfcf08(0x1a0)]=null,this['roomIntegratorTimer']=null,this['dependencyInstallInProgress']=![],this[_0xdfcf08(0x80)]=Date[_0xdfcf08(0xfe)](),this[_0xdfcf08(0x14e)]=null,this[_0xdfcf08(0x18a)]=Date['now'](),this['infrasoundLocked']=![],this['pressureBuffer']=[],this[_0xdfcf08(0xcc)]={'health':!![],'security':!![],'energy':!![],'comfort':!![]},this['on'](_0xdfcf08(0x17f),this[_0xdfcf08(0xd4)]['bind'](this)),this['on']('stateChange',this[_0xdfcf08(0xd7)][_0xdfcf08(0x1a7)](this)),this['on']('unload',this[_0xdfcf08(0x12c)][_0xdfcf08(0x1a7)](this)),this['on'](_0xdfcf08(0x16a),this[_0xdfcf08(0xe0)]['bind'](this));}async[a0_0x543e7c(0xd4)](){const _0x2c744f=a0_0x543e7c;this[_0x2c744f(0x7e)]['info'](_0x2c744f(0x15a)+this['version']+_0x2c744f(0x116));if(this['config'][_0x2c744f(0xb3)]!==undefined)this['activeModules'][_0x2c744f(0xbc)]=this[_0x2c744f(0x8e)][_0x2c744f(0xb3)];if(this[_0x2c744f(0x8e)]['moduleSecurity']!==undefined)this[_0x2c744f(0xcc)][_0x2c744f(0x166)]=this[_0x2c744f(0x8e)]['moduleSecurity'];if(this[_0x2c744f(0x8e)][_0x2c744f(0x186)]!==undefined)this['activeModules'][_0x2c744f(0xd6)]=this['config']['moduleEnergy'];if(this[_0x2c744f(0x8e)][_0x2c744f(0x185)]!==undefined)this['activeModules'][_0x2c744f(0x132)]=this[_0x2c744f(0x8e)][_0x2c744f(0x185)];if(this[_0x2c744f(0x8e)][_0x2c744f(0x11b)])this[_0x2c744f(0xcc)]={...this[_0x2c744f(0xcc)],...this['config'][_0x2c744f(0x11b)]};this[_0x2c744f(0xc2)]();}async[a0_0x543e7c(0xc2)](){const _0x2e3f3a=a0_0x543e7c;await setup['initZombies'](this);try{this[_0x2e3f3a(0xff)]=await setup[_0x2e3f3a(0xb6)](this[_0x2e3f3a(0x8e)]['licenseKey']);}catch(_0x146592){}if(!this[_0x2e3f3a(0x8e)][_0x2e3f3a(0x111)]||this[_0x2e3f3a(0x8e)][_0x2e3f3a(0x111)]<0.1)this[_0x2e3f3a(0x8e)][_0x2e3f3a(0x111)]=0xc;await setup[_0x2e3f3a(0xe6)](this),await setup[_0x2e3f3a(0x91)](this);try{const _0x58d252=await this[_0x2e3f3a(0xe4)]('analysis.energy.warmupTimes'),_0x5edd5c=await this[_0x2e3f3a(0xe4)](_0x2e3f3a(0x13c));_0x58d252&&_0x58d252[_0x2e3f3a(0x10d)]&&_0x5edd5c&&_0x5edd5c[_0x2e3f3a(0x10d)]&&(Date[_0x2e3f3a(0xfe)]()-_0x58d252['ts']<0x4*0xe10*0x3e8&&(this['memoryCache']={'times':JSON[_0x2e3f3a(0x158)](_0x58d252[_0x2e3f3a(0x10d)]),'sources':JSON[_0x2e3f3a(0x158)](_0x5edd5c[_0x2e3f3a(0x10d)])}));}catch(_0x574eb0){}if(this['config']['geminiApiKey'])try{this[_0x2e3f3a(0x184)]=new GoogleGenerativeAI(this[_0x2e3f3a(0x8e)][_0x2e3f3a(0x155)]),this['geminiModel']=this['genAI'][_0x2e3f3a(0x92)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x2e3f3a(0x7d)}});}catch(_0x54caee){this[_0x2e3f3a(0x7e)]['error']('Gemini\x20Init\x20Error:\x20'+_0x54caee[_0x2e3f3a(0x16a)]);}await setup['createAllObjects'](this),await this[_0x2e3f3a(0x1a8)](),await this['setObjectNotExistsAsync'](_0x2e3f3a(0x94),{'type':_0x2e3f3a(0x101),'common':{'name':'Live\x20Event\x20Pulse','type':_0x2e3f3a(0x106),'role':'value','read':!![],'write':![]},'native':{}}),await this[_0x2e3f3a(0xee)](_0x2e3f3a(0xfb),{'type':'state','common':{'name':_0x2e3f3a(0x141),'type':_0x2e3f3a(0x8f),'role':_0x2e3f3a(0x191),'read':!![],'write':![],'def':'{\x22today\x22:{},\x20\x22yesterday\x22:{},\x20\x22date\x22:\x22\x22}'},'native':{}}),await this[_0x2e3f3a(0xee)](_0x2e3f3a(0xd1),{'type':_0x2e3f3a(0x101),'common':{'name':_0x2e3f3a(0xde),'type':_0x2e3f3a(0x8f),'role':_0x2e3f3a(0x191),'read':!![],'write':![],'def':_0x2e3f3a(0x100)},'native':{}}),await this['setObjectNotExistsAsync'](_0x2e3f3a(0x15e),{'type':'state','common':{'name':'Gemini\x20Report\x20Night','type':_0x2e3f3a(0x8f),'role':_0x2e3f3a(0x183),'read':!![],'write':![],'def':_0x2e3f3a(0xe3)},'native':{}}),await this[_0x2e3f3a(0xee)](_0x2e3f3a(0xbb),{'type':'state','common':{'name':_0x2e3f3a(0xd2),'type':_0x2e3f3a(0x8f),'role':_0x2e3f3a(0x183),'read':!![],'write':![],'def':_0x2e3f3a(0xe3)},'native':{}}),await this[_0x2e3f3a(0xee)](_0x2e3f3a(0x15f),{'type':_0x2e3f3a(0x101),'common':{'name':_0x2e3f3a(0x194),'type':_0x2e3f3a(0x8f),'role':'json','read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x2e3f3a(0xee)]('analysis.health.todayRoomDetails',{'type':'state','common':{'name':_0x2e3f3a(0xc1),'type':_0x2e3f3a(0x8f),'role':_0x2e3f3a(0x191),'read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x2e3f3a(0xee)](_0x2e3f3a(0xca),{'type':_0x2e3f3a(0x101),'common':{'name':_0x2e3f3a(0x1a5),'type':'number','role':_0x2e3f3a(0x164),'unit':'%','read':!![],'write':![]},'native':{}}),await this[_0x2e3f3a(0xee)](_0x2e3f3a(0xa2),{'type':_0x2e3f3a(0x101),'common':{'name':_0x2e3f3a(0x17d),'type':_0x2e3f3a(0x8f),'role':'json','read':!![],'write':![]},'native':{}});try{const _0x37e5a4=await this[_0x2e3f3a(0xe4)](_0x2e3f3a(0x125));if(_0x37e5a4&&_0x37e5a4[_0x2e3f3a(0x10d)]){this[_0x2e3f3a(0x163)]=JSON[_0x2e3f3a(0x158)](_0x37e5a4[_0x2e3f3a(0x10d)]);if(this[_0x2e3f3a(0xff)]){const _0x1b52c6=await this['getStateAsync'](_0x2e3f3a(0x102));if(_0x1b52c6&&_0x1b52c6[_0x2e3f3a(0x10d)])this[_0x2e3f3a(0x137)]=JSON[_0x2e3f3a(0x158)](_0x1b52c6[_0x2e3f3a(0x10d)]);}this[_0x2e3f3a(0x7e)][_0x2e3f3a(0xa7)](_0x2e3f3a(0x139)+this[_0x2e3f3a(0x163)][_0x2e3f3a(0xc3)]+_0x2e3f3a(0x105));}}catch(_0xd53a4f){this['eventHistory']=[];}try{const _0x1f3180=await this[_0x2e3f3a(0xe4)](_0x2e3f3a(0x114));if(_0x1f3180&&_0x1f3180[_0x2e3f3a(0x10d)])this[_0x2e3f3a(0x178)]=JSON[_0x2e3f3a(0x158)](_0x1f3180['val']);}catch(_0x45a5f0){this['dailyDigests']=[];}const _0x2713f3=this[_0x2e3f3a(0x178)][_0x2e3f3a(0xc3)]>=(this[_0x2e3f3a(0x8e)]['minDaysForBaseline']||0x7)?_0x2e3f3a(0x170)+this['dailyDigests'][_0x2e3f3a(0xc3)]+_0x2e3f3a(0x131):_0x2e3f3a(0xd0)+this[_0x2e3f3a(0x178)]['length']+'/'+(this[_0x2e3f3a(0x8e)][_0x2e3f3a(0xdb)]||0x7)+')';await this['setStateAsync'](_0x2e3f3a(0x88),{'val':_0x2713f3,'ack':!![]}),this[_0x2e3f3a(0x17c)](_0x2e3f3a(0x176)),this['subscribeStates']('LTM.triggerDailyDigest'),this['subscribeStates'](_0x2e3f3a(0xe7));this[_0x2e3f3a(0x8e)][_0x2e3f3a(0x144)]&&this['config'][_0x2e3f3a(0x16d)]&&this[_0x2e3f3a(0xcc)]['security']&&this['subscribeForeignStates'](this[_0x2e3f3a(0x8e)][_0x2e3f3a(0x16d)]);const _0x3ac801=this['config'][_0x2e3f3a(0x151)];if(_0x3ac801)for(const _0x56dd75 of _0x3ac801){await this[_0x2e3f3a(0x10a)](_0x56dd75['id']);}const _0xc70da1=this[_0x2e3f3a(0x8e)][_0x2e3f3a(0x7c)];if(_0xc70da1)for(const _0x5d1423 of _0xc70da1){await this[_0x2e3f3a(0x10a)](_0x5d1423);}const _0x29c1ba=require(_0x2e3f3a(0x117));if(this[_0x2e3f3a(0xe1)])this['historyJob'][_0x2e3f3a(0x122)]();this['historyJob']=_0x29c1ba[_0x2e3f3a(0xbe)]('59\x2023\x20*\x20*\x20*',()=>{const _0x446925=_0x2e3f3a;this[_0x446925(0x173)]();}),setTimeout(()=>this[_0x2e3f3a(0x153)](),0x1388);if(this[_0x2e3f3a(0xc6)])clearInterval(this[_0x2e3f3a(0xc6)]);this[_0x2e3f3a(0x196)](),this[_0x2e3f3a(0xc6)]=setInterval(async()=>{const _0x5eecde=_0x2e3f3a;await this[_0x5eecde(0x196)]();},0x3c*0x3e8);if(this[_0x2e3f3a(0x1a0)])clearInterval(this['healthTrendInterval']);this[_0x2e3f3a(0x1a0)]=setInterval(()=>{const _0x5672e3=_0x2e3f3a;this[_0x5672e3(0xff)]&&this[_0x5672e3(0xcc)][_0x5672e3(0xbc)]&&this[_0x5672e3(0xbf)]();},0x4*0x3c*0x3c*0x3e8);const _0x4089f0=path[_0x2e3f3a(0x174)](__dirname,_0x2e3f3a(0x128),'bin','python');pythonBridge[_0x2e3f3a(0x13b)](this,_0x4089f0);}['onUnload'](_0x23ffb1){const _0x3e71c8=a0_0x543e7c;if(this[_0x3e71c8(0xe1)])this[_0x3e71c8(0xe1)][_0x3e71c8(0x122)]();this['saveDailyHistory']()[_0x3e71c8(0xad)](()=>{const _0x36f904=_0x3e71c8;if(this[_0x36f904(0x15b)])clearInterval(this[_0x36f904(0x15b)]);if(this['roomIntegratorTimer'])clearInterval(this[_0x36f904(0xc6)]);recorder[_0x36f904(0xc9)](this),pythonBridge['stopService'](this),_0x23ffb1();});}async[a0_0x543e7c(0x153)](){const _0x45f46f=a0_0x543e7c;if(!this[_0x45f46f(0x163)]||this['eventHistory'][_0x45f46f(0xc3)]===0x0){this[_0x45f46f(0x7e)]['warn'](_0x45f46f(0x84));return;}this[_0x45f46f(0x7e)][_0x45f46f(0xa7)](_0x45f46f(0xf6)+this[_0x45f46f(0x163)]['length']+_0x45f46f(0x9a));const _0x35bd9b=new Date()[_0x45f46f(0x193)](0x0,0x0,0x0,0x0),_0x5a8fe6=_0x45f46f(0xd1);let _0x2788a6={'history':{},'date':new Date()['toLocaleDateString']()};const _0x1fbbd8=_0x45f46f(0x15f),_0x44e897='analysis.health.todayRoomDetails';let _0x92e11c=new Array(0x30)[_0x45f46f(0x16c)](0x0),_0x1e3d51=Array[_0x45f46f(0x145)]({'length':0x30},()=>[]);this['eventHistory']['forEach'](_0x372e5d=>{const _0xf99ea0=_0x45f46f;if(_0x372e5d['timestamp']>=_0x35bd9b){if(recorder[_0xf99ea0(0x18d)](_0x372e5d['type'],_0x372e5d[_0xf99ea0(0x164)])){const _0x21f257=new Date(_0x372e5d['timestamp']),_0x4059a1=_0x21f257['getHours']()*0x2+(_0x21f257[_0xf99ea0(0x16e)]()>=0x1e?0x1:0x0);if(_0x4059a1<0x30){_0x92e11c[_0x4059a1]++;const _0x194989=_0x372e5d[_0xf99ea0(0x149)]||_0x372e5d['name']||'?';let _0x1c4257=_0x1e3d51[_0x4059a1];!_0x1c4257[_0xf99ea0(0xc5)](_0x194989)&&_0x1c4257[_0xf99ea0(0xf4)](_0x194989);}const _0x1b7646=_0x21f257[_0xf99ea0(0xe2)]();let _0x3ba9d4=_0x372e5d[_0xf99ea0(0x149)]||_0xf99ea0(0xcb);const _0x473d9b=(this[_0xf99ea0(0x8e)][_0xf99ea0(0x151)]||[])[_0xf99ea0(0xdc)](_0x1cbd37=>_0x1cbd37[_0xf99ea0(0x149)]===_0x3ba9d4);if(_0x473d9b)_0x3ba9d4=_0x473d9b[_0xf99ea0(0x149)];if(!_0x2788a6[_0xf99ea0(0x14b)][_0x3ba9d4])_0x2788a6[_0xf99ea0(0x14b)][_0x3ba9d4]=new Array(0x18)[_0xf99ea0(0x16c)](0x0);if(_0x2788a6[_0xf99ea0(0x14b)][_0x3ba9d4][_0x1b7646]<0x3c)_0x2788a6[_0xf99ea0(0x14b)][_0x3ba9d4][_0x1b7646]++;}}});const _0x15025d=await this['getStateAsync'](_0x5a8fe6);(!_0x15025d||!_0x15025d['val']||_0x15025d[_0x45f46f(0x10d)]==='{}'||_0x15025d[_0x45f46f(0x10d)]['includes'](_0x45f46f(0x146)))&&await this[_0x45f46f(0x172)](_0x5a8fe6,{'val':JSON[_0x45f46f(0x19f)](_0x2788a6),'ack':!![]}),await this[_0x45f46f(0x172)](_0x1fbbd8,{'val':JSON[_0x45f46f(0x19f)](_0x92e11c),'ack':!![]}),await this[_0x45f46f(0x172)](_0x44e897,{'val':JSON[_0x45f46f(0x19f)](_0x1e3d51),'ack':!![]}),this[_0x45f46f(0x7e)][_0x45f46f(0xa7)]('‚úÖ\x20Dashboard\x20Data\x20(Rooms\x20&\x20Timeline\x20&\x20Details)\x20restored.');}async[a0_0x543e7c(0x173)](){const _0x11162b=a0_0x543e7c;if(!this['activeModules'][_0x11162b(0xbc)])return;const _0x5279b0=new Date()[_0x11162b(0x11c)]()['split']('T')[0x0];this[_0x11162b(0x7e)][_0x11162b(0xfc)]('üíæ\x20Saving\x20Daily\x20History\x20for\x20'+_0x5279b0+_0x11162b(0x197));try{const [_0x22e798,_0x3beb0d,_0x3b2652,_0x31b03c,_0x136b9c,_0x5d5ee5]=await Promise[_0x11162b(0x142)]([this[_0x11162b(0xe4)](_0x11162b(0xd1)),this[_0x11162b(0xe4)]('analysis.health.geminiNight'),this[_0x11162b(0xe4)]('analysis.health.geminiDay'),this[_0x11162b(0xe4)](_0x11162b(0x150)),this['getStateAsync']('analysis.health.todayVector'),this[_0x11162b(0xe4)]('analysis.health.activityTrend')]),_0x190764=this[_0x11162b(0x163)][_0x11162b(0x87)](_0x1ff0bc=>_0x1ff0bc['timestamp']>=new Date()['setHours'](0x0,0x0,0x0,0x0)&&(_0x1ff0bc[_0x11162b(0x127)][_0x11162b(0x85)]()[_0x11162b(0xc5)](_0x11162b(0x130))||_0x1ff0bc[_0x11162b(0x127)]['toLowerCase']()['includes'](_0x11162b(0xfa)))&&(_0x1ff0bc[_0x11162b(0x164)]===!![]||_0x1ff0bc[_0x11162b(0x164)]==='open'))[_0x11162b(0xc3)];let _0x31e890=0x55;if(_0x5d5ee5&&_0x5d5ee5[_0x11162b(0x10d)]!==undefined)_0x31e890=Math[_0x11162b(0x97)](0x64,Math['max'](0x14,Math[_0x11162b(0x12d)](0x50+Number(_0x5d5ee5[_0x11162b(0x10d)])*0x5)));const _0x408c2e={'date':_0x5279b0,'timestamp':Date[_0x11162b(0xfe)](),'roomHistory':_0x22e798?.[_0x11162b(0x10d)]?JSON['parse'](_0x22e798['val']):{},'geminiNight':_0x3beb0d?.[_0x11162b(0x10d)]||_0x11162b(0xb5),'geminiDay':_0x3b2652?.[_0x11162b(0x10d)]||_0x11162b(0xb5),'anomalyScore':_0x31b03c?.[_0x11162b(0x10d)]||0.1,'todayVector':_0x136b9c?.[_0x11162b(0x10d)]?JSON[_0x11162b(0x158)](_0x136b9c[_0x11162b(0x10d)]):new Array(0x30)[_0x11162b(0x16c)](0x0),'batteryLevel':_0x31e890,'freshAirCount':_0x190764,'eventHistory':this[_0x11162b(0x163)]},_0x296e13=utils[_0x11162b(0x15d)](),_0x525c3c=path['join'](_0x296e13,_0x11162b(0x195),'history');if(!fs['existsSync'](_0x525c3c))fs[_0x11162b(0x19d)](_0x525c3c,{'recursive':!![]});const _0x40d155=path[_0x11162b(0x174)](_0x525c3c,_0x5279b0+_0x11162b(0x82));fs['writeFileSync'](_0x40d155,JSON[_0x11162b(0x19f)](_0x408c2e)),this['log'][_0x11162b(0xa7)](_0x11162b(0x179)+_0x40d155);}catch(_0xfdad5f){this[_0x11162b(0x7e)][_0x11162b(0x180)](_0x11162b(0x11e)+_0xfdad5f[_0x11162b(0x16a)]);}}async['integrateRoomTime'](){const _0x1687ee=a0_0x543e7c;if(!this[_0x1687ee(0x10f)])return;try{let _0x2e36ac=null;try{const _0x312f1b=await this[_0x1687ee(0xe4)]('analysis.prediction.trackerTopRoom'),_0x59e157=await this[_0x1687ee(0xe4)](_0x1687ee(0x93));if(_0x312f1b&&_0x312f1b[_0x1687ee(0x10d)]&&_0x59e157&&_0x59e157[_0x1687ee(0x10d)]&&_0x59e157[_0x1687ee(0x10d)]>0.3){if(_0x312f1b[_0x1687ee(0x10d)]!==_0x1687ee(0xcb)&&_0x312f1b[_0x1687ee(0x10d)]!=='Init...')_0x2e36ac=_0x312f1b[_0x1687ee(0x10d)];}}catch(_0x5e4dd4){}if(!_0x2e36ac){const _0x17ac6c=this[_0x1687ee(0x8e)]['devices']||[];for(const _0x3b86ce of _0x17ac6c){if(_0x3b86ce['type']===_0x1687ee(0x14d)&&_0x3b86ce['location'])try{const _0x1436ee=await this[_0x1687ee(0x1a3)](_0x3b86ce['id']);if(_0x1436ee&&(_0x1436ee[_0x1687ee(0x10d)]===!![]||_0x1436ee[_0x1687ee(0x10d)]==='on'||_0x1436ee[_0x1687ee(0x10d)]===0x1)){_0x2e36ac=_0x3b86ce[_0x1687ee(0x149)];break;}}catch(_0x349842){}}}if(!_0x2e36ac)return;const _0x393167=this['config'][_0x1687ee(0x151)]||[];let _0x3af3c4=_0x2e36ac;const _0x3bd487=_0x393167[_0x1687ee(0xdc)](_0x4c25a5=>_0x4c25a5[_0x1687ee(0x149)]&&_0x4c25a5[_0x1687ee(0x149)][_0x1687ee(0x85)]()===_0x2e36ac['toLowerCase']());if(_0x3bd487)_0x3af3c4=_0x3bd487[_0x1687ee(0x149)];const _0x127f9f='analysis.activity.roomHistory',_0x4ea2be=await this[_0x1687ee(0xe4)](_0x127f9f),_0x39d089=new Date()[_0x1687ee(0x99)]();let _0x14302a={'history':{},'date':_0x39d089};if(_0x4ea2be&&_0x4ea2be[_0x1687ee(0x10d)])try{_0x14302a=JSON[_0x1687ee(0x158)](_0x4ea2be[_0x1687ee(0x10d)]);}catch(_0x2a3e2f){}_0x14302a['date']!==_0x39d089&&(_0x14302a[_0x1687ee(0x14b)]={},_0x14302a[_0x1687ee(0xa9)]=_0x39d089);if(!_0x14302a[_0x1687ee(0x14b)][_0x3af3c4])_0x14302a[_0x1687ee(0x14b)][_0x3af3c4]=new Array(0x18)[_0x1687ee(0x16c)](0x0);const _0x4844f0=new Date()['getHours']();if(_0x14302a[_0x1687ee(0x14b)][_0x3af3c4][_0x4844f0]<0x3c)_0x14302a['history'][_0x3af3c4][_0x4844f0]++;await this[_0x1687ee(0x172)](_0x127f9f,{'val':JSON[_0x1687ee(0x19f)](_0x14302a),'ack':!![]});}catch(_0x55f96e){this[_0x1687ee(0x7e)][_0x1687ee(0x15c)]('[Integrator]\x20Error:\x20'+_0x55f96e[_0x1687ee(0x16a)]);}}async[a0_0x543e7c(0xe0)](_0x292a49){const _0x482df4=a0_0x543e7c;if(typeof _0x292a49===_0x482df4(0x169)&&_0x292a49['message']){if(_0x292a49[_0x482df4(0x156)]===_0x482df4(0x160)){const _0xe1b324=_0x292a49[_0x482df4(0x16a)][_0x482df4(0xa9)],_0x1f0b93=utils[_0x482df4(0x15d)](),_0x278138=path[_0x482df4(0x174)](_0x1f0b93,_0x482df4(0x195),'history',_0xe1b324+'.json');if(fs[_0x482df4(0x10c)](_0x278138))try{const _0x4b2fb0=JSON[_0x482df4(0x158)](fs['readFileSync'](_0x278138,_0x482df4(0x89)));this[_0x482df4(0xba)](_0x292a49['from'],_0x292a49[_0x482df4(0x156)],{'success':!![],'data':_0x4b2fb0},_0x292a49[_0x482df4(0xf0)]);}catch(_0x2d6fb9){this[_0x482df4(0xba)](_0x292a49[_0x482df4(0x145)],_0x292a49['command'],{'success':![],'error':_0x482df4(0xb9)},_0x292a49[_0x482df4(0xf0)]);}else this[_0x482df4(0xba)](_0x292a49['from'],_0x292a49[_0x482df4(0x156)],{'success':![],'error':_0x482df4(0x13a)},_0x292a49[_0x482df4(0xf0)]);}else{if(_0x292a49[_0x482df4(0x156)]===_0x482df4(0xb8)){const _0x1db1be=this[_0x482df4(0x178)][_0x482df4(0xc3)];let _0x16b3bf=new Array(0x30)['fill'](0x0),_0x9e7228=Array[_0x482df4(0x145)]({'length':0x30},()=>[]);try{const _0x14717b=await this[_0x482df4(0xe4)](_0x482df4(0x15f));if(_0x14717b&&_0x14717b[_0x482df4(0x10d)])_0x16b3bf=JSON[_0x482df4(0x158)](_0x14717b['val']);const _0x53f10f=await this[_0x482df4(0xe4)](_0x482df4(0x168));if(_0x53f10f&&_0x53f10f['val'])_0x9e7228=JSON[_0x482df4(0x158)](_0x53f10f['val']);}catch(_0x50446b){}let _0x1c73ce=new Array(0x30)[_0x482df4(0x16c)](0x0);try{const _0x3f957a=new Date();_0x3f957a[_0x482df4(0xa6)](_0x3f957a[_0x482df4(0xf8)]()-0x1);const _0x4c0ee2=_0x3f957a[_0x482df4(0x11c)]()['split']('T')[0x0],_0x20e3f2=utils[_0x482df4(0x15d)](),_0x40bd50=path[_0x482df4(0x174)](_0x20e3f2,_0x482df4(0x195),_0x482df4(0x14b),_0x4c0ee2+_0x482df4(0x82));if(fs[_0x482df4(0x10c)](_0x40bd50)){const _0x4828df=JSON[_0x482df4(0x158)](fs[_0x482df4(0xb2)](_0x40bd50,_0x482df4(0x89)));if(_0x4828df&&_0x4828df[_0x482df4(0x8d)])_0x1c73ce=_0x4828df[_0x482df4(0x8d)];}}catch(_0x946ace){}let _0x3d5d7d={'today':{},'yesterday':{}};try{const _0x3bb172=await this[_0x482df4(0xe4)]('analysis.activity.roomStats');if(_0x3bb172&&_0x3bb172['val'])_0x3d5d7d=JSON[_0x482df4(0x158)](_0x3bb172[_0x482df4(0x10d)]);}catch(_0x4be1d7){}let _0x5c25e0=null;try{const _0x235566=await this['getStateAsync']('analysis.health.activityTrend');if(_0x235566)_0x5c25e0=_0x235566[_0x482df4(0x10d)];}catch(_0x1d9d34){}if(_0x5c25e0===undefined||_0x5c25e0===null){const _0x40e5f3=_0x16b3bf[_0x482df4(0x12a)]((_0x626a4a,_0x443336)=>_0x626a4a+_0x443336,0x0),_0x13cc5a=Math[_0x482df4(0x97)](0x2,Math[_0x482df4(0xf5)](-0x2,(0x64-_0x40e5f3)/0x32));_0x5c25e0=_0x13cc5a;}let _0x52deb8=![],_0x4d70e7='',_0x617ace='',_0x3fa557='';try{const _0x5de64d=await this[_0x482df4(0xe4)](_0x482df4(0x188));if(_0x5de64d&&_0x5de64d[_0x482df4(0x10d)]){_0x52deb8=!![];const _0x3d2f82=await this[_0x482df4(0xe4)](_0x482df4(0xa5));_0x4d70e7=_0x3d2f82?_0x3d2f82[_0x482df4(0x10d)]:'';const _0x575fe6=await this[_0x482df4(0xe4)]('analysis.automation.targetId');_0x617ace=_0x575fe6?_0x575fe6['val']:'';const _0x102edb=await this['getStateAsync'](_0x482df4(0x12b));_0x3fa557=_0x102edb?_0x102edb[_0x482df4(0x10d)]:'';}}catch(_0x5e25f5){}const _0x38e0f6=await this[_0x482df4(0x152)](),_0x5e93fc=(this[_0x482df4(0x8e)][_0x482df4(0x151)]||[])[_0x482df4(0xcd)](_0x2702a5=>_0x2702a5[_0x482df4(0x113)]),_0xed40fd=_0x38e0f6&&_0x5e93fc;let _0x4ec3a8='';try{const _0x49403d=await this[_0x482df4(0xe4)](_0x482df4(0x143));if(_0x49403d&&_0x49403d[_0x482df4(0x10d)])_0x4ec3a8=_0x49403d[_0x482df4(0x10d)];}catch(_0x277b42){}this[_0x482df4(0xba)](_0x292a49[_0x482df4(0x145)],_0x292a49[_0x482df4(0x156)],{'success':!![],'eventHistory':this[_0x482df4(0x163)]['slice'](0x0,0x7d0),'stats':{'digestCount':_0x1db1be,'isPresent':this[_0x482df4(0x10f)],'hourlyActivity':_0x16b3bf,'hourlyDetails':_0x9e7228,'yesterdayActivity':_0x1c73ce,'solarActive':_0xed40fd,'presenceWho':_0x4ec3a8,'roomStats':_0x3d5d7d,'activityTrend':_0x5c25e0,'modules':this[_0x482df4(0xcc)]},'automation':{'detected':_0x52deb8,'description':_0x4d70e7,'targetId':_0x617ace,'targetValue':_0x3fa557}},_0x292a49['callback']);}else{if(_0x292a49[_0x482df4(0x156)]===_0x482df4(0x109))try{const _0x322332=await automation[_0x482df4(0x165)](this);this[_0x482df4(0xba)](_0x292a49[_0x482df4(0x145)],_0x292a49[_0x482df4(0x156)],{'success':!![],'results':_0x322332},_0x292a49['callback']);}catch(_0x1fb3df){this[_0x482df4(0xba)](_0x292a49[_0x482df4(0x145)],_0x292a49[_0x482df4(0x156)],{'success':![],'error':_0x1fb3df[_0x482df4(0x16a)]},_0x292a49['callback']);}else{if(_0x292a49[_0x482df4(0x156)]==='scanDevices')try{const _0x271ff8=await scanner[_0x482df4(0x138)](this,_0x292a49['message']||{});this[_0x482df4(0xba)](_0x292a49[_0x482df4(0x145)],_0x292a49[_0x482df4(0x156)],{'success':!![],'devices':_0x271ff8},_0x292a49['callback']);}catch(_0x24beb1){}else{if(_0x292a49[_0x482df4(0x156)]==='getEnums'){const _0x4a0c11=await this[_0x482df4(0x181)](_0x482df4(0x17e),_0x482df4(0x133)),_0x5d6af6=[];if(_0x4a0c11)for(const _0x44ccaa in _0x4a0c11){let _0x4907a8=_0x4a0c11[_0x44ccaa][_0x482df4(0x7f)][_0x482df4(0x127)];if(_0x4907a8&&typeof _0x4907a8==='object')_0x4907a8=_0x4907a8['de']||_0x4907a8['en']||Object[_0x482df4(0x13f)](_0x4907a8)[0x0]||JSON[_0x482df4(0x19f)](_0x4907a8);_0x5d6af6[_0x482df4(0xf4)]({'id':_0x44ccaa,'name':String(_0x4907a8||_0x44ccaa)});}const _0x50f471=await this['getForeignObjectsAsync']('enum.rooms.*',_0x482df4(0x133)),_0x28357d=[];if(_0x50f471)for(const _0x3e1362 in _0x50f471){let _0x47cdac=_0x50f471[_0x3e1362][_0x482df4(0x7f)][_0x482df4(0x127)];if(_0x47cdac&&typeof _0x47cdac==='object')_0x47cdac=_0x47cdac['de']||_0x47cdac['en']||Object[_0x482df4(0x13f)](_0x47cdac)[0x0]||JSON[_0x482df4(0x19f)](_0x47cdac);_0x28357d[_0x482df4(0xf4)](String(_0x47cdac||_0x3e1362[_0x482df4(0xe8)]('.')['pop']()));}this[_0x482df4(0xba)](_0x292a49[_0x482df4(0x145)],_0x292a49[_0x482df4(0x156)],{'success':!![],'enums':_0x5d6af6,'rooms':_0x28357d},_0x292a49['callback']);}else{if(_0x292a49['command']===_0x482df4(0x17a)){const _0x4f34bd=await this[_0x482df4(0x16f)](_0x482df4(0x90),_0x482df4(0x18e),{'startkey':_0x482df4(0x148),'endkey':_0x482df4(0x159)}),_0x52c159=[];if(_0x4f34bd&&_0x4f34bd[_0x482df4(0xfd)])for(const _0x35007b of _0x4f34bd['rows']){(_0x35007b['id']['startsWith'](_0x482df4(0xae))||_0x35007b['id']['startsWith'](_0x482df4(0x120))||_0x35007b['id'][_0x482df4(0x134)](_0x482df4(0x7b)))&&_0x52c159[_0x482df4(0xf4)](_0x35007b['id'][_0x482df4(0x157)]('system.adapter.',''));}this[_0x482df4(0xba)](_0x292a49['from'],_0x292a49['command'],{'success':!![],'calendars':_0x52c159},_0x292a49[_0x482df4(0xf0)]);}else{if(_0x292a49['command']==='testGemini')try{if(!this[_0x482df4(0xd3)])throw new Error(_0x482df4(0xf3));const _0x1d9029=_0x292a49[_0x482df4(0x16a)]&&_0x292a49[_0x482df4(0x16a)][_0x482df4(0xc8)]?_0x292a49['message']['prompt']:'Hallo,\x20bist\x20du\x20bereit?',_0x51957c=await this[_0x482df4(0xd3)]['generateContent'](_0x1d9029),_0x43e9e9=_0x51957c[_0x482df4(0x83)]['text']();this[_0x482df4(0xba)](_0x292a49[_0x482df4(0x145)],_0x292a49['command'],{'success':!![],'answer':_0x43e9e9},_0x292a49[_0x482df4(0xf0)]);}catch(_0x16687f){this[_0x482df4(0xba)](_0x292a49[_0x482df4(0x145)],_0x292a49[_0x482df4(0x156)],{'success':![],'error':_0x16687f[_0x482df4(0x16a)]},_0x292a49[_0x482df4(0xf0)]);}}}}}}}}}[a0_0x543e7c(0xbf)](){const _0x5dd621=a0_0x543e7c;if(!this['activeModules'][_0x5dd621(0xbc)])return;this['log']['debug'](_0x5dd621(0xf9));try{const _0x2c7ce2=this['rawEventLog']||[];pythonBridge[_0x5dd621(0x136)](this,_0x5dd621(0xb4),{'events':_0x2c7ce2});}catch(_0xad181e){this['log'][_0x5dd621(0x15c)](_0x5dd621(0xc0));}}async[a0_0x543e7c(0xd7)](_0x45124a,_0x3ed4aa){const _0x1e23f8=a0_0x543e7c;if(!_0x3ed4aa||this[_0x1e23f8(0x14a)])return;if(_0x45124a[_0x1e23f8(0xc5)](_0x1e23f8(0xed))&&_0x45124a[_0x1e23f8(0x119)](_0x1e23f8(0x81))&&_0x3ed4aa[_0x1e23f8(0x10d)])return;if(this['config']['infrasoundEnabled']&&_0x45124a===this['config'][_0x1e23f8(0x16d)]&&this[_0x1e23f8(0xcc)]['security']){this[_0x1e23f8(0xa8)](_0x3ed4aa['val']);return;}if(_0x3ed4aa[_0x1e23f8(0xc7)]&&_0x45124a[_0x1e23f8(0x119)](_0x1e23f8(0x190)))return;if(_0x45124a===this['namespace']+'.system.mode'){if(_0x3ed4aa['val']&&Object['values'](setup[_0x1e23f8(0x124)])[_0x1e23f8(0xc5)](_0x3ed4aa[_0x1e23f8(0x10d)])){this['currentSystemMode']=_0x3ed4aa[_0x1e23f8(0x10d)];if(_0x3ed4aa[_0x1e23f8(0x10d)]===setup[_0x1e23f8(0x124)][_0x1e23f8(0x162)])await recorder[_0x1e23f8(0x167)](this,![]);else await recorder[_0x1e23f8(0x167)](this,!![]);if(this[_0x1e23f8(0xff)]){let _0x198d46=![],_0x2aa0a8=0x0,_0xcda851='manual';if(this[_0x1e23f8(0xb7)]===_0x1e23f8(0x12f))_0x198d46=!![],_0x2aa0a8=0x168,_0xcda851=_0x1e23f8(0xc4);else this[_0x1e23f8(0xb7)]===_0x1e23f8(0xa0)&&(_0x198d46=!![],_0x2aa0a8=0x5a0,_0xcda851='Guest\x20Mode');pythonBridge[_0x1e23f8(0x136)](this,_0x1e23f8(0x10b),{'active':_0x198d46,'duration':_0x2aa0a8,'label':_0xcda851}),await this['setStateAsync'](_0x1e23f8(0x1a4),{'val':JSON[_0x1e23f8(0x19f)]({'active':_0x198d46,'label':_0xcda851,'timestamp':Date[_0x1e23f8(0xfe)]()}),'ack':!![]});}}if(!_0x3ed4aa[_0x1e23f8(0xc7)])this[_0x1e23f8(0x9b)](_0x45124a,{'val':this[_0x1e23f8(0xb7)],'ack':!![]});return;}if(_0x45124a['endsWith'](_0x1e23f8(0x13c))&&_0x3ed4aa['ack'])this[_0x1e23f8(0x98)](_0x3ed4aa[_0x1e23f8(0x10d)]);if(_0x45124a[_0x1e23f8(0x119)]('analysis.energy.warmupTimes')&&_0x3ed4aa[_0x1e23f8(0xc7)]&&this['activeModules']['energy'])automation[_0x1e23f8(0xdf)](this);if(!_0x3ed4aa[_0x1e23f8(0xc7)]){if(_0x45124a['includes'](_0x1e23f8(0x176))&&_0x3ed4aa[_0x1e23f8(0x10d)]){this[_0x1e23f8(0x9b)](_0x45124a,{'val':![],'ack':!![]}),aiAgent[_0x1e23f8(0x108)](this);return;}if(_0x45124a[_0x1e23f8(0xc5)]('triggerDailyDigest')&&_0x3ed4aa[_0x1e23f8(0x10d)]){this[_0x1e23f8(0x9b)](_0x45124a,{'val':![],'ack':!![]});if(this[_0x1e23f8(0xff)])aiAgent[_0x1e23f8(0x18c)](this,pythonBridge);return;}if(_0x45124a[_0x1e23f8(0xc5)](_0x1e23f8(0x11f))&&_0x3ed4aa[_0x1e23f8(0x10d)]){this[_0x1e23f8(0x9b)](_0x45124a,{'val':![],'ack':!![]}),aiAgent[_0x1e23f8(0x104)](this);return;}if(_0x45124a[_0x1e23f8(0xc5)](_0x1e23f8(0x129))&&_0x3ed4aa[_0x1e23f8(0x10d)]){this[_0x1e23f8(0x9b)](_0x45124a,{'val':![],'ack':!![]}),aiAgent['executeAutomationAction'](this);return;}if(_0x45124a[_0x1e23f8(0xc5)](_0x1e23f8(0xa4))&&_0x3ed4aa['val']){this[_0x1e23f8(0x9b)](_0x45124a,{'val':![],'ack':!![]});if(this[_0x1e23f8(0xff)])try{const _0x511260=await this['getStateAsync'](_0x1e23f8(0x112));if(_0x511260&&_0x511260['val']){const _0x12c04e=JSON[_0x1e23f8(0x158)](_0x511260['val']);this['setStateAsync'](_0x1e23f8(0x147),{'val':'Sec-Training\x20started...','ack':!![]}),pythonBridge[_0x1e23f8(0x136)](this,_0x1e23f8(0x161),{'sequences':_0x12c04e});}}catch(_0x122e5a){}return;}if(_0x45124a[_0x1e23f8(0xc5)](_0x1e23f8(0xe7))&&_0x3ed4aa[_0x1e23f8(0x10d)]){this[_0x1e23f8(0x9b)](_0x45124a,{'val':![],'ack':!![]});if(this[_0x1e23f8(0xff)])try{this['runPythonHealthCheck']();const _0x4adb59=await this[_0x1e23f8(0xe4)](_0x1e23f8(0x114));if(_0x4adb59&&_0x4adb59[_0x1e23f8(0x10d)])pythonBridge[_0x1e23f8(0x136)](this,_0x1e23f8(0x189),{'digests':JSON['parse'](_0x4adb59[_0x1e23f8(0x10d)])});aiAgent['generateHealthReport'](this,_0x1e23f8(0x18f)),setTimeout(()=>aiAgent['generateHealthReport'](this,_0x1e23f8(0x182)),0x2ee0);}catch(_0x598a8e){}return;}if(_0x45124a['includes'](_0x1e23f8(0x135))&&_0x3ed4aa['val']){this[_0x1e23f8(0x9b)](_0x45124a,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x59e854=await this[_0x1e23f8(0xe4)](_0x1e23f8(0x16b));if(_0x59e854&&_0x59e854[_0x1e23f8(0x10d)])pythonBridge['send'](this,_0x1e23f8(0x1a2),{'points':JSON[_0x1e23f8(0x158)](_0x59e854[_0x1e23f8(0x10d)])});}catch(_0x4fe3ba){}return;}if(_0x45124a[_0x1e23f8(0xc5)](_0x1e23f8(0x118))&&_0x3ed4aa['val']){this[_0x1e23f8(0x9b)](_0x45124a,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x7da8a9=await this[_0x1e23f8(0xe4)]('LTM.rawEventLog');if(_0x7da8a9&&_0x7da8a9['val']){const _0x213934={};if(this[_0x1e23f8(0x8e)][_0x1e23f8(0x151)])this[_0x1e23f8(0x8e)][_0x1e23f8(0x151)][_0x1e23f8(0x1a1)](_0x34120e=>{const _0x28d440=_0x1e23f8;if(_0x34120e['id']&&_0x34120e[_0x28d440(0x17b)])_0x213934[_0x34120e['id']]=_0x34120e[_0x28d440(0x17b)];});pythonBridge['send'](this,_0x1e23f8(0xac),{'events':JSON[_0x1e23f8(0x158)](_0x7da8a9[_0x1e23f8(0x10d)]),'deviceMap':_0x213934});}}catch(_0x20477b){}return;}if(_0x45124a[_0x1e23f8(0xc5)](_0x1e23f8(0xa3))&&_0x3ed4aa[_0x1e23f8(0x10d)]){this[_0x1e23f8(0x9b)](_0x45124a,{'val':![],'ack':!![]}),topology[_0x1e23f8(0xea)](this);if(this[_0x1e23f8(0xff)])try{const _0x53cabd=await this[_0x1e23f8(0xe4)](_0x1e23f8(0x112));if(_0x53cabd&&_0x53cabd[_0x1e23f8(0x10d)])pythonBridge[_0x1e23f8(0x136)](this,_0x1e23f8(0x1a6),{'sequences':JSON[_0x1e23f8(0x158)](_0x53cabd['val'])});}catch(_0xd3b700){}return;}}const _0x428f7=(this[_0x1e23f8(0x8e)][_0x1e23f8(0x151)]||[])['find'](_0x3cbd1a=>_0x3cbd1a['id']===_0x45124a);if(_0x428f7){const _0x317485=await recorder[_0x1e23f8(0x9c)](this,_0x45124a,_0x3ed4aa,_0x428f7);_0x317485&&this[_0x1e23f8(0x9b)](_0x1e23f8(0x94),{'val':Date[_0x1e23f8(0xfe)](),'ack':!![]});_0x317485&&_0x317485[_0x1e23f8(0x17b)]===_0x1e23f8(0x14d)&&_0x317485['location']&&this[_0x1e23f8(0xff)]&&deadMan[_0x1e23f8(0x13d)](this,_0x317485[_0x1e23f8(0x149)]);_0x3ed4aa['val']&&(_0x3ed4aa[_0x1e23f8(0x10d)]===!![]||_0x3ed4aa[_0x1e23f8(0x10d)]===0x1||String(_0x3ed4aa[_0x1e23f8(0x10d)])['toLowerCase']()===_0x1e23f8(0x10e))&&(_0x428f7[_0x1e23f8(0x17b)]&&(_0x428f7[_0x1e23f8(0x17b)][_0x1e23f8(0xc5)](_0x1e23f8(0x13e))||_0x428f7[_0x1e23f8(0x17b)]['includes'](_0x1e23f8(0x96)))&&this[_0x1e23f8(0x171)](_0x428f7));if(_0x428f7[_0x1e23f8(0x17b)]===_0x1e23f8(0x110)||_0x428f7[_0x1e23f8(0x17b)]===_0x1e23f8(0xf2)){if(this[_0x1e23f8(0xcc)][_0x1e23f8(0xd6)])automation[_0x1e23f8(0xec)](this);}}}async[a0_0x543e7c(0x98)](_0x3c3ecb){const _0x4e9c2d=a0_0x543e7c;if(!this['memoryCache']||Date[_0x4e9c2d(0xfe)]()-this[_0x4e9c2d(0x18a)]>0x493e0)return;try{const _0xbbcf18=JSON[_0x4e9c2d(0x158)](_0x3c3ecb),_0x4d90be=this[_0x4e9c2d(0x14e)]['sources'];let _0xa2b6cc=![];for(const _0x2755f7 in _0x4d90be){if(_0x4d90be[_0x2755f7][_0x4e9c2d(0xc5)]('AI')&&_0xbbcf18[_0x2755f7]&&!_0xbbcf18[_0x2755f7]['includes']('AI')){_0xa2b6cc=!![];break;}}_0xa2b6cc&&(await this[_0x4e9c2d(0x172)]('analysis.energy.warmupTimes',{'val':JSON['stringify'](this[_0x4e9c2d(0x14e)][_0x4e9c2d(0xef)]),'ack':!![]}),await this[_0x4e9c2d(0x172)](_0x4e9c2d(0x13c),{'val':JSON[_0x4e9c2d(0x19f)](this[_0x4e9c2d(0x14e)][_0x4e9c2d(0xf1)]),'ack':!![]}));}catch(_0x1e649f){}}async[a0_0x543e7c(0x1a8)](){const _0x3fd423=a0_0x543e7c;try{const _0x594fe4=await this[_0x3fd423(0xe4)](setup[_0x3fd423(0x199)]);if(_0x594fe4&&_0x594fe4[_0x3fd423(0x10d)])this[_0x3fd423(0xb7)]=_0x594fe4[_0x3fd423(0x10d)];}catch(_0x209b0f){this['currentSystemMode']=setup[_0x3fd423(0x124)][_0x3fd423(0x192)];}}async[a0_0x543e7c(0x14c)](){return![];}async[a0_0x543e7c(0xe9)](){const _0x51a4fa=a0_0x543e7c;await aiAgent[_0x51a4fa(0x108)](this);this[_0x51a4fa(0xcc)][_0x51a4fa(0xbc)]&&(this[_0x51a4fa(0x187)](),this[_0x51a4fa(0xb0)]());if(this[_0x51a4fa(0xcc)]['energy'])this[_0x51a4fa(0x9e)]();}async[a0_0x543e7c(0x152)](){return![];}['triggerGaitAnalysis'](){const _0x468c5a=a0_0x543e7c;if(!this[_0x468c5a(0xff)])return;}async['triggerEnergyPrediction'](){}['updateHealthVector'](){}async[a0_0x543e7c(0xa8)](_0x40168d){}async[a0_0x543e7c(0xd5)](_0x2ed429,_0x5bb181){}async[a0_0x543e7c(0x171)](_0x2b82f9){}async[a0_0x543e7c(0xce)](_0x19f9e8){}['sendNotification'](_0x1146df){}}if(require['main']!==module)module['exports']=_0x5c48fd=>new CogniLiving(_0x5c48fd);else new CogniLiving();function a0_0x25ff(){const _0x2bf658=['initHistory','analysis.training.triggerHealth','split','runAutopilot','updateTopology','791388gyXbbP','cleanupGhostInterventions','telegram','setObjectNotExistsAsync','times','callback','sources','thermostat','Modell\x20nicht\x20initialisiert\x20(API\x20Key\x20pr√ºfen).','push','max','‚Ü∫\x20Replaying\x20','./lib/recorder','getDate','üêç\x20Triggering\x20Python\x20Health\x20Check\x20(Activity\x20Trend)...','terrasse','analysis.activity.roomStats','debug','rows','now','isProVersion','{\x22history\x22:{}}','state','LTM.rawEventLog','5067340AxKEEC','sendMorningBriefing','\x20events\x20from\x20standard\x20storage.','number','constructor','runGeminiAnalysis','checkThermostats','subscribeForeignStatesAsync','SET_LEARNING_MODE','existsSync','val','open','isPresent','temperature','inactivityThresholdHours','LTM.trainingData.sequences','isSolar','LTM.dailyDigests','path',')\x20-\x20Phase\x20E\x20(Handlers\x20Fix)','node-schedule','analysis.training.triggerComfort','endsWith','@iobroker/adapter-core','modules','toISOString','Adapter','History\x20Save\x20Error:\x20','triggerBriefing','system.adapter.fullcalendar','721TLPhsr','cancel','toString','SYSTEM_MODES','events.history','485538Meonfc','name','.venv','automation.triggerAction','reduce','analysis.automation.targetValue','onUnload','round','trackerHeartbeat','party','haust√ºr','\x20Tage)','comfort','enum','startsWith','analysis.training.triggerEnergy','send','rawEventLog','scanForDevices','üì¶\x20Restored\x20','No\x20data','startService','analysis.energy.warmupSources','updateLocation','window','values','models/gemini-flash-latest','Room\x20Dwell\x20Time\x20Stats','all','system.presenceWho','infrasoundEnabled','from','\x22history\x22:{}','analysis.training.status','system.adapter.','location','dependencyInstallInProgress','history','checkWifiPresence','motion','memoryCache','search','analysis.security.lastScore','devices','checkSolarCondition','replayTodayEvents','3sBoxij','geminiApiKey','command','replace','parse','system.adapter.È¶ô','cogni-living\x20adapter\x20starting\x20(v','analysisTimer','warn','getAbsoluteDefaultDataDir','analysis.health.geminiNight','analysis.health.todayVector','getHistoryData','TRAIN_SECURITY','VACATION','eventHistory','value','scanThermostats','security','setPresence','analysis.health.todayRoomDetails','object','message','LTM.trainingData.thermodynamics','fill','infrasoundSensorId','getMinutes','getObjectViewAsync','Aktiv\x20(','analyzeWindowOpening','setStateAsync','saveDailyHistory','join','492IYXSzZ','analysis.trigger','analysisHistory','dailyDigests','‚úÖ\x20History\x20saved:\x20','getCalendars','type','subscribeStates','Warm-Up\x20Time','enum.functions.*','ready','error','getForeignObjectsAsync','DAY','text','genAI','moduleComfort','moduleEnergy','updateHealthVector','analysis.automation.patternDetected','TRAIN_HEALTH','bootTime','lastAlertState','createDailyDigest','isRelevantActivity','instance','NIGHT','pulse','json','NORMAL','setHours','Daily\x20Activity\x20Vector\x20(48x30min)','cogni-living','integrateRoomTime','...','systemConfig','SYSTEM_DP_MODE','exitTimer','4VbvBRA','./lib/scanner','mkdirSync','1196058tRHgKL','stringify','healthTrendInterval','forEach','TRAIN_ENERGY','getForeignStateAsync','analysis.security.learningStatus','General\x20Activity\x20Trend','TRAIN_TOPOLOGY','bind','loadSystemMode','system.adapter.webcal','presenceDevices','application/json','log','common','lastTrackerEventTime','communicate.request','.json','response','‚ö†\x20Replay\x20skipped:\x20No\x20events\x20in\x20memory.','toLowerCase','./lib/scheduler','filter','LTM.baselineStatus','utf8','./lib/python_bridge','./lib/setup','modeResetJob','todayVector','config','string','system','initSystemConfig','getGenerativeModel','analysis.prediction.trackerConfidence','analysis.visualization.pulse','259883nxIhYN','door','min','protectAiMemory','toLocaleDateString','\x20events\x20from\x20today...','setState','processSensorEvent','@google/generative-ai','triggerEnergyPrediction','exitGraceTimer','guest','4080agJWmv','analysis.energy.warmupTimes','analysis.training.triggerTopology','analysis.training.triggerSecurity','analysis.automation.description','setDate','info','handleInfrasound','date','./lib/installer','60GtGfmd','TRAIN_COMFORT','then','system.adapter.ical','./lib/topology','triggerGaitAnalysis','30JTYLsr','readFileSync','moduleHealth','CALCULATE_HEALTH_TREND','Keine\x20Daten','checkLicense','currentSystemMode','getOverviewData','Corrupt','sendTo','analysis.health.geminiDay','health','12828090txPQMx','scheduleJob','runPythonHealthCheck','Failed\x20to\x20trigger\x20Python\x20Health\x20Check','Daily\x20Room\x20Details\x20(48x30min)','startSystem','length','Party\x20Mode','includes','roomIntegratorTimer','ack','prompt','abortExitTimer','analysis.health.activityTrend','Unknown','activeModules','some','appendToLog','ltmJob','Lernphase\x20(','analysis.activity.roomHistory','Gemini\x20Report\x20Day','geminiModel','onReady','triggerInfrasoundCorrelation','energy','onStateChange','(((.+)+)+)+$','apply','driftAnalysisTimer','minDaysForBaseline','find','./lib/dead_man','Room\x20History\x20(24h\x20Buckets)','checkCalendarTriggers','onMessage','historyJob','getHours','Warte\x20auf\x20Analyse...','getStateAsync','./lib/automation'];a0_0x25ff=function(){return _0x2bf658;};return a0_0x25ff();}