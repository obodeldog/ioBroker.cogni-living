const a0_0xeee759=a0_0x1ccd;(function(_0x2cce1a,_0x507924){const _0x504ef1=a0_0x1ccd,_0x154b84=_0x2cce1a();while(!![]){try{const _0xfe39cd=parseInt(_0x504ef1(0x1d6))/0x1*(parseInt(_0x504ef1(0x252))/0x2)+-parseInt(_0x504ef1(0x1d3))/0x3+parseInt(_0x504ef1(0x143))/0x4*(parseInt(_0x504ef1(0xfc))/0x5)+-parseInt(_0x504ef1(0x195))/0x6+parseInt(_0x504ef1(0x1df))/0x7*(parseInt(_0x504ef1(0x1cf))/0x8)+parseInt(_0x504ef1(0x162))/0x9*(-parseInt(_0x504ef1(0x135))/0xa)+parseInt(_0x504ef1(0x22c))/0xb*(parseInt(_0x504ef1(0x169))/0xc);if(_0xfe39cd===_0x507924)break;else _0x154b84['push'](_0x154b84['shift']());}catch(_0x9f1935){_0x154b84['push'](_0x154b84['shift']());}}}(a0_0x2914,0x2170a));const a0_0x22d983=(function(){let _0x2796b7=!![];return function(_0x27ed6c,_0x38e9a3){const _0x3fc502=_0x2796b7?function(){const _0x366ffb=a0_0x1ccd;if(_0x38e9a3){const _0x2b4a1d=_0x38e9a3[_0x366ffb(0x1c4)](_0x27ed6c,arguments);return _0x38e9a3=null,_0x2b4a1d;}}:function(){};return _0x2796b7=![],_0x3fc502;};}()),a0_0x13b130=a0_0x22d983(this,function(){const _0x503309=a0_0x1ccd;return a0_0x13b130['toString']()['search']('(((.+)+)+)+$')['toString']()[_0x503309(0x168)](a0_0x13b130)['search'](_0x503309(0x13a));});a0_0x13b130();function a0_0x1ccd(_0x18005d,_0x49f5be){const _0x5f1c67=a0_0x2914();return a0_0x1ccd=function(_0x13b130,_0x22d983){_0x13b130=_0x13b130-0xda;let _0x291463=_0x5f1c67[_0x13b130];return _0x291463;},a0_0x1ccd(_0x18005d,_0x49f5be);}'use strict';const utils=require(a0_0xeee759(0x1c0)),{GoogleGenerativeAI}=require(a0_0xeee759(0x1f2)),{spawn}=require(a0_0xeee759(0x207)),path=require(a0_0xeee759(0x17a)),fs=require('fs'),installer=require('./lib/installer'),scanner=require(a0_0xeee759(0xf9)),schedulers=require(a0_0xeee759(0x247)),HISTORY_MAX_SIZE=0x32,RAW_LOG_MAX_SIZE=0x9c4,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL=a0_0xeee759(0xe2),SEQUENCE_TIMEOUT_MS=0x5*0x3c*0x3e8,MAX_TRAINING_SET_SIZE=0x1f4,THERMO_LOG_SIZE=0x3e8,EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,LTM_DP_RAW_LOG=a0_0xeee759(0x12e),LTM_DP_DAILY_DIGESTS=a0_0xeee759(0x1ba),LTM_DP_STATUS=a0_0xeee759(0x1db),LTM_DP_TRIGGER_DIGEST='LTM.triggerDailyDigest',LTM_DP_BASELINE_STATUS=a0_0xeee759(0x227),LTM_DP_DRIFT_CHANNEL=a0_0xeee759(0x210),LTM_DP_DRIFT_STATUS=a0_0xeee759(0x19b),LTM_DP_DRIFT_DETAILS=a0_0xeee759(0x24e),LTM_DP_DRIFT_LAST_CHECK='LTM.driftAnalysis.lastCheck',SYSTEM_DP_MODE='system.mode',SYSTEM_MODES={'NORMAL':a0_0xeee759(0x132),'VACATION':a0_0xeee759(0x1a7),'PARTY':a0_0xeee759(0x1c8),'GUEST':a0_0xeee759(0xf7)},AUTO_RESET_MODES=[SYSTEM_MODES[a0_0xeee759(0x17c)],SYSTEM_MODES[a0_0xeee759(0x1ec)]],PERSONA_MAPPING={'generic':'Analysiere\x20ausgewogen.','senior_aal':'PRIORITÃ„T:\x20Gesundheit/AAL.','family':a0_0xeee759(0x1da),'single_comfort':'Fokus\x20auf\x20Komfort.','security':a0_0xeee759(0x153)},ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};let activeSequence=[],sequenceTimer=null;async function initZombies(_0x3a72b1){const _0x17c210=a0_0xeee759;try{const _0x238988=['analysis.history_debug_00',_0x17c210(0x215)];for(const _0x2b8d65 of _0x238988){try{const _0x57d632=await _0x3a72b1[_0x17c210(0x23d)](_0x2b8d65);if(_0x57d632)await _0x3a72b1[_0x17c210(0x19c)](_0x2b8d65);}catch(_0x11db2e){}}}catch(_0x423e2e){}}async function checkLicense(_0x31c074){return!![];}async function initHistory(_0x4e3937){const _0x4a50e9=a0_0xeee759;try{const _0x4dfc39=await _0x4e3937[_0x4a50e9(0x1ac)](_0x4a50e9(0xdb));_0x4dfc39&&_0x4dfc39[_0x4a50e9(0x22d)]&&(_0x4e3937[_0x4a50e9(0x21b)]=JSON[_0x4a50e9(0x151)](_0x4dfc39[_0x4a50e9(0x22d)][_0x4a50e9(0x140)]()));}catch(_0x33d5bd){_0x4e3937['eventHistory']=[];}try{const _0x36bb50=await _0x4e3937['getStateAsync']('analysis.analysisHistory');if(_0x36bb50&&_0x36bb50[_0x4a50e9(0x22d)])_0x4e3937[_0x4a50e9(0x1d8)]=JSON['parse'](_0x36bb50[_0x4a50e9(0x22d)][_0x4a50e9(0x140)]());}catch(_0xf03a1){_0x4e3937[_0x4a50e9(0x1d8)]=[];}if(_0x4e3937[_0x4a50e9(0x21b)]&&_0x4e3937[_0x4a50e9(0x21b)][_0x4a50e9(0x1af)]>0x0){_0x4e3937[_0x4a50e9(0xe0)][_0x4a50e9(0x136)](_0x4a50e9(0x200));for(let _0x13ee79=_0x4e3937['eventHistory'][_0x4a50e9(0x1af)]-0x1;_0x13ee79>=0x0;_0x13ee79--){const _0x390c15=_0x4e3937[_0x4a50e9(0x21b)][_0x13ee79];if(_0x390c15&&_0x390c15['id']!==undefined&&_0x390c15[_0x4a50e9(0x1f0)]!==undefined)_0x4e3937[_0x4a50e9(0x1f9)][_0x390c15['id']]=_0x390c15[_0x4a50e9(0x1f0)];}}}async function initSystemConfig(_0x1922e4){const _0x299e7a=a0_0xeee759;try{const _0x5e3a46=await _0x1922e4[_0x299e7a(0x11f)](_0x299e7a(0x1ce));if(_0x5e3a46&&_0x5e3a46[_0x299e7a(0x16a)])_0x1922e4[_0x299e7a(0x180)]={'latitude':_0x5e3a46['common'][_0x299e7a(0x1c3)]||0x0,'longitude':_0x5e3a46['common']['longitude']||0x0,'city':_0x5e3a46['common'][_0x299e7a(0x17f)]||''};}catch(_0x1402e4){}}async function createAllObjects(_0x2bd821){const _0x1e9e9e=a0_0xeee759;await _0x2bd821[_0x1e9e9e(0x24c)](_0x1e9e9e(0x184),{'type':_0x1e9e9e(0x1e0),'common':{'name':'System'},'native':{}}),await _0x2bd821[_0x1e9e9e(0x24c)](SYSTEM_DP_MODE,{'type':'state','common':{'name':'System\x20Mode','type':'string','role':_0x1e9e9e(0x25b),'read':!![],'write':!![],'def':SYSTEM_MODES[_0x1e9e9e(0x1de)]},'native':{}}),await _0x2bd821['setObjectNotExistsAsync'](_0x1e9e9e(0x260),{'type':_0x1e9e9e(0x25b),'common':{'name':_0x1e9e9e(0x240),'type':_0x1e9e9e(0x11a),'role':_0x1e9e9e(0x1b2),'read':!![],'write':![]},'native':{}}),await _0x2bd821[_0x1e9e9e(0x25e)](_0x1e9e9e(0x1b5),{'type':_0x1e9e9e(0x25b),'common':{'name':'Last\x20raw\x20event','type':_0x1e9e9e(0x11a),'role':_0x1e9e9e(0x238),'read':!![],'write':![]},'native':{}}),await _0x2bd821[_0x1e9e9e(0x25e)](_0x1e9e9e(0xdb),{'type':_0x1e9e9e(0x25b),'common':{'name':_0x1e9e9e(0x119),'type':_0x1e9e9e(0x11a),'role':_0x1e9e9e(0x238),'read':!![],'write':![]},'native':{}}),await _0x2bd821['extendObjectAsync']('analysis.training',{'type':_0x1e9e9e(0x1e0),'common':{'name':'AI\x20Training'},'native':{}}),await _0x2bd821['setObjectNotExistsAsync'](_0x1e9e9e(0x174),{'type':_0x1e9e9e(0x25b),'common':{'name':_0x1e9e9e(0x103),'type':_0x1e9e9e(0x171),'role':_0x1e9e9e(0x11e),'read':!![],'write':!![]},'native':{}}),await _0x2bd821[_0x1e9e9e(0x25e)](_0x1e9e9e(0x164),{'type':_0x1e9e9e(0x25b),'common':{'name':_0x1e9e9e(0x19f),'type':'boolean','role':_0x1e9e9e(0x11e),'read':!![],'write':!![]},'native':{}}),await _0x2bd821[_0x1e9e9e(0x25e)](_0x1e9e9e(0x1e6),{'type':_0x1e9e9e(0x25b),'common':{'name':_0x1e9e9e(0x1a3),'type':'boolean','role':_0x1e9e9e(0x11e),'read':!![],'write':!![]},'native':{}}),await _0x2bd821[_0x1e9e9e(0x25e)](_0x1e9e9e(0x149),{'type':'state','common':{'name':_0x1e9e9e(0xe3),'type':_0x1e9e9e(0x171),'role':_0x1e9e9e(0x11e),'read':!![],'write':!![]},'native':{}}),await _0x2bd821[_0x1e9e9e(0x25e)]('analysis.training.triggerTopology',{'type':'state','common':{'name':_0x1e9e9e(0x1e4),'type':'boolean','role':_0x1e9e9e(0x11e),'read':!![],'write':!![]},'native':{}}),await _0x2bd821[_0x1e9e9e(0x25e)](_0x1e9e9e(0xf2),{'type':_0x1e9e9e(0x25b),'common':{'name':'Training\x20Status','type':_0x1e9e9e(0x11a),'role':_0x1e9e9e(0x1b2),'read':!![],'write':![]},'native':{}}),await _0x2bd821[_0x1e9e9e(0x24c)](_0x1e9e9e(0xe9),{'type':'channel','common':{'name':_0x1e9e9e(0x251)},'native':{}}),await _0x2bd821[_0x1e9e9e(0x25e)](_0x1e9e9e(0x23b),{'type':'state','common':{'name':'Anomaly\x20Score','type':_0x1e9e9e(0x256),'role':'value','read':!![],'write':![]},'native':{}}),await _0x2bd821[_0x1e9e9e(0x25e)]('analysis.security.currentThreshold',{'type':_0x1e9e9e(0x25b),'common':{'name':_0x1e9e9e(0x121),'type':'number','role':_0x1e9e9e(0x1f0),'read':!![],'write':![],'def':0.05},'native':{}}),await _0x2bd821['setObjectNotExistsAsync']('analysis.security.lastCheck',{'type':_0x1e9e9e(0x25b),'common':{'name':_0x1e9e9e(0x11d),'type':_0x1e9e9e(0x11a),'role':_0x1e9e9e(0x1dc),'read':!![],'write':![]},'native':{}}),await _0x2bd821[_0x1e9e9e(0x25e)]('analysis.security.topologyMatrix',{'type':'state','common':{'name':'Topology\x20Matrix','type':_0x1e9e9e(0x11a),'role':'json','read':!![],'write':![]},'native':{}}),await _0x2bd821[_0x1e9e9e(0x24c)](_0x1e9e9e(0xfe),{'type':_0x1e9e9e(0x1e0),'common':{'name':_0x1e9e9e(0x1ad)},'native':{}}),await _0x2bd821[_0x1e9e9e(0x25e)]('analysis.health.lastCheck',{'type':'state','common':{'name':_0x1e9e9e(0x11d),'type':_0x1e9e9e(0x11a),'role':'date','read':!![],'write':![]},'native':{}}),await _0x2bd821['setObjectNotExistsAsync'](_0x1e9e9e(0x100),{'type':_0x1e9e9e(0x25b),'common':{'name':_0x1e9e9e(0x154),'type':_0x1e9e9e(0x171),'role':'indicator','read':!![],'write':![]},'native':{}}),await _0x2bd821['setObjectNotExistsAsync'](_0x1e9e9e(0x181),{'type':_0x1e9e9e(0x25b),'common':{'name':_0x1e9e9e(0x13d),'type':_0x1e9e9e(0x11a),'role':'text','read':!![],'write':![]},'native':{}}),await _0x2bd821[_0x1e9e9e(0x25e)](_0x1e9e9e(0x17b),{'type':_0x1e9e9e(0x25b),'common':{'name':'Trend\x20Value','type':_0x1e9e9e(0x256),'role':_0x1e9e9e(0x1f0),'read':!![],'write':![]},'native':{}}),await _0x2bd821[_0x1e9e9e(0x25e)](_0x1e9e9e(0x233),{'type':_0x1e9e9e(0x25b),'common':{'name':_0x1e9e9e(0x20d),'type':_0x1e9e9e(0x11a),'role':_0x1e9e9e(0x238),'read':!![],'write':![]},'native':{}}),await _0x2bd821[_0x1e9e9e(0x25e)](_0x1e9e9e(0x267),{'type':'state','common':{'name':_0x1e9e9e(0x214),'type':_0x1e9e9e(0x256),'role':_0x1e9e9e(0x1f0),'read':!![],'write':![]},'native':{}}),await _0x2bd821[_0x1e9e9e(0x24c)]('analysis.energy',{'type':_0x1e9e9e(0x1e0),'common':{'name':_0x1e9e9e(0x16b)},'native':{}}),await _0x2bd821[_0x1e9e9e(0x25e)]('analysis.energy.insulationScore',{'type':_0x1e9e9e(0x25b),'common':{'name':_0x1e9e9e(0x246),'type':_0x1e9e9e(0x11a),'role':_0x1e9e9e(0x1b2),'read':!![],'write':![]},'native':{}}),await _0x2bd821[_0x1e9e9e(0x25e)](_0x1e9e9e(0x144),{'type':_0x1e9e9e(0x25b),'common':{'name':'Heating\x20Score','type':'string','role':_0x1e9e9e(0x1b2),'read':!![],'write':![]},'native':{}}),await _0x2bd821[_0x1e9e9e(0x25e)]('analysis.energy.forecast',{'type':_0x1e9e9e(0x25b),'common':{'name':'Temperature\x20Forecast','type':'string','role':_0x1e9e9e(0x238),'read':!![],'write':![]},'native':{}}),await _0x2bd821[_0x1e9e9e(0x24c)]('LTM',{'type':_0x1e9e9e(0x1e0),'common':{'name':_0x1e9e9e(0xf6)},'native':{}}),await _0x2bd821[_0x1e9e9e(0x24c)](LTM_DP_RAW_LOG,{'type':_0x1e9e9e(0x25b),'common':{'name':_0x1e9e9e(0xf5),'type':_0x1e9e9e(0x11a),'role':_0x1e9e9e(0x238),'read':!![],'write':![]},'native':{}}),await _0x2bd821[_0x1e9e9e(0x24c)](LTM_DP_DAILY_DIGESTS,{'type':'state','common':{'name':_0x1e9e9e(0x115),'type':_0x1e9e9e(0x11a),'role':_0x1e9e9e(0x238),'read':!![],'write':![]},'native':{}}),await _0x2bd821[_0x1e9e9e(0x25e)](_0x1e9e9e(0xed),{'type':_0x1e9e9e(0x25b),'common':{'name':'Sequences','type':_0x1e9e9e(0x11a),'role':_0x1e9e9e(0x238),'read':!![],'write':![]},'native':{}}),await _0x2bd821[_0x1e9e9e(0x25e)](_0x1e9e9e(0x201),{'type':_0x1e9e9e(0x25b),'common':{'name':_0x1e9e9e(0xf4),'type':_0x1e9e9e(0x11a),'role':_0x1e9e9e(0x238),'read':!![],'write':![]},'native':{}}),await _0x2bd821[_0x1e9e9e(0x25e)](_0x1e9e9e(0x25a),{'type':'state','common':{'name':'Trigger\x20Analysis','type':'boolean','role':_0x1e9e9e(0x11e),'read':!![],'write':!![]},'native':{}}),await _0x2bd821['setObjectNotExistsAsync'](_0x1e9e9e(0x124),{'type':_0x1e9e9e(0x25b),'common':{'name':_0x1e9e9e(0xe1),'type':_0x1e9e9e(0x171),'role':_0x1e9e9e(0x11e),'read':!![],'write':!![]},'native':{}}),await _0x2bd821['setObjectNotExistsAsync']('analysis.isAlert',{'type':_0x1e9e9e(0x25b),'common':{'name':_0x1e9e9e(0x1c5),'type':'boolean','role':'indicator.alarm','read':!![],'write':![]},'native':{}}),await _0x2bd821[_0x1e9e9e(0x25e)](_0x1e9e9e(0x1fd),{'type':_0x1e9e9e(0x25b),'common':{'name':_0x1e9e9e(0x122),'type':_0x1e9e9e(0x11a),'role':_0x1e9e9e(0x197),'read':!![],'write':![]},'native':{}}),await _0x2bd821[_0x1e9e9e(0x25e)](_0x1e9e9e(0x148),{'type':_0x1e9e9e(0x25b),'common':{'name':_0x1e9e9e(0x14b),'type':_0x1e9e9e(0x11a),'role':_0x1e9e9e(0x1b2),'read':!![],'write':![]},'native':{}}),await _0x2bd821[_0x1e9e9e(0x25e)]('analysis.automation.patternDetected',{'type':_0x1e9e9e(0x25b),'common':{'name':_0x1e9e9e(0x1ff),'type':_0x1e9e9e(0x171),'role':_0x1e9e9e(0x165),'read':!![],'write':![]},'native':{}}),await _0x2bd821['setObjectNotExistsAsync'](_0x1e9e9e(0x1a6),{'type':_0x1e9e9e(0x25b),'common':{'name':_0x1e9e9e(0x10a),'type':'string','role':_0x1e9e9e(0x1b2),'read':!![],'write':![]},'native':{}}),await _0x2bd821['setObjectNotExistsAsync']('analysis.automation.detectedPatterns',{'type':_0x1e9e9e(0x25b),'common':{'name':'Detected\x20Patterns','type':_0x1e9e9e(0x11a),'role':'json','read':!![],'write':![]},'native':{}}),await _0x2bd821[_0x1e9e9e(0x25e)](_0x1e9e9e(0x107),{'type':_0x1e9e9e(0x25b),'common':{'name':_0x1e9e9e(0x21a),'type':_0x1e9e9e(0x11a),'role':_0x1e9e9e(0x1b2),'read':!![],'write':![]},'native':{}}),await _0x2bd821[_0x1e9e9e(0x25e)](_0x1e9e9e(0x16e),{'type':_0x1e9e9e(0x25b),'common':{'name':'Target\x20Value','type':_0x1e9e9e(0x11a),'role':'text','read':!![],'write':![]},'native':{}}),await _0x2bd821[_0x1e9e9e(0x25e)]('analysis.automation.autoApply',{'type':_0x1e9e9e(0x25b),'common':{'name':'Auto\x20Apply','type':_0x1e9e9e(0x171),'role':_0x1e9e9e(0xf1),'read':!![],'write':!![]},'native':{}}),await _0x2bd821[_0x1e9e9e(0x25e)](_0x1e9e9e(0x12a),{'type':'state','common':{'name':_0x1e9e9e(0x244),'type':_0x1e9e9e(0x171),'role':_0x1e9e9e(0x11e),'read':!![],'write':!![]},'native':{}});}async function loadSystemMode(_0x1cd880){const _0x1bbc11=a0_0xeee759;try{const _0x1e5f5f=await _0x1cd880[_0x1bbc11(0x1ac)](SYSTEM_DP_MODE);_0x1e5f5f&&_0x1e5f5f['val']&&Object[_0x1bbc11(0x1d1)](SYSTEM_MODES)[_0x1bbc11(0xf8)](_0x1e5f5f[_0x1bbc11(0x22d)])?_0x1cd880[_0x1bbc11(0x176)]=_0x1e5f5f[_0x1bbc11(0x22d)]:(_0x1cd880[_0x1bbc11(0x176)]=SYSTEM_MODES['NORMAL'],await _0x1cd880[_0x1bbc11(0x24a)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x1bbc11(0x1de)],'ack':!![]}));}catch(_0xd4a6a3){_0x1cd880[_0x1bbc11(0x176)]=SYSTEM_MODES[_0x1bbc11(0x1de)];}}async function loadRawEventLog(_0x5e2997){const _0x65df91=a0_0xeee759;try{const _0x1672ec=await _0x5e2997[_0x65df91(0x1ac)](LTM_DP_RAW_LOG);if(_0x1672ec&&_0x1672ec[_0x65df91(0x22d)])_0x5e2997[_0x65df91(0x1ee)]=JSON[_0x65df91(0x151)](_0x1672ec[_0x65df91(0x22d)]);}catch(_0x438ce4){_0x5e2997['rawEventLog']=[];}}async function saveRawEventLog(_0x3e9dcf){const _0x20aa25=a0_0xeee759;if(_0x3e9dcf[_0x20aa25(0x1ee)][_0x20aa25(0x1af)]>RAW_LOG_MAX_SIZE)_0x3e9dcf[_0x20aa25(0x1ee)][_0x20aa25(0x222)](0x0,_0x3e9dcf['rawEventLog'][_0x20aa25(0x1af)]-RAW_LOG_MAX_SIZE);await _0x3e9dcf[_0x20aa25(0x24a)](LTM_DP_RAW_LOG,{'val':JSON[_0x20aa25(0x1eb)](_0x3e9dcf[_0x20aa25(0x1ee)]),'ack':!![]});}async function loadDailyDigests(_0x522608){const _0x176206=a0_0xeee759;try{const _0x466fda=await _0x522608[_0x176206(0x1ac)](LTM_DP_DAILY_DIGESTS);if(_0x466fda&&_0x466fda[_0x176206(0x22d)])_0x522608['dailyDigests']=JSON[_0x176206(0x151)](_0x466fda[_0x176206(0x22d)]);}catch(_0x50cdc1){_0x522608[_0x176206(0x239)]=[];}await updateBaselineStatus(_0x522608);}async function saveDailyDigests(_0x4577de,_0x464378=!![]){const _0x5d3a46=a0_0xeee759,_0x54e60f=_0x4577de[_0x5d3a46(0x106)]['ltmLtbWindowDays']||0x3c;_0x4577de['dailyDigests'][_0x5d3a46(0x1af)]>_0x54e60f&&_0x4577de[_0x5d3a46(0x239)]['splice'](0x0,_0x4577de['dailyDigests'][_0x5d3a46(0x1af)]-_0x54e60f);await _0x4577de[_0x5d3a46(0x24a)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x5d3a46(0x1eb)](_0x4577de[_0x5d3a46(0x239)]),'ack':!![]});if(_0x464378)await updateBaselineStatus(_0x4577de);}async function updateAnalysisHistory(_0xf1c277,_0x9b544f){const _0x43101a=a0_0xeee759;_0xf1c277[_0x43101a(0x1d8)][_0x43101a(0x133)](_0x9b544f);if(_0xf1c277[_0x43101a(0x1d8)]['length']>HISTORY_MAX_SIZE)_0xf1c277[_0x43101a(0x1d8)][_0x43101a(0x161)]();await _0xf1c277[_0x43101a(0x24a)](_0x43101a(0x1f3),{'val':JSON[_0x43101a(0x1eb)](_0xf1c277[_0x43101a(0x1d8)]),'ack':!![]});}async function updateBaselineStatus(_0x55cf15){const _0xf4008b=a0_0xeee759;if(!_0x55cf15[_0xf4008b(0x172)]){await _0x55cf15['setStateAsync'](LTM_DP_BASELINE_STATUS,{'val':_0xf4008b(0x209),'ack':!![]});return;}const _0x234cea=_0x55cf15[_0xf4008b(0x239)][_0xf4008b(0x1af)]>=(_0x55cf15[_0xf4008b(0x106)][_0xf4008b(0x1b6)]||0x7)?_0xf4008b(0xfb)+_0x55cf15[_0xf4008b(0x239)][_0xf4008b(0x1af)]+_0xf4008b(0x167):_0xf4008b(0x1ef)+_0x55cf15[_0xf4008b(0x239)]['length']+'/'+(_0x55cf15[_0xf4008b(0x106)]['minDaysForBaseline']||0x7)+')';await _0x55cf15['setStateAsync'](LTM_DP_BASELINE_STATUS,{'val':_0x234cea,'ack':!![]});}async function initSensorSubscriptions(_0x349ce0){const _0x1d26e6=a0_0xeee759,_0x3d5722=_0x349ce0[_0x1d26e6(0x106)][_0x1d26e6(0x1f1)];if(_0x3d5722)for(const _0x1c07a5 of _0x3d5722){await _0x349ce0[_0x1d26e6(0x1bd)](_0x1c07a5['id']);}}async function initPresenceSubscriptions(_0x222156){const _0x5c5818=a0_0xeee759,_0x426f75=_0x222156[_0x5c5818(0x106)]['presenceDevices'];if(_0x426f75)for(const _0xad2f2e of _0x426f75){await _0x222156[_0x5c5818(0x1bd)](_0xad2f2e);}}async function setupTelegramListener(_0x5bafb1){const _0x25a407=a0_0xeee759,_0x1d7d2a=_0x5bafb1[_0x25a407(0x106)][_0x25a407(0x1a1)];if(_0x5bafb1[_0x25a407(0x106)]['notifyTelegramEnabled']&&_0x1d7d2a)await _0x5bafb1[_0x25a407(0x1bd)](_0x1d7d2a+_0x25a407(0x15c));}async function checkWifiPresence(_0x58e231){const _0x2639cd=a0_0xeee759;try{const _0x297174=_0x58e231[_0x2639cd(0x106)][_0x2639cd(0x177)]||[];let _0xbbe92e=![];const _0xd4daa=[];for(const _0x1bdd25 of _0x297174){try{const _0x3da4de=await _0x58e231[_0x2639cd(0x259)](_0x1bdd25);_0x3da4de&&(_0x3da4de[_0x2639cd(0x22d)]===!![]||_0x3da4de[_0x2639cd(0x22d)]==='online'||_0x3da4de[_0x2639cd(0x22d)]===0x1)&&(_0xbbe92e=!![],_0xd4daa[_0x2639cd(0x116)](_0x1bdd25));}catch(_0x2032b7){}}return await _0x58e231[_0x2639cd(0x24a)]('system.presenceWho',{'val':_0xd4daa[_0x2639cd(0x1b1)](',\x20'),'ack':!![]}),_0xbbe92e&&(_0x58e231[_0x2639cd(0x1bb)]&&(_0x58e231['log']['info'](_0x2639cd(0x19e)),abortExitTimer(_0x58e231)),!_0x58e231['isPresent']&&_0x58e231[_0x2639cd(0x176)]===SYSTEM_MODES[_0x2639cd(0x1de)]&&await setPresence(_0x58e231,!![])),_0xbbe92e;}catch(_0x502ad7){return![];}}function startExitTimer(_0x4eeb9c){const _0x473e0a=a0_0xeee759;abortExitTimer(_0x4eeb9c),_0x4eeb9c[_0x473e0a(0x18d)]=!![],_0x4eeb9c['exitGraceTimer']=setTimeout(()=>{const _0x262565=_0x473e0a;_0x4eeb9c[_0x262565(0x18d)]=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),_0x4eeb9c[_0x473e0a(0x1bb)]=setTimeout(()=>{const _0x5b50e7=_0x473e0a;setPresence(_0x4eeb9c,![]),_0x4eeb9c[_0x5b50e7(0x1bb)]=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}function abortExitTimer(_0x4ab758){const _0xa93607=a0_0xeee759;if(_0x4ab758[_0xa93607(0x1bb)])clearTimeout(_0x4ab758[_0xa93607(0x1bb)]);if(_0x4ab758[_0xa93607(0x217)])clearTimeout(_0x4ab758[_0xa93607(0x217)]);_0x4ab758[_0xa93607(0x1bb)]=null,_0x4ab758[_0xa93607(0x217)]=null,_0x4ab758['isGracePeriodActive']=![];}async function setPresence(_0x11549c,_0xa630d9){const _0x118c9f=a0_0xeee759;if(_0x11549c[_0x118c9f(0x250)]===_0xa630d9)return;_0x11549c[_0x118c9f(0x250)]=_0xa630d9,await _0x11549c['setStateAsync'](_0x118c9f(0xfd),{'val':_0xa630d9,'ack':!![]});}async function executeAutomationAction(_0x214d2a){const _0x58ddfa=a0_0xeee759;try{const _0x20f7b3=await _0x214d2a[_0x58ddfa(0x1ac)]('analysis.automation.targetId'),_0x11dc4c=await _0x214d2a[_0x58ddfa(0x1ac)](_0x58ddfa(0x16e));if(_0x20f7b3&&_0x20f7b3[_0x58ddfa(0x22d)]&&_0x11dc4c){const _0x3a729e=_0x20f7b3[_0x58ddfa(0x22d)];let _0x4a84d4=_0x11dc4c[_0x58ddfa(0x22d)];try{_0x4a84d4=JSON['parse'](_0x4a84d4);}catch(_0x4123a6){}_0x214d2a['log'][_0x58ddfa(0x136)](_0x58ddfa(0x265)+_0x3a729e+_0x58ddfa(0x23e)+_0x4a84d4),await _0x214d2a['setForeignStateAsync'](_0x3a729e,_0x4a84d4);}else _0x214d2a['log'][_0x58ddfa(0x1f8)](_0x58ddfa(0x1d7));}catch(_0x598757){_0x214d2a[_0x58ddfa(0xe0)][_0x58ddfa(0x157)](_0x58ddfa(0x11b)+_0x598757['message']);}}async function processSensorEvent(_0x36692d,_0x4fb287,_0x3d479a,_0x3e9f50){const _0x1e6902=a0_0xeee759;if(!_0x3e9f50)return;const _0x12f40d=_0x3d479a[_0x1e6902(0x22d)],_0x5ea8ed=Date[_0x1e6902(0x120)](),_0x54dbe7=_0x36692d[_0x1e6902(0x1f9)][_0x4fb287];_0x36692d[_0x1e6902(0x1f9)][_0x4fb287]=_0x12f40d;if(!_0x3e9f50[_0x1e6902(0x22f)]&&_0x54dbe7!=undefined&&_0x54dbe7==_0x12f40d)return;const _0x2e1201=(_0x3e9f50[_0x1e6902(0x21d)]||'')['toLowerCase'](),_0x239d8c=_0x2e1201[_0x1e6902(0xf8)](_0x1e6902(0x20c))||_0x2e1201[_0x1e6902(0xf8)](_0x1e6902(0x266))||_0x2e1201['includes'](_0x1e6902(0x158))||_0x2e1201['includes']('heizung');_0x36692d[_0x1e6902(0x172)]&&_0x239d8c&&recordThermodynamics(_0x36692d,_0x4fb287,_0x12f40d,_0x3e9f50[_0x1e6902(0x223)]);const _0x42b8f6={'timestamp':_0x5ea8ed,'id':_0x4fb287,'name':_0x3e9f50[_0x1e6902(0x15e)],'type':_0x3e9f50[_0x1e6902(0x21d)],'location':_0x3e9f50[_0x1e6902(0x223)],'value':_0x12f40d};_0x36692d[_0x1e6902(0x21b)][_0x1e6902(0x133)](_0x42b8f6);if(_0x36692d[_0x1e6902(0x21b)][_0x1e6902(0x1af)]>HISTORY_MAX_SIZE)_0x36692d[_0x1e6902(0x21b)][_0x1e6902(0x161)]();await _0x36692d[_0x1e6902(0x24a)](_0x1e6902(0x1b5),{'val':JSON[_0x1e6902(0x1eb)](_0x42b8f6),'ack':!![]}),await _0x36692d[_0x1e6902(0x24a)]('events.history',{'val':JSON[_0x1e6902(0x1eb)](_0x36692d[_0x1e6902(0x21b)]),'ack':!![]});_0x36692d['isProVersion']&&(_0x36692d[_0x1e6902(0x1ee)]['push'](_0x42b8f6),await saveRawEventLog(_0x36692d),recordSequence(_0x36692d,_0x42b8f6));if(_0x3e9f50['isExit']&&_0x12f40d===!![]){if(_0x36692d[_0x1e6902(0x250)]&&!_0x36692d[_0x1e6902(0x18d)])startExitTimer(_0x36692d);else{if(!_0x36692d['isPresent'])setPresence(_0x36692d,!![]);}}else{if(_0x3e9f50[_0x1e6902(0x21d)]==='motion'&&_0x12f40d===!![]){if(_0x36692d['exitTimer'])abortExitTimer(_0x36692d);if(!_0x36692d[_0x1e6902(0x250)]&&_0x36692d[_0x1e6902(0x176)]===SYSTEM_MODES[_0x1e6902(0x1de)])setPresence(_0x36692d,!![]);}}}async function recordThermodynamics(_0x5a863d,_0x56a6bd,_0x562899,_0xc9954d){const _0x123cfa=a0_0xeee759,_0x27fa57=await getOutsideTemperatureNumeric(_0x5a863d),_0x131b2f=await _0x5a863d['getStateAsync'](_0x123cfa(0x201));let _0x2e829a=[];if(_0x131b2f&&_0x131b2f[_0x123cfa(0x22d)])try{_0x2e829a=JSON[_0x123cfa(0x151)](_0x131b2f[_0x123cfa(0x22d)]);}catch(_0x1c9489){}_0x2e829a['push']({'ts':Date[_0x123cfa(0x120)](),'room':_0xc9954d||'Unknown','t_in':_0x562899,'t_out':_0x27fa57});if(_0x2e829a[_0x123cfa(0x1af)]>THERMO_LOG_SIZE)_0x2e829a[_0x123cfa(0x17e)]();await _0x5a863d[_0x123cfa(0x24a)](_0x123cfa(0x201),{'val':JSON[_0x123cfa(0x1eb)](_0x2e829a),'ack':!![]});}async function getOutsideTemperatureNumeric(_0x459d81){const _0x518bb4=a0_0xeee759;if(_0x459d81[_0x518bb4(0x106)][_0x518bb4(0x1e2)])try{const _0x269522=await _0x459d81[_0x518bb4(0x259)](_0x459d81[_0x518bb4(0x106)][_0x518bb4(0x1e2)]);if(_0x269522&&_0x269522[_0x518bb4(0x22d)]!==undefined&&_0x269522['val']!==null)return parseFloat(_0x269522[_0x518bb4(0x22d)]);}catch(_0x45f6fd){}const _0x5cfb52=_0x459d81[_0x518bb4(0x106)][_0x518bb4(0x245)];if(!_0x459d81[_0x518bb4(0x106)]['useWeather']||!_0x5cfb52)return null;try{let _0x5ad71a='';if(_0x5cfb52['includes']('accuweather'))_0x5ad71a=_0x5cfb52+'.Current.Temperature';else{if(_0x5cfb52[_0x518bb4(0xf8)](_0x518bb4(0x113)))_0x5ad71a=_0x5cfb52+_0x518bb4(0x243);else{if(_0x5cfb52[_0x518bb4(0xf8)](_0x518bb4(0x1be)))_0x5ad71a=_0x5cfb52+'.forecast.current.temperature';else{if(_0x5cfb52[_0x518bb4(0xf8)](_0x518bb4(0x178)))_0x5ad71a=_0x5cfb52+_0x518bb4(0x220);}}}if(_0x5ad71a){const _0x4443f2=await _0x459d81[_0x518bb4(0x259)](_0x5ad71a);if(_0x4443f2&&_0x4443f2[_0x518bb4(0x22d)]!==undefined&&_0x4443f2[_0x518bb4(0x22d)]!==null)return parseFloat(_0x4443f2[_0x518bb4(0x22d)]);}}catch(_0x9d72bb){}return null;}async function recordSequence(_0x3f5b07,_0x56240b){const _0x56cf6f=a0_0xeee759,_0x44a086=(_0x56240b['type']||'')[_0x56cf6f(0x204)](),_0x4e4bdf=[_0x56cf6f(0x123),_0x56cf6f(0x228),_0x56cf6f(0x249),_0x56cf6f(0x10c),_0x56cf6f(0x155),_0x56cf6f(0xde),'tÃ¼r',_0x56cf6f(0x126),_0x56cf6f(0x188),'contact',_0x56cf6f(0x12c),_0x56cf6f(0x10e),'licht',_0x56cf6f(0xf1),_0x56cf6f(0x1ab),'dimmer','lampe'];if(!_0x4e4bdf[_0x56cf6f(0x225)](_0x3774d8=>_0x44a086[_0x56cf6f(0xf8)](_0x3774d8)))return;if(!_0x56240b[_0x56cf6f(0x1f0)])return;if(sequenceTimer)clearTimeout(sequenceTimer);activeSequence['push']({'loc':_0x56240b[_0x56cf6f(0x223)]||_0x56cf6f(0x1ca),'id':_0x56240b['id'],'ts':Date[_0x56cf6f(0x120)]()}),sequenceTimer=setTimeout(async()=>{const _0x429472=_0x56cf6f;if(activeSequence[_0x429472(0x1af)]>0x1)await saveCompletedSequence(_0x3f5b07);activeSequence=[];},SEQUENCE_TIMEOUT_MS);}async function saveCompletedSequence(_0x302e86){const _0x380400=a0_0xeee759;try{const _0x1a7ec1=await _0x302e86[_0x380400(0x1ac)]('LTM.trainingData.sequences');let _0x2978a7=[];if(_0x1a7ec1&&_0x1a7ec1[_0x380400(0x22d)])try{_0x2978a7=JSON[_0x380400(0x151)](_0x1a7ec1[_0x380400(0x22d)]);}catch(_0x2550d7){}const _0x158fb9=activeSequence[0x0]['ts'],_0x56375e=activeSequence['map'](_0x5c4ac3=>({'loc':_0x5c4ac3[_0x380400(0x241)],'t_delta':Math['round']((_0x5c4ac3['ts']-_0x158fb9)/0x3e8)})),_0x5b231d={'timestamp':new Date(_0x158fb9)['toISOString'](),'steps':_0x56375e,'duration':Math[_0x380400(0x203)]((activeSequence[activeSequence[_0x380400(0x1af)]-0x1]['ts']-_0x158fb9)/0x3e8),'daytime':new Date(_0x158fb9)[_0x380400(0xea)]()};_0x2978a7[_0x380400(0x116)](_0x5b231d);if(_0x2978a7['length']>MAX_TRAINING_SET_SIZE)_0x2978a7[_0x380400(0x17e)]();await _0x302e86[_0x380400(0x24a)](_0x380400(0xed),{'val':JSON['stringify'](_0x2978a7),'ack':!![]}),runSecurityCheck(_0x302e86,_0x5b231d);}catch(_0x31f694){_0x302e86[_0x380400(0xe0)][_0x380400(0x157)]('[RECORDER]\x20Error:\x20'+_0x31f694[_0x380400(0x1fc)]);}}function runSecurityCheck(_0x2e4c69,_0x5ef217){const _0x5d1d51=a0_0xeee759;if(!_0x2e4c69[_0x5d1d51(0x172)])return;sendToPython(_0x2e4c69,'ANALYZE_SEQUENCE',{'sequence':_0x5ef217});}async function createDailyDigest(_0x291754){const _0xb132f=a0_0xeee759;if(!_0x291754[_0xb132f(0x172)])return;await _0x291754[_0xb132f(0x24a)](LTM_DP_STATUS,{'val':'Started...','ack':!![]});if(!_0x291754[_0xb132f(0x18f)]||_0x291754['rawEventLog'][_0xb132f(0x1af)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x291754['setStateAsync'](LTM_DP_STATUS,{'val':_0xb132f(0x24f),'ack':!![]});return;}const _0xd6c792=JSON['parse'](JSON[_0xb132f(0x1eb)](_0x291754['rawEventLog'])),_0x9a9280=_0xd6c792[_0xb132f(0x1af)],_0x359822=_0xb132f(0x24b)+JSON[_0xb132f(0x1eb)](_0xd6c792);try{const _0x20f0ae=await _0x291754[_0xb132f(0x18f)][_0xb132f(0x258)](_0x359822),_0xc0f2ba=JSON['parse'](_0x20f0ae[_0xb132f(0x192)]['text']()[_0xb132f(0x152)](/```json|```/g,'')[_0xb132f(0x130)]()),_0x2a3683={'timestamp':new Date()['toISOString'](),'eventCount':_0x9a9280,'summary':_0xc0f2ba[_0xb132f(0x191)]||_0xb132f(0x14f),'activityLevel':_0xc0f2ba[_0xb132f(0x20b)]||_0xb132f(0x132),'systemMode':_0x291754['currentSystemMode']};_0x291754[_0xb132f(0x239)][_0xb132f(0x116)](_0x2a3683),await saveDailyDigests(_0x291754),_0x291754[_0xb132f(0x1ee)]=[],await saveRawEventLog(_0x291754),await _0x291754[_0xb132f(0x24a)](LTM_DP_STATUS,{'val':_0xb132f(0x1d5),'ack':!![]});if(_0x291754['isProVersion'])sendToPython(_0x291754,_0xb132f(0x236),{'digest':_0x2a3683});}catch(_0xb60787){_0x291754[_0xb132f(0xe0)][_0xb132f(0x157)](_0xb60787['message']);}}async function runBaselineDriftAnalysis(_0x504d10){const _0x13cd49=a0_0xeee759;if(!_0x504d10['isProVersion']||!_0x504d10[_0x13cd49(0x18f)])return;const _0x59d119=_0x504d10[_0x13cd49(0x106)][_0x13cd49(0xff)]||0xe;if(_0x504d10[_0x13cd49(0x239)][_0x13cd49(0x1af)]<_0x59d119+0x7){await _0x504d10[_0x13cd49(0x24a)](LTM_DP_DRIFT_STATUS,{'val':_0x13cd49(0x15a),'ack':!![]});return;}const _0x2ee8d=_0x504d10[_0x13cd49(0x239)]['slice'](-_0x59d119),_0x2b3c93=_0x504d10[_0x13cd49(0x239)]['slice'](0x0,_0x504d10[_0x13cd49(0x239)][_0x13cd49(0x1af)]-_0x59d119),_0x1ce619='ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20'+JSON[_0x13cd49(0x1eb)](_0x2b3c93)+'\x0aSTB:\x20'+JSON[_0x13cd49(0x1eb)](_0x2ee8d);try{const _0x5c4978=await _0x504d10['geminiModel']['generateContent'](_0x1ce619),_0x2127c5=JSON['parse'](_0x5c4978[_0x13cd49(0x192)][_0x13cd49(0x1b2)]()['replace'](/```json|```/g,'')[_0x13cd49(0x130)]());_0x2127c5[_0x13cd49(0xf0)]&&(await _0x504d10['setStateAsync'](LTM_DP_DRIFT_STATUS,{'val':_0x2127c5['baselineDrift'],'ack':!![]}),await _0x504d10[_0x13cd49(0x24a)](LTM_DP_DRIFT_DETAILS,{'val':_0x2127c5['driftDetails'],'ack':!![]}),await _0x504d10[_0x13cd49(0x24a)](LTM_DP_DRIFT_LAST_CHECK,{'val':Date[_0x13cd49(0x120)](),'ack':!![]}));}catch(_0x4217c4){}}async function sendMorningBriefing(_0x231aec){const _0x29b025=a0_0xeee759;if(!_0x231aec[_0x29b025(0x18f)])return;try{const _0x124e86='Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.',_0x508d45=await _0x231aec[_0x29b025(0x18f)][_0x29b025(0x258)](_0x124e86),_0x14ed1a=_0x508d45['response']['text']();sendNotification(_0x231aec,'ðŸŒ…\x20Morning\x20Briefing:\x0a'+_0x14ed1a);}catch(_0x144980){_0x231aec['log'][_0x29b025(0x157)](_0x29b025(0x129)+_0x144980[_0x29b025(0x1fc)]);}}function stopPythonService(_0x5506bb){const _0x472c99=a0_0xeee759;if(_0x5506bb['pythonProcess']){try{_0x5506bb['pythonProcess'][_0x472c99(0x231)]();}catch(_0x4e75b4){}_0x5506bb[_0x472c99(0x1e8)]=null;}}function sendToPython(_0x2bffd2,_0x18eb74,_0x39271d={}){const _0x3049d5=a0_0xeee759;if(!_0x2bffd2[_0x3049d5(0x1e8)]||!_0x2bffd2[_0x3049d5(0x1e8)][_0x3049d5(0x18e)][_0x3049d5(0x248)])return;const _0x52a176=JSON[_0x3049d5(0x1eb)]({'command':_0x18eb74,..._0x39271d});try{_0x2bffd2[_0x3049d5(0x1e8)][_0x3049d5(0x18e)][_0x3049d5(0x1c7)](_0x52a176+'\x0a');}catch(_0x4155f3){}}function runPythonHealthCheck(_0x3b3203){const _0x44f5c3=a0_0xeee759;if(!_0x3b3203[_0x44f5c3(0x239)]||_0x3b3203[_0x44f5c3(0x239)][_0x44f5c3(0x1af)]<0x2)return;const _0x3cb6cf=_0x3b3203['dailyDigests'][_0x44f5c3(0x1b3)](_0x4909d4=>{const _0xc5f6f2=_0x44f5c3,_0x1fff48=(_0x4909d4['activityLevel']||'')[_0xc5f6f2(0x204)]();return ACTIVITY_LEVEL_MAP[_0x1fff48]||0x32;});sendToPython(_0x3b3203,_0x44f5c3(0x20a),{'values':_0x3cb6cf,'tag':'Activity-Level'});}function a0_0x2914(){const _0x3fe0c7=['ANALYZE_TREND','activityLevel','temperature','Today\x20Vector\x20(15m)','version','TREND_RESULT','LTM.driftAnalysis','PYTHON_EXE','instance','ðŸ›¡ï¸\x20SECURITY\x20CHECK:\x20Score\x20','Gait\x20Speed\x20Trend','events.history_debug_00','setupLtmScheduler','exitGraceTimer','Training\x20Error:\x20','HEALTH_RESULT','Target\x20ID','eventHistory','\x0aGrund:\x20','type','getTime','details','.forecast.current.temp','toISOString','splice','location','ðŸ•¸ï¸\x20Topology\x20Map\x20updated.','some','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','LTM.baselineStatus','bewegung','detected','analysis.security.currentThreshold','reason','6963gIJddl','val','ready','logDuplicates','ðŸ“\x20Feedback\x20received:\x20','kill','automationProposal','analysis.health.todayVector','find','Â°C,\x20','ANALYZE_HEALTH','ðŸ§ \x20Triggering\x20Security\x20Training...','json','dailyDigests','setState','analysis.security.lastScore','object','getObjectAsync','\x20=\x20','ðŸ•¸ï¸\x20Building\x20Topology\x20Matrix...','Who\x20is\x20present?','loc','floor','.NextHours.Location_1.Day_1.current.temp_value','Trigger\x20Action','weatherInstance','Insulation\x20Score','./lib/scheduler','writable','prÃ¤senz','setStateAsync','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','extendObjectAsync','rule','LTM.driftAnalysis.driftDetails','Skipped\x20(No\x20AI\x20or\x20Data)','isPresent','Security\x20Monitor','227310TyzGxa','unknown','modeResetJob','stdout','number','forEach','generateContent','getForeignStateAsync','analysis.trigger','state','filter','.forecast.current.state','setObjectNotExistsAsync','dependencyInstallInProgress','system.presenceWho','ðŸ›‹ï¸\x20BUTLER:\x20Keine\x20neuen\x20Muster\x20gefunden.','threshold','setupDriftAnalysisScheduler','.\x20KONTEXT:\x20','ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20','temperatur','analysis.health.gaitSpeed','enum.rooms.*','events.history','setupBriefingScheduler','automation.triggerAction','door','scanDevices','log','Trigger\x20Briefing','models/gemini-flash-latest','Train\x20Comfort','confidence','COMFORT_RESULT','analysis.automation.autoApply','subscribeStates','main','analysis.security','getHours','fill','telegram','LTM.trainingData.sequences','TRAIN_SECURITY','ltmLtbWindowDays','baselineDrift','switch','analysis.training.status','insulation','Thermodynamics','Raw\x20Log','LTM','guest','includes','./lib/scanner','dismissAutomation','Aktiv\x20(','7355nmdPMD','system.isPresent','analysis.health','ltmStbWindowDays','analysis.health.isAnomaly','analysisInterval','Kein\x20API\x20Key.','Train\x20Security','is_anomaly','TOPOLOGY_RESULT','config','analysis.automation.targetId','Gemini\x20Init\x20Error:\x20','slice','Description','.\x20SYSTEM_MODE:\x20','presence','driftAnalysisTimer','light','.forecast.current.temperature','ðŸš€\x20Starting\x20NUUKANNI\x20Logic\x20(v0.12.10)...','apiKey','[LOG]','daswetter','useWeather','Daily\x20Digests','push','status','ENERGY_TRAIN_RESULT','Event\x20History','string','BUTLER\x20Execution\x20Error:\x20','submitFeedback','Last\x20Check','button','getForeignObjectAsync','now','Current\x20Threshold','Alert\x20Reason','motion','analysis.triggerBriefing','getGenerativeModel','window','.\x20ANWESEND:\x20','scanForDevices','Briefing\x20Error:\x20','analysis.automation.triggerAction','change_percent','kontakt','ANOMALY','LTM.rawEventLog','Keine\x20Wetterdaten\x20verfÃ¼gbar.','trim','\x20new\x20patterns.','normal','unshift','getLtmData','40WEBnJt','info','User\x20dismissed\x20automation\x20proposal.','geminiApiKey','testContext','(((.+)+)+)+$','onReady','getCalendarNames','Trend','toFixed','python_service','toString','unload','bind','528jGlpTt','analysis.energy.heatingScore','ðŸ›‹ï¸\x20Triggering\x20Comfort\x20Analysis\x20(Pattern\x20Mining)...','Regel\x20erkannt:\x20','ðŸ›‹ï¸\x20BUTLER:\x20Found\x20','analysis.activitySummary','analysis.training.triggerComfort','.Current.Temperature','Activity\x20Summary','service.py','getEnums','Err:\x20','Digest','timestamp','parse','replace','PRIORITÃ„T:\x20Sicherheit.','Anomaly\x20Detected','occupancy','analysis.lastResult','error','klima','isEmergency','N/A\x20(Learning)','testApiKey','.communicate.request','TRAIN_COMFORT','name','ltmJob','sendTo','pop','600471ngNKlc',')\x20-\x20SAFE\x20BOOT','analysis.training.triggerHealth','indicator','analysisTimer','\x20Tage)','constructor','6852joQMKx','common','Energy\x20Intelligence','targetId','ack','analysis.automation.targetValue','.Current.WeatherText','heating','boolean','isProVersion','aiPersona','analysis.training.triggerSecurity','genAI','currentSystemMode','presenceDevices','weatherunderground','Kein\x20API\x20Key!','path','analysis.health.trendValue','PARTY','onUnload','shift','city','systemConfig','analysis.health.trendDiagnosis','useCalendar','calendarInstance','system','checkAndInstall','isAlert','payload','fenster','cogni-living','command','PONG','inactivityThresholdHours','isGracePeriodActive','stdin','geminiModel','from','summary','response','analysis.energy.insulationScore','Sec-Training\x20started...','1088748mYywOy','Gemini\x20AI\x20initialized.','text.alarm','onStateChange','simulateButler','substring','LTM.driftAnalysis.baselineDrift','delObjectAsync','triggerDailyDigest','WiFi\x20Presence\x20detected.','Train\x20Health','stateChange','notifyTelegramInstance','ENERGY_PREDICT_RESULT','Train\x20Energy','description','lastAlertState','analysis.automation.description','vacation','getForeignObjectsAsync','analysis.energy.forecast','success','schalter','getStateAsync','Health\x20Analysis','KI-Modell\x20nicht\x20initialisiert','length','ðŸ§ª\x20Simulating\x20Butler\x20Proposal:\x20','join','text','map','getOverviewData','events.lastEvent','minDaysForBaseline','targetValue','Gemini\x20Error:\x20','diagnosis','LTM.dailyDigests','exitTimer','analysis.automation.detectedPatterns','subscribeForeignStatesAsync','openweathermap','namespace','@iobroker/adapter-core','livingContext','Error\x20launching\x20Python:\x20','latitude','apply','Alert\x20Status','endsWith','write','party','analysis.security.topologyMatrix','Unknown','cancel','split','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','system.config','104ODmIxt','.\x20WETTER:\x20','values','.\x20EVENTS:\x20','490071UQPKnO','N/A','Success','1ZAuCuw','ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','analysisHistory','TRAINING_COMPLETE','Fokus\x20auf\x20Familienroutinen.','LTM.processingStatus','date','data','NORMAL','42749pbfDTD','channel','analysis.training.triggerTopology','outdoorSensorId','PREDICT_ENERGY','Build\x20Topology','callback','analysis.training.triggerEnergy','licenseKey','pythonProcess','getMinutes','setupModeResetScheduler','stringify','GUEST','analysis.automation.patternDetected','rawEventLog','Lernphase\x20(','value','devices','@google/generative-ai','analysis.analysisHistory','Keine\x20Details.','debug','briefingJob','onMessage','warn','sensorLastValues','getMonth','startsWith','message','analysis.alertReason','alertReason','Pattern\x20Detected','Restoring\x20sensor\x20cache...','LTM.trainingData.thermodynamics','getFullYear','round','toLowerCase','[RESULT]','Unbekannt','child_process','autoApply','Deaktiviert\x20(Pro-Feature)'];a0_0x2914=function(){return _0x3fe0c7;};return a0_0x2914();}function handlePythonResult(_0x547958,_0x13e339){const _0x152062=a0_0xeee759;if(_0x13e339[_0x152062(0x21d)]===_0x152062(0x18b))_0x547958[_0x152062(0xe0)][_0x152062(0x1f5)]('ðŸ\x20Python\x20Pong');else{if(_0x13e339[_0x152062(0x21d)]==='SECURITY_RESULT'){const {anomaly_score:_0x561f4c,is_anomaly:_0x341283,threshold:_0x1c4011,explanation:_0x416707}=_0x13e339[_0x152062(0x187)];_0x547958['log'][_0x152062(0x136)](_0x152062(0x213)+_0x561f4c['toFixed'](0x5)+'\x20->\x20'+(_0x341283?_0x152062(0x12d):'OK')),_0x547958[_0x152062(0x24a)]('analysis.security.lastScore',{'val':_0x561f4c,'ack':!![]}),_0x547958['setStateAsync']('analysis.security.lastCheck',{'val':new Date()['toISOString'](),'ack':!![]});if(_0x1c4011)_0x547958[_0x152062(0x24a)](_0x152062(0x22a),{'val':_0x1c4011,'ack':!![]});if(_0x341283){let _0x596c7f='UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20'+_0x561f4c[_0x152062(0x13e)](0x4)+')';if(_0x416707&&_0x416707!==_0x152062(0x1ca))_0x596c7f+=_0x152062(0x21c)+_0x416707;_0x547958[_0x152062(0x24a)]('analysis.isAlert',{'val':!![],'ack':!![]}),_0x547958[_0x152062(0x24a)](_0x152062(0x1fd),{'val':_0x596c7f,'ack':!![]}),sendNotification(_0x547958,'âš ï¸\x20SECURITY\x20ALARM:\x20'+_0x596c7f,![],!![]);}}else{if(_0x13e339[_0x152062(0x21d)]===_0x152062(0x1d9)){const _0x13171c=_0x13e339[_0x152062(0x187)]['details']||'',_0x13eb9f=_0x13e339['payload'][_0x152062(0x262)],_0x2bb402=_0x13e339['payload'][_0x152062(0x1aa)]?'Success:\x20'+new Date()['toLocaleTimeString']()+'\x20('+_0x13171c+')':'Failed:\x20'+_0x13e339[_0x152062(0x187)][_0x152062(0x22b)];_0x547958[_0x152062(0x24a)](_0x152062(0xf2),{'val':_0x2bb402,'ack':!![]});if(_0x13e339[_0x152062(0x187)][_0x152062(0x1aa)]&&_0x13eb9f)_0x547958[_0x152062(0x24a)]('analysis.security.currentThreshold',{'val':_0x13eb9f,'ack':!![]});}else{if(_0x13e339['type']===_0x152062(0xe5)){const {patterns:_0x3f4a1c}=_0x13e339[_0x152062(0x187)];if(_0x3f4a1c&&_0x3f4a1c['length']>0x0){_0x547958['log']['info'](_0x152062(0x147)+_0x3f4a1c['length']+_0x152062(0x131)),_0x547958[_0x152062(0x24a)]('analysis.automation.detectedPatterns',{'val':JSON['stringify'](_0x3f4a1c),'ack':!![]});const _0x1abde4=_0x3f4a1c[0x0],_0x5d8295=_0x152062(0x146)+_0x1abde4[_0x152062(0x24d)]+'\x20('+(_0x1abde4[_0x152062(0xe4)]*0x64)[_0x152062(0x13e)](0x0)+'%)';_0x547958[_0x152062(0x24a)]('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),_0x547958[_0x152062(0x24a)]('analysis.automation.description',{'val':_0x5d8295,'ack':!![]});}else _0x547958[_0x152062(0xe0)]['info'](_0x152062(0x261)),_0x547958[_0x152062(0x24a)](_0x152062(0x1ed),{'val':![],'ack':!![]}),_0x547958[_0x152062(0x24a)](_0x152062(0x1bc),{'val':'[]','ack':!![]});}else{if(_0x13e339[_0x152062(0x21d)]===_0x152062(0x118)){if(_0x13e339[_0x152062(0x187)]['success'])try{const _0x19550b=JSON[_0x152062(0x151)](_0x13e339[_0x152062(0x187)][_0x152062(0x21f)]);if(_0x19550b[_0x152062(0xf3)])_0x547958[_0x152062(0x24a)](_0x152062(0x193),{'val':JSON['stringify'](_0x19550b[_0x152062(0xf3)]),'ack':!![]});if(_0x19550b[_0x152062(0x170)])_0x547958['setStateAsync'](_0x152062(0x144),{'val':JSON[_0x152062(0x1eb)](_0x19550b[_0x152062(0x170)]),'ack':!![]});}catch(_0x158a9c){}}else{if(_0x13e339[_0x152062(0x21d)]==='HEALTH_TRAIN_RESULT'){if(_0x13e339[_0x152062(0x187)]['success'])_0x547958[_0x152062(0xe0)][_0x152062(0x136)]('âœ…\x20HEALTH\x20TRAINED.');}else{if(_0x13e339[_0x152062(0x21d)]===_0x152062(0x219))_0x547958['setStateAsync']('analysis.health.lastCheck',{'val':new Date()[_0x152062(0x221)](),'ack':!![]}),_0x547958[_0x152062(0x24a)](_0x152062(0x100),{'val':_0x13e339[_0x152062(0x187)][_0x152062(0x104)],'ack':!![]});else{if(_0x13e339['type']===_0x152062(0x20f))_0x547958[_0x152062(0x24a)](_0x152062(0x181),{'val':_0x13e339[_0x152062(0x187)][_0x152062(0x1b9)],'ack':!![]}),_0x547958[_0x152062(0x24a)]('analysis.health.trendValue',{'val':_0x13e339[_0x152062(0x187)][_0x152062(0x12b)],'ack':!![]});else{if(_0x13e339['type']==='GAIT_RESULT'){const {speed_trend:_0x21d909}=_0x13e339[_0x152062(0x187)];if(_0x21d909!==undefined)_0x547958[_0x152062(0x24a)]('analysis.health.gaitSpeed',{'val':_0x21d909,'ack':!![]});}else{if(_0x13e339['type']===_0x152062(0x1a2)){const {forecast:_0xb64dc0}=_0x13e339[_0x152062(0x187)];if(_0xb64dc0)_0x547958[_0x152062(0x24a)](_0x152062(0x1a9),{'val':JSON[_0x152062(0x1eb)](_0xb64dc0),'ack':!![]});}else{if(_0x13e339[_0x152062(0x21d)]===_0x152062(0x105)){const {data:_0x15bb74}=_0x13e339[_0x152062(0x187)];_0x15bb74&&(_0x547958[_0x152062(0xe0)]['info'](_0x152062(0x224)),_0x547958[_0x152062(0x24a)](_0x152062(0x1c9),{'val':JSON[_0x152062(0x1eb)](_0x15bb74),'ack':!![]}));}}}}}}}}}}}}function startPythonService(_0x435723){const _0x1a74b9=a0_0xeee759;let _0x253ef3='python3';if(fs['existsSync'](installer['PYTHON_EXE']))_0x253ef3=installer[_0x1a74b9(0x211)];try{const _0x46af2e=path['join'](__dirname,_0x1a74b9(0x13f),_0x1a74b9(0x14c));_0x435723[_0x1a74b9(0x1e8)]=spawn(_0x253ef3,[_0x46af2e]),_0x435723[_0x1a74b9(0x1e8)][_0x1a74b9(0x255)]['on'](_0x1a74b9(0x1dd),_0x57b91e=>{const _0x2a5a4d=_0x1a74b9,_0x3acee7=_0x57b91e[_0x2a5a4d(0x140)]()[_0x2a5a4d(0x1cc)]('\x0a');_0x3acee7[_0x2a5a4d(0x257)](_0x559a01=>{const _0x5311ee=_0x2a5a4d,_0x2d739b=_0x559a01[_0x5311ee(0x130)]();if(!_0x2d739b)return;if(_0x2d739b[_0x5311ee(0x1fb)](_0x5311ee(0x112)))_0x435723['log'][_0x5311ee(0x1f5)]('[PYTHON]\x20'+_0x2d739b[_0x5311ee(0x19a)](0x5)[_0x5311ee(0x130)]());else{if(_0x2d739b[_0x5311ee(0x1fb)](_0x5311ee(0x205)))try{const _0x51f2fe=JSON[_0x5311ee(0x151)](_0x2d739b[_0x5311ee(0x19a)](0x8)['trim']());handlePythonResult(_0x435723,_0x51f2fe);}catch(_0x30b381){}}});}),_0x435723[_0x1a74b9(0x1e8)]['on']('close',_0x13ee05=>{_0x435723['pythonProcess']=null;});}catch(_0x234927){_0x435723[_0x1a74b9(0xe0)][_0x1a74b9(0x157)](_0x1a74b9(0x1c2)+_0x234927[_0x1a74b9(0x1fc)]);}}async function runAutopilot(_0x31e697){const _0x3202f8=a0_0xeee759;_0x31e697[_0x3202f8(0xe0)][_0x3202f8(0x1f5)]('ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...'),await runGeminiAnalysis(_0x31e697),updateHealthVector(_0x31e697),triggerGaitAnalysis(_0x31e697),triggerEnergyPrediction(_0x31e697);}async function triggerGaitAnalysis(_0x2f9cfd){const _0x1ccb78=a0_0xeee759;if(!_0x2f9cfd[_0x1ccb78(0x172)])return;try{const _0x1a45ec=await _0x2f9cfd['getStateAsync'](_0x1ccb78(0xed));_0x1a45ec&&_0x1a45ec[_0x1ccb78(0x22d)]&&sendToPython(_0x2f9cfd,'ANALYZE_GAIT',{'sequences':JSON['parse'](_0x1a45ec[_0x1ccb78(0x22d)])});}catch(_0xd8655b){}}async function triggerEnergyPrediction(_0x1cc97b){const _0x378258=a0_0xeee759;if(!_0x1cc97b['isProVersion'])return;try{const _0xbbe519=await getOutsideTemperatureNumeric(_0x1cc97b);if(_0xbbe519===null)return;const _0x45d0bc={},_0x587441=_0x1cc97b['config'][_0x378258(0x1f1)]||[];for(const _0x48461f of _0x587441){if(_0x48461f[_0x378258(0x21d)]===_0x378258(0x20c)&&_0x48461f[_0x378258(0x223)]){const _0xb68d91=_0x1cc97b[_0x378258(0x1f9)][_0x48461f['id']];if(_0xb68d91!==undefined)_0x45d0bc[_0x48461f[_0x378258(0x223)]]=_0xb68d91;}}Object['keys'](_0x45d0bc)[_0x378258(0x1af)]>0x0&&sendToPython(_0x1cc97b,_0x378258(0x1e3),{'current_temps':_0x45d0bc,'t_out':_0xbbe519});}catch(_0x19dbd9){}}function updateHealthVector(_0x50424d){const _0x573a51=a0_0xeee759;if(!_0x50424d[_0x573a51(0x1ee)]||_0x50424d[_0x573a51(0x1ee)][_0x573a51(0x1af)]===0x0)return;const _0x467085=new Array(0x60)['fill'](0x0),_0x460128=new Date()['setHours'](0x0,0x0,0x0,0x0);_0x50424d['rawEventLog'][_0x573a51(0x257)](_0x3b201d=>{const _0x5a2c5b=_0x573a51,_0x58bb46=new Date(_0x3b201d[_0x5a2c5b(0x150)]);if(_0x58bb46['getTime']()>=_0x460128){const _0x1db024=_0x58bb46[_0x5a2c5b(0xea)](),_0xf30960=_0x58bb46[_0x5a2c5b(0x1e9)](),_0x44fe8a=_0x1db024*0x4+Math[_0x5a2c5b(0x242)](_0xf30960/0xf);if(_0x44fe8a>=0x0&&_0x44fe8a<0x60)_0x467085[_0x44fe8a]++;}}),_0x50424d[_0x573a51(0x24a)](_0x573a51(0x233),{'val':JSON[_0x573a51(0x1eb)](_0x467085),'ack':!![]});}async function getWeatherContext(_0x572066){const _0x5608d1=a0_0xeee759;if(!_0x572066[_0x5608d1(0x106)][_0x5608d1(0x114)]||!_0x572066[_0x5608d1(0x106)][_0x5608d1(0x245)])return'Wetterdaten\x20deaktiviert.';try{const _0x4d459a=_0x572066[_0x5608d1(0x106)][_0x5608d1(0x245)];let _0x1d00fb=await _0x572066[_0x5608d1(0x259)](_0x4d459a+_0x5608d1(0x14a));if(!_0x1d00fb)_0x1d00fb=await _0x572066[_0x5608d1(0x259)](_0x4d459a+_0x5608d1(0x10f));let _0x50078=await _0x572066[_0x5608d1(0x259)](_0x4d459a+_0x5608d1(0x16f));if(!_0x50078)_0x50078=await _0x572066['getForeignStateAsync'](_0x4d459a+_0x5608d1(0x25d));if(_0x1d00fb&&_0x50078)return _0x1d00fb[_0x5608d1(0x22d)]+_0x5608d1(0x235)+_0x50078[_0x5608d1(0x22d)];}catch(_0x260a62){}return _0x5608d1(0x12f);}async function getCalendarContext(_0xe2dcc1){const _0x54a59d=a0_0xeee759;if(!_0xe2dcc1[_0x54a59d(0x106)][_0x54a59d(0x182)]||!_0xe2dcc1[_0x54a59d(0x106)][_0x54a59d(0x183)])return'Kalender\x20deaktiviert.';return'Keine\x20Termine.';}async function getCalendarNames(_0x477399,_0x4032d9){return[];}async function saveFeedback(_0x3cbfa3,_0x1b7342){const _0x1c53bf=a0_0xeee759;_0x3cbfa3[_0x1c53bf(0xe0)]['info'](_0x1c53bf(0x230)+_0x1b7342['rating']);}async function runGeminiAnalysis(_0x2885ed,_0x152f81=''){const _0x3b7036=a0_0xeee759;if(!_0x2885ed[_0x3b7036(0x18f)])return;if(_0x2885ed[_0x3b7036(0x21b)]['length']===0x0)return;const _0xdbed8b=_0x2885ed[_0x3b7036(0x21b)][_0x3b7036(0x109)](0x0,0xf),_0x58d16d=await getWeatherContext(_0x2885ed),_0x249f76=_0x2885ed['currentSystemMode'],_0x347f67=PERSONA_MAPPING[_0x2885ed['config'][_0x3b7036(0x173)]||'generic'],_0x6e96ba=_0x2885ed[_0x3b7036(0x106)][_0x3b7036(0x1c1)]||_0x3b7036(0x1f4);let _0x3c881f=_0x3b7036(0x206);try{const _0x27d221=await _0x2885ed[_0x3b7036(0x1ac)]('system.presenceWho');if(_0x27d221&&_0x27d221[_0x3b7036(0x22d)])_0x3c881f=_0x27d221['val'];}catch(_0x4b3c7c){}let _0x35fdd6=![];try{const _0x6f26f8=await _0x2885ed[_0x3b7036(0x1ac)](_0x3b7036(0xe6));if(_0x6f26f8&&_0x6f26f8[_0x3b7036(0x22d)])_0x35fdd6=!![];}catch(_0xa590cb){}const _0x3a5a8f=_0x3b7036(0x1cd)+_0x347f67+_0x3b7036(0x264)+_0x6e96ba+_0x3b7036(0x10b)+_0x249f76+_0x3b7036(0x1d0)+_0x58d16d+_0x3b7036(0x127)+_0x3c881f+_0x3b7036(0x1d2)+JSON[_0x3b7036(0x1eb)](_0xdbed8b)+'.\x20EMERGENCY:\x20'+_0x152f81+_0x3b7036(0x226);try{const _0x51123f=await _0x2885ed[_0x3b7036(0x18f)][_0x3b7036(0x258)](_0x3a5a8f),_0x5b31d9=JSON[_0x3b7036(0x151)](_0x51123f[_0x3b7036(0x192)][_0x3b7036(0x1b2)]()[_0x3b7036(0x152)](/```json|```/g,'')['trim']());await _0x2885ed[_0x3b7036(0x24a)](_0x3b7036(0x156),{'val':JSON[_0x3b7036(0x1eb)](_0x5b31d9),'ack':!![]});if(_0x5b31d9[_0x3b7036(0x191)])await _0x2885ed[_0x3b7036(0x24a)](_0x3b7036(0x148),{'val':_0x5b31d9[_0x3b7036(0x191)],'ack':!![]});const _0x57d06d={'timestamp':Date[_0x3b7036(0x120)](),'id':Date[_0x3b7036(0x120)]()['toString'](),'analysis':{'activity':{'summary':_0x5b31d9[_0x3b7036(0x191)],'isAlert':_0x5b31d9[_0x3b7036(0x186)],'alertReason':_0x5b31d9[_0x3b7036(0x1fe)]},'comfort':{'automationProposal':_0x5b31d9[_0x3b7036(0x232)]}}};await updateAnalysisHistory(_0x2885ed,_0x57d06d);const _0x30fab4=_0x5b31d9['isAlert']||![];_0x30fab4!==_0x2885ed[_0x3b7036(0x1a5)]&&(await _0x2885ed[_0x3b7036(0x24a)]('analysis.isAlert',{'val':_0x30fab4,'ack':!![]}),_0x2885ed[_0x3b7036(0x1a5)]=_0x30fab4,_0x30fab4&&(await _0x2885ed[_0x3b7036(0x24a)]('analysis.alertReason',{'val':_0x5b31d9['alertReason'],'ack':!![]}),sendNotification(_0x2885ed,'âš ï¸\x20ALARM:\x20'+_0x5b31d9[_0x3b7036(0x1fe)],![],_0x5b31d9[_0x3b7036(0x159)])));if(_0x5b31d9[_0x3b7036(0x232)]&&_0x5b31d9[_0x3b7036(0x232)][_0x3b7036(0x229)]){await _0x2885ed['setStateAsync']('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),await _0x2885ed[_0x3b7036(0x24a)](_0x3b7036(0x1a6),{'val':_0x5b31d9['automationProposal'][_0x3b7036(0x1a4)],'ack':!![]}),await _0x2885ed[_0x3b7036(0x24a)](_0x3b7036(0x107),{'val':_0x5b31d9['automationProposal']['targetId'],'ack':!![]}),await _0x2885ed['setStateAsync'](_0x3b7036(0x16e),{'val':JSON[_0x3b7036(0x1eb)](_0x5b31d9[_0x3b7036(0x232)]['targetValue']),'ack':!![]});if(_0x35fdd6)executeAutomationAction(_0x2885ed);}}catch(_0x30a7e8){_0x2885ed['log'][_0x3b7036(0x157)](_0x3b7036(0x1b8)+_0x30a7e8[_0x3b7036(0x1fc)]);}}async function startSystem(_0x132de8){const _0x27b499=a0_0xeee759;_0x132de8[_0x27b499(0xe0)][_0x27b499(0x136)](_0x27b499(0x110)),await initZombies(_0x132de8);try{_0x132de8['isProVersion']=await checkLicense(_0x132de8[_0x27b499(0x106)][_0x27b499(0x1e7)]);}catch(_0x57119e){}if(!_0x132de8[_0x27b499(0x106)]['inactivityThresholdHours']||_0x132de8[_0x27b499(0x106)]['inactivityThresholdHours']<0.1)_0x132de8['config'][_0x27b499(0x18c)]=0xc;await initHistory(_0x132de8),await initSystemConfig(_0x132de8);if(_0x132de8[_0x27b499(0x106)][_0x27b499(0x138)])try{_0x132de8[_0x27b499(0x175)]=new GoogleGenerativeAI(_0x132de8[_0x27b499(0x106)]['geminiApiKey']),_0x132de8[_0x27b499(0x18f)]=_0x132de8[_0x27b499(0x175)][_0x27b499(0x125)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':'application/json'}}),_0x132de8[_0x27b499(0xe0)]['info'](_0x27b499(0x196));}catch(_0xbb48b0){_0x132de8[_0x27b499(0xe0)][_0x27b499(0x157)](_0x27b499(0x108)+_0xbb48b0[_0x27b499(0x1fc)]);}await createAllObjects(_0x132de8),await loadSystemMode(_0x132de8),await loadRawEventLog(_0x132de8),await loadDailyDigests(_0x132de8),_0x132de8[_0x27b499(0xe7)]('analysis.trigger'),_0x132de8[_0x27b499(0xe7)](LTM_DP_TRIGGER_DIGEST),_0x132de8[_0x27b499(0xe7)]('system.mode'),_0x132de8[_0x27b499(0xe7)]('analysis.triggerBriefing'),_0x132de8[_0x27b499(0xe7)](_0x27b499(0x12a)),_0x132de8[_0x27b499(0xe7)](_0x27b499(0xe6)),_0x132de8[_0x27b499(0xe7)]('analysis.training.triggerSecurity'),_0x132de8[_0x27b499(0xe7)](_0x27b499(0x164)),_0x132de8[_0x27b499(0xe7)]('analysis.training.triggerEnergy'),_0x132de8[_0x27b499(0xe7)](_0x27b499(0x149)),_0x132de8[_0x27b499(0xe7)](_0x27b499(0x1e1)),await initSensorSubscriptions(_0x132de8),await initPresenceSubscriptions(_0x132de8),await setupTelegramListener(_0x132de8),setTimeout(()=>checkWifiPresence(_0x132de8),0x1388);if(_0x132de8[_0x27b499(0x166)])clearInterval(_0x132de8['analysisTimer']);const _0x29dc5e=_0x132de8['config'][_0x27b499(0x101)]||0xf;_0x29dc5e>0x0&&(_0x132de8[_0x27b499(0x166)]=setInterval(()=>{runAutopilot(_0x132de8);},_0x29dc5e*0x3c*0x3e8)),schedulers[_0x27b499(0x216)](_0x132de8,()=>createDailyDigest(_0x132de8)),schedulers[_0x27b499(0x1ea)](_0x132de8),schedulers[_0x27b499(0x263)](_0x132de8,()=>runBaselineDriftAnalysis(_0x132de8)),schedulers[_0x27b499(0xdc)](_0x132de8,()=>sendMorningBriefing(_0x132de8)),startPythonService(_0x132de8),setTimeout(()=>{_0x132de8['pythonProcess']&&(runPythonHealthCheck(_0x132de8),triggerGaitAnalysis(_0x132de8),triggerEnergyPrediction(_0x132de8)),updateHealthVector(_0x132de8);},0x1388);}class CogniLiving extends utils['Adapter']{constructor(_0x1b3b29){const _0x217cd0=a0_0xeee759;super({..._0x1b3b29,'name':_0x217cd0(0x189)}),this[_0x217cd0(0x21b)]=[],this[_0x217cd0(0x1d8)]=[],this[_0x217cd0(0x1ee)]=[],this[_0x217cd0(0x239)]=[],this[_0x217cd0(0x1f9)]={},this[_0x217cd0(0x180)]={'latitude':0x0,'longitude':0x0,'city':''},this['isPresent']=!![],this['exitTimer']=null,this[_0x217cd0(0x217)]=null,this['isGracePeriodActive']=![],this[_0x217cd0(0x175)]=null,this[_0x217cd0(0x18f)]=null,this['currentSystemMode']=SYSTEM_MODES['NORMAL'],this['isProVersion']=![],this['lastAlertState']=![],this['systemUUID']=_0x217cd0(0x253),this['analysisTimer']=null,this['ltmJob']=null,this[_0x217cd0(0x254)]=null,this[_0x217cd0(0x10d)]=null,this['briefingJob']=null,this[_0x217cd0(0x1e8)]=null,this[_0x217cd0(0x25f)]=![],this['on'](_0x217cd0(0x22e),this[_0x217cd0(0x13b)]['bind'](this)),this['on'](_0x217cd0(0x1a0),this[_0x217cd0(0x198)][_0x217cd0(0x142)](this)),this['on'](_0x217cd0(0x141),this[_0x217cd0(0x17d)][_0x217cd0(0x142)](this)),this['on'](_0x217cd0(0x1fc),this[_0x217cd0(0x1f7)][_0x217cd0(0x142)](this));}async[a0_0xeee759(0x13b)](){const _0x4e3f8d=a0_0xeee759;this[_0x4e3f8d(0xe0)][_0x4e3f8d(0x136)]('cogni-living\x20adapter\x20starting\x20(v'+this[_0x4e3f8d(0x20e)]+_0x4e3f8d(0x163));if(!installer[_0x4e3f8d(0x185)](this,()=>startSystem(this)))return;}[a0_0xeee759(0x17d)](_0x5905b7){const _0x1d6316=a0_0xeee759;if(this[_0x1d6316(0x166)])clearInterval(this[_0x1d6316(0x166)]);if(this[_0x1d6316(0x10d)])clearInterval(this[_0x1d6316(0x10d)]);if(this[_0x1d6316(0x15f)])this[_0x1d6316(0x15f)]['cancel']();if(this['modeResetJob'])this[_0x1d6316(0x254)][_0x1d6316(0x1cb)]();if(this[_0x1d6316(0x1f6)])this[_0x1d6316(0x1f6)][_0x1d6316(0x1cb)]();if(this[_0x1d6316(0x1bb)])clearTimeout(this[_0x1d6316(0x1bb)]);if(this[_0x1d6316(0x217)])clearTimeout(this[_0x1d6316(0x217)]);stopPythonService(this),_0x5905b7();}async['onStateChange'](_0x15f2cb,_0x36e50d){const _0x128cd5=a0_0xeee759;if(!_0x36e50d||this['dependencyInstallInProgress'])return;if(_0x15f2cb[_0x128cd5(0xf8)](_0x128cd5(0xec))&&_0x15f2cb[_0x128cd5(0x1c6)]('communicate.request')&&_0x36e50d[_0x128cd5(0x22d)]){await handleTelegramResponse(this,_0x36e50d[_0x128cd5(0x22d)]);return;}if(_0x15f2cb===this[_0x128cd5(0x1bf)]+'.'+SYSTEM_DP_MODE){if(_0x36e50d[_0x128cd5(0x22d)]&&Object['values'](SYSTEM_MODES)[_0x128cd5(0xf8)](_0x36e50d[_0x128cd5(0x22d)])){this[_0x128cd5(0x176)]=_0x36e50d[_0x128cd5(0x22d)];if(_0x36e50d[_0x128cd5(0x22d)]===SYSTEM_MODES['VACATION'])await setPresence(this,![]);else await setPresence(this,!![]);}if(!_0x36e50d[_0x128cd5(0x16d)])this[_0x128cd5(0x23a)](_0x15f2cb,{'val':this[_0x128cd5(0x176)],'ack':!![]});return;}if(!_0x36e50d[_0x128cd5(0x16d)]){_0x15f2cb[_0x128cd5(0xf8)]('analysis.trigger')&&_0x36e50d[_0x128cd5(0x22d)]&&(this['setState'](_0x15f2cb,{'val':![],'ack':!![]}),runGeminiAnalysis(this));if(_0x15f2cb['includes'](_0x128cd5(0x19d))&&_0x36e50d[_0x128cd5(0x22d)]){this[_0x128cd5(0x23a)](_0x15f2cb,{'val':![],'ack':!![]});if(this[_0x128cd5(0x172)])createDailyDigest(this);}_0x15f2cb[_0x128cd5(0xf8)]('triggerBriefing')&&_0x36e50d[_0x128cd5(0x22d)]&&(this['setState'](_0x15f2cb,{'val':![],'ack':!![]}),sendMorningBriefing(this));_0x15f2cb['includes'](_0x128cd5(0xdd))&&_0x36e50d[_0x128cd5(0x22d)]&&(this[_0x128cd5(0x23a)](_0x15f2cb,{'val':![],'ack':!![]}),executeAutomationAction(this));if(_0x15f2cb[_0x128cd5(0xf8)](_0x128cd5(0x174))&&_0x36e50d[_0x128cd5(0x22d)]){this[_0x128cd5(0x23a)](_0x15f2cb,{'val':![],'ack':!![]});if(this[_0x128cd5(0x172)])try{const _0x2b34e1=await this['getStateAsync'](_0x128cd5(0xed));if(_0x2b34e1&&_0x2b34e1['val']){const _0x1afaaf=JSON[_0x128cd5(0x151)](_0x2b34e1[_0x128cd5(0x22d)]);this[_0x128cd5(0xe0)][_0x128cd5(0x136)](_0x128cd5(0x237)),this[_0x128cd5(0x24a)](_0x128cd5(0xf2),{'val':_0x128cd5(0x194),'ack':!![]}),sendToPython(this,_0x128cd5(0xee),{'sequences':_0x1afaaf});}}catch(_0x19b679){this[_0x128cd5(0xe0)]['error'](_0x128cd5(0x218)+_0x19b679[_0x128cd5(0x1fc)]);}}if(_0x15f2cb[_0x128cd5(0xf8)](_0x128cd5(0x164))&&_0x36e50d[_0x128cd5(0x22d)]){this[_0x128cd5(0x23a)](_0x15f2cb,{'val':![],'ack':!![]});if(this[_0x128cd5(0x172)])try{const _0x15654e=await this[_0x128cd5(0x1ac)](LTM_DP_DAILY_DIGESTS);if(_0x15654e&&_0x15654e[_0x128cd5(0x22d)])sendToPython(this,'TRAIN_HEALTH',{'digests':JSON[_0x128cd5(0x151)](_0x15654e['val'])});}catch(_0x401e3c){}}if(_0x15f2cb['includes'](_0x128cd5(0x1e6))&&_0x36e50d[_0x128cd5(0x22d)]){this['setState'](_0x15f2cb,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x5c42af=await this[_0x128cd5(0x1ac)]('LTM.trainingData.thermodynamics');if(_0x5c42af&&_0x5c42af[_0x128cd5(0x22d)])sendToPython(this,'TRAIN_ENERGY',{'points':JSON[_0x128cd5(0x151)](_0x5c42af[_0x128cd5(0x22d)])});}catch(_0x12f56e){}}if(_0x15f2cb[_0x128cd5(0xf8)](_0x128cd5(0x149))&&_0x36e50d[_0x128cd5(0x22d)]){this[_0x128cd5(0x23a)](_0x15f2cb,{'val':![],'ack':!![]});if(this[_0x128cd5(0x172)])try{const _0x12ddfb=await this[_0x128cd5(0x1ac)](LTM_DP_RAW_LOG);_0x12ddfb&&_0x12ddfb[_0x128cd5(0x22d)]&&(this[_0x128cd5(0xe0)][_0x128cd5(0x136)](_0x128cd5(0x145)),sendToPython(this,_0x128cd5(0x15d),{'events':JSON['parse'](_0x12ddfb[_0x128cd5(0x22d)])}));}catch(_0x2f1d3c){}}if(_0x15f2cb[_0x128cd5(0xf8)](_0x128cd5(0x1e1))&&_0x36e50d['val']){this[_0x128cd5(0x23a)](_0x15f2cb,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x231b1d=await this[_0x128cd5(0x1ac)](_0x128cd5(0xed));if(_0x231b1d&&_0x231b1d[_0x128cd5(0x22d)]){const _0x1fafa6=JSON[_0x128cd5(0x151)](_0x231b1d[_0x128cd5(0x22d)]);this['log'][_0x128cd5(0x136)](_0x128cd5(0x23f)),sendToPython(this,'BUILD_TOPOLOGY',{'sequences':_0x1fafa6});}}catch(_0x83e76e){this[_0x128cd5(0xe0)][_0x128cd5(0x157)]('Topology\x20Error:\x20'+_0x83e76e['message']);}}return;}if(this['config'][_0x128cd5(0x177)]&&this['config']['presenceDevices']['includes'](_0x15f2cb)){await checkWifiPresence(this);return;}const _0xf382e=(this[_0x128cd5(0x106)][_0x128cd5(0x1f1)]||[])[_0x128cd5(0x234)](_0x1a2edf=>_0x1a2edf['id']===_0x15f2cb);if(_0xf382e)processSensorEvent(this,_0x15f2cb,_0x36e50d,_0xf382e);}async[a0_0xeee759(0x1f7)](_0x30e2dd){const _0x90937=a0_0xeee759;if(typeof _0x30e2dd==='object'&&_0x30e2dd[_0x90937(0x1fc)]){if(_0x30e2dd[_0x90937(0x18a)]===_0x90937(0x15b)){const _0x179aac=_0x30e2dd['message'][_0x90937(0x111)]||this[_0x90937(0x106)][_0x90937(0x138)];if(!_0x179aac)return this[_0x90937(0x160)](_0x30e2dd[_0x90937(0x190)],_0x30e2dd['command'],{'success':![],'message':_0x90937(0x102)},_0x30e2dd[_0x90937(0x1e5)]);try{const _0x454e05=new GoogleGenerativeAI(_0x179aac),_0x233ddd=_0x454e05[_0x90937(0x125)]({'model':GEMINI_MODEL}),_0x4b0d2b=await _0x233ddd[_0x90937(0x258)]('Hi');this[_0x90937(0x160)](_0x30e2dd[_0x90937(0x190)],_0x30e2dd['command'],{'success':!![],'message':'OK:\x20'+_0x4b0d2b[_0x90937(0x192)][_0x90937(0x1b2)]()},_0x30e2dd[_0x90937(0x1e5)]);}catch(_0x2146aa){this[_0x90937(0x160)](_0x30e2dd[_0x90937(0x190)],_0x30e2dd[_0x90937(0x18a)],{'success':![],'message':_0x90937(0x14e)+_0x2146aa[_0x90937(0x1fc)]},_0x30e2dd[_0x90937(0x1e5)]);}}else{if(_0x30e2dd[_0x90937(0x18a)]===_0x90937(0x139)){const _0x1a85c2=await getWeatherContext(this),_0x4b8251=await getCalendarContext(this);this[_0x90937(0x160)](_0x30e2dd['from'],_0x30e2dd['command'],{'success':!![],'weather':_0x1a85c2,'calendar':_0x4b8251},_0x30e2dd['callback']);}else{if(_0x30e2dd['command']===_0x90937(0x134)){if(!this['isProVersion'])return this[_0x90937(0x160)](_0x30e2dd[_0x90937(0x190)],_0x30e2dd['command'],{'success':![],'isPro':![]},_0x30e2dd['callback']);let _0x1f09a0={'status':_0x90937(0x1d4)};try{const _0x8f1510=await this[_0x90937(0x1ac)](LTM_DP_DRIFT_STATUS);_0x1f09a0[_0x90937(0x117)]=_0x8f1510?_0x8f1510['val']:_0x90937(0x1d4);}catch(_0x517ca9){}this[_0x90937(0x160)](_0x30e2dd['from'],_0x30e2dd[_0x90937(0x18a)],{'success':!![],'isPro':!![],'dailyDigests':this[_0x90937(0x239)],'driftAnalysis':_0x1f09a0,'analysisHistory':this[_0x90937(0x1d8)]},_0x30e2dd[_0x90937(0x1e5)]);}else{if(_0x30e2dd[_0x90937(0x18a)]===_0x90937(0x1b4)){const _0x16615a=this['dailyDigests']['length'],_0x51066b=new Date(),_0x2d28a4=new Date(_0x51066b[_0x90937(0x202)](),_0x51066b[_0x90937(0x1fa)](),_0x51066b['getDate']())[_0x90937(0x21e)](),_0x17eb97=this[_0x90937(0x1ee)][_0x90937(0x25c)](_0x2de2b4=>new Date(_0x2de2b4[_0x90937(0x150)])['getTime']()>_0x2d28a4)['length'],_0x22f7f9=new Array(0x18)[_0x90937(0xeb)](0x0);this[_0x90937(0x1ee)][_0x90937(0x257)](_0x4f4f1c=>{const _0x46ec4b=_0x90937,_0x42be7c=new Date(_0x4f4f1c['timestamp']);if(_0x42be7c['getTime']()>_0x2d28a4)_0x22f7f9[_0x42be7c[_0x46ec4b(0xea)]()]++;});let _0x200c50={'status':'N/A'};try{const _0x2a421b=await this[_0x90937(0x1ac)](LTM_DP_DRIFT_STATUS);_0x200c50[_0x90937(0x117)]=_0x2a421b?_0x2a421b['val']:_0x90937(0x1d4);}catch(_0x319412){}let _0x1f9662='';try{const _0x44d2da=await this[_0x90937(0x1ac)](_0x90937(0x260));_0x1f9662=_0x44d2da?_0x44d2da[_0x90937(0x22d)]:'';}catch(_0x42f617){}let _0x2e2869=null;!this['geminiModel']&&(_0x2e2869=this['config'][_0x90937(0x138)]?_0x90937(0x1ae):_0x90937(0x179));let _0x537a7f={'detected':![],'description':'','targetId':'','targetValue':'','autoApply':![]};try{const _0x1bbfd9=await this['getStateAsync'](_0x90937(0x1ed));if(_0x1bbfd9&&_0x1bbfd9['val']){_0x537a7f[_0x90937(0x229)]=!![];const _0x529cbc=await this[_0x90937(0x1ac)](_0x90937(0x1a6));_0x537a7f['description']=_0x529cbc?_0x529cbc[_0x90937(0x22d)]:'';const _0x4491e6=await this[_0x90937(0x1ac)](_0x90937(0x107));_0x537a7f[_0x90937(0x16c)]=_0x4491e6?_0x4491e6['val']:'';const _0x152df6=await this[_0x90937(0x1ac)](_0x90937(0x16e));_0x537a7f[_0x90937(0x1b7)]=_0x152df6?_0x152df6['val']:'';}const _0x3ef9f0=await this[_0x90937(0x1ac)](_0x90937(0xe6));_0x537a7f[_0x90937(0x208)]=_0x3ef9f0?!!_0x3ef9f0[_0x90937(0x22d)]:![];}catch(_0x12f448){}this['sendTo'](_0x30e2dd[_0x90937(0x190)],_0x30e2dd[_0x90937(0x18a)],{'success':!![],'eventHistory':this[_0x90937(0x21b)][_0x90937(0x109)](0x0,0xf),'stats':{'digestCount':_0x16615a,'eventCountToday':_0x17eb97,'hourlyActivity':_0x22f7f9,'driftStatus':_0x200c50[_0x90937(0x117)],'isPresent':this['isPresent'],'presenceWho':_0x1f9662,'minDays':this[_0x90937(0x106)][_0x90937(0x1b6)]||0x7,'stbDays':this[_0x90937(0x106)][_0x90937(0xff)]||0xe,'ltbDays':this[_0x90937(0x106)][_0x90937(0xef)]||0x3c,'systemError':_0x2e2869},'automation':_0x537a7f},_0x30e2dd[_0x90937(0x1e5)]);}else{if(_0x30e2dd['command']===_0x90937(0xdf))try{const _0x5bb086=await scanner[_0x90937(0x128)](this,_0x30e2dd[_0x90937(0x1fc)]||{});this['sendTo'](_0x30e2dd['from'],_0x30e2dd[_0x90937(0x18a)],{'success':!![],'devices':_0x5bb086},_0x30e2dd['callback']);}catch(_0x5adb99){this[_0x90937(0x160)](_0x30e2dd[_0x90937(0x190)],_0x30e2dd['command'],{'success':![],'error':_0x5adb99['message']},_0x30e2dd['callback']);}else{if(_0x30e2dd[_0x90937(0x18a)]===_0x90937(0x14d)){const _0x407a2b=await this['getForeignObjectsAsync']('enum.functions.*','enum'),_0x5e8a10=[];if(_0x407a2b)for(const _0x2e7203 in _0x407a2b){const _0x317436=_0x407a2b[_0x2e7203],_0x57170d=(_0x317436['common']&&typeof _0x317436[_0x90937(0x16a)]['name']===_0x90937(0x23c)?_0x317436[_0x90937(0x16a)][_0x90937(0x15e)]['de']:_0x317436['common']['name'])||_0x317436[_0x90937(0x16a)][_0x90937(0x15e)];_0x5e8a10[_0x90937(0x116)]({'id':_0x2e7203,'name':_0x57170d});}const _0x514a42=await this[_0x90937(0x1a8)](_0x90937(0xda),'enum'),_0x51a52e=[];if(_0x514a42)for(const _0x343ed8 in _0x514a42){const _0x4105c=_0x514a42[_0x343ed8],_0x5e2667=(_0x4105c[_0x90937(0x16a)]&&typeof _0x4105c['common'][_0x90937(0x15e)]===_0x90937(0x23c)?_0x4105c['common']['name']['de']:_0x4105c['common'][_0x90937(0x15e)])||_0x343ed8[_0x90937(0x1cc)]('.')[_0x90937(0x161)]();_0x51a52e[_0x90937(0x116)](_0x5e2667);}this[_0x90937(0x160)](_0x30e2dd[_0x90937(0x190)],_0x30e2dd[_0x90937(0x18a)],{'success':!![],'enums':_0x5e8a10,'rooms':_0x51a52e},_0x30e2dd[_0x90937(0x1e5)]);}else{if(_0x30e2dd[_0x90937(0x18a)]===_0x90937(0x13c)){const _0x244bf8=_0x30e2dd[_0x90937(0x1fc)][_0x90937(0x212)];if(!_0x244bf8)return this[_0x90937(0x160)](_0x30e2dd[_0x90937(0x190)],_0x30e2dd[_0x90937(0x18a)],{'success':![],'error':'No\x20instance'},_0x30e2dd[_0x90937(0x1e5)]);const _0x3f19c9=await getCalendarNames(this,_0x244bf8);this['sendTo'](_0x30e2dd['from'],_0x30e2dd[_0x90937(0x18a)],{'success':!![],'names':_0x3f19c9},_0x30e2dd[_0x90937(0x1e5)]);}else{if(_0x30e2dd['command']===_0x90937(0x199)){const {targetId:_0x33ed3e,targetValue:_0x2806cc}=_0x30e2dd['message'];this[_0x90937(0xe0)][_0x90937(0x136)](_0x90937(0x1b0)+_0x33ed3e+_0x90937(0x23e)+_0x2806cc),await this[_0x90937(0x24a)]('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),await this[_0x90937(0x24a)](_0x90937(0x1a6),{'val':'SIMULATION:\x20Test-Vorschlag\x20fÃ¼r\x20'+_0x33ed3e,'ack':!![]}),await this[_0x90937(0x24a)](_0x90937(0x107),{'val':_0x33ed3e,'ack':!![]}),await this[_0x90937(0x24a)](_0x90937(0x16e),{'val':_0x2806cc,'ack':!![]}),this['sendTo'](_0x30e2dd['from'],_0x30e2dd[_0x90937(0x18a)],{'success':!![]},_0x30e2dd['callback']);}else{if(_0x30e2dd[_0x90937(0x18a)]===_0x90937(0x11c)){const {historyId:_0x372932,rating:_0x56d007,comment:_0x46bba4,alertReason:_0x53075c}=_0x30e2dd[_0x90937(0x1fc)];_0x372932&&_0x56d007?(await saveFeedback(this,{'timestamp':Date[_0x90937(0x120)](),'historyId':_0x372932,'rating':_0x56d007,'comment':_0x46bba4,'alertReason':_0x53075c}),this[_0x90937(0x160)](_0x30e2dd[_0x90937(0x190)],_0x30e2dd['command'],{'success':!![]},_0x30e2dd[_0x90937(0x1e5)])):this['sendTo'](_0x30e2dd[_0x90937(0x190)],_0x30e2dd['command'],{'success':![],'error':'Missing\x20data'},_0x30e2dd['callback']);}else _0x30e2dd[_0x90937(0x18a)]===_0x90937(0xfa)&&(this[_0x90937(0xe0)][_0x90937(0x136)](_0x90937(0x137)),await this[_0x90937(0x24a)](_0x90937(0x1ed),{'val':![],'ack':!![]}),await this['setStateAsync']('analysis.automation.description',{'val':'','ack':!![]}),this[_0x90937(0x160)](_0x30e2dd[_0x90937(0x190)],_0x30e2dd[_0x90937(0x18a)],{'success':!![]},_0x30e2dd[_0x90937(0x1e5)]));}}}}}}}}}}}if(require[a0_0xeee759(0xe8)]!==module)module['exports']=_0x31ffec=>new CogniLiving(_0x31ffec);else new CogniLiving();