const a0_0x4f222a=a0_0x57e0;(function(_0x16201b,_0xe24e36){const _0x519b70=a0_0x57e0,_0x4ca535=_0x16201b();while(!![]){try{const _0x28ae49=parseInt(_0x519b70(0x193))/0x1+parseInt(_0x519b70(0x20c))/0x2+parseInt(_0x519b70(0x237))/0x3+-parseInt(_0x519b70(0x161))/0x4*(-parseInt(_0x519b70(0x147))/0x5)+parseInt(_0x519b70(0x1c0))/0x6+parseInt(_0x519b70(0x1f7))/0x7*(-parseInt(_0x519b70(0x1ff))/0x8)+-parseInt(_0x519b70(0x182))/0x9*(parseInt(_0x519b70(0x249))/0xa);if(_0x28ae49===_0xe24e36)break;else _0x4ca535['push'](_0x4ca535['shift']());}catch(_0x31b127){_0x4ca535['push'](_0x4ca535['shift']());}}}(a0_0x3990,0x9f23e));const a0_0x4920af=(function(){let _0x433248=!![];return function(_0x3c5f92,_0xcddf5){const _0x53bfc9=_0x433248?function(){if(_0xcddf5){const _0x289db9=_0xcddf5['apply'](_0x3c5f92,arguments);return _0xcddf5=null,_0x289db9;}}:function(){};return _0x433248=![],_0x53bfc9;};}()),a0_0x13c0e5=a0_0x4920af(this,function(){const _0x1149ac=a0_0x57e0;return a0_0x13c0e5['toString']()[_0x1149ac(0x200)]('(((.+)+)+)+$')[_0x1149ac(0x19a)]()['constructor'](a0_0x13c0e5)[_0x1149ac(0x200)](_0x1149ac(0x1c7));});a0_0x13c0e5();'use strict';const utils=require(a0_0x4f222a(0x17b)),{GoogleGenerativeAI}=require(a0_0x4f222a(0x240)),{spawn}=require(a0_0x4f222a(0xff)),path=require(a0_0x4f222a(0x13d)),fs=require('fs'),installer=require(a0_0x4f222a(0xf4)),scanner=require(a0_0x4f222a(0x13f)),schedulers=require('./lib/scheduler'),HISTORY_MAX_SIZE=0x32,RAW_LOG_MAX_SIZE=0x9c4,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL='models/gemini-flash-latest',SEQUENCE_TIMEOUT_MS=0x5*0x3c*0x3e8,MAX_TRAINING_SET_SIZE=0x1f4,THERMO_LOG_SIZE=0x3e8,EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,LTM_DP_RAW_LOG='LTM.rawEventLog',LTM_DP_DAILY_DIGESTS=a0_0x4f222a(0x12d),LTM_DP_STATUS='LTM.processingStatus',LTM_DP_TRIGGER_DIGEST=a0_0x4f222a(0x254),LTM_DP_BASELINE_STATUS=a0_0x4f222a(0x149),LTM_DP_DRIFT_CHANNEL=a0_0x4f222a(0x260),LTM_DP_DRIFT_STATUS=a0_0x4f222a(0x145),LTM_DP_DRIFT_DETAILS=a0_0x4f222a(0x162),LTM_DP_DRIFT_LAST_CHECK=a0_0x4f222a(0x151),SYSTEM_DP_MODE='system.mode',SYSTEM_MODES={'NORMAL':a0_0x4f222a(0x21c),'VACATION':a0_0x4f222a(0x284),'PARTY':a0_0x4f222a(0x1b3),'GUEST':a0_0x4f222a(0x1c5)},AUTO_RESET_MODES=[SYSTEM_MODES[a0_0x4f222a(0x180)],SYSTEM_MODES[a0_0x4f222a(0x1de)]],PERSONA_MAPPING={'generic':a0_0x4f222a(0xfe),'senior_aal':a0_0x4f222a(0x1e6),'family':a0_0x4f222a(0x19c),'single_comfort':a0_0x4f222a(0x166),'security':a0_0x4f222a(0x1dd)},ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};let activeSequence=[],sequenceTimer=null;async function initZombies(_0x32d75e){const _0x1f0800=a0_0x4f222a;try{const _0x15fbb4=[_0x1f0800(0x1e2),_0x1f0800(0x1a5)];for(const _0x382d3d of _0x15fbb4){try{const _0x58e03d=await _0x32d75e['getObjectAsync'](_0x382d3d);if(_0x58e03d)await _0x32d75e[_0x1f0800(0x173)](_0x382d3d);}catch(_0x5151e7){}}}catch(_0x2fc3ff){}}function a0_0x57e0(_0x23c06f,_0x189778){const _0x72b31c=a0_0x3990();return a0_0x57e0=function(_0x13c0e5,_0x4920af){_0x13c0e5=_0x13c0e5-0xf0;let _0x3990ad=_0x72b31c[_0x13c0e5];return _0x3990ad;},a0_0x57e0(_0x23c06f,_0x189778);}async function checkLicense(_0x462c7c){return!![];}async function initHistory(_0x1df804){const _0x50e510=a0_0x4f222a;try{const _0x337b7f=await _0x1df804['getStateAsync'](_0x50e510(0x1ee));_0x337b7f&&_0x337b7f[_0x50e510(0x1e4)]&&(_0x1df804[_0x50e510(0x269)]=JSON[_0x50e510(0x1ed)](_0x337b7f[_0x50e510(0x1e4)][_0x50e510(0x19a)]()));}catch(_0x57d6e2){_0x1df804['eventHistory']=[];}try{const _0x428e99=await _0x1df804['getStateAsync'](_0x50e510(0x137));if(_0x428e99&&_0x428e99['val'])_0x1df804[_0x50e510(0x1d4)]=JSON[_0x50e510(0x1ed)](_0x428e99[_0x50e510(0x1e4)][_0x50e510(0x19a)]());}catch(_0x7338a8){_0x1df804['analysisHistory']=[];}if(_0x1df804[_0x50e510(0x269)]&&_0x1df804['eventHistory']['length']>0x0){_0x1df804[_0x50e510(0x1d0)][_0x50e510(0x22a)](_0x50e510(0x1a3));for(let _0x2e514f=_0x1df804[_0x50e510(0x269)][_0x50e510(0x253)]-0x1;_0x2e514f>=0x0;_0x2e514f--){const _0x3fcbcb=_0x1df804[_0x50e510(0x269)][_0x2e514f];if(_0x3fcbcb&&_0x3fcbcb['id']!==undefined&&_0x3fcbcb[_0x50e510(0x202)]!==undefined)_0x1df804['sensorLastValues'][_0x3fcbcb['id']]=_0x3fcbcb[_0x50e510(0x202)];}}}async function initSystemConfig(_0x954d6a){const _0x2dcf9a=a0_0x4f222a;try{const _0x512ad1=await _0x954d6a[_0x2dcf9a(0x155)](_0x2dcf9a(0x267));if(_0x512ad1&&_0x512ad1[_0x2dcf9a(0x135)])_0x954d6a[_0x2dcf9a(0x102)]={'latitude':_0x512ad1[_0x2dcf9a(0x135)][_0x2dcf9a(0x127)]||0x0,'longitude':_0x512ad1[_0x2dcf9a(0x135)]['longitude']||0x0,'city':_0x512ad1[_0x2dcf9a(0x135)][_0x2dcf9a(0x1bd)]||''};}catch(_0x2e07f8){}}async function createAllObjects(_0x1c3107){const _0x4d8556=a0_0x4f222a;await _0x1c3107['extendObjectAsync'](_0x4d8556(0x1d5),{'type':_0x4d8556(0xf1),'common':{'name':'System'},'native':{}}),await _0x1c3107['extendObjectAsync'](SYSTEM_DP_MODE,{'type':_0x4d8556(0x103),'common':{'name':_0x4d8556(0x121),'type':_0x4d8556(0x168),'role':_0x4d8556(0x103),'read':!![],'write':!![],'def':SYSTEM_MODES[_0x4d8556(0x1b8)]},'native':{}}),await _0x1c3107[_0x4d8556(0x194)](_0x4d8556(0x25f),{'type':_0x4d8556(0x103),'common':{'name':_0x4d8556(0x232),'type':_0x4d8556(0x168),'role':_0x4d8556(0x12f),'read':!![],'write':![]},'native':{}}),await _0x1c3107['setObjectNotExistsAsync']('events.lastEvent',{'type':_0x4d8556(0x103),'common':{'name':'Last\x20raw\x20event','type':_0x4d8556(0x168),'role':_0x4d8556(0x1fc),'read':!![],'write':![]},'native':{}}),await _0x1c3107[_0x4d8556(0x194)]('events.history',{'type':_0x4d8556(0x103),'common':{'name':_0x4d8556(0x150),'type':'string','role':_0x4d8556(0x1fc),'read':!![],'write':![]},'native':{}}),await _0x1c3107['extendObjectAsync']('analysis.training',{'type':_0x4d8556(0xf1),'common':{'name':'AI\x20Training'},'native':{}}),await _0x1c3107['setObjectNotExistsAsync'](_0x4d8556(0x170),{'type':'state','common':{'name':'Train\x20Security','type':_0x4d8556(0x11d),'role':_0x4d8556(0x108),'read':!![],'write':!![]},'native':{}}),await _0x1c3107[_0x4d8556(0x194)](_0x4d8556(0x15f),{'type':'state','common':{'name':'Train\x20Health','type':_0x4d8556(0x11d),'role':_0x4d8556(0x108),'read':!![],'write':!![]},'native':{}}),await _0x1c3107['setObjectNotExistsAsync']('analysis.training.triggerEnergy',{'type':_0x4d8556(0x103),'common':{'name':_0x4d8556(0x216),'type':_0x4d8556(0x11d),'role':_0x4d8556(0x108),'read':!![],'write':!![]},'native':{}}),await _0x1c3107[_0x4d8556(0x194)](_0x4d8556(0x16c),{'type':_0x4d8556(0x103),'common':{'name':_0x4d8556(0x1ac),'type':_0x4d8556(0x11d),'role':_0x4d8556(0x108),'read':!![],'write':!![]},'native':{}}),await _0x1c3107[_0x4d8556(0x194)](_0x4d8556(0x15d),{'type':_0x4d8556(0x103),'common':{'name':_0x4d8556(0x22b),'type':_0x4d8556(0x11d),'role':_0x4d8556(0x108),'read':!![],'write':!![]},'native':{}}),await _0x1c3107['setObjectNotExistsAsync'](_0x4d8556(0x273),{'type':'state','common':{'name':'Training\x20Status','type':'string','role':'text','read':!![],'write':![]},'native':{}}),await _0x1c3107['extendObjectAsync'](_0x4d8556(0x1b5),{'type':_0x4d8556(0xf1),'common':{'name':_0x4d8556(0x25e)},'native':{}}),await _0x1c3107[_0x4d8556(0x194)](_0x4d8556(0x117),{'type':_0x4d8556(0x103),'common':{'name':'Anomaly\x20Score','type':_0x4d8556(0x1af),'role':'value','read':!![],'write':![]},'native':{}}),await _0x1c3107['setObjectNotExistsAsync'](_0x4d8556(0x184),{'type':_0x4d8556(0x103),'common':{'name':_0x4d8556(0x211),'type':_0x4d8556(0x1af),'role':_0x4d8556(0x202),'read':!![],'write':![],'def':0.05},'native':{}}),await _0x1c3107['setObjectNotExistsAsync']('analysis.security.lastCheck',{'type':'state','common':{'name':_0x4d8556(0x133),'type':_0x4d8556(0x168),'role':_0x4d8556(0x19f),'read':!![],'write':![]},'native':{}}),await _0x1c3107[_0x4d8556(0x194)](_0x4d8556(0x17e),{'type':_0x4d8556(0x103),'common':{'name':_0x4d8556(0x24f),'type':_0x4d8556(0x168),'role':_0x4d8556(0x1fc),'read':!![],'write':![]},'native':{}}),await _0x1c3107[_0x4d8556(0x18b)](_0x4d8556(0x1c4),{'type':_0x4d8556(0xf1),'common':{'name':_0x4d8556(0x201)},'native':{}}),await _0x1c3107['setObjectNotExistsAsync'](_0x4d8556(0x1e1),{'type':_0x4d8556(0x103),'common':{'name':_0x4d8556(0x133),'type':_0x4d8556(0x168),'role':_0x4d8556(0x19f),'read':!![],'write':![]},'native':{}}),await _0x1c3107['setObjectNotExistsAsync']('analysis.health.isAnomaly',{'type':_0x4d8556(0x103),'common':{'name':_0x4d8556(0x215),'type':_0x4d8556(0x11d),'role':_0x4d8556(0x1d9),'read':!![],'write':![]},'native':{}}),await _0x1c3107[_0x4d8556(0x194)](_0x4d8556(0x244),{'type':_0x4d8556(0x103),'common':{'name':'Trend','type':'string','role':_0x4d8556(0x12f),'read':!![],'write':![]},'native':{}}),await _0x1c3107[_0x4d8556(0x194)](_0x4d8556(0x196),{'type':_0x4d8556(0x103),'common':{'name':'Trend\x20Value','type':_0x4d8556(0x1af),'role':_0x4d8556(0x202),'read':!![],'write':![]},'native':{}}),await _0x1c3107[_0x4d8556(0x194)](_0x4d8556(0x10c),{'type':'state','common':{'name':'Today\x20Vector\x20(15m)','type':_0x4d8556(0x168),'role':'json','read':!![],'write':![]},'native':{}}),await _0x1c3107[_0x4d8556(0x194)]('analysis.health.gaitSpeed',{'type':'state','common':{'name':'Gait\x20Speed\x20Trend','type':_0x4d8556(0x1af),'role':_0x4d8556(0x202),'read':!![],'write':![]},'native':{}}),await _0x1c3107['extendObjectAsync']('analysis.energy',{'type':'channel','common':{'name':'Energy\x20Intelligence'},'native':{}}),await _0x1c3107['setObjectNotExistsAsync'](_0x4d8556(0x118),{'type':_0x4d8556(0x103),'common':{'name':_0x4d8556(0x1f9),'type':'string','role':_0x4d8556(0x12f),'read':!![],'write':![]},'native':{}}),await _0x1c3107[_0x4d8556(0x194)](_0x4d8556(0x239),{'type':_0x4d8556(0x103),'common':{'name':_0x4d8556(0x148),'type':'string','role':_0x4d8556(0x12f),'read':!![],'write':![]},'native':{}}),await _0x1c3107[_0x4d8556(0x194)](_0x4d8556(0x1cc),{'type':'state','common':{'name':_0x4d8556(0x26a),'type':_0x4d8556(0x168),'role':_0x4d8556(0x1fc),'read':!![],'write':![]},'native':{}}),await _0x1c3107[_0x4d8556(0x18b)](_0x4d8556(0x1a8),{'type':_0x4d8556(0xf1),'common':{'name':_0x4d8556(0x1a8)},'native':{}}),await _0x1c3107[_0x4d8556(0x18b)](LTM_DP_RAW_LOG,{'type':'state','common':{'name':_0x4d8556(0x124),'type':'string','role':_0x4d8556(0x1fc),'read':!![],'write':![]},'native':{}}),await _0x1c3107[_0x4d8556(0x18b)](LTM_DP_DAILY_DIGESTS,{'type':_0x4d8556(0x103),'common':{'name':'Daily\x20Digests','type':'string','role':_0x4d8556(0x1fc),'read':!![],'write':![]},'native':{}}),await _0x1c3107[_0x4d8556(0x194)](_0x4d8556(0x1fe),{'type':_0x4d8556(0x103),'common':{'name':'Sequences','type':_0x4d8556(0x168),'role':_0x4d8556(0x1fc),'read':!![],'write':![]},'native':{}}),await _0x1c3107['setObjectNotExistsAsync'](_0x4d8556(0x178),{'type':_0x4d8556(0x103),'common':{'name':'Thermodynamics','type':'string','role':'json','read':!![],'write':![]},'native':{}}),await _0x1c3107[_0x4d8556(0x194)](_0x4d8556(0x190),{'type':_0x4d8556(0x103),'common':{'name':_0x4d8556(0x229),'type':'boolean','role':_0x4d8556(0x108),'read':!![],'write':!![]},'native':{}}),await _0x1c3107[_0x4d8556(0x194)](_0x4d8556(0x119),{'type':_0x4d8556(0x103),'common':{'name':_0x4d8556(0x1c6),'type':_0x4d8556(0x11d),'role':_0x4d8556(0x108),'read':!![],'write':!![]},'native':{}}),await _0x1c3107['setObjectNotExistsAsync'](_0x4d8556(0x15a),{'type':_0x4d8556(0x103),'common':{'name':_0x4d8556(0xf9),'type':_0x4d8556(0x11d),'role':_0x4d8556(0x1f4),'read':!![],'write':![]},'native':{}}),await _0x1c3107[_0x4d8556(0x194)](_0x4d8556(0x186),{'type':_0x4d8556(0x103),'common':{'name':_0x4d8556(0x274),'type':'string','role':_0x4d8556(0x174),'read':!![],'write':![]},'native':{}}),await _0x1c3107[_0x4d8556(0x194)](_0x4d8556(0x111),{'type':_0x4d8556(0x103),'common':{'name':_0x4d8556(0x1c9),'type':'string','role':'text','read':!![],'write':![]},'native':{}}),await _0x1c3107[_0x4d8556(0x194)](_0x4d8556(0x10e),{'type':_0x4d8556(0x103),'common':{'name':_0x4d8556(0x1f8),'type':_0x4d8556(0x11d),'role':_0x4d8556(0x1d9),'read':!![],'write':![]},'native':{}}),await _0x1c3107[_0x4d8556(0x194)](_0x4d8556(0x27e),{'type':_0x4d8556(0x103),'common':{'name':_0x4d8556(0x1f3),'type':_0x4d8556(0x168),'role':'text','read':!![],'write':![]},'native':{}}),await _0x1c3107[_0x4d8556(0x194)](_0x4d8556(0x268),{'type':'state','common':{'name':_0x4d8556(0x131),'type':_0x4d8556(0x168),'role':_0x4d8556(0x1fc),'read':!![],'write':![]},'native':{}}),await _0x1c3107[_0x4d8556(0x194)](_0x4d8556(0x10f),{'type':_0x4d8556(0x103),'common':{'name':_0x4d8556(0x1da),'type':'string','role':_0x4d8556(0x12f),'read':!![],'write':![]},'native':{}}),await _0x1c3107[_0x4d8556(0x194)](_0x4d8556(0x195),{'type':_0x4d8556(0x103),'common':{'name':_0x4d8556(0x228),'type':_0x4d8556(0x168),'role':_0x4d8556(0x12f),'read':!![],'write':![]},'native':{}}),await _0x1c3107[_0x4d8556(0x194)](_0x4d8556(0x1ec),{'type':_0x4d8556(0x103),'common':{'name':_0x4d8556(0x21e),'type':_0x4d8556(0x11d),'role':'switch','read':!![],'write':!![]},'native':{}}),await _0x1c3107[_0x4d8556(0x194)](_0x4d8556(0x19b),{'type':_0x4d8556(0x103),'common':{'name':'Trigger\x20Action','type':_0x4d8556(0x11d),'role':'button','read':!![],'write':!![]},'native':{}});}async function loadSystemMode(_0x762325){const _0x581ea1=a0_0x4f222a;try{const _0x6a9f20=await _0x762325[_0x581ea1(0x27b)](SYSTEM_DP_MODE);_0x6a9f20&&_0x6a9f20[_0x581ea1(0x1e4)]&&Object[_0x581ea1(0x1fd)](SYSTEM_MODES)[_0x581ea1(0x18c)](_0x6a9f20[_0x581ea1(0x1e4)])?_0x762325[_0x581ea1(0x1a1)]=_0x6a9f20[_0x581ea1(0x1e4)]:(_0x762325['currentSystemMode']=SYSTEM_MODES[_0x581ea1(0x1b8)],await _0x762325[_0x581ea1(0x164)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES['NORMAL'],'ack':!![]}));}catch(_0x232818){_0x762325[_0x581ea1(0x1a1)]=SYSTEM_MODES[_0x581ea1(0x1b8)];}}async function loadRawEventLog(_0x41486c){const _0x3d139b=a0_0x4f222a;try{const _0x4648c5=await _0x41486c[_0x3d139b(0x27b)](LTM_DP_RAW_LOG);if(_0x4648c5&&_0x4648c5[_0x3d139b(0x1e4)])_0x41486c[_0x3d139b(0x172)]=JSON['parse'](_0x4648c5[_0x3d139b(0x1e4)]);}catch(_0x5aa59d){_0x41486c['rawEventLog']=[];}}async function saveRawEventLog(_0x92d657){const _0x3ec272=a0_0x4f222a;if(_0x92d657[_0x3ec272(0x172)][_0x3ec272(0x253)]>RAW_LOG_MAX_SIZE)_0x92d657['rawEventLog']['splice'](0x0,_0x92d657['rawEventLog'][_0x3ec272(0x253)]-RAW_LOG_MAX_SIZE);await _0x92d657[_0x3ec272(0x164)](LTM_DP_RAW_LOG,{'val':JSON[_0x3ec272(0x144)](_0x92d657[_0x3ec272(0x172)]),'ack':!![]});}async function loadDailyDigests(_0x4281cf){const _0x42ae70=a0_0x4f222a;try{const _0x5c262a=await _0x4281cf['getStateAsync'](LTM_DP_DAILY_DIGESTS);if(_0x5c262a&&_0x5c262a[_0x42ae70(0x1e4)])_0x4281cf[_0x42ae70(0x21f)]=JSON['parse'](_0x5c262a[_0x42ae70(0x1e4)]);}catch(_0x34081a){_0x4281cf[_0x42ae70(0x21f)]=[];}await updateBaselineStatus(_0x4281cf);}async function saveDailyDigests(_0x184f1c,_0x587eea=!![]){const _0x36cb1b=a0_0x4f222a,_0x5efc39=_0x184f1c[_0x36cb1b(0x283)]['ltmLtbWindowDays']||0x3c;_0x184f1c[_0x36cb1b(0x21f)][_0x36cb1b(0x253)]>_0x5efc39&&_0x184f1c[_0x36cb1b(0x21f)][_0x36cb1b(0x19e)](0x0,_0x184f1c[_0x36cb1b(0x21f)]['length']-_0x5efc39);await _0x184f1c['setStateAsync'](LTM_DP_DAILY_DIGESTS,{'val':JSON['stringify'](_0x184f1c[_0x36cb1b(0x21f)]),'ack':!![]});if(_0x587eea)await updateBaselineStatus(_0x184f1c);}async function updateAnalysisHistory(_0x1fbdfa,_0x22239d){const _0x5d287a=a0_0x4f222a;_0x1fbdfa[_0x5d287a(0x1d4)]['unshift'](_0x22239d);if(_0x1fbdfa['analysisHistory'][_0x5d287a(0x253)]>HISTORY_MAX_SIZE)_0x1fbdfa[_0x5d287a(0x1d4)][_0x5d287a(0x1e5)]();await _0x1fbdfa['setStateAsync']('analysis.analysisHistory',{'val':JSON[_0x5d287a(0x144)](_0x1fbdfa[_0x5d287a(0x1d4)]),'ack':!![]});}async function updateBaselineStatus(_0x2a0053){const _0x5ad09e=a0_0x4f222a;if(!_0x2a0053['isProVersion']){await _0x2a0053[_0x5ad09e(0x164)](LTM_DP_BASELINE_STATUS,{'val':'Deaktiviert\x20(Pro-Feature)','ack':!![]});return;}const _0x2df882=_0x2a0053[_0x5ad09e(0x21f)][_0x5ad09e(0x253)]>=(_0x2a0053[_0x5ad09e(0x283)]['minDaysForBaseline']||0x7)?_0x5ad09e(0x248)+_0x2a0053[_0x5ad09e(0x21f)][_0x5ad09e(0x253)]+_0x5ad09e(0x1b7):_0x5ad09e(0x112)+_0x2a0053['dailyDigests'][_0x5ad09e(0x253)]+'/'+(_0x2a0053[_0x5ad09e(0x283)][_0x5ad09e(0x1b4)]||0x7)+')';await _0x2a0053[_0x5ad09e(0x164)](LTM_DP_BASELINE_STATUS,{'val':_0x2df882,'ack':!![]});}async function initSensorSubscriptions(_0x2392a4){const _0x31c3ab=a0_0x4f222a,_0x559e4b=_0x2392a4[_0x31c3ab(0x283)][_0x31c3ab(0x262)];if(_0x559e4b)for(const _0x5a0720 of _0x559e4b){await _0x2392a4[_0x31c3ab(0x1a7)](_0x5a0720['id']);}}async function initPresenceSubscriptions(_0x45161e){const _0x441c9c=a0_0x4f222a,_0x147876=_0x45161e[_0x441c9c(0x283)][_0x441c9c(0x235)];if(_0x147876)for(const _0x3b6243 of _0x147876){await _0x45161e[_0x441c9c(0x1a7)](_0x3b6243);}}async function setupTelegramListener(_0x410529){const _0x791e7f=a0_0x4f222a,_0x5578ed=_0x410529[_0x791e7f(0x283)][_0x791e7f(0x154)];if(_0x410529['config'][_0x791e7f(0x271)]&&_0x5578ed)await _0x410529['subscribeForeignStatesAsync'](_0x5578ed+_0x791e7f(0x21b));}async function checkWifiPresence(_0x2f017b){const _0x445e55=a0_0x4f222a;try{const _0x39e52f=_0x2f017b[_0x445e55(0x283)]['presenceDevices']||[];let _0x48e9e9=![];const _0xd517b0=[];for(const _0x5956dc of _0x39e52f){try{const _0x36e1da=await _0x2f017b['getForeignStateAsync'](_0x5956dc);_0x36e1da&&(_0x36e1da['val']===!![]||_0x36e1da['val']===_0x445e55(0x1d7)||_0x36e1da[_0x445e55(0x1e4)]===0x1)&&(_0x48e9e9=!![],_0xd517b0[_0x445e55(0x27c)](_0x5956dc));}catch(_0x575e1d){}}return await _0x2f017b[_0x445e55(0x164)]('system.presenceWho',{'val':_0xd517b0[_0x445e55(0x217)](',\x20'),'ack':!![]}),_0x48e9e9&&(_0x2f017b['exitTimer']&&(_0x2f017b[_0x445e55(0x1d0)][_0x445e55(0x22a)]('WiFi\x20Presence\x20detected.'),abortExitTimer(_0x2f017b)),!_0x2f017b[_0x445e55(0x234)]&&_0x2f017b[_0x445e55(0x1a1)]===SYSTEM_MODES[_0x445e55(0x1b8)]&&await setPresence(_0x2f017b,!![])),_0x48e9e9;}catch(_0x12cfe7){return![];}}function startExitTimer(_0x33c01f){const _0x2c04f7=a0_0x4f222a;abortExitTimer(_0x33c01f),_0x33c01f[_0x2c04f7(0x1cf)]=!![],_0x33c01f[_0x2c04f7(0x152)]=setTimeout(()=>{_0x33c01f['isGracePeriodActive']=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),_0x33c01f[_0x2c04f7(0x27a)]=setTimeout(()=>{setPresence(_0x33c01f,![]),_0x33c01f['exitTimer']=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}function abortExitTimer(_0x2c8d37){const _0x32e99c=a0_0x4f222a;if(_0x2c8d37[_0x32e99c(0x27a)])clearTimeout(_0x2c8d37[_0x32e99c(0x27a)]);if(_0x2c8d37[_0x32e99c(0x152)])clearTimeout(_0x2c8d37['exitGraceTimer']);_0x2c8d37[_0x32e99c(0x27a)]=null,_0x2c8d37[_0x32e99c(0x152)]=null,_0x2c8d37[_0x32e99c(0x1cf)]=![];}async function setPresence(_0x1983d8,_0x29e722){const _0x1157b6=a0_0x4f222a;if(_0x1983d8['isPresent']===_0x29e722)return;_0x1983d8[_0x1157b6(0x234)]=_0x29e722,await _0x1983d8[_0x1157b6(0x164)](_0x1157b6(0x23a),{'val':_0x29e722,'ack':!![]});}async function executeAutomationAction(_0xca80f){const _0x306c8c=a0_0x4f222a;try{const _0x9264de=await _0xca80f[_0x306c8c(0x27b)](_0x306c8c(0x10f)),_0x398372=await _0xca80f[_0x306c8c(0x27b)](_0x306c8c(0x195));if(_0x9264de&&_0x9264de[_0x306c8c(0x1e4)]&&_0x398372){const _0x57dadf=_0x9264de[_0x306c8c(0x1e4)];let _0x318faa=_0x398372['val'];try{_0x318faa=JSON[_0x306c8c(0x1ed)](_0x318faa);}catch(_0x262796){}_0xca80f[_0x306c8c(0x1d0)]['info']('ü§ñ\x20BUTLER:\x20Executing\x20Action\x20->\x20'+_0x57dadf+_0x306c8c(0x224)+_0x318faa),await _0xca80f[_0x306c8c(0x143)](_0x57dadf,_0x318faa);}else _0xca80f[_0x306c8c(0x1d0)][_0x306c8c(0x17a)](_0x306c8c(0x263));}catch(_0x561d85){_0xca80f[_0x306c8c(0x1d0)]['error']('BUTLER\x20Execution\x20Error:\x20'+_0x561d85[_0x306c8c(0x214)]);}}async function processSensorEvent(_0x61756b,_0x3317fe,_0x2d495e,_0x33bdc6){const _0x19eeea=a0_0x4f222a;if(!_0x33bdc6)return;const _0x4a26b8=_0x2d495e[_0x19eeea(0x1e4)],_0x437006=Date['now'](),_0x347a85=_0x61756b['sensorLastValues'][_0x3317fe];_0x61756b['sensorLastValues'][_0x3317fe]=_0x4a26b8;if(!_0x33bdc6[_0x19eeea(0x156)]&&_0x347a85!=undefined&&_0x347a85==_0x4a26b8)return;const _0x3c53e8=(_0x33bdc6[_0x19eeea(0x1ae)]||'')[_0x19eeea(0x1d1)](),_0x1f2471=_0x3c53e8[_0x19eeea(0x18c)](_0x19eeea(0xf0))||_0x3c53e8[_0x19eeea(0x18c)](_0x19eeea(0x1b6))||_0x3c53e8[_0x19eeea(0x18c)](_0x19eeea(0x21d))||_0x3c53e8[_0x19eeea(0x18c)]('heizung');_0x61756b[_0x19eeea(0x20b)]&&_0x1f2471&&recordThermodynamics(_0x61756b,_0x3317fe,_0x4a26b8,_0x33bdc6[_0x19eeea(0x116)]);const _0x386fc2={'timestamp':_0x437006,'id':_0x3317fe,'name':_0x33bdc6[_0x19eeea(0x1ab)],'type':_0x33bdc6[_0x19eeea(0x1ae)],'location':_0x33bdc6[_0x19eeea(0x116)],'value':_0x4a26b8};_0x61756b[_0x19eeea(0x269)][_0x19eeea(0x25a)](_0x386fc2);if(_0x61756b[_0x19eeea(0x269)][_0x19eeea(0x253)]>HISTORY_MAX_SIZE)_0x61756b['eventHistory']['pop']();await _0x61756b[_0x19eeea(0x164)]('events.lastEvent',{'val':JSON[_0x19eeea(0x144)](_0x386fc2),'ack':!![]}),await _0x61756b[_0x19eeea(0x164)]('events.history',{'val':JSON['stringify'](_0x61756b['eventHistory']),'ack':!![]});_0x61756b['isProVersion']&&(_0x61756b[_0x19eeea(0x172)][_0x19eeea(0x27c)](_0x386fc2),await saveRawEventLog(_0x61756b),recordSequence(_0x61756b,_0x386fc2));if(_0x33bdc6[_0x19eeea(0x1a0)]&&_0x4a26b8===!![]){if(_0x61756b[_0x19eeea(0x234)]&&!_0x61756b['isGracePeriodActive'])startExitTimer(_0x61756b);else{if(!_0x61756b['isPresent'])setPresence(_0x61756b,!![]);}}else{if(_0x33bdc6[_0x19eeea(0x1ae)]==='motion'&&_0x4a26b8===!![]){if(_0x61756b[_0x19eeea(0x27a)])abortExitTimer(_0x61756b);if(!_0x61756b['isPresent']&&_0x61756b['currentSystemMode']===SYSTEM_MODES[_0x19eeea(0x1b8)])setPresence(_0x61756b,!![]);}}}async function recordThermodynamics(_0x5c531f,_0x4fb74e,_0x1e8599,_0x38e210){const _0x5c16c0=a0_0x4f222a,_0x556dc6=await getOutsideTemperatureNumeric(_0x5c531f),_0x3982b0=await _0x5c531f[_0x5c16c0(0x27b)](_0x5c16c0(0x178));let _0x65580b=[];if(_0x3982b0&&_0x3982b0[_0x5c16c0(0x1e4)])try{_0x65580b=JSON['parse'](_0x3982b0[_0x5c16c0(0x1e4)]);}catch(_0x1033f5){}_0x65580b['push']({'ts':Date[_0x5c16c0(0x134)](),'room':_0x38e210||_0x5c16c0(0x231),'t_in':_0x1e8599,'t_out':_0x556dc6});if(_0x65580b[_0x5c16c0(0x253)]>THERMO_LOG_SIZE)_0x65580b['shift']();await _0x5c531f['setStateAsync'](_0x5c16c0(0x178),{'val':JSON[_0x5c16c0(0x144)](_0x65580b),'ack':!![]});}async function getOutsideTemperatureNumeric(_0x400657){const _0xcbe24e=a0_0x4f222a;if(_0x400657[_0xcbe24e(0x283)][_0xcbe24e(0x1d2)])try{const _0x10e173=await _0x400657['getForeignStateAsync'](_0x400657[_0xcbe24e(0x283)][_0xcbe24e(0x1d2)]);if(_0x10e173&&_0x10e173[_0xcbe24e(0x1e4)]!==undefined&&_0x10e173['val']!==null)return parseFloat(_0x10e173[_0xcbe24e(0x1e4)]);}catch(_0xecc1f2){}const _0x19e925=_0x400657[_0xcbe24e(0x283)]['weatherInstance'];if(!_0x400657[_0xcbe24e(0x283)]['useWeather']||!_0x19e925)return null;try{let _0x5e0fc6='';if(_0x19e925[_0xcbe24e(0x18c)]('accuweather'))_0x5e0fc6=_0x19e925+'.Current.Temperature';else{if(_0x19e925[_0xcbe24e(0x18c)](_0xcbe24e(0x275)))_0x5e0fc6=_0x19e925+_0xcbe24e(0x12b);else{if(_0x19e925[_0xcbe24e(0x18c)](_0xcbe24e(0x105)))_0x5e0fc6=_0x19e925+_0xcbe24e(0x163);else{if(_0x19e925[_0xcbe24e(0x18c)](_0xcbe24e(0x1b0)))_0x5e0fc6=_0x19e925+_0xcbe24e(0x285);}}}if(_0x5e0fc6){const _0x763a16=await _0x400657[_0xcbe24e(0x1e7)](_0x5e0fc6);if(_0x763a16&&_0x763a16[_0xcbe24e(0x1e4)]!==undefined&&_0x763a16[_0xcbe24e(0x1e4)]!==null)return parseFloat(_0x763a16[_0xcbe24e(0x1e4)]);}}catch(_0x5c9645){}return null;}async function recordSequence(_0x5e2bd9,_0x2340d0){const _0x1ba25b=a0_0x4f222a,_0x34017c=(_0x2340d0['type']||'')['toLowerCase'](),_0x202bfe=[_0x1ba25b(0x199),_0x1ba25b(0x110),_0x1ba25b(0x261),_0x1ba25b(0x11a),_0x1ba25b(0x25b),_0x1ba25b(0x123),_0x1ba25b(0x1bc),_0x1ba25b(0x104),'fenster','contact',_0x1ba25b(0xfa),_0x1ba25b(0x24a),_0x1ba25b(0x236),_0x1ba25b(0x126),_0x1ba25b(0x286),_0x1ba25b(0x157),_0x1ba25b(0x10b)];if(!_0x202bfe[_0x1ba25b(0x12e)](_0x2943c9=>_0x34017c[_0x1ba25b(0x18c)](_0x2943c9)))return;if(!_0x2340d0['value'])return;if(sequenceTimer)clearTimeout(sequenceTimer);activeSequence['push']({'loc':_0x2340d0[_0x1ba25b(0x116)]||_0x1ba25b(0x231),'id':_0x2340d0['id'],'ts':Date['now']()}),sequenceTimer=setTimeout(async()=>{const _0xb6dcda=_0x1ba25b;if(activeSequence[_0xb6dcda(0x253)]>0x1)await saveCompletedSequence(_0x5e2bd9);activeSequence=[];},SEQUENCE_TIMEOUT_MS);}async function saveCompletedSequence(_0x2cebd0){const _0x4afbcb=a0_0x4f222a;try{const _0x1b3b3b=await _0x2cebd0['getStateAsync'](_0x4afbcb(0x1fe));let _0x35a769=[];if(_0x1b3b3b&&_0x1b3b3b[_0x4afbcb(0x1e4)])try{_0x35a769=JSON[_0x4afbcb(0x1ed)](_0x1b3b3b[_0x4afbcb(0x1e4)]);}catch(_0x686d47){}const _0x3d48cf=activeSequence[0x0]['ts'],_0x2a9ed1=activeSequence[_0x4afbcb(0x257)](_0x32d59b=>({'loc':_0x32d59b[_0x4afbcb(0x167)],'t_delta':Math[_0x4afbcb(0x20a)]((_0x32d59b['ts']-_0x3d48cf)/0x3e8)})),_0x1fbc4d={'timestamp':new Date(_0x3d48cf)[_0x4afbcb(0x15b)](),'steps':_0x2a9ed1,'duration':Math[_0x4afbcb(0x20a)]((activeSequence[activeSequence[_0x4afbcb(0x253)]-0x1]['ts']-_0x3d48cf)/0x3e8),'daytime':new Date(_0x3d48cf)[_0x4afbcb(0x13b)]()};_0x35a769[_0x4afbcb(0x27c)](_0x1fbc4d);if(_0x35a769['length']>MAX_TRAINING_SET_SIZE)_0x35a769[_0x4afbcb(0xf7)]();await _0x2cebd0[_0x4afbcb(0x164)](_0x4afbcb(0x1fe),{'val':JSON[_0x4afbcb(0x144)](_0x35a769),'ack':!![]}),runSecurityCheck(_0x2cebd0,_0x1fbc4d);}catch(_0x2829a8){_0x2cebd0[_0x4afbcb(0x1d0)][_0x4afbcb(0x220)](_0x4afbcb(0xf2)+_0x2829a8[_0x4afbcb(0x214)]);}}function a0_0x3990(){const _0x3f1183=['Kein\x20API\x20Key!','.communicate.request','normal','klima','Auto\x20Apply','dailyDigests','error','üõãÔ∏è\x20BUTLER:\x20Keine\x20neuen\x20Muster\x20gefunden.','getCalendarNames','‚úÖ\x20HEALTH\x20TRAINED.','\x20=\x20','¬∞C,\x20','checkAndInstall','\x0aGrund:\x20','Target\x20Value','Trigger\x20Analysis','info','Build\x20Topology','üêç\x20Python\x20Pong','activityLevel','success','dependencyInstallInProgress','ltmStbWindowDays','Unknown','Who\x20is\x20present?',')\x20-\x20SAFE\x20BOOT','isPresent','presenceDevices','licht','2836311TsbIed','Keine\x20Details.','analysis.energy.heatingScore','system.isPresent','Success:\x20','triggerBriefing','main','reason','SECURITY_RESULT','@google/generative-ai','communicate.request','üï∏Ô∏è\x20Topology\x20Map\x20updated.','ANALYZE_GAIT','analysis.health.trendDiagnosis','timestamp','Keine\x20Termine.','aiPersona','Aktiv\x20(','10nVsiol','light','[PYTHON]\x20','.\x20SYSTEM_MODE:\x20','analysis.training.triggerEnergy','\x20new\x20patterns.','Topology\x20Matrix','details','toFixed','üß†\x20Triggering\x20Security\x20Training...','length','LTM.triggerDailyDigest','enum','getTime','map','üï∏Ô∏è\x20Building\x20Topology\x20Matrix...','version','unshift','occupancy','threshold','stdin','Security\x20Monitor','system.presenceWho','LTM.driftAnalysis','pr√§senz','devices','ü§ñ\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','TREND_RESULT','existsSync','‚ö†Ô∏è\x20SECURITY\x20ALARM:\x20','system.config','analysis.automation.detectedPatterns','eventHistory','Temperature\x20Forecast','ack','getLtmData','Training\x20Error:\x20','namespace','livingContext','COMFORT_RESULT','notifyTelegramEnabled','Unbekannt','analysis.training.status','Alert\x20Reason','daswetter','cogni-living','replace','autoApply','setHours','exitTimer','getStateAsync','push','forEach','analysis.automation.description','genAI','scanDevices','keys','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','config','vacation','.forecast.current.temp','schalter','temperature','channel','[RECORDER]\x20Error:\x20','Briefing\x20Error:\x20','./lib/installer','PYTHON_EXE','sensorLastValues','shift','Regel\x20erkannt:\x20','Alert\x20Status','kontakt','analysisTimer','description','üõãÔ∏è\x20BUTLER:\x20Found\x20','Analysiere\x20ausgewogen.','child_process','ltmJob','PREDICT_ENERGY','systemConfig','state','window','openweathermap','Ungew√∂hnliches\x20Bewegungsmuster!\x20(Score:\x20','Err:\x20','button','licenseKey','weatherInstance','lampe','analysis.health.todayVector','useCalendar','analysis.automation.patternDetected','analysis.automation.targetId','bewegung','analysis.activitySummary','Lernphase\x20(','Adapter','object','getForeignObjectsAsync','location','analysis.security.lastScore','analysis.energy.insulationScore','analysis.triggerBriefing','presence','N/A','alertReason','boolean','command','summary','subscribeStates','System\x20Mode','Success','door','Raw\x20Log','Error\x20launching\x20Python:\x20','switch','latitude','TRAIN_COMFORT','üåÖ\x20Morning\x20Briefing:\x0a','üõãÔ∏è\x20Triggering\x20Comfort\x20Analysis\x20(Pattern\x20Mining)...','.NextHours.Location_1.Day_1.current.temp_value','close','LTM.dailyDigests','some','text','payload','Detected\x20Patterns','[RESULT]','Last\x20Check','now','common','automationProposal','analysis.analysisHistory','TOPOLOGY_RESULT','toLocaleTimeString','lastAlertState','getHours','split','path','modeResetJob','./lib/scanner','OK:\x20','pythonProcess','Topology\x20Error:\x20','setForeignStateAsync','stringify','LTM.driftAnalysis.baselineDrift','unload','1287505YjqHbb','Heating\x20Score','LTM.baselineStatus','GAIT_RESULT','generateContent','onStateChange','N/A\x20(Learning)','find','Gemini\x20Error:\x20','Event\x20History','LTM.driftAnalysis.lastCheck','exitGraceTimer','apiKey','notifyTelegramInstance','getForeignObjectAsync','logDuplicates','dimmer','getGenerativeModel','\x20->\x20','analysis.isAlert','toISOString','Skipped\x20(No\x20AI\x20or\x20Data)','analysis.training.triggerTopology','geminiModel','analysis.training.triggerHealth','targetId','4TAfZfw','LTM.driftAnalysis.driftDetails','.forecast.current.temperature','setStateAsync','KI-Modell\x20nicht\x20initialisiert','Fokus\x20auf\x20Komfort.','loc','string','bind','No\x20instance','ü§ñ\x20Autopilot:\x20Running\x20periodic\x20analysis...','analysis.training.triggerComfort','ANALYZE_HEALTH','targetValue','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','analysis.training.triggerSecurity','enum.rooms.*','rawEventLog','delObjectAsync','text.alarm','application/json','ANOMALY','service.py','LTM.trainingData.thermodynamics','Wetterdaten\x20deaktiviert.','warn','@iobroker/adapter-core','ENERGY_PREDICT_RESULT','heating','analysis.security.topologyMatrix','triggerDailyDigest','PARTY','setState','20366811ODTDHd','substring','analysis.security.currentThreshold','rule','analysis.alertReason','onReady','telegram','change_percent','baselineDrift','extendObjectAsync','includes','briefingJob','ENERGY_TRAIN_RESULT','geminiApiKey','analysis.trigger','inactivityThresholdHours','instance','155735DXfEMg','setObjectNotExistsAsync','analysis.automation.targetValue','analysis.health.trendValue','unknown','driftAnalysisTimer','motion','toString','analysis.automation.triggerAction','Fokus\x20auf\x20Familienroutinen.','Keine\x20Wetterdaten\x20verf√ºgbar.','splice','date','isExit','currentSystemMode','setupModeResetScheduler','Restoring\x20sensor\x20cache...','detected','events.history_debug_00','TRAIN_SECURITY','subscribeForeignStatesAsync','LTM','startsWith','getDate','name','Train\x20Comfort','scanForDevices','type','number','weatherunderground','üìù\x20Feedback\x20received:\x20','Activity-Level','party','minDaysForBaseline','analysis.security','temperatur','\x20Tage)','NORMAL','BUILD_TOPOLOGY','.forecast.current.state','Missing\x20data','t√ºr','city','isEmergency','systemUUID','7815528ymyVPq','filter','generic','analysis.health.gaitSpeed','analysis.health','guest','Trigger\x20Briefing','(((.+)+)+)+$','Failed:\x20','Activity\x20Summary','[LOG]','writable','analysis.energy.forecast','.Current.Temperature','üõ°Ô∏è\x20SECURITY\x20CHECK:\x20Score\x20','isGracePeriodActive','log','toLowerCase','outdoorSensorId','‚ö†Ô∏è\x20ALARM:\x20','analysisHistory','system','setupDriftAnalysisScheduler','online','analysis.lastResult','indicator','Target\x20ID','ANALYZE_SEQUENCE','debug','PRIORIT√ÑT:\x20Sicherheit.','GUEST','submitFeedback','\x0aSTB:\x20','analysis.health.lastCheck','analysis.history_debug_00','sendTo','val','pop','PRIORIT√ÑT:\x20Gesundheit/AAL.','getForeignStateAsync','getOverviewData','üß™\x20Simulating\x20Butler\x20Proposal:\x20','dismissAutomation','stateChange','analysis.automation.autoApply','parse','events.history','onUnload','.\x20EVENTS:\x20','onMessage','SIMULATION:\x20Test-Vorschlag\x20f√ºr\x20','Description','indicator.alarm','getEnums','useWeather','1001434dUYRJz','Pattern\x20Detected','Insulation\x20Score','trim','automation.triggerAction','json','values','LTM.trainingData.sequences','32GzeSLb','search','Health\x20Analysis','value','from','status','response','HEALTH_TRAIN_RESULT','rating','python3','TRAIN_ENERGY','round','isProVersion','1651608dOBKUu','cancel','enum.functions.*','slice','VACATION','Current\x20Threshold','.\x20ANWESEND:\x20','callback','message','Anomaly\x20Detected','Train\x20Energy','join','data','getMonth'];a0_0x3990=function(){return _0x3f1183;};return a0_0x3990();}function runSecurityCheck(_0x5095f2,_0x1fcae1){const _0x345611=a0_0x4f222a;if(!_0x5095f2['isProVersion'])return;sendToPython(_0x5095f2,_0x345611(0x1db),{'sequence':_0x1fcae1});}async function createDailyDigest(_0x5608f3){const _0x3a5e7e=a0_0x4f222a;if(!_0x5608f3[_0x3a5e7e(0x20b)])return;await _0x5608f3[_0x3a5e7e(0x164)](LTM_DP_STATUS,{'val':'Started...','ack':!![]});if(!_0x5608f3[_0x3a5e7e(0x15e)]||_0x5608f3['rawEventLog'][_0x3a5e7e(0x253)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x5608f3[_0x3a5e7e(0x164)](LTM_DP_STATUS,{'val':_0x3a5e7e(0x15c),'ack':!![]});return;}const _0x323d82=JSON[_0x3a5e7e(0x1ed)](JSON[_0x3a5e7e(0x144)](_0x5608f3['rawEventLog'])),_0x39b2a5=_0x323d82[_0x3a5e7e(0x253)],_0x3972bd='ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a'+JSON[_0x3a5e7e(0x144)](_0x323d82);try{const _0x289067=await _0x5608f3[_0x3a5e7e(0x15e)][_0x3a5e7e(0x14b)](_0x3972bd),_0x50b577=JSON['parse'](_0x289067['response']['text']()[_0x3a5e7e(0x277)](/```json|```/g,'')[_0x3a5e7e(0x1fa)]()),_0x27985d={'timestamp':new Date()[_0x3a5e7e(0x15b)](),'eventCount':_0x39b2a5,'summary':_0x50b577[_0x3a5e7e(0x11f)]||'Digest','activityLevel':_0x50b577[_0x3a5e7e(0x22d)]||'normal','systemMode':_0x5608f3[_0x3a5e7e(0x1a1)]};_0x5608f3[_0x3a5e7e(0x21f)]['push'](_0x27985d),await saveDailyDigests(_0x5608f3),_0x5608f3['rawEventLog']=[],await saveRawEventLog(_0x5608f3),await _0x5608f3[_0x3a5e7e(0x164)](LTM_DP_STATUS,{'val':_0x3a5e7e(0x122),'ack':!![]});if(_0x5608f3[_0x3a5e7e(0x20b)])sendToPython(_0x5608f3,_0x3a5e7e(0x16d),{'digest':_0x27985d});}catch(_0xd18b02){_0x5608f3[_0x3a5e7e(0x1d0)]['error'](_0xd18b02[_0x3a5e7e(0x214)]);}}async function runBaselineDriftAnalysis(_0x420eaf){const _0x55db6d=a0_0x4f222a;if(!_0x420eaf[_0x55db6d(0x20b)]||!_0x420eaf['geminiModel'])return;const _0x2140ec=_0x420eaf['config'][_0x55db6d(0x230)]||0xe;if(_0x420eaf['dailyDigests'][_0x55db6d(0x253)]<_0x2140ec+0x7){await _0x420eaf[_0x55db6d(0x164)](LTM_DP_DRIFT_STATUS,{'val':_0x55db6d(0x14d),'ack':!![]});return;}const _0xa0ed2a=_0x420eaf[_0x55db6d(0x21f)][_0x55db6d(0x20f)](-_0x2140ec),_0x3cced3=_0x420eaf['dailyDigests']['slice'](0x0,_0x420eaf[_0x55db6d(0x21f)][_0x55db6d(0x253)]-_0x2140ec),_0x4a8829=_0x55db6d(0x16f)+JSON['stringify'](_0x3cced3)+_0x55db6d(0x1e0)+JSON[_0x55db6d(0x144)](_0xa0ed2a);try{const _0x24e9d8=await _0x420eaf[_0x55db6d(0x15e)]['generateContent'](_0x4a8829),_0x3296d0=JSON[_0x55db6d(0x1ed)](_0x24e9d8[_0x55db6d(0x205)][_0x55db6d(0x12f)]()[_0x55db6d(0x277)](/```json|```/g,'')['trim']());_0x3296d0[_0x55db6d(0x18a)]&&(await _0x420eaf[_0x55db6d(0x164)](LTM_DP_DRIFT_STATUS,{'val':_0x3296d0['baselineDrift'],'ack':!![]}),await _0x420eaf[_0x55db6d(0x164)](LTM_DP_DRIFT_DETAILS,{'val':_0x3296d0['driftDetails'],'ack':!![]}),await _0x420eaf[_0x55db6d(0x164)](LTM_DP_DRIFT_LAST_CHECK,{'val':Date[_0x55db6d(0x134)](),'ack':!![]}));}catch(_0x42038b){}}async function sendMorningBriefing(_0x374b34){const _0x1dc6d5=a0_0x4f222a;if(!_0x374b34['geminiModel'])return;try{const _0x59e7c4=_0x1dc6d5(0x282),_0x4a50c5=await _0x374b34[_0x1dc6d5(0x15e)][_0x1dc6d5(0x14b)](_0x59e7c4),_0x3f94f6=_0x4a50c5[_0x1dc6d5(0x205)][_0x1dc6d5(0x12f)]();sendNotification(_0x374b34,_0x1dc6d5(0x129)+_0x3f94f6);}catch(_0x1d9d86){_0x374b34[_0x1dc6d5(0x1d0)][_0x1dc6d5(0x220)](_0x1dc6d5(0xf3)+_0x1d9d86[_0x1dc6d5(0x214)]);}}function stopPythonService(_0x1b77a4){const _0x133b1f=a0_0x4f222a;if(_0x1b77a4[_0x133b1f(0x141)]){try{_0x1b77a4[_0x133b1f(0x141)]['kill']();}catch(_0x4ced95){}_0x1b77a4[_0x133b1f(0x141)]=null;}}function sendToPython(_0x279edd,_0x353788,_0x2b125b={}){const _0x3af336=a0_0x4f222a;if(!_0x279edd[_0x3af336(0x141)]||!_0x279edd['pythonProcess']['stdin'][_0x3af336(0x1cb)])return;const _0x69d45d=JSON[_0x3af336(0x144)]({'command':_0x353788,..._0x2b125b});try{_0x279edd[_0x3af336(0x141)][_0x3af336(0x25d)]['write'](_0x69d45d+'\x0a');}catch(_0xa18f66){}}function runPythonHealthCheck(_0x510ade){const _0x439970=a0_0x4f222a;if(!_0x510ade[_0x439970(0x21f)]||_0x510ade[_0x439970(0x21f)]['length']<0x2)return;const _0x3e9201=_0x510ade[_0x439970(0x21f)][_0x439970(0x257)](_0x38b499=>{const _0x53c44f=_0x439970,_0x18cb72=(_0x38b499['activityLevel']||'')[_0x53c44f(0x1d1)]();return ACTIVITY_LEVEL_MAP[_0x18cb72]||0x32;});sendToPython(_0x510ade,'ANALYZE_TREND',{'values':_0x3e9201,'tag':_0x439970(0x1b2)});}function handlePythonResult(_0xcfc39c,_0x44f8f2){const _0x1f7038=a0_0x4f222a;if(_0x44f8f2[_0x1f7038(0x1ae)]==='PONG')_0xcfc39c['log'][_0x1f7038(0x1dc)](_0x1f7038(0x22c));else{if(_0x44f8f2[_0x1f7038(0x1ae)]===_0x1f7038(0x23f)){const {anomaly_score:_0x43ad04,is_anomaly:_0x129ab6,threshold:_0x52380e,explanation:_0x312644}=_0x44f8f2[_0x1f7038(0x130)];_0xcfc39c[_0x1f7038(0x1d0)][_0x1f7038(0x22a)](_0x1f7038(0x1ce)+_0x43ad04[_0x1f7038(0x251)](0x5)+_0x1f7038(0x159)+(_0x129ab6?_0x1f7038(0x176):'OK')),_0xcfc39c[_0x1f7038(0x164)](_0x1f7038(0x117),{'val':_0x43ad04,'ack':!![]}),_0xcfc39c[_0x1f7038(0x164)]('analysis.security.lastCheck',{'val':new Date()[_0x1f7038(0x15b)](),'ack':!![]});if(_0x52380e)_0xcfc39c['setStateAsync'](_0x1f7038(0x184),{'val':_0x52380e,'ack':!![]});if(_0x129ab6){let _0x457e74=_0x1f7038(0x106)+_0x43ad04[_0x1f7038(0x251)](0x4)+')';if(_0x312644&&_0x312644!=='Unknown')_0x457e74+=_0x1f7038(0x227)+_0x312644;_0xcfc39c['setStateAsync']('analysis.isAlert',{'val':!![],'ack':!![]}),_0xcfc39c['setStateAsync']('analysis.alertReason',{'val':_0x457e74,'ack':!![]}),sendNotification(_0xcfc39c,_0x1f7038(0x266)+_0x457e74,![],!![]);}}else{if(_0x44f8f2[_0x1f7038(0x1ae)]==='TRAINING_COMPLETE'){const _0x58a94b=_0x44f8f2[_0x1f7038(0x130)][_0x1f7038(0x250)]||'',_0x5f0a6e=_0x44f8f2[_0x1f7038(0x130)][_0x1f7038(0x25c)],_0x2d64ea=_0x44f8f2[_0x1f7038(0x130)][_0x1f7038(0x22e)]?_0x1f7038(0x23b)+new Date()[_0x1f7038(0x139)]()+'\x20('+_0x58a94b+')':_0x1f7038(0x1c8)+_0x44f8f2[_0x1f7038(0x130)][_0x1f7038(0x23e)];_0xcfc39c['setStateAsync'](_0x1f7038(0x273),{'val':_0x2d64ea,'ack':!![]});if(_0x44f8f2['payload'][_0x1f7038(0x22e)]&&_0x5f0a6e)_0xcfc39c[_0x1f7038(0x164)](_0x1f7038(0x184),{'val':_0x5f0a6e,'ack':!![]});}else{if(_0x44f8f2[_0x1f7038(0x1ae)]===_0x1f7038(0x270)){const {patterns:_0x3183c8}=_0x44f8f2['payload'];if(_0x3183c8&&_0x3183c8[_0x1f7038(0x253)]>0x0){_0xcfc39c[_0x1f7038(0x1d0)]['info'](_0x1f7038(0xfd)+_0x3183c8['length']+_0x1f7038(0x24e)),_0xcfc39c[_0x1f7038(0x164)](_0x1f7038(0x268),{'val':JSON[_0x1f7038(0x144)](_0x3183c8),'ack':!![]});const _0x44dd17=_0x3183c8[0x0],_0x2f7433=_0x1f7038(0xf8)+_0x44dd17[_0x1f7038(0x185)]+'\x20('+(_0x44dd17['confidence']*0x64)['toFixed'](0x0)+'%)';_0xcfc39c[_0x1f7038(0x164)](_0x1f7038(0x10e),{'val':!![],'ack':!![]}),_0xcfc39c[_0x1f7038(0x164)](_0x1f7038(0x27e),{'val':_0x2f7433,'ack':!![]});}else _0xcfc39c[_0x1f7038(0x1d0)][_0x1f7038(0x22a)](_0x1f7038(0x221)),_0xcfc39c[_0x1f7038(0x164)](_0x1f7038(0x10e),{'val':![],'ack':!![]}),_0xcfc39c[_0x1f7038(0x164)](_0x1f7038(0x268),{'val':'[]','ack':!![]});}else{if(_0x44f8f2['type']===_0x1f7038(0x18e)){if(_0x44f8f2[_0x1f7038(0x130)]['success'])try{const _0x500d40=JSON[_0x1f7038(0x1ed)](_0x44f8f2[_0x1f7038(0x130)][_0x1f7038(0x250)]);if(_0x500d40['insulation'])_0xcfc39c['setStateAsync']('analysis.energy.insulationScore',{'val':JSON['stringify'](_0x500d40['insulation']),'ack':!![]});if(_0x500d40[_0x1f7038(0x17d)])_0xcfc39c['setStateAsync'](_0x1f7038(0x239),{'val':JSON[_0x1f7038(0x144)](_0x500d40[_0x1f7038(0x17d)]),'ack':!![]});}catch(_0x13e5cf){}}else{if(_0x44f8f2[_0x1f7038(0x1ae)]===_0x1f7038(0x206)){if(_0x44f8f2['payload']['success'])_0xcfc39c['log'][_0x1f7038(0x22a)](_0x1f7038(0x223));}else{if(_0x44f8f2[_0x1f7038(0x1ae)]==='HEALTH_RESULT')_0xcfc39c[_0x1f7038(0x164)](_0x1f7038(0x1e1),{'val':new Date()[_0x1f7038(0x15b)](),'ack':!![]}),_0xcfc39c[_0x1f7038(0x164)]('analysis.health.isAnomaly',{'val':_0x44f8f2[_0x1f7038(0x130)]['is_anomaly'],'ack':!![]});else{if(_0x44f8f2[_0x1f7038(0x1ae)]===_0x1f7038(0x264))_0xcfc39c[_0x1f7038(0x164)]('analysis.health.trendDiagnosis',{'val':_0x44f8f2[_0x1f7038(0x130)]['diagnosis'],'ack':!![]}),_0xcfc39c[_0x1f7038(0x164)](_0x1f7038(0x196),{'val':_0x44f8f2[_0x1f7038(0x130)][_0x1f7038(0x189)],'ack':!![]});else{if(_0x44f8f2['type']===_0x1f7038(0x14a)){const {speed_trend:_0x106db5}=_0x44f8f2[_0x1f7038(0x130)];if(_0x106db5!==undefined)_0xcfc39c[_0x1f7038(0x164)](_0x1f7038(0x1c3),{'val':_0x106db5,'ack':!![]});}else{if(_0x44f8f2[_0x1f7038(0x1ae)]===_0x1f7038(0x17c)){const {forecast:_0x2a353c}=_0x44f8f2['payload'];if(_0x2a353c)_0xcfc39c[_0x1f7038(0x164)]('analysis.energy.forecast',{'val':JSON['stringify'](_0x2a353c),'ack':!![]});}else{if(_0x44f8f2['type']===_0x1f7038(0x138)){const {data:_0x1cadba}=_0x44f8f2[_0x1f7038(0x130)];_0x1cadba&&(_0xcfc39c[_0x1f7038(0x1d0)][_0x1f7038(0x22a)](_0x1f7038(0x242)),_0xcfc39c[_0x1f7038(0x164)]('analysis.security.topologyMatrix',{'val':JSON[_0x1f7038(0x144)](_0x1cadba),'ack':!![]}));}}}}}}}}}}}}function startPythonService(_0x4d3837){const _0x375c42=a0_0x4f222a;let _0x11b159=_0x375c42(0x208);if(fs[_0x375c42(0x265)](installer['PYTHON_EXE']))_0x11b159=installer[_0x375c42(0xf5)];try{const _0x35e2e6=path['join'](__dirname,'python_service',_0x375c42(0x177));_0x4d3837[_0x375c42(0x141)]=spawn(_0x11b159,[_0x35e2e6]),_0x4d3837['pythonProcess']['stdout']['on'](_0x375c42(0x218),_0x9868c=>{const _0x324adf=_0x375c42,_0x72ea3f=_0x9868c[_0x324adf(0x19a)]()[_0x324adf(0x13c)]('\x0a');_0x72ea3f[_0x324adf(0x27d)](_0x35b70c=>{const _0x2e6246=_0x324adf,_0x2e6dba=_0x35b70c[_0x2e6246(0x1fa)]();if(!_0x2e6dba)return;if(_0x2e6dba['startsWith'](_0x2e6246(0x1ca)))_0x4d3837['log']['debug'](_0x2e6246(0x24b)+_0x2e6dba['substring'](0x5)[_0x2e6246(0x1fa)]());else{if(_0x2e6dba[_0x2e6246(0x1a9)](_0x2e6246(0x132)))try{const _0x5ed5f7=JSON['parse'](_0x2e6dba[_0x2e6246(0x183)](0x8)[_0x2e6246(0x1fa)]());handlePythonResult(_0x4d3837,_0x5ed5f7);}catch(_0x8b4a12){}}});}),_0x4d3837['pythonProcess']['on'](_0x375c42(0x12c),_0xca6e53=>{const _0x5ce1a2=_0x375c42;_0x4d3837[_0x5ce1a2(0x141)]=null;});}catch(_0x5a727a){_0x4d3837[_0x375c42(0x1d0)][_0x375c42(0x220)](_0x375c42(0x125)+_0x5a727a['message']);}}async function runAutopilot(_0x4d8adc){const _0x58dc14=a0_0x4f222a;_0x4d8adc[_0x58dc14(0x1d0)]['debug'](_0x58dc14(0x16b)),await runGeminiAnalysis(_0x4d8adc),updateHealthVector(_0x4d8adc),triggerGaitAnalysis(_0x4d8adc),triggerEnergyPrediction(_0x4d8adc);}async function triggerGaitAnalysis(_0x1a47c3){const _0x3c1aa1=a0_0x4f222a;if(!_0x1a47c3['isProVersion'])return;try{const _0x30d0cd=await _0x1a47c3[_0x3c1aa1(0x27b)]('LTM.trainingData.sequences');_0x30d0cd&&_0x30d0cd[_0x3c1aa1(0x1e4)]&&sendToPython(_0x1a47c3,_0x3c1aa1(0x243),{'sequences':JSON[_0x3c1aa1(0x1ed)](_0x30d0cd['val'])});}catch(_0xccc28b){}}async function triggerEnergyPrediction(_0x448ea3){const _0x5be9ae=a0_0x4f222a;if(!_0x448ea3[_0x5be9ae(0x20b)])return;try{const _0x4c0e2b=await getOutsideTemperatureNumeric(_0x448ea3);if(_0x4c0e2b===null)return;const _0x23e822={},_0x165bc2=_0x448ea3['config']['devices']||[];for(const _0x45f246 of _0x165bc2){if(_0x45f246[_0x5be9ae(0x1ae)]===_0x5be9ae(0xf0)&&_0x45f246[_0x5be9ae(0x116)]){const _0x179435=_0x448ea3[_0x5be9ae(0xf6)][_0x45f246['id']];if(_0x179435!==undefined)_0x23e822[_0x45f246[_0x5be9ae(0x116)]]=_0x179435;}}Object[_0x5be9ae(0x281)](_0x23e822)[_0x5be9ae(0x253)]>0x0&&sendToPython(_0x448ea3,_0x5be9ae(0x101),{'current_temps':_0x23e822,'t_out':_0x4c0e2b});}catch(_0xf8462c){}}function updateHealthVector(_0x4d6a16){const _0x132137=a0_0x4f222a;if(!_0x4d6a16[_0x132137(0x172)]||_0x4d6a16[_0x132137(0x172)]['length']===0x0)return;const _0x4431b6=new Array(0x60)['fill'](0x0),_0x278690=new Date()[_0x132137(0x279)](0x0,0x0,0x0,0x0);_0x4d6a16[_0x132137(0x172)]['forEach'](_0x5cf7a1=>{const _0x2781ce=_0x132137,_0xc69f8d=new Date(_0x5cf7a1[_0x2781ce(0x245)]);if(_0xc69f8d[_0x2781ce(0x256)]()>=_0x278690){const _0x4a4526=_0xc69f8d[_0x2781ce(0x13b)](),_0x12ad1e=_0xc69f8d['getMinutes'](),_0x396721=_0x4a4526*0x4+Math['floor'](_0x12ad1e/0xf);if(_0x396721>=0x0&&_0x396721<0x60)_0x4431b6[_0x396721]++;}}),_0x4d6a16['setStateAsync']('analysis.health.todayVector',{'val':JSON[_0x132137(0x144)](_0x4431b6),'ack':!![]});}async function getWeatherContext(_0x2cae5c){const _0x25ed9e=a0_0x4f222a;if(!_0x2cae5c[_0x25ed9e(0x283)][_0x25ed9e(0x1f6)]||!_0x2cae5c[_0x25ed9e(0x283)][_0x25ed9e(0x10a)])return _0x25ed9e(0x179);try{const _0x284524=_0x2cae5c[_0x25ed9e(0x283)][_0x25ed9e(0x10a)];let _0x89a7d2=await _0x2cae5c[_0x25ed9e(0x1e7)](_0x284524+_0x25ed9e(0x1cd));if(!_0x89a7d2)_0x89a7d2=await _0x2cae5c[_0x25ed9e(0x1e7)](_0x284524+_0x25ed9e(0x163));let _0x31cc84=await _0x2cae5c[_0x25ed9e(0x1e7)](_0x284524+'.Current.WeatherText');if(!_0x31cc84)_0x31cc84=await _0x2cae5c[_0x25ed9e(0x1e7)](_0x284524+_0x25ed9e(0x1ba));if(_0x89a7d2&&_0x31cc84)return _0x89a7d2[_0x25ed9e(0x1e4)]+_0x25ed9e(0x225)+_0x31cc84[_0x25ed9e(0x1e4)];}catch(_0x2afb9b){}return _0x25ed9e(0x19d);}async function getCalendarContext(_0x2c7854){const _0x20b407=a0_0x4f222a;if(!_0x2c7854[_0x20b407(0x283)][_0x20b407(0x10d)]||!_0x2c7854[_0x20b407(0x283)]['calendarInstance'])return'Kalender\x20deaktiviert.';return _0x20b407(0x246);}async function getCalendarNames(_0x3fa003,_0x24467a){return[];}async function saveFeedback(_0xe0c55e,_0x50a66d){const _0x41bb68=a0_0x4f222a;_0xe0c55e[_0x41bb68(0x1d0)][_0x41bb68(0x22a)](_0x41bb68(0x1b1)+_0x50a66d[_0x41bb68(0x207)]);}async function runGeminiAnalysis(_0x3c85ab,_0x2c4e0a=''){const _0xbc7d5b=a0_0x4f222a;if(!_0x3c85ab[_0xbc7d5b(0x15e)])return;if(_0x3c85ab[_0xbc7d5b(0x269)][_0xbc7d5b(0x253)]===0x0)return;const _0x59fbd3=_0x3c85ab[_0xbc7d5b(0x269)][_0xbc7d5b(0x20f)](0x0,0xf),_0x2a0310=await getWeatherContext(_0x3c85ab),_0x53faf7=_0x3c85ab[_0xbc7d5b(0x1a1)],_0x45a726=PERSONA_MAPPING[_0x3c85ab[_0xbc7d5b(0x283)][_0xbc7d5b(0x247)]||_0xbc7d5b(0x1c2)],_0x3d2ee7=_0x3c85ab[_0xbc7d5b(0x283)][_0xbc7d5b(0x26f)]||_0xbc7d5b(0x238);let _0x583110=_0xbc7d5b(0x272);try{const _0x2ee1df=await _0x3c85ab[_0xbc7d5b(0x27b)](_0xbc7d5b(0x25f));if(_0x2ee1df&&_0x2ee1df[_0xbc7d5b(0x1e4)])_0x583110=_0x2ee1df[_0xbc7d5b(0x1e4)];}catch(_0x4b55a8){}let _0xc0ed72=![];try{const _0x2cae94=await _0x3c85ab[_0xbc7d5b(0x27b)](_0xbc7d5b(0x1ec));if(_0x2cae94&&_0x2cae94['val'])_0xc0ed72=!![];}catch(_0x1b1aa2){}const _0x2ee9dc='ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20'+_0x45a726+'.\x20KONTEXT:\x20'+_0x3d2ee7+_0xbc7d5b(0x24c)+_0x53faf7+'.\x20WETTER:\x20'+_0x2a0310+_0xbc7d5b(0x212)+_0x583110+_0xbc7d5b(0x1f0)+JSON[_0xbc7d5b(0x144)](_0x59fbd3)+'.\x20EMERGENCY:\x20'+_0x2c4e0a+'.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}';try{const _0x275d5c=await _0x3c85ab[_0xbc7d5b(0x15e)][_0xbc7d5b(0x14b)](_0x2ee9dc),_0x48c9c6=JSON[_0xbc7d5b(0x1ed)](_0x275d5c[_0xbc7d5b(0x205)][_0xbc7d5b(0x12f)]()[_0xbc7d5b(0x277)](/```json|```/g,'')['trim']());await _0x3c85ab['setStateAsync'](_0xbc7d5b(0x1d8),{'val':JSON[_0xbc7d5b(0x144)](_0x48c9c6),'ack':!![]});if(_0x48c9c6[_0xbc7d5b(0x11f)])await _0x3c85ab[_0xbc7d5b(0x164)](_0xbc7d5b(0x111),{'val':_0x48c9c6[_0xbc7d5b(0x11f)],'ack':!![]});const _0x48cd70={'timestamp':Date[_0xbc7d5b(0x134)](),'id':Date[_0xbc7d5b(0x134)]()['toString'](),'analysis':{'activity':{'summary':_0x48c9c6[_0xbc7d5b(0x11f)],'isAlert':_0x48c9c6['isAlert'],'alertReason':_0x48c9c6['alertReason']},'comfort':{'automationProposal':_0x48c9c6['automationProposal']}}};await updateAnalysisHistory(_0x3c85ab,_0x48cd70);const _0xf4b346=_0x48c9c6['isAlert']||![];_0xf4b346!==_0x3c85ab[_0xbc7d5b(0x13a)]&&(await _0x3c85ab[_0xbc7d5b(0x164)](_0xbc7d5b(0x15a),{'val':_0xf4b346,'ack':!![]}),_0x3c85ab[_0xbc7d5b(0x13a)]=_0xf4b346,_0xf4b346&&(await _0x3c85ab[_0xbc7d5b(0x164)](_0xbc7d5b(0x186),{'val':_0x48c9c6[_0xbc7d5b(0x11c)],'ack':!![]}),sendNotification(_0x3c85ab,_0xbc7d5b(0x1d3)+_0x48c9c6['alertReason'],![],_0x48c9c6[_0xbc7d5b(0x1be)])));if(_0x48c9c6['automationProposal']&&_0x48c9c6[_0xbc7d5b(0x136)]['detected']){await _0x3c85ab[_0xbc7d5b(0x164)](_0xbc7d5b(0x10e),{'val':!![],'ack':!![]}),await _0x3c85ab[_0xbc7d5b(0x164)](_0xbc7d5b(0x27e),{'val':_0x48c9c6['automationProposal']['description'],'ack':!![]}),await _0x3c85ab['setStateAsync']('analysis.automation.targetId',{'val':_0x48c9c6[_0xbc7d5b(0x136)][_0xbc7d5b(0x160)],'ack':!![]}),await _0x3c85ab[_0xbc7d5b(0x164)](_0xbc7d5b(0x195),{'val':JSON[_0xbc7d5b(0x144)](_0x48c9c6[_0xbc7d5b(0x136)][_0xbc7d5b(0x16e)]),'ack':!![]});if(_0xc0ed72)executeAutomationAction(_0x3c85ab);}}catch(_0x27f49e){_0x3c85ab[_0xbc7d5b(0x1d0)][_0xbc7d5b(0x220)](_0xbc7d5b(0x14f)+_0x27f49e['message']);}}async function startSystem(_0x6af343){const _0x50d0d3=a0_0x4f222a;_0x6af343[_0x50d0d3(0x1d0)][_0x50d0d3(0x22a)]('üöÄ\x20Starting\x20NUUKANNI\x20Logic\x20(v0.12.10)...'),await initZombies(_0x6af343);try{_0x6af343[_0x50d0d3(0x20b)]=await checkLicense(_0x6af343[_0x50d0d3(0x283)][_0x50d0d3(0x109)]);}catch(_0xf340eb){}if(!_0x6af343[_0x50d0d3(0x283)][_0x50d0d3(0x191)]||_0x6af343[_0x50d0d3(0x283)][_0x50d0d3(0x191)]<0.1)_0x6af343[_0x50d0d3(0x283)][_0x50d0d3(0x191)]=0xc;await initHistory(_0x6af343),await initSystemConfig(_0x6af343);if(_0x6af343[_0x50d0d3(0x283)][_0x50d0d3(0x18f)])try{_0x6af343[_0x50d0d3(0x27f)]=new GoogleGenerativeAI(_0x6af343[_0x50d0d3(0x283)][_0x50d0d3(0x18f)]),_0x6af343[_0x50d0d3(0x15e)]=_0x6af343[_0x50d0d3(0x27f)][_0x50d0d3(0x158)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x50d0d3(0x175)}}),_0x6af343[_0x50d0d3(0x1d0)][_0x50d0d3(0x22a)]('Gemini\x20AI\x20initialized.');}catch(_0x5b1bbf){_0x6af343[_0x50d0d3(0x1d0)][_0x50d0d3(0x220)]('Gemini\x20Init\x20Error:\x20'+_0x5b1bbf[_0x50d0d3(0x214)]);}await createAllObjects(_0x6af343),await loadSystemMode(_0x6af343),await loadRawEventLog(_0x6af343),await loadDailyDigests(_0x6af343),_0x6af343['subscribeStates']('analysis.trigger'),_0x6af343[_0x50d0d3(0x120)](LTM_DP_TRIGGER_DIGEST),_0x6af343[_0x50d0d3(0x120)]('system.mode'),_0x6af343['subscribeStates'](_0x50d0d3(0x119)),_0x6af343['subscribeStates'](_0x50d0d3(0x19b)),_0x6af343[_0x50d0d3(0x120)](_0x50d0d3(0x1ec)),_0x6af343[_0x50d0d3(0x120)](_0x50d0d3(0x170)),_0x6af343[_0x50d0d3(0x120)]('analysis.training.triggerHealth'),_0x6af343[_0x50d0d3(0x120)]('analysis.training.triggerEnergy'),_0x6af343[_0x50d0d3(0x120)](_0x50d0d3(0x16c)),_0x6af343[_0x50d0d3(0x120)]('analysis.training.triggerTopology'),await initSensorSubscriptions(_0x6af343),await initPresenceSubscriptions(_0x6af343),await setupTelegramListener(_0x6af343),setTimeout(()=>checkWifiPresence(_0x6af343),0x1388);if(_0x6af343[_0x50d0d3(0xfb)])clearInterval(_0x6af343[_0x50d0d3(0xfb)]);const _0x44bc86=_0x6af343['config']['analysisInterval']||0xf;_0x44bc86>0x0&&(_0x6af343[_0x50d0d3(0xfb)]=setInterval(()=>{runAutopilot(_0x6af343);},_0x44bc86*0x3c*0x3e8)),schedulers['setupLtmScheduler'](_0x6af343,()=>createDailyDigest(_0x6af343)),schedulers[_0x50d0d3(0x1a2)](_0x6af343),schedulers[_0x50d0d3(0x1d6)](_0x6af343,()=>runBaselineDriftAnalysis(_0x6af343)),schedulers['setupBriefingScheduler'](_0x6af343,()=>sendMorningBriefing(_0x6af343)),startPythonService(_0x6af343),setTimeout(()=>{_0x6af343['pythonProcess']&&(runPythonHealthCheck(_0x6af343),triggerGaitAnalysis(_0x6af343),triggerEnergyPrediction(_0x6af343)),updateHealthVector(_0x6af343);},0x1388);}class CogniLiving extends utils[a0_0x4f222a(0x113)]{constructor(_0x4eb7f7){const _0x5ec89b=a0_0x4f222a;super({..._0x4eb7f7,'name':_0x5ec89b(0x276)}),this['eventHistory']=[],this['analysisHistory']=[],this['rawEventLog']=[],this[_0x5ec89b(0x21f)]=[],this[_0x5ec89b(0xf6)]={},this[_0x5ec89b(0x102)]={'latitude':0x0,'longitude':0x0,'city':''},this['isPresent']=!![],this[_0x5ec89b(0x27a)]=null,this[_0x5ec89b(0x152)]=null,this[_0x5ec89b(0x1cf)]=![],this[_0x5ec89b(0x27f)]=null,this['geminiModel']=null,this[_0x5ec89b(0x1a1)]=SYSTEM_MODES[_0x5ec89b(0x1b8)],this[_0x5ec89b(0x20b)]=![],this[_0x5ec89b(0x13a)]=![],this[_0x5ec89b(0x1bf)]=_0x5ec89b(0x197),this[_0x5ec89b(0xfb)]=null,this['ltmJob']=null,this['modeResetJob']=null,this[_0x5ec89b(0x198)]=null,this[_0x5ec89b(0x18d)]=null,this[_0x5ec89b(0x141)]=null,this[_0x5ec89b(0x22f)]=![],this['on']('ready',this['onReady']['bind'](this)),this['on'](_0x5ec89b(0x1eb),this[_0x5ec89b(0x14c)][_0x5ec89b(0x169)](this)),this['on'](_0x5ec89b(0x146),this[_0x5ec89b(0x1ef)]['bind'](this)),this['on']('message',this[_0x5ec89b(0x1f1)][_0x5ec89b(0x169)](this));}async[a0_0x4f222a(0x187)](){const _0x1a2944=a0_0x4f222a;this[_0x1a2944(0x1d0)][_0x1a2944(0x22a)]('cogni-living\x20adapter\x20starting\x20(v'+this[_0x1a2944(0x259)]+_0x1a2944(0x233));if(!installer[_0x1a2944(0x226)](this,()=>startSystem(this)))return;}[a0_0x4f222a(0x1ef)](_0x40e09f){const _0x5462b4=a0_0x4f222a;if(this[_0x5462b4(0xfb)])clearInterval(this[_0x5462b4(0xfb)]);if(this[_0x5462b4(0x198)])clearInterval(this[_0x5462b4(0x198)]);if(this[_0x5462b4(0x100)])this[_0x5462b4(0x100)][_0x5462b4(0x20d)]();if(this[_0x5462b4(0x13e)])this[_0x5462b4(0x13e)][_0x5462b4(0x20d)]();if(this['briefingJob'])this[_0x5462b4(0x18d)][_0x5462b4(0x20d)]();if(this[_0x5462b4(0x27a)])clearTimeout(this[_0x5462b4(0x27a)]);if(this['exitGraceTimer'])clearTimeout(this[_0x5462b4(0x152)]);stopPythonService(this),_0x40e09f();}async[a0_0x4f222a(0x14c)](_0xbbc23f,_0x567644){const _0x40b061=a0_0x4f222a;if(!_0x567644||this[_0x40b061(0x22f)])return;if(_0xbbc23f['includes'](_0x40b061(0x188))&&_0xbbc23f['endsWith'](_0x40b061(0x241))&&_0x567644[_0x40b061(0x1e4)]){await handleTelegramResponse(this,_0x567644['val']);return;}if(_0xbbc23f===this[_0x40b061(0x26e)]+'.'+SYSTEM_DP_MODE){if(_0x567644[_0x40b061(0x1e4)]&&Object[_0x40b061(0x1fd)](SYSTEM_MODES)['includes'](_0x567644[_0x40b061(0x1e4)])){this[_0x40b061(0x1a1)]=_0x567644[_0x40b061(0x1e4)];if(_0x567644[_0x40b061(0x1e4)]===SYSTEM_MODES[_0x40b061(0x210)])await setPresence(this,![]);else await setPresence(this,!![]);}if(!_0x567644['ack'])this['setState'](_0xbbc23f,{'val':this[_0x40b061(0x1a1)],'ack':!![]});return;}if(!_0x567644[_0x40b061(0x26b)]){_0xbbc23f[_0x40b061(0x18c)](_0x40b061(0x190))&&_0x567644['val']&&(this[_0x40b061(0x181)](_0xbbc23f,{'val':![],'ack':!![]}),runGeminiAnalysis(this));if(_0xbbc23f[_0x40b061(0x18c)](_0x40b061(0x17f))&&_0x567644[_0x40b061(0x1e4)]){this[_0x40b061(0x181)](_0xbbc23f,{'val':![],'ack':!![]});if(this[_0x40b061(0x20b)])createDailyDigest(this);}_0xbbc23f[_0x40b061(0x18c)](_0x40b061(0x23c))&&_0x567644[_0x40b061(0x1e4)]&&(this[_0x40b061(0x181)](_0xbbc23f,{'val':![],'ack':!![]}),sendMorningBriefing(this));_0xbbc23f['includes'](_0x40b061(0x1fb))&&_0x567644[_0x40b061(0x1e4)]&&(this[_0x40b061(0x181)](_0xbbc23f,{'val':![],'ack':!![]}),executeAutomationAction(this));if(_0xbbc23f['includes'](_0x40b061(0x170))&&_0x567644[_0x40b061(0x1e4)]){this['setState'](_0xbbc23f,{'val':![],'ack':!![]});if(this[_0x40b061(0x20b)])try{const _0x6c42e5=await this[_0x40b061(0x27b)](_0x40b061(0x1fe));if(_0x6c42e5&&_0x6c42e5[_0x40b061(0x1e4)]){const _0x35cd0b=JSON[_0x40b061(0x1ed)](_0x6c42e5[_0x40b061(0x1e4)]);this[_0x40b061(0x1d0)]['info'](_0x40b061(0x252)),this['setStateAsync']('analysis.training.status',{'val':'Sec-Training\x20started...','ack':!![]}),sendToPython(this,_0x40b061(0x1a6),{'sequences':_0x35cd0b});}}catch(_0x79eafd){this[_0x40b061(0x1d0)]['error'](_0x40b061(0x26d)+_0x79eafd[_0x40b061(0x214)]);}}if(_0xbbc23f['includes']('analysis.training.triggerHealth')&&_0x567644[_0x40b061(0x1e4)]){this[_0x40b061(0x181)](_0xbbc23f,{'val':![],'ack':!![]});if(this[_0x40b061(0x20b)])try{const _0x13f0b2=await this['getStateAsync'](LTM_DP_DAILY_DIGESTS);if(_0x13f0b2&&_0x13f0b2[_0x40b061(0x1e4)])sendToPython(this,'TRAIN_HEALTH',{'digests':JSON[_0x40b061(0x1ed)](_0x13f0b2[_0x40b061(0x1e4)])});}catch(_0xf2cfa){}}if(_0xbbc23f[_0x40b061(0x18c)](_0x40b061(0x24d))&&_0x567644[_0x40b061(0x1e4)]){this[_0x40b061(0x181)](_0xbbc23f,{'val':![],'ack':!![]});if(this[_0x40b061(0x20b)])try{const _0x302325=await this['getStateAsync'](_0x40b061(0x178));if(_0x302325&&_0x302325[_0x40b061(0x1e4)])sendToPython(this,_0x40b061(0x209),{'points':JSON[_0x40b061(0x1ed)](_0x302325[_0x40b061(0x1e4)])});}catch(_0x1a8cfc){}}if(_0xbbc23f[_0x40b061(0x18c)]('analysis.training.triggerComfort')&&_0x567644['val']){this[_0x40b061(0x181)](_0xbbc23f,{'val':![],'ack':!![]});if(this[_0x40b061(0x20b)])try{const _0x57d883=await this[_0x40b061(0x27b)](LTM_DP_RAW_LOG);_0x57d883&&_0x57d883[_0x40b061(0x1e4)]&&(this[_0x40b061(0x1d0)][_0x40b061(0x22a)](_0x40b061(0x12a)),sendToPython(this,_0x40b061(0x128),{'events':JSON[_0x40b061(0x1ed)](_0x57d883[_0x40b061(0x1e4)])}));}catch(_0x5ae7f9){}}if(_0xbbc23f[_0x40b061(0x18c)](_0x40b061(0x15d))&&_0x567644[_0x40b061(0x1e4)]){this['setState'](_0xbbc23f,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x2b2277=await this[_0x40b061(0x27b)](_0x40b061(0x1fe));if(_0x2b2277&&_0x2b2277[_0x40b061(0x1e4)]){const _0x53a0be=JSON[_0x40b061(0x1ed)](_0x2b2277[_0x40b061(0x1e4)]);this[_0x40b061(0x1d0)][_0x40b061(0x22a)](_0x40b061(0x258)),sendToPython(this,_0x40b061(0x1b9),{'sequences':_0x53a0be});}}catch(_0x1f098b){this['log'][_0x40b061(0x220)](_0x40b061(0x142)+_0x1f098b['message']);}}return;}if(this[_0x40b061(0x283)][_0x40b061(0x235)]&&this[_0x40b061(0x283)][_0x40b061(0x235)][_0x40b061(0x18c)](_0xbbc23f)){await checkWifiPresence(this);return;}const _0x6eff85=(this[_0x40b061(0x283)][_0x40b061(0x262)]||[])[_0x40b061(0x14e)](_0x2a3caa=>_0x2a3caa['id']===_0xbbc23f);if(_0x6eff85)processSensorEvent(this,_0xbbc23f,_0x567644,_0x6eff85);}async[a0_0x4f222a(0x1f1)](_0x542e6a){const _0x2dc346=a0_0x4f222a;if(typeof _0x542e6a===_0x2dc346(0x114)&&_0x542e6a[_0x2dc346(0x214)]){if(_0x542e6a['command']==='testApiKey'){const _0x4fa3dd=_0x542e6a[_0x2dc346(0x214)][_0x2dc346(0x153)]||this[_0x2dc346(0x283)][_0x2dc346(0x18f)];if(!_0x4fa3dd)return this[_0x2dc346(0x1e3)](_0x542e6a[_0x2dc346(0x203)],_0x542e6a[_0x2dc346(0x11e)],{'success':![],'message':'Kein\x20API\x20Key.'},_0x542e6a['callback']);try{const _0xe18609=new GoogleGenerativeAI(_0x4fa3dd),_0x122d23=_0xe18609[_0x2dc346(0x158)]({'model':GEMINI_MODEL}),_0x1dcbb4=await _0x122d23[_0x2dc346(0x14b)]('Hi');this['sendTo'](_0x542e6a[_0x2dc346(0x203)],_0x542e6a[_0x2dc346(0x11e)],{'success':!![],'message':_0x2dc346(0x140)+_0x1dcbb4[_0x2dc346(0x205)]['text']()},_0x542e6a[_0x2dc346(0x213)]);}catch(_0x24e3b1){this[_0x2dc346(0x1e3)](_0x542e6a[_0x2dc346(0x203)],_0x542e6a['command'],{'success':![],'message':_0x2dc346(0x107)+_0x24e3b1[_0x2dc346(0x214)]},_0x542e6a[_0x2dc346(0x213)]);}}else{if(_0x542e6a['command']==='testContext'){const _0x44942d=await getWeatherContext(this),_0x38c771=await getCalendarContext(this);this[_0x2dc346(0x1e3)](_0x542e6a[_0x2dc346(0x203)],_0x542e6a[_0x2dc346(0x11e)],{'success':!![],'weather':_0x44942d,'calendar':_0x38c771},_0x542e6a[_0x2dc346(0x213)]);}else{if(_0x542e6a[_0x2dc346(0x11e)]===_0x2dc346(0x26c)){if(!this['isProVersion'])return this[_0x2dc346(0x1e3)](_0x542e6a[_0x2dc346(0x203)],_0x542e6a[_0x2dc346(0x11e)],{'success':![],'isPro':![]},_0x542e6a[_0x2dc346(0x213)]);let _0x5ad17a={'status':_0x2dc346(0x11b)};try{const _0x20912c=await this[_0x2dc346(0x27b)](LTM_DP_DRIFT_STATUS);_0x5ad17a[_0x2dc346(0x204)]=_0x20912c?_0x20912c[_0x2dc346(0x1e4)]:'N/A';}catch(_0x1b13f0){}this['sendTo'](_0x542e6a[_0x2dc346(0x203)],_0x542e6a[_0x2dc346(0x11e)],{'success':!![],'isPro':!![],'dailyDigests':this[_0x2dc346(0x21f)],'driftAnalysis':_0x5ad17a,'analysisHistory':this['analysisHistory']},_0x542e6a[_0x2dc346(0x213)]);}else{if(_0x542e6a[_0x2dc346(0x11e)]===_0x2dc346(0x1e8)){const _0x3f7ebe=this[_0x2dc346(0x21f)][_0x2dc346(0x253)],_0x49912b=new Date(),_0x4caef7=new Date(_0x49912b['getFullYear'](),_0x49912b[_0x2dc346(0x219)](),_0x49912b[_0x2dc346(0x1aa)]())[_0x2dc346(0x256)](),_0x3ac4ab=this[_0x2dc346(0x172)][_0x2dc346(0x1c1)](_0x3aeb3f=>new Date(_0x3aeb3f[_0x2dc346(0x245)])['getTime']()>_0x4caef7)[_0x2dc346(0x253)],_0x3ff3ba=new Array(0x18)['fill'](0x0);this['rawEventLog']['forEach'](_0x54b5ef=>{const _0x2954e8=_0x2dc346,_0x5b5704=new Date(_0x54b5ef[_0x2954e8(0x245)]);if(_0x5b5704[_0x2954e8(0x256)]()>_0x4caef7)_0x3ff3ba[_0x5b5704['getHours']()]++;});let _0x15b083={'status':'N/A'};try{const _0x690f9d=await this[_0x2dc346(0x27b)](LTM_DP_DRIFT_STATUS);_0x15b083[_0x2dc346(0x204)]=_0x690f9d?_0x690f9d[_0x2dc346(0x1e4)]:_0x2dc346(0x11b);}catch(_0x558cfd){}let _0x19dde9='';try{const _0x29a038=await this[_0x2dc346(0x27b)](_0x2dc346(0x25f));_0x19dde9=_0x29a038?_0x29a038[_0x2dc346(0x1e4)]:'';}catch(_0x321f1b){}let _0x3751d6=null;!this[_0x2dc346(0x15e)]&&(_0x3751d6=this['config'][_0x2dc346(0x18f)]?_0x2dc346(0x165):_0x2dc346(0x21a));let _0x4c8eb4={'detected':![],'description':'','targetId':'','targetValue':'','autoApply':![]};try{const _0x143ef3=await this['getStateAsync'](_0x2dc346(0x10e));if(_0x143ef3&&_0x143ef3[_0x2dc346(0x1e4)]){_0x4c8eb4[_0x2dc346(0x1a4)]=!![];const _0x29b71f=await this[_0x2dc346(0x27b)]('analysis.automation.description');_0x4c8eb4[_0x2dc346(0xfc)]=_0x29b71f?_0x29b71f[_0x2dc346(0x1e4)]:'';const _0x1d1aa1=await this['getStateAsync']('analysis.automation.targetId');_0x4c8eb4['targetId']=_0x1d1aa1?_0x1d1aa1[_0x2dc346(0x1e4)]:'';const _0x36e362=await this[_0x2dc346(0x27b)](_0x2dc346(0x195));_0x4c8eb4[_0x2dc346(0x16e)]=_0x36e362?_0x36e362['val']:'';}const _0x4f2506=await this[_0x2dc346(0x27b)](_0x2dc346(0x1ec));_0x4c8eb4[_0x2dc346(0x278)]=_0x4f2506?!!_0x4f2506[_0x2dc346(0x1e4)]:![];}catch(_0x2a4f24){}this[_0x2dc346(0x1e3)](_0x542e6a[_0x2dc346(0x203)],_0x542e6a[_0x2dc346(0x11e)],{'success':!![],'eventHistory':this['eventHistory']['slice'](0x0,0xf),'stats':{'digestCount':_0x3f7ebe,'eventCountToday':_0x3ac4ab,'hourlyActivity':_0x3ff3ba,'driftStatus':_0x15b083[_0x2dc346(0x204)],'isPresent':this[_0x2dc346(0x234)],'presenceWho':_0x19dde9,'minDays':this[_0x2dc346(0x283)][_0x2dc346(0x1b4)]||0x7,'stbDays':this['config'][_0x2dc346(0x230)]||0xe,'ltbDays':this[_0x2dc346(0x283)]['ltmLtbWindowDays']||0x3c,'systemError':_0x3751d6},'automation':_0x4c8eb4},_0x542e6a['callback']);}else{if(_0x542e6a[_0x2dc346(0x11e)]===_0x2dc346(0x280))try{const _0x232665=await scanner[_0x2dc346(0x1ad)](this,_0x542e6a['message']||{});this[_0x2dc346(0x1e3)](_0x542e6a[_0x2dc346(0x203)],_0x542e6a[_0x2dc346(0x11e)],{'success':!![],'devices':_0x232665},_0x542e6a['callback']);}catch(_0x1eb650){this[_0x2dc346(0x1e3)](_0x542e6a[_0x2dc346(0x203)],_0x542e6a['command'],{'success':![],'error':_0x1eb650[_0x2dc346(0x214)]},_0x542e6a[_0x2dc346(0x213)]);}else{if(_0x542e6a[_0x2dc346(0x11e)]===_0x2dc346(0x1f5)){const _0x4680f6=await this[_0x2dc346(0x115)](_0x2dc346(0x20e),'enum'),_0x790aaa=[];if(_0x4680f6)for(const _0x4ae57c in _0x4680f6){const _0x549e99=_0x4680f6[_0x4ae57c],_0x1cb1d3=(_0x549e99[_0x2dc346(0x135)]&&typeof _0x549e99['common'][_0x2dc346(0x1ab)]===_0x2dc346(0x114)?_0x549e99[_0x2dc346(0x135)]['name']['de']:_0x549e99[_0x2dc346(0x135)][_0x2dc346(0x1ab)])||_0x549e99[_0x2dc346(0x135)][_0x2dc346(0x1ab)];_0x790aaa['push']({'id':_0x4ae57c,'name':_0x1cb1d3});}const _0x59e813=await this[_0x2dc346(0x115)](_0x2dc346(0x171),_0x2dc346(0x255)),_0xa4a9a3=[];if(_0x59e813)for(const _0x3576ed in _0x59e813){const _0x48cdcc=_0x59e813[_0x3576ed],_0x5cc393=(_0x48cdcc[_0x2dc346(0x135)]&&typeof _0x48cdcc[_0x2dc346(0x135)]['name']===_0x2dc346(0x114)?_0x48cdcc[_0x2dc346(0x135)][_0x2dc346(0x1ab)]['de']:_0x48cdcc['common'][_0x2dc346(0x1ab)])||_0x3576ed[_0x2dc346(0x13c)]('.')[_0x2dc346(0x1e5)]();_0xa4a9a3['push'](_0x5cc393);}this['sendTo'](_0x542e6a['from'],_0x542e6a['command'],{'success':!![],'enums':_0x790aaa,'rooms':_0xa4a9a3},_0x542e6a[_0x2dc346(0x213)]);}else{if(_0x542e6a[_0x2dc346(0x11e)]===_0x2dc346(0x222)){const _0x171139=_0x542e6a[_0x2dc346(0x214)][_0x2dc346(0x192)];if(!_0x171139)return this[_0x2dc346(0x1e3)](_0x542e6a[_0x2dc346(0x203)],_0x542e6a['command'],{'success':![],'error':_0x2dc346(0x16a)},_0x542e6a[_0x2dc346(0x213)]);const _0x2a4d72=await getCalendarNames(this,_0x171139);this['sendTo'](_0x542e6a['from'],_0x542e6a[_0x2dc346(0x11e)],{'success':!![],'names':_0x2a4d72},_0x542e6a['callback']);}else{if(_0x542e6a[_0x2dc346(0x11e)]==='simulateButler'){const {targetId:_0xc6d472,targetValue:_0x160791}=_0x542e6a['message'];this[_0x2dc346(0x1d0)][_0x2dc346(0x22a)](_0x2dc346(0x1e9)+_0xc6d472+_0x2dc346(0x224)+_0x160791),await this[_0x2dc346(0x164)](_0x2dc346(0x10e),{'val':!![],'ack':!![]}),await this[_0x2dc346(0x164)]('analysis.automation.description',{'val':_0x2dc346(0x1f2)+_0xc6d472,'ack':!![]}),await this[_0x2dc346(0x164)](_0x2dc346(0x10f),{'val':_0xc6d472,'ack':!![]}),await this[_0x2dc346(0x164)](_0x2dc346(0x195),{'val':_0x160791,'ack':!![]}),this['sendTo'](_0x542e6a[_0x2dc346(0x203)],_0x542e6a[_0x2dc346(0x11e)],{'success':!![]},_0x542e6a[_0x2dc346(0x213)]);}else{if(_0x542e6a['command']===_0x2dc346(0x1df)){const {historyId:_0x18f2c6,rating:_0x5cb159,comment:_0x250f4e,alertReason:_0x491718}=_0x542e6a[_0x2dc346(0x214)];_0x18f2c6&&_0x5cb159?(await saveFeedback(this,{'timestamp':Date[_0x2dc346(0x134)](),'historyId':_0x18f2c6,'rating':_0x5cb159,'comment':_0x250f4e,'alertReason':_0x491718}),this['sendTo'](_0x542e6a['from'],_0x542e6a[_0x2dc346(0x11e)],{'success':!![]},_0x542e6a[_0x2dc346(0x213)])):this[_0x2dc346(0x1e3)](_0x542e6a[_0x2dc346(0x203)],_0x542e6a[_0x2dc346(0x11e)],{'success':![],'error':_0x2dc346(0x1bb)},_0x542e6a[_0x2dc346(0x213)]);}else _0x542e6a[_0x2dc346(0x11e)]===_0x2dc346(0x1ea)&&(this[_0x2dc346(0x1d0)][_0x2dc346(0x22a)]('User\x20dismissed\x20automation\x20proposal.'),await this[_0x2dc346(0x164)]('analysis.automation.patternDetected',{'val':![],'ack':!![]}),await this[_0x2dc346(0x164)]('analysis.automation.description',{'val':'','ack':!![]}),this['sendTo'](_0x542e6a[_0x2dc346(0x203)],_0x542e6a['command'],{'success':!![]},_0x542e6a[_0x2dc346(0x213)]));}}}}}}}}}}}if(require[a0_0x4f222a(0x23d)]!==module)module['exports']=_0x235dd0=>new CogniLiving(_0x235dd0);else new CogniLiving();