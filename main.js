const a0_0x4486ae=a0_0x3f5f;(function(_0x556320,_0x47ae96){const _0x14dfc5=a0_0x3f5f,_0x228002=_0x556320();while(!![]){try{const _0x3a078b=-parseInt(_0x14dfc5(0x222))/0x1*(-parseInt(_0x14dfc5(0x272))/0x2)+-parseInt(_0x14dfc5(0x252))/0x3+-parseInt(_0x14dfc5(0x255))/0x4+-parseInt(_0x14dfc5(0x235))/0x5+-parseInt(_0x14dfc5(0x1b7))/0x6*(parseInt(_0x14dfc5(0x1a3))/0x7)+parseInt(_0x14dfc5(0x18a))/0x8+-parseInt(_0x14dfc5(0x24b))/0x9*(-parseInt(_0x14dfc5(0x22b))/0xa);if(_0x3a078b===_0x47ae96)break;else _0x228002['push'](_0x228002['shift']());}catch(_0x2c2b93){_0x228002['push'](_0x228002['shift']());}}}(a0_0x1e87,0xe9c2e));function a0_0x3f5f(_0x55d6ed,_0xd6f4ed){const _0x5a9b21=a0_0x1e87();return a0_0x3f5f=function(_0x353b3f,_0x3116fb){_0x353b3f=_0x353b3f-0x16e;let _0x1e87bb=_0x5a9b21[_0x353b3f];return _0x1e87bb;},a0_0x3f5f(_0x55d6ed,_0xd6f4ed);}const a0_0x3116fb=(function(){let _0x41b1b3=!![];return function(_0x234b1f,_0x5cae00){const _0x1fccc6=_0x41b1b3?function(){if(_0x5cae00){const _0x45388c=_0x5cae00['apply'](_0x234b1f,arguments);return _0x5cae00=null,_0x45388c;}}:function(){};return _0x41b1b3=![],_0x1fccc6;};}()),a0_0x353b3f=a0_0x3116fb(this,function(){const _0x539771=a0_0x3f5f;return a0_0x353b3f['toString']()[_0x539771(0x1c8)](_0x539771(0x237))['toString']()[_0x539771(0x1a6)](a0_0x353b3f)['search'](_0x539771(0x237));});a0_0x353b3f();function a0_0x1e87(){const _0x4a4624=['sendNotification','healthTrendInterval','TRAIN_COMFORT','PINN\x20AI\x20Forecast','sensorLastValues','Warm-Up\x20Time\x20(Minutes\x20to\x20Target)','3658GJaWfJ','licenseKey','dailyDigests','getOverviewData','window','system.mode','checkSolarCondition','OPTIMIZE_ENERGY','dependencyInstallInProgress','10DyPCIO','Adapter','sensor.door','Kein\x20Wetter-Adapter','sensor.window','NextHours.Location_1.Day_1.current.symbol_desc','Party\x20Mode','string','stateChange','isArray','5309125SJjhSP','sort','(((.+)+)+)+$','accuweather.0','useWeather','devices','some','object','Gait\x20Speed\x20Calculation\x20Proof','send','info','bootTime','system.presenceWho','Reinforcement\x20Learning\x20Penalties',')\x20-\x20Phase\x20D\x20(Forensic\x20Calibration)','onUnload','testApiKey','sunny','getStateAsync','Gemini\x20AI\x20initialized.','analysis.energy.insulationScore','@google/generative-ai','20163861TUhQAS','analysis.training.status','subscribeForeignStatesAsync','fill','subscribeStates','Instanz\x20nicht\x20gefunden','Forensic\x20Infrasound\x20Log','4606011RLJxck','map','minutes_safe','1783704GdbiZo','namespace','analysis.security.infrasoundLog','./lib/setup','executeAutomationAction','config','analysis.automation.triggerAction','weatherunderground.0','LTM.triggerDailyDigest','startSystem','activityLevel','memoryCache','protectAiMemory','inactivityThresholdHours','Fehler:\x20','eventHistory','onMessage','parse','SYSTEM_DP_MODE','setupBriefingScheduler','toLowerCase','error','daswetter.0','\x20sequences...','application/json','manual','analysis.training.triggerSecurity','getForeignObjectsAsync','initSystemConfig','758nOSZoF','find','log','length','analysis.energy.mpcActive','runGeminiAnalysis','json','Nuukanni\x20Security','updateTopology','updated','testContext','analysis.energy.warmupTargets','getForeignObjectAsync','Active\x20Ventilation\x20Alerts','PREDICT_ENERGY','sendTo','LTM.trainingData.sequences','includes','getOutsideTemperatureNumeric','analysis.energy.rlPenalties','ErklÃ¤rt\x20durch:\x20','Lernphase\x20(','calendarName','getState','Test','analysis.training.triggerHealth','âš ï¸\x20Graph-Brain:\x20No\x20training\x20sequences\x20found\x20in\x20LTM.','val','[Infrasound]\x20ðŸŸ¡\x20Debug-Mode:\x20Alarm\x20detected\x20but\x20suppressed\x20because\x20presence=true.','floor','setupLtmScheduler','triggerEnergyPrediction','analysis.automation.patternDetected','abs','analysis.energy.warmupSources','onStateChange','CALIB','getEnums','filter','infrasoundThreshold','security.alarm_triggered','models/gemini-flash-latest','./lib/scheduler','onReady','\x20Tage)','checkCalendarTriggers','analysis.energy.activeEnforcements','analysisTimer','Verbunden','calendarInstance','temperature','warn','trackerHeartbeat','infrasoundArmingId','abortExitTimer','keys','@iobroker/adapter-core','appendToLog','reed','key','pop','version','runAutopilot','thermostat','getTime','value','minDaysForBaseline','analysisHistory','debug','from','analysis.energy.warmupTimes','â¤ï¸\x20Auto-Heartbeat:\x20Aktualisiere\x20Gesundheits-Trends...','Guest\x20Mode','[Forensics]\x20Infrasound\x20Event\x20correlated:\x20','updateTopologyMatrix','isSolar','times','ðŸ§ \x20Graph-Brain:\x20Training\x20Behaviour\x20Matrix\x20based\x20on\x20','telegram','\x20opened.\x20Peak\x20Pressure:\x20','Key\x20not\x20found\x20or\x20not\x20provided','\x20min\x20ausbleiben.','TRAIN_HEALTH','handleInfrasound','Kein\x20Kalender-Adapter','triggerDailyDigest','Standard','analysis.health.gaitDebug','heiter','notifyTelegramEnabled','./lib/ai_agent','exitGraceTimer','cancel','testNotification','LTM.dailyDigests','callback','presenceDevices','geminiModel','triggerInfrasoundCorrelation','analysis.automation.description','apiKey','setStateAsync','type','9375344pPPmzU','VACATION','\x20hPa.\x20Einbruch\x20wahrscheinlich.','initZombies','infrasoundEnabled','join','slice','Keine\x20Sensor-AktivitÃ¤t','getGenerativeModel','lastTrackerEventTime','processSensorEvent','door','Graph-Brain\x20Train\x20Error:\x20','stopService','Aktiv\x20(','analysis.health.todayVector','runPythonHealthCheck','motion','sources','bind','now','isPresent','lastAlertState','analysis.topology.structure','Sensors\x20used\x20for\x20Gait\x20Analysis','35XwDTgJ','stringify','LTM.rawEventLog','constructor','location','setHours','briefingJob','common','analyzeWindowOpening','ðŸ””\x20Dies\x20ist\x20ein\x20Test\x20von\x20Cogni-Living.','enum','analysisInterval','pressureBuffer','trackerEnabled','WiFi\x20Presence\x20detected.','infrasoundLocked','forEach','geminiApiKey','rawEventLog','ðŸ§ \x20Memory:\x20Cache\x20hydrated\x20with\x20','957786DFBNeL','systemConfig','TRACK_EVENT','currentSystemMode','./lib/python_bridge','Current.WeatherText','loadSystemMode','modeResetJob','SET_LEARNING_MODE','LTM.baselineStatus','LTM.trainingData.thermodynamics','unload','checkLicense','initHistory','party','name','infrasoundSensorId','search','ALARM','dismissAutomation','exitTimer','Activity-Level','magnet','text','command','analysis.training.triggerEnergy','ready','createAllObjects','analysis.automation.targetValue','endsWith','checkWifiPresence','Notification\x20Test\x20Failed:\x20','Warm-Up\x20Target\x20Temps\x20(JSON)','Verbindung\x20erfolgreich!','analysis.health.gaitSensors','[Calibration]\x20Window\x20','timestamp','clear','Memory\x20Hydration\x20Failed:\x20','SET_TOPOLOGY','split','setPresence','role','push','matrix','updateHealthVector','guest','values','\x20hPa\x20(Limit:\x20','runBaselineDriftAnalysis','ltmJob','isProVersion','.system.mode','TRAIN_ENERGY','response','setObjectNotExistsAsync','generateContent','entries','analysis.trigger','driftAnalysisTimer','General\x20Activity\x20Trend\x20(%)','genAI','SYSTEM_MODES','forecast.current.weather','cogni-living\x20adapter\x20starting\x20(v','updateLocation','MATCH\x20(False\x20Positive)','\x20hPa\x20(Threshold:\x20','\x20rooms\x20(preventing\x20Cold\x20Start\x20Amnesia).','./lib/installer','enum.rooms.*','Keine\x20Antwort\x20von\x20Gemini','isGracePeriodActive','.data.table','notifyPushoverInstance','ANALYZE_TREND','ANALYZE_GAIT','checkAndInstall','setState','./lib/topology','triggerGaitAnalysis','system.adapter.','instance','Heizung\x20kann\x20','./lib/recorder','add','analysis.automation.targetId','_calName','number','ack','getForeignStateAsync','notifyTelegramInstance','analysis.training.triggerTopology','message','cleanupGhostInterventions','INTERNAL','state','{\x22default\x22:\x2021}','NORMAL','sendMorningBriefing','monitorEnforcements'];a0_0x1e87=function(){return _0x4a4624;};return a0_0x1e87();}'use strict';const utils=require(a0_0x4486ae(0x2aa)),{GoogleGenerativeAI}=require(a0_0x4486ae(0x24a)),installer=require(a0_0x4486ae(0x1fc)),scanner=require('./lib/scanner'),schedulers=require(a0_0x4486ae(0x29c)),topology=require(a0_0x4486ae(0x206)),setup=require(a0_0x4486ae(0x258)),recorder=require(a0_0x4486ae(0x20b)),pythonBridge=require(a0_0x4486ae(0x1bb)),aiAgent=require(a0_0x4486ae(0x17d)),deadMan=require('./lib/dead_man'),automation=require('./lib/automation'),GEMINI_MODEL=a0_0x4486ae(0x29b),ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};class CogniLiving extends utils[a0_0x4486ae(0x22c)]{constructor(_0x5576df){const _0x559465=a0_0x4486ae;super({..._0x5576df,'name':'cogni-living'}),this[_0x559465(0x264)]=[],this[_0x559465(0x2b5)]=[],this['rawEventLog']=[],this[_0x559465(0x224)]=[],this[_0x559465(0x220)]={},this[_0x559465(0x1b8)]={'latitude':0x0,'longitude':0x0,'city':''},this['isPresent']=!![],this[_0x559465(0x1cb)]=null,this[_0x559465(0x17e)]=null,this[_0x559465(0x1ff)]=![],this[_0x559465(0x1f4)]=null,this['geminiModel']=null,this[_0x559465(0x1ba)]=setup[_0x559465(0x1f5)][_0x559465(0x219)],this[_0x559465(0x1ea)]=![],this[_0x559465(0x1a0)]=![],this['analysisTimer']=null,this[_0x559465(0x1e9)]=null,this[_0x559465(0x1be)]=null,this[_0x559465(0x1f2)]=null,this[_0x559465(0x1a9)]=null,this['trackerHeartbeat']=null,this[_0x559465(0x21d)]=null,this[_0x559465(0x22a)]=![],this[_0x559465(0x193)]=Date[_0x559465(0x19e)](),this['memoryCache']=null,this['bootTime']=Date[_0x559465(0x19e)](),this[_0x559465(0x1b2)]=![],this[_0x559465(0x1af)]=[],this['on'](_0x559465(0x1d1),this[_0x559465(0x29d)][_0x559465(0x19d)](this)),this['on'](_0x559465(0x233),this[_0x559465(0x295)][_0x559465(0x19d)](this)),this['on'](_0x559465(0x1c2),this[_0x559465(0x244)][_0x559465(0x19d)](this)),this['on']('message',this['onMessage'][_0x559465(0x19d)](this));}async[a0_0x4486ae(0x29d)](){const _0x5ec6c3=a0_0x4486ae;this[_0x5ec6c3(0x274)][_0x5ec6c3(0x23f)](_0x5ec6c3(0x1f7)+this[_0x5ec6c3(0x2af)]+_0x5ec6c3(0x243));if(!installer[_0x5ec6c3(0x204)](this,()=>this[_0x5ec6c3(0x25e)]()))return;}async[a0_0x4486ae(0x25e)](){const _0x2fc22c=a0_0x4486ae;await setup[_0x2fc22c(0x18d)](this);try{this['isProVersion']=await setup[_0x2fc22c(0x1c3)](this[_0x2fc22c(0x25a)][_0x2fc22c(0x223)]);}catch(_0x1b3693){}if(!this[_0x2fc22c(0x25a)][_0x2fc22c(0x262)]||this[_0x2fc22c(0x25a)][_0x2fc22c(0x262)]<0.1)this['config'][_0x2fc22c(0x262)]=0xc;await setup[_0x2fc22c(0x1c4)](this),await setup[_0x2fc22c(0x271)](this);try{const _0x2821cc=await this['getStateAsync']('analysis.energy.warmupTimes'),_0x1b924d=await this[_0x2fc22c(0x247)](_0x2fc22c(0x294));_0x2821cc&&_0x2821cc[_0x2fc22c(0x28d)]&&_0x1b924d&&_0x1b924d['val']&&(Date[_0x2fc22c(0x19e)]()-_0x2821cc['ts']<0x4*0xe10*0x3e8&&(this[_0x2fc22c(0x260)]={'times':JSON[_0x2fc22c(0x266)](_0x2821cc['val']),'sources':JSON['parse'](_0x1b924d[_0x2fc22c(0x28d)])},this['log']['info'](_0x2fc22c(0x1b6)+Object[_0x2fc22c(0x2a9)](this['memoryCache'][_0x2fc22c(0x16f)])[_0x2fc22c(0x275)]+_0x2fc22c(0x1fb))));}catch(_0x202bb5){this['log'][_0x2fc22c(0x2a5)](_0x2fc22c(0x1dd)+_0x202bb5[_0x2fc22c(0x214)]);}if(this[_0x2fc22c(0x25a)][_0x2fc22c(0x1b4)])try{this[_0x2fc22c(0x1f4)]=new GoogleGenerativeAI(this[_0x2fc22c(0x25a)][_0x2fc22c(0x1b4)]),this[_0x2fc22c(0x184)]=this[_0x2fc22c(0x1f4)][_0x2fc22c(0x192)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x2fc22c(0x26d)}}),this['log'][_0x2fc22c(0x23f)](_0x2fc22c(0x248));}catch(_0x1c4edc){this[_0x2fc22c(0x274)]['error']('Gemini\x20Init\x20Error:\x20'+_0x1c4edc[_0x2fc22c(0x214)]);}await setup[_0x2fc22c(0x1d2)](this),await this[_0x2fc22c(0x1bd)](),await this[_0x2fc22c(0x1ee)]('analysis.energy.pinnForecast',{'type':_0x2fc22c(0x217),'common':{'name':_0x2fc22c(0x21f),'type':_0x2fc22c(0x232),'role':_0x2fc22c(0x278),'read':!![],'write':![]},'native':{}}),await this[_0x2fc22c(0x1ee)]('analysis.energy.ventilationAlerts',{'type':_0x2fc22c(0x217),'common':{'name':_0x2fc22c(0x27f),'type':_0x2fc22c(0x232),'role':_0x2fc22c(0x278),'read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x2fc22c(0x2b8),{'type':_0x2fc22c(0x217),'common':{'name':_0x2fc22c(0x221),'type':_0x2fc22c(0x232),'role':_0x2fc22c(0x278),'read':!![],'write':![]},'native':{}}),await this[_0x2fc22c(0x1ee)](_0x2fc22c(0x27d),{'type':'state','common':{'name':_0x2fc22c(0x1d7),'type':_0x2fc22c(0x232),'role':_0x2fc22c(0x278),'read':!![],'write':!![],'def':_0x2fc22c(0x218)},'native':{}}),await this[_0x2fc22c(0x1ee)](_0x2fc22c(0x285),{'type':_0x2fc22c(0x217),'common':{'name':_0x2fc22c(0x242),'type':'string','role':_0x2fc22c(0x278),'read':!![],'write':![],'def':'{}'},'native':{}}),await this['setObjectNotExistsAsync']('analysis.health.activityTrend',{'type':_0x2fc22c(0x217),'common':{'name':_0x2fc22c(0x1f3),'type':_0x2fc22c(0x20f),'role':_0x2fc22c(0x2b3),'unit':'%','read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x2fc22c(0x1d9),{'type':'state','common':{'name':_0x2fc22c(0x1a2),'type':_0x2fc22c(0x232),'role':_0x2fc22c(0x1ce),'read':!![],'write':![]},'native':{}}),await this[_0x2fc22c(0x1ee)](_0x2fc22c(0x2a0),{'type':_0x2fc22c(0x217),'common':{'name':'Active\x20Calendar\x20Enforcements\x20(Locks)','type':_0x2fc22c(0x232),'role':_0x2fc22c(0x278),'read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x2fc22c(0x1ee)](_0x2fc22c(0x257),{'type':_0x2fc22c(0x217),'common':{'name':_0x2fc22c(0x251),'type':_0x2fc22c(0x232),'role':'json','read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x2fc22c(0x1ee)](_0x2fc22c(0x17a),{'type':'state','common':{'name':_0x2fc22c(0x23d),'type':_0x2fc22c(0x232),'role':'text','read':!![],'write':![]},'native':{}});try{const _0x2a4d15=await this[_0x2fc22c(0x247)](_0x2fc22c(0x1a5));if(_0x2a4d15&&_0x2a4d15['val'])this[_0x2fc22c(0x1b5)]=JSON['parse'](_0x2a4d15[_0x2fc22c(0x28d)]);}catch(_0x967177){this[_0x2fc22c(0x1b5)]=[];}try{const _0x35640c=await this[_0x2fc22c(0x247)](_0x2fc22c(0x181));if(_0x35640c&&_0x35640c[_0x2fc22c(0x28d)])this['dailyDigests']=JSON[_0x2fc22c(0x266)](_0x35640c[_0x2fc22c(0x28d)]);}catch(_0x2b39e1){this[_0x2fc22c(0x224)]=[];}const _0x4d045c=this['dailyDigests']['length']>=(this['config'][_0x2fc22c(0x2b4)]||0x7)?_0x2fc22c(0x198)+this[_0x2fc22c(0x224)][_0x2fc22c(0x275)]+_0x2fc22c(0x29e):_0x2fc22c(0x287)+this[_0x2fc22c(0x224)][_0x2fc22c(0x275)]+'/'+(this['config'][_0x2fc22c(0x2b4)]||0x7)+')';await this[_0x2fc22c(0x188)](_0x2fc22c(0x1c0),{'val':_0x4d045c,'ack':!![]}),this[_0x2fc22c(0x24f)](_0x2fc22c(0x1f1)),this[_0x2fc22c(0x24f)](_0x2fc22c(0x25d)),this['subscribeStates'](_0x2fc22c(0x227)),this['subscribeStates']('analysis.triggerBriefing'),this[_0x2fc22c(0x24f)](_0x2fc22c(0x25b)),this[_0x2fc22c(0x24f)]('analysis.automation.autoApply'),this[_0x2fc22c(0x24f)](_0x2fc22c(0x26f)),this[_0x2fc22c(0x24f)](_0x2fc22c(0x28b)),this[_0x2fc22c(0x24f)](_0x2fc22c(0x1d0)),this[_0x2fc22c(0x24f)]('analysis.training.triggerComfort'),this[_0x2fc22c(0x24f)]('analysis.training.triggerTopology'),this[_0x2fc22c(0x24f)](_0x2fc22c(0x276)),this[_0x2fc22c(0x24f)](_0x2fc22c(0x294));this[_0x2fc22c(0x25a)][_0x2fc22c(0x18e)]&&this[_0x2fc22c(0x25a)][_0x2fc22c(0x1c7)]&&(this[_0x2fc22c(0x274)]['info']('[Infrasound]\x20Subscribing\x20to\x20external\x20sensor:\x20'+this[_0x2fc22c(0x25a)][_0x2fc22c(0x1c7)]),this['subscribeForeignStates'](this[_0x2fc22c(0x25a)][_0x2fc22c(0x1c7)]));const _0x1dc466=this['config'][_0x2fc22c(0x23a)];if(_0x1dc466)for(const _0x5a941e of _0x1dc466){await this[_0x2fc22c(0x24d)](_0x5a941e['id']);}const _0xac8630=this[_0x2fc22c(0x25a)][_0x2fc22c(0x183)];if(_0xac8630)for(const _0x1ef6b9 of _0xac8630){await this['subscribeForeignStatesAsync'](_0x1ef6b9);}if(this[_0x2fc22c(0x25a)][_0x2fc22c(0x17c)]&&this[_0x2fc22c(0x25a)]['notifyTelegramInstance'])await this[_0x2fc22c(0x24d)](this[_0x2fc22c(0x25a)][_0x2fc22c(0x212)]+'.communicate.request');setTimeout(()=>this['checkWifiPresence'](),0x1388);if(this[_0x2fc22c(0x2a1)])clearInterval(this['analysisTimer']);const _0xf285a6=this[_0x2fc22c(0x25a)][_0x2fc22c(0x1ae)]||0xf;_0xf285a6>0x0&&(this['analysisTimer']=setInterval(()=>{const _0x2ceac7=_0x2fc22c;this[_0x2ceac7(0x2b0)](),automation[_0x2ceac7(0x29f)](this),automation[_0x2ceac7(0x21b)](this);},_0xf285a6*0x3c*0x3e8));setTimeout(()=>{const _0x41b076=_0x2fc22c;automation['checkCalendarTriggers'](this),automation[_0x41b076(0x21b)](this);},0x2710);this[_0x2fc22c(0x25a)][_0x2fc22c(0x1b0)]!==![]&&(this[_0x2fc22c(0x2a6)]=setInterval(()=>{const _0x13b700=_0x2fc22c;if(this[_0x13b700(0x1ea)]){const _0x5bdf3a=Date[_0x13b700(0x19e)](),_0x552c01=this[_0x13b700(0x193)]||_0x5bdf3a,_0x794282=(_0x5bdf3a-_0x552c01)/0x3e8;_0x794282>0x2&&(this[_0x13b700(0x193)]=_0x5bdf3a,pythonBridge[_0x13b700(0x23e)](this,_0x13b700(0x1b9),{'room':null,'dt':_0x794282}));}},0xbb8));if(this[_0x2fc22c(0x21d)])clearInterval(this[_0x2fc22c(0x21d)]);this['healthTrendInterval']=setInterval(()=>{const _0x35cbc2=_0x2fc22c;this[_0x35cbc2(0x1ea)]&&(this[_0x35cbc2(0x274)][_0x35cbc2(0x23f)](_0x35cbc2(0x2b9)),this[_0x35cbc2(0x19a)]());},0x4*0x3c*0x3c*0x3e8),schedulers[_0x2fc22c(0x290)](this,()=>aiAgent['createDailyDigest'](this,pythonBridge)),schedulers['setupModeResetScheduler'](this),schedulers['setupDriftAnalysisScheduler'](this,()=>aiAgent[_0x2fc22c(0x1e8)](this)),schedulers[_0x2fc22c(0x268)](this,()=>aiAgent[_0x2fc22c(0x21a)](this)),pythonBridge['startService'](this,installer['PYTHON_EXE']),setTimeout(async()=>{const _0x1ac803=_0x2fc22c;await topology[_0x1ac803(0x27a)](this);try{const _0x553b60=await this[_0x1ac803(0x247)]('analysis.topology.structure');if(_0x553b60&&_0x553b60[_0x1ac803(0x28d)])pythonBridge[_0x1ac803(0x23e)](this,_0x1ac803(0x1de),JSON[_0x1ac803(0x266)](_0x553b60['val']));}catch(_0x925f72){}this[_0x1ac803(0x19a)](),this[_0x1ac803(0x207)](),this[_0x1ac803(0x291)](),this[_0x1ac803(0x1e4)]();},0x1388);}[a0_0x4486ae(0x244)](_0x441476){const _0x780e91=a0_0x4486ae;if(this[_0x780e91(0x2a1)])clearInterval(this['analysisTimer']);if(this[_0x780e91(0x1f2)])clearInterval(this[_0x780e91(0x1f2)]);if(this['trackerHeartbeat'])clearInterval(this[_0x780e91(0x2a6)]);if(this[_0x780e91(0x21d)])clearInterval(this['healthTrendInterval']);if(this['ltmJob'])this[_0x780e91(0x1e9)][_0x780e91(0x17f)]();if(this[_0x780e91(0x1be)])this['modeResetJob'][_0x780e91(0x17f)]();if(this[_0x780e91(0x1a9)])this['briefingJob']['cancel']();recorder['abortExitTimer'](this),pythonBridge[_0x780e91(0x197)](this),_0x441476();}async['onStateChange'](_0x5d37ed,_0x2ae13d){const _0x859f83=a0_0x4486ae;if(!_0x2ae13d||this[_0x859f83(0x22a)])return;if(_0x5d37ed['includes'](_0x859f83(0x171))&&_0x5d37ed[_0x859f83(0x1d4)]('communicate.request')&&_0x2ae13d[_0x859f83(0x28d)])return;if(this[_0x859f83(0x25a)][_0x859f83(0x18e)]&&_0x5d37ed===this[_0x859f83(0x25a)][_0x859f83(0x1c7)]){this[_0x859f83(0x176)](_0x2ae13d[_0x859f83(0x28d)]);return;}if(_0x5d37ed===this[_0x859f83(0x256)]+_0x859f83(0x1eb)){if(_0x2ae13d[_0x859f83(0x28d)]&&Object[_0x859f83(0x1e6)](setup[_0x859f83(0x1f5)])[_0x859f83(0x283)](_0x2ae13d[_0x859f83(0x28d)])){this[_0x859f83(0x1ba)]=_0x2ae13d[_0x859f83(0x28d)];if(_0x2ae13d[_0x859f83(0x28d)]===setup[_0x859f83(0x1f5)][_0x859f83(0x18b)])await recorder['setPresence'](this,![]);else await recorder[_0x859f83(0x1e0)](this,!![]);if(this[_0x859f83(0x1ea)]){let _0x672d0=![],_0x3bb36b=0x0,_0x57d11c=_0x859f83(0x26e);if(this[_0x859f83(0x1ba)]===_0x859f83(0x1c5))_0x672d0=!![],_0x3bb36b=0x168,_0x57d11c=_0x859f83(0x231);else this[_0x859f83(0x1ba)]===_0x859f83(0x1e5)&&(_0x672d0=!![],_0x3bb36b=0x5a0,_0x57d11c=_0x859f83(0x2ba));pythonBridge[_0x859f83(0x23e)](this,_0x859f83(0x1bf),{'active':_0x672d0,'duration':_0x3bb36b,'label':_0x57d11c}),await this[_0x859f83(0x188)]('analysis.security.learningStatus',{'val':JSON[_0x859f83(0x1a4)]({'active':_0x672d0,'label':_0x57d11c,'timestamp':Date[_0x859f83(0x19e)]()}),'ack':!![]});}}if(!_0x2ae13d[_0x859f83(0x210)])this[_0x859f83(0x205)](_0x5d37ed,{'val':this[_0x859f83(0x1ba)],'ack':!![]});return;}_0x5d37ed[_0x859f83(0x1d4)](_0x859f83(0x294))&&_0x2ae13d['ack']&&this[_0x859f83(0x261)](_0x2ae13d['val']);if(!_0x2ae13d['ack']){if(_0x5d37ed[_0x859f83(0x283)](_0x859f83(0x1f1))&&_0x2ae13d[_0x859f83(0x28d)]){this[_0x859f83(0x205)](_0x5d37ed,{'val':![],'ack':!![]}),aiAgent[_0x859f83(0x277)](this);return;}if(_0x5d37ed['includes'](_0x859f83(0x178))&&_0x2ae13d[_0x859f83(0x28d)]){this[_0x859f83(0x205)](_0x5d37ed,{'val':![],'ack':!![]});if(this[_0x859f83(0x1ea)])aiAgent['createDailyDigest'](this,pythonBridge);return;}if(_0x5d37ed['includes']('triggerBriefing')&&_0x2ae13d[_0x859f83(0x28d)]){this[_0x859f83(0x205)](_0x5d37ed,{'val':![],'ack':!![]}),aiAgent['sendMorningBriefing'](this);return;}if(_0x5d37ed['includes']('automation.triggerAction')&&_0x2ae13d[_0x859f83(0x28d)]){this[_0x859f83(0x205)](_0x5d37ed,{'val':![],'ack':!![]}),aiAgent[_0x859f83(0x259)](this);return;}if(_0x5d37ed[_0x859f83(0x283)](_0x859f83(0x26f))&&_0x2ae13d[_0x859f83(0x28d)]){this[_0x859f83(0x205)](_0x5d37ed,{'val':![],'ack':!![]});if(this[_0x859f83(0x1ea)])try{const _0x10c8db=await this[_0x859f83(0x247)](_0x859f83(0x282));if(_0x10c8db&&_0x10c8db[_0x859f83(0x28d)]){const _0x1d782b=JSON[_0x859f83(0x266)](_0x10c8db[_0x859f83(0x28d)]);this['setStateAsync'](_0x859f83(0x24c),{'val':'Sec-Training\x20started...','ack':!![]}),pythonBridge['send'](this,'TRAIN_SECURITY',{'sequences':_0x1d782b});}}catch(_0x3dab24){}return;}if(_0x5d37ed[_0x859f83(0x283)]('analysis.training.triggerHealth')&&_0x2ae13d[_0x859f83(0x28d)]){this[_0x859f83(0x205)](_0x5d37ed,{'val':![],'ack':!![]});if(this[_0x859f83(0x1ea)])try{const _0x1e365a=await this[_0x859f83(0x247)](_0x859f83(0x181));if(_0x1e365a&&_0x1e365a['val'])pythonBridge['send'](this,_0x859f83(0x175),{'digests':JSON['parse'](_0x1e365a[_0x859f83(0x28d)])});}catch(_0x1f07f3){}return;}if(_0x5d37ed[_0x859f83(0x283)](_0x859f83(0x1d0))&&_0x2ae13d[_0x859f83(0x28d)]){this[_0x859f83(0x205)](_0x5d37ed,{'val':![],'ack':!![]});if(this[_0x859f83(0x1ea)])try{const _0x42a3df=await this[_0x859f83(0x247)](_0x859f83(0x1c1));if(_0x42a3df&&_0x42a3df[_0x859f83(0x28d)])pythonBridge[_0x859f83(0x23e)](this,_0x859f83(0x1ec),{'points':JSON['parse'](_0x42a3df['val'])});}catch(_0x46b533){}return;}if(_0x5d37ed[_0x859f83(0x283)]('analysis.training.triggerComfort')&&_0x2ae13d['val']){this[_0x859f83(0x205)](_0x5d37ed,{'val':![],'ack':!![]});if(this[_0x859f83(0x1ea)])try{const _0x736711=await this[_0x859f83(0x247)](_0x859f83(0x1a5));if(_0x736711&&_0x736711[_0x859f83(0x28d)])pythonBridge['send'](this,_0x859f83(0x21e),{'events':JSON[_0x859f83(0x266)](_0x736711[_0x859f83(0x28d)])});}catch(_0xcc70ec){}return;}if(_0x5d37ed[_0x859f83(0x283)](_0x859f83(0x213))&&_0x2ae13d[_0x859f83(0x28d)]){this[_0x859f83(0x205)](_0x5d37ed,{'val':![],'ack':!![]}),topology['updateTopology'](this);if(this[_0x859f83(0x1ea)])try{const _0x482f2=await this['getStateAsync'](_0x859f83(0x282));if(_0x482f2&&_0x482f2[_0x859f83(0x28d)]){const _0x510fd2=JSON['parse'](_0x482f2[_0x859f83(0x28d)]);this[_0x859f83(0x274)][_0x859f83(0x23f)](_0x859f83(0x170)+_0x510fd2[_0x859f83(0x275)]+_0x859f83(0x26c)),pythonBridge[_0x859f83(0x23e)](this,'TRAIN_TOPOLOGY',{'sequences':_0x510fd2});}else this[_0x859f83(0x274)]['warn'](_0x859f83(0x28c));}catch(_0x15f946){this[_0x859f83(0x274)][_0x859f83(0x26a)](_0x859f83(0x196)+_0x15f946['message']);}return;}}if(this['config'][_0x859f83(0x183)]&&this[_0x859f83(0x25a)]['presenceDevices']['includes'](_0x5d37ed)){await this[_0x859f83(0x1d5)]();return;}const _0x1dcc86=(this[_0x859f83(0x25a)][_0x859f83(0x23a)]||[])[_0x859f83(0x273)](_0xd28b97=>_0xd28b97['id']===_0x5d37ed);if(_0x1dcc86){const _0x2ddaf6=await recorder[_0x859f83(0x194)](this,_0x5d37ed,_0x2ae13d,_0x1dcc86);_0x2ddaf6&&_0x2ddaf6[_0x859f83(0x189)]===_0x859f83(0x19b)&&_0x2ddaf6[_0x859f83(0x1a7)]&&this[_0x859f83(0x1ea)]&&deadMan[_0x859f83(0x1f8)](this,_0x2ddaf6['location']),_0x2ae13d['val']&&(_0x2ae13d['val']===!![]||_0x2ae13d['val']===0x1||String(_0x2ae13d['val'])[_0x859f83(0x269)]()==='open')&&(_0x1dcc86['type']&&(_0x1dcc86['type'][_0x859f83(0x283)](_0x859f83(0x226))||_0x1dcc86['type'][_0x859f83(0x283)]('door')||_0x1dcc86[_0x859f83(0x189)][_0x859f83(0x283)](_0x859f83(0x1cd)))&&this[_0x859f83(0x1ab)](_0x1dcc86)),(_0x1dcc86[_0x859f83(0x189)]===_0x859f83(0x2a4)||_0x1dcc86[_0x859f83(0x189)]===_0x859f83(0x2b1))&&automation[_0x859f83(0x215)](this);}}async[a0_0x4486ae(0x261)](_0x59b06e){const _0x4679a6=a0_0x4486ae;if(!this['memoryCache']||Date[_0x4679a6(0x19e)]()-this[_0x4679a6(0x240)]>0x493e0)return;if(!this[_0x4679a6(0x260)][_0x4679a6(0x19c)]||!this[_0x4679a6(0x260)][_0x4679a6(0x16f)])return;try{const _0x2ecbe4=JSON[_0x4679a6(0x266)](_0x59b06e),_0x49a832=this['memoryCache'][_0x4679a6(0x19c)];let _0x3d4ed6=![];for(const _0xd84682 in _0x49a832){if(_0x49a832[_0xd84682]['includes']('AI')&&_0x2ecbe4[_0xd84682]&&!_0x2ecbe4[_0xd84682][_0x4679a6(0x283)]('AI')){_0x3d4ed6=!![];break;}}_0x3d4ed6&&(this[_0x4679a6(0x274)][_0x4679a6(0x23f)]('ðŸ§ \x20Memory\x20Protection:\x20Restoring\x20persisted\x20AI-Calculations\x20(preventing\x20\x27Cold\x20Start\x27\x20amnesia).'),await this[_0x4679a6(0x188)]('analysis.energy.warmupTimes',{'val':JSON[_0x4679a6(0x1a4)](this['memoryCache'][_0x4679a6(0x16f)]),'ack':!![]}),await this[_0x4679a6(0x188)](_0x4679a6(0x294),{'val':JSON[_0x4679a6(0x1a4)](this[_0x4679a6(0x260)]['sources']),'ack':!![]}));}catch(_0x3cc9f4){}}async[a0_0x4486ae(0x265)](_0x16b7af){const _0x264633=a0_0x4486ae;if(typeof _0x16b7af===_0x264633(0x23c)&&_0x16b7af[_0x264633(0x214)]){if(_0x16b7af[_0x264633(0x1cf)]==='checkThermostats')try{const _0x24d122=await automation['scanThermostats'](this);this[_0x264633(0x281)](_0x16b7af['from'],_0x16b7af[_0x264633(0x1cf)],{'success':!![],'results':_0x24d122},_0x16b7af['callback']);}catch(_0x4560cd){this[_0x264633(0x281)](_0x16b7af[_0x264633(0x2b7)],_0x16b7af[_0x264633(0x1cf)],{'success':![],'error':_0x4560cd['message']},_0x16b7af[_0x264633(0x182)]);}else{if(_0x16b7af[_0x264633(0x1cf)]==='simulateEnergyMPC')try{const {current_temps:_0x42af10,t_out:_0x1ec4ad,targets:_0x3120f5,t_forecast:_0x528d23}=_0x16b7af['message'],_0x34ee25=[];let _0x4c5c96={};try{const _0xf929c6=await this[_0x264633(0x247)](_0x264633(0x249));if(_0xf929c6&&_0xf929c6['val']){const _0x1950e4=JSON['parse'](_0xf929c6[_0x264633(0x28d)]);_0x4c5c96=_0x1950e4['scores']||_0x1950e4;}}catch(_0x1f66c0){}const _0x5ef5f4=_0x528d23!==undefined&&_0x528d23!==null?(_0x1ec4ad+_0x528d23)/0x2:_0x1ec4ad;for(const [_0x4535ba,_0x3cf265]of Object[_0x264633(0x1f0)](_0x42af10)){const _0x175de7=_0x3120f5[_0x4535ba]||0x15;if(_0x3cf265<=_0x175de7)continue;let _0x4e42e6=_0x4c5c96[_0x4535ba]||-0.5;if(_0x4e42e6>=0x0)_0x4e42e6=-0.5;const _0x3e21fe=Math[_0x264633(0x293)](_0x4e42e6),_0x48d5f4=_0x3cf265-_0x175de7;let _0x3898c1=Math[_0x264633(0x28f)](_0x48d5f4/_0x3e21fe*0x3c);const _0x206aaa=_0x3cf265-_0x1ec4ad,_0x2f66d0=_0x3cf265-_0x5ef5f4;if(_0x2f66d0!==0x0&&_0x206aaa!==0x0){const _0x492920=_0x206aaa/_0x2f66d0;_0x3898c1=Math['floor'](_0x3898c1*_0x492920);}if(_0x3898c1>0xf){if(_0x3898c1>0xf0)_0x3898c1=0xf0;_0x34ee25[_0x264633(0x1e2)]({'room':_0x4535ba,'minutes_safe':_0x3898c1,'target':_0x175de7,'current':_0x3cf265,'savings_msg':_0x264633(0x20a)+_0x3898c1+_0x264633(0x174)});}}_0x34ee25[_0x264633(0x236)]((_0xda4871,_0x1838c7)=>_0x1838c7['minutes_safe']-_0xda4871[_0x264633(0x254)]),this['sendTo'](_0x16b7af['from'],_0x16b7af['command'],{'success':!![],'proposals':_0x34ee25},_0x16b7af[_0x264633(0x182)]);}catch(_0x331ffe){this[_0x264633(0x281)](_0x16b7af[_0x264633(0x2b7)],_0x16b7af[_0x264633(0x1cf)],{'success':![],'error':_0x331ffe[_0x264633(0x214)]},_0x16b7af[_0x264633(0x182)]);}else{if(_0x16b7af[_0x264633(0x1cf)]==='resetRLPenalty')try{const _0x6b2750=_0x16b7af[_0x264633(0x214)][_0x264633(0x2ad)],_0xe70717=_0x264633(0x285),_0x27e382=await this[_0x264633(0x247)](_0xe70717);let _0x3ea867={};if(_0x27e382&&_0x27e382[_0x264633(0x28d)])try{_0x3ea867=JSON[_0x264633(0x266)](_0x27e382['val']);}catch(_0x5ec2bd){}_0x6b2750&&_0x3ea867[_0x6b2750]?(delete _0x3ea867[_0x6b2750],await this['setStateAsync'](_0xe70717,{'val':JSON[_0x264633(0x1a4)](_0x3ea867),'ack':!![]}),this[_0x264633(0x274)][_0x264633(0x23f)]('ðŸŽ“\x20[RL-RESET]\x20Lern-Sperre\x20(Penalty)\x20fÃ¼r\x20\x27'+_0x6b2750+'\x27\x20wurde\x20manuell\x20vom\x20Benutzer\x20gelÃ¶scht.'),this[_0x264633(0x281)](_0x16b7af[_0x264633(0x2b7)],_0x16b7af[_0x264633(0x1cf)],{'success':!![]},_0x16b7af[_0x264633(0x182)])):this[_0x264633(0x281)](_0x16b7af[_0x264633(0x2b7)],_0x16b7af[_0x264633(0x1cf)],{'success':![],'error':_0x264633(0x173)},_0x16b7af[_0x264633(0x182)]);}catch(_0x49d9a4){this['sendTo'](_0x16b7af[_0x264633(0x2b7)],_0x16b7af[_0x264633(0x1cf)],{'success':![],'error':_0x49d9a4['message']},_0x16b7af['callback']);}else{if(_0x16b7af['command']===_0x264633(0x1ca))await this[_0x264633(0x188)](_0x264633(0x292),{'val':![],'ack':!![]}),await this['setStateAsync'](_0x264633(0x186),{'val':'','ack':!![]}),await this[_0x264633(0x188)](_0x264633(0x20d),{'val':'','ack':!![]}),this[_0x264633(0x281)](_0x16b7af[_0x264633(0x2b7)],_0x16b7af[_0x264633(0x1cf)],{'success':!![]},_0x16b7af[_0x264633(0x182)]);else{if(_0x16b7af[_0x264633(0x1cf)]==='simulateButler'){const {targetId:_0x4faed9,targetValue:_0x1a7c46}=_0x16b7af[_0x264633(0x214)];await this[_0x264633(0x188)](_0x264633(0x292),{'val':!![],'ack':!![]}),await this[_0x264633(0x188)](_0x264633(0x186),{'val':'Simulation\x20durch\x20Admin\x20(Test)','ack':!![]}),await this['setStateAsync'](_0x264633(0x20d),{'val':_0x4faed9,'ack':!![]}),await this[_0x264633(0x188)](_0x264633(0x1d3),{'val':String(_0x1a7c46),'ack':!![]}),this[_0x264633(0x281)](_0x16b7af['from'],_0x16b7af[_0x264633(0x1cf)],{'success':!![]},_0x16b7af[_0x264633(0x182)]);}else{if(_0x16b7af[_0x264633(0x1cf)]===_0x264633(0x245))try{const _0x2a0b45=_0x16b7af[_0x264633(0x214)][_0x264633(0x187)];if(!_0x2a0b45)throw new Error('Kein\x20API\x20Key\x20Ã¼bergeben');const _0xcee2a6=new GoogleGenerativeAI(_0x2a0b45),_0x202c86=_0xcee2a6[_0x264633(0x192)]({'model':GEMINI_MODEL}),_0x3f8464=await _0x202c86[_0x264633(0x1ef)](_0x264633(0x28a)),_0x315f81=await _0x3f8464[_0x264633(0x1ed)];if(_0x315f81[_0x264633(0x1ce)]())this[_0x264633(0x281)](_0x16b7af['from'],_0x16b7af[_0x264633(0x1cf)],{'success':!![],'message':_0x264633(0x1d8)},_0x16b7af[_0x264633(0x182)]);else throw new Error(_0x264633(0x1fe));}catch(_0x564004){this[_0x264633(0x281)](_0x16b7af['from'],_0x16b7af[_0x264633(0x1cf)],{'success':![],'message':_0x564004[_0x264633(0x214)]},_0x16b7af[_0x264633(0x182)]);}else{if(_0x16b7af['command']==='scanDevices')try{const _0x3eeecb=await scanner['scanForDevices'](this,_0x16b7af[_0x264633(0x214)]||{});this[_0x264633(0x281)](_0x16b7af['from'],_0x16b7af[_0x264633(0x1cf)],{'success':!![],'devices':_0x3eeecb},_0x16b7af[_0x264633(0x182)]);}catch(_0x5a9d52){this[_0x264633(0x281)](_0x16b7af[_0x264633(0x2b7)],_0x16b7af[_0x264633(0x1cf)],{'success':![],'error':_0x5a9d52[_0x264633(0x214)]},_0x16b7af['callback']);}else{if(_0x16b7af[_0x264633(0x1cf)]===_0x264633(0x2bc))try{const {matrix:_0x555920}=_0x16b7af[_0x264633(0x214)],_0x38f7a8=await this[_0x264633(0x247)](_0x264633(0x1a1));if(_0x38f7a8&&_0x38f7a8[_0x264633(0x28d)]){const _0x21b0b7=JSON[_0x264633(0x266)](_0x38f7a8[_0x264633(0x28d)]);_0x21b0b7[_0x264633(0x1e3)]=_0x555920,_0x21b0b7[_0x264633(0x27b)]=Date[_0x264633(0x19e)](),await this['setStateAsync'](_0x264633(0x1a1),{'val':JSON['stringify'](_0x21b0b7),'ack':!![]}),pythonBridge[_0x264633(0x23e)](this,_0x264633(0x1de),_0x21b0b7);}this[_0x264633(0x281)](_0x16b7af[_0x264633(0x2b7)],_0x16b7af[_0x264633(0x1cf)],{'success':!![]},_0x16b7af[_0x264633(0x182)]);}catch(_0x266b1e){this['log']['error'](_0x266b1e);}else{if(_0x16b7af[_0x264633(0x1cf)]==='getLtmData')this[_0x264633(0x281)](_0x16b7af['from'],_0x16b7af[_0x264633(0x1cf)],{'success':!![],'dailyDigests':this[_0x264633(0x224)]||[],'analysisHistory':this['analysisHistory']||[]},_0x16b7af[_0x264633(0x182)]);else{if(_0x16b7af[_0x264633(0x1cf)]===_0x264633(0x225)){const _0x4987b0=this[_0x264633(0x224)]['length'],_0x5e2204=new Array(0x18)[_0x264633(0x24e)](0x0),_0x1a6576=new Date()[_0x264633(0x1a8)](0x0,0x0,0x0,0x0);this[_0x264633(0x264)]&&this[_0x264633(0x264)][_0x264633(0x1b3)](_0x3cff08=>{const _0x36c591=_0x264633;if(_0x3cff08[_0x36c591(0x1db)]>=_0x1a6576){const _0x23add0=new Date(_0x3cff08[_0x36c591(0x1db)])['getHours']();if(_0x23add0>=0x0&&_0x23add0<0x18)_0x5e2204[_0x23add0]++;}});let _0x133119=![],_0x2ef987='',_0x11c7c8='',_0xba4b6b='';try{const _0x411042=await this['getStateAsync']('analysis.automation.patternDetected');if(_0x411042&&_0x411042['val']){_0x133119=!![];const _0x2ae505=await this[_0x264633(0x247)](_0x264633(0x186));_0x2ef987=_0x2ae505?_0x2ae505[_0x264633(0x28d)]:'';const _0x56edd6=await this[_0x264633(0x247)](_0x264633(0x20d));_0x11c7c8=_0x56edd6?_0x56edd6[_0x264633(0x28d)]:'';const _0x25bb75=await this['getStateAsync'](_0x264633(0x1d3));_0xba4b6b=_0x25bb75?_0x25bb75['val']:'';}}catch(_0x434a2d){}const _0x2baa60=await this['checkSolarCondition'](),_0x3c7eae=(this['config'][_0x264633(0x23a)]||[])[_0x264633(0x23b)](_0x4f06d9=>_0x4f06d9[_0x264633(0x16e)]),_0x494d0f=_0x2baa60&&_0x3c7eae;let _0x4f9a3c='';try{const _0x13a363=await this['getStateAsync'](_0x264633(0x241));if(_0x13a363&&_0x13a363['val'])_0x4f9a3c=_0x13a363[_0x264633(0x28d)];}catch(_0x242397){}this[_0x264633(0x281)](_0x16b7af[_0x264633(0x2b7)],_0x16b7af[_0x264633(0x1cf)],{'success':!![],'eventHistory':this[_0x264633(0x264)][_0x264633(0x190)](0x0,0xf),'stats':{'digestCount':_0x4987b0,'isPresent':this[_0x264633(0x19f)],'hourlyActivity':_0x5e2204,'solarActive':_0x494d0f,'presenceWho':_0x4f9a3c},'automation':{'detected':_0x133119,'description':_0x2ef987,'targetId':_0x11c7c8,'targetValue':_0xba4b6b}},_0x16b7af['callback']);}else{if(_0x16b7af[_0x264633(0x1cf)]===_0x264633(0x297)){const _0x3d5f06=await this[_0x264633(0x270)]('enum.functions.*',_0x264633(0x1ad)),_0x2393ae=[];if(_0x3d5f06)for(const _0x29edef in _0x3d5f06){const _0x5bbe0d=_0x3d5f06[_0x29edef],_0x2311a9=(_0x5bbe0d[_0x264633(0x1aa)]&&typeof _0x5bbe0d[_0x264633(0x1aa)][_0x264633(0x1c6)]===_0x264633(0x23c)?_0x5bbe0d[_0x264633(0x1aa)]['name']['de']:_0x5bbe0d[_0x264633(0x1aa)][_0x264633(0x1c6)])||_0x5bbe0d[_0x264633(0x1aa)][_0x264633(0x1c6)];_0x2393ae[_0x264633(0x1e2)]({'id':_0x29edef,'name':_0x2311a9});}const _0x405667=await this[_0x264633(0x270)](_0x264633(0x1fd),'enum'),_0x1bf1c6=[];if(_0x405667)for(const _0x25d4b3 in _0x405667){const _0x56ee88=_0x405667[_0x25d4b3],_0x351ab8=(_0x56ee88['common']&&typeof _0x56ee88[_0x264633(0x1aa)][_0x264633(0x1c6)]==='object'?_0x56ee88[_0x264633(0x1aa)][_0x264633(0x1c6)]['de']:_0x56ee88[_0x264633(0x1aa)]['name'])||_0x25d4b3[_0x264633(0x1df)]('.')[_0x264633(0x2ae)]();_0x1bf1c6['push'](_0x351ab8);}this['sendTo'](_0x16b7af['from'],_0x16b7af['command'],{'success':!![],'enums':_0x2393ae,'rooms':_0x1bf1c6},_0x16b7af[_0x264633(0x182)]);}else{if(_0x16b7af[_0x264633(0x1cf)]===_0x264633(0x27c))try{let _0x35dd95=_0x264633(0x22e),_0x210325=_0x264633(0x177);if(this['config'][_0x264633(0x239)]){const _0x2b47d5=await recorder[_0x264633(0x284)](this);_0x35dd95=_0x2b47d5!==null?_0x2b47d5+'Â°C':'Daten\x20nicht\x20verfÃ¼gbar';}if(this['config'][_0x264633(0x2a3)]){const _0x101f47=await this[_0x264633(0x27e)](_0x264633(0x208)+this['config'][_0x264633(0x2a3)]);_0x210325=_0x101f47?_0x264633(0x2a2):_0x264633(0x250);}this[_0x264633(0x281)](_0x16b7af[_0x264633(0x2b7)],_0x16b7af[_0x264633(0x1cf)],{'success':!![],'weather':_0x35dd95,'calendar':_0x210325},_0x16b7af[_0x264633(0x182)]);}catch(_0x5d42ef){this['sendTo'](_0x16b7af[_0x264633(0x2b7)],_0x16b7af['command'],{'success':![],'error':_0x5d42ef[_0x264633(0x214)]},_0x16b7af[_0x264633(0x182)]);}else{if(_0x16b7af[_0x264633(0x1cf)]==='getCalendarNames')try{const _0x5d94ca=_0x16b7af[_0x264633(0x214)][_0x264633(0x209)],_0x2d7ebf=await this[_0x264633(0x211)](_0x5d94ca+_0x264633(0x200));let _0x167693=[];if(_0x2d7ebf&&_0x2d7ebf['val']){const _0x48550b=JSON[_0x264633(0x266)](_0x2d7ebf[_0x264633(0x28d)]),_0x9dc0c6=new Set();Array[_0x264633(0x234)](_0x48550b)&&_0x48550b[_0x264633(0x1b3)](_0x4e2236=>{const _0x4b57ec=_0x264633;if(_0x4e2236[_0x4b57ec(0x20e)])_0x9dc0c6[_0x4b57ec(0x20c)](_0x4e2236[_0x4b57ec(0x20e)]);else{if(_0x4e2236[_0x4b57ec(0x288)])_0x9dc0c6[_0x4b57ec(0x20c)](_0x4e2236['calendarName']);}}),_0x167693=Array[_0x264633(0x2b7)](_0x9dc0c6)['sort']();}if(_0x167693[_0x264633(0x275)]===0x0)_0x167693=[_0x264633(0x179)];this[_0x264633(0x281)](_0x16b7af[_0x264633(0x2b7)],_0x16b7af[_0x264633(0x1cf)],{'success':!![],'names':_0x167693},_0x16b7af[_0x264633(0x182)]);}catch(_0xc491f9){this[_0x264633(0x281)](_0x16b7af['from'],_0x16b7af['command'],{'success':![],'error':_0xc491f9[_0x264633(0x214)]},_0x16b7af[_0x264633(0x182)]);}else{if(_0x16b7af[_0x264633(0x1cf)]===_0x264633(0x180))try{await setup[_0x264633(0x21c)](this,_0x264633(0x1ac),![],![]),this['sendTo'](_0x16b7af[_0x264633(0x2b7)],_0x16b7af[_0x264633(0x1cf)],{'success':!![],'message':'Gesendet'},_0x16b7af[_0x264633(0x182)]);}catch(_0x401f9e){this[_0x264633(0x274)][_0x264633(0x26a)](_0x264633(0x1d6)+_0x401f9e[_0x264633(0x214)]),this[_0x264633(0x281)](_0x16b7af[_0x264633(0x2b7)],_0x16b7af[_0x264633(0x1cf)],{'success':![],'message':_0x264633(0x263)+_0x401f9e[_0x264633(0x214)]},_0x16b7af[_0x264633(0x182)]);}}}}}}}}}}}}}}}}async[a0_0x4486ae(0x1bd)](){const _0x3fc164=a0_0x4486ae;try{const _0x1506b2=await this[_0x3fc164(0x247)](setup[_0x3fc164(0x267)]);_0x1506b2&&_0x1506b2[_0x3fc164(0x28d)]&&Object[_0x3fc164(0x1e6)](setup[_0x3fc164(0x1f5)])['includes'](_0x1506b2[_0x3fc164(0x28d)])?this['currentSystemMode']=_0x1506b2['val']:(this[_0x3fc164(0x1ba)]=setup[_0x3fc164(0x1f5)][_0x3fc164(0x219)],await this[_0x3fc164(0x188)](setup[_0x3fc164(0x267)],{'val':setup[_0x3fc164(0x1f5)][_0x3fc164(0x219)],'ack':!![]}));}catch(_0x5b8af2){this[_0x3fc164(0x1ba)]=setup['SYSTEM_MODES'][_0x3fc164(0x219)];}}async[a0_0x4486ae(0x1d5)](){const _0x3bebfb=a0_0x4486ae;try{const _0x5a638c=this['config'][_0x3bebfb(0x183)]||[];let _0x41e080=![];const _0x41f5eb=[];for(const _0x15f8a1 of _0x5a638c){try{const _0xe17b8e=await this[_0x3bebfb(0x211)](_0x15f8a1);_0xe17b8e&&(_0xe17b8e['val']===!![]||_0xe17b8e[_0x3bebfb(0x28d)]==='online'||_0xe17b8e[_0x3bebfb(0x28d)]===0x1)&&(_0x41e080=!![],_0x41f5eb[_0x3bebfb(0x1e2)](_0x15f8a1));}catch(_0x302f68){}}return await this['setStateAsync'](_0x3bebfb(0x241),{'val':_0x41f5eb[_0x3bebfb(0x18f)](',\x20'),'ack':!![]}),_0x41e080&&(this[_0x3bebfb(0x1cb)]&&(this[_0x3bebfb(0x274)][_0x3bebfb(0x23f)](_0x3bebfb(0x1b1)),recorder[_0x3bebfb(0x2a8)](this)),!this[_0x3bebfb(0x19f)]&&this[_0x3bebfb(0x1ba)]===setup[_0x3bebfb(0x1f5)][_0x3bebfb(0x219)]&&await recorder[_0x3bebfb(0x1e0)](this,!![])),_0x41e080;}catch(_0x31322b){return![];}}async[a0_0x4486ae(0x2b0)](){const _0x13411a=a0_0x4486ae;this[_0x13411a(0x274)][_0x13411a(0x2b6)]('ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...'),await aiAgent['runGeminiAnalysis'](this),this[_0x13411a(0x1e4)](),this[_0x13411a(0x207)](),this[_0x13411a(0x291)]();}async[a0_0x4486ae(0x228)](){const _0xeb1e88=a0_0x4486ae,_0x1ea935=[_0xeb1e88(0x25c),_0xeb1e88(0x238),_0xeb1e88(0x26b)],_0x419fc8=[_0xeb1e88(0x1f6),_0xeb1e88(0x1bc),_0xeb1e88(0x230)];for(const _0x19302b of _0x1ea935){for(const _0x23a5b3 of _0x419fc8){try{const _0x297b59=_0x19302b+'.'+_0x23a5b3,_0x491d49=await this['getForeignStateAsync'](_0x297b59);if(_0x491d49&&_0x491d49[_0xeb1e88(0x28d)]){const _0x4cdb03=String(_0x491d49[_0xeb1e88(0x28d)])[_0xeb1e88(0x269)]();if(_0x4cdb03[_0xeb1e88(0x283)]('sonn')||_0x4cdb03[_0xeb1e88(0x283)](_0xeb1e88(0x246))||_0x4cdb03['includes']('klar')||_0x4cdb03[_0xeb1e88(0x283)](_0xeb1e88(0x1dc))||_0x4cdb03[_0xeb1e88(0x283)](_0xeb1e88(0x17b)))return!![];}}catch(_0x377b1){}}}return![];}['triggerGaitAnalysis'](){const _0x45ba73=a0_0x4486ae;if(!this['isProVersion'])return;try{this[_0x45ba73(0x289)]('LTM.trainingData.sequences',(_0x14443e,_0x565e23)=>{const _0x43385d=_0x45ba73;_0x565e23&&_0x565e23[_0x43385d(0x28d)]&&pythonBridge[_0x43385d(0x23e)](this,_0x43385d(0x203),{'sequences':JSON[_0x43385d(0x266)](_0x565e23[_0x43385d(0x28d)])});});}catch(_0x3b73bd){}}async[a0_0x4486ae(0x291)](){const _0x385f84=a0_0x4486ae;if(!this[_0x385f84(0x1ea)])return;try{const _0x115849=await recorder[_0x385f84(0x284)](this);if(_0x115849===null)return;const _0x285b8c={},_0x4f935c={},_0x45e336=this[_0x385f84(0x25a)]['devices']||[];for(const _0x17d46a of _0x45e336){if(_0x17d46a[_0x385f84(0x189)]===_0x385f84(0x2a4)&&_0x17d46a['location']){const _0x4fb048=this['sensorLastValues'][_0x17d46a['id']];if(_0x4fb048!==undefined)_0x285b8c[_0x17d46a[_0x385f84(0x1a7)]]=_0x4fb048;if(_0x17d46a[_0x385f84(0x16e)])_0x4f935c[_0x17d46a[_0x385f84(0x1a7)]]=!![];}}const _0x30bb9a=await this[_0x385f84(0x228)]();let _0x26860a={};try{const _0x146fd0=await this[_0x385f84(0x247)](_0x385f84(0x27d));if(_0x146fd0&&_0x146fd0[_0x385f84(0x28d)])_0x26860a=JSON[_0x385f84(0x266)](_0x146fd0[_0x385f84(0x28d)]);}catch(_0xc437b2){}Object[_0x385f84(0x2a9)](_0x285b8c)[_0x385f84(0x275)]>0x0&&(pythonBridge[_0x385f84(0x23e)](this,_0x385f84(0x280),{'current_temps':_0x285b8c,'t_out':_0x115849,'is_sunny':_0x30bb9a,'solar_flags':_0x4f935c,'warmup_targets':_0x26860a}),pythonBridge[_0x385f84(0x23e)](this,_0x385f84(0x229),{'current_temps':_0x285b8c,'t_out':_0x115849,'targets':{}}));}catch(_0xf746e2){}}[a0_0x4486ae(0x1e4)](){const _0x57f5ea=a0_0x4486ae;if(!this[_0x57f5ea(0x1b5)]||this['rawEventLog'][_0x57f5ea(0x275)]===0x0)return;const _0x393fc6=new Array(0x60)['fill'](0x0),_0x95c1a2=new Date()[_0x57f5ea(0x1a8)](0x0,0x0,0x0,0x0);this[_0x57f5ea(0x1b5)][_0x57f5ea(0x1b3)](_0x91a0f2=>{const _0x5eb026=_0x57f5ea,_0x4fb807=new Date(_0x91a0f2[_0x5eb026(0x1db)]);if(_0x4fb807[_0x5eb026(0x2b2)]()>=_0x95c1a2){const _0x33886a=_0x4fb807['getHours'](),_0x3ee7c4=_0x4fb807['getMinutes'](),_0x733f29=_0x33886a*0x4+Math[_0x5eb026(0x28f)](_0x3ee7c4/0xf);if(_0x733f29>=0x0&&_0x733f29<0x60)_0x393fc6[_0x733f29]++;}}),this[_0x57f5ea(0x188)](_0x57f5ea(0x199),{'val':JSON[_0x57f5ea(0x1a4)](_0x393fc6),'ack':!![]});}['runPythonHealthCheck'](){const _0x1214ac=a0_0x4486ae;if(!this[_0x1214ac(0x224)]||this[_0x1214ac(0x224)][_0x1214ac(0x275)]<0x2)return;const _0x264edb=this[_0x1214ac(0x224)][_0x1214ac(0x253)](_0x2d6afd=>{const _0x562f6b=_0x1214ac,_0x5e67be=(_0x2d6afd[_0x562f6b(0x25f)]||'')['toLowerCase']();return ACTIVITY_LEVEL_MAP[_0x5e67be]||0x32;});pythonBridge[_0x1214ac(0x23e)](this,_0x1214ac(0x202),{'values':_0x264edb,'tag':_0x1214ac(0x1cc)});}async['handleInfrasound'](_0x1bbd02){const _0x1e8de4=a0_0x4486ae;if(_0x1bbd02==null||typeof _0x1bbd02!=='number')return;const _0x3ffb24=Date[_0x1e8de4(0x19e)]();this[_0x1e8de4(0x1af)][_0x1e8de4(0x1e2)]({'ts':_0x3ffb24,'val':_0x1bbd02}),this[_0x1e8de4(0x1af)]=this['pressureBuffer'][_0x1e8de4(0x298)](_0x31f809=>_0x3ffb24-_0x31f809['ts']<0x1388);if(this['infrasoundLocked'])return;if(this['config']['infrasoundArmingId']){const _0x451d82=await this[_0x1e8de4(0x211)](this[_0x1e8de4(0x25a)][_0x1e8de4(0x2a7)]);if(_0x451d82&&!_0x451d82['val'])return;}const _0x26019a=this[_0x1e8de4(0x25a)][_0x1e8de4(0x299)]||0.04;if(Math['abs'](_0x1bbd02)>=_0x26019a){this[_0x1e8de4(0x274)][_0x1e8de4(0x2a5)]('[Infrasound]\x20ðŸš¨\x20ALARM\x20TRIGGERED!\x20Pressure\x20Wave:\x20'+_0x1bbd02+_0x1e8de4(0x1e7)+_0x26019a+')'),await this[_0x1e8de4(0x188)](_0x1e8de4(0x29a),{'val':!![],'ack':!![]});const _0x150e58=this[_0x1e8de4(0x19f)];_0x150e58?(this[_0x1e8de4(0x274)][_0x1e8de4(0x23f)](_0x1e8de4(0x28e)),this['triggerInfrasoundCorrelation'](_0x1bbd02,_0x1e8de4(0x216))):(this[_0x1e8de4(0x185)](_0x1bbd02,_0x1e8de4(0x1c9)),this[_0x1e8de4(0x21c)]('ðŸš¨\x20DRUCKWELLEN-ALARM!\x20StÃ¤rke:\x20'+_0x1bbd02+_0x1e8de4(0x18c))),this[_0x1e8de4(0x1b2)]=!![],setTimeout(()=>{const _0x309259=_0x1e8de4;this[_0x309259(0x1b2)]=![];},0x2710);}}async[a0_0x4486ae(0x185)](_0x4d6874,_0x46f85a='ALARM'){const _0x2599c2=a0_0x4486ae,_0x507b40=Date[_0x2599c2(0x19e)](),_0x2318da=this[_0x2599c2(0x25a)]['devices']||[];setTimeout(async()=>{const _0x2fcfde=_0x2599c2;let _0x950971=null,_0x2bcbe2=_0x2fcfde(0x191);const _0x4ce367=[],_0x168160=_0x2318da[_0x2fcfde(0x298)](_0x1106a0=>_0x1106a0[_0x2fcfde(0x189)]&&(_0x1106a0[_0x2fcfde(0x189)][_0x2fcfde(0x283)](_0x2fcfde(0x226))||_0x1106a0[_0x2fcfde(0x189)][_0x2fcfde(0x283)](_0x2fcfde(0x195))||_0x1106a0[_0x2fcfde(0x189)][_0x2fcfde(0x283)](_0x2fcfde(0x1cd))||_0x1106a0[_0x2fcfde(0x189)][_0x2fcfde(0x283)](_0x2fcfde(0x2ac)))||_0x1106a0[_0x2fcfde(0x1e1)]&&(_0x1106a0[_0x2fcfde(0x1e1)][_0x2fcfde(0x283)](_0x2fcfde(0x22f))||_0x1106a0['role']['includes'](_0x2fcfde(0x22d))));for(const _0x13fd11 of _0x168160){try{const _0x22e49c=await this[_0x2fcfde(0x211)](_0x13fd11['id']);if(_0x22e49c){if(_0x22e49c['ts']>=_0x507b40-0x7d0){_0x950971=_0x13fd11[_0x2fcfde(0x1c6)]||_0x13fd11['id'],_0x2bcbe2=_0x2fcfde(0x286)+_0x950971;break;}}}catch(_0x521086){}}const _0x2dfe21={'timestamp':_0x507b40,'pressure':_0x4d6874,'isMatch':!!_0x950971,'explanation':_0x2bcbe2,'type':_0x46f85a};await this[_0x2fcfde(0x2ab)](_0x2dfe21),this[_0x2fcfde(0x274)][_0x2fcfde(0x23f)](_0x2fcfde(0x2bb)+(!!_0x950971?_0x2fcfde(0x1f9):'ANOMALY\x20(Real\x20Threat?)'));},0x1388);}async[a0_0x4486ae(0x1ab)](_0xc74876){const _0x59aa83=a0_0x4486ae,_0x202c40=Date[_0x59aa83(0x19e)](),_0x19abcc=_0xc74876[_0x59aa83(0x1c6)]||_0xc74876['id'][_0x59aa83(0x1df)]('.')[_0x59aa83(0x2ae)]();let _0x1ea2ce=0x0;setTimeout(async()=>{const _0x3d0061=_0x59aa83;this[_0x3d0061(0x1af)][_0x3d0061(0x1b3)](_0x2c151a=>{const _0x418c14=_0x3d0061;_0x2c151a['ts']>=_0x202c40-0xfa0&&_0x2c151a['ts']<=_0x202c40+0x3e8&&(Math['abs'](_0x2c151a[_0x418c14(0x28d)])>Math[_0x418c14(0x293)](_0x1ea2ce)&&(_0x1ea2ce=_0x2c151a[_0x418c14(0x28d)]));});const _0x2c6fd2=this['config'][_0x3d0061(0x299)]||0.04,_0x3ce637=Math[_0x3d0061(0x293)](_0x1ea2ce)>=_0x2c6fd2,_0x43012a={'timestamp':_0x202c40,'pressure':_0x1ea2ce,'isMatch':_0x3ce637,'explanation':'Fenster\x20geÃ¶ffnet:\x20'+_0x19abcc,'type':_0x3d0061(0x296)};await this[_0x3d0061(0x2ab)](_0x43012a),this[_0x3d0061(0x274)][_0x3d0061(0x2b6)](_0x3d0061(0x1da)+_0x19abcc+_0x3d0061(0x172)+_0x1ea2ce['toFixed'](0x4)+_0x3d0061(0x1fa)+_0x2c6fd2+')');},0x1f4);}async[a0_0x4486ae(0x2ab)](_0x5cbe3d){const _0x572186=a0_0x4486ae;try{const _0x9b6d0d=await this['getStateAsync'](_0x572186(0x257));let _0x17ade3=[];if(_0x9b6d0d&&_0x9b6d0d[_0x572186(0x28d)])_0x17ade3=JSON['parse'](_0x9b6d0d[_0x572186(0x28d)]);_0x17ade3['unshift'](_0x5cbe3d);if(_0x17ade3[_0x572186(0x275)]>0x14)_0x17ade3=_0x17ade3['slice'](0x0,0x14);await this[_0x572186(0x188)](_0x572186(0x257),{'val':JSON[_0x572186(0x1a4)](_0x17ade3),'ack':!![]});}catch(_0x7062f6){this[_0x572186(0x274)][_0x572186(0x26a)]('[Forensics]\x20Save\x20failed:\x20'+_0x7062f6[_0x572186(0x214)]);}}['sendNotification'](_0x51a8dd){const _0x2e1285=a0_0x4486ae;this[_0x2e1285(0x25a)]['notifyPushoverEnabled']&&this[_0x2e1285(0x25a)][_0x2e1285(0x201)]&&this[_0x2e1285(0x281)](this['config'][_0x2e1285(0x201)],'send',{'message':_0x51a8dd,'title':_0x2e1285(0x279),'priority':0x1}),this[_0x2e1285(0x25a)]['notifyTelegramEnabled']&&this[_0x2e1285(0x25a)]['notifyTelegramInstance']&&this['sendTo'](this['config'][_0x2e1285(0x212)],_0x2e1285(0x23e),{'text':_0x51a8dd});}}if(require['main']!==module)module['exports']=_0xb0786b=>new CogniLiving(_0xb0786b);else new CogniLiving();