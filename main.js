const a0_0x5322eb=a0_0x59d9;(function(_0xebd27b,_0x19c791){const _0x2e982e=a0_0x59d9,_0x12834b=_0xebd27b();while(!![]){try{const _0x38b994=parseInt(_0x2e982e(0x1cb))/0x1+-parseInt(_0x2e982e(0x2c7))/0x2+parseInt(_0x2e982e(0x2de))/0x3*(parseInt(_0x2e982e(0x1c2))/0x4)+parseInt(_0x2e982e(0x305))/0x5*(parseInt(_0x2e982e(0x1de))/0x6)+-parseInt(_0x2e982e(0x286))/0x7+-parseInt(_0x2e982e(0x2ce))/0x8+parseInt(_0x2e982e(0x322))/0x9;if(_0x38b994===_0x19c791)break;else _0x12834b['push'](_0x12834b['shift']());}catch(_0x2c8257){_0x12834b['push'](_0x12834b['shift']());}}}(a0_0x1538,0x46d20));const a0_0x2f5448=(function(){let _0x2f9e02=!![];return function(_0x3430e8,_0x417039){const _0x14429b=_0x2f9e02?function(){const _0x2e4eeb=a0_0x59d9;if(_0x417039){const _0x484e2e=_0x417039[_0x2e4eeb(0x37c)](_0x3430e8,arguments);return _0x417039=null,_0x484e2e;}}:function(){};return _0x2f9e02=![],_0x14429b;};}()),a0_0xb3155f=a0_0x2f5448(this,function(){const _0x3e10b5=a0_0x59d9;return a0_0xb3155f[_0x3e10b5(0x33d)]()[_0x3e10b5(0x2c3)](_0x3e10b5(0x28f))[_0x3e10b5(0x33d)]()[_0x3e10b5(0x2d7)](a0_0xb3155f)['search'](_0x3e10b5(0x28f));});a0_0xb3155f();'use strict';const utils=require(a0_0x5322eb(0x387)),{GoogleGenerativeAI}=require(a0_0x5322eb(0x1d6)),schedule=require(a0_0x5322eb(0x1bb)),{spawn,exec}=require(a0_0x5322eb(0x278)),path=require(a0_0x5322eb(0x25c)),HISTORY_MAX_SIZE=0x32,RAW_LOG_MAX_SIZE=0x5dc,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL=a0_0x5322eb(0x2d6),LTM_SCHEDULE=a0_0x5322eb(0x30e),MODE_RESET_SCHEDULE=a0_0x5322eb(0x224),ANALYSIS_HISTORY_MAX_SIZE=0x64,EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,SEQUENCE_TIMEOUT_MS=0x5*0x3c*0x3e8,MAX_TRAINING_SET_SIZE=0x1f4,THERMO_LOG_SIZE=0x3e8,LTM_DP_RAW_LOG='LTM.rawEventLog',LTM_DP_DAILY_DIGESTS=a0_0x5322eb(0x2ba),LTM_DP_STATUS=a0_0x5322eb(0x226),LTM_DP_TRIGGER_DIGEST=a0_0x5322eb(0x1b0),LTM_DP_BASELINE_STATUS=a0_0x5322eb(0x364),LTM_DP_DRIFT_CHANNEL='LTM.driftAnalysis',LTM_DP_DRIFT_STATUS=a0_0x5322eb(0x2ed),LTM_DP_DRIFT_DETAILS='LTM.driftAnalysis.driftDetails',LTM_DP_DRIFT_LAST_CHECK=a0_0x5322eb(0x22d),SYSTEM_DP_MODE='system.mode',HARD_IGNORE_TERMS=[a0_0x5322eb(0x222),a0_0x5322eb(0x32b),a0_0x5322eb(0x39a),a0_0x5322eb(0x1dd),a0_0x5322eb(0x1ce),a0_0x5322eb(0x20c),a0_0x5322eb(0x398),a0_0x5322eb(0x1c4),a0_0x5322eb(0x38a),'fault',a0_0x5322eb(0x234),'direction',a0_0x5322eb(0x320),'config_pending',a0_0x5322eb(0x20b),'firmware',a0_0x5322eb(0x30a),a0_0x5322eb(0x277)],BAD_NAMES=[a0_0x5322eb(0x355),a0_0x5322eb(0x2a5),a0_0x5322eb(0x293),a0_0x5322eb(0x27b),a0_0x5322eb(0x2a4),'brightness','on',a0_0x5322eb(0x303),a0_0x5322eb(0x2f6),a0_0x5322eb(0x1f3),a0_0x5322eb(0x1ff),a0_0x5322eb(0x342),a0_0x5322eb(0x202),a0_0x5322eb(0x28e),a0_0x5322eb(0x264),a0_0x5322eb(0x1df),a0_0x5322eb(0x26b),a0_0x5322eb(0x3a1),a0_0x5322eb(0x1e6),a0_0x5322eb(0x1ef),a0_0x5322eb(0x321),a0_0x5322eb(0x27e),a0_0x5322eb(0x306),a0_0x5322eb(0x30f),a0_0x5322eb(0x255)],ADAPTER_BLACKLIST=[a0_0x5322eb(0x372),a0_0x5322eb(0x354),a0_0x5322eb(0x31c),a0_0x5322eb(0x2f3),a0_0x5322eb(0x26c),a0_0x5322eb(0x1f6),a0_0x5322eb(0x2aa),'flot.',a0_0x5322eb(0x1fc),'javascript.',a0_0x5322eb(0x334)],SYSTEM_MODES={'NORMAL':a0_0x5322eb(0x2dc),'VACATION':a0_0x5322eb(0x386),'PARTY':a0_0x5322eb(0x1ab),'GUEST':a0_0x5322eb(0x292)},AUTO_RESET_MODES=[SYSTEM_MODES[a0_0x5322eb(0x2e3)],SYSTEM_MODES[a0_0x5322eb(0x2db)]],PERSONA_MAPPING={'generic':a0_0x5322eb(0x28b),'senior_aal':a0_0x5322eb(0x33a),'family':a0_0x5322eb(0x242),'single_comfort':a0_0x5322eb(0x340),'security':a0_0x5322eb(0x2b5)},ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};let activeSequence=[],sequenceTimer=null;async function initZombies(_0x3c2721){const _0x28aa63=a0_0x5322eb;try{const _0x1299f3=['analysis.history_debug_00',_0x28aa63(0x361)];for(const _0x5a4366 of _0x1299f3){try{const _0x2cd914=await _0x3c2721[_0x28aa63(0x29d)](_0x5a4366);_0x2cd914&&await _0x3c2721[_0x28aa63(0x2cc)](_0x5a4366);}catch(_0x15f1be){}}}catch(_0x7ddd5a){}}async function initHistory(_0x25be45){const _0x212649=a0_0x5322eb;try{const _0x191bf1=await _0x25be45['getStateAsync'](_0x212649(0x2a0));_0x191bf1&&_0x191bf1['val']&&(_0x25be45['eventHistory']=JSON[_0x212649(0x2b9)](_0x191bf1[_0x212649(0x2c1)][_0x212649(0x33d)]()));}catch(_0x48f757){_0x25be45['eventHistory']=[];}try{const _0x6aa36a=await _0x25be45[_0x212649(0x265)](_0x212649(0x295));if(_0x6aa36a&&_0x6aa36a['val'])_0x25be45[_0x212649(0x2f5)]=JSON[_0x212649(0x2b9)](_0x6aa36a[_0x212649(0x2c1)]['toString']());}catch(_0x16bc01){_0x25be45[_0x212649(0x2f5)]=[];}if(_0x25be45[_0x212649(0x27a)]&&_0x25be45['eventHistory'][_0x212649(0x1fe)]>0x0){_0x25be45[_0x212649(0x300)]['info'](_0x212649(0x37d)+_0x25be45[_0x212649(0x27a)][_0x212649(0x1fe)]+'\x20events)...');for(let _0x17f2e7=_0x25be45['eventHistory']['length']-0x1;_0x17f2e7>=0x0;_0x17f2e7--){const _0x178ba5=_0x25be45[_0x212649(0x27a)][_0x17f2e7];_0x178ba5&&_0x178ba5['id']!==undefined&&_0x178ba5[_0x212649(0x2a4)]!==undefined&&(_0x25be45[_0x212649(0x1f1)][_0x178ba5['id']]=_0x178ba5['value']);}}}async function initSystemConfig(_0x4356bc){const _0x5816c6=a0_0x5322eb;try{const _0x25adfd=await _0x4356bc[_0x5816c6(0x26f)]('system.config');_0x25adfd&&_0x25adfd[_0x5816c6(0x244)]&&(_0x4356bc['systemConfig']={'latitude':_0x25adfd[_0x5816c6(0x244)]['latitude']||0x0,'longitude':_0x25adfd['common'][_0x5816c6(0x2cb)]||0x0,'city':_0x25adfd[_0x5816c6(0x244)][_0x5816c6(0x323)]||''});}catch(_0x401e7c){}}async function checkLicense(_0x2c2681,_0x202123){const _0xd4d33a=a0_0x5322eb;if(!_0x202123)return![];_0x2c2681[_0xd4d33a(0x20d)]=await getSystemUUID(_0x2c2681);if(_0x202123===_0xd4d33a(0x230)||_0x202123[_0xd4d33a(0x1f2)](_0xd4d33a(0x1b4)))return!![];return![];}async function getSystemUUID(_0x3c96c7){const _0x252b47=a0_0x5322eb;try{const _0x490dec=await _0x3c96c7[_0x252b47(0x26f)]('system.meta.uuid');if(_0x490dec&&_0x490dec['native']&&_0x490dec[_0x252b47(0x329)]['uuid'])return _0x490dec['native'][_0x252b47(0x2da)];return _0x252b47(0x377);}catch(_0x5e9098){return _0x252b47(0x330);}}async function createAllObjects(_0x3901d7){const _0x4c5acb=a0_0x5322eb;await checkSystemObjects(_0x3901d7),await _0x3901d7[_0x4c5acb(0x1ee)](_0x4c5acb(0x1d3),{'type':'state','common':{'name':_0x4c5acb(0x271),'type':'string','role':'text','read':!![],'write':![],'def':''},'native':{}}),await _0x3901d7[_0x4c5acb(0x1ee)]('events.lastEvent',{'type':_0x4c5acb(0x293),'common':{'name':_0x4c5acb(0x2f2),'type':'string','role':_0x4c5acb(0x373),'read':!![],'write':![]},'native':{}}),await _0x3901d7[_0x4c5acb(0x1ee)](_0x4c5acb(0x2a0),{'type':'state','common':{'name':'Event\x20History','type':_0x4c5acb(0x276),'role':_0x4c5acb(0x373),'read':!![],'write':![]},'native':{}}),await _0x3901d7[_0x4c5acb(0x1ee)](_0x4c5acb(0x272),{'type':'state','common':{'name':'Trigger\x20Analysis','type':_0x4c5acb(0x381),'role':_0x4c5acb(0x2e5),'read':!![],'write':!![],'def':![]},'native':{}}),await _0x3901d7[_0x4c5acb(0x1ee)](_0x4c5acb(0x356),{'type':_0x4c5acb(0x293),'common':{'name':_0x4c5acb(0x257),'type':'boolean','role':_0x4c5acb(0x2e5),'read':!![],'write':!![],'def':![]},'native':{}}),await _0x3901d7[_0x4c5acb(0x1ee)](_0x4c5acb(0x351),{'type':_0x4c5acb(0x293),'common':{'name':'Last\x20Result','type':_0x4c5acb(0x276),'role':_0x4c5acb(0x373),'read':!![],'write':![]},'native':{}}),await _0x3901d7[_0x4c5acb(0x1ee)](_0x4c5acb(0x283),{'type':_0x4c5acb(0x293),'common':{'name':_0x4c5acb(0x241),'type':_0x4c5acb(0x381),'role':'indicator.alarm','read':!![],'write':![],'def':![]},'native':{}}),await _0x3901d7[_0x4c5acb(0x1ee)](_0x4c5acb(0x23a),{'type':_0x4c5acb(0x293),'common':{'name':_0x4c5acb(0x21e),'type':_0x4c5acb(0x381),'role':_0x4c5acb(0x388),'read':!![],'write':![],'def':![]},'native':{}}),await _0x3901d7[_0x4c5acb(0x1ee)](_0x4c5acb(0x1c3),{'type':_0x4c5acb(0x293),'common':{'name':_0x4c5acb(0x231),'type':'string','role':_0x4c5acb(0x2ad),'read':!![],'write':![]},'native':{}}),await _0x3901d7[_0x4c5acb(0x1ee)](_0x4c5acb(0x371),{'type':_0x4c5acb(0x293),'common':{'name':_0x4c5acb(0x2df),'type':_0x4c5acb(0x276),'role':_0x4c5acb(0x1c5),'read':!![],'write':![]},'native':{}}),await _0x3901d7[_0x4c5acb(0x1ee)](_0x4c5acb(0x359),{'type':'state','common':{'name':_0x4c5acb(0x347),'type':_0x4c5acb(0x276),'role':'state','read':!![],'write':![],'def':'N/A'},'native':{}}),await _0x3901d7[_0x4c5acb(0x1ee)]('analysis.comfortSummary',{'type':_0x4c5acb(0x293),'common':{'name':_0x4c5acb(0x310),'type':_0x4c5acb(0x276),'role':_0x4c5acb(0x1c5),'read':!![],'write':![]},'native':{}}),await _0x3901d7[_0x4c5acb(0x1ee)]('analysis.comfortSuggestion',{'type':_0x4c5acb(0x293),'common':{'name':'Comfort\x20Suggestion','type':'string','role':_0x4c5acb(0x1c5),'read':!![],'write':![]},'native':{}}),await _0x3901d7[_0x4c5acb(0x2c0)]('analysis.automation',{'type':_0x4c5acb(0x26e),'common':{'name':_0x4c5acb(0x281)},'native':{}}),await _0x3901d7[_0x4c5acb(0x1ee)](_0x4c5acb(0x261),{'type':_0x4c5acb(0x293),'common':{'name':'Pattern\x20Detected','type':_0x4c5acb(0x381),'role':_0x4c5acb(0x31a),'read':!![],'write':![],'def':![]},'native':{}}),await _0x3901d7[_0x4c5acb(0x1ee)](_0x4c5acb(0x2f8),{'type':_0x4c5acb(0x293),'common':{'name':'Description','type':_0x4c5acb(0x276),'role':_0x4c5acb(0x1c5),'read':!![],'write':![]},'native':{}}),await _0x3901d7[_0x4c5acb(0x1ee)](_0x4c5acb(0x21a),{'type':_0x4c5acb(0x293),'common':{'name':_0x4c5acb(0x1b7),'type':_0x4c5acb(0x276),'role':_0x4c5acb(0x1c5),'read':!![],'write':![]},'native':{}}),await _0x3901d7[_0x4c5acb(0x1ee)](_0x4c5acb(0x301),{'type':'state','common':{'name':'Target\x20ID','type':_0x4c5acb(0x276),'role':_0x4c5acb(0x1c5),'read':!![],'write':![]},'native':{}}),await _0x3901d7[_0x4c5acb(0x1ee)]('analysis.automation.targetValue',{'type':'state','common':{'name':_0x4c5acb(0x24c),'type':'string','role':_0x4c5acb(0x1c5),'read':!![],'write':![]},'native':{}}),await _0x3901d7['setObjectNotExistsAsync'](_0x4c5acb(0x394),{'type':'state','common':{'name':_0x4c5acb(0x2a9),'type':'boolean','role':'switch','read':!![],'write':!![],'def':![]},'native':{}}),await _0x3901d7[_0x4c5acb(0x1ee)]('analysis.automation.triggerAction',{'type':_0x4c5acb(0x293),'common':{'name':_0x4c5acb(0x2e4),'type':'boolean','role':_0x4c5acb(0x2e5),'read':!![],'write':!![],'def':![]},'native':{}}),await _0x3901d7['setObjectNotExistsAsync'](_0x4c5acb(0x295),{'type':'state','common':{'name':'Logbook','type':_0x4c5acb(0x276),'role':_0x4c5acb(0x373),'read':!![],'write':![],'def':'[]'},'native':{}}),await _0x3901d7[_0x4c5acb(0x1ee)](_0x4c5acb(0x338),{'type':_0x4c5acb(0x293),'common':{'name':_0x4c5acb(0x2b1),'type':_0x4c5acb(0x276),'role':_0x4c5acb(0x373),'read':!![],'write':![],'def':'[]'},'native':{}}),await _0x3901d7['extendObjectAsync'](_0x4c5acb(0x229),{'type':_0x4c5acb(0x26e),'common':{'name':_0x4c5acb(0x298)},'native':{}}),await _0x3901d7['setObjectNotExistsAsync']('analysis.health.sleepScore',{'type':_0x4c5acb(0x293),'common':{'name':'Sleep\x20Score\x20(0-100)','type':_0x4c5acb(0x299),'role':_0x4c5acb(0x24b),'read':!![],'write':![],'def':0x0},'native':{}}),await _0x3901d7[_0x4c5acb(0x1ee)](_0x4c5acb(0x1d7),{'type':_0x4c5acb(0x293),'common':{'name':_0x4c5acb(0x378),'type':_0x4c5acb(0x276),'role':'text','read':!![],'write':![],'def':_0x4c5acb(0x263)},'native':{}}),await _0x3901d7[_0x4c5acb(0x1ee)](_0x4c5acb(0x2a8),{'type':'state','common':{'name':_0x4c5acb(0x2e6),'type':_0x4c5acb(0x276),'role':_0x4c5acb(0x1c5),'read':!![],'write':![],'def':''},'native':{}}),await _0x3901d7[_0x4c5acb(0x1ee)](_0x4c5acb(0x313),{'type':_0x4c5acb(0x293),'common':{'name':_0x4c5acb(0x384),'type':_0x4c5acb(0x276),'role':_0x4c5acb(0x1c5),'read':!![],'write':![],'def':'N/A'},'native':{}}),await _0x3901d7[_0x4c5acb(0x1ee)](_0x4c5acb(0x1b1),{'type':'state','common':{'name':_0x4c5acb(0x2af),'type':_0x4c5acb(0x299),'role':'value','read':!![],'write':![],'def':0x0},'native':{}}),await _0x3901d7['extendObjectAsync'](_0x4c5acb(0x39e),{'type':'channel','common':{'name':_0x4c5acb(0x2e1)},'native':{}}),await _0x3901d7[_0x4c5acb(0x1ee)]('LTM.trainingData.sequences',{'type':_0x4c5acb(0x293),'common':{'name':_0x4c5acb(0x284),'type':_0x4c5acb(0x276),'role':_0x4c5acb(0x373),'read':!![],'write':![],'def':'[]','desc':_0x4c5acb(0x393)},'native':{}}),await _0x3901d7[_0x4c5acb(0x1ee)](_0x4c5acb(0x279),{'type':_0x4c5acb(0x293),'common':{'name':'Thermodynamic\x20Data\x20Points','type':_0x4c5acb(0x276),'role':_0x4c5acb(0x373),'read':!![],'write':![],'def':'[]','desc':_0x4c5acb(0x309)},'native':{}}),await checkLtmObjects(_0x3901d7),await checkLtmDriftObjects(_0x3901d7);}async function checkSystemObjects(_0x2af6c4){const _0x4e59df=a0_0x5322eb;await _0x2af6c4[_0x4e59df(0x2c0)](_0x4e59df(0x214),{'type':_0x4e59df(0x26e),'common':{'name':_0x4e59df(0x1f9)},'native':{}}),await _0x2af6c4[_0x4e59df(0x2c0)](SYSTEM_DP_MODE,{'type':_0x4e59df(0x293),'common':{'name':'System\x20Mode','type':'string','role':_0x4e59df(0x293),'read':!![],'write':!![],'def':SYSTEM_MODES[_0x4e59df(0x2b0)],'states':{[SYSTEM_MODES[_0x4e59df(0x2b0)]]:_0x4e59df(0x396),[SYSTEM_MODES[_0x4e59df(0x395)]]:_0x4e59df(0x2c5),[SYSTEM_MODES[_0x4e59df(0x2e3)]]:_0x4e59df(0x289),[SYSTEM_MODES[_0x4e59df(0x2db)]]:'Gast'}},'native':{}});}async function checkLtmObjects(_0x15d4d7){const _0x2e472e=a0_0x5322eb;await _0x15d4d7[_0x2e472e(0x2c0)](_0x2e472e(0x217),{'type':'channel','common':{'name':_0x2e472e(0x217)},'native':{}}),await _0x15d4d7[_0x2e472e(0x2c0)](LTM_DP_RAW_LOG,{'type':_0x2e472e(0x293),'common':{'name':_0x2e472e(0x328),'type':'string','role':_0x2e472e(0x373),'read':!![],'write':![]},'native':{}}),await _0x15d4d7[_0x2e472e(0x2c0)](LTM_DP_DAILY_DIGESTS,{'type':_0x2e472e(0x293),'common':{'name':_0x2e472e(0x211),'type':_0x2e472e(0x276),'role':'json','read':!![],'write':![]},'native':{}}),await _0x15d4d7[_0x2e472e(0x2c0)](LTM_DP_STATUS,{'type':_0x2e472e(0x293),'common':{'name':_0x2e472e(0x34d),'type':'string','role':_0x2e472e(0x1c5),'read':!![],'write':![]},'native':{}}),await _0x15d4d7[_0x2e472e(0x2c0)](LTM_DP_TRIGGER_DIGEST,{'type':_0x2e472e(0x293),'common':{'name':_0x2e472e(0x23d),'type':'boolean','role':_0x2e472e(0x2e5),'read':!![],'write':!![],'def':![]},'native':{}}),await _0x15d4d7[_0x2e472e(0x2c0)](LTM_DP_BASELINE_STATUS,{'type':_0x2e472e(0x293),'common':{'name':'Baseline\x20Status','type':_0x2e472e(0x276),'role':_0x2e472e(0x1c5),'read':!![],'write':![]},'native':{}});}async function checkLtmDriftObjects(_0x1b8e98){const _0x1ee585=a0_0x5322eb;await _0x1b8e98['extendObjectAsync'](LTM_DP_DRIFT_CHANNEL,{'type':'channel','common':{'name':_0x1ee585(0x22c)},'native':{}}),await _0x1b8e98[_0x1ee585(0x2c0)](LTM_DP_DRIFT_STATUS,{'type':_0x1ee585(0x293),'common':{'name':_0x1ee585(0x34a),'type':'string','role':_0x1ee585(0x293),'read':!![],'write':![],'def':_0x1ee585(0x1ad)},'native':{}}),await _0x1b8e98[_0x1ee585(0x2c0)](LTM_DP_DRIFT_DETAILS,{'type':_0x1ee585(0x293),'common':{'name':_0x1ee585(0x28c),'type':_0x1ee585(0x276),'role':_0x1ee585(0x1c5),'read':!![],'write':![]},'native':{}}),await _0x1b8e98['extendObjectAsync'](LTM_DP_DRIFT_LAST_CHECK,{'type':_0x1ee585(0x293),'common':{'name':'Last\x20Check','type':_0x1ee585(0x299),'role':_0x1ee585(0x1be),'read':!![],'write':![]},'native':{}});}async function loadSystemMode(_0xf9ccf4){const _0x828b84=a0_0x5322eb;try{const _0x58d147=await _0xf9ccf4[_0x828b84(0x265)](SYSTEM_DP_MODE);_0x58d147&&_0x58d147[_0x828b84(0x2c1)]&&Object[_0x828b84(0x312)](SYSTEM_MODES)['includes'](_0x58d147[_0x828b84(0x2c1)])?_0xf9ccf4[_0x828b84(0x280)]=_0x58d147[_0x828b84(0x2c1)]:(_0xf9ccf4['currentSystemMode']=SYSTEM_MODES['NORMAL'],await _0xf9ccf4[_0x828b84(0x38d)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES['NORMAL'],'ack':!![]}));}catch(_0x59b1bb){_0xf9ccf4[_0x828b84(0x280)]=SYSTEM_MODES['NORMAL'];}}async function loadRawEventLog(_0x3407dc){const _0x29cc47=a0_0x5322eb;try{const _0x67eeb5=await _0x3407dc[_0x29cc47(0x265)](LTM_DP_RAW_LOG);if(_0x67eeb5&&_0x67eeb5[_0x29cc47(0x2c1)])_0x3407dc[_0x29cc47(0x273)]=JSON['parse'](_0x67eeb5[_0x29cc47(0x2c1)]);}catch(_0x1200c4){_0x3407dc[_0x29cc47(0x273)]=[];}}async function saveRawEventLog(_0x48eb1d){const _0x3e7c91=a0_0x5322eb;_0x48eb1d['rawEventLog'][_0x3e7c91(0x1fe)]>RAW_LOG_MAX_SIZE&&_0x48eb1d['rawEventLog'][_0x3e7c91(0x260)](0x0,_0x48eb1d['rawEventLog'][_0x3e7c91(0x1fe)]-RAW_LOG_MAX_SIZE),await _0x48eb1d[_0x3e7c91(0x38d)](LTM_DP_RAW_LOG,{'val':JSON['stringify'](_0x48eb1d[_0x3e7c91(0x273)]),'ack':!![]});}async function loadDailyDigests(_0x3d449c){const _0x3432c0=a0_0x5322eb;try{const _0x1a734c=await _0x3d449c[_0x3432c0(0x265)](LTM_DP_DAILY_DIGESTS);if(_0x1a734c&&_0x1a734c[_0x3432c0(0x2c1)])_0x3d449c['dailyDigests']=JSON[_0x3432c0(0x2b9)](_0x1a734c['val']);}catch(_0x1e2205){_0x3d449c['dailyDigests']=[];}await updateBaselineStatus(_0x3d449c);}async function saveDailyDigests(_0x335319,_0x495934=!![]){const _0x3f46bc=a0_0x5322eb,_0xa63584=_0x335319[_0x3f46bc(0x252)][_0x3f46bc(0x246)]||0x3c;_0x335319[_0x3f46bc(0x37a)][_0x3f46bc(0x1fe)]>_0xa63584&&_0x335319[_0x3f46bc(0x37a)][_0x3f46bc(0x260)](0x0,_0x335319[_0x3f46bc(0x37a)][_0x3f46bc(0x1fe)]-_0xa63584);await _0x335319[_0x3f46bc(0x38d)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x3f46bc(0x331)](_0x335319['dailyDigests']),'ack':!![]});if(_0x495934)await updateBaselineStatus(_0x335319);}async function updateAnalysisHistory(_0x12a924,_0x48cc3c){const _0x2a215a=a0_0x5322eb;_0x12a924[_0x2a215a(0x2f5)]['unshift'](_0x48cc3c);if(_0x12a924['analysisHistory'][_0x2a215a(0x1fe)]>ANALYSIS_HISTORY_MAX_SIZE)_0x12a924[_0x2a215a(0x2f5)][_0x2a215a(0x2fb)]();await _0x12a924[_0x2a215a(0x38d)](_0x2a215a(0x295),{'val':JSON[_0x2a215a(0x331)](_0x12a924['analysisHistory']),'ack':!![]});}async function updateBaselineStatus(_0x18258e){const _0x220b78=a0_0x5322eb;if(!_0x18258e['isProVersion']){await _0x18258e[_0x220b78(0x38d)](LTM_DP_BASELINE_STATUS,{'val':_0x220b78(0x1ec),'ack':!![]});return;}const _0x54fda2=_0x18258e[_0x220b78(0x37a)][_0x220b78(0x1fe)]>=(_0x18258e[_0x220b78(0x252)][_0x220b78(0x32d)]||0x7)?_0x220b78(0x2b2)+_0x18258e['dailyDigests'][_0x220b78(0x1fe)]+_0x220b78(0x1bf):_0x220b78(0x2c6)+_0x18258e['dailyDigests'][_0x220b78(0x1fe)]+'/'+(_0x18258e[_0x220b78(0x252)][_0x220b78(0x32d)]||0x7)+')';await _0x18258e[_0x220b78(0x38d)](LTM_DP_BASELINE_STATUS,{'val':_0x54fda2,'ack':!![]});}async function initSensorSubscriptions(_0x38f074){const _0x43f674=a0_0x5322eb,_0x2f4399=_0x38f074[_0x43f674(0x252)][_0x43f674(0x30b)];if(_0x2f4399&&_0x2f4399[_0x43f674(0x1fe)]>0x0){_0x38f074[_0x43f674(0x300)][_0x43f674(0x1cd)](_0x43f674(0x31e)+_0x2f4399[_0x43f674(0x1fe)]+_0x43f674(0x2c8));for(const _0x4fff0c of _0x2f4399){if(_0x4fff0c['id']){await _0x38f074[_0x43f674(0x213)](_0x4fff0c['id']);try{const _0x5d0c22=await _0x38f074['getForeignStateAsync'](_0x4fff0c['id']);if(_0x5d0c22)_0x38f074[_0x43f674(0x1f1)][_0x4fff0c['id']]=_0x5d0c22[_0x43f674(0x2c1)];}catch(_0x2fe083){}}}}}async function initPresenceSubscriptions(_0x18d0ad){const _0x434ebe=a0_0x5322eb,_0x3d6d85=_0x18d0ad[_0x434ebe(0x252)][_0x434ebe(0x239)]||[];if(_0x3d6d85[_0x434ebe(0x1fe)]>0x0){_0x18d0ad[_0x434ebe(0x300)][_0x434ebe(0x1cd)](_0x434ebe(0x31e)+_0x3d6d85[_0x434ebe(0x1fe)]+_0x434ebe(0x22e));for(const _0x2c5325 of _0x3d6d85){await _0x18d0ad[_0x434ebe(0x213)](_0x2c5325);}try{await checkWifiPresence(_0x18d0ad);}catch(_0x25d25d){}}}async function getWeatherContext(_0x592e2b){const _0x1dda64=a0_0x5322eb;try{if(!_0x592e2b['config'][_0x1dda64(0x38b)])return _0x1dda64(0x1c0);let _0x314ed8='';const _0x3d4722=_0x592e2b['config'][_0x1dda64(0x248)];if(_0x3d4722)try{if(_0x3d4722[_0x1dda64(0x266)](_0x1dda64(0x254))){const _0x3d3e4d=await _0x592e2b[_0x1dda64(0x2f1)](_0x3d4722+_0x1dda64(0x349));if(_0x3d3e4d&&_0x3d3e4d[_0x1dda64(0x2c1)])_0x314ed8=_0x3d3e4d[_0x1dda64(0x2c1)];}else{if(_0x3d4722[_0x1dda64(0x266)]('daswetter')){const _0xaac5c8=await _0x592e2b[_0x1dda64(0x2f1)](_0x3d4722+_0x1dda64(0x1d1));if(_0xaac5c8&&_0xaac5c8['val'])_0x314ed8=_0xaac5c8[_0x1dda64(0x2c1)];}else{if(_0x3d4722['includes'](_0x1dda64(0x1b6))){const _0x533bca=await _0x592e2b[_0x1dda64(0x2f1)](_0x3d4722+_0x1dda64(0x2d9));if(_0x533bca&&_0x533bca[_0x1dda64(0x2c1)])_0x314ed8=_0x533bca[_0x1dda64(0x2c1)];}}}}catch(_0x54402f){}if(!_0x314ed8){const _0x107d74=['accuweather.0',_0x1dda64(0x2b7),'weatherunderground.0',_0x1dda64(0x335)];for(const _0x5d8af7 of _0x107d74){try{const _0xd650fc=await _0x592e2b[_0x1dda64(0x26f)](_0x5d8af7);if(_0xd650fc){if(_0x5d8af7[_0x1dda64(0x266)](_0x1dda64(0x254))){const _0x5dbb3b=await _0x592e2b['getForeignStateAsync'](_0x5d8af7+_0x1dda64(0x349));if(_0x5dbb3b&&_0x5dbb3b['val']){_0x314ed8=_0x5dbb3b['val'];break;}}}}catch(_0x3d9d3a){}}}return _0x314ed8?_0x1dda64(0x2a2)+_0x314ed8:'WETTER:\x20Keine\x20Daten\x20gefunden';}catch(_0x3ed0de){return'WETTER\x20ERROR:\x20'+_0x3ed0de['message'];}}async function getCalendarContext(_0x46f354){const _0x7859f0=a0_0x5322eb;try{if(!_0x46f354['config'][_0x7859f0(0x269)])return _0x7859f0(0x2fe);let _0x3daaf1=_0x46f354['config']['calendarInstance']||'ical.0',_0x59a1bc=_0x46f354[_0x7859f0(0x252)][_0x7859f0(0x379)]||[];if(typeof _0x59a1bc===_0x7859f0(0x276))_0x59a1bc=_0x59a1bc[_0x7859f0(0x31d)](',');try{const _0x3ec787=await _0x46f354[_0x7859f0(0x2f1)](_0x3daaf1+'.data.table');if(_0x3ec787&&_0x3ec787[_0x7859f0(0x2c1)]){let _0x228d5c=tryParse(_0x3ec787[_0x7859f0(0x2c1)]);if(_0x228d5c&&Array['isArray'](_0x228d5c)){if(_0x59a1bc['length']>0x0)_0x228d5c=_0x228d5c[_0x7859f0(0x357)](_0x4e832a=>_0x59a1bc[_0x7859f0(0x266)](_0x4e832a['_calName']||''));else return _0x7859f0(0x294);if(_0x228d5c[_0x7859f0(0x1fe)]>0x0){const _0x41692b=_0x228d5c[_0x7859f0(0x2dd)](0x0,0x3)[_0x7859f0(0x2cd)](_0xf5b2a6=>{const _0x5369af=_0x7859f0;let _0x4f6dd6=_0xf5b2a6[_0x5369af(0x1be)];if(_0xf5b2a6[_0x5369af(0x333)])_0x4f6dd6+='\x20'+_0xf5b2a6[_0x5369af(0x333)];return _0x4f6dd6+':\x20'+_0xf5b2a6['event']+'\x20('+_0xf5b2a6[_0x5369af(0x204)]+')';});return _0x7859f0(0x1ba)+_0x41692b[_0x7859f0(0x207)](_0x7859f0(0x325));}else return _0x7859f0(0x32f);}}}catch(_0x17c72d){_0x46f354['log'][_0x7859f0(0x39c)](_0x7859f0(0x26a)+_0x17c72d[_0x7859f0(0x39b)]);}return _0x7859f0(0x2d4);}catch(_0x30c27b){return _0x7859f0(0x358)+_0x30c27b[_0x7859f0(0x39b)];}}function a0_0x1538(){const _0x3d6bc3=['Gemini\x20Init\x20Error:\x20','Please\x20run\x20this\x20MANUALLY\x20in\x20the\x20console\x20(as\x20root/sudo):\x20apt\x20install\x20python3-pip','Correlation\x20between\x20Inside\x20Temp,\x20Outside\x20Temp\x20and\x20Time','reachable','devices','testNotification',').\x20Saving\x20to\x20Training\x20Data.','0\x203\x20*\x20*\x20*','actual_temperature','Comfort\x20Summary','telegram','values','analysis.health.trendDiagnosis','cogni-living','Vom\x20Benutzer\x20bestÃ¤tigt\x20(OK).','bewegung','isProVersion','triggerDailyDigest','Morning\x20Briefing\x20sent.','indicator','indexOf','info.','split','Subscribing\x20to\x20','communicate.request','stick_unreach','energy','1987191HistQE','city','inactivityThresholdHours','\x20|\x20','ðŸ\x20Python\x20Pong\x20received!\x20Latency\x20check\x20passed.','thermostat','Raw\x20Log','native','.communicate.request','scriptEnabled','Scheduling\x20Morning\x20Briefing\x20for\x20','minDaysForBaseline','briefingTime','KALENDER:\x20Keine\x20relevanten\x20Termine','uuid-error','stringify','[RECORDER]\x20Sequence\x20finished\x20(Steps:\x20','time','simple-api.','openweathermap.0','geminiModel','stderr','analysis.feedbackHistory','âš ï¸\x20Python\x20missing\x20dependencies.\x20Triggering\x20Auto-Install...','PRIORITÃ„T:\x20Gesundheit/AAL.','\x20(Length:\x20','forEach','toString','outdoorSensorId','heizung','Fokus\x20auf\x20Komfort.','window','blind','pythonProcess','weather','Guardian:\x20Not\x20enough\x20history\x20data\x20for\x20trend\x20analysis\x20yet.','fill','Deviation','python3\x20-m\x20pip\x20install\x20-r\x20\x22','.Summary.Current','Drift\x20Status','response','ðŸš¨\x20EMERGENCY','Processing\x20Status','Activity-Level','retry','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','analysis.lastResult','door','analysis.automation.targetValue','admin.','targetposition','analysis.triggerBriefing','filter','KALENDER\x20ERROR:\x20','analysis.deviationFromBaseline','custom','Drift\x20Sched\x20Error:\x20','klima','Gemini\x20AI\x20initialized.','exitGraceTimer','ðŸ“ž\x20RÃœCKRUF\x20BITTE!\x20Der\x20Bewohner\x20hat\x20den\x20RÃ¼ckruf-Button\x20gedrÃ¼ckt.','geminiApiKey','events.history_debug_00','subscribeStates','exports','LTM.baselineStatus','scheduleJob','âœ…\x20User\x20confirmed\x20ALARM\x20via\x20Telegram.\x20Resetting\x20system.','driftDetails','push','âœ…\x20PIP\x20bootstrapped\x20successfully.\x20Retrying\x20installation...','onMessage','write','LTM.trainingData.sequences','licenseKey','stdin','.\x20KONTEXT:\x20','KI-Modell\x20nicht\x20initialisiert','analysis.activitySummary','system.','json','ltmDriftCheckIntervalHours','submitFeedback','endsWith','uuid-not-found','Restlessness\x20Level','calendarSelection','dailyDigests','system.mode','apply','Restoring\x20sensor\x20cache\x20from\x20history\x20(','ANALYZE_TREND','name','Briefing\x20Error:\x20','boolean','modeResetJob','toLowerCase','Trend\x20Diagnosis\x20(Python)','baselineDrift','vacation','@iobroker/adapter-core','indicator.alarm.fire','getCalendarNames\x20Error:\x20','error','useWeather','ack','setStateAsync','tÃ¼r','[RECORDER]\x20Error\x20saving\x20sequence:\x20','catch','):\x20','generateContent','Array\x20of\x20completed\x20movement\x20paths\x20for\x20ML\x20training','analysis.automation.autoApply','VACATION','Normal','.\x20DATEN:\x20Schlaf\x20','connection','\x20for\x20interactive\x20buttons...','update','message','warn','[PYTHON\x20ERR]\x20','LTM.trainingData','cancel','some','temperature','[PYTHON]\x20Service\x20exited\x20with\x20code\x20','getHours','replace','unload','party','ready','N/A','activityLevel','targetId','LTM.triggerDailyDigest','analysis.health.trendValue','analysis.automation.triggerAction','ðŸŒ…\x20Daily\x20Briefing:\x0a','PRO-','ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','openweathermap','Action','getTime','dismissAutomation','KALENDER:\x20','node-schedule','Sending\x20notification:\x20\x22','Unknown','date','\x20Tage)','Wetter:\x20Deaktiviert','command','2740RxsVvY','analysis.alertReason','maintenance','text','ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20','feedbackHistory','\x20*\x20*\x20*','stateChange','onReady','525610ahWZWQ','Error\x20checking\x20WiFi:\x20','info','lowbat','ðŸ“ž\x20RÃ¼ckruf\x20anfordern','find','.NextHours.Location_1.Day_1.current.symbol_desc','Kein\x20API\x20Key!','system.presenceWho','simulateButler','summary','@google/generative-ai','analysis.health.restlessness','âš ï¸\x20PIP\x20is\x20missing.\x20Attempting\x20self-healing\x20via\x20ensurepip\x20(User\x20Mode)...','selectedFunctionIds','sendToAsync','_score','notifyEmailEnabled','unreach','513234ydWdVY','presence','description','.forecast.current.temp','light','requirements.txt','contact','briefingEnabled','humidity','analysisTimer','âœ…\x20AUTO-FIX\x20SUCCESS.\x20Dependencies\x20installed.\x20Restarting\x20Service...','licht','siren','onStateChange','Deaktiviert\x20(Pro-Feature)',')\x20-\x20FUNCTIONS\x20FIRST\x20ARCHITECTURE','setObjectNotExistsAsync','power','enum','sensorLastValues','startsWith','position','toISOString','now','material.','online','No\x20module\x20named\x20pip','System\x20Status\x20&\x20Control','dimmer','User\x20dismissed\x20automation\x20proposal.','echarts.','lampe','length','shutter','getEnums','notifyEmailRecipient','cover','âŒ\x20CRITICAL:\x20Self-healing\x20failed.\x20The\x20system\x20is\x20locked\x20down.','_calName','Error\x20launching\x20Python\x20service:\x20','prÃ¤senz','join','BUTLER\x20Execution\x20Error:\x20','enum.functions.*','Invalid\x20JSON\x20from\x20Python:\x20','dutycycle','rssi','systemUUID','\x27\x20not\x20in\x20allowed\x20list)','main','notifyPushoverInstance','Daily\x20Digests','targetValue','subscribeForeignStatesAsync','system','briefingJob','exitTimer','LTM','fenster','genAI','analysis.automation.suggestedAction','toLocaleString','Briefing\x20Sched\x20Error:\x20','N/A\x20(Learning)','AI\x20Emergency\x20Status','Guardian:\x20Sending\x20','Skipped\x20(No\x20AI\x20or\x20Data)','type','scriptProblem','setState','0\x204\x20*\x20*\x20*','health','LTM.processingStatus','sort','expire','analysis.health','details','setHours','Drift\x20Analysis','LTM.driftAnalysis.lastCheck','\x20presence\x20devices...','inactivityMonitoringEnabled','TEST-PRO-KEY','Alert\x20Reason','âŒ\x20AUTO-FIX\x20FAILED.\x20Please\x20check\x20permissions.','[RESULT]','working','ltmJob','service.py','ðŸ§ª\x20Simulating\x20Butler\x20Proposal:\x20','Could\x20not\x20kill\x20Python\x20process:\x20','presenceDevices','analysis.isEmergency','.NextHours.Location_1.Day_1.current.temp_value','notifyEmailInstance','Trigger\x20Digest','notifyTelegramEnabled','data','âœ…\x20SUCCESS.\x20Dependencies\x20installed.\x20Restarting\x20Service...','AI\x20Alert\x20Status','Fokus\x20auf\x20Familienroutinen.','ðŸ“ž\x20User\x20requested\x20CALL\x20via\x20Telegram!','common','python3','ltmLtbWindowDays','substring','weatherInstance','aiPersona','ltmStbWindowDays','value.health','Target\x20Value','âœ…\x20Alarm\x20quittiert.\x20System\x20normal.','getCalendarNames','sendTo','.forecast.current.temperature','.\x20ZUSATZ:\x20','config','send','accuweather','set_temperature','schalter','Trigger\x20Briefing\x20(Test)','round','automation.triggerAction','/100,\x20AktivitÃ¤t\x20seit\x2004:00:\x20','timestamp','path','object','HARD\x20WATCHDOG:\x20No\x20sensor\x20activity\x20detected\x20for\x20','[TEST]\x20','splice','analysis.automation.patternDetected','temp','none','motion','getStateAsync','includes','onUnload','isPresent','useCalendar','Error\x20reading\x20calendar\x20table:\x20','occupancy','history.','LTM\x20Sched\x20Error:\x20','channel','getForeignObjectAsync','system.isPresent','Who\x20is\x20present?','analysis.trigger','rawEventLog','âŒ\x20Installation\x20failed\x20even\x20after\x20bootstrap:\x20','COGNI_REQUEST_CALL','string','link_quality','child_process','LTM.trainingData.thermodynamics','eventHistory','level','python_service','dependencyInstallInProgress','setpoint','\x20=\x20','currentSystemMode','Automation\x20Proposals','Feedback\x20saved:\x20','analysis.isAlert','Recorded\x20Motion\x20Sequences','\x20(Value\x20is\x20falsy:\x20','3857630EgwUZk','No\x20module\x20named','\x22\x20--break-system-packages\x20--user','Party','getForeignObjectsAsync','Analysiere\x20ausgewogen.','Drift\x20Details','ðŸ\x20Stopping\x20Python\x20Sidecar...','status','(((.+)+)+)+$','stdout','loc','guest','state','KALENDER:\x20Keine\x20Kalender\x20ausgewÃ¤hlt\x20(Bitte\x20in\x20Settings\x20konfigurieren)','analysis.analysisHistory','lastIndexOf','doors','Health\x20&\x20Sleep\x20Analysis','number','livingContext','notifyPushoverEnabled','from','getObjectAsync','Reset\x20Sched\x20Error:\x20','toFixed','events.history','\x20hours.\x20Potential\x20incapacitation.','WETTER:\x20','[RECORDER\x20DEBUG]\x20Ignored\x20Event\x20','value','currentposition','[RECORDER]\x20Discarding\x20short\x20sequence\x20(Length:\x20','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','analysis.health.notes','Auto\x20Apply\x20Rule','icons-mfd.','getGenerativeModel','notifyTelegramInstance','text.alarm','TREND_RESULT','Trend\x20Value\x20(%)','NORMAL','Feedback\x20Log','Aktiv\x20(','\x20min).','trim','PRIORITÃ„T:\x20Sicherheit.','Error\x20reading\x20outdoor\x20sensor\x20','daswetter.0','No\x20instance','parse','LTM.dailyDigests','writable','isArray','members','ðŸ\x20Starting\x20Python\x20Sidecar:\x20','lastAlertState','extendObjectAsync','val','unknown','search','Started\x20at\x20','Urlaub','Lernphase\x20(','257396ywdnps','\x20sensors...','isGracePeriodActive','.Current.Temperature','longitude','delObjectAsync','map','2210664dCHAUr','debug','PONG','lights','bind','Starting\x20Autopilot\x20(','KALENDER:\x20Keine\x20Daten','\x0aSTB:\x20','models/gemini-flash-latest','constructor','detected','.forecast.current.state','uuid','GUEST','normal','slice','1065Issdwu','Activity\x20Summary','getMonth','Training\x20Data\x20Sets','Error:\x20','PARTY','Trigger\x20Action\x20Now','button','Health\x20Notes','shift','sound','callback','[PYTHON]\x20','sleepScore','lock','LTM.driftAnalysis.baselineDrift','Adapter','driftAnalysisTimer','lastCheck','getForeignStateAsync','Last\x20raw\x20event','vis.','SIMULATION:\x20Test-Vorschlag\x20fÃ¼r\x20','analysisHistory','switch','python3\x20-m\x20ensurepip\x20--default-pip\x20--user','analysis.automation.description','COGNI_CONFIRM_OK','getOverviewData','pop','analysisInterval','instance','Kalender:\x20Deaktiviert','notifyPushoverRecipient','log','analysis.automation.targetId','location','off','getDate','15piiTwW','valve'];a0_0x1538=function(){return _0x3d6bc3;};return a0_0x1538();}async function getCalendarNames(_0x519df4,_0x12f5bc){const _0x5dc518=a0_0x5322eb;try{const _0x340ade=await _0x519df4[_0x5dc518(0x2f1)](_0x12f5bc+'.data.table');if(_0x340ade&&_0x340ade['val']){const _0x160e67=tryParse(_0x340ade[_0x5dc518(0x2c1)]);if(_0x160e67&&Array[_0x5dc518(0x2bc)](_0x160e67)){const _0x140899=[...new Set(_0x160e67[_0x5dc518(0x2cd)](_0x5a12ae=>_0x5a12ae[_0x5dc518(0x204)])[_0x5dc518(0x357)](Boolean))];return _0x140899[_0x5dc518(0x227)]();}}return[];}catch(_0xa69ec7){return _0x519df4[_0x5dc518(0x300)][_0x5dc518(0x38a)](_0x5dc518(0x389)+_0xa69ec7[_0x5dc518(0x39b)]),[];}}async function checkWifiPresence(_0x308337){const _0x201ccd=a0_0x5322eb;try{const _0x1c1938=_0x308337[_0x201ccd(0x252)]['presenceDevices']||[];let _0x1e61a9=![];const _0x2e0508=[];for(const _0x23066a of _0x1c1938){try{const _0x16677a=await _0x308337['getForeignStateAsync'](_0x23066a);if(_0x16677a&&(_0x16677a[_0x201ccd(0x2c1)]===!![]||_0x16677a[_0x201ccd(0x2c1)]===_0x201ccd(0x1f7)||_0x16677a[_0x201ccd(0x2c1)]===0x1)){_0x1e61a9=!![];const _0x9f986b=await _0x308337['getForeignObjectAsync'](_0x23066a);let _0x445dc3=_0x23066a;_0x9f986b&&_0x9f986b[_0x201ccd(0x244)]&&_0x9f986b[_0x201ccd(0x244)]['name']&&(_0x445dc3=typeof _0x9f986b[_0x201ccd(0x244)][_0x201ccd(0x37f)]===_0x201ccd(0x25d)?_0x9f986b[_0x201ccd(0x244)]['name']['de']||_0x9f986b['common'][_0x201ccd(0x37f)]['en']:_0x9f986b[_0x201ccd(0x244)][_0x201ccd(0x37f)]),_0x2e0508[_0x201ccd(0x368)](_0x445dc3);}}catch(_0x3321e0){}}return await _0x308337[_0x201ccd(0x38d)](_0x201ccd(0x1d3),{'val':_0x2e0508[_0x201ccd(0x207)](',\x20'),'ack':!![]}),_0x1e61a9&&(_0x308337[_0x201ccd(0x216)]&&(_0x308337[_0x201ccd(0x300)]['info']('WiFi\x20Presence\x20detected\x20->\x20Aborting\x20Exit\x20Timer.\x20User\x20is\x20present.'),abortExitTimer(_0x308337)),!_0x308337['isPresent']&&_0x308337[_0x201ccd(0x280)]===SYSTEM_MODES[_0x201ccd(0x2b0)]&&await setPresence(_0x308337,!![])),_0x1e61a9;}catch(_0x5b3e67){return _0x308337['log'][_0x201ccd(0x38a)](_0x201ccd(0x1cc)+_0x5b3e67[_0x201ccd(0x39b)]),![];}}function startExitTimer(_0x16952e){const _0x1a2475=a0_0x5322eb;abortExitTimer(_0x16952e),_0x16952e[_0x1a2475(0x2c9)]=!![],_0x16952e[_0x1a2475(0x35e)]=setTimeout(()=>{const _0x12b0cb=_0x1a2475;_0x16952e[_0x12b0cb(0x2c9)]=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),_0x16952e[_0x1a2475(0x216)]=setTimeout(()=>{const _0x535912=_0x1a2475;setPresence(_0x16952e,![]),_0x16952e[_0x535912(0x216)]=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}function abortExitTimer(_0x422488){const _0x3fd78a=a0_0x5322eb;if(_0x422488[_0x3fd78a(0x216)])clearTimeout(_0x422488[_0x3fd78a(0x216)]);if(_0x422488[_0x3fd78a(0x35e)])clearTimeout(_0x422488[_0x3fd78a(0x35e)]);_0x422488[_0x3fd78a(0x216)]=null,_0x422488[_0x3fd78a(0x35e)]=null,_0x422488[_0x3fd78a(0x2c9)]=![];}async function setPresence(_0x382a16,_0x29d309){const _0x4f895f=a0_0x5322eb;if(_0x382a16[_0x4f895f(0x268)]===_0x29d309)return;_0x382a16['isPresent']=_0x29d309,await _0x382a16[_0x4f895f(0x38d)](_0x4f895f(0x270),{'val':_0x29d309,'ack':!![]});}async function saveFeedback(_0x1ea3ef,_0x1e17a6){const _0x1cc785=a0_0x5322eb;_0x1ea3ef[_0x1cc785(0x300)][_0x1cc785(0x1cd)](_0x1cc785(0x282)+JSON[_0x1cc785(0x331)](_0x1e17a6));}function a0_0x59d9(_0x4fb515,_0xa2f2a3){const _0x59f108=a0_0x1538();return a0_0x59d9=function(_0xb3155f,_0x2f5448){_0xb3155f=_0xb3155f-0x1a7;let _0x1538cc=_0x59f108[_0xb3155f];return _0x1538cc;},a0_0x59d9(_0x4fb515,_0xa2f2a3);}async function runBaselineDriftAnalysis(_0x169f09){const _0x2c16f7=a0_0x5322eb;if(!_0x169f09['isProVersion']||!_0x169f09[_0x2c16f7(0x336)])return;const _0x17eb35=_0x169f09[_0x2c16f7(0x252)]['ltmStbWindowDays']||0xe;if(_0x169f09[_0x2c16f7(0x37a)][_0x2c16f7(0x1fe)]<_0x17eb35+(_0x169f09['config'][_0x2c16f7(0x32d)]||0x7)){await _0x169f09[_0x2c16f7(0x38d)](LTM_DP_DRIFT_STATUS,{'val':_0x2c16f7(0x21d),'ack':!![]});return;}const _0xbb79f3=_0x169f09[_0x2c16f7(0x37a)][_0x2c16f7(0x2dd)](-_0x17eb35),_0x4e53be=_0x169f09['dailyDigests'][_0x2c16f7(0x2dd)](0x0,_0x169f09[_0x2c16f7(0x37a)][_0x2c16f7(0x1fe)]-_0x17eb35),_0x3a2c9f=_0x2c16f7(0x350)+JSON[_0x2c16f7(0x331)](_0x4e53be)+_0x2c16f7(0x2d5)+JSON[_0x2c16f7(0x331)](_0xbb79f3);try{const _0x34978d=await _0x169f09[_0x2c16f7(0x336)][_0x2c16f7(0x392)](_0x3a2c9f),_0x20dc6a=JSON[_0x2c16f7(0x2b9)](_0x34978d[_0x2c16f7(0x34b)][_0x2c16f7(0x1c5)]()[_0x2c16f7(0x1a9)](/```json|```/g,'')[_0x2c16f7(0x2b4)]());_0x20dc6a['baselineDrift']&&(await _0x169f09[_0x2c16f7(0x38d)](LTM_DP_DRIFT_STATUS,{'val':_0x20dc6a[_0x2c16f7(0x385)],'ack':!![]}),await _0x169f09['setStateAsync'](LTM_DP_DRIFT_DETAILS,{'val':_0x20dc6a[_0x2c16f7(0x367)],'ack':!![]}),await _0x169f09[_0x2c16f7(0x38d)](LTM_DP_DRIFT_LAST_CHECK,{'val':Date[_0x2c16f7(0x1f5)](),'ack':!![]}));}catch(_0x286af8){}}function setupLtmScheduler(_0x347994){const _0x48a70a=a0_0x5322eb;try{if(_0x347994[_0x48a70a(0x235)])_0x347994['ltmJob'][_0x48a70a(0x39f)]();if(!_0x347994[_0x48a70a(0x317)]){_0x347994[_0x48a70a(0x38d)](LTM_DP_STATUS,{'val':_0x48a70a(0x1ec),'ack':!![]});return;}_0x347994[_0x48a70a(0x235)]=schedule[_0x48a70a(0x365)](LTM_SCHEDULE,()=>createDailyDigest(_0x347994));}catch(_0xbaf58){_0x347994[_0x48a70a(0x300)][_0x48a70a(0x38a)](_0x48a70a(0x26d)+_0xbaf58[_0x48a70a(0x39b)]);}}function setupModeResetScheduler(_0x4499eb){const _0x2f0445=a0_0x5322eb;try{if(_0x4499eb[_0x2f0445(0x382)])_0x4499eb[_0x2f0445(0x382)][_0x2f0445(0x39f)]();_0x4499eb[_0x2f0445(0x382)]=schedule[_0x2f0445(0x365)](MODE_RESET_SCHEDULE,async()=>{const _0x45f7c8=_0x2f0445;await loadSystemMode(_0x4499eb),AUTO_RESET_MODES[_0x45f7c8(0x266)](_0x4499eb['currentSystemMode'])&&await _0x4499eb['setStateAsync'](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x45f7c8(0x2b0)],'ack':![]});});}catch(_0x230942){_0x4499eb[_0x2f0445(0x300)][_0x2f0445(0x38a)](_0x2f0445(0x29e)+_0x230942[_0x2f0445(0x39b)]);}}function setupDriftAnalysisScheduler(_0x181d18){const _0x1d9f00=a0_0x5322eb;try{if(_0x181d18[_0x1d9f00(0x2ef)])clearInterval(_0x181d18[_0x1d9f00(0x2ef)]);if(!_0x181d18[_0x1d9f00(0x317)])return;_0x181d18[_0x1d9f00(0x2ef)]=setInterval(()=>runBaselineDriftAnalysis(_0x181d18),(_0x181d18[_0x1d9f00(0x252)][_0x1d9f00(0x374)]||0x18)*0x36ee80),setTimeout(()=>runBaselineDriftAnalysis(_0x181d18),0x1388);}catch(_0x50306b){_0x181d18[_0x1d9f00(0x300)]['error'](_0x1d9f00(0x35b)+_0x50306b['message']);}}function setupBriefingScheduler(_0x814b50){const _0x317e0c=a0_0x5322eb;try{if(_0x814b50[_0x317e0c(0x215)])_0x814b50[_0x317e0c(0x215)][_0x317e0c(0x39f)]();if(!_0x814b50['config'][_0x317e0c(0x1e5)])return;const _0x358493=(_0x814b50[_0x317e0c(0x252)][_0x317e0c(0x32e)]||'08:00')[_0x317e0c(0x31d)](':'),_0x2fedbf=parseInt(_0x358493[0x0])||0x8,_0x233a82=parseInt(_0x358493[0x1])||0x0,_0x23f01e=_0x233a82+'\x20'+_0x2fedbf+_0x317e0c(0x1c8);_0x814b50[_0x317e0c(0x300)][_0x317e0c(0x1cd)](_0x317e0c(0x32c)+_0x2fedbf+':'+(_0x233a82<0xa?'0'+_0x233a82:_0x233a82)),_0x814b50[_0x317e0c(0x215)]=schedule[_0x317e0c(0x365)](_0x23f01e,()=>{sendMorningBriefing(_0x814b50);});}catch(_0x2adc07){_0x814b50[_0x317e0c(0x300)][_0x317e0c(0x38a)](_0x317e0c(0x21c)+_0x2adc07['message']);}}async function sendNotification(_0x68f289,_0x1e0154,_0x1fc784=![],_0x56590d=![]){const _0x552ffd=a0_0x5322eb;_0x68f289[_0x552ffd(0x300)][_0x552ffd(0x1cd)]((_0x1fc784?_0x552ffd(0x25f):'')+_0x552ffd(0x1bc)+_0x1e0154+'\x22');const _0x209ab4=_0x68f289['config'];let _0x5e71c6=0x0;if(_0x209ab4[_0x552ffd(0x23e)]){let _0x553a14={};(_0x1e0154[_0x552ffd(0x266)]('Alarm')||_0x56590d)&&(_0x553a14={'reply_markup':{'inline_keyboard':[[{'text':'âœ…\x20Alles\x20OK\x20(Reset)','callback_data':_0x552ffd(0x2f9)}],[{'text':_0x552ffd(0x1cf),'callback_data':_0x552ffd(0x275)}]]}}),await _0x68f289[_0x552ffd(0x1da)](_0x209ab4[_0x552ffd(0x2ac)],_0x552ffd(0x253),{'text':_0x1e0154,'user':_0x209ab4['notifyTelegramRecipient'],..._0x553a14}),_0x5e71c6++;}if(_0x209ab4[_0x552ffd(0x29b)]){let _0x51a54b={'message':_0x1e0154,'title':_0x56590d?_0x552ffd(0x34c):'Cogni-Living','priority':_0x56590d?0x2:0x1,'device':_0x209ab4[_0x552ffd(0x2ff)]};_0x56590d&&(_0x51a54b[_0x552ffd(0x34f)]=0x1e,_0x51a54b[_0x552ffd(0x228)]=0xe10,_0x51a54b[_0x552ffd(0x2e8)]=_0x552ffd(0x1ea)),await _0x68f289['sendToAsync'](_0x209ab4[_0x552ffd(0x210)],_0x552ffd(0x253),_0x51a54b),_0x5e71c6++;}return _0x209ab4[_0x552ffd(0x1dc)]&&(await _0x68f289[_0x552ffd(0x1da)](_0x209ab4[_0x552ffd(0x23c)],'send',{'text':_0x1e0154,'to':_0x209ab4[_0x552ffd(0x201)]}),_0x5e71c6++),_0x5e71c6;}async function setupTelegramListener(_0x476a5c){const _0x5a8010=a0_0x5322eb,_0x45d249=_0x476a5c[_0x5a8010(0x252)]['notifyTelegramInstance'];_0x476a5c['config']['notifyTelegramEnabled']&&_0x45d249&&(_0x476a5c[_0x5a8010(0x300)][_0x5a8010(0x1cd)]('ðŸ“¡\x20Hooking\x20into\x20'+_0x45d249+_0x5a8010(0x399)),await _0x476a5c[_0x5a8010(0x213)](_0x45d249+_0x5a8010(0x32a)));}async function handleTelegramResponse(_0xaff388,_0x4f5658){const _0x293b3f=a0_0x5322eb;let _0x395a34=_0x4f5658;_0x4f5658[_0x293b3f(0x1f2)]('[')&&(_0x395a34=_0x4f5658[_0x293b3f(0x247)](_0x4f5658[_0x293b3f(0x31b)](']')+0x1));if(_0x395a34===_0x293b3f(0x2f9))_0xaff388['log'][_0x293b3f(0x1cd)](_0x293b3f(0x366)),await _0xaff388[_0x293b3f(0x38d)](_0x293b3f(0x283),{'val':![],'ack':!![]}),await _0xaff388['setStateAsync'](_0x293b3f(0x1c3),{'val':_0x293b3f(0x315),'ack':!![]}),_0xaff388[_0x293b3f(0x2bf)]=![],sendNotification(_0xaff388,_0x293b3f(0x24d),![]);else _0x395a34===_0x293b3f(0x275)&&(_0xaff388['log'][_0x293b3f(0x39c)](_0x293b3f(0x243)),sendNotification(_0xaff388,_0x293b3f(0x35f),![],!![]));}async function runAutopilot(_0x15c78e){const _0x5ebf75=a0_0x5322eb,_0x25a058=_0x15c78e[_0x5ebf75(0x252)][_0x5ebf75(0x324)],_0x49fa6b=_0x15c78e['eventHistory']['length']>0x0?_0x15c78e['eventHistory'][0x0][_0x5ebf75(0x25b)]:Date[_0x5ebf75(0x1f5)](),_0x8c25c2=(Date[_0x5ebf75(0x1f5)]()-_0x49fa6b)/(0x3e8*0x3c*0x3c);let _0x3a2df2='';_0x15c78e['config'][_0x5ebf75(0x22f)]&&_0x15c78e[_0x5ebf75(0x280)]===SYSTEM_MODES[_0x5ebf75(0x2b0)]&&_0x15c78e[_0x5ebf75(0x268)]&&(_0x8c25c2>_0x25a058&&(_0x3a2df2=_0x5ebf75(0x25e)+_0x8c25c2[_0x5ebf75(0x29f)](0x1)+_0x5ebf75(0x2a1))),runGeminiAnalysis(_0x15c78e,_0x3a2df2)[_0x5ebf75(0x390)](_0x2ffe4b=>_0x15c78e[_0x5ebf75(0x300)]['error'](_0x2ffe4b));}async function createDailyDigest(_0x4edbda){const _0x54cfda=a0_0x5322eb;if(!_0x4edbda[_0x54cfda(0x317)])return;await _0x4edbda[_0x54cfda(0x38d)](LTM_DP_STATUS,{'val':_0x54cfda(0x2c4)+new Date()[_0x54cfda(0x21b)](),'ack':!![]});if(!_0x4edbda['geminiModel']||_0x4edbda[_0x54cfda(0x273)][_0x54cfda(0x1fe)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x4edbda[_0x54cfda(0x38d)](LTM_DP_STATUS,{'val':_0x54cfda(0x220),'ack':!![]});return;}const _0x193bde=JSON[_0x54cfda(0x2b9)](JSON['stringify'](_0x4edbda[_0x54cfda(0x273)])),_0x3b4ae0=_0x193bde[_0x54cfda(0x1fe)],_0x110367=_0x54cfda(0x2a7)+JSON[_0x54cfda(0x331)](_0x193bde);try{const _0x1ef0f3=await _0x4edbda['geminiModel']['generateContent'](_0x110367),_0x524c25=JSON[_0x54cfda(0x2b9)](_0x1ef0f3['response'][_0x54cfda(0x1c5)]()['replace'](/```json|```/g,'')['trim']());_0x524c25['summary']&&(_0x4edbda['dailyDigests'][_0x54cfda(0x368)]({'timestamp':new Date()[_0x54cfda(0x1f4)](),'eventCount':_0x3b4ae0,'summary':_0x524c25[_0x54cfda(0x1d5)],'activityLevel':_0x524c25['activityLevel'],'systemMode':_0x4edbda['currentSystemMode']}),await saveDailyDigests(_0x4edbda),_0x4edbda['rawEventLog']=[],await saveRawEventLog(_0x4edbda),await _0x4edbda[_0x54cfda(0x38d)](LTM_DP_STATUS,{'val':'Success:\x20Compressed\x20'+_0x3b4ae0+'\x20events','ack':!![]}),runPythonHealthCheck(_0x4edbda));}catch(_0x21a39a){await _0x4edbda[_0x54cfda(0x38d)](LTM_DP_STATUS,{'val':_0x54cfda(0x2e2)+_0x21a39a[_0x54cfda(0x39b)],'ack':!![]});}}async function sendMorningBriefing(_0xdd8eb6){const _0x37a044=a0_0x5322eb;if(!_0xdd8eb6[_0x37a044(0x336)])return;_0xdd8eb6[_0x37a044(0x300)][_0x37a044(0x1cd)]('Generating\x20Morning\x20Briefing...');const _0x5c6f93=_0xdd8eb6[_0x37a044(0x37a)][_0x37a044(0x1fe)]>0x0?_0xdd8eb6[_0x37a044(0x37a)][_0xdd8eb6[_0x37a044(0x37a)][_0x37a044(0x1fe)]-0x1]:null,_0x19fe69=_0x5c6f93&&_0x5c6f93[_0x37a044(0x225)]?_0x5c6f93[_0x37a044(0x225)][_0x37a044(0x2eb)]:'N/A',_0x397740=new Date();_0x397740[_0x37a044(0x22b)](0x4,0x0,0x0,0x0);const _0x384c38=_0xdd8eb6[_0x37a044(0x27a)][_0x37a044(0x357)](_0x2a79fa=>new Date(_0x2a79fa[_0x37a044(0x25b)])>_0x397740),_0x30dabd=PERSONA_MAPPING[_0xdd8eb6[_0x37a044(0x252)][_0x37a044(0x249)]||'generic'],_0xf1efff=_0xdd8eb6['config'][_0x37a044(0x29a)]||'',_0x14602e=await getWeatherContext(_0xdd8eb6),_0x2e368d=await getCalendarContext(_0xdd8eb6),_0x41f350='ROLLE:\x20FÃ¼rsorglicher\x20Assistent.\x20AUFGABE:\x20Schreibe\x20eine\x20kurze,\x20beruhigende\x20\x22Guten\x20Morgen\x22-Nachricht.\x20PERSONA:\x20'+_0x30dabd+_0x37a044(0x36f)+_0xf1efff+_0x37a044(0x251)+_0x14602e+'\x20'+_0x2e368d+_0x37a044(0x397)+_0x19fe69+_0x37a044(0x25a)+JSON[_0x37a044(0x331)](_0x384c38['slice'](0x0,0xa))+'.\x20OUTPUT:\x20Nur\x20Text.';try{const _0x5a5795=await _0xdd8eb6[_0x37a044(0x336)][_0x37a044(0x392)](_0x41f350),_0x596c31=_0x37a044(0x1b3)+_0x5a5795[_0x37a044(0x34b)][_0x37a044(0x1c5)]()[_0x37a044(0x2b4)]();sendNotification(_0xdd8eb6,_0x596c31),_0xdd8eb6[_0x37a044(0x300)]['info'](_0x37a044(0x319));}catch(_0x515595){_0xdd8eb6[_0x37a044(0x300)][_0x37a044(0x38a)](_0x37a044(0x380)+_0x515595[_0x37a044(0x39b)]);}}async function scanForDevices(_0x20d846,_0x137d38){const _0x264155=a0_0x5322eb;_0x20d846['log'][_0x264155(0x1cd)]('Scanning\x20for\x20devices\x20(V8:\x20Whitelist\x20Priority)...');const _0x4dd5dc=[],_0x5ec8eb=await _0x20d846['getForeignObjectsAsync']('*'),_0x3a2a9d=await _0x20d846[_0x264155(0x28a)](_0x264155(0x209),_0x264155(0x1f0)),_0x454c4f=await _0x20d846['getForeignObjectsAsync']('enum.rooms.*',_0x264155(0x1f0)),_0x1b93bc={};if(_0x3a2a9d)for(const _0x4e83f5 in _0x3a2a9d){const _0xdbe47b=_0x3a2a9d[_0x4e83f5][_0x264155(0x244)][_0x264155(0x2bd)]||[];_0xdbe47b['forEach'](_0x51ff0c=>{const _0x2e6fb7=_0x264155;if(!_0x1b93bc[_0x51ff0c])_0x1b93bc[_0x51ff0c]=[];_0x1b93bc[_0x51ff0c][_0x2e6fb7(0x368)](_0x4e83f5);});}const _0x559b10={};if(_0x454c4f)for(const _0x47b6d3 in _0x454c4f){const _0x59ff5f=_0x454c4f[_0x47b6d3][_0x264155(0x244)][_0x264155(0x2bd)]||[],_0x49928a=typeof _0x454c4f[_0x47b6d3][_0x264155(0x244)][_0x264155(0x37f)]===_0x264155(0x25d)?_0x454c4f[_0x47b6d3]['common'][_0x264155(0x37f)]['de']:_0x454c4f[_0x47b6d3]['common'][_0x264155(0x37f)];_0x59ff5f[_0x264155(0x33c)](_0x2bb60c=>_0x559b10[_0x2bb60c]=_0x49928a);}const _0x1e9693=_0x137d38[_0x264155(0x1d9)]||[],_0x4a17bd=_0x137d38[_0x264155(0x264)]!==![],_0x49aace=_0x137d38[_0x264155(0x297)]!==![],_0x2f3da2=_0x137d38[_0x264155(0x2d1)]!==![],_0x13c77c=_0x137d38[_0x264155(0x3a1)]===!![],_0x759307=_0x137d38[_0x264155(0x344)]===!![];for(const _0x2d4d3f in _0x5ec8eb){const _0xa3a0b2=_0x5ec8eb[_0x2d4d3f];if(_0xa3a0b2[_0x264155(0x221)]!==_0x264155(0x293)||!_0xa3a0b2[_0x264155(0x244)])continue;if(ADAPTER_BLACKLIST[_0x264155(0x3a0)](_0x1e9b8d=>_0x2d4d3f['startsWith'](_0x1e9b8d))&&!_0x759307)continue;const _0x1cc5f7=(_0xa3a0b2[_0x264155(0x244)]['role']||'')[_0x264155(0x383)]();let _0x2bfaf2=(typeof _0xa3a0b2[_0x264155(0x244)]['name']==='object'?_0xa3a0b2[_0x264155(0x244)][_0x264155(0x37f)]['de']:_0xa3a0b2[_0x264155(0x244)][_0x264155(0x37f)])||_0x2d4d3f;const _0x103a86=_0x2bfaf2[_0x264155(0x383)]();let _0x5a718e=![],_0x8e4a2a=![];if(_0x1e9693[_0x264155(0x1fe)]>0x0){const _0x26623e=_0x1b93bc[_0x2d4d3f]||[],_0x2f7411=_0x2d4d3f['split']('.')[_0x264155(0x2dd)](0x0,-0x1)['join']('.'),_0x418fc0=_0x1b93bc[_0x2f7411]||[];(_0x26623e[_0x264155(0x3a0)](_0x544a2e=>_0x1e9693[_0x264155(0x266)](_0x544a2e))||_0x418fc0[_0x264155(0x3a0)](_0x4cb5c8=>_0x1e9693[_0x264155(0x266)](_0x4cb5c8)))&&(_0x5a718e=!![],_0x8e4a2a=!![]);}if(!_0x5a718e&&!_0x759307){if(HARD_IGNORE_TERMS[_0x264155(0x3a0)](_0xa3226e=>_0x2d4d3f[_0x264155(0x266)](_0xa3226e)||_0x103a86[_0x264155(0x266)](_0xa3226e[_0x264155(0x383)]())))continue;}if(BAD_NAMES[_0x264155(0x3a0)](_0x4c48f6=>_0x103a86===_0x4c48f6||_0x103a86[_0x264155(0x376)]('.'+_0x4c48f6))){const _0xf22fad=_0x2d4d3f[_0x264155(0x31d)]('.');if(_0xf22fad['length']>0x2){const _0x2fa223=_0xf22fad[_0x264155(0x2dd)](0x0,-0x1)['join']('.'),_0x234175=_0x5ec8eb[_0x2fa223];if(_0x234175&&_0x234175[_0x264155(0x244)]&&_0x234175[_0x264155(0x244)][_0x264155(0x37f)]){const _0x3a3510=typeof _0x234175[_0x264155(0x244)][_0x264155(0x37f)]===_0x264155(0x25d)?_0x234175[_0x264155(0x244)]['name']['de']:_0x234175[_0x264155(0x244)][_0x264155(0x37f)];_0x3a3510&&!_0x2bfaf2['includes'](_0x3a3510)&&(_0x2bfaf2=_0x3a3510+'\x20'+_0x2bfaf2);}}}let _0x282ac2='';if(_0x4a17bd&&(_0x1cc5f7[_0x264155(0x266)](_0x264155(0x264))||_0x1cc5f7[_0x264155(0x266)](_0x264155(0x26b))||_0x103a86[_0x264155(0x266)](_0x264155(0x316))||_0x103a86[_0x264155(0x266)](_0x264155(0x206))))_0x282ac2=_0x264155(0x264);else{if(!_0x282ac2&&_0x49aace&&(_0x1cc5f7[_0x264155(0x266)]('door')||_0x1cc5f7[_0x264155(0x266)](_0x264155(0x341))||_0x1cc5f7[_0x264155(0x266)](_0x264155(0x2ec))||_0x1cc5f7[_0x264155(0x266)](_0x264155(0x342))||_0x1cc5f7[_0x264155(0x266)]('shutter')||_0x103a86[_0x264155(0x266)]('fenster')||_0x103a86[_0x264155(0x266)](_0x264155(0x38e))||_0x103a86[_0x264155(0x266)]('rollladen')))_0x282ac2=_0x264155(0x352);else{if(!_0x282ac2&&_0x2f3da2&&(_0x1cc5f7[_0x264155(0x266)](_0x264155(0x1e2))||_0x1cc5f7[_0x264155(0x266)](_0x264155(0x2f6))||_0x1cc5f7[_0x264155(0x266)](_0x264155(0x1fa))||_0x103a86[_0x264155(0x266)](_0x264155(0x1e9))||_0x103a86['includes'](_0x264155(0x1fd))||_0x103a86['includes'](_0x264155(0x256)))){if(_0xa3a0b2[_0x264155(0x244)]['write']||_0x1cc5f7[_0x264155(0x266)]('sensor'))_0x282ac2='light';}else{if(!_0x282ac2&&_0x13c77c&&(_0x1cc5f7[_0x264155(0x266)]('temperature')||_0x1cc5f7[_0x264155(0x266)](_0x264155(0x1e6))||_0x1cc5f7[_0x264155(0x266)](_0x264155(0x327))||_0x103a86[_0x264155(0x266)](_0x264155(0x262))||_0x103a86[_0x264155(0x266)](_0x264155(0x35c))||_0x103a86['includes'](_0x264155(0x33f))))_0x282ac2=_0x264155(0x3a1);else{if(!_0x282ac2&&_0x8e4a2a)_0x282ac2=_0x264155(0x35a);}}}}if(_0x282ac2){let _0x24354f=_0x559b10[_0x2d4d3f]||'';if(!_0x24354f){let _0x436ee6=_0x2d4d3f;for(let _0x1c9ef0=0x0;_0x1c9ef0<0x3;_0x1c9ef0++){const _0x525d66=_0x436ee6[_0x264155(0x296)]('.');if(_0x525d66===-0x1)break;_0x436ee6=_0x436ee6[_0x264155(0x247)](0x0,_0x525d66);if(_0x559b10[_0x436ee6]){_0x24354f=_0x559b10[_0x436ee6];break;}}}_0x4dd5dc[_0x264155(0x368)]({'id':_0x2d4d3f,'name':_0x2bfaf2,'location':_0x24354f,'type':_0x282ac2,'logDuplicates':_0x282ac2===_0x264155(0x264),'isExit':![],'_score':_0x24354f?0x50:_0x282ac2===_0x264155(0x35a)?0x5a:0x28});}}return _0x4dd5dc['sort']((_0x3301f6,_0x261ecb)=>_0x261ecb['_score']-_0x3301f6[_0x264155(0x1db)]),_0x4dd5dc;}async function executeAutomationAction(_0x2f2565){const _0x1da73c=a0_0x5322eb;try{const _0x2d1c92=await _0x2f2565[_0x1da73c(0x265)](_0x1da73c(0x301)),_0xfbe3ba=await _0x2f2565[_0x1da73c(0x265)](_0x1da73c(0x353));if(_0x2d1c92&&_0x2d1c92[_0x1da73c(0x2c1)]&&_0xfbe3ba){const _0x3f38ed=_0x2d1c92[_0x1da73c(0x2c1)];let _0x223e44=_0xfbe3ba['val'];try{_0x223e44=JSON[_0x1da73c(0x2b9)](_0x223e44);}catch(_0x516bab){}_0x2f2565[_0x1da73c(0x300)][_0x1da73c(0x1cd)](_0x1da73c(0x1c6)+_0x3f38ed+_0x1da73c(0x27f)+_0x223e44),await _0x2f2565['setForeignStateAsync'](_0x3f38ed,_0x223e44);}else _0x2f2565['log'][_0x1da73c(0x39c)](_0x1da73c(0x1b5));}catch(_0x257fe4){_0x2f2565['log'][_0x1da73c(0x38a)](_0x1da73c(0x208)+_0x257fe4['message']);}}function tryParse(_0x253b72){const _0x4d57dd=a0_0x5322eb;try{return JSON[_0x4d57dd(0x2b9)](_0x253b72);}catch(_0x4cef90){return null;}}async function recordSequence(_0x1f4726,_0x5dc949){const _0x4e5847=a0_0x5322eb,_0x1662df=(_0x5dc949[_0x4e5847(0x221)]||'')[_0x4e5847(0x383)](),_0x3d7287=['motion','bewegung',_0x4e5847(0x206),_0x4e5847(0x1df),_0x4e5847(0x26b),_0x4e5847(0x352),_0x4e5847(0x38e),_0x4e5847(0x341),_0x4e5847(0x218),_0x4e5847(0x1e4),'kontakt','light',_0x4e5847(0x1e9),_0x4e5847(0x2f6),'schalter',_0x4e5847(0x1fa),_0x4e5847(0x1fd)];if(!_0x3d7287[_0x4e5847(0x3a0)](_0x232194=>_0x1662df[_0x4e5847(0x266)](_0x232194))){_0x1f4726[_0x4e5847(0x300)][_0x4e5847(0x2cf)](_0x4e5847(0x2a3)+_0x5dc949['id']+'\x20(Type\x20\x27'+_0x5dc949[_0x4e5847(0x221)]+_0x4e5847(0x20e));return;}if(!_0x5dc949[_0x4e5847(0x2a4)]){_0x1f4726[_0x4e5847(0x300)][_0x4e5847(0x2cf)](_0x4e5847(0x2a3)+_0x5dc949['id']+_0x4e5847(0x285)+_0x5dc949[_0x4e5847(0x2a4)]+')');return;}_0x1f4726[_0x4e5847(0x300)][_0x4e5847(0x2cf)]('[RECORDER\x20DEBUG]\x20Accepting\x20Event\x20'+_0x5dc949['id']+'\x20('+_0x5dc949[_0x4e5847(0x302)]+')');if(sequenceTimer)clearTimeout(sequenceTimer);const _0x8f9829={'loc':_0x5dc949[_0x4e5847(0x302)]||_0x4e5847(0x1bd),'id':_0x5dc949['id'],'ts':Date[_0x4e5847(0x1f5)]()};activeSequence[_0x4e5847(0x368)](_0x8f9829),_0x1f4726['log'][_0x4e5847(0x2cf)]('[RECORDER]\x20Added\x20step\x20to\x20sequence:\x20'+_0x8f9829[_0x4e5847(0x291)]+_0x4e5847(0x33b)+activeSequence['length']+')'),sequenceTimer=setTimeout(async()=>{const _0x37421c=_0x4e5847;activeSequence[_0x37421c(0x1fe)]>0x1?await saveCompletedSequence(_0x1f4726):(_0x1f4726[_0x37421c(0x300)][_0x37421c(0x2cf)](_0x37421c(0x2a6)+activeSequence[_0x37421c(0x1fe)]+')'),activeSequence=[]);},SEQUENCE_TIMEOUT_MS);}async function saveCompletedSequence(_0x57075d){const _0x1efb80=a0_0x5322eb;try{_0x57075d[_0x1efb80(0x300)][_0x1efb80(0x1cd)](_0x1efb80(0x332)+activeSequence[_0x1efb80(0x1fe)]+_0x1efb80(0x30d));const _0x18ec1b=await _0x57075d[_0x1efb80(0x265)](_0x1efb80(0x36c));let _0x3a2a61=[];if(_0x18ec1b&&_0x18ec1b[_0x1efb80(0x2c1)])try{_0x3a2a61=JSON[_0x1efb80(0x2b9)](_0x18ec1b[_0x1efb80(0x2c1)]);}catch(_0x21f30e){}const _0x426db8=activeSequence[0x0]['ts'],_0x14599e=activeSequence[_0x1efb80(0x2cd)](_0x197043=>({'loc':_0x197043['loc'],'t_delta':Math[_0x1efb80(0x258)]((_0x197043['ts']-_0x426db8)/0x3e8)})),_0x1245a6={'timestamp':new Date(_0x426db8)[_0x1efb80(0x1f4)](),'steps':_0x14599e,'duration':Math['round']((activeSequence[activeSequence[_0x1efb80(0x1fe)]-0x1]['ts']-_0x426db8)/0x3e8),'daytime':new Date(_0x426db8)[_0x1efb80(0x1a8)]()};_0x3a2a61[_0x1efb80(0x368)](_0x1245a6),_0x3a2a61['length']>MAX_TRAINING_SET_SIZE&&_0x3a2a61[_0x1efb80(0x2e7)](),await _0x57075d[_0x1efb80(0x38d)](_0x1efb80(0x36c),{'val':JSON['stringify'](_0x3a2a61),'ack':!![]}),activeSequence=[],sequenceTimer=null;}catch(_0xd1cc5c){_0x57075d[_0x1efb80(0x300)][_0x1efb80(0x38a)](_0x1efb80(0x38f)+_0xd1cc5c[_0x1efb80(0x39b)]);}}async function getOutsideTemperatureNumeric(_0x484bb1){const _0x519abc=a0_0x5322eb;if(_0x484bb1[_0x519abc(0x252)]['outdoorSensorId'])try{const _0x366983=await _0x484bb1[_0x519abc(0x2f1)](_0x484bb1[_0x519abc(0x252)]['outdoorSensorId']);if(_0x366983&&_0x366983[_0x519abc(0x2c1)]!==undefined&&_0x366983[_0x519abc(0x2c1)]!==null){const _0x37e264=parseFloat(_0x366983[_0x519abc(0x2c1)]);if(!isNaN(_0x37e264))return _0x37e264;}}catch(_0x1d9a8a){_0x484bb1[_0x519abc(0x300)]['warn'](_0x519abc(0x2b6)+_0x484bb1['config'][_0x519abc(0x33e)]+':\x20'+_0x1d9a8a[_0x519abc(0x39b)]);}const _0x34ef83=_0x484bb1[_0x519abc(0x252)][_0x519abc(0x248)];if(!_0x484bb1[_0x519abc(0x252)][_0x519abc(0x38b)]||!_0x34ef83)return null;try{let _0x3b4b61='';if(_0x34ef83[_0x519abc(0x266)]('accuweather'))_0x3b4b61=_0x34ef83+_0x519abc(0x2ca);else{if(_0x34ef83[_0x519abc(0x266)]('daswetter'))_0x3b4b61=_0x34ef83+_0x519abc(0x23b);else{if(_0x34ef83[_0x519abc(0x266)](_0x519abc(0x1b6)))_0x3b4b61=_0x34ef83+_0x519abc(0x250);else{if(_0x34ef83['includes']('weatherunderground'))_0x3b4b61=_0x34ef83+_0x519abc(0x1e1);}}}if(_0x3b4b61){const _0x1c11d6=await _0x484bb1[_0x519abc(0x2f1)](_0x3b4b61);if(_0x1c11d6&&_0x1c11d6[_0x519abc(0x2c1)]!==undefined&&_0x1c11d6[_0x519abc(0x2c1)]!==null)return parseFloat(_0x1c11d6[_0x519abc(0x2c1)]);}}catch(_0x189dbf){}return null;}async function recordThermodynamics(_0x5b0016,_0x5ccea2,_0x22842d,_0x54921b){const _0x2fa9da=a0_0x5322eb,_0x40e7e6=await getOutsideTemperatureNumeric(_0x5b0016),_0x4f10e1=await _0x5b0016[_0x2fa9da(0x265)](_0x2fa9da(0x279));let _0x2a7c0a=[];if(_0x4f10e1&&_0x4f10e1[_0x2fa9da(0x2c1)])try{_0x2a7c0a=JSON[_0x2fa9da(0x2b9)](_0x4f10e1[_0x2fa9da(0x2c1)]);}catch(_0x499fa7){}_0x2a7c0a['push']({'ts':Date[_0x2fa9da(0x1f5)](),'room':_0x54921b||_0x2fa9da(0x1bd),'t_in':_0x22842d,'t_out':_0x40e7e6});if(_0x2a7c0a['length']>THERMO_LOG_SIZE)_0x2a7c0a[_0x2fa9da(0x2e7)]();await _0x5b0016[_0x2fa9da(0x38d)](_0x2fa9da(0x279),{'val':JSON[_0x2fa9da(0x331)](_0x2a7c0a),'ack':!![]});}function installPythonDependencies(_0x15a97f){const _0x1524f4=a0_0x5322eb;if(_0x15a97f[_0x1524f4(0x27d)])return;_0x15a97f[_0x1524f4(0x27d)]=!![];const _0x2ea6b3=path[_0x1524f4(0x207)](__dirname,_0x1524f4(0x27c),_0x1524f4(0x1e3));_0x15a97f[_0x1524f4(0x300)][_0x1524f4(0x1cd)]('ðŸ› ï¸\x20AUTO-FIX:\x20Installing\x20Python\x20dependencies\x20from\x20'+_0x2ea6b3+'...'),stopPythonService(_0x15a97f);const _0x4032a4=_0x1524f4(0x348)+_0x2ea6b3+'\x22\x20--break-system-packages';exec(_0x4032a4,(_0x4d48bb,_0x2fdc05,_0x320542)=>{const _0x24bb5b=_0x1524f4,_0x5d5a7d=_0x320542&&_0x320542[_0x24bb5b(0x266)]('No\x20module\x20named\x20pip')||_0x4d48bb&&_0x4d48bb[_0x24bb5b(0x39b)][_0x24bb5b(0x266)](_0x24bb5b(0x1f8));if(_0x5d5a7d){_0x15a97f[_0x24bb5b(0x300)][_0x24bb5b(0x39c)](_0x24bb5b(0x1d8)),exec(_0x24bb5b(0x2f7),(_0x30f705,_0x4b1009,_0x24f57e)=>{const _0xf8713=_0x24bb5b;_0x30f705?(_0x15a97f[_0xf8713(0x300)][_0xf8713(0x38a)](_0xf8713(0x203)),_0x15a97f[_0xf8713(0x300)]['error'](_0xf8713(0x308)),_0x15a97f[_0xf8713(0x27d)]=![]):(_0x15a97f[_0xf8713(0x300)][_0xf8713(0x1cd)](_0xf8713(0x369)),exec('python3\x20-m\x20pip\x20install\x20-r\x20\x22'+_0x2ea6b3+_0xf8713(0x288),(_0x3863c4,_0x2cddee,_0x389203)=>{const _0x27f076=_0xf8713;_0x3863c4?_0x15a97f[_0x27f076(0x300)][_0x27f076(0x38a)](_0x27f076(0x274)+_0x3863c4[_0x27f076(0x39b)]):(_0x15a97f[_0x27f076(0x300)][_0x27f076(0x1cd)](_0x27f076(0x240)),startPythonService(_0x15a97f)),_0x15a97f[_0x27f076(0x27d)]=![];}));});return;}_0x15a97f[_0x24bb5b(0x27d)]=![],_0x4d48bb?(_0x15a97f[_0x24bb5b(0x300)][_0x24bb5b(0x38a)](_0x24bb5b(0x232)),_0x15a97f[_0x24bb5b(0x300)][_0x24bb5b(0x38a)]('Details:\x20'+(_0x320542||_0x4d48bb[_0x24bb5b(0x39b)]))):(_0x15a97f['log'][_0x24bb5b(0x1cd)](_0x24bb5b(0x1e8)),startPythonService(_0x15a97f));});}function sendToPython(_0x38257d,_0x3222c5,_0x32dc24={}){const _0x45ebcc=a0_0x5322eb;if(!_0x38257d[_0x45ebcc(0x343)]||!_0x38257d[_0x45ebcc(0x343)][_0x45ebcc(0x36e)][_0x45ebcc(0x2bb)])return;const _0x537bb5=JSON[_0x45ebcc(0x331)]({'command':_0x3222c5,..._0x32dc24});try{_0x38257d[_0x45ebcc(0x343)]['stdin'][_0x45ebcc(0x36b)](_0x537bb5+'\x0a');}catch(_0x1503bb){_0x38257d[_0x45ebcc(0x300)]['error']('Failed\x20to\x20send\x20to\x20Python:\x20'+_0x1503bb[_0x45ebcc(0x39b)]);}}function runPythonHealthCheck(_0x45e7e7){const _0x240646=a0_0x5322eb;if(!_0x45e7e7[_0x240646(0x37a)]||_0x45e7e7['dailyDigests'][_0x240646(0x1fe)]<0x2){_0x45e7e7['log']['info'](_0x240646(0x345));return;}const _0x46a0a1=_0x45e7e7[_0x240646(0x37a)][_0x240646(0x2cd)](_0x5a4f10=>{const _0x3de021=_0x240646,_0x37807c=(_0x5a4f10[_0x3de021(0x1ae)]||'')[_0x3de021(0x383)]();return ACTIVITY_LEVEL_MAP[_0x37807c]||0x32;});_0x45e7e7[_0x240646(0x300)]['info'](_0x240646(0x21f)+_0x46a0a1[_0x240646(0x1fe)]+'\x20days\x20of\x20activity\x20data\x20to\x20Python...'),sendToPython(_0x45e7e7,_0x240646(0x37e),{'values':_0x46a0a1,'tag':_0x240646(0x34e)});}function handlePythonResult(_0x2bc5d5,_0x42695f){const _0x546d5b=a0_0x5322eb;if(_0x42695f[_0x546d5b(0x221)]===_0x546d5b(0x2d0))_0x2bc5d5[_0x546d5b(0x300)][_0x546d5b(0x2cf)](_0x546d5b(0x326));else{if(_0x42695f[_0x546d5b(0x221)]===_0x546d5b(0x2ae)){const {tag:_0x16f244,diagnosis:_0x43eb44,change_percent:_0x39631e}=_0x42695f['payload'];_0x2bc5d5['log'][_0x546d5b(0x1cd)]('ðŸ\x20Guardian\x20Diagnosis\x20('+_0x16f244+_0x546d5b(0x391)+_0x43eb44+'\x20('+_0x39631e+'%)'),_0x2bc5d5[_0x546d5b(0x38d)]('analysis.health.trendDiagnosis',{'val':_0x43eb44,'ack':!![]}),_0x2bc5d5[_0x546d5b(0x38d)]('analysis.health.trendValue',{'val':_0x39631e,'ack':!![]});}}}function startPythonService(_0x1bd638){const _0x391dc7=a0_0x5322eb;try{const _0x22fbdf=path[_0x391dc7(0x207)](__dirname,_0x391dc7(0x27c),_0x391dc7(0x236));_0x1bd638[_0x391dc7(0x300)][_0x391dc7(0x1cd)](_0x391dc7(0x2be)+_0x22fbdf),_0x1bd638[_0x391dc7(0x343)]=spawn(_0x391dc7(0x245),[_0x22fbdf]),_0x1bd638[_0x391dc7(0x343)][_0x391dc7(0x290)]['on'](_0x391dc7(0x23f),_0xa122b3=>{const _0x43d147=_0x391dc7,_0xaf15d5=_0xa122b3[_0x43d147(0x33d)]()[_0x43d147(0x31d)]('\x0a');_0xaf15d5['forEach'](_0x20a432=>{const _0x222c54=_0x43d147,_0x5f1971=_0x20a432['trim']();if(!_0x5f1971)return;if(_0x5f1971[_0x222c54(0x1f2)]('[LOG]'))_0x1bd638[_0x222c54(0x300)][_0x222c54(0x2cf)](_0x222c54(0x2ea)+_0x5f1971[_0x222c54(0x247)](0x5)[_0x222c54(0x2b4)]());else{if(_0x5f1971[_0x222c54(0x1f2)](_0x222c54(0x233)))try{const _0x216034=JSON[_0x222c54(0x2b9)](_0x5f1971[_0x222c54(0x247)](0x8)[_0x222c54(0x2b4)]());handlePythonResult(_0x1bd638,_0x216034);}catch(_0x23a57f){_0x1bd638[_0x222c54(0x300)][_0x222c54(0x39c)](_0x222c54(0x20a)+_0x5f1971);}}(_0x5f1971[_0x222c54(0x266)](_0x222c54(0x287))||_0x5f1971['includes']('Bibliotheken\x20nicht\x20gefunden')||_0x5f1971[_0x222c54(0x266)]('ML-Libs\x20fehlen'))&&(_0x1bd638[_0x222c54(0x300)][_0x222c54(0x39c)](_0x222c54(0x339)),installPythonDependencies(_0x1bd638));});}),_0x1bd638['pythonProcess'][_0x391dc7(0x337)]['on'](_0x391dc7(0x23f),_0x4a7bd2=>{const _0x1fc09f=_0x391dc7,_0x4851a2=_0x4a7bd2[_0x1fc09f(0x33d)]()[_0x1fc09f(0x2b4)]();_0x1bd638[_0x1fc09f(0x300)][_0x1fc09f(0x38a)](_0x1fc09f(0x39d)+_0x4851a2);}),_0x1bd638['pythonProcess']['on']('close',_0x54b2f5=>{const _0x347d32=_0x391dc7;_0x1bd638[_0x347d32(0x300)][_0x347d32(0x1cd)](_0x347d32(0x1a7)+_0x54b2f5),_0x1bd638[_0x347d32(0x343)]=null;}),_0x1bd638['pythonProcess']['on'](_0x391dc7(0x38a),_0x1e3702=>{const _0xc5a22=_0x391dc7;_0x1bd638['log'][_0xc5a22(0x39c)]('[PYTHON]\x20Failed\x20to\x20start\x20(is\x20python3\x20installed?):\x20'+_0x1e3702[_0xc5a22(0x39b)]);});}catch(_0x204bdf){_0x1bd638[_0x391dc7(0x300)]['error'](_0x391dc7(0x205)+_0x204bdf[_0x391dc7(0x39b)]);}}function stopPythonService(_0x49bd4e){const _0x5d786a=a0_0x5322eb;if(_0x49bd4e[_0x5d786a(0x343)]){_0x49bd4e['log'][_0x5d786a(0x1cd)](_0x5d786a(0x28d));try{_0x49bd4e[_0x5d786a(0x343)]['kill']();}catch(_0x38b8c3){_0x49bd4e[_0x5d786a(0x300)][_0x5d786a(0x39c)](_0x5d786a(0x238)+_0x38b8c3[_0x5d786a(0x39b)]);}_0x49bd4e['pythonProcess']=null;}}class CogniLiving extends utils[a0_0x5322eb(0x2ee)]{constructor(_0x41857c){const _0x105e2f=a0_0x5322eb;super({..._0x41857c,'name':_0x105e2f(0x314)}),this['eventHistory']=[],this[_0x105e2f(0x2f5)]=[],this[_0x105e2f(0x1c7)]=[],this['rawEventLog']=[],this[_0x105e2f(0x37a)]=[],this['sensorLastValues']={},this['systemConfig']={'latitude':0x0,'longitude':0x0,'city':''},this[_0x105e2f(0x268)]=!![],this[_0x105e2f(0x216)]=null,this['exitGraceTimer']=null,this[_0x105e2f(0x2c9)]=![],this['genAI']=null,this['geminiModel']=null,this[_0x105e2f(0x280)]=SYSTEM_MODES['NORMAL'],this[_0x105e2f(0x317)]=![],this['lastAlertState']=![],this[_0x105e2f(0x20d)]=_0x105e2f(0x2c2),this[_0x105e2f(0x1e7)]=null,this[_0x105e2f(0x235)]=null,this['modeResetJob']=null,this[_0x105e2f(0x2ef)]=null,this[_0x105e2f(0x215)]=null,this[_0x105e2f(0x343)]=null,this[_0x105e2f(0x27d)]=![],this['on'](_0x105e2f(0x1ac),this[_0x105e2f(0x1ca)][_0x105e2f(0x2d2)](this)),this['on'](_0x105e2f(0x1c9),this[_0x105e2f(0x1eb)]['bind'](this)),this['on'](_0x105e2f(0x1aa),this[_0x105e2f(0x267)][_0x105e2f(0x2d2)](this)),this['on'](_0x105e2f(0x39b),this['onMessage']['bind'](this));}async[a0_0x5322eb(0x1ca)](){const _0x3187df=a0_0x5322eb;this[_0x3187df(0x300)][_0x3187df(0x1cd)]('cogni-living\x20adapter\x20starting\x20(v'+this['version']+_0x3187df(0x1ed)),await initZombies(this),this[_0x3187df(0x252)][_0x3187df(0x36d)]=this[_0x3187df(0x252)][_0x3187df(0x36d)]||'';try{this['isProVersion']=await checkLicense(this,this[_0x3187df(0x252)][_0x3187df(0x36d)]);}catch(_0x170340){}if(!this[_0x3187df(0x252)][_0x3187df(0x324)]||this['config'][_0x3187df(0x324)]<0.1)this['config'][_0x3187df(0x324)]=0xc;await initHistory(this),await initSystemConfig(this);if(this['config'][_0x3187df(0x360)])try{this['genAI']=new GoogleGenerativeAI(this[_0x3187df(0x252)]['geminiApiKey']),this[_0x3187df(0x336)]=this[_0x3187df(0x219)][_0x3187df(0x2ab)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':'application/json'}}),this[_0x3187df(0x300)][_0x3187df(0x1cd)](_0x3187df(0x35d));}catch(_0x221530){this['log'][_0x3187df(0x38a)](_0x3187df(0x307)+_0x221530[_0x3187df(0x39b)]);}await createAllObjects(this),await loadSystemMode(this),await loadRawEventLog(this),await loadDailyDigests(this),this[_0x3187df(0x362)](_0x3187df(0x272)),this[_0x3187df(0x362)](LTM_DP_TRIGGER_DIGEST),this['subscribeStates'](_0x3187df(0x37b)),this['subscribeStates']('analysis.triggerBriefing'),this['subscribeStates'](_0x3187df(0x1b2)),this[_0x3187df(0x362)]('analysis.automation.autoApply'),await initSensorSubscriptions(this),await initPresenceSubscriptions(this),await setupTelegramListener(this),setTimeout(()=>checkWifiPresence(this),0x1388);if(this[_0x3187df(0x1e7)])clearInterval(this['analysisTimer']);const _0x1cf440=this['config'][_0x3187df(0x2fc)]||0xf;_0x1cf440>0x0&&(this[_0x3187df(0x300)][_0x3187df(0x1cd)](_0x3187df(0x2d3)+_0x1cf440+_0x3187df(0x2b3)),this[_0x3187df(0x1e7)]=setInterval(()=>{runAutopilot(this);},_0x1cf440*0x3c*0x3e8)),setupLtmScheduler(this),setupModeResetScheduler(this),setupDriftAnalysisScheduler(this),setupBriefingScheduler(this),startPythonService(this),setTimeout(()=>{const _0x2522f1=_0x3187df;this[_0x2522f1(0x343)]&&runPythonHealthCheck(this);},0x1388);}[a0_0x5322eb(0x267)](_0x461f60){const _0x3ebbad=a0_0x5322eb;if(this[_0x3ebbad(0x1e7)])clearInterval(this['analysisTimer']);if(this[_0x3ebbad(0x2ef)])clearInterval(this[_0x3ebbad(0x2ef)]);if(this['ltmJob'])this[_0x3ebbad(0x235)][_0x3ebbad(0x39f)]();if(this[_0x3ebbad(0x382)])this['modeResetJob'][_0x3ebbad(0x39f)]();if(this[_0x3ebbad(0x215)])this[_0x3ebbad(0x215)][_0x3ebbad(0x39f)]();if(this[_0x3ebbad(0x216)])clearTimeout(this[_0x3ebbad(0x216)]);if(this['exitGraceTimer'])clearTimeout(this['exitGraceTimer']);stopPythonService(this),_0x461f60();}async[a0_0x5322eb(0x1eb)](_0xf21b5,_0x40b61f){const _0xb5ceb9=a0_0x5322eb;if(!_0x40b61f)return;if(_0xf21b5[_0xb5ceb9(0x266)](_0xb5ceb9(0x311))&&_0xf21b5[_0xb5ceb9(0x376)](_0xb5ceb9(0x31f))&&_0x40b61f['val']){await handleTelegramResponse(this,_0x40b61f[_0xb5ceb9(0x2c1)]);return;}if(_0xf21b5===this['namespace']+'.'+SYSTEM_DP_MODE){_0x40b61f['val']&&Object[_0xb5ceb9(0x312)](SYSTEM_MODES)[_0xb5ceb9(0x266)](_0x40b61f[_0xb5ceb9(0x2c1)])&&(this['currentSystemMode']=_0x40b61f['val'],_0x40b61f[_0xb5ceb9(0x2c1)]===SYSTEM_MODES['VACATION']?await setPresence(this,![]):await setPresence(this,!![]));if(!_0x40b61f[_0xb5ceb9(0x38c)])this[_0xb5ceb9(0x223)](_0xf21b5,{'val':this['currentSystemMode'],'ack':!![]});return;}if(!_0x40b61f['ack']){_0xf21b5['includes'](_0xb5ceb9(0x272))&&_0x40b61f[_0xb5ceb9(0x2c1)]&&(this[_0xb5ceb9(0x223)](_0xf21b5,{'val':![],'ack':!![]}),runGeminiAnalysis(this));if(_0xf21b5[_0xb5ceb9(0x266)](_0xb5ceb9(0x318))&&_0x40b61f[_0xb5ceb9(0x2c1)]){this['setState'](_0xf21b5,{'val':![],'ack':!![]});if(this['isProVersion'])createDailyDigest(this);}_0xf21b5[_0xb5ceb9(0x266)]('triggerBriefing')&&_0x40b61f['val']&&(this[_0xb5ceb9(0x223)](_0xf21b5,{'val':![],'ack':!![]}),sendMorningBriefing(this));_0xf21b5[_0xb5ceb9(0x266)](_0xb5ceb9(0x259))&&_0x40b61f[_0xb5ceb9(0x2c1)]&&(this[_0xb5ceb9(0x223)](_0xf21b5,{'val':![],'ack':!![]}),executeAutomationAction(this));return;}if(this['config'][_0xb5ceb9(0x239)]&&this['config'][_0xb5ceb9(0x239)][_0xb5ceb9(0x266)](_0xf21b5)){await checkWifiPresence(this);return;}const _0x3007b0=(this['config']['devices']||[])[_0xb5ceb9(0x1d0)](_0x25a234=>_0x25a234['id']===_0xf21b5);if(_0x3007b0)processSensorEvent(this,_0xf21b5,_0x40b61f,_0x3007b0);}async[a0_0x5322eb(0x36a)](_0x284717){const _0x57b8a8=a0_0x5322eb;if(typeof _0x284717===_0x57b8a8(0x25d)&&_0x284717['message'])try{if(_0x284717[_0x57b8a8(0x1c1)]==='testApiKey'){}else{if(_0x284717['command']===_0x57b8a8(0x30c)){}else{if(_0x284717[_0x57b8a8(0x1c1)]==='getLtmData'){if(!this['isProVersion'])return this[_0x57b8a8(0x24f)](_0x284717['from'],_0x284717[_0x57b8a8(0x1c1)],{'success':![],'isPro':![]},_0x284717[_0x57b8a8(0x2e9)]);let _0x2a3255={'status':_0x57b8a8(0x1ad),'details':'','lastCheck':0x0};try{_0x2a3255[_0x57b8a8(0x28e)]=(await this[_0x57b8a8(0x265)](LTM_DP_DRIFT_STATUS))[_0x57b8a8(0x2c1)],_0x2a3255[_0x57b8a8(0x22a)]=(await this['getStateAsync'](LTM_DP_DRIFT_DETAILS))[_0x57b8a8(0x2c1)],_0x2a3255[_0x57b8a8(0x2f0)]=(await this[_0x57b8a8(0x265)](LTM_DP_DRIFT_LAST_CHECK))[_0x57b8a8(0x2c1)];}catch(_0xd16768){}const _0x1d5269=this[_0x57b8a8(0x2f5)]||[];this[_0x57b8a8(0x24f)](_0x284717['from'],_0x284717[_0x57b8a8(0x1c1)],{'success':!![],'isPro':!![],'dailyDigests':this[_0x57b8a8(0x37a)],'driftAnalysis':_0x2a3255,'analysisHistory':_0x1d5269},_0x284717[_0x57b8a8(0x2e9)]);}else{if(_0x284717[_0x57b8a8(0x1c1)]===_0x57b8a8(0x2fa)){const _0x47c16f=this['dailyDigests'][_0x57b8a8(0x1fe)],_0x6a56e=new Date(),_0x5d29c6=new Date(_0x6a56e['getFullYear'](),_0x6a56e[_0x57b8a8(0x2e0)](),_0x6a56e[_0x57b8a8(0x304)]())[_0x57b8a8(0x1b8)](),_0x460221=this['rawEventLog']['filter'](_0x4ec547=>new Date(_0x4ec547['timestamp'])[_0x57b8a8(0x1b8)]()>_0x5d29c6)[_0x57b8a8(0x1fe)],_0x445dbf=new Array(0x18)[_0x57b8a8(0x346)](0x0);this[_0x57b8a8(0x273)][_0x57b8a8(0x33c)](_0x2ff09f=>{const _0x3b936b=_0x57b8a8,_0x4071d5=new Date(_0x2ff09f['timestamp']);if(_0x4071d5[_0x3b936b(0x1b8)]()>_0x5d29c6)_0x445dbf[_0x4071d5[_0x3b936b(0x1a8)]()]++;});let _0x46269a={'status':'N/A'};try{_0x46269a[_0x57b8a8(0x28e)]=(await this[_0x57b8a8(0x265)](LTM_DP_DRIFT_STATUS))[_0x57b8a8(0x2c1)];}catch(_0x365c0a){}let _0x43fc18='';try{const _0x2dbb7a=await this[_0x57b8a8(0x265)](_0x57b8a8(0x1d3));_0x43fc18=_0x2dbb7a?_0x2dbb7a[_0x57b8a8(0x2c1)]:'';}catch(_0x20f2d1){}let _0xc752f4=null;!this['geminiModel']&&(_0xc752f4=this['config']['geminiApiKey']?_0x57b8a8(0x370):_0x57b8a8(0x1d2));let _0x1dca6f={'detected':![],'description':'','targetId':'','targetValue':'','autoApply':![]};try{const _0x4722b5=await this[_0x57b8a8(0x265)]('analysis.automation.patternDetected'),_0x4ecaaa=await this[_0x57b8a8(0x265)]('analysis.automation.description'),_0x127ceb=await this[_0x57b8a8(0x265)](_0x57b8a8(0x301)),_0x3c13d2=await this[_0x57b8a8(0x265)](_0x57b8a8(0x353)),_0x4aa5e4=await this['getStateAsync'](_0x57b8a8(0x394));_0x4722b5&&_0x4722b5[_0x57b8a8(0x2c1)]&&(_0x1dca6f[_0x57b8a8(0x2d8)]=!![],_0x1dca6f[_0x57b8a8(0x1e0)]=_0x4ecaaa?_0x4ecaaa[_0x57b8a8(0x2c1)]:'',_0x1dca6f[_0x57b8a8(0x1af)]=_0x127ceb?_0x127ceb[_0x57b8a8(0x2c1)]:'',_0x1dca6f[_0x57b8a8(0x212)]=_0x3c13d2?_0x3c13d2[_0x57b8a8(0x2c1)]:''),_0x1dca6f['autoApply']=_0x4aa5e4?!!_0x4aa5e4[_0x57b8a8(0x2c1)]:![];}catch(_0x2a9b6f){}this[_0x57b8a8(0x24f)](_0x284717[_0x57b8a8(0x29c)],_0x284717[_0x57b8a8(0x1c1)],{'success':!![],'eventHistory':this['eventHistory'][_0x57b8a8(0x2dd)](0x0,0xf),'stats':{'digestCount':_0x47c16f,'eventCountToday':_0x460221,'hourlyActivity':_0x445dbf,'driftStatus':_0x46269a['status'],'isPresent':this[_0x57b8a8(0x268)],'presenceWho':_0x43fc18,'minDays':this[_0x57b8a8(0x252)][_0x57b8a8(0x32d)]||0x7,'stbDays':this['config'][_0x57b8a8(0x24a)]||0xe,'ltbDays':this['config']['ltmLtbWindowDays']||0x3c,'systemError':_0xc752f4},'automation':_0x1dca6f},_0x284717[_0x57b8a8(0x2e9)]);}else{if(_0x284717['command']===_0x57b8a8(0x200)){const _0x1729bf=await this['getForeignObjectsAsync']('enum.functions.*',_0x57b8a8(0x1f0)),_0x52415f=[];if(_0x1729bf)for(const _0x573662 in _0x1729bf){const _0x55d32f=_0x1729bf[_0x573662],_0x1d757e=(_0x55d32f[_0x57b8a8(0x244)]&&typeof _0x55d32f[_0x57b8a8(0x244)]['name']===_0x57b8a8(0x25d)?_0x55d32f[_0x57b8a8(0x244)][_0x57b8a8(0x37f)]['de']:_0x55d32f[_0x57b8a8(0x244)][_0x57b8a8(0x37f)])||_0x55d32f[_0x57b8a8(0x244)]['name'];_0x52415f[_0x57b8a8(0x368)]({'id':_0x573662,'name':_0x1d757e});}this[_0x57b8a8(0x24f)](_0x284717[_0x57b8a8(0x29c)],_0x284717[_0x57b8a8(0x1c1)],{'success':!![],'enums':_0x52415f},_0x284717[_0x57b8a8(0x2e9)]);}else{if(_0x284717['command']==='scanDevices')try{const _0x3197e8=await scanForDevices(this,_0x284717[_0x57b8a8(0x39b)]||{});this[_0x57b8a8(0x24f)](_0x284717[_0x57b8a8(0x29c)],_0x284717[_0x57b8a8(0x1c1)],{'success':!![],'devices':_0x3197e8},_0x284717['callback']);}catch(_0x5ef24b){this[_0x57b8a8(0x24f)](_0x284717[_0x57b8a8(0x29c)],_0x284717[_0x57b8a8(0x1c1)],{'success':![],'error':_0x5ef24b['message']},_0x284717[_0x57b8a8(0x2e9)]);}else{if(_0x284717['command']===_0x57b8a8(0x24e)){const _0x1e8cb1=_0x284717['message'][_0x57b8a8(0x2fd)];if(!_0x1e8cb1)return this[_0x57b8a8(0x24f)](_0x284717[_0x57b8a8(0x29c)],_0x284717[_0x57b8a8(0x1c1)],{'success':![],'error':_0x57b8a8(0x2b8)},_0x284717[_0x57b8a8(0x2e9)]);const _0x5c1530=await getCalendarNames(this,_0x1e8cb1);this[_0x57b8a8(0x24f)](_0x284717[_0x57b8a8(0x29c)],_0x284717[_0x57b8a8(0x1c1)],{'success':!![],'names':_0x5c1530},_0x284717[_0x57b8a8(0x2e9)]);}else{if(_0x284717['command']===_0x57b8a8(0x1d4)){const {targetId:_0x4d7f26,targetValue:_0x250fab}=_0x284717[_0x57b8a8(0x39b)];this[_0x57b8a8(0x300)]['info'](_0x57b8a8(0x237)+_0x4d7f26+_0x57b8a8(0x27f)+_0x250fab),await this['setStateAsync'](_0x57b8a8(0x261),{'val':!![],'ack':!![]}),await this[_0x57b8a8(0x38d)](_0x57b8a8(0x2f8),{'val':_0x57b8a8(0x2f4)+_0x4d7f26,'ack':!![]}),await this[_0x57b8a8(0x38d)](_0x57b8a8(0x301),{'val':_0x4d7f26,'ack':!![]}),await this['setStateAsync'](_0x57b8a8(0x353),{'val':_0x250fab,'ack':!![]}),this[_0x57b8a8(0x24f)](_0x284717['from'],_0x284717['command'],{'success':!![]},_0x284717[_0x57b8a8(0x2e9)]);}else{if(_0x284717['command']===_0x57b8a8(0x375)){const {historyId:_0xd26537,rating:_0x4f9ff1,comment:_0x1c2609,alertReason:_0x5dc1d6}=_0x284717[_0x57b8a8(0x39b)];_0xd26537&&_0x4f9ff1?(await saveFeedback(this,{'timestamp':Date['now'](),'historyId':_0xd26537,'rating':_0x4f9ff1,'comment':_0x1c2609,'alertReason':_0x5dc1d6}),this[_0x57b8a8(0x24f)](_0x284717[_0x57b8a8(0x29c)],_0x284717[_0x57b8a8(0x1c1)],{'success':!![]},_0x284717['callback'])):this[_0x57b8a8(0x24f)](_0x284717[_0x57b8a8(0x29c)],_0x284717[_0x57b8a8(0x1c1)],{'success':![],'error':'Missing\x20data'},_0x284717[_0x57b8a8(0x2e9)]);}else _0x284717[_0x57b8a8(0x1c1)]===_0x57b8a8(0x1b9)&&(this[_0x57b8a8(0x300)][_0x57b8a8(0x1cd)](_0x57b8a8(0x1fb)),await this['setStateAsync'](_0x57b8a8(0x261),{'val':![],'ack':!![]}),await this['setStateAsync']('analysis.automation.description',{'val':'','ack':!![]}),this['sendTo'](_0x284717[_0x57b8a8(0x29c)],_0x284717[_0x57b8a8(0x1c1)],{'success':!![]},_0x284717['callback']));}}}}}}}}}catch(_0x82d080){this[_0x57b8a8(0x300)][_0x57b8a8(0x38a)]('Error\x20in\x20onMessage\x20command\x20'+_0x284717['command']+':\x20'+_0x82d080[_0x57b8a8(0x39b)]);if(_0x284717[_0x57b8a8(0x2e9)])this[_0x57b8a8(0x24f)](_0x284717['from'],_0x284717[_0x57b8a8(0x1c1)],{'success':![],'error':_0x82d080[_0x57b8a8(0x39b)]},_0x284717[_0x57b8a8(0x2e9)]);}}}if(require[a0_0x5322eb(0x20f)]!==module)module[a0_0x5322eb(0x363)]=_0x3e5efa=>new CogniLiving(_0x3e5efa);else new CogniLiving();