const a0_0x2d9c07=a0_0x1ebc;(function(_0xbbe678,_0x534e06){const _0x15e6f1=a0_0x1ebc,_0x25701a=_0xbbe678();while(!![]){try{const _0x390605=-parseInt(_0x15e6f1(0x2ae))/0x1+parseInt(_0x15e6f1(0x36f))/0x2*(parseInt(_0x15e6f1(0x33b))/0x3)+parseInt(_0x15e6f1(0x366))/0x4+parseInt(_0x15e6f1(0x30c))/0x5*(-parseInt(_0x15e6f1(0x294))/0x6)+parseInt(_0x15e6f1(0x2ad))/0x7+parseInt(_0x15e6f1(0x306))/0x8+-parseInt(_0x15e6f1(0x24f))/0x9*(-parseInt(_0x15e6f1(0x2f1))/0xa);if(_0x390605===_0x534e06)break;else _0x25701a['push'](_0x25701a['shift']());}catch(_0x588a68){_0x25701a['push'](_0x25701a['shift']());}}}(a0_0x38ef,0x4fbec));const a0_0x509eb9=(function(){let _0x3a157b=!![];return function(_0x6ed2b4,_0x2d2fd3){const _0x547d46=_0x3a157b?function(){if(_0x2d2fd3){const _0x41a09a=_0x2d2fd3['apply'](_0x6ed2b4,arguments);return _0x2d2fd3=null,_0x41a09a;}}:function(){};return _0x3a157b=![],_0x547d46;};}()),a0_0xbdf5fb=a0_0x509eb9(this,function(){const _0x474622=a0_0x1ebc;return a0_0xbdf5fb[_0x474622(0x2bb)]()[_0x474622(0x279)](_0x474622(0x2f8))[_0x474622(0x2bb)]()[_0x474622(0x20a)](a0_0xbdf5fb)[_0x474622(0x279)](_0x474622(0x2f8));});a0_0xbdf5fb();'use strict';function a0_0x38ef(){const _0x5a3396=['notifyPushoverInstance','.Current.Temperature','value','python','scheduleJob',').\x20Installiere...','4338761drROsE','335109XwTIpC','LTM.trainingData.thermodynamics','pip.exe','briefingEnabled','getMonth','Who\x20is\x20present?','sendToAsync','models/gemini-flash-latest','analysis.health.lastCheck','position','data','COGNI_CONFIRM_OK','temperature','toString','analysis.health.trendValue','ready','notifyTelegramEnabled','.communicate.request','boolean','existsSync','‚ö†Ô∏è\x20Persistentes\x20Python\x20VENV\x20fehlt\x20(','fenster','stateChange','getForeignStateAsync','shutter','analysis.training.triggerSecurity','slice','payload','Deaktiviert\x20(Pro-Feature)','triggerDailyDigest','LTM.driftAnalysis.lastCheck','simulateButler','presence','dailyDigests','isGracePeriodActive','ltmDriftCheckIntervalHours','KI-Modell\x20nicht\x20initialisiert','Skipped\x20(No\x20AI\x20or\x20Data)','Alert\x20Reason','values','LTM.processingStatus','testContext','HEALTH_TRAIN_RESULT','getForeignObjectAsync','write','name','events.lastEvent','setForeignStateAsync','Auto\x20Apply','‚ùå\x20VENV\x20FAILED.\x20Run:\x20sudo\x20apt\x20install\x20python3-venv','\x20*\x20*\x20*','üõ†Ô∏è\x20Creating\x20Persistent\x20VENV\x20at:\x20','useWeather','response','.\x20WETTER:\x20','object','events.history','indicator.alarm','sendTo','valve','common','requirements.txt','toISOString','targetposition','@iobroker/adapter-core','notifyPushoverRecipient','targetValue','40eQFVdq','eventHistory','LTM.rawEventLog','[LOG]','python.exe','python3','analysis.training.status','(((.+)+)+)+$','\x0aSTB:\x20','state','currentSystemMode','door','analysis.history_debug_00','‚ùå\x20INSTALL\x20FAILED:\x20','analysis.alertReason','unknown','systemConfig','error','baselineDrift','exitGraceTimer','push','1998888MxYtHU','system.config','Trigger\x20Action','version','is_anomaly','.forecast.current.temp','20PwhteK','TRAINING_COMPLETE','guest','ü§ñ\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','insulation','extendObjectAsync','description','[RESULT]','HEALTH_RESULT','isExit','‚úÖ\x20INSTALL\x20SUCCESS.','Sec-Training\x20started...','info','instance','notifyEmailRecipient','weatherunderground','0\x203\x20*\x20*\x20*','scanDevices','analysis.automation.description','BUTLER\x20Execution\x20Error:\x20','Kein\x20API\x20Key.','stdin','status','\x20->\x20','.\x20KONTEXT:\x20','subscribeStates','ltmLtbWindowDays','Energy\x20Intelligence','splice','logDuplicates','button','Ungew√∂hnliches\x20Bewegungsmuster!\x20(Score:\x20','analysis.lastResult','pythonProcess','service.py','analysis.security.lastScore','sound','üß†\x20Triggering\x20Security\x20Training...','üß™\x20Simulating\x20Butler\x20Proposal:\x20','\x20=\x20','Trend','SIMULATION:\x20Test-Vorschlag\x20f√ºr\x20','AI\x20Training','LTM.trainingData.sequences','Current\x20Threshold','.\x20EMERGENCY:\x20','‚úÖ\x20HEALTH\x20TRAINED.','10191NJigew','endsWith','getFullYear','analysis.automation.triggerAction','onStateChange','getObjectAsync','message','analysis.automation.patternDetected','08:00','notifyTelegramRecipient','exitTimer','temperatur','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','pop','system.presenceWho','VACATION','getTime','now','Training\x20Error:\x20','brightness','analysis.energy.insulationScore','round','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','command','unshift','‚úÖ\x20Alles\x20OK\x20(Reset)','geminiModel','warn','üìû\x20R√ºckruf\x20anfordern','analysis.health.trendDiagnosis','genAI','shift','win32','off','Fokus\x20auf\x20Komfort.','filter','Scripts','generateContent','toLowerCase','getDate','üö®\x20EMERGENCY','from','json','34368PhcjJo','../../iobroker-data/cogni-living-venv','subscribeForeignStatesAsync','vacation','LTM.driftAnalysis','ü§ñ\x20BUTLER:\x20Executing\x20Action\x20->\x20','LTM.driftAnalysis.baselineDrift','automationProposal','indicator','2cbidXA','PRIORIT√ÑT:\x20Gesundheit/AAL.','üõ°Ô∏è\x20SECURITY\x20CHECK:\x20Score\x20','cogni-living\x20adapter\x20starting\x20(v','details','ENERGY_TRAIN_RESULT','Train\x20Security','briefingJob','Heating\x20Score','sensorLastValues','includes','parse','submitFeedback','triggerBriefing','material.','replace','city','analysis.activitySummary','loc','detected','vis.','Anomaly\x20Score','\x0aGrund:\x20','bin','apiKey','cancel','diagnosis','isAlert','N/A','platform','history.','text.alarm','LTM.dailyDigests','python_service','Activity\x20Summary','pr√§senz','length','Kein\x20API\x20Key!','Pattern\x20Detected','\x20Tage)','automation.triggerAction','longitude','[PYTHON]\x20','getForeignObjectsAsync','getStateAsync','üéØ\x20Training\x20Success.\x20New\x20Threshold\x20set\x20to:\x20','bind','Keine\x20Details.','split','humidity','stringify','config','Aktiv\x20(','string','summary','setStateAsync','Success:\x20','stdout','outdoorSensorId','contact','geminiApiKey','analysis.security.lastCheck','setState','close','text','Restoring\x20sensor\x20cache...','find','PARTY','python3\x20-m\x20venv\x20\x22','PRIORIT√ÑT:\x20Sicherheit.','activityLevel','motion','Security\x20Monitor','analysisTimer','analysis.training.triggerEnergy','constructor','rmSync','path','channel','LTM.baselineStatus','latitude','party','startsWith','val','communicate.request','WiFi\x20Presence\x20detected.','send','generic','getGenerativeModel','system.','getHours','Trend\x20Value','toFixed','driftAnalysisTimer','heating','Health\x20Analysis','log','location','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','dependencyInstallInProgress',')\x20-\x20SAFE\x20BOOT','0\x204\x20*\x20*\x20*','Installing\x20pip\x20packages...','aiPersona','ltmJob','accuweather','type','OK:\x20','analysis.health','switch','forEach','system.isPresent','System\x20Mode','Reset\x20Sched\x20Error:\x20','isPresent','Unbekannt','notifyTelegramInstance','TRAIN_ENERGY','Digest','child_process','ANOMALY','inactivityThresholdHours','LTM','LTM.triggerDailyDigest','Last\x20Check','Lernphase\x20(','system','System','minDaysForBaseline','ANALYZE_SEQUENCE','Activity-Level','trim','Cogni-Living','enum','join','licenseKey','kill','Daily\x20Digests','setpoint','isProVersion','Trigger\x20Analysis','currentposition','analysis.security.currentThreshold','admin.','448479avMUEo','pip','setObjectNotExistsAsync','onReady','change_percent','Vom\x20Benutzer\x20best√§tigt\x20(OK).','.\x20SYSTEM_MODE:\x20','analysis.energy.heatingScore','licht','number','success','normal','alertReason','analysisHistory','analysis.automation.targetId','level','COGNI_REQUEST_CALL','expire','PONG','analysisInterval','Gemini\x20Init\x20Error:\x20','substring','ack','Fokus\x20auf\x20Familienroutinen.','unload','cogni-living','devices','application/json','lastAlertState','telegram','timestamp','system.mode','analysis.training.triggerHealth','LTM\x20Sched\x20Error:\x20','analysis.trigger','debug','Training\x20Status','date','üêç\x20Python\x20Pong','weatherInstance','analysis.health.isAnomaly','klima','search','analysis.training','Anomaly\x20Detected','[RECORDER]\x20Error:\x20','callback','kontakt','briefingTime','NORMAL','üìû\x20R√úCKRUF\x20BITTE!\x20Der\x20Bewohner\x20hat\x20den\x20R√ºckruf-Button\x20gedr√ºckt.','notifyPushoverEnabled','Alarm','Alert\x20Status','analysis.security','TREND_RESULT','Train\x20Health','\x22\x20install\x20--no-cache-dir\x20--force-reinstall\x20-r\x20\x22','ANALYZE_TREND','schalter','analysis.analysisHistory','Error\x20launching\x20Python:\x20','systemUUID','online','modeResetJob','getCalendarNames','analysis.energy','ltmStbWindowDays','presenceDevices','628878Rpdkyr','GUEST','Train\x20Energy','occupancy','writable','No\x20instance','analysis.automation.targetValue','map','delObjectAsync','analysis.isAlert','daswetter','rawEventLog','analysis.triggerBriefing','.\x20EVENTS:\x20','Target\x20ID','onMessage','Sequences','analysis.automation.autoApply','Unknown'];a0_0x38ef=function(){return _0x5a3396;};return a0_0x38ef();}const utils=require(a0_0x2d9c07(0x2ee)),{GoogleGenerativeAI}=require('@google/generative-ai'),schedule=require('node-schedule'),{spawn,exec}=require(a0_0x2d9c07(0x236)),path=require(a0_0x2d9c07(0x20c)),fs=require('fs'),HISTORY_MAX_SIZE=0x32,RAW_LOG_MAX_SIZE=0x5dc,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL=a0_0x2d9c07(0x2b5),LTM_SCHEDULE=a0_0x2d9c07(0x31c),MODE_RESET_SCHEDULE=a0_0x2d9c07(0x224),SEQUENCE_TIMEOUT_MS=0x5*0x3c*0x3e8,MAX_TRAINING_SET_SIZE=0x1f4,THERMO_LOG_SIZE=0x3e8,EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,LTM_DP_RAW_LOG=a0_0x2d9c07(0x2f3),LTM_DP_DAILY_DIGESTS=a0_0x2d9c07(0x1df),LTM_DP_STATUS=a0_0x2d9c07(0x2d6),LTM_DP_TRIGGER_DIGEST=a0_0x2d9c07(0x23a),LTM_DP_BASELINE_STATUS=a0_0x2d9c07(0x20e),LTM_DP_DRIFT_CHANNEL=a0_0x2d9c07(0x36a),LTM_DP_DRIFT_STATUS=a0_0x2d9c07(0x36c),LTM_DP_DRIFT_DETAILS='LTM.driftAnalysis.driftDetails',LTM_DP_DRIFT_LAST_CHECK=a0_0x2d9c07(0x2cc),SYSTEM_DP_MODE=a0_0x2d9c07(0x26e),SYSTEM_MODES={'NORMAL':a0_0x2d9c07(0x25a),'VACATION':a0_0x2d9c07(0x369),'PARTY':a0_0x2d9c07(0x210),'GUEST':a0_0x2d9c07(0x30e)},AUTO_RESET_MODES=[SYSTEM_MODES[a0_0x2d9c07(0x202)],SYSTEM_MODES[a0_0x2d9c07(0x295)]],PERSONA_MAPPING={'generic':'Analysiere\x20ausgewogen.','senior_aal':a0_0x2d9c07(0x370),'family':a0_0x2d9c07(0x266),'single_comfort':a0_0x2d9c07(0x35d),'security':a0_0x2d9c07(0x204)},ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0},BAD_NAMES=[a0_0x2d9c07(0x2ed),a0_0x2d9c07(0x24c),a0_0x2d9c07(0x2fa),a0_0x2d9c07(0x25e),'value',a0_0x2d9c07(0x34e),'on',a0_0x2d9c07(0x35c),a0_0x2d9c07(0x22c),a0_0x2d9c07(0x2b7),a0_0x2d9c07(0x2c6),'blind','cover','status','motion',a0_0x2d9c07(0x2ce),'occupancy',a0_0x2d9c07(0x2ba),a0_0x2d9c07(0x1f0),'power','energy',a0_0x2d9c07(0x249),a0_0x2d9c07(0x2e9),'actual_temperature','set_temperature'],ADAPTER_BLACKLIST=[a0_0x2d9c07(0x218),a0_0x2d9c07(0x24e),'info.',a0_0x2d9c07(0x383),a0_0x2d9c07(0x1dd),a0_0x2d9c07(0x37d),'icons-mfd.','flot.','echarts.','javascript.','simple-api.'],IS_WIN=process[a0_0x2d9c07(0x1dc)]===a0_0x2d9c07(0x35b),PERSISTENT_DIR=path[a0_0x2d9c07(0x245)](__dirname,a0_0x2d9c07(0x367)),VENV_PATH=PERSISTENT_DIR,PYTHON_EXE=IS_WIN?path[a0_0x2d9c07(0x245)](VENV_PATH,'Scripts',a0_0x2d9c07(0x2f5)):path[a0_0x2d9c07(0x245)](VENV_PATH,'bin',a0_0x2d9c07(0x2aa)),PIP_EXE=IS_WIN?path['join'](VENV_PATH,a0_0x2d9c07(0x35f),a0_0x2d9c07(0x2b0)):path[a0_0x2d9c07(0x245)](VENV_PATH,a0_0x2d9c07(0x1d6),a0_0x2d9c07(0x250));let activeSequence=[],sequenceTimer=null,panicMode=![];async function startSystem(_0x177c0b){const _0xa6581f=a0_0x2d9c07;_0x177c0b[_0xa6581f(0x21f)][_0xa6581f(0x318)]('üöÄ\x20Starting\x20System\x20Logic...'),await initZombies(_0x177c0b);try{_0x177c0b['isProVersion']=await checkLicense(_0x177c0b[_0xa6581f(0x1f2)][_0xa6581f(0x246)]);}catch(_0x6f59a8){}if(!_0x177c0b['config'][_0xa6581f(0x238)]||_0x177c0b[_0xa6581f(0x1f2)][_0xa6581f(0x238)]<0.1)_0x177c0b['config'][_0xa6581f(0x238)]=0xc;await initHistory(_0x177c0b),await initSystemConfig(_0x177c0b);if(_0x177c0b['config'][_0xa6581f(0x1fb)])try{_0x177c0b['genAI']=new GoogleGenerativeAI(_0x177c0b['config'][_0xa6581f(0x1fb)]),_0x177c0b[_0xa6581f(0x355)]=_0x177c0b['genAI'][_0xa6581f(0x217)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0xa6581f(0x26a)}}),_0x177c0b[_0xa6581f(0x21f)]['info']('Gemini\x20AI\x20initialized.');}catch(_0x56bd6a){_0x177c0b[_0xa6581f(0x21f)][_0xa6581f(0x302)](_0xa6581f(0x263)+_0x56bd6a[_0xa6581f(0x341)]);}await createAllObjects(_0x177c0b),await loadSystemMode(_0x177c0b),await loadRawEventLog(_0x177c0b),await loadDailyDigests(_0x177c0b),_0x177c0b[_0xa6581f(0x325)]('analysis.trigger'),_0x177c0b['subscribeStates'](LTM_DP_TRIGGER_DIGEST),_0x177c0b[_0xa6581f(0x325)](_0xa6581f(0x26e)),_0x177c0b[_0xa6581f(0x325)](_0xa6581f(0x2a0)),_0x177c0b[_0xa6581f(0x325)](_0xa6581f(0x33e)),_0x177c0b[_0xa6581f(0x325)](_0xa6581f(0x2a5)),_0x177c0b[_0xa6581f(0x325)](_0xa6581f(0x2c7)),_0x177c0b[_0xa6581f(0x325)](_0xa6581f(0x26f)),_0x177c0b['subscribeStates'](_0xa6581f(0x209)),await initSensorSubscriptions(_0x177c0b),await initPresenceSubscriptions(_0x177c0b),await setupTelegramListener(_0x177c0b),setTimeout(()=>checkWifiPresence(_0x177c0b),0x1388);if(_0x177c0b[_0xa6581f(0x208)])clearInterval(_0x177c0b[_0xa6581f(0x208)]);const _0x5808d8=_0x177c0b[_0xa6581f(0x1f2)][_0xa6581f(0x262)]||0xf;_0x5808d8>0x0&&(_0x177c0b['analysisTimer']=setInterval(()=>{runAutopilot(_0x177c0b);},_0x5808d8*0x3c*0x3e8)),setupLtmScheduler(_0x177c0b),setupModeResetScheduler(_0x177c0b),setupDriftAnalysisScheduler(_0x177c0b),setupBriefingScheduler(_0x177c0b),startPythonService(_0x177c0b),setTimeout(()=>{if(_0x177c0b['pythonProcess'])runPythonHealthCheck(_0x177c0b);},0x1388);}function checkAndInstall(_0x67043){const _0x54c1fb=a0_0x2d9c07;if(!fs[_0x54c1fb(0x2c1)](VENV_PATH)||!fs[_0x54c1fb(0x2c1)](PIP_EXE))return _0x67043[_0x54c1fb(0x21f)][_0x54c1fb(0x356)](_0x54c1fb(0x2c2)+VENV_PATH+_0x54c1fb(0x2ac)),installPythonDependencies(_0x67043),![];return!![];}function installPythonDependencies(_0x2f7fdd){const _0xea9f3f=a0_0x2d9c07;if(_0x2f7fdd[_0xea9f3f(0x222)])return;_0x2f7fdd['dependencyInstallInProgress']=!![];const _0xbe5302=path[_0xea9f3f(0x245)](__dirname,'python_service',_0xea9f3f(0x2eb));stopPythonService(_0x2f7fdd);if(fs[_0xea9f3f(0x2c1)](VENV_PATH)&&!fs[_0xea9f3f(0x2c1)](PIP_EXE))try{fs[_0xea9f3f(0x20b)](VENV_PATH,{'recursive':!![],'force':!![]});}catch(_0x146b8b){}_0x2f7fdd[_0xea9f3f(0x21f)][_0xea9f3f(0x318)](_0xea9f3f(0x2e1)+VENV_PATH),exec(_0xea9f3f(0x203)+VENV_PATH+'\x22',_0x36b591=>{const _0x33af9c=_0xea9f3f;if(_0x36b591){_0x2f7fdd[_0x33af9c(0x21f)][_0x33af9c(0x302)](_0x33af9c(0x2df)),_0x2f7fdd[_0x33af9c(0x222)]=![];return;}installRequirementsInVenv(_0x2f7fdd,_0xbe5302);});}function installRequirementsInVenv(_0x5c3210,_0x563b7a){const _0x313a4c=a0_0x2d9c07;_0x5c3210[_0x313a4c(0x21f)][_0x313a4c(0x318)](_0x313a4c(0x225));const _0x19cb3e='\x22'+PIP_EXE+_0x313a4c(0x288)+_0x563b7a+'\x22';exec(_0x19cb3e,{'timeout':0x124f80},(_0x5559f6,_0x289995,_0x44ab25)=>{const _0x3910ea=_0x313a4c;_0x5c3210[_0x3910ea(0x222)]=![],_0x5559f6?_0x5c3210[_0x3910ea(0x21f)]['error'](_0x3910ea(0x2fe)+(_0x44ab25||_0x5559f6[_0x3910ea(0x341)])):(_0x5c3210[_0x3910ea(0x21f)][_0x3910ea(0x318)](_0x3910ea(0x316)),startSystem(_0x5c3210));});}async function initZombies(_0x117f9b){const _0x15104b=a0_0x2d9c07;try{const _0x272e39=[_0x15104b(0x2fd),'events.history_debug_00'];for(const _0x161fef of _0x272e39){try{const _0x33b154=await _0x117f9b[_0x15104b(0x340)](_0x161fef);if(_0x33b154)await _0x117f9b[_0x15104b(0x29c)](_0x161fef);}catch(_0x5c3af1){}}}catch(_0x59e60d){}}async function checkLicense(_0x48e4b6){return!![];}async function initHistory(_0x9f710b){const _0x1304de=a0_0x2d9c07;try{const _0x2c688c=await _0x9f710b[_0x1304de(0x1eb)]('events.history');_0x2c688c&&_0x2c688c[_0x1304de(0x212)]&&(_0x9f710b[_0x1304de(0x2f2)]=JSON['parse'](_0x2c688c[_0x1304de(0x212)][_0x1304de(0x2bb)]()));}catch(_0x3fea39){_0x9f710b[_0x1304de(0x2f2)]=[];}try{const _0x42c7c0=await _0x9f710b[_0x1304de(0x1eb)](_0x1304de(0x28b));if(_0x42c7c0&&_0x42c7c0['val'])_0x9f710b[_0x1304de(0x25c)]=JSON[_0x1304de(0x37a)](_0x42c7c0[_0x1304de(0x212)][_0x1304de(0x2bb)]());}catch(_0x380fc4){_0x9f710b[_0x1304de(0x25c)]=[];}if(_0x9f710b[_0x1304de(0x2f2)]&&_0x9f710b['eventHistory'][_0x1304de(0x1e3)]>0x0){_0x9f710b[_0x1304de(0x21f)]['info'](_0x1304de(0x200));for(let _0x2a071e=_0x9f710b['eventHistory'][_0x1304de(0x1e3)]-0x1;_0x2a071e>=0x0;_0x2a071e--){const _0x3fc2f6=_0x9f710b['eventHistory'][_0x2a071e];if(_0x3fc2f6&&_0x3fc2f6['id']!==undefined&&_0x3fc2f6['value']!==undefined)_0x9f710b['sensorLastValues'][_0x3fc2f6['id']]=_0x3fc2f6[_0x1304de(0x2a9)];}}}async function initSystemConfig(_0x53d03a){const _0xe521fe=a0_0x2d9c07;try{const _0x499cc2=await _0x53d03a[_0xe521fe(0x2d9)](_0xe521fe(0x307));if(_0x499cc2&&_0x499cc2[_0xe521fe(0x2ea)])_0x53d03a[_0xe521fe(0x301)]={'latitude':_0x499cc2[_0xe521fe(0x2ea)][_0xe521fe(0x20f)]||0x0,'longitude':_0x499cc2[_0xe521fe(0x2ea)][_0xe521fe(0x1e8)]||0x0,'city':_0x499cc2[_0xe521fe(0x2ea)][_0xe521fe(0x37f)]||''};}catch(_0x425de9){}}async function createAllObjects(_0x3fd5a5){const _0x29146a=a0_0x2d9c07;await _0x3fd5a5[_0x29146a(0x311)](_0x29146a(0x23d),{'type':'channel','common':{'name':_0x29146a(0x23e)},'native':{}}),await _0x3fd5a5[_0x29146a(0x311)](SYSTEM_DP_MODE,{'type':_0x29146a(0x2fa),'common':{'name':_0x29146a(0x22f),'type':_0x29146a(0x1f4),'role':'state','read':!![],'write':!![],'def':SYSTEM_MODES[_0x29146a(0x280)]},'native':{}}),await _0x3fd5a5[_0x29146a(0x251)](_0x29146a(0x349),{'type':'state','common':{'name':_0x29146a(0x2b3),'type':_0x29146a(0x1f4),'role':_0x29146a(0x1ff),'read':!![],'write':![]},'native':{}}),await _0x3fd5a5[_0x29146a(0x251)](_0x29146a(0x2dc),{'type':'state','common':{'name':'Last\x20raw\x20event','type':_0x29146a(0x1f4),'role':_0x29146a(0x365),'read':!![],'write':![]},'native':{}}),await _0x3fd5a5[_0x29146a(0x251)](_0x29146a(0x2e6),{'type':_0x29146a(0x2fa),'common':{'name':'Event\x20History','type':'string','role':_0x29146a(0x365),'read':!![],'write':![]},'native':{}}),await _0x3fd5a5[_0x29146a(0x311)](_0x29146a(0x27a),{'type':'channel','common':{'name':_0x29146a(0x336)},'native':{}}),await _0x3fd5a5[_0x29146a(0x251)](_0x29146a(0x2c7),{'type':_0x29146a(0x2fa),'common':{'name':_0x29146a(0x375),'type':_0x29146a(0x2c0),'role':'button','read':!![],'write':!![]},'native':{}}),await _0x3fd5a5['setObjectNotExistsAsync'](_0x29146a(0x26f),{'type':_0x29146a(0x2fa),'common':{'name':_0x29146a(0x287),'type':_0x29146a(0x2c0),'role':'button','read':!![],'write':!![]},'native':{}}),await _0x3fd5a5[_0x29146a(0x251)](_0x29146a(0x209),{'type':'state','common':{'name':_0x29146a(0x296),'type':_0x29146a(0x2c0),'role':_0x29146a(0x32a),'read':!![],'write':!![]},'native':{}}),await _0x3fd5a5[_0x29146a(0x251)](_0x29146a(0x2f7),{'type':_0x29146a(0x2fa),'common':{'name':_0x29146a(0x273),'type':_0x29146a(0x1f4),'role':_0x29146a(0x1ff),'read':!![],'write':![]},'native':{}}),await _0x3fd5a5[_0x29146a(0x311)](_0x29146a(0x285),{'type':'channel','common':{'name':_0x29146a(0x207)},'native':{}}),await _0x3fd5a5[_0x29146a(0x251)](_0x29146a(0x32f),{'type':_0x29146a(0x2fa),'common':{'name':_0x29146a(0x1d4),'type':'number','role':_0x29146a(0x2a9),'read':!![],'write':![]},'native':{}}),await _0x3fd5a5[_0x29146a(0x251)](_0x29146a(0x24d),{'type':_0x29146a(0x2fa),'common':{'name':_0x29146a(0x338),'type':_0x29146a(0x258),'role':'value','read':!![],'write':![],'def':0.05},'native':{}}),await _0x3fd5a5[_0x29146a(0x251)](_0x29146a(0x1fc),{'type':_0x29146a(0x2fa),'common':{'name':'Last\x20Check','type':_0x29146a(0x1f4),'role':_0x29146a(0x274),'read':!![],'write':![]},'native':{}}),await _0x3fd5a5[_0x29146a(0x311)](_0x29146a(0x22b),{'type':'channel','common':{'name':_0x29146a(0x21e)},'native':{}}),await _0x3fd5a5[_0x29146a(0x251)](_0x29146a(0x2b6),{'type':_0x29146a(0x2fa),'common':{'name':_0x29146a(0x23b),'type':_0x29146a(0x1f4),'role':'date','read':!![],'write':![]},'native':{}}),await _0x3fd5a5[_0x29146a(0x251)](_0x29146a(0x277),{'type':_0x29146a(0x2fa),'common':{'name':_0x29146a(0x27b),'type':_0x29146a(0x2c0),'role':_0x29146a(0x36e),'read':!![],'write':![]},'native':{}}),await _0x3fd5a5[_0x29146a(0x251)](_0x29146a(0x358),{'type':_0x29146a(0x2fa),'common':{'name':_0x29146a(0x334),'type':_0x29146a(0x1f4),'role':'text','read':!![],'write':![]},'native':{}}),await _0x3fd5a5['setObjectNotExistsAsync'](_0x29146a(0x2bc),{'type':_0x29146a(0x2fa),'common':{'name':_0x29146a(0x21a),'type':_0x29146a(0x258),'role':_0x29146a(0x2a9),'read':!![],'write':![]},'native':{}}),await _0x3fd5a5[_0x29146a(0x311)](_0x29146a(0x291),{'type':_0x29146a(0x20d),'common':{'name':_0x29146a(0x327)},'native':{}}),await _0x3fd5a5['setObjectNotExistsAsync'](_0x29146a(0x34f),{'type':_0x29146a(0x2fa),'common':{'name':'Insulation\x20Score','type':'string','role':_0x29146a(0x1ff),'read':!![],'write':![]},'native':{}}),await _0x3fd5a5[_0x29146a(0x251)](_0x29146a(0x256),{'type':_0x29146a(0x2fa),'common':{'name':_0x29146a(0x377),'type':_0x29146a(0x1f4),'role':'text','read':!![],'write':![]},'native':{}}),await _0x3fd5a5['extendObjectAsync'](_0x29146a(0x239),{'type':_0x29146a(0x20d),'common':{'name':_0x29146a(0x239)},'native':{}}),await _0x3fd5a5[_0x29146a(0x311)](LTM_DP_RAW_LOG,{'type':_0x29146a(0x2fa),'common':{'name':'Raw\x20Log','type':'string','role':_0x29146a(0x365),'read':!![],'write':![]},'native':{}}),await _0x3fd5a5[_0x29146a(0x311)](LTM_DP_DAILY_DIGESTS,{'type':_0x29146a(0x2fa),'common':{'name':_0x29146a(0x248),'type':_0x29146a(0x1f4),'role':_0x29146a(0x365),'read':!![],'write':![]},'native':{}}),await _0x3fd5a5['setObjectNotExistsAsync']('LTM.trainingData.sequences',{'type':_0x29146a(0x2fa),'common':{'name':_0x29146a(0x2a4),'type':_0x29146a(0x1f4),'role':_0x29146a(0x365),'read':!![],'write':![]},'native':{}}),await _0x3fd5a5[_0x29146a(0x251)](_0x29146a(0x2af),{'type':_0x29146a(0x2fa),'common':{'name':'Thermodynamics','type':'string','role':'json','read':!![],'write':![]},'native':{}}),await _0x3fd5a5[_0x29146a(0x251)](_0x29146a(0x271),{'type':_0x29146a(0x2fa),'common':{'name':_0x29146a(0x24b),'type':_0x29146a(0x2c0),'role':_0x29146a(0x32a),'read':!![],'write':!![]},'native':{}}),await _0x3fd5a5['setObjectNotExistsAsync'](_0x29146a(0x2a0),{'type':_0x29146a(0x2fa),'common':{'name':'Trigger\x20Briefing','type':_0x29146a(0x2c0),'role':'button','read':!![],'write':!![]},'native':{}}),await _0x3fd5a5['setObjectNotExistsAsync'](_0x29146a(0x29d),{'type':_0x29146a(0x2fa),'common':{'name':_0x29146a(0x284),'type':_0x29146a(0x2c0),'role':_0x29146a(0x2e7),'read':!![],'write':![]},'native':{}}),await _0x3fd5a5[_0x29146a(0x251)](_0x29146a(0x2ff),{'type':_0x29146a(0x2fa),'common':{'name':_0x29146a(0x2d4),'type':'string','role':_0x29146a(0x1de),'read':!![],'write':![]},'native':{}}),await _0x3fd5a5[_0x29146a(0x251)](_0x29146a(0x380),{'type':_0x29146a(0x2fa),'common':{'name':_0x29146a(0x1e1),'type':'string','role':'text','read':!![],'write':![]},'native':{}}),await _0x3fd5a5[_0x29146a(0x251)](_0x29146a(0x342),{'type':'state','common':{'name':_0x29146a(0x1e5),'type':_0x29146a(0x2c0),'role':'indicator','read':!![],'write':![]},'native':{}}),await _0x3fd5a5[_0x29146a(0x251)]('analysis.automation.description',{'type':_0x29146a(0x2fa),'common':{'name':'Description','type':'string','role':'text','read':!![],'write':![]},'native':{}}),await _0x3fd5a5[_0x29146a(0x251)](_0x29146a(0x25d),{'type':'state','common':{'name':_0x29146a(0x2a2),'type':_0x29146a(0x1f4),'role':_0x29146a(0x1ff),'read':!![],'write':![]},'native':{}}),await _0x3fd5a5['setObjectNotExistsAsync'](_0x29146a(0x29a),{'type':_0x29146a(0x2fa),'common':{'name':'Target\x20Value','type':_0x29146a(0x1f4),'role':'text','read':!![],'write':![]},'native':{}}),await _0x3fd5a5['setObjectNotExistsAsync'](_0x29146a(0x2a5),{'type':_0x29146a(0x2fa),'common':{'name':_0x29146a(0x2de),'type':_0x29146a(0x2c0),'role':_0x29146a(0x22c),'read':!![],'write':!![]},'native':{}}),await _0x3fd5a5[_0x29146a(0x251)](_0x29146a(0x33e),{'type':_0x29146a(0x2fa),'common':{'name':_0x29146a(0x308),'type':_0x29146a(0x2c0),'role':_0x29146a(0x32a),'read':!![],'write':!![]},'native':{}});}async function loadSystemMode(_0x3281e2){const _0x3ab77a=a0_0x2d9c07;try{const _0x504e46=await _0x3281e2['getStateAsync'](SYSTEM_DP_MODE);_0x504e46&&_0x504e46[_0x3ab77a(0x212)]&&Object[_0x3ab77a(0x2d5)](SYSTEM_MODES)[_0x3ab77a(0x379)](_0x504e46[_0x3ab77a(0x212)])?_0x3281e2[_0x3ab77a(0x2fb)]=_0x504e46['val']:(_0x3281e2[_0x3ab77a(0x2fb)]=SYSTEM_MODES[_0x3ab77a(0x280)],await _0x3281e2[_0x3ab77a(0x1f6)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x3ab77a(0x280)],'ack':!![]}));}catch(_0x210669){_0x3281e2[_0x3ab77a(0x2fb)]=SYSTEM_MODES['NORMAL'];}}function a0_0x1ebc(_0x1bcb05,_0x3ef953){const _0x5eaac0=a0_0x38ef();return a0_0x1ebc=function(_0xbdf5fb,_0x509eb9){_0xbdf5fb=_0xbdf5fb-0x1d4;let _0x38ef7f=_0x5eaac0[_0xbdf5fb];return _0x38ef7f;},a0_0x1ebc(_0x1bcb05,_0x3ef953);}async function loadRawEventLog(_0x280769){const _0x3855ac=a0_0x2d9c07;try{const _0x219317=await _0x280769[_0x3855ac(0x1eb)](LTM_DP_RAW_LOG);if(_0x219317&&_0x219317[_0x3855ac(0x212)])_0x280769[_0x3855ac(0x29f)]=JSON['parse'](_0x219317['val']);}catch(_0xe3d0c2){_0x280769[_0x3855ac(0x29f)]=[];}}async function saveRawEventLog(_0x10ac51){const _0xb54b92=a0_0x2d9c07;if(_0x10ac51[_0xb54b92(0x29f)][_0xb54b92(0x1e3)]>RAW_LOG_MAX_SIZE)_0x10ac51['rawEventLog'][_0xb54b92(0x328)](0x0,_0x10ac51[_0xb54b92(0x29f)][_0xb54b92(0x1e3)]-RAW_LOG_MAX_SIZE);await _0x10ac51[_0xb54b92(0x1f6)](LTM_DP_RAW_LOG,{'val':JSON['stringify'](_0x10ac51['rawEventLog']),'ack':!![]});}async function loadDailyDigests(_0x497e28){const _0x380eff=a0_0x2d9c07;try{const _0x155bd3=await _0x497e28['getStateAsync'](LTM_DP_DAILY_DIGESTS);if(_0x155bd3&&_0x155bd3[_0x380eff(0x212)])_0x497e28[_0x380eff(0x2cf)]=JSON[_0x380eff(0x37a)](_0x155bd3[_0x380eff(0x212)]);}catch(_0x5c8fa2){_0x497e28[_0x380eff(0x2cf)]=[];}await updateBaselineStatus(_0x497e28);}async function saveDailyDigests(_0x33e2e2,_0x50b205=!![]){const _0x3ce6be=a0_0x2d9c07,_0x4638d6=_0x33e2e2['config'][_0x3ce6be(0x326)]||0x3c;_0x33e2e2['dailyDigests'][_0x3ce6be(0x1e3)]>_0x4638d6&&_0x33e2e2['dailyDigests'][_0x3ce6be(0x328)](0x0,_0x33e2e2[_0x3ce6be(0x2cf)][_0x3ce6be(0x1e3)]-_0x4638d6);await _0x33e2e2[_0x3ce6be(0x1f6)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x3ce6be(0x1f1)](_0x33e2e2[_0x3ce6be(0x2cf)]),'ack':!![]});if(_0x50b205)await updateBaselineStatus(_0x33e2e2);}async function updateAnalysisHistory(_0x382ba5,_0xbb171){const _0x1577c8=a0_0x2d9c07;_0x382ba5['analysisHistory'][_0x1577c8(0x353)](_0xbb171);if(_0x382ba5['analysisHistory'][_0x1577c8(0x1e3)]>HISTORY_MAX_SIZE)_0x382ba5['analysisHistory'][_0x1577c8(0x348)]();await _0x382ba5['setStateAsync'](_0x1577c8(0x28b),{'val':JSON[_0x1577c8(0x1f1)](_0x382ba5[_0x1577c8(0x25c)]),'ack':!![]});}async function updateBaselineStatus(_0x1356ec){const _0x5bbf49=a0_0x2d9c07;if(!_0x1356ec[_0x5bbf49(0x24a)]){await _0x1356ec[_0x5bbf49(0x1f6)](LTM_DP_BASELINE_STATUS,{'val':_0x5bbf49(0x2ca),'ack':!![]});return;}const _0x3567f4=_0x1356ec['dailyDigests'][_0x5bbf49(0x1e3)]>=(_0x1356ec[_0x5bbf49(0x1f2)][_0x5bbf49(0x23f)]||0x7)?_0x5bbf49(0x1f3)+_0x1356ec[_0x5bbf49(0x2cf)][_0x5bbf49(0x1e3)]+_0x5bbf49(0x1e6):_0x5bbf49(0x23c)+_0x1356ec[_0x5bbf49(0x2cf)]['length']+'/'+(_0x1356ec['config'][_0x5bbf49(0x23f)]||0x7)+')';await _0x1356ec['setStateAsync'](LTM_DP_BASELINE_STATUS,{'val':_0x3567f4,'ack':!![]});}async function initSensorSubscriptions(_0x543400){const _0x4319b4=a0_0x2d9c07,_0x332753=_0x543400[_0x4319b4(0x1f2)][_0x4319b4(0x269)];if(_0x332753)for(const _0x2e26eb of _0x332753){await _0x543400[_0x4319b4(0x368)](_0x2e26eb['id']);}}async function initPresenceSubscriptions(_0x135758){const _0x2cb860=a0_0x2d9c07,_0x4a9c40=_0x135758['config'][_0x2cb860(0x293)];if(_0x4a9c40)for(const _0x132d62 of _0x4a9c40){await _0x135758[_0x2cb860(0x368)](_0x132d62);}}async function setupTelegramListener(_0x1ff125){const _0x314f7c=a0_0x2d9c07,_0x5b0759=_0x1ff125[_0x314f7c(0x1f2)][_0x314f7c(0x233)];if(_0x1ff125[_0x314f7c(0x1f2)][_0x314f7c(0x2be)]&&_0x5b0759)await _0x1ff125[_0x314f7c(0x368)](_0x5b0759+_0x314f7c(0x2bf));}async function checkWifiPresence(_0x58590d){const _0x526d80=a0_0x2d9c07;try{const _0x2ccc8e=_0x58590d[_0x526d80(0x1f2)]['presenceDevices']||[];let _0x598b51=![];const _0x43e22e=[];for(const _0x1e1c69 of _0x2ccc8e){try{const _0x14d3ac=await _0x58590d[_0x526d80(0x2c5)](_0x1e1c69);_0x14d3ac&&(_0x14d3ac['val']===!![]||_0x14d3ac[_0x526d80(0x212)]===_0x526d80(0x28e)||_0x14d3ac['val']===0x1)&&(_0x598b51=!![],_0x43e22e[_0x526d80(0x305)](_0x1e1c69));}catch(_0x3b2765){}}return await _0x58590d[_0x526d80(0x1f6)](_0x526d80(0x349),{'val':_0x43e22e[_0x526d80(0x245)](',\x20'),'ack':!![]}),_0x598b51&&(_0x58590d[_0x526d80(0x345)]&&(_0x58590d['log'][_0x526d80(0x318)](_0x526d80(0x214)),abortExitTimer(_0x58590d)),!_0x58590d[_0x526d80(0x231)]&&_0x58590d[_0x526d80(0x2fb)]===SYSTEM_MODES['NORMAL']&&await setPresence(_0x58590d,!![])),_0x598b51;}catch(_0x2bdd48){return![];}}function startExitTimer(_0x5c0878){const _0x438a00=a0_0x2d9c07;abortExitTimer(_0x5c0878),_0x5c0878[_0x438a00(0x2d0)]=!![],_0x5c0878[_0x438a00(0x304)]=setTimeout(()=>{const _0x5c32ec=_0x438a00;_0x5c0878[_0x5c32ec(0x2d0)]=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),_0x5c0878[_0x438a00(0x345)]=setTimeout(()=>{const _0x2fd626=_0x438a00;setPresence(_0x5c0878,![]),_0x5c0878[_0x2fd626(0x345)]=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}function abortExitTimer(_0x59a598){const _0x4e95e2=a0_0x2d9c07;if(_0x59a598[_0x4e95e2(0x345)])clearTimeout(_0x59a598[_0x4e95e2(0x345)]);if(_0x59a598['exitGraceTimer'])clearTimeout(_0x59a598['exitGraceTimer']);_0x59a598[_0x4e95e2(0x345)]=null,_0x59a598[_0x4e95e2(0x304)]=null,_0x59a598[_0x4e95e2(0x2d0)]=![];}async function setPresence(_0x3f81d9,_0x2e134f){const _0x34ca3e=a0_0x2d9c07;if(_0x3f81d9[_0x34ca3e(0x231)]===_0x2e134f)return;_0x3f81d9['isPresent']=_0x2e134f,await _0x3f81d9[_0x34ca3e(0x1f6)](_0x34ca3e(0x22e),{'val':_0x2e134f,'ack':!![]});}async function executeAutomationAction(_0x991867){const _0x23ce3e=a0_0x2d9c07;try{const _0x1c4cc1=await _0x991867[_0x23ce3e(0x1eb)](_0x23ce3e(0x25d)),_0x2bd52e=await _0x991867['getStateAsync'](_0x23ce3e(0x29a));if(_0x1c4cc1&&_0x1c4cc1[_0x23ce3e(0x212)]&&_0x2bd52e){const _0x1c1446=_0x1c4cc1[_0x23ce3e(0x212)];let _0x5cbe48=_0x2bd52e[_0x23ce3e(0x212)];try{_0x5cbe48=JSON['parse'](_0x5cbe48);}catch(_0x3f9bf1){}_0x991867[_0x23ce3e(0x21f)][_0x23ce3e(0x318)](_0x23ce3e(0x36b)+_0x1c1446+_0x23ce3e(0x333)+_0x5cbe48),await _0x991867[_0x23ce3e(0x2dd)](_0x1c1446,_0x5cbe48);}else _0x991867[_0x23ce3e(0x21f)][_0x23ce3e(0x356)](_0x23ce3e(0x30f));}catch(_0x2593b6){_0x991867[_0x23ce3e(0x21f)]['error'](_0x23ce3e(0x31f)+_0x2593b6[_0x23ce3e(0x341)]);}}async function processSensorEvent(_0x2eccec,_0x30321c,_0x53cd19,_0x4118b8){const _0x594101=a0_0x2d9c07;if(!_0x4118b8)return;const _0x509557=_0x53cd19[_0x594101(0x212)],_0x4f2757=Date[_0x594101(0x34c)](),_0x3d2809=_0x2eccec[_0x594101(0x378)][_0x30321c];_0x2eccec['sensorLastValues'][_0x30321c]=_0x509557;if(!_0x4118b8[_0x594101(0x329)]&&_0x3d2809!=undefined&&_0x3d2809==_0x509557)return;const _0x59cfcd=(_0x4118b8[_0x594101(0x229)]||'')[_0x594101(0x361)](),_0x43b4f2=_0x59cfcd[_0x594101(0x379)](_0x594101(0x2ba))||_0x59cfcd[_0x594101(0x379)](_0x594101(0x346))||_0x59cfcd[_0x594101(0x379)](_0x594101(0x278))||_0x59cfcd[_0x594101(0x379)]('heizung');_0x2eccec['isProVersion']&&_0x43b4f2&&recordThermodynamics(_0x2eccec,_0x30321c,_0x509557,_0x4118b8[_0x594101(0x220)]);const _0x16a646={'timestamp':_0x4f2757,'id':_0x30321c,'name':_0x4118b8[_0x594101(0x2db)],'type':_0x4118b8[_0x594101(0x229)],'location':_0x4118b8[_0x594101(0x220)],'value':_0x509557};_0x2eccec[_0x594101(0x2f2)][_0x594101(0x353)](_0x16a646);if(_0x2eccec[_0x594101(0x2f2)]['length']>HISTORY_MAX_SIZE)_0x2eccec[_0x594101(0x2f2)][_0x594101(0x348)]();await _0x2eccec['setStateAsync'](_0x594101(0x2dc),{'val':JSON[_0x594101(0x1f1)](_0x16a646),'ack':!![]}),await _0x2eccec[_0x594101(0x1f6)](_0x594101(0x2e6),{'val':JSON[_0x594101(0x1f1)](_0x2eccec[_0x594101(0x2f2)]),'ack':!![]});_0x2eccec[_0x594101(0x24a)]&&(_0x2eccec[_0x594101(0x29f)]['push'](_0x16a646),await saveRawEventLog(_0x2eccec),recordSequence(_0x2eccec,_0x16a646));if(_0x4118b8[_0x594101(0x315)]&&_0x509557===!![]){if(_0x2eccec[_0x594101(0x231)]&&!_0x2eccec[_0x594101(0x2d0)])startExitTimer(_0x2eccec);else{if(!_0x2eccec['isPresent'])setPresence(_0x2eccec,!![]);}}else{if(_0x4118b8['type']==='motion'&&_0x509557===!![]){if(_0x2eccec[_0x594101(0x345)])abortExitTimer(_0x2eccec);if(!_0x2eccec[_0x594101(0x231)]&&_0x2eccec[_0x594101(0x2fb)]===SYSTEM_MODES[_0x594101(0x280)])setPresence(_0x2eccec,!![]);}}}async function recordThermodynamics(_0x196540,_0x5b51ad,_0x296085,_0x218b3c){const _0x5d86bc=a0_0x2d9c07,_0x3f00fe=await getOutsideTemperatureNumeric(_0x196540),_0x20c1a8=await _0x196540['getStateAsync'](_0x5d86bc(0x2af));let _0x4ce3d4=[];if(_0x20c1a8&&_0x20c1a8[_0x5d86bc(0x212)])try{_0x4ce3d4=JSON[_0x5d86bc(0x37a)](_0x20c1a8['val']);}catch(_0x3dc538){}_0x4ce3d4[_0x5d86bc(0x305)]({'ts':Date[_0x5d86bc(0x34c)](),'room':_0x218b3c||_0x5d86bc(0x2a6),'t_in':_0x296085,'t_out':_0x3f00fe});if(_0x4ce3d4[_0x5d86bc(0x1e3)]>THERMO_LOG_SIZE)_0x4ce3d4['shift']();await _0x196540[_0x5d86bc(0x1f6)](_0x5d86bc(0x2af),{'val':JSON[_0x5d86bc(0x1f1)](_0x4ce3d4),'ack':!![]});}async function getOutsideTemperatureNumeric(_0x1be45b){const _0x5888be=a0_0x2d9c07;if(_0x1be45b[_0x5888be(0x1f2)][_0x5888be(0x1f9)])try{const _0x4056be=await _0x1be45b[_0x5888be(0x2c5)](_0x1be45b[_0x5888be(0x1f2)][_0x5888be(0x1f9)]);if(_0x4056be&&_0x4056be['val']!==undefined&&_0x4056be['val']!==null)return parseFloat(_0x4056be[_0x5888be(0x212)]);}catch(_0x59bf92){}const _0x4064b4=_0x1be45b['config'][_0x5888be(0x276)];if(!_0x1be45b[_0x5888be(0x1f2)][_0x5888be(0x2e2)]||!_0x4064b4)return null;try{let _0x1aadc8='';if(_0x4064b4['includes'](_0x5888be(0x228)))_0x1aadc8=_0x4064b4+_0x5888be(0x2a8);else{if(_0x4064b4[_0x5888be(0x379)](_0x5888be(0x29e)))_0x1aadc8=_0x4064b4+'.NextHours.Location_1.Day_1.current.temp_value';else{if(_0x4064b4[_0x5888be(0x379)]('openweathermap'))_0x1aadc8=_0x4064b4+'.forecast.current.temperature';else{if(_0x4064b4[_0x5888be(0x379)](_0x5888be(0x31b)))_0x1aadc8=_0x4064b4+_0x5888be(0x30b);}}}if(_0x1aadc8){const _0x2dcab2=await _0x1be45b['getForeignStateAsync'](_0x1aadc8);if(_0x2dcab2&&_0x2dcab2[_0x5888be(0x212)]!==undefined&&_0x2dcab2[_0x5888be(0x212)]!==null)return parseFloat(_0x2dcab2['val']);}}catch(_0x22b104){}return null;}async function recordSequence(_0x3fd526,_0x575e63){const _0x345acd=a0_0x2d9c07,_0x125c0a=(_0x575e63[_0x345acd(0x229)]||'')[_0x345acd(0x361)](),_0x25332b=[_0x345acd(0x206),'bewegung',_0x345acd(0x1e2),_0x345acd(0x2ce),_0x345acd(0x297),_0x345acd(0x2fc),'t√ºr','window',_0x345acd(0x2c3),_0x345acd(0x1fa),_0x345acd(0x27e),'light',_0x345acd(0x257),'switch',_0x345acd(0x28a),'dimmer','lampe'];if(!_0x25332b['some'](_0x4a6f9d=>_0x125c0a[_0x345acd(0x379)](_0x4a6f9d)))return;if(!_0x575e63[_0x345acd(0x2a9)])return;if(sequenceTimer)clearTimeout(sequenceTimer);activeSequence[_0x345acd(0x305)]({'loc':_0x575e63['location']||_0x345acd(0x2a6),'id':_0x575e63['id'],'ts':Date[_0x345acd(0x34c)]()}),sequenceTimer=setTimeout(async()=>{const _0x147d11=_0x345acd;if(activeSequence[_0x147d11(0x1e3)]>0x1)await saveCompletedSequence(_0x3fd526);activeSequence=[];},SEQUENCE_TIMEOUT_MS);}async function saveCompletedSequence(_0x55fd4f){const _0x2d1def=a0_0x2d9c07;try{const _0x3536f1=await _0x55fd4f[_0x2d1def(0x1eb)](_0x2d1def(0x337));let _0xba940=[];if(_0x3536f1&&_0x3536f1[_0x2d1def(0x212)])try{_0xba940=JSON['parse'](_0x3536f1['val']);}catch(_0x4cc5c5){}const _0xfe0369=activeSequence[0x0]['ts'],_0x7c4bf0=activeSequence[_0x2d1def(0x29b)](_0xf22716=>({'loc':_0xf22716[_0x2d1def(0x381)],'t_delta':Math[_0x2d1def(0x350)]((_0xf22716['ts']-_0xfe0369)/0x3e8)})),_0x3809b2={'timestamp':new Date(_0xfe0369)[_0x2d1def(0x2ec)](),'steps':_0x7c4bf0,'duration':Math[_0x2d1def(0x350)]((activeSequence[activeSequence[_0x2d1def(0x1e3)]-0x1]['ts']-_0xfe0369)/0x3e8),'daytime':new Date(_0xfe0369)[_0x2d1def(0x219)]()};_0xba940[_0x2d1def(0x305)](_0x3809b2);if(_0xba940['length']>MAX_TRAINING_SET_SIZE)_0xba940[_0x2d1def(0x35a)]();await _0x55fd4f[_0x2d1def(0x1f6)]('LTM.trainingData.sequences',{'val':JSON[_0x2d1def(0x1f1)](_0xba940),'ack':!![]}),runSecurityCheck(_0x55fd4f,_0x3809b2);}catch(_0x4ca6e9){_0x55fd4f[_0x2d1def(0x21f)][_0x2d1def(0x302)](_0x2d1def(0x27c)+_0x4ca6e9['message']);}}function runSecurityCheck(_0x2da830,_0x18dc8b){const _0x302d12=a0_0x2d9c07;if(!_0x2da830[_0x302d12(0x24a)])return;sendToPython(_0x2da830,_0x302d12(0x240),{'sequence':_0x18dc8b});}function sendToPython(_0x265728,_0x22bbc8,_0x56f5fb={}){const _0x484a45=a0_0x2d9c07;if(!_0x265728[_0x484a45(0x32d)]||!_0x265728[_0x484a45(0x32d)][_0x484a45(0x321)][_0x484a45(0x298)])return;const _0x5670b1=JSON[_0x484a45(0x1f1)]({'command':_0x22bbc8,..._0x56f5fb});try{_0x265728[_0x484a45(0x32d)][_0x484a45(0x321)][_0x484a45(0x2da)](_0x5670b1+'\x0a');}catch(_0x50e8ba){}}function startPythonService(_0x550771){const _0x3f5834=a0_0x2d9c07;let _0x42186a=_0x3f5834(0x2f6);if(fs[_0x3f5834(0x2c1)](PYTHON_EXE))_0x42186a=PYTHON_EXE;try{const _0xc3639=path[_0x3f5834(0x245)](__dirname,_0x3f5834(0x1e0),_0x3f5834(0x32e));_0x550771[_0x3f5834(0x32d)]=spawn(_0x42186a,[_0xc3639]),_0x550771[_0x3f5834(0x32d)][_0x3f5834(0x1f8)]['on'](_0x3f5834(0x2b8),_0x398537=>{const _0x446e64=_0x3f5834,_0xe3e4f4=_0x398537[_0x446e64(0x2bb)]()[_0x446e64(0x1ef)]('\x0a');_0xe3e4f4[_0x446e64(0x22d)](_0x2a9f65=>{const _0x66d869=_0x446e64,_0x4fbdcf=_0x2a9f65[_0x66d869(0x242)]();if(!_0x4fbdcf)return;if(_0x4fbdcf['startsWith'](_0x66d869(0x2f4)))_0x550771[_0x66d869(0x21f)][_0x66d869(0x272)](_0x66d869(0x1e9)+_0x4fbdcf['substring'](0x5)[_0x66d869(0x242)]());else{if(_0x4fbdcf[_0x66d869(0x211)](_0x66d869(0x313)))try{const _0x97f5b7=JSON['parse'](_0x4fbdcf[_0x66d869(0x264)](0x8)['trim']());handlePythonResult(_0x550771,_0x97f5b7);}catch(_0x10261a){}}});}),_0x550771[_0x3f5834(0x32d)]['on'](_0x3f5834(0x1fe),_0x5510be=>{const _0x3de30=_0x3f5834;_0x550771[_0x3de30(0x32d)]=null;});}catch(_0x188fb2){_0x550771[_0x3f5834(0x21f)]['error'](_0x3f5834(0x28c)+_0x188fb2[_0x3f5834(0x341)]);}}function stopPythonService(_0x5d7d6e){const _0x2aba5f=a0_0x2d9c07;if(_0x5d7d6e[_0x2aba5f(0x32d)]){try{_0x5d7d6e[_0x2aba5f(0x32d)][_0x2aba5f(0x247)]();}catch(_0x102f7a){}_0x5d7d6e[_0x2aba5f(0x32d)]=null;}}function handlePythonResult(_0x6de3dc,_0x2b6d4b){const _0x69c548=a0_0x2d9c07;if(_0x2b6d4b['type']===_0x69c548(0x261))_0x6de3dc[_0x69c548(0x21f)][_0x69c548(0x272)](_0x69c548(0x275));else{if(_0x2b6d4b[_0x69c548(0x229)]==='SECURITY_RESULT'){const {anomaly_score:_0x102ade,is_anomaly:_0x3a143e,threshold:_0x4633dd,explanation:_0x29fd6d}=_0x2b6d4b[_0x69c548(0x2c9)];_0x6de3dc[_0x69c548(0x21f)][_0x69c548(0x318)](_0x69c548(0x371)+_0x102ade[_0x69c548(0x21b)](0x5)+_0x69c548(0x323)+(_0x3a143e?_0x69c548(0x237):'OK')),_0x6de3dc['setStateAsync'](_0x69c548(0x32f),{'val':_0x102ade,'ack':!![]}),_0x6de3dc[_0x69c548(0x1f6)](_0x69c548(0x1fc),{'val':new Date()[_0x69c548(0x2ec)](),'ack':!![]});if(_0x4633dd)_0x6de3dc['setStateAsync'](_0x69c548(0x24d),{'val':_0x4633dd,'ack':!![]});if(_0x3a143e){let _0x5df3b5=_0x69c548(0x32b)+_0x102ade[_0x69c548(0x21b)](0x4)+')';_0x29fd6d&&_0x29fd6d!==_0x69c548(0x2a6)&&(_0x5df3b5+=_0x69c548(0x1d5)+_0x29fd6d),_0x6de3dc[_0x69c548(0x1f6)](_0x69c548(0x29d),{'val':!![],'ack':!![]}),_0x6de3dc['setStateAsync']('analysis.alertReason',{'val':_0x5df3b5,'ack':!![]}),sendNotification(_0x6de3dc,'‚ö†Ô∏è\x20SECURITY\x20ALARM:\x20'+_0x5df3b5,![],!![]);}}else{if(_0x2b6d4b[_0x69c548(0x229)]===_0x69c548(0x30d)){const _0x5b34d2=_0x2b6d4b[_0x69c548(0x2c9)]['details']||'',_0x3917eb=_0x2b6d4b['payload']['threshold'],_0x2ae192=_0x2b6d4b[_0x69c548(0x2c9)][_0x69c548(0x259)]?_0x69c548(0x1f7)+new Date()['toLocaleTimeString']()+'\x20('+_0x5b34d2+')':'Failed:\x20'+_0x2b6d4b[_0x69c548(0x2c9)]['reason'];_0x6de3dc[_0x69c548(0x1f6)](_0x69c548(0x2f7),{'val':_0x2ae192,'ack':!![]}),_0x2b6d4b[_0x69c548(0x2c9)][_0x69c548(0x259)]&&_0x3917eb&&(_0x6de3dc['log'][_0x69c548(0x318)](_0x69c548(0x1ec)+_0x3917eb),_0x6de3dc[_0x69c548(0x1f6)](_0x69c548(0x24d),{'val':_0x3917eb,'ack':!![]}));}else{if(_0x2b6d4b[_0x69c548(0x229)]===_0x69c548(0x374)){if(_0x2b6d4b[_0x69c548(0x2c9)]['success'])try{const _0x406d18=JSON[_0x69c548(0x37a)](_0x2b6d4b[_0x69c548(0x2c9)][_0x69c548(0x373)]);if(_0x406d18[_0x69c548(0x310)])_0x6de3dc[_0x69c548(0x1f6)](_0x69c548(0x34f),{'val':JSON['stringify'](_0x406d18['insulation']),'ack':!![]});if(_0x406d18['heating'])_0x6de3dc['setStateAsync']('analysis.energy.heatingScore',{'val':JSON[_0x69c548(0x1f1)](_0x406d18[_0x69c548(0x21d)]),'ack':!![]});}catch(_0x43388d){}}else{if(_0x2b6d4b['type']===_0x69c548(0x2d8)){if(_0x2b6d4b[_0x69c548(0x2c9)]['success'])_0x6de3dc['log'][_0x69c548(0x318)](_0x69c548(0x33a));}else{if(_0x2b6d4b[_0x69c548(0x229)]===_0x69c548(0x314))_0x6de3dc[_0x69c548(0x1f6)](_0x69c548(0x2b6),{'val':new Date()[_0x69c548(0x2ec)](),'ack':!![]}),_0x6de3dc[_0x69c548(0x1f6)](_0x69c548(0x277),{'val':_0x2b6d4b['payload'][_0x69c548(0x30a)],'ack':!![]});else _0x2b6d4b[_0x69c548(0x229)]===_0x69c548(0x286)&&(_0x6de3dc['setStateAsync']('analysis.health.trendDiagnosis',{'val':_0x2b6d4b[_0x69c548(0x2c9)][_0x69c548(0x1d9)],'ack':!![]}),_0x6de3dc['setStateAsync']('analysis.health.trendValue',{'val':_0x2b6d4b[_0x69c548(0x2c9)][_0x69c548(0x253)],'ack':!![]}));}}}}}}function runPythonHealthCheck(_0x274735){const _0x20832a=a0_0x2d9c07;if(!_0x274735['dailyDigests']||_0x274735[_0x20832a(0x2cf)]['length']<0x2)return;const _0x4c9e31=_0x274735[_0x20832a(0x2cf)][_0x20832a(0x29b)](_0x50acc0=>{const _0x421dca=_0x20832a,_0x4dbffd=(_0x50acc0[_0x421dca(0x205)]||'')[_0x421dca(0x361)]();return ACTIVITY_LEVEL_MAP[_0x4dbffd]||0x32;});sendToPython(_0x274735,_0x20832a(0x289),{'values':_0x4c9e31,'tag':_0x20832a(0x241)});}async function handleTelegramResponse(_0x28a613,_0x587935){const _0x327e51=a0_0x2d9c07;let _0x2ad9d6=_0x587935;_0x587935[_0x327e51(0x211)]('[')&&(_0x2ad9d6=_0x587935[_0x327e51(0x264)](_0x587935['indexOf'](']')+0x1));if(_0x2ad9d6===_0x327e51(0x2b9))await _0x28a613['setStateAsync'](_0x327e51(0x29d),{'val':![],'ack':!![]}),await _0x28a613[_0x327e51(0x1f6)](_0x327e51(0x2ff),{'val':_0x327e51(0x254),'ack':!![]}),_0x28a613['lastAlertState']=![],sendNotification(_0x28a613,'‚úÖ\x20Alarm\x20quittiert.\x20System\x20normal.',![]);else _0x2ad9d6===_0x327e51(0x25f)&&sendNotification(_0x28a613,_0x327e51(0x281),![],!![]);}async function sendNotification(_0x23c5f5,_0x3884e1,_0x44694f=![],_0x51e06a=![]){const _0x113387=a0_0x2d9c07,_0x12f415=_0x23c5f5[_0x113387(0x1f2)];if(_0x12f415[_0x113387(0x2be)]){let _0x48fe0b={};(_0x3884e1[_0x113387(0x379)](_0x113387(0x283))||_0x51e06a)&&(_0x48fe0b={'reply_markup':{'inline_keyboard':[[{'text':_0x113387(0x354),'callback_data':_0x113387(0x2b9)}],[{'text':_0x113387(0x357),'callback_data':_0x113387(0x25f)}]]}}),await _0x23c5f5[_0x113387(0x2b4)](_0x12f415['notifyTelegramInstance'],'send',{'text':_0x3884e1,'user':_0x12f415[_0x113387(0x344)],..._0x48fe0b});}if(_0x12f415[_0x113387(0x282)]){let _0x1593f9={'message':_0x3884e1,'title':_0x51e06a?_0x113387(0x363):_0x113387(0x243),'priority':_0x51e06a?0x2:0x1,'device':_0x12f415[_0x113387(0x2ef)]};_0x51e06a&&(_0x1593f9['retry']=0x1e,_0x1593f9[_0x113387(0x260)]=0xe10,_0x1593f9[_0x113387(0x330)]='siren'),await _0x23c5f5[_0x113387(0x2b4)](_0x12f415[_0x113387(0x2a7)],'send',_0x1593f9);}_0x12f415['notifyEmailEnabled']&&await _0x23c5f5[_0x113387(0x2b4)](_0x12f415['notifyEmailInstance'],_0x113387(0x215),{'text':_0x3884e1,'to':_0x12f415[_0x113387(0x31a)]});}async function runGeminiAnalysis(_0x1e3096,_0x983b85=''){const _0x42e588=a0_0x2d9c07;if(!_0x1e3096[_0x42e588(0x355)])return;if(_0x1e3096[_0x42e588(0x2f2)][_0x42e588(0x1e3)]===0x0)return;const _0x20227a=_0x1e3096[_0x42e588(0x2f2)]['slice'](0x0,0xf),_0x4b5790=await getWeatherContext(_0x1e3096),_0x5a87eb=_0x1e3096['currentSystemMode'],_0x59634c=PERSONA_MAPPING[_0x1e3096[_0x42e588(0x1f2)][_0x42e588(0x226)]||_0x42e588(0x216)],_0x568050=_0x1e3096['config']['livingContext']||_0x42e588(0x1ee);let _0x2dfa46=_0x42e588(0x232);try{const _0x53eb3f=await _0x1e3096[_0x42e588(0x1eb)](_0x42e588(0x349));if(_0x53eb3f&&_0x53eb3f[_0x42e588(0x212)])_0x2dfa46=_0x53eb3f[_0x42e588(0x212)];}catch(_0x4f11cc){}let _0x5876f7=![];try{const _0xe15a87=await _0x1e3096[_0x42e588(0x1eb)]('analysis.automation.autoApply');if(_0xe15a87&&_0xe15a87['val'])_0x5876f7=!![];}catch(_0x3eaefd){}const _0x5ecac2=_0x42e588(0x351)+_0x59634c+_0x42e588(0x324)+_0x568050+_0x42e588(0x255)+_0x5a87eb+_0x42e588(0x2e4)+_0x4b5790+'.\x20ANWESEND:\x20'+_0x2dfa46+_0x42e588(0x2a1)+JSON[_0x42e588(0x1f1)](_0x20227a)+_0x42e588(0x339)+_0x983b85+_0x42e588(0x347);try{const _0x13f11e=await _0x1e3096['geminiModel'][_0x42e588(0x360)](_0x5ecac2),_0x21dde6=JSON[_0x42e588(0x37a)](_0x13f11e[_0x42e588(0x2e3)][_0x42e588(0x1ff)]()[_0x42e588(0x37e)](/```json|```/g,'')[_0x42e588(0x242)]());await _0x1e3096[_0x42e588(0x1f6)](_0x42e588(0x32c),{'val':JSON[_0x42e588(0x1f1)](_0x21dde6),'ack':!![]});if(_0x21dde6[_0x42e588(0x1f5)])await _0x1e3096[_0x42e588(0x1f6)](_0x42e588(0x380),{'val':_0x21dde6[_0x42e588(0x1f5)],'ack':!![]});const _0x3cecd4={'timestamp':Date[_0x42e588(0x34c)](),'id':Date[_0x42e588(0x34c)]()['toString'](),'analysis':{'activity':{'summary':_0x21dde6[_0x42e588(0x1f5)],'isAlert':_0x21dde6['isAlert'],'alertReason':_0x21dde6['alertReason']},'comfort':{'automationProposal':_0x21dde6[_0x42e588(0x36d)]}}};await updateAnalysisHistory(_0x1e3096,_0x3cecd4);const _0x37a61d=_0x21dde6[_0x42e588(0x1da)]||![];_0x37a61d!==_0x1e3096['lastAlertState']&&(await _0x1e3096[_0x42e588(0x1f6)](_0x42e588(0x29d),{'val':_0x37a61d,'ack':!![]}),_0x1e3096[_0x42e588(0x26b)]=_0x37a61d,_0x37a61d&&(await _0x1e3096['setStateAsync'](_0x42e588(0x2ff),{'val':_0x21dde6[_0x42e588(0x25b)],'ack':!![]}),sendNotification(_0x1e3096,'‚ö†Ô∏è\x20ALARM:\x20'+_0x21dde6['alertReason'],![],_0x21dde6['isEmergency'])));if(_0x21dde6[_0x42e588(0x36d)]&&_0x21dde6[_0x42e588(0x36d)][_0x42e588(0x382)]){await _0x1e3096['setStateAsync'](_0x42e588(0x342),{'val':!![],'ack':!![]}),await _0x1e3096[_0x42e588(0x1f6)](_0x42e588(0x31e),{'val':_0x21dde6[_0x42e588(0x36d)][_0x42e588(0x312)],'ack':!![]}),await _0x1e3096['setStateAsync'](_0x42e588(0x25d),{'val':_0x21dde6[_0x42e588(0x36d)]['targetId'],'ack':!![]}),await _0x1e3096[_0x42e588(0x1f6)](_0x42e588(0x29a),{'val':JSON[_0x42e588(0x1f1)](_0x21dde6[_0x42e588(0x36d)][_0x42e588(0x2f0)]),'ack':!![]});if(_0x5876f7)executeAutomationAction(_0x1e3096);}}catch(_0x5725da){_0x1e3096[_0x42e588(0x21f)][_0x42e588(0x302)]('Gemini\x20Error:\x20'+_0x5725da[_0x42e588(0x341)]);}}async function createDailyDigest(_0x156ef0){const _0xdbdc9c=a0_0x2d9c07;if(!_0x156ef0['isProVersion'])return;await _0x156ef0[_0xdbdc9c(0x1f6)](LTM_DP_STATUS,{'val':'Started...','ack':!![]});if(!_0x156ef0['geminiModel']||_0x156ef0['rawEventLog'][_0xdbdc9c(0x1e3)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x156ef0[_0xdbdc9c(0x1f6)](LTM_DP_STATUS,{'val':_0xdbdc9c(0x2d3),'ack':!![]});return;}const _0x4dde71=JSON['parse'](JSON['stringify'](_0x156ef0[_0xdbdc9c(0x29f)])),_0x336585=_0x4dde71[_0xdbdc9c(0x1e3)],_0x3980ad=_0xdbdc9c(0x221)+JSON['stringify'](_0x4dde71);try{const _0xc0cb2b=await _0x156ef0[_0xdbdc9c(0x355)][_0xdbdc9c(0x360)](_0x3980ad),_0x52558c=JSON[_0xdbdc9c(0x37a)](_0xc0cb2b[_0xdbdc9c(0x2e3)][_0xdbdc9c(0x1ff)]()[_0xdbdc9c(0x37e)](/```json|```/g,'')[_0xdbdc9c(0x242)]()),_0x3a1aff={'timestamp':new Date()['toISOString'](),'eventCount':_0x336585,'summary':_0x52558c[_0xdbdc9c(0x1f5)]||_0xdbdc9c(0x235),'activityLevel':_0x52558c[_0xdbdc9c(0x205)]||'normal','systemMode':_0x156ef0[_0xdbdc9c(0x2fb)]};_0x156ef0[_0xdbdc9c(0x2cf)][_0xdbdc9c(0x305)](_0x3a1aff),await saveDailyDigests(_0x156ef0),_0x156ef0[_0xdbdc9c(0x29f)]=[],await saveRawEventLog(_0x156ef0),await _0x156ef0['setStateAsync'](LTM_DP_STATUS,{'val':'Success','ack':!![]});if(_0x156ef0['isProVersion'])sendToPython(_0x156ef0,'ANALYZE_HEALTH',{'digest':_0x3a1aff});}catch(_0x3f3bf1){_0x156ef0[_0xdbdc9c(0x21f)][_0xdbdc9c(0x302)](_0x3f3bf1[_0xdbdc9c(0x341)]);}}function setupLtmScheduler(_0x19b076){const _0xe5332e=a0_0x2d9c07;try{if(_0x19b076['ltmJob'])_0x19b076[_0xe5332e(0x227)]['cancel']();if(!_0x19b076[_0xe5332e(0x24a)])return;_0x19b076[_0xe5332e(0x227)]=schedule[_0xe5332e(0x2ab)](LTM_SCHEDULE,()=>createDailyDigest(_0x19b076));}catch(_0x48adf4){_0x19b076['log'][_0xe5332e(0x302)](_0xe5332e(0x270)+_0x48adf4['message']);}}function setupModeResetScheduler(_0x25c2fb){const _0x147b0c=a0_0x2d9c07;try{if(_0x25c2fb[_0x147b0c(0x28f)])_0x25c2fb[_0x147b0c(0x28f)][_0x147b0c(0x1d8)]();_0x25c2fb[_0x147b0c(0x28f)]=schedule['scheduleJob'](MODE_RESET_SCHEDULE,async()=>{const _0x2bb451=_0x147b0c;await loadSystemMode(_0x25c2fb),AUTO_RESET_MODES['includes'](_0x25c2fb[_0x2bb451(0x2fb)])&&await _0x25c2fb[_0x2bb451(0x1f6)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x2bb451(0x280)],'ack':![]});});}catch(_0x13989d){_0x25c2fb['log'][_0x147b0c(0x302)](_0x147b0c(0x230)+_0x13989d[_0x147b0c(0x341)]);}}function setupDriftAnalysisScheduler(_0x242f72){const _0x1a1270=a0_0x2d9c07;try{if(_0x242f72[_0x1a1270(0x21c)])clearInterval(_0x242f72['driftAnalysisTimer']);if(!_0x242f72[_0x1a1270(0x24a)])return;_0x242f72[_0x1a1270(0x21c)]=setInterval(()=>runBaselineDriftAnalysis(_0x242f72),(_0x242f72[_0x1a1270(0x1f2)][_0x1a1270(0x2d1)]||0x18)*0x36ee80),setTimeout(()=>runBaselineDriftAnalysis(_0x242f72),0x1388);}catch(_0x273e0e){_0x242f72[_0x1a1270(0x21f)][_0x1a1270(0x302)]('Drift\x20Sched\x20Error:\x20'+_0x273e0e[_0x1a1270(0x341)]);}}function setupBriefingScheduler(_0x1ad149){const _0x572dda=a0_0x2d9c07;try{if(_0x1ad149[_0x572dda(0x376)])_0x1ad149[_0x572dda(0x376)][_0x572dda(0x1d8)]();if(!_0x1ad149[_0x572dda(0x1f2)][_0x572dda(0x2b1)])return;const _0xf5f17=(_0x1ad149[_0x572dda(0x1f2)][_0x572dda(0x27f)]||_0x572dda(0x343))['split'](':'),_0x4c9d20=parseInt(_0xf5f17[0x0])||0x8,_0x2ad4d3=parseInt(_0xf5f17[0x1])||0x0,_0x316626=_0x2ad4d3+'\x20'+_0x4c9d20+_0x572dda(0x2e0);_0x1ad149[_0x572dda(0x376)]=schedule[_0x572dda(0x2ab)](_0x316626,()=>{sendMorningBriefing(_0x1ad149);});}catch(_0x4b9fc7){_0x1ad149[_0x572dda(0x21f)]['error']('Briefing\x20Sched\x20Error:\x20'+_0x4b9fc7[_0x572dda(0x341)]);}}async function runBaselineDriftAnalysis(_0x5bf4a1){const _0x22066d=a0_0x2d9c07;if(!_0x5bf4a1[_0x22066d(0x24a)]||!_0x5bf4a1[_0x22066d(0x355)])return;const _0xdbbee6=_0x5bf4a1[_0x22066d(0x1f2)][_0x22066d(0x292)]||0xe;if(_0x5bf4a1['dailyDigests']['length']<_0xdbbee6+0x7){await _0x5bf4a1[_0x22066d(0x1f6)](LTM_DP_DRIFT_STATUS,{'val':'N/A\x20(Learning)','ack':!![]});return;}const _0x199f7b=_0x5bf4a1[_0x22066d(0x2cf)][_0x22066d(0x2c8)](-_0xdbbee6),_0x3639ad=_0x5bf4a1['dailyDigests'][_0x22066d(0x2c8)](0x0,_0x5bf4a1[_0x22066d(0x2cf)][_0x22066d(0x1e3)]-_0xdbbee6),_0x2bcb26='ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20'+JSON[_0x22066d(0x1f1)](_0x3639ad)+_0x22066d(0x2f9)+JSON[_0x22066d(0x1f1)](_0x199f7b);try{const _0x3eb756=await _0x5bf4a1['geminiModel'][_0x22066d(0x360)](_0x2bcb26),_0xa178fb=JSON['parse'](_0x3eb756['response'][_0x22066d(0x1ff)]()[_0x22066d(0x37e)](/```json|```/g,'')[_0x22066d(0x242)]());_0xa178fb[_0x22066d(0x303)]&&(await _0x5bf4a1[_0x22066d(0x1f6)](LTM_DP_DRIFT_STATUS,{'val':_0xa178fb[_0x22066d(0x303)],'ack':!![]}),await _0x5bf4a1[_0x22066d(0x1f6)](LTM_DP_DRIFT_DETAILS,{'val':_0xa178fb['driftDetails'],'ack':!![]}),await _0x5bf4a1[_0x22066d(0x1f6)](LTM_DP_DRIFT_LAST_CHECK,{'val':Date[_0x22066d(0x34c)](),'ack':!![]}));}catch(_0x1ae1bd){}}class CogniLiving extends utils['Adapter']{constructor(_0x46faf4){const _0x1a16ad=a0_0x2d9c07;super({..._0x46faf4,'name':_0x1a16ad(0x268)}),this['eventHistory']=[],this['analysisHistory']=[],this[_0x1a16ad(0x29f)]=[],this[_0x1a16ad(0x2cf)]=[],this[_0x1a16ad(0x378)]={},this['systemConfig']={'latitude':0x0,'longitude':0x0,'city':''},this['isPresent']=!![],this[_0x1a16ad(0x345)]=null,this[_0x1a16ad(0x304)]=null,this[_0x1a16ad(0x2d0)]=![],this[_0x1a16ad(0x359)]=null,this['geminiModel']=null,this['currentSystemMode']=SYSTEM_MODES[_0x1a16ad(0x280)],this[_0x1a16ad(0x24a)]=![],this[_0x1a16ad(0x26b)]=![],this[_0x1a16ad(0x28d)]=_0x1a16ad(0x300),this[_0x1a16ad(0x208)]=null,this['ltmJob']=null,this['modeResetJob']=null,this['driftAnalysisTimer']=null,this['briefingJob']=null,this[_0x1a16ad(0x32d)]=null,this[_0x1a16ad(0x222)]=![],this['on'](_0x1a16ad(0x2bd),this[_0x1a16ad(0x252)][_0x1a16ad(0x1ed)](this)),this['on'](_0x1a16ad(0x2c4),this[_0x1a16ad(0x33f)][_0x1a16ad(0x1ed)](this)),this['on'](_0x1a16ad(0x267),this['onUnload'][_0x1a16ad(0x1ed)](this)),this['on'](_0x1a16ad(0x341),this[_0x1a16ad(0x2a3)][_0x1a16ad(0x1ed)](this));}async[a0_0x2d9c07(0x252)](){const _0x18122c=a0_0x2d9c07;this[_0x18122c(0x21f)][_0x18122c(0x318)](_0x18122c(0x372)+this[_0x18122c(0x309)]+_0x18122c(0x223));if(!checkAndInstall(this))return;await startSystem(this);}['onUnload'](_0x32e07d){const _0x3260a6=a0_0x2d9c07;if(this[_0x3260a6(0x208)])clearInterval(this[_0x3260a6(0x208)]);if(this[_0x3260a6(0x21c)])clearInterval(this['driftAnalysisTimer']);if(this[_0x3260a6(0x227)])this[_0x3260a6(0x227)]['cancel']();if(this['modeResetJob'])this[_0x3260a6(0x28f)][_0x3260a6(0x1d8)]();if(this[_0x3260a6(0x376)])this[_0x3260a6(0x376)][_0x3260a6(0x1d8)]();if(this[_0x3260a6(0x345)])clearTimeout(this[_0x3260a6(0x345)]);if(this[_0x3260a6(0x304)])clearTimeout(this[_0x3260a6(0x304)]);stopPythonService(this),_0x32e07d();}async[a0_0x2d9c07(0x33f)](_0x24b17d,_0x3713a1){const _0x38be12=a0_0x2d9c07;if(!_0x3713a1||this[_0x38be12(0x222)])return;if(_0x24b17d['includes'](_0x38be12(0x26c))&&_0x24b17d[_0x38be12(0x33c)](_0x38be12(0x213))&&_0x3713a1[_0x38be12(0x212)]){await handleTelegramResponse(this,_0x3713a1[_0x38be12(0x212)]);return;}if(_0x24b17d===this['namespace']+'.'+SYSTEM_DP_MODE){if(_0x3713a1[_0x38be12(0x212)]&&Object[_0x38be12(0x2d5)](SYSTEM_MODES)['includes'](_0x3713a1['val'])){this['currentSystemMode']=_0x3713a1['val'];if(_0x3713a1['val']===SYSTEM_MODES[_0x38be12(0x34a)])await setPresence(this,![]);else await setPresence(this,!![]);}if(!_0x3713a1['ack'])this[_0x38be12(0x1fd)](_0x24b17d,{'val':this[_0x38be12(0x2fb)],'ack':!![]});return;}if(!_0x3713a1[_0x38be12(0x265)]){_0x24b17d[_0x38be12(0x379)](_0x38be12(0x271))&&_0x3713a1[_0x38be12(0x212)]&&(this[_0x38be12(0x1fd)](_0x24b17d,{'val':![],'ack':!![]}),runGeminiAnalysis(this));if(_0x24b17d[_0x38be12(0x379)](_0x38be12(0x2cb))&&_0x3713a1[_0x38be12(0x212)]){this[_0x38be12(0x1fd)](_0x24b17d,{'val':![],'ack':!![]});if(this[_0x38be12(0x24a)])createDailyDigest(this);}_0x24b17d[_0x38be12(0x379)](_0x38be12(0x37c))&&_0x3713a1[_0x38be12(0x212)]&&(this[_0x38be12(0x1fd)](_0x24b17d,{'val':![],'ack':!![]}),sendMorningBriefing(this));_0x24b17d[_0x38be12(0x379)](_0x38be12(0x1e7))&&_0x3713a1['val']&&(this[_0x38be12(0x1fd)](_0x24b17d,{'val':![],'ack':!![]}),executeAutomationAction(this));if(_0x24b17d[_0x38be12(0x379)](_0x38be12(0x2c7))&&_0x3713a1[_0x38be12(0x212)]){this[_0x38be12(0x1fd)](_0x24b17d,{'val':![],'ack':!![]});if(this[_0x38be12(0x24a)])try{const _0x1cb07a=await this['getStateAsync'](_0x38be12(0x337));if(_0x1cb07a&&_0x1cb07a[_0x38be12(0x212)]){const _0x269931=JSON[_0x38be12(0x37a)](_0x1cb07a['val']);this['log'][_0x38be12(0x318)](_0x38be12(0x331)),this[_0x38be12(0x1f6)](_0x38be12(0x2f7),{'val':_0x38be12(0x317),'ack':!![]}),sendToPython(this,'TRAIN_SECURITY',{'sequences':_0x269931});}}catch(_0x2dc0dc){this['log'][_0x38be12(0x302)](_0x38be12(0x34d)+_0x2dc0dc['message']);}}if(_0x24b17d[_0x38be12(0x379)](_0x38be12(0x26f))&&_0x3713a1[_0x38be12(0x212)]){this[_0x38be12(0x1fd)](_0x24b17d,{'val':![],'ack':!![]});if(this[_0x38be12(0x24a)])try{const _0x266453=await this[_0x38be12(0x1eb)](LTM_DP_DAILY_DIGESTS);if(_0x266453&&_0x266453[_0x38be12(0x212)])sendToPython(this,'TRAIN_HEALTH',{'digests':JSON['parse'](_0x266453[_0x38be12(0x212)])});}catch(_0x40d0a6){}}if(_0x24b17d['includes'](_0x38be12(0x209))&&_0x3713a1[_0x38be12(0x212)]){this['setState'](_0x24b17d,{'val':![],'ack':!![]});if(this[_0x38be12(0x24a)])try{const _0x157a5e=await this[_0x38be12(0x1eb)](_0x38be12(0x2af));if(_0x157a5e&&_0x157a5e['val'])sendToPython(this,_0x38be12(0x234),{'points':JSON[_0x38be12(0x37a)](_0x157a5e['val'])});}catch(_0x1a7d2e){}}return;}if(this['config'][_0x38be12(0x293)]&&this[_0x38be12(0x1f2)][_0x38be12(0x293)][_0x38be12(0x379)](_0x24b17d)){await checkWifiPresence(this);return;}const _0x3008a7=(this[_0x38be12(0x1f2)][_0x38be12(0x269)]||[])[_0x38be12(0x201)](_0x41f9eb=>_0x41f9eb['id']===_0x24b17d);if(_0x3008a7)processSensorEvent(this,_0x24b17d,_0x3713a1,_0x3008a7);}async[a0_0x2d9c07(0x2a3)](_0x242f9f){const _0xf42f19=a0_0x2d9c07;if(typeof _0x242f9f===_0xf42f19(0x2e5)&&_0x242f9f[_0xf42f19(0x341)]){if(_0x242f9f[_0xf42f19(0x352)]==='testApiKey'){const _0x16ec80=_0x242f9f[_0xf42f19(0x341)][_0xf42f19(0x1d7)]||this[_0xf42f19(0x1f2)][_0xf42f19(0x1fb)];if(!_0x16ec80)return this['sendTo'](_0x242f9f[_0xf42f19(0x364)],_0x242f9f[_0xf42f19(0x352)],{'success':![],'message':_0xf42f19(0x320)},_0x242f9f['callback']);try{const _0xf9eeda=new GoogleGenerativeAI(_0x16ec80),_0x1a5e6e=_0xf9eeda[_0xf42f19(0x217)]({'model':GEMINI_MODEL}),_0xcc536e=await _0x1a5e6e[_0xf42f19(0x360)]('Hi');this[_0xf42f19(0x2e8)](_0x242f9f[_0xf42f19(0x364)],_0x242f9f[_0xf42f19(0x352)],{'success':!![],'message':_0xf42f19(0x22a)+_0xcc536e[_0xf42f19(0x2e3)]['text']()},_0x242f9f['callback']);}catch(_0x5414b1){this[_0xf42f19(0x2e8)](_0x242f9f[_0xf42f19(0x364)],_0x242f9f[_0xf42f19(0x352)],{'success':![],'message':'Err:\x20'+_0x5414b1[_0xf42f19(0x341)]},_0x242f9f[_0xf42f19(0x27d)]);}}else{if(_0x242f9f[_0xf42f19(0x352)]===_0xf42f19(0x2d7)){const _0x20d255=await getWeatherContext(this),_0x3d94d3=await getCalendarContext(this);this[_0xf42f19(0x2e8)](_0x242f9f[_0xf42f19(0x364)],_0x242f9f[_0xf42f19(0x352)],{'success':!![],'weather':_0x20d255,'calendar':_0x3d94d3},_0x242f9f['callback']);}else{if(_0x242f9f['command']==='getLtmData'){if(!this[_0xf42f19(0x24a)])return this[_0xf42f19(0x2e8)](_0x242f9f['from'],_0x242f9f['command'],{'success':![],'isPro':![]},_0x242f9f[_0xf42f19(0x27d)]);let _0x49a7cf={'status':'N/A'};try{const _0x5935eb=await this[_0xf42f19(0x1eb)](LTM_DP_DRIFT_STATUS);_0x49a7cf['status']=_0x5935eb?_0x5935eb[_0xf42f19(0x212)]:_0xf42f19(0x1db);}catch(_0x40de0f){}this[_0xf42f19(0x2e8)](_0x242f9f[_0xf42f19(0x364)],_0x242f9f['command'],{'success':!![],'isPro':!![],'dailyDigests':this[_0xf42f19(0x2cf)],'driftAnalysis':_0x49a7cf,'analysisHistory':this[_0xf42f19(0x25c)]},_0x242f9f[_0xf42f19(0x27d)]);}else{if(_0x242f9f[_0xf42f19(0x352)]==='getOverviewData'){const _0xc71df4=this[_0xf42f19(0x2cf)][_0xf42f19(0x1e3)],_0x1ac35b=new Date(),_0x50b4ab=new Date(_0x1ac35b[_0xf42f19(0x33d)](),_0x1ac35b[_0xf42f19(0x2b2)](),_0x1ac35b[_0xf42f19(0x362)]())['getTime'](),_0x55c559=this[_0xf42f19(0x29f)][_0xf42f19(0x35e)](_0x2173c8=>new Date(_0x2173c8[_0xf42f19(0x26d)])[_0xf42f19(0x34b)]()>_0x50b4ab)[_0xf42f19(0x1e3)],_0x5c3d16=new Array(0x18)['fill'](0x0);this['rawEventLog'][_0xf42f19(0x22d)](_0x2a06a1=>{const _0x4ed30e=_0xf42f19,_0x547e91=new Date(_0x2a06a1['timestamp']);if(_0x547e91[_0x4ed30e(0x34b)]()>_0x50b4ab)_0x5c3d16[_0x547e91[_0x4ed30e(0x219)]()]++;});let _0x2735f1={'status':_0xf42f19(0x1db)};try{const _0x2e7c9c=await this[_0xf42f19(0x1eb)](LTM_DP_DRIFT_STATUS);_0x2735f1[_0xf42f19(0x322)]=_0x2e7c9c?_0x2e7c9c[_0xf42f19(0x212)]:_0xf42f19(0x1db);}catch(_0x13fa15){}let _0x46ff2e='';try{const _0x2c1003=await this[_0xf42f19(0x1eb)]('system.presenceWho');_0x46ff2e=_0x2c1003?_0x2c1003[_0xf42f19(0x212)]:'';}catch(_0x322fb3){}let _0xa47047=null;!this[_0xf42f19(0x355)]&&(_0xa47047=this['config'][_0xf42f19(0x1fb)]?_0xf42f19(0x2d2):_0xf42f19(0x1e4));let _0x51aaba={'detected':![],'description':'','targetId':'','targetValue':'','autoApply':![]};try{const _0x187fab=await this[_0xf42f19(0x1eb)](_0xf42f19(0x342));if(_0x187fab&&_0x187fab['val']){_0x51aaba[_0xf42f19(0x382)]=!![];const _0x5ca513=await this['getStateAsync']('analysis.automation.description');_0x51aaba[_0xf42f19(0x312)]=_0x5ca513?_0x5ca513[_0xf42f19(0x212)]:'';const _0x12d3e5=await this[_0xf42f19(0x1eb)](_0xf42f19(0x25d));_0x51aaba['targetId']=_0x12d3e5?_0x12d3e5['val']:'';const _0xb69ec=await this[_0xf42f19(0x1eb)](_0xf42f19(0x29a));_0x51aaba[_0xf42f19(0x2f0)]=_0xb69ec?_0xb69ec[_0xf42f19(0x212)]:'';}const _0x36f324=await this['getStateAsync'](_0xf42f19(0x2a5));_0x51aaba['autoApply']=_0x36f324?!!_0x36f324[_0xf42f19(0x212)]:![];}catch(_0x6aa4af){}this[_0xf42f19(0x2e8)](_0x242f9f[_0xf42f19(0x364)],_0x242f9f[_0xf42f19(0x352)],{'success':!![],'eventHistory':this[_0xf42f19(0x2f2)][_0xf42f19(0x2c8)](0x0,0xf),'stats':{'digestCount':_0xc71df4,'eventCountToday':_0x55c559,'hourlyActivity':_0x5c3d16,'driftStatus':_0x2735f1[_0xf42f19(0x322)],'isPresent':this[_0xf42f19(0x231)],'presenceWho':_0x46ff2e,'minDays':this['config']['minDaysForBaseline']||0x7,'stbDays':this[_0xf42f19(0x1f2)]['ltmStbWindowDays']||0xe,'ltbDays':this[_0xf42f19(0x1f2)][_0xf42f19(0x326)]||0x3c,'systemError':_0xa47047},'automation':_0x51aaba},_0x242f9f[_0xf42f19(0x27d)]);}else{if(_0x242f9f[_0xf42f19(0x352)]===_0xf42f19(0x31d))try{const _0x5b3f4b=await scanForDevices(this,_0x242f9f[_0xf42f19(0x341)]||{});this[_0xf42f19(0x2e8)](_0x242f9f[_0xf42f19(0x364)],_0x242f9f[_0xf42f19(0x352)],{'success':!![],'devices':_0x5b3f4b},_0x242f9f['callback']);}catch(_0x35d67d){this[_0xf42f19(0x2e8)](_0x242f9f['from'],_0x242f9f['command'],{'success':![],'error':_0x35d67d['message']},_0x242f9f[_0xf42f19(0x27d)]);}else{if(_0x242f9f['command']==='getEnums'){const _0x2d7dcc=await this[_0xf42f19(0x1ea)]('enum.functions.*',_0xf42f19(0x244)),_0x5ab6f8=[];if(_0x2d7dcc)for(const _0x13a7f9 in _0x2d7dcc){const _0x3e5fa1=_0x2d7dcc[_0x13a7f9],_0x390d04=(_0x3e5fa1[_0xf42f19(0x2ea)]&&typeof _0x3e5fa1[_0xf42f19(0x2ea)]['name']===_0xf42f19(0x2e5)?_0x3e5fa1['common'][_0xf42f19(0x2db)]['de']:_0x3e5fa1[_0xf42f19(0x2ea)][_0xf42f19(0x2db)])||_0x3e5fa1[_0xf42f19(0x2ea)][_0xf42f19(0x2db)];_0x5ab6f8[_0xf42f19(0x305)]({'id':_0x13a7f9,'name':_0x390d04});}this[_0xf42f19(0x2e8)](_0x242f9f[_0xf42f19(0x364)],_0x242f9f[_0xf42f19(0x352)],{'success':!![],'enums':_0x5ab6f8},_0x242f9f[_0xf42f19(0x27d)]);}else{if(_0x242f9f['command']===_0xf42f19(0x290)){const _0x9bea29=_0x242f9f[_0xf42f19(0x341)][_0xf42f19(0x319)];if(!_0x9bea29)return this[_0xf42f19(0x2e8)](_0x242f9f[_0xf42f19(0x364)],_0x242f9f[_0xf42f19(0x352)],{'success':![],'error':_0xf42f19(0x299)},_0x242f9f['callback']);const _0x9c98a4=await getCalendarNames(this,_0x9bea29);this[_0xf42f19(0x2e8)](_0x242f9f[_0xf42f19(0x364)],_0x242f9f[_0xf42f19(0x352)],{'success':!![],'names':_0x9c98a4},_0x242f9f[_0xf42f19(0x27d)]);}else{if(_0x242f9f[_0xf42f19(0x352)]===_0xf42f19(0x2cd)){const {targetId:_0x2454ef,targetValue:_0xb63b38}=_0x242f9f[_0xf42f19(0x341)];this['log']['info'](_0xf42f19(0x332)+_0x2454ef+_0xf42f19(0x333)+_0xb63b38),await this[_0xf42f19(0x1f6)](_0xf42f19(0x342),{'val':!![],'ack':!![]}),await this['setStateAsync']('analysis.automation.description',{'val':_0xf42f19(0x335)+_0x2454ef,'ack':!![]}),await this[_0xf42f19(0x1f6)](_0xf42f19(0x25d),{'val':_0x2454ef,'ack':!![]}),await this[_0xf42f19(0x1f6)](_0xf42f19(0x29a),{'val':_0xb63b38,'ack':!![]}),this[_0xf42f19(0x2e8)](_0x242f9f[_0xf42f19(0x364)],_0x242f9f[_0xf42f19(0x352)],{'success':!![]},_0x242f9f[_0xf42f19(0x27d)]);}else{if(_0x242f9f[_0xf42f19(0x352)]===_0xf42f19(0x37b)){const {historyId:_0x4226cc,rating:_0x170381,comment:_0x23fd94,alertReason:_0x45b9db}=_0x242f9f[_0xf42f19(0x341)];_0x4226cc&&_0x170381?(await saveFeedback(this,{'timestamp':Date[_0xf42f19(0x34c)](),'historyId':_0x4226cc,'rating':_0x170381,'comment':_0x23fd94,'alertReason':_0x45b9db}),this[_0xf42f19(0x2e8)](_0x242f9f[_0xf42f19(0x364)],_0x242f9f['command'],{'success':!![]},_0x242f9f[_0xf42f19(0x27d)])):this[_0xf42f19(0x2e8)](_0x242f9f[_0xf42f19(0x364)],_0x242f9f[_0xf42f19(0x352)],{'success':![],'error':'Missing\x20data'},_0x242f9f['callback']);}else _0x242f9f['command']==='dismissAutomation'&&(this['log'][_0xf42f19(0x318)]('User\x20dismissed\x20automation\x20proposal.'),await this[_0xf42f19(0x1f6)](_0xf42f19(0x342),{'val':![],'ack':!![]}),await this[_0xf42f19(0x1f6)](_0xf42f19(0x31e),{'val':'','ack':!![]}),this[_0xf42f19(0x2e8)](_0x242f9f[_0xf42f19(0x364)],_0x242f9f['command'],{'success':!![]},_0x242f9f[_0xf42f19(0x27d)]));}}}}}}}}}}}if(require['main']!==module)module['exports']=_0x1213c2=>new CogniLiving(_0x1213c2);else new CogniLiving();