const a0_0x51e452=a0_0x7f5e;(function(_0x2bd7bc,_0x5141cb){const _0x399079=a0_0x7f5e,_0x8474cc=_0x2bd7bc();while(!![]){try{const _0x16532=-parseInt(_0x399079(0x253))/0x1+-parseInt(_0x399079(0x187))/0x2+parseInt(_0x399079(0x137))/0x3+-parseInt(_0x399079(0x148))/0x4+-parseInt(_0x399079(0xf8))/0x5*(parseInt(_0x399079(0x1a2))/0x6)+parseInt(_0x399079(0x202))/0x7*(-parseInt(_0x399079(0x247))/0x8)+parseInt(_0x399079(0x1ec))/0x9;if(_0x16532===_0x5141cb)break;else _0x8474cc['push'](_0x8474cc['shift']());}catch(_0x7bfd69){_0x8474cc['push'](_0x8474cc['shift']());}}}(a0_0x4450,0x4b646));const a0_0x97c9b1=(function(){let _0x59184c=!![];return function(_0xa4d481,_0x43e0ba){const _0x56462f=_0x59184c?function(){const _0x15308d=a0_0x7f5e;if(_0x43e0ba){const _0x246ff3=_0x43e0ba[_0x15308d(0x24b)](_0xa4d481,arguments);return _0x43e0ba=null,_0x246ff3;}}:function(){};return _0x59184c=![],_0x56462f;};}()),a0_0x3680b9=a0_0x97c9b1(this,function(){const _0x161a1b=a0_0x7f5e;return a0_0x3680b9[_0x161a1b(0x115)]()[_0x161a1b(0x184)](_0x161a1b(0x1b1))[_0x161a1b(0x115)]()[_0x161a1b(0x1f7)](a0_0x3680b9)[_0x161a1b(0x184)](_0x161a1b(0x1b1));});function a0_0x4450(){const _0x234143=['message','send','[PythonBridge]\x20Forwarding\x20command:\x20','977584PeEfkE',',\x20Temp:\x20','appendToLog','Â°C\x20(Innen:\x20','analysis.visualization.pulse','energy','analysis.training.status','triggerDailyDigest','analyzeWindowOpening\x20error:\x20','VACATION','lastTrackerEventTime','Corrupt','cogni-living','protectAiMemory','onUnload','Daily\x20Room\x20Details\x20(48x30min)','getOverviewData','analysis.training.triggerEnergy','ltmJob','minDaysForBaseline','ðŸ“\x20Manual\x20event\x20logged:\x20','SET_LEARNING_MODE','./lib/installer','\x20(Threshold)','config','historyJob','memoryCache','./lib/setup','getObjectViewAsync','lastAlertState','NORMAL','some','runPythonHealthCheck','analysisHistory','timestamp','mkdirSync','ANALYZE_GAIT','checkSolarCondition','all','.json','TRAIN_COMFORT','scanThermostats','setHours','./lib/automation','system.presenceWho','executeAutomationAction','triggerEnergyPrediction\x20Error:\x20','processSensorEvent','integrateRoomTime','getGenerativeModel','inactivityThresholdHours','val','dependencyInstallInProgress','Current.WeatherText','DAY','events.history','ðŸ”®\x20Energy\x20Prediction\x20triggered\x20(','analysis.health.todayVector','getHours','Gemini\x20Init\x20Error:\x20','search','@google/generative-ai','moduleSecurity','714044IUKfFG','presenceCheckTimer','ack','abs','getForeignStateAsync','abortExitTimer','readFileSync','python','âœ…\x20History\x20saved:\x20','guest','split','infrasoundLocked','getForeignObjectsAsync','Kein\x20API\x20Key\x20Ã¼bergeben.','History\x20Save\x20Error:\x20','security','node-schedule','analysis.energy.warmupTimes','getMinutes','\x20events\x20from\x20standard\x20storage.','./lib/recorder','saveDailyHistory','testContext','object','LÃ¼ften\x20empfohlen','SYSTEM_MODES','Verbindung\x20erfolgreich:\x20','121566awKDOZ','parse','./lib/ai_agent','length','info','roomIntegratorTimer','ðŸ’¨\x20LÃ¼ftung\x20in\x20','haustÃ¼r','includes','...','analysis.automation.targetId',',\x20Events:\x0a','SYSTEM_DP_MODE','value','presenceDevices','(((.+)+)+)+$','checkThermostats','endsWith','open','onStateChange','\x20Tage)','driftAnalysisTimer','analysis.training.triggerSecurity','pythonBridge\x20command\x20failed:\x20','sunny','updateHealthVector','Scan\x20Error:\x20','Sonne:\x20','calendarCheckTimer','\x20sequences','min','./lib/dead_man','analysis.security.learningStatus','analysis.topology.structure','toLowerCase','system.adapter.','filter','instance','name','getDate','Say\x20Hello','exitGraceTimer','getTime','infrasoundThreshold','rawEventLog','isSolar','version','updateTopologyMatrix','createDailyDigest','ðŸ”Š\x20FORENSIC:\x20Infraschall\x20bei\x20Abwesenheit!\x20Pressure:\x20','Adapter','infrasoundSensorId','[Integrator]\x20Error:\x20','âœ…\x20Dashboard\x20Data\x20(Rooms\x20&\x20Timeline\x20&\x20Details)\x20restored.','âš \x20Replay\x20skipped:\x20No\x20events\x20in\x20memory.','automation.triggerAction','LTM.triggerDailyDigest','command','push','ready','analysis.safety.infrasoundAlert','health','telegram','terrasse','number','weatherTempId','state','subscribeForeignStatesAsync','2-digit','todayVector','isProVersion','subscribeForeignStates','subscribeStates','setState','13897593mwIXPC','analysis.automation.description','setObjectNotExistsAsync','exports','setStateAsync','date','Gemini\x20Report\x20Night','Lernphase\x20(','trackerHeartbeat','\x20Kalender-Adapter\x20gefunden.','Warte\x20auf\x20Analyse...','constructor','toLocaleDateString','daswetter.0','system.adapter.ical.','updateTopology','stringify','Unbekannt','path','json','stateChange','modeResetJob','111986xlYhow','infrasoundEnabled','analysis.training.triggerComfort','max','Invalid\x20matrix\x20data','devices','analysis.training.triggerTopology','getCalendarNames','infrasoundArmingId','toFixed','startService','LTM.baselineStatus','Failed\x20to\x20trigger\x20Python\x20Health\x20Check','weatherunderground.0','Â°C,\x20AuÃŸen:\x20','initSystemConfig','triggerInfrasoundCorrelation','initHistory','No\x20data','enum.rooms.*','TRAIN_HEALTH','ðŸ”Š\x20Infraschall:\x20','analysisTimer','LTM.dailyDigests','manual','checkWifiPresence','testApiKey','temperature','getHistoryData','initSchedules','onMessage','NextHours.Location_1.Day_1.current.symbol_desc','.last_seen','Manual\x20Event','location','analysis.activity.roomHistory','bind','generateContent','\x20events\x20from\x20today...',':\x20Temp-Differenz\x20','join','runGeminiAnalysis','slice','utf8','ðŸš¶\x20Gait\x20Analysis\x20triggered\x20with\x20','substring','eventHistory','activeModules','healthTrendInterval','{\x22history\x22:{}}','sendNotification','application/json','geminiApiKey','triggerGaitAnalysis','modules','Daily\x20Activity\x20Vector\x20(48x30min)','\x20-\x20','analysis.health.todayRoomDetails','analysis.energy.warmupSources','isArray','pop','sendTo','getAbsoluteDefaultDataDir','from','cancel','debug','motion','sendMorningBriefing','refreshCalendar','104JBNiOC','namespace','currentSystemMode','briefingJob','apply','analysis.activity.roomStats','updateLocation','fill','log','analysis.prediction.trackerConfidence','initZombies','unshift','409160PcmPWr','common','toISOString','find','ðŸ\x20Triggering\x20Python\x20Health\x20Check\x20(Activity\x20Trend)...','checkCalendarTriggers','sensorLastValues','setPresence','triggerBriefing','sources','LTM.rawEventLog','forEach','now','generateHealthReport','analysis.automation.patternDetected','klar','moduleHealth','30mWjVDJ','Room\x20Dwell\x20Time\x20Stats','custom','updateSchedulePreview','startSystem','getStateAsync','onReady','text','error','bin','rows','setDate','loadSystemMode','CALCULATE_HEALTH_TREND','Unknown','calendarName','system','dailyDigests','genAI','analyzeWindowOpening','toLocaleTimeString','Aktiv\x20(','models/gemini-flash-latest','updateTopologyMatrix\x20failed:\x20','.uptime','isPresent','geminiModel','main','history','toString','enum','warn','ðŸ•¸ï¸\x20Topology\x20Matrix\x20manually\x20updated\x20by\x20user.','writeFileSync','Init...','analysis.health.geminiNight','analysis.training.triggerHealth','moduleComfort','Party\x20Mode','triggerGaitAnalysis\x20error:\x20','replayTodayEvents','moduleEnergy','Warm-Up\x20Time','de-DE','LTM.trainingData.sequences','scanDevices','threshold_exceeded','handleInfrasound','analysis.trigger','keys','type','bootTime','existsSync','triggerEnergyPrediction','round','No\x20topology\x20data\x20found','outdoorSensorId','pressureBuffer','heiter','window','ERROR','Gute\x20LÃ¼ftungsmÃ¶glichkeit!','ðŸ”Š\x20Infraschall-Alarm:\x20','314241aTmdqV','callback','Guest\x20Mode','string','thermostat','analysis.health.geminiDay','licenseKey','times','\x20>\x20','scheduleJob','TRAIN_TOPOLOGY','system.adapter.ical.é¦™','./lib/topology','add'];a0_0x4450=function(){return _0x234143;};return a0_0x4450();}a0_0x3680b9();'use strict';const utils=require('@iobroker/adapter-core'),{GoogleGenerativeAI}=require(a0_0x51e452(0x185)),path=require(a0_0x51e452(0x1fe)),fs=require('fs'),installer=require(a0_0x51e452(0x15e)),scanner=require('./lib/scanner'),schedulers=require('./lib/scheduler'),topology=require(a0_0x51e452(0x143)),setup=require(a0_0x51e452(0x163)),recorder=require(a0_0x51e452(0x19b)),pythonBridge=require('./lib/python_bridge'),aiAgent=require(a0_0x51e452(0x1a4)),deadMan=require(a0_0x51e452(0x1c1)),automation=require(a0_0x51e452(0x173)),GEMINI_MODEL=a0_0x51e452(0x10e);class CogniLiving extends utils[a0_0x51e452(0x1d4)]{constructor(_0x30b669){const _0x35c527=a0_0x51e452;super({..._0x30b669,'name':_0x35c527(0x154)}),this[_0x35c527(0x230)]=[],this[_0x35c527(0x169)]=[],this[_0x35c527(0x1ce)]=[],this[_0x35c527(0x109)]=[],this[_0x35c527(0xed)]={},this['systemConfig']={'latitude':0x0,'longitude':0x0,'city':''},this[_0x35c527(0x111)]=!![],this['exitTimer']=null,this[_0x35c527(0x1cb)]=null,this['isGracePeriodActive']=![],this[_0x35c527(0x10a)]=null,this['geminiModel']=null,this['currentSystemMode']=setup[_0x35c527(0x1a0)][_0x35c527(0x166)],this['isProVersion']=![],this[_0x35c527(0x165)]=![],this['analysisTimer']=null,this['calendarCheckTimer']=null,this[_0x35c527(0x188)]=null,this[_0x35c527(0x15a)]=null,this[_0x35c527(0x201)]=null,this[_0x35c527(0x1b7)]=null,this[_0x35c527(0x24a)]=null,this['historyJob']=null,this[_0x35c527(0x1f4)]=null,this[_0x35c527(0x232)]=null,this['roomIntegratorTimer']=null,this[_0x35c527(0x17c)]=![],this[_0x35c527(0x152)]=Date['now'](),this[_0x35c527(0x162)]=null,this[_0x35c527(0x12b)]=Date[_0x35c527(0xf3)](),this[_0x35c527(0x192)]=![],this[_0x35c527(0x131)]=[],this['activeModules']={'health':!![],'security':!![],'energy':!![],'comfort':!![]},this['on'](_0x35c527(0x1dd),this['onReady'][_0x35c527(0x226)](this)),this['on'](_0x35c527(0x200),this[_0x35c527(0x1b5)]['bind'](this)),this['on']('unload',this['onUnload'][_0x35c527(0x226)](this)),this['on'](_0x35c527(0x145),this[_0x35c527(0x220)][_0x35c527(0x226)](this));}async[a0_0x51e452(0xfe)](){const _0xf33835=a0_0x51e452;this[_0xf33835(0x24f)][_0xf33835(0x1a6)]('cogni-living\x20adapter\x20starting\x20(v'+this[_0xf33835(0x1d0)]+')\x20-\x20Phase\x20E\x20(Scheduler\x20Fix)');if(this['config'][_0xf33835(0xf7)]!==undefined)this['activeModules'][_0xf33835(0x1df)]=this[_0xf33835(0x160)][_0xf33835(0xf7)];if(this[_0xf33835(0x160)][_0xf33835(0x186)]!==undefined)this[_0xf33835(0x231)][_0xf33835(0x196)]=this['config']['moduleSecurity'];if(this[_0xf33835(0x160)][_0xf33835(0x121)]!==undefined)this[_0xf33835(0x231)]['energy']=this[_0xf33835(0x160)][_0xf33835(0x121)];if(this['config'][_0xf33835(0x11d)]!==undefined)this[_0xf33835(0x231)]['comfort']=this[_0xf33835(0x160)][_0xf33835(0x11d)];if(this[_0xf33835(0x160)][_0xf33835(0x238)])this[_0xf33835(0x231)]={...this[_0xf33835(0x231)],...this[_0xf33835(0x160)][_0xf33835(0x238)]};this[_0xf33835(0xfc)]();}async['startSystem'](){const _0x46a409=a0_0x51e452;await setup[_0x46a409(0x251)](this);try{this[_0x46a409(0x1e8)]=await setup['checkLicense'](this[_0x46a409(0x160)][_0x46a409(0x13d)]);}catch(_0x43c9de){}if(!this['config'][_0x46a409(0x17a)]||this[_0x46a409(0x160)][_0x46a409(0x17a)]<0.1)this[_0x46a409(0x160)][_0x46a409(0x17a)]=0xc;await setup[_0x46a409(0x213)](this),await setup[_0x46a409(0x211)](this),topology['updateTopology'](this);try{const _0x391791=await this[_0x46a409(0xfd)](_0x46a409(0x198)),_0x17154b=await this['getStateAsync'](_0x46a409(0x23c));_0x391791&&_0x391791[_0x46a409(0x17b)]&&_0x17154b&&_0x17154b[_0x46a409(0x17b)]&&(Date['now']()-_0x391791['ts']<0x4*0xe10*0x3e8&&(this[_0x46a409(0x162)]={'times':JSON[_0x46a409(0x1a3)](_0x391791['val']),'sources':JSON[_0x46a409(0x1a3)](_0x17154b[_0x46a409(0x17b)])}));}catch(_0x12f287){}if(this[_0x46a409(0x160)][_0x46a409(0x236)])try{this[_0x46a409(0x10a)]=new GoogleGenerativeAI(this['config'][_0x46a409(0x236)]),this[_0x46a409(0x112)]=this[_0x46a409(0x10a)][_0x46a409(0x179)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x46a409(0x235)}});}catch(_0x4bf0b3){this[_0x46a409(0x24f)][_0x46a409(0x100)](_0x46a409(0x183)+_0x4bf0b3[_0x46a409(0x145)]);}await setup['createAllObjects'](this),await this[_0x46a409(0x104)](),schedulers[_0x46a409(0x21f)](this),await this[_0x46a409(0x1ee)]('analysis.visualization.pulse',{'type':_0x46a409(0x1e4),'common':{'name':'Live\x20Event\x20Pulse','type':'number','role':_0x46a409(0x1af),'read':!![],'write':![]},'native':{}}),await this[_0x46a409(0x1ee)]('analysis.activity.roomStats',{'type':_0x46a409(0x1e4),'common':{'name':_0x46a409(0xf9),'type':_0x46a409(0x13a),'role':_0x46a409(0x1ff),'read':!![],'write':![],'def':'{\x22today\x22:{},\x20\x22yesterday\x22:{},\x20\x22date\x22:\x22\x22}'},'native':{}}),await this['setObjectNotExistsAsync'](_0x46a409(0x225),{'type':_0x46a409(0x1e4),'common':{'name':'Room\x20History\x20(24h\x20Buckets)','type':_0x46a409(0x13a),'role':_0x46a409(0x1ff),'read':!![],'write':![],'def':_0x46a409(0x233)},'native':{}}),await this[_0x46a409(0x1ee)](_0x46a409(0x11b),{'type':_0x46a409(0x1e4),'common':{'name':_0x46a409(0x1f2),'type':_0x46a409(0x13a),'role':'text','read':!![],'write':![],'def':_0x46a409(0x1f6)},'native':{}}),await this['setObjectNotExistsAsync']('analysis.health.geminiDay',{'type':_0x46a409(0x1e4),'common':{'name':'Gemini\x20Report\x20Day','type':_0x46a409(0x13a),'role':_0x46a409(0xff),'read':!![],'write':![],'def':_0x46a409(0x1f6)},'native':{}}),await this[_0x46a409(0x1ee)](_0x46a409(0x181),{'type':'state','common':{'name':_0x46a409(0x239),'type':_0x46a409(0x13a),'role':'json','read':!![],'write':![],'def':'[]'},'native':{}}),await this['setObjectNotExistsAsync'](_0x46a409(0x23b),{'type':'state','common':{'name':_0x46a409(0x157),'type':_0x46a409(0x13a),'role':_0x46a409(0x1ff),'read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x46a409(0x1ee)]('analysis.health.activityTrend',{'type':'state','common':{'name':'General\x20Activity\x20Trend','type':_0x46a409(0x1e2),'role':_0x46a409(0x1af),'unit':'%','read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x46a409(0x198),{'type':_0x46a409(0x1e4),'common':{'name':_0x46a409(0x122),'type':_0x46a409(0x13a),'role':_0x46a409(0x1ff),'read':!![],'write':![]},'native':{}});try{const _0x50460b=await this[_0x46a409(0xfd)]('events.history');if(_0x50460b&&_0x50460b[_0x46a409(0x17b)]){this[_0x46a409(0x230)]=JSON[_0x46a409(0x1a3)](_0x50460b['val']);if(this[_0x46a409(0x1e8)]){const _0x1fbdd3=await this[_0x46a409(0xfd)](_0x46a409(0xf1));if(_0x1fbdd3&&_0x1fbdd3['val'])this[_0x46a409(0x1ce)]=JSON['parse'](_0x1fbdd3['val']);}this[_0x46a409(0x24f)][_0x46a409(0x1a6)]('ðŸ“¦\x20Restored\x20'+this[_0x46a409(0x230)][_0x46a409(0x1a5)]+_0x46a409(0x19a));}}catch(_0x2661fe){this[_0x46a409(0x230)]=[];}try{const _0x185f54=await this[_0x46a409(0xfd)](_0x46a409(0x219));if(_0x185f54&&_0x185f54[_0x46a409(0x17b)])this[_0x46a409(0x109)]=JSON[_0x46a409(0x1a3)](_0x185f54['val']);}catch(_0x5e887c){this[_0x46a409(0x109)]=[];}const _0x3fb5b9=this[_0x46a409(0x109)][_0x46a409(0x1a5)]>=(this[_0x46a409(0x160)]['minDaysForBaseline']||0x7)?_0x46a409(0x10d)+this['dailyDigests'][_0x46a409(0x1a5)]+_0x46a409(0x1b6):_0x46a409(0x1f3)+this[_0x46a409(0x109)][_0x46a409(0x1a5)]+'/'+(this['config'][_0x46a409(0x15b)]||0x7)+')';await this['setStateAsync'](_0x46a409(0x20d),{'val':_0x3fb5b9,'ack':!![]}),this[_0x46a409(0x1ea)](_0x46a409(0x128)),this[_0x46a409(0x1ea)](_0x46a409(0x1da)),this[_0x46a409(0x1ea)](_0x46a409(0x11c));this[_0x46a409(0x160)][_0x46a409(0x203)]&&this[_0x46a409(0x160)][_0x46a409(0x1d5)]&&this[_0x46a409(0x231)][_0x46a409(0x196)]&&this[_0x46a409(0x1e9)](this[_0x46a409(0x160)][_0x46a409(0x1d5)]);const _0x4ab53e=this[_0x46a409(0x160)][_0x46a409(0x207)];if(_0x4ab53e)for(const _0x5dd13f of _0x4ab53e){await this[_0x46a409(0x1e5)](_0x5dd13f['id']);}const _0x524e79=this[_0x46a409(0x160)][_0x46a409(0x1b0)];if(_0x524e79)for(const _0x1efa05 of _0x524e79){await this[_0x46a409(0x1e5)](_0x1efa05);}const _0x1b5a46=require(_0x46a409(0x197));if(this[_0x46a409(0x161)])this[_0x46a409(0x161)][_0x46a409(0x242)]();this[_0x46a409(0x161)]=_0x1b5a46[_0x46a409(0x140)]('59\x2023\x20*\x20*\x20*',()=>{const _0x304287=_0x46a409;this[_0x304287(0x19c)]();}),setTimeout(()=>this['replayTodayEvents'](),0x1388);if(this[_0x46a409(0x1a7)])clearInterval(this[_0x46a409(0x1a7)]);this['integrateRoomTime'](),this[_0x46a409(0x1a7)]=setInterval(async()=>{const _0x42fc0b=_0x46a409;await this[_0x42fc0b(0x178)]();},0x3c*0x3e8);if(this[_0x46a409(0x232)])clearInterval(this[_0x46a409(0x232)]);this[_0x46a409(0x232)]=setInterval(()=>{const _0x2b82f8=_0x46a409;this['isProVersion']&&this[_0x2b82f8(0x231)][_0x2b82f8(0x1df)]&&this[_0x2b82f8(0x168)]();},0x4*0x3c*0x3c*0x3e8);if(this[_0x46a409(0x218)])clearInterval(this[_0x46a409(0x218)]);this[_0x46a409(0x231)][_0x46a409(0x14d)]&&(this[_0x46a409(0x218)]=setInterval(()=>{const _0x53eb8e=_0x46a409;this[_0x53eb8e(0x12d)]();},0xf*0x3c*0x3e8),setTimeout(()=>this['triggerEnergyPrediction'](),0x2710));if(this['calendarCheckTimer'])clearInterval(this['calendarCheckTimer']);this[_0x46a409(0x160)]['useCalendar']&&this[_0x46a409(0x231)][_0x46a409(0x14d)]&&(this[_0x46a409(0x1be)]=setInterval(()=>{const _0x40af56=_0x46a409;automation[_0x40af56(0x258)](this);},0x2*0x3c*0x3e8),setTimeout(()=>automation[_0x46a409(0x258)](this),0x3a98));if(this['presenceCheckTimer'])clearInterval(this[_0x46a409(0x188)]);this[_0x46a409(0x160)]['presenceDevices']&&this[_0x46a409(0x160)][_0x46a409(0x1b0)][_0x46a409(0x1a5)]>0x0&&(this['presenceCheckTimer']=setInterval(async()=>{const _0x2c88c9=_0x46a409;await this[_0x2c88c9(0x21b)]();},0x3c*0x3e8),setTimeout(async()=>await this[_0x46a409(0x21b)](),0x1388));const _0x4c4e20=path[_0x46a409(0x22a)](__dirname,'.venv',_0x46a409(0x101),_0x46a409(0x18e));pythonBridge[_0x46a409(0x20c)](this,_0x4c4e20);}[a0_0x51e452(0x156)](_0x352189){const _0x15553b=a0_0x51e452;if(this['historyJob'])this[_0x15553b(0x161)][_0x15553b(0x242)]();this[_0x15553b(0x19c)]()['then'](()=>{const _0x47722a=_0x15553b;if(this[_0x47722a(0x218)])clearInterval(this['analysisTimer']);if(this[_0x47722a(0x1be)])clearInterval(this['calendarCheckTimer']);if(this[_0x47722a(0x188)])clearInterval(this[_0x47722a(0x188)]);if(this[_0x47722a(0x1a7)])clearInterval(this[_0x47722a(0x1a7)]);recorder[_0x47722a(0x18c)](this),pythonBridge['stopService'](this),_0x352189();});}async[a0_0x51e452(0x120)](){const _0x2ca4fe=a0_0x51e452;if(!this['eventHistory']||this['eventHistory']['length']===0x0){this[_0x2ca4fe(0x24f)]['warn'](_0x2ca4fe(0x1d8));return;}this[_0x2ca4fe(0x24f)][_0x2ca4fe(0x1a6)]('â†º\x20Replaying\x20'+this[_0x2ca4fe(0x230)][_0x2ca4fe(0x1a5)]+_0x2ca4fe(0x228));const _0xba4623=new Date()['setHours'](0x0,0x0,0x0,0x0),_0x36831a=_0x2ca4fe(0x225);let _0xa52766={'history':{},'date':new Date()[_0x2ca4fe(0x1f8)]()};const _0x4aa7d6=_0x2ca4fe(0x181),_0x190ab7='analysis.health.todayRoomDetails';let _0x107478=new Array(0x30)[_0x2ca4fe(0x24e)](0x0),_0x1e99b1=Array[_0x2ca4fe(0x241)]({'length':0x30},()=>[]);this[_0x2ca4fe(0x230)][_0x2ca4fe(0xf2)](_0x3515a0=>{const _0x3c574d=_0x2ca4fe;if(_0x3515a0['timestamp']>=_0xba4623){if(recorder['isRelevantActivity'](_0x3515a0[_0x3c574d(0x12a)],_0x3515a0['value'])){const _0x3164fb=new Date(_0x3515a0['timestamp']),_0xec222=_0x3164fb[_0x3c574d(0x182)]()*0x2+(_0x3164fb[_0x3c574d(0x199)]()>=0x1e?0x1:0x0);if(_0xec222<0x30){_0x107478[_0xec222]++;const _0x5a0853=_0x3515a0[_0x3c574d(0x224)]||_0x3515a0[_0x3c574d(0x1c8)]||'?';let _0x16da11=_0x1e99b1[_0xec222];!_0x16da11[_0x3c574d(0x1aa)](_0x5a0853)&&_0x16da11['push'](_0x5a0853);}const _0x1bd258=_0x3164fb[_0x3c574d(0x182)]();let _0x24250a=_0x3515a0[_0x3c574d(0x224)]||'Unknown';const _0x595a40=(this[_0x3c574d(0x160)][_0x3c574d(0x207)]||[])['find'](_0x39e828=>_0x39e828[_0x3c574d(0x224)]===_0x24250a);if(_0x595a40)_0x24250a=_0x595a40[_0x3c574d(0x224)];if(!_0xa52766[_0x3c574d(0x114)][_0x24250a])_0xa52766[_0x3c574d(0x114)][_0x24250a]=new Array(0x18)['fill'](0x0);if(_0xa52766[_0x3c574d(0x114)][_0x24250a][_0x1bd258]<0x3c)_0xa52766['history'][_0x24250a][_0x1bd258]++;}}});const _0x59a3ca=await this[_0x2ca4fe(0xfd)](_0x36831a);(!_0x59a3ca||!_0x59a3ca['val']||_0x59a3ca[_0x2ca4fe(0x17b)]==='{}'||_0x59a3ca['val']['includes']('\x22history\x22:{}'))&&await this[_0x2ca4fe(0x1f0)](_0x36831a,{'val':JSON[_0x2ca4fe(0x1fc)](_0xa52766),'ack':!![]}),await this[_0x2ca4fe(0x1f0)](_0x4aa7d6,{'val':JSON[_0x2ca4fe(0x1fc)](_0x107478),'ack':!![]}),await this[_0x2ca4fe(0x1f0)](_0x190ab7,{'val':JSON[_0x2ca4fe(0x1fc)](_0x1e99b1),'ack':!![]}),this['log'][_0x2ca4fe(0x1a6)](_0x2ca4fe(0x1d7));}async[a0_0x51e452(0x19c)](){const _0x1e46f2=a0_0x51e452;if(!this[_0x1e46f2(0x231)][_0x1e46f2(0x1df)])return;const _0x4dfbbd=new Date()['toISOString']()[_0x1e46f2(0x191)]('T')[0x0];this['log'][_0x1e46f2(0x243)]('ðŸ’¾\x20Saving\x20Daily\x20History\x20for\x20'+_0x4dfbbd+_0x1e46f2(0x1ab));try{const [_0x56ba8c,_0x4ca2c1,_0xe3b13a,_0x4ad348,_0x54dcc7,_0x365a6f]=await Promise[_0x1e46f2(0x16e)]([this[_0x1e46f2(0xfd)](_0x1e46f2(0x225)),this[_0x1e46f2(0xfd)]('analysis.health.geminiNight'),this[_0x1e46f2(0xfd)](_0x1e46f2(0x13c)),this['getStateAsync']('analysis.security.lastScore'),this[_0x1e46f2(0xfd)](_0x1e46f2(0x181)),this[_0x1e46f2(0xfd)]('analysis.health.activityTrend')]),_0x3236ad=this[_0x1e46f2(0x230)][_0x1e46f2(0x1c6)](_0xc2bc33=>_0xc2bc33[_0x1e46f2(0x16a)]>=new Date()[_0x1e46f2(0x172)](0x0,0x0,0x0,0x0)&&(_0xc2bc33[_0x1e46f2(0x1c8)][_0x1e46f2(0x1c4)]()[_0x1e46f2(0x1aa)](_0x1e46f2(0x1a9))||_0xc2bc33[_0x1e46f2(0x1c8)][_0x1e46f2(0x1c4)]()['includes'](_0x1e46f2(0x1e1)))&&(_0xc2bc33['value']===!![]||_0xc2bc33['value']==='open'))[_0x1e46f2(0x1a5)];let _0x119848=0x55;if(_0x365a6f&&_0x365a6f['val']!==undefined)_0x119848=Math['min'](0x64,Math[_0x1e46f2(0x205)](0x14,Math[_0x1e46f2(0x12e)](0x50+Number(_0x365a6f[_0x1e46f2(0x17b)])*0x5)));const _0x4e35bc={'date':_0x4dfbbd,'timestamp':Date[_0x1e46f2(0xf3)](),'roomHistory':_0x56ba8c?.[_0x1e46f2(0x17b)]?JSON['parse'](_0x56ba8c[_0x1e46f2(0x17b)]):{},'geminiNight':_0x4ca2c1?.[_0x1e46f2(0x17b)]||'Keine\x20Daten','geminiDay':_0xe3b13a?.[_0x1e46f2(0x17b)]||'Keine\x20Daten','anomalyScore':_0x4ad348?.[_0x1e46f2(0x17b)]||0.1,'todayVector':_0x54dcc7?.[_0x1e46f2(0x17b)]?JSON[_0x1e46f2(0x1a3)](_0x54dcc7['val']):new Array(0x30)[_0x1e46f2(0x24e)](0x0),'batteryLevel':_0x119848,'freshAirCount':_0x3236ad,'eventHistory':this[_0x1e46f2(0x230)]},_0x4f9157=utils[_0x1e46f2(0x240)](),_0x4ffc90=path['join'](_0x4f9157,'cogni-living',_0x1e46f2(0x114));if(!fs[_0x1e46f2(0x12c)](_0x4ffc90))fs[_0x1e46f2(0x16b)](_0x4ffc90,{'recursive':!![]});const _0x1c2ab1=path[_0x1e46f2(0x22a)](_0x4ffc90,_0x4dfbbd+_0x1e46f2(0x16f));fs[_0x1e46f2(0x119)](_0x1c2ab1,JSON['stringify'](_0x4e35bc)),this[_0x1e46f2(0x24f)][_0x1e46f2(0x1a6)](_0x1e46f2(0x18f)+_0x1c2ab1);}catch(_0x4b36e2){this[_0x1e46f2(0x24f)][_0x1e46f2(0x100)](_0x1e46f2(0x195)+_0x4b36e2['message']);}}async[a0_0x51e452(0x178)](){const _0x2a0f11=a0_0x51e452;if(!this[_0x2a0f11(0x111)])return;try{let _0x181349=null;try{const _0x3419f4=await this['getStateAsync']('analysis.prediction.trackerTopRoom'),_0x18662d=await this[_0x2a0f11(0xfd)](_0x2a0f11(0x250));if(_0x3419f4&&_0x3419f4[_0x2a0f11(0x17b)]&&_0x18662d&&_0x18662d['val']&&_0x18662d[_0x2a0f11(0x17b)]>0.3){if(_0x3419f4[_0x2a0f11(0x17b)]!=='Unknown'&&_0x3419f4[_0x2a0f11(0x17b)]!==_0x2a0f11(0x11a))_0x181349=_0x3419f4[_0x2a0f11(0x17b)];}}catch(_0x29be73){}if(!_0x181349){const _0x4c60db=this[_0x2a0f11(0x160)][_0x2a0f11(0x207)]||[];for(const _0x1acb99 of _0x4c60db){if(_0x1acb99[_0x2a0f11(0x12a)]==='motion'&&_0x1acb99[_0x2a0f11(0x224)])try{const _0x140644=await this[_0x2a0f11(0x18b)](_0x1acb99['id']);if(_0x140644&&(_0x140644['val']===!![]||_0x140644['val']==='on'||_0x140644[_0x2a0f11(0x17b)]===0x1)){_0x181349=_0x1acb99[_0x2a0f11(0x224)];break;}}catch(_0x56c02a){}}}if(!_0x181349)return;const _0x1be337=this[_0x2a0f11(0x160)][_0x2a0f11(0x207)]||[];let _0x1fc3cb=_0x181349;const _0x341ce0=_0x1be337[_0x2a0f11(0x256)](_0x2b050d=>_0x2b050d[_0x2a0f11(0x224)]&&_0x2b050d['location'][_0x2a0f11(0x1c4)]()===_0x181349[_0x2a0f11(0x1c4)]());if(_0x341ce0)_0x1fc3cb=_0x341ce0[_0x2a0f11(0x224)];const _0x3de873='analysis.activity.roomHistory',_0x5631e2=await this[_0x2a0f11(0xfd)](_0x3de873),_0x2169b9=new Date()['toLocaleDateString']();let _0x34e44a={'history':{},'date':_0x2169b9};if(_0x5631e2&&_0x5631e2[_0x2a0f11(0x17b)])try{_0x34e44a=JSON[_0x2a0f11(0x1a3)](_0x5631e2[_0x2a0f11(0x17b)]);}catch(_0x4b8759){}_0x34e44a['date']!==_0x2169b9&&(_0x34e44a[_0x2a0f11(0x114)]={},_0x34e44a[_0x2a0f11(0x1f1)]=_0x2169b9);if(!_0x34e44a[_0x2a0f11(0x114)][_0x1fc3cb])_0x34e44a[_0x2a0f11(0x114)][_0x1fc3cb]=new Array(0x18)[_0x2a0f11(0x24e)](0x0);const _0x56d870=new Date()[_0x2a0f11(0x182)]();if(_0x34e44a[_0x2a0f11(0x114)][_0x1fc3cb][_0x56d870]<0x3c)_0x34e44a[_0x2a0f11(0x114)][_0x1fc3cb][_0x56d870]++;await this[_0x2a0f11(0x1f0)](_0x3de873,{'val':JSON[_0x2a0f11(0x1fc)](_0x34e44a),'ack':!![]});}catch(_0x253385){this[_0x2a0f11(0x24f)]['warn'](_0x2a0f11(0x1d6)+_0x253385['message']);}}async[a0_0x51e452(0x220)](_0x5043a0){const _0x33cf59=a0_0x51e452;if(typeof _0x5043a0===_0x33cf59(0x19e)&&_0x5043a0['message']){if(_0x5043a0[_0x33cf59(0x1db)]===_0x33cf59(0x21e)){const _0x103905=_0x5043a0['message'][_0x33cf59(0x1f1)],_0xcb7768=utils[_0x33cf59(0x240)](),_0x1407ea=path[_0x33cf59(0x22a)](_0xcb7768,_0x33cf59(0x154),_0x33cf59(0x114),_0x103905+_0x33cf59(0x16f));if(fs['existsSync'](_0x1407ea))try{const _0x5c3a0c=JSON[_0x33cf59(0x1a3)](fs[_0x33cf59(0x18d)](_0x1407ea,_0x33cf59(0x22d)));this[_0x33cf59(0x23f)](_0x5043a0[_0x33cf59(0x241)],_0x5043a0[_0x33cf59(0x1db)],{'success':!![],'data':_0x5c3a0c},_0x5043a0[_0x33cf59(0x138)]);}catch(_0x13683b){this[_0x33cf59(0x23f)](_0x5043a0['from'],_0x5043a0[_0x33cf59(0x1db)],{'success':![],'error':_0x33cf59(0x153)},_0x5043a0[_0x33cf59(0x138)]);}else this['sendTo'](_0x5043a0[_0x33cf59(0x241)],_0x5043a0[_0x33cf59(0x1db)],{'success':![],'error':_0x33cf59(0x214)},_0x5043a0[_0x33cf59(0x138)]);}else{if(_0x5043a0['command']===_0x33cf59(0x158)){const _0x34864b=this[_0x33cf59(0x109)]['length'];let _0x41ceb9=new Array(0x30)['fill'](0x0),_0x40df21=Array[_0x33cf59(0x241)]({'length':0x30},()=>[]);try{const _0x96b766=await this[_0x33cf59(0xfd)](_0x33cf59(0x181));if(_0x96b766&&_0x96b766['val'])_0x41ceb9=JSON[_0x33cf59(0x1a3)](_0x96b766[_0x33cf59(0x17b)]);const _0x23bf7f=await this[_0x33cf59(0xfd)](_0x33cf59(0x23b));if(_0x23bf7f&&_0x23bf7f[_0x33cf59(0x17b)])_0x40df21=JSON[_0x33cf59(0x1a3)](_0x23bf7f[_0x33cf59(0x17b)]);}catch(_0x42a5f4){}let _0x55c869=new Array(0x30)[_0x33cf59(0x24e)](0x0);try{const _0x4d1773=new Date();_0x4d1773[_0x33cf59(0x103)](_0x4d1773[_0x33cf59(0x1c9)]()-0x1);const _0x1bf566=_0x4d1773[_0x33cf59(0x255)]()[_0x33cf59(0x191)]('T')[0x0],_0x95a7ad=utils[_0x33cf59(0x240)](),_0x4b3bf4=path[_0x33cf59(0x22a)](_0x95a7ad,'cogni-living',_0x33cf59(0x114),_0x1bf566+_0x33cf59(0x16f));if(fs[_0x33cf59(0x12c)](_0x4b3bf4)){const _0xff8488=JSON[_0x33cf59(0x1a3)](fs[_0x33cf59(0x18d)](_0x4b3bf4,_0x33cf59(0x22d)));if(_0xff8488&&_0xff8488[_0x33cf59(0x1e7)])_0x55c869=_0xff8488['todayVector'];}}catch(_0x5ce011){}let _0x41190f={'today':{},'yesterday':{}};try{const _0x5eee9c=await this['getStateAsync'](_0x33cf59(0x24c));if(_0x5eee9c&&_0x5eee9c[_0x33cf59(0x17b)])_0x41190f=JSON[_0x33cf59(0x1a3)](_0x5eee9c['val']);}catch(_0x59ccfd){}let _0x3ee24a=null;try{const _0x2b96db=await this[_0x33cf59(0xfd)]('analysis.health.activityTrend');if(_0x2b96db)_0x3ee24a=_0x2b96db[_0x33cf59(0x17b)];}catch(_0x4370c3){}if(_0x3ee24a===undefined||_0x3ee24a===null){const _0x2380ee=_0x41ceb9['reduce']((_0x390ec9,_0x43e569)=>_0x390ec9+_0x43e569,0x0),_0x3750d1=Math[_0x33cf59(0x1c0)](0x2,Math['max'](-0x2,(0x64-_0x2380ee)/0x32));_0x3ee24a=_0x3750d1;}let _0x1b240e=![],_0x3c6cfe='',_0xb9e259='',_0x397520='';try{const _0x267dda=await this[_0x33cf59(0xfd)](_0x33cf59(0xf5));if(_0x267dda&&_0x267dda['val']){_0x1b240e=!![];const _0x31c696=await this[_0x33cf59(0xfd)](_0x33cf59(0x1ed));_0x3c6cfe=_0x31c696?_0x31c696[_0x33cf59(0x17b)]:'';const _0x1dca1b=await this[_0x33cf59(0xfd)](_0x33cf59(0x1ac));_0xb9e259=_0x1dca1b?_0x1dca1b[_0x33cf59(0x17b)]:'';const _0x189348=await this[_0x33cf59(0xfd)]('analysis.automation.targetValue');_0x397520=_0x189348?_0x189348[_0x33cf59(0x17b)]:'';}}catch(_0x586cf8){}const _0x13eb98=await this[_0x33cf59(0x16d)](),_0x4c2109=(this[_0x33cf59(0x160)][_0x33cf59(0x207)]||[])[_0x33cf59(0x167)](_0x3e87a3=>_0x3e87a3['isSolar']),_0x1b7388=_0x13eb98&&_0x4c2109;let _0x1aec44='';try{const _0x1d558c=await this['getStateAsync']('system.presenceWho');if(_0x1d558c&&_0x1d558c['val'])_0x1aec44=_0x1d558c[_0x33cf59(0x17b)];}catch(_0x587be2){}this['sendTo'](_0x5043a0[_0x33cf59(0x241)],_0x5043a0[_0x33cf59(0x1db)],{'success':!![],'eventHistory':this[_0x33cf59(0x230)][_0x33cf59(0x22c)](0x0,0x7d0),'stats':{'digestCount':_0x34864b,'isPresent':this[_0x33cf59(0x111)],'hourlyActivity':_0x41ceb9,'hourlyDetails':_0x40df21,'yesterdayActivity':_0x55c869,'solarActive':_0x1b7388,'presenceWho':_0x1aec44,'roomStats':_0x41190f,'activityTrend':_0x3ee24a,'modules':this[_0x33cf59(0x231)]},'automation':{'detected':_0x1b240e,'description':_0x3c6cfe,'targetId':_0xb9e259,'targetValue':_0x397520}},_0x5043a0['callback']);}else{if(_0x5043a0['command']===_0x33cf59(0x1b2))try{const _0x4928b9=await automation[_0x33cf59(0x171)](this);this[_0x33cf59(0x23f)](_0x5043a0[_0x33cf59(0x241)],_0x5043a0[_0x33cf59(0x1db)],{'success':!![],'results':_0x4928b9},_0x5043a0[_0x33cf59(0x138)]);}catch(_0xc042df){this[_0x33cf59(0x23f)](_0x5043a0[_0x33cf59(0x241)],_0x5043a0['command'],{'success':![],'error':_0xc042df['message']},_0x5043a0[_0x33cf59(0x138)]);}else{if(_0x5043a0[_0x33cf59(0x1db)]===_0x33cf59(0x125))try{const _0x354496=await scanner['scanForDevices'](this,_0x5043a0['message']||{});this[_0x33cf59(0x23f)](_0x5043a0[_0x33cf59(0x241)],_0x5043a0['command'],{'success':!![],'devices':_0x354496},_0x5043a0['callback']);}catch(_0x4fdfbd){}else{if(_0x5043a0[_0x33cf59(0x1db)]==='getEnums'){const _0x5ef6bd=await this[_0x33cf59(0x193)]('enum.functions.*',_0x33cf59(0x116)),_0x92b028=[];if(_0x5ef6bd)for(const _0x4ede34 in _0x5ef6bd){let _0x2fe8ff=_0x5ef6bd[_0x4ede34][_0x33cf59(0x254)][_0x33cf59(0x1c8)];if(_0x2fe8ff&&typeof _0x2fe8ff===_0x33cf59(0x19e))_0x2fe8ff=_0x2fe8ff['de']||_0x2fe8ff['en']||Object['values'](_0x2fe8ff)[0x0]||JSON[_0x33cf59(0x1fc)](_0x2fe8ff);_0x92b028[_0x33cf59(0x1dc)]({'id':_0x4ede34,'name':String(_0x2fe8ff||_0x4ede34)});}const _0x2292a9=await this['getForeignObjectsAsync'](_0x33cf59(0x215),_0x33cf59(0x116)),_0x585211=[];if(_0x2292a9)for(const _0x2e13cc in _0x2292a9){let _0xb13690=_0x2292a9[_0x2e13cc][_0x33cf59(0x254)][_0x33cf59(0x1c8)];if(_0xb13690&&typeof _0xb13690==='object')_0xb13690=_0xb13690['de']||_0xb13690['en']||Object['values'](_0xb13690)[0x0]||JSON['stringify'](_0xb13690);_0x585211[_0x33cf59(0x1dc)](String(_0xb13690||_0x2e13cc[_0x33cf59(0x191)]('.')[_0x33cf59(0x23e)]()));}this['sendTo'](_0x5043a0[_0x33cf59(0x241)],_0x5043a0['command'],{'success':!![],'enums':_0x92b028,'rooms':_0x585211},_0x5043a0[_0x33cf59(0x138)]);}else{if(_0x5043a0['command']===_0x33cf59(0x209))try{const _0x13ed3b=await this['getObjectViewAsync'](_0x33cf59(0x108),_0x33cf59(0x1c7),{'startkey':_0x33cf59(0x1fa),'endkey':'system.adapter.ical.é¦™'}),_0x1e0860=new Set();if(_0x13ed3b&&_0x13ed3b[_0x33cf59(0x102)])for(const _0x3cfb63 of _0x13ed3b[_0x33cf59(0x102)]){const _0xccd9a=_0x3cfb63['id']['replace'](_0x33cf59(0x1c5),''),_0x1fb419=await this['getForeignStateAsync'](_0xccd9a+'.data.table');let _0x2f0e43=![];if(_0x1fb419&&_0x1fb419[_0x33cf59(0x17b)]){const _0xe1da09=typeof _0x1fb419['val']===_0x33cf59(0x13a)?JSON[_0x33cf59(0x1a3)](_0x1fb419[_0x33cf59(0x17b)]):_0x1fb419[_0x33cf59(0x17b)];Array['isArray'](_0xe1da09)&&_0xe1da09[_0x33cf59(0xf2)](_0x14ec79=>{const _0x232840=_0x33cf59;_0x14ec79[_0x232840(0x107)]&&(_0x1e0860['add'](_0x14ec79['calendarName']),_0x2f0e43=!![]);});}!_0x2f0e43&&_0x1e0860[_0x33cf59(0x144)](_0xccd9a);}const _0xd56ff4=Array[_0x33cf59(0x241)](_0x1e0860);if(_0xd56ff4[_0x33cf59(0x1a5)]===0x0)_0xd56ff4['push']('Standard');this['sendTo'](_0x5043a0[_0x33cf59(0x241)],_0x5043a0[_0x33cf59(0x1db)],{'success':!![],'names':_0xd56ff4},_0x5043a0[_0x33cf59(0x138)]);}catch(_0xe5cc56){this['sendTo'](_0x5043a0[_0x33cf59(0x241)],_0x5043a0[_0x33cf59(0x1db)],{'success':![],'error':_0x33cf59(0x1bc)+_0xe5cc56['message']},_0x5043a0[_0x33cf59(0x138)]);}else{if(_0x5043a0[_0x33cf59(0x1db)]===_0x33cf59(0x246))try{await automation[_0x33cf59(0xfb)](this),this[_0x33cf59(0x23f)](_0x5043a0['from'],_0x5043a0[_0x33cf59(0x1db)],{'success':!![]},_0x5043a0[_0x33cf59(0x138)]);}catch(_0x1a39f7){this[_0x33cf59(0x24f)][_0x33cf59(0x117)]('refreshCalendar\x20failed:\x20'+_0x1a39f7['message']),this[_0x33cf59(0x23f)](_0x5043a0[_0x33cf59(0x241)],_0x5043a0['command'],{'success':![],'error':_0x1a39f7[_0x33cf59(0x145)]},_0x5043a0[_0x33cf59(0x138)]);}else{if(_0x5043a0[_0x33cf59(0x1db)]===_0x33cf59(0x1d1))try{const _0xfbd276=_0x5043a0['message']['matrix'];if(!_0xfbd276||!Array[_0x33cf59(0x23d)](_0xfbd276))throw new Error(_0x33cf59(0x206));const _0x5db123=await this[_0x33cf59(0xfd)](_0x33cf59(0x1c3));if(_0x5db123&&_0x5db123[_0x33cf59(0x17b)]){const _0xb79397=JSON[_0x33cf59(0x1a3)](_0x5db123[_0x33cf59(0x17b)]);_0xb79397['matrix']=_0xfbd276,_0xb79397['updated']=Date[_0x33cf59(0xf3)](),await this['setStateAsync'](_0x33cf59(0x1c3),{'val':JSON[_0x33cf59(0x1fc)](_0xb79397),'ack':!![]}),this[_0x33cf59(0x24f)][_0x33cf59(0x243)](_0x33cf59(0x118)),this[_0x33cf59(0x23f)](_0x5043a0[_0x33cf59(0x241)],_0x5043a0['command'],{'success':!![]},_0x5043a0[_0x33cf59(0x138)]);}else throw new Error(_0x33cf59(0x12f));}catch(_0x4dc3ac){this['log']['warn'](_0x33cf59(0x10f)+_0x4dc3ac[_0x33cf59(0x145)]),this['sendTo'](_0x5043a0[_0x33cf59(0x241)],_0x5043a0[_0x33cf59(0x1db)],{'success':![],'error':_0x4dc3ac[_0x33cf59(0x145)]},_0x5043a0[_0x33cf59(0x138)]);}else{if(_0x5043a0[_0x33cf59(0x1db)]==='pythonBridge')try{const _0x4659f0=_0x5043a0[_0x33cf59(0x145)][_0x33cf59(0x1db)],_0xe56cf=_0x5043a0[_0x33cf59(0x145)];this[_0x33cf59(0x24f)]['debug'](_0x33cf59(0x147)+_0x4659f0),pythonBridge[_0x33cf59(0x146)](this,_0x4659f0,_0xe56cf,_0x50dfa1=>{const _0x17ebb0=_0x33cf59;this[_0x17ebb0(0x23f)](_0x5043a0[_0x17ebb0(0x241)],_0x5043a0[_0x17ebb0(0x1db)],_0x50dfa1,_0x5043a0['callback']);});}catch(_0x2b8e49){this[_0x33cf59(0x24f)][_0x33cf59(0x117)](_0x33cf59(0x1b9)+_0x2b8e49[_0x33cf59(0x145)]),this[_0x33cf59(0x23f)](_0x5043a0[_0x33cf59(0x241)],_0x5043a0[_0x33cf59(0x1db)],{'type':_0x33cf59(0x134),'payload':_0x2b8e49[_0x33cf59(0x145)]},_0x5043a0[_0x33cf59(0x138)]);}else{if(_0x5043a0[_0x33cf59(0x1db)]===_0x33cf59(0x21c))try{const _0x3409bd=_0x5043a0[_0x33cf59(0x145)]?_0x5043a0['message']['apiKey']:'';if(!_0x3409bd)throw new Error(_0x33cf59(0x194));const _0x5daffe=new GoogleGenerativeAI(_0x3409bd),_0x812107=_0x5daffe['getGenerativeModel']({'model':GEMINI_MODEL}),_0x3810f0=await _0x812107[_0x33cf59(0x227)](_0x33cf59(0x1ca)),_0x37a445=await _0x3810f0['response'],_0x22776e=_0x37a445[_0x33cf59(0xff)]();this[_0x33cf59(0x23f)](_0x5043a0[_0x33cf59(0x241)],_0x5043a0[_0x33cf59(0x1db)],{'success':!![],'message':_0x33cf59(0x1a1)+_0x22776e[_0x33cf59(0x22f)](0x0,0x14)+_0x33cf59(0x1ab)},_0x5043a0[_0x33cf59(0x138)]);}catch(_0x3a257a){this[_0x33cf59(0x23f)](_0x5043a0[_0x33cf59(0x241)],_0x5043a0[_0x33cf59(0x1db)],{'success':![],'message':_0x3a257a[_0x33cf59(0x145)]},_0x5043a0[_0x33cf59(0x138)]);}else{if(_0x5043a0[_0x33cf59(0x1db)]===_0x33cf59(0x19d))try{const _0x7a730e=await this[_0x33cf59(0x16d)](),_0x2eebe2=await this[_0x33cf59(0x164)](_0x33cf59(0x108),'instance',{'startkey':_0x33cf59(0x1fa),'endkey':_0x33cf59(0x142)}),_0x18c4fe=_0x2eebe2&&_0x2eebe2['rows']?_0x2eebe2[_0x33cf59(0x102)][_0x33cf59(0x1a5)]:0x0;this[_0x33cf59(0x23f)](_0x5043a0[_0x33cf59(0x241)],_0x5043a0['command'],{'success':!![],'weather':_0x33cf59(0x1bd)+_0x7a730e+_0x33cf59(0x149)+(this['sensorLastValues'][this[_0x33cf59(0x160)][_0x33cf59(0x130)]]||'?')+'Â°C','calendar':_0x18c4fe+_0x33cf59(0x1f5)},_0x5043a0[_0x33cf59(0x138)]);}catch(_0x39718d){this[_0x33cf59(0x23f)](_0x5043a0['from'],_0x5043a0['command'],{'success':![]},_0x5043a0[_0x33cf59(0x138)]);}}}}}}}}}}}}}[a0_0x51e452(0x168)](){const _0x2fcac9=a0_0x51e452;if(!this['activeModules'][_0x2fcac9(0x1df)])return;this['log']['debug'](_0x2fcac9(0x257));try{const _0x52696b=this['rawEventLog']||[];pythonBridge[_0x2fcac9(0x146)](this,_0x2fcac9(0x105),{'events':_0x52696b});}catch(_0xf488c8){this[_0x2fcac9(0x24f)][_0x2fcac9(0x117)](_0x2fcac9(0x20e));}}async[a0_0x51e452(0x1b5)](_0x12ffad,_0x36a1cd){const _0x350353=a0_0x51e452;if(!_0x36a1cd||this[_0x350353(0x17c)])return;if(_0x12ffad[_0x350353(0x1aa)](_0x350353(0x1e0))&&_0x12ffad['endsWith']('communicate.request')&&_0x36a1cd['val'])return;if(this[_0x350353(0x160)][_0x350353(0x203)]&&_0x12ffad===this[_0x350353(0x160)]['infrasoundSensorId']&&this[_0x350353(0x231)][_0x350353(0x196)]){this[_0x350353(0x127)](_0x36a1cd[_0x350353(0x17b)]);return;}if(_0x36a1cd['ack']&&_0x12ffad['endsWith']('pulse'))return;if(_0x12ffad===this[_0x350353(0x248)]+'.system.mode'){if(_0x36a1cd[_0x350353(0x17b)]&&Object['values'](setup[_0x350353(0x1a0)])[_0x350353(0x1aa)](_0x36a1cd[_0x350353(0x17b)])){this[_0x350353(0x249)]=_0x36a1cd[_0x350353(0x17b)];if(_0x36a1cd['val']===setup[_0x350353(0x1a0)][_0x350353(0x151)])await recorder[_0x350353(0xee)](this,![]);else await recorder[_0x350353(0xee)](this,!![]);if(this[_0x350353(0x1e8)]){let _0x57e655=![],_0xaa1d0f=0x0,_0x3e063a=_0x350353(0x21a);if(this[_0x350353(0x249)]==='party')_0x57e655=!![],_0xaa1d0f=0x168,_0x3e063a=_0x350353(0x11e);else this[_0x350353(0x249)]===_0x350353(0x190)&&(_0x57e655=!![],_0xaa1d0f=0x5a0,_0x3e063a=_0x350353(0x139));pythonBridge['send'](this,_0x350353(0x15d),{'active':_0x57e655,'duration':_0xaa1d0f,'label':_0x3e063a}),await this[_0x350353(0x1f0)](_0x350353(0x1c2),{'val':JSON[_0x350353(0x1fc)]({'active':_0x57e655,'label':_0x3e063a,'timestamp':Date[_0x350353(0xf3)]()}),'ack':!![]});}}if(!_0x36a1cd[_0x350353(0x189)])this[_0x350353(0x1eb)](_0x12ffad,{'val':this[_0x350353(0x249)],'ack':!![]});return;}if(_0x12ffad['endsWith']('analysis.energy.warmupSources')&&_0x36a1cd[_0x350353(0x189)])this['protectAiMemory'](_0x36a1cd[_0x350353(0x17b)]);if(_0x12ffad[_0x350353(0x1b3)]('analysis.energy.warmupTimes')&&_0x36a1cd[_0x350353(0x189)]&&this[_0x350353(0x231)][_0x350353(0x14d)])automation[_0x350353(0x258)](this);if(!_0x36a1cd[_0x350353(0x189)]){if(_0x12ffad[_0x350353(0x1aa)](_0x350353(0x128))&&_0x36a1cd[_0x350353(0x17b)]){this['setState'](_0x12ffad,{'val':![],'ack':!![]}),aiAgent['runGeminiAnalysis'](this);return;}if(_0x12ffad['includes'](_0x350353(0x14f))&&_0x36a1cd[_0x350353(0x17b)]){this[_0x350353(0x1eb)](_0x12ffad,{'val':![],'ack':!![]});if(this['isProVersion'])aiAgent[_0x350353(0x1d2)](this,pythonBridge);return;}if(_0x12ffad[_0x350353(0x1aa)](_0x350353(0xef))&&_0x36a1cd[_0x350353(0x17b)]){this[_0x350353(0x1eb)](_0x12ffad,{'val':![],'ack':!![]}),aiAgent[_0x350353(0x245)](this);return;}if(_0x12ffad[_0x350353(0x1aa)](_0x350353(0x1d9))&&_0x36a1cd[_0x350353(0x17b)]){this['setState'](_0x12ffad,{'val':![],'ack':!![]}),aiAgent[_0x350353(0x175)](this);return;}if(_0x12ffad['includes'](_0x350353(0x1b8))&&_0x36a1cd['val']){this[_0x350353(0x1eb)](_0x12ffad,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0xecd082=await this[_0x350353(0xfd)](_0x350353(0x124));if(_0xecd082&&_0xecd082[_0x350353(0x17b)]){const _0x2f1197=JSON[_0x350353(0x1a3)](_0xecd082['val']);this['setStateAsync'](_0x350353(0x14e),{'val':'Sec-Training\x20started...','ack':!![]}),pythonBridge[_0x350353(0x146)](this,'TRAIN_SECURITY',{'sequences':_0x2f1197});}}catch(_0x3ab1c3){}return;}if(_0x12ffad[_0x350353(0x1aa)](_0x350353(0x11c))&&_0x36a1cd['val']){this[_0x350353(0x1eb)](_0x12ffad,{'val':![],'ack':!![]});try{aiAgent[_0x350353(0xf4)](this,'NIGHT'),setTimeout(()=>aiAgent[_0x350353(0xf4)](this,_0x350353(0x17e)),0x2ee0);if(this[_0x350353(0x1e8)]){this[_0x350353(0x168)]();const _0x134b59=await this['getStateAsync'](_0x350353(0x219));if(_0x134b59&&_0x134b59[_0x350353(0x17b)])pythonBridge[_0x350353(0x146)](this,_0x350353(0x216),{'digests':JSON['parse'](_0x134b59['val'])});}}catch(_0x5c7873){this[_0x350353(0x24f)][_0x350353(0x117)]('triggerHealth\x20error:\x20'+_0x5c7873['message']);}return;}if(_0x12ffad['includes'](_0x350353(0x159))&&_0x36a1cd[_0x350353(0x17b)]){this[_0x350353(0x1eb)](_0x12ffad,{'val':![],'ack':!![]}),await this[_0x350353(0x12d)]();return;}if(_0x12ffad[_0x350353(0x1aa)](_0x350353(0x204))&&_0x36a1cd['val']){this[_0x350353(0x1eb)](_0x12ffad,{'val':![],'ack':!![]});if(this[_0x350353(0x1e8)])try{const _0x22d6b2=await this[_0x350353(0xfd)](_0x350353(0xf1));if(_0x22d6b2&&_0x22d6b2[_0x350353(0x17b)]){const _0x1d6994={};if(this[_0x350353(0x160)][_0x350353(0x207)])this[_0x350353(0x160)][_0x350353(0x207)][_0x350353(0xf2)](_0x7ddb20=>{const _0x25729b=_0x350353;if(_0x7ddb20['id']&&_0x7ddb20[_0x25729b(0x12a)])_0x1d6994[_0x7ddb20['id']]=_0x7ddb20['type'];});pythonBridge[_0x350353(0x146)](this,_0x350353(0x170),{'events':JSON['parse'](_0x22d6b2[_0x350353(0x17b)]),'deviceMap':_0x1d6994});}}catch(_0x453a69){}return;}if(_0x12ffad['includes'](_0x350353(0x208))&&_0x36a1cd[_0x350353(0x17b)]){this['setState'](_0x12ffad,{'val':![],'ack':!![]}),topology[_0x350353(0x1fb)](this);if(this['isProVersion'])try{const _0x28df2b=await this['getStateAsync'](_0x350353(0x124));if(_0x28df2b&&_0x28df2b[_0x350353(0x17b)])pythonBridge[_0x350353(0x146)](this,_0x350353(0x141),{'sequences':JSON[_0x350353(0x1a3)](_0x28df2b[_0x350353(0x17b)])});}catch(_0x1ee70a){}return;}}const _0x402ed7=(this[_0x350353(0x160)][_0x350353(0x207)]||[])[_0x350353(0x256)](_0x4e72bf=>_0x4e72bf['id']===_0x12ffad);if(_0x402ed7){const _0xe6b7e3=await recorder[_0x350353(0x177)](this,_0x12ffad,_0x36a1cd,_0x402ed7);_0xe6b7e3&&this[_0x350353(0x1eb)](_0x350353(0x14c),{'val':Date[_0x350353(0xf3)](),'ack':!![]});_0xe6b7e3&&_0xe6b7e3[_0x350353(0x12a)]===_0x350353(0x244)&&_0xe6b7e3[_0x350353(0x224)]&&this[_0x350353(0x1e8)]&&deadMan[_0x350353(0x24d)](this,_0xe6b7e3[_0x350353(0x224)]);_0x36a1cd[_0x350353(0x17b)]&&(_0x36a1cd['val']===!![]||_0x36a1cd[_0x350353(0x17b)]===0x1||String(_0x36a1cd[_0x350353(0x17b)])[_0x350353(0x1c4)]()===_0x350353(0x1b4))&&(_0x402ed7[_0x350353(0x12a)]&&(_0x402ed7[_0x350353(0x12a)][_0x350353(0x1aa)](_0x350353(0x133))||_0x402ed7[_0x350353(0x12a)][_0x350353(0x1aa)]('door'))&&this[_0x350353(0x10b)](_0x402ed7));if(_0x402ed7[_0x350353(0x12a)]===_0x350353(0x21d)||_0x402ed7[_0x350353(0x12a)]===_0x350353(0x13b)){if(this[_0x350353(0x231)][_0x350353(0x14d)])automation['cleanupGhostInterventions'](this);}}}async[a0_0x51e452(0x155)](_0x4d2094){const _0x1521cf=a0_0x51e452;if(!this['memoryCache']||Date['now']()-this['bootTime']>0x493e0)return;try{const _0x3e18d4=JSON[_0x1521cf(0x1a3)](_0x4d2094),_0x4023ce=this[_0x1521cf(0x162)][_0x1521cf(0xf0)];let _0x53f870=![];for(const _0x1ecf17 in _0x4023ce){if(_0x4023ce[_0x1ecf17][_0x1521cf(0x1aa)]('AI')&&_0x3e18d4[_0x1ecf17]&&!_0x3e18d4[_0x1ecf17][_0x1521cf(0x1aa)]('AI')){_0x53f870=!![];break;}}_0x53f870&&(await this[_0x1521cf(0x1f0)](_0x1521cf(0x198),{'val':JSON[_0x1521cf(0x1fc)](this[_0x1521cf(0x162)][_0x1521cf(0x13e)]),'ack':!![]}),await this[_0x1521cf(0x1f0)]('analysis.energy.warmupSources',{'val':JSON[_0x1521cf(0x1fc)](this['memoryCache'][_0x1521cf(0xf0)]),'ack':!![]}));}catch(_0x4bd587){}}async[a0_0x51e452(0x104)](){const _0x5dbbb3=a0_0x51e452;try{const _0x46bc46=await this[_0x5dbbb3(0xfd)](setup[_0x5dbbb3(0x1ae)]);if(_0x46bc46&&_0x46bc46[_0x5dbbb3(0x17b)])this['currentSystemMode']=_0x46bc46[_0x5dbbb3(0x17b)];}catch(_0x5e8034){this[_0x5dbbb3(0x249)]=setup[_0x5dbbb3(0x1a0)][_0x5dbbb3(0x166)];}}async[a0_0x51e452(0x21b)](){const _0x18829a=a0_0x51e452,_0x50e6ed=this[_0x18829a(0x160)][_0x18829a(0x1b0)]||[];if(_0x50e6ed['length']===0x0)return![];const _0x3ff948=[],_0x2571d1=Date[_0x18829a(0xf3)](),_0xeed82d=0x5*0x3c*0x3e8;for(const _0x9b6775 of _0x50e6ed){try{let _0x350f1c=![];try{const _0x1f2995=await this['getForeignStateAsync'](_0x9b6775+'.isOnline');if(_0x1f2995&&_0x1f2995[_0x18829a(0x17b)]===!![])_0x350f1c=!![];}catch(_0xd2aa89){}if(!_0x350f1c)try{const _0x436350=await this[_0x18829a(0x18b)](_0x9b6775+_0x18829a(0x222));if(_0x436350&&_0x436350['ts']){const _0x14bd6a=_0x2571d1-_0x436350['ts'];if(_0x14bd6a<_0xeed82d)_0x350f1c=!![];}}catch(_0x56951f){}if(!_0x350f1c)try{const _0x1f77f5=await this[_0x18829a(0x18b)](_0x9b6775+_0x18829a(0x110));if(_0x1f77f5&&typeof _0x1f77f5[_0x18829a(0x17b)]==='number'&&_0x1f77f5[_0x18829a(0x17b)]>0x0)_0x350f1c=!![];}catch(_0x2760a6){}if(!_0x350f1c)try{const _0xed7167=await this['getForeignStateAsync'](_0x9b6775);if(_0xed7167){const _0x128298=_0x2571d1-(_0xed7167['ts']||0x0);_0x128298<_0xeed82d&&(_0xed7167[_0x18829a(0x17b)]===!![]||_0xed7167[_0x18829a(0x17b)]==='online'||_0xed7167[_0x18829a(0x17b)]===0x1)&&(_0x350f1c=!![]);}}catch(_0x96e427){}if(_0x350f1c){const _0x1ae1b1=_0x9b6775[_0x18829a(0x191)]('.'),_0x497dbf=_0x1ae1b1[_0x1ae1b1[_0x18829a(0x1a5)]-0x1]||_0x9b6775;_0x3ff948['push'](_0x497dbf);}}catch(_0x5892d2){this[_0x18829a(0x24f)][_0x18829a(0x117)]('checkWifiPresence:\x20Error\x20checking\x20'+_0x9b6775+':\x20'+_0x5892d2[_0x18829a(0x145)]);}}const _0x50367d=_0x3ff948[_0x18829a(0x1a5)]>0x0?_0x3ff948[_0x18829a(0x22a)](',\x20'):'Niemand';return await this['setStateAsync'](_0x18829a(0x174),{'val':_0x50367d,'ack':!![]}),_0x3ff948[_0x18829a(0x1a5)]>0x0;}async['runAutopilot'](){const _0x210a43=a0_0x51e452;await aiAgent[_0x210a43(0x22b)](this);this['activeModules']['health']&&(this[_0x210a43(0x1bb)](),this[_0x210a43(0x237)]());if(this[_0x210a43(0x231)][_0x210a43(0x14d)])this['triggerEnergyPrediction']();}async[a0_0x51e452(0x16d)](){const _0x43e593=a0_0x51e452,_0x5ddb45=[_0x43e593(0x20f),'accuweather.0',_0x43e593(0x1f9)],_0x5a603b=['forecast.current.weather',_0x43e593(0x17d),_0x43e593(0x221)];for(const _0x54bd9f of _0x5ddb45){for(const _0x5e2dd6 of _0x5a603b){try{const _0x17e788=_0x54bd9f+'.'+_0x5e2dd6,_0x1b5caa=await this[_0x43e593(0x18b)](_0x17e788);if(_0x1b5caa&&_0x1b5caa[_0x43e593(0x17b)]){const _0x59dc73=String(_0x1b5caa[_0x43e593(0x17b)])['toLowerCase']();if(_0x59dc73[_0x43e593(0x1aa)](_0x43e593(0x1ba))||_0x59dc73['includes'](_0x43e593(0x132))||_0x59dc73[_0x43e593(0x1aa)](_0x43e593(0xf6))||_0x59dc73[_0x43e593(0x1aa)]('sonn')||_0x59dc73[_0x43e593(0x1aa)]('clear'))return this['log'][_0x43e593(0x243)]('â˜€ï¸\x20Solar\x20Condition:\x20SUNNY\x20detected\x20via\x20'+_0x17e788),!![];}}catch(_0x2ea00a){}}}return![];}[a0_0x51e452(0x237)](){const _0x58f134=a0_0x51e452;if(!this[_0x58f134(0x1e8)])return;try{this[_0x58f134(0xfd)](_0x58f134(0x124),(_0x4a2572,_0x4ca002)=>{const _0x42678e=_0x58f134;if(_0x4a2572||!_0x4ca002||!_0x4ca002['val'])return;try{const _0x4bfbfc=JSON['parse'](_0x4ca002[_0x42678e(0x17b)]);if(!_0x4bfbfc||_0x4bfbfc[_0x42678e(0x1a5)]===0x0)return;pythonBridge[_0x42678e(0x146)](this,_0x42678e(0x16c),{'sequences':_0x4bfbfc}),this[_0x42678e(0x24f)]['debug'](_0x42678e(0x22e)+_0x4bfbfc['length']+_0x42678e(0x1bf));}catch(_0x3fd89b){this[_0x42678e(0x24f)]['warn']('triggerGaitAnalysis\x20parse\x20error:\x20'+_0x3fd89b[_0x42678e(0x145)]);}});}catch(_0x3bd258){this[_0x58f134(0x24f)][_0x58f134(0x117)](_0x58f134(0x11f)+_0x3bd258[_0x58f134(0x145)]);}}async[a0_0x51e452(0x12d)](){const _0x110070=a0_0x51e452;if(!this['isProVersion']||!this[_0x110070(0x231)][_0x110070(0x14d)])return;try{const _0x4c714b={},_0x6036c8={},_0x1f91ed=this['config']['devices']||[];for(const _0x359ece of _0x1f91ed){if((_0x359ece[_0x110070(0x12a)]==='temperature'||_0x359ece['type']===_0x110070(0x13b))&&_0x359ece[_0x110070(0x224)])try{const _0x3832b2=await this['getForeignStateAsync'](_0x359ece['id']);_0x3832b2&&typeof _0x3832b2[_0x110070(0x17b)]==='number'&&(_0x4c714b[_0x359ece[_0x110070(0x224)]]=_0x3832b2['val'],_0x6036c8[_0x359ece[_0x110070(0x224)]]=_0x359ece[_0x110070(0x1cf)]||![]);}catch(_0x38474b){}}let _0x4c34a4=0xa;if(this['config']['weatherTempId'])try{const _0x419387=await this[_0x110070(0x18b)](this[_0x110070(0x160)][_0x110070(0x1e3)]);if(_0x419387&&typeof _0x419387[_0x110070(0x17b)]==='number')_0x4c34a4=_0x419387[_0x110070(0x17b)];}catch(_0x2bb268){}const _0x4a15f5=await this['checkSolarCondition']();let _0x4cbe0b={};try{const _0x2dc669=await this[_0x110070(0xfd)]('analysis.energy.warmupTargets');if(_0x2dc669&&_0x2dc669[_0x110070(0x17b)])_0x4cbe0b=JSON[_0x110070(0x1a3)](_0x2dc669[_0x110070(0x17b)]);}catch(_0x5eb837){}pythonBridge[_0x110070(0x146)](this,'PREDICT_ENERGY',{'current_temps':_0x4c714b,'t_out':_0x4c34a4,'is_sunny':_0x4a15f5,'solar_flags':_0x6036c8,'warmup_targets':_0x4cbe0b}),this[_0x110070(0x24f)][_0x110070(0x1a6)](_0x110070(0x180)+Object[_0x110070(0x129)](_0x4c714b)[_0x110070(0x1a5)]+'\x20rooms)');}catch(_0x359f5b){this[_0x110070(0x24f)][_0x110070(0x117)](_0x110070(0x176)+_0x359f5b[_0x110070(0x145)]);}}[a0_0x51e452(0x1bb)](){const _0x60a9d=a0_0x51e452;if(!this[_0x60a9d(0x1ce)]||this['rawEventLog'][_0x60a9d(0x1a5)]===0x0)return;const _0xcafdd5=new Array(0x30)[_0x60a9d(0x24e)](0x0),_0x22d0ce=Array[_0x60a9d(0x241)]({'length':0x30},()=>[]),_0x2b200b=new Date()['setHours'](0x0,0x0,0x0,0x0);this[_0x60a9d(0x1ce)]['forEach'](_0x4b7728=>{const _0x39b078=_0x60a9d,_0x3ac07d=new Date(_0x4b7728[_0x39b078(0x16a)]);if(_0x3ac07d[_0x39b078(0x1cc)]()>=_0x2b200b){const _0xcb3571=_0x3ac07d[_0x39b078(0x182)](),_0x4b3b1e=_0x3ac07d[_0x39b078(0x199)](),_0x20c499=_0xcb3571*0x2+Math['floor'](_0x4b3b1e/0x1e);_0x20c499>=0x0&&_0x20c499<0x30&&(_0xcafdd5[_0x20c499]++,_0x22d0ce[_0x20c499]['push']({'time':_0x3ac07d['toLocaleTimeString'](_0x39b078(0x123),{'hour':_0x39b078(0x1e6),'minute':'2-digit'}),'location':_0x4b7728[_0x39b078(0x224)]||_0x39b078(0x1fd),'type':_0x4b7728['type']||'Event'}));}}),this[_0x60a9d(0x1f0)](_0x60a9d(0x181),{'val':JSON[_0x60a9d(0x1fc)](_0xcafdd5),'ack':!![]}),this[_0x60a9d(0x1f0)](_0x60a9d(0x23b),{'val':JSON[_0x60a9d(0x1fc)](_0x22d0ce),'ack':!![]});}async[a0_0x51e452(0x127)](_0x1c19ca){const _0x21dd0b=a0_0x51e452;if(!this['config'][_0x21dd0b(0x203)]||typeof _0x1c19ca!==_0x21dd0b(0x1e2))return;const _0x710129=this[_0x21dd0b(0x160)][_0x21dd0b(0x1cd)]||0.04;this[_0x21dd0b(0x131)][_0x21dd0b(0x1dc)]({'timestamp':Date[_0x21dd0b(0xf3)](),'value':_0x1c19ca}),this[_0x21dd0b(0x131)][_0x21dd0b(0x1a5)]>0x64&&this[_0x21dd0b(0x131)]['shift'](),_0x1c19ca>_0x710129&&!this[_0x21dd0b(0x192)]&&(this[_0x21dd0b(0x192)]=!![],this[_0x21dd0b(0x24f)][_0x21dd0b(0x117)](_0x21dd0b(0x136)+_0x1c19ca[_0x21dd0b(0x20b)](0x4)+_0x21dd0b(0x13f)+_0x710129+_0x21dd0b(0x15f)),await this[_0x21dd0b(0x212)](_0x1c19ca,_0x21dd0b(0x126)),setTimeout(()=>{const _0xd9b2e=_0x21dd0b;this[_0xd9b2e(0x192)]=![];},0x5*0x3c*0x3e8));}async[a0_0x51e452(0x212)](_0x359bd6,_0x132b57){const _0x5536f8=a0_0x51e452;if(!this[_0x5536f8(0x111)]){const _0xe6f0ca=this[_0x5536f8(0x230)][_0x5536f8(0x22c)](0x0,0xa),_0x171a52=_0xe6f0ca['map'](_0x4284c6=>new Date(_0x4284c6[_0x5536f8(0x16a)])[_0x5536f8(0x10c)](_0x5536f8(0x123))+_0x5536f8(0x23a)+(_0x4284c6[_0x5536f8(0x224)]||_0x5536f8(0x106))+':\x20'+_0x4284c6[_0x5536f8(0x1c8)])[_0x5536f8(0x22a)]('\x0a');this[_0x5536f8(0x24f)][_0x5536f8(0x117)](_0x5536f8(0x1d3)+_0x359bd6[_0x5536f8(0x20b)](0x4)+_0x5536f8(0x1ad)+_0x171a52);if(this[_0x5536f8(0x160)][_0x5536f8(0x20a)])try{const _0x49a113=await this[_0x5536f8(0x18b)](this[_0x5536f8(0x160)]['infrasoundArmingId']);_0x49a113&&_0x49a113[_0x5536f8(0x17b)]===!![]&&(await this[_0x5536f8(0x1f0)](_0x5536f8(0x1de),{'val':JSON[_0x5536f8(0x1fc)]({'timestamp':Date['now'](),'pressure':_0x359bd6[_0x5536f8(0x20b)](0x4),'eventType':_0x132b57,'recentEvents':_0xe6f0ca[_0x5536f8(0x22c)](0x0,0x3)}),'ack':!![]}),this[_0x5536f8(0x24f)][_0x5536f8(0x100)]('ðŸš¨\x20INFRASCHALL-ALARM:\x20Anomalie\x20bei\x20Abwesenheit\x20(scharf)!'));}catch(_0x220a37){}}else this[_0x5536f8(0x24f)][_0x5536f8(0x243)](_0x5536f8(0x217)+_0x359bd6['toFixed'](0x4)+'\x20(Bewohner\x20anwesend\x20-\x20normal)');}async[a0_0x51e452(0x10b)](_0x1531ce){const _0x46fe15=a0_0x51e452;if(!_0x1531ce||!_0x1531ce['location'])return;try{const _0x54f3ff=(this['config'][_0x46fe15(0x207)]||[])[_0x46fe15(0x1c6)](_0x4a0ca8=>_0x4a0ca8[_0x46fe15(0x224)]===_0x1531ce[_0x46fe15(0x224)]&&(_0x4a0ca8[_0x46fe15(0x12a)]===_0x46fe15(0x21d)||_0x4a0ca8[_0x46fe15(0x12a)]===_0x46fe15(0x13b)));if(_0x54f3ff[_0x46fe15(0x1a5)]===0x0)return;const _0x34b310=await this[_0x46fe15(0x18b)](_0x54f3ff[0x0]['id']);if(!_0x34b310||typeof _0x34b310[_0x46fe15(0x17b)]!=='number')return;const _0x40e3a8=_0x34b310['val'];let _0x6d1bc4=null;if(this[_0x46fe15(0x160)]['weatherTempId']){const _0x13723f=await this[_0x46fe15(0x18b)](this[_0x46fe15(0x160)][_0x46fe15(0x1e3)]);_0x13723f&&typeof _0x13723f[_0x46fe15(0x17b)]===_0x46fe15(0x1e2)&&(_0x6d1bc4=_0x13723f[_0x46fe15(0x17b)]);}if(_0x6d1bc4!==null){const _0x216978=Math[_0x46fe15(0x18a)](_0x40e3a8-_0x6d1bc4);_0x216978>0x3&&(this['log']['debug'](_0x46fe15(0x1a8)+_0x1531ce[_0x46fe15(0x224)]+_0x46fe15(0x229)+_0x216978[_0x46fe15(0x20b)](0x1)+_0x46fe15(0x14b)+_0x40e3a8+_0x46fe15(0x210)+_0x6d1bc4+'Â°C)'),await this[_0x46fe15(0x1f0)]('analysis.ventilation.lastWindow',{'val':JSON[_0x46fe15(0x1fc)]({'room':_0x1531ce[_0x46fe15(0x224)],'timestamp':Date[_0x46fe15(0xf3)](),'tempDiff':_0x216978[_0x46fe15(0x20b)](0x1),'recommendation':_0x216978>0x5?_0x46fe15(0x135):_0x46fe15(0x19f)}),'ack':!![]}));}}catch(_0x10e772){this[_0x46fe15(0x24f)][_0x46fe15(0x117)](_0x46fe15(0x150)+_0x10e772[_0x46fe15(0x145)]);}}async[a0_0x51e452(0x14a)](_0x388a61){const _0x2c085c=a0_0x51e452;if(!_0x388a61||typeof _0x388a61!==_0x2c085c(0x19e))return;const _0x3565f8={'timestamp':_0x388a61[_0x2c085c(0x16a)]||Date['now'](),'id':_0x388a61['id']||Date[_0x2c085c(0xf3)]()[_0x2c085c(0x115)](),'name':_0x388a61[_0x2c085c(0x1c8)]||_0x2c085c(0x223),'type':_0x388a61[_0x2c085c(0x12a)]||_0x2c085c(0xfa),'location':_0x388a61[_0x2c085c(0x224)]||_0x2c085c(0x106),'value':_0x388a61[_0x2c085c(0x1af)]||null};this[_0x2c085c(0x230)][_0x2c085c(0x252)](_0x3565f8);if(this[_0x2c085c(0x230)]['length']>0x1388)this[_0x2c085c(0x230)][_0x2c085c(0x23e)]();await this[_0x2c085c(0x1f0)](_0x2c085c(0x17f),{'val':JSON[_0x2c085c(0x1fc)](this[_0x2c085c(0x230)]),'ack':!![]}),this['log']['debug'](_0x2c085c(0x15c)+_0x3565f8[_0x2c085c(0x1c8)]+'\x20('+_0x3565f8[_0x2c085c(0x224)]+')');}[a0_0x51e452(0x234)](_0x11d7b7){}}function a0_0x7f5e(_0x2a0c8d,_0x496fdc){const _0x2c0e39=a0_0x4450();return a0_0x7f5e=function(_0x3680b9,_0x97c9b1){_0x3680b9=_0x3680b9-0xed;let _0x445044=_0x2c0e39[_0x3680b9];return _0x445044;},a0_0x7f5e(_0x2a0c8d,_0x496fdc);}if(require[a0_0x51e452(0x113)]!==module)module[a0_0x51e452(0x1ef)]=_0xd5c4ca=>new CogniLiving(_0xd5c4ca);else new CogniLiving();