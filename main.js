const a0_0x2b333f=a0_0x2163;function a0_0x2163(_0x3e02dd,_0x4ab441){const _0x2365a7=a0_0x4f93();return a0_0x2163=function(_0x415d46,_0x357478){_0x415d46=_0x415d46-0x64;let _0x4f9378=_0x2365a7[_0x415d46];return _0x4f9378;},a0_0x2163(_0x3e02dd,_0x4ab441);}(function(_0x3d3d44,_0x1e5335){const _0x181fd1=a0_0x2163,_0x906b97=_0x3d3d44();while(!![]){try{const _0x2f94f7=-parseInt(_0x181fd1(0x69))/0x1+-parseInt(_0x181fd1(0x17b))/0x2*(-parseInt(_0x181fd1(0x12f))/0x3)+parseInt(_0x181fd1(0x172))/0x4+parseInt(_0x181fd1(0x166))/0x5*(-parseInt(_0x181fd1(0x195))/0x6)+parseInt(_0x181fd1(0x19b))/0x7*(parseInt(_0x181fd1(0x11b))/0x8)+parseInt(_0x181fd1(0x157))/0x9*(parseInt(_0x181fd1(0xa7))/0xa)+-parseInt(_0x181fd1(0xb1))/0xb;if(_0x2f94f7===_0x1e5335)break;else _0x906b97['push'](_0x906b97['shift']());}catch(_0x578472){_0x906b97['push'](_0x906b97['shift']());}}}(a0_0x4f93,0xb9111));const a0_0x357478=(function(){let _0x458fa0=!![];return function(_0x5d29c4,_0x4091e0){const _0xbcc035=_0x458fa0?function(){const _0x5bfa3c=a0_0x2163;if(_0x4091e0){const _0x4d1357=_0x4091e0[_0x5bfa3c(0x160)](_0x5d29c4,arguments);return _0x4091e0=null,_0x4d1357;}}:function(){};return _0x458fa0=![],_0xbcc035;};}()),a0_0x415d46=a0_0x357478(this,function(){const _0x2f2fc5=a0_0x2163;return a0_0x415d46['toString']()['search']('(((.+)+)+)+$')['toString']()[_0x2f2fc5(0x16e)](a0_0x415d46)[_0x2f2fc5(0x158)](_0x2f2fc5(0xd9));});function a0_0x4f93(){const _0x257689=['_calName','includes','ltmJob','analyzeWindowOpening','dependencyInstallInProgress','debug','ALARM','common','info','sensor.window','createDailyDigest','startSystem','getForeignObjectAsync','warn','Activity-Level','door','infrasoundLocked','testNotification','setupDriftAnalysisScheduler','initSystemConfig','ANALYZE_TREND','Standard','getLtmData','stopService',')\x20-\x20Phase\x20D\x20(Forensic\x20Calibration)','ack','Nuukanni\x20Security','communicate.request','\x20Tage)','cogni-living\x20adapter\x20starting\x20(v','(((.+)+)+)+$','infrasoundThreshold','analysis.trigger','getTime','monitorEnforcements','number','checkCalendarTriggers','entries','analysis.health.activityTrend','[Infrasound]\x20ðŸŸ¡\x20Debug-Mode:\x20Alarm\x20detected\x20but\x20suppressed\x20because\x20presence=true.','onReady','getEnums','INTERNAL','trackerHeartbeat','updateTopology','pop','licenseKey','sensor.door','infrasoundArmingId','./lib/topology','role','SYSTEM_MODES','parse','ANALYZE_GAIT','runPythonHealthCheck','updateHealthVector','getState','security.alarm_triggered','notifyTelegramInstance','floor','briefingJob','abs','getStateAsync','checkSolarCondition','notifyTelegramEnabled','analysis.energy.mpcActive','@iobroker/adapter-core','Party\x20Mode','useWeather','./lib/setup','system.presenceWho','enum','Key\x20not\x20found\x20or\x20not\x20provided','initHistory','sources','exitGraceTimer','analysis.topology.structure','WiFi\x20Presence\x20detected.','ready','./lib/python_bridge','getForeignStateAsync','message','keys','LTM.rawEventLog','namespace','analysis.health.gaitSensors','LTM.dailyDigests','notifyPushoverEnabled','isSolar','log','Daten\x20nicht\x20verfÃ¼gbar','Notification\x20Test\x20Failed:\x20','geminiApiKey','ErklÃ¤rt\x20durch:\x20','from','memoryCache','4135984hJDbBo','inactivityThresholdHours','clear','\x20rooms\x20(preventing\x20Cold\x20Start\x20Amnesia).','modeResetJob','getMinutes','value','TRAIN_HEALTH','analysis.automation.autoApply','PINN\x20AI\x20Forecast','ðŸ§ \x20Graph-Brain:\x20Training\x20Behaviour\x20Matrix\x20based\x20on\x20','ðŸ””\x20Dies\x20ist\x20ein\x20Test\x20von\x20Cogni-Living.','calendarName','lastTrackerEventTime','VACATION','LTM.trainingData.sequences','analysis.training.triggerComfort','subscribeStates','scanDevices','filter','1251609WVMFjZ','sendTo','triggerBriefing','analysis.automation.targetValue','sort','text','Adapter','NextHours.Location_1.Day_1.current.symbol_desc','send','location','scores','config','onUnload','analysis.automation.patternDetected','thermostat','analysis.automation.targetId','triggerDailyDigest','runAutopilot','\x20opened.\x20Peak\x20Pressure:\x20','PREDICT_ENERGY','analysis.energy.warmupSources','healthTrendInterval','analysis.energy.warmupTargets','NORMAL','fill','Forensic\x20Infrasound\x20Log','online','scanForDevices','subscribeForeignStatesAsync','enum.functions.*','rawEventLog','Warm-Up\x20Time\x20(Minutes\x20to\x20Target)','Active\x20Calendar\x20Enforcements\x20(Locks)','startService','Guest\x20Mode','Active\x20Ventilation\x20Alerts','json','instance','handleInfrasound','âš ï¸\x20Graph-Brain:\x20No\x20training\x20sequences\x20found\x20in\x20LTM.','9avbFXN','search','presenceDevices','now','response','getOverviewData','setObjectNotExistsAsync','Test','ðŸŽ“\x20[RL-RESET]\x20Lern-Sperre\x20(Penalty)\x20fÃ¼r\x20\x27','apply','ðŸ§ \x20Memory:\x20Cache\x20hydrated\x20with\x20','./lib/scheduler','LTM.baselineStatus','onMessage','pressureBuffer','1887805uMOgKC','analysis.training.triggerTopology','times','forecast.current.weather','setupLtmScheduler','initZombies','analysis.security.infrasoundLog','daswetter.0','constructor','checkWifiPresence','Graph-Brain\x20Train\x20Error:\x20','./lib/recorder','5199860dGaAZO','setStateAsync','LTM.trainingData.thermodynamics','setPresence','state','geminiModel','values','sendMorningBriefing','getGenerativeModel','4fLrWXu','analysis.security.learningStatus','\x20hPa.\x20Einbruch\x20wahrscheinlich.','setState','[Infrasound]\x20Subscribing\x20to\x20external\x20sensor:\x20','scanThermostats','TRAIN_SECURITY','driftAnalysisTimer','analysis.energy.rlPenalties','analysis.energy.ventilationAlerts','toLowerCase','object','.communicate.request','notifyPushoverInstance','Gait\x20Speed\x20Calculation\x20Proof','main','checkThermostats','executeAutomationAction','Kein\x20API\x20Key\x20Ã¼bergeben','callback','setHours','analysis.training.triggerSecurity','Sec-Training\x20started...','magnet','endsWith','[Calibration]\x20Window\x20','6iriaom','telegram','.system.mode','ANOMALY\x20(Real\x20Threat?)','minutes_safe','command','7ViJhSO','Kein\x20Wetter-Adapter','Verbunden','updated','triggerEnergyPrediction','subscribeForeignStates','isGracePeriodActive','TRAIN_TOPOLOGY','manual','infrasoundSensorId','updateLocation','length','onStateChange','stringify','SYSTEM_DP_MODE','Lernphase\x20(','devices','slice','dismissAutomation','MATCH\x20(False\x20Positive)','sonn','@google/generative-ai','appendToLog','SET_TOPOLOGY','33025CFSRmu','sendNotification','analysis.energy.warmupTimes','updateTopologyMatrix','analysis.training.triggerHealth','runBaselineDriftAnalysis','simulateEnergyMPC','analysisInterval','val','getOutsideTemperatureNumeric','cleanupGhostInterventions','systemConfig','name','isPresent','cancel','isProVersion','[Forensics]\x20Infrasound\x20Event\x20correlated:\x20','Memory\x20Hydration\x20Failed:\x20','eventHistory','analysis.automation.description','simulateButler','dailyDigests','heiter','motion','sunny','lastAlertState','processSensorEvent','application/json','{\x22default\x22:\x2021}','analysisTimer','currentSystemMode','calendarInstance','push','Fehler:\x20','createAllObjects','open','bind','Keine\x20Antwort\x20von\x20Gemini','runGeminiAnalysis','infrasoundEnabled','string','SET_LEARNING_MODE','\x20hPa\x20(Threshold:\x20','activityLevel','triggerGaitAnalysis','forEach','split','automation.triggerAction','getForeignObjectsAsync','./lib/installer','toFixed','Aktiv\x20(','./lib/automation','Keine\x20Sensor-AktivitÃ¤t','triggerInfrasoundCorrelation','error','\x27\x20wurde\x20manuell\x20vom\x20Benutzer\x20gelÃ¶scht.','ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...','setupModeResetScheduler','TRAIN_COMFORT','Sensors\x20used\x20for\x20Gait\x20Analysis','./lib/ai_agent','444830YMVIvB','OPTIMIZE_ENERGY','exitTimer','unload','timestamp','\x20hPa\x20(Limit:\x20','genAI','protectAiMemory','system.adapter.','LTM.triggerDailyDigest','16799563FackWM','temperature','type','guest','analysis.triggerBriefing','sensorLastValues','some','bootTime','checkLicense','analysis.health.todayVector'];a0_0x4f93=function(){return _0x257689;};return a0_0x4f93();}a0_0x415d46();'use strict';const utils=require(a0_0x2b333f(0xfd)),{GoogleGenerativeAI}=require(a0_0x2b333f(0x66)),installer=require(a0_0x2b333f(0x9a)),scanner=require('./lib/scanner'),schedulers=require(a0_0x2b333f(0x162)),topology=require(a0_0x2b333f(0xec)),setup=require(a0_0x2b333f(0x100)),recorder=require(a0_0x2b333f(0x171)),pythonBridge=require(a0_0x2b333f(0x10a)),aiAgent=require(a0_0x2b333f(0xa6)),deadMan=require('./lib/dead_man'),automation=require(a0_0x2b333f(0x9d)),GEMINI_MODEL='models/gemini-flash-latest',ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};class CogniLiving extends utils[a0_0x2b333f(0x135)]{constructor(_0x41f838){const _0x39304d=a0_0x2b333f;super({..._0x41f838,'name':'cogni-living'}),this[_0x39304d(0x7b)]=[],this['analysisHistory']=[],this[_0x39304d(0x14d)]=[],this[_0x39304d(0x7e)]=[],this[_0x39304d(0xb6)]={},this[_0x39304d(0x74)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x39304d(0x76)]=!![],this[_0x39304d(0xa9)]=null,this[_0x39304d(0x106)]=null,this[_0x39304d(0x1a1)]=![],this[_0x39304d(0xad)]=null,this[_0x39304d(0x177)]=null,this[_0x39304d(0x87)]=setup['SYSTEM_MODES'][_0x39304d(0x146)],this[_0x39304d(0x78)]=![],this[_0x39304d(0x82)]=![],this[_0x39304d(0x86)]=null,this[_0x39304d(0xbd)]=null,this['modeResetJob']=null,this['driftAnalysisTimer']=null,this[_0x39304d(0xf7)]=null,this['trackerHeartbeat']=null,this[_0x39304d(0x144)]=null,this['dependencyInstallInProgress']=![],this[_0x39304d(0x128)]=Date[_0x39304d(0x15a)](),this[_0x39304d(0x11a)]=null,this[_0x39304d(0xb8)]=Date['now'](),this[_0x39304d(0xcb)]=![],this[_0x39304d(0x165)]=[],this['on'](_0x39304d(0x109),this['onReady'][_0x39304d(0x8d)](this)),this['on']('stateChange',this[_0x39304d(0x1a7)]['bind'](this)),this['on'](_0x39304d(0xaa),this['onUnload']['bind'](this)),this['on'](_0x39304d(0x10c),this[_0x39304d(0x164)]['bind'](this));}async[a0_0x2b333f(0xe3)](){const _0x235bcc=a0_0x2b333f;this[_0x235bcc(0x114)][_0x235bcc(0xc3)](_0x235bcc(0xd8)+this['version']+_0x235bcc(0xd3));if(!installer['checkAndInstall'](this,()=>this[_0x235bcc(0xc6)]()))return;}async[a0_0x2b333f(0xc6)](){const _0x38dbe7=a0_0x2b333f;await setup[_0x38dbe7(0x16b)](this);try{this[_0x38dbe7(0x78)]=await setup[_0x38dbe7(0xb9)](this['config'][_0x38dbe7(0xe9)]);}catch(_0x85123b){}if(!this[_0x38dbe7(0x13a)][_0x38dbe7(0x11c)]||this['config']['inactivityThresholdHours']<0.1)this['config']['inactivityThresholdHours']=0xc;await setup[_0x38dbe7(0x104)](this),await setup[_0x38dbe7(0xce)](this);try{const _0x1c9666=await this['getStateAsync']('analysis.energy.warmupTimes'),_0x2249e7=await this[_0x38dbe7(0xf9)]('analysis.energy.warmupSources');_0x1c9666&&_0x1c9666[_0x38dbe7(0x71)]&&_0x2249e7&&_0x2249e7[_0x38dbe7(0x71)]&&(Date['now']()-_0x1c9666['ts']<0x4*0xe10*0x3e8&&(this['memoryCache']={'times':JSON[_0x38dbe7(0xef)](_0x1c9666['val']),'sources':JSON['parse'](_0x2249e7[_0x38dbe7(0x71)])},this[_0x38dbe7(0x114)][_0x38dbe7(0xc3)](_0x38dbe7(0x161)+Object[_0x38dbe7(0x10d)](this[_0x38dbe7(0x11a)][_0x38dbe7(0x168)])[_0x38dbe7(0x1a6)]+_0x38dbe7(0x11e))));}catch(_0x22f77c){this[_0x38dbe7(0x114)][_0x38dbe7(0xc8)](_0x38dbe7(0x7a)+_0x22f77c[_0x38dbe7(0x10c)]);}if(this[_0x38dbe7(0x13a)][_0x38dbe7(0x117)])try{this[_0x38dbe7(0xad)]=new GoogleGenerativeAI(this[_0x38dbe7(0x13a)][_0x38dbe7(0x117)]),this['geminiModel']=this[_0x38dbe7(0xad)]['getGenerativeModel']({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x38dbe7(0x84)}}),this[_0x38dbe7(0x114)]['info']('Gemini\x20AI\x20initialized.');}catch(_0x163e6c){this[_0x38dbe7(0x114)][_0x38dbe7(0xa0)]('Gemini\x20Init\x20Error:\x20'+_0x163e6c[_0x38dbe7(0x10c)]);}await setup[_0x38dbe7(0x8b)](this),await this['loadSystemMode'](),await this[_0x38dbe7(0x15d)]('analysis.energy.pinnForecast',{'type':_0x38dbe7(0x176),'common':{'name':_0x38dbe7(0x124),'type':_0x38dbe7(0x91),'role':_0x38dbe7(0x153),'read':!![],'write':![]},'native':{}}),await this[_0x38dbe7(0x15d)](_0x38dbe7(0x184),{'type':_0x38dbe7(0x176),'common':{'name':_0x38dbe7(0x152),'type':_0x38dbe7(0x91),'role':'json','read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync']('analysis.energy.warmupTimes',{'type':_0x38dbe7(0x176),'common':{'name':_0x38dbe7(0x14e),'type':_0x38dbe7(0x91),'role':_0x38dbe7(0x153),'read':!![],'write':![]},'native':{}}),await this[_0x38dbe7(0x15d)](_0x38dbe7(0x145),{'type':'state','common':{'name':'Warm-Up\x20Target\x20Temps\x20(JSON)','type':_0x38dbe7(0x91),'role':_0x38dbe7(0x153),'read':!![],'write':!![],'def':_0x38dbe7(0x85)},'native':{}}),await this[_0x38dbe7(0x15d)](_0x38dbe7(0x183),{'type':'state','common':{'name':'Reinforcement\x20Learning\x20Penalties','type':'string','role':_0x38dbe7(0x153),'read':!![],'write':![],'def':'{}'},'native':{}}),await this[_0x38dbe7(0x15d)](_0x38dbe7(0xe1),{'type':'state','common':{'name':'General\x20Activity\x20Trend\x20(%)','type':_0x38dbe7(0xde),'role':_0x38dbe7(0x121),'unit':'%','read':!![],'write':![]},'native':{}}),await this[_0x38dbe7(0x15d)](_0x38dbe7(0x110),{'type':'state','common':{'name':_0x38dbe7(0xa5),'type':_0x38dbe7(0x91),'role':_0x38dbe7(0x134),'read':!![],'write':![]},'native':{}}),await this[_0x38dbe7(0x15d)]('analysis.energy.activeEnforcements',{'type':_0x38dbe7(0x176),'common':{'name':_0x38dbe7(0x14f),'type':_0x38dbe7(0x91),'role':_0x38dbe7(0x153),'read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x38dbe7(0x15d)](_0x38dbe7(0x16c),{'type':'state','common':{'name':_0x38dbe7(0x148),'type':_0x38dbe7(0x91),'role':_0x38dbe7(0x153),'read':!![],'write':![],'def':'[]'},'native':{}}),await this['setObjectNotExistsAsync']('analysis.health.gaitDebug',{'type':_0x38dbe7(0x176),'common':{'name':_0x38dbe7(0x189),'type':_0x38dbe7(0x91),'role':_0x38dbe7(0x134),'read':!![],'write':![]},'native':{}});try{const _0x2de49b=await this[_0x38dbe7(0xf9)](_0x38dbe7(0x10e));if(_0x2de49b&&_0x2de49b[_0x38dbe7(0x71)])this[_0x38dbe7(0x14d)]=JSON[_0x38dbe7(0xef)](_0x2de49b[_0x38dbe7(0x71)]);}catch(_0x2b4224){this[_0x38dbe7(0x14d)]=[];}try{const _0x2821de=await this['getStateAsync'](_0x38dbe7(0x111));if(_0x2821de&&_0x2821de['val'])this[_0x38dbe7(0x7e)]=JSON[_0x38dbe7(0xef)](_0x2821de[_0x38dbe7(0x71)]);}catch(_0x593d2d){this[_0x38dbe7(0x7e)]=[];}const _0x20dc6e=this[_0x38dbe7(0x7e)][_0x38dbe7(0x1a6)]>=(this[_0x38dbe7(0x13a)]['minDaysForBaseline']||0x7)?_0x38dbe7(0x9c)+this[_0x38dbe7(0x7e)][_0x38dbe7(0x1a6)]+_0x38dbe7(0xd7):_0x38dbe7(0x1aa)+this[_0x38dbe7(0x7e)][_0x38dbe7(0x1a6)]+'/'+(this[_0x38dbe7(0x13a)]['minDaysForBaseline']||0x7)+')';await this[_0x38dbe7(0x173)](_0x38dbe7(0x163),{'val':_0x20dc6e,'ack':!![]}),this['subscribeStates'](_0x38dbe7(0xdb)),this[_0x38dbe7(0x12c)](_0x38dbe7(0xb0)),this[_0x38dbe7(0x12c)]('system.mode'),this[_0x38dbe7(0x12c)](_0x38dbe7(0xb5)),this[_0x38dbe7(0x12c)]('analysis.automation.triggerAction'),this[_0x38dbe7(0x12c)](_0x38dbe7(0x123)),this[_0x38dbe7(0x12c)](_0x38dbe7(0x190)),this[_0x38dbe7(0x12c)](_0x38dbe7(0x6d)),this['subscribeStates']('analysis.training.triggerEnergy'),this['subscribeStates'](_0x38dbe7(0x12b)),this[_0x38dbe7(0x12c)](_0x38dbe7(0x167)),this[_0x38dbe7(0x12c)](_0x38dbe7(0xfc)),this['subscribeStates'](_0x38dbe7(0x143));this[_0x38dbe7(0x13a)][_0x38dbe7(0x90)]&&this[_0x38dbe7(0x13a)][_0x38dbe7(0x1a4)]&&(this[_0x38dbe7(0x114)]['info'](_0x38dbe7(0x17f)+this[_0x38dbe7(0x13a)][_0x38dbe7(0x1a4)]),this[_0x38dbe7(0x1a0)](this[_0x38dbe7(0x13a)][_0x38dbe7(0x1a4)]));const _0x4a129e=this[_0x38dbe7(0x13a)][_0x38dbe7(0x1ab)];if(_0x4a129e)for(const _0x16687c of _0x4a129e){await this['subscribeForeignStatesAsync'](_0x16687c['id']);}const _0x3b2653=this[_0x38dbe7(0x13a)][_0x38dbe7(0x159)];if(_0x3b2653)for(const _0x104fe of _0x3b2653){await this['subscribeForeignStatesAsync'](_0x104fe);}if(this['config'][_0x38dbe7(0xfb)]&&this['config'][_0x38dbe7(0xf5)])await this[_0x38dbe7(0x14b)](this['config'][_0x38dbe7(0xf5)]+_0x38dbe7(0x187));setTimeout(()=>this['checkWifiPresence'](),0x1388);if(this[_0x38dbe7(0x86)])clearInterval(this[_0x38dbe7(0x86)]);const _0x556c90=this['config'][_0x38dbe7(0x70)]||0xf;_0x556c90>0x0&&(this[_0x38dbe7(0x86)]=setInterval(()=>{const _0x340f5f=_0x38dbe7;this[_0x340f5f(0x140)](),automation[_0x340f5f(0xdf)](this),automation[_0x340f5f(0xdd)](this);},_0x556c90*0x3c*0x3e8));setTimeout(()=>{const _0x3b8d34=_0x38dbe7;automation[_0x3b8d34(0xdf)](this),automation[_0x3b8d34(0xdd)](this);},0x2710);this[_0x38dbe7(0x13a)]['trackerEnabled']!==![]&&(this[_0x38dbe7(0xe6)]=setInterval(()=>{const _0x27bf83=_0x38dbe7;if(this[_0x27bf83(0x78)]){const _0x410cba=Date[_0x27bf83(0x15a)](),_0x49e01b=this[_0x27bf83(0x128)]||_0x410cba,_0x381b5c=(_0x410cba-_0x49e01b)/0x3e8;_0x381b5c>0x2&&(this[_0x27bf83(0x128)]=_0x410cba,pythonBridge[_0x27bf83(0x137)](this,'TRACK_EVENT',{'room':null,'dt':_0x381b5c}));}},0xbb8));if(this[_0x38dbe7(0x144)])clearInterval(this[_0x38dbe7(0x144)]);this['healthTrendInterval']=setInterval(()=>{const _0x4118f3=_0x38dbe7;this[_0x4118f3(0x78)]&&(this[_0x4118f3(0x114)][_0x4118f3(0xc3)]('â¤ï¸\x20Auto-Heartbeat:\x20Aktualisiere\x20Gesundheits-Trends...'),this['runPythonHealthCheck']());},0x4*0x3c*0x3c*0x3e8),schedulers[_0x38dbe7(0x16a)](this,()=>aiAgent['createDailyDigest'](this,pythonBridge)),schedulers[_0x38dbe7(0xa3)](this),schedulers[_0x38dbe7(0xcd)](this,()=>aiAgent[_0x38dbe7(0x6e)](this)),schedulers['setupBriefingScheduler'](this,()=>aiAgent[_0x38dbe7(0x179)](this)),pythonBridge[_0x38dbe7(0x150)](this,installer['PYTHON_EXE']),setTimeout(async()=>{const _0x36d478=_0x38dbe7;await topology['updateTopology'](this);try{const _0x28984f=await this['getStateAsync']('analysis.topology.structure');if(_0x28984f&&_0x28984f[_0x36d478(0x71)])pythonBridge[_0x36d478(0x137)](this,'SET_TOPOLOGY',JSON[_0x36d478(0xef)](_0x28984f[_0x36d478(0x71)]));}catch(_0x1af93c){}this[_0x36d478(0xf1)](),this[_0x36d478(0x95)](),this['triggerEnergyPrediction'](),this[_0x36d478(0xf2)]();},0x1388);}[a0_0x2b333f(0x13b)](_0x145187){const _0x1cbd51=a0_0x2b333f;if(this[_0x1cbd51(0x86)])clearInterval(this[_0x1cbd51(0x86)]);if(this[_0x1cbd51(0x182)])clearInterval(this['driftAnalysisTimer']);if(this[_0x1cbd51(0xe6)])clearInterval(this[_0x1cbd51(0xe6)]);if(this[_0x1cbd51(0x144)])clearInterval(this[_0x1cbd51(0x144)]);if(this[_0x1cbd51(0xbd)])this[_0x1cbd51(0xbd)][_0x1cbd51(0x77)]();if(this[_0x1cbd51(0x11f)])this[_0x1cbd51(0x11f)][_0x1cbd51(0x77)]();if(this[_0x1cbd51(0xf7)])this[_0x1cbd51(0xf7)][_0x1cbd51(0x77)]();recorder['abortExitTimer'](this),pythonBridge[_0x1cbd51(0xd2)](this),_0x145187();}async['onStateChange'](_0x487aa4,_0x67b9c3){const _0xb24834=a0_0x2b333f;if(!_0x67b9c3||this[_0xb24834(0xbf)])return;if(_0x487aa4[_0xb24834(0xbc)](_0xb24834(0x196))&&_0x487aa4[_0xb24834(0x193)](_0xb24834(0xd6))&&_0x67b9c3[_0xb24834(0x71)])return;if(this[_0xb24834(0x13a)][_0xb24834(0x90)]&&_0x487aa4===this['config']['infrasoundSensorId']){this[_0xb24834(0x155)](_0x67b9c3[_0xb24834(0x71)]);return;}if(_0x487aa4===this[_0xb24834(0x10f)]+_0xb24834(0x197)){if(_0x67b9c3[_0xb24834(0x71)]&&Object[_0xb24834(0x178)](setup[_0xb24834(0xee)])[_0xb24834(0xbc)](_0x67b9c3[_0xb24834(0x71)])){this[_0xb24834(0x87)]=_0x67b9c3[_0xb24834(0x71)];if(_0x67b9c3[_0xb24834(0x71)]===setup['SYSTEM_MODES'][_0xb24834(0x129)])await recorder['setPresence'](this,![]);else await recorder[_0xb24834(0x175)](this,!![]);if(this[_0xb24834(0x78)]){let _0x42d8dd=![],_0x1a6aaa=0x0,_0xfe9481=_0xb24834(0x1a3);if(this[_0xb24834(0x87)]==='party')_0x42d8dd=!![],_0x1a6aaa=0x168,_0xfe9481=_0xb24834(0xfe);else this['currentSystemMode']===_0xb24834(0xb4)&&(_0x42d8dd=!![],_0x1a6aaa=0x5a0,_0xfe9481=_0xb24834(0x151));pythonBridge[_0xb24834(0x137)](this,_0xb24834(0x92),{'active':_0x42d8dd,'duration':_0x1a6aaa,'label':_0xfe9481}),await this[_0xb24834(0x173)](_0xb24834(0x17c),{'val':JSON[_0xb24834(0x1a8)]({'active':_0x42d8dd,'label':_0xfe9481,'timestamp':Date[_0xb24834(0x15a)]()}),'ack':!![]});}}if(!_0x67b9c3[_0xb24834(0xd4)])this[_0xb24834(0x17e)](_0x487aa4,{'val':this[_0xb24834(0x87)],'ack':!![]});return;}_0x487aa4[_0xb24834(0x193)]('analysis.energy.warmupSources')&&_0x67b9c3[_0xb24834(0xd4)]&&this['protectAiMemory'](_0x67b9c3[_0xb24834(0x71)]);if(!_0x67b9c3[_0xb24834(0xd4)]){if(_0x487aa4[_0xb24834(0xbc)]('analysis.trigger')&&_0x67b9c3[_0xb24834(0x71)]){this['setState'](_0x487aa4,{'val':![],'ack':!![]}),aiAgent[_0xb24834(0x8f)](this);return;}if(_0x487aa4['includes'](_0xb24834(0x13f))&&_0x67b9c3[_0xb24834(0x71)]){this['setState'](_0x487aa4,{'val':![],'ack':!![]});if(this[_0xb24834(0x78)])aiAgent[_0xb24834(0xc5)](this,pythonBridge);return;}if(_0x487aa4[_0xb24834(0xbc)](_0xb24834(0x131))&&_0x67b9c3['val']){this[_0xb24834(0x17e)](_0x487aa4,{'val':![],'ack':!![]}),aiAgent[_0xb24834(0x179)](this);return;}if(_0x487aa4[_0xb24834(0xbc)](_0xb24834(0x98))&&_0x67b9c3[_0xb24834(0x71)]){this[_0xb24834(0x17e)](_0x487aa4,{'val':![],'ack':!![]}),aiAgent[_0xb24834(0x18c)](this);return;}if(_0x487aa4['includes'](_0xb24834(0x190))&&_0x67b9c3[_0xb24834(0x71)]){this[_0xb24834(0x17e)](_0x487aa4,{'val':![],'ack':!![]});if(this[_0xb24834(0x78)])try{const _0x31f0e2=await this['getStateAsync']('LTM.trainingData.sequences');if(_0x31f0e2&&_0x31f0e2[_0xb24834(0x71)]){const _0x5d7318=JSON[_0xb24834(0xef)](_0x31f0e2[_0xb24834(0x71)]);this[_0xb24834(0x173)]('analysis.training.status',{'val':_0xb24834(0x191),'ack':!![]}),pythonBridge['send'](this,_0xb24834(0x181),{'sequences':_0x5d7318});}}catch(_0x3af91e){}return;}if(_0x487aa4['includes'](_0xb24834(0x6d))&&_0x67b9c3[_0xb24834(0x71)]){this[_0xb24834(0x17e)](_0x487aa4,{'val':![],'ack':!![]});if(this[_0xb24834(0x78)])try{const _0x53fec3=await this['getStateAsync'](_0xb24834(0x111));if(_0x53fec3&&_0x53fec3[_0xb24834(0x71)])pythonBridge[_0xb24834(0x137)](this,_0xb24834(0x122),{'digests':JSON['parse'](_0x53fec3[_0xb24834(0x71)])});}catch(_0x5c9600){}return;}if(_0x487aa4[_0xb24834(0xbc)]('analysis.training.triggerEnergy')&&_0x67b9c3[_0xb24834(0x71)]){this[_0xb24834(0x17e)](_0x487aa4,{'val':![],'ack':!![]});if(this[_0xb24834(0x78)])try{const _0x293f5c=await this[_0xb24834(0xf9)](_0xb24834(0x174));if(_0x293f5c&&_0x293f5c[_0xb24834(0x71)])pythonBridge[_0xb24834(0x137)](this,'TRAIN_ENERGY',{'points':JSON['parse'](_0x293f5c[_0xb24834(0x71)])});}catch(_0x3c18a6){}return;}if(_0x487aa4[_0xb24834(0xbc)]('analysis.training.triggerComfort')&&_0x67b9c3[_0xb24834(0x71)]){this[_0xb24834(0x17e)](_0x487aa4,{'val':![],'ack':!![]});if(this[_0xb24834(0x78)])try{const _0x2037bc=await this['getStateAsync'](_0xb24834(0x10e));if(_0x2037bc&&_0x2037bc['val'])pythonBridge[_0xb24834(0x137)](this,_0xb24834(0xa4),{'events':JSON['parse'](_0x2037bc['val'])});}catch(_0x2afc3f){}return;}if(_0x487aa4[_0xb24834(0xbc)]('analysis.training.triggerTopology')&&_0x67b9c3[_0xb24834(0x71)]){this[_0xb24834(0x17e)](_0x487aa4,{'val':![],'ack':!![]}),topology[_0xb24834(0xe7)](this);if(this['isProVersion'])try{const _0x2f8d8b=await this['getStateAsync'](_0xb24834(0x12a));if(_0x2f8d8b&&_0x2f8d8b[_0xb24834(0x71)]){const _0x8894f0=JSON[_0xb24834(0xef)](_0x2f8d8b[_0xb24834(0x71)]);this[_0xb24834(0x114)][_0xb24834(0xc3)](_0xb24834(0x125)+_0x8894f0[_0xb24834(0x1a6)]+'\x20sequences...'),pythonBridge[_0xb24834(0x137)](this,_0xb24834(0x1a2),{'sequences':_0x8894f0});}else this[_0xb24834(0x114)][_0xb24834(0xc8)](_0xb24834(0x156));}catch(_0x15666c){this['log']['error'](_0xb24834(0x170)+_0x15666c[_0xb24834(0x10c)]);}return;}}if(this[_0xb24834(0x13a)]['presenceDevices']&&this[_0xb24834(0x13a)][_0xb24834(0x159)]['includes'](_0x487aa4)){await this[_0xb24834(0x16f)]();return;}const _0x28ed53=(this['config'][_0xb24834(0x1ab)]||[])['find'](_0x318d93=>_0x318d93['id']===_0x487aa4);if(_0x28ed53){const _0x1b4af2=await recorder[_0xb24834(0x83)](this,_0x487aa4,_0x67b9c3,_0x28ed53);_0x1b4af2&&_0x1b4af2[_0xb24834(0xb3)]===_0xb24834(0x80)&&_0x1b4af2[_0xb24834(0x138)]&&this['isProVersion']&&deadMan[_0xb24834(0x1a5)](this,_0x1b4af2[_0xb24834(0x138)]),_0x67b9c3[_0xb24834(0x71)]&&(_0x67b9c3[_0xb24834(0x71)]===!![]||_0x67b9c3[_0xb24834(0x71)]===0x1||String(_0x67b9c3[_0xb24834(0x71)])['toLowerCase']()===_0xb24834(0x8c))&&(_0x28ed53['type']&&(_0x28ed53[_0xb24834(0xb3)][_0xb24834(0xbc)]('window')||_0x28ed53[_0xb24834(0xb3)][_0xb24834(0xbc)](_0xb24834(0xca))||_0x28ed53[_0xb24834(0xb3)][_0xb24834(0xbc)](_0xb24834(0x192)))&&this[_0xb24834(0xbe)](_0x28ed53)),(_0x28ed53[_0xb24834(0xb3)]==='temperature'||_0x28ed53[_0xb24834(0xb3)]===_0xb24834(0x13d))&&automation[_0xb24834(0x73)](this);}}async[a0_0x2b333f(0xae)](_0x2e0590){const _0x1e9057=a0_0x2b333f;if(!this['memoryCache']||Date[_0x1e9057(0x15a)]()-this[_0x1e9057(0xb8)]>0x493e0)return;if(!this[_0x1e9057(0x11a)]['sources']||!this[_0x1e9057(0x11a)][_0x1e9057(0x168)])return;try{const _0x7cea29=JSON[_0x1e9057(0xef)](_0x2e0590),_0x32f4a8=this[_0x1e9057(0x11a)]['sources'];let _0xf9fdda=![];for(const _0x3efab8 in _0x32f4a8){if(_0x32f4a8[_0x3efab8][_0x1e9057(0xbc)]('AI')&&_0x7cea29[_0x3efab8]&&!_0x7cea29[_0x3efab8][_0x1e9057(0xbc)]('AI')){_0xf9fdda=!![];break;}}_0xf9fdda&&(this[_0x1e9057(0x114)][_0x1e9057(0xc3)]('ðŸ§ \x20Memory\x20Protection:\x20Restoring\x20persisted\x20AI-Calculations\x20(preventing\x20\x27Cold\x20Start\x27\x20amnesia).'),await this[_0x1e9057(0x173)](_0x1e9057(0x6b),{'val':JSON[_0x1e9057(0x1a8)](this[_0x1e9057(0x11a)][_0x1e9057(0x168)]),'ack':!![]}),await this[_0x1e9057(0x173)](_0x1e9057(0x143),{'val':JSON[_0x1e9057(0x1a8)](this[_0x1e9057(0x11a)][_0x1e9057(0x105)]),'ack':!![]}));}catch(_0x49f1d9){}}async[a0_0x2b333f(0x164)](_0x815b9a){const _0x3bfa00=a0_0x2b333f;if(typeof _0x815b9a===_0x3bfa00(0x186)&&_0x815b9a[_0x3bfa00(0x10c)]){if(_0x815b9a[_0x3bfa00(0x19a)]===_0x3bfa00(0x18b))try{const _0x1ef00c=await automation[_0x3bfa00(0x180)](this);this[_0x3bfa00(0x130)](_0x815b9a['from'],_0x815b9a[_0x3bfa00(0x19a)],{'success':!![],'results':_0x1ef00c},_0x815b9a['callback']);}catch(_0x5bcdc4){this['sendTo'](_0x815b9a['from'],_0x815b9a[_0x3bfa00(0x19a)],{'success':![],'error':_0x5bcdc4[_0x3bfa00(0x10c)]},_0x815b9a['callback']);}else{if(_0x815b9a[_0x3bfa00(0x19a)]===_0x3bfa00(0x6f))try{const {current_temps:_0x4cc254,t_out:_0x72249,targets:_0x48832d,t_forecast:_0x4b26cb}=_0x815b9a['message'],_0xbaba13=[];let _0x3d3568={};try{const _0x4074f2=await this[_0x3bfa00(0xf9)]('analysis.energy.insulationScore');if(_0x4074f2&&_0x4074f2[_0x3bfa00(0x71)]){const _0x596ac2=JSON['parse'](_0x4074f2['val']);_0x3d3568=_0x596ac2[_0x3bfa00(0x139)]||_0x596ac2;}}catch(_0x5d6d71){}const _0x1a8d33=_0x4b26cb!==undefined&&_0x4b26cb!==null?(_0x72249+_0x4b26cb)/0x2:_0x72249;for(const [_0x2f3577,_0x466f08]of Object[_0x3bfa00(0xe0)](_0x4cc254)){const _0x324583=_0x48832d[_0x2f3577]||0x15;if(_0x466f08<=_0x324583)continue;let _0x37fe42=_0x3d3568[_0x2f3577]||-0.5;if(_0x37fe42>=0x0)_0x37fe42=-0.5;const _0x2979db=Math[_0x3bfa00(0xf8)](_0x37fe42),_0x9e7839=_0x466f08-_0x324583;let _0x52fe41=Math[_0x3bfa00(0xf6)](_0x9e7839/_0x2979db*0x3c);const _0x5cb832=_0x466f08-_0x72249,_0x767bb8=_0x466f08-_0x1a8d33;if(_0x767bb8!==0x0&&_0x5cb832!==0x0){const _0x9e6e29=_0x5cb832/_0x767bb8;_0x52fe41=Math[_0x3bfa00(0xf6)](_0x52fe41*_0x9e6e29);}if(_0x52fe41>0xf){if(_0x52fe41>0xf0)_0x52fe41=0xf0;_0xbaba13[_0x3bfa00(0x89)]({'room':_0x2f3577,'minutes_safe':_0x52fe41,'target':_0x324583,'current':_0x466f08,'savings_msg':'Heizung\x20kann\x20'+_0x52fe41+'\x20min\x20ausbleiben.'});}}_0xbaba13['sort']((_0x364b5d,_0x9dd6f9)=>_0x9dd6f9['minutes_safe']-_0x364b5d[_0x3bfa00(0x199)]),this[_0x3bfa00(0x130)](_0x815b9a[_0x3bfa00(0x119)],_0x815b9a[_0x3bfa00(0x19a)],{'success':!![],'proposals':_0xbaba13},_0x815b9a['callback']);}catch(_0x52cb24){this[_0x3bfa00(0x130)](_0x815b9a['from'],_0x815b9a[_0x3bfa00(0x19a)],{'success':![],'error':_0x52cb24[_0x3bfa00(0x10c)]},_0x815b9a[_0x3bfa00(0x18e)]);}else{if(_0x815b9a['command']==='resetRLPenalty')try{const _0x140b35=_0x815b9a['message']['key'],_0x24ec51=_0x3bfa00(0x183),_0x493d61=await this[_0x3bfa00(0xf9)](_0x24ec51);let _0x2ea238={};if(_0x493d61&&_0x493d61['val'])try{_0x2ea238=JSON[_0x3bfa00(0xef)](_0x493d61[_0x3bfa00(0x71)]);}catch(_0x130076){}_0x140b35&&_0x2ea238[_0x140b35]?(delete _0x2ea238[_0x140b35],await this[_0x3bfa00(0x173)](_0x24ec51,{'val':JSON[_0x3bfa00(0x1a8)](_0x2ea238),'ack':!![]}),this[_0x3bfa00(0x114)][_0x3bfa00(0xc3)](_0x3bfa00(0x15f)+_0x140b35+_0x3bfa00(0xa1)),this['sendTo'](_0x815b9a[_0x3bfa00(0x119)],_0x815b9a[_0x3bfa00(0x19a)],{'success':!![]},_0x815b9a[_0x3bfa00(0x18e)])):this[_0x3bfa00(0x130)](_0x815b9a[_0x3bfa00(0x119)],_0x815b9a['command'],{'success':![],'error':_0x3bfa00(0x103)},_0x815b9a[_0x3bfa00(0x18e)]);}catch(_0x224276){this[_0x3bfa00(0x130)](_0x815b9a[_0x3bfa00(0x119)],_0x815b9a[_0x3bfa00(0x19a)],{'success':![],'error':_0x224276[_0x3bfa00(0x10c)]},_0x815b9a[_0x3bfa00(0x18e)]);}else{if(_0x815b9a['command']===_0x3bfa00(0x1ad))await this['setStateAsync'](_0x3bfa00(0x13c),{'val':![],'ack':!![]}),await this[_0x3bfa00(0x173)](_0x3bfa00(0x7c),{'val':'','ack':!![]}),await this[_0x3bfa00(0x173)]('analysis.automation.targetId',{'val':'','ack':!![]}),this[_0x3bfa00(0x130)](_0x815b9a['from'],_0x815b9a[_0x3bfa00(0x19a)],{'success':!![]},_0x815b9a[_0x3bfa00(0x18e)]);else{if(_0x815b9a[_0x3bfa00(0x19a)]===_0x3bfa00(0x7d)){const {targetId:_0x44c8cc,targetValue:_0x229cf7}=_0x815b9a[_0x3bfa00(0x10c)];await this[_0x3bfa00(0x173)](_0x3bfa00(0x13c),{'val':!![],'ack':!![]}),await this[_0x3bfa00(0x173)]('analysis.automation.description',{'val':'Simulation\x20durch\x20Admin\x20(Test)','ack':!![]}),await this[_0x3bfa00(0x173)](_0x3bfa00(0x13e),{'val':_0x44c8cc,'ack':!![]}),await this[_0x3bfa00(0x173)](_0x3bfa00(0x132),{'val':String(_0x229cf7),'ack':!![]}),this[_0x3bfa00(0x130)](_0x815b9a[_0x3bfa00(0x119)],_0x815b9a[_0x3bfa00(0x19a)],{'success':!![]},_0x815b9a[_0x3bfa00(0x18e)]);}else{if(_0x815b9a[_0x3bfa00(0x19a)]==='testApiKey')try{const _0x226f04=_0x815b9a[_0x3bfa00(0x10c)]['apiKey'];if(!_0x226f04)throw new Error(_0x3bfa00(0x18d));const _0xaa14bf=new GoogleGenerativeAI(_0x226f04),_0x1b5873=_0xaa14bf[_0x3bfa00(0x17a)]({'model':GEMINI_MODEL}),_0x5175da=await _0x1b5873['generateContent'](_0x3bfa00(0x15e)),_0x4e4fdd=await _0x5175da[_0x3bfa00(0x15b)];if(_0x4e4fdd['text']())this[_0x3bfa00(0x130)](_0x815b9a['from'],_0x815b9a[_0x3bfa00(0x19a)],{'success':!![],'message':'Verbindung\x20erfolgreich!'},_0x815b9a[_0x3bfa00(0x18e)]);else throw new Error(_0x3bfa00(0x8e));}catch(_0xce9b56){this[_0x3bfa00(0x130)](_0x815b9a[_0x3bfa00(0x119)],_0x815b9a[_0x3bfa00(0x19a)],{'success':![],'message':_0xce9b56[_0x3bfa00(0x10c)]},_0x815b9a[_0x3bfa00(0x18e)]);}else{if(_0x815b9a['command']===_0x3bfa00(0x12d))try{const _0x152900=await scanner[_0x3bfa00(0x14a)](this,_0x815b9a[_0x3bfa00(0x10c)]||{});this[_0x3bfa00(0x130)](_0x815b9a[_0x3bfa00(0x119)],_0x815b9a[_0x3bfa00(0x19a)],{'success':!![],'devices':_0x152900},_0x815b9a[_0x3bfa00(0x18e)]);}catch(_0x2f1abd){this[_0x3bfa00(0x130)](_0x815b9a[_0x3bfa00(0x119)],_0x815b9a[_0x3bfa00(0x19a)],{'success':![],'error':_0x2f1abd[_0x3bfa00(0x10c)]},_0x815b9a['callback']);}else{if(_0x815b9a[_0x3bfa00(0x19a)]===_0x3bfa00(0x6c))try{const {matrix:_0x55536b}=_0x815b9a[_0x3bfa00(0x10c)],_0x1155f8=await this[_0x3bfa00(0xf9)](_0x3bfa00(0x107));if(_0x1155f8&&_0x1155f8['val']){const _0x3d71b0=JSON['parse'](_0x1155f8[_0x3bfa00(0x71)]);_0x3d71b0['matrix']=_0x55536b,_0x3d71b0[_0x3bfa00(0x19e)]=Date[_0x3bfa00(0x15a)](),await this[_0x3bfa00(0x173)]('analysis.topology.structure',{'val':JSON[_0x3bfa00(0x1a8)](_0x3d71b0),'ack':!![]}),pythonBridge['send'](this,_0x3bfa00(0x68),_0x3d71b0);}this['sendTo'](_0x815b9a[_0x3bfa00(0x119)],_0x815b9a[_0x3bfa00(0x19a)],{'success':!![]},_0x815b9a[_0x3bfa00(0x18e)]);}catch(_0x21d247){this[_0x3bfa00(0x114)][_0x3bfa00(0xa0)](_0x21d247);}else{if(_0x815b9a['command']===_0x3bfa00(0xd1))this[_0x3bfa00(0x130)](_0x815b9a[_0x3bfa00(0x119)],_0x815b9a[_0x3bfa00(0x19a)],{'success':!![],'dailyDigests':this['dailyDigests']||[],'analysisHistory':this['analysisHistory']||[]},_0x815b9a[_0x3bfa00(0x18e)]);else{if(_0x815b9a['command']===_0x3bfa00(0x15c)){const _0x341c3a=this[_0x3bfa00(0x7e)]['length'],_0x531bf2=new Array(0x18)[_0x3bfa00(0x147)](0x0),_0x1e0dd8=new Date()[_0x3bfa00(0x18f)](0x0,0x0,0x0,0x0);this[_0x3bfa00(0x7b)]&&this[_0x3bfa00(0x7b)][_0x3bfa00(0x96)](_0x3361bf=>{const _0x1a1648=_0x3bfa00;if(_0x3361bf[_0x1a1648(0xab)]>=_0x1e0dd8){const _0x3d1803=new Date(_0x3361bf[_0x1a1648(0xab)])['getHours']();if(_0x3d1803>=0x0&&_0x3d1803<0x18)_0x531bf2[_0x3d1803]++;}});let _0x4f59b1=![],_0x5574cb='',_0x1f16c7='',_0x1dd756='';try{const _0x495b42=await this[_0x3bfa00(0xf9)](_0x3bfa00(0x13c));if(_0x495b42&&_0x495b42[_0x3bfa00(0x71)]){_0x4f59b1=!![];const _0x5452c4=await this['getStateAsync'](_0x3bfa00(0x7c));_0x5574cb=_0x5452c4?_0x5452c4['val']:'';const _0x11dc42=await this['getStateAsync'](_0x3bfa00(0x13e));_0x1f16c7=_0x11dc42?_0x11dc42['val']:'';const _0xf3a371=await this[_0x3bfa00(0xf9)](_0x3bfa00(0x132));_0x1dd756=_0xf3a371?_0xf3a371[_0x3bfa00(0x71)]:'';}}catch(_0x4cfcb8){}const _0x275ae8=await this[_0x3bfa00(0xfa)](),_0x318318=(this['config'][_0x3bfa00(0x1ab)]||[])[_0x3bfa00(0xb7)](_0x2ba3a7=>_0x2ba3a7[_0x3bfa00(0x113)]),_0x31fdba=_0x275ae8&&_0x318318;let _0x4f475e='';try{const _0x5e6122=await this['getStateAsync'](_0x3bfa00(0x101));if(_0x5e6122&&_0x5e6122[_0x3bfa00(0x71)])_0x4f475e=_0x5e6122['val'];}catch(_0x4ae4de){}this[_0x3bfa00(0x130)](_0x815b9a['from'],_0x815b9a['command'],{'success':!![],'eventHistory':this[_0x3bfa00(0x7b)][_0x3bfa00(0x1ac)](0x0,0xf),'stats':{'digestCount':_0x341c3a,'isPresent':this[_0x3bfa00(0x76)],'hourlyActivity':_0x531bf2,'solarActive':_0x31fdba,'presenceWho':_0x4f475e},'automation':{'detected':_0x4f59b1,'description':_0x5574cb,'targetId':_0x1f16c7,'targetValue':_0x1dd756}},_0x815b9a['callback']);}else{if(_0x815b9a[_0x3bfa00(0x19a)]===_0x3bfa00(0xe4)){const _0x921404=await this[_0x3bfa00(0x99)](_0x3bfa00(0x14c),_0x3bfa00(0x102)),_0x4954f9=[];if(_0x921404)for(const _0x4876ad in _0x921404){const _0x183d1a=_0x921404[_0x4876ad],_0x5fe502=(_0x183d1a[_0x3bfa00(0xc2)]&&typeof _0x183d1a[_0x3bfa00(0xc2)]['name']===_0x3bfa00(0x186)?_0x183d1a[_0x3bfa00(0xc2)]['name']['de']:_0x183d1a[_0x3bfa00(0xc2)][_0x3bfa00(0x75)])||_0x183d1a[_0x3bfa00(0xc2)][_0x3bfa00(0x75)];_0x4954f9[_0x3bfa00(0x89)]({'id':_0x4876ad,'name':_0x5fe502});}const _0x5c5920=await this[_0x3bfa00(0x99)]('enum.rooms.*',_0x3bfa00(0x102)),_0x43d101=[];if(_0x5c5920)for(const _0x2966e3 in _0x5c5920){const _0x5120ea=_0x5c5920[_0x2966e3],_0x3cee38=(_0x5120ea[_0x3bfa00(0xc2)]&&typeof _0x5120ea['common']['name']===_0x3bfa00(0x186)?_0x5120ea[_0x3bfa00(0xc2)][_0x3bfa00(0x75)]['de']:_0x5120ea[_0x3bfa00(0xc2)][_0x3bfa00(0x75)])||_0x2966e3[_0x3bfa00(0x97)]('.')['pop']();_0x43d101[_0x3bfa00(0x89)](_0x3cee38);}this[_0x3bfa00(0x130)](_0x815b9a['from'],_0x815b9a['command'],{'success':!![],'enums':_0x4954f9,'rooms':_0x43d101},_0x815b9a['callback']);}else{if(_0x815b9a[_0x3bfa00(0x19a)]==='testContext')try{let _0x3d5a6f=_0x3bfa00(0x19c),_0x5dcb49='Kein\x20Kalender-Adapter';if(this['config'][_0x3bfa00(0xff)]){const _0x2812a6=await recorder[_0x3bfa00(0x72)](this);_0x3d5a6f=_0x2812a6!==null?_0x2812a6+'Â°C':_0x3bfa00(0x115);}if(this[_0x3bfa00(0x13a)]['calendarInstance']){const _0x344093=await this[_0x3bfa00(0xc7)](_0x3bfa00(0xaf)+this[_0x3bfa00(0x13a)][_0x3bfa00(0x88)]);_0x5dcb49=_0x344093?_0x3bfa00(0x19d):'Instanz\x20nicht\x20gefunden';}this[_0x3bfa00(0x130)](_0x815b9a[_0x3bfa00(0x119)],_0x815b9a[_0x3bfa00(0x19a)],{'success':!![],'weather':_0x3d5a6f,'calendar':_0x5dcb49},_0x815b9a[_0x3bfa00(0x18e)]);}catch(_0x2ed713){this[_0x3bfa00(0x130)](_0x815b9a[_0x3bfa00(0x119)],_0x815b9a[_0x3bfa00(0x19a)],{'success':![],'error':_0x2ed713[_0x3bfa00(0x10c)]},_0x815b9a[_0x3bfa00(0x18e)]);}else{if(_0x815b9a[_0x3bfa00(0x19a)]==='getCalendarNames')try{const _0x39635a=_0x815b9a[_0x3bfa00(0x10c)][_0x3bfa00(0x154)],_0x567a29=await this[_0x3bfa00(0x10b)](_0x39635a+'.data.table');let _0x1067ca=[];if(_0x567a29&&_0x567a29[_0x3bfa00(0x71)]){const _0x22fdf9=JSON[_0x3bfa00(0xef)](_0x567a29[_0x3bfa00(0x71)]),_0x1775dd=new Set();Array['isArray'](_0x22fdf9)&&_0x22fdf9['forEach'](_0x4f63c8=>{const _0x26f09b=_0x3bfa00;if(_0x4f63c8['_calName'])_0x1775dd['add'](_0x4f63c8[_0x26f09b(0xbb)]);else{if(_0x4f63c8[_0x26f09b(0x127)])_0x1775dd['add'](_0x4f63c8[_0x26f09b(0x127)]);}}),_0x1067ca=Array[_0x3bfa00(0x119)](_0x1775dd)[_0x3bfa00(0x133)]();}if(_0x1067ca[_0x3bfa00(0x1a6)]===0x0)_0x1067ca=[_0x3bfa00(0xd0)];this[_0x3bfa00(0x130)](_0x815b9a['from'],_0x815b9a['command'],{'success':!![],'names':_0x1067ca},_0x815b9a[_0x3bfa00(0x18e)]);}catch(_0x5d4ceb){this[_0x3bfa00(0x130)](_0x815b9a[_0x3bfa00(0x119)],_0x815b9a[_0x3bfa00(0x19a)],{'success':![],'error':_0x5d4ceb['message']},_0x815b9a[_0x3bfa00(0x18e)]);}else{if(_0x815b9a[_0x3bfa00(0x19a)]===_0x3bfa00(0xcc))try{await setup[_0x3bfa00(0x6a)](this,_0x3bfa00(0x126),![],![]),this[_0x3bfa00(0x130)](_0x815b9a[_0x3bfa00(0x119)],_0x815b9a[_0x3bfa00(0x19a)],{'success':!![],'message':'Gesendet'},_0x815b9a[_0x3bfa00(0x18e)]);}catch(_0x4b859d){this[_0x3bfa00(0x114)]['error'](_0x3bfa00(0x116)+_0x4b859d[_0x3bfa00(0x10c)]),this[_0x3bfa00(0x130)](_0x815b9a[_0x3bfa00(0x119)],_0x815b9a['command'],{'success':![],'message':_0x3bfa00(0x8a)+_0x4b859d[_0x3bfa00(0x10c)]},_0x815b9a[_0x3bfa00(0x18e)]);}}}}}}}}}}}}}}}}async['loadSystemMode'](){const _0x36b9a7=a0_0x2b333f;try{const _0xd9878e=await this[_0x36b9a7(0xf9)](setup[_0x36b9a7(0x1a9)]);_0xd9878e&&_0xd9878e[_0x36b9a7(0x71)]&&Object['values'](setup['SYSTEM_MODES'])['includes'](_0xd9878e[_0x36b9a7(0x71)])?this[_0x36b9a7(0x87)]=_0xd9878e['val']:(this['currentSystemMode']=setup[_0x36b9a7(0xee)][_0x36b9a7(0x146)],await this['setStateAsync'](setup[_0x36b9a7(0x1a9)],{'val':setup[_0x36b9a7(0xee)][_0x36b9a7(0x146)],'ack':!![]}));}catch(_0x28a532){this[_0x36b9a7(0x87)]=setup[_0x36b9a7(0xee)][_0x36b9a7(0x146)];}}async['checkWifiPresence'](){const _0x3ca61d=a0_0x2b333f;try{const _0x1cbc87=this[_0x3ca61d(0x13a)][_0x3ca61d(0x159)]||[];let _0x4920af=![];const _0x36890c=[];for(const _0x3f5b17 of _0x1cbc87){try{const _0x460fea=await this[_0x3ca61d(0x10b)](_0x3f5b17);_0x460fea&&(_0x460fea[_0x3ca61d(0x71)]===!![]||_0x460fea['val']===_0x3ca61d(0x149)||_0x460fea['val']===0x1)&&(_0x4920af=!![],_0x36890c[_0x3ca61d(0x89)](_0x3f5b17));}catch(_0xc869a){}}return await this[_0x3ca61d(0x173)](_0x3ca61d(0x101),{'val':_0x36890c['join'](',\x20'),'ack':!![]}),_0x4920af&&(this['exitTimer']&&(this[_0x3ca61d(0x114)][_0x3ca61d(0xc3)](_0x3ca61d(0x108)),recorder['abortExitTimer'](this)),!this[_0x3ca61d(0x76)]&&this['currentSystemMode']===setup[_0x3ca61d(0xee)][_0x3ca61d(0x146)]&&await recorder[_0x3ca61d(0x175)](this,!![])),_0x4920af;}catch(_0x175e71){return![];}}async[a0_0x2b333f(0x140)](){const _0xe135a1=a0_0x2b333f;this[_0xe135a1(0x114)]['debug'](_0xe135a1(0xa2)),await aiAgent[_0xe135a1(0x8f)](this),this[_0xe135a1(0xf2)](),this[_0xe135a1(0x95)](),this['triggerEnergyPrediction']();}async[a0_0x2b333f(0xfa)](){const _0x54e6b7=a0_0x2b333f,_0x31e2a8=['weatherunderground.0','accuweather.0',_0x54e6b7(0x16d)],_0x51093d=[_0x54e6b7(0x169),'Current.WeatherText',_0x54e6b7(0x136)];for(const _0x380062 of _0x31e2a8){for(const _0x55bfba of _0x51093d){try{const _0xa8962a=_0x380062+'.'+_0x55bfba,_0x281576=await this['getForeignStateAsync'](_0xa8962a);if(_0x281576&&_0x281576[_0x54e6b7(0x71)]){const _0x11d0ae=String(_0x281576['val'])[_0x54e6b7(0x185)]();if(_0x11d0ae['includes'](_0x54e6b7(0x65))||_0x11d0ae[_0x54e6b7(0xbc)](_0x54e6b7(0x81))||_0x11d0ae[_0x54e6b7(0xbc)]('klar')||_0x11d0ae['includes'](_0x54e6b7(0x11d))||_0x11d0ae[_0x54e6b7(0xbc)](_0x54e6b7(0x7f)))return!![];}}catch(_0x28463a){}}}return![];}[a0_0x2b333f(0x95)](){const _0x34c034=a0_0x2b333f;if(!this['isProVersion'])return;try{this[_0x34c034(0xf3)]('LTM.trainingData.sequences',(_0x2c3b60,_0x3e5b16)=>{const _0x18cc56=_0x34c034;_0x3e5b16&&_0x3e5b16[_0x18cc56(0x71)]&&pythonBridge[_0x18cc56(0x137)](this,_0x18cc56(0xf0),{'sequences':JSON[_0x18cc56(0xef)](_0x3e5b16[_0x18cc56(0x71)])});});}catch(_0x2236eb){}}async[a0_0x2b333f(0x19f)](){const _0x4add4f=a0_0x2b333f;if(!this[_0x4add4f(0x78)])return;try{const _0x4c9dd4=await recorder[_0x4add4f(0x72)](this);if(_0x4c9dd4===null)return;const _0x181cdc={},_0x11cfd7={},_0x273aa4=this[_0x4add4f(0x13a)][_0x4add4f(0x1ab)]||[];for(const _0x526c37 of _0x273aa4){if(_0x526c37[_0x4add4f(0xb3)]===_0x4add4f(0xb2)&&_0x526c37['location']){const _0x590cdf=this['sensorLastValues'][_0x526c37['id']];if(_0x590cdf!==undefined)_0x181cdc[_0x526c37[_0x4add4f(0x138)]]=_0x590cdf;if(_0x526c37[_0x4add4f(0x113)])_0x11cfd7[_0x526c37[_0x4add4f(0x138)]]=!![];}}const _0x2025fb=await this['checkSolarCondition']();let _0x21f32c={};try{const _0x1c175e=await this[_0x4add4f(0xf9)](_0x4add4f(0x145));if(_0x1c175e&&_0x1c175e[_0x4add4f(0x71)])_0x21f32c=JSON[_0x4add4f(0xef)](_0x1c175e[_0x4add4f(0x71)]);}catch(_0x438f4a){}Object[_0x4add4f(0x10d)](_0x181cdc)[_0x4add4f(0x1a6)]>0x0&&(pythonBridge[_0x4add4f(0x137)](this,_0x4add4f(0x142),{'current_temps':_0x181cdc,'t_out':_0x4c9dd4,'is_sunny':_0x2025fb,'solar_flags':_0x11cfd7,'warmup_targets':_0x21f32c}),pythonBridge[_0x4add4f(0x137)](this,_0x4add4f(0xa8),{'current_temps':_0x181cdc,'t_out':_0x4c9dd4,'targets':{}}));}catch(_0x441a84){}}[a0_0x2b333f(0xf2)](){const _0x475eea=a0_0x2b333f;if(!this['rawEventLog']||this[_0x475eea(0x14d)]['length']===0x0)return;const _0x2d9737=new Array(0x60)[_0x475eea(0x147)](0x0),_0x7e0d6f=new Date()[_0x475eea(0x18f)](0x0,0x0,0x0,0x0);this['rawEventLog'][_0x475eea(0x96)](_0x2dcdf6=>{const _0x59cbe5=_0x475eea,_0x4368e7=new Date(_0x2dcdf6[_0x59cbe5(0xab)]);if(_0x4368e7[_0x59cbe5(0xdc)]()>=_0x7e0d6f){const _0x202a2e=_0x4368e7['getHours'](),_0x508ee6=_0x4368e7[_0x59cbe5(0x120)](),_0x2adc9d=_0x202a2e*0x4+Math[_0x59cbe5(0xf6)](_0x508ee6/0xf);if(_0x2adc9d>=0x0&&_0x2adc9d<0x60)_0x2d9737[_0x2adc9d]++;}}),this[_0x475eea(0x173)](_0x475eea(0xba),{'val':JSON[_0x475eea(0x1a8)](_0x2d9737),'ack':!![]});}[a0_0x2b333f(0xf1)](){const _0xa375a8=a0_0x2b333f;if(!this[_0xa375a8(0x7e)]||this['dailyDigests'][_0xa375a8(0x1a6)]<0x2)return;const _0x2ba05d=this[_0xa375a8(0x7e)]['map'](_0x682ad7=>{const _0x2216e1=_0xa375a8,_0x49532d=(_0x682ad7[_0x2216e1(0x94)]||'')[_0x2216e1(0x185)]();return ACTIVITY_LEVEL_MAP[_0x49532d]||0x32;});pythonBridge['send'](this,_0xa375a8(0xcf),{'values':_0x2ba05d,'tag':_0xa375a8(0xc9)});}async[a0_0x2b333f(0x155)](_0x450fb8){const _0x24ccf3=a0_0x2b333f;if(_0x450fb8==null||typeof _0x450fb8!==_0x24ccf3(0xde))return;const _0x3da915=Date[_0x24ccf3(0x15a)]();this[_0x24ccf3(0x165)][_0x24ccf3(0x89)]({'ts':_0x3da915,'val':_0x450fb8}),this[_0x24ccf3(0x165)]=this[_0x24ccf3(0x165)][_0x24ccf3(0x12e)](_0x527b43=>_0x3da915-_0x527b43['ts']<0x1388);if(this[_0x24ccf3(0xcb)])return;if(this[_0x24ccf3(0x13a)]['infrasoundArmingId']){const _0x5a3c50=await this['getForeignStateAsync'](this[_0x24ccf3(0x13a)][_0x24ccf3(0xeb)]);if(_0x5a3c50&&!_0x5a3c50[_0x24ccf3(0x71)])return;}const _0x5ac394=this[_0x24ccf3(0x13a)][_0x24ccf3(0xda)]||0.04;if(Math[_0x24ccf3(0xf8)](_0x450fb8)>=_0x5ac394){this['log'][_0x24ccf3(0xc8)]('[Infrasound]\x20ðŸš¨\x20ALARM\x20TRIGGERED!\x20Pressure\x20Wave:\x20'+_0x450fb8+_0x24ccf3(0xac)+_0x5ac394+')'),await this[_0x24ccf3(0x173)](_0x24ccf3(0xf4),{'val':!![],'ack':!![]});const _0x360fcd=this[_0x24ccf3(0x76)];_0x360fcd?(this[_0x24ccf3(0x114)][_0x24ccf3(0xc3)](_0x24ccf3(0xe2)),this['triggerInfrasoundCorrelation'](_0x450fb8,_0x24ccf3(0xe5))):(this[_0x24ccf3(0x9f)](_0x450fb8,_0x24ccf3(0xc1)),this[_0x24ccf3(0x6a)]('ðŸš¨\x20DRUCKWELLEN-ALARM!\x20StÃ¤rke:\x20'+_0x450fb8+_0x24ccf3(0x17d))),this[_0x24ccf3(0xcb)]=!![],setTimeout(()=>{this['infrasoundLocked']=![];},0x2710);}}async['triggerInfrasoundCorrelation'](_0x25be58,_0x2f4751='ALARM'){const _0x2ad154=a0_0x2b333f,_0x431e0c=Date['now'](),_0x296174=this[_0x2ad154(0x13a)][_0x2ad154(0x1ab)]||[];setTimeout(async()=>{const _0x3b57f0=_0x2ad154;let _0x5bc54e=null,_0x27c5e4=_0x3b57f0(0x9e);const _0xaa65b1=[],_0x27166a=_0x296174['filter'](_0x561e89=>_0x561e89[_0x3b57f0(0xb3)]&&(_0x561e89[_0x3b57f0(0xb3)][_0x3b57f0(0xbc)]('window')||_0x561e89['type'][_0x3b57f0(0xbc)]('door')||_0x561e89['type'][_0x3b57f0(0xbc)](_0x3b57f0(0x192))||_0x561e89[_0x3b57f0(0xb3)][_0x3b57f0(0xbc)]('reed'))||_0x561e89['role']&&(_0x561e89[_0x3b57f0(0xed)][_0x3b57f0(0xbc)](_0x3b57f0(0xc4))||_0x561e89[_0x3b57f0(0xed)]['includes'](_0x3b57f0(0xea))));for(const _0x301db7 of _0x27166a){try{const _0x4f4662=await this[_0x3b57f0(0x10b)](_0x301db7['id']);if(_0x4f4662){if(_0x4f4662['ts']>=_0x431e0c-0x7d0){_0x5bc54e=_0x301db7['name']||_0x301db7['id'],_0x27c5e4=_0x3b57f0(0x118)+_0x5bc54e;break;}}}catch(_0x3a7926){}}const _0x14d6e4={'timestamp':_0x431e0c,'pressure':_0x25be58,'isMatch':!!_0x5bc54e,'explanation':_0x27c5e4,'type':_0x2f4751};await this[_0x3b57f0(0x67)](_0x14d6e4),this[_0x3b57f0(0x114)]['info'](_0x3b57f0(0x79)+(!!_0x5bc54e?_0x3b57f0(0x64):_0x3b57f0(0x198)));},0x1388);}async['analyzeWindowOpening'](_0x4a71c7){const _0x166217=a0_0x2b333f,_0x9b789d=Date[_0x166217(0x15a)](),_0x57d0c5=_0x4a71c7[_0x166217(0x75)]||_0x4a71c7['id'][_0x166217(0x97)]('.')[_0x166217(0xe8)]();let _0x12f0cc=0x0;setTimeout(async()=>{const _0x289d93=_0x166217;this[_0x289d93(0x165)][_0x289d93(0x96)](_0x419e51=>{const _0x2858a4=_0x289d93;_0x419e51['ts']>=_0x9b789d-0xfa0&&_0x419e51['ts']<=_0x9b789d+0x3e8&&(Math[_0x2858a4(0xf8)](_0x419e51['val'])>Math[_0x2858a4(0xf8)](_0x12f0cc)&&(_0x12f0cc=_0x419e51[_0x2858a4(0x71)]));});const _0x3ce0aa=this[_0x289d93(0x13a)]['infrasoundThreshold']||0.04,_0x43a166=Math[_0x289d93(0xf8)](_0x12f0cc)>=_0x3ce0aa,_0x180f67={'timestamp':_0x9b789d,'pressure':_0x12f0cc,'isMatch':_0x43a166,'explanation':'Fenster\x20geÃ¶ffnet:\x20'+_0x57d0c5,'type':'CALIB'};await this[_0x289d93(0x67)](_0x180f67),this[_0x289d93(0x114)][_0x289d93(0xc0)](_0x289d93(0x194)+_0x57d0c5+_0x289d93(0x141)+_0x12f0cc[_0x289d93(0x9b)](0x4)+_0x289d93(0x93)+_0x3ce0aa+')');},0x1f4);}async[a0_0x2b333f(0x67)](_0x13213a){const _0x46fa3f=a0_0x2b333f;try{const _0x3b187d=await this[_0x46fa3f(0xf9)](_0x46fa3f(0x16c));let _0x228463=[];if(_0x3b187d&&_0x3b187d['val'])_0x228463=JSON['parse'](_0x3b187d[_0x46fa3f(0x71)]);_0x228463['unshift'](_0x13213a);if(_0x228463[_0x46fa3f(0x1a6)]>0x14)_0x228463=_0x228463[_0x46fa3f(0x1ac)](0x0,0x14);await this[_0x46fa3f(0x173)](_0x46fa3f(0x16c),{'val':JSON[_0x46fa3f(0x1a8)](_0x228463),'ack':!![]});}catch(_0x5dbbe3){this[_0x46fa3f(0x114)][_0x46fa3f(0xa0)]('[Forensics]\x20Save\x20failed:\x20'+_0x5dbbe3[_0x46fa3f(0x10c)]);}}[a0_0x2b333f(0x6a)](_0x314c11){const _0x423911=a0_0x2b333f;this[_0x423911(0x13a)][_0x423911(0x112)]&&this[_0x423911(0x13a)][_0x423911(0x188)]&&this[_0x423911(0x130)](this[_0x423911(0x13a)]['notifyPushoverInstance'],'send',{'message':_0x314c11,'title':_0x423911(0xd5),'priority':0x1}),this['config']['notifyTelegramEnabled']&&this[_0x423911(0x13a)][_0x423911(0xf5)]&&this[_0x423911(0x130)](this['config'][_0x423911(0xf5)],_0x423911(0x137),{'text':_0x314c11});}}if(require[a0_0x2b333f(0x18a)]!==module)module['exports']=_0x304881=>new CogniLiving(_0x304881);else new CogniLiving();