const a0_0x1704cc=a0_0x3ccf;(function(_0x294df6,_0x1cb8da){const _0x21f3dd=a0_0x3ccf,_0x2e5464=_0x294df6();while(!![]){try{const _0x260ca1=-parseInt(_0x21f3dd(0x275))/0x1*(parseInt(_0x21f3dd(0x25d))/0x2)+parseInt(_0x21f3dd(0x1f5))/0x3+-parseInt(_0x21f3dd(0x223))/0x4+-parseInt(_0x21f3dd(0x110))/0x5+parseInt(_0x21f3dd(0x10f))/0x6*(parseInt(_0x21f3dd(0x256))/0x7)+parseInt(_0x21f3dd(0x1f2))/0x8*(-parseInt(_0x21f3dd(0x233))/0x9)+parseInt(_0x21f3dd(0x2a1))/0xa;if(_0x260ca1===_0x1cb8da)break;else _0x2e5464['push'](_0x2e5464['shift']());}catch(_0x130e85){_0x2e5464['push'](_0x2e5464['shift']());}}}(a0_0x2702,0xad916));const a0_0x1893e2=(function(){let _0xcc1b28=!![];return function(_0x58e8b3,_0x4a8d0e){const _0x3c27e7=_0xcc1b28?function(){const _0x2a01b5=a0_0x3ccf;if(_0x4a8d0e){const _0x5b0681=_0x4a8d0e[_0x2a01b5(0x297)](_0x58e8b3,arguments);return _0x4a8d0e=null,_0x5b0681;}}:function(){};return _0xcc1b28=![],_0x3c27e7;};}()),a0_0x5d38a0=a0_0x1893e2(this,function(){const _0x3c4861=a0_0x3ccf;return a0_0x5d38a0[_0x3c4861(0x1a0)]()[_0x3c4861(0x272)](_0x3c4861(0x147))[_0x3c4861(0x1a0)]()[_0x3c4861(0x1fe)](a0_0x5d38a0)[_0x3c4861(0x272)](_0x3c4861(0x147));});a0_0x5d38a0();'use strict';const utils=require(a0_0x1704cc(0x175)),{GoogleGenerativeAI}=require(a0_0x1704cc(0x261)),{spawn}=require(a0_0x1704cc(0x1eb)),path=require(a0_0x1704cc(0x168)),fs=require('fs'),installer=require('./lib/installer'),scanner=require(a0_0x1704cc(0x1d2)),schedulers=require('./lib/scheduler'),topology=require(a0_0x1704cc(0x270)),HISTORY_MAX_SIZE=0x32,RAW_LOG_MAX_SIZE=0x9c4,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL=a0_0x1704cc(0x291),SEQUENCE_TIMEOUT_MS=0x5*0x3c*0x3e8,MAX_TRAINING_SET_SIZE=0x1f4,THERMO_LOG_SIZE=0x3e8,EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,LTM_DP_RAW_LOG='LTM.rawEventLog',LTM_DP_DAILY_DIGESTS=a0_0x1704cc(0x29d),LTM_DP_STATUS=a0_0x1704cc(0x2a0),LTM_DP_TRIGGER_DIGEST='LTM.triggerDailyDigest',LTM_DP_BASELINE_STATUS=a0_0x1704cc(0x25b),LTM_DP_DRIFT_CHANNEL=a0_0x1704cc(0x133),LTM_DP_DRIFT_STATUS='LTM.driftAnalysis.baselineDrift',LTM_DP_DRIFT_DETAILS='LTM.driftAnalysis.driftDetails',LTM_DP_DRIFT_LAST_CHECK=a0_0x1704cc(0x185),SYSTEM_DP_MODE=a0_0x1704cc(0x1c7),SYSTEM_MODES={'NORMAL':a0_0x1704cc(0x11e),'VACATION':a0_0x1704cc(0x16a),'PARTY':a0_0x1704cc(0x16e),'GUEST':a0_0x1704cc(0x282)},AUTO_RESET_MODES=[SYSTEM_MODES[a0_0x1704cc(0x15a)],SYSTEM_MODES[a0_0x1704cc(0x1cd)]],PERSONA_MAPPING={'generic':a0_0x1704cc(0x1b2),'senior_aal':a0_0x1704cc(0x22c),'family':a0_0x1704cc(0x15c),'single_comfort':'Fokus\x20auf\x20Komfort.','security':a0_0x1704cc(0x250)},ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};let activeSequence=[],sequenceTimer=null;async function initZombies(_0x37eb0d){const _0x4fe586=a0_0x1704cc;try{const _0x2547a3=['analysis.history_debug_00',_0x4fe586(0x17c)];for(const _0xcfc3b1 of _0x2547a3){try{const _0x23005f=await _0x37eb0d[_0x4fe586(0x19b)](_0xcfc3b1);if(_0x23005f)await _0x37eb0d[_0x4fe586(0x24d)](_0xcfc3b1);}catch(_0x281555){}}}catch(_0x253888){}}async function checkLicense(_0x2aba2c){return!![];}async function initHistory(_0x419bc0){const _0x23411d=a0_0x1704cc;try{const _0x4a5dd9=await _0x419bc0[_0x23411d(0x17a)](_0x23411d(0x1f4));_0x4a5dd9&&_0x4a5dd9['val']&&(_0x419bc0[_0x23411d(0x139)]=JSON['parse'](_0x4a5dd9[_0x23411d(0x1a3)][_0x23411d(0x1a0)]()));}catch(_0x3028ef){_0x419bc0['eventHistory']=[];}try{const _0x2c5afb=await _0x419bc0['getStateAsync'](_0x23411d(0x25f));if(_0x2c5afb&&_0x2c5afb['val'])_0x419bc0[_0x23411d(0x119)]=JSON[_0x23411d(0x213)](_0x2c5afb[_0x23411d(0x1a3)][_0x23411d(0x1a0)]());}catch(_0x111aaa){_0x419bc0[_0x23411d(0x119)]=[];}if(_0x419bc0[_0x23411d(0x139)]&&_0x419bc0[_0x23411d(0x139)][_0x23411d(0x236)]>0x0){_0x419bc0[_0x23411d(0x193)][_0x23411d(0x1b4)]('Restoring\x20sensor\x20cache...');for(let _0xc50f4b=_0x419bc0[_0x23411d(0x139)][_0x23411d(0x236)]-0x1;_0xc50f4b>=0x0;_0xc50f4b--){const _0x1da024=_0x419bc0[_0x23411d(0x139)][_0xc50f4b];if(_0x1da024&&_0x1da024['id']!==undefined&&_0x1da024[_0x23411d(0x1cc)]!==undefined)_0x419bc0[_0x23411d(0x27c)][_0x1da024['id']]=_0x1da024[_0x23411d(0x1cc)];}}}function a0_0x2702(){const _0x987b60=['string','length','analysis.training.triggerTopology','systemUUID','Sec-Training\x20started...','dependencyInstallInProgress','getForeignObjectsAsync','ENERGY_TRAIN_RESULT','Gemini\x20Init\x20Error:\x20','analysis.trigger','ðŸ•¸ï¸\x20Manually\x20triggering\x20Topology\x20Update...','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','ðŸ›‹ï¸\x20Triggering\x20Comfort\x20Analysis\x20(Pattern\x20Mining)...','state','prÃ¤senz','Gemini\x20Error:\x20','setupBriefingScheduler','ðŸŒ…\x20Morning\x20Briefing:\x0a','Gait\x20Speed\x20Trend','system','klima','indicator','analysis.health.trendDiagnosis','lastAlertState','delObjectAsync','genAI','analysis.automation.targetId','PRIORITÃ„T:\x20Sicherheit.','modeResetJob','analysis.activitySummary','useWeather','ltmStbWindowDays','main','790489UbjCVH','Sequences','Missing\x20data','analysis.energy.forecast','.\x20SYSTEM_MODE:\x20','LTM.baselineStatus','extendObjectAsync','16026vbCWGz','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','analysis.analysisHistory','response','@google/generative-ai','ðŸ§ª\x20Simulating\x20Butler\x20Proposal:\x20','inactivityThresholdHours','analysisInterval','.NextHours.Location_1.Day_1.current.temp_value','analysis.health.isAnomaly','Raw\x20Log','analysis.energy.heatingScore','telegram','Daily\x20Digests','\x0aGrund:\x20','ANOMALY','exitGraceTimer','alertReason','updateTopology','./lib/topology','Health\x20Analysis','search','Last\x20raw\x20event','toLocaleTimeString','72XydkOd','channel','analysis.lastResult','rule','setForeignStateAsync','\x20Tage)','notifyTelegramInstance','sensorLastValues','geminiModel','stateChange','city','timestamp','analysis.automation.triggerAction','guest','enum','presence','Alert\x20Reason','application/json','Activity-Level','switch','bewegung','Keine\x20Termine.','replace','unshift','BUTLER\x20Execution\x20Error:\x20','push','slice','now','models/gemini-flash-latest','onMessage','LTM.trainingData.sequences','AI\x20Training','success','Train\x20Comfort','apply','targetId','calendarInstance','analysis.automation.autoApply','kill','getForeignStateAsync','LTM.dailyDigests','fenster','âœ…\x20HEALTH\x20TRAINED.','LTM.processingStatus','22171220KztGHp','systemConfig','PYTHON_EXE','Training\x20Status','setHours','36MnGhhs','3115810eQDlVo','summary','activityLevel','namespace','presenceDevices','onReady','change_percent','callback','includes','analysisHistory','isProVersion','isAlert','Keine\x20Wetterdaten\x20verfÃ¼gbar.','analysis.health.trendValue','normal','cancel','analysis.training.status','ANALYZE_HEALTH','.Current.Temperature','testApiKey','\x0aSTB:\x20','setupDriftAnalysisScheduler','currentSystemMode','dismissAutomation','Deaktiviert\x20(Pro-Feature)','Activity\x20Summary','Lernphase\x20(','service.py','Keine\x20Details.','floor','analysis.health.lastCheck','round','targetValue','Target\x20ID','ðŸ•¸ï¸\x20Topology\x20Map\x20updated\x20by\x20Python.','LTM.driftAnalysis','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','VACATION','getTime','debug','filter','eventHistory','stdout','getMinutes','sendTo','baselineDrift','payload','onStateChange','fill','button','analysis.security.currentThreshold','occupancy','system.isPresent','Success:\x20','Train\x20Security','(((.+)+)+)+$','stringify','aiPersona','pop','isPresent','analysis.automation.targetValue','analysis.isAlert','number','getGenerativeModel','Temperature\x20Forecast','heating','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','analysis.security','lampe','trim','ltmJob','analysis.training.triggerEnergy','events.lastEvent','Auto\x20Apply','PARTY','TOPOLOGY_RESULT','Fokus\x20auf\x20Familienroutinen.','ðŸ›‹ï¸\x20BUTLER:\x20Keine\x20neuen\x20Muster\x20gefunden.','system.presenceWho','scanDevices','error','Kalender\x20deaktiviert.','ltmLtbWindowDays','triggerDailyDigest','instance','Heating\x20Score','WiFi\x20Presence\x20detected.','analysis.energy','path','contact','vacation','pythonProcess','command','online','party','analysis.training.triggerComfort','light','minDaysForBaseline','Kein\x20API\x20Key.','HEALTH_TRAIN_RESULT','substring','@iobroker/adapter-core','Failed:\x20','splice','Unbekannt',')\x20-\x20SAFE\x20BOOT','getStateAsync','ðŸš€\x20Starting\x20NUUKANNI\x20Logic\x20(v0.14.0)...','events.history_debug_00','Briefing\x20Error:\x20','System','PONG','TRAIN_COMFORT','status','Trigger\x20Action','Graph\x20Topology','indicator.alarm','LTM.driftAnalysis.lastCheck','generic','.\x20KONTEXT:\x20','message','Detected\x20Patterns','.forecast.current.temperature','Last\x20Check','geminiApiKey','âš ï¸\x20SECURITY\x20ALARM:\x20','getMonth','N/A\x20(Learning)','.\x20WETTER:\x20','licenseKey','setStateAsync','log','analysis.health.todayVector','KI-Modell\x20nicht\x20initialisiert','logDuplicates','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','Started...','analysis.health.gaitSpeed','bind','getObjectAsync','getHours','.forecast.current.temp','ENERGY_PREDICT_RESULT','toLowerCase','toString','Gemini\x20AI\x20initialized.','rating','val','Topology\x20Matrix\x20(Legacy)','useCalendar','cogni-living\x20adapter\x20starting\x20(v','isGracePeriodActive','devices','driftDetails','TRAIN_ENERGY','automationProposal','analysis.triggerBriefing','submitFeedback','Regel\x20erkannt:\x20','getOverviewData','Training\x20Error:\x20','getCalendarNames','Analysiere\x20ausgewogen.','type','info','setState','[LOG]','date','enum.rooms.*','communicate.request','analysis.automation.detectedPatterns','analysis.automation.patternDetected','Description','detected','latitude','{\x22rooms\x22:[],\x20\x22matrix\x22:[]}','text','rawEventLog','details','analysis.energy.insulationScore','ðŸ“\x20Feedback\x20received:\x20','ack','split','system.mode','analysis.training.triggerSecurity','analysis.security.topologyMatrix','getForeignObjectAsync','weatherInstance','value','GUEST','text.alarm','forEach','analysis.training.triggerHealth','.\x20ANWESEND:\x20','./lib/scanner','warn','is_anomaly','map','PREDICT_ENERGY','Aktiv\x20(','threshold','Wetterdaten\x20deaktiviert.','some','scanForDevices','autoApply','write','simulateButler','.\x20EVENTS:\x20','confidence','tÃ¼r','ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','[RESULT]','ANALYZE_SEQUENCE','object','generateContent','description','Adapter','setObjectNotExistsAsync','notifyTelegramEnabled','child_process','Unknown','No\x20instance','location','NORMAL','\x20new\x20patterns.','name','190584IRbuhL','driftAnalysisTimer','events.history','3809247psGQvI','onUnload','startsWith','analysis.alertReason','Â°C,\x20','unknown','writable','config','exports','constructor','python3','boolean','getDate','Security\x20Monitor','heizung','common','analysis.automation.description','json','setupModeResetScheduler','analysis.security.lastScore','door','Current\x20Threshold','testContext','ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...','diagnosis','analysis.security.lastCheck','analysisTimer','N/A','subscribeStates','Thermodynamics','parse','close','Target\x20Value','briefingJob','from','LTM.trainingData.thermodynamics','Skipped\x20(No\x20AI\x20or\x20Data)','SECURITY_RESULT','Err:\x20','automation.triggerAction','Trigger\x20Analysis','Graph\x20Structure\x20(Adjacency\x20Matrix)','ðŸ\x20Python\x20Pong','motion','toISOString','subscribeForeignStatesAsync','4916048iTbxcL','TRAINING_COMPLETE','outdoorSensorId','isExit','Anomaly\x20Detected','TREND_RESULT','TRAIN_SECURITY','exitTimer','dailyDigests','PRIORITÃ„T:\x20Gesundheit/AAL.','insulation','ready','toFixed','analysis.topology.structure','values','ðŸ§ \x20Triggering\x20Security\x20Training...','387jJYZRH','Pattern\x20Detected'];a0_0x2702=function(){return _0x987b60;};return a0_0x2702();}async function initSystemConfig(_0x2f0d7b){const _0x4ea64f=a0_0x1704cc;try{const _0x552d49=await _0x2f0d7b[_0x4ea64f(0x1ca)]('system.config');if(_0x552d49&&_0x552d49[_0x4ea64f(0x204)])_0x2f0d7b[_0x4ea64f(0x2a2)]={'latitude':_0x552d49[_0x4ea64f(0x204)][_0x4ea64f(0x1be)]||0x0,'longitude':_0x552d49[_0x4ea64f(0x204)]['longitude']||0x0,'city':_0x552d49[_0x4ea64f(0x204)][_0x4ea64f(0x27f)]||''};}catch(_0x375aad){}}async function createAllObjects(_0x45985){const _0x388758=a0_0x1704cc;await _0x45985['extendObjectAsync'](_0x388758(0x248),{'type':'channel','common':{'name':_0x388758(0x17e)},'native':{}}),await _0x45985['extendObjectAsync'](SYSTEM_DP_MODE,{'type':_0x388758(0x242),'common':{'name':'System\x20Mode','type':_0x388758(0x235),'role':'state','read':!![],'write':!![],'def':SYSTEM_MODES['NORMAL']},'native':{}}),await _0x45985[_0x388758(0x1e9)](_0x388758(0x15e),{'type':_0x388758(0x242),'common':{'name':'Who\x20is\x20present?','type':_0x388758(0x235),'role':_0x388758(0x1c0),'read':!![],'write':![]},'native':{}}),await _0x45985[_0x388758(0x1e9)](_0x388758(0x158),{'type':_0x388758(0x242),'common':{'name':_0x388758(0x273),'type':_0x388758(0x235),'role':_0x388758(0x206),'read':!![],'write':![]},'native':{}}),await _0x45985[_0x388758(0x1e9)]('events.history',{'type':_0x388758(0x242),'common':{'name':'Event\x20History','type':_0x388758(0x235),'role':_0x388758(0x206),'read':!![],'write':![]},'native':{}}),await _0x45985[_0x388758(0x25c)]('analysis.training',{'type':_0x388758(0x276),'common':{'name':_0x388758(0x294)},'native':{}}),await _0x45985['setObjectNotExistsAsync'](_0x388758(0x1c8),{'type':'state','common':{'name':_0x388758(0x146),'type':_0x388758(0x200),'role':_0x388758(0x141),'read':!![],'write':!![]},'native':{}}),await _0x45985[_0x388758(0x1e9)](_0x388758(0x1d0),{'type':'state','common':{'name':'Train\x20Health','type':_0x388758(0x200),'role':_0x388758(0x141),'read':!![],'write':!![]},'native':{}}),await _0x45985[_0x388758(0x1e9)]('analysis.training.triggerEnergy',{'type':'state','common':{'name':'Train\x20Energy','type':_0x388758(0x200),'role':_0x388758(0x141),'read':!![],'write':!![]},'native':{}}),await _0x45985[_0x388758(0x1e9)](_0x388758(0x16f),{'type':_0x388758(0x242),'common':{'name':_0x388758(0x296),'type':'boolean','role':'button','read':!![],'write':!![]},'native':{}}),await _0x45985[_0x388758(0x1e9)](_0x388758(0x237),{'type':'state','common':{'name':'Build\x20Topology','type':_0x388758(0x200),'role':'button','read':!![],'write':!![]},'native':{}}),await _0x45985[_0x388758(0x1e9)](_0x388758(0x120),{'type':_0x388758(0x242),'common':{'name':_0x388758(0x2a4),'type':_0x388758(0x235),'role':_0x388758(0x1c0),'read':!![],'write':![]},'native':{}}),await _0x45985[_0x388758(0x25c)](_0x388758(0x153),{'type':_0x388758(0x276),'common':{'name':_0x388758(0x202)},'native':{}}),await _0x45985[_0x388758(0x1e9)]('analysis.security.lastScore',{'type':_0x388758(0x242),'common':{'name':'Anomaly\x20Score','type':'number','role':_0x388758(0x1cc),'read':!![],'write':![]},'native':{}}),await _0x45985['setObjectNotExistsAsync'](_0x388758(0x142),{'type':_0x388758(0x242),'common':{'name':_0x388758(0x20a),'type':_0x388758(0x14e),'role':'value','read':!![],'write':![],'def':0.05},'native':{}}),await _0x45985[_0x388758(0x1e9)](_0x388758(0x20e),{'type':_0x388758(0x242),'common':{'name':_0x388758(0x18b),'type':'string','role':'date','read':!![],'write':![]},'native':{}}),await _0x45985[_0x388758(0x25c)]('analysis.topology',{'type':_0x388758(0x276),'common':{'name':_0x388758(0x183)},'native':{}}),await _0x45985[_0x388758(0x1e9)](_0x388758(0x230),{'type':_0x388758(0x242),'common':{'name':_0x388758(0x21e),'type':'string','role':_0x388758(0x206),'read':!![],'write':![],'def':_0x388758(0x1bf)},'native':{}}),await _0x45985[_0x388758(0x1e9)](_0x388758(0x1c9),{'type':'state','common':{'name':_0x388758(0x1a4),'type':_0x388758(0x235),'role':_0x388758(0x206),'read':!![],'write':![]},'native':{}}),await _0x45985[_0x388758(0x25c)]('analysis.health',{'type':'channel','common':{'name':_0x388758(0x271)},'native':{}}),await _0x45985[_0x388758(0x1e9)](_0x388758(0x12e),{'type':_0x388758(0x242),'common':{'name':_0x388758(0x18b),'type':'string','role':_0x388758(0x1b7),'read':!![],'write':![]},'native':{}}),await _0x45985[_0x388758(0x1e9)](_0x388758(0x266),{'type':_0x388758(0x242),'common':{'name':_0x388758(0x227),'type':'boolean','role':_0x388758(0x24a),'read':!![],'write':![]},'native':{}}),await _0x45985['setObjectNotExistsAsync'](_0x388758(0x24b),{'type':_0x388758(0x242),'common':{'name':'Trend','type':_0x388758(0x235),'role':_0x388758(0x1c0),'read':!![],'write':![]},'native':{}}),await _0x45985[_0x388758(0x1e9)](_0x388758(0x11d),{'type':_0x388758(0x242),'common':{'name':'Trend\x20Value','type':_0x388758(0x14e),'role':_0x388758(0x1cc),'read':!![],'write':![]},'native':{}}),await _0x45985[_0x388758(0x1e9)](_0x388758(0x194),{'type':_0x388758(0x242),'common':{'name':'Today\x20Vector\x20(15m)','type':_0x388758(0x235),'role':'json','read':!![],'write':![]},'native':{}}),await _0x45985['setObjectNotExistsAsync'](_0x388758(0x199),{'type':'state','common':{'name':_0x388758(0x247),'type':'number','role':_0x388758(0x1cc),'read':!![],'write':![]},'native':{}}),await _0x45985['extendObjectAsync'](_0x388758(0x167),{'type':_0x388758(0x276),'common':{'name':'Energy\x20Intelligence'},'native':{}}),await _0x45985[_0x388758(0x1e9)](_0x388758(0x1c3),{'type':_0x388758(0x242),'common':{'name':'Insulation\x20Score','type':_0x388758(0x235),'role':_0x388758(0x1c0),'read':!![],'write':![]},'native':{}}),await _0x45985[_0x388758(0x1e9)]('analysis.energy.heatingScore',{'type':_0x388758(0x242),'common':{'name':_0x388758(0x165),'type':_0x388758(0x235),'role':_0x388758(0x1c0),'read':!![],'write':![]},'native':{}}),await _0x45985['setObjectNotExistsAsync'](_0x388758(0x259),{'type':_0x388758(0x242),'common':{'name':_0x388758(0x150),'type':_0x388758(0x235),'role':_0x388758(0x206),'read':!![],'write':![]},'native':{}}),await _0x45985[_0x388758(0x25c)]('LTM',{'type':'channel','common':{'name':'LTM'},'native':{}}),await _0x45985['extendObjectAsync'](LTM_DP_RAW_LOG,{'type':_0x388758(0x242),'common':{'name':_0x388758(0x267),'type':_0x388758(0x235),'role':_0x388758(0x206),'read':!![],'write':![]},'native':{}}),await _0x45985['extendObjectAsync'](LTM_DP_DAILY_DIGESTS,{'type':_0x388758(0x242),'common':{'name':_0x388758(0x26a),'type':_0x388758(0x235),'role':_0x388758(0x206),'read':!![],'write':![]},'native':{}}),await _0x45985['setObjectNotExistsAsync'](_0x388758(0x293),{'type':_0x388758(0x242),'common':{'name':_0x388758(0x257),'type':_0x388758(0x235),'role':_0x388758(0x206),'read':!![],'write':![]},'native':{}}),await _0x45985[_0x388758(0x1e9)](_0x388758(0x218),{'type':_0x388758(0x242),'common':{'name':_0x388758(0x212),'type':_0x388758(0x235),'role':'json','read':!![],'write':![]},'native':{}}),await _0x45985[_0x388758(0x1e9)](_0x388758(0x23e),{'type':_0x388758(0x242),'common':{'name':_0x388758(0x21d),'type':_0x388758(0x200),'role':_0x388758(0x141),'read':!![],'write':!![]},'native':{}}),await _0x45985[_0x388758(0x1e9)]('analysis.triggerBriefing',{'type':_0x388758(0x242),'common':{'name':'Trigger\x20Briefing','type':_0x388758(0x200),'role':_0x388758(0x141),'read':!![],'write':!![]},'native':{}}),await _0x45985['setObjectNotExistsAsync'](_0x388758(0x14d),{'type':_0x388758(0x242),'common':{'name':'Alert\x20Status','type':'boolean','role':_0x388758(0x184),'read':!![],'write':![]},'native':{}}),await _0x45985[_0x388758(0x1e9)](_0x388758(0x1f8),{'type':'state','common':{'name':_0x388758(0x285),'type':_0x388758(0x235),'role':_0x388758(0x1ce),'read':!![],'write':![]},'native':{}}),await _0x45985[_0x388758(0x1e9)](_0x388758(0x252),{'type':_0x388758(0x242),'common':{'name':_0x388758(0x129),'type':'string','role':_0x388758(0x1c0),'read':!![],'write':![]},'native':{}}),await _0x45985['setObjectNotExistsAsync'](_0x388758(0x1bb),{'type':_0x388758(0x242),'common':{'name':_0x388758(0x234),'type':_0x388758(0x200),'role':_0x388758(0x24a),'read':!![],'write':![]},'native':{}}),await _0x45985[_0x388758(0x1e9)](_0x388758(0x205),{'type':_0x388758(0x242),'common':{'name':_0x388758(0x1bc),'type':'string','role':_0x388758(0x1c0),'read':!![],'write':![]},'native':{}}),await _0x45985[_0x388758(0x1e9)](_0x388758(0x1ba),{'type':'state','common':{'name':_0x388758(0x189),'type':_0x388758(0x235),'role':_0x388758(0x206),'read':!![],'write':![]},'native':{}}),await _0x45985[_0x388758(0x1e9)](_0x388758(0x24f),{'type':_0x388758(0x242),'common':{'name':_0x388758(0x131),'type':_0x388758(0x235),'role':_0x388758(0x1c0),'read':!![],'write':![]},'native':{}}),await _0x45985[_0x388758(0x1e9)](_0x388758(0x14c),{'type':_0x388758(0x242),'common':{'name':_0x388758(0x215),'type':'string','role':'text','read':!![],'write':![]},'native':{}}),await _0x45985['setObjectNotExistsAsync'](_0x388758(0x29a),{'type':'state','common':{'name':_0x388758(0x159),'type':_0x388758(0x200),'role':_0x388758(0x288),'read':!![],'write':!![]},'native':{}}),await _0x45985['setObjectNotExistsAsync'](_0x388758(0x281),{'type':_0x388758(0x242),'common':{'name':_0x388758(0x182),'type':_0x388758(0x200),'role':_0x388758(0x141),'read':!![],'write':!![]},'native':{}});}async function loadSystemMode(_0x400777){const _0x210275=a0_0x1704cc;try{const _0x79a4b0=await _0x400777[_0x210275(0x17a)](SYSTEM_DP_MODE);_0x79a4b0&&_0x79a4b0[_0x210275(0x1a3)]&&Object[_0x210275(0x231)](SYSTEM_MODES)[_0x210275(0x118)](_0x79a4b0[_0x210275(0x1a3)])?_0x400777[_0x210275(0x126)]=_0x79a4b0[_0x210275(0x1a3)]:(_0x400777[_0x210275(0x126)]=SYSTEM_MODES[_0x210275(0x1ef)],await _0x400777[_0x210275(0x192)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x210275(0x1ef)],'ack':!![]}));}catch(_0x1d3419){_0x400777[_0x210275(0x126)]=SYSTEM_MODES[_0x210275(0x1ef)];}}async function loadRawEventLog(_0x1f5803){const _0x28078e=a0_0x1704cc;try{const _0x5ab020=await _0x1f5803[_0x28078e(0x17a)](LTM_DP_RAW_LOG);if(_0x5ab020&&_0x5ab020[_0x28078e(0x1a3)])_0x1f5803['rawEventLog']=JSON[_0x28078e(0x213)](_0x5ab020[_0x28078e(0x1a3)]);}catch(_0x39b35d){_0x1f5803[_0x28078e(0x1c1)]=[];}}async function saveRawEventLog(_0x1d19e4){const _0x4523db=a0_0x1704cc;if(_0x1d19e4['rawEventLog'][_0x4523db(0x236)]>RAW_LOG_MAX_SIZE)_0x1d19e4['rawEventLog'][_0x4523db(0x177)](0x0,_0x1d19e4[_0x4523db(0x1c1)][_0x4523db(0x236)]-RAW_LOG_MAX_SIZE);await _0x1d19e4[_0x4523db(0x192)](LTM_DP_RAW_LOG,{'val':JSON[_0x4523db(0x148)](_0x1d19e4[_0x4523db(0x1c1)]),'ack':!![]});}async function loadDailyDigests(_0x2bd959){const _0x367817=a0_0x1704cc;try{const _0x541092=await _0x2bd959[_0x367817(0x17a)](LTM_DP_DAILY_DIGESTS);if(_0x541092&&_0x541092[_0x367817(0x1a3)])_0x2bd959['dailyDigests']=JSON[_0x367817(0x213)](_0x541092['val']);}catch(_0x3109ce){_0x2bd959['dailyDigests']=[];}await updateBaselineStatus(_0x2bd959);}async function saveDailyDigests(_0x1253fc,_0x320546=!![]){const _0x433a6e=a0_0x1704cc,_0x4922ca=_0x1253fc[_0x433a6e(0x1fc)][_0x433a6e(0x162)]||0x3c;_0x1253fc[_0x433a6e(0x22b)][_0x433a6e(0x236)]>_0x4922ca&&_0x1253fc[_0x433a6e(0x22b)][_0x433a6e(0x177)](0x0,_0x1253fc[_0x433a6e(0x22b)][_0x433a6e(0x236)]-_0x4922ca);await _0x1253fc[_0x433a6e(0x192)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x433a6e(0x148)](_0x1253fc[_0x433a6e(0x22b)]),'ack':!![]});if(_0x320546)await updateBaselineStatus(_0x1253fc);}async function updateAnalysisHistory(_0x1724ba,_0xc64c69){const _0x45c48e=a0_0x1704cc;_0x1724ba[_0x45c48e(0x119)][_0x45c48e(0x28c)](_0xc64c69);if(_0x1724ba['analysisHistory'][_0x45c48e(0x236)]>HISTORY_MAX_SIZE)_0x1724ba[_0x45c48e(0x119)][_0x45c48e(0x14a)]();await _0x1724ba[_0x45c48e(0x192)](_0x45c48e(0x25f),{'val':JSON[_0x45c48e(0x148)](_0x1724ba[_0x45c48e(0x119)]),'ack':!![]});}async function updateBaselineStatus(_0xf8e779){const _0x122a70=a0_0x1704cc;if(!_0xf8e779[_0x122a70(0x11a)]){await _0xf8e779[_0x122a70(0x192)](LTM_DP_BASELINE_STATUS,{'val':_0x122a70(0x128),'ack':!![]});return;}const _0x2321e0=_0xf8e779[_0x122a70(0x22b)][_0x122a70(0x236)]>=(_0xf8e779[_0x122a70(0x1fc)][_0x122a70(0x171)]||0x7)?_0x122a70(0x1d7)+_0xf8e779[_0x122a70(0x22b)]['length']+_0x122a70(0x27a):_0x122a70(0x12a)+_0xf8e779['dailyDigests'][_0x122a70(0x236)]+'/'+(_0xf8e779['config'][_0x122a70(0x171)]||0x7)+')';await _0xf8e779[_0x122a70(0x192)](LTM_DP_BASELINE_STATUS,{'val':_0x2321e0,'ack':!![]});}async function initSensorSubscriptions(_0x5c7793){const _0x16b68d=a0_0x1704cc,_0x15a85c=_0x5c7793['config'][_0x16b68d(0x1a8)];if(_0x15a85c)for(const _0x5449f0 of _0x15a85c){await _0x5c7793[_0x16b68d(0x222)](_0x5449f0['id']);}}async function initPresenceSubscriptions(_0x1ebcb7){const _0x3ef14f=a0_0x1704cc,_0x310977=_0x1ebcb7[_0x3ef14f(0x1fc)][_0x3ef14f(0x114)];if(_0x310977)for(const _0x3d07f5 of _0x310977){await _0x1ebcb7[_0x3ef14f(0x222)](_0x3d07f5);}}async function setupTelegramListener(_0x3fec30){const _0x11e198=a0_0x1704cc,_0x828ce3=_0x3fec30['config'][_0x11e198(0x27b)];if(_0x3fec30[_0x11e198(0x1fc)][_0x11e198(0x1ea)]&&_0x828ce3)await _0x3fec30[_0x11e198(0x222)](_0x828ce3+'.communicate.request');}async function checkWifiPresence(_0x7ed8f8){const _0x206291=a0_0x1704cc;try{const _0x1087e0=_0x7ed8f8[_0x206291(0x1fc)][_0x206291(0x114)]||[];let _0x1fbe7a=![];const _0x37502c=[];for(const _0x30b2d9 of _0x1087e0){try{const _0x560366=await _0x7ed8f8[_0x206291(0x29c)](_0x30b2d9);_0x560366&&(_0x560366[_0x206291(0x1a3)]===!![]||_0x560366[_0x206291(0x1a3)]===_0x206291(0x16d)||_0x560366[_0x206291(0x1a3)]===0x1)&&(_0x1fbe7a=!![],_0x37502c[_0x206291(0x28e)](_0x30b2d9));}catch(_0x61f5e4){}}return await _0x7ed8f8[_0x206291(0x192)]('system.presenceWho',{'val':_0x37502c['join'](',\x20'),'ack':!![]}),_0x1fbe7a&&(_0x7ed8f8[_0x206291(0x22a)]&&(_0x7ed8f8[_0x206291(0x193)]['info'](_0x206291(0x166)),abortExitTimer(_0x7ed8f8)),!_0x7ed8f8[_0x206291(0x14b)]&&_0x7ed8f8[_0x206291(0x126)]===SYSTEM_MODES[_0x206291(0x1ef)]&&await setPresence(_0x7ed8f8,!![])),_0x1fbe7a;}catch(_0x2d1df6){return![];}}function startExitTimer(_0xeece7e){const _0x47b28f=a0_0x1704cc;abortExitTimer(_0xeece7e),_0xeece7e[_0x47b28f(0x1a7)]=!![],_0xeece7e[_0x47b28f(0x26d)]=setTimeout(()=>{_0xeece7e['isGracePeriodActive']=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),_0xeece7e[_0x47b28f(0x22a)]=setTimeout(()=>{setPresence(_0xeece7e,![]),_0xeece7e['exitTimer']=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}function abortExitTimer(_0x2ce16a){const _0x83ea4a=a0_0x1704cc;if(_0x2ce16a[_0x83ea4a(0x22a)])clearTimeout(_0x2ce16a[_0x83ea4a(0x22a)]);if(_0x2ce16a[_0x83ea4a(0x26d)])clearTimeout(_0x2ce16a[_0x83ea4a(0x26d)]);_0x2ce16a[_0x83ea4a(0x22a)]=null,_0x2ce16a[_0x83ea4a(0x26d)]=null,_0x2ce16a[_0x83ea4a(0x1a7)]=![];}async function setPresence(_0x6873bf,_0x43856e){const _0x45d294=a0_0x1704cc;if(_0x6873bf[_0x45d294(0x14b)]===_0x43856e)return;_0x6873bf[_0x45d294(0x14b)]=_0x43856e,await _0x6873bf[_0x45d294(0x192)](_0x45d294(0x144),{'val':_0x43856e,'ack':!![]});}async function executeAutomationAction(_0x536cdd){const _0x29c69f=a0_0x1704cc;try{const _0x7f2dae=await _0x536cdd['getStateAsync'](_0x29c69f(0x24f)),_0x1c1515=await _0x536cdd['getStateAsync']('analysis.automation.targetValue');if(_0x7f2dae&&_0x7f2dae[_0x29c69f(0x1a3)]&&_0x1c1515){const _0x2fa50f=_0x7f2dae[_0x29c69f(0x1a3)];let _0x30881c=_0x1c1515[_0x29c69f(0x1a3)];try{_0x30881c=JSON[_0x29c69f(0x213)](_0x30881c);}catch(_0x1d50fd){}_0x536cdd[_0x29c69f(0x193)][_0x29c69f(0x1b4)]('ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20'+_0x2fa50f+'\x20=\x20'+_0x30881c),await _0x536cdd[_0x29c69f(0x279)](_0x2fa50f,_0x30881c);}else _0x536cdd[_0x29c69f(0x193)][_0x29c69f(0x1d3)](_0x29c69f(0x1e2));}catch(_0x209261){_0x536cdd[_0x29c69f(0x193)][_0x29c69f(0x160)](_0x29c69f(0x28d)+_0x209261[_0x29c69f(0x188)]);}}async function processSensorEvent(_0x4c8a43,_0x4d9c8e,_0x181304,_0x18d173){const _0x62fc2a=a0_0x1704cc;if(!_0x18d173)return;const _0x221cc3=_0x181304[_0x62fc2a(0x1a3)],_0x1cb2c3=Date[_0x62fc2a(0x290)](),_0x239a87=_0x4c8a43[_0x62fc2a(0x27c)][_0x4d9c8e];_0x4c8a43[_0x62fc2a(0x27c)][_0x4d9c8e]=_0x221cc3;if(!_0x18d173[_0x62fc2a(0x196)]&&_0x239a87!=undefined&&_0x239a87==_0x221cc3)return;const _0xc230cc=(_0x18d173[_0x62fc2a(0x1b3)]||'')[_0x62fc2a(0x19f)](),_0x4a38d6=_0xc230cc[_0x62fc2a(0x118)]('temperature')||_0xc230cc[_0x62fc2a(0x118)]('temperatur')||_0xc230cc[_0x62fc2a(0x118)](_0x62fc2a(0x249))||_0xc230cc['includes'](_0x62fc2a(0x203));_0x4c8a43[_0x62fc2a(0x11a)]&&_0x4a38d6&&recordThermodynamics(_0x4c8a43,_0x4d9c8e,_0x221cc3,_0x18d173[_0x62fc2a(0x1ee)]);const _0x310cb4={'timestamp':_0x1cb2c3,'id':_0x4d9c8e,'name':_0x18d173[_0x62fc2a(0x1f1)],'type':_0x18d173['type'],'location':_0x18d173['location'],'value':_0x221cc3};_0x4c8a43[_0x62fc2a(0x139)][_0x62fc2a(0x28c)](_0x310cb4);if(_0x4c8a43[_0x62fc2a(0x139)][_0x62fc2a(0x236)]>HISTORY_MAX_SIZE)_0x4c8a43['eventHistory'][_0x62fc2a(0x14a)]();await _0x4c8a43[_0x62fc2a(0x192)](_0x62fc2a(0x158),{'val':JSON[_0x62fc2a(0x148)](_0x310cb4),'ack':!![]}),await _0x4c8a43['setStateAsync'](_0x62fc2a(0x1f4),{'val':JSON[_0x62fc2a(0x148)](_0x4c8a43[_0x62fc2a(0x139)]),'ack':!![]});_0x4c8a43['isProVersion']&&(_0x4c8a43[_0x62fc2a(0x1c1)][_0x62fc2a(0x28e)](_0x310cb4),await saveRawEventLog(_0x4c8a43),recordSequence(_0x4c8a43,_0x310cb4));if(_0x18d173[_0x62fc2a(0x226)]&&_0x221cc3===!![]){if(_0x4c8a43[_0x62fc2a(0x14b)]&&!_0x4c8a43[_0x62fc2a(0x1a7)])startExitTimer(_0x4c8a43);else{if(!_0x4c8a43[_0x62fc2a(0x14b)])setPresence(_0x4c8a43,!![]);}}else{if(_0x18d173[_0x62fc2a(0x1b3)]==='motion'&&_0x221cc3===!![]){if(_0x4c8a43[_0x62fc2a(0x22a)])abortExitTimer(_0x4c8a43);if(!_0x4c8a43[_0x62fc2a(0x14b)]&&_0x4c8a43['currentSystemMode']===SYSTEM_MODES[_0x62fc2a(0x1ef)])setPresence(_0x4c8a43,!![]);}}}async function recordThermodynamics(_0x14eb07,_0x7a2d6a,_0x3c6386,_0xb8ddf6){const _0x315c30=a0_0x1704cc,_0x27aeff=await getOutsideTemperatureNumeric(_0x14eb07),_0x162c78=await _0x14eb07[_0x315c30(0x17a)](_0x315c30(0x218));let _0x511627=[];if(_0x162c78&&_0x162c78[_0x315c30(0x1a3)])try{_0x511627=JSON['parse'](_0x162c78[_0x315c30(0x1a3)]);}catch(_0x421147){}_0x511627['push']({'ts':Date[_0x315c30(0x290)](),'room':_0xb8ddf6||_0x315c30(0x1ec),'t_in':_0x3c6386,'t_out':_0x27aeff});if(_0x511627[_0x315c30(0x236)]>THERMO_LOG_SIZE)_0x511627['shift']();await _0x14eb07[_0x315c30(0x192)]('LTM.trainingData.thermodynamics',{'val':JSON[_0x315c30(0x148)](_0x511627),'ack':!![]});}async function getOutsideTemperatureNumeric(_0x4af8ca){const _0x1b8556=a0_0x1704cc;if(_0x4af8ca['config'][_0x1b8556(0x225)])try{const _0x25d9e5=await _0x4af8ca[_0x1b8556(0x29c)](_0x4af8ca['config'][_0x1b8556(0x225)]);if(_0x25d9e5&&_0x25d9e5[_0x1b8556(0x1a3)]!==undefined&&_0x25d9e5['val']!==null)return parseFloat(_0x25d9e5['val']);}catch(_0x4dea49){}const _0x4a22a1=_0x4af8ca[_0x1b8556(0x1fc)][_0x1b8556(0x1cb)];if(!_0x4af8ca[_0x1b8556(0x1fc)][_0x1b8556(0x253)]||!_0x4a22a1)return null;try{let _0x1f5016='';if(_0x4a22a1['includes']('accuweather'))_0x1f5016=_0x4a22a1+_0x1b8556(0x122);else{if(_0x4a22a1[_0x1b8556(0x118)]('daswetter'))_0x1f5016=_0x4a22a1+_0x1b8556(0x265);else{if(_0x4a22a1['includes']('openweathermap'))_0x1f5016=_0x4a22a1+_0x1b8556(0x18a);else{if(_0x4a22a1[_0x1b8556(0x118)]('weatherunderground'))_0x1f5016=_0x4a22a1+_0x1b8556(0x19d);}}}if(_0x1f5016){const _0xd36d4f=await _0x4af8ca[_0x1b8556(0x29c)](_0x1f5016);if(_0xd36d4f&&_0xd36d4f[_0x1b8556(0x1a3)]!==undefined&&_0xd36d4f[_0x1b8556(0x1a3)]!==null)return parseFloat(_0xd36d4f[_0x1b8556(0x1a3)]);}}catch(_0x32f5ac){}return null;}async function recordSequence(_0x43182a,_0x4ac4e5){const _0x1ed081=a0_0x1704cc,_0x37a184=(_0x4ac4e5['type']||'')[_0x1ed081(0x19f)](),_0x48f8df=[_0x1ed081(0x220),_0x1ed081(0x289),_0x1ed081(0x243),_0x1ed081(0x284),_0x1ed081(0x143),_0x1ed081(0x209),_0x1ed081(0x1e1),'window',_0x1ed081(0x29e),_0x1ed081(0x169),'kontakt',_0x1ed081(0x170),'licht',_0x1ed081(0x288),'schalter','dimmer',_0x1ed081(0x154)];if(!_0x48f8df[_0x1ed081(0x1da)](_0x2591ce=>_0x37a184[_0x1ed081(0x118)](_0x2591ce)))return;if(!_0x4ac4e5['value'])return;if(sequenceTimer)clearTimeout(sequenceTimer);activeSequence[_0x1ed081(0x28e)]({'loc':_0x4ac4e5[_0x1ed081(0x1ee)]||_0x1ed081(0x1ec),'id':_0x4ac4e5['id'],'ts':Date[_0x1ed081(0x290)]()}),sequenceTimer=setTimeout(async()=>{const _0x4b96cf=_0x1ed081;if(activeSequence[_0x4b96cf(0x236)]>0x1)await saveCompletedSequence(_0x43182a);activeSequence=[];},SEQUENCE_TIMEOUT_MS);}async function saveCompletedSequence(_0x27c9bf){const _0x53ad04=a0_0x1704cc;try{const _0x3cacff=await _0x27c9bf[_0x53ad04(0x17a)](_0x53ad04(0x293));let _0x28f2f5=[];if(_0x3cacff&&_0x3cacff[_0x53ad04(0x1a3)])try{_0x28f2f5=JSON[_0x53ad04(0x213)](_0x3cacff[_0x53ad04(0x1a3)]);}catch(_0x361383){}const _0x17efce=activeSequence[0x0]['ts'],_0x2d28f3=activeSequence['map'](_0x4f24dd=>({'loc':_0x4f24dd['loc'],'t_delta':Math['round']((_0x4f24dd['ts']-_0x17efce)/0x3e8)})),_0x2ab597={'timestamp':new Date(_0x17efce)[_0x53ad04(0x221)](),'steps':_0x2d28f3,'duration':Math[_0x53ad04(0x12f)]((activeSequence[activeSequence[_0x53ad04(0x236)]-0x1]['ts']-_0x17efce)/0x3e8),'daytime':new Date(_0x17efce)[_0x53ad04(0x19c)]()};_0x28f2f5[_0x53ad04(0x28e)](_0x2ab597);if(_0x28f2f5[_0x53ad04(0x236)]>MAX_TRAINING_SET_SIZE)_0x28f2f5['shift']();await _0x27c9bf[_0x53ad04(0x192)](_0x53ad04(0x293),{'val':JSON[_0x53ad04(0x148)](_0x28f2f5),'ack':!![]}),runSecurityCheck(_0x27c9bf,_0x2ab597);}catch(_0x276bd2){_0x27c9bf['log'][_0x53ad04(0x160)]('[RECORDER]\x20Error:\x20'+_0x276bd2[_0x53ad04(0x188)]);}}function runSecurityCheck(_0x6adffe,_0x1724a7){const _0x2b3944=a0_0x1704cc;if(!_0x6adffe[_0x2b3944(0x11a)])return;sendToPython(_0x6adffe,_0x2b3944(0x1e4),{'sequence':_0x1724a7});}async function createDailyDigest(_0xaee866){const _0x250511=a0_0x1704cc;if(!_0xaee866[_0x250511(0x11a)])return;await _0xaee866[_0x250511(0x192)](LTM_DP_STATUS,{'val':_0x250511(0x198),'ack':!![]});if(!_0xaee866[_0x250511(0x27d)]||_0xaee866[_0x250511(0x1c1)]['length']<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0xaee866[_0x250511(0x192)](LTM_DP_STATUS,{'val':_0x250511(0x219),'ack':!![]});return;}const _0x17fbd9=JSON[_0x250511(0x213)](JSON[_0x250511(0x148)](_0xaee866[_0x250511(0x1c1)])),_0x153633=_0x17fbd9[_0x250511(0x236)],_0x2f848f=_0x250511(0x240)+JSON[_0x250511(0x148)](_0x17fbd9);try{const _0xa0b24e=await _0xaee866['geminiModel']['generateContent'](_0x2f848f),_0x5f5c0d=JSON[_0x250511(0x213)](_0xa0b24e[_0x250511(0x260)]['text']()[_0x250511(0x28b)](/```json|```/g,'')['trim']()),_0x189000={'timestamp':new Date()[_0x250511(0x221)](),'eventCount':_0x153633,'summary':_0x5f5c0d['summary']||'Digest','activityLevel':_0x5f5c0d[_0x250511(0x112)]||'normal','systemMode':_0xaee866[_0x250511(0x126)]};_0xaee866['dailyDigests'][_0x250511(0x28e)](_0x189000),await saveDailyDigests(_0xaee866),_0xaee866['rawEventLog']=[],await saveRawEventLog(_0xaee866),await _0xaee866['setStateAsync'](LTM_DP_STATUS,{'val':'Success','ack':!![]});if(_0xaee866[_0x250511(0x11a)])sendToPython(_0xaee866,_0x250511(0x121),{'digest':_0x189000});}catch(_0x3342e5){_0xaee866[_0x250511(0x193)][_0x250511(0x160)](_0x3342e5[_0x250511(0x188)]);}}async function runBaselineDriftAnalysis(_0x3a82be){const _0x1ead55=a0_0x1704cc;if(!_0x3a82be[_0x1ead55(0x11a)]||!_0x3a82be[_0x1ead55(0x27d)])return;const _0x38205a=_0x3a82be[_0x1ead55(0x1fc)][_0x1ead55(0x254)]||0xe;if(_0x3a82be['dailyDigests'][_0x1ead55(0x236)]<_0x38205a+0x7){await _0x3a82be['setStateAsync'](LTM_DP_DRIFT_STATUS,{'val':_0x1ead55(0x18f),'ack':!![]});return;}const _0x3751d0=_0x3a82be['dailyDigests'][_0x1ead55(0x28f)](-_0x38205a),_0x30931c=_0x3a82be[_0x1ead55(0x22b)][_0x1ead55(0x28f)](0x0,_0x3a82be[_0x1ead55(0x22b)]['length']-_0x38205a),_0x3f4758=_0x1ead55(0x152)+JSON[_0x1ead55(0x148)](_0x30931c)+_0x1ead55(0x124)+JSON[_0x1ead55(0x148)](_0x3751d0);try{const _0x34eb0b=await _0x3a82be[_0x1ead55(0x27d)][_0x1ead55(0x1e6)](_0x3f4758),_0x1ad830=JSON['parse'](_0x34eb0b[_0x1ead55(0x260)][_0x1ead55(0x1c0)]()[_0x1ead55(0x28b)](/```json|```/g,'')[_0x1ead55(0x155)]());_0x1ad830[_0x1ead55(0x13d)]&&(await _0x3a82be[_0x1ead55(0x192)](LTM_DP_DRIFT_STATUS,{'val':_0x1ad830[_0x1ead55(0x13d)],'ack':!![]}),await _0x3a82be['setStateAsync'](LTM_DP_DRIFT_DETAILS,{'val':_0x1ad830[_0x1ead55(0x1a9)],'ack':!![]}),await _0x3a82be[_0x1ead55(0x192)](LTM_DP_DRIFT_LAST_CHECK,{'val':Date[_0x1ead55(0x290)](),'ack':!![]}));}catch(_0x5a6884){}}async function sendMorningBriefing(_0x258544){const _0x5e1d61=a0_0x1704cc;if(!_0x258544['geminiModel'])return;try{const _0x3d977e='Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.',_0x102175=await _0x258544[_0x5e1d61(0x27d)][_0x5e1d61(0x1e6)](_0x3d977e),_0x102c47=_0x102175[_0x5e1d61(0x260)]['text']();sendNotification(_0x258544,_0x5e1d61(0x246)+_0x102c47);}catch(_0x524723){_0x258544['log'][_0x5e1d61(0x160)](_0x5e1d61(0x17d)+_0x524723['message']);}}function stopPythonService(_0x163e1e){const _0x366db2=a0_0x1704cc;if(_0x163e1e[_0x366db2(0x16b)]){try{_0x163e1e[_0x366db2(0x16b)][_0x366db2(0x29b)]();}catch(_0x5e2dbd){}_0x163e1e[_0x366db2(0x16b)]=null;}}function sendToPython(_0x572476,_0x2de6bc,_0x3d9e05={}){const _0x264d34=a0_0x1704cc;if(!_0x572476['pythonProcess']||!_0x572476[_0x264d34(0x16b)]['stdin'][_0x264d34(0x1fb)])return;const _0x16460e=JSON['stringify']({'command':_0x2de6bc,..._0x3d9e05});try{_0x572476[_0x264d34(0x16b)]['stdin'][_0x264d34(0x1dd)](_0x16460e+'\x0a');}catch(_0x50bf8d){}}function runPythonHealthCheck(_0x10826e){const _0x2cce50=a0_0x1704cc;if(!_0x10826e[_0x2cce50(0x22b)]||_0x10826e[_0x2cce50(0x22b)][_0x2cce50(0x236)]<0x2)return;const _0x38dd17=_0x10826e['dailyDigests'][_0x2cce50(0x1d5)](_0x50be39=>{const _0x23fad1=_0x2cce50,_0x84a4cb=(_0x50be39[_0x23fad1(0x112)]||'')[_0x23fad1(0x19f)]();return ACTIVITY_LEVEL_MAP[_0x84a4cb]||0x32;});sendToPython(_0x10826e,'ANALYZE_TREND',{'values':_0x38dd17,'tag':_0x2cce50(0x287)});}function handlePythonResult(_0x30bba6,_0x43fbd8){const _0xa0cbd3=a0_0x1704cc;if(_0x43fbd8['type']===_0xa0cbd3(0x17f))_0x30bba6['log'][_0xa0cbd3(0x137)](_0xa0cbd3(0x21f));else{if(_0x43fbd8[_0xa0cbd3(0x1b3)]===_0xa0cbd3(0x21a)){const {anomaly_score:_0x1cfc1f,is_anomaly:_0x351c67,threshold:_0x4c1467,explanation:_0x1c7b72}=_0x43fbd8['payload'];_0x30bba6[_0xa0cbd3(0x193)][_0xa0cbd3(0x1b4)]('ðŸ›¡ï¸\x20SECURITY\x20CHECK:\x20Score\x20'+_0x1cfc1f['toFixed'](0x5)+'\x20->\x20'+(_0x351c67?_0xa0cbd3(0x26c):'OK')),_0x30bba6[_0xa0cbd3(0x192)](_0xa0cbd3(0x208),{'val':_0x1cfc1f,'ack':!![]}),_0x30bba6[_0xa0cbd3(0x192)]('analysis.security.lastCheck',{'val':new Date()['toISOString'](),'ack':!![]});if(_0x4c1467)_0x30bba6[_0xa0cbd3(0x192)](_0xa0cbd3(0x142),{'val':_0x4c1467,'ack':!![]});if(_0x351c67){let _0x19488f=_0xa0cbd3(0x197)+_0x1cfc1f[_0xa0cbd3(0x22f)](0x4)+')';if(_0x1c7b72&&_0x1c7b72!==_0xa0cbd3(0x1ec))_0x19488f+=_0xa0cbd3(0x26b)+_0x1c7b72;_0x30bba6[_0xa0cbd3(0x192)](_0xa0cbd3(0x14d),{'val':!![],'ack':!![]}),_0x30bba6[_0xa0cbd3(0x192)](_0xa0cbd3(0x1f8),{'val':_0x19488f,'ack':!![]}),sendNotification(_0x30bba6,_0xa0cbd3(0x18d)+_0x19488f,![],!![]);}}else{if(_0x43fbd8[_0xa0cbd3(0x1b3)]===_0xa0cbd3(0x224)){const _0x291802=_0x43fbd8[_0xa0cbd3(0x13e)][_0xa0cbd3(0x1c2)]||'',_0x2abad8=_0x43fbd8[_0xa0cbd3(0x13e)][_0xa0cbd3(0x1d8)],_0x460315=_0x43fbd8[_0xa0cbd3(0x13e)][_0xa0cbd3(0x295)]?_0xa0cbd3(0x145)+new Date()[_0xa0cbd3(0x274)]()+'\x20('+_0x291802+')':_0xa0cbd3(0x176)+_0x43fbd8[_0xa0cbd3(0x13e)]['reason'];_0x30bba6[_0xa0cbd3(0x192)](_0xa0cbd3(0x120),{'val':_0x460315,'ack':!![]});if(_0x43fbd8['payload'][_0xa0cbd3(0x295)]&&_0x2abad8)_0x30bba6['setStateAsync'](_0xa0cbd3(0x142),{'val':_0x2abad8,'ack':!![]});}else{if(_0x43fbd8[_0xa0cbd3(0x1b3)]==='COMFORT_RESULT'){const {patterns:_0x97a9dc}=_0x43fbd8['payload'];if(_0x97a9dc&&_0x97a9dc[_0xa0cbd3(0x236)]>0x0){_0x30bba6[_0xa0cbd3(0x193)]['info']('ðŸ›‹ï¸\x20BUTLER:\x20Found\x20'+_0x97a9dc[_0xa0cbd3(0x236)]+_0xa0cbd3(0x1f0)),_0x30bba6[_0xa0cbd3(0x192)]('analysis.automation.detectedPatterns',{'val':JSON[_0xa0cbd3(0x148)](_0x97a9dc),'ack':!![]});const _0x424dbd=_0x97a9dc[0x0],_0x689c58=_0xa0cbd3(0x1ae)+_0x424dbd[_0xa0cbd3(0x278)]+'\x20('+(_0x424dbd[_0xa0cbd3(0x1e0)]*0x64)[_0xa0cbd3(0x22f)](0x0)+'%)';_0x30bba6[_0xa0cbd3(0x192)](_0xa0cbd3(0x1bb),{'val':!![],'ack':!![]}),_0x30bba6['setStateAsync'](_0xa0cbd3(0x205),{'val':_0x689c58,'ack':!![]});}else _0x30bba6[_0xa0cbd3(0x193)][_0xa0cbd3(0x1b4)](_0xa0cbd3(0x15d)),_0x30bba6[_0xa0cbd3(0x192)](_0xa0cbd3(0x1bb),{'val':![],'ack':!![]}),_0x30bba6[_0xa0cbd3(0x192)](_0xa0cbd3(0x1ba),{'val':'[]','ack':!![]});}else{if(_0x43fbd8[_0xa0cbd3(0x1b3)]===_0xa0cbd3(0x23c)){if(_0x43fbd8[_0xa0cbd3(0x13e)][_0xa0cbd3(0x295)])try{const _0xbb3a59=JSON[_0xa0cbd3(0x213)](_0x43fbd8['payload']['details']);if(_0xbb3a59['insulation'])_0x30bba6[_0xa0cbd3(0x192)]('analysis.energy.insulationScore',{'val':JSON[_0xa0cbd3(0x148)](_0xbb3a59[_0xa0cbd3(0x22d)]),'ack':!![]});if(_0xbb3a59[_0xa0cbd3(0x151)])_0x30bba6['setStateAsync'](_0xa0cbd3(0x268),{'val':JSON[_0xa0cbd3(0x148)](_0xbb3a59[_0xa0cbd3(0x151)]),'ack':!![]});}catch(_0x132f31){}}else{if(_0x43fbd8['type']===_0xa0cbd3(0x173)){if(_0x43fbd8[_0xa0cbd3(0x13e)][_0xa0cbd3(0x295)])_0x30bba6[_0xa0cbd3(0x193)][_0xa0cbd3(0x1b4)](_0xa0cbd3(0x29f));}else{if(_0x43fbd8[_0xa0cbd3(0x1b3)]==='HEALTH_RESULT')_0x30bba6['setStateAsync']('analysis.health.lastCheck',{'val':new Date()[_0xa0cbd3(0x221)](),'ack':!![]}),_0x30bba6[_0xa0cbd3(0x192)]('analysis.health.isAnomaly',{'val':_0x43fbd8[_0xa0cbd3(0x13e)][_0xa0cbd3(0x1d4)],'ack':!![]});else{if(_0x43fbd8[_0xa0cbd3(0x1b3)]===_0xa0cbd3(0x228))_0x30bba6[_0xa0cbd3(0x192)]('analysis.health.trendDiagnosis',{'val':_0x43fbd8[_0xa0cbd3(0x13e)][_0xa0cbd3(0x20d)],'ack':!![]}),_0x30bba6['setStateAsync'](_0xa0cbd3(0x11d),{'val':_0x43fbd8[_0xa0cbd3(0x13e)][_0xa0cbd3(0x116)],'ack':!![]});else{if(_0x43fbd8[_0xa0cbd3(0x1b3)]==='GAIT_RESULT'){const {speed_trend:_0x588941}=_0x43fbd8[_0xa0cbd3(0x13e)];if(_0x588941!==undefined)_0x30bba6[_0xa0cbd3(0x192)]('analysis.health.gaitSpeed',{'val':_0x588941,'ack':!![]});}else{if(_0x43fbd8[_0xa0cbd3(0x1b3)]===_0xa0cbd3(0x19e)){const {forecast:_0x1dc540}=_0x43fbd8[_0xa0cbd3(0x13e)];if(_0x1dc540)_0x30bba6[_0xa0cbd3(0x192)]('analysis.energy.forecast',{'val':JSON[_0xa0cbd3(0x148)](_0x1dc540),'ack':!![]});}else{if(_0x43fbd8[_0xa0cbd3(0x1b3)]===_0xa0cbd3(0x15b)){const {data:_0x104375}=_0x43fbd8[_0xa0cbd3(0x13e)];_0x104375&&(_0x30bba6[_0xa0cbd3(0x193)][_0xa0cbd3(0x1b4)](_0xa0cbd3(0x132)),_0x30bba6[_0xa0cbd3(0x192)](_0xa0cbd3(0x1c9),{'val':JSON['stringify'](_0x104375),'ack':!![]}));}}}}}}}}}}}}function startPythonService(_0x5a7c86){const _0xb3217d=a0_0x1704cc;let _0x1203e9=_0xb3217d(0x1ff);if(fs['existsSync'](installer[_0xb3217d(0x2a3)]))_0x1203e9=installer[_0xb3217d(0x2a3)];try{const _0x1d4303=path['join'](__dirname,'python_service',_0xb3217d(0x12b));_0x5a7c86[_0xb3217d(0x16b)]=spawn(_0x1203e9,[_0x1d4303]),_0x5a7c86[_0xb3217d(0x16b)][_0xb3217d(0x13a)]['on']('data',_0x11ac03=>{const _0x4cf600=_0xb3217d,_0x5f2a2b=_0x11ac03[_0x4cf600(0x1a0)]()[_0x4cf600(0x1c6)]('\x0a');_0x5f2a2b[_0x4cf600(0x1cf)](_0x24a3ef=>{const _0x59ce98=_0x4cf600,_0x41687b=_0x24a3ef[_0x59ce98(0x155)]();if(!_0x41687b)return;if(_0x41687b['startsWith'](_0x59ce98(0x1b6)))_0x5a7c86[_0x59ce98(0x193)][_0x59ce98(0x137)]('[PYTHON]\x20'+_0x41687b[_0x59ce98(0x174)](0x5)['trim']());else{if(_0x41687b[_0x59ce98(0x1f7)](_0x59ce98(0x1e3)))try{const _0x1fcab5=JSON[_0x59ce98(0x213)](_0x41687b[_0x59ce98(0x174)](0x8)[_0x59ce98(0x155)]());handlePythonResult(_0x5a7c86,_0x1fcab5);}catch(_0x518653){}}});}),_0x5a7c86['pythonProcess']['on'](_0xb3217d(0x214),_0xa7e1a8=>{const _0x57cffe=_0xb3217d;_0x5a7c86[_0x57cffe(0x16b)]=null;});}catch(_0x4e9b7b){_0x5a7c86[_0xb3217d(0x193)][_0xb3217d(0x160)]('Error\x20launching\x20Python:\x20'+_0x4e9b7b['message']);}}async function runAutopilot(_0x241b73){const _0x47a2fc=a0_0x1704cc;_0x241b73['log']['debug'](_0x47a2fc(0x20c)),await runGeminiAnalysis(_0x241b73),updateHealthVector(_0x241b73),triggerGaitAnalysis(_0x241b73),triggerEnergyPrediction(_0x241b73);}async function triggerGaitAnalysis(_0xd28e3d){const _0x19cd61=a0_0x1704cc;if(!_0xd28e3d[_0x19cd61(0x11a)])return;try{const _0x4a317b=await _0xd28e3d[_0x19cd61(0x17a)]('LTM.trainingData.sequences');_0x4a317b&&_0x4a317b[_0x19cd61(0x1a3)]&&sendToPython(_0xd28e3d,'ANALYZE_GAIT',{'sequences':JSON[_0x19cd61(0x213)](_0x4a317b[_0x19cd61(0x1a3)])});}catch(_0x6c084){}}async function triggerEnergyPrediction(_0x3584b4){const _0x4ef6ae=a0_0x1704cc;if(!_0x3584b4[_0x4ef6ae(0x11a)])return;try{const _0x18d679=await getOutsideTemperatureNumeric(_0x3584b4);if(_0x18d679===null)return;const _0x4bb425={},_0x5dbf2d=_0x3584b4[_0x4ef6ae(0x1fc)][_0x4ef6ae(0x1a8)]||[];for(const _0x587779 of _0x5dbf2d){if(_0x587779[_0x4ef6ae(0x1b3)]==='temperature'&&_0x587779[_0x4ef6ae(0x1ee)]){const _0x3f0441=_0x3584b4['sensorLastValues'][_0x587779['id']];if(_0x3f0441!==undefined)_0x4bb425[_0x587779[_0x4ef6ae(0x1ee)]]=_0x3f0441;}}Object['keys'](_0x4bb425)[_0x4ef6ae(0x236)]>0x0&&sendToPython(_0x3584b4,_0x4ef6ae(0x1d6),{'current_temps':_0x4bb425,'t_out':_0x18d679});}catch(_0x1a0ea3){}}function updateHealthVector(_0x58b05d){const _0x2c607a=a0_0x1704cc;if(!_0x58b05d['rawEventLog']||_0x58b05d[_0x2c607a(0x1c1)][_0x2c607a(0x236)]===0x0)return;const _0x4656e8=new Array(0x60)[_0x2c607a(0x140)](0x0),_0x1997ba=new Date()[_0x2c607a(0x10e)](0x0,0x0,0x0,0x0);_0x58b05d['rawEventLog']['forEach'](_0xe092a4=>{const _0x3b87d2=_0x2c607a,_0x29c404=new Date(_0xe092a4[_0x3b87d2(0x280)]);if(_0x29c404[_0x3b87d2(0x136)]()>=_0x1997ba){const _0x3b37d4=_0x29c404[_0x3b87d2(0x19c)](),_0x431dd5=_0x29c404[_0x3b87d2(0x13b)](),_0x5dba81=_0x3b37d4*0x4+Math[_0x3b87d2(0x12d)](_0x431dd5/0xf);if(_0x5dba81>=0x0&&_0x5dba81<0x60)_0x4656e8[_0x5dba81]++;}}),_0x58b05d['setStateAsync'](_0x2c607a(0x194),{'val':JSON['stringify'](_0x4656e8),'ack':!![]});}async function getWeatherContext(_0xe55d29){const _0x536550=a0_0x1704cc;if(!_0xe55d29[_0x536550(0x1fc)][_0x536550(0x253)]||!_0xe55d29[_0x536550(0x1fc)][_0x536550(0x1cb)])return _0x536550(0x1d9);try{const _0x3429eb=_0xe55d29[_0x536550(0x1fc)][_0x536550(0x1cb)];let _0x4f730c=await _0xe55d29[_0x536550(0x29c)](_0x3429eb+_0x536550(0x122));if(!_0x4f730c)_0x4f730c=await _0xe55d29[_0x536550(0x29c)](_0x3429eb+_0x536550(0x18a));let _0xb31eb5=await _0xe55d29['getForeignStateAsync'](_0x3429eb+'.Current.WeatherText');if(!_0xb31eb5)_0xb31eb5=await _0xe55d29[_0x536550(0x29c)](_0x3429eb+'.forecast.current.state');if(_0x4f730c&&_0xb31eb5)return _0x4f730c[_0x536550(0x1a3)]+_0x536550(0x1f9)+_0xb31eb5[_0x536550(0x1a3)];}catch(_0x26c85d){}return _0x536550(0x11c);}async function getCalendarContext(_0x552826){const _0x4d7f0e=a0_0x1704cc;if(!_0x552826[_0x4d7f0e(0x1fc)][_0x4d7f0e(0x1a5)]||!_0x552826[_0x4d7f0e(0x1fc)][_0x4d7f0e(0x299)])return _0x4d7f0e(0x161);return _0x4d7f0e(0x28a);}async function getCalendarNames(_0x2d0bb7,_0x518826){return[];}async function saveFeedback(_0x1e7263,_0x3501f4){const _0x26061e=a0_0x1704cc;_0x1e7263[_0x26061e(0x193)][_0x26061e(0x1b4)](_0x26061e(0x1c4)+_0x3501f4[_0x26061e(0x1a2)]);}async function runGeminiAnalysis(_0x3e0193,_0x43f17e=''){const _0x2534b0=a0_0x1704cc;if(!_0x3e0193[_0x2534b0(0x27d)])return;if(_0x3e0193['eventHistory']['length']===0x0)return;const _0x2cd373=_0x3e0193['eventHistory'][_0x2534b0(0x28f)](0x0,0xf),_0x308b84=await getWeatherContext(_0x3e0193),_0x5a2c6e=_0x3e0193[_0x2534b0(0x126)],_0x301d7d=PERSONA_MAPPING[_0x3e0193[_0x2534b0(0x1fc)][_0x2534b0(0x149)]||_0x2534b0(0x186)],_0x5412db=_0x3e0193[_0x2534b0(0x1fc)]['livingContext']||_0x2534b0(0x12c);let _0x3e9f05=_0x2534b0(0x178);try{const _0x364d44=await _0x3e0193['getStateAsync'](_0x2534b0(0x15e));if(_0x364d44&&_0x364d44['val'])_0x3e9f05=_0x364d44[_0x2534b0(0x1a3)];}catch(_0x248d62){}let _0x31bea6=![];try{const _0x3ec179=await _0x3e0193['getStateAsync'](_0x2534b0(0x29a));if(_0x3ec179&&_0x3ec179[_0x2534b0(0x1a3)])_0x31bea6=!![];}catch(_0x3c5057){}const _0x3fbece=_0x2534b0(0x134)+_0x301d7d+_0x2534b0(0x187)+_0x5412db+_0x2534b0(0x25a)+_0x5a2c6e+_0x2534b0(0x190)+_0x308b84+_0x2534b0(0x1d1)+_0x3e9f05+_0x2534b0(0x1df)+JSON[_0x2534b0(0x148)](_0x2cd373)+'.\x20EMERGENCY:\x20'+_0x43f17e+_0x2534b0(0x25e);try{const _0x1a1477=await _0x3e0193['geminiModel'][_0x2534b0(0x1e6)](_0x3fbece),_0x211160=JSON['parse'](_0x1a1477[_0x2534b0(0x260)][_0x2534b0(0x1c0)]()[_0x2534b0(0x28b)](/```json|```/g,'')[_0x2534b0(0x155)]());await _0x3e0193[_0x2534b0(0x192)](_0x2534b0(0x277),{'val':JSON[_0x2534b0(0x148)](_0x211160),'ack':!![]});if(_0x211160['summary'])await _0x3e0193['setStateAsync']('analysis.activitySummary',{'val':_0x211160[_0x2534b0(0x111)],'ack':!![]});const _0x1a6375={'timestamp':Date['now'](),'id':Date[_0x2534b0(0x290)]()['toString'](),'analysis':{'activity':{'summary':_0x211160['summary'],'isAlert':_0x211160[_0x2534b0(0x11b)],'alertReason':_0x211160[_0x2534b0(0x26e)]},'comfort':{'automationProposal':_0x211160[_0x2534b0(0x1ab)]}}};await updateAnalysisHistory(_0x3e0193,_0x1a6375);const _0x4483f9=_0x211160[_0x2534b0(0x11b)]||![];_0x4483f9!==_0x3e0193[_0x2534b0(0x24c)]&&(await _0x3e0193['setStateAsync'](_0x2534b0(0x14d),{'val':_0x4483f9,'ack':!![]}),_0x3e0193[_0x2534b0(0x24c)]=_0x4483f9,_0x4483f9&&(await _0x3e0193['setStateAsync'](_0x2534b0(0x1f8),{'val':_0x211160[_0x2534b0(0x26e)],'ack':!![]}),sendNotification(_0x3e0193,'âš ï¸\x20ALARM:\x20'+_0x211160[_0x2534b0(0x26e)],![],_0x211160['isEmergency'])));if(_0x211160['automationProposal']&&_0x211160['automationProposal'][_0x2534b0(0x1bd)]){await _0x3e0193[_0x2534b0(0x192)](_0x2534b0(0x1bb),{'val':!![],'ack':!![]}),await _0x3e0193['setStateAsync'](_0x2534b0(0x205),{'val':_0x211160[_0x2534b0(0x1ab)]['description'],'ack':!![]}),await _0x3e0193['setStateAsync'](_0x2534b0(0x24f),{'val':_0x211160[_0x2534b0(0x1ab)][_0x2534b0(0x298)],'ack':!![]}),await _0x3e0193[_0x2534b0(0x192)](_0x2534b0(0x14c),{'val':JSON[_0x2534b0(0x148)](_0x211160[_0x2534b0(0x1ab)][_0x2534b0(0x130)]),'ack':!![]});if(_0x31bea6)executeAutomationAction(_0x3e0193);}}catch(_0x471a88){_0x3e0193[_0x2534b0(0x193)][_0x2534b0(0x160)](_0x2534b0(0x244)+_0x471a88['message']);}}async function startSystem(_0x573137){const _0x4c787a=a0_0x1704cc;_0x573137['log'][_0x4c787a(0x1b4)](_0x4c787a(0x17b)),await initZombies(_0x573137);try{_0x573137[_0x4c787a(0x11a)]=await checkLicense(_0x573137['config'][_0x4c787a(0x191)]);}catch(_0x381214){}if(!_0x573137[_0x4c787a(0x1fc)][_0x4c787a(0x263)]||_0x573137[_0x4c787a(0x1fc)]['inactivityThresholdHours']<0.1)_0x573137[_0x4c787a(0x1fc)]['inactivityThresholdHours']=0xc;await initHistory(_0x573137),await initSystemConfig(_0x573137);if(_0x573137[_0x4c787a(0x1fc)]['geminiApiKey'])try{_0x573137[_0x4c787a(0x24e)]=new GoogleGenerativeAI(_0x573137['config'][_0x4c787a(0x18c)]),_0x573137[_0x4c787a(0x27d)]=_0x573137[_0x4c787a(0x24e)][_0x4c787a(0x14f)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x4c787a(0x286)}}),_0x573137[_0x4c787a(0x193)]['info'](_0x4c787a(0x1a1));}catch(_0x30f256){_0x573137[_0x4c787a(0x193)]['error'](_0x4c787a(0x23d)+_0x30f256[_0x4c787a(0x188)]);}await createAllObjects(_0x573137),await loadSystemMode(_0x573137),await loadRawEventLog(_0x573137),await loadDailyDigests(_0x573137),_0x573137[_0x4c787a(0x211)](_0x4c787a(0x23e)),_0x573137[_0x4c787a(0x211)](LTM_DP_TRIGGER_DIGEST),_0x573137[_0x4c787a(0x211)](_0x4c787a(0x1c7)),_0x573137['subscribeStates'](_0x4c787a(0x1ac)),_0x573137['subscribeStates']('analysis.automation.triggerAction'),_0x573137[_0x4c787a(0x211)](_0x4c787a(0x29a)),_0x573137[_0x4c787a(0x211)](_0x4c787a(0x1c8)),_0x573137[_0x4c787a(0x211)](_0x4c787a(0x1d0)),_0x573137[_0x4c787a(0x211)](_0x4c787a(0x157)),_0x573137[_0x4c787a(0x211)](_0x4c787a(0x16f)),_0x573137[_0x4c787a(0x211)](_0x4c787a(0x237)),await initSensorSubscriptions(_0x573137),await initPresenceSubscriptions(_0x573137),await setupTelegramListener(_0x573137),setTimeout(()=>checkWifiPresence(_0x573137),0x1388);if(_0x573137[_0x4c787a(0x20f)])clearInterval(_0x573137[_0x4c787a(0x20f)]);const _0x24b06c=_0x573137[_0x4c787a(0x1fc)][_0x4c787a(0x264)]||0xf;_0x24b06c>0x0&&(_0x573137[_0x4c787a(0x20f)]=setInterval(()=>{runAutopilot(_0x573137);},_0x24b06c*0x3c*0x3e8)),schedulers['setupLtmScheduler'](_0x573137,()=>createDailyDigest(_0x573137)),schedulers[_0x4c787a(0x207)](_0x573137),schedulers[_0x4c787a(0x125)](_0x573137,()=>runBaselineDriftAnalysis(_0x573137)),schedulers[_0x4c787a(0x245)](_0x573137,()=>sendMorningBriefing(_0x573137)),startPythonService(_0x573137),setTimeout(()=>{const _0x3cbd41=_0x4c787a;topology[_0x3cbd41(0x26f)](_0x573137),_0x573137['pythonProcess']&&(runPythonHealthCheck(_0x573137),triggerGaitAnalysis(_0x573137),triggerEnergyPrediction(_0x573137)),updateHealthVector(_0x573137);},0x1388);}function a0_0x3ccf(_0x2f6771,_0x473a0a){const _0x2adeee=a0_0x2702();return a0_0x3ccf=function(_0x5d38a0,_0x1893e2){_0x5d38a0=_0x5d38a0-0x10e;let _0x270227=_0x2adeee[_0x5d38a0];return _0x270227;},a0_0x3ccf(_0x2f6771,_0x473a0a);}class CogniLiving extends utils[a0_0x1704cc(0x1e8)]{constructor(_0x18e0b5){const _0x1718f1=a0_0x1704cc;super({..._0x18e0b5,'name':'cogni-living'}),this[_0x1718f1(0x139)]=[],this['analysisHistory']=[],this[_0x1718f1(0x1c1)]=[],this[_0x1718f1(0x22b)]=[],this[_0x1718f1(0x27c)]={},this['systemConfig']={'latitude':0x0,'longitude':0x0,'city':''},this[_0x1718f1(0x14b)]=!![],this[_0x1718f1(0x22a)]=null,this['exitGraceTimer']=null,this['isGracePeriodActive']=![],this[_0x1718f1(0x24e)]=null,this[_0x1718f1(0x27d)]=null,this[_0x1718f1(0x126)]=SYSTEM_MODES[_0x1718f1(0x1ef)],this['isProVersion']=![],this[_0x1718f1(0x24c)]=![],this[_0x1718f1(0x238)]=_0x1718f1(0x1fa),this[_0x1718f1(0x20f)]=null,this[_0x1718f1(0x156)]=null,this['modeResetJob']=null,this[_0x1718f1(0x1f3)]=null,this[_0x1718f1(0x216)]=null,this[_0x1718f1(0x16b)]=null,this[_0x1718f1(0x23a)]=![],this['on'](_0x1718f1(0x22e),this[_0x1718f1(0x115)][_0x1718f1(0x19a)](this)),this['on'](_0x1718f1(0x27e),this[_0x1718f1(0x13f)][_0x1718f1(0x19a)](this)),this['on']('unload',this[_0x1718f1(0x1f6)][_0x1718f1(0x19a)](this)),this['on'](_0x1718f1(0x188),this[_0x1718f1(0x292)]['bind'](this));}async[a0_0x1704cc(0x115)](){const _0x1cde83=a0_0x1704cc;this[_0x1cde83(0x193)][_0x1cde83(0x1b4)](_0x1cde83(0x1a6)+this['version']+_0x1cde83(0x179));if(!installer['checkAndInstall'](this,()=>startSystem(this)))return;}[a0_0x1704cc(0x1f6)](_0xb55d4d){const _0x4c0187=a0_0x1704cc;if(this[_0x4c0187(0x20f)])clearInterval(this[_0x4c0187(0x20f)]);if(this[_0x4c0187(0x1f3)])clearInterval(this[_0x4c0187(0x1f3)]);if(this[_0x4c0187(0x156)])this['ltmJob']['cancel']();if(this['modeResetJob'])this[_0x4c0187(0x251)][_0x4c0187(0x11f)]();if(this['briefingJob'])this['briefingJob'][_0x4c0187(0x11f)]();if(this[_0x4c0187(0x22a)])clearTimeout(this[_0x4c0187(0x22a)]);if(this[_0x4c0187(0x26d)])clearTimeout(this[_0x4c0187(0x26d)]);stopPythonService(this),_0xb55d4d();}async[a0_0x1704cc(0x13f)](_0x209d73,_0x37e233){const _0x5b6055=a0_0x1704cc;if(!_0x37e233||this['dependencyInstallInProgress'])return;if(_0x209d73['includes'](_0x5b6055(0x269))&&_0x209d73['endsWith'](_0x5b6055(0x1b9))&&_0x37e233[_0x5b6055(0x1a3)]){await handleTelegramResponse(this,_0x37e233[_0x5b6055(0x1a3)]);return;}if(_0x209d73===this[_0x5b6055(0x113)]+'.'+SYSTEM_DP_MODE){if(_0x37e233[_0x5b6055(0x1a3)]&&Object[_0x5b6055(0x231)](SYSTEM_MODES)[_0x5b6055(0x118)](_0x37e233[_0x5b6055(0x1a3)])){this[_0x5b6055(0x126)]=_0x37e233[_0x5b6055(0x1a3)];if(_0x37e233[_0x5b6055(0x1a3)]===SYSTEM_MODES[_0x5b6055(0x135)])await setPresence(this,![]);else await setPresence(this,!![]);}if(!_0x37e233[_0x5b6055(0x1c5)])this['setState'](_0x209d73,{'val':this['currentSystemMode'],'ack':!![]});return;}if(!_0x37e233[_0x5b6055(0x1c5)]){_0x209d73[_0x5b6055(0x118)](_0x5b6055(0x23e))&&_0x37e233[_0x5b6055(0x1a3)]&&(this[_0x5b6055(0x1b5)](_0x209d73,{'val':![],'ack':!![]}),runGeminiAnalysis(this));if(_0x209d73[_0x5b6055(0x118)](_0x5b6055(0x163))&&_0x37e233['val']){this['setState'](_0x209d73,{'val':![],'ack':!![]});if(this['isProVersion'])createDailyDigest(this);}_0x209d73[_0x5b6055(0x118)]('triggerBriefing')&&_0x37e233[_0x5b6055(0x1a3)]&&(this['setState'](_0x209d73,{'val':![],'ack':!![]}),sendMorningBriefing(this));_0x209d73[_0x5b6055(0x118)](_0x5b6055(0x21c))&&_0x37e233['val']&&(this[_0x5b6055(0x1b5)](_0x209d73,{'val':![],'ack':!![]}),executeAutomationAction(this));if(_0x209d73[_0x5b6055(0x118)](_0x5b6055(0x1c8))&&_0x37e233['val']){this['setState'](_0x209d73,{'val':![],'ack':!![]});if(this[_0x5b6055(0x11a)])try{const _0x1d9842=await this[_0x5b6055(0x17a)]('LTM.trainingData.sequences');if(_0x1d9842&&_0x1d9842[_0x5b6055(0x1a3)]){const _0x17359a=JSON['parse'](_0x1d9842[_0x5b6055(0x1a3)]);this['log'][_0x5b6055(0x1b4)](_0x5b6055(0x232)),this[_0x5b6055(0x192)](_0x5b6055(0x120),{'val':_0x5b6055(0x239),'ack':!![]}),sendToPython(this,_0x5b6055(0x229),{'sequences':_0x17359a});}}catch(_0x2c37df){this[_0x5b6055(0x193)]['error'](_0x5b6055(0x1b0)+_0x2c37df['message']);}}if(_0x209d73[_0x5b6055(0x118)](_0x5b6055(0x1d0))&&_0x37e233[_0x5b6055(0x1a3)]){this['setState'](_0x209d73,{'val':![],'ack':!![]});if(this[_0x5b6055(0x11a)])try{const _0x193a68=await this[_0x5b6055(0x17a)](LTM_DP_DAILY_DIGESTS);if(_0x193a68&&_0x193a68[_0x5b6055(0x1a3)])sendToPython(this,'TRAIN_HEALTH',{'digests':JSON[_0x5b6055(0x213)](_0x193a68[_0x5b6055(0x1a3)])});}catch(_0x1b7490){}}if(_0x209d73[_0x5b6055(0x118)](_0x5b6055(0x157))&&_0x37e233[_0x5b6055(0x1a3)]){this['setState'](_0x209d73,{'val':![],'ack':!![]});if(this[_0x5b6055(0x11a)])try{const _0x124b23=await this[_0x5b6055(0x17a)](_0x5b6055(0x218));if(_0x124b23&&_0x124b23[_0x5b6055(0x1a3)])sendToPython(this,_0x5b6055(0x1aa),{'points':JSON[_0x5b6055(0x213)](_0x124b23[_0x5b6055(0x1a3)])});}catch(_0x18017a){}}if(_0x209d73[_0x5b6055(0x118)](_0x5b6055(0x16f))&&_0x37e233[_0x5b6055(0x1a3)]){this[_0x5b6055(0x1b5)](_0x209d73,{'val':![],'ack':!![]});if(this[_0x5b6055(0x11a)])try{const _0x544631=await this[_0x5b6055(0x17a)](LTM_DP_RAW_LOG);_0x544631&&_0x544631[_0x5b6055(0x1a3)]&&(this[_0x5b6055(0x193)][_0x5b6055(0x1b4)](_0x5b6055(0x241)),sendToPython(this,_0x5b6055(0x180),{'events':JSON[_0x5b6055(0x213)](_0x544631['val'])}));}catch(_0x36991b){}}_0x209d73[_0x5b6055(0x118)](_0x5b6055(0x237))&&_0x37e233[_0x5b6055(0x1a3)]&&(this[_0x5b6055(0x1b5)](_0x209d73,{'val':![],'ack':!![]}),this[_0x5b6055(0x193)]['info'](_0x5b6055(0x23f)),topology[_0x5b6055(0x26f)](this));return;}if(this[_0x5b6055(0x1fc)][_0x5b6055(0x114)]&&this['config'][_0x5b6055(0x114)]['includes'](_0x209d73)){await checkWifiPresence(this);return;}const _0x19b203=(this['config'][_0x5b6055(0x1a8)]||[])['find'](_0x1100a2=>_0x1100a2['id']===_0x209d73);if(_0x19b203)processSensorEvent(this,_0x209d73,_0x37e233,_0x19b203);}async[a0_0x1704cc(0x292)](_0x3f0f4d){const _0x2675e7=a0_0x1704cc;if(typeof _0x3f0f4d===_0x2675e7(0x1e5)&&_0x3f0f4d['message']){if(_0x3f0f4d[_0x2675e7(0x16c)]===_0x2675e7(0x123)){const _0x124df4=_0x3f0f4d[_0x2675e7(0x188)]['apiKey']||this[_0x2675e7(0x1fc)][_0x2675e7(0x18c)];if(!_0x124df4)return this[_0x2675e7(0x13c)](_0x3f0f4d[_0x2675e7(0x217)],_0x3f0f4d[_0x2675e7(0x16c)],{'success':![],'message':_0x2675e7(0x172)},_0x3f0f4d[_0x2675e7(0x117)]);try{const _0x43bb22=new GoogleGenerativeAI(_0x124df4),_0x229afb=_0x43bb22[_0x2675e7(0x14f)]({'model':GEMINI_MODEL}),_0x4da298=await _0x229afb['generateContent']('Hi');this[_0x2675e7(0x13c)](_0x3f0f4d['from'],_0x3f0f4d[_0x2675e7(0x16c)],{'success':!![],'message':'OK:\x20'+_0x4da298[_0x2675e7(0x260)][_0x2675e7(0x1c0)]()},_0x3f0f4d[_0x2675e7(0x117)]);}catch(_0x2fac8c){this['sendTo'](_0x3f0f4d[_0x2675e7(0x217)],_0x3f0f4d[_0x2675e7(0x16c)],{'success':![],'message':_0x2675e7(0x21b)+_0x2fac8c['message']},_0x3f0f4d[_0x2675e7(0x117)]);}}else{if(_0x3f0f4d[_0x2675e7(0x16c)]===_0x2675e7(0x20b)){const _0x4e9d28=await getWeatherContext(this),_0x38a35a=await getCalendarContext(this);this[_0x2675e7(0x13c)](_0x3f0f4d[_0x2675e7(0x217)],_0x3f0f4d[_0x2675e7(0x16c)],{'success':!![],'weather':_0x4e9d28,'calendar':_0x38a35a},_0x3f0f4d[_0x2675e7(0x117)]);}else{if(_0x3f0f4d[_0x2675e7(0x16c)]==='getLtmData'){if(!this[_0x2675e7(0x11a)])return this['sendTo'](_0x3f0f4d[_0x2675e7(0x217)],_0x3f0f4d[_0x2675e7(0x16c)],{'success':![],'isPro':![]},_0x3f0f4d[_0x2675e7(0x117)]);let _0x694306={'status':'N/A'};try{const _0x3ffd0a=await this['getStateAsync'](LTM_DP_DRIFT_STATUS);_0x694306[_0x2675e7(0x181)]=_0x3ffd0a?_0x3ffd0a['val']:_0x2675e7(0x210);}catch(_0x1e2389){}this[_0x2675e7(0x13c)](_0x3f0f4d[_0x2675e7(0x217)],_0x3f0f4d[_0x2675e7(0x16c)],{'success':!![],'isPro':!![],'dailyDigests':this[_0x2675e7(0x22b)],'driftAnalysis':_0x694306,'analysisHistory':this[_0x2675e7(0x119)]},_0x3f0f4d[_0x2675e7(0x117)]);}else{if(_0x3f0f4d[_0x2675e7(0x16c)]===_0x2675e7(0x1af)){const _0x3ca96e=this[_0x2675e7(0x22b)][_0x2675e7(0x236)],_0x2fccbe=new Date(),_0x3349b4=new Date(_0x2fccbe['getFullYear'](),_0x2fccbe[_0x2675e7(0x18e)](),_0x2fccbe[_0x2675e7(0x201)]())['getTime'](),_0x3efff0=this[_0x2675e7(0x1c1)][_0x2675e7(0x138)](_0x51bace=>new Date(_0x51bace[_0x2675e7(0x280)])['getTime']()>_0x3349b4)[_0x2675e7(0x236)],_0x437372=new Array(0x18)[_0x2675e7(0x140)](0x0);this[_0x2675e7(0x1c1)][_0x2675e7(0x1cf)](_0x475807=>{const _0x2ba3fa=_0x2675e7,_0x1da2a7=new Date(_0x475807[_0x2ba3fa(0x280)]);if(_0x1da2a7[_0x2ba3fa(0x136)]()>_0x3349b4)_0x437372[_0x1da2a7[_0x2ba3fa(0x19c)]()]++;});let _0x2614cd={'status':'N/A'};try{const _0x43bf9c=await this[_0x2675e7(0x17a)](LTM_DP_DRIFT_STATUS);_0x2614cd[_0x2675e7(0x181)]=_0x43bf9c?_0x43bf9c[_0x2675e7(0x1a3)]:_0x2675e7(0x210);}catch(_0x3c44bd){}let _0x4ece95='';try{const _0x26374e=await this['getStateAsync'](_0x2675e7(0x15e));_0x4ece95=_0x26374e?_0x26374e[_0x2675e7(0x1a3)]:'';}catch(_0x5697ab){}let _0x1b6e33=null;!this[_0x2675e7(0x27d)]&&(_0x1b6e33=this['config'][_0x2675e7(0x18c)]?_0x2675e7(0x195):'Kein\x20API\x20Key!');let _0x4ab151={'detected':![],'description':'','targetId':'','targetValue':'','autoApply':![]};try{const _0x5df989=await this['getStateAsync']('analysis.automation.patternDetected');if(_0x5df989&&_0x5df989[_0x2675e7(0x1a3)]){_0x4ab151[_0x2675e7(0x1bd)]=!![];const _0x526f5b=await this[_0x2675e7(0x17a)](_0x2675e7(0x205));_0x4ab151[_0x2675e7(0x1e7)]=_0x526f5b?_0x526f5b[_0x2675e7(0x1a3)]:'';const _0x599e9c=await this[_0x2675e7(0x17a)]('analysis.automation.targetId');_0x4ab151[_0x2675e7(0x298)]=_0x599e9c?_0x599e9c[_0x2675e7(0x1a3)]:'';const _0x3ece50=await this[_0x2675e7(0x17a)](_0x2675e7(0x14c));_0x4ab151[_0x2675e7(0x130)]=_0x3ece50?_0x3ece50[_0x2675e7(0x1a3)]:'';}const _0x139d44=await this[_0x2675e7(0x17a)](_0x2675e7(0x29a));_0x4ab151[_0x2675e7(0x1dc)]=_0x139d44?!!_0x139d44[_0x2675e7(0x1a3)]:![];}catch(_0x2628a4){}this[_0x2675e7(0x13c)](_0x3f0f4d[_0x2675e7(0x217)],_0x3f0f4d[_0x2675e7(0x16c)],{'success':!![],'eventHistory':this[_0x2675e7(0x139)][_0x2675e7(0x28f)](0x0,0xf),'stats':{'digestCount':_0x3ca96e,'eventCountToday':_0x3efff0,'hourlyActivity':_0x437372,'driftStatus':_0x2614cd[_0x2675e7(0x181)],'isPresent':this[_0x2675e7(0x14b)],'presenceWho':_0x4ece95,'minDays':this[_0x2675e7(0x1fc)][_0x2675e7(0x171)]||0x7,'stbDays':this[_0x2675e7(0x1fc)][_0x2675e7(0x254)]||0xe,'ltbDays':this[_0x2675e7(0x1fc)][_0x2675e7(0x162)]||0x3c,'systemError':_0x1b6e33},'automation':_0x4ab151},_0x3f0f4d[_0x2675e7(0x117)]);}else{if(_0x3f0f4d['command']===_0x2675e7(0x15f))try{const _0x3c8b29=await scanner[_0x2675e7(0x1db)](this,_0x3f0f4d[_0x2675e7(0x188)]||{});this[_0x2675e7(0x13c)](_0x3f0f4d[_0x2675e7(0x217)],_0x3f0f4d[_0x2675e7(0x16c)],{'success':!![],'devices':_0x3c8b29},_0x3f0f4d[_0x2675e7(0x117)]);}catch(_0x5eac44){this[_0x2675e7(0x13c)](_0x3f0f4d['from'],_0x3f0f4d[_0x2675e7(0x16c)],{'success':![],'error':_0x5eac44[_0x2675e7(0x188)]},_0x3f0f4d['callback']);}else{if(_0x3f0f4d[_0x2675e7(0x16c)]==='getEnums'){const _0xf192ad=await this[_0x2675e7(0x23b)]('enum.functions.*',_0x2675e7(0x283)),_0x115c87=[];if(_0xf192ad)for(const _0x2c3f47 in _0xf192ad){const _0x4db9b3=_0xf192ad[_0x2c3f47],_0x28f7be=(_0x4db9b3[_0x2675e7(0x204)]&&typeof _0x4db9b3[_0x2675e7(0x204)][_0x2675e7(0x1f1)]===_0x2675e7(0x1e5)?_0x4db9b3[_0x2675e7(0x204)]['name']['de']:_0x4db9b3[_0x2675e7(0x204)][_0x2675e7(0x1f1)])||_0x4db9b3['common']['name'];_0x115c87['push']({'id':_0x2c3f47,'name':_0x28f7be});}const _0x724c4e=await this['getForeignObjectsAsync'](_0x2675e7(0x1b8),'enum'),_0x3497ac=[];if(_0x724c4e)for(const _0x456e73 in _0x724c4e){const _0x57f79b=_0x724c4e[_0x456e73],_0x440672=(_0x57f79b['common']&&typeof _0x57f79b[_0x2675e7(0x204)][_0x2675e7(0x1f1)]===_0x2675e7(0x1e5)?_0x57f79b['common'][_0x2675e7(0x1f1)]['de']:_0x57f79b['common']['name'])||_0x456e73[_0x2675e7(0x1c6)]('.')[_0x2675e7(0x14a)]();_0x3497ac[_0x2675e7(0x28e)](_0x440672);}this[_0x2675e7(0x13c)](_0x3f0f4d[_0x2675e7(0x217)],_0x3f0f4d[_0x2675e7(0x16c)],{'success':!![],'enums':_0x115c87,'rooms':_0x3497ac},_0x3f0f4d[_0x2675e7(0x117)]);}else{if(_0x3f0f4d['command']===_0x2675e7(0x1b1)){const _0x2d49d0=_0x3f0f4d[_0x2675e7(0x188)][_0x2675e7(0x164)];if(!_0x2d49d0)return this[_0x2675e7(0x13c)](_0x3f0f4d[_0x2675e7(0x217)],_0x3f0f4d[_0x2675e7(0x16c)],{'success':![],'error':_0x2675e7(0x1ed)},_0x3f0f4d[_0x2675e7(0x117)]);const _0x19885a=await getCalendarNames(this,_0x2d49d0);this['sendTo'](_0x3f0f4d[_0x2675e7(0x217)],_0x3f0f4d[_0x2675e7(0x16c)],{'success':!![],'names':_0x19885a},_0x3f0f4d[_0x2675e7(0x117)]);}else{if(_0x3f0f4d[_0x2675e7(0x16c)]===_0x2675e7(0x1de)){const {targetId:_0x3b039c,targetValue:_0x549b90}=_0x3f0f4d[_0x2675e7(0x188)];this[_0x2675e7(0x193)]['info'](_0x2675e7(0x262)+_0x3b039c+'\x20=\x20'+_0x549b90),await this[_0x2675e7(0x192)](_0x2675e7(0x1bb),{'val':!![],'ack':!![]}),await this[_0x2675e7(0x192)](_0x2675e7(0x205),{'val':'SIMULATION:\x20Test-Vorschlag\x20fÃ¼r\x20'+_0x3b039c,'ack':!![]}),await this[_0x2675e7(0x192)]('analysis.automation.targetId',{'val':_0x3b039c,'ack':!![]}),await this[_0x2675e7(0x192)]('analysis.automation.targetValue',{'val':_0x549b90,'ack':!![]}),this[_0x2675e7(0x13c)](_0x3f0f4d[_0x2675e7(0x217)],_0x3f0f4d[_0x2675e7(0x16c)],{'success':!![]},_0x3f0f4d['callback']);}else{if(_0x3f0f4d[_0x2675e7(0x16c)]===_0x2675e7(0x1ad)){const {historyId:_0x52ebf6,rating:_0x44b69b,comment:_0x436a14,alertReason:_0x1d8081}=_0x3f0f4d[_0x2675e7(0x188)];_0x52ebf6&&_0x44b69b?(await saveFeedback(this,{'timestamp':Date[_0x2675e7(0x290)](),'historyId':_0x52ebf6,'rating':_0x44b69b,'comment':_0x436a14,'alertReason':_0x1d8081}),this[_0x2675e7(0x13c)](_0x3f0f4d['from'],_0x3f0f4d[_0x2675e7(0x16c)],{'success':!![]},_0x3f0f4d[_0x2675e7(0x117)])):this[_0x2675e7(0x13c)](_0x3f0f4d['from'],_0x3f0f4d[_0x2675e7(0x16c)],{'success':![],'error':_0x2675e7(0x258)},_0x3f0f4d[_0x2675e7(0x117)]);}else _0x3f0f4d['command']===_0x2675e7(0x127)&&(this[_0x2675e7(0x193)][_0x2675e7(0x1b4)]('User\x20dismissed\x20automation\x20proposal.'),await this[_0x2675e7(0x192)]('analysis.automation.patternDetected',{'val':![],'ack':!![]}),await this[_0x2675e7(0x192)]('analysis.automation.description',{'val':'','ack':!![]}),this['sendTo'](_0x3f0f4d['from'],_0x3f0f4d['command'],{'success':!![]},_0x3f0f4d['callback']));}}}}}}}}}}}if(require[a0_0x1704cc(0x255)]!==module)module[a0_0x1704cc(0x1fd)]=_0x3e8c54=>new CogniLiving(_0x3e8c54);else new CogniLiving();