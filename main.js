const a0_0x4bc0f7=a0_0x43a3;(function(_0x692168,_0x13d58c){const _0xd34029=a0_0x43a3,_0xf9e18f=_0x692168();while(!![]){try{const _0x4f0024=-parseInt(_0xd34029(0x213))/0x1+parseInt(_0xd34029(0x2d5))/0x2*(parseInt(_0xd34029(0x25e))/0x3)+parseInt(_0xd34029(0x2d1))/0x4+parseInt(_0xd34029(0x1e9))/0x5*(parseInt(_0xd34029(0x24b))/0x6)+parseInt(_0xd34029(0x1e7))/0x7+parseInt(_0xd34029(0x214))/0x8*(-parseInt(_0xd34029(0x217))/0x9)+parseInt(_0xd34029(0x29c))/0xa;if(_0x4f0024===_0x13d58c)break;else _0xf9e18f['push'](_0xf9e18f['shift']());}catch(_0x52b8d1){_0xf9e18f['push'](_0xf9e18f['shift']());}}}(a0_0x326d,0xa51d5));const a0_0x370667=(function(){let _0x2764de=!![];return function(_0x1bf5a8,_0x49c9f8){const _0x368edb=_0x2764de?function(){const _0x1a7d92=a0_0x43a3;if(_0x49c9f8){const _0x18b587=_0x49c9f8[_0x1a7d92(0x262)](_0x1bf5a8,arguments);return _0x49c9f8=null,_0x18b587;}}:function(){};return _0x2764de=![],_0x368edb;};}()),a0_0x30fa8b=a0_0x370667(this,function(){const _0x47512a=a0_0x43a3;return a0_0x30fa8b['toString']()[_0x47512a(0x163)](_0x47512a(0x24c))['toString']()[_0x47512a(0x212)](a0_0x30fa8b)[_0x47512a(0x163)](_0x47512a(0x24c));});function a0_0x43a3(_0x47041d,_0x113f4f){const _0x97fbfe=a0_0x326d();return a0_0x43a3=function(_0x30fa8b,_0x370667){_0x30fa8b=_0x30fa8b-0x15a;let _0x326d98=_0x97fbfe[_0x30fa8b];return _0x326d98;},a0_0x43a3(_0x47041d,_0x113f4f);}a0_0x30fa8b();'use strict';const utils=require(a0_0x4bc0f7(0x228)),{GoogleGenerativeAI}=require('@google/generative-ai'),schedule=require(a0_0x4bc0f7(0x250)),HISTORY_MAX_SIZE=0x32,FEEDBACK_MAX_SIZE=0x14,GEMINI_MODEL=a0_0x4bc0f7(0x2be),ANALYSIS_HISTORY_MAX_SIZE=0x64,RAW_LOG_MAX_SIZE=0x5dc,DAILY_DIGEST_MAX_SIZE_LIMIT=0xb4,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,LTM_SCHEDULE='0\x203\x20*\x20*\x20*',LTM_DP_RAW_LOG=a0_0x4bc0f7(0x195),LTM_DP_DAILY_DIGESTS=a0_0x4bc0f7(0x2b4),LTM_DP_STATUS=a0_0x4bc0f7(0x187),LTM_DP_TRIGGER_DIGEST=a0_0x4bc0f7(0x290),LTM_DP_BASELINE_STATUS=a0_0x4bc0f7(0x1ef),LTM_DP_DRIFT_CHANNEL=a0_0x4bc0f7(0x1a7),LTM_DP_DRIFT_STATUS='LTM.driftAnalysis.baselineDrift',LTM_DP_DRIFT_DETAILS=a0_0x4bc0f7(0x1ab),LTM_DP_DRIFT_LAST_CHECK=a0_0x4bc0f7(0x237),SYSTEM_DP_MODE=a0_0x4bc0f7(0x31c),MODE_RESET_SCHEDULE=a0_0x4bc0f7(0x18f),SYSTEM_MODES={'NORMAL':a0_0x4bc0f7(0x2c6),'VACATION':'vacation','PARTY':a0_0x4bc0f7(0x2d8),'GUEST':a0_0x4bc0f7(0x185)},AUTO_RESET_MODES=[SYSTEM_MODES[a0_0x4bc0f7(0x173)],SYSTEM_MODES[a0_0x4bc0f7(0x254)]],EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,PERSONA_MAPPING={'generic':a0_0x4bc0f7(0x287),'senior_aal':a0_0x4bc0f7(0x203),'family':a0_0x4bc0f7(0x29d),'single_comfort':a0_0x4bc0f7(0x2ca),'security':a0_0x4bc0f7(0x179)};class CogniLiving extends utils[a0_0x4bc0f7(0x1ae)]{constructor(_0x332d83){const _0x4eadeb=a0_0x4bc0f7;super({..._0x332d83,'name':_0x4eadeb(0x1ff)}),this[_0x4eadeb(0x266)]=[],this['analysisHistory']=[],this['feedbackHistory']=[],this[_0x4eadeb(0x2bb)]=[],this['dailyDigests']=[],this[_0x4eadeb(0x16a)]={},this[_0x4eadeb(0x21a)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x4eadeb(0x28b)]=!![],this['exitTimer']=null,this[_0x4eadeb(0x247)]=null,this[_0x4eadeb(0x25c)]=![],this[_0x4eadeb(0x2c5)]=null,this[_0x4eadeb(0x2aa)]=null,this[_0x4eadeb(0x2b8)]=SYSTEM_MODES[_0x4eadeb(0x2fe)],this[_0x4eadeb(0x275)]=![],this[_0x4eadeb(0x264)]=![],this[_0x4eadeb(0x303)]=_0x4eadeb(0x307),this[_0x4eadeb(0x17e)]=null,this[_0x4eadeb(0x28d)]=null,this[_0x4eadeb(0x284)]=null,this[_0x4eadeb(0x2ef)]=null,this['on'](_0x4eadeb(0x272),this[_0x4eadeb(0x270)][_0x4eadeb(0x1b6)](this)),this['on'](_0x4eadeb(0x27b),this[_0x4eadeb(0x296)][_0x4eadeb(0x1b6)](this)),this['on'](_0x4eadeb(0x1a9),this[_0x4eadeb(0x2ab)][_0x4eadeb(0x1b6)](this)),this['on'](_0x4eadeb(0x19a),this[_0x4eadeb(0x2e0)]['bind'](this));}async['onReady'](){const _0x27afbc=a0_0x4bc0f7;this[_0x27afbc(0x311)][_0x27afbc(0x2b5)](_0x27afbc(0x269)+this[_0x27afbc(0x277)]+')');const _0x2692e6=[_0x27afbc(0x2d2),_0x27afbc(0x174),_0x27afbc(0x21c),_0x27afbc(0x1c7),_0x27afbc(0x280),_0x27afbc(0x1be),_0x27afbc(0x23a),_0x27afbc(0x1d3),_0x27afbc(0x2a7),'events.history_debug_04'];for(const _0x30f73c of _0x2692e6){try{const _0x1db738=await this['getObjectAsync'](_0x30f73c);_0x1db738&&await this['delObjectAsync'](_0x30f73c);}catch(_0x1663d7){}}this[_0x27afbc(0x2fb)]['licenseKey']=this[_0x27afbc(0x2fb)]['licenseKey']||'',this[_0x27afbc(0x275)]=await this[_0x27afbc(0x192)](this[_0x27afbc(0x2fb)][_0x27afbc(0x1b4)]);if(!this[_0x27afbc(0x2fb)][_0x27afbc(0x243)]||this[_0x27afbc(0x2fb)]['inactivityThresholdHours']<0.1)this['config'][_0x27afbc(0x243)]=0xc;await this['loadHistoryFromState']();try{const _0x1fe54d=await this['getForeignObjectAsync']('system.config');_0x1fe54d&&_0x1fe54d['common']&&(this[_0x27afbc(0x21a)]={'latitude':_0x1fe54d[_0x27afbc(0x30d)][_0x27afbc(0x321)]||0x0,'longitude':_0x1fe54d[_0x27afbc(0x30d)][_0x27afbc(0x28c)]||0x0,'city':_0x1fe54d[_0x27afbc(0x30d)]['city']||''});}catch(_0x1bfe48){}if(this[_0x27afbc(0x2fb)][_0x27afbc(0x234)])try{this[_0x27afbc(0x2c5)]=new GoogleGenerativeAI(this[_0x27afbc(0x2fb)][_0x27afbc(0x234)]),this['geminiModel']=this['genAI']['getGenerativeModel']({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':'application/json'}}),this[_0x27afbc(0x311)][_0x27afbc(0x2b5)](_0x27afbc(0x164));}catch(_0x532b16){this[_0x27afbc(0x311)][_0x27afbc(0x26f)](_0x27afbc(0x24a)+_0x532b16[_0x27afbc(0x19a)]);}await this[_0x27afbc(0x30a)](),await this[_0x27afbc(0x2ce)](),await this['loadRawEventLog'](),await this[_0x27afbc(0x325)](),this['subscribeStates']('analysis.trigger'),this[_0x27afbc(0x2f9)](LTM_DP_TRIGGER_DIGEST),this[_0x27afbc(0x2f9)](_0x27afbc(0x31c));const _0xd58b40=this[_0x27afbc(0x2fb)][_0x27afbc(0x30e)];if(_0xd58b40&&_0xd58b40[_0x27afbc(0x1fd)]>0x0){this[_0x27afbc(0x311)][_0x27afbc(0x2b5)](_0x27afbc(0x162)+_0xd58b40[_0x27afbc(0x1fd)]+_0x27afbc(0x227));for(const _0x26d6b2 of _0xd58b40){if(_0x26d6b2['id']){await this[_0x27afbc(0x1f1)](_0x26d6b2['id']);try{const _0x155604=await this[_0x27afbc(0x191)](_0x26d6b2['id']);if(_0x155604)this[_0x27afbc(0x16a)][_0x26d6b2['id']]=_0x155604[_0x27afbc(0x21e)];}catch(_0x4db5af){}}}}const _0x41c058=this['config'][_0x27afbc(0x17b)]||[];if(_0x41c058[_0x27afbc(0x1fd)]>0x0){this[_0x27afbc(0x311)]['info'](_0x27afbc(0x162)+_0x41c058[_0x27afbc(0x1fd)]+_0x27afbc(0x1ed));for(const _0x3d2930 of _0x41c058){await this[_0x27afbc(0x1f1)](_0x3d2930);}await this[_0x27afbc(0x283)]();}if(this[_0x27afbc(0x17e)])clearInterval(this[_0x27afbc(0x17e)]);const _0x2adadf=this[_0x27afbc(0x2fb)]['analysisInterval']||0xf;_0x2adadf>0x0&&(this['log']['info'](_0x27afbc(0x184)+_0x2adadf+_0x27afbc(0x1e6)+this[_0x27afbc(0x2fb)][_0x27afbc(0x243)]+'h.'),this[_0x27afbc(0x17e)]=setInterval(()=>this['runAutopilot'](),_0x2adadf*0x3c*0x3e8)),this[_0x27afbc(0x1cf)](),this['setupModeResetScheduler'](),this[_0x27afbc(0x205)]();}async['scanForDevices'](_0x249e5e={}){const _0x2123a5=a0_0x4bc0f7;this[_0x2123a5(0x311)][_0x2123a5(0x2b5)](_0x2123a5(0x2e3)+JSON[_0x2123a5(0x1e1)](_0x249e5e));const _0x50c404=[],_0x6eb02c=_0x249e5e['motion']!==![],_0x1f873a=_0x249e5e[_0x2123a5(0x245)]!==![],_0xc7bf80=_0x249e5e[_0x2123a5(0x2e6)]!==![],_0x55648f=_0x249e5e[_0x2123a5(0x1e2)]===!![],_0x3b29c1=_0x249e5e['weather']===!![],_0x5454cc=_0x249e5e[_0x2123a5(0x169)]||[],_0x5089cd=await this[_0x2123a5(0x20d)](_0x2123a5(0x2c2),_0x2123a5(0x1a1)),_0x34fa2c=await this[_0x2123a5(0x20d)](_0x2123a5(0x31e),_0x2123a5(0x1a1)),_0x108f4b={},_0x2d8936={},_0x32df63={},_0x527487=(_0x1d6a39,_0x3a828b,_0x2a974a=![])=>{const _0x43e6e4=_0x2123a5;if(!_0x1d6a39)return;for(const _0x5c874f in _0x1d6a39){const _0x454ee5=_0x1d6a39[_0x5c874f];if(_0x454ee5&&_0x454ee5['common']&&_0x454ee5[_0x43e6e4(0x30d)]['members']){const _0x1d4954=(typeof _0x454ee5['common']['name']===_0x43e6e4(0x324)?_0x454ee5[_0x43e6e4(0x30d)][_0x43e6e4(0x1bf)]['de']:_0x454ee5['common'][_0x43e6e4(0x1bf)])||_0x454ee5['common'][_0x43e6e4(0x1bf)];if(_0x2a974a)_0x32df63[_0x5c874f]=_0x1d4954;for(const _0x1d3452 of _0x454ee5[_0x43e6e4(0x30d)][_0x43e6e4(0x1f7)]){if(_0x2a974a){if(!_0x3a828b[_0x1d3452])_0x3a828b[_0x1d3452]=[];_0x3a828b[_0x1d3452][_0x43e6e4(0x2a8)](_0x5c874f);}else _0x3a828b[_0x1d3452]=_0x1d4954;}}}};_0x527487(_0x5089cd,_0x108f4b),_0x527487(_0x34fa2c,_0x2d8936,!![]);const _0x210c06=await this[_0x2123a5(0x20d)]('*',_0x2123a5(0x16b)),_0x12db3c=[_0x2123a5(0x1d2),_0x2123a5(0x312),_0x2123a5(0x2b0),_0x2123a5(0x201),_0x2123a5(0x27e),'SABOTAGE',_0x2123a5(0x223),_0x2123a5(0x26e),_0x2123a5(0x2d3),_0x2123a5(0x1b8),_0x2123a5(0x1fc),_0x2123a5(0x299),'OPERATING_VOLTAGE',_0x2123a5(0x320),'INSTALL_TEST',_0x2123a5(0x235),'WEEK_PROGRAM',_0x2123a5(0x316),'SECTION',_0x2123a5(0x1d6),_0x2123a5(0x248),_0x2123a5(0x18e),_0x2123a5(0x273),_0x2123a5(0x326),_0x2123a5(0x2a2),_0x2123a5(0x2f1),_0x2123a5(0x1b2),_0x2123a5(0x1d5),_0x2123a5(0x277),'connection',_0x2123a5(0x2b5),_0x2123a5(0x318),_0x2123a5(0x1f6),'last\x20action',_0x2123a5(0x1df),'alert',_0x2123a5(0x188),_0x2123a5(0x292),_0x2123a5(0x289),'xy','ct',_0x2123a5(0x30c),'sat',_0x2123a5(0x288),_0x2123a5(0x2d9),_0x2123a5(0x2d7),'uniqueid',_0x2123a5(0x314),_0x2123a5(0x15c),_0x2123a5(0x233),_0x2123a5(0x306),_0x2123a5(0x15a),'scriptEnabled',_0x2123a5(0x23b),_0x2123a5(0x1a4),_0x2123a5(0x2f4),'summary',_0x2123a5(0x1d4),_0x2123a5(0x1e8),_0x2123a5(0x22e),_0x2123a5(0x2b5),_0x2123a5(0x246)];if(!_0x3b29c1)_0x12db3c[_0x2123a5(0x2a8)](_0x2123a5(0x291),_0x2123a5(0x208),_0x2123a5(0x2e9),_0x2123a5(0x15f),'uv',_0x2123a5(0x23c),_0x2123a5(0x1fb));const _0x204262=[_0x2123a5(0x178),_0x2123a5(0x2ae),_0x2123a5(0x263),'vis.',_0x2123a5(0x27c),_0x2123a5(0x17c),'icons-mfd.',_0x2123a5(0x260)];if(!_0x3b29c1)_0x204262['push'](_0x2123a5(0x202),_0x2123a5(0x19d),_0x2123a5(0x198),_0x2123a5(0x1a8),_0x2123a5(0x323));const _0x1c100a=(_0x48d1ac,_0x92d836,_0x2616e7=![])=>{const _0x16ab16=_0x2123a5,_0x49a017=_0x48d1ac[_0x16ab16(0x2b9)]('.');if(_0x92d836[_0x48d1ac])return _0x92d836[_0x48d1ac];if(_0x49a017[_0x16ab16(0x1fd)]>0x2&&_0x92d836[_0x49a017['slice'](0x0,-0x1)[_0x16ab16(0x23f)]('.')])return _0x92d836[_0x49a017[_0x16ab16(0x31b)](0x0,-0x1)[_0x16ab16(0x23f)]('.')];if(_0x49a017[_0x16ab16(0x1fd)]>0x3&&_0x92d836[_0x49a017[_0x16ab16(0x31b)](0x0,-0x2)[_0x16ab16(0x23f)]('.')])return _0x92d836[_0x49a017['slice'](0x0,-0x2)[_0x16ab16(0x23f)]('.')];return _0x2616e7?[]:null;};for(const _0xe3610f in _0x210c06){const _0x4c7c93=_0x210c06[_0xe3610f];if(!_0x4c7c93||!_0x4c7c93[_0x2123a5(0x30d)])continue;if(_0x204262[_0x2123a5(0x2dd)](_0x4c1c73=>_0xe3610f[_0x2123a5(0x1bd)](_0x4c1c73)))continue;const _0x535ddc=_0x4c7c93[_0x2123a5(0x30d)][_0x2123a5(0x1c5)]||'',_0x37a858=(_0x4c7c93[_0x2123a5(0x30d)][_0x2123a5(0x1bf)]&&typeof _0x4c7c93[_0x2123a5(0x30d)][_0x2123a5(0x1bf)]===_0x2123a5(0x324)?_0x4c7c93[_0x2123a5(0x30d)][_0x2123a5(0x1bf)]['de']:_0x4c7c93['common'][_0x2123a5(0x1bf)])||'',_0x3e7e67=_0x37a858?_0x37a858[_0x2123a5(0x2e7)]():'',_0x22572c=_0xe3610f[_0x2123a5(0x2e7)](),_0xd447ec=_0x1c100a(_0xe3610f,_0x108f4b),_0x1a429c=_0x1c100a(_0xe3610f,_0x2d8936,!![]);let _0xb12913=null,_0x5869eb=![];if(_0x1a429c&&_0x1a429c[_0x2123a5(0x1fd)]>0x0){const _0x3c2ad9=_0x1a429c[_0x2123a5(0x24f)](_0x59a996=>_0x5454cc[_0x2123a5(0x1cd)](_0x59a996));if(_0x3c2ad9){_0x5869eb=!![];const _0x4b6d0c=_0x32df63[_0x3c2ad9];if(_0x22572c[_0x2123a5(0x1cd)](_0x2123a5(0x29f))||_0x22572c[_0x2123a5(0x1cd)](_0x2123a5(0x327)))_0xb12913=_0x2123a5(0x18a);else{if(_0x22572c['includes'](_0x2123a5(0x261))||_0x22572c[_0x2123a5(0x1cd)]('fire')||_0x3e7e67[_0x2123a5(0x1cd)]('rauch'))_0xb12913=_0x2123a5(0x1c4);else{if(_0x22572c['includes'](_0x2123a5(0x16b))||_0x22572c[_0x2123a5(0x1cd)](_0x2123a5(0x1bc))||_0x22572c[_0x2123a5(0x1cd)]('on'))_0xb12913=_0x2123a5(0x1f0);else _0xb12913=_0x4b6d0c;}}}}if(!_0x5869eb&&!_0x3b29c1){if(_0x12db3c[_0x2123a5(0x2dd)](_0x4da9d1=>_0x3e7e67[_0x2123a5(0x1cd)](_0x4da9d1)||_0xe3610f['toUpperCase']()[_0x2123a5(0x1cd)](_0x4da9d1)))continue;}if(!_0xb12913&&_0x6eb02c){if(_0x535ddc[_0x2123a5(0x1cd)](_0x2123a5(0x1ad))||_0x535ddc[_0x2123a5(0x1cd)](_0x2123a5(0x2a3))||_0x3e7e67['includes'](_0x2123a5(0x2ac))||_0x3e7e67[_0x2123a5(0x1cd)](_0x2123a5(0x25b)))_0xb12913=_0x2123a5(0x18a);}!_0xb12913&&_0x1f873a&&((_0x22572c[_0x2123a5(0x1cd)](_0x2123a5(0x17d))||_0x535ddc[_0x2123a5(0x1cd)](_0x2123a5(0x190))||_0x535ddc[_0x2123a5(0x1cd)](_0x2123a5(0x1ca))||(_0x3e7e67[_0x2123a5(0x1cd)]('fenster')||_0x3e7e67[_0x2123a5(0x1cd)](_0x2123a5(0x1f8)))&&!_0x3e7e67[_0x2123a5(0x1cd)]('temp')&&!_0x3e7e67['includes'](_0x2123a5(0x183))&&(_0x4c7c93[_0x2123a5(0x30d)]['type']===_0x2123a5(0x1dc)||_0x4c7c93[_0x2123a5(0x30d)]['type']===_0x2123a5(0x30b)))&&(_0xb12913='Fenster/T√ºr'));if(!_0xb12913&&_0xc7bf80){if((_0x535ddc[_0x2123a5(0x1cd)](_0x2123a5(0x31f))||_0x535ddc[_0x2123a5(0x1cd)](_0x2123a5(0x19e))||_0x3e7e67[_0x2123a5(0x1cd)](_0x2123a5(0x286))||_0x3e7e67[_0x2123a5(0x1cd)](_0x2123a5(0x276)))&&_0x4c7c93[_0x2123a5(0x30d)][_0x2123a5(0x1f5)])_0xb12913=_0x2123a5(0x1db);}if(!_0xb12913&&_0x55648f){if(_0x535ddc['includes'](_0x2123a5(0x282))||_0x535ddc[_0x2123a5(0x1cd)](_0x2123a5(0x170))||_0x3e7e67[_0x2123a5(0x1cd)](_0x2123a5(0x271)))_0xb12913=_0x2123a5(0x20b);}if(_0xb12913){let _0x20c402=_0xd447ec||'';if(!_0x20c402){if(_0x3e7e67[_0x2123a5(0x1cd)]('bad'))_0x20c402=_0x2123a5(0x1e3);else{if(_0x3e7e67['includes']('k√ºche'))_0x20c402='K√ºche';else{if(_0x3e7e67[_0x2123a5(0x1cd)]('wohn'))_0x20c402=_0x2123a5(0x258);else{if(_0x3e7e67[_0x2123a5(0x1cd)](_0x2123a5(0x1c3)))_0x20c402=_0x2123a5(0x309);else{if(_0x3e7e67[_0x2123a5(0x1cd)](_0x2123a5(0x24d))||_0x3e7e67['includes'](_0x2123a5(0x22c)))_0x20c402=_0x2123a5(0x1a6);else{if(_0x3e7e67[_0x2123a5(0x1cd)](_0x2123a5(0x1f3)))_0x20c402='Garten';}}}}}}let _0x3a7445=![];_0xb12913===_0x2123a5(0x1b7)&&((_0x3e7e67['includes'](_0x2123a5(0x1c1))||_0x3e7e67['includes'](_0x2123a5(0x279))||_0x3e7e67[_0x2123a5(0x1cd)]('wohnungst√ºr')||_0x20c402&&_0x20c402[_0x2123a5(0x2e7)]()['includes'](_0x2123a5(0x24d))&&_0x3e7e67[_0x2123a5(0x1cd)]('t√ºr'))&&(_0x3a7445=!![]));let _0x7579e4=0x0;if(_0x5869eb)_0x7579e4+=0x1e;else{if(_0xd447ec)_0x7579e4+=0x14;else{if(_0x20c402)_0x7579e4+=0xa;}}if(_0x3a7445)_0x7579e4+=0x5;_0x50c404[_0x2123a5(0x2a8)]({'id':_0xe3610f,'name':_0x37a858||_0xe3610f,'type':_0xb12913,'location':_0x20c402,'logDuplicates':_0xb12913==='Bewegung','isExit':_0x3a7445,'_score':_0x7579e4});}}return _0x50c404[_0x2123a5(0x2cc)]((_0x390ee7,_0x173c31)=>_0x173c31[_0x2123a5(0x176)]-_0x390ee7[_0x2123a5(0x176)]),_0x50c404;}async[a0_0x4bc0f7(0x283)](){const _0x239621=a0_0x4bc0f7,_0x3d8c22=this[_0x239621(0x2fb)][_0x239621(0x17b)]||[];let _0x204d45=![];for(const _0x3e52f7 of _0x3d8c22){try{const _0x350471=await this[_0x239621(0x191)](_0x3e52f7);if(_0x350471&&(_0x350471[_0x239621(0x21e)]===!![]||_0x350471['val']===_0x239621(0x1b0)||_0x350471[_0x239621(0x21e)]===0x1)){_0x204d45=!![];break;}}catch(_0x547b24){}}return _0x204d45&&(this[_0x239621(0x180)]&&(this['log'][_0x239621(0x2b5)](_0x239621(0x15b)),this[_0x239621(0x317)]()),!this[_0x239621(0x28b)]&&this[_0x239621(0x2b8)]===SYSTEM_MODES[_0x239621(0x2fe)]&&this[_0x239621(0x1b3)](!![])),_0x204d45;}async[a0_0x4bc0f7(0x296)](_0x1056f1,_0x5697d5){const _0x220ca0=a0_0x4bc0f7;if(!_0x5697d5)return;if(_0x1056f1===this[_0x220ca0(0x305)]+'.'+SYSTEM_DP_MODE){_0x5697d5['val']&&Object['values'](SYSTEM_MODES)[_0x220ca0(0x1cd)](_0x5697d5['val'])&&(this[_0x220ca0(0x2b8)]=_0x5697d5[_0x220ca0(0x21e)],_0x5697d5[_0x220ca0(0x21e)]===SYSTEM_MODES[_0x220ca0(0x160)]?this[_0x220ca0(0x1b3)](![]):this['setPresence'](!![]));if(!_0x5697d5[_0x220ca0(0x17a)])this[_0x220ca0(0x255)](_0x1056f1,{'val':this[_0x220ca0(0x2b8)],'ack':!![]});return;}if(!_0x5697d5[_0x220ca0(0x17a)]){_0x1056f1[_0x220ca0(0x1cd)](_0x220ca0(0x298))&&_0x5697d5[_0x220ca0(0x21e)]&&(this['setState'](_0x1056f1,{'val':![],'ack':!![]}),this[_0x220ca0(0x2de)]());if(_0x1056f1[_0x220ca0(0x1cd)](_0x220ca0(0x181))&&_0x5697d5[_0x220ca0(0x21e)]){this[_0x220ca0(0x255)](_0x1056f1,{'val':![],'ack':!![]});if(this[_0x220ca0(0x275)])this[_0x220ca0(0x2ec)]();}return;}if(this[_0x220ca0(0x2fb)]['presenceDevices']&&this[_0x220ca0(0x2fb)]['presenceDevices'][_0x220ca0(0x1cd)](_0x1056f1)){await this[_0x220ca0(0x283)]();return;}const _0x4ebac1=(this[_0x220ca0(0x2fb)]['devices']||[])[_0x220ca0(0x24f)](_0x2712c8=>_0x2712c8['id']===_0x1056f1);if(_0x4ebac1)this[_0x220ca0(0x2c3)](_0x1056f1,_0x5697d5,_0x4ebac1);}async[a0_0x4bc0f7(0x2c3)](_0x5a997c,_0x2120fe,_0x1de4c3){const _0x29bef2=a0_0x4bc0f7;if(!_0x1de4c3['logDuplicates']&&this[_0x29bef2(0x16a)][_0x5a997c]===_0x2120fe[_0x29bef2(0x21e)])return;this[_0x29bef2(0x16a)][_0x5a997c]=_0x2120fe[_0x29bef2(0x21e)];if(this['isGracePeriodActive'])return;const _0xec0dd4=await this[_0x29bef2(0x283)]();if(_0xec0dd4){if(!this[_0x29bef2(0x28b)])this[_0x29bef2(0x1b3)](!![]);}else{const _0x5e8843=_0x1de4c3[_0x29bef2(0x182)]===!![];_0x5e8843?this['startExitTimer']():(this[_0x29bef2(0x180)]&&(this[_0x29bef2(0x311)][_0x29bef2(0x2b5)](_0x29bef2(0x16d)),this[_0x29bef2(0x317)]()),!this[_0x29bef2(0x28b)]&&this[_0x29bef2(0x2b8)]===SYSTEM_MODES[_0x29bef2(0x2fe)]&&this[_0x29bef2(0x1b3)](!![]));}const _0xab2c37={'timestamp':_0x2120fe['ts'],'id':_0x5a997c,'name':_0x1de4c3[_0x29bef2(0x1bf)],'value':_0x2120fe['val'],'location':_0x1de4c3[_0x29bef2(0x313)],'type':_0x1de4c3[_0x29bef2(0x22a)]};this[_0x29bef2(0x266)][_0x29bef2(0x2d6)](_0xab2c37);if(this[_0x29bef2(0x266)][_0x29bef2(0x1fd)]>HISTORY_MAX_SIZE)this[_0x29bef2(0x266)][_0x29bef2(0x253)]();await this['setStateAsync']('events.lastEvent',{'val':JSON[_0x29bef2(0x1e1)](_0xab2c37),'ack':!![]}),await this[_0x29bef2(0x2f2)](_0x29bef2(0x21f),{'val':JSON['stringify'](this[_0x29bef2(0x266)]),'ack':!![]}),this[_0x29bef2(0x2bb)]['push']({'timestamp':new Date(_0x2120fe['ts'])[_0x29bef2(0x19c)](),'sensorName':_0x1de4c3['name'],'location':_0x1de4c3[_0x29bef2(0x313)],'value':_0x2120fe[_0x29bef2(0x21e)]}),await this[_0x29bef2(0x230)]();}[a0_0x4bc0f7(0x189)](){const _0x4ecbbe=a0_0x4bc0f7;this['abortExitTimer'](),this[_0x4ecbbe(0x25c)]=!![],this['exitGraceTimer']=setTimeout(()=>{const _0x332392=_0x4ecbbe;this[_0x332392(0x25c)]=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),this['exitTimer']=setTimeout(()=>{const _0x3e2cfe=_0x4ecbbe;this[_0x3e2cfe(0x1b3)](![]),this[_0x3e2cfe(0x180)]=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}[a0_0x4bc0f7(0x317)](){const _0x3eff68=a0_0x4bc0f7;if(this[_0x3eff68(0x180)])clearTimeout(this[_0x3eff68(0x180)]);if(this[_0x3eff68(0x247)])clearTimeout(this[_0x3eff68(0x247)]);this['exitTimer']=null,this['exitGraceTimer']=null,this[_0x3eff68(0x25c)]=![];}async[a0_0x4bc0f7(0x1b3)](_0x1f59f6){const _0x5a40c8=a0_0x4bc0f7;if(this[_0x5a40c8(0x28b)]===_0x1f59f6)return;this[_0x5a40c8(0x28b)]=_0x1f59f6,await this['setStateAsync'](_0x5a40c8(0x2ea),{'val':_0x1f59f6,'ack':!![]});}[a0_0x4bc0f7(0x19b)](){const _0x5dc15e=a0_0x4bc0f7,_0x1bb893=this[_0x5dc15e(0x2fb)]['inactivityThresholdHours'],_0xd3a946=this[_0x5dc15e(0x2fb)][_0x5dc15e(0x1c9)],_0x226cdc=this[_0x5dc15e(0x266)][_0x5dc15e(0x1fd)]>0x0?this[_0x5dc15e(0x266)][0x0][_0x5dc15e(0x30f)]:Date[_0x5dc15e(0x16e)](),_0x12819c=(Date[_0x5dc15e(0x16e)]()-_0x226cdc)/(0x3e8*0x3c*0x3c);let _0x32f4c5='';_0xd3a946&&this[_0x5dc15e(0x2b8)]===SYSTEM_MODES[_0x5dc15e(0x2fe)]&&this[_0x5dc15e(0x28b)]&&(_0x12819c>_0x1bb893&&(_0x32f4c5=_0x5dc15e(0x1b5)+_0x12819c[_0x5dc15e(0x238)](0x1)+_0x5dc15e(0x209)));if(_0x32f4c5){this[_0x5dc15e(0x2de)](_0x32f4c5)['catch'](_0x69eb0a=>this[_0x5dc15e(0x311)][_0x5dc15e(0x26f)](_0x69eb0a));return;}const _0x4c000e=Date[_0x5dc15e(0x16e)](),_0x5e70d6=_0x4c000e-_0x226cdc,_0x1a4974=(this[_0x5dc15e(0x2fb)]['analysisInterval']||0xf)*0x3c*0x3e8;this['eventHistory']['length']>0x0&&_0x5e70d6<=_0x1a4974?this[_0x5dc15e(0x2de)]()[_0x5dc15e(0x2b1)](_0x5621b8=>this[_0x5dc15e(0x311)]['error'](_0x5621b8)):!this[_0x5dc15e(0x264)]&&(this[_0x5dc15e(0x255)](_0x5dc15e(0x2ff),{'val':![],'ack':!![]}),this[_0x5dc15e(0x255)]('analysis.isEmergency',{'val':![],'ack':!![]}));}async[a0_0x4bc0f7(0x2de)](_0x27de09=''){const _0x287626=a0_0x4bc0f7;if(!this['geminiModel'])return;const _0x112431=this[_0x287626(0x266)][_0x287626(0x1fd)]>0x0?this['eventHistory']:[{'note':_0x287626(0x1e0)}],_0x2f30de=PERSONA_MAPPING[this[_0x287626(0x2fb)][_0x287626(0x2a0)]||'generic'],_0x10b62c=this['config'][_0x287626(0x15e)]||'',_0x2a06e0=this['currentSystemMode'],_0x101af6=new Date(),_0x4f32b0=_0x101af6[_0x287626(0x2a5)](_0x287626(0x231),{'weekday':'long','hour':_0x287626(0x2fa),'minute':_0x287626(0x2fa)}),_0x12217f=this[_0x287626(0x21a)];let _0x44afd9='';if(this[_0x287626(0x21d)]['length']>0x0){const _0x254d96=this[_0x287626(0x21d)][_0x287626(0x31b)](0x0,0x3)[_0x287626(0x1a3)](_0x5687a4=>_0x287626(0x221)+_0x5687a4[_0x287626(0x1ea)]+'\x22\x20was\x20'+_0x5687a4[_0x287626(0x1f9)]+'.')[_0x287626(0x23f)]('\x0a');_0x44afd9=_0x287626(0x2bd)+_0x254d96+'\x0a';}const _0x384977=_0x27de09?_0x287626(0x204)+_0x27de09+_0x287626(0x293):'',_0x5151b2=_0x287626(0x29e),_0x479558=_0x287626(0x304)+_0x4f32b0+'.\x20ORT:\x20'+_0x12217f[_0x287626(0x244)]+_0x287626(0x2bf)+_0x2a06e0+'.\x20PR√ÑSENZ:\x20'+(this[_0x287626(0x28b)]?'Ja':_0x287626(0x23d))+_0x287626(0x2b3)+_0x10b62c+_0x287626(0x256)+_0x2f30de+_0x287626(0x1fe)+_0x5151b2+'\x20'+_0x44afd9+'\x20'+_0x384977+_0x287626(0x165)+JSON[_0x287626(0x1e1)](_0x112431)+_0x287626(0x2a9);try{const _0x5c62c0=await this[_0x287626(0x2aa)]['generateContent'](_0x479558),_0xf30839=_0x5c62c0[_0x287626(0x257)][_0x287626(0x206)]()[_0x287626(0x224)](/```json|```/g,'')['trim'](),_0x21d6f0=JSON[_0x287626(0x18d)](_0xf30839);await this[_0x287626(0x2f2)]('analysis.lastResult',{'val':_0xf30839,'ack':!![]}),await this[_0x287626(0x2f2)](_0x287626(0x2e2),{'val':_0x21d6f0['activity'][_0x287626(0x1ea)]||'','ack':!![]}),await this['setStateAsync'](_0x287626(0x25f),{'val':_0x21d6f0[_0x287626(0x315)]['summary']||_0x287626(0x2ad),'ack':!![]}),await this['setStateAsync'](_0x287626(0x2e8),{'val':_0x21d6f0[_0x287626(0x315)][_0x287626(0x2f3)]||_0x287626(0x2ad),'ack':!![]});_0x21d6f0['comfort']&&(await this[_0x287626(0x2f2)](_0x287626(0x171),{'val':_0x21d6f0[_0x287626(0x1a0)][_0x287626(0x1c2)]||'','ack':!![]}),await this[_0x287626(0x2f2)](_0x287626(0x193),{'val':_0x21d6f0[_0x287626(0x1a0)]['suggestion']||'','ack':!![]}),_0x21d6f0['comfort'][_0x287626(0x308)]&&(await this[_0x287626(0x2f2)](_0x287626(0x26a),{'val':_0x21d6f0[_0x287626(0x1a0)][_0x287626(0x308)][_0x287626(0x31a)]||![],'ack':!![]}),await this['setStateAsync'](_0x287626(0x229),{'val':_0x21d6f0['comfort'][_0x287626(0x308)][_0x287626(0x233)]||'','ack':!![]}),await this[_0x287626(0x2f2)](_0x287626(0x18b),{'val':_0x21d6f0[_0x287626(0x1a0)]['automationProposal'][_0x287626(0x22b)]||'','ack':!![]})));_0x21d6f0[_0x287626(0x17f)]&&(await this[_0x287626(0x2f2)](_0x287626(0x1c0),{'val':typeof _0x21d6f0['health']['sleepScore']===_0x287626(0x30b)?_0x21d6f0[_0x287626(0x17f)][_0x287626(0x186)]:0x0,'ack':!![]}),await this[_0x287626(0x2f2)](_0x287626(0x274),{'val':_0x21d6f0[_0x287626(0x17f)][_0x287626(0x301)]||_0x287626(0x2c9),'ack':!![]}),await this[_0x287626(0x2f2)]('analysis.health.notes',{'val':_0x21d6f0[_0x287626(0x17f)][_0x287626(0x2b6)]||'','ack':!![]}));const _0x2ada4f=_0x21d6f0['activity'][_0x287626(0x210)]||![],_0xd9d45e=_0x21d6f0[_0x287626(0x315)][_0x287626(0x232)]||![];if(_0x2ada4f||_0xd9d45e){await this[_0x287626(0x2f2)](_0x287626(0x2ff),{'val':!![],'ack':!![]}),await this[_0x287626(0x2f2)](_0x287626(0x215),{'val':_0xd9d45e,'ack':!![]});if(!this[_0x287626(0x264)]||_0xd9d45e){const _0x562ff7=_0xd9d45e?_0x287626(0x28f):_0x287626(0x2d4);this[_0x287626(0x2eb)](_0x562ff7+':\x20'+_0x21d6f0[_0x287626(0x315)]['alertReason'],![],_0xd9d45e);}}else await this[_0x287626(0x2f2)](_0x287626(0x2ff),{'val':![],'ack':!![]}),await this[_0x287626(0x2f2)]('analysis.isEmergency',{'val':![],'ack':!![]});this[_0x287626(0x264)]=_0x2ada4f||_0xd9d45e;const _0x5d7687={'timestamp':Date[_0x287626(0x16e)](),'id':Date['now']()[_0x287626(0x175)](),'analysis':_0x21d6f0,'systemMode':_0x2a06e0,'isPro':this['isProVersion']};this[_0x287626(0x28a)](_0x5d7687);}catch(_0x24ce7b){this['log'][_0x287626(0x26f)](_0x287626(0x2fd)+_0x24ce7b['message']);}}async[a0_0x4bc0f7(0x2ec)](){const _0x38a622=a0_0x4bc0f7;if(!this[_0x38a622(0x2aa)]||this[_0x38a622(0x2bb)]['length']<LTM_MIN_EVENTS_FOR_COMPRESSION){await this[_0x38a622(0x2f2)](LTM_DP_STATUS,{'val':_0x38a622(0x328),'ack':!![]});return;}this['log']['info'](_0x38a622(0x2da)+this['rawEventLog'][_0x38a622(0x1fd)]+_0x38a622(0x249)),await this[_0x38a622(0x2f2)](LTM_DP_STATUS,{'val':_0x38a622(0x16c),'ack':!![]});const _0x16294d=this[_0x38a622(0x2bb)][_0x38a622(0x1fd)]>0x320?this[_0x38a622(0x2bb)][_0x38a622(0x31b)](this[_0x38a622(0x2bb)]['length']-0x320):this[_0x38a622(0x2bb)],_0x39be0f=PERSONA_MAPPING[this['config']['aiPersona']||_0x38a622(0x26c)],_0x3e66fa=_0x38a622(0x1dd)+_0x39be0f+_0x38a622(0x29a)+JSON[_0x38a622(0x1e1)](_0x16294d)+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20OUTPUT\x20SCHEMA:\x0a\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22summary\x22:\x20\x22Pr√§gnante\x20Zusammenfassung\x20des\x20Tages\x20(max\x202\x20S√§tze).\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22activityLevel\x22:\x20\x22sehr\x20niedrig|niedrig|normal|hoch|sehr\x20hoch\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22health\x22:\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22sleepScore\x22:\x20number\x20(0-100,\x20Gesamtbewertung\x20der\x20Nachtruhe/Schlafqualit√§t\x20des\x20vergangenen\x2024h\x20Zyklus),\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22restlessness\x22:\x20\x22none|low|medium|high\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20}';try{const _0x26ded9=await this[_0x38a622(0x2aa)][_0x38a622(0x222)](_0x3e66fa),_0x2c1e56=_0x26ded9[_0x38a622(0x257)][_0x38a622(0x206)]()['replace'](/```json|```/g,'')[_0x38a622(0x1ac)](),_0x19e4c1=JSON['parse'](_0x2c1e56),_0x2bfb21={'timestamp':new Date()[_0x38a622(0x19c)](),'eventCount':this['rawEventLog'][_0x38a622(0x1fd)],'summary':_0x19e4c1['summary'],'activityLevel':_0x19e4c1[_0x38a622(0x1b1)],'systemMode':this[_0x38a622(0x2b8)],'health':{'sleepScore':_0x19e4c1[_0x38a622(0x17f)]?_0x19e4c1['health']['sleepScore']:0x0,'restlessness':_0x19e4c1[_0x38a622(0x17f)]?_0x19e4c1[_0x38a622(0x17f)][_0x38a622(0x301)]:_0x38a622(0x2c9)}};this[_0x38a622(0x1af)]['push'](_0x2bfb21),await this[_0x38a622(0x1da)](),this[_0x38a622(0x2bb)]=[],await this[_0x38a622(0x230)](),await this[_0x38a622(0x2f2)](LTM_DP_STATUS,{'val':_0x38a622(0x1b9),'ack':!![]}),this[_0x38a622(0x311)][_0x38a622(0x2b5)]('Daily\x20Digest\x20created\x20successfully.');}catch(_0x4322d7){this['log']['error'](_0x38a622(0x1aa)+_0x4322d7['message']),await this['setStateAsync'](LTM_DP_STATUS,{'val':_0x38a622(0x199)+_0x4322d7[_0x38a622(0x19a)],'ack':!![]});}}async['loadHistoryFromState'](){const _0x24c1c1=a0_0x4bc0f7;try{const _0xec23a9=await this[_0x24c1c1(0x265)](_0x24c1c1(0x21f));_0xec23a9&&_0xec23a9['val']&&(this[_0x24c1c1(0x266)]=JSON[_0x24c1c1(0x18d)](_0xec23a9[_0x24c1c1(0x21e)][_0x24c1c1(0x175)]()));}catch(_0x4003f2){this[_0x24c1c1(0x266)]=[];}try{const _0x558d3f=await this[_0x24c1c1(0x265)](_0x24c1c1(0x1ba));if(_0x558d3f&&_0x558d3f[_0x24c1c1(0x21e)])this[_0x24c1c1(0x2dc)]=JSON[_0x24c1c1(0x18d)](_0x558d3f['val'][_0x24c1c1(0x175)]());}catch(_0x2ad5d4){this[_0x24c1c1(0x2dc)]=[];}}async['createAllObjects'](){const _0x2b2b93=a0_0x4bc0f7;await this['checkSystemObjects'](),await this[_0x2b2b93(0x166)](_0x2b2b93(0x2ea),{'type':_0x2b2b93(0x16b),'common':{'name':_0x2b2b93(0x27a),'type':_0x2b2b93(0x1dc),'role':_0x2b2b93(0x20e),'read':!![],'write':![],'def':!![]},'native':{}}),await this[_0x2b2b93(0x166)](_0x2b2b93(0x27f),{'type':'state','common':{'name':'Last\x20raw\x20event','type':_0x2b2b93(0x1d9),'role':_0x2b2b93(0x246),'read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x2b2b93(0x21f),{'type':_0x2b2b93(0x16b),'common':{'name':_0x2b2b93(0x18c),'type':'string','role':_0x2b2b93(0x246),'read':!![],'write':![]},'native':{}}),await this[_0x2b2b93(0x166)]('analysis.trigger',{'type':_0x2b2b93(0x16b),'common':{'name':'Trigger\x20Analysis','type':_0x2b2b93(0x1dc),'role':_0x2b2b93(0x1cb),'read':!![],'write':!![],'def':![]},'native':{}}),await this[_0x2b2b93(0x166)](_0x2b2b93(0x241),{'type':_0x2b2b93(0x16b),'common':{'name':_0x2b2b93(0x23e),'type':_0x2b2b93(0x1d9),'role':_0x2b2b93(0x246),'read':!![],'write':![]},'native':{}}),await this[_0x2b2b93(0x166)](_0x2b2b93(0x2ff),{'type':_0x2b2b93(0x16b),'common':{'name':'AI\x20Alert\x20Status','type':_0x2b2b93(0x1dc),'role':_0x2b2b93(0x1eb),'read':!![],'write':![],'def':![]},'native':{}}),await this[_0x2b2b93(0x166)]('analysis.isEmergency',{'type':_0x2b2b93(0x16b),'common':{'name':'AI\x20Emergency\x20Status','type':_0x2b2b93(0x1dc),'role':_0x2b2b93(0x1e4),'read':!![],'write':![],'def':![]},'native':{}}),await this[_0x2b2b93(0x166)]('analysis.alertReason',{'type':_0x2b2b93(0x16b),'common':{'name':'Alert\x20Reason','type':_0x2b2b93(0x1d9),'role':_0x2b2b93(0x20a),'read':!![],'write':![]},'native':{}}),await this[_0x2b2b93(0x166)](_0x2b2b93(0x25f),{'type':_0x2b2b93(0x16b),'common':{'name':_0x2b2b93(0x300),'type':_0x2b2b93(0x1d9),'role':_0x2b2b93(0x206),'read':!![],'write':![]},'native':{}}),await this[_0x2b2b93(0x166)](_0x2b2b93(0x2e8),{'type':_0x2b2b93(0x16b),'common':{'name':_0x2b2b93(0x2ba),'type':'string','role':_0x2b2b93(0x16b),'read':!![],'write':![],'def':_0x2b2b93(0x2ad)},'native':{}}),await this[_0x2b2b93(0x166)](_0x2b2b93(0x171),{'type':_0x2b2b93(0x16b),'common':{'name':_0x2b2b93(0x2b7),'type':_0x2b2b93(0x1d9),'role':'text','read':!![],'write':![]},'native':{}}),await this[_0x2b2b93(0x166)](_0x2b2b93(0x193),{'type':_0x2b2b93(0x16b),'common':{'name':_0x2b2b93(0x1c8),'type':_0x2b2b93(0x1d9),'role':'text','read':!![],'write':![]},'native':{}}),await this[_0x2b2b93(0x2b2)](_0x2b2b93(0x27d),{'type':_0x2b2b93(0x2af),'common':{'name':'Automation\x20Proposals'},'native':{}}),await this[_0x2b2b93(0x166)](_0x2b2b93(0x26a),{'type':_0x2b2b93(0x16b),'common':{'name':_0x2b2b93(0x2ee),'type':_0x2b2b93(0x1dc),'role':'indicator','read':!![],'write':![],'def':![]},'native':{}}),await this[_0x2b2b93(0x166)](_0x2b2b93(0x229),{'type':_0x2b2b93(0x16b),'common':{'name':_0x2b2b93(0x2c7),'type':'string','role':'text','read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x2b2b93(0x18b),{'type':'state','common':{'name':'Action','type':_0x2b2b93(0x1d9),'role':_0x2b2b93(0x206),'read':!![],'write':![]},'native':{}}),await this[_0x2b2b93(0x166)](_0x2b2b93(0x1ba),{'type':_0x2b2b93(0x16b),'common':{'name':'Logbook','type':'string','role':_0x2b2b93(0x246),'read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x2b2b93(0x166)](_0x2b2b93(0x2ed),{'type':_0x2b2b93(0x16b),'common':{'name':_0x2b2b93(0x2cd),'type':_0x2b2b93(0x1d9),'role':'json','read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x2b2b93(0x2b2)](_0x2b2b93(0x26b),{'type':_0x2b2b93(0x2af),'common':{'name':_0x2b2b93(0x216)},'native':{}}),await this[_0x2b2b93(0x166)](_0x2b2b93(0x1c0),{'type':'state','common':{'name':_0x2b2b93(0x1f4),'type':_0x2b2b93(0x30b),'role':'value.health','read':!![],'write':![],'def':0x0},'native':{}}),await this['setObjectNotExistsAsync']('analysis.health.restlessness',{'type':_0x2b2b93(0x16b),'common':{'name':_0x2b2b93(0x2df),'type':'string','role':'text','read':!![],'write':![],'def':_0x2b2b93(0x2c9)},'native':{}}),await this[_0x2b2b93(0x166)]('analysis.health.notes',{'type':_0x2b2b93(0x16b),'common':{'name':_0x2b2b93(0x2e4),'type':_0x2b2b93(0x1d9),'role':_0x2b2b93(0x206),'read':!![],'write':![],'def':''},'native':{}}),await this[_0x2b2b93(0x26d)](),await this[_0x2b2b93(0x226)]();}async[a0_0x4bc0f7(0x2d0)](){const _0x12e688=a0_0x4bc0f7;await this[_0x12e688(0x2b2)](_0x12e688(0x259),{'type':_0x12e688(0x2af),'common':{'name':_0x12e688(0x2cb)},'native':{}}),await this[_0x12e688(0x2b2)](SYSTEM_DP_MODE,{'type':'state','common':{'name':_0x12e688(0x25a),'type':_0x12e688(0x1d9),'role':_0x12e688(0x16b),'read':!![],'write':!![],'def':SYSTEM_MODES[_0x12e688(0x2fe)],'states':{[SYSTEM_MODES[_0x12e688(0x2fe)]]:_0x12e688(0x1f2),[SYSTEM_MODES['VACATION']]:_0x12e688(0x1d8),[SYSTEM_MODES['PARTY']]:_0x12e688(0x1bb),[SYSTEM_MODES[_0x12e688(0x254)]]:'Gast'}},'native':{}});}async[a0_0x4bc0f7(0x2eb)](_0x5a4117,_0x47d59d=![],_0x5b2b8d=![]){const _0x1f23dc=a0_0x4bc0f7;this[_0x1f23dc(0x311)][_0x1f23dc(0x2b5)]((_0x47d59d?_0x1f23dc(0x1d7):'')+_0x1f23dc(0x2c4)+_0x5a4117+'\x22'+(_0x5b2b8d?_0x1f23dc(0x278):''));const _0x13f9be=this[_0x1f23dc(0x2fb)];let _0x320c9c=0x0;_0x13f9be[_0x1f23dc(0x220)]&&_0x13f9be[_0x1f23dc(0x310)]&&(await this[_0x1f23dc(0x268)](_0x13f9be[_0x1f23dc(0x310)],_0x1f23dc(0x2c0),{'text':_0x5a4117,'user':_0x13f9be['notifyTelegramRecipient']}),_0x320c9c++);if(_0x13f9be[_0x1f23dc(0x196)]&&_0x13f9be[_0x1f23dc(0x25d)]){let _0x5b17ac={'message':_0x5a4117,'title':_0x5b2b8d?_0x1f23dc(0x251):_0x1f23dc(0x177),'priority':_0x5b2b8d?0x2:0x1,'device':_0x13f9be[_0x1f23dc(0x2c1)]};_0x5b2b8d&&(_0x5b17ac[_0x1f23dc(0x28e)]=0x1e,_0x5b17ac[_0x1f23dc(0x2f8)]=0xe10,_0x5b17ac[_0x1f23dc(0x161)]=_0x1f23dc(0x19f)),await this['sendToAsync'](_0x13f9be['notifyPushoverInstance'],'send',_0x5b17ac),_0x320c9c++;}return _0x13f9be['notifyEmailEnabled']&&_0x13f9be[_0x1f23dc(0x2f5)]&&(await this['sendToAsync'](_0x13f9be[_0x1f23dc(0x2f5)],_0x1f23dc(0x2c0),{'text':_0x5a4117,'to':_0x13f9be[_0x1f23dc(0x239)]}),_0x320c9c++),_0x13f9be[_0x1f23dc(0x295)]&&_0x13f9be[_0x1f23dc(0x167)]&&(await this[_0x1f23dc(0x268)](_0x13f9be[_0x1f23dc(0x167)],_0x1f23dc(0x2c0),{'text':_0x5a4117,'phone':_0x13f9be[_0x1f23dc(0x2f7)]}),_0x320c9c++),_0x13f9be[_0x1f23dc(0x267)]&&_0x13f9be['notifySignalInstance']&&(await this[_0x1f23dc(0x268)](_0x13f9be['notifySignalInstance'],_0x1f23dc(0x2c0),{'text':_0x5a4117,'phone':_0x13f9be['notifySignalRecipient']}),_0x320c9c++),_0x320c9c;}async[a0_0x4bc0f7(0x2cf)](){const _0x61566a=a0_0x4bc0f7;try{const _0x579b8f=await this[_0x61566a(0x265)](LTM_DP_RAW_LOG);if(_0x579b8f&&_0x579b8f[_0x61566a(0x21e)])this[_0x61566a(0x2bb)]=JSON[_0x61566a(0x18d)](_0x579b8f[_0x61566a(0x21e)]);}catch(_0x5b8a53){this[_0x61566a(0x2bb)]=[];}}async['saveRawEventLog'](){const _0x3441f1=a0_0x4bc0f7;this[_0x3441f1(0x2bb)][_0x3441f1(0x1fd)]>RAW_LOG_MAX_SIZE&&this[_0x3441f1(0x2bb)][_0x3441f1(0x219)](0x0,this[_0x3441f1(0x2bb)]['length']-RAW_LOG_MAX_SIZE),await this[_0x3441f1(0x2f2)](LTM_DP_RAW_LOG,{'val':JSON[_0x3441f1(0x1e1)](this[_0x3441f1(0x2bb)]),'ack':!![]});}async[a0_0x4bc0f7(0x325)](){const _0x3c592d=a0_0x4bc0f7;try{const _0x34d277=await this['getStateAsync'](LTM_DP_DAILY_DIGESTS);if(_0x34d277&&_0x34d277['val'])this[_0x3c592d(0x1af)]=JSON[_0x3c592d(0x18d)](_0x34d277[_0x3c592d(0x21e)]);}catch(_0x4ccf58){this[_0x3c592d(0x1af)]=[];}await this[_0x3c592d(0x2bc)]();}async[a0_0x4bc0f7(0x1da)](_0x1bf04e=!![]){const _0x25628b=a0_0x4bc0f7,_0x3cf684=this['config']['ltmLtbWindowDays']||0x3c;this['dailyDigests']['length']>_0x3cf684&&this[_0x25628b(0x1af)][_0x25628b(0x219)](0x0,this['dailyDigests'][_0x25628b(0x1fd)]-_0x3cf684);await this[_0x25628b(0x2f2)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x25628b(0x1e1)](this[_0x25628b(0x1af)]),'ack':!![]});if(_0x1bf04e)await this[_0x25628b(0x2bc)]();}[a0_0x4bc0f7(0x1cf)](){const _0x53ceec=a0_0x4bc0f7;if(this[_0x53ceec(0x28d)])this['ltmJob'][_0x53ceec(0x29b)]();if(!this['isProVersion']){this['setStateAsync'](LTM_DP_STATUS,{'val':_0x53ceec(0x1de),'ack':!![]});return;}this[_0x53ceec(0x28d)]=schedule[_0x53ceec(0x302)](LTM_SCHEDULE,()=>this[_0x53ceec(0x2ec)]());}[a0_0x4bc0f7(0x205)](){const _0x5d5114=a0_0x4bc0f7;if(this[_0x5d5114(0x2ef)])clearInterval(this[_0x5d5114(0x2ef)]);if(!this[_0x5d5114(0x275)])return;this['driftAnalysisTimer']=setInterval(()=>this[_0x5d5114(0x21b)](),(this['config']['ltmDriftCheckIntervalHours']||0x18)*0x36ee80),setTimeout(()=>this[_0x5d5114(0x21b)](),0x1388);}async[a0_0x4bc0f7(0x236)](){const _0x1f86ec=a0_0x4bc0f7;await this['setStateAsync'](_0x1f86ec(0x25f),{'val':_0x1f86ec(0x322),'ack':!![]}),await this['setStateAsync']('analysis.deviationFromBaseline',{'val':this['isProVersion']?'N/A\x20(No\x20Activity)':_0x1f86ec(0x2c8),'ack':!![]}),await this['setStateAsync'](_0x1f86ec(0x2ff),{'val':![],'ack':!![]}),await this['setStateAsync']('analysis.isEmergency',{'val':![],'ack':!![]}),this[_0x1f86ec(0x264)]=![];}async['updateAnalysisHistory'](_0x44b229){const _0x309b0b=a0_0x4bc0f7;this[_0x309b0b(0x2dc)][_0x309b0b(0x2d6)](_0x44b229);if(this[_0x309b0b(0x2dc)][_0x309b0b(0x1fd)]>ANALYSIS_HISTORY_MAX_SIZE)this[_0x309b0b(0x2dc)][_0x309b0b(0x253)]();await this[_0x309b0b(0x2f2)](_0x309b0b(0x1ba),{'val':JSON[_0x309b0b(0x1e1)](this['analysisHistory']),'ack':!![]});}['setupModeResetScheduler'](){const _0x1b2f1d=a0_0x4bc0f7;if(this['modeResetJob'])this[_0x1b2f1d(0x284)]['cancel']();this[_0x1b2f1d(0x284)]=schedule['scheduleJob'](MODE_RESET_SCHEDULE,async()=>{const _0x548cfd=_0x1b2f1d;await this[_0x548cfd(0x2ce)](),AUTO_RESET_MODES[_0x548cfd(0x1cd)](this[_0x548cfd(0x2b8)])&&await this['setStateAsync'](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x548cfd(0x2fe)],'ack':![]});});}async[a0_0x4bc0f7(0x2bc)](){const _0x1d2370=a0_0x4bc0f7;if(!this[_0x1d2370(0x275)]){await this[_0x1d2370(0x2f2)](LTM_DP_BASELINE_STATUS,{'val':'Deaktiviert\x20(Pro-Feature)','ack':!![]});return;}const _0x57d446=this['dailyDigests']['length']>=(this[_0x1d2370(0x2fb)]['minDaysForBaseline']||0x7)?'Aktiv\x20('+this[_0x1d2370(0x1af)]['length']+_0x1d2370(0x1d1):'Lernphase\x20('+this['dailyDigests']['length']+'/'+(this[_0x1d2370(0x2fb)][_0x1d2370(0x2a1)]||0x7)+')';await this[_0x1d2370(0x2f2)](LTM_DP_BASELINE_STATUS,{'val':_0x57d446,'ack':!![]});}async['checkLtmObjects'](){const _0x2d1818=a0_0x4bc0f7;await this[_0x2d1818(0x2b2)]('LTM',{'type':_0x2d1818(0x2af),'common':{'name':_0x2d1818(0x2a4)},'native':{}}),await this[_0x2d1818(0x2b2)](LTM_DP_RAW_LOG,{'type':_0x2d1818(0x16b),'common':{'name':_0x2d1818(0x197),'type':_0x2d1818(0x1d9),'role':'json','read':!![],'write':![]},'native':{}}),await this[_0x2d1818(0x2b2)](LTM_DP_DAILY_DIGESTS,{'type':_0x2d1818(0x16b),'common':{'name':_0x2d1818(0x22f),'type':_0x2d1818(0x1d9),'role':_0x2d1818(0x246),'read':!![],'write':![]},'native':{}}),await this[_0x2d1818(0x2b2)](LTM_DP_STATUS,{'type':_0x2d1818(0x16b),'common':{'name':_0x2d1818(0x1a2),'type':_0x2d1818(0x1d9),'role':_0x2d1818(0x206),'read':!![],'write':![]},'native':{}}),await this[_0x2d1818(0x2b2)](LTM_DP_TRIGGER_DIGEST,{'type':'state','common':{'name':_0x2d1818(0x24e),'type':_0x2d1818(0x1dc),'role':_0x2d1818(0x1cb),'read':!![],'write':!![],'def':![]},'native':{}}),await this[_0x2d1818(0x2b2)](LTM_DP_BASELINE_STATUS,{'type':'state','common':{'name':_0x2d1818(0x200),'type':_0x2d1818(0x1d9),'role':_0x2d1818(0x206),'read':!![],'write':![]},'native':{}});}async[a0_0x4bc0f7(0x226)](){const _0x4de3f6=a0_0x4bc0f7;await this['extendObjectAsync'](LTM_DP_DRIFT_CHANNEL,{'type':_0x4de3f6(0x2af),'common':{'name':_0x4de3f6(0x16f)},'native':{}}),await this['extendObjectAsync'](LTM_DP_DRIFT_STATUS,{'type':'state','common':{'name':_0x4de3f6(0x1ee),'type':_0x4de3f6(0x1d9),'role':'state','read':!![],'write':![],'def':'N/A'},'native':{}}),await this['extendObjectAsync'](LTM_DP_DRIFT_DETAILS,{'type':_0x4de3f6(0x16b),'common':{'name':_0x4de3f6(0x168),'type':'string','role':'text','read':!![],'write':![]},'native':{}}),await this[_0x4de3f6(0x2b2)](LTM_DP_DRIFT_LAST_CHECK,{'type':_0x4de3f6(0x16b),'common':{'name':_0x4de3f6(0x2f6),'type':'number','role':_0x4de3f6(0x297),'read':!![],'write':![]},'native':{}});}async['runBaselineDriftAnalysis'](){const _0x526dc7=a0_0x4bc0f7;if(!this[_0x526dc7(0x275)]||!this[_0x526dc7(0x2aa)])return;const _0x15b352=this[_0x526dc7(0x2fb)][_0x526dc7(0x285)]||0xe;if(this[_0x526dc7(0x1af)]['length']<_0x15b352+(this[_0x526dc7(0x2fb)]['minDaysForBaseline']||0x7)){await this[_0x526dc7(0x2f2)](LTM_DP_DRIFT_STATUS,{'val':_0x526dc7(0x2db),'ack':!![]});return;}const _0x7ae05b=this[_0x526dc7(0x1af)][_0x526dc7(0x31b)](-_0x15b352),_0x2bb402=this[_0x526dc7(0x1af)][_0x526dc7(0x31b)](0x0,this[_0x526dc7(0x1af)]['length']-_0x15b352),_0xa129dc=_0x526dc7(0x172)+JSON['stringify'](_0x2bb402)+_0x526dc7(0x1d0)+JSON[_0x526dc7(0x1e1)](_0x7ae05b);try{const _0x8e4186=await this['geminiModel'][_0x526dc7(0x222)](_0xa129dc),_0x2fb153=JSON['parse'](_0x8e4186['response']['text']()[_0x526dc7(0x224)](/```json|```/g,'')[_0x526dc7(0x1ac)]());_0x2fb153[_0x526dc7(0x319)]&&(await this['setStateAsync'](LTM_DP_DRIFT_STATUS,{'val':_0x2fb153[_0x526dc7(0x319)],'ack':!![]}),await this['setStateAsync'](LTM_DP_DRIFT_DETAILS,{'val':_0x2fb153[_0x526dc7(0x242)],'ack':!![]}),await this['setStateAsync'](LTM_DP_DRIFT_LAST_CHECK,{'val':Date[_0x526dc7(0x16e)](),'ack':!![]}));}catch(_0xda0726){}}async['loadSystemMode'](){const _0x5a0e41=a0_0x4bc0f7;try{const _0x28ee69=await this[_0x5a0e41(0x265)](SYSTEM_DP_MODE);_0x28ee69&&_0x28ee69[_0x5a0e41(0x21e)]&&Object['values'](SYSTEM_MODES)[_0x5a0e41(0x1cd)](_0x28ee69[_0x5a0e41(0x21e)])?this[_0x5a0e41(0x2b8)]=_0x28ee69[_0x5a0e41(0x21e)]:(this[_0x5a0e41(0x2b8)]=SYSTEM_MODES[_0x5a0e41(0x2fe)],await this[_0x5a0e41(0x2f2)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x5a0e41(0x2fe)],'ack':!![]}));}catch(_0x4ab344){this[_0x5a0e41(0x2b8)]=SYSTEM_MODES[_0x5a0e41(0x2fe)];}}async[a0_0x4bc0f7(0x31d)](){const _0x3219c1=a0_0x4bc0f7;try{const _0x38d3a6=await this['getForeignObjectAsync'](_0x3219c1(0x22d));if(_0x38d3a6&&_0x38d3a6['native']&&_0x38d3a6[_0x3219c1(0x194)][_0x3219c1(0x240)])return _0x38d3a6[_0x3219c1(0x194)][_0x3219c1(0x240)];return'uuid-not-found';}catch(_0x381313){return _0x3219c1(0x252);}}async[a0_0x4bc0f7(0x192)](_0x2364e3){const _0x8271e3=a0_0x4bc0f7;if(!_0x2364e3)return![];this[_0x8271e3(0x303)]=await this[_0x8271e3(0x31d)]();if(_0x2364e3===_0x8271e3(0x1e5)||_0x2364e3[_0x8271e3(0x1bd)](_0x8271e3(0x218)))return!![];return![];}['onUnload'](_0x313bd2){const _0xc141dc=a0_0x4bc0f7;if(this['analysisTimer'])clearInterval(this[_0xc141dc(0x17e)]);if(this[_0xc141dc(0x2ef)])clearInterval(this[_0xc141dc(0x2ef)]);if(this[_0xc141dc(0x28d)])this[_0xc141dc(0x28d)][_0xc141dc(0x29b)]();if(this['modeResetJob'])this[_0xc141dc(0x284)][_0xc141dc(0x29b)]();if(this['exitTimer'])clearTimeout(this['exitTimer']);if(this[_0xc141dc(0x247)])clearTimeout(this[_0xc141dc(0x247)]);_0x313bd2();}async[a0_0x4bc0f7(0x2e0)](_0x581852){const _0x3e6398=a0_0x4bc0f7;if(typeof _0x581852===_0x3e6398(0x324)&&_0x581852['message']){if(_0x581852['command']===_0x3e6398(0x2e1)){if(!_0x581852[_0x3e6398(0x19a)][_0x3e6398(0x207)])return this[_0x3e6398(0x2a6)](_0x581852['from'],_0x581852[_0x3e6398(0x314)],{'success':![],'message':_0x3e6398(0x15d)},_0x581852[_0x3e6398(0x20c)]);try{const _0x1ddc2c=new GoogleGenerativeAI(_0x581852[_0x3e6398(0x19a)][_0x3e6398(0x207)])['getGenerativeModel']({'model':_0x3e6398(0x2be)});await _0x1ddc2c['generateContent'](_0x3e6398(0x225)),this[_0x3e6398(0x2a6)](_0x581852[_0x3e6398(0x1ce)],_0x581852[_0x3e6398(0x314)],{'success':!![],'message':_0x3e6398(0x2f0)},_0x581852[_0x3e6398(0x20c)]);}catch(_0x557002){this[_0x3e6398(0x2a6)](_0x581852[_0x3e6398(0x1ce)],_0x581852['command'],{'success':![],'message':_0x557002[_0x3e6398(0x19a)]},_0x581852['callback']);}}else{if(_0x581852['command']==='testNotification'){const _0x3320dd=await this['sendNotification'](_0x3e6398(0x1fa),!![]);this[_0x3e6398(0x2a6)](_0x581852[_0x3e6398(0x1ce)],_0x581852['command'],{'success':_0x3320dd>0x0,'message':_0x3320dd+_0x3e6398(0x1ec)},_0x581852[_0x3e6398(0x20c)]);}else{if(_0x581852[_0x3e6398(0x314)]==='getLtmData'){if(!this[_0x3e6398(0x275)])return this[_0x3e6398(0x2a6)](_0x581852['from'],_0x581852['command'],{'success':![],'isPro':![]},_0x581852[_0x3e6398(0x20c)]);let _0x5d411c={'status':_0x3e6398(0x2ad),'details':'','lastCheck':0x0};try{_0x5d411c[_0x3e6398(0x2fc)]=(await this[_0x3e6398(0x265)](LTM_DP_DRIFT_STATUS))[_0x3e6398(0x21e)],_0x5d411c['details']=(await this[_0x3e6398(0x265)](LTM_DP_DRIFT_DETAILS))['val'],_0x5d411c[_0x3e6398(0x1c6)]=(await this[_0x3e6398(0x265)](LTM_DP_DRIFT_LAST_CHECK))['val'];}catch(_0x45fa4d){}this[_0x3e6398(0x2a6)](_0x581852[_0x3e6398(0x1ce)],_0x581852[_0x3e6398(0x314)],{'success':!![],'isPro':!![],'dailyDigests':this[_0x3e6398(0x1af)],'driftAnalysis':_0x5d411c,'analysisHistory':this[_0x3e6398(0x2dc)]},_0x581852[_0x3e6398(0x20c)]);}else{if(_0x581852[_0x3e6398(0x314)]===_0x3e6398(0x211)){const _0x2b309c=await this[_0x3e6398(0x20d)]('enum.functions.*',_0x3e6398(0x1a1)),_0xfcaae3=[];if(_0x2b309c)for(const _0x4c3344 in _0x2b309c){const _0x440207=_0x2b309c[_0x4c3344],_0x71166b=(_0x440207[_0x3e6398(0x30d)]&&typeof _0x440207[_0x3e6398(0x30d)][_0x3e6398(0x1bf)]===_0x3e6398(0x324)?_0x440207[_0x3e6398(0x30d)]['name']['de']:_0x440207[_0x3e6398(0x30d)][_0x3e6398(0x1bf)])||_0x440207['common']['name'];_0xfcaae3[_0x3e6398(0x2a8)]({'id':_0x4c3344,'name':_0x71166b});}this['sendTo'](_0x581852[_0x3e6398(0x1ce)],_0x581852['command'],{'success':!![],'enums':_0xfcaae3},_0x581852[_0x3e6398(0x20c)]);}else{if(_0x581852['command']===_0x3e6398(0x281))try{const _0xff9ca3=await this[_0x3e6398(0x2e5)](_0x581852[_0x3e6398(0x19a)]||{});this[_0x3e6398(0x2a6)](_0x581852[_0x3e6398(0x1ce)],_0x581852['command'],{'success':!![],'devices':_0xff9ca3},_0x581852[_0x3e6398(0x20c)]);}catch(_0x2cb707){this[_0x3e6398(0x2a6)](_0x581852[_0x3e6398(0x1ce)],_0x581852[_0x3e6398(0x314)],{'success':![],'error':_0x2cb707[_0x3e6398(0x19a)]},_0x581852['callback']);}else{if(_0x581852[_0x3e6398(0x314)]===_0x3e6398(0x1a5)){const {historyId:_0x34746c,rating:_0x1876fa,comment:_0xd5cb6b,alertReason:_0x2f2432}=_0x581852[_0x3e6398(0x19a)];_0x34746c&&_0x1876fa?(await this[_0x3e6398(0x294)]({'timestamp':Date['now'](),'historyId':_0x34746c,'rating':_0x1876fa,'comment':_0xd5cb6b,'alertReason':_0x2f2432}),this[_0x3e6398(0x2a6)](_0x581852[_0x3e6398(0x1ce)],_0x581852[_0x3e6398(0x314)],{'success':!![]},_0x581852['callback'])):this[_0x3e6398(0x2a6)](_0x581852['from'],_0x581852[_0x3e6398(0x314)],{'success':![],'error':_0x3e6398(0x1cc)},_0x581852[_0x3e6398(0x20c)]);}}}}}}}}}function a0_0x326d(){const _0x3a9936=['sendToAsync','cogni-living\x20adapter\x20starting\x20(v','analysis.automation.patternDetected','analysis.health','generic','checkLtmObjects','CONFIG_PENDING','error','onReady','temperatur','ready','CONNECTION','analysis.health.restlessness','isProVersion','lampe','version','\x20(EMERGENCY)','eingang','Presence\x20Status','stateChange','history.','analysis.automation','FAULT','events.lastEvent','analysis.history_debug_04','scanDevices','value.temperature','checkWifiPresence','modeResetJob','ltmStbWindowDays','licht','Analysiere\x20ausgewogen\x20auf\x20Gesundheit,\x20Sicherheit\x20und\x20Komfort.','productname','effect','updateAnalysisHistory','isPresent','longitude','ltmJob','retry','üö®üö®\x20NOTFALL','LTM.triggerDailyDigest','wetter','colormode','\x0a!!!\x20END\x20WARNING\x20!!!\x0a','saveFeedback','notifyWhatsappEnabled','onStateChange','date','analysis.trigger','STICKY_UNREACH','\x0a\x20\x20\x20\x20\x20\x20\x20\x20INPUT:\x20','cancel','4968900ROVmOR','Fokus\x20auf\x20Familienroutinen,\x20Kindersicherheit\x20und\x20allgemeines\x20Haushaltsmanagement.','Baseline:\x20Inactive\x20(Pro\x20Feature).','presence','aiPersona','minDaysForBaseline','link_quality','occupancy','LTM','toLocaleString','sendTo','events.history_debug_03','push','\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20AUFGABE:\x20Analysiere\x20die\x20Events\x20auf\x20Aktivit√§t,\x20Komfort\x20und\x20GESUNDHEIT\x20(Schlaf/Unruhe).\x0a\x20\x20\x20\x20\x20\x20\x20\x20SCHEMA:\x20{\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22activity\x22:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22deviationFromBaseline\x22:\x20\x22string\x22,\x20\x22isAlert\x22:\x20bool,\x20\x22isEmergency\x22:\x20bool,\x20\x22alertReason\x22:\x20\x22string\x22\x20},\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22comfort\x22:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22suggestion\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22patternDetected\x22:\x20bool,\x20\x22description\x22:\x20\x22string\x22,\x20\x22suggestedAction\x22:\x20\x22string\x22\x20}\x20},\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22health\x22:\x20{\x20\x22sleepScore\x22:\x20number\x20(0-100,\x20100=perfekt,\x20sch√§tze\x20bei\x20Nachtdaten),\x20\x22restlessness\x22:\x20\x22none|low|medium|high\x22,\x20\x22notes\x22:\x20\x22string\x22\x20}\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20}','geminiModel','onUnload','bewegung','N/A','admin.','channel','RSSI','catch','extendObjectAsync','.\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20KONTEXT:\x20','LTM.dailyDigests','info','notes','Comfort\x20Summary','currentSystemMode','split','Deviation','rawEventLog','updateBaselineStatus','\x0aFEEDBACK:\x0a','models/gemini-flash-latest','.\x0a\x20\x20\x20\x20\x20\x20\x20\x20MODUS:\x20','send','notifyPushoverRecipient','enum.rooms.*','processSensorEvent','Sending\x20notification:\x20\x22','genAI','normal','Description','N/A\x20(Pro\x20Feature)','none','Fokus\x20auf\x20Maximierung\x20von\x20Komfort,\x20Automatisierungseffizienz\x20und\x20Energieeinsparung.','System\x20Status\x20&\x20Control','sort','Feedback\x20Log','loadSystemMode','loadRawEventLog','checkSystemObjects','1751500hwLHfw','analysis.history_debug_00','DUTYCYCLE','‚ö†Ô∏è\x20Alarm','66yQGefD','unshift','modelid','party','manufacturer','Creating\x20Daily\x20Digest\x20from\x20','N/A\x20(Learning)','analysisHistory','some','runGeminiAnalysis','Restlessness\x20Level','onMessage','testApiKey','analysis.alertReason','Starting\x20Smart\x20Scan\x20with\x20filters:\x20','Health\x20Notes','scanForDevices','lights','toLowerCase','analysis.deviationFromBaseline','wind','system.isPresent','sendNotification','createDailyDigest','analysis.feedbackHistory','Pattern\x20Detected','driftAnalysisTimer','Success','battery','setStateAsync','deviationFromBaseline','detectionState','notifyEmailInstance','Last\x20Check','notifyWhatsappRecipient','expire','subscribeStates','2-digit','config','status','Analysis\x20Error:\x20','NORMAL','analysis.isAlert','Activity\x20Summary','restlessness','scheduleJob','systemUUID','ROLLE:\x20Smart\x20Home\x20Analyst.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20AKTUELLE\x20ZEIT:\x20','namespace','capabilities','unknown','automationProposal','Schlafzimmer','createAllObjects','number','hue','common','devices','timestamp','notifyTelegramInstance','log','LOWBAT','location','command','activity','ON_TIME','abortExitTimer','signal','baselineDrift','patternDetected','slice','system.mode','getSystemUUID','enum.functions.*','switch.light','VIRTUAL_CHANNEL','latitude','No\x20recent\x20activity.','openweathermap.','object','loadDailyDigests','reachable','motion','Zu\x20wenig\x20Daten\x20f√ºr\x20Daily\x20Digest.','process','WiFi\x20Presence\x20detected\x20->\x20Aborting\x20Exit\x20Timer.\x20User\x20is\x20present.','mac\x20address','No\x20Key','livingContext','pressure','VACATION','sound','Subscribing\x20to\x20','search','Gemini\x20AI\x20initialized.','\x0a\x20\x20\x20\x20\x20\x20\x20\x20EVENTS:\x20','setObjectNotExistsAsync','notifyWhatsappInstance','Drift\x20Details','selectedFunctionIds','sensorLastValues','state','Analysiere\x20Tag...','Bewegung\x20w√§hrend\x20Exit-Timer\x20erkannt\x20->\x20Bewohner\x20ist\x20noch\x20da.','now','Drift\x20Analysis','value.humidity','analysis.comfortSummary','ROLLE:\x20Data\x20Scientist.\x20VERGLEICHE:\x20Dataset\x20A\x20(Recent)\x20vs\x20B\x20(Established).\x20ZIEL:\x20Erkenne\x20Drift.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aB\x20(LTB):\x0a','PARTY','analysis.history_debug_01','toString','_score','Cogni-Living\x20Alert','system.','PRIORIT√ÑT:\x20Sicherheit.\x20Erkenne\x20Eindringlinge,\x20ungew√∂hnliche\x20Anwesenheit.','ack','presenceDevices','material.','shutter_contact','analysisTimer','health','exitTimer','triggerDailyDigest','isExit','griff','Starting\x20Autopilot\x20(','guest','sleepScore','LTM.processingStatus','mode','startExitTimer','Bewegung','analysis.automation.suggestedAction','Event\x20History','parse','AES_KEY','0\x204\x20*\x20*\x20*','sensor.door','getForeignStateAsync','checkLicense','analysis.comfortSuggestion','native','LTM.rawEventLog','notifyPushoverEnabled','Raw\x20Log','accuweather.','Fehler:\x20','message','runAutopilot','toISOString','weatherunderground.','level.dimmer','siren','comfort','enum','Processing\x20Status','map','javascript.0.script','submitFeedback','Flur','LTM.driftAnalysis','yr.','unload','Daily\x20Digest\x20Error:\x20','LTM.driftAnalysis.driftDetails','trim','sensor.motion','Adapter','dailyDigests','online','activityLevel','update','setPresence','licenseKey','CRITICAL\x20WARNING:\x20No\x20sensor\x20activity\x20detected\x20for\x20','bind','Fenster/T√ºr','WORKING','Daily\x20Digest\x20erstellt\x20&\x20gespeichert.','analysis.analysisHistory','Party','level','startsWith','events.history_debug_00','name','analysis.health.sleepScore','haust√ºr','summary','schlaf','Rauchmelder','role','lastCheck','analysis.history_debug_03','Comfort\x20Suggestion','inactivityMonitoringEnabled','sensor.window','button','Missing\x20data','includes','from','setupLtmScheduler','\x0a\x0aA\x20(STB):\x0a','\x20Tage)','UNREACH','events.history_debug_02','icon','firmware','ERROR_CODE','[TEST]\x20','Urlaub','string','saveDailyDigests','Licht','boolean','ROLLE:\x20Data\x20Analyst.\x0a\x20\x20\x20\x20\x20\x20\x20\x20AUFGABE:\x20Fasse\x20den\x20heutigen\x20Tag\x20basierend\x20auf\x20den\x20Sensor-Logs\x20zusammen.\x0a\x20\x20\x20\x20\x20\x20\x20\x20PERSONA:\x20','Deaktiviert\x20(Pro-Feature)','archetype','No\x20recorded\x20events\x20yet.','stringify','temperature','Badezimmer','indicator.alarm.fire','TEST-PRO-KEY','\x20min).\x20Watchdog\x20Limit:\x20','1573936qkXufx','history','400rocYVJ','alertReason','indicator.alarm','\x20sent','\x20presence\x20devices...','Drift\x20Status','LTM.baselineStatus','Schalter/Licht','subscribeForeignStatesAsync','Normal','garten','Sleep\x20Score\x20(0-100)','write','last_seen','members','t√ºr','rating','[Test]\x20Notification','precip','DIRECTION','length','.\x0a\x20\x20\x20\x20\x20\x20\x20\x20','cogni-living','Baseline\x20Status','ERROR','daswetter.','PRIORIT√ÑT:\x20Gesundheit\x20und\x20Sicherheit\x20f√ºr\x20Senioren\x20(AAL).\x20Erkenne\x20Inaktivit√§t,\x20potenzielle\x20St√ºrze\x20(indirekt),\x20Schlafunterbrechungen\x20und\x20n√§chtliche\x20Unruhe.','\x0a!!!\x20EXTERNAL\x20SYSTEM\x20WARNING\x20!!!\x0a','setupDriftAnalysisScheduler','text','apiKey','weather','\x20hours.\x20The\x20resident\x20might\x20be\x20incapacitated.\x20Risk\x20level:\x20HIGH.','text.alarm','Temperatur','callback','getForeignObjectsAsync','indicator','exports','isAlert','getEnums','constructor','961261rnEWdo','16VtacLD','analysis.isEmergency','Health\x20&\x20Sleep\x20Analysis','1335249SXJmlC','PRO-','splice','systemConfig','runBaselineDriftAnalysis','analysis.history_debug_02','feedbackHistory','val','events.history','notifyTelegramEnabled','User\x20Feedback:\x20Alarm\x20\x22','generateContent','ALARM','replace','test','checkLtmDriftObjects','\x20sensors...','@iobroker/adapter-core','analysis.automation.description','type','suggestedAction','diele','system.meta.uuid','forecast','Daily\x20Digests','saveRawEventLog','de-DE','isEmergency','description','geminiApiKey','COMBINED_PARAMETER','resetAnalysisStates','LTM.driftAnalysis.lastCheck','toFixed','notifyEmailRecipient','events.history_debug_01','scriptProblem','rain','Nein','Last\x20Result','join','uuid','analysis.lastResult','driftDetails','inactivityThresholdHours','city','doors','json','exitGraceTimer','PROCESS','\x20raw\x20events...','Gemini\x20Init\x20Error:\x20','55074oMRamp','(((.+)+)+)+$','flur','Trigger\x20Digest','find','node-schedule','üö®\x20EMERGENCY','uuid-error','pop','GUEST','setState','.\x20PERSONA:\x20','response','Wohnzimmer','system','System\x20Mode','pr√§senz','isGracePeriodActive','notifyPushoverInstance','3669xJszkB','analysis.activitySummary','flot.','smoke','apply','info.','lastAlertState','getStateAsync','eventHistory','notifySignalEnabled'];a0_0x326d=function(){return _0x3a9936;};return a0_0x326d();}if(require['main']!==module)module[a0_0x4bc0f7(0x20f)]=_0x4aa086=>new CogniLiving(_0x4aa086);else new CogniLiving();