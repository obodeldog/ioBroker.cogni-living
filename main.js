const a0_0x13b0ab=a0_0x554c;(function(_0x63c2e3,_0x414035){const _0x4b3e05=a0_0x554c,_0x4c531d=_0x63c2e3();while(!![]){try{const _0x1fff5a=parseInt(_0x4b3e05(0x179))/0x1*(parseInt(_0x4b3e05(0x133))/0x2)+-parseInt(_0x4b3e05(0x16d))/0x3*(-parseInt(_0x4b3e05(0x1e4))/0x4)+parseInt(_0x4b3e05(0x149))/0x5*(-parseInt(_0x4b3e05(0x12f))/0x6)+parseInt(_0x4b3e05(0x1fb))/0x7+parseInt(_0x4b3e05(0x194))/0x8+parseInt(_0x4b3e05(0x1ae))/0x9+-parseInt(_0x4b3e05(0x162))/0xa;if(_0x1fff5a===_0x414035)break;else _0x4c531d['push'](_0x4c531d['shift']());}catch(_0x144cac){_0x4c531d['push'](_0x4c531d['shift']());}}}(a0_0x374b,0xea0f9));const a0_0x3a5284=(function(){let _0x5f5770=!![];return function(_0x3d0ecf,_0x3017e7){const _0x474afd=_0x5f5770?function(){const _0x900042=a0_0x554c;if(_0x3017e7){const _0x367a18=_0x3017e7[_0x900042(0x1dd)](_0x3d0ecf,arguments);return _0x3017e7=null,_0x367a18;}}:function(){};return _0x5f5770=![],_0x474afd;};}()),a0_0x796561=a0_0x3a5284(this,function(){const _0x1cdc1b=a0_0x554c;return a0_0x796561[_0x1cdc1b(0x156)]()[_0x1cdc1b(0x18b)]('(((.+)+)+)+$')[_0x1cdc1b(0x156)]()['constructor'](a0_0x796561)['search']('(((.+)+)+)+$');});a0_0x796561();function a0_0x374b(){const _0x52b946=['Kein\x20Kalender-Adapter','exitTimer','getEnums','add','map','name','timestamp','ltmJob','setupDriftAnalysisScheduler','minDaysForBaseline','response','getForeignObjectAsync','analysis.training.triggerHealth','values','Adapter','toLowerCase','floor','2132963fGYjEC','now','slice','checkAndInstall','driftAnalysisTimer','updateTopology','instance','lastAlertState','Kein\x20API\x20Key\x20Ã¼bergeben','768UFAFLO','SET_TOPOLOGY','getOverviewData','activityLevel','1030hPxTQE','presenceDevices','.communicate.request','Notification\x20Test\x20Failed:\x20','exports','bind','testApiKey','SYSTEM_DP_MODE','dependencyInstallInProgress','ANALYZE_TREND','pop','enum','createAllObjects','analysis.training.triggerEnergy','LTM.trainingData.thermodynamics','createDailyDigest','ðŸ””\x20Dies\x20ist\x20ein\x20Test\x20von\x20Cogni-Living.','from','updateLocation','calendarInstance','./lib/installer','briefingJob','58135AoVVew','.data.table','includes','_calName','ack','notifyTelegramInstance','getCalendarNames','application/json','main','analysis.training.triggerComfort','startSystem','Gemini\x20Init\x20Error:\x20','motion','toString','analysisTimer','getState','initZombies','ready','loadSystemMode','setupLtmScheduler','./lib/recorder','setupBriefingScheduler','log','./lib/setup','rawEventLog','18359710hMmMYG','common','SYSTEM_MODES','analysis.health.todayVector','triggerEnergyPrediction','systemConfig','version','ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...','LTM.dailyDigests','onMessage','message','309pzDgkO','initHistory','updated','text','LTM.rawEventLog','sendTo','./lib/python_bridge','currentSystemMode','models/gemini-flash-latest','command','val','Activity-Level','3435XppJmM','genAI','@iobroker/adapter-core','ANALYZE_GAIT','triggerBriefing','updateTopologyMatrix','getTime','setupModeResetScheduler','triggerDailyDigest','stringify','initSystemConfig','setHours','TRAIN_ENERGY','apiKey','join','devices','geminiApiKey','setState','search','testContext','matrix','Gemini\x20AI\x20initialized.','checkWifiPresence','send','getOutsideTemperatureNumeric','NORMAL','isProVersion','1879728SvZkOV','abortExitTimer','checkLicense','system.adapter.','info','setStateAsync','sendMorningBriefing','system.presenceWho','forEach','analysis.automation.autoApply','./lib/topology','startService','TRAIN_HEALTH','enum.functions.*','automation.triggerAction','stopService','getForeignObjectsAsync','getStateAsync','isPresent','isArray','analysisHistory','analysis.training.triggerSecurity','updateHealthVector','PYTHON_EXE','stateChange','Aktiv\x20(','847629KeVmqX','Test','PREDICT_ENERGY','config','runBaselineDriftAnalysis','type','getHours','fill','Verbindung\x20erfolgreich!','./lib/ai_agent','inactivityThresholdHours','analysis.trigger','temperature','callback','object','cancel','parse','subscribeStates','scanDevices','analysis.topology.structure','Standard','./lib/dead_man','eventHistory','onStateChange','onReady','getForeignStateAsync','Fehler:\x20','Kein\x20Wetter-Adapter','analysis.triggerBriefing','location','.system.mode','analysis.training.status','Instanz\x20nicht\x20gefunden','setPresence','Keine\x20Antwort\x20von\x20Gemini','endsWith','calendarName','geminiModel','getGenerativeModel','dailyDigests','cogni-living\x20adapter\x20starting\x20(v','./lib/scanner','triggerGaitAnalysis','runPythonHealthCheck','length','executeAutomationAction','runAutopilot','apply','push','TRAIN_COMFORT','exitGraceTimer','onUnload','system.mode','Verbunden','73012FuoVzx','LTM.trainingData.sequences','getMinutes','split','modeResetJob','error'];a0_0x374b=function(){return _0x52b946;};return a0_0x374b();}'use strict';const utils=require(a0_0x13b0ab(0x17b)),{GoogleGenerativeAI}=require('@google/generative-ai'),installer=require(a0_0x13b0ab(0x147)),scanner=require(a0_0x13b0ab(0x1d7)),schedulers=require('./lib/scheduler'),topology=require(a0_0x13b0ab(0x19e)),setup=require(a0_0x13b0ab(0x160)),recorder=require(a0_0x13b0ab(0x15d)),pythonBridge=require(a0_0x13b0ab(0x173)),aiAgent=require(a0_0x13b0ab(0x1b7)),deadMan=require(a0_0x13b0ab(0x1c3)),GEMINI_MODEL=a0_0x13b0ab(0x175),ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};function a0_0x554c(_0x3e5cd6,_0x26be01){const _0x57ee5f=a0_0x374b();return a0_0x554c=function(_0x796561,_0x3a5284){_0x796561=_0x796561-0x12f;let _0x374b67=_0x57ee5f[_0x796561];return _0x374b67;},a0_0x554c(_0x3e5cd6,_0x26be01);}class CogniLiving extends utils[a0_0x13b0ab(0x1f8)]{constructor(_0x109ecb){const _0x26f99a=a0_0x13b0ab;super({..._0x109ecb,'name':'cogni-living'}),this[_0x26f99a(0x1c4)]=[],this[_0x26f99a(0x1a8)]=[],this[_0x26f99a(0x161)]=[],this[_0x26f99a(0x1d5)]=[],this['sensorLastValues']={},this[_0x26f99a(0x167)]={'latitude':0x0,'longitude':0x0,'city':''},this['isPresent']=!![],this[_0x26f99a(0x1eb)]=null,this[_0x26f99a(0x1e0)]=null,this['isGracePeriodActive']=![],this[_0x26f99a(0x17a)]=null,this[_0x26f99a(0x1d3)]=null,this[_0x26f99a(0x174)]=setup[_0x26f99a(0x164)][_0x26f99a(0x192)],this[_0x26f99a(0x193)]=![],this[_0x26f99a(0x202)]=![],this[_0x26f99a(0x157)]=null,this[_0x26f99a(0x1f1)]=null,this['modeResetJob']=null,this[_0x26f99a(0x1ff)]=null,this[_0x26f99a(0x148)]=null,this[_0x26f99a(0x13b)]=![],this['on'](_0x26f99a(0x15a),this[_0x26f99a(0x1c6)][_0x26f99a(0x138)](this)),this['on'](_0x26f99a(0x1ac),this[_0x26f99a(0x1c5)][_0x26f99a(0x138)](this)),this['on']('unload',this['onUnload'][_0x26f99a(0x138)](this)),this['on'](_0x26f99a(0x16c),this[_0x26f99a(0x16b)]['bind'](this));}async[a0_0x13b0ab(0x1c6)](){const _0x5a21dd=a0_0x13b0ab;this[_0x5a21dd(0x15f)][_0x5a21dd(0x198)](_0x5a21dd(0x1d6)+this[_0x5a21dd(0x168)]+')\x20-\x20Phase\x20C\x20(Hardened)');if(!installer[_0x5a21dd(0x1fe)](this,()=>this[_0x5a21dd(0x153)]()))return;}async[a0_0x13b0ab(0x153)](){const _0x247d76=a0_0x13b0ab;await setup[_0x247d76(0x159)](this);try{this[_0x247d76(0x193)]=await setup[_0x247d76(0x196)](this[_0x247d76(0x1b1)]['licenseKey']);}catch(_0x2e14f0){}if(!this[_0x247d76(0x1b1)][_0x247d76(0x1b8)]||this[_0x247d76(0x1b1)][_0x247d76(0x1b8)]<0.1)this[_0x247d76(0x1b1)][_0x247d76(0x1b8)]=0xc;await setup[_0x247d76(0x16e)](this),await setup[_0x247d76(0x183)](this);if(this[_0x247d76(0x1b1)][_0x247d76(0x189)])try{this['genAI']=new GoogleGenerativeAI(this[_0x247d76(0x1b1)][_0x247d76(0x189)]),this[_0x247d76(0x1d3)]=this[_0x247d76(0x17a)][_0x247d76(0x1d4)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x247d76(0x150)}}),this[_0x247d76(0x15f)][_0x247d76(0x198)](_0x247d76(0x18e));}catch(_0x240b7a){this[_0x247d76(0x15f)][_0x247d76(0x1e9)](_0x247d76(0x154)+_0x240b7a[_0x247d76(0x16c)]);}await setup[_0x247d76(0x13f)](this),await this[_0x247d76(0x15b)]();try{const _0x286f26=await this['getStateAsync'](_0x247d76(0x171));if(_0x286f26&&_0x286f26[_0x247d76(0x177)])this['rawEventLog']=JSON[_0x247d76(0x1be)](_0x286f26['val']);}catch(_0x1f10e6){this[_0x247d76(0x161)]=[];}try{const _0x5a7c5d=await this['getStateAsync'](_0x247d76(0x16a));if(_0x5a7c5d&&_0x5a7c5d[_0x247d76(0x177)])this[_0x247d76(0x1d5)]=JSON[_0x247d76(0x1be)](_0x5a7c5d['val']);}catch(_0x6bfba1){this[_0x247d76(0x1d5)]=[];}const _0x3c2c8e=this[_0x247d76(0x1d5)][_0x247d76(0x1da)]>=(this[_0x247d76(0x1b1)]['minDaysForBaseline']||0x7)?_0x247d76(0x1ad)+this[_0x247d76(0x1d5)][_0x247d76(0x1da)]+'\x20Tage)':'Lernphase\x20('+this[_0x247d76(0x1d5)]['length']+'/'+(this[_0x247d76(0x1b1)][_0x247d76(0x1f3)]||0x7)+')';await this[_0x247d76(0x199)]('LTM.baselineStatus',{'val':_0x3c2c8e,'ack':!![]}),this[_0x247d76(0x1bf)](_0x247d76(0x1b9)),this['subscribeStates']('LTM.triggerDailyDigest'),this[_0x247d76(0x1bf)](_0x247d76(0x1e2)),this[_0x247d76(0x1bf)](_0x247d76(0x1ca)),this[_0x247d76(0x1bf)]('analysis.automation.triggerAction'),this[_0x247d76(0x1bf)](_0x247d76(0x19d)),this[_0x247d76(0x1bf)](_0x247d76(0x1a9)),this[_0x247d76(0x1bf)]('analysis.training.triggerHealth'),this[_0x247d76(0x1bf)]('analysis.training.triggerEnergy'),this[_0x247d76(0x1bf)](_0x247d76(0x152)),this[_0x247d76(0x1bf)]('analysis.training.triggerTopology');const _0x1d9131=this[_0x247d76(0x1b1)][_0x247d76(0x188)];if(_0x1d9131)for(const _0xb2813b of _0x1d9131){await this['subscribeForeignStatesAsync'](_0xb2813b['id']);}const _0x2afc71=this['config']['presenceDevices'];if(_0x2afc71)for(const _0x4e43d7 of _0x2afc71){await this['subscribeForeignStatesAsync'](_0x4e43d7);}if(this['config']['notifyTelegramEnabled']&&this[_0x247d76(0x1b1)][_0x247d76(0x14e)])await this['subscribeForeignStatesAsync'](this[_0x247d76(0x1b1)][_0x247d76(0x14e)]+_0x247d76(0x135));setTimeout(()=>this[_0x247d76(0x18f)](),0x1388);if(this[_0x247d76(0x157)])clearInterval(this[_0x247d76(0x157)]);const _0x58cbf4=this[_0x247d76(0x1b1)]['analysisInterval']||0xf;_0x58cbf4>0x0&&(this[_0x247d76(0x157)]=setInterval(()=>{const _0x438d0e=_0x247d76;this[_0x438d0e(0x1dc)]();},_0x58cbf4*0x3c*0x3e8)),schedulers[_0x247d76(0x15c)](this,()=>aiAgent[_0x247d76(0x142)](this,pythonBridge)),schedulers[_0x247d76(0x180)](this),schedulers[_0x247d76(0x1f2)](this,()=>aiAgent[_0x247d76(0x1b2)](this)),schedulers[_0x247d76(0x15e)](this,()=>aiAgent['sendMorningBriefing'](this)),pythonBridge[_0x247d76(0x19f)](this,installer[_0x247d76(0x1ab)]),setTimeout(async()=>{const _0x3c8636=_0x247d76;await topology[_0x3c8636(0x200)](this);try{const _0x449c1e=await this[_0x3c8636(0x1a5)](_0x3c8636(0x1c1));if(_0x449c1e&&_0x449c1e[_0x3c8636(0x177)])pythonBridge[_0x3c8636(0x190)](this,_0x3c8636(0x130),JSON['parse'](_0x449c1e[_0x3c8636(0x177)]));}catch(_0x19ff39){}this[_0x3c8636(0x1d9)](),this[_0x3c8636(0x1d8)](),this[_0x3c8636(0x166)](),this[_0x3c8636(0x1aa)]();},0x1388);}[a0_0x13b0ab(0x1e1)](_0x215067){const _0x238d0e=a0_0x13b0ab;if(this[_0x238d0e(0x157)])clearInterval(this[_0x238d0e(0x157)]);if(this[_0x238d0e(0x1ff)])clearInterval(this[_0x238d0e(0x1ff)]);if(this[_0x238d0e(0x1f1)])this['ltmJob'][_0x238d0e(0x1bd)]();if(this[_0x238d0e(0x1e8)])this[_0x238d0e(0x1e8)][_0x238d0e(0x1bd)]();if(this[_0x238d0e(0x148)])this[_0x238d0e(0x148)]['cancel']();recorder[_0x238d0e(0x195)](this),pythonBridge[_0x238d0e(0x1a3)](this),_0x215067();}async[a0_0x13b0ab(0x1c5)](_0x38fcfd,_0xc0d4be){const _0x5173a9=a0_0x13b0ab;if(!_0xc0d4be||this[_0x5173a9(0x13b)])return;if(_0x38fcfd[_0x5173a9(0x14b)]('telegram')&&_0x38fcfd[_0x5173a9(0x1d1)]('communicate.request')&&_0xc0d4be['val'])return;if(_0x38fcfd===this['namespace']+_0x5173a9(0x1cc)){if(_0xc0d4be[_0x5173a9(0x177)]&&Object[_0x5173a9(0x1f7)](setup[_0x5173a9(0x164)])[_0x5173a9(0x14b)](_0xc0d4be[_0x5173a9(0x177)])){this[_0x5173a9(0x174)]=_0xc0d4be['val'];if(_0xc0d4be[_0x5173a9(0x177)]===setup['SYSTEM_MODES']['VACATION'])await recorder[_0x5173a9(0x1cf)](this,![]);else await recorder[_0x5173a9(0x1cf)](this,!![]);}if(!_0xc0d4be['ack'])this[_0x5173a9(0x18a)](_0x38fcfd,{'val':this['currentSystemMode'],'ack':!![]});return;}if(!_0xc0d4be[_0x5173a9(0x14d)]){_0x38fcfd['includes'](_0x5173a9(0x1b9))&&_0xc0d4be[_0x5173a9(0x177)]&&(this['setState'](_0x38fcfd,{'val':![],'ack':!![]}),aiAgent['runGeminiAnalysis'](this));if(_0x38fcfd[_0x5173a9(0x14b)](_0x5173a9(0x181))&&_0xc0d4be[_0x5173a9(0x177)]){this[_0x5173a9(0x18a)](_0x38fcfd,{'val':![],'ack':!![]});if(this['isProVersion'])aiAgent[_0x5173a9(0x142)](this,pythonBridge);}_0x38fcfd[_0x5173a9(0x14b)](_0x5173a9(0x17d))&&_0xc0d4be[_0x5173a9(0x177)]&&(this[_0x5173a9(0x18a)](_0x38fcfd,{'val':![],'ack':!![]}),aiAgent[_0x5173a9(0x19a)](this));_0x38fcfd[_0x5173a9(0x14b)](_0x5173a9(0x1a2))&&_0xc0d4be[_0x5173a9(0x177)]&&(this[_0x5173a9(0x18a)](_0x38fcfd,{'val':![],'ack':!![]}),aiAgent[_0x5173a9(0x1db)](this));if(_0x38fcfd['includes'](_0x5173a9(0x1a9))&&_0xc0d4be[_0x5173a9(0x177)]){this[_0x5173a9(0x18a)](_0x38fcfd,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x2f5737=await this[_0x5173a9(0x1a5)](_0x5173a9(0x1e5));if(_0x2f5737&&_0x2f5737['val']){const _0x40a111=JSON[_0x5173a9(0x1be)](_0x2f5737[_0x5173a9(0x177)]);this[_0x5173a9(0x199)](_0x5173a9(0x1cd),{'val':'Sec-Training\x20started...','ack':!![]}),pythonBridge[_0x5173a9(0x190)](this,'TRAIN_SECURITY',{'sequences':_0x40a111});}}catch(_0x1d56d5){}}if(_0x38fcfd['includes'](_0x5173a9(0x1f6))&&_0xc0d4be[_0x5173a9(0x177)]){this[_0x5173a9(0x18a)](_0x38fcfd,{'val':![],'ack':!![]});if(this[_0x5173a9(0x193)])try{const _0x2aa86f=await this[_0x5173a9(0x1a5)](_0x5173a9(0x16a));if(_0x2aa86f&&_0x2aa86f['val'])pythonBridge[_0x5173a9(0x190)](this,_0x5173a9(0x1a0),{'digests':JSON['parse'](_0x2aa86f[_0x5173a9(0x177)])});}catch(_0x29e537){}}if(_0x38fcfd[_0x5173a9(0x14b)](_0x5173a9(0x140))&&_0xc0d4be[_0x5173a9(0x177)]){this[_0x5173a9(0x18a)](_0x38fcfd,{'val':![],'ack':!![]});if(this[_0x5173a9(0x193)])try{const _0x336a86=await this[_0x5173a9(0x1a5)](_0x5173a9(0x141));if(_0x336a86&&_0x336a86[_0x5173a9(0x177)])pythonBridge[_0x5173a9(0x190)](this,_0x5173a9(0x185),{'points':JSON[_0x5173a9(0x1be)](_0x336a86[_0x5173a9(0x177)])});}catch(_0x49afe5){}}if(_0x38fcfd[_0x5173a9(0x14b)](_0x5173a9(0x152))&&_0xc0d4be[_0x5173a9(0x177)]){this[_0x5173a9(0x18a)](_0x38fcfd,{'val':![],'ack':!![]});if(this[_0x5173a9(0x193)])try{const _0x25a1a3=await this['getStateAsync'](_0x5173a9(0x171));if(_0x25a1a3&&_0x25a1a3[_0x5173a9(0x177)])pythonBridge[_0x5173a9(0x190)](this,_0x5173a9(0x1df),{'events':JSON[_0x5173a9(0x1be)](_0x25a1a3[_0x5173a9(0x177)])});}catch(_0x19f3c9){}}_0x38fcfd[_0x5173a9(0x14b)]('analysis.training.triggerTopology')&&_0xc0d4be[_0x5173a9(0x177)]&&(this[_0x5173a9(0x18a)](_0x38fcfd,{'val':![],'ack':!![]}),topology[_0x5173a9(0x200)](this));return;}if(this[_0x5173a9(0x1b1)][_0x5173a9(0x134)]&&this['config'][_0x5173a9(0x134)][_0x5173a9(0x14b)](_0x38fcfd)){await this[_0x5173a9(0x18f)]();return;}const _0x29175e=(this['config']['devices']||[])['find'](_0x3841fd=>_0x3841fd['id']===_0x38fcfd);if(_0x29175e){const _0x50ce0c=await recorder['processSensorEvent'](this,_0x38fcfd,_0xc0d4be,_0x29175e);_0x50ce0c&&_0x50ce0c[_0x5173a9(0x1b3)]===_0x5173a9(0x155)&&_0x50ce0c[_0x5173a9(0x1cb)]&&this['isProVersion']&&deadMan[_0x5173a9(0x145)](this,_0x50ce0c[_0x5173a9(0x1cb)]);}}async['onMessage'](_0x152710){const _0x22e7ef=a0_0x13b0ab;if(typeof _0x152710===_0x22e7ef(0x1bc)&&_0x152710['message']){if(_0x152710[_0x22e7ef(0x176)]===_0x22e7ef(0x139))try{const _0x3bc5eb=_0x152710[_0x22e7ef(0x16c)][_0x22e7ef(0x186)];if(!_0x3bc5eb)throw new Error(_0x22e7ef(0x203));const _0x3b623c=new GoogleGenerativeAI(_0x3bc5eb),_0x1553f8=_0x3b623c['getGenerativeModel']({'model':GEMINI_MODEL}),_0x2d6b23=await _0x1553f8['generateContent'](_0x22e7ef(0x1af)),_0x5ef45a=await _0x2d6b23[_0x22e7ef(0x1f4)];if(_0x5ef45a[_0x22e7ef(0x170)]())this[_0x22e7ef(0x172)](_0x152710[_0x22e7ef(0x144)],_0x152710[_0x22e7ef(0x176)],{'success':!![],'message':_0x22e7ef(0x1b6)},_0x152710[_0x22e7ef(0x1bb)]);else throw new Error(_0x22e7ef(0x1d0));}catch(_0x56cc8c){this[_0x22e7ef(0x172)](_0x152710[_0x22e7ef(0x144)],_0x152710[_0x22e7ef(0x176)],{'success':![],'message':_0x56cc8c[_0x22e7ef(0x16c)]},_0x152710['callback']);}else{if(_0x152710['command']===_0x22e7ef(0x1c0))try{const _0x48f18f=await scanner['scanForDevices'](this,_0x152710['message']||{});this[_0x22e7ef(0x172)](_0x152710['from'],_0x152710['command'],{'success':!![],'devices':_0x48f18f},_0x152710[_0x22e7ef(0x1bb)]);}catch(_0x466638){this['sendTo'](_0x152710[_0x22e7ef(0x144)],_0x152710['command'],{'success':![],'error':_0x466638['message']},_0x152710[_0x22e7ef(0x1bb)]);}else{if(_0x152710['command']===_0x22e7ef(0x17e))try{const {matrix:_0x321d8f}=_0x152710[_0x22e7ef(0x16c)],_0x12398c=await this[_0x22e7ef(0x1a5)](_0x22e7ef(0x1c1));if(_0x12398c&&_0x12398c[_0x22e7ef(0x177)]){const _0x302a7e=JSON[_0x22e7ef(0x1be)](_0x12398c[_0x22e7ef(0x177)]);_0x302a7e[_0x22e7ef(0x18d)]=_0x321d8f,_0x302a7e[_0x22e7ef(0x16f)]=Date[_0x22e7ef(0x1fc)](),await this['setStateAsync'](_0x22e7ef(0x1c1),{'val':JSON[_0x22e7ef(0x182)](_0x302a7e),'ack':!![]}),pythonBridge[_0x22e7ef(0x190)](this,_0x22e7ef(0x130),_0x302a7e);}this[_0x22e7ef(0x172)](_0x152710[_0x22e7ef(0x144)],_0x152710['command'],{'success':!![]},_0x152710[_0x22e7ef(0x1bb)]);}catch(_0x128e4a){this['log'][_0x22e7ef(0x1e9)](_0x128e4a);}else{if(_0x152710[_0x22e7ef(0x176)]==='getLtmData')this[_0x22e7ef(0x172)](_0x152710['from'],_0x152710[_0x22e7ef(0x176)],{'success':!![],'dailyDigests':this['dailyDigests']||[],'analysisHistory':this[_0x22e7ef(0x1a8)]||[]},_0x152710[_0x22e7ef(0x1bb)]);else{if(_0x152710['command']===_0x22e7ef(0x131)){const _0x2ab80e=this[_0x22e7ef(0x1d5)][_0x22e7ef(0x1da)],_0x33cb3e=new Array(0x18)['fill'](0x0),_0x48d503=new Date()['setHours'](0x0,0x0,0x0,0x0);this[_0x22e7ef(0x1c4)]&&this[_0x22e7ef(0x1c4)][_0x22e7ef(0x19c)](_0x48e487=>{const _0x12bc75=_0x22e7ef;if(_0x48e487[_0x12bc75(0x1f0)]>=_0x48d503){const _0x4b76b7=new Date(_0x48e487['timestamp'])[_0x12bc75(0x1b4)]();if(_0x4b76b7>=0x0&&_0x4b76b7<0x18)_0x33cb3e[_0x4b76b7]++;}}),this[_0x22e7ef(0x172)](_0x152710[_0x22e7ef(0x144)],_0x152710[_0x22e7ef(0x176)],{'success':!![],'eventHistory':this[_0x22e7ef(0x1c4)][_0x22e7ef(0x1fd)](0x0,0xf),'stats':{'digestCount':_0x2ab80e,'isPresent':this['isPresent'],'hourlyActivity':_0x33cb3e},'automation':{'detected':![]}},_0x152710['callback']);}else{if(_0x152710['command']===_0x22e7ef(0x1ec)){const _0x3fa513=await this[_0x22e7ef(0x1a4)](_0x22e7ef(0x1a1),_0x22e7ef(0x13e)),_0x52ebd7=[];if(_0x3fa513)for(const _0xa13c80 in _0x3fa513){const _0x1f7b93=_0x3fa513[_0xa13c80],_0x4ccc64=(_0x1f7b93[_0x22e7ef(0x163)]&&typeof _0x1f7b93[_0x22e7ef(0x163)]['name']===_0x22e7ef(0x1bc)?_0x1f7b93[_0x22e7ef(0x163)][_0x22e7ef(0x1ef)]['de']:_0x1f7b93[_0x22e7ef(0x163)]['name'])||_0x1f7b93[_0x22e7ef(0x163)][_0x22e7ef(0x1ef)];_0x52ebd7[_0x22e7ef(0x1de)]({'id':_0xa13c80,'name':_0x4ccc64});}const _0x3062f0=await this[_0x22e7ef(0x1a4)]('enum.rooms.*','enum'),_0x59c785=[];if(_0x3062f0)for(const _0x36e9c7 in _0x3062f0){const _0xf968f0=_0x3062f0[_0x36e9c7],_0x36fe7c=(_0xf968f0['common']&&typeof _0xf968f0[_0x22e7ef(0x163)]['name']===_0x22e7ef(0x1bc)?_0xf968f0[_0x22e7ef(0x163)][_0x22e7ef(0x1ef)]['de']:_0xf968f0[_0x22e7ef(0x163)][_0x22e7ef(0x1ef)])||_0x36e9c7[_0x22e7ef(0x1e7)]('.')[_0x22e7ef(0x13d)]();_0x59c785[_0x22e7ef(0x1de)](_0x36fe7c);}this[_0x22e7ef(0x172)](_0x152710[_0x22e7ef(0x144)],_0x152710[_0x22e7ef(0x176)],{'success':!![],'enums':_0x52ebd7,'rooms':_0x59c785},_0x152710[_0x22e7ef(0x1bb)]);}else{if(_0x152710[_0x22e7ef(0x176)]===_0x22e7ef(0x18c))try{let _0x1b4f63=_0x22e7ef(0x1c9),_0x556d51=_0x22e7ef(0x1ea);if(this[_0x22e7ef(0x1b1)]['weatherInstance']){const _0x2a4e96=await recorder[_0x22e7ef(0x191)](this);_0x1b4f63=_0x2a4e96!==null?_0x2a4e96+'Â°C':'Daten\x20nicht\x20verfÃ¼gbar';}if(this[_0x22e7ef(0x1b1)][_0x22e7ef(0x146)]){const _0x384d48=await this[_0x22e7ef(0x1f5)](_0x22e7ef(0x197)+this['config'][_0x22e7ef(0x146)]);_0x556d51=_0x384d48?_0x22e7ef(0x1e3):_0x22e7ef(0x1ce);}this['sendTo'](_0x152710['from'],_0x152710[_0x22e7ef(0x176)],{'success':!![],'weather':_0x1b4f63,'calendar':_0x556d51},_0x152710['callback']);}catch(_0x4eac7c){this[_0x22e7ef(0x172)](_0x152710[_0x22e7ef(0x144)],_0x152710[_0x22e7ef(0x176)],{'success':![],'error':_0x4eac7c[_0x22e7ef(0x16c)]},_0x152710[_0x22e7ef(0x1bb)]);}else{if(_0x152710[_0x22e7ef(0x176)]===_0x22e7ef(0x14f))try{const _0x38b23d=_0x152710['message'][_0x22e7ef(0x201)],_0xb066d1=await this[_0x22e7ef(0x1c7)](_0x38b23d+_0x22e7ef(0x14a));let _0x508f6f=[];if(_0xb066d1&&_0xb066d1['val']){const _0x52d47d=JSON[_0x22e7ef(0x1be)](_0xb066d1[_0x22e7ef(0x177)]),_0x5cbc6b=new Set();Array[_0x22e7ef(0x1a7)](_0x52d47d)&&_0x52d47d[_0x22e7ef(0x19c)](_0x37827d=>{const _0x25641b=_0x22e7ef;if(_0x37827d[_0x25641b(0x14c)])_0x5cbc6b[_0x25641b(0x1ed)](_0x37827d['_calName']);else{if(_0x37827d[_0x25641b(0x1d2)])_0x5cbc6b['add'](_0x37827d[_0x25641b(0x1d2)]);}}),_0x508f6f=Array['from'](_0x5cbc6b)['sort']();}if(_0x508f6f[_0x22e7ef(0x1da)]===0x0)_0x508f6f=[_0x22e7ef(0x1c2)];this['sendTo'](_0x152710['from'],_0x152710['command'],{'success':!![],'names':_0x508f6f},_0x152710['callback']);}catch(_0x3389fe){this['sendTo'](_0x152710[_0x22e7ef(0x144)],_0x152710[_0x22e7ef(0x176)],{'success':![],'error':_0x3389fe[_0x22e7ef(0x16c)]},_0x152710[_0x22e7ef(0x1bb)]);}else{if(_0x152710['command']==='testNotification')try{await setup['sendNotification'](this,_0x22e7ef(0x143),![],![]),this[_0x22e7ef(0x172)](_0x152710[_0x22e7ef(0x144)],_0x152710[_0x22e7ef(0x176)],{'success':!![],'message':'Gesendet'},_0x152710['callback']);}catch(_0x439fde){this['log']['error'](_0x22e7ef(0x136)+_0x439fde[_0x22e7ef(0x16c)]),this[_0x22e7ef(0x172)](_0x152710[_0x22e7ef(0x144)],_0x152710['command'],{'success':![],'message':_0x22e7ef(0x1c8)+_0x439fde[_0x22e7ef(0x16c)]},_0x152710[_0x22e7ef(0x1bb)]);}}}}}}}}}}}async['loadSystemMode'](){const _0x27b3ad=a0_0x13b0ab;try{const _0x51f797=await this[_0x27b3ad(0x1a5)](setup[_0x27b3ad(0x13a)]);_0x51f797&&_0x51f797[_0x27b3ad(0x177)]&&Object['values'](setup[_0x27b3ad(0x164)])[_0x27b3ad(0x14b)](_0x51f797['val'])?this[_0x27b3ad(0x174)]=_0x51f797[_0x27b3ad(0x177)]:(this['currentSystemMode']=setup['SYSTEM_MODES'][_0x27b3ad(0x192)],await this[_0x27b3ad(0x199)](setup[_0x27b3ad(0x13a)],{'val':setup[_0x27b3ad(0x164)][_0x27b3ad(0x192)],'ack':!![]}));}catch(_0xb796af){this[_0x27b3ad(0x174)]=setup[_0x27b3ad(0x164)][_0x27b3ad(0x192)];}}async[a0_0x13b0ab(0x18f)](){const _0x42391f=a0_0x13b0ab;try{const _0x3f06a7=this[_0x42391f(0x1b1)][_0x42391f(0x134)]||[];let _0x304178=![];const _0x4131db=[];for(const _0x53f237 of _0x3f06a7){try{const _0x167a6b=await this['getForeignStateAsync'](_0x53f237);_0x167a6b&&(_0x167a6b[_0x42391f(0x177)]===!![]||_0x167a6b[_0x42391f(0x177)]==='online'||_0x167a6b[_0x42391f(0x177)]===0x1)&&(_0x304178=!![],_0x4131db[_0x42391f(0x1de)](_0x53f237));}catch(_0x16b3ae){}}return await this[_0x42391f(0x199)](_0x42391f(0x19b),{'val':_0x4131db[_0x42391f(0x187)](',\x20'),'ack':!![]}),_0x304178&&(this[_0x42391f(0x1eb)]&&(this[_0x42391f(0x15f)][_0x42391f(0x198)]('WiFi\x20Presence\x20detected.'),recorder[_0x42391f(0x195)](this)),!this[_0x42391f(0x1a6)]&&this[_0x42391f(0x174)]===setup[_0x42391f(0x164)][_0x42391f(0x192)]&&await recorder[_0x42391f(0x1cf)](this,!![])),_0x304178;}catch(_0x38b5ee){return![];}}async[a0_0x13b0ab(0x1dc)](){const _0x580939=a0_0x13b0ab;this['log']['debug'](_0x580939(0x169)),await aiAgent['runGeminiAnalysis'](this),this[_0x580939(0x1aa)](),this[_0x580939(0x1d8)](),this['triggerEnergyPrediction']();}['triggerGaitAnalysis'](){const _0x19d556=a0_0x13b0ab;if(!this[_0x19d556(0x193)])return;try{this[_0x19d556(0x158)](_0x19d556(0x1e5),(_0x448d1e,_0x2f85db)=>{const _0xb9c587=_0x19d556;_0x2f85db&&_0x2f85db[_0xb9c587(0x177)]&&pythonBridge[_0xb9c587(0x190)](this,_0xb9c587(0x17c),{'sequences':JSON[_0xb9c587(0x1be)](_0x2f85db['val'])});});}catch(_0x46ba4b){}}async[a0_0x13b0ab(0x166)](){const _0x3581c7=a0_0x13b0ab;if(!this[_0x3581c7(0x193)])return;try{const _0x3f1f2b=await recorder[_0x3581c7(0x191)](this);if(_0x3f1f2b===null)return;const _0x5449ea={},_0x26fd74=this[_0x3581c7(0x1b1)]['devices']||[];for(const _0xa68fef of _0x26fd74){if(_0xa68fef['type']===_0x3581c7(0x1ba)&&_0xa68fef['location']){const _0x180f21=this['sensorLastValues'][_0xa68fef['id']];if(_0x180f21!==undefined)_0x5449ea[_0xa68fef[_0x3581c7(0x1cb)]]=_0x180f21;}}Object['keys'](_0x5449ea)[_0x3581c7(0x1da)]>0x0&&pythonBridge[_0x3581c7(0x190)](this,_0x3581c7(0x1b0),{'current_temps':_0x5449ea,'t_out':_0x3f1f2b});}catch(_0x22c663){}}[a0_0x13b0ab(0x1aa)](){const _0x1d4ecd=a0_0x13b0ab;if(!this[_0x1d4ecd(0x161)]||this['rawEventLog'][_0x1d4ecd(0x1da)]===0x0)return;const _0x3fc342=new Array(0x60)[_0x1d4ecd(0x1b5)](0x0),_0x2306e7=new Date()[_0x1d4ecd(0x184)](0x0,0x0,0x0,0x0);this[_0x1d4ecd(0x161)][_0x1d4ecd(0x19c)](_0x50b92d=>{const _0xcfebe=_0x1d4ecd,_0x58c056=new Date(_0x50b92d[_0xcfebe(0x1f0)]);if(_0x58c056[_0xcfebe(0x17f)]()>=_0x2306e7){const _0x2fb420=_0x58c056['getHours'](),_0x5c2aae=_0x58c056[_0xcfebe(0x1e6)](),_0x1c9667=_0x2fb420*0x4+Math[_0xcfebe(0x1fa)](_0x5c2aae/0xf);if(_0x1c9667>=0x0&&_0x1c9667<0x60)_0x3fc342[_0x1c9667]++;}}),this[_0x1d4ecd(0x199)](_0x1d4ecd(0x165),{'val':JSON[_0x1d4ecd(0x182)](_0x3fc342),'ack':!![]});}[a0_0x13b0ab(0x1d9)](){const _0x2e6b33=a0_0x13b0ab;if(!this['dailyDigests']||this[_0x2e6b33(0x1d5)][_0x2e6b33(0x1da)]<0x2)return;const _0x27541c=this[_0x2e6b33(0x1d5)][_0x2e6b33(0x1ee)](_0x488865=>{const _0x590e54=_0x2e6b33,_0x20a779=(_0x488865[_0x590e54(0x132)]||'')[_0x590e54(0x1f9)]();return ACTIVITY_LEVEL_MAP[_0x20a779]||0x32;});pythonBridge[_0x2e6b33(0x190)](this,_0x2e6b33(0x13c),{'values':_0x27541c,'tag':_0x2e6b33(0x178)});}}if(require[a0_0x13b0ab(0x151)]!==module)module[a0_0x13b0ab(0x137)]=_0x1a3561=>new CogniLiving(_0x1a3561);else new CogniLiving();