const a0_0x59e7c1=a0_0x45a4;function a0_0x45a4(_0x5a8fe1,_0x31a466){const _0x4fc012=a0_0x32e2();return a0_0x45a4=function(_0x2b2020,_0x53fdf2){_0x2b2020=_0x2b2020-0x99;let _0x32e23c=_0x4fc012[_0x2b2020];return _0x32e23c;},a0_0x45a4(_0x5a8fe1,_0x31a466);}(function(_0x273e10,_0x29eeef){const _0x1ccfc6=a0_0x45a4,_0x54764c=_0x273e10();while(!![]){try{const _0x1b699b=parseInt(_0x1ccfc6(0x22b))/0x1*(-parseInt(_0x1ccfc6(0x199))/0x2)+parseInt(_0x1ccfc6(0x192))/0x3+-parseInt(_0x1ccfc6(0x1f5))/0x4*(parseInt(_0x1ccfc6(0x140))/0x5)+-parseInt(_0x1ccfc6(0x19e))/0x6+parseInt(_0x1ccfc6(0x11f))/0x7+parseInt(_0x1ccfc6(0x124))/0x8*(-parseInt(_0x1ccfc6(0x157))/0x9)+parseInt(_0x1ccfc6(0x226))/0xa*(parseInt(_0x1ccfc6(0x146))/0xb);if(_0x1b699b===_0x29eeef)break;else _0x54764c['push'](_0x54764c['shift']());}catch(_0x36e8c1){_0x54764c['push'](_0x54764c['shift']());}}}(a0_0x32e2,0x58af2));function a0_0x32e2(){const _0x13b6fe=['dailyDigests','notifySignalInstance','modeResetJob','LTM.driftAnalysis.baselineDrift','analysis.automation.suggestedAction','history','normal','Drift\x20Status','submitFeedback','Rauchmelder','replace','capabilities','patternDetected','detectionState','sensor.motion','ltmDriftCheckIntervalHours','send','system.mode','setStateAsync','getEnums','axios','link_quality','string','extendObjectAsync','now','setupModeResetScheduler','onReady','1.\x20ANALYSE:\x20Bewerte\x20Sensor-Events.\x20deviation=\x27N/A\x27.','DUTYCYCLE','ERROR_CODE','\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x202.\x20AUTOMATION:\x20patternDetected=true/false.\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20EVENTS:\x20','response','details','models/gemini-flash-latest','Activity\x20Summary','button','updateBaselineStatus','K√ºche','sensor.window','slice','ack','\x22\x20at\x20','diele','Pro\x20Feature','N/A','No\x20recent\x20activity.','doors','productname','\x20min).','setupDriftAnalysisScheduler','rain','175959vlhOKO','PROCESS','No\x20Key','.bri','Aktiv\x20(','licenseKey','vis.','910304pIkrXz','STICKY_UNREACH','Licht','driftDetails','catch','2628714Euwlfm','ERROR','notifyEmailEnabled','Gemini\x20Init\x20Error:\x20','splice','Success','error','uuid','endsWith','cogni-living','getForeignStateAsync','length','scanForDevices','max','0\x204\x20*\x20*\x20*','level','sat','LTM.dailyDigests','sendTo','split','version','(((.+)+)+)+$','toUpperCase','runBaselineDriftAnalysis','precip','Baseline:\x20Inactive.','Loaded\x20Enums:\x20','Lizenzpr√ºfung\x20gestartet\x20f√ºr\x20System-UUID:\x20','loadSystemMode','message','Normal','Last\x20Check','wohn','includes','analysis.analysisHistory','Lernphase\x20(','ltmStbWindowDays','toString','setState','subscribeStates','hue','type','schlaf','native','AI\x20Alert\x20Status','loadRawEventLog','DIRECTION','ROLLE:\x20Smart\x20Home\x20Analyst.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20AKTUELLE\x20ZEIT:\x20','getGenerativeModel','triggerDailyDigest','lastCheck','currentSystemMode','.\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20','checkLicense','getLtmData','@google/generative-ai','Comfort\x20Summary','from','‚ö†Ô∏è\x20DEV-MODE:\x20Lokaler\x20Test-Schl√ºssel\x20erkannt.\x20Pro-Features\x20aktiviert.','saveFeedback','fire','isProVersion','INSTALL_TEST','toLocaleString','analysis.automation','test','loadDailyDigests','eventHistory','timestamp','smoke','Deaktiviert\x20(Pro-Feature)','griff','genAI','analysis.trigger','battery','notifyPushoverEnabled','ü§ñ\x20AI\x20Prompt\x20Context\x20-\x20Time:\x20','\x20function\x20assignments.','sensorLastValues','NORMAL','generateContent','indicator.alarm','guest','long','last\x20action','createAllObjects','namespace','1510856wiIbGE','minDaysForBaseline','Wohnzimmer','unload','notifySignalEnabled','manufacturer','Automation\x20Proposals','checkLtmDriftObjects','LOW_BAT','notifyTelegramInstance','vacation','[Test]\x20Notification','toLocaleTimeString','.on','motion','val','Schlafzimmer','signal','setupLtmScheduler','ROLLE:\x20Data\x20Scientist.\x20VERGLEICHE:\x20Dataset\x20A\x20(Recent)\x20vs\x20B\x20(Established).\x20ZIEL:\x20Erkenne\x20Drift.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aB\x20(LTB):\x0a','uuid-error','flot.','material.','analysis.lastResult','UNREACH','LTM.driftAnalysis','RSSI','‚úÖ\x20License\x20check\x20successful:\x20PRO\x20features\x20enabled.','getStateAsync','Gast','Badezimmer','temp','runAutopilot','Feedback\x20Log','Error:\x20','lights','geminiModel','weather','Fokus\x20auf\x20Maximierung\x20von\x20Komfort,\x20Automatisierungseffizienz\x20und\x20Energieeinsparung\x20f√ºr\x20einen\x20einzelnen\x20Bewohner.\x20Aktivit√§tsmuster\x20sind\x20flexibel.','VACATION','toLowerCase','forecast','\x20was\x20FALSE.\x20Reason:\x20','value.temperature','comment','driftAnalysisTimer','Description','testNotification','system.','15016550xwkPhx','Fenster/T√ºr','firmware','bewegung','baselineDrift','1GuERhk','testApiKey','apply','members','reverse','text.alarm','temperature','Event\x20History','getForeignObjectAsync','CONFIG_PENDING','COMBINED_PARAMETER','updateAnalysisHistory','Raw\x20Log','saveRawEventLog','push','stringify','cogni-living\x20adapter\x20starting\x20(v','scanDevices','node-schedule','apiKey','checkSystemObjects','alertReason','Drift\x20Details','min','saveDailyDigests','STB\x20(Recent\x20History):\x20','text','analysis.alertReason','TEST-PRO-KEY','config','notifyEmailInstance','connection','.\x20KONTEXT:\x20','.\x20PERSONA:\x20','\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20AUFGABE:\x20','application/json','LTM.baselineStatus','processSensorEvent','accuweather.','N/A\x20(Learning)','switch.light','scriptProblem','state','substring','mode','some','notifyWhatsappRecipient','unshift','rawEventLog','logDuplicates','object','location','indicator','N/A\x20(No\x20Activity)','Analysiere\x20ausgewogen\x20auf\x20Gesundheit,\x20Sicherheit\x20und\x20Komfort.','0\x203\x20*\x20*\x20*','weatherunderground.','2-digit','pr√§senz','Comfort\x20Suggestion','archetype','PRIORIT√ÑT:\x20Sicherheit.\x20Erkenne\x20Eindringlinge,\x20ungew√∂hnliche\x20Anwesenheit\x20bei\x20Abwesenheit\x20der\x20Bewohner\x20oder\x20Fehlfunktionen,\x20die\x20auf\x20ein\x20Sicherheitsrisiko\x20hindeuten.','Logbook','Analysis\x20Error:\x20','colormode','Starting\x20Autopilot\x20(','boolean','fenster','wind','Alert\x20Reason','aiPersona','systemUUID','info.','SECTION','admin.','WORKING','json','rating','Baseline\x20Status','activity','sendNotification','selectedFunctionIds','Action','runGeminiAnalysis','join','onUnload','Gemini\x20AI\x20initialized.','pressure','\x20Tage)','analysis.isAlert','callback','LTM.triggerDailyDigest','LTM.driftAnalysis.driftDetails','analysisHistory','LTM.rawEventLog','System\x20Mode','FAULT','analysis.automation.patternDetected','\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20SCHEMA:\x20{\x20\x22activity\x22:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22deviationFromBaseline\x22:\x20\x22string\x22,\x20\x22isAlert\x22:\x20bool,\x20\x22alertReason\x22:\x20\x22string\x22\x20},\x20\x22comfort\x22:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22suggestion\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22patternDetected\x22:\x20bool,\x20\x22description\x22:\x20\x22string\x22,\x20\x22suggestedAction\x22:\x20\x22string\x22\x20}\x20}\x20}','wetter','false_positive','subscribeForeignStatesAsync','lampe','LTM','Last\x20raw\x20event','notifyWhatsappEnabled','lastAlertState','Processing\x20Status','keys','find','devices','LOWBAT','last_seen','ltmJob','constructor','sendToAsync','isAlert','map','notifyWhatsappInstance','No\x20comment','Party','setObjectNotExistsAsync','LTM.processingStatus','system.meta.uuid','checkLtmObjects','role','feedbackHistory','analysisTimer','PARTY','garten','GUEST','toISOString','mac\x20address','Temperatur','Daily\x20Digests','Running\x20in\x20FREE\x20mode\x20(LTM\x20&\x20Automation\x20disabled).','events.lastEvent','1.\x20ANALYSE\x20&\x20DEVIATION:\x20Vergleiche\x20Events\x20mit\x20STB.\x20deviation=\x27none|slight|significant|critical\x27.','createDailyDigest','analysis.comfortSuggestion','stateChange','Urlaub','_score','description','Success:\x20Compressed\x20','.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','.state','trim','Fokus\x20auf\x20Familienroutinen,\x20Kindersicherheit\x20und\x20allgemeines\x20Haushaltsmanagement.\x20Erwarte\x20hohe\x20Aktivit√§tsniveaus.','command','Trigger\x20Digest','summary','Subscribing\x20to\x20','1632890YMIyJz','‚úÖ\x20Server\x20(simuliert):\x20Lizenz\x20g√ºltig.','number','notifyTelegramRecipient','parse','1274744AlLxnJ','filter','bind','\x20f√ºr\x20Event\x20','Skipped\x20(No\x20AI\x20or\x20Data)','values','uniqueid','Alert','ALARM','notifySignalRecipient','resetAnalysisStates','WEEK_PROGRAM','notifyPushoverInstance','Garten','name','Schalter/Licht','Bewegung','cancel','getSystemUUID','value.humidity','onStateChange','historyId','exports','analysis.deviationFromBaseline','shutter_contact','notifyEmailRecipient','search','getForeignObjectsAsync','5cumExd','log','OPERATING_VOLTAGE','deviationFromBaseline','channel','scheduleJob','11xRaYsv','k√ºche','common','LTM.driftAnalysis.lastCheck','ROLLE:\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20KONTEXT:\x20','analysisInterval','Deviation','analysis.activitySummary','startsWith','\x20room\x20assignments,\x20','analysis.feedbackHistory','debug','pop','scriptEnabled','info','temperatur','activityLevel','9LMtzwW','enum','Received\x20scanDevices\x20request\x20from\x20Admin\x20UI.','openweathermap.','VIRTUAL_CHANNEL','SABOTAGE','ltmLtbWindowDays','System\x20Status\x20&\x20Control'];a0_0x32e2=function(){return _0x13b6fe;};return a0_0x32e2();}const a0_0x53fdf2=(function(){let _0x51ee87=!![];return function(_0x2da31b,_0x1755a4){const _0x5cd8db=_0x51ee87?function(){const _0x1fc7df=a0_0x45a4;if(_0x1755a4){const _0x5614d8=_0x1755a4[_0x1fc7df(0x22d)](_0x2da31b,arguments);return _0x1755a4=null,_0x5614d8;}}:function(){};return _0x51ee87=![],_0x5cd8db;};}()),a0_0x2b2020=a0_0x53fdf2(this,function(){const _0x23dad4=a0_0x45a4;return a0_0x2b2020[_0x23dad4(0x1c3)]()[_0x23dad4(0x13e)]('(((.+)+)+)+$')[_0x23dad4(0x1c3)]()[_0x23dad4(0xf8)](a0_0x2b2020)[_0x23dad4(0x13e)](_0x23dad4(0x1b3));});a0_0x2b2020();'use strict';const utils=require('@iobroker/adapter-core'),{GoogleGenerativeAI}=require(a0_0x59e7c1(0x1d5)),schedule=require(a0_0x59e7c1(0x23d)),axios=require(a0_0x59e7c1(0x173)),HISTORY_MAX_SIZE=0x32,FEEDBACK_MAX_SIZE=0x14,GEMINI_MODEL=a0_0x59e7c1(0x180),ANALYSIS_HISTORY_MAX_SIZE=0x64,RAW_LOG_MAX_SIZE=0x5dc,DAILY_DIGEST_MAX_SIZE_LIMIT=0xb4,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,LTM_SCHEDULE=a0_0x59e7c1(0xbd),LTM_DP_RAW_LOG=a0_0x59e7c1(0xe4),LTM_DP_DAILY_DIGESTS=a0_0x59e7c1(0x1af),LTM_DP_STATUS=a0_0x59e7c1(0x100),LTM_DP_TRIGGER_DIGEST=a0_0x59e7c1(0xe1),LTM_DP_BASELINE_STATUS=a0_0x59e7c1(0xaa),LTM_DP_DRIFT_CHANNEL=a0_0x59e7c1(0x20e),LTM_DP_DRIFT_STATUS=a0_0x59e7c1(0x162),LTM_DP_DRIFT_DETAILS=a0_0x59e7c1(0xe2),LTM_DP_DRIFT_LAST_CHECK=a0_0x59e7c1(0x149),SYSTEM_DP_MODE=a0_0x59e7c1(0x170),MODE_RESET_SCHEDULE=a0_0x59e7c1(0x1ac),SYSTEM_MODES={'NORMAL':a0_0x59e7c1(0x165),'VACATION':a0_0x59e7c1(0x1ff),'PARTY':'party','GUEST':a0_0x59e7c1(0x1f0)},AUTO_RESET_MODES=[SYSTEM_MODES[a0_0x59e7c1(0x106)],SYSTEM_MODES[a0_0x59e7c1(0x108)]],PERSONA_MAPPING={'generic':a0_0x59e7c1(0xbc),'senior_aal':'PRIORIT√ÑT:\x20Gesundheit\x20und\x20Sicherheit\x20f√ºr\x20Senioren\x20(AAL).\x20Erkenne\x20Inaktivit√§t,\x20potenzielle\x20St√ºrze\x20(indirekt),\x20ungew√∂hnliche\x20n√§chtliche\x20Aktivit√§t.\x20Komfort\x20ist\x20sekund√§r.','family':a0_0x59e7c1(0x11a),'single_comfort':a0_0x59e7c1(0x21b),'security':a0_0x59e7c1(0xc3)};class CogniLiving extends utils['Adapter']{constructor(_0x18d3ed){const _0x13fa8a=a0_0x59e7c1;super({..._0x18d3ed,'name':_0x13fa8a(0x1a7)}),this[_0x13fa8a(0x1e1)]=[],this[_0x13fa8a(0xe3)]=[],this['feedbackHistory']=[],this[_0x13fa8a(0xb6)]=[],this[_0x13fa8a(0x15f)]=[],this['sensorLastValues']={},this[_0x13fa8a(0x1e6)]=null,this[_0x13fa8a(0x219)]=null,this[_0x13fa8a(0x1d1)]=SYSTEM_MODES[_0x13fa8a(0x1ed)],this[_0x13fa8a(0x1db)]=![],this[_0x13fa8a(0xf0)]=![],this[_0x13fa8a(0xcd)]='unknown',this[_0x13fa8a(0x105)]=null,this[_0x13fa8a(0xf7)]=null,this['modeResetJob']=null,this['driftAnalysisTimer']=null,this['on']('ready',this[_0x13fa8a(0x179)][_0x13fa8a(0x126)](this)),this['on'](_0x13fa8a(0x112),this[_0x13fa8a(0x138)][_0x13fa8a(0x126)](this)),this['on'](_0x13fa8a(0x1f8),this[_0x13fa8a(0xdb)]['bind'](this)),this['on'](_0x13fa8a(0x1bb),this['onMessage'][_0x13fa8a(0x126)](this));}async[a0_0x59e7c1(0x179)](){const _0x23adef=a0_0x59e7c1,_0x5c80b2=this[_0x23adef(0x1b2)]||'unknown';this[_0x23adef(0x141)][_0x23adef(0x154)](_0x23adef(0x23b)+_0x5c80b2+')'),this[_0x23adef(0xa3)]['licenseKey']=this[_0x23adef(0xa3)][_0x23adef(0x197)]||'',this[_0x23adef(0x1db)]=await this[_0x23adef(0x1d3)](this[_0x23adef(0xa3)][_0x23adef(0x197)]);this[_0x23adef(0x1db)]?this['log'][_0x23adef(0x154)](_0x23adef(0x210)):this[_0x23adef(0x141)][_0x23adef(0x154)](_0x23adef(0x10d));if(!this[_0x23adef(0xa3)]['minDaysForBaseline']||this['config']['minDaysForBaseline']<0x1)this['config'][_0x23adef(0x1f6)]=0x7;if(!this['config'][_0x23adef(0x1c2)]||this['config']['ltmStbWindowDays']<0x1)this[_0x23adef(0xa3)][_0x23adef(0x1c2)]=0xe;if(!this['config'][_0x23adef(0x15d)]||this[_0x23adef(0xa3)][_0x23adef(0x15d)]<0x1e)this[_0x23adef(0xa3)][_0x23adef(0x15d)]=0x3c;this[_0x23adef(0xa3)][_0x23adef(0x15d)]=Math[_0x23adef(0x9d)](Math[_0x23adef(0x1ab)](this[_0x23adef(0xa3)][_0x23adef(0x15d)],this['config'][_0x23adef(0x1c2)]+0xe),DAILY_DIGEST_MAX_SIZE_LIMIT);if(this[_0x23adef(0xa3)]['geminiApiKey'])try{this[_0x23adef(0x1e6)]=new GoogleGenerativeAI(this[_0x23adef(0xa3)]['geminiApiKey']),this[_0x23adef(0x219)]=this[_0x23adef(0x1e6)][_0x23adef(0x1ce)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x23adef(0xa9)}}),this[_0x23adef(0x141)][_0x23adef(0x154)](_0x23adef(0xdc));}catch(_0x568366){this[_0x23adef(0x141)][_0x23adef(0x1a4)](_0x23adef(0x1a1)+_0x568366[_0x23adef(0x1bb)]);}else this[_0x23adef(0x141)]['warn']('Gemini\x20API\x20Key\x20missing.\x20AI\x20features\x20disabled.');await this[_0x23adef(0x1f3)](),await this['loadSystemMode']();const _0x512e9b=await this['getStateAsync'](_0x23adef(0xdf));this['lastAlertState']=_0x512e9b?!!_0x512e9b[_0x23adef(0x204)]:![];try{const _0x5efdf8=await this[_0x23adef(0x211)](_0x23adef(0x1c0));if(_0x5efdf8&&_0x5efdf8[_0x23adef(0x204)])this[_0x23adef(0xe3)]=JSON[_0x23adef(0x123)](_0x5efdf8[_0x23adef(0x204)][_0x23adef(0x1c3)]());}catch(_0x1bbd81){this[_0x23adef(0xe3)]=[];}try{const _0x4bc3fc=await this[_0x23adef(0x211)](_0x23adef(0x150));if(_0x4bc3fc&&_0x4bc3fc[_0x23adef(0x204)])this[_0x23adef(0x104)]=JSON[_0x23adef(0x123)](_0x4bc3fc[_0x23adef(0x204)]['toString']());}catch(_0x4a7c77){this[_0x23adef(0x104)]=[];}await this['loadRawEventLog'](),await this[_0x23adef(0x1e0)](),this[_0x23adef(0x1c5)](_0x23adef(0x1e7)),this[_0x23adef(0x1c5)](LTM_DP_TRIGGER_DIGEST),this[_0x23adef(0x1c5)](SYSTEM_DP_MODE);const _0xad55ad=this[_0x23adef(0xa3)][_0x23adef(0xf4)];if(_0xad55ad&&_0xad55ad[_0x23adef(0x1a9)]>0x0){this[_0x23adef(0x141)][_0x23adef(0x154)](_0x23adef(0x11e)+_0xad55ad['length']+'\x20sensors...');for(const _0x107cad of _0xad55ad){if(_0x107cad['id']){await this[_0x23adef(0xeb)](_0x107cad['id']);try{const _0x2e0794=await this[_0x23adef(0x1a8)](_0x107cad['id']);if(_0x2e0794)this[_0x23adef(0x1ec)][_0x107cad['id']]=_0x2e0794['val'];}catch(_0x5e6880){}}}}if(this['analysisTimer'])clearInterval(this[_0x23adef(0x105)]);const _0x3850a8=this['config'][_0x23adef(0x14b)]||0xf;_0x3850a8>0x0&&(this[_0x23adef(0x141)]['info'](_0x23adef(0xc7)+_0x3850a8+_0x23adef(0x18f)),this[_0x23adef(0x105)]=setInterval(()=>this[_0x23adef(0x215)](),_0x3850a8*0x3c*0x3e8)),this['setupLtmScheduler'](),this['setupModeResetScheduler'](),this[_0x23adef(0x190)]();}async[a0_0x59e7c1(0x1aa)](_0x12dd77={}){const _0x4b704b=a0_0x59e7c1;this['log'][_0x4b704b(0x154)]('Starting\x20Smart\x20Scan\x20with\x20filters:\x20'+JSON[_0x4b704b(0x23a)](_0x12dd77));const _0x482fa1=[],_0x1a4069=_0x12dd77[_0x4b704b(0x203)]!==![],_0x9de03e=_0x12dd77[_0x4b704b(0x18d)]!==![],_0x5ee342=_0x12dd77[_0x4b704b(0x218)]!==![],_0x291094=_0x12dd77[_0x4b704b(0x231)]===!![],_0x543daa=_0x12dd77[_0x4b704b(0x21a)]===!![],_0x2c479e=_0x12dd77[_0x4b704b(0xd7)]||[],_0x169dd7=await this[_0x4b704b(0x13f)]('enum.rooms.*',_0x4b704b(0x158)),_0x57ab24=await this[_0x4b704b(0x13f)]('enum.functions.*',_0x4b704b(0x158)),_0x5d7630={},_0x4e52e8={},_0x4c0d4f={},_0x52679c=(_0x3d5a13,_0x35c5d0,_0x4afb69=![])=>{const _0x272a5d=_0x4b704b;if(!_0x3d5a13)return;for(const _0xabe5bb in _0x3d5a13){const _0x5258b8=_0x3d5a13[_0xabe5bb];if(_0x5258b8&&_0x5258b8[_0x272a5d(0x148)]&&_0x5258b8[_0x272a5d(0x148)][_0x272a5d(0x22e)]){const _0x32c54a=(typeof _0x5258b8[_0x272a5d(0x148)][_0x272a5d(0x132)]===_0x272a5d(0xb8)?_0x5258b8[_0x272a5d(0x148)][_0x272a5d(0x132)]['de']:_0x5258b8[_0x272a5d(0x148)][_0x272a5d(0x132)])||_0x5258b8[_0x272a5d(0x148)][_0x272a5d(0x132)];if(_0x4afb69)_0x4c0d4f[_0xabe5bb]=_0x32c54a;for(const _0x32592a of _0x5258b8[_0x272a5d(0x148)][_0x272a5d(0x22e)]){if(_0x4afb69){if(!_0x35c5d0[_0x32592a])_0x35c5d0[_0x32592a]=[];_0x35c5d0[_0x32592a][_0x272a5d(0x239)](_0xabe5bb);}else _0x35c5d0[_0x32592a]=_0x32c54a;}}}};_0x52679c(_0x169dd7,_0x5d7630),_0x52679c(_0x57ab24,_0x4e52e8,!![]),this[_0x4b704b(0x141)][_0x4b704b(0x154)](_0x4b704b(0x1b8)+Object[_0x4b704b(0xf2)](_0x5d7630)['length']+_0x4b704b(0x14f)+Object['keys'](_0x4e52e8)[_0x4b704b(0x1a9)]+_0x4b704b(0x1eb));const _0x8c64af=await this['getForeignObjectsAsync']('*','state'),_0xd651e5=[_0x4b704b(0x20d),_0x4b704b(0xf5),_0x4b704b(0x1fd),_0x4b704b(0x20f),_0x4b704b(0x19f),_0x4b704b(0xe6),_0x4b704b(0x15c),_0x4b704b(0x12c),_0x4b704b(0x234),_0x4b704b(0x17b),'DUTY_CYCLE',_0x4b704b(0xd1),_0x4b704b(0x1cc),_0x4b704b(0x19a),_0x4b704b(0x142),_0x4b704b(0x15b),_0x4b704b(0x1dc),_0x4b704b(0x235),_0x4b704b(0x12f),'ON_TIME',_0x4b704b(0xcf),_0x4b704b(0x17c),_0x4b704b(0x193),'AES_KEY','CONNECTION','reachable',_0x4b704b(0x174),_0x4b704b(0x1e8),'update',_0x4b704b(0x228),_0x4b704b(0x1b2),_0x4b704b(0xa5),_0x4b704b(0x154),_0x4b704b(0x206),_0x4b704b(0xf6),_0x4b704b(0x1f2),_0x4b704b(0xc2),'alert',_0x4b704b(0xb2),_0x4b704b(0xc6),'effect','xy','ct',_0x4b704b(0x1c6),_0x4b704b(0x1ae),_0x4b704b(0x18e),_0x4b704b(0x1fa),'modelid',_0x4b704b(0x12a),_0x4b704b(0x11b),_0x4b704b(0x10a),_0x4b704b(0x115),_0x4b704b(0x16a),'process',_0x4b704b(0x153),_0x4b704b(0xaf),'javascript.0.script',_0x4b704b(0x16c),_0x4b704b(0x11d),'icon',_0x4b704b(0x164),_0x4b704b(0x21e),_0x4b704b(0x154),_0x4b704b(0xd2)];if(!_0x543daa)_0xd651e5[_0x4b704b(0x239)](_0x4b704b(0xe9),'weather',_0x4b704b(0xca),_0x4b704b(0xdd),'uv',_0x4b704b(0x191),_0x4b704b(0x1b6));const _0x49a0b7=[_0x4b704b(0x225),_0x4b704b(0xd0),_0x4b704b(0xce),_0x4b704b(0x198),'history.',_0x4b704b(0x20b),'icons-mfd.',_0x4b704b(0x20a)];if(!_0x543daa)_0x49a0b7['push']('daswetter.',_0x4b704b(0xbe),_0x4b704b(0xac),'yr.',_0x4b704b(0x15a));const _0x2e61f7=(_0x4a0033,_0x46cae9,_0x2ed606=![])=>{const _0x308239=_0x4b704b,_0x5d819a=_0x4a0033[_0x308239(0x1b1)]('.');if(_0x46cae9[_0x4a0033])return _0x46cae9[_0x4a0033];if(_0x5d819a[_0x308239(0x1a9)]>0x2&&_0x46cae9[_0x5d819a['slice'](0x0,-0x1)[_0x308239(0xda)]('.')])return _0x46cae9[_0x5d819a[_0x308239(0x186)](0x0,-0x1)['join']('.')];if(_0x5d819a[_0x308239(0x1a9)]>0x3&&_0x46cae9[_0x5d819a[_0x308239(0x186)](0x0,-0x2)['join']('.')])return _0x46cae9[_0x5d819a[_0x308239(0x186)](0x0,-0x2)[_0x308239(0xda)]('.')];return _0x2ed606?[]:null;};for(const _0x398fea in _0x8c64af){const _0xeae271=_0x8c64af[_0x398fea];if(!_0xeae271||!_0xeae271[_0x4b704b(0x148)])continue;if(_0x49a0b7[_0x4b704b(0xb3)](_0x3b5ba5=>_0x398fea[_0x4b704b(0x14e)](_0x3b5ba5)))continue;const _0x455051=_0xeae271[_0x4b704b(0x148)][_0x4b704b(0x103)]||'',_0x4f77a4=(_0xeae271['common'][_0x4b704b(0x132)]&&typeof _0xeae271[_0x4b704b(0x148)]['name']===_0x4b704b(0xb8)?_0xeae271[_0x4b704b(0x148)][_0x4b704b(0x132)]['de']:_0xeae271[_0x4b704b(0x148)]['name'])||'',_0x5d79be=_0x398fea[_0x4b704b(0x1b4)](),_0x13069d=_0x4f77a4?_0x4f77a4[_0x4b704b(0x21d)]():'',_0x3c40de=_0x398fea[_0x4b704b(0x21d)](),_0x19ed17=_0x2e61f7(_0x398fea,_0x5d7630),_0x532019=_0x2e61f7(_0x398fea,_0x4e52e8,!![]);let _0x2c8d97=null,_0x39748c=![];if(_0x532019&&_0x532019[_0x4b704b(0x1a9)]>0x0){const _0x55475b=_0x532019[_0x4b704b(0xf3)](_0x53f35a=>_0x2c479e[_0x4b704b(0x1bf)](_0x53f35a));if(_0x55475b){_0x39748c=!![];const _0x2dfc15=_0x4c0d4f[_0x55475b];if(_0x3c40de['includes']('presence')||_0x3c40de[_0x4b704b(0x1bf)](_0x4b704b(0x203)))_0x2c8d97=_0x4b704b(0x134);else{if(_0x3c40de['includes'](_0x4b704b(0x1e3))||_0x3c40de[_0x4b704b(0x1bf)](_0x4b704b(0x1da))||_0x13069d[_0x4b704b(0x1bf)]('rauch'))_0x2c8d97=_0x4b704b(0x168);else{if(_0x3c40de['includes'](_0x4b704b(0xb0))||_0x3c40de['includes'](_0x4b704b(0x1ad))||_0x3c40de[_0x4b704b(0x1bf)]('on'))_0x2c8d97=_0x4b704b(0x133);else _0x2c8d97=_0x2dfc15;}}}}if(!_0x39748c&&!_0x543daa){if(_0xd651e5['some'](_0x14958a=>_0x13069d[_0x4b704b(0x1bf)](_0x14958a)||_0x5d79be['includes'](_0x14958a)))continue;}if(!_0x2c8d97&&_0x1a4069){const _0x5d7a93=_0x455051['includes'](_0x4b704b(0x16d))||_0x455051[_0x4b704b(0x1bf)]('occupancy'),_0x257646=_0x13069d[_0x4b704b(0x1bf)](_0x4b704b(0x229))||_0x13069d['includes'](_0x4b704b(0xc0));if(_0x5d7a93||_0x257646)_0x2c8d97='Bewegung';}if(!_0x2c8d97&&_0x9de03e){const _0xf7b327=_0x3c40de['includes'](_0x4b704b(0x13c))&&_0x3c40de['endsWith'](_0x4b704b(0x118));(_0xf7b327||_0x455051[_0x4b704b(0x1bf)]('sensor.door')||_0x455051[_0x4b704b(0x1bf)](_0x4b704b(0x185))||(_0x13069d['includes'](_0x4b704b(0xc9))||_0x13069d[_0x4b704b(0x1bf)]('t√ºr'))&&!_0x13069d['includes'](_0x4b704b(0x214))&&!_0x13069d[_0x4b704b(0x1bf)](_0x4b704b(0x1e5))&&(_0xeae271[_0x4b704b(0x148)][_0x4b704b(0x1c7)]===_0x4b704b(0xc8)||_0xeae271['common'][_0x4b704b(0x1c7)]==='number'))&&(_0x2c8d97=_0x4b704b(0x227));}if(!_0x2c8d97&&_0x5ee342){const _0x1c6aaf=_0x455051[_0x4b704b(0x1bf)](_0x4b704b(0xae))||_0x455051['includes']('level.dimmer'),_0x20ec54=_0x13069d['includes']('licht')||_0x13069d[_0x4b704b(0x1bf)](_0x4b704b(0xec))||_0x13069d[_0x4b704b(0x1bf)]('leuchte'),_0x50f950=_0x3c40de[_0x4b704b(0x1a6)](_0x4b704b(0x118))||_0x3c40de[_0x4b704b(0x1a6)](_0x4b704b(0x202))||_0x3c40de[_0x4b704b(0x1a6)]('.level')||_0x3c40de[_0x4b704b(0x1a6)](_0x4b704b(0x195))||_0x3c40de[_0x4b704b(0x1a6)]('.brightness');(_0x1c6aaf||_0x20ec54)&&_0x50f950&&_0xeae271[_0x4b704b(0x148)]['write']&&(_0x2c8d97=_0x4b704b(0x19b));}!_0x2c8d97&&_0x291094&&((_0x455051[_0x4b704b(0x1bf)](_0x4b704b(0x220))||_0x455051[_0x4b704b(0x1bf)](_0x4b704b(0x137))||_0x13069d['includes'](_0x4b704b(0x155)))&&(_0x2c8d97=_0x4b704b(0x10b)));if(_0x2c8d97){let _0x4f1b8=_0x19ed17||'';if(!_0x4f1b8){if(_0x13069d[_0x4b704b(0x1bf)]('bad'))_0x4f1b8=_0x4b704b(0x213);else{if(_0x13069d[_0x4b704b(0x1bf)](_0x4b704b(0x147)))_0x4f1b8=_0x4b704b(0x184);else{if(_0x13069d['includes'](_0x4b704b(0x1be)))_0x4f1b8=_0x4b704b(0x1f7);else{if(_0x13069d[_0x4b704b(0x1bf)](_0x4b704b(0x1c8)))_0x4f1b8=_0x4b704b(0x205);else{if(_0x13069d['includes']('flur')||_0x13069d[_0x4b704b(0x1bf)](_0x4b704b(0x189)))_0x4f1b8='Flur';else{if(_0x13069d[_0x4b704b(0x1bf)](_0x4b704b(0x107)))_0x4f1b8=_0x4b704b(0x131);}}}}}}let _0x1b48bd=0x0;if(_0x39748c)_0x1b48bd+=0x1e;else{if(_0x19ed17)_0x1b48bd+=0x14;else{if(_0x4f1b8)_0x1b48bd+=0xa;}}_0x482fa1[_0x4b704b(0x239)]({'id':_0x398fea,'name':_0x4f77a4||_0x398fea,'type':_0x2c8d97,'location':_0x4f1b8,'logDuplicates':_0x2c8d97===_0x4b704b(0x134),'_score':_0x1b48bd});}}return _0x482fa1['sort']((_0x36b20a,_0x4ac47a)=>_0x4ac47a[_0x4b704b(0x114)]-_0x36b20a[_0x4b704b(0x114)]),_0x482fa1;}async[a0_0x59e7c1(0x136)](){const _0x5b0ced=a0_0x59e7c1;try{const _0x17cb5e=await this[_0x5b0ced(0x233)](_0x5b0ced(0x101));if(_0x17cb5e&&_0x17cb5e[_0x5b0ced(0x1c9)]&&_0x17cb5e['native'][_0x5b0ced(0x1a5)])return _0x17cb5e[_0x5b0ced(0x1c9)][_0x5b0ced(0x1a5)];return'uuid-not-found';}catch(_0x182c62){return _0x5b0ced(0x209);}}async['checkLicense'](_0x31387a){const _0x47e3dd=a0_0x59e7c1;if(!_0x31387a)return![];this[_0x47e3dd(0xcd)]=await this['getSystemUUID'](),this[_0x47e3dd(0x141)][_0x47e3dd(0x154)](_0x47e3dd(0x1b9)+this[_0x47e3dd(0xcd)]);if(_0x31387a===_0x47e3dd(0xa2))return this[_0x47e3dd(0x141)][_0x47e3dd(0x154)](_0x47e3dd(0x1d8)),!![];if(_0x31387a[_0x47e3dd(0x14e)]('PRO-'))return this[_0x47e3dd(0x141)][_0x47e3dd(0x154)](_0x47e3dd(0x120)),!![];return![];}async[a0_0x59e7c1(0x1f3)](){const _0x5352ec=a0_0x59e7c1;await this[_0x5352ec(0x9a)](),await this[_0x5352ec(0xff)](_0x5352ec(0x10e),{'type':_0x5352ec(0xb0),'common':{'name':_0x5352ec(0xee),'type':_0x5352ec(0x175),'role':_0x5352ec(0xd2),'read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync']('events.history',{'type':_0x5352ec(0xb0),'common':{'name':_0x5352ec(0x232),'type':_0x5352ec(0x175),'role':'json','read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync']('analysis.trigger',{'type':_0x5352ec(0xb0),'common':{'name':'Trigger\x20Analysis','type':_0x5352ec(0xc8),'role':_0x5352ec(0x182),'read':!![],'write':!![],'def':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x5352ec(0x20c),{'type':_0x5352ec(0xb0),'common':{'name':'Last\x20Result','type':_0x5352ec(0x175),'role':'json','read':!![],'write':![]},'native':{}}),await this[_0x5352ec(0xff)](_0x5352ec(0xdf),{'type':'state','common':{'name':_0x5352ec(0x1ca),'type':_0x5352ec(0xc8),'role':_0x5352ec(0x1ef),'read':!![],'write':![],'def':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x5352ec(0xa1),{'type':_0x5352ec(0xb0),'common':{'name':_0x5352ec(0xcb),'type':_0x5352ec(0x175),'role':_0x5352ec(0x230),'read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync']('analysis.activitySummary',{'type':_0x5352ec(0xb0),'common':{'name':_0x5352ec(0x181),'type':_0x5352ec(0x175),'role':_0x5352ec(0xa0),'read':!![],'write':![]},'native':{}}),await this[_0x5352ec(0xff)](_0x5352ec(0x13b),{'type':_0x5352ec(0xb0),'common':{'name':_0x5352ec(0x14c),'type':_0x5352ec(0x175),'role':_0x5352ec(0xb0),'read':!![],'write':![],'def':_0x5352ec(0x18b)},'native':{}}),await this[_0x5352ec(0xff)]('analysis.comfortSummary',{'type':_0x5352ec(0xb0),'common':{'name':_0x5352ec(0x1d6),'type':'string','role':_0x5352ec(0xa0),'read':!![],'write':![]},'native':{}}),await this[_0x5352ec(0xff)](_0x5352ec(0x111),{'type':_0x5352ec(0xb0),'common':{'name':_0x5352ec(0xc1),'type':_0x5352ec(0x175),'role':_0x5352ec(0xa0),'read':!![],'write':![]},'native':{}}),await this[_0x5352ec(0x176)](_0x5352ec(0x1de),{'type':_0x5352ec(0x144),'common':{'name':_0x5352ec(0x1fb)},'native':{}}),await this[_0x5352ec(0xff)](_0x5352ec(0xe7),{'type':'state','common':{'name':'Pattern\x20Detected','type':'boolean','role':_0x5352ec(0xba),'read':!![],'write':![],'def':![]},'native':{}}),await this[_0x5352ec(0xff)]('analysis.automation.description',{'type':_0x5352ec(0xb0),'common':{'name':_0x5352ec(0x223),'type':_0x5352ec(0x175),'role':_0x5352ec(0xa0),'read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x5352ec(0x163),{'type':_0x5352ec(0xb0),'common':{'name':_0x5352ec(0xd8),'type':_0x5352ec(0x175),'role':_0x5352ec(0xa0),'read':!![],'write':![]},'native':{}}),await this[_0x5352ec(0xff)](_0x5352ec(0x1c0),{'type':_0x5352ec(0xb0),'common':{'name':_0x5352ec(0xc4),'type':_0x5352ec(0x175),'role':_0x5352ec(0xd2),'read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x5352ec(0xff)](_0x5352ec(0x150),{'type':_0x5352ec(0xb0),'common':{'name':_0x5352ec(0x216),'type':_0x5352ec(0x175),'role':_0x5352ec(0xd2),'read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x5352ec(0x102)](),await this[_0x5352ec(0x1fc)]();}[a0_0x59e7c1(0x138)](_0x9dbf94,_0xfbd3a9){const _0x174041=a0_0x59e7c1;if(!_0xfbd3a9)return;if(_0x9dbf94===this[_0x174041(0x1f4)]+'.'+SYSTEM_DP_MODE){_0xfbd3a9[_0x174041(0x204)]&&Object[_0x174041(0x129)](SYSTEM_MODES)['includes'](_0xfbd3a9['val'])&&(this[_0x174041(0x1d1)]=_0xfbd3a9[_0x174041(0x204)]);if(!_0xfbd3a9[_0x174041(0x187)])this[_0x174041(0x1c4)](_0x9dbf94,{'val':this[_0x174041(0x1d1)],'ack':!![]});return;}if(!_0xfbd3a9[_0x174041(0x187)]){_0x9dbf94[_0x174041(0x1bf)]('analysis.trigger')&&_0xfbd3a9[_0x174041(0x204)]&&(this[_0x174041(0x1c4)](_0x9dbf94,{'val':![],'ack':!![]}),this[_0x174041(0xd9)]());if(_0x9dbf94[_0x174041(0x1bf)](_0x174041(0x1cf))&&_0xfbd3a9[_0x174041(0x204)]){this[_0x174041(0x1c4)](_0x9dbf94,{'val':![],'ack':!![]});if(this[_0x174041(0x1db)])this[_0x174041(0x110)]();}return;}const _0x38d7c7=(this['config'][_0x174041(0xf4)]||[])[_0x174041(0xf3)](_0x24a469=>_0x24a469['id']===_0x9dbf94);if(_0x38d7c7)this[_0x174041(0xab)](_0x9dbf94,_0xfbd3a9,_0x38d7c7);}async[a0_0x59e7c1(0xab)](_0x168fd0,_0x252f95,_0x55c0f){const _0x18b40d=a0_0x59e7c1;if(!_0x55c0f[_0x18b40d(0xb7)]&&this[_0x18b40d(0x1ec)][_0x168fd0]===_0x252f95[_0x18b40d(0x204)])return;this[_0x18b40d(0x1ec)][_0x168fd0]=_0x252f95[_0x18b40d(0x204)];const _0x564c38={'timestamp':_0x252f95['ts'],'id':_0x168fd0,'name':_0x55c0f[_0x18b40d(0x132)],'value':_0x252f95['val'],'location':_0x55c0f[_0x18b40d(0xb9)],'type':_0x55c0f['type']};this['eventHistory'][_0x18b40d(0xb5)](_0x564c38);if(this[_0x18b40d(0x1e1)][_0x18b40d(0x1a9)]>HISTORY_MAX_SIZE)this[_0x18b40d(0x1e1)][_0x18b40d(0x152)]();await this['setStateAsync']('events.lastEvent',{'val':JSON['stringify'](_0x564c38),'ack':!![]}),this[_0x18b40d(0xb6)][_0x18b40d(0x239)]({'timestamp':new Date(_0x252f95['ts'])[_0x18b40d(0x109)](),'sensorName':_0x55c0f[_0x18b40d(0x132)],'location':_0x55c0f[_0x18b40d(0xb9)],'value':_0x252f95[_0x18b40d(0x204)]}),await this[_0x18b40d(0x238)]();}['runAutopilot'](){const _0xb59b8b=a0_0x59e7c1;if(this[_0xb59b8b(0x1e1)][_0xb59b8b(0x1a9)]===0x0){this['setState']('analysis.isAlert',{'val':![],'ack':!![]}),this[_0xb59b8b(0x12e)]();return;}const _0x4e22c9=Date[_0xb59b8b(0x177)]();if(_0x4e22c9-this[_0xb59b8b(0x1e1)][0x0][_0xb59b8b(0x1e2)]>(this[_0xb59b8b(0xa3)][_0xb59b8b(0x14b)]||0xf)*0x3c*0x3e8){this['setState'](_0xb59b8b(0xdf),{'val':![],'ack':!![]}),this[_0xb59b8b(0x12e)]();return;}this[_0xb59b8b(0xd9)]()[_0xb59b8b(0x19d)](_0x4279db=>this[_0xb59b8b(0x141)][_0xb59b8b(0x1a4)](_0x4279db));}async[a0_0x59e7c1(0xd9)](){const _0xa7fd3d=a0_0x59e7c1;if(!this['geminiModel']||this[_0xa7fd3d(0x1e1)][_0xa7fd3d(0x1a9)]===0x0)return;const _0x2ddfb3=PERSONA_MAPPING[this[_0xa7fd3d(0xa3)][_0xa7fd3d(0xcc)]||'generic'],_0x11a81f=this[_0xa7fd3d(0xa3)]['livingContext']||'',_0x50bb0f=this[_0xa7fd3d(0x1d1)],_0x2a0285=new Date(),_0x294f2e=_0x2a0285['toLocaleString']('de-DE',{'weekday':_0xa7fd3d(0x1f1),'hour':_0xa7fd3d(0xbf),'minute':'2-digit'});this[_0xa7fd3d(0x141)][_0xa7fd3d(0x151)](_0xa7fd3d(0x1ea)+_0x294f2e+',\x20Mode:\x20'+this[_0xa7fd3d(0x1d1)]);let _0x547769=_0xa7fd3d(0x1b7),_0x29d76e=_0xa7fd3d(0x17a);if(this[_0xa7fd3d(0x1db)]&&this[_0xa7fd3d(0x15f)][_0xa7fd3d(0x1a9)]>=(this[_0xa7fd3d(0xa3)][_0xa7fd3d(0x1f6)]||0x7)&&_0x50bb0f===SYSTEM_MODES['NORMAL']){const _0x42c0a3=this['dailyDigests'][_0xa7fd3d(0x186)](-(this[_0xa7fd3d(0xa3)]['ltmStbWindowDays']||0xe))[_0xa7fd3d(0x22f)]();_0x547769=_0xa7fd3d(0x9f)+JSON[_0xa7fd3d(0x23a)](_0x42c0a3),_0x29d76e=_0xa7fd3d(0x10f);}let _0x27fe93='';if(this['feedbackHistory'][_0xa7fd3d(0x1a9)]>0x0){const _0x166d51=this['feedbackHistory'][_0xa7fd3d(0x125)](_0xa79afb=>_0xa79afb[_0xa7fd3d(0xd3)]===_0xa7fd3d(0xea)||_0xa79afb[_0xa7fd3d(0xd3)]==='needs_improvement')[_0xa7fd3d(0x186)](0x0,0x3)[_0xa7fd3d(0xfb)](_0x4b6f11=>'-\x20User\x20Feedback:\x20Alarm\x20\x22'+_0x4b6f11[_0xa7fd3d(0x9b)]+_0xa7fd3d(0x188)+new Date(_0x4b6f11['timestamp'])[_0xa7fd3d(0x201)]()+_0xa7fd3d(0x21f)+(_0x4b6f11[_0xa7fd3d(0x221)]||_0xa7fd3d(0xfd))+'.')[_0xa7fd3d(0xda)]('\x0a');_0x166d51&&(_0x27fe93='\x0a\x0aUSER\x20FEEDBACK\x20/\x20LERN-CONTEXT\x20(Vermeide\x20diese\x20Fehler):\x0a'+_0x166d51+'\x0a');}const _0x369d34=_0xa7fd3d(0x1cd)+_0x294f2e+'\x20(Wichtig\x20f√ºr\x20Plausibilit√§t!).\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20MODUS:\x20'+_0x50bb0f+_0xa7fd3d(0xa6)+_0x11a81f+_0xa7fd3d(0xa7)+_0x2ddfb3+_0xa7fd3d(0x1d2)+_0x547769+'\x20'+_0x27fe93+_0xa7fd3d(0xa8)+_0x29d76e+_0xa7fd3d(0x17d)+JSON['stringify'](this[_0xa7fd3d(0x1e1)])+_0xa7fd3d(0xe8);try{const _0x5c3d05=await this[_0xa7fd3d(0x219)][_0xa7fd3d(0x1ee)](_0x369d34),_0x4271d0=JSON['parse'](_0x5c3d05[_0xa7fd3d(0x17e)][_0xa7fd3d(0xa0)]()[_0xa7fd3d(0x169)](/```json|```/g,'')[_0xa7fd3d(0x119)]());await this[_0xa7fd3d(0x171)](_0xa7fd3d(0x20c),{'val':JSON[_0xa7fd3d(0x23a)](_0x4271d0),'ack':!![]}),await this['setStateAsync'](_0xa7fd3d(0x14d),{'val':_0x4271d0[_0xa7fd3d(0xd5)][_0xa7fd3d(0x11d)]||_0xa7fd3d(0x18b),'ack':!![]}),await this[_0xa7fd3d(0x171)](_0xa7fd3d(0x13b),{'val':_0x4271d0['activity'][_0xa7fd3d(0x143)]||_0xa7fd3d(0x18b),'ack':!![]}),await this[_0xa7fd3d(0x171)](_0xa7fd3d(0xa1),{'val':_0x4271d0['activity'][_0xa7fd3d(0x9b)]||'','ack':!![]});const _0x4abd80=_0x4271d0['comfort']['automationProposal'],_0x1ecc5e=this[_0xa7fd3d(0x1db)]?_0x4abd80[_0xa7fd3d(0x16b)]:![];await this['setStateAsync'](_0xa7fd3d(0xe7),{'val':_0x1ecc5e,'ack':!![]}),await this[_0xa7fd3d(0x171)]('analysis.automation.description',{'val':_0x1ecc5e?_0x4abd80[_0xa7fd3d(0x115)]:this['isProVersion']?'':_0xa7fd3d(0x18a),'ack':!![]});if(_0x4271d0[_0xa7fd3d(0xd5)]['isAlert']){await this[_0xa7fd3d(0x171)](_0xa7fd3d(0xdf),{'val':!![],'ack':!![]});if(!this[_0xa7fd3d(0xf0)])this[_0xa7fd3d(0xd6)]('üö®\x20Alarm:\x20'+_0x4271d0[_0xa7fd3d(0xd5)][_0xa7fd3d(0x9b)]);}else await this['setStateAsync'](_0xa7fd3d(0xdf),{'val':![],'ack':!![]});this[_0xa7fd3d(0xf0)]=_0x4271d0[_0xa7fd3d(0xd5)][_0xa7fd3d(0xfa)];const _0x40b1c0={'timestamp':Date[_0xa7fd3d(0x177)](),'id':Date[_0xa7fd3d(0x177)]()[_0xa7fd3d(0x1c3)](),'analysis':_0x4271d0,'systemMode':_0x50bb0f,'isPro':this[_0xa7fd3d(0x1db)]};this[_0xa7fd3d(0x236)](_0x40b1c0);}catch(_0xe66849){this[_0xa7fd3d(0x141)]['error'](_0xa7fd3d(0xc5)+_0xe66849['message']);}}async['createDailyDigest'](){const _0x4dedff=a0_0x59e7c1;if(!this[_0x4dedff(0x1db)])return;await this[_0x4dedff(0x171)](LTM_DP_STATUS,{'val':'Started\x20at\x20'+new Date()[_0x4dedff(0x1dd)](),'ack':!![]});if(!this[_0x4dedff(0x219)]||this[_0x4dedff(0xb6)]['length']<LTM_MIN_EVENTS_FOR_COMPRESSION){await this['setStateAsync'](LTM_DP_STATUS,{'val':_0x4dedff(0x128),'ack':!![]});return;}const _0x246ef8=JSON[_0x4dedff(0x123)](JSON[_0x4dedff(0x23a)](this[_0x4dedff(0xb6)])),_0x404264=(this['config']['livingContext']||'')[_0x4dedff(0xb1)](0x0,0x3e8),_0x587e34=_0x4dedff(0x14a)+_0x404264+_0x4dedff(0x117)+JSON[_0x4dedff(0x23a)](_0x246ef8);try{const _0x516924=await this['geminiModel'][_0x4dedff(0x1ee)](_0x587e34),_0x124eb4=JSON[_0x4dedff(0x123)](_0x516924[_0x4dedff(0x17e)][_0x4dedff(0xa0)]()[_0x4dedff(0x169)](/```json|```/g,'')['trim']());_0x124eb4['summary']&&(this[_0x4dedff(0x15f)][_0x4dedff(0x239)]({'timestamp':new Date()['toISOString'](),'eventCount':_0x246ef8[_0x4dedff(0x1a9)],'summary':_0x124eb4[_0x4dedff(0x11d)],'activityLevel':_0x124eb4[_0x4dedff(0x156)],'systemMode':this['currentSystemMode']}),await this[_0x4dedff(0x9e)](),this[_0x4dedff(0xb6)]=[],await this[_0x4dedff(0x238)](),await this[_0x4dedff(0x171)](LTM_DP_STATUS,{'val':_0x4dedff(0x116)+_0x246ef8[_0x4dedff(0x1a9)]+'\x20events','ack':!![]}));}catch(_0x2cd8da){await this[_0x4dedff(0x171)](LTM_DP_STATUS,{'val':_0x4dedff(0x217)+_0x2cd8da[_0x4dedff(0x1bb)],'ack':!![]});}}async[a0_0x59e7c1(0x1b5)](){const _0x29e672=a0_0x59e7c1;if(!this[_0x29e672(0x1db)]||!this[_0x29e672(0x219)])return;const _0x2eb4b7=this[_0x29e672(0xa3)][_0x29e672(0x1c2)]||0xe;if(this['dailyDigests'][_0x29e672(0x1a9)]<_0x2eb4b7+(this[_0x29e672(0xa3)][_0x29e672(0x1f6)]||0x7)){await this[_0x29e672(0x171)](LTM_DP_DRIFT_STATUS,{'val':_0x29e672(0xad),'ack':!![]});return;}const _0x14ea7f=this[_0x29e672(0x15f)][_0x29e672(0x186)](-_0x2eb4b7),_0x3f784f=this[_0x29e672(0x15f)]['slice'](0x0,this[_0x29e672(0x15f)]['length']-_0x2eb4b7),_0x13e9ed=_0x29e672(0x208)+JSON['stringify'](_0x3f784f)+'\x0a\x0aA\x20(STB):\x0a'+JSON[_0x29e672(0x23a)](_0x14ea7f);try{const _0x2bb4ed=await this[_0x29e672(0x219)][_0x29e672(0x1ee)](_0x13e9ed),_0x446675=JSON[_0x29e672(0x123)](_0x2bb4ed[_0x29e672(0x17e)][_0x29e672(0xa0)]()[_0x29e672(0x169)](/```json|```/g,'')['trim']());_0x446675[_0x29e672(0x22a)]&&(await this[_0x29e672(0x171)](LTM_DP_DRIFT_STATUS,{'val':_0x446675[_0x29e672(0x22a)],'ack':!![]}),await this[_0x29e672(0x171)](LTM_DP_DRIFT_DETAILS,{'val':_0x446675[_0x29e672(0x19c)],'ack':!![]}),await this[_0x29e672(0x171)](LTM_DP_DRIFT_LAST_CHECK,{'val':Date[_0x29e672(0x177)](),'ack':!![]}));}catch(_0x138ceb){}}async[a0_0x59e7c1(0x9a)](){const _0x3b3f77=a0_0x59e7c1;await this[_0x3b3f77(0x176)]('system',{'type':_0x3b3f77(0x144),'common':{'name':_0x3b3f77(0x15e)},'native':{}}),await this[_0x3b3f77(0x176)](SYSTEM_DP_MODE,{'type':'state','common':{'name':_0x3b3f77(0xe5),'type':_0x3b3f77(0x175),'role':_0x3b3f77(0xb0),'read':!![],'write':!![],'def':SYSTEM_MODES[_0x3b3f77(0x1ed)],'states':{[SYSTEM_MODES[_0x3b3f77(0x1ed)]]:_0x3b3f77(0x1bc),[SYSTEM_MODES[_0x3b3f77(0x21c)]]:_0x3b3f77(0x113),[SYSTEM_MODES[_0x3b3f77(0x106)]]:_0x3b3f77(0xfe),[SYSTEM_MODES[_0x3b3f77(0x108)]]:_0x3b3f77(0x212)}},'native':{}});}async[a0_0x59e7c1(0x1ba)](){const _0x44b4d2=a0_0x59e7c1;try{const _0x249eb0=await this[_0x44b4d2(0x211)](SYSTEM_DP_MODE);_0x249eb0&&_0x249eb0[_0x44b4d2(0x204)]&&Object['values'](SYSTEM_MODES)[_0x44b4d2(0x1bf)](_0x249eb0[_0x44b4d2(0x204)])?this[_0x44b4d2(0x1d1)]=_0x249eb0[_0x44b4d2(0x204)]:(this[_0x44b4d2(0x1d1)]=SYSTEM_MODES[_0x44b4d2(0x1ed)],await this[_0x44b4d2(0x171)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x44b4d2(0x1ed)],'ack':!![]}));}catch(_0x578ea8){this[_0x44b4d2(0x1d1)]=SYSTEM_MODES[_0x44b4d2(0x1ed)];}}[a0_0x59e7c1(0x178)](){const _0x400a98=a0_0x59e7c1;if(this['modeResetJob'])this[_0x400a98(0x161)][_0x400a98(0x135)]();this[_0x400a98(0x161)]=schedule['scheduleJob'](MODE_RESET_SCHEDULE,async()=>{const _0x17dc40=_0x400a98;await this[_0x17dc40(0x1ba)](),AUTO_RESET_MODES[_0x17dc40(0x1bf)](this['currentSystemMode'])&&await this[_0x17dc40(0x171)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x17dc40(0x1ed)],'ack':![]});});}async[a0_0x59e7c1(0x183)](){const _0x122b0f=a0_0x59e7c1;if(!this[_0x122b0f(0x1db)]){await this[_0x122b0f(0x171)](LTM_DP_BASELINE_STATUS,{'val':_0x122b0f(0x1e4),'ack':!![]});return;}const _0x1abfb2=this[_0x122b0f(0x15f)][_0x122b0f(0x1a9)]>=(this['config'][_0x122b0f(0x1f6)]||0x7)?_0x122b0f(0x196)+this[_0x122b0f(0x15f)]['length']+_0x122b0f(0xde):_0x122b0f(0x1c1)+this[_0x122b0f(0x15f)][_0x122b0f(0x1a9)]+'/'+(this['config']['minDaysForBaseline']||0x7)+')';await this[_0x122b0f(0x171)](LTM_DP_BASELINE_STATUS,{'val':_0x1abfb2,'ack':!![]});}async[a0_0x59e7c1(0x102)](){const _0x5dde17=a0_0x59e7c1;await this['extendObjectAsync'](_0x5dde17(0xed),{'type':_0x5dde17(0x144),'common':{'name':'LTM'},'native':{}}),await this[_0x5dde17(0x176)](LTM_DP_RAW_LOG,{'type':_0x5dde17(0xb0),'common':{'name':_0x5dde17(0x237),'type':_0x5dde17(0x175),'role':_0x5dde17(0xd2),'read':!![],'write':![]},'native':{}}),await this[_0x5dde17(0x176)](LTM_DP_DAILY_DIGESTS,{'type':_0x5dde17(0xb0),'common':{'name':_0x5dde17(0x10c),'type':'string','role':_0x5dde17(0xd2),'read':!![],'write':![]},'native':{}}),await this[_0x5dde17(0x176)](LTM_DP_STATUS,{'type':_0x5dde17(0xb0),'common':{'name':_0x5dde17(0xf1),'type':'string','role':'text','read':!![],'write':![]},'native':{}}),await this[_0x5dde17(0x176)](LTM_DP_TRIGGER_DIGEST,{'type':_0x5dde17(0xb0),'common':{'name':_0x5dde17(0x11c),'type':'boolean','role':'button','read':!![],'write':!![],'def':![]},'native':{}}),await this['extendObjectAsync'](LTM_DP_BASELINE_STATUS,{'type':_0x5dde17(0xb0),'common':{'name':_0x5dde17(0xd4),'type':'string','role':_0x5dde17(0xa0),'read':!![],'write':![]},'native':{}});}async['checkLtmDriftObjects'](){const _0x1a6d98=a0_0x59e7c1;await this[_0x1a6d98(0x176)](LTM_DP_DRIFT_CHANNEL,{'type':_0x1a6d98(0x144),'common':{'name':'Drift\x20Analysis'},'native':{}}),await this[_0x1a6d98(0x176)](LTM_DP_DRIFT_STATUS,{'type':'state','common':{'name':_0x1a6d98(0x166),'type':_0x1a6d98(0x175),'role':_0x1a6d98(0xb0),'read':!![],'write':![],'def':_0x1a6d98(0x18b)},'native':{}}),await this[_0x1a6d98(0x176)](LTM_DP_DRIFT_DETAILS,{'type':_0x1a6d98(0xb0),'common':{'name':_0x1a6d98(0x9c),'type':_0x1a6d98(0x175),'role':_0x1a6d98(0xa0),'read':!![],'write':![]},'native':{}}),await this[_0x1a6d98(0x176)](LTM_DP_DRIFT_LAST_CHECK,{'type':_0x1a6d98(0xb0),'common':{'name':_0x1a6d98(0x1bd),'type':_0x1a6d98(0x121),'role':'date','read':!![],'write':![]},'native':{}});}async[a0_0x59e7c1(0x1cb)](){const _0x248c14=a0_0x59e7c1;try{const _0x457fbf=await this[_0x248c14(0x211)](LTM_DP_RAW_LOG);if(_0x457fbf&&_0x457fbf[_0x248c14(0x204)])this['rawEventLog']=JSON['parse'](_0x457fbf[_0x248c14(0x204)]);}catch(_0x267697){this['rawEventLog']=[];}}async['saveRawEventLog'](){const _0x1e86e3=a0_0x59e7c1;this[_0x1e86e3(0xb6)]['length']>RAW_LOG_MAX_SIZE&&this['rawEventLog']['splice'](0x0,this[_0x1e86e3(0xb6)][_0x1e86e3(0x1a9)]-RAW_LOG_MAX_SIZE),await this['setStateAsync'](LTM_DP_RAW_LOG,{'val':JSON[_0x1e86e3(0x23a)](this['rawEventLog']),'ack':!![]});}async[a0_0x59e7c1(0x1e0)](){const _0x45bdb6=a0_0x59e7c1;try{const _0x13ccc4=await this['getStateAsync'](LTM_DP_DAILY_DIGESTS);if(_0x13ccc4&&_0x13ccc4['val'])this[_0x45bdb6(0x15f)]=JSON[_0x45bdb6(0x123)](_0x13ccc4[_0x45bdb6(0x204)]);}catch(_0x4922c4){this['dailyDigests']=[];}await this[_0x45bdb6(0x183)]();}async[a0_0x59e7c1(0x9e)](_0x487f6b=!![]){const _0x5d8d9d=a0_0x59e7c1,_0x16b44b=this[_0x5d8d9d(0xa3)][_0x5d8d9d(0x15d)]||0x3c;this['dailyDigests'][_0x5d8d9d(0x1a9)]>_0x16b44b&&this[_0x5d8d9d(0x15f)][_0x5d8d9d(0x1a2)](0x0,this[_0x5d8d9d(0x15f)][_0x5d8d9d(0x1a9)]-_0x16b44b);await this[_0x5d8d9d(0x171)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x5d8d9d(0x23a)](this['dailyDigests']),'ack':!![]});if(_0x487f6b)await this[_0x5d8d9d(0x183)]();}[a0_0x59e7c1(0x207)](){const _0x3f7ec5=a0_0x59e7c1;if(this[_0x3f7ec5(0xf7)])this['ltmJob']['cancel']();if(!this[_0x3f7ec5(0x1db)]){this['setStateAsync'](LTM_DP_STATUS,{'val':'Deaktiviert\x20(Pro-Feature)','ack':!![]});return;}this['ltmJob']=schedule[_0x3f7ec5(0x145)](LTM_SCHEDULE,()=>this[_0x3f7ec5(0x110)]());}[a0_0x59e7c1(0x190)](){const _0x341b20=a0_0x59e7c1;if(this[_0x341b20(0x222)])clearInterval(this['driftAnalysisTimer']);if(!this['isProVersion'])return;this[_0x341b20(0x222)]=setInterval(()=>this[_0x341b20(0x1b5)](),(this[_0x341b20(0xa3)][_0x341b20(0x16e)]||0x18)*0x36ee80),setTimeout(()=>this[_0x341b20(0x1b5)](),0x1388);}async['resetAnalysisStates'](){const _0x127311=a0_0x59e7c1;await this[_0x127311(0x171)](_0x127311(0x14d),{'val':_0x127311(0x18c),'ack':!![]}),await this[_0x127311(0x171)](_0x127311(0x13b),{'val':this['isProVersion']?_0x127311(0xbb):'N/A\x20(Pro\x20Feature)','ack':!![]}),await this[_0x127311(0x171)](_0x127311(0xdf),{'val':![],'ack':!![]}),this[_0x127311(0xf0)]=![];}async[a0_0x59e7c1(0x236)](_0x2e855e){const _0x479a9e=a0_0x59e7c1;this[_0x479a9e(0xe3)][_0x479a9e(0xb5)](_0x2e855e);if(this[_0x479a9e(0xe3)][_0x479a9e(0x1a9)]>ANALYSIS_HISTORY_MAX_SIZE)this['analysisHistory'][_0x479a9e(0x152)]();await this[_0x479a9e(0x171)](_0x479a9e(0x1c0),{'val':JSON[_0x479a9e(0x23a)](this[_0x479a9e(0xe3)]),'ack':!![]});}async[a0_0x59e7c1(0xd6)](_0x19d9aa,_0x441bf6=![]){const _0x1250cd=a0_0x59e7c1;this[_0x1250cd(0x141)][_0x1250cd(0x154)]((_0x441bf6?'[TEST]\x20':'')+'Sending\x20notification:\x20\x22'+_0x19d9aa+'\x22');const _0x5a41bb=this['config'];let _0x507bfb=0x0;return _0x5a41bb['notifyTelegramEnabled']&&_0x5a41bb[_0x1250cd(0x1fe)]&&(await this['sendToAsync'](_0x5a41bb[_0x1250cd(0x1fe)],_0x1250cd(0x16f),{'text':_0x19d9aa,'user':_0x5a41bb[_0x1250cd(0x122)]}),_0x507bfb++),_0x5a41bb[_0x1250cd(0x1e9)]&&_0x5a41bb[_0x1250cd(0x130)]&&(await this[_0x1250cd(0xf9)](_0x5a41bb[_0x1250cd(0x130)],'send',{'message':_0x19d9aa,'title':_0x1250cd(0x12b),'priority':0x1,'device':_0x5a41bb['notifyPushoverRecipient']}),_0x507bfb++),_0x5a41bb[_0x1250cd(0x1a0)]&&_0x5a41bb[_0x1250cd(0xa4)]&&(await this[_0x1250cd(0xf9)](_0x5a41bb[_0x1250cd(0xa4)],_0x1250cd(0x16f),{'text':_0x19d9aa,'to':_0x5a41bb[_0x1250cd(0x13d)]}),_0x507bfb++),_0x5a41bb[_0x1250cd(0xef)]&&_0x5a41bb[_0x1250cd(0xfc)]&&(await this[_0x1250cd(0xf9)](_0x5a41bb[_0x1250cd(0xfc)],'send',{'text':_0x19d9aa,'phone':_0x5a41bb[_0x1250cd(0xb4)]}),_0x507bfb++),_0x5a41bb[_0x1250cd(0x1f9)]&&_0x5a41bb[_0x1250cd(0x160)]&&(await this[_0x1250cd(0xf9)](_0x5a41bb[_0x1250cd(0x160)],'send',{'text':_0x19d9aa,'phone':_0x5a41bb[_0x1250cd(0x12d)]}),_0x507bfb++),_0x507bfb;}async[a0_0x59e7c1(0x1d9)](_0x317fb0){const _0x406b61=a0_0x59e7c1;this[_0x406b61(0x104)][_0x406b61(0xb5)](_0x317fb0);if(this['feedbackHistory'][_0x406b61(0x1a9)]>FEEDBACK_MAX_SIZE)this[_0x406b61(0x104)][_0x406b61(0x152)]();await this['setStateAsync'](_0x406b61(0x150),{'val':JSON[_0x406b61(0x23a)](this['feedbackHistory']),'ack':!![]}),this[_0x406b61(0x141)][_0x406b61(0x154)]('Feedback\x20gespeichert:\x20'+_0x317fb0[_0x406b61(0xd3)]+_0x406b61(0x127)+_0x317fb0[_0x406b61(0x139)]);}[a0_0x59e7c1(0xdb)](_0x410caa){const _0x209791=a0_0x59e7c1;if(this[_0x209791(0x105)])clearInterval(this[_0x209791(0x105)]);if(this[_0x209791(0x222)])clearInterval(this[_0x209791(0x222)]);if(this[_0x209791(0xf7)])this['ltmJob'][_0x209791(0x135)]();if(this[_0x209791(0x161)])this[_0x209791(0x161)]['cancel']();_0x410caa();}async['onMessage'](_0x7b5bda){const _0x3e7af1=a0_0x59e7c1;if(typeof _0x7b5bda==='object'&&_0x7b5bda[_0x3e7af1(0x1bb)]){if(_0x7b5bda[_0x3e7af1(0x11b)]===_0x3e7af1(0x22c)){if(!_0x7b5bda['message'][_0x3e7af1(0x99)])return this['sendTo'](_0x7b5bda['from'],_0x7b5bda[_0x3e7af1(0x11b)],{'success':![],'message':_0x3e7af1(0x194)},_0x7b5bda[_0x3e7af1(0xe0)]);try{const _0x487c2d=new GoogleGenerativeAI(_0x7b5bda['message'][_0x3e7af1(0x99)])[_0x3e7af1(0x1ce)]({'model':_0x3e7af1(0x180)});await _0x487c2d['generateContent'](_0x3e7af1(0x1df)),this['sendTo'](_0x7b5bda[_0x3e7af1(0x1d7)],_0x7b5bda[_0x3e7af1(0x11b)],{'success':!![],'message':_0x3e7af1(0x1a3)},_0x7b5bda['callback']);}catch(_0x5a4a08){this['sendTo'](_0x7b5bda[_0x3e7af1(0x1d7)],_0x7b5bda[_0x3e7af1(0x11b)],{'success':![],'message':_0x5a4a08[_0x3e7af1(0x1bb)]},_0x7b5bda[_0x3e7af1(0xe0)]);}}else{if(_0x7b5bda[_0x3e7af1(0x11b)]===_0x3e7af1(0x224)){const _0x2e17c2=await this['sendNotification'](_0x3e7af1(0x200),!![]);this[_0x3e7af1(0x1b0)](_0x7b5bda[_0x3e7af1(0x1d7)],_0x7b5bda[_0x3e7af1(0x11b)],{'success':_0x2e17c2>0x0,'message':_0x2e17c2+'\x20sent'},_0x7b5bda[_0x3e7af1(0xe0)]);}else{if(_0x7b5bda[_0x3e7af1(0x11b)]===_0x3e7af1(0x1d4)){if(!this['isProVersion'])return this[_0x3e7af1(0x1b0)](_0x7b5bda[_0x3e7af1(0x1d7)],_0x7b5bda[_0x3e7af1(0x11b)],{'success':![],'isPro':![]},_0x7b5bda[_0x3e7af1(0xe0)]);let _0x4ac31e={'status':'N/A','details':'','lastCheck':0x0};try{_0x4ac31e['status']=(await this[_0x3e7af1(0x211)](LTM_DP_DRIFT_STATUS))['val'],_0x4ac31e[_0x3e7af1(0x17f)]=(await this[_0x3e7af1(0x211)](LTM_DP_DRIFT_DETAILS))[_0x3e7af1(0x204)],_0x4ac31e[_0x3e7af1(0x1d0)]=(await this[_0x3e7af1(0x211)](LTM_DP_DRIFT_LAST_CHECK))[_0x3e7af1(0x204)];}catch(_0x5b050d){}this['sendTo'](_0x7b5bda['from'],_0x7b5bda['command'],{'success':!![],'isPro':!![],'dailyDigests':this[_0x3e7af1(0x15f)],'driftAnalysis':_0x4ac31e,'analysisHistory':this[_0x3e7af1(0xe3)]},_0x7b5bda[_0x3e7af1(0xe0)]);}else{if(_0x7b5bda['command']===_0x3e7af1(0x172)){const _0x3e7efd=await this[_0x3e7af1(0x13f)]('enum.functions.*',_0x3e7af1(0x158)),_0xf973c6=[];if(_0x3e7efd)for(const _0x18e0c3 in _0x3e7efd){const _0x432a53=_0x3e7efd[_0x18e0c3],_0x5e3498=(_0x432a53[_0x3e7af1(0x148)]&&typeof _0x432a53['common'][_0x3e7af1(0x132)]===_0x3e7af1(0xb8)?_0x432a53['common'][_0x3e7af1(0x132)]['de']:_0x432a53[_0x3e7af1(0x148)][_0x3e7af1(0x132)])||_0x432a53[_0x3e7af1(0x148)][_0x3e7af1(0x132)];_0xf973c6[_0x3e7af1(0x239)]({'id':_0x18e0c3,'name':_0x5e3498});}this['sendTo'](_0x7b5bda[_0x3e7af1(0x1d7)],_0x7b5bda[_0x3e7af1(0x11b)],{'success':!![],'enums':_0xf973c6},_0x7b5bda[_0x3e7af1(0xe0)]);}else{if(_0x7b5bda[_0x3e7af1(0x11b)]===_0x3e7af1(0x23c)){this['log']['info'](_0x3e7af1(0x159));const _0x3111cc=_0x7b5bda['message']||{};try{const _0x565c5a=await this[_0x3e7af1(0x1aa)](_0x3111cc);this['sendTo'](_0x7b5bda[_0x3e7af1(0x1d7)],_0x7b5bda['command'],{'success':!![],'devices':_0x565c5a},_0x7b5bda['callback']);}catch(_0x11078e){this['sendTo'](_0x7b5bda['from'],_0x7b5bda[_0x3e7af1(0x11b)],{'success':![],'error':_0x11078e[_0x3e7af1(0x1bb)]},_0x7b5bda[_0x3e7af1(0xe0)]);}}else{if(_0x7b5bda['command']===_0x3e7af1(0x167)){const {historyId:_0x26d518,rating:_0x3df649,comment:_0x8ad5e7,alertReason:_0xf36bd9}=_0x7b5bda[_0x3e7af1(0x1bb)];_0x26d518&&_0x3df649?(await this[_0x3e7af1(0x1d9)]({'timestamp':Date[_0x3e7af1(0x177)](),'historyId':_0x26d518,'rating':_0x3df649,'comment':_0x8ad5e7,'alertReason':_0xf36bd9}),this[_0x3e7af1(0x1b0)](_0x7b5bda[_0x3e7af1(0x1d7)],_0x7b5bda[_0x3e7af1(0x11b)],{'success':!![]},_0x7b5bda[_0x3e7af1(0xe0)])):this[_0x3e7af1(0x1b0)](_0x7b5bda[_0x3e7af1(0x1d7)],_0x7b5bda[_0x3e7af1(0x11b)],{'success':![],'error':'Missing\x20data'},_0x7b5bda[_0x3e7af1(0xe0)]);}}}}}}}}}if(require['main']!==module)module[a0_0x59e7c1(0x13a)]=_0x41bc56=>new CogniLiving(_0x41bc56);else new CogniLiving();