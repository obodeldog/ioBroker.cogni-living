const a0_0x4ed656=a0_0x12d1;(function(_0x4e33b4,_0xef17b9){const _0x10662d=a0_0x12d1,_0x220683=_0x4e33b4();while(!![]){try{const _0x3840a0=-parseInt(_0x10662d(0x138))/0x1+-parseInt(_0x10662d(0x11d))/0x2*(-parseInt(_0x10662d(0x109))/0x3)+-parseInt(_0x10662d(0x133))/0x4+-parseInt(_0x10662d(0x27a))/0x5+parseInt(_0x10662d(0x200))/0x6*(-parseInt(_0x10662d(0x117))/0x7)+parseInt(_0x10662d(0xe3))/0x8*(-parseInt(_0x10662d(0xf0))/0x9)+parseInt(_0x10662d(0x280))/0xa*(parseInt(_0x10662d(0x27d))/0xb);if(_0x3840a0===_0xef17b9)break;else _0x220683['push'](_0x220683['shift']());}catch(_0x236eb4){_0x220683['push'](_0x220683['shift']());}}}(a0_0xe0d3,0xf0af2));const a0_0x225786=(function(){let _0x93d176=!![];return function(_0x3165a5,_0x4ab1e2){const _0x526652=_0x93d176?function(){const _0x488b3f=a0_0x12d1;if(_0x4ab1e2){const _0x3c0070=_0x4ab1e2[_0x488b3f(0x14e)](_0x3165a5,arguments);return _0x4ab1e2=null,_0x3c0070;}}:function(){};return _0x93d176=![],_0x526652;};}()),a0_0x24a451=a0_0x225786(this,function(){const _0x591204=a0_0x12d1;return a0_0x24a451[_0x591204(0x182)]()[_0x591204(0x216)](_0x591204(0x206))[_0x591204(0x182)]()['constructor'](a0_0x24a451)[_0x591204(0x216)](_0x591204(0x206));});a0_0x24a451();'use strict';const utils=require('@iobroker/adapter-core'),{GoogleGenerativeAI}=require(a0_0x4ed656(0x11c)),schedule=require(a0_0x4ed656(0x13f)),{spawn,exec}=require(a0_0x4ed656(0x162)),path=require('path'),fs=require('fs'),HISTORY_MAX_SIZE=0x32,RAW_LOG_MAX_SIZE=0x5dc,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL='models/gemini-flash-latest',LTM_SCHEDULE=a0_0x4ed656(0x1ed),MODE_RESET_SCHEDULE=a0_0x4ed656(0x1ac),ANALYSIS_HISTORY_MAX_SIZE=0x64,EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,SEQUENCE_TIMEOUT_MS=0x5*0x3c*0x3e8,MAX_TRAINING_SET_SIZE=0x1f4,THERMO_LOG_SIZE=0x3e8,LTM_DP_RAW_LOG=a0_0x4ed656(0xfc),LTM_DP_DAILY_DIGESTS=a0_0x4ed656(0x1ae),LTM_DP_STATUS='LTM.processingStatus',LTM_DP_TRIGGER_DIGEST='LTM.triggerDailyDigest',LTM_DP_BASELINE_STATUS='LTM.baselineStatus',LTM_DP_DRIFT_CHANNEL=a0_0x4ed656(0x13c),LTM_DP_DRIFT_STATUS=a0_0x4ed656(0x14c),LTM_DP_DRIFT_DETAILS=a0_0x4ed656(0x1a4),LTM_DP_DRIFT_LAST_CHECK=a0_0x4ed656(0x269),SYSTEM_DP_MODE=a0_0x4ed656(0x1cd),HARD_IGNORE_TERMS=[a0_0x4ed656(0x224),a0_0x4ed656(0xbf),'update',a0_0x4ed656(0x190),a0_0x4ed656(0xfb),a0_0x4ed656(0x1cc),'connection','maintenance',a0_0x4ed656(0x19c),'fault','working',a0_0x4ed656(0x155),a0_0x4ed656(0xe9),a0_0x4ed656(0x17f),a0_0x4ed656(0x26b),a0_0x4ed656(0x1a2),'reachable',a0_0x4ed656(0x17e)],BAD_NAMES=[a0_0x4ed656(0x1bd),a0_0x4ed656(0x250),'state',a0_0x4ed656(0x14f),a0_0x4ed656(0x16b),a0_0x4ed656(0x20e),'on',a0_0x4ed656(0x119),a0_0x4ed656(0x1e4),a0_0x4ed656(0x252),'shutter','blind','cover',a0_0x4ed656(0x254),a0_0x4ed656(0x1de),'presence','occupancy',a0_0x4ed656(0x159),'humidity','power',a0_0x4ed656(0x1b9),a0_0x4ed656(0x1a6),a0_0x4ed656(0x272),a0_0x4ed656(0x178),a0_0x4ed656(0x1e7)],ADAPTER_BLACKLIST=[a0_0x4ed656(0x104),'admin.','info.','vis.',a0_0x4ed656(0x202),a0_0x4ed656(0xe5),'icons-mfd.',a0_0x4ed656(0xdf),'echarts.','javascript.','simple-api.'],SYSTEM_MODES={'NORMAL':a0_0x4ed656(0x129),'VACATION':a0_0x4ed656(0x1fc),'PARTY':a0_0x4ed656(0x27b),'GUEST':a0_0x4ed656(0x1f0)},AUTO_RESET_MODES=[SYSTEM_MODES[a0_0x4ed656(0x1d5)],SYSTEM_MODES[a0_0x4ed656(0x22d)]],PERSONA_MAPPING={'generic':'Analysiere\x20ausgewogen.','senior_aal':a0_0x4ed656(0x111),'family':'Fokus\x20auf\x20Familienroutinen.','single_comfort':'Fokus\x20auf\x20Komfort.','security':'PRIORIT√ÑT:\x20Sicherheit.'},ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0},IS_WIN=process[a0_0x4ed656(0x26e)]==='win32',VENV_PATH=path[a0_0x4ed656(0x21f)](__dirname,'.venv'),PYTHON_EXE=IS_WIN?path[a0_0x4ed656(0x21f)](VENV_PATH,'Scripts',a0_0x4ed656(0x1fa)):path[a0_0x4ed656(0x21f)](VENV_PATH,a0_0x4ed656(0x219),a0_0x4ed656(0xd4)),PIP_EXE=IS_WIN?path[a0_0x4ed656(0x21f)](VENV_PATH,'Scripts',a0_0x4ed656(0x136)):path[a0_0x4ed656(0x21f)](VENV_PATH,a0_0x4ed656(0x219),a0_0x4ed656(0x263));let activeSequence=[],sequenceTimer=null;async function initZombies(_0x1f3eca){const _0x1982f9=a0_0x4ed656;try{const _0x25ea22=[_0x1982f9(0x210),_0x1982f9(0x215)];for(const _0x5dffc3 of _0x25ea22){try{const _0x2b142d=await _0x1f3eca[_0x1982f9(0xb4)](_0x5dffc3);_0x2b142d&&await _0x1f3eca['delObjectAsync'](_0x5dffc3);}catch(_0x47d6a0){}}}catch(_0x27d39e){}}async function initHistory(_0x4bbfad){const _0x3e40e3=a0_0x4ed656;try{const _0x10f9f2=await _0x4bbfad[_0x3e40e3(0x26c)](_0x3e40e3(0x161));_0x10f9f2&&_0x10f9f2[_0x3e40e3(0x1b8)]&&(_0x4bbfad[_0x3e40e3(0x195)]=JSON[_0x3e40e3(0x132)](_0x10f9f2['val'][_0x3e40e3(0x182)]()));}catch(_0x4b9775){_0x4bbfad[_0x3e40e3(0x195)]=[];}try{const _0x4069b0=await _0x4bbfad['getStateAsync'](_0x3e40e3(0x15a));if(_0x4069b0&&_0x4069b0[_0x3e40e3(0x1b8)])_0x4bbfad[_0x3e40e3(0x1e5)]=JSON['parse'](_0x4069b0['val'][_0x3e40e3(0x182)]());}catch(_0x410e3a){_0x4bbfad[_0x3e40e3(0x1e5)]=[];}if(_0x4bbfad[_0x3e40e3(0x195)]&&_0x4bbfad[_0x3e40e3(0x195)]['length']>0x0){_0x4bbfad[_0x3e40e3(0xa9)][_0x3e40e3(0x171)](_0x3e40e3(0x151)+_0x4bbfad[_0x3e40e3(0x195)][_0x3e40e3(0xe2)]+'\x20events)...');for(let _0x3a10b6=_0x4bbfad[_0x3e40e3(0x195)][_0x3e40e3(0xe2)]-0x1;_0x3a10b6>=0x0;_0x3a10b6--){const _0x81ef8d=_0x4bbfad['eventHistory'][_0x3a10b6];_0x81ef8d&&_0x81ef8d['id']!==undefined&&_0x81ef8d[_0x3e40e3(0x16b)]!==undefined&&(_0x4bbfad[_0x3e40e3(0x157)][_0x81ef8d['id']]=_0x81ef8d['value']);}}}async function initSystemConfig(_0x5d8949){const _0x399c56=a0_0x4ed656;try{const _0x11016c=await _0x5d8949[_0x399c56(0x158)](_0x399c56(0x1ea));_0x11016c&&_0x11016c['common']&&(_0x5d8949[_0x399c56(0x184)]={'latitude':_0x11016c[_0x399c56(0x168)][_0x399c56(0x20b)]||0x0,'longitude':_0x11016c[_0x399c56(0x168)][_0x399c56(0xcb)]||0x0,'city':_0x11016c[_0x399c56(0x168)][_0x399c56(0x20c)]||''});}catch(_0x56762c){}}async function checkLicense(_0xd74b7f,_0x15cb90){const _0x32d3fc=a0_0x4ed656;if(!_0x15cb90)return![];_0xd74b7f['systemUUID']=await getSystemUUID(_0xd74b7f);if(_0x15cb90===_0x32d3fc(0x100)||_0x15cb90[_0x32d3fc(0x127)](_0x32d3fc(0x27c)))return!![];return![];}async function getSystemUUID(_0x17a5cc){const _0x52b358=a0_0x4ed656;try{const _0x553da2=await _0x17a5cc[_0x52b358(0x158)]('system.meta.uuid');if(_0x553da2&&_0x553da2['native']&&_0x553da2['native']['uuid'])return _0x553da2['native'][_0x52b358(0x167)];return'uuid-not-found';}catch(_0x334415){return'uuid-error';}}async function createAllObjects(_0x1d817d){const _0x4b9989=a0_0x4ed656;await checkSystemObjects(_0x1d817d),await _0x1d817d[_0x4b9989(0x1aa)](_0x4b9989(0x1f7),{'type':'state','common':{'name':_0x4b9989(0xb3),'type':_0x4b9989(0xc8),'role':'text','read':!![],'write':![],'def':''},'native':{}}),await _0x1d817d[_0x4b9989(0x1aa)]('events.lastEvent',{'type':_0x4b9989(0xa3),'common':{'name':_0x4b9989(0x27f),'type':_0x4b9989(0xc8),'role':_0x4b9989(0x1c4),'read':!![],'write':![]},'native':{}}),await _0x1d817d['setObjectNotExistsAsync']('events.history',{'type':_0x4b9989(0xa3),'common':{'name':_0x4b9989(0x1c6),'type':_0x4b9989(0xc8),'role':_0x4b9989(0x1c4),'read':!![],'write':![]},'native':{}}),await _0x1d817d[_0x4b9989(0x1aa)](_0x4b9989(0x1f3),{'type':_0x4b9989(0xa3),'common':{'name':_0x4b9989(0x1d4),'type':_0x4b9989(0x10b),'role':_0x4b9989(0x197),'read':!![],'write':!![],'def':![]},'native':{}}),await _0x1d817d['setObjectNotExistsAsync'](_0x4b9989(0x15f),{'type':_0x4b9989(0xa3),'common':{'name':_0x4b9989(0x1a5),'type':_0x4b9989(0x10b),'role':_0x4b9989(0x197),'read':!![],'write':!![],'def':![]},'native':{}}),await _0x1d817d[_0x4b9989(0x12e)](_0x4b9989(0x12a),{'type':'channel','common':{'name':_0x4b9989(0x246)},'native':{}}),await _0x1d817d[_0x4b9989(0x1aa)](_0x4b9989(0x1db),{'type':_0x4b9989(0xa3),'common':{'name':'Train\x20Security\x20Model\x20(LSTM)','type':'boolean','role':_0x4b9989(0x197),'read':!![],'write':!![],'def':![]},'native':{}}),await _0x1d817d[_0x4b9989(0x1aa)](_0x4b9989(0xca),{'type':_0x4b9989(0xa3),'common':{'name':_0x4b9989(0xcc),'type':_0x4b9989(0x10b),'role':'button','read':!![],'write':!![],'def':![]},'native':{}}),await _0x1d817d[_0x4b9989(0x1aa)](_0x4b9989(0x15e),{'type':'state','common':{'name':_0x4b9989(0xbb),'type':_0x4b9989(0x10b),'role':_0x4b9989(0x197),'read':!![],'write':!![],'def':![]},'native':{}}),await _0x1d817d[_0x4b9989(0x1aa)]('analysis.training.status',{'type':'state','common':{'name':_0x4b9989(0x262),'type':'string','role':_0x4b9989(0x1ff),'read':!![],'write':![],'def':'Idle'},'native':{}}),await _0x1d817d[_0x4b9989(0x12e)](_0x4b9989(0x188),{'type':_0x4b9989(0x156),'common':{'name':_0x4b9989(0x18d)},'native':{}}),await _0x1d817d[_0x4b9989(0x1aa)](_0x4b9989(0x183),{'type':_0x4b9989(0xa3),'common':{'name':'Last\x20Anomaly\x20Score','type':_0x4b9989(0x1e1),'role':_0x4b9989(0x16b),'read':!![],'write':![],'def':0x0},'native':{}}),await _0x1d817d[_0x4b9989(0x1aa)](_0x4b9989(0x1bb),{'type':'state','common':{'name':_0x4b9989(0x25e),'type':_0x4b9989(0xc8),'role':'date','read':!![],'write':![],'def':''},'native':{}}),await _0x1d817d[_0x4b9989(0x1aa)](_0x4b9989(0x233),{'type':_0x4b9989(0xa3),'common':{'name':_0x4b9989(0xc6),'type':'string','role':_0x4b9989(0x201),'read':!![],'write':![],'def':''},'native':{}}),await _0x1d817d[_0x4b9989(0x1aa)](_0x4b9989(0x18b),{'type':_0x4b9989(0xa3),'common':{'name':'Health\x20Anomaly\x20Detected','type':_0x4b9989(0x10b),'role':_0x4b9989(0x1c9),'read':!![],'write':![],'def':![]},'native':{}}),await _0x1d817d[_0x4b9989(0x12e)]('analysis.energy',{'type':_0x4b9989(0x156),'common':{'name':_0x4b9989(0x24b)},'native':{}}),await _0x1d817d[_0x4b9989(0x1aa)]('analysis.energy.insulationScore',{'type':_0x4b9989(0xa3),'common':{'name':_0x4b9989(0x140),'type':_0x4b9989(0xc8),'role':_0x4b9989(0x1ff),'read':!![],'write':![],'def':_0x4b9989(0x21b)},'native':{}}),await _0x1d817d[_0x4b9989(0x1aa)](_0x4b9989(0x19b),{'type':_0x4b9989(0xa3),'common':{'name':_0x4b9989(0xde),'type':_0x4b9989(0xc8),'role':_0x4b9989(0x1ff),'read':!![],'write':![],'def':_0x4b9989(0x21b)},'native':{}}),await _0x1d817d[_0x4b9989(0x1aa)](_0x4b9989(0x1df),{'type':_0x4b9989(0xa3),'common':{'name':'Last\x20Result','type':_0x4b9989(0xc8),'role':_0x4b9989(0x1c4),'read':!![],'write':![]},'native':{}}),await _0x1d817d['setObjectNotExistsAsync'](_0x4b9989(0x12c),{'type':_0x4b9989(0xa3),'common':{'name':_0x4b9989(0xee),'type':_0x4b9989(0x10b),'role':'indicator.alarm','read':!![],'write':![],'def':![]},'native':{}}),await _0x1d817d['setObjectNotExistsAsync'](_0x4b9989(0x245),{'type':_0x4b9989(0xa3),'common':{'name':_0x4b9989(0x1c3),'type':_0x4b9989(0x10b),'role':_0x4b9989(0x101),'read':!![],'write':![],'def':![]},'native':{}}),await _0x1d817d[_0x4b9989(0x1aa)](_0x4b9989(0x205),{'type':_0x4b9989(0xa3),'common':{'name':_0x4b9989(0x17b),'type':_0x4b9989(0xc8),'role':_0x4b9989(0x13e),'read':!![],'write':![]},'native':{}}),await _0x1d817d[_0x4b9989(0x1aa)](_0x4b9989(0x207),{'type':_0x4b9989(0xa3),'common':{'name':_0x4b9989(0x17d),'type':'string','role':'text','read':!![],'write':![]},'native':{}}),await _0x1d817d[_0x4b9989(0x1aa)]('analysis.deviationFromBaseline',{'type':'state','common':{'name':'Deviation','type':'string','role':'state','read':!![],'write':![],'def':'N/A'},'native':{}}),await _0x1d817d['setObjectNotExistsAsync'](_0x4b9989(0x230),{'type':_0x4b9989(0xa3),'common':{'name':_0x4b9989(0x1d0),'type':_0x4b9989(0xc8),'role':_0x4b9989(0x1ff),'read':!![],'write':![]},'native':{}}),await _0x1d817d[_0x4b9989(0x1aa)](_0x4b9989(0x1da),{'type':_0x4b9989(0xa3),'common':{'name':_0x4b9989(0x186),'type':_0x4b9989(0xc8),'role':_0x4b9989(0x1ff),'read':!![],'write':![]},'native':{}}),await _0x1d817d[_0x4b9989(0x12e)](_0x4b9989(0xe7),{'type':_0x4b9989(0x156),'common':{'name':_0x4b9989(0x142)},'native':{}}),await _0x1d817d[_0x4b9989(0x1aa)](_0x4b9989(0x276),{'type':_0x4b9989(0xa3),'common':{'name':_0x4b9989(0x240),'type':_0x4b9989(0x10b),'role':_0x4b9989(0x10a),'read':!![],'write':![],'def':![]},'native':{}}),await _0x1d817d[_0x4b9989(0x1aa)](_0x4b9989(0xe4),{'type':'state','common':{'name':_0x4b9989(0x14d),'type':'string','role':_0x4b9989(0x1ff),'read':!![],'write':![]},'native':{}}),await _0x1d817d['setObjectNotExistsAsync'](_0x4b9989(0x134),{'type':_0x4b9989(0xa3),'common':{'name':_0x4b9989(0xce),'type':_0x4b9989(0xc8),'role':_0x4b9989(0x1ff),'read':!![],'write':![]},'native':{}}),await _0x1d817d['setObjectNotExistsAsync']('analysis.automation.targetId',{'type':_0x4b9989(0xa3),'common':{'name':_0x4b9989(0xf4),'type':'string','role':_0x4b9989(0x1ff),'read':!![],'write':![]},'native':{}}),await _0x1d817d[_0x4b9989(0x1aa)](_0x4b9989(0xcd),{'type':_0x4b9989(0xa3),'common':{'name':_0x4b9989(0x22f),'type':'string','role':'text','read':!![],'write':![]},'native':{}}),await _0x1d817d[_0x4b9989(0x1aa)](_0x4b9989(0x170),{'type':_0x4b9989(0xa3),'common':{'name':_0x4b9989(0xef),'type':_0x4b9989(0x10b),'role':_0x4b9989(0x1e4),'read':!![],'write':!![],'def':![]},'native':{}}),await _0x1d817d[_0x4b9989(0x1aa)](_0x4b9989(0x241),{'type':_0x4b9989(0xa3),'common':{'name':_0x4b9989(0x152),'type':'boolean','role':'button','read':!![],'write':!![],'def':![]},'native':{}}),await _0x1d817d['setObjectNotExistsAsync'](_0x4b9989(0x15a),{'type':_0x4b9989(0xa3),'common':{'name':_0x4b9989(0x120),'type':_0x4b9989(0xc8),'role':_0x4b9989(0x1c4),'read':!![],'write':![],'def':'[]'},'native':{}}),await _0x1d817d[_0x4b9989(0x1aa)](_0x4b9989(0x227),{'type':_0x4b9989(0xa3),'common':{'name':_0x4b9989(0x228),'type':_0x4b9989(0xc8),'role':_0x4b9989(0x1c4),'read':!![],'write':![],'def':'[]'},'native':{}}),await _0x1d817d['extendObjectAsync'](_0x4b9989(0xd6),{'type':_0x4b9989(0x156),'common':{'name':'Health\x20&\x20Sleep\x20Analysis'},'native':{}}),await _0x1d817d[_0x4b9989(0x1aa)]('analysis.health.sleepScore',{'type':_0x4b9989(0xa3),'common':{'name':_0x4b9989(0xc1),'type':_0x4b9989(0x1e1),'role':_0x4b9989(0x1ce),'read':!![],'write':![],'def':0x0},'native':{}}),await _0x1d817d[_0x4b9989(0x1aa)](_0x4b9989(0xa8),{'type':'state','common':{'name':_0x4b9989(0x1b2),'type':_0x4b9989(0xc8),'role':_0x4b9989(0x1ff),'read':!![],'write':![],'def':_0x4b9989(0x11f)},'native':{}}),await _0x1d817d['setObjectNotExistsAsync'](_0x4b9989(0x10c),{'type':_0x4b9989(0xa3),'common':{'name':_0x4b9989(0x231),'type':_0x4b9989(0xc8),'role':_0x4b9989(0x1ff),'read':!![],'write':![],'def':''},'native':{}}),await _0x1d817d[_0x4b9989(0x1aa)](_0x4b9989(0xa1),{'type':'state','common':{'name':_0x4b9989(0x278),'type':_0x4b9989(0xc8),'role':_0x4b9989(0x1ff),'read':!![],'write':![],'def':_0x4b9989(0x21b)},'native':{}}),await _0x1d817d[_0x4b9989(0x1aa)](_0x4b9989(0x220),{'type':_0x4b9989(0xa3),'common':{'name':_0x4b9989(0x21e),'type':_0x4b9989(0x1e1),'role':_0x4b9989(0x16b),'read':!![],'write':![],'def':0x0},'native':{}}),await _0x1d817d[_0x4b9989(0x12e)]('LTM.trainingData',{'type':_0x4b9989(0x156),'common':{'name':_0x4b9989(0xd0)},'native':{}}),await _0x1d817d[_0x4b9989(0x1aa)](_0x4b9989(0x1e3),{'type':'state','common':{'name':_0x4b9989(0x191),'type':'string','role':_0x4b9989(0x1c4),'read':!![],'write':![],'def':'[]','desc':_0x4b9989(0x1b5)},'native':{}}),await _0x1d817d[_0x4b9989(0x1aa)]('LTM.trainingData.thermodynamics',{'type':_0x4b9989(0xa3),'common':{'name':_0x4b9989(0x16a),'type':_0x4b9989(0xc8),'role':'json','read':!![],'write':![],'def':'[]','desc':_0x4b9989(0x22e)},'native':{}}),await checkLtmObjects(_0x1d817d),await checkLtmDriftObjects(_0x1d817d);}async function checkSystemObjects(_0x333e41){const _0x186be2=a0_0x4ed656;await _0x333e41[_0x186be2(0x12e)](_0x186be2(0x177),{'type':_0x186be2(0x156),'common':{'name':_0x186be2(0x12b)},'native':{}}),await _0x333e41[_0x186be2(0x12e)](SYSTEM_DP_MODE,{'type':_0x186be2(0xa3),'common':{'name':_0x186be2(0x139),'type':_0x186be2(0xc8),'role':_0x186be2(0xa3),'read':!![],'write':!![],'def':SYSTEM_MODES['NORMAL'],'states':{[SYSTEM_MODES[_0x186be2(0x22a)]]:_0x186be2(0x1f2),[SYSTEM_MODES['VACATION']]:_0x186be2(0x271),[SYSTEM_MODES[_0x186be2(0x1d5)]]:_0x186be2(0x1d7),[SYSTEM_MODES['GUEST']]:_0x186be2(0x258)}},'native':{}});}async function checkLtmObjects(_0x1c0829){const _0x42a215=a0_0x4ed656;await _0x1c0829[_0x42a215(0x12e)](_0x42a215(0xfd),{'type':_0x42a215(0x156),'common':{'name':_0x42a215(0xfd)},'native':{}}),await _0x1c0829[_0x42a215(0x12e)](LTM_DP_RAW_LOG,{'type':_0x42a215(0xa3),'common':{'name':_0x42a215(0x1a0),'type':_0x42a215(0xc8),'role':_0x42a215(0x1c4),'read':!![],'write':![]},'native':{}}),await _0x1c0829['extendObjectAsync'](LTM_DP_DAILY_DIGESTS,{'type':'state','common':{'name':_0x42a215(0x209),'type':_0x42a215(0xc8),'role':_0x42a215(0x1c4),'read':!![],'write':![]},'native':{}}),await _0x1c0829[_0x42a215(0x12e)](LTM_DP_STATUS,{'type':_0x42a215(0xa3),'common':{'name':'Processing\x20Status','type':_0x42a215(0xc8),'role':_0x42a215(0x1ff),'read':!![],'write':![]},'native':{}}),await _0x1c0829[_0x42a215(0x12e)](LTM_DP_TRIGGER_DIGEST,{'type':_0x42a215(0xa3),'common':{'name':_0x42a215(0xb8),'type':_0x42a215(0x10b),'role':'button','read':!![],'write':!![],'def':![]},'native':{}}),await _0x1c0829[_0x42a215(0x12e)](LTM_DP_BASELINE_STATUS,{'type':_0x42a215(0xa3),'common':{'name':_0x42a215(0x266),'type':_0x42a215(0xc8),'role':_0x42a215(0x1ff),'read':!![],'write':![]},'native':{}});}async function checkLtmDriftObjects(_0x395e41){const _0x2d5496=a0_0x4ed656;await _0x395e41[_0x2d5496(0x12e)](LTM_DP_DRIFT_CHANNEL,{'type':_0x2d5496(0x156),'common':{'name':'Drift\x20Analysis'},'native':{}}),await _0x395e41['extendObjectAsync'](LTM_DP_DRIFT_STATUS,{'type':_0x2d5496(0xa3),'common':{'name':_0x2d5496(0x15c),'type':_0x2d5496(0xc8),'role':_0x2d5496(0xa3),'read':!![],'write':![],'def':_0x2d5496(0x21b)},'native':{}}),await _0x395e41[_0x2d5496(0x12e)](LTM_DP_DRIFT_DETAILS,{'type':'state','common':{'name':_0x2d5496(0x21c),'type':_0x2d5496(0xc8),'role':_0x2d5496(0x1ff),'read':!![],'write':![]},'native':{}}),await _0x395e41[_0x2d5496(0x12e)](LTM_DP_DRIFT_LAST_CHECK,{'type':_0x2d5496(0xa3),'common':{'name':'Last\x20Check','type':_0x2d5496(0x1e1),'role':_0x2d5496(0x201),'read':!![],'write':![]},'native':{}});}async function loadSystemMode(_0x4ae6fe){const _0x2f3ba3=a0_0x4ed656;try{const _0x311223=await _0x4ae6fe[_0x2f3ba3(0x26c)](SYSTEM_DP_MODE);_0x311223&&_0x311223['val']&&Object[_0x2f3ba3(0x208)](SYSTEM_MODES)[_0x2f3ba3(0x235)](_0x311223[_0x2f3ba3(0x1b8)])?_0x4ae6fe[_0x2f3ba3(0xac)]=_0x311223[_0x2f3ba3(0x1b8)]:(_0x4ae6fe['currentSystemMode']=SYSTEM_MODES[_0x2f3ba3(0x22a)],await _0x4ae6fe[_0x2f3ba3(0x23b)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x2f3ba3(0x22a)],'ack':!![]}));}catch(_0x91ba08){_0x4ae6fe[_0x2f3ba3(0xac)]=SYSTEM_MODES[_0x2f3ba3(0x22a)];}}async function loadRawEventLog(_0x1426df){const _0x2aed13=a0_0x4ed656;try{const _0x196c91=await _0x1426df[_0x2aed13(0x26c)](LTM_DP_RAW_LOG);if(_0x196c91&&_0x196c91[_0x2aed13(0x1b8)])_0x1426df[_0x2aed13(0x22b)]=JSON[_0x2aed13(0x132)](_0x196c91[_0x2aed13(0x1b8)]);}catch(_0x1c7ea3){_0x1426df[_0x2aed13(0x22b)]=[];}}async function saveRawEventLog(_0x376ac3){const _0xaa8e06=a0_0x4ed656;_0x376ac3['rawEventLog']['length']>RAW_LOG_MAX_SIZE&&_0x376ac3['rawEventLog'][_0xaa8e06(0x25b)](0x0,_0x376ac3[_0xaa8e06(0x22b)][_0xaa8e06(0xe2)]-RAW_LOG_MAX_SIZE),await _0x376ac3[_0xaa8e06(0x23b)](LTM_DP_RAW_LOG,{'val':JSON['stringify'](_0x376ac3[_0xaa8e06(0x22b)]),'ack':!![]});}async function loadDailyDigests(_0x10d900){const _0x574a18=a0_0x4ed656;try{const _0x5d34c2=await _0x10d900[_0x574a18(0x26c)](LTM_DP_DAILY_DIGESTS);if(_0x5d34c2&&_0x5d34c2['val'])_0x10d900[_0x574a18(0x1a9)]=JSON['parse'](_0x5d34c2[_0x574a18(0x1b8)]);}catch(_0x360fe4){_0x10d900[_0x574a18(0x1a9)]=[];}await updateBaselineStatus(_0x10d900);}async function saveDailyDigests(_0x48c02a,_0x3cb447=!![]){const _0x573780=a0_0x4ed656,_0x19e556=_0x48c02a[_0x573780(0x113)][_0x573780(0x23f)]||0x3c;_0x48c02a['dailyDigests']['length']>_0x19e556&&_0x48c02a[_0x573780(0x1a9)][_0x573780(0x25b)](0x0,_0x48c02a['dailyDigests'][_0x573780(0xe2)]-_0x19e556);await _0x48c02a['setStateAsync'](LTM_DP_DAILY_DIGESTS,{'val':JSON['stringify'](_0x48c02a[_0x573780(0x1a9)]),'ack':!![]});if(_0x3cb447)await updateBaselineStatus(_0x48c02a);}async function updateAnalysisHistory(_0x452cde,_0x2a015d){const _0x2339bf=a0_0x4ed656;_0x452cde[_0x2339bf(0x1e5)]['unshift'](_0x2a015d);if(_0x452cde[_0x2339bf(0x1e5)][_0x2339bf(0xe2)]>ANALYSIS_HISTORY_MAX_SIZE)_0x452cde[_0x2339bf(0x1e5)]['pop']();await _0x452cde['setStateAsync'](_0x2339bf(0x15a),{'val':JSON[_0x2339bf(0x23e)](_0x452cde[_0x2339bf(0x1e5)]),'ack':!![]});}function a0_0x12d1(_0x51f96e,_0x509650){const _0x258628=a0_0xe0d3();return a0_0x12d1=function(_0x24a451,_0x225786){_0x24a451=_0x24a451-0xa1;let _0xe0d3b9=_0x258628[_0x24a451];return _0xe0d3b9;},a0_0x12d1(_0x51f96e,_0x509650);}async function updateBaselineStatus(_0x5a5b7c){const _0x1acdd4=a0_0x4ed656;if(!_0x5a5b7c['isProVersion']){await _0x5a5b7c[_0x1acdd4(0x23b)](LTM_DP_BASELINE_STATUS,{'val':_0x1acdd4(0x26f),'ack':!![]});return;}const _0x50618b=_0x5a5b7c['dailyDigests']['length']>=(_0x5a5b7c[_0x1acdd4(0x113)][_0x1acdd4(0x1e8)]||0x7)?_0x1acdd4(0xf5)+_0x5a5b7c[_0x1acdd4(0x1a9)][_0x1acdd4(0xe2)]+_0x1acdd4(0x112):_0x1acdd4(0x211)+_0x5a5b7c[_0x1acdd4(0x1a9)][_0x1acdd4(0xe2)]+'/'+(_0x5a5b7c[_0x1acdd4(0x113)]['minDaysForBaseline']||0x7)+')';await _0x5a5b7c[_0x1acdd4(0x23b)](LTM_DP_BASELINE_STATUS,{'val':_0x50618b,'ack':!![]});}async function initSensorSubscriptions(_0x37dbeb){const _0x25a6ca=a0_0x4ed656,_0x54972a=_0x37dbeb[_0x25a6ca(0x113)]['devices'];if(_0x54972a&&_0x54972a['length']>0x0){_0x37dbeb[_0x25a6ca(0xa9)]['info'](_0x25a6ca(0xb2)+_0x54972a[_0x25a6ca(0xe2)]+_0x25a6ca(0xf9));for(const _0x2825f5 of _0x54972a){if(_0x2825f5['id']){await _0x37dbeb[_0x25a6ca(0xc2)](_0x2825f5['id']);try{const _0x33c800=await _0x37dbeb[_0x25a6ca(0x108)](_0x2825f5['id']);if(_0x33c800)_0x37dbeb[_0x25a6ca(0x157)][_0x2825f5['id']]=_0x33c800[_0x25a6ca(0x1b8)];}catch(_0x5c3c68){}}}}}function a0_0xe0d3(){const _0x25e4f8=['Skipped\x20(No\x20AI\x20or\x20Data)','push','KI-Modell\x20nicht\x20initialisiert','system','actual_temperature','ü©∫\x20HEALTH\x20WARNING:\x20','HEALTH_RESULT','Alert\x20Reason','\x20hours.\x20Potential\x20incapacitation.','Activity\x20Summary','link_quality','config_pending','Sec-Training\x20started...','trim','toString','analysis.security.lastScore','systemConfig','activityLevel','Comfort\x20Suggestion','version','analysis.security','getFullYear','.forecast.current.state','analysis.health.isAnomaly','accuweather','Live\x20Security\x20Monitor','üõ°Ô∏è\x20SECURITY\x20CHECK:\x20Score\x20','Started\x20at\x20','unreach','Recorded\x20Motion\x20Sequences','geminiApiKey','type','):\x20','eventHistory','daswetter','button','object','HARD\x20WATCHDOG:\x20No\x20sensor\x20activity\x20detected\x20for\x20','setState','analysis.energy.heatingScore','error','ltmJob','WiFi\x20Presence\x20detected\x20->\x20Aborting\x20Exit\x20Timer.\x20User\x20is\x20present.','python3\x20-m\x20venv\x20\x22','Raw\x20Log','Vom\x20Benutzer\x20best√§tigt\x20(OK).','firmware','Bibliotheken\x20nicht\x20gefunden','LTM.driftAnalysis.driftDetails','Trigger\x20Briefing\x20(Test)','setpoint','.NextHours.Location_1.Day_1.current.symbol_desc','Error:\x20','dailyDigests','setObjectNotExistsAsync','getEnums','0\x204\x20*\x20*\x20*','üß†\x20Triggering\x20Security\x20Training...','LTM.dailyDigests','‚úÖ\x20SECURITY\x20MODEL\x20TRAINED!\x20Details:\x20','message','response','Restlessness\x20Level','WETTER:\x20','timestamp','Array\x20of\x20completed\x20movement\x20paths\x20for\x20ML\x20training','Kalender:\x20Deaktiviert','Health\x20Train\x20Error:\x20','val','energy','endsWith','analysis.security.lastCheck','Could\x20not\x20kill\x20Python\x20process:\x20','targetposition','lastCheck','‚ùå\x20Energy\x20Training\x20Failed:\x20','.Summary.Current','now','üìû\x20User\x20requested\x20CALL\x20via\x20Telegram!','AI\x20Emergency\x20Status','json','generateContent','Event\x20History','getMonth','writable','indicator.health','HEALTH_TRAIN_RESULT','scanDevices','rssi','system.mode','value.health','description','Comfort\x20Summary','notifyPushoverInstance','\x20|\x20','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','Trigger\x20Analysis','PARTY','Missing\x20data','Party','forEach','subscribeStates','analysis.comfortSuggestion','analysis.training.triggerSecurity','triggerBriefing','\x22\x20install\x20-r\x20\x22','motion','analysis.lastResult','insulation','number','ü©∫\x20Triggering\x20Health\x20Training...','LTM.trainingData.sequences','switch','analysisHistory','üçÉ\x20Triggering\x20Energy\x20Training...','set_temperature','minDaysForBaseline','accuweather.0','system.config','command','devices','0\x203\x20*\x20*\x20*','simulateButler','getHours','guest','\x20=\x20','Normal','analysis.trigger','triggerDailyDigest','testApiKey','bind','system.presenceWho','autoApply','TRAIN_HEALTH','python.exe','split','vacation','Energy\x20Train\x20Error:\x20','stateChange','text','348ZFwvOf','date','history.','‚úÖ\x20Alarm\x20quittiert.\x20System\x20normal.','‚úÖ\x20HEALTH\x20MODEL\x20TRAINED!\x20','analysis.alertReason','(((.+)+)+)+$','analysis.activitySummary','values','Daily\x20Digests','User\x20dismissed\x20automation\x20proposal.','latitude','city','isPresent','brightness','‚ö†Ô∏è\x20SECURITY\x20ALARM:\x20','analysis.history_debug_00','Lernphase\x20(','ANOMALY','weatherunderground.0','getCalendarNames\x20Error:\x20','events.history_debug_00','search','onMessage','üö®\x20EMERGENCY','bin','slice','N/A','Drift\x20Details','isGracePeriodActive','Trend\x20Value\x20(%)','join','analysis.health.trendValue','presenceDevices','ack','driftDetails','scriptProblem','\x20for\x20interactive\x20buttons...','feedbackHistory','analysis.feedbackHistory','Feedback\x20Log','TREND_RESULT','NORMAL','rawEventLog','TRAINING_COMPLETE','GUEST','Correlation\x20between\x20Inside\x20Temp,\x20Outside\x20Temp\x20and\x20Time','Target\x20Value','analysis.comfortSummary','Health\x20Notes','_calName','analysis.health.lastCheck','Creating\x20venv\x20at\x20','includes','map','payload','heating','send','siren','setStateAsync','cogni-living\x20adapter\x20starting\x20(v','Ungew√∂hnliches\x20Bewegungsmuster\x20erkannt!\x20(Score:\x20','stringify','ltmLtbWindowDays','Pattern\x20Detected','analysis.automation.triggerAction','VACATION','‚ö†Ô∏è\x20Python\x20missing\x20dependencies.\x20Triggering\x20Auto-Install...','toFixed','analysis.isEmergency','AI\x20Training\x20Control','WETTER:\x20Keine\x20Daten\x20gefunden','üõ†Ô∏è\x20INFRASTRUCTURE\x20HARDENING:\x20Setting\x20up\x20isolated\x20Python\x20environment\x20(venv)...','exports','summary','Energy\x20Intelligence','Invalid\x20JSON\x20from\x20Python:\x20','kill','daswetter.0','Error\x20in\x20onMessage\x20command\x20','currentposition','driftAnalysisTimer','position','unknown','status','scheduleJob','getOverviewData','analysisTimer','Gast','Fehler:\x20','Failed:\x20','splice','sound','ltmDriftCheckIntervalHours','Last\x20Check\x20Time','exitGraceTimer','...','Reset\x20Sched\x20Error:\x20','Training\x20Status','pip','KALENDER:\x20','warn','Baseline\x20Status','data','COGNI_CONFIRM_OK','LTM.driftAnalysis.lastCheck','TRAIN_ENERGY','dutycycle','getStateAsync','\x20*\x20*\x20*','platform','Deaktiviert\x20(Pro-Feature)','openweathermap','Urlaub','valve','geminiModel','toLocaleTimeString','COGNI_REQUEST_CALL','analysis.automation.patternDetected','time','Trend\x20Diagnosis\x20(Python)','LTM\x20Sched\x20Error:\x20','2810xlBqtK','party','PRO-','53821009vYXVpV','üêç\x20Python\x20Pong\x20received!','Last\x20raw\x20event','10cSiTgG','Error\x20reading\x20calendar\x20table:\x20','ANALYZE_HEALTH','baselineDrift','analysis.health.trendDiagnosis','inactivityThresholdHours','state','toISOString','python_service','üì°\x20Hooking\x20into\x20','notifyTelegramInstance','analysis.health.restlessness','log','briefingEnabled','Success:\x20','currentSystemMode','[TEST]\x20','üêç\x20Using\x20Isolated\x20VENV\x20Python:\x20','notifyPushoverEnabled','stderr','[PYTHON\x20ERR]\x20','Subscribing\x20to\x20','Who\x20is\x20present?','getObjectAsync','Cogni-Living','name','Training\x20Error:\x20','Trigger\x20Digest','Gemini\x20Init\x20Error:\x20','\x20presence\x20devices...','Train\x20Energy\x20Model\x20(Regression)','inactivityMonitoringEnabled','from','analysis.automation.targetId','scriptEnabled','communicate.request','Sleep\x20Score\x20(0-100)','subscribeForeignStatesAsync','ANALYZE_TREND','getCalendarNames','namespace','Health\x20Last\x20Check','Unknown\x20error','string','Briefing\x20Sched\x20Error:\x20','analysis.training.triggerHealth','longitude','Train\x20Health\x20Model\x20(IsoForest)','analysis.automation.targetValue','Action','‚ùå\x20Training\x20failed:\x20','Training\x20Data\x20Sets','cpu_feature_guard','exitTimer','rmSync','python','[PYTHON]\x20','analysis.health','.communicate.request','close','isArray','instance','filter','‚úÖ\x20Alles\x20OK\x20(Reset)]','cogni-living','Heating\x20Rate\x20Score','flot.','ltmStbWindowDays','submitFeedback','length','2425232RdeTix','analysis.automation.description','material.','expire','analysis.automation','replace','stick_unreach','briefingTime','briefingJob','sendToAsync','debug','AI\x20Alert\x20Status','Auto\x20Apply\x20Rule','9uqFPzn','notifyTelegramRecipient','‚ö†Ô∏è\x20BROKEN\x20VENV\x20DETECTED\x20(Folder\x20exists,\x20but\x20pip\x20is\x20missing).\x20Repairing...','ü©∫\x20Triggering\x20Health\x20Analysis\x20on\x20new\x20Digest...','Target\x20ID','Aktiv\x20(','fill','getDate','isProVersion','\x20sensors...','pythonProcess','lowbat','LTM.rawEventLog','LTM','lastAlertState','Feedback\x20saved:\x20','TEST-PRO-KEY','indicator.alarm.fire','toLocaleString','application/json','system.','Failed\x20to\x20delete\x20broken\x20venv:\x20','üìû\x20R√úCKRUF\x20BITTE!\x20Der\x20Bewohner\x20hat\x20den\x20R√ºckruf-Button\x20gedr√ºckt.','main','getForeignStateAsync','1112229ldTyUk','indicator','boolean','analysis.health.notes','unload','No\x20instance','\x0aSTB:\x20','getTime','PRIORIT√ÑT:\x20Gesundheit/AAL.','\x20Tage)','config','analysis.training.status','SIMULATION:\x20Test-Vorschlag\x20f√ºr\x20','üìû\x20R√ºckruf\x20anfordern','126469iviPXV','genAI','off','KALENDER:\x20Keine\x20Kalender\x20ausgew√§hlt\x20(Bitte\x20in\x20Settings\x20konfigurieren)','Success:\x20Compressed\x20','@google/generative-ai','6CrZGwn','Error\x20launching\x20Python\x20service:\x20','none','Logbook','Say\x20Hello','indexOf',')\x20->\x20','.data.table','notifyTelegramEnabled','licenseKey','startsWith','enum','normal','analysis.training','System\x20Status\x20&\x20Control','analysis.isAlert','automation.triggerAction','extendObjectAsync','notifyEmailRecipient','WETTER\x20ERROR:\x20','Drift\x20Sched\x20Error:\x20','parse','7594372nXOQkW','analysis.automation.suggestedAction','toLowerCase','pip.exe','notifyPushoverRecipient','1769011uenVin','System\x20Mode','‚úÖ\x20INFRASTRUCTURE\x20READY.\x20Starting\x20Service...','Kein\x20API\x20Key!','LTM.driftAnalysis','Error\x20checking\x20WiFi:\x20','text.alarm','node-schedule','Building\x20Insulation\x20Score','modeResetJob','Automation\x20Proposals','KALENDER:\x20Keine\x20relevanten\x20Termine','targetId','Wetter:\x20Deaktiviert','existsSync','notifyEmailEnabled','dependencyInstallInProgress','online','stdin','testNotification','LTM.driftAnalysis.baselineDrift','Description','apply','level','sendTo','Restoring\x20sensor\x20cache\x20from\x20history\x20(','Trigger\x20Action\x20Now','Kein\x20API\x20Key\x20eingegeben.','openweathermap.0','direction','channel','sensorLastValues','getForeignObjectAsync','temperature','analysis.analysisHistory','detected','Drift\x20Status','onUnload','analysis.training.triggerEnergy','analysis.triggerBriefing','substring','events.history','child_process','getLtmData','cancel','telegram','\x20events','uuid','common','useWeather','Thermodynamic\x20Data\x20Points','value','apiKey','useCalendar','sort','onStateChange','analysis.automation.autoApply','info','callback','üß™\x20Simulating\x20Butler\x20Proposal:\x20'];a0_0xe0d3=function(){return _0x25e4f8;};return a0_0xe0d3();}async function initPresenceSubscriptions(_0x524caf){const _0x42b3dd=a0_0x4ed656,_0x1a975f=_0x524caf['config'][_0x42b3dd(0x221)]||[];if(_0x1a975f[_0x42b3dd(0xe2)]>0x0){_0x524caf[_0x42b3dd(0xa9)][_0x42b3dd(0x171)](_0x42b3dd(0xb2)+_0x1a975f[_0x42b3dd(0xe2)]+_0x42b3dd(0xba));for(const _0x5d9806 of _0x1a975f){await _0x524caf[_0x42b3dd(0xc2)](_0x5d9806);}try{await checkWifiPresence(_0x524caf);}catch(_0x233c9c){}}}async function getWeatherContext(_0x3cad86){const _0xdd3233=a0_0x4ed656;try{if(!_0x3cad86[_0xdd3233(0x113)][_0xdd3233(0x169)])return _0xdd3233(0x145);let _0x62860a='';const _0x25fa48=_0x3cad86[_0xdd3233(0x113)]['weatherInstance'];if(_0x25fa48)try{if(_0x25fa48[_0xdd3233(0x235)](_0xdd3233(0x18c))){const _0x4ba710=await _0x3cad86[_0xdd3233(0x108)](_0x25fa48+_0xdd3233(0x1c0));if(_0x4ba710&&_0x4ba710[_0xdd3233(0x1b8)])_0x62860a=_0x4ba710[_0xdd3233(0x1b8)];}else{if(_0x25fa48[_0xdd3233(0x235)](_0xdd3233(0x196))){const _0x4926d3=await _0x3cad86[_0xdd3233(0x108)](_0x25fa48+_0xdd3233(0x1a7));if(_0x4926d3&&_0x4926d3[_0xdd3233(0x1b8)])_0x62860a=_0x4926d3[_0xdd3233(0x1b8)];}else{if(_0x25fa48['includes'](_0xdd3233(0x270))){const _0x43dcdd=await _0x3cad86[_0xdd3233(0x108)](_0x25fa48+_0xdd3233(0x18a));if(_0x43dcdd&&_0x43dcdd[_0xdd3233(0x1b8)])_0x62860a=_0x43dcdd['val'];}}}}catch(_0x5828d9){}if(!_0x62860a){const _0x38c32c=[_0xdd3233(0x1e9),_0xdd3233(0x24e),_0xdd3233(0x213),_0xdd3233(0x154)];for(const _0x2d9ce8 of _0x38c32c){try{const _0x3f9334=await _0x3cad86['getForeignObjectAsync'](_0x2d9ce8);if(_0x3f9334){if(_0x2d9ce8[_0xdd3233(0x235)](_0xdd3233(0x18c))){const _0x11baf1=await _0x3cad86['getForeignStateAsync'](_0x2d9ce8+'.Summary.Current');if(_0x11baf1&&_0x11baf1[_0xdd3233(0x1b8)]){_0x62860a=_0x11baf1[_0xdd3233(0x1b8)];break;}}}}catch(_0x2645e8){}}}return _0x62860a?_0xdd3233(0x1b3)+_0x62860a:_0xdd3233(0x247);}catch(_0x23141e){return _0xdd3233(0x130)+_0x23141e['message'];}}async function getCalendarContext(_0x3bb2df){const _0x2f84a9=a0_0x4ed656;try{if(!_0x3bb2df[_0x2f84a9(0x113)][_0x2f84a9(0x16d)])return _0x2f84a9(0x1b6);let _0x36e736=_0x3bb2df[_0x2f84a9(0x113)]['calendarInstance']||'ical.0',_0x1ef3bd=_0x3bb2df['config']['calendarSelection']||[];if(typeof _0x1ef3bd==='string')_0x1ef3bd=_0x1ef3bd['split'](',');try{const _0x189ba0=await _0x3bb2df[_0x2f84a9(0x108)](_0x36e736+_0x2f84a9(0x124));if(_0x189ba0&&_0x189ba0[_0x2f84a9(0x1b8)]){let _0x1b078e=tryParse(_0x189ba0[_0x2f84a9(0x1b8)]);if(_0x1b078e&&Array['isArray'](_0x1b078e)){if(_0x1ef3bd[_0x2f84a9(0xe2)]>0x0)_0x1b078e=_0x1b078e['filter'](_0x3b9ee8=>_0x1ef3bd['includes'](_0x3b9ee8['_calName']||''));else return _0x2f84a9(0x11a);if(_0x1b078e[_0x2f84a9(0xe2)]>0x0){const _0x5424f6=_0x1b078e[_0x2f84a9(0x21a)](0x0,0x3)[_0x2f84a9(0x236)](_0x46ae55=>{const _0x310841=_0x2f84a9;let _0x5c0ed5=_0x46ae55[_0x310841(0x201)];if(_0x46ae55[_0x310841(0x277)])_0x5c0ed5+='\x20'+_0x46ae55[_0x310841(0x277)];return _0x5c0ed5+':\x20'+_0x46ae55['event']+'\x20('+_0x46ae55[_0x310841(0x232)]+')';});return _0x2f84a9(0x264)+_0x5424f6[_0x2f84a9(0x21f)](_0x2f84a9(0x1d2));}else return _0x2f84a9(0x143);}}}catch(_0x20b634){_0x3bb2df[_0x2f84a9(0xa9)][_0x2f84a9(0x265)](_0x2f84a9(0x281)+_0x20b634['message']);}return'KALENDER:\x20Keine\x20Daten';}catch(_0x42c77c){return'KALENDER\x20ERROR:\x20'+_0x42c77c[_0x2f84a9(0x1b0)];}}async function getCalendarNames(_0x5c7b86,_0x3ffb1b){const _0x57a2b4=a0_0x4ed656;try{const _0x33efec=await _0x5c7b86[_0x57a2b4(0x108)](_0x3ffb1b+'.data.table');if(_0x33efec&&_0x33efec['val']){const _0x209458=tryParse(_0x33efec[_0x57a2b4(0x1b8)]);if(_0x209458&&Array[_0x57a2b4(0xd9)](_0x209458)){const _0x4e6c83=[...new Set(_0x209458['map'](_0x2d2d99=>_0x2d2d99[_0x57a2b4(0x232)])[_0x57a2b4(0xdb)](Boolean))];return _0x4e6c83[_0x57a2b4(0x16e)]();}}return[];}catch(_0x3bf114){return _0x5c7b86[_0x57a2b4(0xa9)][_0x57a2b4(0x19c)](_0x57a2b4(0x214)+_0x3bf114[_0x57a2b4(0x1b0)]),[];}}async function checkWifiPresence(_0x2a2c69){const _0x33518d=a0_0x4ed656;try{const _0x36e939=_0x2a2c69['config'][_0x33518d(0x221)]||[];let _0x3ad250=![];const _0x4646ca=[];for(const _0x503bc3 of _0x36e939){try{const _0x39ba7b=await _0x2a2c69[_0x33518d(0x108)](_0x503bc3);if(_0x39ba7b&&(_0x39ba7b[_0x33518d(0x1b8)]===!![]||_0x39ba7b['val']===_0x33518d(0x149)||_0x39ba7b['val']===0x1)){_0x3ad250=!![];const _0x595930=await _0x2a2c69['getForeignObjectAsync'](_0x503bc3);let _0x5e2acd=_0x503bc3;_0x595930&&_0x595930[_0x33518d(0x168)]&&_0x595930[_0x33518d(0x168)]['name']&&(_0x5e2acd=typeof _0x595930[_0x33518d(0x168)][_0x33518d(0xb6)]===_0x33518d(0x198)?_0x595930[_0x33518d(0x168)]['name']['de']||_0x595930['common'][_0x33518d(0xb6)]['en']:_0x595930[_0x33518d(0x168)][_0x33518d(0xb6)]),_0x4646ca[_0x33518d(0x175)](_0x5e2acd);}}catch(_0x53ca9e){}}return await _0x2a2c69[_0x33518d(0x23b)]('system.presenceWho',{'val':_0x4646ca['join'](',\x20'),'ack':!![]}),_0x3ad250&&(_0x2a2c69['exitTimer']&&(_0x2a2c69['log'][_0x33518d(0x171)](_0x33518d(0x19e)),abortExitTimer(_0x2a2c69)),!_0x2a2c69['isPresent']&&_0x2a2c69[_0x33518d(0xac)]===SYSTEM_MODES[_0x33518d(0x22a)]&&await setPresence(_0x2a2c69,!![])),_0x3ad250;}catch(_0x132ac8){return _0x2a2c69[_0x33518d(0xa9)]['error'](_0x33518d(0x13d)+_0x132ac8[_0x33518d(0x1b0)]),![];}}function startExitTimer(_0x1b56bc){const _0x200be6=a0_0x4ed656;abortExitTimer(_0x1b56bc),_0x1b56bc[_0x200be6(0x21d)]=!![],_0x1b56bc[_0x200be6(0x25f)]=setTimeout(()=>{const _0x25c7c8=_0x200be6;_0x1b56bc[_0x25c7c8(0x21d)]=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),_0x1b56bc[_0x200be6(0xd2)]=setTimeout(()=>{const _0x286669=_0x200be6;setPresence(_0x1b56bc,![]),_0x1b56bc[_0x286669(0xd2)]=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}function abortExitTimer(_0x184e03){const _0x42d850=a0_0x4ed656;if(_0x184e03[_0x42d850(0xd2)])clearTimeout(_0x184e03[_0x42d850(0xd2)]);if(_0x184e03[_0x42d850(0x25f)])clearTimeout(_0x184e03[_0x42d850(0x25f)]);_0x184e03[_0x42d850(0xd2)]=null,_0x184e03['exitGraceTimer']=null,_0x184e03[_0x42d850(0x21d)]=![];}async function setPresence(_0x3472d4,_0x5ebf21){const _0x577000=a0_0x4ed656;if(_0x3472d4[_0x577000(0x20d)]===_0x5ebf21)return;_0x3472d4[_0x577000(0x20d)]=_0x5ebf21,await _0x3472d4['setStateAsync']('system.isPresent',{'val':_0x5ebf21,'ack':!![]});}async function saveFeedback(_0x35f11e,_0x42748e){const _0x107ade=a0_0x4ed656;_0x35f11e[_0x107ade(0xa9)][_0x107ade(0x171)](_0x107ade(0xff)+JSON['stringify'](_0x42748e));}async function runBaselineDriftAnalysis(_0x132e04){const _0x54dd6d=a0_0x4ed656;if(!_0x132e04[_0x54dd6d(0xf8)]||!_0x132e04[_0x54dd6d(0x273)])return;const _0x16c292=_0x132e04[_0x54dd6d(0x113)]['ltmStbWindowDays']||0xe;if(_0x132e04[_0x54dd6d(0x1a9)][_0x54dd6d(0xe2)]<_0x16c292+(_0x132e04['config'][_0x54dd6d(0x1e8)]||0x7)){await _0x132e04['setStateAsync'](LTM_DP_DRIFT_STATUS,{'val':'N/A\x20(Learning)','ack':!![]});return;}const _0x5ddc3f=_0x132e04[_0x54dd6d(0x1a9)][_0x54dd6d(0x21a)](-_0x16c292),_0x4cdfe9=_0x132e04['dailyDigests'][_0x54dd6d(0x21a)](0x0,_0x132e04[_0x54dd6d(0x1a9)]['length']-_0x16c292),_0x5733f4='ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20'+JSON[_0x54dd6d(0x23e)](_0x4cdfe9)+_0x54dd6d(0x10f)+JSON['stringify'](_0x5ddc3f);try{const _0x4c84d2=await _0x132e04[_0x54dd6d(0x273)]['generateContent'](_0x5733f4),_0x3f64cd=JSON[_0x54dd6d(0x132)](_0x4c84d2[_0x54dd6d(0x1b1)][_0x54dd6d(0x1ff)]()[_0x54dd6d(0xe8)](/```json|```/g,'')['trim']());_0x3f64cd[_0x54dd6d(0x283)]&&(await _0x132e04[_0x54dd6d(0x23b)](LTM_DP_DRIFT_STATUS,{'val':_0x3f64cd[_0x54dd6d(0x283)],'ack':!![]}),await _0x132e04[_0x54dd6d(0x23b)](LTM_DP_DRIFT_DETAILS,{'val':_0x3f64cd[_0x54dd6d(0x223)],'ack':!![]}),await _0x132e04[_0x54dd6d(0x23b)](LTM_DP_DRIFT_LAST_CHECK,{'val':Date[_0x54dd6d(0x1c1)](),'ack':!![]}));}catch(_0x332659){}}function setupLtmScheduler(_0x25c420){const _0x51547d=a0_0x4ed656;try{if(_0x25c420[_0x51547d(0x19d)])_0x25c420['ltmJob'][_0x51547d(0x164)]();if(!_0x25c420[_0x51547d(0xf8)]){_0x25c420[_0x51547d(0x23b)](LTM_DP_STATUS,{'val':_0x51547d(0x26f),'ack':!![]});return;}_0x25c420[_0x51547d(0x19d)]=schedule[_0x51547d(0x255)](LTM_SCHEDULE,()=>createDailyDigest(_0x25c420));}catch(_0x26f324){_0x25c420[_0x51547d(0xa9)][_0x51547d(0x19c)](_0x51547d(0x279)+_0x26f324['message']);}}function setupModeResetScheduler(_0x52b868){const _0x5bac1f=a0_0x4ed656;try{if(_0x52b868[_0x5bac1f(0x141)])_0x52b868[_0x5bac1f(0x141)][_0x5bac1f(0x164)]();_0x52b868[_0x5bac1f(0x141)]=schedule[_0x5bac1f(0x255)](MODE_RESET_SCHEDULE,async()=>{const _0x43735c=_0x5bac1f;await loadSystemMode(_0x52b868),AUTO_RESET_MODES['includes'](_0x52b868[_0x43735c(0xac)])&&await _0x52b868[_0x43735c(0x23b)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x43735c(0x22a)],'ack':![]});});}catch(_0x133289){_0x52b868[_0x5bac1f(0xa9)][_0x5bac1f(0x19c)](_0x5bac1f(0x261)+_0x133289[_0x5bac1f(0x1b0)]);}}function setupDriftAnalysisScheduler(_0x5e92a1){const _0x504128=a0_0x4ed656;try{if(_0x5e92a1[_0x504128(0x251)])clearInterval(_0x5e92a1['driftAnalysisTimer']);if(!_0x5e92a1['isProVersion'])return;_0x5e92a1[_0x504128(0x251)]=setInterval(()=>runBaselineDriftAnalysis(_0x5e92a1),(_0x5e92a1[_0x504128(0x113)][_0x504128(0x25d)]||0x18)*0x36ee80),setTimeout(()=>runBaselineDriftAnalysis(_0x5e92a1),0x1388);}catch(_0x7b49fc){_0x5e92a1['log'][_0x504128(0x19c)](_0x504128(0x131)+_0x7b49fc['message']);}}function setupBriefingScheduler(_0x2b90ae){const _0x2d1e16=a0_0x4ed656;try{if(_0x2b90ae['briefingJob'])_0x2b90ae[_0x2d1e16(0xeb)][_0x2d1e16(0x164)]();if(!_0x2b90ae[_0x2d1e16(0x113)][_0x2d1e16(0xaa)])return;const _0x46d684=(_0x2b90ae[_0x2d1e16(0x113)][_0x2d1e16(0xea)]||'08:00')[_0x2d1e16(0x1fb)](':'),_0x5c4f90=parseInt(_0x46d684[0x0])||0x8,_0x5cd4f6=parseInt(_0x46d684[0x1])||0x0,_0x36123a=_0x5cd4f6+'\x20'+_0x5c4f90+_0x2d1e16(0x26d);_0x2b90ae[_0x2d1e16(0xa9)][_0x2d1e16(0x171)]('Scheduling\x20Morning\x20Briefing\x20for\x20'+_0x5c4f90+':'+(_0x5cd4f6<0xa?'0'+_0x5cd4f6:_0x5cd4f6)),_0x2b90ae[_0x2d1e16(0xeb)]=schedule[_0x2d1e16(0x255)](_0x36123a,()=>{sendMorningBriefing(_0x2b90ae);});}catch(_0x14641c){_0x2b90ae[_0x2d1e16(0xa9)][_0x2d1e16(0x19c)](_0x2d1e16(0xc9)+_0x14641c[_0x2d1e16(0x1b0)]);}}async function sendNotification(_0x47aac4,_0x15f41b,_0x4a3e81=![],_0xad2740=![]){const _0xc5cfd2=a0_0x4ed656;_0x47aac4['log'][_0xc5cfd2(0x171)]((_0x4a3e81?_0xc5cfd2(0xad):'')+'Sending\x20notification:\x20\x22'+_0x15f41b+'\x22');const _0x5d8211=_0x47aac4[_0xc5cfd2(0x113)];let _0x5b0b4b=0x0;if(_0x5d8211[_0xc5cfd2(0x125)]){let _0x5d05ea={};(_0x15f41b[_0xc5cfd2(0x235)]('Alarm')||_0xad2740)&&(_0x5d05ea={'reply_markup':{'inline_keyboard':[[{'text':_0xc5cfd2(0xdc),'callback_data':_0xc5cfd2(0x268)}],[{'text':_0xc5cfd2(0x116),'callback_data':_0xc5cfd2(0x275)}]]}}),await _0x47aac4['sendToAsync'](_0x5d8211[_0xc5cfd2(0xa7)],_0xc5cfd2(0x239),{'text':_0x15f41b,'user':_0x5d8211[_0xc5cfd2(0xf1)],..._0x5d05ea}),_0x5b0b4b++;}if(_0x5d8211[_0xc5cfd2(0xaf)]){let _0x5c80a0={'message':_0x15f41b,'title':_0xad2740?_0xc5cfd2(0x218):_0xc5cfd2(0xb5),'priority':_0xad2740?0x2:0x1,'device':_0x5d8211[_0xc5cfd2(0x137)]};_0xad2740&&(_0x5c80a0['retry']=0x1e,_0x5c80a0[_0xc5cfd2(0xe6)]=0xe10,_0x5c80a0[_0xc5cfd2(0x25c)]=_0xc5cfd2(0x23a)),await _0x47aac4[_0xc5cfd2(0xec)](_0x5d8211[_0xc5cfd2(0x1d1)],'send',_0x5c80a0),_0x5b0b4b++;}return _0x5d8211[_0xc5cfd2(0x147)]&&(await _0x47aac4['sendToAsync'](_0x5d8211['notifyEmailInstance'],_0xc5cfd2(0x239),{'text':_0x15f41b,'to':_0x5d8211[_0xc5cfd2(0x12f)]}),_0x5b0b4b++),_0x5b0b4b;}async function setupTelegramListener(_0xf28e7f){const _0x2c0c99=a0_0x4ed656,_0x703000=_0xf28e7f[_0x2c0c99(0x113)][_0x2c0c99(0xa7)];_0xf28e7f['config'][_0x2c0c99(0x125)]&&_0x703000&&(_0xf28e7f[_0x2c0c99(0xa9)][_0x2c0c99(0x171)](_0x2c0c99(0xa6)+_0x703000+_0x2c0c99(0x225)),await _0xf28e7f['subscribeForeignStatesAsync'](_0x703000+_0x2c0c99(0xd7)));}async function handleTelegramResponse(_0x2adf60,_0x469483){const _0x4ac4be=a0_0x4ed656;let _0x4f387a=_0x469483;_0x469483[_0x4ac4be(0x127)]('[')&&(_0x4f387a=_0x469483[_0x4ac4be(0x160)](_0x469483[_0x4ac4be(0x122)](']')+0x1));if(_0x4f387a===_0x4ac4be(0x268))_0x2adf60[_0x4ac4be(0xa9)][_0x4ac4be(0x171)]('‚úÖ\x20User\x20confirmed\x20ALARM\x20via\x20Telegram.\x20Resetting\x20system.'),await _0x2adf60[_0x4ac4be(0x23b)](_0x4ac4be(0x12c),{'val':![],'ack':!![]}),await _0x2adf60[_0x4ac4be(0x23b)]('analysis.alertReason',{'val':_0x4ac4be(0x1a1),'ack':!![]}),_0x2adf60[_0x4ac4be(0xfe)]=![],sendNotification(_0x2adf60,_0x4ac4be(0x203),![]);else _0x4f387a===_0x4ac4be(0x275)&&(_0x2adf60[_0x4ac4be(0xa9)][_0x4ac4be(0x265)](_0x4ac4be(0x1c2)),sendNotification(_0x2adf60,_0x4ac4be(0x106),![],!![]));}async function runAutopilot(_0x2b4b59){const _0x3e3fb3=a0_0x4ed656,_0x3af81e=_0x2b4b59['config'][_0x3e3fb3(0xa2)],_0x3a9fa3=_0x2b4b59[_0x3e3fb3(0x195)][_0x3e3fb3(0xe2)]>0x0?_0x2b4b59[_0x3e3fb3(0x195)][0x0][_0x3e3fb3(0x1b4)]:Date['now'](),_0x408a37=(Date[_0x3e3fb3(0x1c1)]()-_0x3a9fa3)/(0x3e8*0x3c*0x3c);let _0x1c089d='';_0x2b4b59[_0x3e3fb3(0x113)][_0x3e3fb3(0xbc)]&&_0x2b4b59[_0x3e3fb3(0xac)]===SYSTEM_MODES[_0x3e3fb3(0x22a)]&&_0x2b4b59['isPresent']&&(_0x408a37>_0x3af81e&&(_0x1c089d=_0x3e3fb3(0x199)+_0x408a37[_0x3e3fb3(0x244)](0x1)+_0x3e3fb3(0x17c))),runGeminiAnalysis(_0x2b4b59,_0x1c089d)['catch'](_0x2a2549=>_0x2b4b59[_0x3e3fb3(0xa9)][_0x3e3fb3(0x19c)](_0x2a2549));}async function createDailyDigest(_0x3b7d7e){const _0x194d24=a0_0x4ed656;if(!_0x3b7d7e['isProVersion'])return;await _0x3b7d7e[_0x194d24(0x23b)](LTM_DP_STATUS,{'val':_0x194d24(0x18f)+new Date()[_0x194d24(0x102)](),'ack':!![]});if(!_0x3b7d7e[_0x194d24(0x273)]||_0x3b7d7e[_0x194d24(0x22b)][_0x194d24(0xe2)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x3b7d7e[_0x194d24(0x23b)](LTM_DP_STATUS,{'val':_0x194d24(0x174),'ack':!![]});return;}const _0x3ee11f=JSON[_0x194d24(0x132)](JSON[_0x194d24(0x23e)](_0x3b7d7e[_0x194d24(0x22b)])),_0x1bf789=_0x3ee11f['length'],_0x1e86e6=_0x194d24(0x1d3)+JSON[_0x194d24(0x23e)](_0x3ee11f);try{const _0x366acb=await _0x3b7d7e[_0x194d24(0x273)]['generateContent'](_0x1e86e6),_0x5d8611=JSON['parse'](_0x366acb[_0x194d24(0x1b1)]['text']()[_0x194d24(0xe8)](/```json|```/g,'')[_0x194d24(0x181)]());if(_0x5d8611[_0x194d24(0x24a)]){const _0x50441b={'timestamp':new Date()[_0x194d24(0xa4)](),'eventCount':_0x1bf789,'summary':_0x5d8611[_0x194d24(0x24a)],'activityLevel':_0x5d8611[_0x194d24(0x185)],'systemMode':_0x3b7d7e[_0x194d24(0xac)]};_0x3b7d7e[_0x194d24(0x1a9)][_0x194d24(0x175)](_0x50441b),await saveDailyDigests(_0x3b7d7e),_0x3b7d7e[_0x194d24(0x22b)]=[],await saveRawEventLog(_0x3b7d7e),await _0x3b7d7e[_0x194d24(0x23b)](LTM_DP_STATUS,{'val':_0x194d24(0x11b)+_0x1bf789+_0x194d24(0x166),'ack':!![]}),_0x3b7d7e[_0x194d24(0xf8)]&&(_0x3b7d7e[_0x194d24(0xa9)][_0x194d24(0x171)](_0x194d24(0xf3)),sendToPython(_0x3b7d7e,_0x194d24(0x282),{'digest':_0x50441b}));}}catch(_0x189f80){await _0x3b7d7e[_0x194d24(0x23b)](LTM_DP_STATUS,{'val':_0x194d24(0x1a8)+_0x189f80[_0x194d24(0x1b0)],'ack':!![]});}}function installPythonDependencies(_0x4b5f40){const _0x2eb51d=a0_0x4ed656;if(_0x4b5f40[_0x2eb51d(0x148)])return;_0x4b5f40['dependencyInstallInProgress']=!![];const _0x46ae22=path['join'](__dirname,'python_service','requirements.txt');_0x4b5f40['log']['info'](_0x2eb51d(0x248)),stopPythonService(_0x4b5f40);if(fs[_0x2eb51d(0x146)](VENV_PATH)){if(!fs['existsSync'](PIP_EXE)){_0x4b5f40['log'][_0x2eb51d(0x265)](_0x2eb51d(0xf2));try{fs[_0x2eb51d(0xd3)](VENV_PATH,{'recursive':!![],'force':!![]});}catch(_0x46b058){_0x4b5f40[_0x2eb51d(0xa9)][_0x2eb51d(0x19c)](_0x2eb51d(0x105)+_0x46b058['message']);}}}!fs[_0x2eb51d(0x146)](VENV_PATH)?(_0x4b5f40[_0x2eb51d(0xa9)][_0x2eb51d(0x171)](_0x2eb51d(0x234)+VENV_PATH+_0x2eb51d(0x260)),exec(_0x2eb51d(0x19f)+VENV_PATH+'\x22',(_0x1519e4,_0x4967a3,_0x5762c1)=>{const _0x419058=_0x2eb51d;if(_0x1519e4){_0x4b5f40['log']['error']('‚ùå\x20VENV\x20CREATION\x20FAILED.\x20Please\x20run:\x20sudo\x20apt\x20install\x20python3-venv'),_0x4b5f40[_0x419058(0xa9)][_0x419058(0x19c)]('Details:\x20'+(_0x5762c1||_0x1519e4[_0x419058(0x1b0)])),_0x4b5f40[_0x419058(0x148)]=![];return;}installRequirementsInVenv(_0x4b5f40,_0x46ae22);})):installRequirementsInVenv(_0x4b5f40,_0x46ae22);}function installRequirementsInVenv(_0x41d3b8,_0x5e79eb){const _0x7ea17f=a0_0x4ed656;_0x41d3b8['log'][_0x7ea17f(0x171)]('Installing\x20dependencies\x20into\x20venv\x20(this\x20may\x20take\x20minutes)...');const _0x17ec09='\x22'+PIP_EXE+_0x7ea17f(0x1dd)+_0x5e79eb+'\x22';exec(_0x17ec09,{'timeout':0x927c0,'maxBuffer':0x400*0x400*0xa},(_0x2b3fca,_0x4f6300,_0x265edc)=>{const _0x16f17b=_0x7ea17f;_0x41d3b8[_0x16f17b(0x148)]=![],_0x2b3fca?_0x41d3b8[_0x16f17b(0xa9)][_0x16f17b(0x19c)]('‚ùå\x20PIP\x20INSTALL\x20FAILED:\x20'+(_0x265edc||_0x2b3fca[_0x16f17b(0x1b0)])):(_0x41d3b8[_0x16f17b(0xa9)][_0x16f17b(0x171)](_0x16f17b(0x13a)),startPythonService(_0x41d3b8));});}function sendToPython(_0x38a6a8,_0x202e57,_0x24f9f0={}){const _0x55f66d=a0_0x4ed656;if(!_0x38a6a8[_0x55f66d(0xfa)]||!_0x38a6a8[_0x55f66d(0xfa)][_0x55f66d(0x14a)][_0x55f66d(0x1c8)])return;const _0x296d41=JSON[_0x55f66d(0x23e)]({'command':_0x202e57,..._0x24f9f0});try{_0x38a6a8[_0x55f66d(0xfa)][_0x55f66d(0x14a)]['write'](_0x296d41+'\x0a');}catch(_0x52b957){_0x38a6a8[_0x55f66d(0xa9)]['error']('Failed\x20to\x20send\x20to\x20Python:\x20'+_0x52b957[_0x55f66d(0x1b0)]);}}function runPythonHealthCheck(_0x3837b8){const _0x3341e8=a0_0x4ed656;if(!_0x3837b8[_0x3341e8(0x1a9)]||_0x3837b8[_0x3341e8(0x1a9)]['length']<0x2)return;const _0x3b7c14=_0x3837b8[_0x3341e8(0x1a9)][_0x3341e8(0x236)](_0x232bb0=>{const _0x3195d1=_0x3341e8,_0x5af9a3=(_0x232bb0[_0x3195d1(0x185)]||'')[_0x3195d1(0x135)]();return ACTIVITY_LEVEL_MAP[_0x5af9a3]||0x32;});_0x3837b8[_0x3341e8(0xa9)][_0x3341e8(0x171)]('Guardian:\x20Sending\x20'+_0x3b7c14[_0x3341e8(0xe2)]+'\x20days\x20of\x20activity\x20data\x20to\x20Python...'),sendToPython(_0x3837b8,_0x3341e8(0xc3),{'values':_0x3b7c14,'tag':'Activity-Level'});}function handlePythonResult(_0x67c701,_0x488ec1){const _0xbd1f49=a0_0x4ed656;if(_0x488ec1[_0xbd1f49(0x193)]==='PONG')_0x67c701[_0xbd1f49(0xa9)][_0xbd1f49(0xed)](_0xbd1f49(0x27e));else{if(_0x488ec1['type']===_0xbd1f49(0x229)){const {tag:_0x2ecac0,diagnosis:_0x35d38d,change_percent:_0x11975c}=_0x488ec1[_0xbd1f49(0x237)];_0x67c701[_0xbd1f49(0xa9)][_0xbd1f49(0x171)]('üêç\x20Guardian\x20Diagnosis\x20('+_0x2ecac0+_0xbd1f49(0x194)+_0x35d38d+'\x20('+_0x11975c+'%)'),_0x67c701[_0xbd1f49(0x23b)](_0xbd1f49(0xa1),{'val':_0x35d38d,'ack':!![]}),_0x67c701[_0xbd1f49(0x23b)](_0xbd1f49(0x220),{'val':_0x11975c,'ack':!![]});}else{if(_0x488ec1[_0xbd1f49(0x193)]===_0xbd1f49(0x22c)){const {success:_0x35d3d3,details:_0x532aba}=_0x488ec1[_0xbd1f49(0x237)];_0x35d3d3?(_0x67c701[_0xbd1f49(0xa9)][_0xbd1f49(0x171)](_0xbd1f49(0x1af)+_0x532aba),_0x67c701['setStateAsync'](_0xbd1f49(0x114),{'val':_0xbd1f49(0xab)+new Date()[_0xbd1f49(0x274)]()+'\x20('+_0x532aba+')','ack':!![]})):(_0x67c701['log'][_0xbd1f49(0x19c)](_0xbd1f49(0xcf)+(_0x532aba||_0xbd1f49(0xc7))),_0x67c701['setStateAsync']('analysis.training.status',{'val':_0xbd1f49(0x25a)+_0x532aba,'ack':!![]}));}else{if(_0x488ec1['type']===_0xbd1f49(0x1ca)){const {success:_0x5a044e,details:_0x4be137}=_0x488ec1['payload'];if(_0x5a044e)_0x67c701[_0xbd1f49(0xa9)][_0xbd1f49(0x171)](_0xbd1f49(0x204)+_0x4be137);else _0x67c701[_0xbd1f49(0xa9)][_0xbd1f49(0x19c)]('‚ùå\x20Health\x20Training\x20Failed:\x20'+_0x4be137);}else{if(_0x488ec1[_0xbd1f49(0x193)]===_0xbd1f49(0x17a)){const {is_anomaly:_0x41d4fe,details:_0x2dce26}=_0x488ec1[_0xbd1f49(0x237)];_0x67c701['setStateAsync'](_0xbd1f49(0x233),{'val':new Date()[_0xbd1f49(0xa4)](),'ack':!![]}),_0x67c701[_0xbd1f49(0x23b)]('analysis.health.isAnomaly',{'val':_0x41d4fe,'ack':!![]});if(_0x41d4fe)_0x67c701[_0xbd1f49(0xa9)][_0xbd1f49(0x265)](_0xbd1f49(0x179)+_0x2dce26);}else{if(_0x488ec1[_0xbd1f49(0x193)]==='ENERGY_TRAIN_RESULT'){const {success:_0x40fc94,details:_0x482022}=_0x488ec1[_0xbd1f49(0x237)];if(_0x40fc94){_0x67c701[_0xbd1f49(0xa9)][_0xbd1f49(0x171)]('‚úÖ\x20ENERGY\x20MODEL\x20TRAINED!\x20'+_0x482022);try{const _0x30b80d=JSON[_0xbd1f49(0x132)](_0x482022);if(_0x30b80d[_0xbd1f49(0x1e0)])_0x67c701[_0xbd1f49(0x23b)]('analysis.energy.insulationScore',{'val':JSON[_0xbd1f49(0x23e)](_0x30b80d['insulation']),'ack':!![]});if(_0x30b80d[_0xbd1f49(0x238)])_0x67c701[_0xbd1f49(0x23b)](_0xbd1f49(0x19b),{'val':JSON[_0xbd1f49(0x23e)](_0x30b80d[_0xbd1f49(0x238)]),'ack':!![]});}catch(_0x2f3133){_0x67c701[_0xbd1f49(0xa9)][_0xbd1f49(0x19c)]('Failed\x20to\x20parse\x20energy\x20result:\x20'+_0x2f3133[_0xbd1f49(0x1b0)]);}}else _0x67c701['log']['error'](_0xbd1f49(0x1bf)+_0x482022);}else{if(_0x488ec1[_0xbd1f49(0x193)]==='SECURITY_RESULT'){const {anomaly_score:_0x141132,is_anomaly:_0x31df93,threshold:_0x18f7ef}=_0x488ec1[_0xbd1f49(0x237)];_0x67c701['log'][_0xbd1f49(0x171)](_0xbd1f49(0x18e)+_0x141132[_0xbd1f49(0x244)](0x5)+'\x20(Threshold:\x20'+_0x18f7ef+_0xbd1f49(0x123)+(_0x31df93?_0xbd1f49(0x212):'OK')),_0x67c701['setStateAsync'](_0xbd1f49(0x183),{'val':_0x141132,'ack':!![]}),_0x67c701[_0xbd1f49(0x23b)](_0xbd1f49(0x1bb),{'val':new Date()[_0xbd1f49(0xa4)](),'ack':!![]});if(_0x31df93){const _0x1ed443=_0xbd1f49(0x23d)+_0x141132[_0xbd1f49(0x244)](0x4)+')';_0x67c701[_0xbd1f49(0x23b)]('analysis.isAlert',{'val':!![],'ack':!![]}),_0x67c701['setStateAsync'](_0xbd1f49(0x205),{'val':_0x1ed443,'ack':!![]}),sendNotification(_0x67c701,_0xbd1f49(0x20f)+_0x1ed443,![],!![]);}}}}}}}}}function startPythonService(_0x585210){const _0x66f6b4=a0_0x4ed656;let _0x53c82e='python3';if(fs[_0x66f6b4(0x146)](PYTHON_EXE))_0x585210[_0x66f6b4(0xa9)][_0x66f6b4(0x171)](_0x66f6b4(0xae)+PYTHON_EXE),_0x53c82e=PYTHON_EXE;else{_0x585210['log'][_0x66f6b4(0x265)]('‚ö†Ô∏è\x20VENV\x20not\x20found.\x20Falling\x20back\x20to\x20system\x20python3\x20(RISKY).');if(!_0x585210[_0x66f6b4(0x148)])installPythonDependencies(_0x585210);}try{const _0x54ff75=path[_0x66f6b4(0x21f)](__dirname,_0x66f6b4(0xa5),'service.py');_0x585210[_0x66f6b4(0xfa)]=spawn(_0x53c82e,[_0x54ff75]),_0x585210[_0x66f6b4(0xfa)]['stdout']['on'](_0x66f6b4(0x267),_0x3ae7f4=>{const _0x1c8620=_0x66f6b4,_0x4bfb81=_0x3ae7f4[_0x1c8620(0x182)]()[_0x1c8620(0x1fb)]('\x0a');_0x4bfb81['forEach'](_0x150452=>{const _0x41d381=_0x1c8620,_0xf4a008=_0x150452[_0x41d381(0x181)]();if(!_0xf4a008)return;if(_0xf4a008[_0x41d381(0x127)]('[LOG]'))_0x585210[_0x41d381(0xa9)][_0x41d381(0xed)](_0x41d381(0xd5)+_0xf4a008[_0x41d381(0x160)](0x5)[_0x41d381(0x181)]());else{if(_0xf4a008[_0x41d381(0x127)]('[RESULT]'))try{const _0x3eadfe=JSON[_0x41d381(0x132)](_0xf4a008['substring'](0x8)[_0x41d381(0x181)]());handlePythonResult(_0x585210,_0x3eadfe);}catch(_0x5e4b0a){_0x585210[_0x41d381(0xa9)][_0x41d381(0x265)](_0x41d381(0x24c)+_0xf4a008);}}(_0xf4a008[_0x41d381(0x235)]('No\x20module\x20named')||_0xf4a008[_0x41d381(0x235)](_0x41d381(0x1a3)))&&(_0x585210['log'][_0x41d381(0x265)](_0x41d381(0x243)),installPythonDependencies(_0x585210));});}),_0x585210['pythonProcess'][_0x66f6b4(0xb0)]['on'](_0x66f6b4(0x267),_0x41aed2=>{const _0x10e9c3=_0x66f6b4,_0x18c99c=_0x41aed2['toString']()[_0x10e9c3(0x181)]();!_0x18c99c[_0x10e9c3(0x235)](_0x10e9c3(0xd1))&&_0x585210['log'][_0x10e9c3(0x19c)](_0x10e9c3(0xb1)+_0x18c99c);}),_0x585210['pythonProcess']['on'](_0x66f6b4(0xd8),_0x277402=>{const _0x2d3cd9=_0x66f6b4;_0x585210['log'][_0x2d3cd9(0x171)]('[PYTHON]\x20Service\x20exited\x20with\x20code\x20'+_0x277402),_0x585210[_0x2d3cd9(0xfa)]=null;}),_0x585210['pythonProcess']['on'](_0x66f6b4(0x19c),_0x34c491=>{const _0x2ae992=_0x66f6b4;_0x585210[_0x2ae992(0xa9)][_0x2ae992(0x265)]('[PYTHON]\x20Failed\x20to\x20start:\x20'+_0x34c491['message']);});}catch(_0x573923){_0x585210['log'][_0x66f6b4(0x19c)](_0x66f6b4(0x11e)+_0x573923[_0x66f6b4(0x1b0)]);}}function stopPythonService(_0x40b767){const _0x178bba=a0_0x4ed656;if(_0x40b767['pythonProcess']){_0x40b767['log'][_0x178bba(0x171)]('üêç\x20Stopping\x20Python\x20Sidecar...');try{_0x40b767[_0x178bba(0xfa)][_0x178bba(0x24d)]();}catch(_0x1b4154){_0x40b767[_0x178bba(0xa9)][_0x178bba(0x265)](_0x178bba(0x1bc)+_0x1b4154[_0x178bba(0x1b0)]);}_0x40b767[_0x178bba(0xfa)]=null;}}class CogniLiving extends utils['Adapter']{constructor(_0xed82d4){const _0x158e40=a0_0x4ed656;super({..._0xed82d4,'name':_0x158e40(0xdd)}),this[_0x158e40(0x195)]=[],this[_0x158e40(0x1e5)]=[],this[_0x158e40(0x226)]=[],this[_0x158e40(0x22b)]=[],this[_0x158e40(0x1a9)]=[],this[_0x158e40(0x157)]={},this[_0x158e40(0x184)]={'latitude':0x0,'longitude':0x0,'city':''},this['isPresent']=!![],this[_0x158e40(0xd2)]=null,this[_0x158e40(0x25f)]=null,this[_0x158e40(0x21d)]=![],this[_0x158e40(0x118)]=null,this[_0x158e40(0x273)]=null,this[_0x158e40(0xac)]=SYSTEM_MODES['NORMAL'],this[_0x158e40(0xf8)]=![],this[_0x158e40(0xfe)]=![],this['systemUUID']=_0x158e40(0x253),this[_0x158e40(0x257)]=null,this['ltmJob']=null,this['modeResetJob']=null,this['driftAnalysisTimer']=null,this['briefingJob']=null,this['pythonProcess']=null,this['dependencyInstallInProgress']=![],this['on']('ready',this['onReady'][_0x158e40(0x1f6)](this)),this['on'](_0x158e40(0x1fe),this[_0x158e40(0x16f)][_0x158e40(0x1f6)](this)),this['on'](_0x158e40(0x10d),this['onUnload'][_0x158e40(0x1f6)](this)),this['on'](_0x158e40(0x1b0),this[_0x158e40(0x217)][_0x158e40(0x1f6)](this));}async['onReady'](){const _0x1fe369=a0_0x4ed656;this[_0x1fe369(0xa9)][_0x1fe369(0x171)](_0x1fe369(0x23c)+this[_0x1fe369(0x187)]+')'),await initZombies(this),this['config']['licenseKey']=this[_0x1fe369(0x113)][_0x1fe369(0x126)]||'';try{this[_0x1fe369(0xf8)]=await checkLicense(this,this['config'][_0x1fe369(0x126)]);}catch(_0x5de7b5){}if(!this['config'][_0x1fe369(0xa2)]||this[_0x1fe369(0x113)][_0x1fe369(0xa2)]<0.1)this[_0x1fe369(0x113)][_0x1fe369(0xa2)]=0xc;await initHistory(this),await initSystemConfig(this);if(this[_0x1fe369(0x113)]['geminiApiKey'])try{this[_0x1fe369(0x118)]=new GoogleGenerativeAI(this[_0x1fe369(0x113)][_0x1fe369(0x192)]),this[_0x1fe369(0x273)]=this[_0x1fe369(0x118)]['getGenerativeModel']({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x1fe369(0x103)}}),this['log'][_0x1fe369(0x171)]('Gemini\x20AI\x20initialized.');}catch(_0x20b543){this['log'][_0x1fe369(0x19c)](_0x1fe369(0xb9)+_0x20b543[_0x1fe369(0x1b0)]);}await createAllObjects(this),await loadSystemMode(this),await loadRawEventLog(this),await loadDailyDigests(this),this[_0x1fe369(0x1d9)](_0x1fe369(0x1f3)),this[_0x1fe369(0x1d9)](LTM_DP_TRIGGER_DIGEST),this[_0x1fe369(0x1d9)](_0x1fe369(0x1cd)),this[_0x1fe369(0x1d9)](_0x1fe369(0x15f)),this[_0x1fe369(0x1d9)](_0x1fe369(0x241)),this[_0x1fe369(0x1d9)](_0x1fe369(0x170)),this[_0x1fe369(0x1d9)](_0x1fe369(0x1db)),this['subscribeStates']('analysis.training.triggerHealth'),this[_0x1fe369(0x1d9)](_0x1fe369(0x15e)),await initSensorSubscriptions(this),await initPresenceSubscriptions(this),await setupTelegramListener(this),setTimeout(()=>checkWifiPresence(this),0x1388);if(this['analysisTimer'])clearInterval(this[_0x1fe369(0x257)]);const _0x3b824f=this[_0x1fe369(0x113)]['analysisInterval']||0xf;_0x3b824f>0x0&&(this[_0x1fe369(0x257)]=setInterval(()=>{runAutopilot(this);},_0x3b824f*0x3c*0x3e8)),setupLtmScheduler(this),setupModeResetScheduler(this),setupDriftAnalysisScheduler(this),setupBriefingScheduler(this),startPythonService(this),setTimeout(()=>{const _0x5cec9d=_0x1fe369;if(this[_0x5cec9d(0xfa)])runPythonHealthCheck(this);},0x1388);}[a0_0x4ed656(0x15d)](_0x3fea5e){const _0x2fd4e2=a0_0x4ed656;if(this[_0x2fd4e2(0x257)])clearInterval(this[_0x2fd4e2(0x257)]);if(this[_0x2fd4e2(0x251)])clearInterval(this['driftAnalysisTimer']);if(this['ltmJob'])this[_0x2fd4e2(0x19d)][_0x2fd4e2(0x164)]();if(this[_0x2fd4e2(0x141)])this[_0x2fd4e2(0x141)][_0x2fd4e2(0x164)]();if(this['briefingJob'])this[_0x2fd4e2(0xeb)][_0x2fd4e2(0x164)]();if(this[_0x2fd4e2(0xd2)])clearTimeout(this['exitTimer']);if(this['exitGraceTimer'])clearTimeout(this[_0x2fd4e2(0x25f)]);stopPythonService(this),_0x3fea5e();}async['onStateChange'](_0x5ad3ad,_0x53f5f4){const _0x278ce6=a0_0x4ed656;if(!_0x53f5f4)return;if(_0x5ad3ad[_0x278ce6(0x235)](_0x278ce6(0x165))&&_0x5ad3ad[_0x278ce6(0x1ba)](_0x278ce6(0xc0))&&_0x53f5f4[_0x278ce6(0x1b8)]){await handleTelegramResponse(this,_0x53f5f4[_0x278ce6(0x1b8)]);return;}if(_0x5ad3ad===this[_0x278ce6(0xc5)]+'.'+SYSTEM_DP_MODE){if(_0x53f5f4[_0x278ce6(0x1b8)]&&Object[_0x278ce6(0x208)](SYSTEM_MODES)[_0x278ce6(0x235)](_0x53f5f4[_0x278ce6(0x1b8)])){this[_0x278ce6(0xac)]=_0x53f5f4['val'];if(_0x53f5f4[_0x278ce6(0x1b8)]===SYSTEM_MODES[_0x278ce6(0x242)])await setPresence(this,![]);else await setPresence(this,!![]);}if(!_0x53f5f4[_0x278ce6(0x222)])this[_0x278ce6(0x19a)](_0x5ad3ad,{'val':this[_0x278ce6(0xac)],'ack':!![]});return;}if(!_0x53f5f4[_0x278ce6(0x222)]){_0x5ad3ad[_0x278ce6(0x235)](_0x278ce6(0x1f3))&&_0x53f5f4[_0x278ce6(0x1b8)]&&(this[_0x278ce6(0x19a)](_0x5ad3ad,{'val':![],'ack':!![]}),runGeminiAnalysis(this));if(_0x5ad3ad[_0x278ce6(0x235)](_0x278ce6(0x1f4))&&_0x53f5f4['val']){this[_0x278ce6(0x19a)](_0x5ad3ad,{'val':![],'ack':!![]});if(this[_0x278ce6(0xf8)])createDailyDigest(this);}_0x5ad3ad[_0x278ce6(0x235)](_0x278ce6(0x1dc))&&_0x53f5f4[_0x278ce6(0x1b8)]&&(this['setState'](_0x5ad3ad,{'val':![],'ack':!![]}),sendMorningBriefing(this));_0x5ad3ad['includes'](_0x278ce6(0x12d))&&_0x53f5f4[_0x278ce6(0x1b8)]&&(this[_0x278ce6(0x19a)](_0x5ad3ad,{'val':![],'ack':!![]}),executeAutomationAction(this));if(_0x5ad3ad[_0x278ce6(0x235)]('analysis.training.triggerSecurity')&&_0x53f5f4[_0x278ce6(0x1b8)]){this[_0x278ce6(0x19a)](_0x5ad3ad,{'val':![],'ack':!![]});if(!this[_0x278ce6(0xf8)])return;try{const _0x2f7b69=await this[_0x278ce6(0x26c)](_0x278ce6(0x1e3));if(_0x2f7b69&&_0x2f7b69[_0x278ce6(0x1b8)]){const _0x92fb5=JSON[_0x278ce6(0x132)](_0x2f7b69['val']);this[_0x278ce6(0xa9)]['info'](_0x278ce6(0x1ad)),this['setStateAsync'](_0x278ce6(0x114),{'val':_0x278ce6(0x180),'ack':!![]}),sendToPython(this,'TRAIN_SECURITY',{'sequences':_0x92fb5});}}catch(_0x19f31d){this[_0x278ce6(0xa9)][_0x278ce6(0x19c)](_0x278ce6(0xb7)+_0x19f31d[_0x278ce6(0x1b0)]);}}if(_0x5ad3ad['includes'](_0x278ce6(0xca))&&_0x53f5f4[_0x278ce6(0x1b8)]){this[_0x278ce6(0x19a)](_0x5ad3ad,{'val':![],'ack':!![]});if(!this[_0x278ce6(0xf8)])return;try{const _0x5de580=await this[_0x278ce6(0x26c)](LTM_DP_DAILY_DIGESTS);if(_0x5de580&&_0x5de580[_0x278ce6(0x1b8)]){const _0x128604=JSON[_0x278ce6(0x132)](_0x5de580['val']);this[_0x278ce6(0xa9)][_0x278ce6(0x171)](_0x278ce6(0x1e2)),sendToPython(this,_0x278ce6(0x1f9),{'digests':_0x128604});}}catch(_0x1aaf2a){this['log'][_0x278ce6(0x19c)](_0x278ce6(0x1b7)+_0x1aaf2a[_0x278ce6(0x1b0)]);}}if(_0x5ad3ad[_0x278ce6(0x235)](_0x278ce6(0x15e))&&_0x53f5f4[_0x278ce6(0x1b8)]){this['setState'](_0x5ad3ad,{'val':![],'ack':!![]});if(!this[_0x278ce6(0xf8)])return;try{const _0x582c8b=await this[_0x278ce6(0x26c)]('LTM.trainingData.thermodynamics');if(_0x582c8b&&_0x582c8b[_0x278ce6(0x1b8)]){const _0x296d85=JSON[_0x278ce6(0x132)](_0x582c8b[_0x278ce6(0x1b8)]);this[_0x278ce6(0xa9)]['info'](_0x278ce6(0x1e6)),sendToPython(this,_0x278ce6(0x26a),{'points':_0x296d85});}}catch(_0x5b62df){this['log'][_0x278ce6(0x19c)](_0x278ce6(0x1fd)+_0x5b62df[_0x278ce6(0x1b0)]);}}return;}if(this['config'][_0x278ce6(0x221)]&&this[_0x278ce6(0x113)][_0x278ce6(0x221)][_0x278ce6(0x235)](_0x5ad3ad)){await checkWifiPresence(this);return;}const _0x2b7e78=(this[_0x278ce6(0x113)][_0x278ce6(0x1ec)]||[])['find'](_0x113547=>_0x113547['id']===_0x5ad3ad);if(_0x2b7e78)processSensorEvent(this,_0x5ad3ad,_0x53f5f4,_0x2b7e78);}async[a0_0x4ed656(0x217)](_0x5773ed){const _0x4fc206=a0_0x4ed656;if(typeof _0x5773ed===_0x4fc206(0x198)&&_0x5773ed[_0x4fc206(0x1b0)])try{if(_0x5773ed[_0x4fc206(0x1eb)]===_0x4fc206(0x1f5)){const _0x411b89=_0x5773ed[_0x4fc206(0x1b0)][_0x4fc206(0x16c)]||this[_0x4fc206(0x113)][_0x4fc206(0x192)];if(!_0x411b89)return this[_0x4fc206(0x150)](_0x5773ed[_0x4fc206(0xbd)],_0x5773ed[_0x4fc206(0x1eb)],{'success':![],'message':_0x4fc206(0x153)},_0x5773ed[_0x4fc206(0x172)]);try{const _0x42afbf=new GoogleGenerativeAI(_0x411b89),_0x52646d=_0x42afbf['getGenerativeModel']({'model':GEMINI_MODEL}),_0x158bea=await _0x52646d[_0x4fc206(0x1c5)](_0x4fc206(0x121)),_0x3f2a09=await _0x158bea[_0x4fc206(0x1b1)],_0x5a59a6=_0x3f2a09[_0x4fc206(0x1ff)]();this[_0x4fc206(0x150)](_0x5773ed['from'],_0x5773ed[_0x4fc206(0x1eb)],{'success':!![],'message':'Verbindung\x20erfolgreich!\x20Antwort:\x20'+_0x5a59a6['substring'](0x0,0x14)+_0x4fc206(0x260)},_0x5773ed[_0x4fc206(0x172)]);}catch(_0x3711c6){this[_0x4fc206(0x150)](_0x5773ed[_0x4fc206(0xbd)],_0x5773ed['command'],{'success':![],'message':_0x4fc206(0x259)+_0x3711c6['message']},_0x5773ed['callback']);}}else{if(_0x5773ed[_0x4fc206(0x1eb)]==='testContext'){const _0x48f09c=await getWeatherContext(this),_0x49e940=await getCalendarContext(this);this[_0x4fc206(0x150)](_0x5773ed[_0x4fc206(0xbd)],_0x5773ed[_0x4fc206(0x1eb)],{'success':!![],'weather':_0x48f09c,'calendar':_0x49e940},_0x5773ed[_0x4fc206(0x172)]);}else{if(_0x5773ed[_0x4fc206(0x1eb)]===_0x4fc206(0x14b)){}else{if(_0x5773ed[_0x4fc206(0x1eb)]===_0x4fc206(0x163)){if(!this[_0x4fc206(0xf8)])return this[_0x4fc206(0x150)](_0x5773ed[_0x4fc206(0xbd)],_0x5773ed[_0x4fc206(0x1eb)],{'success':![],'isPro':![]},_0x5773ed[_0x4fc206(0x172)]);let _0x1280d8={'status':_0x4fc206(0x21b),'details':'','lastCheck':0x0};try{_0x1280d8[_0x4fc206(0x254)]=(await this[_0x4fc206(0x26c)](LTM_DP_DRIFT_STATUS))[_0x4fc206(0x1b8)],_0x1280d8['details']=(await this[_0x4fc206(0x26c)](LTM_DP_DRIFT_DETAILS))[_0x4fc206(0x1b8)],_0x1280d8[_0x4fc206(0x1be)]=(await this[_0x4fc206(0x26c)](LTM_DP_DRIFT_LAST_CHECK))[_0x4fc206(0x1b8)];}catch(_0x444704){}const _0x34a7c5=this[_0x4fc206(0x1e5)]||[];this[_0x4fc206(0x150)](_0x5773ed[_0x4fc206(0xbd)],_0x5773ed[_0x4fc206(0x1eb)],{'success':!![],'isPro':!![],'dailyDigests':this['dailyDigests'],'driftAnalysis':_0x1280d8,'analysisHistory':_0x34a7c5},_0x5773ed['callback']);}else{if(_0x5773ed['command']===_0x4fc206(0x256)){const _0x1f57ce=this[_0x4fc206(0x1a9)][_0x4fc206(0xe2)],_0x39690e=new Date(),_0x507c22=new Date(_0x39690e[_0x4fc206(0x189)](),_0x39690e[_0x4fc206(0x1c7)](),_0x39690e[_0x4fc206(0xf7)]())['getTime'](),_0x29b4d0=this[_0x4fc206(0x22b)][_0x4fc206(0xdb)](_0x347728=>new Date(_0x347728[_0x4fc206(0x1b4)])[_0x4fc206(0x110)]()>_0x507c22)[_0x4fc206(0xe2)],_0x29373b=new Array(0x18)[_0x4fc206(0xf6)](0x0);this['rawEventLog'][_0x4fc206(0x1d8)](_0x1fdff1=>{const _0x5ece3a=_0x4fc206,_0x31bd8d=new Date(_0x1fdff1['timestamp']);if(_0x31bd8d[_0x5ece3a(0x110)]()>_0x507c22)_0x29373b[_0x31bd8d[_0x5ece3a(0x1ef)]()]++;});let _0x4c6cb8={'status':_0x4fc206(0x21b)};try{_0x4c6cb8[_0x4fc206(0x254)]=(await this[_0x4fc206(0x26c)](LTM_DP_DRIFT_STATUS))['val'];}catch(_0x571c36){}let _0x55f48d='';try{const _0x5b0e6b=await this[_0x4fc206(0x26c)](_0x4fc206(0x1f7));_0x55f48d=_0x5b0e6b?_0x5b0e6b[_0x4fc206(0x1b8)]:'';}catch(_0x3b1339){}let _0x315d14=null;!this[_0x4fc206(0x273)]&&(_0x315d14=this[_0x4fc206(0x113)]['geminiApiKey']?_0x4fc206(0x176):_0x4fc206(0x13b));let _0x12efe2={'detected':![],'description':'','targetId':'','targetValue':'','autoApply':![]};try{const _0x188a8d=await this['getStateAsync'](_0x4fc206(0x276)),_0x5c0ede=await this[_0x4fc206(0x26c)]('analysis.automation.description'),_0x7c62cc=await this[_0x4fc206(0x26c)](_0x4fc206(0xbe)),_0x29f589=await this[_0x4fc206(0x26c)](_0x4fc206(0xcd)),_0x363044=await this[_0x4fc206(0x26c)]('analysis.automation.autoApply');_0x188a8d&&_0x188a8d['val']&&(_0x12efe2[_0x4fc206(0x15b)]=!![],_0x12efe2[_0x4fc206(0x1cf)]=_0x5c0ede?_0x5c0ede[_0x4fc206(0x1b8)]:'',_0x12efe2[_0x4fc206(0x144)]=_0x7c62cc?_0x7c62cc[_0x4fc206(0x1b8)]:'',_0x12efe2['targetValue']=_0x29f589?_0x29f589[_0x4fc206(0x1b8)]:''),_0x12efe2[_0x4fc206(0x1f8)]=_0x363044?!!_0x363044['val']:![];}catch(_0x58a238){}this[_0x4fc206(0x150)](_0x5773ed[_0x4fc206(0xbd)],_0x5773ed[_0x4fc206(0x1eb)],{'success':!![],'eventHistory':this[_0x4fc206(0x195)][_0x4fc206(0x21a)](0x0,0xf),'stats':{'digestCount':_0x1f57ce,'eventCountToday':_0x29b4d0,'hourlyActivity':_0x29373b,'driftStatus':_0x4c6cb8[_0x4fc206(0x254)],'isPresent':this['isPresent'],'presenceWho':_0x55f48d,'minDays':this['config']['minDaysForBaseline']||0x7,'stbDays':this[_0x4fc206(0x113)][_0x4fc206(0xe0)]||0xe,'ltbDays':this[_0x4fc206(0x113)][_0x4fc206(0x23f)]||0x3c,'systemError':_0x315d14},'automation':_0x12efe2},_0x5773ed[_0x4fc206(0x172)]);}else{if(_0x5773ed[_0x4fc206(0x1eb)]===_0x4fc206(0x1ab)){const _0x6921ad=await this['getForeignObjectsAsync']('enum.functions.*',_0x4fc206(0x128)),_0x6c24e5=[];if(_0x6921ad)for(const _0x13fcb2 in _0x6921ad){const _0x52a92e=_0x6921ad[_0x13fcb2],_0xf2dec=(_0x52a92e[_0x4fc206(0x168)]&&typeof _0x52a92e[_0x4fc206(0x168)][_0x4fc206(0xb6)]===_0x4fc206(0x198)?_0x52a92e[_0x4fc206(0x168)][_0x4fc206(0xb6)]['de']:_0x52a92e['common'][_0x4fc206(0xb6)])||_0x52a92e['common'][_0x4fc206(0xb6)];_0x6c24e5[_0x4fc206(0x175)]({'id':_0x13fcb2,'name':_0xf2dec});}this[_0x4fc206(0x150)](_0x5773ed[_0x4fc206(0xbd)],_0x5773ed[_0x4fc206(0x1eb)],{'success':!![],'enums':_0x6c24e5},_0x5773ed[_0x4fc206(0x172)]);}else{if(_0x5773ed[_0x4fc206(0x1eb)]===_0x4fc206(0x1cb))try{const _0x9de183=await scanForDevices(this,_0x5773ed['message']||{});this[_0x4fc206(0x150)](_0x5773ed[_0x4fc206(0xbd)],_0x5773ed['command'],{'success':!![],'devices':_0x9de183},_0x5773ed[_0x4fc206(0x172)]);}catch(_0x128c3a){this[_0x4fc206(0x150)](_0x5773ed[_0x4fc206(0xbd)],_0x5773ed[_0x4fc206(0x1eb)],{'success':![],'error':_0x128c3a[_0x4fc206(0x1b0)]},_0x5773ed[_0x4fc206(0x172)]);}else{if(_0x5773ed[_0x4fc206(0x1eb)]===_0x4fc206(0xc4)){const _0x2f292d=_0x5773ed['message'][_0x4fc206(0xda)];if(!_0x2f292d)return this[_0x4fc206(0x150)](_0x5773ed[_0x4fc206(0xbd)],_0x5773ed[_0x4fc206(0x1eb)],{'success':![],'error':_0x4fc206(0x10e)},_0x5773ed[_0x4fc206(0x172)]);const _0x5bbb68=await getCalendarNames(this,_0x2f292d);this['sendTo'](_0x5773ed['from'],_0x5773ed[_0x4fc206(0x1eb)],{'success':!![],'names':_0x5bbb68},_0x5773ed[_0x4fc206(0x172)]);}else{if(_0x5773ed[_0x4fc206(0x1eb)]===_0x4fc206(0x1ee)){const {targetId:_0x1aeb6d,targetValue:_0x25f79f}=_0x5773ed[_0x4fc206(0x1b0)];this[_0x4fc206(0xa9)][_0x4fc206(0x171)](_0x4fc206(0x173)+_0x1aeb6d+_0x4fc206(0x1f1)+_0x25f79f),await this[_0x4fc206(0x23b)](_0x4fc206(0x276),{'val':!![],'ack':!![]}),await this[_0x4fc206(0x23b)]('analysis.automation.description',{'val':_0x4fc206(0x115)+_0x1aeb6d,'ack':!![]}),await this[_0x4fc206(0x23b)](_0x4fc206(0xbe),{'val':_0x1aeb6d,'ack':!![]}),await this['setStateAsync'](_0x4fc206(0xcd),{'val':_0x25f79f,'ack':!![]}),this['sendTo'](_0x5773ed[_0x4fc206(0xbd)],_0x5773ed[_0x4fc206(0x1eb)],{'success':!![]},_0x5773ed['callback']);}else{if(_0x5773ed[_0x4fc206(0x1eb)]===_0x4fc206(0xe1)){const {historyId:_0x2fdf7d,rating:_0x489e2d,comment:_0x3cb4cb,alertReason:_0x479c0c}=_0x5773ed['message'];_0x2fdf7d&&_0x489e2d?(await saveFeedback(this,{'timestamp':Date[_0x4fc206(0x1c1)](),'historyId':_0x2fdf7d,'rating':_0x489e2d,'comment':_0x3cb4cb,'alertReason':_0x479c0c}),this[_0x4fc206(0x150)](_0x5773ed[_0x4fc206(0xbd)],_0x5773ed['command'],{'success':!![]},_0x5773ed[_0x4fc206(0x172)])):this[_0x4fc206(0x150)](_0x5773ed[_0x4fc206(0xbd)],_0x5773ed['command'],{'success':![],'error':_0x4fc206(0x1d6)},_0x5773ed[_0x4fc206(0x172)]);}else _0x5773ed[_0x4fc206(0x1eb)]==='dismissAutomation'&&(this['log']['info'](_0x4fc206(0x20a)),await this[_0x4fc206(0x23b)](_0x4fc206(0x276),{'val':![],'ack':!![]}),await this[_0x4fc206(0x23b)]('analysis.automation.description',{'val':'','ack':!![]}),this[_0x4fc206(0x150)](_0x5773ed[_0x4fc206(0xbd)],_0x5773ed['command'],{'success':!![]},_0x5773ed[_0x4fc206(0x172)]));}}}}}}}}}}catch(_0x17715a){this[_0x4fc206(0xa9)][_0x4fc206(0x19c)](_0x4fc206(0x24f)+_0x5773ed[_0x4fc206(0x1eb)]+':\x20'+_0x17715a[_0x4fc206(0x1b0)]);if(_0x5773ed[_0x4fc206(0x172)])this[_0x4fc206(0x150)](_0x5773ed[_0x4fc206(0xbd)],_0x5773ed['command'],{'success':![],'error':_0x17715a[_0x4fc206(0x1b0)]},_0x5773ed['callback']);}}}if(require[a0_0x4ed656(0x107)]!==module)module[a0_0x4ed656(0x249)]=_0x5be8dd=>new CogniLiving(_0x5be8dd);else new CogniLiving();