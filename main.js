const a0_0x697e0c=a0_0x3744;(function(_0x42fc8c,_0x21f0a5){const _0xc08870=a0_0x3744,_0x41cf5f=_0x42fc8c();while(!![]){try{const _0x457e6f=-parseInt(_0xc08870(0x228))/0x1+-parseInt(_0xc08870(0x17f))/0x2*(parseInt(_0xc08870(0x190))/0x3)+parseInt(_0xc08870(0x1fb))/0x4+parseInt(_0xc08870(0x26d))/0x5+-parseInt(_0xc08870(0x27e))/0x6+-parseInt(_0xc08870(0x1a9))/0x7*(parseInt(_0xc08870(0x273))/0x8)+parseInt(_0xc08870(0x1e3))/0x9;if(_0x457e6f===_0x21f0a5)break;else _0x41cf5f['push'](_0x41cf5f['shift']());}catch(_0x45a2df){_0x41cf5f['push'](_0x41cf5f['shift']());}}}(a0_0x15c0,0x2adf4));const a0_0x273d88=(function(){let _0x8330f6=!![];return function(_0x580ac0,_0x5312fa){const _0x4191f9=_0x8330f6?function(){const _0x5854f9=a0_0x3744;if(_0x5312fa){const _0x3df0bb=_0x5312fa[_0x5854f9(0x192)](_0x580ac0,arguments);return _0x5312fa=null,_0x3df0bb;}}:function(){};return _0x8330f6=![],_0x4191f9;};}()),a0_0x3b991f=a0_0x273d88(this,function(){const _0x4d870e=a0_0x3744;return a0_0x3b991f[_0x4d870e(0x280)]()[_0x4d870e(0x236)](_0x4d870e(0x2bc))[_0x4d870e(0x280)]()[_0x4d870e(0x26b)](a0_0x3b991f)[_0x4d870e(0x236)]('(((.+)+)+)+$');});a0_0x3b991f();function a0_0x3744(_0x2437e8,_0x329403){const _0x25790c=a0_0x15c0();return a0_0x3744=function(_0x3b991f,_0x273d88){_0x3b991f=_0x3b991f-0x17c;let _0x15c03a=_0x25790c[_0x3b991f];return _0x15c03a;},a0_0x3744(_0x2437e8,_0x329403);}function a0_0x15c0(){const _0x22a217=['sensor.window','subscribeStates','analysis.automation.targetValue','sendMorningBriefing','systemConfig','Kein\x20Kalender-Adapter','includes','analysis.training.triggerComfort','guest','briefingJob','analysis.triggerBriefing','analysis.training.triggerTopology','Notification\x20Test\x20Failed:\x20','./lib/scheduler','analysis.training.triggerSecurity','modeResetJob','driftAnalysisTimer','infrasoundEnabled','memoryCache','analysisHistory','useWeather','NORMAL','main','door','keys','analyzeWindowOpening','values','Fehler:\x20','dependencyInstallInProgress','6703893OEZJoz','ready','log','triggerEnergyPrediction','.data.table','LTM.dailyDigests','analysisTimer','length','Daten\x20nicht\x20verfÃ¼gbar','analysis.energy.warmupSources','security.alarm_triggered','onMessage','temperature','analysis.health.gaitSensors','analysis.training.triggerEnergy','handleInfrasound','pop','getGenerativeModel','sources','Gemini\x20AI\x20initialized.','analysis.energy.warmupTargets','timestamp','namespace','Warm-Up\x20Target\x20Temps\x20(JSON)','42928udpbsC','getStateAsync','Gait\x20Speed\x20Calculation\x20Proof','exports','isArray','ANALYZE_TREND','abortExitTimer','setupDriftAnalysisScheduler','slice','sensorLastValues','warn','getTime','lastAlertState','send','add','value','runGeminiAnalysis','inactivityThresholdHours','system.mode','triggerGaitAnalysis','bind','toLowerCase','Aktiv\x20(','from','./lib/automation','lastTrackerEventTime','cleanupGhostInterventions','loadSystemMode','scores','Test','debug','startService','Active\x20Calendar\x20Enforcements\x20(Locks)','analysis.health.activityTrend','notifyPushoverInstance','reed','enum.rooms.*','@iobroker/adapter-core','analysis.energy.mpcActive','getHours','CALIB','analysis.automation.autoApply','getEnums','getLtmData','message','318278JjMXdS','weatherunderground.0','common','sonn','triggerInfrasoundCorrelation','Instanz\x20nicht\x20gefunden','Keine\x20Antwort\x20von\x20Gemini','[Infrasound]\x20Subscribing\x20to\x20external\x20sensor:\x20','triggerBriefing','fill','LTM.trainingData.thermodynamics','toFixed','isGracePeriodActive','[Infrasound]\x20ðŸš¨\x20ALARM\x20TRIGGERED!\x20Pressure\x20Wave:\x20','search','location','manual','motion','abs','checkCalendarTriggers','bootTime','party','checkSolarCondition','{\x22default\x22:\x2021}','TRAIN_HEALTH','[Calibration]\x20Window\x20','name','find','times','object','trackerEnabled','dismissAutomation','pressureBuffer','General\x20Activity\x20Trend\x20(%)','system.presenceWho','.communicate.request','sort','setState','entries','./lib/topology','geminiModel','.system.mode','@google/generative-ai','runAutopilot','thermostat','onReady','cogni-living','parse','callback','accuweather.0','floor','Party\x20Mode','version','Sec-Training\x20started...','isProVersion','isPresent','checkLicense','analysis.health.gaitDebug','analysis.energy.activeEnforcements','type','sensor.door','setPresence','\x20min\x20ausbleiben.','checkAndInstall','updateHealthVector','analysis.automation.targetId','checkWifiPresence','constructor','number','1015280JmsMyQ','config','SYSTEM_DP_MODE','minutes_safe','analysis.security.infrasoundLog','â¤ï¸\x20Auto-Heartbeat:\x20Aktualisiere\x20Gesundheits-Trends...','23216uUgeQj','onUnload','generateContent','notifyTelegramInstance','notifyTelegramEnabled','[Forensics]\x20Infrasound\x20Event\x20correlated:\x20','klar','unshift','heiter','error','runPythonHealthCheck','1862082raAoXN','scanForDevices','toString','Standard','LTM.baselineStatus','updateTopologyMatrix','Key\x20not\x20found\x20or\x20not\x20provided','TRACK_EVENT','NextHours.Location_1.Day_1.current.symbol_desc','Adapter','ðŸš¨\x20DRUCKWELLEN-ALARM!\x20StÃ¤rke:\x20','analysisInterval','open','analysis.training.triggerHealth','./lib/recorder','scanThermostats','createDailyDigest','Simulation\x20durch\x20Admin\x20(Test)','SYSTEM_MODES','[Forensics]\x20Save\x20failed:\x20','appendToLog','stateChange','json','matrix','infrasoundThreshold','Gemini\x20Init\x20Error:\x20','\x20rooms\x20(preventing\x20Cold\x20Start\x20Amnesia).','sendTo','getCalendarNames','ðŸ§ \x20Memory:\x20Cache\x20hydrated\x20with\x20','testContext','analysis.health.todayVector','presenceDevices','Fenster\x20geÃ¶ffnet:\x20','monitorEnforcements','LTM.trainingData.sequences','calendarInstance','./lib/scanner','geminiApiKey','clear','SET_TOPOLOGY','_calName','getForeignObjectsAsync','infrasoundArmingId','PINN\x20AI\x20Forecast','unload','Forensic\x20Infrasound\x20Log','protectAiMemory','instance','forEach','sunny','sendNotification','TRAIN_SECURITY','genAI','exitTimer','healthTrendInterval','join','Keine\x20Sensor-AktivitÃ¤t','infrasoundSensorId','now','currentSystemMode','PREDICT_ENERGY','(((.+)+)+)+$','Warm-Up\x20Time\x20(Minutes\x20to\x20Target)','Current.WeatherText','triggerDailyDigest','TRAIN_ENERGY','analysis.automation.description','ALARM','getForeignObjectAsync','isSolar','testApiKey','state','trackerHeartbeat','simulateEnergyMPC','ðŸŽ“\x20[RL-RESET]\x20Lern-Sperre\x20(Penalty)\x20fÃ¼r\x20\x27','analysis.energy.ventilationAlerts','enum','MATCH\x20(False\x20Positive)','push','startSystem','analysis.energy.pinnForecast','2kXLFVA','info','analysis.energy.warmupTimes','licenseKey','setObjectNotExistsAsync','automation.triggerAction','updated','response','Lernphase\x20(','magnet','setupModeResetScheduler','setupLtmScheduler','string','initZombies','[Infrasound]\x20ðŸŸ¡\x20Debug-Mode:\x20Alarm\x20detected\x20but\x20suppressed\x20because\x20presence=true.','infrasoundLocked','onStateChange','454602TeIUZp','setHours','apply','cancel','LTM.rawEventLog','analysis.automation.patternDetected','setupBriefingScheduler','role','text','dailyDigests','analysis.trigger','\x20hPa\x20(Threshold:\x20','./lib/python_bridge','communicate.request','analysis.security.learningStatus','some','analysis.energy.rlPenalties','Sensors\x20used\x20for\x20Gait\x20Analysis','ErklÃ¤rt\x20durch:\x20','stringify','filter','command','initHistory','ack','setStateAsync','7dvWLyL','getMinutes','eventHistory','getForeignStateAsync','updateTopology','minDaysForBaseline','analysis.topology.structure','\x27\x20wurde\x20manuell\x20vom\x20Benutzer\x20gelÃ¶scht.','apiKey','models/gemini-flash-latest','subscribeForeignStatesAsync','rawEventLog','OPTIMIZE_ENERGY','val','cogni-living\x20adapter\x20starting\x20(v','endsWith','calendarName','devices','scanDevices','split','getOutsideTemperatureNumeric','window','ltmJob','Activity-Level','daswetter.0','initSystemConfig','ðŸ””\x20Dies\x20ist\x20ein\x20Test\x20von\x20Cogni-Living.','Verbindung\x20erfolgreich!','ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...'];a0_0x15c0=function(){return _0x22a217;};return a0_0x15c0();}'use strict';const utils=require(a0_0x697e0c(0x220)),{GoogleGenerativeAI}=require(a0_0x697e0c(0x252)),installer=require('./lib/installer'),scanner=require(a0_0x697e0c(0x2a3)),schedulers=require(a0_0x697e0c(0x1d3)),topology=require(a0_0x697e0c(0x24f)),setup=require('./lib/setup'),recorder=require(a0_0x697e0c(0x28c)),pythonBridge=require(a0_0x697e0c(0x19c)),aiAgent=require('./lib/ai_agent'),deadMan=require('./lib/dead_man'),automation=require(a0_0x697e0c(0x213)),GEMINI_MODEL=a0_0x697e0c(0x1b2),ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};class CogniLiving extends utils[a0_0x697e0c(0x287)]{constructor(_0x376560){const _0x6c9efb=a0_0x697e0c;super({..._0x376560,'name':_0x6c9efb(0x256)}),this[_0x6c9efb(0x1ab)]=[],this[_0x6c9efb(0x1d9)]=[],this[_0x6c9efb(0x1b4)]=[],this[_0x6c9efb(0x199)]=[],this['sensorLastValues']={},this[_0x6c9efb(0x1ca)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x6c9efb(0x25f)]=!![],this[_0x6c9efb(0x2b4)]=null,this['exitGraceTimer']=null,this[_0x6c9efb(0x234)]=![],this[_0x6c9efb(0x2b3)]=null,this[_0x6c9efb(0x250)]=null,this[_0x6c9efb(0x2ba)]=setup[_0x6c9efb(0x290)][_0x6c9efb(0x1db)],this[_0x6c9efb(0x25e)]=![],this[_0x6c9efb(0x207)]=![],this['analysisTimer']=null,this[_0x6c9efb(0x1bf)]=null,this['modeResetJob']=null,this[_0x6c9efb(0x1d6)]=null,this[_0x6c9efb(0x1cf)]=null,this['trackerHeartbeat']=null,this[_0x6c9efb(0x2b5)]=null,this[_0x6c9efb(0x1e2)]=![],this[_0x6c9efb(0x214)]=Date['now'](),this[_0x6c9efb(0x1d8)]=null,this[_0x6c9efb(0x23c)]=Date[_0x6c9efb(0x2b9)](),this['infrasoundLocked']=![],this[_0x6c9efb(0x248)]=[],this['on'](_0x6c9efb(0x1e4),this[_0x6c9efb(0x255)][_0x6c9efb(0x20f)](this)),this['on'](_0x6c9efb(0x293),this[_0x6c9efb(0x18f)][_0x6c9efb(0x20f)](this)),this['on'](_0x6c9efb(0x2ab),this[_0x6c9efb(0x274)][_0x6c9efb(0x20f)](this)),this['on'](_0x6c9efb(0x227),this[_0x6c9efb(0x1ee)][_0x6c9efb(0x20f)](this));}async[a0_0x697e0c(0x255)](){const _0x58b06e=a0_0x697e0c;this[_0x58b06e(0x1e5)][_0x58b06e(0x180)](_0x58b06e(0x1b7)+this[_0x58b06e(0x25c)]+')\x20-\x20Phase\x20D\x20(Forensic\x20Calibration)');if(!installer[_0x58b06e(0x267)](this,()=>this[_0x58b06e(0x17d)]()))return;}async[a0_0x697e0c(0x17d)](){const _0x236ecf=a0_0x697e0c;await setup[_0x236ecf(0x18c)](this);try{this['isProVersion']=await setup[_0x236ecf(0x260)](this[_0x236ecf(0x26e)][_0x236ecf(0x182)]);}catch(_0x47360f){}if(!this[_0x236ecf(0x26e)]['inactivityThresholdHours']||this[_0x236ecf(0x26e)]['inactivityThresholdHours']<0.1)this[_0x236ecf(0x26e)][_0x236ecf(0x20c)]=0xc;await setup[_0x236ecf(0x1a6)](this),await setup[_0x236ecf(0x1c2)](this);try{const _0x4ff2b9=await this[_0x236ecf(0x1fc)]('analysis.energy.warmupTimes'),_0x53a65b=await this['getStateAsync'](_0x236ecf(0x1ec));_0x4ff2b9&&_0x4ff2b9[_0x236ecf(0x1b6)]&&_0x53a65b&&_0x53a65b[_0x236ecf(0x1b6)]&&(Date[_0x236ecf(0x2b9)]()-_0x4ff2b9['ts']<0x4*0xe10*0x3e8&&(this[_0x236ecf(0x1d8)]={'times':JSON[_0x236ecf(0x257)](_0x4ff2b9['val']),'sources':JSON[_0x236ecf(0x257)](_0x53a65b['val'])},this['log'][_0x236ecf(0x180)](_0x236ecf(0x29b)+Object[_0x236ecf(0x1de)](this[_0x236ecf(0x1d8)][_0x236ecf(0x244)])['length']+_0x236ecf(0x298))));}catch(_0x1369f8){this[_0x236ecf(0x1e5)][_0x236ecf(0x205)]('Memory\x20Hydration\x20Failed:\x20'+_0x1369f8[_0x236ecf(0x227)]);}if(this[_0x236ecf(0x26e)][_0x236ecf(0x2a4)])try{this[_0x236ecf(0x2b3)]=new GoogleGenerativeAI(this[_0x236ecf(0x26e)]['geminiApiKey']),this['geminiModel']=this[_0x236ecf(0x2b3)][_0x236ecf(0x1f4)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':'application/json'}}),this[_0x236ecf(0x1e5)][_0x236ecf(0x180)](_0x236ecf(0x1f6));}catch(_0x55efac){this['log'][_0x236ecf(0x27c)](_0x236ecf(0x297)+_0x55efac[_0x236ecf(0x227)]);}await setup['createAllObjects'](this),await this[_0x236ecf(0x216)](),await this[_0x236ecf(0x183)](_0x236ecf(0x17e),{'type':_0x236ecf(0x2c6),'common':{'name':_0x236ecf(0x2aa),'type':'string','role':_0x236ecf(0x294),'read':!![],'write':![]},'native':{}}),await this[_0x236ecf(0x183)](_0x236ecf(0x2ca),{'type':_0x236ecf(0x2c6),'common':{'name':'Active\x20Ventilation\x20Alerts','type':_0x236ecf(0x18b),'role':'json','read':!![],'write':![]},'native':{}}),await this[_0x236ecf(0x183)](_0x236ecf(0x181),{'type':_0x236ecf(0x2c6),'common':{'name':_0x236ecf(0x2bd),'type':_0x236ecf(0x18b),'role':_0x236ecf(0x294),'read':!![],'write':![]},'native':{}}),await this[_0x236ecf(0x183)](_0x236ecf(0x1f7),{'type':_0x236ecf(0x2c6),'common':{'name':_0x236ecf(0x1fa),'type':_0x236ecf(0x18b),'role':'json','read':!![],'write':!![],'def':_0x236ecf(0x23f)},'native':{}}),await this[_0x236ecf(0x183)](_0x236ecf(0x1a0),{'type':_0x236ecf(0x2c6),'common':{'name':'Reinforcement\x20Learning\x20Penalties','type':_0x236ecf(0x18b),'role':_0x236ecf(0x294),'read':!![],'write':![],'def':'{}'},'native':{}}),await this['setObjectNotExistsAsync'](_0x236ecf(0x21c),{'type':_0x236ecf(0x2c6),'common':{'name':_0x236ecf(0x249),'type':_0x236ecf(0x26c),'role':_0x236ecf(0x20a),'unit':'%','read':!![],'write':![]},'native':{}}),await this[_0x236ecf(0x183)](_0x236ecf(0x1f0),{'type':'state','common':{'name':_0x236ecf(0x1a1),'type':_0x236ecf(0x18b),'role':'text','read':!![],'write':![]},'native':{}}),await this[_0x236ecf(0x183)](_0x236ecf(0x262),{'type':'state','common':{'name':_0x236ecf(0x21b),'type':_0x236ecf(0x18b),'role':_0x236ecf(0x294),'read':!![],'write':![],'def':'[]'},'native':{}}),await this['setObjectNotExistsAsync'](_0x236ecf(0x271),{'type':_0x236ecf(0x2c6),'common':{'name':_0x236ecf(0x2ac),'type':_0x236ecf(0x18b),'role':'json','read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x236ecf(0x183)](_0x236ecf(0x261),{'type':_0x236ecf(0x2c6),'common':{'name':_0x236ecf(0x1fd),'type':_0x236ecf(0x18b),'role':_0x236ecf(0x198),'read':!![],'write':![]},'native':{}});try{const _0x35c254=await this[_0x236ecf(0x1fc)](_0x236ecf(0x194));if(_0x35c254&&_0x35c254[_0x236ecf(0x1b6)])this['rawEventLog']=JSON[_0x236ecf(0x257)](_0x35c254[_0x236ecf(0x1b6)]);}catch(_0x5a6e50){this['rawEventLog']=[];}try{const _0x1a584a=await this['getStateAsync'](_0x236ecf(0x1e8));if(_0x1a584a&&_0x1a584a['val'])this[_0x236ecf(0x199)]=JSON[_0x236ecf(0x257)](_0x1a584a[_0x236ecf(0x1b6)]);}catch(_0x226baa){this[_0x236ecf(0x199)]=[];}const _0x35485b=this['dailyDigests']['length']>=(this[_0x236ecf(0x26e)][_0x236ecf(0x1ae)]||0x7)?_0x236ecf(0x211)+this['dailyDigests'][_0x236ecf(0x1ea)]+'\x20Tage)':_0x236ecf(0x187)+this['dailyDigests'][_0x236ecf(0x1ea)]+'/'+(this[_0x236ecf(0x26e)][_0x236ecf(0x1ae)]||0x7)+')';await this[_0x236ecf(0x1a8)](_0x236ecf(0x282),{'val':_0x35485b,'ack':!![]}),this[_0x236ecf(0x1c7)](_0x236ecf(0x19a)),this['subscribeStates']('LTM.triggerDailyDigest'),this[_0x236ecf(0x1c7)](_0x236ecf(0x20d)),this[_0x236ecf(0x1c7)](_0x236ecf(0x1d0)),this[_0x236ecf(0x1c7)]('analysis.automation.triggerAction'),this[_0x236ecf(0x1c7)](_0x236ecf(0x224)),this[_0x236ecf(0x1c7)](_0x236ecf(0x1d4)),this[_0x236ecf(0x1c7)]('analysis.training.triggerHealth'),this[_0x236ecf(0x1c7)](_0x236ecf(0x1f1)),this[_0x236ecf(0x1c7)](_0x236ecf(0x1cd)),this['subscribeStates'](_0x236ecf(0x1d1)),this[_0x236ecf(0x1c7)](_0x236ecf(0x221)),this[_0x236ecf(0x1c7)](_0x236ecf(0x1ec));this['config'][_0x236ecf(0x1d7)]&&this[_0x236ecf(0x26e)]['infrasoundSensorId']&&(this['log'][_0x236ecf(0x180)](_0x236ecf(0x22f)+this[_0x236ecf(0x26e)][_0x236ecf(0x2b8)]),this['subscribeForeignStates'](this[_0x236ecf(0x26e)]['infrasoundSensorId']));const _0xd084a6=this[_0x236ecf(0x26e)][_0x236ecf(0x1ba)];if(_0xd084a6)for(const _0x24d083 of _0xd084a6){await this['subscribeForeignStatesAsync'](_0x24d083['id']);}const _0x2306ca=this[_0x236ecf(0x26e)][_0x236ecf(0x29e)];if(_0x2306ca)for(const _0x2348dc of _0x2306ca){await this[_0x236ecf(0x1b3)](_0x2348dc);}if(this[_0x236ecf(0x26e)]['notifyTelegramEnabled']&&this[_0x236ecf(0x26e)][_0x236ecf(0x276)])await this[_0x236ecf(0x1b3)](this[_0x236ecf(0x26e)][_0x236ecf(0x276)]+_0x236ecf(0x24b));setTimeout(()=>this[_0x236ecf(0x26a)](),0x1388);if(this[_0x236ecf(0x1e9)])clearInterval(this[_0x236ecf(0x1e9)]);const _0x5cb6a0=this['config'][_0x236ecf(0x289)]||0xf;_0x5cb6a0>0x0&&(this['analysisTimer']=setInterval(()=>{const _0x497ba1=_0x236ecf;this[_0x497ba1(0x253)](),automation[_0x497ba1(0x23b)](this),automation[_0x497ba1(0x2a0)](this);},_0x5cb6a0*0x3c*0x3e8));setTimeout(()=>{const _0x3db88e=_0x236ecf;automation['checkCalendarTriggers'](this),automation[_0x3db88e(0x2a0)](this);},0x2710);this[_0x236ecf(0x26e)][_0x236ecf(0x246)]!==![]&&(this[_0x236ecf(0x2c7)]=setInterval(()=>{const _0x35788f=_0x236ecf;if(this[_0x35788f(0x25e)]){const _0x51d734=Date['now'](),_0xac4d73=this[_0x35788f(0x214)]||_0x51d734,_0x1d52c6=(_0x51d734-_0xac4d73)/0x3e8;_0x1d52c6>0x2&&(this[_0x35788f(0x214)]=_0x51d734,pythonBridge[_0x35788f(0x208)](this,_0x35788f(0x285),{'room':null,'dt':_0x1d52c6}));}},0xbb8));if(this[_0x236ecf(0x2b5)])clearInterval(this['healthTrendInterval']);this[_0x236ecf(0x2b5)]=setInterval(()=>{const _0x2503ae=_0x236ecf;this[_0x2503ae(0x25e)]&&(this[_0x2503ae(0x1e5)][_0x2503ae(0x180)](_0x2503ae(0x272)),this[_0x2503ae(0x27d)]());},0x4*0x3c*0x3c*0x3e8),schedulers[_0x236ecf(0x18a)](this,()=>aiAgent[_0x236ecf(0x28e)](this,pythonBridge)),schedulers[_0x236ecf(0x189)](this),schedulers[_0x236ecf(0x202)](this,()=>aiAgent['runBaselineDriftAnalysis'](this)),schedulers[_0x236ecf(0x196)](this,()=>aiAgent[_0x236ecf(0x1c9)](this)),pythonBridge[_0x236ecf(0x21a)](this,installer['PYTHON_EXE']),setTimeout(async()=>{const _0x5497dd=_0x236ecf;await topology[_0x5497dd(0x1ad)](this);try{const _0x2a8df5=await this[_0x5497dd(0x1fc)](_0x5497dd(0x1af));if(_0x2a8df5&&_0x2a8df5[_0x5497dd(0x1b6)])pythonBridge['send'](this,'SET_TOPOLOGY',JSON['parse'](_0x2a8df5['val']));}catch(_0x28012e){}this[_0x5497dd(0x27d)](),this['triggerGaitAnalysis'](),this[_0x5497dd(0x1e6)](),this[_0x5497dd(0x268)]();},0x1388);}[a0_0x697e0c(0x274)](_0x3d3898){const _0x578f25=a0_0x697e0c;if(this[_0x578f25(0x1e9)])clearInterval(this[_0x578f25(0x1e9)]);if(this[_0x578f25(0x1d6)])clearInterval(this[_0x578f25(0x1d6)]);if(this['trackerHeartbeat'])clearInterval(this[_0x578f25(0x2c7)]);if(this[_0x578f25(0x2b5)])clearInterval(this[_0x578f25(0x2b5)]);if(this[_0x578f25(0x1bf)])this['ltmJob'][_0x578f25(0x193)]();if(this[_0x578f25(0x1d5)])this[_0x578f25(0x1d5)][_0x578f25(0x193)]();if(this['briefingJob'])this[_0x578f25(0x1cf)][_0x578f25(0x193)]();recorder[_0x578f25(0x201)](this),pythonBridge['stopService'](this),_0x3d3898();}async[a0_0x697e0c(0x18f)](_0x9ebebd,_0x631778){const _0x115fce=a0_0x697e0c;if(!_0x631778||this[_0x115fce(0x1e2)])return;if(_0x9ebebd[_0x115fce(0x1cc)]('telegram')&&_0x9ebebd['endsWith'](_0x115fce(0x19d))&&_0x631778[_0x115fce(0x1b6)])return;if(this[_0x115fce(0x26e)][_0x115fce(0x1d7)]&&_0x9ebebd===this[_0x115fce(0x26e)]['infrasoundSensorId']){this[_0x115fce(0x1f2)](_0x631778['val']);return;}if(_0x9ebebd===this[_0x115fce(0x1f9)]+_0x115fce(0x251)){if(_0x631778[_0x115fce(0x1b6)]&&Object[_0x115fce(0x1e0)](setup[_0x115fce(0x290)])['includes'](_0x631778[_0x115fce(0x1b6)])){this[_0x115fce(0x2ba)]=_0x631778[_0x115fce(0x1b6)];if(_0x631778[_0x115fce(0x1b6)]===setup[_0x115fce(0x290)]['VACATION'])await recorder['setPresence'](this,![]);else await recorder[_0x115fce(0x265)](this,!![]);if(this[_0x115fce(0x25e)]){let _0x59acd7=![],_0x38ffa3=0x0,_0x2ea61e=_0x115fce(0x238);if(this[_0x115fce(0x2ba)]===_0x115fce(0x23d))_0x59acd7=!![],_0x38ffa3=0x168,_0x2ea61e=_0x115fce(0x25b);else this[_0x115fce(0x2ba)]===_0x115fce(0x1ce)&&(_0x59acd7=!![],_0x38ffa3=0x5a0,_0x2ea61e='Guest\x20Mode');pythonBridge[_0x115fce(0x208)](this,'SET_LEARNING_MODE',{'active':_0x59acd7,'duration':_0x38ffa3,'label':_0x2ea61e}),await this[_0x115fce(0x1a8)](_0x115fce(0x19e),{'val':JSON[_0x115fce(0x1a3)]({'active':_0x59acd7,'label':_0x2ea61e,'timestamp':Date[_0x115fce(0x2b9)]()}),'ack':!![]});}}if(!_0x631778[_0x115fce(0x1a7)])this[_0x115fce(0x24d)](_0x9ebebd,{'val':this[_0x115fce(0x2ba)],'ack':!![]});return;}_0x9ebebd[_0x115fce(0x1b8)](_0x115fce(0x1ec))&&_0x631778[_0x115fce(0x1a7)]&&this[_0x115fce(0x2ad)](_0x631778[_0x115fce(0x1b6)]);if(!_0x631778[_0x115fce(0x1a7)]){if(_0x9ebebd['includes'](_0x115fce(0x19a))&&_0x631778[_0x115fce(0x1b6)]){this[_0x115fce(0x24d)](_0x9ebebd,{'val':![],'ack':!![]}),aiAgent[_0x115fce(0x20b)](this);return;}if(_0x9ebebd[_0x115fce(0x1cc)](_0x115fce(0x2bf))&&_0x631778[_0x115fce(0x1b6)]){this[_0x115fce(0x24d)](_0x9ebebd,{'val':![],'ack':!![]});if(this['isProVersion'])aiAgent['createDailyDigest'](this,pythonBridge);return;}if(_0x9ebebd[_0x115fce(0x1cc)](_0x115fce(0x230))&&_0x631778[_0x115fce(0x1b6)]){this[_0x115fce(0x24d)](_0x9ebebd,{'val':![],'ack':!![]}),aiAgent[_0x115fce(0x1c9)](this);return;}if(_0x9ebebd[_0x115fce(0x1cc)](_0x115fce(0x184))&&_0x631778[_0x115fce(0x1b6)]){this[_0x115fce(0x24d)](_0x9ebebd,{'val':![],'ack':!![]}),aiAgent['executeAutomationAction'](this);return;}if(_0x9ebebd[_0x115fce(0x1cc)](_0x115fce(0x1d4))&&_0x631778[_0x115fce(0x1b6)]){this['setState'](_0x9ebebd,{'val':![],'ack':!![]});if(this[_0x115fce(0x25e)])try{const _0x4778f4=await this[_0x115fce(0x1fc)](_0x115fce(0x2a1));if(_0x4778f4&&_0x4778f4['val']){const _0x5c099d=JSON['parse'](_0x4778f4['val']);this[_0x115fce(0x1a8)]('analysis.training.status',{'val':_0x115fce(0x25d),'ack':!![]}),pythonBridge[_0x115fce(0x208)](this,_0x115fce(0x2b2),{'sequences':_0x5c099d});}}catch(_0x54fb39){}return;}if(_0x9ebebd[_0x115fce(0x1cc)](_0x115fce(0x28b))&&_0x631778[_0x115fce(0x1b6)]){this[_0x115fce(0x24d)](_0x9ebebd,{'val':![],'ack':!![]});if(this[_0x115fce(0x25e)])try{const _0x98bd2b=await this[_0x115fce(0x1fc)](_0x115fce(0x1e8));if(_0x98bd2b&&_0x98bd2b[_0x115fce(0x1b6)])pythonBridge[_0x115fce(0x208)](this,_0x115fce(0x240),{'digests':JSON['parse'](_0x98bd2b['val'])});}catch(_0x3eb608){}return;}if(_0x9ebebd[_0x115fce(0x1cc)](_0x115fce(0x1f1))&&_0x631778[_0x115fce(0x1b6)]){this[_0x115fce(0x24d)](_0x9ebebd,{'val':![],'ack':!![]});if(this[_0x115fce(0x25e)])try{const _0x5cd7b1=await this[_0x115fce(0x1fc)](_0x115fce(0x232));if(_0x5cd7b1&&_0x5cd7b1[_0x115fce(0x1b6)])pythonBridge['send'](this,_0x115fce(0x2c0),{'points':JSON[_0x115fce(0x257)](_0x5cd7b1[_0x115fce(0x1b6)])});}catch(_0x9fa142){}return;}if(_0x9ebebd[_0x115fce(0x1cc)]('analysis.training.triggerComfort')&&_0x631778['val']){this[_0x115fce(0x24d)](_0x9ebebd,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x559703=await this['getStateAsync'](_0x115fce(0x194));if(_0x559703&&_0x559703['val'])pythonBridge['send'](this,'TRAIN_COMFORT',{'events':JSON['parse'](_0x559703['val'])});}catch(_0x1f1054){}return;}if(_0x9ebebd[_0x115fce(0x1cc)](_0x115fce(0x1d1))&&_0x631778[_0x115fce(0x1b6)]){this[_0x115fce(0x24d)](_0x9ebebd,{'val':![],'ack':!![]}),topology[_0x115fce(0x1ad)](this);return;}}if(this[_0x115fce(0x26e)]['presenceDevices']&&this[_0x115fce(0x26e)][_0x115fce(0x29e)]['includes'](_0x9ebebd)){await this[_0x115fce(0x26a)]();return;}const _0x588a02=(this[_0x115fce(0x26e)][_0x115fce(0x1ba)]||[])[_0x115fce(0x243)](_0x58f1ea=>_0x58f1ea['id']===_0x9ebebd);if(_0x588a02){const _0x2c02c7=await recorder['processSensorEvent'](this,_0x9ebebd,_0x631778,_0x588a02);_0x2c02c7&&_0x2c02c7[_0x115fce(0x263)]===_0x115fce(0x239)&&_0x2c02c7[_0x115fce(0x237)]&&this['isProVersion']&&deadMan['updateLocation'](this,_0x2c02c7[_0x115fce(0x237)]),_0x631778[_0x115fce(0x1b6)]&&(_0x631778[_0x115fce(0x1b6)]===!![]||_0x631778[_0x115fce(0x1b6)]===0x1||String(_0x631778[_0x115fce(0x1b6)])[_0x115fce(0x210)]()===_0x115fce(0x28a))&&(_0x588a02[_0x115fce(0x263)]&&(_0x588a02[_0x115fce(0x263)]['includes'](_0x115fce(0x1be))||_0x588a02[_0x115fce(0x263)][_0x115fce(0x1cc)](_0x115fce(0x1dd))||_0x588a02[_0x115fce(0x263)][_0x115fce(0x1cc)](_0x115fce(0x188)))&&this['analyzeWindowOpening'](_0x588a02)),(_0x588a02[_0x115fce(0x263)]===_0x115fce(0x1ef)||_0x588a02[_0x115fce(0x263)]===_0x115fce(0x254))&&automation[_0x115fce(0x215)](this);}}async[a0_0x697e0c(0x2ad)](_0x1d8b96){const _0x35f286=a0_0x697e0c;if(!this['memoryCache']||Date['now']()-this[_0x35f286(0x23c)]>0x493e0)return;if(!this[_0x35f286(0x1d8)][_0x35f286(0x1f5)]||!this[_0x35f286(0x1d8)][_0x35f286(0x244)])return;try{const _0x44b1f1=JSON['parse'](_0x1d8b96),_0x411c3c=this['memoryCache'][_0x35f286(0x1f5)];let _0x3acb67=![];for(const _0x3cfaf0 in _0x411c3c){if(_0x411c3c[_0x3cfaf0][_0x35f286(0x1cc)]('AI')&&_0x44b1f1[_0x3cfaf0]&&!_0x44b1f1[_0x3cfaf0]['includes']('AI')){_0x3acb67=!![];break;}}_0x3acb67&&(this[_0x35f286(0x1e5)][_0x35f286(0x180)]('ðŸ§ \x20Memory\x20Protection:\x20Restoring\x20persisted\x20AI-Calculations\x20(preventing\x20\x27Cold\x20Start\x27\x20amnesia).'),await this[_0x35f286(0x1a8)](_0x35f286(0x181),{'val':JSON[_0x35f286(0x1a3)](this[_0x35f286(0x1d8)][_0x35f286(0x244)]),'ack':!![]}),await this[_0x35f286(0x1a8)](_0x35f286(0x1ec),{'val':JSON[_0x35f286(0x1a3)](this[_0x35f286(0x1d8)][_0x35f286(0x1f5)]),'ack':!![]}));}catch(_0x347d6c){}}async[a0_0x697e0c(0x1ee)](_0x5a722b){const _0x5fee70=a0_0x697e0c;if(typeof _0x5a722b==='object'&&_0x5a722b[_0x5fee70(0x227)]){if(_0x5a722b[_0x5fee70(0x1a5)]==='checkThermostats')try{const _0x5df43d=await automation[_0x5fee70(0x28d)](this);this[_0x5fee70(0x299)](_0x5a722b[_0x5fee70(0x212)],_0x5a722b[_0x5fee70(0x1a5)],{'success':!![],'results':_0x5df43d},_0x5a722b['callback']);}catch(_0x3bcc5c){this['sendTo'](_0x5a722b['from'],_0x5a722b[_0x5fee70(0x1a5)],{'success':![],'error':_0x3bcc5c[_0x5fee70(0x227)]},_0x5a722b['callback']);}else{if(_0x5a722b['command']===_0x5fee70(0x2c8))try{const {current_temps:_0x36066a,t_out:_0x17c9a8,targets:_0x5ba475,t_forecast:_0x27d8d8}=_0x5a722b['message'],_0x537b4b=[];let _0x48a556={};try{const _0x4bf550=await this[_0x5fee70(0x1fc)]('analysis.energy.insulationScore');if(_0x4bf550&&_0x4bf550[_0x5fee70(0x1b6)]){const _0x2445dc=JSON['parse'](_0x4bf550['val']);_0x48a556=_0x2445dc[_0x5fee70(0x217)]||_0x2445dc;}}catch(_0x1e1a8d){}const _0x3b97cf=_0x27d8d8!==undefined&&_0x27d8d8!==null?(_0x17c9a8+_0x27d8d8)/0x2:_0x17c9a8;for(const [_0x131db8,_0x6f3d9b]of Object[_0x5fee70(0x24e)](_0x36066a)){const _0x1955f4=_0x5ba475[_0x131db8]||0x15;if(_0x6f3d9b<=_0x1955f4)continue;let _0x441c8f=_0x48a556[_0x131db8]||-0.5;if(_0x441c8f>=0x0)_0x441c8f=-0.5;const _0x4f0b36=Math['abs'](_0x441c8f),_0x1ef495=_0x6f3d9b-_0x1955f4;let _0x1e1af2=Math[_0x5fee70(0x25a)](_0x1ef495/_0x4f0b36*0x3c);const _0x454138=_0x6f3d9b-_0x17c9a8,_0x32c114=_0x6f3d9b-_0x3b97cf;if(_0x32c114!==0x0&&_0x454138!==0x0){const _0x1a69da=_0x454138/_0x32c114;_0x1e1af2=Math['floor'](_0x1e1af2*_0x1a69da);}if(_0x1e1af2>0xf){if(_0x1e1af2>0xf0)_0x1e1af2=0xf0;_0x537b4b[_0x5fee70(0x17c)]({'room':_0x131db8,'minutes_safe':_0x1e1af2,'target':_0x1955f4,'current':_0x6f3d9b,'savings_msg':'Heizung\x20kann\x20'+_0x1e1af2+_0x5fee70(0x266)});}}_0x537b4b['sort']((_0x509c7c,_0x246f66)=>_0x246f66[_0x5fee70(0x270)]-_0x509c7c['minutes_safe']),this['sendTo'](_0x5a722b[_0x5fee70(0x212)],_0x5a722b[_0x5fee70(0x1a5)],{'success':!![],'proposals':_0x537b4b},_0x5a722b[_0x5fee70(0x258)]);}catch(_0x20e108){this[_0x5fee70(0x299)](_0x5a722b['from'],_0x5a722b[_0x5fee70(0x1a5)],{'success':![],'error':_0x20e108[_0x5fee70(0x227)]},_0x5a722b[_0x5fee70(0x258)]);}else{if(_0x5a722b['command']==='resetRLPenalty')try{const _0x3e0a09=_0x5a722b[_0x5fee70(0x227)]['key'],_0x2ea05a=_0x5fee70(0x1a0),_0x36b31a=await this[_0x5fee70(0x1fc)](_0x2ea05a);let _0x4cc12c={};if(_0x36b31a&&_0x36b31a[_0x5fee70(0x1b6)])try{_0x4cc12c=JSON[_0x5fee70(0x257)](_0x36b31a[_0x5fee70(0x1b6)]);}catch(_0x386c89){}_0x3e0a09&&_0x4cc12c[_0x3e0a09]?(delete _0x4cc12c[_0x3e0a09],await this['setStateAsync'](_0x2ea05a,{'val':JSON['stringify'](_0x4cc12c),'ack':!![]}),this[_0x5fee70(0x1e5)][_0x5fee70(0x180)](_0x5fee70(0x2c9)+_0x3e0a09+_0x5fee70(0x1b0)),this[_0x5fee70(0x299)](_0x5a722b[_0x5fee70(0x212)],_0x5a722b[_0x5fee70(0x1a5)],{'success':!![]},_0x5a722b[_0x5fee70(0x258)])):this[_0x5fee70(0x299)](_0x5a722b[_0x5fee70(0x212)],_0x5a722b[_0x5fee70(0x1a5)],{'success':![],'error':_0x5fee70(0x284)},_0x5a722b[_0x5fee70(0x258)]);}catch(_0x35761){this[_0x5fee70(0x299)](_0x5a722b['from'],_0x5a722b[_0x5fee70(0x1a5)],{'success':![],'error':_0x35761[_0x5fee70(0x227)]},_0x5a722b[_0x5fee70(0x258)]);}else{if(_0x5a722b['command']===_0x5fee70(0x247))await this[_0x5fee70(0x1a8)](_0x5fee70(0x195),{'val':![],'ack':!![]}),await this[_0x5fee70(0x1a8)](_0x5fee70(0x2c1),{'val':'','ack':!![]}),await this[_0x5fee70(0x1a8)]('analysis.automation.targetId',{'val':'','ack':!![]}),this[_0x5fee70(0x299)](_0x5a722b[_0x5fee70(0x212)],_0x5a722b[_0x5fee70(0x1a5)],{'success':!![]},_0x5a722b[_0x5fee70(0x258)]);else{if(_0x5a722b[_0x5fee70(0x1a5)]==='simulateButler'){const {targetId:_0x17a8bd,targetValue:_0x27369a}=_0x5a722b[_0x5fee70(0x227)];await this['setStateAsync'](_0x5fee70(0x195),{'val':!![],'ack':!![]}),await this[_0x5fee70(0x1a8)](_0x5fee70(0x2c1),{'val':_0x5fee70(0x28f),'ack':!![]}),await this[_0x5fee70(0x1a8)](_0x5fee70(0x269),{'val':_0x17a8bd,'ack':!![]}),await this[_0x5fee70(0x1a8)](_0x5fee70(0x1c8),{'val':String(_0x27369a),'ack':!![]}),this[_0x5fee70(0x299)](_0x5a722b[_0x5fee70(0x212)],_0x5a722b['command'],{'success':!![]},_0x5a722b['callback']);}else{if(_0x5a722b[_0x5fee70(0x1a5)]===_0x5fee70(0x2c5))try{const _0x4df9e6=_0x5a722b['message'][_0x5fee70(0x1b1)];if(!_0x4df9e6)throw new Error('Kein\x20API\x20Key\x20Ã¼bergeben');const _0x11b885=new GoogleGenerativeAI(_0x4df9e6),_0x490b8b=_0x11b885[_0x5fee70(0x1f4)]({'model':GEMINI_MODEL}),_0x215813=await _0x490b8b[_0x5fee70(0x275)](_0x5fee70(0x218)),_0x515792=await _0x215813[_0x5fee70(0x186)];if(_0x515792[_0x5fee70(0x198)]())this['sendTo'](_0x5a722b[_0x5fee70(0x212)],_0x5a722b[_0x5fee70(0x1a5)],{'success':!![],'message':_0x5fee70(0x1c4)},_0x5a722b[_0x5fee70(0x258)]);else throw new Error(_0x5fee70(0x22e));}catch(_0x29c77d){this[_0x5fee70(0x299)](_0x5a722b['from'],_0x5a722b[_0x5fee70(0x1a5)],{'success':![],'message':_0x29c77d[_0x5fee70(0x227)]},_0x5a722b[_0x5fee70(0x258)]);}else{if(_0x5a722b['command']===_0x5fee70(0x1bb))try{const _0x330145=await scanner[_0x5fee70(0x27f)](this,_0x5a722b['message']||{});this['sendTo'](_0x5a722b[_0x5fee70(0x212)],_0x5a722b[_0x5fee70(0x1a5)],{'success':!![],'devices':_0x330145},_0x5a722b[_0x5fee70(0x258)]);}catch(_0x2c9175){this['sendTo'](_0x5a722b[_0x5fee70(0x212)],_0x5a722b[_0x5fee70(0x1a5)],{'success':![],'error':_0x2c9175[_0x5fee70(0x227)]},_0x5a722b[_0x5fee70(0x258)]);}else{if(_0x5a722b[_0x5fee70(0x1a5)]===_0x5fee70(0x283))try{const {matrix:_0x83f12a}=_0x5a722b['message'],_0x501de9=await this['getStateAsync'](_0x5fee70(0x1af));if(_0x501de9&&_0x501de9[_0x5fee70(0x1b6)]){const _0x336f04=JSON[_0x5fee70(0x257)](_0x501de9[_0x5fee70(0x1b6)]);_0x336f04[_0x5fee70(0x295)]=_0x83f12a,_0x336f04[_0x5fee70(0x185)]=Date['now'](),await this[_0x5fee70(0x1a8)](_0x5fee70(0x1af),{'val':JSON[_0x5fee70(0x1a3)](_0x336f04),'ack':!![]}),pythonBridge[_0x5fee70(0x208)](this,_0x5fee70(0x2a6),_0x336f04);}this[_0x5fee70(0x299)](_0x5a722b[_0x5fee70(0x212)],_0x5a722b[_0x5fee70(0x1a5)],{'success':!![]},_0x5a722b[_0x5fee70(0x258)]);}catch(_0x39cdea){this[_0x5fee70(0x1e5)][_0x5fee70(0x27c)](_0x39cdea);}else{if(_0x5a722b[_0x5fee70(0x1a5)]===_0x5fee70(0x226))this['sendTo'](_0x5a722b[_0x5fee70(0x212)],_0x5a722b[_0x5fee70(0x1a5)],{'success':!![],'dailyDigests':this[_0x5fee70(0x199)]||[],'analysisHistory':this['analysisHistory']||[]},_0x5a722b[_0x5fee70(0x258)]);else{if(_0x5a722b[_0x5fee70(0x1a5)]==='getOverviewData'){const _0xdc6e=this[_0x5fee70(0x199)]['length'],_0x35b72d=new Array(0x18)[_0x5fee70(0x231)](0x0),_0x172d73=new Date()[_0x5fee70(0x191)](0x0,0x0,0x0,0x0);this[_0x5fee70(0x1ab)]&&this[_0x5fee70(0x1ab)]['forEach'](_0x38e0af=>{const _0x22aa74=_0x5fee70;if(_0x38e0af[_0x22aa74(0x1f8)]>=_0x172d73){const _0x3c21ed=new Date(_0x38e0af['timestamp'])[_0x22aa74(0x222)]();if(_0x3c21ed>=0x0&&_0x3c21ed<0x18)_0x35b72d[_0x3c21ed]++;}});let _0x21378d=![],_0x1439de='',_0x20552c='',_0x2add19='';try{const _0x395915=await this[_0x5fee70(0x1fc)](_0x5fee70(0x195));if(_0x395915&&_0x395915[_0x5fee70(0x1b6)]){_0x21378d=!![];const _0x5650c9=await this[_0x5fee70(0x1fc)](_0x5fee70(0x2c1));_0x1439de=_0x5650c9?_0x5650c9[_0x5fee70(0x1b6)]:'';const _0x1c2de1=await this[_0x5fee70(0x1fc)]('analysis.automation.targetId');_0x20552c=_0x1c2de1?_0x1c2de1[_0x5fee70(0x1b6)]:'';const _0x38137d=await this[_0x5fee70(0x1fc)](_0x5fee70(0x1c8));_0x2add19=_0x38137d?_0x38137d[_0x5fee70(0x1b6)]:'';}}catch(_0x3338af){}const _0x506837=await this[_0x5fee70(0x23e)](),_0x4c59ed=(this[_0x5fee70(0x26e)][_0x5fee70(0x1ba)]||[])[_0x5fee70(0x19f)](_0x44c20a=>_0x44c20a[_0x5fee70(0x2c4)]),_0x33f5a4=_0x506837&&_0x4c59ed;let _0x3c1fe6='';try{const _0x13a1fa=await this[_0x5fee70(0x1fc)](_0x5fee70(0x24a));if(_0x13a1fa&&_0x13a1fa[_0x5fee70(0x1b6)])_0x3c1fe6=_0x13a1fa[_0x5fee70(0x1b6)];}catch(_0x356827){}this['sendTo'](_0x5a722b[_0x5fee70(0x212)],_0x5a722b[_0x5fee70(0x1a5)],{'success':!![],'eventHistory':this['eventHistory'][_0x5fee70(0x203)](0x0,0xf),'stats':{'digestCount':_0xdc6e,'isPresent':this[_0x5fee70(0x25f)],'hourlyActivity':_0x35b72d,'solarActive':_0x33f5a4,'presenceWho':_0x3c1fe6},'automation':{'detected':_0x21378d,'description':_0x1439de,'targetId':_0x20552c,'targetValue':_0x2add19}},_0x5a722b[_0x5fee70(0x258)]);}else{if(_0x5a722b[_0x5fee70(0x1a5)]===_0x5fee70(0x225)){const _0x2aba83=await this[_0x5fee70(0x2a8)]('enum.functions.*','enum'),_0x45261e=[];if(_0x2aba83)for(const _0x3184de in _0x2aba83){const _0x4013df=_0x2aba83[_0x3184de],_0x5d49c9=(_0x4013df[_0x5fee70(0x22a)]&&typeof _0x4013df[_0x5fee70(0x22a)][_0x5fee70(0x242)]==='object'?_0x4013df[_0x5fee70(0x22a)][_0x5fee70(0x242)]['de']:_0x4013df['common'][_0x5fee70(0x242)])||_0x4013df['common'][_0x5fee70(0x242)];_0x45261e[_0x5fee70(0x17c)]({'id':_0x3184de,'name':_0x5d49c9});}const _0x223acc=await this[_0x5fee70(0x2a8)](_0x5fee70(0x21f),_0x5fee70(0x2cb)),_0xae2db4=[];if(_0x223acc)for(const _0x1c9dee in _0x223acc){const _0x566701=_0x223acc[_0x1c9dee],_0x16873f=(_0x566701[_0x5fee70(0x22a)]&&typeof _0x566701[_0x5fee70(0x22a)]['name']===_0x5fee70(0x245)?_0x566701[_0x5fee70(0x22a)][_0x5fee70(0x242)]['de']:_0x566701[_0x5fee70(0x22a)][_0x5fee70(0x242)])||_0x1c9dee[_0x5fee70(0x1bc)]('.')[_0x5fee70(0x1f3)]();_0xae2db4[_0x5fee70(0x17c)](_0x16873f);}this['sendTo'](_0x5a722b['from'],_0x5a722b[_0x5fee70(0x1a5)],{'success':!![],'enums':_0x45261e,'rooms':_0xae2db4},_0x5a722b[_0x5fee70(0x258)]);}else{if(_0x5a722b[_0x5fee70(0x1a5)]===_0x5fee70(0x29c))try{let _0x491298='Kein\x20Wetter-Adapter',_0x3a6472=_0x5fee70(0x1cb);if(this[_0x5fee70(0x26e)][_0x5fee70(0x1da)]){const _0x1530ff=await recorder[_0x5fee70(0x1bd)](this);_0x491298=_0x1530ff!==null?_0x1530ff+'Â°C':_0x5fee70(0x1eb);}if(this[_0x5fee70(0x26e)][_0x5fee70(0x2a2)]){const _0x34931b=await this[_0x5fee70(0x2c3)]('system.adapter.'+this[_0x5fee70(0x26e)]['calendarInstance']);_0x3a6472=_0x34931b?'Verbunden':_0x5fee70(0x22d);}this['sendTo'](_0x5a722b['from'],_0x5a722b[_0x5fee70(0x1a5)],{'success':!![],'weather':_0x491298,'calendar':_0x3a6472},_0x5a722b['callback']);}catch(_0x524098){this['sendTo'](_0x5a722b['from'],_0x5a722b['command'],{'success':![],'error':_0x524098[_0x5fee70(0x227)]},_0x5a722b[_0x5fee70(0x258)]);}else{if(_0x5a722b[_0x5fee70(0x1a5)]===_0x5fee70(0x29a))try{const _0x367526=_0x5a722b[_0x5fee70(0x227)][_0x5fee70(0x2ae)],_0x369a4f=await this['getForeignStateAsync'](_0x367526+_0x5fee70(0x1e7));let _0x2dc48f=[];if(_0x369a4f&&_0x369a4f[_0x5fee70(0x1b6)]){const _0x429f7e=JSON[_0x5fee70(0x257)](_0x369a4f[_0x5fee70(0x1b6)]),_0x1c54c4=new Set();Array[_0x5fee70(0x1ff)](_0x429f7e)&&_0x429f7e[_0x5fee70(0x2af)](_0x45b33a=>{const _0x21e9ce=_0x5fee70;if(_0x45b33a[_0x21e9ce(0x2a7)])_0x1c54c4[_0x21e9ce(0x209)](_0x45b33a[_0x21e9ce(0x2a7)]);else{if(_0x45b33a[_0x21e9ce(0x1b9)])_0x1c54c4['add'](_0x45b33a[_0x21e9ce(0x1b9)]);}}),_0x2dc48f=Array[_0x5fee70(0x212)](_0x1c54c4)[_0x5fee70(0x24c)]();}if(_0x2dc48f[_0x5fee70(0x1ea)]===0x0)_0x2dc48f=[_0x5fee70(0x281)];this[_0x5fee70(0x299)](_0x5a722b[_0x5fee70(0x212)],_0x5a722b[_0x5fee70(0x1a5)],{'success':!![],'names':_0x2dc48f},_0x5a722b[_0x5fee70(0x258)]);}catch(_0xbb59b4){this[_0x5fee70(0x299)](_0x5a722b['from'],_0x5a722b[_0x5fee70(0x1a5)],{'success':![],'error':_0xbb59b4[_0x5fee70(0x227)]},_0x5a722b[_0x5fee70(0x258)]);}else{if(_0x5a722b[_0x5fee70(0x1a5)]==='testNotification')try{await setup['sendNotification'](this,_0x5fee70(0x1c3),![],![]),this['sendTo'](_0x5a722b[_0x5fee70(0x212)],_0x5a722b[_0x5fee70(0x1a5)],{'success':!![],'message':'Gesendet'},_0x5a722b[_0x5fee70(0x258)]);}catch(_0x186360){this[_0x5fee70(0x1e5)]['error'](_0x5fee70(0x1d2)+_0x186360[_0x5fee70(0x227)]),this['sendTo'](_0x5a722b['from'],_0x5a722b[_0x5fee70(0x1a5)],{'success':![],'message':_0x5fee70(0x1e1)+_0x186360['message']},_0x5a722b['callback']);}}}}}}}}}}}}}}}}async[a0_0x697e0c(0x216)](){const _0x432971=a0_0x697e0c;try{const _0x492f64=await this[_0x432971(0x1fc)](setup[_0x432971(0x26f)]);_0x492f64&&_0x492f64[_0x432971(0x1b6)]&&Object[_0x432971(0x1e0)](setup[_0x432971(0x290)])[_0x432971(0x1cc)](_0x492f64[_0x432971(0x1b6)])?this[_0x432971(0x2ba)]=_0x492f64[_0x432971(0x1b6)]:(this[_0x432971(0x2ba)]=setup[_0x432971(0x290)]['NORMAL'],await this[_0x432971(0x1a8)](setup[_0x432971(0x26f)],{'val':setup['SYSTEM_MODES']['NORMAL'],'ack':!![]}));}catch(_0x17a947){this[_0x432971(0x2ba)]=setup[_0x432971(0x290)][_0x432971(0x1db)];}}async[a0_0x697e0c(0x26a)](){const _0x6fb758=a0_0x697e0c;try{const _0x259f1a=this[_0x6fb758(0x26e)][_0x6fb758(0x29e)]||[];let _0x33f5a8=![];const _0x3bc55e=[];for(const _0x5021d9 of _0x259f1a){try{const _0x36ea09=await this[_0x6fb758(0x1ac)](_0x5021d9);_0x36ea09&&(_0x36ea09['val']===!![]||_0x36ea09[_0x6fb758(0x1b6)]==='online'||_0x36ea09['val']===0x1)&&(_0x33f5a8=!![],_0x3bc55e['push'](_0x5021d9));}catch(_0x21052c){}}return await this[_0x6fb758(0x1a8)](_0x6fb758(0x24a),{'val':_0x3bc55e[_0x6fb758(0x2b6)](',\x20'),'ack':!![]}),_0x33f5a8&&(this['exitTimer']&&(this[_0x6fb758(0x1e5)][_0x6fb758(0x180)]('WiFi\x20Presence\x20detected.'),recorder['abortExitTimer'](this)),!this[_0x6fb758(0x25f)]&&this['currentSystemMode']===setup[_0x6fb758(0x290)][_0x6fb758(0x1db)]&&await recorder['setPresence'](this,!![])),_0x33f5a8;}catch(_0x9676e5){return![];}}async[a0_0x697e0c(0x253)](){const _0x36d56b=a0_0x697e0c;this['log'][_0x36d56b(0x219)](_0x36d56b(0x1c5)),await aiAgent[_0x36d56b(0x20b)](this),this[_0x36d56b(0x268)](),this[_0x36d56b(0x20e)](),this[_0x36d56b(0x1e6)]();}async['checkSolarCondition'](){const _0x1e1f60=a0_0x697e0c,_0x39e43f=[_0x1e1f60(0x229),_0x1e1f60(0x259),_0x1e1f60(0x1c1)],_0x43f7fd=['forecast.current.weather',_0x1e1f60(0x2be),_0x1e1f60(0x286)];for(const _0x4bf5e4 of _0x39e43f){for(const _0x10e5c8 of _0x43f7fd){try{const _0x5a5a20=_0x4bf5e4+'.'+_0x10e5c8,_0x29f3bc=await this[_0x1e1f60(0x1ac)](_0x5a5a20);if(_0x29f3bc&&_0x29f3bc['val']){const _0x42213b=String(_0x29f3bc[_0x1e1f60(0x1b6)])[_0x1e1f60(0x210)]();if(_0x42213b[_0x1e1f60(0x1cc)](_0x1e1f60(0x22b))||_0x42213b[_0x1e1f60(0x1cc)](_0x1e1f60(0x2b0))||_0x42213b[_0x1e1f60(0x1cc)](_0x1e1f60(0x279))||_0x42213b[_0x1e1f60(0x1cc)](_0x1e1f60(0x2a5))||_0x42213b[_0x1e1f60(0x1cc)](_0x1e1f60(0x27b)))return!![];}}catch(_0x4dc189){}}}return![];}[a0_0x697e0c(0x20e)](){const _0x3dd3f5=a0_0x697e0c;if(!this['isProVersion'])return;try{this['getState'](_0x3dd3f5(0x2a1),(_0x599846,_0x3fc600)=>{const _0x5cfde1=_0x3dd3f5;_0x3fc600&&_0x3fc600[_0x5cfde1(0x1b6)]&&pythonBridge[_0x5cfde1(0x208)](this,'ANALYZE_GAIT',{'sequences':JSON[_0x5cfde1(0x257)](_0x3fc600['val'])});});}catch(_0x2fb6b3){}}async[a0_0x697e0c(0x1e6)](){const _0x99f64b=a0_0x697e0c;if(!this[_0x99f64b(0x25e)])return;try{const _0x3d4c76=await recorder[_0x99f64b(0x1bd)](this);if(_0x3d4c76===null)return;const _0x257747={},_0x587f9c={},_0x33f583=this['config'][_0x99f64b(0x1ba)]||[];for(const _0x243003 of _0x33f583){if(_0x243003['type']===_0x99f64b(0x1ef)&&_0x243003[_0x99f64b(0x237)]){const _0x571f1f=this[_0x99f64b(0x204)][_0x243003['id']];if(_0x571f1f!==undefined)_0x257747[_0x243003[_0x99f64b(0x237)]]=_0x571f1f;if(_0x243003[_0x99f64b(0x2c4)])_0x587f9c[_0x243003['location']]=!![];}}const _0x8dcef5=await this[_0x99f64b(0x23e)]();let _0x4e6c28={};try{const _0x24cf46=await this[_0x99f64b(0x1fc)]('analysis.energy.warmupTargets');if(_0x24cf46&&_0x24cf46['val'])_0x4e6c28=JSON[_0x99f64b(0x257)](_0x24cf46[_0x99f64b(0x1b6)]);}catch(_0x387a94){}Object[_0x99f64b(0x1de)](_0x257747)[_0x99f64b(0x1ea)]>0x0&&(pythonBridge[_0x99f64b(0x208)](this,_0x99f64b(0x2bb),{'current_temps':_0x257747,'t_out':_0x3d4c76,'is_sunny':_0x8dcef5,'solar_flags':_0x587f9c,'warmup_targets':_0x4e6c28}),pythonBridge[_0x99f64b(0x208)](this,_0x99f64b(0x1b5),{'current_temps':_0x257747,'t_out':_0x3d4c76,'targets':{}}));}catch(_0x4e7929){}}[a0_0x697e0c(0x268)](){const _0x51b23b=a0_0x697e0c;if(!this[_0x51b23b(0x1b4)]||this[_0x51b23b(0x1b4)][_0x51b23b(0x1ea)]===0x0)return;const _0x130a23=new Array(0x60)[_0x51b23b(0x231)](0x0),_0x335aaa=new Date()[_0x51b23b(0x191)](0x0,0x0,0x0,0x0);this[_0x51b23b(0x1b4)][_0x51b23b(0x2af)](_0x33f6be=>{const _0x518210=_0x51b23b,_0x7b3dba=new Date(_0x33f6be['timestamp']);if(_0x7b3dba[_0x518210(0x206)]()>=_0x335aaa){const _0x13faca=_0x7b3dba['getHours'](),_0x1eacf8=_0x7b3dba[_0x518210(0x1aa)](),_0x355970=_0x13faca*0x4+Math[_0x518210(0x25a)](_0x1eacf8/0xf);if(_0x355970>=0x0&&_0x355970<0x60)_0x130a23[_0x355970]++;}}),this[_0x51b23b(0x1a8)](_0x51b23b(0x29d),{'val':JSON[_0x51b23b(0x1a3)](_0x130a23),'ack':!![]});}[a0_0x697e0c(0x27d)](){const _0xdecf53=a0_0x697e0c;if(!this[_0xdecf53(0x199)]||this['dailyDigests']['length']<0x2)return;const _0x4693df=this[_0xdecf53(0x199)]['map'](_0x113fb6=>{const _0x43a350=_0xdecf53,_0x1b217c=(_0x113fb6['activityLevel']||'')[_0x43a350(0x210)]();return ACTIVITY_LEVEL_MAP[_0x1b217c]||0x32;});pythonBridge[_0xdecf53(0x208)](this,_0xdecf53(0x200),{'values':_0x4693df,'tag':_0xdecf53(0x1c0)});}async['handleInfrasound'](_0x3a6ec9){const _0x140f9a=a0_0x697e0c;if(_0x3a6ec9==null||typeof _0x3a6ec9!==_0x140f9a(0x26c))return;const _0x21f307=Date[_0x140f9a(0x2b9)]();this['pressureBuffer'][_0x140f9a(0x17c)]({'ts':_0x21f307,'val':_0x3a6ec9}),this['pressureBuffer']=this['pressureBuffer'][_0x140f9a(0x1a4)](_0x5091cd=>_0x21f307-_0x5091cd['ts']<0x1388);if(this[_0x140f9a(0x18e)])return;if(this[_0x140f9a(0x26e)][_0x140f9a(0x2a9)]){const _0x54634c=await this[_0x140f9a(0x1ac)](this[_0x140f9a(0x26e)]['infrasoundArmingId']);if(_0x54634c&&!_0x54634c[_0x140f9a(0x1b6)])return;}const _0x3c460d=this[_0x140f9a(0x26e)][_0x140f9a(0x296)]||0.04;if(Math[_0x140f9a(0x23a)](_0x3a6ec9)>=_0x3c460d){this[_0x140f9a(0x1e5)][_0x140f9a(0x205)](_0x140f9a(0x235)+_0x3a6ec9+'\x20hPa\x20(Limit:\x20'+_0x3c460d+')'),await this[_0x140f9a(0x1a8)](_0x140f9a(0x1ed),{'val':!![],'ack':!![]});const _0x45856d=this[_0x140f9a(0x25f)];_0x45856d?(this[_0x140f9a(0x1e5)]['info'](_0x140f9a(0x18d)),this['triggerInfrasoundCorrelation'](_0x3a6ec9,'INTERNAL')):(this[_0x140f9a(0x22c)](_0x3a6ec9,_0x140f9a(0x2c2)),this[_0x140f9a(0x2b1)](_0x140f9a(0x288)+_0x3a6ec9+'\x20hPa.\x20Einbruch\x20wahrscheinlich.')),this[_0x140f9a(0x18e)]=!![],setTimeout(()=>{const _0x48bad4=_0x140f9a;this[_0x48bad4(0x18e)]=![];},0x2710);}}async[a0_0x697e0c(0x22c)](_0x383e11,_0x2bde50='ALARM'){const _0x1067e5=a0_0x697e0c,_0x5c829e=Date['now'](),_0x222460=this[_0x1067e5(0x26e)][_0x1067e5(0x1ba)]||[];setTimeout(async()=>{const _0x10412a=_0x1067e5;let _0x237655=null,_0x5865e4=_0x10412a(0x2b7);const _0x8877ce=[],_0x1a4c42=_0x222460[_0x10412a(0x1a4)](_0x5aab5f=>_0x5aab5f[_0x10412a(0x263)]&&(_0x5aab5f[_0x10412a(0x263)][_0x10412a(0x1cc)]('window')||_0x5aab5f[_0x10412a(0x263)][_0x10412a(0x1cc)](_0x10412a(0x1dd))||_0x5aab5f[_0x10412a(0x263)]['includes'](_0x10412a(0x188))||_0x5aab5f[_0x10412a(0x263)][_0x10412a(0x1cc)](_0x10412a(0x21e)))||_0x5aab5f[_0x10412a(0x197)]&&(_0x5aab5f[_0x10412a(0x197)]['includes'](_0x10412a(0x1c6))||_0x5aab5f['role']['includes'](_0x10412a(0x264))));for(const _0x28654c of _0x1a4c42){try{const _0x2b306e=await this[_0x10412a(0x1ac)](_0x28654c['id']);if(_0x2b306e){if(_0x2b306e['ts']>=_0x5c829e-0x7d0){_0x237655=_0x28654c[_0x10412a(0x242)]||_0x28654c['id'],_0x5865e4=_0x10412a(0x1a2)+_0x237655;break;}}}catch(_0x1a0f9b){}}const _0x170bc6={'timestamp':_0x5c829e,'pressure':_0x383e11,'isMatch':!!_0x237655,'explanation':_0x5865e4,'type':_0x2bde50};await this[_0x10412a(0x292)](_0x170bc6),this[_0x10412a(0x1e5)][_0x10412a(0x180)](_0x10412a(0x278)+(!!_0x237655?_0x10412a(0x2cc):'ANOMALY\x20(Real\x20Threat?)'));},0x1388);}async[a0_0x697e0c(0x1df)](_0x3b2733){const _0x553158=a0_0x697e0c,_0x473ea5=Date['now'](),_0x5e52ab=_0x3b2733[_0x553158(0x242)]||_0x3b2733['id'][_0x553158(0x1bc)]('.')['pop']();let _0x6faa9f=0x0;setTimeout(async()=>{const _0x55d812=_0x553158;this['pressureBuffer'][_0x55d812(0x2af)](_0x2c32ca=>{const _0x287bec=_0x55d812;_0x2c32ca['ts']>=_0x473ea5-0xfa0&&_0x2c32ca['ts']<=_0x473ea5+0x3e8&&(Math['abs'](_0x2c32ca[_0x287bec(0x1b6)])>Math[_0x287bec(0x23a)](_0x6faa9f)&&(_0x6faa9f=_0x2c32ca[_0x287bec(0x1b6)]));});const _0x292037=this['config'][_0x55d812(0x296)]||0.04,_0xacd45d=Math[_0x55d812(0x23a)](_0x6faa9f)>=_0x292037,_0x3d97b8={'timestamp':_0x473ea5,'pressure':_0x6faa9f,'isMatch':_0xacd45d,'explanation':_0x55d812(0x29f)+_0x5e52ab,'type':_0x55d812(0x223)};await this[_0x55d812(0x292)](_0x3d97b8),this[_0x55d812(0x1e5)][_0x55d812(0x219)](_0x55d812(0x241)+_0x5e52ab+'\x20opened.\x20Peak\x20Pressure:\x20'+_0x6faa9f[_0x55d812(0x233)](0x4)+_0x55d812(0x19b)+_0x292037+')');},0x1f4);}async[a0_0x697e0c(0x292)](_0x416964){const _0x214dda=a0_0x697e0c;try{const _0x4d2519=await this[_0x214dda(0x1fc)](_0x214dda(0x271));let _0x47a96a=[];if(_0x4d2519&&_0x4d2519[_0x214dda(0x1b6)])_0x47a96a=JSON[_0x214dda(0x257)](_0x4d2519[_0x214dda(0x1b6)]);_0x47a96a[_0x214dda(0x27a)](_0x416964);if(_0x47a96a[_0x214dda(0x1ea)]>0x14)_0x47a96a=_0x47a96a[_0x214dda(0x203)](0x0,0x14);await this['setStateAsync'](_0x214dda(0x271),{'val':JSON[_0x214dda(0x1a3)](_0x47a96a),'ack':!![]});}catch(_0x6e12){this['log'][_0x214dda(0x27c)](_0x214dda(0x291)+_0x6e12[_0x214dda(0x227)]);}}[a0_0x697e0c(0x2b1)](_0x39d04b){const _0x2922aa=a0_0x697e0c;this[_0x2922aa(0x26e)]['notifyPushoverEnabled']&&this['config'][_0x2922aa(0x21d)]&&this[_0x2922aa(0x299)](this[_0x2922aa(0x26e)][_0x2922aa(0x21d)],'send',{'message':_0x39d04b,'title':'Nuukanni\x20Security','priority':0x1}),this[_0x2922aa(0x26e)][_0x2922aa(0x277)]&&this[_0x2922aa(0x26e)]['notifyTelegramInstance']&&this[_0x2922aa(0x299)](this[_0x2922aa(0x26e)]['notifyTelegramInstance'],_0x2922aa(0x208),{'text':_0x39d04b});}}if(require[a0_0x697e0c(0x1dc)]!==module)module[a0_0x697e0c(0x1fe)]=_0x2fed5f=>new CogniLiving(_0x2fed5f);else new CogniLiving();