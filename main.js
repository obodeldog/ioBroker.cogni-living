const a0_0x3ca1cc=a0_0x3501;(function(_0x4755b8,_0x2a98ad){const _0x5a2ee8=a0_0x3501,_0xbaa87c=_0x4755b8();while(!![]){try{const _0x13a917=parseInt(_0x5a2ee8(0x1cc))/0x1*(-parseInt(_0x5a2ee8(0x1df))/0x2)+parseInt(_0x5a2ee8(0x1ea))/0x3*(-parseInt(_0x5a2ee8(0x15e))/0x4)+-parseInt(_0x5a2ee8(0x121))/0x5+parseInt(_0x5a2ee8(0x192))/0x6*(-parseInt(_0x5a2ee8(0x1b9))/0x7)+-parseInt(_0x5a2ee8(0x9b))/0x8*(parseInt(_0x5a2ee8(0x1ab))/0x9)+parseInt(_0x5a2ee8(0x7e))/0xa*(parseInt(_0x5a2ee8(0xa4))/0xb)+parseInt(_0x5a2ee8(0x1c5))/0xc;if(_0x13a917===_0x2a98ad)break;else _0xbaa87c['push'](_0xbaa87c['shift']());}catch(_0x205154){_0xbaa87c['push'](_0xbaa87c['shift']());}}}(a0_0xa42e,0x96ac5));const a0_0xe7c7a4=(function(){let _0x1ae15b=!![];return function(_0x286830,_0x24049c){const _0x6b1338=_0x1ae15b?function(){if(_0x24049c){const _0x4ae889=_0x24049c['apply'](_0x286830,arguments);return _0x24049c=null,_0x4ae889;}}:function(){};return _0x1ae15b=![],_0x6b1338;};}()),a0_0x3d52bc=a0_0xe7c7a4(this,function(){const _0x17589b=a0_0x3501;return a0_0x3d52bc[_0x17589b(0xb2)]()[_0x17589b(0x1ac)](_0x17589b(0x15f))['toString']()[_0x17589b(0x1c0)](a0_0x3d52bc)[_0x17589b(0x1ac)]('(((.+)+)+)+$');});a0_0x3d52bc();'use strict';function a0_0x3501(_0x3b85f2,_0x249266){const _0xbcfdb8=a0_0xa42e();return a0_0x3501=function(_0x3d52bc,_0xe7c7a4){_0x3d52bc=_0x3d52bc-0x78;let _0xa42ef8=_0xbcfdb8[_0x3d52bc];return _0xa42ef8;},a0_0x3501(_0x3b85f2,_0x249266);}const utils=require(a0_0x3ca1cc(0x81)),{GoogleGenerativeAI}=require(a0_0x3ca1cc(0xbd)),{spawn}=require(a0_0x3ca1cc(0xe5)),path=require(a0_0x3ca1cc(0x112)),fs=require('fs'),installer=require(a0_0x3ca1cc(0x148)),scanner=require(a0_0x3ca1cc(0x11f)),schedulers=require(a0_0x3ca1cc(0x1c4)),HISTORY_MAX_SIZE=0x32,RAW_LOG_MAX_SIZE=0x9c4,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL=a0_0x3ca1cc(0x7c),SEQUENCE_TIMEOUT_MS=0x5*0x3c*0x3e8,MAX_TRAINING_SET_SIZE=0x1f4,THERMO_LOG_SIZE=0x3e8,EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,LTM_DP_RAW_LOG=a0_0x3ca1cc(0x88),LTM_DP_DAILY_DIGESTS='LTM.dailyDigests',LTM_DP_STATUS=a0_0x3ca1cc(0x1b8),LTM_DP_TRIGGER_DIGEST=a0_0x3ca1cc(0x1a8),LTM_DP_BASELINE_STATUS=a0_0x3ca1cc(0x188),LTM_DP_DRIFT_CHANNEL=a0_0x3ca1cc(0x129),LTM_DP_DRIFT_STATUS=a0_0x3ca1cc(0x12b),LTM_DP_DRIFT_DETAILS=a0_0x3ca1cc(0xf8),LTM_DP_DRIFT_LAST_CHECK=a0_0x3ca1cc(0x1d2),SYSTEM_DP_MODE=a0_0x3ca1cc(0x10b),SYSTEM_MODES={'NORMAL':'normal','VACATION':a0_0x3ca1cc(0xb5),'PARTY':a0_0x3ca1cc(0xbe),'GUEST':a0_0x3ca1cc(0x206)},AUTO_RESET_MODES=[SYSTEM_MODES[a0_0x3ca1cc(0x1ee)],SYSTEM_MODES['GUEST']],PERSONA_MAPPING={'generic':a0_0x3ca1cc(0x175),'senior_aal':a0_0x3ca1cc(0x16d),'family':a0_0x3ca1cc(0x1db),'single_comfort':a0_0x3ca1cc(0x107),'security':a0_0x3ca1cc(0x130)},ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};function a0_0xa42e(){const _0x306025=['toFixed','tÃ¼r','getObjectAsync','[PYTHON]\x20','text.alarm','type','config','dailyDigests','endsWith','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','TOPOLOGY_RESULT','getDate','models/gemini-flash-latest','OK:\x20','10rkUlim','Restoring\x20sensor\x20cache...','TRAINING_COMPLETE','@iobroker/adapter-core','trim','analysis.energy.forecast','BUILD_TOPOLOGY','analysis.automation.autoApply','analysis.health.gaitSpeed','analysis.training.triggerTopology','LTM.rawEventLog','\x20->\x20','ANALYZE_SEQUENCE','date','Daily\x20Digests','analysis.health.trendDiagnosis','events.history','WiFi\x20Presence\x20detected.','analysis.lastResult','Last\x20raw\x20event','No\x20instance','analysis.automation.targetId','slice','COMFORT_RESULT','.\x20SYSTEM_MODE:\x20','ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','getFullYear','getHours','debug','204856UttQKP','push','Keine\x20Termine.','timestamp','getTime','events.lastEvent','genAI','length','alertReason','5107993datuMw','presence','onMessage','daswetter','dimmer','unknown','analysis.health.isAnomaly','Digest','splice','isEmergency','stateChange','writable','log','SIMULATION:\x20Test-Vorschlag\x20fÃ¼r\x20','toString','insulation','stringify','vacation','pop','enum.functions.*','extendObjectAsync','analysis.security.lastCheck','eventHistory','Gemini\x20Init\x20Error:\x20','text','@google/generative-ai','party','analysis.health.lastCheck','livingContext','ðŸ›¡ï¸\x20SECURITY\x20CHECK:\x20Score\x20','switch','User\x20dismissed\x20automation\x20proposal.','[RESULT]','occupancy','startsWith','ack','unload','.forecast.current.state','ðŸŒ…\x20Morning\x20Briefing:\x0a','application/json','triggerBriefing','Health\x20Analysis','ðŸ›‹ï¸\x20BUTLER:\x20Found\x20','Activity\x20Summary','diagnosis','number','lastAlertState','setHours','error','subscribeForeignStatesAsync','.Current.Temperature','longitude','analysis.alertReason','Kein\x20API\x20Key!','\x0aSTB:\x20','scanForDevices','targetValue','devices','round','HEALTH_RESULT','outdoorSensorId','floor','Gemini\x20Error:\x20','change_percent','analysis.history_debug_00','child_process','kill','indicator.alarm','[LOG]','stdin','GAIT_RESULT','.\x20WETTER:\x20','ðŸ§ª\x20Simulating\x20Butler\x20Proposal:\x20','analysis.automation.targetValue','ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20','string','analysisTimer','modeResetJob','events.history_debug_00','telegram','setState','response','Anomaly\x20Detected','isExit','LTM.driftAnalysis.driftDetails','is_anomaly','ðŸ›‹ï¸\x20BUTLER:\x20Keine\x20neuen\x20Muster\x20gefunden.','Alert\x20Reason','motion','callback','message','split','join','N/A','ready','VACATION','getMinutes','setupDriftAnalysisScheduler','Topology\x20Matrix','Fokus\x20auf\x20Komfort.','enum','analysis.trigger','Temperature\x20Forecast','system.mode','Gait\x20Speed\x20Trend','indicator','licht','\x20=\x20','rule','filter','path','Briefing\x20Error:\x20','analysis.training.status','getForeignObjectAsync','map','getMonth','Keine\x20Wetterdaten\x20verfÃ¼gbar.','testContext','ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...','analysis.health.todayVector','normal','ðŸ§ \x20Triggering\x20Security\x20Training...','minDaysForBaseline','./lib/scanner','getForeignStateAsync','4979045hpVUsr','schalter','heizung','Training\x20Status','TRAIN_COMFORT','city','ðŸ\x20Python\x20Pong','Wetterdaten\x20deaktiviert.','LTM.driftAnalysis','includes','LTM.driftAnalysis.baselineDrift','from','confidence','analysis.security.currentThreshold','parse','PRIORITÃ„T:\x20Sicherheit.','analysis.training.triggerSecurity','common','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','System\x20Mode','enum.rooms.*','analysis.security','activityLevel','state','exitTimer','Started...','ðŸ“\x20Feedback\x20received:\x20','Train\x20Health','Raw\x20Log','analysis.training.triggerHealth','sensorLastValues','analysis.automation.patternDetected','currentSystemMode','version','ANALYZE_GAIT',')\x20-\x20SAFE\x20BOOT','simulateButler','summary','geminiApiKey','./lib/installer','setObjectNotExistsAsync','Auto\x20Apply','analysis.activitySummary','payload','NORMAL','systemUUID','pythonProcess','door','ðŸ•¸ï¸\x20Building\x20Topology\x20Matrix...','communicate.request','detected','Trigger\x20Action','klima','TRAIN_SECURITY','analysis.training.triggerComfort','values','loc','ltmLtbWindowDays','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','unshift','bewegung','1227936XuFbhp','(((.+)+)+)+$','temperatur','Detected\x20Patterns','analysis.isAlert','Target\x20Value','licenseKey','analysis.automation.description','LTM.trainingData.sequences','val','LTM','system.config','generateContent','BUTLER\x20Execution\x20Error:\x20','\x20new\x20patterns.','PRIORITÃ„T:\x20Gesundheit/AAL.','Success','useWeather','LTM.trainingData.thermodynamics','Description','exitGraceTimer','N/A\x20(Learning)','Anomaly\x20Score','Analysiere\x20ausgewogen.','keys','ltmStbWindowDays','rawEventLog','temperature','info','onStateChange','analysis.energy.insulationScore','Deaktiviert\x20(Pro-Feature)','analysis.automation.detectedPatterns','Train\x20Comfort','ðŸš€\x20Starting\x20NUUKANNI\x20Logic\x20(v0.12.10)...','Alert\x20Status','location','.\x20EVENTS:\x20','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','cogni-living\x20adapter\x20starting\x20(v','isAlert','logDuplicates','LTM.baselineStatus','briefingJob','notifyTelegramEnabled','Trigger\x20Briefing','bind','TRAIN_ENERGY','details','system.presenceWho','\x0aGrund:\x20','status','6pUtovx','onReady','targetId','calendarInstance','Security\x20Monitor','cancel','accuweather','existsSync','ðŸ•¸ï¸\x20Topology\x20Map\x20updated.','KI-Modell\x20nicht\x20initialisiert','analysis.security.lastScore','getStateAsync','json','isProVersion','getGenerativeModel','AI\x20Training','reason','analysis.triggerBriefing','presenceDevices','command','âœ…\x20HEALTH\x20TRAINED.','driftDetails','LTM.triggerDailyDigest','success','submitFeedback','72WyUfnD','search','PYTHON_EXE','substring','TREND_RESULT','sendTo','.Current.WeatherText','Last\x20Check','Failed:\x20','Topology\x20Error:\x20','Training\x20Error:\x20','setupLtmScheduler','toLowerCase','LTM.processingStatus','7393841igvsYQ','TRAIN_HEALTH','setStateAsync','toISOString','Who\x20is\x20present?','baselineDrift','Â°C,\x20','constructor','analysisHistory','Regel\x20erkannt:\x20','automation.triggerAction','./lib/scheduler','35359476jKCBvs','Sequences','Insulation\x20Score','geminiModel','shift','checkAndInstall','analysis.energy.heatingScore','173KqkWdS','âš ï¸\x20SECURITY\x20ALARM:\x20','SECURITY_RESULT','name','autoApply','analysis.training.triggerEnergy','LTM.driftAnalysis.lastCheck','analysis.automation.triggerAction','now','write','ANALYZE_HEALTH','light','getOverviewData','ðŸ›‹ï¸\x20Triggering\x20Comfort\x20Analysis\x20(Pattern\x20Mining)...','button','Fokus\x20auf\x20Familienroutinen.','Pattern\x20Detected','useCalendar','ANALYZE_TREND','2658BtdKOD','PREDICT_ENERGY','HEALTH_TRAIN_RESULT','.forecast.current.temperature','python3','notifyTelegramInstance','isGracePeriodActive','ltmJob','value','.\x20KONTEXT:\x20','Keine\x20Details.','3lauDgw','boolean','cogni-living','analysis.security.topologyMatrix','PARTY','.\x20EMERGENCY:\x20','[RECORDER]\x20Error:\x20','fill','isPresent','automationProposal','systemConfig','Aktiv\x20(','replace','subscribeStates','.\x20ANWESEND:\x20','Kein\x20API\x20Key.','Lernphase\x20(','online','Trend','onUnload','setForeignStateAsync','Gemini\x20AI\x20initialized.','description','object','aiPersona','Unknown','toLocaleTimeString','kontakt','guest','Skipped\x20(No\x20AI\x20or\x20Data)','Kalender\x20deaktiviert.','analysis.analysisHistory','inactivityThresholdHours','weatherInstance','analysisInterval','channel','driftAnalysisTimer'];a0_0xa42e=function(){return _0x306025;};return a0_0xa42e();}let activeSequence=[],sequenceTimer=null;async function initZombies(_0x53edc3){const _0x32d418=a0_0x3ca1cc;try{const _0x113ee2=[_0x32d418(0xe4),_0x32d418(0xf2)];for(const _0x410a67 of _0x113ee2){try{const _0x145119=await _0x53edc3[_0x32d418(0x211)](_0x410a67);if(_0x145119)await _0x53edc3['delObjectAsync'](_0x410a67);}catch(_0x3d7fe9){}}}catch(_0x34369c){}}async function checkLicense(_0x3f7869){return!![];}async function initHistory(_0x5908e9){const _0x110b10=a0_0x3ca1cc;try{const _0x404360=await _0x5908e9[_0x110b10(0x19d)]('events.history');_0x404360&&_0x404360[_0x110b10(0x167)]&&(_0x5908e9['eventHistory']=JSON[_0x110b10(0x12f)](_0x404360[_0x110b10(0x167)][_0x110b10(0xb2)]()));}catch(_0x58b3a8){_0x5908e9[_0x110b10(0xba)]=[];}try{const _0x4f47b0=await _0x5908e9['getStateAsync'](_0x110b10(0x209));if(_0x4f47b0&&_0x4f47b0[_0x110b10(0x167)])_0x5908e9['analysisHistory']=JSON[_0x110b10(0x12f)](_0x4f47b0[_0x110b10(0x167)][_0x110b10(0xb2)]());}catch(_0x15d745){_0x5908e9['analysisHistory']=[];}if(_0x5908e9[_0x110b10(0xba)]&&_0x5908e9[_0x110b10(0xba)][_0x110b10(0xa2)]>0x0){_0x5908e9[_0x110b10(0xb0)][_0x110b10(0x17a)](_0x110b10(0x7f));for(let _0x547a11=_0x5908e9[_0x110b10(0xba)][_0x110b10(0xa2)]-0x1;_0x547a11>=0x0;_0x547a11--){const _0x497a82=_0x5908e9['eventHistory'][_0x547a11];if(_0x497a82&&_0x497a82['id']!==undefined&&_0x497a82['value']!==undefined)_0x5908e9[_0x110b10(0x13f)][_0x497a82['id']]=_0x497a82['value'];}}}async function initSystemConfig(_0x115b0c){const _0x27f2d3=a0_0x3ca1cc;try{const _0xbc351f=await _0x115b0c[_0x27f2d3(0x115)](_0x27f2d3(0x169));if(_0xbc351f&&_0xbc351f[_0x27f2d3(0x132)])_0x115b0c[_0x27f2d3(0x1f4)]={'latitude':_0xbc351f[_0x27f2d3(0x132)]['latitude']||0x0,'longitude':_0xbc351f[_0x27f2d3(0x132)][_0x27f2d3(0xd7)]||0x0,'city':_0xbc351f[_0x27f2d3(0x132)][_0x27f2d3(0x126)]||''};}catch(_0x30cd16){}}async function createAllObjects(_0x46814d){const _0x28f718=a0_0x3ca1cc;await _0x46814d[_0x28f718(0xb8)]('system',{'type':'channel','common':{'name':'System'},'native':{}}),await _0x46814d[_0x28f718(0xb8)](SYSTEM_DP_MODE,{'type':'state','common':{'name':_0x28f718(0x134),'type':_0x28f718(0xef),'role':_0x28f718(0x138),'read':!![],'write':!![],'def':SYSTEM_MODES[_0x28f718(0x14d)]},'native':{}}),await _0x46814d['setObjectNotExistsAsync'](_0x28f718(0x18f),{'type':_0x28f718(0x138),'common':{'name':_0x28f718(0x1bd),'type':_0x28f718(0xef),'role':_0x28f718(0xbc),'read':!![],'write':![]},'native':{}}),await _0x46814d[_0x28f718(0x149)](_0x28f718(0xa0),{'type':'state','common':{'name':_0x28f718(0x91),'type':_0x28f718(0xef),'role':_0x28f718(0x19e),'read':!![],'write':![]},'native':{}}),await _0x46814d['setObjectNotExistsAsync'](_0x28f718(0x8e),{'type':'state','common':{'name':'Event\x20History','type':_0x28f718(0xef),'role':'json','read':!![],'write':![]},'native':{}}),await _0x46814d[_0x28f718(0xb8)]('analysis.training',{'type':_0x28f718(0x20d),'common':{'name':_0x28f718(0x1a1)},'native':{}}),await _0x46814d[_0x28f718(0x149)]('analysis.training.triggerSecurity',{'type':'state','common':{'name':'Train\x20Security','type':'boolean','role':'button','read':!![],'write':!![]},'native':{}}),await _0x46814d[_0x28f718(0x149)](_0x28f718(0x13e),{'type':'state','common':{'name':_0x28f718(0x13c),'type':_0x28f718(0x1eb),'role':_0x28f718(0x1da),'read':!![],'write':!![]},'native':{}}),await _0x46814d[_0x28f718(0x149)](_0x28f718(0x1d1),{'type':_0x28f718(0x138),'common':{'name':'Train\x20Energy','type':_0x28f718(0x1eb),'role':_0x28f718(0x1da),'read':!![],'write':!![]},'native':{}}),await _0x46814d[_0x28f718(0x149)](_0x28f718(0x157),{'type':_0x28f718(0x138),'common':{'name':_0x28f718(0x17f),'type':_0x28f718(0x1eb),'role':_0x28f718(0x1da),'read':!![],'write':!![]},'native':{}}),await _0x46814d['setObjectNotExistsAsync'](_0x28f718(0x87),{'type':_0x28f718(0x138),'common':{'name':'Build\x20Topology','type':_0x28f718(0x1eb),'role':'button','read':!![],'write':!![]},'native':{}}),await _0x46814d[_0x28f718(0x149)]('analysis.training.status',{'type':_0x28f718(0x138),'common':{'name':_0x28f718(0x124),'type':_0x28f718(0xef),'role':_0x28f718(0xbc),'read':!![],'write':![]},'native':{}}),await _0x46814d[_0x28f718(0xb8)](_0x28f718(0x136),{'type':_0x28f718(0x20d),'common':{'name':_0x28f718(0x196)},'native':{}}),await _0x46814d['setObjectNotExistsAsync']('analysis.security.lastScore',{'type':_0x28f718(0x138),'common':{'name':_0x28f718(0x174),'type':_0x28f718(0xd1),'role':'value','read':!![],'write':![]},'native':{}}),await _0x46814d['setObjectNotExistsAsync']('analysis.security.currentThreshold',{'type':_0x28f718(0x138),'common':{'name':'Current\x20Threshold','type':_0x28f718(0xd1),'role':_0x28f718(0x1e7),'read':!![],'write':![],'def':0.05},'native':{}}),await _0x46814d[_0x28f718(0x149)]('analysis.security.lastCheck',{'type':'state','common':{'name':'Last\x20Check','type':'string','role':_0x28f718(0x8b),'read':!![],'write':![]},'native':{}}),await _0x46814d[_0x28f718(0x149)](_0x28f718(0x1ed),{'type':_0x28f718(0x138),'common':{'name':_0x28f718(0x106),'type':'string','role':'json','read':!![],'write':![]},'native':{}}),await _0x46814d[_0x28f718(0xb8)]('analysis.health',{'type':'channel','common':{'name':_0x28f718(0xcd)},'native':{}}),await _0x46814d[_0x28f718(0x149)](_0x28f718(0xbf),{'type':'state','common':{'name':_0x28f718(0x1b2),'type':_0x28f718(0xef),'role':_0x28f718(0x8b),'read':!![],'write':![]},'native':{}}),await _0x46814d[_0x28f718(0x149)](_0x28f718(0xaa),{'type':_0x28f718(0x138),'common':{'name':_0x28f718(0xf6),'type':_0x28f718(0x1eb),'role':_0x28f718(0x10d),'read':!![],'write':![]},'native':{}}),await _0x46814d[_0x28f718(0x149)](_0x28f718(0x8d),{'type':_0x28f718(0x138),'common':{'name':_0x28f718(0x1fc),'type':_0x28f718(0xef),'role':_0x28f718(0xbc),'read':!![],'write':![]},'native':{}}),await _0x46814d[_0x28f718(0x149)]('analysis.health.trendValue',{'type':'state','common':{'name':'Trend\x20Value','type':_0x28f718(0xd1),'role':'value','read':!![],'write':![]},'native':{}}),await _0x46814d['setObjectNotExistsAsync'](_0x28f718(0x11b),{'type':_0x28f718(0x138),'common':{'name':'Today\x20Vector\x20(15m)','type':_0x28f718(0xef),'role':_0x28f718(0x19e),'read':!![],'write':![]},'native':{}}),await _0x46814d[_0x28f718(0x149)](_0x28f718(0x86),{'type':_0x28f718(0x138),'common':{'name':_0x28f718(0x10c),'type':'number','role':_0x28f718(0x1e7),'read':!![],'write':![]},'native':{}}),await _0x46814d[_0x28f718(0xb8)]('analysis.energy',{'type':_0x28f718(0x20d),'common':{'name':'Energy\x20Intelligence'},'native':{}}),await _0x46814d[_0x28f718(0x149)]('analysis.energy.insulationScore',{'type':_0x28f718(0x138),'common':{'name':_0x28f718(0x1c7),'type':_0x28f718(0xef),'role':'text','read':!![],'write':![]},'native':{}}),await _0x46814d[_0x28f718(0x149)](_0x28f718(0x1cb),{'type':_0x28f718(0x138),'common':{'name':'Heating\x20Score','type':_0x28f718(0xef),'role':_0x28f718(0xbc),'read':!![],'write':![]},'native':{}}),await _0x46814d[_0x28f718(0x149)](_0x28f718(0x83),{'type':_0x28f718(0x138),'common':{'name':_0x28f718(0x10a),'type':_0x28f718(0xef),'role':_0x28f718(0x19e),'read':!![],'write':![]},'native':{}}),await _0x46814d[_0x28f718(0xb8)](_0x28f718(0x168),{'type':'channel','common':{'name':_0x28f718(0x168)},'native':{}}),await _0x46814d[_0x28f718(0xb8)](LTM_DP_RAW_LOG,{'type':_0x28f718(0x138),'common':{'name':_0x28f718(0x13d),'type':'string','role':_0x28f718(0x19e),'read':!![],'write':![]},'native':{}}),await _0x46814d[_0x28f718(0xb8)](LTM_DP_DAILY_DIGESTS,{'type':_0x28f718(0x138),'common':{'name':_0x28f718(0x8c),'type':'string','role':'json','read':!![],'write':![]},'native':{}}),await _0x46814d[_0x28f718(0x149)](_0x28f718(0x166),{'type':_0x28f718(0x138),'common':{'name':_0x28f718(0x1c6),'type':_0x28f718(0xef),'role':_0x28f718(0x19e),'read':!![],'write':![]},'native':{}}),await _0x46814d[_0x28f718(0x149)](_0x28f718(0x170),{'type':_0x28f718(0x138),'common':{'name':'Thermodynamics','type':_0x28f718(0xef),'role':'json','read':!![],'write':![]},'native':{}}),await _0x46814d['setObjectNotExistsAsync'](_0x28f718(0x109),{'type':'state','common':{'name':'Trigger\x20Analysis','type':_0x28f718(0x1eb),'role':_0x28f718(0x1da),'read':!![],'write':!![]},'native':{}}),await _0x46814d['setObjectNotExistsAsync'](_0x28f718(0x1a3),{'type':_0x28f718(0x138),'common':{'name':_0x28f718(0x18b),'type':_0x28f718(0x1eb),'role':'button','read':!![],'write':!![]},'native':{}}),await _0x46814d['setObjectNotExistsAsync']('analysis.isAlert',{'type':_0x28f718(0x138),'common':{'name':_0x28f718(0x181),'type':'boolean','role':_0x28f718(0xe7),'read':!![],'write':![]},'native':{}}),await _0x46814d[_0x28f718(0x149)]('analysis.alertReason',{'type':'state','common':{'name':_0x28f718(0xfb),'type':_0x28f718(0xef),'role':_0x28f718(0x213),'read':!![],'write':![]},'native':{}}),await _0x46814d[_0x28f718(0x149)](_0x28f718(0x14b),{'type':_0x28f718(0x138),'common':{'name':_0x28f718(0xcf),'type':_0x28f718(0xef),'role':_0x28f718(0xbc),'read':!![],'write':![]},'native':{}}),await _0x46814d['setObjectNotExistsAsync'](_0x28f718(0x140),{'type':'state','common':{'name':_0x28f718(0x1dc),'type':_0x28f718(0x1eb),'role':_0x28f718(0x10d),'read':!![],'write':![]},'native':{}}),await _0x46814d[_0x28f718(0x149)](_0x28f718(0x165),{'type':'state','common':{'name':_0x28f718(0x171),'type':_0x28f718(0xef),'role':_0x28f718(0xbc),'read':!![],'write':![]},'native':{}}),await _0x46814d[_0x28f718(0x149)]('analysis.automation.detectedPatterns',{'type':_0x28f718(0x138),'common':{'name':_0x28f718(0x161),'type':_0x28f718(0xef),'role':_0x28f718(0x19e),'read':!![],'write':![]},'native':{}}),await _0x46814d[_0x28f718(0x149)](_0x28f718(0x93),{'type':_0x28f718(0x138),'common':{'name':'Target\x20ID','type':_0x28f718(0xef),'role':_0x28f718(0xbc),'read':!![],'write':![]},'native':{}}),await _0x46814d[_0x28f718(0x149)](_0x28f718(0xed),{'type':'state','common':{'name':_0x28f718(0x163),'type':_0x28f718(0xef),'role':_0x28f718(0xbc),'read':!![],'write':![]},'native':{}}),await _0x46814d['setObjectNotExistsAsync'](_0x28f718(0x85),{'type':_0x28f718(0x138),'common':{'name':_0x28f718(0x14a),'type':'boolean','role':_0x28f718(0xc2),'read':!![],'write':!![]},'native':{}}),await _0x46814d[_0x28f718(0x149)]('analysis.automation.triggerAction',{'type':_0x28f718(0x138),'common':{'name':_0x28f718(0x154),'type':_0x28f718(0x1eb),'role':'button','read':!![],'write':!![]},'native':{}});}async function loadSystemMode(_0x276339){const _0x11554d=a0_0x3ca1cc;try{const _0x32a482=await _0x276339[_0x11554d(0x19d)](SYSTEM_DP_MODE);_0x32a482&&_0x32a482['val']&&Object[_0x11554d(0x158)](SYSTEM_MODES)[_0x11554d(0x12a)](_0x32a482[_0x11554d(0x167)])?_0x276339[_0x11554d(0x141)]=_0x32a482[_0x11554d(0x167)]:(_0x276339[_0x11554d(0x141)]=SYSTEM_MODES[_0x11554d(0x14d)],await _0x276339[_0x11554d(0x1bb)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x11554d(0x14d)],'ack':!![]}));}catch(_0x1dc0b9){_0x276339[_0x11554d(0x141)]=SYSTEM_MODES[_0x11554d(0x14d)];}}async function loadRawEventLog(_0x49ddf0){const _0x4ab897=a0_0x3ca1cc;try{const _0x233e6d=await _0x49ddf0[_0x4ab897(0x19d)](LTM_DP_RAW_LOG);if(_0x233e6d&&_0x233e6d['val'])_0x49ddf0['rawEventLog']=JSON[_0x4ab897(0x12f)](_0x233e6d[_0x4ab897(0x167)]);}catch(_0x48cd78){_0x49ddf0[_0x4ab897(0x178)]=[];}}async function saveRawEventLog(_0x2e90d6){const _0x654cdb=a0_0x3ca1cc;if(_0x2e90d6[_0x654cdb(0x178)][_0x654cdb(0xa2)]>RAW_LOG_MAX_SIZE)_0x2e90d6[_0x654cdb(0x178)][_0x654cdb(0xac)](0x0,_0x2e90d6[_0x654cdb(0x178)][_0x654cdb(0xa2)]-RAW_LOG_MAX_SIZE);await _0x2e90d6[_0x654cdb(0x1bb)](LTM_DP_RAW_LOG,{'val':JSON[_0x654cdb(0xb4)](_0x2e90d6['rawEventLog']),'ack':!![]});}async function loadDailyDigests(_0x225c52){const _0x14d9d0=a0_0x3ca1cc;try{const _0x563fe5=await _0x225c52[_0x14d9d0(0x19d)](LTM_DP_DAILY_DIGESTS);if(_0x563fe5&&_0x563fe5[_0x14d9d0(0x167)])_0x225c52[_0x14d9d0(0x216)]=JSON[_0x14d9d0(0x12f)](_0x563fe5[_0x14d9d0(0x167)]);}catch(_0x150cab){_0x225c52[_0x14d9d0(0x216)]=[];}await updateBaselineStatus(_0x225c52);}async function saveDailyDigests(_0x45b59c,_0x52b412=!![]){const _0x596de1=a0_0x3ca1cc,_0x170750=_0x45b59c[_0x596de1(0x215)][_0x596de1(0x15a)]||0x3c;_0x45b59c[_0x596de1(0x216)][_0x596de1(0xa2)]>_0x170750&&_0x45b59c[_0x596de1(0x216)]['splice'](0x0,_0x45b59c[_0x596de1(0x216)][_0x596de1(0xa2)]-_0x170750);await _0x45b59c[_0x596de1(0x1bb)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x596de1(0xb4)](_0x45b59c[_0x596de1(0x216)]),'ack':!![]});if(_0x52b412)await updateBaselineStatus(_0x45b59c);}async function updateAnalysisHistory(_0x3c583d,_0x5012d4){const _0x1d1cd3=a0_0x3ca1cc;_0x3c583d[_0x1d1cd3(0x1c1)][_0x1d1cd3(0x15c)](_0x5012d4);if(_0x3c583d[_0x1d1cd3(0x1c1)]['length']>HISTORY_MAX_SIZE)_0x3c583d['analysisHistory'][_0x1d1cd3(0xb6)]();await _0x3c583d['setStateAsync'](_0x1d1cd3(0x209),{'val':JSON[_0x1d1cd3(0xb4)](_0x3c583d[_0x1d1cd3(0x1c1)]),'ack':!![]});}async function updateBaselineStatus(_0xd01178){const _0x19bb00=a0_0x3ca1cc;if(!_0xd01178[_0x19bb00(0x19f)]){await _0xd01178['setStateAsync'](LTM_DP_BASELINE_STATUS,{'val':_0x19bb00(0x17d),'ack':!![]});return;}const _0x283b8e=_0xd01178['dailyDigests'][_0x19bb00(0xa2)]>=(_0xd01178[_0x19bb00(0x215)][_0x19bb00(0x11e)]||0x7)?_0x19bb00(0x1f5)+_0xd01178[_0x19bb00(0x216)][_0x19bb00(0xa2)]+'\x20Tage)':_0x19bb00(0x1fa)+_0xd01178[_0x19bb00(0x216)][_0x19bb00(0xa2)]+'/'+(_0xd01178['config'][_0x19bb00(0x11e)]||0x7)+')';await _0xd01178[_0x19bb00(0x1bb)](LTM_DP_BASELINE_STATUS,{'val':_0x283b8e,'ack':!![]});}async function initSensorSubscriptions(_0x5d0188){const _0x4b762d=a0_0x3ca1cc,_0x28edd4=_0x5d0188[_0x4b762d(0x215)][_0x4b762d(0xdd)];if(_0x28edd4)for(const _0x4c2169 of _0x28edd4){await _0x5d0188[_0x4b762d(0xd5)](_0x4c2169['id']);}}async function initPresenceSubscriptions(_0x2d5b10){const _0x1c6577=a0_0x3ca1cc,_0x5f3641=_0x2d5b10[_0x1c6577(0x215)][_0x1c6577(0x1a4)];if(_0x5f3641)for(const _0x32358f of _0x5f3641){await _0x2d5b10[_0x1c6577(0xd5)](_0x32358f);}}async function setupTelegramListener(_0x1a5603){const _0x50f263=a0_0x3ca1cc,_0x2ab986=_0x1a5603['config'][_0x50f263(0x1e4)];if(_0x1a5603[_0x50f263(0x215)][_0x50f263(0x18a)]&&_0x2ab986)await _0x1a5603[_0x50f263(0xd5)](_0x2ab986+'.communicate.request');}async function checkWifiPresence(_0x14d3dc){const _0x35b242=a0_0x3ca1cc;try{const _0x5bf839=_0x14d3dc[_0x35b242(0x215)]['presenceDevices']||[];let _0x55d562=![];const _0x51fad8=[];for(const _0x534bc1 of _0x5bf839){try{const _0x425174=await _0x14d3dc[_0x35b242(0x120)](_0x534bc1);_0x425174&&(_0x425174[_0x35b242(0x167)]===!![]||_0x425174[_0x35b242(0x167)]===_0x35b242(0x1fb)||_0x425174[_0x35b242(0x167)]===0x1)&&(_0x55d562=!![],_0x51fad8[_0x35b242(0x9c)](_0x534bc1));}catch(_0x8c8930){}}return await _0x14d3dc[_0x35b242(0x1bb)]('system.presenceWho',{'val':_0x51fad8[_0x35b242(0x100)](',\x20'),'ack':!![]}),_0x55d562&&(_0x14d3dc[_0x35b242(0x139)]&&(_0x14d3dc['log'][_0x35b242(0x17a)](_0x35b242(0x8f)),abortExitTimer(_0x14d3dc)),!_0x14d3dc[_0x35b242(0x1f2)]&&_0x14d3dc['currentSystemMode']===SYSTEM_MODES[_0x35b242(0x14d)]&&await setPresence(_0x14d3dc,!![])),_0x55d562;}catch(_0x54e62d){return![];}}function startExitTimer(_0x512c2d){const _0xe12fae=a0_0x3ca1cc;abortExitTimer(_0x512c2d),_0x512c2d[_0xe12fae(0x1e5)]=!![],_0x512c2d[_0xe12fae(0x172)]=setTimeout(()=>{const _0x30324a=_0xe12fae;_0x512c2d[_0x30324a(0x1e5)]=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),_0x512c2d['exitTimer']=setTimeout(()=>{setPresence(_0x512c2d,![]),_0x512c2d['exitTimer']=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}function abortExitTimer(_0x5ce0e5){const _0x2d0c29=a0_0x3ca1cc;if(_0x5ce0e5['exitTimer'])clearTimeout(_0x5ce0e5[_0x2d0c29(0x139)]);if(_0x5ce0e5['exitGraceTimer'])clearTimeout(_0x5ce0e5[_0x2d0c29(0x172)]);_0x5ce0e5['exitTimer']=null,_0x5ce0e5['exitGraceTimer']=null,_0x5ce0e5[_0x2d0c29(0x1e5)]=![];}async function setPresence(_0x4eac90,_0x4fcf3a){const _0xf3c41f=a0_0x3ca1cc;if(_0x4eac90[_0xf3c41f(0x1f2)]===_0x4fcf3a)return;_0x4eac90['isPresent']=_0x4fcf3a,await _0x4eac90[_0xf3c41f(0x1bb)]('system.isPresent',{'val':_0x4fcf3a,'ack':!![]});}async function executeAutomationAction(_0x32c011){const _0x5cf2b2=a0_0x3ca1cc;try{const _0x5d35ea=await _0x32c011[_0x5cf2b2(0x19d)](_0x5cf2b2(0x93)),_0x16360f=await _0x32c011['getStateAsync'](_0x5cf2b2(0xed));if(_0x5d35ea&&_0x5d35ea[_0x5cf2b2(0x167)]&&_0x16360f){const _0x59da08=_0x5d35ea[_0x5cf2b2(0x167)];let _0xf74f2a=_0x16360f[_0x5cf2b2(0x167)];try{_0xf74f2a=JSON[_0x5cf2b2(0x12f)](_0xf74f2a);}catch(_0x143efa){}_0x32c011['log'][_0x5cf2b2(0x17a)](_0x5cf2b2(0xee)+_0x59da08+_0x5cf2b2(0x10f)+_0xf74f2a),await _0x32c011[_0x5cf2b2(0x1fe)](_0x59da08,_0xf74f2a);}else _0x32c011['log']['warn'](_0x5cf2b2(0x97));}catch(_0x3f4388){_0x32c011[_0x5cf2b2(0xb0)][_0x5cf2b2(0xd4)](_0x5cf2b2(0x16b)+_0x3f4388[_0x5cf2b2(0xfe)]);}}async function processSensorEvent(_0x15b1e9,_0x453460,_0x247b99,_0x2de86d){const _0x283a1d=a0_0x3ca1cc;if(!_0x2de86d)return;const _0x5a488c=_0x247b99['val'],_0x565a84=Date[_0x283a1d(0x1d4)](),_0x2f3ec6=_0x15b1e9[_0x283a1d(0x13f)][_0x453460];_0x15b1e9[_0x283a1d(0x13f)][_0x453460]=_0x5a488c;if(!_0x2de86d[_0x283a1d(0x187)]&&_0x2f3ec6!=undefined&&_0x2f3ec6==_0x5a488c)return;const _0x27a58c=(_0x2de86d[_0x283a1d(0x214)]||'')[_0x283a1d(0x1b7)](),_0x38bc0f=_0x27a58c[_0x283a1d(0x12a)]('temperature')||_0x27a58c['includes'](_0x283a1d(0x160))||_0x27a58c[_0x283a1d(0x12a)](_0x283a1d(0x155))||_0x27a58c[_0x283a1d(0x12a)](_0x283a1d(0x123));_0x15b1e9[_0x283a1d(0x19f)]&&_0x38bc0f&&recordThermodynamics(_0x15b1e9,_0x453460,_0x5a488c,_0x2de86d[_0x283a1d(0x182)]);const _0x409a78={'timestamp':_0x565a84,'id':_0x453460,'name':_0x2de86d[_0x283a1d(0x1cf)],'type':_0x2de86d[_0x283a1d(0x214)],'location':_0x2de86d[_0x283a1d(0x182)],'value':_0x5a488c};_0x15b1e9['eventHistory'][_0x283a1d(0x15c)](_0x409a78);if(_0x15b1e9[_0x283a1d(0xba)][_0x283a1d(0xa2)]>HISTORY_MAX_SIZE)_0x15b1e9[_0x283a1d(0xba)][_0x283a1d(0xb6)]();await _0x15b1e9[_0x283a1d(0x1bb)](_0x283a1d(0xa0),{'val':JSON['stringify'](_0x409a78),'ack':!![]}),await _0x15b1e9[_0x283a1d(0x1bb)](_0x283a1d(0x8e),{'val':JSON['stringify'](_0x15b1e9[_0x283a1d(0xba)]),'ack':!![]});_0x15b1e9[_0x283a1d(0x19f)]&&(_0x15b1e9[_0x283a1d(0x178)][_0x283a1d(0x9c)](_0x409a78),await saveRawEventLog(_0x15b1e9),recordSequence(_0x15b1e9,_0x409a78));if(_0x2de86d[_0x283a1d(0xf7)]&&_0x5a488c===!![]){if(_0x15b1e9[_0x283a1d(0x1f2)]&&!_0x15b1e9[_0x283a1d(0x1e5)])startExitTimer(_0x15b1e9);else{if(!_0x15b1e9['isPresent'])setPresence(_0x15b1e9,!![]);}}else{if(_0x2de86d[_0x283a1d(0x214)]===_0x283a1d(0xfc)&&_0x5a488c===!![]){if(_0x15b1e9[_0x283a1d(0x139)])abortExitTimer(_0x15b1e9);if(!_0x15b1e9[_0x283a1d(0x1f2)]&&_0x15b1e9[_0x283a1d(0x141)]===SYSTEM_MODES[_0x283a1d(0x14d)])setPresence(_0x15b1e9,!![]);}}}async function recordThermodynamics(_0x4e3a83,_0x4f9341,_0x51caf7,_0xcedd1b){const _0x12e992=a0_0x3ca1cc,_0x4ec0be=await getOutsideTemperatureNumeric(_0x4e3a83),_0x29428e=await _0x4e3a83[_0x12e992(0x19d)]('LTM.trainingData.thermodynamics');let _0x39e255=[];if(_0x29428e&&_0x29428e['val'])try{_0x39e255=JSON[_0x12e992(0x12f)](_0x29428e[_0x12e992(0x167)]);}catch(_0x25268b){}_0x39e255[_0x12e992(0x9c)]({'ts':Date[_0x12e992(0x1d4)](),'room':_0xcedd1b||_0x12e992(0x203),'t_in':_0x51caf7,'t_out':_0x4ec0be});if(_0x39e255[_0x12e992(0xa2)]>THERMO_LOG_SIZE)_0x39e255['shift']();await _0x4e3a83['setStateAsync'](_0x12e992(0x170),{'val':JSON[_0x12e992(0xb4)](_0x39e255),'ack':!![]});}async function getOutsideTemperatureNumeric(_0x5eb554){const _0x1afdb2=a0_0x3ca1cc;if(_0x5eb554[_0x1afdb2(0x215)][_0x1afdb2(0xe0)])try{const _0x886e0e=await _0x5eb554[_0x1afdb2(0x120)](_0x5eb554[_0x1afdb2(0x215)][_0x1afdb2(0xe0)]);if(_0x886e0e&&_0x886e0e[_0x1afdb2(0x167)]!==undefined&&_0x886e0e[_0x1afdb2(0x167)]!==null)return parseFloat(_0x886e0e[_0x1afdb2(0x167)]);}catch(_0x4c24d8){}const _0x556553=_0x5eb554[_0x1afdb2(0x215)][_0x1afdb2(0x20b)];if(!_0x5eb554['config']['useWeather']||!_0x556553)return null;try{let _0x80106c='';if(_0x556553[_0x1afdb2(0x12a)](_0x1afdb2(0x198)))_0x80106c=_0x556553+_0x1afdb2(0xd6);else{if(_0x556553['includes'](_0x1afdb2(0xa7)))_0x80106c=_0x556553+'.NextHours.Location_1.Day_1.current.temp_value';else{if(_0x556553[_0x1afdb2(0x12a)]('openweathermap'))_0x80106c=_0x556553+_0x1afdb2(0x1e2);else{if(_0x556553[_0x1afdb2(0x12a)]('weatherunderground'))_0x80106c=_0x556553+'.forecast.current.temp';}}}if(_0x80106c){const _0x43827f=await _0x5eb554[_0x1afdb2(0x120)](_0x80106c);if(_0x43827f&&_0x43827f[_0x1afdb2(0x167)]!==undefined&&_0x43827f['val']!==null)return parseFloat(_0x43827f[_0x1afdb2(0x167)]);}}catch(_0x39daee){}return null;}async function recordSequence(_0x3ee1d2,_0x591f5c){const _0x151117=a0_0x3ca1cc,_0x217dea=(_0x591f5c[_0x151117(0x214)]||'')[_0x151117(0x1b7)](),_0x849e3c=[_0x151117(0xfc),_0x151117(0x15d),'prÃ¤senz',_0x151117(0xa5),_0x151117(0xc5),_0x151117(0x150),_0x151117(0x210),'window','fenster','contact',_0x151117(0x205),_0x151117(0x1d7),_0x151117(0x10e),_0x151117(0xc2),_0x151117(0x122),_0x151117(0xa8),'lampe'];if(!_0x849e3c['some'](_0x4a09f1=>_0x217dea[_0x151117(0x12a)](_0x4a09f1)))return;if(!_0x591f5c['value'])return;if(sequenceTimer)clearTimeout(sequenceTimer);activeSequence[_0x151117(0x9c)]({'loc':_0x591f5c[_0x151117(0x182)]||_0x151117(0x203),'id':_0x591f5c['id'],'ts':Date['now']()}),sequenceTimer=setTimeout(async()=>{const _0x519890=_0x151117;if(activeSequence[_0x519890(0xa2)]>0x1)await saveCompletedSequence(_0x3ee1d2);activeSequence=[];},SEQUENCE_TIMEOUT_MS);}async function saveCompletedSequence(_0xaeaab4){const _0x1d4f7a=a0_0x3ca1cc;try{const _0x3b50c7=await _0xaeaab4['getStateAsync'](_0x1d4f7a(0x166));let _0x2b43d7=[];if(_0x3b50c7&&_0x3b50c7['val'])try{_0x2b43d7=JSON[_0x1d4f7a(0x12f)](_0x3b50c7[_0x1d4f7a(0x167)]);}catch(_0x575693){}const _0xab2f65=activeSequence[0x0]['ts'],_0x48de6b=activeSequence[_0x1d4f7a(0x116)](_0x438413=>({'loc':_0x438413[_0x1d4f7a(0x159)],'t_delta':Math[_0x1d4f7a(0xde)]((_0x438413['ts']-_0xab2f65)/0x3e8)})),_0x2ec270={'timestamp':new Date(_0xab2f65)[_0x1d4f7a(0x1bc)](),'steps':_0x48de6b,'duration':Math[_0x1d4f7a(0xde)]((activeSequence[activeSequence['length']-0x1]['ts']-_0xab2f65)/0x3e8),'daytime':new Date(_0xab2f65)[_0x1d4f7a(0x99)]()};_0x2b43d7[_0x1d4f7a(0x9c)](_0x2ec270);if(_0x2b43d7['length']>MAX_TRAINING_SET_SIZE)_0x2b43d7[_0x1d4f7a(0x1c9)]();await _0xaeaab4[_0x1d4f7a(0x1bb)]('LTM.trainingData.sequences',{'val':JSON['stringify'](_0x2b43d7),'ack':!![]}),runSecurityCheck(_0xaeaab4,_0x2ec270);}catch(_0x359b65){_0xaeaab4[_0x1d4f7a(0xb0)][_0x1d4f7a(0xd4)](_0x1d4f7a(0x1f0)+_0x359b65[_0x1d4f7a(0xfe)]);}}function runSecurityCheck(_0x4e8453,_0x3ab853){const _0x4416e0=a0_0x3ca1cc;if(!_0x4e8453['isProVersion'])return;sendToPython(_0x4e8453,_0x4416e0(0x8a),{'sequence':_0x3ab853});}async function createDailyDigest(_0x97fc30){const _0x2f9fed=a0_0x3ca1cc;if(!_0x97fc30[_0x2f9fed(0x19f)])return;await _0x97fc30['setStateAsync'](LTM_DP_STATUS,{'val':_0x2f9fed(0x13a),'ack':!![]});if(!_0x97fc30[_0x2f9fed(0x1c8)]||_0x97fc30[_0x2f9fed(0x178)]['length']<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x97fc30[_0x2f9fed(0x1bb)](LTM_DP_STATUS,{'val':_0x2f9fed(0x207),'ack':!![]});return;}const _0x44ab46=JSON[_0x2f9fed(0x12f)](JSON[_0x2f9fed(0xb4)](_0x97fc30['rawEventLog'])),_0x442aee=_0x44ab46[_0x2f9fed(0xa2)],_0xbc4320=_0x2f9fed(0x133)+JSON[_0x2f9fed(0xb4)](_0x44ab46);try{const _0x5eaf57=await _0x97fc30[_0x2f9fed(0x1c8)]['generateContent'](_0xbc4320),_0x665f0f=JSON[_0x2f9fed(0x12f)](_0x5eaf57[_0x2f9fed(0xf5)][_0x2f9fed(0xbc)]()['replace'](/```json|```/g,'')[_0x2f9fed(0x82)]()),_0x5e5ac0={'timestamp':new Date()['toISOString'](),'eventCount':_0x442aee,'summary':_0x665f0f[_0x2f9fed(0x146)]||_0x2f9fed(0xab),'activityLevel':_0x665f0f[_0x2f9fed(0x137)]||_0x2f9fed(0x11c),'systemMode':_0x97fc30[_0x2f9fed(0x141)]};_0x97fc30[_0x2f9fed(0x216)][_0x2f9fed(0x9c)](_0x5e5ac0),await saveDailyDigests(_0x97fc30),_0x97fc30[_0x2f9fed(0x178)]=[],await saveRawEventLog(_0x97fc30),await _0x97fc30[_0x2f9fed(0x1bb)](LTM_DP_STATUS,{'val':_0x2f9fed(0x16e),'ack':!![]});if(_0x97fc30[_0x2f9fed(0x19f)])sendToPython(_0x97fc30,_0x2f9fed(0x1d6),{'digest':_0x5e5ac0});}catch(_0x29ae4e){_0x97fc30[_0x2f9fed(0xb0)][_0x2f9fed(0xd4)](_0x29ae4e['message']);}}async function runBaselineDriftAnalysis(_0x68f19e){const _0x270656=a0_0x3ca1cc;if(!_0x68f19e[_0x270656(0x19f)]||!_0x68f19e[_0x270656(0x1c8)])return;const _0x1e139f=_0x68f19e[_0x270656(0x215)][_0x270656(0x177)]||0xe;if(_0x68f19e[_0x270656(0x216)][_0x270656(0xa2)]<_0x1e139f+0x7){await _0x68f19e['setStateAsync'](LTM_DP_DRIFT_STATUS,{'val':_0x270656(0x173),'ack':!![]});return;}const _0x27bf35=_0x68f19e['dailyDigests']['slice'](-_0x1e139f),_0x4ee955=_0x68f19e[_0x270656(0x216)][_0x270656(0x94)](0x0,_0x68f19e['dailyDigests'][_0x270656(0xa2)]-_0x1e139f),_0x388943=_0x270656(0x79)+JSON['stringify'](_0x4ee955)+_0x270656(0xda)+JSON[_0x270656(0xb4)](_0x27bf35);try{const _0x4e01b8=await _0x68f19e[_0x270656(0x1c8)][_0x270656(0x16a)](_0x388943),_0x3bf9ae=JSON[_0x270656(0x12f)](_0x4e01b8['response']['text']()[_0x270656(0x1f6)](/```json|```/g,'')['trim']());_0x3bf9ae[_0x270656(0x1be)]&&(await _0x68f19e[_0x270656(0x1bb)](LTM_DP_DRIFT_STATUS,{'val':_0x3bf9ae[_0x270656(0x1be)],'ack':!![]}),await _0x68f19e[_0x270656(0x1bb)](LTM_DP_DRIFT_DETAILS,{'val':_0x3bf9ae[_0x270656(0x1a7)],'ack':!![]}),await _0x68f19e['setStateAsync'](LTM_DP_DRIFT_LAST_CHECK,{'val':Date['now'](),'ack':!![]}));}catch(_0x2a901c){}}async function sendMorningBriefing(_0x5c9826){const _0x2d9486=a0_0x3ca1cc;if(!_0x5c9826['geminiModel'])return;try{const _0x1ce513=_0x2d9486(0x184),_0x559a7a=await _0x5c9826[_0x2d9486(0x1c8)][_0x2d9486(0x16a)](_0x1ce513),_0x10c1d1=_0x559a7a[_0x2d9486(0xf5)]['text']();sendNotification(_0x5c9826,_0x2d9486(0xca)+_0x10c1d1);}catch(_0x263fad){_0x5c9826[_0x2d9486(0xb0)][_0x2d9486(0xd4)](_0x2d9486(0x113)+_0x263fad['message']);}}function stopPythonService(_0x1c6d2e){const _0x196270=a0_0x3ca1cc;if(_0x1c6d2e['pythonProcess']){try{_0x1c6d2e[_0x196270(0x14f)][_0x196270(0xe6)]();}catch(_0x5c1945){}_0x1c6d2e[_0x196270(0x14f)]=null;}}function sendToPython(_0x350970,_0x3a4ae0,_0x5e8f06={}){const _0x4379f3=a0_0x3ca1cc;if(!_0x350970['pythonProcess']||!_0x350970[_0x4379f3(0x14f)]['stdin'][_0x4379f3(0xaf)])return;const _0x42ebbf=JSON['stringify']({'command':_0x3a4ae0,..._0x5e8f06});try{_0x350970[_0x4379f3(0x14f)][_0x4379f3(0xe9)][_0x4379f3(0x1d5)](_0x42ebbf+'\x0a');}catch(_0x6cd794){}}function runPythonHealthCheck(_0xa5f31f){const _0x1b562c=a0_0x3ca1cc;if(!_0xa5f31f[_0x1b562c(0x216)]||_0xa5f31f[_0x1b562c(0x216)][_0x1b562c(0xa2)]<0x2)return;const _0x3ba9a0=_0xa5f31f['dailyDigests'][_0x1b562c(0x116)](_0x4fa483=>{const _0x2c1062=_0x1b562c,_0x98beea=(_0x4fa483[_0x2c1062(0x137)]||'')['toLowerCase']();return ACTIVITY_LEVEL_MAP[_0x98beea]||0x32;});sendToPython(_0xa5f31f,_0x1b562c(0x1de),{'values':_0x3ba9a0,'tag':'Activity-Level'});}function handlePythonResult(_0x233d9d,_0x2cc64a){const _0x57f440=a0_0x3ca1cc;if(_0x2cc64a['type']==='PONG')_0x233d9d['log'][_0x57f440(0x9a)](_0x57f440(0x127));else{if(_0x2cc64a[_0x57f440(0x214)]===_0x57f440(0x1ce)){const {anomaly_score:_0x16d433,is_anomaly:_0x58f2ea,threshold:_0x27773b,explanation:_0x133593}=_0x2cc64a[_0x57f440(0x14c)];_0x233d9d[_0x57f440(0xb0)][_0x57f440(0x17a)](_0x57f440(0xc1)+_0x16d433['toFixed'](0x5)+_0x57f440(0x89)+(_0x58f2ea?'ANOMALY':'OK')),_0x233d9d[_0x57f440(0x1bb)](_0x57f440(0x19c),{'val':_0x16d433,'ack':!![]}),_0x233d9d[_0x57f440(0x1bb)](_0x57f440(0xb9),{'val':new Date()[_0x57f440(0x1bc)](),'ack':!![]});if(_0x27773b)_0x233d9d['setStateAsync'](_0x57f440(0x12e),{'val':_0x27773b,'ack':!![]});if(_0x58f2ea){let _0x32410e=_0x57f440(0x15b)+_0x16d433[_0x57f440(0x20f)](0x4)+')';if(_0x133593&&_0x133593!=='Unknown')_0x32410e+=_0x57f440(0x190)+_0x133593;_0x233d9d[_0x57f440(0x1bb)](_0x57f440(0x162),{'val':!![],'ack':!![]}),_0x233d9d['setStateAsync'](_0x57f440(0xd8),{'val':_0x32410e,'ack':!![]}),sendNotification(_0x233d9d,_0x57f440(0x1cd)+_0x32410e,![],!![]);}}else{if(_0x2cc64a[_0x57f440(0x214)]===_0x57f440(0x80)){const _0x4058f5=_0x2cc64a[_0x57f440(0x14c)][_0x57f440(0x18e)]||'',_0x934a22=_0x2cc64a[_0x57f440(0x14c)]['threshold'],_0x3ca81c=_0x2cc64a['payload'][_0x57f440(0x1a9)]?'Success:\x20'+new Date()[_0x57f440(0x204)]()+'\x20('+_0x4058f5+')':_0x57f440(0x1b3)+_0x2cc64a[_0x57f440(0x14c)][_0x57f440(0x1a2)];_0x233d9d[_0x57f440(0x1bb)](_0x57f440(0x114),{'val':_0x3ca81c,'ack':!![]});if(_0x2cc64a[_0x57f440(0x14c)][_0x57f440(0x1a9)]&&_0x934a22)_0x233d9d[_0x57f440(0x1bb)](_0x57f440(0x12e),{'val':_0x934a22,'ack':!![]});}else{if(_0x2cc64a[_0x57f440(0x214)]===_0x57f440(0x95)){const {patterns:_0x185448}=_0x2cc64a[_0x57f440(0x14c)];if(_0x185448&&_0x185448['length']>0x0){_0x233d9d[_0x57f440(0xb0)]['info'](_0x57f440(0xce)+_0x185448[_0x57f440(0xa2)]+_0x57f440(0x16c)),_0x233d9d[_0x57f440(0x1bb)](_0x57f440(0x17e),{'val':JSON['stringify'](_0x185448),'ack':!![]});const _0x565bd0=_0x185448[0x0],_0x5e4192=_0x57f440(0x1c2)+_0x565bd0[_0x57f440(0x110)]+'\x20('+(_0x565bd0[_0x57f440(0x12d)]*0x64)['toFixed'](0x0)+'%)';_0x233d9d[_0x57f440(0x1bb)]('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),_0x233d9d[_0x57f440(0x1bb)](_0x57f440(0x165),{'val':_0x5e4192,'ack':!![]});}else _0x233d9d[_0x57f440(0xb0)]['info'](_0x57f440(0xfa)),_0x233d9d['setStateAsync'](_0x57f440(0x140),{'val':![],'ack':!![]}),_0x233d9d['setStateAsync'](_0x57f440(0x17e),{'val':'[]','ack':!![]});}else{if(_0x2cc64a[_0x57f440(0x214)]==='ENERGY_TRAIN_RESULT'){if(_0x2cc64a[_0x57f440(0x14c)][_0x57f440(0x1a9)])try{const _0x1a8dab=JSON['parse'](_0x2cc64a[_0x57f440(0x14c)][_0x57f440(0x18e)]);if(_0x1a8dab[_0x57f440(0xb3)])_0x233d9d[_0x57f440(0x1bb)](_0x57f440(0x17c),{'val':JSON[_0x57f440(0xb4)](_0x1a8dab[_0x57f440(0xb3)]),'ack':!![]});if(_0x1a8dab['heating'])_0x233d9d[_0x57f440(0x1bb)](_0x57f440(0x1cb),{'val':JSON[_0x57f440(0xb4)](_0x1a8dab['heating']),'ack':!![]});}catch(_0x160a52){}}else{if(_0x2cc64a[_0x57f440(0x214)]===_0x57f440(0x1e1)){if(_0x2cc64a[_0x57f440(0x14c)][_0x57f440(0x1a9)])_0x233d9d[_0x57f440(0xb0)]['info'](_0x57f440(0x1a6));}else{if(_0x2cc64a[_0x57f440(0x214)]===_0x57f440(0xdf))_0x233d9d[_0x57f440(0x1bb)](_0x57f440(0xbf),{'val':new Date()[_0x57f440(0x1bc)](),'ack':!![]}),_0x233d9d[_0x57f440(0x1bb)](_0x57f440(0xaa),{'val':_0x2cc64a[_0x57f440(0x14c)][_0x57f440(0xf9)],'ack':!![]});else{if(_0x2cc64a[_0x57f440(0x214)]===_0x57f440(0x1af))_0x233d9d[_0x57f440(0x1bb)](_0x57f440(0x8d),{'val':_0x2cc64a[_0x57f440(0x14c)][_0x57f440(0xd0)],'ack':!![]}),_0x233d9d[_0x57f440(0x1bb)]('analysis.health.trendValue',{'val':_0x2cc64a[_0x57f440(0x14c)][_0x57f440(0xe3)],'ack':!![]});else{if(_0x2cc64a[_0x57f440(0x214)]===_0x57f440(0xea)){const {speed_trend:_0x12f4b3}=_0x2cc64a[_0x57f440(0x14c)];if(_0x12f4b3!==undefined)_0x233d9d['setStateAsync'](_0x57f440(0x86),{'val':_0x12f4b3,'ack':!![]});}else{if(_0x2cc64a[_0x57f440(0x214)]==='ENERGY_PREDICT_RESULT'){const {forecast:_0x4ae283}=_0x2cc64a[_0x57f440(0x14c)];if(_0x4ae283)_0x233d9d[_0x57f440(0x1bb)](_0x57f440(0x83),{'val':JSON[_0x57f440(0xb4)](_0x4ae283),'ack':!![]});}else{if(_0x2cc64a[_0x57f440(0x214)]===_0x57f440(0x7a)){const {data:_0x2d66dc}=_0x2cc64a['payload'];_0x2d66dc&&(_0x233d9d[_0x57f440(0xb0)][_0x57f440(0x17a)](_0x57f440(0x19a)),_0x233d9d[_0x57f440(0x1bb)](_0x57f440(0x1ed),{'val':JSON[_0x57f440(0xb4)](_0x2d66dc),'ack':!![]}));}}}}}}}}}}}}function startPythonService(_0x2ac107){const _0x1fef20=a0_0x3ca1cc;let _0x58ddcf=_0x1fef20(0x1e3);if(fs[_0x1fef20(0x199)](installer[_0x1fef20(0x1ad)]))_0x58ddcf=installer[_0x1fef20(0x1ad)];try{const _0x31db13=path['join'](__dirname,'python_service','service.py');_0x2ac107[_0x1fef20(0x14f)]=spawn(_0x58ddcf,[_0x31db13]),_0x2ac107[_0x1fef20(0x14f)]['stdout']['on']('data',_0x410ac5=>{const _0x2ae31f=_0x1fef20,_0x127526=_0x410ac5[_0x2ae31f(0xb2)]()[_0x2ae31f(0xff)]('\x0a');_0x127526['forEach'](_0x24ed1d=>{const _0x1b6139=_0x2ae31f,_0x45025c=_0x24ed1d['trim']();if(!_0x45025c)return;if(_0x45025c[_0x1b6139(0xc6)](_0x1b6139(0xe8)))_0x2ac107[_0x1b6139(0xb0)]['debug'](_0x1b6139(0x212)+_0x45025c[_0x1b6139(0x1ae)](0x5)[_0x1b6139(0x82)]());else{if(_0x45025c['startsWith'](_0x1b6139(0xc4)))try{const _0x33884e=JSON[_0x1b6139(0x12f)](_0x45025c[_0x1b6139(0x1ae)](0x8)[_0x1b6139(0x82)]());handlePythonResult(_0x2ac107,_0x33884e);}catch(_0x5b432e){}}});}),_0x2ac107[_0x1fef20(0x14f)]['on']('close',_0x207e46=>{const _0x4610fb=_0x1fef20;_0x2ac107[_0x4610fb(0x14f)]=null;});}catch(_0x276a28){_0x2ac107[_0x1fef20(0xb0)][_0x1fef20(0xd4)]('Error\x20launching\x20Python:\x20'+_0x276a28[_0x1fef20(0xfe)]);}}async function runAutopilot(_0x51fabb){const _0x489900=a0_0x3ca1cc;_0x51fabb[_0x489900(0xb0)][_0x489900(0x9a)](_0x489900(0x11a)),await runGeminiAnalysis(_0x51fabb),updateHealthVector(_0x51fabb),triggerGaitAnalysis(_0x51fabb),triggerEnergyPrediction(_0x51fabb);}async function triggerGaitAnalysis(_0x592ab6){const _0xe2272f=a0_0x3ca1cc;if(!_0x592ab6['isProVersion'])return;try{const _0x2ff976=await _0x592ab6['getStateAsync']('LTM.trainingData.sequences');_0x2ff976&&_0x2ff976[_0xe2272f(0x167)]&&sendToPython(_0x592ab6,_0xe2272f(0x143),{'sequences':JSON[_0xe2272f(0x12f)](_0x2ff976[_0xe2272f(0x167)])});}catch(_0x22a0d5){}}async function triggerEnergyPrediction(_0x1df084){const _0x826613=a0_0x3ca1cc;if(!_0x1df084[_0x826613(0x19f)])return;try{const _0x63e29c=await getOutsideTemperatureNumeric(_0x1df084);if(_0x63e29c===null)return;const _0x8e7e32={},_0xa3fa5d=_0x1df084['config']['devices']||[];for(const _0x4a0ced of _0xa3fa5d){if(_0x4a0ced[_0x826613(0x214)]===_0x826613(0x179)&&_0x4a0ced[_0x826613(0x182)]){const _0x226856=_0x1df084['sensorLastValues'][_0x4a0ced['id']];if(_0x226856!==undefined)_0x8e7e32[_0x4a0ced[_0x826613(0x182)]]=_0x226856;}}Object[_0x826613(0x176)](_0x8e7e32)[_0x826613(0xa2)]>0x0&&sendToPython(_0x1df084,_0x826613(0x1e0),{'current_temps':_0x8e7e32,'t_out':_0x63e29c});}catch(_0x214fc2){}}function updateHealthVector(_0x322828){const _0x2e21c8=a0_0x3ca1cc;if(!_0x322828[_0x2e21c8(0x178)]||_0x322828[_0x2e21c8(0x178)][_0x2e21c8(0xa2)]===0x0)return;const _0x29fb6d=new Array(0x60)[_0x2e21c8(0x1f1)](0x0),_0x4fe99c=new Date()[_0x2e21c8(0xd3)](0x0,0x0,0x0,0x0);_0x322828[_0x2e21c8(0x178)]['forEach'](_0x4d749c=>{const _0x2f9ace=_0x2e21c8,_0x4d0a31=new Date(_0x4d749c[_0x2f9ace(0x9e)]);if(_0x4d0a31['getTime']()>=_0x4fe99c){const _0x352c98=_0x4d0a31[_0x2f9ace(0x99)](),_0x4a4975=_0x4d0a31[_0x2f9ace(0x104)](),_0x56b2d4=_0x352c98*0x4+Math[_0x2f9ace(0xe1)](_0x4a4975/0xf);if(_0x56b2d4>=0x0&&_0x56b2d4<0x60)_0x29fb6d[_0x56b2d4]++;}}),_0x322828['setStateAsync']('analysis.health.todayVector',{'val':JSON[_0x2e21c8(0xb4)](_0x29fb6d),'ack':!![]});}async function getWeatherContext(_0xad0914){const _0x387495=a0_0x3ca1cc;if(!_0xad0914[_0x387495(0x215)][_0x387495(0x16f)]||!_0xad0914['config']['weatherInstance'])return _0x387495(0x128);try{const _0x5c1366=_0xad0914['config'][_0x387495(0x20b)];let _0x5bd2ba=await _0xad0914['getForeignStateAsync'](_0x5c1366+_0x387495(0xd6));if(!_0x5bd2ba)_0x5bd2ba=await _0xad0914[_0x387495(0x120)](_0x5c1366+_0x387495(0x1e2));let _0x55fc1a=await _0xad0914[_0x387495(0x120)](_0x5c1366+_0x387495(0x1b1));if(!_0x55fc1a)_0x55fc1a=await _0xad0914[_0x387495(0x120)](_0x5c1366+_0x387495(0xc9));if(_0x5bd2ba&&_0x55fc1a)return _0x5bd2ba[_0x387495(0x167)]+_0x387495(0x1bf)+_0x55fc1a[_0x387495(0x167)];}catch(_0x7b267a){}return _0x387495(0x118);}async function getCalendarContext(_0x52d9e7){const _0xeb38e2=a0_0x3ca1cc;if(!_0x52d9e7[_0xeb38e2(0x215)][_0xeb38e2(0x1dd)]||!_0x52d9e7['config'][_0xeb38e2(0x195)])return _0xeb38e2(0x208);return _0xeb38e2(0x9d);}async function getCalendarNames(_0x5635e9,_0x141626){return[];}async function saveFeedback(_0x389874,_0x2f3d89){const _0x4227a9=a0_0x3ca1cc;_0x389874[_0x4227a9(0xb0)][_0x4227a9(0x17a)](_0x4227a9(0x13b)+_0x2f3d89['rating']);}async function runGeminiAnalysis(_0x3d39cc,_0x51cd38=''){const _0x2f90ad=a0_0x3ca1cc;if(!_0x3d39cc[_0x2f90ad(0x1c8)])return;if(_0x3d39cc[_0x2f90ad(0xba)][_0x2f90ad(0xa2)]===0x0)return;const _0x51ef94=_0x3d39cc[_0x2f90ad(0xba)][_0x2f90ad(0x94)](0x0,0xf),_0x5ed6a2=await getWeatherContext(_0x3d39cc),_0x224421=_0x3d39cc[_0x2f90ad(0x141)],_0x2e1fde=PERSONA_MAPPING[_0x3d39cc[_0x2f90ad(0x215)][_0x2f90ad(0x202)]||'generic'],_0x35e4b4=_0x3d39cc['config'][_0x2f90ad(0xc0)]||_0x2f90ad(0x1e9);let _0x4ef8ca='Unbekannt';try{const _0xbd8e0f=await _0x3d39cc['getStateAsync']('system.presenceWho');if(_0xbd8e0f&&_0xbd8e0f['val'])_0x4ef8ca=_0xbd8e0f[_0x2f90ad(0x167)];}catch(_0x156973){}let _0x30710b=![];try{const _0xd1f928=await _0x3d39cc['getStateAsync'](_0x2f90ad(0x85));if(_0xd1f928&&_0xd1f928[_0x2f90ad(0x167)])_0x30710b=!![];}catch(_0x2f05b5){}const _0x1f7e7a='ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20'+_0x2e1fde+_0x2f90ad(0x1e8)+_0x35e4b4+_0x2f90ad(0x96)+_0x224421+_0x2f90ad(0xeb)+_0x5ed6a2+_0x2f90ad(0x1f8)+_0x4ef8ca+_0x2f90ad(0x183)+JSON[_0x2f90ad(0xb4)](_0x51ef94)+_0x2f90ad(0x1ef)+_0x51cd38+'.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}';try{const _0x5da574=await _0x3d39cc[_0x2f90ad(0x1c8)][_0x2f90ad(0x16a)](_0x1f7e7a),_0x3c65b8=JSON[_0x2f90ad(0x12f)](_0x5da574[_0x2f90ad(0xf5)]['text']()[_0x2f90ad(0x1f6)](/```json|```/g,'')[_0x2f90ad(0x82)]());await _0x3d39cc[_0x2f90ad(0x1bb)](_0x2f90ad(0x90),{'val':JSON[_0x2f90ad(0xb4)](_0x3c65b8),'ack':!![]});if(_0x3c65b8[_0x2f90ad(0x146)])await _0x3d39cc[_0x2f90ad(0x1bb)](_0x2f90ad(0x14b),{'val':_0x3c65b8[_0x2f90ad(0x146)],'ack':!![]});const _0x7fa938={'timestamp':Date[_0x2f90ad(0x1d4)](),'id':Date['now']()[_0x2f90ad(0xb2)](),'analysis':{'activity':{'summary':_0x3c65b8[_0x2f90ad(0x146)],'isAlert':_0x3c65b8[_0x2f90ad(0x186)],'alertReason':_0x3c65b8[_0x2f90ad(0xa3)]},'comfort':{'automationProposal':_0x3c65b8[_0x2f90ad(0x1f3)]}}};await updateAnalysisHistory(_0x3d39cc,_0x7fa938);const _0x1fc71f=_0x3c65b8[_0x2f90ad(0x186)]||![];_0x1fc71f!==_0x3d39cc[_0x2f90ad(0xd2)]&&(await _0x3d39cc['setStateAsync'](_0x2f90ad(0x162),{'val':_0x1fc71f,'ack':!![]}),_0x3d39cc[_0x2f90ad(0xd2)]=_0x1fc71f,_0x1fc71f&&(await _0x3d39cc[_0x2f90ad(0x1bb)](_0x2f90ad(0xd8),{'val':_0x3c65b8[_0x2f90ad(0xa3)],'ack':!![]}),sendNotification(_0x3d39cc,'âš ï¸\x20ALARM:\x20'+_0x3c65b8[_0x2f90ad(0xa3)],![],_0x3c65b8[_0x2f90ad(0xad)])));if(_0x3c65b8[_0x2f90ad(0x1f3)]&&_0x3c65b8['automationProposal'][_0x2f90ad(0x153)]){await _0x3d39cc['setStateAsync'](_0x2f90ad(0x140),{'val':!![],'ack':!![]}),await _0x3d39cc[_0x2f90ad(0x1bb)](_0x2f90ad(0x165),{'val':_0x3c65b8[_0x2f90ad(0x1f3)][_0x2f90ad(0x200)],'ack':!![]}),await _0x3d39cc[_0x2f90ad(0x1bb)](_0x2f90ad(0x93),{'val':_0x3c65b8['automationProposal']['targetId'],'ack':!![]}),await _0x3d39cc[_0x2f90ad(0x1bb)](_0x2f90ad(0xed),{'val':JSON[_0x2f90ad(0xb4)](_0x3c65b8[_0x2f90ad(0x1f3)][_0x2f90ad(0xdc)]),'ack':!![]});if(_0x30710b)executeAutomationAction(_0x3d39cc);}}catch(_0x10b4c2){_0x3d39cc[_0x2f90ad(0xb0)]['error'](_0x2f90ad(0xe2)+_0x10b4c2[_0x2f90ad(0xfe)]);}}async function startSystem(_0x32737e){const _0x4834e7=a0_0x3ca1cc;_0x32737e['log']['info'](_0x4834e7(0x180)),await initZombies(_0x32737e);try{_0x32737e[_0x4834e7(0x19f)]=await checkLicense(_0x32737e[_0x4834e7(0x215)][_0x4834e7(0x164)]);}catch(_0x1c54d6){}if(!_0x32737e[_0x4834e7(0x215)][_0x4834e7(0x20a)]||_0x32737e[_0x4834e7(0x215)][_0x4834e7(0x20a)]<0.1)_0x32737e[_0x4834e7(0x215)][_0x4834e7(0x20a)]=0xc;await initHistory(_0x32737e),await initSystemConfig(_0x32737e);if(_0x32737e['config']['geminiApiKey'])try{_0x32737e['genAI']=new GoogleGenerativeAI(_0x32737e[_0x4834e7(0x215)][_0x4834e7(0x147)]),_0x32737e['geminiModel']=_0x32737e[_0x4834e7(0xa1)][_0x4834e7(0x1a0)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x4834e7(0xcb)}}),_0x32737e['log'][_0x4834e7(0x17a)](_0x4834e7(0x1ff));}catch(_0xfa8d53){_0x32737e[_0x4834e7(0xb0)][_0x4834e7(0xd4)](_0x4834e7(0xbb)+_0xfa8d53[_0x4834e7(0xfe)]);}await createAllObjects(_0x32737e),await loadSystemMode(_0x32737e),await loadRawEventLog(_0x32737e),await loadDailyDigests(_0x32737e),_0x32737e[_0x4834e7(0x1f7)](_0x4834e7(0x109)),_0x32737e[_0x4834e7(0x1f7)](LTM_DP_TRIGGER_DIGEST),_0x32737e[_0x4834e7(0x1f7)](_0x4834e7(0x10b)),_0x32737e[_0x4834e7(0x1f7)](_0x4834e7(0x1a3)),_0x32737e[_0x4834e7(0x1f7)](_0x4834e7(0x1d3)),_0x32737e[_0x4834e7(0x1f7)](_0x4834e7(0x85)),_0x32737e[_0x4834e7(0x1f7)](_0x4834e7(0x131)),_0x32737e[_0x4834e7(0x1f7)](_0x4834e7(0x13e)),_0x32737e['subscribeStates'](_0x4834e7(0x1d1)),_0x32737e[_0x4834e7(0x1f7)](_0x4834e7(0x157)),_0x32737e['subscribeStates']('analysis.training.triggerTopology'),await initSensorSubscriptions(_0x32737e),await initPresenceSubscriptions(_0x32737e),await setupTelegramListener(_0x32737e),setTimeout(()=>checkWifiPresence(_0x32737e),0x1388);if(_0x32737e[_0x4834e7(0xf0)])clearInterval(_0x32737e[_0x4834e7(0xf0)]);const _0x519d9a=_0x32737e['config'][_0x4834e7(0x20c)]||0xf;_0x519d9a>0x0&&(_0x32737e[_0x4834e7(0xf0)]=setInterval(()=>{runAutopilot(_0x32737e);},_0x519d9a*0x3c*0x3e8)),schedulers[_0x4834e7(0x1b6)](_0x32737e,()=>createDailyDigest(_0x32737e)),schedulers['setupModeResetScheduler'](_0x32737e),schedulers[_0x4834e7(0x105)](_0x32737e,()=>runBaselineDriftAnalysis(_0x32737e)),schedulers['setupBriefingScheduler'](_0x32737e,()=>sendMorningBriefing(_0x32737e)),startPythonService(_0x32737e),setTimeout(()=>{const _0x515927=_0x4834e7;_0x32737e[_0x515927(0x14f)]&&(runPythonHealthCheck(_0x32737e),triggerGaitAnalysis(_0x32737e),triggerEnergyPrediction(_0x32737e)),updateHealthVector(_0x32737e);},0x1388);}class CogniLiving extends utils['Adapter']{constructor(_0x56905d){const _0x287829=a0_0x3ca1cc;super({..._0x56905d,'name':_0x287829(0x1ec)}),this['eventHistory']=[],this['analysisHistory']=[],this['rawEventLog']=[],this['dailyDigests']=[],this['sensorLastValues']={},this[_0x287829(0x1f4)]={'latitude':0x0,'longitude':0x0,'city':''},this['isPresent']=!![],this[_0x287829(0x139)]=null,this[_0x287829(0x172)]=null,this[_0x287829(0x1e5)]=![],this['genAI']=null,this['geminiModel']=null,this[_0x287829(0x141)]=SYSTEM_MODES[_0x287829(0x14d)],this[_0x287829(0x19f)]=![],this['lastAlertState']=![],this[_0x287829(0x14e)]=_0x287829(0xa9),this[_0x287829(0xf0)]=null,this[_0x287829(0x1e6)]=null,this[_0x287829(0xf1)]=null,this['driftAnalysisTimer']=null,this['briefingJob']=null,this['pythonProcess']=null,this['dependencyInstallInProgress']=![],this['on'](_0x287829(0x102),this[_0x287829(0x193)][_0x287829(0x18c)](this)),this['on'](_0x287829(0xae),this['onStateChange'][_0x287829(0x18c)](this)),this['on'](_0x287829(0xc8),this[_0x287829(0x1fd)][_0x287829(0x18c)](this)),this['on'](_0x287829(0xfe),this['onMessage'][_0x287829(0x18c)](this));}async[a0_0x3ca1cc(0x193)](){const _0x203227=a0_0x3ca1cc;this[_0x203227(0xb0)][_0x203227(0x17a)](_0x203227(0x185)+this[_0x203227(0x142)]+_0x203227(0x144));if(!installer[_0x203227(0x1ca)](this,()=>startSystem(this)))return;}['onUnload'](_0x5c093b){const _0x19db60=a0_0x3ca1cc;if(this[_0x19db60(0xf0)])clearInterval(this[_0x19db60(0xf0)]);if(this[_0x19db60(0x20e)])clearInterval(this[_0x19db60(0x20e)]);if(this[_0x19db60(0x1e6)])this[_0x19db60(0x1e6)]['cancel']();if(this[_0x19db60(0xf1)])this[_0x19db60(0xf1)][_0x19db60(0x197)]();if(this[_0x19db60(0x189)])this['briefingJob'][_0x19db60(0x197)]();if(this[_0x19db60(0x139)])clearTimeout(this[_0x19db60(0x139)]);if(this[_0x19db60(0x172)])clearTimeout(this[_0x19db60(0x172)]);stopPythonService(this),_0x5c093b();}async[a0_0x3ca1cc(0x17b)](_0x21ab59,_0x60a47b){const _0x4ca667=a0_0x3ca1cc;if(!_0x60a47b||this['dependencyInstallInProgress'])return;if(_0x21ab59[_0x4ca667(0x12a)](_0x4ca667(0xf3))&&_0x21ab59[_0x4ca667(0x78)](_0x4ca667(0x152))&&_0x60a47b[_0x4ca667(0x167)]){await handleTelegramResponse(this,_0x60a47b[_0x4ca667(0x167)]);return;}if(_0x21ab59===this['namespace']+'.'+SYSTEM_DP_MODE){if(_0x60a47b[_0x4ca667(0x167)]&&Object[_0x4ca667(0x158)](SYSTEM_MODES)['includes'](_0x60a47b['val'])){this[_0x4ca667(0x141)]=_0x60a47b[_0x4ca667(0x167)];if(_0x60a47b[_0x4ca667(0x167)]===SYSTEM_MODES[_0x4ca667(0x103)])await setPresence(this,![]);else await setPresence(this,!![]);}if(!_0x60a47b[_0x4ca667(0xc7)])this[_0x4ca667(0xf4)](_0x21ab59,{'val':this['currentSystemMode'],'ack':!![]});return;}if(!_0x60a47b['ack']){_0x21ab59[_0x4ca667(0x12a)](_0x4ca667(0x109))&&_0x60a47b[_0x4ca667(0x167)]&&(this[_0x4ca667(0xf4)](_0x21ab59,{'val':![],'ack':!![]}),runGeminiAnalysis(this));if(_0x21ab59[_0x4ca667(0x12a)]('triggerDailyDigest')&&_0x60a47b['val']){this['setState'](_0x21ab59,{'val':![],'ack':!![]});if(this['isProVersion'])createDailyDigest(this);}_0x21ab59[_0x4ca667(0x12a)](_0x4ca667(0xcc))&&_0x60a47b['val']&&(this[_0x4ca667(0xf4)](_0x21ab59,{'val':![],'ack':!![]}),sendMorningBriefing(this));_0x21ab59['includes'](_0x4ca667(0x1c3))&&_0x60a47b[_0x4ca667(0x167)]&&(this[_0x4ca667(0xf4)](_0x21ab59,{'val':![],'ack':!![]}),executeAutomationAction(this));if(_0x21ab59[_0x4ca667(0x12a)](_0x4ca667(0x131))&&_0x60a47b[_0x4ca667(0x167)]){this[_0x4ca667(0xf4)](_0x21ab59,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x47b625=await this['getStateAsync'](_0x4ca667(0x166));if(_0x47b625&&_0x47b625[_0x4ca667(0x167)]){const _0x4f2ad0=JSON[_0x4ca667(0x12f)](_0x47b625[_0x4ca667(0x167)]);this[_0x4ca667(0xb0)][_0x4ca667(0x17a)](_0x4ca667(0x11d)),this[_0x4ca667(0x1bb)](_0x4ca667(0x114),{'val':'Sec-Training\x20started...','ack':!![]}),sendToPython(this,_0x4ca667(0x156),{'sequences':_0x4f2ad0});}}catch(_0x6b7440){this[_0x4ca667(0xb0)]['error'](_0x4ca667(0x1b5)+_0x6b7440[_0x4ca667(0xfe)]);}}if(_0x21ab59['includes']('analysis.training.triggerHealth')&&_0x60a47b['val']){this[_0x4ca667(0xf4)](_0x21ab59,{'val':![],'ack':!![]});if(this[_0x4ca667(0x19f)])try{const _0x1c45a8=await this[_0x4ca667(0x19d)](LTM_DP_DAILY_DIGESTS);if(_0x1c45a8&&_0x1c45a8[_0x4ca667(0x167)])sendToPython(this,_0x4ca667(0x1ba),{'digests':JSON['parse'](_0x1c45a8[_0x4ca667(0x167)])});}catch(_0x54534f){}}if(_0x21ab59[_0x4ca667(0x12a)](_0x4ca667(0x1d1))&&_0x60a47b[_0x4ca667(0x167)]){this[_0x4ca667(0xf4)](_0x21ab59,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x38a99e=await this['getStateAsync']('LTM.trainingData.thermodynamics');if(_0x38a99e&&_0x38a99e[_0x4ca667(0x167)])sendToPython(this,_0x4ca667(0x18d),{'points':JSON[_0x4ca667(0x12f)](_0x38a99e[_0x4ca667(0x167)])});}catch(_0xd04ec){}}if(_0x21ab59[_0x4ca667(0x12a)](_0x4ca667(0x157))&&_0x60a47b['val']){this[_0x4ca667(0xf4)](_0x21ab59,{'val':![],'ack':!![]});if(this[_0x4ca667(0x19f)])try{const _0x5bb15d=await this[_0x4ca667(0x19d)](LTM_DP_RAW_LOG);_0x5bb15d&&_0x5bb15d[_0x4ca667(0x167)]&&(this[_0x4ca667(0xb0)]['info'](_0x4ca667(0x1d9)),sendToPython(this,_0x4ca667(0x125),{'events':JSON['parse'](_0x5bb15d[_0x4ca667(0x167)])}));}catch(_0x4382e3){}}if(_0x21ab59[_0x4ca667(0x12a)](_0x4ca667(0x87))&&_0x60a47b[_0x4ca667(0x167)]){this[_0x4ca667(0xf4)](_0x21ab59,{'val':![],'ack':!![]});if(this[_0x4ca667(0x19f)])try{const _0x4a130d=await this[_0x4ca667(0x19d)](_0x4ca667(0x166));if(_0x4a130d&&_0x4a130d[_0x4ca667(0x167)]){const _0x1eef40=JSON[_0x4ca667(0x12f)](_0x4a130d[_0x4ca667(0x167)]);this[_0x4ca667(0xb0)]['info'](_0x4ca667(0x151)),sendToPython(this,_0x4ca667(0x84),{'sequences':_0x1eef40});}}catch(_0x3011a0){this[_0x4ca667(0xb0)][_0x4ca667(0xd4)](_0x4ca667(0x1b4)+_0x3011a0['message']);}}return;}if(this[_0x4ca667(0x215)][_0x4ca667(0x1a4)]&&this[_0x4ca667(0x215)][_0x4ca667(0x1a4)][_0x4ca667(0x12a)](_0x21ab59)){await checkWifiPresence(this);return;}const _0x4ec983=(this[_0x4ca667(0x215)]['devices']||[])['find'](_0x1d0d49=>_0x1d0d49['id']===_0x21ab59);if(_0x4ec983)processSensorEvent(this,_0x21ab59,_0x60a47b,_0x4ec983);}async[a0_0x3ca1cc(0xa6)](_0x3fd5f9){const _0x57ad9e=a0_0x3ca1cc;if(typeof _0x3fd5f9===_0x57ad9e(0x201)&&_0x3fd5f9['message']){if(_0x3fd5f9[_0x57ad9e(0x1a5)]==='testApiKey'){const _0x23ff13=_0x3fd5f9[_0x57ad9e(0xfe)]['apiKey']||this['config'][_0x57ad9e(0x147)];if(!_0x23ff13)return this[_0x57ad9e(0x1b0)](_0x3fd5f9[_0x57ad9e(0x12c)],_0x3fd5f9['command'],{'success':![],'message':_0x57ad9e(0x1f9)},_0x3fd5f9[_0x57ad9e(0xfd)]);try{const _0x5a87ac=new GoogleGenerativeAI(_0x23ff13),_0x3f087a=_0x5a87ac['getGenerativeModel']({'model':GEMINI_MODEL}),_0xfe9092=await _0x3f087a[_0x57ad9e(0x16a)]('Hi');this[_0x57ad9e(0x1b0)](_0x3fd5f9[_0x57ad9e(0x12c)],_0x3fd5f9[_0x57ad9e(0x1a5)],{'success':!![],'message':_0x57ad9e(0x7d)+_0xfe9092['response'][_0x57ad9e(0xbc)]()},_0x3fd5f9['callback']);}catch(_0x1ea5e5){this[_0x57ad9e(0x1b0)](_0x3fd5f9['from'],_0x3fd5f9[_0x57ad9e(0x1a5)],{'success':![],'message':'Err:\x20'+_0x1ea5e5['message']},_0x3fd5f9[_0x57ad9e(0xfd)]);}}else{if(_0x3fd5f9['command']===_0x57ad9e(0x119)){const _0x5dbad1=await getWeatherContext(this),_0x111318=await getCalendarContext(this);this[_0x57ad9e(0x1b0)](_0x3fd5f9[_0x57ad9e(0x12c)],_0x3fd5f9['command'],{'success':!![],'weather':_0x5dbad1,'calendar':_0x111318},_0x3fd5f9[_0x57ad9e(0xfd)]);}else{if(_0x3fd5f9[_0x57ad9e(0x1a5)]==='getLtmData'){if(!this['isProVersion'])return this[_0x57ad9e(0x1b0)](_0x3fd5f9[_0x57ad9e(0x12c)],_0x3fd5f9[_0x57ad9e(0x1a5)],{'success':![],'isPro':![]},_0x3fd5f9[_0x57ad9e(0xfd)]);let _0x29c738={'status':'N/A'};try{const _0x15cc03=await this[_0x57ad9e(0x19d)](LTM_DP_DRIFT_STATUS);_0x29c738[_0x57ad9e(0x191)]=_0x15cc03?_0x15cc03[_0x57ad9e(0x167)]:_0x57ad9e(0x101);}catch(_0x49de3e){}this[_0x57ad9e(0x1b0)](_0x3fd5f9[_0x57ad9e(0x12c)],_0x3fd5f9[_0x57ad9e(0x1a5)],{'success':!![],'isPro':!![],'dailyDigests':this[_0x57ad9e(0x216)],'driftAnalysis':_0x29c738,'analysisHistory':this['analysisHistory']},_0x3fd5f9[_0x57ad9e(0xfd)]);}else{if(_0x3fd5f9[_0x57ad9e(0x1a5)]===_0x57ad9e(0x1d8)){const _0x33bb45=this[_0x57ad9e(0x216)]['length'],_0x4e7483=new Date(),_0x3b745d=new Date(_0x4e7483[_0x57ad9e(0x98)](),_0x4e7483[_0x57ad9e(0x117)](),_0x4e7483[_0x57ad9e(0x7b)]())[_0x57ad9e(0x9f)](),_0x20ab86=this[_0x57ad9e(0x178)][_0x57ad9e(0x111)](_0x222d5f=>new Date(_0x222d5f[_0x57ad9e(0x9e)])[_0x57ad9e(0x9f)]()>_0x3b745d)['length'],_0xdd14e0=new Array(0x18)[_0x57ad9e(0x1f1)](0x0);this[_0x57ad9e(0x178)]['forEach'](_0x3de25e=>{const _0x39a679=_0x57ad9e,_0xdf973=new Date(_0x3de25e['timestamp']);if(_0xdf973[_0x39a679(0x9f)]()>_0x3b745d)_0xdd14e0[_0xdf973['getHours']()]++;});let _0x19adae={'status':_0x57ad9e(0x101)};try{const _0x4f26f4=await this[_0x57ad9e(0x19d)](LTM_DP_DRIFT_STATUS);_0x19adae[_0x57ad9e(0x191)]=_0x4f26f4?_0x4f26f4[_0x57ad9e(0x167)]:'N/A';}catch(_0x4695a5){}let _0x16a048='';try{const _0x44a25f=await this['getStateAsync'](_0x57ad9e(0x18f));_0x16a048=_0x44a25f?_0x44a25f[_0x57ad9e(0x167)]:'';}catch(_0x58011b){}let _0x39a677=null;!this[_0x57ad9e(0x1c8)]&&(_0x39a677=this[_0x57ad9e(0x215)][_0x57ad9e(0x147)]?_0x57ad9e(0x19b):_0x57ad9e(0xd9));let _0x3b3556={'detected':![],'description':'','targetId':'','targetValue':'','autoApply':![]};try{const _0x532653=await this['getStateAsync'](_0x57ad9e(0x140));if(_0x532653&&_0x532653[_0x57ad9e(0x167)]){_0x3b3556[_0x57ad9e(0x153)]=!![];const _0x1c53d6=await this['getStateAsync'](_0x57ad9e(0x165));_0x3b3556[_0x57ad9e(0x200)]=_0x1c53d6?_0x1c53d6['val']:'';const _0xbdc7ba=await this['getStateAsync'](_0x57ad9e(0x93));_0x3b3556[_0x57ad9e(0x194)]=_0xbdc7ba?_0xbdc7ba[_0x57ad9e(0x167)]:'';const _0x25d51a=await this[_0x57ad9e(0x19d)]('analysis.automation.targetValue');_0x3b3556[_0x57ad9e(0xdc)]=_0x25d51a?_0x25d51a[_0x57ad9e(0x167)]:'';}const _0xa42133=await this[_0x57ad9e(0x19d)](_0x57ad9e(0x85));_0x3b3556[_0x57ad9e(0x1d0)]=_0xa42133?!!_0xa42133[_0x57ad9e(0x167)]:![];}catch(_0x552329){}this['sendTo'](_0x3fd5f9['from'],_0x3fd5f9[_0x57ad9e(0x1a5)],{'success':!![],'eventHistory':this[_0x57ad9e(0xba)][_0x57ad9e(0x94)](0x0,0xf),'stats':{'digestCount':_0x33bb45,'eventCountToday':_0x20ab86,'hourlyActivity':_0xdd14e0,'driftStatus':_0x19adae[_0x57ad9e(0x191)],'isPresent':this[_0x57ad9e(0x1f2)],'presenceWho':_0x16a048,'minDays':this['config'][_0x57ad9e(0x11e)]||0x7,'stbDays':this[_0x57ad9e(0x215)][_0x57ad9e(0x177)]||0xe,'ltbDays':this[_0x57ad9e(0x215)][_0x57ad9e(0x15a)]||0x3c,'systemError':_0x39a677},'automation':_0x3b3556},_0x3fd5f9[_0x57ad9e(0xfd)]);}else{if(_0x3fd5f9[_0x57ad9e(0x1a5)]==='scanDevices')try{const _0x41943c=await scanner[_0x57ad9e(0xdb)](this,_0x3fd5f9['message']||{});this[_0x57ad9e(0x1b0)](_0x3fd5f9[_0x57ad9e(0x12c)],_0x3fd5f9[_0x57ad9e(0x1a5)],{'success':!![],'devices':_0x41943c},_0x3fd5f9[_0x57ad9e(0xfd)]);}catch(_0x1c1f7){this[_0x57ad9e(0x1b0)](_0x3fd5f9[_0x57ad9e(0x12c)],_0x3fd5f9[_0x57ad9e(0x1a5)],{'success':![],'error':_0x1c1f7[_0x57ad9e(0xfe)]},_0x3fd5f9[_0x57ad9e(0xfd)]);}else{if(_0x3fd5f9[_0x57ad9e(0x1a5)]==='getEnums'){const _0x514f0d=await this['getForeignObjectsAsync'](_0x57ad9e(0xb7),_0x57ad9e(0x108)),_0x41c2ab=[];if(_0x514f0d)for(const _0x2580ea in _0x514f0d){const _0x11f381=_0x514f0d[_0x2580ea],_0x16f64d=(_0x11f381[_0x57ad9e(0x132)]&&typeof _0x11f381[_0x57ad9e(0x132)][_0x57ad9e(0x1cf)]===_0x57ad9e(0x201)?_0x11f381['common']['name']['de']:_0x11f381[_0x57ad9e(0x132)]['name'])||_0x11f381['common'][_0x57ad9e(0x1cf)];_0x41c2ab[_0x57ad9e(0x9c)]({'id':_0x2580ea,'name':_0x16f64d});}const _0x5c1ead=await this['getForeignObjectsAsync'](_0x57ad9e(0x135),'enum'),_0x4decd=[];if(_0x5c1ead)for(const _0x5902f4 in _0x5c1ead){const _0x4e229b=_0x5c1ead[_0x5902f4],_0x1c8719=(_0x4e229b[_0x57ad9e(0x132)]&&typeof _0x4e229b['common'][_0x57ad9e(0x1cf)]===_0x57ad9e(0x201)?_0x4e229b[_0x57ad9e(0x132)][_0x57ad9e(0x1cf)]['de']:_0x4e229b[_0x57ad9e(0x132)]['name'])||_0x5902f4['split']('.')[_0x57ad9e(0xb6)]();_0x4decd['push'](_0x1c8719);}this[_0x57ad9e(0x1b0)](_0x3fd5f9['from'],_0x3fd5f9[_0x57ad9e(0x1a5)],{'success':!![],'enums':_0x41c2ab,'rooms':_0x4decd},_0x3fd5f9[_0x57ad9e(0xfd)]);}else{if(_0x3fd5f9['command']==='getCalendarNames'){const _0x410685=_0x3fd5f9[_0x57ad9e(0xfe)]['instance'];if(!_0x410685)return this[_0x57ad9e(0x1b0)](_0x3fd5f9[_0x57ad9e(0x12c)],_0x3fd5f9[_0x57ad9e(0x1a5)],{'success':![],'error':_0x57ad9e(0x92)},_0x3fd5f9[_0x57ad9e(0xfd)]);const _0x353330=await getCalendarNames(this,_0x410685);this['sendTo'](_0x3fd5f9[_0x57ad9e(0x12c)],_0x3fd5f9[_0x57ad9e(0x1a5)],{'success':!![],'names':_0x353330},_0x3fd5f9[_0x57ad9e(0xfd)]);}else{if(_0x3fd5f9[_0x57ad9e(0x1a5)]===_0x57ad9e(0x145)){const {targetId:_0x1ec3b4,targetValue:_0x5e7f5f}=_0x3fd5f9['message'];this[_0x57ad9e(0xb0)][_0x57ad9e(0x17a)](_0x57ad9e(0xec)+_0x1ec3b4+'\x20=\x20'+_0x5e7f5f),await this[_0x57ad9e(0x1bb)](_0x57ad9e(0x140),{'val':!![],'ack':!![]}),await this[_0x57ad9e(0x1bb)](_0x57ad9e(0x165),{'val':_0x57ad9e(0xb1)+_0x1ec3b4,'ack':!![]}),await this[_0x57ad9e(0x1bb)](_0x57ad9e(0x93),{'val':_0x1ec3b4,'ack':!![]}),await this[_0x57ad9e(0x1bb)](_0x57ad9e(0xed),{'val':_0x5e7f5f,'ack':!![]}),this[_0x57ad9e(0x1b0)](_0x3fd5f9['from'],_0x3fd5f9[_0x57ad9e(0x1a5)],{'success':!![]},_0x3fd5f9[_0x57ad9e(0xfd)]);}else{if(_0x3fd5f9[_0x57ad9e(0x1a5)]===_0x57ad9e(0x1aa)){const {historyId:_0x15a87a,rating:_0x40a330,comment:_0x1be1dd,alertReason:_0x332f13}=_0x3fd5f9[_0x57ad9e(0xfe)];_0x15a87a&&_0x40a330?(await saveFeedback(this,{'timestamp':Date[_0x57ad9e(0x1d4)](),'historyId':_0x15a87a,'rating':_0x40a330,'comment':_0x1be1dd,'alertReason':_0x332f13}),this[_0x57ad9e(0x1b0)](_0x3fd5f9[_0x57ad9e(0x12c)],_0x3fd5f9['command'],{'success':!![]},_0x3fd5f9[_0x57ad9e(0xfd)])):this['sendTo'](_0x3fd5f9[_0x57ad9e(0x12c)],_0x3fd5f9['command'],{'success':![],'error':'Missing\x20data'},_0x3fd5f9[_0x57ad9e(0xfd)]);}else _0x3fd5f9[_0x57ad9e(0x1a5)]==='dismissAutomation'&&(this[_0x57ad9e(0xb0)]['info'](_0x57ad9e(0xc3)),await this[_0x57ad9e(0x1bb)](_0x57ad9e(0x140),{'val':![],'ack':!![]}),await this[_0x57ad9e(0x1bb)](_0x57ad9e(0x165),{'val':'','ack':!![]}),this['sendTo'](_0x3fd5f9[_0x57ad9e(0x12c)],_0x3fd5f9[_0x57ad9e(0x1a5)],{'success':!![]},_0x3fd5f9[_0x57ad9e(0xfd)]));}}}}}}}}}}}if(require['main']!==module)module['exports']=_0x183e6f=>new CogniLiving(_0x183e6f);else new CogniLiving();