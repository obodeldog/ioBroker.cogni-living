function a0_0x55a9(_0x4a9f3d,_0x16a508){const _0x5b0cae=a0_0x37aa();return a0_0x55a9=function(_0x266675,_0x412f0b){_0x266675=_0x266675-0x12d;let _0x37aac8=_0x5b0cae[_0x266675];return _0x37aac8;},a0_0x55a9(_0x4a9f3d,_0x16a508);}const a0_0x3cbf0e=a0_0x55a9;(function(_0x147afb,_0x5d24d6){const _0x297c6f=a0_0x55a9,_0x4200b7=_0x147afb();while(!![]){try{const _0x268675=-parseInt(_0x297c6f(0x160))/0x1+-parseInt(_0x297c6f(0x15f))/0x2+-parseInt(_0x297c6f(0x203))/0x3+-parseInt(_0x297c6f(0x1ec))/0x4+-parseInt(_0x297c6f(0x158))/0x5+-parseInt(_0x297c6f(0x219))/0x6*(parseInt(_0x297c6f(0x13e))/0x7)+parseInt(_0x297c6f(0x27f))/0x8;if(_0x268675===_0x5d24d6)break;else _0x4200b7['push'](_0x4200b7['shift']());}catch(_0x25f3dd){_0x4200b7['push'](_0x4200b7['shift']());}}}(a0_0x37aa,0x2807b));const a0_0x412f0b=(function(){let _0x3b76b9=!![];return function(_0x14de94,_0x32477b){const _0x2e8c06=_0x3b76b9?function(){if(_0x32477b){const _0x41a0a5=_0x32477b['apply'](_0x14de94,arguments);return _0x32477b=null,_0x41a0a5;}}:function(){};return _0x3b76b9=![],_0x2e8c06;};}()),a0_0x266675=a0_0x412f0b(this,function(){const _0x184f34=a0_0x55a9;return a0_0x266675['toString']()['search'](_0x184f34(0x1e1))[_0x184f34(0x1a5)]()['constructor'](a0_0x266675)[_0x184f34(0x145)](_0x184f34(0x1e1));});a0_0x266675();'use strict';const utils=require(a0_0x3cbf0e(0x1c3)),{GoogleGenerativeAI}=require(a0_0x3cbf0e(0x1f1)),path=require(a0_0x3cbf0e(0x293)),fs=require('fs'),installer=require(a0_0x3cbf0e(0x156)),scanner=require(a0_0x3cbf0e(0x171)),schedulers=require(a0_0x3cbf0e(0x242)),topology=require(a0_0x3cbf0e(0x28c)),setup=require(a0_0x3cbf0e(0x140)),recorder=require(a0_0x3cbf0e(0x12e)),pythonBridge=require(a0_0x3cbf0e(0x20e)),aiAgent=require(a0_0x3cbf0e(0x226)),deadMan=require(a0_0x3cbf0e(0x1a6)),automation=require(a0_0x3cbf0e(0x1c0)),GEMINI_MODEL=a0_0x3cbf0e(0x26f);function a0_0x37aa(){const _0x1eb3b6=['motion','getTime','triggerGaitAnalysis\x20parse\x20error:\x20','isProVersion','.system.mode','Gemini\x20Report\x20Night','scanThermostats','json','loadSystemMode','./lib/scanner','system','LTM.dailyDigests','PREDICT_ENERGY','readFileSync','toLowerCase','SYSTEM_MODES','handleInfrasound','online','analysis.health.todayVector','ðŸ”®\x20Energy\x20Prediction\x20triggered\x20(','calendarName','Manual\x20Event','startSystem','toFixed','No\x20data','pulse','analysis.energy.warmupTargets',',\x20Events:\x0a','window','application/json','existsSync','ðŸ”Š\x20Infraschall-Alarm:\x20','send','updateHealthVector','.data.table','onStateChange','Daily\x20Activity\x20Vector\x20(48x30min)',',\x20Temp:\x20','analysis.activity.roomStats','getStateAsync','Room\x20Dwell\x20Time\x20Stats','unshift','all','sendMorningBriefing','lastAlertState','analysis.energy.warmupSources','runAutopilot','Sonne:\x20','\x20sequences','setHours','haustÃ¼r','abs','2-digit','triggerEnergyPrediction\x20Error:\x20','enum.functions.*','message','processSensorEvent','devices','forEach','max','rawEventLog','toString','./lib/dead_man','infrasoundEnabled','Party\x20Mode','initZombies','type','Unbekannt','open','thermostat','trackerHeartbeat','ðŸ’¨\x20LÃ¼ftung\x20in\x20','dependencyInstallInProgress','val','klar','moduleEnergy','comfort','scanDevices','refreshCalendar\x20failed:\x20','[Integrator]\x20Error:\x20','from','instance','triggerGaitAnalysis','triggerHealth\x20error:\x20','checkSolarCondition','.isOnline','isGracePeriodActive','\x20Tage)','./lib/automation','events.history','analysisTimer','@iobroker/adapter-core','Gemini\x20Init\x20Error:\x20','state','cogni-living','Standard','minDaysForBaseline','.json','terrasse','analysis.health.activityTrend','subscribeStates','includes','writeFileSync','push','Keine\x20Daten','stringify','dailyDigests','Unknown','Guest\x20Mode','object','log','keys','TRAIN_COMFORT','\x20rooms)','Â°C\x20(Innen:\x20','rows','health','substring','\x20Kalender-Adapter\x20gefunden.','add','analysis.training.status','(((.+)+)+)+$','times','.venv','updateSchedulePreview','getForeignObjectsAsync','CALCULATE_HEALTH_TREND','runGeminiAnalysis','onUnload','\x20events\x20from\x20today...','infrasoundArmingId','then','637472JhMQqj','modules','setObjectNotExistsAsync','59\x2023\x20*\x20*\x20*','.uptime','@google/generative-ai','text','setStateAsync','energy','DAY','security','getForeignStateAsync','cleanupGhostInterventions','ready','setState','party','parse','moduleComfort','analysis.activity.roomHistory','min','Gemini\x20Report\x20Day','unload','useCalendar','344493sMNSEO','licenseKey','Live\x20Event\x20Pulse','inactivityThresholdHours','exitTimer','triggerInfrasoundCorrelation','getCalendarNames','analysis.automation.description','analysisHistory','Kein\x20API\x20Key\x20Ã¼bergeben.','shift','./lib/python_bridge','General\x20Activity\x20Trend','value','version','abortExitTimer','analysis.security.lastScore','triggerGaitAnalysis\x20error:\x20','memoryCache','saveDailyHistory','âœ…\x20History\x20saved:\x20','triggerBriefing','6jtyquF','analysis.training.triggerComfort','getDate','roomIntegratorTimer','executeAutomationAction','checkWifiPresence','exports','endsWith','length','\x20events\x20from\x20standard\x20storage.','getOverviewData',')\x20-\x20Phase\x20E\x20(Scheduler\x20Fix)','refreshCalendar','./lib/ai_agent','ltmJob','.last_seen','some','ðŸš¨\x20INFRASCHALL-ALARM:\x20Anomalie\x20bei\x20Abwesenheit\x20(scharf)!','Â°C)','NextHours.Location_1.Day_1.current.symbol_desc','bootTime','daswetter.0','systemConfig','setPresence','geminiModel','Scan\x20Error:\x20','Current.WeatherText','\x20(Threshold)','stopService','common','Verbindung\x20erfolgreich:\x20','toLocaleDateString','historyJob','string','manual','stateChange','TRAIN_SECURITY','sonn','infrasoundThreshold','temperature','onMessage','./lib/scheduler','ack','checkWifiPresence:\x20Error\x20checking\x20','protectAiMemory','ðŸ”Š\x20Infraschall:\x20','ðŸ“\x20Manual\x20event\x20logged:\x20','analysis.security.learningStatus','âœ…\x20Dashboard\x20Data\x20(Rooms\x20&\x20Timeline\x20&\x20Details)\x20restored.','name','utf8','integrateRoomTime','NORMAL','cancel','initSchedules','onReady','calendarCheckTimer','todayVector','sendNotification','Room\x20History\x20(24h\x20Buckets)','warn','find','ðŸ’¾\x20Saving\x20Daily\x20History\x20for\x20','error','guest','replayTodayEvents','sunny','history','geminiApiKey','analysis.automation.targetId','scheduleJob','command','mkdirSync','analysis.automation.targetValue','scanForDevices','{\x22today\x22:{},\x20\x22yesterday\x22:{},\x20\x22date\x22:\x22\x22}','{\x22history\x22:{}}','appendToLog','ðŸ\x20Triggering\x20Python\x20Health\x20Check\x20(Activity\x20Trend)...','isSolar','moduleHealth','round','toLocaleTimeString','activeModules','Lernphase\x20(','analyzeWindowOpening\x20error:\x20','models/gemini-flash-latest','now','subscribeForeignStates','analysis.visualization.pulse','debug','initHistory','apiKey','pop','values','pressureBuffer','analysis.training.triggerEnergy','namespace','number','getHistoryData','analysis.training.triggerHealth','presenceDevices','7543896LEbVZh','presenceCheckTimer','slice','\x20-\x20','enum','analysis.automation.patternDetected','moduleSecurity','Â°C,\x20AuÃŸen:\x20','python','LTM.baselineStatus','briefingJob','\x20(Bewohner\x20anwesend\x20-\x20normal)','eventHistory','./lib/topology','...','analysis.health.todayRoomDetails','system.adapter.ical.','fill','custom','sendTo','path','analysis.energy.warmupTimes','getAbsoluteDefaultDataDir','getGenerativeModel','Warte\x20auf\x20Analyse...','setDate','join','infrasoundLocked','callback','ðŸ”Š\x20FORENSIC:\x20Infraschall\x20bei\x20Abwesenheit!\x20Pressure:\x20','communicate.request','./lib/recorder','runPythonHealthCheck','date','genAI','system.presenceWho','generateHealthReport','map','info','heiter','threshold_exceeded','automation.triggerAction','filter','currentSystemMode','infrasoundSensorId','split','outdoorSensorId','455847SAHCNV','\x22history\x22:{}','./lib/setup','Corrupt','reduce','de-DE','triggerEnergyPrediction','search','location','config','door','getObjectViewAsync','node-schedule','weatherTempId','analysis.health.geminiDay','LTM.rawEventLog','timestamp','Warm-Up\x20Time','healthTrendInterval','analysis.trigger','checkThermostats','LTM.trainingData.sequences','analysis.health.geminiNight','bind','./lib/installer','analysis.prediction.trackerConfidence','452570OFBabq','analyzeWindowOpening','subscribeForeignStatesAsync','testApiKey','toISOString','SYSTEM_DP_MODE','\x20>\x20','121426wkMVCc','288477JhsBqW','createAllObjects','isPresent','Init...','VACATION','checkCalendarTriggers','sources','getHours'];a0_0x37aa=function(){return _0x1eb3b6;};return a0_0x37aa();}class CogniLiving extends utils['Adapter']{constructor(_0x465c2d){const _0x116ffa=a0_0x3cbf0e;super({..._0x465c2d,'name':'cogni-living'}),this['eventHistory']=[],this[_0x116ffa(0x20b)]=[],this[_0x116ffa(0x1a4)]=[],this[_0x116ffa(0x1d2)]=[],this['sensorLastValues']={},this[_0x116ffa(0x22f)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x116ffa(0x162)]=!![],this[_0x116ffa(0x207)]=null,this['exitGraceTimer']=null,this[_0x116ffa(0x1be)]=![],this['genAI']=null,this['geminiModel']=null,this[_0x116ffa(0x13a)]=setup['SYSTEM_MODES'][_0x116ffa(0x24d)],this['isProVersion']=![],this[_0x116ffa(0x194)]=![],this['analysisTimer']=null,this[_0x116ffa(0x251)]=null,this[_0x116ffa(0x280)]=null,this[_0x116ffa(0x227)]=null,this['modeResetJob']=null,this['driftAnalysisTimer']=null,this[_0x116ffa(0x289)]=null,this[_0x116ffa(0x239)]=null,this[_0x116ffa(0x1ae)]=null,this[_0x116ffa(0x150)]=null,this[_0x116ffa(0x21c)]=null,this[_0x116ffa(0x1b0)]=![],this['lastTrackerEventTime']=Date[_0x116ffa(0x270)](),this[_0x116ffa(0x215)]=null,this[_0x116ffa(0x22d)]=Date[_0x116ffa(0x270)](),this[_0x116ffa(0x29a)]=![],this[_0x116ffa(0x278)]=[],this[_0x116ffa(0x26c)]={'health':!![],'security':!![],'energy':!![],'comfort':!![]},this['on'](_0x116ffa(0x1f9),this[_0x116ffa(0x250)][_0x116ffa(0x155)](this)),this['on'](_0x116ffa(0x23c),this[_0x116ffa(0x18b)]['bind'](this)),this['on'](_0x116ffa(0x201),this[_0x116ffa(0x1e8)][_0x116ffa(0x155)](this)),this['on']('message',this[_0x116ffa(0x241)][_0x116ffa(0x155)](this));}async['onReady'](){const _0x2bd142=a0_0x3cbf0e;this[_0x2bd142(0x1d6)][_0x2bd142(0x135)]('cogni-living\x20adapter\x20starting\x20(v'+this[_0x2bd142(0x211)]+_0x2bd142(0x224));if(this[_0x2bd142(0x147)]['moduleHealth']!==undefined)this[_0x2bd142(0x26c)][_0x2bd142(0x1dc)]=this[_0x2bd142(0x147)][_0x2bd142(0x269)];if(this[_0x2bd142(0x147)][_0x2bd142(0x285)]!==undefined)this[_0x2bd142(0x26c)][_0x2bd142(0x1f6)]=this[_0x2bd142(0x147)]['moduleSecurity'];if(this[_0x2bd142(0x147)]['moduleEnergy']!==undefined)this[_0x2bd142(0x26c)][_0x2bd142(0x1f4)]=this['config'][_0x2bd142(0x1b3)];if(this[_0x2bd142(0x147)][_0x2bd142(0x1fd)]!==undefined)this['activeModules'][_0x2bd142(0x1b4)]=this[_0x2bd142(0x147)][_0x2bd142(0x1fd)];if(this['config'][_0x2bd142(0x1ed)])this[_0x2bd142(0x26c)]={...this[_0x2bd142(0x26c)],...this['config']['modules']};this[_0x2bd142(0x17e)]();}async['startSystem'](){const _0x422573=a0_0x3cbf0e;await setup[_0x422573(0x1a9)](this);try{this[_0x422573(0x16b)]=await setup['checkLicense'](this[_0x422573(0x147)][_0x422573(0x204)]);}catch(_0x5130a8){}if(!this[_0x422573(0x147)][_0x422573(0x206)]||this[_0x422573(0x147)][_0x422573(0x206)]<0.1)this[_0x422573(0x147)]['inactivityThresholdHours']=0xc;await setup[_0x422573(0x274)](this),await setup['initSystemConfig'](this);try{const _0xd70099=await this['getStateAsync'](_0x422573(0x294)),_0x599493=await this[_0x422573(0x18f)](_0x422573(0x195));_0xd70099&&_0xd70099[_0x422573(0x1b1)]&&_0x599493&&_0x599493[_0x422573(0x1b1)]&&(Date[_0x422573(0x270)]()-_0xd70099['ts']<0x4*0xe10*0x3e8&&(this[_0x422573(0x215)]={'times':JSON[_0x422573(0x1fc)](_0xd70099[_0x422573(0x1b1)]),'sources':JSON[_0x422573(0x1fc)](_0x599493['val'])}));}catch(_0x407532){}if(this[_0x422573(0x147)]['geminiApiKey'])try{this[_0x422573(0x131)]=new GoogleGenerativeAI(this[_0x422573(0x147)][_0x422573(0x25d)]),this[_0x422573(0x231)]=this[_0x422573(0x131)][_0x422573(0x296)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x422573(0x185)}});}catch(_0x22870e){this[_0x422573(0x1d6)][_0x422573(0x258)](_0x422573(0x1c4)+_0x22870e['message']);}await setup[_0x422573(0x161)](this),await this[_0x422573(0x170)](),schedulers[_0x422573(0x24f)](this),await this[_0x422573(0x1ee)](_0x422573(0x272),{'type':_0x422573(0x1c5),'common':{'name':_0x422573(0x205),'type':'number','role':'value','read':!![],'write':![]},'native':{}}),await this[_0x422573(0x1ee)](_0x422573(0x18e),{'type':_0x422573(0x1c5),'common':{'name':_0x422573(0x190),'type':_0x422573(0x23a),'role':_0x422573(0x16f),'read':!![],'write':![],'def':_0x422573(0x264)},'native':{}}),await this['setObjectNotExistsAsync'](_0x422573(0x1fe),{'type':_0x422573(0x1c5),'common':{'name':_0x422573(0x254),'type':_0x422573(0x23a),'role':'json','read':!![],'write':![],'def':_0x422573(0x265)},'native':{}}),await this[_0x422573(0x1ee)]('analysis.health.geminiNight',{'type':_0x422573(0x1c5),'common':{'name':_0x422573(0x16d),'type':_0x422573(0x23a),'role':_0x422573(0x1f2),'read':!![],'write':![],'def':_0x422573(0x297)},'native':{}}),await this['setObjectNotExistsAsync']('analysis.health.geminiDay',{'type':_0x422573(0x1c5),'common':{'name':_0x422573(0x200),'type':_0x422573(0x23a),'role':_0x422573(0x1f2),'read':!![],'write':![],'def':_0x422573(0x297)},'native':{}}),await this['setObjectNotExistsAsync'](_0x422573(0x17a),{'type':_0x422573(0x1c5),'common':{'name':_0x422573(0x18c),'type':_0x422573(0x23a),'role':_0x422573(0x16f),'read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x422573(0x1ee)](_0x422573(0x28e),{'type':_0x422573(0x1c5),'common':{'name':'Daily\x20Room\x20Details\x20(48x30min)','type':'string','role':_0x422573(0x16f),'read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x422573(0x1ee)]('analysis.health.activityTrend',{'type':_0x422573(0x1c5),'common':{'name':_0x422573(0x20f),'type':_0x422573(0x27b),'role':_0x422573(0x210),'unit':'%','read':!![],'write':![]},'native':{}}),await this[_0x422573(0x1ee)](_0x422573(0x294),{'type':'state','common':{'name':_0x422573(0x14f),'type':_0x422573(0x23a),'role':_0x422573(0x16f),'read':!![],'write':![]},'native':{}});try{const _0x4716d9=await this[_0x422573(0x18f)]('events.history');if(_0x4716d9&&_0x4716d9['val']){this[_0x422573(0x28b)]=JSON[_0x422573(0x1fc)](_0x4716d9[_0x422573(0x1b1)]);if(this[_0x422573(0x16b)]){const _0x15bcf0=await this[_0x422573(0x18f)](_0x422573(0x14d));if(_0x15bcf0&&_0x15bcf0[_0x422573(0x1b1)])this[_0x422573(0x1a4)]=JSON[_0x422573(0x1fc)](_0x15bcf0[_0x422573(0x1b1)]);}this['log'][_0x422573(0x135)]('ðŸ“¦\x20Restored\x20'+this[_0x422573(0x28b)][_0x422573(0x221)]+_0x422573(0x222));}}catch(_0x39912b){this[_0x422573(0x28b)]=[];}try{const _0x56131a=await this[_0x422573(0x18f)](_0x422573(0x173));if(_0x56131a&&_0x56131a['val'])this[_0x422573(0x1d2)]=JSON[_0x422573(0x1fc)](_0x56131a['val']);}catch(_0x5b9ad2){this[_0x422573(0x1d2)]=[];}const _0x22ebfd=this['dailyDigests'][_0x422573(0x221)]>=(this[_0x422573(0x147)][_0x422573(0x1c8)]||0x7)?'Aktiv\x20('+this[_0x422573(0x1d2)][_0x422573(0x221)]+_0x422573(0x1bf):_0x422573(0x26d)+this[_0x422573(0x1d2)][_0x422573(0x221)]+'/'+(this[_0x422573(0x147)][_0x422573(0x1c8)]||0x7)+')';await this['setStateAsync'](_0x422573(0x288),{'val':_0x22ebfd,'ack':!![]}),this[_0x422573(0x1cc)](_0x422573(0x151)),this[_0x422573(0x1cc)]('LTM.triggerDailyDigest'),this[_0x422573(0x1cc)](_0x422573(0x27d));this[_0x422573(0x147)][_0x422573(0x1a7)]&&this[_0x422573(0x147)]['infrasoundSensorId']&&this[_0x422573(0x26c)][_0x422573(0x1f6)]&&this[_0x422573(0x271)](this['config']['infrasoundSensorId']);const _0x33e71c=this[_0x422573(0x147)][_0x422573(0x1a1)];if(_0x33e71c)for(const _0x48ce12 of _0x33e71c){await this[_0x422573(0x15a)](_0x48ce12['id']);}const _0x20c46a=this[_0x422573(0x147)]['presenceDevices'];if(_0x20c46a)for(const _0x2b071d of _0x20c46a){await this[_0x422573(0x15a)](_0x2b071d);}const _0x27c386=require(_0x422573(0x14a));if(this['historyJob'])this[_0x422573(0x239)][_0x422573(0x24e)]();this[_0x422573(0x239)]=_0x27c386[_0x422573(0x25f)](_0x422573(0x1ef),()=>{const _0x24417b=_0x422573;this[_0x24417b(0x216)]();}),setTimeout(()=>this[_0x422573(0x25a)](),0x1388);if(this['roomIntegratorTimer'])clearInterval(this['roomIntegratorTimer']);this[_0x422573(0x24c)](),this[_0x422573(0x21c)]=setInterval(async()=>{const _0xecec1f=_0x422573;await this[_0xecec1f(0x24c)]();},0x3c*0x3e8);if(this[_0x422573(0x150)])clearInterval(this['healthTrendInterval']);this['healthTrendInterval']=setInterval(()=>{const _0x50eb82=_0x422573;this[_0x50eb82(0x16b)]&&this[_0x50eb82(0x26c)]['health']&&this['runPythonHealthCheck']();},0x4*0x3c*0x3c*0x3e8);if(this[_0x422573(0x1c2)])clearInterval(this[_0x422573(0x1c2)]);this[_0x422573(0x26c)][_0x422573(0x1f4)]&&(this['analysisTimer']=setInterval(()=>{const _0x2e17f4=_0x422573;this[_0x2e17f4(0x144)]();},0xf*0x3c*0x3e8),setTimeout(()=>this[_0x422573(0x144)](),0x2710));if(this['calendarCheckTimer'])clearInterval(this[_0x422573(0x251)]);this[_0x422573(0x147)][_0x422573(0x202)]&&this[_0x422573(0x26c)][_0x422573(0x1f4)]&&(this[_0x422573(0x251)]=setInterval(()=>{const _0x492a93=_0x422573;automation[_0x492a93(0x165)](this);},0x2*0x3c*0x3e8),setTimeout(()=>automation['checkCalendarTriggers'](this),0x3a98));if(this[_0x422573(0x280)])clearInterval(this[_0x422573(0x280)]);this['config'][_0x422573(0x27e)]&&this[_0x422573(0x147)][_0x422573(0x27e)][_0x422573(0x221)]>0x0&&(this[_0x422573(0x280)]=setInterval(async()=>{const _0xcf578a=_0x422573;await this[_0xcf578a(0x21e)]();},0x3c*0x3e8),setTimeout(async()=>await this[_0x422573(0x21e)](),0x1388));const _0x2c65c5=path[_0x422573(0x299)](__dirname,_0x422573(0x1e3),'bin',_0x422573(0x287));pythonBridge['startService'](this,_0x2c65c5);}[a0_0x3cbf0e(0x1e8)](_0x3a7858){const _0x8b21a6=a0_0x3cbf0e;if(this[_0x8b21a6(0x239)])this['historyJob']['cancel']();this['saveDailyHistory']()[_0x8b21a6(0x1eb)](()=>{const _0x11a043=_0x8b21a6;if(this['analysisTimer'])clearInterval(this[_0x11a043(0x1c2)]);if(this[_0x11a043(0x251)])clearInterval(this[_0x11a043(0x251)]);if(this['presenceCheckTimer'])clearInterval(this[_0x11a043(0x280)]);if(this[_0x11a043(0x21c)])clearInterval(this[_0x11a043(0x21c)]);recorder[_0x11a043(0x212)](this),pythonBridge[_0x11a043(0x235)](this),_0x3a7858();});}async[a0_0x3cbf0e(0x25a)](){const _0x562aed=a0_0x3cbf0e;if(!this[_0x562aed(0x28b)]||this['eventHistory'][_0x562aed(0x221)]===0x0){this[_0x562aed(0x1d6)]['warn']('âš \x20Replay\x20skipped:\x20No\x20events\x20in\x20memory.');return;}this['log']['info']('â†º\x20Replaying\x20'+this[_0x562aed(0x28b)][_0x562aed(0x221)]+_0x562aed(0x1e9));const _0x346e29=new Date()['setHours'](0x0,0x0,0x0,0x0),_0x2bd732=_0x562aed(0x1fe);let _0x5b9650={'history':{},'date':new Date()['toLocaleDateString']()};const _0x3e1978='analysis.health.todayVector',_0x50ff16=_0x562aed(0x28e);let _0x2b2062=new Array(0x30)['fill'](0x0),_0x342c17=Array[_0x562aed(0x1b8)]({'length':0x30},()=>[]);this[_0x562aed(0x28b)][_0x562aed(0x1a2)](_0x2945c7=>{const _0x4010c0=_0x562aed;if(_0x2945c7['timestamp']>=_0x346e29){if(recorder['isRelevantActivity'](_0x2945c7['type'],_0x2945c7['value'])){const _0x156568=new Date(_0x2945c7[_0x4010c0(0x14e)]),_0x8657b0=_0x156568[_0x4010c0(0x167)]()*0x2+(_0x156568['getMinutes']()>=0x1e?0x1:0x0);if(_0x8657b0<0x30){_0x2b2062[_0x8657b0]++;const _0x9112ed=_0x2945c7[_0x4010c0(0x146)]||_0x2945c7[_0x4010c0(0x24a)]||'?';let _0x3f7f6c=_0x342c17[_0x8657b0];!_0x3f7f6c['includes'](_0x9112ed)&&_0x3f7f6c[_0x4010c0(0x1cf)](_0x9112ed);}const _0x528990=_0x156568['getHours']();let _0x111e58=_0x2945c7[_0x4010c0(0x146)]||_0x4010c0(0x1d3);const _0x344df7=(this['config'][_0x4010c0(0x1a1)]||[])['find'](_0x1d8577=>_0x1d8577['location']===_0x111e58);if(_0x344df7)_0x111e58=_0x344df7['location'];if(!_0x5b9650[_0x4010c0(0x25c)][_0x111e58])_0x5b9650[_0x4010c0(0x25c)][_0x111e58]=new Array(0x18)['fill'](0x0);if(_0x5b9650[_0x4010c0(0x25c)][_0x111e58][_0x528990]<0x3c)_0x5b9650['history'][_0x111e58][_0x528990]++;}}});const _0x3d69c8=await this[_0x562aed(0x18f)](_0x2bd732);(!_0x3d69c8||!_0x3d69c8[_0x562aed(0x1b1)]||_0x3d69c8[_0x562aed(0x1b1)]==='{}'||_0x3d69c8[_0x562aed(0x1b1)]['includes'](_0x562aed(0x13f)))&&await this[_0x562aed(0x1f3)](_0x2bd732,{'val':JSON[_0x562aed(0x1d1)](_0x5b9650),'ack':!![]}),await this[_0x562aed(0x1f3)](_0x3e1978,{'val':JSON['stringify'](_0x2b2062),'ack':!![]}),await this[_0x562aed(0x1f3)](_0x50ff16,{'val':JSON[_0x562aed(0x1d1)](_0x342c17),'ack':!![]}),this[_0x562aed(0x1d6)][_0x562aed(0x135)](_0x562aed(0x249));}async[a0_0x3cbf0e(0x216)](){const _0x4b6033=a0_0x3cbf0e;if(!this[_0x4b6033(0x26c)][_0x4b6033(0x1dc)])return;const _0x3266db=new Date()['toISOString']()[_0x4b6033(0x13c)]('T')[0x0];this[_0x4b6033(0x1d6)][_0x4b6033(0x273)](_0x4b6033(0x257)+_0x3266db+_0x4b6033(0x28d));try{const [_0x1819d9,_0xf83763,_0x319736,_0xdad58b,_0xadfdce,_0x10d407]=await Promise[_0x4b6033(0x192)]([this[_0x4b6033(0x18f)](_0x4b6033(0x1fe)),this[_0x4b6033(0x18f)](_0x4b6033(0x154)),this['getStateAsync'](_0x4b6033(0x14c)),this['getStateAsync'](_0x4b6033(0x213)),this[_0x4b6033(0x18f)]('analysis.health.todayVector'),this['getStateAsync'](_0x4b6033(0x1cb))]),_0x4138a5=this[_0x4b6033(0x28b)]['filter'](_0x4d5451=>_0x4d5451[_0x4b6033(0x14e)]>=new Date()[_0x4b6033(0x199)](0x0,0x0,0x0,0x0)&&(_0x4d5451[_0x4b6033(0x24a)][_0x4b6033(0x176)]()[_0x4b6033(0x1cd)](_0x4b6033(0x19a))||_0x4d5451[_0x4b6033(0x24a)][_0x4b6033(0x176)]()[_0x4b6033(0x1cd)](_0x4b6033(0x1ca)))&&(_0x4d5451[_0x4b6033(0x210)]===!![]||_0x4d5451[_0x4b6033(0x210)]===_0x4b6033(0x1ac)))[_0x4b6033(0x221)];let _0x15decd=0x55;if(_0x10d407&&_0x10d407[_0x4b6033(0x1b1)]!==undefined)_0x15decd=Math[_0x4b6033(0x1ff)](0x64,Math[_0x4b6033(0x1a3)](0x14,Math[_0x4b6033(0x26a)](0x50+Number(_0x10d407[_0x4b6033(0x1b1)])*0x5)));const _0x201a68={'date':_0x3266db,'timestamp':Date['now'](),'roomHistory':_0x1819d9?.['val']?JSON[_0x4b6033(0x1fc)](_0x1819d9[_0x4b6033(0x1b1)]):{},'geminiNight':_0xf83763?.[_0x4b6033(0x1b1)]||_0x4b6033(0x1d0),'geminiDay':_0x319736?.[_0x4b6033(0x1b1)]||_0x4b6033(0x1d0),'anomalyScore':_0xdad58b?.['val']||0.1,'todayVector':_0xadfdce?.[_0x4b6033(0x1b1)]?JSON[_0x4b6033(0x1fc)](_0xadfdce[_0x4b6033(0x1b1)]):new Array(0x30)[_0x4b6033(0x290)](0x0),'batteryLevel':_0x15decd,'freshAirCount':_0x4138a5,'eventHistory':this[_0x4b6033(0x28b)]},_0x2a0979=utils[_0x4b6033(0x295)](),_0x468c11=path[_0x4b6033(0x299)](_0x2a0979,'cogni-living',_0x4b6033(0x25c));if(!fs[_0x4b6033(0x186)](_0x468c11))fs[_0x4b6033(0x261)](_0x468c11,{'recursive':!![]});const _0x19affb=path[_0x4b6033(0x299)](_0x468c11,_0x3266db+_0x4b6033(0x1c9));fs[_0x4b6033(0x1ce)](_0x19affb,JSON[_0x4b6033(0x1d1)](_0x201a68)),this[_0x4b6033(0x1d6)][_0x4b6033(0x135)](_0x4b6033(0x217)+_0x19affb);}catch(_0x25a6d9){this[_0x4b6033(0x1d6)]['error']('History\x20Save\x20Error:\x20'+_0x25a6d9[_0x4b6033(0x19f)]);}}async[a0_0x3cbf0e(0x24c)](){const _0x3c71ed=a0_0x3cbf0e;if(!this['isPresent'])return;try{let _0x38e96b=null;try{const _0x19f88f=await this[_0x3c71ed(0x18f)]('analysis.prediction.trackerTopRoom'),_0x25f45=await this[_0x3c71ed(0x18f)](_0x3c71ed(0x157));if(_0x19f88f&&_0x19f88f[_0x3c71ed(0x1b1)]&&_0x25f45&&_0x25f45[_0x3c71ed(0x1b1)]&&_0x25f45['val']>0.3){if(_0x19f88f[_0x3c71ed(0x1b1)]!==_0x3c71ed(0x1d3)&&_0x19f88f[_0x3c71ed(0x1b1)]!==_0x3c71ed(0x163))_0x38e96b=_0x19f88f[_0x3c71ed(0x1b1)];}}catch(_0x55d396){}if(!_0x38e96b){const _0x37bbc1=this[_0x3c71ed(0x147)][_0x3c71ed(0x1a1)]||[];for(const _0x2b0b45 of _0x37bbc1){if(_0x2b0b45[_0x3c71ed(0x1aa)]===_0x3c71ed(0x168)&&_0x2b0b45[_0x3c71ed(0x146)])try{const _0x58c0a3=await this['getForeignStateAsync'](_0x2b0b45['id']);if(_0x58c0a3&&(_0x58c0a3[_0x3c71ed(0x1b1)]===!![]||_0x58c0a3[_0x3c71ed(0x1b1)]==='on'||_0x58c0a3[_0x3c71ed(0x1b1)]===0x1)){_0x38e96b=_0x2b0b45[_0x3c71ed(0x146)];break;}}catch(_0x57565c){}}}if(!_0x38e96b)return;const _0x3bfba2=this[_0x3c71ed(0x147)]['devices']||[];let _0x5c89e9=_0x38e96b;const _0x1c7df8=_0x3bfba2['find'](_0x5c903d=>_0x5c903d['location']&&_0x5c903d[_0x3c71ed(0x146)][_0x3c71ed(0x176)]()===_0x38e96b[_0x3c71ed(0x176)]());if(_0x1c7df8)_0x5c89e9=_0x1c7df8['location'];const _0x4f82dc=_0x3c71ed(0x1fe),_0xa70839=await this['getStateAsync'](_0x4f82dc),_0x13632a=new Date()[_0x3c71ed(0x238)]();let _0x48323f={'history':{},'date':_0x13632a};if(_0xa70839&&_0xa70839[_0x3c71ed(0x1b1)])try{_0x48323f=JSON[_0x3c71ed(0x1fc)](_0xa70839[_0x3c71ed(0x1b1)]);}catch(_0x5209ca){}_0x48323f['date']!==_0x13632a&&(_0x48323f[_0x3c71ed(0x25c)]={},_0x48323f[_0x3c71ed(0x130)]=_0x13632a);if(!_0x48323f[_0x3c71ed(0x25c)][_0x5c89e9])_0x48323f[_0x3c71ed(0x25c)][_0x5c89e9]=new Array(0x18)[_0x3c71ed(0x290)](0x0);const _0x3fb617=new Date()['getHours']();if(_0x48323f[_0x3c71ed(0x25c)][_0x5c89e9][_0x3fb617]<0x3c)_0x48323f['history'][_0x5c89e9][_0x3fb617]++;await this['setStateAsync'](_0x4f82dc,{'val':JSON[_0x3c71ed(0x1d1)](_0x48323f),'ack':!![]});}catch(_0x3aa43e){this[_0x3c71ed(0x1d6)][_0x3c71ed(0x255)](_0x3c71ed(0x1b7)+_0x3aa43e['message']);}}async['onMessage'](_0x3f7185){const _0x258733=a0_0x3cbf0e;if(typeof _0x3f7185===_0x258733(0x1d5)&&_0x3f7185['message']){if(_0x3f7185[_0x258733(0x260)]===_0x258733(0x27c)){const _0x464805=_0x3f7185[_0x258733(0x19f)][_0x258733(0x130)],_0x58d5af=utils[_0x258733(0x295)](),_0x160218=path[_0x258733(0x299)](_0x58d5af,_0x258733(0x1c6),'history',_0x464805+_0x258733(0x1c9));if(fs[_0x258733(0x186)](_0x160218))try{const _0x5eb64e=JSON[_0x258733(0x1fc)](fs[_0x258733(0x175)](_0x160218,_0x258733(0x24b)));this[_0x258733(0x292)](_0x3f7185['from'],_0x3f7185[_0x258733(0x260)],{'success':!![],'data':_0x5eb64e},_0x3f7185['callback']);}catch(_0x58c75f){this[_0x258733(0x292)](_0x3f7185[_0x258733(0x1b8)],_0x3f7185['command'],{'success':![],'error':_0x258733(0x141)},_0x3f7185[_0x258733(0x29b)]);}else this[_0x258733(0x292)](_0x3f7185[_0x258733(0x1b8)],_0x3f7185['command'],{'success':![],'error':_0x258733(0x180)},_0x3f7185[_0x258733(0x29b)]);}else{if(_0x3f7185[_0x258733(0x260)]===_0x258733(0x223)){const _0x35b06a=this[_0x258733(0x1d2)][_0x258733(0x221)];let _0x5b3ccb=new Array(0x30)[_0x258733(0x290)](0x0),_0xd7b826=Array['from']({'length':0x30},()=>[]);try{const _0x5c053d=await this[_0x258733(0x18f)](_0x258733(0x17a));if(_0x5c053d&&_0x5c053d[_0x258733(0x1b1)])_0x5b3ccb=JSON[_0x258733(0x1fc)](_0x5c053d[_0x258733(0x1b1)]);const _0x2996d8=await this[_0x258733(0x18f)]('analysis.health.todayRoomDetails');if(_0x2996d8&&_0x2996d8[_0x258733(0x1b1)])_0xd7b826=JSON[_0x258733(0x1fc)](_0x2996d8[_0x258733(0x1b1)]);}catch(_0x589e03){}let _0x16d3ae=new Array(0x30)[_0x258733(0x290)](0x0);try{const _0x3867bf=new Date();_0x3867bf[_0x258733(0x298)](_0x3867bf[_0x258733(0x21b)]()-0x1);const _0x57c85e=_0x3867bf[_0x258733(0x15c)]()[_0x258733(0x13c)]('T')[0x0],_0x42a944=utils['getAbsoluteDefaultDataDir'](),_0x13e052=path[_0x258733(0x299)](_0x42a944,'cogni-living',_0x258733(0x25c),_0x57c85e+_0x258733(0x1c9));if(fs[_0x258733(0x186)](_0x13e052)){const _0x252765=JSON[_0x258733(0x1fc)](fs[_0x258733(0x175)](_0x13e052,_0x258733(0x24b)));if(_0x252765&&_0x252765[_0x258733(0x252)])_0x16d3ae=_0x252765[_0x258733(0x252)];}}catch(_0xb1bac8){}let _0x1e4d72={'today':{},'yesterday':{}};try{const _0x59e2e2=await this['getStateAsync']('analysis.activity.roomStats');if(_0x59e2e2&&_0x59e2e2[_0x258733(0x1b1)])_0x1e4d72=JSON[_0x258733(0x1fc)](_0x59e2e2[_0x258733(0x1b1)]);}catch(_0x3625a9){}let _0x5bb362=null;try{const _0x5e451f=await this[_0x258733(0x18f)](_0x258733(0x1cb));if(_0x5e451f)_0x5bb362=_0x5e451f['val'];}catch(_0x3dab20){}if(_0x5bb362===undefined||_0x5bb362===null){const _0x339c86=_0x5b3ccb[_0x258733(0x142)]((_0x5538d7,_0x442e2e)=>_0x5538d7+_0x442e2e,0x0),_0x23c26b=Math[_0x258733(0x1ff)](0x2,Math[_0x258733(0x1a3)](-0x2,(0x64-_0x339c86)/0x32));_0x5bb362=_0x23c26b;}let _0x5022ae=![],_0x1023d7='',_0x3b6a38='',_0x40a4de='';try{const _0x5be5e0=await this[_0x258733(0x18f)](_0x258733(0x284));if(_0x5be5e0&&_0x5be5e0['val']){_0x5022ae=!![];const _0x2d354b=await this[_0x258733(0x18f)](_0x258733(0x20a));_0x1023d7=_0x2d354b?_0x2d354b[_0x258733(0x1b1)]:'';const _0x422a3e=await this[_0x258733(0x18f)](_0x258733(0x25e));_0x3b6a38=_0x422a3e?_0x422a3e['val']:'';const _0x577327=await this[_0x258733(0x18f)](_0x258733(0x262));_0x40a4de=_0x577327?_0x577327['val']:'';}}catch(_0xc8dc38){}const _0x30630d=await this[_0x258733(0x1bc)](),_0xacca4b=(this[_0x258733(0x147)]['devices']||[])[_0x258733(0x229)](_0x106414=>_0x106414[_0x258733(0x268)]),_0x1b4e5f=_0x30630d&&_0xacca4b;let _0x4a884f='';try{const _0x448948=await this[_0x258733(0x18f)]('system.presenceWho');if(_0x448948&&_0x448948[_0x258733(0x1b1)])_0x4a884f=_0x448948['val'];}catch(_0x123d7a){}this[_0x258733(0x292)](_0x3f7185[_0x258733(0x1b8)],_0x3f7185['command'],{'success':!![],'eventHistory':this[_0x258733(0x28b)][_0x258733(0x281)](0x0,0x7d0),'stats':{'digestCount':_0x35b06a,'isPresent':this[_0x258733(0x162)],'hourlyActivity':_0x5b3ccb,'hourlyDetails':_0xd7b826,'yesterdayActivity':_0x16d3ae,'solarActive':_0x1b4e5f,'presenceWho':_0x4a884f,'roomStats':_0x1e4d72,'activityTrend':_0x5bb362,'modules':this[_0x258733(0x26c)]},'automation':{'detected':_0x5022ae,'description':_0x1023d7,'targetId':_0x3b6a38,'targetValue':_0x40a4de}},_0x3f7185[_0x258733(0x29b)]);}else{if(_0x3f7185['command']===_0x258733(0x152))try{const _0x5adee3=await automation[_0x258733(0x16e)](this);this[_0x258733(0x292)](_0x3f7185['from'],_0x3f7185['command'],{'success':!![],'results':_0x5adee3},_0x3f7185[_0x258733(0x29b)]);}catch(_0x185744){this[_0x258733(0x292)](_0x3f7185['from'],_0x3f7185['command'],{'success':![],'error':_0x185744[_0x258733(0x19f)]},_0x3f7185[_0x258733(0x29b)]);}else{if(_0x3f7185[_0x258733(0x260)]===_0x258733(0x1b5))try{const _0x16aace=await scanner[_0x258733(0x263)](this,_0x3f7185[_0x258733(0x19f)]||{});this['sendTo'](_0x3f7185[_0x258733(0x1b8)],_0x3f7185[_0x258733(0x260)],{'success':!![],'devices':_0x16aace},_0x3f7185[_0x258733(0x29b)]);}catch(_0x4a1237){}else{if(_0x3f7185[_0x258733(0x260)]==='getEnums'){const _0x453042=await this['getForeignObjectsAsync'](_0x258733(0x19e),_0x258733(0x283)),_0x33b59b=[];if(_0x453042)for(const _0x2d0bb6 in _0x453042){let _0x3dfba6=_0x453042[_0x2d0bb6][_0x258733(0x236)]['name'];if(_0x3dfba6&&typeof _0x3dfba6===_0x258733(0x1d5))_0x3dfba6=_0x3dfba6['de']||_0x3dfba6['en']||Object[_0x258733(0x277)](_0x3dfba6)[0x0]||JSON[_0x258733(0x1d1)](_0x3dfba6);_0x33b59b[_0x258733(0x1cf)]({'id':_0x2d0bb6,'name':String(_0x3dfba6||_0x2d0bb6)});}const _0x20f335=await this[_0x258733(0x1e5)]('enum.rooms.*',_0x258733(0x283)),_0x1d44fa=[];if(_0x20f335)for(const _0x248f22 in _0x20f335){let _0x51c903=_0x20f335[_0x248f22][_0x258733(0x236)][_0x258733(0x24a)];if(_0x51c903&&typeof _0x51c903===_0x258733(0x1d5))_0x51c903=_0x51c903['de']||_0x51c903['en']||Object['values'](_0x51c903)[0x0]||JSON['stringify'](_0x51c903);_0x1d44fa[_0x258733(0x1cf)](String(_0x51c903||_0x248f22[_0x258733(0x13c)]('.')[_0x258733(0x276)]()));}this[_0x258733(0x292)](_0x3f7185[_0x258733(0x1b8)],_0x3f7185[_0x258733(0x260)],{'success':!![],'enums':_0x33b59b,'rooms':_0x1d44fa},_0x3f7185[_0x258733(0x29b)]);}else{if(_0x3f7185['command']===_0x258733(0x209))try{const _0x4821d1=await this[_0x258733(0x149)](_0x258733(0x172),'instance',{'startkey':_0x258733(0x28f),'endkey':'system.adapter.ical.é¦™'}),_0x5f52b2=new Set();if(_0x4821d1&&_0x4821d1[_0x258733(0x1db)])for(const _0x1886b2 of _0x4821d1[_0x258733(0x1db)]){const _0x587448=_0x1886b2['id']['replace']('system.adapter.',''),_0x363790=await this[_0x258733(0x1f7)](_0x587448+_0x258733(0x18a));let _0x5dc4b9=![];if(_0x363790&&_0x363790[_0x258733(0x1b1)]){const _0x217a62=typeof _0x363790[_0x258733(0x1b1)]===_0x258733(0x23a)?JSON[_0x258733(0x1fc)](_0x363790[_0x258733(0x1b1)]):_0x363790['val'];Array['isArray'](_0x217a62)&&_0x217a62[_0x258733(0x1a2)](_0x371f79=>{const _0x4684f0=_0x258733;_0x371f79[_0x4684f0(0x17c)]&&(_0x5f52b2['add'](_0x371f79[_0x4684f0(0x17c)]),_0x5dc4b9=!![]);});}!_0x5dc4b9&&_0x5f52b2[_0x258733(0x1df)](_0x587448);}const _0x237077=Array[_0x258733(0x1b8)](_0x5f52b2);if(_0x237077[_0x258733(0x221)]===0x0)_0x237077[_0x258733(0x1cf)](_0x258733(0x1c7));this[_0x258733(0x292)](_0x3f7185['from'],_0x3f7185['command'],{'success':!![],'names':_0x237077},_0x3f7185[_0x258733(0x29b)]);}catch(_0x4a4ebd){this[_0x258733(0x292)](_0x3f7185[_0x258733(0x1b8)],_0x3f7185[_0x258733(0x260)],{'success':![],'error':_0x258733(0x232)+_0x4a4ebd['message']},_0x3f7185[_0x258733(0x29b)]);}else{if(_0x3f7185[_0x258733(0x260)]===_0x258733(0x225))try{await automation[_0x258733(0x1e4)](this),this[_0x258733(0x292)](_0x3f7185['from'],_0x3f7185[_0x258733(0x260)],{'success':!![]},_0x3f7185[_0x258733(0x29b)]);}catch(_0x17261c){this[_0x258733(0x1d6)]['warn'](_0x258733(0x1b6)+_0x17261c[_0x258733(0x19f)]),this[_0x258733(0x292)](_0x3f7185['from'],_0x3f7185[_0x258733(0x260)],{'success':![],'error':_0x17261c[_0x258733(0x19f)]},_0x3f7185[_0x258733(0x29b)]);}else{if(_0x3f7185[_0x258733(0x260)]===_0x258733(0x15b))try{const _0xad6255=_0x3f7185[_0x258733(0x19f)]?_0x3f7185[_0x258733(0x19f)][_0x258733(0x275)]:'';if(!_0xad6255)throw new Error(_0x258733(0x20c));const _0x2011d7=new GoogleGenerativeAI(_0xad6255),_0x27c590=_0x2011d7['getGenerativeModel']({'model':GEMINI_MODEL}),_0x59ba3a=await _0x27c590['generateContent']('Say\x20Hello'),_0x3dd932=await _0x59ba3a['response'],_0x48a4e0=_0x3dd932[_0x258733(0x1f2)]();this[_0x258733(0x292)](_0x3f7185[_0x258733(0x1b8)],_0x3f7185[_0x258733(0x260)],{'success':!![],'message':_0x258733(0x237)+_0x48a4e0[_0x258733(0x1dd)](0x0,0x14)+_0x258733(0x28d)},_0x3f7185[_0x258733(0x29b)]);}catch(_0x357560){this['sendTo'](_0x3f7185[_0x258733(0x1b8)],_0x3f7185['command'],{'success':![],'message':_0x357560[_0x258733(0x19f)]},_0x3f7185[_0x258733(0x29b)]);}else{if(_0x3f7185[_0x258733(0x260)]==='testContext')try{const _0x1b5a37=await this[_0x258733(0x1bc)](),_0x4d1a49=await this[_0x258733(0x149)]('system',_0x258733(0x1b9),{'startkey':_0x258733(0x28f),'endkey':'system.adapter.ical.é¦™'}),_0x548430=_0x4d1a49&&_0x4d1a49['rows']?_0x4d1a49[_0x258733(0x1db)][_0x258733(0x221)]:0x0;this[_0x258733(0x292)](_0x3f7185['from'],_0x3f7185['command'],{'success':!![],'weather':_0x258733(0x197)+_0x1b5a37+_0x258733(0x18d)+(this['sensorLastValues'][this[_0x258733(0x147)][_0x258733(0x13d)]]||'?')+'Â°C','calendar':_0x548430+_0x258733(0x1de)},_0x3f7185[_0x258733(0x29b)]);}catch(_0x39266d){this[_0x258733(0x292)](_0x3f7185['from'],_0x3f7185[_0x258733(0x260)],{'success':![]},_0x3f7185[_0x258733(0x29b)]);}}}}}}}}}}}[a0_0x3cbf0e(0x12f)](){const _0x21f619=a0_0x3cbf0e;if(!this[_0x21f619(0x26c)][_0x21f619(0x1dc)])return;this[_0x21f619(0x1d6)][_0x21f619(0x273)](_0x21f619(0x267));try{const _0x25b710=this[_0x21f619(0x1a4)]||[];pythonBridge[_0x21f619(0x188)](this,_0x21f619(0x1e6),{'events':_0x25b710});}catch(_0x10a33e){this['log'][_0x21f619(0x255)]('Failed\x20to\x20trigger\x20Python\x20Health\x20Check');}}async[a0_0x3cbf0e(0x18b)](_0x304cde,_0x300c00){const _0x270b17=a0_0x3cbf0e;if(!_0x300c00||this['dependencyInstallInProgress'])return;if(_0x304cde['includes']('telegram')&&_0x304cde['endsWith'](_0x270b17(0x12d))&&_0x300c00[_0x270b17(0x1b1)])return;if(this[_0x270b17(0x147)][_0x270b17(0x1a7)]&&_0x304cde===this['config'][_0x270b17(0x13b)]&&this['activeModules'][_0x270b17(0x1f6)]){this[_0x270b17(0x178)](_0x300c00[_0x270b17(0x1b1)]);return;}if(_0x300c00[_0x270b17(0x243)]&&_0x304cde[_0x270b17(0x220)](_0x270b17(0x181)))return;if(_0x304cde===this[_0x270b17(0x27a)]+_0x270b17(0x16c)){if(_0x300c00[_0x270b17(0x1b1)]&&Object[_0x270b17(0x277)](setup[_0x270b17(0x177)])[_0x270b17(0x1cd)](_0x300c00[_0x270b17(0x1b1)])){this['currentSystemMode']=_0x300c00[_0x270b17(0x1b1)];if(_0x300c00[_0x270b17(0x1b1)]===setup[_0x270b17(0x177)][_0x270b17(0x164)])await recorder[_0x270b17(0x230)](this,![]);else await recorder[_0x270b17(0x230)](this,!![]);if(this[_0x270b17(0x16b)]){let _0x8479da=![],_0x1c4d90=0x0,_0x427147=_0x270b17(0x23b);if(this[_0x270b17(0x13a)]===_0x270b17(0x1fb))_0x8479da=!![],_0x1c4d90=0x168,_0x427147=_0x270b17(0x1a8);else this[_0x270b17(0x13a)]===_0x270b17(0x259)&&(_0x8479da=!![],_0x1c4d90=0x5a0,_0x427147=_0x270b17(0x1d4));pythonBridge[_0x270b17(0x188)](this,'SET_LEARNING_MODE',{'active':_0x8479da,'duration':_0x1c4d90,'label':_0x427147}),await this[_0x270b17(0x1f3)](_0x270b17(0x248),{'val':JSON['stringify']({'active':_0x8479da,'label':_0x427147,'timestamp':Date[_0x270b17(0x270)]()}),'ack':!![]});}}if(!_0x300c00[_0x270b17(0x243)])this['setState'](_0x304cde,{'val':this['currentSystemMode'],'ack':!![]});return;}if(_0x304cde[_0x270b17(0x220)](_0x270b17(0x195))&&_0x300c00[_0x270b17(0x243)])this[_0x270b17(0x245)](_0x300c00[_0x270b17(0x1b1)]);if(_0x304cde['endsWith'](_0x270b17(0x294))&&_0x300c00['ack']&&this[_0x270b17(0x26c)][_0x270b17(0x1f4)])automation[_0x270b17(0x165)](this);if(!_0x300c00[_0x270b17(0x243)]){if(_0x304cde[_0x270b17(0x1cd)](_0x270b17(0x151))&&_0x300c00['val']){this[_0x270b17(0x1fa)](_0x304cde,{'val':![],'ack':!![]}),aiAgent[_0x270b17(0x1e7)](this);return;}if(_0x304cde['includes']('triggerDailyDigest')&&_0x300c00[_0x270b17(0x1b1)]){this[_0x270b17(0x1fa)](_0x304cde,{'val':![],'ack':!![]});if(this[_0x270b17(0x16b)])aiAgent['createDailyDigest'](this,pythonBridge);return;}if(_0x304cde[_0x270b17(0x1cd)](_0x270b17(0x218))&&_0x300c00[_0x270b17(0x1b1)]){this[_0x270b17(0x1fa)](_0x304cde,{'val':![],'ack':!![]}),aiAgent[_0x270b17(0x193)](this);return;}if(_0x304cde[_0x270b17(0x1cd)](_0x270b17(0x138))&&_0x300c00[_0x270b17(0x1b1)]){this[_0x270b17(0x1fa)](_0x304cde,{'val':![],'ack':!![]}),aiAgent[_0x270b17(0x21d)](this);return;}if(_0x304cde[_0x270b17(0x1cd)]('analysis.training.triggerSecurity')&&_0x300c00[_0x270b17(0x1b1)]){this['setState'](_0x304cde,{'val':![],'ack':!![]});if(this[_0x270b17(0x16b)])try{const _0x392d77=await this[_0x270b17(0x18f)]('LTM.trainingData.sequences');if(_0x392d77&&_0x392d77[_0x270b17(0x1b1)]){const _0x3ef706=JSON[_0x270b17(0x1fc)](_0x392d77[_0x270b17(0x1b1)]);this[_0x270b17(0x1f3)](_0x270b17(0x1e0),{'val':'Sec-Training\x20started...','ack':!![]}),pythonBridge[_0x270b17(0x188)](this,_0x270b17(0x23d),{'sequences':_0x3ef706});}}catch(_0x50c39f){}return;}if(_0x304cde[_0x270b17(0x1cd)](_0x270b17(0x27d))&&_0x300c00[_0x270b17(0x1b1)]){this[_0x270b17(0x1fa)](_0x304cde,{'val':![],'ack':!![]});try{aiAgent['generateHealthReport'](this,'NIGHT'),setTimeout(()=>aiAgent[_0x270b17(0x133)](this,_0x270b17(0x1f5)),0x2ee0);if(this['isProVersion']){this[_0x270b17(0x12f)]();const _0x1b87e8=await this[_0x270b17(0x18f)]('LTM.dailyDigests');if(_0x1b87e8&&_0x1b87e8[_0x270b17(0x1b1)])pythonBridge[_0x270b17(0x188)](this,'TRAIN_HEALTH',{'digests':JSON[_0x270b17(0x1fc)](_0x1b87e8['val'])});}}catch(_0x4b0c99){this[_0x270b17(0x1d6)][_0x270b17(0x255)](_0x270b17(0x1bb)+_0x4b0c99[_0x270b17(0x19f)]);}return;}if(_0x304cde['includes'](_0x270b17(0x279))&&_0x300c00[_0x270b17(0x1b1)]){this[_0x270b17(0x1fa)](_0x304cde,{'val':![],'ack':!![]}),await this[_0x270b17(0x144)]();return;}if(_0x304cde[_0x270b17(0x1cd)](_0x270b17(0x21a))&&_0x300c00[_0x270b17(0x1b1)]){this[_0x270b17(0x1fa)](_0x304cde,{'val':![],'ack':!![]});if(this[_0x270b17(0x16b)])try{const _0x5c09ed=await this[_0x270b17(0x18f)]('LTM.rawEventLog');if(_0x5c09ed&&_0x5c09ed[_0x270b17(0x1b1)]){const _0x46c708={};if(this[_0x270b17(0x147)]['devices'])this[_0x270b17(0x147)][_0x270b17(0x1a1)]['forEach'](_0x57fa40=>{const _0x4f7713=_0x270b17;if(_0x57fa40['id']&&_0x57fa40['type'])_0x46c708[_0x57fa40['id']]=_0x57fa40[_0x4f7713(0x1aa)];});pythonBridge[_0x270b17(0x188)](this,_0x270b17(0x1d8),{'events':JSON[_0x270b17(0x1fc)](_0x5c09ed['val']),'deviceMap':_0x46c708});}}catch(_0x4166ad){}return;}if(_0x304cde[_0x270b17(0x1cd)]('analysis.training.triggerTopology')&&_0x300c00[_0x270b17(0x1b1)]){this[_0x270b17(0x1fa)](_0x304cde,{'val':![],'ack':!![]}),topology['updateTopology'](this);if(this[_0x270b17(0x16b)])try{const _0x195756=await this[_0x270b17(0x18f)](_0x270b17(0x153));if(_0x195756&&_0x195756['val'])pythonBridge[_0x270b17(0x188)](this,'TRAIN_TOPOLOGY',{'sequences':JSON['parse'](_0x195756[_0x270b17(0x1b1)])});}catch(_0x282f30){}return;}}const _0x115a35=(this[_0x270b17(0x147)][_0x270b17(0x1a1)]||[])[_0x270b17(0x256)](_0xfd58ad=>_0xfd58ad['id']===_0x304cde);if(_0x115a35){const _0x3492fa=await recorder[_0x270b17(0x1a0)](this,_0x304cde,_0x300c00,_0x115a35);_0x3492fa&&this[_0x270b17(0x1fa)]('analysis.visualization.pulse',{'val':Date[_0x270b17(0x270)](),'ack':!![]});_0x3492fa&&_0x3492fa[_0x270b17(0x1aa)]===_0x270b17(0x168)&&_0x3492fa[_0x270b17(0x146)]&&this[_0x270b17(0x16b)]&&deadMan['updateLocation'](this,_0x3492fa[_0x270b17(0x146)]);_0x300c00[_0x270b17(0x1b1)]&&(_0x300c00[_0x270b17(0x1b1)]===!![]||_0x300c00[_0x270b17(0x1b1)]===0x1||String(_0x300c00['val'])[_0x270b17(0x176)]()===_0x270b17(0x1ac))&&(_0x115a35[_0x270b17(0x1aa)]&&(_0x115a35[_0x270b17(0x1aa)][_0x270b17(0x1cd)](_0x270b17(0x184))||_0x115a35[_0x270b17(0x1aa)][_0x270b17(0x1cd)](_0x270b17(0x148)))&&this[_0x270b17(0x159)](_0x115a35));if(_0x115a35[_0x270b17(0x1aa)]===_0x270b17(0x240)||_0x115a35[_0x270b17(0x1aa)]===_0x270b17(0x1ad)){if(this['activeModules'][_0x270b17(0x1f4)])automation[_0x270b17(0x1f8)](this);}}}async[a0_0x3cbf0e(0x245)](_0x3842e1){const _0x5a93a8=a0_0x3cbf0e;if(!this[_0x5a93a8(0x215)]||Date[_0x5a93a8(0x270)]()-this[_0x5a93a8(0x22d)]>0x493e0)return;try{const _0x1eab05=JSON[_0x5a93a8(0x1fc)](_0x3842e1),_0x13ef0d=this[_0x5a93a8(0x215)][_0x5a93a8(0x166)];let _0xf7aeda=![];for(const _0x570487 in _0x13ef0d){if(_0x13ef0d[_0x570487][_0x5a93a8(0x1cd)]('AI')&&_0x1eab05[_0x570487]&&!_0x1eab05[_0x570487][_0x5a93a8(0x1cd)]('AI')){_0xf7aeda=!![];break;}}_0xf7aeda&&(await this[_0x5a93a8(0x1f3)](_0x5a93a8(0x294),{'val':JSON[_0x5a93a8(0x1d1)](this[_0x5a93a8(0x215)][_0x5a93a8(0x1e2)]),'ack':!![]}),await this[_0x5a93a8(0x1f3)](_0x5a93a8(0x195),{'val':JSON['stringify'](this[_0x5a93a8(0x215)]['sources']),'ack':!![]}));}catch(_0x507e20){}}async[a0_0x3cbf0e(0x170)](){const _0x22dbe0=a0_0x3cbf0e;try{const _0x53c7a5=await this[_0x22dbe0(0x18f)](setup[_0x22dbe0(0x15d)]);if(_0x53c7a5&&_0x53c7a5[_0x22dbe0(0x1b1)])this[_0x22dbe0(0x13a)]=_0x53c7a5[_0x22dbe0(0x1b1)];}catch(_0x333374){this[_0x22dbe0(0x13a)]=setup[_0x22dbe0(0x177)][_0x22dbe0(0x24d)];}}async[a0_0x3cbf0e(0x21e)](){const _0x24f059=a0_0x3cbf0e,_0x2e537d=this['config'][_0x24f059(0x27e)]||[];if(_0x2e537d[_0x24f059(0x221)]===0x0)return![];const _0x436235=[],_0x587da8=Date[_0x24f059(0x270)](),_0x4bafec=0x5*0x3c*0x3e8;for(const _0x1aca12 of _0x2e537d){try{let _0x178a81=![];try{const _0x3bcf43=await this[_0x24f059(0x1f7)](_0x1aca12+_0x24f059(0x1bd));if(_0x3bcf43&&_0x3bcf43[_0x24f059(0x1b1)]===!![])_0x178a81=!![];}catch(_0xdd5981){}if(!_0x178a81)try{const _0x1a0797=await this[_0x24f059(0x1f7)](_0x1aca12+_0x24f059(0x228));if(_0x1a0797&&_0x1a0797['ts']){const _0x31ca96=_0x587da8-_0x1a0797['ts'];if(_0x31ca96<_0x4bafec)_0x178a81=!![];}}catch(_0x1e750c){}if(!_0x178a81)try{const _0x3474c6=await this['getForeignStateAsync'](_0x1aca12+_0x24f059(0x1f0));if(_0x3474c6&&typeof _0x3474c6[_0x24f059(0x1b1)]==='number'&&_0x3474c6[_0x24f059(0x1b1)]>0x0)_0x178a81=!![];}catch(_0x1fbead){}if(!_0x178a81)try{const _0x2a45bd=await this[_0x24f059(0x1f7)](_0x1aca12);if(_0x2a45bd){const _0x50fe38=_0x587da8-(_0x2a45bd['ts']||0x0);_0x50fe38<_0x4bafec&&(_0x2a45bd[_0x24f059(0x1b1)]===!![]||_0x2a45bd['val']===_0x24f059(0x179)||_0x2a45bd[_0x24f059(0x1b1)]===0x1)&&(_0x178a81=!![]);}}catch(_0x46262e){}if(_0x178a81){const _0x3840b4=_0x1aca12[_0x24f059(0x13c)]('.'),_0x9497c6=_0x3840b4[_0x3840b4[_0x24f059(0x221)]-0x1]||_0x1aca12;_0x436235[_0x24f059(0x1cf)](_0x9497c6);}}catch(_0x4618ad){this[_0x24f059(0x1d6)][_0x24f059(0x255)](_0x24f059(0x244)+_0x1aca12+':\x20'+_0x4618ad[_0x24f059(0x19f)]);}}const _0x9894a0=_0x436235[_0x24f059(0x221)]>0x0?_0x436235[_0x24f059(0x299)](',\x20'):'Niemand';return await this[_0x24f059(0x1f3)](_0x24f059(0x132),{'val':_0x9894a0,'ack':!![]}),_0x436235[_0x24f059(0x221)]>0x0;}async[a0_0x3cbf0e(0x196)](){const _0x17dae1=a0_0x3cbf0e;await aiAgent[_0x17dae1(0x1e7)](this);this[_0x17dae1(0x26c)][_0x17dae1(0x1dc)]&&(this[_0x17dae1(0x189)](),this[_0x17dae1(0x1ba)]());if(this[_0x17dae1(0x26c)][_0x17dae1(0x1f4)])this[_0x17dae1(0x144)]();}async[a0_0x3cbf0e(0x1bc)](){const _0x625c9f=a0_0x3cbf0e,_0x4974f5=['weatherunderground.0','accuweather.0',_0x625c9f(0x22e)],_0x5d5914=['forecast.current.weather',_0x625c9f(0x233),_0x625c9f(0x22c)];for(const _0x363e4d of _0x4974f5){for(const _0x2ac848 of _0x5d5914){try{const _0x52a047=_0x363e4d+'.'+_0x2ac848,_0x15bd7f=await this[_0x625c9f(0x1f7)](_0x52a047);if(_0x15bd7f&&_0x15bd7f[_0x625c9f(0x1b1)]){const _0x1eef81=String(_0x15bd7f[_0x625c9f(0x1b1)])[_0x625c9f(0x176)]();if(_0x1eef81[_0x625c9f(0x1cd)](_0x625c9f(0x25b))||_0x1eef81[_0x625c9f(0x1cd)](_0x625c9f(0x136))||_0x1eef81[_0x625c9f(0x1cd)](_0x625c9f(0x1b2))||_0x1eef81[_0x625c9f(0x1cd)](_0x625c9f(0x23e))||_0x1eef81[_0x625c9f(0x1cd)]('clear'))return this[_0x625c9f(0x1d6)]['debug']('â˜€ï¸\x20Solar\x20Condition:\x20SUNNY\x20detected\x20via\x20'+_0x52a047),!![];}}catch(_0x505368){}}}return![];}[a0_0x3cbf0e(0x1ba)](){const _0xebe23d=a0_0x3cbf0e;if(!this[_0xebe23d(0x16b)])return;try{this[_0xebe23d(0x18f)](_0xebe23d(0x153),(_0x410425,_0x33d640)=>{const _0x415834=_0xebe23d;if(_0x410425||!_0x33d640||!_0x33d640[_0x415834(0x1b1)])return;try{const _0x1f770b=JSON['parse'](_0x33d640[_0x415834(0x1b1)]);if(!_0x1f770b||_0x1f770b['length']===0x0)return;pythonBridge[_0x415834(0x188)](this,'ANALYZE_GAIT',{'sequences':_0x1f770b}),this['log'][_0x415834(0x273)]('ðŸš¶\x20Gait\x20Analysis\x20triggered\x20with\x20'+_0x1f770b[_0x415834(0x221)]+_0x415834(0x198));}catch(_0x2ae0b6){this['log']['warn'](_0x415834(0x16a)+_0x2ae0b6['message']);}});}catch(_0x2c2683){this[_0xebe23d(0x1d6)][_0xebe23d(0x255)](_0xebe23d(0x214)+_0x2c2683[_0xebe23d(0x19f)]);}}async[a0_0x3cbf0e(0x144)](){const _0x32fb20=a0_0x3cbf0e;if(!this[_0x32fb20(0x16b)]||!this['activeModules']['energy'])return;try{const _0x4602ce={},_0x79aaff={},_0x40255f=this[_0x32fb20(0x147)][_0x32fb20(0x1a1)]||[];for(const _0x21d50a of _0x40255f){if((_0x21d50a['type']==='temperature'||_0x21d50a[_0x32fb20(0x1aa)]===_0x32fb20(0x1ad))&&_0x21d50a[_0x32fb20(0x146)])try{const _0x207772=await this[_0x32fb20(0x1f7)](_0x21d50a['id']);_0x207772&&typeof _0x207772[_0x32fb20(0x1b1)]==='number'&&(_0x4602ce[_0x21d50a[_0x32fb20(0x146)]]=_0x207772[_0x32fb20(0x1b1)],_0x79aaff[_0x21d50a[_0x32fb20(0x146)]]=_0x21d50a[_0x32fb20(0x268)]||![]);}catch(_0x4c3f45){}}let _0x21e1c0=0xa;if(this['config'][_0x32fb20(0x14b)])try{const _0xa69eb2=await this[_0x32fb20(0x1f7)](this['config'][_0x32fb20(0x14b)]);if(_0xa69eb2&&typeof _0xa69eb2['val']==='number')_0x21e1c0=_0xa69eb2[_0x32fb20(0x1b1)];}catch(_0x2fba34){}const _0x4c262f=await this[_0x32fb20(0x1bc)]();let _0xa50199={};try{const _0x24a30f=await this[_0x32fb20(0x18f)](_0x32fb20(0x182));if(_0x24a30f&&_0x24a30f['val'])_0xa50199=JSON['parse'](_0x24a30f[_0x32fb20(0x1b1)]);}catch(_0x503f96){}pythonBridge[_0x32fb20(0x188)](this,_0x32fb20(0x174),{'current_temps':_0x4602ce,'t_out':_0x21e1c0,'is_sunny':_0x4c262f,'solar_flags':_0x79aaff,'warmup_targets':_0xa50199}),this[_0x32fb20(0x1d6)]['info'](_0x32fb20(0x17b)+Object[_0x32fb20(0x1d7)](_0x4602ce)['length']+_0x32fb20(0x1d9));}catch(_0x483ebe){this[_0x32fb20(0x1d6)][_0x32fb20(0x255)](_0x32fb20(0x19d)+_0x483ebe[_0x32fb20(0x19f)]);}}['updateHealthVector'](){const _0x2b06de=a0_0x3cbf0e;if(!this[_0x2b06de(0x1a4)]||this[_0x2b06de(0x1a4)][_0x2b06de(0x221)]===0x0)return;const _0x154c44=new Array(0x30)['fill'](0x0),_0x59717f=Array[_0x2b06de(0x1b8)]({'length':0x30},()=>[]),_0xaf587=new Date()[_0x2b06de(0x199)](0x0,0x0,0x0,0x0);this[_0x2b06de(0x1a4)][_0x2b06de(0x1a2)](_0x128fea=>{const _0xa7e8e2=_0x2b06de,_0x530b16=new Date(_0x128fea[_0xa7e8e2(0x14e)]);if(_0x530b16[_0xa7e8e2(0x169)]()>=_0xaf587){const _0x1b308f=_0x530b16[_0xa7e8e2(0x167)](),_0x3f6c60=_0x530b16['getMinutes'](),_0x1badae=_0x1b308f*0x2+Math['floor'](_0x3f6c60/0x1e);_0x1badae>=0x0&&_0x1badae<0x30&&(_0x154c44[_0x1badae]++,_0x59717f[_0x1badae]['push']({'time':_0x530b16['toLocaleTimeString'](_0xa7e8e2(0x143),{'hour':_0xa7e8e2(0x19c),'minute':_0xa7e8e2(0x19c)}),'location':_0x128fea[_0xa7e8e2(0x146)]||_0xa7e8e2(0x1ab),'type':_0x128fea[_0xa7e8e2(0x1aa)]||'Event'}));}}),this[_0x2b06de(0x1f3)]('analysis.health.todayVector',{'val':JSON[_0x2b06de(0x1d1)](_0x154c44),'ack':!![]}),this[_0x2b06de(0x1f3)](_0x2b06de(0x28e),{'val':JSON['stringify'](_0x59717f),'ack':!![]});}async[a0_0x3cbf0e(0x178)](_0x164549){const _0x287f57=a0_0x3cbf0e;if(!this['config'][_0x287f57(0x1a7)]||typeof _0x164549!==_0x287f57(0x27b))return;const _0x448a54=this['config'][_0x287f57(0x23f)]||0.04;this[_0x287f57(0x278)][_0x287f57(0x1cf)]({'timestamp':Date[_0x287f57(0x270)](),'value':_0x164549}),this[_0x287f57(0x278)][_0x287f57(0x221)]>0x64&&this[_0x287f57(0x278)][_0x287f57(0x20d)](),_0x164549>_0x448a54&&!this[_0x287f57(0x29a)]&&(this['infrasoundLocked']=!![],this[_0x287f57(0x1d6)][_0x287f57(0x255)](_0x287f57(0x187)+_0x164549['toFixed'](0x4)+_0x287f57(0x15e)+_0x448a54+_0x287f57(0x234)),await this[_0x287f57(0x208)](_0x164549,_0x287f57(0x137)),setTimeout(()=>{const _0x4a20f8=_0x287f57;this[_0x4a20f8(0x29a)]=![];},0x5*0x3c*0x3e8));}async[a0_0x3cbf0e(0x208)](_0x4c1f8d,_0x191e04){const _0x2ce726=a0_0x3cbf0e;if(!this[_0x2ce726(0x162)]){const _0x53654e=this[_0x2ce726(0x28b)][_0x2ce726(0x281)](0x0,0xa),_0x2ff37c=_0x53654e[_0x2ce726(0x134)](_0x212e7b=>new Date(_0x212e7b[_0x2ce726(0x14e)])[_0x2ce726(0x26b)](_0x2ce726(0x143))+_0x2ce726(0x282)+(_0x212e7b[_0x2ce726(0x146)]||'Unknown')+':\x20'+_0x212e7b[_0x2ce726(0x24a)])['join']('\x0a');this[_0x2ce726(0x1d6)][_0x2ce726(0x255)](_0x2ce726(0x29c)+_0x4c1f8d[_0x2ce726(0x17f)](0x4)+_0x2ce726(0x183)+_0x2ff37c);if(this[_0x2ce726(0x147)]['infrasoundArmingId'])try{const _0x40b845=await this[_0x2ce726(0x1f7)](this[_0x2ce726(0x147)][_0x2ce726(0x1ea)]);_0x40b845&&_0x40b845[_0x2ce726(0x1b1)]===!![]&&(await this[_0x2ce726(0x1f3)]('analysis.safety.infrasoundAlert',{'val':JSON['stringify']({'timestamp':Date[_0x2ce726(0x270)](),'pressure':_0x4c1f8d[_0x2ce726(0x17f)](0x4),'eventType':_0x191e04,'recentEvents':_0x53654e[_0x2ce726(0x281)](0x0,0x3)}),'ack':!![]}),this['log']['error'](_0x2ce726(0x22a)));}catch(_0x45be78){}}else this['log'][_0x2ce726(0x273)](_0x2ce726(0x246)+_0x4c1f8d[_0x2ce726(0x17f)](0x4)+_0x2ce726(0x28a));}async[a0_0x3cbf0e(0x159)](_0x41d700){const _0x5c4f49=a0_0x3cbf0e;if(!_0x41d700||!_0x41d700[_0x5c4f49(0x146)])return;try{const _0x80aa65=(this['config']['devices']||[])[_0x5c4f49(0x139)](_0x9ac964=>_0x9ac964[_0x5c4f49(0x146)]===_0x41d700[_0x5c4f49(0x146)]&&(_0x9ac964[_0x5c4f49(0x1aa)]===_0x5c4f49(0x240)||_0x9ac964[_0x5c4f49(0x1aa)]===_0x5c4f49(0x1ad)));if(_0x80aa65[_0x5c4f49(0x221)]===0x0)return;const _0x654855=await this[_0x5c4f49(0x1f7)](_0x80aa65[0x0]['id']);if(!_0x654855||typeof _0x654855[_0x5c4f49(0x1b1)]!=='number')return;const _0x5a4334=_0x654855[_0x5c4f49(0x1b1)];let _0x3b05b9=null;if(this['config']['weatherTempId']){const _0x3536e9=await this[_0x5c4f49(0x1f7)](this[_0x5c4f49(0x147)]['weatherTempId']);_0x3536e9&&typeof _0x3536e9[_0x5c4f49(0x1b1)]==='number'&&(_0x3b05b9=_0x3536e9['val']);}if(_0x3b05b9!==null){const _0x31b8ed=Math[_0x5c4f49(0x19b)](_0x5a4334-_0x3b05b9);_0x31b8ed>0x3&&(this['log']['debug'](_0x5c4f49(0x1af)+_0x41d700[_0x5c4f49(0x146)]+':\x20Temp-Differenz\x20'+_0x31b8ed['toFixed'](0x1)+_0x5c4f49(0x1da)+_0x5a4334+_0x5c4f49(0x286)+_0x3b05b9+_0x5c4f49(0x22b)),await this[_0x5c4f49(0x1f3)]('analysis.ventilation.lastWindow',{'val':JSON['stringify']({'room':_0x41d700['location'],'timestamp':Date[_0x5c4f49(0x270)](),'tempDiff':_0x31b8ed[_0x5c4f49(0x17f)](0x1),'recommendation':_0x31b8ed>0x5?'Gute\x20LÃ¼ftungsmÃ¶glichkeit!':'LÃ¼ften\x20empfohlen'}),'ack':!![]}));}}catch(_0x5c16c1){this[_0x5c4f49(0x1d6)]['warn'](_0x5c4f49(0x26e)+_0x5c16c1[_0x5c4f49(0x19f)]);}}async[a0_0x3cbf0e(0x266)](_0x31c6f1){const _0x5e096b=a0_0x3cbf0e;if(!_0x31c6f1||typeof _0x31c6f1!=='object')return;const _0x3fddd0={'timestamp':_0x31c6f1[_0x5e096b(0x14e)]||Date[_0x5e096b(0x270)](),'id':_0x31c6f1['id']||Date['now']()['toString'](),'name':_0x31c6f1[_0x5e096b(0x24a)]||_0x5e096b(0x17d),'type':_0x31c6f1[_0x5e096b(0x1aa)]||_0x5e096b(0x291),'location':_0x31c6f1[_0x5e096b(0x146)]||_0x5e096b(0x1d3),'value':_0x31c6f1[_0x5e096b(0x210)]||null};this[_0x5e096b(0x28b)][_0x5e096b(0x191)](_0x3fddd0);if(this[_0x5e096b(0x28b)]['length']>0x1388)this['eventHistory'][_0x5e096b(0x276)]();await this['setStateAsync'](_0x5e096b(0x1c1),{'val':JSON[_0x5e096b(0x1d1)](this['eventHistory']),'ack':!![]}),this[_0x5e096b(0x1d6)][_0x5e096b(0x273)](_0x5e096b(0x247)+_0x3fddd0[_0x5e096b(0x24a)]+'\x20('+_0x3fddd0['location']+')');}[a0_0x3cbf0e(0x253)](_0x5678a7){}}if(require['main']!==module)module[a0_0x3cbf0e(0x21f)]=_0x516ff8=>new CogniLiving(_0x516ff8);else new CogniLiving();