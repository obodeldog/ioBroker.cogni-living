function a0_0x533d(_0x3b8dd2,_0x332395){const _0x1aaca4=a0_0x4bd2();return a0_0x533d=function(_0x4e3887,_0x1d5d25){_0x4e3887=_0x4e3887-0x1e5;let _0x4bd2a1=_0x1aaca4[_0x4e3887];return _0x4bd2a1;},a0_0x533d(_0x3b8dd2,_0x332395);}const a0_0x5f489d=a0_0x533d;(function(_0x4efa16,_0x2f7e07){const _0x32f9bc=a0_0x533d,_0x14333a=_0x4efa16();while(!![]){try{const _0x3e11ad=-parseInt(_0x32f9bc(0x2f0))/0x1*(-parseInt(_0x32f9bc(0x210))/0x2)+parseInt(_0x32f9bc(0x200))/0x3+-parseInt(_0x32f9bc(0x223))/0x4*(-parseInt(_0x32f9bc(0x215))/0x5)+parseInt(_0x32f9bc(0x22b))/0x6*(parseInt(_0x32f9bc(0x271))/0x7)+-parseInt(_0x32f9bc(0x23f))/0x8*(parseInt(_0x32f9bc(0x2b1))/0x9)+-parseInt(_0x32f9bc(0x2d4))/0xa*(parseInt(_0x32f9bc(0x2fd))/0xb)+parseInt(_0x32f9bc(0x274))/0xc*(-parseInt(_0x32f9bc(0x281))/0xd);if(_0x3e11ad===_0x2f7e07)break;else _0x14333a['push'](_0x14333a['shift']());}catch(_0x4cff03){_0x14333a['push'](_0x14333a['shift']());}}}(a0_0x4bd2,0x24cd6));const a0_0x1d5d25=(function(){let _0x3081b3=!![];return function(_0x2febbc,_0x2560fb){const _0x6901d3=_0x3081b3?function(){const _0x5a4c62=a0_0x533d;if(_0x2560fb){const _0x117ab8=_0x2560fb[_0x5a4c62(0x2b5)](_0x2febbc,arguments);return _0x2560fb=null,_0x117ab8;}}:function(){};return _0x3081b3=![],_0x6901d3;};}()),a0_0x4e3887=a0_0x1d5d25(this,function(){const _0x3c4786=a0_0x533d;return a0_0x4e3887['toString']()['search']('(((.+)+)+)+$')[_0x3c4786(0x2df)]()['constructor'](a0_0x4e3887)[_0x3c4786(0x2ad)]('(((.+)+)+)+$');});a0_0x4e3887();'use strict';const utils=require(a0_0x5f489d(0x2e1)),{GoogleGenerativeAI}=require(a0_0x5f489d(0x2f2)),path=require('path'),fs=require('fs'),installer=require('./lib/installer'),scanner=require(a0_0x5f489d(0x251)),schedulers=require('./lib/scheduler'),topology=require(a0_0x5f489d(0x2bf)),setup=require(a0_0x5f489d(0x2ab)),recorder=require(a0_0x5f489d(0x2c7)),pythonBridge=require(a0_0x5f489d(0x204)),aiAgent=require(a0_0x5f489d(0x255)),deadMan=require(a0_0x5f489d(0x2d2)),automation=require(a0_0x5f489d(0x314)),GEMINI_MODEL=a0_0x5f489d(0x2fe);class CogniLiving extends utils[a0_0x5f489d(0x313)]{constructor(_0x25cf2c){const _0x465dd8=a0_0x5f489d;super({..._0x25cf2c,'name':'cogni-living'}),this[_0x465dd8(0x2ff)]=[],this[_0x465dd8(0x25c)]=[],this[_0x465dd8(0x2cc)]=[],this[_0x465dd8(0x21d)]=[],this[_0x465dd8(0x1e6)]={},this[_0x465dd8(0x232)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x465dd8(0x225)]=!![],this[_0x465dd8(0x21f)]=null,this[_0x465dd8(0x235)]=null,this[_0x465dd8(0x24b)]=![],this[_0x465dd8(0x258)]=null,this[_0x465dd8(0x231)]=null,this[_0x465dd8(0x28b)]=setup[_0x465dd8(0x269)][_0x465dd8(0x2c5)],this['isProVersion']=![],this['lastAlertState']=![],this[_0x465dd8(0x228)]=null,this['ltmJob']=null,this['modeResetJob']=null,this[_0x465dd8(0x2ba)]=null,this['briefingJob']=null,this[_0x465dd8(0x29a)]=null,this['trackerHeartbeat']=null,this[_0x465dd8(0x2bb)]=null,this[_0x465dd8(0x273)]=null,this[_0x465dd8(0x1f5)]=![],this[_0x465dd8(0x2f3)]=Date['now'](),this['memoryCache']=null,this[_0x465dd8(0x256)]=Date[_0x465dd8(0x297)](),this['infrasoundLocked']=![],this['pressureBuffer']=[],this[_0x465dd8(0x300)]={'health':!![],'security':!![],'energy':!![],'comfort':!![]},this['on'](_0x465dd8(0x2c1),this[_0x465dd8(0x207)]['bind'](this)),this['on'](_0x465dd8(0x23a),this[_0x465dd8(0x31b)][_0x465dd8(0x261)](this)),this['on']('unload',this[_0x465dd8(0x25b)]['bind'](this)),this['on'](_0x465dd8(0x25d),this[_0x465dd8(0x2f8)]['bind'](this));}async[a0_0x5f489d(0x207)](){const _0x318f0d=a0_0x5f489d;this[_0x318f0d(0x2a5)][_0x318f0d(0x24e)](_0x318f0d(0x24a)+this[_0x318f0d(0x280)]+_0x318f0d(0x29d));if(this[_0x318f0d(0x303)][_0x318f0d(0x211)]!==undefined)this[_0x318f0d(0x300)][_0x318f0d(0x2bc)]=this[_0x318f0d(0x303)]['moduleHealth'];if(this['config'][_0x318f0d(0x1ea)]!==undefined)this[_0x318f0d(0x300)][_0x318f0d(0x20d)]=this[_0x318f0d(0x303)][_0x318f0d(0x1ea)];if(this['config'][_0x318f0d(0x2fb)]!==undefined)this[_0x318f0d(0x300)][_0x318f0d(0x1ec)]=this[_0x318f0d(0x303)][_0x318f0d(0x2fb)];if(this['config']['moduleComfort']!==undefined)this['activeModules']['comfort']=this[_0x318f0d(0x303)][_0x318f0d(0x277)];if(this[_0x318f0d(0x303)][_0x318f0d(0x27e)])this[_0x318f0d(0x300)]={...this[_0x318f0d(0x300)],...this['config'][_0x318f0d(0x27e)]};this[_0x318f0d(0x213)]();}async[a0_0x5f489d(0x213)](){const _0x5942ed=a0_0x5f489d;await setup[_0x5942ed(0x259)](this);try{this[_0x5942ed(0x2a0)]=await setup['checkLicense'](this['config'][_0x5942ed(0x272)]);}catch(_0x4e978d){}if(!this[_0x5942ed(0x303)][_0x5942ed(0x279)]||this[_0x5942ed(0x303)][_0x5942ed(0x279)]<0.1)this[_0x5942ed(0x303)]['inactivityThresholdHours']=0xc;await setup[_0x5942ed(0x20c)](this),await setup[_0x5942ed(0x2a8)](this);try{const _0x10a2f1=await this['getStateAsync'](_0x5942ed(0x246)),_0x435ffc=await this['getStateAsync'](_0x5942ed(0x305));_0x10a2f1&&_0x10a2f1[_0x5942ed(0x252)]&&_0x435ffc&&_0x435ffc[_0x5942ed(0x252)]&&(Date[_0x5942ed(0x297)]()-_0x10a2f1['ts']<0x4*0xe10*0x3e8&&(this[_0x5942ed(0x2cd)]={'times':JSON['parse'](_0x10a2f1[_0x5942ed(0x252)]),'sources':JSON[_0x5942ed(0x2b3)](_0x435ffc[_0x5942ed(0x252)])}));}catch(_0x1ed105){}if(this[_0x5942ed(0x303)][_0x5942ed(0x306)])try{this[_0x5942ed(0x258)]=new GoogleGenerativeAI(this[_0x5942ed(0x303)][_0x5942ed(0x306)]),this[_0x5942ed(0x231)]=this['genAI'][_0x5942ed(0x315)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x5942ed(0x288)}});}catch(_0x58f2a9){this['log'][_0x5942ed(0x25e)](_0x5942ed(0x26c)+_0x58f2a9[_0x5942ed(0x25d)]);}await setup[_0x5942ed(0x1e7)](this),await this['loadSystemMode'](),schedulers[_0x5942ed(0x2a3)](this),await this['setObjectNotExistsAsync'](_0x5942ed(0x2e8),{'type':_0x5942ed(0x238),'common':{'name':'Live\x20Event\x20Pulse','type':_0x5942ed(0x20e),'role':'value','read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync']('analysis.activity.roomStats',{'type':_0x5942ed(0x238),'common':{'name':'Room\x20Dwell\x20Time\x20Stats','type':'string','role':'json','read':!![],'write':![],'def':_0x5942ed(0x1ed)},'native':{}}),await this[_0x5942ed(0x1fc)](_0x5942ed(0x2fa),{'type':'state','common':{'name':_0x5942ed(0x240),'type':_0x5942ed(0x20a),'role':'json','read':!![],'write':![],'def':_0x5942ed(0x293)},'native':{}}),await this[_0x5942ed(0x1fc)](_0x5942ed(0x242),{'type':_0x5942ed(0x238),'common':{'name':_0x5942ed(0x227),'type':_0x5942ed(0x20a),'role':_0x5942ed(0x1e9),'read':!![],'write':![],'def':'Warte\x20auf\x20Analyse...'},'native':{}}),await this[_0x5942ed(0x1fc)](_0x5942ed(0x2c4),{'type':_0x5942ed(0x238),'common':{'name':_0x5942ed(0x308),'type':_0x5942ed(0x20a),'role':_0x5942ed(0x1e9),'read':!![],'write':![],'def':_0x5942ed(0x282)},'native':{}}),await this[_0x5942ed(0x1fc)](_0x5942ed(0x216),{'type':_0x5942ed(0x238),'common':{'name':_0x5942ed(0x1ff),'type':'string','role':_0x5942ed(0x2a7),'read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x5942ed(0x1fc)](_0x5942ed(0x248),{'type':'state','common':{'name':_0x5942ed(0x283),'type':'string','role':_0x5942ed(0x2a7),'read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x5942ed(0x1fc)](_0x5942ed(0x27a),{'type':_0x5942ed(0x238),'common':{'name':_0x5942ed(0x30e),'type':'number','role':_0x5942ed(0x2bd),'unit':'%','read':!![],'write':![]},'native':{}}),await this[_0x5942ed(0x1fc)](_0x5942ed(0x246),{'type':'state','common':{'name':_0x5942ed(0x275),'type':_0x5942ed(0x20a),'role':_0x5942ed(0x2a7),'read':!![],'write':![]},'native':{}});try{const _0x1290a5=await this['getStateAsync'](_0x5942ed(0x1f7));if(_0x1290a5&&_0x1290a5[_0x5942ed(0x252)]){this[_0x5942ed(0x2ff)]=JSON[_0x5942ed(0x2b3)](_0x1290a5[_0x5942ed(0x252)]);if(this[_0x5942ed(0x2a0)]){const _0x15b87e=await this[_0x5942ed(0x27b)](_0x5942ed(0x266));if(_0x15b87e&&_0x15b87e['val'])this['rawEventLog']=JSON[_0x5942ed(0x2b3)](_0x15b87e[_0x5942ed(0x252)]);}this[_0x5942ed(0x2a5)][_0x5942ed(0x24e)](_0x5942ed(0x30d)+this[_0x5942ed(0x2ff)][_0x5942ed(0x278)]+_0x5942ed(0x2e3));}}catch(_0x5c1d29){this[_0x5942ed(0x2ff)]=[];}try{const _0x38a423=await this['getStateAsync'](_0x5942ed(0x220));if(_0x38a423&&_0x38a423[_0x5942ed(0x252)])this[_0x5942ed(0x21d)]=JSON['parse'](_0x38a423['val']);}catch(_0x84f90c){this[_0x5942ed(0x21d)]=[];}const _0x473aed=this[_0x5942ed(0x21d)][_0x5942ed(0x278)]>=(this[_0x5942ed(0x303)][_0x5942ed(0x236)]||0x7)?_0x5942ed(0x2c6)+this['dailyDigests'][_0x5942ed(0x278)]+_0x5942ed(0x309):_0x5942ed(0x1e5)+this[_0x5942ed(0x21d)]['length']+'/'+(this[_0x5942ed(0x303)][_0x5942ed(0x236)]||0x7)+')';await this['setStateAsync'](_0x5942ed(0x264),{'val':_0x473aed,'ack':!![]}),this[_0x5942ed(0x2ce)](_0x5942ed(0x2f7)),this[_0x5942ed(0x2ce)](_0x5942ed(0x2a4)),this[_0x5942ed(0x2ce)]('analysis.training.triggerHealth');this[_0x5942ed(0x303)][_0x5942ed(0x23c)]&&this[_0x5942ed(0x303)][_0x5942ed(0x1f4)]&&this['activeModules']['security']&&this[_0x5942ed(0x234)](this[_0x5942ed(0x303)][_0x5942ed(0x1f4)]);const _0xf6697=this[_0x5942ed(0x303)]['devices'];if(_0xf6697)for(const _0x5c48f5 of _0xf6697){await this['subscribeForeignStatesAsync'](_0x5c48f5['id']);}const _0x41a40d=this[_0x5942ed(0x303)][_0x5942ed(0x276)];if(_0x41a40d)for(const _0x3fb123 of _0x41a40d){await this['subscribeForeignStatesAsync'](_0x3fb123);}const _0x1bbc73=require(_0x5942ed(0x257));if(this['historyJob'])this[_0x5942ed(0x29a)][_0x5942ed(0x2cf)]();this[_0x5942ed(0x29a)]=_0x1bbc73['scheduleJob'](_0x5942ed(0x22d),()=>{this['saveDailyHistory']();}),setTimeout(()=>this[_0x5942ed(0x2af)](),0x1388);if(this[_0x5942ed(0x273)])clearInterval(this[_0x5942ed(0x273)]);this['integrateRoomTime'](),this[_0x5942ed(0x273)]=setInterval(async()=>{await this['integrateRoomTime']();},0x3c*0x3e8);if(this[_0x5942ed(0x2bb)])clearInterval(this[_0x5942ed(0x2bb)]);this[_0x5942ed(0x2bb)]=setInterval(()=>{const _0x238d42=_0x5942ed;this[_0x238d42(0x2a0)]&&this['activeModules']['health']&&this[_0x238d42(0x296)]();},0x4*0x3c*0x3c*0x3e8);if(this[_0x5942ed(0x228)])clearInterval(this[_0x5942ed(0x228)]);this['activeModules'][_0x5942ed(0x1ec)]&&(this[_0x5942ed(0x228)]=setInterval(()=>{const _0x21f703=_0x5942ed;this[_0x21f703(0x2b6)]();},0xf*0x3c*0x3e8),setTimeout(()=>this[_0x5942ed(0x2b6)](),0x2710));const _0x2503d4=path['join'](__dirname,_0x5942ed(0x2ed),_0x5942ed(0x25f),'python');pythonBridge[_0x5942ed(0x31c)](this,_0x2503d4);}[a0_0x5f489d(0x25b)](_0x1d7f62){const _0x348dc1=a0_0x5f489d;if(this[_0x348dc1(0x29a)])this[_0x348dc1(0x29a)]['cancel']();this[_0x348dc1(0x27d)]()['then'](()=>{const _0x3d6afb=_0x348dc1;if(this[_0x3d6afb(0x228)])clearInterval(this[_0x3d6afb(0x228)]);if(this['roomIntegratorTimer'])clearInterval(this['roomIntegratorTimer']);recorder['abortExitTimer'](this),pythonBridge[_0x3d6afb(0x2ac)](this),_0x1d7f62();});}async[a0_0x5f489d(0x2af)](){const _0x3a79d0=a0_0x5f489d;if(!this['eventHistory']||this[_0x3a79d0(0x2ff)][_0x3a79d0(0x278)]===0x0){this[_0x3a79d0(0x2a5)][_0x3a79d0(0x24f)](_0x3a79d0(0x301));return;}this['log'][_0x3a79d0(0x24e)]('â†º\x20Replaying\x20'+this[_0x3a79d0(0x2ff)][_0x3a79d0(0x278)]+_0x3a79d0(0x247));const _0x4cdd29=new Date()['setHours'](0x0,0x0,0x0,0x0),_0x26f511='analysis.activity.roomHistory';let _0x4e2d08={'history':{},'date':new Date()[_0x3a79d0(0x311)]()};const _0x5db5cf=_0x3a79d0(0x216),_0x1d519c=_0x3a79d0(0x248);let _0x24a2b0=new Array(0x30)[_0x3a79d0(0x241)](0x0),_0x4045b6=Array[_0x3a79d0(0x253)]({'length':0x30},()=>[]);this[_0x3a79d0(0x2ff)][_0x3a79d0(0x26a)](_0x37432f=>{const _0x34a67c=_0x3a79d0;if(_0x37432f[_0x34a67c(0x30a)]>=_0x4cdd29){if(recorder['isRelevantActivity'](_0x37432f[_0x34a67c(0x27f)],_0x37432f[_0x34a67c(0x2bd)])){const _0x3219c2=new Date(_0x37432f[_0x34a67c(0x30a)]),_0x457233=_0x3219c2[_0x34a67c(0x2a2)]()*0x2+(_0x3219c2[_0x34a67c(0x2db)]()>=0x1e?0x1:0x0);if(_0x457233<0x30){_0x24a2b0[_0x457233]++;const _0x5e4d58=_0x37432f[_0x34a67c(0x219)]||_0x37432f['name']||'?';let _0x591df2=_0x4045b6[_0x457233];!_0x591df2[_0x34a67c(0x2b4)](_0x5e4d58)&&_0x591df2[_0x34a67c(0x2eb)](_0x5e4d58);}const _0x2676f2=_0x3219c2[_0x34a67c(0x2a2)]();let _0x16be30=_0x37432f[_0x34a67c(0x219)]||'Unknown';const _0x59bb73=(this[_0x34a67c(0x303)][_0x34a67c(0x24c)]||[])['find'](_0x82439e=>_0x82439e['location']===_0x16be30);if(_0x59bb73)_0x16be30=_0x59bb73['location'];if(!_0x4e2d08['history'][_0x16be30])_0x4e2d08[_0x34a67c(0x245)][_0x16be30]=new Array(0x18)['fill'](0x0);if(_0x4e2d08['history'][_0x16be30][_0x2676f2]<0x3c)_0x4e2d08[_0x34a67c(0x245)][_0x16be30][_0x2676f2]++;}}});const _0x583219=await this[_0x3a79d0(0x27b)](_0x26f511);(!_0x583219||!_0x583219['val']||_0x583219[_0x3a79d0(0x252)]==='{}'||_0x583219['val']['includes'](_0x3a79d0(0x2b7)))&&await this[_0x3a79d0(0x26b)](_0x26f511,{'val':JSON[_0x3a79d0(0x29c)](_0x4e2d08),'ack':!![]}),await this['setStateAsync'](_0x5db5cf,{'val':JSON['stringify'](_0x24a2b0),'ack':!![]}),await this[_0x3a79d0(0x26b)](_0x1d519c,{'val':JSON[_0x3a79d0(0x29c)](_0x4045b6),'ack':!![]}),this['log'][_0x3a79d0(0x24e)](_0x3a79d0(0x202));}async[a0_0x5f489d(0x27d)](){const _0x1de3ce=a0_0x5f489d;if(!this[_0x1de3ce(0x300)][_0x1de3ce(0x2bc)])return;const _0x56da70=new Date()[_0x1de3ce(0x212)]()[_0x1de3ce(0x295)]('T')[0x0];this[_0x1de3ce(0x2a5)][_0x1de3ce(0x201)](_0x1de3ce(0x1ee)+_0x56da70+_0x1de3ce(0x21c));try{const [_0x1065c9,_0x146d56,_0xa5b2cc,_0x21911b,_0x38b76f,_0x257705]=await Promise[_0x1de3ce(0x1ef)]([this[_0x1de3ce(0x27b)](_0x1de3ce(0x2fa)),this[_0x1de3ce(0x27b)](_0x1de3ce(0x242)),this[_0x1de3ce(0x27b)](_0x1de3ce(0x2c4)),this[_0x1de3ce(0x27b)](_0x1de3ce(0x2b9)),this['getStateAsync']('analysis.health.todayVector'),this[_0x1de3ce(0x27b)](_0x1de3ce(0x27a))]),_0x48d877=this[_0x1de3ce(0x2ff)][_0x1de3ce(0x294)](_0x4e4129=>_0x4e4129[_0x1de3ce(0x30a)]>=new Date()[_0x1de3ce(0x230)](0x0,0x0,0x0,0x0)&&(_0x4e4129['name'][_0x1de3ce(0x2f5)]()['includes'](_0x1de3ce(0x312))||_0x4e4129['name']['toLowerCase']()[_0x1de3ce(0x2b4)](_0x1de3ce(0x2d6)))&&(_0x4e4129[_0x1de3ce(0x2bd)]===!![]||_0x4e4129[_0x1de3ce(0x2bd)]===_0x1de3ce(0x307)))[_0x1de3ce(0x278)];let _0x22f095=0x55;if(_0x257705&&_0x257705['val']!==undefined)_0x22f095=Math[_0x1de3ce(0x208)](0x64,Math['max'](0x14,Math[_0x1de3ce(0x291)](0x50+Number(_0x257705['val'])*0x5)));const _0x47e387={'date':_0x56da70,'timestamp':Date['now'](),'roomHistory':_0x1065c9?.['val']?JSON[_0x1de3ce(0x2b3)](_0x1065c9[_0x1de3ce(0x252)]):{},'geminiNight':_0x146d56?.[_0x1de3ce(0x252)]||_0x1de3ce(0x22e),'geminiDay':_0xa5b2cc?.[_0x1de3ce(0x252)]||_0x1de3ce(0x22e),'anomalyScore':_0x21911b?.[_0x1de3ce(0x252)]||0.1,'todayVector':_0x38b76f?.[_0x1de3ce(0x252)]?JSON[_0x1de3ce(0x2b3)](_0x38b76f[_0x1de3ce(0x252)]):new Array(0x30)[_0x1de3ce(0x241)](0x0),'batteryLevel':_0x22f095,'freshAirCount':_0x48d877,'eventHistory':this['eventHistory']},_0x13d6c1=utils[_0x1de3ce(0x30c)](),_0x5ec075=path['join'](_0x13d6c1,'cogni-living',_0x1de3ce(0x245));if(!fs['existsSync'](_0x5ec075))fs[_0x1de3ce(0x310)](_0x5ec075,{'recursive':!![]});const _0x1a9468=path['join'](_0x5ec075,_0x56da70+_0x1de3ce(0x2f6));fs[_0x1de3ce(0x268)](_0x1a9468,JSON[_0x1de3ce(0x29c)](_0x47e387)),this[_0x1de3ce(0x2a5)]['info'](_0x1de3ce(0x302)+_0x1a9468);}catch(_0x1c7fd5){this['log'][_0x1de3ce(0x25e)](_0x1de3ce(0x2b2)+_0x1c7fd5[_0x1de3ce(0x25d)]);}}async['integrateRoomTime'](){const _0x539d39=a0_0x5f489d;if(!this[_0x539d39(0x225)])return;try{let _0x57474a=null;try{const _0x34b3b6=await this[_0x539d39(0x27b)]('analysis.prediction.trackerTopRoom'),_0x549e7e=await this['getStateAsync']('analysis.prediction.trackerConfidence');if(_0x34b3b6&&_0x34b3b6[_0x539d39(0x252)]&&_0x549e7e&&_0x549e7e[_0x539d39(0x252)]&&_0x549e7e[_0x539d39(0x252)]>0.3){if(_0x34b3b6[_0x539d39(0x252)]!==_0x539d39(0x1fe)&&_0x34b3b6[_0x539d39(0x252)]!==_0x539d39(0x2c9))_0x57474a=_0x34b3b6['val'];}}catch(_0x4eb40b){}if(!_0x57474a){const _0x141a82=this[_0x539d39(0x303)][_0x539d39(0x24c)]||[];for(const _0x589a15 of _0x141a82){if(_0x589a15[_0x539d39(0x27f)]==='motion'&&_0x589a15[_0x539d39(0x219)])try{const _0x1d06ec=await this[_0x539d39(0x2ec)](_0x589a15['id']);if(_0x1d06ec&&(_0x1d06ec[_0x539d39(0x252)]===!![]||_0x1d06ec['val']==='on'||_0x1d06ec[_0x539d39(0x252)]===0x1)){_0x57474a=_0x589a15[_0x539d39(0x219)];break;}}catch(_0x52ba4e){}}}if(!_0x57474a)return;const _0x5e1354=this['config'][_0x539d39(0x24c)]||[];let _0x1954f1=_0x57474a;const _0x2d9c24=_0x5e1354[_0x539d39(0x229)](_0x676e44=>_0x676e44[_0x539d39(0x219)]&&_0x676e44[_0x539d39(0x219)][_0x539d39(0x2f5)]()===_0x57474a[_0x539d39(0x2f5)]());if(_0x2d9c24)_0x1954f1=_0x2d9c24[_0x539d39(0x219)];const _0x3a0058=_0x539d39(0x2fa),_0x168225=await this[_0x539d39(0x27b)](_0x3a0058),_0x48f3a0=new Date()[_0x539d39(0x311)]();let _0x51f6fb={'history':{},'date':_0x48f3a0};if(_0x168225&&_0x168225['val'])try{_0x51f6fb=JSON[_0x539d39(0x2b3)](_0x168225['val']);}catch(_0x4e3c15){}_0x51f6fb[_0x539d39(0x20f)]!==_0x48f3a0&&(_0x51f6fb['history']={},_0x51f6fb['date']=_0x48f3a0);if(!_0x51f6fb['history'][_0x1954f1])_0x51f6fb[_0x539d39(0x245)][_0x1954f1]=new Array(0x18)[_0x539d39(0x241)](0x0);const _0x20793c=new Date()[_0x539d39(0x2a2)]();if(_0x51f6fb[_0x539d39(0x245)][_0x1954f1][_0x20793c]<0x3c)_0x51f6fb[_0x539d39(0x245)][_0x1954f1][_0x20793c]++;await this[_0x539d39(0x26b)](_0x3a0058,{'val':JSON[_0x539d39(0x29c)](_0x51f6fb),'ack':!![]});}catch(_0x139ec3){this[_0x539d39(0x2a5)][_0x539d39(0x24f)](_0x539d39(0x262)+_0x139ec3[_0x539d39(0x25d)]);}}async[a0_0x5f489d(0x2f8)](_0x17092d){const _0x38bd44=a0_0x5f489d;if(typeof _0x17092d===_0x38bd44(0x244)&&_0x17092d[_0x38bd44(0x25d)]){if(_0x17092d[_0x38bd44(0x2f1)]===_0x38bd44(0x290)){const _0x2ac45b=_0x17092d['message'][_0x38bd44(0x20f)],_0x16c436=utils[_0x38bd44(0x30c)](),_0x44d73a=path['join'](_0x16c436,'cogni-living',_0x38bd44(0x245),_0x2ac45b+_0x38bd44(0x2f6));if(fs['existsSync'](_0x44d73a))try{const _0x3556d2=JSON[_0x38bd44(0x2b3)](fs['readFileSync'](_0x44d73a,_0x38bd44(0x289)));this[_0x38bd44(0x1eb)](_0x17092d[_0x38bd44(0x253)],_0x17092d[_0x38bd44(0x2f1)],{'success':!![],'data':_0x3556d2},_0x17092d[_0x38bd44(0x218)]);}catch(_0x432c8e){this['sendTo'](_0x17092d['from'],_0x17092d[_0x38bd44(0x2f1)],{'success':![],'error':'Corrupt'},_0x17092d[_0x38bd44(0x218)]);}else this['sendTo'](_0x17092d[_0x38bd44(0x253)],_0x17092d['command'],{'success':![],'error':_0x38bd44(0x221)},_0x17092d[_0x38bd44(0x218)]);}else{if(_0x17092d[_0x38bd44(0x2f1)]===_0x38bd44(0x226)){const _0x249c51=this[_0x38bd44(0x21d)][_0x38bd44(0x278)];let _0x24f76e=new Array(0x30)[_0x38bd44(0x241)](0x0),_0x4bf53e=Array['from']({'length':0x30},()=>[]);try{const _0x26f6a4=await this[_0x38bd44(0x27b)](_0x38bd44(0x216));if(_0x26f6a4&&_0x26f6a4[_0x38bd44(0x252)])_0x24f76e=JSON[_0x38bd44(0x2b3)](_0x26f6a4[_0x38bd44(0x252)]);const _0x809177=await this[_0x38bd44(0x27b)](_0x38bd44(0x248));if(_0x809177&&_0x809177[_0x38bd44(0x252)])_0x4bf53e=JSON[_0x38bd44(0x2b3)](_0x809177[_0x38bd44(0x252)]);}catch(_0x48cb7b){}let _0x41378a=new Array(0x30)[_0x38bd44(0x241)](0x0);try{const _0x12252f=new Date();_0x12252f['setDate'](_0x12252f[_0x38bd44(0x2ca)]()-0x1);const _0x16a21d=_0x12252f[_0x38bd44(0x212)]()[_0x38bd44(0x295)]('T')[0x0],_0x3f2371=utils[_0x38bd44(0x30c)](),_0x1bdfda=path['join'](_0x3f2371,'cogni-living',_0x38bd44(0x245),_0x16a21d+_0x38bd44(0x2f6));if(fs[_0x38bd44(0x263)](_0x1bdfda)){const _0x4067ca=JSON['parse'](fs[_0x38bd44(0x2aa)](_0x1bdfda,_0x38bd44(0x289)));if(_0x4067ca&&_0x4067ca[_0x38bd44(0x318)])_0x41378a=_0x4067ca[_0x38bd44(0x318)];}}catch(_0x4bfa02){}let _0x4bc9a9={'today':{},'yesterday':{}};try{const _0x454b7d=await this[_0x38bd44(0x27b)]('analysis.activity.roomStats');if(_0x454b7d&&_0x454b7d[_0x38bd44(0x252)])_0x4bc9a9=JSON[_0x38bd44(0x2b3)](_0x454b7d[_0x38bd44(0x252)]);}catch(_0x1e0d14){}let _0x57912c=null;try{const _0x48ce55=await this[_0x38bd44(0x27b)](_0x38bd44(0x27a));if(_0x48ce55)_0x57912c=_0x48ce55[_0x38bd44(0x252)];}catch(_0x1fb9f4){}if(_0x57912c===undefined||_0x57912c===null){const _0x33a894=_0x24f76e[_0x38bd44(0x2b8)]((_0x157497,_0x40dc59)=>_0x157497+_0x40dc59,0x0),_0x32f422=Math['min'](0x2,Math['max'](-0x2,(0x64-_0x33a894)/0x32));_0x57912c=_0x32f422;}let _0xc20bc8=![],_0x55fbd6='',_0x5be4ec='',_0x3a6674='';try{const _0x2d8961=await this['getStateAsync'](_0x38bd44(0x2d1));if(_0x2d8961&&_0x2d8961[_0x38bd44(0x252)]){_0xc20bc8=!![];const _0x583003=await this[_0x38bd44(0x27b)](_0x38bd44(0x205));_0x55fbd6=_0x583003?_0x583003['val']:'';const _0x4f2293=await this[_0x38bd44(0x27b)](_0x38bd44(0x28d));_0x5be4ec=_0x4f2293?_0x4f2293[_0x38bd44(0x252)]:'';const _0x2ff2c6=await this['getStateAsync'](_0x38bd44(0x27c));_0x3a6674=_0x2ff2c6?_0x2ff2c6[_0x38bd44(0x252)]:'';}}catch(_0x47f531){}const _0x1b4a60=await this[_0x38bd44(0x2de)](),_0xbc7b5f=(this[_0x38bd44(0x303)][_0x38bd44(0x24c)]||[])[_0x38bd44(0x26f)](_0x2cbed3=>_0x2cbed3['isSolar']),_0x58c20a=_0x1b4a60&&_0xbc7b5f;let _0x432dab='';try{const _0x431fa8=await this['getStateAsync'](_0x38bd44(0x2e9));if(_0x431fa8&&_0x431fa8[_0x38bd44(0x252)])_0x432dab=_0x431fa8[_0x38bd44(0x252)];}catch(_0x491ac8){}this[_0x38bd44(0x1eb)](_0x17092d[_0x38bd44(0x253)],_0x17092d[_0x38bd44(0x2f1)],{'success':!![],'eventHistory':this[_0x38bd44(0x2ff)][_0x38bd44(0x316)](0x0,0x7d0),'stats':{'digestCount':_0x249c51,'isPresent':this['isPresent'],'hourlyActivity':_0x24f76e,'hourlyDetails':_0x4bf53e,'yesterdayActivity':_0x41378a,'solarActive':_0x58c20a,'presenceWho':_0x432dab,'roomStats':_0x4bc9a9,'activityTrend':_0x57912c,'modules':this[_0x38bd44(0x300)]},'automation':{'detected':_0xc20bc8,'description':_0x55fbd6,'targetId':_0x5be4ec,'targetValue':_0x3a6674}},_0x17092d[_0x38bd44(0x218)]);}else{if(_0x17092d['command']==='checkThermostats')try{const _0x3e12b7=await automation['scanThermostats'](this);this['sendTo'](_0x17092d[_0x38bd44(0x253)],_0x17092d[_0x38bd44(0x2f1)],{'success':!![],'results':_0x3e12b7},_0x17092d[_0x38bd44(0x218)]);}catch(_0x31a4e1){this['sendTo'](_0x17092d[_0x38bd44(0x253)],_0x17092d[_0x38bd44(0x2f1)],{'success':![],'error':_0x31a4e1[_0x38bd44(0x25d)]},_0x17092d['callback']);}else{if(_0x17092d[_0x38bd44(0x2f1)]===_0x38bd44(0x1f9))try{const _0x382ac7=await scanner[_0x38bd44(0x1fa)](this,_0x17092d['message']||{});this['sendTo'](_0x17092d[_0x38bd44(0x253)],_0x17092d[_0x38bd44(0x2f1)],{'success':!![],'devices':_0x382ac7},_0x17092d[_0x38bd44(0x218)]);}catch(_0x61731e){}else{if(_0x17092d[_0x38bd44(0x2f1)]==='getEnums'){const _0x2f8db8=await this[_0x38bd44(0x2e4)](_0x38bd44(0x23d),'enum'),_0xdfad43=[];if(_0x2f8db8)for(const _0x401e87 in _0x2f8db8){let _0x295414=_0x2f8db8[_0x401e87][_0x38bd44(0x1f8)][_0x38bd44(0x265)];if(_0x295414&&typeof _0x295414===_0x38bd44(0x244))_0x295414=_0x295414['de']||_0x295414['en']||Object[_0x38bd44(0x22c)](_0x295414)[0x0]||JSON[_0x38bd44(0x29c)](_0x295414);_0xdfad43[_0x38bd44(0x2eb)]({'id':_0x401e87,'name':String(_0x295414||_0x401e87)});}const _0x3b4bc9=await this[_0x38bd44(0x2e4)](_0x38bd44(0x2ef),_0x38bd44(0x2f4)),_0x226281=[];if(_0x3b4bc9)for(const _0x465e99 in _0x3b4bc9){let _0x162287=_0x3b4bc9[_0x465e99][_0x38bd44(0x1f8)]['name'];if(_0x162287&&typeof _0x162287==='object')_0x162287=_0x162287['de']||_0x162287['en']||Object['values'](_0x162287)[0x0]||JSON[_0x38bd44(0x29c)](_0x162287);_0x226281['push'](String(_0x162287||_0x465e99['split']('.')[_0x38bd44(0x2cb)]()));}this['sendTo'](_0x17092d[_0x38bd44(0x253)],_0x17092d['command'],{'success':!![],'enums':_0xdfad43,'rooms':_0x226281},_0x17092d[_0x38bd44(0x218)]);}else{if(_0x17092d[_0x38bd44(0x2f1)]===_0x38bd44(0x1f6))try{const _0x567572=await this[_0x38bd44(0x21e)](_0x38bd44(0x267),_0x38bd44(0x28e),{'startkey':_0x38bd44(0x233),'endkey':_0x38bd44(0x2c0)}),_0x2078f0=new Set();if(_0x567572&&_0x567572[_0x38bd44(0x214)])for(const _0x5194e5 of _0x567572[_0x38bd44(0x214)]){const _0x49ef1f=_0x5194e5['id'][_0x38bd44(0x2d8)](_0x38bd44(0x29b),''),_0x5f5626=await this[_0x38bd44(0x2ec)](_0x49ef1f+_0x38bd44(0x270));let _0x120612=![];if(_0x5f5626&&_0x5f5626[_0x38bd44(0x252)]){const _0x31c291=typeof _0x5f5626['val']===_0x38bd44(0x20a)?JSON[_0x38bd44(0x2b3)](_0x5f5626[_0x38bd44(0x252)]):_0x5f5626[_0x38bd44(0x252)];Array['isArray'](_0x31c291)&&_0x31c291[_0x38bd44(0x26a)](_0x11f92c=>{const _0x5264d3=_0x38bd44;_0x11f92c[_0x5264d3(0x243)]&&(_0x2078f0[_0x5264d3(0x317)](_0x11f92c[_0x5264d3(0x243)]),_0x120612=!![]);});}!_0x120612&&_0x2078f0[_0x38bd44(0x317)](_0x49ef1f);}const _0x68f88=Array[_0x38bd44(0x253)](_0x2078f0);if(_0x68f88['length']===0x0)_0x68f88[_0x38bd44(0x2eb)](_0x38bd44(0x2e0));this[_0x38bd44(0x1eb)](_0x17092d[_0x38bd44(0x253)],_0x17092d[_0x38bd44(0x2f1)],{'success':!![],'names':_0x68f88},_0x17092d['callback']);}catch(_0x1fa139){this[_0x38bd44(0x1eb)](_0x17092d['from'],_0x17092d['command'],{'success':![],'error':_0x38bd44(0x2d3)+_0x1fa139[_0x38bd44(0x25d)]},_0x17092d[_0x38bd44(0x218)]);}else{if(_0x17092d[_0x38bd44(0x2f1)]===_0x38bd44(0x28f))try{await automation[_0x38bd44(0x2f9)](this),this[_0x38bd44(0x1eb)](_0x17092d[_0x38bd44(0x253)],_0x17092d[_0x38bd44(0x2f1)],{'success':!![]},_0x17092d[_0x38bd44(0x218)]);}catch(_0x4bd6a0){this['log'][_0x38bd44(0x24f)](_0x38bd44(0x304)+_0x4bd6a0[_0x38bd44(0x25d)]),this[_0x38bd44(0x1eb)](_0x17092d[_0x38bd44(0x253)],_0x17092d[_0x38bd44(0x2f1)],{'success':![],'error':_0x4bd6a0['message']},_0x17092d[_0x38bd44(0x218)]);}else{if(_0x17092d[_0x38bd44(0x2f1)]===_0x38bd44(0x2dc))try{const _0x3e0ac4=_0x17092d[_0x38bd44(0x25d)]?_0x17092d[_0x38bd44(0x25d)][_0x38bd44(0x1e8)]:'';if(!_0x3e0ac4)throw new Error(_0x38bd44(0x2b0));const _0x355460=new GoogleGenerativeAI(_0x3e0ac4),_0x2083e8=_0x355460[_0x38bd44(0x315)]({'model':GEMINI_MODEL}),_0xe71789=await _0x2083e8['generateContent'](_0x38bd44(0x25a)),_0x397e8a=await _0xe71789[_0x38bd44(0x2a6)],_0x1414d4=_0x397e8a[_0x38bd44(0x1e9)]();this['sendTo'](_0x17092d[_0x38bd44(0x253)],_0x17092d[_0x38bd44(0x2f1)],{'success':!![],'message':_0x38bd44(0x1f1)+_0x1414d4['substring'](0x0,0x14)+'...'},_0x17092d[_0x38bd44(0x218)]);}catch(_0x45f625){this[_0x38bd44(0x1eb)](_0x17092d[_0x38bd44(0x253)],_0x17092d[_0x38bd44(0x2f1)],{'success':![],'message':_0x45f625[_0x38bd44(0x25d)]},_0x17092d[_0x38bd44(0x218)]);}else{if(_0x17092d[_0x38bd44(0x2f1)]===_0x38bd44(0x1f2))try{const _0x4e13c0=await this[_0x38bd44(0x2de)](),_0x5e597d=await this[_0x38bd44(0x21e)](_0x38bd44(0x267),_0x38bd44(0x28e),{'startkey':_0x38bd44(0x233),'endkey':'system.adapter.ical.é¦™'}),_0x17eb12=_0x5e597d&&_0x5e597d[_0x38bd44(0x214)]?_0x5e597d[_0x38bd44(0x214)][_0x38bd44(0x278)]:0x0;this[_0x38bd44(0x1eb)](_0x17092d[_0x38bd44(0x253)],_0x17092d['command'],{'success':!![],'weather':_0x38bd44(0x260)+_0x4e13c0+',\x20Temp:\x20'+(this[_0x38bd44(0x1e6)][this['config'][_0x38bd44(0x26e)]]||'?')+'Â°C','calendar':_0x17eb12+_0x38bd44(0x23e)},_0x17092d[_0x38bd44(0x218)]);}catch(_0x8d3cdd){this[_0x38bd44(0x1eb)](_0x17092d[_0x38bd44(0x253)],_0x17092d['command'],{'success':![]},_0x17092d[_0x38bd44(0x218)]);}}}}}}}}}}}[a0_0x5f489d(0x296)](){const _0x7dccfc=a0_0x5f489d;if(!this[_0x7dccfc(0x300)][_0x7dccfc(0x2bc)])return;this[_0x7dccfc(0x2a5)]['debug']('ðŸ\x20Triggering\x20Python\x20Health\x20Check\x20(Activity\x20Trend)...');try{const _0x672ef0=this[_0x7dccfc(0x2cc)]||[];pythonBridge[_0x7dccfc(0x2a1)](this,'CALCULATE_HEALTH_TREND',{'events':_0x672ef0});}catch(_0x5a549f){this['log'][_0x7dccfc(0x24f)]('Failed\x20to\x20trigger\x20Python\x20Health\x20Check');}}async[a0_0x5f489d(0x31b)](_0x16421d,_0x221637){const _0x1f4928=a0_0x5f489d;if(!_0x221637||this[_0x1f4928(0x1f5)])return;if(_0x16421d['includes'](_0x1f4928(0x2c8))&&_0x16421d['endsWith']('communicate.request')&&_0x221637[_0x1f4928(0x252)])return;if(this['config'][_0x1f4928(0x23c)]&&_0x16421d===this['config'][_0x1f4928(0x1f4)]&&this[_0x1f4928(0x300)][_0x1f4928(0x20d)]){this[_0x1f4928(0x2c2)](_0x221637[_0x1f4928(0x252)]);return;}if(_0x221637['ack']&&_0x16421d[_0x1f4928(0x203)]('pulse'))return;if(_0x16421d===this[_0x1f4928(0x31a)]+_0x1f4928(0x2da)){if(_0x221637['val']&&Object[_0x1f4928(0x22c)](setup[_0x1f4928(0x269)])[_0x1f4928(0x2b4)](_0x221637[_0x1f4928(0x252)])){this[_0x1f4928(0x28b)]=_0x221637[_0x1f4928(0x252)];if(_0x221637[_0x1f4928(0x252)]===setup['SYSTEM_MODES'][_0x1f4928(0x287)])await recorder['setPresence'](this,![]);else await recorder[_0x1f4928(0x319)](this,!![]);if(this[_0x1f4928(0x2a0)]){let _0x49381a=![],_0x1246e3=0x0,_0xb1054d=_0x1f4928(0x28a);if(this['currentSystemMode']==='party')_0x49381a=!![],_0x1246e3=0x168,_0xb1054d=_0x1f4928(0x254);else this['currentSystemMode']==='guest'&&(_0x49381a=!![],_0x1246e3=0x5a0,_0xb1054d=_0x1f4928(0x26d));pythonBridge[_0x1f4928(0x2a1)](this,_0x1f4928(0x30f),{'active':_0x49381a,'duration':_0x1246e3,'label':_0xb1054d}),await this[_0x1f4928(0x26b)](_0x1f4928(0x249),{'val':JSON[_0x1f4928(0x29c)]({'active':_0x49381a,'label':_0xb1054d,'timestamp':Date[_0x1f4928(0x297)]()}),'ack':!![]});}}if(!_0x221637['ack'])this[_0x1f4928(0x2d0)](_0x16421d,{'val':this['currentSystemMode'],'ack':!![]});return;}if(_0x16421d[_0x1f4928(0x203)]('analysis.energy.warmupSources')&&_0x221637[_0x1f4928(0x209)])this[_0x1f4928(0x222)](_0x221637[_0x1f4928(0x252)]);if(_0x16421d[_0x1f4928(0x203)](_0x1f4928(0x246))&&_0x221637['ack']&&this[_0x1f4928(0x300)][_0x1f4928(0x1ec)])automation[_0x1f4928(0x250)](this);if(!_0x221637[_0x1f4928(0x209)]){if(_0x16421d[_0x1f4928(0x2b4)](_0x1f4928(0x2f7))&&_0x221637['val']){this[_0x1f4928(0x2d0)](_0x16421d,{'val':![],'ack':!![]}),aiAgent[_0x1f4928(0x21a)](this);return;}if(_0x16421d['includes'](_0x1f4928(0x2a9))&&_0x221637[_0x1f4928(0x252)]){this[_0x1f4928(0x2d0)](_0x16421d,{'val':![],'ack':!![]});if(this['isProVersion'])aiAgent[_0x1f4928(0x30b)](this,pythonBridge);return;}if(_0x16421d[_0x1f4928(0x2b4)](_0x1f4928(0x292))&&_0x221637[_0x1f4928(0x252)]){this['setState'](_0x16421d,{'val':![],'ack':!![]}),aiAgent[_0x1f4928(0x24d)](this);return;}if(_0x16421d['includes'](_0x1f4928(0x224))&&_0x221637[_0x1f4928(0x252)]){this[_0x1f4928(0x2d0)](_0x16421d,{'val':![],'ack':!![]}),aiAgent[_0x1f4928(0x239)](this);return;}if(_0x16421d[_0x1f4928(0x2b4)]('analysis.training.triggerSecurity')&&_0x221637['val']){this[_0x1f4928(0x2d0)](_0x16421d,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x275373=await this[_0x1f4928(0x27b)]('LTM.trainingData.sequences');if(_0x275373&&_0x275373[_0x1f4928(0x252)]){const _0x3dc712=JSON[_0x1f4928(0x2b3)](_0x275373[_0x1f4928(0x252)]);this['setStateAsync'](_0x1f4928(0x2e7),{'val':_0x1f4928(0x22a),'ack':!![]}),pythonBridge['send'](this,'TRAIN_SECURITY',{'sequences':_0x3dc712});}}catch(_0x41f490){}return;}if(_0x16421d['includes'](_0x1f4928(0x2ee))&&_0x221637[_0x1f4928(0x252)]){this[_0x1f4928(0x2d0)](_0x16421d,{'val':![],'ack':!![]});if(this[_0x1f4928(0x2a0)])try{this[_0x1f4928(0x296)]();const _0x59aa5c=await this[_0x1f4928(0x27b)]('LTM.dailyDigests');if(_0x59aa5c&&_0x59aa5c['val'])pythonBridge[_0x1f4928(0x2a1)](this,'TRAIN_HEALTH',{'digests':JSON['parse'](_0x59aa5c[_0x1f4928(0x252)])});aiAgent[_0x1f4928(0x29f)](this,_0x1f4928(0x285)),setTimeout(()=>aiAgent['generateHealthReport'](this,_0x1f4928(0x23b)),0x2ee0);}catch(_0x33ca43){}return;}if(_0x16421d[_0x1f4928(0x2b4)](_0x1f4928(0x237))&&_0x221637[_0x1f4928(0x252)]){this['setState'](_0x16421d,{'val':![],'ack':!![]}),await this['triggerEnergyPrediction']();return;}if(_0x16421d[_0x1f4928(0x2b4)](_0x1f4928(0x1f0))&&_0x221637[_0x1f4928(0x252)]){this[_0x1f4928(0x2d0)](_0x16421d,{'val':![],'ack':!![]});if(this[_0x1f4928(0x2a0)])try{const _0x3408c3=await this[_0x1f4928(0x27b)](_0x1f4928(0x266));if(_0x3408c3&&_0x3408c3['val']){const _0x1f26e0={};if(this['config'][_0x1f4928(0x24c)])this[_0x1f4928(0x303)][_0x1f4928(0x24c)][_0x1f4928(0x26a)](_0x1df046=>{const _0x361f45=_0x1f4928;if(_0x1df046['id']&&_0x1df046['type'])_0x1f26e0[_0x1df046['id']]=_0x1df046[_0x361f45(0x27f)];});pythonBridge[_0x1f4928(0x2a1)](this,_0x1f4928(0x298),{'events':JSON[_0x1f4928(0x2b3)](_0x3408c3[_0x1f4928(0x252)]),'deviceMap':_0x1f26e0});}}catch(_0x256e17){}return;}if(_0x16421d[_0x1f4928(0x2b4)](_0x1f4928(0x2d7))&&_0x221637[_0x1f4928(0x252)]){this[_0x1f4928(0x2d0)](_0x16421d,{'val':![],'ack':!![]}),topology[_0x1f4928(0x1fb)](this);if(this[_0x1f4928(0x2a0)])try{const _0x29b061=await this[_0x1f4928(0x27b)](_0x1f4928(0x2e6));if(_0x29b061&&_0x29b061['val'])pythonBridge[_0x1f4928(0x2a1)](this,'TRAIN_TOPOLOGY',{'sequences':JSON[_0x1f4928(0x2b3)](_0x29b061[_0x1f4928(0x252)])});}catch(_0x26b204){}return;}}const _0x17e91a=(this[_0x1f4928(0x303)]['devices']||[])[_0x1f4928(0x229)](_0x3a13a6=>_0x3a13a6['id']===_0x16421d);if(_0x17e91a){const _0x27eb2f=await recorder[_0x1f4928(0x1fd)](this,_0x16421d,_0x221637,_0x17e91a);_0x27eb2f&&this[_0x1f4928(0x2d0)](_0x1f4928(0x2e8),{'val':Date['now'](),'ack':!![]});_0x27eb2f&&_0x27eb2f[_0x1f4928(0x27f)]===_0x1f4928(0x2d9)&&_0x27eb2f['location']&&this[_0x1f4928(0x2a0)]&&deadMan[_0x1f4928(0x2e5)](this,_0x27eb2f[_0x1f4928(0x219)]);_0x221637[_0x1f4928(0x252)]&&(_0x221637[_0x1f4928(0x252)]===!![]||_0x221637['val']===0x1||String(_0x221637[_0x1f4928(0x252)])[_0x1f4928(0x2f5)]()===_0x1f4928(0x307))&&(_0x17e91a[_0x1f4928(0x27f)]&&(_0x17e91a['type'][_0x1f4928(0x2b4)]('window')||_0x17e91a['type'][_0x1f4928(0x2b4)]('door'))&&this[_0x1f4928(0x2ae)](_0x17e91a));if(_0x17e91a[_0x1f4928(0x27f)]===_0x1f4928(0x2fc)||_0x17e91a[_0x1f4928(0x27f)]===_0x1f4928(0x22f)){if(this['activeModules']['energy'])automation[_0x1f4928(0x29e)](this);}}}async[a0_0x5f489d(0x222)](_0xad1874){const _0x106386=a0_0x5f489d;if(!this[_0x106386(0x2cd)]||Date[_0x106386(0x297)]()-this[_0x106386(0x256)]>0x493e0)return;try{const _0x2d5266=JSON[_0x106386(0x2b3)](_0xad1874),_0xdad174=this['memoryCache'][_0x106386(0x20b)];let _0x354b11=![];for(const _0x2a686d in _0xdad174){if(_0xdad174[_0x2a686d][_0x106386(0x2b4)]('AI')&&_0x2d5266[_0x2a686d]&&!_0x2d5266[_0x2a686d]['includes']('AI')){_0x354b11=!![];break;}}_0x354b11&&(await this[_0x106386(0x26b)]('analysis.energy.warmupTimes',{'val':JSON['stringify'](this[_0x106386(0x2cd)][_0x106386(0x1f3)]),'ack':!![]}),await this[_0x106386(0x26b)]('analysis.energy.warmupSources',{'val':JSON[_0x106386(0x29c)](this[_0x106386(0x2cd)][_0x106386(0x20b)]),'ack':!![]}));}catch(_0xde6e73){}}async[a0_0x5f489d(0x286)](){const _0x3c97cb=a0_0x5f489d;try{const _0xd619a1=await this[_0x3c97cb(0x27b)](setup[_0x3c97cb(0x2dd)]);if(_0xd619a1&&_0xd619a1[_0x3c97cb(0x252)])this['currentSystemMode']=_0xd619a1[_0x3c97cb(0x252)];}catch(_0x3e5e3a){this[_0x3c97cb(0x28b)]=setup[_0x3c97cb(0x269)][_0x3c97cb(0x2c5)];}}async[a0_0x5f489d(0x2be)](){return![];}async[a0_0x5f489d(0x217)](){const _0xe58d62=a0_0x5f489d;await aiAgent[_0xe58d62(0x21a)](this);this[_0xe58d62(0x300)][_0xe58d62(0x2bc)]&&(this[_0xe58d62(0x2e2)](),this[_0xe58d62(0x21b)]());if(this[_0xe58d62(0x300)][_0xe58d62(0x1ec)])this[_0xe58d62(0x2b6)]();}async[a0_0x5f489d(0x2de)](){return![];}['triggerGaitAnalysis'](){const _0x5351c0=a0_0x5f489d;if(!this[_0x5351c0(0x2a0)])return;}async[a0_0x5f489d(0x2b6)](){const _0x3eb186=a0_0x5f489d;if(!this[_0x3eb186(0x2a0)]||!this[_0x3eb186(0x300)][_0x3eb186(0x1ec)])return;try{const _0x3c0826={},_0x16d79e={},_0x31df19=this['config'][_0x3eb186(0x24c)]||[];for(const _0x2c5007 of _0x31df19){if(_0x2c5007['type']==='heating'&&_0x2c5007['location'])try{const _0x42fdf8=await this['getForeignStateAsync'](_0x2c5007['id']);_0x42fdf8&&typeof _0x42fdf8[_0x3eb186(0x252)]===_0x3eb186(0x20e)&&(_0x3c0826[_0x2c5007[_0x3eb186(0x219)]]=_0x42fdf8[_0x3eb186(0x252)],_0x16d79e[_0x2c5007[_0x3eb186(0x219)]]=_0x2c5007['isSolar']||![]);}catch(_0x1b0424){}}let _0x14be31=0xa;if(this['config']['weatherTempId'])try{const _0x533d78=await this['getForeignStateAsync'](this[_0x3eb186(0x303)][_0x3eb186(0x284)]);if(_0x533d78&&typeof _0x533d78[_0x3eb186(0x252)]==='number')_0x14be31=_0x533d78[_0x3eb186(0x252)];}catch(_0x15aaa6){}const _0x37b2bf=await this[_0x3eb186(0x2de)]();let _0x529f52={};try{const _0x11e2c6=await this['getStateAsync'](_0x3eb186(0x299));if(_0x11e2c6&&_0x11e2c6[_0x3eb186(0x252)])_0x529f52=JSON[_0x3eb186(0x2b3)](_0x11e2c6['val']);}catch(_0x6a1611){}pythonBridge[_0x3eb186(0x2a1)](this,_0x3eb186(0x2c3),{'current_temps':_0x3c0826,'t_out':_0x14be31,'is_sunny':_0x37b2bf,'solar_flags':_0x16d79e,'warmup_targets':_0x529f52}),this[_0x3eb186(0x2a5)][_0x3eb186(0x24e)]('ðŸ”®\x20Energy\x20Prediction\x20triggered\x20('+Object[_0x3eb186(0x2ea)](_0x3c0826)[_0x3eb186(0x278)]+_0x3eb186(0x206));}catch(_0x290866){this['log'][_0x3eb186(0x24f)](_0x3eb186(0x2d5)+_0x290866[_0x3eb186(0x25d)]);}}[a0_0x5f489d(0x2e2)](){}async[a0_0x5f489d(0x2c2)](_0x54a1d2){}async['triggerInfrasoundCorrelation'](_0x1ad87a,_0x510e54){}async[a0_0x5f489d(0x2ae)](_0x16828c){}async['appendToLog'](_0x26d804){}[a0_0x5f489d(0x28c)](_0x42a67b){}}if(require['main']!==module)module['exports']=_0x1ee02f=>new CogniLiving(_0x1ee02f);else new CogniLiving();function a0_0x4bd2(){const _0x261ab5=['initSystemConfig','triggerDailyDigest','readFileSync','./lib/setup','stopService','search','analyzeWindowOpening','replayTodayEvents','Kein\x20API\x20Key\x20Ã¼bergeben.','1839303wXbJLQ','History\x20Save\x20Error:\x20','parse','includes','apply','triggerEnergyPrediction','\x22history\x22:{}','reduce','analysis.security.lastScore','driftAnalysisTimer','healthTrendInterval','health','value','checkWifiPresence','./lib/topology','system.adapter.ical.é¦™','ready','handleInfrasound','PREDICT_ENERGY','analysis.health.geminiDay','NORMAL','Aktiv\x20(','./lib/recorder','telegram','Init...','getDate','pop','rawEventLog','memoryCache','subscribeStates','cancel','setState','analysis.automation.patternDetected','./lib/dead_man','Scan\x20Error:\x20','1033100qoErhC','triggerEnergyPrediction\x20Error:\x20','terrasse','analysis.training.triggerTopology','replace','motion','.system.mode','getMinutes','testApiKey','SYSTEM_DP_MODE','checkSolarCondition','toString','Standard','@iobroker/adapter-core','updateHealthVector','\x20events\x20from\x20standard\x20storage.','getForeignObjectsAsync','updateLocation','LTM.trainingData.sequences','analysis.training.status','analysis.visualization.pulse','system.presenceWho','keys','push','getForeignStateAsync','.venv','analysis.training.triggerHealth','enum.rooms.*','187524UtmMOC','command','@google/generative-ai','lastTrackerEventTime','enum','toLowerCase','.json','analysis.trigger','onMessage','updateSchedulePreview','analysis.activity.roomHistory','moduleEnergy','temperature','11zIJPmb','models/gemini-flash-latest','eventHistory','activeModules','âš \x20Replay\x20skipped:\x20No\x20events\x20in\x20memory.','âœ…\x20History\x20saved:\x20','config','refreshCalendar\x20failed:\x20','analysis.energy.warmupSources','geminiApiKey','open','Gemini\x20Report\x20Day','\x20Tage)','timestamp','createDailyDigest','getAbsoluteDefaultDataDir','ðŸ“¦\x20Restored\x20','General\x20Activity\x20Trend','SET_LEARNING_MODE','mkdirSync','toLocaleDateString','haustÃ¼r','Adapter','./lib/automation','getGenerativeModel','slice','add','todayVector','setPresence','namespace','onStateChange','startService','Lernphase\x20(','sensorLastValues','createAllObjects','apiKey','text','moduleSecurity','sendTo','energy','{\x22today\x22:{},\x20\x22yesterday\x22:{},\x20\x22date\x22:\x22\x22}','ðŸ’¾\x20Saving\x20Daily\x20History\x20for\x20','all','analysis.training.triggerComfort','Verbindung\x20erfolgreich:\x20','testContext','times','infrasoundSensorId','dependencyInstallInProgress','getCalendarNames','events.history','common','scanDevices','scanForDevices','updateTopology','setObjectNotExistsAsync','processSensorEvent','Unknown','Daily\x20Activity\x20Vector\x20(48x30min)','762276ncmMhe','debug','âœ…\x20Dashboard\x20Data\x20(Rooms\x20&\x20Timeline\x20&\x20Details)\x20restored.','endsWith','./lib/python_bridge','analysis.automation.description','\x20rooms)','onReady','min','ack','string','sources','initHistory','security','number','date','2BWYbyX','moduleHealth','toISOString','startSystem','rows','15rMgCMs','analysis.health.todayVector','runAutopilot','callback','location','runGeminiAnalysis','triggerGaitAnalysis','...','dailyDigests','getObjectViewAsync','exitTimer','LTM.dailyDigests','No\x20data','protectAiMemory','214148nWDLvQ','automation.triggerAction','isPresent','getOverviewData','Gemini\x20Report\x20Night','analysisTimer','find','Sec-Training\x20started...','12cmAiLJ','values','59\x2023\x20*\x20*\x20*','Keine\x20Daten','thermostat','setHours','geminiModel','systemConfig','system.adapter.ical.','subscribeForeignStates','exitGraceTimer','minDaysForBaseline','analysis.training.triggerEnergy','state','executeAutomationAction','stateChange','DAY','infrasoundEnabled','enum.functions.*','\x20Kalender-Adapter\x20gefunden.','8lvlBIJ','Room\x20History\x20(24h\x20Buckets)','fill','analysis.health.geminiNight','calendarName','object','history','analysis.energy.warmupTimes','\x20events\x20from\x20today...','analysis.health.todayRoomDetails','analysis.security.learningStatus','cogni-living\x20adapter\x20starting\x20(v','isGracePeriodActive','devices','sendMorningBriefing','info','warn','checkCalendarTriggers','./lib/scanner','val','from','Party\x20Mode','./lib/ai_agent','bootTime','node-schedule','genAI','initZombies','Say\x20Hello','onUnload','analysisHistory','message','error','bin','Sonne:\x20','bind','[Integrator]\x20Error:\x20','existsSync','LTM.baselineStatus','name','LTM.rawEventLog','system','writeFileSync','SYSTEM_MODES','forEach','setStateAsync','Gemini\x20Init\x20Error:\x20','Guest\x20Mode','outdoorSensorId','some','.data.table','596589RQCdgk','licenseKey','roomIntegratorTimer','204jBHqZL','Warm-Up\x20Time','presenceDevices','moduleComfort','length','inactivityThresholdHours','analysis.health.activityTrend','getStateAsync','analysis.automation.targetValue','saveDailyHistory','modules','type','version','240318MNQIyt','Warte\x20auf\x20Analyse...','Daily\x20Room\x20Details\x20(48x30min)','weatherTempId','NIGHT','loadSystemMode','VACATION','application/json','utf8','manual','currentSystemMode','sendNotification','analysis.automation.targetId','instance','refreshCalendar','getHistoryData','round','triggerBriefing','{\x22history\x22:{}}','filter','split','runPythonHealthCheck','now','TRAIN_COMFORT','analysis.energy.warmupTargets','historyJob','system.adapter.','stringify',')\x20-\x20Phase\x20E\x20(Scheduler\x20Fix)','cleanupGhostInterventions','generateHealthReport','isProVersion','send','getHours','initSchedules','LTM.triggerDailyDigest','log','response','json'];a0_0x4bd2=function(){return _0x261ab5;};return a0_0x4bd2();}