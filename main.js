const a0_0x5a8b2c=a0_0x4d51;(function(_0x332917,_0x47bbc1){const _0x4ced9f=a0_0x4d51,_0x1ad9ef=_0x332917();while(!![]){try{const _0x43f7ef=parseInt(_0x4ced9f(0x25e))/0x1+parseInt(_0x4ced9f(0x269))/0x2*(-parseInt(_0x4ced9f(0x23f))/0x3)+parseInt(_0x4ced9f(0x283))/0x4*(-parseInt(_0x4ced9f(0x1fa))/0x5)+-parseInt(_0x4ced9f(0x1bb))/0x6*(parseInt(_0x4ced9f(0x20f))/0x7)+-parseInt(_0x4ced9f(0x294))/0x8+parseInt(_0x4ced9f(0x1e6))/0x9+-parseInt(_0x4ced9f(0x1e3))/0xa*(-parseInt(_0x4ced9f(0x1f2))/0xb);if(_0x43f7ef===_0x47bbc1)break;else _0x1ad9ef['push'](_0x1ad9ef['shift']());}catch(_0x1c55e9){_0x1ad9ef['push'](_0x1ad9ef['shift']());}}}(a0_0x1a14,0xd94d1));const a0_0x34337e=(function(){let _0xe3b31c=!![];return function(_0x5e9f4f,_0xb27e6d){const _0x13cb1a=_0xe3b31c?function(){if(_0xb27e6d){const _0x50e2b2=_0xb27e6d['apply'](_0x5e9f4f,arguments);return _0xb27e6d=null,_0x50e2b2;}}:function(){};return _0xe3b31c=![],_0x13cb1a;};}()),a0_0x4d015b=a0_0x34337e(this,function(){const _0x3d7023=a0_0x4d51;return a0_0x4d015b['toString']()[_0x3d7023(0x258)](_0x3d7023(0x2f5))[_0x3d7023(0x263)]()[_0x3d7023(0x268)](a0_0x4d015b)[_0x3d7023(0x258)](_0x3d7023(0x2f5));});a0_0x4d015b();'use strict';function a0_0x4d51(_0x2530a5,_0x431694){const _0x10c843=a0_0x1a14();return a0_0x4d51=function(_0x4d015b,_0x34337e){_0x4d015b=_0x4d015b-0x141;let _0x1a148a=_0x10c843[_0x4d015b];return _0x1a148a;},a0_0x4d51(_0x2530a5,_0x431694);}function a0_0x1a14(){const _0x1b6dd0=['analysis.alertReason','LTM.baselineStatus','alertReason','push','.forecast.current.temperature','pythonProcess','valve','generic','eventHistory','child_process','üìû\x20R√úCKRUF\x20BITTE!\x20Der\x20Bewohner\x20hat\x20den\x20R√ºckruf-Button\x20gedr√ºckt.','presence','temperature','LTM.trainingData.thermodynamics','values','\x20days\x20of\x20activity\x20data\x20to\x20Python...','[PYTHON\x20ERR]\x20','handleTelegramResponse','slice','notifyPushoverEnabled','4948XsMiym','heating','initHistory','inactivityMonitoringEnabled','Kein\x20API\x20Key!','getMonth','getSystemUUID','firmware','Briefing\x20Error:\x20','toLowerCase','callback','t√ºr','rawEventLog','Keine\x20Termine','\x0aSTB:\x20','accuweather','VACATION','6796968UFnXKZ','useCalendar','Digest','analysis.health.lastCheck','runBaselineDriftAnalysis','notifyEmailEnabled','uuid','send','Missing\x20data','data','sendNotification','dismissAutomation','getHours','retry','onUnload','getForeignObjectsAsync','TRAIN_ENERGY','Guardian:\x20Sending\x20','link_quality','\x20->\x20','writable','No\x20module\x20named','@iobroker/adapter-core','startExitTimer','COGNI_REQUEST_CALL','\x20presence\x20devices...','getForeignStateAsync','analysis.automation.patternDetected','systemConfig','siren','Adapter','description','response','livingContext','driftDetails','Sec-Training\x20started...','rmSync','runPythonHealthCheck','sensorLastValues','COGNI_CONFIRM_OK','brightness','.\x20ANWESEND:\x20','\x20sensors...','toFixed','analysis.training.triggerSecurity','lights','getObjectAsync','javascript.','Verbindung\x20erfolgreich!\x20Antwort:\x20','now','close','handlePythonResult','useWeather','path','health','analysis.training.status','analysis.automation.autoApply','analysis.automation.description','substring','recordSequence','node-schedule','exitGraceTimer','forEach','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','message','setStateAsync','getForeignObjectAsync','latitude','runSecurityCheck','getTime','scriptEnabled','stdin','getGenerativeModel','door','service.py','namespace','.NextHours.Location_1.Day_1.current.temp_value','communicate.request','cpu_feature_guard','[PYTHON]\x20','analysis.automation.targetValue','filter','LTM.dailyDigests','cogni-living','setupLtmScheduler','\x20sequences...','sendToAsync','‚ùå\x20VENV\x20CREATION\x20FAILED.\x20Please\x20run:\x20sudo\x20apt\x20install\x20python3-venv','LTM.driftAnalysis.driftDetails','getEnums','getOutsideTemperatureNumeric','genAI','initSensorSubscriptions','[RECORDER]\x20Added\x20step\x20to\x20sequence:\x20','targetposition','analysis.trigger','splice','(((.+)+)+)+$','Success','WiFi\x20Presence\x20detected\x20->\x20Aborting\x20Exit\x20Timer.\x20User\x20is\x20present.','saveFeedback','system.config','party','position','Invalid\x20JSON:\x20','event','setupTelegramListener','logDuplicates','\x20=\x20','contact','‚úÖ\x20INSTALLATION\x20COMPLETE.\x20Starting\x20Service...','some','selectedFunctionIds','temperatur','command','role','.\x20SYSTEM_MODE:\x20','events.lastEvent','Scripts','isProVersion','delObjectAsync','startsWith','maintenance','User\x20dismissed\x20automation\x20proposal.','Installing\x20dependencies\x20into\x20venv...','Gemini\x20AI\x20initialized.','split','Kein\x20API\x20Key\x20eingegeben.','Say\x20Hello','bind','Deaktiviert\x20(Pro-Feature)','material.','ltmStbWindowDays','energy','testContext','geminiApiKey','installPythonDependencies','motion','vis.','Vom\x20Benutzer\x20best√§tigt\x20(OK).','cover','includes','ANALYZE_TREND','python3','fault','common','.\x20EMERGENCY:\x20','win32','Subscribing\x20to\x20','PONG','Success:\x20','isExit','üìû\x20R√ºckruf\x20anfordern','heizung','.forecast.current.temp','from','kontakt','subscribeForeignStatesAsync','.\x20EVENTS:\x20','No\x20instance','isArray','generateContent','LTM.trainingData.sequences','autoApply','\x20Tage)','activityLevel','ANALYZE_SEQUENCE','Kalender:\x20Deaktiviert','write','baselineDrift','vacation','simple-api.','blind','trim','analysis.automation.triggerAction','Ungew√∂hnliches\x20Bewegungsmuster!\x20(Score:\x20','dutycycle','Training\x20Error:\x20','isEmergency','loadDailyDigests','üêç\x20Guardian\x20Diagnosis:\x20','members','weatherInstance','LTM.driftAnalysis.baselineDrift','.Current.Temperature','TRAIN_SECURITY','length','stringify','[RESULT]','set_temperature','initPresenceSubscriptions','analysis.health.trendDiagnosis','GUEST','normal','value','Started...','ROLLE:\x20Assistent.\x20AUFGABE:\x20Schreibe\x20\x22Guten\x20Morgen\x22-Nachricht.\x20PERSONA:\x20','version','off','‚ö†Ô∏è\x20Python\x20missing\x20libs.\x20Auto-Install\x20triggered.','Error\x20checking\x20WiFi:\x20','shift','HARD\x20WATCHDOG:\x20No\x20activity\x20for\x20','state','N/A\x20(Learning)','dailyDigests','currentSystemMode','analysis.security.lastCheck','getDate',')\x20-\x20FINAL\x20CLASS\x20FIX','targetValue','sendMorningBriefing','payload','unknown','location','weatherunderground','TRAIN_HEALTH','updateBaselineStatus','pop','.\x20DATEN:\x20Schlaf\x20','.communicate.request','checkWifiPresence','BUTLER\x20Execution\x20Error:\x20','error','PARTY','initSystemConfig','name','toISOString','window','stderr','insulation','checkLicense','runGeminiAnalysis','driftAnalysisTimer','Failed:\x20','status','‚ùå\x20PIP\x20INSTALL\x20FAILED:\x20','‚úÖ\x20Alles\x20OK\x20(Reset)]','HEALTH_TRAIN_RESULT','bin','ü§ñ\x20BUTLER:\x20Executing\x20Action\x20->\x20','Unbekannt','LTM.processingStatus','python.exe','timestamp','N/A','onMessage','LTM.rawEventLog','Bibliotheken\x20nicht\x20gefunden','admin.','briefingJob','processSensorEvent','3606rYQEpg','info','.\x20WETTER:\x20','klima','analysis.triggerBriefing','subscribeStates','KI-Modell\x20nicht\x20initialisiert','switch','sequenceTimer','level','pip','saveDailyDigests','kill','exitTimer','system.isPresent','recordThermodynamics','‚ö†Ô∏è\x20VENV\x20missing.\x20Attempting\x20install...','outdoorSensorId','analysis.automation.targetId','triggerDailyDigest','unreach','log','analysisInterval','presenceDevices','Gemini\x20Error:\x20','abortExitTimer','cancel','direction','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','analysis.training.triggerHealth','events.history_debug_00','analysis.analysisHistory','sendToPython','[PYTHON]\x20Exited\x20code\x20','ANALYZE_HEALTH','notifyTelegramEnabled','currentposition','Alarm','aiPersona','licenseKey','360IyGmLe','getWeatherContext','map','835083EFkKiv','dependencyInstallInProgress','üêç\x20Using\x20VENV\x20Python:\x20','installRequirementsInVenv','ltmJob','initZombies','scriptProblem','LTM.driftAnalysis','üåÖ\x20Daily\x20Briefing:\x0a','Scanning\x20for\x20devices...','üõ†Ô∏è\x20MAINTENANCE\x20MODE:\x20Installing\x20Python\x20dependencies.\x20Do\x20not\x20restart!','val','644380YEopif','üß†\x20Triggering\x20Security\x20Training\x20with\x20','loadRawEventLog','NORMAL','simulateButler','models/gemini-flash-latest','modeResetJob','getFullYear','3665cYUxxH','.\x20KONTEXT:\x20','.venv','automationProposal','lastAlertState','sendTo','apiKey','executeAutomationAction','telegram','type','city','analysis.energy.insulationScore','ENERGY_TRAIN_RESULT','setState','notifyPushoverRecipient','system.presenceWho','getCalendarContext','unshift','isAlert','stopPythonService','...','13979cRbCOZ','TREND_RESULT','setPresence','object','analysis.training.triggerEnergy','humidity','round','setupModeResetScheduler','stdout','config','ical.0','devices','guest','Fokus\x20auf\x20Komfort.','icons-mfd.','getCalendarNames','inactivityThresholdHours','doors','toLocaleTimeString','python','geminiModel','find','analysis.isAlert','debug','system.','Keine\x20Details.','onReady','analysisTimer','systemUUID','detected','text','getStateAsync','setHours','setupBriefingScheduler','config_pending','platform','.data.table','occupancy','runAutopilot','testApiKey','submitFeedback','warn','createAllObjects','getLtmData','enum.functions.*','minDaysForBaseline','replace','join','3FESbcv','summary','/100.\x20OUTPUT:\x20Text.','üêç\x20Stopping\x20Python...','python_service','targetId','analysis.health.isAnomaly','saveRawEventLog','activeSequence','notifyTelegramRecipient','requirements.txt','isPresent','expire','üß™\x20Simulating\x20Butler\x20Proposal:\x20','PRIORIT√ÑT:\x20Gesundheit/AAL.','getOverviewData','sort','analysis.security.lastScore','working','existsSync','Unknown','sound','echarts.','startPythonService','ü§ñ\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','search','feedbackHistory','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','light','saveCompletedSequence','parse','1726847wuMHzX','reachable','ltmLtbWindowDays','analysisHistory','isGracePeriodActive','toString','notifyPushoverInstance','enum','automation.triggerAction','onStateChange','constructor','163820qanPae','ack','‚ö†Ô∏è\x20SECURITY\x20ALARM:\x20','loadSystemMode','üõ°Ô∏è\x20SECURITY:\x20Sending\x20sequence\x20to\x20Guard\x20for\x20analysis...','stateChange'];a0_0x1a14=function(){return _0x1b6dd0;};return a0_0x1a14();}const utils=require(a0_0x5a8b2c(0x2aa)),{GoogleGenerativeAI}=require('@google/generative-ai'),schedule=require(a0_0x5a8b2c(0x2d0)),{spawn,exec}=require(a0_0x5a8b2c(0x278)),path=require(a0_0x5a8b2c(0x2c9)),fs=require('fs'),HISTORY_MAX_SIZE=0x32,RAW_LOG_MAX_SIZE=0x5dc,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL=a0_0x5a8b2c(0x1f7),LTM_SCHEDULE='0\x203\x20*\x20*\x20*',MODE_RESET_SCHEDULE='0\x204\x20*\x20*\x20*',SEQUENCE_TIMEOUT_MS=0x5*0x3c*0x3e8,MAX_TRAINING_SET_SIZE=0x1f4,THERMO_LOG_SIZE=0x3e8,ANALYSIS_HISTORY_MAX_SIZE=0x64,EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,LTM_DP_RAW_LOG=a0_0x5a8b2c(0x1b6),LTM_DP_DAILY_DIGESTS=a0_0x5a8b2c(0x2e6),LTM_DP_STATUS=a0_0x5a8b2c(0x1b1),LTM_DP_TRIGGER_DIGEST='LTM.triggerDailyDigest',LTM_DP_BASELINE_STATUS=a0_0x5a8b2c(0x270),LTM_DP_DRIFT_CHANNEL=a0_0x5a8b2c(0x1ed),LTM_DP_DRIFT_STATUS=a0_0x5a8b2c(0x176),LTM_DP_DRIFT_DETAILS=a0_0x5a8b2c(0x2ec),LTM_DP_DRIFT_LAST_CHECK='LTM.driftAnalysis.lastCheck',SYSTEM_DP_MODE='system.mode',SYSTEM_MODES={'NORMAL':a0_0x5a8b2c(0x180),'VACATION':a0_0x5a8b2c(0x169),'PARTY':a0_0x5a8b2c(0x2fa),'GUEST':a0_0x5a8b2c(0x21b)},AUTO_RESET_MODES=[SYSTEM_MODES[a0_0x5a8b2c(0x19f)],SYSTEM_MODES[a0_0x5a8b2c(0x17f)]],PERSONA_MAPPING={'generic':'Analysiere\x20ausgewogen.','senior_aal':a0_0x5a8b2c(0x24d),'family':'Fokus\x20auf\x20Familienroutinen.','single_comfort':a0_0x5a8b2c(0x21c),'security':'PRIORIT√ÑT:\x20Sicherheit.'},ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0},HARD_IGNORE_TERMS=[a0_0x5a8b2c(0x1ec),a0_0x5a8b2c(0x2da),'update',a0_0x5a8b2c(0x1cf),'lowbat','rssi','connection',a0_0x5a8b2c(0x30e),a0_0x5a8b2c(0x19e),a0_0x5a8b2c(0x14f),a0_0x5a8b2c(0x251),a0_0x5a8b2c(0x1d6),'stick_unreach',a0_0x5a8b2c(0x231),a0_0x5a8b2c(0x16f),a0_0x5a8b2c(0x28a),a0_0x5a8b2c(0x25f),a0_0x5a8b2c(0x2a6)],BAD_NAMES=[a0_0x5a8b2c(0x2f2),a0_0x5a8b2c(0x1df),a0_0x5a8b2c(0x18a),a0_0x5a8b2c(0x1c4),a0_0x5a8b2c(0x181),a0_0x5a8b2c(0x2bc),'on',a0_0x5a8b2c(0x185),a0_0x5a8b2c(0x1c2),a0_0x5a8b2c(0x2fb),'shutter',a0_0x5a8b2c(0x16b),a0_0x5a8b2c(0x14b),a0_0x5a8b2c(0x1aa),a0_0x5a8b2c(0x148),a0_0x5a8b2c(0x27a),a0_0x5a8b2c(0x234),a0_0x5a8b2c(0x27b),a0_0x5a8b2c(0x214),'power',a0_0x5a8b2c(0x144),'setpoint',a0_0x5a8b2c(0x275),'actual_temperature',a0_0x5a8b2c(0x17c)],ADAPTER_BLACKLIST=[a0_0x5a8b2c(0x227),a0_0x5a8b2c(0x1b8),'info.',a0_0x5a8b2c(0x149),'history.',a0_0x5a8b2c(0x142),a0_0x5a8b2c(0x21d),'flot.',a0_0x5a8b2c(0x255),a0_0x5a8b2c(0x2c3),a0_0x5a8b2c(0x16a)],IS_WIN=process[a0_0x5a8b2c(0x232)]===a0_0x5a8b2c(0x152),VENV_PATH=path[a0_0x5a8b2c(0x23e)](__dirname,a0_0x5a8b2c(0x1fc)),PYTHON_EXE=IS_WIN?path[a0_0x5a8b2c(0x23e)](VENV_PATH,a0_0x5a8b2c(0x30a),a0_0x5a8b2c(0x1b2)):path[a0_0x5a8b2c(0x23e)](VENV_PATH,a0_0x5a8b2c(0x1ae),a0_0x5a8b2c(0x222)),PIP_EXE=IS_WIN?path[a0_0x5a8b2c(0x23e)](VENV_PATH,a0_0x5a8b2c(0x30a),'pip.exe'):path['join'](VENV_PATH,a0_0x5a8b2c(0x1ae),a0_0x5a8b2c(0x1c5));class CogniLiving extends utils[a0_0x5a8b2c(0x2b2)]{constructor(_0x3594ed){const _0x48bc7f=a0_0x5a8b2c;super({..._0x3594ed,'name':_0x48bc7f(0x2e7)}),this['eventHistory']=[],this[_0x48bc7f(0x261)]=[],this[_0x48bc7f(0x259)]=[],this['rawEventLog']=[],this['dailyDigests']=[],this['sensorLastValues']={},this[_0x48bc7f(0x2b0)]={'latitude':0x0,'longitude':0x0,'city':''},this['isPresent']=!![],this[_0x48bc7f(0x1c8)]=null,this[_0x48bc7f(0x2d1)]=null,this[_0x48bc7f(0x262)]=![],this[_0x48bc7f(0x2ef)]=null,this[_0x48bc7f(0x223)]=null,this[_0x48bc7f(0x18d)]=SYSTEM_MODES[_0x48bc7f(0x1f5)],this[_0x48bc7f(0x30b)]=![],this[_0x48bc7f(0x1fe)]=![],this[_0x48bc7f(0x22b)]=_0x48bc7f(0x194),this['analysisTimer']=null,this[_0x48bc7f(0x1ea)]=null,this['modeResetJob']=null,this['driftAnalysisTimer']=null,this[_0x48bc7f(0x1b9)]=null,this[_0x48bc7f(0x274)]=null,this[_0x48bc7f(0x1e7)]=![],this['activeSequence']=[],this[_0x48bc7f(0x1c3)]=null,this['on']('ready',this[_0x48bc7f(0x229)]['bind'](this)),this['on'](_0x48bc7f(0x26e),this[_0x48bc7f(0x267)][_0x48bc7f(0x315)](this)),this['on']('unload',this[_0x48bc7f(0x2a2)][_0x48bc7f(0x315)](this)),this['on']('message',this[_0x48bc7f(0x1b5)][_0x48bc7f(0x315)](this));}async[a0_0x5a8b2c(0x229)](){const _0x9bd2a8=a0_0x5a8b2c;this['log'][_0x9bd2a8(0x1bc)]('cogni-living\x20adapter\x20starting\x20(v'+this[_0x9bd2a8(0x184)]+_0x9bd2a8(0x190)),await this['initZombies'](),this['config'][_0x9bd2a8(0x1e2)]=this[_0x9bd2a8(0x218)]['licenseKey']||'';try{this[_0x9bd2a8(0x30b)]=await this['checkLicense'](this[_0x9bd2a8(0x218)][_0x9bd2a8(0x1e2)]);}catch(_0x140928){}if(!this[_0x9bd2a8(0x218)][_0x9bd2a8(0x21f)]||this[_0x9bd2a8(0x218)][_0x9bd2a8(0x21f)]<0.1)this['config'][_0x9bd2a8(0x21f)]=0xc;await this[_0x9bd2a8(0x285)](),await this[_0x9bd2a8(0x1a0)]();if(this[_0x9bd2a8(0x218)]['geminiApiKey'])try{this[_0x9bd2a8(0x2ef)]=new GoogleGenerativeAI(this[_0x9bd2a8(0x218)][_0x9bd2a8(0x146)]),this[_0x9bd2a8(0x223)]=this[_0x9bd2a8(0x2ef)][_0x9bd2a8(0x2dc)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':'application/json'}}),this[_0x9bd2a8(0x1d0)][_0x9bd2a8(0x1bc)](_0x9bd2a8(0x311));}catch(_0x515397){this[_0x9bd2a8(0x1d0)][_0x9bd2a8(0x19e)]('Gemini\x20Init\x20Error:\x20'+_0x515397[_0x9bd2a8(0x2d4)]);}await this[_0x9bd2a8(0x239)](),await this[_0x9bd2a8(0x26c)](),await this['loadRawEventLog'](),await this[_0x9bd2a8(0x172)](),this['subscribeStates']('analysis.trigger'),this[_0x9bd2a8(0x1c0)](LTM_DP_TRIGGER_DIGEST),this[_0x9bd2a8(0x1c0)]('system.mode'),this['subscribeStates'](_0x9bd2a8(0x1bf)),this[_0x9bd2a8(0x1c0)](_0x9bd2a8(0x16d)),this[_0x9bd2a8(0x1c0)]('analysis.automation.autoApply'),this[_0x9bd2a8(0x1c0)]('analysis.training.triggerSecurity'),this[_0x9bd2a8(0x1c0)](_0x9bd2a8(0x1d8)),this[_0x9bd2a8(0x1c0)](_0x9bd2a8(0x213)),await this[_0x9bd2a8(0x2f0)](),await this[_0x9bd2a8(0x17d)](),await this[_0x9bd2a8(0x2fe)](),setTimeout(()=>this['checkWifiPresence'](),0x1388);if(this[_0x9bd2a8(0x22a)])clearInterval(this[_0x9bd2a8(0x22a)]);const _0x48cc66=this[_0x9bd2a8(0x218)][_0x9bd2a8(0x1d1)]||0xf;_0x48cc66>0x0&&(this[_0x9bd2a8(0x22a)]=setInterval(()=>{const _0x2cf295=_0x9bd2a8;this[_0x2cf295(0x235)]();},_0x48cc66*0x3c*0x3e8)),this[_0x9bd2a8(0x2e8)](),this[_0x9bd2a8(0x216)](),this['setupDriftAnalysisScheduler'](),this[_0x9bd2a8(0x230)](),this[_0x9bd2a8(0x256)](),setTimeout(()=>{const _0x534c6d=_0x9bd2a8;if(this[_0x534c6d(0x274)])this[_0x534c6d(0x2b9)]();},0x1388);}['onUnload'](_0x39611f){const _0x3bec82=a0_0x5a8b2c;if(this['analysisTimer'])clearInterval(this[_0x3bec82(0x22a)]);if(this[_0x3bec82(0x1a8)])clearInterval(this[_0x3bec82(0x1a8)]);if(this[_0x3bec82(0x1ea)])this[_0x3bec82(0x1ea)][_0x3bec82(0x1d5)]();if(this[_0x3bec82(0x1f8)])this['modeResetJob'][_0x3bec82(0x1d5)]();if(this['briefingJob'])this['briefingJob']['cancel']();if(this[_0x3bec82(0x1c8)])clearTimeout(this[_0x3bec82(0x1c8)]);if(this[_0x3bec82(0x2d1)])clearTimeout(this[_0x3bec82(0x2d1)]);this[_0x3bec82(0x20d)](),_0x39611f();}async[a0_0x5a8b2c(0x267)](_0x5b9f79,_0x16b1fd){const _0x4ef298=a0_0x5a8b2c;if(!_0x16b1fd)return;if(this['dependencyInstallInProgress'])return;if(_0x5b9f79[_0x4ef298(0x14c)](_0x4ef298(0x202))&&_0x5b9f79['endsWith'](_0x4ef298(0x2e1))&&_0x16b1fd['val']){await this[_0x4ef298(0x280)](_0x16b1fd[_0x4ef298(0x1f1)]);return;}if(_0x5b9f79===this[_0x4ef298(0x2df)]+'.'+SYSTEM_DP_MODE){_0x16b1fd[_0x4ef298(0x1f1)]&&Object[_0x4ef298(0x27d)](SYSTEM_MODES)[_0x4ef298(0x14c)](_0x16b1fd[_0x4ef298(0x1f1)])&&(this[_0x4ef298(0x18d)]=_0x16b1fd[_0x4ef298(0x1f1)],_0x16b1fd[_0x4ef298(0x1f1)]===SYSTEM_MODES[_0x4ef298(0x293)]?await this[_0x4ef298(0x211)](![]):await this[_0x4ef298(0x211)](!![]));if(!_0x16b1fd[_0x4ef298(0x26a)])this['setState'](_0x5b9f79,{'val':this[_0x4ef298(0x18d)],'ack':!![]});return;}if(!_0x16b1fd[_0x4ef298(0x26a)]){_0x5b9f79[_0x4ef298(0x14c)](_0x4ef298(0x2f3))&&_0x16b1fd[_0x4ef298(0x1f1)]&&(this[_0x4ef298(0x207)](_0x5b9f79,{'val':![],'ack':!![]}),this[_0x4ef298(0x1a7)]());if(_0x5b9f79[_0x4ef298(0x14c)](_0x4ef298(0x1ce))&&_0x16b1fd[_0x4ef298(0x1f1)]){this[_0x4ef298(0x207)](_0x5b9f79,{'val':![],'ack':!![]});if(this[_0x4ef298(0x30b)])this['createDailyDigest']();}_0x5b9f79[_0x4ef298(0x14c)]('triggerBriefing')&&_0x16b1fd[_0x4ef298(0x1f1)]&&(this[_0x4ef298(0x207)](_0x5b9f79,{'val':![],'ack':!![]}),this[_0x4ef298(0x192)]());_0x5b9f79[_0x4ef298(0x14c)](_0x4ef298(0x266))&&_0x16b1fd[_0x4ef298(0x1f1)]&&(this['setState'](_0x5b9f79,{'val':![],'ack':!![]}),this[_0x4ef298(0x201)]());if(_0x5b9f79[_0x4ef298(0x14c)](_0x4ef298(0x2c0))&&_0x16b1fd[_0x4ef298(0x1f1)]){this[_0x4ef298(0x207)](_0x5b9f79,{'val':![],'ack':!![]});if(!this[_0x4ef298(0x30b)])return;try{const _0x48b079=await this['getStateAsync']('LTM.trainingData.sequences');if(_0x48b079&&_0x48b079[_0x4ef298(0x1f1)]){const _0x32e7a0=JSON[_0x4ef298(0x25d)](_0x48b079[_0x4ef298(0x1f1)]);this[_0x4ef298(0x1d0)][_0x4ef298(0x1bc)](_0x4ef298(0x1f3)+_0x32e7a0[_0x4ef298(0x179)]+_0x4ef298(0x2e9)),this['setStateAsync']('analysis.training.status',{'val':_0x4ef298(0x2b7),'ack':!![]}),this[_0x4ef298(0x1db)](_0x4ef298(0x178),{'sequences':_0x32e7a0});}}catch(_0x795e0b){this[_0x4ef298(0x1d0)]['error'](_0x4ef298(0x170)+_0x795e0b['message']);}}if(_0x5b9f79[_0x4ef298(0x14c)](_0x4ef298(0x1d8))&&_0x16b1fd[_0x4ef298(0x1f1)]){this[_0x4ef298(0x207)](_0x5b9f79,{'val':![],'ack':!![]});if(!this[_0x4ef298(0x30b)])return;try{const _0x2ccbbb=await this['getStateAsync'](LTM_DP_DAILY_DIGESTS);_0x2ccbbb&&_0x2ccbbb[_0x4ef298(0x1f1)]&&this[_0x4ef298(0x1db)](_0x4ef298(0x197),{'digests':JSON[_0x4ef298(0x25d)](_0x2ccbbb['val'])});}catch(_0x1b38d4){}}if(_0x5b9f79[_0x4ef298(0x14c)]('analysis.training.triggerEnergy')&&_0x16b1fd[_0x4ef298(0x1f1)]){this[_0x4ef298(0x207)](_0x5b9f79,{'val':![],'ack':!![]});if(!this[_0x4ef298(0x30b)])return;try{const _0x3fda0a=await this[_0x4ef298(0x22e)](_0x4ef298(0x27c));_0x3fda0a&&_0x3fda0a[_0x4ef298(0x1f1)]&&this['sendToPython'](_0x4ef298(0x2a4),{'points':JSON[_0x4ef298(0x25d)](_0x3fda0a['val'])});}catch(_0x2daec0){}}return;}if(this[_0x4ef298(0x218)]['presenceDevices']&&this[_0x4ef298(0x218)][_0x4ef298(0x1d2)][_0x4ef298(0x14c)](_0x5b9f79)){await this[_0x4ef298(0x19c)]();return;}const _0x52ca6d=(this[_0x4ef298(0x218)][_0x4ef298(0x21a)]||[])[_0x4ef298(0x224)](_0x2f2286=>_0x2f2286['id']===_0x5b9f79);if(_0x52ca6d)this[_0x4ef298(0x1ba)](_0x5b9f79,_0x16b1fd,_0x52ca6d);}async[a0_0x5a8b2c(0x1b5)](_0x4ad56d){const _0x2b1fc1=a0_0x5a8b2c;if(typeof _0x4ad56d===_0x2b1fc1(0x212)&&_0x4ad56d[_0x2b1fc1(0x2d4)]){if(_0x4ad56d[_0x2b1fc1(0x306)]===_0x2b1fc1(0x236)){const _0x2b0499=_0x4ad56d['message'][_0x2b1fc1(0x200)]||this[_0x2b1fc1(0x218)][_0x2b1fc1(0x146)];if(!_0x2b0499)return this[_0x2b1fc1(0x1ff)](_0x4ad56d['from'],_0x4ad56d['command'],{'success':![],'message':_0x2b1fc1(0x313)},_0x4ad56d[_0x2b1fc1(0x28d)]);try{const _0x32617a=new GoogleGenerativeAI(_0x2b0499),_0x52c25f=_0x32617a['getGenerativeModel']({'model':GEMINI_MODEL}),_0x38c73a=await _0x52c25f[_0x2b1fc1(0x160)](_0x2b1fc1(0x314)),_0x12759b=await _0x38c73a['response'],_0x432488=_0x12759b['text']();this['sendTo'](_0x4ad56d[_0x2b1fc1(0x15a)],_0x4ad56d[_0x2b1fc1(0x306)],{'success':!![],'message':_0x2b1fc1(0x2c4)+_0x432488[_0x2b1fc1(0x2ce)](0x0,0x14)+_0x2b1fc1(0x20e)},_0x4ad56d[_0x2b1fc1(0x28d)]);}catch(_0x33e5bf){this['sendTo'](_0x4ad56d[_0x2b1fc1(0x15a)],_0x4ad56d[_0x2b1fc1(0x306)],{'success':![],'message':'Fehler:\x20'+_0x33e5bf[_0x2b1fc1(0x2d4)]},_0x4ad56d[_0x2b1fc1(0x28d)]);}}else{if(_0x4ad56d[_0x2b1fc1(0x306)]===_0x2b1fc1(0x145)){const _0x2875f1=await this[_0x2b1fc1(0x1e4)](),_0x29f55d=await this['getCalendarContext']();this[_0x2b1fc1(0x1ff)](_0x4ad56d['from'],_0x4ad56d[_0x2b1fc1(0x306)],{'success':!![],'weather':_0x2875f1,'calendar':_0x29f55d},_0x4ad56d[_0x2b1fc1(0x28d)]);}else{if(_0x4ad56d[_0x2b1fc1(0x306)]===_0x2b1fc1(0x23a)){if(!this[_0x2b1fc1(0x30b)])return this[_0x2b1fc1(0x1ff)](_0x4ad56d['from'],_0x4ad56d[_0x2b1fc1(0x306)],{'success':![],'isPro':![]},_0x4ad56d[_0x2b1fc1(0x28d)]);let _0x3270b3={'status':'N/A','details':''};try{const _0x3e8ee9=await this['getStateAsync'](LTM_DP_DRIFT_STATUS),_0x464094=await this[_0x2b1fc1(0x22e)](LTM_DP_DRIFT_DETAILS);_0x3270b3[_0x2b1fc1(0x1aa)]=_0x3e8ee9?_0x3e8ee9[_0x2b1fc1(0x1f1)]:'N/A',_0x3270b3['details']=_0x464094?_0x464094['val']:'';}catch(_0x2cace4){}this[_0x2b1fc1(0x1ff)](_0x4ad56d[_0x2b1fc1(0x15a)],_0x4ad56d[_0x2b1fc1(0x306)],{'success':!![],'isPro':!![],'dailyDigests':this[_0x2b1fc1(0x18c)],'driftAnalysis':_0x3270b3,'analysisHistory':this[_0x2b1fc1(0x261)]},_0x4ad56d[_0x2b1fc1(0x28d)]);}else{if(_0x4ad56d['command']===_0x2b1fc1(0x24e)){const _0x1fee2b=this['dailyDigests'][_0x2b1fc1(0x179)],_0x4980cd=new Date(),_0x5ba829=new Date(_0x4980cd[_0x2b1fc1(0x1f9)](),_0x4980cd[_0x2b1fc1(0x288)](),_0x4980cd[_0x2b1fc1(0x18f)]())[_0x2b1fc1(0x2d9)](),_0x2ef0d9=this[_0x2b1fc1(0x28f)]['filter'](_0x51bb95=>new Date(_0x51bb95['timestamp'])[_0x2b1fc1(0x2d9)]()>_0x5ba829)[_0x2b1fc1(0x179)],_0x5d947f=new Array(0x18)['fill'](0x0);this[_0x2b1fc1(0x28f)]['forEach'](_0x21506d=>{const _0x5adf9e=_0x2b1fc1,_0x57dfe0=new Date(_0x21506d['timestamp']);if(_0x57dfe0[_0x5adf9e(0x2d9)]()>_0x5ba829)_0x5d947f[_0x57dfe0[_0x5adf9e(0x2a0)]()]++;});let _0x5ec767={'status':_0x2b1fc1(0x1b4)};try{const _0x2754ca=await this[_0x2b1fc1(0x22e)](LTM_DP_DRIFT_STATUS);_0x5ec767[_0x2b1fc1(0x1aa)]=_0x2754ca?_0x2754ca[_0x2b1fc1(0x1f1)]:_0x2b1fc1(0x1b4);}catch(_0x2801fe){}let _0x16759d='';try{const _0x3e1c5f=await this['getStateAsync'](_0x2b1fc1(0x209));_0x16759d=_0x3e1c5f?_0x3e1c5f['val']:'';}catch(_0x2c241a){}let _0xf501e0=null;!this['geminiModel']&&(_0xf501e0=this['config'][_0x2b1fc1(0x146)]?_0x2b1fc1(0x1c1):_0x2b1fc1(0x287));let _0x52b646={'detected':![],'description':'','targetId':'','targetValue':'','autoApply':![]};try{const _0xdc5873=await this[_0x2b1fc1(0x22e)](_0x2b1fc1(0x2af)),_0x5cb9ce=await this['getStateAsync'](_0x2b1fc1(0x2cd)),_0x29f08a=await this[_0x2b1fc1(0x22e)](_0x2b1fc1(0x1cd)),_0x30ac88=await this[_0x2b1fc1(0x22e)]('analysis.automation.targetValue'),_0x394308=await this[_0x2b1fc1(0x22e)]('analysis.automation.autoApply');_0xdc5873&&_0xdc5873[_0x2b1fc1(0x1f1)]&&(_0x52b646[_0x2b1fc1(0x22c)]=!![],_0x52b646[_0x2b1fc1(0x2b3)]=_0x5cb9ce?_0x5cb9ce[_0x2b1fc1(0x1f1)]:'',_0x52b646[_0x2b1fc1(0x244)]=_0x29f08a?_0x29f08a[_0x2b1fc1(0x1f1)]:'',_0x52b646[_0x2b1fc1(0x191)]=_0x30ac88?_0x30ac88[_0x2b1fc1(0x1f1)]:''),_0x52b646[_0x2b1fc1(0x162)]=_0x394308?!!_0x394308[_0x2b1fc1(0x1f1)]:![];}catch(_0xbf7117){}this[_0x2b1fc1(0x1ff)](_0x4ad56d[_0x2b1fc1(0x15a)],_0x4ad56d['command'],{'success':!![],'eventHistory':this[_0x2b1fc1(0x277)][_0x2b1fc1(0x281)](0x0,0xf),'stats':{'digestCount':_0x1fee2b,'eventCountToday':_0x2ef0d9,'hourlyActivity':_0x5d947f,'driftStatus':_0x5ec767[_0x2b1fc1(0x1aa)],'isPresent':this[_0x2b1fc1(0x24a)],'presenceWho':_0x16759d,'minDays':this[_0x2b1fc1(0x218)][_0x2b1fc1(0x23c)]||0x7,'stbDays':this[_0x2b1fc1(0x218)]['ltmStbWindowDays']||0xe,'ltbDays':this[_0x2b1fc1(0x218)]['ltmLtbWindowDays']||0x3c,'systemError':_0xf501e0},'automation':_0x52b646},_0x4ad56d['callback']);}else{if(_0x4ad56d[_0x2b1fc1(0x306)]==='scanDevices')try{const _0x46a476=await this['scanForDevices'](_0x4ad56d[_0x2b1fc1(0x2d4)]||{});this[_0x2b1fc1(0x1ff)](_0x4ad56d['from'],_0x4ad56d[_0x2b1fc1(0x306)],{'success':!![],'devices':_0x46a476},_0x4ad56d[_0x2b1fc1(0x28d)]);}catch(_0x5d87be){this[_0x2b1fc1(0x1ff)](_0x4ad56d[_0x2b1fc1(0x15a)],_0x4ad56d[_0x2b1fc1(0x306)],{'success':![],'error':_0x5d87be[_0x2b1fc1(0x2d4)]},_0x4ad56d['callback']);}else{if(_0x4ad56d[_0x2b1fc1(0x306)]===_0x2b1fc1(0x2ed)){const _0x40c1de=await this['getForeignObjectsAsync'](_0x2b1fc1(0x23b),_0x2b1fc1(0x265)),_0x55654e=[];if(_0x40c1de)for(const _0x1d533c in _0x40c1de){const _0x5b0c22=_0x40c1de[_0x1d533c],_0x45c6c3=(_0x5b0c22['common']&&typeof _0x5b0c22['common'][_0x2b1fc1(0x1a1)]===_0x2b1fc1(0x212)?_0x5b0c22[_0x2b1fc1(0x150)][_0x2b1fc1(0x1a1)]['de']:_0x5b0c22[_0x2b1fc1(0x150)]['name'])||_0x5b0c22[_0x2b1fc1(0x150)][_0x2b1fc1(0x1a1)];_0x55654e[_0x2b1fc1(0x272)]({'id':_0x1d533c,'name':_0x45c6c3});}this[_0x2b1fc1(0x1ff)](_0x4ad56d[_0x2b1fc1(0x15a)],_0x4ad56d['command'],{'success':!![],'enums':_0x55654e},_0x4ad56d[_0x2b1fc1(0x28d)]);}else{if(_0x4ad56d['command']===_0x2b1fc1(0x21e)){const _0xd54bd8=_0x4ad56d[_0x2b1fc1(0x2d4)]['instance'];if(!_0xd54bd8)return this[_0x2b1fc1(0x1ff)](_0x4ad56d['from'],_0x4ad56d[_0x2b1fc1(0x306)],{'success':![],'error':_0x2b1fc1(0x15e)},_0x4ad56d[_0x2b1fc1(0x28d)]);const _0x56e54c=await this['getCalendarNames'](_0xd54bd8);this['sendTo'](_0x4ad56d[_0x2b1fc1(0x15a)],_0x4ad56d[_0x2b1fc1(0x306)],{'success':!![],'names':_0x56e54c},_0x4ad56d[_0x2b1fc1(0x28d)]);}else{if(_0x4ad56d[_0x2b1fc1(0x306)]===_0x2b1fc1(0x1f6)){const {targetId:_0x5c4fb6,targetValue:_0x204552}=_0x4ad56d[_0x2b1fc1(0x2d4)];this[_0x2b1fc1(0x1d0)]['info'](_0x2b1fc1(0x24c)+_0x5c4fb6+_0x2b1fc1(0x300)+_0x204552),await this['setStateAsync'](_0x2b1fc1(0x2af),{'val':!![],'ack':!![]}),await this[_0x2b1fc1(0x2d5)]('analysis.automation.description',{'val':'SIMULATION:\x20Test-Vorschlag\x20f√ºr\x20'+_0x5c4fb6,'ack':!![]}),await this[_0x2b1fc1(0x2d5)](_0x2b1fc1(0x1cd),{'val':_0x5c4fb6,'ack':!![]}),await this[_0x2b1fc1(0x2d5)](_0x2b1fc1(0x2e4),{'val':_0x204552,'ack':!![]}),this[_0x2b1fc1(0x1ff)](_0x4ad56d[_0x2b1fc1(0x15a)],_0x4ad56d[_0x2b1fc1(0x306)],{'success':!![]},_0x4ad56d['callback']);}else{if(_0x4ad56d['command']===_0x2b1fc1(0x237)){const {historyId:_0x5c3c2e,rating:_0x3ee049,comment:_0x3e6805,alertReason:_0x259a07}=_0x4ad56d['message'];_0x5c3c2e&&_0x3ee049?(await this['saveFeedback']({'timestamp':Date[_0x2b1fc1(0x2c5)](),'historyId':_0x5c3c2e,'rating':_0x3ee049,'comment':_0x3e6805,'alertReason':_0x259a07}),this[_0x2b1fc1(0x1ff)](_0x4ad56d[_0x2b1fc1(0x15a)],_0x4ad56d[_0x2b1fc1(0x306)],{'success':!![]},_0x4ad56d['callback'])):this[_0x2b1fc1(0x1ff)](_0x4ad56d[_0x2b1fc1(0x15a)],_0x4ad56d['command'],{'success':![],'error':_0x2b1fc1(0x29c)},_0x4ad56d[_0x2b1fc1(0x28d)]);}else _0x4ad56d[_0x2b1fc1(0x306)]===_0x2b1fc1(0x29f)&&(this['log']['info'](_0x2b1fc1(0x30f)),await this[_0x2b1fc1(0x2d5)](_0x2b1fc1(0x2af),{'val':![],'ack':!![]}),await this[_0x2b1fc1(0x2d5)]('analysis.automation.description',{'val':'','ack':!![]}),this[_0x2b1fc1(0x1ff)](_0x4ad56d[_0x2b1fc1(0x15a)],_0x4ad56d['command'],{'success':!![]},_0x4ad56d[_0x2b1fc1(0x28d)]));}}}}}}}}}}async['processSensorEvent'](_0x4e3131,_0x44f1f3,_0x317cba){const _0x134741=a0_0x5a8b2c;if(!_0x317cba)return;const _0x45e45b=_0x44f1f3[_0x134741(0x1f1)],_0x36e674=Date[_0x134741(0x2c5)](),_0x46fe74=this['sensorLastValues'][_0x4e3131];this['sensorLastValues'][_0x4e3131]=_0x45e45b;if(!_0x317cba[_0x134741(0x2ff)]&&_0x46fe74!=undefined&&_0x46fe74==_0x45e45b)return;const _0x171181=(_0x317cba['type']||'')['toLowerCase'](),_0x3afcce=_0x171181[_0x134741(0x14c)](_0x134741(0x27b))||_0x171181[_0x134741(0x14c)](_0x134741(0x305))||_0x171181[_0x134741(0x14c)](_0x134741(0x1be))||_0x171181['includes'](_0x134741(0x158));this[_0x134741(0x30b)]&&_0x3afcce&&this[_0x134741(0x1ca)](_0x4e3131,_0x45e45b,_0x317cba[_0x134741(0x195)]);const _0x2594f9={'timestamp':_0x36e674,'id':_0x4e3131,'name':_0x317cba[_0x134741(0x1a1)],'type':_0x317cba[_0x134741(0x203)],'location':_0x317cba['location'],'value':_0x45e45b};this[_0x134741(0x277)]['unshift'](_0x2594f9);if(this[_0x134741(0x277)][_0x134741(0x179)]>HISTORY_MAX_SIZE)this['eventHistory'][_0x134741(0x199)]();await this[_0x134741(0x2d5)](_0x134741(0x309),{'val':JSON[_0x134741(0x17a)](_0x2594f9),'ack':!![]}),await this[_0x134741(0x2d5)]('events.history',{'val':JSON['stringify'](this[_0x134741(0x277)]),'ack':!![]});this[_0x134741(0x30b)]&&(this[_0x134741(0x28f)]['push'](_0x2594f9),await this[_0x134741(0x246)](),this['recordSequence'](_0x2594f9));if(_0x317cba[_0x134741(0x156)]&&_0x45e45b===!![]){if(this['isPresent']&&!this[_0x134741(0x262)])this[_0x134741(0x2ab)]();else{if(!this['isPresent'])this[_0x134741(0x211)](!![]);}}else{if(_0x317cba['type']==='motion'&&_0x45e45b===!![]){if(this[_0x134741(0x1c8)])this['abortExitTimer']();if(!this[_0x134741(0x24a)]&&this[_0x134741(0x18d)]===SYSTEM_MODES['NORMAL'])this[_0x134741(0x211)](!![]);}}}async[a0_0x5a8b2c(0x2cf)](_0x4a6154){const _0x4a0c3f=a0_0x5a8b2c,_0x3bca03=(_0x4a6154[_0x4a0c3f(0x203)]||'')[_0x4a0c3f(0x28c)](),_0x380520=[_0x4a0c3f(0x148),'bewegung','pr√§senz',_0x4a0c3f(0x27a),_0x4a0c3f(0x234),_0x4a0c3f(0x2dd),_0x4a0c3f(0x28e),_0x4a0c3f(0x1a3),'fenster',_0x4a0c3f(0x301),_0x4a0c3f(0x15b),_0x4a0c3f(0x25b),'licht',_0x4a0c3f(0x1c2),'schalter','dimmer','lampe'];if(!_0x380520['some'](_0x4fe01c=>_0x3bca03[_0x4a0c3f(0x14c)](_0x4fe01c)))return;if(!_0x4a6154[_0x4a0c3f(0x181)])return;if(this[_0x4a0c3f(0x1c3)])clearTimeout(this['sequenceTimer']);this[_0x4a0c3f(0x247)][_0x4a0c3f(0x272)]({'loc':_0x4a6154[_0x4a0c3f(0x195)]||_0x4a0c3f(0x253),'id':_0x4a6154['id'],'ts':Date[_0x4a0c3f(0x2c5)]()}),this[_0x4a0c3f(0x1d0)][_0x4a0c3f(0x226)](_0x4a0c3f(0x2f1)+_0x4a6154['location']+'\x20(Length:\x20'+this[_0x4a0c3f(0x247)][_0x4a0c3f(0x179)]+')'),this[_0x4a0c3f(0x1c3)]=setTimeout(async()=>{const _0x409cf4=_0x4a0c3f;if(this[_0x409cf4(0x247)][_0x409cf4(0x179)]>0x1)await this[_0x409cf4(0x25c)]();this[_0x409cf4(0x247)]=[];},SEQUENCE_TIMEOUT_MS);}async[a0_0x5a8b2c(0x25c)](){const _0x4e1cb6=a0_0x5a8b2c;try{const _0x3ece1b=await this[_0x4e1cb6(0x22e)](_0x4e1cb6(0x161));let _0x2db612=[];if(_0x3ece1b&&_0x3ece1b[_0x4e1cb6(0x1f1)])try{_0x2db612=JSON[_0x4e1cb6(0x25d)](_0x3ece1b[_0x4e1cb6(0x1f1)]);}catch(_0x4e63fb){}const _0x2055f9=this[_0x4e1cb6(0x247)][0x0]['ts'],_0x41c599=this[_0x4e1cb6(0x247)]['map'](_0x4def43=>({'loc':_0x4def43['loc'],'t_delta':Math['round']((_0x4def43['ts']-_0x2055f9)/0x3e8)})),_0x7b1c1b={'timestamp':new Date(_0x2055f9)['toISOString'](),'steps':_0x41c599,'duration':Math[_0x4e1cb6(0x215)]((this['activeSequence'][this[_0x4e1cb6(0x247)][_0x4e1cb6(0x179)]-0x1]['ts']-_0x2055f9)/0x3e8),'daytime':new Date(_0x2055f9)[_0x4e1cb6(0x2a0)]()};_0x2db612[_0x4e1cb6(0x272)](_0x7b1c1b);if(_0x2db612[_0x4e1cb6(0x179)]>MAX_TRAINING_SET_SIZE)_0x2db612['shift']();await this[_0x4e1cb6(0x2d5)]('LTM.trainingData.sequences',{'val':JSON['stringify'](_0x2db612),'ack':!![]}),this['runSecurityCheck'](_0x7b1c1b);}catch(_0x5e8463){this['log']['error']('[RECORDER]\x20Error\x20saving\x20sequence:\x20'+_0x5e8463[_0x4e1cb6(0x2d4)]);}}[a0_0x5a8b2c(0x2d8)](_0x367b56){const _0x1f8694=a0_0x5a8b2c;if(!this[_0x1f8694(0x30b)])return;this[_0x1f8694(0x1d0)][_0x1f8694(0x226)](_0x1f8694(0x26d)),this[_0x1f8694(0x1db)](_0x1f8694(0x165),{'sequence':_0x367b56});}[a0_0x5a8b2c(0x147)](){const _0x3941b5=a0_0x5a8b2c;if(this[_0x3941b5(0x1e7)])return;this[_0x3941b5(0x1e7)]=!![];const _0x45d6fe=path['join'](__dirname,_0x3941b5(0x243),_0x3941b5(0x249));this[_0x3941b5(0x1d0)]['info'](_0x3941b5(0x1f0)),this[_0x3941b5(0x20d)]();if(fs[_0x3941b5(0x252)](VENV_PATH)){if(!fs[_0x3941b5(0x252)](PIP_EXE)){this[_0x3941b5(0x1d0)][_0x3941b5(0x238)]('‚ö†Ô∏è\x20Broken\x20venv\x20detected.\x20Repairing...');try{fs[_0x3941b5(0x2b8)](VENV_PATH,{'recursive':!![],'force':!![]});}catch(_0x5af7fe){}}}!fs[_0x3941b5(0x252)](VENV_PATH)?exec('python3\x20-m\x20venv\x20\x22'+VENV_PATH+'\x22',_0x59dbd3=>{const _0x15baee=_0x3941b5;if(_0x59dbd3){this[_0x15baee(0x1d0)][_0x15baee(0x19e)](_0x15baee(0x2eb)),this[_0x15baee(0x1e7)]=![];return;}this[_0x15baee(0x1e9)](_0x45d6fe);}):this[_0x3941b5(0x1e9)](_0x45d6fe);}[a0_0x5a8b2c(0x1e9)](_0x5a849e){const _0xac50c8=a0_0x5a8b2c;this[_0xac50c8(0x1d0)][_0xac50c8(0x1bc)](_0xac50c8(0x310));const _0x123d19='\x22'+PIP_EXE+'\x22\x20install\x20-r\x20\x22'+_0x5a849e+'\x22';exec(_0x123d19,{'timeout':0x124f80,'maxBuffer':0x400*0x400*0x32},_0x288f95=>{const _0x2a8185=_0xac50c8;this['dependencyInstallInProgress']=![],_0x288f95?this[_0x2a8185(0x1d0)][_0x2a8185(0x19e)](_0x2a8185(0x1ab)+_0x288f95[_0x2a8185(0x2d4)]):(this[_0x2a8185(0x1d0)][_0x2a8185(0x1bc)](_0x2a8185(0x302)),this[_0x2a8185(0x256)]());});}['startPythonService'](){const _0x2cf137=a0_0x5a8b2c;if(this[_0x2cf137(0x1e7)])return;let _0x45931a=_0x2cf137(0x14e);if(fs[_0x2cf137(0x252)](PYTHON_EXE))this[_0x2cf137(0x1d0)][_0x2cf137(0x1bc)](_0x2cf137(0x1e8)+PYTHON_EXE),_0x45931a=PYTHON_EXE;else{this[_0x2cf137(0x1d0)]['warn'](_0x2cf137(0x1cb)),this['installPythonDependencies']();return;}try{const _0xf9439b=path[_0x2cf137(0x23e)](__dirname,'python_service',_0x2cf137(0x2de));this[_0x2cf137(0x274)]=spawn(_0x45931a,[_0xf9439b]),this[_0x2cf137(0x274)][_0x2cf137(0x217)]['on'](_0x2cf137(0x29d),_0x3ab193=>{const _0x34dcd8=_0x3ab193['toString']()['split']('\x0a');_0x34dcd8['forEach'](_0x169567=>{const _0x32ccb7=a0_0x4d51,_0xea0896=_0x169567['trim']();if(!_0xea0896)return;if(_0xea0896[_0x32ccb7(0x30d)]('[LOG]'))this['log'][_0x32ccb7(0x226)](_0x32ccb7(0x2e3)+_0xea0896[_0x32ccb7(0x2ce)](0x5)[_0x32ccb7(0x16c)]());else{if(_0xea0896['startsWith'](_0x32ccb7(0x17b)))try{const _0x336392=JSON[_0x32ccb7(0x25d)](_0xea0896[_0x32ccb7(0x2ce)](0x8)[_0x32ccb7(0x16c)]());this[_0x32ccb7(0x2c7)](_0x336392);}catch(_0x426d99){this['log']['warn'](_0x32ccb7(0x2fc)+_0xea0896);}}(_0xea0896[_0x32ccb7(0x14c)](_0x32ccb7(0x2a9))||_0xea0896[_0x32ccb7(0x14c)](_0x32ccb7(0x1b7)))&&(this['log'][_0x32ccb7(0x238)](_0x32ccb7(0x186)),this[_0x32ccb7(0x147)]());});}),this[_0x2cf137(0x274)][_0x2cf137(0x1a4)]['on'](_0x2cf137(0x29d),_0x4681ae=>{const _0x46dc81=_0x2cf137,_0x1ae202=_0x4681ae['toString']()['trim']();if(!_0x1ae202[_0x46dc81(0x14c)](_0x46dc81(0x2e2)))this[_0x46dc81(0x1d0)][_0x46dc81(0x19e)](_0x46dc81(0x27f)+_0x1ae202);}),this[_0x2cf137(0x274)]['on'](_0x2cf137(0x2c6),_0x4135f0=>{const _0x18e47c=_0x2cf137;this[_0x18e47c(0x1d0)][_0x18e47c(0x1bc)](_0x18e47c(0x1dc)+_0x4135f0),this[_0x18e47c(0x274)]=null;});}catch(_0x19f2a3){this[_0x2cf137(0x1d0)][_0x2cf137(0x19e)]('Error\x20launching\x20Python:\x20'+_0x19f2a3['message']);}}[a0_0x5a8b2c(0x20d)](){const _0x519b90=a0_0x5a8b2c;if(this['pythonProcess']){this[_0x519b90(0x1d0)]['info'](_0x519b90(0x242));try{this[_0x519b90(0x274)][_0x519b90(0x1c7)]();}catch(_0x1c12b3){}this[_0x519b90(0x274)]=null;}}['handlePythonResult'](_0x2067e5){const _0x54e509=a0_0x5a8b2c;if(_0x2067e5[_0x54e509(0x203)]===_0x54e509(0x154))this[_0x54e509(0x1d0)][_0x54e509(0x226)]('üêç\x20Python\x20Pong');else{if(_0x2067e5[_0x54e509(0x203)]==='SECURITY_RESULT'){const {anomaly_score:_0x38bc30,is_anomaly:_0x43c5ff,threshold:_0xacd394}=_0x2067e5['payload'];this['log'][_0x54e509(0x1bc)]('üõ°Ô∏è\x20SECURITY\x20CHECK:\x20Score\x20'+_0x38bc30['toFixed'](0x5)+_0x54e509(0x2a7)+(_0x43c5ff?'ANOMALY':'OK')),this[_0x54e509(0x2d5)](_0x54e509(0x250),{'val':_0x38bc30,'ack':!![]}),this[_0x54e509(0x2d5)](_0x54e509(0x18e),{'val':new Date()[_0x54e509(0x1a2)](),'ack':!![]});if(_0x43c5ff){const _0x12645e=_0x54e509(0x16e)+_0x38bc30[_0x54e509(0x2bf)](0x4)+')';this[_0x54e509(0x2d5)](_0x54e509(0x225),{'val':!![],'ack':!![]}),this[_0x54e509(0x2d5)](_0x54e509(0x26f),{'val':_0x12645e,'ack':!![]}),this[_0x54e509(0x29e)](_0x54e509(0x26b)+_0x12645e,![],!![]);}}else{if(_0x2067e5[_0x54e509(0x203)]==='TRAINING_COMPLETE'){const {success:_0x206d88,details:_0x4f6b5c}=_0x2067e5[_0x54e509(0x193)];this[_0x54e509(0x2d5)](_0x54e509(0x2cb),{'val':_0x206d88?_0x54e509(0x155)+new Date()[_0x54e509(0x221)]()+'\x20('+_0x4f6b5c+')':_0x54e509(0x1a9)+_0x4f6b5c,'ack':!![]});}else{if(_0x2067e5[_0x54e509(0x203)]===_0x54e509(0x206)){const {success:_0x43ded2,details:_0x21a4e3}=_0x2067e5['payload'];if(_0x43ded2)try{const _0x44ce5d=JSON['parse'](_0x21a4e3);if(_0x44ce5d[_0x54e509(0x1a5)])this['setStateAsync'](_0x54e509(0x205),{'val':JSON[_0x54e509(0x17a)](_0x44ce5d[_0x54e509(0x1a5)]),'ack':!![]});if(_0x44ce5d[_0x54e509(0x284)])this[_0x54e509(0x2d5)]('analysis.energy.heatingScore',{'val':JSON['stringify'](_0x44ce5d[_0x54e509(0x284)]),'ack':!![]});}catch(_0x2caf11){}}else{if(_0x2067e5[_0x54e509(0x203)]===_0x54e509(0x1ad)){const {success:_0x5def0a,details:_0x279874}=_0x2067e5[_0x54e509(0x193)];if(_0x5def0a)this[_0x54e509(0x1d0)][_0x54e509(0x1bc)]('‚úÖ\x20HEALTH\x20TRAINED:\x20'+_0x279874);}else{if(_0x2067e5[_0x54e509(0x203)]==='HEALTH_RESULT'){const {is_anomaly:_0x25a4c7,details:_0x2c8e82}=_0x2067e5['payload'];this[_0x54e509(0x2d5)](_0x54e509(0x297),{'val':new Date()[_0x54e509(0x1a2)](),'ack':!![]}),this[_0x54e509(0x2d5)](_0x54e509(0x245),{'val':_0x25a4c7,'ack':!![]});}else{if(_0x2067e5['type']===_0x54e509(0x210)){const {diagnosis:_0x3fdc95,change_percent:_0x250f24}=_0x2067e5[_0x54e509(0x193)];this[_0x54e509(0x1d0)][_0x54e509(0x1bc)](_0x54e509(0x173)+_0x3fdc95+'\x20('+_0x250f24+'%)'),this[_0x54e509(0x2d5)](_0x54e509(0x17e),{'val':_0x3fdc95,'ack':!![]}),this[_0x54e509(0x2d5)]('analysis.health.trendValue',{'val':_0x250f24,'ack':!![]});}}}}}}}}[a0_0x5a8b2c(0x1db)](_0x56c0d3,_0x1005b3={}){const _0x446299=a0_0x5a8b2c;if(!this[_0x446299(0x274)]||!this[_0x446299(0x274)]['stdin'][_0x446299(0x2a8)])return;const _0x127c88=JSON['stringify']({'command':_0x56c0d3,..._0x1005b3});try{this[_0x446299(0x274)][_0x446299(0x2db)][_0x446299(0x167)](_0x127c88+'\x0a');}catch(_0x22474a){}}[a0_0x5a8b2c(0x2b9)](){const _0x2056fd=a0_0x5a8b2c;if(!this[_0x2056fd(0x18c)]||this[_0x2056fd(0x18c)][_0x2056fd(0x179)]<0x2)return;const _0x42a567=this['dailyDigests'][_0x2056fd(0x1e5)](_0x5c1392=>{const _0x15772f=_0x2056fd,_0x156d03=(_0x5c1392[_0x15772f(0x164)]||'')[_0x15772f(0x28c)]();return ACTIVITY_LEVEL_MAP[_0x156d03]||0x32;});this[_0x2056fd(0x1d0)][_0x2056fd(0x1bc)](_0x2056fd(0x2a5)+_0x42a567['length']+_0x2056fd(0x27e)),this['sendToPython'](_0x2056fd(0x14d),{'values':_0x42a567,'tag':'Activity-Level'});}async[a0_0x5a8b2c(0x1ca)](_0x367e2d,_0x414955,_0xdfb177){const _0x335c5a=a0_0x5a8b2c,_0x2f6e34=await this[_0x335c5a(0x2ee)](),_0x2661e6=await this[_0x335c5a(0x22e)]('LTM.trainingData.thermodynamics');let _0x562e0a=[];if(_0x2661e6&&_0x2661e6[_0x335c5a(0x1f1)])try{_0x562e0a=JSON['parse'](_0x2661e6['val']);}catch(_0x56a79c){}_0x562e0a[_0x335c5a(0x272)]({'ts':Date[_0x335c5a(0x2c5)](),'room':_0xdfb177||'Unknown','t_in':_0x414955,'t_out':_0x2f6e34});if(_0x562e0a[_0x335c5a(0x179)]>THERMO_LOG_SIZE)_0x562e0a[_0x335c5a(0x188)]();await this[_0x335c5a(0x2d5)](_0x335c5a(0x27c),{'val':JSON['stringify'](_0x562e0a),'ack':!![]});}async[a0_0x5a8b2c(0x2ee)](){const _0x5275ac=a0_0x5a8b2c;if(this[_0x5275ac(0x218)][_0x5275ac(0x1cc)])try{const _0x498e52=await this['getForeignStateAsync'](this[_0x5275ac(0x218)][_0x5275ac(0x1cc)]);if(_0x498e52&&_0x498e52[_0x5275ac(0x1f1)]!==undefined&&_0x498e52[_0x5275ac(0x1f1)]!==null){const _0x23ef46=parseFloat(_0x498e52[_0x5275ac(0x1f1)]);if(!isNaN(_0x23ef46))return _0x23ef46;}}catch(_0x15d00c){}const _0x407c2e=this[_0x5275ac(0x218)][_0x5275ac(0x175)];if(!this[_0x5275ac(0x218)][_0x5275ac(0x2c8)]||!_0x407c2e)return null;try{let _0x86b255='';if(_0x407c2e['includes'](_0x5275ac(0x292)))_0x86b255=_0x407c2e+_0x5275ac(0x177);else{if(_0x407c2e[_0x5275ac(0x14c)]('daswetter'))_0x86b255=_0x407c2e+_0x5275ac(0x2e0);else{if(_0x407c2e[_0x5275ac(0x14c)]('openweathermap'))_0x86b255=_0x407c2e+_0x5275ac(0x273);else{if(_0x407c2e[_0x5275ac(0x14c)](_0x5275ac(0x196)))_0x86b255=_0x407c2e+_0x5275ac(0x159);}}}if(_0x86b255){const _0x37da34=await this[_0x5275ac(0x2ae)](_0x86b255);if(_0x37da34&&_0x37da34[_0x5275ac(0x1f1)]!==undefined&&_0x37da34[_0x5275ac(0x1f1)]!==null)return parseFloat(_0x37da34['val']);}}catch(_0x420e03){}return null;}async['scanForDevices'](_0x501b90){const _0x2b432f=a0_0x5a8b2c;this[_0x2b432f(0x1d0)][_0x2b432f(0x1bc)](_0x2b432f(0x1ef));const _0x5dc4af=[],_0x5a6128=await this[_0x2b432f(0x2a3)]('*'),_0x328aee=await this[_0x2b432f(0x2a3)](_0x2b432f(0x23b),'enum'),_0x2127e3=await this[_0x2b432f(0x2a3)]('enum.rooms.*',_0x2b432f(0x265)),_0x30adaf={};if(_0x328aee)for(const _0x543485 in _0x328aee){const _0x580935=_0x328aee[_0x543485][_0x2b432f(0x150)][_0x2b432f(0x174)]||[];_0x580935['forEach'](_0x3be829=>{const _0x294878=_0x2b432f;if(!_0x30adaf[_0x3be829])_0x30adaf[_0x3be829]=[];_0x30adaf[_0x3be829][_0x294878(0x272)](_0x543485);});}const _0x597d33={};if(_0x2127e3)for(const _0x4bf0db in _0x2127e3){const _0x22c598=_0x2127e3[_0x4bf0db]['common'][_0x2b432f(0x174)]||[],_0x423e55=typeof _0x2127e3[_0x4bf0db][_0x2b432f(0x150)][_0x2b432f(0x1a1)]===_0x2b432f(0x212)?_0x2127e3[_0x4bf0db][_0x2b432f(0x150)][_0x2b432f(0x1a1)]['de']:_0x2127e3[_0x4bf0db][_0x2b432f(0x150)][_0x2b432f(0x1a1)];_0x22c598[_0x2b432f(0x2d2)](_0x2a3302=>_0x597d33[_0x2a3302]=_0x423e55);}const _0x381078=_0x501b90[_0x2b432f(0x148)]!==![],_0x3a8bda=_0x501b90[_0x2b432f(0x220)]!==![],_0x461dec=_0x501b90[_0x2b432f(0x2c1)]!==![],_0x29c21a=_0x501b90[_0x2b432f(0x27b)]===!![],_0x158347=_0x501b90['weather']===!![];for(const _0x302d68 in _0x5a6128){const _0x1ca812=_0x5a6128[_0x302d68];if(_0x1ca812[_0x2b432f(0x203)]!=='state'||!_0x1ca812['common'])continue;if(ADAPTER_BLACKLIST[_0x2b432f(0x303)](_0x2b60ef=>_0x302d68[_0x2b432f(0x30d)](_0x2b60ef))&&!_0x158347)continue;const _0x1480df=(_0x1ca812[_0x2b432f(0x150)][_0x2b432f(0x307)]||'')[_0x2b432f(0x28c)]();let _0x5e1369=(typeof _0x1ca812[_0x2b432f(0x150)][_0x2b432f(0x1a1)]===_0x2b432f(0x212)?_0x1ca812[_0x2b432f(0x150)]['name']['de']:_0x1ca812[_0x2b432f(0x150)][_0x2b432f(0x1a1)])||_0x302d68;const _0x52d712=_0x5e1369[_0x2b432f(0x28c)]();let _0x97ca6d=![];if(_0x501b90[_0x2b432f(0x304)]&&_0x501b90['selectedFunctionIds']['length']>0x0){const _0x5ea757=_0x30adaf[_0x302d68]||[],_0x8cbd97=_0x302d68[_0x2b432f(0x312)]('.')[_0x2b432f(0x281)](0x0,-0x1)[_0x2b432f(0x23e)]('.'),_0x505f89=_0x30adaf[_0x8cbd97]||[];(_0x5ea757['some'](_0x3f1336=>_0x501b90['selectedFunctionIds'][_0x2b432f(0x14c)](_0x3f1336))||_0x505f89[_0x2b432f(0x303)](_0x18e55d=>_0x501b90[_0x2b432f(0x304)]['includes'](_0x18e55d)))&&(_0x97ca6d=!![]);}if(_0x158347&&_0x302d68['includes'](_0x2b432f(0x27b)))_0x97ca6d=!![];if(!_0x97ca6d&&!_0x158347){if(HARD_IGNORE_TERMS[_0x2b432f(0x303)](_0xd1d3bf=>_0x302d68[_0x2b432f(0x14c)](_0xd1d3bf)||_0x52d712[_0x2b432f(0x14c)](_0xd1d3bf[_0x2b432f(0x28c)]())))continue;}let _0x506d1f='';if(_0x381078&&(_0x1480df[_0x2b432f(0x14c)](_0x2b432f(0x148))||_0x1480df[_0x2b432f(0x14c)]('occupancy')))_0x506d1f=_0x2b432f(0x148);else{if(_0x3a8bda&&(_0x1480df[_0x2b432f(0x14c)](_0x2b432f(0x2dd))||_0x1480df[_0x2b432f(0x14c)](_0x2b432f(0x1a3))))_0x506d1f=_0x2b432f(0x2dd);else{if(_0x461dec&&(_0x1480df[_0x2b432f(0x14c)](_0x2b432f(0x25b))||_0x1480df[_0x2b432f(0x14c)]('switch')))_0x506d1f='light';else{if(_0x29c21a&&(_0x1480df[_0x2b432f(0x14c)](_0x2b432f(0x27b))||_0x1480df['includes'](_0x2b432f(0x214))))_0x506d1f=_0x2b432f(0x27b);}}}if(_0x506d1f){let _0x3a8b00=_0x597d33[_0x302d68]||'';if(!_0x3a8b00){let _0x5c92c9=_0x302d68;for(let _0xb22361=0x0;_0xb22361<0x3;_0xb22361++){const _0x2e98a9=_0x5c92c9['lastIndexOf']('.');if(_0x2e98a9===-0x1)break;_0x5c92c9=_0x5c92c9[_0x2b432f(0x2ce)](0x0,_0x2e98a9);if(_0x597d33[_0x5c92c9]){_0x3a8b00=_0x597d33[_0x5c92c9];break;}}}_0x5dc4af[_0x2b432f(0x272)]({'id':_0x302d68,'name':_0x5e1369,'location':_0x3a8b00,'type':_0x506d1f,'logDuplicates':_0x506d1f===_0x2b432f(0x148),'isExit':![],'_score':_0x3a8b00?0x50:0x28});}}return _0x5dc4af;}async[a0_0x5a8b2c(0x1a7)](_0xb3a8df=''){const _0x4ce096=a0_0x5a8b2c;if(!this[_0x4ce096(0x223)])return;if(this[_0x4ce096(0x277)][_0x4ce096(0x179)]===0x0)return;const _0x23c8a2=this[_0x4ce096(0x277)][_0x4ce096(0x281)](0x0,0xf),_0x2f5110=await this['getWeatherContext'](),_0x2ce629=this['currentSystemMode'],_0x1b728f=PERSONA_MAPPING[this[_0x4ce096(0x218)][_0x4ce096(0x1e1)]||_0x4ce096(0x276)],_0x2ddc6f=this[_0x4ce096(0x218)][_0x4ce096(0x2b5)]||_0x4ce096(0x228);let _0x576cd9=_0x4ce096(0x1b0);try{const _0x221e15=await this[_0x4ce096(0x22e)](_0x4ce096(0x209));if(_0x221e15&&_0x221e15['val'])_0x576cd9=_0x221e15['val'];}catch(_0x318d99){}let _0x23c7eb=![];try{const _0x51e82f=await this[_0x4ce096(0x22e)](_0x4ce096(0x2cc));if(_0x51e82f&&_0x51e82f[_0x4ce096(0x1f1)])_0x23c7eb=!![];}catch(_0xa72764){}const _0x407b17='ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20'+_0x1b728f+_0x4ce096(0x1fb)+_0x2ddc6f+_0x4ce096(0x308)+_0x2ce629+_0x4ce096(0x1bd)+_0x2f5110+_0x4ce096(0x2bd)+_0x576cd9+_0x4ce096(0x15d)+JSON[_0x4ce096(0x17a)](_0x23c8a2)+_0x4ce096(0x151)+_0xb3a8df+_0x4ce096(0x1d7);try{const _0xd95180=await this[_0x4ce096(0x223)][_0x4ce096(0x160)](_0x407b17),_0x1841ea=_0xd95180[_0x4ce096(0x2b4)][_0x4ce096(0x22d)]()[_0x4ce096(0x23d)](/```json|```/g,'')['trim'](),_0x4b24a7=JSON[_0x4ce096(0x25d)](_0x1841ea);await this[_0x4ce096(0x2d5)]('analysis.lastResult',{'val':JSON[_0x4ce096(0x17a)](_0x4b24a7),'ack':!![]});if(_0x4b24a7[_0x4ce096(0x240)])await this[_0x4ce096(0x2d5)]('analysis.activitySummary',{'val':_0x4b24a7[_0x4ce096(0x240)],'ack':!![]});const _0x97d1c8={'timestamp':Date[_0x4ce096(0x2c5)](),'id':Date[_0x4ce096(0x2c5)]()['toString'](),'analysis':{'activity':{'summary':_0x4b24a7[_0x4ce096(0x240)],'isAlert':_0x4b24a7[_0x4ce096(0x20c)],'alertReason':_0x4b24a7['alertReason']},'comfort':{'automationProposal':_0x4b24a7[_0x4ce096(0x1fd)]}}};await this['updateAnalysisHistory'](_0x97d1c8);const _0x54e2e9=_0x4b24a7[_0x4ce096(0x20c)]||![];_0x54e2e9!==this[_0x4ce096(0x1fe)]&&(await this[_0x4ce096(0x2d5)]('analysis.isAlert',{'val':_0x54e2e9,'ack':!![]}),this['lastAlertState']=_0x54e2e9,_0x54e2e9&&(await this[_0x4ce096(0x2d5)](_0x4ce096(0x26f),{'val':_0x4b24a7['alertReason'],'ack':!![]}),this[_0x4ce096(0x29e)]('‚ö†Ô∏è\x20ALARM:\x20'+_0x4b24a7[_0x4ce096(0x271)],![],_0x4b24a7[_0x4ce096(0x171)])));if(_0x4b24a7[_0x4ce096(0x1fd)]&&_0x4b24a7[_0x4ce096(0x1fd)][_0x4ce096(0x22c)]){await this[_0x4ce096(0x2d5)](_0x4ce096(0x2af),{'val':!![],'ack':!![]}),await this[_0x4ce096(0x2d5)](_0x4ce096(0x2cd),{'val':_0x4b24a7['automationProposal'][_0x4ce096(0x2b3)],'ack':!![]}),await this[_0x4ce096(0x2d5)](_0x4ce096(0x1cd),{'val':_0x4b24a7['automationProposal'][_0x4ce096(0x244)],'ack':!![]}),await this[_0x4ce096(0x2d5)]('analysis.automation.targetValue',{'val':JSON['stringify'](_0x4b24a7[_0x4ce096(0x1fd)][_0x4ce096(0x191)]),'ack':!![]});if(_0x23c7eb)this[_0x4ce096(0x201)]();}}catch(_0x4040f1){this[_0x4ce096(0x1d0)][_0x4ce096(0x19e)](_0x4ce096(0x1d3)+_0x4040f1['message']);}}async['createDailyDigest'](){const _0x361fe0=a0_0x5a8b2c;if(!this['isProVersion'])return;await this[_0x361fe0(0x2d5)](LTM_DP_STATUS,{'val':_0x361fe0(0x182),'ack':!![]});if(!this['geminiModel']||this[_0x361fe0(0x28f)][_0x361fe0(0x179)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await this[_0x361fe0(0x2d5)](LTM_DP_STATUS,{'val':'Skipped\x20(No\x20AI\x20or\x20Data)','ack':!![]});return;}const _0x128a08=JSON[_0x361fe0(0x25d)](JSON[_0x361fe0(0x17a)](this['rawEventLog'])),_0x3ebd63=_0x128a08[_0x361fe0(0x179)],_0xe81839=_0x361fe0(0x2d3)+JSON[_0x361fe0(0x17a)](_0x128a08);try{const _0x5378dc=await this[_0x361fe0(0x223)][_0x361fe0(0x160)](_0xe81839),_0x128b8c=JSON[_0x361fe0(0x25d)](_0x5378dc[_0x361fe0(0x2b4)][_0x361fe0(0x22d)]()[_0x361fe0(0x23d)](/```json|```/g,'')[_0x361fe0(0x16c)]()),_0x3078b8={'timestamp':new Date()[_0x361fe0(0x1a2)](),'eventCount':_0x3ebd63,'summary':_0x128b8c[_0x361fe0(0x240)]||_0x361fe0(0x296),'activityLevel':_0x128b8c['activityLevel']||'normal','systemMode':this['currentSystemMode']};this[_0x361fe0(0x18c)][_0x361fe0(0x272)](_0x3078b8),await this[_0x361fe0(0x1c6)](),this[_0x361fe0(0x28f)]=[],await this[_0x361fe0(0x246)](),await this[_0x361fe0(0x2d5)](LTM_DP_STATUS,{'val':_0x361fe0(0x2f6),'ack':!![]});if(this[_0x361fe0(0x30b)])this[_0x361fe0(0x1db)](_0x361fe0(0x1dd),{'digest':_0x3078b8});}catch(_0x835716){this[_0x361fe0(0x1d0)]['error'](_0x835716[_0x361fe0(0x2d4)]);}}async[a0_0x5a8b2c(0x298)](){const _0x4e5f45=a0_0x5a8b2c;if(!this[_0x4e5f45(0x30b)]||!this[_0x4e5f45(0x223)])return;const _0xe7b398=this[_0x4e5f45(0x218)][_0x4e5f45(0x143)]||0xe;if(this['dailyDigests']['length']<_0xe7b398+0x7){await this[_0x4e5f45(0x2d5)](LTM_DP_DRIFT_STATUS,{'val':_0x4e5f45(0x18b),'ack':!![]});return;}const _0x4903f7=this[_0x4e5f45(0x18c)]['slice'](-_0xe7b398),_0x2e6525=this[_0x4e5f45(0x18c)][_0x4e5f45(0x281)](0x0,this[_0x4e5f45(0x18c)][_0x4e5f45(0x179)]-_0xe7b398),_0xb02d97=_0x4e5f45(0x25a)+JSON[_0x4e5f45(0x17a)](_0x2e6525)+_0x4e5f45(0x291)+JSON[_0x4e5f45(0x17a)](_0x4903f7);try{const _0x22f60c=await this['geminiModel'][_0x4e5f45(0x160)](_0xb02d97),_0x338fdb=JSON[_0x4e5f45(0x25d)](_0x22f60c['response']['text']()['replace'](/```json|```/g,'')['trim']());_0x338fdb['baselineDrift']&&(await this[_0x4e5f45(0x2d5)](LTM_DP_DRIFT_STATUS,{'val':_0x338fdb[_0x4e5f45(0x168)],'ack':!![]}),await this[_0x4e5f45(0x2d5)](LTM_DP_DRIFT_DETAILS,{'val':_0x338fdb[_0x4e5f45(0x2b6)],'ack':!![]}),await this[_0x4e5f45(0x2d5)](LTM_DP_DRIFT_LAST_CHECK,{'val':Date['now'](),'ack':!![]}));}catch(_0x439e66){}}async['sendMorningBriefing'](){const _0x1a0ee9=a0_0x5a8b2c;if(!this[_0x1a0ee9(0x223)])return;this['log']['info']('Generating\x20Morning\x20Briefing...');const _0x41746f=this[_0x1a0ee9(0x18c)][_0x1a0ee9(0x179)]>0x0?this[_0x1a0ee9(0x18c)][this[_0x1a0ee9(0x18c)][_0x1a0ee9(0x179)]-0x1]:null,_0x11542d=_0x41746f&&_0x41746f[_0x1a0ee9(0x2ca)]?_0x41746f[_0x1a0ee9(0x2ca)]['sleepScore']:_0x1a0ee9(0x1b4),_0x523131=new Date();_0x523131[_0x1a0ee9(0x22f)](0x4,0x0,0x0,0x0);const _0x1cc057=this[_0x1a0ee9(0x277)][_0x1a0ee9(0x2e5)](_0x386105=>new Date(_0x386105[_0x1a0ee9(0x1b3)])>_0x523131),_0x51b96b=PERSONA_MAPPING[this[_0x1a0ee9(0x218)][_0x1a0ee9(0x1e1)]||'generic'],_0x4ea0d2=this[_0x1a0ee9(0x218)]['livingContext']||'',_0x403e11=await this[_0x1a0ee9(0x1e4)](),_0x57f361=await this[_0x1a0ee9(0x20a)](),_0x3e0129=_0x1a0ee9(0x183)+_0x51b96b+'.\x20KONTEXT:\x20'+_0x4ea0d2+'.\x20ZUSATZ:\x20'+_0x403e11+'\x20'+_0x57f361+_0x1a0ee9(0x19a)+_0x11542d+_0x1a0ee9(0x241);try{const _0x5f23ee=await this[_0x1a0ee9(0x223)][_0x1a0ee9(0x160)](_0x3e0129),_0x2c39d2=_0x1a0ee9(0x1ee)+_0x5f23ee[_0x1a0ee9(0x2b4)][_0x1a0ee9(0x22d)]()['trim']();this[_0x1a0ee9(0x29e)](_0x2c39d2);}catch(_0x3c4cd6){this['log'][_0x1a0ee9(0x19e)](_0x1a0ee9(0x28b)+_0x3c4cd6[_0x1a0ee9(0x2d4)]);}}async['runAutopilot'](){const _0x2e9ad5=a0_0x5a8b2c,_0x1b4ec2=this[_0x2e9ad5(0x218)][_0x2e9ad5(0x21f)],_0x4bc395=this[_0x2e9ad5(0x277)][_0x2e9ad5(0x179)]>0x0?this[_0x2e9ad5(0x277)][0x0][_0x2e9ad5(0x1b3)]:Date[_0x2e9ad5(0x2c5)](),_0x277fc5=(Date[_0x2e9ad5(0x2c5)]()-_0x4bc395)/(0x3e8*0x3c*0x3c);let _0x544967='';this[_0x2e9ad5(0x218)][_0x2e9ad5(0x286)]&&this[_0x2e9ad5(0x18d)]===SYSTEM_MODES[_0x2e9ad5(0x1f5)]&&this[_0x2e9ad5(0x24a)]&&(_0x277fc5>_0x1b4ec2&&(_0x544967=_0x2e9ad5(0x189)+_0x277fc5[_0x2e9ad5(0x2bf)](0x1)+'h.')),this[_0x2e9ad5(0x1a7)](_0x544967);}async['getCalendarNames'](_0x239bbf){const _0x14e7fd=a0_0x5a8b2c;try{const _0xad5f73=await this[_0x14e7fd(0x2ae)](_0x239bbf+_0x14e7fd(0x233));if(_0xad5f73&&_0xad5f73[_0x14e7fd(0x1f1)]){const _0x40a571=JSON[_0x14e7fd(0x25d)](_0xad5f73['val']);if(Array[_0x14e7fd(0x15f)](_0x40a571))return[...new Set(_0x40a571[_0x14e7fd(0x1e5)](_0x4b0943=>_0x4b0943['_calName'])[_0x14e7fd(0x2e5)](Boolean))][_0x14e7fd(0x24f)]();}}catch(_0x43efc2){}return[];}async['getCalendarContext'](){const _0x372d82=a0_0x5a8b2c;if(!this[_0x372d82(0x218)][_0x372d82(0x295)])return _0x372d82(0x166);const _0x1843c5=this[_0x372d82(0x218)]['calendarInstance']||_0x372d82(0x219);try{const _0x34420c=await this[_0x372d82(0x2ae)](_0x1843c5+_0x372d82(0x233));if(_0x34420c&&_0x34420c[_0x372d82(0x1f1)]){let _0xfdfb6=JSON[_0x372d82(0x25d)](_0x34420c[_0x372d82(0x1f1)]);if(Array[_0x372d82(0x15f)](_0xfdfb6)){if(_0xfdfb6[_0x372d82(0x179)]>0x0)return'KALENDER:\x20'+_0xfdfb6[_0x372d82(0x281)](0x0,0x3)[_0x372d82(0x1e5)](_0xe41f1d=>_0xe41f1d[_0x372d82(0x2fd)])[_0x372d82(0x23e)](',\x20');}}}catch(_0x4c2adb){}return _0x372d82(0x290);}async[a0_0x5a8b2c(0x2f8)](_0x27da3a){const _0x42e286=a0_0x5a8b2c;this[_0x42e286(0x1d0)][_0x42e286(0x1bc)]('Feedback:\x20'+JSON[_0x42e286(0x17a)](_0x27da3a));}async[a0_0x5a8b2c(0x1eb)](){const _0x45724f=a0_0x5a8b2c;try{const _0x526090=['analysis.history_debug_00',_0x45724f(0x1d9)];for(const _0x3ac8bb of _0x526090){try{const _0x4ae185=await this[_0x45724f(0x2c2)](_0x3ac8bb);if(_0x4ae185)await this[_0x45724f(0x30c)](_0x3ac8bb);}catch(_0x428d47){}}}catch(_0x31d8d9){}}async[a0_0x5a8b2c(0x1a6)](_0x40b0e2){return!![];}async[a0_0x5a8b2c(0x289)](){const _0x21c1b8=a0_0x5a8b2c;return _0x21c1b8(0x29a);}async['initSystemConfig'](){const _0x101fa6=a0_0x5a8b2c;try{const _0x57678d=await this[_0x101fa6(0x2d6)](_0x101fa6(0x2f9));if(_0x57678d&&_0x57678d[_0x101fa6(0x150)])this['systemConfig']={'latitude':_0x57678d[_0x101fa6(0x150)][_0x101fa6(0x2d7)]||0x0,'longitude':_0x57678d[_0x101fa6(0x150)]['longitude']||0x0,'city':_0x57678d['common'][_0x101fa6(0x204)]||''};}catch(_0x1f84cb){}}async[a0_0x5a8b2c(0x1f4)](){const _0x33f49c=a0_0x5a8b2c;try{const _0x3f158f=await this[_0x33f49c(0x22e)](LTM_DP_RAW_LOG);if(_0x3f158f&&_0x3f158f[_0x33f49c(0x1f1)])this[_0x33f49c(0x28f)]=JSON[_0x33f49c(0x25d)](_0x3f158f[_0x33f49c(0x1f1)]);}catch(_0x156ef7){this['rawEventLog']=[];}}async[a0_0x5a8b2c(0x246)](){const _0x26932c=a0_0x5a8b2c;if(this[_0x26932c(0x28f)]['length']>RAW_LOG_MAX_SIZE)this[_0x26932c(0x28f)][_0x26932c(0x2f4)](0x0,this['rawEventLog'][_0x26932c(0x179)]-RAW_LOG_MAX_SIZE);await this['setStateAsync'](LTM_DP_RAW_LOG,{'val':JSON[_0x26932c(0x17a)](this['rawEventLog']),'ack':!![]});}async[a0_0x5a8b2c(0x172)](){const _0x4fb14e=a0_0x5a8b2c;try{const _0x481263=await this[_0x4fb14e(0x22e)](LTM_DP_DAILY_DIGESTS);if(_0x481263&&_0x481263['val'])this[_0x4fb14e(0x18c)]=JSON[_0x4fb14e(0x25d)](_0x481263[_0x4fb14e(0x1f1)]);}catch(_0x1b95b7){this[_0x4fb14e(0x18c)]=[];}await this['updateBaselineStatus']();}async[a0_0x5a8b2c(0x1c6)](_0x5eb334=!![]){const _0x848133=a0_0x5a8b2c,_0x5ba3f9=this[_0x848133(0x218)][_0x848133(0x260)]||0x3c;this[_0x848133(0x18c)][_0x848133(0x179)]>_0x5ba3f9&&this[_0x848133(0x18c)]['splice'](0x0,this[_0x848133(0x18c)][_0x848133(0x179)]-_0x5ba3f9);await this[_0x848133(0x2d5)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x848133(0x17a)](this[_0x848133(0x18c)]),'ack':!![]});if(_0x5eb334)await this[_0x848133(0x198)]();}async['updateAnalysisHistory'](_0x414d34){const _0x3be468=a0_0x5a8b2c;this[_0x3be468(0x261)][_0x3be468(0x20b)](_0x414d34);if(this[_0x3be468(0x261)]['length']>ANALYSIS_HISTORY_MAX_SIZE)this[_0x3be468(0x261)]['pop']();await this[_0x3be468(0x2d5)](_0x3be468(0x1da),{'val':JSON['stringify'](this[_0x3be468(0x261)]),'ack':!![]});}async[a0_0x5a8b2c(0x198)](){const _0x2c24af=a0_0x5a8b2c;if(!this[_0x2c24af(0x30b)]){await this[_0x2c24af(0x2d5)](LTM_DP_BASELINE_STATUS,{'val':_0x2c24af(0x141),'ack':!![]});return;}const _0xd2876f=this[_0x2c24af(0x18c)][_0x2c24af(0x179)]>=(this[_0x2c24af(0x218)][_0x2c24af(0x23c)]||0x7)?'Aktiv\x20('+this[_0x2c24af(0x18c)][_0x2c24af(0x179)]+_0x2c24af(0x163):'Lernphase\x20('+this['dailyDigests'][_0x2c24af(0x179)]+'/'+(this['config']['minDaysForBaseline']||0x7)+')';await this[_0x2c24af(0x2d5)](LTM_DP_BASELINE_STATUS,{'val':_0xd2876f,'ack':!![]});}async[a0_0x5a8b2c(0x2f0)](){const _0xc501f3=a0_0x5a8b2c,_0x404ab8=this[_0xc501f3(0x218)][_0xc501f3(0x21a)];if(_0x404ab8&&_0x404ab8[_0xc501f3(0x179)]>0x0){this[_0xc501f3(0x1d0)][_0xc501f3(0x1bc)](_0xc501f3(0x153)+_0x404ab8[_0xc501f3(0x179)]+_0xc501f3(0x2be));for(const _0x97256a of _0x404ab8){if(_0x97256a['id']){await this[_0xc501f3(0x15c)](_0x97256a['id']);try{const _0x459d7a=await this[_0xc501f3(0x2ae)](_0x97256a['id']);if(_0x459d7a)this[_0xc501f3(0x2ba)][_0x97256a['id']]=_0x459d7a[_0xc501f3(0x1f1)];}catch(_0x280a41){}}}}}async[a0_0x5a8b2c(0x17d)](){const _0xb7a377=a0_0x5a8b2c,_0x3257bc=this['config'][_0xb7a377(0x1d2)]||[];if(_0x3257bc[_0xb7a377(0x179)]>0x0){this[_0xb7a377(0x1d0)][_0xb7a377(0x1bc)]('Subscribing\x20to\x20'+_0x3257bc[_0xb7a377(0x179)]+_0xb7a377(0x2ad));for(const _0x4edc0a of _0x3257bc){await this[_0xb7a377(0x15c)](_0x4edc0a);}try{await this[_0xb7a377(0x19c)]();}catch(_0x3476dd){}}}async[a0_0x5a8b2c(0x2fe)](){const _0x3b9280=a0_0x5a8b2c,_0x3787fa=this['config']['notifyTelegramInstance'];this['config'][_0x3b9280(0x1de)]&&_0x3787fa&&await this[_0x3b9280(0x15c)](_0x3787fa+_0x3b9280(0x19b));}async[a0_0x5a8b2c(0x280)](_0x568366){const _0x61b740=a0_0x5a8b2c;let _0x410fd3=_0x568366;_0x568366[_0x61b740(0x30d)]('[')&&(_0x410fd3=_0x568366[_0x61b740(0x2ce)](_0x568366['indexOf'](']')+0x1));if(_0x410fd3===_0x61b740(0x2bb))await this[_0x61b740(0x2d5)](_0x61b740(0x225),{'val':![],'ack':!![]}),await this[_0x61b740(0x2d5)]('analysis.alertReason',{'val':_0x61b740(0x14a),'ack':!![]}),this[_0x61b740(0x1fe)]=![],this[_0x61b740(0x29e)]('‚úÖ\x20Alarm\x20quittiert.\x20System\x20normal.',![]);else _0x410fd3==='COGNI_REQUEST_CALL'&&this[_0x61b740(0x29e)](_0x61b740(0x279),![],!![]);}async[a0_0x5a8b2c(0x29e)](_0x2b5251,_0x2b9368=![],_0x5d6d48=![]){const _0x4b3117=a0_0x5a8b2c,_0x3084e8=this[_0x4b3117(0x218)];if(_0x3084e8['notifyTelegramEnabled']){let _0x4a8e1f={};(_0x2b5251[_0x4b3117(0x14c)](_0x4b3117(0x1e0))||_0x5d6d48)&&(_0x4a8e1f={'reply_markup':{'inline_keyboard':[[{'text':_0x4b3117(0x1ac),'callback_data':_0x4b3117(0x2bb)}],[{'text':_0x4b3117(0x157),'callback_data':_0x4b3117(0x2ac)}]]}}),await this['sendToAsync'](_0x3084e8['notifyTelegramInstance'],'send',{'text':_0x2b5251,'user':_0x3084e8[_0x4b3117(0x248)],..._0x4a8e1f});}if(_0x3084e8[_0x4b3117(0x282)]){let _0x2970ed={'message':_0x2b5251,'title':_0x5d6d48?'üö®\x20EMERGENCY':'Cogni-Living','priority':_0x5d6d48?0x2:0x1,'device':_0x3084e8[_0x4b3117(0x208)]};_0x5d6d48&&(_0x2970ed[_0x4b3117(0x2a1)]=0x1e,_0x2970ed[_0x4b3117(0x24b)]=0xe10,_0x2970ed[_0x4b3117(0x254)]=_0x4b3117(0x2b1)),await this[_0x4b3117(0x2ea)](_0x3084e8[_0x4b3117(0x264)],_0x4b3117(0x29b),_0x2970ed);}_0x3084e8[_0x4b3117(0x299)]&&await this[_0x4b3117(0x2ea)](_0x3084e8['notifyEmailInstance'],_0x4b3117(0x29b),{'text':_0x2b5251,'to':_0x3084e8['notifyEmailRecipient']});}async['checkWifiPresence'](){const _0x4ac0d=a0_0x5a8b2c;try{const _0x2126a7=this[_0x4ac0d(0x218)][_0x4ac0d(0x1d2)]||[];let _0x1f1f43=![];const _0x4d8d58=[];for(const _0x3e2105 of _0x2126a7){try{const _0x4dc20a=await this['getForeignStateAsync'](_0x3e2105);if(_0x4dc20a&&(_0x4dc20a[_0x4ac0d(0x1f1)]===!![]||_0x4dc20a['val']==='online'||_0x4dc20a['val']===0x1)){_0x1f1f43=!![];const _0x22c350=await this['getForeignObjectAsync'](_0x3e2105);let _0x3c4c78=_0x3e2105;_0x22c350&&_0x22c350[_0x4ac0d(0x150)]&&_0x22c350[_0x4ac0d(0x150)]['name']&&(_0x3c4c78=typeof _0x22c350[_0x4ac0d(0x150)][_0x4ac0d(0x1a1)]===_0x4ac0d(0x212)?_0x22c350[_0x4ac0d(0x150)][_0x4ac0d(0x1a1)]['de']||_0x22c350[_0x4ac0d(0x150)]['name']['en']:_0x22c350[_0x4ac0d(0x150)][_0x4ac0d(0x1a1)]),_0x4d8d58['push'](_0x3c4c78);}}catch(_0x553f4d){}}return await this[_0x4ac0d(0x2d5)]('system.presenceWho',{'val':_0x4d8d58[_0x4ac0d(0x23e)](',\x20'),'ack':!![]}),_0x1f1f43&&(this[_0x4ac0d(0x1c8)]&&(this[_0x4ac0d(0x1d0)]['info'](_0x4ac0d(0x2f7)),this[_0x4ac0d(0x1d4)]()),!this[_0x4ac0d(0x24a)]&&this[_0x4ac0d(0x18d)]===SYSTEM_MODES[_0x4ac0d(0x1f5)]&&await this[_0x4ac0d(0x211)](!![])),_0x1f1f43;}catch(_0xdf3767){return this[_0x4ac0d(0x1d0)]['error'](_0x4ac0d(0x187)+_0xdf3767[_0x4ac0d(0x2d4)]),![];}}[a0_0x5a8b2c(0x2ab)](){const _0x1ecd22=a0_0x5a8b2c;this['abortExitTimer'](),this['isGracePeriodActive']=!![],this['exitGraceTimer']=setTimeout(()=>{const _0x545120=a0_0x4d51;this[_0x545120(0x262)]=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),this[_0x1ecd22(0x1c8)]=setTimeout(()=>{const _0x3c79db=_0x1ecd22;this[_0x3c79db(0x211)](![]),this[_0x3c79db(0x1c8)]=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}[a0_0x5a8b2c(0x1d4)](){const _0x46b525=a0_0x5a8b2c;if(this[_0x46b525(0x1c8)])clearTimeout(this[_0x46b525(0x1c8)]);if(this[_0x46b525(0x2d1)])clearTimeout(this[_0x46b525(0x2d1)]);this[_0x46b525(0x1c8)]=null,this[_0x46b525(0x2d1)]=null,this['isGracePeriodActive']=![];}async[a0_0x5a8b2c(0x211)](_0x421f4e){const _0x2ff5ea=a0_0x5a8b2c;if(this[_0x2ff5ea(0x24a)]===_0x421f4e)return;this['isPresent']=_0x421f4e,await this['setStateAsync'](_0x2ff5ea(0x1c9),{'val':_0x421f4e,'ack':!![]});}async[a0_0x5a8b2c(0x201)](){const _0xcfacde=a0_0x5a8b2c;try{const _0xd760eb=await this[_0xcfacde(0x22e)](_0xcfacde(0x1cd)),_0x2435da=await this[_0xcfacde(0x22e)](_0xcfacde(0x2e4));if(_0xd760eb&&_0xd760eb[_0xcfacde(0x1f1)]&&_0x2435da){const _0x1ec361=_0xd760eb['val'];let _0x175481=_0x2435da['val'];try{_0x175481=JSON[_0xcfacde(0x25d)](_0x175481);}catch(_0x4eeeab){}this['log']['info'](_0xcfacde(0x1af)+_0x1ec361+_0xcfacde(0x300)+_0x175481),await this['setForeignStateAsync'](_0x1ec361,_0x175481);}else this['log'][_0xcfacde(0x238)](_0xcfacde(0x257));}catch(_0x7ee4e4){this['log']['error'](_0xcfacde(0x19d)+_0x7ee4e4['message']);}}}if(require['main']!==module)module['exports']=_0x3fb955=>new CogniLiving(_0x3fb955);else new CogniLiving();