const a0_0x1668e0=a0_0x53cb;(function(_0x22d6d7,_0x29a0e8){const _0x2e0916=a0_0x53cb,_0x33d1d2=_0x22d6d7();while(!![]){try{const _0x549088=parseInt(_0x2e0916(0x309))/0x1+parseInt(_0x2e0916(0x2c6))/0x2*(-parseInt(_0x2e0916(0x2bd))/0x3)+parseInt(_0x2e0916(0x280))/0x4+-parseInt(_0x2e0916(0x27c))/0x5+parseInt(_0x2e0916(0x2e9))/0x6*(-parseInt(_0x2e0916(0x19e))/0x7)+-parseInt(_0x2e0916(0x2e5))/0x8*(parseInt(_0x2e0916(0x22e))/0x9)+-parseInt(_0x2e0916(0x299))/0xa*(-parseInt(_0x2e0916(0x1d4))/0xb);if(_0x549088===_0x29a0e8)break;else _0x33d1d2['push'](_0x33d1d2['shift']());}catch(_0x33635b){_0x33d1d2['push'](_0x33d1d2['shift']());}}}(a0_0x5449,0xd8900));const a0_0x3d18e9=(function(){let _0x1c66ba=!![];return function(_0x526e12,_0x1786ff){const _0x139fe4=_0x1c66ba?function(){const _0x118dfb=a0_0x53cb;if(_0x1786ff){const _0xbdb553=_0x1786ff[_0x118dfb(0x211)](_0x526e12,arguments);return _0x1786ff=null,_0xbdb553;}}:function(){};return _0x1c66ba=![],_0x139fe4;};}()),a0_0x12ddbd=a0_0x3d18e9(this,function(){const _0x2aeec8=a0_0x53cb;return a0_0x12ddbd[_0x2aeec8(0x200)]()[_0x2aeec8(0x227)]('(((.+)+)+)+$')[_0x2aeec8(0x200)]()[_0x2aeec8(0x266)](a0_0x12ddbd)[_0x2aeec8(0x227)]('(((.+)+)+)+$');});a0_0x12ddbd();'use strict';const utils=require(a0_0x1668e0(0x2c7)),{GoogleGenerativeAI}=require(a0_0x1668e0(0x1f2)),{spawn}=require(a0_0x1668e0(0x265)),path=require(a0_0x1668e0(0x20d)),fs=require('fs'),installer=require(a0_0x1668e0(0x1a0)),scanner=require(a0_0x1668e0(0x311)),schedulers=require(a0_0x1668e0(0x24d)),HISTORY_MAX_SIZE=0x32,RAW_LOG_MAX_SIZE=0x9c4,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL='models/gemini-flash-latest',SEQUENCE_TIMEOUT_MS=0x5*0x3c*0x3e8,MAX_TRAINING_SET_SIZE=0x1f4,THERMO_LOG_SIZE=0x3e8,EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,LTM_DP_RAW_LOG='LTM.rawEventLog',LTM_DP_DAILY_DIGESTS='LTM.dailyDigests',LTM_DP_STATUS=a0_0x1668e0(0x1af),LTM_DP_TRIGGER_DIGEST=a0_0x1668e0(0x2cd),LTM_DP_BASELINE_STATUS=a0_0x1668e0(0x258),LTM_DP_DRIFT_CHANNEL='LTM.driftAnalysis',LTM_DP_DRIFT_STATUS='LTM.driftAnalysis.baselineDrift',LTM_DP_DRIFT_DETAILS='LTM.driftAnalysis.driftDetails',LTM_DP_DRIFT_LAST_CHECK=a0_0x1668e0(0x255),SYSTEM_DP_MODE=a0_0x1668e0(0x2bc),SYSTEM_MODES={'NORMAL':a0_0x1668e0(0x288),'VACATION':a0_0x1668e0(0x21c),'PARTY':'party','GUEST':a0_0x1668e0(0x19b)},AUTO_RESET_MODES=[SYSTEM_MODES[a0_0x1668e0(0x1f5)],SYSTEM_MODES[a0_0x1668e0(0x302)]],PERSONA_MAPPING={'generic':a0_0x1668e0(0x2e4),'senior_aal':a0_0x1668e0(0x1ca),'family':'Fokus\x20auf\x20Familienroutinen.','single_comfort':a0_0x1668e0(0x25a),'security':a0_0x1668e0(0x300)},ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};function a0_0x5449(){const _0x594964=['normal','details','text','isGracePeriodActive','ANALYZE_TREND','getStateAsync','useWeather','close','getHours','apiKey','sensorLastValues','analysisTimer','round','subscribeForeignStatesAsync','analysis.security.topologyMatrix','string','GAIT_RESULT','13020WqJcEs','python3','forEach','Skipped\x20(No\x20AI\x20or\x20Data)','enum','briefingJob','latitude','analysis.energy.heatingScore','automation.triggerAction','occupancy','parse','[RECORDER]\x20Error:\x20','insulation','.forecast.current.temperature','getForeignStateAsync','warn','getTime','COMFORT_RESULT','setState','analysisHistory','tÃ¼r','ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20','number','generateContent','SIMULATION:\x20Test-Vorschlag\x20fÃ¼r\x20','substring','config','analysis.training.triggerEnergy','Unknown','TRAIN_HEALTH','BUILD_TOPOLOGY','Daily\x20Digests','button','submitFeedback','Activity\x20Summary','system.mode','27GqCVNE','rating','Gait\x20Speed\x20Trend','setupBriefingScheduler','analysis.automation.patternDetected','TOPOLOGY_RESULT','Success:\x20','val','dimmer','390198wpiYrs','@iobroker/adapter-core','analysis.automation.targetValue','Gemini\x20Error:\x20','events.history','Insulation\x20Score','outdoorSensorId','LTM.triggerDailyDigest','System\x20Mode','subscribeStates','analysis.training.triggerTopology','getObjectAsync','ltmLtbWindowDays','unknown','modeResetJob','Last\x20raw\x20event','enum.functions.*','presence','system.isPresent','Alert\x20Reason','command','setupModeResetScheduler','rule','toLocaleTimeString','some','Trigger\x20Analysis','temperature','name','analysis.security.lastCheck','boolean','Analysiere\x20ausgewogen.','64OtPbXo','indicator','debug','setupLtmScheduler','111060qZEezO','N/A\x20(Learning)','object','filter','minDaysForBaseline','calendarInstance','\x0aSTB:\x20','isProVersion','\x20=\x20','length','analysis.health.todayVector','isEmergency','analysis.health.isAnomaly','date','cancel','unload','stringify','analysis.training.triggerComfort','currentSystemMode','ENERGY_PREDICT_RESULT','System','analysis.isAlert','ANALYZE_SEQUENCE','PRIORITÃ„T:\x20Sicherheit.','Keine\x20Termine.','GUEST','diagnosis','targetValue','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','kontakt','common','error','1042237pQxaGq','fill','value','now','pop','startsWith','delObjectAsync','notifyTelegramInstance','./lib/scanner','description','Restoring\x20sensor\x20cache...','type','[PYTHON]\x20','stateChange','system.presenceWho','summary','longitude','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','pythonProcess','Sequences','map','Raw\x20Log','TREND_RESULT','extendObjectAsync','analysis.energy','Err:\x20','.\x20EVENTS:\x20','testApiKey','Heating\x20Score','isExit','Started...','Trend','daswetter','WiFi\x20Presence\x20detected.','getFullYear','Failed:\x20','push','telegram','logDuplicates','timestamp','weatherunderground','openweathermap','application/json','getGenerativeModel','setHours','enum.rooms.*','Health\x20Analysis','Deaktiviert\x20(Pro-Feature)','guest','bewegung','TRAINING_COMPLETE','553xsZwvA','onUnload','./lib/installer','geminiModel','analysis.trigger','N/A','Who\x20is\x20present?','getForeignObjectsAsync','Trigger\x20Action','communicate.request','scanForDevices','analysis.automation.targetId','HEALTH_TRAIN_RESULT','Training\x20Error:\x20','setStateAsync','slice','Briefing\x20Error:\x20','LTM.processingStatus','analysis.history_debug_00','Keine\x20Wetterdaten\x20verfÃ¼gbar.','setObjectNotExistsAsync','dependencyInstallInProgress','licht','from','Current\x20Threshold','write','rawEventLog','Regel\x20erkannt:\x20','success','stdin','stdout','contact','NORMAL','state','aiPersona','keys','getDate','getEnums','triggerDailyDigest','exitTimer','analysis.security.lastScore','toLowerCase','autoApply','channel','PRIORITÃ„T:\x20Gesundheit/AAL.','HEALTH_RESULT','âš ï¸\x20SECURITY\x20ALARM:\x20','isPresent','Adapter','values','analysis.health.gaitSpeed','ðŸ§ \x20Triggering\x20Security\x20Training...','find','analysis.training.triggerSecurity','38566qYixah','Temperature\x20Forecast','ANALYZE_HEALTH','\x0aGrund:\x20','split','âœ…\x20HEALTH\x20TRAINED.','Topology\x20Error:\x20','service.py','Activity-Level','log','analysis.health.lastCheck','Unbekannt','systemUUID','getOverviewData','driftAnalysisTimer','eventHistory','AI\x20Training','.\x20ANWESEND:\x20','status','ANOMALY','.forecast.current.state','callback','LTM.trainingData.sequences','Build\x20Topology','instance','activityLevel','inactivityThresholdHours','LTM','onMessage','is_anomaly','@google/generative-ai','motion','analysis.training.status','PARTY','toFixed','ltmJob','heizung','testContext','namespace','Pattern\x20Detected','analysis.training.triggerHealth',')\x20-\x20SAFE\x20BOOT','Last\x20Check','Success','toString','analysis.health.trendValue','Today\x20Vector\x20(15m)','prÃ¤senz','OK:\x20','switch','checkAndInstall','TRAIN_COMFORT','location','toISOString','onStateChange','âš ï¸\x20ALARM:\x20','[RESULT]','path','json','analysis.health.trendDiagnosis','cogni-living','apply','PYTHON_EXE','analysis.security','alertReason','analysis.automation.detectedPatterns','analysis.triggerBriefing','fenster','Energy\x20Intelligence','trim','analysis.training','Training\x20Status','vacation','setupDriftAnalysisScheduler','Event\x20History','Description','analysis.alertReason','lastAlertState','analysis.energy.forecast','automationProposal','existsSync','Anomaly\x20Score','payload','search','splice','python_service','devices','heating','TRAIN_ENERGY','.Current.Temperature','1963827MvIHnu','Train\x20Comfort','getLtmData','analysis.automation.triggerAction','analysis.lastResult','ANALYZE_GAIT','threshold','ack','analysisInterval','weatherInstance','Target\x20ID','KI-Modell\x20nicht\x20initialisiert','VACATION','systemConfig','exports','isAlert','\x20Tage)','Gemini\x20Init\x20Error:\x20','.\x20EMERGENCY:\x20','genAI','includes','driftDetails','Alert\x20Status','join','kill','Keine\x20Details.','getMonth','.forecast.current.temp','data','version','presenceDevices','./lib/scheduler','analysis.security.currentThreshold','replace','Security\x20Monitor','system','ðŸ\x20Python\x20Pong','message','[LOG]','LTM.driftAnalysis.lastCheck','Digest','shift','LTM.baselineStatus','response','Fokus\x20auf\x20Komfort.','sendTo','getMinutes','klima','ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...','lampe','dailyDigests','ðŸ“\x20Feedback\x20received:\x20','Lernphase\x20(','ðŸ›‹ï¸\x20BUTLER:\x20Keine\x20neuen\x20Muster\x20gefunden.','Error\x20launching\x20Python:\x20','child_process','constructor','writable','analysis.activitySummary','detected','analysis.health','LTM.trainingData.thermodynamics','unshift','baselineDrift','generic','ðŸš€\x20Starting\x20NUUKANNI\x20Logic\x20(v0.12.10)...','analysis.automation.autoApply','Target\x20Value','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','Kein\x20API\x20Key.','analysis.analysisHistory','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','reason','analysis.automation.description','ðŸ§ª\x20Simulating\x20Butler\x20Proposal:\x20','.\x20WETTER:\x20','scanDevices','text.alarm','2552735SuGRPG','bind','analysis.energy.insulationScore','info','3017372OEJpey','online','Detected\x20Patterns','Anomaly\x20Detected','Topology\x20Matrix','loc','onReady','exitGraceTimer'];a0_0x5449=function(){return _0x594964;};return a0_0x5449();}let activeSequence=[],sequenceTimer=null;async function initZombies(_0x42789d){const _0x3fc07c=a0_0x1668e0;try{const _0x3b5ab6=[_0x3fc07c(0x1b0),'events.history_debug_00'];for(const _0x467187 of _0x3b5ab6){try{const _0x21b828=await _0x42789d[_0x3fc07c(0x2d1)](_0x467187);if(_0x21b828)await _0x42789d[_0x3fc07c(0x30f)](_0x467187);}catch(_0x3fb4bb){}}}catch(_0xab5285){}}async function checkLicense(_0x18f0ce){return!![];}async function initHistory(_0x24b684){const _0x3d9299=a0_0x1668e0;try{const _0x42141a=await _0x24b684['getStateAsync']('events.history');_0x42141a&&_0x42141a['val']&&(_0x24b684[_0x3d9299(0x1e3)]=JSON[_0x3d9299(0x2a3)](_0x42141a[_0x3d9299(0x2c4)][_0x3d9299(0x200)]()));}catch(_0x3221ff){_0x24b684[_0x3d9299(0x1e3)]=[];}try{const _0x12eeca=await _0x24b684['getStateAsync'](_0x3d9299(0x274));if(_0x12eeca&&_0x12eeca[_0x3d9299(0x2c4)])_0x24b684[_0x3d9299(0x2ac)]=JSON['parse'](_0x12eeca[_0x3d9299(0x2c4)][_0x3d9299(0x200)]());}catch(_0x126e14){_0x24b684[_0x3d9299(0x2ac)]=[];}if(_0x24b684[_0x3d9299(0x1e3)]&&_0x24b684[_0x3d9299(0x1e3)][_0x3d9299(0x2f2)]>0x0){_0x24b684['log'][_0x3d9299(0x27f)](_0x3d9299(0x313));for(let _0x1650e8=_0x24b684[_0x3d9299(0x1e3)][_0x3d9299(0x2f2)]-0x1;_0x1650e8>=0x0;_0x1650e8--){const _0x32bb26=_0x24b684[_0x3d9299(0x1e3)][_0x1650e8];if(_0x32bb26&&_0x32bb26['id']!==undefined&&_0x32bb26[_0x3d9299(0x30b)]!==undefined)_0x24b684[_0x3d9299(0x292)][_0x32bb26['id']]=_0x32bb26[_0x3d9299(0x30b)];}}}async function initSystemConfig(_0x2e6805){const _0x572663=a0_0x1668e0;try{const _0x7a244d=await _0x2e6805['getForeignObjectAsync']('system.config');if(_0x7a244d&&_0x7a244d['common'])_0x2e6805['systemConfig']={'latitude':_0x7a244d['common'][_0x572663(0x29f)]||0x0,'longitude':_0x7a244d[_0x572663(0x307)][_0x572663(0x319)]||0x0,'city':_0x7a244d['common']['city']||''};}catch(_0x16a5a4){}}async function createAllObjects(_0x4dacfd){const _0x1dc4f0=a0_0x1668e0;await _0x4dacfd[_0x1dc4f0(0x320)](_0x1dc4f0(0x251),{'type':_0x1dc4f0(0x1c9),'common':{'name':_0x1dc4f0(0x2fd)},'native':{}}),await _0x4dacfd[_0x1dc4f0(0x320)](SYSTEM_DP_MODE,{'type':_0x1dc4f0(0x1bf),'common':{'name':_0x1dc4f0(0x2ce),'type':_0x1dc4f0(0x297),'role':_0x1dc4f0(0x1bf),'read':!![],'write':!![],'def':SYSTEM_MODES['NORMAL']},'native':{}}),await _0x4dacfd[_0x1dc4f0(0x1b2)](_0x1dc4f0(0x317),{'type':'state','common':{'name':_0x1dc4f0(0x1a4),'type':_0x1dc4f0(0x297),'role':_0x1dc4f0(0x28a),'read':!![],'write':![]},'native':{}}),await _0x4dacfd['setObjectNotExistsAsync']('events.lastEvent',{'type':'state','common':{'name':_0x1dc4f0(0x2d5),'type':_0x1dc4f0(0x297),'role':'json','read':!![],'write':![]},'native':{}}),await _0x4dacfd[_0x1dc4f0(0x1b2)](_0x1dc4f0(0x2ca),{'type':_0x1dc4f0(0x1bf),'common':{'name':_0x1dc4f0(0x21e),'type':'string','role':_0x1dc4f0(0x20e),'read':!![],'write':![]},'native':{}}),await _0x4dacfd['extendObjectAsync'](_0x1dc4f0(0x21a),{'type':_0x1dc4f0(0x1c9),'common':{'name':_0x1dc4f0(0x1e4)},'native':{}}),await _0x4dacfd[_0x1dc4f0(0x1b2)](_0x1dc4f0(0x1d3),{'type':_0x1dc4f0(0x1bf),'common':{'name':'Train\x20Security','type':_0x1dc4f0(0x2e3),'role':_0x1dc4f0(0x2b9),'read':!![],'write':!![]},'native':{}}),await _0x4dacfd[_0x1dc4f0(0x1b2)](_0x1dc4f0(0x1fc),{'type':_0x1dc4f0(0x1bf),'common':{'name':'Train\x20Health','type':'boolean','role':_0x1dc4f0(0x2b9),'read':!![],'write':!![]},'native':{}}),await _0x4dacfd[_0x1dc4f0(0x1b2)](_0x1dc4f0(0x2b4),{'type':_0x1dc4f0(0x1bf),'common':{'name':'Train\x20Energy','type':_0x1dc4f0(0x2e3),'role':_0x1dc4f0(0x2b9),'read':!![],'write':!![]},'native':{}}),await _0x4dacfd['setObjectNotExistsAsync'](_0x1dc4f0(0x2fa),{'type':_0x1dc4f0(0x1bf),'common':{'name':_0x1dc4f0(0x22f),'type':_0x1dc4f0(0x2e3),'role':_0x1dc4f0(0x2b9),'read':!![],'write':!![]},'native':{}}),await _0x4dacfd[_0x1dc4f0(0x1b2)](_0x1dc4f0(0x2d0),{'type':'state','common':{'name':_0x1dc4f0(0x1eb),'type':_0x1dc4f0(0x2e3),'role':_0x1dc4f0(0x2b9),'read':!![],'write':!![]},'native':{}}),await _0x4dacfd['setObjectNotExistsAsync']('analysis.training.status',{'type':_0x1dc4f0(0x1bf),'common':{'name':_0x1dc4f0(0x21b),'type':'string','role':_0x1dc4f0(0x28a),'read':!![],'write':![]},'native':{}}),await _0x4dacfd[_0x1dc4f0(0x320)](_0x1dc4f0(0x213),{'type':'channel','common':{'name':_0x1dc4f0(0x250)},'native':{}}),await _0x4dacfd[_0x1dc4f0(0x1b2)](_0x1dc4f0(0x1c6),{'type':'state','common':{'name':_0x1dc4f0(0x225),'type':'number','role':'value','read':!![],'write':![]},'native':{}}),await _0x4dacfd['setObjectNotExistsAsync'](_0x1dc4f0(0x24e),{'type':'state','common':{'name':_0x1dc4f0(0x1b6),'type':'number','role':_0x1dc4f0(0x30b),'read':!![],'write':![],'def':0.05},'native':{}}),await _0x4dacfd[_0x1dc4f0(0x1b2)](_0x1dc4f0(0x2e2),{'type':_0x1dc4f0(0x1bf),'common':{'name':_0x1dc4f0(0x1fe),'type':'string','role':_0x1dc4f0(0x2f6),'read':!![],'write':![]},'native':{}}),await _0x4dacfd['setObjectNotExistsAsync'](_0x1dc4f0(0x296),{'type':'state','common':{'name':_0x1dc4f0(0x284),'type':'string','role':_0x1dc4f0(0x20e),'read':!![],'write':![]},'native':{}}),await _0x4dacfd[_0x1dc4f0(0x320)](_0x1dc4f0(0x26a),{'type':'channel','common':{'name':_0x1dc4f0(0x199)},'native':{}}),await _0x4dacfd[_0x1dc4f0(0x1b2)]('analysis.health.lastCheck',{'type':_0x1dc4f0(0x1bf),'common':{'name':_0x1dc4f0(0x1fe),'type':'string','role':_0x1dc4f0(0x2f6),'read':!![],'write':![]},'native':{}}),await _0x4dacfd['setObjectNotExistsAsync'](_0x1dc4f0(0x2f5),{'type':'state','common':{'name':_0x1dc4f0(0x283),'type':_0x1dc4f0(0x2e3),'role':'indicator','read':!![],'write':![]},'native':{}}),await _0x4dacfd[_0x1dc4f0(0x1b2)]('analysis.health.trendDiagnosis',{'type':_0x1dc4f0(0x1bf),'common':{'name':_0x1dc4f0(0x18a),'type':'string','role':_0x1dc4f0(0x28a),'read':!![],'write':![]},'native':{}}),await _0x4dacfd[_0x1dc4f0(0x1b2)](_0x1dc4f0(0x201),{'type':_0x1dc4f0(0x1bf),'common':{'name':'Trend\x20Value','type':'number','role':_0x1dc4f0(0x30b),'read':!![],'write':![]},'native':{}}),await _0x4dacfd['setObjectNotExistsAsync'](_0x1dc4f0(0x2f3),{'type':_0x1dc4f0(0x1bf),'common':{'name':_0x1dc4f0(0x202),'type':_0x1dc4f0(0x297),'role':_0x1dc4f0(0x20e),'read':!![],'write':![]},'native':{}}),await _0x4dacfd[_0x1dc4f0(0x1b2)]('analysis.health.gaitSpeed',{'type':_0x1dc4f0(0x1bf),'common':{'name':_0x1dc4f0(0x2bf),'type':_0x1dc4f0(0x2af),'role':_0x1dc4f0(0x30b),'read':!![],'write':![]},'native':{}}),await _0x4dacfd[_0x1dc4f0(0x320)](_0x1dc4f0(0x321),{'type':_0x1dc4f0(0x1c9),'common':{'name':_0x1dc4f0(0x218)},'native':{}}),await _0x4dacfd[_0x1dc4f0(0x1b2)]('analysis.energy.insulationScore',{'type':_0x1dc4f0(0x1bf),'common':{'name':_0x1dc4f0(0x2cb),'type':'string','role':_0x1dc4f0(0x28a),'read':!![],'write':![]},'native':{}}),await _0x4dacfd['setObjectNotExistsAsync'](_0x1dc4f0(0x2a0),{'type':'state','common':{'name':_0x1dc4f0(0x187),'type':_0x1dc4f0(0x297),'role':'text','read':!![],'write':![]},'native':{}}),await _0x4dacfd[_0x1dc4f0(0x1b2)](_0x1dc4f0(0x222),{'type':_0x1dc4f0(0x1bf),'common':{'name':_0x1dc4f0(0x1d5),'type':_0x1dc4f0(0x297),'role':'json','read':!![],'write':![]},'native':{}}),await _0x4dacfd[_0x1dc4f0(0x320)](_0x1dc4f0(0x1ef),{'type':_0x1dc4f0(0x1c9),'common':{'name':'LTM'},'native':{}}),await _0x4dacfd['extendObjectAsync'](LTM_DP_RAW_LOG,{'type':_0x1dc4f0(0x1bf),'common':{'name':_0x1dc4f0(0x31e),'type':'string','role':_0x1dc4f0(0x20e),'read':!![],'write':![]},'native':{}}),await _0x4dacfd[_0x1dc4f0(0x320)](LTM_DP_DAILY_DIGESTS,{'type':'state','common':{'name':_0x1dc4f0(0x2b8),'type':'string','role':'json','read':!![],'write':![]},'native':{}}),await _0x4dacfd['setObjectNotExistsAsync'](_0x1dc4f0(0x1ea),{'type':_0x1dc4f0(0x1bf),'common':{'name':_0x1dc4f0(0x31c),'type':_0x1dc4f0(0x297),'role':'json','read':!![],'write':![]},'native':{}}),await _0x4dacfd['setObjectNotExistsAsync'](_0x1dc4f0(0x26b),{'type':_0x1dc4f0(0x1bf),'common':{'name':'Thermodynamics','type':_0x1dc4f0(0x297),'role':_0x1dc4f0(0x20e),'read':!![],'write':![]},'native':{}}),await _0x4dacfd[_0x1dc4f0(0x1b2)](_0x1dc4f0(0x1a2),{'type':'state','common':{'name':_0x1dc4f0(0x2df),'type':_0x1dc4f0(0x2e3),'role':'button','read':!![],'write':!![]},'native':{}}),await _0x4dacfd[_0x1dc4f0(0x1b2)](_0x1dc4f0(0x216),{'type':_0x1dc4f0(0x1bf),'common':{'name':'Trigger\x20Briefing','type':'boolean','role':_0x1dc4f0(0x2b9),'read':!![],'write':!![]},'native':{}}),await _0x4dacfd['setObjectNotExistsAsync']('analysis.isAlert',{'type':'state','common':{'name':_0x1dc4f0(0x244),'type':'boolean','role':'indicator.alarm','read':!![],'write':![]},'native':{}}),await _0x4dacfd[_0x1dc4f0(0x1b2)](_0x1dc4f0(0x220),{'type':'state','common':{'name':_0x1dc4f0(0x2d9),'type':_0x1dc4f0(0x297),'role':_0x1dc4f0(0x27b),'read':!![],'write':![]},'native':{}}),await _0x4dacfd[_0x1dc4f0(0x1b2)]('analysis.activitySummary',{'type':_0x1dc4f0(0x1bf),'common':{'name':_0x1dc4f0(0x2bb),'type':'string','role':'text','read':!![],'write':![]},'native':{}}),await _0x4dacfd[_0x1dc4f0(0x1b2)](_0x1dc4f0(0x2c1),{'type':'state','common':{'name':_0x1dc4f0(0x1fb),'type':'boolean','role':_0x1dc4f0(0x2e6),'read':!![],'write':![]},'native':{}}),await _0x4dacfd[_0x1dc4f0(0x1b2)](_0x1dc4f0(0x277),{'type':_0x1dc4f0(0x1bf),'common':{'name':_0x1dc4f0(0x21f),'type':_0x1dc4f0(0x297),'role':'text','read':!![],'write':![]},'native':{}}),await _0x4dacfd[_0x1dc4f0(0x1b2)]('analysis.automation.detectedPatterns',{'type':_0x1dc4f0(0x1bf),'common':{'name':_0x1dc4f0(0x282),'type':_0x1dc4f0(0x297),'role':_0x1dc4f0(0x20e),'read':!![],'write':![]},'native':{}}),await _0x4dacfd[_0x1dc4f0(0x1b2)]('analysis.automation.targetId',{'type':_0x1dc4f0(0x1bf),'common':{'name':_0x1dc4f0(0x238),'type':'string','role':_0x1dc4f0(0x28a),'read':!![],'write':![]},'native':{}}),await _0x4dacfd[_0x1dc4f0(0x1b2)](_0x1dc4f0(0x2c8),{'type':_0x1dc4f0(0x1bf),'common':{'name':_0x1dc4f0(0x271),'type':'string','role':_0x1dc4f0(0x28a),'read':!![],'write':![]},'native':{}}),await _0x4dacfd[_0x1dc4f0(0x1b2)](_0x1dc4f0(0x270),{'type':_0x1dc4f0(0x1bf),'common':{'name':'Auto\x20Apply','type':_0x1dc4f0(0x2e3),'role':'switch','read':!![],'write':!![]},'native':{}}),await _0x4dacfd[_0x1dc4f0(0x1b2)](_0x1dc4f0(0x231),{'type':_0x1dc4f0(0x1bf),'common':{'name':_0x1dc4f0(0x1a6),'type':_0x1dc4f0(0x2e3),'role':'button','read':!![],'write':!![]},'native':{}});}async function loadSystemMode(_0x1cdccb){const _0x532b10=a0_0x1668e0;try{const _0x56bed4=await _0x1cdccb[_0x532b10(0x28d)](SYSTEM_DP_MODE);_0x56bed4&&_0x56bed4[_0x532b10(0x2c4)]&&Object['values'](SYSTEM_MODES)[_0x532b10(0x242)](_0x56bed4[_0x532b10(0x2c4)])?_0x1cdccb[_0x532b10(0x2fb)]=_0x56bed4[_0x532b10(0x2c4)]:(_0x1cdccb['currentSystemMode']=SYSTEM_MODES[_0x532b10(0x1be)],await _0x1cdccb[_0x532b10(0x1ac)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x532b10(0x1be)],'ack':!![]}));}catch(_0x43305c){_0x1cdccb[_0x532b10(0x2fb)]=SYSTEM_MODES[_0x532b10(0x1be)];}}async function loadRawEventLog(_0x7a92bf){const _0xc74577=a0_0x1668e0;try{const _0x215271=await _0x7a92bf[_0xc74577(0x28d)](LTM_DP_RAW_LOG);if(_0x215271&&_0x215271[_0xc74577(0x2c4)])_0x7a92bf[_0xc74577(0x1b8)]=JSON['parse'](_0x215271[_0xc74577(0x2c4)]);}catch(_0x438858){_0x7a92bf['rawEventLog']=[];}}async function saveRawEventLog(_0x1c0848){const _0x579211=a0_0x1668e0;if(_0x1c0848['rawEventLog']['length']>RAW_LOG_MAX_SIZE)_0x1c0848['rawEventLog'][_0x579211(0x228)](0x0,_0x1c0848[_0x579211(0x1b8)][_0x579211(0x2f2)]-RAW_LOG_MAX_SIZE);await _0x1c0848['setStateAsync'](LTM_DP_RAW_LOG,{'val':JSON[_0x579211(0x2f9)](_0x1c0848[_0x579211(0x1b8)]),'ack':!![]});}async function loadDailyDigests(_0x5dd0ee){const _0x1ae9dc=a0_0x1668e0;try{const _0x5d2e60=await _0x5dd0ee[_0x1ae9dc(0x28d)](LTM_DP_DAILY_DIGESTS);if(_0x5d2e60&&_0x5d2e60[_0x1ae9dc(0x2c4)])_0x5dd0ee['dailyDigests']=JSON[_0x1ae9dc(0x2a3)](_0x5d2e60['val']);}catch(_0x19e888){_0x5dd0ee[_0x1ae9dc(0x260)]=[];}await updateBaselineStatus(_0x5dd0ee);}async function saveDailyDigests(_0x518b4,_0x39c713=!![]){const _0x39c235=a0_0x1668e0,_0x3d9e70=_0x518b4['config'][_0x39c235(0x2d2)]||0x3c;_0x518b4['dailyDigests'][_0x39c235(0x2f2)]>_0x3d9e70&&_0x518b4[_0x39c235(0x260)]['splice'](0x0,_0x518b4[_0x39c235(0x260)]['length']-_0x3d9e70);await _0x518b4[_0x39c235(0x1ac)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x39c235(0x2f9)](_0x518b4['dailyDigests']),'ack':!![]});if(_0x39c713)await updateBaselineStatus(_0x518b4);}async function updateAnalysisHistory(_0x54a9fb,_0xd6e16){const _0x3c1e82=a0_0x1668e0;_0x54a9fb[_0x3c1e82(0x2ac)][_0x3c1e82(0x26c)](_0xd6e16);if(_0x54a9fb[_0x3c1e82(0x2ac)]['length']>HISTORY_MAX_SIZE)_0x54a9fb[_0x3c1e82(0x2ac)][_0x3c1e82(0x30d)]();await _0x54a9fb['setStateAsync'](_0x3c1e82(0x274),{'val':JSON[_0x3c1e82(0x2f9)](_0x54a9fb[_0x3c1e82(0x2ac)]),'ack':!![]});}async function updateBaselineStatus(_0x15cef3){const _0x50366b=a0_0x1668e0;if(!_0x15cef3[_0x50366b(0x2f0)]){await _0x15cef3[_0x50366b(0x1ac)](LTM_DP_BASELINE_STATUS,{'val':_0x50366b(0x19a),'ack':!![]});return;}const _0x41539b=_0x15cef3[_0x50366b(0x260)][_0x50366b(0x2f2)]>=(_0x15cef3[_0x50366b(0x2b3)][_0x50366b(0x2ed)]||0x7)?'Aktiv\x20('+_0x15cef3[_0x50366b(0x260)][_0x50366b(0x2f2)]+_0x50366b(0x23e):_0x50366b(0x262)+_0x15cef3[_0x50366b(0x260)][_0x50366b(0x2f2)]+'/'+(_0x15cef3[_0x50366b(0x2b3)]['minDaysForBaseline']||0x7)+')';await _0x15cef3[_0x50366b(0x1ac)](LTM_DP_BASELINE_STATUS,{'val':_0x41539b,'ack':!![]});}async function initSensorSubscriptions(_0x5389ef){const _0x6c99fe=a0_0x1668e0,_0x57c2a0=_0x5389ef[_0x6c99fe(0x2b3)]['devices'];if(_0x57c2a0)for(const _0x33b2f6 of _0x57c2a0){await _0x5389ef[_0x6c99fe(0x295)](_0x33b2f6['id']);}}async function initPresenceSubscriptions(_0x17761a){const _0x1f8aeb=_0x17761a['config']['presenceDevices'];if(_0x1f8aeb)for(const _0x32c770 of _0x1f8aeb){await _0x17761a['subscribeForeignStatesAsync'](_0x32c770);}}async function setupTelegramListener(_0x43be3d){const _0x4636a1=a0_0x1668e0,_0x2a9e4d=_0x43be3d[_0x4636a1(0x2b3)][_0x4636a1(0x310)];if(_0x43be3d[_0x4636a1(0x2b3)]['notifyTelegramEnabled']&&_0x2a9e4d)await _0x43be3d[_0x4636a1(0x295)](_0x2a9e4d+'.communicate.request');}async function checkWifiPresence(_0xe7ff09){const _0x2f566f=a0_0x1668e0;try{const _0x34498d=_0xe7ff09[_0x2f566f(0x2b3)][_0x2f566f(0x24c)]||[];let _0x243d96=![];const _0x5993fe=[];for(const _0x2fce10 of _0x34498d){try{const _0x3cd2fd=await _0xe7ff09['getForeignStateAsync'](_0x2fce10);_0x3cd2fd&&(_0x3cd2fd[_0x2f566f(0x2c4)]===!![]||_0x3cd2fd[_0x2f566f(0x2c4)]===_0x2f566f(0x281)||_0x3cd2fd[_0x2f566f(0x2c4)]===0x1)&&(_0x243d96=!![],_0x5993fe[_0x2f566f(0x18f)](_0x2fce10));}catch(_0x587359){}}return await _0xe7ff09[_0x2f566f(0x1ac)](_0x2f566f(0x317),{'val':_0x5993fe[_0x2f566f(0x245)](',\x20'),'ack':!![]}),_0x243d96&&(_0xe7ff09[_0x2f566f(0x1c5)]&&(_0xe7ff09[_0x2f566f(0x1dd)][_0x2f566f(0x27f)](_0x2f566f(0x18c)),abortExitTimer(_0xe7ff09)),!_0xe7ff09[_0x2f566f(0x1cd)]&&_0xe7ff09[_0x2f566f(0x2fb)]===SYSTEM_MODES[_0x2f566f(0x1be)]&&await setPresence(_0xe7ff09,!![])),_0x243d96;}catch(_0x3526e6){return![];}}function startExitTimer(_0x3c3f76){const _0x6a1f3c=a0_0x1668e0;abortExitTimer(_0x3c3f76),_0x3c3f76[_0x6a1f3c(0x28b)]=!![],_0x3c3f76[_0x6a1f3c(0x287)]=setTimeout(()=>{_0x3c3f76['isGracePeriodActive']=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),_0x3c3f76[_0x6a1f3c(0x1c5)]=setTimeout(()=>{const _0x37a932=_0x6a1f3c;setPresence(_0x3c3f76,![]),_0x3c3f76[_0x37a932(0x1c5)]=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}function abortExitTimer(_0x17deb5){const _0x2ce226=a0_0x1668e0;if(_0x17deb5[_0x2ce226(0x1c5)])clearTimeout(_0x17deb5[_0x2ce226(0x1c5)]);if(_0x17deb5['exitGraceTimer'])clearTimeout(_0x17deb5[_0x2ce226(0x287)]);_0x17deb5['exitTimer']=null,_0x17deb5[_0x2ce226(0x287)]=null,_0x17deb5[_0x2ce226(0x28b)]=![];}async function setPresence(_0x19a2c2,_0x25a2a3){const _0xa9724d=a0_0x1668e0;if(_0x19a2c2[_0xa9724d(0x1cd)]===_0x25a2a3)return;_0x19a2c2[_0xa9724d(0x1cd)]=_0x25a2a3,await _0x19a2c2[_0xa9724d(0x1ac)](_0xa9724d(0x2d8),{'val':_0x25a2a3,'ack':!![]});}async function executeAutomationAction(_0x6f1d7f){const _0x498b50=a0_0x1668e0;try{const _0x243a0a=await _0x6f1d7f[_0x498b50(0x28d)]('analysis.automation.targetId'),_0x23934b=await _0x6f1d7f['getStateAsync'](_0x498b50(0x2c8));if(_0x243a0a&&_0x243a0a[_0x498b50(0x2c4)]&&_0x23934b){const _0x9bfc47=_0x243a0a['val'];let _0x26c5f2=_0x23934b[_0x498b50(0x2c4)];try{_0x26c5f2=JSON[_0x498b50(0x2a3)](_0x26c5f2);}catch(_0x7ab34d){}_0x6f1d7f[_0x498b50(0x1dd)][_0x498b50(0x27f)](_0x498b50(0x2ae)+_0x9bfc47+_0x498b50(0x2f1)+_0x26c5f2),await _0x6f1d7f['setForeignStateAsync'](_0x9bfc47,_0x26c5f2);}else _0x6f1d7f[_0x498b50(0x1dd)][_0x498b50(0x2a8)]('ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.');}catch(_0x1399bf){_0x6f1d7f[_0x498b50(0x1dd)][_0x498b50(0x308)]('BUTLER\x20Execution\x20Error:\x20'+_0x1399bf[_0x498b50(0x253)]);}}async function processSensorEvent(_0x5efac2,_0x2cd545,_0x3afaea,_0x9fdb23){const _0x48f863=a0_0x1668e0;if(!_0x9fdb23)return;const _0x17596d=_0x3afaea[_0x48f863(0x2c4)],_0x57ae28=Date[_0x48f863(0x30c)](),_0x4a46c0=_0x5efac2[_0x48f863(0x292)][_0x2cd545];_0x5efac2[_0x48f863(0x292)][_0x2cd545]=_0x17596d;if(!_0x9fdb23[_0x48f863(0x191)]&&_0x4a46c0!=undefined&&_0x4a46c0==_0x17596d)return;const _0x6985ae=(_0x9fdb23[_0x48f863(0x314)]||'')[_0x48f863(0x1c7)](),_0x8ee00d=_0x6985ae[_0x48f863(0x242)](_0x48f863(0x2e0))||_0x6985ae[_0x48f863(0x242)]('temperatur')||_0x6985ae[_0x48f863(0x242)](_0x48f863(0x25d))||_0x6985ae[_0x48f863(0x242)](_0x48f863(0x1f8));_0x5efac2[_0x48f863(0x2f0)]&&_0x8ee00d&&recordThermodynamics(_0x5efac2,_0x2cd545,_0x17596d,_0x9fdb23['location']);const _0x3a322a={'timestamp':_0x57ae28,'id':_0x2cd545,'name':_0x9fdb23[_0x48f863(0x2e1)],'type':_0x9fdb23[_0x48f863(0x314)],'location':_0x9fdb23['location'],'value':_0x17596d};_0x5efac2[_0x48f863(0x1e3)][_0x48f863(0x26c)](_0x3a322a);if(_0x5efac2['eventHistory']['length']>HISTORY_MAX_SIZE)_0x5efac2[_0x48f863(0x1e3)]['pop']();await _0x5efac2[_0x48f863(0x1ac)]('events.lastEvent',{'val':JSON['stringify'](_0x3a322a),'ack':!![]}),await _0x5efac2[_0x48f863(0x1ac)](_0x48f863(0x2ca),{'val':JSON['stringify'](_0x5efac2[_0x48f863(0x1e3)]),'ack':!![]});_0x5efac2[_0x48f863(0x2f0)]&&(_0x5efac2['rawEventLog'][_0x48f863(0x18f)](_0x3a322a),await saveRawEventLog(_0x5efac2),recordSequence(_0x5efac2,_0x3a322a));if(_0x9fdb23[_0x48f863(0x188)]&&_0x17596d===!![]){if(_0x5efac2[_0x48f863(0x1cd)]&&!_0x5efac2[_0x48f863(0x28b)])startExitTimer(_0x5efac2);else{if(!_0x5efac2[_0x48f863(0x1cd)])setPresence(_0x5efac2,!![]);}}else{if(_0x9fdb23[_0x48f863(0x314)]===_0x48f863(0x1f3)&&_0x17596d===!![]){if(_0x5efac2[_0x48f863(0x1c5)])abortExitTimer(_0x5efac2);if(!_0x5efac2[_0x48f863(0x1cd)]&&_0x5efac2[_0x48f863(0x2fb)]===SYSTEM_MODES[_0x48f863(0x1be)])setPresence(_0x5efac2,!![]);}}}async function recordThermodynamics(_0x358471,_0x2cdfbf,_0x2a8171,_0x2e30cd){const _0x524136=a0_0x1668e0,_0x43fc71=await getOutsideTemperatureNumeric(_0x358471),_0x7ed147=await _0x358471['getStateAsync'](_0x524136(0x26b));let _0x5cdd04=[];if(_0x7ed147&&_0x7ed147['val'])try{_0x5cdd04=JSON[_0x524136(0x2a3)](_0x7ed147[_0x524136(0x2c4)]);}catch(_0x10aa74){}_0x5cdd04[_0x524136(0x18f)]({'ts':Date[_0x524136(0x30c)](),'room':_0x2e30cd||_0x524136(0x2b5),'t_in':_0x2a8171,'t_out':_0x43fc71});if(_0x5cdd04[_0x524136(0x2f2)]>THERMO_LOG_SIZE)_0x5cdd04[_0x524136(0x257)]();await _0x358471['setStateAsync']('LTM.trainingData.thermodynamics',{'val':JSON['stringify'](_0x5cdd04),'ack':!![]});}async function getOutsideTemperatureNumeric(_0x531af7){const _0x3e7535=a0_0x1668e0;if(_0x531af7[_0x3e7535(0x2b3)][_0x3e7535(0x2cc)])try{const _0x2bfe66=await _0x531af7['getForeignStateAsync'](_0x531af7[_0x3e7535(0x2b3)][_0x3e7535(0x2cc)]);if(_0x2bfe66&&_0x2bfe66['val']!==undefined&&_0x2bfe66[_0x3e7535(0x2c4)]!==null)return parseFloat(_0x2bfe66[_0x3e7535(0x2c4)]);}catch(_0x235673){}const _0x1d07ff=_0x531af7[_0x3e7535(0x2b3)][_0x3e7535(0x237)];if(!_0x531af7[_0x3e7535(0x2b3)][_0x3e7535(0x28e)]||!_0x1d07ff)return null;try{let _0x5c6ac7='';if(_0x1d07ff[_0x3e7535(0x242)]('accuweather'))_0x5c6ac7=_0x1d07ff+_0x3e7535(0x22d);else{if(_0x1d07ff[_0x3e7535(0x242)](_0x3e7535(0x18b)))_0x5c6ac7=_0x1d07ff+'.NextHours.Location_1.Day_1.current.temp_value';else{if(_0x1d07ff[_0x3e7535(0x242)](_0x3e7535(0x194)))_0x5c6ac7=_0x1d07ff+_0x3e7535(0x2a6);else{if(_0x1d07ff[_0x3e7535(0x242)](_0x3e7535(0x193)))_0x5c6ac7=_0x1d07ff+_0x3e7535(0x249);}}}if(_0x5c6ac7){const _0x8685e=await _0x531af7[_0x3e7535(0x2a7)](_0x5c6ac7);if(_0x8685e&&_0x8685e[_0x3e7535(0x2c4)]!==undefined&&_0x8685e[_0x3e7535(0x2c4)]!==null)return parseFloat(_0x8685e[_0x3e7535(0x2c4)]);}}catch(_0x1b0cc2){}return null;}async function recordSequence(_0xb5676b,_0x4861e3){const _0x710d2d=a0_0x1668e0,_0x31d77a=(_0x4861e3[_0x710d2d(0x314)]||'')['toLowerCase'](),_0x494733=[_0x710d2d(0x1f3),_0x710d2d(0x19c),_0x710d2d(0x203),_0x710d2d(0x2d7),_0x710d2d(0x2a2),'door',_0x710d2d(0x2ad),'window',_0x710d2d(0x217),_0x710d2d(0x1bd),_0x710d2d(0x306),'light',_0x710d2d(0x1b4),_0x710d2d(0x205),'schalter',_0x710d2d(0x2c5),_0x710d2d(0x25f)];if(!_0x494733[_0x710d2d(0x2de)](_0x17ab66=>_0x31d77a['includes'](_0x17ab66)))return;if(!_0x4861e3[_0x710d2d(0x30b)])return;if(sequenceTimer)clearTimeout(sequenceTimer);activeSequence['push']({'loc':_0x4861e3[_0x710d2d(0x208)]||_0x710d2d(0x2b5),'id':_0x4861e3['id'],'ts':Date[_0x710d2d(0x30c)]()}),sequenceTimer=setTimeout(async()=>{const _0x316d64=_0x710d2d;if(activeSequence[_0x316d64(0x2f2)]>0x1)await saveCompletedSequence(_0xb5676b);activeSequence=[];},SEQUENCE_TIMEOUT_MS);}async function saveCompletedSequence(_0x5f1b20){const _0x57a750=a0_0x1668e0;try{const _0x1f6039=await _0x5f1b20[_0x57a750(0x28d)](_0x57a750(0x1ea));let _0xca15ae=[];if(_0x1f6039&&_0x1f6039[_0x57a750(0x2c4)])try{_0xca15ae=JSON[_0x57a750(0x2a3)](_0x1f6039['val']);}catch(_0x514bb6){}const _0x10845f=activeSequence[0x0]['ts'],_0x2a2dbf=activeSequence[_0x57a750(0x31d)](_0x49b8df=>({'loc':_0x49b8df[_0x57a750(0x285)],'t_delta':Math['round']((_0x49b8df['ts']-_0x10845f)/0x3e8)})),_0x5db11a={'timestamp':new Date(_0x10845f)[_0x57a750(0x209)](),'steps':_0x2a2dbf,'duration':Math[_0x57a750(0x294)]((activeSequence[activeSequence['length']-0x1]['ts']-_0x10845f)/0x3e8),'daytime':new Date(_0x10845f)[_0x57a750(0x290)]()};_0xca15ae[_0x57a750(0x18f)](_0x5db11a);if(_0xca15ae['length']>MAX_TRAINING_SET_SIZE)_0xca15ae[_0x57a750(0x257)]();await _0x5f1b20[_0x57a750(0x1ac)](_0x57a750(0x1ea),{'val':JSON['stringify'](_0xca15ae),'ack':!![]}),runSecurityCheck(_0x5f1b20,_0x5db11a);}catch(_0x4dd0e5){_0x5f1b20[_0x57a750(0x1dd)]['error'](_0x57a750(0x2a4)+_0x4dd0e5[_0x57a750(0x253)]);}}function runSecurityCheck(_0x2600fa,_0x1773fa){const _0x4efeb7=a0_0x1668e0;if(!_0x2600fa[_0x4efeb7(0x2f0)])return;sendToPython(_0x2600fa,_0x4efeb7(0x2ff),{'sequence':_0x1773fa});}function a0_0x53cb(_0x2e2064,_0x18182b){const _0x4918f3=a0_0x5449();return a0_0x53cb=function(_0x12ddbd,_0x3d18e9){_0x12ddbd=_0x12ddbd-0x187;let _0x544900=_0x4918f3[_0x12ddbd];return _0x544900;},a0_0x53cb(_0x2e2064,_0x18182b);}async function createDailyDigest(_0x2a0f31){const _0x45a7db=a0_0x1668e0;if(!_0x2a0f31[_0x45a7db(0x2f0)])return;await _0x2a0f31[_0x45a7db(0x1ac)](LTM_DP_STATUS,{'val':_0x45a7db(0x189),'ack':!![]});if(!_0x2a0f31[_0x45a7db(0x1a1)]||_0x2a0f31[_0x45a7db(0x1b8)]['length']<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x2a0f31['setStateAsync'](LTM_DP_STATUS,{'val':_0x45a7db(0x29c),'ack':!![]});return;}const _0x39e087=JSON[_0x45a7db(0x2a3)](JSON[_0x45a7db(0x2f9)](_0x2a0f31['rawEventLog'])),_0x4844fa=_0x39e087[_0x45a7db(0x2f2)],_0x5d053f='ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a'+JSON[_0x45a7db(0x2f9)](_0x39e087);try{const _0xf541d1=await _0x2a0f31[_0x45a7db(0x1a1)][_0x45a7db(0x2b0)](_0x5d053f),_0x46211f=JSON['parse'](_0xf541d1[_0x45a7db(0x259)][_0x45a7db(0x28a)]()[_0x45a7db(0x24f)](/```json|```/g,'')[_0x45a7db(0x219)]()),_0x165da8={'timestamp':new Date()['toISOString'](),'eventCount':_0x4844fa,'summary':_0x46211f[_0x45a7db(0x318)]||_0x45a7db(0x256),'activityLevel':_0x46211f[_0x45a7db(0x1ed)]||_0x45a7db(0x288),'systemMode':_0x2a0f31['currentSystemMode']};_0x2a0f31[_0x45a7db(0x260)]['push'](_0x165da8),await saveDailyDigests(_0x2a0f31),_0x2a0f31[_0x45a7db(0x1b8)]=[],await saveRawEventLog(_0x2a0f31),await _0x2a0f31[_0x45a7db(0x1ac)](LTM_DP_STATUS,{'val':_0x45a7db(0x1ff),'ack':!![]});if(_0x2a0f31[_0x45a7db(0x2f0)])sendToPython(_0x2a0f31,_0x45a7db(0x1d6),{'digest':_0x165da8});}catch(_0x4ba4ea){_0x2a0f31[_0x45a7db(0x1dd)][_0x45a7db(0x308)](_0x4ba4ea[_0x45a7db(0x253)]);}}async function runBaselineDriftAnalysis(_0x4edfb2){const _0xf942a=a0_0x1668e0;if(!_0x4edfb2[_0xf942a(0x2f0)]||!_0x4edfb2[_0xf942a(0x1a1)])return;const _0x372638=_0x4edfb2[_0xf942a(0x2b3)]['ltmStbWindowDays']||0xe;if(_0x4edfb2[_0xf942a(0x260)]['length']<_0x372638+0x7){await _0x4edfb2[_0xf942a(0x1ac)](LTM_DP_DRIFT_STATUS,{'val':_0xf942a(0x2ea),'ack':!![]});return;}const _0x38193c=_0x4edfb2[_0xf942a(0x260)][_0xf942a(0x1ad)](-_0x372638),_0x353b4c=_0x4edfb2[_0xf942a(0x260)][_0xf942a(0x1ad)](0x0,_0x4edfb2['dailyDigests'][_0xf942a(0x2f2)]-_0x372638),_0xe32b39='ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20'+JSON[_0xf942a(0x2f9)](_0x353b4c)+_0xf942a(0x2ef)+JSON['stringify'](_0x38193c);try{const _0x420b2f=await _0x4edfb2[_0xf942a(0x1a1)][_0xf942a(0x2b0)](_0xe32b39),_0x263d87=JSON[_0xf942a(0x2a3)](_0x420b2f[_0xf942a(0x259)][_0xf942a(0x28a)]()[_0xf942a(0x24f)](/```json|```/g,'')[_0xf942a(0x219)]());_0x263d87[_0xf942a(0x26d)]&&(await _0x4edfb2[_0xf942a(0x1ac)](LTM_DP_DRIFT_STATUS,{'val':_0x263d87['baselineDrift'],'ack':!![]}),await _0x4edfb2['setStateAsync'](LTM_DP_DRIFT_DETAILS,{'val':_0x263d87[_0xf942a(0x243)],'ack':!![]}),await _0x4edfb2['setStateAsync'](LTM_DP_DRIFT_LAST_CHECK,{'val':Date[_0xf942a(0x30c)](),'ack':!![]}));}catch(_0x4ea511){}}async function sendMorningBriefing(_0xd057b7){const _0x133898=a0_0x1668e0;if(!_0xd057b7[_0x133898(0x1a1)])return;try{const _0x1ca4fa=_0x133898(0x305),_0x185ad8=await _0xd057b7[_0x133898(0x1a1)]['generateContent'](_0x1ca4fa),_0x53a633=_0x185ad8['response'][_0x133898(0x28a)]();sendNotification(_0xd057b7,'ðŸŒ…\x20Morning\x20Briefing:\x0a'+_0x53a633);}catch(_0x2f5edf){_0xd057b7['log']['error'](_0x133898(0x1ae)+_0x2f5edf[_0x133898(0x253)]);}}function stopPythonService(_0x107fb5){const _0x5b8297=a0_0x1668e0;if(_0x107fb5[_0x5b8297(0x31b)]){try{_0x107fb5['pythonProcess'][_0x5b8297(0x246)]();}catch(_0x4753ae){}_0x107fb5[_0x5b8297(0x31b)]=null;}}function sendToPython(_0x139fbd,_0x230524,_0x4caac3={}){const _0x3cee82=a0_0x1668e0;if(!_0x139fbd['pythonProcess']||!_0x139fbd[_0x3cee82(0x31b)][_0x3cee82(0x1bb)][_0x3cee82(0x267)])return;const _0x26f580=JSON[_0x3cee82(0x2f9)]({'command':_0x230524,..._0x4caac3});try{_0x139fbd[_0x3cee82(0x31b)][_0x3cee82(0x1bb)][_0x3cee82(0x1b7)](_0x26f580+'\x0a');}catch(_0x20c25f){}}function runPythonHealthCheck(_0x31c4c0){const _0x5bc0bf=a0_0x1668e0;if(!_0x31c4c0[_0x5bc0bf(0x260)]||_0x31c4c0[_0x5bc0bf(0x260)][_0x5bc0bf(0x2f2)]<0x2)return;const _0x9eb0cc=_0x31c4c0['dailyDigests'][_0x5bc0bf(0x31d)](_0x51f1b8=>{const _0x4870a0=_0x5bc0bf,_0x8ba66a=(_0x51f1b8[_0x4870a0(0x1ed)]||'')[_0x4870a0(0x1c7)]();return ACTIVITY_LEVEL_MAP[_0x8ba66a]||0x32;});sendToPython(_0x31c4c0,_0x5bc0bf(0x28c),{'values':_0x9eb0cc,'tag':_0x5bc0bf(0x1dc)});}function handlePythonResult(_0x468518,_0x49a778){const _0x25d432=a0_0x1668e0;if(_0x49a778['type']==='PONG')_0x468518[_0x25d432(0x1dd)][_0x25d432(0x2e7)](_0x25d432(0x252));else{if(_0x49a778[_0x25d432(0x314)]==='SECURITY_RESULT'){const {anomaly_score:_0x4c767e,is_anomaly:_0x8eb997,threshold:_0x4064ba,explanation:_0x5431a8}=_0x49a778[_0x25d432(0x226)];_0x468518[_0x25d432(0x1dd)][_0x25d432(0x27f)]('ðŸ›¡ï¸\x20SECURITY\x20CHECK:\x20Score\x20'+_0x4c767e[_0x25d432(0x1f6)](0x5)+'\x20->\x20'+(_0x8eb997?_0x25d432(0x1e7):'OK')),_0x468518[_0x25d432(0x1ac)]('analysis.security.lastScore',{'val':_0x4c767e,'ack':!![]}),_0x468518['setStateAsync'](_0x25d432(0x2e2),{'val':new Date()[_0x25d432(0x209)](),'ack':!![]});if(_0x4064ba)_0x468518[_0x25d432(0x1ac)](_0x25d432(0x24e),{'val':_0x4064ba,'ack':!![]});if(_0x8eb997){let _0x103179=_0x25d432(0x31a)+_0x4c767e[_0x25d432(0x1f6)](0x4)+')';if(_0x5431a8&&_0x5431a8!=='Unknown')_0x103179+=_0x25d432(0x1d7)+_0x5431a8;_0x468518['setStateAsync'](_0x25d432(0x2fe),{'val':!![],'ack':!![]}),_0x468518[_0x25d432(0x1ac)](_0x25d432(0x220),{'val':_0x103179,'ack':!![]}),sendNotification(_0x468518,_0x25d432(0x1cc)+_0x103179,![],!![]);}}else{if(_0x49a778[_0x25d432(0x314)]===_0x25d432(0x19d)){const _0x3688ea=_0x49a778['payload'][_0x25d432(0x289)]||'',_0x85c436=_0x49a778[_0x25d432(0x226)][_0x25d432(0x234)],_0x517a51=_0x49a778[_0x25d432(0x226)][_0x25d432(0x1ba)]?_0x25d432(0x2c3)+new Date()[_0x25d432(0x2dd)]()+'\x20('+_0x3688ea+')':_0x25d432(0x18e)+_0x49a778[_0x25d432(0x226)][_0x25d432(0x276)];_0x468518[_0x25d432(0x1ac)]('analysis.training.status',{'val':_0x517a51,'ack':!![]});if(_0x49a778[_0x25d432(0x226)]['success']&&_0x85c436)_0x468518['setStateAsync'](_0x25d432(0x24e),{'val':_0x85c436,'ack':!![]});}else{if(_0x49a778['type']===_0x25d432(0x2aa)){const {patterns:_0x2e1056}=_0x49a778['payload'];if(_0x2e1056&&_0x2e1056['length']>0x0){_0x468518[_0x25d432(0x1dd)][_0x25d432(0x27f)]('ðŸ›‹ï¸\x20BUTLER:\x20Found\x20'+_0x2e1056[_0x25d432(0x2f2)]+'\x20new\x20patterns.'),_0x468518[_0x25d432(0x1ac)](_0x25d432(0x215),{'val':JSON[_0x25d432(0x2f9)](_0x2e1056),'ack':!![]});const _0x1ce4b6=_0x2e1056[0x0],_0x12e8f4=_0x25d432(0x1b9)+_0x1ce4b6[_0x25d432(0x2dc)]+'\x20('+(_0x1ce4b6['confidence']*0x64)[_0x25d432(0x1f6)](0x0)+'%)';_0x468518[_0x25d432(0x1ac)](_0x25d432(0x2c1),{'val':!![],'ack':!![]}),_0x468518[_0x25d432(0x1ac)](_0x25d432(0x277),{'val':_0x12e8f4,'ack':!![]});}else _0x468518['log'][_0x25d432(0x27f)](_0x25d432(0x263)),_0x468518[_0x25d432(0x1ac)]('analysis.automation.patternDetected',{'val':![],'ack':!![]}),_0x468518[_0x25d432(0x1ac)](_0x25d432(0x215),{'val':'[]','ack':!![]});}else{if(_0x49a778[_0x25d432(0x314)]==='ENERGY_TRAIN_RESULT'){if(_0x49a778[_0x25d432(0x226)]['success'])try{const _0x31c756=JSON[_0x25d432(0x2a3)](_0x49a778['payload'][_0x25d432(0x289)]);if(_0x31c756[_0x25d432(0x2a5)])_0x468518['setStateAsync'](_0x25d432(0x27e),{'val':JSON[_0x25d432(0x2f9)](_0x31c756[_0x25d432(0x2a5)]),'ack':!![]});if(_0x31c756[_0x25d432(0x22b)])_0x468518[_0x25d432(0x1ac)](_0x25d432(0x2a0),{'val':JSON[_0x25d432(0x2f9)](_0x31c756[_0x25d432(0x22b)]),'ack':!![]});}catch(_0x2dea8c){}}else{if(_0x49a778['type']===_0x25d432(0x1aa)){if(_0x49a778[_0x25d432(0x226)]['success'])_0x468518['log'][_0x25d432(0x27f)](_0x25d432(0x1d9));}else{if(_0x49a778['type']===_0x25d432(0x1cb))_0x468518[_0x25d432(0x1ac)](_0x25d432(0x1de),{'val':new Date()[_0x25d432(0x209)](),'ack':!![]}),_0x468518[_0x25d432(0x1ac)](_0x25d432(0x2f5),{'val':_0x49a778[_0x25d432(0x226)][_0x25d432(0x1f1)],'ack':!![]});else{if(_0x49a778['type']===_0x25d432(0x31f))_0x468518[_0x25d432(0x1ac)](_0x25d432(0x20f),{'val':_0x49a778[_0x25d432(0x226)][_0x25d432(0x303)],'ack':!![]}),_0x468518[_0x25d432(0x1ac)](_0x25d432(0x201),{'val':_0x49a778[_0x25d432(0x226)]['change_percent'],'ack':!![]});else{if(_0x49a778['type']===_0x25d432(0x298)){const {speed_trend:_0x15e584}=_0x49a778[_0x25d432(0x226)];if(_0x15e584!==undefined)_0x468518['setStateAsync'](_0x25d432(0x1d0),{'val':_0x15e584,'ack':!![]});}else{if(_0x49a778[_0x25d432(0x314)]===_0x25d432(0x2fc)){const {forecast:_0x300e59}=_0x49a778[_0x25d432(0x226)];if(_0x300e59)_0x468518[_0x25d432(0x1ac)](_0x25d432(0x222),{'val':JSON[_0x25d432(0x2f9)](_0x300e59),'ack':!![]});}else{if(_0x49a778[_0x25d432(0x314)]===_0x25d432(0x2c2)){const {data:_0x17d10b}=_0x49a778[_0x25d432(0x226)];_0x17d10b&&(_0x468518['log'][_0x25d432(0x27f)]('ðŸ•¸ï¸\x20Topology\x20Map\x20updated.'),_0x468518[_0x25d432(0x1ac)](_0x25d432(0x296),{'val':JSON[_0x25d432(0x2f9)](_0x17d10b),'ack':!![]}));}}}}}}}}}}}}function startPythonService(_0x15cce5){const _0xcf0633=a0_0x1668e0;let _0x3ec45e=_0xcf0633(0x29a);if(fs[_0xcf0633(0x224)](installer['PYTHON_EXE']))_0x3ec45e=installer[_0xcf0633(0x212)];try{const _0x513295=path['join'](__dirname,_0xcf0633(0x229),_0xcf0633(0x1db));_0x15cce5['pythonProcess']=spawn(_0x3ec45e,[_0x513295]),_0x15cce5[_0xcf0633(0x31b)][_0xcf0633(0x1bc)]['on'](_0xcf0633(0x24a),_0x13ecbc=>{const _0x5137d9=_0xcf0633,_0x3160f1=_0x13ecbc[_0x5137d9(0x200)]()[_0x5137d9(0x1d8)]('\x0a');_0x3160f1[_0x5137d9(0x29b)](_0x3ae53b=>{const _0x433e79=_0x5137d9,_0x235914=_0x3ae53b[_0x433e79(0x219)]();if(!_0x235914)return;if(_0x235914[_0x433e79(0x30e)](_0x433e79(0x254)))_0x15cce5[_0x433e79(0x1dd)][_0x433e79(0x2e7)](_0x433e79(0x315)+_0x235914[_0x433e79(0x2b2)](0x5)['trim']());else{if(_0x235914[_0x433e79(0x30e)](_0x433e79(0x20c)))try{const _0x572041=JSON[_0x433e79(0x2a3)](_0x235914['substring'](0x8)[_0x433e79(0x219)]());handlePythonResult(_0x15cce5,_0x572041);}catch(_0x57eb92){}}});}),_0x15cce5['pythonProcess']['on'](_0xcf0633(0x28f),_0x239aa3=>{_0x15cce5['pythonProcess']=null;});}catch(_0xb20efb){_0x15cce5[_0xcf0633(0x1dd)][_0xcf0633(0x308)](_0xcf0633(0x264)+_0xb20efb['message']);}}async function runAutopilot(_0x3a3943){const _0x55285f=a0_0x1668e0;_0x3a3943['log'][_0x55285f(0x2e7)](_0x55285f(0x25e)),await runGeminiAnalysis(_0x3a3943),updateHealthVector(_0x3a3943),triggerGaitAnalysis(_0x3a3943),triggerEnergyPrediction(_0x3a3943);}async function triggerGaitAnalysis(_0x34f12d){const _0x28eb25=a0_0x1668e0;if(!_0x34f12d[_0x28eb25(0x2f0)])return;try{const _0x780d74=await _0x34f12d[_0x28eb25(0x28d)](_0x28eb25(0x1ea));_0x780d74&&_0x780d74['val']&&sendToPython(_0x34f12d,_0x28eb25(0x233),{'sequences':JSON[_0x28eb25(0x2a3)](_0x780d74['val'])});}catch(_0x1b0105){}}async function triggerEnergyPrediction(_0x2363fe){const _0x3ac2ad=a0_0x1668e0;if(!_0x2363fe[_0x3ac2ad(0x2f0)])return;try{const _0x2691a8=await getOutsideTemperatureNumeric(_0x2363fe);if(_0x2691a8===null)return;const _0x1ba2f8={},_0x48b8d4=_0x2363fe[_0x3ac2ad(0x2b3)][_0x3ac2ad(0x22a)]||[];for(const _0x331939 of _0x48b8d4){if(_0x331939['type']===_0x3ac2ad(0x2e0)&&_0x331939[_0x3ac2ad(0x208)]){const _0x52a992=_0x2363fe[_0x3ac2ad(0x292)][_0x331939['id']];if(_0x52a992!==undefined)_0x1ba2f8[_0x331939[_0x3ac2ad(0x208)]]=_0x52a992;}}Object[_0x3ac2ad(0x1c1)](_0x1ba2f8)[_0x3ac2ad(0x2f2)]>0x0&&sendToPython(_0x2363fe,'PREDICT_ENERGY',{'current_temps':_0x1ba2f8,'t_out':_0x2691a8});}catch(_0x5b6385){}}function updateHealthVector(_0x2c338e){const _0x2446a1=a0_0x1668e0;if(!_0x2c338e['rawEventLog']||_0x2c338e[_0x2446a1(0x1b8)][_0x2446a1(0x2f2)]===0x0)return;const _0x111d63=new Array(0x60)[_0x2446a1(0x30a)](0x0),_0x5af22d=new Date()[_0x2446a1(0x197)](0x0,0x0,0x0,0x0);_0x2c338e[_0x2446a1(0x1b8)][_0x2446a1(0x29b)](_0x34c681=>{const _0x401e45=_0x2446a1,_0x580043=new Date(_0x34c681[_0x401e45(0x192)]);if(_0x580043[_0x401e45(0x2a9)]()>=_0x5af22d){const _0xc80b35=_0x580043[_0x401e45(0x290)](),_0x5d15b1=_0x580043[_0x401e45(0x25c)](),_0x190b4d=_0xc80b35*0x4+Math['floor'](_0x5d15b1/0xf);if(_0x190b4d>=0x0&&_0x190b4d<0x60)_0x111d63[_0x190b4d]++;}}),_0x2c338e[_0x2446a1(0x1ac)](_0x2446a1(0x2f3),{'val':JSON[_0x2446a1(0x2f9)](_0x111d63),'ack':!![]});}async function getWeatherContext(_0x495dca){const _0x44df14=a0_0x1668e0;if(!_0x495dca[_0x44df14(0x2b3)][_0x44df14(0x28e)]||!_0x495dca['config'][_0x44df14(0x237)])return'Wetterdaten\x20deaktiviert.';try{const _0xef72ba=_0x495dca['config'][_0x44df14(0x237)];let _0x20b3a6=await _0x495dca[_0x44df14(0x2a7)](_0xef72ba+_0x44df14(0x22d));if(!_0x20b3a6)_0x20b3a6=await _0x495dca[_0x44df14(0x2a7)](_0xef72ba+_0x44df14(0x2a6));let _0x20c6df=await _0x495dca[_0x44df14(0x2a7)](_0xef72ba+'.Current.WeatherText');if(!_0x20c6df)_0x20c6df=await _0x495dca[_0x44df14(0x2a7)](_0xef72ba+_0x44df14(0x1e8));if(_0x20b3a6&&_0x20c6df)return _0x20b3a6[_0x44df14(0x2c4)]+'Â°C,\x20'+_0x20c6df['val'];}catch(_0x3e5a03){}return _0x44df14(0x1b1);}async function getCalendarContext(_0x330020){const _0x38457a=a0_0x1668e0;if(!_0x330020[_0x38457a(0x2b3)]['useCalendar']||!_0x330020[_0x38457a(0x2b3)][_0x38457a(0x2ee)])return'Kalender\x20deaktiviert.';return _0x38457a(0x301);}async function getCalendarNames(_0xf53ebf,_0x335f6b){return[];}async function saveFeedback(_0x39ad40,_0x2f0a82){const _0x53bc3d=a0_0x1668e0;_0x39ad40[_0x53bc3d(0x1dd)][_0x53bc3d(0x27f)](_0x53bc3d(0x261)+_0x2f0a82[_0x53bc3d(0x2be)]);}async function runGeminiAnalysis(_0x30d7c9,_0x476b3e=''){const _0x48a687=a0_0x1668e0;if(!_0x30d7c9['geminiModel'])return;if(_0x30d7c9[_0x48a687(0x1e3)][_0x48a687(0x2f2)]===0x0)return;const _0x305ebf=_0x30d7c9[_0x48a687(0x1e3)][_0x48a687(0x1ad)](0x0,0xf),_0x20a9e7=await getWeatherContext(_0x30d7c9),_0x45f735=_0x30d7c9[_0x48a687(0x2fb)],_0x417e69=PERSONA_MAPPING[_0x30d7c9[_0x48a687(0x2b3)][_0x48a687(0x1c0)]||_0x48a687(0x26e)],_0x4bb986=_0x30d7c9['config']['livingContext']||_0x48a687(0x247);let _0x388c92=_0x48a687(0x1df);try{const _0x22ca64=await _0x30d7c9['getStateAsync']('system.presenceWho');if(_0x22ca64&&_0x22ca64[_0x48a687(0x2c4)])_0x388c92=_0x22ca64[_0x48a687(0x2c4)];}catch(_0x2f71ae){}let _0x25e7e0=![];try{const _0x5ac3aa=await _0x30d7c9['getStateAsync'](_0x48a687(0x270));if(_0x5ac3aa&&_0x5ac3aa[_0x48a687(0x2c4)])_0x25e7e0=!![];}catch(_0x353012){}const _0x1df140=_0x48a687(0x272)+_0x417e69+'.\x20KONTEXT:\x20'+_0x4bb986+'.\x20SYSTEM_MODE:\x20'+_0x45f735+_0x48a687(0x279)+_0x20a9e7+_0x48a687(0x1e5)+_0x388c92+_0x48a687(0x323)+JSON[_0x48a687(0x2f9)](_0x305ebf)+_0x48a687(0x240)+_0x476b3e+_0x48a687(0x275);try{const _0x9df982=await _0x30d7c9[_0x48a687(0x1a1)][_0x48a687(0x2b0)](_0x1df140),_0x423e55=JSON['parse'](_0x9df982[_0x48a687(0x259)]['text']()[_0x48a687(0x24f)](/```json|```/g,'')[_0x48a687(0x219)]());await _0x30d7c9[_0x48a687(0x1ac)](_0x48a687(0x232),{'val':JSON[_0x48a687(0x2f9)](_0x423e55),'ack':!![]});if(_0x423e55[_0x48a687(0x318)])await _0x30d7c9[_0x48a687(0x1ac)](_0x48a687(0x268),{'val':_0x423e55[_0x48a687(0x318)],'ack':!![]});const _0x51331e={'timestamp':Date[_0x48a687(0x30c)](),'id':Date['now']()[_0x48a687(0x200)](),'analysis':{'activity':{'summary':_0x423e55['summary'],'isAlert':_0x423e55[_0x48a687(0x23d)],'alertReason':_0x423e55[_0x48a687(0x214)]},'comfort':{'automationProposal':_0x423e55[_0x48a687(0x223)]}}};await updateAnalysisHistory(_0x30d7c9,_0x51331e);const _0x3bd77d=_0x423e55[_0x48a687(0x23d)]||![];_0x3bd77d!==_0x30d7c9[_0x48a687(0x221)]&&(await _0x30d7c9['setStateAsync']('analysis.isAlert',{'val':_0x3bd77d,'ack':!![]}),_0x30d7c9[_0x48a687(0x221)]=_0x3bd77d,_0x3bd77d&&(await _0x30d7c9[_0x48a687(0x1ac)]('analysis.alertReason',{'val':_0x423e55[_0x48a687(0x214)],'ack':!![]}),sendNotification(_0x30d7c9,_0x48a687(0x20b)+_0x423e55[_0x48a687(0x214)],![],_0x423e55[_0x48a687(0x2f4)])));if(_0x423e55[_0x48a687(0x223)]&&_0x423e55['automationProposal'][_0x48a687(0x269)]){await _0x30d7c9['setStateAsync']('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),await _0x30d7c9['setStateAsync'](_0x48a687(0x277),{'val':_0x423e55[_0x48a687(0x223)][_0x48a687(0x312)],'ack':!![]}),await _0x30d7c9[_0x48a687(0x1ac)](_0x48a687(0x1a9),{'val':_0x423e55[_0x48a687(0x223)]['targetId'],'ack':!![]}),await _0x30d7c9[_0x48a687(0x1ac)](_0x48a687(0x2c8),{'val':JSON['stringify'](_0x423e55[_0x48a687(0x223)][_0x48a687(0x304)]),'ack':!![]});if(_0x25e7e0)executeAutomationAction(_0x30d7c9);}}catch(_0x2e71c4){_0x30d7c9[_0x48a687(0x1dd)]['error'](_0x48a687(0x2c9)+_0x2e71c4[_0x48a687(0x253)]);}}async function startSystem(_0x5e38e7){const _0x43a1ed=a0_0x1668e0;_0x5e38e7['log'][_0x43a1ed(0x27f)](_0x43a1ed(0x26f)),await initZombies(_0x5e38e7);try{_0x5e38e7[_0x43a1ed(0x2f0)]=await checkLicense(_0x5e38e7[_0x43a1ed(0x2b3)]['licenseKey']);}catch(_0x58b6b3){}if(!_0x5e38e7[_0x43a1ed(0x2b3)][_0x43a1ed(0x1ee)]||_0x5e38e7[_0x43a1ed(0x2b3)]['inactivityThresholdHours']<0.1)_0x5e38e7['config'][_0x43a1ed(0x1ee)]=0xc;await initHistory(_0x5e38e7),await initSystemConfig(_0x5e38e7);if(_0x5e38e7['config']['geminiApiKey'])try{_0x5e38e7[_0x43a1ed(0x241)]=new GoogleGenerativeAI(_0x5e38e7[_0x43a1ed(0x2b3)]['geminiApiKey']),_0x5e38e7[_0x43a1ed(0x1a1)]=_0x5e38e7[_0x43a1ed(0x241)][_0x43a1ed(0x196)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x43a1ed(0x195)}}),_0x5e38e7[_0x43a1ed(0x1dd)]['info']('Gemini\x20AI\x20initialized.');}catch(_0x382809){_0x5e38e7[_0x43a1ed(0x1dd)][_0x43a1ed(0x308)](_0x43a1ed(0x23f)+_0x382809[_0x43a1ed(0x253)]);}await createAllObjects(_0x5e38e7),await loadSystemMode(_0x5e38e7),await loadRawEventLog(_0x5e38e7),await loadDailyDigests(_0x5e38e7),_0x5e38e7[_0x43a1ed(0x2cf)](_0x43a1ed(0x1a2)),_0x5e38e7[_0x43a1ed(0x2cf)](LTM_DP_TRIGGER_DIGEST),_0x5e38e7['subscribeStates']('system.mode'),_0x5e38e7[_0x43a1ed(0x2cf)](_0x43a1ed(0x216)),_0x5e38e7[_0x43a1ed(0x2cf)](_0x43a1ed(0x231)),_0x5e38e7[_0x43a1ed(0x2cf)](_0x43a1ed(0x270)),_0x5e38e7['subscribeStates'](_0x43a1ed(0x1d3)),_0x5e38e7['subscribeStates'](_0x43a1ed(0x1fc)),_0x5e38e7[_0x43a1ed(0x2cf)](_0x43a1ed(0x2b4)),_0x5e38e7['subscribeStates']('analysis.training.triggerComfort'),_0x5e38e7['subscribeStates'](_0x43a1ed(0x2d0)),await initSensorSubscriptions(_0x5e38e7),await initPresenceSubscriptions(_0x5e38e7),await setupTelegramListener(_0x5e38e7),setTimeout(()=>checkWifiPresence(_0x5e38e7),0x1388);if(_0x5e38e7[_0x43a1ed(0x293)])clearInterval(_0x5e38e7['analysisTimer']);const _0x1436ea=_0x5e38e7[_0x43a1ed(0x2b3)][_0x43a1ed(0x236)]||0xf;_0x1436ea>0x0&&(_0x5e38e7[_0x43a1ed(0x293)]=setInterval(()=>{runAutopilot(_0x5e38e7);},_0x1436ea*0x3c*0x3e8)),schedulers[_0x43a1ed(0x2e8)](_0x5e38e7,()=>createDailyDigest(_0x5e38e7)),schedulers[_0x43a1ed(0x2db)](_0x5e38e7),schedulers[_0x43a1ed(0x21d)](_0x5e38e7,()=>runBaselineDriftAnalysis(_0x5e38e7)),schedulers[_0x43a1ed(0x2c0)](_0x5e38e7,()=>sendMorningBriefing(_0x5e38e7)),startPythonService(_0x5e38e7),setTimeout(()=>{_0x5e38e7['pythonProcess']&&(runPythonHealthCheck(_0x5e38e7),triggerGaitAnalysis(_0x5e38e7),triggerEnergyPrediction(_0x5e38e7)),updateHealthVector(_0x5e38e7);},0x1388);}class CogniLiving extends utils[a0_0x1668e0(0x1ce)]{constructor(_0x3ffa4c){const _0x26f383=a0_0x1668e0;super({..._0x3ffa4c,'name':_0x26f383(0x210)}),this[_0x26f383(0x1e3)]=[],this[_0x26f383(0x2ac)]=[],this[_0x26f383(0x1b8)]=[],this[_0x26f383(0x260)]=[],this[_0x26f383(0x292)]={},this[_0x26f383(0x23b)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x26f383(0x1cd)]=!![],this[_0x26f383(0x1c5)]=null,this[_0x26f383(0x287)]=null,this[_0x26f383(0x28b)]=![],this[_0x26f383(0x241)]=null,this['geminiModel']=null,this['currentSystemMode']=SYSTEM_MODES[_0x26f383(0x1be)],this['isProVersion']=![],this[_0x26f383(0x221)]=![],this[_0x26f383(0x1e0)]=_0x26f383(0x2d3),this[_0x26f383(0x293)]=null,this[_0x26f383(0x1f7)]=null,this[_0x26f383(0x2d4)]=null,this['driftAnalysisTimer']=null,this['briefingJob']=null,this['pythonProcess']=null,this[_0x26f383(0x1b3)]=![],this['on']('ready',this[_0x26f383(0x286)][_0x26f383(0x27d)](this)),this['on'](_0x26f383(0x316),this[_0x26f383(0x20a)]['bind'](this)),this['on'](_0x26f383(0x2f8),this[_0x26f383(0x19f)][_0x26f383(0x27d)](this)),this['on'](_0x26f383(0x253),this[_0x26f383(0x1f0)][_0x26f383(0x27d)](this));}async[a0_0x1668e0(0x286)](){const _0x4dbf6b=a0_0x1668e0;this[_0x4dbf6b(0x1dd)][_0x4dbf6b(0x27f)]('cogni-living\x20adapter\x20starting\x20(v'+this[_0x4dbf6b(0x24b)]+_0x4dbf6b(0x1fd));if(!installer[_0x4dbf6b(0x206)](this,()=>startSystem(this)))return;}[a0_0x1668e0(0x19f)](_0x207709){const _0x101111=a0_0x1668e0;if(this[_0x101111(0x293)])clearInterval(this['analysisTimer']);if(this[_0x101111(0x1e2)])clearInterval(this[_0x101111(0x1e2)]);if(this[_0x101111(0x1f7)])this[_0x101111(0x1f7)][_0x101111(0x2f7)]();if(this[_0x101111(0x2d4)])this['modeResetJob']['cancel']();if(this[_0x101111(0x29e)])this[_0x101111(0x29e)]['cancel']();if(this['exitTimer'])clearTimeout(this[_0x101111(0x1c5)]);if(this[_0x101111(0x287)])clearTimeout(this['exitGraceTimer']);stopPythonService(this),_0x207709();}async['onStateChange'](_0x384ab9,_0x2a5942){const _0x1c2bc5=a0_0x1668e0;if(!_0x2a5942||this['dependencyInstallInProgress'])return;if(_0x384ab9[_0x1c2bc5(0x242)](_0x1c2bc5(0x190))&&_0x384ab9['endsWith'](_0x1c2bc5(0x1a7))&&_0x2a5942[_0x1c2bc5(0x2c4)]){await handleTelegramResponse(this,_0x2a5942[_0x1c2bc5(0x2c4)]);return;}if(_0x384ab9===this[_0x1c2bc5(0x1fa)]+'.'+SYSTEM_DP_MODE){if(_0x2a5942[_0x1c2bc5(0x2c4)]&&Object[_0x1c2bc5(0x1cf)](SYSTEM_MODES)[_0x1c2bc5(0x242)](_0x2a5942[_0x1c2bc5(0x2c4)])){this[_0x1c2bc5(0x2fb)]=_0x2a5942['val'];if(_0x2a5942[_0x1c2bc5(0x2c4)]===SYSTEM_MODES[_0x1c2bc5(0x23a)])await setPresence(this,![]);else await setPresence(this,!![]);}if(!_0x2a5942[_0x1c2bc5(0x235)])this[_0x1c2bc5(0x2ab)](_0x384ab9,{'val':this[_0x1c2bc5(0x2fb)],'ack':!![]});return;}if(!_0x2a5942[_0x1c2bc5(0x235)]){_0x384ab9['includes'](_0x1c2bc5(0x1a2))&&_0x2a5942['val']&&(this['setState'](_0x384ab9,{'val':![],'ack':!![]}),runGeminiAnalysis(this));if(_0x384ab9[_0x1c2bc5(0x242)](_0x1c2bc5(0x1c4))&&_0x2a5942['val']){this[_0x1c2bc5(0x2ab)](_0x384ab9,{'val':![],'ack':!![]});if(this[_0x1c2bc5(0x2f0)])createDailyDigest(this);}_0x384ab9[_0x1c2bc5(0x242)]('triggerBriefing')&&_0x2a5942[_0x1c2bc5(0x2c4)]&&(this['setState'](_0x384ab9,{'val':![],'ack':!![]}),sendMorningBriefing(this));_0x384ab9[_0x1c2bc5(0x242)](_0x1c2bc5(0x2a1))&&_0x2a5942[_0x1c2bc5(0x2c4)]&&(this[_0x1c2bc5(0x2ab)](_0x384ab9,{'val':![],'ack':!![]}),executeAutomationAction(this));if(_0x384ab9[_0x1c2bc5(0x242)](_0x1c2bc5(0x1d3))&&_0x2a5942[_0x1c2bc5(0x2c4)]){this['setState'](_0x384ab9,{'val':![],'ack':!![]});if(this[_0x1c2bc5(0x2f0)])try{const _0x617674=await this[_0x1c2bc5(0x28d)]('LTM.trainingData.sequences');if(_0x617674&&_0x617674[_0x1c2bc5(0x2c4)]){const _0x35588c=JSON[_0x1c2bc5(0x2a3)](_0x617674[_0x1c2bc5(0x2c4)]);this[_0x1c2bc5(0x1dd)][_0x1c2bc5(0x27f)](_0x1c2bc5(0x1d1)),this[_0x1c2bc5(0x1ac)](_0x1c2bc5(0x1f4),{'val':'Sec-Training\x20started...','ack':!![]}),sendToPython(this,'TRAIN_SECURITY',{'sequences':_0x35588c});}}catch(_0x1c8430){this[_0x1c2bc5(0x1dd)][_0x1c2bc5(0x308)](_0x1c2bc5(0x1ab)+_0x1c8430['message']);}}if(_0x384ab9[_0x1c2bc5(0x242)](_0x1c2bc5(0x1fc))&&_0x2a5942[_0x1c2bc5(0x2c4)]){this[_0x1c2bc5(0x2ab)](_0x384ab9,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x190eca=await this[_0x1c2bc5(0x28d)](LTM_DP_DAILY_DIGESTS);if(_0x190eca&&_0x190eca[_0x1c2bc5(0x2c4)])sendToPython(this,_0x1c2bc5(0x2b6),{'digests':JSON['parse'](_0x190eca['val'])});}catch(_0x3a7c00){}}if(_0x384ab9['includes']('analysis.training.triggerEnergy')&&_0x2a5942[_0x1c2bc5(0x2c4)]){this[_0x1c2bc5(0x2ab)](_0x384ab9,{'val':![],'ack':!![]});if(this[_0x1c2bc5(0x2f0)])try{const _0x2896be=await this[_0x1c2bc5(0x28d)]('LTM.trainingData.thermodynamics');if(_0x2896be&&_0x2896be['val'])sendToPython(this,_0x1c2bc5(0x22c),{'points':JSON['parse'](_0x2896be[_0x1c2bc5(0x2c4)])});}catch(_0x14f55a){}}if(_0x384ab9[_0x1c2bc5(0x242)](_0x1c2bc5(0x2fa))&&_0x2a5942['val']){this[_0x1c2bc5(0x2ab)](_0x384ab9,{'val':![],'ack':!![]});if(this[_0x1c2bc5(0x2f0)])try{const _0x1635f9=await this[_0x1c2bc5(0x28d)](LTM_DP_RAW_LOG);_0x1635f9&&_0x1635f9[_0x1c2bc5(0x2c4)]&&(this['log'][_0x1c2bc5(0x27f)]('ðŸ›‹ï¸\x20Triggering\x20Comfort\x20Analysis\x20(Pattern\x20Mining)...'),sendToPython(this,_0x1c2bc5(0x207),{'events':JSON['parse'](_0x1635f9[_0x1c2bc5(0x2c4)])}));}catch(_0x1ee6f0){}}if(_0x384ab9[_0x1c2bc5(0x242)](_0x1c2bc5(0x2d0))&&_0x2a5942['val']){this[_0x1c2bc5(0x2ab)](_0x384ab9,{'val':![],'ack':!![]});if(this[_0x1c2bc5(0x2f0)])try{const _0x188525=await this[_0x1c2bc5(0x28d)](_0x1c2bc5(0x1ea));if(_0x188525&&_0x188525[_0x1c2bc5(0x2c4)]){const _0x495e09=JSON[_0x1c2bc5(0x2a3)](_0x188525[_0x1c2bc5(0x2c4)]);this[_0x1c2bc5(0x1dd)][_0x1c2bc5(0x27f)]('ðŸ•¸ï¸\x20Building\x20Topology\x20Matrix...'),sendToPython(this,_0x1c2bc5(0x2b7),{'sequences':_0x495e09});}}catch(_0x3526c5){this['log']['error'](_0x1c2bc5(0x1da)+_0x3526c5['message']);}}return;}if(this['config']['presenceDevices']&&this['config'][_0x1c2bc5(0x24c)][_0x1c2bc5(0x242)](_0x384ab9)){await checkWifiPresence(this);return;}const _0xfb9d6e=(this[_0x1c2bc5(0x2b3)][_0x1c2bc5(0x22a)]||[])[_0x1c2bc5(0x1d2)](_0x33ecdf=>_0x33ecdf['id']===_0x384ab9);if(_0xfb9d6e)processSensorEvent(this,_0x384ab9,_0x2a5942,_0xfb9d6e);}async[a0_0x1668e0(0x1f0)](_0x58a2cd){const _0x1544f1=a0_0x1668e0;if(typeof _0x58a2cd===_0x1544f1(0x2eb)&&_0x58a2cd[_0x1544f1(0x253)]){if(_0x58a2cd[_0x1544f1(0x2da)]===_0x1544f1(0x324)){const _0x259f29=_0x58a2cd[_0x1544f1(0x253)][_0x1544f1(0x291)]||this[_0x1544f1(0x2b3)]['geminiApiKey'];if(!_0x259f29)return this[_0x1544f1(0x25b)](_0x58a2cd['from'],_0x58a2cd[_0x1544f1(0x2da)],{'success':![],'message':_0x1544f1(0x273)},_0x58a2cd[_0x1544f1(0x1e9)]);try{const _0x253882=new GoogleGenerativeAI(_0x259f29),_0x659efb=_0x253882[_0x1544f1(0x196)]({'model':GEMINI_MODEL}),_0xd6b3d8=await _0x659efb[_0x1544f1(0x2b0)]('Hi');this[_0x1544f1(0x25b)](_0x58a2cd['from'],_0x58a2cd[_0x1544f1(0x2da)],{'success':!![],'message':_0x1544f1(0x204)+_0xd6b3d8[_0x1544f1(0x259)]['text']()},_0x58a2cd[_0x1544f1(0x1e9)]);}catch(_0x5ab2c9){this[_0x1544f1(0x25b)](_0x58a2cd[_0x1544f1(0x1b5)],_0x58a2cd[_0x1544f1(0x2da)],{'success':![],'message':_0x1544f1(0x322)+_0x5ab2c9[_0x1544f1(0x253)]},_0x58a2cd[_0x1544f1(0x1e9)]);}}else{if(_0x58a2cd[_0x1544f1(0x2da)]===_0x1544f1(0x1f9)){const _0x414491=await getWeatherContext(this),_0x492d51=await getCalendarContext(this);this[_0x1544f1(0x25b)](_0x58a2cd['from'],_0x58a2cd[_0x1544f1(0x2da)],{'success':!![],'weather':_0x414491,'calendar':_0x492d51},_0x58a2cd['callback']);}else{if(_0x58a2cd['command']===_0x1544f1(0x230)){if(!this['isProVersion'])return this[_0x1544f1(0x25b)](_0x58a2cd['from'],_0x58a2cd['command'],{'success':![],'isPro':![]},_0x58a2cd['callback']);let _0x4557b4={'status':_0x1544f1(0x1a3)};try{const _0x3ef6ef=await this[_0x1544f1(0x28d)](LTM_DP_DRIFT_STATUS);_0x4557b4[_0x1544f1(0x1e6)]=_0x3ef6ef?_0x3ef6ef[_0x1544f1(0x2c4)]:_0x1544f1(0x1a3);}catch(_0x512985){}this['sendTo'](_0x58a2cd[_0x1544f1(0x1b5)],_0x58a2cd['command'],{'success':!![],'isPro':!![],'dailyDigests':this[_0x1544f1(0x260)],'driftAnalysis':_0x4557b4,'analysisHistory':this[_0x1544f1(0x2ac)]},_0x58a2cd[_0x1544f1(0x1e9)]);}else{if(_0x58a2cd[_0x1544f1(0x2da)]===_0x1544f1(0x1e1)){const _0x27005c=this[_0x1544f1(0x260)][_0x1544f1(0x2f2)],_0x212a4a=new Date(),_0x32f285=new Date(_0x212a4a[_0x1544f1(0x18d)](),_0x212a4a[_0x1544f1(0x248)](),_0x212a4a[_0x1544f1(0x1c2)]())[_0x1544f1(0x2a9)](),_0x548354=this[_0x1544f1(0x1b8)][_0x1544f1(0x2ec)](_0x20244e=>new Date(_0x20244e[_0x1544f1(0x192)])['getTime']()>_0x32f285)[_0x1544f1(0x2f2)],_0x9bdba4=new Array(0x18)['fill'](0x0);this[_0x1544f1(0x1b8)][_0x1544f1(0x29b)](_0x35566e=>{const _0x5e45b8=_0x1544f1,_0x705963=new Date(_0x35566e['timestamp']);if(_0x705963[_0x5e45b8(0x2a9)]()>_0x32f285)_0x9bdba4[_0x705963[_0x5e45b8(0x290)]()]++;});let _0x4f08b1={'status':_0x1544f1(0x1a3)};try{const _0x46243e=await this[_0x1544f1(0x28d)](LTM_DP_DRIFT_STATUS);_0x4f08b1[_0x1544f1(0x1e6)]=_0x46243e?_0x46243e['val']:_0x1544f1(0x1a3);}catch(_0x5985ec){}let _0x5dd273='';try{const _0x36aa85=await this[_0x1544f1(0x28d)](_0x1544f1(0x317));_0x5dd273=_0x36aa85?_0x36aa85['val']:'';}catch(_0x25a981){}let _0x57311c=null;!this[_0x1544f1(0x1a1)]&&(_0x57311c=this['config']['geminiApiKey']?_0x1544f1(0x239):'Kein\x20API\x20Key!');let _0x2bf8a9={'detected':![],'description':'','targetId':'','targetValue':'','autoApply':![]};try{const _0x2d7004=await this[_0x1544f1(0x28d)]('analysis.automation.patternDetected');if(_0x2d7004&&_0x2d7004[_0x1544f1(0x2c4)]){_0x2bf8a9[_0x1544f1(0x269)]=!![];const _0x1c6c7a=await this[_0x1544f1(0x28d)]('analysis.automation.description');_0x2bf8a9[_0x1544f1(0x312)]=_0x1c6c7a?_0x1c6c7a[_0x1544f1(0x2c4)]:'';const _0x508c22=await this[_0x1544f1(0x28d)](_0x1544f1(0x1a9));_0x2bf8a9['targetId']=_0x508c22?_0x508c22[_0x1544f1(0x2c4)]:'';const _0x4e1ad9=await this[_0x1544f1(0x28d)](_0x1544f1(0x2c8));_0x2bf8a9['targetValue']=_0x4e1ad9?_0x4e1ad9['val']:'';}const _0x121039=await this[_0x1544f1(0x28d)](_0x1544f1(0x270));_0x2bf8a9[_0x1544f1(0x1c8)]=_0x121039?!!_0x121039['val']:![];}catch(_0x3e93fa){}this[_0x1544f1(0x25b)](_0x58a2cd[_0x1544f1(0x1b5)],_0x58a2cd['command'],{'success':!![],'eventHistory':this[_0x1544f1(0x1e3)][_0x1544f1(0x1ad)](0x0,0xf),'stats':{'digestCount':_0x27005c,'eventCountToday':_0x548354,'hourlyActivity':_0x9bdba4,'driftStatus':_0x4f08b1[_0x1544f1(0x1e6)],'isPresent':this[_0x1544f1(0x1cd)],'presenceWho':_0x5dd273,'minDays':this[_0x1544f1(0x2b3)][_0x1544f1(0x2ed)]||0x7,'stbDays':this[_0x1544f1(0x2b3)]['ltmStbWindowDays']||0xe,'ltbDays':this['config'][_0x1544f1(0x2d2)]||0x3c,'systemError':_0x57311c},'automation':_0x2bf8a9},_0x58a2cd['callback']);}else{if(_0x58a2cd[_0x1544f1(0x2da)]===_0x1544f1(0x27a))try{const _0x54f5ba=await scanner[_0x1544f1(0x1a8)](this,_0x58a2cd[_0x1544f1(0x253)]||{});this[_0x1544f1(0x25b)](_0x58a2cd[_0x1544f1(0x1b5)],_0x58a2cd[_0x1544f1(0x2da)],{'success':!![],'devices':_0x54f5ba},_0x58a2cd[_0x1544f1(0x1e9)]);}catch(_0x30f7cf){this[_0x1544f1(0x25b)](_0x58a2cd[_0x1544f1(0x1b5)],_0x58a2cd[_0x1544f1(0x2da)],{'success':![],'error':_0x30f7cf['message']},_0x58a2cd[_0x1544f1(0x1e9)]);}else{if(_0x58a2cd[_0x1544f1(0x2da)]===_0x1544f1(0x1c3)){const _0x18d311=await this['getForeignObjectsAsync'](_0x1544f1(0x2d6),'enum'),_0x43acac=[];if(_0x18d311)for(const _0x5ba566 in _0x18d311){const _0x475043=_0x18d311[_0x5ba566],_0x57554b=(_0x475043[_0x1544f1(0x307)]&&typeof _0x475043['common'][_0x1544f1(0x2e1)]===_0x1544f1(0x2eb)?_0x475043[_0x1544f1(0x307)][_0x1544f1(0x2e1)]['de']:_0x475043[_0x1544f1(0x307)]['name'])||_0x475043[_0x1544f1(0x307)][_0x1544f1(0x2e1)];_0x43acac[_0x1544f1(0x18f)]({'id':_0x5ba566,'name':_0x57554b});}const _0x1e2d86=await this[_0x1544f1(0x1a5)](_0x1544f1(0x198),_0x1544f1(0x29d)),_0x4e9ea6=[];if(_0x1e2d86)for(const _0xc7ae92 in _0x1e2d86){const _0x3f387d=_0x1e2d86[_0xc7ae92],_0x33e41a=(_0x3f387d[_0x1544f1(0x307)]&&typeof _0x3f387d['common']['name']===_0x1544f1(0x2eb)?_0x3f387d[_0x1544f1(0x307)]['name']['de']:_0x3f387d['common']['name'])||_0xc7ae92['split']('.')['pop']();_0x4e9ea6[_0x1544f1(0x18f)](_0x33e41a);}this[_0x1544f1(0x25b)](_0x58a2cd[_0x1544f1(0x1b5)],_0x58a2cd[_0x1544f1(0x2da)],{'success':!![],'enums':_0x43acac,'rooms':_0x4e9ea6},_0x58a2cd['callback']);}else{if(_0x58a2cd[_0x1544f1(0x2da)]==='getCalendarNames'){const _0x18ca78=_0x58a2cd['message'][_0x1544f1(0x1ec)];if(!_0x18ca78)return this[_0x1544f1(0x25b)](_0x58a2cd[_0x1544f1(0x1b5)],_0x58a2cd[_0x1544f1(0x2da)],{'success':![],'error':'No\x20instance'},_0x58a2cd[_0x1544f1(0x1e9)]);const _0x57fe11=await getCalendarNames(this,_0x18ca78);this[_0x1544f1(0x25b)](_0x58a2cd[_0x1544f1(0x1b5)],_0x58a2cd[_0x1544f1(0x2da)],{'success':!![],'names':_0x57fe11},_0x58a2cd[_0x1544f1(0x1e9)]);}else{if(_0x58a2cd[_0x1544f1(0x2da)]==='simulateButler'){const {targetId:_0x2413ab,targetValue:_0x3fe8aa}=_0x58a2cd[_0x1544f1(0x253)];this['log'][_0x1544f1(0x27f)](_0x1544f1(0x278)+_0x2413ab+_0x1544f1(0x2f1)+_0x3fe8aa),await this['setStateAsync'](_0x1544f1(0x2c1),{'val':!![],'ack':!![]}),await this[_0x1544f1(0x1ac)](_0x1544f1(0x277),{'val':_0x1544f1(0x2b1)+_0x2413ab,'ack':!![]}),await this['setStateAsync']('analysis.automation.targetId',{'val':_0x2413ab,'ack':!![]}),await this[_0x1544f1(0x1ac)](_0x1544f1(0x2c8),{'val':_0x3fe8aa,'ack':!![]}),this['sendTo'](_0x58a2cd[_0x1544f1(0x1b5)],_0x58a2cd[_0x1544f1(0x2da)],{'success':!![]},_0x58a2cd[_0x1544f1(0x1e9)]);}else{if(_0x58a2cd[_0x1544f1(0x2da)]===_0x1544f1(0x2ba)){const {historyId:_0x5a9a9c,rating:_0x3af184,comment:_0x57a98d,alertReason:_0x1320d4}=_0x58a2cd[_0x1544f1(0x253)];_0x5a9a9c&&_0x3af184?(await saveFeedback(this,{'timestamp':Date[_0x1544f1(0x30c)](),'historyId':_0x5a9a9c,'rating':_0x3af184,'comment':_0x57a98d,'alertReason':_0x1320d4}),this['sendTo'](_0x58a2cd[_0x1544f1(0x1b5)],_0x58a2cd[_0x1544f1(0x2da)],{'success':!![]},_0x58a2cd['callback'])):this[_0x1544f1(0x25b)](_0x58a2cd[_0x1544f1(0x1b5)],_0x58a2cd[_0x1544f1(0x2da)],{'success':![],'error':'Missing\x20data'},_0x58a2cd['callback']);}else _0x58a2cd[_0x1544f1(0x2da)]==='dismissAutomation'&&(this[_0x1544f1(0x1dd)][_0x1544f1(0x27f)]('User\x20dismissed\x20automation\x20proposal.'),await this[_0x1544f1(0x1ac)](_0x1544f1(0x2c1),{'val':![],'ack':!![]}),await this['setStateAsync'](_0x1544f1(0x277),{'val':'','ack':!![]}),this[_0x1544f1(0x25b)](_0x58a2cd[_0x1544f1(0x1b5)],_0x58a2cd['command'],{'success':!![]},_0x58a2cd[_0x1544f1(0x1e9)]));}}}}}}}}}}}if(require['main']!==module)module[a0_0x1668e0(0x23c)]=_0x11f730=>new CogniLiving(_0x11f730);else new CogniLiving();