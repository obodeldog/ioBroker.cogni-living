const a0_0x1f13fe=a0_0x3757;(function(_0x36ab7a,_0x459de6){const _0x1da601=a0_0x3757,_0x45f5a4=_0x36ab7a();while(!![]){try{const _0x22ed18=parseInt(_0x1da601(0x203))/0x1+-parseInt(_0x1da601(0x204))/0x2+parseInt(_0x1da601(0x1c0))/0x3+parseInt(_0x1da601(0x18e))/0x4*(-parseInt(_0x1da601(0x1be))/0x5)+parseInt(_0x1da601(0x19c))/0x6*(-parseInt(_0x1da601(0x1ff))/0x7)+parseInt(_0x1da601(0x22b))/0x8*(parseInt(_0x1da601(0x218))/0x9)+parseInt(_0x1da601(0x1ba))/0xa*(-parseInt(_0x1da601(0x298))/0xb);if(_0x22ed18===_0x459de6)break;else _0x45f5a4['push'](_0x45f5a4['shift']());}catch(_0x26b861){_0x45f5a4['push'](_0x45f5a4['shift']());}}}(a0_0x5794,0x8e1a5));const a0_0xc6cb6=(function(){let _0x2235e1=!![];return function(_0x21c6b5,_0x5c7729){const _0x277cbe=_0x2235e1?function(){const _0x47087b=a0_0x3757;if(_0x5c7729){const _0x1ff787=_0x5c7729[_0x47087b(0x1a6)](_0x21c6b5,arguments);return _0x5c7729=null,_0x1ff787;}}:function(){};return _0x2235e1=![],_0x277cbe;};}()),a0_0x50051a=a0_0xc6cb6(this,function(){const _0x3054ff=a0_0x3757;return a0_0x50051a[_0x3054ff(0x25f)]()[_0x3054ff(0x293)]('(((.+)+)+)+$')[_0x3054ff(0x25f)]()[_0x3054ff(0x1c6)](a0_0x50051a)['search'](_0x3054ff(0x19f));});function a0_0x3757(_0x3cf368,_0x4287dd){const _0x1f6795=a0_0x5794();return a0_0x3757=function(_0x50051a,_0xc6cb6){_0x50051a=_0x50051a-0x18e;let _0x5794d5=_0x1f6795[_0x50051a];return _0x5794d5;},a0_0x3757(_0x3cf368,_0x4287dd);}a0_0x50051a();'use strict';const utils=require(a0_0x1f13fe(0x26a)),{GoogleGenerativeAI}=require(a0_0x1f13fe(0x223)),path=require(a0_0x1f13fe(0x25e)),installer=require(a0_0x1f13fe(0x207)),scanner=require(a0_0x1f13fe(0x29c)),schedulers=require(a0_0x1f13fe(0x1ca)),topology=require('./lib/topology'),setup=require(a0_0x1f13fe(0x192)),recorder=require(a0_0x1f13fe(0x1e7)),pythonBridge=require('./lib/python_bridge'),aiAgent=require(a0_0x1f13fe(0x20a)),deadMan=require('./lib/dead_man'),automation=require('./lib/automation'),GEMINI_MODEL=a0_0x1f13fe(0x1c5),ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};function a0_0x5794(){const _0x63916a=['analysis.training.status','Room\x20Dwell\x20Time\x20Stats\x20(Today/Yesterday)','open','number','NORMAL','2190128JVRkSJ','roomIntegratorTimer','ready','SET_TOPOLOGY','infrasoundEnabled','analysis.energy.rlPenalties','message','comfort','initHistory','analysis.topology.structure','location','Active\x20Calendar\x20Enforcements\x20(Locks)','main','forEach','analysis.automation.autoApply','analysis.training.triggerTopology','checkThermostats','toLowerCase','getEnums','protectAiMemory','analysis.security.infrasoundLog','cleanupGhostInterventions','toLocaleDateString','licenseKey','Sec-Training\x20started...','analysis.triggerBriefing','date','subscribeStates','command','scanDevices','now','[Integrator]\x20Error:\x20','activeModules','name','onMessage','updateHealthVector','analysis.automation.patternDetected','scanForDevices','{\x22today\x22:{},\x20\x22yesterday\x22:{},\x20\x22date\x22:\x22\x22}','TRAIN_ENERGY','runGeminiAnalysis','isGracePeriodActive','Warm-Up\x20Target\x20Temps\x20(JSON)','genAI','triggerGaitAnalysis','analysis.visualization.pulse','analysis.training.triggerSecurity','text','analysis.health.activityTrend','analysisInterval','SYSTEM_MODES','path','toString','communicate.request','send','Guest\x20Mode','enum.functions.*','lastTrackerEventTime','setStateAsync','setupModeResetScheduler','setState','join','parse','@iobroker/adapter-core','motion','sensorLastValues','push','values','PINN\x20AI\x20Forecast','analysis.health.todayVector','Daily\x20Activity\x20Vector\x20(24h)','callback','TRACK_EVENT','isProVersion','bind','TRAIN_TOPOLOGY','analysisHistory','system.mode','true','isSolar','security','initZombies','ack','getOverviewData','analysis.automation.triggerAction','createDailyDigest','loadSystemMode','analysisTimer','exports','energy','executeAutomationAction','config','string','healthTrendInterval','analysis.training.triggerComfort','LTM.baselineStatus','Gemini\x20Init\x20Error:\x20','checkWifiPresence','Unknown','moduleComfort','guest','LTM.trainingData.sequences','.venv','triggerBriefing','search','analysis.energy.warmupTimes','triggerInfrasoundCorrelation','Gait\x20Speed\x20Calculation\x20Proof','ðŸ§ \x20Memory:\x20Cache\x20hydrated.','11faELds','fill','party','Forensic\x20Infrasound\x20Log','./lib/scanner','setupBriefingScheduler','ðŸ§©\x20Active\x20Modules:\x20','26948qGTFuz','rawEventLog','val','bin','./lib/setup','today','cogni-living','application/json','startService','analysis.health.gaitSensors','getForeignObjectsAsync','{\x22default\x22:\x2021}','SET_LEARNING_MODE','presenceDevices','160764hLxPRe','runPythonHealthCheck','Live\x20Event\x20Pulse','(((.+)+)+)+$','exitTimer','sources','yesterday','Reinforcement\x20Learning\x20Penalties','Sensors\x20used\x20for\x20Gait\x20Analysis','warn','apply','geminiApiKey','memoryCache','log','analysis.energy.mpcActive','value','stringify','driftAnalysisTimer','Init...','checkSolarCondition','LTM.rawEventLog','includes','modeResetJob','geminiModel','state','checkLicense','analyzeWindowOpening','setObjectNotExistsAsync','analysis.training.triggerEnergy','infrasoundLocked','4400870OKcnUM','simulateEnergyMPC','LTM.triggerDailyDigest','ltmJob','5vZMvFI','appendToLog','1409757FHAmvh','python','dailyDigests','triggerEnergyPrediction','analysis.automation.description','models/gemini-flash-latest','constructor','trackerHeartbeat','infrasoundSensorId','processSensorEvent','./lib/scheduler','systemConfig','modules','find','moduleEnergy','\x20Tage)','TRAIN_SECURITY','setupDriftAnalysisScheduler','analysis.energy.ventilationAlerts','monitorEnforcements','analysis.prediction.trackerConfidence','bootTime','subscribeForeignStatesAsync','checkCalendarTriggers','enum','window','onReady','cogni-living\x20adapter\x20starting\x20(v','error','TRAIN_COMFORT','json','analysis.trigger','triggerDailyDigest','times','enum.rooms.*',')\x20-\x20Phase\x20E\x20(Hybrid\x20Integrator)','eventHistory','analysis.activity.roomStats','getHours','./lib/recorder','handleInfrasound','manual','cancel','sendTo','dependencyInstallInProgress','General\x20Activity\x20Trend\x20(%)','briefingJob','analysis.energy.warmupSources','testApiKey','setPresence','VACATION','startSystem','unload','length','temperature','getGenerativeModel','analysis.energy.pinnForecast','LTM.dailyDigests','endsWith','updateTopology','analysis.security.learningStatus','Active\x20Ventilation\x20Alerts','door','49ltNeHU','isPresent','namespace','SYSTEM_DP_MODE','190156yoOMkX','529876yopZtR','minDaysForBaseline','inactivityThresholdHours','./lib/installer','runAutopilot','pulse','./lib/ai_agent','system.presenceWho','getStateAsync','LTM.trainingData.thermodynamics','health','type','ANALYZE_HEALTH','devices','onUnload','onStateChange','from','notifyTelegramInstance','lastAlertState','stopService','27BAkKGh','some','automation.triggerAction','info','currentSystemMode','integrateRoomTime','stateChange','sendMorningBriefing','common','analysis.training.triggerHealth','runBaselineDriftAnalysis','@google/generative-ai','sendNotification','timestamp'];a0_0x5794=function(){return _0x63916a;};return a0_0x5794();}class CogniLiving extends utils['Adapter']{constructor(_0x3eb53e){const _0xd5926c=a0_0x1f13fe;super({..._0x3eb53e,'name':_0xd5926c(0x194)}),this[_0xd5926c(0x1e4)]=[],this[_0xd5926c(0x277)]=[],this['rawEventLog']=[],this[_0xd5926c(0x1c2)]=[],this[_0xd5926c(0x26c)]={},this[_0xd5926c(0x1cb)]={'latitude':0x0,'longitude':0x0,'city':''},this['isPresent']=!![],this[_0xd5926c(0x1a0)]=null,this['exitGraceTimer']=null,this[_0xd5926c(0x254)]=![],this[_0xd5926c(0x256)]=null,this['geminiModel']=null,this['currentSystemMode']=setup[_0xd5926c(0x25d)]['NORMAL'],this['isProVersion']=![],this[_0xd5926c(0x216)]=![],this[_0xd5926c(0x282)]=null,this[_0xd5926c(0x1bd)]=null,this[_0xd5926c(0x1b2)]=null,this[_0xd5926c(0x1ad)]=null,this[_0xd5926c(0x1ee)]=null,this['trackerHeartbeat']=null,this[_0xd5926c(0x288)]=null,this[_0xd5926c(0x22c)]=null,this[_0xd5926c(0x1ec)]=![],this[_0xd5926c(0x264)]=Date[_0xd5926c(0x249)](),this[_0xd5926c(0x1a8)]=null,this['bootTime']=Date[_0xd5926c(0x249)](),this[_0xd5926c(0x1b9)]=![],this['pressureBuffer']=[],this[_0xd5926c(0x24b)]={'health':!![],'security':!![],'energy':!![],'comfort':!![]},this['on'](_0xd5926c(0x22d),this['onReady'][_0xd5926c(0x275)](this)),this['on'](_0xd5926c(0x21e),this[_0xd5926c(0x213)][_0xd5926c(0x275)](this)),this['on'](_0xd5926c(0x1f4),this[_0xd5926c(0x212)][_0xd5926c(0x275)](this)),this['on'](_0xd5926c(0x231),this[_0xd5926c(0x24d)][_0xd5926c(0x275)](this));}async[a0_0x1f13fe(0x1da)](){const _0x5e6298=a0_0x1f13fe;this['log'][_0x5e6298(0x21b)](_0x5e6298(0x1db)+this['version']+_0x5e6298(0x1e3));if(this['config']['moduleHealth']!==undefined)this['activeModules'][_0x5e6298(0x20e)]=this[_0x5e6298(0x286)]['moduleHealth'];if(this[_0x5e6298(0x286)]['moduleSecurity']!==undefined)this['activeModules']['security']=this['config']['moduleSecurity'];if(this[_0x5e6298(0x286)][_0x5e6298(0x1ce)]!==undefined)this['activeModules'][_0x5e6298(0x284)]=this['config'][_0x5e6298(0x1ce)];if(this[_0x5e6298(0x286)][_0x5e6298(0x28e)]!==undefined)this[_0x5e6298(0x24b)][_0x5e6298(0x232)]=this[_0x5e6298(0x286)][_0x5e6298(0x28e)];if(this[_0x5e6298(0x286)]['modules'])this[_0x5e6298(0x24b)]={...this['activeModules'],...this[_0x5e6298(0x286)][_0x5e6298(0x1cc)]};this['log'][_0x5e6298(0x21b)](_0x5e6298(0x29e)+(Object['keys'](this['activeModules'])['filter'](_0x198c48=>this[_0x5e6298(0x24b)][_0x198c48])[_0x5e6298(0x268)](',\x20')||'NONE')),this[_0x5e6298(0x1f3)]();}async[a0_0x1f13fe(0x1f3)](){const _0x554068=a0_0x1f13fe;await setup[_0x554068(0x27c)](this);try{this[_0x554068(0x274)]=await setup[_0x554068(0x1b5)](this[_0x554068(0x286)][_0x554068(0x242)]);}catch(_0x2e66d0){}if(!this[_0x554068(0x286)][_0x554068(0x206)]||this[_0x554068(0x286)][_0x554068(0x206)]<0.1)this[_0x554068(0x286)][_0x554068(0x206)]=0xc;await setup[_0x554068(0x233)](this),await setup['initSystemConfig'](this);try{const _0x2b35c4=await this[_0x554068(0x20c)](_0x554068(0x294)),_0x3a36cd=await this[_0x554068(0x20c)](_0x554068(0x1ef));_0x2b35c4&&_0x2b35c4[_0x554068(0x190)]&&_0x3a36cd&&_0x3a36cd['val']&&(Date[_0x554068(0x249)]()-_0x2b35c4['ts']<0x4*0xe10*0x3e8&&(this[_0x554068(0x1a8)]={'times':JSON[_0x554068(0x269)](_0x2b35c4[_0x554068(0x190)]),'sources':JSON[_0x554068(0x269)](_0x3a36cd[_0x554068(0x190)])},this[_0x554068(0x1a9)][_0x554068(0x21b)](_0x554068(0x297))));}catch(_0x4c2c27){}if(this[_0x554068(0x286)][_0x554068(0x1a7)])try{this['genAI']=new GoogleGenerativeAI(this[_0x554068(0x286)][_0x554068(0x1a7)]),this[_0x554068(0x1b3)]=this[_0x554068(0x256)][_0x554068(0x1f7)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x554068(0x195)}});}catch(_0x3f8437){this['log'][_0x554068(0x1dc)](_0x554068(0x28b)+_0x3f8437['message']);}await setup['createAllObjects'](this),await this[_0x554068(0x281)](),await this[_0x554068(0x1b7)](_0x554068(0x258),{'type':'state','common':{'name':_0x554068(0x19e),'type':_0x554068(0x229),'role':_0x554068(0x1ab),'read':!![],'write':![]},'native':{}}),await this[_0x554068(0x1b7)]('analysis.activity.roomStats',{'type':_0x554068(0x1b4),'common':{'name':_0x554068(0x227),'type':_0x554068(0x287),'role':_0x554068(0x1de),'read':!![],'write':![],'def':_0x554068(0x251)},'native':{}}),await this['setObjectNotExistsAsync'](_0x554068(0x270),{'type':'state','common':{'name':_0x554068(0x271),'type':_0x554068(0x287),'role':_0x554068(0x1de),'read':!![],'write':![],'def':'[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]'},'native':{}}),await this['setObjectNotExistsAsync'](_0x554068(0x1f8),{'type':'state','common':{'name':_0x554068(0x26f),'type':_0x554068(0x287),'role':_0x554068(0x1de),'read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x554068(0x1d2),{'type':_0x554068(0x1b4),'common':{'name':_0x554068(0x1fd),'type':'string','role':_0x554068(0x1de),'read':!![],'write':![]},'native':{}}),await this[_0x554068(0x1b7)](_0x554068(0x294),{'type':_0x554068(0x1b4),'common':{'name':'Warm-Up\x20Time\x20(Minutes\x20to\x20Target)','type':_0x554068(0x287),'role':_0x554068(0x1de),'read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync']('analysis.energy.warmupTargets',{'type':_0x554068(0x1b4),'common':{'name':_0x554068(0x255),'type':_0x554068(0x287),'role':_0x554068(0x1de),'read':!![],'write':!![],'def':_0x554068(0x199)},'native':{}}),await this[_0x554068(0x1b7)](_0x554068(0x230),{'type':_0x554068(0x1b4),'common':{'name':_0x554068(0x1a3),'type':_0x554068(0x287),'role':_0x554068(0x1de),'read':!![],'write':![],'def':'{}'},'native':{}}),await this[_0x554068(0x1b7)](_0x554068(0x25b),{'type':'state','common':{'name':_0x554068(0x1ed),'type':'number','role':'value','unit':'%','read':!![],'write':![]},'native':{}}),await this[_0x554068(0x1b7)](_0x554068(0x197),{'type':_0x554068(0x1b4),'common':{'name':_0x554068(0x1a4),'type':_0x554068(0x287),'role':_0x554068(0x25a),'read':!![],'write':![]},'native':{}}),await this[_0x554068(0x1b7)]('analysis.energy.activeEnforcements',{'type':_0x554068(0x1b4),'common':{'name':_0x554068(0x236),'type':_0x554068(0x287),'role':_0x554068(0x1de),'read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x554068(0x1b7)](_0x554068(0x23f),{'type':_0x554068(0x1b4),'common':{'name':_0x554068(0x29b),'type':_0x554068(0x287),'role':_0x554068(0x1de),'read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x554068(0x1b7)]('analysis.health.gaitDebug',{'type':_0x554068(0x1b4),'common':{'name':_0x554068(0x296),'type':_0x554068(0x287),'role':_0x554068(0x25a),'read':!![],'write':![]},'native':{}});try{const _0x2d69e2=await this['getStateAsync']('LTM.rawEventLog');if(_0x2d69e2&&_0x2d69e2[_0x554068(0x190)])this['rawEventLog']=JSON['parse'](_0x2d69e2['val']);}catch(_0x4be940){this[_0x554068(0x18f)]=[];}try{const _0x37fb41=await this[_0x554068(0x20c)](_0x554068(0x1f9));if(_0x37fb41&&_0x37fb41[_0x554068(0x190)])this[_0x554068(0x1c2)]=JSON['parse'](_0x37fb41['val']);}catch(_0x111317){this['dailyDigests']=[];}const _0x591316=this['dailyDigests'][_0x554068(0x1f5)]>=(this[_0x554068(0x286)][_0x554068(0x205)]||0x7)?'Aktiv\x20('+this[_0x554068(0x1c2)][_0x554068(0x1f5)]+_0x554068(0x1cf):'Lernphase\x20('+this[_0x554068(0x1c2)]['length']+'/'+(this['config'][_0x554068(0x205)]||0x7)+')';await this[_0x554068(0x265)](_0x554068(0x28a),{'val':_0x591316,'ack':!![]}),this['subscribeStates'](_0x554068(0x1df)),this[_0x554068(0x246)](_0x554068(0x1bc)),this[_0x554068(0x246)](_0x554068(0x278)),this['subscribeStates'](_0x554068(0x244)),this[_0x554068(0x246)](_0x554068(0x27f)),this[_0x554068(0x246)](_0x554068(0x239)),this['subscribeStates']('analysis.training.triggerSecurity'),this[_0x554068(0x246)](_0x554068(0x221)),this[_0x554068(0x246)](_0x554068(0x1b8)),this[_0x554068(0x246)](_0x554068(0x289)),this[_0x554068(0x246)](_0x554068(0x23a)),this[_0x554068(0x246)](_0x554068(0x1aa)),this['subscribeStates'](_0x554068(0x1ef)),this[_0x554068(0x246)](_0x554068(0x294));this[_0x554068(0x286)][_0x554068(0x22f)]&&this['config'][_0x554068(0x1c8)]&&this['activeModules'][_0x554068(0x27b)]&&this['subscribeForeignStates'](this[_0x554068(0x286)]['infrasoundSensorId']);const _0x58b08e=this[_0x554068(0x286)][_0x554068(0x211)];if(_0x58b08e)for(const _0x5a67c4 of _0x58b08e){await this[_0x554068(0x1d6)](_0x5a67c4['id']);}const _0x4088af=this['config'][_0x554068(0x19b)];if(_0x4088af)for(const _0x28977f of _0x4088af){await this[_0x554068(0x1d6)](_0x28977f);}if(this[_0x554068(0x286)]['notifyTelegramEnabled']&&this[_0x554068(0x286)][_0x554068(0x215)])await this['subscribeForeignStatesAsync'](this[_0x554068(0x286)][_0x554068(0x215)]+'.communicate.request');setTimeout(()=>this[_0x554068(0x28c)](),0x1388);if(this[_0x554068(0x282)])clearInterval(this[_0x554068(0x282)]);const _0xab179d=this['config'][_0x554068(0x25c)]||0xf;_0xab179d>0x0&&(this['analysisTimer']=setInterval(()=>{const _0x1ec52a=_0x554068;this[_0x1ec52a(0x208)]();if(this['activeModules'][_0x1ec52a(0x284)])automation[_0x1ec52a(0x1d3)](this);},_0xab179d*0x3c*0x3e8));setTimeout(()=>{const _0xcfa3c7=_0x554068;this[_0xcfa3c7(0x24b)][_0xcfa3c7(0x284)]&&(automation[_0xcfa3c7(0x1d7)](this),automation[_0xcfa3c7(0x1d3)](this));},0x2710);this['config']['trackerEnabled']!==![]&&this['activeModules']['security']&&(this['trackerHeartbeat']=setInterval(()=>{const _0x1491ce=_0x554068;if(this[_0x1491ce(0x274)]){const _0x5fe6fb=Date[_0x1491ce(0x249)](),_0x5ca376=this[_0x1491ce(0x264)]||_0x5fe6fb,_0x475a71=(_0x5fe6fb-_0x5ca376)/0x3e8;_0x475a71>0x2&&(this[_0x1491ce(0x264)]=_0x5fe6fb,pythonBridge[_0x1491ce(0x261)](this,_0x1491ce(0x273),{'room':null,'dt':_0x475a71}));}},0xbb8));if(this['roomIntegratorTimer'])clearInterval(this['roomIntegratorTimer']);this[_0x554068(0x21d)](),this[_0x554068(0x22c)]=setInterval(async()=>{const _0xa578c4=_0x554068;await this[_0xa578c4(0x21d)]();},0x3c*0x3e8);if(this[_0x554068(0x288)])clearInterval(this[_0x554068(0x288)]);this[_0x554068(0x288)]=setInterval(()=>{const _0x4191fb=_0x554068;this[_0x4191fb(0x274)]&&this[_0x4191fb(0x24b)]['health']&&this[_0x4191fb(0x19d)]();},0x4*0x3c*0x3c*0x3e8),schedulers['setupLtmScheduler'](this,()=>aiAgent[_0x554068(0x280)](this,pythonBridge)),schedulers[_0x554068(0x266)](this),schedulers[_0x554068(0x1d1)](this,()=>aiAgent[_0x554068(0x222)](this));if(this[_0x554068(0x24b)][_0x554068(0x20e)])schedulers[_0x554068(0x29d)](this,()=>aiAgent[_0x554068(0x21f)](this));const _0x21a971=path['join'](__dirname,_0x554068(0x291),_0x554068(0x191),_0x554068(0x1c1));pythonBridge[_0x554068(0x196)](this,_0x21a971),setTimeout(async()=>{const _0xb5e0fc=_0x554068;await topology[_0xb5e0fc(0x1fb)](this);try{const _0x1d44c9=await this[_0xb5e0fc(0x20c)](_0xb5e0fc(0x234));if(_0x1d44c9&&_0x1d44c9[_0xb5e0fc(0x190)])pythonBridge[_0xb5e0fc(0x261)](this,_0xb5e0fc(0x22e),JSON[_0xb5e0fc(0x269)](_0x1d44c9[_0xb5e0fc(0x190)]));}catch(_0x36178b){}this[_0xb5e0fc(0x24b)]['health']&&(this['runPythonHealthCheck'](),this[_0xb5e0fc(0x257)](),this[_0xb5e0fc(0x24e)]()),this[_0xb5e0fc(0x24b)][_0xb5e0fc(0x284)]&&this[_0xb5e0fc(0x1c3)]();},0x1388);}[a0_0x1f13fe(0x212)](_0x5864c1){const _0x3a01b3=a0_0x1f13fe;if(this[_0x3a01b3(0x282)])clearInterval(this['analysisTimer']);if(this[_0x3a01b3(0x1ad)])clearInterval(this[_0x3a01b3(0x1ad)]);if(this[_0x3a01b3(0x1c7)])clearInterval(this[_0x3a01b3(0x1c7)]);if(this[_0x3a01b3(0x288)])clearInterval(this[_0x3a01b3(0x288)]);if(this[_0x3a01b3(0x22c)])clearInterval(this['roomIntegratorTimer']);if(this[_0x3a01b3(0x1bd)])this[_0x3a01b3(0x1bd)][_0x3a01b3(0x1ea)]();if(this[_0x3a01b3(0x1b2)])this[_0x3a01b3(0x1b2)][_0x3a01b3(0x1ea)]();if(this['briefingJob'])this[_0x3a01b3(0x1ee)][_0x3a01b3(0x1ea)]();recorder['abortExitTimer'](this),pythonBridge[_0x3a01b3(0x217)](this),_0x5864c1();}async[a0_0x1f13fe(0x21d)](){const _0x1ae929=a0_0x1f13fe;if(!this['isPresent'])return;try{let _0x4945dc=null;try{const _0x2146fb=await this[_0x1ae929(0x20c)]('analysis.prediction.trackerTopRoom'),_0x2e174a=await this[_0x1ae929(0x20c)](_0x1ae929(0x1d4));_0x2146fb&&_0x2146fb[_0x1ae929(0x190)]&&_0x2e174a&&_0x2e174a[_0x1ae929(0x190)]&&_0x2e174a['val']>0.3&&(_0x2146fb[_0x1ae929(0x190)]!==_0x1ae929(0x28d)&&_0x2146fb['val']!==_0x1ae929(0x1ae)&&(_0x4945dc=_0x2146fb[_0x1ae929(0x190)]));}catch(_0x3ce972){}if(!_0x4945dc){const _0x52576c=this['config'][_0x1ae929(0x211)]||[];for(const _0x14c34d of _0x52576c){if(_0x14c34d[_0x1ae929(0x20f)]===_0x1ae929(0x26b)&&_0x14c34d[_0x1ae929(0x235)])try{const _0x5062f3=await this['getForeignStateAsync'](_0x14c34d['id']);if(_0x5062f3&&(_0x5062f3[_0x1ae929(0x190)]===!![]||_0x5062f3[_0x1ae929(0x190)]==='on'||_0x5062f3[_0x1ae929(0x190)]===0x1||_0x5062f3['val']===_0x1ae929(0x279))){_0x4945dc=_0x14c34d[_0x1ae929(0x235)];break;}}catch(_0xb65c17){}}}if(!_0x4945dc)return;const _0x15f385=_0x1ae929(0x1e5),_0x5694e2=await this[_0x1ae929(0x20c)](_0x15f385);let _0x1553e2={'today':{},'yesterday':{},'date':new Date()[_0x1ae929(0x241)]()};if(_0x5694e2&&_0x5694e2[_0x1ae929(0x190)])try{_0x1553e2=JSON['parse'](_0x5694e2[_0x1ae929(0x190)]);}catch(_0x1527b8){}if(!_0x1553e2[_0x1ae929(0x193)])_0x1553e2[_0x1ae929(0x193)]={};if(!_0x1553e2[_0x1ae929(0x1a2)])_0x1553e2[_0x1ae929(0x1a2)]={};const _0xc7f597=new Date()[_0x1ae929(0x241)]();_0x1553e2[_0x1ae929(0x245)]!==_0xc7f597&&(this['log'][_0x1ae929(0x21b)]('ðŸ“…\x20Midnight\x20Reset:\x20Archiving\x20Room\x20Stats.'),_0x1553e2[_0x1ae929(0x1a2)]=_0x1553e2['today']||{},_0x1553e2[_0x1ae929(0x193)]={},_0x1553e2[_0x1ae929(0x245)]=_0xc7f597);if(!_0x1553e2['today'][_0x4945dc])_0x1553e2['today'][_0x4945dc]=0x0;_0x1553e2['today'][_0x4945dc]++,await this[_0x1ae929(0x265)](_0x15f385,{'val':JSON[_0x1ae929(0x1ac)](_0x1553e2),'ack':!![]});}catch(_0x2ed6dc){this[_0x1ae929(0x1a9)][_0x1ae929(0x1a5)](_0x1ae929(0x24a)+_0x2ed6dc[_0x1ae929(0x231)]);}}[a0_0x1f13fe(0x19d)](){const _0x4c642c=a0_0x1f13fe;if(!this[_0x4c642c(0x274)])return;this['getState'](_0x4c642c(0x1f9),(_0x8b7ba5,_0x313829)=>{const _0x31eddd=_0x4c642c;if(_0x313829&&_0x313829[_0x31eddd(0x190)])try{const _0x570252=JSON[_0x31eddd(0x269)](_0x313829[_0x31eddd(0x190)]);_0x570252[_0x31eddd(0x1f5)]>0x0&&pythonBridge[_0x31eddd(0x261)](this,_0x31eddd(0x210),{'digest':_0x570252[0x0]});}catch(_0x4568c9){}});}async[a0_0x1f13fe(0x213)](_0x3fd524,_0x5ad296){const _0x53b02b=a0_0x1f13fe;if(!_0x5ad296||this[_0x53b02b(0x1ec)])return;if(_0x3fd524[_0x53b02b(0x1b1)]('telegram')&&_0x3fd524[_0x53b02b(0x1fa)](_0x53b02b(0x260))&&_0x5ad296[_0x53b02b(0x190)])return;if(this[_0x53b02b(0x286)]['infrasoundEnabled']&&_0x3fd524===this['config'][_0x53b02b(0x1c8)]&&this[_0x53b02b(0x24b)]['security']){this[_0x53b02b(0x1e8)](_0x5ad296['val']);return;}if(_0x5ad296[_0x53b02b(0x27d)]&&_0x3fd524[_0x53b02b(0x1fa)](_0x53b02b(0x209)))return;if(_0x3fd524===this[_0x53b02b(0x201)]+'.system.mode'){if(_0x5ad296[_0x53b02b(0x190)]&&Object[_0x53b02b(0x26e)](setup[_0x53b02b(0x25d)])[_0x53b02b(0x1b1)](_0x5ad296[_0x53b02b(0x190)])){this[_0x53b02b(0x21c)]=_0x5ad296[_0x53b02b(0x190)];if(_0x5ad296['val']===setup[_0x53b02b(0x25d)][_0x53b02b(0x1f2)])await recorder[_0x53b02b(0x1f1)](this,![]);else await recorder['setPresence'](this,!![]);if(this[_0x53b02b(0x274)]){let _0x3645be=![],_0x47b5ca=0x0,_0x9b5648=_0x53b02b(0x1e9);if(this[_0x53b02b(0x21c)]===_0x53b02b(0x29a))_0x3645be=!![],_0x47b5ca=0x168,_0x9b5648='Party\x20Mode';else this[_0x53b02b(0x21c)]===_0x53b02b(0x28f)&&(_0x3645be=!![],_0x47b5ca=0x5a0,_0x9b5648=_0x53b02b(0x262));pythonBridge[_0x53b02b(0x261)](this,_0x53b02b(0x19a),{'active':_0x3645be,'duration':_0x47b5ca,'label':_0x9b5648}),await this[_0x53b02b(0x265)](_0x53b02b(0x1fc),{'val':JSON['stringify']({'active':_0x3645be,'label':_0x9b5648,'timestamp':Date['now']()}),'ack':!![]});}}if(!_0x5ad296['ack'])this['setState'](_0x3fd524,{'val':this[_0x53b02b(0x21c)],'ack':!![]});return;}if(_0x3fd524['endsWith']('analysis.energy.warmupSources')&&_0x5ad296['ack'])this[_0x53b02b(0x23e)](_0x5ad296[_0x53b02b(0x190)]);if(_0x3fd524[_0x53b02b(0x1fa)](_0x53b02b(0x294))&&_0x5ad296[_0x53b02b(0x27d)]&&this[_0x53b02b(0x24b)][_0x53b02b(0x284)])automation[_0x53b02b(0x1d7)](this);if(!_0x5ad296['ack']){if(_0x3fd524[_0x53b02b(0x1b1)](_0x53b02b(0x1df))&&_0x5ad296['val']){this[_0x53b02b(0x267)](_0x3fd524,{'val':![],'ack':!![]}),aiAgent[_0x53b02b(0x253)](this);return;}if(_0x3fd524['includes'](_0x53b02b(0x1e0))&&_0x5ad296['val']){this[_0x53b02b(0x267)](_0x3fd524,{'val':![],'ack':!![]});if(this['isProVersion'])aiAgent[_0x53b02b(0x280)](this,pythonBridge);return;}if(_0x3fd524[_0x53b02b(0x1b1)](_0x53b02b(0x292))&&_0x5ad296[_0x53b02b(0x190)]){this['setState'](_0x3fd524,{'val':![],'ack':!![]}),aiAgent['sendMorningBriefing'](this);return;}if(_0x3fd524[_0x53b02b(0x1b1)](_0x53b02b(0x21a))&&_0x5ad296[_0x53b02b(0x190)]){this[_0x53b02b(0x267)](_0x3fd524,{'val':![],'ack':!![]}),aiAgent[_0x53b02b(0x285)](this);return;}if(_0x3fd524[_0x53b02b(0x1b1)](_0x53b02b(0x259))&&_0x5ad296[_0x53b02b(0x190)]){this[_0x53b02b(0x267)](_0x3fd524,{'val':![],'ack':!![]});if(this[_0x53b02b(0x274)])try{const _0x226dc1=await this[_0x53b02b(0x20c)](_0x53b02b(0x290));if(_0x226dc1&&_0x226dc1[_0x53b02b(0x190)]){const _0x55a0d6=JSON[_0x53b02b(0x269)](_0x226dc1[_0x53b02b(0x190)]);this[_0x53b02b(0x265)](_0x53b02b(0x226),{'val':_0x53b02b(0x243),'ack':!![]}),pythonBridge[_0x53b02b(0x261)](this,_0x53b02b(0x1d0),{'sequences':_0x55a0d6});}}catch(_0x49ccc9){}return;}if(_0x3fd524['includes']('analysis.training.triggerHealth')&&_0x5ad296[_0x53b02b(0x190)]){this[_0x53b02b(0x267)](_0x3fd524,{'val':![],'ack':!![]});if(this[_0x53b02b(0x274)])try{const _0x26ce5b=await this[_0x53b02b(0x20c)](_0x53b02b(0x1f9));if(_0x26ce5b&&_0x26ce5b['val'])pythonBridge[_0x53b02b(0x261)](this,'TRAIN_HEALTH',{'digests':JSON[_0x53b02b(0x269)](_0x26ce5b[_0x53b02b(0x190)])});}catch(_0x309377){}return;}if(_0x3fd524[_0x53b02b(0x1b1)]('analysis.training.triggerEnergy')&&_0x5ad296['val']){this[_0x53b02b(0x267)](_0x3fd524,{'val':![],'ack':!![]});if(this[_0x53b02b(0x274)])try{const _0x49df3d=await this['getStateAsync'](_0x53b02b(0x20d));if(_0x49df3d&&_0x49df3d[_0x53b02b(0x190)])pythonBridge[_0x53b02b(0x261)](this,_0x53b02b(0x252),{'points':JSON[_0x53b02b(0x269)](_0x49df3d[_0x53b02b(0x190)])});}catch(_0x494bfa){}return;}if(_0x3fd524['includes'](_0x53b02b(0x289))&&_0x5ad296[_0x53b02b(0x190)]){this['setState'](_0x3fd524,{'val':![],'ack':!![]});if(this[_0x53b02b(0x274)])try{const _0x557dda=await this[_0x53b02b(0x20c)](_0x53b02b(0x1b0));if(_0x557dda&&_0x557dda[_0x53b02b(0x190)]){const _0x3980c6={};if(this[_0x53b02b(0x286)][_0x53b02b(0x211)])this['config'][_0x53b02b(0x211)][_0x53b02b(0x238)](_0x5d42fb=>{const _0x11aece=_0x53b02b;if(_0x5d42fb['id']&&_0x5d42fb['type'])_0x3980c6[_0x5d42fb['id']]=_0x5d42fb[_0x11aece(0x20f)];});pythonBridge['send'](this,_0x53b02b(0x1dd),{'events':JSON[_0x53b02b(0x269)](_0x557dda[_0x53b02b(0x190)]),'deviceMap':_0x3980c6});}}catch(_0x24fe94){}return;}if(_0x3fd524[_0x53b02b(0x1b1)](_0x53b02b(0x23a))&&_0x5ad296[_0x53b02b(0x190)]){this[_0x53b02b(0x267)](_0x3fd524,{'val':![],'ack':!![]}),topology[_0x53b02b(0x1fb)](this);if(this[_0x53b02b(0x274)])try{const _0xe38023=await this['getStateAsync'](_0x53b02b(0x290));if(_0xe38023&&_0xe38023['val'])pythonBridge['send'](this,_0x53b02b(0x276),{'sequences':JSON[_0x53b02b(0x269)](_0xe38023['val'])});}catch(_0x475924){}return;}}const _0x14d65a=(this[_0x53b02b(0x286)]['devices']||[])[_0x53b02b(0x1cd)](_0x135962=>_0x135962['id']===_0x3fd524);if(_0x14d65a){const _0xd3163d=await recorder[_0x53b02b(0x1c9)](this,_0x3fd524,_0x5ad296,_0x14d65a);_0xd3163d&&this[_0x53b02b(0x267)]('analysis.visualization.pulse',{'val':Date[_0x53b02b(0x249)](),'ack':!![]});_0xd3163d&&_0xd3163d['type']===_0x53b02b(0x26b)&&_0xd3163d[_0x53b02b(0x235)]&&this[_0x53b02b(0x274)]&&deadMan['updateLocation'](this,_0xd3163d[_0x53b02b(0x235)]);_0x5ad296[_0x53b02b(0x190)]&&(_0x5ad296['val']===!![]||_0x5ad296['val']===0x1||String(_0x5ad296[_0x53b02b(0x190)])[_0x53b02b(0x23c)]()===_0x53b02b(0x228))&&(_0x14d65a[_0x53b02b(0x20f)]&&(_0x14d65a['type'][_0x53b02b(0x1b1)](_0x53b02b(0x1d9))||_0x14d65a[_0x53b02b(0x20f)]['includes'](_0x53b02b(0x1fe)))&&this[_0x53b02b(0x1b6)](_0x14d65a));if(_0x14d65a[_0x53b02b(0x20f)]===_0x53b02b(0x1f6)||_0x14d65a['type']==='thermostat'){if(this[_0x53b02b(0x24b)][_0x53b02b(0x284)])automation[_0x53b02b(0x240)](this);}}}async['protectAiMemory'](_0x487d68){const _0x7f2576=a0_0x1f13fe;if(!this[_0x7f2576(0x1a8)]||Date[_0x7f2576(0x249)]()-this[_0x7f2576(0x1d5)]>0x493e0)return;try{const _0x45b532=JSON[_0x7f2576(0x269)](_0x487d68),_0x2b6ec1=this[_0x7f2576(0x1a8)]['sources'];let _0x52863f=![];for(const _0x16edb6 in _0x2b6ec1){if(_0x2b6ec1[_0x16edb6][_0x7f2576(0x1b1)]('AI')&&_0x45b532[_0x16edb6]&&!_0x45b532[_0x16edb6]['includes']('AI')){_0x52863f=!![];break;}}_0x52863f&&(await this['setStateAsync'](_0x7f2576(0x294),{'val':JSON[_0x7f2576(0x1ac)](this[_0x7f2576(0x1a8)][_0x7f2576(0x1e1)]),'ack':!![]}),await this['setStateAsync']('analysis.energy.warmupSources',{'val':JSON[_0x7f2576(0x1ac)](this['memoryCache'][_0x7f2576(0x1a1)]),'ack':!![]}));}catch(_0x50b3cc){}}async[a0_0x1f13fe(0x24d)](_0x35e1c3){const _0x4a166f=a0_0x1f13fe;if(typeof _0x35e1c3==='object'&&_0x35e1c3[_0x4a166f(0x231)]){if(_0x35e1c3[_0x4a166f(0x247)]===_0x4a166f(0x23b))try{const _0x500e3e=await automation['scanThermostats'](this);this[_0x4a166f(0x1eb)](_0x35e1c3['from'],_0x35e1c3['command'],{'success':!![],'results':_0x500e3e},_0x35e1c3[_0x4a166f(0x272)]);}catch(_0x213c66){this[_0x4a166f(0x1eb)](_0x35e1c3[_0x4a166f(0x214)],_0x35e1c3['command'],{'success':![],'error':_0x213c66[_0x4a166f(0x231)]},_0x35e1c3[_0x4a166f(0x272)]);}else{if(_0x35e1c3[_0x4a166f(0x247)]===_0x4a166f(0x27e)){const _0x3d1c93=this[_0x4a166f(0x1c2)]['length'];let _0x1f6ee7=new Array(0x18)[_0x4a166f(0x299)](0x0);try{const _0x5f53da=await this[_0x4a166f(0x20c)](_0x4a166f(0x270));if(_0x5f53da&&_0x5f53da['val'])_0x1f6ee7=JSON['parse'](_0x5f53da[_0x4a166f(0x190)]);else{const _0x5aad6d=new Date()['setHours'](0x0,0x0,0x0,0x0);this[_0x4a166f(0x1e4)]&&this[_0x4a166f(0x1e4)][_0x4a166f(0x238)](_0x519ae7=>{const _0x27fa0d=_0x4a166f;if(_0x519ae7[_0x27fa0d(0x225)]>=_0x5aad6d){const _0x4c2a19=new Date(_0x519ae7['timestamp'])[_0x27fa0d(0x1e6)]();if(_0x4c2a19>=0x0&&_0x4c2a19<0x18)_0x1f6ee7[_0x4c2a19]++;}});}}catch(_0x35eebf){}let _0x210862={'today':{},'yesterday':{}};try{const _0x2183cc=await this['getStateAsync'](_0x4a166f(0x1e5));if(_0x2183cc&&_0x2183cc[_0x4a166f(0x190)])_0x210862=JSON[_0x4a166f(0x269)](_0x2183cc['val']);}catch(_0x1ed11a){}let _0x1fe27f=![],_0x19776c='',_0x6b1a27='',_0x29f734='';try{const _0x516d57=await this['getStateAsync'](_0x4a166f(0x24f));if(_0x516d57&&_0x516d57['val']){_0x1fe27f=!![];const _0x4196b7=await this[_0x4a166f(0x20c)](_0x4a166f(0x1c4));_0x19776c=_0x4196b7?_0x4196b7[_0x4a166f(0x190)]:'';const _0x574988=await this[_0x4a166f(0x20c)]('analysis.automation.targetId');_0x6b1a27=_0x574988?_0x574988['val']:'';const _0x292e8e=await this['getStateAsync']('analysis.automation.targetValue');_0x29f734=_0x292e8e?_0x292e8e['val']:'';}}catch(_0x3a3d3c){}const _0x380f3a=await this['checkSolarCondition'](),_0x381216=(this['config']['devices']||[])[_0x4a166f(0x219)](_0x5ad44a=>_0x5ad44a[_0x4a166f(0x27a)]),_0x145167=_0x380f3a&&_0x381216;let _0x274325='';try{const _0x1ce24a=await this[_0x4a166f(0x20c)](_0x4a166f(0x20b));if(_0x1ce24a&&_0x1ce24a[_0x4a166f(0x190)])_0x274325=_0x1ce24a[_0x4a166f(0x190)];}catch(_0x1c6852){}this[_0x4a166f(0x1eb)](_0x35e1c3['from'],_0x35e1c3[_0x4a166f(0x247)],{'success':!![],'eventHistory':this[_0x4a166f(0x1e4)]['slice'](0x0,0x64),'stats':{'digestCount':_0x3d1c93,'isPresent':this[_0x4a166f(0x200)],'hourlyActivity':_0x1f6ee7,'solarActive':_0x145167,'presenceWho':_0x274325,'roomStats':_0x210862,'modules':this[_0x4a166f(0x24b)]},'automation':{'detected':_0x1fe27f,'description':_0x19776c,'targetId':_0x6b1a27,'targetValue':_0x29f734}},_0x35e1c3['callback']);}else{if(_0x35e1c3['command']===_0x4a166f(0x1bb)){}else{if(_0x35e1c3[_0x4a166f(0x247)]===_0x4a166f(0x1f0)){}else{if(_0x35e1c3['command']===_0x4a166f(0x248))try{const _0x2e4ca9=await scanner[_0x4a166f(0x250)](this,_0x35e1c3[_0x4a166f(0x231)]||{});this['sendTo'](_0x35e1c3[_0x4a166f(0x214)],_0x35e1c3[_0x4a166f(0x247)],{'success':!![],'devices':_0x2e4ca9},_0x35e1c3['callback']);}catch(_0x4c8af0){}else{if(_0x35e1c3[_0x4a166f(0x247)]===_0x4a166f(0x23d)){const _0x25cbdd=await this['getForeignObjectsAsync'](_0x4a166f(0x263),_0x4a166f(0x1d8)),_0x4c58c2=[];if(_0x25cbdd)for(const _0x31ce17 in _0x25cbdd){_0x4c58c2[_0x4a166f(0x26d)]({'id':_0x31ce17,'name':_0x25cbdd[_0x31ce17][_0x4a166f(0x220)][_0x4a166f(0x24c)]});}const _0x4be27d=await this[_0x4a166f(0x198)](_0x4a166f(0x1e2),_0x4a166f(0x1d8)),_0x2f4264=[];if(_0x4be27d)for(const _0x29b573 in _0x4be27d){_0x2f4264[_0x4a166f(0x26d)](_0x4be27d[_0x29b573][_0x4a166f(0x220)]['name']||_0x29b573['split']('.')['pop']());}this[_0x4a166f(0x1eb)](_0x35e1c3['from'],_0x35e1c3[_0x4a166f(0x247)],{'success':!![],'enums':_0x4c58c2,'rooms':_0x2f4264},_0x35e1c3[_0x4a166f(0x272)]);}}}}}}}}async[a0_0x1f13fe(0x281)](){const _0x161fb2=a0_0x1f13fe;try{const _0x21024a=await this[_0x161fb2(0x20c)](setup[_0x161fb2(0x202)]);if(_0x21024a&&_0x21024a['val'])this[_0x161fb2(0x21c)]=_0x21024a[_0x161fb2(0x190)];}catch(_0x115471){this[_0x161fb2(0x21c)]=setup[_0x161fb2(0x25d)][_0x161fb2(0x22a)];}}async[a0_0x1f13fe(0x28c)](){return![];}async['runAutopilot'](){const _0x2323b5=a0_0x1f13fe;await aiAgent[_0x2323b5(0x253)](this);this[_0x2323b5(0x24b)][_0x2323b5(0x20e)]&&(this[_0x2323b5(0x24e)](),this[_0x2323b5(0x257)]());if(this[_0x2323b5(0x24b)]['energy'])this[_0x2323b5(0x1c3)]();}async[a0_0x1f13fe(0x1af)](){return![];}[a0_0x1f13fe(0x257)](){const _0x2a2d20=a0_0x1f13fe;if(!this[_0x2a2d20(0x274)])return;}async[a0_0x1f13fe(0x1c3)](){}[a0_0x1f13fe(0x24e)](){}async['handleInfrasound'](_0x2a74a6){}async[a0_0x1f13fe(0x295)](_0x34bfe1,_0x2262cc){}async[a0_0x1f13fe(0x1b6)](_0x1c137c){}async[a0_0x1f13fe(0x1bf)](_0x4ad23b){}[a0_0x1f13fe(0x224)](_0x4d1db9){}}if(require[a0_0x1f13fe(0x237)]!==module)module[a0_0x1f13fe(0x283)]=_0x593ac3=>new CogniLiving(_0x593ac3);else new CogniLiving();