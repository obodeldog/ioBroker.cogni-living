function a0_0x35b2(){const _0x34f905=['CALCULATE_HEALTH_TREND','âš \x20Replay\x20skipped:\x20No\x20events\x20in\x20memory.','cleanupGhostInterventions','automation.triggerAction','briefingJob','enum.rooms.*','./lib/automation','./lib/python_bridge','\x20events\x20from\x20today...','Warte\x20auf\x20Analyse...','location','moduleSecurity','SYSTEM_DP_MODE','find','updateTopology','length','getTime','custom','infrasoundArmingId','communicate.request','getForeignStateAsync','isGracePeriodActive','config','./lib/scheduler','\x20rooms)','haustÃ¼r','stateChange','1001835wzccMV','initSystemConfig','40TKnIVY','round','triggerBriefing','log','Party\x20Mode','@google/generative-ai','Â°C)','sources','date','ðŸ“\x20Manual\x20event\x20logged:\x20','ðŸ“¦\x20Restored\x20','minDaysForBaseline','Manual\x20Event','getStateAsync','dailyDigests','sendMorningBriefing',':\x20Temp-Differenz\x20','forEach','setStateAsync','join','trackerHeartbeat','endsWith','telegram','search','debug','pulse','namespace','onMessage','cogni-living\x20adapter\x20starting\x20(v','analysis.training.triggerComfort','Niemand','inactivityThresholdHours','existsSync','outdoorSensorId','Room\x20History\x20(24h\x20Buckets)','toString','all','currentSystemMode','analysis.activity.roomHistory','testApiKey','checkWifiPresence:\x20Error\x20checking\x20','Room\x20Dwell\x20Time\x20Stats','callback','memoryCache','text','pop','\x20Kalender-Adapter\x20gefunden.','toLocaleTimeString','system.adapter.ical.é¦™','filter','20434210SZkCVH','health','Event','stringify','subscribeStates','thermostat','isSolar','history','NORMAL','historyJob','runPythonHealthCheck','TRAIN_TOPOLOGY','updateHealthVector','\x20-\x20','string','\x20sequences',')\x20-\x20Phase\x20E\x20(Scheduler\x20Fix)','Standard','infrasoundSensorId','manual','motion','slice','security','scheduleJob','split','processSensorEvent','getObjectViewAsync','error','val','Corrupt','values','bootTime','devices','analysis.automation.targetValue','cogni-living','main','âœ…\x20History\x20saved:\x20','Gemini\x20Report\x20Night','3695105yzxeNl','Keine\x20Daten','stopService','runAutopilot','enum','analysis.training.triggerTopology','onUnload','checkWifiPresence','forecast.current.weather','fill','ðŸ\x20Triggering\x20Python\x20Health\x20Check\x20(Activity\x20Trend)...','./lib/topology','common','subscribeForeignStates','replayTodayEvents','Lernphase\x20(','LTM.trainingData.sequences','analysis.health.activityTrend','command','Live\x20Event\x20Pulse','node-schedule','energy','replace','clear','appendToLog','some','bin','modeResetJob','ack','PREDICT_ENERGY','subscribeForeignStatesAsync','\x20events\x20from\x20standard\x20storage.','General\x20Activity\x20Trend','threshold_exceeded','analysis.ventilation.lastWindow','push','createAllObjects','getGenerativeModel','59\x2023\x20*\x20*\x20*','\x20>\x20','.data.table','analysis.safety.infrasoundAlert','setHours','unload','temperature','triggerEnergyPrediction','.last_seen','testContext','Failed\x20to\x20trigger\x20Python\x20Health\x20Check','apply','models/gemini-flash-latest','LÃ¼ften\x20empfohlen','modules','setState','runGeminiAnalysis','Aktiv\x20(','timestamp','scanThermostats','./lib/ai_agent','keys','floor','genAI','initHistory','startService','min','executeAutomationAction','VACATION','analysis.automation.targetId','refreshCalendar\x20failed:\x20','sonn','sendNotification','190648EaJbFQ','isPresent','moduleEnergy','loadSystemMode','analysis.training.triggerHealth','party','ðŸ’¾\x20Saving\x20Daily\x20History\x20for\x20','Gemini\x20Report\x20Day','sendTo','analysis.security.lastScore','json','./lib/dead_man','analyzeWindowOpening\x20error:\x20','toFixed','number','then','.uptime','getDate','weatherTempId','eventHistory','checkSolarCondition','getHours','updateLocation','triggerGaitAnalysis','592431lWjHGQ','Unknown','saveDailyHistory','abortExitTimer','analysis.health.todayVector','info','geminiApiKey','ðŸš¶\x20Gait\x20Analysis\x20triggered\x20with\x20','de-DE','.json','checkThermostats','analysisHistory','6050364RYYIJz','checkCalendarTriggers','(((.+)+)+)+$','moduleHealth','online','abs','rawEventLog','window','presenceCheckTimer','toISOString','parse','analysis.training.triggerEnergy','...','protectAiMemory','DAY','./lib/scanner','isProVersion','activeModules','dependencyInstallInProgress','max','presenceDevices','exitTimer','pressureBuffer','ðŸ”Š\x20Infraschall:\x20','onReady','klar','Verbindung\x20erfolgreich:\x20','todayVector','utf8','door','state','18pQMpNw','cancel','Â°C\x20(Innen:\x20','name','\x20(Bewohner\x20anwesend\x20-\x20normal)','generateHealthReport','./lib/setup','TRAIN_SECURITY','moduleComfort','1124mxgNRm','Gute\x20LÃ¼ftungsmÃ¶glichkeit!','open','setPresence','triggerEnergyPrediction\x20Error:\x20','2-digit','ðŸ”Š\x20FORENSIC:\x20Infraschall\x20bei\x20Abwesenheit!\x20Pressure:\x20','calendarName','message','apiKey','Guest\x20Mode','geminiModel','toLocaleDateString','Â°C,\x20AuÃŸen:\x20','@iobroker/adapter-core','reduce','1026YDhRcq','add','.isOnline','Daily\x20Activity\x20Vector\x20(48x30min)','analysis.trigger','SYSTEM_MODES','Gemini\x20Init\x20Error:\x20','system','startSystem','Unbekannt','system.presenceWho','includes','driftAnalysisTimer','getAbsoluteDefaultDataDir','.venv','events.history','LTM.rawEventLog','TRAIN_HEALTH','analysisTimer','sunny','.system.mode','analysis.energy.warmupSources','Sonne:\x20','analysis.prediction.trackerConfidence','lastAlertState','mkdirSync','LTM.baselineStatus','Init...','No\x20data','instance','toLowerCase','analysis.energy.warmupTimes','infrasoundLocked','infrasoundEnabled','createDailyDigest','\x22history\x22:{}','analysis.visualization.pulse','TRAIN_COMFORT','analysis.health.geminiDay','exitGraceTimer','send','enum.functions.*','isRelevantActivity','Adapter','integrateRoomTime','type','Current.WeatherText','roomIntegratorTimer','handleInfrasound','setObjectNotExistsAsync','shift','calendarCheckTimer','value','healthTrendInterval','isArray','analysis.health.geminiNight','substring','scanDevices','triggerGaitAnalysis\x20parse\x20error:\x20','analyzeWindowOpening','LTM.triggerDailyDigest','now','systemConfig','analysis.prediction.trackerTopRoom','updateSchedulePreview','guest','system.adapter.ical.','LTM.dailyDigests','infrasoundThreshold','from','accuweather.0','response','getForeignObjectsAsync','triggerInfrasoundCorrelation','generateContent','sensorLastValues','rows','warn','python','analysis.health.todayRoomDetails','NIGHT','ðŸš¨\x20INFRASCHALL-ALARM:\x20Anomalie\x20bei\x20Abwesenheit\x20(scharf)!','object','bind','triggerDailyDigest','path'];a0_0x35b2=function(){return _0x34f905;};return a0_0x35b2();}const a0_0x51bc90=a0_0x5880;(function(_0x1a8c24,_0x318454){const _0x327c1a=a0_0x5880,_0xb463d1=_0x1a8c24();while(!![]){try{const _0x3095d6=-parseInt(_0x327c1a(0x19b))/0x1*(-parseInt(_0x327c1a(0x1ab))/0x2)+parseInt(_0x327c1a(0x192))/0x3*(-parseInt(_0x327c1a(0x14f))/0x4)+parseInt(_0x327c1a(0x108))/0x5+parseInt(_0x327c1a(0x173))/0x6+-parseInt(_0x327c1a(0x167))/0x7*(-parseInt(_0x327c1a(0xb0))/0x8)+parseInt(_0x327c1a(0xae))/0x9+-parseInt(_0x327c1a(0xe2))/0xa;if(_0x3095d6===_0x318454)break;else _0xb463d1['push'](_0xb463d1['shift']());}catch(_0x2887a3){_0xb463d1['push'](_0xb463d1['shift']());}}}(a0_0x35b2,0x812da));const a0_0x7f73f3=(function(){let _0x2f79af=!![];return function(_0x453dfb,_0x2a8adc){const _0x1ee46a=_0x2f79af?function(){const _0xb76c8c=a0_0x5880;if(_0x2a8adc){const _0x151b8f=_0x2a8adc[_0xb76c8c(0x139)](_0x453dfb,arguments);return _0x2a8adc=null,_0x151b8f;}}:function(){};return _0x2f79af=![],_0x1ee46a;};}()),a0_0x287379=a0_0x7f73f3(this,function(){const _0x353e53=a0_0x5880;return a0_0x287379[_0x353e53(0xd3)]()[_0x353e53(0xc7)](_0x353e53(0x175))[_0x353e53(0xd3)]()['constructor'](a0_0x287379)[_0x353e53(0xc7)](_0x353e53(0x175));});function a0_0x5880(_0x37d94f,_0x3d939e){const _0x4363bd=a0_0x35b2();return a0_0x5880=function(_0x287379,_0x7f73f3){_0x287379=_0x287379-0x77;let _0x35b27b=_0x4363bd[_0x287379];return _0x35b27b;},a0_0x5880(_0x37d94f,_0x3d939e);}a0_0x287379();'use strict';const utils=require(a0_0x51bc90(0x1a9)),{GoogleGenerativeAI}=require(a0_0x51bc90(0xb5)),path=require(a0_0x51bc90(0x92)),fs=require('fs'),installer=require('./lib/installer'),scanner=require(a0_0x51bc90(0x182)),schedulers=require(a0_0x51bc90(0xaa)),topology=require(a0_0x51bc90(0x113)),setup=require(a0_0x51bc90(0x198)),recorder=require('./lib/recorder'),pythonBridge=require(a0_0x51bc90(0x9a)),aiAgent=require(a0_0x51bc90(0x142)),deadMan=require(a0_0x51bc90(0x15a)),automation=require(a0_0x51bc90(0x99)),GEMINI_MODEL=a0_0x51bc90(0x13a);class CogniLiving extends utils[a0_0x51bc90(0x1d6)]{constructor(_0x5ff3cb){const _0x40f3ba=a0_0x51bc90;super({..._0x5ff3cb,'name':_0x40f3ba(0x104)}),this[_0x40f3ba(0x162)]=[],this[_0x40f3ba(0x172)]=[],this['rawEventLog']=[],this[_0x40f3ba(0xbe)]=[],this[_0x40f3ba(0x88)]={},this[_0x40f3ba(0x7b)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x40f3ba(0x150)]=!![],this[_0x40f3ba(0x188)]=null,this[_0x40f3ba(0x1d2)]=null,this[_0x40f3ba(0xa8)]=![],this[_0x40f3ba(0x145)]=null,this[_0x40f3ba(0x1a6)]=null,this[_0x40f3ba(0xd5)]=setup[_0x40f3ba(0x1b0)][_0x40f3ba(0xea)],this[_0x40f3ba(0x183)]=![],this[_0x40f3ba(0x1c3)]=![],this[_0x40f3ba(0x1bd)]=null,this['calendarCheckTimer']=null,this['presenceCheckTimer']=null,this['ltmJob']=null,this[_0x40f3ba(0x123)]=null,this[_0x40f3ba(0x1b7)]=null,this[_0x40f3ba(0x97)]=null,this['historyJob']=null,this[_0x40f3ba(0xc4)]=null,this[_0x40f3ba(0x1e0)]=null,this['roomIntegratorTimer']=null,this['dependencyInstallInProgress']=![],this['lastTrackerEventTime']=Date[_0x40f3ba(0x7a)](),this[_0x40f3ba(0xdb)]=null,this['bootTime']=Date[_0x40f3ba(0x7a)](),this['infrasoundLocked']=![],this['pressureBuffer']=[],this[_0x40f3ba(0x184)]={'health':!![],'security':!![],'energy':!![],'comfort':!![]},this['on']('ready',this[_0x40f3ba(0x18b)][_0x40f3ba(0x90)](this)),this['on'](_0x40f3ba(0xad),this['onStateChange']['bind'](this)),this['on'](_0x40f3ba(0x133),this[_0x40f3ba(0x10e)][_0x40f3ba(0x90)](this)),this['on'](_0x40f3ba(0x1a3),this['onMessage']['bind'](this));}async['onReady'](){const _0x397be4=a0_0x51bc90;this['log'][_0x397be4(0x16c)](_0x397be4(0xcc)+this['version']+_0x397be4(0xf2));if(this[_0x397be4(0xa9)][_0x397be4(0x176)]!==undefined)this['activeModules'][_0x397be4(0xe3)]=this['config'][_0x397be4(0x176)];if(this['config']['moduleSecurity']!==undefined)this[_0x397be4(0x184)][_0x397be4(0xf8)]=this[_0x397be4(0xa9)][_0x397be4(0x9e)];if(this[_0x397be4(0xa9)][_0x397be4(0x151)]!==undefined)this['activeModules'][_0x397be4(0x11d)]=this[_0x397be4(0xa9)][_0x397be4(0x151)];if(this[_0x397be4(0xa9)][_0x397be4(0x19a)]!==undefined)this[_0x397be4(0x184)]['comfort']=this[_0x397be4(0xa9)]['moduleComfort'];if(this['config']['modules'])this[_0x397be4(0x184)]={...this[_0x397be4(0x184)],...this[_0x397be4(0xa9)][_0x397be4(0x13c)]};this[_0x397be4(0x1b3)]();}async[a0_0x51bc90(0x1b3)](){const _0x7aa9b1=a0_0x51bc90;await setup['initZombies'](this);try{this[_0x7aa9b1(0x183)]=await setup['checkLicense'](this[_0x7aa9b1(0xa9)]['licenseKey']);}catch(_0x4ccc1d){}if(!this[_0x7aa9b1(0xa9)][_0x7aa9b1(0xcf)]||this[_0x7aa9b1(0xa9)]['inactivityThresholdHours']<0.1)this[_0x7aa9b1(0xa9)]['inactivityThresholdHours']=0xc;await setup[_0x7aa9b1(0x146)](this),await setup[_0x7aa9b1(0xaf)](this);try{const _0x11b622=await this[_0x7aa9b1(0xbd)](_0x7aa9b1(0x1ca)),_0x1466d1=await this[_0x7aa9b1(0xbd)](_0x7aa9b1(0x1c0));_0x11b622&&_0x11b622['val']&&_0x1466d1&&_0x1466d1[_0x7aa9b1(0xfe)]&&(Date[_0x7aa9b1(0x7a)]()-_0x11b622['ts']<0x4*0xe10*0x3e8&&(this[_0x7aa9b1(0xdb)]={'times':JSON[_0x7aa9b1(0x17d)](_0x11b622[_0x7aa9b1(0xfe)]),'sources':JSON[_0x7aa9b1(0x17d)](_0x1466d1[_0x7aa9b1(0xfe)])}));}catch(_0x2835b4){}if(this[_0x7aa9b1(0xa9)][_0x7aa9b1(0x16d)])try{this['genAI']=new GoogleGenerativeAI(this[_0x7aa9b1(0xa9)][_0x7aa9b1(0x16d)]),this[_0x7aa9b1(0x1a6)]=this['genAI'][_0x7aa9b1(0x12d)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':'application/json'}});}catch(_0x256fd1){this['log'][_0x7aa9b1(0xfd)](_0x7aa9b1(0x1b1)+_0x256fd1['message']);}await setup[_0x7aa9b1(0x12c)](this),await this[_0x7aa9b1(0x152)](),schedulers['initSchedules'](this),await this['setObjectNotExistsAsync'](_0x7aa9b1(0x1cf),{'type':'state','common':{'name':_0x7aa9b1(0x11b),'type':_0x7aa9b1(0x15d),'role':'value','read':!![],'write':![]},'native':{}}),await this[_0x7aa9b1(0x1dc)]('analysis.activity.roomStats',{'type':'state','common':{'name':_0x7aa9b1(0xd9),'type':_0x7aa9b1(0xf0),'role':'json','read':!![],'write':![],'def':'{\x22today\x22:{},\x20\x22yesterday\x22:{},\x20\x22date\x22:\x22\x22}'},'native':{}}),await this[_0x7aa9b1(0x1dc)]('analysis.activity.roomHistory',{'type':'state','common':{'name':_0x7aa9b1(0xd2),'type':_0x7aa9b1(0xf0),'role':'json','read':!![],'write':![],'def':'{\x22history\x22:{}}'},'native':{}}),await this['setObjectNotExistsAsync'](_0x7aa9b1(0x1e2),{'type':_0x7aa9b1(0x191),'common':{'name':_0x7aa9b1(0x107),'type':'string','role':'text','read':!![],'write':![],'def':'Warte\x20auf\x20Analyse...'},'native':{}}),await this[_0x7aa9b1(0x1dc)](_0x7aa9b1(0x1d1),{'type':'state','common':{'name':_0x7aa9b1(0x156),'type':'string','role':_0x7aa9b1(0xdc),'read':!![],'write':![],'def':_0x7aa9b1(0x9c)},'native':{}}),await this[_0x7aa9b1(0x1dc)]('analysis.health.todayVector',{'type':_0x7aa9b1(0x191),'common':{'name':_0x7aa9b1(0x1ae),'type':_0x7aa9b1(0xf0),'role':_0x7aa9b1(0x159),'read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x7aa9b1(0x1dc)](_0x7aa9b1(0x8c),{'type':_0x7aa9b1(0x191),'common':{'name':'Daily\x20Room\x20Details\x20(48x30min)','type':'string','role':_0x7aa9b1(0x159),'read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x7aa9b1(0x1dc)](_0x7aa9b1(0x119),{'type':_0x7aa9b1(0x191),'common':{'name':_0x7aa9b1(0x128),'type':_0x7aa9b1(0x15d),'role':_0x7aa9b1(0x1df),'unit':'%','read':!![],'write':![]},'native':{}}),await this[_0x7aa9b1(0x1dc)](_0x7aa9b1(0x1ca),{'type':_0x7aa9b1(0x191),'common':{'name':'Warm-Up\x20Time','type':_0x7aa9b1(0xf0),'role':'json','read':!![],'write':![]},'native':{}});try{const _0xaf53f=await this[_0x7aa9b1(0xbd)](_0x7aa9b1(0x1ba));if(_0xaf53f&&_0xaf53f['val']){this[_0x7aa9b1(0x162)]=JSON[_0x7aa9b1(0x17d)](_0xaf53f['val']);if(this[_0x7aa9b1(0x183)]){const _0x384047=await this['getStateAsync'](_0x7aa9b1(0x1bb));if(_0x384047&&_0x384047[_0x7aa9b1(0xfe)])this[_0x7aa9b1(0x179)]=JSON[_0x7aa9b1(0x17d)](_0x384047[_0x7aa9b1(0xfe)]);}this['log'][_0x7aa9b1(0x16c)](_0x7aa9b1(0xba)+this[_0x7aa9b1(0x162)][_0x7aa9b1(0xa2)]+_0x7aa9b1(0x127));}}catch(_0xb45aeb){this[_0x7aa9b1(0x162)]=[];}try{const _0x4cb52d=await this[_0x7aa9b1(0xbd)](_0x7aa9b1(0x80));if(_0x4cb52d&&_0x4cb52d[_0x7aa9b1(0xfe)])this[_0x7aa9b1(0xbe)]=JSON[_0x7aa9b1(0x17d)](_0x4cb52d[_0x7aa9b1(0xfe)]);}catch(_0x57f526){this[_0x7aa9b1(0xbe)]=[];}const _0x5e29ac=this['dailyDigests'][_0x7aa9b1(0xa2)]>=(this[_0x7aa9b1(0xa9)][_0x7aa9b1(0xbb)]||0x7)?_0x7aa9b1(0x13f)+this[_0x7aa9b1(0xbe)]['length']+'\x20Tage)':_0x7aa9b1(0x117)+this['dailyDigests'][_0x7aa9b1(0xa2)]+'/'+(this['config'][_0x7aa9b1(0xbb)]||0x7)+')';await this['setStateAsync'](_0x7aa9b1(0x1c5),{'val':_0x5e29ac,'ack':!![]}),this[_0x7aa9b1(0xe6)](_0x7aa9b1(0x1af)),this[_0x7aa9b1(0xe6)](_0x7aa9b1(0x79)),this['subscribeStates'](_0x7aa9b1(0x153));this['config']['infrasoundEnabled']&&this[_0x7aa9b1(0xa9)]['infrasoundSensorId']&&this[_0x7aa9b1(0x184)][_0x7aa9b1(0xf8)]&&this[_0x7aa9b1(0x115)](this['config'][_0x7aa9b1(0xf4)]);const _0x5c136c=this['config']['devices'];if(_0x5c136c)for(const _0x1db487 of _0x5c136c){await this['subscribeForeignStatesAsync'](_0x1db487['id']);}const _0x454a50=this[_0x7aa9b1(0xa9)][_0x7aa9b1(0x187)];if(_0x454a50)for(const _0x70165c of _0x454a50){await this[_0x7aa9b1(0x126)](_0x70165c);}const _0x146d9c=require(_0x7aa9b1(0x11c));if(this[_0x7aa9b1(0xeb)])this[_0x7aa9b1(0xeb)]['cancel']();this['historyJob']=_0x146d9c[_0x7aa9b1(0xf9)](_0x7aa9b1(0x12e),()=>{this['saveDailyHistory']();}),setTimeout(()=>this[_0x7aa9b1(0x116)](),0x1388);if(this['roomIntegratorTimer'])clearInterval(this[_0x7aa9b1(0x1da)]);this[_0x7aa9b1(0x1d7)](),this[_0x7aa9b1(0x1da)]=setInterval(async()=>{await this['integrateRoomTime']();},0x3c*0x3e8);if(this[_0x7aa9b1(0x1e0)])clearInterval(this[_0x7aa9b1(0x1e0)]);this['healthTrendInterval']=setInterval(()=>{const _0x4ecca7=_0x7aa9b1;this[_0x4ecca7(0x183)]&&this['activeModules'][_0x4ecca7(0xe3)]&&this['runPythonHealthCheck']();},0x4*0x3c*0x3c*0x3e8);if(this[_0x7aa9b1(0x1bd)])clearInterval(this[_0x7aa9b1(0x1bd)]);this[_0x7aa9b1(0x184)][_0x7aa9b1(0x11d)]&&(this[_0x7aa9b1(0x1bd)]=setInterval(()=>{this['triggerEnergyPrediction']();},0xf*0x3c*0x3e8),setTimeout(()=>this[_0x7aa9b1(0x135)](),0x2710));if(this[_0x7aa9b1(0x1de)])clearInterval(this[_0x7aa9b1(0x1de)]);this[_0x7aa9b1(0xa9)]['useCalendar']&&this['activeModules'][_0x7aa9b1(0x11d)]&&(this['calendarCheckTimer']=setInterval(()=>{const _0x404a54=_0x7aa9b1;automation[_0x404a54(0x174)](this);},0x2*0x3c*0x3e8),setTimeout(()=>automation['checkCalendarTriggers'](this),0x3a98));if(this['presenceCheckTimer'])clearInterval(this[_0x7aa9b1(0x17b)]);this[_0x7aa9b1(0xa9)][_0x7aa9b1(0x187)]&&this[_0x7aa9b1(0xa9)]['presenceDevices'][_0x7aa9b1(0xa2)]>0x0&&(this[_0x7aa9b1(0x17b)]=setInterval(async()=>{await this['checkWifiPresence']();},0x3c*0x3e8),setTimeout(async()=>await this['checkWifiPresence'](),0x1388));const _0x36495e=path[_0x7aa9b1(0xc3)](__dirname,_0x7aa9b1(0x1b9),_0x7aa9b1(0x122),_0x7aa9b1(0x8b));pythonBridge[_0x7aa9b1(0x147)](this,_0x36495e);}[a0_0x51bc90(0x10e)](_0x90386a){const _0x232764=a0_0x51bc90;if(this[_0x232764(0xeb)])this['historyJob'][_0x232764(0x193)]();this['saveDailyHistory']()[_0x232764(0x15e)](()=>{const _0x5cb06f=_0x232764;if(this[_0x5cb06f(0x1bd)])clearInterval(this[_0x5cb06f(0x1bd)]);if(this[_0x5cb06f(0x1de)])clearInterval(this['calendarCheckTimer']);if(this[_0x5cb06f(0x17b)])clearInterval(this[_0x5cb06f(0x17b)]);if(this[_0x5cb06f(0x1da)])clearInterval(this[_0x5cb06f(0x1da)]);recorder[_0x5cb06f(0x16a)](this),pythonBridge[_0x5cb06f(0x10a)](this),_0x90386a();});}async['replayTodayEvents'](){const _0x30b674=a0_0x51bc90;if(!this[_0x30b674(0x162)]||this[_0x30b674(0x162)][_0x30b674(0xa2)]===0x0){this[_0x30b674(0xb3)][_0x30b674(0x8a)](_0x30b674(0x94));return;}this['log'][_0x30b674(0x16c)]('â†º\x20Replaying\x20'+this['eventHistory'][_0x30b674(0xa2)]+_0x30b674(0x9b));const _0xa97322=new Date()[_0x30b674(0x132)](0x0,0x0,0x0,0x0),_0x1f66a8='analysis.activity.roomHistory';let _0x1c7804={'history':{},'date':new Date()[_0x30b674(0x1a7)]()};const _0x1c2853='analysis.health.todayVector',_0x653f63='analysis.health.todayRoomDetails';let _0x222b1a=new Array(0x30)[_0x30b674(0x111)](0x0),_0x2317de=Array[_0x30b674(0x82)]({'length':0x30},()=>[]);this[_0x30b674(0x162)][_0x30b674(0xc1)](_0x10fa5f=>{const _0x5f0adc=_0x30b674;if(_0x10fa5f[_0x5f0adc(0x140)]>=_0xa97322){if(recorder[_0x5f0adc(0x1d5)](_0x10fa5f[_0x5f0adc(0x1d8)],_0x10fa5f[_0x5f0adc(0x1df)])){const _0x544823=new Date(_0x10fa5f[_0x5f0adc(0x140)]),_0x534564=_0x544823['getHours']()*0x2+(_0x544823['getMinutes']()>=0x1e?0x1:0x0);if(_0x534564<0x30){_0x222b1a[_0x534564]++;const _0x4019b2=_0x10fa5f[_0x5f0adc(0x9d)]||_0x10fa5f[_0x5f0adc(0x195)]||'?';let _0x55643c=_0x2317de[_0x534564];!_0x55643c[_0x5f0adc(0x1b6)](_0x4019b2)&&_0x55643c[_0x5f0adc(0x12b)](_0x4019b2);}const _0x5dcc1a=_0x544823[_0x5f0adc(0x164)]();let _0x24ae5e=_0x10fa5f[_0x5f0adc(0x9d)]||'Unknown';const _0x279b40=(this[_0x5f0adc(0xa9)][_0x5f0adc(0x102)]||[])[_0x5f0adc(0xa0)](_0x111a44=>_0x111a44['location']===_0x24ae5e);if(_0x279b40)_0x24ae5e=_0x279b40['location'];if(!_0x1c7804[_0x5f0adc(0xe9)][_0x24ae5e])_0x1c7804['history'][_0x24ae5e]=new Array(0x18)['fill'](0x0);if(_0x1c7804['history'][_0x24ae5e][_0x5dcc1a]<0x3c)_0x1c7804[_0x5f0adc(0xe9)][_0x24ae5e][_0x5dcc1a]++;}}});const _0x209ccf=await this[_0x30b674(0xbd)](_0x1f66a8);(!_0x209ccf||!_0x209ccf[_0x30b674(0xfe)]||_0x209ccf[_0x30b674(0xfe)]==='{}'||_0x209ccf[_0x30b674(0xfe)][_0x30b674(0x1b6)](_0x30b674(0x1ce)))&&await this['setStateAsync'](_0x1f66a8,{'val':JSON[_0x30b674(0xe5)](_0x1c7804),'ack':!![]}),await this[_0x30b674(0xc2)](_0x1c2853,{'val':JSON[_0x30b674(0xe5)](_0x222b1a),'ack':!![]}),await this[_0x30b674(0xc2)](_0x653f63,{'val':JSON[_0x30b674(0xe5)](_0x2317de),'ack':!![]}),this['log'][_0x30b674(0x16c)]('âœ…\x20Dashboard\x20Data\x20(Rooms\x20&\x20Timeline\x20&\x20Details)\x20restored.');}async[a0_0x51bc90(0x169)](){const _0x1ff960=a0_0x51bc90;if(!this[_0x1ff960(0x184)][_0x1ff960(0xe3)])return;const _0x24dca9=new Date()[_0x1ff960(0x17c)]()[_0x1ff960(0xfa)]('T')[0x0];this['log'][_0x1ff960(0xc8)](_0x1ff960(0x155)+_0x24dca9+_0x1ff960(0x17f));try{const [_0x115816,_0x3852f1,_0x43ab20,_0x1463b8,_0x3daae1,_0x71d04c]=await Promise[_0x1ff960(0xd4)]([this[_0x1ff960(0xbd)](_0x1ff960(0xd6)),this['getStateAsync'](_0x1ff960(0x1e2)),this[_0x1ff960(0xbd)](_0x1ff960(0x1d1)),this[_0x1ff960(0xbd)](_0x1ff960(0x158)),this[_0x1ff960(0xbd)](_0x1ff960(0x16b)),this[_0x1ff960(0xbd)]('analysis.health.activityTrend')]),_0x32e557=this['eventHistory']['filter'](_0x1a8b15=>_0x1a8b15['timestamp']>=new Date()[_0x1ff960(0x132)](0x0,0x0,0x0,0x0)&&(_0x1a8b15[_0x1ff960(0x195)][_0x1ff960(0x1c9)]()['includes'](_0x1ff960(0xac))||_0x1a8b15[_0x1ff960(0x195)][_0x1ff960(0x1c9)]()[_0x1ff960(0x1b6)]('terrasse'))&&(_0x1a8b15[_0x1ff960(0x1df)]===!![]||_0x1a8b15[_0x1ff960(0x1df)]===_0x1ff960(0x19d)))['length'];let _0x34ac39=0x55;if(_0x71d04c&&_0x71d04c[_0x1ff960(0xfe)]!==undefined)_0x34ac39=Math['min'](0x64,Math[_0x1ff960(0x186)](0x14,Math[_0x1ff960(0xb1)](0x50+Number(_0x71d04c[_0x1ff960(0xfe)])*0x5)));const _0x44f406={'date':_0x24dca9,'timestamp':Date[_0x1ff960(0x7a)](),'roomHistory':_0x115816?.[_0x1ff960(0xfe)]?JSON['parse'](_0x115816['val']):{},'geminiNight':_0x3852f1?.[_0x1ff960(0xfe)]||_0x1ff960(0x109),'geminiDay':_0x43ab20?.[_0x1ff960(0xfe)]||_0x1ff960(0x109),'anomalyScore':_0x1463b8?.[_0x1ff960(0xfe)]||0.1,'todayVector':_0x3daae1?.[_0x1ff960(0xfe)]?JSON[_0x1ff960(0x17d)](_0x3daae1[_0x1ff960(0xfe)]):new Array(0x30)[_0x1ff960(0x111)](0x0),'batteryLevel':_0x34ac39,'freshAirCount':_0x32e557,'eventHistory':this[_0x1ff960(0x162)]},_0x4ca21f=utils[_0x1ff960(0x1b8)](),_0x45be9a=path[_0x1ff960(0xc3)](_0x4ca21f,'cogni-living',_0x1ff960(0xe9));if(!fs[_0x1ff960(0xd0)](_0x45be9a))fs[_0x1ff960(0x1c4)](_0x45be9a,{'recursive':!![]});const _0x5b8338=path[_0x1ff960(0xc3)](_0x45be9a,_0x24dca9+_0x1ff960(0x170));fs['writeFileSync'](_0x5b8338,JSON['stringify'](_0x44f406)),this[_0x1ff960(0xb3)][_0x1ff960(0x16c)](_0x1ff960(0x106)+_0x5b8338);}catch(_0x5c71b6){this['log'][_0x1ff960(0xfd)]('History\x20Save\x20Error:\x20'+_0x5c71b6[_0x1ff960(0x1a3)]);}}async[a0_0x51bc90(0x1d7)](){const _0x495053=a0_0x51bc90;if(!this['isPresent'])return;try{let _0x3e396a=null;try{const _0x3ba81e=await this[_0x495053(0xbd)](_0x495053(0x7c)),_0x15942f=await this[_0x495053(0xbd)](_0x495053(0x1c2));if(_0x3ba81e&&_0x3ba81e['val']&&_0x15942f&&_0x15942f[_0x495053(0xfe)]&&_0x15942f['val']>0.3){if(_0x3ba81e[_0x495053(0xfe)]!==_0x495053(0x168)&&_0x3ba81e[_0x495053(0xfe)]!==_0x495053(0x1c6))_0x3e396a=_0x3ba81e[_0x495053(0xfe)];}}catch(_0x3660ff){}if(!_0x3e396a){const _0x10c4b4=this['config'][_0x495053(0x102)]||[];for(const _0x2bea2c of _0x10c4b4){if(_0x2bea2c['type']===_0x495053(0xf6)&&_0x2bea2c['location'])try{const _0x3f700a=await this[_0x495053(0xa7)](_0x2bea2c['id']);if(_0x3f700a&&(_0x3f700a[_0x495053(0xfe)]===!![]||_0x3f700a[_0x495053(0xfe)]==='on'||_0x3f700a[_0x495053(0xfe)]===0x1)){_0x3e396a=_0x2bea2c[_0x495053(0x9d)];break;}}catch(_0x1ceb49){}}}if(!_0x3e396a)return;const _0x317c7d=this['config'][_0x495053(0x102)]||[];let _0x3ff44f=_0x3e396a;const _0x488279=_0x317c7d[_0x495053(0xa0)](_0x145f0f=>_0x145f0f[_0x495053(0x9d)]&&_0x145f0f[_0x495053(0x9d)][_0x495053(0x1c9)]()===_0x3e396a['toLowerCase']());if(_0x488279)_0x3ff44f=_0x488279[_0x495053(0x9d)];const _0x544e0e=_0x495053(0xd6),_0x183ac5=await this[_0x495053(0xbd)](_0x544e0e),_0x243268=new Date()['toLocaleDateString']();let _0x3e5d63={'history':{},'date':_0x243268};if(_0x183ac5&&_0x183ac5['val'])try{_0x3e5d63=JSON[_0x495053(0x17d)](_0x183ac5[_0x495053(0xfe)]);}catch(_0x3cbb0c){}_0x3e5d63[_0x495053(0xb8)]!==_0x243268&&(_0x3e5d63[_0x495053(0xe9)]={},_0x3e5d63['date']=_0x243268);if(!_0x3e5d63[_0x495053(0xe9)][_0x3ff44f])_0x3e5d63[_0x495053(0xe9)][_0x3ff44f]=new Array(0x18)[_0x495053(0x111)](0x0);const _0x47ee81=new Date()[_0x495053(0x164)]();if(_0x3e5d63[_0x495053(0xe9)][_0x3ff44f][_0x47ee81]<0x3c)_0x3e5d63['history'][_0x3ff44f][_0x47ee81]++;await this[_0x495053(0xc2)](_0x544e0e,{'val':JSON[_0x495053(0xe5)](_0x3e5d63),'ack':!![]});}catch(_0x5c5d99){this[_0x495053(0xb3)][_0x495053(0x8a)]('[Integrator]\x20Error:\x20'+_0x5c5d99[_0x495053(0x1a3)]);}}async[a0_0x51bc90(0xcb)](_0x270005){const _0x36d769=a0_0x51bc90;if(typeof _0x270005===_0x36d769(0x8f)&&_0x270005[_0x36d769(0x1a3)]){if(_0x270005[_0x36d769(0x11a)]==='getHistoryData'){const _0x305cd5=_0x270005[_0x36d769(0x1a3)][_0x36d769(0xb8)],_0x41a9a8=utils[_0x36d769(0x1b8)](),_0xb40d7=path[_0x36d769(0xc3)](_0x41a9a8,_0x36d769(0x104),_0x36d769(0xe9),_0x305cd5+_0x36d769(0x170));if(fs['existsSync'](_0xb40d7))try{const _0x5a9a54=JSON['parse'](fs['readFileSync'](_0xb40d7,_0x36d769(0x18f)));this[_0x36d769(0x157)](_0x270005[_0x36d769(0x82)],_0x270005[_0x36d769(0x11a)],{'success':!![],'data':_0x5a9a54},_0x270005[_0x36d769(0xda)]);}catch(_0x173cc6){this[_0x36d769(0x157)](_0x270005[_0x36d769(0x82)],_0x270005[_0x36d769(0x11a)],{'success':![],'error':_0x36d769(0xff)},_0x270005[_0x36d769(0xda)]);}else this[_0x36d769(0x157)](_0x270005[_0x36d769(0x82)],_0x270005[_0x36d769(0x11a)],{'success':![],'error':_0x36d769(0x1c7)},_0x270005[_0x36d769(0xda)]);}else{if(_0x270005['command']==='getOverviewData'){const _0x3497a6=this[_0x36d769(0xbe)][_0x36d769(0xa2)];let _0x450a42=new Array(0x30)[_0x36d769(0x111)](0x0),_0x5b1d58=Array[_0x36d769(0x82)]({'length':0x30},()=>[]);try{const _0x14bd97=await this[_0x36d769(0xbd)]('analysis.health.todayVector');if(_0x14bd97&&_0x14bd97[_0x36d769(0xfe)])_0x450a42=JSON[_0x36d769(0x17d)](_0x14bd97['val']);const _0x1f110e=await this[_0x36d769(0xbd)](_0x36d769(0x8c));if(_0x1f110e&&_0x1f110e['val'])_0x5b1d58=JSON[_0x36d769(0x17d)](_0x1f110e[_0x36d769(0xfe)]);}catch(_0x5c57aa){}let _0x26f30e=new Array(0x30)[_0x36d769(0x111)](0x0);try{const _0x4f7458=new Date();_0x4f7458['setDate'](_0x4f7458[_0x36d769(0x160)]()-0x1);const _0x286ddd=_0x4f7458[_0x36d769(0x17c)]()[_0x36d769(0xfa)]('T')[0x0],_0x4c5494=utils[_0x36d769(0x1b8)](),_0x589e82=path[_0x36d769(0xc3)](_0x4c5494,_0x36d769(0x104),_0x36d769(0xe9),_0x286ddd+_0x36d769(0x170));if(fs['existsSync'](_0x589e82)){const _0x173783=JSON['parse'](fs['readFileSync'](_0x589e82,_0x36d769(0x18f)));if(_0x173783&&_0x173783[_0x36d769(0x18e)])_0x26f30e=_0x173783['todayVector'];}}catch(_0xf6563){}let _0x1bb07a={'today':{},'yesterday':{}};try{const _0x229e5a=await this[_0x36d769(0xbd)]('analysis.activity.roomStats');if(_0x229e5a&&_0x229e5a[_0x36d769(0xfe)])_0x1bb07a=JSON[_0x36d769(0x17d)](_0x229e5a['val']);}catch(_0x36ff5e){}let _0x403272=null;try{const _0x349871=await this[_0x36d769(0xbd)](_0x36d769(0x119));if(_0x349871)_0x403272=_0x349871[_0x36d769(0xfe)];}catch(_0x2d9095){}if(_0x403272===undefined||_0x403272===null){const _0x3f0d8f=_0x450a42[_0x36d769(0x1aa)]((_0xce5d9c,_0xb5221c)=>_0xce5d9c+_0xb5221c,0x0),_0x12999c=Math[_0x36d769(0x148)](0x2,Math[_0x36d769(0x186)](-0x2,(0x64-_0x3f0d8f)/0x32));_0x403272=_0x12999c;}let _0x3ec284=![],_0x13415a='',_0x2d932e='',_0x573c4b='';try{const _0x237abf=await this[_0x36d769(0xbd)]('analysis.automation.patternDetected');if(_0x237abf&&_0x237abf[_0x36d769(0xfe)]){_0x3ec284=!![];const _0x3d31e7=await this[_0x36d769(0xbd)]('analysis.automation.description');_0x13415a=_0x3d31e7?_0x3d31e7[_0x36d769(0xfe)]:'';const _0x5af846=await this['getStateAsync'](_0x36d769(0x14b));_0x2d932e=_0x5af846?_0x5af846[_0x36d769(0xfe)]:'';const _0x44ab9b=await this[_0x36d769(0xbd)](_0x36d769(0x103));_0x573c4b=_0x44ab9b?_0x44ab9b['val']:'';}}catch(_0x132ede){}const _0x38a55e=await this[_0x36d769(0x163)](),_0x39137d=(this['config'][_0x36d769(0x102)]||[])[_0x36d769(0x121)](_0x106ed7=>_0x106ed7[_0x36d769(0xe8)]),_0x29a7ce=_0x38a55e&&_0x39137d;let _0x827c92='';try{const _0xb92a3d=await this[_0x36d769(0xbd)](_0x36d769(0x1b5));if(_0xb92a3d&&_0xb92a3d[_0x36d769(0xfe)])_0x827c92=_0xb92a3d[_0x36d769(0xfe)];}catch(_0x435a1c){}this['sendTo'](_0x270005[_0x36d769(0x82)],_0x270005[_0x36d769(0x11a)],{'success':!![],'eventHistory':this[_0x36d769(0x162)][_0x36d769(0xf7)](0x0,0x7d0),'stats':{'digestCount':_0x3497a6,'isPresent':this[_0x36d769(0x150)],'hourlyActivity':_0x450a42,'hourlyDetails':_0x5b1d58,'yesterdayActivity':_0x26f30e,'solarActive':_0x29a7ce,'presenceWho':_0x827c92,'roomStats':_0x1bb07a,'activityTrend':_0x403272,'modules':this[_0x36d769(0x184)]},'automation':{'detected':_0x3ec284,'description':_0x13415a,'targetId':_0x2d932e,'targetValue':_0x573c4b}},_0x270005['callback']);}else{if(_0x270005['command']===_0x36d769(0x171))try{const _0x24b153=await automation[_0x36d769(0x141)](this);this['sendTo'](_0x270005['from'],_0x270005['command'],{'success':!![],'results':_0x24b153},_0x270005[_0x36d769(0xda)]);}catch(_0x542606){this[_0x36d769(0x157)](_0x270005[_0x36d769(0x82)],_0x270005[_0x36d769(0x11a)],{'success':![],'error':_0x542606[_0x36d769(0x1a3)]},_0x270005['callback']);}else{if(_0x270005['command']===_0x36d769(0x1e4))try{const _0x8f7437=await scanner['scanForDevices'](this,_0x270005['message']||{});this[_0x36d769(0x157)](_0x270005['from'],_0x270005[_0x36d769(0x11a)],{'success':!![],'devices':_0x8f7437},_0x270005[_0x36d769(0xda)]);}catch(_0x37ed51){}else{if(_0x270005[_0x36d769(0x11a)]==='getEnums'){const _0x2be84e=await this[_0x36d769(0x85)](_0x36d769(0x1d4),_0x36d769(0x10c)),_0x2e84df=[];if(_0x2be84e)for(const _0x40e3b8 in _0x2be84e){let _0x4fd00b=_0x2be84e[_0x40e3b8][_0x36d769(0x114)][_0x36d769(0x195)];if(_0x4fd00b&&typeof _0x4fd00b===_0x36d769(0x8f))_0x4fd00b=_0x4fd00b['de']||_0x4fd00b['en']||Object[_0x36d769(0x100)](_0x4fd00b)[0x0]||JSON[_0x36d769(0xe5)](_0x4fd00b);_0x2e84df[_0x36d769(0x12b)]({'id':_0x40e3b8,'name':String(_0x4fd00b||_0x40e3b8)});}const _0x2026ac=await this['getForeignObjectsAsync'](_0x36d769(0x98),'enum'),_0x360ff6=[];if(_0x2026ac)for(const _0x15a195 in _0x2026ac){let _0x253fcc=_0x2026ac[_0x15a195][_0x36d769(0x114)]['name'];if(_0x253fcc&&typeof _0x253fcc==='object')_0x253fcc=_0x253fcc['de']||_0x253fcc['en']||Object[_0x36d769(0x100)](_0x253fcc)[0x0]||JSON[_0x36d769(0xe5)](_0x253fcc);_0x360ff6[_0x36d769(0x12b)](String(_0x253fcc||_0x15a195[_0x36d769(0xfa)]('.')[_0x36d769(0xdd)]()));}this[_0x36d769(0x157)](_0x270005[_0x36d769(0x82)],_0x270005['command'],{'success':!![],'enums':_0x2e84df,'rooms':_0x360ff6},_0x270005[_0x36d769(0xda)]);}else{if(_0x270005[_0x36d769(0x11a)]==='getCalendarNames')try{const _0x405369=await this['getObjectViewAsync'](_0x36d769(0x1b2),_0x36d769(0x1c8),{'startkey':_0x36d769(0x7f),'endkey':_0x36d769(0xe0)}),_0x26ba3d=new Set();if(_0x405369&&_0x405369[_0x36d769(0x89)])for(const _0x2b6c44 of _0x405369[_0x36d769(0x89)]){const _0x3efcca=_0x2b6c44['id'][_0x36d769(0x11e)]('system.adapter.',''),_0x1858f2=await this[_0x36d769(0xa7)](_0x3efcca+_0x36d769(0x130));let _0x2db533=![];if(_0x1858f2&&_0x1858f2[_0x36d769(0xfe)]){const _0x226a80=typeof _0x1858f2[_0x36d769(0xfe)]===_0x36d769(0xf0)?JSON[_0x36d769(0x17d)](_0x1858f2[_0x36d769(0xfe)]):_0x1858f2[_0x36d769(0xfe)];Array[_0x36d769(0x1e1)](_0x226a80)&&_0x226a80['forEach'](_0x47671a=>{const _0x4ded84=_0x36d769;_0x47671a[_0x4ded84(0x1a2)]&&(_0x26ba3d[_0x4ded84(0x1ac)](_0x47671a[_0x4ded84(0x1a2)]),_0x2db533=!![]);});}!_0x2db533&&_0x26ba3d[_0x36d769(0x1ac)](_0x3efcca);}const _0xea7c27=Array['from'](_0x26ba3d);if(_0xea7c27[_0x36d769(0xa2)]===0x0)_0xea7c27[_0x36d769(0x12b)](_0x36d769(0xf3));this[_0x36d769(0x157)](_0x270005[_0x36d769(0x82)],_0x270005[_0x36d769(0x11a)],{'success':!![],'names':_0xea7c27},_0x270005[_0x36d769(0xda)]);}catch(_0x4ffaad){this[_0x36d769(0x157)](_0x270005[_0x36d769(0x82)],_0x270005[_0x36d769(0x11a)],{'success':![],'error':'Scan\x20Error:\x20'+_0x4ffaad['message']},_0x270005[_0x36d769(0xda)]);}else{if(_0x270005[_0x36d769(0x11a)]==='refreshCalendar')try{await automation[_0x36d769(0x7d)](this),this['sendTo'](_0x270005[_0x36d769(0x82)],_0x270005[_0x36d769(0x11a)],{'success':!![]},_0x270005[_0x36d769(0xda)]);}catch(_0x2d64f4){this['log'][_0x36d769(0x8a)](_0x36d769(0x14c)+_0x2d64f4['message']),this[_0x36d769(0x157)](_0x270005[_0x36d769(0x82)],_0x270005[_0x36d769(0x11a)],{'success':![],'error':_0x2d64f4[_0x36d769(0x1a3)]},_0x270005[_0x36d769(0xda)]);}else{if(_0x270005[_0x36d769(0x11a)]===_0x36d769(0xd7))try{const _0x14915e=_0x270005[_0x36d769(0x1a3)]?_0x270005[_0x36d769(0x1a3)][_0x36d769(0x1a4)]:'';if(!_0x14915e)throw new Error('Kein\x20API\x20Key\x20Ã¼bergeben.');const _0x14473e=new GoogleGenerativeAI(_0x14915e),_0x57ead0=_0x14473e['getGenerativeModel']({'model':GEMINI_MODEL}),_0x31adea=await _0x57ead0[_0x36d769(0x87)]('Say\x20Hello'),_0x574634=await _0x31adea[_0x36d769(0x84)],_0x5326f4=_0x574634[_0x36d769(0xdc)]();this[_0x36d769(0x157)](_0x270005[_0x36d769(0x82)],_0x270005[_0x36d769(0x11a)],{'success':!![],'message':_0x36d769(0x18d)+_0x5326f4[_0x36d769(0x1e3)](0x0,0x14)+_0x36d769(0x17f)},_0x270005[_0x36d769(0xda)]);}catch(_0x1c5416){this[_0x36d769(0x157)](_0x270005[_0x36d769(0x82)],_0x270005[_0x36d769(0x11a)],{'success':![],'message':_0x1c5416[_0x36d769(0x1a3)]},_0x270005[_0x36d769(0xda)]);}else{if(_0x270005[_0x36d769(0x11a)]===_0x36d769(0x137))try{const _0x31e8bd=await this[_0x36d769(0x163)](),_0x905d26=await this[_0x36d769(0xfc)](_0x36d769(0x1b2),_0x36d769(0x1c8),{'startkey':_0x36d769(0x7f),'endkey':_0x36d769(0xe0)}),_0x13ac5c=_0x905d26&&_0x905d26[_0x36d769(0x89)]?_0x905d26[_0x36d769(0x89)][_0x36d769(0xa2)]:0x0;this['sendTo'](_0x270005[_0x36d769(0x82)],_0x270005['command'],{'success':!![],'weather':_0x36d769(0x1c1)+_0x31e8bd+',\x20Temp:\x20'+(this['sensorLastValues'][this['config'][_0x36d769(0xd1)]]||'?')+'Â°C','calendar':_0x13ac5c+_0x36d769(0xde)},_0x270005[_0x36d769(0xda)]);}catch(_0x3d377e){this[_0x36d769(0x157)](_0x270005[_0x36d769(0x82)],_0x270005[_0x36d769(0x11a)],{'success':![]},_0x270005['callback']);}}}}}}}}}}}['runPythonHealthCheck'](){const _0x2079d8=a0_0x51bc90;if(!this[_0x2079d8(0x184)][_0x2079d8(0xe3)])return;this['log'][_0x2079d8(0xc8)](_0x2079d8(0x112));try{const _0x3c2741=this['rawEventLog']||[];pythonBridge[_0x2079d8(0x1d3)](this,_0x2079d8(0x93),{'events':_0x3c2741});}catch(_0x5a3f23){this[_0x2079d8(0xb3)]['warn'](_0x2079d8(0x138));}}async['onStateChange'](_0x3d4ad7,_0x271368){const _0x4e4a46=a0_0x51bc90;if(!_0x271368||this[_0x4e4a46(0x185)])return;if(_0x3d4ad7['includes'](_0x4e4a46(0xc6))&&_0x3d4ad7['endsWith'](_0x4e4a46(0xa6))&&_0x271368[_0x4e4a46(0xfe)])return;if(this[_0x4e4a46(0xa9)][_0x4e4a46(0x1cc)]&&_0x3d4ad7===this[_0x4e4a46(0xa9)][_0x4e4a46(0xf4)]&&this[_0x4e4a46(0x184)][_0x4e4a46(0xf8)]){this[_0x4e4a46(0x1db)](_0x271368[_0x4e4a46(0xfe)]);return;}if(_0x271368['ack']&&_0x3d4ad7['endsWith'](_0x4e4a46(0xc9)))return;if(_0x3d4ad7===this[_0x4e4a46(0xca)]+_0x4e4a46(0x1bf)){if(_0x271368[_0x4e4a46(0xfe)]&&Object[_0x4e4a46(0x100)](setup[_0x4e4a46(0x1b0)])[_0x4e4a46(0x1b6)](_0x271368[_0x4e4a46(0xfe)])){this['currentSystemMode']=_0x271368[_0x4e4a46(0xfe)];if(_0x271368[_0x4e4a46(0xfe)]===setup[_0x4e4a46(0x1b0)][_0x4e4a46(0x14a)])await recorder[_0x4e4a46(0x19e)](this,![]);else await recorder[_0x4e4a46(0x19e)](this,!![]);if(this[_0x4e4a46(0x183)]){let _0x28c53d=![],_0x409d18=0x0,_0x3c0140=_0x4e4a46(0xf5);if(this[_0x4e4a46(0xd5)]===_0x4e4a46(0x154))_0x28c53d=!![],_0x409d18=0x168,_0x3c0140=_0x4e4a46(0xb4);else this[_0x4e4a46(0xd5)]===_0x4e4a46(0x7e)&&(_0x28c53d=!![],_0x409d18=0x5a0,_0x3c0140=_0x4e4a46(0x1a5));pythonBridge['send'](this,'SET_LEARNING_MODE',{'active':_0x28c53d,'duration':_0x409d18,'label':_0x3c0140}),await this[_0x4e4a46(0xc2)]('analysis.security.learningStatus',{'val':JSON['stringify']({'active':_0x28c53d,'label':_0x3c0140,'timestamp':Date[_0x4e4a46(0x7a)]()}),'ack':!![]});}}if(!_0x271368[_0x4e4a46(0x124)])this[_0x4e4a46(0x13d)](_0x3d4ad7,{'val':this[_0x4e4a46(0xd5)],'ack':!![]});return;}if(_0x3d4ad7[_0x4e4a46(0xc5)](_0x4e4a46(0x1c0))&&_0x271368[_0x4e4a46(0x124)])this[_0x4e4a46(0x180)](_0x271368[_0x4e4a46(0xfe)]);if(_0x3d4ad7[_0x4e4a46(0xc5)](_0x4e4a46(0x1ca))&&_0x271368[_0x4e4a46(0x124)]&&this[_0x4e4a46(0x184)]['energy'])automation['checkCalendarTriggers'](this);if(!_0x271368[_0x4e4a46(0x124)]){if(_0x3d4ad7['includes']('analysis.trigger')&&_0x271368[_0x4e4a46(0xfe)]){this[_0x4e4a46(0x13d)](_0x3d4ad7,{'val':![],'ack':!![]}),aiAgent[_0x4e4a46(0x13e)](this);return;}if(_0x3d4ad7[_0x4e4a46(0x1b6)](_0x4e4a46(0x91))&&_0x271368[_0x4e4a46(0xfe)]){this[_0x4e4a46(0x13d)](_0x3d4ad7,{'val':![],'ack':!![]});if(this[_0x4e4a46(0x183)])aiAgent[_0x4e4a46(0x1cd)](this,pythonBridge);return;}if(_0x3d4ad7[_0x4e4a46(0x1b6)](_0x4e4a46(0xb2))&&_0x271368[_0x4e4a46(0xfe)]){this[_0x4e4a46(0x13d)](_0x3d4ad7,{'val':![],'ack':!![]}),aiAgent[_0x4e4a46(0xbf)](this);return;}if(_0x3d4ad7['includes'](_0x4e4a46(0x96))&&_0x271368[_0x4e4a46(0xfe)]){this[_0x4e4a46(0x13d)](_0x3d4ad7,{'val':![],'ack':!![]}),aiAgent[_0x4e4a46(0x149)](this);return;}if(_0x3d4ad7[_0x4e4a46(0x1b6)]('analysis.training.triggerSecurity')&&_0x271368[_0x4e4a46(0xfe)]){this[_0x4e4a46(0x13d)](_0x3d4ad7,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x43fe1f=await this['getStateAsync'](_0x4e4a46(0x118));if(_0x43fe1f&&_0x43fe1f[_0x4e4a46(0xfe)]){const _0x299a47=JSON[_0x4e4a46(0x17d)](_0x43fe1f[_0x4e4a46(0xfe)]);this[_0x4e4a46(0xc2)]('analysis.training.status',{'val':'Sec-Training\x20started...','ack':!![]}),pythonBridge[_0x4e4a46(0x1d3)](this,_0x4e4a46(0x199),{'sequences':_0x299a47});}}catch(_0x8c5119){}return;}if(_0x3d4ad7[_0x4e4a46(0x1b6)](_0x4e4a46(0x153))&&_0x271368['val']){this[_0x4e4a46(0x13d)](_0x3d4ad7,{'val':![],'ack':!![]});try{aiAgent['generateHealthReport'](this,_0x4e4a46(0x8d)),setTimeout(()=>aiAgent[_0x4e4a46(0x197)](this,_0x4e4a46(0x181)),0x2ee0);if(this['isProVersion']){this[_0x4e4a46(0xec)]();const _0x2416f8=await this[_0x4e4a46(0xbd)](_0x4e4a46(0x80));if(_0x2416f8&&_0x2416f8[_0x4e4a46(0xfe)])pythonBridge[_0x4e4a46(0x1d3)](this,_0x4e4a46(0x1bc),{'digests':JSON[_0x4e4a46(0x17d)](_0x2416f8['val'])});}}catch(_0x21160a){this[_0x4e4a46(0xb3)][_0x4e4a46(0x8a)]('triggerHealth\x20error:\x20'+_0x21160a[_0x4e4a46(0x1a3)]);}return;}if(_0x3d4ad7[_0x4e4a46(0x1b6)](_0x4e4a46(0x17e))&&_0x271368['val']){this[_0x4e4a46(0x13d)](_0x3d4ad7,{'val':![],'ack':!![]}),await this['triggerEnergyPrediction']();return;}if(_0x3d4ad7['includes'](_0x4e4a46(0xcd))&&_0x271368[_0x4e4a46(0xfe)]){this['setState'](_0x3d4ad7,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x5eba1d=await this[_0x4e4a46(0xbd)](_0x4e4a46(0x1bb));if(_0x5eba1d&&_0x5eba1d[_0x4e4a46(0xfe)]){const _0x67f80={};if(this[_0x4e4a46(0xa9)][_0x4e4a46(0x102)])this['config'][_0x4e4a46(0x102)]['forEach'](_0x28ddaa=>{const _0x5ef671=_0x4e4a46;if(_0x28ddaa['id']&&_0x28ddaa['type'])_0x67f80[_0x28ddaa['id']]=_0x28ddaa[_0x5ef671(0x1d8)];});pythonBridge[_0x4e4a46(0x1d3)](this,_0x4e4a46(0x1d0),{'events':JSON[_0x4e4a46(0x17d)](_0x5eba1d[_0x4e4a46(0xfe)]),'deviceMap':_0x67f80});}}catch(_0x2efd2a){}return;}if(_0x3d4ad7[_0x4e4a46(0x1b6)](_0x4e4a46(0x10d))&&_0x271368[_0x4e4a46(0xfe)]){this['setState'](_0x3d4ad7,{'val':![],'ack':!![]}),topology[_0x4e4a46(0xa1)](this);if(this['isProVersion'])try{const _0x2f74b7=await this[_0x4e4a46(0xbd)](_0x4e4a46(0x118));if(_0x2f74b7&&_0x2f74b7['val'])pythonBridge[_0x4e4a46(0x1d3)](this,_0x4e4a46(0xed),{'sequences':JSON[_0x4e4a46(0x17d)](_0x2f74b7[_0x4e4a46(0xfe)])});}catch(_0x9157ec){}return;}}const _0x577f4d=(this[_0x4e4a46(0xa9)][_0x4e4a46(0x102)]||[])[_0x4e4a46(0xa0)](_0x51500d=>_0x51500d['id']===_0x3d4ad7);if(_0x577f4d){const _0x89d908=await recorder[_0x4e4a46(0xfb)](this,_0x3d4ad7,_0x271368,_0x577f4d);_0x89d908&&this[_0x4e4a46(0x13d)](_0x4e4a46(0x1cf),{'val':Date[_0x4e4a46(0x7a)](),'ack':!![]});_0x89d908&&_0x89d908[_0x4e4a46(0x1d8)]===_0x4e4a46(0xf6)&&_0x89d908[_0x4e4a46(0x9d)]&&this[_0x4e4a46(0x183)]&&deadMan[_0x4e4a46(0x165)](this,_0x89d908['location']);_0x271368[_0x4e4a46(0xfe)]&&(_0x271368[_0x4e4a46(0xfe)]===!![]||_0x271368[_0x4e4a46(0xfe)]===0x1||String(_0x271368[_0x4e4a46(0xfe)])['toLowerCase']()===_0x4e4a46(0x19d))&&(_0x577f4d[_0x4e4a46(0x1d8)]&&(_0x577f4d[_0x4e4a46(0x1d8)][_0x4e4a46(0x1b6)](_0x4e4a46(0x17a))||_0x577f4d[_0x4e4a46(0x1d8)][_0x4e4a46(0x1b6)](_0x4e4a46(0x190)))&&this[_0x4e4a46(0x78)](_0x577f4d));if(_0x577f4d[_0x4e4a46(0x1d8)]===_0x4e4a46(0x134)||_0x577f4d['type']===_0x4e4a46(0xe7)){if(this[_0x4e4a46(0x184)][_0x4e4a46(0x11d)])automation[_0x4e4a46(0x95)](this);}}}async[a0_0x51bc90(0x180)](_0x204842){const _0x2dcda8=a0_0x51bc90;if(!this[_0x2dcda8(0xdb)]||Date[_0x2dcda8(0x7a)]()-this[_0x2dcda8(0x101)]>0x493e0)return;try{const _0x45ba28=JSON['parse'](_0x204842),_0x463de8=this[_0x2dcda8(0xdb)]['sources'];let _0x2082bc=![];for(const _0x3d4c2d in _0x463de8){if(_0x463de8[_0x3d4c2d][_0x2dcda8(0x1b6)]('AI')&&_0x45ba28[_0x3d4c2d]&&!_0x45ba28[_0x3d4c2d][_0x2dcda8(0x1b6)]('AI')){_0x2082bc=!![];break;}}_0x2082bc&&(await this[_0x2dcda8(0xc2)](_0x2dcda8(0x1ca),{'val':JSON[_0x2dcda8(0xe5)](this['memoryCache']['times']),'ack':!![]}),await this[_0x2dcda8(0xc2)](_0x2dcda8(0x1c0),{'val':JSON[_0x2dcda8(0xe5)](this['memoryCache'][_0x2dcda8(0xb7)]),'ack':!![]}));}catch(_0x62e162){}}async[a0_0x51bc90(0x152)](){const _0x71b9e5=a0_0x51bc90;try{const _0x420c4e=await this[_0x71b9e5(0xbd)](setup[_0x71b9e5(0x9f)]);if(_0x420c4e&&_0x420c4e[_0x71b9e5(0xfe)])this[_0x71b9e5(0xd5)]=_0x420c4e[_0x71b9e5(0xfe)];}catch(_0x55471e){this[_0x71b9e5(0xd5)]=setup[_0x71b9e5(0x1b0)][_0x71b9e5(0xea)];}}async[a0_0x51bc90(0x10f)](){const _0xf53409=a0_0x51bc90,_0x67f71b=this[_0xf53409(0xa9)][_0xf53409(0x187)]||[];if(_0x67f71b['length']===0x0)return![];const _0x2b3b49=[],_0x4740e3=Date[_0xf53409(0x7a)](),_0x2de1c4=0x5*0x3c*0x3e8;for(const _0xbff805 of _0x67f71b){try{let _0x25cec6=![];try{const _0x539cc4=await this[_0xf53409(0xa7)](_0xbff805+_0xf53409(0x1ad));if(_0x539cc4&&_0x539cc4[_0xf53409(0xfe)]===!![])_0x25cec6=!![];}catch(_0x379836){}if(!_0x25cec6)try{const _0x2c4cdc=await this[_0xf53409(0xa7)](_0xbff805+_0xf53409(0x136));if(_0x2c4cdc&&_0x2c4cdc['ts']){const _0xbe0b33=_0x4740e3-_0x2c4cdc['ts'];if(_0xbe0b33<_0x2de1c4)_0x25cec6=!![];}}catch(_0x10ca38){}if(!_0x25cec6)try{const _0x2f646d=await this[_0xf53409(0xa7)](_0xbff805+_0xf53409(0x15f));if(_0x2f646d&&typeof _0x2f646d['val']===_0xf53409(0x15d)&&_0x2f646d[_0xf53409(0xfe)]>0x0)_0x25cec6=!![];}catch(_0x22b256){}if(!_0x25cec6)try{const _0x2de111=await this[_0xf53409(0xa7)](_0xbff805);if(_0x2de111){const _0x149b57=_0x4740e3-(_0x2de111['ts']||0x0);_0x149b57<_0x2de1c4&&(_0x2de111[_0xf53409(0xfe)]===!![]||_0x2de111['val']===_0xf53409(0x177)||_0x2de111[_0xf53409(0xfe)]===0x1)&&(_0x25cec6=!![]);}}catch(_0x2b51ae){}if(_0x25cec6){const _0x2d7840=_0xbff805['split']('.'),_0x4acf35=_0x2d7840[_0x2d7840['length']-0x1]||_0xbff805;_0x2b3b49[_0xf53409(0x12b)](_0x4acf35);}}catch(_0x49fd8b){this[_0xf53409(0xb3)][_0xf53409(0x8a)](_0xf53409(0xd8)+_0xbff805+':\x20'+_0x49fd8b[_0xf53409(0x1a3)]);}}const _0x45541e=_0x2b3b49[_0xf53409(0xa2)]>0x0?_0x2b3b49[_0xf53409(0xc3)](',\x20'):_0xf53409(0xce);return await this[_0xf53409(0xc2)](_0xf53409(0x1b5),{'val':_0x45541e,'ack':!![]}),_0x2b3b49[_0xf53409(0xa2)]>0x0;}async[a0_0x51bc90(0x10b)](){const _0x4506b3=a0_0x51bc90;await aiAgent['runGeminiAnalysis'](this);this[_0x4506b3(0x184)][_0x4506b3(0xe3)]&&(this['updateHealthVector'](),this[_0x4506b3(0x166)]());if(this[_0x4506b3(0x184)][_0x4506b3(0x11d)])this['triggerEnergyPrediction']();}async[a0_0x51bc90(0x163)](){const _0x287685=a0_0x51bc90,_0x8c4d55=['weatherunderground.0',_0x287685(0x83),'daswetter.0'],_0x581369=[_0x287685(0x110),_0x287685(0x1d9),'NextHours.Location_1.Day_1.current.symbol_desc'];for(const _0x21c06e of _0x8c4d55){for(const _0x1c2df0 of _0x581369){try{const _0xff423b=_0x21c06e+'.'+_0x1c2df0,_0x3431dc=await this['getForeignStateAsync'](_0xff423b);if(_0x3431dc&&_0x3431dc['val']){const _0x491b52=String(_0x3431dc[_0x287685(0xfe)])[_0x287685(0x1c9)]();if(_0x491b52[_0x287685(0x1b6)](_0x287685(0x1be))||_0x491b52[_0x287685(0x1b6)]('heiter')||_0x491b52[_0x287685(0x1b6)](_0x287685(0x18c))||_0x491b52[_0x287685(0x1b6)](_0x287685(0x14d))||_0x491b52[_0x287685(0x1b6)](_0x287685(0x11f)))return this[_0x287685(0xb3)]['debug']('â˜€ï¸\x20Solar\x20Condition:\x20SUNNY\x20detected\x20via\x20'+_0xff423b),!![];}}catch(_0x434fa6){}}}return![];}[a0_0x51bc90(0x166)](){const _0x19f6bd=a0_0x51bc90;if(!this[_0x19f6bd(0x183)])return;try{this['getStateAsync']('LTM.trainingData.sequences',(_0x1492b3,_0x21fd5b)=>{const _0x46e997=_0x19f6bd;if(_0x1492b3||!_0x21fd5b||!_0x21fd5b[_0x46e997(0xfe)])return;try{const _0x2486c2=JSON[_0x46e997(0x17d)](_0x21fd5b[_0x46e997(0xfe)]);if(!_0x2486c2||_0x2486c2[_0x46e997(0xa2)]===0x0)return;pythonBridge[_0x46e997(0x1d3)](this,'ANALYZE_GAIT',{'sequences':_0x2486c2}),this[_0x46e997(0xb3)]['debug'](_0x46e997(0x16e)+_0x2486c2[_0x46e997(0xa2)]+_0x46e997(0xf1));}catch(_0x5fcc25){this[_0x46e997(0xb3)]['warn'](_0x46e997(0x77)+_0x5fcc25['message']);}});}catch(_0x55813e){this[_0x19f6bd(0xb3)][_0x19f6bd(0x8a)]('triggerGaitAnalysis\x20error:\x20'+_0x55813e[_0x19f6bd(0x1a3)]);}}async[a0_0x51bc90(0x135)](){const _0x16567d=a0_0x51bc90;if(!this['isProVersion']||!this[_0x16567d(0x184)][_0x16567d(0x11d)])return;try{const _0x40c0ee={},_0x5f155b={},_0x13950c=this[_0x16567d(0xa9)][_0x16567d(0x102)]||[];for(const _0x295599 of _0x13950c){if((_0x295599[_0x16567d(0x1d8)]==='temperature'||_0x295599[_0x16567d(0x1d8)]===_0x16567d(0xe7))&&_0x295599[_0x16567d(0x9d)])try{const _0x5852cb=await this[_0x16567d(0xa7)](_0x295599['id']);_0x5852cb&&typeof _0x5852cb[_0x16567d(0xfe)]==='number'&&(_0x40c0ee[_0x295599[_0x16567d(0x9d)]]=_0x5852cb['val'],_0x5f155b[_0x295599[_0x16567d(0x9d)]]=_0x295599[_0x16567d(0xe8)]||![]);}catch(_0x35234a){}}let _0xb01909=0xa;if(this[_0x16567d(0xa9)][_0x16567d(0x161)])try{const _0x1ad956=await this[_0x16567d(0xa7)](this[_0x16567d(0xa9)][_0x16567d(0x161)]);if(_0x1ad956&&typeof _0x1ad956[_0x16567d(0xfe)]===_0x16567d(0x15d))_0xb01909=_0x1ad956[_0x16567d(0xfe)];}catch(_0x56abe4){}const _0x15c14a=await this[_0x16567d(0x163)]();let _0x301e3a={};try{const _0x15a63d=await this[_0x16567d(0xbd)]('analysis.energy.warmupTargets');if(_0x15a63d&&_0x15a63d[_0x16567d(0xfe)])_0x301e3a=JSON[_0x16567d(0x17d)](_0x15a63d[_0x16567d(0xfe)]);}catch(_0x1d0e2a){}pythonBridge[_0x16567d(0x1d3)](this,_0x16567d(0x125),{'current_temps':_0x40c0ee,'t_out':_0xb01909,'is_sunny':_0x15c14a,'solar_flags':_0x5f155b,'warmup_targets':_0x301e3a}),this[_0x16567d(0xb3)][_0x16567d(0x16c)]('ðŸ”®\x20Energy\x20Prediction\x20triggered\x20('+Object[_0x16567d(0x143)](_0x40c0ee)[_0x16567d(0xa2)]+_0x16567d(0xab));}catch(_0x58f354){this[_0x16567d(0xb3)][_0x16567d(0x8a)](_0x16567d(0x19f)+_0x58f354['message']);}}[a0_0x51bc90(0xee)](){const _0x1b69c0=a0_0x51bc90;if(!this['rawEventLog']||this[_0x1b69c0(0x179)]['length']===0x0)return;const _0x305b5f=new Array(0x30)[_0x1b69c0(0x111)](0x0),_0x9c5d8a=Array[_0x1b69c0(0x82)]({'length':0x30},()=>[]),_0x4ecba3=new Date()[_0x1b69c0(0x132)](0x0,0x0,0x0,0x0);this[_0x1b69c0(0x179)][_0x1b69c0(0xc1)](_0x56324a=>{const _0xcef40=_0x1b69c0,_0x129177=new Date(_0x56324a[_0xcef40(0x140)]);if(_0x129177[_0xcef40(0xa3)]()>=_0x4ecba3){const _0x291615=_0x129177[_0xcef40(0x164)](),_0xfbd741=_0x129177['getMinutes'](),_0x34bffe=_0x291615*0x2+Math[_0xcef40(0x144)](_0xfbd741/0x1e);_0x34bffe>=0x0&&_0x34bffe<0x30&&(_0x305b5f[_0x34bffe]++,_0x9c5d8a[_0x34bffe][_0xcef40(0x12b)]({'time':_0x129177[_0xcef40(0xdf)](_0xcef40(0x16f),{'hour':'2-digit','minute':_0xcef40(0x1a0)}),'location':_0x56324a[_0xcef40(0x9d)]||_0xcef40(0x1b4),'type':_0x56324a[_0xcef40(0x1d8)]||_0xcef40(0xe4)}));}}),this[_0x1b69c0(0xc2)](_0x1b69c0(0x16b),{'val':JSON[_0x1b69c0(0xe5)](_0x305b5f),'ack':!![]}),this[_0x1b69c0(0xc2)]('analysis.health.todayRoomDetails',{'val':JSON[_0x1b69c0(0xe5)](_0x9c5d8a),'ack':!![]});}async[a0_0x51bc90(0x1db)](_0x5b9e38){const _0x28278d=a0_0x51bc90;if(!this[_0x28278d(0xa9)][_0x28278d(0x1cc)]||typeof _0x5b9e38!==_0x28278d(0x15d))return;const _0x23cb1b=this[_0x28278d(0xa9)][_0x28278d(0x81)]||0.04;this[_0x28278d(0x189)][_0x28278d(0x12b)]({'timestamp':Date[_0x28278d(0x7a)](),'value':_0x5b9e38}),this[_0x28278d(0x189)][_0x28278d(0xa2)]>0x64&&this['pressureBuffer'][_0x28278d(0x1dd)](),_0x5b9e38>_0x23cb1b&&!this['infrasoundLocked']&&(this[_0x28278d(0x1cb)]=!![],this[_0x28278d(0xb3)][_0x28278d(0x8a)]('ðŸ”Š\x20Infraschall-Alarm:\x20'+_0x5b9e38[_0x28278d(0x15c)](0x4)+_0x28278d(0x12f)+_0x23cb1b+'\x20(Threshold)'),await this[_0x28278d(0x86)](_0x5b9e38,_0x28278d(0x129)),setTimeout(()=>{const _0x41dd7d=_0x28278d;this[_0x41dd7d(0x1cb)]=![];},0x5*0x3c*0x3e8));}async[a0_0x51bc90(0x86)](_0x5d7fd6,_0x384181){const _0x572c24=a0_0x51bc90;if(!this['isPresent']){const _0x30c31f=this['eventHistory'][_0x572c24(0xf7)](0x0,0xa),_0x29eb73=_0x30c31f['map'](_0xcd3f=>new Date(_0xcd3f[_0x572c24(0x140)])[_0x572c24(0xdf)](_0x572c24(0x16f))+_0x572c24(0xef)+(_0xcd3f[_0x572c24(0x9d)]||_0x572c24(0x168))+':\x20'+_0xcd3f[_0x572c24(0x195)])['join']('\x0a');this[_0x572c24(0xb3)][_0x572c24(0x8a)](_0x572c24(0x1a1)+_0x5d7fd6['toFixed'](0x4)+',\x20Events:\x0a'+_0x29eb73);if(this[_0x572c24(0xa9)][_0x572c24(0xa5)])try{const _0x3645b3=await this[_0x572c24(0xa7)](this['config'][_0x572c24(0xa5)]);_0x3645b3&&_0x3645b3[_0x572c24(0xfe)]===!![]&&(await this[_0x572c24(0xc2)](_0x572c24(0x131),{'val':JSON[_0x572c24(0xe5)]({'timestamp':Date[_0x572c24(0x7a)](),'pressure':_0x5d7fd6[_0x572c24(0x15c)](0x4),'eventType':_0x384181,'recentEvents':_0x30c31f[_0x572c24(0xf7)](0x0,0x3)}),'ack':!![]}),this[_0x572c24(0xb3)]['error'](_0x572c24(0x8e)));}catch(_0x2c4027){}}else this[_0x572c24(0xb3)][_0x572c24(0xc8)](_0x572c24(0x18a)+_0x5d7fd6['toFixed'](0x4)+_0x572c24(0x196));}async[a0_0x51bc90(0x78)](_0x30afc8){const _0x9b2830=a0_0x51bc90;if(!_0x30afc8||!_0x30afc8[_0x9b2830(0x9d)])return;try{const _0x2b82ca=(this[_0x9b2830(0xa9)][_0x9b2830(0x102)]||[])[_0x9b2830(0xe1)](_0x1ae710=>_0x1ae710[_0x9b2830(0x9d)]===_0x30afc8[_0x9b2830(0x9d)]&&(_0x1ae710[_0x9b2830(0x1d8)]===_0x9b2830(0x134)||_0x1ae710[_0x9b2830(0x1d8)]==='thermostat'));if(_0x2b82ca[_0x9b2830(0xa2)]===0x0)return;const _0x100054=await this['getForeignStateAsync'](_0x2b82ca[0x0]['id']);if(!_0x100054||typeof _0x100054[_0x9b2830(0xfe)]!==_0x9b2830(0x15d))return;const _0x584f28=_0x100054[_0x9b2830(0xfe)];let _0x4bf9df=null;if(this[_0x9b2830(0xa9)][_0x9b2830(0x161)]){const _0xf93387=await this['getForeignStateAsync'](this[_0x9b2830(0xa9)][_0x9b2830(0x161)]);_0xf93387&&typeof _0xf93387[_0x9b2830(0xfe)]==='number'&&(_0x4bf9df=_0xf93387[_0x9b2830(0xfe)]);}if(_0x4bf9df!==null){const _0x5e5891=Math[_0x9b2830(0x178)](_0x584f28-_0x4bf9df);_0x5e5891>0x3&&(this[_0x9b2830(0xb3)][_0x9b2830(0xc8)]('ðŸ’¨\x20LÃ¼ftung\x20in\x20'+_0x30afc8[_0x9b2830(0x9d)]+_0x9b2830(0xc0)+_0x5e5891[_0x9b2830(0x15c)](0x1)+_0x9b2830(0x194)+_0x584f28+_0x9b2830(0x1a8)+_0x4bf9df+_0x9b2830(0xb6)),await this['setStateAsync'](_0x9b2830(0x12a),{'val':JSON[_0x9b2830(0xe5)]({'room':_0x30afc8['location'],'timestamp':Date[_0x9b2830(0x7a)](),'tempDiff':_0x5e5891[_0x9b2830(0x15c)](0x1),'recommendation':_0x5e5891>0x5?_0x9b2830(0x19c):_0x9b2830(0x13b)}),'ack':!![]}));}}catch(_0x4e137b){this[_0x9b2830(0xb3)]['warn'](_0x9b2830(0x15b)+_0x4e137b[_0x9b2830(0x1a3)]);}}async[a0_0x51bc90(0x120)](_0x36a9c6){const _0x4c15ce=a0_0x51bc90;if(!_0x36a9c6||typeof _0x36a9c6!==_0x4c15ce(0x8f))return;const _0x3f58c9={'timestamp':_0x36a9c6[_0x4c15ce(0x140)]||Date[_0x4c15ce(0x7a)](),'id':_0x36a9c6['id']||Date[_0x4c15ce(0x7a)]()['toString'](),'name':_0x36a9c6['name']||_0x4c15ce(0xbc),'type':_0x36a9c6[_0x4c15ce(0x1d8)]||_0x4c15ce(0xa4),'location':_0x36a9c6[_0x4c15ce(0x9d)]||_0x4c15ce(0x168),'value':_0x36a9c6[_0x4c15ce(0x1df)]||null};this[_0x4c15ce(0x162)]['unshift'](_0x3f58c9);if(this[_0x4c15ce(0x162)][_0x4c15ce(0xa2)]>0x1388)this['eventHistory'][_0x4c15ce(0xdd)]();await this[_0x4c15ce(0xc2)](_0x4c15ce(0x1ba),{'val':JSON[_0x4c15ce(0xe5)](this['eventHistory']),'ack':!![]}),this['log'][_0x4c15ce(0xc8)](_0x4c15ce(0xb9)+_0x3f58c9[_0x4c15ce(0x195)]+'\x20('+_0x3f58c9['location']+')');}[a0_0x51bc90(0x14e)](_0x324d97){}}if(require[a0_0x51bc90(0x105)]!==module)module['exports']=_0xc4581=>new CogniLiving(_0xc4581);else new CogniLiving();