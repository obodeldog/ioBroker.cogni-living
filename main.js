const a0_0x5fb1a5=a0_0x2b20;(function(_0x46b7a1,_0x268ba1){const _0x56118b=a0_0x2b20,_0x5a126b=_0x46b7a1();while(!![]){try{const _0x50f067=parseInt(_0x56118b(0x196))/0x1+-parseInt(_0x56118b(0x150))/0x2*(parseInt(_0x56118b(0x207))/0x3)+parseInt(_0x56118b(0x1e4))/0x4+parseInt(_0x56118b(0x168))/0x5+parseInt(_0x56118b(0x191))/0x6+-parseInt(_0x56118b(0x14b))/0x7*(parseInt(_0x56118b(0x17b))/0x8)+-parseInt(_0x56118b(0x248))/0x9*(parseInt(_0x56118b(0x203))/0xa);if(_0x50f067===_0x268ba1)break;else _0x5a126b['push'](_0x5a126b['shift']());}catch(_0x107d10){_0x5a126b['push'](_0x5a126b['shift']());}}}(a0_0x411e,0x4ce22));const a0_0x20c9c2=(function(){let _0x50d088=!![];return function(_0x3b4f13,_0x110af9){const _0x2244bb=_0x50d088?function(){const _0x2af2e2=a0_0x2b20;if(_0x110af9){const _0x9bba3f=_0x110af9[_0x2af2e2(0x21a)](_0x3b4f13,arguments);return _0x110af9=null,_0x9bba3f;}}:function(){};return _0x50d088=![],_0x2244bb;};}()),a0_0x5e7a9e=a0_0x20c9c2(this,function(){const _0x29bc6e=a0_0x2b20;return a0_0x5e7a9e['toString']()[_0x29bc6e(0x165)]('(((.+)+)+)+$')['toString']()[_0x29bc6e(0x1f1)](a0_0x5e7a9e)[_0x29bc6e(0x165)]('(((.+)+)+)+$');});a0_0x5e7a9e();function a0_0x2b20(_0x1636bc,_0x42e55e){const _0x3f42de=a0_0x411e();return a0_0x2b20=function(_0x5e7a9e,_0x20c9c2){_0x5e7a9e=_0x5e7a9e-0x117;let _0x411ef4=_0x3f42de[_0x5e7a9e];return _0x411ef4;},a0_0x2b20(_0x1636bc,_0x42e55e);}'use strict';const utils=require(a0_0x5fb1a5(0x1ba)),{GoogleGenerativeAI}=require(a0_0x5fb1a5(0x152)),installer=require('./lib/installer'),scanner=require(a0_0x5fb1a5(0x15e)),schedulers=require(a0_0x5fb1a5(0x1cf)),topology=require('./lib/topology'),setup=require(a0_0x5fb1a5(0x14a)),recorder=require(a0_0x5fb1a5(0x208)),pythonBridge=require('./lib/python_bridge'),aiAgent=require(a0_0x5fb1a5(0x22a)),deadMan=require(a0_0x5fb1a5(0x178)),automation=require(a0_0x5fb1a5(0x22c)),GEMINI_MODEL=a0_0x5fb1a5(0x24e),ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};function a0_0x411e(){const _0x53dae5=['isSolar','getOutsideTemperatureNumeric','resetRLPenalty','\x20hPa.\x20Einbruch\x20wahrscheinlich.','setObjectNotExistsAsync','Instanz\x20nicht\x20gefunden','runPythonHealthCheck','analysisHistory','PYTHON_EXE','getTime','inactivityThresholdHours','filter','magnet','Forensic\x20Infrasound\x20Log','dismissAutomation','Kein\x20API\x20Key\x20Ã¼bergeben','43484wRIOWn','Gemini\x20AI\x20initialized.','analysis.energy.ventilationAlerts','SYSTEM_DP_MODE','manual','.communicate.request','ready','infrasoundLocked','values','ðŸš¨\x20DRUCKWELLEN-ALARM!\x20StÃ¤rke:\x20','getOverviewData','Reinforcement\x20Learning\x20Penalties','analysis.energy.warmupSources','constructor','updated','info','analysis.security.infrasoundLog','setupBriefingScheduler','updateHealthVector','genAI','NORMAL','Warm-Up\x20Target\x20Temps\x20(JSON)','cogni-living\x20adapter\x20starting\x20(v','handleInfrasound','Sensors\x20used\x20for\x20Gait\x20Analysis','toLowerCase','testNotification','startSystem','loadSystemMode','config','Lernphase\x20(','803710AxZAyv','clear','generateContent','sensorLastValues','1692303lArtLa','./lib/recorder','startService','trackerEnabled','forEach','thermostat','sendTo','abortExitTimer','Current.WeatherText','accuweather.0','analysis.training.triggerTopology','ðŸ§ \x20Memory\x20Protection:\x20Restoring\x20persisted\x20AI-Calculations\x20(preventing\x20\x27Cold\x20Start\x27\x20amnesia).','cancel','klar','analysis.automation.targetValue','initSystemConfig','TRAIN_ENERGY','[Infrasound]\x20ðŸš¨\x20ALARM\x20TRIGGERED!\x20Pressure\x20Wave:\x20','string','apply','now','isProVersion','sendNotification','LTM.baselineStatus','state','calendarInstance','infrasoundArmingId','executeAutomationAction','stopService','analysis.automation.autoApply','TRAIN_SECURITY','LTM.trainingData.thermodynamics','trackerHeartbeat','MATCH\x20(False\x20Positive)','sort','./lib/ai_agent','triggerGaitAnalysis','./lib/automation','\x20rooms\x20(preventing\x20Cold\x20Start\x20Amnesia).','application/json','geminiModel','LTM.dailyDigests','analysis.training.triggerHealth','ltmJob','SYSTEM_MODES','minDaysForBaseline','Simulation\x20durch\x20Admin\x20(Test)','rawEventLog',')\x20-\x20Phase\x20D\x20(Forensic\x20Correlation)','LTM.rawEventLog','setHours','analysisInterval','daswetter.0','dependencyInstallInProgress','driftAnalysisTimer','role','motion','TRAIN_HEALTH','times','analysisTimer','minutes_safe','triggerInfrasoundCorrelation','SET_TOPOLOGY','command','getHours','18bAaiaY','heiter','reed','runGeminiAnalysis','slice','analysis.automation.patternDetected','models/gemini-flash-latest','dailyDigests','send','getCalendarNames','analysis.automation.targetId','protectAiMemory','ANOMALY\x20(Real\x20Threat?)','isPresent','setPresence','type','eventHistory','createAllObjects','abs','exports','warn','NextHours.Location_1.Day_1.current.symbol_desc','ðŸ§ \x20Memory:\x20Cache\x20hydrated\x20with\x20','notifyPushoverInstance','json','initZombies','infrasoundSensorId','telegram','exitGraceTimer','[Forensics]\x20Infrasound\x20Event\x20correlated:\x20','lastTrackerEventTime','Kein\x20Kalender-Adapter','sensor.door','getEnums','scanThermostats','response','simulateEnergyMPC','map','online','simulateButler','VACATION','enum.functions.*','unshift','notifyPushoverEnabled','analysis.training.triggerComfort','_calName','OPTIMIZE_ENERGY','sensor.window','floor','instance','notifyTelegramEnabled','callback','analysis.energy.warmupTimes','triggerDailyDigest','briefingJob','getState','isArray','{\x22default\x22:\x2021}','find','./lib/setup','2318463gXarlg','activityLevel','enum','modeResetJob','common','2FhaKSo','Test','@google/generative-ai','Heizung\x20kann\x20','analysis.training.triggerSecurity','onUnload','getForeignObjectAsync','.system.mode','analysis.security.learningStatus','value','â¤ï¸\x20Auto-Heartbeat:\x20Aktualisiere\x20Gesundheits-Trends...','timestamp','includes','setupLtmScheduler','./lib/scanner','analysis.training.status','createDailyDigest','infrasoundThreshold','ðŸ””\x20Dies\x20ist\x20ein\x20Test\x20von\x20Cogni-Living.','healthTrendInterval','General\x20Activity\x20Trend\x20(%)','search','sendMorningBriefing','Keine\x20Sensor-AktivitÃ¤t','3035985UrrUsj','analysis.energy.activeEnforcements','keys','message','getGenerativeModel','checkSolarCondition','length','unload','SET_LEARNING_MODE','devices','setState','forecast.current.weather','Kein\x20Wetter-Adapter','bootTime','getStateAsync','Fehler:\x20','./lib/dead_man','triggerEnergyPrediction','subscribeStates','8UmPfaC','setupModeResetScheduler','LTM.triggerDailyDigest','WiFi\x20Presence\x20detected.','party','ANALYZE_GAIT','.data.table','getForeignObjectsAsync','some','setStateAsync','LTM.trainingData.sequences','Active\x20Calendar\x20Enforcements\x20(Locks)','add','from','log','analysis.automation.description','join','security.alarm_triggered','location','notifyTelegramInstance','Verbunden','onReady','913266LxEqNQ','ack','updateTopology','stringify','push','600687IbIVBl','infrasoundEnabled','runAutopilot','Activity-Level','val','weatherunderground.0','updateTopologyMatrix','Guest\x20Mode','temperature','PREDICT_ENERGY','cogni-living','onStateChange','analysis.topology.structure','Keine\x20Antwort\x20von\x20Gemini','Sec-Training\x20started...','getForeignStateAsync','pop','exitTimer','checkWifiPresence','analysis.health.gaitSensors','Adapter','text','analysis.automation.triggerAction','analysis.energy.warmupTargets','error','analysis.trigger','apiKey','licenseKey','[Infrasound]\x20Subscribing\x20to\x20external\x20sensor:\x20','ErklÃ¤rt\x20durch:\x20','memoryCache','monitorEnforcements','PINN\x20AI\x20Forecast','onMessage','analysis.energy.rlPenalties','ANALYZE_TREND','@iobroker/adapter-core','currentSystemMode','Warm-Up\x20Time\x20(Minutes\x20to\x20Target)','Nuukanni\x20Security','name','\x20min\x20ausbleiben.','Aktiv\x20(','presenceDevices','stateChange','sonn','debug','endsWith','sources','analysis.triggerBriefing','cleanupGhostInterventions','ðŸŽ“\x20[RL-RESET]\x20Lern-Sperre\x20(Penalty)\x20fÃ¼r\x20\x27','testContext','parse','bind','object','\x20Tage)','./lib/scheduler','analysis.health.gaitDebug','subscribeForeignStatesAsync','calendarName','guest'];a0_0x411e=function(){return _0x53dae5;};return a0_0x411e();}class CogniLiving extends utils[a0_0x5fb1a5(0x1aa)]{constructor(_0x5688f0){const _0x4bf3ab=a0_0x5fb1a5;super({..._0x5688f0,'name':_0x4bf3ab(0x1a0)}),this[_0x4bf3ab(0x11f)]=[],this[_0x4bf3ab(0x1db)]=[],this[_0x4bf3ab(0x236)]=[],this[_0x4bf3ab(0x24f)]=[],this[_0x4bf3ab(0x206)]={},this['systemConfig']={'latitude':0x0,'longitude':0x0,'city':''},this[_0x4bf3ab(0x11c)]=!![],this['exitTimer']=null,this[_0x4bf3ab(0x12b)]=null,this['isGracePeriodActive']=![],this[_0x4bf3ab(0x1f7)]=null,this['geminiModel']=null,this[_0x4bf3ab(0x1bb)]=setup[_0x4bf3ab(0x233)][_0x4bf3ab(0x1f8)],this[_0x4bf3ab(0x21c)]=![],this['lastAlertState']=![],this[_0x4bf3ab(0x242)]=null,this[_0x4bf3ab(0x232)]=null,this[_0x4bf3ab(0x14e)]=null,this['driftAnalysisTimer']=null,this[_0x4bf3ab(0x145)]=null,this['trackerHeartbeat']=null,this[_0x4bf3ab(0x163)]=null,this['dependencyInstallInProgress']=![],this[_0x4bf3ab(0x12d)]=Date['now'](),this['memoryCache']=null,this[_0x4bf3ab(0x175)]=Date[_0x4bf3ab(0x21b)](),this[_0x4bf3ab(0x1eb)]=![],this['on'](_0x4bf3ab(0x1ea),this['onReady'][_0x4bf3ab(0x1cc)](this)),this['on'](_0x4bf3ab(0x1c2),this[_0x4bf3ab(0x1a1)][_0x4bf3ab(0x1cc)](this)),this['on'](_0x4bf3ab(0x16f),this[_0x4bf3ab(0x155)]['bind'](this)),this['on'](_0x4bf3ab(0x16b),this[_0x4bf3ab(0x1b7)][_0x4bf3ab(0x1cc)](this));}async[a0_0x5fb1a5(0x190)](){const _0x1c71bc=a0_0x5fb1a5;this['log'][_0x1c71bc(0x1f3)](_0x1c71bc(0x1fa)+this['version']+_0x1c71bc(0x237));if(!installer['checkAndInstall'](this,()=>this[_0x1c71bc(0x1ff)]()))return;}async[a0_0x5fb1a5(0x1ff)](){const _0x47a64f=a0_0x5fb1a5;await setup[_0x47a64f(0x128)](this);try{this[_0x47a64f(0x21c)]=await setup['checkLicense'](this[_0x47a64f(0x201)][_0x47a64f(0x1b1)]);}catch(_0x4fde8b){}if(!this[_0x47a64f(0x201)][_0x47a64f(0x1de)]||this['config']['inactivityThresholdHours']<0.1)this[_0x47a64f(0x201)][_0x47a64f(0x1de)]=0xc;await setup['initHistory'](this),await setup[_0x47a64f(0x216)](this);try{const _0x1b4764=await this[_0x47a64f(0x176)]('analysis.energy.warmupTimes'),_0x4123eb=await this['getStateAsync'](_0x47a64f(0x1f0));_0x1b4764&&_0x1b4764[_0x47a64f(0x19a)]&&_0x4123eb&&_0x4123eb['val']&&(Date['now']()-_0x1b4764['ts']<0x4*0xe10*0x3e8&&(this[_0x47a64f(0x1b4)]={'times':JSON[_0x47a64f(0x1cb)](_0x1b4764[_0x47a64f(0x19a)]),'sources':JSON[_0x47a64f(0x1cb)](_0x4123eb[_0x47a64f(0x19a)])},this[_0x47a64f(0x189)][_0x47a64f(0x1f3)](_0x47a64f(0x125)+Object[_0x47a64f(0x16a)](this['memoryCache'][_0x47a64f(0x241)])[_0x47a64f(0x16e)]+_0x47a64f(0x22d))));}catch(_0x32132c){this['log']['warn']('Memory\x20Hydration\x20Failed:\x20'+_0x32132c[_0x47a64f(0x16b)]);}if(this[_0x47a64f(0x201)]['geminiApiKey'])try{this[_0x47a64f(0x1f7)]=new GoogleGenerativeAI(this[_0x47a64f(0x201)]['geminiApiKey']),this[_0x47a64f(0x22f)]=this[_0x47a64f(0x1f7)][_0x47a64f(0x16c)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x47a64f(0x22e)}}),this['log'][_0x47a64f(0x1f3)](_0x47a64f(0x1e5));}catch(_0x48b79b){this[_0x47a64f(0x189)][_0x47a64f(0x1ae)]('Gemini\x20Init\x20Error:\x20'+_0x48b79b[_0x47a64f(0x16b)]);}await setup[_0x47a64f(0x120)](this),await this[_0x47a64f(0x200)](),await this[_0x47a64f(0x1d8)]('analysis.energy.pinnForecast',{'type':_0x47a64f(0x21f),'common':{'name':_0x47a64f(0x1b6),'type':'string','role':'json','read':!![],'write':![]},'native':{}}),await this[_0x47a64f(0x1d8)](_0x47a64f(0x1e6),{'type':_0x47a64f(0x21f),'common':{'name':'Active\x20Ventilation\x20Alerts','type':_0x47a64f(0x219),'role':_0x47a64f(0x127),'read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x47a64f(0x143),{'type':_0x47a64f(0x21f),'common':{'name':_0x47a64f(0x1bc),'type':_0x47a64f(0x219),'role':'json','read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync']('analysis.energy.warmupTargets',{'type':'state','common':{'name':_0x47a64f(0x1f9),'type':'string','role':_0x47a64f(0x127),'read':!![],'write':!![],'def':_0x47a64f(0x148)},'native':{}}),await this[_0x47a64f(0x1d8)](_0x47a64f(0x1b8),{'type':_0x47a64f(0x21f),'common':{'name':_0x47a64f(0x1ef),'type':_0x47a64f(0x219),'role':_0x47a64f(0x127),'read':!![],'write':![],'def':'{}'},'native':{}}),await this[_0x47a64f(0x1d8)]('analysis.health.activityTrend',{'type':_0x47a64f(0x21f),'common':{'name':_0x47a64f(0x164),'type':'number','role':_0x47a64f(0x159),'unit':'%','read':!![],'write':![]},'native':{}}),await this[_0x47a64f(0x1d8)](_0x47a64f(0x1a9),{'type':_0x47a64f(0x21f),'common':{'name':_0x47a64f(0x1fc),'type':'string','role':_0x47a64f(0x1ab),'read':!![],'write':![]},'native':{}}),await this[_0x47a64f(0x1d8)](_0x47a64f(0x169),{'type':'state','common':{'name':_0x47a64f(0x186),'type':_0x47a64f(0x219),'role':_0x47a64f(0x127),'read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x47a64f(0x1d8)](_0x47a64f(0x1f4),{'type':_0x47a64f(0x21f),'common':{'name':_0x47a64f(0x1e1),'type':_0x47a64f(0x219),'role':'json','read':!![],'write':![],'def':'[]'},'native':{}}),await this['setObjectNotExistsAsync'](_0x47a64f(0x1d0),{'type':_0x47a64f(0x21f),'common':{'name':'Gait\x20Speed\x20Calculation\x20Proof','type':'string','role':_0x47a64f(0x1ab),'read':!![],'write':![]},'native':{}});try{const _0x34d377=await this[_0x47a64f(0x176)]('LTM.rawEventLog');if(_0x34d377&&_0x34d377[_0x47a64f(0x19a)])this[_0x47a64f(0x236)]=JSON['parse'](_0x34d377[_0x47a64f(0x19a)]);}catch(_0x21ae39){this[_0x47a64f(0x236)]=[];}try{const _0x3d1c53=await this[_0x47a64f(0x176)](_0x47a64f(0x230));if(_0x3d1c53&&_0x3d1c53[_0x47a64f(0x19a)])this['dailyDigests']=JSON[_0x47a64f(0x1cb)](_0x3d1c53['val']);}catch(_0x4faa5a){this[_0x47a64f(0x24f)]=[];}const _0xcd2f74=this[_0x47a64f(0x24f)][_0x47a64f(0x16e)]>=(this[_0x47a64f(0x201)][_0x47a64f(0x234)]||0x7)?_0x47a64f(0x1c0)+this[_0x47a64f(0x24f)][_0x47a64f(0x16e)]+_0x47a64f(0x1ce):_0x47a64f(0x202)+this['dailyDigests']['length']+'/'+(this['config'][_0x47a64f(0x234)]||0x7)+')';await this[_0x47a64f(0x184)](_0x47a64f(0x21e),{'val':_0xcd2f74,'ack':!![]}),this[_0x47a64f(0x17a)](_0x47a64f(0x1af)),this[_0x47a64f(0x17a)](_0x47a64f(0x17d)),this[_0x47a64f(0x17a)]('system.mode'),this[_0x47a64f(0x17a)](_0x47a64f(0x1c7)),this[_0x47a64f(0x17a)](_0x47a64f(0x1ac)),this[_0x47a64f(0x17a)](_0x47a64f(0x224)),this[_0x47a64f(0x17a)](_0x47a64f(0x154)),this['subscribeStates'](_0x47a64f(0x231)),this[_0x47a64f(0x17a)]('analysis.training.triggerEnergy'),this[_0x47a64f(0x17a)](_0x47a64f(0x13b)),this[_0x47a64f(0x17a)](_0x47a64f(0x211)),this[_0x47a64f(0x17a)]('analysis.energy.mpcActive'),this[_0x47a64f(0x17a)](_0x47a64f(0x1f0));this[_0x47a64f(0x201)][_0x47a64f(0x197)]&&this[_0x47a64f(0x201)][_0x47a64f(0x129)]&&(this['log'][_0x47a64f(0x1f3)](_0x47a64f(0x1b2)+this['config']['infrasoundSensorId']),this['subscribeForeignStates'](this[_0x47a64f(0x201)][_0x47a64f(0x129)]));const _0x160d8b=this[_0x47a64f(0x201)][_0x47a64f(0x171)];if(_0x160d8b)for(const _0x4abaab of _0x160d8b){await this[_0x47a64f(0x1d1)](_0x4abaab['id']);}const _0x3c6af6=this[_0x47a64f(0x201)][_0x47a64f(0x1c1)];if(_0x3c6af6)for(const _0x5c1c27 of _0x3c6af6){await this[_0x47a64f(0x1d1)](_0x5c1c27);}if(this['config'][_0x47a64f(0x141)]&&this['config'][_0x47a64f(0x18e)])await this['subscribeForeignStatesAsync'](this[_0x47a64f(0x201)][_0x47a64f(0x18e)]+_0x47a64f(0x1e9));setTimeout(()=>this[_0x47a64f(0x1a8)](),0x1388);if(this[_0x47a64f(0x242)])clearInterval(this[_0x47a64f(0x242)]);const _0x3927ff=this[_0x47a64f(0x201)][_0x47a64f(0x23a)]||0xf;_0x3927ff>0x0&&(this['analysisTimer']=setInterval(()=>{const _0x3c9573=_0x47a64f;this['runAutopilot'](),automation['checkCalendarTriggers'](this),automation[_0x3c9573(0x1b5)](this);},_0x3927ff*0x3c*0x3e8));setTimeout(()=>{const _0xb3cb75=_0x47a64f;automation['checkCalendarTriggers'](this),automation[_0xb3cb75(0x1b5)](this);},0x2710);this[_0x47a64f(0x201)][_0x47a64f(0x20a)]!==![]&&(this[_0x47a64f(0x227)]=setInterval(()=>{const _0x38aa48=_0x47a64f;if(this[_0x38aa48(0x21c)]){const _0x27b97a=Date[_0x38aa48(0x21b)](),_0x255752=this['lastTrackerEventTime']||_0x27b97a,_0x3e4d3e=(_0x27b97a-_0x255752)/0x3e8;_0x3e4d3e>0x2&&(this['lastTrackerEventTime']=_0x27b97a,pythonBridge[_0x38aa48(0x117)](this,'TRACK_EVENT',{'room':null,'dt':_0x3e4d3e}));}},0xbb8));if(this['healthTrendInterval'])clearInterval(this['healthTrendInterval']);this['healthTrendInterval']=setInterval(()=>{const _0x465ccb=_0x47a64f;this['isProVersion']&&(this[_0x465ccb(0x189)][_0x465ccb(0x1f3)](_0x465ccb(0x15a)),this[_0x465ccb(0x1da)]());},0x4*0x3c*0x3c*0x3e8),schedulers[_0x47a64f(0x15d)](this,()=>aiAgent[_0x47a64f(0x160)](this,pythonBridge)),schedulers[_0x47a64f(0x17c)](this),schedulers['setupDriftAnalysisScheduler'](this,()=>aiAgent['runBaselineDriftAnalysis'](this)),schedulers[_0x47a64f(0x1f5)](this,()=>aiAgent[_0x47a64f(0x166)](this)),pythonBridge[_0x47a64f(0x209)](this,installer[_0x47a64f(0x1dc)]),setTimeout(async()=>{const _0x136859=_0x47a64f;await topology['updateTopology'](this);try{const _0x46fe09=await this[_0x136859(0x176)](_0x136859(0x1a2));if(_0x46fe09&&_0x46fe09[_0x136859(0x19a)])pythonBridge['send'](this,'SET_TOPOLOGY',JSON[_0x136859(0x1cb)](_0x46fe09[_0x136859(0x19a)]));}catch(_0x2ad95b){}this['runPythonHealthCheck'](),this[_0x136859(0x22b)](),this[_0x136859(0x179)](),this[_0x136859(0x1f6)]();},0x1388);}[a0_0x5fb1a5(0x155)](_0x1be806){const _0x22e3b4=a0_0x5fb1a5;if(this[_0x22e3b4(0x242)])clearInterval(this[_0x22e3b4(0x242)]);if(this['driftAnalysisTimer'])clearInterval(this[_0x22e3b4(0x23d)]);if(this['trackerHeartbeat'])clearInterval(this[_0x22e3b4(0x227)]);if(this[_0x22e3b4(0x163)])clearInterval(this['healthTrendInterval']);if(this[_0x22e3b4(0x232)])this[_0x22e3b4(0x232)]['cancel']();if(this['modeResetJob'])this[_0x22e3b4(0x14e)][_0x22e3b4(0x213)]();if(this[_0x22e3b4(0x145)])this[_0x22e3b4(0x145)][_0x22e3b4(0x213)]();recorder[_0x22e3b4(0x20e)](this),pythonBridge[_0x22e3b4(0x223)](this),_0x1be806();}async['onStateChange'](_0x597c2d,_0x154eb7){const _0x429050=a0_0x5fb1a5;if(!_0x154eb7||this[_0x429050(0x23c)])return;if(_0x597c2d[_0x429050(0x15c)](_0x429050(0x12a))&&_0x597c2d[_0x429050(0x1c5)]('communicate.request')&&_0x154eb7[_0x429050(0x19a)])return;if(this[_0x429050(0x201)][_0x429050(0x197)]&&_0x597c2d===this[_0x429050(0x201)][_0x429050(0x129)]){this[_0x429050(0x1fb)](_0x154eb7[_0x429050(0x19a)]);return;}if(_0x597c2d===this['namespace']+_0x429050(0x157)){if(_0x154eb7[_0x429050(0x19a)]&&Object[_0x429050(0x1ec)](setup[_0x429050(0x233)])[_0x429050(0x15c)](_0x154eb7[_0x429050(0x19a)])){this[_0x429050(0x1bb)]=_0x154eb7['val'];if(_0x154eb7['val']===setup['SYSTEM_MODES'][_0x429050(0x137)])await recorder[_0x429050(0x11d)](this,![]);else await recorder[_0x429050(0x11d)](this,!![]);if(this[_0x429050(0x21c)]){let _0xb156d5=![],_0x2b59b0=0x0,_0x39355f=_0x429050(0x1e8);if(this[_0x429050(0x1bb)]===_0x429050(0x17f))_0xb156d5=!![],_0x2b59b0=0x168,_0x39355f='Party\x20Mode';else this[_0x429050(0x1bb)]===_0x429050(0x1d3)&&(_0xb156d5=!![],_0x2b59b0=0x5a0,_0x39355f=_0x429050(0x19d));pythonBridge[_0x429050(0x117)](this,_0x429050(0x170),{'active':_0xb156d5,'duration':_0x2b59b0,'label':_0x39355f}),await this[_0x429050(0x184)](_0x429050(0x158),{'val':JSON['stringify']({'active':_0xb156d5,'label':_0x39355f,'timestamp':Date[_0x429050(0x21b)]()}),'ack':!![]});}}if(!_0x154eb7[_0x429050(0x192)])this['setState'](_0x597c2d,{'val':this['currentSystemMode'],'ack':!![]});return;}_0x597c2d['endsWith'](_0x429050(0x1f0))&&_0x154eb7[_0x429050(0x192)]&&this[_0x429050(0x11a)](_0x154eb7['val']);if(!_0x154eb7[_0x429050(0x192)]){if(_0x597c2d[_0x429050(0x15c)]('analysis.trigger')&&_0x154eb7[_0x429050(0x19a)]){this['setState'](_0x597c2d,{'val':![],'ack':!![]}),aiAgent[_0x429050(0x24b)](this);return;}if(_0x597c2d['includes'](_0x429050(0x144))&&_0x154eb7['val']){this[_0x429050(0x172)](_0x597c2d,{'val':![],'ack':!![]});if(this[_0x429050(0x21c)])aiAgent['createDailyDigest'](this,pythonBridge);return;}if(_0x597c2d['includes']('triggerBriefing')&&_0x154eb7[_0x429050(0x19a)]){this[_0x429050(0x172)](_0x597c2d,{'val':![],'ack':!![]}),aiAgent[_0x429050(0x166)](this);return;}if(_0x597c2d[_0x429050(0x15c)]('automation.triggerAction')&&_0x154eb7[_0x429050(0x19a)]){this['setState'](_0x597c2d,{'val':![],'ack':!![]}),aiAgent[_0x429050(0x222)](this);return;}if(_0x597c2d[_0x429050(0x15c)](_0x429050(0x154))&&_0x154eb7[_0x429050(0x19a)]){this[_0x429050(0x172)](_0x597c2d,{'val':![],'ack':!![]});if(this[_0x429050(0x21c)])try{const _0x1a0632=await this[_0x429050(0x176)](_0x429050(0x185));if(_0x1a0632&&_0x1a0632[_0x429050(0x19a)]){const _0x3dc6c8=JSON[_0x429050(0x1cb)](_0x1a0632[_0x429050(0x19a)]);this['setStateAsync'](_0x429050(0x15f),{'val':_0x429050(0x1a4),'ack':!![]}),pythonBridge[_0x429050(0x117)](this,_0x429050(0x225),{'sequences':_0x3dc6c8});}}catch(_0x4d2273){}return;}if(_0x597c2d[_0x429050(0x15c)](_0x429050(0x231))&&_0x154eb7['val']){this[_0x429050(0x172)](_0x597c2d,{'val':![],'ack':!![]});if(this[_0x429050(0x21c)])try{const _0x52b42e=await this[_0x429050(0x176)](_0x429050(0x230));if(_0x52b42e&&_0x52b42e['val'])pythonBridge[_0x429050(0x117)](this,_0x429050(0x240),{'digests':JSON['parse'](_0x52b42e[_0x429050(0x19a)])});}catch(_0x1a1d23){}return;}if(_0x597c2d[_0x429050(0x15c)]('analysis.training.triggerEnergy')&&_0x154eb7[_0x429050(0x19a)]){this[_0x429050(0x172)](_0x597c2d,{'val':![],'ack':!![]});if(this[_0x429050(0x21c)])try{const _0x522398=await this['getStateAsync'](_0x429050(0x226));if(_0x522398&&_0x522398['val'])pythonBridge['send'](this,_0x429050(0x217),{'points':JSON['parse'](_0x522398['val'])});}catch(_0x4738ba){}return;}if(_0x597c2d['includes'](_0x429050(0x13b))&&_0x154eb7[_0x429050(0x19a)]){this[_0x429050(0x172)](_0x597c2d,{'val':![],'ack':!![]});if(this[_0x429050(0x21c)])try{const _0x5b6fc6=await this[_0x429050(0x176)](_0x429050(0x238));if(_0x5b6fc6&&_0x5b6fc6[_0x429050(0x19a)])pythonBridge[_0x429050(0x117)](this,'TRAIN_COMFORT',{'events':JSON[_0x429050(0x1cb)](_0x5b6fc6[_0x429050(0x19a)])});}catch(_0xb42422){}return;}if(_0x597c2d[_0x429050(0x15c)]('analysis.training.triggerTopology')&&_0x154eb7[_0x429050(0x19a)]){this[_0x429050(0x172)](_0x597c2d,{'val':![],'ack':!![]}),topology[_0x429050(0x193)](this);return;}}if(this[_0x429050(0x201)][_0x429050(0x1c1)]&&this[_0x429050(0x201)][_0x429050(0x1c1)][_0x429050(0x15c)](_0x597c2d)){await this[_0x429050(0x1a8)]();return;}const _0x215699=(this[_0x429050(0x201)]['devices']||[])[_0x429050(0x149)](_0x2ccd3a=>_0x2ccd3a['id']===_0x597c2d);if(_0x215699){const _0x22e414=await recorder['processSensorEvent'](this,_0x597c2d,_0x154eb7,_0x215699);_0x22e414&&_0x22e414[_0x429050(0x11e)]===_0x429050(0x23f)&&_0x22e414[_0x429050(0x18d)]&&this['isProVersion']&&deadMan['updateLocation'](this,_0x22e414[_0x429050(0x18d)]),(_0x215699['type']===_0x429050(0x19e)||_0x215699[_0x429050(0x11e)]===_0x429050(0x20c))&&automation[_0x429050(0x1c8)](this);}}async['protectAiMemory'](_0x31ec8e){const _0x54a1cc=a0_0x5fb1a5;if(!this[_0x54a1cc(0x1b4)]||Date[_0x54a1cc(0x21b)]()-this[_0x54a1cc(0x175)]>0x493e0)return;if(!this[_0x54a1cc(0x1b4)][_0x54a1cc(0x1c6)]||!this[_0x54a1cc(0x1b4)][_0x54a1cc(0x241)])return;try{const _0x3f9438=JSON['parse'](_0x31ec8e),_0x4f4ab8=this[_0x54a1cc(0x1b4)][_0x54a1cc(0x1c6)];let _0xda82a5=![];for(const _0x228a90 in _0x4f4ab8){if(_0x4f4ab8[_0x228a90][_0x54a1cc(0x15c)]('AI')&&_0x3f9438[_0x228a90]&&!_0x3f9438[_0x228a90][_0x54a1cc(0x15c)]('AI')){_0xda82a5=!![];break;}}_0xda82a5&&(this['log']['info'](_0x54a1cc(0x212)),await this[_0x54a1cc(0x184)]('analysis.energy.warmupTimes',{'val':JSON['stringify'](this[_0x54a1cc(0x1b4)][_0x54a1cc(0x241)]),'ack':!![]}),await this[_0x54a1cc(0x184)](_0x54a1cc(0x1f0),{'val':JSON[_0x54a1cc(0x194)](this[_0x54a1cc(0x1b4)][_0x54a1cc(0x1c6)]),'ack':!![]}));}catch(_0x1d4d21){}}async[a0_0x5fb1a5(0x1b7)](_0x355fc9){const _0x4dab3d=a0_0x5fb1a5;if(typeof _0x355fc9===_0x4dab3d(0x1cd)&&_0x355fc9[_0x4dab3d(0x16b)]){if(_0x355fc9[_0x4dab3d(0x246)]==='checkThermostats')try{const _0x7b361a=await automation[_0x4dab3d(0x131)](this);this[_0x4dab3d(0x20d)](_0x355fc9['from'],_0x355fc9[_0x4dab3d(0x246)],{'success':!![],'results':_0x7b361a},_0x355fc9[_0x4dab3d(0x142)]);}catch(_0x4c04a1){this['sendTo'](_0x355fc9['from'],_0x355fc9['command'],{'success':![],'error':_0x4c04a1[_0x4dab3d(0x16b)]},_0x355fc9['callback']);}else{if(_0x355fc9['command']===_0x4dab3d(0x133))try{const {current_temps:_0x269dc9,t_out:_0x17fb97,targets:_0x2cb682,t_forecast:_0x3709a4}=_0x355fc9[_0x4dab3d(0x16b)],_0x29fe78=[];let _0x597265={};try{const _0x45693b=await this[_0x4dab3d(0x176)]('analysis.energy.insulationScore');if(_0x45693b&&_0x45693b['val']){const _0x12fb2b=JSON['parse'](_0x45693b[_0x4dab3d(0x19a)]);_0x597265=_0x12fb2b['scores']||_0x12fb2b;}}catch(_0x490be4){}const _0x5d8656=_0x3709a4!==undefined&&_0x3709a4!==null?(_0x17fb97+_0x3709a4)/0x2:_0x17fb97;for(const [_0x56c14d,_0x21c1bf]of Object['entries'](_0x269dc9)){const _0x5b9e83=_0x2cb682[_0x56c14d]||0x15;if(_0x21c1bf<=_0x5b9e83)continue;let _0x1143d8=_0x597265[_0x56c14d]||-0.5;if(_0x1143d8>=0x0)_0x1143d8=-0.5;const _0x5ef59c=Math['abs'](_0x1143d8),_0x33d3f7=_0x21c1bf-_0x5b9e83;let _0x29ae49=Math[_0x4dab3d(0x13f)](_0x33d3f7/_0x5ef59c*0x3c);const _0x32a736=_0x21c1bf-_0x17fb97,_0x213f97=_0x21c1bf-_0x5d8656;if(_0x213f97!==0x0&&_0x32a736!==0x0){const _0x495b86=_0x32a736/_0x213f97;_0x29ae49=Math[_0x4dab3d(0x13f)](_0x29ae49*_0x495b86);}if(_0x29ae49>0xf){if(_0x29ae49>0xf0)_0x29ae49=0xf0;_0x29fe78[_0x4dab3d(0x195)]({'room':_0x56c14d,'minutes_safe':_0x29ae49,'target':_0x5b9e83,'current':_0x21c1bf,'savings_msg':_0x4dab3d(0x153)+_0x29ae49+_0x4dab3d(0x1bf)});}}_0x29fe78[_0x4dab3d(0x229)]((_0x4bea42,_0x21a546)=>_0x21a546[_0x4dab3d(0x243)]-_0x4bea42[_0x4dab3d(0x243)]),this[_0x4dab3d(0x20d)](_0x355fc9[_0x4dab3d(0x188)],_0x355fc9[_0x4dab3d(0x246)],{'success':!![],'proposals':_0x29fe78},_0x355fc9[_0x4dab3d(0x142)]);}catch(_0x1e7ed7){this[_0x4dab3d(0x20d)](_0x355fc9[_0x4dab3d(0x188)],_0x355fc9[_0x4dab3d(0x246)],{'success':![],'error':_0x1e7ed7[_0x4dab3d(0x16b)]},_0x355fc9[_0x4dab3d(0x142)]);}else{if(_0x355fc9[_0x4dab3d(0x246)]===_0x4dab3d(0x1d6))try{const _0x906307=_0x355fc9[_0x4dab3d(0x16b)]['key'],_0x7be0b6='analysis.energy.rlPenalties',_0xe01018=await this[_0x4dab3d(0x176)](_0x7be0b6);let _0x4b2890={};if(_0xe01018&&_0xe01018[_0x4dab3d(0x19a)])try{_0x4b2890=JSON[_0x4dab3d(0x1cb)](_0xe01018[_0x4dab3d(0x19a)]);}catch(_0x243979){}_0x906307&&_0x4b2890[_0x906307]?(delete _0x4b2890[_0x906307],await this['setStateAsync'](_0x7be0b6,{'val':JSON['stringify'](_0x4b2890),'ack':!![]}),this['log']['info'](_0x4dab3d(0x1c9)+_0x906307+'\x27\x20wurde\x20manuell\x20vom\x20Benutzer\x20gelÃ¶scht.'),this['sendTo'](_0x355fc9[_0x4dab3d(0x188)],_0x355fc9[_0x4dab3d(0x246)],{'success':!![]},_0x355fc9[_0x4dab3d(0x142)])):this['sendTo'](_0x355fc9['from'],_0x355fc9['command'],{'success':![],'error':'Key\x20not\x20found\x20or\x20not\x20provided'},_0x355fc9[_0x4dab3d(0x142)]);}catch(_0x3bac24){this[_0x4dab3d(0x20d)](_0x355fc9[_0x4dab3d(0x188)],_0x355fc9[_0x4dab3d(0x246)],{'success':![],'error':_0x3bac24[_0x4dab3d(0x16b)]},_0x355fc9[_0x4dab3d(0x142)]);}else{if(_0x355fc9[_0x4dab3d(0x246)]===_0x4dab3d(0x1e2))await this['setStateAsync']('analysis.automation.patternDetected',{'val':![],'ack':!![]}),await this[_0x4dab3d(0x184)](_0x4dab3d(0x18a),{'val':'','ack':!![]}),await this[_0x4dab3d(0x184)](_0x4dab3d(0x119),{'val':'','ack':!![]}),this[_0x4dab3d(0x20d)](_0x355fc9[_0x4dab3d(0x188)],_0x355fc9[_0x4dab3d(0x246)],{'success':!![]},_0x355fc9[_0x4dab3d(0x142)]);else{if(_0x355fc9['command']===_0x4dab3d(0x136)){const {targetId:_0x349e98,targetValue:_0x5e5818}=_0x355fc9[_0x4dab3d(0x16b)];await this[_0x4dab3d(0x184)]('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),await this[_0x4dab3d(0x184)](_0x4dab3d(0x18a),{'val':_0x4dab3d(0x235),'ack':!![]}),await this[_0x4dab3d(0x184)]('analysis.automation.targetId',{'val':_0x349e98,'ack':!![]}),await this[_0x4dab3d(0x184)](_0x4dab3d(0x215),{'val':String(_0x5e5818),'ack':!![]}),this[_0x4dab3d(0x20d)](_0x355fc9[_0x4dab3d(0x188)],_0x355fc9['command'],{'success':!![]},_0x355fc9[_0x4dab3d(0x142)]);}else{if(_0x355fc9[_0x4dab3d(0x246)]==='testApiKey')try{const _0xa91dbc=_0x355fc9[_0x4dab3d(0x16b)][_0x4dab3d(0x1b0)];if(!_0xa91dbc)throw new Error(_0x4dab3d(0x1e3));const _0x856459=new GoogleGenerativeAI(_0xa91dbc),_0xbdda32=_0x856459['getGenerativeModel']({'model':GEMINI_MODEL}),_0x4d4484=await _0xbdda32[_0x4dab3d(0x205)](_0x4dab3d(0x151)),_0x5aaffb=await _0x4d4484[_0x4dab3d(0x132)];if(_0x5aaffb['text']())this[_0x4dab3d(0x20d)](_0x355fc9[_0x4dab3d(0x188)],_0x355fc9[_0x4dab3d(0x246)],{'success':!![],'message':'Verbindung\x20erfolgreich!'},_0x355fc9[_0x4dab3d(0x142)]);else throw new Error(_0x4dab3d(0x1a3));}catch(_0x451331){this[_0x4dab3d(0x20d)](_0x355fc9[_0x4dab3d(0x188)],_0x355fc9['command'],{'success':![],'message':_0x451331['message']},_0x355fc9[_0x4dab3d(0x142)]);}else{if(_0x355fc9[_0x4dab3d(0x246)]==='scanDevices')try{const _0x4ef686=await scanner['scanForDevices'](this,_0x355fc9[_0x4dab3d(0x16b)]||{});this[_0x4dab3d(0x20d)](_0x355fc9[_0x4dab3d(0x188)],_0x355fc9['command'],{'success':!![],'devices':_0x4ef686},_0x355fc9[_0x4dab3d(0x142)]);}catch(_0x111841){this['sendTo'](_0x355fc9[_0x4dab3d(0x188)],_0x355fc9['command'],{'success':![],'error':_0x111841[_0x4dab3d(0x16b)]},_0x355fc9[_0x4dab3d(0x142)]);}else{if(_0x355fc9['command']===_0x4dab3d(0x19c))try{const {matrix:_0x1fc9f4}=_0x355fc9[_0x4dab3d(0x16b)],_0x1129ea=await this[_0x4dab3d(0x176)](_0x4dab3d(0x1a2));if(_0x1129ea&&_0x1129ea[_0x4dab3d(0x19a)]){const _0x1106ce=JSON[_0x4dab3d(0x1cb)](_0x1129ea['val']);_0x1106ce['matrix']=_0x1fc9f4,_0x1106ce[_0x4dab3d(0x1f2)]=Date[_0x4dab3d(0x21b)](),await this[_0x4dab3d(0x184)](_0x4dab3d(0x1a2),{'val':JSON['stringify'](_0x1106ce),'ack':!![]}),pythonBridge['send'](this,_0x4dab3d(0x245),_0x1106ce);}this[_0x4dab3d(0x20d)](_0x355fc9[_0x4dab3d(0x188)],_0x355fc9[_0x4dab3d(0x246)],{'success':!![]},_0x355fc9[_0x4dab3d(0x142)]);}catch(_0x5a4c81){this[_0x4dab3d(0x189)][_0x4dab3d(0x1ae)](_0x5a4c81);}else{if(_0x355fc9[_0x4dab3d(0x246)]==='getLtmData')this[_0x4dab3d(0x20d)](_0x355fc9[_0x4dab3d(0x188)],_0x355fc9['command'],{'success':!![],'dailyDigests':this[_0x4dab3d(0x24f)]||[],'analysisHistory':this[_0x4dab3d(0x1db)]||[]},_0x355fc9['callback']);else{if(_0x355fc9[_0x4dab3d(0x246)]===_0x4dab3d(0x1ee)){const _0x3cc6bd=this[_0x4dab3d(0x24f)][_0x4dab3d(0x16e)],_0x4f516c=new Array(0x18)['fill'](0x0),_0x3808a7=new Date()[_0x4dab3d(0x239)](0x0,0x0,0x0,0x0);this[_0x4dab3d(0x11f)]&&this[_0x4dab3d(0x11f)][_0x4dab3d(0x20b)](_0x342c3e=>{const _0x3643e7=_0x4dab3d;if(_0x342c3e[_0x3643e7(0x15b)]>=_0x3808a7){const _0x4fdedb=new Date(_0x342c3e[_0x3643e7(0x15b)])[_0x3643e7(0x247)]();if(_0x4fdedb>=0x0&&_0x4fdedb<0x18)_0x4f516c[_0x4fdedb]++;}});let _0x578471=![],_0x27a8c0='',_0x599aca='',_0x364625='';try{const _0x458c83=await this[_0x4dab3d(0x176)](_0x4dab3d(0x24d));if(_0x458c83&&_0x458c83[_0x4dab3d(0x19a)]){_0x578471=!![];const _0x1a49e7=await this[_0x4dab3d(0x176)]('analysis.automation.description');_0x27a8c0=_0x1a49e7?_0x1a49e7[_0x4dab3d(0x19a)]:'';const _0x1bc668=await this[_0x4dab3d(0x176)]('analysis.automation.targetId');_0x599aca=_0x1bc668?_0x1bc668[_0x4dab3d(0x19a)]:'';const _0x3bcba5=await this['getStateAsync'](_0x4dab3d(0x215));_0x364625=_0x3bcba5?_0x3bcba5[_0x4dab3d(0x19a)]:'';}}catch(_0x20b577){}const _0x40a4c8=await this[_0x4dab3d(0x16d)](),_0x45306f=(this[_0x4dab3d(0x201)][_0x4dab3d(0x171)]||[])[_0x4dab3d(0x183)](_0x9f2d92=>_0x9f2d92[_0x4dab3d(0x1d4)]),_0x2ffaba=_0x40a4c8&&_0x45306f;this['sendTo'](_0x355fc9[_0x4dab3d(0x188)],_0x355fc9[_0x4dab3d(0x246)],{'success':!![],'eventHistory':this[_0x4dab3d(0x11f)][_0x4dab3d(0x24c)](0x0,0xf),'stats':{'digestCount':_0x3cc6bd,'isPresent':this[_0x4dab3d(0x11c)],'hourlyActivity':_0x4f516c,'solarActive':_0x2ffaba},'automation':{'detected':_0x578471,'description':_0x27a8c0,'targetId':_0x599aca,'targetValue':_0x364625}},_0x355fc9['callback']);}else{if(_0x355fc9[_0x4dab3d(0x246)]===_0x4dab3d(0x130)){const _0x46c699=await this[_0x4dab3d(0x182)](_0x4dab3d(0x138),_0x4dab3d(0x14d)),_0x38b234=[];if(_0x46c699)for(const _0xc59317 in _0x46c699){const _0x2647e0=_0x46c699[_0xc59317],_0x269f22=(_0x2647e0[_0x4dab3d(0x14f)]&&typeof _0x2647e0[_0x4dab3d(0x14f)][_0x4dab3d(0x1be)]==='object'?_0x2647e0[_0x4dab3d(0x14f)]['name']['de']:_0x2647e0['common']['name'])||_0x2647e0[_0x4dab3d(0x14f)][_0x4dab3d(0x1be)];_0x38b234[_0x4dab3d(0x195)]({'id':_0xc59317,'name':_0x269f22});}const _0x428ab4=await this[_0x4dab3d(0x182)]('enum.rooms.*',_0x4dab3d(0x14d)),_0x3738de=[];if(_0x428ab4)for(const _0x4158d2 in _0x428ab4){const _0x178f5e=_0x428ab4[_0x4158d2],_0x2b21f4=(_0x178f5e[_0x4dab3d(0x14f)]&&typeof _0x178f5e['common'][_0x4dab3d(0x1be)]===_0x4dab3d(0x1cd)?_0x178f5e[_0x4dab3d(0x14f)][_0x4dab3d(0x1be)]['de']:_0x178f5e[_0x4dab3d(0x14f)][_0x4dab3d(0x1be)])||_0x4158d2['split']('.')[_0x4dab3d(0x1a6)]();_0x3738de[_0x4dab3d(0x195)](_0x2b21f4);}this[_0x4dab3d(0x20d)](_0x355fc9[_0x4dab3d(0x188)],_0x355fc9[_0x4dab3d(0x246)],{'success':!![],'enums':_0x38b234,'rooms':_0x3738de},_0x355fc9['callback']);}else{if(_0x355fc9[_0x4dab3d(0x246)]===_0x4dab3d(0x1ca))try{let _0x2de9b7=_0x4dab3d(0x174),_0x5bb179=_0x4dab3d(0x12e);if(this[_0x4dab3d(0x201)]['useWeather']){const _0x3f5d7a=await recorder[_0x4dab3d(0x1d5)](this);_0x2de9b7=_0x3f5d7a!==null?_0x3f5d7a+'Â°C':'Daten\x20nicht\x20verfÃ¼gbar';}if(this[_0x4dab3d(0x201)][_0x4dab3d(0x220)]){const _0x556a42=await this[_0x4dab3d(0x156)]('system.adapter.'+this[_0x4dab3d(0x201)][_0x4dab3d(0x220)]);_0x5bb179=_0x556a42?_0x4dab3d(0x18f):_0x4dab3d(0x1d9);}this[_0x4dab3d(0x20d)](_0x355fc9[_0x4dab3d(0x188)],_0x355fc9[_0x4dab3d(0x246)],{'success':!![],'weather':_0x2de9b7,'calendar':_0x5bb179},_0x355fc9[_0x4dab3d(0x142)]);}catch(_0x3d380a){this[_0x4dab3d(0x20d)](_0x355fc9['from'],_0x355fc9['command'],{'success':![],'error':_0x3d380a[_0x4dab3d(0x16b)]},_0x355fc9[_0x4dab3d(0x142)]);}else{if(_0x355fc9[_0x4dab3d(0x246)]===_0x4dab3d(0x118))try{const _0x2c0d1a=_0x355fc9[_0x4dab3d(0x16b)][_0x4dab3d(0x140)],_0xad1cb1=await this[_0x4dab3d(0x1a5)](_0x2c0d1a+_0x4dab3d(0x181));let _0x5b93c4=[];if(_0xad1cb1&&_0xad1cb1[_0x4dab3d(0x19a)]){const _0x32847f=JSON[_0x4dab3d(0x1cb)](_0xad1cb1['val']),_0x479ebf=new Set();Array[_0x4dab3d(0x147)](_0x32847f)&&_0x32847f[_0x4dab3d(0x20b)](_0x169849=>{const _0x2ccd4c=_0x4dab3d;if(_0x169849[_0x2ccd4c(0x13c)])_0x479ebf[_0x2ccd4c(0x187)](_0x169849[_0x2ccd4c(0x13c)]);else{if(_0x169849[_0x2ccd4c(0x1d2)])_0x479ebf['add'](_0x169849[_0x2ccd4c(0x1d2)]);}}),_0x5b93c4=Array[_0x4dab3d(0x188)](_0x479ebf)['sort']();}if(_0x5b93c4[_0x4dab3d(0x16e)]===0x0)_0x5b93c4=['Standard'];this[_0x4dab3d(0x20d)](_0x355fc9[_0x4dab3d(0x188)],_0x355fc9[_0x4dab3d(0x246)],{'success':!![],'names':_0x5b93c4},_0x355fc9['callback']);}catch(_0x1e0f04){this[_0x4dab3d(0x20d)](_0x355fc9[_0x4dab3d(0x188)],_0x355fc9['command'],{'success':![],'error':_0x1e0f04[_0x4dab3d(0x16b)]},_0x355fc9['callback']);}else{if(_0x355fc9[_0x4dab3d(0x246)]===_0x4dab3d(0x1fe))try{await setup[_0x4dab3d(0x21d)](this,_0x4dab3d(0x162),![],![]),this[_0x4dab3d(0x20d)](_0x355fc9[_0x4dab3d(0x188)],_0x355fc9[_0x4dab3d(0x246)],{'success':!![],'message':'Gesendet'},_0x355fc9[_0x4dab3d(0x142)]);}catch(_0x3b8bf2){this[_0x4dab3d(0x189)][_0x4dab3d(0x1ae)]('Notification\x20Test\x20Failed:\x20'+_0x3b8bf2['message']),this['sendTo'](_0x355fc9[_0x4dab3d(0x188)],_0x355fc9[_0x4dab3d(0x246)],{'success':![],'message':_0x4dab3d(0x177)+_0x3b8bf2[_0x4dab3d(0x16b)]},_0x355fc9['callback']);}}}}}}}}}}}}}}}}async[a0_0x5fb1a5(0x200)](){const _0x3454b8=a0_0x5fb1a5;try{const _0x4250d0=await this[_0x3454b8(0x176)](setup[_0x3454b8(0x1e7)]);_0x4250d0&&_0x4250d0['val']&&Object['values'](setup[_0x3454b8(0x233)])[_0x3454b8(0x15c)](_0x4250d0['val'])?this[_0x3454b8(0x1bb)]=_0x4250d0[_0x3454b8(0x19a)]:(this[_0x3454b8(0x1bb)]=setup[_0x3454b8(0x233)]['NORMAL'],await this['setStateAsync'](setup[_0x3454b8(0x1e7)],{'val':setup[_0x3454b8(0x233)][_0x3454b8(0x1f8)],'ack':!![]}));}catch(_0x3bb6ee){this[_0x3454b8(0x1bb)]=setup['SYSTEM_MODES'][_0x3454b8(0x1f8)];}}async[a0_0x5fb1a5(0x1a8)](){const _0x57d5dc=a0_0x5fb1a5;try{const _0x5b94d4=this['config']['presenceDevices']||[];let _0x5c13cf=![];const _0x41d5ed=[];for(const _0x979ca0 of _0x5b94d4){try{const _0x4e4356=await this[_0x57d5dc(0x1a5)](_0x979ca0);_0x4e4356&&(_0x4e4356[_0x57d5dc(0x19a)]===!![]||_0x4e4356[_0x57d5dc(0x19a)]===_0x57d5dc(0x135)||_0x4e4356[_0x57d5dc(0x19a)]===0x1)&&(_0x5c13cf=!![],_0x41d5ed[_0x57d5dc(0x195)](_0x979ca0));}catch(_0x22faf9){}}return await this[_0x57d5dc(0x184)]('system.presenceWho',{'val':_0x41d5ed[_0x57d5dc(0x18b)](',\x20'),'ack':!![]}),_0x5c13cf&&(this[_0x57d5dc(0x1a7)]&&(this['log'][_0x57d5dc(0x1f3)](_0x57d5dc(0x17e)),recorder['abortExitTimer'](this)),!this['isPresent']&&this[_0x57d5dc(0x1bb)]===setup[_0x57d5dc(0x233)][_0x57d5dc(0x1f8)]&&await recorder[_0x57d5dc(0x11d)](this,!![])),_0x5c13cf;}catch(_0x57c8ff){return![];}}async[a0_0x5fb1a5(0x198)](){const _0x355452=a0_0x5fb1a5;this['log'][_0x355452(0x1c4)]('ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...'),await aiAgent[_0x355452(0x24b)](this),this[_0x355452(0x1f6)](),this['triggerGaitAnalysis'](),this[_0x355452(0x179)]();}async[a0_0x5fb1a5(0x16d)](){const _0x25c5f8=a0_0x5fb1a5,_0xd2478a=[_0x25c5f8(0x19b),_0x25c5f8(0x210),_0x25c5f8(0x23b)],_0x5c3b71=[_0x25c5f8(0x173),_0x25c5f8(0x20f),_0x25c5f8(0x124)];for(const _0x124a67 of _0xd2478a){for(const _0x238d69 of _0x5c3b71){try{const _0x2557c8=_0x124a67+'.'+_0x238d69,_0x31d92f=await this[_0x25c5f8(0x1a5)](_0x2557c8);if(_0x31d92f&&_0x31d92f[_0x25c5f8(0x19a)]){const _0x55c259=String(_0x31d92f['val'])[_0x25c5f8(0x1fd)]();if(_0x55c259[_0x25c5f8(0x15c)](_0x25c5f8(0x1c3))||_0x55c259[_0x25c5f8(0x15c)]('sunny')||_0x55c259['includes'](_0x25c5f8(0x214))||_0x55c259['includes'](_0x25c5f8(0x204))||_0x55c259[_0x25c5f8(0x15c)](_0x25c5f8(0x249)))return!![];}}catch(_0x22a4d1){}}}return![];}[a0_0x5fb1a5(0x22b)](){const _0xdc88af=a0_0x5fb1a5;if(!this[_0xdc88af(0x21c)])return;try{this[_0xdc88af(0x146)](_0xdc88af(0x185),(_0x1540bc,_0x29f195)=>{const _0x2c7f14=_0xdc88af;_0x29f195&&_0x29f195['val']&&pythonBridge[_0x2c7f14(0x117)](this,_0x2c7f14(0x180),{'sequences':JSON[_0x2c7f14(0x1cb)](_0x29f195[_0x2c7f14(0x19a)])});});}catch(_0x4d5881){}}async[a0_0x5fb1a5(0x179)](){const _0x4757b5=a0_0x5fb1a5;if(!this[_0x4757b5(0x21c)])return;try{const _0x37141f=await recorder[_0x4757b5(0x1d5)](this);if(_0x37141f===null)return;const _0x1e32bd={},_0x342081={},_0x44627f=this[_0x4757b5(0x201)][_0x4757b5(0x171)]||[];for(const _0x1f4838 of _0x44627f){if(_0x1f4838[_0x4757b5(0x11e)]==='temperature'&&_0x1f4838[_0x4757b5(0x18d)]){const _0x1e1a2d=this[_0x4757b5(0x206)][_0x1f4838['id']];if(_0x1e1a2d!==undefined)_0x1e32bd[_0x1f4838['location']]=_0x1e1a2d;if(_0x1f4838[_0x4757b5(0x1d4)])_0x342081[_0x1f4838[_0x4757b5(0x18d)]]=!![];}}const _0x5aa617=await this[_0x4757b5(0x16d)]();let _0x57b1c3={};try{const _0x157d39=await this[_0x4757b5(0x176)](_0x4757b5(0x1ad));if(_0x157d39&&_0x157d39['val'])_0x57b1c3=JSON['parse'](_0x157d39[_0x4757b5(0x19a)]);}catch(_0x5c16b9){}Object[_0x4757b5(0x16a)](_0x1e32bd)[_0x4757b5(0x16e)]>0x0&&(pythonBridge[_0x4757b5(0x117)](this,_0x4757b5(0x19f),{'current_temps':_0x1e32bd,'t_out':_0x37141f,'is_sunny':_0x5aa617,'solar_flags':_0x342081,'warmup_targets':_0x57b1c3}),pythonBridge['send'](this,_0x4757b5(0x13d),{'current_temps':_0x1e32bd,'t_out':_0x37141f,'targets':{}}));}catch(_0x7816db){}}[a0_0x5fb1a5(0x1f6)](){const _0x5ec268=a0_0x5fb1a5;if(!this[_0x5ec268(0x236)]||this[_0x5ec268(0x236)]['length']===0x0)return;const _0x49e0e8=new Array(0x60)['fill'](0x0),_0x31240d=new Date()[_0x5ec268(0x239)](0x0,0x0,0x0,0x0);this[_0x5ec268(0x236)]['forEach'](_0x980ba8=>{const _0xdd2c1e=_0x5ec268,_0x408114=new Date(_0x980ba8['timestamp']);if(_0x408114[_0xdd2c1e(0x1dd)]()>=_0x31240d){const _0x4b9448=_0x408114[_0xdd2c1e(0x247)](),_0x1f063e=_0x408114['getMinutes'](),_0x1b5e74=_0x4b9448*0x4+Math['floor'](_0x1f063e/0xf);if(_0x1b5e74>=0x0&&_0x1b5e74<0x60)_0x49e0e8[_0x1b5e74]++;}}),this[_0x5ec268(0x184)]('analysis.health.todayVector',{'val':JSON['stringify'](_0x49e0e8),'ack':!![]});}['runPythonHealthCheck'](){const _0x49e1ac=a0_0x5fb1a5;if(!this[_0x49e1ac(0x24f)]||this[_0x49e1ac(0x24f)][_0x49e1ac(0x16e)]<0x2)return;const _0x28f921=this['dailyDigests'][_0x49e1ac(0x134)](_0x5b35e4=>{const _0x24a1f5=_0x49e1ac,_0x13070a=(_0x5b35e4[_0x24a1f5(0x14c)]||'')[_0x24a1f5(0x1fd)]();return ACTIVITY_LEVEL_MAP[_0x13070a]||0x32;});pythonBridge[_0x49e1ac(0x117)](this,_0x49e1ac(0x1b9),{'values':_0x28f921,'tag':_0x49e1ac(0x199)});}async['handleInfrasound'](_0x3de02e){const _0x244ed9=a0_0x5fb1a5;if(_0x3de02e==null||typeof _0x3de02e!=='number')return;if(this['infrasoundLocked'])return;if(this[_0x244ed9(0x201)]['infrasoundArmingId']){const _0xd372c6=await this[_0x244ed9(0x1a5)](this[_0x244ed9(0x201)][_0x244ed9(0x221)]);if(_0xd372c6&&!_0xd372c6[_0x244ed9(0x19a)])return;}const _0x24fb4e=this[_0x244ed9(0x201)][_0x244ed9(0x161)]||0.04;Math[_0x244ed9(0x121)](_0x3de02e)>=_0x24fb4e&&(this[_0x244ed9(0x189)][_0x244ed9(0x123)](_0x244ed9(0x218)+_0x3de02e+'\x20hPa\x20(Limit:\x20'+_0x24fb4e+')'),await this['setStateAsync'](_0x244ed9(0x18c),{'val':!![],'ack':!![]}),this[_0x244ed9(0x244)](_0x3de02e),this[_0x244ed9(0x21d)](_0x244ed9(0x1ed)+_0x3de02e+_0x244ed9(0x1d7)),this[_0x244ed9(0x1eb)]=!![],setTimeout(()=>{const _0x445b71=_0x244ed9;this[_0x445b71(0x1eb)]=![];},0x2710));}async['triggerInfrasoundCorrelation'](_0x40e3bc){const _0x4c7c53=a0_0x5fb1a5,_0x437cb8=Date[_0x4c7c53(0x21b)](),_0x1a6021=this[_0x4c7c53(0x201)]['devices']||[];setTimeout(async()=>{const _0x56c60d=_0x4c7c53;let _0x4656d2=null,_0x4fa7b4=_0x56c60d(0x167);const _0x3e5a60=[],_0x190c70=_0x1a6021[_0x56c60d(0x1df)](_0x4f6f20=>_0x4f6f20[_0x56c60d(0x11e)]&&(_0x4f6f20[_0x56c60d(0x11e)][_0x56c60d(0x15c)]('window')||_0x4f6f20[_0x56c60d(0x11e)][_0x56c60d(0x15c)]('door')||_0x4f6f20[_0x56c60d(0x11e)][_0x56c60d(0x15c)](_0x56c60d(0x1e0))||_0x4f6f20['type'][_0x56c60d(0x15c)](_0x56c60d(0x24a)))||_0x4f6f20[_0x56c60d(0x23e)]&&(_0x4f6f20[_0x56c60d(0x23e)][_0x56c60d(0x15c)](_0x56c60d(0x13e))||_0x4f6f20['role'][_0x56c60d(0x15c)](_0x56c60d(0x12f))));for(const _0x58b30d of _0x190c70){try{const _0x86ef80=await this[_0x56c60d(0x1a5)](_0x58b30d['id']);if(_0x86ef80){if(_0x86ef80['ts']>=_0x437cb8-0x7d0){_0x4656d2=_0x58b30d[_0x56c60d(0x1be)]||_0x58b30d['id'],_0x4fa7b4=_0x56c60d(0x1b3)+_0x4656d2;break;}}}catch(_0x274ca3){}}const _0x4f2bdd={'timestamp':_0x437cb8,'pressure':_0x40e3bc,'isMatch':!!_0x4656d2,'explanation':_0x4fa7b4};try{const _0x6a46d0=await this[_0x56c60d(0x176)](_0x56c60d(0x1f4));let _0x1bbf2a=[];if(_0x6a46d0&&_0x6a46d0[_0x56c60d(0x19a)])_0x1bbf2a=JSON[_0x56c60d(0x1cb)](_0x6a46d0[_0x56c60d(0x19a)]);_0x1bbf2a[_0x56c60d(0x139)](_0x4f2bdd);if(_0x1bbf2a[_0x56c60d(0x16e)]>0x14)_0x1bbf2a=_0x1bbf2a[_0x56c60d(0x24c)](0x0,0x14);await this[_0x56c60d(0x184)](_0x56c60d(0x1f4),{'val':JSON[_0x56c60d(0x194)](_0x1bbf2a),'ack':!![]}),this[_0x56c60d(0x189)][_0x56c60d(0x1f3)](_0x56c60d(0x12c)+(!!_0x4656d2?_0x56c60d(0x228):_0x56c60d(0x11b)));}catch(_0x120d47){this[_0x56c60d(0x189)][_0x56c60d(0x1ae)]('[Forensics]\x20Save\x20failed:\x20'+_0x120d47[_0x56c60d(0x16b)]);}},0x1388);}['sendNotification'](_0xd1902c){const _0x145932=a0_0x5fb1a5;this[_0x145932(0x201)][_0x145932(0x13a)]&&this[_0x145932(0x201)][_0x145932(0x126)]&&this[_0x145932(0x20d)](this[_0x145932(0x201)]['notifyPushoverInstance'],_0x145932(0x117),{'message':_0xd1902c,'title':_0x145932(0x1bd),'priority':0x1}),this[_0x145932(0x201)]['notifyTelegramEnabled']&&this[_0x145932(0x201)][_0x145932(0x18e)]&&this[_0x145932(0x20d)](this['config'][_0x145932(0x18e)],_0x145932(0x117),{'text':_0xd1902c});}}if(require['main']!==module)module[a0_0x5fb1a5(0x122)]=_0x2d9feb=>new CogniLiving(_0x2d9feb);else new CogniLiving();