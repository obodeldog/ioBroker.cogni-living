const a0_0x1b649b=a0_0x4c70;(function(_0x18411e,_0x203daf){const _0x9bb054=a0_0x4c70,_0x41cddd=_0x18411e();while(!![]){try{const _0x42f227=-parseInt(_0x9bb054(0x119))/0x1+parseInt(_0x9bb054(0xdd))/0x2*(parseInt(_0x9bb054(0x188))/0x3)+-parseInt(_0x9bb054(0x1bb))/0x4*(parseInt(_0x9bb054(0x127))/0x5)+parseInt(_0x9bb054(0xee))/0x6*(parseInt(_0x9bb054(0x1a7))/0x7)+-parseInt(_0x9bb054(0x151))/0x8*(parseInt(_0x9bb054(0x1ae))/0x9)+parseInt(_0x9bb054(0x150))/0xa+-parseInt(_0x9bb054(0x205))/0xb;if(_0x42f227===_0x203daf)break;else _0x41cddd['push'](_0x41cddd['shift']());}catch(_0x539df3){_0x41cddd['push'](_0x41cddd['shift']());}}}(a0_0x3508,0xe4299));const a0_0x5d5d33=(function(){let _0xf2f339=!![];return function(_0x2a5cf4,_0x34ef6a){const _0x2293df=_0xf2f339?function(){if(_0x34ef6a){const _0x49b675=_0x34ef6a['apply'](_0x2a5cf4,arguments);return _0x34ef6a=null,_0x49b675;}}:function(){};return _0xf2f339=![],_0x2293df;};}()),a0_0x1ae1c3=a0_0x5d5d33(this,function(){const _0x1ab922=a0_0x4c70;return a0_0x1ae1c3['toString']()['search'](_0x1ab922(0x10d))[_0x1ab922(0x11f)]()['constructor'](a0_0x1ae1c3)[_0x1ab922(0x13b)](_0x1ab922(0x10d));});a0_0x1ae1c3();'use strict';const utils=require('@iobroker/adapter-core'),{GoogleGenerativeAI}=require(a0_0x1b649b(0x196)),{spawn}=require(a0_0x1b649b(0xcf)),path=require(a0_0x1b649b(0x19c)),fs=require('fs'),installer=require('./lib/installer'),scanner=require(a0_0x1b649b(0x1d9)),schedulers=require(a0_0x1b649b(0x1c7)),HISTORY_MAX_SIZE=0x32,RAW_LOG_MAX_SIZE=0x9c4,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL=a0_0x1b649b(0xbb),SEQUENCE_TIMEOUT_MS=0x5*0x3c*0x3e8,MAX_TRAINING_SET_SIZE=0x1f4,THERMO_LOG_SIZE=0x3e8,EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,LTM_DP_RAW_LOG='LTM.rawEventLog',LTM_DP_DAILY_DIGESTS=a0_0x1b649b(0x22b),LTM_DP_STATUS=a0_0x1b649b(0x10b),LTM_DP_TRIGGER_DIGEST=a0_0x1b649b(0x1ed),LTM_DP_BASELINE_STATUS=a0_0x1b649b(0x117),LTM_DP_DRIFT_CHANNEL=a0_0x1b649b(0xb5),LTM_DP_DRIFT_STATUS=a0_0x1b649b(0xb3),LTM_DP_DRIFT_DETAILS=a0_0x1b649b(0xe6),LTM_DP_DRIFT_LAST_CHECK=a0_0x1b649b(0xb4),SYSTEM_DP_MODE=a0_0x1b649b(0xc1),SYSTEM_MODES={'NORMAL':a0_0x1b649b(0x15e),'VACATION':a0_0x1b649b(0x152),'PARTY':a0_0x1b649b(0x1d0),'GUEST':a0_0x1b649b(0x177)},AUTO_RESET_MODES=[SYSTEM_MODES[a0_0x1b649b(0x1c5)],SYSTEM_MODES[a0_0x1b649b(0x18e)]],PERSONA_MAPPING={'generic':a0_0x1b649b(0x22e),'senior_aal':a0_0x1b649b(0x236),'family':a0_0x1b649b(0x19e),'single_comfort':a0_0x1b649b(0x12c),'security':a0_0x1b649b(0x1a0)},ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};let activeSequence=[],sequenceTimer=null;async function initZombies(_0x17411a){const _0x355f90=a0_0x1b649b;try{const _0x1b08bd=[_0x355f90(0xde),_0x355f90(0xd5)];for(const _0xa49eec of _0x1b08bd){try{const _0x4eae9b=await _0x17411a[_0x355f90(0xca)](_0xa49eec);if(_0x4eae9b)await _0x17411a[_0x355f90(0xbf)](_0xa49eec);}catch(_0x122fc0){}}}catch(_0x35eb01){}}function a0_0x3508(){const _0x457d1c=['Sequences','activityLevel','onUnload','Keine\x20Wetterdaten\x20verfÃ¼gbar.','Fokus\x20auf\x20Komfort.','heating','system.isPresent','exitGraceTimer','automationProposal','triggerBriefing','analysis.isAlert','longitude','[PYTHON]\x20','checkAndInstall','ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20','ANALYZE_TREND','json','application/json','systemUUID','search','getCalendarNames','schalter','heizung','dependencyInstallInProgress','find','Aktiv\x20(','getOverviewData','insulation','geminiApiKey','analysis.training.triggerTopology','scanForDevices','Last\x20raw\x20event','analysis.alertReason','analysis.training.triggerSecurity','Gemini\x20Error:\x20','Trigger\x20Analysis','dimmer','events.lastEvent','now','Error\x20launching\x20Python:\x20','15232460cTKphW','152dUmsHq','vacation','Unknown','push','analysis.automation.targetId','getFullYear','LTM.trainingData.thermodynamics','.\x20EVENTS:\x20','Lernphase\x20(','Training\x20Status','ANOMALY','analysis.automation.detectedPatterns','analysis.training.triggerHealth','normal','ðŸ›‹ï¸\x20Triggering\x20Comfort\x20Analysis\x20(Pattern\x20Mining)...','forEach','licenseKey','exports','User\x20dismissed\x20automation\x20proposal.','ready','Topology\x20Matrix','Trigger\x20Action','useWeather','.\x20SYSTEM_MODE:\x20','System','switch','scanDevices','getStateAsync','driftDetails','main','indicator','python_service','TRAIN_HEALTH','.Current.Temperature','baselineDrift','ltmLtbWindowDays','Digest','[RECORDER]\x20Error:\x20','guest','window','setState','latitude','LTM.trainingData.sequences','exitTimer','TRAIN_COMFORT','setupBriefingScheduler','PYTHON_EXE','Activity-Level','button','values','Trigger\x20Briefing','[RESULT]','analysis.automation.triggerAction','stateChange','onMessage','4546146VMXaQz','analysis.activitySummary','val','indicator.alarm','\x20Tage)','Raw\x20Log','GUEST','eventHistory','toISOString','setForeignStateAsync','analysis.training.triggerComfort','analysis.automation.autoApply','PONG','calendarInstance','@google/generative-ai','daswetter','KI-Modell\x20nicht\x20initialisiert','detected','PREDICT_ENERGY','Briefing\x20Error:\x20','path','genAI','Fokus\x20auf\x20Familienroutinen.','ðŸ“\x20Feedback\x20received:\x20','PRIORITÃ„T:\x20Sicherheit.','.forecast.current.temp','analysis.health.gaitSpeed','analysis.health.isAnomaly','Energy\x20Intelligence','testContext','confidence','584206qgeSxH','NORMAL','cogni-living','config','analysis.training','telegram','TOPOLOGY_RESULT','10629uWvqdV','extendObjectAsync','Activity\x20Summary','simulateButler','Kein\x20API\x20Key!','Insulation\x20Score','pop','generic','presenceDevices','ANALYZE_GAIT','state','Trend','ðŸ§ª\x20Simulating\x20Butler\x20Proposal:\x20','24hVJMRA','temperature','analysis.training.triggerEnergy','includes','cogni-living\x20adapter\x20starting\x20(v','âš ï¸\x20ALARM:\x20','Alert\x20Reason','floor','\x20new\x20patterns.','text','PARTY','alertReason','./lib/scheduler','analysis.energy.heatingScore','bind','COMFORT_RESULT','ltmStbWindowDays','log','N/A\x20(Learning)','round','trim','party','fill','instance','unload','Last\x20Check','stringify','Unbekannt','Kein\x20API\x20Key.','isProVersion','./lib/scanner','analysis.security.currentThreshold','getGenerativeModel','Auto\x20Apply','Train\x20Security','rawEventLog','currentSystemMode','Trend\x20Value','command','location','system.presenceWho','setStateAsync','callback','Pattern\x20Detected','useCalendar','substring','analysis.security.lastScore','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','payload','bewegung','LTM.triggerDailyDigest','Topology\x20Error:\x20','testApiKey','systemConfig','description','presence','common','timestamp','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','slice','toLowerCase','tÃ¼r','.NextHours.Location_1.Day_1.current.temp_value','warn','Train\x20Energy','details','type','reason','Gemini\x20Init\x20Error:\x20','weatherInstance','Restoring\x20sensor\x20cache...','getForeignObjectAsync','cancel','analysis.training.status','27620626HmpZtL','existsSync','ack','error','getEnums','analysis.automation.description',')\x20-\x20SAFE\x20BOOT','Started...','status','ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','analysis.security.topologyMatrix','isAlert','Today\x20Vector\x20(15m)','VACATION','AI\x20Training','Current\x20Threshold','BUTLER\x20Execution\x20Error:\x20','ANALYZE_HEALTH','Err:\x20','change_percent','analysis.analysisHistory','ðŸ›‹ï¸\x20BUTLER:\x20Found\x20','analysis.trigger','temperatur','openweathermap','python3','N/A','getForeignStateAsync','\x0aSTB:\x20','sensorLastValues','join','analysis.triggerBriefing','analysis.security.lastCheck','keys','weatherunderground','enum.functions.*','.\x20EMERGENCY:\x20','LTM.dailyDigests','modeResetJob','isExit','Analysiere\x20ausgewogen.','analysis.security','light','subscribeForeignStatesAsync','generateContent','analysisHistory','value','filter','PRIORITÃ„T:\x20Gesundheit/AAL.','toLocaleTimeString','info','contact','setupDriftAnalysisScheduler','subscribeStates','getHours','stdout','LTM','SECURITY_RESULT','diagnosis','TRAINING_COMPLETE','setObjectNotExistsAsync','.communicate.request','\x20=\x20','.\x20KONTEXT:\x20','HEALTH_RESULT','analysisTimer','Event\x20History','geminiModel','is_anomaly','System\x20Mode','Health\x20Analysis','analysis.energy.forecast','kontakt','Â°C,\x20','LTM.driftAnalysis.baselineDrift','LTM.driftAnalysis.lastCheck','LTM.driftAnalysis','Anomaly\x20Score','debug','logDuplicates','Target\x20ID','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','models/gemini-flash-latest','ðŸ§ \x20Triggering\x20Security\x20Training...','summary','analysis.automation.patternDetected','delObjectAsync','pythonProcess','system.mode','rating','Detected\x20Patterns','Daily\x20Digests','write','.Current.WeatherText','outdoorSensorId','ANALYZE_SEQUENCE','analysis.energy.insulationScore','getObjectAsync','getForeignObjectsAsync','date','occupancy','âš ï¸\x20SECURITY\x20ALARM:\x20','child_process','Adapter','No\x20instance','success','from','isPresent','events.history_debug_00','Sec-Training\x20started...','sendTo','onStateChange','replace','Build\x20Topology','system.config','unshift','2SwTlvk','analysis.history_debug_00','dailyDigests','Missing\x20data','devices','events.history','klima','getMinutes','onReady','LTM.driftAnalysis.driftDetails','dismissAutomation','string','channel','analysis.health.trendValue','minDaysForBaseline','Skipped\x20(No\x20AI\x20or\x20Data)','stdin','114UCUhjB','ENERGY_PREDICT_RESULT','Training\x20Error:\x20','split','toFixed','isGracePeriodActive','name','targetId','analysis.health','getTime','targetValue','ltmJob','ðŸ›¡ï¸\x20SECURITY\x20CHECK:\x20Score\x20','Description','[LOG]','Gemini\x20AI\x20initialized.','.\x20ANWESEND:\x20','lastAlertState','TRAIN_SECURITY','splice','response','Keine\x20Termine.','notifyTelegramInstance','analysis.health.trendDiagnosis','inactivityThresholdHours','ðŸš€\x20Starting\x20NUUKANNI\x20Logic\x20(v0.12.10)...','submitFeedback','analysisInterval','Heating\x20Score','LTM.processingStatus','.\x20WETTER:\x20','(((.+)+)+)+$','parse','some','city','Who\x20is\x20present?','length','ðŸ•¸ï¸\x20Building\x20Topology\x20Matrix...','message','GAIT_RESULT','WiFi\x20Presence\x20detected.','LTM.baselineStatus','analysis.health.lastCheck','887146jjJAiM','livingContext','analysis.health.todayVector','OK:\x20','automation.triggerAction','number','toString','enum','briefingJob','analysis.automation.targetValue','boolean','driftAnalysisTimer','object','Gait\x20Speed\x20Trend','224355ZhlzwU'];a0_0x3508=function(){return _0x457d1c;};return a0_0x3508();}function a0_0x4c70(_0x4dd8f7,_0x28c5b4){const _0x5bd5a2=a0_0x3508();return a0_0x4c70=function(_0x1ae1c3,_0x5d5d33){_0x1ae1c3=_0x1ae1c3-0xad;let _0x350867=_0x5bd5a2[_0x1ae1c3];return _0x350867;},a0_0x4c70(_0x4dd8f7,_0x28c5b4);}async function checkLicense(_0x364d39){return!![];}async function initHistory(_0x292a19){const _0xdd026f=a0_0x1b649b;try{const _0x48221a=await _0x292a19[_0xdd026f(0x16c)](_0xdd026f(0xe2));_0x48221a&&_0x48221a[_0xdd026f(0x18a)]&&(_0x292a19[_0xdd026f(0x18f)]=JSON['parse'](_0x48221a[_0xdd026f(0x18a)]['toString']()));}catch(_0xaa75c6){_0x292a19[_0xdd026f(0x18f)]=[];}try{const _0x29e3ce=await _0x292a19[_0xdd026f(0x16c)](_0xdd026f(0x21a));if(_0x29e3ce&&_0x29e3ce[_0xdd026f(0x18a)])_0x292a19['analysisHistory']=JSON[_0xdd026f(0x10e)](_0x29e3ce['val'][_0xdd026f(0x11f)]());}catch(_0x15c271){_0x292a19[_0xdd026f(0x233)]=[];}if(_0x292a19['eventHistory']&&_0x292a19[_0xdd026f(0x18f)][_0xdd026f(0x112)]>0x0){_0x292a19[_0xdd026f(0x1cc)]['info'](_0xdd026f(0x201));for(let _0x2f5eec=_0x292a19['eventHistory']['length']-0x1;_0x2f5eec>=0x0;_0x2f5eec--){const _0x1052e0=_0x292a19['eventHistory'][_0x2f5eec];if(_0x1052e0&&_0x1052e0['id']!==undefined&&_0x1052e0[_0xdd026f(0x234)]!==undefined)_0x292a19[_0xdd026f(0x223)][_0x1052e0['id']]=_0x1052e0['value'];}}}async function initSystemConfig(_0x3eea2b){const _0x19d1bb=a0_0x1b649b;try{const _0x44da31=await _0x3eea2b[_0x19d1bb(0x202)](_0x19d1bb(0xdb));if(_0x44da31&&_0x44da31[_0x19d1bb(0x1f3)])_0x3eea2b[_0x19d1bb(0x1f0)]={'latitude':_0x44da31['common'][_0x19d1bb(0x17a)]||0x0,'longitude':_0x44da31[_0x19d1bb(0x1f3)][_0x19d1bb(0x133)]||0x0,'city':_0x44da31[_0x19d1bb(0x1f3)][_0x19d1bb(0x110)]||''};}catch(_0x408d33){}}async function createAllObjects(_0x1573aa){const _0x34644b=a0_0x1b649b;await _0x1573aa[_0x34644b(0x1af)]('system',{'type':'channel','common':{'name':_0x34644b(0x169)},'native':{}}),await _0x1573aa[_0x34644b(0x1af)](SYSTEM_DP_MODE,{'type':'state','common':{'name':_0x34644b(0xae),'type':'string','role':_0x34644b(0x1b8),'read':!![],'write':!![],'def':SYSTEM_MODES['NORMAL']},'native':{}}),await _0x1573aa['setObjectNotExistsAsync'](_0x34644b(0x1e3),{'type':_0x34644b(0x1b8),'common':{'name':_0x34644b(0x111),'type':_0x34644b(0xe8),'role':_0x34644b(0x1c4),'read':!![],'write':![]},'native':{}}),await _0x1573aa[_0x34644b(0x242)](_0x34644b(0x14d),{'type':_0x34644b(0x1b8),'common':{'name':_0x34644b(0x147),'type':'string','role':'json','read':!![],'write':![]},'native':{}}),await _0x1573aa[_0x34644b(0x242)](_0x34644b(0xe2),{'type':_0x34644b(0x1b8),'common':{'name':_0x34644b(0x248),'type':_0x34644b(0xe8),'role':_0x34644b(0x138),'read':!![],'write':![]},'native':{}}),await _0x1573aa[_0x34644b(0x1af)](_0x34644b(0x1ab),{'type':_0x34644b(0xe9),'common':{'name':_0x34644b(0x214)},'native':{}}),await _0x1573aa[_0x34644b(0x242)](_0x34644b(0x149),{'type':_0x34644b(0x1b8),'common':{'name':_0x34644b(0x1dd),'type':'boolean','role':_0x34644b(0x181),'read':!![],'write':!![]},'native':{}}),await _0x1573aa[_0x34644b(0x242)]('analysis.training.triggerHealth',{'type':'state','common':{'name':'Train\x20Health','type':_0x34644b(0x123),'role':_0x34644b(0x181),'read':!![],'write':!![]},'native':{}}),await _0x1573aa[_0x34644b(0x242)](_0x34644b(0x1bd),{'type':_0x34644b(0x1b8),'common':{'name':_0x34644b(0x1fb),'type':'boolean','role':_0x34644b(0x181),'read':!![],'write':!![]},'native':{}}),await _0x1573aa[_0x34644b(0x242)](_0x34644b(0x192),{'type':'state','common':{'name':'Train\x20Comfort','type':_0x34644b(0x123),'role':'button','read':!![],'write':!![]},'native':{}}),await _0x1573aa['setObjectNotExistsAsync']('analysis.training.triggerTopology',{'type':_0x34644b(0x1b8),'common':{'name':_0x34644b(0xda),'type':_0x34644b(0x123),'role':_0x34644b(0x181),'read':!![],'write':!![]},'native':{}}),await _0x1573aa['setObjectNotExistsAsync'](_0x34644b(0x204),{'type':'state','common':{'name':_0x34644b(0x15a),'type':_0x34644b(0xe8),'role':_0x34644b(0x1c4),'read':!![],'write':![]},'native':{}}),await _0x1573aa['extendObjectAsync'](_0x34644b(0x22f),{'type':'channel','common':{'name':'Security\x20Monitor'},'native':{}}),await _0x1573aa[_0x34644b(0x242)](_0x34644b(0x1e9),{'type':_0x34644b(0x1b8),'common':{'name':_0x34644b(0xb6),'type':_0x34644b(0x11e),'role':_0x34644b(0x234),'read':!![],'write':![]},'native':{}}),await _0x1573aa[_0x34644b(0x242)](_0x34644b(0x1da),{'type':'state','common':{'name':_0x34644b(0x215),'type':_0x34644b(0x11e),'role':_0x34644b(0x234),'read':!![],'write':![],'def':0.05},'native':{}}),await _0x1573aa[_0x34644b(0x242)](_0x34644b(0x226),{'type':'state','common':{'name':_0x34644b(0x1d4),'type':_0x34644b(0xe8),'role':_0x34644b(0xcc),'read':!![],'write':![]},'native':{}}),await _0x1573aa[_0x34644b(0x242)](_0x34644b(0x210),{'type':'state','common':{'name':_0x34644b(0x165),'type':_0x34644b(0xe8),'role':_0x34644b(0x138),'read':!![],'write':![]},'native':{}}),await _0x1573aa[_0x34644b(0x1af)](_0x34644b(0xf6),{'type':_0x34644b(0xe9),'common':{'name':_0x34644b(0xaf)},'native':{}}),await _0x1573aa[_0x34644b(0x242)](_0x34644b(0x118),{'type':_0x34644b(0x1b8),'common':{'name':_0x34644b(0x1d4),'type':_0x34644b(0xe8),'role':_0x34644b(0xcc),'read':!![],'write':![]},'native':{}}),await _0x1573aa[_0x34644b(0x242)](_0x34644b(0x1a3),{'type':_0x34644b(0x1b8),'common':{'name':'Anomaly\x20Detected','type':_0x34644b(0x123),'role':_0x34644b(0x16f),'read':!![],'write':![]},'native':{}}),await _0x1573aa['setObjectNotExistsAsync'](_0x34644b(0x105),{'type':_0x34644b(0x1b8),'common':{'name':_0x34644b(0x1b9),'type':'string','role':_0x34644b(0x1c4),'read':!![],'write':![]},'native':{}}),await _0x1573aa[_0x34644b(0x242)](_0x34644b(0xea),{'type':_0x34644b(0x1b8),'common':{'name':_0x34644b(0x1e0),'type':_0x34644b(0x11e),'role':_0x34644b(0x234),'read':!![],'write':![]},'native':{}}),await _0x1573aa['setObjectNotExistsAsync'](_0x34644b(0x11b),{'type':_0x34644b(0x1b8),'common':{'name':_0x34644b(0x212),'type':'string','role':_0x34644b(0x138),'read':!![],'write':![]},'native':{}}),await _0x1573aa[_0x34644b(0x242)](_0x34644b(0x1a2),{'type':_0x34644b(0x1b8),'common':{'name':_0x34644b(0x126),'type':_0x34644b(0x11e),'role':'value','read':!![],'write':![]},'native':{}}),await _0x1573aa['extendObjectAsync']('analysis.energy',{'type':_0x34644b(0xe9),'common':{'name':_0x34644b(0x1a4)},'native':{}}),await _0x1573aa[_0x34644b(0x242)](_0x34644b(0xc9),{'type':_0x34644b(0x1b8),'common':{'name':_0x34644b(0x1b3),'type':_0x34644b(0xe8),'role':'text','read':!![],'write':![]},'native':{}}),await _0x1573aa['setObjectNotExistsAsync'](_0x34644b(0x1c8),{'type':_0x34644b(0x1b8),'common':{'name':_0x34644b(0x10a),'type':_0x34644b(0xe8),'role':_0x34644b(0x1c4),'read':!![],'write':![]},'native':{}}),await _0x1573aa[_0x34644b(0x242)](_0x34644b(0xb0),{'type':_0x34644b(0x1b8),'common':{'name':'Temperature\x20Forecast','type':_0x34644b(0xe8),'role':'json','read':!![],'write':![]},'native':{}}),await _0x1573aa[_0x34644b(0x1af)](_0x34644b(0x23e),{'type':_0x34644b(0xe9),'common':{'name':'LTM'},'native':{}}),await _0x1573aa[_0x34644b(0x1af)](LTM_DP_RAW_LOG,{'type':'state','common':{'name':_0x34644b(0x18d),'type':_0x34644b(0xe8),'role':_0x34644b(0x138),'read':!![],'write':![]},'native':{}}),await _0x1573aa[_0x34644b(0x1af)](LTM_DP_DAILY_DIGESTS,{'type':_0x34644b(0x1b8),'common':{'name':_0x34644b(0xc4),'type':'string','role':_0x34644b(0x138),'read':!![],'write':![]},'native':{}}),await _0x1573aa[_0x34644b(0x242)](_0x34644b(0x17b),{'type':_0x34644b(0x1b8),'common':{'name':_0x34644b(0x128),'type':'string','role':_0x34644b(0x138),'read':!![],'write':![]},'native':{}}),await _0x1573aa[_0x34644b(0x242)](_0x34644b(0x157),{'type':_0x34644b(0x1b8),'common':{'name':'Thermodynamics','type':_0x34644b(0xe8),'role':_0x34644b(0x138),'read':!![],'write':![]},'native':{}}),await _0x1573aa[_0x34644b(0x242)](_0x34644b(0x21c),{'type':_0x34644b(0x1b8),'common':{'name':_0x34644b(0x14b),'type':'boolean','role':_0x34644b(0x181),'read':!![],'write':!![]},'native':{}}),await _0x1573aa[_0x34644b(0x242)](_0x34644b(0x225),{'type':_0x34644b(0x1b8),'common':{'name':_0x34644b(0x183),'type':_0x34644b(0x123),'role':_0x34644b(0x181),'read':!![],'write':!![]},'native':{}}),await _0x1573aa[_0x34644b(0x242)]('analysis.isAlert',{'type':_0x34644b(0x1b8),'common':{'name':'Alert\x20Status','type':_0x34644b(0x123),'role':_0x34644b(0x18b),'read':!![],'write':![]},'native':{}}),await _0x1573aa[_0x34644b(0x242)](_0x34644b(0x148),{'type':_0x34644b(0x1b8),'common':{'name':_0x34644b(0x1c1),'type':_0x34644b(0xe8),'role':'text.alarm','read':!![],'write':![]},'native':{}}),await _0x1573aa[_0x34644b(0x242)](_0x34644b(0x189),{'type':_0x34644b(0x1b8),'common':{'name':_0x34644b(0x1b0),'type':_0x34644b(0xe8),'role':_0x34644b(0x1c4),'read':!![],'write':![]},'native':{}}),await _0x1573aa['setObjectNotExistsAsync'](_0x34644b(0xbe),{'type':'state','common':{'name':_0x34644b(0x1e6),'type':_0x34644b(0x123),'role':_0x34644b(0x16f),'read':!![],'write':![]},'native':{}}),await _0x1573aa['setObjectNotExistsAsync'](_0x34644b(0x20a),{'type':_0x34644b(0x1b8),'common':{'name':_0x34644b(0xfb),'type':_0x34644b(0xe8),'role':'text','read':!![],'write':![]},'native':{}}),await _0x1573aa[_0x34644b(0x242)](_0x34644b(0x15c),{'type':'state','common':{'name':_0x34644b(0xc3),'type':_0x34644b(0xe8),'role':_0x34644b(0x138),'read':!![],'write':![]},'native':{}}),await _0x1573aa['setObjectNotExistsAsync'](_0x34644b(0x155),{'type':'state','common':{'name':_0x34644b(0xb9),'type':_0x34644b(0xe8),'role':_0x34644b(0x1c4),'read':!![],'write':![]},'native':{}}),await _0x1573aa[_0x34644b(0x242)](_0x34644b(0x122),{'type':_0x34644b(0x1b8),'common':{'name':'Target\x20Value','type':_0x34644b(0xe8),'role':_0x34644b(0x1c4),'read':!![],'write':![]},'native':{}}),await _0x1573aa[_0x34644b(0x242)](_0x34644b(0x193),{'type':_0x34644b(0x1b8),'common':{'name':_0x34644b(0x1dc),'type':_0x34644b(0x123),'role':_0x34644b(0x16a),'read':!![],'write':!![]},'native':{}}),await _0x1573aa[_0x34644b(0x242)](_0x34644b(0x185),{'type':_0x34644b(0x1b8),'common':{'name':_0x34644b(0x166),'type':_0x34644b(0x123),'role':_0x34644b(0x181),'read':!![],'write':!![]},'native':{}});}async function loadSystemMode(_0x32f612){const _0x8e7826=a0_0x1b649b;try{const _0x4b78e8=await _0x32f612[_0x8e7826(0x16c)](SYSTEM_DP_MODE);_0x4b78e8&&_0x4b78e8['val']&&Object[_0x8e7826(0x182)](SYSTEM_MODES)[_0x8e7826(0x1be)](_0x4b78e8[_0x8e7826(0x18a)])?_0x32f612['currentSystemMode']=_0x4b78e8[_0x8e7826(0x18a)]:(_0x32f612[_0x8e7826(0x1df)]=SYSTEM_MODES['NORMAL'],await _0x32f612[_0x8e7826(0x1e4)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES['NORMAL'],'ack':!![]}));}catch(_0x4abd62){_0x32f612[_0x8e7826(0x1df)]=SYSTEM_MODES['NORMAL'];}}async function loadRawEventLog(_0xaa97a3){const _0x454cba=a0_0x1b649b;try{const _0x4b9fc7=await _0xaa97a3['getStateAsync'](LTM_DP_RAW_LOG);if(_0x4b9fc7&&_0x4b9fc7[_0x454cba(0x18a)])_0xaa97a3['rawEventLog']=JSON['parse'](_0x4b9fc7[_0x454cba(0x18a)]);}catch(_0xcb8884){_0xaa97a3['rawEventLog']=[];}}async function saveRawEventLog(_0x2554a3){const _0x702a81=a0_0x1b649b;if(_0x2554a3['rawEventLog'][_0x702a81(0x112)]>RAW_LOG_MAX_SIZE)_0x2554a3[_0x702a81(0x1de)]['splice'](0x0,_0x2554a3[_0x702a81(0x1de)]['length']-RAW_LOG_MAX_SIZE);await _0x2554a3['setStateAsync'](LTM_DP_RAW_LOG,{'val':JSON['stringify'](_0x2554a3[_0x702a81(0x1de)]),'ack':!![]});}async function loadDailyDigests(_0x32e71a){const _0x21c5e2=a0_0x1b649b;try{const _0x2facc7=await _0x32e71a[_0x21c5e2(0x16c)](LTM_DP_DAILY_DIGESTS);if(_0x2facc7&&_0x2facc7[_0x21c5e2(0x18a)])_0x32e71a[_0x21c5e2(0xdf)]=JSON[_0x21c5e2(0x10e)](_0x2facc7[_0x21c5e2(0x18a)]);}catch(_0x41979a){_0x32e71a[_0x21c5e2(0xdf)]=[];}await updateBaselineStatus(_0x32e71a);}async function saveDailyDigests(_0x3d04f4,_0x56c1c5=!![]){const _0x13a816=a0_0x1b649b,_0x17687f=_0x3d04f4[_0x13a816(0x1aa)]['ltmLtbWindowDays']||0x3c;_0x3d04f4[_0x13a816(0xdf)][_0x13a816(0x112)]>_0x17687f&&_0x3d04f4[_0x13a816(0xdf)][_0x13a816(0x101)](0x0,_0x3d04f4[_0x13a816(0xdf)][_0x13a816(0x112)]-_0x17687f);await _0x3d04f4['setStateAsync'](LTM_DP_DAILY_DIGESTS,{'val':JSON['stringify'](_0x3d04f4[_0x13a816(0xdf)]),'ack':!![]});if(_0x56c1c5)await updateBaselineStatus(_0x3d04f4);}async function updateAnalysisHistory(_0xefc13f,_0x20af6a){const _0xd415d2=a0_0x1b649b;_0xefc13f[_0xd415d2(0x233)][_0xd415d2(0xdc)](_0x20af6a);if(_0xefc13f['analysisHistory'][_0xd415d2(0x112)]>HISTORY_MAX_SIZE)_0xefc13f[_0xd415d2(0x233)][_0xd415d2(0x1b4)]();await _0xefc13f['setStateAsync'](_0xd415d2(0x21a),{'val':JSON['stringify'](_0xefc13f[_0xd415d2(0x233)]),'ack':!![]});}async function updateBaselineStatus(_0x1c5a05){const _0x50c52e=a0_0x1b649b;if(!_0x1c5a05[_0x50c52e(0x1d8)]){await _0x1c5a05[_0x50c52e(0x1e4)](LTM_DP_BASELINE_STATUS,{'val':'Deaktiviert\x20(Pro-Feature)','ack':!![]});return;}const _0x1b2072=_0x1c5a05[_0x50c52e(0xdf)]['length']>=(_0x1c5a05[_0x50c52e(0x1aa)][_0x50c52e(0xeb)]||0x7)?_0x50c52e(0x141)+_0x1c5a05[_0x50c52e(0xdf)][_0x50c52e(0x112)]+_0x50c52e(0x18c):_0x50c52e(0x159)+_0x1c5a05[_0x50c52e(0xdf)]['length']+'/'+(_0x1c5a05['config'][_0x50c52e(0xeb)]||0x7)+')';await _0x1c5a05[_0x50c52e(0x1e4)](LTM_DP_BASELINE_STATUS,{'val':_0x1b2072,'ack':!![]});}async function initSensorSubscriptions(_0x172623){const _0x5a2d57=a0_0x1b649b,_0x2a4003=_0x172623['config'][_0x5a2d57(0xe1)];if(_0x2a4003)for(const _0x3d930c of _0x2a4003){await _0x172623[_0x5a2d57(0x231)](_0x3d930c['id']);}}async function initPresenceSubscriptions(_0xa0ef61){const _0x2e99b1=a0_0x1b649b,_0x4e24b3=_0xa0ef61[_0x2e99b1(0x1aa)][_0x2e99b1(0x1b6)];if(_0x4e24b3)for(const _0xc75d99 of _0x4e24b3){await _0xa0ef61['subscribeForeignStatesAsync'](_0xc75d99);}}async function setupTelegramListener(_0x3aae7d){const _0x4affca=a0_0x1b649b,_0x392f15=_0x3aae7d[_0x4affca(0x1aa)][_0x4affca(0x104)];if(_0x3aae7d['config']['notifyTelegramEnabled']&&_0x392f15)await _0x3aae7d['subscribeForeignStatesAsync'](_0x392f15+_0x4affca(0x243));}async function checkWifiPresence(_0x39b07a){const _0x36306c=a0_0x1b649b;try{const _0x36717e=_0x39b07a['config']['presenceDevices']||[];let _0x2c1c6=![];const _0x2f48fd=[];for(const _0x26ac8b of _0x36717e){try{const _0x5045c5=await _0x39b07a[_0x36306c(0x221)](_0x26ac8b);_0x5045c5&&(_0x5045c5[_0x36306c(0x18a)]===!![]||_0x5045c5[_0x36306c(0x18a)]==='online'||_0x5045c5[_0x36306c(0x18a)]===0x1)&&(_0x2c1c6=!![],_0x2f48fd[_0x36306c(0x154)](_0x26ac8b));}catch(_0x5d6d40){}}return await _0x39b07a['setStateAsync'](_0x36306c(0x1e3),{'val':_0x2f48fd[_0x36306c(0x224)](',\x20'),'ack':!![]}),_0x2c1c6&&(_0x39b07a[_0x36306c(0x17c)]&&(_0x39b07a['log'][_0x36306c(0x238)](_0x36306c(0x116)),abortExitTimer(_0x39b07a)),!_0x39b07a[_0x36306c(0xd4)]&&_0x39b07a['currentSystemMode']===SYSTEM_MODES[_0x36306c(0x1a8)]&&await setPresence(_0x39b07a,!![])),_0x2c1c6;}catch(_0x11163c){return![];}}function startExitTimer(_0xf28ef){const _0x52ac8c=a0_0x1b649b;abortExitTimer(_0xf28ef),_0xf28ef[_0x52ac8c(0xf3)]=!![],_0xf28ef['exitGraceTimer']=setTimeout(()=>{const _0x32a2be=_0x52ac8c;_0xf28ef[_0x32a2be(0xf3)]=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),_0xf28ef[_0x52ac8c(0x17c)]=setTimeout(()=>{const _0x19e487=_0x52ac8c;setPresence(_0xf28ef,![]),_0xf28ef[_0x19e487(0x17c)]=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}function abortExitTimer(_0x5c530a){const _0x337272=a0_0x1b649b;if(_0x5c530a[_0x337272(0x17c)])clearTimeout(_0x5c530a[_0x337272(0x17c)]);if(_0x5c530a[_0x337272(0x12f)])clearTimeout(_0x5c530a[_0x337272(0x12f)]);_0x5c530a[_0x337272(0x17c)]=null,_0x5c530a[_0x337272(0x12f)]=null,_0x5c530a[_0x337272(0xf3)]=![];}async function setPresence(_0x49f3b8,_0x1ecd0e){const _0xde550a=a0_0x1b649b;if(_0x49f3b8[_0xde550a(0xd4)]===_0x1ecd0e)return;_0x49f3b8[_0xde550a(0xd4)]=_0x1ecd0e,await _0x49f3b8['setStateAsync'](_0xde550a(0x12e),{'val':_0x1ecd0e,'ack':!![]});}async function executeAutomationAction(_0x574f70){const _0x10347a=a0_0x1b649b;try{const _0x1003d2=await _0x574f70[_0x10347a(0x16c)]('analysis.automation.targetId'),_0x42d574=await _0x574f70[_0x10347a(0x16c)](_0x10347a(0x122));if(_0x1003d2&&_0x1003d2['val']&&_0x42d574){const _0x76e7a6=_0x1003d2[_0x10347a(0x18a)];let _0x281ed1=_0x42d574['val'];try{_0x281ed1=JSON['parse'](_0x281ed1);}catch(_0x51637d){}_0x574f70['log'][_0x10347a(0x238)](_0x10347a(0x136)+_0x76e7a6+_0x10347a(0x244)+_0x281ed1),await _0x574f70[_0x10347a(0x191)](_0x76e7a6,_0x281ed1);}else _0x574f70[_0x10347a(0x1cc)][_0x10347a(0x1fa)](_0x10347a(0x20e));}catch(_0x3f8878){_0x574f70['log'][_0x10347a(0x208)](_0x10347a(0x216)+_0x3f8878[_0x10347a(0x114)]);}}async function processSensorEvent(_0x57cc12,_0x70f6eb,_0x3d2691,_0x3894d3){const _0x3d5127=a0_0x1b649b;if(!_0x3894d3)return;const _0x1ab825=_0x3d2691[_0x3d5127(0x18a)],_0x340552=Date['now'](),_0x5221c0=_0x57cc12[_0x3d5127(0x223)][_0x70f6eb];_0x57cc12['sensorLastValues'][_0x70f6eb]=_0x1ab825;if(!_0x3894d3[_0x3d5127(0xb8)]&&_0x5221c0!=undefined&&_0x5221c0==_0x1ab825)return;const _0x9b2e90=(_0x3894d3[_0x3d5127(0x1fd)]||'')['toLowerCase'](),_0x471d2a=_0x9b2e90[_0x3d5127(0x1be)]('temperature')||_0x9b2e90['includes'](_0x3d5127(0x21d))||_0x9b2e90[_0x3d5127(0x1be)](_0x3d5127(0xe3))||_0x9b2e90[_0x3d5127(0x1be)](_0x3d5127(0x13e));_0x57cc12['isProVersion']&&_0x471d2a&&recordThermodynamics(_0x57cc12,_0x70f6eb,_0x1ab825,_0x3894d3[_0x3d5127(0x1e2)]);const _0x52eff1={'timestamp':_0x340552,'id':_0x70f6eb,'name':_0x3894d3['name'],'type':_0x3894d3[_0x3d5127(0x1fd)],'location':_0x3894d3[_0x3d5127(0x1e2)],'value':_0x1ab825};_0x57cc12[_0x3d5127(0x18f)][_0x3d5127(0xdc)](_0x52eff1);if(_0x57cc12[_0x3d5127(0x18f)]['length']>HISTORY_MAX_SIZE)_0x57cc12[_0x3d5127(0x18f)][_0x3d5127(0x1b4)]();await _0x57cc12[_0x3d5127(0x1e4)](_0x3d5127(0x14d),{'val':JSON[_0x3d5127(0x1d5)](_0x52eff1),'ack':!![]}),await _0x57cc12[_0x3d5127(0x1e4)](_0x3d5127(0xe2),{'val':JSON[_0x3d5127(0x1d5)](_0x57cc12[_0x3d5127(0x18f)]),'ack':!![]});_0x57cc12[_0x3d5127(0x1d8)]&&(_0x57cc12[_0x3d5127(0x1de)]['push'](_0x52eff1),await saveRawEventLog(_0x57cc12),recordSequence(_0x57cc12,_0x52eff1));if(_0x3894d3[_0x3d5127(0x22d)]&&_0x1ab825===!![]){if(_0x57cc12[_0x3d5127(0xd4)]&&!_0x57cc12[_0x3d5127(0xf3)])startExitTimer(_0x57cc12);else{if(!_0x57cc12[_0x3d5127(0xd4)])setPresence(_0x57cc12,!![]);}}else{if(_0x3894d3[_0x3d5127(0x1fd)]==='motion'&&_0x1ab825===!![]){if(_0x57cc12[_0x3d5127(0x17c)])abortExitTimer(_0x57cc12);if(!_0x57cc12['isPresent']&&_0x57cc12['currentSystemMode']===SYSTEM_MODES[_0x3d5127(0x1a8)])setPresence(_0x57cc12,!![]);}}}async function recordThermodynamics(_0x28034e,_0x215f6a,_0x3644e5,_0x3388e6){const _0x2f3efc=a0_0x1b649b,_0x570814=await getOutsideTemperatureNumeric(_0x28034e),_0x5d99a8=await _0x28034e['getStateAsync']('LTM.trainingData.thermodynamics');let _0x144e10=[];if(_0x5d99a8&&_0x5d99a8['val'])try{_0x144e10=JSON['parse'](_0x5d99a8[_0x2f3efc(0x18a)]);}catch(_0x2a5136){}_0x144e10[_0x2f3efc(0x154)]({'ts':Date[_0x2f3efc(0x14e)](),'room':_0x3388e6||_0x2f3efc(0x153),'t_in':_0x3644e5,'t_out':_0x570814});if(_0x144e10[_0x2f3efc(0x112)]>THERMO_LOG_SIZE)_0x144e10['shift']();await _0x28034e[_0x2f3efc(0x1e4)]('LTM.trainingData.thermodynamics',{'val':JSON[_0x2f3efc(0x1d5)](_0x144e10),'ack':!![]});}async function getOutsideTemperatureNumeric(_0x3788cc){const _0x5471f9=a0_0x1b649b;if(_0x3788cc[_0x5471f9(0x1aa)][_0x5471f9(0xc7)])try{const _0xa055eb=await _0x3788cc[_0x5471f9(0x221)](_0x3788cc[_0x5471f9(0x1aa)][_0x5471f9(0xc7)]);if(_0xa055eb&&_0xa055eb[_0x5471f9(0x18a)]!==undefined&&_0xa055eb['val']!==null)return parseFloat(_0xa055eb['val']);}catch(_0x8e1486){}const _0x140eea=_0x3788cc[_0x5471f9(0x1aa)][_0x5471f9(0x200)];if(!_0x3788cc[_0x5471f9(0x1aa)][_0x5471f9(0x167)]||!_0x140eea)return null;try{let _0x493bf4='';if(_0x140eea['includes']('accuweather'))_0x493bf4=_0x140eea+'.Current.Temperature';else{if(_0x140eea[_0x5471f9(0x1be)](_0x5471f9(0x197)))_0x493bf4=_0x140eea+_0x5471f9(0x1f9);else{if(_0x140eea[_0x5471f9(0x1be)](_0x5471f9(0x21e)))_0x493bf4=_0x140eea+'.forecast.current.temperature';else{if(_0x140eea[_0x5471f9(0x1be)](_0x5471f9(0x228)))_0x493bf4=_0x140eea+_0x5471f9(0x1a1);}}}if(_0x493bf4){const _0x3aa564=await _0x3788cc[_0x5471f9(0x221)](_0x493bf4);if(_0x3aa564&&_0x3aa564['val']!==undefined&&_0x3aa564[_0x5471f9(0x18a)]!==null)return parseFloat(_0x3aa564[_0x5471f9(0x18a)]);}}catch(_0x5912f2){}return null;}async function recordSequence(_0x1889a3,_0x33e47b){const _0x12b7d4=a0_0x1b649b,_0x47af20=(_0x33e47b[_0x12b7d4(0x1fd)]||'')[_0x12b7d4(0x1f7)](),_0x5cffbb=['motion',_0x12b7d4(0x1ec),'prÃ¤senz',_0x12b7d4(0x1f2),_0x12b7d4(0xcd),'door',_0x12b7d4(0x1f8),_0x12b7d4(0x178),'fenster',_0x12b7d4(0x239),_0x12b7d4(0xb1),_0x12b7d4(0x230),'licht',_0x12b7d4(0x16a),_0x12b7d4(0x13d),_0x12b7d4(0x14c),'lampe'];if(!_0x5cffbb[_0x12b7d4(0x10f)](_0x25814b=>_0x47af20[_0x12b7d4(0x1be)](_0x25814b)))return;if(!_0x33e47b['value'])return;if(sequenceTimer)clearTimeout(sequenceTimer);activeSequence[_0x12b7d4(0x154)]({'loc':_0x33e47b[_0x12b7d4(0x1e2)]||_0x12b7d4(0x153),'id':_0x33e47b['id'],'ts':Date[_0x12b7d4(0x14e)]()}),sequenceTimer=setTimeout(async()=>{const _0x209e0b=_0x12b7d4;if(activeSequence[_0x209e0b(0x112)]>0x1)await saveCompletedSequence(_0x1889a3);activeSequence=[];},SEQUENCE_TIMEOUT_MS);}async function saveCompletedSequence(_0x186b98){const _0x416657=a0_0x1b649b;try{const _0x26b321=await _0x186b98[_0x416657(0x16c)](_0x416657(0x17b));let _0x12172=[];if(_0x26b321&&_0x26b321[_0x416657(0x18a)])try{_0x12172=JSON['parse'](_0x26b321[_0x416657(0x18a)]);}catch(_0x441005){}const _0x2ea0c4=activeSequence[0x0]['ts'],_0x320cf7=activeSequence['map'](_0x3db147=>({'loc':_0x3db147['loc'],'t_delta':Math[_0x416657(0x1ce)]((_0x3db147['ts']-_0x2ea0c4)/0x3e8)})),_0x419fab={'timestamp':new Date(_0x2ea0c4)['toISOString'](),'steps':_0x320cf7,'duration':Math[_0x416657(0x1ce)]((activeSequence[activeSequence[_0x416657(0x112)]-0x1]['ts']-_0x2ea0c4)/0x3e8),'daytime':new Date(_0x2ea0c4)['getHours']()};_0x12172[_0x416657(0x154)](_0x419fab);if(_0x12172[_0x416657(0x112)]>MAX_TRAINING_SET_SIZE)_0x12172['shift']();await _0x186b98[_0x416657(0x1e4)](_0x416657(0x17b),{'val':JSON[_0x416657(0x1d5)](_0x12172),'ack':!![]}),runSecurityCheck(_0x186b98,_0x419fab);}catch(_0x35a9d7){_0x186b98['log']['error'](_0x416657(0x176)+_0x35a9d7[_0x416657(0x114)]);}}function runSecurityCheck(_0x3deaf2,_0x1e12a0){const _0x4e41a0=a0_0x1b649b;if(!_0x3deaf2[_0x4e41a0(0x1d8)])return;sendToPython(_0x3deaf2,_0x4e41a0(0xc8),{'sequence':_0x1e12a0});}async function createDailyDigest(_0x2d6850){const _0x103946=a0_0x1b649b;if(!_0x2d6850[_0x103946(0x1d8)])return;await _0x2d6850['setStateAsync'](LTM_DP_STATUS,{'val':_0x103946(0x20c),'ack':!![]});if(!_0x2d6850['geminiModel']||_0x2d6850[_0x103946(0x1de)][_0x103946(0x112)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x2d6850[_0x103946(0x1e4)](LTM_DP_STATUS,{'val':_0x103946(0xec),'ack':!![]});return;}const _0x1e07b7=JSON[_0x103946(0x10e)](JSON[_0x103946(0x1d5)](_0x2d6850['rawEventLog'])),_0x26a0a3=_0x1e07b7[_0x103946(0x112)],_0x118185=_0x103946(0xba)+JSON[_0x103946(0x1d5)](_0x1e07b7);try{const _0x451d88=await _0x2d6850[_0x103946(0x249)][_0x103946(0x232)](_0x118185),_0x2ee0c5=JSON['parse'](_0x451d88['response'][_0x103946(0x1c4)]()[_0x103946(0xd9)](/```json|```/g,'')[_0x103946(0x1cf)]()),_0x48a741={'timestamp':new Date()['toISOString'](),'eventCount':_0x26a0a3,'summary':_0x2ee0c5['summary']||_0x103946(0x175),'activityLevel':_0x2ee0c5[_0x103946(0x129)]||_0x103946(0x15e),'systemMode':_0x2d6850[_0x103946(0x1df)]};_0x2d6850['dailyDigests'][_0x103946(0x154)](_0x48a741),await saveDailyDigests(_0x2d6850),_0x2d6850['rawEventLog']=[],await saveRawEventLog(_0x2d6850),await _0x2d6850[_0x103946(0x1e4)](LTM_DP_STATUS,{'val':'Success','ack':!![]});if(_0x2d6850['isProVersion'])sendToPython(_0x2d6850,_0x103946(0x217),{'digest':_0x48a741});}catch(_0x91f72e){_0x2d6850['log']['error'](_0x91f72e[_0x103946(0x114)]);}}async function runBaselineDriftAnalysis(_0x31b178){const _0x4f99f5=a0_0x1b649b;if(!_0x31b178['isProVersion']||!_0x31b178[_0x4f99f5(0x249)])return;const _0x499f43=_0x31b178[_0x4f99f5(0x1aa)][_0x4f99f5(0x1cb)]||0xe;if(_0x31b178['dailyDigests'][_0x4f99f5(0x112)]<_0x499f43+0x7){await _0x31b178[_0x4f99f5(0x1e4)](LTM_DP_DRIFT_STATUS,{'val':_0x4f99f5(0x1cd),'ack':!![]});return;}const _0x44186f=_0x31b178[_0x4f99f5(0xdf)][_0x4f99f5(0x1f6)](-_0x499f43),_0x26baf9=_0x31b178[_0x4f99f5(0xdf)][_0x4f99f5(0x1f6)](0x0,_0x31b178[_0x4f99f5(0xdf)][_0x4f99f5(0x112)]-_0x499f43),_0x53574f='ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20'+JSON[_0x4f99f5(0x1d5)](_0x26baf9)+_0x4f99f5(0x222)+JSON['stringify'](_0x44186f);try{const _0x4dae08=await _0x31b178[_0x4f99f5(0x249)]['generateContent'](_0x53574f),_0x50b67a=JSON['parse'](_0x4dae08[_0x4f99f5(0x102)][_0x4f99f5(0x1c4)]()['replace'](/```json|```/g,'')[_0x4f99f5(0x1cf)]());_0x50b67a['baselineDrift']&&(await _0x31b178[_0x4f99f5(0x1e4)](LTM_DP_DRIFT_STATUS,{'val':_0x50b67a[_0x4f99f5(0x173)],'ack':!![]}),await _0x31b178[_0x4f99f5(0x1e4)](LTM_DP_DRIFT_DETAILS,{'val':_0x50b67a[_0x4f99f5(0x16d)],'ack':!![]}),await _0x31b178[_0x4f99f5(0x1e4)](LTM_DP_DRIFT_LAST_CHECK,{'val':Date['now'](),'ack':!![]}));}catch(_0x218b15){}}async function sendMorningBriefing(_0x4675ad){const _0x44570e=a0_0x1b649b;if(!_0x4675ad['geminiModel'])return;try{const _0x264b6e=_0x44570e(0x1f5),_0x4cc240=await _0x4675ad[_0x44570e(0x249)]['generateContent'](_0x264b6e),_0x136edf=_0x4cc240[_0x44570e(0x102)][_0x44570e(0x1c4)]();sendNotification(_0x4675ad,'ðŸŒ…\x20Morning\x20Briefing:\x0a'+_0x136edf);}catch(_0x30996c){_0x4675ad[_0x44570e(0x1cc)][_0x44570e(0x208)](_0x44570e(0x19b)+_0x30996c[_0x44570e(0x114)]);}}function stopPythonService(_0x2fbad9){const _0x4be3f7=a0_0x1b649b;if(_0x2fbad9['pythonProcess']){try{_0x2fbad9['pythonProcess']['kill']();}catch(_0x50f443){}_0x2fbad9[_0x4be3f7(0xc0)]=null;}}function sendToPython(_0x1a7d6f,_0x452dd2,_0x4efd08={}){const _0x3cf600=a0_0x1b649b;if(!_0x1a7d6f[_0x3cf600(0xc0)]||!_0x1a7d6f[_0x3cf600(0xc0)][_0x3cf600(0xed)]['writable'])return;const _0x24c85b=JSON['stringify']({'command':_0x452dd2,..._0x4efd08});try{_0x1a7d6f[_0x3cf600(0xc0)][_0x3cf600(0xed)][_0x3cf600(0xc5)](_0x24c85b+'\x0a');}catch(_0x253608){}}function runPythonHealthCheck(_0x962761){const _0x36fab4=a0_0x1b649b;if(!_0x962761['dailyDigests']||_0x962761[_0x36fab4(0xdf)][_0x36fab4(0x112)]<0x2)return;const _0x3f7f76=_0x962761[_0x36fab4(0xdf)]['map'](_0x2003ff=>{const _0x193b5b=_0x36fab4,_0x513f10=(_0x2003ff[_0x193b5b(0x129)]||'')[_0x193b5b(0x1f7)]();return ACTIVITY_LEVEL_MAP[_0x513f10]||0x32;});sendToPython(_0x962761,_0x36fab4(0x137),{'values':_0x3f7f76,'tag':_0x36fab4(0x180)});}function handlePythonResult(_0x2f61b3,_0x33f47a){const _0x4b6d07=a0_0x1b649b;if(_0x33f47a['type']===_0x4b6d07(0x194))_0x2f61b3[_0x4b6d07(0x1cc)][_0x4b6d07(0xb7)]('ðŸ\x20Python\x20Pong');else{if(_0x33f47a[_0x4b6d07(0x1fd)]===_0x4b6d07(0x23f)){const {anomaly_score:_0x382c68,is_anomaly:_0x250549,threshold:_0x16c857,explanation:_0x5cb566}=_0x33f47a['payload'];_0x2f61b3[_0x4b6d07(0x1cc)]['info'](_0x4b6d07(0xfa)+_0x382c68[_0x4b6d07(0xf2)](0x5)+'\x20->\x20'+(_0x250549?_0x4b6d07(0x15b):'OK')),_0x2f61b3['setStateAsync']('analysis.security.lastScore',{'val':_0x382c68,'ack':!![]}),_0x2f61b3['setStateAsync'](_0x4b6d07(0x226),{'val':new Date()[_0x4b6d07(0x190)](),'ack':!![]});if(_0x16c857)_0x2f61b3[_0x4b6d07(0x1e4)](_0x4b6d07(0x1da),{'val':_0x16c857,'ack':!![]});if(_0x250549){let _0xcd5d95=_0x4b6d07(0x20f)+_0x382c68[_0x4b6d07(0xf2)](0x4)+')';if(_0x5cb566&&_0x5cb566!==_0x4b6d07(0x153))_0xcd5d95+='\x0aGrund:\x20'+_0x5cb566;_0x2f61b3[_0x4b6d07(0x1e4)]('analysis.isAlert',{'val':!![],'ack':!![]}),_0x2f61b3['setStateAsync']('analysis.alertReason',{'val':_0xcd5d95,'ack':!![]}),sendNotification(_0x2f61b3,_0x4b6d07(0xce)+_0xcd5d95,![],!![]);}}else{if(_0x33f47a[_0x4b6d07(0x1fd)]===_0x4b6d07(0x241)){const _0x1c75db=_0x33f47a[_0x4b6d07(0x1eb)]['details']||'',_0x1807e5=_0x33f47a[_0x4b6d07(0x1eb)]['threshold'],_0x474ad3=_0x33f47a[_0x4b6d07(0x1eb)]['success']?'Success:\x20'+new Date()[_0x4b6d07(0x237)]()+'\x20('+_0x1c75db+')':'Failed:\x20'+_0x33f47a['payload'][_0x4b6d07(0x1fe)];_0x2f61b3[_0x4b6d07(0x1e4)](_0x4b6d07(0x204),{'val':_0x474ad3,'ack':!![]});if(_0x33f47a[_0x4b6d07(0x1eb)]['success']&&_0x1807e5)_0x2f61b3[_0x4b6d07(0x1e4)](_0x4b6d07(0x1da),{'val':_0x1807e5,'ack':!![]});}else{if(_0x33f47a['type']===_0x4b6d07(0x1ca)){const {patterns:_0x231f02}=_0x33f47a[_0x4b6d07(0x1eb)];if(_0x231f02&&_0x231f02[_0x4b6d07(0x112)]>0x0){_0x2f61b3['log'][_0x4b6d07(0x238)](_0x4b6d07(0x21b)+_0x231f02['length']+_0x4b6d07(0x1c3)),_0x2f61b3[_0x4b6d07(0x1e4)]('analysis.automation.detectedPatterns',{'val':JSON[_0x4b6d07(0x1d5)](_0x231f02),'ack':!![]});const _0x3ce923=_0x231f02[0x0],_0x7b3d3b='Regel\x20erkannt:\x20'+_0x3ce923['rule']+'\x20('+(_0x3ce923[_0x4b6d07(0x1a6)]*0x64)[_0x4b6d07(0xf2)](0x0)+'%)';_0x2f61b3[_0x4b6d07(0x1e4)](_0x4b6d07(0xbe),{'val':!![],'ack':!![]}),_0x2f61b3[_0x4b6d07(0x1e4)](_0x4b6d07(0x20a),{'val':_0x7b3d3b,'ack':!![]});}else _0x2f61b3['log']['info']('ðŸ›‹ï¸\x20BUTLER:\x20Keine\x20neuen\x20Muster\x20gefunden.'),_0x2f61b3[_0x4b6d07(0x1e4)](_0x4b6d07(0xbe),{'val':![],'ack':!![]}),_0x2f61b3[_0x4b6d07(0x1e4)](_0x4b6d07(0x15c),{'val':'[]','ack':!![]});}else{if(_0x33f47a[_0x4b6d07(0x1fd)]==='ENERGY_TRAIN_RESULT'){if(_0x33f47a[_0x4b6d07(0x1eb)][_0x4b6d07(0xd2)])try{const _0x81d180=JSON[_0x4b6d07(0x10e)](_0x33f47a['payload'][_0x4b6d07(0x1fc)]);if(_0x81d180[_0x4b6d07(0x143)])_0x2f61b3['setStateAsync'](_0x4b6d07(0xc9),{'val':JSON[_0x4b6d07(0x1d5)](_0x81d180[_0x4b6d07(0x143)]),'ack':!![]});if(_0x81d180[_0x4b6d07(0x12d)])_0x2f61b3[_0x4b6d07(0x1e4)](_0x4b6d07(0x1c8),{'val':JSON[_0x4b6d07(0x1d5)](_0x81d180[_0x4b6d07(0x12d)]),'ack':!![]});}catch(_0x25d608){}}else{if(_0x33f47a[_0x4b6d07(0x1fd)]==='HEALTH_TRAIN_RESULT'){if(_0x33f47a['payload']['success'])_0x2f61b3['log'][_0x4b6d07(0x238)]('âœ…\x20HEALTH\x20TRAINED.');}else{if(_0x33f47a[_0x4b6d07(0x1fd)]===_0x4b6d07(0x246))_0x2f61b3['setStateAsync']('analysis.health.lastCheck',{'val':new Date()[_0x4b6d07(0x190)](),'ack':!![]}),_0x2f61b3[_0x4b6d07(0x1e4)]('analysis.health.isAnomaly',{'val':_0x33f47a['payload'][_0x4b6d07(0xad)],'ack':!![]});else{if(_0x33f47a['type']==='TREND_RESULT')_0x2f61b3[_0x4b6d07(0x1e4)](_0x4b6d07(0x105),{'val':_0x33f47a['payload'][_0x4b6d07(0x240)],'ack':!![]}),_0x2f61b3['setStateAsync'](_0x4b6d07(0xea),{'val':_0x33f47a[_0x4b6d07(0x1eb)][_0x4b6d07(0x219)],'ack':!![]});else{if(_0x33f47a['type']===_0x4b6d07(0x115)){const {speed_trend:_0x4fa0fc}=_0x33f47a[_0x4b6d07(0x1eb)];if(_0x4fa0fc!==undefined)_0x2f61b3[_0x4b6d07(0x1e4)](_0x4b6d07(0x1a2),{'val':_0x4fa0fc,'ack':!![]});}else{if(_0x33f47a[_0x4b6d07(0x1fd)]===_0x4b6d07(0xef)){const {forecast:_0xb0bd42}=_0x33f47a[_0x4b6d07(0x1eb)];if(_0xb0bd42)_0x2f61b3[_0x4b6d07(0x1e4)]('analysis.energy.forecast',{'val':JSON['stringify'](_0xb0bd42),'ack':!![]});}else{if(_0x33f47a[_0x4b6d07(0x1fd)]===_0x4b6d07(0x1ad)){const {data:_0x1f6206}=_0x33f47a[_0x4b6d07(0x1eb)];_0x1f6206&&(_0x2f61b3[_0x4b6d07(0x1cc)]['info']('ðŸ•¸ï¸\x20Topology\x20Map\x20updated.'),_0x2f61b3[_0x4b6d07(0x1e4)]('analysis.security.topologyMatrix',{'val':JSON[_0x4b6d07(0x1d5)](_0x1f6206),'ack':!![]}));}}}}}}}}}}}}function startPythonService(_0x1e5f50){const _0x30f64d=a0_0x1b649b;let _0x148507=_0x30f64d(0x21f);if(fs[_0x30f64d(0x206)](installer[_0x30f64d(0x17f)]))_0x148507=installer['PYTHON_EXE'];try{const _0x6c79a=path['join'](__dirname,_0x30f64d(0x170),'service.py');_0x1e5f50[_0x30f64d(0xc0)]=spawn(_0x148507,[_0x6c79a]),_0x1e5f50[_0x30f64d(0xc0)][_0x30f64d(0x23d)]['on']('data',_0x1faceb=>{const _0x5e2464=_0x30f64d,_0x372141=_0x1faceb[_0x5e2464(0x11f)]()[_0x5e2464(0xf1)]('\x0a');_0x372141[_0x5e2464(0x160)](_0x3ef92c=>{const _0x3ce987=_0x5e2464,_0x46dc01=_0x3ef92c[_0x3ce987(0x1cf)]();if(!_0x46dc01)return;if(_0x46dc01['startsWith'](_0x3ce987(0xfc)))_0x1e5f50[_0x3ce987(0x1cc)][_0x3ce987(0xb7)](_0x3ce987(0x134)+_0x46dc01[_0x3ce987(0x1e8)](0x5)[_0x3ce987(0x1cf)]());else{if(_0x46dc01['startsWith'](_0x3ce987(0x184)))try{const _0xa03dd8=JSON[_0x3ce987(0x10e)](_0x46dc01['substring'](0x8)[_0x3ce987(0x1cf)]());handlePythonResult(_0x1e5f50,_0xa03dd8);}catch(_0x47c243){}}});}),_0x1e5f50[_0x30f64d(0xc0)]['on']('close',_0x5ae56a=>{const _0x57e792=_0x30f64d;_0x1e5f50[_0x57e792(0xc0)]=null;});}catch(_0x1d8199){_0x1e5f50[_0x30f64d(0x1cc)][_0x30f64d(0x208)](_0x30f64d(0x14f)+_0x1d8199[_0x30f64d(0x114)]);}}async function runAutopilot(_0x44c07d){const _0x1a5b56=a0_0x1b649b;_0x44c07d['log'][_0x1a5b56(0xb7)]('ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...'),await runGeminiAnalysis(_0x44c07d),updateHealthVector(_0x44c07d),triggerGaitAnalysis(_0x44c07d),triggerEnergyPrediction(_0x44c07d);}async function triggerGaitAnalysis(_0x3abaae){const _0x590d8c=a0_0x1b649b;if(!_0x3abaae[_0x590d8c(0x1d8)])return;try{const _0x3b91e2=await _0x3abaae['getStateAsync'](_0x590d8c(0x17b));_0x3b91e2&&_0x3b91e2['val']&&sendToPython(_0x3abaae,_0x590d8c(0x1b7),{'sequences':JSON['parse'](_0x3b91e2[_0x590d8c(0x18a)])});}catch(_0x31cb2c){}}async function triggerEnergyPrediction(_0x200cf8){const _0x36f51b=a0_0x1b649b;if(!_0x200cf8['isProVersion'])return;try{const _0x23d4da=await getOutsideTemperatureNumeric(_0x200cf8);if(_0x23d4da===null)return;const _0x22c590={},_0x5beff6=_0x200cf8['config'][_0x36f51b(0xe1)]||[];for(const _0x220c95 of _0x5beff6){if(_0x220c95[_0x36f51b(0x1fd)]===_0x36f51b(0x1bc)&&_0x220c95['location']){const _0xf672ce=_0x200cf8[_0x36f51b(0x223)][_0x220c95['id']];if(_0xf672ce!==undefined)_0x22c590[_0x220c95[_0x36f51b(0x1e2)]]=_0xf672ce;}}Object[_0x36f51b(0x227)](_0x22c590)['length']>0x0&&sendToPython(_0x200cf8,_0x36f51b(0x19a),{'current_temps':_0x22c590,'t_out':_0x23d4da});}catch(_0x21deae){}}function updateHealthVector(_0x4d9288){const _0x16c41a=a0_0x1b649b;if(!_0x4d9288['rawEventLog']||_0x4d9288[_0x16c41a(0x1de)][_0x16c41a(0x112)]===0x0)return;const _0x12e664=new Array(0x60)[_0x16c41a(0x1d1)](0x0),_0x2feecf=new Date()['setHours'](0x0,0x0,0x0,0x0);_0x4d9288[_0x16c41a(0x1de)][_0x16c41a(0x160)](_0x5ad8cb=>{const _0xe80442=_0x16c41a,_0x22ac6d=new Date(_0x5ad8cb[_0xe80442(0x1f4)]);if(_0x22ac6d[_0xe80442(0xf7)]()>=_0x2feecf){const _0x230751=_0x22ac6d['getHours'](),_0x6d4dce=_0x22ac6d[_0xe80442(0xe4)](),_0x47a4e9=_0x230751*0x4+Math[_0xe80442(0x1c2)](_0x6d4dce/0xf);if(_0x47a4e9>=0x0&&_0x47a4e9<0x60)_0x12e664[_0x47a4e9]++;}}),_0x4d9288[_0x16c41a(0x1e4)]('analysis.health.todayVector',{'val':JSON['stringify'](_0x12e664),'ack':!![]});}async function getWeatherContext(_0x4348f4){const _0x52b081=a0_0x1b649b;if(!_0x4348f4[_0x52b081(0x1aa)][_0x52b081(0x167)]||!_0x4348f4[_0x52b081(0x1aa)][_0x52b081(0x200)])return'Wetterdaten\x20deaktiviert.';try{const _0x5ec9b2=_0x4348f4[_0x52b081(0x1aa)]['weatherInstance'];let _0x2ba9fb=await _0x4348f4[_0x52b081(0x221)](_0x5ec9b2+_0x52b081(0x172));if(!_0x2ba9fb)_0x2ba9fb=await _0x4348f4[_0x52b081(0x221)](_0x5ec9b2+'.forecast.current.temperature');let _0x56fec2=await _0x4348f4[_0x52b081(0x221)](_0x5ec9b2+_0x52b081(0xc6));if(!_0x56fec2)_0x56fec2=await _0x4348f4[_0x52b081(0x221)](_0x5ec9b2+'.forecast.current.state');if(_0x2ba9fb&&_0x56fec2)return _0x2ba9fb[_0x52b081(0x18a)]+_0x52b081(0xb2)+_0x56fec2['val'];}catch(_0xae3636){}return _0x52b081(0x12b);}async function getCalendarContext(_0x37225d){const _0x14ab13=a0_0x1b649b;if(!_0x37225d['config'][_0x14ab13(0x1e7)]||!_0x37225d['config'][_0x14ab13(0x195)])return'Kalender\x20deaktiviert.';return _0x14ab13(0x103);}async function getCalendarNames(_0x2b255f,_0x285d05){return[];}async function saveFeedback(_0x2e22b4,_0x389e90){const _0x32fead=a0_0x1b649b;_0x2e22b4['log']['info'](_0x32fead(0x19f)+_0x389e90[_0x32fead(0xc2)]);}async function runGeminiAnalysis(_0x2ca801,_0x28b87a=''){const _0x1b7c9a=a0_0x1b649b;if(!_0x2ca801['geminiModel'])return;if(_0x2ca801['eventHistory']['length']===0x0)return;const _0x26590d=_0x2ca801[_0x1b7c9a(0x18f)][_0x1b7c9a(0x1f6)](0x0,0xf),_0x79c368=await getWeatherContext(_0x2ca801),_0x17983c=_0x2ca801[_0x1b7c9a(0x1df)],_0x5c5106=PERSONA_MAPPING[_0x2ca801[_0x1b7c9a(0x1aa)]['aiPersona']||_0x1b7c9a(0x1b5)],_0x4f63f4=_0x2ca801[_0x1b7c9a(0x1aa)][_0x1b7c9a(0x11a)]||'Keine\x20Details.';let _0x2cb90c=_0x1b7c9a(0x1d6);try{const _0x1050e7=await _0x2ca801[_0x1b7c9a(0x16c)](_0x1b7c9a(0x1e3));if(_0x1050e7&&_0x1050e7[_0x1b7c9a(0x18a)])_0x2cb90c=_0x1050e7[_0x1b7c9a(0x18a)];}catch(_0x23f428){}let _0x3822ca=![];try{const _0x32fc10=await _0x2ca801[_0x1b7c9a(0x16c)](_0x1b7c9a(0x193));if(_0x32fc10&&_0x32fc10[_0x1b7c9a(0x18a)])_0x3822ca=!![];}catch(_0x41d755){}const _0x10c121=_0x1b7c9a(0x1ea)+_0x5c5106+_0x1b7c9a(0x245)+_0x4f63f4+_0x1b7c9a(0x168)+_0x17983c+_0x1b7c9a(0x10c)+_0x79c368+_0x1b7c9a(0xfe)+_0x2cb90c+_0x1b7c9a(0x158)+JSON[_0x1b7c9a(0x1d5)](_0x26590d)+_0x1b7c9a(0x22a)+_0x28b87a+'.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}';try{const _0x3c45d3=await _0x2ca801[_0x1b7c9a(0x249)]['generateContent'](_0x10c121),_0x1c6ad8=JSON[_0x1b7c9a(0x10e)](_0x3c45d3[_0x1b7c9a(0x102)]['text']()['replace'](/```json|```/g,'')['trim']());await _0x2ca801[_0x1b7c9a(0x1e4)]('analysis.lastResult',{'val':JSON[_0x1b7c9a(0x1d5)](_0x1c6ad8),'ack':!![]});if(_0x1c6ad8[_0x1b7c9a(0xbd)])await _0x2ca801[_0x1b7c9a(0x1e4)](_0x1b7c9a(0x189),{'val':_0x1c6ad8['summary'],'ack':!![]});const _0x598a70={'timestamp':Date[_0x1b7c9a(0x14e)](),'id':Date[_0x1b7c9a(0x14e)]()[_0x1b7c9a(0x11f)](),'analysis':{'activity':{'summary':_0x1c6ad8[_0x1b7c9a(0xbd)],'isAlert':_0x1c6ad8[_0x1b7c9a(0x211)],'alertReason':_0x1c6ad8[_0x1b7c9a(0x1c6)]},'comfort':{'automationProposal':_0x1c6ad8['automationProposal']}}};await updateAnalysisHistory(_0x2ca801,_0x598a70);const _0x45b875=_0x1c6ad8['isAlert']||![];_0x45b875!==_0x2ca801[_0x1b7c9a(0xff)]&&(await _0x2ca801[_0x1b7c9a(0x1e4)](_0x1b7c9a(0x132),{'val':_0x45b875,'ack':!![]}),_0x2ca801[_0x1b7c9a(0xff)]=_0x45b875,_0x45b875&&(await _0x2ca801[_0x1b7c9a(0x1e4)](_0x1b7c9a(0x148),{'val':_0x1c6ad8[_0x1b7c9a(0x1c6)],'ack':!![]}),sendNotification(_0x2ca801,_0x1b7c9a(0x1c0)+_0x1c6ad8['alertReason'],![],_0x1c6ad8['isEmergency'])));if(_0x1c6ad8[_0x1b7c9a(0x130)]&&_0x1c6ad8[_0x1b7c9a(0x130)]['detected']){await _0x2ca801[_0x1b7c9a(0x1e4)](_0x1b7c9a(0xbe),{'val':!![],'ack':!![]}),await _0x2ca801[_0x1b7c9a(0x1e4)](_0x1b7c9a(0x20a),{'val':_0x1c6ad8[_0x1b7c9a(0x130)][_0x1b7c9a(0x1f1)],'ack':!![]}),await _0x2ca801[_0x1b7c9a(0x1e4)](_0x1b7c9a(0x155),{'val':_0x1c6ad8[_0x1b7c9a(0x130)][_0x1b7c9a(0xf5)],'ack':!![]}),await _0x2ca801['setStateAsync'](_0x1b7c9a(0x122),{'val':JSON[_0x1b7c9a(0x1d5)](_0x1c6ad8[_0x1b7c9a(0x130)]['targetValue']),'ack':!![]});if(_0x3822ca)executeAutomationAction(_0x2ca801);}}catch(_0x3598a3){_0x2ca801['log'][_0x1b7c9a(0x208)](_0x1b7c9a(0x14a)+_0x3598a3[_0x1b7c9a(0x114)]);}}async function startSystem(_0x4e6c06){const _0xf6a03e=a0_0x1b649b;_0x4e6c06[_0xf6a03e(0x1cc)][_0xf6a03e(0x238)](_0xf6a03e(0x107)),await initZombies(_0x4e6c06);try{_0x4e6c06['isProVersion']=await checkLicense(_0x4e6c06[_0xf6a03e(0x1aa)][_0xf6a03e(0x161)]);}catch(_0x313020){}if(!_0x4e6c06['config'][_0xf6a03e(0x106)]||_0x4e6c06[_0xf6a03e(0x1aa)][_0xf6a03e(0x106)]<0.1)_0x4e6c06['config'][_0xf6a03e(0x106)]=0xc;await initHistory(_0x4e6c06),await initSystemConfig(_0x4e6c06);if(_0x4e6c06['config'][_0xf6a03e(0x144)])try{_0x4e6c06[_0xf6a03e(0x19d)]=new GoogleGenerativeAI(_0x4e6c06['config'][_0xf6a03e(0x144)]),_0x4e6c06[_0xf6a03e(0x249)]=_0x4e6c06[_0xf6a03e(0x19d)][_0xf6a03e(0x1db)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0xf6a03e(0x139)}}),_0x4e6c06[_0xf6a03e(0x1cc)][_0xf6a03e(0x238)](_0xf6a03e(0xfd));}catch(_0x584cd6){_0x4e6c06[_0xf6a03e(0x1cc)][_0xf6a03e(0x208)](_0xf6a03e(0x1ff)+_0x584cd6['message']);}await createAllObjects(_0x4e6c06),await loadSystemMode(_0x4e6c06),await loadRawEventLog(_0x4e6c06),await loadDailyDigests(_0x4e6c06),_0x4e6c06[_0xf6a03e(0x23b)](_0xf6a03e(0x21c)),_0x4e6c06[_0xf6a03e(0x23b)](LTM_DP_TRIGGER_DIGEST),_0x4e6c06['subscribeStates'](_0xf6a03e(0xc1)),_0x4e6c06[_0xf6a03e(0x23b)](_0xf6a03e(0x225)),_0x4e6c06[_0xf6a03e(0x23b)](_0xf6a03e(0x185)),_0x4e6c06['subscribeStates'](_0xf6a03e(0x193)),_0x4e6c06[_0xf6a03e(0x23b)](_0xf6a03e(0x149)),_0x4e6c06[_0xf6a03e(0x23b)](_0xf6a03e(0x15d)),_0x4e6c06['subscribeStates'](_0xf6a03e(0x1bd)),_0x4e6c06[_0xf6a03e(0x23b)](_0xf6a03e(0x192)),_0x4e6c06['subscribeStates']('analysis.training.triggerTopology'),await initSensorSubscriptions(_0x4e6c06),await initPresenceSubscriptions(_0x4e6c06),await setupTelegramListener(_0x4e6c06),setTimeout(()=>checkWifiPresence(_0x4e6c06),0x1388);if(_0x4e6c06[_0xf6a03e(0x247)])clearInterval(_0x4e6c06[_0xf6a03e(0x247)]);const _0x13bdfe=_0x4e6c06['config'][_0xf6a03e(0x109)]||0xf;_0x13bdfe>0x0&&(_0x4e6c06[_0xf6a03e(0x247)]=setInterval(()=>{runAutopilot(_0x4e6c06);},_0x13bdfe*0x3c*0x3e8)),schedulers['setupLtmScheduler'](_0x4e6c06,()=>createDailyDigest(_0x4e6c06)),schedulers['setupModeResetScheduler'](_0x4e6c06),schedulers[_0xf6a03e(0x23a)](_0x4e6c06,()=>runBaselineDriftAnalysis(_0x4e6c06)),schedulers[_0xf6a03e(0x17e)](_0x4e6c06,()=>sendMorningBriefing(_0x4e6c06)),startPythonService(_0x4e6c06),setTimeout(()=>{const _0x645db9=_0xf6a03e;_0x4e6c06[_0x645db9(0xc0)]&&(runPythonHealthCheck(_0x4e6c06),triggerGaitAnalysis(_0x4e6c06),triggerEnergyPrediction(_0x4e6c06)),updateHealthVector(_0x4e6c06);},0x1388);}class CogniLiving extends utils[a0_0x1b649b(0xd0)]{constructor(_0x27d155){const _0x100f30=a0_0x1b649b;super({..._0x27d155,'name':_0x100f30(0x1a9)}),this['eventHistory']=[],this[_0x100f30(0x233)]=[],this[_0x100f30(0x1de)]=[],this[_0x100f30(0xdf)]=[],this[_0x100f30(0x223)]={},this[_0x100f30(0x1f0)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x100f30(0xd4)]=!![],this[_0x100f30(0x17c)]=null,this[_0x100f30(0x12f)]=null,this[_0x100f30(0xf3)]=![],this[_0x100f30(0x19d)]=null,this[_0x100f30(0x249)]=null,this[_0x100f30(0x1df)]=SYSTEM_MODES[_0x100f30(0x1a8)],this['isProVersion']=![],this['lastAlertState']=![],this[_0x100f30(0x13a)]='unknown',this['analysisTimer']=null,this[_0x100f30(0xf9)]=null,this[_0x100f30(0x22c)]=null,this[_0x100f30(0x124)]=null,this[_0x100f30(0x121)]=null,this[_0x100f30(0xc0)]=null,this[_0x100f30(0x13f)]=![],this['on'](_0x100f30(0x164),this[_0x100f30(0xe5)][_0x100f30(0x1c9)](this)),this['on'](_0x100f30(0x186),this[_0x100f30(0xd8)][_0x100f30(0x1c9)](this)),this['on'](_0x100f30(0x1d3),this[_0x100f30(0x12a)][_0x100f30(0x1c9)](this)),this['on']('message',this[_0x100f30(0x187)]['bind'](this));}async[a0_0x1b649b(0xe5)](){const _0x5f521b=a0_0x1b649b;this[_0x5f521b(0x1cc)]['info'](_0x5f521b(0x1bf)+this['version']+_0x5f521b(0x20b));if(!installer[_0x5f521b(0x135)](this,()=>startSystem(this)))return;}[a0_0x1b649b(0x12a)](_0x23ecbd){const _0x4da3c1=a0_0x1b649b;if(this['analysisTimer'])clearInterval(this['analysisTimer']);if(this[_0x4da3c1(0x124)])clearInterval(this[_0x4da3c1(0x124)]);if(this[_0x4da3c1(0xf9)])this[_0x4da3c1(0xf9)]['cancel']();if(this[_0x4da3c1(0x22c)])this[_0x4da3c1(0x22c)][_0x4da3c1(0x203)]();if(this['briefingJob'])this[_0x4da3c1(0x121)][_0x4da3c1(0x203)]();if(this[_0x4da3c1(0x17c)])clearTimeout(this['exitTimer']);if(this[_0x4da3c1(0x12f)])clearTimeout(this[_0x4da3c1(0x12f)]);stopPythonService(this),_0x23ecbd();}async[a0_0x1b649b(0xd8)](_0x3e7f9a,_0x5d4854){const _0x5843e7=a0_0x1b649b;if(!_0x5d4854||this['dependencyInstallInProgress'])return;if(_0x3e7f9a[_0x5843e7(0x1be)](_0x5843e7(0x1ac))&&_0x3e7f9a['endsWith']('communicate.request')&&_0x5d4854[_0x5843e7(0x18a)]){await handleTelegramResponse(this,_0x5d4854['val']);return;}if(_0x3e7f9a===this['namespace']+'.'+SYSTEM_DP_MODE){if(_0x5d4854[_0x5843e7(0x18a)]&&Object[_0x5843e7(0x182)](SYSTEM_MODES)[_0x5843e7(0x1be)](_0x5d4854['val'])){this[_0x5843e7(0x1df)]=_0x5d4854[_0x5843e7(0x18a)];if(_0x5d4854[_0x5843e7(0x18a)]===SYSTEM_MODES[_0x5843e7(0x213)])await setPresence(this,![]);else await setPresence(this,!![]);}if(!_0x5d4854[_0x5843e7(0x207)])this[_0x5843e7(0x179)](_0x3e7f9a,{'val':this[_0x5843e7(0x1df)],'ack':!![]});return;}if(!_0x5d4854['ack']){_0x3e7f9a['includes']('analysis.trigger')&&_0x5d4854[_0x5843e7(0x18a)]&&(this[_0x5843e7(0x179)](_0x3e7f9a,{'val':![],'ack':!![]}),runGeminiAnalysis(this));if(_0x3e7f9a[_0x5843e7(0x1be)]('triggerDailyDigest')&&_0x5d4854[_0x5843e7(0x18a)]){this[_0x5843e7(0x179)](_0x3e7f9a,{'val':![],'ack':!![]});if(this[_0x5843e7(0x1d8)])createDailyDigest(this);}_0x3e7f9a[_0x5843e7(0x1be)](_0x5843e7(0x131))&&_0x5d4854['val']&&(this['setState'](_0x3e7f9a,{'val':![],'ack':!![]}),sendMorningBriefing(this));_0x3e7f9a[_0x5843e7(0x1be)](_0x5843e7(0x11d))&&_0x5d4854[_0x5843e7(0x18a)]&&(this[_0x5843e7(0x179)](_0x3e7f9a,{'val':![],'ack':!![]}),executeAutomationAction(this));if(_0x3e7f9a['includes'](_0x5843e7(0x149))&&_0x5d4854['val']){this[_0x5843e7(0x179)](_0x3e7f9a,{'val':![],'ack':!![]});if(this[_0x5843e7(0x1d8)])try{const _0x365667=await this[_0x5843e7(0x16c)](_0x5843e7(0x17b));if(_0x365667&&_0x365667[_0x5843e7(0x18a)]){const _0xa479cd=JSON[_0x5843e7(0x10e)](_0x365667[_0x5843e7(0x18a)]);this[_0x5843e7(0x1cc)][_0x5843e7(0x238)](_0x5843e7(0xbc)),this['setStateAsync'](_0x5843e7(0x204),{'val':_0x5843e7(0xd6),'ack':!![]}),sendToPython(this,_0x5843e7(0x100),{'sequences':_0xa479cd});}}catch(_0x1586c1){this[_0x5843e7(0x1cc)][_0x5843e7(0x208)](_0x5843e7(0xf0)+_0x1586c1[_0x5843e7(0x114)]);}}if(_0x3e7f9a['includes']('analysis.training.triggerHealth')&&_0x5d4854[_0x5843e7(0x18a)]){this[_0x5843e7(0x179)](_0x3e7f9a,{'val':![],'ack':!![]});if(this[_0x5843e7(0x1d8)])try{const _0x29742e=await this[_0x5843e7(0x16c)](LTM_DP_DAILY_DIGESTS);if(_0x29742e&&_0x29742e['val'])sendToPython(this,_0x5843e7(0x171),{'digests':JSON[_0x5843e7(0x10e)](_0x29742e[_0x5843e7(0x18a)])});}catch(_0x55fd2c){}}if(_0x3e7f9a['includes'](_0x5843e7(0x1bd))&&_0x5d4854['val']){this['setState'](_0x3e7f9a,{'val':![],'ack':!![]});if(this[_0x5843e7(0x1d8)])try{const _0x519126=await this[_0x5843e7(0x16c)](_0x5843e7(0x157));if(_0x519126&&_0x519126[_0x5843e7(0x18a)])sendToPython(this,'TRAIN_ENERGY',{'points':JSON[_0x5843e7(0x10e)](_0x519126[_0x5843e7(0x18a)])});}catch(_0x7be4f9){}}if(_0x3e7f9a[_0x5843e7(0x1be)](_0x5843e7(0x192))&&_0x5d4854[_0x5843e7(0x18a)]){this[_0x5843e7(0x179)](_0x3e7f9a,{'val':![],'ack':!![]});if(this[_0x5843e7(0x1d8)])try{const _0x3be576=await this[_0x5843e7(0x16c)](LTM_DP_RAW_LOG);_0x3be576&&_0x3be576[_0x5843e7(0x18a)]&&(this[_0x5843e7(0x1cc)][_0x5843e7(0x238)](_0x5843e7(0x15f)),sendToPython(this,_0x5843e7(0x17d),{'events':JSON[_0x5843e7(0x10e)](_0x3be576['val'])}));}catch(_0xd6ee8a){}}if(_0x3e7f9a[_0x5843e7(0x1be)](_0x5843e7(0x145))&&_0x5d4854['val']){this[_0x5843e7(0x179)](_0x3e7f9a,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x5be0df=await this[_0x5843e7(0x16c)](_0x5843e7(0x17b));if(_0x5be0df&&_0x5be0df[_0x5843e7(0x18a)]){const _0x59b625=JSON[_0x5843e7(0x10e)](_0x5be0df[_0x5843e7(0x18a)]);this['log'][_0x5843e7(0x238)](_0x5843e7(0x113)),sendToPython(this,'BUILD_TOPOLOGY',{'sequences':_0x59b625});}}catch(_0x5ed08b){this[_0x5843e7(0x1cc)][_0x5843e7(0x208)](_0x5843e7(0x1ee)+_0x5ed08b[_0x5843e7(0x114)]);}}return;}if(this[_0x5843e7(0x1aa)]['presenceDevices']&&this[_0x5843e7(0x1aa)][_0x5843e7(0x1b6)]['includes'](_0x3e7f9a)){await checkWifiPresence(this);return;}const _0x36415e=(this[_0x5843e7(0x1aa)][_0x5843e7(0xe1)]||[])[_0x5843e7(0x140)](_0x3ec80e=>_0x3ec80e['id']===_0x3e7f9a);if(_0x36415e)processSensorEvent(this,_0x3e7f9a,_0x5d4854,_0x36415e);}async[a0_0x1b649b(0x187)](_0x4cac0a){const _0x2509ad=a0_0x1b649b;if(typeof _0x4cac0a===_0x2509ad(0x125)&&_0x4cac0a[_0x2509ad(0x114)]){if(_0x4cac0a[_0x2509ad(0x1e1)]===_0x2509ad(0x1ef)){const _0x282cb3=_0x4cac0a[_0x2509ad(0x114)]['apiKey']||this[_0x2509ad(0x1aa)][_0x2509ad(0x144)];if(!_0x282cb3)return this[_0x2509ad(0xd7)](_0x4cac0a['from'],_0x4cac0a[_0x2509ad(0x1e1)],{'success':![],'message':_0x2509ad(0x1d7)},_0x4cac0a['callback']);try{const _0xcee044=new GoogleGenerativeAI(_0x282cb3),_0x468f34=_0xcee044[_0x2509ad(0x1db)]({'model':GEMINI_MODEL}),_0x368f30=await _0x468f34['generateContent']('Hi');this['sendTo'](_0x4cac0a[_0x2509ad(0xd3)],_0x4cac0a[_0x2509ad(0x1e1)],{'success':!![],'message':_0x2509ad(0x11c)+_0x368f30['response'][_0x2509ad(0x1c4)]()},_0x4cac0a[_0x2509ad(0x1e5)]);}catch(_0x5bc54d){this[_0x2509ad(0xd7)](_0x4cac0a[_0x2509ad(0xd3)],_0x4cac0a[_0x2509ad(0x1e1)],{'success':![],'message':_0x2509ad(0x218)+_0x5bc54d['message']},_0x4cac0a['callback']);}}else{if(_0x4cac0a[_0x2509ad(0x1e1)]===_0x2509ad(0x1a5)){const _0xba4a56=await getWeatherContext(this),_0x3d4c43=await getCalendarContext(this);this[_0x2509ad(0xd7)](_0x4cac0a[_0x2509ad(0xd3)],_0x4cac0a[_0x2509ad(0x1e1)],{'success':!![],'weather':_0xba4a56,'calendar':_0x3d4c43},_0x4cac0a[_0x2509ad(0x1e5)]);}else{if(_0x4cac0a['command']==='getLtmData'){if(!this[_0x2509ad(0x1d8)])return this[_0x2509ad(0xd7)](_0x4cac0a[_0x2509ad(0xd3)],_0x4cac0a[_0x2509ad(0x1e1)],{'success':![],'isPro':![]},_0x4cac0a['callback']);let _0x498acf={'status':_0x2509ad(0x220)};try{const _0x22260d=await this[_0x2509ad(0x16c)](LTM_DP_DRIFT_STATUS);_0x498acf['status']=_0x22260d?_0x22260d[_0x2509ad(0x18a)]:_0x2509ad(0x220);}catch(_0x4007ad){}this[_0x2509ad(0xd7)](_0x4cac0a['from'],_0x4cac0a[_0x2509ad(0x1e1)],{'success':!![],'isPro':!![],'dailyDigests':this[_0x2509ad(0xdf)],'driftAnalysis':_0x498acf,'analysisHistory':this[_0x2509ad(0x233)]},_0x4cac0a['callback']);}else{if(_0x4cac0a[_0x2509ad(0x1e1)]===_0x2509ad(0x142)){const _0x2a0e39=this['dailyDigests'][_0x2509ad(0x112)],_0x8aff8b=new Date(),_0x1e6506=new Date(_0x8aff8b[_0x2509ad(0x156)](),_0x8aff8b['getMonth'](),_0x8aff8b['getDate']())[_0x2509ad(0xf7)](),_0x26cd1d=this[_0x2509ad(0x1de)][_0x2509ad(0x235)](_0x53395c=>new Date(_0x53395c[_0x2509ad(0x1f4)])[_0x2509ad(0xf7)]()>_0x1e6506)[_0x2509ad(0x112)],_0x3e0eae=new Array(0x18)[_0x2509ad(0x1d1)](0x0);this[_0x2509ad(0x1de)][_0x2509ad(0x160)](_0x8b7d01=>{const _0x430eac=_0x2509ad,_0x3174cc=new Date(_0x8b7d01[_0x430eac(0x1f4)]);if(_0x3174cc[_0x430eac(0xf7)]()>_0x1e6506)_0x3e0eae[_0x3174cc[_0x430eac(0x23c)]()]++;});let _0x1f4c8a={'status':'N/A'};try{const _0x3c032e=await this[_0x2509ad(0x16c)](LTM_DP_DRIFT_STATUS);_0x1f4c8a[_0x2509ad(0x20d)]=_0x3c032e?_0x3c032e['val']:_0x2509ad(0x220);}catch(_0x5ac2ec){}let _0x159608='';try{const _0x140b60=await this[_0x2509ad(0x16c)](_0x2509ad(0x1e3));_0x159608=_0x140b60?_0x140b60['val']:'';}catch(_0x560d39){}let _0xbc7b4=null;!this['geminiModel']&&(_0xbc7b4=this['config']['geminiApiKey']?_0x2509ad(0x198):_0x2509ad(0x1b2));let _0x46d1f3={'detected':![],'description':'','targetId':'','targetValue':'','autoApply':![]};try{const _0x86b6ff=await this[_0x2509ad(0x16c)](_0x2509ad(0xbe));if(_0x86b6ff&&_0x86b6ff['val']){_0x46d1f3[_0x2509ad(0x199)]=!![];const _0x16cde4=await this[_0x2509ad(0x16c)]('analysis.automation.description');_0x46d1f3['description']=_0x16cde4?_0x16cde4[_0x2509ad(0x18a)]:'';const _0x133532=await this[_0x2509ad(0x16c)](_0x2509ad(0x155));_0x46d1f3[_0x2509ad(0xf5)]=_0x133532?_0x133532[_0x2509ad(0x18a)]:'';const _0x25e6bd=await this[_0x2509ad(0x16c)](_0x2509ad(0x122));_0x46d1f3[_0x2509ad(0xf8)]=_0x25e6bd?_0x25e6bd[_0x2509ad(0x18a)]:'';}const _0x4ac2fc=await this[_0x2509ad(0x16c)](_0x2509ad(0x193));_0x46d1f3['autoApply']=_0x4ac2fc?!!_0x4ac2fc[_0x2509ad(0x18a)]:![];}catch(_0xcb7d2d){}this[_0x2509ad(0xd7)](_0x4cac0a[_0x2509ad(0xd3)],_0x4cac0a['command'],{'success':!![],'eventHistory':this[_0x2509ad(0x18f)][_0x2509ad(0x1f6)](0x0,0xf),'stats':{'digestCount':_0x2a0e39,'eventCountToday':_0x26cd1d,'hourlyActivity':_0x3e0eae,'driftStatus':_0x1f4c8a[_0x2509ad(0x20d)],'isPresent':this[_0x2509ad(0xd4)],'presenceWho':_0x159608,'minDays':this[_0x2509ad(0x1aa)][_0x2509ad(0xeb)]||0x7,'stbDays':this['config'][_0x2509ad(0x1cb)]||0xe,'ltbDays':this[_0x2509ad(0x1aa)][_0x2509ad(0x174)]||0x3c,'systemError':_0xbc7b4},'automation':_0x46d1f3},_0x4cac0a[_0x2509ad(0x1e5)]);}else{if(_0x4cac0a[_0x2509ad(0x1e1)]===_0x2509ad(0x16b))try{const _0x1cbffd=await scanner[_0x2509ad(0x146)](this,_0x4cac0a[_0x2509ad(0x114)]||{});this[_0x2509ad(0xd7)](_0x4cac0a[_0x2509ad(0xd3)],_0x4cac0a[_0x2509ad(0x1e1)],{'success':!![],'devices':_0x1cbffd},_0x4cac0a[_0x2509ad(0x1e5)]);}catch(_0x4ccdd3){this[_0x2509ad(0xd7)](_0x4cac0a[_0x2509ad(0xd3)],_0x4cac0a[_0x2509ad(0x1e1)],{'success':![],'error':_0x4ccdd3[_0x2509ad(0x114)]},_0x4cac0a['callback']);}else{if(_0x4cac0a['command']===_0x2509ad(0x209)){const _0x40dfdc=await this[_0x2509ad(0xcb)](_0x2509ad(0x229),'enum'),_0x3474fe=[];if(_0x40dfdc)for(const _0x2860bf in _0x40dfdc){const _0x2e2b16=_0x40dfdc[_0x2860bf],_0x275c31=(_0x2e2b16[_0x2509ad(0x1f3)]&&typeof _0x2e2b16[_0x2509ad(0x1f3)][_0x2509ad(0xf4)]===_0x2509ad(0x125)?_0x2e2b16['common'][_0x2509ad(0xf4)]['de']:_0x2e2b16[_0x2509ad(0x1f3)][_0x2509ad(0xf4)])||_0x2e2b16[_0x2509ad(0x1f3)]['name'];_0x3474fe[_0x2509ad(0x154)]({'id':_0x2860bf,'name':_0x275c31});}const _0x16858f=await this['getForeignObjectsAsync']('enum.rooms.*',_0x2509ad(0x120)),_0x471b82=[];if(_0x16858f)for(const _0x4e933b in _0x16858f){const _0x547b88=_0x16858f[_0x4e933b],_0x425170=(_0x547b88[_0x2509ad(0x1f3)]&&typeof _0x547b88[_0x2509ad(0x1f3)][_0x2509ad(0xf4)]===_0x2509ad(0x125)?_0x547b88[_0x2509ad(0x1f3)][_0x2509ad(0xf4)]['de']:_0x547b88[_0x2509ad(0x1f3)][_0x2509ad(0xf4)])||_0x4e933b[_0x2509ad(0xf1)]('.')['pop']();_0x471b82['push'](_0x425170);}this[_0x2509ad(0xd7)](_0x4cac0a[_0x2509ad(0xd3)],_0x4cac0a[_0x2509ad(0x1e1)],{'success':!![],'enums':_0x3474fe,'rooms':_0x471b82},_0x4cac0a['callback']);}else{if(_0x4cac0a['command']===_0x2509ad(0x13c)){const _0x393141=_0x4cac0a[_0x2509ad(0x114)][_0x2509ad(0x1d2)];if(!_0x393141)return this[_0x2509ad(0xd7)](_0x4cac0a[_0x2509ad(0xd3)],_0x4cac0a[_0x2509ad(0x1e1)],{'success':![],'error':_0x2509ad(0xd1)},_0x4cac0a['callback']);const _0x496069=await getCalendarNames(this,_0x393141);this[_0x2509ad(0xd7)](_0x4cac0a[_0x2509ad(0xd3)],_0x4cac0a[_0x2509ad(0x1e1)],{'success':!![],'names':_0x496069},_0x4cac0a[_0x2509ad(0x1e5)]);}else{if(_0x4cac0a[_0x2509ad(0x1e1)]===_0x2509ad(0x1b1)){const {targetId:_0x65c910,targetValue:_0x5dacb4}=_0x4cac0a[_0x2509ad(0x114)];this[_0x2509ad(0x1cc)][_0x2509ad(0x238)](_0x2509ad(0x1ba)+_0x65c910+_0x2509ad(0x244)+_0x5dacb4),await this[_0x2509ad(0x1e4)](_0x2509ad(0xbe),{'val':!![],'ack':!![]}),await this[_0x2509ad(0x1e4)]('analysis.automation.description',{'val':'SIMULATION:\x20Test-Vorschlag\x20fÃ¼r\x20'+_0x65c910,'ack':!![]}),await this[_0x2509ad(0x1e4)]('analysis.automation.targetId',{'val':_0x65c910,'ack':!![]}),await this[_0x2509ad(0x1e4)](_0x2509ad(0x122),{'val':_0x5dacb4,'ack':!![]}),this['sendTo'](_0x4cac0a[_0x2509ad(0xd3)],_0x4cac0a[_0x2509ad(0x1e1)],{'success':!![]},_0x4cac0a[_0x2509ad(0x1e5)]);}else{if(_0x4cac0a['command']===_0x2509ad(0x108)){const {historyId:_0x5d3dc7,rating:_0x3adde7,comment:_0x31f340,alertReason:_0x63e7f4}=_0x4cac0a[_0x2509ad(0x114)];_0x5d3dc7&&_0x3adde7?(await saveFeedback(this,{'timestamp':Date[_0x2509ad(0x14e)](),'historyId':_0x5d3dc7,'rating':_0x3adde7,'comment':_0x31f340,'alertReason':_0x63e7f4}),this[_0x2509ad(0xd7)](_0x4cac0a[_0x2509ad(0xd3)],_0x4cac0a[_0x2509ad(0x1e1)],{'success':!![]},_0x4cac0a['callback'])):this['sendTo'](_0x4cac0a[_0x2509ad(0xd3)],_0x4cac0a[_0x2509ad(0x1e1)],{'success':![],'error':_0x2509ad(0xe0)},_0x4cac0a[_0x2509ad(0x1e5)]);}else _0x4cac0a[_0x2509ad(0x1e1)]===_0x2509ad(0xe7)&&(this[_0x2509ad(0x1cc)][_0x2509ad(0x238)](_0x2509ad(0x163)),await this[_0x2509ad(0x1e4)](_0x2509ad(0xbe),{'val':![],'ack':!![]}),await this[_0x2509ad(0x1e4)](_0x2509ad(0x20a),{'val':'','ack':!![]}),this[_0x2509ad(0xd7)](_0x4cac0a[_0x2509ad(0xd3)],_0x4cac0a[_0x2509ad(0x1e1)],{'success':!![]},_0x4cac0a[_0x2509ad(0x1e5)]));}}}}}}}}}}}if(require[a0_0x1b649b(0x16e)]!==module)module[a0_0x1b649b(0x162)]=_0x50e52f=>new CogniLiving(_0x50e52f);else new CogniLiving();