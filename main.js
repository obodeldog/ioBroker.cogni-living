const a0_0x266621=a0_0x3aa0;(function(_0x3af1ad,_0x1b2238){const _0x1a8b1c=a0_0x3aa0,_0x16914=_0x3af1ad();while(!![]){try{const _0x119be0=-parseInt(_0x1a8b1c(0x261))/0x1*(-parseInt(_0x1a8b1c(0x1b3))/0x2)+parseInt(_0x1a8b1c(0x191))/0x3+parseInt(_0x1a8b1c(0x1f4))/0x4*(-parseInt(_0x1a8b1c(0x1e8))/0x5)+parseInt(_0x1a8b1c(0x1a7))/0x6*(-parseInt(_0x1a8b1c(0x16b))/0x7)+-parseInt(_0x1a8b1c(0x21e))/0x8+parseInt(_0x1a8b1c(0x1ea))/0x9+parseInt(_0x1a8b1c(0x1db))/0xa*(parseInt(_0x1a8b1c(0x1c7))/0xb);if(_0x119be0===_0x1b2238)break;else _0x16914['push'](_0x16914['shift']());}catch(_0x15db69){_0x16914['push'](_0x16914['shift']());}}}(a0_0x38fb,0x8d850));const a0_0x2d263c=(function(){let _0x542b5c=!![];return function(_0x4df9f8,_0x532481){const _0xdb004d=_0x542b5c?function(){const _0x2d3011=a0_0x3aa0;if(_0x532481){const _0x8d7575=_0x532481[_0x2d3011(0x1e0)](_0x4df9f8,arguments);return _0x532481=null,_0x8d7575;}}:function(){};return _0x542b5c=![],_0xdb004d;};}()),a0_0x4c8439=a0_0x2d263c(this,function(){const _0x4c1017=a0_0x3aa0;return a0_0x4c8439[_0x4c1017(0x210)]()[_0x4c1017(0x285)](_0x4c1017(0x25b))[_0x4c1017(0x210)]()[_0x4c1017(0x226)](a0_0x4c8439)['search']('(((.+)+)+)+$');});a0_0x4c8439();'use strict';const utils=require('@iobroker/adapter-core'),{GoogleGenerativeAI}=require(a0_0x266621(0x227)),{spawn}=require('child_process'),path=require(a0_0x266621(0x146)),fs=require('fs'),installer=require(a0_0x266621(0x131)),scanner=require(a0_0x266621(0x267)),schedulers=require(a0_0x266621(0x1a1)),HISTORY_MAX_SIZE=0x32,RAW_LOG_MAX_SIZE=0x9c4,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL='models/gemini-flash-latest',SEQUENCE_TIMEOUT_MS=0x5*0x3c*0x3e8,MAX_TRAINING_SET_SIZE=0x1f4,THERMO_LOG_SIZE=0x3e8,EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,LTM_DP_RAW_LOG=a0_0x266621(0x239),LTM_DP_DAILY_DIGESTS=a0_0x266621(0x1a3),LTM_DP_STATUS=a0_0x266621(0x292),LTM_DP_TRIGGER_DIGEST=a0_0x266621(0x214),LTM_DP_BASELINE_STATUS=a0_0x266621(0x11b),LTM_DP_DRIFT_CHANNEL=a0_0x266621(0x252),LTM_DP_DRIFT_STATUS=a0_0x266621(0x286),LTM_DP_DRIFT_DETAILS=a0_0x266621(0x234),LTM_DP_DRIFT_LAST_CHECK='LTM.driftAnalysis.lastCheck',SYSTEM_DP_MODE='system.mode',SYSTEM_MODES={'NORMAL':a0_0x266621(0x25e),'VACATION':'vacation','PARTY':'party','GUEST':a0_0x266621(0x14a)},AUTO_RESET_MODES=[SYSTEM_MODES['PARTY'],SYSTEM_MODES['GUEST']],PERSONA_MAPPING={'generic':a0_0x266621(0x180),'senior_aal':a0_0x266621(0x28a),'family':a0_0x266621(0x1a0),'single_comfort':a0_0x266621(0x145),'security':a0_0x266621(0x23d)},ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};let activeSequence=[],sequenceTimer=null;async function initZombies(_0x5eabff){const _0x205d8a=a0_0x266621;try{const _0x4468df=[_0x205d8a(0x172),_0x205d8a(0x16c)];for(const _0x23eacb of _0x4468df){try{const _0x21b920=await _0x5eabff[_0x205d8a(0x205)](_0x23eacb);if(_0x21b920)await _0x5eabff[_0x205d8a(0x149)](_0x23eacb);}catch(_0x14bde8){}}}catch(_0x319cc9){}}async function checkLicense(_0x34a234){return!![];}async function initHistory(_0x43ee4f){const _0x245a1c=a0_0x266621;try{const _0x15e53e=await _0x43ee4f[_0x245a1c(0x24f)](_0x245a1c(0x1f9));_0x15e53e&&_0x15e53e[_0x245a1c(0x1ce)]&&(_0x43ee4f[_0x245a1c(0x14f)]=JSON[_0x245a1c(0x232)](_0x15e53e['val'][_0x245a1c(0x210)]()));}catch(_0x34b50b){_0x43ee4f[_0x245a1c(0x14f)]=[];}try{const _0x442250=await _0x43ee4f[_0x245a1c(0x24f)](_0x245a1c(0x1e3));if(_0x442250&&_0x442250['val'])_0x43ee4f['analysisHistory']=JSON['parse'](_0x442250[_0x245a1c(0x1ce)]['toString']());}catch(_0x52a455){_0x43ee4f['analysisHistory']=[];}if(_0x43ee4f['eventHistory']&&_0x43ee4f['eventHistory'][_0x245a1c(0x12d)]>0x0){_0x43ee4f[_0x245a1c(0x15b)][_0x245a1c(0x283)]('Restoring\x20sensor\x20cache...');for(let _0x2a776a=_0x43ee4f[_0x245a1c(0x14f)][_0x245a1c(0x12d)]-0x1;_0x2a776a>=0x0;_0x2a776a--){const _0x2b4c68=_0x43ee4f[_0x245a1c(0x14f)][_0x2a776a];if(_0x2b4c68&&_0x2b4c68['id']!==undefined&&_0x2b4c68[_0x245a1c(0x140)]!==undefined)_0x43ee4f['sensorLastValues'][_0x2b4c68['id']]=_0x2b4c68[_0x245a1c(0x140)];}}}async function initSystemConfig(_0x38a208){const _0xbcd98a=a0_0x266621;try{const _0x170c48=await _0x38a208['getForeignObjectAsync'](_0xbcd98a(0x163));if(_0x170c48&&_0x170c48[_0xbcd98a(0x1ad)])_0x38a208[_0xbcd98a(0x122)]={'latitude':_0x170c48[_0xbcd98a(0x1ad)]['latitude']||0x0,'longitude':_0x170c48[_0xbcd98a(0x1ad)]['longitude']||0x0,'city':_0x170c48[_0xbcd98a(0x1ad)][_0xbcd98a(0x26d)]||''};}catch(_0x1ae5d8){}}async function createAllObjects(_0x254513){const _0x3b74c8=a0_0x266621;await _0x254513['extendObjectAsync'](_0x3b74c8(0x190),{'type':_0x3b74c8(0x28d),'common':{'name':_0x3b74c8(0x23e)},'native':{}}),await _0x254513[_0x3b74c8(0x21c)](SYSTEM_DP_MODE,{'type':'state','common':{'name':'System\x20Mode','type':_0x3b74c8(0x15f),'role':'state','read':!![],'write':!![],'def':SYSTEM_MODES[_0x3b74c8(0x16a)]},'native':{}}),await _0x254513[_0x3b74c8(0x27c)](_0x3b74c8(0x15e),{'type':_0x3b74c8(0x273),'common':{'name':_0x3b74c8(0x169),'type':_0x3b74c8(0x15f),'role':_0x3b74c8(0x137),'read':!![],'write':![]},'native':{}}),await _0x254513[_0x3b74c8(0x27c)]('events.lastEvent',{'type':_0x3b74c8(0x273),'common':{'name':_0x3b74c8(0x141),'type':'string','role':_0x3b74c8(0x201),'read':!![],'write':![]},'native':{}}),await _0x254513[_0x3b74c8(0x27c)](_0x3b74c8(0x1f9),{'type':_0x3b74c8(0x273),'common':{'name':_0x3b74c8(0x168),'type':_0x3b74c8(0x15f),'role':_0x3b74c8(0x201),'read':!![],'write':![]},'native':{}}),await _0x254513['extendObjectAsync']('analysis.training',{'type':_0x3b74c8(0x28d),'common':{'name':_0x3b74c8(0x12e)},'native':{}}),await _0x254513[_0x3b74c8(0x27c)](_0x3b74c8(0x27f),{'type':_0x3b74c8(0x273),'common':{'name':'Train\x20Security','type':_0x3b74c8(0x299),'role':'button','read':!![],'write':!![]},'native':{}}),await _0x254513['setObjectNotExistsAsync'](_0x3b74c8(0x254),{'type':_0x3b74c8(0x273),'common':{'name':_0x3b74c8(0x19d),'type':_0x3b74c8(0x299),'role':_0x3b74c8(0x198),'read':!![],'write':!![]},'native':{}}),await _0x254513[_0x3b74c8(0x27c)](_0x3b74c8(0x161),{'type':'state','common':{'name':_0x3b74c8(0x16f),'type':_0x3b74c8(0x299),'role':_0x3b74c8(0x198),'read':!![],'write':!![]},'native':{}}),await _0x254513['setObjectNotExistsAsync'](_0x3b74c8(0x288),{'type':_0x3b74c8(0x273),'common':{'name':'Train\x20Comfort','type':_0x3b74c8(0x299),'role':_0x3b74c8(0x198),'read':!![],'write':!![]},'native':{}}),await _0x254513['setObjectNotExistsAsync'](_0x3b74c8(0x2a0),{'type':_0x3b74c8(0x273),'common':{'name':_0x3b74c8(0x1d0),'type':_0x3b74c8(0x299),'role':_0x3b74c8(0x198),'read':!![],'write':!![]},'native':{}}),await _0x254513[_0x3b74c8(0x27c)](_0x3b74c8(0x1b8),{'type':_0x3b74c8(0x273),'common':{'name':'Training\x20Status','type':_0x3b74c8(0x15f),'role':_0x3b74c8(0x137),'read':!![],'write':![]},'native':{}}),await _0x254513[_0x3b74c8(0x21c)](_0x3b74c8(0x1c9),{'type':_0x3b74c8(0x28d),'common':{'name':'Security\x20Monitor'},'native':{}}),await _0x254513[_0x3b74c8(0x27c)](_0x3b74c8(0x1fc),{'type':_0x3b74c8(0x273),'common':{'name':_0x3b74c8(0x117),'type':_0x3b74c8(0x2a3),'role':_0x3b74c8(0x140),'read':!![],'write':![]},'native':{}}),await _0x254513[_0x3b74c8(0x27c)](_0x3b74c8(0x1df),{'type':_0x3b74c8(0x273),'common':{'name':_0x3b74c8(0x135),'type':'number','role':_0x3b74c8(0x140),'read':!![],'write':![],'def':0.05},'native':{}}),await _0x254513[_0x3b74c8(0x27c)](_0x3b74c8(0x1b5),{'type':_0x3b74c8(0x273),'common':{'name':_0x3b74c8(0x238),'type':'string','role':'date','read':!![],'write':![]},'native':{}}),await _0x254513[_0x3b74c8(0x27c)](_0x3b74c8(0x294),{'type':_0x3b74c8(0x273),'common':{'name':_0x3b74c8(0x23c),'type':'string','role':'json','read':!![],'write':![]},'native':{}}),await _0x254513[_0x3b74c8(0x21c)](_0x3b74c8(0x19e),{'type':'channel','common':{'name':_0x3b74c8(0x203)},'native':{}}),await _0x254513[_0x3b74c8(0x27c)](_0x3b74c8(0x166),{'type':_0x3b74c8(0x273),'common':{'name':_0x3b74c8(0x238),'type':'string','role':_0x3b74c8(0x185),'read':!![],'write':![]},'native':{}}),await _0x254513['setObjectNotExistsAsync'](_0x3b74c8(0x246),{'type':_0x3b74c8(0x273),'common':{'name':_0x3b74c8(0x17c),'type':_0x3b74c8(0x299),'role':_0x3b74c8(0x1a5),'read':!![],'write':![]},'native':{}}),await _0x254513[_0x3b74c8(0x27c)](_0x3b74c8(0x287),{'type':_0x3b74c8(0x273),'common':{'name':'Trend','type':_0x3b74c8(0x15f),'role':_0x3b74c8(0x137),'read':!![],'write':![]},'native':{}}),await _0x254513['setObjectNotExistsAsync'](_0x3b74c8(0x22e),{'type':'state','common':{'name':_0x3b74c8(0x2a2),'type':_0x3b74c8(0x2a3),'role':_0x3b74c8(0x140),'read':!![],'write':![]},'native':{}}),await _0x254513[_0x3b74c8(0x27c)](_0x3b74c8(0x170),{'type':_0x3b74c8(0x273),'common':{'name':_0x3b74c8(0x291),'type':_0x3b74c8(0x15f),'role':_0x3b74c8(0x201),'read':!![],'write':![]},'native':{}}),await _0x254513[_0x3b74c8(0x27c)]('analysis.health.gaitSpeed',{'type':_0x3b74c8(0x273),'common':{'name':_0x3b74c8(0x1e4),'type':_0x3b74c8(0x2a3),'role':_0x3b74c8(0x140),'read':!![],'write':![]},'native':{}}),await _0x254513[_0x3b74c8(0x21c)](_0x3b74c8(0x130),{'type':_0x3b74c8(0x28d),'common':{'name':_0x3b74c8(0x206)},'native':{}}),await _0x254513[_0x3b74c8(0x27c)]('analysis.energy.insulationScore',{'type':_0x3b74c8(0x273),'common':{'name':_0x3b74c8(0x1b1),'type':_0x3b74c8(0x15f),'role':_0x3b74c8(0x137),'read':!![],'write':![]},'native':{}}),await _0x254513['setObjectNotExistsAsync'](_0x3b74c8(0x29f),{'type':_0x3b74c8(0x273),'common':{'name':'Heating\x20Score','type':_0x3b74c8(0x15f),'role':_0x3b74c8(0x137),'read':!![],'write':![]},'native':{}}),await _0x254513['setObjectNotExistsAsync'](_0x3b74c8(0x263),{'type':_0x3b74c8(0x273),'common':{'name':_0x3b74c8(0x156),'type':_0x3b74c8(0x15f),'role':_0x3b74c8(0x201),'read':!![],'write':![]},'native':{}}),await _0x254513[_0x3b74c8(0x21c)]('LTM',{'type':_0x3b74c8(0x28d),'common':{'name':_0x3b74c8(0x225)},'native':{}}),await _0x254513[_0x3b74c8(0x21c)](LTM_DP_RAW_LOG,{'type':_0x3b74c8(0x273),'common':{'name':_0x3b74c8(0x11f),'type':_0x3b74c8(0x15f),'role':'json','read':!![],'write':![]},'native':{}}),await _0x254513[_0x3b74c8(0x21c)](LTM_DP_DAILY_DIGESTS,{'type':_0x3b74c8(0x273),'common':{'name':_0x3b74c8(0x274),'type':_0x3b74c8(0x15f),'role':_0x3b74c8(0x201),'read':!![],'write':![]},'native':{}}),await _0x254513[_0x3b74c8(0x27c)](_0x3b74c8(0x1ff),{'type':_0x3b74c8(0x273),'common':{'name':_0x3b74c8(0x15c),'type':_0x3b74c8(0x15f),'role':_0x3b74c8(0x201),'read':!![],'write':![]},'native':{}}),await _0x254513[_0x3b74c8(0x27c)]('LTM.trainingData.thermodynamics',{'type':_0x3b74c8(0x273),'common':{'name':_0x3b74c8(0x260),'type':_0x3b74c8(0x15f),'role':_0x3b74c8(0x201),'read':!![],'write':![]},'native':{}}),await _0x254513[_0x3b74c8(0x27c)](_0x3b74c8(0x264),{'type':_0x3b74c8(0x273),'common':{'name':_0x3b74c8(0x22c),'type':_0x3b74c8(0x299),'role':_0x3b74c8(0x198),'read':!![],'write':!![]},'native':{}}),await _0x254513[_0x3b74c8(0x27c)](_0x3b74c8(0x153),{'type':_0x3b74c8(0x273),'common':{'name':_0x3b74c8(0x251),'type':_0x3b74c8(0x299),'role':_0x3b74c8(0x198),'read':!![],'write':!![]},'native':{}}),await _0x254513['setObjectNotExistsAsync'](_0x3b74c8(0x13d),{'type':_0x3b74c8(0x273),'common':{'name':_0x3b74c8(0x11c),'type':_0x3b74c8(0x299),'role':_0x3b74c8(0x11e),'read':!![],'write':![]},'native':{}}),await _0x254513['setObjectNotExistsAsync'](_0x3b74c8(0x132),{'type':_0x3b74c8(0x273),'common':{'name':_0x3b74c8(0x202),'type':_0x3b74c8(0x15f),'role':_0x3b74c8(0x1b4),'read':!![],'write':![]},'native':{}}),await _0x254513[_0x3b74c8(0x27c)](_0x3b74c8(0x125),{'type':_0x3b74c8(0x273),'common':{'name':_0x3b74c8(0x19c),'type':_0x3b74c8(0x15f),'role':_0x3b74c8(0x137),'read':!![],'write':![]},'native':{}}),await _0x254513['setObjectNotExistsAsync'](_0x3b74c8(0x1ae),{'type':_0x3b74c8(0x273),'common':{'name':_0x3b74c8(0x2a1),'type':'boolean','role':_0x3b74c8(0x1a5),'read':!![],'write':![]},'native':{}}),await _0x254513[_0x3b74c8(0x27c)](_0x3b74c8(0x222),{'type':_0x3b74c8(0x273),'common':{'name':'Description','type':'string','role':_0x3b74c8(0x137),'read':!![],'write':![]},'native':{}}),await _0x254513['setObjectNotExistsAsync'](_0x3b74c8(0x208),{'type':_0x3b74c8(0x273),'common':{'name':'Detected\x20Patterns','type':_0x3b74c8(0x15f),'role':'json','read':!![],'write':![]},'native':{}}),await _0x254513[_0x3b74c8(0x27c)]('analysis.automation.targetId',{'type':_0x3b74c8(0x273),'common':{'name':_0x3b74c8(0x245),'type':'string','role':_0x3b74c8(0x137),'read':!![],'write':![]},'native':{}}),await _0x254513['setObjectNotExistsAsync'](_0x3b74c8(0x1cc),{'type':_0x3b74c8(0x273),'common':{'name':_0x3b74c8(0x221),'type':'string','role':_0x3b74c8(0x137),'read':!![],'write':![]},'native':{}}),await _0x254513[_0x3b74c8(0x27c)]('analysis.automation.autoApply',{'type':_0x3b74c8(0x273),'common':{'name':_0x3b74c8(0x259),'type':'boolean','role':_0x3b74c8(0x240),'read':!![],'write':!![]},'native':{}}),await _0x254513[_0x3b74c8(0x27c)](_0x3b74c8(0x281),{'type':_0x3b74c8(0x273),'common':{'name':_0x3b74c8(0x256),'type':_0x3b74c8(0x299),'role':_0x3b74c8(0x198),'read':!![],'write':!![]},'native':{}});}async function loadSystemMode(_0x52610b){const _0x1ae9b5=a0_0x266621;try{const _0x17762c=await _0x52610b[_0x1ae9b5(0x24f)](SYSTEM_DP_MODE);_0x17762c&&_0x17762c[_0x1ae9b5(0x1ce)]&&Object[_0x1ae9b5(0x1d5)](SYSTEM_MODES)[_0x1ae9b5(0x24a)](_0x17762c[_0x1ae9b5(0x1ce)])?_0x52610b[_0x1ae9b5(0x1cf)]=_0x17762c[_0x1ae9b5(0x1ce)]:(_0x52610b[_0x1ae9b5(0x1cf)]=SYSTEM_MODES['NORMAL'],await _0x52610b[_0x1ae9b5(0x22d)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x1ae9b5(0x16a)],'ack':!![]}));}catch(_0x1bebb5){_0x52610b[_0x1ae9b5(0x1cf)]=SYSTEM_MODES[_0x1ae9b5(0x16a)];}}async function loadRawEventLog(_0x44a08a){const _0x2fc53e=a0_0x266621;try{const _0x36b39c=await _0x44a08a[_0x2fc53e(0x24f)](LTM_DP_RAW_LOG);if(_0x36b39c&&_0x36b39c['val'])_0x44a08a[_0x2fc53e(0x144)]=JSON[_0x2fc53e(0x232)](_0x36b39c[_0x2fc53e(0x1ce)]);}catch(_0x3750ec){_0x44a08a['rawEventLog']=[];}}async function saveRawEventLog(_0x523254){const _0x3cb4f2=a0_0x266621;if(_0x523254[_0x3cb4f2(0x144)][_0x3cb4f2(0x12d)]>RAW_LOG_MAX_SIZE)_0x523254[_0x3cb4f2(0x144)][_0x3cb4f2(0x27b)](0x0,_0x523254[_0x3cb4f2(0x144)]['length']-RAW_LOG_MAX_SIZE);await _0x523254[_0x3cb4f2(0x22d)](LTM_DP_RAW_LOG,{'val':JSON[_0x3cb4f2(0x11a)](_0x523254['rawEventLog']),'ack':!![]});}async function loadDailyDigests(_0x202066){const _0x26a6f3=a0_0x266621;try{const _0x5e426a=await _0x202066[_0x26a6f3(0x24f)](LTM_DP_DAILY_DIGESTS);if(_0x5e426a&&_0x5e426a[_0x26a6f3(0x1ce)])_0x202066['dailyDigests']=JSON[_0x26a6f3(0x232)](_0x5e426a[_0x26a6f3(0x1ce)]);}catch(_0x4fc6ab){_0x202066[_0x26a6f3(0x216)]=[];}await updateBaselineStatus(_0x202066);}async function saveDailyDigests(_0x29bb8b,_0x9a29c2=!![]){const _0x1b7cde=a0_0x266621,_0x58d5db=_0x29bb8b['config'][_0x1b7cde(0x271)]||0x3c;_0x29bb8b[_0x1b7cde(0x216)][_0x1b7cde(0x12d)]>_0x58d5db&&_0x29bb8b[_0x1b7cde(0x216)][_0x1b7cde(0x27b)](0x0,_0x29bb8b[_0x1b7cde(0x216)]['length']-_0x58d5db);await _0x29bb8b[_0x1b7cde(0x22d)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x1b7cde(0x11a)](_0x29bb8b[_0x1b7cde(0x216)]),'ack':!![]});if(_0x9a29c2)await updateBaselineStatus(_0x29bb8b);}async function updateAnalysisHistory(_0x440ee8,_0x3686d3){const _0x2bf75a=a0_0x266621;_0x440ee8[_0x2bf75a(0x189)]['unshift'](_0x3686d3);if(_0x440ee8['analysisHistory'][_0x2bf75a(0x12d)]>HISTORY_MAX_SIZE)_0x440ee8[_0x2bf75a(0x189)]['pop']();await _0x440ee8[_0x2bf75a(0x22d)](_0x2bf75a(0x1e3),{'val':JSON[_0x2bf75a(0x11a)](_0x440ee8[_0x2bf75a(0x189)]),'ack':!![]});}async function updateBaselineStatus(_0x451dcc){const _0x5852c9=a0_0x266621;if(!_0x451dcc['isProVersion']){await _0x451dcc[_0x5852c9(0x22d)](LTM_DP_BASELINE_STATUS,{'val':_0x5852c9(0x150),'ack':!![]});return;}const _0x2ca5c5=_0x451dcc[_0x5852c9(0x216)][_0x5852c9(0x12d)]>=(_0x451dcc[_0x5852c9(0x22b)][_0x5852c9(0x159)]||0x7)?_0x5852c9(0x26f)+_0x451dcc[_0x5852c9(0x216)]['length']+'\x20Tage)':_0x5852c9(0x1b2)+_0x451dcc[_0x5852c9(0x216)][_0x5852c9(0x12d)]+'/'+(_0x451dcc[_0x5852c9(0x22b)][_0x5852c9(0x159)]||0x7)+')';await _0x451dcc['setStateAsync'](LTM_DP_BASELINE_STATUS,{'val':_0x2ca5c5,'ack':!![]});}async function initSensorSubscriptions(_0xa309ec){const _0x54f426=a0_0x266621,_0x1fc25d=_0xa309ec[_0x54f426(0x22b)][_0x54f426(0x1d1)];if(_0x1fc25d)for(const _0x1c5feb of _0x1fc25d){await _0xa309ec[_0x54f426(0x1ba)](_0x1c5feb['id']);}}async function initPresenceSubscriptions(_0x20e5e6){const _0x621cb6=a0_0x266621,_0x445508=_0x20e5e6[_0x621cb6(0x22b)][_0x621cb6(0x1f0)];if(_0x445508)for(const _0x58d5ff of _0x445508){await _0x20e5e6[_0x621cb6(0x1ba)](_0x58d5ff);}}async function setupTelegramListener(_0x498eaa){const _0x3ce58f=a0_0x266621,_0x573539=_0x498eaa[_0x3ce58f(0x22b)][_0x3ce58f(0x1f6)];if(_0x498eaa[_0x3ce58f(0x22b)][_0x3ce58f(0x21f)]&&_0x573539)await _0x498eaa[_0x3ce58f(0x1ba)](_0x573539+_0x3ce58f(0x284));}async function checkWifiPresence(_0x3103c3){const _0x98e916=a0_0x266621;try{const _0x110c14=_0x3103c3[_0x98e916(0x22b)]['presenceDevices']||[];let _0x1bf994=![];const _0x3e3833=[];for(const _0x372f7c of _0x110c14){try{const _0x7b5d8c=await _0x3103c3[_0x98e916(0x2a6)](_0x372f7c);_0x7b5d8c&&(_0x7b5d8c[_0x98e916(0x1ce)]===!![]||_0x7b5d8c[_0x98e916(0x1ce)]===_0x98e916(0x18c)||_0x7b5d8c[_0x98e916(0x1ce)]===0x1)&&(_0x1bf994=!![],_0x3e3833['push'](_0x372f7c));}catch(_0x2a34b3){}}return await _0x3103c3[_0x98e916(0x22d)](_0x98e916(0x15e),{'val':_0x3e3833[_0x98e916(0x247)](',\x20'),'ack':!![]}),_0x1bf994&&(_0x3103c3[_0x98e916(0x128)]&&(_0x3103c3[_0x98e916(0x15b)]['info'](_0x98e916(0x20c)),abortExitTimer(_0x3103c3)),!_0x3103c3[_0x98e916(0x1af)]&&_0x3103c3[_0x98e916(0x1cf)]===SYSTEM_MODES[_0x98e916(0x16a)]&&await setPresence(_0x3103c3,!![])),_0x1bf994;}catch(_0x3334f6){return![];}}function startExitTimer(_0xb2de30){const _0x386ddd=a0_0x266621;abortExitTimer(_0xb2de30),_0xb2de30[_0x386ddd(0x173)]=!![],_0xb2de30[_0x386ddd(0x20b)]=setTimeout(()=>{const _0x17d443=_0x386ddd;_0xb2de30[_0x17d443(0x173)]=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),_0xb2de30['exitTimer']=setTimeout(()=>{const _0x1a76a5=_0x386ddd;setPresence(_0xb2de30,![]),_0xb2de30[_0x1a76a5(0x128)]=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}function abortExitTimer(_0x376500){const _0x1d29f4=a0_0x266621;if(_0x376500[_0x1d29f4(0x128)])clearTimeout(_0x376500[_0x1d29f4(0x128)]);if(_0x376500['exitGraceTimer'])clearTimeout(_0x376500[_0x1d29f4(0x20b)]);_0x376500[_0x1d29f4(0x128)]=null,_0x376500[_0x1d29f4(0x20b)]=null,_0x376500['isGracePeriodActive']=![];}async function setPresence(_0x187577,_0x38c13d){const _0x1dfd28=a0_0x266621;if(_0x187577['isPresent']===_0x38c13d)return;_0x187577[_0x1dfd28(0x1af)]=_0x38c13d,await _0x187577[_0x1dfd28(0x22d)](_0x1dfd28(0x2a5),{'val':_0x38c13d,'ack':!![]});}async function executeAutomationAction(_0x4e3e56){const _0x147443=a0_0x266621;try{const _0x1dc7ce=await _0x4e3e56[_0x147443(0x24f)](_0x147443(0x167)),_0x18a406=await _0x4e3e56[_0x147443(0x24f)](_0x147443(0x1cc));if(_0x1dc7ce&&_0x1dc7ce[_0x147443(0x1ce)]&&_0x18a406){const _0x2c99df=_0x1dc7ce[_0x147443(0x1ce)];let _0x130fcd=_0x18a406[_0x147443(0x1ce)];try{_0x130fcd=JSON['parse'](_0x130fcd);}catch(_0x558f16){}_0x4e3e56[_0x147443(0x15b)]['info'](_0x147443(0x17f)+_0x2c99df+_0x147443(0x204)+_0x130fcd),await _0x4e3e56[_0x147443(0x1a8)](_0x2c99df,_0x130fcd);}else _0x4e3e56[_0x147443(0x15b)]['warn'](_0x147443(0x233));}catch(_0x5209b7){_0x4e3e56[_0x147443(0x15b)][_0x147443(0x1fa)](_0x147443(0x142)+_0x5209b7['message']);}}async function processSensorEvent(_0x96b154,_0x554ca5,_0x4e3947,_0x32c2fc){const _0x133bb2=a0_0x266621;if(!_0x32c2fc)return;const _0x511056=_0x4e3947[_0x133bb2(0x1ce)],_0x3bf2dc=Date[_0x133bb2(0x1ab)](),_0x4763aa=_0x96b154[_0x133bb2(0x1fb)][_0x554ca5];_0x96b154['sensorLastValues'][_0x554ca5]=_0x511056;if(!_0x32c2fc[_0x133bb2(0x1d9)]&&_0x4763aa!=undefined&&_0x4763aa==_0x511056)return;const _0x1d5899=(_0x32c2fc[_0x133bb2(0x19b)]||'')[_0x133bb2(0x154)](),_0x31648b=_0x1d5899[_0x133bb2(0x24a)](_0x133bb2(0x249))||_0x1d5899[_0x133bb2(0x24a)]('temperatur')||_0x1d5899[_0x133bb2(0x24a)]('klima')||_0x1d5899[_0x133bb2(0x24a)]('heizung');_0x96b154[_0x133bb2(0x155)]&&_0x31648b&&recordThermodynamics(_0x96b154,_0x554ca5,_0x511056,_0x32c2fc[_0x133bb2(0x235)]);const _0x4e868f={'timestamp':_0x3bf2dc,'id':_0x554ca5,'name':_0x32c2fc['name'],'type':_0x32c2fc[_0x133bb2(0x19b)],'location':_0x32c2fc[_0x133bb2(0x235)],'value':_0x511056};_0x96b154[_0x133bb2(0x14f)][_0x133bb2(0x219)](_0x4e868f);if(_0x96b154[_0x133bb2(0x14f)][_0x133bb2(0x12d)]>HISTORY_MAX_SIZE)_0x96b154[_0x133bb2(0x14f)][_0x133bb2(0x1be)]();await _0x96b154[_0x133bb2(0x22d)]('events.lastEvent',{'val':JSON[_0x133bb2(0x11a)](_0x4e868f),'ack':!![]}),await _0x96b154[_0x133bb2(0x22d)]('events.history',{'val':JSON[_0x133bb2(0x11a)](_0x96b154[_0x133bb2(0x14f)]),'ack':!![]});_0x96b154[_0x133bb2(0x155)]&&(_0x96b154['rawEventLog'][_0x133bb2(0x258)](_0x4e868f),await saveRawEventLog(_0x96b154),recordSequence(_0x96b154,_0x4e868f));if(_0x32c2fc[_0x133bb2(0x28e)]&&_0x511056===!![]){if(_0x96b154[_0x133bb2(0x1af)]&&!_0x96b154[_0x133bb2(0x173)])startExitTimer(_0x96b154);else{if(!_0x96b154['isPresent'])setPresence(_0x96b154,!![]);}}else{if(_0x32c2fc[_0x133bb2(0x19b)]===_0x133bb2(0x1f1)&&_0x511056===!![]){if(_0x96b154[_0x133bb2(0x128)])abortExitTimer(_0x96b154);if(!_0x96b154[_0x133bb2(0x1af)]&&_0x96b154[_0x133bb2(0x1cf)]===SYSTEM_MODES['NORMAL'])setPresence(_0x96b154,!![]);}}}async function recordThermodynamics(_0x369a6c,_0xfb08d4,_0x9523f1,_0x2b200e){const _0x5989a3=a0_0x266621,_0xc21c6c=await getOutsideTemperatureNumeric(_0x369a6c),_0x3e1c53=await _0x369a6c[_0x5989a3(0x24f)](_0x5989a3(0x1ef));let _0x76dd20=[];if(_0x3e1c53&&_0x3e1c53[_0x5989a3(0x1ce)])try{_0x76dd20=JSON[_0x5989a3(0x232)](_0x3e1c53['val']);}catch(_0x35e2e5){}_0x76dd20[_0x5989a3(0x258)]({'ts':Date[_0x5989a3(0x1ab)](),'room':_0x2b200e||'Unknown','t_in':_0x9523f1,'t_out':_0xc21c6c});if(_0x76dd20[_0x5989a3(0x12d)]>THERMO_LOG_SIZE)_0x76dd20[_0x5989a3(0x1cb)]();await _0x369a6c[_0x5989a3(0x22d)]('LTM.trainingData.thermodynamics',{'val':JSON[_0x5989a3(0x11a)](_0x76dd20),'ack':!![]});}async function getOutsideTemperatureNumeric(_0x9b8e29){const _0x5c6613=a0_0x266621;if(_0x9b8e29[_0x5c6613(0x22b)][_0x5c6613(0x13e)])try{const _0x5eee12=await _0x9b8e29['getForeignStateAsync'](_0x9b8e29[_0x5c6613(0x22b)][_0x5c6613(0x13e)]);if(_0x5eee12&&_0x5eee12[_0x5c6613(0x1ce)]!==undefined&&_0x5eee12[_0x5c6613(0x1ce)]!==null)return parseFloat(_0x5eee12[_0x5c6613(0x1ce)]);}catch(_0x4b3c1f){}const _0x183f37=_0x9b8e29['config'][_0x5c6613(0x297)];if(!_0x9b8e29['config'][_0x5c6613(0x174)]||!_0x183f37)return null;try{let _0x4b173b='';if(_0x183f37['includes'](_0x5c6613(0x20e)))_0x4b173b=_0x183f37+_0x5c6613(0x188);else{if(_0x183f37['includes'](_0x5c6613(0x28b)))_0x4b173b=_0x183f37+_0x5c6613(0x197);else{if(_0x183f37[_0x5c6613(0x24a)]('openweathermap'))_0x4b173b=_0x183f37+'.forecast.current.temperature';else{if(_0x183f37['includes'](_0x5c6613(0x1ac)))_0x4b173b=_0x183f37+'.forecast.current.temp';}}}if(_0x4b173b){const _0x1ec2ef=await _0x9b8e29['getForeignStateAsync'](_0x4b173b);if(_0x1ec2ef&&_0x1ec2ef[_0x5c6613(0x1ce)]!==undefined&&_0x1ec2ef[_0x5c6613(0x1ce)]!==null)return parseFloat(_0x1ec2ef[_0x5c6613(0x1ce)]);}}catch(_0x13414f){}return null;}async function recordSequence(_0x15c02d,_0x2f41be){const _0x4e4b60=a0_0x266621,_0x1a6389=(_0x2f41be['type']||'')['toLowerCase'](),_0x54983f=[_0x4e4b60(0x1f1),'bewegung',_0x4e4b60(0x12a),_0x4e4b60(0x114),_0x4e4b60(0x1dd),'door',_0x4e4b60(0x1de),_0x4e4b60(0x123),'fenster','contact',_0x4e4b60(0x13c),_0x4e4b60(0x13a),_0x4e4b60(0x1b6),_0x4e4b60(0x240),_0x4e4b60(0x1d4),'dimmer',_0x4e4b60(0x1c1)];if(!_0x54983f[_0x4e4b60(0x1e6)](_0x262acf=>_0x1a6389[_0x4e4b60(0x24a)](_0x262acf)))return;if(!_0x2f41be[_0x4e4b60(0x140)])return;if(sequenceTimer)clearTimeout(sequenceTimer);activeSequence[_0x4e4b60(0x258)]({'loc':_0x2f41be[_0x4e4b60(0x235)]||'Unknown','id':_0x2f41be['id'],'ts':Date['now']()}),sequenceTimer=setTimeout(async()=>{const _0x214dba=_0x4e4b60;if(activeSequence[_0x214dba(0x12d)]>0x1)await saveCompletedSequence(_0x15c02d);activeSequence=[];},SEQUENCE_TIMEOUT_MS);}async function saveCompletedSequence(_0x5df09d){const _0xe3d950=a0_0x266621;try{const _0x3c0ebb=await _0x5df09d['getStateAsync'](_0xe3d950(0x1ff));let _0x1eaaea=[];if(_0x3c0ebb&&_0x3c0ebb[_0xe3d950(0x1ce)])try{_0x1eaaea=JSON['parse'](_0x3c0ebb['val']);}catch(_0x156347){}const _0x33abe2=activeSequence[0x0]['ts'],_0x5d3fa7=activeSequence[_0xe3d950(0x24d)](_0x5b6abf=>({'loc':_0x5b6abf[_0xe3d950(0x143)],'t_delta':Math[_0xe3d950(0x162)]((_0x5b6abf['ts']-_0x33abe2)/0x3e8)})),_0x22f96d={'timestamp':new Date(_0x33abe2)[_0xe3d950(0x200)](),'steps':_0x5d3fa7,'duration':Math[_0xe3d950(0x162)]((activeSequence[activeSequence['length']-0x1]['ts']-_0x33abe2)/0x3e8),'daytime':new Date(_0x33abe2)[_0xe3d950(0x24e)]()};_0x1eaaea[_0xe3d950(0x258)](_0x22f96d);if(_0x1eaaea[_0xe3d950(0x12d)]>MAX_TRAINING_SET_SIZE)_0x1eaaea[_0xe3d950(0x1cb)]();await _0x5df09d[_0xe3d950(0x22d)](_0xe3d950(0x1ff),{'val':JSON[_0xe3d950(0x11a)](_0x1eaaea),'ack':!![]}),runSecurityCheck(_0x5df09d,_0x22f96d);}catch(_0x12c5d6){_0x5df09d[_0xe3d950(0x15b)][_0xe3d950(0x1fa)]('[RECORDER]\x20Error:\x20'+_0x12c5d6['message']);}}function runSecurityCheck(_0x442bc3,_0x342a1a){const _0x4e4aff=a0_0x266621;if(!_0x442bc3[_0x4e4aff(0x155)])return;sendToPython(_0x442bc3,_0x4e4aff(0x124),{'sequence':_0x342a1a});}async function createDailyDigest(_0x554315){const _0x3b2c34=a0_0x266621;if(!_0x554315[_0x3b2c34(0x155)])return;await _0x554315[_0x3b2c34(0x22d)](LTM_DP_STATUS,{'val':_0x3b2c34(0x29a),'ack':!![]});if(!_0x554315[_0x3b2c34(0x1aa)]||_0x554315[_0x3b2c34(0x144)][_0x3b2c34(0x12d)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x554315[_0x3b2c34(0x22d)](LTM_DP_STATUS,{'val':_0x3b2c34(0x16e),'ack':!![]});return;}const _0x2eaabb=JSON['parse'](JSON[_0x3b2c34(0x11a)](_0x554315['rawEventLog'])),_0x124f87=_0x2eaabb[_0x3b2c34(0x12d)],_0x5d048c='ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a'+JSON['stringify'](_0x2eaabb);try{const _0x3d74c3=await _0x554315[_0x3b2c34(0x1aa)]['generateContent'](_0x5d048c),_0x5c0b38=JSON[_0x3b2c34(0x232)](_0x3d74c3['response'][_0x3b2c34(0x137)]()[_0x3b2c34(0x13f)](/```json|```/g,'')[_0x3b2c34(0x1d2)]()),_0x5a1b3c={'timestamp':new Date()[_0x3b2c34(0x200)](),'eventCount':_0x124f87,'summary':_0x5c0b38['summary']||_0x3b2c34(0x1f2),'activityLevel':_0x5c0b38['activityLevel']||_0x3b2c34(0x25e),'systemMode':_0x554315['currentSystemMode']};_0x554315[_0x3b2c34(0x216)][_0x3b2c34(0x258)](_0x5a1b3c),await saveDailyDigests(_0x554315),_0x554315[_0x3b2c34(0x144)]=[],await saveRawEventLog(_0x554315),await _0x554315[_0x3b2c34(0x22d)](LTM_DP_STATUS,{'val':_0x3b2c34(0x269),'ack':!![]});if(_0x554315[_0x3b2c34(0x155)])sendToPython(_0x554315,_0x3b2c34(0x18b),{'digest':_0x5a1b3c});}catch(_0x291c55){_0x554315[_0x3b2c34(0x15b)][_0x3b2c34(0x1fa)](_0x291c55['message']);}}async function runBaselineDriftAnalysis(_0x4d83c9){const _0x2b64af=a0_0x266621;if(!_0x4d83c9['isProVersion']||!_0x4d83c9[_0x2b64af(0x1aa)])return;const _0x36cbcf=_0x4d83c9[_0x2b64af(0x22b)][_0x2b64af(0x26c)]||0xe;if(_0x4d83c9[_0x2b64af(0x216)]['length']<_0x36cbcf+0x7){await _0x4d83c9['setStateAsync'](LTM_DP_DRIFT_STATUS,{'val':'N/A\x20(Learning)','ack':!![]});return;}const _0x2d42e6=_0x4d83c9['dailyDigests'][_0x2b64af(0x25d)](-_0x36cbcf),_0x488f34=_0x4d83c9[_0x2b64af(0x216)][_0x2b64af(0x25d)](0x0,_0x4d83c9['dailyDigests'][_0x2b64af(0x12d)]-_0x36cbcf),_0x44f366='ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20'+JSON[_0x2b64af(0x11a)](_0x488f34)+'\x0aSTB:\x20'+JSON[_0x2b64af(0x11a)](_0x2d42e6);try{const _0x361c13=await _0x4d83c9[_0x2b64af(0x1aa)][_0x2b64af(0x265)](_0x44f366),_0x3211a4=JSON[_0x2b64af(0x232)](_0x361c13['response'][_0x2b64af(0x137)]()['replace'](/```json|```/g,'')[_0x2b64af(0x1d2)]());_0x3211a4[_0x2b64af(0x1e5)]&&(await _0x4d83c9[_0x2b64af(0x22d)](LTM_DP_DRIFT_STATUS,{'val':_0x3211a4[_0x2b64af(0x1e5)],'ack':!![]}),await _0x4d83c9[_0x2b64af(0x22d)](LTM_DP_DRIFT_DETAILS,{'val':_0x3211a4[_0x2b64af(0x182)],'ack':!![]}),await _0x4d83c9[_0x2b64af(0x22d)](LTM_DP_DRIFT_LAST_CHECK,{'val':Date['now'](),'ack':!![]}));}catch(_0x198f31){}}async function sendMorningBriefing(_0x4b7b38){const _0x512b9c=a0_0x266621;if(!_0x4b7b38[_0x512b9c(0x1aa)])return;try{const _0x51cb07=_0x512b9c(0x25a),_0x3f3a97=await _0x4b7b38[_0x512b9c(0x1aa)][_0x512b9c(0x265)](_0x51cb07),_0x599e8e=_0x3f3a97[_0x512b9c(0x22a)]['text']();sendNotification(_0x4b7b38,_0x512b9c(0x1bc)+_0x599e8e);}catch(_0x58f1f3){_0x4b7b38['log']['error']('Briefing\x20Error:\x20'+_0x58f1f3[_0x512b9c(0x195)]);}}function stopPythonService(_0x464cce){const _0x7996ee=a0_0x266621;if(_0x464cce[_0x7996ee(0x1c0)]){try{_0x464cce[_0x7996ee(0x1c0)][_0x7996ee(0x244)]();}catch(_0x2a5ea8){}_0x464cce[_0x7996ee(0x1c0)]=null;}}function sendToPython(_0x3e420e,_0x42bfc8,_0x36b419={}){const _0x5a6ccd=a0_0x266621;if(!_0x3e420e[_0x5a6ccd(0x1c0)]||!_0x3e420e[_0x5a6ccd(0x1c0)][_0x5a6ccd(0x26a)][_0x5a6ccd(0x298)])return;const _0x5a515a=JSON[_0x5a6ccd(0x11a)]({'command':_0x42bfc8,..._0x36b419});try{_0x3e420e[_0x5a6ccd(0x1c0)][_0x5a6ccd(0x26a)]['write'](_0x5a515a+'\x0a');}catch(_0x3e3ff6){}}function a0_0x38fb(){const _0x3d0f68=['autoApply','ack','system','555210ujkEOf','.forecast.current.temperature','.\x20KONTEXT:\x20','Kalender\x20deaktiviert.','message','setHours','.NextHours.Location_1.Day_1.current.temp_value','button','service.py','targetId','type','Activity\x20Summary','Train\x20Health','analysis.health','timestamp','Fokus\x20auf\x20Familienroutinen.','./lib/scheduler','ltmJob','LTM.dailyDigests','inactivityThresholdHours','indicator','Wetterdaten\x20deaktiviert.','3378JbrnUK','setForeignStateAsync','lastAlertState','geminiModel','now','weatherunderground','common','analysis.automation.patternDetected','isPresent','getOverviewData','Insulation\x20Score','Lernphase\x20(','86990SqNaaT','text.alarm','analysis.security.lastCheck','licht','exports','analysis.training.status','ðŸ\x20Python\x20Pong','subscribeForeignStatesAsync','setState','ðŸŒ…\x20Morning\x20Briefing:\x0a','analysisInterval','pop','.\x20ANWESEND:\x20','pythonProcess','lampe','setupModeResetScheduler','\x20->\x20','enum.functions.*','[PYTHON]\x20','forEach','445753PxlVfp','ðŸ›‹ï¸\x20Triggering\x20Comfort\x20Analysis\x20(Pattern\x20Mining)...','analysis.security','toFixed','shift','analysis.automation.targetValue','automationProposal','val','currentSystemMode','Build\x20Topology','devices','trim','automation.triggerAction','schalter','values','callback','insulation','cogni-living\x20adapter\x20starting\x20(v','logDuplicates','diagnosis','470gnEGzu','stateChange','occupancy','tÃ¼r','analysis.security.currentThreshold','apply','confidence','cancel','analysis.analysisHistory','Gait\x20Speed\x20Trend','baselineDrift','some','from','322570ShQeKI','ANALYZE_GAIT','6889563xSgVAK','scanDevices','setupDriftAnalysisScheduler','alertReason','HEALTH_RESULT','LTM.trainingData.thermodynamics','presenceDevices','motion','Digest','genAI','52xBiMWr','setupLtmScheduler','notifyTelegramInstance','ENERGY_TRAIN_RESULT','floor','events.history','error','sensorLastValues','analysis.security.lastScore','Adapter','getCalendarNames','LTM.trainingData.sequences','toISOString','json','Alert\x20Reason','Health\x20Analysis','\x20=\x20','getObjectAsync','Energy\x20Intelligence','endsWith','analysis.automation.detectedPatterns','TRAIN_COMFORT','ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...','exitGraceTimer','WiFi\x20Presence\x20detected.','detected','accuweather','simulateButler','toString','checkAndInstall','object','description','LTM.triggerDailyDigest','main','dailyDigests','name','close','unshift','Error\x20launching\x20Python:\x20','onStateChange','extendObjectAsync','.\x20SYSTEM_MODE:\x20','5775568JaidJK','notifyTelegramEnabled','unknown','Target\x20Value','analysis.automation.description','isEmergency','analysis.automation.autoApply','LTM','constructor','@google/generative-ai','N/A','Keine\x20Termine.','response','config','Trigger\x20Analysis','setStateAsync','analysis.health.trendValue','PREDICT_ENERGY','payload','existsSync','parse','ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','LTM.driftAnalysis.driftDetails','location','setupBriefingScheduler','generic','Last\x20Check','LTM.rawEventLog','getTime','PONG','Topology\x20Matrix','PRIORITÃ„T:\x20Sicherheit.','System','apiKey','switch','isAlert','ðŸ›‹ï¸\x20BUTLER:\x20Found\x20','PYTHON_EXE','kill','Target\x20ID','analysis.health.isAnomaly','join','triggerDailyDigest','temperature','includes','VACATION','change_percent','map','getHours','getStateAsync','ðŸ›¡ï¸\x20SECURITY\x20CHECK:\x20Score\x20','Trigger\x20Briefing','LTM.driftAnalysis','ENERGY_PREDICT_RESULT','analysis.training.triggerHealth','getEnums','Trigger\x20Action','ANALYZE_TREND','push','Auto\x20Apply','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','(((.+)+)+)+$','briefingJob','slice','normal','GAIT_RESULT','Thermodynamics','1eZYcaa','TRAIN_ENERGY','analysis.energy.forecast','analysis.trigger','generateContent','Err:\x20','./lib/scanner','dismissAutomation','Success','stdin','fill','ltmStbWindowDays','city','Unbekannt','Aktiv\x20(','âš ï¸\x20ALARM:\x20','ltmLtbWindowDays','cogni-living','state','Daily\x20Digests','systemUUID','livingContext','getMonth',')\x20-\x20SAFE\x20BOOT','calendarInstance','driftAnalysisTimer','splice','setObjectNotExistsAsync','Failed:\x20','analysis.lastResult','analysis.training.triggerSecurity','summary','analysis.automation.triggerAction','TRAIN_HEALTH','info','.communicate.request','search','LTM.driftAnalysis.baselineDrift','analysis.health.trendDiagnosis','analysis.training.triggerComfort','No\x20instance','PRIORITÃ„T:\x20Gesundheit/AAL.','daswetter','details','channel','isExit','enum.rooms.*','âš ï¸\x20SECURITY\x20ALARM:\x20','Today\x20Vector\x20(15m)','LTM.processingStatus','bind','analysis.security.topologyMatrix','status','Topology\x20Error:\x20','weatherInstance','writable','boolean','Started...','SIMULATION:\x20Test-Vorschlag\x20fÃ¼r\x20','SECURITY_RESULT','Gemini\x20AI\x20initialized.','ðŸ“\x20Feedback\x20received:\x20','analysis.energy.heatingScore','analysis.training.triggerTopology','Pattern\x20Detected','Trend\x20Value','number','Success:\x20','system.isPresent','getForeignStateAsync','Activity-Level','Training\x20Error:\x20','reason','presence','communicate.request','Keine\x20Wetterdaten\x20verfÃ¼gbar.','Anomaly\x20Score','data','Regel\x20erkannt:\x20','stringify','LTM.baselineStatus','Alert\x20Status','filter','indicator.alarm','Raw\x20Log','getLtmData','startsWith','systemConfig','window','ANALYZE_SEQUENCE','analysis.activitySummary','ðŸ§ª\x20Simulating\x20Butler\x20Proposal:\x20','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','exitTimer','geminiApiKey','prÃ¤senz','debug','testApiKey','length','AI\x20Training','is_anomaly','analysis.energy','./lib/installer','analysis.alertReason','onReady','analysisTimer','Current\x20Threshold','system.mode','text','TRAIN_SECURITY','OK:\x20','light','Unknown','kontakt','analysis.isAlert','outdoorSensorId','replace','value','Last\x20raw\x20event','BUTLER\x20Execution\x20Error:\x20','loc','rawEventLog','Fokus\x20auf\x20Komfort.','path','analysis.energy.insulationScore','ðŸš€\x20Starting\x20NUUKANNI\x20Logic\x20(v0.12.10)...','delObjectAsync','guest','Â°C,\x20','TOPOLOGY_RESULT','onMessage','getFullYear','eventHistory','Deaktiviert\x20(Pro-Feature)','getForeignObjectsAsync','heating','analysis.triggerBriefing','toLowerCase','isProVersion','Temperature\x20Forecast','command','success','minDaysForBaseline','âœ…\x20HEALTH\x20TRAINED.','log','Sequences','enum','system.presenceWho','string','Gemini\x20Error:\x20','analysis.training.triggerEnergy','round','system.config','Keine\x20Details.','targetValue','analysis.health.lastCheck','analysis.automation.targetId','Event\x20History','Who\x20is\x20present?','NORMAL','9429lBLxZX','events.history_debug_00','[RESULT]','Skipped\x20(No\x20AI\x20or\x20Data)','Train\x20Energy','analysis.health.todayVector','.\x20EVENTS:\x20','analysis.history_debug_00','isGracePeriodActive','useWeather','onUnload','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','sendTo','substring','split','TRAINING_COMPLETE','ðŸ›‹ï¸\x20BUTLER:\x20Keine\x20neuen\x20Muster\x20gefunden.','Anomaly\x20Detected','keys','TREND_RESULT','ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20','Analysiere\x20ausgewogen.','KI-Modell\x20nicht\x20initialisiert','driftDetails','subscribeStates','getGenerativeModel','date','Kein\x20API\x20Key.','getDate','.Current.Temperature','analysisHistory','\x0aGrund:\x20','ANALYZE_HEALTH','online','Missing\x20data'];a0_0x38fb=function(){return _0x3d0f68;};return a0_0x38fb();}function a0_0x3aa0(_0x204464,_0xfc8765){const _0x199167=a0_0x38fb();return a0_0x3aa0=function(_0x4c8439,_0x2d263c){_0x4c8439=_0x4c8439-0x112;let _0x38fb9a=_0x199167[_0x4c8439];return _0x38fb9a;},a0_0x3aa0(_0x204464,_0xfc8765);}function runPythonHealthCheck(_0x398ec6){const _0x18aedc=a0_0x266621;if(!_0x398ec6[_0x18aedc(0x216)]||_0x398ec6[_0x18aedc(0x216)][_0x18aedc(0x12d)]<0x2)return;const _0x441196=_0x398ec6['dailyDigests']['map'](_0x2b91c9=>{const _0x1c0f94=_0x18aedc,_0x1b11d9=(_0x2b91c9['activityLevel']||'')[_0x1c0f94(0x154)]();return ACTIVITY_LEVEL_MAP[_0x1b11d9]||0x32;});sendToPython(_0x398ec6,_0x18aedc(0x257),{'values':_0x441196,'tag':_0x18aedc(0x2a7)});}function handlePythonResult(_0x2aca60,_0x18c4e9){const _0x3abe9c=a0_0x266621;if(_0x18c4e9[_0x3abe9c(0x19b)]===_0x3abe9c(0x23b))_0x2aca60['log'][_0x3abe9c(0x12b)](_0x3abe9c(0x1b9));else{if(_0x18c4e9['type']===_0x3abe9c(0x29c)){const {anomaly_score:_0xdc2f5f,is_anomaly:_0x8d44d8,threshold:_0x5c02f3,explanation:_0x1b0658}=_0x18c4e9[_0x3abe9c(0x230)];_0x2aca60[_0x3abe9c(0x15b)][_0x3abe9c(0x283)](_0x3abe9c(0x250)+_0xdc2f5f['toFixed'](0x5)+_0x3abe9c(0x1c3)+(_0x8d44d8?'ANOMALY':'OK')),_0x2aca60[_0x3abe9c(0x22d)](_0x3abe9c(0x1fc),{'val':_0xdc2f5f,'ack':!![]}),_0x2aca60['setStateAsync']('analysis.security.lastCheck',{'val':new Date()[_0x3abe9c(0x200)](),'ack':!![]});if(_0x5c02f3)_0x2aca60[_0x3abe9c(0x22d)](_0x3abe9c(0x1df),{'val':_0x5c02f3,'ack':!![]});if(_0x8d44d8){let _0x2fc7fc='UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20'+_0xdc2f5f['toFixed'](0x4)+')';if(_0x1b0658&&_0x1b0658!==_0x3abe9c(0x13b))_0x2fc7fc+=_0x3abe9c(0x18a)+_0x1b0658;_0x2aca60[_0x3abe9c(0x22d)](_0x3abe9c(0x13d),{'val':!![],'ack':!![]}),_0x2aca60['setStateAsync']('analysis.alertReason',{'val':_0x2fc7fc,'ack':!![]}),sendNotification(_0x2aca60,_0x3abe9c(0x290)+_0x2fc7fc,![],!![]);}}else{if(_0x18c4e9[_0x3abe9c(0x19b)]===_0x3abe9c(0x17a)){const _0x252ec5=_0x18c4e9['payload'][_0x3abe9c(0x28c)]||'',_0x61bf83=_0x18c4e9['payload']['threshold'],_0x177fff=_0x18c4e9[_0x3abe9c(0x230)]['success']?_0x3abe9c(0x2a4)+new Date()['toLocaleTimeString']()+'\x20('+_0x252ec5+')':_0x3abe9c(0x27d)+_0x18c4e9[_0x3abe9c(0x230)][_0x3abe9c(0x113)];_0x2aca60[_0x3abe9c(0x22d)]('analysis.training.status',{'val':_0x177fff,'ack':!![]});if(_0x18c4e9['payload'][_0x3abe9c(0x158)]&&_0x61bf83)_0x2aca60[_0x3abe9c(0x22d)](_0x3abe9c(0x1df),{'val':_0x61bf83,'ack':!![]});}else{if(_0x18c4e9[_0x3abe9c(0x19b)]==='COMFORT_RESULT'){const {patterns:_0x37afbd}=_0x18c4e9[_0x3abe9c(0x230)];if(_0x37afbd&&_0x37afbd[_0x3abe9c(0x12d)]>0x0){_0x2aca60[_0x3abe9c(0x15b)][_0x3abe9c(0x283)](_0x3abe9c(0x242)+_0x37afbd['length']+'\x20new\x20patterns.'),_0x2aca60['setStateAsync']('analysis.automation.detectedPatterns',{'val':JSON[_0x3abe9c(0x11a)](_0x37afbd),'ack':!![]});const _0x3be74c=_0x37afbd[0x0],_0xaf3d7=_0x3abe9c(0x119)+_0x3be74c['rule']+'\x20('+(_0x3be74c[_0x3abe9c(0x1e1)]*0x64)[_0x3abe9c(0x1ca)](0x0)+'%)';_0x2aca60[_0x3abe9c(0x22d)]('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),_0x2aca60[_0x3abe9c(0x22d)](_0x3abe9c(0x222),{'val':_0xaf3d7,'ack':!![]});}else _0x2aca60[_0x3abe9c(0x15b)]['info'](_0x3abe9c(0x17b)),_0x2aca60[_0x3abe9c(0x22d)](_0x3abe9c(0x1ae),{'val':![],'ack':!![]}),_0x2aca60[_0x3abe9c(0x22d)](_0x3abe9c(0x208),{'val':'[]','ack':!![]});}else{if(_0x18c4e9[_0x3abe9c(0x19b)]===_0x3abe9c(0x1f7)){if(_0x18c4e9['payload'][_0x3abe9c(0x158)])try{const _0x3349cc=JSON[_0x3abe9c(0x232)](_0x18c4e9[_0x3abe9c(0x230)][_0x3abe9c(0x28c)]);if(_0x3349cc[_0x3abe9c(0x1d7)])_0x2aca60[_0x3abe9c(0x22d)](_0x3abe9c(0x147),{'val':JSON[_0x3abe9c(0x11a)](_0x3349cc[_0x3abe9c(0x1d7)]),'ack':!![]});if(_0x3349cc[_0x3abe9c(0x152)])_0x2aca60[_0x3abe9c(0x22d)]('analysis.energy.heatingScore',{'val':JSON['stringify'](_0x3349cc['heating']),'ack':!![]});}catch(_0x1844b4){}}else{if(_0x18c4e9['type']==='HEALTH_TRAIN_RESULT'){if(_0x18c4e9[_0x3abe9c(0x230)]['success'])_0x2aca60['log']['info'](_0x3abe9c(0x15a));}else{if(_0x18c4e9[_0x3abe9c(0x19b)]===_0x3abe9c(0x1ee))_0x2aca60[_0x3abe9c(0x22d)]('analysis.health.lastCheck',{'val':new Date()[_0x3abe9c(0x200)](),'ack':!![]}),_0x2aca60[_0x3abe9c(0x22d)](_0x3abe9c(0x246),{'val':_0x18c4e9[_0x3abe9c(0x230)][_0x3abe9c(0x12f)],'ack':!![]});else{if(_0x18c4e9[_0x3abe9c(0x19b)]===_0x3abe9c(0x17e))_0x2aca60[_0x3abe9c(0x22d)](_0x3abe9c(0x287),{'val':_0x18c4e9[_0x3abe9c(0x230)][_0x3abe9c(0x1da)],'ack':!![]}),_0x2aca60[_0x3abe9c(0x22d)](_0x3abe9c(0x22e),{'val':_0x18c4e9[_0x3abe9c(0x230)][_0x3abe9c(0x24c)],'ack':!![]});else{if(_0x18c4e9['type']===_0x3abe9c(0x25f)){const {speed_trend:_0x31fbee}=_0x18c4e9[_0x3abe9c(0x230)];if(_0x31fbee!==undefined)_0x2aca60[_0x3abe9c(0x22d)]('analysis.health.gaitSpeed',{'val':_0x31fbee,'ack':!![]});}else{if(_0x18c4e9['type']===_0x3abe9c(0x253)){const {forecast:_0x59933e}=_0x18c4e9['payload'];if(_0x59933e)_0x2aca60[_0x3abe9c(0x22d)](_0x3abe9c(0x263),{'val':JSON[_0x3abe9c(0x11a)](_0x59933e),'ack':!![]});}else{if(_0x18c4e9[_0x3abe9c(0x19b)]===_0x3abe9c(0x14c)){const {data:_0x138256}=_0x18c4e9[_0x3abe9c(0x230)];_0x138256&&(_0x2aca60[_0x3abe9c(0x15b)][_0x3abe9c(0x283)]('ðŸ•¸ï¸\x20Topology\x20Map\x20updated.'),_0x2aca60[_0x3abe9c(0x22d)]('analysis.security.topologyMatrix',{'val':JSON[_0x3abe9c(0x11a)](_0x138256),'ack':!![]}));}}}}}}}}}}}}function startPythonService(_0x3300ae){const _0x4914a7=a0_0x266621;let _0x3efacd='python3';if(fs[_0x4914a7(0x231)](installer[_0x4914a7(0x243)]))_0x3efacd=installer[_0x4914a7(0x243)];try{const _0x4c6b71=path[_0x4914a7(0x247)](__dirname,'python_service',_0x4914a7(0x199));_0x3300ae[_0x4914a7(0x1c0)]=spawn(_0x3efacd,[_0x4c6b71]),_0x3300ae['pythonProcess']['stdout']['on'](_0x4914a7(0x118),_0x36def1=>{const _0x2b2fca=_0x4914a7,_0x337bd4=_0x36def1[_0x2b2fca(0x210)]()['split']('\x0a');_0x337bd4[_0x2b2fca(0x1c6)](_0x4f3eac=>{const _0x25fb17=_0x2b2fca,_0x385676=_0x4f3eac['trim']();if(!_0x385676)return;if(_0x385676[_0x25fb17(0x121)]('[LOG]'))_0x3300ae[_0x25fb17(0x15b)][_0x25fb17(0x12b)](_0x25fb17(0x1c5)+_0x385676['substring'](0x5)[_0x25fb17(0x1d2)]());else{if(_0x385676['startsWith'](_0x25fb17(0x16d)))try{const _0x9cff48=JSON[_0x25fb17(0x232)](_0x385676[_0x25fb17(0x178)](0x8)[_0x25fb17(0x1d2)]());handlePythonResult(_0x3300ae,_0x9cff48);}catch(_0x149093){}}});}),_0x3300ae['pythonProcess']['on'](_0x4914a7(0x218),_0x24b45a=>{const _0x5f1371=_0x4914a7;_0x3300ae[_0x5f1371(0x1c0)]=null;});}catch(_0x3e87b6){_0x3300ae[_0x4914a7(0x15b)]['error'](_0x4914a7(0x21a)+_0x3e87b6[_0x4914a7(0x195)]);}}async function runAutopilot(_0x144ca0){const _0x4f18c9=a0_0x266621;_0x144ca0[_0x4f18c9(0x15b)][_0x4f18c9(0x12b)](_0x4f18c9(0x20a)),await runGeminiAnalysis(_0x144ca0),updateHealthVector(_0x144ca0),triggerGaitAnalysis(_0x144ca0),triggerEnergyPrediction(_0x144ca0);}async function triggerGaitAnalysis(_0x446b82){const _0x1570f6=a0_0x266621;if(!_0x446b82[_0x1570f6(0x155)])return;try{const _0x499a8e=await _0x446b82[_0x1570f6(0x24f)](_0x1570f6(0x1ff));_0x499a8e&&_0x499a8e[_0x1570f6(0x1ce)]&&sendToPython(_0x446b82,_0x1570f6(0x1e9),{'sequences':JSON[_0x1570f6(0x232)](_0x499a8e[_0x1570f6(0x1ce)])});}catch(_0x154a5c){}}async function triggerEnergyPrediction(_0x40aad3){const _0x3e0320=a0_0x266621;if(!_0x40aad3[_0x3e0320(0x155)])return;try{const _0x51dcae=await getOutsideTemperatureNumeric(_0x40aad3);if(_0x51dcae===null)return;const _0x179190={},_0x421772=_0x40aad3['config'][_0x3e0320(0x1d1)]||[];for(const _0x195acd of _0x421772){if(_0x195acd[_0x3e0320(0x19b)]===_0x3e0320(0x249)&&_0x195acd[_0x3e0320(0x235)]){const _0x30c0e1=_0x40aad3[_0x3e0320(0x1fb)][_0x195acd['id']];if(_0x30c0e1!==undefined)_0x179190[_0x195acd['location']]=_0x30c0e1;}}Object[_0x3e0320(0x17d)](_0x179190)[_0x3e0320(0x12d)]>0x0&&sendToPython(_0x40aad3,_0x3e0320(0x22f),{'current_temps':_0x179190,'t_out':_0x51dcae});}catch(_0x4a5e36){}}function updateHealthVector(_0x49da68){const _0x16c85e=a0_0x266621;if(!_0x49da68[_0x16c85e(0x144)]||_0x49da68['rawEventLog']['length']===0x0)return;const _0x35980c=new Array(0x60)[_0x16c85e(0x26b)](0x0),_0x34e4d3=new Date()[_0x16c85e(0x196)](0x0,0x0,0x0,0x0);_0x49da68[_0x16c85e(0x144)][_0x16c85e(0x1c6)](_0x195125=>{const _0x11c56e=_0x16c85e,_0x96bb26=new Date(_0x195125[_0x11c56e(0x19f)]);if(_0x96bb26[_0x11c56e(0x23a)]()>=_0x34e4d3){const _0x4acaa9=_0x96bb26[_0x11c56e(0x24e)](),_0x16c1b7=_0x96bb26['getMinutes'](),_0x449a7b=_0x4acaa9*0x4+Math[_0x11c56e(0x1f8)](_0x16c1b7/0xf);if(_0x449a7b>=0x0&&_0x449a7b<0x60)_0x35980c[_0x449a7b]++;}}),_0x49da68[_0x16c85e(0x22d)](_0x16c85e(0x170),{'val':JSON[_0x16c85e(0x11a)](_0x35980c),'ack':!![]});}async function getWeatherContext(_0x5f15d2){const _0x4a3424=a0_0x266621;if(!_0x5f15d2[_0x4a3424(0x22b)]['useWeather']||!_0x5f15d2[_0x4a3424(0x22b)][_0x4a3424(0x297)])return _0x4a3424(0x1a6);try{const _0x471c3b=_0x5f15d2[_0x4a3424(0x22b)][_0x4a3424(0x297)];let _0x205eb7=await _0x5f15d2['getForeignStateAsync'](_0x471c3b+_0x4a3424(0x188));if(!_0x205eb7)_0x205eb7=await _0x5f15d2['getForeignStateAsync'](_0x471c3b+_0x4a3424(0x192));let _0x1855c0=await _0x5f15d2[_0x4a3424(0x2a6)](_0x471c3b+'.Current.WeatherText');if(!_0x1855c0)_0x1855c0=await _0x5f15d2['getForeignStateAsync'](_0x471c3b+'.forecast.current.state');if(_0x205eb7&&_0x1855c0)return _0x205eb7['val']+_0x4a3424(0x14b)+_0x1855c0[_0x4a3424(0x1ce)];}catch(_0x422b65){}return _0x4a3424(0x116);}async function getCalendarContext(_0x30fa27){const _0x5b1ae8=a0_0x266621;if(!_0x30fa27[_0x5b1ae8(0x22b)]['useCalendar']||!_0x30fa27[_0x5b1ae8(0x22b)][_0x5b1ae8(0x279)])return _0x5b1ae8(0x194);return _0x5b1ae8(0x229);}async function getCalendarNames(_0x69cdd1,_0x4daeb5){return[];}async function saveFeedback(_0x51c35e,_0x4acea4){const _0xf9929e=a0_0x266621;_0x51c35e[_0xf9929e(0x15b)][_0xf9929e(0x283)](_0xf9929e(0x29e)+_0x4acea4['rating']);}async function runGeminiAnalysis(_0x526154,_0x521a05=''){const _0x2c103b=a0_0x266621;if(!_0x526154[_0x2c103b(0x1aa)])return;if(_0x526154[_0x2c103b(0x14f)]['length']===0x0)return;const _0x4dbe2f=_0x526154[_0x2c103b(0x14f)][_0x2c103b(0x25d)](0x0,0xf),_0xafb226=await getWeatherContext(_0x526154),_0x1f77d1=_0x526154[_0x2c103b(0x1cf)],_0x1c79da=PERSONA_MAPPING[_0x526154[_0x2c103b(0x22b)]['aiPersona']||_0x2c103b(0x237)],_0x5d2e64=_0x526154['config'][_0x2c103b(0x276)]||_0x2c103b(0x164);let _0x236b13=_0x2c103b(0x26e);try{const _0x43d1d4=await _0x526154['getStateAsync'](_0x2c103b(0x15e));if(_0x43d1d4&&_0x43d1d4[_0x2c103b(0x1ce)])_0x236b13=_0x43d1d4[_0x2c103b(0x1ce)];}catch(_0x2091b2){}let _0x557f9c=![];try{const _0x2ae1ea=await _0x526154[_0x2c103b(0x24f)]('analysis.automation.autoApply');if(_0x2ae1ea&&_0x2ae1ea[_0x2c103b(0x1ce)])_0x557f9c=!![];}catch(_0x38af9c){}const _0x34fb7a=_0x2c103b(0x127)+_0x1c79da+_0x2c103b(0x193)+_0x5d2e64+_0x2c103b(0x21d)+_0x1f77d1+'.\x20WETTER:\x20'+_0xafb226+_0x2c103b(0x1bf)+_0x236b13+_0x2c103b(0x171)+JSON[_0x2c103b(0x11a)](_0x4dbe2f)+'.\x20EMERGENCY:\x20'+_0x521a05+_0x2c103b(0x176);try{const _0x39607c=await _0x526154['geminiModel'][_0x2c103b(0x265)](_0x34fb7a),_0x95dd3c=JSON[_0x2c103b(0x232)](_0x39607c['response'][_0x2c103b(0x137)]()['replace'](/```json|```/g,'')[_0x2c103b(0x1d2)]());await _0x526154[_0x2c103b(0x22d)](_0x2c103b(0x27e),{'val':JSON[_0x2c103b(0x11a)](_0x95dd3c),'ack':!![]});if(_0x95dd3c[_0x2c103b(0x280)])await _0x526154[_0x2c103b(0x22d)](_0x2c103b(0x125),{'val':_0x95dd3c[_0x2c103b(0x280)],'ack':!![]});const _0x12aa87={'timestamp':Date['now'](),'id':Date['now']()[_0x2c103b(0x210)](),'analysis':{'activity':{'summary':_0x95dd3c[_0x2c103b(0x280)],'isAlert':_0x95dd3c[_0x2c103b(0x241)],'alertReason':_0x95dd3c[_0x2c103b(0x1ed)]},'comfort':{'automationProposal':_0x95dd3c[_0x2c103b(0x1cd)]}}};await updateAnalysisHistory(_0x526154,_0x12aa87);const _0x3f676b=_0x95dd3c[_0x2c103b(0x241)]||![];_0x3f676b!==_0x526154[_0x2c103b(0x1a9)]&&(await _0x526154['setStateAsync']('analysis.isAlert',{'val':_0x3f676b,'ack':!![]}),_0x526154[_0x2c103b(0x1a9)]=_0x3f676b,_0x3f676b&&(await _0x526154['setStateAsync'](_0x2c103b(0x132),{'val':_0x95dd3c[_0x2c103b(0x1ed)],'ack':!![]}),sendNotification(_0x526154,_0x2c103b(0x270)+_0x95dd3c[_0x2c103b(0x1ed)],![],_0x95dd3c[_0x2c103b(0x223)])));if(_0x95dd3c[_0x2c103b(0x1cd)]&&_0x95dd3c[_0x2c103b(0x1cd)][_0x2c103b(0x20d)]){await _0x526154[_0x2c103b(0x22d)]('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),await _0x526154[_0x2c103b(0x22d)]('analysis.automation.description',{'val':_0x95dd3c[_0x2c103b(0x1cd)][_0x2c103b(0x213)],'ack':!![]}),await _0x526154[_0x2c103b(0x22d)](_0x2c103b(0x167),{'val':_0x95dd3c[_0x2c103b(0x1cd)][_0x2c103b(0x19a)],'ack':!![]}),await _0x526154[_0x2c103b(0x22d)]('analysis.automation.targetValue',{'val':JSON['stringify'](_0x95dd3c['automationProposal'][_0x2c103b(0x165)]),'ack':!![]});if(_0x557f9c)executeAutomationAction(_0x526154);}}catch(_0x536315){_0x526154[_0x2c103b(0x15b)][_0x2c103b(0x1fa)](_0x2c103b(0x160)+_0x536315[_0x2c103b(0x195)]);}}async function startSystem(_0x537a35){const _0x4519b7=a0_0x266621;_0x537a35[_0x4519b7(0x15b)][_0x4519b7(0x283)](_0x4519b7(0x148)),await initZombies(_0x537a35);try{_0x537a35[_0x4519b7(0x155)]=await checkLicense(_0x537a35[_0x4519b7(0x22b)]['licenseKey']);}catch(_0x517624){}if(!_0x537a35[_0x4519b7(0x22b)][_0x4519b7(0x1a4)]||_0x537a35[_0x4519b7(0x22b)][_0x4519b7(0x1a4)]<0.1)_0x537a35[_0x4519b7(0x22b)][_0x4519b7(0x1a4)]=0xc;await initHistory(_0x537a35),await initSystemConfig(_0x537a35);if(_0x537a35[_0x4519b7(0x22b)][_0x4519b7(0x129)])try{_0x537a35[_0x4519b7(0x1f3)]=new GoogleGenerativeAI(_0x537a35['config']['geminiApiKey']),_0x537a35[_0x4519b7(0x1aa)]=_0x537a35[_0x4519b7(0x1f3)][_0x4519b7(0x184)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':'application/json'}}),_0x537a35[_0x4519b7(0x15b)][_0x4519b7(0x283)](_0x4519b7(0x29d));}catch(_0x308e76){_0x537a35[_0x4519b7(0x15b)][_0x4519b7(0x1fa)]('Gemini\x20Init\x20Error:\x20'+_0x308e76[_0x4519b7(0x195)]);}await createAllObjects(_0x537a35),await loadSystemMode(_0x537a35),await loadRawEventLog(_0x537a35),await loadDailyDigests(_0x537a35),_0x537a35[_0x4519b7(0x183)]('analysis.trigger'),_0x537a35[_0x4519b7(0x183)](LTM_DP_TRIGGER_DIGEST),_0x537a35[_0x4519b7(0x183)](_0x4519b7(0x136)),_0x537a35[_0x4519b7(0x183)](_0x4519b7(0x153)),_0x537a35[_0x4519b7(0x183)](_0x4519b7(0x281)),_0x537a35['subscribeStates'](_0x4519b7(0x224)),_0x537a35[_0x4519b7(0x183)](_0x4519b7(0x27f)),_0x537a35[_0x4519b7(0x183)](_0x4519b7(0x254)),_0x537a35['subscribeStates']('analysis.training.triggerEnergy'),_0x537a35['subscribeStates'](_0x4519b7(0x288)),_0x537a35[_0x4519b7(0x183)](_0x4519b7(0x2a0)),await initSensorSubscriptions(_0x537a35),await initPresenceSubscriptions(_0x537a35),await setupTelegramListener(_0x537a35),setTimeout(()=>checkWifiPresence(_0x537a35),0x1388);if(_0x537a35[_0x4519b7(0x134)])clearInterval(_0x537a35[_0x4519b7(0x134)]);const _0x557d86=_0x537a35[_0x4519b7(0x22b)][_0x4519b7(0x1bd)]||0xf;_0x557d86>0x0&&(_0x537a35['analysisTimer']=setInterval(()=>{runAutopilot(_0x537a35);},_0x557d86*0x3c*0x3e8)),schedulers[_0x4519b7(0x1f5)](_0x537a35,()=>createDailyDigest(_0x537a35)),schedulers[_0x4519b7(0x1c2)](_0x537a35),schedulers[_0x4519b7(0x1ec)](_0x537a35,()=>runBaselineDriftAnalysis(_0x537a35)),schedulers[_0x4519b7(0x236)](_0x537a35,()=>sendMorningBriefing(_0x537a35)),startPythonService(_0x537a35),setTimeout(()=>{const _0x4c1393=_0x4519b7;_0x537a35[_0x4c1393(0x1c0)]&&(runPythonHealthCheck(_0x537a35),triggerGaitAnalysis(_0x537a35),triggerEnergyPrediction(_0x537a35)),updateHealthVector(_0x537a35);},0x1388);}class CogniLiving extends utils[a0_0x266621(0x1fd)]{constructor(_0x467697){const _0x288622=a0_0x266621;super({..._0x467697,'name':_0x288622(0x272)}),this[_0x288622(0x14f)]=[],this['analysisHistory']=[],this[_0x288622(0x144)]=[],this[_0x288622(0x216)]=[],this[_0x288622(0x1fb)]={},this[_0x288622(0x122)]={'latitude':0x0,'longitude':0x0,'city':''},this['isPresent']=!![],this[_0x288622(0x128)]=null,this['exitGraceTimer']=null,this[_0x288622(0x173)]=![],this['genAI']=null,this[_0x288622(0x1aa)]=null,this[_0x288622(0x1cf)]=SYSTEM_MODES[_0x288622(0x16a)],this['isProVersion']=![],this['lastAlertState']=![],this[_0x288622(0x275)]=_0x288622(0x220),this[_0x288622(0x134)]=null,this[_0x288622(0x1a2)]=null,this['modeResetJob']=null,this[_0x288622(0x27a)]=null,this['briefingJob']=null,this[_0x288622(0x1c0)]=null,this['dependencyInstallInProgress']=![],this['on']('ready',this[_0x288622(0x133)][_0x288622(0x293)](this)),this['on'](_0x288622(0x1dc),this['onStateChange'][_0x288622(0x293)](this)),this['on']('unload',this[_0x288622(0x175)][_0x288622(0x293)](this)),this['on']('message',this[_0x288622(0x14d)][_0x288622(0x293)](this));}async[a0_0x266621(0x133)](){const _0x2e43af=a0_0x266621;this['log']['info'](_0x2e43af(0x1d8)+this['version']+_0x2e43af(0x278));if(!installer[_0x2e43af(0x211)](this,()=>startSystem(this)))return;}[a0_0x266621(0x175)](_0x68f124){const _0x45b92b=a0_0x266621;if(this[_0x45b92b(0x134)])clearInterval(this[_0x45b92b(0x134)]);if(this[_0x45b92b(0x27a)])clearInterval(this[_0x45b92b(0x27a)]);if(this['ltmJob'])this[_0x45b92b(0x1a2)][_0x45b92b(0x1e2)]();if(this['modeResetJob'])this['modeResetJob'][_0x45b92b(0x1e2)]();if(this[_0x45b92b(0x25c)])this[_0x45b92b(0x25c)][_0x45b92b(0x1e2)]();if(this['exitTimer'])clearTimeout(this[_0x45b92b(0x128)]);if(this['exitGraceTimer'])clearTimeout(this[_0x45b92b(0x20b)]);stopPythonService(this),_0x68f124();}async[a0_0x266621(0x21b)](_0x152f9c,_0x57f890){const _0x3a0d61=a0_0x266621;if(!_0x57f890||this['dependencyInstallInProgress'])return;if(_0x152f9c['includes']('telegram')&&_0x152f9c[_0x3a0d61(0x207)](_0x3a0d61(0x115))&&_0x57f890[_0x3a0d61(0x1ce)]){await handleTelegramResponse(this,_0x57f890['val']);return;}if(_0x152f9c===this['namespace']+'.'+SYSTEM_DP_MODE){if(_0x57f890['val']&&Object['values'](SYSTEM_MODES)['includes'](_0x57f890[_0x3a0d61(0x1ce)])){this[_0x3a0d61(0x1cf)]=_0x57f890['val'];if(_0x57f890[_0x3a0d61(0x1ce)]===SYSTEM_MODES[_0x3a0d61(0x24b)])await setPresence(this,![]);else await setPresence(this,!![]);}if(!_0x57f890[_0x3a0d61(0x18f)])this[_0x3a0d61(0x1bb)](_0x152f9c,{'val':this[_0x3a0d61(0x1cf)],'ack':!![]});return;}if(!_0x57f890['ack']){_0x152f9c[_0x3a0d61(0x24a)]('analysis.trigger')&&_0x57f890[_0x3a0d61(0x1ce)]&&(this[_0x3a0d61(0x1bb)](_0x152f9c,{'val':![],'ack':!![]}),runGeminiAnalysis(this));if(_0x152f9c[_0x3a0d61(0x24a)](_0x3a0d61(0x248))&&_0x57f890[_0x3a0d61(0x1ce)]){this['setState'](_0x152f9c,{'val':![],'ack':!![]});if(this[_0x3a0d61(0x155)])createDailyDigest(this);}_0x152f9c[_0x3a0d61(0x24a)]('triggerBriefing')&&_0x57f890['val']&&(this[_0x3a0d61(0x1bb)](_0x152f9c,{'val':![],'ack':!![]}),sendMorningBriefing(this));_0x152f9c[_0x3a0d61(0x24a)](_0x3a0d61(0x1d3))&&_0x57f890['val']&&(this[_0x3a0d61(0x1bb)](_0x152f9c,{'val':![],'ack':!![]}),executeAutomationAction(this));if(_0x152f9c[_0x3a0d61(0x24a)](_0x3a0d61(0x27f))&&_0x57f890[_0x3a0d61(0x1ce)]){this['setState'](_0x152f9c,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x16a87a=await this['getStateAsync']('LTM.trainingData.sequences');if(_0x16a87a&&_0x16a87a[_0x3a0d61(0x1ce)]){const _0x4ac744=JSON['parse'](_0x16a87a[_0x3a0d61(0x1ce)]);this[_0x3a0d61(0x15b)]['info']('ðŸ§ \x20Triggering\x20Security\x20Training...'),this[_0x3a0d61(0x22d)](_0x3a0d61(0x1b8),{'val':'Sec-Training\x20started...','ack':!![]}),sendToPython(this,_0x3a0d61(0x138),{'sequences':_0x4ac744});}}catch(_0x314b7c){this[_0x3a0d61(0x15b)]['error'](_0x3a0d61(0x112)+_0x314b7c['message']);}}if(_0x152f9c['includes'](_0x3a0d61(0x254))&&_0x57f890['val']){this[_0x3a0d61(0x1bb)](_0x152f9c,{'val':![],'ack':!![]});if(this[_0x3a0d61(0x155)])try{const _0x3aba87=await this[_0x3a0d61(0x24f)](LTM_DP_DAILY_DIGESTS);if(_0x3aba87&&_0x3aba87[_0x3a0d61(0x1ce)])sendToPython(this,_0x3a0d61(0x282),{'digests':JSON['parse'](_0x3aba87[_0x3a0d61(0x1ce)])});}catch(_0x3559c7){}}if(_0x152f9c[_0x3a0d61(0x24a)](_0x3a0d61(0x161))&&_0x57f890[_0x3a0d61(0x1ce)]){this[_0x3a0d61(0x1bb)](_0x152f9c,{'val':![],'ack':!![]});if(this[_0x3a0d61(0x155)])try{const _0x2c05e7=await this[_0x3a0d61(0x24f)](_0x3a0d61(0x1ef));if(_0x2c05e7&&_0x2c05e7['val'])sendToPython(this,_0x3a0d61(0x262),{'points':JSON['parse'](_0x2c05e7['val'])});}catch(_0x33f2a4){}}if(_0x152f9c[_0x3a0d61(0x24a)](_0x3a0d61(0x288))&&_0x57f890[_0x3a0d61(0x1ce)]){this[_0x3a0d61(0x1bb)](_0x152f9c,{'val':![],'ack':!![]});if(this[_0x3a0d61(0x155)])try{const _0x4e7afb=await this[_0x3a0d61(0x24f)](LTM_DP_RAW_LOG);_0x4e7afb&&_0x4e7afb[_0x3a0d61(0x1ce)]&&(this[_0x3a0d61(0x15b)][_0x3a0d61(0x283)](_0x3a0d61(0x1c8)),sendToPython(this,_0x3a0d61(0x209),{'events':JSON[_0x3a0d61(0x232)](_0x4e7afb[_0x3a0d61(0x1ce)])}));}catch(_0x5052c8){}}if(_0x152f9c['includes'](_0x3a0d61(0x2a0))&&_0x57f890[_0x3a0d61(0x1ce)]){this[_0x3a0d61(0x1bb)](_0x152f9c,{'val':![],'ack':!![]});if(this[_0x3a0d61(0x155)])try{const _0x32fef0=await this[_0x3a0d61(0x24f)](_0x3a0d61(0x1ff));if(_0x32fef0&&_0x32fef0[_0x3a0d61(0x1ce)]){const _0x30a748=JSON[_0x3a0d61(0x232)](_0x32fef0['val']);this[_0x3a0d61(0x15b)]['info']('ðŸ•¸ï¸\x20Building\x20Topology\x20Matrix...'),sendToPython(this,'BUILD_TOPOLOGY',{'sequences':_0x30a748});}}catch(_0x1addef){this[_0x3a0d61(0x15b)][_0x3a0d61(0x1fa)](_0x3a0d61(0x296)+_0x1addef[_0x3a0d61(0x195)]);}}return;}if(this[_0x3a0d61(0x22b)][_0x3a0d61(0x1f0)]&&this[_0x3a0d61(0x22b)][_0x3a0d61(0x1f0)][_0x3a0d61(0x24a)](_0x152f9c)){await checkWifiPresence(this);return;}const _0x29b0bd=(this['config']['devices']||[])['find'](_0x51a3e3=>_0x51a3e3['id']===_0x152f9c);if(_0x29b0bd)processSensorEvent(this,_0x152f9c,_0x57f890,_0x29b0bd);}async['onMessage'](_0x51e459){const _0x34ae57=a0_0x266621;if(typeof _0x51e459===_0x34ae57(0x212)&&_0x51e459[_0x34ae57(0x195)]){if(_0x51e459['command']===_0x34ae57(0x12c)){const _0xed821a=_0x51e459[_0x34ae57(0x195)][_0x34ae57(0x23f)]||this[_0x34ae57(0x22b)][_0x34ae57(0x129)];if(!_0xed821a)return this[_0x34ae57(0x177)](_0x51e459[_0x34ae57(0x1e7)],_0x51e459['command'],{'success':![],'message':_0x34ae57(0x186)},_0x51e459['callback']);try{const _0x22f088=new GoogleGenerativeAI(_0xed821a),_0x2ed968=_0x22f088['getGenerativeModel']({'model':GEMINI_MODEL}),_0x406e97=await _0x2ed968[_0x34ae57(0x265)]('Hi');this[_0x34ae57(0x177)](_0x51e459[_0x34ae57(0x1e7)],_0x51e459[_0x34ae57(0x157)],{'success':!![],'message':_0x34ae57(0x139)+_0x406e97[_0x34ae57(0x22a)][_0x34ae57(0x137)]()},_0x51e459[_0x34ae57(0x1d6)]);}catch(_0x1bc198){this[_0x34ae57(0x177)](_0x51e459[_0x34ae57(0x1e7)],_0x51e459[_0x34ae57(0x157)],{'success':![],'message':_0x34ae57(0x266)+_0x1bc198[_0x34ae57(0x195)]},_0x51e459['callback']);}}else{if(_0x51e459[_0x34ae57(0x157)]==='testContext'){const _0x5f1ee3=await getWeatherContext(this),_0xdd6ec8=await getCalendarContext(this);this[_0x34ae57(0x177)](_0x51e459['from'],_0x51e459['command'],{'success':!![],'weather':_0x5f1ee3,'calendar':_0xdd6ec8},_0x51e459[_0x34ae57(0x1d6)]);}else{if(_0x51e459[_0x34ae57(0x157)]===_0x34ae57(0x120)){if(!this[_0x34ae57(0x155)])return this[_0x34ae57(0x177)](_0x51e459[_0x34ae57(0x1e7)],_0x51e459[_0x34ae57(0x157)],{'success':![],'isPro':![]},_0x51e459[_0x34ae57(0x1d6)]);let _0x75adc2={'status':_0x34ae57(0x228)};try{const _0x4d5f7c=await this['getStateAsync'](LTM_DP_DRIFT_STATUS);_0x75adc2[_0x34ae57(0x295)]=_0x4d5f7c?_0x4d5f7c[_0x34ae57(0x1ce)]:_0x34ae57(0x228);}catch(_0x202bb5){}this['sendTo'](_0x51e459[_0x34ae57(0x1e7)],_0x51e459[_0x34ae57(0x157)],{'success':!![],'isPro':!![],'dailyDigests':this[_0x34ae57(0x216)],'driftAnalysis':_0x75adc2,'analysisHistory':this[_0x34ae57(0x189)]},_0x51e459[_0x34ae57(0x1d6)]);}else{if(_0x51e459['command']===_0x34ae57(0x1b0)){const _0x2c656f=this[_0x34ae57(0x216)]['length'],_0x3988df=new Date(),_0x1101f1=new Date(_0x3988df[_0x34ae57(0x14e)](),_0x3988df[_0x34ae57(0x277)](),_0x3988df[_0x34ae57(0x187)]())[_0x34ae57(0x23a)](),_0x3bf86d=this[_0x34ae57(0x144)][_0x34ae57(0x11d)](_0x1c4ba8=>new Date(_0x1c4ba8[_0x34ae57(0x19f)])['getTime']()>_0x1101f1)[_0x34ae57(0x12d)],_0x236bf3=new Array(0x18)['fill'](0x0);this['rawEventLog'][_0x34ae57(0x1c6)](_0x3b5ccf=>{const _0x3430e3=_0x34ae57,_0x2309cd=new Date(_0x3b5ccf[_0x3430e3(0x19f)]);if(_0x2309cd[_0x3430e3(0x23a)]()>_0x1101f1)_0x236bf3[_0x2309cd[_0x3430e3(0x24e)]()]++;});let _0x3ce6ff={'status':_0x34ae57(0x228)};try{const _0x4dbd49=await this[_0x34ae57(0x24f)](LTM_DP_DRIFT_STATUS);_0x3ce6ff[_0x34ae57(0x295)]=_0x4dbd49?_0x4dbd49[_0x34ae57(0x1ce)]:_0x34ae57(0x228);}catch(_0x43832a){}let _0x25f16f='';try{const _0x52fcca=await this[_0x34ae57(0x24f)](_0x34ae57(0x15e));_0x25f16f=_0x52fcca?_0x52fcca[_0x34ae57(0x1ce)]:'';}catch(_0x1c204e){}let _0x324856=null;!this[_0x34ae57(0x1aa)]&&(_0x324856=this[_0x34ae57(0x22b)][_0x34ae57(0x129)]?_0x34ae57(0x181):'Kein\x20API\x20Key!');let _0x2fa556={'detected':![],'description':'','targetId':'','targetValue':'','autoApply':![]};try{const _0x408739=await this['getStateAsync'](_0x34ae57(0x1ae));if(_0x408739&&_0x408739[_0x34ae57(0x1ce)]){_0x2fa556['detected']=!![];const _0x42969d=await this[_0x34ae57(0x24f)](_0x34ae57(0x222));_0x2fa556[_0x34ae57(0x213)]=_0x42969d?_0x42969d[_0x34ae57(0x1ce)]:'';const _0xe34483=await this[_0x34ae57(0x24f)](_0x34ae57(0x167));_0x2fa556[_0x34ae57(0x19a)]=_0xe34483?_0xe34483[_0x34ae57(0x1ce)]:'';const _0x197b60=await this[_0x34ae57(0x24f)](_0x34ae57(0x1cc));_0x2fa556[_0x34ae57(0x165)]=_0x197b60?_0x197b60[_0x34ae57(0x1ce)]:'';}const _0x157870=await this[_0x34ae57(0x24f)](_0x34ae57(0x224));_0x2fa556[_0x34ae57(0x18e)]=_0x157870?!!_0x157870['val']:![];}catch(_0x5b0ff5){}this['sendTo'](_0x51e459[_0x34ae57(0x1e7)],_0x51e459[_0x34ae57(0x157)],{'success':!![],'eventHistory':this[_0x34ae57(0x14f)][_0x34ae57(0x25d)](0x0,0xf),'stats':{'digestCount':_0x2c656f,'eventCountToday':_0x3bf86d,'hourlyActivity':_0x236bf3,'driftStatus':_0x3ce6ff[_0x34ae57(0x295)],'isPresent':this['isPresent'],'presenceWho':_0x25f16f,'minDays':this[_0x34ae57(0x22b)][_0x34ae57(0x159)]||0x7,'stbDays':this['config']['ltmStbWindowDays']||0xe,'ltbDays':this['config'][_0x34ae57(0x271)]||0x3c,'systemError':_0x324856},'automation':_0x2fa556},_0x51e459[_0x34ae57(0x1d6)]);}else{if(_0x51e459[_0x34ae57(0x157)]===_0x34ae57(0x1eb))try{const _0x25b690=await scanner['scanForDevices'](this,_0x51e459[_0x34ae57(0x195)]||{});this[_0x34ae57(0x177)](_0x51e459[_0x34ae57(0x1e7)],_0x51e459['command'],{'success':!![],'devices':_0x25b690},_0x51e459[_0x34ae57(0x1d6)]);}catch(_0x21d48c){this['sendTo'](_0x51e459[_0x34ae57(0x1e7)],_0x51e459[_0x34ae57(0x157)],{'success':![],'error':_0x21d48c[_0x34ae57(0x195)]},_0x51e459[_0x34ae57(0x1d6)]);}else{if(_0x51e459[_0x34ae57(0x157)]===_0x34ae57(0x255)){const _0x17aa54=await this['getForeignObjectsAsync'](_0x34ae57(0x1c4),_0x34ae57(0x15d)),_0x4e9039=[];if(_0x17aa54)for(const _0x10ea0a in _0x17aa54){const _0x4672ed=_0x17aa54[_0x10ea0a],_0x47fd1a=(_0x4672ed[_0x34ae57(0x1ad)]&&typeof _0x4672ed['common'][_0x34ae57(0x217)]===_0x34ae57(0x212)?_0x4672ed[_0x34ae57(0x1ad)][_0x34ae57(0x217)]['de']:_0x4672ed[_0x34ae57(0x1ad)][_0x34ae57(0x217)])||_0x4672ed[_0x34ae57(0x1ad)][_0x34ae57(0x217)];_0x4e9039[_0x34ae57(0x258)]({'id':_0x10ea0a,'name':_0x47fd1a});}const _0x448529=await this[_0x34ae57(0x151)](_0x34ae57(0x28f),_0x34ae57(0x15d)),_0x5a5f36=[];if(_0x448529)for(const _0x6a0fa5 in _0x448529){const _0xde4df4=_0x448529[_0x6a0fa5],_0x559968=(_0xde4df4[_0x34ae57(0x1ad)]&&typeof _0xde4df4['common']['name']===_0x34ae57(0x212)?_0xde4df4[_0x34ae57(0x1ad)][_0x34ae57(0x217)]['de']:_0xde4df4[_0x34ae57(0x1ad)][_0x34ae57(0x217)])||_0x6a0fa5[_0x34ae57(0x179)]('.')[_0x34ae57(0x1be)]();_0x5a5f36['push'](_0x559968);}this[_0x34ae57(0x177)](_0x51e459['from'],_0x51e459[_0x34ae57(0x157)],{'success':!![],'enums':_0x4e9039,'rooms':_0x5a5f36},_0x51e459[_0x34ae57(0x1d6)]);}else{if(_0x51e459[_0x34ae57(0x157)]===_0x34ae57(0x1fe)){const _0x2f0ee8=_0x51e459[_0x34ae57(0x195)]['instance'];if(!_0x2f0ee8)return this[_0x34ae57(0x177)](_0x51e459[_0x34ae57(0x1e7)],_0x51e459[_0x34ae57(0x157)],{'success':![],'error':_0x34ae57(0x289)},_0x51e459[_0x34ae57(0x1d6)]);const _0x3745a1=await getCalendarNames(this,_0x2f0ee8);this[_0x34ae57(0x177)](_0x51e459['from'],_0x51e459['command'],{'success':!![],'names':_0x3745a1},_0x51e459[_0x34ae57(0x1d6)]);}else{if(_0x51e459[_0x34ae57(0x157)]===_0x34ae57(0x20f)){const {targetId:_0x28e65c,targetValue:_0x1831ea}=_0x51e459[_0x34ae57(0x195)];this[_0x34ae57(0x15b)][_0x34ae57(0x283)](_0x34ae57(0x126)+_0x28e65c+'\x20=\x20'+_0x1831ea),await this['setStateAsync'](_0x34ae57(0x1ae),{'val':!![],'ack':!![]}),await this[_0x34ae57(0x22d)](_0x34ae57(0x222),{'val':_0x34ae57(0x29b)+_0x28e65c,'ack':!![]}),await this[_0x34ae57(0x22d)](_0x34ae57(0x167),{'val':_0x28e65c,'ack':!![]}),await this['setStateAsync'](_0x34ae57(0x1cc),{'val':_0x1831ea,'ack':!![]}),this['sendTo'](_0x51e459[_0x34ae57(0x1e7)],_0x51e459[_0x34ae57(0x157)],{'success':!![]},_0x51e459[_0x34ae57(0x1d6)]);}else{if(_0x51e459[_0x34ae57(0x157)]==='submitFeedback'){const {historyId:_0x256a94,rating:_0x86d574,comment:_0x21cfb9,alertReason:_0x1f0ca8}=_0x51e459[_0x34ae57(0x195)];_0x256a94&&_0x86d574?(await saveFeedback(this,{'timestamp':Date[_0x34ae57(0x1ab)](),'historyId':_0x256a94,'rating':_0x86d574,'comment':_0x21cfb9,'alertReason':_0x1f0ca8}),this[_0x34ae57(0x177)](_0x51e459['from'],_0x51e459[_0x34ae57(0x157)],{'success':!![]},_0x51e459[_0x34ae57(0x1d6)])):this[_0x34ae57(0x177)](_0x51e459[_0x34ae57(0x1e7)],_0x51e459['command'],{'success':![],'error':_0x34ae57(0x18d)},_0x51e459[_0x34ae57(0x1d6)]);}else _0x51e459[_0x34ae57(0x157)]===_0x34ae57(0x268)&&(this['log'][_0x34ae57(0x283)]('User\x20dismissed\x20automation\x20proposal.'),await this[_0x34ae57(0x22d)](_0x34ae57(0x1ae),{'val':![],'ack':!![]}),await this[_0x34ae57(0x22d)](_0x34ae57(0x222),{'val':'','ack':!![]}),this[_0x34ae57(0x177)](_0x51e459[_0x34ae57(0x1e7)],_0x51e459[_0x34ae57(0x157)],{'success':!![]},_0x51e459[_0x34ae57(0x1d6)]));}}}}}}}}}}}if(require[a0_0x266621(0x215)]!==module)module[a0_0x266621(0x1b7)]=_0x5cfc9a=>new CogniLiving(_0x5cfc9a);else new CogniLiving();