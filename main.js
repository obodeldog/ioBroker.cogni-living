const a0_0x478de7=a0_0x26ab;(function(_0x494c49,_0xb7001d){const _0x295ea1=a0_0x26ab,_0x25e642=_0x494c49();while(!![]){try{const _0xf9a7c2=parseInt(_0x295ea1(0x1bc))/0x1+parseInt(_0x295ea1(0xfb))/0x2*(-parseInt(_0x295ea1(0x1f9))/0x3)+-parseInt(_0x295ea1(0xea))/0x4+parseInt(_0x295ea1(0xa7))/0x5*(-parseInt(_0x295ea1(0x101))/0x6)+-parseInt(_0x295ea1(0x169))/0x7+-parseInt(_0x295ea1(0xba))/0x8*(parseInt(_0x295ea1(0x157))/0x9)+parseInt(_0x295ea1(0xcd))/0xa;if(_0xf9a7c2===_0xb7001d)break;else _0x25e642['push'](_0x25e642['shift']());}catch(_0x1f5ce1){_0x25e642['push'](_0x25e642['shift']());}}}(a0_0x12fc,0xe3ac9));const a0_0x62b359=(function(){let _0xc0312=!![];return function(_0x328a0d,_0x2e365a){const _0x5270d8=_0xc0312?function(){if(_0x2e365a){const _0x11e228=_0x2e365a['apply'](_0x328a0d,arguments);return _0x2e365a=null,_0x11e228;}}:function(){};return _0xc0312=![],_0x5270d8;};}()),a0_0x177f94=a0_0x62b359(this,function(){const _0x2c00da=a0_0x26ab;return a0_0x177f94['toString']()[_0x2c00da(0x9b)](_0x2c00da(0x19e))[_0x2c00da(0x133)]()[_0x2c00da(0x103)](a0_0x177f94)[_0x2c00da(0x9b)](_0x2c00da(0x19e));});a0_0x177f94();'use strict';const utils=require(a0_0x478de7(0x228)),{GoogleGenerativeAI}=require(a0_0x478de7(0x1e3)),{spawn}=require(a0_0x478de7(0x10b)),path=require(a0_0x478de7(0x120)),fs=require('fs'),installer=require(a0_0x478de7(0x140)),scanner=require(a0_0x478de7(0x21b)),schedulers=require(a0_0x478de7(0x1fe)),HISTORY_MAX_SIZE=0x32,RAW_LOG_MAX_SIZE=0x9c4,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL='models/gemini-flash-latest',SEQUENCE_TIMEOUT_MS=0x5*0x3c*0x3e8,MAX_TRAINING_SET_SIZE=0x1f4,THERMO_LOG_SIZE=0x3e8,EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,LTM_DP_RAW_LOG='LTM.rawEventLog',LTM_DP_DAILY_DIGESTS=a0_0x478de7(0x1c8),LTM_DP_STATUS=a0_0x478de7(0xc1),LTM_DP_TRIGGER_DIGEST=a0_0x478de7(0x1a1),LTM_DP_BASELINE_STATUS=a0_0x478de7(0x9f),LTM_DP_DRIFT_CHANNEL=a0_0x478de7(0x168),LTM_DP_DRIFT_STATUS=a0_0x478de7(0x1c7),LTM_DP_DRIFT_DETAILS='LTM.driftAnalysis.driftDetails',LTM_DP_DRIFT_LAST_CHECK=a0_0x478de7(0x174),SYSTEM_DP_MODE='system.mode',SYSTEM_MODES={'NORMAL':'normal','VACATION':a0_0x478de7(0xed),'PARTY':a0_0x478de7(0x1cb),'GUEST':a0_0x478de7(0x172)},AUTO_RESET_MODES=[SYSTEM_MODES[a0_0x478de7(0x152)],SYSTEM_MODES[a0_0x478de7(0x10c)]],PERSONA_MAPPING={'generic':a0_0x478de7(0x20b),'senior_aal':a0_0x478de7(0xdb),'family':a0_0x478de7(0x1d5),'single_comfort':'Fokus\x20auf\x20Komfort.','security':a0_0x478de7(0x20e)},ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};let activeSequence=[],sequenceTimer=null;async function initZombies(_0x59eb48){const _0x459eb9=a0_0x478de7;try{const _0x276c7f=[_0x459eb9(0x117),'events.history_debug_00'];for(const _0x35e955 of _0x276c7f){try{const _0x1fda04=await _0x59eb48['getObjectAsync'](_0x35e955);if(_0x1fda04)await _0x59eb48[_0x459eb9(0x1a5)](_0x35e955);}catch(_0x5da377){}}}catch(_0x22b13c){}}async function checkLicense(_0x36032f){return!![];}async function initHistory(_0x4e54dc){const _0x2e4c08=a0_0x478de7;try{const _0xe52842=await _0x4e54dc[_0x2e4c08(0x1a7)]('events.history');_0xe52842&&_0xe52842['val']&&(_0x4e54dc['eventHistory']=JSON[_0x2e4c08(0x18d)](_0xe52842['val']['toString']()));}catch(_0x11b66f){_0x4e54dc[_0x2e4c08(0x225)]=[];}try{const _0x516ce1=await _0x4e54dc[_0x2e4c08(0x1a7)]('analysis.analysisHistory');if(_0x516ce1&&_0x516ce1['val'])_0x4e54dc[_0x2e4c08(0xcb)]=JSON[_0x2e4c08(0x18d)](_0x516ce1[_0x2e4c08(0x1fa)][_0x2e4c08(0x133)]());}catch(_0x1fbdfc){_0x4e54dc[_0x2e4c08(0xcb)]=[];}if(_0x4e54dc[_0x2e4c08(0x225)]&&_0x4e54dc['eventHistory'][_0x2e4c08(0x194)]>0x0){_0x4e54dc['log'][_0x2e4c08(0xac)](_0x2e4c08(0x217));for(let _0xa8e699=_0x4e54dc['eventHistory'][_0x2e4c08(0x194)]-0x1;_0xa8e699>=0x0;_0xa8e699--){const _0x1db155=_0x4e54dc['eventHistory'][_0xa8e699];if(_0x1db155&&_0x1db155['id']!==undefined&&_0x1db155[_0x2e4c08(0x99)]!==undefined)_0x4e54dc[_0x2e4c08(0x1ab)][_0x1db155['id']]=_0x1db155['value'];}}}async function initSystemConfig(_0x7f9d6d){const _0x190914=a0_0x478de7;try{const _0x90cc6b=await _0x7f9d6d['getForeignObjectAsync'](_0x190914(0x17d));if(_0x90cc6b&&_0x90cc6b['common'])_0x7f9d6d[_0x190914(0xa2)]={'latitude':_0x90cc6b['common']['latitude']||0x0,'longitude':_0x90cc6b[_0x190914(0x11a)][_0x190914(0x98)]||0x0,'city':_0x90cc6b['common'][_0x190914(0xf7)]||''};}catch(_0xf83e08){}}async function createAllObjects(_0x6cb59b){const _0x54baba=a0_0x478de7;await _0x6cb59b[_0x54baba(0x197)](_0x54baba(0x17f),{'type':_0x54baba(0x11e),'common':{'name':_0x54baba(0x116)},'native':{}}),await _0x6cb59b[_0x54baba(0x197)](SYSTEM_DP_MODE,{'type':_0x54baba(0xdf),'common':{'name':_0x54baba(0xe9),'type':_0x54baba(0x14a),'role':_0x54baba(0xdf),'read':!![],'write':!![],'def':SYSTEM_MODES['NORMAL']},'native':{}}),await _0x6cb59b[_0x54baba(0xd4)](_0x54baba(0x15b),{'type':_0x54baba(0xdf),'common':{'name':_0x54baba(0x1af),'type':_0x54baba(0x14a),'role':_0x54baba(0x12f),'read':!![],'write':![]},'native':{}}),await _0x6cb59b['setObjectNotExistsAsync'](_0x54baba(0x15e),{'type':_0x54baba(0xdf),'common':{'name':_0x54baba(0x1c3),'type':_0x54baba(0x14a),'role':_0x54baba(0x9c),'read':!![],'write':![]},'native':{}}),await _0x6cb59b[_0x54baba(0xd4)](_0x54baba(0x1a4),{'type':_0x54baba(0xdf),'common':{'name':_0x54baba(0x1bd),'type':'string','role':'json','read':!![],'write':![]},'native':{}}),await _0x6cb59b[_0x54baba(0x197)](_0x54baba(0x94),{'type':'channel','common':{'name':'AI\x20Training'},'native':{}}),await _0x6cb59b[_0x54baba(0xd4)](_0x54baba(0x110),{'type':_0x54baba(0xdf),'common':{'name':'Train\x20Security','type':_0x54baba(0x1b7),'role':'button','read':!![],'write':!![]},'native':{}}),await _0x6cb59b[_0x54baba(0xd4)](_0x54baba(0xbb),{'type':_0x54baba(0xdf),'common':{'name':_0x54baba(0xd8),'type':_0x54baba(0x1b7),'role':_0x54baba(0xfc),'read':!![],'write':!![]},'native':{}}),await _0x6cb59b['setObjectNotExistsAsync'](_0x54baba(0x1f8),{'type':_0x54baba(0xdf),'common':{'name':_0x54baba(0x153),'type':_0x54baba(0x1b7),'role':_0x54baba(0xfc),'read':!![],'write':!![]},'native':{}}),await _0x6cb59b[_0x54baba(0xd4)](_0x54baba(0xcc),{'type':_0x54baba(0xdf),'common':{'name':_0x54baba(0x1c0),'type':_0x54baba(0x1b7),'role':'button','read':!![],'write':!![]},'native':{}}),await _0x6cb59b[_0x54baba(0xd4)](_0x54baba(0x165),{'type':_0x54baba(0xdf),'common':{'name':'Build\x20Topology','type':'boolean','role':_0x54baba(0xfc),'read':!![],'write':!![]},'native':{}}),await _0x6cb59b[_0x54baba(0xd4)]('analysis.training.status',{'type':_0x54baba(0xdf),'common':{'name':_0x54baba(0x121),'type':_0x54baba(0x14a),'role':_0x54baba(0x12f),'read':!![],'write':![]},'native':{}}),await _0x6cb59b[_0x54baba(0x197)](_0x54baba(0x138),{'type':_0x54baba(0x11e),'common':{'name':_0x54baba(0x139)},'native':{}}),await _0x6cb59b['setObjectNotExistsAsync']('analysis.security.lastScore',{'type':'state','common':{'name':'Anomaly\x20Score','type':_0x54baba(0x106),'role':_0x54baba(0x99),'read':!![],'write':![]},'native':{}}),await _0x6cb59b[_0x54baba(0xd4)](_0x54baba(0xc7),{'type':_0x54baba(0xdf),'common':{'name':'Current\x20Threshold','type':_0x54baba(0x106),'role':_0x54baba(0x99),'read':!![],'write':![],'def':0.05},'native':{}}),await _0x6cb59b[_0x54baba(0xd4)](_0x54baba(0x190),{'type':'state','common':{'name':'Last\x20Check','type':'string','role':_0x54baba(0x149),'read':!![],'write':![]},'native':{}}),await _0x6cb59b['setObjectNotExistsAsync'](_0x54baba(0x218),{'type':_0x54baba(0xdf),'common':{'name':_0x54baba(0x123),'type':_0x54baba(0x14a),'role':_0x54baba(0x9c),'read':!![],'write':![]},'native':{}}),await _0x6cb59b[_0x54baba(0x197)](_0x54baba(0x209),{'type':_0x54baba(0x11e),'common':{'name':_0x54baba(0x143)},'native':{}}),await _0x6cb59b[_0x54baba(0xd4)](_0x54baba(0xef),{'type':_0x54baba(0xdf),'common':{'name':_0x54baba(0x16e),'type':_0x54baba(0x14a),'role':_0x54baba(0x149),'read':!![],'write':![]},'native':{}}),await _0x6cb59b[_0x54baba(0xd4)](_0x54baba(0x20a),{'type':_0x54baba(0xdf),'common':{'name':_0x54baba(0x1b5),'type':_0x54baba(0x1b7),'role':_0x54baba(0xfd),'read':!![],'write':![]},'native':{}}),await _0x6cb59b[_0x54baba(0xd4)]('analysis.health.trendDiagnosis',{'type':'state','common':{'name':_0x54baba(0xce),'type':_0x54baba(0x14a),'role':_0x54baba(0x12f),'read':!![],'write':![]},'native':{}}),await _0x6cb59b['setObjectNotExistsAsync'](_0x54baba(0x109),{'type':_0x54baba(0xdf),'common':{'name':_0x54baba(0xa4),'type':'number','role':_0x54baba(0x99),'read':!![],'write':![]},'native':{}}),await _0x6cb59b['setObjectNotExistsAsync'](_0x54baba(0x10e),{'type':_0x54baba(0xdf),'common':{'name':_0x54baba(0x1c5),'type':_0x54baba(0x14a),'role':_0x54baba(0x9c),'read':!![],'write':![]},'native':{}}),await _0x6cb59b[_0x54baba(0xd4)]('analysis.health.gaitSpeed',{'type':_0x54baba(0xdf),'common':{'name':_0x54baba(0x114),'type':_0x54baba(0x106),'role':_0x54baba(0x99),'read':!![],'write':![]},'native':{}}),await _0x6cb59b[_0x54baba(0x197)]('analysis.energy',{'type':_0x54baba(0x11e),'common':{'name':_0x54baba(0x200)},'native':{}}),await _0x6cb59b[_0x54baba(0xd4)](_0x54baba(0x9a),{'type':_0x54baba(0xdf),'common':{'name':_0x54baba(0xf4),'type':'string','role':'text','read':!![],'write':![]},'native':{}}),await _0x6cb59b['setObjectNotExistsAsync'](_0x54baba(0x1d1),{'type':_0x54baba(0xdf),'common':{'name':_0x54baba(0xc8),'type':_0x54baba(0x14a),'role':_0x54baba(0x12f),'read':!![],'write':![]},'native':{}}),await _0x6cb59b[_0x54baba(0xd4)]('analysis.energy.forecast',{'type':_0x54baba(0xdf),'common':{'name':_0x54baba(0x1f7),'type':_0x54baba(0x14a),'role':_0x54baba(0x9c),'read':!![],'write':![]},'native':{}}),await _0x6cb59b[_0x54baba(0x197)](_0x54baba(0xc2),{'type':_0x54baba(0x11e),'common':{'name':_0x54baba(0xc2)},'native':{}}),await _0x6cb59b[_0x54baba(0x197)](LTM_DP_RAW_LOG,{'type':_0x54baba(0xdf),'common':{'name':'Raw\x20Log','type':'string','role':_0x54baba(0x9c),'read':!![],'write':![]},'native':{}}),await _0x6cb59b[_0x54baba(0x197)](LTM_DP_DAILY_DIGESTS,{'type':_0x54baba(0xdf),'common':{'name':_0x54baba(0x1d6),'type':_0x54baba(0x14a),'role':_0x54baba(0x9c),'read':!![],'write':![]},'native':{}}),await _0x6cb59b[_0x54baba(0xd4)]('LTM.trainingData.sequences',{'type':_0x54baba(0xdf),'common':{'name':_0x54baba(0x21f),'type':_0x54baba(0x14a),'role':_0x54baba(0x9c),'read':!![],'write':![]},'native':{}}),await _0x6cb59b[_0x54baba(0xd4)](_0x54baba(0xde),{'type':_0x54baba(0xdf),'common':{'name':_0x54baba(0x12a),'type':_0x54baba(0x14a),'role':_0x54baba(0x9c),'read':!![],'write':![]},'native':{}}),await _0x6cb59b['setObjectNotExistsAsync'](_0x54baba(0x185),{'type':'state','common':{'name':_0x54baba(0x144),'type':'boolean','role':'button','read':!![],'write':!![]},'native':{}}),await _0x6cb59b['setObjectNotExistsAsync'](_0x54baba(0xe3),{'type':_0x54baba(0xdf),'common':{'name':'Trigger\x20Briefing','type':_0x54baba(0x1b7),'role':_0x54baba(0xfc),'read':!![],'write':!![]},'native':{}}),await _0x6cb59b[_0x54baba(0xd4)](_0x54baba(0xbe),{'type':_0x54baba(0xdf),'common':{'name':_0x54baba(0x1d2),'type':_0x54baba(0x1b7),'role':'indicator.alarm','read':!![],'write':![]},'native':{}}),await _0x6cb59b[_0x54baba(0xd4)](_0x54baba(0x216),{'type':_0x54baba(0xdf),'common':{'name':'Alert\x20Reason','type':'string','role':_0x54baba(0x166),'read':!![],'write':![]},'native':{}}),await _0x6cb59b[_0x54baba(0xd4)](_0x54baba(0x192),{'type':_0x54baba(0xdf),'common':{'name':_0x54baba(0x1b1),'type':'string','role':_0x54baba(0x12f),'read':!![],'write':![]},'native':{}}),await _0x6cb59b[_0x54baba(0xd4)](_0x54baba(0x21c),{'type':_0x54baba(0xdf),'common':{'name':_0x54baba(0x21a),'type':_0x54baba(0x1b7),'role':_0x54baba(0xfd),'read':!![],'write':![]},'native':{}}),await _0x6cb59b[_0x54baba(0xd4)](_0x54baba(0x11f),{'type':'state','common':{'name':_0x54baba(0x18a),'type':_0x54baba(0x14a),'role':_0x54baba(0x12f),'read':!![],'write':![]},'native':{}}),await _0x6cb59b[_0x54baba(0xd4)]('analysis.automation.detectedPatterns',{'type':_0x54baba(0xdf),'common':{'name':_0x54baba(0x1db),'type':_0x54baba(0x14a),'role':_0x54baba(0x9c),'read':!![],'write':![]},'native':{}}),await _0x6cb59b[_0x54baba(0xd4)](_0x54baba(0x12b),{'type':_0x54baba(0xdf),'common':{'name':'Target\x20ID','type':_0x54baba(0x14a),'role':_0x54baba(0x12f),'read':!![],'write':![]},'native':{}}),await _0x6cb59b[_0x54baba(0xd4)](_0x54baba(0x215),{'type':_0x54baba(0xdf),'common':{'name':_0x54baba(0xa9),'type':_0x54baba(0x14a),'role':_0x54baba(0x12f),'read':!![],'write':![]},'native':{}}),await _0x6cb59b[_0x54baba(0xd4)](_0x54baba(0x1a0),{'type':_0x54baba(0xdf),'common':{'name':_0x54baba(0x1c9),'type':_0x54baba(0x1b7),'role':_0x54baba(0x211),'read':!![],'write':!![]},'native':{}}),await _0x6cb59b[_0x54baba(0xd4)](_0x54baba(0x17c),{'type':'state','common':{'name':_0x54baba(0x1a8),'type':_0x54baba(0x1b7),'role':_0x54baba(0xfc),'read':!![],'write':!![]},'native':{}});}async function loadSystemMode(_0x40653a){const _0x45c35f=a0_0x478de7;try{const _0x1f91c1=await _0x40653a[_0x45c35f(0x1a7)](SYSTEM_DP_MODE);_0x1f91c1&&_0x1f91c1[_0x45c35f(0x1fa)]&&Object['values'](SYSTEM_MODES)[_0x45c35f(0x1eb)](_0x1f91c1[_0x45c35f(0x1fa)])?_0x40653a[_0x45c35f(0x1df)]=_0x1f91c1[_0x45c35f(0x1fa)]:(_0x40653a['currentSystemMode']=SYSTEM_MODES[_0x45c35f(0x180)],await _0x40653a[_0x45c35f(0x107)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x45c35f(0x180)],'ack':!![]}));}catch(_0x5d1627){_0x40653a[_0x45c35f(0x1df)]=SYSTEM_MODES[_0x45c35f(0x180)];}}async function loadRawEventLog(_0x115634){const _0x2cd300=a0_0x478de7;try{const _0x7795d4=await _0x115634['getStateAsync'](LTM_DP_RAW_LOG);if(_0x7795d4&&_0x7795d4[_0x2cd300(0x1fa)])_0x115634[_0x2cd300(0x20c)]=JSON[_0x2cd300(0x18d)](_0x7795d4[_0x2cd300(0x1fa)]);}catch(_0x44af6b){_0x115634['rawEventLog']=[];}}async function saveRawEventLog(_0x2a1621){const _0x7a5db6=a0_0x478de7;if(_0x2a1621[_0x7a5db6(0x20c)][_0x7a5db6(0x194)]>RAW_LOG_MAX_SIZE)_0x2a1621[_0x7a5db6(0x20c)][_0x7a5db6(0xb6)](0x0,_0x2a1621[_0x7a5db6(0x20c)][_0x7a5db6(0x194)]-RAW_LOG_MAX_SIZE);await _0x2a1621[_0x7a5db6(0x107)](LTM_DP_RAW_LOG,{'val':JSON[_0x7a5db6(0x1e7)](_0x2a1621[_0x7a5db6(0x20c)]),'ack':!![]});}async function loadDailyDigests(_0x3efcf5){const _0x2ab867=a0_0x478de7;try{const _0x4063c9=await _0x3efcf5[_0x2ab867(0x1a7)](LTM_DP_DAILY_DIGESTS);if(_0x4063c9&&_0x4063c9['val'])_0x3efcf5[_0x2ab867(0x1cc)]=JSON[_0x2ab867(0x18d)](_0x4063c9[_0x2ab867(0x1fa)]);}catch(_0x4ba0da){_0x3efcf5['dailyDigests']=[];}await updateBaselineStatus(_0x3efcf5);}async function saveDailyDigests(_0x5ec9cb,_0x5e219b=!![]){const _0x2d9880=a0_0x478de7,_0x109935=_0x5ec9cb[_0x2d9880(0x158)][_0x2d9880(0xa0)]||0x3c;_0x5ec9cb[_0x2d9880(0x1cc)][_0x2d9880(0x194)]>_0x109935&&_0x5ec9cb[_0x2d9880(0x1cc)]['splice'](0x0,_0x5ec9cb['dailyDigests'][_0x2d9880(0x194)]-_0x109935);await _0x5ec9cb['setStateAsync'](LTM_DP_DAILY_DIGESTS,{'val':JSON['stringify'](_0x5ec9cb[_0x2d9880(0x1cc)]),'ack':!![]});if(_0x5e219b)await updateBaselineStatus(_0x5ec9cb);}async function updateAnalysisHistory(_0x8b067e,_0x5747bf){const _0x5a299b=a0_0x478de7;_0x8b067e['analysisHistory'][_0x5a299b(0x193)](_0x5747bf);if(_0x8b067e[_0x5a299b(0xcb)][_0x5a299b(0x194)]>HISTORY_MAX_SIZE)_0x8b067e[_0x5a299b(0xcb)][_0x5a299b(0x18f)]();await _0x8b067e[_0x5a299b(0x107)](_0x5a299b(0xb9),{'val':JSON['stringify'](_0x8b067e[_0x5a299b(0xcb)]),'ack':!![]});}async function updateBaselineStatus(_0xbaca12){const _0x1dff76=a0_0x478de7;if(!_0xbaca12['isProVersion']){await _0xbaca12[_0x1dff76(0x107)](LTM_DP_BASELINE_STATUS,{'val':_0x1dff76(0x206),'ack':!![]});return;}const _0x50db7e=_0xbaca12['dailyDigests'][_0x1dff76(0x194)]>=(_0xbaca12['config'][_0x1dff76(0xe5)]||0x7)?_0x1dff76(0x112)+_0xbaca12['dailyDigests'][_0x1dff76(0x194)]+'\x20Tage)':'Lernphase\x20('+_0xbaca12['dailyDigests'][_0x1dff76(0x194)]+'/'+(_0xbaca12[_0x1dff76(0x158)][_0x1dff76(0xe5)]||0x7)+')';await _0xbaca12['setStateAsync'](LTM_DP_BASELINE_STATUS,{'val':_0x50db7e,'ack':!![]});}async function initSensorSubscriptions(_0x2bb7e2){const _0x271bcc=a0_0x478de7,_0x147fa0=_0x2bb7e2[_0x271bcc(0x158)][_0x271bcc(0x203)];if(_0x147fa0)for(const _0x5568c9 of _0x147fa0){await _0x2bb7e2[_0x271bcc(0xe8)](_0x5568c9['id']);}}async function initPresenceSubscriptions(_0x2b9ddf){const _0xb50c60=a0_0x478de7,_0x58b609=_0x2b9ddf[_0xb50c60(0x158)][_0xb50c60(0x156)];if(_0x58b609)for(const _0xe90a38 of _0x58b609){await _0x2b9ddf[_0xb50c60(0xe8)](_0xe90a38);}}async function setupTelegramListener(_0x35f0ad){const _0x49d967=a0_0x478de7,_0x35a2b8=_0x35f0ad[_0x49d967(0x158)][_0x49d967(0xc0)];if(_0x35f0ad[_0x49d967(0x158)][_0x49d967(0x204)]&&_0x35a2b8)await _0x35f0ad[_0x49d967(0xe8)](_0x35a2b8+_0x49d967(0x1c4));}function a0_0x12fc(){const _0x5a2a2e=['Activity-Level','triggerDailyDigest','geminiModel','simulateButler','158943HHzNMN','Event\x20History','COMFORT_RESULT','object','Train\x20Comfort','setupBriefingScheduler','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','Last\x20raw\x20event','.communicate.request','Today\x20Vector\x20(15m)','floor','LTM.driftAnalysis.baselineDrift','LTM.dailyDigests','Auto\x20Apply','LTM.trainingData.sequences','party','dailyDigests','values','split','success','exitTimer','analysis.energy.heatingScore','Alert\x20Status','toLocaleTimeString','heating','Fokus\x20auf\x20Familienroutinen.','Daily\x20Digests','[RECORDER]\x20Error:\x20','\x20new\x20patterns.','log','filter','Detected\x20Patterns','aiPersona','occupancy','testApiKey','currentSystemMode','loc','ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','analysisInterval','@google/generative-ai','fill','Started...','.\x20KONTEXT:\x20','stringify','getLtmData','lampe','change_percent','includes','lastAlertState','testContext','ack','now','Kalender\x20deaktiviert.','[PYTHON]\x20','.Current.Temperature','setupModeResetScheduler','toLowerCase','Gemini\x20AI\x20initialized.','TOPOLOGY_RESULT','Temperature\x20Forecast','analysis.training.triggerEnergy','237NLIXYh','val','ENERGY_PREDICT_RESULT','openweathermap','temperature','./lib/scheduler','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','Energy\x20Intelligence','response','application/json','devices','notifyTelegramEnabled','isPresent','Deaktiviert\x20(Pro-Feature)','status','summary','analysis.health','analysis.health.isAnomaly','Analysiere\x20ausgewogen.','rawEventLog','timestamp','PRIORITÃ„T:\x20Sicherheit.','ðŸ•¸ï¸\x20Building\x20Topology\x20Matrix...','prÃ¤senz','switch','WiFi\x20Presence\x20detected.','payload','OK:\x20','analysis.automation.targetValue','analysis.alertReason','Restoring\x20sensor\x20cache...','analysis.security.topologyMatrix','genAI','Pattern\x20Detected','./lib/scanner','analysis.automation.patternDetected','ðŸ›¡ï¸\x20SECURITY\x20CHECK:\x20Score\x20','.Current.WeatherText','Sequences','communicate.request','logDuplicates','command','alertReason','klima','eventHistory','HEALTH_RESULT','BUTLER\x20Execution\x20Error:\x20','@iobroker/adapter-core','[RESULT]','âœ…\x20HEALTH\x20TRAINED.','isGracePeriodActive','ltmJob','No\x20instance','onUnload','analysis.training','Topology\x20Error:\x20','toISOString','analysis.lastResult','longitude','value','analysis.energy.insulationScore','search','json','isProVersion','setupLtmScheduler','LTM.baselineStatus','ltmLtbWindowDays','ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...','systemConfig','TRAIN_HEALTH','Trend\x20Value','setHours','diagnosis','1735AoAaxJ','shift','Target\x20Value','Success:\x20','exports','info','motion','GAIT_RESULT','Skipped\x20(No\x20AI\x20or\x20Data)','onStateChange','Unknown','[LOG]','\x20=\x20','weatherInstance','normal','splice','stdin','automation.triggerAction','analysis.analysisHistory','8FcjeRt','analysis.training.triggerHealth','push','system.isPresent','analysis.isAlert','Err:\x20','notifyTelegramInstance','LTM.processingStatus','LTM','.forecast.current.temp','rating','forEach','Keine\x20Wetterdaten\x20verfÃ¼gbar.','analysis.security.currentThreshold','Heating\x20Score','getCalendarNames','systemUUID','analysisHistory','analysis.training.triggerComfort','73631510rScuQD','Trend','ANOMALY','outdoorSensorId','\x20->\x20','Briefing\x20Error:\x20','TRAIN_SECURITY','setObjectNotExistsAsync','onReady','scanForDevices','analysisTimer','Train\x20Health','replace','Training\x20Error:\x20','PRIORITÃ„T:\x20Gesundheit/AAL.','Wetterdaten\x20deaktiviert.','sendTo','LTM.trainingData.thermodynamics','state','analysis.automation.detectedPatterns','stateChange','VACATION','analysis.triggerBriefing','ðŸ›‹ï¸\x20BUTLER:\x20Found\x20','minDaysForBaseline','Keine\x20Details.','dismissAutomation','subscribeForeignStatesAsync','System\x20Mode','6697020svIByu','reason','TREND_RESULT','vacation','endsWith','analysis.health.lastCheck','callback','driftDetails','trim','getGenerativeModel','Insulation\x20Score','unload','getTime','city','inactivityThresholdHours','modeResetJob','ðŸ“\x20Feedback\x20received:\x20','47130HxtqzD','button','indicator','apiKey','find','location','9036mkQCzx','substring','constructor','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','PREDICT_ENERGY','number','setStateAsync','keys','analysis.health.trendValue','cogni-living','child_process','GUEST','confidence','analysis.health.todayVector','is_anomaly','analysis.training.triggerSecurity','PYTHON_EXE','Aktiv\x20(','bind','Gait\x20Speed\x20Trend','activityLevel','System','analysis.history_debug_00','existsSync','threshold','common','cancel','dimmer','debug','channel','analysis.automation.description','path','Training\x20Status','contact','Topology\x20Matrix','ðŸ§ \x20Triggering\x20Security\x20Training...','.forecast.current.temperature','Gemini\x20Error:\x20','âš ï¸\x20ALARM:\x20','ðŸ›‹ï¸\x20BUTLER:\x20Keine\x20neuen\x20Muster\x20gefunden.','map','Thermodynamics','analysis.automation.targetId','licht','fenster','onMessage','text','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','write','startsWith','toString','getForeignStateAsync','Kein\x20API\x20Key.','triggerBriefing','N/A','analysis.security','Security\x20Monitor','geminiApiKey','Error\x20launching\x20Python:\x20','insulation','getForeignObjectsAsync','ltmStbWindowDays','targetId','./lib/installer','Gemini\x20Init\x20Error:\x20','analysis.training.status','Health\x20Analysis','Trigger\x20Analysis','getHours','scanDevices','Unbekannt','main','date','string','Â°C,\x20','python_service','baselineDrift','Keine\x20Termine.','toFixed','type','.\x20EMERGENCY:\x20','PARTY','Train\x20Energy','setForeignStateAsync','SECURITY_RESULT','presenceDevices','14875083cpMBXL','config','door','getMinutes','system.presenceWho','ðŸ§ª\x20Simulating\x20Butler\x20Proposal:\x20','enum.rooms.*','events.lastEvent','pythonProcess','Success','presence','ENERGY_TRAIN_RESULT','Regel\x20erkannt:\x20','name','analysis.training.triggerTopology','text.alarm','detected','LTM.driftAnalysis','6147974ufMvDc','accuweather','Adapter','automationProposal','Failed:\x20','Last\x20Check','generic','.NextHours.Location_1.Day_1.current.temp_value','unknown','guest','driftAnalysisTimer','LTM.driftAnalysis.lastCheck','ðŸ•¸ï¸\x20Topology\x20Map\x20updated.','analysis.health.gaitSpeed','subscribeStates','from','python3','Digest','setState','analysis.automation.triggerAction','system.config','exitGraceTimer','system','NORMAL','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','some','warn','stdout','analysis.trigger','namespace','getFullYear','checkAndInstall','dependencyInstallInProgress','Description','system.mode','ðŸ›‹ï¸\x20Triggering\x20Comfort\x20Analysis\x20(Pattern\x20Mining)...','parse','slice','pop','analysis.security.lastCheck','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','analysis.activitySummary','unshift','length','join','HEALTH_TRAIN_RESULT','extendObjectAsync','livingContext','isAlert','message','enum','licenseKey','autoApply','(((.+)+)+)+$','getMonth','analysis.automation.autoApply','LTM.triggerDailyDigest','temperatur','weatherunderground','events.history','delObjectAsync','details','getStateAsync','Trigger\x20Action','cogni-living\x20adapter\x20starting\x20(v','Missing\x20data','sensorLastValues','useWeather','targetValue','briefingJob','Who\x20is\x20present?','submitFeedback','Activity\x20Summary','error','TRAIN_ENERGY','generateContent','Anomaly\x20Detected','.\x20ANWESEND:\x20','boolean'];a0_0x12fc=function(){return _0x5a2a2e;};return a0_0x12fc();}async function checkWifiPresence(_0x122b16){const _0x390c2c=a0_0x478de7;try{const _0x2b1e1a=_0x122b16[_0x390c2c(0x158)][_0x390c2c(0x156)]||[];let _0x344330=![];const _0x26e569=[];for(const _0x4f8ae3 of _0x2b1e1a){try{const _0x300c5c=await _0x122b16['getForeignStateAsync'](_0x4f8ae3);_0x300c5c&&(_0x300c5c[_0x390c2c(0x1fa)]===!![]||_0x300c5c[_0x390c2c(0x1fa)]==='online'||_0x300c5c[_0x390c2c(0x1fa)]===0x1)&&(_0x344330=!![],_0x26e569[_0x390c2c(0xbc)](_0x4f8ae3));}catch(_0x1c1724){}}return await _0x122b16[_0x390c2c(0x107)](_0x390c2c(0x15b),{'val':_0x26e569[_0x390c2c(0x195)](',\x20'),'ack':!![]}),_0x344330&&(_0x122b16[_0x390c2c(0x1d0)]&&(_0x122b16[_0x390c2c(0x1d9)]['info'](_0x390c2c(0x212)),abortExitTimer(_0x122b16)),!_0x122b16[_0x390c2c(0x205)]&&_0x122b16[_0x390c2c(0x1df)]===SYSTEM_MODES[_0x390c2c(0x180)]&&await setPresence(_0x122b16,!![])),_0x344330;}catch(_0x1c83d4){return![];}}function startExitTimer(_0x3e7fa2){const _0x3ab9b4=a0_0x478de7;abortExitTimer(_0x3e7fa2),_0x3e7fa2[_0x3ab9b4(0x22b)]=!![],_0x3e7fa2[_0x3ab9b4(0x17e)]=setTimeout(()=>{const _0x525b08=_0x3ab9b4;_0x3e7fa2[_0x525b08(0x22b)]=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),_0x3e7fa2['exitTimer']=setTimeout(()=>{const _0x45708f=_0x3ab9b4;setPresence(_0x3e7fa2,![]),_0x3e7fa2[_0x45708f(0x1d0)]=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}function abortExitTimer(_0x4c1bb0){const _0x5974b0=a0_0x478de7;if(_0x4c1bb0[_0x5974b0(0x1d0)])clearTimeout(_0x4c1bb0['exitTimer']);if(_0x4c1bb0[_0x5974b0(0x17e)])clearTimeout(_0x4c1bb0[_0x5974b0(0x17e)]);_0x4c1bb0[_0x5974b0(0x1d0)]=null,_0x4c1bb0[_0x5974b0(0x17e)]=null,_0x4c1bb0[_0x5974b0(0x22b)]=![];}async function setPresence(_0x948d2e,_0x4505a3){const _0x4eae03=a0_0x478de7;if(_0x948d2e['isPresent']===_0x4505a3)return;_0x948d2e[_0x4eae03(0x205)]=_0x4505a3,await _0x948d2e[_0x4eae03(0x107)](_0x4eae03(0xbd),{'val':_0x4505a3,'ack':!![]});}async function executeAutomationAction(_0x683e6a){const _0x14f0d7=a0_0x478de7;try{const _0x18a175=await _0x683e6a[_0x14f0d7(0x1a7)](_0x14f0d7(0x12b)),_0x151871=await _0x683e6a['getStateAsync']('analysis.automation.targetValue');if(_0x18a175&&_0x18a175[_0x14f0d7(0x1fa)]&&_0x151871){const _0x8c81b4=_0x18a175['val'];let _0x580dfa=_0x151871[_0x14f0d7(0x1fa)];try{_0x580dfa=JSON[_0x14f0d7(0x18d)](_0x580dfa);}catch(_0x172630){}_0x683e6a[_0x14f0d7(0x1d9)][_0x14f0d7(0xac)]('ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20'+_0x8c81b4+_0x14f0d7(0xb3)+_0x580dfa),await _0x683e6a[_0x14f0d7(0x154)](_0x8c81b4,_0x580dfa);}else _0x683e6a[_0x14f0d7(0x1d9)][_0x14f0d7(0x183)](_0x14f0d7(0x1e1));}catch(_0x29441e){_0x683e6a[_0x14f0d7(0x1d9)]['error'](_0x14f0d7(0x227)+_0x29441e[_0x14f0d7(0x19a)]);}}async function processSensorEvent(_0x5666fa,_0x36f9dd,_0x44ffc5,_0x4d4c47){const _0x3edc43=a0_0x478de7;if(!_0x4d4c47)return;const _0x4ce227=_0x44ffc5[_0x3edc43(0x1fa)],_0xae29d5=Date['now'](),_0x5a48e8=_0x5666fa[_0x3edc43(0x1ab)][_0x36f9dd];_0x5666fa['sensorLastValues'][_0x36f9dd]=_0x4ce227;if(!_0x4d4c47[_0x3edc43(0x221)]&&_0x5a48e8!=undefined&&_0x5a48e8==_0x4ce227)return;const _0x4f5593=(_0x4d4c47['type']||'')[_0x3edc43(0x1f4)](),_0x1bbcf7=_0x4f5593[_0x3edc43(0x1eb)](_0x3edc43(0x1fd))||_0x4f5593[_0x3edc43(0x1eb)](_0x3edc43(0x1a2))||_0x4f5593[_0x3edc43(0x1eb)](_0x3edc43(0x224))||_0x4f5593[_0x3edc43(0x1eb)]('heizung');_0x5666fa[_0x3edc43(0x9d)]&&_0x1bbcf7&&recordThermodynamics(_0x5666fa,_0x36f9dd,_0x4ce227,_0x4d4c47[_0x3edc43(0x100)]);const _0x561bf0={'timestamp':_0xae29d5,'id':_0x36f9dd,'name':_0x4d4c47[_0x3edc43(0x164)],'type':_0x4d4c47[_0x3edc43(0x150)],'location':_0x4d4c47[_0x3edc43(0x100)],'value':_0x4ce227};_0x5666fa[_0x3edc43(0x225)][_0x3edc43(0x193)](_0x561bf0);if(_0x5666fa[_0x3edc43(0x225)][_0x3edc43(0x194)]>HISTORY_MAX_SIZE)_0x5666fa[_0x3edc43(0x225)]['pop']();await _0x5666fa[_0x3edc43(0x107)](_0x3edc43(0x15e),{'val':JSON[_0x3edc43(0x1e7)](_0x561bf0),'ack':!![]}),await _0x5666fa[_0x3edc43(0x107)](_0x3edc43(0x1a4),{'val':JSON[_0x3edc43(0x1e7)](_0x5666fa[_0x3edc43(0x225)]),'ack':!![]});_0x5666fa[_0x3edc43(0x9d)]&&(_0x5666fa[_0x3edc43(0x20c)][_0x3edc43(0xbc)](_0x561bf0),await saveRawEventLog(_0x5666fa),recordSequence(_0x5666fa,_0x561bf0));if(_0x4d4c47['isExit']&&_0x4ce227===!![]){if(_0x5666fa['isPresent']&&!_0x5666fa[_0x3edc43(0x22b)])startExitTimer(_0x5666fa);else{if(!_0x5666fa[_0x3edc43(0x205)])setPresence(_0x5666fa,!![]);}}else{if(_0x4d4c47['type']==='motion'&&_0x4ce227===!![]){if(_0x5666fa['exitTimer'])abortExitTimer(_0x5666fa);if(!_0x5666fa[_0x3edc43(0x205)]&&_0x5666fa[_0x3edc43(0x1df)]===SYSTEM_MODES[_0x3edc43(0x180)])setPresence(_0x5666fa,!![]);}}}function a0_0x26ab(_0x490328,_0x5cb969){const _0x16fb7f=a0_0x12fc();return a0_0x26ab=function(_0x177f94,_0x62b359){_0x177f94=_0x177f94-0x92;let _0x12fc48=_0x16fb7f[_0x177f94];return _0x12fc48;},a0_0x26ab(_0x490328,_0x5cb969);}async function recordThermodynamics(_0x4e5c97,_0x265d4e,_0x343576,_0x3358df){const _0x1e3139=a0_0x478de7,_0x4b561a=await getOutsideTemperatureNumeric(_0x4e5c97),_0x1bccd9=await _0x4e5c97[_0x1e3139(0x1a7)](_0x1e3139(0xde));let _0x4ac2a2=[];if(_0x1bccd9&&_0x1bccd9['val'])try{_0x4ac2a2=JSON['parse'](_0x1bccd9[_0x1e3139(0x1fa)]);}catch(_0x549a22){}_0x4ac2a2['push']({'ts':Date[_0x1e3139(0x1ef)](),'room':_0x3358df||'Unknown','t_in':_0x343576,'t_out':_0x4b561a});if(_0x4ac2a2[_0x1e3139(0x194)]>THERMO_LOG_SIZE)_0x4ac2a2[_0x1e3139(0xa8)]();await _0x4e5c97[_0x1e3139(0x107)](_0x1e3139(0xde),{'val':JSON[_0x1e3139(0x1e7)](_0x4ac2a2),'ack':!![]});}async function getOutsideTemperatureNumeric(_0x5e9abf){const _0x4f596e=a0_0x478de7;if(_0x5e9abf[_0x4f596e(0x158)][_0x4f596e(0xd0)])try{const _0x585ed6=await _0x5e9abf['getForeignStateAsync'](_0x5e9abf[_0x4f596e(0x158)]['outdoorSensorId']);if(_0x585ed6&&_0x585ed6[_0x4f596e(0x1fa)]!==undefined&&_0x585ed6['val']!==null)return parseFloat(_0x585ed6[_0x4f596e(0x1fa)]);}catch(_0x52d1ab){}const _0x24b1b4=_0x5e9abf[_0x4f596e(0x158)][_0x4f596e(0xb4)];if(!_0x5e9abf['config'][_0x4f596e(0x1ac)]||!_0x24b1b4)return null;try{let _0x2fe0f2='';if(_0x24b1b4[_0x4f596e(0x1eb)](_0x4f596e(0x16a)))_0x2fe0f2=_0x24b1b4+_0x4f596e(0x1f2);else{if(_0x24b1b4[_0x4f596e(0x1eb)]('daswetter'))_0x2fe0f2=_0x24b1b4+_0x4f596e(0x170);else{if(_0x24b1b4['includes'](_0x4f596e(0x1fc)))_0x2fe0f2=_0x24b1b4+_0x4f596e(0x125);else{if(_0x24b1b4[_0x4f596e(0x1eb)](_0x4f596e(0x1a3)))_0x2fe0f2=_0x24b1b4+_0x4f596e(0xc3);}}}if(_0x2fe0f2){const _0x39908b=await _0x5e9abf[_0x4f596e(0x134)](_0x2fe0f2);if(_0x39908b&&_0x39908b[_0x4f596e(0x1fa)]!==undefined&&_0x39908b[_0x4f596e(0x1fa)]!==null)return parseFloat(_0x39908b[_0x4f596e(0x1fa)]);}}catch(_0x24ddbe){}return null;}async function recordSequence(_0x3f8646,_0x37674b){const _0x1484ea=a0_0x478de7,_0xeae5a1=(_0x37674b['type']||'')['toLowerCase'](),_0x4b5e3e=[_0x1484ea(0xad),'bewegung',_0x1484ea(0x210),_0x1484ea(0x161),_0x1484ea(0x1dd),_0x1484ea(0x159),'tÃ¼r','window',_0x1484ea(0x12d),_0x1484ea(0x122),'kontakt','light',_0x1484ea(0x12c),_0x1484ea(0x211),'schalter',_0x1484ea(0x11c),_0x1484ea(0x1e9)];if(!_0x4b5e3e[_0x1484ea(0x182)](_0x31cc0c=>_0xeae5a1[_0x1484ea(0x1eb)](_0x31cc0c)))return;if(!_0x37674b['value'])return;if(sequenceTimer)clearTimeout(sequenceTimer);activeSequence[_0x1484ea(0xbc)]({'loc':_0x37674b['location']||_0x1484ea(0xb1),'id':_0x37674b['id'],'ts':Date[_0x1484ea(0x1ef)]()}),sequenceTimer=setTimeout(async()=>{if(activeSequence['length']>0x1)await saveCompletedSequence(_0x3f8646);activeSequence=[];},SEQUENCE_TIMEOUT_MS);}async function saveCompletedSequence(_0x949e10){const _0x414015=a0_0x478de7;try{const _0x2ad1bb=await _0x949e10[_0x414015(0x1a7)](_0x414015(0x1ca));let _0x127d8d=[];if(_0x2ad1bb&&_0x2ad1bb['val'])try{_0x127d8d=JSON[_0x414015(0x18d)](_0x2ad1bb[_0x414015(0x1fa)]);}catch(_0x59c936){}const _0x3f8b87=activeSequence[0x0]['ts'],_0x3d22f0=activeSequence[_0x414015(0x129)](_0x740d8f=>({'loc':_0x740d8f[_0x414015(0x1e0)],'t_delta':Math['round']((_0x740d8f['ts']-_0x3f8b87)/0x3e8)})),_0x3e0372={'timestamp':new Date(_0x3f8b87)[_0x414015(0x96)](),'steps':_0x3d22f0,'duration':Math['round']((activeSequence[activeSequence['length']-0x1]['ts']-_0x3f8b87)/0x3e8),'daytime':new Date(_0x3f8b87)[_0x414015(0x145)]()};_0x127d8d[_0x414015(0xbc)](_0x3e0372);if(_0x127d8d[_0x414015(0x194)]>MAX_TRAINING_SET_SIZE)_0x127d8d[_0x414015(0xa8)]();await _0x949e10[_0x414015(0x107)](_0x414015(0x1ca),{'val':JSON['stringify'](_0x127d8d),'ack':!![]}),runSecurityCheck(_0x949e10,_0x3e0372);}catch(_0x16c4ee){_0x949e10[_0x414015(0x1d9)][_0x414015(0x1b2)](_0x414015(0x1d7)+_0x16c4ee[_0x414015(0x19a)]);}}function runSecurityCheck(_0x4fcf1f,_0x49ca34){if(!_0x4fcf1f['isProVersion'])return;sendToPython(_0x4fcf1f,'ANALYZE_SEQUENCE',{'sequence':_0x49ca34});}async function createDailyDigest(_0x2df059){const _0x3bdb35=a0_0x478de7;if(!_0x2df059[_0x3bdb35(0x9d)])return;await _0x2df059[_0x3bdb35(0x107)](LTM_DP_STATUS,{'val':_0x3bdb35(0x1e5),'ack':!![]});if(!_0x2df059[_0x3bdb35(0x1ba)]||_0x2df059[_0x3bdb35(0x20c)][_0x3bdb35(0x194)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x2df059[_0x3bdb35(0x107)](LTM_DP_STATUS,{'val':_0x3bdb35(0xaf),'ack':!![]});return;}const _0x47e49d=JSON[_0x3bdb35(0x18d)](JSON[_0x3bdb35(0x1e7)](_0x2df059[_0x3bdb35(0x20c)])),_0x1a265b=_0x47e49d[_0x3bdb35(0x194)],_0x229bea=_0x3bdb35(0x130)+JSON['stringify'](_0x47e49d);try{const _0xc9eacd=await _0x2df059[_0x3bdb35(0x1ba)]['generateContent'](_0x229bea),_0x1029a3=JSON[_0x3bdb35(0x18d)](_0xc9eacd[_0x3bdb35(0x201)][_0x3bdb35(0x12f)]()[_0x3bdb35(0xd9)](/```json|```/g,'')[_0x3bdb35(0xf2)]()),_0x225c8c={'timestamp':new Date()[_0x3bdb35(0x96)](),'eventCount':_0x1a265b,'summary':_0x1029a3[_0x3bdb35(0x208)]||_0x3bdb35(0x17a),'activityLevel':_0x1029a3[_0x3bdb35(0x115)]||_0x3bdb35(0xb5),'systemMode':_0x2df059[_0x3bdb35(0x1df)]};_0x2df059[_0x3bdb35(0x1cc)][_0x3bdb35(0xbc)](_0x225c8c),await saveDailyDigests(_0x2df059),_0x2df059[_0x3bdb35(0x20c)]=[],await saveRawEventLog(_0x2df059),await _0x2df059['setStateAsync'](LTM_DP_STATUS,{'val':_0x3bdb35(0x160),'ack':!![]});if(_0x2df059[_0x3bdb35(0x9d)])sendToPython(_0x2df059,'ANALYZE_HEALTH',{'digest':_0x225c8c});}catch(_0x382131){_0x2df059[_0x3bdb35(0x1d9)][_0x3bdb35(0x1b2)](_0x382131[_0x3bdb35(0x19a)]);}}async function runBaselineDriftAnalysis(_0x360ae1){const _0x5d86a0=a0_0x478de7;if(!_0x360ae1[_0x5d86a0(0x9d)]||!_0x360ae1[_0x5d86a0(0x1ba)])return;const _0x258240=_0x360ae1[_0x5d86a0(0x158)][_0x5d86a0(0x13e)]||0xe;if(_0x360ae1[_0x5d86a0(0x1cc)][_0x5d86a0(0x194)]<_0x258240+0x7){await _0x360ae1[_0x5d86a0(0x107)](LTM_DP_DRIFT_STATUS,{'val':'N/A\x20(Learning)','ack':!![]});return;}const _0x6f8241=_0x360ae1[_0x5d86a0(0x1cc)][_0x5d86a0(0x18e)](-_0x258240),_0xc3e663=_0x360ae1[_0x5d86a0(0x1cc)][_0x5d86a0(0x18e)](0x0,_0x360ae1[_0x5d86a0(0x1cc)][_0x5d86a0(0x194)]-_0x258240),_0xd0a194=_0x5d86a0(0x191)+JSON[_0x5d86a0(0x1e7)](_0xc3e663)+'\x0aSTB:\x20'+JSON[_0x5d86a0(0x1e7)](_0x6f8241);try{const _0x4623a4=await _0x360ae1[_0x5d86a0(0x1ba)]['generateContent'](_0xd0a194),_0x2cded7=JSON[_0x5d86a0(0x18d)](_0x4623a4[_0x5d86a0(0x201)][_0x5d86a0(0x12f)]()[_0x5d86a0(0xd9)](/```json|```/g,'')[_0x5d86a0(0xf2)]());_0x2cded7[_0x5d86a0(0x14d)]&&(await _0x360ae1[_0x5d86a0(0x107)](LTM_DP_DRIFT_STATUS,{'val':_0x2cded7[_0x5d86a0(0x14d)],'ack':!![]}),await _0x360ae1['setStateAsync'](LTM_DP_DRIFT_DETAILS,{'val':_0x2cded7[_0x5d86a0(0xf1)],'ack':!![]}),await _0x360ae1[_0x5d86a0(0x107)](LTM_DP_DRIFT_LAST_CHECK,{'val':Date[_0x5d86a0(0x1ef)](),'ack':!![]}));}catch(_0x4344f6){}}async function sendMorningBriefing(_0xd7f77c){const _0x3041e9=a0_0x478de7;if(!_0xd7f77c[_0x3041e9(0x1ba)])return;try{const _0x3623ea=_0x3041e9(0x1c2),_0x28ea52=await _0xd7f77c['geminiModel'][_0x3041e9(0x1b4)](_0x3623ea),_0x20fc88=_0x28ea52[_0x3041e9(0x201)][_0x3041e9(0x12f)]();sendNotification(_0xd7f77c,'ðŸŒ…\x20Morning\x20Briefing:\x0a'+_0x20fc88);}catch(_0x3d3735){_0xd7f77c[_0x3041e9(0x1d9)][_0x3041e9(0x1b2)](_0x3041e9(0xd2)+_0x3d3735['message']);}}function stopPythonService(_0x2cd754){const _0x1befba=a0_0x478de7;if(_0x2cd754[_0x1befba(0x15f)]){try{_0x2cd754[_0x1befba(0x15f)]['kill']();}catch(_0x4f7da9){}_0x2cd754[_0x1befba(0x15f)]=null;}}function sendToPython(_0x26534b,_0x4fbe1a,_0x14078f={}){const _0x1dc2f7=a0_0x478de7;if(!_0x26534b[_0x1dc2f7(0x15f)]||!_0x26534b[_0x1dc2f7(0x15f)][_0x1dc2f7(0xb7)]['writable'])return;const _0x51692e=JSON[_0x1dc2f7(0x1e7)]({'command':_0x4fbe1a,..._0x14078f});try{_0x26534b[_0x1dc2f7(0x15f)][_0x1dc2f7(0xb7)][_0x1dc2f7(0x131)](_0x51692e+'\x0a');}catch(_0x3d74b7){}}function runPythonHealthCheck(_0x251103){const _0x37755c=a0_0x478de7;if(!_0x251103[_0x37755c(0x1cc)]||_0x251103['dailyDigests'][_0x37755c(0x194)]<0x2)return;const _0x43f49a=_0x251103[_0x37755c(0x1cc)]['map'](_0x5a0e0b=>{const _0x3dcb06=_0x37755c,_0x2c0c71=(_0x5a0e0b[_0x3dcb06(0x115)]||'')[_0x3dcb06(0x1f4)]();return ACTIVITY_LEVEL_MAP[_0x2c0c71]||0x32;});sendToPython(_0x251103,'ANALYZE_TREND',{'values':_0x43f49a,'tag':_0x37755c(0x1b8)});}function handlePythonResult(_0x4b5726,_0x831258){const _0x505a02=a0_0x478de7;if(_0x831258[_0x505a02(0x150)]==='PONG')_0x4b5726['log']['debug']('ðŸ\x20Python\x20Pong');else{if(_0x831258[_0x505a02(0x150)]===_0x505a02(0x155)){const {anomaly_score:_0x127d13,is_anomaly:_0x4c2080,threshold:_0x13ad03,explanation:_0xbfc154}=_0x831258['payload'];_0x4b5726[_0x505a02(0x1d9)][_0x505a02(0xac)](_0x505a02(0x21d)+_0x127d13[_0x505a02(0x14f)](0x5)+_0x505a02(0xd1)+(_0x4c2080?_0x505a02(0xcf):'OK')),_0x4b5726[_0x505a02(0x107)]('analysis.security.lastScore',{'val':_0x127d13,'ack':!![]}),_0x4b5726[_0x505a02(0x107)](_0x505a02(0x190),{'val':new Date()[_0x505a02(0x96)](),'ack':!![]});if(_0x13ad03)_0x4b5726[_0x505a02(0x107)](_0x505a02(0xc7),{'val':_0x13ad03,'ack':!![]});if(_0x4c2080){let _0x37f8c5=_0x505a02(0x181)+_0x127d13['toFixed'](0x4)+')';if(_0xbfc154&&_0xbfc154!=='Unknown')_0x37f8c5+='\x0aGrund:\x20'+_0xbfc154;_0x4b5726[_0x505a02(0x107)]('analysis.isAlert',{'val':!![],'ack':!![]}),_0x4b5726['setStateAsync']('analysis.alertReason',{'val':_0x37f8c5,'ack':!![]}),sendNotification(_0x4b5726,'âš ï¸\x20SECURITY\x20ALARM:\x20'+_0x37f8c5,![],!![]);}}else{if(_0x831258['type']==='TRAINING_COMPLETE'){const _0x35b2e8=_0x831258[_0x505a02(0x213)][_0x505a02(0x1a6)]||'',_0x5a8d54=_0x831258['payload'][_0x505a02(0x119)],_0x4fc923=_0x831258[_0x505a02(0x213)][_0x505a02(0x1cf)]?_0x505a02(0xaa)+new Date()[_0x505a02(0x1d3)]()+'\x20('+_0x35b2e8+')':_0x505a02(0x16d)+_0x831258['payload'][_0x505a02(0xeb)];_0x4b5726[_0x505a02(0x107)](_0x505a02(0x142),{'val':_0x4fc923,'ack':!![]});if(_0x831258[_0x505a02(0x213)][_0x505a02(0x1cf)]&&_0x5a8d54)_0x4b5726[_0x505a02(0x107)](_0x505a02(0xc7),{'val':_0x5a8d54,'ack':!![]});}else{if(_0x831258[_0x505a02(0x150)]===_0x505a02(0x1be)){const {patterns:_0x2b96d0}=_0x831258[_0x505a02(0x213)];if(_0x2b96d0&&_0x2b96d0[_0x505a02(0x194)]>0x0){_0x4b5726[_0x505a02(0x1d9)]['info'](_0x505a02(0xe4)+_0x2b96d0['length']+_0x505a02(0x1d8)),_0x4b5726[_0x505a02(0x107)](_0x505a02(0xe0),{'val':JSON[_0x505a02(0x1e7)](_0x2b96d0),'ack':!![]});const _0xebfe71=_0x2b96d0[0x0],_0x42789a=_0x505a02(0x163)+_0xebfe71['rule']+'\x20('+(_0xebfe71[_0x505a02(0x10d)]*0x64)[_0x505a02(0x14f)](0x0)+'%)';_0x4b5726[_0x505a02(0x107)](_0x505a02(0x21c),{'val':!![],'ack':!![]}),_0x4b5726['setStateAsync'](_0x505a02(0x11f),{'val':_0x42789a,'ack':!![]});}else _0x4b5726['log'][_0x505a02(0xac)](_0x505a02(0x128)),_0x4b5726[_0x505a02(0x107)]('analysis.automation.patternDetected',{'val':![],'ack':!![]}),_0x4b5726[_0x505a02(0x107)](_0x505a02(0xe0),{'val':'[]','ack':!![]});}else{if(_0x831258[_0x505a02(0x150)]===_0x505a02(0x162)){if(_0x831258[_0x505a02(0x213)][_0x505a02(0x1cf)])try{const _0xa318b3=JSON[_0x505a02(0x18d)](_0x831258['payload'][_0x505a02(0x1a6)]);if(_0xa318b3[_0x505a02(0x13c)])_0x4b5726[_0x505a02(0x107)](_0x505a02(0x9a),{'val':JSON[_0x505a02(0x1e7)](_0xa318b3['insulation']),'ack':!![]});if(_0xa318b3[_0x505a02(0x1d4)])_0x4b5726['setStateAsync']('analysis.energy.heatingScore',{'val':JSON['stringify'](_0xa318b3[_0x505a02(0x1d4)]),'ack':!![]});}catch(_0x5d7e75){}}else{if(_0x831258[_0x505a02(0x150)]===_0x505a02(0x196)){if(_0x831258['payload'][_0x505a02(0x1cf)])_0x4b5726[_0x505a02(0x1d9)]['info'](_0x505a02(0x22a));}else{if(_0x831258[_0x505a02(0x150)]===_0x505a02(0x226))_0x4b5726['setStateAsync'](_0x505a02(0xef),{'val':new Date()['toISOString'](),'ack':!![]}),_0x4b5726[_0x505a02(0x107)](_0x505a02(0x20a),{'val':_0x831258[_0x505a02(0x213)][_0x505a02(0x10f)],'ack':!![]});else{if(_0x831258[_0x505a02(0x150)]===_0x505a02(0xec))_0x4b5726[_0x505a02(0x107)]('analysis.health.trendDiagnosis',{'val':_0x831258[_0x505a02(0x213)][_0x505a02(0xa6)],'ack':!![]}),_0x4b5726['setStateAsync'](_0x505a02(0x109),{'val':_0x831258[_0x505a02(0x213)][_0x505a02(0x1ea)],'ack':!![]});else{if(_0x831258[_0x505a02(0x150)]===_0x505a02(0xae)){const {speed_trend:_0x10c850}=_0x831258[_0x505a02(0x213)];if(_0x10c850!==undefined)_0x4b5726['setStateAsync'](_0x505a02(0x176),{'val':_0x10c850,'ack':!![]});}else{if(_0x831258['type']===_0x505a02(0x1fb)){const {forecast:_0x5e684f}=_0x831258['payload'];if(_0x5e684f)_0x4b5726[_0x505a02(0x107)]('analysis.energy.forecast',{'val':JSON[_0x505a02(0x1e7)](_0x5e684f),'ack':!![]});}else{if(_0x831258[_0x505a02(0x150)]===_0x505a02(0x1f6)){const {data:_0x324313}=_0x831258[_0x505a02(0x213)];_0x324313&&(_0x4b5726['log'][_0x505a02(0xac)](_0x505a02(0x175)),_0x4b5726[_0x505a02(0x107)](_0x505a02(0x218),{'val':JSON['stringify'](_0x324313),'ack':!![]}));}}}}}}}}}}}}function startPythonService(_0x1fc51e){const _0x583cea=a0_0x478de7;let _0x46614c=_0x583cea(0x179);if(fs[_0x583cea(0x118)](installer['PYTHON_EXE']))_0x46614c=installer[_0x583cea(0x111)];try{const _0x48c6c0=path['join'](__dirname,_0x583cea(0x14c),'service.py');_0x1fc51e[_0x583cea(0x15f)]=spawn(_0x46614c,[_0x48c6c0]),_0x1fc51e[_0x583cea(0x15f)][_0x583cea(0x184)]['on']('data',_0x3c7cd6=>{const _0x4149c2=_0x583cea,_0x5deaca=_0x3c7cd6[_0x4149c2(0x133)]()[_0x4149c2(0x1ce)]('\x0a');_0x5deaca[_0x4149c2(0xc5)](_0x14ecf6=>{const _0x218c5e=_0x4149c2,_0x2dd629=_0x14ecf6[_0x218c5e(0xf2)]();if(!_0x2dd629)return;if(_0x2dd629[_0x218c5e(0x132)](_0x218c5e(0xb2)))_0x1fc51e[_0x218c5e(0x1d9)][_0x218c5e(0x11d)](_0x218c5e(0x1f1)+_0x2dd629[_0x218c5e(0x102)](0x5)[_0x218c5e(0xf2)]());else{if(_0x2dd629[_0x218c5e(0x132)](_0x218c5e(0x229)))try{const _0x408e22=JSON[_0x218c5e(0x18d)](_0x2dd629[_0x218c5e(0x102)](0x8)[_0x218c5e(0xf2)]());handlePythonResult(_0x1fc51e,_0x408e22);}catch(_0x3ce965){}}});}),_0x1fc51e[_0x583cea(0x15f)]['on']('close',_0x2c7cfc=>{_0x1fc51e['pythonProcess']=null;});}catch(_0x10fdbb){_0x1fc51e[_0x583cea(0x1d9)][_0x583cea(0x1b2)](_0x583cea(0x13b)+_0x10fdbb['message']);}}async function runAutopilot(_0x4470cc){const _0x1fa24f=a0_0x478de7;_0x4470cc['log'][_0x1fa24f(0x11d)](_0x1fa24f(0xa1)),await runGeminiAnalysis(_0x4470cc),updateHealthVector(_0x4470cc),triggerGaitAnalysis(_0x4470cc),triggerEnergyPrediction(_0x4470cc);}async function triggerGaitAnalysis(_0x1b8811){const _0x770775=a0_0x478de7;if(!_0x1b8811[_0x770775(0x9d)])return;try{const _0x1f5c04=await _0x1b8811[_0x770775(0x1a7)]('LTM.trainingData.sequences');_0x1f5c04&&_0x1f5c04[_0x770775(0x1fa)]&&sendToPython(_0x1b8811,'ANALYZE_GAIT',{'sequences':JSON[_0x770775(0x18d)](_0x1f5c04['val'])});}catch(_0x5ecdd9){}}async function triggerEnergyPrediction(_0x2259af){const _0x3f3900=a0_0x478de7;if(!_0x2259af['isProVersion'])return;try{const _0x3cf463=await getOutsideTemperatureNumeric(_0x2259af);if(_0x3cf463===null)return;const _0x202e33={},_0x1275ad=_0x2259af[_0x3f3900(0x158)][_0x3f3900(0x203)]||[];for(const _0x3fb927 of _0x1275ad){if(_0x3fb927['type']===_0x3f3900(0x1fd)&&_0x3fb927['location']){const _0x5bd763=_0x2259af['sensorLastValues'][_0x3fb927['id']];if(_0x5bd763!==undefined)_0x202e33[_0x3fb927[_0x3f3900(0x100)]]=_0x5bd763;}}Object[_0x3f3900(0x108)](_0x202e33)[_0x3f3900(0x194)]>0x0&&sendToPython(_0x2259af,_0x3f3900(0x105),{'current_temps':_0x202e33,'t_out':_0x3cf463});}catch(_0x24d90e){}}function updateHealthVector(_0x562caa){const _0x27c90d=a0_0x478de7;if(!_0x562caa['rawEventLog']||_0x562caa[_0x27c90d(0x20c)][_0x27c90d(0x194)]===0x0)return;const _0x1658be=new Array(0x60)[_0x27c90d(0x1e4)](0x0),_0x497b69=new Date()[_0x27c90d(0xa5)](0x0,0x0,0x0,0x0);_0x562caa[_0x27c90d(0x20c)]['forEach'](_0x1de38b=>{const _0x3ec4da=_0x27c90d,_0x3b174e=new Date(_0x1de38b['timestamp']);if(_0x3b174e[_0x3ec4da(0xf6)]()>=_0x497b69){const _0x36e4ba=_0x3b174e['getHours'](),_0xc12353=_0x3b174e[_0x3ec4da(0x15a)](),_0x39420e=_0x36e4ba*0x4+Math[_0x3ec4da(0x1c6)](_0xc12353/0xf);if(_0x39420e>=0x0&&_0x39420e<0x60)_0x1658be[_0x39420e]++;}}),_0x562caa[_0x27c90d(0x107)]('analysis.health.todayVector',{'val':JSON[_0x27c90d(0x1e7)](_0x1658be),'ack':!![]});}async function getWeatherContext(_0x36e5d2){const _0x226c04=a0_0x478de7;if(!_0x36e5d2['config'][_0x226c04(0x1ac)]||!_0x36e5d2[_0x226c04(0x158)][_0x226c04(0xb4)])return _0x226c04(0xdc);try{const _0x2b4d42=_0x36e5d2['config'][_0x226c04(0xb4)];let _0x4e8b6c=await _0x36e5d2[_0x226c04(0x134)](_0x2b4d42+_0x226c04(0x1f2));if(!_0x4e8b6c)_0x4e8b6c=await _0x36e5d2['getForeignStateAsync'](_0x2b4d42+_0x226c04(0x125));let _0x3fd339=await _0x36e5d2[_0x226c04(0x134)](_0x2b4d42+_0x226c04(0x21e));if(!_0x3fd339)_0x3fd339=await _0x36e5d2['getForeignStateAsync'](_0x2b4d42+'.forecast.current.state');if(_0x4e8b6c&&_0x3fd339)return _0x4e8b6c[_0x226c04(0x1fa)]+_0x226c04(0x14b)+_0x3fd339[_0x226c04(0x1fa)];}catch(_0xb15f71){}return _0x226c04(0xc6);}async function getCalendarContext(_0x460fbe){const _0x383bdb=a0_0x478de7;if(!_0x460fbe[_0x383bdb(0x158)]['useCalendar']||!_0x460fbe['config']['calendarInstance'])return _0x383bdb(0x1f0);return _0x383bdb(0x14e);}async function getCalendarNames(_0x52ddbe,_0xe1ee0b){return[];}async function saveFeedback(_0x358ab5,_0x417d8d){const _0xbf0170=a0_0x478de7;_0x358ab5[_0xbf0170(0x1d9)][_0xbf0170(0xac)](_0xbf0170(0xfa)+_0x417d8d[_0xbf0170(0xc4)]);}async function runGeminiAnalysis(_0x504da1,_0x349774=''){const _0x1ffe55=a0_0x478de7;if(!_0x504da1[_0x1ffe55(0x1ba)])return;if(_0x504da1[_0x1ffe55(0x225)][_0x1ffe55(0x194)]===0x0)return;const _0x583c50=_0x504da1[_0x1ffe55(0x225)][_0x1ffe55(0x18e)](0x0,0xf),_0x3160ad=await getWeatherContext(_0x504da1),_0x2bac5b=_0x504da1['currentSystemMode'],_0x2021f9=PERSONA_MAPPING[_0x504da1[_0x1ffe55(0x158)][_0x1ffe55(0x1dc)]||_0x1ffe55(0x16f)],_0x75e624=_0x504da1['config'][_0x1ffe55(0x198)]||_0x1ffe55(0xe6);let _0x2039a2=_0x1ffe55(0x147);try{const _0x5367fe=await _0x504da1[_0x1ffe55(0x1a7)](_0x1ffe55(0x15b));if(_0x5367fe&&_0x5367fe['val'])_0x2039a2=_0x5367fe[_0x1ffe55(0x1fa)];}catch(_0x399aed){}let _0x4ee741=![];try{const _0x10c2a1=await _0x504da1[_0x1ffe55(0x1a7)]('analysis.automation.autoApply');if(_0x10c2a1&&_0x10c2a1['val'])_0x4ee741=!![];}catch(_0x12ef48){}const _0x5e1a1a=_0x1ffe55(0x104)+_0x2021f9+_0x1ffe55(0x1e6)+_0x75e624+'.\x20SYSTEM_MODE:\x20'+_0x2bac5b+'.\x20WETTER:\x20'+_0x3160ad+_0x1ffe55(0x1b6)+_0x2039a2+'.\x20EVENTS:\x20'+JSON[_0x1ffe55(0x1e7)](_0x583c50)+_0x1ffe55(0x151)+_0x349774+_0x1ffe55(0x1ff);try{const _0x1811df=await _0x504da1[_0x1ffe55(0x1ba)][_0x1ffe55(0x1b4)](_0x5e1a1a),_0x878e6a=JSON[_0x1ffe55(0x18d)](_0x1811df[_0x1ffe55(0x201)][_0x1ffe55(0x12f)]()['replace'](/```json|```/g,'')['trim']());await _0x504da1[_0x1ffe55(0x107)](_0x1ffe55(0x97),{'val':JSON[_0x1ffe55(0x1e7)](_0x878e6a),'ack':!![]});if(_0x878e6a[_0x1ffe55(0x208)])await _0x504da1[_0x1ffe55(0x107)](_0x1ffe55(0x192),{'val':_0x878e6a[_0x1ffe55(0x208)],'ack':!![]});const _0x1f8d7d={'timestamp':Date[_0x1ffe55(0x1ef)](),'id':Date['now']()[_0x1ffe55(0x133)](),'analysis':{'activity':{'summary':_0x878e6a[_0x1ffe55(0x208)],'isAlert':_0x878e6a[_0x1ffe55(0x199)],'alertReason':_0x878e6a['alertReason']},'comfort':{'automationProposal':_0x878e6a[_0x1ffe55(0x16c)]}}};await updateAnalysisHistory(_0x504da1,_0x1f8d7d);const _0x2b3ee4=_0x878e6a[_0x1ffe55(0x199)]||![];_0x2b3ee4!==_0x504da1[_0x1ffe55(0x1ec)]&&(await _0x504da1[_0x1ffe55(0x107)](_0x1ffe55(0xbe),{'val':_0x2b3ee4,'ack':!![]}),_0x504da1[_0x1ffe55(0x1ec)]=_0x2b3ee4,_0x2b3ee4&&(await _0x504da1[_0x1ffe55(0x107)]('analysis.alertReason',{'val':_0x878e6a[_0x1ffe55(0x223)],'ack':!![]}),sendNotification(_0x504da1,_0x1ffe55(0x127)+_0x878e6a[_0x1ffe55(0x223)],![],_0x878e6a['isEmergency'])));if(_0x878e6a[_0x1ffe55(0x16c)]&&_0x878e6a[_0x1ffe55(0x16c)][_0x1ffe55(0x167)]){await _0x504da1[_0x1ffe55(0x107)](_0x1ffe55(0x21c),{'val':!![],'ack':!![]}),await _0x504da1[_0x1ffe55(0x107)](_0x1ffe55(0x11f),{'val':_0x878e6a[_0x1ffe55(0x16c)]['description'],'ack':!![]}),await _0x504da1[_0x1ffe55(0x107)]('analysis.automation.targetId',{'val':_0x878e6a[_0x1ffe55(0x16c)][_0x1ffe55(0x13f)],'ack':!![]}),await _0x504da1[_0x1ffe55(0x107)]('analysis.automation.targetValue',{'val':JSON[_0x1ffe55(0x1e7)](_0x878e6a[_0x1ffe55(0x16c)][_0x1ffe55(0x1ad)]),'ack':!![]});if(_0x4ee741)executeAutomationAction(_0x504da1);}}catch(_0x4f792f){_0x504da1[_0x1ffe55(0x1d9)]['error'](_0x1ffe55(0x126)+_0x4f792f[_0x1ffe55(0x19a)]);}}async function startSystem(_0x4d3230){const _0x551b36=a0_0x478de7;_0x4d3230['log']['info']('ðŸš€\x20Starting\x20NUUKANNI\x20Logic\x20(v0.12.10)...'),await initZombies(_0x4d3230);try{_0x4d3230[_0x551b36(0x9d)]=await checkLicense(_0x4d3230[_0x551b36(0x158)][_0x551b36(0x19c)]);}catch(_0xf5fe3d){}if(!_0x4d3230[_0x551b36(0x158)][_0x551b36(0xf8)]||_0x4d3230[_0x551b36(0x158)][_0x551b36(0xf8)]<0.1)_0x4d3230[_0x551b36(0x158)][_0x551b36(0xf8)]=0xc;await initHistory(_0x4d3230),await initSystemConfig(_0x4d3230);if(_0x4d3230[_0x551b36(0x158)]['geminiApiKey'])try{_0x4d3230[_0x551b36(0x219)]=new GoogleGenerativeAI(_0x4d3230['config'][_0x551b36(0x13a)]),_0x4d3230[_0x551b36(0x1ba)]=_0x4d3230[_0x551b36(0x219)]['getGenerativeModel']({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x551b36(0x202)}}),_0x4d3230[_0x551b36(0x1d9)]['info'](_0x551b36(0x1f5));}catch(_0x2f126a){_0x4d3230['log'][_0x551b36(0x1b2)](_0x551b36(0x141)+_0x2f126a['message']);}await createAllObjects(_0x4d3230),await loadSystemMode(_0x4d3230),await loadRawEventLog(_0x4d3230),await loadDailyDigests(_0x4d3230),_0x4d3230[_0x551b36(0x177)](_0x551b36(0x185)),_0x4d3230[_0x551b36(0x177)](LTM_DP_TRIGGER_DIGEST),_0x4d3230['subscribeStates'](_0x551b36(0x18b)),_0x4d3230[_0x551b36(0x177)](_0x551b36(0xe3)),_0x4d3230['subscribeStates']('analysis.automation.triggerAction'),_0x4d3230['subscribeStates'](_0x551b36(0x1a0)),_0x4d3230['subscribeStates'](_0x551b36(0x110)),_0x4d3230[_0x551b36(0x177)](_0x551b36(0xbb)),_0x4d3230[_0x551b36(0x177)](_0x551b36(0x1f8)),_0x4d3230[_0x551b36(0x177)](_0x551b36(0xcc)),_0x4d3230[_0x551b36(0x177)](_0x551b36(0x165)),await initSensorSubscriptions(_0x4d3230),await initPresenceSubscriptions(_0x4d3230),await setupTelegramListener(_0x4d3230),setTimeout(()=>checkWifiPresence(_0x4d3230),0x1388);if(_0x4d3230[_0x551b36(0xd7)])clearInterval(_0x4d3230[_0x551b36(0xd7)]);const _0x4160d2=_0x4d3230[_0x551b36(0x158)][_0x551b36(0x1e2)]||0xf;_0x4160d2>0x0&&(_0x4d3230[_0x551b36(0xd7)]=setInterval(()=>{runAutopilot(_0x4d3230);},_0x4160d2*0x3c*0x3e8)),schedulers[_0x551b36(0x9e)](_0x4d3230,()=>createDailyDigest(_0x4d3230)),schedulers[_0x551b36(0x1f3)](_0x4d3230),schedulers['setupDriftAnalysisScheduler'](_0x4d3230,()=>runBaselineDriftAnalysis(_0x4d3230)),schedulers[_0x551b36(0x1c1)](_0x4d3230,()=>sendMorningBriefing(_0x4d3230)),startPythonService(_0x4d3230),setTimeout(()=>{const _0x274928=_0x551b36;_0x4d3230[_0x274928(0x15f)]&&(runPythonHealthCheck(_0x4d3230),triggerGaitAnalysis(_0x4d3230),triggerEnergyPrediction(_0x4d3230)),updateHealthVector(_0x4d3230);},0x1388);}class CogniLiving extends utils[a0_0x478de7(0x16b)]{constructor(_0x291f93){const _0x34189c=a0_0x478de7;super({..._0x291f93,'name':_0x34189c(0x10a)}),this[_0x34189c(0x225)]=[],this['analysisHistory']=[],this[_0x34189c(0x20c)]=[],this[_0x34189c(0x1cc)]=[],this['sensorLastValues']={},this[_0x34189c(0xa2)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x34189c(0x205)]=!![],this['exitTimer']=null,this[_0x34189c(0x17e)]=null,this['isGracePeriodActive']=![],this[_0x34189c(0x219)]=null,this[_0x34189c(0x1ba)]=null,this[_0x34189c(0x1df)]=SYSTEM_MODES[_0x34189c(0x180)],this[_0x34189c(0x9d)]=![],this[_0x34189c(0x1ec)]=![],this[_0x34189c(0xca)]=_0x34189c(0x171),this[_0x34189c(0xd7)]=null,this[_0x34189c(0x22c)]=null,this[_0x34189c(0xf9)]=null,this[_0x34189c(0x173)]=null,this[_0x34189c(0x1ae)]=null,this['pythonProcess']=null,this[_0x34189c(0x189)]=![],this['on']('ready',this[_0x34189c(0xd5)]['bind'](this)),this['on'](_0x34189c(0xe1),this[_0x34189c(0xb0)][_0x34189c(0x113)](this)),this['on'](_0x34189c(0xf5),this[_0x34189c(0x93)][_0x34189c(0x113)](this)),this['on'](_0x34189c(0x19a),this['onMessage']['bind'](this));}async[a0_0x478de7(0xd5)](){const _0x359e07=a0_0x478de7;this[_0x359e07(0x1d9)][_0x359e07(0xac)](_0x359e07(0x1a9)+this['version']+')\x20-\x20SAFE\x20BOOT');if(!installer[_0x359e07(0x188)](this,()=>startSystem(this)))return;}[a0_0x478de7(0x93)](_0x22340f){const _0x495c3b=a0_0x478de7;if(this['analysisTimer'])clearInterval(this[_0x495c3b(0xd7)]);if(this[_0x495c3b(0x173)])clearInterval(this[_0x495c3b(0x173)]);if(this[_0x495c3b(0x22c)])this['ltmJob'][_0x495c3b(0x11b)]();if(this['modeResetJob'])this[_0x495c3b(0xf9)]['cancel']();if(this['briefingJob'])this[_0x495c3b(0x1ae)]['cancel']();if(this[_0x495c3b(0x1d0)])clearTimeout(this[_0x495c3b(0x1d0)]);if(this[_0x495c3b(0x17e)])clearTimeout(this[_0x495c3b(0x17e)]);stopPythonService(this),_0x22340f();}async[a0_0x478de7(0xb0)](_0x1af7dd,_0x4a110f){const _0x3674aa=a0_0x478de7;if(!_0x4a110f||this[_0x3674aa(0x189)])return;if(_0x1af7dd[_0x3674aa(0x1eb)]('telegram')&&_0x1af7dd[_0x3674aa(0xee)](_0x3674aa(0x220))&&_0x4a110f[_0x3674aa(0x1fa)]){await handleTelegramResponse(this,_0x4a110f[_0x3674aa(0x1fa)]);return;}if(_0x1af7dd===this[_0x3674aa(0x186)]+'.'+SYSTEM_DP_MODE){if(_0x4a110f[_0x3674aa(0x1fa)]&&Object[_0x3674aa(0x1cd)](SYSTEM_MODES)[_0x3674aa(0x1eb)](_0x4a110f['val'])){this['currentSystemMode']=_0x4a110f[_0x3674aa(0x1fa)];if(_0x4a110f[_0x3674aa(0x1fa)]===SYSTEM_MODES[_0x3674aa(0xe2)])await setPresence(this,![]);else await setPresence(this,!![]);}if(!_0x4a110f[_0x3674aa(0x1ee)])this['setState'](_0x1af7dd,{'val':this[_0x3674aa(0x1df)],'ack':!![]});return;}if(!_0x4a110f[_0x3674aa(0x1ee)]){_0x1af7dd['includes'](_0x3674aa(0x185))&&_0x4a110f[_0x3674aa(0x1fa)]&&(this[_0x3674aa(0x17b)](_0x1af7dd,{'val':![],'ack':!![]}),runGeminiAnalysis(this));if(_0x1af7dd['includes'](_0x3674aa(0x1b9))&&_0x4a110f[_0x3674aa(0x1fa)]){this[_0x3674aa(0x17b)](_0x1af7dd,{'val':![],'ack':!![]});if(this[_0x3674aa(0x9d)])createDailyDigest(this);}_0x1af7dd[_0x3674aa(0x1eb)](_0x3674aa(0x136))&&_0x4a110f[_0x3674aa(0x1fa)]&&(this[_0x3674aa(0x17b)](_0x1af7dd,{'val':![],'ack':!![]}),sendMorningBriefing(this));_0x1af7dd[_0x3674aa(0x1eb)](_0x3674aa(0xb8))&&_0x4a110f['val']&&(this['setState'](_0x1af7dd,{'val':![],'ack':!![]}),executeAutomationAction(this));if(_0x1af7dd['includes'](_0x3674aa(0x110))&&_0x4a110f[_0x3674aa(0x1fa)]){this[_0x3674aa(0x17b)](_0x1af7dd,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x5c2785=await this[_0x3674aa(0x1a7)](_0x3674aa(0x1ca));if(_0x5c2785&&_0x5c2785[_0x3674aa(0x1fa)]){const _0x5e5a62=JSON[_0x3674aa(0x18d)](_0x5c2785['val']);this[_0x3674aa(0x1d9)][_0x3674aa(0xac)](_0x3674aa(0x124)),this[_0x3674aa(0x107)](_0x3674aa(0x142),{'val':'Sec-Training\x20started...','ack':!![]}),sendToPython(this,_0x3674aa(0xd3),{'sequences':_0x5e5a62});}}catch(_0x5131a9){this[_0x3674aa(0x1d9)]['error'](_0x3674aa(0xda)+_0x5131a9[_0x3674aa(0x19a)]);}}if(_0x1af7dd[_0x3674aa(0x1eb)]('analysis.training.triggerHealth')&&_0x4a110f['val']){this[_0x3674aa(0x17b)](_0x1af7dd,{'val':![],'ack':!![]});if(this[_0x3674aa(0x9d)])try{const _0x5c355f=await this[_0x3674aa(0x1a7)](LTM_DP_DAILY_DIGESTS);if(_0x5c355f&&_0x5c355f[_0x3674aa(0x1fa)])sendToPython(this,_0x3674aa(0xa3),{'digests':JSON['parse'](_0x5c355f[_0x3674aa(0x1fa)])});}catch(_0x57a6d8){}}if(_0x1af7dd['includes'](_0x3674aa(0x1f8))&&_0x4a110f['val']){this['setState'](_0x1af7dd,{'val':![],'ack':!![]});if(this[_0x3674aa(0x9d)])try{const _0x207325=await this['getStateAsync'](_0x3674aa(0xde));if(_0x207325&&_0x207325[_0x3674aa(0x1fa)])sendToPython(this,_0x3674aa(0x1b3),{'points':JSON[_0x3674aa(0x18d)](_0x207325[_0x3674aa(0x1fa)])});}catch(_0x179418){}}if(_0x1af7dd['includes'](_0x3674aa(0xcc))&&_0x4a110f[_0x3674aa(0x1fa)]){this['setState'](_0x1af7dd,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x30e3a3=await this['getStateAsync'](LTM_DP_RAW_LOG);_0x30e3a3&&_0x30e3a3[_0x3674aa(0x1fa)]&&(this[_0x3674aa(0x1d9)][_0x3674aa(0xac)](_0x3674aa(0x18c)),sendToPython(this,'TRAIN_COMFORT',{'events':JSON[_0x3674aa(0x18d)](_0x30e3a3[_0x3674aa(0x1fa)])}));}catch(_0x3bfdff){}}if(_0x1af7dd[_0x3674aa(0x1eb)](_0x3674aa(0x165))&&_0x4a110f[_0x3674aa(0x1fa)]){this['setState'](_0x1af7dd,{'val':![],'ack':!![]});if(this[_0x3674aa(0x9d)])try{const _0x121474=await this['getStateAsync'](_0x3674aa(0x1ca));if(_0x121474&&_0x121474[_0x3674aa(0x1fa)]){const _0x16c308=JSON[_0x3674aa(0x18d)](_0x121474[_0x3674aa(0x1fa)]);this['log'][_0x3674aa(0xac)](_0x3674aa(0x20f)),sendToPython(this,'BUILD_TOPOLOGY',{'sequences':_0x16c308});}}catch(_0x247357){this['log'][_0x3674aa(0x1b2)](_0x3674aa(0x95)+_0x247357['message']);}}return;}if(this[_0x3674aa(0x158)]['presenceDevices']&&this[_0x3674aa(0x158)][_0x3674aa(0x156)][_0x3674aa(0x1eb)](_0x1af7dd)){await checkWifiPresence(this);return;}const _0x42fdfb=(this[_0x3674aa(0x158)][_0x3674aa(0x203)]||[])[_0x3674aa(0xff)](_0x296308=>_0x296308['id']===_0x1af7dd);if(_0x42fdfb)processSensorEvent(this,_0x1af7dd,_0x4a110f,_0x42fdfb);}async[a0_0x478de7(0x12e)](_0x518630){const _0x30ec6e=a0_0x478de7;if(typeof _0x518630===_0x30ec6e(0x1bf)&&_0x518630[_0x30ec6e(0x19a)]){if(_0x518630[_0x30ec6e(0x222)]===_0x30ec6e(0x1de)){const _0x4da2f1=_0x518630['message'][_0x30ec6e(0xfe)]||this[_0x30ec6e(0x158)][_0x30ec6e(0x13a)];if(!_0x4da2f1)return this[_0x30ec6e(0xdd)](_0x518630[_0x30ec6e(0x178)],_0x518630[_0x30ec6e(0x222)],{'success':![],'message':_0x30ec6e(0x135)},_0x518630['callback']);try{const _0x3c763b=new GoogleGenerativeAI(_0x4da2f1),_0x5dd9d3=_0x3c763b[_0x30ec6e(0xf3)]({'model':GEMINI_MODEL}),_0x2a276f=await _0x5dd9d3[_0x30ec6e(0x1b4)]('Hi');this['sendTo'](_0x518630[_0x30ec6e(0x178)],_0x518630['command'],{'success':!![],'message':_0x30ec6e(0x214)+_0x2a276f[_0x30ec6e(0x201)][_0x30ec6e(0x12f)]()},_0x518630['callback']);}catch(_0x3c6d3e){this[_0x30ec6e(0xdd)](_0x518630['from'],_0x518630[_0x30ec6e(0x222)],{'success':![],'message':_0x30ec6e(0xbf)+_0x3c6d3e[_0x30ec6e(0x19a)]},_0x518630['callback']);}}else{if(_0x518630[_0x30ec6e(0x222)]===_0x30ec6e(0x1ed)){const _0x472e34=await getWeatherContext(this),_0x49da4e=await getCalendarContext(this);this['sendTo'](_0x518630[_0x30ec6e(0x178)],_0x518630[_0x30ec6e(0x222)],{'success':!![],'weather':_0x472e34,'calendar':_0x49da4e},_0x518630[_0x30ec6e(0xf0)]);}else{if(_0x518630[_0x30ec6e(0x222)]===_0x30ec6e(0x1e8)){if(!this[_0x30ec6e(0x9d)])return this[_0x30ec6e(0xdd)](_0x518630['from'],_0x518630[_0x30ec6e(0x222)],{'success':![],'isPro':![]},_0x518630['callback']);let _0x4ee698={'status':_0x30ec6e(0x137)};try{const _0x3b35eb=await this[_0x30ec6e(0x1a7)](LTM_DP_DRIFT_STATUS);_0x4ee698[_0x30ec6e(0x207)]=_0x3b35eb?_0x3b35eb[_0x30ec6e(0x1fa)]:_0x30ec6e(0x137);}catch(_0x2d2c01){}this[_0x30ec6e(0xdd)](_0x518630[_0x30ec6e(0x178)],_0x518630[_0x30ec6e(0x222)],{'success':!![],'isPro':!![],'dailyDigests':this[_0x30ec6e(0x1cc)],'driftAnalysis':_0x4ee698,'analysisHistory':this[_0x30ec6e(0xcb)]},_0x518630[_0x30ec6e(0xf0)]);}else{if(_0x518630[_0x30ec6e(0x222)]==='getOverviewData'){const _0x207bde=this[_0x30ec6e(0x1cc)]['length'],_0x5af7ae=new Date(),_0xacf513=new Date(_0x5af7ae[_0x30ec6e(0x187)](),_0x5af7ae[_0x30ec6e(0x19f)](),_0x5af7ae['getDate']())[_0x30ec6e(0xf6)](),_0x4cd95b=this[_0x30ec6e(0x20c)][_0x30ec6e(0x1da)](_0x776cf7=>new Date(_0x776cf7[_0x30ec6e(0x20d)])['getTime']()>_0xacf513)[_0x30ec6e(0x194)],_0x545bf8=new Array(0x18)[_0x30ec6e(0x1e4)](0x0);this[_0x30ec6e(0x20c)][_0x30ec6e(0xc5)](_0x45cc77=>{const _0x5ac437=_0x30ec6e,_0x4bbc09=new Date(_0x45cc77['timestamp']);if(_0x4bbc09['getTime']()>_0xacf513)_0x545bf8[_0x4bbc09[_0x5ac437(0x145)]()]++;});let _0x52c2d8={'status':_0x30ec6e(0x137)};try{const _0x4c5781=await this['getStateAsync'](LTM_DP_DRIFT_STATUS);_0x52c2d8[_0x30ec6e(0x207)]=_0x4c5781?_0x4c5781[_0x30ec6e(0x1fa)]:'N/A';}catch(_0x152b1d){}let _0x536dd9='';try{const _0x27927b=await this['getStateAsync'](_0x30ec6e(0x15b));_0x536dd9=_0x27927b?_0x27927b[_0x30ec6e(0x1fa)]:'';}catch(_0x3a9368){}let _0x5539d4=null;!this['geminiModel']&&(_0x5539d4=this['config'][_0x30ec6e(0x13a)]?'KI-Modell\x20nicht\x20initialisiert':'Kein\x20API\x20Key!');let _0x45db52={'detected':![],'description':'','targetId':'','targetValue':'','autoApply':![]};try{const _0x56b7d8=await this[_0x30ec6e(0x1a7)]('analysis.automation.patternDetected');if(_0x56b7d8&&_0x56b7d8[_0x30ec6e(0x1fa)]){_0x45db52[_0x30ec6e(0x167)]=!![];const _0x590faa=await this[_0x30ec6e(0x1a7)]('analysis.automation.description');_0x45db52['description']=_0x590faa?_0x590faa[_0x30ec6e(0x1fa)]:'';const _0x47781c=await this[_0x30ec6e(0x1a7)](_0x30ec6e(0x12b));_0x45db52[_0x30ec6e(0x13f)]=_0x47781c?_0x47781c[_0x30ec6e(0x1fa)]:'';const _0x1e06cc=await this['getStateAsync'](_0x30ec6e(0x215));_0x45db52[_0x30ec6e(0x1ad)]=_0x1e06cc?_0x1e06cc[_0x30ec6e(0x1fa)]:'';}const _0x9fa05=await this['getStateAsync'](_0x30ec6e(0x1a0));_0x45db52[_0x30ec6e(0x19d)]=_0x9fa05?!!_0x9fa05['val']:![];}catch(_0x5092a7){}this[_0x30ec6e(0xdd)](_0x518630[_0x30ec6e(0x178)],_0x518630[_0x30ec6e(0x222)],{'success':!![],'eventHistory':this[_0x30ec6e(0x225)][_0x30ec6e(0x18e)](0x0,0xf),'stats':{'digestCount':_0x207bde,'eventCountToday':_0x4cd95b,'hourlyActivity':_0x545bf8,'driftStatus':_0x52c2d8[_0x30ec6e(0x207)],'isPresent':this['isPresent'],'presenceWho':_0x536dd9,'minDays':this['config']['minDaysForBaseline']||0x7,'stbDays':this[_0x30ec6e(0x158)][_0x30ec6e(0x13e)]||0xe,'ltbDays':this['config'][_0x30ec6e(0xa0)]||0x3c,'systemError':_0x5539d4},'automation':_0x45db52},_0x518630['callback']);}else{if(_0x518630['command']===_0x30ec6e(0x146))try{const _0x191d8e=await scanner[_0x30ec6e(0xd6)](this,_0x518630['message']||{});this[_0x30ec6e(0xdd)](_0x518630['from'],_0x518630[_0x30ec6e(0x222)],{'success':!![],'devices':_0x191d8e},_0x518630[_0x30ec6e(0xf0)]);}catch(_0xbc5386){this['sendTo'](_0x518630[_0x30ec6e(0x178)],_0x518630['command'],{'success':![],'error':_0xbc5386['message']},_0x518630[_0x30ec6e(0xf0)]);}else{if(_0x518630['command']==='getEnums'){const _0x459eb3=await this['getForeignObjectsAsync']('enum.functions.*','enum'),_0x4b2cfe=[];if(_0x459eb3)for(const _0x2cd9bb in _0x459eb3){const _0x5319b4=_0x459eb3[_0x2cd9bb],_0x91d7fa=(_0x5319b4[_0x30ec6e(0x11a)]&&typeof _0x5319b4['common'][_0x30ec6e(0x164)]===_0x30ec6e(0x1bf)?_0x5319b4[_0x30ec6e(0x11a)][_0x30ec6e(0x164)]['de']:_0x5319b4[_0x30ec6e(0x11a)]['name'])||_0x5319b4[_0x30ec6e(0x11a)][_0x30ec6e(0x164)];_0x4b2cfe[_0x30ec6e(0xbc)]({'id':_0x2cd9bb,'name':_0x91d7fa});}const _0x45a140=await this[_0x30ec6e(0x13d)](_0x30ec6e(0x15d),_0x30ec6e(0x19b)),_0x1d61f1=[];if(_0x45a140)for(const _0x2543ca in _0x45a140){const _0x373a5a=_0x45a140[_0x2543ca],_0x2f6fd1=(_0x373a5a[_0x30ec6e(0x11a)]&&typeof _0x373a5a[_0x30ec6e(0x11a)][_0x30ec6e(0x164)]===_0x30ec6e(0x1bf)?_0x373a5a[_0x30ec6e(0x11a)]['name']['de']:_0x373a5a['common'][_0x30ec6e(0x164)])||_0x2543ca[_0x30ec6e(0x1ce)]('.')[_0x30ec6e(0x18f)]();_0x1d61f1[_0x30ec6e(0xbc)](_0x2f6fd1);}this[_0x30ec6e(0xdd)](_0x518630[_0x30ec6e(0x178)],_0x518630[_0x30ec6e(0x222)],{'success':!![],'enums':_0x4b2cfe,'rooms':_0x1d61f1},_0x518630[_0x30ec6e(0xf0)]);}else{if(_0x518630['command']===_0x30ec6e(0xc9)){const _0x27732d=_0x518630[_0x30ec6e(0x19a)]['instance'];if(!_0x27732d)return this[_0x30ec6e(0xdd)](_0x518630['from'],_0x518630[_0x30ec6e(0x222)],{'success':![],'error':_0x30ec6e(0x92)},_0x518630[_0x30ec6e(0xf0)]);const _0x2b5b6e=await getCalendarNames(this,_0x27732d);this[_0x30ec6e(0xdd)](_0x518630[_0x30ec6e(0x178)],_0x518630['command'],{'success':!![],'names':_0x2b5b6e},_0x518630[_0x30ec6e(0xf0)]);}else{if(_0x518630[_0x30ec6e(0x222)]===_0x30ec6e(0x1bb)){const {targetId:_0x4de904,targetValue:_0xe3310d}=_0x518630[_0x30ec6e(0x19a)];this[_0x30ec6e(0x1d9)][_0x30ec6e(0xac)](_0x30ec6e(0x15c)+_0x4de904+'\x20=\x20'+_0xe3310d),await this['setStateAsync'](_0x30ec6e(0x21c),{'val':!![],'ack':!![]}),await this[_0x30ec6e(0x107)]('analysis.automation.description',{'val':'SIMULATION:\x20Test-Vorschlag\x20fÃ¼r\x20'+_0x4de904,'ack':!![]}),await this['setStateAsync'](_0x30ec6e(0x12b),{'val':_0x4de904,'ack':!![]}),await this[_0x30ec6e(0x107)](_0x30ec6e(0x215),{'val':_0xe3310d,'ack':!![]}),this[_0x30ec6e(0xdd)](_0x518630[_0x30ec6e(0x178)],_0x518630['command'],{'success':!![]},_0x518630[_0x30ec6e(0xf0)]);}else{if(_0x518630[_0x30ec6e(0x222)]===_0x30ec6e(0x1b0)){const {historyId:_0x2290c0,rating:_0x447c46,comment:_0x197dc8,alertReason:_0x23a2a6}=_0x518630[_0x30ec6e(0x19a)];_0x2290c0&&_0x447c46?(await saveFeedback(this,{'timestamp':Date[_0x30ec6e(0x1ef)](),'historyId':_0x2290c0,'rating':_0x447c46,'comment':_0x197dc8,'alertReason':_0x23a2a6}),this[_0x30ec6e(0xdd)](_0x518630[_0x30ec6e(0x178)],_0x518630[_0x30ec6e(0x222)],{'success':!![]},_0x518630['callback'])):this[_0x30ec6e(0xdd)](_0x518630['from'],_0x518630[_0x30ec6e(0x222)],{'success':![],'error':_0x30ec6e(0x1aa)},_0x518630['callback']);}else _0x518630[_0x30ec6e(0x222)]===_0x30ec6e(0xe7)&&(this[_0x30ec6e(0x1d9)][_0x30ec6e(0xac)]('User\x20dismissed\x20automation\x20proposal.'),await this['setStateAsync'](_0x30ec6e(0x21c),{'val':![],'ack':!![]}),await this[_0x30ec6e(0x107)](_0x30ec6e(0x11f),{'val':'','ack':!![]}),this[_0x30ec6e(0xdd)](_0x518630['from'],_0x518630[_0x30ec6e(0x222)],{'success':!![]},_0x518630[_0x30ec6e(0xf0)]));}}}}}}}}}}}if(require[a0_0x478de7(0x148)]!==module)module[a0_0x478de7(0xab)]=_0xe41011=>new CogniLiving(_0xe41011);else new CogniLiving();