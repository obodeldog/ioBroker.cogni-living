const a0_0x4b0479=a0_0x4c93;(function(_0x14aa6e,_0x438daa){const _0x10020d=a0_0x4c93,_0x37e01c=_0x14aa6e();while(!![]){try{const _0x20f5b1=-parseInt(_0x10020d(0x287))/0x1*(-parseInt(_0x10020d(0x125))/0x2)+-parseInt(_0x10020d(0x16b))/0x3+-parseInt(_0x10020d(0x1a2))/0x4+-parseInt(_0x10020d(0x177))/0x5*(parseInt(_0x10020d(0x1dc))/0x6)+-parseInt(_0x10020d(0x239))/0x7+parseInt(_0x10020d(0x184))/0x8*(-parseInt(_0x10020d(0x154))/0x9)+-parseInt(_0x10020d(0x207))/0xa*(-parseInt(_0x10020d(0x18d))/0xb);if(_0x20f5b1===_0x438daa)break;else _0x37e01c['push'](_0x37e01c['shift']());}catch(_0x110a39){_0x37e01c['push'](_0x37e01c['shift']());}}}(a0_0x3f7e,0x88ada));const a0_0x494829=(function(){let _0x3ac5f2=!![];return function(_0x1c571d,_0x1ead90){const _0x8f6639=_0x3ac5f2?function(){const _0x1687b8=a0_0x4c93;if(_0x1ead90){const _0x217519=_0x1ead90[_0x1687b8(0x218)](_0x1c571d,arguments);return _0x1ead90=null,_0x217519;}}:function(){};return _0x3ac5f2=![],_0x8f6639;};}()),a0_0x2bd65b=a0_0x494829(this,function(){const _0x14001d=a0_0x4c93;return a0_0x2bd65b['toString']()[_0x14001d(0x11e)](_0x14001d(0x27e))[_0x14001d(0x27a)]()['constructor'](a0_0x2bd65b)[_0x14001d(0x11e)](_0x14001d(0x27e));});a0_0x2bd65b();'use strict';const utils=require('@iobroker/adapter-core'),{GoogleGenerativeAI}=require(a0_0x4b0479(0x27c)),{spawn}=require(a0_0x4b0479(0x140)),path=require(a0_0x4b0479(0x192)),fs=require('fs'),installer=require(a0_0x4b0479(0x1b3)),scanner=require(a0_0x4b0479(0x141)),schedulers=require('./lib/scheduler'),HISTORY_MAX_SIZE=0x32,RAW_LOG_MAX_SIZE=0x9c4,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL=a0_0x4b0479(0x231),SEQUENCE_TIMEOUT_MS=0x5*0x3c*0x3e8,MAX_TRAINING_SET_SIZE=0x1f4,THERMO_LOG_SIZE=0x3e8,EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,LTM_DP_RAW_LOG='LTM.rawEventLog',LTM_DP_DAILY_DIGESTS=a0_0x4b0479(0x269),LTM_DP_STATUS=a0_0x4b0479(0x1b0),LTM_DP_TRIGGER_DIGEST=a0_0x4b0479(0x103),LTM_DP_BASELINE_STATUS='LTM.baselineStatus',LTM_DP_DRIFT_CHANNEL=a0_0x4b0479(0x164),LTM_DP_DRIFT_STATUS=a0_0x4b0479(0x219),LTM_DP_DRIFT_DETAILS=a0_0x4b0479(0x246),LTM_DP_DRIFT_LAST_CHECK='LTM.driftAnalysis.lastCheck',SYSTEM_DP_MODE='system.mode',SYSTEM_MODES={'NORMAL':a0_0x4b0479(0x17f),'VACATION':a0_0x4b0479(0x150),'PARTY':a0_0x4b0479(0x245),'GUEST':a0_0x4b0479(0x1bf)},AUTO_RESET_MODES=[SYSTEM_MODES['PARTY'],SYSTEM_MODES[a0_0x4b0479(0x19b)]],PERSONA_MAPPING={'generic':'Analysiere\x20ausgewogen.','senior_aal':a0_0x4b0479(0x256),'family':a0_0x4b0479(0x1e4),'single_comfort':'Fokus\x20auf\x20Komfort.','security':a0_0x4b0479(0x26c)},ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};let activeSequence=[],sequenceTimer=null;async function initZombies(_0x461a97){const _0x50c784=a0_0x4b0479;try{const _0x168872=[_0x50c784(0x1ff),_0x50c784(0x183)];for(const _0x311dd0 of _0x168872){try{const _0xf4f8f2=await _0x461a97[_0x50c784(0x143)](_0x311dd0);if(_0xf4f8f2)await _0x461a97[_0x50c784(0x1c4)](_0x311dd0);}catch(_0x1cd656){}}}catch(_0x1d07e1){}}async function checkLicense(_0x331f81){return!![];}async function initHistory(_0x282d0a){const _0x46aa45=a0_0x4b0479;try{const _0x76a12c=await _0x282d0a[_0x46aa45(0x216)]('events.history');_0x76a12c&&_0x76a12c[_0x46aa45(0x262)]&&(_0x282d0a[_0x46aa45(0x234)]=JSON[_0x46aa45(0x285)](_0x76a12c['val'][_0x46aa45(0x27a)]()));}catch(_0x53a72f){_0x282d0a[_0x46aa45(0x234)]=[];}try{const _0x48ad91=await _0x282d0a[_0x46aa45(0x216)](_0x46aa45(0x1ba));if(_0x48ad91&&_0x48ad91['val'])_0x282d0a[_0x46aa45(0x249)]=JSON['parse'](_0x48ad91[_0x46aa45(0x262)][_0x46aa45(0x27a)]());}catch(_0x6a7f65){_0x282d0a[_0x46aa45(0x249)]=[];}if(_0x282d0a[_0x46aa45(0x234)]&&_0x282d0a['eventHistory'][_0x46aa45(0x12a)]>0x0){_0x282d0a[_0x46aa45(0x278)][_0x46aa45(0x1ce)](_0x46aa45(0x291));for(let _0x42afe0=_0x282d0a['eventHistory'][_0x46aa45(0x12a)]-0x1;_0x42afe0>=0x0;_0x42afe0--){const _0x1e2efb=_0x282d0a[_0x46aa45(0x234)][_0x42afe0];if(_0x1e2efb&&_0x1e2efb['id']!==undefined&&_0x1e2efb['value']!==undefined)_0x282d0a['sensorLastValues'][_0x1e2efb['id']]=_0x1e2efb[_0x46aa45(0x27b)];}}}async function initSystemConfig(_0x592693){const _0x44ea16=a0_0x4b0479;try{const _0x4bf0c2=await _0x592693['getForeignObjectAsync'](_0x44ea16(0x226));if(_0x4bf0c2&&_0x4bf0c2[_0x44ea16(0x297)])_0x592693[_0x44ea16(0x149)]={'latitude':_0x4bf0c2[_0x44ea16(0x297)][_0x44ea16(0x284)]||0x0,'longitude':_0x4bf0c2[_0x44ea16(0x297)]['longitude']||0x0,'city':_0x4bf0c2['common']['city']||''};}catch(_0x2f8344){}}async function createAllObjects(_0xbd4bfd){const _0x1d3a02=a0_0x4b0479;await _0xbd4bfd['extendObjectAsync'](_0x1d3a02(0x18a),{'type':_0x1d3a02(0x1ed),'common':{'name':_0x1d3a02(0x214)},'native':{}}),await _0xbd4bfd['extendObjectAsync'](SYSTEM_DP_MODE,{'type':'state','common':{'name':_0x1d3a02(0x129),'type':_0x1d3a02(0x25c),'role':_0x1d3a02(0xfc),'read':!![],'write':!![],'def':SYSTEM_MODES[_0x1d3a02(0x163)]},'native':{}}),await _0xbd4bfd['setObjectNotExistsAsync'](_0x1d3a02(0x14a),{'type':'state','common':{'name':_0x1d3a02(0x107),'type':'string','role':_0x1d3a02(0x211),'read':!![],'write':![]},'native':{}}),await _0xbd4bfd[_0x1d3a02(0x1a9)](_0x1d3a02(0x142),{'type':_0x1d3a02(0xfc),'common':{'name':_0x1d3a02(0x252),'type':_0x1d3a02(0x25c),'role':_0x1d3a02(0x1a8),'read':!![],'write':![]},'native':{}}),await _0xbd4bfd[_0x1d3a02(0x1a9)](_0x1d3a02(0x1d4),{'type':_0x1d3a02(0xfc),'common':{'name':_0x1d3a02(0x190),'type':'string','role':_0x1d3a02(0x1a8),'read':!![],'write':![]},'native':{}}),await _0xbd4bfd['extendObjectAsync'](_0x1d3a02(0x1cc),{'type':'channel','common':{'name':_0x1d3a02(0x228)},'native':{}}),await _0xbd4bfd['setObjectNotExistsAsync'](_0x1d3a02(0x12c),{'type':_0x1d3a02(0xfc),'common':{'name':_0x1d3a02(0x268),'type':_0x1d3a02(0x1e1),'role':_0x1d3a02(0x215),'read':!![],'write':!![]},'native':{}}),await _0xbd4bfd[_0x1d3a02(0x1a9)](_0x1d3a02(0x187),{'type':'state','common':{'name':_0x1d3a02(0xf9),'type':_0x1d3a02(0x1e1),'role':_0x1d3a02(0x215),'read':!![],'write':!![]},'native':{}}),await _0xbd4bfd['setObjectNotExistsAsync'](_0x1d3a02(0x29b),{'type':_0x1d3a02(0xfc),'common':{'name':_0x1d3a02(0x217),'type':_0x1d3a02(0x1e1),'role':_0x1d3a02(0x215),'read':!![],'write':!![]},'native':{}}),await _0xbd4bfd[_0x1d3a02(0x1a9)]('analysis.training.triggerComfort',{'type':_0x1d3a02(0xfc),'common':{'name':_0x1d3a02(0x251),'type':_0x1d3a02(0x1e1),'role':_0x1d3a02(0x215),'read':!![],'write':!![]},'native':{}}),await _0xbd4bfd[_0x1d3a02(0x1a9)](_0x1d3a02(0x20f),{'type':'state','common':{'name':_0x1d3a02(0x288),'type':_0x1d3a02(0x1e1),'role':_0x1d3a02(0x215),'read':!![],'write':!![]},'native':{}}),await _0xbd4bfd[_0x1d3a02(0x1a9)](_0x1d3a02(0x1d6),{'type':_0x1d3a02(0xfc),'common':{'name':'Training\x20Status','type':_0x1d3a02(0x25c),'role':'text','read':!![],'write':![]},'native':{}}),await _0xbd4bfd['extendObjectAsync']('analysis.security',{'type':_0x1d3a02(0x1ed),'common':{'name':'Security\x20Monitor'},'native':{}}),await _0xbd4bfd[_0x1d3a02(0x1a9)](_0x1d3a02(0x10e),{'type':_0x1d3a02(0xfc),'common':{'name':_0x1d3a02(0x180),'type':_0x1d3a02(0x257),'role':_0x1d3a02(0x27b),'read':!![],'write':![]},'native':{}}),await _0xbd4bfd[_0x1d3a02(0x1a9)](_0x1d3a02(0x18b),{'type':_0x1d3a02(0xfc),'common':{'name':_0x1d3a02(0x14c),'type':_0x1d3a02(0x257),'role':'value','read':!![],'write':![],'def':0.05},'native':{}}),await _0xbd4bfd['setObjectNotExistsAsync'](_0x1d3a02(0x111),{'type':_0x1d3a02(0xfc),'common':{'name':_0x1d3a02(0x222),'type':_0x1d3a02(0x25c),'role':_0x1d3a02(0x1f3),'read':!![],'write':![]},'native':{}}),await _0xbd4bfd[_0x1d3a02(0x1a9)]('analysis.security.topologyMatrix',{'type':_0x1d3a02(0xfc),'common':{'name':_0x1d3a02(0x295),'type':'string','role':_0x1d3a02(0x1a8),'read':!![],'write':![]},'native':{}}),await _0xbd4bfd[_0x1d3a02(0x123)](_0x1d3a02(0x21c),{'type':_0x1d3a02(0x1ed),'common':{'name':_0x1d3a02(0x1c6)},'native':{}}),await _0xbd4bfd[_0x1d3a02(0x1a9)](_0x1d3a02(0x12d),{'type':'state','common':{'name':_0x1d3a02(0x222),'type':_0x1d3a02(0x25c),'role':'date','read':!![],'write':![]},'native':{}}),await _0xbd4bfd[_0x1d3a02(0x1a9)](_0x1d3a02(0x144),{'type':_0x1d3a02(0xfc),'common':{'name':'Anomaly\x20Detected','type':_0x1d3a02(0x1e1),'role':_0x1d3a02(0x289),'read':!![],'write':![]},'native':{}}),await _0xbd4bfd['setObjectNotExistsAsync']('analysis.health.trendDiagnosis',{'type':_0x1d3a02(0xfc),'common':{'name':_0x1d3a02(0x110),'type':_0x1d3a02(0x25c),'role':'text','read':!![],'write':![]},'native':{}}),await _0xbd4bfd[_0x1d3a02(0x1a9)](_0x1d3a02(0x10c),{'type':_0x1d3a02(0xfc),'common':{'name':_0x1d3a02(0x20c),'type':'number','role':_0x1d3a02(0x27b),'read':!![],'write':![]},'native':{}}),await _0xbd4bfd[_0x1d3a02(0x1a9)]('analysis.health.todayVector',{'type':'state','common':{'name':_0x1d3a02(0x263),'type':'string','role':_0x1d3a02(0x1a8),'read':!![],'write':![]},'native':{}}),await _0xbd4bfd[_0x1d3a02(0x1a9)]('analysis.health.gaitSpeed',{'type':_0x1d3a02(0xfc),'common':{'name':'Gait\x20Speed\x20Trend','type':_0x1d3a02(0x257),'role':_0x1d3a02(0x27b),'read':!![],'write':![]},'native':{}}),await _0xbd4bfd['extendObjectAsync']('analysis.energy',{'type':_0x1d3a02(0x1ed),'common':{'name':_0x1d3a02(0x109)},'native':{}}),await _0xbd4bfd['setObjectNotExistsAsync'](_0x1d3a02(0x152),{'type':_0x1d3a02(0xfc),'common':{'name':_0x1d3a02(0x171),'type':_0x1d3a02(0x25c),'role':_0x1d3a02(0x211),'read':!![],'write':![]},'native':{}}),await _0xbd4bfd[_0x1d3a02(0x1a9)](_0x1d3a02(0x100),{'type':_0x1d3a02(0xfc),'common':{'name':_0x1d3a02(0x1b4),'type':_0x1d3a02(0x25c),'role':_0x1d3a02(0x211),'read':!![],'write':![]},'native':{}}),await _0xbd4bfd['setObjectNotExistsAsync'](_0x1d3a02(0x157),{'type':_0x1d3a02(0xfc),'common':{'name':_0x1d3a02(0x1f1),'type':_0x1d3a02(0x25c),'role':_0x1d3a02(0x1a8),'read':!![],'write':![]},'native':{}}),await _0xbd4bfd[_0x1d3a02(0x123)](_0x1d3a02(0x26a),{'type':_0x1d3a02(0x1ed),'common':{'name':'LTM'},'native':{}}),await _0xbd4bfd['extendObjectAsync'](LTM_DP_RAW_LOG,{'type':_0x1d3a02(0xfc),'common':{'name':_0x1d3a02(0x1d0),'type':_0x1d3a02(0x25c),'role':'json','read':!![],'write':![]},'native':{}}),await _0xbd4bfd[_0x1d3a02(0x123)](LTM_DP_DAILY_DIGESTS,{'type':_0x1d3a02(0xfc),'common':{'name':_0x1d3a02(0x247),'type':'string','role':_0x1d3a02(0x1a8),'read':!![],'write':![]},'native':{}}),await _0xbd4bfd[_0x1d3a02(0x1a9)](_0x1d3a02(0x126),{'type':_0x1d3a02(0xfc),'common':{'name':_0x1d3a02(0x220),'type':_0x1d3a02(0x25c),'role':_0x1d3a02(0x1a8),'read':!![],'write':![]},'native':{}}),await _0xbd4bfd[_0x1d3a02(0x1a9)]('LTM.trainingData.thermodynamics',{'type':_0x1d3a02(0xfc),'common':{'name':_0x1d3a02(0x25a),'type':'string','role':_0x1d3a02(0x1a8),'read':!![],'write':![]},'native':{}}),await _0xbd4bfd[_0x1d3a02(0x1a9)]('analysis.trigger',{'type':_0x1d3a02(0xfc),'common':{'name':_0x1d3a02(0x280),'type':_0x1d3a02(0x1e1),'role':'button','read':!![],'write':!![]},'native':{}}),await _0xbd4bfd[_0x1d3a02(0x1a9)]('analysis.triggerBriefing',{'type':_0x1d3a02(0xfc),'common':{'name':_0x1d3a02(0x1b6),'type':_0x1d3a02(0x1e1),'role':_0x1d3a02(0x215),'read':!![],'write':!![]},'native':{}}),await _0xbd4bfd[_0x1d3a02(0x1a9)](_0x1d3a02(0x13a),{'type':'state','common':{'name':_0x1d3a02(0x1ac),'type':'boolean','role':_0x1d3a02(0x128),'read':!![],'write':![]},'native':{}}),await _0xbd4bfd[_0x1d3a02(0x1a9)](_0x1d3a02(0x1da),{'type':_0x1d3a02(0xfc),'common':{'name':'Alert\x20Reason','type':'string','role':_0x1d3a02(0x1db),'read':!![],'write':![]},'native':{}}),await _0xbd4bfd[_0x1d3a02(0x1a9)](_0x1d3a02(0x16a),{'type':_0x1d3a02(0xfc),'common':{'name':_0x1d3a02(0x293),'type':'string','role':_0x1d3a02(0x211),'read':!![],'write':![]},'native':{}}),await _0xbd4bfd[_0x1d3a02(0x1a9)](_0x1d3a02(0x208),{'type':'state','common':{'name':'Pattern\x20Detected','type':_0x1d3a02(0x1e1),'role':_0x1d3a02(0x289),'read':!![],'write':![]},'native':{}}),await _0xbd4bfd[_0x1d3a02(0x1a9)]('analysis.automation.description',{'type':_0x1d3a02(0xfc),'common':{'name':'Description','type':_0x1d3a02(0x25c),'role':_0x1d3a02(0x211),'read':!![],'write':![]},'native':{}}),await _0xbd4bfd[_0x1d3a02(0x1a9)](_0x1d3a02(0x248),{'type':_0x1d3a02(0xfc),'common':{'name':_0x1d3a02(0x282),'type':'string','role':'json','read':!![],'write':![]},'native':{}}),await _0xbd4bfd[_0x1d3a02(0x1a9)](_0x1d3a02(0x194),{'type':_0x1d3a02(0xfc),'common':{'name':_0x1d3a02(0x1a3),'type':_0x1d3a02(0x25c),'role':_0x1d3a02(0x211),'read':!![],'write':![]},'native':{}}),await _0xbd4bfd[_0x1d3a02(0x1a9)](_0x1d3a02(0x168),{'type':_0x1d3a02(0xfc),'common':{'name':_0x1d3a02(0x1be),'type':_0x1d3a02(0x25c),'role':_0x1d3a02(0x211),'read':!![],'write':![]},'native':{}}),await _0xbd4bfd['setObjectNotExistsAsync']('analysis.automation.autoApply',{'type':_0x1d3a02(0xfc),'common':{'name':_0x1d3a02(0x1ca),'type':_0x1d3a02(0x1e1),'role':_0x1d3a02(0x1d1),'read':!![],'write':!![]},'native':{}}),await _0xbd4bfd['setObjectNotExistsAsync'](_0x1d3a02(0x175),{'type':_0x1d3a02(0xfc),'common':{'name':_0x1d3a02(0x14f),'type':_0x1d3a02(0x1e1),'role':_0x1d3a02(0x215),'read':!![],'write':!![]},'native':{}});}async function loadSystemMode(_0x242e68){const _0x3ca7f1=a0_0x4b0479;try{const _0xe665d8=await _0x242e68[_0x3ca7f1(0x216)](SYSTEM_DP_MODE);_0xe665d8&&_0xe665d8[_0x3ca7f1(0x262)]&&Object[_0x3ca7f1(0x127)](SYSTEM_MODES)[_0x3ca7f1(0x272)](_0xe665d8[_0x3ca7f1(0x262)])?_0x242e68[_0x3ca7f1(0x148)]=_0xe665d8[_0x3ca7f1(0x262)]:(_0x242e68[_0x3ca7f1(0x148)]=SYSTEM_MODES[_0x3ca7f1(0x163)],await _0x242e68[_0x3ca7f1(0x11b)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x3ca7f1(0x163)],'ack':!![]}));}catch(_0x29c737){_0x242e68[_0x3ca7f1(0x148)]=SYSTEM_MODES[_0x3ca7f1(0x163)];}}async function loadRawEventLog(_0x1dd478){const _0x19faf2=a0_0x4b0479;try{const _0x359d89=await _0x1dd478['getStateAsync'](LTM_DP_RAW_LOG);if(_0x359d89&&_0x359d89['val'])_0x1dd478[_0x19faf2(0x158)]=JSON[_0x19faf2(0x285)](_0x359d89[_0x19faf2(0x262)]);}catch(_0x3b128d){_0x1dd478[_0x19faf2(0x158)]=[];}}async function saveRawEventLog(_0x4583d3){const _0x566280=a0_0x4b0479;if(_0x4583d3[_0x566280(0x158)]['length']>RAW_LOG_MAX_SIZE)_0x4583d3[_0x566280(0x158)][_0x566280(0x1df)](0x0,_0x4583d3[_0x566280(0x158)][_0x566280(0x12a)]-RAW_LOG_MAX_SIZE);await _0x4583d3[_0x566280(0x11b)](LTM_DP_RAW_LOG,{'val':JSON[_0x566280(0x1eb)](_0x4583d3['rawEventLog']),'ack':!![]});}async function loadDailyDigests(_0x3e982e){const _0x1bb3e4=a0_0x4b0479;try{const _0x868301=await _0x3e982e[_0x1bb3e4(0x216)](LTM_DP_DAILY_DIGESTS);if(_0x868301&&_0x868301[_0x1bb3e4(0x262)])_0x3e982e[_0x1bb3e4(0x113)]=JSON[_0x1bb3e4(0x285)](_0x868301['val']);}catch(_0x277d8c){_0x3e982e[_0x1bb3e4(0x113)]=[];}await updateBaselineStatus(_0x3e982e);}async function saveDailyDigests(_0x33e939,_0x4f306e=!![]){const _0x2851d5=a0_0x4b0479,_0x6ccf0d=_0x33e939[_0x2851d5(0x1d3)][_0x2851d5(0x23c)]||0x3c;_0x33e939[_0x2851d5(0x113)][_0x2851d5(0x12a)]>_0x6ccf0d&&_0x33e939[_0x2851d5(0x113)][_0x2851d5(0x1df)](0x0,_0x33e939[_0x2851d5(0x113)][_0x2851d5(0x12a)]-_0x6ccf0d);await _0x33e939[_0x2851d5(0x11b)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x2851d5(0x1eb)](_0x33e939[_0x2851d5(0x113)]),'ack':!![]});if(_0x4f306e)await updateBaselineStatus(_0x33e939);}async function updateAnalysisHistory(_0x417731,_0x4fc1e4){const _0x12022b=a0_0x4b0479;_0x417731['analysisHistory'][_0x12022b(0x25f)](_0x4fc1e4);if(_0x417731[_0x12022b(0x249)]['length']>HISTORY_MAX_SIZE)_0x417731[_0x12022b(0x249)]['pop']();await _0x417731[_0x12022b(0x11b)]('analysis.analysisHistory',{'val':JSON[_0x12022b(0x1eb)](_0x417731['analysisHistory']),'ack':!![]});}async function updateBaselineStatus(_0x2aa39d){const _0x26ad27=a0_0x4b0479;if(!_0x2aa39d[_0x26ad27(0x1f0)]){await _0x2aa39d[_0x26ad27(0x11b)](LTM_DP_BASELINE_STATUS,{'val':_0x26ad27(0x1c0),'ack':!![]});return;}const _0x318f27=_0x2aa39d[_0x26ad27(0x113)]['length']>=(_0x2aa39d[_0x26ad27(0x1d3)][_0x26ad27(0x10a)]||0x7)?_0x26ad27(0x115)+_0x2aa39d['dailyDigests'][_0x26ad27(0x12a)]+_0x26ad27(0x1d8):_0x26ad27(0x22a)+_0x2aa39d[_0x26ad27(0x113)][_0x26ad27(0x12a)]+'/'+(_0x2aa39d['config'][_0x26ad27(0x10a)]||0x7)+')';await _0x2aa39d[_0x26ad27(0x11b)](LTM_DP_BASELINE_STATUS,{'val':_0x318f27,'ack':!![]});}async function initSensorSubscriptions(_0x4ff764){const _0x54321d=a0_0x4b0479,_0x48495b=_0x4ff764[_0x54321d(0x1d3)][_0x54321d(0x28b)];if(_0x48495b)for(const _0x5ba2ae of _0x48495b){await _0x4ff764[_0x54321d(0x227)](_0x5ba2ae['id']);}}async function initPresenceSubscriptions(_0x43a3b3){const _0x275bf7=a0_0x4b0479,_0x555014=_0x43a3b3[_0x275bf7(0x1d3)][_0x275bf7(0x1a0)];if(_0x555014)for(const _0x4ed5cb of _0x555014){await _0x43a3b3[_0x275bf7(0x227)](_0x4ed5cb);}}async function setupTelegramListener(_0xc1d37b){const _0xb304a3=a0_0x4b0479,_0x59942f=_0xc1d37b[_0xb304a3(0x1d3)][_0xb304a3(0x23f)];if(_0xc1d37b[_0xb304a3(0x1d3)][_0xb304a3(0x196)]&&_0x59942f)await _0xc1d37b[_0xb304a3(0x227)](_0x59942f+_0xb304a3(0x1fa));}async function checkWifiPresence(_0x5c7fc6){const _0x5d4df1=a0_0x4b0479;try{const _0x5c32cf=_0x5c7fc6[_0x5d4df1(0x1d3)][_0x5d4df1(0x1a0)]||[];let _0x5ba915=![];const _0x378d41=[];for(const _0x4d36c3 of _0x5c32cf){try{const _0x476845=await _0x5c7fc6[_0x5d4df1(0x19d)](_0x4d36c3);_0x476845&&(_0x476845[_0x5d4df1(0x262)]===!![]||_0x476845[_0x5d4df1(0x262)]==='online'||_0x476845[_0x5d4df1(0x262)]===0x1)&&(_0x5ba915=!![],_0x378d41[_0x5d4df1(0x1af)](_0x4d36c3));}catch(_0x392b47){}}return await _0x5c7fc6['setStateAsync'](_0x5d4df1(0x14a),{'val':_0x378d41[_0x5d4df1(0x241)](',\x20'),'ack':!![]}),_0x5ba915&&(_0x5c7fc6[_0x5d4df1(0x1b1)]&&(_0x5c7fc6[_0x5d4df1(0x278)][_0x5d4df1(0x1ce)](_0x5d4df1(0x258)),abortExitTimer(_0x5c7fc6)),!_0x5c7fc6[_0x5d4df1(0x236)]&&_0x5c7fc6['currentSystemMode']===SYSTEM_MODES['NORMAL']&&await setPresence(_0x5c7fc6,!![])),_0x5ba915;}catch(_0x1dd678){return![];}}function startExitTimer(_0x135e1c){const _0x28e504=a0_0x4b0479;abortExitTimer(_0x135e1c),_0x135e1c[_0x28e504(0x28e)]=!![],_0x135e1c[_0x28e504(0x240)]=setTimeout(()=>{_0x135e1c['isGracePeriodActive']=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),_0x135e1c['exitTimer']=setTimeout(()=>{const _0x50f105=_0x28e504;setPresence(_0x135e1c,![]),_0x135e1c[_0x50f105(0x1b1)]=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}function abortExitTimer(_0x3b2bbd){const _0xd503df=a0_0x4b0479;if(_0x3b2bbd[_0xd503df(0x1b1)])clearTimeout(_0x3b2bbd['exitTimer']);if(_0x3b2bbd['exitGraceTimer'])clearTimeout(_0x3b2bbd[_0xd503df(0x240)]);_0x3b2bbd[_0xd503df(0x1b1)]=null,_0x3b2bbd['exitGraceTimer']=null,_0x3b2bbd['isGracePeriodActive']=![];}async function setPresence(_0x1b2061,_0x23958d){const _0x3c116d=a0_0x4b0479;if(_0x1b2061[_0x3c116d(0x236)]===_0x23958d)return;_0x1b2061[_0x3c116d(0x236)]=_0x23958d,await _0x1b2061[_0x3c116d(0x11b)](_0x3c116d(0x14b),{'val':_0x23958d,'ack':!![]});}async function executeAutomationAction(_0x135f86){const _0x2436a0=a0_0x4b0479;try{const _0x48d1ad=await _0x135f86['getStateAsync']('analysis.automation.targetId'),_0x280072=await _0x135f86[_0x2436a0(0x216)](_0x2436a0(0x168));if(_0x48d1ad&&_0x48d1ad[_0x2436a0(0x262)]&&_0x280072){const _0x55a755=_0x48d1ad[_0x2436a0(0x262)];let _0x407c9b=_0x280072['val'];try{_0x407c9b=JSON[_0x2436a0(0x285)](_0x407c9b);}catch(_0x333bfa){}_0x135f86[_0x2436a0(0x278)][_0x2436a0(0x1ce)]('ü§ñ\x20BUTLER:\x20Executing\x20Action\x20->\x20'+_0x55a755+_0x2436a0(0x22d)+_0x407c9b),await _0x135f86[_0x2436a0(0x173)](_0x55a755,_0x407c9b);}else _0x135f86[_0x2436a0(0x278)][_0x2436a0(0x1c9)](_0x2436a0(0x170));}catch(_0x3f6e46){_0x135f86[_0x2436a0(0x278)][_0x2436a0(0x298)](_0x2436a0(0x21d)+_0x3f6e46['message']);}}async function processSensorEvent(_0x1dea71,_0x3eaad2,_0x4abfe6,_0x4234a9){const _0x2aaac6=a0_0x4b0479;if(!_0x4234a9)return;const _0x16ab32=_0x4abfe6[_0x2aaac6(0x262)],_0xe6a81f=Date[_0x2aaac6(0x160)](),_0x4e7c55=_0x1dea71[_0x2aaac6(0x25e)][_0x3eaad2];_0x1dea71[_0x2aaac6(0x25e)][_0x3eaad2]=_0x16ab32;if(!_0x4234a9[_0x2aaac6(0x201)]&&_0x4e7c55!=undefined&&_0x4e7c55==_0x16ab32)return;const _0x1acf72=(_0x4234a9[_0x2aaac6(0x153)]||'')[_0x2aaac6(0x199)](),_0x2c35ef=_0x1acf72[_0x2aaac6(0x272)](_0x2aaac6(0x1aa))||_0x1acf72[_0x2aaac6(0x272)](_0x2aaac6(0x210))||_0x1acf72[_0x2aaac6(0x272)](_0x2aaac6(0x24c))||_0x1acf72[_0x2aaac6(0x272)](_0x2aaac6(0x254));_0x1dea71[_0x2aaac6(0x1f0)]&&_0x2c35ef&&recordThermodynamics(_0x1dea71,_0x3eaad2,_0x16ab32,_0x4234a9['location']);const _0x4f83a2={'timestamp':_0xe6a81f,'id':_0x3eaad2,'name':_0x4234a9[_0x2aaac6(0x11a)],'type':_0x4234a9[_0x2aaac6(0x153)],'location':_0x4234a9[_0x2aaac6(0x132)],'value':_0x16ab32};_0x1dea71[_0x2aaac6(0x234)][_0x2aaac6(0x25f)](_0x4f83a2);if(_0x1dea71['eventHistory'][_0x2aaac6(0x12a)]>HISTORY_MAX_SIZE)_0x1dea71['eventHistory'][_0x2aaac6(0x242)]();await _0x1dea71[_0x2aaac6(0x11b)]('events.lastEvent',{'val':JSON[_0x2aaac6(0x1eb)](_0x4f83a2),'ack':!![]}),await _0x1dea71[_0x2aaac6(0x11b)](_0x2aaac6(0x1d4),{'val':JSON[_0x2aaac6(0x1eb)](_0x1dea71[_0x2aaac6(0x234)]),'ack':!![]});_0x1dea71[_0x2aaac6(0x1f0)]&&(_0x1dea71[_0x2aaac6(0x158)][_0x2aaac6(0x1af)](_0x4f83a2),await saveRawEventLog(_0x1dea71),recordSequence(_0x1dea71,_0x4f83a2));if(_0x4234a9[_0x2aaac6(0x1f6)]&&_0x16ab32===!![]){if(_0x1dea71[_0x2aaac6(0x236)]&&!_0x1dea71['isGracePeriodActive'])startExitTimer(_0x1dea71);else{if(!_0x1dea71[_0x2aaac6(0x236)])setPresence(_0x1dea71,!![]);}}else{if(_0x4234a9[_0x2aaac6(0x153)]===_0x2aaac6(0x1e5)&&_0x16ab32===!![]){if(_0x1dea71[_0x2aaac6(0x1b1)])abortExitTimer(_0x1dea71);if(!_0x1dea71[_0x2aaac6(0x236)]&&_0x1dea71[_0x2aaac6(0x148)]===SYSTEM_MODES['NORMAL'])setPresence(_0x1dea71,!![]);}}}async function recordThermodynamics(_0x50508e,_0x1000d9,_0x92c0c2,_0x2daa13){const _0x1ac745=a0_0x4b0479,_0x32e942=await getOutsideTemperatureNumeric(_0x50508e),_0x37adf0=await _0x50508e[_0x1ac745(0x216)]('LTM.trainingData.thermodynamics');let _0x4dd36a=[];if(_0x37adf0&&_0x37adf0[_0x1ac745(0x262)])try{_0x4dd36a=JSON[_0x1ac745(0x285)](_0x37adf0[_0x1ac745(0x262)]);}catch(_0x7c57fb){}_0x4dd36a[_0x1ac745(0x1af)]({'ts':Date[_0x1ac745(0x160)](),'room':_0x2daa13||_0x1ac745(0x27d),'t_in':_0x92c0c2,'t_out':_0x32e942});if(_0x4dd36a['length']>THERMO_LOG_SIZE)_0x4dd36a[_0x1ac745(0x12b)]();await _0x50508e[_0x1ac745(0x11b)](_0x1ac745(0x19a),{'val':JSON[_0x1ac745(0x1eb)](_0x4dd36a),'ack':!![]});}async function getOutsideTemperatureNumeric(_0x27b8eb){const _0x142a8a=a0_0x4b0479;if(_0x27b8eb['config']['outdoorSensorId'])try{const _0x2a54f0=await _0x27b8eb[_0x142a8a(0x19d)](_0x27b8eb[_0x142a8a(0x1d3)][_0x142a8a(0x112)]);if(_0x2a54f0&&_0x2a54f0[_0x142a8a(0x262)]!==undefined&&_0x2a54f0['val']!==null)return parseFloat(_0x2a54f0['val']);}catch(_0x39ee96){}const _0x39c720=_0x27b8eb[_0x142a8a(0x1d3)]['weatherInstance'];if(!_0x27b8eb[_0x142a8a(0x1d3)][_0x142a8a(0x22b)]||!_0x39c720)return null;try{let _0x4c807b='';if(_0x39c720[_0x142a8a(0x272)]('accuweather'))_0x4c807b=_0x39c720+_0x142a8a(0x147);else{if(_0x39c720[_0x142a8a(0x272)](_0x142a8a(0x10d)))_0x4c807b=_0x39c720+_0x142a8a(0xf7);else{if(_0x39c720[_0x142a8a(0x272)](_0x142a8a(0x176)))_0x4c807b=_0x39c720+_0x142a8a(0x1cf);else{if(_0x39c720[_0x142a8a(0x272)]('weatherunderground'))_0x4c807b=_0x39c720+_0x142a8a(0x28c);}}}if(_0x4c807b){const _0x1c393f=await _0x27b8eb['getForeignStateAsync'](_0x4c807b);if(_0x1c393f&&_0x1c393f[_0x142a8a(0x262)]!==undefined&&_0x1c393f[_0x142a8a(0x262)]!==null)return parseFloat(_0x1c393f['val']);}}catch(_0x5ef06a){}return null;}async function recordSequence(_0x3f1b70,_0x12321b){const _0x36c7d8=a0_0x4b0479,_0x48070f=(_0x12321b[_0x36c7d8(0x153)]||'')[_0x36c7d8(0x199)](),_0x273843=[_0x36c7d8(0x1e5),'bewegung','pr√§senz',_0x36c7d8(0x15f),_0x36c7d8(0x23e),_0x36c7d8(0x169),_0x36c7d8(0x274),_0x36c7d8(0x27f),_0x36c7d8(0x15b),_0x36c7d8(0x1fd),'kontakt',_0x36c7d8(0x114),'licht',_0x36c7d8(0x1d1),_0x36c7d8(0x26d),_0x36c7d8(0x1a1),_0x36c7d8(0x18e)];if(!_0x273843[_0x36c7d8(0x1f5)](_0xa34fd9=>_0x48070f[_0x36c7d8(0x272)](_0xa34fd9)))return;if(!_0x12321b[_0x36c7d8(0x27b)])return;if(sequenceTimer)clearTimeout(sequenceTimer);activeSequence[_0x36c7d8(0x1af)]({'loc':_0x12321b[_0x36c7d8(0x132)]||_0x36c7d8(0x27d),'id':_0x12321b['id'],'ts':Date[_0x36c7d8(0x160)]()}),sequenceTimer=setTimeout(async()=>{const _0x58e7dc=_0x36c7d8;if(activeSequence[_0x58e7dc(0x12a)]>0x1)await saveCompletedSequence(_0x3f1b70);activeSequence=[];},SEQUENCE_TIMEOUT_MS);}async function saveCompletedSequence(_0x1eb92b){const _0x328eec=a0_0x4b0479;try{const _0x26a6e4=await _0x1eb92b[_0x328eec(0x216)]('LTM.trainingData.sequences');let _0x4a34d1=[];if(_0x26a6e4&&_0x26a6e4[_0x328eec(0x262)])try{_0x4a34d1=JSON[_0x328eec(0x285)](_0x26a6e4[_0x328eec(0x262)]);}catch(_0x377f95){}const _0x2bcd02=activeSequence[0x0]['ts'],_0xbb5994=activeSequence[_0x328eec(0x1bb)](_0x2bb8f4=>({'loc':_0x2bb8f4[_0x328eec(0x273)],'t_delta':Math['round']((_0x2bb8f4['ts']-_0x2bcd02)/0x3e8)})),_0xe28fd9={'timestamp':new Date(_0x2bcd02)['toISOString'](),'steps':_0xbb5994,'duration':Math[_0x328eec(0x259)]((activeSequence[activeSequence['length']-0x1]['ts']-_0x2bcd02)/0x3e8),'daytime':new Date(_0x2bcd02)[_0x328eec(0x25d)]()};_0x4a34d1[_0x328eec(0x1af)](_0xe28fd9);if(_0x4a34d1[_0x328eec(0x12a)]>MAX_TRAINING_SET_SIZE)_0x4a34d1[_0x328eec(0x12b)]();await _0x1eb92b[_0x328eec(0x11b)](_0x328eec(0x126),{'val':JSON[_0x328eec(0x1eb)](_0x4a34d1),'ack':!![]}),runSecurityCheck(_0x1eb92b,_0xe28fd9);}catch(_0x25715d){_0x1eb92b[_0x328eec(0x278)][_0x328eec(0x298)](_0x328eec(0x145)+_0x25715d[_0x328eec(0x20a)]);}}function runSecurityCheck(_0x286400,_0x1e655e){const _0x3f125b=a0_0x4b0479;if(!_0x286400[_0x3f125b(0x1f0)])return;sendToPython(_0x286400,_0x3f125b(0x23b),{'sequence':_0x1e655e});}async function createDailyDigest(_0x4909bc){const _0x521f55=a0_0x4b0479;if(!_0x4909bc[_0x521f55(0x1f0)])return;await _0x4909bc[_0x521f55(0x11b)](LTM_DP_STATUS,{'val':_0x521f55(0x178),'ack':!![]});if(!_0x4909bc['geminiModel']||_0x4909bc['rawEventLog'][_0x521f55(0x12a)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x4909bc['setStateAsync'](LTM_DP_STATUS,{'val':_0x521f55(0x238),'ack':!![]});return;}const _0xa6c833=JSON[_0x521f55(0x285)](JSON['stringify'](_0x4909bc['rawEventLog'])),_0x4b8d58=_0xa6c833[_0x521f55(0x12a)],_0x3a8a40=_0x521f55(0x21f)+JSON['stringify'](_0xa6c833);try{const _0x25f92c=await _0x4909bc['geminiModel'][_0x521f55(0x18f)](_0x3a8a40),_0x471e63=JSON[_0x521f55(0x285)](_0x25f92c[_0x521f55(0x15c)][_0x521f55(0x211)]()[_0x521f55(0x11c)](/```json|```/g,'')[_0x521f55(0x29c)]()),_0x253701={'timestamp':new Date()['toISOString'](),'eventCount':_0x4b8d58,'summary':_0x471e63['summary']||_0x521f55(0x1ab),'activityLevel':_0x471e63[_0x521f55(0x117)]||_0x521f55(0x17f),'systemMode':_0x4909bc[_0x521f55(0x148)]};_0x4909bc['dailyDigests'][_0x521f55(0x1af)](_0x253701),await saveDailyDigests(_0x4909bc),_0x4909bc[_0x521f55(0x158)]=[],await saveRawEventLog(_0x4909bc),await _0x4909bc[_0x521f55(0x11b)](LTM_DP_STATUS,{'val':'Success','ack':!![]});if(_0x4909bc[_0x521f55(0x1f0)])sendToPython(_0x4909bc,'ANALYZE_HEALTH',{'digest':_0x253701});}catch(_0x2e4919){_0x4909bc[_0x521f55(0x278)][_0x521f55(0x298)](_0x2e4919[_0x521f55(0x20a)]);}}async function runBaselineDriftAnalysis(_0x2c8fe4){const _0x12aea6=a0_0x4b0479;if(!_0x2c8fe4['isProVersion']||!_0x2c8fe4[_0x12aea6(0x185)])return;const _0x33c9f2=_0x2c8fe4['config'][_0x12aea6(0x167)]||0xe;if(_0x2c8fe4['dailyDigests'][_0x12aea6(0x12a)]<_0x33c9f2+0x7){await _0x2c8fe4['setStateAsync'](LTM_DP_DRIFT_STATUS,{'val':'N/A\x20(Learning)','ack':!![]});return;}const _0x3bae1e=_0x2c8fe4[_0x12aea6(0x113)][_0x12aea6(0x1e3)](-_0x33c9f2),_0x2f0ec2=_0x2c8fe4[_0x12aea6(0x113)][_0x12aea6(0x1e3)](0x0,_0x2c8fe4[_0x12aea6(0x113)]['length']-_0x33c9f2),_0x1f9abf='ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20'+JSON[_0x12aea6(0x1eb)](_0x2f0ec2)+_0x12aea6(0x1fe)+JSON[_0x12aea6(0x1eb)](_0x3bae1e);try{const _0x5d4726=await _0x2c8fe4[_0x12aea6(0x185)]['generateContent'](_0x1f9abf),_0x1792bc=JSON[_0x12aea6(0x285)](_0x5d4726[_0x12aea6(0x15c)][_0x12aea6(0x211)]()['replace'](/```json|```/g,'')[_0x12aea6(0x29c)]());_0x1792bc[_0x12aea6(0x24e)]&&(await _0x2c8fe4[_0x12aea6(0x11b)](LTM_DP_DRIFT_STATUS,{'val':_0x1792bc[_0x12aea6(0x24e)],'ack':!![]}),await _0x2c8fe4[_0x12aea6(0x11b)](LTM_DP_DRIFT_DETAILS,{'val':_0x1792bc['driftDetails'],'ack':!![]}),await _0x2c8fe4[_0x12aea6(0x11b)](LTM_DP_DRIFT_LAST_CHECK,{'val':Date[_0x12aea6(0x160)](),'ack':!![]}));}catch(_0x2fd70c){}}async function sendMorningBriefing(_0x311d63){const _0x494e3c=a0_0x4b0479;if(!_0x311d63['geminiModel'])return;try{const _0x2e7190='Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.',_0x1b58bb=await _0x311d63[_0x494e3c(0x185)][_0x494e3c(0x18f)](_0x2e7190),_0xbea6e1=_0x1b58bb[_0x494e3c(0x15c)][_0x494e3c(0x211)]();sendNotification(_0x311d63,_0x494e3c(0x22e)+_0xbea6e1);}catch(_0x52175a){_0x311d63['log'][_0x494e3c(0x298)](_0x494e3c(0x1fc)+_0x52175a[_0x494e3c(0x20a)]);}}function stopPythonService(_0x490c55){const _0x1c1bb7=a0_0x4b0479;if(_0x490c55[_0x1c1bb7(0x13d)]){try{_0x490c55[_0x1c1bb7(0x13d)][_0x1c1bb7(0x1ea)]();}catch(_0x51ee9c){}_0x490c55[_0x1c1bb7(0x13d)]=null;}}function sendToPython(_0x4751b7,_0x5cb994,_0x1bec7f={}){const _0x1dbc3c=a0_0x4b0479;if(!_0x4751b7['pythonProcess']||!_0x4751b7[_0x1dbc3c(0x13d)][_0x1dbc3c(0x281)]['writable'])return;const _0x573237=JSON[_0x1dbc3c(0x1eb)]({'command':_0x5cb994,..._0x1bec7f});try{_0x4751b7[_0x1dbc3c(0x13d)][_0x1dbc3c(0x281)][_0x1dbc3c(0x121)](_0x573237+'\x0a');}catch(_0x2a0428){}}function runPythonHealthCheck(_0x5998eb){const _0x47128b=a0_0x4b0479;if(!_0x5998eb[_0x47128b(0x113)]||_0x5998eb[_0x47128b(0x113)][_0x47128b(0x12a)]<0x2)return;const _0x88424d=_0x5998eb['dailyDigests'][_0x47128b(0x1bb)](_0xafb1e9=>{const _0x54c2ee=_0x47128b,_0x33436a=(_0xafb1e9[_0x54c2ee(0x117)]||'')[_0x54c2ee(0x199)]();return ACTIVITY_LEVEL_MAP[_0x33436a]||0x32;});sendToPython(_0x5998eb,_0x47128b(0x17a),{'values':_0x88424d,'tag':_0x47128b(0x24d)});}function handlePythonResult(_0x8b09a3,_0xb86540){const _0x96709d=a0_0x4b0479;if(_0xb86540[_0x96709d(0x153)]===_0x96709d(0x16e))_0x8b09a3[_0x96709d(0x278)][_0x96709d(0x198)]('üêç\x20Python\x20Pong');else{if(_0xb86540[_0x96709d(0x153)]===_0x96709d(0x179)){const {anomaly_score:_0x9c4c95,is_anomaly:_0x30e48c,threshold:_0x25d41f,explanation:_0xa6f820}=_0xb86540[_0x96709d(0x1c1)];_0x8b09a3[_0x96709d(0x278)][_0x96709d(0x1ce)](_0x96709d(0x21b)+_0x9c4c95['toFixed'](0x5)+_0x96709d(0x1fb)+(_0x30e48c?_0x96709d(0xf8):'OK')),_0x8b09a3['setStateAsync']('analysis.security.lastScore',{'val':_0x9c4c95,'ack':!![]}),_0x8b09a3['setStateAsync'](_0x96709d(0x111),{'val':new Date()['toISOString'](),'ack':!![]});if(_0x25d41f)_0x8b09a3[_0x96709d(0x11b)](_0x96709d(0x18b),{'val':_0x25d41f,'ack':!![]});if(_0x30e48c){let _0xda88bd=_0x96709d(0x11f)+_0x9c4c95[_0x96709d(0x203)](0x4)+')';if(_0xa6f820&&_0xa6f820!=='Unknown')_0xda88bd+=_0x96709d(0x250)+_0xa6f820;_0x8b09a3[_0x96709d(0x11b)](_0x96709d(0x13a),{'val':!![],'ack':!![]}),_0x8b09a3[_0x96709d(0x11b)](_0x96709d(0x1da),{'val':_0xda88bd,'ack':!![]}),sendNotification(_0x8b09a3,_0x96709d(0x1c7)+_0xda88bd,![],!![]);}}else{if(_0xb86540['type']===_0x96709d(0x182)){const _0x1a0005=_0xb86540[_0x96709d(0x1c1)][_0x96709d(0x17b)]||'',_0x8a29b1=_0xb86540[_0x96709d(0x1c1)][_0x96709d(0x197)],_0x44b093=_0xb86540[_0x96709d(0x1c1)][_0x96709d(0x20b)]?_0x96709d(0x1f8)+new Date()['toLocaleTimeString']()+'\x20('+_0x1a0005+')':_0x96709d(0x202)+_0xb86540['payload']['reason'];_0x8b09a3[_0x96709d(0x11b)](_0x96709d(0x1d6),{'val':_0x44b093,'ack':!![]});if(_0xb86540[_0x96709d(0x1c1)][_0x96709d(0x20b)]&&_0x8a29b1)_0x8b09a3[_0x96709d(0x11b)](_0x96709d(0x18b),{'val':_0x8a29b1,'ack':!![]});}else{if(_0xb86540['type']===_0x96709d(0xfd)){const {patterns:_0x3cf936}=_0xb86540[_0x96709d(0x1c1)];if(_0x3cf936&&_0x3cf936[_0x96709d(0x12a)]>0x0){_0x8b09a3[_0x96709d(0x278)]['info'](_0x96709d(0x104)+_0x3cf936[_0x96709d(0x12a)]+_0x96709d(0x271)),_0x8b09a3[_0x96709d(0x11b)](_0x96709d(0x248),{'val':JSON[_0x96709d(0x1eb)](_0x3cf936),'ack':!![]});const _0x544f9c=_0x3cf936[0x0],_0x39ca0d=_0x96709d(0x276)+_0x544f9c[_0x96709d(0x299)]+'\x20('+(_0x544f9c[_0x96709d(0x24b)]*0x64)[_0x96709d(0x203)](0x0)+'%)';_0x8b09a3[_0x96709d(0x11b)](_0x96709d(0x208),{'val':!![],'ack':!![]}),_0x8b09a3['setStateAsync'](_0x96709d(0x267),{'val':_0x39ca0d,'ack':!![]});}else _0x8b09a3[_0x96709d(0x278)]['info'](_0x96709d(0x1a4)),_0x8b09a3[_0x96709d(0x11b)](_0x96709d(0x208),{'val':![],'ack':!![]}),_0x8b09a3[_0x96709d(0x11b)](_0x96709d(0x248),{'val':'[]','ack':!![]});}else{if(_0xb86540[_0x96709d(0x153)]===_0x96709d(0x12f)){if(_0xb86540[_0x96709d(0x1c1)]['success'])try{const _0x9e8cea=JSON[_0x96709d(0x285)](_0xb86540[_0x96709d(0x1c1)][_0x96709d(0x17b)]);if(_0x9e8cea[_0x96709d(0x286)])_0x8b09a3[_0x96709d(0x11b)]('analysis.energy.insulationScore',{'val':JSON['stringify'](_0x9e8cea[_0x96709d(0x286)]),'ack':!![]});if(_0x9e8cea[_0x96709d(0x159)])_0x8b09a3['setStateAsync']('analysis.energy.heatingScore',{'val':JSON[_0x96709d(0x1eb)](_0x9e8cea[_0x96709d(0x159)]),'ack':!![]});}catch(_0x53b9f9){}}else{if(_0xb86540[_0x96709d(0x153)]==='HEALTH_TRAIN_RESULT'){if(_0xb86540['payload'][_0x96709d(0x20b)])_0x8b09a3[_0x96709d(0x278)]['info'](_0x96709d(0x151));}else{if(_0xb86540[_0x96709d(0x153)]===_0x96709d(0x135))_0x8b09a3[_0x96709d(0x11b)]('analysis.health.lastCheck',{'val':new Date()['toISOString'](),'ack':!![]}),_0x8b09a3[_0x96709d(0x11b)](_0x96709d(0x144),{'val':_0xb86540[_0x96709d(0x1c1)]['is_anomaly'],'ack':!![]});else{if(_0xb86540[_0x96709d(0x153)]===_0x96709d(0x1d7))_0x8b09a3[_0x96709d(0x11b)](_0x96709d(0x213),{'val':_0xb86540[_0x96709d(0x1c1)][_0x96709d(0x244)],'ack':!![]}),_0x8b09a3[_0x96709d(0x11b)](_0x96709d(0x10c),{'val':_0xb86540['payload'][_0x96709d(0x191)],'ack':!![]});else{if(_0xb86540[_0x96709d(0x153)]===_0x96709d(0x118)){const {speed_trend:_0x446553}=_0xb86540['payload'];if(_0x446553!==undefined)_0x8b09a3['setStateAsync'](_0x96709d(0x16f),{'val':_0x446553,'ack':!![]});}else{if(_0xb86540['type']===_0x96709d(0x15e)){const {forecast:_0x4a81c7}=_0xb86540[_0x96709d(0x1c1)];if(_0x4a81c7)_0x8b09a3[_0x96709d(0x11b)]('analysis.energy.forecast',{'val':JSON[_0x96709d(0x1eb)](_0x4a81c7),'ack':!![]});}else{if(_0xb86540['type']==='TOPOLOGY_RESULT'){const {data:_0x28f17b}=_0xb86540['payload'];_0x28f17b&&(_0x8b09a3['log'][_0x96709d(0x1ce)]('üï∏Ô∏è\x20Topology\x20Map\x20updated.'),_0x8b09a3[_0x96709d(0x11b)](_0x96709d(0x1d9),{'val':JSON[_0x96709d(0x1eb)](_0x28f17b),'ack':!![]}));}}}}}}}}}}}}function startPythonService(_0x2a0577){const _0xc59978=a0_0x4b0479;let _0x273b1d='python3';if(fs[_0xc59978(0x10f)](installer[_0xc59978(0x1e6)]))_0x273b1d=installer[_0xc59978(0x1e6)];try{const _0x1af01f=path['join'](__dirname,_0xc59978(0x275),_0xc59978(0x25b));_0x2a0577[_0xc59978(0x13d)]=spawn(_0x273b1d,[_0x1af01f]),_0x2a0577[_0xc59978(0x13d)][_0xc59978(0x189)]['on']('data',_0x33fda2=>{const _0x2cab7f=_0xc59978,_0x20e992=_0x33fda2[_0x2cab7f(0x27a)]()[_0x2cab7f(0x130)]('\x0a');_0x20e992[_0x2cab7f(0x260)](_0x1c0c5f=>{const _0x5a7305=_0x2cab7f,_0x77aef6=_0x1c0c5f[_0x5a7305(0x29c)]();if(!_0x77aef6)return;if(_0x77aef6[_0x5a7305(0x233)](_0x5a7305(0x261)))_0x2a0577[_0x5a7305(0x278)][_0x5a7305(0x198)](_0x5a7305(0x17c)+_0x77aef6[_0x5a7305(0x116)](0x5)[_0x5a7305(0x29c)]());else{if(_0x77aef6[_0x5a7305(0x233)](_0x5a7305(0x24f)))try{const _0xca36d0=JSON[_0x5a7305(0x285)](_0x77aef6[_0x5a7305(0x116)](0x8)[_0x5a7305(0x29c)]());handlePythonResult(_0x2a0577,_0xca36d0);}catch(_0x43e9e4){}}});}),_0x2a0577[_0xc59978(0x13d)]['on'](_0xc59978(0x11d),_0x105c71=>{_0x2a0577['pythonProcess']=null;});}catch(_0x3520a8){_0x2a0577[_0xc59978(0x278)]['error'](_0xc59978(0x193)+_0x3520a8[_0xc59978(0x20a)]);}}async function runAutopilot(_0x2864e3){const _0x1f1b02=a0_0x4b0479;_0x2864e3[_0x1f1b02(0x278)]['debug'](_0x1f1b02(0x1d2)),await runGeminiAnalysis(_0x2864e3),updateHealthVector(_0x2864e3),triggerGaitAnalysis(_0x2864e3),triggerEnergyPrediction(_0x2864e3);}async function triggerGaitAnalysis(_0x751c59){const _0x4c7d65=a0_0x4b0479;if(!_0x751c59[_0x4c7d65(0x1f0)])return;try{const _0x4f1f8f=await _0x751c59[_0x4c7d65(0x216)](_0x4c7d65(0x126));_0x4f1f8f&&_0x4f1f8f[_0x4c7d65(0x262)]&&sendToPython(_0x751c59,_0x4c7d65(0x200),{'sequences':JSON[_0x4c7d65(0x285)](_0x4f1f8f[_0x4c7d65(0x262)])});}catch(_0x7a9465){}}async function triggerEnergyPrediction(_0x37012f){const _0x3e8f63=a0_0x4b0479;if(!_0x37012f['isProVersion'])return;try{const _0x56a467=await getOutsideTemperatureNumeric(_0x37012f);if(_0x56a467===null)return;const _0x2aa341={},_0x19b17c=_0x37012f[_0x3e8f63(0x1d3)][_0x3e8f63(0x28b)]||[];for(const _0x175a65 of _0x19b17c){if(_0x175a65[_0x3e8f63(0x153)]===_0x3e8f63(0x1aa)&&_0x175a65[_0x3e8f63(0x132)]){const _0x55d898=_0x37012f['sensorLastValues'][_0x175a65['id']];if(_0x55d898!==undefined)_0x2aa341[_0x175a65['location']]=_0x55d898;}}Object[_0x3e8f63(0x156)](_0x2aa341)['length']>0x0&&sendToPython(_0x37012f,'PREDICT_ENERGY',{'current_temps':_0x2aa341,'t_out':_0x56a467});}catch(_0x29cdde){}}function updateHealthVector(_0x5d22fd){const _0x248c66=a0_0x4b0479;if(!_0x5d22fd[_0x248c66(0x158)]||_0x5d22fd[_0x248c66(0x158)][_0x248c66(0x12a)]===0x0)return;const _0x5a3b24=new Array(0x60)[_0x248c66(0x1d5)](0x0),_0x39bbe2=new Date()[_0x248c66(0x225)](0x0,0x0,0x0,0x0);_0x5d22fd['rawEventLog'][_0x248c66(0x260)](_0x44440e=>{const _0xa9409c=_0x248c66,_0x44eaef=new Date(_0x44440e[_0xa9409c(0x209)]);if(_0x44eaef['getTime']()>=_0x39bbe2){const _0x30a4a1=_0x44eaef['getHours'](),_0x236509=_0x44eaef['getMinutes'](),_0x34610b=_0x30a4a1*0x4+Math[_0xa9409c(0x22c)](_0x236509/0xf);if(_0x34610b>=0x0&&_0x34610b<0x60)_0x5a3b24[_0x34610b]++;}}),_0x5d22fd[_0x248c66(0x11b)](_0x248c66(0x19f),{'val':JSON['stringify'](_0x5a3b24),'ack':!![]});}async function getWeatherContext(_0x4f7eca){const _0x378ab5=a0_0x4b0479;if(!_0x4f7eca[_0x378ab5(0x1d3)]['useWeather']||!_0x4f7eca[_0x378ab5(0x1d3)][_0x378ab5(0x28f)])return _0x378ab5(0x1e2);try{const _0x347123=_0x4f7eca[_0x378ab5(0x1d3)][_0x378ab5(0x28f)];let _0x27e826=await _0x4f7eca[_0x378ab5(0x19d)](_0x347123+_0x378ab5(0x147));if(!_0x27e826)_0x27e826=await _0x4f7eca[_0x378ab5(0x19d)](_0x347123+_0x378ab5(0x1cf));let _0x5b69f6=await _0x4f7eca['getForeignStateAsync'](_0x347123+_0x378ab5(0x12e));if(!_0x5b69f6)_0x5b69f6=await _0x4f7eca[_0x378ab5(0x19d)](_0x347123+_0x378ab5(0x237));if(_0x27e826&&_0x5b69f6)return _0x27e826['val']+_0x378ab5(0x101)+_0x5b69f6['val'];}catch(_0x3dd4ad){}return _0x378ab5(0x29a);}async function getCalendarContext(_0x3492e8){const _0xe05374=a0_0x4b0479;if(!_0x3492e8[_0xe05374(0x1d3)][_0xe05374(0x283)]||!_0x3492e8[_0xe05374(0x1d3)][_0xe05374(0x1ee)])return _0xe05374(0x253);return _0xe05374(0x1a6);}async function getCalendarNames(_0x436614,_0x317f38){return[];}async function saveFeedback(_0x3c6e6e,_0x1b2594){const _0xcace1b=a0_0x4b0479;_0x3c6e6e[_0xcace1b(0x278)][_0xcace1b(0x1ce)]('üìù\x20Feedback\x20received:\x20'+_0x1b2594[_0xcace1b(0x270)]);}async function runGeminiAnalysis(_0x201dac,_0x2da36a=''){const _0x184526=a0_0x4b0479;if(!_0x201dac[_0x184526(0x185)])return;if(_0x201dac[_0x184526(0x234)]['length']===0x0)return;const _0x2d6516=_0x201dac[_0x184526(0x234)]['slice'](0x0,0xf),_0x351db4=await getWeatherContext(_0x201dac),_0x5d07cc=_0x201dac[_0x184526(0x148)],_0x32d026=PERSONA_MAPPING[_0x201dac[_0x184526(0x1d3)][_0x184526(0xf6)]||_0x184526(0xfe)],_0x3371b8=_0x201dac[_0x184526(0x1d3)][_0x184526(0x16d)]||_0x184526(0x1a5);let _0x41fdf4=_0x184526(0x1bc);try{const _0x56a894=await _0x201dac[_0x184526(0x216)](_0x184526(0x14a));if(_0x56a894&&_0x56a894['val'])_0x41fdf4=_0x56a894[_0x184526(0x262)];}catch(_0x1d1ee4){}let _0x1e715e=![];try{const _0x2909b0=await _0x201dac[_0x184526(0x216)](_0x184526(0x1c2));if(_0x2909b0&&_0x2909b0['val'])_0x1e715e=!![];}catch(_0x3288e9){}const _0x1a4f3e=_0x184526(0x155)+_0x32d026+_0x184526(0x13c)+_0x3371b8+_0x184526(0x188)+_0x5d07cc+_0x184526(0x172)+_0x351db4+'.\x20ANWESEND:\x20'+_0x41fdf4+_0x184526(0x186)+JSON[_0x184526(0x1eb)](_0x2d6516)+'.\x20EMERGENCY:\x20'+_0x2da36a+_0x184526(0x17e);try{const _0x37f53d=await _0x201dac[_0x184526(0x185)][_0x184526(0x18f)](_0x1a4f3e),_0x49a9ee=JSON[_0x184526(0x285)](_0x37f53d[_0x184526(0x15c)]['text']()[_0x184526(0x11c)](/```json|```/g,'')['trim']());await _0x201dac['setStateAsync'](_0x184526(0x161),{'val':JSON['stringify'](_0x49a9ee),'ack':!![]});if(_0x49a9ee[_0x184526(0x19c)])await _0x201dac[_0x184526(0x11b)](_0x184526(0x16a),{'val':_0x49a9ee['summary'],'ack':!![]});const _0x5b8be0={'timestamp':Date[_0x184526(0x160)](),'id':Date[_0x184526(0x160)]()[_0x184526(0x27a)](),'analysis':{'activity':{'summary':_0x49a9ee[_0x184526(0x19c)],'isAlert':_0x49a9ee[_0x184526(0x13e)],'alertReason':_0x49a9ee[_0x184526(0x235)]},'comfort':{'automationProposal':_0x49a9ee[_0x184526(0x23a)]}}};await updateAnalysisHistory(_0x201dac,_0x5b8be0);const _0x2ad7ce=_0x49a9ee['isAlert']||![];_0x2ad7ce!==_0x201dac[_0x184526(0x21e)]&&(await _0x201dac[_0x184526(0x11b)](_0x184526(0x13a),{'val':_0x2ad7ce,'ack':!![]}),_0x201dac['lastAlertState']=_0x2ad7ce,_0x2ad7ce&&(await _0x201dac[_0x184526(0x11b)](_0x184526(0x1da),{'val':_0x49a9ee[_0x184526(0x235)],'ack':!![]}),sendNotification(_0x201dac,_0x184526(0x1ec)+_0x49a9ee[_0x184526(0x235)],![],_0x49a9ee['isEmergency'])));if(_0x49a9ee[_0x184526(0x23a)]&&_0x49a9ee[_0x184526(0x23a)][_0x184526(0x1ad)]){await _0x201dac['setStateAsync']('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),await _0x201dac[_0x184526(0x11b)](_0x184526(0x267),{'val':_0x49a9ee[_0x184526(0x23a)]['description'],'ack':!![]}),await _0x201dac['setStateAsync'](_0x184526(0x194),{'val':_0x49a9ee['automationProposal'][_0x184526(0x1b5)],'ack':!![]}),await _0x201dac[_0x184526(0x11b)](_0x184526(0x168),{'val':JSON['stringify'](_0x49a9ee[_0x184526(0x23a)][_0x184526(0x277)]),'ack':!![]});if(_0x1e715e)executeAutomationAction(_0x201dac);}}catch(_0x1aeaae){_0x201dac[_0x184526(0x278)][_0x184526(0x298)]('Gemini\x20Error:\x20'+_0x1aeaae['message']);}}async function startSystem(_0x3d43a6){const _0x16a4a7=a0_0x4b0479;_0x3d43a6[_0x16a4a7(0x278)][_0x16a4a7(0x1ce)]('üöÄ\x20Starting\x20NUUKANNI\x20Logic\x20(v0.12.10)...'),await initZombies(_0x3d43a6);try{_0x3d43a6[_0x16a4a7(0x1f0)]=await checkLicense(_0x3d43a6[_0x16a4a7(0x1d3)][_0x16a4a7(0x181)]);}catch(_0x4541bc){}if(!_0x3d43a6[_0x16a4a7(0x1d3)][_0x16a4a7(0x279)]||_0x3d43a6[_0x16a4a7(0x1d3)][_0x16a4a7(0x279)]<0.1)_0x3d43a6[_0x16a4a7(0x1d3)]['inactivityThresholdHours']=0xc;await initHistory(_0x3d43a6),await initSystemConfig(_0x3d43a6);if(_0x3d43a6[_0x16a4a7(0x1d3)][_0x16a4a7(0x1e9)])try{_0x3d43a6[_0x16a4a7(0x174)]=new GoogleGenerativeAI(_0x3d43a6[_0x16a4a7(0x1d3)]['geminiApiKey']),_0x3d43a6[_0x16a4a7(0x185)]=_0x3d43a6[_0x16a4a7(0x174)][_0x16a4a7(0x19e)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':'application/json'}}),_0x3d43a6[_0x16a4a7(0x278)][_0x16a4a7(0x1ce)](_0x16a4a7(0x20d));}catch(_0x2aaed0){_0x3d43a6[_0x16a4a7(0x278)][_0x16a4a7(0x298)](_0x16a4a7(0x133)+_0x2aaed0[_0x16a4a7(0x20a)]);}await createAllObjects(_0x3d43a6),await loadSystemMode(_0x3d43a6),await loadRawEventLog(_0x3d43a6),await loadDailyDigests(_0x3d43a6),_0x3d43a6[_0x16a4a7(0x26e)](_0x16a4a7(0x1f9)),_0x3d43a6[_0x16a4a7(0x26e)](LTM_DP_TRIGGER_DIGEST),_0x3d43a6['subscribeStates'](_0x16a4a7(0x1f7)),_0x3d43a6['subscribeStates']('analysis.triggerBriefing'),_0x3d43a6[_0x16a4a7(0x26e)](_0x16a4a7(0x175)),_0x3d43a6[_0x16a4a7(0x26e)](_0x16a4a7(0x1c2)),_0x3d43a6[_0x16a4a7(0x26e)]('analysis.training.triggerSecurity'),_0x3d43a6[_0x16a4a7(0x26e)](_0x16a4a7(0x187)),_0x3d43a6[_0x16a4a7(0x26e)]('analysis.training.triggerEnergy'),_0x3d43a6[_0x16a4a7(0x26e)](_0x16a4a7(0x1b9)),_0x3d43a6[_0x16a4a7(0x26e)](_0x16a4a7(0x20f)),await initSensorSubscriptions(_0x3d43a6),await initPresenceSubscriptions(_0x3d43a6),await setupTelegramListener(_0x3d43a6),setTimeout(()=>checkWifiPresence(_0x3d43a6),0x1388);if(_0x3d43a6['analysisTimer'])clearInterval(_0x3d43a6[_0x16a4a7(0x212)]);const _0x5d8ce3=_0x3d43a6[_0x16a4a7(0x1d3)][_0x16a4a7(0x137)]||0xf;_0x5d8ce3>0x0&&(_0x3d43a6[_0x16a4a7(0x212)]=setInterval(()=>{runAutopilot(_0x3d43a6);},_0x5d8ce3*0x3c*0x3e8)),schedulers[_0x16a4a7(0x108)](_0x3d43a6,()=>createDailyDigest(_0x3d43a6)),schedulers['setupModeResetScheduler'](_0x3d43a6),schedulers[_0x16a4a7(0x139)](_0x3d43a6,()=>runBaselineDriftAnalysis(_0x3d43a6)),schedulers[_0x16a4a7(0x1e0)](_0x3d43a6,()=>sendMorningBriefing(_0x3d43a6)),startPythonService(_0x3d43a6),setTimeout(()=>{const _0x5c9ec1=_0x16a4a7;_0x3d43a6[_0x5c9ec1(0x13d)]&&(runPythonHealthCheck(_0x3d43a6),triggerGaitAnalysis(_0x3d43a6),triggerEnergyPrediction(_0x3d43a6)),updateHealthVector(_0x3d43a6);},0x1388);}function a0_0x3f7e(){const _0x1e050e=['service.py','string','getHours','sensorLastValues','unshift','forEach','[LOG]','val','Today\x20Vector\x20(15m)','driftAnalysisTimer','üï∏Ô∏è\x20Building\x20Topology\x20Matrix...','enum','analysis.automation.description','Train\x20Security','LTM.dailyDigests','LTM','N/A','PRIORIT√ÑT:\x20Sicherheit.','schalter','subscribeStates','setState','rating','\x20new\x20patterns.','includes','loc','t√ºr','python_service','Regel\x20erkannt:\x20','targetValue','log','inactivityThresholdHours','toString','value','@google/generative-ai','Unknown','(((.+)+)+)+$','window','Trigger\x20Analysis','stdin','Detected\x20Patterns','useCalendar','latitude','parse','insulation','24FGsoim','Build\x20Topology','indicator','TRAIN_HEALTH','devices','.forecast.current.temp','onUnload','isGracePeriodActive','weatherInstance','systemUUID','Restoring\x20sensor\x20cache...','getOverviewData','Activity\x20Summary','ltmJob','Topology\x20Matrix','TRAIN_ENERGY','common','error','rule','Keine\x20Wetterdaten\x20verf√ºgbar.','analysis.training.triggerEnergy','trim','getLtmData','aiPersona','.NextHours.Location_1.Day_1.current.temp_value','ANOMALY','Train\x20Health','getForeignObjectsAsync','Topology\x20Error:\x20','state','COMFORT_RESULT','generic','getDate','analysis.energy.heatingScore','¬∞C,\x20','triggerDailyDigest','LTM.triggerDailyDigest','üõãÔ∏è\x20BUTLER:\x20Found\x20','scanForDevices',')\x20-\x20SAFE\x20BOOT','Who\x20is\x20present?','setupLtmScheduler','Energy\x20Intelligence','minDaysForBaseline','No\x20instance','analysis.health.trendValue','daswetter','analysis.security.lastScore','existsSync','Trend','analysis.security.lastCheck','outdoorSensorId','dailyDigests','light','Aktiv\x20(','substring','activityLevel','GAIT_RESULT','Err:\x20','name','setStateAsync','replace','close','search','Ungew√∂hnliches\x20Bewegungsmuster!\x20(Score:\x20','callback','write','üß™\x20Simulating\x20Butler\x20Proposal:\x20','extendObjectAsync','KI-Modell\x20nicht\x20initialisiert','40492GpDEnw','LTM.trainingData.sequences','values','indicator.alarm','System\x20Mode','length','shift','analysis.training.triggerSecurity','analysis.health.lastCheck','.Current.WeatherText','ENERGY_TRAIN_RESULT','split','submitFeedback','location','Gemini\x20Init\x20Error:\x20','main','HEALTH_RESULT','description','analysisInterval','cogni-living\x20adapter\x20starting\x20(v','setupDriftAnalysisScheduler','analysis.isAlert','bind','.\x20KONTEXT:\x20','pythonProcess','isAlert','status','child_process','./lib/scanner','events.lastEvent','getObjectAsync','analysis.health.isAnomaly','[RECORDER]\x20Error:\x20','briefingJob','.Current.Temperature','currentSystemMode','systemConfig','system.presenceWho','system.isPresent','Current\x20Threshold','User\x20dismissed\x20automation\x20proposal.','OK:\x20','Trigger\x20Action','vacation','‚úÖ\x20HEALTH\x20TRAINED.','analysis.energy.insulationScore','type','444663IVWVLx','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','keys','analysis.energy.forecast','rawEventLog','heating','Missing\x20data','fenster','response','onStateChange','ENERGY_PREDICT_RESULT','presence','now','analysis.lastResult','apiKey','NORMAL','LTM.driftAnalysis','modeResetJob','autoApply','ltmStbWindowDays','analysis.automation.targetValue','door','analysis.activitySummary','1459989PLdzzL','testContext','livingContext','PONG','analysis.health.gaitSpeed','ü§ñ\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','Insulation\x20Score','.\x20WETTER:\x20','setForeignStateAsync','genAI','analysis.automation.triggerAction','openweathermap','565aSWHci','Started...','SECURITY_RESULT','ANALYZE_TREND','details','[PYTHON]\x20','getEnums','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','normal','Anomaly\x20Score','licenseKey','TRAINING_COMPLETE','events.history_debug_00','8nODRQM','geminiModel','.\x20EVENTS:\x20','analysis.training.triggerHealth','.\x20SYSTEM_MODE:\x20','stdout','system','analysis.security.currentThreshold','enum.rooms.*','38297017ARqazO','lampe','generateContent','Event\x20History','change_percent','path','Error\x20launching\x20Python:\x20','analysis.automation.targetId','checkAndInstall','notifyTelegramEnabled','threshold','debug','toLowerCase','LTM.trainingData.thermodynamics','GUEST','summary','getForeignStateAsync','getGenerativeModel','analysis.health.todayVector','presenceDevices','dimmer','3322732ZtXaoM','Target\x20ID','üõãÔ∏è\x20BUTLER:\x20Keine\x20neuen\x20Muster\x20gefunden.','Keine\x20Details.','Keine\x20Termine.','ack','json','setObjectNotExistsAsync','temperature','Digest','Alert\x20Status','detected','getFullYear','push','LTM.processingStatus','exitTimer','BUILD_TOPOLOGY','./lib/installer','Heating\x20Score','targetId','Trigger\x20Briefing','TRAIN_COMFORT','cancel','analysis.training.triggerComfort','analysis.analysisHistory','map','Unbekannt','communicate.request','Target\x20Value','guest','Deaktiviert\x20(Pro-Feature)','payload','analysis.automation.autoApply','testApiKey','delObjectAsync','command','Health\x20Analysis','‚ö†Ô∏è\x20SECURITY\x20ALARM:\x20','SIMULATION:\x20Test-Vorschlag\x20f√ºr\x20','warn','Auto\x20Apply','find','analysis.training','Kein\x20API\x20Key.','info','.forecast.current.temperature','Raw\x20Log','switch','ü§ñ\x20Autopilot:\x20Running\x20periodic\x20analysis...','config','events.history','fill','analysis.training.status','TREND_RESULT','\x20Tage)','analysis.security.topologyMatrix','analysis.alertReason','text.alarm','59226vPjpAy','version','Sec-Training\x20started...','splice','setupBriefingScheduler','boolean','Wetterdaten\x20deaktiviert.','slice','Fokus\x20auf\x20Familienroutinen.','motion','PYTHON_EXE','cogni-living','telegram','geminiApiKey','kill','stringify','‚ö†Ô∏è\x20ALARM:\x20','channel','calendarInstance','onMessage','isProVersion','Temperature\x20Forecast','dependencyInstallInProgress','date','namespace','some','isExit','system.mode','Success:\x20','analysis.trigger','.communicate.request','\x20->\x20','Briefing\x20Error:\x20','contact','\x0aSTB:\x20','analysis.history_debug_00','ANALYZE_GAIT','logDuplicates','Failed:\x20','toFixed','simulateButler','dismissAutomation','getCalendarNames','10PVzpse','analysis.automation.patternDetected','timestamp','message','success','Trend\x20Value','Gemini\x20AI\x20initialized.','getTime','analysis.training.triggerTopology','temperatur','text','analysisTimer','analysis.health.trendDiagnosis','System','button','getStateAsync','Train\x20Energy','apply','LTM.driftAnalysis.baselineDrift','unload','üõ°Ô∏è\x20SECURITY\x20CHECK:\x20Score\x20','analysis.health','BUTLER\x20Execution\x20Error:\x20','lastAlertState','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','Sequences','exports','Last\x20Check','Kein\x20API\x20Key!','triggerBriefing','setHours','system.config','subscribeForeignStatesAsync','AI\x20Training','filter','Lernphase\x20(','useWeather','floor','\x20=\x20','üåÖ\x20Morning\x20Briefing:\x0a','sendTo','endsWith','models/gemini-flash-latest','onReady','startsWith','eventHistory','alertReason','isPresent','.forecast.current.state','Skipped\x20(No\x20AI\x20or\x20Data)','6478087EHZPhc','automationProposal','ANALYZE_SEQUENCE','ltmLtbWindowDays','object','occupancy','notifyTelegramInstance','exitGraceTimer','join','pop','automation.triggerAction','diagnosis','party','LTM.driftAnalysis.driftDetails','Daily\x20Digests','analysis.automation.detectedPatterns','analysisHistory','Training\x20Error:\x20','confidence','klima','Activity-Level','baselineDrift','[RESULT]','\x0aGrund:\x20','Train\x20Comfort','Last\x20raw\x20event','Kalender\x20deaktiviert.','heizung','from','PRIORIT√ÑT:\x20Gesundheit/AAL.','number','WiFi\x20Presence\x20detected.','round','Thermodynamics'];a0_0x3f7e=function(){return _0x1e050e;};return a0_0x3f7e();}class CogniLiving extends utils['Adapter']{constructor(_0x41c827){const _0x341aa2=a0_0x4b0479;super({..._0x41c827,'name':_0x341aa2(0x1e7)}),this[_0x341aa2(0x234)]=[],this['analysisHistory']=[],this[_0x341aa2(0x158)]=[],this[_0x341aa2(0x113)]=[],this[_0x341aa2(0x25e)]={},this[_0x341aa2(0x149)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x341aa2(0x236)]=!![],this[_0x341aa2(0x1b1)]=null,this['exitGraceTimer']=null,this[_0x341aa2(0x28e)]=![],this['genAI']=null,this[_0x341aa2(0x185)]=null,this[_0x341aa2(0x148)]=SYSTEM_MODES[_0x341aa2(0x163)],this[_0x341aa2(0x1f0)]=![],this[_0x341aa2(0x21e)]=![],this[_0x341aa2(0x290)]='unknown',this[_0x341aa2(0x212)]=null,this[_0x341aa2(0x294)]=null,this[_0x341aa2(0x165)]=null,this[_0x341aa2(0x264)]=null,this[_0x341aa2(0x146)]=null,this[_0x341aa2(0x13d)]=null,this[_0x341aa2(0x1f2)]=![],this['on']('ready',this[_0x341aa2(0x232)][_0x341aa2(0x13b)](this)),this['on']('stateChange',this[_0x341aa2(0x15d)]['bind'](this)),this['on'](_0x341aa2(0x21a),this[_0x341aa2(0x28d)]['bind'](this)),this['on'](_0x341aa2(0x20a),this[_0x341aa2(0x1ef)][_0x341aa2(0x13b)](this));}async[a0_0x4b0479(0x232)](){const _0x339bbb=a0_0x4b0479;this[_0x339bbb(0x278)][_0x339bbb(0x1ce)](_0x339bbb(0x138)+this[_0x339bbb(0x1dd)]+_0x339bbb(0x106));if(!installer[_0x339bbb(0x195)](this,()=>startSystem(this)))return;}['onUnload'](_0x3ec6d0){const _0x4a5865=a0_0x4b0479;if(this[_0x4a5865(0x212)])clearInterval(this[_0x4a5865(0x212)]);if(this[_0x4a5865(0x264)])clearInterval(this[_0x4a5865(0x264)]);if(this[_0x4a5865(0x294)])this['ltmJob'][_0x4a5865(0x1b8)]();if(this[_0x4a5865(0x165)])this[_0x4a5865(0x165)][_0x4a5865(0x1b8)]();if(this[_0x4a5865(0x146)])this[_0x4a5865(0x146)][_0x4a5865(0x1b8)]();if(this[_0x4a5865(0x1b1)])clearTimeout(this[_0x4a5865(0x1b1)]);if(this[_0x4a5865(0x240)])clearTimeout(this['exitGraceTimer']);stopPythonService(this),_0x3ec6d0();}async[a0_0x4b0479(0x15d)](_0x5bf57f,_0x5a2593){const _0x3e877f=a0_0x4b0479;if(!_0x5a2593||this[_0x3e877f(0x1f2)])return;if(_0x5bf57f[_0x3e877f(0x272)](_0x3e877f(0x1e8))&&_0x5bf57f[_0x3e877f(0x230)](_0x3e877f(0x1bd))&&_0x5a2593[_0x3e877f(0x262)]){await handleTelegramResponse(this,_0x5a2593[_0x3e877f(0x262)]);return;}if(_0x5bf57f===this[_0x3e877f(0x1f4)]+'.'+SYSTEM_DP_MODE){if(_0x5a2593[_0x3e877f(0x262)]&&Object[_0x3e877f(0x127)](SYSTEM_MODES)[_0x3e877f(0x272)](_0x5a2593[_0x3e877f(0x262)])){this[_0x3e877f(0x148)]=_0x5a2593[_0x3e877f(0x262)];if(_0x5a2593[_0x3e877f(0x262)]===SYSTEM_MODES['VACATION'])await setPresence(this,![]);else await setPresence(this,!![]);}if(!_0x5a2593[_0x3e877f(0x1a7)])this[_0x3e877f(0x26f)](_0x5bf57f,{'val':this[_0x3e877f(0x148)],'ack':!![]});return;}if(!_0x5a2593[_0x3e877f(0x1a7)]){_0x5bf57f[_0x3e877f(0x272)](_0x3e877f(0x1f9))&&_0x5a2593['val']&&(this['setState'](_0x5bf57f,{'val':![],'ack':!![]}),runGeminiAnalysis(this));if(_0x5bf57f[_0x3e877f(0x272)](_0x3e877f(0x102))&&_0x5a2593[_0x3e877f(0x262)]){this[_0x3e877f(0x26f)](_0x5bf57f,{'val':![],'ack':!![]});if(this[_0x3e877f(0x1f0)])createDailyDigest(this);}_0x5bf57f['includes'](_0x3e877f(0x224))&&_0x5a2593[_0x3e877f(0x262)]&&(this['setState'](_0x5bf57f,{'val':![],'ack':!![]}),sendMorningBriefing(this));_0x5bf57f[_0x3e877f(0x272)](_0x3e877f(0x243))&&_0x5a2593['val']&&(this['setState'](_0x5bf57f,{'val':![],'ack':!![]}),executeAutomationAction(this));if(_0x5bf57f['includes'](_0x3e877f(0x12c))&&_0x5a2593[_0x3e877f(0x262)]){this[_0x3e877f(0x26f)](_0x5bf57f,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x2f9807=await this[_0x3e877f(0x216)](_0x3e877f(0x126));if(_0x2f9807&&_0x2f9807[_0x3e877f(0x262)]){const _0x494299=JSON['parse'](_0x2f9807[_0x3e877f(0x262)]);this[_0x3e877f(0x278)][_0x3e877f(0x1ce)]('üß†\x20Triggering\x20Security\x20Training...'),this[_0x3e877f(0x11b)](_0x3e877f(0x1d6),{'val':_0x3e877f(0x1de),'ack':!![]}),sendToPython(this,'TRAIN_SECURITY',{'sequences':_0x494299});}}catch(_0x258700){this['log'][_0x3e877f(0x298)](_0x3e877f(0x24a)+_0x258700[_0x3e877f(0x20a)]);}}if(_0x5bf57f[_0x3e877f(0x272)]('analysis.training.triggerHealth')&&_0x5a2593['val']){this[_0x3e877f(0x26f)](_0x5bf57f,{'val':![],'ack':!![]});if(this[_0x3e877f(0x1f0)])try{const _0x4b2b00=await this[_0x3e877f(0x216)](LTM_DP_DAILY_DIGESTS);if(_0x4b2b00&&_0x4b2b00[_0x3e877f(0x262)])sendToPython(this,_0x3e877f(0x28a),{'digests':JSON[_0x3e877f(0x285)](_0x4b2b00['val'])});}catch(_0x2e9773){}}if(_0x5bf57f[_0x3e877f(0x272)](_0x3e877f(0x29b))&&_0x5a2593[_0x3e877f(0x262)]){this[_0x3e877f(0x26f)](_0x5bf57f,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x55e188=await this[_0x3e877f(0x216)](_0x3e877f(0x19a));if(_0x55e188&&_0x55e188[_0x3e877f(0x262)])sendToPython(this,_0x3e877f(0x296),{'points':JSON[_0x3e877f(0x285)](_0x55e188[_0x3e877f(0x262)])});}catch(_0x5155af){}}if(_0x5bf57f['includes'](_0x3e877f(0x1b9))&&_0x5a2593[_0x3e877f(0x262)]){this[_0x3e877f(0x26f)](_0x5bf57f,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x42f4f1=await this[_0x3e877f(0x216)](LTM_DP_RAW_LOG);_0x42f4f1&&_0x42f4f1[_0x3e877f(0x262)]&&(this[_0x3e877f(0x278)]['info']('üõãÔ∏è\x20Triggering\x20Comfort\x20Analysis\x20(Pattern\x20Mining)...'),sendToPython(this,_0x3e877f(0x1b7),{'events':JSON[_0x3e877f(0x285)](_0x42f4f1['val'])}));}catch(_0x12fec1){}}if(_0x5bf57f['includes'](_0x3e877f(0x20f))&&_0x5a2593[_0x3e877f(0x262)]){this[_0x3e877f(0x26f)](_0x5bf57f,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x1b9e22=await this['getStateAsync']('LTM.trainingData.sequences');if(_0x1b9e22&&_0x1b9e22[_0x3e877f(0x262)]){const _0x2e2246=JSON[_0x3e877f(0x285)](_0x1b9e22['val']);this[_0x3e877f(0x278)][_0x3e877f(0x1ce)](_0x3e877f(0x265)),sendToPython(this,_0x3e877f(0x1b2),{'sequences':_0x2e2246});}}catch(_0x19afdd){this[_0x3e877f(0x278)][_0x3e877f(0x298)](_0x3e877f(0xfb)+_0x19afdd[_0x3e877f(0x20a)]);}}return;}if(this[_0x3e877f(0x1d3)][_0x3e877f(0x1a0)]&&this[_0x3e877f(0x1d3)][_0x3e877f(0x1a0)][_0x3e877f(0x272)](_0x5bf57f)){await checkWifiPresence(this);return;}const _0x461e9a=(this['config'][_0x3e877f(0x28b)]||[])[_0x3e877f(0x1cb)](_0x294678=>_0x294678['id']===_0x5bf57f);if(_0x461e9a)processSensorEvent(this,_0x5bf57f,_0x5a2593,_0x461e9a);}async[a0_0x4b0479(0x1ef)](_0xdb7f4c){const _0x2f88c8=a0_0x4b0479;if(typeof _0xdb7f4c===_0x2f88c8(0x23d)&&_0xdb7f4c['message']){if(_0xdb7f4c[_0x2f88c8(0x1c5)]===_0x2f88c8(0x1c3)){const _0x5151a0=_0xdb7f4c['message'][_0x2f88c8(0x162)]||this[_0x2f88c8(0x1d3)][_0x2f88c8(0x1e9)];if(!_0x5151a0)return this[_0x2f88c8(0x22f)](_0xdb7f4c[_0x2f88c8(0x255)],_0xdb7f4c[_0x2f88c8(0x1c5)],{'success':![],'message':_0x2f88c8(0x1cd)},_0xdb7f4c['callback']);try{const _0x3eb7d9=new GoogleGenerativeAI(_0x5151a0),_0x40869a=_0x3eb7d9[_0x2f88c8(0x19e)]({'model':GEMINI_MODEL}),_0x25bec7=await _0x40869a[_0x2f88c8(0x18f)]('Hi');this[_0x2f88c8(0x22f)](_0xdb7f4c[_0x2f88c8(0x255)],_0xdb7f4c[_0x2f88c8(0x1c5)],{'success':!![],'message':_0x2f88c8(0x14e)+_0x25bec7[_0x2f88c8(0x15c)][_0x2f88c8(0x211)]()},_0xdb7f4c[_0x2f88c8(0x120)]);}catch(_0x382e6b){this[_0x2f88c8(0x22f)](_0xdb7f4c[_0x2f88c8(0x255)],_0xdb7f4c[_0x2f88c8(0x1c5)],{'success':![],'message':_0x2f88c8(0x119)+_0x382e6b[_0x2f88c8(0x20a)]},_0xdb7f4c[_0x2f88c8(0x120)]);}}else{if(_0xdb7f4c[_0x2f88c8(0x1c5)]===_0x2f88c8(0x16c)){const _0x12cdd9=await getWeatherContext(this),_0x59ffab=await getCalendarContext(this);this[_0x2f88c8(0x22f)](_0xdb7f4c[_0x2f88c8(0x255)],_0xdb7f4c[_0x2f88c8(0x1c5)],{'success':!![],'weather':_0x12cdd9,'calendar':_0x59ffab},_0xdb7f4c[_0x2f88c8(0x120)]);}else{if(_0xdb7f4c['command']===_0x2f88c8(0xf5)){if(!this[_0x2f88c8(0x1f0)])return this[_0x2f88c8(0x22f)](_0xdb7f4c[_0x2f88c8(0x255)],_0xdb7f4c['command'],{'success':![],'isPro':![]},_0xdb7f4c[_0x2f88c8(0x120)]);let _0x35c311={'status':_0x2f88c8(0x26b)};try{const _0x5f40eb=await this[_0x2f88c8(0x216)](LTM_DP_DRIFT_STATUS);_0x35c311[_0x2f88c8(0x13f)]=_0x5f40eb?_0x5f40eb['val']:_0x2f88c8(0x26b);}catch(_0x58dfde){}this['sendTo'](_0xdb7f4c[_0x2f88c8(0x255)],_0xdb7f4c[_0x2f88c8(0x1c5)],{'success':!![],'isPro':!![],'dailyDigests':this['dailyDigests'],'driftAnalysis':_0x35c311,'analysisHistory':this['analysisHistory']},_0xdb7f4c[_0x2f88c8(0x120)]);}else{if(_0xdb7f4c[_0x2f88c8(0x1c5)]===_0x2f88c8(0x292)){const _0x17a6e0=this[_0x2f88c8(0x113)]['length'],_0x52aea2=new Date(),_0x51cdc1=new Date(_0x52aea2[_0x2f88c8(0x1ae)](),_0x52aea2['getMonth'](),_0x52aea2[_0x2f88c8(0xff)]())[_0x2f88c8(0x20e)](),_0x43e8e5=this[_0x2f88c8(0x158)][_0x2f88c8(0x229)](_0x2c438e=>new Date(_0x2c438e[_0x2f88c8(0x209)])[_0x2f88c8(0x20e)]()>_0x51cdc1)[_0x2f88c8(0x12a)],_0x3eafb0=new Array(0x18)[_0x2f88c8(0x1d5)](0x0);this['rawEventLog'][_0x2f88c8(0x260)](_0x56b6fc=>{const _0x252191=_0x2f88c8,_0x2a8b03=new Date(_0x56b6fc[_0x252191(0x209)]);if(_0x2a8b03[_0x252191(0x20e)]()>_0x51cdc1)_0x3eafb0[_0x2a8b03['getHours']()]++;});let _0x227ec2={'status':_0x2f88c8(0x26b)};try{const _0x66c66f=await this[_0x2f88c8(0x216)](LTM_DP_DRIFT_STATUS);_0x227ec2['status']=_0x66c66f?_0x66c66f['val']:'N/A';}catch(_0x1cddcc){}let _0x509f23='';try{const _0x3e1a55=await this[_0x2f88c8(0x216)](_0x2f88c8(0x14a));_0x509f23=_0x3e1a55?_0x3e1a55[_0x2f88c8(0x262)]:'';}catch(_0x500bed){}let _0x4e9162=null;!this['geminiModel']&&(_0x4e9162=this[_0x2f88c8(0x1d3)][_0x2f88c8(0x1e9)]?_0x2f88c8(0x124):_0x2f88c8(0x223));let _0x49f0cc={'detected':![],'description':'','targetId':'','targetValue':'','autoApply':![]};try{const _0x33bb2c=await this[_0x2f88c8(0x216)](_0x2f88c8(0x208));if(_0x33bb2c&&_0x33bb2c[_0x2f88c8(0x262)]){_0x49f0cc[_0x2f88c8(0x1ad)]=!![];const _0x43a0a2=await this[_0x2f88c8(0x216)]('analysis.automation.description');_0x49f0cc[_0x2f88c8(0x136)]=_0x43a0a2?_0x43a0a2[_0x2f88c8(0x262)]:'';const _0x73e31e=await this[_0x2f88c8(0x216)]('analysis.automation.targetId');_0x49f0cc['targetId']=_0x73e31e?_0x73e31e[_0x2f88c8(0x262)]:'';const _0x50ffe1=await this[_0x2f88c8(0x216)](_0x2f88c8(0x168));_0x49f0cc[_0x2f88c8(0x277)]=_0x50ffe1?_0x50ffe1['val']:'';}const _0x12f1c8=await this[_0x2f88c8(0x216)]('analysis.automation.autoApply');_0x49f0cc[_0x2f88c8(0x166)]=_0x12f1c8?!!_0x12f1c8['val']:![];}catch(_0x561243){}this[_0x2f88c8(0x22f)](_0xdb7f4c[_0x2f88c8(0x255)],_0xdb7f4c['command'],{'success':!![],'eventHistory':this[_0x2f88c8(0x234)][_0x2f88c8(0x1e3)](0x0,0xf),'stats':{'digestCount':_0x17a6e0,'eventCountToday':_0x43e8e5,'hourlyActivity':_0x3eafb0,'driftStatus':_0x227ec2[_0x2f88c8(0x13f)],'isPresent':this['isPresent'],'presenceWho':_0x509f23,'minDays':this['config']['minDaysForBaseline']||0x7,'stbDays':this['config'][_0x2f88c8(0x167)]||0xe,'ltbDays':this['config']['ltmLtbWindowDays']||0x3c,'systemError':_0x4e9162},'automation':_0x49f0cc},_0xdb7f4c[_0x2f88c8(0x120)]);}else{if(_0xdb7f4c[_0x2f88c8(0x1c5)]==='scanDevices')try{const _0x2218a9=await scanner[_0x2f88c8(0x105)](this,_0xdb7f4c['message']||{});this[_0x2f88c8(0x22f)](_0xdb7f4c[_0x2f88c8(0x255)],_0xdb7f4c[_0x2f88c8(0x1c5)],{'success':!![],'devices':_0x2218a9},_0xdb7f4c['callback']);}catch(_0x34cc81){this['sendTo'](_0xdb7f4c[_0x2f88c8(0x255)],_0xdb7f4c[_0x2f88c8(0x1c5)],{'success':![],'error':_0x34cc81[_0x2f88c8(0x20a)]},_0xdb7f4c[_0x2f88c8(0x120)]);}else{if(_0xdb7f4c[_0x2f88c8(0x1c5)]===_0x2f88c8(0x17d)){const _0x4dfab6=await this[_0x2f88c8(0xfa)]('enum.functions.*',_0x2f88c8(0x266)),_0x30bc25=[];if(_0x4dfab6)for(const _0x3a54df in _0x4dfab6){const _0x132a06=_0x4dfab6[_0x3a54df],_0x354cc5=(_0x132a06[_0x2f88c8(0x297)]&&typeof _0x132a06['common'][_0x2f88c8(0x11a)]==='object'?_0x132a06['common'][_0x2f88c8(0x11a)]['de']:_0x132a06[_0x2f88c8(0x297)][_0x2f88c8(0x11a)])||_0x132a06[_0x2f88c8(0x297)][_0x2f88c8(0x11a)];_0x30bc25[_0x2f88c8(0x1af)]({'id':_0x3a54df,'name':_0x354cc5});}const _0x46d7f2=await this['getForeignObjectsAsync'](_0x2f88c8(0x18c),'enum'),_0x1e8046=[];if(_0x46d7f2)for(const _0x6e9e4d in _0x46d7f2){const _0x28b630=_0x46d7f2[_0x6e9e4d],_0x5ef6ea=(_0x28b630['common']&&typeof _0x28b630[_0x2f88c8(0x297)][_0x2f88c8(0x11a)]===_0x2f88c8(0x23d)?_0x28b630[_0x2f88c8(0x297)][_0x2f88c8(0x11a)]['de']:_0x28b630[_0x2f88c8(0x297)]['name'])||_0x6e9e4d[_0x2f88c8(0x130)]('.')[_0x2f88c8(0x242)]();_0x1e8046[_0x2f88c8(0x1af)](_0x5ef6ea);}this[_0x2f88c8(0x22f)](_0xdb7f4c[_0x2f88c8(0x255)],_0xdb7f4c[_0x2f88c8(0x1c5)],{'success':!![],'enums':_0x30bc25,'rooms':_0x1e8046},_0xdb7f4c[_0x2f88c8(0x120)]);}else{if(_0xdb7f4c['command']===_0x2f88c8(0x206)){const _0xaabc2f=_0xdb7f4c[_0x2f88c8(0x20a)]['instance'];if(!_0xaabc2f)return this['sendTo'](_0xdb7f4c[_0x2f88c8(0x255)],_0xdb7f4c[_0x2f88c8(0x1c5)],{'success':![],'error':_0x2f88c8(0x10b)},_0xdb7f4c['callback']);const _0x2d1d19=await getCalendarNames(this,_0xaabc2f);this[_0x2f88c8(0x22f)](_0xdb7f4c[_0x2f88c8(0x255)],_0xdb7f4c[_0x2f88c8(0x1c5)],{'success':!![],'names':_0x2d1d19},_0xdb7f4c[_0x2f88c8(0x120)]);}else{if(_0xdb7f4c[_0x2f88c8(0x1c5)]===_0x2f88c8(0x204)){const {targetId:_0xcf8762,targetValue:_0x323e3a}=_0xdb7f4c[_0x2f88c8(0x20a)];this[_0x2f88c8(0x278)][_0x2f88c8(0x1ce)](_0x2f88c8(0x122)+_0xcf8762+_0x2f88c8(0x22d)+_0x323e3a),await this[_0x2f88c8(0x11b)](_0x2f88c8(0x208),{'val':!![],'ack':!![]}),await this[_0x2f88c8(0x11b)](_0x2f88c8(0x267),{'val':_0x2f88c8(0x1c8)+_0xcf8762,'ack':!![]}),await this[_0x2f88c8(0x11b)](_0x2f88c8(0x194),{'val':_0xcf8762,'ack':!![]}),await this[_0x2f88c8(0x11b)](_0x2f88c8(0x168),{'val':_0x323e3a,'ack':!![]}),this['sendTo'](_0xdb7f4c[_0x2f88c8(0x255)],_0xdb7f4c[_0x2f88c8(0x1c5)],{'success':!![]},_0xdb7f4c[_0x2f88c8(0x120)]);}else{if(_0xdb7f4c[_0x2f88c8(0x1c5)]===_0x2f88c8(0x131)){const {historyId:_0x4ac566,rating:_0x3d9508,comment:_0x3d6b30,alertReason:_0x429f60}=_0xdb7f4c[_0x2f88c8(0x20a)];_0x4ac566&&_0x3d9508?(await saveFeedback(this,{'timestamp':Date[_0x2f88c8(0x160)](),'historyId':_0x4ac566,'rating':_0x3d9508,'comment':_0x3d6b30,'alertReason':_0x429f60}),this['sendTo'](_0xdb7f4c['from'],_0xdb7f4c[_0x2f88c8(0x1c5)],{'success':!![]},_0xdb7f4c['callback'])):this[_0x2f88c8(0x22f)](_0xdb7f4c[_0x2f88c8(0x255)],_0xdb7f4c[_0x2f88c8(0x1c5)],{'success':![],'error':_0x2f88c8(0x15a)},_0xdb7f4c[_0x2f88c8(0x120)]);}else _0xdb7f4c[_0x2f88c8(0x1c5)]===_0x2f88c8(0x205)&&(this[_0x2f88c8(0x278)][_0x2f88c8(0x1ce)](_0x2f88c8(0x14d)),await this['setStateAsync']('analysis.automation.patternDetected',{'val':![],'ack':!![]}),await this[_0x2f88c8(0x11b)](_0x2f88c8(0x267),{'val':'','ack':!![]}),this[_0x2f88c8(0x22f)](_0xdb7f4c[_0x2f88c8(0x255)],_0xdb7f4c['command'],{'success':!![]},_0xdb7f4c[_0x2f88c8(0x120)]));}}}}}}}}}}}function a0_0x4c93(_0x29e703,_0x4649bf){const _0x572137=a0_0x3f7e();return a0_0x4c93=function(_0x2bd65b,_0x494829){_0x2bd65b=_0x2bd65b-0xf5;let _0x3f7e29=_0x572137[_0x2bd65b];return _0x3f7e29;},a0_0x4c93(_0x29e703,_0x4649bf);}if(require[a0_0x4b0479(0x134)]!==module)module[a0_0x4b0479(0x221)]=_0x3af599=>new CogniLiving(_0x3af599);else new CogniLiving();