const a0_0x42d763=a0_0x2bce;function a0_0x1410(){const _0x191d13=['apply','Adapter','WiFi\x20Presence\x20detected.','.system.mode','./lib/topology','geminiModel','updated','info','analysisInterval','timestamp','12YFLWsQ','enum','updateTopology','getForeignObjectsAsync','TRAIN_ENERGY','updateHealthVector','bind','18539510OAfZqX','setupBriefingScheduler','rawEventLog','subscribeForeignStatesAsync','./lib/recorder','loadSystemMode','isPresent','temperature','4378290RpioUP','join','./lib/setup','3039659rxyTSV','Activity-Level','notifyTelegramInstance','analysis.training.status','runAutopilot','LTM.rawEventLog','checkWifiPresence','getState','initHistory','analysis.training.triggerHealth','constructor','isProVersion','inactivityThresholdHours','LTM.dailyDigests','abortExitTimer','ANALYZE_TREND','getMinutes','main','minDaysForBaseline','SYSTEM_DP_MODE','slice','./lib/scanner','ready','geminiApiKey','getGenerativeModel','analysis.topology.structure','ANALYZE_GAIT','triggerGaitAnalysis','exports','cancel','@google/generative-ai','SYSTEM_MODES','@iobroker/adapter-core','dependencyInstallInProgress','cogni-living','LTM.baselineStatus','initSystemConfig','getOverviewData','eventHistory','TRAIN_SECURITY','./lib/python_bridge','4htpPCZ','send','devices','1869015FdZtLC','licenseKey','config','common','Aktiv\x20(','setStateAsync','application/json','command','onMessage','subscribeStates','lastAlertState','1GIuKwE','283694bisRWr','getStateAsync','scanDevices','./lib/installer','triggerEnergyPrediction','1397313USLwnH','24BXqlDD','.communicate.request','type','analysis.training.triggerSecurity','parse','onReady','briefingJob','telegram','system.presenceWho','startSystem','keys','(((.+)+)+)+$','analysis.training.triggerTopology','updateTopologyMatrix','val','getHours','analysis.triggerBriefing','sendMorningBriefing','executeAutomationAction','enum.rooms.*','runPythonHealthCheck','cogni-living\x20adapter\x20starting\x20(v','log','includes','automation.triggerAction','endsWith','models/gemini-flash-latest','exitTimer','fill','presenceDevices','scanForDevices','processSensorEvent','callback','LTM.triggerDailyDigest','notifyTelegramEnabled','analysis.training.triggerEnergy','system.mode','from','currentSystemMode','stateChange','testApiKey','analysis.training.triggerComfort','ðŸ›‹ï¸\x20Triggering\x20Comfort\x20Analysis\x20(Pattern\x20Mining)...','triggerBriefing','checkAndInstall','pop','analysisTimer','setState','getOutsideTemperatureNumeric','push','NORMAL','initZombies','Training\x20Error:\x20','activityLevel','setupModeResetScheduler','runGeminiAnalysis','modeResetJob',')\x20-\x20Phase\x20C\x20(Dead\x20Man\x20Switch)','length','message','sensorLastValues','setPresence','analysis.trigger','ðŸ•¸ï¸\x20Topology\x20Graph\x20manually\x20updated\x20by\x20user.','sendTo','analysis.automation.triggerAction','updateLocation','setHours','Lernphase\x20(','createAllObjects','split','namespace','object','systemConfig','map','LTM.trainingData.thermodynamics','startService','stopService','driftAnalysisTimer','Sec-Training\x20started...','checkLicense','error','location','toString','runBaselineDriftAnalysis','unload','search','forEach','ack','LTM.trainingData.sequences','triggerDailyDigest','dailyDigests','5310UNfzvi','getEnums','Gemini\x20Init\x20Error:\x20','ðŸ•¸ï¸\x20Manually\x20triggering\x20Topology\x20Update...','ltmJob','stringify','genAI','motion','./lib/scheduler','communicate.request','analysis.health.todayVector','onStateChange','SET_TOPOLOGY','values','name'];a0_0x1410=function(){return _0x191d13;};return a0_0x1410();}(function(_0x322a0b,_0x86acaf){const _0x2f3d0c=a0_0x2bce,_0x468c48=_0x322a0b();while(!![]){try{const _0x582110=parseInt(_0x2f3d0c(0x261))/0x1*(-parseInt(_0x2f3d0c(0x262))/0x2)+-parseInt(_0x2f3d0c(0x227))/0x3*(parseInt(_0x2f3d0c(0x253))/0x4)+parseInt(_0x2f3d0c(0x256))/0x5*(parseInt(_0x2f3d0c(0x218))/0x6)+parseInt(_0x2f3d0c(0x22a))/0x7+parseInt(_0x2f3d0c(0x268))/0x8*(-parseInt(_0x2f3d0c(0x267))/0x9)+parseInt(_0x2f3d0c(0x1ff))/0xa+parseInt(_0x2f3d0c(0x21f))/0xb;if(_0x582110===_0x86acaf)break;else _0x468c48['push'](_0x468c48['shift']());}catch(_0x57ae75){_0x468c48['push'](_0x468c48['shift']());}}}(a0_0x1410,0xc37e0));const a0_0x183007=(function(){let _0x1f7d6b=!![];return function(_0x2a1320,_0x22f7df){const _0x4a2e37=_0x1f7d6b?function(){const _0x21e73e=a0_0x2bce;if(_0x22f7df){const _0x295bf3=_0x22f7df[_0x21e73e(0x20e)](_0x2a1320,arguments);return _0x22f7df=null,_0x295bf3;}}:function(){};return _0x1f7d6b=![],_0x4a2e37;};}()),a0_0x343cdd=a0_0x183007(this,function(){const _0xd0ac77=a0_0x2bce;return a0_0x343cdd[_0xd0ac77(0x1f6)]()[_0xd0ac77(0x1f9)](_0xd0ac77(0x273))['toString']()[_0xd0ac77(0x234)](a0_0x343cdd)['search']('(((.+)+)+)+$');});a0_0x343cdd();function a0_0x2bce(_0x457d0e,_0x141157){const _0x2665f2=a0_0x1410();return a0_0x2bce=function(_0x343cdd,_0x183007){_0x343cdd=_0x343cdd-0x1df;let _0x141011=_0x2665f2[_0x343cdd];return _0x141011;},a0_0x2bce(_0x457d0e,_0x141157);}'use strict';const utils=require(a0_0x42d763(0x24a)),{GoogleGenerativeAI}=require(a0_0x42d763(0x248)),installer=require(a0_0x42d763(0x265)),scanner=require(a0_0x42d763(0x23f)),schedulers=require(a0_0x42d763(0x207)),topology=require(a0_0x42d763(0x212)),setup=require(a0_0x42d763(0x229)),recorder=require(a0_0x42d763(0x223)),pythonBridge=require(a0_0x42d763(0x252)),aiAgent=require('./lib/ai_agent'),deadMan=require('./lib/dead_man'),GEMINI_MODEL=a0_0x42d763(0x282),ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};class CogniLiving extends utils[a0_0x42d763(0x20f)]{constructor(_0x5a5c35){const _0x46f4bb=a0_0x42d763;super({..._0x5a5c35,'name':_0x46f4bb(0x24c)}),this[_0x46f4bb(0x250)]=[],this['analysisHistory']=[],this[_0x46f4bb(0x221)]=[],this[_0x46f4bb(0x1fe)]=[],this[_0x46f4bb(0x1df)]={},this[_0x46f4bb(0x1ec)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x46f4bb(0x225)]=!![],this[_0x46f4bb(0x283)]=null,this['exitGraceTimer']=null,this['isGracePeriodActive']=![],this[_0x46f4bb(0x205)]=null,this[_0x46f4bb(0x213)]=null,this[_0x46f4bb(0x28e)]=setup[_0x46f4bb(0x249)][_0x46f4bb(0x29a)],this[_0x46f4bb(0x235)]=![],this[_0x46f4bb(0x260)]=![],this[_0x46f4bb(0x296)]=null,this[_0x46f4bb(0x203)]=null,this['modeResetJob']=null,this[_0x46f4bb(0x1f1)]=null,this['briefingJob']=null,this[_0x46f4bb(0x24b)]=![],this['on'](_0x46f4bb(0x240),this[_0x46f4bb(0x26d)][_0x46f4bb(0x21e)](this)),this['on'](_0x46f4bb(0x28f),this[_0x46f4bb(0x20a)]['bind'](this)),this['on'](_0x46f4bb(0x1f8),this['onUnload'][_0x46f4bb(0x21e)](this)),this['on'](_0x46f4bb(0x2a3),this[_0x46f4bb(0x25e)]['bind'](this));}async['onReady'](){const _0x5ee430=a0_0x42d763;this[_0x5ee430(0x27e)][_0x5ee430(0x215)](_0x5ee430(0x27d)+this['version']+_0x5ee430(0x2a1));if(!installer[_0x5ee430(0x294)](this,()=>this[_0x5ee430(0x271)]()))return;}async[a0_0x42d763(0x271)](){const _0x1700f9=a0_0x42d763;await setup[_0x1700f9(0x29b)](this);try{this[_0x1700f9(0x235)]=await setup[_0x1700f9(0x1f3)](this['config'][_0x1700f9(0x257)]);}catch(_0x1b779f){}if(!this[_0x1700f9(0x258)][_0x1700f9(0x236)]||this[_0x1700f9(0x258)][_0x1700f9(0x236)]<0.1)this[_0x1700f9(0x258)][_0x1700f9(0x236)]=0xc;await setup[_0x1700f9(0x232)](this),await setup[_0x1700f9(0x24e)](this);if(this[_0x1700f9(0x258)]['geminiApiKey'])try{this[_0x1700f9(0x205)]=new GoogleGenerativeAI(this[_0x1700f9(0x258)][_0x1700f9(0x241)]),this[_0x1700f9(0x213)]=this[_0x1700f9(0x205)][_0x1700f9(0x242)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x1700f9(0x25c)}}),this[_0x1700f9(0x27e)][_0x1700f9(0x215)]('Gemini\x20AI\x20initialized.');}catch(_0x46033e){this[_0x1700f9(0x27e)][_0x1700f9(0x1f4)](_0x1700f9(0x201)+_0x46033e[_0x1700f9(0x2a3)]);}await setup[_0x1700f9(0x1e8)](this),await this[_0x1700f9(0x224)]();try{const _0x450e81=await this['getStateAsync'](_0x1700f9(0x22f));if(_0x450e81&&_0x450e81[_0x1700f9(0x276)])this[_0x1700f9(0x221)]=JSON[_0x1700f9(0x26c)](_0x450e81[_0x1700f9(0x276)]);}catch(_0xe526bf){this[_0x1700f9(0x221)]=[];}try{const _0x52e6b7=await this[_0x1700f9(0x263)](_0x1700f9(0x237));if(_0x52e6b7&&_0x52e6b7[_0x1700f9(0x276)])this[_0x1700f9(0x1fe)]=JSON[_0x1700f9(0x26c)](_0x52e6b7[_0x1700f9(0x276)]);}catch(_0x52148d){this[_0x1700f9(0x1fe)]=[];}const _0x597f6e=this[_0x1700f9(0x1fe)][_0x1700f9(0x2a2)]>=(this[_0x1700f9(0x258)][_0x1700f9(0x23c)]||0x7)?_0x1700f9(0x25a)+this[_0x1700f9(0x1fe)]['length']+'\x20Tage)':_0x1700f9(0x1e7)+this[_0x1700f9(0x1fe)][_0x1700f9(0x2a2)]+'/'+(this[_0x1700f9(0x258)][_0x1700f9(0x23c)]||0x7)+')';await this[_0x1700f9(0x25b)](_0x1700f9(0x24d),{'val':_0x597f6e,'ack':!![]}),this[_0x1700f9(0x25f)](_0x1700f9(0x1e1)),this[_0x1700f9(0x25f)](_0x1700f9(0x289)),this[_0x1700f9(0x25f)](_0x1700f9(0x28c)),this[_0x1700f9(0x25f)](_0x1700f9(0x278)),this[_0x1700f9(0x25f)](_0x1700f9(0x1e4)),this[_0x1700f9(0x25f)]('analysis.automation.autoApply'),this[_0x1700f9(0x25f)](_0x1700f9(0x26b)),this['subscribeStates'](_0x1700f9(0x233)),this[_0x1700f9(0x25f)](_0x1700f9(0x28b)),this[_0x1700f9(0x25f)](_0x1700f9(0x291)),this[_0x1700f9(0x25f)](_0x1700f9(0x274));const _0x53b7c4=this[_0x1700f9(0x258)][_0x1700f9(0x255)];if(_0x53b7c4)for(const _0x59a4e4 of _0x53b7c4){await this[_0x1700f9(0x222)](_0x59a4e4['id']);}const _0x36b800=this[_0x1700f9(0x258)][_0x1700f9(0x285)];if(_0x36b800)for(const _0x318c64 of _0x36b800){await this[_0x1700f9(0x222)](_0x318c64);}if(this['config'][_0x1700f9(0x28a)]&&this[_0x1700f9(0x258)][_0x1700f9(0x22c)])await this['subscribeForeignStatesAsync'](this[_0x1700f9(0x258)][_0x1700f9(0x22c)]+_0x1700f9(0x269));setTimeout(()=>this[_0x1700f9(0x230)](),0x1388);if(this[_0x1700f9(0x296)])clearInterval(this[_0x1700f9(0x296)]);const _0x5bb366=this[_0x1700f9(0x258)][_0x1700f9(0x216)]||0xf;_0x5bb366>0x0&&(this['analysisTimer']=setInterval(()=>{const _0x3850ab=_0x1700f9;this[_0x3850ab(0x22e)]();},_0x5bb366*0x3c*0x3e8)),schedulers['setupLtmScheduler'](this,()=>aiAgent['createDailyDigest'](this,pythonBridge)),schedulers[_0x1700f9(0x29e)](this),schedulers['setupDriftAnalysisScheduler'](this,()=>aiAgent[_0x1700f9(0x1f7)](this)),schedulers[_0x1700f9(0x220)](this,()=>aiAgent[_0x1700f9(0x279)](this)),pythonBridge[_0x1700f9(0x1ef)](this,installer['PYTHON_EXE']),setTimeout(async()=>{const _0xcabd42=_0x1700f9;await topology[_0xcabd42(0x21a)](this);try{const _0x34a098=await this[_0xcabd42(0x263)](_0xcabd42(0x243));if(_0x34a098&&_0x34a098['val'])pythonBridge[_0xcabd42(0x254)](this,_0xcabd42(0x20b),JSON[_0xcabd42(0x26c)](_0x34a098[_0xcabd42(0x276)]));}catch(_0x31cd1f){}this[_0xcabd42(0x27c)](),this['triggerGaitAnalysis'](),this['triggerEnergyPrediction'](),this['updateHealthVector']();},0x1388);}['onUnload'](_0x2ea809){const _0x4a1f93=a0_0x42d763;if(this['analysisTimer'])clearInterval(this[_0x4a1f93(0x296)]);if(this['driftAnalysisTimer'])clearInterval(this[_0x4a1f93(0x1f1)]);if(this[_0x4a1f93(0x203)])this[_0x4a1f93(0x203)][_0x4a1f93(0x247)]();if(this[_0x4a1f93(0x2a0)])this[_0x4a1f93(0x2a0)][_0x4a1f93(0x247)]();if(this[_0x4a1f93(0x26e)])this[_0x4a1f93(0x26e)]['cancel']();recorder[_0x4a1f93(0x238)](this),pythonBridge[_0x4a1f93(0x1f0)](this),_0x2ea809();}async[a0_0x42d763(0x20a)](_0x2cdf28,_0x68b071){const _0x351eca=a0_0x42d763;if(!_0x68b071||this[_0x351eca(0x24b)])return;if(_0x2cdf28[_0x351eca(0x27f)](_0x351eca(0x26f))&&_0x2cdf28[_0x351eca(0x281)](_0x351eca(0x208))&&_0x68b071['val'])return;if(_0x2cdf28===this[_0x351eca(0x1ea)]+_0x351eca(0x211)){if(_0x68b071['val']&&Object[_0x351eca(0x20c)](setup[_0x351eca(0x249)])['includes'](_0x68b071[_0x351eca(0x276)])){this['currentSystemMode']=_0x68b071[_0x351eca(0x276)];if(_0x68b071[_0x351eca(0x276)]===setup['SYSTEM_MODES']['VACATION'])await recorder['setPresence'](this,![]);else await recorder[_0x351eca(0x1e0)](this,!![]);}if(!_0x68b071[_0x351eca(0x1fb)])this[_0x351eca(0x297)](_0x2cdf28,{'val':this[_0x351eca(0x28e)],'ack':!![]});return;}if(!_0x68b071[_0x351eca(0x1fb)]){_0x2cdf28[_0x351eca(0x27f)](_0x351eca(0x1e1))&&_0x68b071[_0x351eca(0x276)]&&(this[_0x351eca(0x297)](_0x2cdf28,{'val':![],'ack':!![]}),aiAgent['runGeminiAnalysis'](this));if(_0x2cdf28['includes'](_0x351eca(0x1fd))&&_0x68b071[_0x351eca(0x276)]){this['setState'](_0x2cdf28,{'val':![],'ack':!![]});if(this[_0x351eca(0x235)])aiAgent['createDailyDigest'](this,pythonBridge);}_0x2cdf28['includes'](_0x351eca(0x293))&&_0x68b071[_0x351eca(0x276)]&&(this['setState'](_0x2cdf28,{'val':![],'ack':!![]}),aiAgent['sendMorningBriefing'](this));_0x2cdf28['includes'](_0x351eca(0x280))&&_0x68b071[_0x351eca(0x276)]&&(this[_0x351eca(0x297)](_0x2cdf28,{'val':![],'ack':!![]}),aiAgent[_0x351eca(0x27a)](this));if(_0x2cdf28[_0x351eca(0x27f)](_0x351eca(0x26b))&&_0x68b071[_0x351eca(0x276)]){this[_0x351eca(0x297)](_0x2cdf28,{'val':![],'ack':!![]});if(this[_0x351eca(0x235)])try{const _0x38b73c=await this['getStateAsync'](_0x351eca(0x1fc));if(_0x38b73c&&_0x38b73c[_0x351eca(0x276)]){const _0x32b883=JSON[_0x351eca(0x26c)](_0x38b73c['val']);this[_0x351eca(0x27e)][_0x351eca(0x215)]('ðŸ§ \x20Triggering\x20Security\x20Training...'),this['setStateAsync'](_0x351eca(0x22d),{'val':_0x351eca(0x1f2),'ack':!![]}),pythonBridge['send'](this,_0x351eca(0x251),{'sequences':_0x32b883});}}catch(_0x24434e){this[_0x351eca(0x27e)][_0x351eca(0x1f4)](_0x351eca(0x29c)+_0x24434e[_0x351eca(0x2a3)]);}}if(_0x2cdf28[_0x351eca(0x27f)](_0x351eca(0x233))&&_0x68b071['val']){this[_0x351eca(0x297)](_0x2cdf28,{'val':![],'ack':!![]});if(this[_0x351eca(0x235)])try{const _0x5965a1=await this[_0x351eca(0x263)]('LTM.dailyDigests');if(_0x5965a1&&_0x5965a1[_0x351eca(0x276)])pythonBridge['send'](this,'TRAIN_HEALTH',{'digests':JSON['parse'](_0x5965a1['val'])});}catch(_0x10fa7c){}}if(_0x2cdf28[_0x351eca(0x27f)]('analysis.training.triggerEnergy')&&_0x68b071['val']){this[_0x351eca(0x297)](_0x2cdf28,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x29c4b3=await this[_0x351eca(0x263)](_0x351eca(0x1ee));if(_0x29c4b3&&_0x29c4b3[_0x351eca(0x276)])pythonBridge[_0x351eca(0x254)](this,_0x351eca(0x21c),{'points':JSON[_0x351eca(0x26c)](_0x29c4b3[_0x351eca(0x276)])});}catch(_0x2f9adc){}}if(_0x2cdf28[_0x351eca(0x27f)](_0x351eca(0x291))&&_0x68b071[_0x351eca(0x276)]){this[_0x351eca(0x297)](_0x2cdf28,{'val':![],'ack':!![]});if(this[_0x351eca(0x235)])try{const _0x62429b=await this[_0x351eca(0x263)](_0x351eca(0x22f));_0x62429b&&_0x62429b[_0x351eca(0x276)]&&(this['log'][_0x351eca(0x215)](_0x351eca(0x292)),pythonBridge[_0x351eca(0x254)](this,'TRAIN_COMFORT',{'events':JSON[_0x351eca(0x26c)](_0x62429b[_0x351eca(0x276)])}));}catch(_0xe40398){}}_0x2cdf28[_0x351eca(0x27f)](_0x351eca(0x274))&&_0x68b071[_0x351eca(0x276)]&&(this[_0x351eca(0x297)](_0x2cdf28,{'val':![],'ack':!![]}),this[_0x351eca(0x27e)]['info'](_0x351eca(0x202)),topology['updateTopology'](this));return;}if(this[_0x351eca(0x258)][_0x351eca(0x285)]&&this[_0x351eca(0x258)]['presenceDevices'][_0x351eca(0x27f)](_0x2cdf28)){await this['checkWifiPresence']();return;}const _0x1c0007=(this[_0x351eca(0x258)][_0x351eca(0x255)]||[])['find'](_0x3ff625=>_0x3ff625['id']===_0x2cdf28);if(_0x1c0007){const _0x40d6bb=await recorder[_0x351eca(0x287)](this,_0x2cdf28,_0x68b071,_0x1c0007);_0x40d6bb&&_0x40d6bb[_0x351eca(0x26a)]===_0x351eca(0x206)&&_0x40d6bb[_0x351eca(0x1f5)]&&this[_0x351eca(0x235)]&&deadMan[_0x351eca(0x1e5)](this,_0x40d6bb[_0x351eca(0x1f5)]);}}async['onMessage'](_0x2921c3){const _0x4739dd=a0_0x42d763;if(typeof _0x2921c3===_0x4739dd(0x1eb)&&_0x2921c3['message']){if(_0x2921c3[_0x4739dd(0x25d)]===_0x4739dd(0x290)){}else{if(_0x2921c3[_0x4739dd(0x25d)]===_0x4739dd(0x264))try{const _0x45ee18=await scanner[_0x4739dd(0x286)](this,_0x2921c3[_0x4739dd(0x2a3)]||{});this[_0x4739dd(0x1e3)](_0x2921c3[_0x4739dd(0x28d)],_0x2921c3[_0x4739dd(0x25d)],{'success':!![],'devices':_0x45ee18},_0x2921c3['callback']);}catch(_0x556167){this[_0x4739dd(0x1e3)](_0x2921c3[_0x4739dd(0x28d)],_0x2921c3['command'],{'success':![],'error':_0x556167[_0x4739dd(0x2a3)]},_0x2921c3[_0x4739dd(0x288)]);}else{if(_0x2921c3['command']===_0x4739dd(0x275)){const {matrix:_0x2ac3cd}=_0x2921c3[_0x4739dd(0x2a3)];try{const _0x35084a=await this['getStateAsync'](_0x4739dd(0x243));if(_0x35084a&&_0x35084a[_0x4739dd(0x276)]){const _0x118ed2=JSON[_0x4739dd(0x26c)](_0x35084a[_0x4739dd(0x276)]);_0x118ed2['matrix']=_0x2ac3cd,_0x118ed2[_0x4739dd(0x214)]=Date['now'](),await this[_0x4739dd(0x25b)]('analysis.topology.structure',{'val':JSON[_0x4739dd(0x204)](_0x118ed2),'ack':!![]}),this['log'][_0x4739dd(0x215)](_0x4739dd(0x1e2)),pythonBridge[_0x4739dd(0x254)](this,_0x4739dd(0x20b),_0x118ed2);}this[_0x4739dd(0x1e3)](_0x2921c3['from'],_0x2921c3['command'],{'success':!![]},_0x2921c3[_0x4739dd(0x288)]);}catch(_0x16e0ca){this[_0x4739dd(0x27e)][_0x4739dd(0x1f4)]('Topology\x20Update\x20Error:\x20'+_0x16e0ca[_0x4739dd(0x2a3)]);}}else{if(_0x2921c3[_0x4739dd(0x25d)]==='getLtmData')this['sendTo'](_0x2921c3[_0x4739dd(0x28d)],_0x2921c3[_0x4739dd(0x25d)],{'success':!![],'dailyDigests':this[_0x4739dd(0x1fe)]||[],'analysisHistory':this['analysisHistory']||[]},_0x2921c3[_0x4739dd(0x288)]);else{if(_0x2921c3['command']===_0x4739dd(0x24f)){const _0x159447=this[_0x4739dd(0x1fe)][_0x4739dd(0x2a2)],_0xa9baf7=new Array(0x18)[_0x4739dd(0x284)](0x0),_0x16a533=new Date()[_0x4739dd(0x1e6)](0x0,0x0,0x0,0x0);this['eventHistory']&&this['eventHistory'][_0x4739dd(0x1fa)](_0x24a6f3=>{const _0x4cf01f=_0x4739dd;if(_0x24a6f3[_0x4cf01f(0x217)]>=_0x16a533){const _0x1a9a30=new Date(_0x24a6f3[_0x4cf01f(0x217)])[_0x4cf01f(0x277)]();if(_0x1a9a30>=0x0&&_0x1a9a30<0x18)_0xa9baf7[_0x1a9a30]++;}}),this[_0x4739dd(0x1e3)](_0x2921c3[_0x4739dd(0x28d)],_0x2921c3[_0x4739dd(0x25d)],{'success':!![],'eventHistory':this['eventHistory'][_0x4739dd(0x23e)](0x0,0xf),'stats':{'digestCount':_0x159447,'isPresent':this[_0x4739dd(0x225)],'hourlyActivity':_0xa9baf7},'automation':{'detected':![]}},_0x2921c3[_0x4739dd(0x288)]);}else{if(_0x2921c3[_0x4739dd(0x25d)]===_0x4739dd(0x200)){const _0x2de610=await this['getForeignObjectsAsync']('enum.functions.*',_0x4739dd(0x219)),_0x4e2f47=[];if(_0x2de610)for(const _0x40818e in _0x2de610){const _0xdd73bf=_0x2de610[_0x40818e],_0x579eca=(_0xdd73bf['common']&&typeof _0xdd73bf[_0x4739dd(0x259)][_0x4739dd(0x20d)]===_0x4739dd(0x1eb)?_0xdd73bf[_0x4739dd(0x259)][_0x4739dd(0x20d)]['de']:_0xdd73bf['common'][_0x4739dd(0x20d)])||_0xdd73bf[_0x4739dd(0x259)][_0x4739dd(0x20d)];_0x4e2f47[_0x4739dd(0x299)]({'id':_0x40818e,'name':_0x579eca});}const _0x551899=await this[_0x4739dd(0x21b)](_0x4739dd(0x27b),_0x4739dd(0x219)),_0x235445=[];if(_0x551899)for(const _0x4b3498 in _0x551899){const _0x33bd5b=_0x551899[_0x4b3498],_0x49d2f8=(_0x33bd5b['common']&&typeof _0x33bd5b['common']['name']===_0x4739dd(0x1eb)?_0x33bd5b[_0x4739dd(0x259)][_0x4739dd(0x20d)]['de']:_0x33bd5b[_0x4739dd(0x259)][_0x4739dd(0x20d)])||_0x4b3498[_0x4739dd(0x1e9)]('.')[_0x4739dd(0x295)]();_0x235445[_0x4739dd(0x299)](_0x49d2f8);}this[_0x4739dd(0x1e3)](_0x2921c3[_0x4739dd(0x28d)],_0x2921c3[_0x4739dd(0x25d)],{'success':!![],'enums':_0x4e2f47,'rooms':_0x235445},_0x2921c3['callback']);}}}}}}}}async[a0_0x42d763(0x224)](){const _0x4b35f9=a0_0x42d763;try{const _0x33a8d5=await this[_0x4b35f9(0x263)](setup[_0x4b35f9(0x23d)]);_0x33a8d5&&_0x33a8d5[_0x4b35f9(0x276)]&&Object[_0x4b35f9(0x20c)](setup[_0x4b35f9(0x249)])['includes'](_0x33a8d5['val'])?this[_0x4b35f9(0x28e)]=_0x33a8d5[_0x4b35f9(0x276)]:(this[_0x4b35f9(0x28e)]=setup[_0x4b35f9(0x249)][_0x4b35f9(0x29a)],await this[_0x4b35f9(0x25b)](setup['SYSTEM_DP_MODE'],{'val':setup[_0x4b35f9(0x249)][_0x4b35f9(0x29a)],'ack':!![]}));}catch(_0x9cad2f){this[_0x4b35f9(0x28e)]=setup[_0x4b35f9(0x249)][_0x4b35f9(0x29a)];}}async[a0_0x42d763(0x230)](){const _0x1476d0=a0_0x42d763;try{const _0x3077d2=this['config'][_0x1476d0(0x285)]||[];let _0x3b7d7f=![];const _0x3bf68f=[];for(const _0x22d5ea of _0x3077d2){try{const _0x51bda2=await this['getForeignStateAsync'](_0x22d5ea);_0x51bda2&&(_0x51bda2['val']===!![]||_0x51bda2[_0x1476d0(0x276)]==='online'||_0x51bda2[_0x1476d0(0x276)]===0x1)&&(_0x3b7d7f=!![],_0x3bf68f[_0x1476d0(0x299)](_0x22d5ea));}catch(_0x18fbb6){}}return await this[_0x1476d0(0x25b)](_0x1476d0(0x270),{'val':_0x3bf68f[_0x1476d0(0x228)](',\x20'),'ack':!![]}),_0x3b7d7f&&(this[_0x1476d0(0x283)]&&(this[_0x1476d0(0x27e)]['info'](_0x1476d0(0x210)),recorder['abortExitTimer'](this)),!this[_0x1476d0(0x225)]&&this[_0x1476d0(0x28e)]===setup[_0x1476d0(0x249)][_0x1476d0(0x29a)]&&await recorder[_0x1476d0(0x1e0)](this,!![])),_0x3b7d7f;}catch(_0x4f791e){return![];}}async[a0_0x42d763(0x22e)](){const _0x3b281b=a0_0x42d763;this[_0x3b281b(0x27e)]['debug']('ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...'),await aiAgent[_0x3b281b(0x29f)](this),this[_0x3b281b(0x21d)](),this[_0x3b281b(0x245)](),this[_0x3b281b(0x266)]();}['triggerGaitAnalysis'](){const _0x521896=a0_0x42d763;if(!this[_0x521896(0x235)])return;try{this[_0x521896(0x231)]('LTM.trainingData.sequences',(_0xb7980c,_0x19c0bc)=>{const _0x2783ea=_0x521896;_0x19c0bc&&_0x19c0bc[_0x2783ea(0x276)]&&pythonBridge[_0x2783ea(0x254)](this,_0x2783ea(0x244),{'sequences':JSON[_0x2783ea(0x26c)](_0x19c0bc[_0x2783ea(0x276)])});});}catch(_0x27afe3){}}async[a0_0x42d763(0x266)](){const _0x575ca8=a0_0x42d763;if(!this[_0x575ca8(0x235)])return;try{const _0x30a9a3=await recorder[_0x575ca8(0x298)](this);if(_0x30a9a3===null)return;const _0xd7654f={},_0x11169f=this[_0x575ca8(0x258)][_0x575ca8(0x255)]||[];for(const _0x2d1133 of _0x11169f){if(_0x2d1133['type']===_0x575ca8(0x226)&&_0x2d1133['location']){const _0x197c6a=this[_0x575ca8(0x1df)][_0x2d1133['id']];if(_0x197c6a!==undefined)_0xd7654f[_0x2d1133[_0x575ca8(0x1f5)]]=_0x197c6a;}}Object[_0x575ca8(0x272)](_0xd7654f)[_0x575ca8(0x2a2)]>0x0&&pythonBridge[_0x575ca8(0x254)](this,'PREDICT_ENERGY',{'current_temps':_0xd7654f,'t_out':_0x30a9a3});}catch(_0x1c7869){}}[a0_0x42d763(0x21d)](){const _0x272184=a0_0x42d763;if(!this[_0x272184(0x221)]||this[_0x272184(0x221)][_0x272184(0x2a2)]===0x0)return;const _0x3d5ad2=new Array(0x60)[_0x272184(0x284)](0x0),_0xc33857=new Date()[_0x272184(0x1e6)](0x0,0x0,0x0,0x0);this[_0x272184(0x221)][_0x272184(0x1fa)](_0x523250=>{const _0x59a223=_0x272184,_0x55eb05=new Date(_0x523250[_0x59a223(0x217)]);if(_0x55eb05['getTime']()>=_0xc33857){const _0x59c609=_0x55eb05[_0x59a223(0x277)](),_0x1675bc=_0x55eb05[_0x59a223(0x23a)](),_0x40331c=_0x59c609*0x4+Math['floor'](_0x1675bc/0xf);if(_0x40331c>=0x0&&_0x40331c<0x60)_0x3d5ad2[_0x40331c]++;}}),this[_0x272184(0x25b)](_0x272184(0x209),{'val':JSON[_0x272184(0x204)](_0x3d5ad2),'ack':!![]});}[a0_0x42d763(0x27c)](){const _0x27ae75=a0_0x42d763;if(!this['dailyDigests']||this[_0x27ae75(0x1fe)][_0x27ae75(0x2a2)]<0x2)return;const _0x182d7f=this[_0x27ae75(0x1fe)][_0x27ae75(0x1ed)](_0x5976ed=>{const _0x23e533=_0x27ae75,_0x5bf93f=(_0x5976ed[_0x23e533(0x29d)]||'')['toLowerCase']();return ACTIVITY_LEVEL_MAP[_0x5bf93f]||0x32;});pythonBridge[_0x27ae75(0x254)](this,_0x27ae75(0x239),{'values':_0x182d7f,'tag':_0x27ae75(0x22b)});}}if(require[a0_0x42d763(0x23b)]!==module)module[a0_0x42d763(0x246)]=_0x54358a=>new CogniLiving(_0x54358a);else new CogniLiving();