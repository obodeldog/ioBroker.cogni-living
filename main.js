const a0_0x410121=a0_0x3557;(function(_0x5b4fad,_0x49bf3a){const _0x2779a5=a0_0x3557,_0x9751ef=_0x5b4fad();while(!![]){try{const _0x484f65=parseInt(_0x2779a5(0x1a0))/0x1*(-parseInt(_0x2779a5(0x1b3))/0x2)+parseInt(_0x2779a5(0x14a))/0x3*(-parseInt(_0x2779a5(0x205))/0x4)+parseInt(_0x2779a5(0x20b))/0x5+-parseInt(_0x2779a5(0x1b5))/0x6*(-parseInt(_0x2779a5(0x1c9))/0x7)+parseInt(_0x2779a5(0x22a))/0x8+parseInt(_0x2779a5(0x1fa))/0x9*(parseInt(_0x2779a5(0x222))/0xa)+-parseInt(_0x2779a5(0x15b))/0xb;if(_0x484f65===_0x49bf3a)break;else _0x9751ef['push'](_0x9751ef['shift']());}catch(_0xecb35f){_0x9751ef['push'](_0x9751ef['shift']());}}}(a0_0x18f5,0xe54c2));function a0_0x3557(_0xf0aa25,_0x3458b1){const _0x4b07fd=a0_0x18f5();return a0_0x3557=function(_0x26951e,_0x7f8db9){_0x26951e=_0x26951e-0x135;let _0x18f5e1=_0x4b07fd[_0x26951e];return _0x18f5e1;},a0_0x3557(_0xf0aa25,_0x3458b1);}const a0_0x7f8db9=(function(){let _0x3c1536=!![];return function(_0x1cfba2,_0x470cc1){const _0x5c0827=_0x3c1536?function(){const _0x537909=a0_0x3557;if(_0x470cc1){const _0x5a8edf=_0x470cc1[_0x537909(0x193)](_0x1cfba2,arguments);return _0x470cc1=null,_0x5a8edf;}}:function(){};return _0x3c1536=![],_0x5c0827;};}()),a0_0x26951e=a0_0x7f8db9(this,function(){const _0x3ff4b9=a0_0x3557;return a0_0x26951e['toString']()[_0x3ff4b9(0x176)](_0x3ff4b9(0x1c8))[_0x3ff4b9(0x19e)]()[_0x3ff4b9(0x1bd)](a0_0x26951e)[_0x3ff4b9(0x176)](_0x3ff4b9(0x1c8));});a0_0x26951e();function a0_0x18f5(){const _0x1f3403=['analysis.automation.description','checkCalendarTriggers','calendarInstance','getOutsideTemperatureNumeric','ack','./lib/python_bridge','clear','map','lastTrackerEventTime','Gemini\x20AI\x20initialized.','analysisInterval','SYSTEM_MODES','cancel','daswetter.0','./lib/scanner','getForeignStateAsync','klar','search','analysis.topology.structure','ltmJob','executeAutomationAction','licenseKey','simulateButler','type','parse','triggerDailyDigest','createDailyDigest','scanThermostats','createAllObjects','setupLtmScheduler','notifyTelegramInstance','genAI','push','checkLicense','loadSystemMode','subscribeStates','devices','eventHistory','analysis.training.status','getForeignObjectAsync','analysis.automation.targetId','find','driftAnalysisTimer','Sec-Training\x20started...','error','object','apply','inactivityThresholdHours','temperature','TRAIN_COMFORT','val','log','Aktiv\x20(','./lib/recorder','analysis.energy.warmupTimes','exitTimer','getMinutes','toString','analysis.training.triggerEnergy','1431Euwrts','scores','command','heiter','setState','abs','Verbindung\x20erfolgreich!','Gesendet','briefingJob','analysis.training.triggerHealth','getState','Adapter','./lib/installer','getHours','stringify','./lib/setup','isProVersion','runAutopilot','sensorLastValues','2474OckHQA','./lib/topology','6lGDfeL','Heizung\x20kann\x20','setStateAsync','ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...','PYTHON_EXE','analysis.automation.autoApply','LTM.dailyDigests','dailyDigests','constructor','getEnums','timestamp','@iobroker/adapter-core','checkAndInstall','dismissAutomation','getStateAsync','updateTopologyMatrix','fill','activityLevel','systemConfig','(((.+)+)+)+$','8037659zKDxPE','system.adapter.','analysis.automation.triggerAction','minutes_safe','PREDICT_ENERGY','ready','updateTopology','join','testContext','manual','_calName','\x20min\x20ausbleiben.','onMessage','analysis.security.learningStatus','enum.rooms.*','checkThermostats','bind','{\x22default\x22:\x2021}','calendarName','./lib/ai_agent','startService','trackerHeartbeat','location','analysis.training.triggerTopology','modeResetJob','info','analysisTimer','analysis.triggerBriefing','isSolar','from','message','sendTo','send','ANALYZE_TREND','analysis.training.triggerSecurity','analysis.energy.insulationScore','trackerEnabled','analysis.training.triggerComfort','LTM.trainingData.thermodynamics','onStateChange','updateLocation','testNotification','Standard','isPresent','models/gemini-flash-latest','.data.table','LTM.rawEventLog','getGenerativeModel','presenceDevices','741654mlRPak','ðŸ””\x20Dies\x20ist\x20ein\x20Test\x20von\x20Cogni-Living.','setupBriefingScheduler','SET_LEARNING_MODE','values','matrix','SET_TOPOLOGY','checkSolarCondition','getCalendarNames','setHours','simulateEnergyMPC','144732fiAFYa','setObjectNotExistsAsync','analysisHistory','guest','geminiApiKey','Kein\x20Wetter-Adapter','3122285HOeniN','callback','Fehler:\x20','namespace','setPresence','rawEventLog','LTM.baselineStatus','TRAIN_HEALTH','isArray','Kein\x20API\x20Key\x20Ã¼bergeben','onUnload','sendMorningBriefing','stopService','abortExitTimer','updated','initHistory','string','generateContent','updateHealthVector','name','onReady','currentSystemMode','.communicate.request','50RtIMln','scanDevices','PINN\x20AI\x20Forecast','processSensorEvent','length','@google/generative-ai','TRACK_EVENT','system.mode','11287952eGIeNA','forEach','motion','sunny','application/json','automation.triggerAction','getTime','./lib/scheduler','enum','analysis.automation.patternDetected','SYSTEM_DP_MODE','LTM.trainingData.sequences','includes','Warm-Up\x20Time\x20(Minutes\x20to\x20Target)','toLowerCase','OPTIMIZE_ENERGY','VACATION','Gemini\x20Init\x20Error:\x20','WiFi\x20Presence\x20detected.','ANALYZE_GAIT','now','startSystem','analysis.energy.warmupTargets','runPythonHealthCheck','runGeminiAnalysis','checkWifiPresence','Lernphase\x20(','main','apiKey','add','floor','config','state','3snRZtl','version','geminiModel','NORMAL','TRAIN_SECURITY','triggerGaitAnalysis','Daten\x20nicht\x20verfÃ¼gbar','Warm-Up\x20Target\x20Temps\x20(JSON)','system.presenceWho','triggerEnergyPrediction','exports','runBaselineDriftAnalysis','notifyTelegramEnabled','response','.system.mode','text','json','9352046kgSoIw','Party\x20Mode','getForeignObjectsAsync','analysis.energy.mpcActive','endsWith','sonn','common','analysis.automation.targetValue','subscribeForeignStatesAsync','lastAlertState'];a0_0x18f5=function(){return _0x1f3403;};return a0_0x18f5();}'use strict';const utils=require(a0_0x410121(0x1c0)),{GoogleGenerativeAI}=require(a0_0x410121(0x227)),installer=require(a0_0x410121(0x1ac)),scanner=require(a0_0x410121(0x173)),schedulers=require(a0_0x410121(0x231)),topology=require(a0_0x410121(0x1b4)),setup=require(a0_0x410121(0x1af)),recorder=require(a0_0x410121(0x19a)),pythonBridge=require(a0_0x410121(0x16a)),aiAgent=require(a0_0x410121(0x1dc)),deadMan=require('./lib/dead_man'),automation=require('./lib/automation'),GEMINI_MODEL=a0_0x410121(0x1f5),ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};class CogniLiving extends utils[a0_0x410121(0x1ab)]{constructor(_0x2c73b4){const _0x5281b1=a0_0x410121;super({..._0x2c73b4,'name':'cogni-living'}),this['eventHistory']=[],this[_0x5281b1(0x207)]=[],this[_0x5281b1(0x210)]=[],this[_0x5281b1(0x1bc)]=[],this[_0x5281b1(0x1b2)]={},this[_0x5281b1(0x1c7)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x5281b1(0x1f4)]=!![],this[_0x5281b1(0x19c)]=null,this['exitGraceTimer']=null,this['isGracePeriodActive']=![],this[_0x5281b1(0x184)]=null,this[_0x5281b1(0x14c)]=null,this[_0x5281b1(0x220)]=setup[_0x5281b1(0x170)][_0x5281b1(0x14d)],this[_0x5281b1(0x1b0)]=![],this[_0x5281b1(0x164)]=![],this[_0x5281b1(0x1e3)]=null,this[_0x5281b1(0x178)]=null,this[_0x5281b1(0x1e1)]=null,this[_0x5281b1(0x18f)]=null,this[_0x5281b1(0x1a8)]=null,this['dependencyInstallInProgress']=![],this[_0x5281b1(0x1de)]=null,this[_0x5281b1(0x16d)]=Date[_0x5281b1(0x13d)](),this['on'](_0x5281b1(0x1ce),this[_0x5281b1(0x21f)]['bind'](this)),this['on']('stateChange',this['onStateChange'][_0x5281b1(0x1d9)](this)),this['on']('unload',this['onUnload']['bind'](this)),this['on']('message',this['onMessage']['bind'](this));}async[a0_0x410121(0x21f)](){const _0x21b99d=a0_0x410121;this['log']['info']('cogni-living\x20adapter\x20starting\x20(v'+this[_0x21b99d(0x14b)]+')\x20-\x20Phase\x20D\x20(Evolution)');if(!installer[_0x21b99d(0x1c1)](this,()=>this[_0x21b99d(0x13e)]()))return;}async['startSystem'](){const _0x48ee47=a0_0x410121;await setup['initZombies'](this);try{this[_0x48ee47(0x1b0)]=await setup[_0x48ee47(0x186)](this[_0x48ee47(0x148)][_0x48ee47(0x17a)]);}catch(_0x2a2e37){}if(!this[_0x48ee47(0x148)][_0x48ee47(0x194)]||this['config'][_0x48ee47(0x194)]<0.1)this['config'][_0x48ee47(0x194)]=0xc;await setup[_0x48ee47(0x21a)](this),await setup['initSystemConfig'](this);if(this[_0x48ee47(0x148)][_0x48ee47(0x209)])try{this[_0x48ee47(0x184)]=new GoogleGenerativeAI(this[_0x48ee47(0x148)][_0x48ee47(0x209)]),this[_0x48ee47(0x14c)]=this['genAI'][_0x48ee47(0x1f8)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x48ee47(0x22e)}}),this['log']['info'](_0x48ee47(0x16e));}catch(_0x117972){this[_0x48ee47(0x198)]['error'](_0x48ee47(0x13a)+_0x117972['message']);}await setup[_0x48ee47(0x181)](this),await this[_0x48ee47(0x187)](),await this[_0x48ee47(0x206)]('analysis.energy.pinnForecast',{'type':_0x48ee47(0x149),'common':{'name':_0x48ee47(0x224),'type':_0x48ee47(0x21b),'role':_0x48ee47(0x15a),'read':!![],'write':![]},'native':{}}),await this[_0x48ee47(0x206)]('analysis.energy.ventilationAlerts',{'type':_0x48ee47(0x149),'common':{'name':'Active\x20Ventilation\x20Alerts','type':'string','role':_0x48ee47(0x15a),'read':!![],'write':![]},'native':{}}),await this[_0x48ee47(0x206)](_0x48ee47(0x19b),{'type':_0x48ee47(0x149),'common':{'name':_0x48ee47(0x136),'type':'string','role':_0x48ee47(0x15a),'read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x48ee47(0x13f),{'type':_0x48ee47(0x149),'common':{'name':_0x48ee47(0x151),'type':_0x48ee47(0x21b),'role':'json','read':!![],'write':!![],'def':_0x48ee47(0x1da)},'native':{}});try{const _0x5f0889=await this[_0x48ee47(0x1c3)](_0x48ee47(0x1f7));if(_0x5f0889&&_0x5f0889[_0x48ee47(0x197)])this[_0x48ee47(0x210)]=JSON[_0x48ee47(0x17d)](_0x5f0889[_0x48ee47(0x197)]);}catch(_0x14926d){this[_0x48ee47(0x210)]=[];}try{const _0x514d2b=await this[_0x48ee47(0x1c3)](_0x48ee47(0x1bb));if(_0x514d2b&&_0x514d2b[_0x48ee47(0x197)])this['dailyDigests']=JSON[_0x48ee47(0x17d)](_0x514d2b[_0x48ee47(0x197)]);}catch(_0x5dd330){this['dailyDigests']=[];}const _0xb25915=this['dailyDigests'][_0x48ee47(0x226)]>=(this[_0x48ee47(0x148)]['minDaysForBaseline']||0x7)?_0x48ee47(0x199)+this[_0x48ee47(0x1bc)][_0x48ee47(0x226)]+'\x20Tage)':_0x48ee47(0x143)+this[_0x48ee47(0x1bc)][_0x48ee47(0x226)]+'/'+(this[_0x48ee47(0x148)]['minDaysForBaseline']||0x7)+')';await this[_0x48ee47(0x1b7)](_0x48ee47(0x211),{'val':_0xb25915,'ack':!![]}),this[_0x48ee47(0x188)]('analysis.trigger'),this[_0x48ee47(0x188)]('LTM.triggerDailyDigest'),this['subscribeStates'](_0x48ee47(0x229)),this['subscribeStates'](_0x48ee47(0x1e4)),this[_0x48ee47(0x188)](_0x48ee47(0x1cb)),this[_0x48ee47(0x188)](_0x48ee47(0x1ba)),this['subscribeStates'](_0x48ee47(0x1eb)),this['subscribeStates'](_0x48ee47(0x1a9)),this[_0x48ee47(0x188)](_0x48ee47(0x19f)),this[_0x48ee47(0x188)](_0x48ee47(0x1ee)),this[_0x48ee47(0x188)](_0x48ee47(0x1e0)),this[_0x48ee47(0x188)](_0x48ee47(0x15e));const _0x5451d1=this[_0x48ee47(0x148)][_0x48ee47(0x189)];if(_0x5451d1)for(const _0x2bcd21 of _0x5451d1){await this[_0x48ee47(0x163)](_0x2bcd21['id']);}const _0x23e2a9=this['config'][_0x48ee47(0x1f9)];if(_0x23e2a9)for(const _0x22eede of _0x23e2a9){await this[_0x48ee47(0x163)](_0x22eede);}if(this[_0x48ee47(0x148)][_0x48ee47(0x156)]&&this['config']['notifyTelegramInstance'])await this[_0x48ee47(0x163)](this[_0x48ee47(0x148)][_0x48ee47(0x183)]+_0x48ee47(0x221));setTimeout(()=>this['checkWifiPresence'](),0x1388);if(this[_0x48ee47(0x1e3)])clearInterval(this[_0x48ee47(0x1e3)]);const _0x1b7c61=this[_0x48ee47(0x148)][_0x48ee47(0x16f)]||0xf;_0x1b7c61>0x0&&(this[_0x48ee47(0x1e3)]=setInterval(()=>{const _0x59db18=_0x48ee47;this[_0x59db18(0x1b1)](),automation[_0x59db18(0x166)](this);},_0x1b7c61*0x3c*0x3e8)),setTimeout(()=>automation[_0x48ee47(0x166)](this),0x2710),this[_0x48ee47(0x148)][_0x48ee47(0x1ed)]!==![]&&(this[_0x48ee47(0x1de)]=setInterval(()=>{const _0x4bf564=_0x48ee47;if(this[_0x4bf564(0x1b0)]){const _0x2e6eec=Date[_0x4bf564(0x13d)](),_0xd760ee=this['lastTrackerEventTime']||_0x2e6eec,_0x51fa3c=(_0x2e6eec-_0xd760ee)/0x3e8;_0x51fa3c>0x2&&(this[_0x4bf564(0x16d)]=_0x2e6eec,pythonBridge[_0x4bf564(0x1e9)](this,_0x4bf564(0x228),{'room':null,'dt':_0x51fa3c}));}},0xbb8)),schedulers[_0x48ee47(0x182)](this,()=>aiAgent[_0x48ee47(0x17f)](this,pythonBridge)),schedulers['setupModeResetScheduler'](this),schedulers['setupDriftAnalysisScheduler'](this,()=>aiAgent[_0x48ee47(0x155)](this)),schedulers[_0x48ee47(0x1fc)](this,()=>aiAgent[_0x48ee47(0x216)](this)),pythonBridge[_0x48ee47(0x1dd)](this,installer[_0x48ee47(0x1b9)]),setTimeout(async()=>{const _0xf6894a=_0x48ee47;await topology[_0xf6894a(0x1cf)](this);try{const _0x555b28=await this[_0xf6894a(0x1c3)](_0xf6894a(0x177));if(_0x555b28&&_0x555b28[_0xf6894a(0x197)])pythonBridge[_0xf6894a(0x1e9)](this,_0xf6894a(0x200),JSON[_0xf6894a(0x17d)](_0x555b28[_0xf6894a(0x197)]));}catch(_0x2692f4){}this['runPythonHealthCheck'](),this['triggerGaitAnalysis'](),this['triggerEnergyPrediction'](),this[_0xf6894a(0x21d)]();},0x1388);}[a0_0x410121(0x215)](_0x337989){const _0x4de9e1=a0_0x410121;if(this[_0x4de9e1(0x1e3)])clearInterval(this[_0x4de9e1(0x1e3)]);if(this[_0x4de9e1(0x18f)])clearInterval(this[_0x4de9e1(0x18f)]);if(this[_0x4de9e1(0x1de)])clearInterval(this[_0x4de9e1(0x1de)]);if(this['ltmJob'])this[_0x4de9e1(0x178)][_0x4de9e1(0x171)]();if(this['modeResetJob'])this[_0x4de9e1(0x1e1)][_0x4de9e1(0x171)]();if(this[_0x4de9e1(0x1a8)])this[_0x4de9e1(0x1a8)][_0x4de9e1(0x171)]();recorder['abortExitTimer'](this),pythonBridge[_0x4de9e1(0x217)](this),_0x337989();}async[a0_0x410121(0x1f0)](_0x31ceac,_0x55bc2d){const _0x15352a=a0_0x410121;if(!_0x55bc2d||this['dependencyInstallInProgress'])return;if(_0x31ceac['includes']('telegram')&&_0x31ceac[_0x15352a(0x15f)]('communicate.request')&&_0x55bc2d[_0x15352a(0x197)])return;if(_0x31ceac===this[_0x15352a(0x20e)]+_0x15352a(0x158)){if(_0x55bc2d[_0x15352a(0x197)]&&Object[_0x15352a(0x1fe)](setup[_0x15352a(0x170)])['includes'](_0x55bc2d[_0x15352a(0x197)])){this[_0x15352a(0x220)]=_0x55bc2d[_0x15352a(0x197)];if(_0x55bc2d[_0x15352a(0x197)]===setup[_0x15352a(0x170)][_0x15352a(0x139)])await recorder[_0x15352a(0x20f)](this,![]);else await recorder[_0x15352a(0x20f)](this,!![]);if(this['isProVersion']){let _0x47b926=![],_0x5a1103=0x0,_0x5a9d08=_0x15352a(0x1d2);if(this[_0x15352a(0x220)]==='party')_0x47b926=!![],_0x5a1103=0x168,_0x5a9d08=_0x15352a(0x15c);else this['currentSystemMode']===_0x15352a(0x208)&&(_0x47b926=!![],_0x5a1103=0x5a0,_0x5a9d08='Guest\x20Mode');pythonBridge[_0x15352a(0x1e9)](this,_0x15352a(0x1fd),{'active':_0x47b926,'duration':_0x5a1103,'label':_0x5a9d08}),await this[_0x15352a(0x1b7)](_0x15352a(0x1d6),{'val':JSON[_0x15352a(0x1ae)]({'active':_0x47b926,'label':_0x5a9d08,'timestamp':Date[_0x15352a(0x13d)]()}),'ack':!![]});}}if(!_0x55bc2d[_0x15352a(0x169)])this[_0x15352a(0x1a4)](_0x31ceac,{'val':this[_0x15352a(0x220)],'ack':!![]});return;}if(!_0x55bc2d['ack']){if(_0x31ceac[_0x15352a(0x135)]('analysis.trigger')&&_0x55bc2d[_0x15352a(0x197)]){this[_0x15352a(0x1a4)](_0x31ceac,{'val':![],'ack':!![]}),aiAgent[_0x15352a(0x141)](this);return;}if(_0x31ceac[_0x15352a(0x135)](_0x15352a(0x17e))&&_0x55bc2d[_0x15352a(0x197)]){this['setState'](_0x31ceac,{'val':![],'ack':!![]});if(this[_0x15352a(0x1b0)])aiAgent[_0x15352a(0x17f)](this,pythonBridge);return;}if(_0x31ceac[_0x15352a(0x135)]('triggerBriefing')&&_0x55bc2d[_0x15352a(0x197)]){this['setState'](_0x31ceac,{'val':![],'ack':!![]}),aiAgent[_0x15352a(0x216)](this);return;}if(_0x31ceac[_0x15352a(0x135)](_0x15352a(0x22f))&&_0x55bc2d['val']){this['setState'](_0x31ceac,{'val':![],'ack':!![]}),aiAgent[_0x15352a(0x179)](this);return;}if(_0x31ceac[_0x15352a(0x135)]('analysis.training.triggerSecurity')&&_0x55bc2d[_0x15352a(0x197)]){this[_0x15352a(0x1a4)](_0x31ceac,{'val':![],'ack':!![]});if(this[_0x15352a(0x1b0)])try{const _0x4284b0=await this[_0x15352a(0x1c3)]('LTM.trainingData.sequences');if(_0x4284b0&&_0x4284b0[_0x15352a(0x197)]){const _0x3cffa3=JSON[_0x15352a(0x17d)](_0x4284b0[_0x15352a(0x197)]);this[_0x15352a(0x1b7)](_0x15352a(0x18b),{'val':_0x15352a(0x190),'ack':!![]}),pythonBridge['send'](this,_0x15352a(0x14e),{'sequences':_0x3cffa3});}}catch(_0x1a849e){}return;}if(_0x31ceac[_0x15352a(0x135)](_0x15352a(0x1a9))&&_0x55bc2d[_0x15352a(0x197)]){this[_0x15352a(0x1a4)](_0x31ceac,{'val':![],'ack':!![]});if(this[_0x15352a(0x1b0)])try{const _0x59342f=await this[_0x15352a(0x1c3)](_0x15352a(0x1bb));if(_0x59342f&&_0x59342f[_0x15352a(0x197)])pythonBridge[_0x15352a(0x1e9)](this,_0x15352a(0x212),{'digests':JSON[_0x15352a(0x17d)](_0x59342f[_0x15352a(0x197)])});}catch(_0x352fa7){}return;}if(_0x31ceac[_0x15352a(0x135)](_0x15352a(0x19f))&&_0x55bc2d[_0x15352a(0x197)]){this[_0x15352a(0x1a4)](_0x31ceac,{'val':![],'ack':!![]});if(this[_0x15352a(0x1b0)])try{const _0x1b9e0a=await this[_0x15352a(0x1c3)](_0x15352a(0x1ef));if(_0x1b9e0a&&_0x1b9e0a[_0x15352a(0x197)])pythonBridge[_0x15352a(0x1e9)](this,'TRAIN_ENERGY',{'points':JSON[_0x15352a(0x17d)](_0x1b9e0a[_0x15352a(0x197)])});}catch(_0x1f2893){}return;}if(_0x31ceac[_0x15352a(0x135)](_0x15352a(0x1ee))&&_0x55bc2d[_0x15352a(0x197)]){this[_0x15352a(0x1a4)](_0x31ceac,{'val':![],'ack':!![]});if(this[_0x15352a(0x1b0)])try{const _0x5bf9a2=await this[_0x15352a(0x1c3)]('LTM.rawEventLog');if(_0x5bf9a2&&_0x5bf9a2[_0x15352a(0x197)])pythonBridge[_0x15352a(0x1e9)](this,_0x15352a(0x196),{'events':JSON[_0x15352a(0x17d)](_0x5bf9a2[_0x15352a(0x197)])});}catch(_0x10b8e0){}return;}if(_0x31ceac[_0x15352a(0x135)](_0x15352a(0x1e0))&&_0x55bc2d['val']){this[_0x15352a(0x1a4)](_0x31ceac,{'val':![],'ack':!![]}),topology[_0x15352a(0x1cf)](this);return;}}if(this[_0x15352a(0x148)][_0x15352a(0x1f9)]&&this[_0x15352a(0x148)][_0x15352a(0x1f9)][_0x15352a(0x135)](_0x31ceac)){await this[_0x15352a(0x142)]();return;}const _0x238719=(this[_0x15352a(0x148)][_0x15352a(0x189)]||[])[_0x15352a(0x18e)](_0x4dd800=>_0x4dd800['id']===_0x31ceac);if(_0x238719){const _0x59603f=await recorder[_0x15352a(0x225)](this,_0x31ceac,_0x55bc2d,_0x238719);_0x59603f&&_0x59603f[_0x15352a(0x17c)]===_0x15352a(0x22c)&&_0x59603f[_0x15352a(0x1df)]&&this[_0x15352a(0x1b0)]&&deadMan[_0x15352a(0x1f1)](this,_0x59603f[_0x15352a(0x1df)]);}}async[a0_0x410121(0x1d5)](_0x5922ce){const _0x17ca65=a0_0x410121;if(typeof _0x5922ce===_0x17ca65(0x192)&&_0x5922ce[_0x17ca65(0x1e7)]){if(_0x5922ce[_0x17ca65(0x1a2)]===_0x17ca65(0x1d8))try{const _0x4f5840=await automation[_0x17ca65(0x180)](this);this[_0x17ca65(0x1e8)](_0x5922ce[_0x17ca65(0x1e6)],_0x5922ce['command'],{'success':!![],'results':_0x4f5840},_0x5922ce['callback']);}catch(_0x1e5b47){this[_0x17ca65(0x1e8)](_0x5922ce[_0x17ca65(0x1e6)],_0x5922ce[_0x17ca65(0x1a2)],{'success':![],'error':_0x1e5b47[_0x17ca65(0x1e7)]},_0x5922ce[_0x17ca65(0x20c)]);}else{if(_0x5922ce[_0x17ca65(0x1a2)]===_0x17ca65(0x204))try{const {current_temps:_0x1aa175,t_out:_0x4e3363,targets:_0x5cf5f6,t_forecast:_0x3108a6}=_0x5922ce['message'],_0x2d8f0a=[];let _0x433f52={};try{const _0x183a77=await this[_0x17ca65(0x1c3)](_0x17ca65(0x1ec));if(_0x183a77&&_0x183a77['val']){const _0x4db59d=JSON['parse'](_0x183a77[_0x17ca65(0x197)]);_0x433f52=_0x4db59d[_0x17ca65(0x1a1)]||_0x4db59d;}}catch(_0x4d66e4){}const _0x2f6c77=_0x3108a6!==undefined&&_0x3108a6!==null?(_0x4e3363+_0x3108a6)/0x2:_0x4e3363;for(const [_0x1c80b4,_0x12f5cb]of Object['entries'](_0x1aa175)){const _0x2db8cc=_0x5cf5f6[_0x1c80b4]||0x15;if(_0x12f5cb<=_0x2db8cc)continue;let _0x2b8d0c=_0x433f52[_0x1c80b4]||-0.5;if(_0x2b8d0c>=0x0)_0x2b8d0c=-0.5;const _0x53d9ec=Math[_0x17ca65(0x1a5)](_0x2b8d0c),_0x2bd699=_0x12f5cb-_0x2db8cc;let _0x1dcf1d=Math[_0x17ca65(0x147)](_0x2bd699/_0x53d9ec*0x3c);const _0x33e40a=_0x12f5cb-_0x4e3363,_0x11fc53=_0x12f5cb-_0x2f6c77;if(_0x11fc53!==0x0&&_0x33e40a!==0x0){const _0x272149=_0x33e40a/_0x11fc53;_0x1dcf1d=Math[_0x17ca65(0x147)](_0x1dcf1d*_0x272149);}if(_0x1dcf1d>0xf){if(_0x1dcf1d>0xf0)_0x1dcf1d=0xf0;_0x2d8f0a[_0x17ca65(0x185)]({'room':_0x1c80b4,'minutes_safe':_0x1dcf1d,'target':_0x2db8cc,'current':_0x12f5cb,'savings_msg':_0x17ca65(0x1b6)+_0x1dcf1d+_0x17ca65(0x1d4)});}}_0x2d8f0a['sort']((_0x5195b4,_0x46d309)=>_0x46d309[_0x17ca65(0x1cc)]-_0x5195b4['minutes_safe']),this[_0x17ca65(0x1e8)](_0x5922ce['from'],_0x5922ce[_0x17ca65(0x1a2)],{'success':!![],'proposals':_0x2d8f0a},_0x5922ce['callback']);}catch(_0x4459be){this[_0x17ca65(0x1e8)](_0x5922ce[_0x17ca65(0x1e6)],_0x5922ce['command'],{'success':![],'error':_0x4459be[_0x17ca65(0x1e7)]},_0x5922ce[_0x17ca65(0x20c)]);}else{if(_0x5922ce[_0x17ca65(0x1a2)]===_0x17ca65(0x1c2))await this[_0x17ca65(0x1b7)](_0x17ca65(0x233),{'val':![],'ack':!![]}),await this[_0x17ca65(0x1b7)](_0x17ca65(0x165),{'val':'','ack':!![]}),await this[_0x17ca65(0x1b7)]('analysis.automation.targetId',{'val':'','ack':!![]}),this[_0x17ca65(0x1e8)](_0x5922ce[_0x17ca65(0x1e6)],_0x5922ce[_0x17ca65(0x1a2)],{'success':!![]},_0x5922ce[_0x17ca65(0x20c)]);else{if(_0x5922ce[_0x17ca65(0x1a2)]===_0x17ca65(0x17b)){const {targetId:_0xf38862,targetValue:_0x49ba06}=_0x5922ce['message'];await this[_0x17ca65(0x1b7)](_0x17ca65(0x233),{'val':!![],'ack':!![]}),await this[_0x17ca65(0x1b7)](_0x17ca65(0x165),{'val':'Simulation\x20durch\x20Admin\x20(Test)','ack':!![]}),await this[_0x17ca65(0x1b7)]('analysis.automation.targetId',{'val':_0xf38862,'ack':!![]}),await this[_0x17ca65(0x1b7)](_0x17ca65(0x162),{'val':String(_0x49ba06),'ack':!![]}),this[_0x17ca65(0x1e8)](_0x5922ce['from'],_0x5922ce[_0x17ca65(0x1a2)],{'success':!![]},_0x5922ce[_0x17ca65(0x20c)]);}else{if(_0x5922ce[_0x17ca65(0x1a2)]==='testApiKey')try{const _0x70e638=_0x5922ce[_0x17ca65(0x1e7)][_0x17ca65(0x145)];if(!_0x70e638)throw new Error(_0x17ca65(0x214));const _0x373fe9=new GoogleGenerativeAI(_0x70e638),_0x2ee658=_0x373fe9[_0x17ca65(0x1f8)]({'model':GEMINI_MODEL}),_0x3d2b83=await _0x2ee658[_0x17ca65(0x21c)]('Test'),_0x3da9a8=await _0x3d2b83[_0x17ca65(0x157)];if(_0x3da9a8[_0x17ca65(0x159)]())this['sendTo'](_0x5922ce[_0x17ca65(0x1e6)],_0x5922ce[_0x17ca65(0x1a2)],{'success':!![],'message':_0x17ca65(0x1a6)},_0x5922ce['callback']);else throw new Error('Keine\x20Antwort\x20von\x20Gemini');}catch(_0x27d0c2){this[_0x17ca65(0x1e8)](_0x5922ce[_0x17ca65(0x1e6)],_0x5922ce[_0x17ca65(0x1a2)],{'success':![],'message':_0x27d0c2['message']},_0x5922ce['callback']);}else{if(_0x5922ce[_0x17ca65(0x1a2)]===_0x17ca65(0x223))try{const _0x5ed9bc=await scanner['scanForDevices'](this,_0x5922ce[_0x17ca65(0x1e7)]||{});this[_0x17ca65(0x1e8)](_0x5922ce[_0x17ca65(0x1e6)],_0x5922ce['command'],{'success':!![],'devices':_0x5ed9bc},_0x5922ce[_0x17ca65(0x20c)]);}catch(_0x590d8a){this[_0x17ca65(0x1e8)](_0x5922ce['from'],_0x5922ce[_0x17ca65(0x1a2)],{'success':![],'error':_0x590d8a[_0x17ca65(0x1e7)]},_0x5922ce[_0x17ca65(0x20c)]);}else{if(_0x5922ce[_0x17ca65(0x1a2)]===_0x17ca65(0x1c4))try{const {matrix:_0x15b1d4}=_0x5922ce[_0x17ca65(0x1e7)],_0x14da56=await this[_0x17ca65(0x1c3)]('analysis.topology.structure');if(_0x14da56&&_0x14da56[_0x17ca65(0x197)]){const _0x3f107f=JSON[_0x17ca65(0x17d)](_0x14da56[_0x17ca65(0x197)]);_0x3f107f[_0x17ca65(0x1ff)]=_0x15b1d4,_0x3f107f[_0x17ca65(0x219)]=Date[_0x17ca65(0x13d)](),await this[_0x17ca65(0x1b7)](_0x17ca65(0x177),{'val':JSON[_0x17ca65(0x1ae)](_0x3f107f),'ack':!![]}),pythonBridge[_0x17ca65(0x1e9)](this,'SET_TOPOLOGY',_0x3f107f);}this[_0x17ca65(0x1e8)](_0x5922ce[_0x17ca65(0x1e6)],_0x5922ce[_0x17ca65(0x1a2)],{'success':!![]},_0x5922ce[_0x17ca65(0x20c)]);}catch(_0x110c9e){this[_0x17ca65(0x198)][_0x17ca65(0x191)](_0x110c9e);}else{if(_0x5922ce[_0x17ca65(0x1a2)]==='getLtmData')this['sendTo'](_0x5922ce[_0x17ca65(0x1e6)],_0x5922ce[_0x17ca65(0x1a2)],{'success':!![],'dailyDigests':this[_0x17ca65(0x1bc)]||[],'analysisHistory':this[_0x17ca65(0x207)]||[]},_0x5922ce[_0x17ca65(0x20c)]);else{if(_0x5922ce[_0x17ca65(0x1a2)]==='getOverviewData'){const _0x3b1287=this['dailyDigests'][_0x17ca65(0x226)],_0xaff148=new Array(0x18)[_0x17ca65(0x1c5)](0x0),_0x16df37=new Date()['setHours'](0x0,0x0,0x0,0x0);this[_0x17ca65(0x18a)]&&this[_0x17ca65(0x18a)][_0x17ca65(0x22b)](_0x12f688=>{const _0x467d52=_0x17ca65;if(_0x12f688[_0x467d52(0x1bf)]>=_0x16df37){const _0x4b570e=new Date(_0x12f688[_0x467d52(0x1bf)])[_0x467d52(0x1ad)]();if(_0x4b570e>=0x0&&_0x4b570e<0x18)_0xaff148[_0x4b570e]++;}});let _0xfce6f1=![],_0x35bed9='',_0x18a5e3='',_0x5182d8='';try{const _0x1a92af=await this[_0x17ca65(0x1c3)]('analysis.automation.patternDetected');if(_0x1a92af&&_0x1a92af[_0x17ca65(0x197)]){_0xfce6f1=!![];const _0x16cd00=await this[_0x17ca65(0x1c3)]('analysis.automation.description');_0x35bed9=_0x16cd00?_0x16cd00[_0x17ca65(0x197)]:'';const _0x4094f9=await this['getStateAsync'](_0x17ca65(0x18d));_0x18a5e3=_0x4094f9?_0x4094f9[_0x17ca65(0x197)]:'';const _0x58a542=await this[_0x17ca65(0x1c3)](_0x17ca65(0x162));_0x5182d8=_0x58a542?_0x58a542[_0x17ca65(0x197)]:'';}}catch(_0x20143f){}const _0x657132=await this['checkSolarCondition'](),_0x45560b=(this[_0x17ca65(0x148)]['devices']||[])['some'](_0x9cfb7=>_0x9cfb7['isSolar']),_0x14888d=_0x657132&&_0x45560b;this['sendTo'](_0x5922ce[_0x17ca65(0x1e6)],_0x5922ce[_0x17ca65(0x1a2)],{'success':!![],'eventHistory':this['eventHistory']['slice'](0x0,0xf),'stats':{'digestCount':_0x3b1287,'isPresent':this['isPresent'],'hourlyActivity':_0xaff148,'solarActive':_0x14888d},'automation':{'detected':_0xfce6f1,'description':_0x35bed9,'targetId':_0x18a5e3,'targetValue':_0x5182d8}},_0x5922ce['callback']);}else{if(_0x5922ce['command']===_0x17ca65(0x1be)){const _0x16411e=await this[_0x17ca65(0x15d)]('enum.functions.*',_0x17ca65(0x232)),_0x882568=[];if(_0x16411e)for(const _0x322441 in _0x16411e){const _0x5ac3b5=_0x16411e[_0x322441],_0x24c31a=(_0x5ac3b5[_0x17ca65(0x161)]&&typeof _0x5ac3b5[_0x17ca65(0x161)][_0x17ca65(0x21e)]===_0x17ca65(0x192)?_0x5ac3b5[_0x17ca65(0x161)]['name']['de']:_0x5ac3b5['common'][_0x17ca65(0x21e)])||_0x5ac3b5[_0x17ca65(0x161)]['name'];_0x882568[_0x17ca65(0x185)]({'id':_0x322441,'name':_0x24c31a});}const _0x1773a8=await this['getForeignObjectsAsync'](_0x17ca65(0x1d7),_0x17ca65(0x232)),_0x38bf9b=[];if(_0x1773a8)for(const _0x22ce24 in _0x1773a8){const _0x72153f=_0x1773a8[_0x22ce24],_0x36475c=(_0x72153f[_0x17ca65(0x161)]&&typeof _0x72153f[_0x17ca65(0x161)][_0x17ca65(0x21e)]==='object'?_0x72153f[_0x17ca65(0x161)][_0x17ca65(0x21e)]['de']:_0x72153f[_0x17ca65(0x161)][_0x17ca65(0x21e)])||_0x22ce24['split']('.')['pop']();_0x38bf9b[_0x17ca65(0x185)](_0x36475c);}this[_0x17ca65(0x1e8)](_0x5922ce[_0x17ca65(0x1e6)],_0x5922ce[_0x17ca65(0x1a2)],{'success':!![],'enums':_0x882568,'rooms':_0x38bf9b},_0x5922ce[_0x17ca65(0x20c)]);}else{if(_0x5922ce['command']===_0x17ca65(0x1d1))try{let _0x1f6030=_0x17ca65(0x20a),_0x3187a8='Kein\x20Kalender-Adapter';if(this[_0x17ca65(0x148)]['useWeather']){const _0x370e31=await recorder[_0x17ca65(0x168)](this);_0x1f6030=_0x370e31!==null?_0x370e31+'Â°C':_0x17ca65(0x150);}if(this[_0x17ca65(0x148)][_0x17ca65(0x167)]){const _0x3b8fc8=await this[_0x17ca65(0x18c)](_0x17ca65(0x1ca)+this[_0x17ca65(0x148)][_0x17ca65(0x167)]);_0x3187a8=_0x3b8fc8?'Verbunden':'Instanz\x20nicht\x20gefunden';}this[_0x17ca65(0x1e8)](_0x5922ce[_0x17ca65(0x1e6)],_0x5922ce[_0x17ca65(0x1a2)],{'success':!![],'weather':_0x1f6030,'calendar':_0x3187a8},_0x5922ce[_0x17ca65(0x20c)]);}catch(_0x57773a){this[_0x17ca65(0x1e8)](_0x5922ce['from'],_0x5922ce[_0x17ca65(0x1a2)],{'success':![],'error':_0x57773a['message']},_0x5922ce[_0x17ca65(0x20c)]);}else{if(_0x5922ce['command']===_0x17ca65(0x202))try{const _0x37609a=_0x5922ce[_0x17ca65(0x1e7)]['instance'],_0x36b9d1=await this[_0x17ca65(0x174)](_0x37609a+_0x17ca65(0x1f6));let _0x2e1879=[];if(_0x36b9d1&&_0x36b9d1['val']){const _0xd301a4=JSON[_0x17ca65(0x17d)](_0x36b9d1[_0x17ca65(0x197)]),_0x186d10=new Set();Array[_0x17ca65(0x213)](_0xd301a4)&&_0xd301a4[_0x17ca65(0x22b)](_0x1e0d46=>{const _0x20ddc2=_0x17ca65;if(_0x1e0d46[_0x20ddc2(0x1d3)])_0x186d10[_0x20ddc2(0x146)](_0x1e0d46[_0x20ddc2(0x1d3)]);else{if(_0x1e0d46['calendarName'])_0x186d10[_0x20ddc2(0x146)](_0x1e0d46[_0x20ddc2(0x1db)]);}}),_0x2e1879=Array['from'](_0x186d10)['sort']();}if(_0x2e1879[_0x17ca65(0x226)]===0x0)_0x2e1879=[_0x17ca65(0x1f3)];this[_0x17ca65(0x1e8)](_0x5922ce[_0x17ca65(0x1e6)],_0x5922ce[_0x17ca65(0x1a2)],{'success':!![],'names':_0x2e1879},_0x5922ce[_0x17ca65(0x20c)]);}catch(_0x107fc1){this[_0x17ca65(0x1e8)](_0x5922ce['from'],_0x5922ce['command'],{'success':![],'error':_0x107fc1['message']},_0x5922ce[_0x17ca65(0x20c)]);}else{if(_0x5922ce[_0x17ca65(0x1a2)]===_0x17ca65(0x1f2))try{await setup['sendNotification'](this,_0x17ca65(0x1fb),![],![]),this['sendTo'](_0x5922ce[_0x17ca65(0x1e6)],_0x5922ce['command'],{'success':!![],'message':_0x17ca65(0x1a7)},_0x5922ce[_0x17ca65(0x20c)]);}catch(_0xde8985){this[_0x17ca65(0x198)][_0x17ca65(0x191)]('Notification\x20Test\x20Failed:\x20'+_0xde8985[_0x17ca65(0x1e7)]),this[_0x17ca65(0x1e8)](_0x5922ce['from'],_0x5922ce['command'],{'success':![],'message':_0x17ca65(0x20d)+_0xde8985[_0x17ca65(0x1e7)]},_0x5922ce[_0x17ca65(0x20c)]);}}}}}}}}}}}}}}}async[a0_0x410121(0x187)](){const _0x364bd4=a0_0x410121;try{const _0x598044=await this[_0x364bd4(0x1c3)](setup[_0x364bd4(0x234)]);_0x598044&&_0x598044[_0x364bd4(0x197)]&&Object[_0x364bd4(0x1fe)](setup[_0x364bd4(0x170)])['includes'](_0x598044['val'])?this[_0x364bd4(0x220)]=_0x598044[_0x364bd4(0x197)]:(this['currentSystemMode']=setup[_0x364bd4(0x170)]['NORMAL'],await this[_0x364bd4(0x1b7)](setup['SYSTEM_DP_MODE'],{'val':setup[_0x364bd4(0x170)]['NORMAL'],'ack':!![]}));}catch(_0x34f0c6){this[_0x364bd4(0x220)]=setup[_0x364bd4(0x170)][_0x364bd4(0x14d)];}}async[a0_0x410121(0x142)](){const _0x1121a3=a0_0x410121;try{const _0x2cc3bd=this[_0x1121a3(0x148)]['presenceDevices']||[];let _0xc07d3c=![];const _0x377e9b=[];for(const _0x5aaa24 of _0x2cc3bd){try{const _0x23743d=await this[_0x1121a3(0x174)](_0x5aaa24);_0x23743d&&(_0x23743d[_0x1121a3(0x197)]===!![]||_0x23743d[_0x1121a3(0x197)]==='online'||_0x23743d['val']===0x1)&&(_0xc07d3c=!![],_0x377e9b['push'](_0x5aaa24));}catch(_0xd1432d){}}return await this[_0x1121a3(0x1b7)](_0x1121a3(0x152),{'val':_0x377e9b[_0x1121a3(0x1d0)](',\x20'),'ack':!![]}),_0xc07d3c&&(this[_0x1121a3(0x19c)]&&(this[_0x1121a3(0x198)][_0x1121a3(0x1e2)](_0x1121a3(0x13b)),recorder[_0x1121a3(0x218)](this)),!this[_0x1121a3(0x1f4)]&&this[_0x1121a3(0x220)]===setup[_0x1121a3(0x170)][_0x1121a3(0x14d)]&&await recorder[_0x1121a3(0x20f)](this,!![])),_0xc07d3c;}catch(_0x53266a){return![];}}async[a0_0x410121(0x1b1)](){const _0x55b757=a0_0x410121;this[_0x55b757(0x198)]['debug'](_0x55b757(0x1b8)),await aiAgent['runGeminiAnalysis'](this),this['updateHealthVector'](),this[_0x55b757(0x14f)](),this[_0x55b757(0x153)]();}async[a0_0x410121(0x201)](){const _0x503a99=a0_0x410121,_0x38ea98=['weatherunderground.0','accuweather.0',_0x503a99(0x172)],_0x53b664=['forecast.current.weather','Current.WeatherText','NextHours.Location_1.Day_1.current.symbol_desc'];for(const _0x258c30 of _0x38ea98){for(const _0x318bdc of _0x53b664){try{const _0x5086ec=_0x258c30+'.'+_0x318bdc,_0xd524a8=await this['getForeignStateAsync'](_0x5086ec);if(_0xd524a8&&_0xd524a8['val']){const _0x526c61=String(_0xd524a8[_0x503a99(0x197)])[_0x503a99(0x137)]();if(_0x526c61[_0x503a99(0x135)](_0x503a99(0x160))||_0x526c61[_0x503a99(0x135)](_0x503a99(0x22d))||_0x526c61[_0x503a99(0x135)](_0x503a99(0x175))||_0x526c61['includes'](_0x503a99(0x16b))||_0x526c61[_0x503a99(0x135)](_0x503a99(0x1a3)))return!![];}}catch(_0x24c382){}}}return![];}[a0_0x410121(0x14f)](){const _0x3545f2=a0_0x410121;if(!this[_0x3545f2(0x1b0)])return;try{this[_0x3545f2(0x1aa)](_0x3545f2(0x235),(_0x5b9745,_0x129672)=>{const _0x5a4fd0=_0x3545f2;_0x129672&&_0x129672[_0x5a4fd0(0x197)]&&pythonBridge[_0x5a4fd0(0x1e9)](this,_0x5a4fd0(0x13c),{'sequences':JSON['parse'](_0x129672[_0x5a4fd0(0x197)])});});}catch(_0x575823){}}async[a0_0x410121(0x153)](){const _0x478ab9=a0_0x410121;if(!this[_0x478ab9(0x1b0)])return;try{const _0x47ee75=await recorder[_0x478ab9(0x168)](this);if(_0x47ee75===null)return;const _0xb723f={},_0x3c102b={},_0x844152=this[_0x478ab9(0x148)][_0x478ab9(0x189)]||[];for(const _0x5439dd of _0x844152){if(_0x5439dd[_0x478ab9(0x17c)]===_0x478ab9(0x195)&&_0x5439dd[_0x478ab9(0x1df)]){const _0x568e72=this[_0x478ab9(0x1b2)][_0x5439dd['id']];if(_0x568e72!==undefined)_0xb723f[_0x5439dd[_0x478ab9(0x1df)]]=_0x568e72;if(_0x5439dd[_0x478ab9(0x1e5)])_0x3c102b[_0x5439dd[_0x478ab9(0x1df)]]=!![];}}const _0x50268e=await this['checkSolarCondition']();let _0x6d5131={};try{const _0x28f4d5=await this[_0x478ab9(0x1c3)](_0x478ab9(0x13f));if(_0x28f4d5&&_0x28f4d5[_0x478ab9(0x197)])_0x6d5131=JSON[_0x478ab9(0x17d)](_0x28f4d5['val']);}catch(_0x38bbc4){}Object['keys'](_0xb723f)[_0x478ab9(0x226)]>0x0&&(pythonBridge[_0x478ab9(0x1e9)](this,_0x478ab9(0x1cd),{'current_temps':_0xb723f,'t_out':_0x47ee75,'is_sunny':_0x50268e,'solar_flags':_0x3c102b,'warmup_targets':_0x6d5131}),pythonBridge[_0x478ab9(0x1e9)](this,_0x478ab9(0x138),{'current_temps':_0xb723f,'t_out':_0x47ee75,'targets':{}}));}catch(_0x58f992){}}[a0_0x410121(0x21d)](){const _0x5304e0=a0_0x410121;if(!this[_0x5304e0(0x210)]||this[_0x5304e0(0x210)][_0x5304e0(0x226)]===0x0)return;const _0x461db3=new Array(0x60)['fill'](0x0),_0x177cfb=new Date()[_0x5304e0(0x203)](0x0,0x0,0x0,0x0);this['rawEventLog'][_0x5304e0(0x22b)](_0x26a5ad=>{const _0x42dc10=_0x5304e0,_0x1692cc=new Date(_0x26a5ad[_0x42dc10(0x1bf)]);if(_0x1692cc[_0x42dc10(0x230)]()>=_0x177cfb){const _0x140934=_0x1692cc['getHours'](),_0x468d20=_0x1692cc[_0x42dc10(0x19d)](),_0x4267b9=_0x140934*0x4+Math['floor'](_0x468d20/0xf);if(_0x4267b9>=0x0&&_0x4267b9<0x60)_0x461db3[_0x4267b9]++;}}),this['setStateAsync']('analysis.health.todayVector',{'val':JSON['stringify'](_0x461db3),'ack':!![]});}[a0_0x410121(0x140)](){const _0x25cff2=a0_0x410121;if(!this['dailyDigests']||this[_0x25cff2(0x1bc)]['length']<0x2)return;const _0x52e734=this[_0x25cff2(0x1bc)][_0x25cff2(0x16c)](_0x4ac8ac=>{const _0x2cf3da=_0x25cff2,_0x5221a2=(_0x4ac8ac[_0x2cf3da(0x1c6)]||'')['toLowerCase']();return ACTIVITY_LEVEL_MAP[_0x5221a2]||0x32;});pythonBridge[_0x25cff2(0x1e9)](this,_0x25cff2(0x1ea),{'values':_0x52e734,'tag':'Activity-Level'});}}if(require[a0_0x410121(0x144)]!==module)module[a0_0x410121(0x154)]=_0x50141a=>new CogniLiving(_0x50141a);else new CogniLiving();