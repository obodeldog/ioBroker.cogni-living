const a0_0x180822=a0_0x44a3;(function(_0x2707da,_0x3f449e){const _0x4a041a=a0_0x44a3,_0x2e88b3=_0x2707da();while(!![]){try{const _0x3d21e5=parseInt(_0x4a041a(0x22e))/0x1+-parseInt(_0x4a041a(0x1c5))/0x2+parseInt(_0x4a041a(0x19a))/0x3+-parseInt(_0x4a041a(0x1fa))/0x4+parseInt(_0x4a041a(0x1b9))/0x5*(parseInt(_0x4a041a(0x217))/0x6)+parseInt(_0x4a041a(0x25f))/0x7+parseInt(_0x4a041a(0x19d))/0x8;if(_0x3d21e5===_0x3f449e)break;else _0x2e88b3['push'](_0x2e88b3['shift']());}catch(_0x5659f5){_0x2e88b3['push'](_0x2e88b3['shift']());}}}(a0_0x3d45,0xa28f4));const a0_0x10271a=(function(){let _0x1c711d=!![];return function(_0xd3e26c,_0x5d7238){const _0x3ac0ad=_0x1c711d?function(){if(_0x5d7238){const _0x1db5c7=_0x5d7238['apply'](_0xd3e26c,arguments);return _0x5d7238=null,_0x1db5c7;}}:function(){};return _0x1c711d=![],_0x3ac0ad;};}()),a0_0x1169c2=a0_0x10271a(this,function(){const _0x35d2ae=a0_0x44a3;return a0_0x1169c2['toString']()[_0x35d2ae(0x191)](_0x35d2ae(0x1c4))['toString']()[_0x35d2ae(0x204)](a0_0x1169c2)[_0x35d2ae(0x191)]('(((.+)+)+)+$');});a0_0x1169c2();function a0_0x44a3(_0x1a8228,_0x3209f1){const _0x55e91c=a0_0x3d45();return a0_0x44a3=function(_0x1169c2,_0x10271a){_0x1169c2=_0x1169c2-0x191;let _0x3d450d=_0x55e91c[_0x1169c2];return _0x3d450d;},a0_0x44a3(_0x1a8228,_0x3209f1);}'use strict';const utils=require('@iobroker/adapter-core'),{GoogleGenerativeAI}=require(a0_0x180822(0x27e)),installer=require(a0_0x180822(0x244)),scanner=require(a0_0x180822(0x280)),schedulers=require(a0_0x180822(0x1a2)),topology=require(a0_0x180822(0x19e)),setup=require('./lib/setup'),recorder=require(a0_0x180822(0x276)),pythonBridge=require(a0_0x180822(0x1fe)),aiAgent=require(a0_0x180822(0x219)),deadMan=require('./lib/dead_man'),automation=require(a0_0x180822(0x226)),GEMINI_MODEL=a0_0x180822(0x1f7),ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};function a0_0x3d45(){const _0x34595a=['setupModeResetScheduler','getState','PREDICT_ENERGY','dailyDigests','weatherunderground.0','.system.mode','system.mode','scanThermostats','log','exitGraceTimer','simulateButler','730919TVsLWt','TRAIN_HEALTH','Current.WeatherText','Kein\x20Wetter-Adapter','Guest\x20Mode','.communicate.request','updateHealthVector','ANALYZE_TREND','SET_LEARNING_MODE','accuweather.0','getGenerativeModel','state','runAutopilot','keys','automation.triggerAction','forecast.current.weather','debug','motion','updateTopology','NORMAL','onReady','sendNotification','response','./lib/recorder','checkSolarCondition','ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...','analysis.energy.mpcActive','analysis.energy.warmupTimes','genAI','command','SYSTEM_MODES','@google/generative-ai','endsWith','./lib/scanner','useWeather','WiFi\x20Presence\x20detected.','common','Keine\x20Antwort\x20von\x20Gemini','setupDriftAnalysisScheduler','join','setPresence','Warm-Up\x20Time\x20(Minutes\x20to\x20Target)','online','analysis.energy.insulationScore','getOverviewData','dismissAutomation','_calName','minDaysForBaseline','onMessage','apiKey','getOutsideTemperatureNumeric','sendTo','loadSystemMode','presenceDevices','VACATION','search','enum.functions.*','minutes_safe','initZombies','isArray','devices','notifyTelegramInstance','calendarName','{\x22default\x22:\x2021}','1306845HGEZOw','driftAnalysisTimer','analysis.topology.structure','824816sGRcxC','./lib/topology','analysis.security.learningStatus','LTM.baselineStatus','analysis.training.triggerSecurity','./lib/scheduler','geminiModel','daswetter.0','ðŸ””\x20Dies\x20ist\x20ein\x20Test\x20von\x20Cogni-Living.','val','getHours','Warm-Up\x20Target\x20Temps\x20(JSON)','analysis.automation.description','calendarInstance','Lernphase\x20(','party','LTM.rawEventLog','error','message','triggerBriefing','push','setObjectNotExistsAsync','runGeminiAnalysis','analysis.trigger','checkLicense','Gemini\x20Init\x20Error:\x20','from','trackerEnabled','1275TVJbJi','eventHistory','map','initSystemConfig','Verbunden','name','createAllObjects','forEach','Fehler:\x20','Kein\x20API\x20Key\x20Ã¼bergeben','fill','(((.+)+)+)+$','2255018OfzRqM','NextHours.Location_1.Day_1.current.symbol_desc','setHours','testNotification','ack','object','Active\x20Ventilation\x20Alerts','version','checkThermostats','rawEventLog','cogni-living','split','json','analysis.training.triggerTopology','instance','type','runPythonHealthCheck','config','Instanz\x20nicht\x20gefunden','callback','setupBriefingScheduler','system.presenceWho','isPresent','ANALYZE_GAIT','Verbindung\x20erfolgreich!','Daten\x20nicht\x20verfÃ¼gbar','isProVersion','sort','Notification\x20Test\x20Failed:\x20','analysisHistory','sendMorningBriefing','geminiApiKey','dependencyInstallInProgress','Gesendet','getStateAsync','analysis.automation.targetValue','updated','TRAIN_ENERGY','lastAlertState','subscribeForeignStatesAsync','Adapter','updateLocation','createDailyDigest','heiter','setupLtmScheduler','SYSTEM_DP_MODE','now','location','TRACK_EVENT','sensorLastValues','models/gemini-flash-latest','LTM.trainingData.thermodynamics','cogni-living\x20adapter\x20starting\x20(v','3414364kyOXrx','briefingJob','checkAndInstall','SET_TOPOLOGY','./lib/python_bridge','TRAIN_COMFORT','modeResetJob','analysis.training.triggerEnergy','temperature','Activity-Level','constructor','getCalendarNames','cancel','text','checkCalendarTriggers','scores','\x20Tage)','includes','analysis.energy.warmupTargets','Test','notifyTelegramEnabled','getLtmData','info','getForeignObjectsAsync','floor','length','sonn','generateContent','analysis.automation.triggerAction','24102gOahJf','startService','./lib/ai_agent','systemConfig','onStateChange','lastTrackerEventTime','bind','trackerHeartbeat','startSystem','initHistory','isSolar','setStateAsync','namespace','triggerEnergyPrediction','analysis.training.triggerHealth','./lib/automation','manual','exitTimer','testApiKey','pop','parse','string','klar','979475gZjsGq','abs','analysis.training.triggerComfort','subscribeStates','clear','ltmJob','TRAIN_SECURITY','getMinutes','scanDevices','checkWifiPresence','setState','values','Party\x20Mode','exports','getForeignStateAsync','Heizung\x20kann\x20','analysisTimer','system.adapter.','analysis.automation.patternDetected','currentSystemMode','analysis.automation.targetId','triggerGaitAnalysis','./lib/installer','onUnload','add','updateTopologyMatrix','LTM.triggerDailyDigest','getTime','toLowerCase','inactivityThresholdHours','analysis.energy.pinnForecast','Sec-Training\x20started...','analysis.triggerBriefing','timestamp','ready','entries','send','LTM.trainingData.sequences'];a0_0x3d45=function(){return _0x34595a;};return a0_0x3d45();}class CogniLiving extends utils[a0_0x180822(0x1ed)]{constructor(_0x1f55b5){const _0x3e4408=a0_0x180822;super({..._0x1f55b5,'name':_0x3e4408(0x1cf)}),this['eventHistory']=[],this[_0x3e4408(0x1e2)]=[],this['rawEventLog']=[],this[_0x3e4408(0x257)]=[],this[_0x3e4408(0x1f6)]={},this[_0x3e4408(0x21a)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x3e4408(0x1db)]=!![],this[_0x3e4408(0x228)]=null,this[_0x3e4408(0x25d)]=null,this['isGracePeriodActive']=![],this[_0x3e4408(0x27b)]=null,this[_0x3e4408(0x1a3)]=null,this[_0x3e4408(0x241)]=setup['SYSTEM_MODES']['NORMAL'],this['isProVersion']=![],this[_0x3e4408(0x1eb)]=![],this['analysisTimer']=null,this[_0x3e4408(0x233)]=null,this['modeResetJob']=null,this[_0x3e4408(0x19b)]=null,this[_0x3e4408(0x1fb)]=null,this['dependencyInstallInProgress']=![],this[_0x3e4408(0x21e)]=null,this['lastTrackerEventTime']=Date[_0x3e4408(0x1f3)](),this['on'](_0x3e4408(0x250),this[_0x3e4408(0x273)]['bind'](this)),this['on']('stateChange',this[_0x3e4408(0x21b)]['bind'](this)),this['on']('unload',this[_0x3e4408(0x245)][_0x3e4408(0x21d)](this)),this['on'](_0x3e4408(0x1af),this['onMessage'][_0x3e4408(0x21d)](this));}async[a0_0x180822(0x273)](){const _0x14275e=a0_0x180822;this['log'][_0x14275e(0x210)](_0x14275e(0x1f9)+this[_0x14275e(0x1cc)]+')\x20-\x20Phase\x20D\x20(Evolution)');if(!installer[_0x14275e(0x1fc)](this,()=>this[_0x14275e(0x21f)]()))return;}async[a0_0x180822(0x21f)](){const _0x24dd7d=a0_0x180822;await setup[_0x24dd7d(0x194)](this);try{this[_0x24dd7d(0x1df)]=await setup[_0x24dd7d(0x1b5)](this[_0x24dd7d(0x1d6)]['licenseKey']);}catch(_0x3d0707){}if(!this[_0x24dd7d(0x1d6)][_0x24dd7d(0x24b)]||this[_0x24dd7d(0x1d6)][_0x24dd7d(0x24b)]<0.1)this[_0x24dd7d(0x1d6)]['inactivityThresholdHours']=0xc;await setup[_0x24dd7d(0x220)](this),await setup[_0x24dd7d(0x1bc)](this);if(this[_0x24dd7d(0x1d6)]['geminiApiKey'])try{this[_0x24dd7d(0x27b)]=new GoogleGenerativeAI(this[_0x24dd7d(0x1d6)][_0x24dd7d(0x1e4)]),this[_0x24dd7d(0x1a3)]=this[_0x24dd7d(0x27b)][_0x24dd7d(0x269)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':'application/json'}}),this['log']['info']('Gemini\x20AI\x20initialized.');}catch(_0x1fe759){this[_0x24dd7d(0x25c)][_0x24dd7d(0x1ae)](_0x24dd7d(0x1b6)+_0x1fe759[_0x24dd7d(0x1af)]);}await setup[_0x24dd7d(0x1bf)](this),await this[_0x24dd7d(0x293)](),await this[_0x24dd7d(0x1b2)](_0x24dd7d(0x24c),{'type':_0x24dd7d(0x26a),'common':{'name':'PINN\x20AI\x20Forecast','type':_0x24dd7d(0x22c),'role':_0x24dd7d(0x1d1),'read':!![],'write':![]},'native':{}}),await this[_0x24dd7d(0x1b2)]('analysis.energy.ventilationAlerts',{'type':'state','common':{'name':_0x24dd7d(0x1cb),'type':_0x24dd7d(0x22c),'role':_0x24dd7d(0x1d1),'read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x24dd7d(0x27a),{'type':_0x24dd7d(0x26a),'common':{'name':_0x24dd7d(0x288),'type':_0x24dd7d(0x22c),'role':'json','read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x24dd7d(0x20c),{'type':_0x24dd7d(0x26a),'common':{'name':_0x24dd7d(0x1a8),'type':_0x24dd7d(0x22c),'role':_0x24dd7d(0x1d1),'read':!![],'write':!![],'def':_0x24dd7d(0x199)},'native':{}});try{const _0x43190e=await this['getStateAsync'](_0x24dd7d(0x1ad));if(_0x43190e&&_0x43190e[_0x24dd7d(0x1a6)])this[_0x24dd7d(0x1ce)]=JSON[_0x24dd7d(0x22b)](_0x43190e['val']);}catch(_0xa4a59e){this[_0x24dd7d(0x1ce)]=[];}try{const _0x78262b=await this[_0x24dd7d(0x1e7)]('LTM.dailyDigests');if(_0x78262b&&_0x78262b[_0x24dd7d(0x1a6)])this['dailyDigests']=JSON[_0x24dd7d(0x22b)](_0x78262b[_0x24dd7d(0x1a6)]);}catch(_0x1c0a39){this['dailyDigests']=[];}const _0x253070=this[_0x24dd7d(0x257)][_0x24dd7d(0x213)]>=(this[_0x24dd7d(0x1d6)]['minDaysForBaseline']||0x7)?'Aktiv\x20('+this[_0x24dd7d(0x257)][_0x24dd7d(0x213)]+_0x24dd7d(0x20a):_0x24dd7d(0x1ab)+this[_0x24dd7d(0x257)][_0x24dd7d(0x213)]+'/'+(this[_0x24dd7d(0x1d6)][_0x24dd7d(0x28e)]||0x7)+')';await this[_0x24dd7d(0x222)](_0x24dd7d(0x1a0),{'val':_0x253070,'ack':!![]}),this[_0x24dd7d(0x231)]('analysis.trigger'),this['subscribeStates'](_0x24dd7d(0x248)),this[_0x24dd7d(0x231)](_0x24dd7d(0x25a)),this[_0x24dd7d(0x231)](_0x24dd7d(0x24e)),this[_0x24dd7d(0x231)](_0x24dd7d(0x216)),this[_0x24dd7d(0x231)]('analysis.automation.autoApply'),this[_0x24dd7d(0x231)](_0x24dd7d(0x1a1)),this[_0x24dd7d(0x231)](_0x24dd7d(0x225)),this[_0x24dd7d(0x231)](_0x24dd7d(0x201)),this['subscribeStates'](_0x24dd7d(0x230)),this[_0x24dd7d(0x231)](_0x24dd7d(0x1d2)),this['subscribeStates'](_0x24dd7d(0x279));const _0x480f0f=this[_0x24dd7d(0x1d6)][_0x24dd7d(0x196)];if(_0x480f0f)for(const _0x5b05c1 of _0x480f0f){await this[_0x24dd7d(0x1ec)](_0x5b05c1['id']);}const _0x2e3781=this['config'][_0x24dd7d(0x294)];if(_0x2e3781)for(const _0x390d44 of _0x2e3781){await this[_0x24dd7d(0x1ec)](_0x390d44);}if(this[_0x24dd7d(0x1d6)][_0x24dd7d(0x20e)]&&this[_0x24dd7d(0x1d6)]['notifyTelegramInstance'])await this[_0x24dd7d(0x1ec)](this[_0x24dd7d(0x1d6)][_0x24dd7d(0x197)]+_0x24dd7d(0x264));setTimeout(()=>this[_0x24dd7d(0x237)](),0x1388);if(this[_0x24dd7d(0x23e)])clearInterval(this[_0x24dd7d(0x23e)]);const _0x190b46=this[_0x24dd7d(0x1d6)]['analysisInterval']||0xf;_0x190b46>0x0&&(this[_0x24dd7d(0x23e)]=setInterval(()=>{const _0x33cfd6=_0x24dd7d;this[_0x33cfd6(0x26b)](),automation['checkCalendarTriggers'](this);},_0x190b46*0x3c*0x3e8)),setTimeout(()=>automation[_0x24dd7d(0x208)](this),0x2710),this[_0x24dd7d(0x1d6)][_0x24dd7d(0x1b8)]!==![]&&(this[_0x24dd7d(0x21e)]=setInterval(()=>{const _0x1688f1=_0x24dd7d;if(this[_0x1688f1(0x1df)]){const _0xed874d=Date['now'](),_0x4b8018=this['lastTrackerEventTime']||_0xed874d,_0x36ba8e=(_0xed874d-_0x4b8018)/0x3e8;_0x36ba8e>0x2&&(this[_0x1688f1(0x21c)]=_0xed874d,pythonBridge[_0x1688f1(0x252)](this,_0x1688f1(0x1f5),{'room':null,'dt':_0x36ba8e}));}},0xbb8)),schedulers[_0x24dd7d(0x1f1)](this,()=>aiAgent['createDailyDigest'](this,pythonBridge)),schedulers[_0x24dd7d(0x254)](this),schedulers[_0x24dd7d(0x285)](this,()=>aiAgent['runBaselineDriftAnalysis'](this)),schedulers[_0x24dd7d(0x1d9)](this,()=>aiAgent[_0x24dd7d(0x1e3)](this)),pythonBridge[_0x24dd7d(0x218)](this,installer['PYTHON_EXE']),setTimeout(async()=>{const _0x519679=_0x24dd7d;await topology[_0x519679(0x271)](this);try{const _0x4b0784=await this[_0x519679(0x1e7)](_0x519679(0x19c));if(_0x4b0784&&_0x4b0784['val'])pythonBridge[_0x519679(0x252)](this,_0x519679(0x1fd),JSON[_0x519679(0x22b)](_0x4b0784[_0x519679(0x1a6)]));}catch(_0x5a4dcf){}this[_0x519679(0x1d5)](),this['triggerGaitAnalysis'](),this['triggerEnergyPrediction'](),this['updateHealthVector']();},0x1388);}[a0_0x180822(0x245)](_0x46c6cd){const _0x4a548b=a0_0x180822;if(this[_0x4a548b(0x23e)])clearInterval(this['analysisTimer']);if(this['driftAnalysisTimer'])clearInterval(this[_0x4a548b(0x19b)]);if(this[_0x4a548b(0x21e)])clearInterval(this['trackerHeartbeat']);if(this[_0x4a548b(0x233)])this[_0x4a548b(0x233)][_0x4a548b(0x206)]();if(this[_0x4a548b(0x200)])this['modeResetJob']['cancel']();if(this[_0x4a548b(0x1fb)])this[_0x4a548b(0x1fb)][_0x4a548b(0x206)]();recorder['abortExitTimer'](this),pythonBridge['stopService'](this),_0x46c6cd();}async[a0_0x180822(0x21b)](_0x135a93,_0x5aa7ee){const _0x17d0b7=a0_0x180822;if(!_0x5aa7ee||this[_0x17d0b7(0x1e5)])return;if(_0x135a93['includes']('telegram')&&_0x135a93[_0x17d0b7(0x27f)]('communicate.request')&&_0x5aa7ee['val'])return;if(_0x135a93===this[_0x17d0b7(0x223)]+_0x17d0b7(0x259)){if(_0x5aa7ee[_0x17d0b7(0x1a6)]&&Object[_0x17d0b7(0x239)](setup[_0x17d0b7(0x27d)])[_0x17d0b7(0x20b)](_0x5aa7ee[_0x17d0b7(0x1a6)])){this[_0x17d0b7(0x241)]=_0x5aa7ee[_0x17d0b7(0x1a6)];if(_0x5aa7ee[_0x17d0b7(0x1a6)]===setup[_0x17d0b7(0x27d)][_0x17d0b7(0x295)])await recorder[_0x17d0b7(0x287)](this,![]);else await recorder[_0x17d0b7(0x287)](this,!![]);if(this[_0x17d0b7(0x1df)]){let _0x1f9e11=![],_0x4b4486=0x0,_0x3ab98a=_0x17d0b7(0x227);if(this['currentSystemMode']===_0x17d0b7(0x1ac))_0x1f9e11=!![],_0x4b4486=0x168,_0x3ab98a=_0x17d0b7(0x23a);else this[_0x17d0b7(0x241)]==='guest'&&(_0x1f9e11=!![],_0x4b4486=0x5a0,_0x3ab98a=_0x17d0b7(0x263));pythonBridge[_0x17d0b7(0x252)](this,_0x17d0b7(0x267),{'active':_0x1f9e11,'duration':_0x4b4486,'label':_0x3ab98a}),await this[_0x17d0b7(0x222)](_0x17d0b7(0x19f),{'val':JSON['stringify']({'active':_0x1f9e11,'label':_0x3ab98a,'timestamp':Date[_0x17d0b7(0x1f3)]()}),'ack':!![]});}}if(!_0x5aa7ee[_0x17d0b7(0x1c9)])this[_0x17d0b7(0x238)](_0x135a93,{'val':this[_0x17d0b7(0x241)],'ack':!![]});return;}if(!_0x5aa7ee['ack']){if(_0x135a93[_0x17d0b7(0x20b)](_0x17d0b7(0x1b4))&&_0x5aa7ee['val']){this[_0x17d0b7(0x238)](_0x135a93,{'val':![],'ack':!![]}),aiAgent[_0x17d0b7(0x1b3)](this);return;}if(_0x135a93[_0x17d0b7(0x20b)]('triggerDailyDigest')&&_0x5aa7ee[_0x17d0b7(0x1a6)]){this[_0x17d0b7(0x238)](_0x135a93,{'val':![],'ack':!![]});if(this[_0x17d0b7(0x1df)])aiAgent[_0x17d0b7(0x1ef)](this,pythonBridge);return;}if(_0x135a93[_0x17d0b7(0x20b)](_0x17d0b7(0x1b0))&&_0x5aa7ee[_0x17d0b7(0x1a6)]){this['setState'](_0x135a93,{'val':![],'ack':!![]}),aiAgent[_0x17d0b7(0x1e3)](this);return;}if(_0x135a93[_0x17d0b7(0x20b)](_0x17d0b7(0x26d))&&_0x5aa7ee[_0x17d0b7(0x1a6)]){this[_0x17d0b7(0x238)](_0x135a93,{'val':![],'ack':!![]}),aiAgent['executeAutomationAction'](this);return;}if(_0x135a93[_0x17d0b7(0x20b)](_0x17d0b7(0x1a1))&&_0x5aa7ee[_0x17d0b7(0x1a6)]){this['setState'](_0x135a93,{'val':![],'ack':!![]});if(this[_0x17d0b7(0x1df)])try{const _0x1edfec=await this[_0x17d0b7(0x1e7)](_0x17d0b7(0x253));if(_0x1edfec&&_0x1edfec[_0x17d0b7(0x1a6)]){const _0x709247=JSON[_0x17d0b7(0x22b)](_0x1edfec['val']);this[_0x17d0b7(0x222)]('analysis.training.status',{'val':_0x17d0b7(0x24d),'ack':!![]}),pythonBridge[_0x17d0b7(0x252)](this,_0x17d0b7(0x234),{'sequences':_0x709247});}}catch(_0xb8ab9){}return;}if(_0x135a93['includes'](_0x17d0b7(0x225))&&_0x5aa7ee[_0x17d0b7(0x1a6)]){this[_0x17d0b7(0x238)](_0x135a93,{'val':![],'ack':!![]});if(this[_0x17d0b7(0x1df)])try{const _0x2909d1=await this['getStateAsync']('LTM.dailyDigests');if(_0x2909d1&&_0x2909d1[_0x17d0b7(0x1a6)])pythonBridge[_0x17d0b7(0x252)](this,_0x17d0b7(0x260),{'digests':JSON[_0x17d0b7(0x22b)](_0x2909d1[_0x17d0b7(0x1a6)])});}catch(_0x2cb53a){}return;}if(_0x135a93[_0x17d0b7(0x20b)](_0x17d0b7(0x201))&&_0x5aa7ee[_0x17d0b7(0x1a6)]){this[_0x17d0b7(0x238)](_0x135a93,{'val':![],'ack':!![]});if(this[_0x17d0b7(0x1df)])try{const _0x2eb97e=await this[_0x17d0b7(0x1e7)](_0x17d0b7(0x1f8));if(_0x2eb97e&&_0x2eb97e['val'])pythonBridge[_0x17d0b7(0x252)](this,_0x17d0b7(0x1ea),{'points':JSON[_0x17d0b7(0x22b)](_0x2eb97e[_0x17d0b7(0x1a6)])});}catch(_0x1cbccb){}return;}if(_0x135a93[_0x17d0b7(0x20b)](_0x17d0b7(0x230))&&_0x5aa7ee[_0x17d0b7(0x1a6)]){this[_0x17d0b7(0x238)](_0x135a93,{'val':![],'ack':!![]});if(this[_0x17d0b7(0x1df)])try{const _0x5aa36d=await this[_0x17d0b7(0x1e7)](_0x17d0b7(0x1ad));if(_0x5aa36d&&_0x5aa36d['val'])pythonBridge['send'](this,_0x17d0b7(0x1ff),{'events':JSON[_0x17d0b7(0x22b)](_0x5aa36d['val'])});}catch(_0x58bd57){}return;}if(_0x135a93[_0x17d0b7(0x20b)]('analysis.training.triggerTopology')&&_0x5aa7ee[_0x17d0b7(0x1a6)]){this[_0x17d0b7(0x238)](_0x135a93,{'val':![],'ack':!![]}),topology[_0x17d0b7(0x271)](this);return;}}if(this[_0x17d0b7(0x1d6)][_0x17d0b7(0x294)]&&this[_0x17d0b7(0x1d6)][_0x17d0b7(0x294)][_0x17d0b7(0x20b)](_0x135a93)){await this[_0x17d0b7(0x237)]();return;}const _0x4fdddc=(this[_0x17d0b7(0x1d6)][_0x17d0b7(0x196)]||[])['find'](_0x3bc6f1=>_0x3bc6f1['id']===_0x135a93);if(_0x4fdddc){const _0x59fd05=await recorder['processSensorEvent'](this,_0x135a93,_0x5aa7ee,_0x4fdddc);_0x59fd05&&_0x59fd05[_0x17d0b7(0x1d4)]===_0x17d0b7(0x270)&&_0x59fd05[_0x17d0b7(0x1f4)]&&this['isProVersion']&&deadMan[_0x17d0b7(0x1ee)](this,_0x59fd05['location']);}}async[a0_0x180822(0x28f)](_0x53d645){const _0x540f68=a0_0x180822;if(typeof _0x53d645===_0x540f68(0x1ca)&&_0x53d645[_0x540f68(0x1af)]){if(_0x53d645['command']===_0x540f68(0x1cd))try{const _0x39a47b=await automation[_0x540f68(0x25b)](this);this['sendTo'](_0x53d645['from'],_0x53d645[_0x540f68(0x27c)],{'success':!![],'results':_0x39a47b},_0x53d645['callback']);}catch(_0x1d04c0){this['sendTo'](_0x53d645[_0x540f68(0x1b7)],_0x53d645['command'],{'success':![],'error':_0x1d04c0[_0x540f68(0x1af)]},_0x53d645['callback']);}else{if(_0x53d645['command']==='simulateEnergyMPC')try{const {current_temps:_0x1a66bc,t_out:_0x29cd8c,targets:_0x168d6a,t_forecast:_0x27e883}=_0x53d645['message'],_0x404742=[];let _0x123ba1={};try{const _0x2066e3=await this['getStateAsync'](_0x540f68(0x28a));if(_0x2066e3&&_0x2066e3['val']){const _0x255a81=JSON[_0x540f68(0x22b)](_0x2066e3[_0x540f68(0x1a6)]);_0x123ba1=_0x255a81[_0x540f68(0x209)]||_0x255a81;}}catch(_0x539c7e){}const _0x14b86e=_0x27e883!==undefined&&_0x27e883!==null?(_0x29cd8c+_0x27e883)/0x2:_0x29cd8c;for(const [_0x45d889,_0x33a836]of Object[_0x540f68(0x251)](_0x1a66bc)){const _0x5d6fb0=_0x168d6a[_0x45d889]||0x15;if(_0x33a836<=_0x5d6fb0)continue;let _0xfc2e8=_0x123ba1[_0x45d889]||-0.5;if(_0xfc2e8>=0x0)_0xfc2e8=-0.5;const _0x2f9a03=Math[_0x540f68(0x22f)](_0xfc2e8),_0x6839c8=_0x33a836-_0x5d6fb0;let _0x135549=Math[_0x540f68(0x212)](_0x6839c8/_0x2f9a03*0x3c);const _0x304067=_0x33a836-_0x29cd8c,_0x557dde=_0x33a836-_0x14b86e;if(_0x557dde!==0x0&&_0x304067!==0x0){const _0x5efd27=_0x304067/_0x557dde;_0x135549=Math[_0x540f68(0x212)](_0x135549*_0x5efd27);}if(_0x135549>0xf){if(_0x135549>0xf0)_0x135549=0xf0;_0x404742[_0x540f68(0x1b1)]({'room':_0x45d889,'minutes_safe':_0x135549,'target':_0x5d6fb0,'current':_0x33a836,'savings_msg':_0x540f68(0x23d)+_0x135549+'\x20min\x20ausbleiben.'});}}_0x404742[_0x540f68(0x1e0)]((_0x3f1cf9,_0xec1d90)=>_0xec1d90[_0x540f68(0x193)]-_0x3f1cf9[_0x540f68(0x193)]),this[_0x540f68(0x292)](_0x53d645['from'],_0x53d645[_0x540f68(0x27c)],{'success':!![],'proposals':_0x404742},_0x53d645[_0x540f68(0x1d8)]);}catch(_0x58105d){this[_0x540f68(0x292)](_0x53d645['from'],_0x53d645[_0x540f68(0x27c)],{'success':![],'error':_0x58105d[_0x540f68(0x1af)]},_0x53d645['callback']);}else{if(_0x53d645[_0x540f68(0x27c)]===_0x540f68(0x28c))await this[_0x540f68(0x222)]('analysis.automation.patternDetected',{'val':![],'ack':!![]}),await this[_0x540f68(0x222)]('analysis.automation.description',{'val':'','ack':!![]}),await this[_0x540f68(0x222)](_0x540f68(0x242),{'val':'','ack':!![]}),this[_0x540f68(0x292)](_0x53d645[_0x540f68(0x1b7)],_0x53d645[_0x540f68(0x27c)],{'success':!![]},_0x53d645['callback']);else{if(_0x53d645['command']===_0x540f68(0x25e)){const {targetId:_0x304a0a,targetValue:_0x1bf98a}=_0x53d645[_0x540f68(0x1af)];await this[_0x540f68(0x222)]('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),await this[_0x540f68(0x222)](_0x540f68(0x1a9),{'val':'Simulation\x20durch\x20Admin\x20(Test)','ack':!![]}),await this[_0x540f68(0x222)](_0x540f68(0x242),{'val':_0x304a0a,'ack':!![]}),await this['setStateAsync'](_0x540f68(0x1e8),{'val':String(_0x1bf98a),'ack':!![]}),this[_0x540f68(0x292)](_0x53d645[_0x540f68(0x1b7)],_0x53d645[_0x540f68(0x27c)],{'success':!![]},_0x53d645[_0x540f68(0x1d8)]);}else{if(_0x53d645[_0x540f68(0x27c)]===_0x540f68(0x229))try{const _0x7d61fb=_0x53d645['message'][_0x540f68(0x290)];if(!_0x7d61fb)throw new Error(_0x540f68(0x1c2));const _0x2a2ef8=new GoogleGenerativeAI(_0x7d61fb),_0x4906e8=_0x2a2ef8[_0x540f68(0x269)]({'model':GEMINI_MODEL}),_0x156a6c=await _0x4906e8[_0x540f68(0x215)](_0x540f68(0x20d)),_0x51f410=await _0x156a6c[_0x540f68(0x275)];if(_0x51f410[_0x540f68(0x207)]())this[_0x540f68(0x292)](_0x53d645[_0x540f68(0x1b7)],_0x53d645[_0x540f68(0x27c)],{'success':!![],'message':_0x540f68(0x1dd)},_0x53d645[_0x540f68(0x1d8)]);else throw new Error(_0x540f68(0x284));}catch(_0x4afc4b){this[_0x540f68(0x292)](_0x53d645[_0x540f68(0x1b7)],_0x53d645['command'],{'success':![],'message':_0x4afc4b['message']},_0x53d645[_0x540f68(0x1d8)]);}else{if(_0x53d645[_0x540f68(0x27c)]===_0x540f68(0x236))try{const _0x1be423=await scanner['scanForDevices'](this,_0x53d645[_0x540f68(0x1af)]||{});this[_0x540f68(0x292)](_0x53d645[_0x540f68(0x1b7)],_0x53d645[_0x540f68(0x27c)],{'success':!![],'devices':_0x1be423},_0x53d645[_0x540f68(0x1d8)]);}catch(_0x1ba2ee){this[_0x540f68(0x292)](_0x53d645[_0x540f68(0x1b7)],_0x53d645['command'],{'success':![],'error':_0x1ba2ee[_0x540f68(0x1af)]},_0x53d645[_0x540f68(0x1d8)]);}else{if(_0x53d645['command']===_0x540f68(0x247))try{const {matrix:_0x1bb7f1}=_0x53d645[_0x540f68(0x1af)],_0x28e93b=await this[_0x540f68(0x1e7)]('analysis.topology.structure');if(_0x28e93b&&_0x28e93b[_0x540f68(0x1a6)]){const _0x29385d=JSON[_0x540f68(0x22b)](_0x28e93b[_0x540f68(0x1a6)]);_0x29385d['matrix']=_0x1bb7f1,_0x29385d[_0x540f68(0x1e9)]=Date[_0x540f68(0x1f3)](),await this[_0x540f68(0x222)]('analysis.topology.structure',{'val':JSON['stringify'](_0x29385d),'ack':!![]}),pythonBridge[_0x540f68(0x252)](this,_0x540f68(0x1fd),_0x29385d);}this[_0x540f68(0x292)](_0x53d645[_0x540f68(0x1b7)],_0x53d645[_0x540f68(0x27c)],{'success':!![]},_0x53d645[_0x540f68(0x1d8)]);}catch(_0x2664e2){this[_0x540f68(0x25c)][_0x540f68(0x1ae)](_0x2664e2);}else{if(_0x53d645[_0x540f68(0x27c)]===_0x540f68(0x20f))this[_0x540f68(0x292)](_0x53d645[_0x540f68(0x1b7)],_0x53d645[_0x540f68(0x27c)],{'success':!![],'dailyDigests':this[_0x540f68(0x257)]||[],'analysisHistory':this[_0x540f68(0x1e2)]||[]},_0x53d645['callback']);else{if(_0x53d645['command']===_0x540f68(0x28b)){const _0x3cdfe9=this[_0x540f68(0x257)][_0x540f68(0x213)],_0xb6f2b2=new Array(0x18)[_0x540f68(0x1c3)](0x0),_0x300203=new Date()[_0x540f68(0x1c7)](0x0,0x0,0x0,0x0);this['eventHistory']&&this[_0x540f68(0x1ba)][_0x540f68(0x1c0)](_0xbfc376=>{const _0xabbbad=_0x540f68;if(_0xbfc376[_0xabbbad(0x24f)]>=_0x300203){const _0x3437dd=new Date(_0xbfc376[_0xabbbad(0x24f)])[_0xabbbad(0x1a7)]();if(_0x3437dd>=0x0&&_0x3437dd<0x18)_0xb6f2b2[_0x3437dd]++;}});let _0x1035d9=![],_0x4de627='',_0x49ab0f='',_0x1f75b2='';try{const _0x20bbc5=await this['getStateAsync'](_0x540f68(0x240));if(_0x20bbc5&&_0x20bbc5[_0x540f68(0x1a6)]){_0x1035d9=!![];const _0x4cb7d9=await this[_0x540f68(0x1e7)](_0x540f68(0x1a9));_0x4de627=_0x4cb7d9?_0x4cb7d9[_0x540f68(0x1a6)]:'';const _0x488919=await this[_0x540f68(0x1e7)](_0x540f68(0x242));_0x49ab0f=_0x488919?_0x488919['val']:'';const _0xad1f97=await this[_0x540f68(0x1e7)](_0x540f68(0x1e8));_0x1f75b2=_0xad1f97?_0xad1f97[_0x540f68(0x1a6)]:'';}}catch(_0x142d2d){}const _0x1b9418=await this['checkSolarCondition'](),_0x59c367=(this['config'][_0x540f68(0x196)]||[])['some'](_0x298a4f=>_0x298a4f[_0x540f68(0x221)]),_0x300513=_0x1b9418&&_0x59c367;this[_0x540f68(0x292)](_0x53d645[_0x540f68(0x1b7)],_0x53d645[_0x540f68(0x27c)],{'success':!![],'eventHistory':this[_0x540f68(0x1ba)]['slice'](0x0,0xf),'stats':{'digestCount':_0x3cdfe9,'isPresent':this[_0x540f68(0x1db)],'hourlyActivity':_0xb6f2b2,'solarActive':_0x300513},'automation':{'detected':_0x1035d9,'description':_0x4de627,'targetId':_0x49ab0f,'targetValue':_0x1f75b2}},_0x53d645[_0x540f68(0x1d8)]);}else{if(_0x53d645[_0x540f68(0x27c)]==='getEnums'){const _0x6c5aab=await this[_0x540f68(0x211)](_0x540f68(0x192),'enum'),_0x5cb858=[];if(_0x6c5aab)for(const _0x51e8ae in _0x6c5aab){const _0x57f237=_0x6c5aab[_0x51e8ae],_0x265f1c=(_0x57f237[_0x540f68(0x283)]&&typeof _0x57f237[_0x540f68(0x283)][_0x540f68(0x1be)]==='object'?_0x57f237[_0x540f68(0x283)][_0x540f68(0x1be)]['de']:_0x57f237['common'][_0x540f68(0x1be)])||_0x57f237[_0x540f68(0x283)]['name'];_0x5cb858[_0x540f68(0x1b1)]({'id':_0x51e8ae,'name':_0x265f1c});}const _0x49c223=await this[_0x540f68(0x211)]('enum.rooms.*','enum'),_0x572276=[];if(_0x49c223)for(const _0x5baa5e in _0x49c223){const _0x4f98d5=_0x49c223[_0x5baa5e],_0x578750=(_0x4f98d5[_0x540f68(0x283)]&&typeof _0x4f98d5[_0x540f68(0x283)]['name']==='object'?_0x4f98d5[_0x540f68(0x283)][_0x540f68(0x1be)]['de']:_0x4f98d5['common'][_0x540f68(0x1be)])||_0x5baa5e[_0x540f68(0x1d0)]('.')[_0x540f68(0x22a)]();_0x572276[_0x540f68(0x1b1)](_0x578750);}this[_0x540f68(0x292)](_0x53d645[_0x540f68(0x1b7)],_0x53d645[_0x540f68(0x27c)],{'success':!![],'enums':_0x5cb858,'rooms':_0x572276},_0x53d645['callback']);}else{if(_0x53d645[_0x540f68(0x27c)]==='testContext')try{let _0x47347d=_0x540f68(0x262),_0x2259e2='Kein\x20Kalender-Adapter';if(this['config'][_0x540f68(0x281)]){const _0x18040f=await recorder[_0x540f68(0x291)](this);_0x47347d=_0x18040f!==null?_0x18040f+'Â°C':_0x540f68(0x1de);}if(this[_0x540f68(0x1d6)]['calendarInstance']){const _0x5f8143=await this['getForeignObjectAsync'](_0x540f68(0x23f)+this[_0x540f68(0x1d6)][_0x540f68(0x1aa)]);_0x2259e2=_0x5f8143?_0x540f68(0x1bd):_0x540f68(0x1d7);}this[_0x540f68(0x292)](_0x53d645[_0x540f68(0x1b7)],_0x53d645[_0x540f68(0x27c)],{'success':!![],'weather':_0x47347d,'calendar':_0x2259e2},_0x53d645['callback']);}catch(_0x414914){this[_0x540f68(0x292)](_0x53d645[_0x540f68(0x1b7)],_0x53d645['command'],{'success':![],'error':_0x414914[_0x540f68(0x1af)]},_0x53d645[_0x540f68(0x1d8)]);}else{if(_0x53d645[_0x540f68(0x27c)]===_0x540f68(0x205))try{const _0x701764=_0x53d645[_0x540f68(0x1af)][_0x540f68(0x1d3)],_0x1da469=await this['getForeignStateAsync'](_0x701764+'.data.table');let _0x29c622=[];if(_0x1da469&&_0x1da469[_0x540f68(0x1a6)]){const _0xbbebc1=JSON[_0x540f68(0x22b)](_0x1da469['val']),_0xa3943f=new Set();Array[_0x540f68(0x195)](_0xbbebc1)&&_0xbbebc1[_0x540f68(0x1c0)](_0x41e3a5=>{const _0x4fe066=_0x540f68;if(_0x41e3a5[_0x4fe066(0x28d)])_0xa3943f[_0x4fe066(0x246)](_0x41e3a5[_0x4fe066(0x28d)]);else{if(_0x41e3a5[_0x4fe066(0x198)])_0xa3943f['add'](_0x41e3a5[_0x4fe066(0x198)]);}}),_0x29c622=Array[_0x540f68(0x1b7)](_0xa3943f)[_0x540f68(0x1e0)]();}if(_0x29c622[_0x540f68(0x213)]===0x0)_0x29c622=['Standard'];this[_0x540f68(0x292)](_0x53d645[_0x540f68(0x1b7)],_0x53d645[_0x540f68(0x27c)],{'success':!![],'names':_0x29c622},_0x53d645['callback']);}catch(_0x335e20){this['sendTo'](_0x53d645['from'],_0x53d645[_0x540f68(0x27c)],{'success':![],'error':_0x335e20[_0x540f68(0x1af)]},_0x53d645[_0x540f68(0x1d8)]);}else{if(_0x53d645[_0x540f68(0x27c)]===_0x540f68(0x1c8))try{await setup[_0x540f68(0x274)](this,_0x540f68(0x1a5),![],![]),this[_0x540f68(0x292)](_0x53d645[_0x540f68(0x1b7)],_0x53d645[_0x540f68(0x27c)],{'success':!![],'message':_0x540f68(0x1e6)},_0x53d645[_0x540f68(0x1d8)]);}catch(_0x33c306){this[_0x540f68(0x25c)][_0x540f68(0x1ae)](_0x540f68(0x1e1)+_0x33c306[_0x540f68(0x1af)]),this['sendTo'](_0x53d645[_0x540f68(0x1b7)],_0x53d645[_0x540f68(0x27c)],{'success':![],'message':_0x540f68(0x1c1)+_0x33c306[_0x540f68(0x1af)]},_0x53d645[_0x540f68(0x1d8)]);}}}}}}}}}}}}}}}async[a0_0x180822(0x293)](){const _0x503230=a0_0x180822;try{const _0x48a0f8=await this['getStateAsync'](setup[_0x503230(0x1f2)]);_0x48a0f8&&_0x48a0f8['val']&&Object[_0x503230(0x239)](setup['SYSTEM_MODES'])[_0x503230(0x20b)](_0x48a0f8[_0x503230(0x1a6)])?this['currentSystemMode']=_0x48a0f8[_0x503230(0x1a6)]:(this[_0x503230(0x241)]=setup[_0x503230(0x27d)][_0x503230(0x272)],await this['setStateAsync'](setup[_0x503230(0x1f2)],{'val':setup[_0x503230(0x27d)][_0x503230(0x272)],'ack':!![]}));}catch(_0x35023e){this[_0x503230(0x241)]=setup[_0x503230(0x27d)]['NORMAL'];}}async[a0_0x180822(0x237)](){const _0x28b8b0=a0_0x180822;try{const _0x56b52e=this['config'][_0x28b8b0(0x294)]||[];let _0x22b84e=![];const _0x57d1ee=[];for(const _0x13f865 of _0x56b52e){try{const _0x54adea=await this[_0x28b8b0(0x23c)](_0x13f865);_0x54adea&&(_0x54adea['val']===!![]||_0x54adea[_0x28b8b0(0x1a6)]===_0x28b8b0(0x289)||_0x54adea[_0x28b8b0(0x1a6)]===0x1)&&(_0x22b84e=!![],_0x57d1ee['push'](_0x13f865));}catch(_0x5c410a){}}return await this[_0x28b8b0(0x222)](_0x28b8b0(0x1da),{'val':_0x57d1ee[_0x28b8b0(0x286)](',\x20'),'ack':!![]}),_0x22b84e&&(this['exitTimer']&&(this[_0x28b8b0(0x25c)][_0x28b8b0(0x210)](_0x28b8b0(0x282)),recorder['abortExitTimer'](this)),!this['isPresent']&&this[_0x28b8b0(0x241)]===setup[_0x28b8b0(0x27d)]['NORMAL']&&await recorder[_0x28b8b0(0x287)](this,!![])),_0x22b84e;}catch(_0x542580){return![];}}async[a0_0x180822(0x26b)](){const _0x49d5ce=a0_0x180822;this['log'][_0x49d5ce(0x26f)](_0x49d5ce(0x278)),await aiAgent[_0x49d5ce(0x1b3)](this),this[_0x49d5ce(0x265)](),this[_0x49d5ce(0x243)](),this[_0x49d5ce(0x224)]();}async['checkSolarCondition'](){const _0x38d08a=a0_0x180822,_0x9eba9a=[_0x38d08a(0x258),_0x38d08a(0x268),_0x38d08a(0x1a4)],_0x2ae016=[_0x38d08a(0x26e),_0x38d08a(0x261),_0x38d08a(0x1c6)];for(const _0x4f0b37 of _0x9eba9a){for(const _0x2cee54 of _0x2ae016){try{const _0x24f68b=_0x4f0b37+'.'+_0x2cee54,_0x107ac7=await this[_0x38d08a(0x23c)](_0x24f68b);if(_0x107ac7&&_0x107ac7[_0x38d08a(0x1a6)]){const _0x122bd4=String(_0x107ac7[_0x38d08a(0x1a6)])[_0x38d08a(0x24a)]();if(_0x122bd4[_0x38d08a(0x20b)](_0x38d08a(0x214))||_0x122bd4[_0x38d08a(0x20b)]('sunny')||_0x122bd4['includes'](_0x38d08a(0x22d))||_0x122bd4['includes'](_0x38d08a(0x232))||_0x122bd4[_0x38d08a(0x20b)](_0x38d08a(0x1f0)))return!![];}}catch(_0x474c9e){}}}return![];}[a0_0x180822(0x243)](){const _0x3b165f=a0_0x180822;if(!this[_0x3b165f(0x1df)])return;try{this[_0x3b165f(0x255)](_0x3b165f(0x253),(_0xa13ae5,_0x148234)=>{const _0x3af46b=_0x3b165f;_0x148234&&_0x148234[_0x3af46b(0x1a6)]&&pythonBridge['send'](this,_0x3af46b(0x1dc),{'sequences':JSON['parse'](_0x148234[_0x3af46b(0x1a6)])});});}catch(_0x111b5e){}}async[a0_0x180822(0x224)](){const _0x51b0a4=a0_0x180822;if(!this[_0x51b0a4(0x1df)])return;try{const _0x2e5ae3=await recorder['getOutsideTemperatureNumeric'](this);if(_0x2e5ae3===null)return;const _0x45c080={},_0x137204={},_0x46c0a5=this[_0x51b0a4(0x1d6)][_0x51b0a4(0x196)]||[];for(const _0x542a5a of _0x46c0a5){if(_0x542a5a['type']===_0x51b0a4(0x202)&&_0x542a5a['location']){const _0x41efc7=this[_0x51b0a4(0x1f6)][_0x542a5a['id']];if(_0x41efc7!==undefined)_0x45c080[_0x542a5a[_0x51b0a4(0x1f4)]]=_0x41efc7;if(_0x542a5a['isSolar'])_0x137204[_0x542a5a[_0x51b0a4(0x1f4)]]=!![];}}const _0x568739=await this[_0x51b0a4(0x277)]();let _0x4f3815={};try{const _0x3c55a8=await this['getStateAsync']('analysis.energy.warmupTargets');if(_0x3c55a8&&_0x3c55a8[_0x51b0a4(0x1a6)])_0x4f3815=JSON[_0x51b0a4(0x22b)](_0x3c55a8['val']);}catch(_0x13ba41){}Object[_0x51b0a4(0x26c)](_0x45c080)['length']>0x0&&(pythonBridge[_0x51b0a4(0x252)](this,_0x51b0a4(0x256),{'current_temps':_0x45c080,'t_out':_0x2e5ae3,'is_sunny':_0x568739,'solar_flags':_0x137204,'warmup_targets':_0x4f3815}),pythonBridge['send'](this,'OPTIMIZE_ENERGY',{'current_temps':_0x45c080,'t_out':_0x2e5ae3,'targets':{}}));}catch(_0x4882fa){}}['updateHealthVector'](){const _0x449a5a=a0_0x180822;if(!this[_0x449a5a(0x1ce)]||this[_0x449a5a(0x1ce)][_0x449a5a(0x213)]===0x0)return;const _0x453fa9=new Array(0x60)[_0x449a5a(0x1c3)](0x0),_0x10acce=new Date()[_0x449a5a(0x1c7)](0x0,0x0,0x0,0x0);this['rawEventLog']['forEach'](_0x1658dc=>{const _0x32fbc8=_0x449a5a,_0x5bdd8f=new Date(_0x1658dc['timestamp']);if(_0x5bdd8f[_0x32fbc8(0x249)]()>=_0x10acce){const _0x14d3ce=_0x5bdd8f[_0x32fbc8(0x1a7)](),_0x535542=_0x5bdd8f[_0x32fbc8(0x235)](),_0x5f73d=_0x14d3ce*0x4+Math['floor'](_0x535542/0xf);if(_0x5f73d>=0x0&&_0x5f73d<0x60)_0x453fa9[_0x5f73d]++;}}),this[_0x449a5a(0x222)]('analysis.health.todayVector',{'val':JSON['stringify'](_0x453fa9),'ack':!![]});}[a0_0x180822(0x1d5)](){const _0x4022d2=a0_0x180822;if(!this['dailyDigests']||this[_0x4022d2(0x257)][_0x4022d2(0x213)]<0x2)return;const _0x307a9c=this[_0x4022d2(0x257)][_0x4022d2(0x1bb)](_0x2dfeff=>{const _0x56b2fe=_0x4022d2,_0x48cd09=(_0x2dfeff['activityLevel']||'')[_0x56b2fe(0x24a)]();return ACTIVITY_LEVEL_MAP[_0x48cd09]||0x32;});pythonBridge[_0x4022d2(0x252)](this,_0x4022d2(0x266),{'values':_0x307a9c,'tag':_0x4022d2(0x203)});}}if(require['main']!==module)module[a0_0x180822(0x23b)]=_0x20bb67=>new CogniLiving(_0x20bb67);else new CogniLiving();