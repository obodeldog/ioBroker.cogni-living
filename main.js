function a0_0x2803(){const _0x8e2c61=['isArray','analysis.security.lastScore','setObjectNotExistsAsync','Daily\x20Room\x20Details\x20(48x30min)','üîä\x20Infraschall-Alarm:\x20','type','./lib/ai_agent','isProVersion','analysis.health.activityTrend','getForeignObjectsAsync','Live\x20Event\x20Pulse','readFileSync','message','Failed\x20to\x20trigger\x20Python\x20Health\x20Check','checkLicense','from','analysis.training.triggerHealth','toString','updateTopology','abs','./lib/automation','TRAIN_COMFORT','forEach','presenceDevices','2053IjeYsC','887215nXAGhv','61434jtaIDP','analysis.ventilation.lastWindow','(((.+)+)+)+$','refreshCalendar\x20failed:\x20','Unknown','healthTrendInterval','scanThermostats','node-schedule','val','infrasoundSensorId','\x20Kalender-Adapter\x20gefunden.','analysis.automation.targetId','analysis.health.todayVector','./lib/installer','Unbekannt','sendNotification','rawEventLog','infrasoundArmingId','Verbindung\x20erfolgreich:\x20','location','updateTopologyMatrix','motion','getForeignStateAsync','onStateChange','üîä\x20Infraschall:\x20','haust√ºr','string','online','üíæ\x20Saving\x20Daily\x20History\x20for\x20','\x20(Bewohner\x20anwesend\x20-\x20normal)','toFixed','getHours','triggerGaitAnalysis','scheduleJob','.isOnline','protectAiMemory','üêç\x20Triggering\x20Python\x20Health\x20Check\x20(Activity\x20Trend)...','parse','58ESRvKs','Invalid\x20matrix\x20data','isPresent','2-digit','window','writeFileSync','join','clear','.last_seen','loadSystemMode','object','startSystem','guest','keys','initSchedules','Warte\x20auf\x20Analyse...','analysis.health.geminiDay','warn','Daily\x20Activity\x20Vector\x20(48x30min)','No\x20topology\x20data\x20found','analysis.topology.structure','heiter','moduleSecurity','config','setHours','calendarCheckTimer','analysis.energy.warmupSources','analysis.security.learningStatus','weatherTempId','toLocaleDateString','open','scanDevices','matrix','memoryCache','üö∂\x20Gait\x20Analysis\x20triggered\x20with\x20','Standard','üí®\x20L√ºftung\x20in\x20','scanForDevices','isGracePeriodActive','abortExitTimer','analysis.energy.warmupTargets','analyzeWindowOpening','Init...','analysis.trigger','dependencyInstallInProgress','checkCalendarTriggers','number','¬∞C,\x20Au√üen:\x20','inactivityThresholdHours','driftAnalysisTimer','text','sendTo',',\x20Temp:\x20','infrasoundLocked','handleInfrasound','round','LTM.dailyDigests','utf8','Gemini\x20Report\x20Night','log','‚úÖ\x20History\x20saved:\x20','length','shift','now','startService','stringify','@google/generative-ai','Corrupt','@iobroker/adapter-core','triggerDailyDigest','integrateRoomTime','toLocaleTimeString','2884638njpeQH','todayVector','triggerInfrasoundCorrelation','.venv','getOverviewData','¬∞C)','cancel','\x20Tage)','pop','thermostat','onUnload','Gemini\x20Init\x20Error:\x20','LTM.rawEventLog','eventHistory','de-DE','\x20events\x20from\x20standard\x20storage.','terrasse','PREDICT_ENERGY','security','stopService','triggerHealth\x20error:\x20','threshold_exceeded','daswetter.0','events.history','analysisTimer','sendMorningBriefing','4eRgSXp','Niemand','onReady','analysis.health.todayRoomDetails','./lib/dead_man','toISOString','triggerGaitAnalysis\x20parse\x20error:\x20','filter','python','pulse','subscribeForeignStates','initSystemConfig','enum','¬∞C\x20(Innen:\x20','substring','exitTimer','system.adapter.ical.È¶ô','send','min','pythonBridge\x20command\x20failed:\x20','common','\x20rooms)','split','find','values','analysis.activity.roomHistory','includes','generateContent','info','checkWifiPresence','setDate','isRelevantActivity','main','system.adapter.ical.','floor','timestamp','subscribeForeignStatesAsync','NIGHT','instance','max','./lib/python_bridge','Scan\x20Error:\x20','unload','TRAIN_SECURITY','üö®\x20INFRASCHALL-ALARM:\x20Anomalie\x20bei\x20Abwesenheit\x20(scharf)!','\x22history\x22:{}','cogni-living\x20adapter\x20starting\x20(v','Current.WeatherText','callback','error','analyzeWindowOpening\x20error:\x20','cogni-living','rows','fill','generateHealthReport','endsWith','Event','updateHealthVector','pressureBuffer','{\x22history\x22:{}}','getStateAsync','\x20sequences','subscribeStates','analysis.automation.description','automation.triggerAction','analysis.automation.targetValue','CALCULATE_HEALTH_TREND','checkSolarCondition','energy','historyJob','moduleEnergy','existsSync','dailyDigests','Room\x20History\x20(24h\x20Buckets)','apply','custom','checkWifiPresence:\x20Error\x20checking\x20','replace','.system.mode','toLowerCase','General\x20Activity\x20Trend','state','bind','getCalendarNames','L√ºften\x20empfohlen','{\x22today\x22:{},\x20\x22yesterday\x22:{},\x20\x22date\x22:\x22\x22}','370HxgrMu','7tRGGGT','ltmJob','briefingJob','bootTime','Warm-Up\x20Time','calendarName','weatherunderground.0','models/gemini-flash-latest','comfort','analysis.training.triggerComfort','application/json','ready','getDate','.uptime','LTM.trainingData.sequences','onMessage','ack','isSolar','licenseKey','currentSystemMode','analysis.training.status','minDaysForBaseline','enum.rooms.*','runAutopilot','presenceCheckTimer','setPresence','health','445404JGYdif','getGenerativeModel','ERROR','modules','system.presenceWho','klar','add','üîä\x20FORENSIC:\x20Infraschall\x20bei\x20Abwesenheit!\x20Pressure:\x20','analysis.health.geminiNight',':\x20Temp-Differenz\x20','activeModules','TRAIN_HEALTH','388113urvisp','Gemini\x20Report\x20Day','search','./lib/setup','‚òÄÔ∏è\x20Solar\x20Condition:\x20SUNNY\x20detected\x20via\x20','analysis.energy.warmupTimes','üì¶\x20Restored\x20','triggerEnergyPrediction','analysis.automation.patternDetected','slice','temperature','createAllObjects','geminiModel','bin','getObjectViewAsync','name','./lib/topology','enum.functions.*','‚Ü∫\x20Replaying\x20','roomIntegratorTimer','getMinutes','updated','executeAutomationAction','\x20events\x20from\x20today...','No\x20data','moduleComfort','push','triggerEnergyPrediction\x20Error:\x20','setStateAsync','analysis.activity.roomStats','lastAlertState','187CTXwLT','./lib/scanner','testApiKey','sonn','processSensorEvent','infrasoundEnabled','updateSchedulePreview','command','[PythonBridge]\x20Forwarding\x20command:\x20','analysisHistory','json','setState','saveDailyHistory','refreshCalendar','appendToLog','createDailyDigest','namespace','\x20-\x20','sunny','geminiApiKey','infrasoundThreshold','history','reduce','3314032ObtiDl','Manual\x20Event','TRAIN_TOPOLOGY','NORMAL','value','Adapter','cleanupGhostInterventions','runPythonHealthCheck','Sec-Training\x20started...','debug','‚úÖ\x20Dashboard\x20Data\x20(Rooms\x20&\x20Timeline\x20&\x20Details)\x20restored.','communicate.request','getAbsoluteDefaultDataDir','path','date','VACATION','SYSTEM_MODES','LTM.triggerDailyDigest','devices','History\x20Save\x20Error:\x20','.json','sensorLastValues','map','üï∏Ô∏è\x20Topology\x20Matrix\x20manually\x20updated\x20by\x20user.','analysis.training.triggerEnergy','SYSTEM_DP_MODE','Keine\x20Daten','Lernphase\x20('];a0_0x2803=function(){return _0x8e2c61;};return a0_0x2803();}function a0_0x2695(_0x4aeb19,_0x5c5bdc){const _0x1a26b6=a0_0x2803();return a0_0x2695=function(_0x2618e1,_0x8dfc66){_0x2618e1=_0x2618e1-0xd0;let _0x28031b=_0x1a26b6[_0x2618e1];return _0x28031b;},a0_0x2695(_0x4aeb19,_0x5c5bdc);}const a0_0x5e3f03=a0_0x2695;(function(_0x5c52e4,_0x2805ea){const _0x44a5c0=a0_0x2695,_0x5e1ec5=_0x5c52e4();while(!![]){try{const _0x26f9a7=parseInt(_0x44a5c0(0x154))/0x1*(-parseInt(_0x44a5c0(0x17c))/0x2)+-parseInt(_0x44a5c0(0xea))/0x3*(-parseInt(_0x44a5c0(0x1de))/0x4)+parseInt(_0x44a5c0(0x155))/0x5+-parseInt(_0x44a5c0(0x1c4))/0x6*(-parseInt(_0x44a5c0(0x235))/0x7)+parseInt(_0x44a5c0(0x120))/0x8+parseInt(_0x44a5c0(0x156))/0x9*(-parseInt(_0x44a5c0(0x234))/0xa)+-parseInt(_0x44a5c0(0x109))/0xb*(parseInt(_0x44a5c0(0xde))/0xc);if(_0x26f9a7===_0x2805ea)break;else _0x5e1ec5['push'](_0x5e1ec5['shift']());}catch(_0x183515){_0x5e1ec5['push'](_0x5e1ec5['shift']());}}}(a0_0x2803,0x3f2c1));const a0_0x8dfc66=(function(){let _0x8b4615=!![];return function(_0x58d68e,_0x34e7b9){const _0x400c6b=_0x8b4615?function(){const _0x2daaaf=a0_0x2695;if(_0x34e7b9){const _0x1ee4fd=_0x34e7b9[_0x2daaaf(0x228)](_0x58d68e,arguments);return _0x34e7b9=null,_0x1ee4fd;}}:function(){};return _0x8b4615=![],_0x400c6b;};}()),a0_0x2618e1=a0_0x8dfc66(this,function(){const _0x1abfe4=a0_0x2695;return a0_0x2618e1[_0x1abfe4(0x14d)]()[_0x1abfe4(0xec)](_0x1abfe4(0x158))[_0x1abfe4(0x14d)]()['constructor'](a0_0x2618e1)[_0x1abfe4(0xec)](_0x1abfe4(0x158));});a0_0x2618e1();'use strict';const utils=require(a0_0x5e3f03(0x1c0)),{GoogleGenerativeAI}=require(a0_0x5e3f03(0x1be)),path=require(a0_0x5e3f03(0x12d)),fs=require('fs'),installer=require(a0_0x5e3f03(0x163)),scanner=require(a0_0x5e3f03(0x10a)),schedulers=require('./lib/scheduler'),topology=require(a0_0x5e3f03(0xfa)),setup=require(a0_0x5e3f03(0xed)),recorder=require('./lib/recorder'),pythonBridge=require(a0_0x5e3f03(0x206)),aiAgent=require(a0_0x5e3f03(0x142)),deadMan=require(a0_0x5e3f03(0x1e2)),automation=require(a0_0x5e3f03(0x150)),GEMINI_MODEL=a0_0x5e3f03(0x23c);class CogniLiving extends utils[a0_0x5e3f03(0x125)]{constructor(_0x8be7bc){const _0x58d2b3=a0_0x5e3f03;super({..._0x8be7bc,'name':'cogni-living'}),this[_0x58d2b3(0x1d1)]=[],this[_0x58d2b3(0x112)]=[],this['rawEventLog']=[],this['dailyDigests']=[],this[_0x58d2b3(0x135)]={},this['systemConfig']={'latitude':0x0,'longitude':0x0,'city':''},this[_0x58d2b3(0x17e)]=!![],this[_0x58d2b3(0x1ed)]=null,this['exitGraceTimer']=null,this[_0x58d2b3(0x1a2)]=![],this['genAI']=null,this[_0x58d2b3(0xf6)]=null,this['currentSystemMode']=setup[_0x58d2b3(0x130)]['NORMAL'],this[_0x58d2b3(0x143)]=![],this[_0x58d2b3(0x108)]=![],this['analysisTimer']=null,this[_0x58d2b3(0x195)]=null,this['presenceCheckTimer']=null,this[_0x58d2b3(0x236)]=null,this['modeResetJob']=null,this[_0x58d2b3(0x1ad)]=null,this[_0x58d2b3(0x237)]=null,this['historyJob']=null,this['trackerHeartbeat']=null,this[_0x58d2b3(0x15b)]=null,this[_0x58d2b3(0xfd)]=null,this[_0x58d2b3(0x1a8)]=![],this['lastTrackerEventTime']=Date['now'](),this[_0x58d2b3(0x19d)]=null,this[_0x58d2b3(0x238)]=Date[_0x58d2b3(0x1bb)](),this['infrasoundLocked']=![],this['pressureBuffer']=[],this[_0x58d2b3(0xe8)]={'health':!![],'security':!![],'energy':!![],'comfort':!![]},this['on'](_0x58d2b3(0x240),this['onReady'][_0x58d2b3(0x230)](this)),this['on']('stateChange',this['onStateChange']['bind'](this)),this['on'](_0x58d2b3(0x208),this[_0x58d2b3(0x1ce)]['bind'](this)),this['on']('message',this[_0x58d2b3(0xd2)][_0x58d2b3(0x230)](this));}async[a0_0x5e3f03(0x1e0)](){const _0x31b9b3=a0_0x5e3f03;this[_0x31b9b3(0x1b7)][_0x31b9b3(0x1fa)](_0x31b9b3(0x20c)+this['version']+')\x20-\x20Phase\x20E\x20(Scheduler\x20Fix)');if(this[_0x31b9b3(0x193)]['moduleHealth']!==undefined)this[_0x31b9b3(0xe8)][_0x31b9b3(0xdd)]=this[_0x31b9b3(0x193)]['moduleHealth'];if(this['config'][_0x31b9b3(0x192)]!==undefined)this['activeModules'][_0x31b9b3(0x1d6)]=this[_0x31b9b3(0x193)][_0x31b9b3(0x192)];if(this[_0x31b9b3(0x193)][_0x31b9b3(0x224)]!==undefined)this[_0x31b9b3(0xe8)]['energy']=this[_0x31b9b3(0x193)]['moduleEnergy'];if(this[_0x31b9b3(0x193)][_0x31b9b3(0x103)]!==undefined)this[_0x31b9b3(0xe8)][_0x31b9b3(0x23d)]=this[_0x31b9b3(0x193)][_0x31b9b3(0x103)];if(this[_0x31b9b3(0x193)][_0x31b9b3(0xe1)])this[_0x31b9b3(0xe8)]={...this[_0x31b9b3(0xe8)],...this[_0x31b9b3(0x193)][_0x31b9b3(0xe1)]};this[_0x31b9b3(0x187)]();}async[a0_0x5e3f03(0x187)](){const _0x4b9f80=a0_0x5e3f03;await setup['initZombies'](this);try{this[_0x4b9f80(0x143)]=await setup[_0x4b9f80(0x14a)](this[_0x4b9f80(0x193)][_0x4b9f80(0xd5)]);}catch(_0x2df539){}if(!this[_0x4b9f80(0x193)][_0x4b9f80(0x1ac)]||this[_0x4b9f80(0x193)][_0x4b9f80(0x1ac)]<0.1)this[_0x4b9f80(0x193)][_0x4b9f80(0x1ac)]=0xc;await setup['initHistory'](this),await setup[_0x4b9f80(0x1e9)](this),topology[_0x4b9f80(0x14e)](this);try{const _0x20698b=await this['getStateAsync'](_0x4b9f80(0xef)),_0x2c1b58=await this['getStateAsync'](_0x4b9f80(0x196));_0x20698b&&_0x20698b[_0x4b9f80(0x15e)]&&_0x2c1b58&&_0x2c1b58['val']&&(Date[_0x4b9f80(0x1bb)]()-_0x20698b['ts']<0x4*0xe10*0x3e8&&(this[_0x4b9f80(0x19d)]={'times':JSON[_0x4b9f80(0x17b)](_0x20698b[_0x4b9f80(0x15e)]),'sources':JSON[_0x4b9f80(0x17b)](_0x2c1b58[_0x4b9f80(0x15e)])}));}catch(_0x1917ce){}if(this[_0x4b9f80(0x193)]['geminiApiKey'])try{this['genAI']=new GoogleGenerativeAI(this[_0x4b9f80(0x193)][_0x4b9f80(0x11c)]),this[_0x4b9f80(0xf6)]=this['genAI'][_0x4b9f80(0xdf)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x4b9f80(0x23f)}});}catch(_0x41f4ae){this[_0x4b9f80(0x1b7)]['error'](_0x4b9f80(0x1cf)+_0x41f4ae[_0x4b9f80(0x148)]);}await setup[_0x4b9f80(0xf5)](this),await this[_0x4b9f80(0x185)](),schedulers[_0x4b9f80(0x18a)](this),await this['setObjectNotExistsAsync']('analysis.visualization.pulse',{'type':'state','common':{'name':_0x4b9f80(0x146),'type':_0x4b9f80(0x1aa),'role':_0x4b9f80(0x124),'read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync']('analysis.activity.roomStats',{'type':'state','common':{'name':'Room\x20Dwell\x20Time\x20Stats','type':_0x4b9f80(0x170),'role':_0x4b9f80(0x113),'read':!![],'write':![],'def':_0x4b9f80(0x233)},'native':{}}),await this['setObjectNotExistsAsync'](_0x4b9f80(0x1f7),{'type':_0x4b9f80(0x22f),'common':{'name':_0x4b9f80(0x227),'type':_0x4b9f80(0x170),'role':_0x4b9f80(0x113),'read':!![],'write':![],'def':_0x4b9f80(0x219)},'native':{}}),await this[_0x4b9f80(0x13e)](_0x4b9f80(0xe6),{'type':_0x4b9f80(0x22f),'common':{'name':_0x4b9f80(0x1b6),'type':_0x4b9f80(0x170),'role':_0x4b9f80(0x1ae),'read':!![],'write':![],'def':_0x4b9f80(0x18b)},'native':{}}),await this[_0x4b9f80(0x13e)](_0x4b9f80(0x18c),{'type':_0x4b9f80(0x22f),'common':{'name':_0x4b9f80(0xeb),'type':'string','role':_0x4b9f80(0x1ae),'read':!![],'write':![],'def':_0x4b9f80(0x18b)},'native':{}}),await this[_0x4b9f80(0x13e)]('analysis.health.todayVector',{'type':'state','common':{'name':_0x4b9f80(0x18e),'type':'string','role':_0x4b9f80(0x113),'read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x4b9f80(0x13e)](_0x4b9f80(0x1e1),{'type':'state','common':{'name':_0x4b9f80(0x13f),'type':_0x4b9f80(0x170),'role':'json','read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x4b9f80(0x13e)](_0x4b9f80(0x144),{'type':_0x4b9f80(0x22f),'common':{'name':_0x4b9f80(0x22e),'type':_0x4b9f80(0x1aa),'role':'value','unit':'%','read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x4b9f80(0xef),{'type':_0x4b9f80(0x22f),'common':{'name':_0x4b9f80(0x239),'type':_0x4b9f80(0x170),'role':_0x4b9f80(0x113),'read':!![],'write':![]},'native':{}});try{const _0x1f7afb=await this['getStateAsync'](_0x4b9f80(0x1db));if(_0x1f7afb&&_0x1f7afb[_0x4b9f80(0x15e)]){this[_0x4b9f80(0x1d1)]=JSON['parse'](_0x1f7afb[_0x4b9f80(0x15e)]);if(this['isProVersion']){const _0x12dcec=await this['getStateAsync'](_0x4b9f80(0x1d0));if(_0x12dcec&&_0x12dcec['val'])this[_0x4b9f80(0x166)]=JSON[_0x4b9f80(0x17b)](_0x12dcec['val']);}this[_0x4b9f80(0x1b7)][_0x4b9f80(0x1fa)](_0x4b9f80(0xf0)+this[_0x4b9f80(0x1d1)][_0x4b9f80(0x1b9)]+_0x4b9f80(0x1d3));}}catch(_0x10d4a5){this[_0x4b9f80(0x1d1)]=[];}try{const _0x4c9ab6=await this[_0x4b9f80(0x21a)]('LTM.dailyDigests');if(_0x4c9ab6&&_0x4c9ab6['val'])this[_0x4b9f80(0x226)]=JSON[_0x4b9f80(0x17b)](_0x4c9ab6[_0x4b9f80(0x15e)]);}catch(_0x4d5911){this[_0x4b9f80(0x226)]=[];}const _0xb41e2a=this[_0x4b9f80(0x226)][_0x4b9f80(0x1b9)]>=(this[_0x4b9f80(0x193)][_0x4b9f80(0xd8)]||0x7)?'Aktiv\x20('+this[_0x4b9f80(0x226)]['length']+_0x4b9f80(0x1cb):_0x4b9f80(0x13b)+this['dailyDigests'][_0x4b9f80(0x1b9)]+'/'+(this[_0x4b9f80(0x193)][_0x4b9f80(0xd8)]||0x7)+')';await this[_0x4b9f80(0x106)]('LTM.baselineStatus',{'val':_0xb41e2a,'ack':!![]}),this[_0x4b9f80(0x21c)](_0x4b9f80(0x1a7)),this[_0x4b9f80(0x21c)](_0x4b9f80(0x131)),this['subscribeStates'](_0x4b9f80(0x14c));this[_0x4b9f80(0x193)][_0x4b9f80(0x10e)]&&this[_0x4b9f80(0x193)][_0x4b9f80(0x15f)]&&this[_0x4b9f80(0xe8)][_0x4b9f80(0x1d6)]&&this[_0x4b9f80(0x1e8)](this[_0x4b9f80(0x193)][_0x4b9f80(0x15f)]);const _0x246be1=this['config'][_0x4b9f80(0x132)];if(_0x246be1)for(const _0x552d96 of _0x246be1){await this[_0x4b9f80(0x202)](_0x552d96['id']);}const _0x1980f0=this['config']['presenceDevices'];if(_0x1980f0)for(const _0xe7799c of _0x1980f0){await this['subscribeForeignStatesAsync'](_0xe7799c);}const _0x203ed0=require(_0x4b9f80(0x15d));if(this[_0x4b9f80(0x223)])this[_0x4b9f80(0x223)][_0x4b9f80(0x1ca)]();this[_0x4b9f80(0x223)]=_0x203ed0[_0x4b9f80(0x177)]('59\x2023\x20*\x20*\x20*',()=>{const _0x5a949f=_0x4b9f80;this[_0x5a949f(0x115)]();}),setTimeout(()=>this['replayTodayEvents'](),0x1388);if(this[_0x4b9f80(0xfd)])clearInterval(this[_0x4b9f80(0xfd)]);this[_0x4b9f80(0x1c2)](),this[_0x4b9f80(0xfd)]=setInterval(async()=>{const _0x3a86cf=_0x4b9f80;await this[_0x3a86cf(0x1c2)]();},0x3c*0x3e8);if(this[_0x4b9f80(0x15b)])clearInterval(this[_0x4b9f80(0x15b)]);this[_0x4b9f80(0x15b)]=setInterval(()=>{const _0x452587=_0x4b9f80;this[_0x452587(0x143)]&&this['activeModules'][_0x452587(0xdd)]&&this['runPythonHealthCheck']();},0x4*0x3c*0x3c*0x3e8);if(this[_0x4b9f80(0x1dc)])clearInterval(this[_0x4b9f80(0x1dc)]);this[_0x4b9f80(0xe8)][_0x4b9f80(0x222)]&&(this['analysisTimer']=setInterval(()=>{const _0x32adae=_0x4b9f80;this[_0x32adae(0xf1)]();},0xf*0x3c*0x3e8),setTimeout(()=>this[_0x4b9f80(0xf1)](),0x2710));if(this['calendarCheckTimer'])clearInterval(this['calendarCheckTimer']);this[_0x4b9f80(0x193)]['useCalendar']&&this['activeModules'][_0x4b9f80(0x222)]&&(this[_0x4b9f80(0x195)]=setInterval(()=>{const _0xe91dd6=_0x4b9f80;automation[_0xe91dd6(0x1a9)](this);},0x2*0x3c*0x3e8),setTimeout(()=>automation[_0x4b9f80(0x1a9)](this),0x3a98));if(this[_0x4b9f80(0xdb)])clearInterval(this['presenceCheckTimer']);this[_0x4b9f80(0x193)][_0x4b9f80(0x153)]&&this[_0x4b9f80(0x193)][_0x4b9f80(0x153)][_0x4b9f80(0x1b9)]>0x0&&(this[_0x4b9f80(0xdb)]=setInterval(async()=>{await this['checkWifiPresence']();},0x3c*0x3e8),setTimeout(async()=>await this[_0x4b9f80(0x1fb)](),0x1388));const _0x55ee2a=path[_0x4b9f80(0x182)](__dirname,_0x4b9f80(0x1c7),_0x4b9f80(0xf7),_0x4b9f80(0x1e6));pythonBridge[_0x4b9f80(0x1bc)](this,_0x55ee2a);}[a0_0x5e3f03(0x1ce)](_0x199517){const _0x37f87e=a0_0x5e3f03;if(this[_0x37f87e(0x223)])this[_0x37f87e(0x223)][_0x37f87e(0x1ca)]();this['saveDailyHistory']()['then'](()=>{const _0x9870e6=_0x37f87e;if(this['analysisTimer'])clearInterval(this[_0x9870e6(0x1dc)]);if(this[_0x9870e6(0x195)])clearInterval(this['calendarCheckTimer']);if(this['presenceCheckTimer'])clearInterval(this[_0x9870e6(0xdb)]);if(this[_0x9870e6(0xfd)])clearInterval(this[_0x9870e6(0xfd)]);recorder[_0x9870e6(0x1a3)](this),pythonBridge[_0x9870e6(0x1d7)](this),_0x199517();});}async['replayTodayEvents'](){const _0x4d04cc=a0_0x5e3f03;if(!this[_0x4d04cc(0x1d1)]||this[_0x4d04cc(0x1d1)][_0x4d04cc(0x1b9)]===0x0){this[_0x4d04cc(0x1b7)][_0x4d04cc(0x18d)]('‚ö†\x20Replay\x20skipped:\x20No\x20events\x20in\x20memory.');return;}this['log']['info'](_0x4d04cc(0xfc)+this[_0x4d04cc(0x1d1)][_0x4d04cc(0x1b9)]+_0x4d04cc(0x101));const _0x38c04f=new Date()[_0x4d04cc(0x194)](0x0,0x0,0x0,0x0),_0x555f87='analysis.activity.roomHistory';let _0x16cf23={'history':{},'date':new Date()['toLocaleDateString']()};const _0x1bbaf2=_0x4d04cc(0x162),_0x43a54e=_0x4d04cc(0x1e1);let _0x39f98a=new Array(0x30)['fill'](0x0),_0x3c99c8=Array[_0x4d04cc(0x14b)]({'length':0x30},()=>[]);this[_0x4d04cc(0x1d1)]['forEach'](_0x267355=>{const _0x558678=_0x4d04cc;if(_0x267355[_0x558678(0x201)]>=_0x38c04f){if(recorder[_0x558678(0x1fd)](_0x267355[_0x558678(0x141)],_0x267355[_0x558678(0x124)])){const _0x43d7be=new Date(_0x267355[_0x558678(0x201)]),_0x467696=_0x43d7be[_0x558678(0x175)]()*0x2+(_0x43d7be[_0x558678(0xfe)]()>=0x1e?0x1:0x0);if(_0x467696<0x30){_0x39f98a[_0x467696]++;const _0x95622a=_0x267355[_0x558678(0x169)]||_0x267355[_0x558678(0xf9)]||'?';let _0xa444b6=_0x3c99c8[_0x467696];!_0xa444b6[_0x558678(0x1f8)](_0x95622a)&&_0xa444b6[_0x558678(0x104)](_0x95622a);}const _0x6b233a=_0x43d7be[_0x558678(0x175)]();let _0x4f7ab3=_0x267355[_0x558678(0x169)]||_0x558678(0x15a);const _0x592d63=(this[_0x558678(0x193)][_0x558678(0x132)]||[])['find'](_0x2a90c8=>_0x2a90c8[_0x558678(0x169)]===_0x4f7ab3);if(_0x592d63)_0x4f7ab3=_0x592d63['location'];if(!_0x16cf23[_0x558678(0x11e)][_0x4f7ab3])_0x16cf23[_0x558678(0x11e)][_0x4f7ab3]=new Array(0x18)['fill'](0x0);if(_0x16cf23[_0x558678(0x11e)][_0x4f7ab3][_0x6b233a]<0x3c)_0x16cf23[_0x558678(0x11e)][_0x4f7ab3][_0x6b233a]++;}}});const _0x2e8ee3=await this[_0x4d04cc(0x21a)](_0x555f87);(!_0x2e8ee3||!_0x2e8ee3['val']||_0x2e8ee3[_0x4d04cc(0x15e)]==='{}'||_0x2e8ee3[_0x4d04cc(0x15e)][_0x4d04cc(0x1f8)](_0x4d04cc(0x20b)))&&await this[_0x4d04cc(0x106)](_0x555f87,{'val':JSON[_0x4d04cc(0x1bd)](_0x16cf23),'ack':!![]}),await this['setStateAsync'](_0x1bbaf2,{'val':JSON['stringify'](_0x39f98a),'ack':!![]}),await this['setStateAsync'](_0x43a54e,{'val':JSON[_0x4d04cc(0x1bd)](_0x3c99c8),'ack':!![]}),this[_0x4d04cc(0x1b7)][_0x4d04cc(0x1fa)](_0x4d04cc(0x12a));}async[a0_0x5e3f03(0x115)](){const _0x3e2ddb=a0_0x5e3f03;if(!this['activeModules'][_0x3e2ddb(0xdd)])return;const _0x3efd63=new Date()[_0x3e2ddb(0x1e3)]()[_0x3e2ddb(0x1f4)]('T')[0x0];this[_0x3e2ddb(0x1b7)][_0x3e2ddb(0x129)](_0x3e2ddb(0x172)+_0x3efd63+'...');try{const [_0x28f84e,_0x132b11,_0x390c88,_0x327a44,_0x1b6fd6,_0x162769]=await Promise['all']([this['getStateAsync'](_0x3e2ddb(0x1f7)),this['getStateAsync'](_0x3e2ddb(0xe6)),this[_0x3e2ddb(0x21a)](_0x3e2ddb(0x18c)),this['getStateAsync'](_0x3e2ddb(0x13d)),this['getStateAsync'](_0x3e2ddb(0x162)),this[_0x3e2ddb(0x21a)](_0x3e2ddb(0x144))]),_0x294367=this['eventHistory']['filter'](_0x4a3381=>_0x4a3381[_0x3e2ddb(0x201)]>=new Date()[_0x3e2ddb(0x194)](0x0,0x0,0x0,0x0)&&(_0x4a3381[_0x3e2ddb(0xf9)]['toLowerCase']()[_0x3e2ddb(0x1f8)](_0x3e2ddb(0x16f))||_0x4a3381[_0x3e2ddb(0xf9)][_0x3e2ddb(0x22d)]()[_0x3e2ddb(0x1f8)](_0x3e2ddb(0x1d4)))&&(_0x4a3381[_0x3e2ddb(0x124)]===!![]||_0x4a3381[_0x3e2ddb(0x124)]===_0x3e2ddb(0x19a)))[_0x3e2ddb(0x1b9)];let _0x1ae669=0x55;if(_0x162769&&_0x162769['val']!==undefined)_0x1ae669=Math[_0x3e2ddb(0x1f0)](0x64,Math[_0x3e2ddb(0x205)](0x14,Math[_0x3e2ddb(0x1b3)](0x50+Number(_0x162769[_0x3e2ddb(0x15e)])*0x5)));const _0x6bb08={'date':_0x3efd63,'timestamp':Date[_0x3e2ddb(0x1bb)](),'roomHistory':_0x28f84e?.[_0x3e2ddb(0x15e)]?JSON[_0x3e2ddb(0x17b)](_0x28f84e[_0x3e2ddb(0x15e)]):{},'geminiNight':_0x132b11?.[_0x3e2ddb(0x15e)]||'Keine\x20Daten','geminiDay':_0x390c88?.[_0x3e2ddb(0x15e)]||_0x3e2ddb(0x13a),'anomalyScore':_0x327a44?.[_0x3e2ddb(0x15e)]||0.1,'todayVector':_0x1b6fd6?.[_0x3e2ddb(0x15e)]?JSON[_0x3e2ddb(0x17b)](_0x1b6fd6[_0x3e2ddb(0x15e)]):new Array(0x30)[_0x3e2ddb(0x213)](0x0),'batteryLevel':_0x1ae669,'freshAirCount':_0x294367,'eventHistory':this[_0x3e2ddb(0x1d1)]},_0x477f55=utils['getAbsoluteDefaultDataDir'](),_0x26f948=path['join'](_0x477f55,_0x3e2ddb(0x211),'history');if(!fs['existsSync'](_0x26f948))fs['mkdirSync'](_0x26f948,{'recursive':!![]});const _0x541227=path['join'](_0x26f948,_0x3efd63+_0x3e2ddb(0x134));fs[_0x3e2ddb(0x181)](_0x541227,JSON[_0x3e2ddb(0x1bd)](_0x6bb08)),this['log'][_0x3e2ddb(0x1fa)](_0x3e2ddb(0x1b8)+_0x541227);}catch(_0x2f1fb3){this[_0x3e2ddb(0x1b7)][_0x3e2ddb(0x20f)](_0x3e2ddb(0x133)+_0x2f1fb3[_0x3e2ddb(0x148)]);}}async['integrateRoomTime'](){const _0x583cd2=a0_0x5e3f03;if(!this['isPresent'])return;try{let _0x161d71=null;try{const _0x4659d5=await this['getStateAsync']('analysis.prediction.trackerTopRoom'),_0x14a565=await this[_0x583cd2(0x21a)]('analysis.prediction.trackerConfidence');if(_0x4659d5&&_0x4659d5[_0x583cd2(0x15e)]&&_0x14a565&&_0x14a565[_0x583cd2(0x15e)]&&_0x14a565[_0x583cd2(0x15e)]>0.3){if(_0x4659d5[_0x583cd2(0x15e)]!==_0x583cd2(0x15a)&&_0x4659d5[_0x583cd2(0x15e)]!==_0x583cd2(0x1a6))_0x161d71=_0x4659d5[_0x583cd2(0x15e)];}}catch(_0x355afd){}if(!_0x161d71){const _0x2280f8=this[_0x583cd2(0x193)][_0x583cd2(0x132)]||[];for(const _0xab7301 of _0x2280f8){if(_0xab7301[_0x583cd2(0x141)]===_0x583cd2(0x16b)&&_0xab7301['location'])try{const _0x4baeeb=await this[_0x583cd2(0x16c)](_0xab7301['id']);if(_0x4baeeb&&(_0x4baeeb[_0x583cd2(0x15e)]===!![]||_0x4baeeb[_0x583cd2(0x15e)]==='on'||_0x4baeeb[_0x583cd2(0x15e)]===0x1)){_0x161d71=_0xab7301[_0x583cd2(0x169)];break;}}catch(_0x1de53b){}}}if(!_0x161d71)return;const _0x29cae9=this[_0x583cd2(0x193)][_0x583cd2(0x132)]||[];let _0x3e4ac0=_0x161d71;const _0x175799=_0x29cae9['find'](_0x4d42ca=>_0x4d42ca[_0x583cd2(0x169)]&&_0x4d42ca[_0x583cd2(0x169)][_0x583cd2(0x22d)]()===_0x161d71[_0x583cd2(0x22d)]());if(_0x175799)_0x3e4ac0=_0x175799[_0x583cd2(0x169)];const _0x49401a=_0x583cd2(0x1f7),_0xf78757=await this[_0x583cd2(0x21a)](_0x49401a),_0x103e44=new Date()[_0x583cd2(0x199)]();let _0x41a784={'history':{},'date':_0x103e44};if(_0xf78757&&_0xf78757[_0x583cd2(0x15e)])try{_0x41a784=JSON[_0x583cd2(0x17b)](_0xf78757[_0x583cd2(0x15e)]);}catch(_0x273536){}_0x41a784[_0x583cd2(0x12e)]!==_0x103e44&&(_0x41a784[_0x583cd2(0x11e)]={},_0x41a784[_0x583cd2(0x12e)]=_0x103e44);if(!_0x41a784[_0x583cd2(0x11e)][_0x3e4ac0])_0x41a784['history'][_0x3e4ac0]=new Array(0x18)[_0x583cd2(0x213)](0x0);const _0x24b9c2=new Date()['getHours']();if(_0x41a784['history'][_0x3e4ac0][_0x24b9c2]<0x3c)_0x41a784[_0x583cd2(0x11e)][_0x3e4ac0][_0x24b9c2]++;await this[_0x583cd2(0x106)](_0x49401a,{'val':JSON[_0x583cd2(0x1bd)](_0x41a784),'ack':!![]});}catch(_0x28d354){this[_0x583cd2(0x1b7)]['warn']('[Integrator]\x20Error:\x20'+_0x28d354['message']);}}async['onMessage'](_0x4129f2){const _0x23e100=a0_0x5e3f03;if(typeof _0x4129f2===_0x23e100(0x186)&&_0x4129f2[_0x23e100(0x148)]){if(_0x4129f2['command']==='getHistoryData'){const _0x429651=_0x4129f2[_0x23e100(0x148)][_0x23e100(0x12e)],_0x755a6e=utils[_0x23e100(0x12c)](),_0x99d2e2=path[_0x23e100(0x182)](_0x755a6e,'cogni-living',_0x23e100(0x11e),_0x429651+_0x23e100(0x134));if(fs[_0x23e100(0x225)](_0x99d2e2))try{const _0x22a44e=JSON[_0x23e100(0x17b)](fs[_0x23e100(0x147)](_0x99d2e2,'utf8'));this[_0x23e100(0x1af)](_0x4129f2[_0x23e100(0x14b)],_0x4129f2[_0x23e100(0x110)],{'success':!![],'data':_0x22a44e},_0x4129f2[_0x23e100(0x20e)]);}catch(_0x3631b0){this[_0x23e100(0x1af)](_0x4129f2['from'],_0x4129f2['command'],{'success':![],'error':_0x23e100(0x1bf)},_0x4129f2['callback']);}else this[_0x23e100(0x1af)](_0x4129f2['from'],_0x4129f2[_0x23e100(0x110)],{'success':![],'error':_0x23e100(0x102)},_0x4129f2[_0x23e100(0x20e)]);}else{if(_0x4129f2['command']===_0x23e100(0x1c8)){const _0x6a4482=this[_0x23e100(0x226)][_0x23e100(0x1b9)];let _0x11b012=new Array(0x30)[_0x23e100(0x213)](0x0),_0xdc8280=Array['from']({'length':0x30},()=>[]);try{const _0x4391d5=await this[_0x23e100(0x21a)](_0x23e100(0x162));if(_0x4391d5&&_0x4391d5['val'])_0x11b012=JSON[_0x23e100(0x17b)](_0x4391d5[_0x23e100(0x15e)]);const _0x1b2fd5=await this['getStateAsync'](_0x23e100(0x1e1));if(_0x1b2fd5&&_0x1b2fd5[_0x23e100(0x15e)])_0xdc8280=JSON[_0x23e100(0x17b)](_0x1b2fd5['val']);}catch(_0xaebf2a){}let _0x52a772=new Array(0x30)[_0x23e100(0x213)](0x0);try{const _0x4fdbad=new Date();_0x4fdbad[_0x23e100(0x1fc)](_0x4fdbad[_0x23e100(0x241)]()-0x1);const _0x2e9003=_0x4fdbad[_0x23e100(0x1e3)]()[_0x23e100(0x1f4)]('T')[0x0],_0x478345=utils['getAbsoluteDefaultDataDir'](),_0x51b786=path[_0x23e100(0x182)](_0x478345,'cogni-living',_0x23e100(0x11e),_0x2e9003+_0x23e100(0x134));if(fs[_0x23e100(0x225)](_0x51b786)){const _0xfaee8e=JSON[_0x23e100(0x17b)](fs[_0x23e100(0x147)](_0x51b786,_0x23e100(0x1b5)));if(_0xfaee8e&&_0xfaee8e[_0x23e100(0x1c5)])_0x52a772=_0xfaee8e['todayVector'];}}catch(_0x3d1e1d){}let _0x20690d={'today':{},'yesterday':{}};try{const _0x370fa5=await this[_0x23e100(0x21a)](_0x23e100(0x107));if(_0x370fa5&&_0x370fa5[_0x23e100(0x15e)])_0x20690d=JSON['parse'](_0x370fa5[_0x23e100(0x15e)]);}catch(_0x153a93){}let _0x3f419a=null;try{const _0x5ba704=await this['getStateAsync']('analysis.health.activityTrend');if(_0x5ba704)_0x3f419a=_0x5ba704[_0x23e100(0x15e)];}catch(_0xee185){}if(_0x3f419a===undefined||_0x3f419a===null){const _0x59c0fd=_0x11b012[_0x23e100(0x11f)]((_0x1567ae,_0x1084ac)=>_0x1567ae+_0x1084ac,0x0),_0x2e196c=Math[_0x23e100(0x1f0)](0x2,Math[_0x23e100(0x205)](-0x2,(0x64-_0x59c0fd)/0x32));_0x3f419a=_0x2e196c;}let _0x16898b=![],_0x925c01='',_0x108200='',_0x2091d9='';try{const _0x5c1ce2=await this[_0x23e100(0x21a)](_0x23e100(0xf2));if(_0x5c1ce2&&_0x5c1ce2[_0x23e100(0x15e)]){_0x16898b=!![];const _0x43a6b5=await this[_0x23e100(0x21a)](_0x23e100(0x21d));_0x925c01=_0x43a6b5?_0x43a6b5[_0x23e100(0x15e)]:'';const _0x1b9994=await this[_0x23e100(0x21a)](_0x23e100(0x161));_0x108200=_0x1b9994?_0x1b9994[_0x23e100(0x15e)]:'';const _0x29945c=await this[_0x23e100(0x21a)](_0x23e100(0x21f));_0x2091d9=_0x29945c?_0x29945c['val']:'';}}catch(_0x289690){}const _0x382411=await this[_0x23e100(0x221)](),_0x27fed3=(this[_0x23e100(0x193)]['devices']||[])['some'](_0x2536c1=>_0x2536c1['isSolar']),_0x4e0db0=_0x382411&&_0x27fed3;let _0x32ce41='';try{const _0x4be2fd=await this['getStateAsync'](_0x23e100(0xe2));if(_0x4be2fd&&_0x4be2fd[_0x23e100(0x15e)])_0x32ce41=_0x4be2fd[_0x23e100(0x15e)];}catch(_0x3afc3c){}this[_0x23e100(0x1af)](_0x4129f2[_0x23e100(0x14b)],_0x4129f2[_0x23e100(0x110)],{'success':!![],'eventHistory':this[_0x23e100(0x1d1)]['slice'](0x0,0x7d0),'stats':{'digestCount':_0x6a4482,'isPresent':this[_0x23e100(0x17e)],'hourlyActivity':_0x11b012,'hourlyDetails':_0xdc8280,'yesterdayActivity':_0x52a772,'solarActive':_0x4e0db0,'presenceWho':_0x32ce41,'roomStats':_0x20690d,'activityTrend':_0x3f419a,'modules':this[_0x23e100(0xe8)]},'automation':{'detected':_0x16898b,'description':_0x925c01,'targetId':_0x108200,'targetValue':_0x2091d9}},_0x4129f2[_0x23e100(0x20e)]);}else{if(_0x4129f2[_0x23e100(0x110)]==='checkThermostats')try{const _0x2d23a4=await automation[_0x23e100(0x15c)](this);this[_0x23e100(0x1af)](_0x4129f2[_0x23e100(0x14b)],_0x4129f2['command'],{'success':!![],'results':_0x2d23a4},_0x4129f2[_0x23e100(0x20e)]);}catch(_0x16d1f5){this[_0x23e100(0x1af)](_0x4129f2[_0x23e100(0x14b)],_0x4129f2[_0x23e100(0x110)],{'success':![],'error':_0x16d1f5[_0x23e100(0x148)]},_0x4129f2[_0x23e100(0x20e)]);}else{if(_0x4129f2[_0x23e100(0x110)]===_0x23e100(0x19b))try{const _0x35a8da=await scanner[_0x23e100(0x1a1)](this,_0x4129f2[_0x23e100(0x148)]||{});this[_0x23e100(0x1af)](_0x4129f2[_0x23e100(0x14b)],_0x4129f2[_0x23e100(0x110)],{'success':!![],'devices':_0x35a8da},_0x4129f2[_0x23e100(0x20e)]);}catch(_0x310f5e){}else{if(_0x4129f2[_0x23e100(0x110)]==='getEnums'){const _0x55337a=await this['getForeignObjectsAsync'](_0x23e100(0xfb),_0x23e100(0x1ea)),_0x2384f0=[];if(_0x55337a)for(const _0x4d47cc in _0x55337a){let _0x277135=_0x55337a[_0x4d47cc][_0x23e100(0x1f2)][_0x23e100(0xf9)];if(_0x277135&&typeof _0x277135===_0x23e100(0x186))_0x277135=_0x277135['de']||_0x277135['en']||Object[_0x23e100(0x1f6)](_0x277135)[0x0]||JSON[_0x23e100(0x1bd)](_0x277135);_0x2384f0[_0x23e100(0x104)]({'id':_0x4d47cc,'name':String(_0x277135||_0x4d47cc)});}const _0x5db945=await this[_0x23e100(0x145)](_0x23e100(0xd9),_0x23e100(0x1ea)),_0x541e60=[];if(_0x5db945)for(const _0x2f47a4 in _0x5db945){let _0x2330cc=_0x5db945[_0x2f47a4][_0x23e100(0x1f2)][_0x23e100(0xf9)];if(_0x2330cc&&typeof _0x2330cc===_0x23e100(0x186))_0x2330cc=_0x2330cc['de']||_0x2330cc['en']||Object['values'](_0x2330cc)[0x0]||JSON[_0x23e100(0x1bd)](_0x2330cc);_0x541e60[_0x23e100(0x104)](String(_0x2330cc||_0x2f47a4[_0x23e100(0x1f4)]('.')[_0x23e100(0x1cc)]()));}this[_0x23e100(0x1af)](_0x4129f2['from'],_0x4129f2[_0x23e100(0x110)],{'success':!![],'enums':_0x2384f0,'rooms':_0x541e60},_0x4129f2[_0x23e100(0x20e)]);}else{if(_0x4129f2[_0x23e100(0x110)]===_0x23e100(0x231))try{const _0x18fa5a=await this[_0x23e100(0xf8)]('system',_0x23e100(0x204),{'startkey':_0x23e100(0x1ff),'endkey':_0x23e100(0x1ee)}),_0x524e85=new Set();if(_0x18fa5a&&_0x18fa5a['rows'])for(const _0x1f83bf of _0x18fa5a[_0x23e100(0x212)]){const _0x16e3e7=_0x1f83bf['id'][_0x23e100(0x22b)]('system.adapter.',''),_0xac6c60=await this[_0x23e100(0x16c)](_0x16e3e7+'.data.table');let _0x3ce69d=![];if(_0xac6c60&&_0xac6c60['val']){const _0x1e398a=typeof _0xac6c60['val']===_0x23e100(0x170)?JSON[_0x23e100(0x17b)](_0xac6c60[_0x23e100(0x15e)]):_0xac6c60[_0x23e100(0x15e)];Array[_0x23e100(0x13c)](_0x1e398a)&&_0x1e398a[_0x23e100(0x152)](_0x46b040=>{const _0xac9adf=_0x23e100;_0x46b040[_0xac9adf(0x23a)]&&(_0x524e85[_0xac9adf(0xe4)](_0x46b040[_0xac9adf(0x23a)]),_0x3ce69d=!![]);});}!_0x3ce69d&&_0x524e85[_0x23e100(0xe4)](_0x16e3e7);}const _0x4a28ea=Array['from'](_0x524e85);if(_0x4a28ea[_0x23e100(0x1b9)]===0x0)_0x4a28ea[_0x23e100(0x104)](_0x23e100(0x19f));this[_0x23e100(0x1af)](_0x4129f2[_0x23e100(0x14b)],_0x4129f2['command'],{'success':!![],'names':_0x4a28ea},_0x4129f2['callback']);}catch(_0xbbd4c3){this['sendTo'](_0x4129f2[_0x23e100(0x14b)],_0x4129f2['command'],{'success':![],'error':_0x23e100(0x207)+_0xbbd4c3[_0x23e100(0x148)]},_0x4129f2[_0x23e100(0x20e)]);}else{if(_0x4129f2[_0x23e100(0x110)]===_0x23e100(0x116))try{await automation[_0x23e100(0x10f)](this),this[_0x23e100(0x1af)](_0x4129f2['from'],_0x4129f2[_0x23e100(0x110)],{'success':!![]},_0x4129f2[_0x23e100(0x20e)]);}catch(_0x13073f){this[_0x23e100(0x1b7)][_0x23e100(0x18d)](_0x23e100(0x159)+_0x13073f[_0x23e100(0x148)]),this['sendTo'](_0x4129f2[_0x23e100(0x14b)],_0x4129f2[_0x23e100(0x110)],{'success':![],'error':_0x13073f[_0x23e100(0x148)]},_0x4129f2[_0x23e100(0x20e)]);}else{if(_0x4129f2[_0x23e100(0x110)]===_0x23e100(0x16a))try{const _0x2c3169=_0x4129f2[_0x23e100(0x148)][_0x23e100(0x19c)];if(!_0x2c3169||!Array[_0x23e100(0x13c)](_0x2c3169))throw new Error(_0x23e100(0x17d));const _0x3cfebf=await this[_0x23e100(0x21a)](_0x23e100(0x190));if(_0x3cfebf&&_0x3cfebf['val']){const _0x565473=JSON[_0x23e100(0x17b)](_0x3cfebf[_0x23e100(0x15e)]);_0x565473[_0x23e100(0x19c)]=_0x2c3169,_0x565473[_0x23e100(0xff)]=Date[_0x23e100(0x1bb)](),await this[_0x23e100(0x106)](_0x23e100(0x190),{'val':JSON['stringify'](_0x565473),'ack':!![]}),this[_0x23e100(0x1b7)][_0x23e100(0x129)](_0x23e100(0x137)),this[_0x23e100(0x1af)](_0x4129f2[_0x23e100(0x14b)],_0x4129f2[_0x23e100(0x110)],{'success':!![]},_0x4129f2[_0x23e100(0x20e)]);}else throw new Error(_0x23e100(0x18f));}catch(_0x2fd009){this[_0x23e100(0x1b7)][_0x23e100(0x18d)]('updateTopologyMatrix\x20failed:\x20'+_0x2fd009[_0x23e100(0x148)]),this[_0x23e100(0x1af)](_0x4129f2[_0x23e100(0x14b)],_0x4129f2[_0x23e100(0x110)],{'success':![],'error':_0x2fd009[_0x23e100(0x148)]},_0x4129f2['callback']);}else{if(_0x4129f2['command']==='pythonBridge')try{const _0x2ced61=_0x4129f2[_0x23e100(0x148)][_0x23e100(0x110)],_0x1eb363=_0x4129f2[_0x23e100(0x148)];this[_0x23e100(0x1b7)]['debug'](_0x23e100(0x111)+_0x2ced61),pythonBridge[_0x23e100(0x1ef)](this,_0x2ced61,_0x1eb363,_0x291c34=>{const _0x2345a0=_0x23e100;this['sendTo'](_0x4129f2[_0x2345a0(0x14b)],_0x4129f2[_0x2345a0(0x110)],_0x291c34,_0x4129f2[_0x2345a0(0x20e)]);});}catch(_0x242a0a){this['log'][_0x23e100(0x18d)](_0x23e100(0x1f1)+_0x242a0a[_0x23e100(0x148)]),this['sendTo'](_0x4129f2[_0x23e100(0x14b)],_0x4129f2[_0x23e100(0x110)],{'type':_0x23e100(0xe0),'payload':_0x242a0a[_0x23e100(0x148)]},_0x4129f2[_0x23e100(0x20e)]);}else{if(_0x4129f2['command']===_0x23e100(0x10b))try{const _0x251166=_0x4129f2[_0x23e100(0x148)]?_0x4129f2['message']['apiKey']:'';if(!_0x251166)throw new Error('Kein\x20API\x20Key\x20√ºbergeben.');const _0x58bab8=new GoogleGenerativeAI(_0x251166),_0x116d0b=_0x58bab8['getGenerativeModel']({'model':GEMINI_MODEL}),_0x3c4957=await _0x116d0b[_0x23e100(0x1f9)]('Say\x20Hello'),_0x57e4dd=await _0x3c4957['response'],_0x3fffb9=_0x57e4dd[_0x23e100(0x1ae)]();this[_0x23e100(0x1af)](_0x4129f2['from'],_0x4129f2['command'],{'success':!![],'message':_0x23e100(0x168)+_0x3fffb9[_0x23e100(0x1ec)](0x0,0x14)+'...'},_0x4129f2['callback']);}catch(_0x2dbc00){this[_0x23e100(0x1af)](_0x4129f2['from'],_0x4129f2[_0x23e100(0x110)],{'success':![],'message':_0x2dbc00[_0x23e100(0x148)]},_0x4129f2[_0x23e100(0x20e)]);}else{if(_0x4129f2[_0x23e100(0x110)]==='testContext')try{const _0x3c93b4=await this[_0x23e100(0x221)](),_0x2fdf9b=await this['getObjectViewAsync']('system',_0x23e100(0x204),{'startkey':_0x23e100(0x1ff),'endkey':_0x23e100(0x1ee)}),_0x2b50e4=_0x2fdf9b&&_0x2fdf9b[_0x23e100(0x212)]?_0x2fdf9b[_0x23e100(0x212)]['length']:0x0;this[_0x23e100(0x1af)](_0x4129f2[_0x23e100(0x14b)],_0x4129f2[_0x23e100(0x110)],{'success':!![],'weather':'Sonne:\x20'+_0x3c93b4+_0x23e100(0x1b0)+(this['sensorLastValues'][this[_0x23e100(0x193)]['outdoorSensorId']]||'?')+'¬∞C','calendar':_0x2b50e4+_0x23e100(0x160)},_0x4129f2[_0x23e100(0x20e)]);}catch(_0x5499d9){this[_0x23e100(0x1af)](_0x4129f2[_0x23e100(0x14b)],_0x4129f2[_0x23e100(0x110)],{'success':![]},_0x4129f2['callback']);}}}}}}}}}}}}}['runPythonHealthCheck'](){const _0x5862e5=a0_0x5e3f03;if(!this[_0x5862e5(0xe8)][_0x5862e5(0xdd)])return;this[_0x5862e5(0x1b7)]['debug'](_0x5862e5(0x17a));try{const _0x259ae3=this[_0x5862e5(0x166)]||[];pythonBridge[_0x5862e5(0x1ef)](this,_0x5862e5(0x220),{'events':_0x259ae3});}catch(_0x13476c){this[_0x5862e5(0x1b7)]['warn'](_0x5862e5(0x149));}}async[a0_0x5e3f03(0x16d)](_0x137534,_0x1d8fce){const _0x451b43=a0_0x5e3f03;if(!_0x1d8fce||this[_0x451b43(0x1a8)])return;if(_0x137534[_0x451b43(0x1f8)]('telegram')&&_0x137534['endsWith'](_0x451b43(0x12b))&&_0x1d8fce[_0x451b43(0x15e)])return;if(this[_0x451b43(0x193)]['infrasoundEnabled']&&_0x137534===this[_0x451b43(0x193)]['infrasoundSensorId']&&this['activeModules'][_0x451b43(0x1d6)]){this[_0x451b43(0x1b2)](_0x1d8fce['val']);return;}if(_0x1d8fce['ack']&&_0x137534['endsWith'](_0x451b43(0x1e7)))return;if(_0x137534===this[_0x451b43(0x119)]+_0x451b43(0x22c)){if(_0x1d8fce[_0x451b43(0x15e)]&&Object['values'](setup[_0x451b43(0x130)])[_0x451b43(0x1f8)](_0x1d8fce['val'])){this[_0x451b43(0xd6)]=_0x1d8fce[_0x451b43(0x15e)];if(_0x1d8fce[_0x451b43(0x15e)]===setup[_0x451b43(0x130)][_0x451b43(0x12f)])await recorder[_0x451b43(0xdc)](this,![]);else await recorder[_0x451b43(0xdc)](this,!![]);if(this[_0x451b43(0x143)]){let _0x4ce4b7=![],_0x40255d=0x0,_0x3bb1cb='manual';if(this[_0x451b43(0xd6)]==='party')_0x4ce4b7=!![],_0x40255d=0x168,_0x3bb1cb='Party\x20Mode';else this[_0x451b43(0xd6)]===_0x451b43(0x188)&&(_0x4ce4b7=!![],_0x40255d=0x5a0,_0x3bb1cb='Guest\x20Mode');pythonBridge[_0x451b43(0x1ef)](this,'SET_LEARNING_MODE',{'active':_0x4ce4b7,'duration':_0x40255d,'label':_0x3bb1cb}),await this['setStateAsync'](_0x451b43(0x197),{'val':JSON['stringify']({'active':_0x4ce4b7,'label':_0x3bb1cb,'timestamp':Date[_0x451b43(0x1bb)]()}),'ack':!![]});}}if(!_0x1d8fce[_0x451b43(0xd3)])this[_0x451b43(0x114)](_0x137534,{'val':this[_0x451b43(0xd6)],'ack':!![]});return;}if(_0x137534[_0x451b43(0x215)]('analysis.energy.warmupSources')&&_0x1d8fce[_0x451b43(0xd3)])this[_0x451b43(0x179)](_0x1d8fce[_0x451b43(0x15e)]);if(_0x137534[_0x451b43(0x215)]('analysis.energy.warmupTimes')&&_0x1d8fce['ack']&&this['activeModules'][_0x451b43(0x222)])automation[_0x451b43(0x1a9)](this);if(!_0x1d8fce[_0x451b43(0xd3)]){if(_0x137534[_0x451b43(0x1f8)]('analysis.trigger')&&_0x1d8fce['val']){this[_0x451b43(0x114)](_0x137534,{'val':![],'ack':!![]}),aiAgent['runGeminiAnalysis'](this);return;}if(_0x137534[_0x451b43(0x1f8)](_0x451b43(0x1c1))&&_0x1d8fce[_0x451b43(0x15e)]){this['setState'](_0x137534,{'val':![],'ack':!![]});if(this[_0x451b43(0x143)])aiAgent[_0x451b43(0x118)](this,pythonBridge);return;}if(_0x137534[_0x451b43(0x1f8)]('triggerBriefing')&&_0x1d8fce[_0x451b43(0x15e)]){this['setState'](_0x137534,{'val':![],'ack':!![]}),aiAgent[_0x451b43(0x1dd)](this);return;}if(_0x137534[_0x451b43(0x1f8)](_0x451b43(0x21e))&&_0x1d8fce[_0x451b43(0x15e)]){this[_0x451b43(0x114)](_0x137534,{'val':![],'ack':!![]}),aiAgent[_0x451b43(0x100)](this);return;}if(_0x137534['includes']('analysis.training.triggerSecurity')&&_0x1d8fce[_0x451b43(0x15e)]){this[_0x451b43(0x114)](_0x137534,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x19b28b=await this['getStateAsync'](_0x451b43(0xd1));if(_0x19b28b&&_0x19b28b[_0x451b43(0x15e)]){const _0x8719f8=JSON[_0x451b43(0x17b)](_0x19b28b[_0x451b43(0x15e)]);this[_0x451b43(0x106)](_0x451b43(0xd7),{'val':_0x451b43(0x128),'ack':!![]}),pythonBridge['send'](this,_0x451b43(0x209),{'sequences':_0x8719f8});}}catch(_0x40f0bc){}return;}if(_0x137534[_0x451b43(0x1f8)]('analysis.training.triggerHealth')&&_0x1d8fce[_0x451b43(0x15e)]){this[_0x451b43(0x114)](_0x137534,{'val':![],'ack':!![]});try{aiAgent[_0x451b43(0x214)](this,_0x451b43(0x203)),setTimeout(()=>aiAgent[_0x451b43(0x214)](this,'DAY'),0x2ee0);if(this['isProVersion']){this[_0x451b43(0x127)]();const _0x19b8bc=await this['getStateAsync'](_0x451b43(0x1b4));if(_0x19b8bc&&_0x19b8bc[_0x451b43(0x15e)])pythonBridge[_0x451b43(0x1ef)](this,_0x451b43(0xe9),{'digests':JSON['parse'](_0x19b8bc[_0x451b43(0x15e)])});}}catch(_0x396ca1){this['log'][_0x451b43(0x18d)](_0x451b43(0x1d8)+_0x396ca1[_0x451b43(0x148)]);}return;}if(_0x137534['includes'](_0x451b43(0x138))&&_0x1d8fce[_0x451b43(0x15e)]){this[_0x451b43(0x114)](_0x137534,{'val':![],'ack':!![]}),await this[_0x451b43(0xf1)]();return;}if(_0x137534[_0x451b43(0x1f8)](_0x451b43(0x23e))&&_0x1d8fce[_0x451b43(0x15e)]){this[_0x451b43(0x114)](_0x137534,{'val':![],'ack':!![]});if(this[_0x451b43(0x143)])try{const _0x277efd=await this[_0x451b43(0x21a)](_0x451b43(0x1d0));if(_0x277efd&&_0x277efd[_0x451b43(0x15e)]){const _0xb833a9={};if(this[_0x451b43(0x193)][_0x451b43(0x132)])this['config'][_0x451b43(0x132)][_0x451b43(0x152)](_0x421225=>{const _0x40d338=_0x451b43;if(_0x421225['id']&&_0x421225['type'])_0xb833a9[_0x421225['id']]=_0x421225[_0x40d338(0x141)];});pythonBridge['send'](this,_0x451b43(0x151),{'events':JSON[_0x451b43(0x17b)](_0x277efd[_0x451b43(0x15e)]),'deviceMap':_0xb833a9});}}catch(_0x1bbc32){}return;}if(_0x137534['includes']('analysis.training.triggerTopology')&&_0x1d8fce[_0x451b43(0x15e)]){this[_0x451b43(0x114)](_0x137534,{'val':![],'ack':!![]}),topology[_0x451b43(0x14e)](this);if(this['isProVersion'])try{const _0x22a03e=await this[_0x451b43(0x21a)]('LTM.trainingData.sequences');if(_0x22a03e&&_0x22a03e[_0x451b43(0x15e)])pythonBridge[_0x451b43(0x1ef)](this,_0x451b43(0x122),{'sequences':JSON[_0x451b43(0x17b)](_0x22a03e[_0x451b43(0x15e)])});}catch(_0xc7ddc3){}return;}}const _0x2ff0ef=(this[_0x451b43(0x193)][_0x451b43(0x132)]||[])[_0x451b43(0x1f5)](_0x90e61b=>_0x90e61b['id']===_0x137534);if(_0x2ff0ef){const _0x1da71b=await recorder[_0x451b43(0x10d)](this,_0x137534,_0x1d8fce,_0x2ff0ef);_0x1da71b&&this[_0x451b43(0x114)]('analysis.visualization.pulse',{'val':Date['now'](),'ack':!![]});_0x1da71b&&_0x1da71b[_0x451b43(0x141)]===_0x451b43(0x16b)&&_0x1da71b['location']&&this[_0x451b43(0x143)]&&deadMan['updateLocation'](this,_0x1da71b[_0x451b43(0x169)]);_0x1d8fce[_0x451b43(0x15e)]&&(_0x1d8fce['val']===!![]||_0x1d8fce['val']===0x1||String(_0x1d8fce[_0x451b43(0x15e)])[_0x451b43(0x22d)]()===_0x451b43(0x19a))&&(_0x2ff0ef[_0x451b43(0x141)]&&(_0x2ff0ef['type'][_0x451b43(0x1f8)](_0x451b43(0x180))||_0x2ff0ef['type'][_0x451b43(0x1f8)]('door'))&&this[_0x451b43(0x1a5)](_0x2ff0ef));if(_0x2ff0ef[_0x451b43(0x141)]===_0x451b43(0xf4)||_0x2ff0ef[_0x451b43(0x141)]==='thermostat'){if(this[_0x451b43(0xe8)][_0x451b43(0x222)])automation[_0x451b43(0x126)](this);}}}async[a0_0x5e3f03(0x179)](_0x2179db){const _0x3642d3=a0_0x5e3f03;if(!this[_0x3642d3(0x19d)]||Date[_0x3642d3(0x1bb)]()-this[_0x3642d3(0x238)]>0x493e0)return;try{const _0x461756=JSON['parse'](_0x2179db),_0x72425e=this['memoryCache']['sources'];let _0xb15ba5=![];for(const _0x4928b7 in _0x72425e){if(_0x72425e[_0x4928b7][_0x3642d3(0x1f8)]('AI')&&_0x461756[_0x4928b7]&&!_0x461756[_0x4928b7][_0x3642d3(0x1f8)]('AI')){_0xb15ba5=!![];break;}}_0xb15ba5&&(await this[_0x3642d3(0x106)](_0x3642d3(0xef),{'val':JSON['stringify'](this[_0x3642d3(0x19d)]['times']),'ack':!![]}),await this[_0x3642d3(0x106)](_0x3642d3(0x196),{'val':JSON[_0x3642d3(0x1bd)](this[_0x3642d3(0x19d)]['sources']),'ack':!![]}));}catch(_0x3f39c8){}}async[a0_0x5e3f03(0x185)](){const _0x275ded=a0_0x5e3f03;try{const _0x280f83=await this['getStateAsync'](setup[_0x275ded(0x139)]);if(_0x280f83&&_0x280f83[_0x275ded(0x15e)])this['currentSystemMode']=_0x280f83[_0x275ded(0x15e)];}catch(_0x54f156){this[_0x275ded(0xd6)]=setup[_0x275ded(0x130)][_0x275ded(0x123)];}}async[a0_0x5e3f03(0x1fb)](){const _0x477f21=a0_0x5e3f03,_0x5a48d6=this['config'][_0x477f21(0x153)]||[];if(_0x5a48d6[_0x477f21(0x1b9)]===0x0)return![];const _0x52fcc5=[],_0x5f4a6e=Date[_0x477f21(0x1bb)](),_0x3d675c=0x5*0x3c*0x3e8;for(const _0x30d65b of _0x5a48d6){try{let _0x10a30c=![];try{const _0x3ae43d=await this[_0x477f21(0x16c)](_0x30d65b+_0x477f21(0x178));if(_0x3ae43d&&_0x3ae43d[_0x477f21(0x15e)]===!![])_0x10a30c=!![];}catch(_0x169b83){}if(!_0x10a30c)try{const _0x48ac23=await this['getForeignStateAsync'](_0x30d65b+_0x477f21(0x184));if(_0x48ac23&&_0x48ac23['ts']){const _0x3b1cc0=_0x5f4a6e-_0x48ac23['ts'];if(_0x3b1cc0<_0x3d675c)_0x10a30c=!![];}}catch(_0x1ddeaa){}if(!_0x10a30c)try{const _0x3ab5ea=await this[_0x477f21(0x16c)](_0x30d65b+_0x477f21(0xd0));if(_0x3ab5ea&&typeof _0x3ab5ea['val']===_0x477f21(0x1aa)&&_0x3ab5ea[_0x477f21(0x15e)]>0x0)_0x10a30c=!![];}catch(_0x324c61){}if(!_0x10a30c)try{const _0xb5fbe4=await this[_0x477f21(0x16c)](_0x30d65b);if(_0xb5fbe4){const _0x5ec858=_0x5f4a6e-(_0xb5fbe4['ts']||0x0);_0x5ec858<_0x3d675c&&(_0xb5fbe4[_0x477f21(0x15e)]===!![]||_0xb5fbe4['val']===_0x477f21(0x171)||_0xb5fbe4['val']===0x1)&&(_0x10a30c=!![]);}}catch(_0x1191e8){}if(_0x10a30c){const _0x41967e=_0x30d65b[_0x477f21(0x1f4)]('.'),_0xa0a6af=_0x41967e[_0x41967e[_0x477f21(0x1b9)]-0x1]||_0x30d65b;_0x52fcc5[_0x477f21(0x104)](_0xa0a6af);}}catch(_0xd79126){this['log'][_0x477f21(0x18d)](_0x477f21(0x22a)+_0x30d65b+':\x20'+_0xd79126['message']);}}const _0x4f23fe=_0x52fcc5[_0x477f21(0x1b9)]>0x0?_0x52fcc5[_0x477f21(0x182)](',\x20'):_0x477f21(0x1df);return await this['setStateAsync'](_0x477f21(0xe2),{'val':_0x4f23fe,'ack':!![]}),_0x52fcc5['length']>0x0;}async[a0_0x5e3f03(0xda)](){const _0x2258f9=a0_0x5e3f03;await aiAgent['runGeminiAnalysis'](this);this[_0x2258f9(0xe8)][_0x2258f9(0xdd)]&&(this[_0x2258f9(0x217)](),this[_0x2258f9(0x176)]());if(this[_0x2258f9(0xe8)][_0x2258f9(0x222)])this['triggerEnergyPrediction']();}async['checkSolarCondition'](){const _0x39933f=a0_0x5e3f03,_0x3fd201=[_0x39933f(0x23b),'accuweather.0',_0x39933f(0x1da)],_0x4e54a3=['forecast.current.weather',_0x39933f(0x20d),'NextHours.Location_1.Day_1.current.symbol_desc'];for(const _0x866491 of _0x3fd201){for(const _0x4dc217 of _0x4e54a3){try{const _0x5b15ac=_0x866491+'.'+_0x4dc217,_0x3a9828=await this[_0x39933f(0x16c)](_0x5b15ac);if(_0x3a9828&&_0x3a9828[_0x39933f(0x15e)]){const _0x52d7a8=String(_0x3a9828['val'])[_0x39933f(0x22d)]();if(_0x52d7a8['includes'](_0x39933f(0x11b))||_0x52d7a8[_0x39933f(0x1f8)](_0x39933f(0x191))||_0x52d7a8[_0x39933f(0x1f8)](_0x39933f(0xe3))||_0x52d7a8[_0x39933f(0x1f8)](_0x39933f(0x10c))||_0x52d7a8[_0x39933f(0x1f8)](_0x39933f(0x183)))return this[_0x39933f(0x1b7)][_0x39933f(0x129)](_0x39933f(0xee)+_0x5b15ac),!![];}}catch(_0x48ea03){}}}return![];}[a0_0x5e3f03(0x176)](){const _0xc91bbc=a0_0x5e3f03;if(!this[_0xc91bbc(0x143)])return;try{this[_0xc91bbc(0x21a)](_0xc91bbc(0xd1),(_0x1c7a16,_0x5edc26)=>{const _0x40b841=_0xc91bbc;if(_0x1c7a16||!_0x5edc26||!_0x5edc26[_0x40b841(0x15e)])return;try{const _0x5e39c5=JSON[_0x40b841(0x17b)](_0x5edc26[_0x40b841(0x15e)]);if(!_0x5e39c5||_0x5e39c5[_0x40b841(0x1b9)]===0x0)return;pythonBridge[_0x40b841(0x1ef)](this,'ANALYZE_GAIT',{'sequences':_0x5e39c5}),this['log'][_0x40b841(0x129)](_0x40b841(0x19e)+_0x5e39c5[_0x40b841(0x1b9)]+_0x40b841(0x21b));}catch(_0x190d2d){this[_0x40b841(0x1b7)][_0x40b841(0x18d)](_0x40b841(0x1e4)+_0x190d2d['message']);}});}catch(_0x103282){this[_0xc91bbc(0x1b7)]['warn']('triggerGaitAnalysis\x20error:\x20'+_0x103282[_0xc91bbc(0x148)]);}}async[a0_0x5e3f03(0xf1)](){const _0x1226f8=a0_0x5e3f03;if(!this[_0x1226f8(0x143)]||!this['activeModules'][_0x1226f8(0x222)])return;try{const _0x5d2a99={},_0x84d88c={},_0x12d1a7=this[_0x1226f8(0x193)][_0x1226f8(0x132)]||[];for(const _0x5dc719 of _0x12d1a7){if((_0x5dc719['type']==='temperature'||_0x5dc719[_0x1226f8(0x141)]===_0x1226f8(0x1cd))&&_0x5dc719['location'])try{const _0x1f9166=await this[_0x1226f8(0x16c)](_0x5dc719['id']);_0x1f9166&&typeof _0x1f9166[_0x1226f8(0x15e)]==='number'&&(_0x5d2a99[_0x5dc719[_0x1226f8(0x169)]]=_0x1f9166[_0x1226f8(0x15e)],_0x84d88c[_0x5dc719[_0x1226f8(0x169)]]=_0x5dc719[_0x1226f8(0xd4)]||![]);}catch(_0x37af5d){}}let _0x196bfc=0xa;if(this[_0x1226f8(0x193)][_0x1226f8(0x198)])try{const _0x4238ec=await this[_0x1226f8(0x16c)](this[_0x1226f8(0x193)][_0x1226f8(0x198)]);if(_0x4238ec&&typeof _0x4238ec['val']===_0x1226f8(0x1aa))_0x196bfc=_0x4238ec[_0x1226f8(0x15e)];}catch(_0x2d5e8c){}const _0x935dee=await this[_0x1226f8(0x221)]();let _0x4414a7={};try{const _0x4a3387=await this['getStateAsync'](_0x1226f8(0x1a4));if(_0x4a3387&&_0x4a3387['val'])_0x4414a7=JSON[_0x1226f8(0x17b)](_0x4a3387[_0x1226f8(0x15e)]);}catch(_0x37c64c){}pythonBridge[_0x1226f8(0x1ef)](this,_0x1226f8(0x1d5),{'current_temps':_0x5d2a99,'t_out':_0x196bfc,'is_sunny':_0x935dee,'solar_flags':_0x84d88c,'warmup_targets':_0x4414a7}),this[_0x1226f8(0x1b7)][_0x1226f8(0x1fa)]('üîÆ\x20Energy\x20Prediction\x20triggered\x20('+Object[_0x1226f8(0x189)](_0x5d2a99)[_0x1226f8(0x1b9)]+_0x1226f8(0x1f3));}catch(_0x50dbfb){this['log'][_0x1226f8(0x18d)](_0x1226f8(0x105)+_0x50dbfb[_0x1226f8(0x148)]);}}[a0_0x5e3f03(0x217)](){const _0x4e52e7=a0_0x5e3f03;if(!this[_0x4e52e7(0x166)]||this[_0x4e52e7(0x166)]['length']===0x0)return;const _0x194dc2=new Array(0x30)[_0x4e52e7(0x213)](0x0),_0x5897e8=Array[_0x4e52e7(0x14b)]({'length':0x30},()=>[]),_0x3bac02=new Date()['setHours'](0x0,0x0,0x0,0x0);this[_0x4e52e7(0x166)][_0x4e52e7(0x152)](_0x160af4=>{const _0x277776=_0x4e52e7,_0x29f2e1=new Date(_0x160af4[_0x277776(0x201)]);if(_0x29f2e1['getTime']()>=_0x3bac02){const _0x2e4952=_0x29f2e1['getHours'](),_0x4ef84f=_0x29f2e1['getMinutes'](),_0xf64c6d=_0x2e4952*0x2+Math[_0x277776(0x200)](_0x4ef84f/0x1e);_0xf64c6d>=0x0&&_0xf64c6d<0x30&&(_0x194dc2[_0xf64c6d]++,_0x5897e8[_0xf64c6d][_0x277776(0x104)]({'time':_0x29f2e1[_0x277776(0x1c3)](_0x277776(0x1d2),{'hour':_0x277776(0x17f),'minute':_0x277776(0x17f)}),'location':_0x160af4[_0x277776(0x169)]||_0x277776(0x164),'type':_0x160af4[_0x277776(0x141)]||_0x277776(0x216)}));}}),this['setStateAsync'](_0x4e52e7(0x162),{'val':JSON['stringify'](_0x194dc2),'ack':!![]}),this[_0x4e52e7(0x106)]('analysis.health.todayRoomDetails',{'val':JSON[_0x4e52e7(0x1bd)](_0x5897e8),'ack':!![]});}async[a0_0x5e3f03(0x1b2)](_0x39d43d){const _0x484a3c=a0_0x5e3f03;if(!this[_0x484a3c(0x193)][_0x484a3c(0x10e)]||typeof _0x39d43d!==_0x484a3c(0x1aa))return;const _0x1ef3d8=this[_0x484a3c(0x193)][_0x484a3c(0x11d)]||0.04;this[_0x484a3c(0x218)]['push']({'timestamp':Date[_0x484a3c(0x1bb)](),'value':_0x39d43d}),this[_0x484a3c(0x218)][_0x484a3c(0x1b9)]>0x64&&this['pressureBuffer'][_0x484a3c(0x1ba)](),_0x39d43d>_0x1ef3d8&&!this[_0x484a3c(0x1b1)]&&(this[_0x484a3c(0x1b1)]=!![],this[_0x484a3c(0x1b7)][_0x484a3c(0x18d)](_0x484a3c(0x140)+_0x39d43d[_0x484a3c(0x174)](0x4)+'\x20>\x20'+_0x1ef3d8+'\x20(Threshold)'),await this[_0x484a3c(0x1c6)](_0x39d43d,_0x484a3c(0x1d9)),setTimeout(()=>{this['infrasoundLocked']=![];},0x5*0x3c*0x3e8));}async[a0_0x5e3f03(0x1c6)](_0x30acea,_0x31ae86){const _0x5ed2fb=a0_0x5e3f03;if(!this['isPresent']){const _0x40a708=this[_0x5ed2fb(0x1d1)][_0x5ed2fb(0xf3)](0x0,0xa),_0x49f961=_0x40a708[_0x5ed2fb(0x136)](_0x39cdde=>new Date(_0x39cdde['timestamp'])[_0x5ed2fb(0x1c3)](_0x5ed2fb(0x1d2))+_0x5ed2fb(0x11a)+(_0x39cdde[_0x5ed2fb(0x169)]||'Unknown')+':\x20'+_0x39cdde[_0x5ed2fb(0xf9)])['join']('\x0a');this['log'][_0x5ed2fb(0x18d)](_0x5ed2fb(0xe5)+_0x30acea[_0x5ed2fb(0x174)](0x4)+',\x20Events:\x0a'+_0x49f961);if(this[_0x5ed2fb(0x193)][_0x5ed2fb(0x167)])try{const _0x43385f=await this['getForeignStateAsync'](this[_0x5ed2fb(0x193)][_0x5ed2fb(0x167)]);_0x43385f&&_0x43385f[_0x5ed2fb(0x15e)]===!![]&&(await this[_0x5ed2fb(0x106)]('analysis.safety.infrasoundAlert',{'val':JSON[_0x5ed2fb(0x1bd)]({'timestamp':Date[_0x5ed2fb(0x1bb)](),'pressure':_0x30acea['toFixed'](0x4),'eventType':_0x31ae86,'recentEvents':_0x40a708[_0x5ed2fb(0xf3)](0x0,0x3)}),'ack':!![]}),this[_0x5ed2fb(0x1b7)][_0x5ed2fb(0x20f)](_0x5ed2fb(0x20a)));}catch(_0x281920){}}else this[_0x5ed2fb(0x1b7)]['debug'](_0x5ed2fb(0x16e)+_0x30acea[_0x5ed2fb(0x174)](0x4)+_0x5ed2fb(0x173));}async['analyzeWindowOpening'](_0x273922){const _0xe5278d=a0_0x5e3f03;if(!_0x273922||!_0x273922[_0xe5278d(0x169)])return;try{const _0x5cc374=(this['config'][_0xe5278d(0x132)]||[])[_0xe5278d(0x1e5)](_0xe0781a=>_0xe0781a[_0xe5278d(0x169)]===_0x273922['location']&&(_0xe0781a[_0xe5278d(0x141)]===_0xe5278d(0xf4)||_0xe0781a['type']==='thermostat'));if(_0x5cc374[_0xe5278d(0x1b9)]===0x0)return;const _0x3f4737=await this[_0xe5278d(0x16c)](_0x5cc374[0x0]['id']);if(!_0x3f4737||typeof _0x3f4737['val']!==_0xe5278d(0x1aa))return;const _0x3498b0=_0x3f4737[_0xe5278d(0x15e)];let _0x101a64=null;if(this[_0xe5278d(0x193)][_0xe5278d(0x198)]){const _0x45eb05=await this[_0xe5278d(0x16c)](this[_0xe5278d(0x193)]['weatherTempId']);_0x45eb05&&typeof _0x45eb05[_0xe5278d(0x15e)]==='number'&&(_0x101a64=_0x45eb05['val']);}if(_0x101a64!==null){const _0x51ec2e=Math[_0xe5278d(0x14f)](_0x3498b0-_0x101a64);_0x51ec2e>0x3&&(this[_0xe5278d(0x1b7)][_0xe5278d(0x129)](_0xe5278d(0x1a0)+_0x273922[_0xe5278d(0x169)]+_0xe5278d(0xe7)+_0x51ec2e[_0xe5278d(0x174)](0x1)+_0xe5278d(0x1eb)+_0x3498b0+_0xe5278d(0x1ab)+_0x101a64+_0xe5278d(0x1c9)),await this[_0xe5278d(0x106)](_0xe5278d(0x157),{'val':JSON[_0xe5278d(0x1bd)]({'room':_0x273922['location'],'timestamp':Date[_0xe5278d(0x1bb)](),'tempDiff':_0x51ec2e[_0xe5278d(0x174)](0x1),'recommendation':_0x51ec2e>0x5?'Gute\x20L√ºftungsm√∂glichkeit!':_0xe5278d(0x232)}),'ack':!![]}));}}catch(_0x4842ca){this['log'][_0xe5278d(0x18d)](_0xe5278d(0x210)+_0x4842ca[_0xe5278d(0x148)]);}}async[a0_0x5e3f03(0x117)](_0x23c190){const _0x48fbee=a0_0x5e3f03;if(!_0x23c190||typeof _0x23c190!=='object')return;const _0x313fe8={'timestamp':_0x23c190[_0x48fbee(0x201)]||Date[_0x48fbee(0x1bb)](),'id':_0x23c190['id']||Date['now']()[_0x48fbee(0x14d)](),'name':_0x23c190[_0x48fbee(0xf9)]||_0x48fbee(0x121),'type':_0x23c190['type']||_0x48fbee(0x229),'location':_0x23c190[_0x48fbee(0x169)]||_0x48fbee(0x15a),'value':_0x23c190[_0x48fbee(0x124)]||null};this['eventHistory']['unshift'](_0x313fe8);if(this[_0x48fbee(0x1d1)][_0x48fbee(0x1b9)]>0x1388)this[_0x48fbee(0x1d1)][_0x48fbee(0x1cc)]();await this[_0x48fbee(0x106)](_0x48fbee(0x1db),{'val':JSON[_0x48fbee(0x1bd)](this[_0x48fbee(0x1d1)]),'ack':!![]}),this[_0x48fbee(0x1b7)][_0x48fbee(0x129)]('üìù\x20Manual\x20event\x20logged:\x20'+_0x313fe8[_0x48fbee(0xf9)]+'\x20('+_0x313fe8['location']+')');}[a0_0x5e3f03(0x165)](_0x44bd76){}}if(require[a0_0x5e3f03(0x1fe)]!==module)module['exports']=_0x50fadc=>new CogniLiving(_0x50fadc);else new CogniLiving();