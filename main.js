const a0_0x38b2fc=a0_0x34ca;function a0_0x34ca(_0x39705a,_0x2f3e09){const _0x384778=a0_0x2b2d();return a0_0x34ca=function(_0x38c2c4,_0x4f1bbc){_0x38c2c4=_0x38c2c4-0x119;let _0x2b2d68=_0x384778[_0x38c2c4];return _0x2b2d68;},a0_0x34ca(_0x39705a,_0x2f3e09);}(function(_0x561df3,_0x2bb472){const _0x585245=a0_0x34ca,_0x2067b4=_0x561df3();while(!![]){try{const _0x5e670f=parseInt(_0x585245(0x1e9))/0x1*(-parseInt(_0x585245(0x1ba))/0x2)+-parseInt(_0x585245(0x154))/0x3*(-parseInt(_0x585245(0x1af))/0x4)+parseInt(_0x585245(0x14f))/0x5*(parseInt(_0x585245(0x182))/0x6)+parseInt(_0x585245(0x226))/0x7*(parseInt(_0x585245(0x1a5))/0x8)+-parseInt(_0x585245(0x1b1))/0x9*(-parseInt(_0x585245(0x159))/0xa)+-parseInt(_0x585245(0x1c9))/0xb+-parseInt(_0x585245(0x20e))/0xc;if(_0x5e670f===_0x2bb472)break;else _0x2067b4['push'](_0x2067b4['shift']());}catch(_0x5a7f6){_0x2067b4['push'](_0x2067b4['shift']());}}}(a0_0x2b2d,0x857a1));function a0_0x2b2d(){const _0x36a052=['VACATION','subscribeForeignStatesAsync','lastTrackerEventTime','stopService','pop','protectAiMemory','send','LTM.baselineStatus','./lib/scheduler','warn','120014aSVYdz','.json','energy','ack','ltmJob','onMessage','isGracePeriodActive','includes','terrasse','existsSync','onReady','open','fill','LTM.trainingData.sequences','bin','analysis.health.geminiNight','debug','updateHealthVector','json','readFileSync','setStateAsync','Lernphase\x20(','setPresence','Gemini\x20Init\x20Error:\x20','TRAIN_ENERGY','dependencyInstallInProgress','moduleEnergy','cleanupGhostInterventions','{\x22today\x22:{},\x20\x22yesterday\x22:{},\x20\x22date\x22:\x22\x22}','analysis.automation.description','üì¶\x20Restored\x20','setHours','\x20events\x20from\x20standard\x20storage.','getHistoryData','timestamp','health','namespace','14520876CDVSuu','analysis.training.triggerHealth','appendToLog','processSensorEvent','geminiApiKey','runPythonHealthCheck','filter','initHistory','./lib/automation','analysis.prediction.trackerConfidence','split','setDate','toString','./lib/topology','checkThermostats','system.presenceWho','sendTo','getForeignStateAsync','writeFileSync','\x20Tage)','callback','command','checkCalendarTriggers','analysis.energy.warmupSources','399beGRjV','security','push','endsWith','Sec-Training\x20started...','LTM.dailyDigests','analyzeWindowOpening','.venv','config','getMinutes','analysisTimer','analysis.energy.warmupTimes','rawEventLog','text','startService','setObjectNotExistsAsync','triggerEnergyPrediction','sendMorningBriefing','slice','round','moduleHealth','analysis.security.learningStatus','sources','replayTodayEvents','./lib/dead_man','handleInfrasound','saveDailyHistory','driftAnalysisTimer','checkWifiPresence','max','LTM.rawEventLog','info','cogni-living','setState','modules','Corrupt','NORMAL','Failed\x20to\x20trigger\x20Python\x20Health\x20Check','models/gemini-flash-latest','üêç\x20Triggering\x20Python\x20Health\x20Check\x20(Activity\x20Trend)...','isSolar','party','@google/generative-ai','SYSTEM_MODES','onStateChange','NIGHT','search','runAutopilot','object','getGenerativeModel','getAbsoluteDefaultDataDir','reduce','devices','toLowerCase','memoryCache','scheduleJob','unload','thermostat','updateTopology','systemConfig','pulse','analysis.health.geminiDay','now','scanDevices','error','minDaysForBaseline','5gThCaZ','find','No\x20data','loadSystemMode','initSystemConfig','1505337fipIHy','location','state','cancel','moduleComfort','2370DbHFYh','generateHealthReport','exitGraceTimer','Keine\x20Daten','analysis.activity.roomHistory','string','historyJob','enum.rooms.*','CALCULATE_HEALTH_TREND','ready','infrasoundEnabled','message','[Integrator]\x20Error:\x20','(((.+)+)+)+$','Unknown','TRAIN_COMFORT','application/json','times','bind','guest','exitTimer','value','todayVector','dailyDigests','Room\x20History\x20(24h\x20Buckets)','parse','analysis.trigger','some','analysis.health.todayVector','activeModules','LTM.trainingData.thermodynamics','toLocaleDateString','motion','val','./lib/ai_agent','automation.triggerAction','communicate.request','‚úÖ\x20History\x20saved:\x20','sensorLastValues','updateLocation','DAY','3805458gbKIeu','inactivityThresholdHours','currentSystemMode','...','log','integrateRoomTime','licenseKey','join','History\x20Save\x20Error:\x20','Daily\x20Activity\x20Vector\x20(48x30min)','values','SET_LEARNING_MODE','all','Room\x20Dwell\x20Time\x20Stats','version','SYSTEM_DP_MODE','date','mkdirSync','analysis.training.status','onUnload','type','getForeignObjectsAsync','python','abortExitTimer','checkLicense','genAI','analysis.health.todayRoomDetails','moduleSecurity','isProVersion','toISOString','length','analysis.automation.patternDetected','./lib/python_bridge','triggerGaitAnalysis','eventHistory','54232yqpkHe','healthTrendInterval','runGeminiAnalysis','scanThermostats','TRAIN_HEALTH','initZombies','bootTime','@iobroker/adapter-core','events.history','window','8hYxdXZ','Guest\x20Mode','32751KhhBPE','Live\x20Event\x20Pulse','getOverviewData','infrasoundSensorId','enum','scanForDevices','presenceDevices',')\x20-\x20Phase\x20E\x20(Enum\x20Fix)','‚ö†\x20Replay\x20skipped:\x20No\x20events\x20in\x20memory.','4zFhtYR','briefingJob','then','analysis.training.triggerSecurity','utf8','getHours','history','getStateAsync','manual','TRAIN_TOPOLOGY','{\x22history\x22:{}}','triggerDailyDigest','modeResetJob','stringify','forEach','9788075kYGEbK','exports','min','analysis.health.activityTrend','Adapter','sendNotification','\x20events\x20from\x20today...','subscribeStates','enum.functions.*','isRelevantActivity','geminiModel','getEnums','common','infrasoundLocked','isPresent','comfort','roomIntegratorTimer','from','apply','Gemini\x20Report\x20Night','name','\x22history\x22:{}'];a0_0x2b2d=function(){return _0x36a052;};return a0_0x2b2d();}const a0_0x4f1bbc=(function(){let _0x1331c2=!![];return function(_0x5a739e,_0x5b56a7){const _0x510020=_0x1331c2?function(){const _0xad82f8=a0_0x34ca;if(_0x5b56a7){const _0x1230fa=_0x5b56a7[_0xad82f8(0x1db)](_0x5a739e,arguments);return _0x5b56a7=null,_0x1230fa;}}:function(){};return _0x1331c2=![],_0x510020;};}()),a0_0x38c2c4=a0_0x4f1bbc(this,function(){const _0x51a252=a0_0x34ca;return a0_0x38c2c4[_0x51a252(0x21a)]()[_0x51a252(0x13b)](_0x51a252(0x166))[_0x51a252(0x21a)]()['constructor'](a0_0x38c2c4)[_0x51a252(0x13b)](_0x51a252(0x166));});a0_0x38c2c4();'use strict';const utils=require(a0_0x38b2fc(0x1ac)),{GoogleGenerativeAI}=require(a0_0x38b2fc(0x137)),path=require('path'),fs=require('fs'),installer=require('./lib/installer'),scanner=require('./lib/scanner'),schedulers=require(a0_0x38b2fc(0x1e7)),topology=require(a0_0x38b2fc(0x21b)),setup=require('./lib/setup'),recorder=require('./lib/recorder'),pythonBridge=require(a0_0x38b2fc(0x1a2)),aiAgent=require(a0_0x38b2fc(0x17b)),deadMan=require(a0_0x38b2fc(0x125)),automation=require(a0_0x38b2fc(0x216)),GEMINI_MODEL=a0_0x38b2fc(0x133);class CogniLiving extends utils[a0_0x38b2fc(0x1cd)]{constructor(_0x39d9ee){const _0x106872=a0_0x38b2fc;super({..._0x39d9ee,'name':_0x106872(0x12d)}),this['eventHistory']=[],this['analysisHistory']=[],this[_0x106872(0x119)]=[],this[_0x106872(0x170)]=[],this[_0x106872(0x17f)]={},this[_0x106872(0x148)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x106872(0x1d7)]=!![],this[_0x106872(0x16d)]=null,this[_0x106872(0x15b)]=null,this[_0x106872(0x1ef)]=![],this[_0x106872(0x19b)]=null,this[_0x106872(0x1d3)]=null,this[_0x106872(0x184)]=setup['SYSTEM_MODES']['NORMAL'],this[_0x106872(0x19e)]=![],this['lastAlertState']=![],this['analysisTimer']=null,this[_0x106872(0x1ed)]=null,this[_0x106872(0x1c6)]=null,this[_0x106872(0x128)]=null,this[_0x106872(0x1bb)]=null,this[_0x106872(0x15f)]=null,this['trackerHeartbeat']=null,this[_0x106872(0x1a6)]=null,this[_0x106872(0x1d9)]=null,this[_0x106872(0x202)]=![],this[_0x106872(0x1e1)]=Date[_0x106872(0x14b)](),this[_0x106872(0x143)]=null,this['bootTime']=Date['now'](),this[_0x106872(0x1d6)]=![],this['pressureBuffer']=[],this['activeModules']={'health':!![],'security':!![],'energy':!![],'comfort':!![]},this['on'](_0x106872(0x162),this[_0x106872(0x1f3)][_0x106872(0x16b)](this)),this['on']('stateChange',this['onStateChange'][_0x106872(0x16b)](this)),this['on'](_0x106872(0x145),this[_0x106872(0x195)][_0x106872(0x16b)](this)),this['on'](_0x106872(0x164),this[_0x106872(0x1ee)]['bind'](this));}async['onReady'](){const _0x29d391=a0_0x38b2fc;this['log'][_0x29d391(0x12c)]('cogni-living\x20adapter\x20starting\x20(v'+this[_0x29d391(0x190)]+_0x29d391(0x1b8));if(this[_0x29d391(0x22e)][_0x29d391(0x121)]!==undefined)this[_0x29d391(0x176)]['health']=this['config']['moduleHealth'];if(this[_0x29d391(0x22e)][_0x29d391(0x19d)]!==undefined)this[_0x29d391(0x176)][_0x29d391(0x227)]=this[_0x29d391(0x22e)][_0x29d391(0x19d)];if(this[_0x29d391(0x22e)][_0x29d391(0x203)]!==undefined)this['activeModules'][_0x29d391(0x1eb)]=this[_0x29d391(0x22e)]['moduleEnergy'];if(this[_0x29d391(0x22e)][_0x29d391(0x158)]!==undefined)this[_0x29d391(0x176)][_0x29d391(0x1d8)]=this['config'][_0x29d391(0x158)];if(this[_0x29d391(0x22e)]['modules'])this[_0x29d391(0x176)]={...this[_0x29d391(0x176)],...this[_0x29d391(0x22e)][_0x29d391(0x12f)]};this['startSystem']();}async['startSystem'](){const _0x5205b4=a0_0x38b2fc;await setup[_0x5205b4(0x1aa)](this);try{this[_0x5205b4(0x19e)]=await setup[_0x5205b4(0x19a)](this['config'][_0x5205b4(0x188)]);}catch(_0x3d2d39){}if(!this[_0x5205b4(0x22e)][_0x5205b4(0x183)]||this[_0x5205b4(0x22e)]['inactivityThresholdHours']<0.1)this[_0x5205b4(0x22e)][_0x5205b4(0x183)]=0xc;await setup[_0x5205b4(0x215)](this),await setup[_0x5205b4(0x153)](this);try{const _0x20ccd6=await this[_0x5205b4(0x1c1)](_0x5205b4(0x231)),_0x5cf3ee=await this['getStateAsync'](_0x5205b4(0x225));_0x20ccd6&&_0x20ccd6['val']&&_0x5cf3ee&&_0x5cf3ee[_0x5205b4(0x17a)]&&(Date[_0x5205b4(0x14b)]()-_0x20ccd6['ts']<0x4*0xe10*0x3e8&&(this[_0x5205b4(0x143)]={'times':JSON['parse'](_0x20ccd6[_0x5205b4(0x17a)]),'sources':JSON[_0x5205b4(0x172)](_0x5cf3ee['val'])}));}catch(_0x5657ee){}if(this[_0x5205b4(0x22e)][_0x5205b4(0x212)])try{this[_0x5205b4(0x19b)]=new GoogleGenerativeAI(this[_0x5205b4(0x22e)][_0x5205b4(0x212)]),this[_0x5205b4(0x1d3)]=this[_0x5205b4(0x19b)][_0x5205b4(0x13e)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x5205b4(0x169)}});}catch(_0x4bea99){this[_0x5205b4(0x186)]['error'](_0x5205b4(0x200)+_0x4bea99['message']);}await setup['createAllObjects'](this),await this[_0x5205b4(0x152)](),await this['setObjectNotExistsAsync']('analysis.visualization.pulse',{'type':_0x5205b4(0x156),'common':{'name':_0x5205b4(0x1b2),'type':'number','role':_0x5205b4(0x16e),'read':!![],'write':![]},'native':{}}),await this[_0x5205b4(0x11c)]('analysis.activity.roomStats',{'type':_0x5205b4(0x156),'common':{'name':_0x5205b4(0x18f),'type':'string','role':_0x5205b4(0x1fb),'read':!![],'write':![],'def':_0x5205b4(0x205)},'native':{}}),await this[_0x5205b4(0x11c)]('analysis.activity.roomHistory',{'type':_0x5205b4(0x156),'common':{'name':_0x5205b4(0x171),'type':_0x5205b4(0x15e),'role':'json','read':!![],'write':![],'def':_0x5205b4(0x1c4)},'native':{}}),await this['setObjectNotExistsAsync'](_0x5205b4(0x1f8),{'type':_0x5205b4(0x156),'common':{'name':_0x5205b4(0x1dc),'type':_0x5205b4(0x15e),'role':_0x5205b4(0x11a),'read':!![],'write':![],'def':'Warte\x20auf\x20Analyse...'},'native':{}}),await this[_0x5205b4(0x11c)](_0x5205b4(0x14a),{'type':_0x5205b4(0x156),'common':{'name':'Gemini\x20Report\x20Day','type':'string','role':_0x5205b4(0x11a),'read':!![],'write':![],'def':'Warte\x20auf\x20Analyse...'},'native':{}}),await this[_0x5205b4(0x11c)](_0x5205b4(0x175),{'type':_0x5205b4(0x156),'common':{'name':_0x5205b4(0x18b),'type':_0x5205b4(0x15e),'role':_0x5205b4(0x1fb),'read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x5205b4(0x11c)](_0x5205b4(0x19c),{'type':_0x5205b4(0x156),'common':{'name':'Daily\x20Room\x20Details\x20(48x30min)','type':_0x5205b4(0x15e),'role':_0x5205b4(0x1fb),'read':!![],'write':![],'def':'[]'},'native':{}}),await this['setObjectNotExistsAsync'](_0x5205b4(0x1cc),{'type':_0x5205b4(0x156),'common':{'name':'General\x20Activity\x20Trend','type':'number','role':'value','unit':'%','read':!![],'write':![]},'native':{}}),await this[_0x5205b4(0x11c)](_0x5205b4(0x231),{'type':_0x5205b4(0x156),'common':{'name':'Warm-Up\x20Time','type':_0x5205b4(0x15e),'role':_0x5205b4(0x1fb),'read':!![],'write':![]},'native':{}});try{const _0x1df157=await this[_0x5205b4(0x1c1)](_0x5205b4(0x1ad));if(_0x1df157&&_0x1df157['val']){this[_0x5205b4(0x1a4)]=JSON[_0x5205b4(0x172)](_0x1df157[_0x5205b4(0x17a)]);if(this['isProVersion']){const _0x46b793=await this[_0x5205b4(0x1c1)](_0x5205b4(0x12b));if(_0x46b793&&_0x46b793[_0x5205b4(0x17a)])this[_0x5205b4(0x119)]=JSON[_0x5205b4(0x172)](_0x46b793[_0x5205b4(0x17a)]);}this[_0x5205b4(0x186)][_0x5205b4(0x12c)](_0x5205b4(0x207)+this[_0x5205b4(0x1a4)][_0x5205b4(0x1a0)]+_0x5205b4(0x209));}}catch(_0x3a63c0){this[_0x5205b4(0x1a4)]=[];}try{const _0x2f8383=await this[_0x5205b4(0x1c1)]('LTM.dailyDigests');if(_0x2f8383&&_0x2f8383[_0x5205b4(0x17a)])this[_0x5205b4(0x170)]=JSON[_0x5205b4(0x172)](_0x2f8383[_0x5205b4(0x17a)]);}catch(_0x52dbb8){this[_0x5205b4(0x170)]=[];}const _0x49199b=this[_0x5205b4(0x170)][_0x5205b4(0x1a0)]>=(this[_0x5205b4(0x22e)]['minDaysForBaseline']||0x7)?'Aktiv\x20('+this[_0x5205b4(0x170)]['length']+_0x5205b4(0x221):_0x5205b4(0x1fe)+this['dailyDigests'][_0x5205b4(0x1a0)]+'/'+(this[_0x5205b4(0x22e)][_0x5205b4(0x14e)]||0x7)+')';await this[_0x5205b4(0x1fd)](_0x5205b4(0x1e6),{'val':_0x49199b,'ack':!![]}),this[_0x5205b4(0x1d0)](_0x5205b4(0x173)),this['subscribeStates']('LTM.triggerDailyDigest'),this[_0x5205b4(0x1d0)]('analysis.training.triggerHealth');this['config'][_0x5205b4(0x163)]&&this[_0x5205b4(0x22e)][_0x5205b4(0x1b4)]&&this['activeModules'][_0x5205b4(0x227)]&&this['subscribeForeignStates'](this['config'][_0x5205b4(0x1b4)]);const _0x10cc9c=this[_0x5205b4(0x22e)][_0x5205b4(0x141)];if(_0x10cc9c)for(const _0x3228f2 of _0x10cc9c){await this[_0x5205b4(0x1e0)](_0x3228f2['id']);}const _0x2855dd=this[_0x5205b4(0x22e)][_0x5205b4(0x1b7)];if(_0x2855dd)for(const _0x3d16b4 of _0x2855dd){await this[_0x5205b4(0x1e0)](_0x3d16b4);}const _0x41a9cc=require('node-schedule');if(this[_0x5205b4(0x15f)])this[_0x5205b4(0x15f)][_0x5205b4(0x157)]();this['historyJob']=_0x41a9cc[_0x5205b4(0x144)]('59\x2023\x20*\x20*\x20*',()=>{this['saveDailyHistory']();}),setTimeout(()=>this[_0x5205b4(0x124)](),0x1388);if(this['roomIntegratorTimer'])clearInterval(this[_0x5205b4(0x1d9)]);this['integrateRoomTime'](),this['roomIntegratorTimer']=setInterval(async()=>{const _0xb9f8b3=_0x5205b4;await this[_0xb9f8b3(0x187)]();},0x3c*0x3e8);if(this[_0x5205b4(0x1a6)])clearInterval(this[_0x5205b4(0x1a6)]);this[_0x5205b4(0x1a6)]=setInterval(()=>{const _0x1d5d66=_0x5205b4;this[_0x1d5d66(0x19e)]&&this[_0x1d5d66(0x176)]['health']&&this['runPythonHealthCheck']();},0x4*0x3c*0x3c*0x3e8);const _0x48d64f=path[_0x5205b4(0x189)](__dirname,_0x5205b4(0x22d),_0x5205b4(0x1f7),_0x5205b4(0x198));pythonBridge[_0x5205b4(0x11b)](this,_0x48d64f);}[a0_0x38b2fc(0x195)](_0x42e2dc){const _0x20d3bd=a0_0x38b2fc;if(this[_0x20d3bd(0x15f)])this[_0x20d3bd(0x15f)][_0x20d3bd(0x157)]();this['saveDailyHistory']()[_0x20d3bd(0x1bc)](()=>{const _0xeb8290=_0x20d3bd;if(this[_0xeb8290(0x230)])clearInterval(this['analysisTimer']);if(this[_0xeb8290(0x1d9)])clearInterval(this[_0xeb8290(0x1d9)]);recorder[_0xeb8290(0x199)](this),pythonBridge[_0xeb8290(0x1e2)](this),_0x42e2dc();});}async[a0_0x38b2fc(0x124)](){const _0x40c55e=a0_0x38b2fc;if(!this[_0x40c55e(0x1a4)]||this[_0x40c55e(0x1a4)][_0x40c55e(0x1a0)]===0x0){this[_0x40c55e(0x186)]['warn'](_0x40c55e(0x1b9));return;}this['log'][_0x40c55e(0x12c)]('‚Ü∫\x20Replaying\x20'+this[_0x40c55e(0x1a4)][_0x40c55e(0x1a0)]+_0x40c55e(0x1cf));const _0x25419b=new Date()['setHours'](0x0,0x0,0x0,0x0),_0x32427e='analysis.activity.roomHistory';let _0x53dde0={'history':{},'date':new Date()[_0x40c55e(0x178)]()};const _0xed77b4=_0x40c55e(0x175),_0x587c90=_0x40c55e(0x19c);let _0x1da51d=new Array(0x30)[_0x40c55e(0x1f5)](0x0),_0x2f6963=Array[_0x40c55e(0x1da)]({'length':0x30},()=>[]);this['eventHistory'][_0x40c55e(0x1c8)](_0x2b3fd9=>{const _0x41a46b=_0x40c55e;if(_0x2b3fd9[_0x41a46b(0x20b)]>=_0x25419b){if(recorder[_0x41a46b(0x1d2)](_0x2b3fd9[_0x41a46b(0x196)],_0x2b3fd9[_0x41a46b(0x16e)])){const _0x37d557=new Date(_0x2b3fd9[_0x41a46b(0x20b)]),_0x241833=_0x37d557[_0x41a46b(0x1bf)]()*0x2+(_0x37d557[_0x41a46b(0x22f)]()>=0x1e?0x1:0x0);if(_0x241833<0x30){_0x1da51d[_0x241833]++;const _0x21e63a=_0x2b3fd9[_0x41a46b(0x155)]||_0x2b3fd9[_0x41a46b(0x1dd)]||'?';let _0x4dd999=_0x2f6963[_0x241833];!_0x4dd999['includes'](_0x21e63a)&&_0x4dd999[_0x41a46b(0x228)](_0x21e63a);}const _0x559b3b=_0x37d557[_0x41a46b(0x1bf)]();let _0x55db89=_0x2b3fd9['location']||_0x41a46b(0x167);const _0x4d8d8b=(this[_0x41a46b(0x22e)][_0x41a46b(0x141)]||[])[_0x41a46b(0x150)](_0x29b23a=>_0x29b23a[_0x41a46b(0x155)]===_0x55db89);if(_0x4d8d8b)_0x55db89=_0x4d8d8b['location'];if(!_0x53dde0['history'][_0x55db89])_0x53dde0[_0x41a46b(0x1c0)][_0x55db89]=new Array(0x18)[_0x41a46b(0x1f5)](0x0);if(_0x53dde0[_0x41a46b(0x1c0)][_0x55db89][_0x559b3b]<0x3c)_0x53dde0[_0x41a46b(0x1c0)][_0x55db89][_0x559b3b]++;}}});const _0x3fb791=await this[_0x40c55e(0x1c1)](_0x32427e);(!_0x3fb791||!_0x3fb791['val']||_0x3fb791[_0x40c55e(0x17a)]==='{}'||_0x3fb791['val'][_0x40c55e(0x1f0)](_0x40c55e(0x1de)))&&await this[_0x40c55e(0x1fd)](_0x32427e,{'val':JSON[_0x40c55e(0x1c7)](_0x53dde0),'ack':!![]}),await this['setStateAsync'](_0xed77b4,{'val':JSON[_0x40c55e(0x1c7)](_0x1da51d),'ack':!![]}),await this[_0x40c55e(0x1fd)](_0x587c90,{'val':JSON['stringify'](_0x2f6963),'ack':!![]}),this[_0x40c55e(0x186)]['info']('‚úÖ\x20Dashboard\x20Data\x20(Rooms\x20&\x20Timeline\x20&\x20Details)\x20restored.');}async[a0_0x38b2fc(0x127)](){const _0x1f6c0c=a0_0x38b2fc;if(!this[_0x1f6c0c(0x176)][_0x1f6c0c(0x20c)])return;const _0x470dac=new Date()['toISOString']()['split']('T')[0x0];this[_0x1f6c0c(0x186)][_0x1f6c0c(0x1f9)]('üíæ\x20Saving\x20Daily\x20History\x20for\x20'+_0x470dac+_0x1f6c0c(0x185));try{const [_0x1330ae,_0x3a1dbe,_0x33e738,_0x12e560,_0x332c56,_0x46f1f7]=await Promise[_0x1f6c0c(0x18e)]([this[_0x1f6c0c(0x1c1)](_0x1f6c0c(0x15d)),this[_0x1f6c0c(0x1c1)](_0x1f6c0c(0x1f8)),this[_0x1f6c0c(0x1c1)](_0x1f6c0c(0x14a)),this['getStateAsync']('analysis.security.lastScore'),this['getStateAsync']('analysis.health.todayVector'),this[_0x1f6c0c(0x1c1)](_0x1f6c0c(0x1cc))]),_0x208583=this[_0x1f6c0c(0x1a4)][_0x1f6c0c(0x214)](_0x21d979=>_0x21d979[_0x1f6c0c(0x20b)]>=new Date()[_0x1f6c0c(0x208)](0x0,0x0,0x0,0x0)&&(_0x21d979['name'][_0x1f6c0c(0x142)]()['includes']('haust√ºr')||_0x21d979[_0x1f6c0c(0x1dd)][_0x1f6c0c(0x142)]()['includes'](_0x1f6c0c(0x1f1)))&&(_0x21d979[_0x1f6c0c(0x16e)]===!![]||_0x21d979[_0x1f6c0c(0x16e)]===_0x1f6c0c(0x1f4)))[_0x1f6c0c(0x1a0)];let _0x59ffc7=0x55;if(_0x46f1f7&&_0x46f1f7[_0x1f6c0c(0x17a)]!==undefined)_0x59ffc7=Math[_0x1f6c0c(0x1cb)](0x64,Math[_0x1f6c0c(0x12a)](0x14,Math[_0x1f6c0c(0x120)](0x50+Number(_0x46f1f7[_0x1f6c0c(0x17a)])*0x5)));const _0x5098ac={'date':_0x470dac,'timestamp':Date[_0x1f6c0c(0x14b)](),'roomHistory':_0x1330ae?.[_0x1f6c0c(0x17a)]?JSON[_0x1f6c0c(0x172)](_0x1330ae[_0x1f6c0c(0x17a)]):{},'geminiNight':_0x3a1dbe?.[_0x1f6c0c(0x17a)]||_0x1f6c0c(0x15c),'geminiDay':_0x33e738?.[_0x1f6c0c(0x17a)]||_0x1f6c0c(0x15c),'anomalyScore':_0x12e560?.[_0x1f6c0c(0x17a)]||0.1,'todayVector':_0x332c56?.['val']?JSON['parse'](_0x332c56[_0x1f6c0c(0x17a)]):new Array(0x30)[_0x1f6c0c(0x1f5)](0x0),'batteryLevel':_0x59ffc7,'freshAirCount':_0x208583,'eventHistory':this[_0x1f6c0c(0x1a4)]},_0x115a23=utils[_0x1f6c0c(0x13f)](),_0x32a964=path[_0x1f6c0c(0x189)](_0x115a23,_0x1f6c0c(0x12d),_0x1f6c0c(0x1c0));if(!fs[_0x1f6c0c(0x1f2)](_0x32a964))fs[_0x1f6c0c(0x193)](_0x32a964,{'recursive':!![]});const _0x5cf978=path[_0x1f6c0c(0x189)](_0x32a964,_0x470dac+_0x1f6c0c(0x1ea));fs[_0x1f6c0c(0x220)](_0x5cf978,JSON[_0x1f6c0c(0x1c7)](_0x5098ac)),this[_0x1f6c0c(0x186)][_0x1f6c0c(0x12c)](_0x1f6c0c(0x17e)+_0x5cf978);}catch(_0x57a2a3){this[_0x1f6c0c(0x186)][_0x1f6c0c(0x14d)](_0x1f6c0c(0x18a)+_0x57a2a3[_0x1f6c0c(0x164)]);}}async[a0_0x38b2fc(0x187)](){const _0x2e6d40=a0_0x38b2fc;if(!this['isPresent'])return;try{let _0x450f05=null;try{const _0x539714=await this['getStateAsync']('analysis.prediction.trackerTopRoom'),_0x4c9dc1=await this[_0x2e6d40(0x1c1)](_0x2e6d40(0x217));if(_0x539714&&_0x539714[_0x2e6d40(0x17a)]&&_0x4c9dc1&&_0x4c9dc1[_0x2e6d40(0x17a)]&&_0x4c9dc1['val']>0.3){if(_0x539714[_0x2e6d40(0x17a)]!=='Unknown'&&_0x539714[_0x2e6d40(0x17a)]!=='Init...')_0x450f05=_0x539714['val'];}}catch(_0x5edda6){}if(!_0x450f05){const _0x29a96d=this[_0x2e6d40(0x22e)]['devices']||[];for(const _0x49daf6 of _0x29a96d){if(_0x49daf6[_0x2e6d40(0x196)]===_0x2e6d40(0x179)&&_0x49daf6[_0x2e6d40(0x155)])try{const _0x13897b=await this[_0x2e6d40(0x21f)](_0x49daf6['id']);if(_0x13897b&&(_0x13897b['val']===!![]||_0x13897b[_0x2e6d40(0x17a)]==='on'||_0x13897b[_0x2e6d40(0x17a)]===0x1)){_0x450f05=_0x49daf6[_0x2e6d40(0x155)];break;}}catch(_0x357598){}}}if(!_0x450f05)return;const _0x4cd76f=this[_0x2e6d40(0x22e)][_0x2e6d40(0x141)]||[];let _0xdaa885=_0x450f05;const _0x6e0fd8=_0x4cd76f[_0x2e6d40(0x150)](_0x14d1f2=>_0x14d1f2['location']&&_0x14d1f2[_0x2e6d40(0x155)]['toLowerCase']()===_0x450f05[_0x2e6d40(0x142)]());if(_0x6e0fd8)_0xdaa885=_0x6e0fd8[_0x2e6d40(0x155)];const _0x58455f=_0x2e6d40(0x15d),_0x109d06=await this[_0x2e6d40(0x1c1)](_0x58455f),_0x3c71b3=new Date()[_0x2e6d40(0x178)]();let _0x374272={'history':{},'date':_0x3c71b3};if(_0x109d06&&_0x109d06['val'])try{_0x374272=JSON[_0x2e6d40(0x172)](_0x109d06[_0x2e6d40(0x17a)]);}catch(_0x76594a){}_0x374272[_0x2e6d40(0x192)]!==_0x3c71b3&&(_0x374272['history']={},_0x374272[_0x2e6d40(0x192)]=_0x3c71b3);if(!_0x374272[_0x2e6d40(0x1c0)][_0xdaa885])_0x374272[_0x2e6d40(0x1c0)][_0xdaa885]=new Array(0x18)[_0x2e6d40(0x1f5)](0x0);const _0x5265a6=new Date()[_0x2e6d40(0x1bf)]();if(_0x374272[_0x2e6d40(0x1c0)][_0xdaa885][_0x5265a6]<0x3c)_0x374272['history'][_0xdaa885][_0x5265a6]++;await this['setStateAsync'](_0x58455f,{'val':JSON['stringify'](_0x374272),'ack':!![]});}catch(_0x2081b2){this[_0x2e6d40(0x186)][_0x2e6d40(0x1e8)](_0x2e6d40(0x165)+_0x2081b2[_0x2e6d40(0x164)]);}}async['onMessage'](_0x1b8dc9){const _0x3af690=a0_0x38b2fc;if(typeof _0x1b8dc9===_0x3af690(0x13d)&&_0x1b8dc9[_0x3af690(0x164)]){if(_0x1b8dc9[_0x3af690(0x223)]===_0x3af690(0x20a)){const _0x44237a=_0x1b8dc9[_0x3af690(0x164)][_0x3af690(0x192)],_0x34c600=utils[_0x3af690(0x13f)](),_0x315ba4=path[_0x3af690(0x189)](_0x34c600,'cogni-living',_0x3af690(0x1c0),_0x44237a+'.json');if(fs[_0x3af690(0x1f2)](_0x315ba4))try{const _0x494188=JSON[_0x3af690(0x172)](fs[_0x3af690(0x1fc)](_0x315ba4,_0x3af690(0x1be)));this['sendTo'](_0x1b8dc9[_0x3af690(0x1da)],_0x1b8dc9['command'],{'success':!![],'data':_0x494188},_0x1b8dc9[_0x3af690(0x222)]);}catch(_0xf9ecfb){this[_0x3af690(0x21e)](_0x1b8dc9['from'],_0x1b8dc9[_0x3af690(0x223)],{'success':![],'error':_0x3af690(0x130)},_0x1b8dc9[_0x3af690(0x222)]);}else this[_0x3af690(0x21e)](_0x1b8dc9[_0x3af690(0x1da)],_0x1b8dc9[_0x3af690(0x223)],{'success':![],'error':_0x3af690(0x151)},_0x1b8dc9[_0x3af690(0x222)]);}else{if(_0x1b8dc9[_0x3af690(0x223)]===_0x3af690(0x1b3)){const _0x5a44df=this[_0x3af690(0x170)][_0x3af690(0x1a0)];let _0x5e0432=new Array(0x30)[_0x3af690(0x1f5)](0x0),_0x50807f=Array[_0x3af690(0x1da)]({'length':0x30},()=>[]);try{const _0x301b5e=await this[_0x3af690(0x1c1)]('analysis.health.todayVector');if(_0x301b5e&&_0x301b5e[_0x3af690(0x17a)])_0x5e0432=JSON[_0x3af690(0x172)](_0x301b5e[_0x3af690(0x17a)]);const _0x25296d=await this[_0x3af690(0x1c1)](_0x3af690(0x19c));if(_0x25296d&&_0x25296d['val'])_0x50807f=JSON[_0x3af690(0x172)](_0x25296d[_0x3af690(0x17a)]);}catch(_0x2aac2b){}let _0x168f59=new Array(0x30)[_0x3af690(0x1f5)](0x0);try{const _0x27c31d=new Date();_0x27c31d[_0x3af690(0x219)](_0x27c31d['getDate']()-0x1);const _0x38acc3=_0x27c31d[_0x3af690(0x19f)]()[_0x3af690(0x218)]('T')[0x0],_0x56679a=utils[_0x3af690(0x13f)](),_0x473b3b=path[_0x3af690(0x189)](_0x56679a,'cogni-living',_0x3af690(0x1c0),_0x38acc3+_0x3af690(0x1ea));if(fs['existsSync'](_0x473b3b)){const _0x3391ac=JSON[_0x3af690(0x172)](fs[_0x3af690(0x1fc)](_0x473b3b,_0x3af690(0x1be)));if(_0x3391ac&&_0x3391ac[_0x3af690(0x16f)])_0x168f59=_0x3391ac[_0x3af690(0x16f)];}}catch(_0x4ae76b){}let _0x3313b7={'today':{},'yesterday':{}};try{const _0x6ad6e9=await this[_0x3af690(0x1c1)]('analysis.activity.roomStats');if(_0x6ad6e9&&_0x6ad6e9[_0x3af690(0x17a)])_0x3313b7=JSON[_0x3af690(0x172)](_0x6ad6e9[_0x3af690(0x17a)]);}catch(_0x29cf84){}let _0x2463c0=null;try{const _0x53eec1=await this[_0x3af690(0x1c1)]('analysis.health.activityTrend');if(_0x53eec1)_0x2463c0=_0x53eec1['val'];}catch(_0x37b476){}if(_0x2463c0===undefined||_0x2463c0===null){const _0x545a12=_0x5e0432[_0x3af690(0x140)]((_0x3c6692,_0x5e31fb)=>_0x3c6692+_0x5e31fb,0x0),_0x259b16=Math[_0x3af690(0x1cb)](0x2,Math[_0x3af690(0x12a)](-0x2,(0x64-_0x545a12)/0x32));_0x2463c0=_0x259b16;}let _0x2b6397=![],_0x4fd44b='',_0x3f5a4c='',_0x44fe9a='';try{const _0x33e84d=await this['getStateAsync'](_0x3af690(0x1a1));if(_0x33e84d&&_0x33e84d[_0x3af690(0x17a)]){_0x2b6397=!![];const _0x594b2e=await this[_0x3af690(0x1c1)](_0x3af690(0x206));_0x4fd44b=_0x594b2e?_0x594b2e[_0x3af690(0x17a)]:'';const _0x31bcb1=await this['getStateAsync']('analysis.automation.targetId');_0x3f5a4c=_0x31bcb1?_0x31bcb1[_0x3af690(0x17a)]:'';const _0x2a589a=await this[_0x3af690(0x1c1)]('analysis.automation.targetValue');_0x44fe9a=_0x2a589a?_0x2a589a[_0x3af690(0x17a)]:'';}}catch(_0x4bd9aa){}const _0x1d1e71=await this['checkSolarCondition'](),_0x44f417=(this[_0x3af690(0x22e)][_0x3af690(0x141)]||[])[_0x3af690(0x174)](_0x479476=>_0x479476[_0x3af690(0x135)]),_0x2df5bb=_0x1d1e71&&_0x44f417;let _0x4b8222='';try{const _0x4a23bf=await this[_0x3af690(0x1c1)](_0x3af690(0x21d));if(_0x4a23bf&&_0x4a23bf[_0x3af690(0x17a)])_0x4b8222=_0x4a23bf[_0x3af690(0x17a)];}catch(_0x4d8905){}this[_0x3af690(0x21e)](_0x1b8dc9[_0x3af690(0x1da)],_0x1b8dc9['command'],{'success':!![],'eventHistory':this['eventHistory'][_0x3af690(0x11f)](0x0,0x7d0),'stats':{'digestCount':_0x5a44df,'isPresent':this[_0x3af690(0x1d7)],'hourlyActivity':_0x5e0432,'hourlyDetails':_0x50807f,'yesterdayActivity':_0x168f59,'solarActive':_0x2df5bb,'presenceWho':_0x4b8222,'roomStats':_0x3313b7,'activityTrend':_0x2463c0,'modules':this[_0x3af690(0x176)]},'automation':{'detected':_0x2b6397,'description':_0x4fd44b,'targetId':_0x3f5a4c,'targetValue':_0x44fe9a}},_0x1b8dc9[_0x3af690(0x222)]);}else{if(_0x1b8dc9[_0x3af690(0x223)]===_0x3af690(0x21c))try{const _0x1c2e76=await automation[_0x3af690(0x1a8)](this);this[_0x3af690(0x21e)](_0x1b8dc9['from'],_0x1b8dc9[_0x3af690(0x223)],{'success':!![],'results':_0x1c2e76},_0x1b8dc9[_0x3af690(0x222)]);}catch(_0x172472){this[_0x3af690(0x21e)](_0x1b8dc9[_0x3af690(0x1da)],_0x1b8dc9['command'],{'success':![],'error':_0x172472[_0x3af690(0x164)]},_0x1b8dc9['callback']);}else{if(_0x1b8dc9[_0x3af690(0x223)]===_0x3af690(0x14c))try{const _0x474c58=await scanner[_0x3af690(0x1b6)](this,_0x1b8dc9[_0x3af690(0x164)]||{});this[_0x3af690(0x21e)](_0x1b8dc9[_0x3af690(0x1da)],_0x1b8dc9[_0x3af690(0x223)],{'success':!![],'devices':_0x474c58},_0x1b8dc9['callback']);}catch(_0x81b40e){}else{if(_0x1b8dc9[_0x3af690(0x223)]===_0x3af690(0x1d4)){const _0x424d72=await this[_0x3af690(0x197)](_0x3af690(0x1d1),'enum'),_0x3202e8=[];if(_0x424d72)for(const _0x1351dd in _0x424d72){let _0x5ad57f=_0x424d72[_0x1351dd][_0x3af690(0x1d5)][_0x3af690(0x1dd)];if(_0x5ad57f&&typeof _0x5ad57f===_0x3af690(0x13d))_0x5ad57f=_0x5ad57f['de']||_0x5ad57f['en']||Object[_0x3af690(0x18c)](_0x5ad57f)[0x0]||JSON[_0x3af690(0x1c7)](_0x5ad57f);_0x3202e8['push']({'id':_0x1351dd,'name':_0x5ad57f});}const _0x2cacfc=await this['getForeignObjectsAsync'](_0x3af690(0x160),_0x3af690(0x1b5)),_0x286be4=[];if(_0x2cacfc)for(const _0x4a8679 in _0x2cacfc){let _0x1dad14=_0x2cacfc[_0x4a8679]['common']['name'];if(_0x1dad14&&typeof _0x1dad14==='object')_0x1dad14=_0x1dad14['de']||_0x1dad14['en']||Object[_0x3af690(0x18c)](_0x1dad14)[0x0]||JSON[_0x3af690(0x1c7)](_0x1dad14);_0x286be4[_0x3af690(0x228)](_0x1dad14||_0x4a8679[_0x3af690(0x218)]('.')[_0x3af690(0x1e3)]());}this[_0x3af690(0x21e)](_0x1b8dc9[_0x3af690(0x1da)],_0x1b8dc9[_0x3af690(0x223)],{'success':!![],'enums':_0x3202e8,'rooms':_0x286be4},_0x1b8dc9['callback']);}}}}}}}['runPythonHealthCheck'](){const _0x3e968a=a0_0x38b2fc;if(!this[_0x3e968a(0x176)][_0x3e968a(0x20c)])return;this[_0x3e968a(0x186)][_0x3e968a(0x1f9)](_0x3e968a(0x134));try{const _0x21c0d4=this[_0x3e968a(0x119)]||[];pythonBridge[_0x3e968a(0x1e5)](this,_0x3e968a(0x161),{'events':_0x21c0d4});}catch(_0x189dc2){this['log']['warn'](_0x3e968a(0x132));}}async[a0_0x38b2fc(0x139)](_0x355497,_0xb208){const _0x53e62b=a0_0x38b2fc;if(!_0xb208||this['dependencyInstallInProgress'])return;if(_0x355497[_0x53e62b(0x1f0)]('telegram')&&_0x355497[_0x53e62b(0x229)](_0x53e62b(0x17d))&&_0xb208[_0x53e62b(0x17a)])return;if(this['config'][_0x53e62b(0x163)]&&_0x355497===this[_0x53e62b(0x22e)]['infrasoundSensorId']&&this[_0x53e62b(0x176)][_0x53e62b(0x227)]){this[_0x53e62b(0x126)](_0xb208[_0x53e62b(0x17a)]);return;}if(_0xb208['ack']&&_0x355497[_0x53e62b(0x229)](_0x53e62b(0x149)))return;if(_0x355497===this[_0x53e62b(0x20d)]+'.system.mode'){if(_0xb208[_0x53e62b(0x17a)]&&Object[_0x53e62b(0x18c)](setup[_0x53e62b(0x138)])[_0x53e62b(0x1f0)](_0xb208[_0x53e62b(0x17a)])){this[_0x53e62b(0x184)]=_0xb208[_0x53e62b(0x17a)];if(_0xb208[_0x53e62b(0x17a)]===setup[_0x53e62b(0x138)][_0x53e62b(0x1df)])await recorder[_0x53e62b(0x1ff)](this,![]);else await recorder[_0x53e62b(0x1ff)](this,!![]);if(this[_0x53e62b(0x19e)]){let _0x50160c=![],_0x256c5c=0x0,_0x2fdf68=_0x53e62b(0x1c2);if(this[_0x53e62b(0x184)]===_0x53e62b(0x136))_0x50160c=!![],_0x256c5c=0x168,_0x2fdf68='Party\x20Mode';else this[_0x53e62b(0x184)]===_0x53e62b(0x16c)&&(_0x50160c=!![],_0x256c5c=0x5a0,_0x2fdf68=_0x53e62b(0x1b0));pythonBridge[_0x53e62b(0x1e5)](this,_0x53e62b(0x18d),{'active':_0x50160c,'duration':_0x256c5c,'label':_0x2fdf68}),await this[_0x53e62b(0x1fd)](_0x53e62b(0x122),{'val':JSON[_0x53e62b(0x1c7)]({'active':_0x50160c,'label':_0x2fdf68,'timestamp':Date['now']()}),'ack':!![]});}}if(!_0xb208[_0x53e62b(0x1ec)])this['setState'](_0x355497,{'val':this[_0x53e62b(0x184)],'ack':!![]});return;}if(_0x355497['endsWith'](_0x53e62b(0x225))&&_0xb208[_0x53e62b(0x1ec)])this[_0x53e62b(0x1e4)](_0xb208[_0x53e62b(0x17a)]);if(_0x355497[_0x53e62b(0x229)](_0x53e62b(0x231))&&_0xb208[_0x53e62b(0x1ec)]&&this[_0x53e62b(0x176)][_0x53e62b(0x1eb)])automation[_0x53e62b(0x224)](this);if(!_0xb208[_0x53e62b(0x1ec)]){if(_0x355497[_0x53e62b(0x1f0)](_0x53e62b(0x173))&&_0xb208[_0x53e62b(0x17a)]){this[_0x53e62b(0x12e)](_0x355497,{'val':![],'ack':!![]}),aiAgent['runGeminiAnalysis'](this);return;}if(_0x355497[_0x53e62b(0x1f0)](_0x53e62b(0x1c5))&&_0xb208[_0x53e62b(0x17a)]){this[_0x53e62b(0x12e)](_0x355497,{'val':![],'ack':!![]});if(this[_0x53e62b(0x19e)])aiAgent['createDailyDigest'](this,pythonBridge);return;}if(_0x355497[_0x53e62b(0x1f0)]('triggerBriefing')&&_0xb208['val']){this[_0x53e62b(0x12e)](_0x355497,{'val':![],'ack':!![]}),aiAgent[_0x53e62b(0x11e)](this);return;}if(_0x355497[_0x53e62b(0x1f0)](_0x53e62b(0x17c))&&_0xb208[_0x53e62b(0x17a)]){this[_0x53e62b(0x12e)](_0x355497,{'val':![],'ack':!![]}),aiAgent['executeAutomationAction'](this);return;}if(_0x355497[_0x53e62b(0x1f0)](_0x53e62b(0x1bd))&&_0xb208['val']){this[_0x53e62b(0x12e)](_0x355497,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x1239da=await this[_0x53e62b(0x1c1)]('LTM.trainingData.sequences');if(_0x1239da&&_0x1239da[_0x53e62b(0x17a)]){const _0x2d668e=JSON[_0x53e62b(0x172)](_0x1239da[_0x53e62b(0x17a)]);this[_0x53e62b(0x1fd)](_0x53e62b(0x194),{'val':_0x53e62b(0x22a),'ack':!![]}),pythonBridge[_0x53e62b(0x1e5)](this,'TRAIN_SECURITY',{'sequences':_0x2d668e});}}catch(_0x162964){}return;}if(_0x355497['includes'](_0x53e62b(0x20f))&&_0xb208[_0x53e62b(0x17a)]){this[_0x53e62b(0x12e)](_0x355497,{'val':![],'ack':!![]});if(this[_0x53e62b(0x19e)])try{this[_0x53e62b(0x213)]();const _0x23981b=await this[_0x53e62b(0x1c1)](_0x53e62b(0x22b));if(_0x23981b&&_0x23981b['val'])pythonBridge['send'](this,_0x53e62b(0x1a9),{'digests':JSON[_0x53e62b(0x172)](_0x23981b[_0x53e62b(0x17a)])});aiAgent[_0x53e62b(0x15a)](this,_0x53e62b(0x13a)),setTimeout(()=>aiAgent[_0x53e62b(0x15a)](this,_0x53e62b(0x181)),0x2ee0);}catch(_0x548395){}return;}if(_0x355497['includes']('analysis.training.triggerEnergy')&&_0xb208[_0x53e62b(0x17a)]){this['setState'](_0x355497,{'val':![],'ack':!![]});if(this[_0x53e62b(0x19e)])try{const _0x1424b9=await this[_0x53e62b(0x1c1)](_0x53e62b(0x177));if(_0x1424b9&&_0x1424b9[_0x53e62b(0x17a)])pythonBridge[_0x53e62b(0x1e5)](this,_0x53e62b(0x201),{'points':JSON['parse'](_0x1424b9[_0x53e62b(0x17a)])});}catch(_0x500be9){}return;}if(_0x355497[_0x53e62b(0x1f0)]('analysis.training.triggerComfort')&&_0xb208[_0x53e62b(0x17a)]){this[_0x53e62b(0x12e)](_0x355497,{'val':![],'ack':!![]});if(this[_0x53e62b(0x19e)])try{const _0x656838=await this[_0x53e62b(0x1c1)](_0x53e62b(0x12b));if(_0x656838&&_0x656838['val']){const _0x9d4b31={};if(this[_0x53e62b(0x22e)][_0x53e62b(0x141)])this[_0x53e62b(0x22e)][_0x53e62b(0x141)][_0x53e62b(0x1c8)](_0x237135=>{const _0x5104e7=_0x53e62b;if(_0x237135['id']&&_0x237135[_0x5104e7(0x196)])_0x9d4b31[_0x237135['id']]=_0x237135[_0x5104e7(0x196)];});pythonBridge[_0x53e62b(0x1e5)](this,_0x53e62b(0x168),{'events':JSON['parse'](_0x656838[_0x53e62b(0x17a)]),'deviceMap':_0x9d4b31});}}catch(_0x353b88){}return;}if(_0x355497[_0x53e62b(0x1f0)]('analysis.training.triggerTopology')&&_0xb208[_0x53e62b(0x17a)]){this['setState'](_0x355497,{'val':![],'ack':!![]}),topology[_0x53e62b(0x147)](this);if(this[_0x53e62b(0x19e)])try{const _0x162653=await this[_0x53e62b(0x1c1)](_0x53e62b(0x1f6));if(_0x162653&&_0x162653['val'])pythonBridge[_0x53e62b(0x1e5)](this,_0x53e62b(0x1c3),{'sequences':JSON['parse'](_0x162653[_0x53e62b(0x17a)])});}catch(_0x5cb4a6){}return;}}const _0x180b13=(this[_0x53e62b(0x22e)][_0x53e62b(0x141)]||[])['find'](_0x4ad459=>_0x4ad459['id']===_0x355497);if(_0x180b13){const _0x515945=await recorder[_0x53e62b(0x211)](this,_0x355497,_0xb208,_0x180b13);_0x515945&&this[_0x53e62b(0x12e)]('analysis.visualization.pulse',{'val':Date[_0x53e62b(0x14b)](),'ack':!![]});_0x515945&&_0x515945['type']===_0x53e62b(0x179)&&_0x515945['location']&&this['isProVersion']&&deadMan[_0x53e62b(0x180)](this,_0x515945[_0x53e62b(0x155)]);_0xb208[_0x53e62b(0x17a)]&&(_0xb208['val']===!![]||_0xb208[_0x53e62b(0x17a)]===0x1||String(_0xb208[_0x53e62b(0x17a)])[_0x53e62b(0x142)]()===_0x53e62b(0x1f4))&&(_0x180b13['type']&&(_0x180b13[_0x53e62b(0x196)][_0x53e62b(0x1f0)](_0x53e62b(0x1ae))||_0x180b13[_0x53e62b(0x196)]['includes']('door'))&&this[_0x53e62b(0x22c)](_0x180b13));if(_0x180b13[_0x53e62b(0x196)]==='temperature'||_0x180b13[_0x53e62b(0x196)]===_0x53e62b(0x146)){if(this[_0x53e62b(0x176)][_0x53e62b(0x1eb)])automation[_0x53e62b(0x204)](this);}}}async[a0_0x38b2fc(0x1e4)](_0x21f0ed){const _0xd7deed=a0_0x38b2fc;if(!this[_0xd7deed(0x143)]||Date[_0xd7deed(0x14b)]()-this[_0xd7deed(0x1ab)]>0x493e0)return;try{const _0x1a17c3=JSON[_0xd7deed(0x172)](_0x21f0ed),_0xbbf4dd=this[_0xd7deed(0x143)][_0xd7deed(0x123)];let _0x1823bf=![];for(const _0x4c1ed2 in _0xbbf4dd){if(_0xbbf4dd[_0x4c1ed2][_0xd7deed(0x1f0)]('AI')&&_0x1a17c3[_0x4c1ed2]&&!_0x1a17c3[_0x4c1ed2]['includes']('AI')){_0x1823bf=!![];break;}}_0x1823bf&&(await this[_0xd7deed(0x1fd)]('analysis.energy.warmupTimes',{'val':JSON[_0xd7deed(0x1c7)](this[_0xd7deed(0x143)][_0xd7deed(0x16a)]),'ack':!![]}),await this[_0xd7deed(0x1fd)]('analysis.energy.warmupSources',{'val':JSON['stringify'](this[_0xd7deed(0x143)][_0xd7deed(0x123)]),'ack':!![]}));}catch(_0x3153db){}}async['loadSystemMode'](){const _0x1c44e5=a0_0x38b2fc;try{const _0x3f9fd8=await this[_0x1c44e5(0x1c1)](setup[_0x1c44e5(0x191)]);if(_0x3f9fd8&&_0x3f9fd8[_0x1c44e5(0x17a)])this[_0x1c44e5(0x184)]=_0x3f9fd8[_0x1c44e5(0x17a)];}catch(_0x26b083){this[_0x1c44e5(0x184)]=setup[_0x1c44e5(0x138)][_0x1c44e5(0x131)];}}async[a0_0x38b2fc(0x129)](){return![];}async[a0_0x38b2fc(0x13c)](){const _0x51fee9=a0_0x38b2fc;await aiAgent[_0x51fee9(0x1a7)](this);this[_0x51fee9(0x176)][_0x51fee9(0x20c)]&&(this[_0x51fee9(0x1fa)](),this[_0x51fee9(0x1a3)]());if(this[_0x51fee9(0x176)][_0x51fee9(0x1eb)])this[_0x51fee9(0x11d)]();}async['checkSolarCondition'](){return![];}['triggerGaitAnalysis'](){const _0x1c4786=a0_0x38b2fc;if(!this[_0x1c4786(0x19e)])return;}async[a0_0x38b2fc(0x11d)](){}[a0_0x38b2fc(0x1fa)](){}async[a0_0x38b2fc(0x126)](_0x522d86){}async['triggerInfrasoundCorrelation'](_0x14bde1,_0xf4dbf8){}async['analyzeWindowOpening'](_0x3075cd){}async[a0_0x38b2fc(0x210)](_0x3a4cab){}[a0_0x38b2fc(0x1ce)](_0x386d49){}}if(require['main']!==module)module[a0_0x38b2fc(0x1ca)]=_0x3bf28a=>new CogniLiving(_0x3bf28a);else new CogniLiving();