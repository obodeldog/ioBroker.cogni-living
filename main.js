const a0_0x1106bd=a0_0xce61;(function(_0x124570,_0x1119fe){const _0x5e005a=a0_0xce61,_0x142b21=_0x124570();while(!![]){try{const _0x416491=-parseInt(_0x5e005a(0x72))/0x1+-parseInt(_0x5e005a(0x20d))/0x2+parseInt(_0x5e005a(0x11f))/0x3*(parseInt(_0x5e005a(0x155))/0x4)+parseInt(_0x5e005a(0x6e))/0x5+-parseInt(_0x5e005a(0xf7))/0x6*(parseInt(_0x5e005a(0x70))/0x7)+-parseInt(_0x5e005a(0x1c6))/0x8+parseInt(_0x5e005a(0x16a))/0x9;if(_0x416491===_0x1119fe)break;else _0x142b21['push'](_0x142b21['shift']());}catch(_0x1634fc){_0x142b21['push'](_0x142b21['shift']());}}}(a0_0x3249,0x2001f));const a0_0x15e138=(function(){let _0x5256b4=!![];return function(_0x59aaa7,_0x2718de){const _0x56e902=_0x5256b4?function(){if(_0x2718de){const _0xb7d303=_0x2718de['apply'](_0x59aaa7,arguments);return _0x2718de=null,_0xb7d303;}}:function(){};return _0x5256b4=![],_0x56e902;};}()),a0_0x54df7a=a0_0x15e138(this,function(){const _0x2858f6=a0_0xce61;return a0_0x54df7a[_0x2858f6(0xa4)]()[_0x2858f6(0x120)]('(((.+)+)+)+$')[_0x2858f6(0xa4)]()[_0x2858f6(0xa0)](a0_0x54df7a)[_0x2858f6(0x120)]('(((.+)+)+)+$');});a0_0x54df7a();'use strict';const utils=require(a0_0x1106bd(0x18d)),{GoogleGenerativeAI}=require(a0_0x1106bd(0xd2)),{spawn}=require(a0_0x1106bd(0x98)),path=require(a0_0x1106bd(0x15f)),fs=require('fs'),installer=require(a0_0x1106bd(0x1fc)),scanner=require(a0_0x1106bd(0xde)),schedulers=require(a0_0x1106bd(0x7b)),HISTORY_MAX_SIZE=0x32,RAW_LOG_MAX_SIZE=0x9c4,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL=a0_0x1106bd(0x16d),SEQUENCE_TIMEOUT_MS=0x5*0x3c*0x3e8,MAX_TRAINING_SET_SIZE=0x1f4,THERMO_LOG_SIZE=0x3e8,EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,LTM_DP_RAW_LOG=a0_0x1106bd(0x1cd),LTM_DP_DAILY_DIGESTS=a0_0x1106bd(0x179),LTM_DP_STATUS=a0_0x1106bd(0x130),LTM_DP_TRIGGER_DIGEST=a0_0x1106bd(0x142),LTM_DP_BASELINE_STATUS=a0_0x1106bd(0xa2),LTM_DP_DRIFT_CHANNEL=a0_0x1106bd(0x206),LTM_DP_DRIFT_STATUS='LTM.driftAnalysis.baselineDrift',LTM_DP_DRIFT_DETAILS=a0_0x1106bd(0x1ac),LTM_DP_DRIFT_LAST_CHECK=a0_0x1106bd(0x1bd),SYSTEM_DP_MODE=a0_0x1106bd(0x177),SYSTEM_MODES={'NORMAL':a0_0x1106bd(0x148),'VACATION':a0_0x1106bd(0x13d),'PARTY':a0_0x1106bd(0x1ee),'GUEST':a0_0x1106bd(0x7d)},AUTO_RESET_MODES=[SYSTEM_MODES['PARTY'],SYSTEM_MODES[a0_0x1106bd(0xe6)]],PERSONA_MAPPING={'generic':a0_0x1106bd(0xca),'senior_aal':a0_0x1106bd(0xa1),'family':'Fokus\x20auf\x20Familienroutinen.','single_comfort':a0_0x1106bd(0x147),'security':a0_0x1106bd(0x12f)},ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};let activeSequence=[],sequenceTimer=null;async function initZombies(_0x541b2e){const _0x50b4b8=a0_0x1106bd;try{const _0xcbf909=[_0x50b4b8(0x1d4),_0x50b4b8(0xbf)];for(const _0x33da81 of _0xcbf909){try{const _0x26ce26=await _0x541b2e[_0x50b4b8(0x113)](_0x33da81);if(_0x26ce26)await _0x541b2e[_0x50b4b8(0xb8)](_0x33da81);}catch(_0x480b57){}}}catch(_0x4a88b6){}}async function checkLicense(_0x168a22){return!![];}async function initHistory(_0x2047db){const _0x5d7629=a0_0x1106bd;try{const _0xcb6da4=await _0x2047db[_0x5d7629(0x201)](_0x5d7629(0xfb));_0xcb6da4&&_0xcb6da4['val']&&(_0x2047db[_0x5d7629(0x1c4)]=JSON[_0x5d7629(0x1d6)](_0xcb6da4['val']['toString']()));}catch(_0x44f447){_0x2047db[_0x5d7629(0x1c4)]=[];}try{const _0x30ffcc=await _0x2047db[_0x5d7629(0x201)](_0x5d7629(0x110));if(_0x30ffcc&&_0x30ffcc[_0x5d7629(0xb5)])_0x2047db[_0x5d7629(0x117)]=JSON[_0x5d7629(0x1d6)](_0x30ffcc[_0x5d7629(0xb5)][_0x5d7629(0xa4)]());}catch(_0x4ad0f7){_0x2047db[_0x5d7629(0x117)]=[];}if(_0x2047db['eventHistory']&&_0x2047db['eventHistory']['length']>0x0){_0x2047db[_0x5d7629(0x12a)][_0x5d7629(0xd7)](_0x5d7629(0x1c1));for(let _0xfc4844=_0x2047db[_0x5d7629(0x1c4)][_0x5d7629(0x1c5)]-0x1;_0xfc4844>=0x0;_0xfc4844--){const _0x26bcce=_0x2047db[_0x5d7629(0x1c4)][_0xfc4844];if(_0x26bcce&&_0x26bcce['id']!==undefined&&_0x26bcce[_0x5d7629(0x119)]!==undefined)_0x2047db[_0x5d7629(0x1dd)][_0x26bcce['id']]=_0x26bcce[_0x5d7629(0x119)];}}}async function initSystemConfig(_0x131d76){const _0x594867=a0_0x1106bd;try{const _0x3c2ed3=await _0x131d76[_0x594867(0x91)](_0x594867(0x207));if(_0x3c2ed3&&_0x3c2ed3['common'])_0x131d76[_0x594867(0x103)]={'latitude':_0x3c2ed3[_0x594867(0x136)][_0x594867(0x10f)]||0x0,'longitude':_0x3c2ed3[_0x594867(0x136)][_0x594867(0x1a4)]||0x0,'city':_0x3c2ed3[_0x594867(0x136)]['city']||''};}catch(_0x597bb5){}}async function createAllObjects(_0xdc00d){const _0x1534db=a0_0x1106bd;await _0xdc00d[_0x1534db(0x8b)](_0x1534db(0x185),{'type':_0x1534db(0xc9),'common':{'name':_0x1534db(0x153)},'native':{}}),await _0xdc00d[_0x1534db(0x8b)](SYSTEM_DP_MODE,{'type':'state','common':{'name':_0x1534db(0x12c),'type':_0x1534db(0x196),'role':_0x1534db(0x1b2),'read':!![],'write':!![],'def':SYSTEM_MODES['NORMAL']},'native':{}}),await _0xdc00d[_0x1534db(0x20a)](_0x1534db(0x1fb),{'type':_0x1534db(0x1b2),'common':{'name':_0x1534db(0x14b),'type':_0x1534db(0x196),'role':_0x1534db(0xa6),'read':!![],'write':![]},'native':{}}),await _0xdc00d[_0x1534db(0x20a)](_0x1534db(0x1de),{'type':_0x1534db(0x1b2),'common':{'name':_0x1534db(0x79),'type':'string','role':_0x1534db(0x82),'read':!![],'write':![]},'native':{}}),await _0xdc00d[_0x1534db(0x20a)](_0x1534db(0xfb),{'type':_0x1534db(0x1b2),'common':{'name':_0x1534db(0x139),'type':_0x1534db(0x196),'role':_0x1534db(0x82),'read':!![],'write':![]},'native':{}}),await _0xdc00d[_0x1534db(0x8b)](_0x1534db(0x127),{'type':_0x1534db(0xc9),'common':{'name':'AI\x20Training'},'native':{}}),await _0xdc00d[_0x1534db(0x20a)]('analysis.training.triggerSecurity',{'type':_0x1534db(0x1b2),'common':{'name':_0x1534db(0x7a),'type':_0x1534db(0x151),'role':_0x1534db(0x1dc),'read':!![],'write':!![]},'native':{}}),await _0xdc00d[_0x1534db(0x20a)](_0x1534db(0x205),{'type':_0x1534db(0x1b2),'common':{'name':_0x1534db(0xcd),'type':_0x1534db(0x151),'role':_0x1534db(0x1dc),'read':!![],'write':!![]},'native':{}}),await _0xdc00d['setObjectNotExistsAsync'](_0x1534db(0x1e4),{'type':'state','common':{'name':_0x1534db(0x1b9),'type':'boolean','role':_0x1534db(0x1dc),'read':!![],'write':!![]},'native':{}}),await _0xdc00d['setObjectNotExistsAsync']('analysis.training.triggerComfort',{'type':_0x1534db(0x1b2),'common':{'name':_0x1534db(0x146),'type':_0x1534db(0x151),'role':_0x1534db(0x1dc),'read':!![],'write':!![]},'native':{}}),await _0xdc00d[_0x1534db(0x20a)](_0x1534db(0xf0),{'type':_0x1534db(0x1b2),'common':{'name':_0x1534db(0xb0),'type':_0x1534db(0x151),'role':_0x1534db(0x1dc),'read':!![],'write':!![]},'native':{}}),await _0xdc00d[_0x1534db(0x20a)](_0x1534db(0x12b),{'type':_0x1534db(0x1b2),'common':{'name':_0x1534db(0x1e9),'type':_0x1534db(0x196),'role':_0x1534db(0xa6),'read':!![],'write':![]},'native':{}}),await _0xdc00d['extendObjectAsync'](_0x1534db(0x1fe),{'type':'channel','common':{'name':'Security\x20Monitor'},'native':{}}),await _0xdc00d[_0x1534db(0x20a)](_0x1534db(0x1c9),{'type':_0x1534db(0x1b2),'common':{'name':'Anomaly\x20Score','type':_0x1534db(0xc3),'role':_0x1534db(0x119),'read':!![],'write':![]},'native':{}}),await _0xdc00d[_0x1534db(0x20a)](_0x1534db(0x1b4),{'type':_0x1534db(0x1b2),'common':{'name':_0x1534db(0xd9),'type':'number','role':_0x1534db(0x119),'read':!![],'write':![],'def':0.05},'native':{}}),await _0xdc00d[_0x1534db(0x20a)](_0x1534db(0xef),{'type':'state','common':{'name':_0x1534db(0xa7),'type':_0x1534db(0x196),'role':'date','read':!![],'write':![]},'native':{}}),await _0xdc00d[_0x1534db(0x20a)](_0x1534db(0xa9),{'type':'state','common':{'name':'Topology\x20Matrix','type':_0x1534db(0x196),'role':_0x1534db(0x82),'read':!![],'write':![]},'native':{}}),await _0xdc00d[_0x1534db(0x8b)](_0x1534db(0x1af),{'type':'channel','common':{'name':_0x1534db(0xb2)},'native':{}}),await _0xdc00d['setObjectNotExistsAsync'](_0x1534db(0x18a),{'type':'state','common':{'name':_0x1534db(0xa7),'type':'string','role':_0x1534db(0x195),'read':!![],'write':![]},'native':{}}),await _0xdc00d[_0x1534db(0x20a)]('analysis.health.isAnomaly',{'type':_0x1534db(0x1b2),'common':{'name':'Anomaly\x20Detected','type':_0x1534db(0x151),'role':_0x1534db(0xba),'read':!![],'write':![]},'native':{}}),await _0xdc00d[_0x1534db(0x20a)](_0x1534db(0x71),{'type':'state','common':{'name':_0x1534db(0x141),'type':'string','role':_0x1534db(0xa6),'read':!![],'write':![]},'native':{}}),await _0xdc00d[_0x1534db(0x20a)](_0x1534db(0x173),{'type':'state','common':{'name':_0x1534db(0x10d),'type':_0x1534db(0xc3),'role':_0x1534db(0x119),'read':!![],'write':![]},'native':{}}),await _0xdc00d['setObjectNotExistsAsync'](_0x1534db(0xe5),{'type':_0x1534db(0x1b2),'common':{'name':_0x1534db(0xda),'type':_0x1534db(0x196),'role':_0x1534db(0x82),'read':!![],'write':![]},'native':{}}),await _0xdc00d['setObjectNotExistsAsync'](_0x1534db(0x115),{'type':_0x1534db(0x1b2),'common':{'name':_0x1534db(0x1b7),'type':'number','role':_0x1534db(0x119),'read':!![],'write':![]},'native':{}}),await _0xdc00d[_0x1534db(0x8b)]('analysis.energy',{'type':_0x1534db(0xc9),'common':{'name':_0x1534db(0x198)},'native':{}}),await _0xdc00d['setObjectNotExistsAsync']('analysis.energy.insulationScore',{'type':'state','common':{'name':_0x1534db(0x83),'type':_0x1534db(0x196),'role':_0x1534db(0xa6),'read':!![],'write':![]},'native':{}}),await _0xdc00d['setObjectNotExistsAsync'](_0x1534db(0x1fd),{'type':_0x1534db(0x1b2),'common':{'name':'Heating\x20Score','type':_0x1534db(0x196),'role':_0x1534db(0xa6),'read':!![],'write':![]},'native':{}}),await _0xdc00d[_0x1534db(0x20a)]('analysis.energy.forecast',{'type':_0x1534db(0x1b2),'common':{'name':_0x1534db(0x1a1),'type':_0x1534db(0x196),'role':_0x1534db(0x82),'read':!![],'write':![]},'native':{}}),await _0xdc00d[_0x1534db(0x8b)](_0x1534db(0x84),{'type':'channel','common':{'name':'LTM'},'native':{}}),await _0xdc00d[_0x1534db(0x8b)](LTM_DP_RAW_LOG,{'type':_0x1534db(0x1b2),'common':{'name':'Raw\x20Log','type':_0x1534db(0x196),'role':'json','read':!![],'write':![]},'native':{}}),await _0xdc00d['extendObjectAsync'](LTM_DP_DAILY_DIGESTS,{'type':_0x1534db(0x1b2),'common':{'name':'Daily\x20Digests','type':_0x1534db(0x196),'role':'json','read':!![],'write':![]},'native':{}}),await _0xdc00d[_0x1534db(0x20a)]('LTM.trainingData.sequences',{'type':_0x1534db(0x1b2),'common':{'name':'Sequences','type':'string','role':_0x1534db(0x82),'read':!![],'write':![]},'native':{}}),await _0xdc00d[_0x1534db(0x20a)]('LTM.trainingData.thermodynamics',{'type':_0x1534db(0x1b2),'common':{'name':_0x1534db(0xad),'type':_0x1534db(0x196),'role':'json','read':!![],'write':![]},'native':{}}),await _0xdc00d[_0x1534db(0x20a)]('analysis.trigger',{'type':_0x1534db(0x1b2),'common':{'name':'Trigger\x20Analysis','type':'boolean','role':_0x1534db(0x1dc),'read':!![],'write':!![]},'native':{}}),await _0xdc00d['setObjectNotExistsAsync'](_0x1534db(0xcc),{'type':'state','common':{'name':_0x1534db(0x160),'type':_0x1534db(0x151),'role':_0x1534db(0x1dc),'read':!![],'write':!![]},'native':{}}),await _0xdc00d[_0x1534db(0x20a)](_0x1534db(0xd3),{'type':_0x1534db(0x1b2),'common':{'name':_0x1534db(0x13b),'type':_0x1534db(0x151),'role':_0x1534db(0xf3),'read':!![],'write':![]},'native':{}}),await _0xdc00d[_0x1534db(0x20a)]('analysis.alertReason',{'type':_0x1534db(0x1b2),'common':{'name':_0x1534db(0x1aa),'type':_0x1534db(0x196),'role':'text.alarm','read':!![],'write':![]},'native':{}}),await _0xdc00d[_0x1534db(0x20a)]('analysis.activitySummary',{'type':_0x1534db(0x1b2),'common':{'name':_0x1534db(0x182),'type':_0x1534db(0x196),'role':_0x1534db(0xa6),'read':!![],'write':![]},'native':{}}),await _0xdc00d[_0x1534db(0x20a)](_0x1534db(0x1be),{'type':_0x1534db(0x1b2),'common':{'name':'Pattern\x20Detected','type':'boolean','role':_0x1534db(0xba),'read':!![],'write':![]},'native':{}}),await _0xdc00d['setObjectNotExistsAsync']('analysis.automation.description',{'type':'state','common':{'name':_0x1534db(0x6d),'type':'string','role':_0x1534db(0xa6),'read':!![],'write':![]},'native':{}}),await _0xdc00d[_0x1534db(0x20a)]('analysis.automation.detectedPatterns',{'type':'state','common':{'name':_0x1534db(0xb3),'type':_0x1534db(0x196),'role':_0x1534db(0x82),'read':!![],'write':![]},'native':{}}),await _0xdc00d[_0x1534db(0x20a)](_0x1534db(0xfa),{'type':_0x1534db(0x1b2),'common':{'name':_0x1534db(0x170),'type':'string','role':_0x1534db(0xa6),'read':!![],'write':![]},'native':{}}),await _0xdc00d['setObjectNotExistsAsync'](_0x1534db(0xff),{'type':_0x1534db(0x1b2),'common':{'name':_0x1534db(0x19f),'type':_0x1534db(0x196),'role':_0x1534db(0xa6),'read':!![],'write':![]},'native':{}}),await _0xdc00d['setObjectNotExistsAsync'](_0x1534db(0x1f0),{'type':_0x1534db(0x1b2),'common':{'name':_0x1534db(0x78),'type':_0x1534db(0x151),'role':_0x1534db(0x152),'read':!![],'write':!![]},'native':{}}),await _0xdc00d[_0x1534db(0x20a)](_0x1534db(0x9a),{'type':_0x1534db(0x1b2),'common':{'name':_0x1534db(0x158),'type':_0x1534db(0x151),'role':_0x1534db(0x1dc),'read':!![],'write':!![]},'native':{}});}async function loadSystemMode(_0x2c519b){const _0x1a8018=a0_0x1106bd;try{const _0x5264d3=await _0x2c519b[_0x1a8018(0x201)](SYSTEM_DP_MODE);_0x5264d3&&_0x5264d3['val']&&Object[_0x1a8018(0x101)](SYSTEM_MODES)['includes'](_0x5264d3['val'])?_0x2c519b['currentSystemMode']=_0x5264d3[_0x1a8018(0xb5)]:(_0x2c519b['currentSystemMode']=SYSTEM_MODES['NORMAL'],await _0x2c519b['setStateAsync'](SYSTEM_DP_MODE,{'val':SYSTEM_MODES['NORMAL'],'ack':!![]}));}catch(_0x15bada){_0x2c519b[_0x1a8018(0x16e)]=SYSTEM_MODES['NORMAL'];}}async function loadRawEventLog(_0xbd1cd2){const _0x5bcad7=a0_0x1106bd;try{const _0x42e503=await _0xbd1cd2[_0x5bcad7(0x201)](LTM_DP_RAW_LOG);if(_0x42e503&&_0x42e503[_0x5bcad7(0xb5)])_0xbd1cd2[_0x5bcad7(0x6c)]=JSON[_0x5bcad7(0x1d6)](_0x42e503[_0x5bcad7(0xb5)]);}catch(_0x2a5776){_0xbd1cd2[_0x5bcad7(0x6c)]=[];}}function a0_0x3249(){const _0x3ea5c5=['system.mode','main','LTM.dailyDigests','toLowerCase','.\x20KONTEXT:\x20','ðŸ§ª\x20Simulating\x20Butler\x20Proposal:\x20','Deaktiviert\x20(Pro-Feature)','systemUUID','debug','activityLevel','temperatur','Activity\x20Summary','.\x20ANWESEND:\x20','HEALTH_TRAIN_RESULT','system','isPresent','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','bind','livingContext','analysis.health.lastCheck','ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','splice','@iobroker/adapter-core','setupBriefingScheduler','checkAndInstall','namespace','analysis.training.triggerSecurity','ðŸ›‹ï¸\x20BUTLER:\x20Keine\x20neuen\x20Muster\x20gefunden.','Regel\x20erkannt:\x20','callback','date','string','alertReason','Energy\x20Intelligence','enum','window','licenseKey','onStateChange','temperature','Keine\x20Wetterdaten\x20verfÃ¼gbar.','Target\x20Value','dismissAutomation','Temperature\x20Forecast','success','Activity-Level','longitude','âš ï¸\x20SECURITY\x20ALARM:\x20','getHours','motion','getForeignStateAsync','getForeignObjectsAsync','Alert\x20Reason','ðŸ§ \x20Triggering\x20Security\x20Training...','LTM.driftAnalysis.driftDetails','Kalender\x20deaktiviert.','generic','analysis.health','toLocaleTimeString','LTM.trainingData.sequences','state','briefingJob','analysis.security.currentThreshold','contact','loc','Gait\x20Speed\x20Trend','.forecast.current.state','Train\x20Energy','some','setStateAsync','instance','LTM.driftAnalysis.lastCheck','analysis.automation.patternDetected','[LOG]','TREND_RESULT','Restoring\x20sensor\x20cache...','triggerBriefing','TOPOLOGY_RESULT','eventHistory','length','68648pjunHn','geminiApiKey','includes','analysis.security.lastScore','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','bewegung','calendarInstance','LTM.rawEventLog','presence','useCalendar','replace','details','map','analysis.health.isAnomaly','analysis.history_debug_00','threshold','parse','object','OK:\x20','VACATION','Gemini\x20Init\x20Error:\x20','exitGraceTimer','button','sensorLastValues','events.lastEvent','insulation','isGracePeriodActive','ready','outdoorSensorId','Missing\x20data','analysis.training.triggerEnergy','N/A\x20(Learning)','Adapter','sendTo','ðŸ\x20Python\x20Pong','Training\x20Status','âœ…\x20HEALTH\x20TRAINED.','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','enum.functions.*','LTM.trainingData.thermodynamics','party','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','analysis.automation.autoApply','getLtmData','analysis.trigger','close','presenceDevices','join','ltmStbWindowDays','from','Kein\x20API\x20Key.','triggerDailyDigest','.forecast.current.temperature','system.presenceWho','./lib/installer','analysis.energy.heatingScore','analysis.security','setupLtmScheduler','stateChange','getStateAsync','getFullYear','Unknown','lampe','analysis.training.triggerHealth','LTM.driftAnalysis','system.config','Lernphase\x20(','split','setObjectNotExistsAsync','Failed:\x20','stringify','59966qOHmVl','rawEventLog','Description','778265IZRHPY','timestamp','14ovPMUd','analysis.health.trendDiagnosis','145688nspmTv','push','existsSync','application/json','\x20Tage)','shift','Auto\x20Apply','Last\x20raw\x20event','Train\x20Security','./lib/scheduler','isEmergency','guest','Unbekannt','ðŸ•¸ï¸\x20Building\x20Topology\x20Matrix...','testContext','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','json','Insulation\x20Score','LTM','.Current.WeatherText','name','geminiModel','diagnosis','error','message','extendObjectAsync','kontakt','payload','HEALTH_RESULT','ltmLtbWindowDays','schalter','getForeignObjectAsync','ðŸ•¸ï¸\x20Topology\x20Map\x20updated.','autoApply','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','KI-Modell\x20nicht\x20initialisiert','data','[PYTHON]\x20','child_process','baselineDrift','analysis.automation.triggerAction','analysis.alertReason','now','TRAIN_HEALTH','config','apiKey','constructor','PRIORITÃ„T:\x20Gesundheit/AAL.','LTM.baselineStatus','WiFi\x20Presence\x20detected.','toString','analysis.activitySummary','text','Last\x20Check','.NextHours.Location_1.Day_1.current.temp_value','analysis.security.topologyMatrix','N/A','\x20=\x20','filter','Thermodynamics','tÃ¼r','dependencyInstallInProgress','Build\x20Topology','getGenerativeModel','Health\x20Analysis','Detected\x20Patterns','setHours','val','onUnload','analysisTimer','delObjectAsync','Success','indicator','âš ï¸\x20ALARM:\x20','openweathermap','cogni-living\x20adapter\x20starting\x20(v','unshift','events.history_debug_00','exports','BUILD_TOPOLOGY','getMonth','number','find','.\x20WETTER:\x20','stdin','minDaysForBaseline','unknown','channel','Analysiere\x20ausgewogen.','stdout','analysis.triggerBriefing','Train\x20Health','\x0aGrund:\x20','genAI','GAIT_RESULT','trim','@google/generative-ai','analysis.isAlert','pythonProcess','testApiKey','analysis.automation.description','info','change_percent','Current\x20Threshold','Today\x20Vector\x20(15m)','PYTHON_EXE','ðŸ›‹ï¸\x20BUTLER:\x20Found\x20','.communicate.request','./lib/scanner','daswetter','TRAINING_COMPLETE','response','devices','forEach','fill','analysis.health.todayVector','GUEST','telegram','PREDICT_ENERGY','exitTimer','rating','TRAIN_ENERGY','User\x20dismissed\x20automation\x20proposal.','.\x20EVENTS:\x20','subscribeForeignStatesAsync','analysis.security.lastCheck','analysis.training.triggerTopology','Â°C,\x20','summary','indicator.alarm','Topology\x20Error:\x20','setupDriftAnalysisScheduler','targetValue','440166PeGckt','Success:\x20','simulateButler','analysis.automation.targetId','events.history','slice','weatherInstance','\x20new\x20patterns.','analysis.automation.targetValue','heating','values','round','systemConfig','toISOString','isProVersion','Wetterdaten\x20deaktiviert.','writable','setState','NORMAL','analysis.energy.forecast','command','python_service','Trend\x20Value','occupancy','latitude','analysis.analysisHistory','onMessage','ENERGY_PREDICT_RESULT','getObjectAsync','ltmJob','analysis.health.gaitSpeed','[RESULT]','analysisHistory','getDate','value','isExit','driftDetails','fenster','ðŸ›¡ï¸\x20SECURITY\x20CHECK:\x20Score\x20','write','4461cQvcsx','search','PONG','modeResetJob','getOverviewData','Kein\x20API\x20Key!','Sec-Training\x20started...','description','analysis.training','ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20','onReady','log','analysis.training.status','System\x20Mode','getTime','\x20->\x20','PRIORITÃ„T:\x20Sicherheit.','LTM.processingStatus','.Current.Temperature','notifyTelegramEnabled','Training\x20Error:\x20','lastAlertState','getCalendarNames','common','driftAnalysisTimer','getMinutes','Event\x20History','\x0aSTB:\x20','Alert\x20Status','[RECORDER]\x20Error:\x20','vacation','Briefing\x20Error:\x20','door','ðŸš€\x20Starting\x20NUUKANNI\x20Logic\x20(v0.12.10)...','Trend','LTM.triggerDailyDigest','setupModeResetScheduler','communicate.request','Error\x20launching\x20Python:\x20','Train\x20Comfort','Fokus\x20auf\x20Komfort.','normal','Err:\x20','keys','Who\x20is\x20present?','.\x20SYSTEM_MODE:\x20','klima','type','Gemini\x20AI\x20initialized.','Started...','boolean','switch','System','cancel','24SBfqnW','is_anomaly','COMFORT_RESULT','Trigger\x20Action','online','toFixed','subscribeStates','SIMULATION:\x20Test-Vorschlag\x20fÃ¼r\x20','cogni-living','ANOMALY','path','Trigger\x20Briefing','kill','dailyDigests','analysis.automation.detectedPatterns','automationProposal','generateContent','ANALYZE_GAIT','analysis.training.triggerComfort','pop','analysis.energy.insulationScore','2677518VykXAO','licht','location','models/gemini-flash-latest','currentSystemMode','inactivityThresholdHours','Target\x20ID','substring','ENERGY_TRAIN_RESULT','analysis.health.trendValue','notifyTelegramInstance','useWeather','startsWith'];a0_0x3249=function(){return _0x3ea5c5;};return a0_0x3249();}async function saveRawEventLog(_0x7adec5){const _0x3b5236=a0_0x1106bd;if(_0x7adec5[_0x3b5236(0x6c)]['length']>RAW_LOG_MAX_SIZE)_0x7adec5['rawEventLog'][_0x3b5236(0x18c)](0x0,_0x7adec5[_0x3b5236(0x6c)][_0x3b5236(0x1c5)]-RAW_LOG_MAX_SIZE);await _0x7adec5[_0x3b5236(0x1bb)](LTM_DP_RAW_LOG,{'val':JSON[_0x3b5236(0x20c)](_0x7adec5[_0x3b5236(0x6c)]),'ack':!![]});}async function loadDailyDigests(_0x1766f3){const _0x2c7bc6=a0_0x1106bd;try{const _0x45fd98=await _0x1766f3['getStateAsync'](LTM_DP_DAILY_DIGESTS);if(_0x45fd98&&_0x45fd98[_0x2c7bc6(0xb5)])_0x1766f3[_0x2c7bc6(0x162)]=JSON[_0x2c7bc6(0x1d6)](_0x45fd98['val']);}catch(_0x5d8f48){_0x1766f3['dailyDigests']=[];}await updateBaselineStatus(_0x1766f3);}async function saveDailyDigests(_0x46c921,_0x346825=!![]){const _0x132d44=a0_0x1106bd,_0x5d3fc8=_0x46c921[_0x132d44(0x9e)][_0x132d44(0x8f)]||0x3c;_0x46c921[_0x132d44(0x162)]['length']>_0x5d3fc8&&_0x46c921[_0x132d44(0x162)][_0x132d44(0x18c)](0x0,_0x46c921[_0x132d44(0x162)][_0x132d44(0x1c5)]-_0x5d3fc8);await _0x46c921[_0x132d44(0x1bb)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x132d44(0x20c)](_0x46c921[_0x132d44(0x162)]),'ack':!![]});if(_0x346825)await updateBaselineStatus(_0x46c921);}async function updateAnalysisHistory(_0x246321,_0x20c756){const _0x51c901=a0_0x1106bd;_0x246321[_0x51c901(0x117)][_0x51c901(0xbe)](_0x20c756);if(_0x246321[_0x51c901(0x117)][_0x51c901(0x1c5)]>HISTORY_MAX_SIZE)_0x246321[_0x51c901(0x117)][_0x51c901(0x168)]();await _0x246321['setStateAsync'](_0x51c901(0x110),{'val':JSON[_0x51c901(0x20c)](_0x246321[_0x51c901(0x117)]),'ack':!![]});}async function updateBaselineStatus(_0x4ccb65){const _0x30e111=a0_0x1106bd;if(!_0x4ccb65[_0x30e111(0x105)]){await _0x4ccb65['setStateAsync'](LTM_DP_BASELINE_STATUS,{'val':_0x30e111(0x17d),'ack':!![]});return;}const _0x519844=_0x4ccb65[_0x30e111(0x162)][_0x30e111(0x1c5)]>=(_0x4ccb65[_0x30e111(0x9e)][_0x30e111(0xc7)]||0x7)?'Aktiv\x20('+_0x4ccb65['dailyDigests'][_0x30e111(0x1c5)]+_0x30e111(0x76):_0x30e111(0x208)+_0x4ccb65[_0x30e111(0x162)][_0x30e111(0x1c5)]+'/'+(_0x4ccb65[_0x30e111(0x9e)]['minDaysForBaseline']||0x7)+')';await _0x4ccb65[_0x30e111(0x1bb)](LTM_DP_BASELINE_STATUS,{'val':_0x519844,'ack':!![]});}async function initSensorSubscriptions(_0x30dda3){const _0x499179=a0_0x1106bd,_0x34a1f1=_0x30dda3[_0x499179(0x9e)][_0x499179(0xe2)];if(_0x34a1f1)for(const _0x27c34d of _0x34a1f1){await _0x30dda3[_0x499179(0xee)](_0x27c34d['id']);}}async function initPresenceSubscriptions(_0x27e62a){const _0x17b62f=_0x27e62a['config']['presenceDevices'];if(_0x17b62f)for(const _0xe0b3f4 of _0x17b62f){await _0x27e62a['subscribeForeignStatesAsync'](_0xe0b3f4);}}async function setupTelegramListener(_0x248034){const _0x51fb62=a0_0x1106bd,_0xf5d44c=_0x248034[_0x51fb62(0x9e)][_0x51fb62(0x174)];if(_0x248034[_0x51fb62(0x9e)][_0x51fb62(0x132)]&&_0xf5d44c)await _0x248034[_0x51fb62(0xee)](_0xf5d44c+_0x51fb62(0xdd));}async function checkWifiPresence(_0x16153e){const _0xf456d9=a0_0x1106bd;try{const _0x400fe8=_0x16153e['config']['presenceDevices']||[];let _0x2c5e6c=![];const _0x15c7c5=[];for(const _0x2543de of _0x400fe8){try{const _0x199b24=await _0x16153e['getForeignStateAsync'](_0x2543de);_0x199b24&&(_0x199b24[_0xf456d9(0xb5)]===!![]||_0x199b24[_0xf456d9(0xb5)]===_0xf456d9(0x159)||_0x199b24['val']===0x1)&&(_0x2c5e6c=!![],_0x15c7c5[_0xf456d9(0x73)](_0x2543de));}catch(_0x3886e9){}}return await _0x16153e[_0xf456d9(0x1bb)](_0xf456d9(0x1fb),{'val':_0x15c7c5[_0xf456d9(0x1f5)](',\x20'),'ack':!![]}),_0x2c5e6c&&(_0x16153e['exitTimer']&&(_0x16153e[_0xf456d9(0x12a)]['info'](_0xf456d9(0xa3)),abortExitTimer(_0x16153e)),!_0x16153e['isPresent']&&_0x16153e[_0xf456d9(0x16e)]===SYSTEM_MODES['NORMAL']&&await setPresence(_0x16153e,!![])),_0x2c5e6c;}catch(_0x32434d){return![];}}function startExitTimer(_0x15e81f){abortExitTimer(_0x15e81f),_0x15e81f['isGracePeriodActive']=!![],_0x15e81f['exitGraceTimer']=setTimeout(()=>{const _0x37c5e2=a0_0xce61;_0x15e81f[_0x37c5e2(0x1e0)]=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),_0x15e81f['exitTimer']=setTimeout(()=>{const _0x518987=a0_0xce61;setPresence(_0x15e81f,![]),_0x15e81f[_0x518987(0xe9)]=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}function abortExitTimer(_0x2b3669){const _0x5eb30b=a0_0x1106bd;if(_0x2b3669[_0x5eb30b(0xe9)])clearTimeout(_0x2b3669[_0x5eb30b(0xe9)]);if(_0x2b3669[_0x5eb30b(0x1db)])clearTimeout(_0x2b3669[_0x5eb30b(0x1db)]);_0x2b3669[_0x5eb30b(0xe9)]=null,_0x2b3669[_0x5eb30b(0x1db)]=null,_0x2b3669[_0x5eb30b(0x1e0)]=![];}async function setPresence(_0x83bf18,_0x5f36a0){const _0x3f1b4a=a0_0x1106bd;if(_0x83bf18[_0x3f1b4a(0x186)]===_0x5f36a0)return;_0x83bf18[_0x3f1b4a(0x186)]=_0x5f36a0,await _0x83bf18['setStateAsync']('system.isPresent',{'val':_0x5f36a0,'ack':!![]});}async function executeAutomationAction(_0x30f612){const _0x183f4f=a0_0x1106bd;try{const _0x5cfe2e=await _0x30f612[_0x183f4f(0x201)](_0x183f4f(0xfa)),_0x31615f=await _0x30f612['getStateAsync']('analysis.automation.targetValue');if(_0x5cfe2e&&_0x5cfe2e['val']&&_0x31615f){const _0x5393d5=_0x5cfe2e[_0x183f4f(0xb5)];let _0x140608=_0x31615f[_0x183f4f(0xb5)];try{_0x140608=JSON[_0x183f4f(0x1d6)](_0x140608);}catch(_0x45c815){}_0x30f612[_0x183f4f(0x12a)][_0x183f4f(0xd7)](_0x183f4f(0x128)+_0x5393d5+'\x20=\x20'+_0x140608),await _0x30f612['setForeignStateAsync'](_0x5393d5,_0x140608);}else _0x30f612[_0x183f4f(0x12a)]['warn'](_0x183f4f(0x18b));}catch(_0x3081f2){_0x30f612['log'][_0x183f4f(0x89)]('BUTLER\x20Execution\x20Error:\x20'+_0x3081f2[_0x183f4f(0x8a)]);}}async function processSensorEvent(_0x206e12,_0x597e6d,_0x4c2182,_0x33b71f){const _0x46c8a7=a0_0x1106bd;if(!_0x33b71f)return;const _0x336fdf=_0x4c2182[_0x46c8a7(0xb5)],_0x1fcc0c=Date[_0x46c8a7(0x9c)](),_0x212721=_0x206e12[_0x46c8a7(0x1dd)][_0x597e6d];_0x206e12['sensorLastValues'][_0x597e6d]=_0x336fdf;if(!_0x33b71f['logDuplicates']&&_0x212721!=undefined&&_0x212721==_0x336fdf)return;const _0x194202=(_0x33b71f[_0x46c8a7(0x14e)]||'')[_0x46c8a7(0x17a)](),_0x22389e=_0x194202[_0x46c8a7(0x1c8)](_0x46c8a7(0x19d))||_0x194202['includes'](_0x46c8a7(0x181))||_0x194202['includes'](_0x46c8a7(0x14d))||_0x194202[_0x46c8a7(0x1c8)]('heizung');_0x206e12[_0x46c8a7(0x105)]&&_0x22389e&&recordThermodynamics(_0x206e12,_0x597e6d,_0x336fdf,_0x33b71f[_0x46c8a7(0x16c)]);const _0xf168f3={'timestamp':_0x1fcc0c,'id':_0x597e6d,'name':_0x33b71f['name'],'type':_0x33b71f[_0x46c8a7(0x14e)],'location':_0x33b71f[_0x46c8a7(0x16c)],'value':_0x336fdf};_0x206e12[_0x46c8a7(0x1c4)][_0x46c8a7(0xbe)](_0xf168f3);if(_0x206e12[_0x46c8a7(0x1c4)][_0x46c8a7(0x1c5)]>HISTORY_MAX_SIZE)_0x206e12[_0x46c8a7(0x1c4)][_0x46c8a7(0x168)]();await _0x206e12[_0x46c8a7(0x1bb)]('events.lastEvent',{'val':JSON[_0x46c8a7(0x20c)](_0xf168f3),'ack':!![]}),await _0x206e12[_0x46c8a7(0x1bb)]('events.history',{'val':JSON[_0x46c8a7(0x20c)](_0x206e12[_0x46c8a7(0x1c4)]),'ack':!![]});_0x206e12[_0x46c8a7(0x105)]&&(_0x206e12[_0x46c8a7(0x6c)]['push'](_0xf168f3),await saveRawEventLog(_0x206e12),recordSequence(_0x206e12,_0xf168f3));if(_0x33b71f[_0x46c8a7(0x11a)]&&_0x336fdf===!![]){if(_0x206e12['isPresent']&&!_0x206e12['isGracePeriodActive'])startExitTimer(_0x206e12);else{if(!_0x206e12['isPresent'])setPresence(_0x206e12,!![]);}}else{if(_0x33b71f['type']===_0x46c8a7(0x1a7)&&_0x336fdf===!![]){if(_0x206e12[_0x46c8a7(0xe9)])abortExitTimer(_0x206e12);if(!_0x206e12[_0x46c8a7(0x186)]&&_0x206e12[_0x46c8a7(0x16e)]===SYSTEM_MODES[_0x46c8a7(0x109)])setPresence(_0x206e12,!![]);}}}async function recordThermodynamics(_0x2f2acb,_0x4a975d,_0x50c2e8,_0x4a6e29){const _0x3d76a2=a0_0x1106bd,_0x1bf6d0=await getOutsideTemperatureNumeric(_0x2f2acb),_0x11bb0d=await _0x2f2acb[_0x3d76a2(0x201)](_0x3d76a2(0x1ed));let _0x11c273=[];if(_0x11bb0d&&_0x11bb0d[_0x3d76a2(0xb5)])try{_0x11c273=JSON[_0x3d76a2(0x1d6)](_0x11bb0d['val']);}catch(_0x1bc632){}_0x11c273[_0x3d76a2(0x73)]({'ts':Date[_0x3d76a2(0x9c)](),'room':_0x4a6e29||_0x3d76a2(0x203),'t_in':_0x50c2e8,'t_out':_0x1bf6d0});if(_0x11c273[_0x3d76a2(0x1c5)]>THERMO_LOG_SIZE)_0x11c273[_0x3d76a2(0x77)]();await _0x2f2acb[_0x3d76a2(0x1bb)](_0x3d76a2(0x1ed),{'val':JSON[_0x3d76a2(0x20c)](_0x11c273),'ack':!![]});}async function getOutsideTemperatureNumeric(_0x4d0b4e){const _0x45274e=a0_0x1106bd;if(_0x4d0b4e[_0x45274e(0x9e)][_0x45274e(0x1e2)])try{const _0x41fc4d=await _0x4d0b4e[_0x45274e(0x1a8)](_0x4d0b4e['config'][_0x45274e(0x1e2)]);if(_0x41fc4d&&_0x41fc4d[_0x45274e(0xb5)]!==undefined&&_0x41fc4d[_0x45274e(0xb5)]!==null)return parseFloat(_0x41fc4d[_0x45274e(0xb5)]);}catch(_0x539b33){}const _0x4ad1cb=_0x4d0b4e[_0x45274e(0x9e)][_0x45274e(0xfd)];if(!_0x4d0b4e[_0x45274e(0x9e)][_0x45274e(0x175)]||!_0x4ad1cb)return null;try{let _0x30d9c6='';if(_0x4ad1cb['includes']('accuweather'))_0x30d9c6=_0x4ad1cb+'.Current.Temperature';else{if(_0x4ad1cb['includes'](_0x45274e(0xdf)))_0x30d9c6=_0x4ad1cb+_0x45274e(0xa8);else{if(_0x4ad1cb[_0x45274e(0x1c8)](_0x45274e(0xbc)))_0x30d9c6=_0x4ad1cb+'.forecast.current.temperature';else{if(_0x4ad1cb['includes']('weatherunderground'))_0x30d9c6=_0x4ad1cb+'.forecast.current.temp';}}}if(_0x30d9c6){const _0x2d3d41=await _0x4d0b4e['getForeignStateAsync'](_0x30d9c6);if(_0x2d3d41&&_0x2d3d41[_0x45274e(0xb5)]!==undefined&&_0x2d3d41[_0x45274e(0xb5)]!==null)return parseFloat(_0x2d3d41[_0x45274e(0xb5)]);}}catch(_0x12ba88){}return null;}async function recordSequence(_0x5db1fd,_0x149305){const _0x35f01d=a0_0x1106bd,_0x5cb8b4=(_0x149305[_0x35f01d(0x14e)]||'')[_0x35f01d(0x17a)](),_0x4f64ca=[_0x35f01d(0x1a7),_0x35f01d(0x1cb),'prÃ¤senz',_0x35f01d(0x1ce),_0x35f01d(0x10e),_0x35f01d(0x13f),_0x35f01d(0xae),_0x35f01d(0x19a),_0x35f01d(0x11c),_0x35f01d(0x1b5),_0x35f01d(0x8c),'light',_0x35f01d(0x16b),_0x35f01d(0x152),_0x35f01d(0x90),'dimmer',_0x35f01d(0x204)];if(!_0x4f64ca[_0x35f01d(0x1ba)](_0x2f9bc9=>_0x5cb8b4['includes'](_0x2f9bc9)))return;if(!_0x149305['value'])return;if(sequenceTimer)clearTimeout(sequenceTimer);activeSequence['push']({'loc':_0x149305[_0x35f01d(0x16c)]||_0x35f01d(0x203),'id':_0x149305['id'],'ts':Date[_0x35f01d(0x9c)]()}),sequenceTimer=setTimeout(async()=>{const _0x5dda9b=_0x35f01d;if(activeSequence[_0x5dda9b(0x1c5)]>0x1)await saveCompletedSequence(_0x5db1fd);activeSequence=[];},SEQUENCE_TIMEOUT_MS);}async function saveCompletedSequence(_0x47814a){const _0x422418=a0_0x1106bd;try{const _0x16ec83=await _0x47814a[_0x422418(0x201)](_0x422418(0x1b1));let _0x3a74d8=[];if(_0x16ec83&&_0x16ec83[_0x422418(0xb5)])try{_0x3a74d8=JSON[_0x422418(0x1d6)](_0x16ec83[_0x422418(0xb5)]);}catch(_0x306c60){}const _0x1369e2=activeSequence[0x0]['ts'],_0x5c055c=activeSequence[_0x422418(0x1d2)](_0x1ba260=>({'loc':_0x1ba260[_0x422418(0x1b6)],'t_delta':Math[_0x422418(0x102)]((_0x1ba260['ts']-_0x1369e2)/0x3e8)})),_0x5cfe94={'timestamp':new Date(_0x1369e2)[_0x422418(0x104)](),'steps':_0x5c055c,'duration':Math[_0x422418(0x102)]((activeSequence[activeSequence['length']-0x1]['ts']-_0x1369e2)/0x3e8),'daytime':new Date(_0x1369e2)[_0x422418(0x1a6)]()};_0x3a74d8[_0x422418(0x73)](_0x5cfe94);if(_0x3a74d8['length']>MAX_TRAINING_SET_SIZE)_0x3a74d8[_0x422418(0x77)]();await _0x47814a[_0x422418(0x1bb)](_0x422418(0x1b1),{'val':JSON['stringify'](_0x3a74d8),'ack':!![]}),runSecurityCheck(_0x47814a,_0x5cfe94);}catch(_0x58578c){_0x47814a['log'][_0x422418(0x89)](_0x422418(0x13c)+_0x58578c[_0x422418(0x8a)]);}}function a0_0xce61(_0x1f4344,_0x855669){const _0x4a6510=a0_0x3249();return a0_0xce61=function(_0x54df7a,_0x15e138){_0x54df7a=_0x54df7a-0x6c;let _0x3249ae=_0x4a6510[_0x54df7a];return _0x3249ae;},a0_0xce61(_0x1f4344,_0x855669);}function runSecurityCheck(_0x4b620e,_0x2a72d8){if(!_0x4b620e['isProVersion'])return;sendToPython(_0x4b620e,'ANALYZE_SEQUENCE',{'sequence':_0x2a72d8});}async function createDailyDigest(_0x3674d1){const _0x492f18=a0_0x1106bd;if(!_0x3674d1[_0x492f18(0x105)])return;await _0x3674d1['setStateAsync'](LTM_DP_STATUS,{'val':_0x492f18(0x150),'ack':!![]});if(!_0x3674d1[_0x492f18(0x87)]||_0x3674d1['rawEventLog'][_0x492f18(0x1c5)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x3674d1['setStateAsync'](LTM_DP_STATUS,{'val':'Skipped\x20(No\x20AI\x20or\x20Data)','ack':!![]});return;}const _0x5b8a17=JSON['parse'](JSON[_0x492f18(0x20c)](_0x3674d1[_0x492f18(0x6c)])),_0x78c4a4=_0x5b8a17['length'],_0x36c4d6=_0x492f18(0x1eb)+JSON['stringify'](_0x5b8a17);try{const _0x24a3f4=await _0x3674d1[_0x492f18(0x87)][_0x492f18(0x165)](_0x36c4d6),_0x3c1de0=JSON['parse'](_0x24a3f4[_0x492f18(0xe1)][_0x492f18(0xa6)]()[_0x492f18(0x1d0)](/```json|```/g,'')['trim']()),_0x22d3c4={'timestamp':new Date()['toISOString'](),'eventCount':_0x78c4a4,'summary':_0x3c1de0[_0x492f18(0xf2)]||'Digest','activityLevel':_0x3c1de0['activityLevel']||_0x492f18(0x148),'systemMode':_0x3674d1[_0x492f18(0x16e)]};_0x3674d1['dailyDigests'][_0x492f18(0x73)](_0x22d3c4),await saveDailyDigests(_0x3674d1),_0x3674d1[_0x492f18(0x6c)]=[],await saveRawEventLog(_0x3674d1),await _0x3674d1[_0x492f18(0x1bb)](LTM_DP_STATUS,{'val':_0x492f18(0xb9),'ack':!![]});if(_0x3674d1[_0x492f18(0x105)])sendToPython(_0x3674d1,'ANALYZE_HEALTH',{'digest':_0x22d3c4});}catch(_0x135b31){_0x3674d1[_0x492f18(0x12a)][_0x492f18(0x89)](_0x135b31[_0x492f18(0x8a)]);}}async function runBaselineDriftAnalysis(_0x355502){const _0x869d5b=a0_0x1106bd;if(!_0x355502[_0x869d5b(0x105)]||!_0x355502[_0x869d5b(0x87)])return;const _0x57a97a=_0x355502['config'][_0x869d5b(0x1f6)]||0xe;if(_0x355502[_0x869d5b(0x162)][_0x869d5b(0x1c5)]<_0x57a97a+0x7){await _0x355502[_0x869d5b(0x1bb)](LTM_DP_DRIFT_STATUS,{'val':_0x869d5b(0x1e5),'ack':!![]});return;}const _0x303247=_0x355502[_0x869d5b(0x162)][_0x869d5b(0xfc)](-_0x57a97a),_0x408d4c=_0x355502['dailyDigests'][_0x869d5b(0xfc)](0x0,_0x355502[_0x869d5b(0x162)][_0x869d5b(0x1c5)]-_0x57a97a),_0x2fa7bf=_0x869d5b(0x187)+JSON[_0x869d5b(0x20c)](_0x408d4c)+_0x869d5b(0x13a)+JSON['stringify'](_0x303247);try{const _0x3618a0=await _0x355502[_0x869d5b(0x87)][_0x869d5b(0x165)](_0x2fa7bf),_0x219728=JSON[_0x869d5b(0x1d6)](_0x3618a0[_0x869d5b(0xe1)][_0x869d5b(0xa6)]()[_0x869d5b(0x1d0)](/```json|```/g,'')[_0x869d5b(0xd1)]());_0x219728[_0x869d5b(0x99)]&&(await _0x355502[_0x869d5b(0x1bb)](LTM_DP_DRIFT_STATUS,{'val':_0x219728[_0x869d5b(0x99)],'ack':!![]}),await _0x355502[_0x869d5b(0x1bb)](LTM_DP_DRIFT_DETAILS,{'val':_0x219728[_0x869d5b(0x11b)],'ack':!![]}),await _0x355502[_0x869d5b(0x1bb)](LTM_DP_DRIFT_LAST_CHECK,{'val':Date[_0x869d5b(0x9c)](),'ack':!![]}));}catch(_0x1cd329){}}async function sendMorningBriefing(_0x3fe5c1){const _0x331749=a0_0x1106bd;if(!_0x3fe5c1[_0x331749(0x87)])return;try{const _0x25c233=_0x331749(0x1ca),_0x331375=await _0x3fe5c1[_0x331749(0x87)]['generateContent'](_0x25c233),_0x462e26=_0x331375[_0x331749(0xe1)][_0x331749(0xa6)]();sendNotification(_0x3fe5c1,'ðŸŒ…\x20Morning\x20Briefing:\x0a'+_0x462e26);}catch(_0x4be56f){_0x3fe5c1[_0x331749(0x12a)][_0x331749(0x89)](_0x331749(0x13e)+_0x4be56f[_0x331749(0x8a)]);}}function stopPythonService(_0x26d4cf){const _0x4593d4=a0_0x1106bd;if(_0x26d4cf[_0x4593d4(0xd4)]){try{_0x26d4cf[_0x4593d4(0xd4)][_0x4593d4(0x161)]();}catch(_0x3a689b){}_0x26d4cf[_0x4593d4(0xd4)]=null;}}function sendToPython(_0x35af08,_0x1fbf13,_0x112cb5={}){const _0x56d25d=a0_0x1106bd;if(!_0x35af08[_0x56d25d(0xd4)]||!_0x35af08[_0x56d25d(0xd4)][_0x56d25d(0xc6)][_0x56d25d(0x107)])return;const _0x306ba1=JSON['stringify']({'command':_0x1fbf13,..._0x112cb5});try{_0x35af08[_0x56d25d(0xd4)][_0x56d25d(0xc6)][_0x56d25d(0x11e)](_0x306ba1+'\x0a');}catch(_0x22dc7a){}}function runPythonHealthCheck(_0x434f46){const _0x405e5e=a0_0x1106bd;if(!_0x434f46[_0x405e5e(0x162)]||_0x434f46[_0x405e5e(0x162)]['length']<0x2)return;const _0x3a3003=_0x434f46[_0x405e5e(0x162)]['map'](_0x1e250f=>{const _0x465bad=_0x405e5e,_0x5e1428=(_0x1e250f[_0x465bad(0x180)]||'')[_0x465bad(0x17a)]();return ACTIVITY_LEVEL_MAP[_0x5e1428]||0x32;});sendToPython(_0x434f46,'ANALYZE_TREND',{'values':_0x3a3003,'tag':_0x405e5e(0x1a3)});}function handlePythonResult(_0xa4c346,_0x16efd4){const _0x438ef0=a0_0x1106bd;if(_0x16efd4[_0x438ef0(0x14e)]===_0x438ef0(0x121))_0xa4c346[_0x438ef0(0x12a)]['debug'](_0x438ef0(0x1e8));else{if(_0x16efd4['type']==='SECURITY_RESULT'){const {anomaly_score:_0x12639b,is_anomaly:_0x2e2142,threshold:_0x40f49d,explanation:_0x213793}=_0x16efd4['payload'];_0xa4c346['log']['info'](_0x438ef0(0x11d)+_0x12639b[_0x438ef0(0x15a)](0x5)+_0x438ef0(0x12e)+(_0x2e2142?_0x438ef0(0x15e):'OK')),_0xa4c346[_0x438ef0(0x1bb)](_0x438ef0(0x1c9),{'val':_0x12639b,'ack':!![]}),_0xa4c346[_0x438ef0(0x1bb)](_0x438ef0(0xef),{'val':new Date()[_0x438ef0(0x104)](),'ack':!![]});if(_0x40f49d)_0xa4c346['setStateAsync'](_0x438ef0(0x1b4),{'val':_0x40f49d,'ack':!![]});if(_0x2e2142){let _0x2155e0=_0x438ef0(0x81)+_0x12639b[_0x438ef0(0x15a)](0x4)+')';if(_0x213793&&_0x213793!==_0x438ef0(0x203))_0x2155e0+=_0x438ef0(0xce)+_0x213793;_0xa4c346[_0x438ef0(0x1bb)]('analysis.isAlert',{'val':!![],'ack':!![]}),_0xa4c346[_0x438ef0(0x1bb)](_0x438ef0(0x9b),{'val':_0x2155e0,'ack':!![]}),sendNotification(_0xa4c346,_0x438ef0(0x1a5)+_0x2155e0,![],!![]);}}else{if(_0x16efd4['type']===_0x438ef0(0xe0)){const _0x134444=_0x16efd4[_0x438ef0(0x8d)]['details']||'',_0x1d1685=_0x16efd4[_0x438ef0(0x8d)][_0x438ef0(0x1d5)],_0xd1c5e8=_0x16efd4[_0x438ef0(0x8d)][_0x438ef0(0x1a2)]?_0x438ef0(0xf8)+new Date()[_0x438ef0(0x1b0)]()+'\x20('+_0x134444+')':_0x438ef0(0x20b)+_0x16efd4['payload']['reason'];_0xa4c346[_0x438ef0(0x1bb)]('analysis.training.status',{'val':_0xd1c5e8,'ack':!![]});if(_0x16efd4[_0x438ef0(0x8d)]['success']&&_0x1d1685)_0xa4c346[_0x438ef0(0x1bb)]('analysis.security.currentThreshold',{'val':_0x1d1685,'ack':!![]});}else{if(_0x16efd4[_0x438ef0(0x14e)]===_0x438ef0(0x157)){const {patterns:_0x5b9bd4}=_0x16efd4[_0x438ef0(0x8d)];if(_0x5b9bd4&&_0x5b9bd4[_0x438ef0(0x1c5)]>0x0){_0xa4c346[_0x438ef0(0x12a)][_0x438ef0(0xd7)](_0x438ef0(0xdc)+_0x5b9bd4[_0x438ef0(0x1c5)]+_0x438ef0(0xfe)),_0xa4c346[_0x438ef0(0x1bb)](_0x438ef0(0x163),{'val':JSON[_0x438ef0(0x20c)](_0x5b9bd4),'ack':!![]});const _0x3254f8=_0x5b9bd4[0x0],_0x3a3e44=_0x438ef0(0x193)+_0x3254f8['rule']+'\x20('+(_0x3254f8['confidence']*0x64)[_0x438ef0(0x15a)](0x0)+'%)';_0xa4c346[_0x438ef0(0x1bb)]('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),_0xa4c346[_0x438ef0(0x1bb)]('analysis.automation.description',{'val':_0x3a3e44,'ack':!![]});}else _0xa4c346['log']['info'](_0x438ef0(0x192)),_0xa4c346[_0x438ef0(0x1bb)](_0x438ef0(0x1be),{'val':![],'ack':!![]}),_0xa4c346[_0x438ef0(0x1bb)](_0x438ef0(0x163),{'val':'[]','ack':!![]});}else{if(_0x16efd4[_0x438ef0(0x14e)]===_0x438ef0(0x172)){if(_0x16efd4['payload'][_0x438ef0(0x1a2)])try{const _0xba58e6=JSON[_0x438ef0(0x1d6)](_0x16efd4[_0x438ef0(0x8d)][_0x438ef0(0x1d1)]);if(_0xba58e6[_0x438ef0(0x1df)])_0xa4c346[_0x438ef0(0x1bb)](_0x438ef0(0x169),{'val':JSON['stringify'](_0xba58e6[_0x438ef0(0x1df)]),'ack':!![]});if(_0xba58e6['heating'])_0xa4c346[_0x438ef0(0x1bb)](_0x438ef0(0x1fd),{'val':JSON['stringify'](_0xba58e6[_0x438ef0(0x100)]),'ack':!![]});}catch(_0x12648c){}}else{if(_0x16efd4[_0x438ef0(0x14e)]===_0x438ef0(0x184)){if(_0x16efd4[_0x438ef0(0x8d)]['success'])_0xa4c346['log'][_0x438ef0(0xd7)](_0x438ef0(0x1ea));}else{if(_0x16efd4[_0x438ef0(0x14e)]===_0x438ef0(0x8e))_0xa4c346[_0x438ef0(0x1bb)](_0x438ef0(0x18a),{'val':new Date()['toISOString'](),'ack':!![]}),_0xa4c346[_0x438ef0(0x1bb)](_0x438ef0(0x1d3),{'val':_0x16efd4[_0x438ef0(0x8d)][_0x438ef0(0x156)],'ack':!![]});else{if(_0x16efd4['type']===_0x438ef0(0x1c0))_0xa4c346[_0x438ef0(0x1bb)](_0x438ef0(0x71),{'val':_0x16efd4[_0x438ef0(0x8d)][_0x438ef0(0x88)],'ack':!![]}),_0xa4c346['setStateAsync'](_0x438ef0(0x173),{'val':_0x16efd4[_0x438ef0(0x8d)][_0x438ef0(0xd8)],'ack':!![]});else{if(_0x16efd4[_0x438ef0(0x14e)]===_0x438ef0(0xd0)){const {speed_trend:_0x25dae1}=_0x16efd4['payload'];if(_0x25dae1!==undefined)_0xa4c346[_0x438ef0(0x1bb)](_0x438ef0(0x115),{'val':_0x25dae1,'ack':!![]});}else{if(_0x16efd4['type']===_0x438ef0(0x112)){const {forecast:_0x250a76}=_0x16efd4[_0x438ef0(0x8d)];if(_0x250a76)_0xa4c346[_0x438ef0(0x1bb)](_0x438ef0(0x10a),{'val':JSON['stringify'](_0x250a76),'ack':!![]});}else{if(_0x16efd4[_0x438ef0(0x14e)]===_0x438ef0(0x1c3)){const {data:_0xf5ac91}=_0x16efd4['payload'];_0xf5ac91&&(_0xa4c346['log'][_0x438ef0(0xd7)](_0x438ef0(0x92)),_0xa4c346[_0x438ef0(0x1bb)](_0x438ef0(0xa9),{'val':JSON[_0x438ef0(0x20c)](_0xf5ac91),'ack':!![]}));}}}}}}}}}}}}function startPythonService(_0x467e0f){const _0x26f7d1=a0_0x1106bd;let _0x4d29de='python3';if(fs[_0x26f7d1(0x74)](installer['PYTHON_EXE']))_0x4d29de=installer[_0x26f7d1(0xdb)];try{const _0x18d40f=path[_0x26f7d1(0x1f5)](__dirname,_0x26f7d1(0x10c),'service.py');_0x467e0f[_0x26f7d1(0xd4)]=spawn(_0x4d29de,[_0x18d40f]),_0x467e0f[_0x26f7d1(0xd4)][_0x26f7d1(0xcb)]['on'](_0x26f7d1(0x96),_0x3e9842=>{const _0x461290=_0x26f7d1,_0xec56f7=_0x3e9842[_0x461290(0xa4)]()['split']('\x0a');_0xec56f7[_0x461290(0xe3)](_0x1a0ab2=>{const _0x5c3909=_0x461290,_0xe80878=_0x1a0ab2[_0x5c3909(0xd1)]();if(!_0xe80878)return;if(_0xe80878[_0x5c3909(0x176)](_0x5c3909(0x1bf)))_0x467e0f[_0x5c3909(0x12a)][_0x5c3909(0x17f)](_0x5c3909(0x97)+_0xe80878[_0x5c3909(0x171)](0x5)['trim']());else{if(_0xe80878[_0x5c3909(0x176)](_0x5c3909(0x116)))try{const _0x4bc2c3=JSON['parse'](_0xe80878[_0x5c3909(0x171)](0x8)[_0x5c3909(0xd1)]());handlePythonResult(_0x467e0f,_0x4bc2c3);}catch(_0x49ed1c){}}});}),_0x467e0f[_0x26f7d1(0xd4)]['on'](_0x26f7d1(0x1f3),_0x35e709=>{_0x467e0f['pythonProcess']=null;});}catch(_0x23e324){_0x467e0f[_0x26f7d1(0x12a)][_0x26f7d1(0x89)](_0x26f7d1(0x145)+_0x23e324[_0x26f7d1(0x8a)]);}}async function runAutopilot(_0x236ead){const _0x3eed26=a0_0x1106bd;_0x236ead[_0x3eed26(0x12a)][_0x3eed26(0x17f)]('ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...'),await runGeminiAnalysis(_0x236ead),updateHealthVector(_0x236ead),triggerGaitAnalysis(_0x236ead),triggerEnergyPrediction(_0x236ead);}async function triggerGaitAnalysis(_0x3eb48e){const _0x476981=a0_0x1106bd;if(!_0x3eb48e[_0x476981(0x105)])return;try{const _0xf27794=await _0x3eb48e[_0x476981(0x201)](_0x476981(0x1b1));_0xf27794&&_0xf27794[_0x476981(0xb5)]&&sendToPython(_0x3eb48e,_0x476981(0x166),{'sequences':JSON[_0x476981(0x1d6)](_0xf27794[_0x476981(0xb5)])});}catch(_0x5a8847){}}async function triggerEnergyPrediction(_0x1afa9d){const _0x1c9520=a0_0x1106bd;if(!_0x1afa9d[_0x1c9520(0x105)])return;try{const _0x26bfc9=await getOutsideTemperatureNumeric(_0x1afa9d);if(_0x26bfc9===null)return;const _0x5928d0={},_0x571097=_0x1afa9d['config'][_0x1c9520(0xe2)]||[];for(const _0x29ce85 of _0x571097){if(_0x29ce85[_0x1c9520(0x14e)]==='temperature'&&_0x29ce85[_0x1c9520(0x16c)]){const _0x39834e=_0x1afa9d[_0x1c9520(0x1dd)][_0x29ce85['id']];if(_0x39834e!==undefined)_0x5928d0[_0x29ce85['location']]=_0x39834e;}}Object[_0x1c9520(0x14a)](_0x5928d0)['length']>0x0&&sendToPython(_0x1afa9d,_0x1c9520(0xe8),{'current_temps':_0x5928d0,'t_out':_0x26bfc9});}catch(_0x4badbe){}}function updateHealthVector(_0x2d6765){const _0x41c144=a0_0x1106bd;if(!_0x2d6765[_0x41c144(0x6c)]||_0x2d6765['rawEventLog'][_0x41c144(0x1c5)]===0x0)return;const _0x152166=new Array(0x60)[_0x41c144(0xe4)](0x0),_0x8d78f2=new Date()[_0x41c144(0xb4)](0x0,0x0,0x0,0x0);_0x2d6765['rawEventLog'][_0x41c144(0xe3)](_0x1ba88d=>{const _0x22d694=_0x41c144,_0x1bd094=new Date(_0x1ba88d[_0x22d694(0x6f)]);if(_0x1bd094['getTime']()>=_0x8d78f2){const _0x41d994=_0x1bd094[_0x22d694(0x1a6)](),_0x20bb4f=_0x1bd094[_0x22d694(0x138)](),_0xac1b10=_0x41d994*0x4+Math['floor'](_0x20bb4f/0xf);if(_0xac1b10>=0x0&&_0xac1b10<0x60)_0x152166[_0xac1b10]++;}}),_0x2d6765['setStateAsync'](_0x41c144(0xe5),{'val':JSON[_0x41c144(0x20c)](_0x152166),'ack':!![]});}async function getWeatherContext(_0x437ed9){const _0x59190f=a0_0x1106bd;if(!_0x437ed9[_0x59190f(0x9e)]['useWeather']||!_0x437ed9['config'][_0x59190f(0xfd)])return _0x59190f(0x106);try{const _0x44bf2d=_0x437ed9[_0x59190f(0x9e)][_0x59190f(0xfd)];let _0x5f28b2=await _0x437ed9[_0x59190f(0x1a8)](_0x44bf2d+_0x59190f(0x131));if(!_0x5f28b2)_0x5f28b2=await _0x437ed9[_0x59190f(0x1a8)](_0x44bf2d+_0x59190f(0x1fa));let _0x30d62c=await _0x437ed9[_0x59190f(0x1a8)](_0x44bf2d+_0x59190f(0x85));if(!_0x30d62c)_0x30d62c=await _0x437ed9[_0x59190f(0x1a8)](_0x44bf2d+_0x59190f(0x1b8));if(_0x5f28b2&&_0x30d62c)return _0x5f28b2[_0x59190f(0xb5)]+_0x59190f(0xf1)+_0x30d62c[_0x59190f(0xb5)];}catch(_0x2639de){}return _0x59190f(0x19e);}async function getCalendarContext(_0x423eed){const _0x5ba6aa=a0_0x1106bd;if(!_0x423eed[_0x5ba6aa(0x9e)][_0x5ba6aa(0x1cf)]||!_0x423eed[_0x5ba6aa(0x9e)][_0x5ba6aa(0x1cc)])return _0x5ba6aa(0x1ad);return'Keine\x20Termine.';}async function getCalendarNames(_0x1d73c2,_0x2e2264){return[];}async function saveFeedback(_0x1bf19c,_0x48b6a3){const _0x648e35=a0_0x1106bd;_0x1bf19c[_0x648e35(0x12a)][_0x648e35(0xd7)]('ðŸ“\x20Feedback\x20received:\x20'+_0x48b6a3[_0x648e35(0xea)]);}async function runGeminiAnalysis(_0x1c543d,_0xb0a2ba=''){const _0x149d45=a0_0x1106bd;if(!_0x1c543d[_0x149d45(0x87)])return;if(_0x1c543d[_0x149d45(0x1c4)][_0x149d45(0x1c5)]===0x0)return;const _0x50c195=_0x1c543d['eventHistory']['slice'](0x0,0xf),_0x4878e1=await getWeatherContext(_0x1c543d),_0x3c2afe=_0x1c543d[_0x149d45(0x16e)],_0x3c0b35=PERSONA_MAPPING[_0x1c543d[_0x149d45(0x9e)]['aiPersona']||_0x149d45(0x1ae)],_0x2df8be=_0x1c543d['config'][_0x149d45(0x189)]||'Keine\x20Details.';let _0x140087=_0x149d45(0x7e);try{const _0x552d7b=await _0x1c543d[_0x149d45(0x201)]('system.presenceWho');if(_0x552d7b&&_0x552d7b['val'])_0x140087=_0x552d7b[_0x149d45(0xb5)];}catch(_0x5cdde3){}let _0x3a8abb=![];try{const _0x27367a=await _0x1c543d[_0x149d45(0x201)](_0x149d45(0x1f0));if(_0x27367a&&_0x27367a[_0x149d45(0xb5)])_0x3a8abb=!![];}catch(_0x551da1){}const _0x665e35=_0x149d45(0x94)+_0x3c0b35+_0x149d45(0x17b)+_0x2df8be+_0x149d45(0x14c)+_0x3c2afe+_0x149d45(0xc5)+_0x4878e1+_0x149d45(0x183)+_0x140087+_0x149d45(0xed)+JSON[_0x149d45(0x20c)](_0x50c195)+'.\x20EMERGENCY:\x20'+_0xb0a2ba+_0x149d45(0x1ef);try{const _0x312cac=await _0x1c543d[_0x149d45(0x87)]['generateContent'](_0x665e35),_0x361e6c=JSON['parse'](_0x312cac[_0x149d45(0xe1)]['text']()[_0x149d45(0x1d0)](/```json|```/g,'')[_0x149d45(0xd1)]());await _0x1c543d[_0x149d45(0x1bb)]('analysis.lastResult',{'val':JSON['stringify'](_0x361e6c),'ack':!![]});if(_0x361e6c[_0x149d45(0xf2)])await _0x1c543d[_0x149d45(0x1bb)](_0x149d45(0xa5),{'val':_0x361e6c[_0x149d45(0xf2)],'ack':!![]});const _0x414efc={'timestamp':Date[_0x149d45(0x9c)](),'id':Date['now']()[_0x149d45(0xa4)](),'analysis':{'activity':{'summary':_0x361e6c[_0x149d45(0xf2)],'isAlert':_0x361e6c['isAlert'],'alertReason':_0x361e6c['alertReason']},'comfort':{'automationProposal':_0x361e6c['automationProposal']}}};await updateAnalysisHistory(_0x1c543d,_0x414efc);const _0x16805f=_0x361e6c['isAlert']||![];_0x16805f!==_0x1c543d[_0x149d45(0x134)]&&(await _0x1c543d[_0x149d45(0x1bb)](_0x149d45(0xd3),{'val':_0x16805f,'ack':!![]}),_0x1c543d['lastAlertState']=_0x16805f,_0x16805f&&(await _0x1c543d[_0x149d45(0x1bb)]('analysis.alertReason',{'val':_0x361e6c[_0x149d45(0x197)],'ack':!![]}),sendNotification(_0x1c543d,_0x149d45(0xbb)+_0x361e6c['alertReason'],![],_0x361e6c[_0x149d45(0x7c)])));if(_0x361e6c[_0x149d45(0x164)]&&_0x361e6c[_0x149d45(0x164)]['detected']){await _0x1c543d[_0x149d45(0x1bb)]('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),await _0x1c543d['setStateAsync']('analysis.automation.description',{'val':_0x361e6c[_0x149d45(0x164)][_0x149d45(0x126)],'ack':!![]}),await _0x1c543d[_0x149d45(0x1bb)](_0x149d45(0xfa),{'val':_0x361e6c[_0x149d45(0x164)]['targetId'],'ack':!![]}),await _0x1c543d[_0x149d45(0x1bb)](_0x149d45(0xff),{'val':JSON[_0x149d45(0x20c)](_0x361e6c['automationProposal']['targetValue']),'ack':!![]});if(_0x3a8abb)executeAutomationAction(_0x1c543d);}}catch(_0xa99f17){_0x1c543d['log']['error']('Gemini\x20Error:\x20'+_0xa99f17[_0x149d45(0x8a)]);}}async function startSystem(_0x1bafce){const _0x398de6=a0_0x1106bd;_0x1bafce[_0x398de6(0x12a)][_0x398de6(0xd7)](_0x398de6(0x140)),await initZombies(_0x1bafce);try{_0x1bafce[_0x398de6(0x105)]=await checkLicense(_0x1bafce[_0x398de6(0x9e)][_0x398de6(0x19b)]);}catch(_0x3d2e05){}if(!_0x1bafce[_0x398de6(0x9e)][_0x398de6(0x16f)]||_0x1bafce[_0x398de6(0x9e)][_0x398de6(0x16f)]<0.1)_0x1bafce[_0x398de6(0x9e)]['inactivityThresholdHours']=0xc;await initHistory(_0x1bafce),await initSystemConfig(_0x1bafce);if(_0x1bafce[_0x398de6(0x9e)][_0x398de6(0x1c7)])try{_0x1bafce[_0x398de6(0xcf)]=new GoogleGenerativeAI(_0x1bafce[_0x398de6(0x9e)][_0x398de6(0x1c7)]),_0x1bafce[_0x398de6(0x87)]=_0x1bafce[_0x398de6(0xcf)][_0x398de6(0xb1)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x398de6(0x75)}}),_0x1bafce[_0x398de6(0x12a)][_0x398de6(0xd7)](_0x398de6(0x14f));}catch(_0x1573b7){_0x1bafce['log'][_0x398de6(0x89)](_0x398de6(0x1da)+_0x1573b7[_0x398de6(0x8a)]);}await createAllObjects(_0x1bafce),await loadSystemMode(_0x1bafce),await loadRawEventLog(_0x1bafce),await loadDailyDigests(_0x1bafce),_0x1bafce[_0x398de6(0x15b)](_0x398de6(0x1f2)),_0x1bafce[_0x398de6(0x15b)](LTM_DP_TRIGGER_DIGEST),_0x1bafce[_0x398de6(0x15b)](_0x398de6(0x177)),_0x1bafce['subscribeStates'](_0x398de6(0xcc)),_0x1bafce['subscribeStates']('analysis.automation.triggerAction'),_0x1bafce[_0x398de6(0x15b)](_0x398de6(0x1f0)),_0x1bafce['subscribeStates'](_0x398de6(0x191)),_0x1bafce['subscribeStates']('analysis.training.triggerHealth'),_0x1bafce[_0x398de6(0x15b)]('analysis.training.triggerEnergy'),_0x1bafce['subscribeStates'](_0x398de6(0x167)),_0x1bafce[_0x398de6(0x15b)](_0x398de6(0xf0)),await initSensorSubscriptions(_0x1bafce),await initPresenceSubscriptions(_0x1bafce),await setupTelegramListener(_0x1bafce),setTimeout(()=>checkWifiPresence(_0x1bafce),0x1388);if(_0x1bafce[_0x398de6(0xb7)])clearInterval(_0x1bafce[_0x398de6(0xb7)]);const _0x125fdb=_0x1bafce[_0x398de6(0x9e)]['analysisInterval']||0xf;_0x125fdb>0x0&&(_0x1bafce['analysisTimer']=setInterval(()=>{runAutopilot(_0x1bafce);},_0x125fdb*0x3c*0x3e8)),schedulers[_0x398de6(0x1ff)](_0x1bafce,()=>createDailyDigest(_0x1bafce)),schedulers[_0x398de6(0x143)](_0x1bafce),schedulers[_0x398de6(0xf5)](_0x1bafce,()=>runBaselineDriftAnalysis(_0x1bafce)),schedulers[_0x398de6(0x18e)](_0x1bafce,()=>sendMorningBriefing(_0x1bafce)),startPythonService(_0x1bafce),setTimeout(()=>{const _0x10ff51=_0x398de6;_0x1bafce[_0x10ff51(0xd4)]&&(runPythonHealthCheck(_0x1bafce),triggerGaitAnalysis(_0x1bafce),triggerEnergyPrediction(_0x1bafce)),updateHealthVector(_0x1bafce);},0x1388);}class CogniLiving extends utils[a0_0x1106bd(0x1e6)]{constructor(_0x1bdd53){const _0x4aa4a5=a0_0x1106bd;super({..._0x1bdd53,'name':_0x4aa4a5(0x15d)}),this[_0x4aa4a5(0x1c4)]=[],this['analysisHistory']=[],this[_0x4aa4a5(0x6c)]=[],this[_0x4aa4a5(0x162)]=[],this[_0x4aa4a5(0x1dd)]={},this[_0x4aa4a5(0x103)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x4aa4a5(0x186)]=!![],this[_0x4aa4a5(0xe9)]=null,this[_0x4aa4a5(0x1db)]=null,this[_0x4aa4a5(0x1e0)]=![],this[_0x4aa4a5(0xcf)]=null,this[_0x4aa4a5(0x87)]=null,this[_0x4aa4a5(0x16e)]=SYSTEM_MODES[_0x4aa4a5(0x109)],this[_0x4aa4a5(0x105)]=![],this[_0x4aa4a5(0x134)]=![],this[_0x4aa4a5(0x17e)]=_0x4aa4a5(0xc8),this['analysisTimer']=null,this[_0x4aa4a5(0x114)]=null,this[_0x4aa4a5(0x122)]=null,this['driftAnalysisTimer']=null,this[_0x4aa4a5(0x1b3)]=null,this[_0x4aa4a5(0xd4)]=null,this[_0x4aa4a5(0xaf)]=![],this['on'](_0x4aa4a5(0x1e1),this['onReady'][_0x4aa4a5(0x188)](this)),this['on'](_0x4aa4a5(0x200),this[_0x4aa4a5(0x19c)][_0x4aa4a5(0x188)](this)),this['on']('unload',this['onUnload'][_0x4aa4a5(0x188)](this)),this['on']('message',this[_0x4aa4a5(0x111)]['bind'](this));}async[a0_0x1106bd(0x129)](){const _0x2d09f3=a0_0x1106bd;this['log']['info'](_0x2d09f3(0xbd)+this['version']+')\x20-\x20SAFE\x20BOOT');if(!installer[_0x2d09f3(0x18f)](this,()=>startSystem(this)))return;}[a0_0x1106bd(0xb6)](_0x51f26f){const _0x1ac299=a0_0x1106bd;if(this[_0x1ac299(0xb7)])clearInterval(this[_0x1ac299(0xb7)]);if(this[_0x1ac299(0x137)])clearInterval(this[_0x1ac299(0x137)]);if(this[_0x1ac299(0x114)])this[_0x1ac299(0x114)][_0x1ac299(0x154)]();if(this[_0x1ac299(0x122)])this['modeResetJob'][_0x1ac299(0x154)]();if(this[_0x1ac299(0x1b3)])this[_0x1ac299(0x1b3)][_0x1ac299(0x154)]();if(this[_0x1ac299(0xe9)])clearTimeout(this[_0x1ac299(0xe9)]);if(this['exitGraceTimer'])clearTimeout(this[_0x1ac299(0x1db)]);stopPythonService(this),_0x51f26f();}async[a0_0x1106bd(0x19c)](_0xa5c8a0,_0x28b7cc){const _0x285b2d=a0_0x1106bd;if(!_0x28b7cc||this[_0x285b2d(0xaf)])return;if(_0xa5c8a0[_0x285b2d(0x1c8)](_0x285b2d(0xe7))&&_0xa5c8a0['endsWith'](_0x285b2d(0x144))&&_0x28b7cc['val']){await handleTelegramResponse(this,_0x28b7cc[_0x285b2d(0xb5)]);return;}if(_0xa5c8a0===this[_0x285b2d(0x190)]+'.'+SYSTEM_DP_MODE){if(_0x28b7cc[_0x285b2d(0xb5)]&&Object[_0x285b2d(0x101)](SYSTEM_MODES)['includes'](_0x28b7cc[_0x285b2d(0xb5)])){this[_0x285b2d(0x16e)]=_0x28b7cc[_0x285b2d(0xb5)];if(_0x28b7cc[_0x285b2d(0xb5)]===SYSTEM_MODES[_0x285b2d(0x1d9)])await setPresence(this,![]);else await setPresence(this,!![]);}if(!_0x28b7cc['ack'])this[_0x285b2d(0x108)](_0xa5c8a0,{'val':this[_0x285b2d(0x16e)],'ack':!![]});return;}if(!_0x28b7cc['ack']){_0xa5c8a0[_0x285b2d(0x1c8)](_0x285b2d(0x1f2))&&_0x28b7cc['val']&&(this[_0x285b2d(0x108)](_0xa5c8a0,{'val':![],'ack':!![]}),runGeminiAnalysis(this));if(_0xa5c8a0[_0x285b2d(0x1c8)](_0x285b2d(0x1f9))&&_0x28b7cc[_0x285b2d(0xb5)]){this['setState'](_0xa5c8a0,{'val':![],'ack':!![]});if(this[_0x285b2d(0x105)])createDailyDigest(this);}_0xa5c8a0[_0x285b2d(0x1c8)](_0x285b2d(0x1c2))&&_0x28b7cc['val']&&(this['setState'](_0xa5c8a0,{'val':![],'ack':!![]}),sendMorningBriefing(this));_0xa5c8a0['includes']('automation.triggerAction')&&_0x28b7cc[_0x285b2d(0xb5)]&&(this[_0x285b2d(0x108)](_0xa5c8a0,{'val':![],'ack':!![]}),executeAutomationAction(this));if(_0xa5c8a0['includes'](_0x285b2d(0x191))&&_0x28b7cc[_0x285b2d(0xb5)]){this[_0x285b2d(0x108)](_0xa5c8a0,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x26a202=await this[_0x285b2d(0x201)](_0x285b2d(0x1b1));if(_0x26a202&&_0x26a202[_0x285b2d(0xb5)]){const _0x243711=JSON[_0x285b2d(0x1d6)](_0x26a202[_0x285b2d(0xb5)]);this[_0x285b2d(0x12a)][_0x285b2d(0xd7)](_0x285b2d(0x1ab)),this[_0x285b2d(0x1bb)](_0x285b2d(0x12b),{'val':_0x285b2d(0x125),'ack':!![]}),sendToPython(this,'TRAIN_SECURITY',{'sequences':_0x243711});}}catch(_0x55e68e){this['log'][_0x285b2d(0x89)](_0x285b2d(0x133)+_0x55e68e[_0x285b2d(0x8a)]);}}if(_0xa5c8a0['includes']('analysis.training.triggerHealth')&&_0x28b7cc['val']){this['setState'](_0xa5c8a0,{'val':![],'ack':!![]});if(this[_0x285b2d(0x105)])try{const _0xc62dcd=await this['getStateAsync'](LTM_DP_DAILY_DIGESTS);if(_0xc62dcd&&_0xc62dcd['val'])sendToPython(this,_0x285b2d(0x9d),{'digests':JSON[_0x285b2d(0x1d6)](_0xc62dcd['val'])});}catch(_0x3a1692){}}if(_0xa5c8a0['includes'](_0x285b2d(0x1e4))&&_0x28b7cc['val']){this[_0x285b2d(0x108)](_0xa5c8a0,{'val':![],'ack':!![]});if(this[_0x285b2d(0x105)])try{const _0x347150=await this['getStateAsync'](_0x285b2d(0x1ed));if(_0x347150&&_0x347150['val'])sendToPython(this,_0x285b2d(0xeb),{'points':JSON[_0x285b2d(0x1d6)](_0x347150[_0x285b2d(0xb5)])});}catch(_0x5732f1){}}if(_0xa5c8a0['includes'](_0x285b2d(0x167))&&_0x28b7cc['val']){this['setState'](_0xa5c8a0,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x1d7f8b=await this[_0x285b2d(0x201)](LTM_DP_RAW_LOG);_0x1d7f8b&&_0x1d7f8b[_0x285b2d(0xb5)]&&(this[_0x285b2d(0x12a)][_0x285b2d(0xd7)]('ðŸ›‹ï¸\x20Triggering\x20Comfort\x20Analysis\x20(Pattern\x20Mining)...'),sendToPython(this,'TRAIN_COMFORT',{'events':JSON['parse'](_0x1d7f8b[_0x285b2d(0xb5)])}));}catch(_0x35a633){}}if(_0xa5c8a0[_0x285b2d(0x1c8)](_0x285b2d(0xf0))&&_0x28b7cc['val']){this[_0x285b2d(0x108)](_0xa5c8a0,{'val':![],'ack':!![]});if(this[_0x285b2d(0x105)])try{const _0x3f5cc5=await this[_0x285b2d(0x201)](_0x285b2d(0x1b1));if(_0x3f5cc5&&_0x3f5cc5[_0x285b2d(0xb5)]){const _0x1da9d0=JSON['parse'](_0x3f5cc5[_0x285b2d(0xb5)]);this['log']['info'](_0x285b2d(0x7f)),sendToPython(this,_0x285b2d(0xc1),{'sequences':_0x1da9d0});}}catch(_0x5edb89){this[_0x285b2d(0x12a)][_0x285b2d(0x89)](_0x285b2d(0xf4)+_0x5edb89[_0x285b2d(0x8a)]);}}return;}if(this[_0x285b2d(0x9e)][_0x285b2d(0x1f4)]&&this[_0x285b2d(0x9e)][_0x285b2d(0x1f4)][_0x285b2d(0x1c8)](_0xa5c8a0)){await checkWifiPresence(this);return;}const _0x7a1ec8=(this[_0x285b2d(0x9e)][_0x285b2d(0xe2)]||[])[_0x285b2d(0xc4)](_0x4c921c=>_0x4c921c['id']===_0xa5c8a0);if(_0x7a1ec8)processSensorEvent(this,_0xa5c8a0,_0x28b7cc,_0x7a1ec8);}async[a0_0x1106bd(0x111)](_0x10fc72){const _0x2c4661=a0_0x1106bd;if(typeof _0x10fc72===_0x2c4661(0x1d7)&&_0x10fc72['message']){if(_0x10fc72['command']===_0x2c4661(0xd5)){const _0x1b060a=_0x10fc72[_0x2c4661(0x8a)][_0x2c4661(0x9f)]||this[_0x2c4661(0x9e)][_0x2c4661(0x1c7)];if(!_0x1b060a)return this[_0x2c4661(0x1e7)](_0x10fc72[_0x2c4661(0x1f7)],_0x10fc72[_0x2c4661(0x10b)],{'success':![],'message':_0x2c4661(0x1f8)},_0x10fc72[_0x2c4661(0x194)]);try{const _0x290590=new GoogleGenerativeAI(_0x1b060a),_0xc7ce36=_0x290590[_0x2c4661(0xb1)]({'model':GEMINI_MODEL}),_0x2e347b=await _0xc7ce36['generateContent']('Hi');this[_0x2c4661(0x1e7)](_0x10fc72[_0x2c4661(0x1f7)],_0x10fc72[_0x2c4661(0x10b)],{'success':!![],'message':_0x2c4661(0x1d8)+_0x2e347b[_0x2c4661(0xe1)]['text']()},_0x10fc72[_0x2c4661(0x194)]);}catch(_0x5e04b4){this[_0x2c4661(0x1e7)](_0x10fc72[_0x2c4661(0x1f7)],_0x10fc72[_0x2c4661(0x10b)],{'success':![],'message':_0x2c4661(0x149)+_0x5e04b4['message']},_0x10fc72[_0x2c4661(0x194)]);}}else{if(_0x10fc72[_0x2c4661(0x10b)]===_0x2c4661(0x80)){const _0x4a3752=await getWeatherContext(this),_0x4f235c=await getCalendarContext(this);this['sendTo'](_0x10fc72['from'],_0x10fc72[_0x2c4661(0x10b)],{'success':!![],'weather':_0x4a3752,'calendar':_0x4f235c},_0x10fc72[_0x2c4661(0x194)]);}else{if(_0x10fc72[_0x2c4661(0x10b)]===_0x2c4661(0x1f1)){if(!this[_0x2c4661(0x105)])return this[_0x2c4661(0x1e7)](_0x10fc72[_0x2c4661(0x1f7)],_0x10fc72[_0x2c4661(0x10b)],{'success':![],'isPro':![]},_0x10fc72['callback']);let _0x21fd1d={'status':'N/A'};try{const _0x1e3cad=await this[_0x2c4661(0x201)](LTM_DP_DRIFT_STATUS);_0x21fd1d['status']=_0x1e3cad?_0x1e3cad[_0x2c4661(0xb5)]:'N/A';}catch(_0x18eed7){}this[_0x2c4661(0x1e7)](_0x10fc72['from'],_0x10fc72[_0x2c4661(0x10b)],{'success':!![],'isPro':!![],'dailyDigests':this[_0x2c4661(0x162)],'driftAnalysis':_0x21fd1d,'analysisHistory':this['analysisHistory']},_0x10fc72[_0x2c4661(0x194)]);}else{if(_0x10fc72['command']===_0x2c4661(0x123)){const _0x41c72c=this[_0x2c4661(0x162)][_0x2c4661(0x1c5)],_0x322f57=new Date(),_0x275933=new Date(_0x322f57[_0x2c4661(0x202)](),_0x322f57[_0x2c4661(0xc2)](),_0x322f57[_0x2c4661(0x118)]())[_0x2c4661(0x12d)](),_0x550822=this[_0x2c4661(0x6c)][_0x2c4661(0xac)](_0xfb86a7=>new Date(_0xfb86a7[_0x2c4661(0x6f)])[_0x2c4661(0x12d)]()>_0x275933)[_0x2c4661(0x1c5)],_0x64d3ae=new Array(0x18)[_0x2c4661(0xe4)](0x0);this[_0x2c4661(0x6c)]['forEach'](_0x851ccf=>{const _0x4753cb=_0x2c4661,_0x2903b6=new Date(_0x851ccf['timestamp']);if(_0x2903b6[_0x4753cb(0x12d)]()>_0x275933)_0x64d3ae[_0x2903b6[_0x4753cb(0x1a6)]()]++;});let _0x25896f={'status':_0x2c4661(0xaa)};try{const _0x233b44=await this[_0x2c4661(0x201)](LTM_DP_DRIFT_STATUS);_0x25896f['status']=_0x233b44?_0x233b44[_0x2c4661(0xb5)]:_0x2c4661(0xaa);}catch(_0x2fb4c0){}let _0x2c019f='';try{const _0x5297b5=await this[_0x2c4661(0x201)](_0x2c4661(0x1fb));_0x2c019f=_0x5297b5?_0x5297b5['val']:'';}catch(_0x114a6b){}let _0x26eaa9=null;!this[_0x2c4661(0x87)]&&(_0x26eaa9=this[_0x2c4661(0x9e)][_0x2c4661(0x1c7)]?_0x2c4661(0x95):_0x2c4661(0x124));let _0xb7db0c={'detected':![],'description':'','targetId':'','targetValue':'','autoApply':![]};try{const _0x28293c=await this[_0x2c4661(0x201)](_0x2c4661(0x1be));if(_0x28293c&&_0x28293c[_0x2c4661(0xb5)]){_0xb7db0c['detected']=!![];const _0x39dd5b=await this[_0x2c4661(0x201)]('analysis.automation.description');_0xb7db0c[_0x2c4661(0x126)]=_0x39dd5b?_0x39dd5b[_0x2c4661(0xb5)]:'';const _0x27b117=await this['getStateAsync'](_0x2c4661(0xfa));_0xb7db0c['targetId']=_0x27b117?_0x27b117[_0x2c4661(0xb5)]:'';const _0x1f6af2=await this[_0x2c4661(0x201)](_0x2c4661(0xff));_0xb7db0c[_0x2c4661(0xf6)]=_0x1f6af2?_0x1f6af2['val']:'';}const _0x5c67bc=await this[_0x2c4661(0x201)]('analysis.automation.autoApply');_0xb7db0c[_0x2c4661(0x93)]=_0x5c67bc?!!_0x5c67bc['val']:![];}catch(_0x3393df){}this['sendTo'](_0x10fc72['from'],_0x10fc72[_0x2c4661(0x10b)],{'success':!![],'eventHistory':this[_0x2c4661(0x1c4)]['slice'](0x0,0xf),'stats':{'digestCount':_0x41c72c,'eventCountToday':_0x550822,'hourlyActivity':_0x64d3ae,'driftStatus':_0x25896f['status'],'isPresent':this[_0x2c4661(0x186)],'presenceWho':_0x2c019f,'minDays':this[_0x2c4661(0x9e)][_0x2c4661(0xc7)]||0x7,'stbDays':this[_0x2c4661(0x9e)][_0x2c4661(0x1f6)]||0xe,'ltbDays':this['config'][_0x2c4661(0x8f)]||0x3c,'systemError':_0x26eaa9},'automation':_0xb7db0c},_0x10fc72[_0x2c4661(0x194)]);}else{if(_0x10fc72[_0x2c4661(0x10b)]==='scanDevices')try{const _0x49708b=await scanner['scanForDevices'](this,_0x10fc72[_0x2c4661(0x8a)]||{});this['sendTo'](_0x10fc72[_0x2c4661(0x1f7)],_0x10fc72[_0x2c4661(0x10b)],{'success':!![],'devices':_0x49708b},_0x10fc72[_0x2c4661(0x194)]);}catch(_0x52bf49){this[_0x2c4661(0x1e7)](_0x10fc72[_0x2c4661(0x1f7)],_0x10fc72[_0x2c4661(0x10b)],{'success':![],'error':_0x52bf49['message']},_0x10fc72[_0x2c4661(0x194)]);}else{if(_0x10fc72[_0x2c4661(0x10b)]==='getEnums'){const _0x24f6c2=await this[_0x2c4661(0x1a9)](_0x2c4661(0x1ec),_0x2c4661(0x199)),_0x1e0934=[];if(_0x24f6c2)for(const _0x484ef3 in _0x24f6c2){const _0x3a2286=_0x24f6c2[_0x484ef3],_0x17a9bd=(_0x3a2286[_0x2c4661(0x136)]&&typeof _0x3a2286[_0x2c4661(0x136)][_0x2c4661(0x86)]===_0x2c4661(0x1d7)?_0x3a2286[_0x2c4661(0x136)][_0x2c4661(0x86)]['de']:_0x3a2286[_0x2c4661(0x136)]['name'])||_0x3a2286[_0x2c4661(0x136)][_0x2c4661(0x86)];_0x1e0934['push']({'id':_0x484ef3,'name':_0x17a9bd});}const _0x1334a1=await this[_0x2c4661(0x1a9)]('enum.rooms.*',_0x2c4661(0x199)),_0x52eb4c=[];if(_0x1334a1)for(const _0x26c886 in _0x1334a1){const _0x2ca79e=_0x1334a1[_0x26c886],_0x376e8b=(_0x2ca79e[_0x2c4661(0x136)]&&typeof _0x2ca79e[_0x2c4661(0x136)]['name']===_0x2c4661(0x1d7)?_0x2ca79e['common']['name']['de']:_0x2ca79e['common'][_0x2c4661(0x86)])||_0x26c886[_0x2c4661(0x209)]('.')[_0x2c4661(0x168)]();_0x52eb4c[_0x2c4661(0x73)](_0x376e8b);}this['sendTo'](_0x10fc72[_0x2c4661(0x1f7)],_0x10fc72['command'],{'success':!![],'enums':_0x1e0934,'rooms':_0x52eb4c},_0x10fc72[_0x2c4661(0x194)]);}else{if(_0x10fc72[_0x2c4661(0x10b)]===_0x2c4661(0x135)){const _0x3268f9=_0x10fc72[_0x2c4661(0x8a)][_0x2c4661(0x1bc)];if(!_0x3268f9)return this[_0x2c4661(0x1e7)](_0x10fc72['from'],_0x10fc72['command'],{'success':![],'error':'No\x20instance'},_0x10fc72[_0x2c4661(0x194)]);const _0x4efe36=await getCalendarNames(this,_0x3268f9);this[_0x2c4661(0x1e7)](_0x10fc72[_0x2c4661(0x1f7)],_0x10fc72['command'],{'success':!![],'names':_0x4efe36},_0x10fc72[_0x2c4661(0x194)]);}else{if(_0x10fc72['command']===_0x2c4661(0xf9)){const {targetId:_0x1b61b8,targetValue:_0x4d982b}=_0x10fc72[_0x2c4661(0x8a)];this['log'][_0x2c4661(0xd7)](_0x2c4661(0x17c)+_0x1b61b8+_0x2c4661(0xab)+_0x4d982b),await this['setStateAsync']('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),await this[_0x2c4661(0x1bb)](_0x2c4661(0xd6),{'val':_0x2c4661(0x15c)+_0x1b61b8,'ack':!![]}),await this[_0x2c4661(0x1bb)](_0x2c4661(0xfa),{'val':_0x1b61b8,'ack':!![]}),await this[_0x2c4661(0x1bb)](_0x2c4661(0xff),{'val':_0x4d982b,'ack':!![]}),this['sendTo'](_0x10fc72[_0x2c4661(0x1f7)],_0x10fc72[_0x2c4661(0x10b)],{'success':!![]},_0x10fc72[_0x2c4661(0x194)]);}else{if(_0x10fc72[_0x2c4661(0x10b)]==='submitFeedback'){const {historyId:_0x3b51b5,rating:_0x24baeb,comment:_0x2e9cfc,alertReason:_0x241180}=_0x10fc72['message'];_0x3b51b5&&_0x24baeb?(await saveFeedback(this,{'timestamp':Date[_0x2c4661(0x9c)](),'historyId':_0x3b51b5,'rating':_0x24baeb,'comment':_0x2e9cfc,'alertReason':_0x241180}),this[_0x2c4661(0x1e7)](_0x10fc72[_0x2c4661(0x1f7)],_0x10fc72[_0x2c4661(0x10b)],{'success':!![]},_0x10fc72[_0x2c4661(0x194)])):this[_0x2c4661(0x1e7)](_0x10fc72[_0x2c4661(0x1f7)],_0x10fc72[_0x2c4661(0x10b)],{'success':![],'error':_0x2c4661(0x1e3)},_0x10fc72[_0x2c4661(0x194)]);}else _0x10fc72[_0x2c4661(0x10b)]===_0x2c4661(0x1a0)&&(this[_0x2c4661(0x12a)][_0x2c4661(0xd7)](_0x2c4661(0xec)),await this['setStateAsync']('analysis.automation.patternDetected',{'val':![],'ack':!![]}),await this[_0x2c4661(0x1bb)](_0x2c4661(0xd6),{'val':'','ack':!![]}),this[_0x2c4661(0x1e7)](_0x10fc72[_0x2c4661(0x1f7)],_0x10fc72[_0x2c4661(0x10b)],{'success':!![]},_0x10fc72[_0x2c4661(0x194)]));}}}}}}}}}}}if(require[a0_0x1106bd(0x178)]!==module)module[a0_0x1106bd(0xc0)]=_0x104798=>new CogniLiving(_0x104798);else new CogniLiving();