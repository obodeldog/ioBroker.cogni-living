function a0_0x4237(){const _0x12d414=['checkWifiPresence','max','updateHealthVector','send','./lib/ai_agent','executeAutomationAction','existsSync','join','getAbsoluteDefaultDataDir','getMinutes','events.history','3656653Lurbqa','ready','writeFileSync','‚ö†\x20Replay\x20skipped:\x20No\x20events\x20in\x20memory.','./lib/recorder','LTM.dailyDigests','cogni-living\x20adapter\x20starting\x20(v','stateChange','LTM.rawEventLog','sendTo','dependencyInstallInProgress','presenceDevices','testContext','lastTrackerEventTime','setObjectNotExistsAsync','bootTime','timestamp','scanDevices','models/gemini-flash-latest','type','getOverviewData','date','trackerHeartbeat','checkLicense','DAY','readFileSync','temperature','\x20Kalender-Adapter\x20gefunden.','infrasoundSensorId','History\x20Save\x20Error:\x20','outdoorSensorId','NIGHT','runAutopilot','subscribeForeignStatesAsync','pulse','security','initSystemConfig','setHours','triggerDailyDigest','analysis.automation.description','cogni-living','analysis.automation.targetId','exitGraceTimer','toISOString','getForeignObjectsAsync','min','memoryCache','some','LTM.trainingData.sequences','manual','handleInfrasound','state','eventHistory','Standard','getObjectViewAsync','location','main','analysis.health.activityTrend','checkCalendarTriggers','getGenerativeModel','door','config','getStateAsync','moduleEnergy','scheduleJob','subscribeStates','Daily\x20Activity\x20Vector\x20(48x30min)','updateTopology','add','initHistory','TRAIN_COMFORT','3608888gzfEyv','processSensorEvent','apply','getForeignStateAsync','TRAIN_ENERGY','scanForDevices','replace','rows','genAI','analysis.health.todayVector','[Integrator]\x20Error:\x20','analysis.automation.targetValue','58295OFVNyI','saveDailyHistory','Sonne:\x20','stringify','systemConfig','./lib/automation','getHours','üíæ\x20Saving\x20Daily\x20History\x20for\x20','sensorLastValues','analysisHistory','isArray','(((.+)+)+)+$','setStateAsync','party','Sec-Training\x20started...','üêç\x20Triggering\x20Python\x20Health\x20Check\x20(Activity\x20Trend)...','Init...','guest','analysis.prediction.trackerConfidence','analysis.training.triggerComfort','number','substring','1022aMVKmj','isPresent','Guest\x20Mode','briefingJob','setPresence','healthTrendInterval','generateHealthReport','setState','version','bin','...','checkSolarCondition','analysis.activity.roomHistory','driftAnalysisTimer','modeResetJob','times','exitTimer','Room\x20History\x20(24h\x20Buckets)','log','moduleSecurity','infrasoundLocked','NORMAL','analysis.security.lastScore','.json','split','@iobroker/adapter-core','1066716Iynyhf','refreshCalendar\x20failed:\x20','name','toString','LTM.triggerDailyDigest','forEach','analysis.automation.patternDetected','system.adapter.ical.','analysis.energy.warmupTimes','5406993GflKVN',',\x20Temp:\x20','string','\x20events\x20from\x20today...','system.adapter.','refreshCalendar','warn','analysis.health.geminiDay','system.adapter.ical.È¶ô','devices','onMessage','createAllObjects','protectAiMemory','from','system.presenceWho','abortExitTimer','./lib/scheduler','analysis.training.status','SYSTEM_DP_MODE','terrasse','triggerInfrasoundCorrelation','ack','historyJob','Scan\x20Error:\x20','triggerEnergyPrediction','sources','stopService','üì¶\x20Restored\x20','parse','currentSystemMode','health','sendNotification','push','getHistoryData','‚úÖ\x20Dashboard\x20Data\x20(Rooms\x20&\x20Timeline\x20&\x20Details)\x20restored.','modules','analysis.health.todayRoomDetails','runGeminiAnalysis','.data.table','30kBmTPc','CALCULATE_HEALTH_TREND','analysisTimer','generateContent','callback','getCalendarNames','cancel','find','createDailyDigest','TRAIN_SECURITY','lastAlertState','moduleComfort','includes','replayTodayEvents','.system.mode','utf8','enum.rooms.*','TRAIN_HEALTH','analysis.visualization.pulse','python','constructor','onStateChange','testApiKey','triggerGaitAnalysis','json','all','comfort','./lib/topology','info','error','message','bind','length','integrateRoomTime','\x22history\x22:{}','getEnums','General\x20Activity\x20Trend','‚Ü∫\x20Replaying\x20','haust√ºr','analysis.activity.roomStats','VACATION','Gemini\x20Report\x20Night','text','mkdirSync','instance','value','Keine\x20Daten','toLocaleDateString','Aktiv\x20(','dailyDigests','node-schedule','isProVersion','TRAIN_TOPOLOGY','startSystem','endsWith','\x20events\x20from\x20standard\x20storage.','history','./lib/dead_man','motion','geminiModel','calendarName','analysis.energy.warmupSources','command','checkThermostats','Failed\x20to\x20trigger\x20Python\x20Health\x20Check','SYSTEM_MODES','enum.functions.*','filter','inactivityThresholdHours','onUnload','pop','isGracePeriodActive','toLowerCase','Gemini\x20Report\x20Day','Warte\x20auf\x20Analyse...','enum','fill','initSchedules','activeModules','\x20Tage)','Live\x20Event\x20Pulse','window','now','697761MQFEHX','analysis.training.triggerHealth','SET_LEARNING_MODE','loadSystemMode','energy','apiKey','thermostat','isSolar','pressureBuffer','object','values','Room\x20Dwell\x20Time\x20Stats','Unknown','rawEventLog','val','system','onReady','No\x20data','./lib/installer','‚úÖ\x20History\x20saved:\x20','search','moduleHealth','minDaysForBaseline','analysis.trigger','analysis.security.learningStatus','response','roomIntegratorTimer','then','runPythonHealthCheck','infrasoundEnabled','initZombies','@google/generative-ai','unload','Verbindung\x20erfolgreich:\x20','telegram','307bSBKiO','common','path','reduce','analyzeWindowOpening'];a0_0x4237=function(){return _0x12d414;};return a0_0x4237();}const a0_0x66d5f2=a0_0x5cc0;function a0_0x5cc0(_0x238834,_0x287fd1){const _0x172265=a0_0x4237();return a0_0x5cc0=function(_0x31696a,_0x422c4e){_0x31696a=_0x31696a-0x164;let _0x423758=_0x172265[_0x31696a];return _0x423758;},a0_0x5cc0(_0x238834,_0x287fd1);}(function(_0x2729b2,_0x3d3f35){const _0x93626d=a0_0x5cc0,_0x4935be=_0x2729b2();while(!![]){try{const _0x2bf244=parseInt(_0x93626d(0x225))/0x1*(parseInt(_0x93626d(0x165))/0x2)+-parseInt(_0x93626d(0x202))/0x3+-parseInt(_0x93626d(0x17f))/0x4+-parseInt(_0x93626d(0x288))/0x5*(parseInt(_0x93626d(0x1af))/0x6)+parseInt(_0x93626d(0x235))/0x7+-parseInt(_0x93626d(0x27c))/0x8+parseInt(_0x93626d(0x188))/0x9;if(_0x2bf244===_0x3d3f35)break;else _0x4935be['push'](_0x4935be['shift']());}catch(_0x355fde){_0x4935be['push'](_0x4935be['shift']());}}}(a0_0x4237,0x42401));const a0_0x422c4e=(function(){let _0x227421=!![];return function(_0x42a9a5,_0x54df20){const _0x170e75=_0x227421?function(){const _0x1de047=a0_0x5cc0;if(_0x54df20){const _0x317d9e=_0x54df20[_0x1de047(0x27e)](_0x42a9a5,arguments);return _0x54df20=null,_0x317d9e;}}:function(){};return _0x227421=![],_0x170e75;};}()),a0_0x31696a=a0_0x422c4e(this,function(){const _0x27aff5=a0_0x5cc0;return a0_0x31696a[_0x27aff5(0x182)]()[_0x27aff5(0x216)](_0x27aff5(0x293))['toString']()[_0x27aff5(0x1c3)](a0_0x31696a)['search'](_0x27aff5(0x293));});a0_0x31696a();'use strict';const utils=require(a0_0x66d5f2(0x17e)),{GoogleGenerativeAI}=require(a0_0x66d5f2(0x221)),path=require(a0_0x66d5f2(0x227)),fs=require('fs'),installer=require(a0_0x66d5f2(0x214)),scanner=require('./lib/scanner'),schedulers=require(a0_0x66d5f2(0x198)),topology=require(a0_0x66d5f2(0x1ca)),setup=require('./lib/setup'),recorder=require(a0_0x66d5f2(0x239)),pythonBridge=require('./lib/python_bridge'),aiAgent=require(a0_0x66d5f2(0x22e)),deadMan=require(a0_0x66d5f2(0x1e8)),automation=require(a0_0x66d5f2(0x28d)),GEMINI_MODEL=a0_0x66d5f2(0x247);class CogniLiving extends utils['Adapter']{constructor(_0x3bb270){const _0xc5113f=a0_0x66d5f2;super({..._0x3bb270,'name':'cogni-living'}),this[_0xc5113f(0x269)]=[],this[_0xc5113f(0x291)]=[],this['rawEventLog']=[],this[_0xc5113f(0x1e0)]=[],this['sensorLastValues']={},this[_0xc5113f(0x28c)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0xc5113f(0x166)]=!![],this[_0xc5113f(0x175)]=null,this[_0xc5113f(0x25f)]=null,this[_0xc5113f(0x1f6)]=![],this[_0xc5113f(0x284)]=null,this['geminiModel']=null,this[_0xc5113f(0x1a5)]=setup['SYSTEM_MODES'][_0xc5113f(0x17a)],this[_0xc5113f(0x1e2)]=![],this[_0xc5113f(0x1b9)]=![],this[_0xc5113f(0x1b1)]=null,this['ltmJob']=null,this[_0xc5113f(0x173)]=null,this[_0xc5113f(0x172)]=null,this[_0xc5113f(0x168)]=null,this[_0xc5113f(0x19e)]=null,this[_0xc5113f(0x24b)]=null,this[_0xc5113f(0x16a)]=null,this[_0xc5113f(0x21c)]=null,this[_0xc5113f(0x23f)]=![],this[_0xc5113f(0x242)]=Date[_0xc5113f(0x201)](),this[_0xc5113f(0x263)]=null,this['bootTime']=Date[_0xc5113f(0x201)](),this[_0xc5113f(0x179)]=![],this[_0xc5113f(0x20a)]=[],this[_0xc5113f(0x1fd)]={'health':!![],'security':!![],'energy':!![],'comfort':!![]},this['on'](_0xc5113f(0x236),this[_0xc5113f(0x212)]['bind'](this)),this['on'](_0xc5113f(0x23c),this['onStateChange'][_0xc5113f(0x1ce)](this)),this['on'](_0xc5113f(0x222),this['onUnload'][_0xc5113f(0x1ce)](this)),this['on'](_0xc5113f(0x1cd),this[_0xc5113f(0x192)][_0xc5113f(0x1ce)](this));}async[a0_0x66d5f2(0x212)](){const _0x487c58=a0_0x66d5f2;this[_0x487c58(0x177)]['info'](_0x487c58(0x23b)+this[_0x487c58(0x16d)]+')\x20-\x20Phase\x20E\x20(Scheduler\x20Fix)');if(this[_0x487c58(0x272)][_0x487c58(0x217)]!==undefined)this[_0x487c58(0x1fd)][_0x487c58(0x1a6)]=this[_0x487c58(0x272)]['moduleHealth'];if(this[_0x487c58(0x272)]['moduleSecurity']!==undefined)this['activeModules'][_0x487c58(0x258)]=this['config'][_0x487c58(0x178)];if(this[_0x487c58(0x272)][_0x487c58(0x274)]!==undefined)this['activeModules'][_0x487c58(0x206)]=this[_0x487c58(0x272)][_0x487c58(0x274)];if(this[_0x487c58(0x272)][_0x487c58(0x1ba)]!==undefined)this[_0x487c58(0x1fd)][_0x487c58(0x1c9)]=this[_0x487c58(0x272)][_0x487c58(0x1ba)];if(this['config'][_0x487c58(0x1ab)])this[_0x487c58(0x1fd)]={...this[_0x487c58(0x1fd)],...this[_0x487c58(0x272)]['modules']};this[_0x487c58(0x1e4)]();}async[a0_0x66d5f2(0x1e4)](){const _0x5a71f5=a0_0x66d5f2;await setup[_0x5a71f5(0x220)](this);try{this['isProVersion']=await setup[_0x5a71f5(0x24c)](this['config']['licenseKey']);}catch(_0x3560f1){}if(!this[_0x5a71f5(0x272)]['inactivityThresholdHours']||this['config'][_0x5a71f5(0x1f3)]<0.1)this[_0x5a71f5(0x272)][_0x5a71f5(0x1f3)]=0xc;await setup[_0x5a71f5(0x27a)](this),await setup[_0x5a71f5(0x259)](this);try{const _0x15c6e8=await this[_0x5a71f5(0x273)](_0x5a71f5(0x187)),_0x5a9227=await this[_0x5a71f5(0x273)](_0x5a71f5(0x1ec));_0x15c6e8&&_0x15c6e8['val']&&_0x5a9227&&_0x5a9227['val']&&(Date['now']()-_0x15c6e8['ts']<0x4*0xe10*0x3e8&&(this[_0x5a71f5(0x263)]={'times':JSON[_0x5a71f5(0x1a4)](_0x15c6e8[_0x5a71f5(0x210)]),'sources':JSON[_0x5a71f5(0x1a4)](_0x5a9227[_0x5a71f5(0x210)])}));}catch(_0x44a8ae){}if(this[_0x5a71f5(0x272)]['geminiApiKey'])try{this[_0x5a71f5(0x284)]=new GoogleGenerativeAI(this['config']['geminiApiKey']),this[_0x5a71f5(0x1ea)]=this['genAI'][_0x5a71f5(0x270)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':'application/json'}});}catch(_0x22aa6f){this[_0x5a71f5(0x177)][_0x5a71f5(0x1cc)]('Gemini\x20Init\x20Error:\x20'+_0x22aa6f['message']);}await setup[_0x5a71f5(0x193)](this),await this[_0x5a71f5(0x205)](),schedulers[_0x5a71f5(0x1fc)](this),await this[_0x5a71f5(0x243)]('analysis.visualization.pulse',{'type':_0x5a71f5(0x268),'common':{'name':_0x5a71f5(0x1ff),'type':_0x5a71f5(0x29c),'role':_0x5a71f5(0x1dc),'read':!![],'write':![]},'native':{}}),await this[_0x5a71f5(0x243)](_0x5a71f5(0x1d6),{'type':'state','common':{'name':_0x5a71f5(0x20d),'type':'string','role':'json','read':!![],'write':![],'def':'{\x22today\x22:{},\x20\x22yesterday\x22:{},\x20\x22date\x22:\x22\x22}'},'native':{}}),await this[_0x5a71f5(0x243)](_0x5a71f5(0x171),{'type':_0x5a71f5(0x268),'common':{'name':_0x5a71f5(0x176),'type':_0x5a71f5(0x18a),'role':_0x5a71f5(0x1c7),'read':!![],'write':![],'def':'{\x22history\x22:{}}'},'native':{}}),await this[_0x5a71f5(0x243)]('analysis.health.geminiNight',{'type':_0x5a71f5(0x268),'common':{'name':_0x5a71f5(0x1d8),'type':_0x5a71f5(0x18a),'role':_0x5a71f5(0x1d9),'read':!![],'write':![],'def':_0x5a71f5(0x1f9)},'native':{}}),await this[_0x5a71f5(0x243)](_0x5a71f5(0x18f),{'type':_0x5a71f5(0x268),'common':{'name':_0x5a71f5(0x1f8),'type':_0x5a71f5(0x18a),'role':_0x5a71f5(0x1d9),'read':!![],'write':![],'def':_0x5a71f5(0x1f9)},'native':{}}),await this['setObjectNotExistsAsync'](_0x5a71f5(0x285),{'type':_0x5a71f5(0x268),'common':{'name':_0x5a71f5(0x277),'type':'string','role':'json','read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x5a71f5(0x243)](_0x5a71f5(0x1ac),{'type':_0x5a71f5(0x268),'common':{'name':'Daily\x20Room\x20Details\x20(48x30min)','type':_0x5a71f5(0x18a),'role':_0x5a71f5(0x1c7),'read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x5a71f5(0x243)](_0x5a71f5(0x26e),{'type':_0x5a71f5(0x268),'common':{'name':_0x5a71f5(0x1d3),'type':_0x5a71f5(0x29c),'role':_0x5a71f5(0x1dc),'unit':'%','read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x5a71f5(0x187),{'type':_0x5a71f5(0x268),'common':{'name':'Warm-Up\x20Time','type':_0x5a71f5(0x18a),'role':_0x5a71f5(0x1c7),'read':!![],'write':![]},'native':{}});try{const _0x19ea7b=await this[_0x5a71f5(0x273)](_0x5a71f5(0x234));if(_0x19ea7b&&_0x19ea7b[_0x5a71f5(0x210)]){this[_0x5a71f5(0x269)]=JSON[_0x5a71f5(0x1a4)](_0x19ea7b['val']);if(this[_0x5a71f5(0x1e2)]){const _0x318cd7=await this[_0x5a71f5(0x273)]('LTM.rawEventLog');if(_0x318cd7&&_0x318cd7[_0x5a71f5(0x210)])this[_0x5a71f5(0x20f)]=JSON[_0x5a71f5(0x1a4)](_0x318cd7[_0x5a71f5(0x210)]);}this[_0x5a71f5(0x177)]['info'](_0x5a71f5(0x1a3)+this[_0x5a71f5(0x269)][_0x5a71f5(0x1cf)]+_0x5a71f5(0x1e6));}}catch(_0x3862e8){this[_0x5a71f5(0x269)]=[];}try{const _0x450beb=await this[_0x5a71f5(0x273)](_0x5a71f5(0x23a));if(_0x450beb&&_0x450beb[_0x5a71f5(0x210)])this['dailyDigests']=JSON[_0x5a71f5(0x1a4)](_0x450beb[_0x5a71f5(0x210)]);}catch(_0xe4ba50){this['dailyDigests']=[];}const _0x2a83ec=this[_0x5a71f5(0x1e0)][_0x5a71f5(0x1cf)]>=(this[_0x5a71f5(0x272)]['minDaysForBaseline']||0x7)?_0x5a71f5(0x1df)+this[_0x5a71f5(0x1e0)][_0x5a71f5(0x1cf)]+_0x5a71f5(0x1fe):'Lernphase\x20('+this[_0x5a71f5(0x1e0)][_0x5a71f5(0x1cf)]+'/'+(this[_0x5a71f5(0x272)][_0x5a71f5(0x218)]||0x7)+')';await this[_0x5a71f5(0x294)]('LTM.baselineStatus',{'val':_0x2a83ec,'ack':!![]}),this[_0x5a71f5(0x276)]('analysis.trigger'),this['subscribeStates'](_0x5a71f5(0x183)),this['subscribeStates'](_0x5a71f5(0x203));this[_0x5a71f5(0x272)]['infrasoundEnabled']&&this[_0x5a71f5(0x272)][_0x5a71f5(0x251)]&&this[_0x5a71f5(0x1fd)][_0x5a71f5(0x258)]&&this['subscribeForeignStates'](this[_0x5a71f5(0x272)][_0x5a71f5(0x251)]);const _0x5144ce=this[_0x5a71f5(0x272)][_0x5a71f5(0x191)];if(_0x5144ce)for(const _0xa46001 of _0x5144ce){await this[_0x5a71f5(0x256)](_0xa46001['id']);}const _0xa589e4=this[_0x5a71f5(0x272)][_0x5a71f5(0x240)];if(_0xa589e4)for(const _0x3b0a7c of _0xa589e4){await this['subscribeForeignStatesAsync'](_0x3b0a7c);}const _0x57607a=require(_0x5a71f5(0x1e1));if(this['historyJob'])this['historyJob'][_0x5a71f5(0x1b5)]();this[_0x5a71f5(0x19e)]=_0x57607a[_0x5a71f5(0x275)]('59\x2023\x20*\x20*\x20*',()=>{const _0x5dff48=_0x5a71f5;this[_0x5dff48(0x289)]();}),setTimeout(()=>this[_0x5a71f5(0x1bc)](),0x1388);if(this[_0x5a71f5(0x21c)])clearInterval(this[_0x5a71f5(0x21c)]);this[_0x5a71f5(0x1d0)](),this[_0x5a71f5(0x21c)]=setInterval(async()=>{await this['integrateRoomTime']();},0x3c*0x3e8);if(this['healthTrendInterval'])clearInterval(this['healthTrendInterval']);this[_0x5a71f5(0x16a)]=setInterval(()=>{const _0x356bde=_0x5a71f5;this['isProVersion']&&this['activeModules'][_0x356bde(0x1a6)]&&this[_0x356bde(0x21e)]();},0x4*0x3c*0x3c*0x3e8);const _0x574fd5=path[_0x5a71f5(0x231)](__dirname,'.venv',_0x5a71f5(0x16e),_0x5a71f5(0x1c2));pythonBridge['startService'](this,_0x574fd5);}[a0_0x66d5f2(0x1f4)](_0x1b9923){const _0x522aba=a0_0x66d5f2;if(this['historyJob'])this[_0x522aba(0x19e)][_0x522aba(0x1b5)]();this[_0x522aba(0x289)]()[_0x522aba(0x21d)](()=>{const _0x288102=_0x522aba;if(this[_0x288102(0x1b1)])clearInterval(this[_0x288102(0x1b1)]);if(this[_0x288102(0x21c)])clearInterval(this['roomIntegratorTimer']);recorder[_0x288102(0x197)](this),pythonBridge[_0x288102(0x1a2)](this),_0x1b9923();});}async[a0_0x66d5f2(0x1bc)](){const _0xaf4548=a0_0x66d5f2;if(!this[_0xaf4548(0x269)]||this[_0xaf4548(0x269)][_0xaf4548(0x1cf)]===0x0){this[_0xaf4548(0x177)][_0xaf4548(0x18e)](_0xaf4548(0x238));return;}this['log']['info'](_0xaf4548(0x1d4)+this[_0xaf4548(0x269)][_0xaf4548(0x1cf)]+_0xaf4548(0x18b));const _0x30a887=new Date()[_0xaf4548(0x25a)](0x0,0x0,0x0,0x0),_0x4d9d48=_0xaf4548(0x171);let _0xa5b66d={'history':{},'date':new Date()[_0xaf4548(0x1de)]()};const _0xeb97da=_0xaf4548(0x285),_0x37c40b='analysis.health.todayRoomDetails';let _0x50223d=new Array(0x30)['fill'](0x0),_0x47df8b=Array['from']({'length':0x30},()=>[]);this[_0xaf4548(0x269)][_0xaf4548(0x184)](_0x38c35e=>{const _0x28893e=_0xaf4548;if(_0x38c35e[_0x28893e(0x245)]>=_0x30a887){if(recorder['isRelevantActivity'](_0x38c35e[_0x28893e(0x248)],_0x38c35e[_0x28893e(0x1dc)])){const _0x54698a=new Date(_0x38c35e[_0x28893e(0x245)]),_0x5b4158=_0x54698a[_0x28893e(0x28e)]()*0x2+(_0x54698a[_0x28893e(0x233)]()>=0x1e?0x1:0x0);if(_0x5b4158<0x30){_0x50223d[_0x5b4158]++;const _0x27a4ca=_0x38c35e[_0x28893e(0x26c)]||_0x38c35e['name']||'?';let _0xf003ad=_0x47df8b[_0x5b4158];!_0xf003ad[_0x28893e(0x1bb)](_0x27a4ca)&&_0xf003ad['push'](_0x27a4ca);}const _0x9cb857=_0x54698a['getHours']();let _0x25704e=_0x38c35e[_0x28893e(0x26c)]||_0x28893e(0x20e);const _0x24c1ff=(this[_0x28893e(0x272)]['devices']||[])['find'](_0xd94815=>_0xd94815['location']===_0x25704e);if(_0x24c1ff)_0x25704e=_0x24c1ff[_0x28893e(0x26c)];if(!_0xa5b66d[_0x28893e(0x1e7)][_0x25704e])_0xa5b66d[_0x28893e(0x1e7)][_0x25704e]=new Array(0x18)[_0x28893e(0x1fb)](0x0);if(_0xa5b66d[_0x28893e(0x1e7)][_0x25704e][_0x9cb857]<0x3c)_0xa5b66d[_0x28893e(0x1e7)][_0x25704e][_0x9cb857]++;}}});const _0x2e364a=await this['getStateAsync'](_0x4d9d48);(!_0x2e364a||!_0x2e364a['val']||_0x2e364a[_0xaf4548(0x210)]==='{}'||_0x2e364a['val'][_0xaf4548(0x1bb)](_0xaf4548(0x1d1)))&&await this[_0xaf4548(0x294)](_0x4d9d48,{'val':JSON[_0xaf4548(0x28b)](_0xa5b66d),'ack':!![]}),await this['setStateAsync'](_0xeb97da,{'val':JSON[_0xaf4548(0x28b)](_0x50223d),'ack':!![]}),await this[_0xaf4548(0x294)](_0x37c40b,{'val':JSON[_0xaf4548(0x28b)](_0x47df8b),'ack':!![]}),this[_0xaf4548(0x177)][_0xaf4548(0x1cb)](_0xaf4548(0x1aa));}async[a0_0x66d5f2(0x289)](){const _0x1ae7c4=a0_0x66d5f2;if(!this[_0x1ae7c4(0x1fd)][_0x1ae7c4(0x1a6)])return;const _0x329078=new Date()[_0x1ae7c4(0x260)]()['split']('T')[0x0];this['log']['debug'](_0x1ae7c4(0x28f)+_0x329078+_0x1ae7c4(0x16f));try{const [_0x30c127,_0x3a2712,_0x21afd7,_0x222fdc,_0x2e4a89,_0x4e7765]=await Promise[_0x1ae7c4(0x1c8)]([this[_0x1ae7c4(0x273)](_0x1ae7c4(0x171)),this[_0x1ae7c4(0x273)]('analysis.health.geminiNight'),this[_0x1ae7c4(0x273)]('analysis.health.geminiDay'),this[_0x1ae7c4(0x273)](_0x1ae7c4(0x17b)),this[_0x1ae7c4(0x273)](_0x1ae7c4(0x285)),this[_0x1ae7c4(0x273)]('analysis.health.activityTrend')]),_0x6e7ce6=this[_0x1ae7c4(0x269)][_0x1ae7c4(0x1f2)](_0x2b38b5=>_0x2b38b5[_0x1ae7c4(0x245)]>=new Date()[_0x1ae7c4(0x25a)](0x0,0x0,0x0,0x0)&&(_0x2b38b5[_0x1ae7c4(0x181)][_0x1ae7c4(0x1f7)]()['includes'](_0x1ae7c4(0x1d5))||_0x2b38b5[_0x1ae7c4(0x181)][_0x1ae7c4(0x1f7)]()[_0x1ae7c4(0x1bb)](_0x1ae7c4(0x19b)))&&(_0x2b38b5[_0x1ae7c4(0x1dc)]===!![]||_0x2b38b5[_0x1ae7c4(0x1dc)]==='open'))[_0x1ae7c4(0x1cf)];let _0x40ee2f=0x55;if(_0x4e7765&&_0x4e7765['val']!==undefined)_0x40ee2f=Math[_0x1ae7c4(0x262)](0x64,Math[_0x1ae7c4(0x22b)](0x14,Math['round'](0x50+Number(_0x4e7765[_0x1ae7c4(0x210)])*0x5)));const _0x400a1d={'date':_0x329078,'timestamp':Date[_0x1ae7c4(0x201)](),'roomHistory':_0x30c127?.[_0x1ae7c4(0x210)]?JSON['parse'](_0x30c127[_0x1ae7c4(0x210)]):{},'geminiNight':_0x3a2712?.[_0x1ae7c4(0x210)]||_0x1ae7c4(0x1dd),'geminiDay':_0x21afd7?.[_0x1ae7c4(0x210)]||_0x1ae7c4(0x1dd),'anomalyScore':_0x222fdc?.[_0x1ae7c4(0x210)]||0.1,'todayVector':_0x2e4a89?.[_0x1ae7c4(0x210)]?JSON[_0x1ae7c4(0x1a4)](_0x2e4a89[_0x1ae7c4(0x210)]):new Array(0x30)[_0x1ae7c4(0x1fb)](0x0),'batteryLevel':_0x40ee2f,'freshAirCount':_0x6e7ce6,'eventHistory':this[_0x1ae7c4(0x269)]},_0x43c33a=utils['getAbsoluteDefaultDataDir'](),_0x456500=path[_0x1ae7c4(0x231)](_0x43c33a,_0x1ae7c4(0x25d),_0x1ae7c4(0x1e7));if(!fs[_0x1ae7c4(0x230)](_0x456500))fs[_0x1ae7c4(0x1da)](_0x456500,{'recursive':!![]});const _0x54a4b7=path[_0x1ae7c4(0x231)](_0x456500,_0x329078+'.json');fs[_0x1ae7c4(0x237)](_0x54a4b7,JSON[_0x1ae7c4(0x28b)](_0x400a1d)),this[_0x1ae7c4(0x177)][_0x1ae7c4(0x1cb)](_0x1ae7c4(0x215)+_0x54a4b7);}catch(_0x265c1e){this[_0x1ae7c4(0x177)]['error'](_0x1ae7c4(0x252)+_0x265c1e[_0x1ae7c4(0x1cd)]);}}async['integrateRoomTime'](){const _0x4961bd=a0_0x66d5f2;if(!this[_0x4961bd(0x166)])return;try{let _0x16a27c=null;try{const _0x503dea=await this[_0x4961bd(0x273)]('analysis.prediction.trackerTopRoom'),_0x49284f=await this[_0x4961bd(0x273)](_0x4961bd(0x29a));if(_0x503dea&&_0x503dea[_0x4961bd(0x210)]&&_0x49284f&&_0x49284f['val']&&_0x49284f[_0x4961bd(0x210)]>0.3){if(_0x503dea['val']!==_0x4961bd(0x20e)&&_0x503dea[_0x4961bd(0x210)]!==_0x4961bd(0x298))_0x16a27c=_0x503dea[_0x4961bd(0x210)];}}catch(_0xee5f43){}if(!_0x16a27c){const _0x46c589=this['config'][_0x4961bd(0x191)]||[];for(const _0x215cd5 of _0x46c589){if(_0x215cd5[_0x4961bd(0x248)]===_0x4961bd(0x1e9)&&_0x215cd5[_0x4961bd(0x26c)])try{const _0x40ed7f=await this[_0x4961bd(0x27f)](_0x215cd5['id']);if(_0x40ed7f&&(_0x40ed7f[_0x4961bd(0x210)]===!![]||_0x40ed7f[_0x4961bd(0x210)]==='on'||_0x40ed7f['val']===0x1)){_0x16a27c=_0x215cd5[_0x4961bd(0x26c)];break;}}catch(_0x2c76b0){}}}if(!_0x16a27c)return;const _0x21ba4e=this[_0x4961bd(0x272)][_0x4961bd(0x191)]||[];let _0x36151d=_0x16a27c;const _0x475f35=_0x21ba4e[_0x4961bd(0x1b6)](_0x33d76c=>_0x33d76c['location']&&_0x33d76c[_0x4961bd(0x26c)][_0x4961bd(0x1f7)]()===_0x16a27c[_0x4961bd(0x1f7)]());if(_0x475f35)_0x36151d=_0x475f35[_0x4961bd(0x26c)];const _0x46e5f0=_0x4961bd(0x171),_0x3b11da=await this[_0x4961bd(0x273)](_0x46e5f0),_0x39fb87=new Date()['toLocaleDateString']();let _0x38b21d={'history':{},'date':_0x39fb87};if(_0x3b11da&&_0x3b11da['val'])try{_0x38b21d=JSON[_0x4961bd(0x1a4)](_0x3b11da[_0x4961bd(0x210)]);}catch(_0x279514){}_0x38b21d['date']!==_0x39fb87&&(_0x38b21d[_0x4961bd(0x1e7)]={},_0x38b21d[_0x4961bd(0x24a)]=_0x39fb87);if(!_0x38b21d[_0x4961bd(0x1e7)][_0x36151d])_0x38b21d[_0x4961bd(0x1e7)][_0x36151d]=new Array(0x18)[_0x4961bd(0x1fb)](0x0);const _0x1ca5a2=new Date()[_0x4961bd(0x28e)]();if(_0x38b21d[_0x4961bd(0x1e7)][_0x36151d][_0x1ca5a2]<0x3c)_0x38b21d[_0x4961bd(0x1e7)][_0x36151d][_0x1ca5a2]++;await this[_0x4961bd(0x294)](_0x46e5f0,{'val':JSON[_0x4961bd(0x28b)](_0x38b21d),'ack':!![]});}catch(_0x17c9af){this[_0x4961bd(0x177)][_0x4961bd(0x18e)](_0x4961bd(0x286)+_0x17c9af[_0x4961bd(0x1cd)]);}}async[a0_0x66d5f2(0x192)](_0x497095){const _0x4c4d8f=a0_0x66d5f2;if(typeof _0x497095===_0x4c4d8f(0x20b)&&_0x497095['message']){if(_0x497095[_0x4c4d8f(0x1ed)]===_0x4c4d8f(0x1a9)){const _0x40f642=_0x497095['message']['date'],_0x36c472=utils[_0x4c4d8f(0x232)](),_0x2c82ac=path[_0x4c4d8f(0x231)](_0x36c472,'cogni-living','history',_0x40f642+_0x4c4d8f(0x17c));if(fs[_0x4c4d8f(0x230)](_0x2c82ac))try{const _0x3ce4d7=JSON[_0x4c4d8f(0x1a4)](fs[_0x4c4d8f(0x24e)](_0x2c82ac,_0x4c4d8f(0x1be)));this[_0x4c4d8f(0x23e)](_0x497095[_0x4c4d8f(0x195)],_0x497095[_0x4c4d8f(0x1ed)],{'success':!![],'data':_0x3ce4d7},_0x497095[_0x4c4d8f(0x1b3)]);}catch(_0x2883fd){this['sendTo'](_0x497095['from'],_0x497095[_0x4c4d8f(0x1ed)],{'success':![],'error':'Corrupt'},_0x497095[_0x4c4d8f(0x1b3)]);}else this['sendTo'](_0x497095[_0x4c4d8f(0x195)],_0x497095['command'],{'success':![],'error':_0x4c4d8f(0x213)},_0x497095[_0x4c4d8f(0x1b3)]);}else{if(_0x497095['command']===_0x4c4d8f(0x249)){const _0x220272=this['dailyDigests'][_0x4c4d8f(0x1cf)];let _0xe76bab=new Array(0x30)[_0x4c4d8f(0x1fb)](0x0),_0x4f2657=Array[_0x4c4d8f(0x195)]({'length':0x30},()=>[]);try{const _0x4657c9=await this[_0x4c4d8f(0x273)](_0x4c4d8f(0x285));if(_0x4657c9&&_0x4657c9[_0x4c4d8f(0x210)])_0xe76bab=JSON[_0x4c4d8f(0x1a4)](_0x4657c9[_0x4c4d8f(0x210)]);const _0x45de6e=await this[_0x4c4d8f(0x273)]('analysis.health.todayRoomDetails');if(_0x45de6e&&_0x45de6e['val'])_0x4f2657=JSON['parse'](_0x45de6e[_0x4c4d8f(0x210)]);}catch(_0x1221bf){}let _0x455e2d=new Array(0x30)[_0x4c4d8f(0x1fb)](0x0);try{const _0x6497c=new Date();_0x6497c['setDate'](_0x6497c['getDate']()-0x1);const _0x2fa076=_0x6497c[_0x4c4d8f(0x260)]()[_0x4c4d8f(0x17d)]('T')[0x0],_0x54f4f3=utils[_0x4c4d8f(0x232)](),_0x3e2ec3=path[_0x4c4d8f(0x231)](_0x54f4f3,_0x4c4d8f(0x25d),'history',_0x2fa076+'.json');if(fs['existsSync'](_0x3e2ec3)){const _0x463e47=JSON[_0x4c4d8f(0x1a4)](fs[_0x4c4d8f(0x24e)](_0x3e2ec3,_0x4c4d8f(0x1be)));if(_0x463e47&&_0x463e47['todayVector'])_0x455e2d=_0x463e47['todayVector'];}}catch(_0x1e022e){}let _0x11072f={'today':{},'yesterday':{}};try{const _0x1e60cf=await this[_0x4c4d8f(0x273)]('analysis.activity.roomStats');if(_0x1e60cf&&_0x1e60cf['val'])_0x11072f=JSON['parse'](_0x1e60cf[_0x4c4d8f(0x210)]);}catch(_0x1e288c){}let _0x4580a7=null;try{const _0x15bd93=await this[_0x4c4d8f(0x273)](_0x4c4d8f(0x26e));if(_0x15bd93)_0x4580a7=_0x15bd93['val'];}catch(_0x9b2648){}if(_0x4580a7===undefined||_0x4580a7===null){const _0x10169a=_0xe76bab[_0x4c4d8f(0x228)]((_0x5a1100,_0x1ad1e3)=>_0x5a1100+_0x1ad1e3,0x0),_0x16eb06=Math['min'](0x2,Math[_0x4c4d8f(0x22b)](-0x2,(0x64-_0x10169a)/0x32));_0x4580a7=_0x16eb06;}let _0x20f08f=![],_0x1eb22e='',_0x17a607='',_0x1b4b94='';try{const _0x2a6cf2=await this[_0x4c4d8f(0x273)](_0x4c4d8f(0x185));if(_0x2a6cf2&&_0x2a6cf2['val']){_0x20f08f=!![];const _0x5cc267=await this[_0x4c4d8f(0x273)](_0x4c4d8f(0x25c));_0x1eb22e=_0x5cc267?_0x5cc267[_0x4c4d8f(0x210)]:'';const _0xfd8e65=await this['getStateAsync'](_0x4c4d8f(0x25e));_0x17a607=_0xfd8e65?_0xfd8e65[_0x4c4d8f(0x210)]:'';const _0x51d2cf=await this[_0x4c4d8f(0x273)](_0x4c4d8f(0x287));_0x1b4b94=_0x51d2cf?_0x51d2cf['val']:'';}}catch(_0x797515){}const _0x18efdf=await this[_0x4c4d8f(0x170)](),_0x39c183=(this['config']['devices']||[])[_0x4c4d8f(0x264)](_0x47dd92=>_0x47dd92[_0x4c4d8f(0x209)]),_0x25db34=_0x18efdf&&_0x39c183;let _0x2ac9fb='';try{const _0xcd4dfd=await this[_0x4c4d8f(0x273)](_0x4c4d8f(0x196));if(_0xcd4dfd&&_0xcd4dfd['val'])_0x2ac9fb=_0xcd4dfd[_0x4c4d8f(0x210)];}catch(_0x1b2fda){}this[_0x4c4d8f(0x23e)](_0x497095[_0x4c4d8f(0x195)],_0x497095['command'],{'success':!![],'eventHistory':this['eventHistory']['slice'](0x0,0x7d0),'stats':{'digestCount':_0x220272,'isPresent':this[_0x4c4d8f(0x166)],'hourlyActivity':_0xe76bab,'hourlyDetails':_0x4f2657,'yesterdayActivity':_0x455e2d,'solarActive':_0x25db34,'presenceWho':_0x2ac9fb,'roomStats':_0x11072f,'activityTrend':_0x4580a7,'modules':this[_0x4c4d8f(0x1fd)]},'automation':{'detected':_0x20f08f,'description':_0x1eb22e,'targetId':_0x17a607,'targetValue':_0x1b4b94}},_0x497095[_0x4c4d8f(0x1b3)]);}else{if(_0x497095['command']===_0x4c4d8f(0x1ee))try{const _0x240a7d=await automation['scanThermostats'](this);this['sendTo'](_0x497095['from'],_0x497095[_0x4c4d8f(0x1ed)],{'success':!![],'results':_0x240a7d},_0x497095['callback']);}catch(_0x3aa310){this[_0x4c4d8f(0x23e)](_0x497095[_0x4c4d8f(0x195)],_0x497095['command'],{'success':![],'error':_0x3aa310[_0x4c4d8f(0x1cd)]},_0x497095[_0x4c4d8f(0x1b3)]);}else{if(_0x497095[_0x4c4d8f(0x1ed)]===_0x4c4d8f(0x246))try{const _0x5854d5=await scanner[_0x4c4d8f(0x281)](this,_0x497095[_0x4c4d8f(0x1cd)]||{});this['sendTo'](_0x497095[_0x4c4d8f(0x195)],_0x497095['command'],{'success':!![],'devices':_0x5854d5},_0x497095['callback']);}catch(_0x17becc){}else{if(_0x497095[_0x4c4d8f(0x1ed)]===_0x4c4d8f(0x1d2)){const _0x2272ad=await this['getForeignObjectsAsync'](_0x4c4d8f(0x1f1),_0x4c4d8f(0x1fa)),_0x3d98a2=[];if(_0x2272ad)for(const _0x3199ba in _0x2272ad){let _0x4209cc=_0x2272ad[_0x3199ba][_0x4c4d8f(0x226)][_0x4c4d8f(0x181)];if(_0x4209cc&&typeof _0x4209cc===_0x4c4d8f(0x20b))_0x4209cc=_0x4209cc['de']||_0x4209cc['en']||Object[_0x4c4d8f(0x20c)](_0x4209cc)[0x0]||JSON['stringify'](_0x4209cc);_0x3d98a2[_0x4c4d8f(0x1a8)]({'id':_0x3199ba,'name':String(_0x4209cc||_0x3199ba)});}const _0x561d9c=await this[_0x4c4d8f(0x261)](_0x4c4d8f(0x1bf),'enum'),_0x18ba02=[];if(_0x561d9c)for(const _0x415a7c in _0x561d9c){let _0x2dd5fe=_0x561d9c[_0x415a7c][_0x4c4d8f(0x226)][_0x4c4d8f(0x181)];if(_0x2dd5fe&&typeof _0x2dd5fe===_0x4c4d8f(0x20b))_0x2dd5fe=_0x2dd5fe['de']||_0x2dd5fe['en']||Object[_0x4c4d8f(0x20c)](_0x2dd5fe)[0x0]||JSON[_0x4c4d8f(0x28b)](_0x2dd5fe);_0x18ba02[_0x4c4d8f(0x1a8)](String(_0x2dd5fe||_0x415a7c['split']('.')[_0x4c4d8f(0x1f5)]()));}this['sendTo'](_0x497095[_0x4c4d8f(0x195)],_0x497095[_0x4c4d8f(0x1ed)],{'success':!![],'enums':_0x3d98a2,'rooms':_0x18ba02},_0x497095['callback']);}else{if(_0x497095[_0x4c4d8f(0x1ed)]===_0x4c4d8f(0x1b4))try{const _0xd79f2a=await this[_0x4c4d8f(0x26b)](_0x4c4d8f(0x211),_0x4c4d8f(0x1db),{'startkey':'system.adapter.ical.','endkey':_0x4c4d8f(0x190)}),_0x3cdd98=new Set();if(_0xd79f2a&&_0xd79f2a['rows'])for(const _0xb23e44 of _0xd79f2a[_0x4c4d8f(0x283)]){const _0x2a0138=_0xb23e44['id'][_0x4c4d8f(0x282)](_0x4c4d8f(0x18c),''),_0x5c2ab5=await this[_0x4c4d8f(0x27f)](_0x2a0138+_0x4c4d8f(0x1ae));let _0x192c4c=![];if(_0x5c2ab5&&_0x5c2ab5['val']){const _0x2c4fcb=typeof _0x5c2ab5['val']===_0x4c4d8f(0x18a)?JSON[_0x4c4d8f(0x1a4)](_0x5c2ab5[_0x4c4d8f(0x210)]):_0x5c2ab5[_0x4c4d8f(0x210)];Array[_0x4c4d8f(0x292)](_0x2c4fcb)&&_0x2c4fcb['forEach'](_0x27c167=>{const _0x2c4950=_0x4c4d8f;_0x27c167[_0x2c4950(0x1eb)]&&(_0x3cdd98[_0x2c4950(0x279)](_0x27c167[_0x2c4950(0x1eb)]),_0x192c4c=!![]);});}!_0x192c4c&&_0x3cdd98['add'](_0x2a0138);}const _0x683b85=Array['from'](_0x3cdd98);if(_0x683b85['length']===0x0)_0x683b85['push'](_0x4c4d8f(0x26a));this['sendTo'](_0x497095['from'],_0x497095[_0x4c4d8f(0x1ed)],{'success':!![],'names':_0x683b85},_0x497095[_0x4c4d8f(0x1b3)]);}catch(_0x46b243){this['sendTo'](_0x497095[_0x4c4d8f(0x195)],_0x497095[_0x4c4d8f(0x1ed)],{'success':![],'error':_0x4c4d8f(0x19f)+_0x46b243['message']},_0x497095[_0x4c4d8f(0x1b3)]);}else{if(_0x497095[_0x4c4d8f(0x1ed)]===_0x4c4d8f(0x18d))try{await automation['updateSchedulePreview'](this),this[_0x4c4d8f(0x23e)](_0x497095['from'],_0x497095[_0x4c4d8f(0x1ed)],{'success':!![]},_0x497095[_0x4c4d8f(0x1b3)]);}catch(_0xb2adf5){this[_0x4c4d8f(0x177)][_0x4c4d8f(0x18e)](_0x4c4d8f(0x180)+_0xb2adf5[_0x4c4d8f(0x1cd)]),this['sendTo'](_0x497095[_0x4c4d8f(0x195)],_0x497095[_0x4c4d8f(0x1ed)],{'success':![],'error':_0xb2adf5[_0x4c4d8f(0x1cd)]},_0x497095['callback']);}else{if(_0x497095[_0x4c4d8f(0x1ed)]===_0x4c4d8f(0x1c5))try{const _0x29df9e=_0x497095[_0x4c4d8f(0x1cd)]?_0x497095[_0x4c4d8f(0x1cd)][_0x4c4d8f(0x207)]:'';if(!_0x29df9e)throw new Error('Kein\x20API\x20Key\x20√ºbergeben.');const _0x23061d=new GoogleGenerativeAI(_0x29df9e),_0x233b2d=_0x23061d[_0x4c4d8f(0x270)]({'model':GEMINI_MODEL}),_0x14406e=await _0x233b2d[_0x4c4d8f(0x1b2)]('Say\x20Hello'),_0x52b837=await _0x14406e[_0x4c4d8f(0x21b)],_0x42ae71=_0x52b837[_0x4c4d8f(0x1d9)]();this[_0x4c4d8f(0x23e)](_0x497095[_0x4c4d8f(0x195)],_0x497095[_0x4c4d8f(0x1ed)],{'success':!![],'message':_0x4c4d8f(0x223)+_0x42ae71[_0x4c4d8f(0x164)](0x0,0x14)+'...'},_0x497095[_0x4c4d8f(0x1b3)]);}catch(_0x38cae9){this[_0x4c4d8f(0x23e)](_0x497095[_0x4c4d8f(0x195)],_0x497095[_0x4c4d8f(0x1ed)],{'success':![],'message':_0x38cae9[_0x4c4d8f(0x1cd)]},_0x497095['callback']);}else{if(_0x497095[_0x4c4d8f(0x1ed)]===_0x4c4d8f(0x241))try{const _0x37b2f2=await this['checkSolarCondition'](),_0x573e69=await this[_0x4c4d8f(0x26b)](_0x4c4d8f(0x211),_0x4c4d8f(0x1db),{'startkey':_0x4c4d8f(0x186),'endkey':'system.adapter.ical.È¶ô'}),_0x57ae0f=_0x573e69&&_0x573e69['rows']?_0x573e69[_0x4c4d8f(0x283)][_0x4c4d8f(0x1cf)]:0x0;this[_0x4c4d8f(0x23e)](_0x497095[_0x4c4d8f(0x195)],_0x497095[_0x4c4d8f(0x1ed)],{'success':!![],'weather':_0x4c4d8f(0x28a)+_0x37b2f2+_0x4c4d8f(0x189)+(this[_0x4c4d8f(0x290)][this[_0x4c4d8f(0x272)][_0x4c4d8f(0x253)]]||'?')+'¬∞C','calendar':_0x57ae0f+_0x4c4d8f(0x250)},_0x497095[_0x4c4d8f(0x1b3)]);}catch(_0x48dfd9){this[_0x4c4d8f(0x23e)](_0x497095['from'],_0x497095[_0x4c4d8f(0x1ed)],{'success':![]},_0x497095['callback']);}}}}}}}}}}}[a0_0x66d5f2(0x21e)](){const _0x3b813f=a0_0x66d5f2;if(!this[_0x3b813f(0x1fd)]['health'])return;this[_0x3b813f(0x177)]['debug'](_0x3b813f(0x297));try{const _0x265e8b=this[_0x3b813f(0x20f)]||[];pythonBridge[_0x3b813f(0x22d)](this,_0x3b813f(0x1b0),{'events':_0x265e8b});}catch(_0x26313c){this[_0x3b813f(0x177)][_0x3b813f(0x18e)](_0x3b813f(0x1ef));}}async[a0_0x66d5f2(0x1c4)](_0x7858a0,_0x1b8cf9){const _0x5f3486=a0_0x66d5f2;if(!_0x1b8cf9||this[_0x5f3486(0x23f)])return;if(_0x7858a0['includes'](_0x5f3486(0x224))&&_0x7858a0['endsWith']('communicate.request')&&_0x1b8cf9[_0x5f3486(0x210)])return;if(this[_0x5f3486(0x272)][_0x5f3486(0x21f)]&&_0x7858a0===this[_0x5f3486(0x272)][_0x5f3486(0x251)]&&this[_0x5f3486(0x1fd)][_0x5f3486(0x258)]){this[_0x5f3486(0x267)](_0x1b8cf9[_0x5f3486(0x210)]);return;}if(_0x1b8cf9[_0x5f3486(0x19d)]&&_0x7858a0[_0x5f3486(0x1e5)](_0x5f3486(0x257)))return;if(_0x7858a0===this['namespace']+_0x5f3486(0x1bd)){if(_0x1b8cf9[_0x5f3486(0x210)]&&Object[_0x5f3486(0x20c)](setup[_0x5f3486(0x1f0)])[_0x5f3486(0x1bb)](_0x1b8cf9[_0x5f3486(0x210)])){this[_0x5f3486(0x1a5)]=_0x1b8cf9[_0x5f3486(0x210)];if(_0x1b8cf9[_0x5f3486(0x210)]===setup[_0x5f3486(0x1f0)][_0x5f3486(0x1d7)])await recorder[_0x5f3486(0x169)](this,![]);else await recorder[_0x5f3486(0x169)](this,!![]);if(this[_0x5f3486(0x1e2)]){let _0x5c5971=![],_0x16a872=0x0,_0x371493=_0x5f3486(0x266);if(this['currentSystemMode']===_0x5f3486(0x295))_0x5c5971=!![],_0x16a872=0x168,_0x371493='Party\x20Mode';else this[_0x5f3486(0x1a5)]===_0x5f3486(0x299)&&(_0x5c5971=!![],_0x16a872=0x5a0,_0x371493=_0x5f3486(0x167));pythonBridge[_0x5f3486(0x22d)](this,_0x5f3486(0x204),{'active':_0x5c5971,'duration':_0x16a872,'label':_0x371493}),await this[_0x5f3486(0x294)](_0x5f3486(0x21a),{'val':JSON[_0x5f3486(0x28b)]({'active':_0x5c5971,'label':_0x371493,'timestamp':Date[_0x5f3486(0x201)]()}),'ack':!![]});}}if(!_0x1b8cf9[_0x5f3486(0x19d)])this[_0x5f3486(0x16c)](_0x7858a0,{'val':this[_0x5f3486(0x1a5)],'ack':!![]});return;}if(_0x7858a0[_0x5f3486(0x1e5)](_0x5f3486(0x1ec))&&_0x1b8cf9['ack'])this['protectAiMemory'](_0x1b8cf9[_0x5f3486(0x210)]);if(_0x7858a0[_0x5f3486(0x1e5)](_0x5f3486(0x187))&&_0x1b8cf9[_0x5f3486(0x19d)]&&this[_0x5f3486(0x1fd)]['energy'])automation[_0x5f3486(0x26f)](this);if(!_0x1b8cf9[_0x5f3486(0x19d)]){if(_0x7858a0['includes'](_0x5f3486(0x219))&&_0x1b8cf9[_0x5f3486(0x210)]){this[_0x5f3486(0x16c)](_0x7858a0,{'val':![],'ack':!![]}),aiAgent[_0x5f3486(0x1ad)](this);return;}if(_0x7858a0[_0x5f3486(0x1bb)](_0x5f3486(0x25b))&&_0x1b8cf9[_0x5f3486(0x210)]){this['setState'](_0x7858a0,{'val':![],'ack':!![]});if(this[_0x5f3486(0x1e2)])aiAgent[_0x5f3486(0x1b7)](this,pythonBridge);return;}if(_0x7858a0[_0x5f3486(0x1bb)]('triggerBriefing')&&_0x1b8cf9[_0x5f3486(0x210)]){this['setState'](_0x7858a0,{'val':![],'ack':!![]}),aiAgent['sendMorningBriefing'](this);return;}if(_0x7858a0[_0x5f3486(0x1bb)]('automation.triggerAction')&&_0x1b8cf9[_0x5f3486(0x210)]){this[_0x5f3486(0x16c)](_0x7858a0,{'val':![],'ack':!![]}),aiAgent[_0x5f3486(0x22f)](this);return;}if(_0x7858a0['includes']('analysis.training.triggerSecurity')&&_0x1b8cf9['val']){this[_0x5f3486(0x16c)](_0x7858a0,{'val':![],'ack':!![]});if(this[_0x5f3486(0x1e2)])try{const _0x1df5b0=await this[_0x5f3486(0x273)](_0x5f3486(0x265));if(_0x1df5b0&&_0x1df5b0[_0x5f3486(0x210)]){const _0x53cb15=JSON[_0x5f3486(0x1a4)](_0x1df5b0[_0x5f3486(0x210)]);this[_0x5f3486(0x294)](_0x5f3486(0x199),{'val':_0x5f3486(0x296),'ack':!![]}),pythonBridge[_0x5f3486(0x22d)](this,_0x5f3486(0x1b8),{'sequences':_0x53cb15});}}catch(_0x2ee4e4){}return;}if(_0x7858a0[_0x5f3486(0x1bb)](_0x5f3486(0x203))&&_0x1b8cf9[_0x5f3486(0x210)]){this[_0x5f3486(0x16c)](_0x7858a0,{'val':![],'ack':!![]});if(this[_0x5f3486(0x1e2)])try{this[_0x5f3486(0x21e)]();const _0x4f5a67=await this['getStateAsync'](_0x5f3486(0x23a));if(_0x4f5a67&&_0x4f5a67[_0x5f3486(0x210)])pythonBridge[_0x5f3486(0x22d)](this,_0x5f3486(0x1c0),{'digests':JSON['parse'](_0x4f5a67['val'])});aiAgent[_0x5f3486(0x16b)](this,_0x5f3486(0x254)),setTimeout(()=>aiAgent[_0x5f3486(0x16b)](this,_0x5f3486(0x24d)),0x2ee0);}catch(_0x5586eb){}return;}if(_0x7858a0[_0x5f3486(0x1bb)]('analysis.training.triggerEnergy')&&_0x1b8cf9['val']){this[_0x5f3486(0x16c)](_0x7858a0,{'val':![],'ack':!![]});if(this[_0x5f3486(0x1e2)])try{const _0x3f1869=await this[_0x5f3486(0x273)]('LTM.trainingData.thermodynamics');if(_0x3f1869&&_0x3f1869[_0x5f3486(0x210)])pythonBridge[_0x5f3486(0x22d)](this,_0x5f3486(0x280),{'points':JSON[_0x5f3486(0x1a4)](_0x3f1869[_0x5f3486(0x210)])});}catch(_0x4b2208){}return;}if(_0x7858a0[_0x5f3486(0x1bb)](_0x5f3486(0x29b))&&_0x1b8cf9[_0x5f3486(0x210)]){this[_0x5f3486(0x16c)](_0x7858a0,{'val':![],'ack':!![]});if(this[_0x5f3486(0x1e2)])try{const _0x2ea0fd=await this['getStateAsync'](_0x5f3486(0x23d));if(_0x2ea0fd&&_0x2ea0fd['val']){const _0x5ee575={};if(this[_0x5f3486(0x272)]['devices'])this[_0x5f3486(0x272)]['devices'][_0x5f3486(0x184)](_0x5c6ae9=>{const _0x27fee3=_0x5f3486;if(_0x5c6ae9['id']&&_0x5c6ae9['type'])_0x5ee575[_0x5c6ae9['id']]=_0x5c6ae9[_0x27fee3(0x248)];});pythonBridge[_0x5f3486(0x22d)](this,_0x5f3486(0x27b),{'events':JSON['parse'](_0x2ea0fd[_0x5f3486(0x210)]),'deviceMap':_0x5ee575});}}catch(_0x4e733e){}return;}if(_0x7858a0['includes']('analysis.training.triggerTopology')&&_0x1b8cf9[_0x5f3486(0x210)]){this['setState'](_0x7858a0,{'val':![],'ack':!![]}),topology[_0x5f3486(0x278)](this);if(this[_0x5f3486(0x1e2)])try{const _0x2250dd=await this[_0x5f3486(0x273)]('LTM.trainingData.sequences');if(_0x2250dd&&_0x2250dd['val'])pythonBridge['send'](this,_0x5f3486(0x1e3),{'sequences':JSON['parse'](_0x2250dd[_0x5f3486(0x210)])});}catch(_0x1b396a){}return;}}const _0x119d22=(this[_0x5f3486(0x272)][_0x5f3486(0x191)]||[])[_0x5f3486(0x1b6)](_0x47d292=>_0x47d292['id']===_0x7858a0);if(_0x119d22){const _0x1d5c3c=await recorder[_0x5f3486(0x27d)](this,_0x7858a0,_0x1b8cf9,_0x119d22);_0x1d5c3c&&this[_0x5f3486(0x16c)](_0x5f3486(0x1c1),{'val':Date['now'](),'ack':!![]});_0x1d5c3c&&_0x1d5c3c['type']===_0x5f3486(0x1e9)&&_0x1d5c3c[_0x5f3486(0x26c)]&&this[_0x5f3486(0x1e2)]&&deadMan['updateLocation'](this,_0x1d5c3c[_0x5f3486(0x26c)]);_0x1b8cf9[_0x5f3486(0x210)]&&(_0x1b8cf9[_0x5f3486(0x210)]===!![]||_0x1b8cf9['val']===0x1||String(_0x1b8cf9[_0x5f3486(0x210)])[_0x5f3486(0x1f7)]()==='open')&&(_0x119d22['type']&&(_0x119d22[_0x5f3486(0x248)][_0x5f3486(0x1bb)](_0x5f3486(0x200))||_0x119d22['type'][_0x5f3486(0x1bb)](_0x5f3486(0x271)))&&this[_0x5f3486(0x229)](_0x119d22));if(_0x119d22['type']===_0x5f3486(0x24f)||_0x119d22['type']===_0x5f3486(0x208)){if(this[_0x5f3486(0x1fd)][_0x5f3486(0x206)])automation['cleanupGhostInterventions'](this);}}}async[a0_0x66d5f2(0x194)](_0x19b732){const _0x447f9f=a0_0x66d5f2;if(!this[_0x447f9f(0x263)]||Date[_0x447f9f(0x201)]()-this[_0x447f9f(0x244)]>0x493e0)return;try{const _0x463cd1=JSON['parse'](_0x19b732),_0x6e111=this['memoryCache']['sources'];let _0x42e97f=![];for(const _0x44db51 in _0x6e111){if(_0x6e111[_0x44db51][_0x447f9f(0x1bb)]('AI')&&_0x463cd1[_0x44db51]&&!_0x463cd1[_0x44db51][_0x447f9f(0x1bb)]('AI')){_0x42e97f=!![];break;}}_0x42e97f&&(await this[_0x447f9f(0x294)](_0x447f9f(0x187),{'val':JSON[_0x447f9f(0x28b)](this[_0x447f9f(0x263)][_0x447f9f(0x174)]),'ack':!![]}),await this[_0x447f9f(0x294)]('analysis.energy.warmupSources',{'val':JSON['stringify'](this[_0x447f9f(0x263)][_0x447f9f(0x1a1)]),'ack':!![]}));}catch(_0x37cb83){}}async['loadSystemMode'](){const _0x34f17d=a0_0x66d5f2;try{const _0x38a41d=await this['getStateAsync'](setup[_0x34f17d(0x19a)]);if(_0x38a41d&&_0x38a41d[_0x34f17d(0x210)])this['currentSystemMode']=_0x38a41d[_0x34f17d(0x210)];}catch(_0x5a55d6){this[_0x34f17d(0x1a5)]=setup[_0x34f17d(0x1f0)]['NORMAL'];}}async[a0_0x66d5f2(0x22a)](){return![];}async[a0_0x66d5f2(0x255)](){const _0xc9afd1=a0_0x66d5f2;await aiAgent[_0xc9afd1(0x1ad)](this);this[_0xc9afd1(0x1fd)]['health']&&(this[_0xc9afd1(0x22c)](),this[_0xc9afd1(0x1c6)]());if(this['activeModules'][_0xc9afd1(0x206)])this[_0xc9afd1(0x1a0)]();}async['checkSolarCondition'](){return![];}['triggerGaitAnalysis'](){const _0x55c7ab=a0_0x66d5f2;if(!this[_0x55c7ab(0x1e2)])return;}async['triggerEnergyPrediction'](){}[a0_0x66d5f2(0x22c)](){}async[a0_0x66d5f2(0x267)](_0x1424e6){}async[a0_0x66d5f2(0x19c)](_0x595607,_0x13bb6a){}async[a0_0x66d5f2(0x229)](_0x176755){}async['appendToLog'](_0x14c7c1){}[a0_0x66d5f2(0x1a7)](_0x2419d0){}}if(require[a0_0x66d5f2(0x26d)]!==module)module['exports']=_0x4f23fd=>new CogniLiving(_0x4f23fd);else new CogniLiving();