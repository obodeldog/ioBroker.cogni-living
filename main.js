const a0_0x1dc048=a0_0x233d;(function(_0x1b1ea8,_0x2e056c){const _0x2ab840=a0_0x233d,_0x4d820a=_0x1b1ea8();while(!![]){try{const _0x2cd59d=-parseInt(_0x2ab840(0x24a))/0x1+-parseInt(_0x2ab840(0x21d))/0x2+parseInt(_0x2ab840(0x218))/0x3+-parseInt(_0x2ab840(0x157))/0x4*(parseInt(_0x2ab840(0x1c7))/0x5)+parseInt(_0x2ab840(0x101))/0x6*(parseInt(_0x2ab840(0x246))/0x7)+parseInt(_0x2ab840(0x22f))/0x8*(parseInt(_0x2ab840(0x20b))/0x9)+parseInt(_0x2ab840(0x1e9))/0xa*(parseInt(_0x2ab840(0x22c))/0xb);if(_0x2cd59d===_0x2e056c)break;else _0x4d820a['push'](_0x4d820a['shift']());}catch(_0xf17e17){_0x4d820a['push'](_0x4d820a['shift']());}}}(a0_0x13a9,0xbf19b));const a0_0x2a74a9=(function(){let _0x486bcf=!![];return function(_0x41b143,_0xc96f64){const _0x3d1090=_0x486bcf?function(){const _0x31f681=a0_0x233d;if(_0xc96f64){const _0x450b3a=_0xc96f64[_0x31f681(0x130)](_0x41b143,arguments);return _0xc96f64=null,_0x450b3a;}}:function(){};return _0x486bcf=![],_0x3d1090;};}()),a0_0x5c9111=a0_0x2a74a9(this,function(){const _0x316304=a0_0x233d;return a0_0x5c9111['toString']()[_0x316304(0x250)](_0x316304(0x175))[_0x316304(0x1bb)]()[_0x316304(0x19e)](a0_0x5c9111)['search'](_0x316304(0x175));});a0_0x5c9111();'use strict';const utils=require(a0_0x1dc048(0x1e0)),{GoogleGenerativeAI}=require(a0_0x1dc048(0x11d)),{spawn}=require('child_process'),path=require(a0_0x1dc048(0x25d)),fs=require('fs'),installer=require(a0_0x1dc048(0x15a)),scanner=require(a0_0x1dc048(0x19a)),schedulers=require('./lib/scheduler'),HISTORY_MAX_SIZE=0x32,RAW_LOG_MAX_SIZE=0x9c4,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL='models/gemini-flash-latest',SEQUENCE_TIMEOUT_MS=0x5*0x3c*0x3e8,MAX_TRAINING_SET_SIZE=0x1f4,THERMO_LOG_SIZE=0x3e8,EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,LTM_DP_RAW_LOG=a0_0x1dc048(0x204),LTM_DP_DAILY_DIGESTS='LTM.dailyDigests',LTM_DP_STATUS=a0_0x1dc048(0x1f7),LTM_DP_TRIGGER_DIGEST=a0_0x1dc048(0x231),LTM_DP_BASELINE_STATUS=a0_0x1dc048(0x1da),LTM_DP_DRIFT_CHANNEL='LTM.driftAnalysis',LTM_DP_DRIFT_STATUS=a0_0x1dc048(0x23a),LTM_DP_DRIFT_DETAILS=a0_0x1dc048(0x16e),LTM_DP_DRIFT_LAST_CHECK=a0_0x1dc048(0xf3),SYSTEM_DP_MODE='system.mode',SYSTEM_MODES={'NORMAL':a0_0x1dc048(0x205),'VACATION':a0_0x1dc048(0x26b),'PARTY':a0_0x1dc048(0x1c6),'GUEST':a0_0x1dc048(0x1fa)},AUTO_RESET_MODES=[SYSTEM_MODES[a0_0x1dc048(0x227)],SYSTEM_MODES['GUEST']],PERSONA_MAPPING={'generic':a0_0x1dc048(0xf7),'senior_aal':'PRIORITÃ„T:\x20Gesundheit/AAL.','family':a0_0x1dc048(0x190),'single_comfort':'Fokus\x20auf\x20Komfort.','security':a0_0x1dc048(0x226)},ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};let activeSequence=[],sequenceTimer=null;async function initZombies(_0x32ef2f){const _0x4b3142=a0_0x1dc048;try{const _0x12e629=[_0x4b3142(0x214),_0x4b3142(0x111)];for(const _0x4bd815 of _0x12e629){try{const _0x11bfef=await _0x32ef2f[_0x4b3142(0x1ee)](_0x4bd815);if(_0x11bfef)await _0x32ef2f[_0x4b3142(0x1c4)](_0x4bd815);}catch(_0x53b49c){}}}catch(_0x5d38f6){}}async function checkLicense(_0x23249e){return!![];}async function initHistory(_0x47e423){const _0x5eb0df=a0_0x1dc048;try{const _0x1aa4ec=await _0x47e423[_0x5eb0df(0x1d0)](_0x5eb0df(0x1fb));_0x1aa4ec&&_0x1aa4ec[_0x5eb0df(0x252)]&&(_0x47e423[_0x5eb0df(0x182)]=JSON[_0x5eb0df(0xf5)](_0x1aa4ec[_0x5eb0df(0x252)][_0x5eb0df(0x1bb)]()));}catch(_0x1ecba3){_0x47e423[_0x5eb0df(0x182)]=[];}try{const _0x11a297=await _0x47e423['getStateAsync'](_0x5eb0df(0x19d));if(_0x11a297&&_0x11a297[_0x5eb0df(0x252)])_0x47e423[_0x5eb0df(0x143)]=JSON[_0x5eb0df(0xf5)](_0x11a297[_0x5eb0df(0x252)][_0x5eb0df(0x1bb)]());}catch(_0x4c084c){_0x47e423['analysisHistory']=[];}if(_0x47e423[_0x5eb0df(0x182)]&&_0x47e423[_0x5eb0df(0x182)]['length']>0x0){_0x47e423[_0x5eb0df(0x15f)][_0x5eb0df(0x110)](_0x5eb0df(0x16b));for(let _0x24eff2=_0x47e423[_0x5eb0df(0x182)][_0x5eb0df(0x261)]-0x1;_0x24eff2>=0x0;_0x24eff2--){const _0x594bfd=_0x47e423[_0x5eb0df(0x182)][_0x24eff2];if(_0x594bfd&&_0x594bfd['id']!==undefined&&_0x594bfd[_0x5eb0df(0x12d)]!==undefined)_0x47e423[_0x5eb0df(0xe2)][_0x594bfd['id']]=_0x594bfd[_0x5eb0df(0x12d)];}}}async function initSystemConfig(_0x4ab927){const _0x1b5ec3=a0_0x1dc048;try{const _0x1bc352=await _0x4ab927['getForeignObjectAsync'](_0x1b5ec3(0x196));if(_0x1bc352&&_0x1bc352[_0x1b5ec3(0x1dc)])_0x4ab927[_0x1b5ec3(0x24c)]={'latitude':_0x1bc352[_0x1b5ec3(0x1dc)][_0x1b5ec3(0x150)]||0x0,'longitude':_0x1bc352[_0x1b5ec3(0x1dc)]['longitude']||0x0,'city':_0x1bc352[_0x1b5ec3(0x1dc)][_0x1b5ec3(0x18c)]||''};}catch(_0xa6429){}}async function createAllObjects(_0x4370ee){const _0x1399c6=a0_0x1dc048;await _0x4370ee['extendObjectAsync'](_0x1399c6(0x117),{'type':_0x1399c6(0x11f),'common':{'name':_0x1399c6(0x1be)},'native':{}}),await _0x4370ee[_0x1399c6(0x1a2)](SYSTEM_DP_MODE,{'type':'state','common':{'name':_0x1399c6(0x189),'type':_0x1399c6(0xe9),'role':_0x1399c6(0x247),'read':!![],'write':!![],'def':SYSTEM_MODES[_0x1399c6(0x10d)]},'native':{}}),await _0x4370ee[_0x1399c6(0x165)](_0x1399c6(0x239),{'type':_0x1399c6(0x247),'common':{'name':_0x1399c6(0xf2),'type':_0x1399c6(0xe9),'role':_0x1399c6(0x126),'read':!![],'write':![]},'native':{}}),await _0x4370ee[_0x1399c6(0x165)]('events.lastEvent',{'type':_0x1399c6(0x247),'common':{'name':_0x1399c6(0x128),'type':_0x1399c6(0xe9),'role':'json','read':!![],'write':![]},'native':{}}),await _0x4370ee[_0x1399c6(0x165)](_0x1399c6(0x1fb),{'type':'state','common':{'name':_0x1399c6(0x26a),'type':'string','role':_0x1399c6(0x22e),'read':!![],'write':![]},'native':{}}),await _0x4370ee[_0x1399c6(0x1a2)](_0x1399c6(0x211),{'type':'channel','common':{'name':'AI\x20Training'},'native':{}}),await _0x4370ee[_0x1399c6(0x165)](_0x1399c6(0x1cc),{'type':_0x1399c6(0x247),'common':{'name':_0x1399c6(0x123),'type':_0x1399c6(0x233),'role':_0x1399c6(0x249),'read':!![],'write':!![]},'native':{}}),await _0x4370ee[_0x1399c6(0x165)](_0x1399c6(0x180),{'type':_0x1399c6(0x247),'common':{'name':_0x1399c6(0x203),'type':'boolean','role':_0x1399c6(0x249),'read':!![],'write':!![]},'native':{}}),await _0x4370ee[_0x1399c6(0x165)]('analysis.training.triggerEnergy',{'type':_0x1399c6(0x247),'common':{'name':_0x1399c6(0x124),'type':_0x1399c6(0x233),'role':'button','read':!![],'write':!![]},'native':{}}),await _0x4370ee['setObjectNotExistsAsync']('analysis.training.triggerComfort',{'type':_0x1399c6(0x247),'common':{'name':'Train\x20Comfort','type':_0x1399c6(0x233),'role':'button','read':!![],'write':!![]},'native':{}}),await _0x4370ee[_0x1399c6(0x165)]('analysis.training.triggerTopology',{'type':_0x1399c6(0x247),'common':{'name':'Build\x20Topology','type':_0x1399c6(0x233),'role':_0x1399c6(0x249),'read':!![],'write':!![]},'native':{}}),await _0x4370ee[_0x1399c6(0x165)](_0x1399c6(0x129),{'type':'state','common':{'name':_0x1399c6(0x18e),'type':_0x1399c6(0xe9),'role':_0x1399c6(0x126),'read':!![],'write':![]},'native':{}}),await _0x4370ee[_0x1399c6(0x1a2)](_0x1399c6(0x262),{'type':_0x1399c6(0x11f),'common':{'name':_0x1399c6(0x137)},'native':{}}),await _0x4370ee['setObjectNotExistsAsync'](_0x1399c6(0x1ea),{'type':_0x1399c6(0x247),'common':{'name':'Anomaly\x20Score','type':_0x1399c6(0x140),'role':_0x1399c6(0x12d),'read':!![],'write':![]},'native':{}}),await _0x4370ee[_0x1399c6(0x165)](_0x1399c6(0x26d),{'type':_0x1399c6(0x247),'common':{'name':_0x1399c6(0x24f),'type':_0x1399c6(0x140),'role':_0x1399c6(0x12d),'read':!![],'write':![],'def':0.05},'native':{}}),await _0x4370ee['setObjectNotExistsAsync'](_0x1399c6(0x144),{'type':_0x1399c6(0x247),'common':{'name':_0x1399c6(0x1d1),'type':_0x1399c6(0xe9),'role':_0x1399c6(0x240),'read':!![],'write':![]},'native':{}}),await _0x4370ee[_0x1399c6(0x165)](_0x1399c6(0x26c),{'type':_0x1399c6(0x247),'common':{'name':'Topology\x20Matrix','type':_0x1399c6(0xe9),'role':'json','read':!![],'write':![]},'native':{}}),await _0x4370ee[_0x1399c6(0x1a2)](_0x1399c6(0x1df),{'type':_0x1399c6(0x11f),'common':{'name':_0x1399c6(0x10f)},'native':{}}),await _0x4370ee[_0x1399c6(0x165)]('analysis.health.lastCheck',{'type':'state','common':{'name':_0x1399c6(0x1d1),'type':'string','role':_0x1399c6(0x240),'read':!![],'write':![]},'native':{}}),await _0x4370ee[_0x1399c6(0x165)](_0x1399c6(0xee),{'type':_0x1399c6(0x247),'common':{'name':_0x1399c6(0x1b0),'type':_0x1399c6(0x233),'role':_0x1399c6(0x14f),'read':!![],'write':![]},'native':{}}),await _0x4370ee[_0x1399c6(0x165)](_0x1399c6(0x119),{'type':_0x1399c6(0x247),'common':{'name':_0x1399c6(0x22b),'type':_0x1399c6(0xe9),'role':_0x1399c6(0x126),'read':!![],'write':![]},'native':{}}),await _0x4370ee['setObjectNotExistsAsync'](_0x1399c6(0x21e),{'type':_0x1399c6(0x247),'common':{'name':_0x1399c6(0x11a),'type':'number','role':_0x1399c6(0x12d),'read':!![],'write':![]},'native':{}}),await _0x4370ee[_0x1399c6(0x165)](_0x1399c6(0x17f),{'type':_0x1399c6(0x247),'common':{'name':'Today\x20Vector\x20(15m)','type':_0x1399c6(0xe9),'role':_0x1399c6(0x22e),'read':!![],'write':![]},'native':{}}),await _0x4370ee[_0x1399c6(0x165)](_0x1399c6(0x1ad),{'type':_0x1399c6(0x247),'common':{'name':'Gait\x20Speed\x20Trend','type':'number','role':_0x1399c6(0x12d),'read':!![],'write':![]},'native':{}}),await _0x4370ee[_0x1399c6(0x1a2)]('analysis.energy',{'type':_0x1399c6(0x11f),'common':{'name':_0x1399c6(0x134)},'native':{}}),await _0x4370ee['setObjectNotExistsAsync'](_0x1399c6(0x109),{'type':'state','common':{'name':_0x1399c6(0x1db),'type':_0x1399c6(0xe9),'role':_0x1399c6(0x126),'read':!![],'write':![]},'native':{}}),await _0x4370ee['setObjectNotExistsAsync'](_0x1399c6(0xe4),{'type':'state','common':{'name':'Heating\x20Score','type':_0x1399c6(0xe9),'role':_0x1399c6(0x126),'read':!![],'write':![]},'native':{}}),await _0x4370ee[_0x1399c6(0x165)](_0x1399c6(0x209),{'type':_0x1399c6(0x247),'common':{'name':_0x1399c6(0x254),'type':_0x1399c6(0xe9),'role':_0x1399c6(0x22e),'read':!![],'write':![]},'native':{}}),await _0x4370ee[_0x1399c6(0x1a2)]('LTM',{'type':_0x1399c6(0x11f),'common':{'name':_0x1399c6(0xfc)},'native':{}}),await _0x4370ee[_0x1399c6(0x1a2)](LTM_DP_RAW_LOG,{'type':_0x1399c6(0x247),'common':{'name':_0x1399c6(0x1a6),'type':_0x1399c6(0xe9),'role':_0x1399c6(0x22e),'read':!![],'write':![]},'native':{}}),await _0x4370ee[_0x1399c6(0x1a2)](LTM_DP_DAILY_DIGESTS,{'type':'state','common':{'name':_0x1399c6(0x16d),'type':_0x1399c6(0xe9),'role':_0x1399c6(0x22e),'read':!![],'write':![]},'native':{}}),await _0x4370ee['setObjectNotExistsAsync'](_0x1399c6(0x1dd),{'type':'state','common':{'name':'Sequences','type':'string','role':'json','read':!![],'write':![]},'native':{}}),await _0x4370ee[_0x1399c6(0x165)]('LTM.trainingData.thermodynamics',{'type':_0x1399c6(0x247),'common':{'name':'Thermodynamics','type':_0x1399c6(0xe9),'role':_0x1399c6(0x22e),'read':!![],'write':![]},'native':{}}),await _0x4370ee['setObjectNotExistsAsync']('analysis.trigger',{'type':_0x1399c6(0x247),'common':{'name':_0x1399c6(0x14b),'type':_0x1399c6(0x233),'role':_0x1399c6(0x249),'read':!![],'write':!![]},'native':{}}),await _0x4370ee[_0x1399c6(0x165)](_0x1399c6(0x14a),{'type':_0x1399c6(0x247),'common':{'name':'Trigger\x20Briefing','type':_0x1399c6(0x233),'role':_0x1399c6(0x249),'read':!![],'write':!![]},'native':{}}),await _0x4370ee[_0x1399c6(0x165)](_0x1399c6(0x100),{'type':'state','common':{'name':_0x1399c6(0x135),'type':_0x1399c6(0x233),'role':_0x1399c6(0x22d),'read':!![],'write':![]},'native':{}}),await _0x4370ee['setObjectNotExistsAsync'](_0x1399c6(0x13f),{'type':_0x1399c6(0x247),'common':{'name':_0x1399c6(0x13a),'type':'string','role':_0x1399c6(0x186),'read':!![],'write':![]},'native':{}}),await _0x4370ee[_0x1399c6(0x165)]('analysis.activitySummary',{'type':'state','common':{'name':_0x1399c6(0x1c3),'type':'string','role':_0x1399c6(0x126),'read':!![],'write':![]},'native':{}}),await _0x4370ee['setObjectNotExistsAsync']('analysis.automation.patternDetected',{'type':_0x1399c6(0x247),'common':{'name':'Pattern\x20Detected','type':'boolean','role':_0x1399c6(0x14f),'read':!![],'write':![]},'native':{}}),await _0x4370ee[_0x1399c6(0x165)](_0x1399c6(0x131),{'type':'state','common':{'name':_0x1399c6(0xe3),'type':_0x1399c6(0xe9),'role':_0x1399c6(0x126),'read':!![],'write':![]},'native':{}}),await _0x4370ee[_0x1399c6(0x165)](_0x1399c6(0xfa),{'type':'state','common':{'name':_0x1399c6(0x1ba),'type':'string','role':_0x1399c6(0x22e),'read':!![],'write':![]},'native':{}}),await _0x4370ee[_0x1399c6(0x165)](_0x1399c6(0xe0),{'type':_0x1399c6(0x247),'common':{'name':_0x1399c6(0xd6),'type':'string','role':_0x1399c6(0x126),'read':!![],'write':![]},'native':{}}),await _0x4370ee[_0x1399c6(0x165)]('analysis.automation.targetValue',{'type':_0x1399c6(0x247),'common':{'name':_0x1399c6(0x1e5),'type':'string','role':_0x1399c6(0x126),'read':!![],'write':![]},'native':{}}),await _0x4370ee[_0x1399c6(0x165)](_0x1399c6(0x1fc),{'type':_0x1399c6(0x247),'common':{'name':_0x1399c6(0x1d8),'type':_0x1399c6(0x233),'role':_0x1399c6(0x1f8),'read':!![],'write':!![]},'native':{}}),await _0x4370ee[_0x1399c6(0x165)]('analysis.automation.triggerAction',{'type':_0x1399c6(0x247),'common':{'name':_0x1399c6(0x105),'type':_0x1399c6(0x233),'role':_0x1399c6(0x249),'read':!![],'write':!![]},'native':{}});}async function loadSystemMode(_0x192e3a){const _0x48acf1=a0_0x1dc048;try{const _0x43a0ab=await _0x192e3a[_0x48acf1(0x1d0)](SYSTEM_DP_MODE);_0x43a0ab&&_0x43a0ab[_0x48acf1(0x252)]&&Object[_0x48acf1(0x225)](SYSTEM_MODES)['includes'](_0x43a0ab[_0x48acf1(0x252)])?_0x192e3a['currentSystemMode']=_0x43a0ab[_0x48acf1(0x252)]:(_0x192e3a[_0x48acf1(0x1a9)]=SYSTEM_MODES[_0x48acf1(0x10d)],await _0x192e3a[_0x48acf1(0x1d7)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x48acf1(0x10d)],'ack':!![]}));}catch(_0x2e9260){_0x192e3a[_0x48acf1(0x1a9)]=SYSTEM_MODES[_0x48acf1(0x10d)];}}async function loadRawEventLog(_0x4132f7){const _0x391202=a0_0x1dc048;try{const _0x3be622=await _0x4132f7['getStateAsync'](LTM_DP_RAW_LOG);if(_0x3be622&&_0x3be622[_0x391202(0x252)])_0x4132f7[_0x391202(0x192)]=JSON[_0x391202(0xf5)](_0x3be622[_0x391202(0x252)]);}catch(_0x5b92c2){_0x4132f7[_0x391202(0x192)]=[];}}async function saveRawEventLog(_0x30d9a8){const _0x5705d2=a0_0x1dc048;if(_0x30d9a8[_0x5705d2(0x192)][_0x5705d2(0x261)]>RAW_LOG_MAX_SIZE)_0x30d9a8['rawEventLog'][_0x5705d2(0x13d)](0x0,_0x30d9a8[_0x5705d2(0x192)][_0x5705d2(0x261)]-RAW_LOG_MAX_SIZE);await _0x30d9a8[_0x5705d2(0x1d7)](LTM_DP_RAW_LOG,{'val':JSON[_0x5705d2(0x1ae)](_0x30d9a8['rawEventLog']),'ack':!![]});}async function loadDailyDigests(_0x3ecc6d){const _0x4d0d34=a0_0x1dc048;try{const _0x517572=await _0x3ecc6d[_0x4d0d34(0x1d0)](LTM_DP_DAILY_DIGESTS);if(_0x517572&&_0x517572[_0x4d0d34(0x252)])_0x3ecc6d['dailyDigests']=JSON[_0x4d0d34(0xf5)](_0x517572[_0x4d0d34(0x252)]);}catch(_0x25f3b5){_0x3ecc6d['dailyDigests']=[];}await updateBaselineStatus(_0x3ecc6d);}async function saveDailyDigests(_0x50ff28,_0x3df782=!![]){const _0x79eabe=a0_0x1dc048,_0x4a8e35=_0x50ff28['config'][_0x79eabe(0x158)]||0x3c;_0x50ff28[_0x79eabe(0x1b3)][_0x79eabe(0x261)]>_0x4a8e35&&_0x50ff28[_0x79eabe(0x1b3)][_0x79eabe(0x13d)](0x0,_0x50ff28['dailyDigests']['length']-_0x4a8e35);await _0x50ff28[_0x79eabe(0x1d7)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x79eabe(0x1ae)](_0x50ff28[_0x79eabe(0x1b3)]),'ack':!![]});if(_0x3df782)await updateBaselineStatus(_0x50ff28);}async function updateAnalysisHistory(_0x3b8163,_0x4069da){const _0x1a3677=a0_0x1dc048;_0x3b8163[_0x1a3677(0x143)]['unshift'](_0x4069da);if(_0x3b8163[_0x1a3677(0x143)]['length']>HISTORY_MAX_SIZE)_0x3b8163[_0x1a3677(0x143)][_0x1a3677(0x13b)]();await _0x3b8163[_0x1a3677(0x1d7)]('analysis.analysisHistory',{'val':JSON['stringify'](_0x3b8163[_0x1a3677(0x143)]),'ack':!![]});}async function updateBaselineStatus(_0x12906f){const _0x43830c=a0_0x1dc048;if(!_0x12906f[_0x43830c(0x1b9)]){await _0x12906f[_0x43830c(0x1d7)](LTM_DP_BASELINE_STATUS,{'val':_0x43830c(0x17b),'ack':!![]});return;}const _0x47758f=_0x12906f[_0x43830c(0x1b3)][_0x43830c(0x261)]>=(_0x12906f[_0x43830c(0x142)]['minDaysForBaseline']||0x7)?_0x43830c(0x238)+_0x12906f[_0x43830c(0x1b3)][_0x43830c(0x261)]+_0x43830c(0x12c):_0x43830c(0x244)+_0x12906f[_0x43830c(0x1b3)][_0x43830c(0x261)]+'/'+(_0x12906f[_0x43830c(0x142)]['minDaysForBaseline']||0x7)+')';await _0x12906f['setStateAsync'](LTM_DP_BASELINE_STATUS,{'val':_0x47758f,'ack':!![]});}async function initSensorSubscriptions(_0xf34c58){const _0xf951=a0_0x1dc048,_0x435e90=_0xf34c58[_0xf951(0x142)][_0xf951(0x176)];if(_0x435e90)for(const _0x10d5d3 of _0x435e90){await _0xf34c58[_0xf951(0x25c)](_0x10d5d3['id']);}}async function initPresenceSubscriptions(_0x3be405){const _0x2cf10c=a0_0x1dc048,_0x5b71fd=_0x3be405[_0x2cf10c(0x142)]['presenceDevices'];if(_0x5b71fd)for(const _0x4c4510 of _0x5b71fd){await _0x3be405['subscribeForeignStatesAsync'](_0x4c4510);}}function a0_0x13a9(){const _0x413224=['Fokus\x20auf\x20Familienroutinen.','ðŸš€\x20Starting\x20NUUKANNI\x20Logic\x20(v0.12.10)...','rawEventLog','kill','simulateButler','apiKey','system.config','BUTLER\x20Execution\x20Error:\x20','N/A','\x0aSTB:\x20','./lib/scanner','some','diagnosis','analysis.analysisHistory','constructor','GAIT_RESULT','response','temperature','extendObjectAsync','version','alertReason','subscribeStates','Raw\x20Log','.forecast.current.temp','SECURITY_RESULT','currentSystemMode','ANALYZE_GAIT','getForeignObjectsAsync','unknown','analysis.health.gaitSpeed','stringify','warn','Anomaly\x20Detected','WiFi\x20Presence\x20detected.','[RESULT]','dailyDigests','floor','licht','getTime','getMinutes','Wetterdaten\x20deaktiviert.','isProVersion','Detected\x20Patterns','toString','\x20new\x20patterns.','heizung','System','getDate','events.lastEvent','includes','presenceDevices','Activity\x20Summary','delObjectAsync','VACATION','party','1230LkFVgU','setState','submitFeedback','toFixed','toLowerCase','analysis.training.triggerSecurity','TOPOLOGY_RESULT','.NextHours.Location_1.Day_1.current.temp_value','exitGraceTimer','getStateAsync','Last\x20Check','service.py','existsSync','openweathermap','Kein\x20API\x20Key!','ENERGY_PREDICT_RESULT','setStateAsync','Auto\x20Apply','klima','LTM.baselineStatus','Insulation\x20Score','common','LTM.trainingData.sequences','COMFORT_RESULT','analysis.health','@iobroker/adapter-core','toLocaleTimeString','KI-Modell\x20nicht\x20initialisiert','inactivityThresholdHours','scanDevices','Target\x20Value','HEALTH_TRAIN_RESULT','ðŸ§ª\x20Simulating\x20Butler\x20Proposal:\x20','Â°C,\x20','2490djZyBo','analysis.security.lastScore','driftAnalysisTimer','fill','Keine\x20Wetterdaten\x20verfÃ¼gbar.','getObjectAsync','getForeignStateAsync','\x0aGrund:\x20','confidence','geminiModel','[RECORDER]\x20Error:\x20','analysis.lastResult','driftDetails','analysis.health.lastCheck','LTM.processingStatus','switch','stdout','guest','events.history','analysis.automation.autoApply','analysis.automation.triggerAction','details','lampe','LTM.trainingData.thermodynamics','cogni-living','endsWith','Train\x20Health','LTM.rawEventLog','normal','getCalendarNames','exitTimer','isPresent','analysis.energy.forecast','Kein\x20API\x20Key.','4203DJGZWk','Missing\x20data','threshold','Error\x20launching\x20Python:\x20','cancel','writable','analysis.training','Gemini\x20Error:\x20','cogni-living\x20adapter\x20starting\x20(v','analysis.history_debug_00','Started...','namespace','window','1392558ubhAAA','TRAINING_COMPLETE','Success','Unknown','type','2328046IelnoC','analysis.health.trendValue','calendarInstance','targetValue','callback','OK:\x20','Gemini\x20AI\x20initialized.','dependencyInstallInProgress','values','PRIORITÃ„T:\x20Sicherheit.','PARTY','location','onUnload','ðŸ\x20Python\x20Pong','Trend','70598lTZbzu','indicator.alarm','json','7816rRsemZ','ðŸ›‹ï¸\x20BUTLER:\x20Keine\x20neuen\x20Muster\x20gefunden.','LTM.triggerDailyDigest','getEnums','boolean','notifyTelegramInstance','isAlert','logDuplicates','testApiKey','Aktiv\x20(','system.presenceWho','LTM.driftAnalysis.baselineDrift','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','Training\x20Error:\x20','ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...','stdin','date','ANALYZE_TREND','âœ…\x20HEALTH\x20TRAINED.','status','Lernphase\x20(','rule','7880509VdvEro','state','debug','button','1264830xCwyrn','onStateChange','systemConfig','TRAIN_COMFORT','map','Current\x20Threshold','search','.\x20ANWESEND:\x20','val','activityLevel','Temperature\x20Forecast','python3','exports','analysis.training.triggerEnergy','tÃ¼r','ack','daswetter','setupLtmScheduler','subscribeForeignStatesAsync','path','HEALTH_RESULT','analysisTimer','N/A\x20(Learning)','length','analysis.security','baselineDrift','payload','No\x20instance','.communicate.request','TRAIN_SECURITY','weatherInstance','triggerBriefing','Event\x20History','vacation','analysis.security.topologyMatrix','analysis.security.currentThreshold','.\x20KONTEXT:\x20','timestamp','ðŸ›‹ï¸\x20Triggering\x20Comfort\x20Analysis\x20(Pattern\x20Mining)...','âš ï¸\x20ALARM:\x20','prÃ¤senz','Target\x20ID','main','.Current.WeatherText','getGenerativeModel','round','getLtmData','error','write','summary','close','analysis.automation.targetId','briefingJob','sensorLastValues','Description','analysis.energy.heatingScore','ENERGY_TRAIN_RESULT','BUILD_TOPOLOGY','data','contact','string','find','forEach','analysis.automation.patternDetected','Sec-Training\x20started...','analysis.health.isAnomaly','analysis.training.triggerTopology','stateChange','TRAIN_HEALTH','Who\x20is\x20present?','LTM.driftAnalysis.lastCheck','getMonth','parse','bewegung','Analysiere\x20ausgewogen.','toISOString','\x20->\x20','analysis.automation.detectedPatterns','enum','LTM','kontakt','filter','Regel\x20erkannt:\x20','analysis.isAlert','6fjNFTD','.Current.Temperature','substring','join','Trigger\x20Action','accuweather','isExit','triggerDailyDigest','analysis.energy.insulationScore','TREND_RESULT','success','slice','NORMAL','unshift','Health\x20Analysis','info','events.history_debug_00','ðŸŒ…\x20Morning\x20Briefing:\x0a','getFullYear','ANALYZE_SEQUENCE','setupDriftAnalysisScheduler','licenseKey','system','Skipped\x20(No\x20AI\x20or\x20Data)','analysis.health.trendDiagnosis','Trend\x20Value','push','Activity-Level','@google/generative-ai','scanForDevices','channel','pythonProcess','getHours','application/json','Train\x20Security','Train\x20Energy','.\x20SYSTEM_MODE:\x20','text','setupModeResetScheduler','Last\x20raw\x20event','analysis.training.status','outdoorSensorId','ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','\x20Tage)','value','ready','analysis.training.triggerComfort','apply','analysis.automation.description','Failed:\x20','aiPersona','Energy\x20Intelligence','Alert\x20Status','PREDICT_ENERGY','Security\x20Monitor','analysisInterval','.\x20WETTER:\x20','Alert\x20Reason','pop','from','splice','trim','analysis.alertReason','number','ltmJob','config','analysisHistory','analysis.security.lastCheck','onReady','heating','system.mode','ðŸ•¸ï¸\x20Building\x20Topology\x20Matrix...','lastAlertState','analysis.triggerBriefing','Trigger\x20Analysis','now','genAI','minDaysForBaseline','indicator','latitude','âš ï¸\x20SECURITY\x20ALARM:\x20','analysis.automation.targetValue','command','communicate.request','.forecast.current.temperature','temperatur','7036iTqTYx','ltmLtbWindowDays','ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20','./lib/installer','schalter','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','generateContent','unload','log','insulation','geminiApiKey','weatherunderground','object','Keine\x20Termine.','setObjectNotExistsAsync','User\x20dismissed\x20automation\x20proposal.','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','ANALYZE_HEALTH','setHours','generic','Restoring\x20sensor\x20cache...','Briefing\x20Error:\x20','Daily\x20Digests','LTM.driftAnalysis.driftDetails','isGracePeriodActive','targetId','name','ANOMALY','PYTHON_EXE','checkAndInstall','(((.+)+)+)+$','devices','bind','analysis.trigger','description','replace','Deaktiviert\x20(Pro-Feature)','analysis.activitySummary','automationProposal','motion','analysis.health.todayVector','analysis.training.triggerHealth','enum.functions.*','eventHistory','\x20=\x20','Keine\x20Details.','sendTo','text.alarm','message','modeResetJob','System\x20Mode','ltmStbWindowDays','setupBriefingScheduler','city','startsWith','Training\x20Status','autoApply'];a0_0x13a9=function(){return _0x413224;};return a0_0x13a9();}async function setupTelegramListener(_0x40d24a){const _0x5f5d1b=a0_0x1dc048,_0x37dbf7=_0x40d24a[_0x5f5d1b(0x142)][_0x5f5d1b(0x234)];if(_0x40d24a[_0x5f5d1b(0x142)]['notifyTelegramEnabled']&&_0x37dbf7)await _0x40d24a['subscribeForeignStatesAsync'](_0x37dbf7+_0x5f5d1b(0x266));}async function checkWifiPresence(_0x2751fc){const _0x430c36=a0_0x1dc048;try{const _0x42b86c=_0x2751fc[_0x430c36(0x142)]['presenceDevices']||[];let _0x190110=![];const _0x78ac8a=[];for(const _0x523108 of _0x42b86c){try{const _0x229c72=await _0x2751fc[_0x430c36(0x1ef)](_0x523108);_0x229c72&&(_0x229c72[_0x430c36(0x252)]===!![]||_0x229c72[_0x430c36(0x252)]==='online'||_0x229c72['val']===0x1)&&(_0x190110=!![],_0x78ac8a[_0x430c36(0x11b)](_0x523108));}catch(_0x53bb80){}}return await _0x2751fc[_0x430c36(0x1d7)](_0x430c36(0x239),{'val':_0x78ac8a[_0x430c36(0x104)](',\x20'),'ack':!![]}),_0x190110&&(_0x2751fc['exitTimer']&&(_0x2751fc[_0x430c36(0x15f)][_0x430c36(0x110)](_0x430c36(0x1b1)),abortExitTimer(_0x2751fc)),!_0x2751fc[_0x430c36(0x208)]&&_0x2751fc['currentSystemMode']===SYSTEM_MODES[_0x430c36(0x10d)]&&await setPresence(_0x2751fc,!![])),_0x190110;}catch(_0x5dc94f){return![];}}function startExitTimer(_0x50f9ff){const _0x25b821=a0_0x1dc048;abortExitTimer(_0x50f9ff),_0x50f9ff[_0x25b821(0x16f)]=!![],_0x50f9ff[_0x25b821(0x1cf)]=setTimeout(()=>{_0x50f9ff['isGracePeriodActive']=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),_0x50f9ff[_0x25b821(0x207)]=setTimeout(()=>{const _0x2d9b87=_0x25b821;setPresence(_0x50f9ff,![]),_0x50f9ff[_0x2d9b87(0x207)]=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}function abortExitTimer(_0x27ccbb){const _0x12b5a4=a0_0x1dc048;if(_0x27ccbb['exitTimer'])clearTimeout(_0x27ccbb[_0x12b5a4(0x207)]);if(_0x27ccbb[_0x12b5a4(0x1cf)])clearTimeout(_0x27ccbb['exitGraceTimer']);_0x27ccbb[_0x12b5a4(0x207)]=null,_0x27ccbb[_0x12b5a4(0x1cf)]=null,_0x27ccbb[_0x12b5a4(0x16f)]=![];}async function setPresence(_0x41ad73,_0x1d9217){const _0x55adcc=a0_0x1dc048;if(_0x41ad73[_0x55adcc(0x208)]===_0x1d9217)return;_0x41ad73['isPresent']=_0x1d9217,await _0x41ad73[_0x55adcc(0x1d7)]('system.isPresent',{'val':_0x1d9217,'ack':!![]});}async function executeAutomationAction(_0x3c1282){const _0xaf3954=a0_0x1dc048;try{const _0x3e349e=await _0x3c1282[_0xaf3954(0x1d0)](_0xaf3954(0xe0)),_0x3f7dc1=await _0x3c1282['getStateAsync']('analysis.automation.targetValue');if(_0x3e349e&&_0x3e349e[_0xaf3954(0x252)]&&_0x3f7dc1){const _0x4e2518=_0x3e349e[_0xaf3954(0x252)];let _0x37611e=_0x3f7dc1[_0xaf3954(0x252)];try{_0x37611e=JSON[_0xaf3954(0xf5)](_0x37611e);}catch(_0x22f73d){}_0x3c1282[_0xaf3954(0x15f)][_0xaf3954(0x110)](_0xaf3954(0x159)+_0x4e2518+_0xaf3954(0x183)+_0x37611e),await _0x3c1282['setForeignStateAsync'](_0x4e2518,_0x37611e);}else _0x3c1282[_0xaf3954(0x15f)][_0xaf3954(0x1af)](_0xaf3954(0x12b));}catch(_0xe2f6df){_0x3c1282[_0xaf3954(0x15f)][_0xaf3954(0xdc)](_0xaf3954(0x197)+_0xe2f6df[_0xaf3954(0x187)]);}}function a0_0x233d(_0x1bf83d,_0xf62ccb){const _0x399d0e=a0_0x13a9();return a0_0x233d=function(_0x5c9111,_0x2a74a9){_0x5c9111=_0x5c9111-0xd2;let _0x13a985=_0x399d0e[_0x5c9111];return _0x13a985;},a0_0x233d(_0x1bf83d,_0xf62ccb);}async function processSensorEvent(_0x387c21,_0xf9afce,_0x250e56,_0x408ea8){const _0x54110=a0_0x1dc048;if(!_0x408ea8)return;const _0x3845d9=_0x250e56[_0x54110(0x252)],_0x2e1a6f=Date['now'](),_0x530714=_0x387c21[_0x54110(0xe2)][_0xf9afce];_0x387c21[_0x54110(0xe2)][_0xf9afce]=_0x3845d9;if(!_0x408ea8[_0x54110(0x236)]&&_0x530714!=undefined&&_0x530714==_0x3845d9)return;const _0x21ea86=(_0x408ea8[_0x54110(0x21c)]||'')[_0x54110(0x1cb)](),_0x16c77e=_0x21ea86['includes'](_0x54110(0x1a1))||_0x21ea86[_0x54110(0x1c1)](_0x54110(0x156))||_0x21ea86[_0x54110(0x1c1)](_0x54110(0x1d9))||_0x21ea86['includes'](_0x54110(0x1bd));_0x387c21['isProVersion']&&_0x16c77e&&recordThermodynamics(_0x387c21,_0xf9afce,_0x3845d9,_0x408ea8[_0x54110(0x228)]);const _0x39e093={'timestamp':_0x2e1a6f,'id':_0xf9afce,'name':_0x408ea8[_0x54110(0x171)],'type':_0x408ea8[_0x54110(0x21c)],'location':_0x408ea8[_0x54110(0x228)],'value':_0x3845d9};_0x387c21[_0x54110(0x182)][_0x54110(0x10e)](_0x39e093);if(_0x387c21[_0x54110(0x182)]['length']>HISTORY_MAX_SIZE)_0x387c21[_0x54110(0x182)][_0x54110(0x13b)]();await _0x387c21[_0x54110(0x1d7)](_0x54110(0x1c0),{'val':JSON[_0x54110(0x1ae)](_0x39e093),'ack':!![]}),await _0x387c21[_0x54110(0x1d7)](_0x54110(0x1fb),{'val':JSON[_0x54110(0x1ae)](_0x387c21[_0x54110(0x182)]),'ack':!![]});_0x387c21[_0x54110(0x1b9)]&&(_0x387c21[_0x54110(0x192)][_0x54110(0x11b)](_0x39e093),await saveRawEventLog(_0x387c21),recordSequence(_0x387c21,_0x39e093));if(_0x408ea8[_0x54110(0x107)]&&_0x3845d9===!![]){if(_0x387c21[_0x54110(0x208)]&&!_0x387c21[_0x54110(0x16f)])startExitTimer(_0x387c21);else{if(!_0x387c21[_0x54110(0x208)])setPresence(_0x387c21,!![]);}}else{if(_0x408ea8[_0x54110(0x21c)]===_0x54110(0x17e)&&_0x3845d9===!![]){if(_0x387c21['exitTimer'])abortExitTimer(_0x387c21);if(!_0x387c21[_0x54110(0x208)]&&_0x387c21[_0x54110(0x1a9)]===SYSTEM_MODES[_0x54110(0x10d)])setPresence(_0x387c21,!![]);}}}async function recordThermodynamics(_0x91f28e,_0x496b4c,_0x5184a1,_0x32e792){const _0xa4145a=a0_0x1dc048,_0x1f8774=await getOutsideTemperatureNumeric(_0x91f28e),_0x300b74=await _0x91f28e[_0xa4145a(0x1d0)](_0xa4145a(0x200));let _0x2691bd=[];if(_0x300b74&&_0x300b74[_0xa4145a(0x252)])try{_0x2691bd=JSON[_0xa4145a(0xf5)](_0x300b74[_0xa4145a(0x252)]);}catch(_0xd30faa){}_0x2691bd[_0xa4145a(0x11b)]({'ts':Date[_0xa4145a(0x14c)](),'room':_0x32e792||'Unknown','t_in':_0x5184a1,'t_out':_0x1f8774});if(_0x2691bd[_0xa4145a(0x261)]>THERMO_LOG_SIZE)_0x2691bd['shift']();await _0x91f28e[_0xa4145a(0x1d7)](_0xa4145a(0x200),{'val':JSON[_0xa4145a(0x1ae)](_0x2691bd),'ack':!![]});}async function getOutsideTemperatureNumeric(_0x235124){const _0x46017d=a0_0x1dc048;if(_0x235124[_0x46017d(0x142)][_0x46017d(0x12a)])try{const _0x3f4354=await _0x235124[_0x46017d(0x1ef)](_0x235124[_0x46017d(0x142)][_0x46017d(0x12a)]);if(_0x3f4354&&_0x3f4354[_0x46017d(0x252)]!==undefined&&_0x3f4354[_0x46017d(0x252)]!==null)return parseFloat(_0x3f4354[_0x46017d(0x252)]);}catch(_0x1a6b71){}const _0x11195d=_0x235124['config']['weatherInstance'];if(!_0x235124[_0x46017d(0x142)]['useWeather']||!_0x11195d)return null;try{let _0x2f3aec='';if(_0x11195d[_0x46017d(0x1c1)](_0x46017d(0x106)))_0x2f3aec=_0x11195d+_0x46017d(0x102);else{if(_0x11195d[_0x46017d(0x1c1)](_0x46017d(0x25a)))_0x2f3aec=_0x11195d+_0x46017d(0x1ce);else{if(_0x11195d['includes'](_0x46017d(0x1d4)))_0x2f3aec=_0x11195d+_0x46017d(0x155);else{if(_0x11195d['includes'](_0x46017d(0x162)))_0x2f3aec=_0x11195d+_0x46017d(0x1a7);}}}if(_0x2f3aec){const _0x2ea5db=await _0x235124['getForeignStateAsync'](_0x2f3aec);if(_0x2ea5db&&_0x2ea5db[_0x46017d(0x252)]!==undefined&&_0x2ea5db[_0x46017d(0x252)]!==null)return parseFloat(_0x2ea5db[_0x46017d(0x252)]);}}catch(_0xd7598f){}return null;}async function recordSequence(_0x5a9944,_0x458388){const _0xec39b1=a0_0x1dc048,_0xb7aec6=(_0x458388[_0xec39b1(0x21c)]||'')[_0xec39b1(0x1cb)](),_0x17efef=[_0xec39b1(0x17e),_0xec39b1(0xf6),_0xec39b1(0xd5),'presence','occupancy','door',_0xec39b1(0x258),_0xec39b1(0x217),'fenster',_0xec39b1(0xe8),_0xec39b1(0xfd),'light',_0xec39b1(0x1b5),_0xec39b1(0x1f8),_0xec39b1(0x15b),'dimmer',_0xec39b1(0x1ff)];if(!_0x17efef[_0xec39b1(0x19b)](_0x1e9291=>_0xb7aec6['includes'](_0x1e9291)))return;if(!_0x458388[_0xec39b1(0x12d)])return;if(sequenceTimer)clearTimeout(sequenceTimer);activeSequence[_0xec39b1(0x11b)]({'loc':_0x458388[_0xec39b1(0x228)]||'Unknown','id':_0x458388['id'],'ts':Date[_0xec39b1(0x14c)]()}),sequenceTimer=setTimeout(async()=>{const _0x57721b=_0xec39b1;if(activeSequence[_0x57721b(0x261)]>0x1)await saveCompletedSequence(_0x5a9944);activeSequence=[];},SEQUENCE_TIMEOUT_MS);}async function saveCompletedSequence(_0x3b8a03){const _0x23880e=a0_0x1dc048;try{const _0x2bfa4e=await _0x3b8a03[_0x23880e(0x1d0)]('LTM.trainingData.sequences');let _0x514402=[];if(_0x2bfa4e&&_0x2bfa4e['val'])try{_0x514402=JSON[_0x23880e(0xf5)](_0x2bfa4e[_0x23880e(0x252)]);}catch(_0x2fa280){}const _0x4037f6=activeSequence[0x0]['ts'],_0x1d57b1=activeSequence['map'](_0x859a53=>({'loc':_0x859a53['loc'],'t_delta':Math[_0x23880e(0xda)]((_0x859a53['ts']-_0x4037f6)/0x3e8)})),_0x1ac09c={'timestamp':new Date(_0x4037f6)[_0x23880e(0xf8)](),'steps':_0x1d57b1,'duration':Math[_0x23880e(0xda)]((activeSequence[activeSequence[_0x23880e(0x261)]-0x1]['ts']-_0x4037f6)/0x3e8),'daytime':new Date(_0x4037f6)[_0x23880e(0x121)]()};_0x514402[_0x23880e(0x11b)](_0x1ac09c);if(_0x514402[_0x23880e(0x261)]>MAX_TRAINING_SET_SIZE)_0x514402['shift']();await _0x3b8a03[_0x23880e(0x1d7)]('LTM.trainingData.sequences',{'val':JSON[_0x23880e(0x1ae)](_0x514402),'ack':!![]}),runSecurityCheck(_0x3b8a03,_0x1ac09c);}catch(_0x43329f){_0x3b8a03['log'][_0x23880e(0xdc)](_0x23880e(0x1f3)+_0x43329f['message']);}}function runSecurityCheck(_0x1148f1,_0x2019c3){const _0x4f843d=a0_0x1dc048;if(!_0x1148f1['isProVersion'])return;sendToPython(_0x1148f1,_0x4f843d(0x114),{'sequence':_0x2019c3});}async function createDailyDigest(_0xc6cba0){const _0x2f9848=a0_0x1dc048;if(!_0xc6cba0['isProVersion'])return;await _0xc6cba0[_0x2f9848(0x1d7)](LTM_DP_STATUS,{'val':_0x2f9848(0x215),'ack':!![]});if(!_0xc6cba0[_0x2f9848(0x1f2)]||_0xc6cba0['rawEventLog'][_0x2f9848(0x261)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0xc6cba0['setStateAsync'](LTM_DP_STATUS,{'val':_0x2f9848(0x118),'ack':!![]});return;}const _0x1a8b79=JSON[_0x2f9848(0xf5)](JSON['stringify'](_0xc6cba0[_0x2f9848(0x192)])),_0xc2887c=_0x1a8b79[_0x2f9848(0x261)],_0x3a68be='ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a'+JSON[_0x2f9848(0x1ae)](_0x1a8b79);try{const _0x36233a=await _0xc6cba0[_0x2f9848(0x1f2)][_0x2f9848(0x15d)](_0x3a68be),_0x513b30=JSON[_0x2f9848(0xf5)](_0x36233a[_0x2f9848(0x1a0)]['text']()[_0x2f9848(0x17a)](/```json|```/g,'')[_0x2f9848(0x13e)]()),_0x186216={'timestamp':new Date()[_0x2f9848(0xf8)](),'eventCount':_0xc2887c,'summary':_0x513b30[_0x2f9848(0xde)]||'Digest','activityLevel':_0x513b30[_0x2f9848(0x253)]||_0x2f9848(0x205),'systemMode':_0xc6cba0[_0x2f9848(0x1a9)]};_0xc6cba0[_0x2f9848(0x1b3)][_0x2f9848(0x11b)](_0x186216),await saveDailyDigests(_0xc6cba0),_0xc6cba0[_0x2f9848(0x192)]=[],await saveRawEventLog(_0xc6cba0),await _0xc6cba0['setStateAsync'](LTM_DP_STATUS,{'val':_0x2f9848(0x21a),'ack':!![]});if(_0xc6cba0[_0x2f9848(0x1b9)])sendToPython(_0xc6cba0,_0x2f9848(0x168),{'digest':_0x186216});}catch(_0x18a41e){_0xc6cba0[_0x2f9848(0x15f)][_0x2f9848(0xdc)](_0x18a41e['message']);}}async function runBaselineDriftAnalysis(_0x284494){const _0x2ce320=a0_0x1dc048;if(!_0x284494[_0x2ce320(0x1b9)]||!_0x284494[_0x2ce320(0x1f2)])return;const _0x3f9c53=_0x284494['config'][_0x2ce320(0x18a)]||0xe;if(_0x284494[_0x2ce320(0x1b3)][_0x2ce320(0x261)]<_0x3f9c53+0x7){await _0x284494[_0x2ce320(0x1d7)](LTM_DP_DRIFT_STATUS,{'val':_0x2ce320(0x260),'ack':!![]});return;}const _0x1d392d=_0x284494[_0x2ce320(0x1b3)][_0x2ce320(0x10c)](-_0x3f9c53),_0x1c8560=_0x284494[_0x2ce320(0x1b3)][_0x2ce320(0x10c)](0x0,_0x284494[_0x2ce320(0x1b3)][_0x2ce320(0x261)]-_0x3f9c53),_0x56ede2='ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20'+JSON[_0x2ce320(0x1ae)](_0x1c8560)+_0x2ce320(0x199)+JSON[_0x2ce320(0x1ae)](_0x1d392d);try{const _0x3735de=await _0x284494[_0x2ce320(0x1f2)]['generateContent'](_0x56ede2),_0x1f9c28=JSON[_0x2ce320(0xf5)](_0x3735de[_0x2ce320(0x1a0)]['text']()[_0x2ce320(0x17a)](/```json|```/g,'')[_0x2ce320(0x13e)]());_0x1f9c28[_0x2ce320(0x263)]&&(await _0x284494[_0x2ce320(0x1d7)](LTM_DP_DRIFT_STATUS,{'val':_0x1f9c28[_0x2ce320(0x263)],'ack':!![]}),await _0x284494['setStateAsync'](LTM_DP_DRIFT_DETAILS,{'val':_0x1f9c28[_0x2ce320(0x1f5)],'ack':!![]}),await _0x284494[_0x2ce320(0x1d7)](LTM_DP_DRIFT_LAST_CHECK,{'val':Date[_0x2ce320(0x14c)](),'ack':!![]}));}catch(_0xcbdea6){}}async function sendMorningBriefing(_0x148d45){const _0x40fd53=a0_0x1dc048;if(!_0x148d45[_0x40fd53(0x1f2)])return;try{const _0x3e33c3=_0x40fd53(0x23c),_0x49e31f=await _0x148d45[_0x40fd53(0x1f2)]['generateContent'](_0x3e33c3),_0x18fed4=_0x49e31f[_0x40fd53(0x1a0)][_0x40fd53(0x126)]();sendNotification(_0x148d45,_0x40fd53(0x112)+_0x18fed4);}catch(_0x7db673){_0x148d45[_0x40fd53(0x15f)][_0x40fd53(0xdc)](_0x40fd53(0x16c)+_0x7db673[_0x40fd53(0x187)]);}}function stopPythonService(_0x3dd0c2){const _0x4ac27b=a0_0x1dc048;if(_0x3dd0c2[_0x4ac27b(0x120)]){try{_0x3dd0c2[_0x4ac27b(0x120)][_0x4ac27b(0x193)]();}catch(_0x20152a){}_0x3dd0c2[_0x4ac27b(0x120)]=null;}}function sendToPython(_0x277983,_0x1f3102,_0x4ab2f4={}){const _0x2db781=a0_0x1dc048;if(!_0x277983[_0x2db781(0x120)]||!_0x277983[_0x2db781(0x120)][_0x2db781(0x23f)][_0x2db781(0x210)])return;const _0x478f8b=JSON[_0x2db781(0x1ae)]({'command':_0x1f3102,..._0x4ab2f4});try{_0x277983[_0x2db781(0x120)][_0x2db781(0x23f)][_0x2db781(0xdd)](_0x478f8b+'\x0a');}catch(_0x5952f9){}}function runPythonHealthCheck(_0x133b89){const _0x4c01c1=a0_0x1dc048;if(!_0x133b89[_0x4c01c1(0x1b3)]||_0x133b89[_0x4c01c1(0x1b3)][_0x4c01c1(0x261)]<0x2)return;const _0xd2d899=_0x133b89[_0x4c01c1(0x1b3)][_0x4c01c1(0x24e)](_0x47eb65=>{const _0x64d5d6=_0x4c01c1,_0x59db6e=(_0x47eb65[_0x64d5d6(0x253)]||'')[_0x64d5d6(0x1cb)]();return ACTIVITY_LEVEL_MAP[_0x59db6e]||0x32;});sendToPython(_0x133b89,_0x4c01c1(0x241),{'values':_0xd2d899,'tag':_0x4c01c1(0x11c)});}function handlePythonResult(_0x313010,_0x2a9de4){const _0x3f6661=a0_0x1dc048;if(_0x2a9de4[_0x3f6661(0x21c)]==='PONG')_0x313010[_0x3f6661(0x15f)][_0x3f6661(0x248)](_0x3f6661(0x22a));else{if(_0x2a9de4[_0x3f6661(0x21c)]===_0x3f6661(0x1a8)){const {anomaly_score:_0x45dcf7,is_anomaly:_0x2e088d,threshold:_0x5a60ad,explanation:_0x2d1f6e}=_0x2a9de4[_0x3f6661(0x264)];_0x313010[_0x3f6661(0x15f)][_0x3f6661(0x110)]('ðŸ›¡ï¸\x20SECURITY\x20CHECK:\x20Score\x20'+_0x45dcf7[_0x3f6661(0x1ca)](0x5)+_0x3f6661(0xf9)+(_0x2e088d?_0x3f6661(0x172):'OK')),_0x313010[_0x3f6661(0x1d7)]('analysis.security.lastScore',{'val':_0x45dcf7,'ack':!![]}),_0x313010[_0x3f6661(0x1d7)]('analysis.security.lastCheck',{'val':new Date()[_0x3f6661(0xf8)](),'ack':!![]});if(_0x5a60ad)_0x313010[_0x3f6661(0x1d7)]('analysis.security.currentThreshold',{'val':_0x5a60ad,'ack':!![]});if(_0x2e088d){let _0x5bab7a=_0x3f6661(0x23b)+_0x45dcf7['toFixed'](0x4)+')';if(_0x2d1f6e&&_0x2d1f6e!==_0x3f6661(0x21b))_0x5bab7a+=_0x3f6661(0x1f0)+_0x2d1f6e;_0x313010[_0x3f6661(0x1d7)]('analysis.isAlert',{'val':!![],'ack':!![]}),_0x313010[_0x3f6661(0x1d7)](_0x3f6661(0x13f),{'val':_0x5bab7a,'ack':!![]}),sendNotification(_0x313010,_0x3f6661(0x151)+_0x5bab7a,![],!![]);}}else{if(_0x2a9de4[_0x3f6661(0x21c)]===_0x3f6661(0x219)){const _0x5371f9=_0x2a9de4[_0x3f6661(0x264)][_0x3f6661(0x1fe)]||'',_0x106e09=_0x2a9de4[_0x3f6661(0x264)][_0x3f6661(0x20d)],_0x540be8=_0x2a9de4[_0x3f6661(0x264)][_0x3f6661(0x10b)]?'Success:\x20'+new Date()[_0x3f6661(0x1e1)]()+'\x20('+_0x5371f9+')':_0x3f6661(0x132)+_0x2a9de4[_0x3f6661(0x264)]['reason'];_0x313010[_0x3f6661(0x1d7)]('analysis.training.status',{'val':_0x540be8,'ack':!![]});if(_0x2a9de4['payload']['success']&&_0x106e09)_0x313010[_0x3f6661(0x1d7)](_0x3f6661(0x26d),{'val':_0x106e09,'ack':!![]});}else{if(_0x2a9de4[_0x3f6661(0x21c)]===_0x3f6661(0x1de)){const {patterns:_0x40df84}=_0x2a9de4[_0x3f6661(0x264)];if(_0x40df84&&_0x40df84[_0x3f6661(0x261)]>0x0){_0x313010[_0x3f6661(0x15f)][_0x3f6661(0x110)]('ðŸ›‹ï¸\x20BUTLER:\x20Found\x20'+_0x40df84[_0x3f6661(0x261)]+_0x3f6661(0x1bc)),_0x313010[_0x3f6661(0x1d7)](_0x3f6661(0xfa),{'val':JSON[_0x3f6661(0x1ae)](_0x40df84),'ack':!![]});const _0x10529b=_0x40df84[0x0],_0x3a7e6b=_0x3f6661(0xff)+_0x10529b[_0x3f6661(0x245)]+'\x20('+(_0x10529b[_0x3f6661(0x1f1)]*0x64)[_0x3f6661(0x1ca)](0x0)+'%)';_0x313010['setStateAsync'](_0x3f6661(0xec),{'val':!![],'ack':!![]}),_0x313010[_0x3f6661(0x1d7)](_0x3f6661(0x131),{'val':_0x3a7e6b,'ack':!![]});}else _0x313010[_0x3f6661(0x15f)][_0x3f6661(0x110)](_0x3f6661(0x230)),_0x313010['setStateAsync'](_0x3f6661(0xec),{'val':![],'ack':!![]}),_0x313010[_0x3f6661(0x1d7)](_0x3f6661(0xfa),{'val':'[]','ack':!![]});}else{if(_0x2a9de4[_0x3f6661(0x21c)]===_0x3f6661(0xe5)){if(_0x2a9de4[_0x3f6661(0x264)][_0x3f6661(0x10b)])try{const _0x129711=JSON[_0x3f6661(0xf5)](_0x2a9de4['payload'][_0x3f6661(0x1fe)]);if(_0x129711[_0x3f6661(0x160)])_0x313010[_0x3f6661(0x1d7)](_0x3f6661(0x109),{'val':JSON['stringify'](_0x129711[_0x3f6661(0x160)]),'ack':!![]});if(_0x129711['heating'])_0x313010[_0x3f6661(0x1d7)](_0x3f6661(0xe4),{'val':JSON[_0x3f6661(0x1ae)](_0x129711[_0x3f6661(0x146)]),'ack':!![]});}catch(_0x5b8011){}}else{if(_0x2a9de4[_0x3f6661(0x21c)]===_0x3f6661(0x1e6)){if(_0x2a9de4[_0x3f6661(0x264)]['success'])_0x313010[_0x3f6661(0x15f)][_0x3f6661(0x110)](_0x3f6661(0x242));}else{if(_0x2a9de4['type']===_0x3f6661(0x25e))_0x313010[_0x3f6661(0x1d7)](_0x3f6661(0x1f6),{'val':new Date()[_0x3f6661(0xf8)](),'ack':!![]}),_0x313010['setStateAsync'](_0x3f6661(0xee),{'val':_0x2a9de4[_0x3f6661(0x264)]['is_anomaly'],'ack':!![]});else{if(_0x2a9de4['type']===_0x3f6661(0x10a))_0x313010['setStateAsync'](_0x3f6661(0x119),{'val':_0x2a9de4[_0x3f6661(0x264)][_0x3f6661(0x19c)],'ack':!![]}),_0x313010['setStateAsync'](_0x3f6661(0x21e),{'val':_0x2a9de4['payload']['change_percent'],'ack':!![]});else{if(_0x2a9de4[_0x3f6661(0x21c)]===_0x3f6661(0x19f)){const {speed_trend:_0x3f0bb3}=_0x2a9de4[_0x3f6661(0x264)];if(_0x3f0bb3!==undefined)_0x313010[_0x3f6661(0x1d7)](_0x3f6661(0x1ad),{'val':_0x3f0bb3,'ack':!![]});}else{if(_0x2a9de4[_0x3f6661(0x21c)]===_0x3f6661(0x1d6)){const {forecast:_0x542d00}=_0x2a9de4['payload'];if(_0x542d00)_0x313010[_0x3f6661(0x1d7)](_0x3f6661(0x209),{'val':JSON[_0x3f6661(0x1ae)](_0x542d00),'ack':!![]});}else{if(_0x2a9de4[_0x3f6661(0x21c)]===_0x3f6661(0x1cd)){const {data:_0x399868}=_0x2a9de4[_0x3f6661(0x264)];_0x399868&&(_0x313010[_0x3f6661(0x15f)]['info']('ðŸ•¸ï¸\x20Topology\x20Map\x20updated.'),_0x313010[_0x3f6661(0x1d7)]('analysis.security.topologyMatrix',{'val':JSON[_0x3f6661(0x1ae)](_0x399868),'ack':!![]}));}}}}}}}}}}}}function startPythonService(_0x2b6c26){const _0x679bac=a0_0x1dc048;let _0x6e5be3=_0x679bac(0x255);if(fs[_0x679bac(0x1d3)](installer[_0x679bac(0x173)]))_0x6e5be3=installer['PYTHON_EXE'];try{const _0xa55bc0=path['join'](__dirname,'python_service',_0x679bac(0x1d2));_0x2b6c26[_0x679bac(0x120)]=spawn(_0x6e5be3,[_0xa55bc0]),_0x2b6c26[_0x679bac(0x120)][_0x679bac(0x1f9)]['on'](_0x679bac(0xe7),_0x5e1718=>{const _0x33be5d=_0x679bac,_0x47202e=_0x5e1718['toString']()['split']('\x0a');_0x47202e[_0x33be5d(0xeb)](_0x74a7f6=>{const _0x597bc0=_0x33be5d,_0x43145a=_0x74a7f6[_0x597bc0(0x13e)]();if(!_0x43145a)return;if(_0x43145a[_0x597bc0(0x18d)]('[LOG]'))_0x2b6c26['log']['debug']('[PYTHON]\x20'+_0x43145a['substring'](0x5)[_0x597bc0(0x13e)]());else{if(_0x43145a[_0x597bc0(0x18d)](_0x597bc0(0x1b2)))try{const _0x3ef602=JSON[_0x597bc0(0xf5)](_0x43145a[_0x597bc0(0x103)](0x8)[_0x597bc0(0x13e)]());handlePythonResult(_0x2b6c26,_0x3ef602);}catch(_0x1d3564){}}});}),_0x2b6c26[_0x679bac(0x120)]['on'](_0x679bac(0xdf),_0x4d751a=>{const _0x1570d7=_0x679bac;_0x2b6c26[_0x1570d7(0x120)]=null;});}catch(_0xff6183){_0x2b6c26[_0x679bac(0x15f)][_0x679bac(0xdc)](_0x679bac(0x20e)+_0xff6183[_0x679bac(0x187)]);}}async function runAutopilot(_0x4ad242){const _0x30e262=a0_0x1dc048;_0x4ad242['log'][_0x30e262(0x248)](_0x30e262(0x23e)),await runGeminiAnalysis(_0x4ad242),updateHealthVector(_0x4ad242),triggerGaitAnalysis(_0x4ad242),triggerEnergyPrediction(_0x4ad242);}async function triggerGaitAnalysis(_0x5662e2){const _0x1ee333=a0_0x1dc048;if(!_0x5662e2[_0x1ee333(0x1b9)])return;try{const _0x42337b=await _0x5662e2[_0x1ee333(0x1d0)](_0x1ee333(0x1dd));_0x42337b&&_0x42337b[_0x1ee333(0x252)]&&sendToPython(_0x5662e2,_0x1ee333(0x1aa),{'sequences':JSON[_0x1ee333(0xf5)](_0x42337b[_0x1ee333(0x252)])});}catch(_0x82787a){}}async function triggerEnergyPrediction(_0xa0f825){const _0x4dd935=a0_0x1dc048;if(!_0xa0f825[_0x4dd935(0x1b9)])return;try{const _0x2359df=await getOutsideTemperatureNumeric(_0xa0f825);if(_0x2359df===null)return;const _0x191a9e={},_0x40682c=_0xa0f825[_0x4dd935(0x142)][_0x4dd935(0x176)]||[];for(const _0x1825be of _0x40682c){if(_0x1825be[_0x4dd935(0x21c)]===_0x4dd935(0x1a1)&&_0x1825be['location']){const _0x4cd128=_0xa0f825[_0x4dd935(0xe2)][_0x1825be['id']];if(_0x4cd128!==undefined)_0x191a9e[_0x1825be[_0x4dd935(0x228)]]=_0x4cd128;}}Object['keys'](_0x191a9e)[_0x4dd935(0x261)]>0x0&&sendToPython(_0xa0f825,_0x4dd935(0x136),{'current_temps':_0x191a9e,'t_out':_0x2359df});}catch(_0x1e787d){}}function updateHealthVector(_0x336ca5){const _0x3c75c0=a0_0x1dc048;if(!_0x336ca5['rawEventLog']||_0x336ca5['rawEventLog']['length']===0x0)return;const _0x2b8966=new Array(0x60)['fill'](0x0),_0x5ccc52=new Date()[_0x3c75c0(0x169)](0x0,0x0,0x0,0x0);_0x336ca5[_0x3c75c0(0x192)]['forEach'](_0x10cea4=>{const _0x37096a=_0x3c75c0,_0x288eb1=new Date(_0x10cea4['timestamp']);if(_0x288eb1[_0x37096a(0x1b6)]()>=_0x5ccc52){const _0x3a0e4d=_0x288eb1[_0x37096a(0x121)](),_0x222279=_0x288eb1[_0x37096a(0x1b7)](),_0x56e2f8=_0x3a0e4d*0x4+Math[_0x37096a(0x1b4)](_0x222279/0xf);if(_0x56e2f8>=0x0&&_0x56e2f8<0x60)_0x2b8966[_0x56e2f8]++;}}),_0x336ca5['setStateAsync']('analysis.health.todayVector',{'val':JSON[_0x3c75c0(0x1ae)](_0x2b8966),'ack':!![]});}async function getWeatherContext(_0xfb7b1a){const _0x1f7e5c=a0_0x1dc048;if(!_0xfb7b1a[_0x1f7e5c(0x142)]['useWeather']||!_0xfb7b1a['config'][_0x1f7e5c(0x268)])return _0x1f7e5c(0x1b8);try{const _0x23d347=_0xfb7b1a[_0x1f7e5c(0x142)]['weatherInstance'];let _0x106045=await _0xfb7b1a['getForeignStateAsync'](_0x23d347+_0x1f7e5c(0x102));if(!_0x106045)_0x106045=await _0xfb7b1a[_0x1f7e5c(0x1ef)](_0x23d347+_0x1f7e5c(0x155));let _0x722cdc=await _0xfb7b1a[_0x1f7e5c(0x1ef)](_0x23d347+_0x1f7e5c(0xd8));if(!_0x722cdc)_0x722cdc=await _0xfb7b1a[_0x1f7e5c(0x1ef)](_0x23d347+'.forecast.current.state');if(_0x106045&&_0x722cdc)return _0x106045[_0x1f7e5c(0x252)]+_0x1f7e5c(0x1e8)+_0x722cdc['val'];}catch(_0x16e69a){}return _0x1f7e5c(0x1ed);}async function getCalendarContext(_0x2f552f){const _0x2a8831=a0_0x1dc048;if(!_0x2f552f[_0x2a8831(0x142)]['useCalendar']||!_0x2f552f[_0x2a8831(0x142)][_0x2a8831(0x21f)])return'Kalender\x20deaktiviert.';return _0x2a8831(0x164);}async function getCalendarNames(_0x3de445,_0x2eb34b){return[];}async function saveFeedback(_0x355bd1,_0x39c65e){_0x355bd1['log']['info']('ðŸ“\x20Feedback\x20received:\x20'+_0x39c65e['rating']);}async function runGeminiAnalysis(_0x2c6696,_0x56609c=''){const _0x2a744a=a0_0x1dc048;if(!_0x2c6696[_0x2a744a(0x1f2)])return;if(_0x2c6696['eventHistory'][_0x2a744a(0x261)]===0x0)return;const _0x693420=_0x2c6696['eventHistory'][_0x2a744a(0x10c)](0x0,0xf),_0x4da78e=await getWeatherContext(_0x2c6696),_0x1f5b5c=_0x2c6696[_0x2a744a(0x1a9)],_0x2632b8=PERSONA_MAPPING[_0x2c6696[_0x2a744a(0x142)][_0x2a744a(0x133)]||_0x2a744a(0x16a)],_0x1f0179=_0x2c6696[_0x2a744a(0x142)]['livingContext']||_0x2a744a(0x184);let _0x4367ab='Unbekannt';try{const _0x94ca3=await _0x2c6696[_0x2a744a(0x1d0)](_0x2a744a(0x239));if(_0x94ca3&&_0x94ca3['val'])_0x4367ab=_0x94ca3[_0x2a744a(0x252)];}catch(_0x56c794){}let _0x17fe47=![];try{const _0x4b1ceb=await _0x2c6696['getStateAsync'](_0x2a744a(0x1fc));if(_0x4b1ceb&&_0x4b1ceb[_0x2a744a(0x252)])_0x17fe47=!![];}catch(_0x1a2a2a){}const _0x3f57f8=_0x2a744a(0x167)+_0x2632b8+_0x2a744a(0x26e)+_0x1f0179+_0x2a744a(0x125)+_0x1f5b5c+_0x2a744a(0x139)+_0x4da78e+_0x2a744a(0x251)+_0x4367ab+'.\x20EVENTS:\x20'+JSON['stringify'](_0x693420)+'.\x20EMERGENCY:\x20'+_0x56609c+_0x2a744a(0x15c);try{const _0x9ab7cc=await _0x2c6696[_0x2a744a(0x1f2)][_0x2a744a(0x15d)](_0x3f57f8),_0x46653c=JSON[_0x2a744a(0xf5)](_0x9ab7cc['response'][_0x2a744a(0x126)]()[_0x2a744a(0x17a)](/```json|```/g,'')[_0x2a744a(0x13e)]());await _0x2c6696[_0x2a744a(0x1d7)](_0x2a744a(0x1f4),{'val':JSON['stringify'](_0x46653c),'ack':!![]});if(_0x46653c[_0x2a744a(0xde)])await _0x2c6696[_0x2a744a(0x1d7)](_0x2a744a(0x17c),{'val':_0x46653c[_0x2a744a(0xde)],'ack':!![]});const _0x1389e0={'timestamp':Date[_0x2a744a(0x14c)](),'id':Date[_0x2a744a(0x14c)]()[_0x2a744a(0x1bb)](),'analysis':{'activity':{'summary':_0x46653c[_0x2a744a(0xde)],'isAlert':_0x46653c['isAlert'],'alertReason':_0x46653c[_0x2a744a(0x1a4)]},'comfort':{'automationProposal':_0x46653c[_0x2a744a(0x17d)]}}};await updateAnalysisHistory(_0x2c6696,_0x1389e0);const _0x3958bd=_0x46653c[_0x2a744a(0x235)]||![];_0x3958bd!==_0x2c6696['lastAlertState']&&(await _0x2c6696[_0x2a744a(0x1d7)]('analysis.isAlert',{'val':_0x3958bd,'ack':!![]}),_0x2c6696[_0x2a744a(0x149)]=_0x3958bd,_0x3958bd&&(await _0x2c6696['setStateAsync']('analysis.alertReason',{'val':_0x46653c[_0x2a744a(0x1a4)],'ack':!![]}),sendNotification(_0x2c6696,_0x2a744a(0xd4)+_0x46653c[_0x2a744a(0x1a4)],![],_0x46653c['isEmergency'])));if(_0x46653c[_0x2a744a(0x17d)]&&_0x46653c[_0x2a744a(0x17d)]['detected']){await _0x2c6696[_0x2a744a(0x1d7)](_0x2a744a(0xec),{'val':!![],'ack':!![]}),await _0x2c6696[_0x2a744a(0x1d7)]('analysis.automation.description',{'val':_0x46653c['automationProposal'][_0x2a744a(0x179)],'ack':!![]}),await _0x2c6696['setStateAsync'](_0x2a744a(0xe0),{'val':_0x46653c[_0x2a744a(0x17d)][_0x2a744a(0x170)],'ack':!![]}),await _0x2c6696[_0x2a744a(0x1d7)](_0x2a744a(0x152),{'val':JSON[_0x2a744a(0x1ae)](_0x46653c[_0x2a744a(0x17d)][_0x2a744a(0x220)]),'ack':!![]});if(_0x17fe47)executeAutomationAction(_0x2c6696);}}catch(_0x3b211a){_0x2c6696['log'][_0x2a744a(0xdc)](_0x2a744a(0x212)+_0x3b211a['message']);}}async function startSystem(_0x56b901){const _0x5d065b=a0_0x1dc048;_0x56b901[_0x5d065b(0x15f)][_0x5d065b(0x110)](_0x5d065b(0x191)),await initZombies(_0x56b901);try{_0x56b901[_0x5d065b(0x1b9)]=await checkLicense(_0x56b901[_0x5d065b(0x142)][_0x5d065b(0x116)]);}catch(_0x4557be){}if(!_0x56b901[_0x5d065b(0x142)][_0x5d065b(0x1e3)]||_0x56b901[_0x5d065b(0x142)][_0x5d065b(0x1e3)]<0.1)_0x56b901[_0x5d065b(0x142)]['inactivityThresholdHours']=0xc;await initHistory(_0x56b901),await initSystemConfig(_0x56b901);if(_0x56b901['config'][_0x5d065b(0x161)])try{_0x56b901[_0x5d065b(0x14d)]=new GoogleGenerativeAI(_0x56b901[_0x5d065b(0x142)][_0x5d065b(0x161)]),_0x56b901['geminiModel']=_0x56b901[_0x5d065b(0x14d)][_0x5d065b(0xd9)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x5d065b(0x122)}}),_0x56b901[_0x5d065b(0x15f)][_0x5d065b(0x110)](_0x5d065b(0x223));}catch(_0x51607a){_0x56b901[_0x5d065b(0x15f)][_0x5d065b(0xdc)]('Gemini\x20Init\x20Error:\x20'+_0x51607a[_0x5d065b(0x187)]);}await createAllObjects(_0x56b901),await loadSystemMode(_0x56b901),await loadRawEventLog(_0x56b901),await loadDailyDigests(_0x56b901),_0x56b901[_0x5d065b(0x1a5)]('analysis.trigger'),_0x56b901[_0x5d065b(0x1a5)](LTM_DP_TRIGGER_DIGEST),_0x56b901[_0x5d065b(0x1a5)](_0x5d065b(0x147)),_0x56b901['subscribeStates'](_0x5d065b(0x14a)),_0x56b901['subscribeStates'](_0x5d065b(0x1fd)),_0x56b901['subscribeStates'](_0x5d065b(0x1fc)),_0x56b901['subscribeStates'](_0x5d065b(0x1cc)),_0x56b901[_0x5d065b(0x1a5)](_0x5d065b(0x180)),_0x56b901[_0x5d065b(0x1a5)](_0x5d065b(0x257)),_0x56b901[_0x5d065b(0x1a5)](_0x5d065b(0x12f)),_0x56b901[_0x5d065b(0x1a5)](_0x5d065b(0xef)),await initSensorSubscriptions(_0x56b901),await initPresenceSubscriptions(_0x56b901),await setupTelegramListener(_0x56b901),setTimeout(()=>checkWifiPresence(_0x56b901),0x1388);if(_0x56b901['analysisTimer'])clearInterval(_0x56b901[_0x5d065b(0x25f)]);const _0x38aa3c=_0x56b901[_0x5d065b(0x142)][_0x5d065b(0x138)]||0xf;_0x38aa3c>0x0&&(_0x56b901['analysisTimer']=setInterval(()=>{runAutopilot(_0x56b901);},_0x38aa3c*0x3c*0x3e8)),schedulers[_0x5d065b(0x25b)](_0x56b901,()=>createDailyDigest(_0x56b901)),schedulers[_0x5d065b(0x127)](_0x56b901),schedulers[_0x5d065b(0x115)](_0x56b901,()=>runBaselineDriftAnalysis(_0x56b901)),schedulers[_0x5d065b(0x18b)](_0x56b901,()=>sendMorningBriefing(_0x56b901)),startPythonService(_0x56b901),setTimeout(()=>{_0x56b901['pythonProcess']&&(runPythonHealthCheck(_0x56b901),triggerGaitAnalysis(_0x56b901),triggerEnergyPrediction(_0x56b901)),updateHealthVector(_0x56b901);},0x1388);}class CogniLiving extends utils['Adapter']{constructor(_0x2a491b){const _0xfc7881=a0_0x1dc048;super({..._0x2a491b,'name':_0xfc7881(0x201)}),this[_0xfc7881(0x182)]=[],this['analysisHistory']=[],this['rawEventLog']=[],this[_0xfc7881(0x1b3)]=[],this[_0xfc7881(0xe2)]={},this[_0xfc7881(0x24c)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0xfc7881(0x208)]=!![],this['exitTimer']=null,this[_0xfc7881(0x1cf)]=null,this[_0xfc7881(0x16f)]=![],this['genAI']=null,this[_0xfc7881(0x1f2)]=null,this[_0xfc7881(0x1a9)]=SYSTEM_MODES[_0xfc7881(0x10d)],this[_0xfc7881(0x1b9)]=![],this[_0xfc7881(0x149)]=![],this['systemUUID']=_0xfc7881(0x1ac),this['analysisTimer']=null,this['ltmJob']=null,this[_0xfc7881(0x188)]=null,this[_0xfc7881(0x1eb)]=null,this[_0xfc7881(0xe1)]=null,this[_0xfc7881(0x120)]=null,this[_0xfc7881(0x224)]=![],this['on'](_0xfc7881(0x12e),this[_0xfc7881(0x145)][_0xfc7881(0x177)](this)),this['on'](_0xfc7881(0xf0),this[_0xfc7881(0x24b)][_0xfc7881(0x177)](this)),this['on'](_0xfc7881(0x15e),this['onUnload']['bind'](this)),this['on'](_0xfc7881(0x187),this['onMessage'][_0xfc7881(0x177)](this));}async[a0_0x1dc048(0x145)](){const _0x2b08ba=a0_0x1dc048;this[_0x2b08ba(0x15f)][_0x2b08ba(0x110)](_0x2b08ba(0x213)+this[_0x2b08ba(0x1a3)]+')\x20-\x20SAFE\x20BOOT');if(!installer[_0x2b08ba(0x174)](this,()=>startSystem(this)))return;}[a0_0x1dc048(0x229)](_0x349e6b){const _0x2ec828=a0_0x1dc048;if(this[_0x2ec828(0x25f)])clearInterval(this[_0x2ec828(0x25f)]);if(this['driftAnalysisTimer'])clearInterval(this[_0x2ec828(0x1eb)]);if(this[_0x2ec828(0x141)])this[_0x2ec828(0x141)][_0x2ec828(0x20f)]();if(this[_0x2ec828(0x188)])this[_0x2ec828(0x188)][_0x2ec828(0x20f)]();if(this[_0x2ec828(0xe1)])this[_0x2ec828(0xe1)]['cancel']();if(this['exitTimer'])clearTimeout(this[_0x2ec828(0x207)]);if(this['exitGraceTimer'])clearTimeout(this[_0x2ec828(0x1cf)]);stopPythonService(this),_0x349e6b();}async['onStateChange'](_0x115de4,_0x5d42c6){const _0x6b946b=a0_0x1dc048;if(!_0x5d42c6||this['dependencyInstallInProgress'])return;if(_0x115de4['includes']('telegram')&&_0x115de4[_0x6b946b(0x202)](_0x6b946b(0x154))&&_0x5d42c6[_0x6b946b(0x252)]){await handleTelegramResponse(this,_0x5d42c6['val']);return;}if(_0x115de4===this[_0x6b946b(0x216)]+'.'+SYSTEM_DP_MODE){if(_0x5d42c6[_0x6b946b(0x252)]&&Object['values'](SYSTEM_MODES)['includes'](_0x5d42c6[_0x6b946b(0x252)])){this[_0x6b946b(0x1a9)]=_0x5d42c6[_0x6b946b(0x252)];if(_0x5d42c6[_0x6b946b(0x252)]===SYSTEM_MODES[_0x6b946b(0x1c5)])await setPresence(this,![]);else await setPresence(this,!![]);}if(!_0x5d42c6['ack'])this[_0x6b946b(0x1c8)](_0x115de4,{'val':this[_0x6b946b(0x1a9)],'ack':!![]});return;}if(!_0x5d42c6[_0x6b946b(0x259)]){_0x115de4[_0x6b946b(0x1c1)](_0x6b946b(0x178))&&_0x5d42c6[_0x6b946b(0x252)]&&(this[_0x6b946b(0x1c8)](_0x115de4,{'val':![],'ack':!![]}),runGeminiAnalysis(this));if(_0x115de4['includes'](_0x6b946b(0x108))&&_0x5d42c6[_0x6b946b(0x252)]){this[_0x6b946b(0x1c8)](_0x115de4,{'val':![],'ack':!![]});if(this[_0x6b946b(0x1b9)])createDailyDigest(this);}_0x115de4[_0x6b946b(0x1c1)](_0x6b946b(0x269))&&_0x5d42c6['val']&&(this[_0x6b946b(0x1c8)](_0x115de4,{'val':![],'ack':!![]}),sendMorningBriefing(this));_0x115de4['includes']('automation.triggerAction')&&_0x5d42c6['val']&&(this[_0x6b946b(0x1c8)](_0x115de4,{'val':![],'ack':!![]}),executeAutomationAction(this));if(_0x115de4['includes'](_0x6b946b(0x1cc))&&_0x5d42c6[_0x6b946b(0x252)]){this['setState'](_0x115de4,{'val':![],'ack':!![]});if(this[_0x6b946b(0x1b9)])try{const _0x143983=await this['getStateAsync'](_0x6b946b(0x1dd));if(_0x143983&&_0x143983[_0x6b946b(0x252)]){const _0x3575f7=JSON['parse'](_0x143983[_0x6b946b(0x252)]);this[_0x6b946b(0x15f)][_0x6b946b(0x110)]('ðŸ§ \x20Triggering\x20Security\x20Training...'),this[_0x6b946b(0x1d7)]('analysis.training.status',{'val':_0x6b946b(0xed),'ack':!![]}),sendToPython(this,_0x6b946b(0x267),{'sequences':_0x3575f7});}}catch(_0x355769){this['log']['error'](_0x6b946b(0x23d)+_0x355769[_0x6b946b(0x187)]);}}if(_0x115de4[_0x6b946b(0x1c1)](_0x6b946b(0x180))&&_0x5d42c6['val']){this['setState'](_0x115de4,{'val':![],'ack':!![]});if(this[_0x6b946b(0x1b9)])try{const _0x3e7003=await this['getStateAsync'](LTM_DP_DAILY_DIGESTS);if(_0x3e7003&&_0x3e7003['val'])sendToPython(this,_0x6b946b(0xf1),{'digests':JSON[_0x6b946b(0xf5)](_0x3e7003[_0x6b946b(0x252)])});}catch(_0x412bc7){}}if(_0x115de4[_0x6b946b(0x1c1)](_0x6b946b(0x257))&&_0x5d42c6[_0x6b946b(0x252)]){this[_0x6b946b(0x1c8)](_0x115de4,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x32000a=await this[_0x6b946b(0x1d0)](_0x6b946b(0x200));if(_0x32000a&&_0x32000a[_0x6b946b(0x252)])sendToPython(this,'TRAIN_ENERGY',{'points':JSON[_0x6b946b(0xf5)](_0x32000a[_0x6b946b(0x252)])});}catch(_0xe74aae){}}if(_0x115de4[_0x6b946b(0x1c1)](_0x6b946b(0x12f))&&_0x5d42c6[_0x6b946b(0x252)]){this[_0x6b946b(0x1c8)](_0x115de4,{'val':![],'ack':!![]});if(this[_0x6b946b(0x1b9)])try{const _0x58299a=await this[_0x6b946b(0x1d0)](LTM_DP_RAW_LOG);_0x58299a&&_0x58299a[_0x6b946b(0x252)]&&(this[_0x6b946b(0x15f)][_0x6b946b(0x110)](_0x6b946b(0xd3)),sendToPython(this,_0x6b946b(0x24d),{'events':JSON[_0x6b946b(0xf5)](_0x58299a[_0x6b946b(0x252)])}));}catch(_0x510e57){}}if(_0x115de4[_0x6b946b(0x1c1)](_0x6b946b(0xef))&&_0x5d42c6[_0x6b946b(0x252)]){this['setState'](_0x115de4,{'val':![],'ack':!![]});if(this[_0x6b946b(0x1b9)])try{const _0x353354=await this[_0x6b946b(0x1d0)](_0x6b946b(0x1dd));if(_0x353354&&_0x353354[_0x6b946b(0x252)]){const _0x45327a=JSON['parse'](_0x353354[_0x6b946b(0x252)]);this[_0x6b946b(0x15f)]['info'](_0x6b946b(0x148)),sendToPython(this,_0x6b946b(0xe6),{'sequences':_0x45327a});}}catch(_0x1fb4a8){this[_0x6b946b(0x15f)]['error']('Topology\x20Error:\x20'+_0x1fb4a8[_0x6b946b(0x187)]);}}return;}if(this[_0x6b946b(0x142)][_0x6b946b(0x1c2)]&&this['config'][_0x6b946b(0x1c2)]['includes'](_0x115de4)){await checkWifiPresence(this);return;}const _0x1365d3=(this[_0x6b946b(0x142)][_0x6b946b(0x176)]||[])[_0x6b946b(0xea)](_0x22e09b=>_0x22e09b['id']===_0x115de4);if(_0x1365d3)processSensorEvent(this,_0x115de4,_0x5d42c6,_0x1365d3);}async['onMessage'](_0x5b9c4a){const _0xbfeea5=a0_0x1dc048;if(typeof _0x5b9c4a===_0xbfeea5(0x163)&&_0x5b9c4a[_0xbfeea5(0x187)]){if(_0x5b9c4a[_0xbfeea5(0x153)]===_0xbfeea5(0x237)){const _0x59a8e2=_0x5b9c4a['message'][_0xbfeea5(0x195)]||this[_0xbfeea5(0x142)]['geminiApiKey'];if(!_0x59a8e2)return this[_0xbfeea5(0x185)](_0x5b9c4a[_0xbfeea5(0x13c)],_0x5b9c4a['command'],{'success':![],'message':_0xbfeea5(0x20a)},_0x5b9c4a[_0xbfeea5(0x221)]);try{const _0x512f36=new GoogleGenerativeAI(_0x59a8e2),_0x183dd6=_0x512f36[_0xbfeea5(0xd9)]({'model':GEMINI_MODEL}),_0x492687=await _0x183dd6[_0xbfeea5(0x15d)]('Hi');this[_0xbfeea5(0x185)](_0x5b9c4a[_0xbfeea5(0x13c)],_0x5b9c4a[_0xbfeea5(0x153)],{'success':!![],'message':_0xbfeea5(0x222)+_0x492687[_0xbfeea5(0x1a0)]['text']()},_0x5b9c4a[_0xbfeea5(0x221)]);}catch(_0x117ff6){this[_0xbfeea5(0x185)](_0x5b9c4a[_0xbfeea5(0x13c)],_0x5b9c4a[_0xbfeea5(0x153)],{'success':![],'message':'Err:\x20'+_0x117ff6['message']},_0x5b9c4a[_0xbfeea5(0x221)]);}}else{if(_0x5b9c4a[_0xbfeea5(0x153)]==='testContext'){const _0x422455=await getWeatherContext(this),_0x353624=await getCalendarContext(this);this[_0xbfeea5(0x185)](_0x5b9c4a[_0xbfeea5(0x13c)],_0x5b9c4a[_0xbfeea5(0x153)],{'success':!![],'weather':_0x422455,'calendar':_0x353624},_0x5b9c4a['callback']);}else{if(_0x5b9c4a[_0xbfeea5(0x153)]===_0xbfeea5(0xdb)){if(!this[_0xbfeea5(0x1b9)])return this['sendTo'](_0x5b9c4a[_0xbfeea5(0x13c)],_0x5b9c4a[_0xbfeea5(0x153)],{'success':![],'isPro':![]},_0x5b9c4a[_0xbfeea5(0x221)]);let _0x403124={'status':_0xbfeea5(0x198)};try{const _0xdc15c8=await this['getStateAsync'](LTM_DP_DRIFT_STATUS);_0x403124[_0xbfeea5(0x243)]=_0xdc15c8?_0xdc15c8['val']:_0xbfeea5(0x198);}catch(_0x48fac3){}this[_0xbfeea5(0x185)](_0x5b9c4a[_0xbfeea5(0x13c)],_0x5b9c4a['command'],{'success':!![],'isPro':!![],'dailyDigests':this[_0xbfeea5(0x1b3)],'driftAnalysis':_0x403124,'analysisHistory':this[_0xbfeea5(0x143)]},_0x5b9c4a['callback']);}else{if(_0x5b9c4a[_0xbfeea5(0x153)]==='getOverviewData'){const _0x1917f7=this[_0xbfeea5(0x1b3)][_0xbfeea5(0x261)],_0x4702ea=new Date(),_0x50228a=new Date(_0x4702ea[_0xbfeea5(0x113)](),_0x4702ea[_0xbfeea5(0xf4)](),_0x4702ea[_0xbfeea5(0x1bf)]())['getTime'](),_0x47fd06=this[_0xbfeea5(0x192)][_0xbfeea5(0xfe)](_0x278084=>new Date(_0x278084[_0xbfeea5(0xd2)])[_0xbfeea5(0x1b6)]()>_0x50228a)['length'],_0x4268dd=new Array(0x18)[_0xbfeea5(0x1ec)](0x0);this[_0xbfeea5(0x192)][_0xbfeea5(0xeb)](_0xdddc8e=>{const _0x5b513a=_0xbfeea5,_0x34e358=new Date(_0xdddc8e[_0x5b513a(0xd2)]);if(_0x34e358['getTime']()>_0x50228a)_0x4268dd[_0x34e358[_0x5b513a(0x121)]()]++;});let _0x51919b={'status':_0xbfeea5(0x198)};try{const _0x537e00=await this[_0xbfeea5(0x1d0)](LTM_DP_DRIFT_STATUS);_0x51919b[_0xbfeea5(0x243)]=_0x537e00?_0x537e00[_0xbfeea5(0x252)]:_0xbfeea5(0x198);}catch(_0x23f425){}let _0x5f3250='';try{const _0x478d69=await this[_0xbfeea5(0x1d0)](_0xbfeea5(0x239));_0x5f3250=_0x478d69?_0x478d69['val']:'';}catch(_0x4701a9){}let _0x120379=null;!this[_0xbfeea5(0x1f2)]&&(_0x120379=this[_0xbfeea5(0x142)]['geminiApiKey']?_0xbfeea5(0x1e2):_0xbfeea5(0x1d5));let _0x2f8f05={'detected':![],'description':'','targetId':'','targetValue':'','autoApply':![]};try{const _0x37492a=await this[_0xbfeea5(0x1d0)](_0xbfeea5(0xec));if(_0x37492a&&_0x37492a[_0xbfeea5(0x252)]){_0x2f8f05['detected']=!![];const _0x3e3827=await this[_0xbfeea5(0x1d0)](_0xbfeea5(0x131));_0x2f8f05[_0xbfeea5(0x179)]=_0x3e3827?_0x3e3827[_0xbfeea5(0x252)]:'';const _0x149d9f=await this[_0xbfeea5(0x1d0)]('analysis.automation.targetId');_0x2f8f05['targetId']=_0x149d9f?_0x149d9f[_0xbfeea5(0x252)]:'';const _0x400669=await this['getStateAsync'](_0xbfeea5(0x152));_0x2f8f05[_0xbfeea5(0x220)]=_0x400669?_0x400669['val']:'';}const _0xb19372=await this[_0xbfeea5(0x1d0)](_0xbfeea5(0x1fc));_0x2f8f05[_0xbfeea5(0x18f)]=_0xb19372?!!_0xb19372[_0xbfeea5(0x252)]:![];}catch(_0x259284){}this[_0xbfeea5(0x185)](_0x5b9c4a['from'],_0x5b9c4a[_0xbfeea5(0x153)],{'success':!![],'eventHistory':this['eventHistory']['slice'](0x0,0xf),'stats':{'digestCount':_0x1917f7,'eventCountToday':_0x47fd06,'hourlyActivity':_0x4268dd,'driftStatus':_0x51919b[_0xbfeea5(0x243)],'isPresent':this[_0xbfeea5(0x208)],'presenceWho':_0x5f3250,'minDays':this[_0xbfeea5(0x142)][_0xbfeea5(0x14e)]||0x7,'stbDays':this[_0xbfeea5(0x142)][_0xbfeea5(0x18a)]||0xe,'ltbDays':this[_0xbfeea5(0x142)]['ltmLtbWindowDays']||0x3c,'systemError':_0x120379},'automation':_0x2f8f05},_0x5b9c4a[_0xbfeea5(0x221)]);}else{if(_0x5b9c4a['command']===_0xbfeea5(0x1e4))try{const _0x5c39a8=await scanner[_0xbfeea5(0x11e)](this,_0x5b9c4a[_0xbfeea5(0x187)]||{});this[_0xbfeea5(0x185)](_0x5b9c4a[_0xbfeea5(0x13c)],_0x5b9c4a['command'],{'success':!![],'devices':_0x5c39a8},_0x5b9c4a[_0xbfeea5(0x221)]);}catch(_0x4eeb63){this['sendTo'](_0x5b9c4a[_0xbfeea5(0x13c)],_0x5b9c4a[_0xbfeea5(0x153)],{'success':![],'error':_0x4eeb63[_0xbfeea5(0x187)]},_0x5b9c4a[_0xbfeea5(0x221)]);}else{if(_0x5b9c4a[_0xbfeea5(0x153)]===_0xbfeea5(0x232)){const _0x2df528=await this[_0xbfeea5(0x1ab)](_0xbfeea5(0x181),'enum'),_0x1918a0=[];if(_0x2df528)for(const _0x458be7 in _0x2df528){const _0x180cb7=_0x2df528[_0x458be7],_0x2f86db=(_0x180cb7[_0xbfeea5(0x1dc)]&&typeof _0x180cb7[_0xbfeea5(0x1dc)][_0xbfeea5(0x171)]===_0xbfeea5(0x163)?_0x180cb7[_0xbfeea5(0x1dc)][_0xbfeea5(0x171)]['de']:_0x180cb7[_0xbfeea5(0x1dc)][_0xbfeea5(0x171)])||_0x180cb7['common'][_0xbfeea5(0x171)];_0x1918a0[_0xbfeea5(0x11b)]({'id':_0x458be7,'name':_0x2f86db});}const _0x5cb8c7=await this[_0xbfeea5(0x1ab)]('enum.rooms.*',_0xbfeea5(0xfb)),_0x2f4439=[];if(_0x5cb8c7)for(const _0xa4e2e in _0x5cb8c7){const _0xc265c3=_0x5cb8c7[_0xa4e2e],_0x3a619f=(_0xc265c3[_0xbfeea5(0x1dc)]&&typeof _0xc265c3[_0xbfeea5(0x1dc)][_0xbfeea5(0x171)]===_0xbfeea5(0x163)?_0xc265c3[_0xbfeea5(0x1dc)]['name']['de']:_0xc265c3[_0xbfeea5(0x1dc)]['name'])||_0xa4e2e['split']('.')[_0xbfeea5(0x13b)]();_0x2f4439['push'](_0x3a619f);}this[_0xbfeea5(0x185)](_0x5b9c4a[_0xbfeea5(0x13c)],_0x5b9c4a['command'],{'success':!![],'enums':_0x1918a0,'rooms':_0x2f4439},_0x5b9c4a[_0xbfeea5(0x221)]);}else{if(_0x5b9c4a[_0xbfeea5(0x153)]===_0xbfeea5(0x206)){const _0x481271=_0x5b9c4a[_0xbfeea5(0x187)]['instance'];if(!_0x481271)return this[_0xbfeea5(0x185)](_0x5b9c4a[_0xbfeea5(0x13c)],_0x5b9c4a['command'],{'success':![],'error':_0xbfeea5(0x265)},_0x5b9c4a[_0xbfeea5(0x221)]);const _0x11e2f2=await getCalendarNames(this,_0x481271);this[_0xbfeea5(0x185)](_0x5b9c4a[_0xbfeea5(0x13c)],_0x5b9c4a[_0xbfeea5(0x153)],{'success':!![],'names':_0x11e2f2},_0x5b9c4a[_0xbfeea5(0x221)]);}else{if(_0x5b9c4a[_0xbfeea5(0x153)]===_0xbfeea5(0x194)){const {targetId:_0x8a35a2,targetValue:_0x2938f2}=_0x5b9c4a[_0xbfeea5(0x187)];this[_0xbfeea5(0x15f)][_0xbfeea5(0x110)](_0xbfeea5(0x1e7)+_0x8a35a2+'\x20=\x20'+_0x2938f2),await this[_0xbfeea5(0x1d7)](_0xbfeea5(0xec),{'val':!![],'ack':!![]}),await this[_0xbfeea5(0x1d7)]('analysis.automation.description',{'val':'SIMULATION:\x20Test-Vorschlag\x20fÃ¼r\x20'+_0x8a35a2,'ack':!![]}),await this[_0xbfeea5(0x1d7)]('analysis.automation.targetId',{'val':_0x8a35a2,'ack':!![]}),await this[_0xbfeea5(0x1d7)](_0xbfeea5(0x152),{'val':_0x2938f2,'ack':!![]}),this[_0xbfeea5(0x185)](_0x5b9c4a[_0xbfeea5(0x13c)],_0x5b9c4a[_0xbfeea5(0x153)],{'success':!![]},_0x5b9c4a[_0xbfeea5(0x221)]);}else{if(_0x5b9c4a['command']===_0xbfeea5(0x1c9)){const {historyId:_0x551017,rating:_0x972e2f,comment:_0x5295e6,alertReason:_0x5c9773}=_0x5b9c4a[_0xbfeea5(0x187)];_0x551017&&_0x972e2f?(await saveFeedback(this,{'timestamp':Date['now'](),'historyId':_0x551017,'rating':_0x972e2f,'comment':_0x5295e6,'alertReason':_0x5c9773}),this[_0xbfeea5(0x185)](_0x5b9c4a[_0xbfeea5(0x13c)],_0x5b9c4a[_0xbfeea5(0x153)],{'success':!![]},_0x5b9c4a[_0xbfeea5(0x221)])):this['sendTo'](_0x5b9c4a[_0xbfeea5(0x13c)],_0x5b9c4a[_0xbfeea5(0x153)],{'success':![],'error':_0xbfeea5(0x20c)},_0x5b9c4a[_0xbfeea5(0x221)]);}else _0x5b9c4a['command']==='dismissAutomation'&&(this[_0xbfeea5(0x15f)][_0xbfeea5(0x110)](_0xbfeea5(0x166)),await this[_0xbfeea5(0x1d7)](_0xbfeea5(0xec),{'val':![],'ack':!![]}),await this[_0xbfeea5(0x1d7)](_0xbfeea5(0x131),{'val':'','ack':!![]}),this[_0xbfeea5(0x185)](_0x5b9c4a['from'],_0x5b9c4a['command'],{'success':!![]},_0x5b9c4a[_0xbfeea5(0x221)]));}}}}}}}}}}}if(require[a0_0x1dc048(0xd7)]!==module)module[a0_0x1dc048(0x256)]=_0x43f57e=>new CogniLiving(_0x43f57e);else new CogniLiving();