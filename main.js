const a0_0x4de157=a0_0x4c5f;(function(_0x27e676,_0x28c753){const _0x23785c=a0_0x4c5f,_0x55605b=_0x27e676();while(!![]){try{const _0x1fdb87=-parseInt(_0x23785c(0x284))/0x1+parseInt(_0x23785c(0x25f))/0x2*(-parseInt(_0x23785c(0x286))/0x3)+-parseInt(_0x23785c(0x162))/0x4+-parseInt(_0x23785c(0x180))/0x5*(parseInt(_0x23785c(0x265))/0x6)+parseInt(_0x23785c(0x1d0))/0x7+parseInt(_0x23785c(0x166))/0x8+-parseInt(_0x23785c(0x122))/0x9*(-parseInt(_0x23785c(0x1fa))/0xa);if(_0x1fdb87===_0x28c753)break;else _0x55605b['push'](_0x55605b['shift']());}catch(_0x8b45f0){_0x55605b['push'](_0x55605b['shift']());}}}(a0_0x1eb4,0x23204));const a0_0x37f48d=(function(){let _0xcf48a2=!![];return function(_0x5281f8,_0x3f604e){const _0x37eca4=_0xcf48a2?function(){const _0x59e48c=a0_0x4c5f;if(_0x3f604e){const _0x64ec70=_0x3f604e[_0x59e48c(0x245)](_0x5281f8,arguments);return _0x3f604e=null,_0x64ec70;}}:function(){};return _0xcf48a2=![],_0x37eca4;};}()),a0_0x226ba5=a0_0x37f48d(this,function(){const _0xe973d8=a0_0x4c5f;return a0_0x226ba5['toString']()[_0xe973d8(0x119)](_0xe973d8(0x253))['toString']()['constructor'](a0_0x226ba5)[_0xe973d8(0x119)](_0xe973d8(0x253));});a0_0x226ba5();'use strict';const utils=require('@iobroker/adapter-core'),{GoogleGenerativeAI}=require(a0_0x4de157(0x270)),{spawn}=require(a0_0x4de157(0x160)),path=require(a0_0x4de157(0x216)),fs=require('fs'),installer=require('./lib/installer'),scanner=require(a0_0x4de157(0x2b3)),schedulers=require(a0_0x4de157(0x1d4)),HISTORY_MAX_SIZE=0x32,RAW_LOG_MAX_SIZE=0x9c4,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL=a0_0x4de157(0x20d),SEQUENCE_TIMEOUT_MS=0x5*0x3c*0x3e8,MAX_TRAINING_SET_SIZE=0x1f4,THERMO_LOG_SIZE=0x3e8,EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,LTM_DP_RAW_LOG=a0_0x4de157(0x16a),LTM_DP_DAILY_DIGESTS=a0_0x4de157(0x146),LTM_DP_STATUS='LTM.processingStatus',LTM_DP_TRIGGER_DIGEST=a0_0x4de157(0x24a),LTM_DP_BASELINE_STATUS=a0_0x4de157(0x215),LTM_DP_DRIFT_CHANNEL='LTM.driftAnalysis',LTM_DP_DRIFT_STATUS=a0_0x4de157(0x20c),LTM_DP_DRIFT_DETAILS=a0_0x4de157(0x2a2),LTM_DP_DRIFT_LAST_CHECK=a0_0x4de157(0x1a0),SYSTEM_DP_MODE=a0_0x4de157(0x1f5),SYSTEM_MODES={'NORMAL':a0_0x4de157(0x2ae),'VACATION':a0_0x4de157(0x1c5),'PARTY':'party','GUEST':a0_0x4de157(0x208)},AUTO_RESET_MODES=[SYSTEM_MODES[a0_0x4de157(0x175)],SYSTEM_MODES[a0_0x4de157(0x212)]],PERSONA_MAPPING={'generic':a0_0x4de157(0x1dd),'senior_aal':a0_0x4de157(0x1c2),'family':a0_0x4de157(0x273),'single_comfort':'Fokus\x20auf\x20Komfort.','security':a0_0x4de157(0x237)},ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};let activeSequence=[],sequenceTimer=null;async function initZombies(_0xde5b11){const _0x2d0154=a0_0x4de157;try{const _0x4b3e4d=['analysis.history_debug_00',_0x2d0154(0x28c)];for(const _0x533fc5 of _0x4b3e4d){try{const _0x3e1ee0=await _0xde5b11[_0x2d0154(0x15b)](_0x533fc5);if(_0x3e1ee0)await _0xde5b11[_0x2d0154(0x217)](_0x533fc5);}catch(_0x42e22e){}}}catch(_0x2792fa){}}async function checkLicense(_0x341800){return!![];}async function initHistory(_0x475144){const _0x1cca18=a0_0x4de157;try{const _0x27549f=await _0x475144['getStateAsync']('events.history');_0x27549f&&_0x27549f[_0x1cca18(0x1e6)]&&(_0x475144['eventHistory']=JSON[_0x1cca18(0x16f)](_0x27549f['val'][_0x1cca18(0x171)]()));}catch(_0xeefec){_0x475144[_0x1cca18(0x236)]=[];}try{const _0x6ff6d3=await _0x475144[_0x1cca18(0x287)]('analysis.analysisHistory');if(_0x6ff6d3&&_0x6ff6d3[_0x1cca18(0x1e6)])_0x475144[_0x1cca18(0x238)]=JSON[_0x1cca18(0x16f)](_0x6ff6d3[_0x1cca18(0x1e6)][_0x1cca18(0x171)]());}catch(_0x51b9e9){_0x475144[_0x1cca18(0x238)]=[];}if(_0x475144[_0x1cca18(0x236)]&&_0x475144['eventHistory']['length']>0x0){_0x475144[_0x1cca18(0x173)]['info'](_0x1cca18(0x1ce));for(let _0x2f6fa6=_0x475144[_0x1cca18(0x236)]['length']-0x1;_0x2f6fa6>=0x0;_0x2f6fa6--){const _0x2e1f61=_0x475144[_0x1cca18(0x236)][_0x2f6fa6];if(_0x2e1f61&&_0x2e1f61['id']!==undefined&&_0x2e1f61[_0x1cca18(0x213)]!==undefined)_0x475144[_0x1cca18(0x1b8)][_0x2e1f61['id']]=_0x2e1f61['value'];}}}async function initSystemConfig(_0xf22b5b){const _0x2afcb1=a0_0x4de157;try{const _0x3ae710=await _0xf22b5b[_0x2afcb1(0x179)](_0x2afcb1(0x276));if(_0x3ae710&&_0x3ae710[_0x2afcb1(0x23c)])_0xf22b5b[_0x2afcb1(0x115)]={'latitude':_0x3ae710[_0x2afcb1(0x23c)][_0x2afcb1(0x29a)]||0x0,'longitude':_0x3ae710[_0x2afcb1(0x23c)][_0x2afcb1(0x1b4)]||0x0,'city':_0x3ae710[_0x2afcb1(0x23c)][_0x2afcb1(0x12a)]||''};}catch(_0x36ea3f){}}async function createAllObjects(_0x2f6423){const _0x930b32=a0_0x4de157;await _0x2f6423['extendObjectAsync'](_0x930b32(0x1c4),{'type':_0x930b32(0x1e5),'common':{'name':_0x930b32(0x19b)},'native':{}}),await _0x2f6423[_0x930b32(0x27e)](SYSTEM_DP_MODE,{'type':_0x930b32(0x20e),'common':{'name':'System\x20Mode','type':_0x930b32(0x1f7),'role':_0x930b32(0x20e),'read':!![],'write':!![],'def':SYSTEM_MODES[_0x930b32(0x142)]},'native':{}}),await _0x2f6423[_0x930b32(0x18b)](_0x930b32(0x1d3),{'type':_0x930b32(0x20e),'common':{'name':_0x930b32(0x1da),'type':'string','role':_0x930b32(0x1dc),'read':!![],'write':![]},'native':{}}),await _0x2f6423['setObjectNotExistsAsync'](_0x930b32(0x14a),{'type':_0x930b32(0x20e),'common':{'name':_0x930b32(0x131),'type':_0x930b32(0x1f7),'role':'json','read':!![],'write':![]},'native':{}}),await _0x2f6423[_0x930b32(0x18b)]('events.history',{'type':_0x930b32(0x20e),'common':{'name':_0x930b32(0x21f),'type':_0x930b32(0x1f7),'role':_0x930b32(0x1a5),'read':!![],'write':![]},'native':{}}),await _0x2f6423[_0x930b32(0x27e)](_0x930b32(0x26c),{'type':_0x930b32(0x1e5),'common':{'name':_0x930b32(0x129)},'native':{}}),await _0x2f6423['setObjectNotExistsAsync'](_0x930b32(0x127),{'type':_0x930b32(0x20e),'common':{'name':_0x930b32(0x1ab),'type':_0x930b32(0x1a7),'role':'button','read':!![],'write':!![]},'native':{}}),await _0x2f6423[_0x930b32(0x18b)](_0x930b32(0x218),{'type':'state','common':{'name':_0x930b32(0x1e9),'type':_0x930b32(0x1a7),'role':_0x930b32(0x27d),'read':!![],'write':!![]},'native':{}}),await _0x2f6423[_0x930b32(0x18b)]('analysis.training.triggerEnergy',{'type':_0x930b32(0x20e),'common':{'name':_0x930b32(0x12c),'type':'boolean','role':_0x930b32(0x27d),'read':!![],'write':!![]},'native':{}}),await _0x2f6423[_0x930b32(0x18b)]('analysis.training.triggerComfort',{'type':_0x930b32(0x20e),'common':{'name':'Train\x20Comfort','type':_0x930b32(0x1a7),'role':_0x930b32(0x27d),'read':!![],'write':!![]},'native':{}}),await _0x2f6423[_0x930b32(0x18b)]('analysis.training.triggerTopology',{'type':'state','common':{'name':_0x930b32(0x1a9),'type':'boolean','role':_0x930b32(0x27d),'read':!![],'write':!![]},'native':{}}),await _0x2f6423['setObjectNotExistsAsync'](_0x930b32(0x188),{'type':_0x930b32(0x20e),'common':{'name':_0x930b32(0x195),'type':_0x930b32(0x1f7),'role':_0x930b32(0x1dc),'read':!![],'write':![]},'native':{}}),await _0x2f6423['extendObjectAsync'](_0x930b32(0x123),{'type':'channel','common':{'name':'Security\x20Monitor'},'native':{}}),await _0x2f6423[_0x930b32(0x18b)]('analysis.security.lastScore',{'type':_0x930b32(0x20e),'common':{'name':_0x930b32(0x17a),'type':_0x930b32(0x18a),'role':_0x930b32(0x213),'read':!![],'write':![]},'native':{}}),await _0x2f6423[_0x930b32(0x18b)]('analysis.security.currentThreshold',{'type':_0x930b32(0x20e),'common':{'name':_0x930b32(0x1c6),'type':_0x930b32(0x18a),'role':_0x930b32(0x213),'read':!![],'write':![],'def':0.05},'native':{}}),await _0x2f6423['setObjectNotExistsAsync']('analysis.security.lastCheck',{'type':_0x930b32(0x20e),'common':{'name':_0x930b32(0x23f),'type':'string','role':_0x930b32(0x118),'read':!![],'write':![]},'native':{}}),await _0x2f6423[_0x930b32(0x18b)](_0x930b32(0x23d),{'type':'state','common':{'name':_0x930b32(0x1f6),'type':_0x930b32(0x1f7),'role':'json','read':!![],'write':![]},'native':{}}),await _0x2f6423[_0x930b32(0x27e)](_0x930b32(0x25d),{'type':_0x930b32(0x1e5),'common':{'name':_0x930b32(0x17d)},'native':{}}),await _0x2f6423[_0x930b32(0x18b)]('analysis.health.lastCheck',{'type':_0x930b32(0x20e),'common':{'name':_0x930b32(0x23f),'type':_0x930b32(0x1f7),'role':_0x930b32(0x118),'read':!![],'write':![]},'native':{}}),await _0x2f6423[_0x930b32(0x18b)](_0x930b32(0x2a4),{'type':'state','common':{'name':_0x930b32(0x24f),'type':_0x930b32(0x1a7),'role':_0x930b32(0x1f8),'read':!![],'write':![]},'native':{}}),await _0x2f6423[_0x930b32(0x18b)]('analysis.health.trendDiagnosis',{'type':'state','common':{'name':_0x930b32(0x293),'type':'string','role':_0x930b32(0x1dc),'read':!![],'write':![]},'native':{}}),await _0x2f6423[_0x930b32(0x18b)]('analysis.health.trendValue',{'type':_0x930b32(0x20e),'common':{'name':'Trend\x20Value','type':_0x930b32(0x18a),'role':_0x930b32(0x213),'read':!![],'write':![]},'native':{}}),await _0x2f6423[_0x930b32(0x18b)](_0x930b32(0x15c),{'type':_0x930b32(0x20e),'common':{'name':_0x930b32(0x25a),'type':_0x930b32(0x1f7),'role':_0x930b32(0x1a5),'read':!![],'write':![]},'native':{}}),await _0x2f6423[_0x930b32(0x18b)](_0x930b32(0x263),{'type':'state','common':{'name':_0x930b32(0x168),'type':_0x930b32(0x18a),'role':'value','read':!![],'write':![]},'native':{}}),await _0x2f6423[_0x930b32(0x27e)](_0x930b32(0x22f),{'type':_0x930b32(0x1e5),'common':{'name':_0x930b32(0x221)},'native':{}}),await _0x2f6423[_0x930b32(0x18b)](_0x930b32(0x1ff),{'type':'state','common':{'name':_0x930b32(0x1a6),'type':_0x930b32(0x1f7),'role':'text','read':!![],'write':![]},'native':{}}),await _0x2f6423[_0x930b32(0x18b)](_0x930b32(0x290),{'type':_0x930b32(0x20e),'common':{'name':_0x930b32(0x16e),'type':'string','role':_0x930b32(0x1dc),'read':!![],'write':![]},'native':{}}),await _0x2f6423['setObjectNotExistsAsync'](_0x930b32(0x229),{'type':_0x930b32(0x20e),'common':{'name':_0x930b32(0x241),'type':_0x930b32(0x1f7),'role':_0x930b32(0x1a5),'read':!![],'write':![]},'native':{}}),await _0x2f6423['extendObjectAsync'](_0x930b32(0x295),{'type':_0x930b32(0x1e5),'common':{'name':_0x930b32(0x295)},'native':{}}),await _0x2f6423[_0x930b32(0x27e)](LTM_DP_RAW_LOG,{'type':_0x930b32(0x20e),'common':{'name':_0x930b32(0x207),'type':_0x930b32(0x1f7),'role':'json','read':!![],'write':![]},'native':{}}),await _0x2f6423[_0x930b32(0x27e)](LTM_DP_DAILY_DIGESTS,{'type':_0x930b32(0x20e),'common':{'name':_0x930b32(0x14e),'type':_0x930b32(0x1f7),'role':_0x930b32(0x1a5),'read':!![],'write':![]},'native':{}}),await _0x2f6423[_0x930b32(0x18b)](_0x930b32(0x1eb),{'type':_0x930b32(0x20e),'common':{'name':_0x930b32(0x16b),'type':'string','role':_0x930b32(0x1a5),'read':!![],'write':![]},'native':{}}),await _0x2f6423[_0x930b32(0x18b)](_0x930b32(0x19e),{'type':_0x930b32(0x20e),'common':{'name':_0x930b32(0x267),'type':'string','role':_0x930b32(0x1a5),'read':!![],'write':![]},'native':{}}),await _0x2f6423['setObjectNotExistsAsync'](_0x930b32(0x239),{'type':_0x930b32(0x20e),'common':{'name':_0x930b32(0x11d),'type':'boolean','role':_0x930b32(0x27d),'read':!![],'write':!![]},'native':{}}),await _0x2f6423[_0x930b32(0x18b)](_0x930b32(0x1c3),{'type':_0x930b32(0x20e),'common':{'name':_0x930b32(0x1ef),'type':_0x930b32(0x1a7),'role':_0x930b32(0x27d),'read':!![],'write':!![]},'native':{}}),await _0x2f6423['setObjectNotExistsAsync'](_0x930b32(0x223),{'type':_0x930b32(0x20e),'common':{'name':'Alert\x20Status','type':_0x930b32(0x1a7),'role':'indicator.alarm','read':!![],'write':![]},'native':{}}),await _0x2f6423[_0x930b32(0x18b)](_0x930b32(0x144),{'type':'state','common':{'name':_0x930b32(0x1b3),'type':_0x930b32(0x1f7),'role':_0x930b32(0x137),'read':!![],'write':![]},'native':{}}),await _0x2f6423[_0x930b32(0x18b)](_0x930b32(0x1d6),{'type':_0x930b32(0x20e),'common':{'name':_0x930b32(0x1fd),'type':_0x930b32(0x1f7),'role':_0x930b32(0x1dc),'read':!![],'write':![]},'native':{}}),await _0x2f6423[_0x930b32(0x18b)](_0x930b32(0x211),{'type':_0x930b32(0x20e),'common':{'name':'Pattern\x20Detected','type':_0x930b32(0x1a7),'role':_0x930b32(0x1f8),'read':!![],'write':![]},'native':{}}),await _0x2f6423[_0x930b32(0x18b)](_0x930b32(0x187),{'type':_0x930b32(0x20e),'common':{'name':_0x930b32(0x125),'type':_0x930b32(0x1f7),'role':_0x930b32(0x1dc),'read':!![],'write':![]},'native':{}}),await _0x2f6423[_0x930b32(0x18b)](_0x930b32(0x13a),{'type':_0x930b32(0x20e),'common':{'name':_0x930b32(0x1b7),'type':_0x930b32(0x1f7),'role':_0x930b32(0x1a5),'read':!![],'write':![]},'native':{}}),await _0x2f6423[_0x930b32(0x18b)](_0x930b32(0x266),{'type':_0x930b32(0x20e),'common':{'name':'Target\x20ID','type':_0x930b32(0x1f7),'role':_0x930b32(0x1dc),'read':!![],'write':![]},'native':{}}),await _0x2f6423['setObjectNotExistsAsync'](_0x930b32(0x250),{'type':_0x930b32(0x20e),'common':{'name':'Target\x20Value','type':_0x930b32(0x1f7),'role':_0x930b32(0x1dc),'read':!![],'write':![]},'native':{}}),await _0x2f6423[_0x930b32(0x18b)](_0x930b32(0x1ed),{'type':_0x930b32(0x20e),'common':{'name':_0x930b32(0x269),'type':_0x930b32(0x1a7),'role':'switch','read':!![],'write':!![]},'native':{}}),await _0x2f6423['setObjectNotExistsAsync'](_0x930b32(0x163),{'type':_0x930b32(0x20e),'common':{'name':_0x930b32(0x132),'type':_0x930b32(0x1a7),'role':'button','read':!![],'write':!![]},'native':{}});}async function loadSystemMode(_0x58803d){const _0x7e8c68=a0_0x4de157;try{const _0xc5a82a=await _0x58803d['getStateAsync'](SYSTEM_DP_MODE);_0xc5a82a&&_0xc5a82a[_0x7e8c68(0x1e6)]&&Object[_0x7e8c68(0x1ca)](SYSTEM_MODES)['includes'](_0xc5a82a[_0x7e8c68(0x1e6)])?_0x58803d[_0x7e8c68(0x262)]=_0xc5a82a['val']:(_0x58803d[_0x7e8c68(0x262)]=SYSTEM_MODES[_0x7e8c68(0x142)],await _0x58803d['setStateAsync'](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x7e8c68(0x142)],'ack':!![]}));}catch(_0x371615){_0x58803d['currentSystemMode']=SYSTEM_MODES[_0x7e8c68(0x142)];}}function a0_0x1eb4(){const _0x10673a=['setState','getLtmData','status','schalter','Raw\x20Log','guest','GAIT_RESULT','TRAIN_ENERGY','inactivityThresholdHours','LTM.driftAnalysis.baselineDrift','models/gemini-flash-latest','state','SIMULATION:\x20Test-Vorschlag\x20fÃ¼r\x20','presenceDevices','analysis.automation.patternDetected','GUEST','value','ðŸ›‹ï¸\x20BUTLER:\x20Keine\x20neuen\x20Muster\x20gefunden.','LTM.baselineStatus','path','delObjectAsync','analysis.training.triggerHealth','fenster','\x20new\x20patterns.','window','geminiModel','Gemini\x20AI\x20initialized.','slice','Event\x20History','prÃ¤senz','Energy\x20Intelligence','.NextHours.Location_1.Day_1.current.temp_value','analysis.isAlert','.\x20ANWESEND:\x20','payload','Err:\x20','application/json','analysis.lastResult','analysis.energy.forecast','livingContext','substring','timestamp','Gemini\x20Error:\x20','ANALYZE_GAIT','analysis.energy','Keine\x20Details.','scanForDevices','BUTLER\x20Execution\x20Error:\x20','ENERGY_TRAIN_RESULT','round','toLowerCase','eventHistory','PRIORITÃ„T:\x20Sicherheit.','analysisHistory','analysis.trigger','Adapter','summary','common','analysis.security.topologyMatrix','activityLevel','Last\x20Check','isPresent','Temperature\x20Forecast','ltmJob','triggerDailyDigest','VACATION','apply','ðŸ›¡ï¸\x20SECURITY\x20CHECK:\x20Score\x20','diagnosis','baselineDrift','driftDetails','LTM.triggerDailyDigest','.Current.Temperature','reason','ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20','toLocaleTimeString','Anomaly\x20Detected','analysis.automation.targetValue','lampe','Gemini\x20Init\x20Error:\x20','(((.+)+)+)+$','setStateAsync','accuweather','Briefing\x20Error:\x20','response','floor','getHours','Today\x20Vector\x20(15m)','getMonth','online','analysis.health','ðŸš€\x20Starting\x20NUUKANNI\x20Logic\x20(v0.12.10)...','30mFbpzQ','TREND_RESULT','isGracePeriodActive','currentSystemMode','analysis.health.gaitSpeed','generic','66JRpdqw','analysis.automation.targetId','Thermodynamics','checkAndInstall','Auto\x20Apply','.forecast.current.state','TOPOLOGY_RESULT','analysis.training','Success','confidence','[RECORDER]\x20Error:\x20','@google/generative-ai','Missing\x20data','PREDICT_ENERGY','Fokus\x20auf\x20Familienroutinen.','stateChange','systemUUID','system.config','setupModeResetScheduler','analysis.security.currentThreshold','automation.triggerAction','ðŸ“\x20Feedback\x20received:\x20','now','cogni-living','button','extendObjectAsync','system.isPresent','map','Digest','Kalender\x20deaktiviert.','fill','262902NpRlkR','weatherInstance','24345kUuwPx','getStateAsync','events.history','[LOG]','ðŸ›‹ï¸\x20BUTLER:\x20Found\x20','object','events.history_debug_00','stringify','threshold','cancel','analysis.energy.heatingScore','onReady','.\x20WETTER:\x20','Trend','python3','LTM','getFullYear','sendTo','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','insulation','latitude','analysisInterval','enum','message','TRAINING_COMPLETE','switch','N/A','Â°C,\x20','LTM.driftAnalysis.driftDetails','exitGraceTimer','analysis.health.isAnomaly','\x0aSTB:\x20','analysis.security.lastCheck','main','detected','keys','analysis.analysisHistory','description','forEach','driftAnalysisTimer','normal','analysisTimer','ANALYZE_TREND','heating','daswetter','./lib/scanner','User\x20dismissed\x20automation\x20proposal.','isAlert','door','isEmergency','systemConfig','Kein\x20API\x20Key.','No\x20instance','date','search','error','toISOString','name','Trigger\x20Analysis','calendarInstance','data','getForeignStateAsync','analysis.training.triggerComfort','9eBcOHP','analysis.security','.\x20EMERGENCY:\x20','Description','Lernphase\x20(','analysis.training.triggerSecurity','setupLtmScheduler','AI\x20Training','city','triggerBriefing','Train\x20Energy','onUnload','âš ï¸\x20ALARM:\x20','devices','\x20Tage)','Last\x20raw\x20event','Trigger\x20Action','change_percent','klima','details','.\x20KONTEXT:\x20','text.alarm','subscribeForeignStatesAsync','analysis.health.trendDiagnosis','analysis.automation.detectedPatterns','communicate.request','ack','motion','replace','notifyTelegramEnabled','Unknown','occupancy','NORMAL','write','analysis.alertReason','Keine\x20Termine.','LTM.dailyDigests','location','Sec-Training\x20started...','shift','events.lastEvent','outdoorSensorId','targetValue','tÃ¼r','Daily\x20Digests','dimmer','openweathermap','debug','Aktiv\x20(','stdout','ltmStbWindowDays','.communicate.request','rawEventLog','trim','Deaktiviert\x20(Pro-Feature)','loc','callback','getObjectAsync','analysis.health.todayVector','analysis.training.triggerEnergy','generateContent','onStateChange','child_process','unknown','793440pLBIOx','analysis.automation.triggerAction','KI-Modell\x20nicht\x20initialisiert','ENERGY_PREDICT_RESULT','1613080TrUlvd','bind','Gait\x20Speed\x20Trend','weatherunderground','LTM.rawEventLog','Sequences','getDate','geminiApiKey','Heating\x20Score','parse','split','toString','getTime','log','targetId','PARTY','SECURITY_RESULT','\x20=\x20','âœ…\x20HEALTH\x20TRAINED.','getForeignObjectAsync','Anomaly\x20Score','.Current.WeatherText','push','Health\x20Analysis','ðŸ§ª\x20Simulating\x20Butler\x20Proposal:\x20','lastAlertState','47675plkDBn','useCalendar','Skipped\x20(No\x20AI\x20or\x20Data)','automationProposal','dependencyInstallInProgress','Kein\x20API\x20Key!','\x20->\x20','analysis.automation.description','analysis.training.status','.\x20EVENTS:\x20','number','setObjectNotExistsAsync','TRAIN_HEALTH','type','PONG','pythonProcess','enum.functions.*','minDaysForBaseline','useWeather','modeResetJob','unshift','Training\x20Status','temperature','autoApply','ðŸ•¸ï¸\x20Building\x20Topology\x20Matrix...','join','OK:\x20','System','some','genAI','LTM.trainingData.thermodynamics','aiPersona','LTM.driftAnalysis.lastCheck','exports','success','heizung','HEALTH_RESULT','json','Insulation\x20Score','boolean','Activity-Level','Build\x20Topology','TRAIN_SECURITY','Train\x20Security','close','getGenerativeModel','ANOMALY','alertReason','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','existsSync','apiKey','Alert\x20Reason','longitude','kill','getCalendarNames','Detected\x20Patterns','sensorLastValues','HEALTH_TRAIN_RESULT','includes','Regel\x20erkannt:\x20','length','onMessage','Error\x20launching\x20Python:\x20','ðŸ•¸ï¸\x20Topology\x20Map\x20updated.','startsWith','dailyDigests','PRIORITÃ„T:\x20Gesundheit/AAL.','analysis.triggerBriefing','system','vacation','Current\x20Threshold','.forecast.current.temperature','exitTimer','setupDriftAnalysisScheduler','values','.\x20SYSTEM_MODE:\x20','ðŸ\x20Python\x20Pong','analysis.security.lastScore','Restoring\x20sensor\x20cache...','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','1759821OyJWnT','from','command','system.presenceWho','./lib/scheduler','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','analysis.activitySummary','Started...','âš ï¸\x20SECURITY\x20ALARM:\x20','ANALYZE_HEALTH','Who\x20is\x20present?','briefingJob','text','Analysiere\x20ausgewogen.','Topology\x20Error:\x20','cogni-living\x20adapter\x20starting\x20(v','subscribeStates','ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...','\x0aGrund:\x20','isProVersion','is_anomaly','channel','val','pop','submitFeedback','Train\x20Health','unload','LTM.trainingData.sequences','isExit','analysis.automation.autoApply',')\x20-\x20SAFE\x20BOOT','Trigger\x20Briefing','toFixed','getMinutes','service.py','info','licenseKey','system.mode','Topology\x20Matrix','string','indicator','analysis.training.triggerTopology','3787100kKlJpa','endsWith','config','Activity\x20Summary','PYTHON_EXE','analysis.energy.insulationScore','ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','[PYTHON]\x20','ðŸ›‹ï¸\x20Triggering\x20Comfort\x20Analysis\x20(Pattern\x20Mining)...'];a0_0x1eb4=function(){return _0x10673a;};return a0_0x1eb4();}async function loadRawEventLog(_0x158e55){const _0x2f7940=a0_0x4de157;try{const _0x4729e5=await _0x158e55['getStateAsync'](LTM_DP_RAW_LOG);if(_0x4729e5&&_0x4729e5['val'])_0x158e55[_0x2f7940(0x156)]=JSON['parse'](_0x4729e5['val']);}catch(_0x289bc3){_0x158e55[_0x2f7940(0x156)]=[];}}async function saveRawEventLog(_0x31d7fe){const _0x160d4=a0_0x4de157;if(_0x31d7fe[_0x160d4(0x156)]['length']>RAW_LOG_MAX_SIZE)_0x31d7fe[_0x160d4(0x156)]['splice'](0x0,_0x31d7fe[_0x160d4(0x156)]['length']-RAW_LOG_MAX_SIZE);await _0x31d7fe['setStateAsync'](LTM_DP_RAW_LOG,{'val':JSON['stringify'](_0x31d7fe['rawEventLog']),'ack':!![]});}async function loadDailyDigests(_0x52fdc7){const _0xe7caab=a0_0x4de157;try{const _0x1369fa=await _0x52fdc7['getStateAsync'](LTM_DP_DAILY_DIGESTS);if(_0x1369fa&&_0x1369fa[_0xe7caab(0x1e6)])_0x52fdc7[_0xe7caab(0x1c1)]=JSON[_0xe7caab(0x16f)](_0x1369fa['val']);}catch(_0x339868){_0x52fdc7['dailyDigests']=[];}await updateBaselineStatus(_0x52fdc7);}async function saveDailyDigests(_0x28ce6f,_0x4f19eb=!![]){const _0x525b34=a0_0x4de157,_0x306302=_0x28ce6f[_0x525b34(0x1fc)]['ltmLtbWindowDays']||0x3c;_0x28ce6f[_0x525b34(0x1c1)][_0x525b34(0x1bc)]>_0x306302&&_0x28ce6f[_0x525b34(0x1c1)]['splice'](0x0,_0x28ce6f[_0x525b34(0x1c1)][_0x525b34(0x1bc)]-_0x306302);await _0x28ce6f[_0x525b34(0x254)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x525b34(0x28d)](_0x28ce6f[_0x525b34(0x1c1)]),'ack':!![]});if(_0x4f19eb)await updateBaselineStatus(_0x28ce6f);}async function updateAnalysisHistory(_0x46bf19,_0x201927){const _0x29de59=a0_0x4de157;_0x46bf19[_0x29de59(0x238)]['unshift'](_0x201927);if(_0x46bf19[_0x29de59(0x238)]['length']>HISTORY_MAX_SIZE)_0x46bf19[_0x29de59(0x238)][_0x29de59(0x1e7)]();await _0x46bf19[_0x29de59(0x254)](_0x29de59(0x2aa),{'val':JSON[_0x29de59(0x28d)](_0x46bf19[_0x29de59(0x238)]),'ack':!![]});}async function updateBaselineStatus(_0x9bf208){const _0x428089=a0_0x4de157;if(!_0x9bf208[_0x428089(0x1e3)]){await _0x9bf208[_0x428089(0x254)](LTM_DP_BASELINE_STATUS,{'val':_0x428089(0x158),'ack':!![]});return;}const _0x4415c4=_0x9bf208[_0x428089(0x1c1)][_0x428089(0x1bc)]>=(_0x9bf208[_0x428089(0x1fc)][_0x428089(0x191)]||0x7)?_0x428089(0x152)+_0x9bf208[_0x428089(0x1c1)][_0x428089(0x1bc)]+_0x428089(0x130):_0x428089(0x126)+_0x9bf208[_0x428089(0x1c1)][_0x428089(0x1bc)]+'/'+(_0x9bf208['config'][_0x428089(0x191)]||0x7)+')';await _0x9bf208['setStateAsync'](LTM_DP_BASELINE_STATUS,{'val':_0x4415c4,'ack':!![]});}async function initSensorSubscriptions(_0x53182b){const _0x1af62a=a0_0x4de157,_0x1a347e=_0x53182b[_0x1af62a(0x1fc)]['devices'];if(_0x1a347e)for(const _0xd5e64e of _0x1a347e){await _0x53182b[_0x1af62a(0x138)](_0xd5e64e['id']);}}async function initPresenceSubscriptions(_0x315229){const _0xe84032=a0_0x4de157,_0x39e6d0=_0x315229[_0xe84032(0x1fc)][_0xe84032(0x210)];if(_0x39e6d0)for(const _0x1d1863 of _0x39e6d0){await _0x315229[_0xe84032(0x138)](_0x1d1863);}}async function setupTelegramListener(_0x1bb194){const _0x4576da=a0_0x4de157,_0x8b4214=_0x1bb194[_0x4576da(0x1fc)]['notifyTelegramInstance'];if(_0x1bb194[_0x4576da(0x1fc)][_0x4576da(0x13f)]&&_0x8b4214)await _0x1bb194[_0x4576da(0x138)](_0x8b4214+_0x4576da(0x155));}async function checkWifiPresence(_0xa77569){const _0x4159ca=a0_0x4de157;try{const _0x5089df=_0xa77569['config'][_0x4159ca(0x210)]||[];let _0x1c3670=![];const _0x373aba=[];for(const _0x552a6f of _0x5089df){try{const _0x4ab7cb=await _0xa77569['getForeignStateAsync'](_0x552a6f);_0x4ab7cb&&(_0x4ab7cb[_0x4159ca(0x1e6)]===!![]||_0x4ab7cb['val']===_0x4159ca(0x25c)||_0x4ab7cb[_0x4159ca(0x1e6)]===0x1)&&(_0x1c3670=!![],_0x373aba[_0x4159ca(0x17c)](_0x552a6f));}catch(_0x2b7b05){}}return await _0xa77569[_0x4159ca(0x254)](_0x4159ca(0x1d3),{'val':_0x373aba[_0x4159ca(0x199)](',\x20'),'ack':!![]}),_0x1c3670&&(_0xa77569[_0x4159ca(0x1c8)]&&(_0xa77569['log'][_0x4159ca(0x1f3)]('WiFi\x20Presence\x20detected.'),abortExitTimer(_0xa77569)),!_0xa77569['isPresent']&&_0xa77569[_0x4159ca(0x262)]===SYSTEM_MODES[_0x4159ca(0x142)]&&await setPresence(_0xa77569,!![])),_0x1c3670;}catch(_0x91900e){return![];}}function startExitTimer(_0xe09a73){const _0x5dd588=a0_0x4de157;abortExitTimer(_0xe09a73),_0xe09a73['isGracePeriodActive']=!![],_0xe09a73[_0x5dd588(0x2a3)]=setTimeout(()=>{const _0x5ae366=_0x5dd588;_0xe09a73[_0x5ae366(0x261)]=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),_0xe09a73[_0x5dd588(0x1c8)]=setTimeout(()=>{const _0x1e943e=_0x5dd588;setPresence(_0xe09a73,![]),_0xe09a73[_0x1e943e(0x1c8)]=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}function abortExitTimer(_0x36170c){const _0x34f8f0=a0_0x4de157;if(_0x36170c[_0x34f8f0(0x1c8)])clearTimeout(_0x36170c['exitTimer']);if(_0x36170c[_0x34f8f0(0x2a3)])clearTimeout(_0x36170c[_0x34f8f0(0x2a3)]);_0x36170c[_0x34f8f0(0x1c8)]=null,_0x36170c[_0x34f8f0(0x2a3)]=null,_0x36170c[_0x34f8f0(0x261)]=![];}async function setPresence(_0x37ab13,_0x2995a9){const _0x303c11=a0_0x4de157;if(_0x37ab13['isPresent']===_0x2995a9)return;_0x37ab13[_0x303c11(0x240)]=_0x2995a9,await _0x37ab13[_0x303c11(0x254)](_0x303c11(0x27f),{'val':_0x2995a9,'ack':!![]});}async function executeAutomationAction(_0x4abbb5){const _0x263c75=a0_0x4de157;try{const _0x4a1f67=await _0x4abbb5[_0x263c75(0x287)](_0x263c75(0x266)),_0x18e019=await _0x4abbb5['getStateAsync'](_0x263c75(0x250));if(_0x4a1f67&&_0x4a1f67[_0x263c75(0x1e6)]&&_0x18e019){const _0x4d1d25=_0x4a1f67[_0x263c75(0x1e6)];let _0x43937b=_0x18e019[_0x263c75(0x1e6)];try{_0x43937b=JSON['parse'](_0x43937b);}catch(_0x4a43e8){}_0x4abbb5['log']['info'](_0x263c75(0x24d)+_0x4d1d25+'\x20=\x20'+_0x43937b),await _0x4abbb5['setForeignStateAsync'](_0x4d1d25,_0x43937b);}else _0x4abbb5['log']['warn'](_0x263c75(0x200));}catch(_0x372ee2){_0x4abbb5[_0x263c75(0x173)]['error'](_0x263c75(0x232)+_0x372ee2[_0x263c75(0x29d)]);}}async function processSensorEvent(_0x448694,_0x324578,_0x5261ba,_0x3b2b25){const _0x17522c=a0_0x4de157;if(!_0x3b2b25)return;const _0x56a6c6=_0x5261ba[_0x17522c(0x1e6)],_0x572e5b=Date[_0x17522c(0x27b)](),_0x1904d4=_0x448694[_0x17522c(0x1b8)][_0x324578];_0x448694['sensorLastValues'][_0x324578]=_0x56a6c6;if(!_0x3b2b25['logDuplicates']&&_0x1904d4!=undefined&&_0x1904d4==_0x56a6c6)return;const _0x4ee502=(_0x3b2b25[_0x17522c(0x18d)]||'')[_0x17522c(0x235)](),_0x2a3321=_0x4ee502['includes'](_0x17522c(0x196))||_0x4ee502[_0x17522c(0x1ba)]('temperatur')||_0x4ee502[_0x17522c(0x1ba)](_0x17522c(0x134))||_0x4ee502[_0x17522c(0x1ba)](_0x17522c(0x1a3));_0x448694[_0x17522c(0x1e3)]&&_0x2a3321&&recordThermodynamics(_0x448694,_0x324578,_0x56a6c6,_0x3b2b25[_0x17522c(0x147)]);const _0x5558c9={'timestamp':_0x572e5b,'id':_0x324578,'name':_0x3b2b25['name'],'type':_0x3b2b25['type'],'location':_0x3b2b25['location'],'value':_0x56a6c6};_0x448694[_0x17522c(0x236)][_0x17522c(0x194)](_0x5558c9);if(_0x448694[_0x17522c(0x236)][_0x17522c(0x1bc)]>HISTORY_MAX_SIZE)_0x448694[_0x17522c(0x236)]['pop']();await _0x448694[_0x17522c(0x254)]('events.lastEvent',{'val':JSON[_0x17522c(0x28d)](_0x5558c9),'ack':!![]}),await _0x448694[_0x17522c(0x254)](_0x17522c(0x288),{'val':JSON[_0x17522c(0x28d)](_0x448694[_0x17522c(0x236)]),'ack':!![]});_0x448694['isProVersion']&&(_0x448694[_0x17522c(0x156)]['push'](_0x5558c9),await saveRawEventLog(_0x448694),recordSequence(_0x448694,_0x5558c9));if(_0x3b2b25[_0x17522c(0x1ec)]&&_0x56a6c6===!![]){if(_0x448694['isPresent']&&!_0x448694['isGracePeriodActive'])startExitTimer(_0x448694);else{if(!_0x448694[_0x17522c(0x240)])setPresence(_0x448694,!![]);}}else{if(_0x3b2b25[_0x17522c(0x18d)]==='motion'&&_0x56a6c6===!![]){if(_0x448694['exitTimer'])abortExitTimer(_0x448694);if(!_0x448694[_0x17522c(0x240)]&&_0x448694[_0x17522c(0x262)]===SYSTEM_MODES[_0x17522c(0x142)])setPresence(_0x448694,!![]);}}}async function recordThermodynamics(_0x319c93,_0x4835fb,_0x3cd1e9,_0x54f64e){const _0x25a1d2=a0_0x4de157,_0x28061c=await getOutsideTemperatureNumeric(_0x319c93),_0x27ce4e=await _0x319c93[_0x25a1d2(0x287)](_0x25a1d2(0x19e));let _0x30f857=[];if(_0x27ce4e&&_0x27ce4e[_0x25a1d2(0x1e6)])try{_0x30f857=JSON[_0x25a1d2(0x16f)](_0x27ce4e[_0x25a1d2(0x1e6)]);}catch(_0x2e6975){}_0x30f857[_0x25a1d2(0x17c)]({'ts':Date['now'](),'room':_0x54f64e||_0x25a1d2(0x140),'t_in':_0x3cd1e9,'t_out':_0x28061c});if(_0x30f857[_0x25a1d2(0x1bc)]>THERMO_LOG_SIZE)_0x30f857['shift']();await _0x319c93['setStateAsync'](_0x25a1d2(0x19e),{'val':JSON['stringify'](_0x30f857),'ack':!![]});}function a0_0x4c5f(_0x2eafd2,_0x58e4b4){const _0x50f8a5=a0_0x1eb4();return a0_0x4c5f=function(_0x226ba5,_0x37f48d){_0x226ba5=_0x226ba5-0x113;let _0x1eb4ee=_0x50f8a5[_0x226ba5];return _0x1eb4ee;},a0_0x4c5f(_0x2eafd2,_0x58e4b4);}async function getOutsideTemperatureNumeric(_0x253001){const _0x59463e=a0_0x4de157;if(_0x253001['config'][_0x59463e(0x14b)])try{const _0x5b2ed9=await _0x253001[_0x59463e(0x120)](_0x253001[_0x59463e(0x1fc)]['outdoorSensorId']);if(_0x5b2ed9&&_0x5b2ed9[_0x59463e(0x1e6)]!==undefined&&_0x5b2ed9['val']!==null)return parseFloat(_0x5b2ed9['val']);}catch(_0x2d57a6){}const _0x42dd72=_0x253001[_0x59463e(0x1fc)]['weatherInstance'];if(!_0x253001[_0x59463e(0x1fc)][_0x59463e(0x192)]||!_0x42dd72)return null;try{let _0x5e0ecb='';if(_0x42dd72[_0x59463e(0x1ba)](_0x59463e(0x255)))_0x5e0ecb=_0x42dd72+_0x59463e(0x24b);else{if(_0x42dd72[_0x59463e(0x1ba)](_0x59463e(0x2b2)))_0x5e0ecb=_0x42dd72+_0x59463e(0x222);else{if(_0x42dd72[_0x59463e(0x1ba)](_0x59463e(0x150)))_0x5e0ecb=_0x42dd72+_0x59463e(0x1c7);else{if(_0x42dd72[_0x59463e(0x1ba)](_0x59463e(0x169)))_0x5e0ecb=_0x42dd72+'.forecast.current.temp';}}}if(_0x5e0ecb){const _0x195977=await _0x253001['getForeignStateAsync'](_0x5e0ecb);if(_0x195977&&_0x195977[_0x59463e(0x1e6)]!==undefined&&_0x195977[_0x59463e(0x1e6)]!==null)return parseFloat(_0x195977[_0x59463e(0x1e6)]);}}catch(_0x57b641){}return null;}async function recordSequence(_0x30cff6,_0x4f4e0b){const _0x1b01ff=a0_0x4de157,_0x28bc58=(_0x4f4e0b['type']||'')[_0x1b01ff(0x235)](),_0x5164f1=[_0x1b01ff(0x13d),'bewegung',_0x1b01ff(0x220),'presence',_0x1b01ff(0x141),_0x1b01ff(0x113),_0x1b01ff(0x14d),_0x1b01ff(0x21b),_0x1b01ff(0x219),'contact','kontakt','light','licht',_0x1b01ff(0x29f),_0x1b01ff(0x206),_0x1b01ff(0x14f),_0x1b01ff(0x251)];if(!_0x5164f1[_0x1b01ff(0x19c)](_0x43627b=>_0x28bc58[_0x1b01ff(0x1ba)](_0x43627b)))return;if(!_0x4f4e0b[_0x1b01ff(0x213)])return;if(sequenceTimer)clearTimeout(sequenceTimer);activeSequence[_0x1b01ff(0x17c)]({'loc':_0x4f4e0b[_0x1b01ff(0x147)]||'Unknown','id':_0x4f4e0b['id'],'ts':Date[_0x1b01ff(0x27b)]()}),sequenceTimer=setTimeout(async()=>{if(activeSequence['length']>0x1)await saveCompletedSequence(_0x30cff6);activeSequence=[];},SEQUENCE_TIMEOUT_MS);}async function saveCompletedSequence(_0x232b57){const _0x57f7f4=a0_0x4de157;try{const _0x27d290=await _0x232b57[_0x57f7f4(0x287)]('LTM.trainingData.sequences');let _0x536154=[];if(_0x27d290&&_0x27d290['val'])try{_0x536154=JSON[_0x57f7f4(0x16f)](_0x27d290[_0x57f7f4(0x1e6)]);}catch(_0x1c8c9f){}const _0x44bbbe=activeSequence[0x0]['ts'],_0x300531=activeSequence['map'](_0xed1e70=>({'loc':_0xed1e70[_0x57f7f4(0x159)],'t_delta':Math[_0x57f7f4(0x234)]((_0xed1e70['ts']-_0x44bbbe)/0x3e8)})),_0x31d050={'timestamp':new Date(_0x44bbbe)[_0x57f7f4(0x11b)](),'steps':_0x300531,'duration':Math[_0x57f7f4(0x234)]((activeSequence[activeSequence['length']-0x1]['ts']-_0x44bbbe)/0x3e8),'daytime':new Date(_0x44bbbe)[_0x57f7f4(0x259)]()};_0x536154['push'](_0x31d050);if(_0x536154[_0x57f7f4(0x1bc)]>MAX_TRAINING_SET_SIZE)_0x536154[_0x57f7f4(0x149)]();await _0x232b57['setStateAsync'](_0x57f7f4(0x1eb),{'val':JSON[_0x57f7f4(0x28d)](_0x536154),'ack':!![]}),runSecurityCheck(_0x232b57,_0x31d050);}catch(_0x211b3f){_0x232b57[_0x57f7f4(0x173)][_0x57f7f4(0x11a)](_0x57f7f4(0x26f)+_0x211b3f[_0x57f7f4(0x29d)]);}}function runSecurityCheck(_0x5c7262,_0x467da4){const _0x58e183=a0_0x4de157;if(!_0x5c7262[_0x58e183(0x1e3)])return;sendToPython(_0x5c7262,'ANALYZE_SEQUENCE',{'sequence':_0x467da4});}async function createDailyDigest(_0x298227){const _0x1c01e5=a0_0x4de157;if(!_0x298227[_0x1c01e5(0x1e3)])return;await _0x298227['setStateAsync'](LTM_DP_STATUS,{'val':_0x1c01e5(0x1d7),'ack':!![]});if(!_0x298227[_0x1c01e5(0x21c)]||_0x298227['rawEventLog'][_0x1c01e5(0x1bc)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x298227[_0x1c01e5(0x254)](LTM_DP_STATUS,{'val':_0x1c01e5(0x182),'ack':!![]});return;}const _0x4aa765=JSON[_0x1c01e5(0x16f)](JSON[_0x1c01e5(0x28d)](_0x298227[_0x1c01e5(0x156)])),_0x55acb9=_0x4aa765[_0x1c01e5(0x1bc)],_0x173351=_0x1c01e5(0x1b0)+JSON[_0x1c01e5(0x28d)](_0x4aa765);try{const _0x20e42d=await _0x298227[_0x1c01e5(0x21c)][_0x1c01e5(0x15e)](_0x173351),_0xd3a7c0=JSON[_0x1c01e5(0x16f)](_0x20e42d[_0x1c01e5(0x257)][_0x1c01e5(0x1dc)]()['replace'](/```json|```/g,'')[_0x1c01e5(0x157)]()),_0x8e5ef6={'timestamp':new Date()['toISOString'](),'eventCount':_0x55acb9,'summary':_0xd3a7c0['summary']||_0x1c01e5(0x281),'activityLevel':_0xd3a7c0[_0x1c01e5(0x23e)]||'normal','systemMode':_0x298227[_0x1c01e5(0x262)]};_0x298227[_0x1c01e5(0x1c1)][_0x1c01e5(0x17c)](_0x8e5ef6),await saveDailyDigests(_0x298227),_0x298227[_0x1c01e5(0x156)]=[],await saveRawEventLog(_0x298227),await _0x298227[_0x1c01e5(0x254)](LTM_DP_STATUS,{'val':_0x1c01e5(0x26d),'ack':!![]});if(_0x298227[_0x1c01e5(0x1e3)])sendToPython(_0x298227,_0x1c01e5(0x1d9),{'digest':_0x8e5ef6});}catch(_0x5b3bb7){_0x298227[_0x1c01e5(0x173)][_0x1c01e5(0x11a)](_0x5b3bb7[_0x1c01e5(0x29d)]);}}async function runBaselineDriftAnalysis(_0x4b15d6){const _0x2c0a51=a0_0x4de157;if(!_0x4b15d6[_0x2c0a51(0x1e3)]||!_0x4b15d6[_0x2c0a51(0x21c)])return;const _0x2e358e=_0x4b15d6['config'][_0x2c0a51(0x154)]||0xe;if(_0x4b15d6[_0x2c0a51(0x1c1)]['length']<_0x2e358e+0x7){await _0x4b15d6['setStateAsync'](LTM_DP_DRIFT_STATUS,{'val':'N/A\x20(Learning)','ack':!![]});return;}const _0x3b41e3=_0x4b15d6[_0x2c0a51(0x1c1)][_0x2c0a51(0x21e)](-_0x2e358e),_0x5801fe=_0x4b15d6['dailyDigests'][_0x2c0a51(0x21e)](0x0,_0x4b15d6[_0x2c0a51(0x1c1)][_0x2c0a51(0x1bc)]-_0x2e358e),_0x42c66a='ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20'+JSON[_0x2c0a51(0x28d)](_0x5801fe)+_0x2c0a51(0x2a5)+JSON['stringify'](_0x3b41e3);try{const _0x59b84a=await _0x4b15d6[_0x2c0a51(0x21c)]['generateContent'](_0x42c66a),_0x144145=JSON[_0x2c0a51(0x16f)](_0x59b84a[_0x2c0a51(0x257)]['text']()[_0x2c0a51(0x13e)](/```json|```/g,'')[_0x2c0a51(0x157)]());_0x144145[_0x2c0a51(0x248)]&&(await _0x4b15d6['setStateAsync'](LTM_DP_DRIFT_STATUS,{'val':_0x144145[_0x2c0a51(0x248)],'ack':!![]}),await _0x4b15d6[_0x2c0a51(0x254)](LTM_DP_DRIFT_DETAILS,{'val':_0x144145[_0x2c0a51(0x249)],'ack':!![]}),await _0x4b15d6['setStateAsync'](LTM_DP_DRIFT_LAST_CHECK,{'val':Date[_0x2c0a51(0x27b)](),'ack':!![]}));}catch(_0x1604ed){}}async function sendMorningBriefing(_0x53a714){const _0x488d0e=a0_0x4de157;if(!_0x53a714[_0x488d0e(0x21c)])return;try{const _0x4f1bd6=_0x488d0e(0x1d5),_0x1718df=await _0x53a714[_0x488d0e(0x21c)]['generateContent'](_0x4f1bd6),_0x1a4178=_0x1718df[_0x488d0e(0x257)][_0x488d0e(0x1dc)]();sendNotification(_0x53a714,'ðŸŒ…\x20Morning\x20Briefing:\x0a'+_0x1a4178);}catch(_0x1a5fa3){_0x53a714['log'][_0x488d0e(0x11a)](_0x488d0e(0x256)+_0x1a5fa3[_0x488d0e(0x29d)]);}}function stopPythonService(_0xf4a60c){const _0x45ba8b=a0_0x4de157;if(_0xf4a60c['pythonProcess']){try{_0xf4a60c['pythonProcess'][_0x45ba8b(0x1b5)]();}catch(_0x3204d4){}_0xf4a60c['pythonProcess']=null;}}function sendToPython(_0x53009b,_0x447cb1,_0x59b732={}){const _0x104fa2=a0_0x4de157;if(!_0x53009b[_0x104fa2(0x18f)]||!_0x53009b[_0x104fa2(0x18f)]['stdin']['writable'])return;const _0x1fc474=JSON[_0x104fa2(0x28d)]({'command':_0x447cb1,..._0x59b732});try{_0x53009b[_0x104fa2(0x18f)]['stdin'][_0x104fa2(0x143)](_0x1fc474+'\x0a');}catch(_0x32288f){}}function runPythonHealthCheck(_0x16e99f){const _0x33b4fe=a0_0x4de157;if(!_0x16e99f[_0x33b4fe(0x1c1)]||_0x16e99f[_0x33b4fe(0x1c1)]['length']<0x2)return;const _0x2251f5=_0x16e99f[_0x33b4fe(0x1c1)][_0x33b4fe(0x280)](_0x4d0a57=>{const _0x1d1fbe=_0x33b4fe,_0xbdbef7=(_0x4d0a57[_0x1d1fbe(0x23e)]||'')[_0x1d1fbe(0x235)]();return ACTIVITY_LEVEL_MAP[_0xbdbef7]||0x32;});sendToPython(_0x16e99f,_0x33b4fe(0x2b0),{'values':_0x2251f5,'tag':_0x33b4fe(0x1a8)});}function handlePythonResult(_0x268baf,_0x10b643){const _0x7d3ec7=a0_0x4de157;if(_0x10b643[_0x7d3ec7(0x18d)]===_0x7d3ec7(0x18e))_0x268baf[_0x7d3ec7(0x173)]['debug'](_0x7d3ec7(0x1cc));else{if(_0x10b643[_0x7d3ec7(0x18d)]===_0x7d3ec7(0x176)){const {anomaly_score:_0x77b327,is_anomaly:_0x11cf96,threshold:_0x69bb70,explanation:_0x41e347}=_0x10b643[_0x7d3ec7(0x225)];_0x268baf['log'][_0x7d3ec7(0x1f3)](_0x7d3ec7(0x246)+_0x77b327[_0x7d3ec7(0x1f0)](0x5)+_0x7d3ec7(0x186)+(_0x11cf96?_0x7d3ec7(0x1ae):'OK')),_0x268baf['setStateAsync'](_0x7d3ec7(0x1cd),{'val':_0x77b327,'ack':!![]}),_0x268baf[_0x7d3ec7(0x254)](_0x7d3ec7(0x2a6),{'val':new Date()[_0x7d3ec7(0x11b)](),'ack':!![]});if(_0x69bb70)_0x268baf[_0x7d3ec7(0x254)](_0x7d3ec7(0x278),{'val':_0x69bb70,'ack':!![]});if(_0x11cf96){let _0x40b658='UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20'+_0x77b327[_0x7d3ec7(0x1f0)](0x4)+')';if(_0x41e347&&_0x41e347!=='Unknown')_0x40b658+=_0x7d3ec7(0x1e2)+_0x41e347;_0x268baf[_0x7d3ec7(0x254)](_0x7d3ec7(0x223),{'val':!![],'ack':!![]}),_0x268baf['setStateAsync']('analysis.alertReason',{'val':_0x40b658,'ack':!![]}),sendNotification(_0x268baf,_0x7d3ec7(0x1d8)+_0x40b658,![],!![]);}}else{if(_0x10b643[_0x7d3ec7(0x18d)]===_0x7d3ec7(0x29e)){const _0x15fd1b=_0x10b643[_0x7d3ec7(0x225)][_0x7d3ec7(0x135)]||'',_0x4d8d44=_0x10b643[_0x7d3ec7(0x225)][_0x7d3ec7(0x28e)],_0x2fa753=_0x10b643['payload'][_0x7d3ec7(0x1a2)]?'Success:\x20'+new Date()[_0x7d3ec7(0x24e)]()+'\x20('+_0x15fd1b+')':'Failed:\x20'+_0x10b643[_0x7d3ec7(0x225)][_0x7d3ec7(0x24c)];_0x268baf[_0x7d3ec7(0x254)](_0x7d3ec7(0x188),{'val':_0x2fa753,'ack':!![]});if(_0x10b643['payload'][_0x7d3ec7(0x1a2)]&&_0x4d8d44)_0x268baf[_0x7d3ec7(0x254)]('analysis.security.currentThreshold',{'val':_0x4d8d44,'ack':!![]});}else{if(_0x10b643['type']==='COMFORT_RESULT'){const {patterns:_0xaa1c64}=_0x10b643[_0x7d3ec7(0x225)];if(_0xaa1c64&&_0xaa1c64[_0x7d3ec7(0x1bc)]>0x0){_0x268baf[_0x7d3ec7(0x173)][_0x7d3ec7(0x1f3)](_0x7d3ec7(0x28a)+_0xaa1c64[_0x7d3ec7(0x1bc)]+_0x7d3ec7(0x21a)),_0x268baf[_0x7d3ec7(0x254)]('analysis.automation.detectedPatterns',{'val':JSON['stringify'](_0xaa1c64),'ack':!![]});const _0x3ec0e5=_0xaa1c64[0x0],_0x274e3b=_0x7d3ec7(0x1bb)+_0x3ec0e5['rule']+'\x20('+(_0x3ec0e5[_0x7d3ec7(0x26e)]*0x64)[_0x7d3ec7(0x1f0)](0x0)+'%)';_0x268baf[_0x7d3ec7(0x254)]('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),_0x268baf[_0x7d3ec7(0x254)](_0x7d3ec7(0x187),{'val':_0x274e3b,'ack':!![]});}else _0x268baf[_0x7d3ec7(0x173)][_0x7d3ec7(0x1f3)](_0x7d3ec7(0x214)),_0x268baf[_0x7d3ec7(0x254)](_0x7d3ec7(0x211),{'val':![],'ack':!![]}),_0x268baf[_0x7d3ec7(0x254)](_0x7d3ec7(0x13a),{'val':'[]','ack':!![]});}else{if(_0x10b643[_0x7d3ec7(0x18d)]===_0x7d3ec7(0x233)){if(_0x10b643[_0x7d3ec7(0x225)][_0x7d3ec7(0x1a2)])try{const _0x1e4717=JSON[_0x7d3ec7(0x16f)](_0x10b643[_0x7d3ec7(0x225)]['details']);if(_0x1e4717['insulation'])_0x268baf[_0x7d3ec7(0x254)]('analysis.energy.insulationScore',{'val':JSON[_0x7d3ec7(0x28d)](_0x1e4717[_0x7d3ec7(0x299)]),'ack':!![]});if(_0x1e4717[_0x7d3ec7(0x2b1)])_0x268baf['setStateAsync'](_0x7d3ec7(0x290),{'val':JSON[_0x7d3ec7(0x28d)](_0x1e4717[_0x7d3ec7(0x2b1)]),'ack':!![]});}catch(_0x3fcdbe){}}else{if(_0x10b643[_0x7d3ec7(0x18d)]===_0x7d3ec7(0x1b9)){if(_0x10b643[_0x7d3ec7(0x225)][_0x7d3ec7(0x1a2)])_0x268baf['log']['info'](_0x7d3ec7(0x178));}else{if(_0x10b643[_0x7d3ec7(0x18d)]===_0x7d3ec7(0x1a4))_0x268baf['setStateAsync']('analysis.health.lastCheck',{'val':new Date()[_0x7d3ec7(0x11b)](),'ack':!![]}),_0x268baf[_0x7d3ec7(0x254)](_0x7d3ec7(0x2a4),{'val':_0x10b643[_0x7d3ec7(0x225)][_0x7d3ec7(0x1e4)],'ack':!![]});else{if(_0x10b643[_0x7d3ec7(0x18d)]===_0x7d3ec7(0x260))_0x268baf[_0x7d3ec7(0x254)](_0x7d3ec7(0x139),{'val':_0x10b643[_0x7d3ec7(0x225)][_0x7d3ec7(0x247)],'ack':!![]}),_0x268baf['setStateAsync']('analysis.health.trendValue',{'val':_0x10b643[_0x7d3ec7(0x225)][_0x7d3ec7(0x133)],'ack':!![]});else{if(_0x10b643[_0x7d3ec7(0x18d)]===_0x7d3ec7(0x209)){const {speed_trend:_0x1ce647}=_0x10b643['payload'];if(_0x1ce647!==undefined)_0x268baf[_0x7d3ec7(0x254)](_0x7d3ec7(0x263),{'val':_0x1ce647,'ack':!![]});}else{if(_0x10b643['type']===_0x7d3ec7(0x165)){const {forecast:_0x230fbc}=_0x10b643['payload'];if(_0x230fbc)_0x268baf['setStateAsync'](_0x7d3ec7(0x229),{'val':JSON[_0x7d3ec7(0x28d)](_0x230fbc),'ack':!![]});}else{if(_0x10b643[_0x7d3ec7(0x18d)]===_0x7d3ec7(0x26b)){const {data:_0x44d036}=_0x10b643[_0x7d3ec7(0x225)];_0x44d036&&(_0x268baf[_0x7d3ec7(0x173)]['info'](_0x7d3ec7(0x1bf)),_0x268baf[_0x7d3ec7(0x254)](_0x7d3ec7(0x23d),{'val':JSON[_0x7d3ec7(0x28d)](_0x44d036),'ack':!![]}));}}}}}}}}}}}}function startPythonService(_0x11f2e2){const _0x332c9a=a0_0x4de157;let _0x5b2650=_0x332c9a(0x294);if(fs[_0x332c9a(0x1b1)](installer[_0x332c9a(0x1fe)]))_0x5b2650=installer[_0x332c9a(0x1fe)];try{const _0x2f358b=path[_0x332c9a(0x199)](__dirname,'python_service',_0x332c9a(0x1f2));_0x11f2e2[_0x332c9a(0x18f)]=spawn(_0x5b2650,[_0x2f358b]),_0x11f2e2['pythonProcess'][_0x332c9a(0x153)]['on'](_0x332c9a(0x11f),_0x2aba61=>{const _0x9c455=_0x332c9a,_0x253987=_0x2aba61[_0x9c455(0x171)]()[_0x9c455(0x170)]('\x0a');_0x253987[_0x9c455(0x2ac)](_0x19e2f9=>{const _0x14b1a3=_0x9c455,_0x350f19=_0x19e2f9[_0x14b1a3(0x157)]();if(!_0x350f19)return;if(_0x350f19[_0x14b1a3(0x1c0)](_0x14b1a3(0x289)))_0x11f2e2[_0x14b1a3(0x173)]['debug'](_0x14b1a3(0x201)+_0x350f19['substring'](0x5)[_0x14b1a3(0x157)]());else{if(_0x350f19[_0x14b1a3(0x1c0)]('[RESULT]'))try{const _0x47ed1e=JSON[_0x14b1a3(0x16f)](_0x350f19[_0x14b1a3(0x22b)](0x8)['trim']());handlePythonResult(_0x11f2e2,_0x47ed1e);}catch(_0x33b68b){}}});}),_0x11f2e2[_0x332c9a(0x18f)]['on'](_0x332c9a(0x1ac),_0xf4c399=>{_0x11f2e2['pythonProcess']=null;});}catch(_0x4a589b){_0x11f2e2[_0x332c9a(0x173)][_0x332c9a(0x11a)](_0x332c9a(0x1be)+_0x4a589b[_0x332c9a(0x29d)]);}}async function runAutopilot(_0x54a2e6){const _0xfcf4c2=a0_0x4de157;_0x54a2e6[_0xfcf4c2(0x173)][_0xfcf4c2(0x151)](_0xfcf4c2(0x1e1)),await runGeminiAnalysis(_0x54a2e6),updateHealthVector(_0x54a2e6),triggerGaitAnalysis(_0x54a2e6),triggerEnergyPrediction(_0x54a2e6);}async function triggerGaitAnalysis(_0xf61f67){const _0x23a06b=a0_0x4de157;if(!_0xf61f67['isProVersion'])return;try{const _0x59f150=await _0xf61f67[_0x23a06b(0x287)](_0x23a06b(0x1eb));_0x59f150&&_0x59f150[_0x23a06b(0x1e6)]&&sendToPython(_0xf61f67,_0x23a06b(0x22e),{'sequences':JSON[_0x23a06b(0x16f)](_0x59f150[_0x23a06b(0x1e6)])});}catch(_0x47ae57){}}async function triggerEnergyPrediction(_0x2aa478){const _0x4b4b7b=a0_0x4de157;if(!_0x2aa478['isProVersion'])return;try{const _0x4b9dbf=await getOutsideTemperatureNumeric(_0x2aa478);if(_0x4b9dbf===null)return;const _0x3e6aeb={},_0x1bd1eb=_0x2aa478['config'][_0x4b4b7b(0x12f)]||[];for(const _0x22c11f of _0x1bd1eb){if(_0x22c11f[_0x4b4b7b(0x18d)]===_0x4b4b7b(0x196)&&_0x22c11f[_0x4b4b7b(0x147)]){const _0x177404=_0x2aa478['sensorLastValues'][_0x22c11f['id']];if(_0x177404!==undefined)_0x3e6aeb[_0x22c11f['location']]=_0x177404;}}Object[_0x4b4b7b(0x2a9)](_0x3e6aeb)[_0x4b4b7b(0x1bc)]>0x0&&sendToPython(_0x2aa478,_0x4b4b7b(0x272),{'current_temps':_0x3e6aeb,'t_out':_0x4b9dbf});}catch(_0x1006b9){}}function updateHealthVector(_0x41bb87){const _0x4f1d85=a0_0x4de157;if(!_0x41bb87[_0x4f1d85(0x156)]||_0x41bb87[_0x4f1d85(0x156)][_0x4f1d85(0x1bc)]===0x0)return;const _0x8db57a=new Array(0x60)[_0x4f1d85(0x283)](0x0),_0x35a326=new Date()['setHours'](0x0,0x0,0x0,0x0);_0x41bb87[_0x4f1d85(0x156)][_0x4f1d85(0x2ac)](_0x51a0c7=>{const _0x2ca6c2=_0x4f1d85,_0x705f32=new Date(_0x51a0c7[_0x2ca6c2(0x22c)]);if(_0x705f32[_0x2ca6c2(0x172)]()>=_0x35a326){const _0xd1452c=_0x705f32[_0x2ca6c2(0x259)](),_0x29f1be=_0x705f32[_0x2ca6c2(0x1f1)](),_0x50faf0=_0xd1452c*0x4+Math[_0x2ca6c2(0x258)](_0x29f1be/0xf);if(_0x50faf0>=0x0&&_0x50faf0<0x60)_0x8db57a[_0x50faf0]++;}}),_0x41bb87['setStateAsync'](_0x4f1d85(0x15c),{'val':JSON[_0x4f1d85(0x28d)](_0x8db57a),'ack':!![]});}async function getWeatherContext(_0x30b8b2){const _0x47a040=a0_0x4de157;if(!_0x30b8b2['config'][_0x47a040(0x192)]||!_0x30b8b2[_0x47a040(0x1fc)][_0x47a040(0x285)])return'Wetterdaten\x20deaktiviert.';try{const _0x3ed85f=_0x30b8b2[_0x47a040(0x1fc)][_0x47a040(0x285)];let _0x28e4b5=await _0x30b8b2[_0x47a040(0x120)](_0x3ed85f+_0x47a040(0x24b));if(!_0x28e4b5)_0x28e4b5=await _0x30b8b2[_0x47a040(0x120)](_0x3ed85f+_0x47a040(0x1c7));let _0x2ec9f2=await _0x30b8b2[_0x47a040(0x120)](_0x3ed85f+_0x47a040(0x17b));if(!_0x2ec9f2)_0x2ec9f2=await _0x30b8b2['getForeignStateAsync'](_0x3ed85f+_0x47a040(0x26a));if(_0x28e4b5&&_0x2ec9f2)return _0x28e4b5[_0x47a040(0x1e6)]+_0x47a040(0x2a1)+_0x2ec9f2[_0x47a040(0x1e6)];}catch(_0x5bb32c){}return'Keine\x20Wetterdaten\x20verfÃ¼gbar.';}async function getCalendarContext(_0x2dfabc){const _0x3ada78=a0_0x4de157;if(!_0x2dfabc[_0x3ada78(0x1fc)][_0x3ada78(0x181)]||!_0x2dfabc['config'][_0x3ada78(0x11e)])return _0x3ada78(0x282);return _0x3ada78(0x145);}async function getCalendarNames(_0x204459,_0xf13db9){return[];}async function saveFeedback(_0xa598c3,_0x21b51e){const _0x3d1107=a0_0x4de157;_0xa598c3[_0x3d1107(0x173)][_0x3d1107(0x1f3)](_0x3d1107(0x27a)+_0x21b51e['rating']);}async function runGeminiAnalysis(_0x3cdbd7,_0x44f44e=''){const _0xa321d5=a0_0x4de157;if(!_0x3cdbd7[_0xa321d5(0x21c)])return;if(_0x3cdbd7[_0xa321d5(0x236)][_0xa321d5(0x1bc)]===0x0)return;const _0x18387e=_0x3cdbd7[_0xa321d5(0x236)][_0xa321d5(0x21e)](0x0,0xf),_0x16e175=await getWeatherContext(_0x3cdbd7),_0x5067f2=_0x3cdbd7[_0xa321d5(0x262)],_0x539e97=PERSONA_MAPPING[_0x3cdbd7['config'][_0xa321d5(0x19f)]||_0xa321d5(0x264)],_0x2a1613=_0x3cdbd7[_0xa321d5(0x1fc)][_0xa321d5(0x22a)]||_0xa321d5(0x230);let _0x4f497f='Unbekannt';try{const _0x18ffde=await _0x3cdbd7[_0xa321d5(0x287)](_0xa321d5(0x1d3));if(_0x18ffde&&_0x18ffde['val'])_0x4f497f=_0x18ffde[_0xa321d5(0x1e6)];}catch(_0x48b4d2){}let _0x194458=![];try{const _0x51e052=await _0x3cdbd7['getStateAsync'](_0xa321d5(0x1ed));if(_0x51e052&&_0x51e052[_0xa321d5(0x1e6)])_0x194458=!![];}catch(_0x55a322){}const _0x1136a9=_0xa321d5(0x298)+_0x539e97+_0xa321d5(0x136)+_0x2a1613+_0xa321d5(0x1cb)+_0x5067f2+_0xa321d5(0x292)+_0x16e175+_0xa321d5(0x224)+_0x4f497f+_0xa321d5(0x189)+JSON['stringify'](_0x18387e)+_0xa321d5(0x124)+_0x44f44e+_0xa321d5(0x1cf);try{const _0xfbde52=await _0x3cdbd7['geminiModel']['generateContent'](_0x1136a9),_0x1f33ff=JSON['parse'](_0xfbde52[_0xa321d5(0x257)][_0xa321d5(0x1dc)]()[_0xa321d5(0x13e)](/```json|```/g,'')['trim']());await _0x3cdbd7[_0xa321d5(0x254)](_0xa321d5(0x228),{'val':JSON[_0xa321d5(0x28d)](_0x1f33ff),'ack':!![]});if(_0x1f33ff[_0xa321d5(0x23b)])await _0x3cdbd7[_0xa321d5(0x254)](_0xa321d5(0x1d6),{'val':_0x1f33ff[_0xa321d5(0x23b)],'ack':!![]});const _0xf1cff7={'timestamp':Date[_0xa321d5(0x27b)](),'id':Date['now']()[_0xa321d5(0x171)](),'analysis':{'activity':{'summary':_0x1f33ff[_0xa321d5(0x23b)],'isAlert':_0x1f33ff['isAlert'],'alertReason':_0x1f33ff['alertReason']},'comfort':{'automationProposal':_0x1f33ff[_0xa321d5(0x183)]}}};await updateAnalysisHistory(_0x3cdbd7,_0xf1cff7);const _0x1091da=_0x1f33ff[_0xa321d5(0x2b5)]||![];_0x1091da!==_0x3cdbd7[_0xa321d5(0x17f)]&&(await _0x3cdbd7['setStateAsync'](_0xa321d5(0x223),{'val':_0x1091da,'ack':!![]}),_0x3cdbd7['lastAlertState']=_0x1091da,_0x1091da&&(await _0x3cdbd7['setStateAsync'](_0xa321d5(0x144),{'val':_0x1f33ff[_0xa321d5(0x1af)],'ack':!![]}),sendNotification(_0x3cdbd7,_0xa321d5(0x12e)+_0x1f33ff[_0xa321d5(0x1af)],![],_0x1f33ff[_0xa321d5(0x114)])));if(_0x1f33ff[_0xa321d5(0x183)]&&_0x1f33ff[_0xa321d5(0x183)]['detected']){await _0x3cdbd7[_0xa321d5(0x254)](_0xa321d5(0x211),{'val':!![],'ack':!![]}),await _0x3cdbd7['setStateAsync'](_0xa321d5(0x187),{'val':_0x1f33ff[_0xa321d5(0x183)]['description'],'ack':!![]}),await _0x3cdbd7['setStateAsync'](_0xa321d5(0x266),{'val':_0x1f33ff[_0xa321d5(0x183)][_0xa321d5(0x174)],'ack':!![]}),await _0x3cdbd7['setStateAsync']('analysis.automation.targetValue',{'val':JSON[_0xa321d5(0x28d)](_0x1f33ff[_0xa321d5(0x183)]['targetValue']),'ack':!![]});if(_0x194458)executeAutomationAction(_0x3cdbd7);}}catch(_0x415939){_0x3cdbd7['log']['error'](_0xa321d5(0x22d)+_0x415939[_0xa321d5(0x29d)]);}}async function startSystem(_0x443f56){const _0x4c956d=a0_0x4de157;_0x443f56['log'][_0x4c956d(0x1f3)](_0x4c956d(0x25e)),await initZombies(_0x443f56);try{_0x443f56['isProVersion']=await checkLicense(_0x443f56[_0x4c956d(0x1fc)][_0x4c956d(0x1f4)]);}catch(_0x193ba4){}if(!_0x443f56['config'][_0x4c956d(0x20b)]||_0x443f56[_0x4c956d(0x1fc)]['inactivityThresholdHours']<0.1)_0x443f56[_0x4c956d(0x1fc)][_0x4c956d(0x20b)]=0xc;await initHistory(_0x443f56),await initSystemConfig(_0x443f56);if(_0x443f56[_0x4c956d(0x1fc)]['geminiApiKey'])try{_0x443f56[_0x4c956d(0x19d)]=new GoogleGenerativeAI(_0x443f56[_0x4c956d(0x1fc)][_0x4c956d(0x16d)]),_0x443f56[_0x4c956d(0x21c)]=_0x443f56['genAI'][_0x4c956d(0x1ad)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x4c956d(0x227)}}),_0x443f56['log']['info'](_0x4c956d(0x21d));}catch(_0x22a1e0){_0x443f56[_0x4c956d(0x173)]['error'](_0x4c956d(0x252)+_0x22a1e0[_0x4c956d(0x29d)]);}await createAllObjects(_0x443f56),await loadSystemMode(_0x443f56),await loadRawEventLog(_0x443f56),await loadDailyDigests(_0x443f56),_0x443f56[_0x4c956d(0x1e0)](_0x4c956d(0x239)),_0x443f56[_0x4c956d(0x1e0)](LTM_DP_TRIGGER_DIGEST),_0x443f56[_0x4c956d(0x1e0)](_0x4c956d(0x1f5)),_0x443f56['subscribeStates']('analysis.triggerBriefing'),_0x443f56[_0x4c956d(0x1e0)](_0x4c956d(0x163)),_0x443f56[_0x4c956d(0x1e0)](_0x4c956d(0x1ed)),_0x443f56[_0x4c956d(0x1e0)](_0x4c956d(0x127)),_0x443f56[_0x4c956d(0x1e0)](_0x4c956d(0x218)),_0x443f56['subscribeStates'](_0x4c956d(0x15d)),_0x443f56[_0x4c956d(0x1e0)](_0x4c956d(0x121)),_0x443f56['subscribeStates']('analysis.training.triggerTopology'),await initSensorSubscriptions(_0x443f56),await initPresenceSubscriptions(_0x443f56),await setupTelegramListener(_0x443f56),setTimeout(()=>checkWifiPresence(_0x443f56),0x1388);if(_0x443f56[_0x4c956d(0x2af)])clearInterval(_0x443f56[_0x4c956d(0x2af)]);const _0x3594ac=_0x443f56[_0x4c956d(0x1fc)][_0x4c956d(0x29b)]||0xf;_0x3594ac>0x0&&(_0x443f56[_0x4c956d(0x2af)]=setInterval(()=>{runAutopilot(_0x443f56);},_0x3594ac*0x3c*0x3e8)),schedulers[_0x4c956d(0x128)](_0x443f56,()=>createDailyDigest(_0x443f56)),schedulers[_0x4c956d(0x277)](_0x443f56),schedulers[_0x4c956d(0x1c9)](_0x443f56,()=>runBaselineDriftAnalysis(_0x443f56)),schedulers['setupBriefingScheduler'](_0x443f56,()=>sendMorningBriefing(_0x443f56)),startPythonService(_0x443f56),setTimeout(()=>{_0x443f56['pythonProcess']&&(runPythonHealthCheck(_0x443f56),triggerGaitAnalysis(_0x443f56),triggerEnergyPrediction(_0x443f56)),updateHealthVector(_0x443f56);},0x1388);}class CogniLiving extends utils[a0_0x4de157(0x23a)]{constructor(_0x4367b8){const _0x13c41a=a0_0x4de157;super({..._0x4367b8,'name':_0x13c41a(0x27c)}),this['eventHistory']=[],this[_0x13c41a(0x238)]=[],this[_0x13c41a(0x156)]=[],this['dailyDigests']=[],this[_0x13c41a(0x1b8)]={},this[_0x13c41a(0x115)]={'latitude':0x0,'longitude':0x0,'city':''},this['isPresent']=!![],this[_0x13c41a(0x1c8)]=null,this['exitGraceTimer']=null,this[_0x13c41a(0x261)]=![],this[_0x13c41a(0x19d)]=null,this['geminiModel']=null,this[_0x13c41a(0x262)]=SYSTEM_MODES[_0x13c41a(0x142)],this[_0x13c41a(0x1e3)]=![],this[_0x13c41a(0x17f)]=![],this[_0x13c41a(0x275)]=_0x13c41a(0x161),this[_0x13c41a(0x2af)]=null,this[_0x13c41a(0x242)]=null,this['modeResetJob']=null,this[_0x13c41a(0x2ad)]=null,this['briefingJob']=null,this[_0x13c41a(0x18f)]=null,this[_0x13c41a(0x184)]=![],this['on']('ready',this[_0x13c41a(0x291)][_0x13c41a(0x167)](this)),this['on'](_0x13c41a(0x274),this[_0x13c41a(0x15f)][_0x13c41a(0x167)](this)),this['on'](_0x13c41a(0x1ea),this[_0x13c41a(0x12d)]['bind'](this)),this['on']('message',this[_0x13c41a(0x1bd)][_0x13c41a(0x167)](this));}async['onReady'](){const _0x5be4c9=a0_0x4de157;this['log'][_0x5be4c9(0x1f3)](_0x5be4c9(0x1df)+this['version']+_0x5be4c9(0x1ee));if(!installer[_0x5be4c9(0x268)](this,()=>startSystem(this)))return;}['onUnload'](_0x1b7e1d){const _0x5d3c1f=a0_0x4de157;if(this[_0x5d3c1f(0x2af)])clearInterval(this[_0x5d3c1f(0x2af)]);if(this[_0x5d3c1f(0x2ad)])clearInterval(this[_0x5d3c1f(0x2ad)]);if(this['ltmJob'])this[_0x5d3c1f(0x242)][_0x5d3c1f(0x28f)]();if(this[_0x5d3c1f(0x193)])this['modeResetJob'][_0x5d3c1f(0x28f)]();if(this[_0x5d3c1f(0x1db)])this[_0x5d3c1f(0x1db)][_0x5d3c1f(0x28f)]();if(this[_0x5d3c1f(0x1c8)])clearTimeout(this[_0x5d3c1f(0x1c8)]);if(this[_0x5d3c1f(0x2a3)])clearTimeout(this[_0x5d3c1f(0x2a3)]);stopPythonService(this),_0x1b7e1d();}async['onStateChange'](_0xe879c,_0x4b73f8){const _0x798925=a0_0x4de157;if(!_0x4b73f8||this[_0x798925(0x184)])return;if(_0xe879c[_0x798925(0x1ba)]('telegram')&&_0xe879c[_0x798925(0x1fb)](_0x798925(0x13b))&&_0x4b73f8[_0x798925(0x1e6)]){await handleTelegramResponse(this,_0x4b73f8[_0x798925(0x1e6)]);return;}if(_0xe879c===this['namespace']+'.'+SYSTEM_DP_MODE){if(_0x4b73f8[_0x798925(0x1e6)]&&Object[_0x798925(0x1ca)](SYSTEM_MODES)[_0x798925(0x1ba)](_0x4b73f8['val'])){this['currentSystemMode']=_0x4b73f8['val'];if(_0x4b73f8[_0x798925(0x1e6)]===SYSTEM_MODES[_0x798925(0x244)])await setPresence(this,![]);else await setPresence(this,!![]);}if(!_0x4b73f8[_0x798925(0x13c)])this[_0x798925(0x203)](_0xe879c,{'val':this[_0x798925(0x262)],'ack':!![]});return;}if(!_0x4b73f8[_0x798925(0x13c)]){_0xe879c[_0x798925(0x1ba)](_0x798925(0x239))&&_0x4b73f8[_0x798925(0x1e6)]&&(this['setState'](_0xe879c,{'val':![],'ack':!![]}),runGeminiAnalysis(this));if(_0xe879c['includes'](_0x798925(0x243))&&_0x4b73f8[_0x798925(0x1e6)]){this[_0x798925(0x203)](_0xe879c,{'val':![],'ack':!![]});if(this['isProVersion'])createDailyDigest(this);}_0xe879c[_0x798925(0x1ba)](_0x798925(0x12b))&&_0x4b73f8[_0x798925(0x1e6)]&&(this['setState'](_0xe879c,{'val':![],'ack':!![]}),sendMorningBriefing(this));_0xe879c[_0x798925(0x1ba)](_0x798925(0x279))&&_0x4b73f8[_0x798925(0x1e6)]&&(this[_0x798925(0x203)](_0xe879c,{'val':![],'ack':!![]}),executeAutomationAction(this));if(_0xe879c[_0x798925(0x1ba)](_0x798925(0x127))&&_0x4b73f8[_0x798925(0x1e6)]){this[_0x798925(0x203)](_0xe879c,{'val':![],'ack':!![]});if(this[_0x798925(0x1e3)])try{const _0x1115be=await this[_0x798925(0x287)]('LTM.trainingData.sequences');if(_0x1115be&&_0x1115be['val']){const _0x2baa94=JSON['parse'](_0x1115be[_0x798925(0x1e6)]);this['log'][_0x798925(0x1f3)]('ðŸ§ \x20Triggering\x20Security\x20Training...'),this[_0x798925(0x254)](_0x798925(0x188),{'val':_0x798925(0x148),'ack':!![]}),sendToPython(this,_0x798925(0x1aa),{'sequences':_0x2baa94});}}catch(_0x46ff56){this['log'][_0x798925(0x11a)]('Training\x20Error:\x20'+_0x46ff56[_0x798925(0x29d)]);}}if(_0xe879c[_0x798925(0x1ba)](_0x798925(0x218))&&_0x4b73f8['val']){this['setState'](_0xe879c,{'val':![],'ack':!![]});if(this[_0x798925(0x1e3)])try{const _0x29ee40=await this['getStateAsync'](LTM_DP_DAILY_DIGESTS);if(_0x29ee40&&_0x29ee40[_0x798925(0x1e6)])sendToPython(this,_0x798925(0x18c),{'digests':JSON[_0x798925(0x16f)](_0x29ee40[_0x798925(0x1e6)])});}catch(_0x3c7242){}}if(_0xe879c[_0x798925(0x1ba)](_0x798925(0x15d))&&_0x4b73f8[_0x798925(0x1e6)]){this[_0x798925(0x203)](_0xe879c,{'val':![],'ack':!![]});if(this[_0x798925(0x1e3)])try{const _0x5c8577=await this['getStateAsync'](_0x798925(0x19e));if(_0x5c8577&&_0x5c8577[_0x798925(0x1e6)])sendToPython(this,_0x798925(0x20a),{'points':JSON['parse'](_0x5c8577[_0x798925(0x1e6)])});}catch(_0x3d47bd){}}if(_0xe879c[_0x798925(0x1ba)](_0x798925(0x121))&&_0x4b73f8['val']){this[_0x798925(0x203)](_0xe879c,{'val':![],'ack':!![]});if(this[_0x798925(0x1e3)])try{const _0x5c49a8=await this['getStateAsync'](LTM_DP_RAW_LOG);_0x5c49a8&&_0x5c49a8[_0x798925(0x1e6)]&&(this['log'][_0x798925(0x1f3)](_0x798925(0x202)),sendToPython(this,'TRAIN_COMFORT',{'events':JSON['parse'](_0x5c49a8['val'])}));}catch(_0x186bf4){}}if(_0xe879c[_0x798925(0x1ba)](_0x798925(0x1f9))&&_0x4b73f8['val']){this['setState'](_0xe879c,{'val':![],'ack':!![]});if(this[_0x798925(0x1e3)])try{const _0x164724=await this[_0x798925(0x287)](_0x798925(0x1eb));if(_0x164724&&_0x164724[_0x798925(0x1e6)]){const _0x166d4d=JSON[_0x798925(0x16f)](_0x164724['val']);this[_0x798925(0x173)][_0x798925(0x1f3)](_0x798925(0x198)),sendToPython(this,'BUILD_TOPOLOGY',{'sequences':_0x166d4d});}}catch(_0x5ea1ce){this[_0x798925(0x173)][_0x798925(0x11a)](_0x798925(0x1de)+_0x5ea1ce[_0x798925(0x29d)]);}}return;}if(this[_0x798925(0x1fc)]['presenceDevices']&&this[_0x798925(0x1fc)][_0x798925(0x210)]['includes'](_0xe879c)){await checkWifiPresence(this);return;}const _0x3d8890=(this[_0x798925(0x1fc)][_0x798925(0x12f)]||[])['find'](_0x2b6de6=>_0x2b6de6['id']===_0xe879c);if(_0x3d8890)processSensorEvent(this,_0xe879c,_0x4b73f8,_0x3d8890);}async[a0_0x4de157(0x1bd)](_0xd5abf5){const _0x7d9bcb=a0_0x4de157;if(typeof _0xd5abf5===_0x7d9bcb(0x28b)&&_0xd5abf5[_0x7d9bcb(0x29d)]){if(_0xd5abf5['command']==='testApiKey'){const _0x5ba127=_0xd5abf5[_0x7d9bcb(0x29d)][_0x7d9bcb(0x1b2)]||this[_0x7d9bcb(0x1fc)][_0x7d9bcb(0x16d)];if(!_0x5ba127)return this[_0x7d9bcb(0x297)](_0xd5abf5[_0x7d9bcb(0x1d1)],_0xd5abf5[_0x7d9bcb(0x1d2)],{'success':![],'message':_0x7d9bcb(0x116)},_0xd5abf5[_0x7d9bcb(0x15a)]);try{const _0x51b8c9=new GoogleGenerativeAI(_0x5ba127),_0x5e421a=_0x51b8c9[_0x7d9bcb(0x1ad)]({'model':GEMINI_MODEL}),_0x49d64d=await _0x5e421a['generateContent']('Hi');this[_0x7d9bcb(0x297)](_0xd5abf5['from'],_0xd5abf5[_0x7d9bcb(0x1d2)],{'success':!![],'message':_0x7d9bcb(0x19a)+_0x49d64d[_0x7d9bcb(0x257)][_0x7d9bcb(0x1dc)]()},_0xd5abf5[_0x7d9bcb(0x15a)]);}catch(_0x1fe6ab){this['sendTo'](_0xd5abf5[_0x7d9bcb(0x1d1)],_0xd5abf5[_0x7d9bcb(0x1d2)],{'success':![],'message':_0x7d9bcb(0x226)+_0x1fe6ab[_0x7d9bcb(0x29d)]},_0xd5abf5[_0x7d9bcb(0x15a)]);}}else{if(_0xd5abf5[_0x7d9bcb(0x1d2)]==='testContext'){const _0x234044=await getWeatherContext(this),_0x2dd725=await getCalendarContext(this);this[_0x7d9bcb(0x297)](_0xd5abf5[_0x7d9bcb(0x1d1)],_0xd5abf5['command'],{'success':!![],'weather':_0x234044,'calendar':_0x2dd725},_0xd5abf5['callback']);}else{if(_0xd5abf5[_0x7d9bcb(0x1d2)]===_0x7d9bcb(0x204)){if(!this['isProVersion'])return this[_0x7d9bcb(0x297)](_0xd5abf5[_0x7d9bcb(0x1d1)],_0xd5abf5[_0x7d9bcb(0x1d2)],{'success':![],'isPro':![]},_0xd5abf5[_0x7d9bcb(0x15a)]);let _0x2bc7ba={'status':_0x7d9bcb(0x2a0)};try{const _0x3eec72=await this[_0x7d9bcb(0x287)](LTM_DP_DRIFT_STATUS);_0x2bc7ba[_0x7d9bcb(0x205)]=_0x3eec72?_0x3eec72[_0x7d9bcb(0x1e6)]:_0x7d9bcb(0x2a0);}catch(_0x5dc035){}this['sendTo'](_0xd5abf5[_0x7d9bcb(0x1d1)],_0xd5abf5[_0x7d9bcb(0x1d2)],{'success':!![],'isPro':!![],'dailyDigests':this[_0x7d9bcb(0x1c1)],'driftAnalysis':_0x2bc7ba,'analysisHistory':this[_0x7d9bcb(0x238)]},_0xd5abf5[_0x7d9bcb(0x15a)]);}else{if(_0xd5abf5['command']==='getOverviewData'){const _0x4ed315=this['dailyDigests'][_0x7d9bcb(0x1bc)],_0xa2d5cc=new Date(),_0x166f51=new Date(_0xa2d5cc[_0x7d9bcb(0x296)](),_0xa2d5cc[_0x7d9bcb(0x25b)](),_0xa2d5cc[_0x7d9bcb(0x16c)]())['getTime'](),_0x2cf0f1=this[_0x7d9bcb(0x156)]['filter'](_0x34185a=>new Date(_0x34185a[_0x7d9bcb(0x22c)])[_0x7d9bcb(0x172)]()>_0x166f51)['length'],_0x2c96ab=new Array(0x18)[_0x7d9bcb(0x283)](0x0);this['rawEventLog']['forEach'](_0x11a38d=>{const _0x5e65c1=_0x7d9bcb,_0x27f75c=new Date(_0x11a38d[_0x5e65c1(0x22c)]);if(_0x27f75c[_0x5e65c1(0x172)]()>_0x166f51)_0x2c96ab[_0x27f75c[_0x5e65c1(0x259)]()]++;});let _0x3cda2c={'status':'N/A'};try{const _0x1adb8c=await this['getStateAsync'](LTM_DP_DRIFT_STATUS);_0x3cda2c[_0x7d9bcb(0x205)]=_0x1adb8c?_0x1adb8c[_0x7d9bcb(0x1e6)]:_0x7d9bcb(0x2a0);}catch(_0x4e3cfa){}let _0x66a0b6='';try{const _0x5ba106=await this[_0x7d9bcb(0x287)](_0x7d9bcb(0x1d3));_0x66a0b6=_0x5ba106?_0x5ba106[_0x7d9bcb(0x1e6)]:'';}catch(_0x5157a2){}let _0xfbdff1=null;!this[_0x7d9bcb(0x21c)]&&(_0xfbdff1=this[_0x7d9bcb(0x1fc)]['geminiApiKey']?_0x7d9bcb(0x164):_0x7d9bcb(0x185));let _0x1b84db={'detected':![],'description':'','targetId':'','targetValue':'','autoApply':![]};try{const _0x3dea7b=await this[_0x7d9bcb(0x287)]('analysis.automation.patternDetected');if(_0x3dea7b&&_0x3dea7b['val']){_0x1b84db[_0x7d9bcb(0x2a8)]=!![];const _0x79ea1b=await this['getStateAsync'](_0x7d9bcb(0x187));_0x1b84db[_0x7d9bcb(0x2ab)]=_0x79ea1b?_0x79ea1b[_0x7d9bcb(0x1e6)]:'';const _0x5232c2=await this[_0x7d9bcb(0x287)](_0x7d9bcb(0x266));_0x1b84db[_0x7d9bcb(0x174)]=_0x5232c2?_0x5232c2['val']:'';const _0x1b98ae=await this[_0x7d9bcb(0x287)]('analysis.automation.targetValue');_0x1b84db[_0x7d9bcb(0x14c)]=_0x1b98ae?_0x1b98ae[_0x7d9bcb(0x1e6)]:'';}const _0x4415f5=await this[_0x7d9bcb(0x287)](_0x7d9bcb(0x1ed));_0x1b84db[_0x7d9bcb(0x197)]=_0x4415f5?!!_0x4415f5[_0x7d9bcb(0x1e6)]:![];}catch(_0x1d33f6){}this[_0x7d9bcb(0x297)](_0xd5abf5[_0x7d9bcb(0x1d1)],_0xd5abf5[_0x7d9bcb(0x1d2)],{'success':!![],'eventHistory':this[_0x7d9bcb(0x236)][_0x7d9bcb(0x21e)](0x0,0xf),'stats':{'digestCount':_0x4ed315,'eventCountToday':_0x2cf0f1,'hourlyActivity':_0x2c96ab,'driftStatus':_0x3cda2c['status'],'isPresent':this[_0x7d9bcb(0x240)],'presenceWho':_0x66a0b6,'minDays':this[_0x7d9bcb(0x1fc)][_0x7d9bcb(0x191)]||0x7,'stbDays':this[_0x7d9bcb(0x1fc)][_0x7d9bcb(0x154)]||0xe,'ltbDays':this[_0x7d9bcb(0x1fc)]['ltmLtbWindowDays']||0x3c,'systemError':_0xfbdff1},'automation':_0x1b84db},_0xd5abf5['callback']);}else{if(_0xd5abf5['command']==='scanDevices')try{const _0x2fe75e=await scanner[_0x7d9bcb(0x231)](this,_0xd5abf5[_0x7d9bcb(0x29d)]||{});this[_0x7d9bcb(0x297)](_0xd5abf5[_0x7d9bcb(0x1d1)],_0xd5abf5['command'],{'success':!![],'devices':_0x2fe75e},_0xd5abf5[_0x7d9bcb(0x15a)]);}catch(_0x5ce5dc){this[_0x7d9bcb(0x297)](_0xd5abf5[_0x7d9bcb(0x1d1)],_0xd5abf5[_0x7d9bcb(0x1d2)],{'success':![],'error':_0x5ce5dc['message']},_0xd5abf5[_0x7d9bcb(0x15a)]);}else{if(_0xd5abf5['command']==='getEnums'){const _0x34c3eb=await this['getForeignObjectsAsync'](_0x7d9bcb(0x190),'enum'),_0x881850=[];if(_0x34c3eb)for(const _0x582393 in _0x34c3eb){const _0x5062fc=_0x34c3eb[_0x582393],_0x3acc5b=(_0x5062fc[_0x7d9bcb(0x23c)]&&typeof _0x5062fc['common'][_0x7d9bcb(0x11c)]===_0x7d9bcb(0x28b)?_0x5062fc[_0x7d9bcb(0x23c)][_0x7d9bcb(0x11c)]['de']:_0x5062fc[_0x7d9bcb(0x23c)]['name'])||_0x5062fc[_0x7d9bcb(0x23c)][_0x7d9bcb(0x11c)];_0x881850[_0x7d9bcb(0x17c)]({'id':_0x582393,'name':_0x3acc5b});}const _0x599354=await this['getForeignObjectsAsync']('enum.rooms.*',_0x7d9bcb(0x29c)),_0x4ebb28=[];if(_0x599354)for(const _0x216adb in _0x599354){const _0x3e1a88=_0x599354[_0x216adb],_0x40b040=(_0x3e1a88[_0x7d9bcb(0x23c)]&&typeof _0x3e1a88[_0x7d9bcb(0x23c)]['name']===_0x7d9bcb(0x28b)?_0x3e1a88[_0x7d9bcb(0x23c)]['name']['de']:_0x3e1a88['common'][_0x7d9bcb(0x11c)])||_0x216adb[_0x7d9bcb(0x170)]('.')[_0x7d9bcb(0x1e7)]();_0x4ebb28[_0x7d9bcb(0x17c)](_0x40b040);}this[_0x7d9bcb(0x297)](_0xd5abf5[_0x7d9bcb(0x1d1)],_0xd5abf5[_0x7d9bcb(0x1d2)],{'success':!![],'enums':_0x881850,'rooms':_0x4ebb28},_0xd5abf5[_0x7d9bcb(0x15a)]);}else{if(_0xd5abf5[_0x7d9bcb(0x1d2)]===_0x7d9bcb(0x1b6)){const _0x4a48c4=_0xd5abf5[_0x7d9bcb(0x29d)]['instance'];if(!_0x4a48c4)return this[_0x7d9bcb(0x297)](_0xd5abf5[_0x7d9bcb(0x1d1)],_0xd5abf5[_0x7d9bcb(0x1d2)],{'success':![],'error':_0x7d9bcb(0x117)},_0xd5abf5[_0x7d9bcb(0x15a)]);const _0x276686=await getCalendarNames(this,_0x4a48c4);this[_0x7d9bcb(0x297)](_0xd5abf5[_0x7d9bcb(0x1d1)],_0xd5abf5[_0x7d9bcb(0x1d2)],{'success':!![],'names':_0x276686},_0xd5abf5['callback']);}else{if(_0xd5abf5[_0x7d9bcb(0x1d2)]==='simulateButler'){const {targetId:_0x1e480c,targetValue:_0x760766}=_0xd5abf5['message'];this[_0x7d9bcb(0x173)][_0x7d9bcb(0x1f3)](_0x7d9bcb(0x17e)+_0x1e480c+_0x7d9bcb(0x177)+_0x760766),await this[_0x7d9bcb(0x254)](_0x7d9bcb(0x211),{'val':!![],'ack':!![]}),await this['setStateAsync'](_0x7d9bcb(0x187),{'val':_0x7d9bcb(0x20f)+_0x1e480c,'ack':!![]}),await this[_0x7d9bcb(0x254)](_0x7d9bcb(0x266),{'val':_0x1e480c,'ack':!![]}),await this['setStateAsync']('analysis.automation.targetValue',{'val':_0x760766,'ack':!![]}),this['sendTo'](_0xd5abf5[_0x7d9bcb(0x1d1)],_0xd5abf5[_0x7d9bcb(0x1d2)],{'success':!![]},_0xd5abf5[_0x7d9bcb(0x15a)]);}else{if(_0xd5abf5[_0x7d9bcb(0x1d2)]===_0x7d9bcb(0x1e8)){const {historyId:_0x47f40c,rating:_0x211c15,comment:_0x30e392,alertReason:_0x591beb}=_0xd5abf5[_0x7d9bcb(0x29d)];_0x47f40c&&_0x211c15?(await saveFeedback(this,{'timestamp':Date[_0x7d9bcb(0x27b)](),'historyId':_0x47f40c,'rating':_0x211c15,'comment':_0x30e392,'alertReason':_0x591beb}),this[_0x7d9bcb(0x297)](_0xd5abf5[_0x7d9bcb(0x1d1)],_0xd5abf5[_0x7d9bcb(0x1d2)],{'success':!![]},_0xd5abf5['callback'])):this[_0x7d9bcb(0x297)](_0xd5abf5[_0x7d9bcb(0x1d1)],_0xd5abf5['command'],{'success':![],'error':_0x7d9bcb(0x271)},_0xd5abf5[_0x7d9bcb(0x15a)]);}else _0xd5abf5[_0x7d9bcb(0x1d2)]==='dismissAutomation'&&(this[_0x7d9bcb(0x173)]['info'](_0x7d9bcb(0x2b4)),await this[_0x7d9bcb(0x254)](_0x7d9bcb(0x211),{'val':![],'ack':!![]}),await this[_0x7d9bcb(0x254)](_0x7d9bcb(0x187),{'val':'','ack':!![]}),this[_0x7d9bcb(0x297)](_0xd5abf5[_0x7d9bcb(0x1d1)],_0xd5abf5[_0x7d9bcb(0x1d2)],{'success':!![]},_0xd5abf5['callback']));}}}}}}}}}}}if(require[a0_0x4de157(0x2a7)]!==module)module[a0_0x4de157(0x1a1)]=_0x4465f8=>new CogniLiving(_0x4465f8);else new CogniLiving();