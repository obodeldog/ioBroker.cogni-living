const a0_0x543063=a0_0xd6fd;(function(_0x40c65a,_0x4190a6){const _0x1efb61=a0_0xd6fd,_0x517dcf=_0x40c65a();while(!![]){try{const _0x1d21be=-parseInt(_0x1efb61(0x16c))/0x1+-parseInt(_0x1efb61(0x247))/0x2+-parseInt(_0x1efb61(0x20c))/0x3*(-parseInt(_0x1efb61(0x20f))/0x4)+parseInt(_0x1efb61(0x293))/0x5*(-parseInt(_0x1efb61(0x24c))/0x6)+-parseInt(_0x1efb61(0x212))/0x7*(-parseInt(_0x1efb61(0x182))/0x8)+-parseInt(_0x1efb61(0x2d7))/0x9*(-parseInt(_0x1efb61(0x23b))/0xa)+parseInt(_0x1efb61(0x209))/0xb;if(_0x1d21be===_0x4190a6)break;else _0x517dcf['push'](_0x517dcf['shift']());}catch(_0x5e2917){_0x517dcf['push'](_0x517dcf['shift']());}}}(a0_0x2f2c,0x475ad));const a0_0x3797d1=(function(){let _0x51c18d=!![];return function(_0x350584,_0x49b601){const _0x8fc2fe=_0x51c18d?function(){const _0x404197=a0_0xd6fd;if(_0x49b601){const _0x95080c=_0x49b601[_0x404197(0x250)](_0x350584,arguments);return _0x49b601=null,_0x95080c;}}:function(){};return _0x51c18d=![],_0x8fc2fe;};}()),a0_0x114548=a0_0x3797d1(this,function(){const _0x4ecca5=a0_0xd6fd;return a0_0x114548[_0x4ecca5(0x17d)]()[_0x4ecca5(0x257)](_0x4ecca5(0x1e4))[_0x4ecca5(0x17d)]()[_0x4ecca5(0x2e7)](a0_0x114548)[_0x4ecca5(0x257)](_0x4ecca5(0x1e4));});a0_0x114548();'use strict';const utils=require('@iobroker/adapter-core'),{GoogleGenerativeAI}=require(a0_0x543063(0x1b0)),{spawn}=require(a0_0x543063(0x1df)),path=require(a0_0x543063(0x277)),fs=require('fs'),installer=require(a0_0x543063(0x207)),scanner=require(a0_0x543063(0x272)),schedulers=require(a0_0x543063(0x198)),HISTORY_MAX_SIZE=0x32,RAW_LOG_MAX_SIZE=0x9c4,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL=a0_0x543063(0x20e),SEQUENCE_TIMEOUT_MS=0x5*0x3c*0x3e8,MAX_TRAINING_SET_SIZE=0x1f4,THERMO_LOG_SIZE=0x3e8,EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,LTM_DP_RAW_LOG='LTM.rawEventLog',LTM_DP_DAILY_DIGESTS=a0_0x543063(0x242),LTM_DP_STATUS=a0_0x543063(0x226),LTM_DP_TRIGGER_DIGEST=a0_0x543063(0x167),LTM_DP_BASELINE_STATUS=a0_0x543063(0x282),LTM_DP_DRIFT_CHANNEL=a0_0x543063(0x295),LTM_DP_DRIFT_STATUS=a0_0x543063(0x2d5),LTM_DP_DRIFT_DETAILS=a0_0x543063(0x1c4),LTM_DP_DRIFT_LAST_CHECK='LTM.driftAnalysis.lastCheck',SYSTEM_DP_MODE=a0_0x543063(0x1fa),SYSTEM_MODES={'NORMAL':'normal','VACATION':'vacation','PARTY':a0_0x543063(0x234),'GUEST':'guest'},AUTO_RESET_MODES=[SYSTEM_MODES[a0_0x543063(0x1b2)],SYSTEM_MODES[a0_0x543063(0x1b7)]],PERSONA_MAPPING={'generic':'Analysiere\x20ausgewogen.','senior_aal':a0_0x543063(0x27b),'family':'Fokus\x20auf\x20Familienroutinen.','single_comfort':a0_0x543063(0x199),'security':'PRIORITÃ„T:\x20Sicherheit.'},ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};let activeSequence=[],sequenceTimer=null;async function initZombies(_0xff94cd){const _0x2a334d=a0_0x543063;try{const _0x532aeb=[_0x2a334d(0x2f6),_0x2a334d(0x1ff)];for(const _0x844d4b of _0x532aeb){try{const _0x4f29d8=await _0xff94cd[_0x2a334d(0x2eb)](_0x844d4b);if(_0x4f29d8)await _0xff94cd[_0x2a334d(0x2ea)](_0x844d4b);}catch(_0x37a440){}}}catch(_0x3de2f3){}}async function checkLicense(_0x33792a){return!![];}async function initHistory(_0xcc745){const _0x555d05=a0_0x543063;try{const _0x59723e=await _0xcc745['getStateAsync'](_0x555d05(0x22c));_0x59723e&&_0x59723e[_0x555d05(0x239)]&&(_0xcc745['eventHistory']=JSON[_0x555d05(0x25a)](_0x59723e[_0x555d05(0x239)][_0x555d05(0x17d)]()));}catch(_0x583612){_0xcc745['eventHistory']=[];}try{const _0x53d87f=await _0xcc745[_0x555d05(0x29a)](_0x555d05(0x256));if(_0x53d87f&&_0x53d87f[_0x555d05(0x239)])_0xcc745[_0x555d05(0x1d7)]=JSON[_0x555d05(0x25a)](_0x53d87f[_0x555d05(0x239)][_0x555d05(0x17d)]());}catch(_0x143fb0){_0xcc745[_0x555d05(0x1d7)]=[];}if(_0xcc745[_0x555d05(0x23e)]&&_0xcc745['eventHistory'][_0x555d05(0x264)]>0x0){_0xcc745[_0x555d05(0x21b)]['info'](_0x555d05(0x292));for(let _0x1c3205=_0xcc745[_0x555d05(0x23e)][_0x555d05(0x264)]-0x1;_0x1c3205>=0x0;_0x1c3205--){const _0x32c8b4=_0xcc745['eventHistory'][_0x1c3205];if(_0x32c8b4&&_0x32c8b4['id']!==undefined&&_0x32c8b4[_0x555d05(0x163)]!==undefined)_0xcc745[_0x555d05(0x21d)][_0x32c8b4['id']]=_0x32c8b4[_0x555d05(0x163)];}}}async function initSystemConfig(_0x568615){const _0x5f27ad=a0_0x543063;try{const _0xe8c176=await _0x568615['getForeignObjectAsync'](_0x5f27ad(0x1ee));if(_0xe8c176&&_0xe8c176[_0x5f27ad(0x162)])_0x568615['systemConfig']={'latitude':_0xe8c176['common'][_0x5f27ad(0x2de)]||0x0,'longitude':_0xe8c176['common'][_0x5f27ad(0x2a2)]||0x0,'city':_0xe8c176[_0x5f27ad(0x162)][_0x5f27ad(0x186)]||''};}catch(_0x36563a){}}async function createAllObjects(_0x44e014){const _0x37bcce=a0_0x543063;await _0x44e014['extendObjectAsync'](_0x37bcce(0x231),{'type':_0x37bcce(0x16b),'common':{'name':_0x37bcce(0x23a)},'native':{}}),await _0x44e014['extendObjectAsync'](SYSTEM_DP_MODE,{'type':_0x37bcce(0x281),'common':{'name':_0x37bcce(0x1f6),'type':'string','role':_0x37bcce(0x281),'read':!![],'write':!![],'def':SYSTEM_MODES[_0x37bcce(0x2c2)]},'native':{}}),await _0x44e014[_0x37bcce(0x2b8)]('system.presenceWho',{'type':_0x37bcce(0x281),'common':{'name':_0x37bcce(0x1b9),'type':_0x37bcce(0x286),'role':_0x37bcce(0x2ba),'read':!![],'write':![]},'native':{}}),await _0x44e014[_0x37bcce(0x2b8)](_0x37bcce(0x1e6),{'type':'state','common':{'name':'Last\x20raw\x20event','type':_0x37bcce(0x286),'role':_0x37bcce(0x1d2),'read':!![],'write':![]},'native':{}}),await _0x44e014[_0x37bcce(0x2b8)](_0x37bcce(0x22c),{'type':_0x37bcce(0x281),'common':{'name':_0x37bcce(0x189),'type':_0x37bcce(0x286),'role':_0x37bcce(0x1d2),'read':!![],'write':![]},'native':{}}),await _0x44e014[_0x37bcce(0x2ef)](_0x37bcce(0x280),{'type':_0x37bcce(0x16b),'common':{'name':_0x37bcce(0x279)},'native':{}}),await _0x44e014[_0x37bcce(0x2b8)](_0x37bcce(0x220),{'type':_0x37bcce(0x281),'common':{'name':_0x37bcce(0x275),'type':_0x37bcce(0x192),'role':_0x37bcce(0x27a),'read':!![],'write':!![]},'native':{}}),await _0x44e014['setObjectNotExistsAsync'](_0x37bcce(0x289),{'type':_0x37bcce(0x281),'common':{'name':'Train\x20Health','type':_0x37bcce(0x192),'role':_0x37bcce(0x27a),'read':!![],'write':!![]},'native':{}}),await _0x44e014[_0x37bcce(0x2b8)](_0x37bcce(0x2bb),{'type':_0x37bcce(0x281),'common':{'name':_0x37bcce(0x2be),'type':_0x37bcce(0x192),'role':'button','read':!![],'write':!![]},'native':{}}),await _0x44e014['setObjectNotExistsAsync'](_0x37bcce(0x26f),{'type':_0x37bcce(0x281),'common':{'name':'Train\x20Comfort','type':'boolean','role':_0x37bcce(0x27a),'read':!![],'write':!![]},'native':{}}),await _0x44e014[_0x37bcce(0x2b8)](_0x37bcce(0x169),{'type':'state','common':{'name':'Build\x20Topology','type':'boolean','role':_0x37bcce(0x27a),'read':!![],'write':!![]},'native':{}}),await _0x44e014[_0x37bcce(0x2b8)]('analysis.training.status',{'type':_0x37bcce(0x281),'common':{'name':_0x37bcce(0x2a3),'type':_0x37bcce(0x286),'role':_0x37bcce(0x2ba),'read':!![],'write':![]},'native':{}}),await _0x44e014[_0x37bcce(0x2ef)]('analysis.security',{'type':_0x37bcce(0x16b),'common':{'name':_0x37bcce(0x1c8)},'native':{}}),await _0x44e014['setObjectNotExistsAsync'](_0x37bcce(0x1ed),{'type':_0x37bcce(0x281),'common':{'name':_0x37bcce(0x1a1),'type':_0x37bcce(0x243),'role':_0x37bcce(0x163),'read':!![],'write':![]},'native':{}}),await _0x44e014[_0x37bcce(0x2b8)](_0x37bcce(0x2d2),{'type':_0x37bcce(0x281),'common':{'name':_0x37bcce(0x1bf),'type':_0x37bcce(0x243),'role':_0x37bcce(0x163),'read':!![],'write':![],'def':0.05},'native':{}}),await _0x44e014[_0x37bcce(0x2b8)]('analysis.security.lastCheck',{'type':'state','common':{'name':_0x37bcce(0x2cb),'type':_0x37bcce(0x286),'role':'date','read':!![],'write':![]},'native':{}}),await _0x44e014[_0x37bcce(0x2b8)](_0x37bcce(0x1e0),{'type':_0x37bcce(0x281),'common':{'name':_0x37bcce(0x24f),'type':'string','role':_0x37bcce(0x1d2),'read':!![],'write':![]},'native':{}}),await _0x44e014['extendObjectAsync']('analysis.health',{'type':_0x37bcce(0x16b),'common':{'name':_0x37bcce(0x213)},'native':{}}),await _0x44e014[_0x37bcce(0x2b8)](_0x37bcce(0x2ae),{'type':_0x37bcce(0x281),'common':{'name':_0x37bcce(0x2cb),'type':_0x37bcce(0x286),'role':_0x37bcce(0x2e9),'read':!![],'write':![]},'native':{}}),await _0x44e014[_0x37bcce(0x2b8)](_0x37bcce(0x1a8),{'type':_0x37bcce(0x281),'common':{'name':_0x37bcce(0x1e8),'type':_0x37bcce(0x192),'role':_0x37bcce(0x25d),'read':!![],'write':![]},'native':{}}),await _0x44e014['setObjectNotExistsAsync'](_0x37bcce(0x2af),{'type':_0x37bcce(0x281),'common':{'name':'Trend','type':_0x37bcce(0x286),'role':_0x37bcce(0x2ba),'read':!![],'write':![]},'native':{}}),await _0x44e014['setObjectNotExistsAsync'](_0x37bcce(0x19a),{'type':_0x37bcce(0x281),'common':{'name':_0x37bcce(0x1d3),'type':'number','role':_0x37bcce(0x163),'read':!![],'write':![]},'native':{}}),await _0x44e014[_0x37bcce(0x2b8)]('analysis.health.todayVector',{'type':_0x37bcce(0x281),'common':{'name':_0x37bcce(0x249),'type':'string','role':'json','read':!![],'write':![]},'native':{}}),await _0x44e014[_0x37bcce(0x2b8)]('analysis.health.gaitSpeed',{'type':'state','common':{'name':_0x37bcce(0x1af),'type':_0x37bcce(0x243),'role':_0x37bcce(0x163),'read':!![],'write':![]},'native':{}}),await _0x44e014[_0x37bcce(0x2ef)](_0x37bcce(0x284),{'type':'channel','common':{'name':_0x37bcce(0x225)},'native':{}}),await _0x44e014[_0x37bcce(0x2b8)](_0x37bcce(0x25e),{'type':_0x37bcce(0x281),'common':{'name':'Insulation\x20Score','type':_0x37bcce(0x286),'role':_0x37bcce(0x2ba),'read':!![],'write':![]},'native':{}}),await _0x44e014[_0x37bcce(0x2b8)]('analysis.energy.heatingScore',{'type':'state','common':{'name':_0x37bcce(0x16e),'type':_0x37bcce(0x286),'role':_0x37bcce(0x2ba),'read':!![],'write':![]},'native':{}}),await _0x44e014[_0x37bcce(0x2b8)](_0x37bcce(0x1e7),{'type':_0x37bcce(0x281),'common':{'name':_0x37bcce(0x29b),'type':_0x37bcce(0x286),'role':_0x37bcce(0x1d2),'read':!![],'write':![]},'native':{}}),await _0x44e014['extendObjectAsync'](_0x37bcce(0x2aa),{'type':_0x37bcce(0x16b),'common':{'name':_0x37bcce(0x2aa)},'native':{}}),await _0x44e014[_0x37bcce(0x2ef)](LTM_DP_RAW_LOG,{'type':_0x37bcce(0x281),'common':{'name':_0x37bcce(0x1ea),'type':_0x37bcce(0x286),'role':_0x37bcce(0x1d2),'read':!![],'write':![]},'native':{}}),await _0x44e014['extendObjectAsync'](LTM_DP_DAILY_DIGESTS,{'type':_0x37bcce(0x281),'common':{'name':_0x37bcce(0x1ac),'type':'string','role':_0x37bcce(0x1d2),'read':!![],'write':![]},'native':{}}),await _0x44e014['setObjectNotExistsAsync'](_0x37bcce(0x16d),{'type':'state','common':{'name':_0x37bcce(0x241),'type':_0x37bcce(0x286),'role':_0x37bcce(0x1d2),'read':!![],'write':![]},'native':{}}),await _0x44e014[_0x37bcce(0x2b8)](_0x37bcce(0x269),{'type':_0x37bcce(0x281),'common':{'name':'Thermodynamics','type':_0x37bcce(0x286),'role':_0x37bcce(0x1d2),'read':!![],'write':![]},'native':{}}),await _0x44e014[_0x37bcce(0x2b8)](_0x37bcce(0x2ee),{'type':_0x37bcce(0x281),'common':{'name':_0x37bcce(0x215),'type':_0x37bcce(0x192),'role':_0x37bcce(0x27a),'read':!![],'write':!![]},'native':{}}),await _0x44e014[_0x37bcce(0x2b8)](_0x37bcce(0x25b),{'type':_0x37bcce(0x281),'common':{'name':_0x37bcce(0x2e6),'type':_0x37bcce(0x192),'role':_0x37bcce(0x27a),'read':!![],'write':!![]},'native':{}}),await _0x44e014[_0x37bcce(0x2b8)](_0x37bcce(0x170),{'type':_0x37bcce(0x281),'common':{'name':_0x37bcce(0x285),'type':'boolean','role':_0x37bcce(0x263),'read':!![],'write':![]},'native':{}}),await _0x44e014[_0x37bcce(0x2b8)](_0x37bcce(0x2d8),{'type':_0x37bcce(0x281),'common':{'name':_0x37bcce(0x240),'type':_0x37bcce(0x286),'role':_0x37bcce(0x1c7),'read':!![],'write':![]},'native':{}}),await _0x44e014['setObjectNotExistsAsync'](_0x37bcce(0x21c),{'type':_0x37bcce(0x281),'common':{'name':_0x37bcce(0x29e),'type':_0x37bcce(0x286),'role':_0x37bcce(0x2ba),'read':!![],'write':![]},'native':{}}),await _0x44e014['setObjectNotExistsAsync']('analysis.automation.patternDetected',{'type':_0x37bcce(0x281),'common':{'name':_0x37bcce(0x1f0),'type':_0x37bcce(0x192),'role':'indicator','read':!![],'write':![]},'native':{}}),await _0x44e014[_0x37bcce(0x2b8)](_0x37bcce(0x2cd),{'type':'state','common':{'name':_0x37bcce(0x24b),'type':_0x37bcce(0x286),'role':'text','read':!![],'write':![]},'native':{}}),await _0x44e014[_0x37bcce(0x2b8)]('analysis.automation.detectedPatterns',{'type':_0x37bcce(0x281),'common':{'name':_0x37bcce(0x173),'type':_0x37bcce(0x286),'role':_0x37bcce(0x1d2),'read':!![],'write':![]},'native':{}}),await _0x44e014[_0x37bcce(0x2b8)](_0x37bcce(0x259),{'type':_0x37bcce(0x281),'common':{'name':'Target\x20ID','type':_0x37bcce(0x286),'role':_0x37bcce(0x2ba),'read':!![],'write':![]},'native':{}}),await _0x44e014['setObjectNotExistsAsync'](_0x37bcce(0x1e5),{'type':_0x37bcce(0x281),'common':{'name':_0x37bcce(0x216),'type':'string','role':_0x37bcce(0x2ba),'read':!![],'write':![]},'native':{}}),await _0x44e014['setObjectNotExistsAsync'](_0x37bcce(0x174),{'type':_0x37bcce(0x281),'common':{'name':_0x37bcce(0x22d),'type':_0x37bcce(0x192),'role':_0x37bcce(0x229),'read':!![],'write':!![]},'native':{}}),await _0x44e014[_0x37bcce(0x2b8)]('analysis.automation.triggerAction',{'type':_0x37bcce(0x281),'common':{'name':_0x37bcce(0x185),'type':_0x37bcce(0x192),'role':_0x37bcce(0x27a),'read':!![],'write':!![]},'native':{}});}async function loadSystemMode(_0x5ae785){const _0x3b5073=a0_0x543063;try{const _0x1abcc3=await _0x5ae785[_0x3b5073(0x29a)](SYSTEM_DP_MODE);_0x1abcc3&&_0x1abcc3[_0x3b5073(0x239)]&&Object[_0x3b5073(0x1b5)](SYSTEM_MODES)[_0x3b5073(0x1a7)](_0x1abcc3[_0x3b5073(0x239)])?_0x5ae785[_0x3b5073(0x235)]=_0x1abcc3[_0x3b5073(0x239)]:(_0x5ae785['currentSystemMode']=SYSTEM_MODES[_0x3b5073(0x2c2)],await _0x5ae785[_0x3b5073(0x271)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x3b5073(0x2c2)],'ack':!![]}));}catch(_0x45430c){_0x5ae785[_0x3b5073(0x235)]=SYSTEM_MODES[_0x3b5073(0x2c2)];}}async function loadRawEventLog(_0x1e7921){const _0x2783fa=a0_0x543063;try{const _0x1d6ee0=await _0x1e7921[_0x2783fa(0x29a)](LTM_DP_RAW_LOG);if(_0x1d6ee0&&_0x1d6ee0[_0x2783fa(0x239)])_0x1e7921[_0x2783fa(0x1b8)]=JSON[_0x2783fa(0x25a)](_0x1d6ee0[_0x2783fa(0x239)]);}catch(_0x483083){_0x1e7921[_0x2783fa(0x1b8)]=[];}}async function saveRawEventLog(_0x29cf06){const _0x156657=a0_0x543063;if(_0x29cf06[_0x156657(0x1b8)][_0x156657(0x264)]>RAW_LOG_MAX_SIZE)_0x29cf06[_0x156657(0x1b8)][_0x156657(0x1f2)](0x0,_0x29cf06[_0x156657(0x1b8)]['length']-RAW_LOG_MAX_SIZE);await _0x29cf06[_0x156657(0x271)](LTM_DP_RAW_LOG,{'val':JSON['stringify'](_0x29cf06['rawEventLog']),'ack':!![]});}async function loadDailyDigests(_0x24c1ee){const _0x128ef2=a0_0x543063;try{const _0x46a77a=await _0x24c1ee[_0x128ef2(0x29a)](LTM_DP_DAILY_DIGESTS);if(_0x46a77a&&_0x46a77a[_0x128ef2(0x239)])_0x24c1ee[_0x128ef2(0x1a0)]=JSON[_0x128ef2(0x25a)](_0x46a77a['val']);}catch(_0x3d4c21){_0x24c1ee[_0x128ef2(0x1a0)]=[];}await updateBaselineStatus(_0x24c1ee);}async function saveDailyDigests(_0x5b0e80,_0x5305df=!![]){const _0x47f89b=a0_0x543063,_0x5bca64=_0x5b0e80['config'][_0x47f89b(0x23c)]||0x3c;_0x5b0e80[_0x47f89b(0x1a0)][_0x47f89b(0x264)]>_0x5bca64&&_0x5b0e80[_0x47f89b(0x1a0)][_0x47f89b(0x1f2)](0x0,_0x5b0e80[_0x47f89b(0x1a0)]['length']-_0x5bca64);await _0x5b0e80['setStateAsync'](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x47f89b(0x2b6)](_0x5b0e80['dailyDigests']),'ack':!![]});if(_0x5305df)await updateBaselineStatus(_0x5b0e80);}async function updateAnalysisHistory(_0x128584,_0x5a7293){const _0x17707b=a0_0x543063;_0x128584[_0x17707b(0x1d7)][_0x17707b(0x22e)](_0x5a7293);if(_0x128584[_0x17707b(0x1d7)][_0x17707b(0x264)]>HISTORY_MAX_SIZE)_0x128584[_0x17707b(0x1d7)][_0x17707b(0x2a7)]();await _0x128584[_0x17707b(0x271)](_0x17707b(0x256),{'val':JSON[_0x17707b(0x2b6)](_0x128584[_0x17707b(0x1d7)]),'ack':!![]});}async function updateBaselineStatus(_0x4587b9){const _0x7082f7=a0_0x543063;if(!_0x4587b9[_0x7082f7(0x2f3)]){await _0x4587b9[_0x7082f7(0x271)](LTM_DP_BASELINE_STATUS,{'val':_0x7082f7(0x18a),'ack':!![]});return;}const _0x25f43b=_0x4587b9[_0x7082f7(0x1a0)][_0x7082f7(0x264)]>=(_0x4587b9[_0x7082f7(0x26b)]['minDaysForBaseline']||0x7)?'Aktiv\x20('+_0x4587b9[_0x7082f7(0x1a0)][_0x7082f7(0x264)]+_0x7082f7(0x17f):_0x7082f7(0x17c)+_0x4587b9[_0x7082f7(0x1a0)]['length']+'/'+(_0x4587b9[_0x7082f7(0x26b)][_0x7082f7(0x27c)]||0x7)+')';await _0x4587b9[_0x7082f7(0x271)](LTM_DP_BASELINE_STATUS,{'val':_0x25f43b,'ack':!![]});}async function initSensorSubscriptions(_0x5637b3){const _0x463d62=a0_0x543063,_0x5be939=_0x5637b3[_0x463d62(0x26b)][_0x463d62(0x2e1)];if(_0x5be939)for(const _0x41efec of _0x5be939){await _0x5637b3[_0x463d62(0x1a5)](_0x41efec['id']);}}function a0_0xd6fd(_0x3a8db3,_0x4b3ede){const _0x94524c=a0_0x2f2c();return a0_0xd6fd=function(_0x114548,_0x3797d1){_0x114548=_0x114548-0x15c;let _0x2f2cda=_0x94524c[_0x114548];return _0x2f2cda;},a0_0xd6fd(_0x3a8db3,_0x4b3ede);}async function initPresenceSubscriptions(_0x55a89b){const _0x27fb73=a0_0x543063,_0x4404a1=_0x55a89b[_0x27fb73(0x26b)][_0x27fb73(0x161)];if(_0x4404a1)for(const _0x57dc7a of _0x4404a1){await _0x55a89b[_0x27fb73(0x1a5)](_0x57dc7a);}}async function setupTelegramListener(_0x5d3aae){const _0x33bb86=a0_0x543063,_0x15a31b=_0x5d3aae['config'][_0x33bb86(0x1ba)];if(_0x5d3aae[_0x33bb86(0x26b)][_0x33bb86(0x2c6)]&&_0x15a31b)await _0x5d3aae['subscribeForeignStatesAsync'](_0x15a31b+_0x33bb86(0x221));}async function checkWifiPresence(_0x57c507){const _0x2c7468=a0_0x543063;try{const _0x36a6ca=_0x57c507[_0x2c7468(0x26b)][_0x2c7468(0x161)]||[];let _0x57370b=![];const _0x26f1c4=[];for(const _0x1cd5c6 of _0x36a6ca){try{const _0x352efb=await _0x57c507[_0x2c7468(0x1fd)](_0x1cd5c6);_0x352efb&&(_0x352efb[_0x2c7468(0x239)]===!![]||_0x352efb['val']==='online'||_0x352efb[_0x2c7468(0x239)]===0x1)&&(_0x57370b=!![],_0x26f1c4[_0x2c7468(0x2e0)](_0x1cd5c6));}catch(_0x543d28){}}return await _0x57c507[_0x2c7468(0x271)](_0x2c7468(0x2f0),{'val':_0x26f1c4[_0x2c7468(0x255)](',\x20'),'ack':!![]}),_0x57370b&&(_0x57c507['exitTimer']&&(_0x57c507[_0x2c7468(0x21b)][_0x2c7468(0x22a)](_0x2c7468(0x1f4)),abortExitTimer(_0x57c507)),!_0x57c507['isPresent']&&_0x57c507[_0x2c7468(0x235)]===SYSTEM_MODES[_0x2c7468(0x2c2)]&&await setPresence(_0x57c507,!![])),_0x57370b;}catch(_0x1f70f3){return![];}}function startExitTimer(_0x4c3201){const _0x4ca721=a0_0x543063;abortExitTimer(_0x4c3201),_0x4c3201[_0x4ca721(0x193)]=!![],_0x4c3201[_0x4ca721(0x1bc)]=setTimeout(()=>{const _0x57272e=_0x4ca721;_0x4c3201[_0x57272e(0x193)]=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),_0x4c3201[_0x4ca721(0x22f)]=setTimeout(()=>{setPresence(_0x4c3201,![]),_0x4c3201['exitTimer']=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}function abortExitTimer(_0x50419b){const _0x5214ef=a0_0x543063;if(_0x50419b[_0x5214ef(0x22f)])clearTimeout(_0x50419b[_0x5214ef(0x22f)]);if(_0x50419b[_0x5214ef(0x1bc)])clearTimeout(_0x50419b[_0x5214ef(0x1bc)]);_0x50419b['exitTimer']=null,_0x50419b[_0x5214ef(0x1bc)]=null,_0x50419b[_0x5214ef(0x193)]=![];}async function setPresence(_0x202db8,_0x3134a0){const _0x2747c1=a0_0x543063;if(_0x202db8['isPresent']===_0x3134a0)return;_0x202db8['isPresent']=_0x3134a0,await _0x202db8[_0x2747c1(0x271)]('system.isPresent',{'val':_0x3134a0,'ack':!![]});}async function executeAutomationAction(_0x1ad59c){const _0x56dc03=a0_0x543063;try{const _0x311476=await _0x1ad59c['getStateAsync'](_0x56dc03(0x259)),_0x1fee35=await _0x1ad59c['getStateAsync']('analysis.automation.targetValue');if(_0x311476&&_0x311476[_0x56dc03(0x239)]&&_0x1fee35){const _0xb57855=_0x311476['val'];let _0x445d5a=_0x1fee35[_0x56dc03(0x239)];try{_0x445d5a=JSON['parse'](_0x445d5a);}catch(_0x36c021){}_0x1ad59c['log'][_0x56dc03(0x22a)](_0x56dc03(0x1dd)+_0xb57855+'\x20=\x20'+_0x445d5a),await _0x1ad59c[_0x56dc03(0x1a4)](_0xb57855,_0x445d5a);}else _0x1ad59c[_0x56dc03(0x21b)]['warn'](_0x56dc03(0x245));}catch(_0x2b3536){_0x1ad59c['log'][_0x56dc03(0x204)]('BUTLER\x20Execution\x20Error:\x20'+_0x2b3536[_0x56dc03(0x16f)]);}}async function processSensorEvent(_0x81bbaa,_0x16c5a2,_0x3eb4e4,_0x47ef32){const _0x44c8a1=a0_0x543063;if(!_0x47ef32)return;const _0x45a252=_0x3eb4e4[_0x44c8a1(0x239)],_0x2ee293=Date[_0x44c8a1(0x2a8)](),_0x5a8acd=_0x81bbaa[_0x44c8a1(0x21d)][_0x16c5a2];_0x81bbaa['sensorLastValues'][_0x16c5a2]=_0x45a252;if(!_0x47ef32[_0x44c8a1(0x200)]&&_0x5a8acd!=undefined&&_0x5a8acd==_0x45a252)return;const _0x3c86d6=(_0x47ef32['type']||'')['toLowerCase'](),_0x599d4d=_0x3c86d6[_0x44c8a1(0x1a7)](_0x44c8a1(0x2e4))||_0x3c86d6[_0x44c8a1(0x1a7)]('temperatur')||_0x3c86d6[_0x44c8a1(0x1a7)](_0x44c8a1(0x208))||_0x3c86d6[_0x44c8a1(0x1a7)](_0x44c8a1(0x2ed));_0x81bbaa[_0x44c8a1(0x2f3)]&&_0x599d4d&&recordThermodynamics(_0x81bbaa,_0x16c5a2,_0x45a252,_0x47ef32[_0x44c8a1(0x28f)]);const _0x2b0e91={'timestamp':_0x2ee293,'id':_0x16c5a2,'name':_0x47ef32[_0x44c8a1(0x1fb)],'type':_0x47ef32[_0x44c8a1(0x2e3)],'location':_0x47ef32['location'],'value':_0x45a252};_0x81bbaa[_0x44c8a1(0x23e)][_0x44c8a1(0x22e)](_0x2b0e91);if(_0x81bbaa['eventHistory'][_0x44c8a1(0x264)]>HISTORY_MAX_SIZE)_0x81bbaa[_0x44c8a1(0x23e)][_0x44c8a1(0x2a7)]();await _0x81bbaa[_0x44c8a1(0x271)]('events.lastEvent',{'val':JSON[_0x44c8a1(0x2b6)](_0x2b0e91),'ack':!![]}),await _0x81bbaa[_0x44c8a1(0x271)](_0x44c8a1(0x22c),{'val':JSON[_0x44c8a1(0x2b6)](_0x81bbaa[_0x44c8a1(0x23e)]),'ack':!![]});_0x81bbaa[_0x44c8a1(0x2f3)]&&(_0x81bbaa[_0x44c8a1(0x1b8)][_0x44c8a1(0x2e0)](_0x2b0e91),await saveRawEventLog(_0x81bbaa),recordSequence(_0x81bbaa,_0x2b0e91));if(_0x47ef32[_0x44c8a1(0x274)]&&_0x45a252===!![]){if(_0x81bbaa['isPresent']&&!_0x81bbaa[_0x44c8a1(0x193)])startExitTimer(_0x81bbaa);else{if(!_0x81bbaa['isPresent'])setPresence(_0x81bbaa,!![]);}}else{if(_0x47ef32['type']===_0x44c8a1(0x262)&&_0x45a252===!![]){if(_0x81bbaa['exitTimer'])abortExitTimer(_0x81bbaa);if(!_0x81bbaa[_0x44c8a1(0x203)]&&_0x81bbaa[_0x44c8a1(0x235)]===SYSTEM_MODES['NORMAL'])setPresence(_0x81bbaa,!![]);}}}async function recordThermodynamics(_0x4817ca,_0x4f54b7,_0x4990d2,_0x3e6a57){const _0x24e722=a0_0x543063,_0x6c3402=await getOutsideTemperatureNumeric(_0x4817ca),_0x17ebd5=await _0x4817ca[_0x24e722(0x29a)](_0x24e722(0x269));let _0x223645=[];if(_0x17ebd5&&_0x17ebd5['val'])try{_0x223645=JSON[_0x24e722(0x25a)](_0x17ebd5[_0x24e722(0x239)]);}catch(_0x36787d){}_0x223645['push']({'ts':Date[_0x24e722(0x2a8)](),'room':_0x3e6a57||'Unknown','t_in':_0x4990d2,'t_out':_0x6c3402});if(_0x223645[_0x24e722(0x264)]>THERMO_LOG_SIZE)_0x223645[_0x24e722(0x17b)]();await _0x4817ca['setStateAsync'](_0x24e722(0x269),{'val':JSON[_0x24e722(0x2b6)](_0x223645),'ack':!![]});}function a0_0x2f2c(){const _0x4e58b8=['insulation','stringify','close','setObjectNotExistsAsync','heating','text','analysis.training.triggerEnergy','telegram','toLocaleTimeString','Train\x20Energy','ðŸ›‹ï¸\x20BUTLER:\x20Found\x20','generateContent','KI-Modell\x20nicht\x20initialisiert','NORMAL','ENERGY_TRAIN_RESULT','slice','.Current.WeatherText','notifyTelegramEnabled','status','getLtmData','HEALTH_RESULT','enum.rooms.*','Last\x20Check','Kalender\x20deaktiviert.','analysis.automation.description','fenster','PYTHON_EXE','onStateChange','livingContext','analysis.security.currentThreshold','getMinutes','systemConfig','LTM.driftAnalysis.baselineDrift','split','117HqAlPU','analysis.alertReason','loc','\x20=\x20','TRAIN_HEALTH','analysisTimer','testApiKey','latitude','round','push','devices','tÃ¼r','type','temperature','analysis.security.lastCheck','Trigger\x20Briefing','constructor','ðŸ›¡ï¸\x20SECURITY\x20CHECK:\x20Score\x20','date','delObjectAsync','getObjectAsync','pythonProcess','heizung','analysis.trigger','extendObjectAsync','system.presenceWho','.\x20SYSTEM_MODE:\x20','Unbekannt','isProVersion','âœ…\x20HEALTH\x20TRAINED.','Error\x20launching\x20Python:\x20','analysis.history_debug_00','lampe','PONG','subscribeStates','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','rule','enum','presenceDevices','common','value','Kein\x20API\x20Key!','data','getTime','LTM.triggerDailyDigest','ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...','analysis.training.triggerTopology','stdout','channel','323215FQYAdw','LTM.trainingData.sequences','Heating\x20Score','message','analysis.isAlert','targetId','baselineDrift','Detected\x20Patterns','analysis.automation.autoApply','forEach','TRAIN_SECURITY','map','âš ï¸\x20ALARM:\x20','reason','replace','shift','Lernphase\x20(','toString','.\x20ANWESEND:\x20','\x20Tage)','existsSync','geminiApiKey','32Erjrjj','TRAINING_COMPLETE','keys','Trigger\x20Action','city','unknown','getFullYear','Event\x20History','Deaktiviert\x20(Pro-Feature)','schalter','ENERGY_PREDICT_RESULT','HEALTH_TRAIN_RESULT','Failed:\x20','TOPOLOGY_RESULT','filter',')\x20-\x20SAFE\x20BOOT','boolean','isGracePeriodActive','prÃ¤senz','instance','ack','briefingJob','./lib/scheduler','Fokus\x20auf\x20Komfort.','analysis.health.trendValue','useWeather','PREDICT_ENERGY','normal','find','enum.functions.*','dailyDigests','Anomaly\x20Score','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','User\x20dismissed\x20automation\x20proposal.','setForeignStateAsync','subscribeForeignStatesAsync','description','includes','analysis.health.isAnomaly','apiKey','onUnload','[LOG]','Daily\x20Digests','cancel','bewegung','Gait\x20Speed\x20Trend','@google/generative-ai','analysisInterval','PARTY','application/json','.forecast.current.state','values','Activity-Level','GUEST','rawEventLog','Who\x20is\x20present?','notifyTelegramInstance','.\x20EVENTS:\x20','exitGraceTimer','object','from','Current\x20Threshold','N/A','Wetterdaten\x20deaktiviert.','analysis.health.gaitSpeed','outdoorSensorId','LTM.driftAnalysis.driftDetails','ðŸ›‹ï¸\x20BUTLER:\x20Keine\x20neuen\x20Muster\x20gefunden.','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','text.alarm','Security\x20Monitor','analysis.training.status','[RECORDER]\x20Error:\x20','analysis.energy.heatingScore','ANOMALY','substring','openweathermap','Keine\x20Wetterdaten\x20verfÃ¼gbar.','.\x20EMERGENCY:\x20','automationProposal','json','Trend\x20Value','ANALYZE_HEALTH','Digest','ANALYZE_GAIT','analysisHistory','Gemini\x20Init\x20Error:\x20','onReady','calendarInstance','getCalendarNames','TREND_RESULT','ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20','triggerDailyDigest','child_process','analysis.security.topologyMatrix','analysis.automation.detectedPatterns','Missing\x20data','Gemini\x20Error:\x20','(((.+)+)+)+$','analysis.automation.targetValue','events.lastEvent','analysis.energy.forecast','Anomaly\x20Detected','genAI','Raw\x20Log','setHours','analysis.health.todayVector','analysis.security.lastScore','system.config','exports','Pattern\x20Detected','Regel\x20erkannt:\x20','splice','getMonth','WiFi\x20Presence\x20detected.','testContext','System\x20Mode','Success:\x20','GAIT_RESULT','kill','system.mode','name','fill','getForeignStateAsync','BUILD_TOPOLOGY','events.history_debug_00','logDuplicates','ðŸ§ \x20Triggering\x20Security\x20Training...','namespace','isPresent','error','bind','door','./lib/installer','klima','8584345CAbHAu','isEmergency','useCalendar','152733dTjJJV','trim','models/gemini-flash-latest','20fvAEGh','service.py','ðŸ\x20Python\x20Pong','269031lDsKfn','Health\x20Analysis','weatherunderground','Trigger\x20Analysis','Target\x20Value','python_service','Topology\x20Error:\x20','\x0aGrund:\x20','Keine\x20Details.','log','analysis.activitySummary','sensorLastValues','generic','threshold','analysis.training.triggerSecurity','.communicate.request','setState','analysis.automation.patternDetected','inactivityThresholdHours','Energy\x20Intelligence','LTM.processingStatus','success','TRAIN_ENERGY','switch','info','light','events.history','Auto\x20Apply','unshift','exitTimer','rating','system','targetValue','timestamp','party','currentSystemMode','getOverviewData','SIMULATION:\x20Test-Vorschlag\x20fÃ¼r\x20','onMessage','val','System','318950wcezxg','ltmLtbWindowDays','licenseKey','eventHistory','callback','Alert\x20Reason','Sequences','LTM.dailyDigests','number','weatherInstance','ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','getEnums','1054186wnFHpn','lastAlertState','Today\x20Vector\x20(15m)','ready','Description','504RxVIQG','TRAIN_COMFORT','startsWith','Topology\x20Matrix','apply','setupModeResetScheduler','activityLevel','.\x20WETTER:\x20','details','join','analysis.analysisHistory','search','triggerBriefing','analysis.automation.targetId','parse','analysis.triggerBriefing','aiPersona','indicator','analysis.energy.insulationScore','VACATION','command','Training\x20Error:\x20','motion','indicator.alarm','length','ðŸ§ª\x20Simulating\x20Butler\x20Proposal:\x20','Â°C,\x20','Keine\x20Termine.','response','LTM.trainingData.thermodynamics','payload','config','endsWith','is_anomaly','floor','analysis.training.triggerComfort','\x20->\x20','setStateAsync','./lib/scanner','Briefing\x20Error:\x20','isExit','Train\x20Security','.Current.Temperature','path','toFixed','AI\x20Training','button','PRIORITÃ„T:\x20Gesundheit/AAL.','minDaysForBaseline','contact','ðŸ•¸ï¸\x20Topology\x20Map\x20updated.','getForeignObjectsAsync','analysis.training','state','LTM.baselineStatus','Success','analysis.energy','Alert\x20Status','string','ANALYZE_TREND','ltmJob','analysis.training.triggerHealth','dependencyInstallInProgress','isAlert','summary','modeResetJob','cogni-living\x20adapter\x20starting\x20(v','location','main','accuweather','Restoring\x20sensor\x20cache...','27425RUhlYV','sendTo','LTM.driftAnalysis','setupBriefingScheduler','ðŸš€\x20Starting\x20NUUKANNI\x20Logic\x20(v0.12.10)...','driftAnalysisTimer','Kein\x20API\x20Key.','getStateAsync','Temperature\x20Forecast','Adapter','\x0aSTB:\x20','Activity\x20Summary','getDate','stateChange','kontakt','longitude','Training\x20Status','Sec-Training\x20started...','diagnosis','python3','pop','now','confidence','LTM','geminiModel','toISOString','toLowerCase','analysis.health.lastCheck','analysis.health.trendDiagnosis','ltmStbWindowDays','stdin','write','debug','alertReason'];a0_0x2f2c=function(){return _0x4e58b8;};return a0_0x2f2c();}async function getOutsideTemperatureNumeric(_0x41fe2b){const _0xe26e71=a0_0x543063;if(_0x41fe2b[_0xe26e71(0x26b)]['outdoorSensorId'])try{const _0x18a282=await _0x41fe2b['getForeignStateAsync'](_0x41fe2b[_0xe26e71(0x26b)][_0xe26e71(0x1c3)]);if(_0x18a282&&_0x18a282[_0xe26e71(0x239)]!==undefined&&_0x18a282[_0xe26e71(0x239)]!==null)return parseFloat(_0x18a282['val']);}catch(_0x2b40d4){}const _0x3a0de8=_0x41fe2b[_0xe26e71(0x26b)]['weatherInstance'];if(!_0x41fe2b[_0xe26e71(0x26b)]['useWeather']||!_0x3a0de8)return null;try{let _0x4e11cb='';if(_0x3a0de8[_0xe26e71(0x1a7)](_0xe26e71(0x291)))_0x4e11cb=_0x3a0de8+_0xe26e71(0x276);else{if(_0x3a0de8[_0xe26e71(0x1a7)]('daswetter'))_0x4e11cb=_0x3a0de8+'.NextHours.Location_1.Day_1.current.temp_value';else{if(_0x3a0de8[_0xe26e71(0x1a7)](_0xe26e71(0x1ce)))_0x4e11cb=_0x3a0de8+'.forecast.current.temperature';else{if(_0x3a0de8[_0xe26e71(0x1a7)](_0xe26e71(0x214)))_0x4e11cb=_0x3a0de8+'.forecast.current.temp';}}}if(_0x4e11cb){const _0x3d89a5=await _0x41fe2b['getForeignStateAsync'](_0x4e11cb);if(_0x3d89a5&&_0x3d89a5['val']!==undefined&&_0x3d89a5[_0xe26e71(0x239)]!==null)return parseFloat(_0x3d89a5[_0xe26e71(0x239)]);}}catch(_0x130cf4){}return null;}async function recordSequence(_0x181764,_0x38ee69){const _0x254b13=a0_0x543063,_0x3e03d0=(_0x38ee69['type']||'')[_0x254b13(0x2ad)](),_0x24c6bf=[_0x254b13(0x262),_0x254b13(0x1ae),_0x254b13(0x194),'presence','occupancy',_0x254b13(0x206),_0x254b13(0x2e2),'window',_0x254b13(0x2ce),_0x254b13(0x27d),_0x254b13(0x2a1),_0x254b13(0x22b),'licht',_0x254b13(0x229),_0x254b13(0x18b),'dimmer',_0x254b13(0x2f7)];if(!_0x24c6bf['some'](_0x3e9e00=>_0x3e03d0[_0x254b13(0x1a7)](_0x3e9e00)))return;if(!_0x38ee69[_0x254b13(0x163)])return;if(sequenceTimer)clearTimeout(sequenceTimer);activeSequence[_0x254b13(0x2e0)]({'loc':_0x38ee69['location']||'Unknown','id':_0x38ee69['id'],'ts':Date['now']()}),sequenceTimer=setTimeout(async()=>{const _0x16ef85=_0x254b13;if(activeSequence[_0x16ef85(0x264)]>0x1)await saveCompletedSequence(_0x181764);activeSequence=[];},SEQUENCE_TIMEOUT_MS);}async function saveCompletedSequence(_0xee9e01){const _0x167eec=a0_0x543063;try{const _0x9fa077=await _0xee9e01['getStateAsync'](_0x167eec(0x16d));let _0x3589b2=[];if(_0x9fa077&&_0x9fa077[_0x167eec(0x239)])try{_0x3589b2=JSON[_0x167eec(0x25a)](_0x9fa077[_0x167eec(0x239)]);}catch(_0x9d2c28){}const _0x2456e4=activeSequence[0x0]['ts'],_0x59c638=activeSequence['map'](_0x2b4708=>({'loc':_0x2b4708[_0x167eec(0x2d9)],'t_delta':Math['round']((_0x2b4708['ts']-_0x2456e4)/0x3e8)})),_0x2fdf20={'timestamp':new Date(_0x2456e4)[_0x167eec(0x2ac)](),'steps':_0x59c638,'duration':Math[_0x167eec(0x2df)]((activeSequence[activeSequence[_0x167eec(0x264)]-0x1]['ts']-_0x2456e4)/0x3e8),'daytime':new Date(_0x2456e4)['getHours']()};_0x3589b2[_0x167eec(0x2e0)](_0x2fdf20);if(_0x3589b2[_0x167eec(0x264)]>MAX_TRAINING_SET_SIZE)_0x3589b2[_0x167eec(0x17b)]();await _0xee9e01[_0x167eec(0x271)](_0x167eec(0x16d),{'val':JSON[_0x167eec(0x2b6)](_0x3589b2),'ack':!![]}),runSecurityCheck(_0xee9e01,_0x2fdf20);}catch(_0x38fb11){_0xee9e01[_0x167eec(0x21b)]['error'](_0x167eec(0x1ca)+_0x38fb11[_0x167eec(0x16f)]);}}function runSecurityCheck(_0xa78824,_0x27f2e9){const _0x1f45fe=a0_0x543063;if(!_0xa78824[_0x1f45fe(0x2f3)])return;sendToPython(_0xa78824,'ANALYZE_SEQUENCE',{'sequence':_0x27f2e9});}async function createDailyDigest(_0x531a92){const _0x1f9328=a0_0x543063;if(!_0x531a92[_0x1f9328(0x2f3)])return;await _0x531a92[_0x1f9328(0x271)](LTM_DP_STATUS,{'val':'Started...','ack':!![]});if(!_0x531a92[_0x1f9328(0x2ab)]||_0x531a92['rawEventLog'][_0x1f9328(0x264)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x531a92['setStateAsync'](LTM_DP_STATUS,{'val':'Skipped\x20(No\x20AI\x20or\x20Data)','ack':!![]});return;}const _0x27b23c=JSON[_0x1f9328(0x25a)](JSON[_0x1f9328(0x2b6)](_0x531a92['rawEventLog'])),_0x18ca59=_0x27b23c[_0x1f9328(0x264)],_0x5dce3e='ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a'+JSON[_0x1f9328(0x2b6)](_0x27b23c);try{const _0xd1449d=await _0x531a92[_0x1f9328(0x2ab)][_0x1f9328(0x2c0)](_0x5dce3e),_0x3c8bd8=JSON[_0x1f9328(0x25a)](_0xd1449d['response']['text']()[_0x1f9328(0x17a)](/```json|```/g,'')[_0x1f9328(0x20d)]()),_0x3862f8={'timestamp':new Date()[_0x1f9328(0x2ac)](),'eventCount':_0x18ca59,'summary':_0x3c8bd8[_0x1f9328(0x28c)]||_0x1f9328(0x1d5),'activityLevel':_0x3c8bd8[_0x1f9328(0x252)]||_0x1f9328(0x19d),'systemMode':_0x531a92[_0x1f9328(0x235)]};_0x531a92['dailyDigests']['push'](_0x3862f8),await saveDailyDigests(_0x531a92),_0x531a92[_0x1f9328(0x1b8)]=[],await saveRawEventLog(_0x531a92),await _0x531a92[_0x1f9328(0x271)](LTM_DP_STATUS,{'val':_0x1f9328(0x283),'ack':!![]});if(_0x531a92[_0x1f9328(0x2f3)])sendToPython(_0x531a92,_0x1f9328(0x1d4),{'digest':_0x3862f8});}catch(_0x3089dc){_0x531a92['log']['error'](_0x3089dc[_0x1f9328(0x16f)]);}}async function runBaselineDriftAnalysis(_0x11b078){const _0x2a5d36=a0_0x543063;if(!_0x11b078['isProVersion']||!_0x11b078[_0x2a5d36(0x2ab)])return;const _0x52f49d=_0x11b078[_0x2a5d36(0x26b)][_0x2a5d36(0x2b0)]||0xe;if(_0x11b078[_0x2a5d36(0x1a0)]['length']<_0x52f49d+0x7){await _0x11b078['setStateAsync'](LTM_DP_DRIFT_STATUS,{'val':'N/A\x20(Learning)','ack':!![]});return;}const _0xfa9742=_0x11b078['dailyDigests']['slice'](-_0x52f49d),_0x2005aa=_0x11b078['dailyDigests'][_0x2a5d36(0x2c4)](0x0,_0x11b078[_0x2a5d36(0x1a0)][_0x2a5d36(0x264)]-_0x52f49d),_0x4989e1=_0x2a5d36(0x1c6)+JSON[_0x2a5d36(0x2b6)](_0x2005aa)+_0x2a5d36(0x29d)+JSON[_0x2a5d36(0x2b6)](_0xfa9742);try{const _0x6a729a=await _0x11b078[_0x2a5d36(0x2ab)]['generateContent'](_0x4989e1),_0x47fec=JSON[_0x2a5d36(0x25a)](_0x6a729a['response'][_0x2a5d36(0x2ba)]()[_0x2a5d36(0x17a)](/```json|```/g,'')['trim']());_0x47fec[_0x2a5d36(0x172)]&&(await _0x11b078[_0x2a5d36(0x271)](LTM_DP_DRIFT_STATUS,{'val':_0x47fec['baselineDrift'],'ack':!![]}),await _0x11b078[_0x2a5d36(0x271)](LTM_DP_DRIFT_DETAILS,{'val':_0x47fec['driftDetails'],'ack':!![]}),await _0x11b078[_0x2a5d36(0x271)](LTM_DP_DRIFT_LAST_CHECK,{'val':Date[_0x2a5d36(0x2a8)](),'ack':!![]}));}catch(_0x1ee09d){}}async function sendMorningBriefing(_0x3c9598){const _0x450d94=a0_0x543063;if(!_0x3c9598[_0x450d94(0x2ab)])return;try{const _0x4dc781=_0x450d94(0x1a2),_0x1f66f7=await _0x3c9598[_0x450d94(0x2ab)]['generateContent'](_0x4dc781),_0x430211=_0x1f66f7[_0x450d94(0x268)][_0x450d94(0x2ba)]();sendNotification(_0x3c9598,'ðŸŒ…\x20Morning\x20Briefing:\x0a'+_0x430211);}catch(_0xbc020f){_0x3c9598[_0x450d94(0x21b)][_0x450d94(0x204)](_0x450d94(0x273)+_0xbc020f[_0x450d94(0x16f)]);}}function stopPythonService(_0x568c45){const _0x3f3dc0=a0_0x543063;if(_0x568c45[_0x3f3dc0(0x2ec)]){try{_0x568c45['pythonProcess'][_0x3f3dc0(0x1f9)]();}catch(_0x63d6ef){}_0x568c45['pythonProcess']=null;}}function sendToPython(_0x1a74b6,_0x13560c,_0x5d1e0c={}){const _0x3b9f4d=a0_0x543063;if(!_0x1a74b6[_0x3b9f4d(0x2ec)]||!_0x1a74b6[_0x3b9f4d(0x2ec)][_0x3b9f4d(0x2b1)]['writable'])return;const _0x4ba639=JSON[_0x3b9f4d(0x2b6)]({'command':_0x13560c,..._0x5d1e0c});try{_0x1a74b6['pythonProcess'][_0x3b9f4d(0x2b1)][_0x3b9f4d(0x2b2)](_0x4ba639+'\x0a');}catch(_0x4da417){}}function runPythonHealthCheck(_0x8eed83){const _0x242a22=a0_0x543063;if(!_0x8eed83['dailyDigests']||_0x8eed83[_0x242a22(0x1a0)][_0x242a22(0x264)]<0x2)return;const _0x4ecd7f=_0x8eed83[_0x242a22(0x1a0)][_0x242a22(0x177)](_0x331482=>{const _0xe89908=_0x242a22,_0xbe8f7a=(_0x331482[_0xe89908(0x252)]||'')[_0xe89908(0x2ad)]();return ACTIVITY_LEVEL_MAP[_0xbe8f7a]||0x32;});sendToPython(_0x8eed83,_0x242a22(0x287),{'values':_0x4ecd7f,'tag':_0x242a22(0x1b6)});}function handlePythonResult(_0x9d187d,_0x15b503){const _0x4366b5=a0_0x543063;if(_0x15b503[_0x4366b5(0x2e3)]===_0x4366b5(0x15c))_0x9d187d['log'][_0x4366b5(0x2b3)](_0x4366b5(0x211));else{if(_0x15b503[_0x4366b5(0x2e3)]==='SECURITY_RESULT'){const {anomaly_score:_0x493daf,is_anomaly:_0x2ba084,threshold:_0x3a34e2,explanation:_0x554438}=_0x15b503['payload'];_0x9d187d[_0x4366b5(0x21b)][_0x4366b5(0x22a)](_0x4366b5(0x2e8)+_0x493daf[_0x4366b5(0x278)](0x5)+_0x4366b5(0x270)+(_0x2ba084?_0x4366b5(0x1cc):'OK')),_0x9d187d[_0x4366b5(0x271)](_0x4366b5(0x1ed),{'val':_0x493daf,'ack':!![]}),_0x9d187d[_0x4366b5(0x271)](_0x4366b5(0x2e5),{'val':new Date()[_0x4366b5(0x2ac)](),'ack':!![]});if(_0x3a34e2)_0x9d187d['setStateAsync'](_0x4366b5(0x2d2),{'val':_0x3a34e2,'ack':!![]});if(_0x2ba084){let _0x2b0ebd='UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20'+_0x493daf[_0x4366b5(0x278)](0x4)+')';if(_0x554438&&_0x554438!=='Unknown')_0x2b0ebd+=_0x4366b5(0x219)+_0x554438;_0x9d187d[_0x4366b5(0x271)](_0x4366b5(0x170),{'val':!![],'ack':!![]}),_0x9d187d['setStateAsync'](_0x4366b5(0x2d8),{'val':_0x2b0ebd,'ack':!![]}),sendNotification(_0x9d187d,'âš ï¸\x20SECURITY\x20ALARM:\x20'+_0x2b0ebd,![],!![]);}}else{if(_0x15b503[_0x4366b5(0x2e3)]===_0x4366b5(0x183)){const _0x552398=_0x15b503[_0x4366b5(0x26a)][_0x4366b5(0x254)]||'',_0x162382=_0x15b503['payload'][_0x4366b5(0x21f)],_0x8c5f5a=_0x15b503[_0x4366b5(0x26a)][_0x4366b5(0x227)]?_0x4366b5(0x1f7)+new Date()[_0x4366b5(0x2bd)]()+'\x20('+_0x552398+')':_0x4366b5(0x18e)+_0x15b503[_0x4366b5(0x26a)][_0x4366b5(0x179)];_0x9d187d[_0x4366b5(0x271)](_0x4366b5(0x1c9),{'val':_0x8c5f5a,'ack':!![]});if(_0x15b503[_0x4366b5(0x26a)]['success']&&_0x162382)_0x9d187d['setStateAsync']('analysis.security.currentThreshold',{'val':_0x162382,'ack':!![]});}else{if(_0x15b503[_0x4366b5(0x2e3)]==='COMFORT_RESULT'){const {patterns:_0x481ec2}=_0x15b503[_0x4366b5(0x26a)];if(_0x481ec2&&_0x481ec2[_0x4366b5(0x264)]>0x0){_0x9d187d[_0x4366b5(0x21b)][_0x4366b5(0x22a)](_0x4366b5(0x2bf)+_0x481ec2['length']+'\x20new\x20patterns.'),_0x9d187d[_0x4366b5(0x271)]('analysis.automation.detectedPatterns',{'val':JSON[_0x4366b5(0x2b6)](_0x481ec2),'ack':!![]});const _0x573b54=_0x481ec2[0x0],_0x502edf=_0x4366b5(0x1f1)+_0x573b54[_0x4366b5(0x15f)]+'\x20('+(_0x573b54[_0x4366b5(0x2a9)]*0x64)['toFixed'](0x0)+'%)';_0x9d187d[_0x4366b5(0x271)](_0x4366b5(0x223),{'val':!![],'ack':!![]}),_0x9d187d['setStateAsync'](_0x4366b5(0x2cd),{'val':_0x502edf,'ack':!![]});}else _0x9d187d[_0x4366b5(0x21b)][_0x4366b5(0x22a)](_0x4366b5(0x1c5)),_0x9d187d[_0x4366b5(0x271)](_0x4366b5(0x223),{'val':![],'ack':!![]}),_0x9d187d[_0x4366b5(0x271)](_0x4366b5(0x1e1),{'val':'[]','ack':!![]});}else{if(_0x15b503[_0x4366b5(0x2e3)]===_0x4366b5(0x2c3)){if(_0x15b503[_0x4366b5(0x26a)][_0x4366b5(0x227)])try{const _0x1f9eb2=JSON[_0x4366b5(0x25a)](_0x15b503['payload']['details']);if(_0x1f9eb2['insulation'])_0x9d187d[_0x4366b5(0x271)]('analysis.energy.insulationScore',{'val':JSON[_0x4366b5(0x2b6)](_0x1f9eb2[_0x4366b5(0x2b5)]),'ack':!![]});if(_0x1f9eb2['heating'])_0x9d187d[_0x4366b5(0x271)](_0x4366b5(0x1cb),{'val':JSON[_0x4366b5(0x2b6)](_0x1f9eb2[_0x4366b5(0x2b9)]),'ack':!![]});}catch(_0x540529){}}else{if(_0x15b503[_0x4366b5(0x2e3)]===_0x4366b5(0x18d)){if(_0x15b503[_0x4366b5(0x26a)][_0x4366b5(0x227)])_0x9d187d['log'][_0x4366b5(0x22a)](_0x4366b5(0x2f4));}else{if(_0x15b503[_0x4366b5(0x2e3)]===_0x4366b5(0x2c9))_0x9d187d[_0x4366b5(0x271)](_0x4366b5(0x2ae),{'val':new Date()[_0x4366b5(0x2ac)](),'ack':!![]}),_0x9d187d[_0x4366b5(0x271)](_0x4366b5(0x1a8),{'val':_0x15b503[_0x4366b5(0x26a)][_0x4366b5(0x26d)],'ack':!![]});else{if(_0x15b503[_0x4366b5(0x2e3)]===_0x4366b5(0x1dc))_0x9d187d[_0x4366b5(0x271)]('analysis.health.trendDiagnosis',{'val':_0x15b503[_0x4366b5(0x26a)][_0x4366b5(0x2a5)],'ack':!![]}),_0x9d187d['setStateAsync']('analysis.health.trendValue',{'val':_0x15b503[_0x4366b5(0x26a)]['change_percent'],'ack':!![]});else{if(_0x15b503['type']===_0x4366b5(0x1f8)){const {speed_trend:_0x4717f2}=_0x15b503[_0x4366b5(0x26a)];if(_0x4717f2!==undefined)_0x9d187d[_0x4366b5(0x271)](_0x4366b5(0x1c2),{'val':_0x4717f2,'ack':!![]});}else{if(_0x15b503[_0x4366b5(0x2e3)]===_0x4366b5(0x18c)){const {forecast:_0x3f8a9f}=_0x15b503[_0x4366b5(0x26a)];if(_0x3f8a9f)_0x9d187d[_0x4366b5(0x271)](_0x4366b5(0x1e7),{'val':JSON[_0x4366b5(0x2b6)](_0x3f8a9f),'ack':!![]});}else{if(_0x15b503[_0x4366b5(0x2e3)]===_0x4366b5(0x18f)){const {data:_0x1deb7a}=_0x15b503[_0x4366b5(0x26a)];_0x1deb7a&&(_0x9d187d[_0x4366b5(0x21b)][_0x4366b5(0x22a)](_0x4366b5(0x27e)),_0x9d187d[_0x4366b5(0x271)](_0x4366b5(0x1e0),{'val':JSON[_0x4366b5(0x2b6)](_0x1deb7a),'ack':!![]}));}}}}}}}}}}}}function startPythonService(_0x574f28){const _0x49f247=a0_0x543063;let _0x428f9d=_0x49f247(0x2a6);if(fs[_0x49f247(0x180)](installer[_0x49f247(0x2cf)]))_0x428f9d=installer[_0x49f247(0x2cf)];try{const _0x1ee93a=path['join'](__dirname,_0x49f247(0x217),_0x49f247(0x210));_0x574f28['pythonProcess']=spawn(_0x428f9d,[_0x1ee93a]),_0x574f28['pythonProcess'][_0x49f247(0x16a)]['on'](_0x49f247(0x165),_0x5e88a2=>{const _0x2c13dc=_0x49f247,_0x24dfa1=_0x5e88a2['toString']()[_0x2c13dc(0x2d6)]('\x0a');_0x24dfa1[_0x2c13dc(0x175)](_0x26eb32=>{const _0x2465ce=_0x2c13dc,_0x488b64=_0x26eb32[_0x2465ce(0x20d)]();if(!_0x488b64)return;if(_0x488b64[_0x2465ce(0x24e)](_0x2465ce(0x1ab)))_0x574f28[_0x2465ce(0x21b)][_0x2465ce(0x2b3)]('[PYTHON]\x20'+_0x488b64[_0x2465ce(0x1cd)](0x5)['trim']());else{if(_0x488b64[_0x2465ce(0x24e)]('[RESULT]'))try{const _0x18d181=JSON[_0x2465ce(0x25a)](_0x488b64[_0x2465ce(0x1cd)](0x8)[_0x2465ce(0x20d)]());handlePythonResult(_0x574f28,_0x18d181);}catch(_0x371f5f){}}});}),_0x574f28[_0x49f247(0x2ec)]['on'](_0x49f247(0x2b7),_0x2bfd4c=>{const _0x232b2a=_0x49f247;_0x574f28[_0x232b2a(0x2ec)]=null;});}catch(_0x5ec68f){_0x574f28[_0x49f247(0x21b)]['error'](_0x49f247(0x2f5)+_0x5ec68f[_0x49f247(0x16f)]);}}async function runAutopilot(_0x5a4860){const _0xbb1f01=a0_0x543063;_0x5a4860[_0xbb1f01(0x21b)][_0xbb1f01(0x2b3)](_0xbb1f01(0x168)),await runGeminiAnalysis(_0x5a4860),updateHealthVector(_0x5a4860),triggerGaitAnalysis(_0x5a4860),triggerEnergyPrediction(_0x5a4860);}async function triggerGaitAnalysis(_0x5e01c2){const _0x461d93=a0_0x543063;if(!_0x5e01c2['isProVersion'])return;try{const _0x5773e4=await _0x5e01c2[_0x461d93(0x29a)](_0x461d93(0x16d));_0x5773e4&&_0x5773e4[_0x461d93(0x239)]&&sendToPython(_0x5e01c2,_0x461d93(0x1d6),{'sequences':JSON[_0x461d93(0x25a)](_0x5773e4['val'])});}catch(_0x18d431){}}async function triggerEnergyPrediction(_0x2db063){const _0x20abfd=a0_0x543063;if(!_0x2db063[_0x20abfd(0x2f3)])return;try{const _0x29d371=await getOutsideTemperatureNumeric(_0x2db063);if(_0x29d371===null)return;const _0x221a32={},_0x4e4047=_0x2db063[_0x20abfd(0x26b)]['devices']||[];for(const _0xf01609 of _0x4e4047){if(_0xf01609[_0x20abfd(0x2e3)]===_0x20abfd(0x2e4)&&_0xf01609[_0x20abfd(0x28f)]){const _0x14da7b=_0x2db063[_0x20abfd(0x21d)][_0xf01609['id']];if(_0x14da7b!==undefined)_0x221a32[_0xf01609[_0x20abfd(0x28f)]]=_0x14da7b;}}Object[_0x20abfd(0x184)](_0x221a32)[_0x20abfd(0x264)]>0x0&&sendToPython(_0x2db063,_0x20abfd(0x19c),{'current_temps':_0x221a32,'t_out':_0x29d371});}catch(_0xfa5a14){}}function updateHealthVector(_0x1b043d){const _0x5ebb83=a0_0x543063;if(!_0x1b043d[_0x5ebb83(0x1b8)]||_0x1b043d[_0x5ebb83(0x1b8)][_0x5ebb83(0x264)]===0x0)return;const _0x52f52=new Array(0x60)[_0x5ebb83(0x1fc)](0x0),_0x166f84=new Date()[_0x5ebb83(0x1eb)](0x0,0x0,0x0,0x0);_0x1b043d[_0x5ebb83(0x1b8)][_0x5ebb83(0x175)](_0x129626=>{const _0x8c3085=_0x5ebb83,_0x43bdc6=new Date(_0x129626[_0x8c3085(0x233)]);if(_0x43bdc6[_0x8c3085(0x166)]()>=_0x166f84){const _0x208bda=_0x43bdc6['getHours'](),_0xb343c0=_0x43bdc6[_0x8c3085(0x2d3)](),_0x54174a=_0x208bda*0x4+Math[_0x8c3085(0x26e)](_0xb343c0/0xf);if(_0x54174a>=0x0&&_0x54174a<0x60)_0x52f52[_0x54174a]++;}}),_0x1b043d[_0x5ebb83(0x271)](_0x5ebb83(0x1ec),{'val':JSON[_0x5ebb83(0x2b6)](_0x52f52),'ack':!![]});}async function getWeatherContext(_0x2f3a5a){const _0xf27d54=a0_0x543063;if(!_0x2f3a5a[_0xf27d54(0x26b)][_0xf27d54(0x19b)]||!_0x2f3a5a[_0xf27d54(0x26b)][_0xf27d54(0x244)])return _0xf27d54(0x1c1);try{const _0x2ac037=_0x2f3a5a[_0xf27d54(0x26b)][_0xf27d54(0x244)];let _0xcafe94=await _0x2f3a5a['getForeignStateAsync'](_0x2ac037+_0xf27d54(0x276));if(!_0xcafe94)_0xcafe94=await _0x2f3a5a[_0xf27d54(0x1fd)](_0x2ac037+'.forecast.current.temperature');let _0x518cd0=await _0x2f3a5a[_0xf27d54(0x1fd)](_0x2ac037+_0xf27d54(0x2c5));if(!_0x518cd0)_0x518cd0=await _0x2f3a5a[_0xf27d54(0x1fd)](_0x2ac037+_0xf27d54(0x1b4));if(_0xcafe94&&_0x518cd0)return _0xcafe94[_0xf27d54(0x239)]+_0xf27d54(0x266)+_0x518cd0[_0xf27d54(0x239)];}catch(_0x298fac){}return _0xf27d54(0x1cf);}async function getCalendarContext(_0x141bd7){const _0x2ef132=a0_0x543063;if(!_0x141bd7[_0x2ef132(0x26b)][_0x2ef132(0x20b)]||!_0x141bd7[_0x2ef132(0x26b)][_0x2ef132(0x1da)])return _0x2ef132(0x2cc);return _0x2ef132(0x267);}async function getCalendarNames(_0x5e5aea,_0x519b36){return[];}async function saveFeedback(_0x463cee,_0x31091e){const _0x32bef5=a0_0x543063;_0x463cee[_0x32bef5(0x21b)][_0x32bef5(0x22a)]('ðŸ“\x20Feedback\x20received:\x20'+_0x31091e[_0x32bef5(0x230)]);}async function runGeminiAnalysis(_0x57fb16,_0x3d18d8=''){const _0x4a50d8=a0_0x543063;if(!_0x57fb16[_0x4a50d8(0x2ab)])return;if(_0x57fb16[_0x4a50d8(0x23e)][_0x4a50d8(0x264)]===0x0)return;const _0x423b72=_0x57fb16[_0x4a50d8(0x23e)][_0x4a50d8(0x2c4)](0x0,0xf),_0x141ef4=await getWeatherContext(_0x57fb16),_0x19f4e7=_0x57fb16[_0x4a50d8(0x235)],_0x348538=PERSONA_MAPPING[_0x57fb16['config'][_0x4a50d8(0x25c)]||_0x4a50d8(0x21e)],_0x3c7129=_0x57fb16[_0x4a50d8(0x26b)][_0x4a50d8(0x2d1)]||_0x4a50d8(0x21a);let _0x5e6b59=_0x4a50d8(0x2f2);try{const _0xf4b15=await _0x57fb16[_0x4a50d8(0x29a)](_0x4a50d8(0x2f0));if(_0xf4b15&&_0xf4b15['val'])_0x5e6b59=_0xf4b15[_0x4a50d8(0x239)];}catch(_0x2b4fb5){}let _0x3b2d31=![];try{const _0x48d3b5=await _0x57fb16['getStateAsync'](_0x4a50d8(0x174));if(_0x48d3b5&&_0x48d3b5['val'])_0x3b2d31=!![];}catch(_0x13be10){}const _0x1bf47c=_0x4a50d8(0x15e)+_0x348538+'.\x20KONTEXT:\x20'+_0x3c7129+_0x4a50d8(0x2f1)+_0x19f4e7+_0x4a50d8(0x253)+_0x141ef4+_0x4a50d8(0x17e)+_0x5e6b59+_0x4a50d8(0x1bb)+JSON[_0x4a50d8(0x2b6)](_0x423b72)+_0x4a50d8(0x1d0)+_0x3d18d8+'.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}';try{const _0x134fc4=await _0x57fb16['geminiModel'][_0x4a50d8(0x2c0)](_0x1bf47c),_0x59e6bc=JSON[_0x4a50d8(0x25a)](_0x134fc4[_0x4a50d8(0x268)]['text']()['replace'](/```json|```/g,'')[_0x4a50d8(0x20d)]());await _0x57fb16[_0x4a50d8(0x271)]('analysis.lastResult',{'val':JSON[_0x4a50d8(0x2b6)](_0x59e6bc),'ack':!![]});if(_0x59e6bc[_0x4a50d8(0x28c)])await _0x57fb16[_0x4a50d8(0x271)](_0x4a50d8(0x21c),{'val':_0x59e6bc[_0x4a50d8(0x28c)],'ack':!![]});const _0x29095c={'timestamp':Date[_0x4a50d8(0x2a8)](),'id':Date['now']()[_0x4a50d8(0x17d)](),'analysis':{'activity':{'summary':_0x59e6bc[_0x4a50d8(0x28c)],'isAlert':_0x59e6bc[_0x4a50d8(0x28b)],'alertReason':_0x59e6bc[_0x4a50d8(0x2b4)]},'comfort':{'automationProposal':_0x59e6bc[_0x4a50d8(0x1d1)]}}};await updateAnalysisHistory(_0x57fb16,_0x29095c);const _0x5157d4=_0x59e6bc[_0x4a50d8(0x28b)]||![];_0x5157d4!==_0x57fb16['lastAlertState']&&(await _0x57fb16[_0x4a50d8(0x271)](_0x4a50d8(0x170),{'val':_0x5157d4,'ack':!![]}),_0x57fb16[_0x4a50d8(0x248)]=_0x5157d4,_0x5157d4&&(await _0x57fb16[_0x4a50d8(0x271)]('analysis.alertReason',{'val':_0x59e6bc[_0x4a50d8(0x2b4)],'ack':!![]}),sendNotification(_0x57fb16,_0x4a50d8(0x178)+_0x59e6bc[_0x4a50d8(0x2b4)],![],_0x59e6bc[_0x4a50d8(0x20a)])));if(_0x59e6bc[_0x4a50d8(0x1d1)]&&_0x59e6bc[_0x4a50d8(0x1d1)]['detected']){await _0x57fb16[_0x4a50d8(0x271)](_0x4a50d8(0x223),{'val':!![],'ack':!![]}),await _0x57fb16[_0x4a50d8(0x271)](_0x4a50d8(0x2cd),{'val':_0x59e6bc['automationProposal'][_0x4a50d8(0x1a6)],'ack':!![]}),await _0x57fb16['setStateAsync']('analysis.automation.targetId',{'val':_0x59e6bc['automationProposal'][_0x4a50d8(0x171)],'ack':!![]}),await _0x57fb16[_0x4a50d8(0x271)]('analysis.automation.targetValue',{'val':JSON[_0x4a50d8(0x2b6)](_0x59e6bc[_0x4a50d8(0x1d1)]['targetValue']),'ack':!![]});if(_0x3b2d31)executeAutomationAction(_0x57fb16);}}catch(_0x33d004){_0x57fb16[_0x4a50d8(0x21b)][_0x4a50d8(0x204)](_0x4a50d8(0x1e3)+_0x33d004[_0x4a50d8(0x16f)]);}}async function startSystem(_0x27607d){const _0x23e870=a0_0x543063;_0x27607d[_0x23e870(0x21b)][_0x23e870(0x22a)](_0x23e870(0x297)),await initZombies(_0x27607d);try{_0x27607d[_0x23e870(0x2f3)]=await checkLicense(_0x27607d[_0x23e870(0x26b)][_0x23e870(0x23d)]);}catch(_0x24c58e){}if(!_0x27607d[_0x23e870(0x26b)][_0x23e870(0x224)]||_0x27607d[_0x23e870(0x26b)][_0x23e870(0x224)]<0.1)_0x27607d[_0x23e870(0x26b)][_0x23e870(0x224)]=0xc;await initHistory(_0x27607d),await initSystemConfig(_0x27607d);if(_0x27607d[_0x23e870(0x26b)][_0x23e870(0x181)])try{_0x27607d[_0x23e870(0x1e9)]=new GoogleGenerativeAI(_0x27607d['config'][_0x23e870(0x181)]),_0x27607d[_0x23e870(0x2ab)]=_0x27607d['genAI']['getGenerativeModel']({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x23e870(0x1b3)}}),_0x27607d['log'][_0x23e870(0x22a)]('Gemini\x20AI\x20initialized.');}catch(_0x4bb013){_0x27607d[_0x23e870(0x21b)][_0x23e870(0x204)](_0x23e870(0x1d8)+_0x4bb013[_0x23e870(0x16f)]);}await createAllObjects(_0x27607d),await loadSystemMode(_0x27607d),await loadRawEventLog(_0x27607d),await loadDailyDigests(_0x27607d),_0x27607d[_0x23e870(0x15d)](_0x23e870(0x2ee)),_0x27607d[_0x23e870(0x15d)](LTM_DP_TRIGGER_DIGEST),_0x27607d[_0x23e870(0x15d)](_0x23e870(0x1fa)),_0x27607d[_0x23e870(0x15d)](_0x23e870(0x25b)),_0x27607d[_0x23e870(0x15d)]('analysis.automation.triggerAction'),_0x27607d['subscribeStates'](_0x23e870(0x174)),_0x27607d[_0x23e870(0x15d)](_0x23e870(0x220)),_0x27607d[_0x23e870(0x15d)](_0x23e870(0x289)),_0x27607d[_0x23e870(0x15d)]('analysis.training.triggerEnergy'),_0x27607d[_0x23e870(0x15d)](_0x23e870(0x26f)),_0x27607d['subscribeStates'](_0x23e870(0x169)),await initSensorSubscriptions(_0x27607d),await initPresenceSubscriptions(_0x27607d),await setupTelegramListener(_0x27607d),setTimeout(()=>checkWifiPresence(_0x27607d),0x1388);if(_0x27607d[_0x23e870(0x2dc)])clearInterval(_0x27607d['analysisTimer']);const _0x3159f3=_0x27607d[_0x23e870(0x26b)][_0x23e870(0x1b1)]||0xf;_0x3159f3>0x0&&(_0x27607d[_0x23e870(0x2dc)]=setInterval(()=>{runAutopilot(_0x27607d);},_0x3159f3*0x3c*0x3e8)),schedulers['setupLtmScheduler'](_0x27607d,()=>createDailyDigest(_0x27607d)),schedulers[_0x23e870(0x251)](_0x27607d),schedulers['setupDriftAnalysisScheduler'](_0x27607d,()=>runBaselineDriftAnalysis(_0x27607d)),schedulers[_0x23e870(0x296)](_0x27607d,()=>sendMorningBriefing(_0x27607d)),startPythonService(_0x27607d),setTimeout(()=>{const _0x1e9688=_0x23e870;_0x27607d[_0x1e9688(0x2ec)]&&(runPythonHealthCheck(_0x27607d),triggerGaitAnalysis(_0x27607d),triggerEnergyPrediction(_0x27607d)),updateHealthVector(_0x27607d);},0x1388);}class CogniLiving extends utils[a0_0x543063(0x29c)]{constructor(_0x5ea33a){const _0x1ba88a=a0_0x543063;super({..._0x5ea33a,'name':'cogni-living'}),this[_0x1ba88a(0x23e)]=[],this[_0x1ba88a(0x1d7)]=[],this[_0x1ba88a(0x1b8)]=[],this[_0x1ba88a(0x1a0)]=[],this[_0x1ba88a(0x21d)]={},this[_0x1ba88a(0x2d4)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x1ba88a(0x203)]=!![],this[_0x1ba88a(0x22f)]=null,this[_0x1ba88a(0x1bc)]=null,this[_0x1ba88a(0x193)]=![],this[_0x1ba88a(0x1e9)]=null,this[_0x1ba88a(0x2ab)]=null,this[_0x1ba88a(0x235)]=SYSTEM_MODES[_0x1ba88a(0x2c2)],this[_0x1ba88a(0x2f3)]=![],this['lastAlertState']=![],this['systemUUID']=_0x1ba88a(0x187),this['analysisTimer']=null,this[_0x1ba88a(0x288)]=null,this[_0x1ba88a(0x28d)]=null,this[_0x1ba88a(0x298)]=null,this['briefingJob']=null,this[_0x1ba88a(0x2ec)]=null,this[_0x1ba88a(0x28a)]=![],this['on'](_0x1ba88a(0x24a),this[_0x1ba88a(0x1d9)][_0x1ba88a(0x205)](this)),this['on'](_0x1ba88a(0x2a0),this[_0x1ba88a(0x2d0)][_0x1ba88a(0x205)](this)),this['on']('unload',this[_0x1ba88a(0x1aa)][_0x1ba88a(0x205)](this)),this['on'](_0x1ba88a(0x16f),this[_0x1ba88a(0x238)][_0x1ba88a(0x205)](this));}async[a0_0x543063(0x1d9)](){const _0x5713a9=a0_0x543063;this['log'][_0x5713a9(0x22a)](_0x5713a9(0x28e)+this['version']+_0x5713a9(0x191));if(!installer['checkAndInstall'](this,()=>startSystem(this)))return;}[a0_0x543063(0x1aa)](_0x301ed7){const _0x793ad2=a0_0x543063;if(this[_0x793ad2(0x2dc)])clearInterval(this['analysisTimer']);if(this['driftAnalysisTimer'])clearInterval(this[_0x793ad2(0x298)]);if(this[_0x793ad2(0x288)])this[_0x793ad2(0x288)][_0x793ad2(0x1ad)]();if(this[_0x793ad2(0x28d)])this[_0x793ad2(0x28d)][_0x793ad2(0x1ad)]();if(this['briefingJob'])this[_0x793ad2(0x197)][_0x793ad2(0x1ad)]();if(this[_0x793ad2(0x22f)])clearTimeout(this[_0x793ad2(0x22f)]);if(this[_0x793ad2(0x1bc)])clearTimeout(this['exitGraceTimer']);stopPythonService(this),_0x301ed7();}async[a0_0x543063(0x2d0)](_0x5ade38,_0x4d468f){const _0x2564a8=a0_0x543063;if(!_0x4d468f||this[_0x2564a8(0x28a)])return;if(_0x5ade38[_0x2564a8(0x1a7)](_0x2564a8(0x2bc))&&_0x5ade38[_0x2564a8(0x26c)]('communicate.request')&&_0x4d468f[_0x2564a8(0x239)]){await handleTelegramResponse(this,_0x4d468f[_0x2564a8(0x239)]);return;}if(_0x5ade38===this[_0x2564a8(0x202)]+'.'+SYSTEM_DP_MODE){if(_0x4d468f[_0x2564a8(0x239)]&&Object[_0x2564a8(0x1b5)](SYSTEM_MODES)['includes'](_0x4d468f['val'])){this[_0x2564a8(0x235)]=_0x4d468f['val'];if(_0x4d468f[_0x2564a8(0x239)]===SYSTEM_MODES[_0x2564a8(0x25f)])await setPresence(this,![]);else await setPresence(this,!![]);}if(!_0x4d468f[_0x2564a8(0x196)])this[_0x2564a8(0x222)](_0x5ade38,{'val':this[_0x2564a8(0x235)],'ack':!![]});return;}if(!_0x4d468f[_0x2564a8(0x196)]){_0x5ade38['includes'](_0x2564a8(0x2ee))&&_0x4d468f[_0x2564a8(0x239)]&&(this['setState'](_0x5ade38,{'val':![],'ack':!![]}),runGeminiAnalysis(this));if(_0x5ade38['includes'](_0x2564a8(0x1de))&&_0x4d468f[_0x2564a8(0x239)]){this['setState'](_0x5ade38,{'val':![],'ack':!![]});if(this['isProVersion'])createDailyDigest(this);}_0x5ade38[_0x2564a8(0x1a7)](_0x2564a8(0x258))&&_0x4d468f[_0x2564a8(0x239)]&&(this['setState'](_0x5ade38,{'val':![],'ack':!![]}),sendMorningBriefing(this));_0x5ade38['includes']('automation.triggerAction')&&_0x4d468f[_0x2564a8(0x239)]&&(this['setState'](_0x5ade38,{'val':![],'ack':!![]}),executeAutomationAction(this));if(_0x5ade38[_0x2564a8(0x1a7)](_0x2564a8(0x220))&&_0x4d468f[_0x2564a8(0x239)]){this[_0x2564a8(0x222)](_0x5ade38,{'val':![],'ack':!![]});if(this[_0x2564a8(0x2f3)])try{const _0x5d6e50=await this['getStateAsync']('LTM.trainingData.sequences');if(_0x5d6e50&&_0x5d6e50['val']){const _0x2274cd=JSON['parse'](_0x5d6e50[_0x2564a8(0x239)]);this[_0x2564a8(0x21b)]['info'](_0x2564a8(0x201)),this[_0x2564a8(0x271)](_0x2564a8(0x1c9),{'val':_0x2564a8(0x2a4),'ack':!![]}),sendToPython(this,_0x2564a8(0x176),{'sequences':_0x2274cd});}}catch(_0xa719fe){this[_0x2564a8(0x21b)][_0x2564a8(0x204)](_0x2564a8(0x261)+_0xa719fe['message']);}}if(_0x5ade38[_0x2564a8(0x1a7)](_0x2564a8(0x289))&&_0x4d468f[_0x2564a8(0x239)]){this[_0x2564a8(0x222)](_0x5ade38,{'val':![],'ack':!![]});if(this[_0x2564a8(0x2f3)])try{const _0x46fdb0=await this[_0x2564a8(0x29a)](LTM_DP_DAILY_DIGESTS);if(_0x46fdb0&&_0x46fdb0[_0x2564a8(0x239)])sendToPython(this,_0x2564a8(0x2db),{'digests':JSON['parse'](_0x46fdb0[_0x2564a8(0x239)])});}catch(_0x5a4881){}}if(_0x5ade38[_0x2564a8(0x1a7)](_0x2564a8(0x2bb))&&_0x4d468f['val']){this['setState'](_0x5ade38,{'val':![],'ack':!![]});if(this[_0x2564a8(0x2f3)])try{const _0x21e70d=await this[_0x2564a8(0x29a)](_0x2564a8(0x269));if(_0x21e70d&&_0x21e70d['val'])sendToPython(this,_0x2564a8(0x228),{'points':JSON['parse'](_0x21e70d[_0x2564a8(0x239)])});}catch(_0x231b20){}}if(_0x5ade38[_0x2564a8(0x1a7)](_0x2564a8(0x26f))&&_0x4d468f[_0x2564a8(0x239)]){this[_0x2564a8(0x222)](_0x5ade38,{'val':![],'ack':!![]});if(this[_0x2564a8(0x2f3)])try{const _0x164ecd=await this[_0x2564a8(0x29a)](LTM_DP_RAW_LOG);_0x164ecd&&_0x164ecd[_0x2564a8(0x239)]&&(this['log']['info']('ðŸ›‹ï¸\x20Triggering\x20Comfort\x20Analysis\x20(Pattern\x20Mining)...'),sendToPython(this,_0x2564a8(0x24d),{'events':JSON[_0x2564a8(0x25a)](_0x164ecd['val'])}));}catch(_0x584652){}}if(_0x5ade38[_0x2564a8(0x1a7)](_0x2564a8(0x169))&&_0x4d468f[_0x2564a8(0x239)]){this['setState'](_0x5ade38,{'val':![],'ack':!![]});if(this[_0x2564a8(0x2f3)])try{const _0x17f5d9=await this[_0x2564a8(0x29a)](_0x2564a8(0x16d));if(_0x17f5d9&&_0x17f5d9[_0x2564a8(0x239)]){const _0x37c816=JSON[_0x2564a8(0x25a)](_0x17f5d9[_0x2564a8(0x239)]);this[_0x2564a8(0x21b)][_0x2564a8(0x22a)]('ðŸ•¸ï¸\x20Building\x20Topology\x20Matrix...'),sendToPython(this,_0x2564a8(0x1fe),{'sequences':_0x37c816});}}catch(_0x2a605d){this[_0x2564a8(0x21b)][_0x2564a8(0x204)](_0x2564a8(0x218)+_0x2a605d[_0x2564a8(0x16f)]);}}return;}if(this[_0x2564a8(0x26b)]['presenceDevices']&&this[_0x2564a8(0x26b)][_0x2564a8(0x161)][_0x2564a8(0x1a7)](_0x5ade38)){await checkWifiPresence(this);return;}const _0x4918b0=(this[_0x2564a8(0x26b)][_0x2564a8(0x2e1)]||[])[_0x2564a8(0x19e)](_0x3e656d=>_0x3e656d['id']===_0x5ade38);if(_0x4918b0)processSensorEvent(this,_0x5ade38,_0x4d468f,_0x4918b0);}async[a0_0x543063(0x238)](_0x16ccbf){const _0x2041cb=a0_0x543063;if(typeof _0x16ccbf==='object'&&_0x16ccbf[_0x2041cb(0x16f)]){if(_0x16ccbf[_0x2041cb(0x260)]===_0x2041cb(0x2dd)){const _0x31e741=_0x16ccbf[_0x2041cb(0x16f)][_0x2041cb(0x1a9)]||this[_0x2041cb(0x26b)][_0x2041cb(0x181)];if(!_0x31e741)return this[_0x2041cb(0x294)](_0x16ccbf[_0x2041cb(0x1be)],_0x16ccbf[_0x2041cb(0x260)],{'success':![],'message':_0x2041cb(0x299)},_0x16ccbf['callback']);try{const _0x579c34=new GoogleGenerativeAI(_0x31e741),_0x340d38=_0x579c34['getGenerativeModel']({'model':GEMINI_MODEL}),_0x123e77=await _0x340d38[_0x2041cb(0x2c0)]('Hi');this[_0x2041cb(0x294)](_0x16ccbf[_0x2041cb(0x1be)],_0x16ccbf['command'],{'success':!![],'message':'OK:\x20'+_0x123e77[_0x2041cb(0x268)][_0x2041cb(0x2ba)]()},_0x16ccbf[_0x2041cb(0x23f)]);}catch(_0x4e9d56){this[_0x2041cb(0x294)](_0x16ccbf[_0x2041cb(0x1be)],_0x16ccbf['command'],{'success':![],'message':'Err:\x20'+_0x4e9d56[_0x2041cb(0x16f)]},_0x16ccbf[_0x2041cb(0x23f)]);}}else{if(_0x16ccbf[_0x2041cb(0x260)]===_0x2041cb(0x1f5)){const _0xc2862e=await getWeatherContext(this),_0x43b694=await getCalendarContext(this);this['sendTo'](_0x16ccbf[_0x2041cb(0x1be)],_0x16ccbf[_0x2041cb(0x260)],{'success':!![],'weather':_0xc2862e,'calendar':_0x43b694},_0x16ccbf[_0x2041cb(0x23f)]);}else{if(_0x16ccbf['command']===_0x2041cb(0x2c8)){if(!this['isProVersion'])return this[_0x2041cb(0x294)](_0x16ccbf[_0x2041cb(0x1be)],_0x16ccbf[_0x2041cb(0x260)],{'success':![],'isPro':![]},_0x16ccbf['callback']);let _0x5c89a9={'status':'N/A'};try{const _0x1b0226=await this[_0x2041cb(0x29a)](LTM_DP_DRIFT_STATUS);_0x5c89a9[_0x2041cb(0x2c7)]=_0x1b0226?_0x1b0226[_0x2041cb(0x239)]:_0x2041cb(0x1c0);}catch(_0xb84dad){}this[_0x2041cb(0x294)](_0x16ccbf['from'],_0x16ccbf['command'],{'success':!![],'isPro':!![],'dailyDigests':this[_0x2041cb(0x1a0)],'driftAnalysis':_0x5c89a9,'analysisHistory':this[_0x2041cb(0x1d7)]},_0x16ccbf[_0x2041cb(0x23f)]);}else{if(_0x16ccbf[_0x2041cb(0x260)]===_0x2041cb(0x236)){const _0x37e1ae=this[_0x2041cb(0x1a0)][_0x2041cb(0x264)],_0x2de402=new Date(),_0x5cbba7=new Date(_0x2de402[_0x2041cb(0x188)](),_0x2de402[_0x2041cb(0x1f3)](),_0x2de402[_0x2041cb(0x29f)]())[_0x2041cb(0x166)](),_0x579b87=this[_0x2041cb(0x1b8)][_0x2041cb(0x190)](_0x5af9c2=>new Date(_0x5af9c2['timestamp'])[_0x2041cb(0x166)]()>_0x5cbba7)['length'],_0x5c5387=new Array(0x18)[_0x2041cb(0x1fc)](0x0);this[_0x2041cb(0x1b8)][_0x2041cb(0x175)](_0x2d65cd=>{const _0x1075b5=_0x2041cb,_0x5ede8a=new Date(_0x2d65cd[_0x1075b5(0x233)]);if(_0x5ede8a[_0x1075b5(0x166)]()>_0x5cbba7)_0x5c5387[_0x5ede8a['getHours']()]++;});let _0x2a11b5={'status':_0x2041cb(0x1c0)};try{const _0x2b0035=await this['getStateAsync'](LTM_DP_DRIFT_STATUS);_0x2a11b5[_0x2041cb(0x2c7)]=_0x2b0035?_0x2b0035[_0x2041cb(0x239)]:_0x2041cb(0x1c0);}catch(_0x25bc38){}let _0x3420e4='';try{const _0x4f661e=await this['getStateAsync'](_0x2041cb(0x2f0));_0x3420e4=_0x4f661e?_0x4f661e[_0x2041cb(0x239)]:'';}catch(_0x1c7b33){}let _0x3c2845=null;!this['geminiModel']&&(_0x3c2845=this[_0x2041cb(0x26b)][_0x2041cb(0x181)]?_0x2041cb(0x2c1):_0x2041cb(0x164));let _0xdf9862={'detected':![],'description':'','targetId':'','targetValue':'','autoApply':![]};try{const _0x38394c=await this[_0x2041cb(0x29a)](_0x2041cb(0x223));if(_0x38394c&&_0x38394c['val']){_0xdf9862['detected']=!![];const _0x4da813=await this[_0x2041cb(0x29a)]('analysis.automation.description');_0xdf9862['description']=_0x4da813?_0x4da813[_0x2041cb(0x239)]:'';const _0x7ea649=await this['getStateAsync'](_0x2041cb(0x259));_0xdf9862[_0x2041cb(0x171)]=_0x7ea649?_0x7ea649[_0x2041cb(0x239)]:'';const _0x517777=await this[_0x2041cb(0x29a)](_0x2041cb(0x1e5));_0xdf9862[_0x2041cb(0x232)]=_0x517777?_0x517777[_0x2041cb(0x239)]:'';}const _0x31babb=await this[_0x2041cb(0x29a)](_0x2041cb(0x174));_0xdf9862['autoApply']=_0x31babb?!!_0x31babb[_0x2041cb(0x239)]:![];}catch(_0x164801){}this[_0x2041cb(0x294)](_0x16ccbf[_0x2041cb(0x1be)],_0x16ccbf[_0x2041cb(0x260)],{'success':!![],'eventHistory':this[_0x2041cb(0x23e)][_0x2041cb(0x2c4)](0x0,0xf),'stats':{'digestCount':_0x37e1ae,'eventCountToday':_0x579b87,'hourlyActivity':_0x5c5387,'driftStatus':_0x2a11b5['status'],'isPresent':this[_0x2041cb(0x203)],'presenceWho':_0x3420e4,'minDays':this[_0x2041cb(0x26b)]['minDaysForBaseline']||0x7,'stbDays':this[_0x2041cb(0x26b)]['ltmStbWindowDays']||0xe,'ltbDays':this['config'][_0x2041cb(0x23c)]||0x3c,'systemError':_0x3c2845},'automation':_0xdf9862},_0x16ccbf[_0x2041cb(0x23f)]);}else{if(_0x16ccbf[_0x2041cb(0x260)]==='scanDevices')try{const _0x601e76=await scanner['scanForDevices'](this,_0x16ccbf['message']||{});this[_0x2041cb(0x294)](_0x16ccbf[_0x2041cb(0x1be)],_0x16ccbf['command'],{'success':!![],'devices':_0x601e76},_0x16ccbf[_0x2041cb(0x23f)]);}catch(_0x379ab1){this[_0x2041cb(0x294)](_0x16ccbf[_0x2041cb(0x1be)],_0x16ccbf[_0x2041cb(0x260)],{'success':![],'error':_0x379ab1[_0x2041cb(0x16f)]},_0x16ccbf[_0x2041cb(0x23f)]);}else{if(_0x16ccbf[_0x2041cb(0x260)]===_0x2041cb(0x246)){const _0x390a34=await this[_0x2041cb(0x27f)](_0x2041cb(0x19f),_0x2041cb(0x160)),_0x8122ba=[];if(_0x390a34)for(const _0xb89070 in _0x390a34){const _0x36858a=_0x390a34[_0xb89070],_0x4cab14=(_0x36858a['common']&&typeof _0x36858a[_0x2041cb(0x162)][_0x2041cb(0x1fb)]===_0x2041cb(0x1bd)?_0x36858a[_0x2041cb(0x162)][_0x2041cb(0x1fb)]['de']:_0x36858a[_0x2041cb(0x162)][_0x2041cb(0x1fb)])||_0x36858a['common'][_0x2041cb(0x1fb)];_0x8122ba[_0x2041cb(0x2e0)]({'id':_0xb89070,'name':_0x4cab14});}const _0x28004f=await this[_0x2041cb(0x27f)](_0x2041cb(0x2ca),_0x2041cb(0x160)),_0x116eef=[];if(_0x28004f)for(const _0x21474c in _0x28004f){const _0x524aaf=_0x28004f[_0x21474c],_0x1e176f=(_0x524aaf[_0x2041cb(0x162)]&&typeof _0x524aaf[_0x2041cb(0x162)]['name']===_0x2041cb(0x1bd)?_0x524aaf['common']['name']['de']:_0x524aaf[_0x2041cb(0x162)]['name'])||_0x21474c[_0x2041cb(0x2d6)]('.')[_0x2041cb(0x2a7)]();_0x116eef['push'](_0x1e176f);}this[_0x2041cb(0x294)](_0x16ccbf['from'],_0x16ccbf[_0x2041cb(0x260)],{'success':!![],'enums':_0x8122ba,'rooms':_0x116eef},_0x16ccbf[_0x2041cb(0x23f)]);}else{if(_0x16ccbf[_0x2041cb(0x260)]===_0x2041cb(0x1db)){const _0xe1b099=_0x16ccbf[_0x2041cb(0x16f)][_0x2041cb(0x195)];if(!_0xe1b099)return this['sendTo'](_0x16ccbf[_0x2041cb(0x1be)],_0x16ccbf['command'],{'success':![],'error':'No\x20instance'},_0x16ccbf['callback']);const _0x4efb6e=await getCalendarNames(this,_0xe1b099);this[_0x2041cb(0x294)](_0x16ccbf[_0x2041cb(0x1be)],_0x16ccbf[_0x2041cb(0x260)],{'success':!![],'names':_0x4efb6e},_0x16ccbf['callback']);}else{if(_0x16ccbf[_0x2041cb(0x260)]==='simulateButler'){const {targetId:_0x149288,targetValue:_0x2b2b92}=_0x16ccbf['message'];this[_0x2041cb(0x21b)]['info'](_0x2041cb(0x265)+_0x149288+_0x2041cb(0x2da)+_0x2b2b92),await this[_0x2041cb(0x271)](_0x2041cb(0x223),{'val':!![],'ack':!![]}),await this['setStateAsync'](_0x2041cb(0x2cd),{'val':_0x2041cb(0x237)+_0x149288,'ack':!![]}),await this[_0x2041cb(0x271)]('analysis.automation.targetId',{'val':_0x149288,'ack':!![]}),await this[_0x2041cb(0x271)]('analysis.automation.targetValue',{'val':_0x2b2b92,'ack':!![]}),this[_0x2041cb(0x294)](_0x16ccbf['from'],_0x16ccbf[_0x2041cb(0x260)],{'success':!![]},_0x16ccbf[_0x2041cb(0x23f)]);}else{if(_0x16ccbf['command']==='submitFeedback'){const {historyId:_0x42eb09,rating:_0x588131,comment:_0x427e40,alertReason:_0xe0ab94}=_0x16ccbf['message'];_0x42eb09&&_0x588131?(await saveFeedback(this,{'timestamp':Date[_0x2041cb(0x2a8)](),'historyId':_0x42eb09,'rating':_0x588131,'comment':_0x427e40,'alertReason':_0xe0ab94}),this[_0x2041cb(0x294)](_0x16ccbf[_0x2041cb(0x1be)],_0x16ccbf[_0x2041cb(0x260)],{'success':!![]},_0x16ccbf[_0x2041cb(0x23f)])):this[_0x2041cb(0x294)](_0x16ccbf['from'],_0x16ccbf[_0x2041cb(0x260)],{'success':![],'error':_0x2041cb(0x1e2)},_0x16ccbf['callback']);}else _0x16ccbf[_0x2041cb(0x260)]==='dismissAutomation'&&(this[_0x2041cb(0x21b)][_0x2041cb(0x22a)](_0x2041cb(0x1a3)),await this['setStateAsync'](_0x2041cb(0x223),{'val':![],'ack':!![]}),await this[_0x2041cb(0x271)](_0x2041cb(0x2cd),{'val':'','ack':!![]}),this[_0x2041cb(0x294)](_0x16ccbf[_0x2041cb(0x1be)],_0x16ccbf['command'],{'success':!![]},_0x16ccbf[_0x2041cb(0x23f)]));}}}}}}}}}}}if(require[a0_0x543063(0x290)]!==module)module[a0_0x543063(0x1ef)]=_0x367953=>new CogniLiving(_0x367953);else new CogniLiving();