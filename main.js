const a0_0x332da3=a0_0x12ac;(function(_0x304116,_0x583721){const _0x349672=a0_0x12ac,_0x1072de=_0x304116();while(!![]){try{const _0x3c122f=parseInt(_0x349672(0x23a))/0x1+-parseInt(_0x349672(0x290))/0x2*(parseInt(_0x349672(0x23b))/0x3)+-parseInt(_0x349672(0x1ed))/0x4*(parseInt(_0x349672(0x223))/0x5)+-parseInt(_0x349672(0x246))/0x6+parseInt(_0x349672(0x308))/0x7+parseInt(_0x349672(0x24f))/0x8+parseInt(_0x349672(0x21b))/0x9*(-parseInt(_0x349672(0x2a9))/0xa);if(_0x3c122f===_0x583721)break;else _0x1072de['push'](_0x1072de['shift']());}catch(_0x474bd2){_0x1072de['push'](_0x1072de['shift']());}}}(a0_0x4457,0x7983e));function a0_0x12ac(_0x5d0524,_0x424dca){const _0x39ab12=a0_0x4457();return a0_0x12ac=function(_0x9ed074,_0x2d11b3){_0x9ed074=_0x9ed074-0x199;let _0x4457a5=_0x39ab12[_0x9ed074];return _0x4457a5;},a0_0x12ac(_0x5d0524,_0x424dca);}const a0_0x2d11b3=(function(){let _0x448c4e=!![];return function(_0x5eceee,_0x3bddb7){const _0x2c7d9f=_0x448c4e?function(){const _0x3bd249=a0_0x12ac;if(_0x3bddb7){const _0x47f4e0=_0x3bddb7[_0x3bd249(0x24e)](_0x5eceee,arguments);return _0x3bddb7=null,_0x47f4e0;}}:function(){};return _0x448c4e=![],_0x2c7d9f;};}()),a0_0x9ed074=a0_0x2d11b3(this,function(){const _0x271f36=a0_0x12ac;return a0_0x9ed074[_0x271f36(0x19c)]()[_0x271f36(0x23e)](_0x271f36(0x24a))['toString']()['constructor'](a0_0x9ed074)[_0x271f36(0x23e)]('(((.+)+)+)+$');});a0_0x9ed074();'use strict';const utils=require(a0_0x332da3(0x2c3)),{GoogleGenerativeAI}=require(a0_0x332da3(0x1a1)),path=require('path'),fs=require('fs'),installer=require(a0_0x332da3(0x2b7)),scanner=require(a0_0x332da3(0x207)),schedulers=require(a0_0x332da3(0x302)),topology=require(a0_0x332da3(0x27b)),setup=require(a0_0x332da3(0x20c)),recorder=require(a0_0x332da3(0x1a8)),pythonBridge=require(a0_0x332da3(0x2d7)),aiAgent=require(a0_0x332da3(0x2b1)),deadMan=require('./lib/dead_man'),automation=require('./lib/automation'),GEMINI_MODEL=a0_0x332da3(0x244);class CogniLiving extends utils[a0_0x332da3(0x26a)]{constructor(_0x3ec96c){const _0x23e49b=a0_0x332da3;super({..._0x3ec96c,'name':'cogni-living'}),this[_0x23e49b(0x2fe)]=[],this[_0x23e49b(0x1bc)]=[],this['rawEventLog']=[],this[_0x23e49b(0x1e5)]=[],this[_0x23e49b(0x1d6)]={},this['systemConfig']={'latitude':0x0,'longitude':0x0,'city':''},this[_0x23e49b(0x25c)]=!![],this[_0x23e49b(0x2a1)]=null,this['exitGraceTimer']=null,this[_0x23e49b(0x202)]=![],this['genAI']=null,this[_0x23e49b(0x231)]=null,this[_0x23e49b(0x1ff)]=setup[_0x23e49b(0x22d)][_0x23e49b(0x248)],this['isProVersion']=![],this[_0x23e49b(0x2fc)]=![],this['analysisTimer']=null,this['calendarCheckTimer']=null,this[_0x23e49b(0x2a7)]=null,this[_0x23e49b(0x2dc)]=null,this[_0x23e49b(0x300)]=null,this['driftAnalysisTimer']=null,this[_0x23e49b(0x1a0)]=null,this[_0x23e49b(0x267)]=null,this['trackerHeartbeat']=null,this[_0x23e49b(0x264)]=null,this[_0x23e49b(0x27e)]=null,this[_0x23e49b(0x2dd)]=![],this[_0x23e49b(0x205)]=Date[_0x23e49b(0x280)](),this[_0x23e49b(0x1d9)]=null,this[_0x23e49b(0x291)]=Date['now'](),this['infrasoundLocked']=![],this[_0x23e49b(0x1a5)]=[],this[_0x23e49b(0x311)]={'health':!![],'security':!![],'energy':!![],'comfort':!![]},this['on'](_0x23e49b(0x1b0),this[_0x23e49b(0x208)]['bind'](this)),this['on'](_0x23e49b(0x2db),this[_0x23e49b(0x2e3)]['bind'](this)),this['on']('unload',this['onUnload'][_0x23e49b(0x296)](this)),this['on']('message',this[_0x23e49b(0x1fc)][_0x23e49b(0x296)](this));}async[a0_0x332da3(0x208)](){const _0x2f941e=a0_0x332da3;this[_0x2f941e(0x294)]['info'](_0x2f941e(0x200)+this[_0x2f941e(0x2de)]+_0x2f941e(0x21d));if(this[_0x2f941e(0x2a5)][_0x2f941e(0x227)]!==undefined)this[_0x2f941e(0x311)]['health']=this[_0x2f941e(0x2a5)][_0x2f941e(0x227)];if(this[_0x2f941e(0x2a5)][_0x2f941e(0x261)]!==undefined)this['activeModules'][_0x2f941e(0x275)]=this[_0x2f941e(0x2a5)]['moduleSecurity'];if(this[_0x2f941e(0x2a5)]['moduleEnergy']!==undefined)this[_0x2f941e(0x311)][_0x2f941e(0x2be)]=this['config']['moduleEnergy'];if(this[_0x2f941e(0x2a5)][_0x2f941e(0x233)]!==undefined)this['activeModules']['comfort']=this[_0x2f941e(0x2a5)][_0x2f941e(0x233)];if(this['config'][_0x2f941e(0x304)])this['activeModules']={...this[_0x2f941e(0x311)],...this[_0x2f941e(0x2a5)]['modules']};this[_0x2f941e(0x1f2)]();}async[a0_0x332da3(0x1f2)](){const _0x156294=a0_0x332da3;await setup[_0x156294(0x1aa)](this);try{this[_0x156294(0x1d0)]=await setup[_0x156294(0x2bb)](this['config'][_0x156294(0x2d9)]);}catch(_0x4487f1){}if(!this[_0x156294(0x2a5)][_0x156294(0x215)]||this[_0x156294(0x2a5)]['inactivityThresholdHours']<0.1)this[_0x156294(0x2a5)][_0x156294(0x215)]=0xc;await setup[_0x156294(0x24c)](this),await setup[_0x156294(0x30a)](this);try{const _0xb795b1=await this[_0x156294(0x2ff)]('analysis.energy.warmupTimes'),_0x478d81=await this['getStateAsync'](_0x156294(0x203));_0xb795b1&&_0xb795b1[_0x156294(0x1c8)]&&_0x478d81&&_0x478d81[_0x156294(0x1c8)]&&(Date[_0x156294(0x280)]()-_0xb795b1['ts']<0x4*0xe10*0x3e8&&(this[_0x156294(0x1d9)]={'times':JSON[_0x156294(0x2c4)](_0xb795b1[_0x156294(0x1c8)]),'sources':JSON[_0x156294(0x2c4)](_0x478d81[_0x156294(0x1c8)])}));}catch(_0x110f62){}if(this[_0x156294(0x2a5)][_0x156294(0x20d)])try{this[_0x156294(0x260)]=new GoogleGenerativeAI(this[_0x156294(0x2a5)][_0x156294(0x20d)]),this[_0x156294(0x231)]=this['genAI'][_0x156294(0x209)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x156294(0x2ee)}});}catch(_0x3a6127){this[_0x156294(0x294)]['error'](_0x156294(0x2ab)+_0x3a6127[_0x156294(0x2b2)]);}await setup[_0x156294(0x1ee)](this),await this[_0x156294(0x269)](),schedulers[_0x156294(0x2ef)](this),await this[_0x156294(0x1e7)](_0x156294(0x226),{'type':'state','common':{'name':_0x156294(0x281),'type':_0x156294(0x1c6),'role':_0x156294(0x1c0),'read':!![],'write':![]},'native':{}}),await this[_0x156294(0x1e7)](_0x156294(0x1fe),{'type':_0x156294(0x239),'common':{'name':_0x156294(0x28c),'type':'string','role':'json','read':!![],'write':![],'def':_0x156294(0x30b)},'native':{}}),await this[_0x156294(0x1e7)]('analysis.activity.roomHistory',{'type':_0x156294(0x239),'common':{'name':_0x156294(0x220),'type':_0x156294(0x2aa),'role':_0x156294(0x301),'read':!![],'write':![],'def':_0x156294(0x2b6)},'native':{}}),await this['setObjectNotExistsAsync'](_0x156294(0x2ec),{'type':_0x156294(0x239),'common':{'name':'Gemini\x20Report\x20Night','type':_0x156294(0x2aa),'role':_0x156294(0x1bb),'read':!![],'write':![],'def':_0x156294(0x20b)},'native':{}}),await this['setObjectNotExistsAsync'](_0x156294(0x1d1),{'type':_0x156294(0x239),'common':{'name':_0x156294(0x277),'type':_0x156294(0x2aa),'role':_0x156294(0x1bb),'read':!![],'write':![],'def':_0x156294(0x20b)},'native':{}}),await this[_0x156294(0x1e7)](_0x156294(0x2d4),{'type':_0x156294(0x239),'common':{'name':_0x156294(0x2e6),'type':_0x156294(0x2aa),'role':'json','read':!![],'write':![],'def':'[]'},'native':{}}),await this['setObjectNotExistsAsync'](_0x156294(0x2e8),{'type':_0x156294(0x239),'common':{'name':_0x156294(0x2cf),'type':'string','role':_0x156294(0x301),'read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x156294(0x1e7)](_0x156294(0x1be),{'type':_0x156294(0x239),'common':{'name':_0x156294(0x2cb),'type':_0x156294(0x1c6),'role':_0x156294(0x1c0),'unit':'%','read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x156294(0x1fd),{'type':_0x156294(0x239),'common':{'name':_0x156294(0x1b1),'type':'string','role':_0x156294(0x301),'read':!![],'write':![]},'native':{}});try{const _0x535267=await this['getStateAsync'](_0x156294(0x230));if(_0x535267&&_0x535267[_0x156294(0x1c8)]){this['eventHistory']=JSON['parse'](_0x535267['val']);if(this[_0x156294(0x1d0)]){const _0x2923d4=await this['getStateAsync']('LTM.rawEventLog');if(_0x2923d4&&_0x2923d4['val'])this[_0x156294(0x243)]=JSON[_0x156294(0x2c4)](_0x2923d4[_0x156294(0x1c8)]);}this['log'][_0x156294(0x289)]('ðŸ“¦\x20Restored\x20'+this[_0x156294(0x2fe)][_0x156294(0x2c6)]+_0x156294(0x234));}}catch(_0x42b7bd){this[_0x156294(0x2fe)]=[];}try{const _0x10af3b=await this[_0x156294(0x2ff)](_0x156294(0x1d5));if(_0x10af3b&&_0x10af3b[_0x156294(0x1c8)])this[_0x156294(0x1e5)]=JSON['parse'](_0x10af3b[_0x156294(0x1c8)]);}catch(_0x12485e){this[_0x156294(0x1e5)]=[];}const _0xc885af=this[_0x156294(0x1e5)][_0x156294(0x2c6)]>=(this[_0x156294(0x2a5)][_0x156294(0x1fb)]||0x7)?_0x156294(0x2e1)+this[_0x156294(0x1e5)][_0x156294(0x2c6)]+'\x20Tage)':_0x156294(0x1a4)+this[_0x156294(0x1e5)][_0x156294(0x2c6)]+'/'+(this[_0x156294(0x2a5)][_0x156294(0x1fb)]||0x7)+')';await this[_0x156294(0x29a)](_0x156294(0x199),{'val':_0xc885af,'ack':!![]}),this[_0x156294(0x247)](_0x156294(0x2a2)),this[_0x156294(0x247)]('LTM.triggerDailyDigest'),this[_0x156294(0x247)]('analysis.training.triggerHealth');this[_0x156294(0x2a5)]['infrasoundEnabled']&&this[_0x156294(0x2a5)][_0x156294(0x1d7)]&&this[_0x156294(0x311)][_0x156294(0x275)]&&this[_0x156294(0x2fa)](this['config']['infrasoundSensorId']);const _0x8ccb6e=this[_0x156294(0x2a5)][_0x156294(0x1ba)];if(_0x8ccb6e)for(const _0xdf33cd of _0x8ccb6e){await this[_0x156294(0x2ad)](_0xdf33cd['id']);}const _0x14863c=this['config']['presenceDevices'];if(_0x14863c)for(const _0x5521bf of _0x14863c){await this[_0x156294(0x2ad)](_0x5521bf);}const _0x2c25b7=require(_0x156294(0x24b));if(this[_0x156294(0x267)])this[_0x156294(0x267)][_0x156294(0x236)]();this[_0x156294(0x267)]=_0x2c25b7[_0x156294(0x2b0)](_0x156294(0x240),()=>{const _0x5be615=_0x156294;this[_0x5be615(0x2b5)]();}),setTimeout(()=>this[_0x156294(0x25e)](),0x1388);if(this['roomIntegratorTimer'])clearInterval(this[_0x156294(0x27e)]);this[_0x156294(0x20f)](),this[_0x156294(0x27e)]=setInterval(async()=>{const _0x21aa33=_0x156294;await this[_0x21aa33(0x20f)]();},0x3c*0x3e8);if(this[_0x156294(0x264)])clearInterval(this[_0x156294(0x264)]);this['healthTrendInterval']=setInterval(()=>{const _0x3179d3=_0x156294;this[_0x3179d3(0x1d0)]&&this[_0x3179d3(0x311)][_0x3179d3(0x235)]&&this['runPythonHealthCheck']();},0x4*0x3c*0x3c*0x3e8);if(this[_0x156294(0x1d8)])clearInterval(this[_0x156294(0x1d8)]);this[_0x156294(0x311)]['energy']&&(this['analysisTimer']=setInterval(()=>{const _0x1656fc=_0x156294;this[_0x1656fc(0x1c3)]();},0xf*0x3c*0x3e8),setTimeout(()=>this[_0x156294(0x1c3)](),0x2710));if(this['calendarCheckTimer'])clearInterval(this[_0x156294(0x29b)]);this['config'][_0x156294(0x2da)]&&this[_0x156294(0x311)][_0x156294(0x2be)]&&(this[_0x156294(0x29b)]=setInterval(()=>{automation['checkCalendarTriggers'](this);},0x2*0x3c*0x3e8),setTimeout(()=>automation[_0x156294(0x2ae)](this),0x3a98));if(this[_0x156294(0x2a7)])clearInterval(this['presenceCheckTimer']);this['config'][_0x156294(0x29d)]&&this[_0x156294(0x2a5)][_0x156294(0x29d)][_0x156294(0x2c6)]>0x0&&(this[_0x156294(0x2a7)]=setInterval(async()=>{await this['checkWifiPresence']();},0x3c*0x3e8),setTimeout(async()=>await this[_0x156294(0x2b8)](),0x1388));const _0x9868f0=path['join'](__dirname,'.venv',_0x156294(0x242),_0x156294(0x1c7));pythonBridge['startService'](this,_0x9868f0);}[a0_0x332da3(0x253)](_0xb99250){const _0x235c24=a0_0x332da3;if(this[_0x235c24(0x267)])this[_0x235c24(0x267)][_0x235c24(0x236)]();this['saveDailyHistory']()['then'](()=>{const _0x120e7b=_0x235c24;if(this[_0x120e7b(0x1d8)])clearInterval(this['analysisTimer']);if(this[_0x120e7b(0x29b)])clearInterval(this[_0x120e7b(0x29b)]);if(this[_0x120e7b(0x2a7)])clearInterval(this[_0x120e7b(0x2a7)]);if(this['roomIntegratorTimer'])clearInterval(this[_0x120e7b(0x27e)]);recorder['abortExitTimer'](this),pythonBridge[_0x120e7b(0x1a2)](this),_0xb99250();});}async[a0_0x332da3(0x25e)](){const _0x495656=a0_0x332da3;if(!this[_0x495656(0x2fe)]||this[_0x495656(0x2fe)][_0x495656(0x2c6)]===0x0){this[_0x495656(0x294)][_0x495656(0x2ce)](_0x495656(0x29c));return;}this[_0x495656(0x294)][_0x495656(0x289)](_0x495656(0x1b8)+this[_0x495656(0x2fe)]['length']+_0x495656(0x1e0));const _0x503920=new Date()[_0x495656(0x2c0)](0x0,0x0,0x0,0x0),_0x5bf710=_0x495656(0x28e);let _0x29ea67={'history':{},'date':new Date()['toLocaleDateString']()};const _0x37e68c=_0x495656(0x2d4),_0x45055b=_0x495656(0x2e8);let _0x33882a=new Array(0x30)[_0x495656(0x2e7)](0x0),_0x2520d4=Array[_0x495656(0x1ae)]({'length':0x30},()=>[]);this[_0x495656(0x2fe)][_0x495656(0x23d)](_0x497372=>{const _0x27e494=_0x495656;if(_0x497372[_0x27e494(0x1a6)]>=_0x503920){if(recorder[_0x27e494(0x2f2)](_0x497372[_0x27e494(0x2e4)],_0x497372[_0x27e494(0x1c0)])){const _0x189450=new Date(_0x497372[_0x27e494(0x1a6)]),_0x261cc5=_0x189450[_0x27e494(0x257)]()*0x2+(_0x189450[_0x27e494(0x232)]()>=0x1e?0x1:0x0);if(_0x261cc5<0x30){_0x33882a[_0x261cc5]++;const _0x2d1d25=_0x497372['location']||_0x497372[_0x27e494(0x1cb)]||'?';let _0x4c4239=_0x2520d4[_0x261cc5];!_0x4c4239['includes'](_0x2d1d25)&&_0x4c4239[_0x27e494(0x1cc)](_0x2d1d25);}const _0x14aa84=_0x189450[_0x27e494(0x257)]();let _0x5c8391=_0x497372[_0x27e494(0x26b)]||'Unknown';const _0xe37e3b=(this[_0x27e494(0x2a5)][_0x27e494(0x1ba)]||[])[_0x27e494(0x22f)](_0x41b2e9=>_0x41b2e9[_0x27e494(0x26b)]===_0x5c8391);if(_0xe37e3b)_0x5c8391=_0xe37e3b[_0x27e494(0x26b)];if(!_0x29ea67[_0x27e494(0x1b2)][_0x5c8391])_0x29ea67[_0x27e494(0x1b2)][_0x5c8391]=new Array(0x18)[_0x27e494(0x2e7)](0x0);if(_0x29ea67[_0x27e494(0x1b2)][_0x5c8391][_0x14aa84]<0x3c)_0x29ea67[_0x27e494(0x1b2)][_0x5c8391][_0x14aa84]++;}}});const _0x402a78=await this[_0x495656(0x2ff)](_0x5bf710);(!_0x402a78||!_0x402a78[_0x495656(0x1c8)]||_0x402a78[_0x495656(0x1c8)]==='{}'||_0x402a78[_0x495656(0x1c8)]['includes'](_0x495656(0x204)))&&await this['setStateAsync'](_0x5bf710,{'val':JSON['stringify'](_0x29ea67),'ack':!![]}),await this[_0x495656(0x29a)](_0x37e68c,{'val':JSON[_0x495656(0x2ea)](_0x33882a),'ack':!![]}),await this[_0x495656(0x29a)](_0x45055b,{'val':JSON[_0x495656(0x2ea)](_0x2520d4),'ack':!![]}),this['log'][_0x495656(0x289)](_0x495656(0x1cd));}async[a0_0x332da3(0x2b5)](){const _0x571652=a0_0x332da3;if(!this[_0x571652(0x311)]['health'])return;const _0x17355d=new Date()[_0x571652(0x307)]()[_0x571652(0x1b5)]('T')[0x0];this['log'][_0x571652(0x28d)](_0x571652(0x22c)+_0x17355d+_0x571652(0x26f));try{const [_0x57f1f5,_0x18da26,_0x47e8e9,_0x1652ab,_0x46d731,_0x381fcc]=await Promise[_0x571652(0x299)]([this[_0x571652(0x2ff)](_0x571652(0x28e)),this[_0x571652(0x2ff)](_0x571652(0x2ec)),this[_0x571652(0x2ff)](_0x571652(0x1d1)),this['getStateAsync'](_0x571652(0x2f7)),this[_0x571652(0x2ff)](_0x571652(0x2d4)),this[_0x571652(0x2ff)](_0x571652(0x1be))]),_0x4fdb6d=this[_0x571652(0x2fe)][_0x571652(0x2f3)](_0x5b9a4e=>_0x5b9a4e['timestamp']>=new Date()[_0x571652(0x2c0)](0x0,0x0,0x0,0x0)&&(_0x5b9a4e[_0x571652(0x1cb)][_0x571652(0x278)]()[_0x571652(0x287)](_0x571652(0x2d2))||_0x5b9a4e['name'][_0x571652(0x278)]()['includes']('terrasse'))&&(_0x5b9a4e[_0x571652(0x1c0)]===!![]||_0x5b9a4e[_0x571652(0x1c0)]==='open'))[_0x571652(0x2c6)];let _0x55bd54=0x55;if(_0x381fcc&&_0x381fcc['val']!==undefined)_0x55bd54=Math[_0x571652(0x201)](0x64,Math['max'](0x14,Math[_0x571652(0x2f6)](0x50+Number(_0x381fcc['val'])*0x5)));const _0x498c67={'date':_0x17355d,'timestamp':Date[_0x571652(0x280)](),'roomHistory':_0x57f1f5?.['val']?JSON[_0x571652(0x2c4)](_0x57f1f5[_0x571652(0x1c8)]):{},'geminiNight':_0x18da26?.[_0x571652(0x1c8)]||_0x571652(0x295),'geminiDay':_0x47e8e9?.[_0x571652(0x1c8)]||_0x571652(0x295),'anomalyScore':_0x1652ab?.['val']||0.1,'todayVector':_0x46d731?.[_0x571652(0x1c8)]?JSON[_0x571652(0x2c4)](_0x46d731[_0x571652(0x1c8)]):new Array(0x30)[_0x571652(0x2e7)](0x0),'batteryLevel':_0x55bd54,'freshAirCount':_0x4fdb6d,'eventHistory':this['eventHistory']},_0x45d9d3=utils['getAbsoluteDefaultDataDir'](),_0x46d0a8=path[_0x571652(0x249)](_0x45d9d3,_0x571652(0x258),_0x571652(0x1b2));if(!fs['existsSync'](_0x46d0a8))fs[_0x571652(0x1ac)](_0x46d0a8,{'recursive':!![]});const _0x315e98=path[_0x571652(0x249)](_0x46d0a8,_0x17355d+'.json');fs[_0x571652(0x1e8)](_0x315e98,JSON['stringify'](_0x498c67)),this[_0x571652(0x294)]['info'](_0x571652(0x1f9)+_0x315e98);}catch(_0x29673a){this[_0x571652(0x294)][_0x571652(0x1da)](_0x571652(0x237)+_0x29673a[_0x571652(0x2b2)]);}}async[a0_0x332da3(0x20f)](){const _0x393205=a0_0x332da3;if(!this[_0x393205(0x25c)])return;try{let _0x27922f=null;try{const _0x1a74c2=await this[_0x393205(0x2ff)](_0x393205(0x1ab)),_0x5428b5=await this[_0x393205(0x2ff)](_0x393205(0x27c));if(_0x1a74c2&&_0x1a74c2['val']&&_0x5428b5&&_0x5428b5['val']&&_0x5428b5[_0x393205(0x1c8)]>0.3){if(_0x1a74c2['val']!==_0x393205(0x293)&&_0x1a74c2['val']!==_0x393205(0x254))_0x27922f=_0x1a74c2['val'];}}catch(_0x563738){}if(!_0x27922f){const _0x58e4f8=this['config'][_0x393205(0x1ba)]||[];for(const _0x1536a1 of _0x58e4f8){if(_0x1536a1['type']===_0x393205(0x262)&&_0x1536a1[_0x393205(0x26b)])try{const _0x25b8e8=await this[_0x393205(0x1a9)](_0x1536a1['id']);if(_0x25b8e8&&(_0x25b8e8['val']===!![]||_0x25b8e8[_0x393205(0x1c8)]==='on'||_0x25b8e8[_0x393205(0x1c8)]===0x1)){_0x27922f=_0x1536a1[_0x393205(0x26b)];break;}}catch(_0x204f8b){}}}if(!_0x27922f)return;const _0x20bdce=this[_0x393205(0x2a5)]['devices']||[];let _0x40ad37=_0x27922f;const _0x3a315d=_0x20bdce[_0x393205(0x22f)](_0x1cbd5f=>_0x1cbd5f['location']&&_0x1cbd5f['location']['toLowerCase']()===_0x27922f[_0x393205(0x278)]());if(_0x3a315d)_0x40ad37=_0x3a315d[_0x393205(0x26b)];const _0x59182f=_0x393205(0x28e),_0x51fba8=await this['getStateAsync'](_0x59182f),_0x36689b=new Date()[_0x393205(0x1d2)]();let _0x2ae2cc={'history':{},'date':_0x36689b};if(_0x51fba8&&_0x51fba8['val'])try{_0x2ae2cc=JSON[_0x393205(0x2c4)](_0x51fba8['val']);}catch(_0x5396c2){}_0x2ae2cc[_0x393205(0x306)]!==_0x36689b&&(_0x2ae2cc[_0x393205(0x1b2)]={},_0x2ae2cc[_0x393205(0x306)]=_0x36689b);if(!_0x2ae2cc[_0x393205(0x1b2)][_0x40ad37])_0x2ae2cc[_0x393205(0x1b2)][_0x40ad37]=new Array(0x18)['fill'](0x0);const _0x515f74=new Date()[_0x393205(0x257)]();if(_0x2ae2cc[_0x393205(0x1b2)][_0x40ad37][_0x515f74]<0x3c)_0x2ae2cc['history'][_0x40ad37][_0x515f74]++;await this[_0x393205(0x29a)](_0x59182f,{'val':JSON['stringify'](_0x2ae2cc),'ack':!![]});}catch(_0x3bac76){this[_0x393205(0x294)][_0x393205(0x2ce)]('[Integrator]\x20Error:\x20'+_0x3bac76[_0x393205(0x2b2)]);}}async[a0_0x332da3(0x1fc)](_0x148a18){const _0x25fd4e=a0_0x332da3;if(typeof _0x148a18===_0x25fd4e(0x1db)&&_0x148a18['message']){if(_0x148a18['command']===_0x25fd4e(0x22e)){const _0x2a7cec=_0x148a18[_0x25fd4e(0x2b2)]['date'],_0x49942c=utils[_0x25fd4e(0x1c4)](),_0x278207=path[_0x25fd4e(0x249)](_0x49942c,_0x25fd4e(0x258),_0x25fd4e(0x1b2),_0x2a7cec+_0x25fd4e(0x219));if(fs['existsSync'](_0x278207))try{const _0x4a8ccf=JSON[_0x25fd4e(0x2c4)](fs[_0x25fd4e(0x24d)](_0x278207,'utf8'));this[_0x25fd4e(0x1df)](_0x148a18[_0x25fd4e(0x1ae)],_0x148a18[_0x25fd4e(0x310)],{'success':!![],'data':_0x4a8ccf},_0x148a18[_0x25fd4e(0x245)]);}catch(_0x4adc4d){this[_0x25fd4e(0x1df)](_0x148a18[_0x25fd4e(0x1ae)],_0x148a18[_0x25fd4e(0x310)],{'success':![],'error':'Corrupt'},_0x148a18[_0x25fd4e(0x245)]);}else this[_0x25fd4e(0x1df)](_0x148a18['from'],_0x148a18['command'],{'success':![],'error':_0x25fd4e(0x2ca)},_0x148a18[_0x25fd4e(0x245)]);}else{if(_0x148a18[_0x25fd4e(0x310)]==='getOverviewData'){const _0x41ed96=this['dailyDigests'][_0x25fd4e(0x2c6)];let _0x2e0a7b=new Array(0x30)[_0x25fd4e(0x2e7)](0x0),_0x3a1b21=Array[_0x25fd4e(0x1ae)]({'length':0x30},()=>[]);try{const _0x37b90f=await this['getStateAsync'](_0x25fd4e(0x2d4));if(_0x37b90f&&_0x37b90f[_0x25fd4e(0x1c8)])_0x2e0a7b=JSON[_0x25fd4e(0x2c4)](_0x37b90f[_0x25fd4e(0x1c8)]);const _0x3c1e71=await this[_0x25fd4e(0x2ff)]('analysis.health.todayRoomDetails');if(_0x3c1e71&&_0x3c1e71[_0x25fd4e(0x1c8)])_0x3a1b21=JSON['parse'](_0x3c1e71['val']);}catch(_0x599cb3){}let _0x51d49f=new Array(0x30)[_0x25fd4e(0x2e7)](0x0);try{const _0x1b3d1c=new Date();_0x1b3d1c[_0x25fd4e(0x2d3)](_0x1b3d1c[_0x25fd4e(0x1e6)]()-0x1);const _0x568892=_0x1b3d1c['toISOString']()['split']('T')[0x0],_0x2d3fef=utils[_0x25fd4e(0x1c4)](),_0x158adb=path[_0x25fd4e(0x249)](_0x2d3fef,_0x25fd4e(0x258),'history',_0x568892+_0x25fd4e(0x219));if(fs[_0x25fd4e(0x210)](_0x158adb)){const _0x52f8b6=JSON['parse'](fs[_0x25fd4e(0x24d)](_0x158adb,_0x25fd4e(0x1eb)));if(_0x52f8b6&&_0x52f8b6[_0x25fd4e(0x2ac)])_0x51d49f=_0x52f8b6[_0x25fd4e(0x2ac)];}}catch(_0x5ded8a){}let _0x4b9d0b={'today':{},'yesterday':{}};try{const _0x4df5b0=await this[_0x25fd4e(0x2ff)]('analysis.activity.roomStats');if(_0x4df5b0&&_0x4df5b0['val'])_0x4b9d0b=JSON[_0x25fd4e(0x2c4)](_0x4df5b0[_0x25fd4e(0x1c8)]);}catch(_0x212de0){}let _0x356bdd=null;try{const _0x35dc01=await this[_0x25fd4e(0x2ff)](_0x25fd4e(0x1be));if(_0x35dc01)_0x356bdd=_0x35dc01[_0x25fd4e(0x1c8)];}catch(_0xdc4407){}if(_0x356bdd===undefined||_0x356bdd===null){const _0x30a465=_0x2e0a7b[_0x25fd4e(0x2ed)]((_0x934bb9,_0x3020ec)=>_0x934bb9+_0x3020ec,0x0),_0x561980=Math['min'](0x2,Math[_0x25fd4e(0x25d)](-0x2,(0x64-_0x30a465)/0x32));_0x356bdd=_0x561980;}let _0x3fa406=![],_0x248b5d='',_0x1adba7='',_0x4d9081='';try{const _0x1010ab=await this[_0x25fd4e(0x2ff)]('analysis.automation.patternDetected');if(_0x1010ab&&_0x1010ab[_0x25fd4e(0x1c8)]){_0x3fa406=!![];const _0x533c1d=await this[_0x25fd4e(0x2ff)](_0x25fd4e(0x1b6));_0x248b5d=_0x533c1d?_0x533c1d[_0x25fd4e(0x1c8)]:'';const _0x17c269=await this['getStateAsync'](_0x25fd4e(0x2f1));_0x1adba7=_0x17c269?_0x17c269[_0x25fd4e(0x1c8)]:'';const _0x5ca6d3=await this[_0x25fd4e(0x2ff)](_0x25fd4e(0x2c1));_0x4d9081=_0x5ca6d3?_0x5ca6d3[_0x25fd4e(0x1c8)]:'';}}catch(_0x3a7c74){}const _0x2f2f24=await this[_0x25fd4e(0x2c2)](),_0x276dd5=(this[_0x25fd4e(0x2a5)][_0x25fd4e(0x1ba)]||[])[_0x25fd4e(0x2a3)](_0x58d22b=>_0x58d22b[_0x25fd4e(0x1ca)]),_0x4b6dc3=_0x2f2f24&&_0x276dd5;let _0x150b52='';try{const _0x24322b=await this[_0x25fd4e(0x2ff)](_0x25fd4e(0x238));if(_0x24322b&&_0x24322b['val'])_0x150b52=_0x24322b[_0x25fd4e(0x1c8)];}catch(_0x3ff18f){}this[_0x25fd4e(0x1df)](_0x148a18[_0x25fd4e(0x1ae)],_0x148a18[_0x25fd4e(0x310)],{'success':!![],'eventHistory':this[_0x25fd4e(0x2fe)]['slice'](0x0,0x7d0),'stats':{'digestCount':_0x41ed96,'isPresent':this['isPresent'],'hourlyActivity':_0x2e0a7b,'hourlyDetails':_0x3a1b21,'yesterdayActivity':_0x51d49f,'solarActive':_0x4b6dc3,'presenceWho':_0x150b52,'roomStats':_0x4b9d0b,'activityTrend':_0x356bdd,'modules':this['activeModules']},'automation':{'detected':_0x3fa406,'description':_0x248b5d,'targetId':_0x1adba7,'targetValue':_0x4d9081}},_0x148a18['callback']);}else{if(_0x148a18[_0x25fd4e(0x310)]===_0x25fd4e(0x2cd))try{const _0x27299a=await automation[_0x25fd4e(0x250)](this);this['sendTo'](_0x148a18[_0x25fd4e(0x1ae)],_0x148a18['command'],{'success':!![],'results':_0x27299a},_0x148a18[_0x25fd4e(0x245)]);}catch(_0x5d5fd4){this[_0x25fd4e(0x1df)](_0x148a18[_0x25fd4e(0x1ae)],_0x148a18['command'],{'success':![],'error':_0x5d5fd4[_0x25fd4e(0x2b2)]},_0x148a18[_0x25fd4e(0x245)]);}else{if(_0x148a18['command']===_0x25fd4e(0x259))try{const _0x4c47a3=await scanner[_0x25fd4e(0x28f)](this,_0x148a18[_0x25fd4e(0x2b2)]||{});this['sendTo'](_0x148a18[_0x25fd4e(0x1ae)],_0x148a18[_0x25fd4e(0x310)],{'success':!![],'devices':_0x4c47a3},_0x148a18[_0x25fd4e(0x245)]);}catch(_0x365f88){}else{if(_0x148a18[_0x25fd4e(0x310)]===_0x25fd4e(0x1e2)){const _0x2c39af=await this['getForeignObjectsAsync'](_0x25fd4e(0x2a0),'enum'),_0x4c0afc=[];if(_0x2c39af)for(const _0xb3aeae in _0x2c39af){let _0x2b2a88=_0x2c39af[_0xb3aeae][_0x25fd4e(0x21a)][_0x25fd4e(0x1cb)];if(_0x2b2a88&&typeof _0x2b2a88==='object')_0x2b2a88=_0x2b2a88['de']||_0x2b2a88['en']||Object['values'](_0x2b2a88)[0x0]||JSON['stringify'](_0x2b2a88);_0x4c0afc[_0x25fd4e(0x1cc)]({'id':_0xb3aeae,'name':String(_0x2b2a88||_0xb3aeae)});}const _0x1e0ffb=await this[_0x25fd4e(0x271)](_0x25fd4e(0x265),_0x25fd4e(0x211)),_0x16038f=[];if(_0x1e0ffb)for(const _0x541de3 in _0x1e0ffb){let _0x2ab1c5=_0x1e0ffb[_0x541de3][_0x25fd4e(0x21a)][_0x25fd4e(0x1cb)];if(_0x2ab1c5&&typeof _0x2ab1c5===_0x25fd4e(0x1db))_0x2ab1c5=_0x2ab1c5['de']||_0x2ab1c5['en']||Object[_0x25fd4e(0x1e3)](_0x2ab1c5)[0x0]||JSON[_0x25fd4e(0x2ea)](_0x2ab1c5);_0x16038f['push'](String(_0x2ab1c5||_0x541de3[_0x25fd4e(0x1b5)]('.')['pop']()));}this[_0x25fd4e(0x1df)](_0x148a18[_0x25fd4e(0x1ae)],_0x148a18[_0x25fd4e(0x310)],{'success':!![],'enums':_0x4c0afc,'rooms':_0x16038f},_0x148a18[_0x25fd4e(0x245)]);}else{if(_0x148a18[_0x25fd4e(0x310)]===_0x25fd4e(0x2bc))try{const _0x2e072e=await this[_0x25fd4e(0x305)](_0x25fd4e(0x2e9),'instance',{'startkey':_0x25fd4e(0x21e),'endkey':'system.adapter.ical.é¦™'}),_0x309bf1=new Set();if(_0x2e072e&&_0x2e072e['rows'])for(const _0x73e01c of _0x2e072e[_0x25fd4e(0x27d)]){const _0x395928=_0x73e01c['id'][_0x25fd4e(0x1af)](_0x25fd4e(0x1f7),''),_0x51d2af=await this['getForeignStateAsync'](_0x395928+_0x25fd4e(0x1c5));let _0x5cabe0=![];if(_0x51d2af&&_0x51d2af['val']){const _0x5a8c40=typeof _0x51d2af[_0x25fd4e(0x1c8)]===_0x25fd4e(0x2aa)?JSON['parse'](_0x51d2af[_0x25fd4e(0x1c8)]):_0x51d2af[_0x25fd4e(0x1c8)];Array[_0x25fd4e(0x21c)](_0x5a8c40)&&_0x5a8c40[_0x25fd4e(0x23d)](_0x1149de=>{const _0x368a08=_0x25fd4e;_0x1149de['calendarName']&&(_0x309bf1[_0x368a08(0x28b)](_0x1149de[_0x368a08(0x1e9)]),_0x5cabe0=!![]);});}!_0x5cabe0&&_0x309bf1['add'](_0x395928);}const _0x470304=Array[_0x25fd4e(0x1ae)](_0x309bf1);if(_0x470304[_0x25fd4e(0x2c6)]===0x0)_0x470304['push'](_0x25fd4e(0x1f3));this[_0x25fd4e(0x1df)](_0x148a18[_0x25fd4e(0x1ae)],_0x148a18[_0x25fd4e(0x310)],{'success':!![],'names':_0x470304},_0x148a18[_0x25fd4e(0x245)]);}catch(_0x2d2216){this['sendTo'](_0x148a18[_0x25fd4e(0x1ae)],_0x148a18['command'],{'success':![],'error':_0x25fd4e(0x266)+_0x2d2216[_0x25fd4e(0x2b2)]},_0x148a18[_0x25fd4e(0x245)]);}else{if(_0x148a18[_0x25fd4e(0x310)]==='refreshCalendar')try{await automation[_0x25fd4e(0x1b3)](this),this[_0x25fd4e(0x1df)](_0x148a18['from'],_0x148a18[_0x25fd4e(0x310)],{'success':!![]},_0x148a18[_0x25fd4e(0x245)]);}catch(_0x4fd048){this[_0x25fd4e(0x294)][_0x25fd4e(0x2ce)]('refreshCalendar\x20failed:\x20'+_0x4fd048[_0x25fd4e(0x2b2)]),this[_0x25fd4e(0x1df)](_0x148a18['from'],_0x148a18[_0x25fd4e(0x310)],{'success':![],'error':_0x4fd048[_0x25fd4e(0x2b2)]},_0x148a18['callback']);}else{if(_0x148a18['command']===_0x25fd4e(0x1c9))try{const _0xfbcb45=_0x148a18['message'][_0x25fd4e(0x310)],_0x2d12b5=_0x148a18['message'];this[_0x25fd4e(0x294)][_0x25fd4e(0x28d)](_0x25fd4e(0x2c5)+_0xfbcb45),pythonBridge['send'](this,_0xfbcb45,_0x2d12b5,_0x37c307=>{const _0x1911fd=_0x25fd4e;this['sendTo'](_0x148a18[_0x1911fd(0x1ae)],_0x148a18['command'],_0x37c307,_0x148a18['callback']);});}catch(_0x59aac0){this[_0x25fd4e(0x294)]['warn'](_0x25fd4e(0x2c8)+_0x59aac0['message']),this[_0x25fd4e(0x1df)](_0x148a18[_0x25fd4e(0x1ae)],_0x148a18[_0x25fd4e(0x310)],{'type':_0x25fd4e(0x284),'payload':_0x59aac0[_0x25fd4e(0x2b2)]},_0x148a18[_0x25fd4e(0x245)]);}else{if(_0x148a18['command']===_0x25fd4e(0x2fd))try{const _0x502c0c=_0x148a18[_0x25fd4e(0x2b2)]?_0x148a18[_0x25fd4e(0x2b2)][_0x25fd4e(0x19b)]:'';if(!_0x502c0c)throw new Error(_0x25fd4e(0x1dc));const _0x5be080=new GoogleGenerativeAI(_0x502c0c),_0x1c0237=_0x5be080[_0x25fd4e(0x209)]({'model':GEMINI_MODEL}),_0xdceaaa=await _0x1c0237[_0x25fd4e(0x1b9)](_0x25fd4e(0x2df)),_0x128a40=await _0xdceaaa['response'],_0xf36521=_0x128a40[_0x25fd4e(0x1bb)]();this[_0x25fd4e(0x1df)](_0x148a18[_0x25fd4e(0x1ae)],_0x148a18['command'],{'success':!![],'message':'Verbindung\x20erfolgreich:\x20'+_0xf36521[_0x25fd4e(0x30c)](0x0,0x14)+'...'},_0x148a18['callback']);}catch(_0x4cbace){this['sendTo'](_0x148a18[_0x25fd4e(0x1ae)],_0x148a18[_0x25fd4e(0x310)],{'success':![],'message':_0x4cbace[_0x25fd4e(0x2b2)]},_0x148a18[_0x25fd4e(0x245)]);}else{if(_0x148a18[_0x25fd4e(0x310)]===_0x25fd4e(0x255))try{const _0xd80b5a=await this[_0x25fd4e(0x2c2)](),_0x20143d=await this[_0x25fd4e(0x305)](_0x25fd4e(0x2e9),'instance',{'startkey':_0x25fd4e(0x21e),'endkey':'system.adapter.ical.é¦™'}),_0x252e45=_0x20143d&&_0x20143d[_0x25fd4e(0x27d)]?_0x20143d[_0x25fd4e(0x27d)][_0x25fd4e(0x2c6)]:0x0;this[_0x25fd4e(0x1df)](_0x148a18['from'],_0x148a18[_0x25fd4e(0x310)],{'success':!![],'weather':_0x25fd4e(0x206)+_0xd80b5a+_0x25fd4e(0x1de)+(this[_0x25fd4e(0x1d6)][this[_0x25fd4e(0x2a5)][_0x25fd4e(0x23f)]]||'?')+'Â°C','calendar':_0x252e45+'\x20Kalender-Adapter\x20gefunden.'},_0x148a18[_0x25fd4e(0x245)]);}catch(_0x2c91b5){this[_0x25fd4e(0x1df)](_0x148a18[_0x25fd4e(0x1ae)],_0x148a18[_0x25fd4e(0x310)],{'success':![]},_0x148a18[_0x25fd4e(0x245)]);}}}}}}}}}}}}[a0_0x332da3(0x19d)](){const _0x340242=a0_0x332da3;if(!this[_0x340242(0x311)][_0x340242(0x235)])return;this['log'][_0x340242(0x28d)](_0x340242(0x312));try{const _0x2c678c=this[_0x340242(0x243)]||[];pythonBridge[_0x340242(0x1bf)](this,_0x340242(0x2b4),{'events':_0x2c678c});}catch(_0x1e47e6){this[_0x340242(0x294)][_0x340242(0x2ce)]('Failed\x20to\x20trigger\x20Python\x20Health\x20Check');}}async['onStateChange'](_0x368bce,_0x49b779){const _0x4c9fc9=a0_0x332da3;if(!_0x49b779||this[_0x4c9fc9(0x2dd)])return;if(_0x368bce[_0x4c9fc9(0x287)](_0x4c9fc9(0x2b9))&&_0x368bce[_0x4c9fc9(0x2d6)](_0x4c9fc9(0x1d3))&&_0x49b779[_0x4c9fc9(0x1c8)])return;if(this[_0x4c9fc9(0x2a5)][_0x4c9fc9(0x1b4)]&&_0x368bce===this[_0x4c9fc9(0x2a5)][_0x4c9fc9(0x1d7)]&&this['activeModules'][_0x4c9fc9(0x275)]){this[_0x4c9fc9(0x2e2)](_0x49b779[_0x4c9fc9(0x1c8)]);return;}if(_0x49b779[_0x4c9fc9(0x2d5)]&&_0x368bce[_0x4c9fc9(0x2d6)](_0x4c9fc9(0x2eb)))return;if(_0x368bce===this[_0x4c9fc9(0x27f)]+'.system.mode'){if(_0x49b779[_0x4c9fc9(0x1c8)]&&Object['values'](setup[_0x4c9fc9(0x22d)])[_0x4c9fc9(0x287)](_0x49b779[_0x4c9fc9(0x1c8)])){this[_0x4c9fc9(0x1ff)]=_0x49b779[_0x4c9fc9(0x1c8)];if(_0x49b779[_0x4c9fc9(0x1c8)]===setup[_0x4c9fc9(0x22d)]['VACATION'])await recorder[_0x4c9fc9(0x1a3)](this,![]);else await recorder[_0x4c9fc9(0x1a3)](this,!![]);if(this['isProVersion']){let _0x2b920c=![],_0x277c17=0x0,_0x57bb0d=_0x4c9fc9(0x268);if(this[_0x4c9fc9(0x1ff)]===_0x4c9fc9(0x30f))_0x2b920c=!![],_0x277c17=0x168,_0x57bb0d='Party\x20Mode';else this[_0x4c9fc9(0x1ff)]===_0x4c9fc9(0x1f6)&&(_0x2b920c=!![],_0x277c17=0x5a0,_0x57bb0d=_0x4c9fc9(0x30e));pythonBridge[_0x4c9fc9(0x1bf)](this,_0x4c9fc9(0x29f),{'active':_0x2b920c,'duration':_0x277c17,'label':_0x57bb0d}),await this[_0x4c9fc9(0x29a)]('analysis.security.learningStatus',{'val':JSON[_0x4c9fc9(0x2ea)]({'active':_0x2b920c,'label':_0x57bb0d,'timestamp':Date['now']()}),'ack':!![]});}}if(!_0x49b779[_0x4c9fc9(0x2d5)])this[_0x4c9fc9(0x19a)](_0x368bce,{'val':this[_0x4c9fc9(0x1ff)],'ack':!![]});return;}if(_0x368bce[_0x4c9fc9(0x2d6)](_0x4c9fc9(0x203))&&_0x49b779[_0x4c9fc9(0x2d5)])this[_0x4c9fc9(0x256)](_0x49b779[_0x4c9fc9(0x1c8)]);if(_0x368bce[_0x4c9fc9(0x2d6)](_0x4c9fc9(0x1fd))&&_0x49b779['ack']&&this[_0x4c9fc9(0x311)][_0x4c9fc9(0x2be)])automation[_0x4c9fc9(0x2ae)](this);if(!_0x49b779['ack']){if(_0x368bce['includes'](_0x4c9fc9(0x2a2))&&_0x49b779[_0x4c9fc9(0x1c8)]){this['setState'](_0x368bce,{'val':![],'ack':!![]}),aiAgent[_0x4c9fc9(0x221)](this);return;}if(_0x368bce['includes']('triggerDailyDigest')&&_0x49b779[_0x4c9fc9(0x1c8)]){this[_0x4c9fc9(0x19a)](_0x368bce,{'val':![],'ack':!![]});if(this['isProVersion'])aiAgent[_0x4c9fc9(0x30d)](this,pythonBridge);return;}if(_0x368bce[_0x4c9fc9(0x287)](_0x4c9fc9(0x263))&&_0x49b779['val']){this[_0x4c9fc9(0x19a)](_0x368bce,{'val':![],'ack':!![]}),aiAgent[_0x4c9fc9(0x2c9)](this);return;}if(_0x368bce[_0x4c9fc9(0x287)](_0x4c9fc9(0x270))&&_0x49b779['val']){this['setState'](_0x368bce,{'val':![],'ack':!![]}),aiAgent[_0x4c9fc9(0x2d1)](this);return;}if(_0x368bce['includes'](_0x4c9fc9(0x1ef))&&_0x49b779[_0x4c9fc9(0x1c8)]){this[_0x4c9fc9(0x19a)](_0x368bce,{'val':![],'ack':!![]});if(this[_0x4c9fc9(0x1d0)])try{const _0x26f46a=await this['getStateAsync'](_0x4c9fc9(0x2bf));if(_0x26f46a&&_0x26f46a['val']){const _0x45d361=JSON[_0x4c9fc9(0x2c4)](_0x26f46a[_0x4c9fc9(0x1c8)]);this[_0x4c9fc9(0x29a)](_0x4c9fc9(0x2f8),{'val':_0x4c9fc9(0x283),'ack':!![]}),pythonBridge[_0x4c9fc9(0x1bf)](this,_0x4c9fc9(0x2ba),{'sequences':_0x45d361});}}catch(_0x58eb0d){}return;}if(_0x368bce[_0x4c9fc9(0x287)](_0x4c9fc9(0x1d4))&&_0x49b779['val']){this[_0x4c9fc9(0x19a)](_0x368bce,{'val':![],'ack':!![]});try{aiAgent[_0x4c9fc9(0x22b)](this,'NIGHT'),setTimeout(()=>aiAgent[_0x4c9fc9(0x22b)](this,'DAY'),0x2ee0);if(this[_0x4c9fc9(0x1d0)]){this['runPythonHealthCheck']();const _0x353c76=await this['getStateAsync'](_0x4c9fc9(0x1d5));if(_0x353c76&&_0x353c76[_0x4c9fc9(0x1c8)])pythonBridge[_0x4c9fc9(0x1bf)](this,'TRAIN_HEALTH',{'digests':JSON['parse'](_0x353c76[_0x4c9fc9(0x1c8)])});}}catch(_0x1ae347){this[_0x4c9fc9(0x294)][_0x4c9fc9(0x2ce)]('triggerHealth\x20error:\x20'+_0x1ae347[_0x4c9fc9(0x2b2)]);}return;}if(_0x368bce[_0x4c9fc9(0x287)](_0x4c9fc9(0x272))&&_0x49b779[_0x4c9fc9(0x1c8)]){this['setState'](_0x368bce,{'val':![],'ack':!![]}),await this[_0x4c9fc9(0x1c3)]();return;}if(_0x368bce[_0x4c9fc9(0x287)](_0x4c9fc9(0x19e))&&_0x49b779[_0x4c9fc9(0x1c8)]){this['setState'](_0x368bce,{'val':![],'ack':!![]});if(this[_0x4c9fc9(0x1d0)])try{const _0x33a1d5=await this['getStateAsync'](_0x4c9fc9(0x19f));if(_0x33a1d5&&_0x33a1d5[_0x4c9fc9(0x1c8)]){const _0x43ae23={};if(this[_0x4c9fc9(0x2a5)][_0x4c9fc9(0x1ba)])this[_0x4c9fc9(0x2a5)][_0x4c9fc9(0x1ba)]['forEach'](_0x11f5c5=>{const _0x538a6d=_0x4c9fc9;if(_0x11f5c5['id']&&_0x11f5c5[_0x538a6d(0x2e4)])_0x43ae23[_0x11f5c5['id']]=_0x11f5c5[_0x538a6d(0x2e4)];});pythonBridge[_0x4c9fc9(0x1bf)](this,_0x4c9fc9(0x309),{'events':JSON[_0x4c9fc9(0x2c4)](_0x33a1d5['val']),'deviceMap':_0x43ae23});}}catch(_0x5c8782){}return;}if(_0x368bce[_0x4c9fc9(0x287)](_0x4c9fc9(0x27a))&&_0x49b779[_0x4c9fc9(0x1c8)]){this[_0x4c9fc9(0x19a)](_0x368bce,{'val':![],'ack':!![]}),topology['updateTopology'](this);if(this[_0x4c9fc9(0x1d0)])try{const _0x28daa6=await this['getStateAsync'](_0x4c9fc9(0x2bf));if(_0x28daa6&&_0x28daa6[_0x4c9fc9(0x1c8)])pythonBridge['send'](this,_0x4c9fc9(0x1f8),{'sequences':JSON[_0x4c9fc9(0x2c4)](_0x28daa6[_0x4c9fc9(0x1c8)])});}catch(_0x182b6d){}return;}}const _0x4da13a=(this[_0x4c9fc9(0x2a5)][_0x4c9fc9(0x1ba)]||[])[_0x4c9fc9(0x22f)](_0x7c8bb9=>_0x7c8bb9['id']===_0x368bce);if(_0x4da13a){const _0x24442e=await recorder[_0x4c9fc9(0x2a4)](this,_0x368bce,_0x49b779,_0x4da13a);_0x24442e&&this[_0x4c9fc9(0x19a)]('analysis.visualization.pulse',{'val':Date[_0x4c9fc9(0x280)](),'ack':!![]});_0x24442e&&_0x24442e['type']===_0x4c9fc9(0x262)&&_0x24442e[_0x4c9fc9(0x26b)]&&this['isProVersion']&&deadMan[_0x4c9fc9(0x25a)](this,_0x24442e[_0x4c9fc9(0x26b)]);_0x49b779[_0x4c9fc9(0x1c8)]&&(_0x49b779['val']===!![]||_0x49b779['val']===0x1||String(_0x49b779['val'])[_0x4c9fc9(0x278)]()==='open')&&(_0x4da13a[_0x4c9fc9(0x2e4)]&&(_0x4da13a[_0x4c9fc9(0x2e4)][_0x4c9fc9(0x287)](_0x4c9fc9(0x1ea))||_0x4da13a[_0x4c9fc9(0x2e4)]['includes']('door'))&&this[_0x4c9fc9(0x224)](_0x4da13a));if(_0x4da13a[_0x4c9fc9(0x2e4)]===_0x4c9fc9(0x228)||_0x4da13a[_0x4c9fc9(0x2e4)]===_0x4c9fc9(0x28a)){if(this[_0x4c9fc9(0x311)][_0x4c9fc9(0x2be)])automation['cleanupGhostInterventions'](this);}}}async[a0_0x332da3(0x256)](_0x135480){const _0x1093e7=a0_0x332da3;if(!this[_0x1093e7(0x1d9)]||Date[_0x1093e7(0x280)]()-this[_0x1093e7(0x291)]>0x493e0)return;try{const _0x37e34c=JSON[_0x1093e7(0x2c4)](_0x135480),_0x4defc3=this['memoryCache'][_0x1093e7(0x21f)];let _0x3185e7=![];for(const _0x41538b in _0x4defc3){if(_0x4defc3[_0x41538b]['includes']('AI')&&_0x37e34c[_0x41538b]&&!_0x37e34c[_0x41538b][_0x1093e7(0x287)]('AI')){_0x3185e7=!![];break;}}_0x3185e7&&(await this['setStateAsync']('analysis.energy.warmupTimes',{'val':JSON['stringify'](this[_0x1093e7(0x1d9)][_0x1093e7(0x26e)]),'ack':!![]}),await this[_0x1093e7(0x29a)](_0x1093e7(0x203),{'val':JSON[_0x1093e7(0x2ea)](this[_0x1093e7(0x1d9)][_0x1093e7(0x21f)]),'ack':!![]}));}catch(_0x1446b2){}}async[a0_0x332da3(0x269)](){const _0x4e0cc2=a0_0x332da3;try{const _0x4f5255=await this[_0x4e0cc2(0x2ff)](setup[_0x4e0cc2(0x251)]);if(_0x4f5255&&_0x4f5255[_0x4e0cc2(0x1c8)])this[_0x4e0cc2(0x1ff)]=_0x4f5255[_0x4e0cc2(0x1c8)];}catch(_0xe14273){this[_0x4e0cc2(0x1ff)]=setup[_0x4e0cc2(0x22d)][_0x4e0cc2(0x248)];}}async[a0_0x332da3(0x2b8)](){const _0x45ef35=a0_0x332da3,_0x135133=this[_0x45ef35(0x2a5)]['presenceDevices']||[];if(_0x135133['length']===0x0)return![];const _0x1487aa=[],_0x5c6d56=Date['now'](),_0x58da75=0x5*0x3c*0x3e8;for(const _0x483a43 of _0x135133){try{let _0x52c79c=![];try{const _0x25fca1=await this[_0x45ef35(0x1a9)](_0x483a43+_0x45ef35(0x1cf));if(_0x25fca1&&_0x25fca1['val']===!![])_0x52c79c=!![];}catch(_0x3f93b8){}if(!_0x52c79c)try{const _0x3f2285=await this[_0x45ef35(0x1a9)](_0x483a43+_0x45ef35(0x288));if(_0x3f2285&&_0x3f2285['ts']){const _0x33797a=_0x5c6d56-_0x3f2285['ts'];if(_0x33797a<_0x58da75)_0x52c79c=!![];}}catch(_0x4fce01){}if(!_0x52c79c)try{const _0x129af6=await this[_0x45ef35(0x1a9)](_0x483a43+_0x45ef35(0x1bd));if(_0x129af6&&typeof _0x129af6[_0x45ef35(0x1c8)]===_0x45ef35(0x1c6)&&_0x129af6[_0x45ef35(0x1c8)]>0x0)_0x52c79c=!![];}catch(_0xea2a70){}if(!_0x52c79c)try{const _0x36f340=await this[_0x45ef35(0x1a9)](_0x483a43);if(_0x36f340){const _0x2261c4=_0x5c6d56-(_0x36f340['ts']||0x0);_0x2261c4<_0x58da75&&(_0x36f340[_0x45ef35(0x1c8)]===!![]||_0x36f340[_0x45ef35(0x1c8)]===_0x45ef35(0x23c)||_0x36f340['val']===0x1)&&(_0x52c79c=!![]);}}catch(_0x1f2ab5){}if(_0x52c79c){const _0x41f00b=_0x483a43[_0x45ef35(0x1b5)]('.'),_0x11cd99=_0x41f00b[_0x41f00b[_0x45ef35(0x2c6)]-0x1]||_0x483a43;_0x1487aa['push'](_0x11cd99);}}catch(_0x5dd7a6){this[_0x45ef35(0x294)][_0x45ef35(0x2ce)](_0x45ef35(0x1ce)+_0x483a43+':\x20'+_0x5dd7a6['message']);}}const _0x98f3af=_0x1487aa[_0x45ef35(0x2c6)]>0x0?_0x1487aa[_0x45ef35(0x249)](',\x20'):_0x45ef35(0x2e5);return await this[_0x45ef35(0x29a)](_0x45ef35(0x238),{'val':_0x98f3af,'ack':!![]}),_0x1487aa['length']>0x0;}async[a0_0x332da3(0x214)](){const _0x4315c2=a0_0x332da3;await aiAgent[_0x4315c2(0x221)](this);this['activeModules'][_0x4315c2(0x235)]&&(this[_0x4315c2(0x2a8)](),this[_0x4315c2(0x2cc)]());if(this[_0x4315c2(0x311)][_0x4315c2(0x2be)])this['triggerEnergyPrediction']();}async[a0_0x332da3(0x2c2)](){const _0x45cb97=a0_0x332da3,_0x4aa781=['weatherunderground.0',_0x45cb97(0x217),'daswetter.0'],_0x190f8c=[_0x45cb97(0x229),'Current.WeatherText',_0x45cb97(0x20a)];for(const _0x106b56 of _0x4aa781){for(const _0x1542b1 of _0x190f8c){try{const _0xd72fcc=_0x106b56+'.'+_0x1542b1,_0x1c7076=await this['getForeignStateAsync'](_0xd72fcc);if(_0x1c7076&&_0x1c7076[_0x45cb97(0x1c8)]){const _0x2f2b59=String(_0x1c7076[_0x45cb97(0x1c8)])[_0x45cb97(0x278)]();if(_0x2f2b59[_0x45cb97(0x287)](_0x45cb97(0x26d))||_0x2f2b59[_0x45cb97(0x287)](_0x45cb97(0x276))||_0x2f2b59['includes'](_0x45cb97(0x2d0))||_0x2f2b59[_0x45cb97(0x287)](_0x45cb97(0x298))||_0x2f2b59['includes'](_0x45cb97(0x2f5)))return this[_0x45cb97(0x294)][_0x45cb97(0x28d)](_0x45cb97(0x286)+_0xd72fcc),!![];}}catch(_0x3e880b){}}}return![];}[a0_0x332da3(0x2cc)](){const _0x172579=a0_0x332da3;if(!this[_0x172579(0x1d0)])return;try{this[_0x172579(0x2ff)](_0x172579(0x2bf),(_0x8c4d20,_0x40f795)=>{const _0x30ef2b=_0x172579;if(_0x8c4d20||!_0x40f795||!_0x40f795[_0x30ef2b(0x1c8)])return;try{const _0x593ff1=JSON[_0x30ef2b(0x2c4)](_0x40f795[_0x30ef2b(0x1c8)]);if(!_0x593ff1||_0x593ff1[_0x30ef2b(0x2c6)]===0x0)return;pythonBridge[_0x30ef2b(0x1bf)](this,_0x30ef2b(0x292),{'sequences':_0x593ff1}),this[_0x30ef2b(0x294)]['debug'](_0x30ef2b(0x2f4)+_0x593ff1['length']+_0x30ef2b(0x20e));}catch(_0x5702e2){this[_0x30ef2b(0x294)][_0x30ef2b(0x2ce)](_0x30ef2b(0x1ad)+_0x5702e2[_0x30ef2b(0x2b2)]);}});}catch(_0x3220c6){this[_0x172579(0x294)][_0x172579(0x2ce)](_0x172579(0x1b7)+_0x3220c6['message']);}}async[a0_0x332da3(0x1c3)](){const _0x1a27fc=a0_0x332da3;if(!this[_0x1a27fc(0x1d0)]||!this['activeModules'][_0x1a27fc(0x2be)])return;try{const _0x4b203e={},_0xf6f5={},_0x1f01a5=this[_0x1a27fc(0x2a5)][_0x1a27fc(0x1ba)]||[];for(const _0xdba3ac of _0x1f01a5){if((_0xdba3ac[_0x1a27fc(0x2e4)]===_0x1a27fc(0x228)||_0xdba3ac['type']===_0x1a27fc(0x28a))&&_0xdba3ac[_0x1a27fc(0x26b)])try{const _0x5731e8=await this[_0x1a27fc(0x1a9)](_0xdba3ac['id']);_0x5731e8&&typeof _0x5731e8[_0x1a27fc(0x1c8)]===_0x1a27fc(0x1c6)&&(_0x4b203e[_0xdba3ac[_0x1a27fc(0x26b)]]=_0x5731e8[_0x1a27fc(0x1c8)],_0xf6f5[_0xdba3ac[_0x1a27fc(0x26b)]]=_0xdba3ac[_0x1a27fc(0x1ca)]||![]);}catch(_0x8b8d21){}}let _0x5685ea=0xa;if(this[_0x1a27fc(0x2a5)][_0x1a27fc(0x213)])try{const _0x38bc6a=await this[_0x1a27fc(0x1a9)](this[_0x1a27fc(0x2a5)][_0x1a27fc(0x213)]);if(_0x38bc6a&&typeof _0x38bc6a[_0x1a27fc(0x1c8)]===_0x1a27fc(0x1c6))_0x5685ea=_0x38bc6a['val'];}catch(_0x3ae901){}const _0x315bea=await this[_0x1a27fc(0x2c2)]();let _0x140bf3={};try{const _0x3edb31=await this[_0x1a27fc(0x2ff)](_0x1a27fc(0x1dd));if(_0x3edb31&&_0x3edb31[_0x1a27fc(0x1c8)])_0x140bf3=JSON[_0x1a27fc(0x2c4)](_0x3edb31['val']);}catch(_0x3d733d){}pythonBridge['send'](this,_0x1a27fc(0x2d8),{'current_temps':_0x4b203e,'t_out':_0x5685ea,'is_sunny':_0x315bea,'solar_flags':_0xf6f5,'warmup_targets':_0x140bf3}),this['log'][_0x1a27fc(0x289)]('ðŸ”®\x20Energy\x20Prediction\x20triggered\x20('+Object[_0x1a27fc(0x252)](_0x4b203e)['length']+_0x1a27fc(0x22a));}catch(_0x16066c){this[_0x1a27fc(0x294)][_0x1a27fc(0x2ce)](_0x1a27fc(0x2c7)+_0x16066c[_0x1a27fc(0x2b2)]);}}['updateHealthVector'](){const _0x22579b=a0_0x332da3;if(!this[_0x22579b(0x243)]||this[_0x22579b(0x243)][_0x22579b(0x2c6)]===0x0)return;const _0x88a0eb=new Array(0x30)[_0x22579b(0x2e7)](0x0),_0x44d41b=Array[_0x22579b(0x1ae)]({'length':0x30},()=>[]),_0x271d78=new Date()[_0x22579b(0x2c0)](0x0,0x0,0x0,0x0);this[_0x22579b(0x243)]['forEach'](_0xecfabf=>{const _0x274b2e=_0x22579b,_0x1d920c=new Date(_0xecfabf[_0x274b2e(0x1a6)]);if(_0x1d920c[_0x274b2e(0x1f1)]()>=_0x271d78){const _0x1ef775=_0x1d920c[_0x274b2e(0x257)](),_0x7bfc20=_0x1d920c[_0x274b2e(0x232)](),_0x3f0941=_0x1ef775*0x2+Math[_0x274b2e(0x222)](_0x7bfc20/0x1e);_0x3f0941>=0x0&&_0x3f0941<0x30&&(_0x88a0eb[_0x3f0941]++,_0x44d41b[_0x3f0941][_0x274b2e(0x1cc)]({'time':_0x1d920c[_0x274b2e(0x313)]('de-DE',{'hour':_0x274b2e(0x285),'minute':_0x274b2e(0x285)}),'location':_0xecfabf[_0x274b2e(0x26b)]||_0x274b2e(0x2bd),'type':_0xecfabf['type']||_0x274b2e(0x297)}));}}),this['setStateAsync'](_0x22579b(0x2d4),{'val':JSON[_0x22579b(0x2ea)](_0x88a0eb),'ack':!![]}),this[_0x22579b(0x29a)](_0x22579b(0x2e8),{'val':JSON[_0x22579b(0x2ea)](_0x44d41b),'ack':!![]});}async[a0_0x332da3(0x2e2)](_0x3c7b91){const _0x4ff37d=a0_0x332da3;if(!this[_0x4ff37d(0x2a5)]['infrasoundEnabled']||typeof _0x3c7b91!==_0x4ff37d(0x1c6))return;const _0xf31773=this[_0x4ff37d(0x2a5)]['infrasoundThreshold']||0.04;this[_0x4ff37d(0x1a5)][_0x4ff37d(0x1cc)]({'timestamp':Date[_0x4ff37d(0x280)](),'value':_0x3c7b91}),this[_0x4ff37d(0x1a5)][_0x4ff37d(0x2c6)]>0x64&&this[_0x4ff37d(0x1a5)][_0x4ff37d(0x2b3)](),_0x3c7b91>_0xf31773&&!this['infrasoundLocked']&&(this[_0x4ff37d(0x274)]=!![],this[_0x4ff37d(0x294)][_0x4ff37d(0x2ce)]('ðŸ”Š\x20Infraschall-Alarm:\x20'+_0x3c7b91[_0x4ff37d(0x1f0)](0x4)+_0x4ff37d(0x216)+_0xf31773+'\x20(Threshold)'),await this[_0x4ff37d(0x2f9)](_0x3c7b91,_0x4ff37d(0x2fb)),setTimeout(()=>{const _0x2d3e5c=_0x4ff37d;this[_0x2d3e5c(0x274)]=![];},0x5*0x3c*0x3e8));}async[a0_0x332da3(0x2f9)](_0x41c3f1,_0x4a7e67){const _0x10cacb=a0_0x332da3;if(!this['isPresent']){const _0xed92bf=this[_0x10cacb(0x2fe)][_0x10cacb(0x29e)](0x0,0xa),_0x586830=_0xed92bf[_0x10cacb(0x2f0)](_0x81862c=>new Date(_0x81862c[_0x10cacb(0x1a6)])[_0x10cacb(0x313)](_0x10cacb(0x212))+_0x10cacb(0x25b)+(_0x81862c[_0x10cacb(0x26b)]||_0x10cacb(0x293))+':\x20'+_0x81862c['name'])[_0x10cacb(0x249)]('\x0a');this['log'][_0x10cacb(0x2ce)](_0x10cacb(0x2a6)+_0x41c3f1[_0x10cacb(0x1f0)](0x4)+_0x10cacb(0x2e0)+_0x586830);if(this[_0x10cacb(0x2a5)][_0x10cacb(0x303)])try{const _0xf214c9=await this['getForeignStateAsync'](this[_0x10cacb(0x2a5)][_0x10cacb(0x303)]);_0xf214c9&&_0xf214c9[_0x10cacb(0x1c8)]===!![]&&(await this[_0x10cacb(0x29a)](_0x10cacb(0x1ec),{'val':JSON['stringify']({'timestamp':Date['now'](),'pressure':_0x41c3f1[_0x10cacb(0x1f0)](0x4),'eventType':_0x4a7e67,'recentEvents':_0xed92bf[_0x10cacb(0x29e)](0x0,0x3)}),'ack':!![]}),this[_0x10cacb(0x294)]['error'](_0x10cacb(0x225)));}catch(_0x39117a){}}else this['log'][_0x10cacb(0x28d)](_0x10cacb(0x1c1)+_0x41c3f1[_0x10cacb(0x1f0)](0x4)+_0x10cacb(0x1c2));}async[a0_0x332da3(0x224)](_0x457f9a){const _0x493d8c=a0_0x332da3;if(!_0x457f9a||!_0x457f9a[_0x493d8c(0x26b)])return;try{const _0x59a86d=(this[_0x493d8c(0x2a5)][_0x493d8c(0x1ba)]||[])[_0x493d8c(0x2f3)](_0x3ec6e9=>_0x3ec6e9['location']===_0x457f9a[_0x493d8c(0x26b)]&&(_0x3ec6e9[_0x493d8c(0x2e4)]==='temperature'||_0x3ec6e9[_0x493d8c(0x2e4)]===_0x493d8c(0x28a)));if(_0x59a86d[_0x493d8c(0x2c6)]===0x0)return;const _0x5696ec=await this[_0x493d8c(0x1a9)](_0x59a86d[0x0]['id']);if(!_0x5696ec||typeof _0x5696ec[_0x493d8c(0x1c8)]!==_0x493d8c(0x1c6))return;const _0x34b871=_0x5696ec[_0x493d8c(0x1c8)];let _0x285efd=null;if(this[_0x493d8c(0x2a5)][_0x493d8c(0x213)]){const _0x1d9bb4=await this[_0x493d8c(0x1a9)](this[_0x493d8c(0x2a5)][_0x493d8c(0x213)]);_0x1d9bb4&&typeof _0x1d9bb4[_0x493d8c(0x1c8)]===_0x493d8c(0x1c6)&&(_0x285efd=_0x1d9bb4['val']);}if(_0x285efd!==null){const _0x161354=Math[_0x493d8c(0x26c)](_0x34b871-_0x285efd);_0x161354>0x3&&(this[_0x493d8c(0x294)][_0x493d8c(0x28d)](_0x493d8c(0x2af)+_0x457f9a['location']+':\x20Temp-Differenz\x20'+_0x161354[_0x493d8c(0x1f0)](0x1)+_0x493d8c(0x1f4)+_0x34b871+_0x493d8c(0x1fa)+_0x285efd+_0x493d8c(0x241)),await this[_0x493d8c(0x29a)]('analysis.ventilation.lastWindow',{'val':JSON[_0x493d8c(0x2ea)]({'room':_0x457f9a[_0x493d8c(0x26b)],'timestamp':Date[_0x493d8c(0x280)](),'tempDiff':_0x161354[_0x493d8c(0x1f0)](0x1),'recommendation':_0x161354>0x5?_0x493d8c(0x1a7):_0x493d8c(0x279)}),'ack':!![]}));}}catch(_0x2de83e){this['log'][_0x493d8c(0x2ce)](_0x493d8c(0x218)+_0x2de83e[_0x493d8c(0x2b2)]);}}async[a0_0x332da3(0x25f)](_0x5b2366){const _0x58f5cc=a0_0x332da3;if(!_0x5b2366||typeof _0x5b2366!==_0x58f5cc(0x1db))return;const _0x51e8fa={'timestamp':_0x5b2366[_0x58f5cc(0x1a6)]||Date[_0x58f5cc(0x280)](),'id':_0x5b2366['id']||Date['now']()[_0x58f5cc(0x19c)](),'name':_0x5b2366['name']||_0x58f5cc(0x282),'type':_0x5b2366[_0x58f5cc(0x2e4)]||'custom','location':_0x5b2366[_0x58f5cc(0x26b)]||_0x58f5cc(0x293),'value':_0x5b2366[_0x58f5cc(0x1c0)]||null};this[_0x58f5cc(0x2fe)]['unshift'](_0x51e8fa);if(this[_0x58f5cc(0x2fe)][_0x58f5cc(0x2c6)]>0x1388)this[_0x58f5cc(0x2fe)]['pop']();await this[_0x58f5cc(0x29a)]('events.history',{'val':JSON[_0x58f5cc(0x2ea)](this['eventHistory']),'ack':!![]}),this[_0x58f5cc(0x294)]['debug'](_0x58f5cc(0x1e1)+_0x51e8fa[_0x58f5cc(0x1cb)]+'\x20('+_0x51e8fa['location']+')');}[a0_0x332da3(0x1e4)](_0x31d091){}}if(require[a0_0x332da3(0x273)]!==module)module[a0_0x332da3(0x1f5)]=_0x2afc6e=>new CogniLiving(_0x2afc6e);else new CogniLiving();function a0_0x4457(){const _0x4dc748=['modules','getObjectViewAsync','date','toISOString','1486086fqOemf','TRAIN_COMFORT','initSystemConfig','{\x22today\x22:{},\x20\x22yesterday\x22:{},\x20\x22date\x22:\x22\x22}','substring','createDailyDigest','Guest\x20Mode','party','command','activeModules','ðŸ\x20Triggering\x20Python\x20Health\x20Check\x20(Activity\x20Trend)...','toLocaleTimeString','LTM.baselineStatus','setState','apiKey','toString','runPythonHealthCheck','analysis.training.triggerComfort','LTM.rawEventLog','briefingJob','@google/generative-ai','stopService','setPresence','Lernphase\x20(','pressureBuffer','timestamp','Gute\x20LÃ¼ftungsmÃ¶glichkeit!','./lib/recorder','getForeignStateAsync','initZombies','analysis.prediction.trackerTopRoom','mkdirSync','triggerGaitAnalysis\x20parse\x20error:\x20','from','replace','ready','Warm-Up\x20Time','history','updateSchedulePreview','infrasoundEnabled','split','analysis.automation.description','triggerGaitAnalysis\x20error:\x20','â†º\x20Replaying\x20','generateContent','devices','text','analysisHistory','.uptime','analysis.health.activityTrend','send','value','ðŸ”Š\x20Infraschall:\x20','\x20(Bewohner\x20anwesend\x20-\x20normal)','triggerEnergyPrediction','getAbsoluteDefaultDataDir','.data.table','number','python','val','pythonBridge','isSolar','name','push','âœ…\x20Dashboard\x20Data\x20(Rooms\x20&\x20Timeline\x20&\x20Details)\x20restored.','checkWifiPresence:\x20Error\x20checking\x20','.isOnline','isProVersion','analysis.health.geminiDay','toLocaleDateString','communicate.request','analysis.training.triggerHealth','LTM.dailyDigests','sensorLastValues','infrasoundSensorId','analysisTimer','memoryCache','error','object','Kein\x20API\x20Key\x20Ã¼bergeben.','analysis.energy.warmupTargets',',\x20Temp:\x20','sendTo','\x20events\x20from\x20today...','ðŸ“\x20Manual\x20event\x20logged:\x20','getEnums','values','sendNotification','dailyDigests','getDate','setObjectNotExistsAsync','writeFileSync','calendarName','window','utf8','analysis.safety.infrasoundAlert','24keTVfy','createAllObjects','analysis.training.triggerSecurity','toFixed','getTime','startSystem','Standard','Â°C\x20(Innen:\x20','exports','guest','system.adapter.','TRAIN_TOPOLOGY','âœ…\x20History\x20saved:\x20','Â°C,\x20AuÃŸen:\x20','minDaysForBaseline','onMessage','analysis.energy.warmupTimes','analysis.activity.roomStats','currentSystemMode','cogni-living\x20adapter\x20starting\x20(v','min','isGracePeriodActive','analysis.energy.warmupSources','\x22history\x22:{}','lastTrackerEventTime','Sonne:\x20','./lib/scanner','onReady','getGenerativeModel','NextHours.Location_1.Day_1.current.symbol_desc','Warte\x20auf\x20Analyse...','./lib/setup','geminiApiKey','\x20sequences','integrateRoomTime','existsSync','enum','de-DE','weatherTempId','runAutopilot','inactivityThresholdHours','\x20>\x20','accuweather.0','analyzeWindowOpening\x20error:\x20','.json','common','428661MdgCBb','isArray',')\x20-\x20Phase\x20E\x20(Scheduler\x20Fix)','system.adapter.ical.','sources','Room\x20History\x20(24h\x20Buckets)','runGeminiAnalysis','floor','231355gKjJHM','analyzeWindowOpening','ðŸš¨\x20INFRASCHALL-ALARM:\x20Anomalie\x20bei\x20Abwesenheit\x20(scharf)!','analysis.visualization.pulse','moduleHealth','temperature','forecast.current.weather','\x20rooms)','generateHealthReport','ðŸ’¾\x20Saving\x20Daily\x20History\x20for\x20','SYSTEM_MODES','getHistoryData','find','events.history','geminiModel','getMinutes','moduleComfort','\x20events\x20from\x20standard\x20storage.','health','cancel','History\x20Save\x20Error:\x20','system.presenceWho','state','415231xoAFJs','3LlaWqh','online','forEach','search','outdoorSensorId','59\x2023\x20*\x20*\x20*','Â°C)','bin','rawEventLog','models/gemini-flash-latest','callback','84174vFBttW','subscribeStates','NORMAL','join','(((.+)+)+)+$','node-schedule','initHistory','readFileSync','apply','5273288dMlxjr','scanThermostats','SYSTEM_DP_MODE','keys','onUnload','Init...','testContext','protectAiMemory','getHours','cogni-living','scanDevices','updateLocation','\x20-\x20','isPresent','max','replayTodayEvents','appendToLog','genAI','moduleSecurity','motion','triggerBriefing','healthTrendInterval','enum.rooms.*','Scan\x20Error:\x20','historyJob','manual','loadSystemMode','Adapter','location','abs','sunny','times','...','automation.triggerAction','getForeignObjectsAsync','analysis.training.triggerEnergy','main','infrasoundLocked','security','heiter','Gemini\x20Report\x20Day','toLowerCase','LÃ¼ften\x20empfohlen','analysis.training.triggerTopology','./lib/topology','analysis.prediction.trackerConfidence','rows','roomIntegratorTimer','namespace','now','Live\x20Event\x20Pulse','Manual\x20Event','Sec-Training\x20started...','ERROR','2-digit','â˜€ï¸\x20Solar\x20Condition:\x20SUNNY\x20detected\x20via\x20','includes','.last_seen','info','thermostat','add','Room\x20Dwell\x20Time\x20Stats','debug','analysis.activity.roomHistory','scanForDevices','42038vsLiSz','bootTime','ANALYZE_GAIT','Unknown','log','Keine\x20Daten','bind','Event','sonn','all','setStateAsync','calendarCheckTimer','âš \x20Replay\x20skipped:\x20No\x20events\x20in\x20memory.','presenceDevices','slice','SET_LEARNING_MODE','enum.functions.*','exitTimer','analysis.trigger','some','processSensorEvent','config','ðŸ”Š\x20FORENSIC:\x20Infraschall\x20bei\x20Abwesenheit!\x20Pressure:\x20','presenceCheckTimer','updateHealthVector','100YeVuyC','string','Gemini\x20Init\x20Error:\x20','todayVector','subscribeForeignStatesAsync','checkCalendarTriggers','ðŸ’¨\x20LÃ¼ftung\x20in\x20','scheduleJob','./lib/ai_agent','message','shift','CALCULATE_HEALTH_TREND','saveDailyHistory','{\x22history\x22:{}}','./lib/installer','checkWifiPresence','telegram','TRAIN_SECURITY','checkLicense','getCalendarNames','Unbekannt','energy','LTM.trainingData.sequences','setHours','analysis.automation.targetValue','checkSolarCondition','@iobroker/adapter-core','parse','[PythonBridge]\x20Forwarding\x20command:\x20','length','triggerEnergyPrediction\x20Error:\x20','pythonBridge\x20command\x20failed:\x20','sendMorningBriefing','No\x20data','General\x20Activity\x20Trend','triggerGaitAnalysis','checkThermostats','warn','Daily\x20Room\x20Details\x20(48x30min)','klar','executeAutomationAction','haustÃ¼r','setDate','analysis.health.todayVector','ack','endsWith','./lib/python_bridge','PREDICT_ENERGY','licenseKey','useCalendar','stateChange','ltmJob','dependencyInstallInProgress','version','Say\x20Hello',',\x20Events:\x0a','Aktiv\x20(','handleInfrasound','onStateChange','type','Niemand','Daily\x20Activity\x20Vector\x20(48x30min)','fill','analysis.health.todayRoomDetails','system','stringify','pulse','analysis.health.geminiNight','reduce','application/json','initSchedules','map','analysis.automation.targetId','isRelevantActivity','filter','ðŸš¶\x20Gait\x20Analysis\x20triggered\x20with\x20','clear','round','analysis.security.lastScore','analysis.training.status','triggerInfrasoundCorrelation','subscribeForeignStates','threshold_exceeded','lastAlertState','testApiKey','eventHistory','getStateAsync','modeResetJob','json','./lib/scheduler','infrasoundArmingId'];a0_0x4457=function(){return _0x4dc748;};return a0_0x4457();}