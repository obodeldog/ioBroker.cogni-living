function a0_0xe896(){const _0x521d46=['initSystemConfig','executeAutomationAction','Sec-Training\x20started...','licenseKey','unshift','memoryCache','modeResetJob','minutes_safe','protectAiMemory','Forensic\x20Infrasound\x20Log','startSystem','stringify','Gait\x20Speed\x20Calculation\x20Proof','ðŸš¨\x20DRUCKWELLEN-ALARM!\x20StÃ¤rke:\x20','.system.mode','enum','filter','notifyTelegramEnabled','isArray','./lib/dead_man','analysis.automation.triggerAction','accuweather.0','getStateAsync','length','sources','keys','ready','6041390jAZxmY','getHours','WiFi\x20Presence\x20detected.','Reinforcement\x20Learning\x20Penalties','apply','analysis.training.triggerEnergy','(((.+)+)+)+$','motion','some','12314hJsYej','analysis.security.learningStatus','search','split','appendToLog','lastTrackerEventTime','Comfort\x20Train\x20Error:\x20','[Forensics]\x20Infrasound\x20Event\x20correlated:\x20','NextHours.Location_1.Day_1.current.symbol_desc','initZombies','./lib/topology','subscribeForeignStatesAsync','models/gemini-flash-latest','resetRLPenalty','ack','analysisTimer','Daten\x20nicht\x20verfÃ¼gbar','infrasoundSensorId','runGeminiAnalysis','unload','LTM.baselineStatus','Heizung\x20kann\x20','âš ï¸\x20Graph-Brain:\x20No\x20training\x20sequences\x20found\x20in\x20LTM.','analysis.energy.insulationScore','analysis.training.status','subscribeForeignStates','map','checkThermostats','state','automation.triggerAction','startService','trackerHeartbeat','klar','getMinutes','[Infrasound]\x20ðŸŸ¡\x20Debug-Mode:\x20Alarm\x20detected\x20but\x20suppressed\x20because\x20presence=true.','_calName','pop','exitTimer','81616RjNKgI','generateContent','Nuukanni\x20Security','includes','Guest\x20Mode','magnet','setPresence','sort','devices','Kein\x20Wetter-Adapter','[Forensics]\x20Save\x20failed:\x20','analysis.energy.pinnForecast','Verbunden','analysis.training.triggerSecurity','currentSystemMode','response','setHours','common','ErklÃ¤rt\x20durch:\x20','triggerGaitAnalysis','command','\x20devices.','[Calibration]\x20Window\x20','temperature','checkLicense','6sxwLJX','onReady','Instanz\x20nicht\x20gefunden','parse','1984122qbjXSI','triggerInfrasoundCorrelation','system.presenceWho','\x20Tage)','./lib/python_bridge','runPythonHealthCheck','analysis.automation.autoApply','setupLtmScheduler','calendarName','General\x20Activity\x20Trend\x20(%)','calendarInstance','getCalendarNames','OPTIMIZE_ENERGY','cancel','sunny','floor','inactivityThresholdHours','sendMorningBriefing','key','analysis.automation.patternDetected','\x20rooms\x20(preventing\x20Cold\x20Start\x20Amnesia).','Verbindung\x20erfolgreich!','system.adapter.','sonn','TRAIN_SECURITY','notifyPushoverEnabled','initHistory','message','720QWwslM','setupBriefingScheduler','add','Fehler:\x20','version','updateHealthVector','json','text','analysis.energy.ventilationAlerts','abortExitTimer','slice','testContext','infrasoundThreshold','name','triggerEnergyPrediction','./lib/scanner','role','analysis.energy.rlPenalties','getEnums','pressureBuffer','fill','sensor.door','[Infrasound]\x20ðŸš¨\x20ALARM\x20TRIGGERED!\x20Pressure\x20Wave:\x20','namespace','1494962eSzFyS','Kein\x20API\x20Key\x20Ã¼bergeben','checkSolarCondition','cogni-living','[Infrasound]\x20Subscribing\x20to\x20external\x20sensor:\x20','reed','Fenster\x20geÃ¶ffnet:\x20','MATCH\x20(False\x20Positive)','weatherunderground.0','values','debug','toString','LTM.trainingData.sequences','open','./lib/automation','subscribeStates','Current.WeatherText','getForeignStateAsync','send','Active\x20Ventilation\x20Alerts','setObjectNotExistsAsync','runAutopilot','string','daswetter.0','sendNotification','SYSTEM_DP_MODE','isGracePeriodActive','Key\x20not\x20found\x20or\x20not\x20provided','Gemini\x20Init\x20Error:\x20','driftAnalysisTimer','analysisHistory','isPresent','PINN\x20AI\x20Forecast','abs','Simulation\x20durch\x20Admin\x20(Test)','checkCalendarTriggers','matrix','exports','ALARM','{\x22default\x22:\x2021}','ANOMALY\x20(Real\x20Threat?)','monitorEnforcements','66497740uZSVsO','sendTo','SET_TOPOLOGY','.data.table','checkWifiPresence','isProVersion','analysis.trigger','VACATION','analysis.security.infrasoundLog','getState','system.mode','setupDriftAnalysisScheduler','timestamp','getGenerativeModel','getOutsideTemperatureNumeric','dependencyInstallInProgress','analysis.energy.warmupTargets','./lib/scheduler','\x20sequences...','presenceDevices','analysis.automation.description','config','analysis.health.activityTrend','onStateChange','analyzeWindowOpening','@google/generative-ai','Keine\x20Antwort\x20von\x20Gemini','Warm-Up\x20Target\x20Temps\x20(JSON)','minDaysForBaseline','telegram','LTM.triggerDailyDigest','TRAIN_COMFORT','endsWith','party','onUnload','analysis.energy.warmupSources','analysis.health.gaitSensors','dailyDigests','onMessage','loadSystemMode','cogni-living\x20adapter\x20starting\x20(v','setStateAsync','Gemini\x20AI\x20initialized.','analysis.automation.targetId','Aktiv\x20(','SET_LEARNING_MODE','infrasoundEnabled','Kein\x20Kalender-Adapter','ðŸŽ“\x20[RL-RESET]\x20Lern-Sperre\x20(Penalty)\x20fÃ¼r\x20\x27','briefingJob','analysisInterval','setState','genAI','enum.rooms.*','analysis.energy.warmupTimes','analysis.automation.targetValue','cleanupGhostInterventions','Warm-Up\x20Time\x20(Minutes\x20to\x20Target)','processSensorEvent','type','dismissAutomation','manual','Sensors\x20used\x20for\x20Gait\x20Analysis','constructor','getForeignObjectsAsync','ltmJob','eventHistory','checkAndInstall','createDailyDigest','Keine\x20Sensor-AktivitÃ¤t','updateSchedulePreview','door','from','find','healthTrendInterval','bootTime','times','value','sensorLastValues','now','forEach','infrasoundLocked','toFixed','lastAlertState','main','./lib/recorder','updateTopology','TRAIN_ENERGY','infrasoundArmingId','6465060uquwuT','refreshCalendar','notifyTelegramInstance','error','rawEventLog','@iobroker/adapter-core','analysis.training.triggerHealth','location','notifyPushoverInstance','Lernphase\x20(','â¤ï¸\x20Auto-Heartbeat:\x20Aktualisiere\x20Gesundheits-Trends...','Party\x20Mode','testNotification','\x20hPa.\x20Einbruch\x20wahrscheinlich.','getLtmData','LTM.rawEventLog','getForeignObjectAsync','scanForDevices','ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...','analysis.health.todayVector','analysis.topology.structure','isSolar','SYSTEM_MODES','handleInfrasound','log','LTM.dailyDigests','warn','LTM.trainingData.thermodynamics','./lib/setup','bind','val','online','scores','object','toLowerCase','geminiModel','211JhBDSx','analysis.training.triggerComfort','\x20hPa\x20(Threshold:\x20','info','NORMAL','analysis.energy.activeEnforcements','clear','callback','getTime','push','forecast.current.weather','window','triggerDailyDigest'];a0_0xe896=function(){return _0x521d46;};return a0_0xe896();}const a0_0x15250a=a0_0x3ad7;(function(_0x76dfbe,_0x4d4b4e){const _0x2b7e6a=a0_0x3ad7,_0x2ae90e=_0x76dfbe();while(!![]){try{const _0x1e038d=parseInt(_0x2b7e6a(0x323))/0x1*(-parseInt(_0x2b7e6a(0x205))/0x2)+-parseInt(_0x2b7e6a(0x248))/0x3+-parseInt(_0x2b7e6a(0x2ff))/0x4+-parseInt(_0x2b7e6a(0x1fc))/0x5+parseInt(_0x2b7e6a(0x244))/0x6*(-parseInt(_0x2b7e6a(0x27c))/0x7)+-parseInt(_0x2b7e6a(0x22b))/0x8*(parseInt(_0x2b7e6a(0x264))/0x9)+parseInt(_0x2b7e6a(0x2a6))/0xa;if(_0x1e038d===_0x4d4b4e)break;else _0x2ae90e['push'](_0x2ae90e['shift']());}catch(_0x1d5be2){_0x2ae90e['push'](_0x2ae90e['shift']());}}}(a0_0xe896,0xcbdbc));const a0_0x2b5782=(function(){let _0x3803e2=!![];return function(_0x4d6e91,_0x45e743){const _0x4071e8=_0x3803e2?function(){const _0x3da58e=a0_0x3ad7;if(_0x45e743){const _0x4a2789=_0x45e743[_0x3da58e(0x200)](_0x4d6e91,arguments);return _0x45e743=null,_0x4a2789;}}:function(){};return _0x3803e2=![],_0x4071e8;};}()),a0_0x33d57c=a0_0x2b5782(this,function(){const _0x1023a9=a0_0x3ad7;return a0_0x33d57c[_0x1023a9(0x287)]()[_0x1023a9(0x207)]('(((.+)+)+)+$')[_0x1023a9(0x287)]()[_0x1023a9(0x2e5)](a0_0x33d57c)['search'](_0x1023a9(0x202));});a0_0x33d57c();'use strict';const utils=require(a0_0x15250a(0x304)),{GoogleGenerativeAI}=require(a0_0x15250a(0x2bf)),installer=require('./lib/installer'),scanner=require(a0_0x15250a(0x273)),schedulers=require(a0_0x15250a(0x2b7)),topology=require(a0_0x15250a(0x20f)),setup=require(a0_0x15250a(0x31b)),recorder=require(a0_0x15250a(0x2fb)),pythonBridge=require(a0_0x15250a(0x24c)),aiAgent=require('./lib/ai_agent'),deadMan=require(a0_0x15250a(0x1f4)),automation=require(a0_0x15250a(0x28a)),GEMINI_MODEL=a0_0x15250a(0x211),ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};function a0_0x3ad7(_0x9304cc,_0xaaaa70){const _0x3cdad6=a0_0xe896();return a0_0x3ad7=function(_0x33d57c,_0x2b5782){_0x33d57c=_0x33d57c-0x1df;let _0xe89661=_0x3cdad6[_0x33d57c];return _0xe89661;},a0_0x3ad7(_0x9304cc,_0xaaaa70);}class CogniLiving extends utils['Adapter']{constructor(_0x1bf129){const _0x4df1a3=a0_0x15250a;super({..._0x1bf129,'name':_0x4df1a3(0x27f)}),this[_0x4df1a3(0x2e8)]=[],this[_0x4df1a3(0x29a)]=[],this[_0x4df1a3(0x303)]=[],this[_0x4df1a3(0x2cb)]=[],this[_0x4df1a3(0x2f4)]={},this['systemConfig']={'latitude':0x0,'longitude':0x0,'city':''},this[_0x4df1a3(0x29b)]=!![],this[_0x4df1a3(0x22a)]=null,this['exitGraceTimer']=null,this[_0x4df1a3(0x296)]=![],this[_0x4df1a3(0x2da)]=null,this[_0x4df1a3(0x322)]=null,this[_0x4df1a3(0x239)]=setup[_0x4df1a3(0x315)][_0x4df1a3(0x327)],this[_0x4df1a3(0x2ab)]=![],this[_0x4df1a3(0x2f9)]=![],this[_0x4df1a3(0x214)]=null,this['ltmJob']=null,this['modeResetJob']=null,this[_0x4df1a3(0x299)]=null,this[_0x4df1a3(0x2d7)]=null,this[_0x4df1a3(0x224)]=null,this[_0x4df1a3(0x2f0)]=null,this[_0x4df1a3(0x2b5)]=![],this['lastTrackerEventTime']=Date[_0x4df1a3(0x2f5)](),this['memoryCache']=null,this[_0x4df1a3(0x2f1)]=Date[_0x4df1a3(0x2f5)](),this[_0x4df1a3(0x2f7)]=![],this[_0x4df1a3(0x277)]=[],this['on'](_0x4df1a3(0x1fb),this[_0x4df1a3(0x245)][_0x4df1a3(0x31c)](this)),this['on']('stateChange',this['onStateChange'][_0x4df1a3(0x31c)](this)),this['on'](_0x4df1a3(0x218),this[_0x4df1a3(0x2c8)][_0x4df1a3(0x31c)](this)),this['on'](_0x4df1a3(0x263),this[_0x4df1a3(0x2cc)][_0x4df1a3(0x31c)](this));}async['onReady'](){const _0x19deb0=a0_0x15250a;this[_0x19deb0(0x317)]['info'](_0x19deb0(0x2ce)+this[_0x19deb0(0x268)]+')\x20-\x20Phase\x20D\x20(Comfort\x20Refinement)');if(!installer[_0x19deb0(0x2e9)](this,()=>this[_0x19deb0(0x1eb)]()))return;}async[a0_0x15250a(0x1eb)](){const _0x331970=a0_0x15250a;await setup[_0x331970(0x20e)](this);try{this[_0x331970(0x2ab)]=await setup[_0x331970(0x243)](this[_0x331970(0x2bb)][_0x331970(0x1e4)]);}catch(_0x3a61de){}if(!this[_0x331970(0x2bb)][_0x331970(0x258)]||this[_0x331970(0x2bb)]['inactivityThresholdHours']<0.1)this['config'][_0x331970(0x258)]=0xc;await setup[_0x331970(0x262)](this),await setup[_0x331970(0x1e1)](this);try{const _0x1332df=await this[_0x331970(0x1f7)](_0x331970(0x2dc)),_0x4ae485=await this[_0x331970(0x1f7)](_0x331970(0x2c9));_0x1332df&&_0x1332df['val']&&_0x4ae485&&_0x4ae485[_0x331970(0x31d)]&&(Date['now']()-_0x1332df['ts']<0x4*0xe10*0x3e8&&(this[_0x331970(0x1e6)]={'times':JSON['parse'](_0x1332df[_0x331970(0x31d)]),'sources':JSON[_0x331970(0x247)](_0x4ae485[_0x331970(0x31d)])},this[_0x331970(0x317)][_0x331970(0x326)]('ðŸ§ \x20Memory:\x20Cache\x20hydrated\x20with\x20'+Object[_0x331970(0x1fa)](this[_0x331970(0x1e6)][_0x331970(0x2f2)])[_0x331970(0x1f8)]+_0x331970(0x25c))));}catch(_0x5c59fc){this[_0x331970(0x317)][_0x331970(0x319)]('Memory\x20Hydration\x20Failed:\x20'+_0x5c59fc[_0x331970(0x263)]);}if(this['config']['geminiApiKey'])try{this[_0x331970(0x2da)]=new GoogleGenerativeAI(this['config']['geminiApiKey']),this[_0x331970(0x322)]=this['genAI']['getGenerativeModel']({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':'application/json'}}),this[_0x331970(0x317)][_0x331970(0x326)](_0x331970(0x2d0));}catch(_0x1f2398){this[_0x331970(0x317)][_0x331970(0x302)](_0x331970(0x298)+_0x1f2398[_0x331970(0x263)]);}await setup['createAllObjects'](this),await this[_0x331970(0x2cd)](),await this[_0x331970(0x290)](_0x331970(0x236),{'type':_0x331970(0x221),'common':{'name':_0x331970(0x29c),'type':_0x331970(0x292),'role':_0x331970(0x26a),'read':!![],'write':![]},'native':{}}),await this[_0x331970(0x290)](_0x331970(0x26c),{'type':_0x331970(0x221),'common':{'name':_0x331970(0x28f),'type':_0x331970(0x292),'role':'json','read':!![],'write':![]},'native':{}}),await this[_0x331970(0x290)](_0x331970(0x2dc),{'type':_0x331970(0x221),'common':{'name':_0x331970(0x2df),'type':_0x331970(0x292),'role':_0x331970(0x26a),'read':!![],'write':![]},'native':{}}),await this[_0x331970(0x290)]('analysis.energy.warmupTargets',{'type':_0x331970(0x221),'common':{'name':_0x331970(0x2c1),'type':_0x331970(0x292),'role':_0x331970(0x26a),'read':!![],'write':!![],'def':_0x331970(0x2a3)},'native':{}}),await this[_0x331970(0x290)](_0x331970(0x275),{'type':_0x331970(0x221),'common':{'name':_0x331970(0x1ff),'type':'string','role':_0x331970(0x26a),'read':!![],'write':![],'def':'{}'},'native':{}}),await this[_0x331970(0x290)](_0x331970(0x2bc),{'type':_0x331970(0x221),'common':{'name':_0x331970(0x251),'type':'number','role':_0x331970(0x2f3),'unit':'%','read':!![],'write':![]},'native':{}}),await this[_0x331970(0x290)](_0x331970(0x2ca),{'type':'state','common':{'name':_0x331970(0x2e4),'type':_0x331970(0x292),'role':_0x331970(0x26b),'read':!![],'write':![]},'native':{}}),await this[_0x331970(0x290)](_0x331970(0x328),{'type':_0x331970(0x221),'common':{'name':'Active\x20Calendar\x20Enforcements\x20(Locks)','type':'string','role':_0x331970(0x26a),'read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x331970(0x290)](_0x331970(0x2ae),{'type':'state','common':{'name':_0x331970(0x1ea),'type':'string','role':_0x331970(0x26a),'read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x331970(0x290)]('analysis.health.gaitDebug',{'type':'state','common':{'name':_0x331970(0x1ed),'type':_0x331970(0x292),'role':_0x331970(0x26b),'read':!![],'write':![]},'native':{}});try{const _0x627486=await this[_0x331970(0x1f7)](_0x331970(0x30e));if(_0x627486&&_0x627486['val'])this['rawEventLog']=JSON[_0x331970(0x247)](_0x627486['val']);}catch(_0xd5931a){this['rawEventLog']=[];}try{const _0x417484=await this[_0x331970(0x1f7)](_0x331970(0x318));if(_0x417484&&_0x417484[_0x331970(0x31d)])this[_0x331970(0x2cb)]=JSON[_0x331970(0x247)](_0x417484[_0x331970(0x31d)]);}catch(_0x33759e){this['dailyDigests']=[];}const _0x5d5b0e=this[_0x331970(0x2cb)][_0x331970(0x1f8)]>=(this[_0x331970(0x2bb)][_0x331970(0x2c2)]||0x7)?_0x331970(0x2d2)+this[_0x331970(0x2cb)][_0x331970(0x1f8)]+_0x331970(0x24b):_0x331970(0x308)+this[_0x331970(0x2cb)]['length']+'/'+(this[_0x331970(0x2bb)][_0x331970(0x2c2)]||0x7)+')';await this[_0x331970(0x2cf)](_0x331970(0x219),{'val':_0x5d5b0e,'ack':!![]}),this['subscribeStates'](_0x331970(0x2ac)),this['subscribeStates'](_0x331970(0x2c4)),this[_0x331970(0x28b)](_0x331970(0x2b0)),this[_0x331970(0x28b)]('analysis.triggerBriefing'),this[_0x331970(0x28b)](_0x331970(0x1f5)),this['subscribeStates'](_0x331970(0x24e)),this[_0x331970(0x28b)]('analysis.training.triggerSecurity'),this[_0x331970(0x28b)](_0x331970(0x305)),this[_0x331970(0x28b)](_0x331970(0x201)),this[_0x331970(0x28b)](_0x331970(0x324)),this[_0x331970(0x28b)]('analysis.training.triggerTopology'),this[_0x331970(0x28b)]('analysis.energy.mpcActive'),this[_0x331970(0x28b)]('analysis.energy.warmupSources');this[_0x331970(0x2bb)][_0x331970(0x2d4)]&&this['config']['infrasoundSensorId']&&(this['log'][_0x331970(0x326)](_0x331970(0x280)+this['config'][_0x331970(0x216)]),this[_0x331970(0x21e)](this[_0x331970(0x2bb)]['infrasoundSensorId']));const _0x441cb9=this['config'][_0x331970(0x233)];if(_0x441cb9)for(const _0x577220 of _0x441cb9){await this[_0x331970(0x210)](_0x577220['id']);}const _0x126fbe=this['config'][_0x331970(0x2b9)];if(_0x126fbe)for(const _0x57f2fa of _0x126fbe){await this['subscribeForeignStatesAsync'](_0x57f2fa);}if(this[_0x331970(0x2bb)][_0x331970(0x1f2)]&&this['config'][_0x331970(0x301)])await this[_0x331970(0x210)](this[_0x331970(0x2bb)]['notifyTelegramInstance']+'.communicate.request');setTimeout(()=>this[_0x331970(0x2aa)](),0x1388);if(this['analysisTimer'])clearInterval(this[_0x331970(0x214)]);const _0x107379=this['config'][_0x331970(0x2d8)]||0xf;_0x107379>0x0&&(this[_0x331970(0x214)]=setInterval(()=>{const _0x12d0b9=_0x331970;this[_0x12d0b9(0x291)](),automation[_0x12d0b9(0x29f)](this),automation[_0x12d0b9(0x2a5)](this);},_0x107379*0x3c*0x3e8));setTimeout(()=>{automation['checkCalendarTriggers'](this),automation['monitorEnforcements'](this);},0x2710);this[_0x331970(0x2bb)]['trackerEnabled']!==![]&&(this[_0x331970(0x224)]=setInterval(()=>{const _0x1a1655=_0x331970;if(this[_0x1a1655(0x2ab)]){const _0x15545c=Date[_0x1a1655(0x2f5)](),_0x3b416f=this[_0x1a1655(0x20a)]||_0x15545c,_0x1b1897=(_0x15545c-_0x3b416f)/0x3e8;_0x1b1897>0x2&&(this['lastTrackerEventTime']=_0x15545c,pythonBridge[_0x1a1655(0x28e)](this,'TRACK_EVENT',{'room':null,'dt':_0x1b1897}));}},0xbb8));if(this[_0x331970(0x2f0)])clearInterval(this[_0x331970(0x2f0)]);this[_0x331970(0x2f0)]=setInterval(()=>{const _0x5de527=_0x331970;this[_0x5de527(0x2ab)]&&(this['log'][_0x5de527(0x326)](_0x5de527(0x309)),this[_0x5de527(0x24d)]());},0x4*0x3c*0x3c*0x3e8),schedulers[_0x331970(0x24f)](this,()=>aiAgent['createDailyDigest'](this,pythonBridge)),schedulers['setupModeResetScheduler'](this),schedulers[_0x331970(0x2b1)](this,()=>aiAgent['runBaselineDriftAnalysis'](this)),schedulers[_0x331970(0x265)](this,()=>aiAgent[_0x331970(0x259)](this)),pythonBridge[_0x331970(0x223)](this,installer['PYTHON_EXE']),setTimeout(async()=>{const _0x2bba23=_0x331970;await topology[_0x2bba23(0x2fc)](this);try{const _0x3a27ac=await this[_0x2bba23(0x1f7)](_0x2bba23(0x313));if(_0x3a27ac&&_0x3a27ac[_0x2bba23(0x31d)])pythonBridge['send'](this,_0x2bba23(0x2a8),JSON[_0x2bba23(0x247)](_0x3a27ac[_0x2bba23(0x31d)]));}catch(_0x455814){}this[_0x2bba23(0x24d)](),this['triggerGaitAnalysis'](),this[_0x2bba23(0x272)](),this['updateHealthVector']();},0x1388);}[a0_0x15250a(0x2c8)](_0x18ce2d){const _0x23bb64=a0_0x15250a;if(this[_0x23bb64(0x214)])clearInterval(this[_0x23bb64(0x214)]);if(this['driftAnalysisTimer'])clearInterval(this[_0x23bb64(0x299)]);if(this[_0x23bb64(0x224)])clearInterval(this['trackerHeartbeat']);if(this[_0x23bb64(0x2f0)])clearInterval(this[_0x23bb64(0x2f0)]);if(this['ltmJob'])this[_0x23bb64(0x2e7)][_0x23bb64(0x255)]();if(this['modeResetJob'])this[_0x23bb64(0x1e7)][_0x23bb64(0x255)]();if(this[_0x23bb64(0x2d7)])this[_0x23bb64(0x2d7)][_0x23bb64(0x255)]();recorder['abortExitTimer'](this),pythonBridge['stopService'](this),_0x18ce2d();}async[a0_0x15250a(0x2bd)](_0x1393ac,_0x4b99cc){const _0x5f0c70=a0_0x15250a;if(!_0x4b99cc||this[_0x5f0c70(0x2b5)])return;if(_0x1393ac[_0x5f0c70(0x22e)](_0x5f0c70(0x2c3))&&_0x1393ac[_0x5f0c70(0x2c6)]('communicate.request')&&_0x4b99cc[_0x5f0c70(0x31d)])return;if(this[_0x5f0c70(0x2bb)][_0x5f0c70(0x2d4)]&&_0x1393ac===this[_0x5f0c70(0x2bb)]['infrasoundSensorId']){this[_0x5f0c70(0x316)](_0x4b99cc[_0x5f0c70(0x31d)]);return;}if(_0x1393ac===this[_0x5f0c70(0x27b)]+_0x5f0c70(0x1ef)){if(_0x4b99cc[_0x5f0c70(0x31d)]&&Object[_0x5f0c70(0x285)](setup[_0x5f0c70(0x315)])['includes'](_0x4b99cc[_0x5f0c70(0x31d)])){this[_0x5f0c70(0x239)]=_0x4b99cc['val'];if(_0x4b99cc[_0x5f0c70(0x31d)]===setup[_0x5f0c70(0x315)][_0x5f0c70(0x2ad)])await recorder[_0x5f0c70(0x231)](this,![]);else await recorder[_0x5f0c70(0x231)](this,!![]);if(this['isProVersion']){let _0x40cb27=![],_0x53067f=0x0,_0x56d576=_0x5f0c70(0x2e3);if(this['currentSystemMode']===_0x5f0c70(0x2c7))_0x40cb27=!![],_0x53067f=0x168,_0x56d576=_0x5f0c70(0x30a);else this[_0x5f0c70(0x239)]==='guest'&&(_0x40cb27=!![],_0x53067f=0x5a0,_0x56d576=_0x5f0c70(0x22f));pythonBridge[_0x5f0c70(0x28e)](this,_0x5f0c70(0x2d3),{'active':_0x40cb27,'duration':_0x53067f,'label':_0x56d576}),await this[_0x5f0c70(0x2cf)](_0x5f0c70(0x206),{'val':JSON['stringify']({'active':_0x40cb27,'label':_0x56d576,'timestamp':Date[_0x5f0c70(0x2f5)]()}),'ack':!![]});}}if(!_0x4b99cc['ack'])this[_0x5f0c70(0x2d9)](_0x1393ac,{'val':this[_0x5f0c70(0x239)],'ack':!![]});return;}_0x1393ac[_0x5f0c70(0x2c6)](_0x5f0c70(0x2c9))&&_0x4b99cc['ack']&&this[_0x5f0c70(0x1e9)](_0x4b99cc[_0x5f0c70(0x31d)]);if(!_0x4b99cc[_0x5f0c70(0x213)]){if(_0x1393ac['includes'](_0x5f0c70(0x2ac))&&_0x4b99cc[_0x5f0c70(0x31d)]){this[_0x5f0c70(0x2d9)](_0x1393ac,{'val':![],'ack':!![]}),aiAgent['runGeminiAnalysis'](this);return;}if(_0x1393ac[_0x5f0c70(0x22e)](_0x5f0c70(0x1e0))&&_0x4b99cc[_0x5f0c70(0x31d)]){this[_0x5f0c70(0x2d9)](_0x1393ac,{'val':![],'ack':!![]});if(this[_0x5f0c70(0x2ab)])aiAgent[_0x5f0c70(0x2ea)](this,pythonBridge);return;}if(_0x1393ac[_0x5f0c70(0x22e)]('triggerBriefing')&&_0x4b99cc['val']){this[_0x5f0c70(0x2d9)](_0x1393ac,{'val':![],'ack':!![]}),aiAgent[_0x5f0c70(0x259)](this);return;}if(_0x1393ac['includes'](_0x5f0c70(0x222))&&_0x4b99cc['val']){this[_0x5f0c70(0x2d9)](_0x1393ac,{'val':![],'ack':!![]}),aiAgent[_0x5f0c70(0x1e2)](this);return;}if(_0x1393ac['includes'](_0x5f0c70(0x238))&&_0x4b99cc['val']){this['setState'](_0x1393ac,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x1a11ef=await this[_0x5f0c70(0x1f7)](_0x5f0c70(0x288));if(_0x1a11ef&&_0x1a11ef[_0x5f0c70(0x31d)]){const _0x44d70f=JSON[_0x5f0c70(0x247)](_0x1a11ef[_0x5f0c70(0x31d)]);this[_0x5f0c70(0x2cf)](_0x5f0c70(0x21d),{'val':_0x5f0c70(0x1e3),'ack':!![]}),pythonBridge[_0x5f0c70(0x28e)](this,_0x5f0c70(0x260),{'sequences':_0x44d70f});}}catch(_0x59c626){}return;}if(_0x1393ac[_0x5f0c70(0x22e)](_0x5f0c70(0x305))&&_0x4b99cc[_0x5f0c70(0x31d)]){this[_0x5f0c70(0x2d9)](_0x1393ac,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x31b216=await this[_0x5f0c70(0x1f7)]('LTM.dailyDigests');if(_0x31b216&&_0x31b216[_0x5f0c70(0x31d)])pythonBridge[_0x5f0c70(0x28e)](this,'TRAIN_HEALTH',{'digests':JSON[_0x5f0c70(0x247)](_0x31b216['val'])});}catch(_0x3fbb93){}return;}if(_0x1393ac['includes']('analysis.training.triggerEnergy')&&_0x4b99cc[_0x5f0c70(0x31d)]){this['setState'](_0x1393ac,{'val':![],'ack':!![]});if(this[_0x5f0c70(0x2ab)])try{const _0xa5a97d=await this['getStateAsync'](_0x5f0c70(0x31a));if(_0xa5a97d&&_0xa5a97d['val'])pythonBridge[_0x5f0c70(0x28e)](this,_0x5f0c70(0x2fd),{'points':JSON[_0x5f0c70(0x247)](_0xa5a97d[_0x5f0c70(0x31d)])});}catch(_0x555bfd){}return;}if(_0x1393ac['includes']('analysis.training.triggerComfort')&&_0x4b99cc[_0x5f0c70(0x31d)]){this[_0x5f0c70(0x2d9)](_0x1393ac,{'val':![],'ack':!![]});if(this[_0x5f0c70(0x2ab)])try{const _0x5475dd=await this[_0x5f0c70(0x1f7)](_0x5f0c70(0x30e));if(_0x5475dd&&_0x5475dd[_0x5f0c70(0x31d)]){const _0x1493ac={};this[_0x5f0c70(0x2bb)][_0x5f0c70(0x233)]&&Array[_0x5f0c70(0x1f3)](this[_0x5f0c70(0x2bb)]['devices'])&&this['config'][_0x5f0c70(0x233)][_0x5f0c70(0x2f6)](_0x2fac5a=>{const _0x4aaa92=_0x5f0c70;if(_0x2fac5a['id']&&_0x2fac5a['type'])_0x1493ac[_0x2fac5a['id']]=_0x2fac5a[_0x4aaa92(0x2e1)];}),this['log']['info']('ðŸ¤–\x20Butler\x20Training\x20started.\x20Injecting\x20knowledge\x20about\x20'+Object['keys'](_0x1493ac)[_0x5f0c70(0x1f8)]+_0x5f0c70(0x240)),pythonBridge[_0x5f0c70(0x28e)](this,_0x5f0c70(0x2c5),{'events':JSON[_0x5f0c70(0x247)](_0x5475dd['val']),'deviceMap':_0x1493ac});}}catch(_0x5eabd7){this[_0x5f0c70(0x317)][_0x5f0c70(0x302)](_0x5f0c70(0x20b)+_0x5eabd7['message']);}return;}if(_0x1393ac[_0x5f0c70(0x22e)]('analysis.training.triggerTopology')&&_0x4b99cc[_0x5f0c70(0x31d)]){this['setState'](_0x1393ac,{'val':![],'ack':!![]}),topology['updateTopology'](this);if(this['isProVersion'])try{const _0x31e76e=await this[_0x5f0c70(0x1f7)](_0x5f0c70(0x288));if(_0x31e76e&&_0x31e76e[_0x5f0c70(0x31d)]){const _0x29e611=JSON[_0x5f0c70(0x247)](_0x31e76e[_0x5f0c70(0x31d)]);this['log']['info']('ðŸ§ \x20Graph-Brain:\x20Training\x20Behaviour\x20Matrix\x20based\x20on\x20'+_0x29e611[_0x5f0c70(0x1f8)]+_0x5f0c70(0x2b8)),pythonBridge[_0x5f0c70(0x28e)](this,'TRAIN_TOPOLOGY',{'sequences':_0x29e611});}else this['log']['warn'](_0x5f0c70(0x21b));}catch(_0x6e4cb4){this['log'][_0x5f0c70(0x302)]('Graph-Brain\x20Train\x20Error:\x20'+_0x6e4cb4['message']);}return;}}if(this['config']['presenceDevices']&&this[_0x5f0c70(0x2bb)]['presenceDevices'][_0x5f0c70(0x22e)](_0x1393ac)){await this[_0x5f0c70(0x2aa)]();return;}const _0x7076c9=(this['config'][_0x5f0c70(0x233)]||[])[_0x5f0c70(0x2ef)](_0x2f9d79=>_0x2f9d79['id']===_0x1393ac);if(_0x7076c9){const _0x23cf63=await recorder[_0x5f0c70(0x2e0)](this,_0x1393ac,_0x4b99cc,_0x7076c9);_0x23cf63&&_0x23cf63['type']===_0x5f0c70(0x203)&&_0x23cf63[_0x5f0c70(0x306)]&&this[_0x5f0c70(0x2ab)]&&deadMan['updateLocation'](this,_0x23cf63[_0x5f0c70(0x306)]),_0x4b99cc[_0x5f0c70(0x31d)]&&(_0x4b99cc[_0x5f0c70(0x31d)]===!![]||_0x4b99cc[_0x5f0c70(0x31d)]===0x1||String(_0x4b99cc['val'])['toLowerCase']()===_0x5f0c70(0x289))&&(_0x7076c9[_0x5f0c70(0x2e1)]&&(_0x7076c9['type'][_0x5f0c70(0x22e)](_0x5f0c70(0x1df))||_0x7076c9[_0x5f0c70(0x2e1)]['includes'](_0x5f0c70(0x2ed))||_0x7076c9['type'][_0x5f0c70(0x22e)](_0x5f0c70(0x230)))&&this[_0x5f0c70(0x2be)](_0x7076c9)),(_0x7076c9['type']===_0x5f0c70(0x242)||_0x7076c9['type']==='thermostat')&&automation[_0x5f0c70(0x2de)](this);}}async[a0_0x15250a(0x1e9)](_0x3ba16e){const _0x3faa1a=a0_0x15250a;if(!this[_0x3faa1a(0x1e6)]||Date[_0x3faa1a(0x2f5)]()-this[_0x3faa1a(0x2f1)]>0x493e0)return;if(!this[_0x3faa1a(0x1e6)][_0x3faa1a(0x1f9)]||!this[_0x3faa1a(0x1e6)]['times'])return;try{const _0xe0e880=JSON['parse'](_0x3ba16e),_0x3488cf=this[_0x3faa1a(0x1e6)][_0x3faa1a(0x1f9)];let _0x3dc221=![];for(const _0x374f18 in _0x3488cf){if(_0x3488cf[_0x374f18][_0x3faa1a(0x22e)]('AI')&&_0xe0e880[_0x374f18]&&!_0xe0e880[_0x374f18][_0x3faa1a(0x22e)]('AI')){_0x3dc221=!![];break;}}_0x3dc221&&(this[_0x3faa1a(0x317)][_0x3faa1a(0x326)]('ðŸ§ \x20Memory\x20Protection:\x20Restoring\x20persisted\x20AI-Calculations\x20(preventing\x20\x27Cold\x20Start\x27\x20amnesia).'),await this['setStateAsync'](_0x3faa1a(0x2dc),{'val':JSON[_0x3faa1a(0x1ec)](this[_0x3faa1a(0x1e6)][_0x3faa1a(0x2f2)]),'ack':!![]}),await this[_0x3faa1a(0x2cf)](_0x3faa1a(0x2c9),{'val':JSON[_0x3faa1a(0x1ec)](this['memoryCache'][_0x3faa1a(0x1f9)]),'ack':!![]}));}catch(_0x18a527){}}async['onMessage'](_0x314ba1){const _0xcedbb1=a0_0x15250a;if(typeof _0x314ba1===_0xcedbb1(0x320)&&_0x314ba1[_0xcedbb1(0x263)]){if(_0x314ba1['command']===_0xcedbb1(0x220))try{const _0x49b8b9=await automation['scanThermostats'](this);this[_0xcedbb1(0x2a7)](_0x314ba1[_0xcedbb1(0x2ee)],_0x314ba1['command'],{'success':!![],'results':_0x49b8b9},_0x314ba1[_0xcedbb1(0x32a)]);}catch(_0x4a101f){this[_0xcedbb1(0x2a7)](_0x314ba1[_0xcedbb1(0x2ee)],_0x314ba1[_0xcedbb1(0x23f)],{'success':![],'error':_0x4a101f[_0xcedbb1(0x263)]},_0x314ba1[_0xcedbb1(0x32a)]);}else{if(_0x314ba1[_0xcedbb1(0x23f)]==='simulateEnergyMPC')try{const {current_temps:_0x12da7a,t_out:_0x3f8b5e,targets:_0x686732,t_forecast:_0x85e1c5}=_0x314ba1[_0xcedbb1(0x263)],_0x43b9d3=[];let _0x4eeac3={};try{const _0x2b1ace=await this['getStateAsync'](_0xcedbb1(0x21c));if(_0x2b1ace&&_0x2b1ace[_0xcedbb1(0x31d)]){const _0x236931=JSON[_0xcedbb1(0x247)](_0x2b1ace[_0xcedbb1(0x31d)]);_0x4eeac3=_0x236931[_0xcedbb1(0x31f)]||_0x236931;}}catch(_0xef4887){}const _0x1d2b74=_0x85e1c5!==undefined&&_0x85e1c5!==null?(_0x3f8b5e+_0x85e1c5)/0x2:_0x3f8b5e;for(const [_0x115e85,_0x72f8d]of Object['entries'](_0x12da7a)){const _0x1105e7=_0x686732[_0x115e85]||0x15;if(_0x72f8d<=_0x1105e7)continue;let _0x370b33=_0x4eeac3[_0x115e85]||-0.5;if(_0x370b33>=0x0)_0x370b33=-0.5;const _0xa39d40=Math['abs'](_0x370b33),_0x2c3a6a=_0x72f8d-_0x1105e7;let _0x18e7c0=Math[_0xcedbb1(0x257)](_0x2c3a6a/_0xa39d40*0x3c);const _0x284839=_0x72f8d-_0x3f8b5e,_0x3d4b2f=_0x72f8d-_0x1d2b74;if(_0x3d4b2f!==0x0&&_0x284839!==0x0){const _0x4e1d03=_0x284839/_0x3d4b2f;_0x18e7c0=Math['floor'](_0x18e7c0*_0x4e1d03);}if(_0x18e7c0>0xf){if(_0x18e7c0>0xf0)_0x18e7c0=0xf0;_0x43b9d3['push']({'room':_0x115e85,'minutes_safe':_0x18e7c0,'target':_0x1105e7,'current':_0x72f8d,'savings_msg':_0xcedbb1(0x21a)+_0x18e7c0+'\x20min\x20ausbleiben.'});}}_0x43b9d3[_0xcedbb1(0x232)]((_0x4d5591,_0x1f9130)=>_0x1f9130[_0xcedbb1(0x1e8)]-_0x4d5591[_0xcedbb1(0x1e8)]),this[_0xcedbb1(0x2a7)](_0x314ba1[_0xcedbb1(0x2ee)],_0x314ba1['command'],{'success':!![],'proposals':_0x43b9d3},_0x314ba1[_0xcedbb1(0x32a)]);}catch(_0xa83822){this[_0xcedbb1(0x2a7)](_0x314ba1[_0xcedbb1(0x2ee)],_0x314ba1[_0xcedbb1(0x23f)],{'success':![],'error':_0xa83822[_0xcedbb1(0x263)]},_0x314ba1[_0xcedbb1(0x32a)]);}else{if(_0x314ba1[_0xcedbb1(0x23f)]===_0xcedbb1(0x300))try{await automation[_0xcedbb1(0x2ec)](this),this[_0xcedbb1(0x2a7)](_0x314ba1[_0xcedbb1(0x2ee)],_0x314ba1[_0xcedbb1(0x23f)],{'success':!![]},_0x314ba1[_0xcedbb1(0x32a)]);}catch(_0x5cd6b5){this[_0xcedbb1(0x2a7)](_0x314ba1[_0xcedbb1(0x2ee)],_0x314ba1[_0xcedbb1(0x23f)],{'success':![],'error':_0x5cd6b5['message']},_0x314ba1[_0xcedbb1(0x32a)]);}else{if(_0x314ba1[_0xcedbb1(0x23f)]===_0xcedbb1(0x212))try{const _0x4f622d=_0x314ba1[_0xcedbb1(0x263)][_0xcedbb1(0x25a)],_0x5e449e=_0xcedbb1(0x275),_0x1fa341=await this[_0xcedbb1(0x1f7)](_0x5e449e);let _0x2b844b={};if(_0x1fa341&&_0x1fa341['val'])try{_0x2b844b=JSON['parse'](_0x1fa341['val']);}catch(_0x2e1ab5){}_0x4f622d&&_0x2b844b[_0x4f622d]?(delete _0x2b844b[_0x4f622d],await this[_0xcedbb1(0x2cf)](_0x5e449e,{'val':JSON[_0xcedbb1(0x1ec)](_0x2b844b),'ack':!![]}),this['log'][_0xcedbb1(0x326)](_0xcedbb1(0x2d6)+_0x4f622d+'\x27\x20wurde\x20manuell\x20vom\x20Benutzer\x20gelÃ¶scht.'),this[_0xcedbb1(0x2a7)](_0x314ba1[_0xcedbb1(0x2ee)],_0x314ba1[_0xcedbb1(0x23f)],{'success':!![]},_0x314ba1[_0xcedbb1(0x32a)])):this[_0xcedbb1(0x2a7)](_0x314ba1['from'],_0x314ba1[_0xcedbb1(0x23f)],{'success':![],'error':_0xcedbb1(0x297)},_0x314ba1['callback']);}catch(_0x11847f){this[_0xcedbb1(0x2a7)](_0x314ba1[_0xcedbb1(0x2ee)],_0x314ba1[_0xcedbb1(0x23f)],{'success':![],'error':_0x11847f[_0xcedbb1(0x263)]},_0x314ba1[_0xcedbb1(0x32a)]);}else{if(_0x314ba1[_0xcedbb1(0x23f)]===_0xcedbb1(0x2e2))await this[_0xcedbb1(0x2cf)](_0xcedbb1(0x25b),{'val':![],'ack':!![]}),await this[_0xcedbb1(0x2cf)](_0xcedbb1(0x2ba),{'val':'','ack':!![]}),await this[_0xcedbb1(0x2cf)]('analysis.automation.targetId',{'val':'','ack':!![]}),this['sendTo'](_0x314ba1[_0xcedbb1(0x2ee)],_0x314ba1[_0xcedbb1(0x23f)],{'success':!![]},_0x314ba1[_0xcedbb1(0x32a)]);else{if(_0x314ba1['command']==='simulateButler'){const {targetId:_0x5b7415,targetValue:_0x96ba8a}=_0x314ba1[_0xcedbb1(0x263)];await this['setStateAsync'](_0xcedbb1(0x25b),{'val':!![],'ack':!![]}),await this['setStateAsync']('analysis.automation.description',{'val':_0xcedbb1(0x29e),'ack':!![]}),await this[_0xcedbb1(0x2cf)](_0xcedbb1(0x2d1),{'val':_0x5b7415,'ack':!![]}),await this[_0xcedbb1(0x2cf)](_0xcedbb1(0x2dd),{'val':String(_0x96ba8a),'ack':!![]}),this[_0xcedbb1(0x2a7)](_0x314ba1['from'],_0x314ba1['command'],{'success':!![]},_0x314ba1[_0xcedbb1(0x32a)]);}else{if(_0x314ba1[_0xcedbb1(0x23f)]==='testApiKey')try{const _0x2444c0=_0x314ba1[_0xcedbb1(0x263)]['apiKey'];if(!_0x2444c0)throw new Error(_0xcedbb1(0x27d));const _0x523618=new GoogleGenerativeAI(_0x2444c0),_0x3050e3=_0x523618[_0xcedbb1(0x2b3)]({'model':GEMINI_MODEL}),_0x4a9a1e=await _0x3050e3[_0xcedbb1(0x22c)]('Test'),_0x429046=await _0x4a9a1e[_0xcedbb1(0x23a)];if(_0x429046[_0xcedbb1(0x26b)]())this[_0xcedbb1(0x2a7)](_0x314ba1[_0xcedbb1(0x2ee)],_0x314ba1[_0xcedbb1(0x23f)],{'success':!![],'message':_0xcedbb1(0x25d)},_0x314ba1[_0xcedbb1(0x32a)]);else throw new Error(_0xcedbb1(0x2c0));}catch(_0x2bc2ad){this[_0xcedbb1(0x2a7)](_0x314ba1[_0xcedbb1(0x2ee)],_0x314ba1[_0xcedbb1(0x23f)],{'success':![],'message':_0x2bc2ad[_0xcedbb1(0x263)]},_0x314ba1['callback']);}else{if(_0x314ba1[_0xcedbb1(0x23f)]==='scanDevices')try{const _0x1c4752=await scanner[_0xcedbb1(0x310)](this,_0x314ba1['message']||{});this[_0xcedbb1(0x2a7)](_0x314ba1[_0xcedbb1(0x2ee)],_0x314ba1['command'],{'success':!![],'devices':_0x1c4752},_0x314ba1[_0xcedbb1(0x32a)]);}catch(_0x214718){this[_0xcedbb1(0x2a7)](_0x314ba1['from'],_0x314ba1[_0xcedbb1(0x23f)],{'success':![],'error':_0x214718[_0xcedbb1(0x263)]},_0x314ba1['callback']);}else{if(_0x314ba1[_0xcedbb1(0x23f)]==='updateTopologyMatrix')try{const {matrix:_0x4e72f9}=_0x314ba1[_0xcedbb1(0x263)],_0x51dd88=await this[_0xcedbb1(0x1f7)](_0xcedbb1(0x313));if(_0x51dd88&&_0x51dd88[_0xcedbb1(0x31d)]){const _0x28e990=JSON[_0xcedbb1(0x247)](_0x51dd88['val']);_0x28e990[_0xcedbb1(0x2a0)]=_0x4e72f9,_0x28e990['updated']=Date[_0xcedbb1(0x2f5)](),await this[_0xcedbb1(0x2cf)](_0xcedbb1(0x313),{'val':JSON[_0xcedbb1(0x1ec)](_0x28e990),'ack':!![]}),pythonBridge[_0xcedbb1(0x28e)](this,_0xcedbb1(0x2a8),_0x28e990);}this[_0xcedbb1(0x2a7)](_0x314ba1[_0xcedbb1(0x2ee)],_0x314ba1[_0xcedbb1(0x23f)],{'success':!![]},_0x314ba1[_0xcedbb1(0x32a)]);}catch(_0x1d7143){this['log'][_0xcedbb1(0x302)](_0x1d7143);}else{if(_0x314ba1[_0xcedbb1(0x23f)]===_0xcedbb1(0x30d))this[_0xcedbb1(0x2a7)](_0x314ba1['from'],_0x314ba1[_0xcedbb1(0x23f)],{'success':!![],'dailyDigests':this[_0xcedbb1(0x2cb)]||[],'analysisHistory':this['analysisHistory']||[]},_0x314ba1[_0xcedbb1(0x32a)]);else{if(_0x314ba1[_0xcedbb1(0x23f)]==='getOverviewData'){const _0x4f5b79=this[_0xcedbb1(0x2cb)][_0xcedbb1(0x1f8)],_0x278f66=new Array(0x18)[_0xcedbb1(0x278)](0x0),_0x2cbc9d=new Date()[_0xcedbb1(0x23b)](0x0,0x0,0x0,0x0);this[_0xcedbb1(0x2e8)]&&this[_0xcedbb1(0x2e8)][_0xcedbb1(0x2f6)](_0xb4ffa0=>{const _0x209b90=_0xcedbb1;if(_0xb4ffa0[_0x209b90(0x2b2)]>=_0x2cbc9d){const _0x51fce1=new Date(_0xb4ffa0[_0x209b90(0x2b2)])[_0x209b90(0x1fd)]();if(_0x51fce1>=0x0&&_0x51fce1<0x18)_0x278f66[_0x51fce1]++;}});let _0x33b867=![],_0x141be5='',_0x6ca21f='',_0x40ffdf='';try{const _0x5c5a52=await this[_0xcedbb1(0x1f7)](_0xcedbb1(0x25b));if(_0x5c5a52&&_0x5c5a52[_0xcedbb1(0x31d)]){_0x33b867=!![];const _0x16687a=await this[_0xcedbb1(0x1f7)](_0xcedbb1(0x2ba));_0x141be5=_0x16687a?_0x16687a[_0xcedbb1(0x31d)]:'';const _0x5db84b=await this[_0xcedbb1(0x1f7)](_0xcedbb1(0x2d1));_0x6ca21f=_0x5db84b?_0x5db84b['val']:'';const _0x38a2ac=await this[_0xcedbb1(0x1f7)](_0xcedbb1(0x2dd));_0x40ffdf=_0x38a2ac?_0x38a2ac[_0xcedbb1(0x31d)]:'';}}catch(_0x1bf376){}const _0x1d4bef=await this[_0xcedbb1(0x27e)](),_0x4dc0b2=(this[_0xcedbb1(0x2bb)][_0xcedbb1(0x233)]||[])[_0xcedbb1(0x204)](_0x3bacbd=>_0x3bacbd['isSolar']),_0x491267=_0x1d4bef&&_0x4dc0b2;let _0x4a0520='';try{const _0x1faf9d=await this[_0xcedbb1(0x1f7)](_0xcedbb1(0x24a));if(_0x1faf9d&&_0x1faf9d[_0xcedbb1(0x31d)])_0x4a0520=_0x1faf9d[_0xcedbb1(0x31d)];}catch(_0x594dc1){}this[_0xcedbb1(0x2a7)](_0x314ba1['from'],_0x314ba1[_0xcedbb1(0x23f)],{'success':!![],'eventHistory':this['eventHistory'][_0xcedbb1(0x26e)](0x0,0xf),'stats':{'digestCount':_0x4f5b79,'isPresent':this[_0xcedbb1(0x29b)],'hourlyActivity':_0x278f66,'solarActive':_0x491267,'presenceWho':_0x4a0520},'automation':{'detected':_0x33b867,'description':_0x141be5,'targetId':_0x6ca21f,'targetValue':_0x40ffdf}},_0x314ba1[_0xcedbb1(0x32a)]);}else{if(_0x314ba1[_0xcedbb1(0x23f)]===_0xcedbb1(0x276)){const _0x3a3921=await this[_0xcedbb1(0x2e6)]('enum.functions.*',_0xcedbb1(0x1f0)),_0x15b8d6=[];if(_0x3a3921)for(const _0x3067dc in _0x3a3921){const _0x17b25f=_0x3a3921[_0x3067dc],_0x52c022=(_0x17b25f[_0xcedbb1(0x23c)]&&typeof _0x17b25f['common']['name']===_0xcedbb1(0x320)?_0x17b25f[_0xcedbb1(0x23c)][_0xcedbb1(0x271)]['de']:_0x17b25f[_0xcedbb1(0x23c)]['name'])||_0x17b25f[_0xcedbb1(0x23c)]['name'];_0x15b8d6[_0xcedbb1(0x32c)]({'id':_0x3067dc,'name':_0x52c022});}const _0x504aba=await this['getForeignObjectsAsync'](_0xcedbb1(0x2db),_0xcedbb1(0x1f0)),_0x5c2dc5=[];if(_0x504aba)for(const _0x184c74 in _0x504aba){const _0x34d8ee=_0x504aba[_0x184c74],_0x5dac4e=(_0x34d8ee[_0xcedbb1(0x23c)]&&typeof _0x34d8ee[_0xcedbb1(0x23c)][_0xcedbb1(0x271)]===_0xcedbb1(0x320)?_0x34d8ee['common'][_0xcedbb1(0x271)]['de']:_0x34d8ee[_0xcedbb1(0x23c)][_0xcedbb1(0x271)])||_0x184c74[_0xcedbb1(0x208)]('.')[_0xcedbb1(0x229)]();_0x5c2dc5[_0xcedbb1(0x32c)](_0x5dac4e);}this[_0xcedbb1(0x2a7)](_0x314ba1['from'],_0x314ba1[_0xcedbb1(0x23f)],{'success':!![],'enums':_0x15b8d6,'rooms':_0x5c2dc5},_0x314ba1[_0xcedbb1(0x32a)]);}else{if(_0x314ba1[_0xcedbb1(0x23f)]===_0xcedbb1(0x26f))try{let _0x1ce8bc=_0xcedbb1(0x234),_0x411c86=_0xcedbb1(0x2d5);if(this[_0xcedbb1(0x2bb)]['useWeather']){const _0x342c1f=await recorder[_0xcedbb1(0x2b4)](this);_0x1ce8bc=_0x342c1f!==null?_0x342c1f+'Â°C':_0xcedbb1(0x215);}if(this['config'][_0xcedbb1(0x252)]){const _0x59d9d8=await this[_0xcedbb1(0x30f)](_0xcedbb1(0x25e)+this[_0xcedbb1(0x2bb)]['calendarInstance']);_0x411c86=_0x59d9d8?_0xcedbb1(0x237):_0xcedbb1(0x246);}this['sendTo'](_0x314ba1[_0xcedbb1(0x2ee)],_0x314ba1[_0xcedbb1(0x23f)],{'success':!![],'weather':_0x1ce8bc,'calendar':_0x411c86},_0x314ba1[_0xcedbb1(0x32a)]);}catch(_0x34f3b8){this[_0xcedbb1(0x2a7)](_0x314ba1['from'],_0x314ba1['command'],{'success':![],'error':_0x34f3b8[_0xcedbb1(0x263)]},_0x314ba1['callback']);}else{if(_0x314ba1[_0xcedbb1(0x23f)]===_0xcedbb1(0x253))try{const _0x22fb4d=_0x314ba1['message']['instance'],_0x37e8c2=await this[_0xcedbb1(0x28d)](_0x22fb4d+_0xcedbb1(0x2a9));let _0x45eac1=[];if(_0x37e8c2&&_0x37e8c2['val']){const _0x8ff845=JSON[_0xcedbb1(0x247)](_0x37e8c2[_0xcedbb1(0x31d)]),_0x54e935=new Set();Array[_0xcedbb1(0x1f3)](_0x8ff845)&&_0x8ff845[_0xcedbb1(0x2f6)](_0x416768=>{const _0x8ef22f=_0xcedbb1;if(_0x416768[_0x8ef22f(0x228)])_0x54e935[_0x8ef22f(0x266)](_0x416768['_calName']);else{if(_0x416768[_0x8ef22f(0x250)])_0x54e935['add'](_0x416768['calendarName']);}}),_0x45eac1=Array[_0xcedbb1(0x2ee)](_0x54e935)[_0xcedbb1(0x232)]();}if(_0x45eac1[_0xcedbb1(0x1f8)]===0x0)_0x45eac1=['Standard'];this[_0xcedbb1(0x2a7)](_0x314ba1[_0xcedbb1(0x2ee)],_0x314ba1[_0xcedbb1(0x23f)],{'success':!![],'names':_0x45eac1},_0x314ba1['callback']);}catch(_0x18149e){this[_0xcedbb1(0x2a7)](_0x314ba1[_0xcedbb1(0x2ee)],_0x314ba1[_0xcedbb1(0x23f)],{'success':![],'error':_0x18149e[_0xcedbb1(0x263)]},_0x314ba1[_0xcedbb1(0x32a)]);}else{if(_0x314ba1[_0xcedbb1(0x23f)]===_0xcedbb1(0x30b))try{await setup[_0xcedbb1(0x294)](this,'ðŸ””\x20Dies\x20ist\x20ein\x20Test\x20von\x20Cogni-Living.',![],![]),this['sendTo'](_0x314ba1[_0xcedbb1(0x2ee)],_0x314ba1[_0xcedbb1(0x23f)],{'success':!![],'message':'Gesendet'},_0x314ba1['callback']);}catch(_0x390f63){this[_0xcedbb1(0x317)]['error']('Notification\x20Test\x20Failed:\x20'+_0x390f63[_0xcedbb1(0x263)]),this[_0xcedbb1(0x2a7)](_0x314ba1['from'],_0x314ba1[_0xcedbb1(0x23f)],{'success':![],'message':_0xcedbb1(0x267)+_0x390f63['message']},_0x314ba1['callback']);}}}}}}}}}}}}}}}}}async[a0_0x15250a(0x2cd)](){const _0x13705f=a0_0x15250a;try{const _0x2967ce=await this[_0x13705f(0x1f7)](setup[_0x13705f(0x295)]);_0x2967ce&&_0x2967ce['val']&&Object[_0x13705f(0x285)](setup[_0x13705f(0x315)])['includes'](_0x2967ce[_0x13705f(0x31d)])?this['currentSystemMode']=_0x2967ce[_0x13705f(0x31d)]:(this[_0x13705f(0x239)]=setup[_0x13705f(0x315)][_0x13705f(0x327)],await this['setStateAsync'](setup[_0x13705f(0x295)],{'val':setup[_0x13705f(0x315)][_0x13705f(0x327)],'ack':!![]}));}catch(_0x352dfd){this['currentSystemMode']=setup['SYSTEM_MODES'][_0x13705f(0x327)];}}async[a0_0x15250a(0x2aa)](){const _0x2e3b42=a0_0x15250a;try{const _0x501c35=this[_0x2e3b42(0x2bb)][_0x2e3b42(0x2b9)]||[];let _0x4f97da=![];const _0x21ddb7=[];for(const _0x10302a of _0x501c35){try{const _0x14e813=await this['getForeignStateAsync'](_0x10302a);_0x14e813&&(_0x14e813[_0x2e3b42(0x31d)]===!![]||_0x14e813[_0x2e3b42(0x31d)]===_0x2e3b42(0x31e)||_0x14e813[_0x2e3b42(0x31d)]===0x1)&&(_0x4f97da=!![],_0x21ddb7[_0x2e3b42(0x32c)](_0x10302a));}catch(_0x44839b){}}return await this[_0x2e3b42(0x2cf)](_0x2e3b42(0x24a),{'val':_0x21ddb7['join'](',\x20'),'ack':!![]}),_0x4f97da&&(this['exitTimer']&&(this['log'][_0x2e3b42(0x326)](_0x2e3b42(0x1fe)),recorder[_0x2e3b42(0x26d)](this)),!this['isPresent']&&this['currentSystemMode']===setup[_0x2e3b42(0x315)]['NORMAL']&&await recorder[_0x2e3b42(0x231)](this,!![])),_0x4f97da;}catch(_0x316474){return![];}}async['runAutopilot'](){const _0x8cc0b4=a0_0x15250a;this[_0x8cc0b4(0x317)][_0x8cc0b4(0x286)](_0x8cc0b4(0x311)),await aiAgent[_0x8cc0b4(0x217)](this),this['updateHealthVector'](),this['triggerGaitAnalysis'](),this[_0x8cc0b4(0x272)]();}async['checkSolarCondition'](){const _0x12260d=a0_0x15250a,_0x5b426b=[_0x12260d(0x284),_0x12260d(0x1f6),_0x12260d(0x293)],_0x1643bb=[_0x12260d(0x32d),_0x12260d(0x28c),_0x12260d(0x20d)];for(const _0x27eaae of _0x5b426b){for(const _0x37147a of _0x1643bb){try{const _0x301fa9=_0x27eaae+'.'+_0x37147a,_0x1c8fcf=await this['getForeignStateAsync'](_0x301fa9);if(_0x1c8fcf&&_0x1c8fcf[_0x12260d(0x31d)]){const _0x349bd0=String(_0x1c8fcf[_0x12260d(0x31d)])['toLowerCase']();if(_0x349bd0['includes'](_0x12260d(0x25f))||_0x349bd0[_0x12260d(0x22e)](_0x12260d(0x256))||_0x349bd0[_0x12260d(0x22e)](_0x12260d(0x225))||_0x349bd0[_0x12260d(0x22e)](_0x12260d(0x329))||_0x349bd0[_0x12260d(0x22e)]('heiter'))return!![];}}catch(_0x423bf2){}}}return![];}[a0_0x15250a(0x23e)](){const _0x11ce6e=a0_0x15250a;if(!this[_0x11ce6e(0x2ab)])return;try{this[_0x11ce6e(0x2af)](_0x11ce6e(0x288),(_0x5e24b4,_0x583013)=>{const _0x350cf6=_0x11ce6e;_0x583013&&_0x583013[_0x350cf6(0x31d)]&&pythonBridge[_0x350cf6(0x28e)](this,'ANALYZE_GAIT',{'sequences':JSON[_0x350cf6(0x247)](_0x583013[_0x350cf6(0x31d)])});});}catch(_0x9226ea){}}async[a0_0x15250a(0x272)](){const _0x299f5f=a0_0x15250a;if(!this[_0x299f5f(0x2ab)])return;try{const _0x558ee1=await recorder[_0x299f5f(0x2b4)](this);if(_0x558ee1===null)return;const _0x5e333f={},_0x4d5ebc={},_0x365ced=this[_0x299f5f(0x2bb)][_0x299f5f(0x233)]||[];for(const _0x1dbdb2 of _0x365ced){if(_0x1dbdb2[_0x299f5f(0x2e1)]==='temperature'&&_0x1dbdb2[_0x299f5f(0x306)]){const _0x56295c=this[_0x299f5f(0x2f4)][_0x1dbdb2['id']];if(_0x56295c!==undefined)_0x5e333f[_0x1dbdb2[_0x299f5f(0x306)]]=_0x56295c;if(_0x1dbdb2[_0x299f5f(0x314)])_0x4d5ebc[_0x1dbdb2[_0x299f5f(0x306)]]=!![];}}const _0x3dc3df=await this[_0x299f5f(0x27e)]();let _0x2efb67={};try{const _0x6b628c=await this[_0x299f5f(0x1f7)](_0x299f5f(0x2b6));if(_0x6b628c&&_0x6b628c[_0x299f5f(0x31d)])_0x2efb67=JSON[_0x299f5f(0x247)](_0x6b628c['val']);}catch(_0x5ed3b5){}Object['keys'](_0x5e333f)[_0x299f5f(0x1f8)]>0x0&&(pythonBridge[_0x299f5f(0x28e)](this,'PREDICT_ENERGY',{'current_temps':_0x5e333f,'t_out':_0x558ee1,'is_sunny':_0x3dc3df,'solar_flags':_0x4d5ebc,'warmup_targets':_0x2efb67}),pythonBridge[_0x299f5f(0x28e)](this,_0x299f5f(0x254),{'current_temps':_0x5e333f,'t_out':_0x558ee1,'targets':{}}));}catch(_0x589fa0){}}[a0_0x15250a(0x269)](){const _0xfd945a=a0_0x15250a;if(!this[_0xfd945a(0x303)]||this[_0xfd945a(0x303)][_0xfd945a(0x1f8)]===0x0)return;const _0xe303b2=new Array(0x60)[_0xfd945a(0x278)](0x0),_0x132b8c=new Date()['setHours'](0x0,0x0,0x0,0x0);this['rawEventLog'][_0xfd945a(0x2f6)](_0x1f34c0=>{const _0x3e18ee=_0xfd945a,_0x4cef8d=new Date(_0x1f34c0[_0x3e18ee(0x2b2)]);if(_0x4cef8d[_0x3e18ee(0x32b)]()>=_0x132b8c){const _0x341f0b=_0x4cef8d[_0x3e18ee(0x1fd)](),_0x51838f=_0x4cef8d[_0x3e18ee(0x226)](),_0x18fd10=_0x341f0b*0x4+Math[_0x3e18ee(0x257)](_0x51838f/0xf);if(_0x18fd10>=0x0&&_0x18fd10<0x60)_0xe303b2[_0x18fd10]++;}}),this[_0xfd945a(0x2cf)](_0xfd945a(0x312),{'val':JSON['stringify'](_0xe303b2),'ack':!![]});}[a0_0x15250a(0x24d)](){const _0x2f9d7c=a0_0x15250a;if(!this[_0x2f9d7c(0x2cb)]||this['dailyDigests'][_0x2f9d7c(0x1f8)]<0x2)return;const _0x1f98b1=this['dailyDigests'][_0x2f9d7c(0x21f)](_0xbe55a4=>{const _0x23f7d3=_0x2f9d7c,_0x5943ff=(_0xbe55a4['activityLevel']||'')[_0x23f7d3(0x321)]();return ACTIVITY_LEVEL_MAP[_0x5943ff]||0x32;});pythonBridge[_0x2f9d7c(0x28e)](this,'ANALYZE_TREND',{'values':_0x1f98b1,'tag':'Activity-Level'});}async[a0_0x15250a(0x316)](_0x2d7ce5){const _0x488423=a0_0x15250a;if(_0x2d7ce5==null||typeof _0x2d7ce5!=='number')return;const _0xa91b47=Date[_0x488423(0x2f5)]();this[_0x488423(0x277)][_0x488423(0x32c)]({'ts':_0xa91b47,'val':_0x2d7ce5}),this[_0x488423(0x277)]=this[_0x488423(0x277)][_0x488423(0x1f1)](_0x5c6318=>_0xa91b47-_0x5c6318['ts']<0x1388);if(this[_0x488423(0x2f7)])return;if(this[_0x488423(0x2bb)][_0x488423(0x2fe)]){const _0xa3c4c6=await this[_0x488423(0x28d)](this['config'][_0x488423(0x2fe)]);if(_0xa3c4c6&&!_0xa3c4c6[_0x488423(0x31d)])return;}const _0x5d16df=this[_0x488423(0x2bb)][_0x488423(0x270)]||0.04;if(Math[_0x488423(0x29d)](_0x2d7ce5)>=_0x5d16df){this[_0x488423(0x317)][_0x488423(0x319)](_0x488423(0x27a)+_0x2d7ce5+'\x20hPa\x20(Limit:\x20'+_0x5d16df+')'),await this[_0x488423(0x2cf)]('security.alarm_triggered',{'val':!![],'ack':!![]});const _0x56c9c9=this[_0x488423(0x29b)];_0x56c9c9?(this[_0x488423(0x317)][_0x488423(0x326)](_0x488423(0x227)),this[_0x488423(0x249)](_0x2d7ce5,'INTERNAL')):(this['triggerInfrasoundCorrelation'](_0x2d7ce5,_0x488423(0x2a2)),this[_0x488423(0x294)](_0x488423(0x1ee)+_0x2d7ce5+_0x488423(0x30c))),this['infrasoundLocked']=!![],setTimeout(()=>{const _0x580dba=_0x488423;this[_0x580dba(0x2f7)]=![];},0x2710);}}async['triggerInfrasoundCorrelation'](_0x56bf42,_0x6df110=a0_0x15250a(0x2a2)){const _0x2616cd=a0_0x15250a,_0x112263=Date[_0x2616cd(0x2f5)](),_0x53625=this['config'][_0x2616cd(0x233)]||[];setTimeout(async()=>{const _0x2dd009=_0x2616cd;let _0x23935b=null,_0x41b9d3=_0x2dd009(0x2eb);const _0x2a7b72=_0x53625[_0x2dd009(0x1f1)](_0xc5f9ce=>_0xc5f9ce[_0x2dd009(0x2e1)]&&(_0xc5f9ce[_0x2dd009(0x2e1)][_0x2dd009(0x22e)]('window')||_0xc5f9ce[_0x2dd009(0x2e1)]['includes']('door')||_0xc5f9ce[_0x2dd009(0x2e1)][_0x2dd009(0x22e)](_0x2dd009(0x230))||_0xc5f9ce['type'][_0x2dd009(0x22e)](_0x2dd009(0x281)))||_0xc5f9ce[_0x2dd009(0x274)]&&(_0xc5f9ce[_0x2dd009(0x274)][_0x2dd009(0x22e)]('sensor.window')||_0xc5f9ce[_0x2dd009(0x274)][_0x2dd009(0x22e)](_0x2dd009(0x279))));for(const _0x89f371 of _0x2a7b72){try{const _0x26a23=await this[_0x2dd009(0x28d)](_0x89f371['id']);if(_0x26a23){if(_0x26a23['ts']>=_0x112263-0x7d0){_0x23935b=_0x89f371['name']||_0x89f371['id'],_0x41b9d3=_0x2dd009(0x23d)+_0x23935b;break;}}}catch(_0xcb1200){}}const _0x557008={'timestamp':_0x112263,'pressure':_0x56bf42,'isMatch':!!_0x23935b,'explanation':_0x41b9d3,'type':_0x6df110};await this[_0x2dd009(0x209)](_0x557008),this[_0x2dd009(0x317)][_0x2dd009(0x326)](_0x2dd009(0x20c)+(!!_0x23935b?_0x2dd009(0x283):_0x2dd009(0x2a4)));},0x1388);}async[a0_0x15250a(0x2be)](_0x39f28b){const _0x1c6cb0=a0_0x15250a,_0x35d929=Date[_0x1c6cb0(0x2f5)](),_0x44e223=_0x39f28b[_0x1c6cb0(0x271)]||_0x39f28b['id']['split']('.')['pop']();let _0x18bc82=0x0;setTimeout(async()=>{const _0x53f58b=_0x1c6cb0;this[_0x53f58b(0x277)]['forEach'](_0x17862a=>{const _0x573a2c=_0x53f58b;_0x17862a['ts']>=_0x35d929-0xfa0&&_0x17862a['ts']<=_0x35d929+0x3e8&&(Math[_0x573a2c(0x29d)](_0x17862a[_0x573a2c(0x31d)])>Math['abs'](_0x18bc82)&&(_0x18bc82=_0x17862a['val']));});const _0x8b19bc=this[_0x53f58b(0x2bb)][_0x53f58b(0x270)]||0.04,_0x50fce7=Math[_0x53f58b(0x29d)](_0x18bc82)>=_0x8b19bc,_0x27cba8={'timestamp':_0x35d929,'pressure':_0x18bc82,'isMatch':_0x50fce7,'explanation':_0x53f58b(0x282)+_0x44e223,'type':'CALIB'};await this[_0x53f58b(0x209)](_0x27cba8),this[_0x53f58b(0x317)]['debug'](_0x53f58b(0x241)+_0x44e223+'\x20opened.\x20Peak\x20Pressure:\x20'+_0x18bc82[_0x53f58b(0x2f8)](0x4)+_0x53f58b(0x325)+_0x8b19bc+')');},0x1f4);}async[a0_0x15250a(0x209)](_0x28eb61){const _0x44265d=a0_0x15250a;try{const _0x7b2a5c=await this[_0x44265d(0x1f7)](_0x44265d(0x2ae));let _0x3d3583=[];if(_0x7b2a5c&&_0x7b2a5c['val'])_0x3d3583=JSON[_0x44265d(0x247)](_0x7b2a5c['val']);_0x3d3583[_0x44265d(0x1e5)](_0x28eb61);if(_0x3d3583['length']>0x14)_0x3d3583=_0x3d3583[_0x44265d(0x26e)](0x0,0x14);await this[_0x44265d(0x2cf)]('analysis.security.infrasoundLog',{'val':JSON['stringify'](_0x3d3583),'ack':!![]});}catch(_0x35dfa5){this[_0x44265d(0x317)][_0x44265d(0x302)](_0x44265d(0x235)+_0x35dfa5['message']);}}[a0_0x15250a(0x294)](_0x43a56d){const _0x3314ee=a0_0x15250a;this['config'][_0x3314ee(0x261)]&&this[_0x3314ee(0x2bb)][_0x3314ee(0x307)]&&this[_0x3314ee(0x2a7)](this[_0x3314ee(0x2bb)][_0x3314ee(0x307)],'send',{'message':_0x43a56d,'title':_0x3314ee(0x22d),'priority':0x1}),this[_0x3314ee(0x2bb)][_0x3314ee(0x1f2)]&&this[_0x3314ee(0x2bb)][_0x3314ee(0x301)]&&this[_0x3314ee(0x2a7)](this['config'][_0x3314ee(0x301)],_0x3314ee(0x28e),{'text':_0x43a56d});}}if(require[a0_0x15250a(0x2fa)]!==module)module[a0_0x15250a(0x2a1)]=_0x40be79=>new CogniLiving(_0x40be79);else new CogniLiving();