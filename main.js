const a0_0x7c25f0=a0_0x6ec4;(function(_0x5aed54,_0x2b14af){const _0x2c16c1=a0_0x6ec4,_0x593095=_0x5aed54();while(!![]){try{const _0x29b4c2=-parseInt(_0x2c16c1(0x18b))/0x1+parseInt(_0x2c16c1(0x17d))/0x2*(parseInt(_0x2c16c1(0x149))/0x3)+-parseInt(_0x2c16c1(0x1e9))/0x4+-parseInt(_0x2c16c1(0x22d))/0x5+-parseInt(_0x2c16c1(0x127))/0x6*(-parseInt(_0x2c16c1(0x1d1))/0x7)+parseInt(_0x2c16c1(0x1ba))/0x8*(-parseInt(_0x2c16c1(0x250))/0x9)+parseInt(_0x2c16c1(0x1c3))/0xa*(parseInt(_0x2c16c1(0x292))/0xb);if(_0x29b4c2===_0x2b14af)break;else _0x593095['push'](_0x593095['shift']());}catch(_0x5200c3){_0x593095['push'](_0x593095['shift']());}}}(a0_0x1007,0x32ba1));const a0_0xeea26a=(function(){let _0x58a38d=!![];return function(_0x7bc78c,_0x456f5f){const _0x516709=_0x58a38d?function(){const _0x263ca7=a0_0x6ec4;if(_0x456f5f){const _0x3f8ac6=_0x456f5f[_0x263ca7(0x1f7)](_0x7bc78c,arguments);return _0x456f5f=null,_0x3f8ac6;}}:function(){};return _0x58a38d=![],_0x516709;};}()),a0_0x320831=a0_0xeea26a(this,function(){const _0x1c5570=a0_0x6ec4;return a0_0x320831[_0x1c5570(0x225)]()[_0x1c5570(0x240)](_0x1c5570(0x162))[_0x1c5570(0x225)]()[_0x1c5570(0x193)](a0_0x320831)[_0x1c5570(0x240)]('(((.+)+)+)+$');});a0_0x320831();'use strict';const utils=require(a0_0x7c25f0(0x28c)),{GoogleGenerativeAI}=require(a0_0x7c25f0(0x207)),{spawn}=require(a0_0x7c25f0(0x11b)),path=require(a0_0x7c25f0(0x287)),fs=require('fs'),installer=require(a0_0x7c25f0(0x230)),scanner=require(a0_0x7c25f0(0x2a7)),schedulers=require('./lib/scheduler'),HISTORY_MAX_SIZE=0x32,RAW_LOG_MAX_SIZE=0x9c4,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL=a0_0x7c25f0(0x12f),SEQUENCE_TIMEOUT_MS=0x5*0x3c*0x3e8,MAX_TRAINING_SET_SIZE=0x1f4,THERMO_LOG_SIZE=0x3e8,EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,LTM_DP_RAW_LOG=a0_0x7c25f0(0x261),LTM_DP_DAILY_DIGESTS=a0_0x7c25f0(0x1be),LTM_DP_STATUS=a0_0x7c25f0(0x148),LTM_DP_TRIGGER_DIGEST=a0_0x7c25f0(0x21c),LTM_DP_BASELINE_STATUS='LTM.baselineStatus',LTM_DP_DRIFT_CHANNEL=a0_0x7c25f0(0x253),LTM_DP_DRIFT_STATUS='LTM.driftAnalysis.baselineDrift',LTM_DP_DRIFT_DETAILS=a0_0x7c25f0(0x22c),LTM_DP_DRIFT_LAST_CHECK='LTM.driftAnalysis.lastCheck',SYSTEM_DP_MODE='system.mode',SYSTEM_MODES={'NORMAL':a0_0x7c25f0(0x1e0),'VACATION':a0_0x7c25f0(0x24e),'PARTY':a0_0x7c25f0(0x24f),'GUEST':a0_0x7c25f0(0x1ee)},AUTO_RESET_MODES=[SYSTEM_MODES[a0_0x7c25f0(0x18f)],SYSTEM_MODES['GUEST']],PERSONA_MAPPING={'generic':'Analysiere\x20ausgewogen.','senior_aal':a0_0x7c25f0(0x280),'family':a0_0x7c25f0(0x201),'single_comfort':a0_0x7c25f0(0x10a),'security':a0_0x7c25f0(0x1ad)},ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};let activeSequence=[],sequenceTimer=null;async function initZombies(_0xee8790){const _0xc89294=a0_0x7c25f0;try{const _0x2c7a48=[_0xc89294(0x29f),_0xc89294(0x1db)];for(const _0x4c737f of _0x2c7a48){try{const _0x22b294=await _0xee8790[_0xc89294(0x208)](_0x4c737f);if(_0x22b294)await _0xee8790[_0xc89294(0x117)](_0x4c737f);}catch(_0x4fe5cb){}}}catch(_0x163209){}}async function checkLicense(_0x126228){return!![];}async function initHistory(_0x466d0f){const _0x2b2579=a0_0x7c25f0;try{const _0x15b20d=await _0x466d0f[_0x2b2579(0x19a)](_0x2b2579(0x19d));_0x15b20d&&_0x15b20d['val']&&(_0x466d0f[_0x2b2579(0x2a3)]=JSON['parse'](_0x15b20d[_0x2b2579(0x1cf)]['toString']()));}catch(_0x52a0aa){_0x466d0f['eventHistory']=[];}try{const _0x2b5ea3=await _0x466d0f[_0x2b2579(0x19a)]('analysis.analysisHistory');if(_0x2b5ea3&&_0x2b5ea3['val'])_0x466d0f[_0x2b2579(0x235)]=JSON[_0x2b2579(0x118)](_0x2b5ea3[_0x2b2579(0x1cf)]['toString']());}catch(_0x26355e){_0x466d0f[_0x2b2579(0x235)]=[];}if(_0x466d0f[_0x2b2579(0x2a3)]&&_0x466d0f[_0x2b2579(0x2a3)][_0x2b2579(0x241)]>0x0){_0x466d0f[_0x2b2579(0x1b7)][_0x2b2579(0x11e)](_0x2b2579(0x1ff));for(let _0x4e13e2=_0x466d0f[_0x2b2579(0x2a3)][_0x2b2579(0x241)]-0x1;_0x4e13e2>=0x0;_0x4e13e2--){const _0x49ecb8=_0x466d0f[_0x2b2579(0x2a3)][_0x4e13e2];if(_0x49ecb8&&_0x49ecb8['id']!==undefined&&_0x49ecb8[_0x2b2579(0x1b5)]!==undefined)_0x466d0f['sensorLastValues'][_0x49ecb8['id']]=_0x49ecb8[_0x2b2579(0x1b5)];}}}async function initSystemConfig(_0x3d06b7){const _0x1a2f7b=a0_0x7c25f0;try{const _0x338e32=await _0x3d06b7[_0x1a2f7b(0x190)](_0x1a2f7b(0x133));if(_0x338e32&&_0x338e32['common'])_0x3d06b7[_0x1a2f7b(0x1d8)]={'latitude':_0x338e32['common'][_0x1a2f7b(0x249)]||0x0,'longitude':_0x338e32[_0x1a2f7b(0x20a)][_0x1a2f7b(0x25b)]||0x0,'city':_0x338e32['common']['city']||''};}catch(_0x3021ba){}}async function createAllObjects(_0x5c48b9){const _0x324eba=a0_0x7c25f0;await _0x5c48b9['extendObjectAsync'](_0x324eba(0x248),{'type':_0x324eba(0x21a),'common':{'name':'System'},'native':{}}),await _0x5c48b9[_0x324eba(0x14c)](SYSTEM_DP_MODE,{'type':'state','common':{'name':'System\x20Mode','type':_0x324eba(0x157),'role':'state','read':!![],'write':!![],'def':SYSTEM_MODES['NORMAL']},'native':{}}),await _0x5c48b9[_0x324eba(0x122)](_0x324eba(0x17b),{'type':'state','common':{'name':_0x324eba(0x22f),'type':_0x324eba(0x157),'role':'text','read':!![],'write':![]},'native':{}}),await _0x5c48b9[_0x324eba(0x122)]('events.lastEvent',{'type':_0x324eba(0x188),'common':{'name':_0x324eba(0x299),'type':_0x324eba(0x157),'role':_0x324eba(0x206),'read':!![],'write':![]},'native':{}}),await _0x5c48b9[_0x324eba(0x122)](_0x324eba(0x19d),{'type':'state','common':{'name':'Event\x20History','type':_0x324eba(0x157),'role':_0x324eba(0x206),'read':!![],'write':![]},'native':{}}),await _0x5c48b9['extendObjectAsync'](_0x324eba(0x10b),{'type':_0x324eba(0x21a),'common':{'name':_0x324eba(0x1e1)},'native':{}}),await _0x5c48b9[_0x324eba(0x122)](_0x324eba(0x132),{'type':_0x324eba(0x188),'common':{'name':_0x324eba(0x272),'type':_0x324eba(0x1d9),'role':_0x324eba(0x1a5),'read':!![],'write':!![]},'native':{}}),await _0x5c48b9[_0x324eba(0x122)](_0x324eba(0x130),{'type':'state','common':{'name':_0x324eba(0x262),'type':_0x324eba(0x1d9),'role':_0x324eba(0x1a5),'read':!![],'write':!![]},'native':{}}),await _0x5c48b9[_0x324eba(0x122)](_0x324eba(0x144),{'type':_0x324eba(0x188),'common':{'name':_0x324eba(0x169),'type':_0x324eba(0x1d9),'role':_0x324eba(0x1a5),'read':!![],'write':!![]},'native':{}}),await _0x5c48b9[_0x324eba(0x122)](_0x324eba(0x2a4),{'type':_0x324eba(0x188),'common':{'name':_0x324eba(0x16a),'type':_0x324eba(0x1d9),'role':_0x324eba(0x1a5),'read':!![],'write':!![]},'native':{}}),await _0x5c48b9[_0x324eba(0x122)]('analysis.training.triggerTopology',{'type':'state','common':{'name':_0x324eba(0x252),'type':_0x324eba(0x1d9),'role':_0x324eba(0x1a5),'read':!![],'write':!![]},'native':{}}),await _0x5c48b9[_0x324eba(0x122)](_0x324eba(0x2ab),{'type':'state','common':{'name':_0x324eba(0x1de),'type':_0x324eba(0x157),'role':_0x324eba(0x1e8),'read':!![],'write':![]},'native':{}}),await _0x5c48b9[_0x324eba(0x14c)]('analysis.security',{'type':_0x324eba(0x21a),'common':{'name':'Security\x20Monitor'},'native':{}}),await _0x5c48b9[_0x324eba(0x122)](_0x324eba(0x119),{'type':'state','common':{'name':_0x324eba(0x25a),'type':'number','role':_0x324eba(0x1b5),'read':!![],'write':![]},'native':{}}),await _0x5c48b9['setObjectNotExistsAsync']('analysis.security.currentThreshold',{'type':_0x324eba(0x188),'common':{'name':_0x324eba(0x17c),'type':_0x324eba(0x18e),'role':'value','read':!![],'write':![],'def':0.05},'native':{}}),await _0x5c48b9[_0x324eba(0x122)](_0x324eba(0x1a0),{'type':_0x324eba(0x188),'common':{'name':_0x324eba(0x23d),'type':_0x324eba(0x157),'role':_0x324eba(0x2ac),'read':!![],'write':![]},'native':{}}),await _0x5c48b9[_0x324eba(0x122)](_0x324eba(0x151),{'type':_0x324eba(0x188),'common':{'name':_0x324eba(0x2aa),'type':'string','role':_0x324eba(0x206),'read':!![],'write':![]},'native':{}}),await _0x5c48b9['extendObjectAsync'](_0x324eba(0x16c),{'type':_0x324eba(0x21a),'common':{'name':'Health\x20Analysis'},'native':{}}),await _0x5c48b9[_0x324eba(0x122)](_0x324eba(0x11d),{'type':_0x324eba(0x188),'common':{'name':_0x324eba(0x23d),'type':_0x324eba(0x157),'role':'date','read':!![],'write':![]},'native':{}}),await _0x5c48b9['setObjectNotExistsAsync'](_0x324eba(0x141),{'type':_0x324eba(0x188),'common':{'name':_0x324eba(0x16d),'type':'boolean','role':_0x324eba(0x16b),'read':!![],'write':![]},'native':{}}),await _0x5c48b9[_0x324eba(0x122)](_0x324eba(0x14f),{'type':_0x324eba(0x188),'common':{'name':_0x324eba(0x26b),'type':'string','role':_0x324eba(0x1e8),'read':!![],'write':![]},'native':{}}),await _0x5c48b9['setObjectNotExistsAsync'](_0x324eba(0x150),{'type':_0x324eba(0x188),'common':{'name':_0x324eba(0x1c8),'type':'number','role':'value','read':!![],'write':![]},'native':{}}),await _0x5c48b9[_0x324eba(0x122)](_0x324eba(0x1f1),{'type':_0x324eba(0x188),'common':{'name':_0x324eba(0x166),'type':_0x324eba(0x157),'role':_0x324eba(0x206),'read':!![],'write':![]},'native':{}}),await _0x5c48b9[_0x324eba(0x122)](_0x324eba(0x2a6),{'type':_0x324eba(0x188),'common':{'name':'Gait\x20Speed\x20Trend','type':'number','role':_0x324eba(0x1b5),'read':!![],'write':![]},'native':{}}),await _0x5c48b9[_0x324eba(0x14c)](_0x324eba(0x13b),{'type':_0x324eba(0x21a),'common':{'name':_0x324eba(0x260)},'native':{}}),await _0x5c48b9[_0x324eba(0x122)]('analysis.energy.insulationScore',{'type':_0x324eba(0x188),'common':{'name':_0x324eba(0x218),'type':_0x324eba(0x157),'role':_0x324eba(0x1e8),'read':!![],'write':![]},'native':{}}),await _0x5c48b9[_0x324eba(0x122)](_0x324eba(0x285),{'type':_0x324eba(0x188),'common':{'name':_0x324eba(0x2a8),'type':'string','role':'text','read':!![],'write':![]},'native':{}}),await _0x5c48b9[_0x324eba(0x122)](_0x324eba(0x15a),{'type':_0x324eba(0x188),'common':{'name':_0x324eba(0x153),'type':_0x324eba(0x157),'role':'json','read':!![],'write':![]},'native':{}}),await _0x5c48b9['extendObjectAsync'](_0x324eba(0x279),{'type':_0x324eba(0x21a),'common':{'name':_0x324eba(0x279)},'native':{}}),await _0x5c48b9[_0x324eba(0x14c)](LTM_DP_RAW_LOG,{'type':_0x324eba(0x188),'common':{'name':_0x324eba(0x1a8),'type':_0x324eba(0x157),'role':_0x324eba(0x206),'read':!![],'write':![]},'native':{}}),await _0x5c48b9['extendObjectAsync'](LTM_DP_DAILY_DIGESTS,{'type':'state','common':{'name':_0x324eba(0x1e4),'type':_0x324eba(0x157),'role':'json','read':!![],'write':![]},'native':{}}),await _0x5c48b9['setObjectNotExistsAsync'](_0x324eba(0x173),{'type':_0x324eba(0x188),'common':{'name':_0x324eba(0x1dd),'type':_0x324eba(0x157),'role':_0x324eba(0x206),'read':!![],'write':![]},'native':{}}),await _0x5c48b9['setObjectNotExistsAsync'](_0x324eba(0x298),{'type':'state','common':{'name':_0x324eba(0x246),'type':_0x324eba(0x157),'role':_0x324eba(0x206),'read':!![],'write':![]},'native':{}}),await _0x5c48b9['setObjectNotExistsAsync']('analysis.trigger',{'type':_0x324eba(0x188),'common':{'name':_0x324eba(0x112),'type':_0x324eba(0x1d9),'role':'button','read':!![],'write':!![]},'native':{}}),await _0x5c48b9[_0x324eba(0x122)](_0x324eba(0x121),{'type':_0x324eba(0x188),'common':{'name':_0x324eba(0x23e),'type':'boolean','role':'button','read':!![],'write':!![]},'native':{}}),await _0x5c48b9[_0x324eba(0x122)](_0x324eba(0x200),{'type':_0x324eba(0x188),'common':{'name':_0x324eba(0x234),'type':_0x324eba(0x1d9),'role':_0x324eba(0x263),'read':!![],'write':![]},'native':{}}),await _0x5c48b9['setObjectNotExistsAsync'](_0x324eba(0x1d2),{'type':_0x324eba(0x188),'common':{'name':_0x324eba(0x12a),'type':_0x324eba(0x157),'role':_0x324eba(0x1b1),'read':!![],'write':![]},'native':{}}),await _0x5c48b9['setObjectNotExistsAsync'](_0x324eba(0x1dc),{'type':_0x324eba(0x188),'common':{'name':_0x324eba(0x2a2),'type':'string','role':_0x324eba(0x1e8),'read':!![],'write':![]},'native':{}}),await _0x5c48b9[_0x324eba(0x122)](_0x324eba(0x155),{'type':'state','common':{'name':_0x324eba(0x26d),'type':_0x324eba(0x1d9),'role':'indicator','read':!![],'write':![]},'native':{}}),await _0x5c48b9['setObjectNotExistsAsync']('analysis.automation.description',{'type':_0x324eba(0x188),'common':{'name':_0x324eba(0x10c),'type':'string','role':_0x324eba(0x1e8),'read':!![],'write':![]},'native':{}}),await _0x5c48b9[_0x324eba(0x122)](_0x324eba(0x21e),{'type':_0x324eba(0x188),'common':{'name':_0x324eba(0x223),'type':_0x324eba(0x157),'role':_0x324eba(0x206),'read':!![],'write':![]},'native':{}}),await _0x5c48b9[_0x324eba(0x122)](_0x324eba(0x273),{'type':'state','common':{'name':'Target\x20ID','type':'string','role':_0x324eba(0x1e8),'read':!![],'write':![]},'native':{}}),await _0x5c48b9[_0x324eba(0x122)](_0x324eba(0x286),{'type':_0x324eba(0x188),'common':{'name':_0x324eba(0x11f),'type':_0x324eba(0x157),'role':'text','read':!![],'write':![]},'native':{}}),await _0x5c48b9['setObjectNotExistsAsync']('analysis.automation.autoApply',{'type':_0x324eba(0x188),'common':{'name':'Auto\x20Apply','type':'boolean','role':_0x324eba(0x1aa),'read':!![],'write':!![]},'native':{}}),await _0x5c48b9['setObjectNotExistsAsync'](_0x324eba(0x123),{'type':_0x324eba(0x188),'common':{'name':'Trigger\x20Action','type':_0x324eba(0x1d9),'role':_0x324eba(0x1a5),'read':!![],'write':!![]},'native':{}});}async function loadSystemMode(_0x4d949e){const _0x5b6308=a0_0x7c25f0;try{const _0x5bc65b=await _0x4d949e[_0x5b6308(0x19a)](SYSTEM_DP_MODE);_0x5bc65b&&_0x5bc65b[_0x5b6308(0x1cf)]&&Object[_0x5b6308(0x15e)](SYSTEM_MODES)[_0x5b6308(0x10e)](_0x5bc65b[_0x5b6308(0x1cf)])?_0x4d949e[_0x5b6308(0x1ac)]=_0x5bc65b[_0x5b6308(0x1cf)]:(_0x4d949e['currentSystemMode']=SYSTEM_MODES[_0x5b6308(0x25c)],await _0x4d949e['setStateAsync'](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x5b6308(0x25c)],'ack':!![]}));}catch(_0x2f6775){_0x4d949e['currentSystemMode']=SYSTEM_MODES[_0x5b6308(0x25c)];}}async function loadRawEventLog(_0x33b042){const _0x337578=a0_0x7c25f0;try{const _0x20bba7=await _0x33b042['getStateAsync'](LTM_DP_RAW_LOG);if(_0x20bba7&&_0x20bba7[_0x337578(0x1cf)])_0x33b042[_0x337578(0x294)]=JSON[_0x337578(0x118)](_0x20bba7[_0x337578(0x1cf)]);}catch(_0x41a111){_0x33b042[_0x337578(0x294)]=[];}}async function saveRawEventLog(_0x41fd82){const _0xfb0f84=a0_0x7c25f0;if(_0x41fd82[_0xfb0f84(0x294)]['length']>RAW_LOG_MAX_SIZE)_0x41fd82[_0xfb0f84(0x294)][_0xfb0f84(0x203)](0x0,_0x41fd82[_0xfb0f84(0x294)][_0xfb0f84(0x241)]-RAW_LOG_MAX_SIZE);await _0x41fd82[_0xfb0f84(0x2b0)](LTM_DP_RAW_LOG,{'val':JSON[_0xfb0f84(0x111)](_0x41fd82[_0xfb0f84(0x294)]),'ack':!![]});}async function loadDailyDigests(_0x1bdefa){const _0x106c04=a0_0x7c25f0;try{const _0x506276=await _0x1bdefa[_0x106c04(0x19a)](LTM_DP_DAILY_DIGESTS);if(_0x506276&&_0x506276[_0x106c04(0x1cf)])_0x1bdefa[_0x106c04(0x129)]=JSON[_0x106c04(0x118)](_0x506276[_0x106c04(0x1cf)]);}catch(_0x16fd75){_0x1bdefa[_0x106c04(0x129)]=[];}await updateBaselineStatus(_0x1bdefa);}async function saveDailyDigests(_0x21eedc,_0x55d51d=!![]){const _0x3abe38=a0_0x7c25f0,_0x1773d5=_0x21eedc[_0x3abe38(0x138)][_0x3abe38(0x1b6)]||0x3c;_0x21eedc[_0x3abe38(0x129)][_0x3abe38(0x241)]>_0x1773d5&&_0x21eedc[_0x3abe38(0x129)]['splice'](0x0,_0x21eedc[_0x3abe38(0x129)][_0x3abe38(0x241)]-_0x1773d5);await _0x21eedc[_0x3abe38(0x2b0)](LTM_DP_DAILY_DIGESTS,{'val':JSON['stringify'](_0x21eedc[_0x3abe38(0x129)]),'ack':!![]});if(_0x55d51d)await updateBaselineStatus(_0x21eedc);}async function updateAnalysisHistory(_0x2c9714,_0x754b73){const _0x10bff7=a0_0x7c25f0;_0x2c9714[_0x10bff7(0x235)]['unshift'](_0x754b73);if(_0x2c9714[_0x10bff7(0x235)][_0x10bff7(0x241)]>HISTORY_MAX_SIZE)_0x2c9714['analysisHistory'][_0x10bff7(0x288)]();await _0x2c9714[_0x10bff7(0x2b0)](_0x10bff7(0x27b),{'val':JSON[_0x10bff7(0x111)](_0x2c9714[_0x10bff7(0x235)]),'ack':!![]});}async function updateBaselineStatus(_0x332126){const _0x9dd4ec=a0_0x7c25f0;if(!_0x332126['isProVersion']){await _0x332126[_0x9dd4ec(0x2b0)](LTM_DP_BASELINE_STATUS,{'val':_0x9dd4ec(0x224),'ack':!![]});return;}const _0x4f908c=_0x332126[_0x9dd4ec(0x129)]['length']>=(_0x332126[_0x9dd4ec(0x138)][_0x9dd4ec(0x1c4)]||0x7)?'Aktiv\x20('+_0x332126[_0x9dd4ec(0x129)]['length']+_0x9dd4ec(0x177):_0x9dd4ec(0x239)+_0x332126[_0x9dd4ec(0x129)][_0x9dd4ec(0x241)]+'/'+(_0x332126[_0x9dd4ec(0x138)][_0x9dd4ec(0x1c4)]||0x7)+')';await _0x332126[_0x9dd4ec(0x2b0)](LTM_DP_BASELINE_STATUS,{'val':_0x4f908c,'ack':!![]});}async function initSensorSubscriptions(_0x3f70b5){const _0x21a8dd=a0_0x7c25f0,_0x1a69ab=_0x3f70b5[_0x21a8dd(0x138)]['devices'];if(_0x1a69ab)for(const _0x15c721 of _0x1a69ab){await _0x3f70b5[_0x21a8dd(0x1b8)](_0x15c721['id']);}}async function initPresenceSubscriptions(_0x34eebe){const _0x5563b2=a0_0x7c25f0,_0x15ec35=_0x34eebe[_0x5563b2(0x138)][_0x5563b2(0x131)];if(_0x15ec35)for(const _0x29700a of _0x15ec35){await _0x34eebe[_0x5563b2(0x1b8)](_0x29700a);}}async function setupTelegramListener(_0x257d41){const _0x1093f6=a0_0x7c25f0,_0x4118be=_0x257d41[_0x1093f6(0x138)][_0x1093f6(0x296)];if(_0x257d41[_0x1093f6(0x138)][_0x1093f6(0x15f)]&&_0x4118be)await _0x257d41[_0x1093f6(0x1b8)](_0x4118be+_0x1093f6(0x142));}async function checkWifiPresence(_0x54655b){const _0x697111=a0_0x7c25f0;try{const _0x324188=_0x54655b[_0x697111(0x138)]['presenceDevices']||[];let _0x5a52c3=![];const _0x9b2f35=[];for(const _0xee79a3 of _0x324188){try{const _0x3f6a22=await _0x54655b['getForeignStateAsync'](_0xee79a3);_0x3f6a22&&(_0x3f6a22['val']===!![]||_0x3f6a22[_0x697111(0x1cf)]===_0x697111(0x145)||_0x3f6a22[_0x697111(0x1cf)]===0x1)&&(_0x5a52c3=!![],_0x9b2f35[_0x697111(0x26f)](_0xee79a3));}catch(_0x263daa){}}return await _0x54655b[_0x697111(0x2b0)](_0x697111(0x17b),{'val':_0x9b2f35[_0x697111(0x120)](',\x20'),'ack':!![]}),_0x5a52c3&&(_0x54655b[_0x697111(0x27d)]&&(_0x54655b[_0x697111(0x1b7)][_0x697111(0x11e)]('WiFi\x20Presence\x20detected.'),abortExitTimer(_0x54655b)),!_0x54655b[_0x697111(0x165)]&&_0x54655b[_0x697111(0x1ac)]===SYSTEM_MODES[_0x697111(0x25c)]&&await setPresence(_0x54655b,!![])),_0x5a52c3;}catch(_0x291b60){return![];}}function startExitTimer(_0x20ecb9){const _0x56555a=a0_0x7c25f0;abortExitTimer(_0x20ecb9),_0x20ecb9[_0x56555a(0x226)]=!![],_0x20ecb9['exitGraceTimer']=setTimeout(()=>{const _0x73a233=_0x56555a;_0x20ecb9[_0x73a233(0x226)]=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),_0x20ecb9[_0x56555a(0x27d)]=setTimeout(()=>{const _0x3455fe=_0x56555a;setPresence(_0x20ecb9,![]),_0x20ecb9[_0x3455fe(0x27d)]=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}function a0_0x1007(){const _0x285654=['floor','includes','Kein\x20API\x20Key!','N/A','stringify','Trigger\x20Analysis','COMFORT_RESULT',')\x20-\x20SAFE\x20BOOT','analysis.energy.insulationScore','scanForDevices','delObjectAsync','parse','analysis.security.lastScore','ANALYZE_TREND','child_process','generic','analysis.health.lastCheck','info','Target\x20Value','join','analysis.triggerBriefing','setObjectNotExistsAsync','analysis.automation.triggerAction','python3','Sec-Training\x20started...','genAI','113676sNnkMk','onUnload','dailyDigests','Alert\x20Reason','.\x20ANWESEND:\x20','ANALYZE_GAIT','ðŸ\x20Python\x20Pong','cancel','models/gemini-flash-latest','analysis.training.triggerHealth','presenceDevices','analysis.training.triggerSecurity','system.config','ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...','lastAlertState','analysisInterval','ENERGY_PREDICT_RESULT','config','systemUUID','isExit','analysis.energy','Kalender\x20deaktiviert.','isAlert','PREDICT_ENERGY','kill','ðŸ›‹ï¸\x20BUTLER:\x20Found\x20','analysis.health.isAnomaly','.communicate.request','ðŸ•¸ï¸\x20Topology\x20Map\x20updated.','analysis.training.triggerEnergy','online','insulation','light','LTM.processingStatus','6IqnQWE','analysis.lastResult','No\x20instance','extendObjectAsync','ENERGY_TRAIN_RESULT','occupancy','analysis.health.trendDiagnosis','analysis.health.trendValue','analysis.security.topologyMatrix','Digest','Temperature\x20Forecast','.Current.WeatherText','analysis.automation.patternDetected','map','string','exitGraceTimer','threshold','analysis.energy.forecast','.Current.Temperature','Gemini\x20Init\x20Error:\x20','close','values','notifyTelegramEnabled','automationProposal','version','(((.+)+)+)+$','\x0aSTB:\x20','PYTHON_EXE','isPresent','Today\x20Vector\x20(15m)','.NextHours.Location_1.Day_1.current.temp_value','name','Train\x20Energy','Train\x20Comfort','indicator','analysis.health','Anomaly\x20Detected','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','stateChange','onMessage','detected','SIMULATION:\x20Test-Vorschlag\x20fÃ¼r\x20','LTM.trainingData.sequences','licenseKey','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','BUILD_TOPOLOGY','\x20Tage)','object','location','unshift','system.presenceWho','Current\x20Threshold','156146GnCirf','KI-Modell\x20nicht\x20initialisiert','success','endsWith','Success','unknown','getEnums','ltmJob','scanDevices','temperatur','checkAndInstall','state','subscribeStates','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','148646zkOWeb','.\x20KONTEXT:\x20','Briefing\x20Error:\x20','number','PARTY','getForeignObjectAsync','door','[RECORDER]\x20Error:\x20','constructor','modeResetJob','toISOString','heating','trim','TRAIN_ENERGY','keys','getStateAsync','SECURITY_RESULT','VACATION','events.history','setupBriefingScheduler','getCalendarNames','analysis.security.lastCheck','toFixed','system.isPresent','Err:\x20','weatherunderground','button','dismissAutomation','Skipped\x20(No\x20AI\x20or\x20Data)','Raw\x20Log','enum.rooms.*','switch','prÃ¤senz','currentSystemMode','PRIORITÃ„T:\x20Sicherheit.','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','getForeignStateAsync','.\x20WETTER:\x20','text.alarm','ðŸ§ \x20Triggering\x20Security\x20Training...','TREND_RESULT','Kein\x20API\x20Key.','value','ltmLtbWindowDays','log','subscribeForeignStatesAsync','from','1200520DNqpPl','events.lastEvent','message','confidence','LTM.dailyDigests','getGenerativeModel','schalter','getDate','âš ï¸\x20SECURITY\x20ALARM:\x20','8250apywQm','minDaysForBaseline','enum.functions.*','pythonProcess','reason','Trend\x20Value','loc','telegram','setupModeResetScheduler','ANOMALY','generateContent','analysis.training.triggerTopology','val','TRAIN_SECURITY','70UQPMmF','analysis.alertReason','triggerBriefing','getForeignObjectsAsync','slice','fenster','getFullYear','systemConfig','boolean','timestamp','events.history_debug_00','analysis.activitySummary','Sequences','Training\x20Status','Missing\x20data','normal','AI\x20Training','substring','analysis.automation.autoApply','Daily\x20Digests','startsWith','Keine\x20Details.','ðŸš€\x20Starting\x20NUUKANNI\x20Logic\x20(v0.12.10)...','text','316044xchhIj','bewegung','Gemini\x20Error:\x20','submitFeedback','analysisTimer','guest','useCalendar','Started...','analysis.health.todayVector','details','presence','sendTo','ANALYZE_SEQUENCE','ltmStbWindowDays','apply','change_percent','toLowerCase','setupDriftAnalysisScheduler','application/json','enum','geminiApiKey','fill','Restoring\x20sensor\x20cache...','analysis.isAlert','Fokus\x20auf\x20Familienroutinen.','useWeather','splice','ðŸ›‹ï¸\x20BUTLER:\x20Keine\x20neuen\x20Muster\x20gefunden.','response','json','@google/generative-ai','getObjectAsync','description','common','cogni-living\x20adapter\x20starting\x20(v','[LOG]','rating','ðŸ›¡ï¸\x20SECURITY\x20CHECK:\x20Score\x20','ANALYZE_HEALTH','[RESULT]','round','Â°C,\x20','some','motion','aiPersona','devices','data','Insulation\x20Score','automation.triggerAction','channel','write','LTM.triggerDailyDigest','onStateChange','analysis.automation.detectedPatterns','main','callback','python_service','contact','Detected\x20Patterns','Deaktiviert\x20(Pro-Feature)','toString','isGracePeriodActive','HEALTH_TRAIN_RESULT','baselineDrift','testApiKey','accuweather','activityLevel','LTM.driftAnalysis.driftDetails','306160VSacDI','split','Who\x20is\x20present?','./lib/installer','bind','is_anomaly','error','Alert\x20Status','analysisHistory','[PYTHON]\x20','getHours','HEALTH_RESULT','Lernphase\x20(','ready','inactivityThresholdHours','N/A\x20(Learning)','Last\x20Check','Trigger\x20Briefing','targetId','search','length','find','service.py','TRAIN_COMFORT','toLocaleTimeString','Thermodynamics','ack','system','latitude','isProVersion','ðŸ›‹ï¸\x20Triggering\x20Comfort\x20Analysis\x20(Pattern\x20Mining)...','cogni-living','ðŸ§ª\x20Simulating\x20Butler\x20Proposal:\x20','vacation','party','9nsXBtF','daswetter','Build\x20Topology','LTM.driftAnalysis','autoApply','payload','isEmergency','setupLtmScheduler','targetValue','.\x20SYSTEM_MODE:\x20','Anomaly\x20Score','longitude','NORMAL','simulateButler','\x20=\x20','command','Energy\x20Intelligence','LTM.rawEventLog','Train\x20Health','indicator.alarm','debug','Gemini\x20AI\x20initialized.','rule','communicate.request','writable','temperature','setHours','Trend','shift','Pattern\x20Detected','Activity-Level','push','analysis.trigger','heizung','Train\x20Security','analysis.automation.targetId','setState','dimmer','briefingJob','alertReason','filter','LTM','ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','analysis.analysisHistory','TRAIN_HEALTH','exitTimer','ðŸ•¸ï¸\x20Building\x20Topology\x20Matrix...','stdout','PRIORITÃ„T:\x20Gesundheit/AAL.','Unknown','weatherInstance','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','instance','analysis.energy.heatingScore','analysis.automation.targetValue','path','pop','stdin','BUTLER\x20Execution\x20Error:\x20','PONG','@iobroker/adapter-core','type','analysis.security.currentThreshold','geminiModel','driftAnalysisTimer','apiKey','4015efdkjA','diagnosis','rawEventLog','kontakt','notifyTelegramInstance','sensorLastValues','LTM.trainingData.thermodynamics','Last\x20raw\x20event','analysis.automation.description','lampe','ðŸ“\x20Feedback\x20received:\x20','summary','now','analysis.history_debug_00','Unbekannt','warn','Activity\x20Summary','eventHistory','analysis.training.triggerComfort','replace','analysis.health.gaitSpeed','./lib/scanner','Heating\x20Score','calendarInstance','Topology\x20Matrix','analysis.training.status','date','.\x20EMERGENCY:\x20','status','forEach','setStateAsync','Fokus\x20auf\x20Komfort.','analysis.training','Description'];a0_0x1007=function(){return _0x285654;};return a0_0x1007();}function abortExitTimer(_0x36212e){const _0x5334dd=a0_0x7c25f0;if(_0x36212e[_0x5334dd(0x27d)])clearTimeout(_0x36212e[_0x5334dd(0x27d)]);if(_0x36212e[_0x5334dd(0x158)])clearTimeout(_0x36212e[_0x5334dd(0x158)]);_0x36212e[_0x5334dd(0x27d)]=null,_0x36212e[_0x5334dd(0x158)]=null,_0x36212e[_0x5334dd(0x226)]=![];}async function setPresence(_0x18fe2f,_0x82614a){const _0x44d8d0=a0_0x7c25f0;if(_0x18fe2f[_0x44d8d0(0x165)]===_0x82614a)return;_0x18fe2f[_0x44d8d0(0x165)]=_0x82614a,await _0x18fe2f[_0x44d8d0(0x2b0)](_0x44d8d0(0x1a2),{'val':_0x82614a,'ack':!![]});}async function executeAutomationAction(_0x27f5a2){const _0x5f3086=a0_0x7c25f0;try{const _0x512e7c=await _0x27f5a2[_0x5f3086(0x19a)](_0x5f3086(0x273)),_0x503038=await _0x27f5a2['getStateAsync'](_0x5f3086(0x286));if(_0x512e7c&&_0x512e7c[_0x5f3086(0x1cf)]&&_0x503038){const _0xa7a83c=_0x512e7c[_0x5f3086(0x1cf)];let _0x5a183c=_0x503038[_0x5f3086(0x1cf)];try{_0x5a183c=JSON[_0x5f3086(0x118)](_0x5a183c);}catch(_0x1e8b11){}_0x27f5a2['log']['info']('ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20'+_0xa7a83c+'\x20=\x20'+_0x5a183c),await _0x27f5a2['setForeignStateAsync'](_0xa7a83c,_0x5a183c);}else _0x27f5a2[_0x5f3086(0x1b7)][_0x5f3086(0x2a1)](_0x5f3086(0x27a));}catch(_0x175166){_0x27f5a2[_0x5f3086(0x1b7)][_0x5f3086(0x233)](_0x5f3086(0x28a)+_0x175166[_0x5f3086(0x1bc)]);}}async function processSensorEvent(_0x6c1698,_0x155c50,_0x5f32b2,_0x1b1ad4){const _0x3f71ac=a0_0x7c25f0;if(!_0x1b1ad4)return;const _0x89c0bb=_0x5f32b2[_0x3f71ac(0x1cf)],_0x190066=Date[_0x3f71ac(0x29e)](),_0x35c6ed=_0x6c1698[_0x3f71ac(0x297)][_0x155c50];_0x6c1698['sensorLastValues'][_0x155c50]=_0x89c0bb;if(!_0x1b1ad4['logDuplicates']&&_0x35c6ed!=undefined&&_0x35c6ed==_0x89c0bb)return;const _0x5c25fe=(_0x1b1ad4[_0x3f71ac(0x28d)]||'')[_0x3f71ac(0x1f9)](),_0x1ae95b=_0x5c25fe['includes'](_0x3f71ac(0x269))||_0x5c25fe[_0x3f71ac(0x10e)](_0x3f71ac(0x186))||_0x5c25fe[_0x3f71ac(0x10e)]('klima')||_0x5c25fe[_0x3f71ac(0x10e)](_0x3f71ac(0x271));_0x6c1698['isProVersion']&&_0x1ae95b&&recordThermodynamics(_0x6c1698,_0x155c50,_0x89c0bb,_0x1b1ad4[_0x3f71ac(0x179)]);const _0x3cd821={'timestamp':_0x190066,'id':_0x155c50,'name':_0x1b1ad4['name'],'type':_0x1b1ad4[_0x3f71ac(0x28d)],'location':_0x1b1ad4[_0x3f71ac(0x179)],'value':_0x89c0bb};_0x6c1698[_0x3f71ac(0x2a3)][_0x3f71ac(0x17a)](_0x3cd821);if(_0x6c1698[_0x3f71ac(0x2a3)][_0x3f71ac(0x241)]>HISTORY_MAX_SIZE)_0x6c1698[_0x3f71ac(0x2a3)][_0x3f71ac(0x288)]();await _0x6c1698[_0x3f71ac(0x2b0)](_0x3f71ac(0x1bb),{'val':JSON[_0x3f71ac(0x111)](_0x3cd821),'ack':!![]}),await _0x6c1698[_0x3f71ac(0x2b0)](_0x3f71ac(0x19d),{'val':JSON[_0x3f71ac(0x111)](_0x6c1698[_0x3f71ac(0x2a3)]),'ack':!![]});_0x6c1698['isProVersion']&&(_0x6c1698[_0x3f71ac(0x294)]['push'](_0x3cd821),await saveRawEventLog(_0x6c1698),recordSequence(_0x6c1698,_0x3cd821));if(_0x1b1ad4[_0x3f71ac(0x13a)]&&_0x89c0bb===!![]){if(_0x6c1698[_0x3f71ac(0x165)]&&!_0x6c1698[_0x3f71ac(0x226)])startExitTimer(_0x6c1698);else{if(!_0x6c1698[_0x3f71ac(0x165)])setPresence(_0x6c1698,!![]);}}else{if(_0x1b1ad4[_0x3f71ac(0x28d)]===_0x3f71ac(0x214)&&_0x89c0bb===!![]){if(_0x6c1698['exitTimer'])abortExitTimer(_0x6c1698);if(!_0x6c1698['isPresent']&&_0x6c1698['currentSystemMode']===SYSTEM_MODES[_0x3f71ac(0x25c)])setPresence(_0x6c1698,!![]);}}}async function recordThermodynamics(_0x15e9a4,_0xdcddfc,_0x57b87b,_0x19e1b4){const _0x43a844=a0_0x7c25f0,_0xcf3b09=await getOutsideTemperatureNumeric(_0x15e9a4),_0x5f090e=await _0x15e9a4['getStateAsync'](_0x43a844(0x298));let _0x5d0c08=[];if(_0x5f090e&&_0x5f090e[_0x43a844(0x1cf)])try{_0x5d0c08=JSON[_0x43a844(0x118)](_0x5f090e[_0x43a844(0x1cf)]);}catch(_0x3bae0f){}_0x5d0c08['push']({'ts':Date['now'](),'room':_0x19e1b4||_0x43a844(0x281),'t_in':_0x57b87b,'t_out':_0xcf3b09});if(_0x5d0c08[_0x43a844(0x241)]>THERMO_LOG_SIZE)_0x5d0c08[_0x43a844(0x26c)]();await _0x15e9a4[_0x43a844(0x2b0)]('LTM.trainingData.thermodynamics',{'val':JSON[_0x43a844(0x111)](_0x5d0c08),'ack':!![]});}async function getOutsideTemperatureNumeric(_0xb25420){const _0x44a08b=a0_0x7c25f0;if(_0xb25420[_0x44a08b(0x138)]['outdoorSensorId'])try{const _0x37f2da=await _0xb25420[_0x44a08b(0x1af)](_0xb25420[_0x44a08b(0x138)]['outdoorSensorId']);if(_0x37f2da&&_0x37f2da[_0x44a08b(0x1cf)]!==undefined&&_0x37f2da[_0x44a08b(0x1cf)]!==null)return parseFloat(_0x37f2da[_0x44a08b(0x1cf)]);}catch(_0x45c2ec){}const _0x55e168=_0xb25420[_0x44a08b(0x138)]['weatherInstance'];if(!_0xb25420[_0x44a08b(0x138)][_0x44a08b(0x202)]||!_0x55e168)return null;try{let _0x196652='';if(_0x55e168['includes'](_0x44a08b(0x22a)))_0x196652=_0x55e168+_0x44a08b(0x15b);else{if(_0x55e168[_0x44a08b(0x10e)](_0x44a08b(0x251)))_0x196652=_0x55e168+_0x44a08b(0x167);else{if(_0x55e168['includes']('openweathermap'))_0x196652=_0x55e168+'.forecast.current.temperature';else{if(_0x55e168[_0x44a08b(0x10e)](_0x44a08b(0x1a4)))_0x196652=_0x55e168+'.forecast.current.temp';}}}if(_0x196652){const _0x5c9ea4=await _0xb25420[_0x44a08b(0x1af)](_0x196652);if(_0x5c9ea4&&_0x5c9ea4[_0x44a08b(0x1cf)]!==undefined&&_0x5c9ea4[_0x44a08b(0x1cf)]!==null)return parseFloat(_0x5c9ea4[_0x44a08b(0x1cf)]);}}catch(_0x1f4051){}return null;}async function recordSequence(_0x4a005c,_0x16f555){const _0x160ff8=a0_0x7c25f0,_0x5163b1=(_0x16f555[_0x160ff8(0x28d)]||'')[_0x160ff8(0x1f9)](),_0x376697=[_0x160ff8(0x214),_0x160ff8(0x1ea),_0x160ff8(0x1ab),_0x160ff8(0x1f3),_0x160ff8(0x14e),_0x160ff8(0x191),'tÃ¼r','window',_0x160ff8(0x1d6),_0x160ff8(0x222),_0x160ff8(0x295),_0x160ff8(0x147),'licht','switch',_0x160ff8(0x1c0),_0x160ff8(0x275),_0x160ff8(0x29b)];if(!_0x376697[_0x160ff8(0x213)](_0x1b5f04=>_0x5163b1[_0x160ff8(0x10e)](_0x1b5f04)))return;if(!_0x16f555[_0x160ff8(0x1b5)])return;if(sequenceTimer)clearTimeout(sequenceTimer);activeSequence[_0x160ff8(0x26f)]({'loc':_0x16f555[_0x160ff8(0x179)]||_0x160ff8(0x281),'id':_0x16f555['id'],'ts':Date[_0x160ff8(0x29e)]()}),sequenceTimer=setTimeout(async()=>{if(activeSequence['length']>0x1)await saveCompletedSequence(_0x4a005c);activeSequence=[];},SEQUENCE_TIMEOUT_MS);}async function saveCompletedSequence(_0x4f5d66){const _0x5bc25d=a0_0x7c25f0;try{const _0x56366e=await _0x4f5d66[_0x5bc25d(0x19a)](_0x5bc25d(0x173));let _0x2a5f6d=[];if(_0x56366e&&_0x56366e[_0x5bc25d(0x1cf)])try{_0x2a5f6d=JSON[_0x5bc25d(0x118)](_0x56366e[_0x5bc25d(0x1cf)]);}catch(_0x407f50){}const _0x5be1de=activeSequence[0x0]['ts'],_0x43f3bb=activeSequence[_0x5bc25d(0x156)](_0x31a35f=>({'loc':_0x31a35f[_0x5bc25d(0x1c9)],'t_delta':Math['round']((_0x31a35f['ts']-_0x5be1de)/0x3e8)})),_0x563319={'timestamp':new Date(_0x5be1de)[_0x5bc25d(0x195)](),'steps':_0x43f3bb,'duration':Math[_0x5bc25d(0x211)]((activeSequence[activeSequence[_0x5bc25d(0x241)]-0x1]['ts']-_0x5be1de)/0x3e8),'daytime':new Date(_0x5be1de)[_0x5bc25d(0x237)]()};_0x2a5f6d[_0x5bc25d(0x26f)](_0x563319);if(_0x2a5f6d[_0x5bc25d(0x241)]>MAX_TRAINING_SET_SIZE)_0x2a5f6d['shift']();await _0x4f5d66['setStateAsync']('LTM.trainingData.sequences',{'val':JSON[_0x5bc25d(0x111)](_0x2a5f6d),'ack':!![]}),runSecurityCheck(_0x4f5d66,_0x563319);}catch(_0x4c83f0){_0x4f5d66[_0x5bc25d(0x1b7)][_0x5bc25d(0x233)](_0x5bc25d(0x192)+_0x4c83f0['message']);}}function runSecurityCheck(_0x36d728,_0x56c31a){const _0x4c04ee=a0_0x7c25f0;if(!_0x36d728['isProVersion'])return;sendToPython(_0x36d728,_0x4c04ee(0x1f5),{'sequence':_0x56c31a});}async function createDailyDigest(_0x5a3b78){const _0x344ce2=a0_0x7c25f0;if(!_0x5a3b78['isProVersion'])return;await _0x5a3b78[_0x344ce2(0x2b0)](LTM_DP_STATUS,{'val':_0x344ce2(0x1f0),'ack':!![]});if(!_0x5a3b78['geminiModel']||_0x5a3b78[_0x344ce2(0x294)][_0x344ce2(0x241)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x5a3b78[_0x344ce2(0x2b0)](LTM_DP_STATUS,{'val':_0x344ce2(0x1a7),'ack':!![]});return;}const _0x10d7d7=JSON[_0x344ce2(0x118)](JSON[_0x344ce2(0x111)](_0x5a3b78['rawEventLog'])),_0x1a030e=_0x10d7d7['length'],_0x40bd3e=_0x344ce2(0x283)+JSON[_0x344ce2(0x111)](_0x10d7d7);try{const _0x520e5b=await _0x5a3b78[_0x344ce2(0x28f)][_0x344ce2(0x1cd)](_0x40bd3e),_0x51562e=JSON[_0x344ce2(0x118)](_0x520e5b[_0x344ce2(0x205)][_0x344ce2(0x1e8)]()[_0x344ce2(0x2a5)](/```json|```/g,'')[_0x344ce2(0x197)]()),_0x1ba64c={'timestamp':new Date()[_0x344ce2(0x195)](),'eventCount':_0x1a030e,'summary':_0x51562e[_0x344ce2(0x29d)]||_0x344ce2(0x152),'activityLevel':_0x51562e[_0x344ce2(0x22b)]||_0x344ce2(0x1e0),'systemMode':_0x5a3b78[_0x344ce2(0x1ac)]};_0x5a3b78[_0x344ce2(0x129)]['push'](_0x1ba64c),await saveDailyDigests(_0x5a3b78),_0x5a3b78[_0x344ce2(0x294)]=[],await saveRawEventLog(_0x5a3b78),await _0x5a3b78[_0x344ce2(0x2b0)](LTM_DP_STATUS,{'val':_0x344ce2(0x181),'ack':!![]});if(_0x5a3b78[_0x344ce2(0x24a)])sendToPython(_0x5a3b78,_0x344ce2(0x20f),{'digest':_0x1ba64c});}catch(_0x2e6562){_0x5a3b78[_0x344ce2(0x1b7)][_0x344ce2(0x233)](_0x2e6562['message']);}}async function runBaselineDriftAnalysis(_0x4985f3){const _0x16f6ea=a0_0x7c25f0;if(!_0x4985f3[_0x16f6ea(0x24a)]||!_0x4985f3['geminiModel'])return;const _0x2f5e91=_0x4985f3['config'][_0x16f6ea(0x1f6)]||0xe;if(_0x4985f3[_0x16f6ea(0x129)][_0x16f6ea(0x241)]<_0x2f5e91+0x7){await _0x4985f3[_0x16f6ea(0x2b0)](LTM_DP_DRIFT_STATUS,{'val':_0x16f6ea(0x23c),'ack':!![]});return;}const _0x7f4eb1=_0x4985f3[_0x16f6ea(0x129)][_0x16f6ea(0x1d5)](-_0x2f5e91),_0x1edc5c=_0x4985f3[_0x16f6ea(0x129)]['slice'](0x0,_0x4985f3[_0x16f6ea(0x129)][_0x16f6ea(0x241)]-_0x2f5e91),_0x263a07=_0x16f6ea(0x1ae)+JSON['stringify'](_0x1edc5c)+_0x16f6ea(0x163)+JSON[_0x16f6ea(0x111)](_0x7f4eb1);try{const _0x3ed5a6=await _0x4985f3[_0x16f6ea(0x28f)][_0x16f6ea(0x1cd)](_0x263a07),_0x1b6e04=JSON[_0x16f6ea(0x118)](_0x3ed5a6['response'][_0x16f6ea(0x1e8)]()[_0x16f6ea(0x2a5)](/```json|```/g,'')[_0x16f6ea(0x197)]());_0x1b6e04[_0x16f6ea(0x228)]&&(await _0x4985f3['setStateAsync'](LTM_DP_DRIFT_STATUS,{'val':_0x1b6e04['baselineDrift'],'ack':!![]}),await _0x4985f3['setStateAsync'](LTM_DP_DRIFT_DETAILS,{'val':_0x1b6e04['driftDetails'],'ack':!![]}),await _0x4985f3['setStateAsync'](LTM_DP_DRIFT_LAST_CHECK,{'val':Date['now'](),'ack':!![]}));}catch(_0x312951){}}async function sendMorningBriefing(_0x5c462a){const _0x248f6f=a0_0x7c25f0;if(!_0x5c462a[_0x248f6f(0x28f)])return;try{const _0x32d3bf=_0x248f6f(0x175),_0x47900d=await _0x5c462a['geminiModel'][_0x248f6f(0x1cd)](_0x32d3bf),_0x399490=_0x47900d['response']['text']();sendNotification(_0x5c462a,'ðŸŒ…\x20Morning\x20Briefing:\x0a'+_0x399490);}catch(_0x3f4297){_0x5c462a['log'][_0x248f6f(0x233)](_0x248f6f(0x18d)+_0x3f4297[_0x248f6f(0x1bc)]);}}function stopPythonService(_0x4c2d83){const _0x2d0329=a0_0x7c25f0;if(_0x4c2d83[_0x2d0329(0x1c6)]){try{_0x4c2d83[_0x2d0329(0x1c6)][_0x2d0329(0x13f)]();}catch(_0x18732b){}_0x4c2d83[_0x2d0329(0x1c6)]=null;}}function sendToPython(_0x2c3e2c,_0x10d12e,_0x235ec2={}){const _0x4cd14c=a0_0x7c25f0;if(!_0x2c3e2c[_0x4cd14c(0x1c6)]||!_0x2c3e2c[_0x4cd14c(0x1c6)][_0x4cd14c(0x289)][_0x4cd14c(0x268)])return;const _0x549a49=JSON[_0x4cd14c(0x111)]({'command':_0x10d12e,..._0x235ec2});try{_0x2c3e2c['pythonProcess']['stdin'][_0x4cd14c(0x21b)](_0x549a49+'\x0a');}catch(_0x188889){}}function runPythonHealthCheck(_0x570ea4){const _0x1d173a=a0_0x7c25f0;if(!_0x570ea4['dailyDigests']||_0x570ea4[_0x1d173a(0x129)][_0x1d173a(0x241)]<0x2)return;const _0x54d406=_0x570ea4[_0x1d173a(0x129)]['map'](_0x118f5f=>{const _0x1aeb09=_0x1d173a,_0x133eef=(_0x118f5f[_0x1aeb09(0x22b)]||'')[_0x1aeb09(0x1f9)]();return ACTIVITY_LEVEL_MAP[_0x133eef]||0x32;});sendToPython(_0x570ea4,_0x1d173a(0x11a),{'values':_0x54d406,'tag':_0x1d173a(0x26e)});}function handlePythonResult(_0x26354b,_0x584210){const _0x5ab89c=a0_0x7c25f0;if(_0x584210[_0x5ab89c(0x28d)]===_0x5ab89c(0x28b))_0x26354b[_0x5ab89c(0x1b7)][_0x5ab89c(0x264)](_0x5ab89c(0x12d));else{if(_0x584210[_0x5ab89c(0x28d)]===_0x5ab89c(0x19b)){const {anomaly_score:_0x2e5074,is_anomaly:_0xed6fea,threshold:_0x25506a,explanation:_0x191a62}=_0x584210[_0x5ab89c(0x255)];_0x26354b[_0x5ab89c(0x1b7)][_0x5ab89c(0x11e)](_0x5ab89c(0x20e)+_0x2e5074['toFixed'](0x5)+'\x20->\x20'+(_0xed6fea?_0x5ab89c(0x1cc):'OK')),_0x26354b[_0x5ab89c(0x2b0)](_0x5ab89c(0x119),{'val':_0x2e5074,'ack':!![]}),_0x26354b[_0x5ab89c(0x2b0)](_0x5ab89c(0x1a0),{'val':new Date()[_0x5ab89c(0x195)](),'ack':!![]});if(_0x25506a)_0x26354b['setStateAsync'](_0x5ab89c(0x28e),{'val':_0x25506a,'ack':!![]});if(_0xed6fea){let _0x3eba21=_0x5ab89c(0x18a)+_0x2e5074[_0x5ab89c(0x1a1)](0x4)+')';if(_0x191a62&&_0x191a62!=='Unknown')_0x3eba21+='\x0aGrund:\x20'+_0x191a62;_0x26354b[_0x5ab89c(0x2b0)](_0x5ab89c(0x200),{'val':!![],'ack':!![]}),_0x26354b['setStateAsync'](_0x5ab89c(0x1d2),{'val':_0x3eba21,'ack':!![]}),sendNotification(_0x26354b,_0x5ab89c(0x1c2)+_0x3eba21,![],!![]);}}else{if(_0x584210[_0x5ab89c(0x28d)]==='TRAINING_COMPLETE'){const _0x59ce2d=_0x584210[_0x5ab89c(0x255)][_0x5ab89c(0x1f2)]||'',_0x53396c=_0x584210[_0x5ab89c(0x255)][_0x5ab89c(0x159)],_0x4275f2=_0x584210[_0x5ab89c(0x255)][_0x5ab89c(0x17f)]?'Success:\x20'+new Date()[_0x5ab89c(0x245)]()+'\x20('+_0x59ce2d+')':'Failed:\x20'+_0x584210[_0x5ab89c(0x255)][_0x5ab89c(0x1c7)];_0x26354b['setStateAsync'](_0x5ab89c(0x2ab),{'val':_0x4275f2,'ack':!![]});if(_0x584210[_0x5ab89c(0x255)][_0x5ab89c(0x17f)]&&_0x53396c)_0x26354b['setStateAsync']('analysis.security.currentThreshold',{'val':_0x53396c,'ack':!![]});}else{if(_0x584210[_0x5ab89c(0x28d)]===_0x5ab89c(0x113)){const {patterns:_0x2dd2cb}=_0x584210[_0x5ab89c(0x255)];if(_0x2dd2cb&&_0x2dd2cb[_0x5ab89c(0x241)]>0x0){_0x26354b[_0x5ab89c(0x1b7)][_0x5ab89c(0x11e)](_0x5ab89c(0x140)+_0x2dd2cb[_0x5ab89c(0x241)]+'\x20new\x20patterns.'),_0x26354b[_0x5ab89c(0x2b0)]('analysis.automation.detectedPatterns',{'val':JSON[_0x5ab89c(0x111)](_0x2dd2cb),'ack':!![]});const _0x4f354a=_0x2dd2cb[0x0],_0x159eca='Regel\x20erkannt:\x20'+_0x4f354a[_0x5ab89c(0x266)]+'\x20('+(_0x4f354a[_0x5ab89c(0x1bd)]*0x64)[_0x5ab89c(0x1a1)](0x0)+'%)';_0x26354b[_0x5ab89c(0x2b0)](_0x5ab89c(0x155),{'val':!![],'ack':!![]}),_0x26354b[_0x5ab89c(0x2b0)](_0x5ab89c(0x29a),{'val':_0x159eca,'ack':!![]});}else _0x26354b[_0x5ab89c(0x1b7)][_0x5ab89c(0x11e)](_0x5ab89c(0x204)),_0x26354b['setStateAsync'](_0x5ab89c(0x155),{'val':![],'ack':!![]}),_0x26354b[_0x5ab89c(0x2b0)](_0x5ab89c(0x21e),{'val':'[]','ack':!![]});}else{if(_0x584210[_0x5ab89c(0x28d)]===_0x5ab89c(0x14d)){if(_0x584210[_0x5ab89c(0x255)]['success'])try{const _0x140d3b=JSON[_0x5ab89c(0x118)](_0x584210['payload']['details']);if(_0x140d3b[_0x5ab89c(0x146)])_0x26354b[_0x5ab89c(0x2b0)](_0x5ab89c(0x115),{'val':JSON['stringify'](_0x140d3b['insulation']),'ack':!![]});if(_0x140d3b[_0x5ab89c(0x196)])_0x26354b['setStateAsync'](_0x5ab89c(0x285),{'val':JSON[_0x5ab89c(0x111)](_0x140d3b[_0x5ab89c(0x196)]),'ack':!![]});}catch(_0xc2aeff){}}else{if(_0x584210[_0x5ab89c(0x28d)]===_0x5ab89c(0x227)){if(_0x584210['payload'][_0x5ab89c(0x17f)])_0x26354b[_0x5ab89c(0x1b7)][_0x5ab89c(0x11e)]('âœ…\x20HEALTH\x20TRAINED.');}else{if(_0x584210['type']===_0x5ab89c(0x238))_0x26354b[_0x5ab89c(0x2b0)]('analysis.health.lastCheck',{'val':new Date()[_0x5ab89c(0x195)](),'ack':!![]}),_0x26354b[_0x5ab89c(0x2b0)](_0x5ab89c(0x141),{'val':_0x584210[_0x5ab89c(0x255)][_0x5ab89c(0x232)],'ack':!![]});else{if(_0x584210[_0x5ab89c(0x28d)]===_0x5ab89c(0x1b3))_0x26354b['setStateAsync'](_0x5ab89c(0x14f),{'val':_0x584210[_0x5ab89c(0x255)][_0x5ab89c(0x293)],'ack':!![]}),_0x26354b[_0x5ab89c(0x2b0)](_0x5ab89c(0x150),{'val':_0x584210[_0x5ab89c(0x255)][_0x5ab89c(0x1f8)],'ack':!![]});else{if(_0x584210[_0x5ab89c(0x28d)]==='GAIT_RESULT'){const {speed_trend:_0x47e3ff}=_0x584210[_0x5ab89c(0x255)];if(_0x47e3ff!==undefined)_0x26354b[_0x5ab89c(0x2b0)](_0x5ab89c(0x2a6),{'val':_0x47e3ff,'ack':!![]});}else{if(_0x584210[_0x5ab89c(0x28d)]===_0x5ab89c(0x137)){const {forecast:_0x5ea42e}=_0x584210['payload'];if(_0x5ea42e)_0x26354b['setStateAsync']('analysis.energy.forecast',{'val':JSON[_0x5ab89c(0x111)](_0x5ea42e),'ack':!![]});}else{if(_0x584210[_0x5ab89c(0x28d)]==='TOPOLOGY_RESULT'){const {data:_0x208ed4}=_0x584210[_0x5ab89c(0x255)];_0x208ed4&&(_0x26354b[_0x5ab89c(0x1b7)]['info'](_0x5ab89c(0x143)),_0x26354b[_0x5ab89c(0x2b0)]('analysis.security.topologyMatrix',{'val':JSON[_0x5ab89c(0x111)](_0x208ed4),'ack':!![]}));}}}}}}}}}}}}function startPythonService(_0x3031ca){const _0x435827=a0_0x7c25f0;let _0x181cc2=_0x435827(0x124);if(fs['existsSync'](installer[_0x435827(0x164)]))_0x181cc2=installer[_0x435827(0x164)];try{const _0x3b18cc=path[_0x435827(0x120)](__dirname,_0x435827(0x221),_0x435827(0x243));_0x3031ca[_0x435827(0x1c6)]=spawn(_0x181cc2,[_0x3b18cc]),_0x3031ca['pythonProcess'][_0x435827(0x27f)]['on'](_0x435827(0x217),_0x2c5a09=>{const _0x588984=_0x435827,_0x14f279=_0x2c5a09[_0x588984(0x225)]()[_0x588984(0x22e)]('\x0a');_0x14f279['forEach'](_0x5df494=>{const _0xd5ff1a=_0x588984,_0x169290=_0x5df494[_0xd5ff1a(0x197)]();if(!_0x169290)return;if(_0x169290[_0xd5ff1a(0x1e5)](_0xd5ff1a(0x20c)))_0x3031ca[_0xd5ff1a(0x1b7)][_0xd5ff1a(0x264)](_0xd5ff1a(0x236)+_0x169290['substring'](0x5)[_0xd5ff1a(0x197)]());else{if(_0x169290[_0xd5ff1a(0x1e5)](_0xd5ff1a(0x210)))try{const _0x1bd28a=JSON[_0xd5ff1a(0x118)](_0x169290[_0xd5ff1a(0x1e2)](0x8)[_0xd5ff1a(0x197)]());handlePythonResult(_0x3031ca,_0x1bd28a);}catch(_0x31ed2a){}}});}),_0x3031ca['pythonProcess']['on'](_0x435827(0x15d),_0x1939ee=>{_0x3031ca['pythonProcess']=null;});}catch(_0x29ce7c){_0x3031ca[_0x435827(0x1b7)][_0x435827(0x233)]('Error\x20launching\x20Python:\x20'+_0x29ce7c[_0x435827(0x1bc)]);}}async function runAutopilot(_0x4d50fa){const _0x3aa615=a0_0x7c25f0;_0x4d50fa['log']['debug'](_0x3aa615(0x134)),await runGeminiAnalysis(_0x4d50fa),updateHealthVector(_0x4d50fa),triggerGaitAnalysis(_0x4d50fa),triggerEnergyPrediction(_0x4d50fa);}async function triggerGaitAnalysis(_0x1af7f8){const _0x405ad3=a0_0x7c25f0;if(!_0x1af7f8['isProVersion'])return;try{const _0x8dbf82=await _0x1af7f8[_0x405ad3(0x19a)](_0x405ad3(0x173));_0x8dbf82&&_0x8dbf82[_0x405ad3(0x1cf)]&&sendToPython(_0x1af7f8,_0x405ad3(0x12c),{'sequences':JSON[_0x405ad3(0x118)](_0x8dbf82['val'])});}catch(_0x55fe1c){}}async function triggerEnergyPrediction(_0x40398e){const _0x52f0e2=a0_0x7c25f0;if(!_0x40398e['isProVersion'])return;try{const _0x287185=await getOutsideTemperatureNumeric(_0x40398e);if(_0x287185===null)return;const _0xf2b38c={},_0x27b76c=_0x40398e[_0x52f0e2(0x138)][_0x52f0e2(0x216)]||[];for(const _0x5dff0c of _0x27b76c){if(_0x5dff0c[_0x52f0e2(0x28d)]===_0x52f0e2(0x269)&&_0x5dff0c[_0x52f0e2(0x179)]){const _0x55bc59=_0x40398e['sensorLastValues'][_0x5dff0c['id']];if(_0x55bc59!==undefined)_0xf2b38c[_0x5dff0c[_0x52f0e2(0x179)]]=_0x55bc59;}}Object[_0x52f0e2(0x199)](_0xf2b38c)[_0x52f0e2(0x241)]>0x0&&sendToPython(_0x40398e,_0x52f0e2(0x13e),{'current_temps':_0xf2b38c,'t_out':_0x287185});}catch(_0x19e982){}}function updateHealthVector(_0x507c38){const _0x48327d=a0_0x7c25f0;if(!_0x507c38[_0x48327d(0x294)]||_0x507c38[_0x48327d(0x294)]['length']===0x0)return;const _0x5c29ff=new Array(0x60)[_0x48327d(0x1fe)](0x0),_0x52da95=new Date()[_0x48327d(0x26a)](0x0,0x0,0x0,0x0);_0x507c38[_0x48327d(0x294)][_0x48327d(0x2af)](_0x3891d1=>{const _0x256a0d=_0x48327d,_0x5820c7=new Date(_0x3891d1['timestamp']);if(_0x5820c7['getTime']()>=_0x52da95){const _0x9fd2ef=_0x5820c7[_0x256a0d(0x237)](),_0x5a3dc7=_0x5820c7['getMinutes'](),_0x26d77d=_0x9fd2ef*0x4+Math[_0x256a0d(0x10d)](_0x5a3dc7/0xf);if(_0x26d77d>=0x0&&_0x26d77d<0x60)_0x5c29ff[_0x26d77d]++;}}),_0x507c38['setStateAsync']('analysis.health.todayVector',{'val':JSON[_0x48327d(0x111)](_0x5c29ff),'ack':!![]});}async function getWeatherContext(_0xf53514){const _0x10dd87=a0_0x7c25f0;if(!_0xf53514[_0x10dd87(0x138)][_0x10dd87(0x202)]||!_0xf53514[_0x10dd87(0x138)][_0x10dd87(0x282)])return'Wetterdaten\x20deaktiviert.';try{const _0x158121=_0xf53514[_0x10dd87(0x138)][_0x10dd87(0x282)];let _0x5b669c=await _0xf53514[_0x10dd87(0x1af)](_0x158121+_0x10dd87(0x15b));if(!_0x5b669c)_0x5b669c=await _0xf53514[_0x10dd87(0x1af)](_0x158121+'.forecast.current.temperature');let _0x230a49=await _0xf53514[_0x10dd87(0x1af)](_0x158121+_0x10dd87(0x154));if(!_0x230a49)_0x230a49=await _0xf53514[_0x10dd87(0x1af)](_0x158121+'.forecast.current.state');if(_0x5b669c&&_0x230a49)return _0x5b669c[_0x10dd87(0x1cf)]+_0x10dd87(0x212)+_0x230a49['val'];}catch(_0x2f7e08){}return'Keine\x20Wetterdaten\x20verfÃ¼gbar.';}async function getCalendarContext(_0xda459d){const _0x344098=a0_0x7c25f0;if(!_0xda459d[_0x344098(0x138)][_0x344098(0x1ef)]||!_0xda459d[_0x344098(0x138)][_0x344098(0x2a9)])return _0x344098(0x13c);return'Keine\x20Termine.';}async function getCalendarNames(_0x1a5139,_0x592745){return[];}async function saveFeedback(_0x3fb88f,_0x226352){const _0x30170a=a0_0x7c25f0;_0x3fb88f['log'][_0x30170a(0x11e)](_0x30170a(0x29c)+_0x226352[_0x30170a(0x20d)]);}function a0_0x6ec4(_0x5d44b8,_0x1b2d7f){const _0x6025f1=a0_0x1007();return a0_0x6ec4=function(_0x320831,_0xeea26a){_0x320831=_0x320831-0x10a;let _0x1007b5=_0x6025f1[_0x320831];return _0x1007b5;},a0_0x6ec4(_0x5d44b8,_0x1b2d7f);}async function runGeminiAnalysis(_0x1ab587,_0xe3a4d=''){const _0x26df5e=a0_0x7c25f0;if(!_0x1ab587[_0x26df5e(0x28f)])return;if(_0x1ab587[_0x26df5e(0x2a3)]['length']===0x0)return;const _0x7bb4b1=_0x1ab587[_0x26df5e(0x2a3)][_0x26df5e(0x1d5)](0x0,0xf),_0x4ed18f=await getWeatherContext(_0x1ab587),_0x490cd8=_0x1ab587[_0x26df5e(0x1ac)],_0x3e6524=PERSONA_MAPPING[_0x1ab587[_0x26df5e(0x138)][_0x26df5e(0x215)]||_0x26df5e(0x11c)],_0x7f8c42=_0x1ab587[_0x26df5e(0x138)]['livingContext']||_0x26df5e(0x1e6);let _0x4aad18=_0x26df5e(0x2a0);try{const _0x82e556=await _0x1ab587['getStateAsync']('system.presenceWho');if(_0x82e556&&_0x82e556[_0x26df5e(0x1cf)])_0x4aad18=_0x82e556['val'];}catch(_0x36d4ba){}let _0x57faed=![];try{const _0x28b7eb=await _0x1ab587['getStateAsync'](_0x26df5e(0x1e3));if(_0x28b7eb&&_0x28b7eb[_0x26df5e(0x1cf)])_0x57faed=!![];}catch(_0x5e2453){}const _0x51c70c=_0x26df5e(0x16e)+_0x3e6524+_0x26df5e(0x18c)+_0x7f8c42+_0x26df5e(0x259)+_0x490cd8+_0x26df5e(0x1b0)+_0x4ed18f+_0x26df5e(0x12b)+_0x4aad18+'.\x20EVENTS:\x20'+JSON[_0x26df5e(0x111)](_0x7bb4b1)+_0x26df5e(0x2ad)+_0xe3a4d+'.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}';try{const _0xb23487=await _0x1ab587[_0x26df5e(0x28f)][_0x26df5e(0x1cd)](_0x51c70c),_0x2dc0ba=JSON[_0x26df5e(0x118)](_0xb23487[_0x26df5e(0x205)]['text']()[_0x26df5e(0x2a5)](/```json|```/g,'')[_0x26df5e(0x197)]());await _0x1ab587[_0x26df5e(0x2b0)](_0x26df5e(0x14a),{'val':JSON[_0x26df5e(0x111)](_0x2dc0ba),'ack':!![]});if(_0x2dc0ba['summary'])await _0x1ab587[_0x26df5e(0x2b0)](_0x26df5e(0x1dc),{'val':_0x2dc0ba[_0x26df5e(0x29d)],'ack':!![]});const _0x3faa4e={'timestamp':Date[_0x26df5e(0x29e)](),'id':Date[_0x26df5e(0x29e)]()[_0x26df5e(0x225)](),'analysis':{'activity':{'summary':_0x2dc0ba['summary'],'isAlert':_0x2dc0ba['isAlert'],'alertReason':_0x2dc0ba['alertReason']},'comfort':{'automationProposal':_0x2dc0ba[_0x26df5e(0x160)]}}};await updateAnalysisHistory(_0x1ab587,_0x3faa4e);const _0x1c584e=_0x2dc0ba[_0x26df5e(0x13d)]||![];_0x1c584e!==_0x1ab587[_0x26df5e(0x135)]&&(await _0x1ab587[_0x26df5e(0x2b0)]('analysis.isAlert',{'val':_0x1c584e,'ack':!![]}),_0x1ab587[_0x26df5e(0x135)]=_0x1c584e,_0x1c584e&&(await _0x1ab587[_0x26df5e(0x2b0)]('analysis.alertReason',{'val':_0x2dc0ba[_0x26df5e(0x277)],'ack':!![]}),sendNotification(_0x1ab587,'âš ï¸\x20ALARM:\x20'+_0x2dc0ba[_0x26df5e(0x277)],![],_0x2dc0ba[_0x26df5e(0x256)])));if(_0x2dc0ba[_0x26df5e(0x160)]&&_0x2dc0ba['automationProposal'][_0x26df5e(0x171)]){await _0x1ab587[_0x26df5e(0x2b0)](_0x26df5e(0x155),{'val':!![],'ack':!![]}),await _0x1ab587['setStateAsync'](_0x26df5e(0x29a),{'val':_0x2dc0ba[_0x26df5e(0x160)][_0x26df5e(0x209)],'ack':!![]}),await _0x1ab587['setStateAsync'](_0x26df5e(0x273),{'val':_0x2dc0ba[_0x26df5e(0x160)][_0x26df5e(0x23f)],'ack':!![]}),await _0x1ab587[_0x26df5e(0x2b0)]('analysis.automation.targetValue',{'val':JSON[_0x26df5e(0x111)](_0x2dc0ba[_0x26df5e(0x160)][_0x26df5e(0x258)]),'ack':!![]});if(_0x57faed)executeAutomationAction(_0x1ab587);}}catch(_0x46b167){_0x1ab587[_0x26df5e(0x1b7)][_0x26df5e(0x233)](_0x26df5e(0x1eb)+_0x46b167['message']);}}async function startSystem(_0x1115ed){const _0x23fb40=a0_0x7c25f0;_0x1115ed[_0x23fb40(0x1b7)][_0x23fb40(0x11e)](_0x23fb40(0x1e7)),await initZombies(_0x1115ed);try{_0x1115ed[_0x23fb40(0x24a)]=await checkLicense(_0x1115ed[_0x23fb40(0x138)][_0x23fb40(0x174)]);}catch(_0xac632d){}if(!_0x1115ed[_0x23fb40(0x138)][_0x23fb40(0x23b)]||_0x1115ed['config'][_0x23fb40(0x23b)]<0.1)_0x1115ed['config'][_0x23fb40(0x23b)]=0xc;await initHistory(_0x1115ed),await initSystemConfig(_0x1115ed);if(_0x1115ed['config'][_0x23fb40(0x1fd)])try{_0x1115ed[_0x23fb40(0x126)]=new GoogleGenerativeAI(_0x1115ed['config'][_0x23fb40(0x1fd)]),_0x1115ed[_0x23fb40(0x28f)]=_0x1115ed['genAI']['getGenerativeModel']({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x23fb40(0x1fb)}}),_0x1115ed[_0x23fb40(0x1b7)][_0x23fb40(0x11e)](_0x23fb40(0x265));}catch(_0x1b261b){_0x1115ed[_0x23fb40(0x1b7)][_0x23fb40(0x233)](_0x23fb40(0x15c)+_0x1b261b[_0x23fb40(0x1bc)]);}await createAllObjects(_0x1115ed),await loadSystemMode(_0x1115ed),await loadRawEventLog(_0x1115ed),await loadDailyDigests(_0x1115ed),_0x1115ed[_0x23fb40(0x189)](_0x23fb40(0x270)),_0x1115ed[_0x23fb40(0x189)](LTM_DP_TRIGGER_DIGEST),_0x1115ed[_0x23fb40(0x189)]('system.mode'),_0x1115ed[_0x23fb40(0x189)](_0x23fb40(0x121)),_0x1115ed['subscribeStates']('analysis.automation.triggerAction'),_0x1115ed[_0x23fb40(0x189)](_0x23fb40(0x1e3)),_0x1115ed[_0x23fb40(0x189)](_0x23fb40(0x132)),_0x1115ed[_0x23fb40(0x189)](_0x23fb40(0x130)),_0x1115ed['subscribeStates'](_0x23fb40(0x144)),_0x1115ed[_0x23fb40(0x189)]('analysis.training.triggerComfort'),_0x1115ed[_0x23fb40(0x189)](_0x23fb40(0x1ce)),await initSensorSubscriptions(_0x1115ed),await initPresenceSubscriptions(_0x1115ed),await setupTelegramListener(_0x1115ed),setTimeout(()=>checkWifiPresence(_0x1115ed),0x1388);if(_0x1115ed[_0x23fb40(0x1ed)])clearInterval(_0x1115ed[_0x23fb40(0x1ed)]);const _0x2d55d4=_0x1115ed['config'][_0x23fb40(0x136)]||0xf;_0x2d55d4>0x0&&(_0x1115ed[_0x23fb40(0x1ed)]=setInterval(()=>{runAutopilot(_0x1115ed);},_0x2d55d4*0x3c*0x3e8)),schedulers[_0x23fb40(0x257)](_0x1115ed,()=>createDailyDigest(_0x1115ed)),schedulers[_0x23fb40(0x1cb)](_0x1115ed),schedulers[_0x23fb40(0x1fa)](_0x1115ed,()=>runBaselineDriftAnalysis(_0x1115ed)),schedulers[_0x23fb40(0x19e)](_0x1115ed,()=>sendMorningBriefing(_0x1115ed)),startPythonService(_0x1115ed),setTimeout(()=>{const _0x2c81f0=_0x23fb40;_0x1115ed[_0x2c81f0(0x1c6)]&&(runPythonHealthCheck(_0x1115ed),triggerGaitAnalysis(_0x1115ed),triggerEnergyPrediction(_0x1115ed)),updateHealthVector(_0x1115ed);},0x1388);}class CogniLiving extends utils['Adapter']{constructor(_0x16d33d){const _0x36d9f2=a0_0x7c25f0;super({..._0x16d33d,'name':_0x36d9f2(0x24c)}),this[_0x36d9f2(0x2a3)]=[],this['analysisHistory']=[],this[_0x36d9f2(0x294)]=[],this[_0x36d9f2(0x129)]=[],this['sensorLastValues']={},this[_0x36d9f2(0x1d8)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x36d9f2(0x165)]=!![],this[_0x36d9f2(0x27d)]=null,this[_0x36d9f2(0x158)]=null,this[_0x36d9f2(0x226)]=![],this[_0x36d9f2(0x126)]=null,this[_0x36d9f2(0x28f)]=null,this[_0x36d9f2(0x1ac)]=SYSTEM_MODES[_0x36d9f2(0x25c)],this[_0x36d9f2(0x24a)]=![],this[_0x36d9f2(0x135)]=![],this[_0x36d9f2(0x139)]=_0x36d9f2(0x182),this[_0x36d9f2(0x1ed)]=null,this[_0x36d9f2(0x184)]=null,this[_0x36d9f2(0x194)]=null,this[_0x36d9f2(0x290)]=null,this[_0x36d9f2(0x276)]=null,this['pythonProcess']=null,this['dependencyInstallInProgress']=![],this['on'](_0x36d9f2(0x23a),this['onReady'][_0x36d9f2(0x231)](this)),this['on'](_0x36d9f2(0x16f),this[_0x36d9f2(0x21d)][_0x36d9f2(0x231)](this)),this['on']('unload',this[_0x36d9f2(0x128)][_0x36d9f2(0x231)](this)),this['on']('message',this[_0x36d9f2(0x170)][_0x36d9f2(0x231)](this));}async['onReady'](){const _0x57379f=a0_0x7c25f0;this[_0x57379f(0x1b7)][_0x57379f(0x11e)](_0x57379f(0x20b)+this[_0x57379f(0x161)]+_0x57379f(0x114));if(!installer[_0x57379f(0x187)](this,()=>startSystem(this)))return;}[a0_0x7c25f0(0x128)](_0x4f8af5){const _0x59f40a=a0_0x7c25f0;if(this[_0x59f40a(0x1ed)])clearInterval(this[_0x59f40a(0x1ed)]);if(this['driftAnalysisTimer'])clearInterval(this[_0x59f40a(0x290)]);if(this['ltmJob'])this[_0x59f40a(0x184)][_0x59f40a(0x12e)]();if(this[_0x59f40a(0x194)])this[_0x59f40a(0x194)][_0x59f40a(0x12e)]();if(this[_0x59f40a(0x276)])this['briefingJob'][_0x59f40a(0x12e)]();if(this[_0x59f40a(0x27d)])clearTimeout(this[_0x59f40a(0x27d)]);if(this[_0x59f40a(0x158)])clearTimeout(this[_0x59f40a(0x158)]);stopPythonService(this),_0x4f8af5();}async[a0_0x7c25f0(0x21d)](_0x398172,_0x4146cf){const _0x301e00=a0_0x7c25f0;if(!_0x4146cf||this['dependencyInstallInProgress'])return;if(_0x398172[_0x301e00(0x10e)](_0x301e00(0x1ca))&&_0x398172[_0x301e00(0x180)](_0x301e00(0x267))&&_0x4146cf[_0x301e00(0x1cf)]){await handleTelegramResponse(this,_0x4146cf['val']);return;}if(_0x398172===this['namespace']+'.'+SYSTEM_DP_MODE){if(_0x4146cf['val']&&Object[_0x301e00(0x15e)](SYSTEM_MODES)['includes'](_0x4146cf[_0x301e00(0x1cf)])){this[_0x301e00(0x1ac)]=_0x4146cf[_0x301e00(0x1cf)];if(_0x4146cf['val']===SYSTEM_MODES[_0x301e00(0x19c)])await setPresence(this,![]);else await setPresence(this,!![]);}if(!_0x4146cf[_0x301e00(0x247)])this[_0x301e00(0x274)](_0x398172,{'val':this[_0x301e00(0x1ac)],'ack':!![]});return;}if(!_0x4146cf[_0x301e00(0x247)]){_0x398172[_0x301e00(0x10e)](_0x301e00(0x270))&&_0x4146cf[_0x301e00(0x1cf)]&&(this['setState'](_0x398172,{'val':![],'ack':!![]}),runGeminiAnalysis(this));if(_0x398172[_0x301e00(0x10e)]('triggerDailyDigest')&&_0x4146cf[_0x301e00(0x1cf)]){this[_0x301e00(0x274)](_0x398172,{'val':![],'ack':!![]});if(this[_0x301e00(0x24a)])createDailyDigest(this);}_0x398172[_0x301e00(0x10e)](_0x301e00(0x1d3))&&_0x4146cf['val']&&(this['setState'](_0x398172,{'val':![],'ack':!![]}),sendMorningBriefing(this));_0x398172[_0x301e00(0x10e)](_0x301e00(0x219))&&_0x4146cf[_0x301e00(0x1cf)]&&(this[_0x301e00(0x274)](_0x398172,{'val':![],'ack':!![]}),executeAutomationAction(this));if(_0x398172[_0x301e00(0x10e)](_0x301e00(0x132))&&_0x4146cf[_0x301e00(0x1cf)]){this[_0x301e00(0x274)](_0x398172,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x3c4fd3=await this[_0x301e00(0x19a)]('LTM.trainingData.sequences');if(_0x3c4fd3&&_0x3c4fd3[_0x301e00(0x1cf)]){const _0x20d452=JSON[_0x301e00(0x118)](_0x3c4fd3[_0x301e00(0x1cf)]);this[_0x301e00(0x1b7)][_0x301e00(0x11e)](_0x301e00(0x1b2)),this[_0x301e00(0x2b0)]('analysis.training.status',{'val':_0x301e00(0x125),'ack':!![]}),sendToPython(this,_0x301e00(0x1d0),{'sequences':_0x20d452});}}catch(_0x5812c5){this[_0x301e00(0x1b7)][_0x301e00(0x233)]('Training\x20Error:\x20'+_0x5812c5['message']);}}if(_0x398172[_0x301e00(0x10e)](_0x301e00(0x130))&&_0x4146cf[_0x301e00(0x1cf)]){this['setState'](_0x398172,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x46bf29=await this[_0x301e00(0x19a)](LTM_DP_DAILY_DIGESTS);if(_0x46bf29&&_0x46bf29['val'])sendToPython(this,_0x301e00(0x27c),{'digests':JSON['parse'](_0x46bf29[_0x301e00(0x1cf)])});}catch(_0x4dc01b){}}if(_0x398172['includes'](_0x301e00(0x144))&&_0x4146cf[_0x301e00(0x1cf)]){this[_0x301e00(0x274)](_0x398172,{'val':![],'ack':!![]});if(this[_0x301e00(0x24a)])try{const _0x5811e2=await this[_0x301e00(0x19a)](_0x301e00(0x298));if(_0x5811e2&&_0x5811e2[_0x301e00(0x1cf)])sendToPython(this,_0x301e00(0x198),{'points':JSON[_0x301e00(0x118)](_0x5811e2[_0x301e00(0x1cf)])});}catch(_0x35646f){}}if(_0x398172['includes']('analysis.training.triggerComfort')&&_0x4146cf[_0x301e00(0x1cf)]){this[_0x301e00(0x274)](_0x398172,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x117f22=await this[_0x301e00(0x19a)](LTM_DP_RAW_LOG);_0x117f22&&_0x117f22['val']&&(this[_0x301e00(0x1b7)]['info'](_0x301e00(0x24b)),sendToPython(this,_0x301e00(0x244),{'events':JSON['parse'](_0x117f22[_0x301e00(0x1cf)])}));}catch(_0x256a04){}}if(_0x398172[_0x301e00(0x10e)](_0x301e00(0x1ce))&&_0x4146cf[_0x301e00(0x1cf)]){this[_0x301e00(0x274)](_0x398172,{'val':![],'ack':!![]});if(this[_0x301e00(0x24a)])try{const _0x120e82=await this[_0x301e00(0x19a)](_0x301e00(0x173));if(_0x120e82&&_0x120e82['val']){const _0xb2177a=JSON['parse'](_0x120e82['val']);this[_0x301e00(0x1b7)][_0x301e00(0x11e)](_0x301e00(0x27e)),sendToPython(this,_0x301e00(0x176),{'sequences':_0xb2177a});}}catch(_0x512336){this[_0x301e00(0x1b7)]['error']('Topology\x20Error:\x20'+_0x512336[_0x301e00(0x1bc)]);}}return;}if(this[_0x301e00(0x138)][_0x301e00(0x131)]&&this['config']['presenceDevices'][_0x301e00(0x10e)](_0x398172)){await checkWifiPresence(this);return;}const _0x256cbe=(this[_0x301e00(0x138)]['devices']||[])[_0x301e00(0x242)](_0x26c14c=>_0x26c14c['id']===_0x398172);if(_0x256cbe)processSensorEvent(this,_0x398172,_0x4146cf,_0x256cbe);}async[a0_0x7c25f0(0x170)](_0x59e1f9){const _0x465063=a0_0x7c25f0;if(typeof _0x59e1f9===_0x465063(0x178)&&_0x59e1f9[_0x465063(0x1bc)]){if(_0x59e1f9[_0x465063(0x25f)]===_0x465063(0x229)){const _0x284b34=_0x59e1f9[_0x465063(0x1bc)][_0x465063(0x291)]||this[_0x465063(0x138)]['geminiApiKey'];if(!_0x284b34)return this[_0x465063(0x1f4)](_0x59e1f9[_0x465063(0x1b9)],_0x59e1f9[_0x465063(0x25f)],{'success':![],'message':_0x465063(0x1b4)},_0x59e1f9['callback']);try{const _0x555d5b=new GoogleGenerativeAI(_0x284b34),_0x10518a=_0x555d5b[_0x465063(0x1bf)]({'model':GEMINI_MODEL}),_0x558976=await _0x10518a['generateContent']('Hi');this[_0x465063(0x1f4)](_0x59e1f9[_0x465063(0x1b9)],_0x59e1f9[_0x465063(0x25f)],{'success':!![],'message':'OK:\x20'+_0x558976['response'][_0x465063(0x1e8)]()},_0x59e1f9[_0x465063(0x220)]);}catch(_0x392dfe){this[_0x465063(0x1f4)](_0x59e1f9[_0x465063(0x1b9)],_0x59e1f9['command'],{'success':![],'message':_0x465063(0x1a3)+_0x392dfe[_0x465063(0x1bc)]},_0x59e1f9[_0x465063(0x220)]);}}else{if(_0x59e1f9[_0x465063(0x25f)]==='testContext'){const _0x10e9ae=await getWeatherContext(this),_0x3c2b91=await getCalendarContext(this);this[_0x465063(0x1f4)](_0x59e1f9[_0x465063(0x1b9)],_0x59e1f9[_0x465063(0x25f)],{'success':!![],'weather':_0x10e9ae,'calendar':_0x3c2b91},_0x59e1f9[_0x465063(0x220)]);}else{if(_0x59e1f9[_0x465063(0x25f)]==='getLtmData'){if(!this[_0x465063(0x24a)])return this[_0x465063(0x1f4)](_0x59e1f9[_0x465063(0x1b9)],_0x59e1f9[_0x465063(0x25f)],{'success':![],'isPro':![]},_0x59e1f9[_0x465063(0x220)]);let _0x2a8805={'status':'N/A'};try{const _0xc5d064=await this[_0x465063(0x19a)](LTM_DP_DRIFT_STATUS);_0x2a8805['status']=_0xc5d064?_0xc5d064[_0x465063(0x1cf)]:_0x465063(0x110);}catch(_0x5abf65){}this[_0x465063(0x1f4)](_0x59e1f9[_0x465063(0x1b9)],_0x59e1f9['command'],{'success':!![],'isPro':!![],'dailyDigests':this[_0x465063(0x129)],'driftAnalysis':_0x2a8805,'analysisHistory':this['analysisHistory']},_0x59e1f9[_0x465063(0x220)]);}else{if(_0x59e1f9[_0x465063(0x25f)]==='getOverviewData'){const _0xacf193=this[_0x465063(0x129)][_0x465063(0x241)],_0x26f464=new Date(),_0xc2a69e=new Date(_0x26f464[_0x465063(0x1d7)](),_0x26f464['getMonth'](),_0x26f464[_0x465063(0x1c1)]())['getTime'](),_0xce0d39=this[_0x465063(0x294)][_0x465063(0x278)](_0x58d3f0=>new Date(_0x58d3f0[_0x465063(0x1da)])['getTime']()>_0xc2a69e)[_0x465063(0x241)],_0x27c2d5=new Array(0x18)[_0x465063(0x1fe)](0x0);this[_0x465063(0x294)][_0x465063(0x2af)](_0xd28ea5=>{const _0x3b98f5=_0x465063,_0x13544d=new Date(_0xd28ea5[_0x3b98f5(0x1da)]);if(_0x13544d['getTime']()>_0xc2a69e)_0x27c2d5[_0x13544d['getHours']()]++;});let _0x5896bd={'status':_0x465063(0x110)};try{const _0x570220=await this[_0x465063(0x19a)](LTM_DP_DRIFT_STATUS);_0x5896bd[_0x465063(0x2ae)]=_0x570220?_0x570220[_0x465063(0x1cf)]:_0x465063(0x110);}catch(_0x1dbc28){}let _0x296d98='';try{const _0x411a2e=await this[_0x465063(0x19a)](_0x465063(0x17b));_0x296d98=_0x411a2e?_0x411a2e[_0x465063(0x1cf)]:'';}catch(_0x5ac89e){}let _0x270a49=null;!this[_0x465063(0x28f)]&&(_0x270a49=this[_0x465063(0x138)]['geminiApiKey']?_0x465063(0x17e):_0x465063(0x10f));let _0x162ef8={'detected':![],'description':'','targetId':'','targetValue':'','autoApply':![]};try{const _0x1bb999=await this[_0x465063(0x19a)](_0x465063(0x155));if(_0x1bb999&&_0x1bb999[_0x465063(0x1cf)]){_0x162ef8['detected']=!![];const _0x44e715=await this[_0x465063(0x19a)](_0x465063(0x29a));_0x162ef8['description']=_0x44e715?_0x44e715['val']:'';const _0x271b56=await this[_0x465063(0x19a)](_0x465063(0x273));_0x162ef8['targetId']=_0x271b56?_0x271b56['val']:'';const _0x2eb658=await this[_0x465063(0x19a)](_0x465063(0x286));_0x162ef8[_0x465063(0x258)]=_0x2eb658?_0x2eb658[_0x465063(0x1cf)]:'';}const _0xb90edd=await this[_0x465063(0x19a)](_0x465063(0x1e3));_0x162ef8[_0x465063(0x254)]=_0xb90edd?!!_0xb90edd[_0x465063(0x1cf)]:![];}catch(_0xad02bf){}this[_0x465063(0x1f4)](_0x59e1f9[_0x465063(0x1b9)],_0x59e1f9[_0x465063(0x25f)],{'success':!![],'eventHistory':this[_0x465063(0x2a3)][_0x465063(0x1d5)](0x0,0xf),'stats':{'digestCount':_0xacf193,'eventCountToday':_0xce0d39,'hourlyActivity':_0x27c2d5,'driftStatus':_0x5896bd[_0x465063(0x2ae)],'isPresent':this[_0x465063(0x165)],'presenceWho':_0x296d98,'minDays':this[_0x465063(0x138)]['minDaysForBaseline']||0x7,'stbDays':this[_0x465063(0x138)][_0x465063(0x1f6)]||0xe,'ltbDays':this[_0x465063(0x138)][_0x465063(0x1b6)]||0x3c,'systemError':_0x270a49},'automation':_0x162ef8},_0x59e1f9[_0x465063(0x220)]);}else{if(_0x59e1f9['command']===_0x465063(0x185))try{const _0x4d454e=await scanner[_0x465063(0x116)](this,_0x59e1f9[_0x465063(0x1bc)]||{});this[_0x465063(0x1f4)](_0x59e1f9[_0x465063(0x1b9)],_0x59e1f9['command'],{'success':!![],'devices':_0x4d454e},_0x59e1f9[_0x465063(0x220)]);}catch(_0x48890b){this['sendTo'](_0x59e1f9[_0x465063(0x1b9)],_0x59e1f9[_0x465063(0x25f)],{'success':![],'error':_0x48890b[_0x465063(0x1bc)]},_0x59e1f9[_0x465063(0x220)]);}else{if(_0x59e1f9['command']===_0x465063(0x183)){const _0x4144fe=await this[_0x465063(0x1d4)](_0x465063(0x1c5),_0x465063(0x1fc)),_0x275974=[];if(_0x4144fe)for(const _0x4888f9 in _0x4144fe){const _0x32da58=_0x4144fe[_0x4888f9],_0x29a2f5=(_0x32da58[_0x465063(0x20a)]&&typeof _0x32da58['common'][_0x465063(0x168)]==='object'?_0x32da58[_0x465063(0x20a)][_0x465063(0x168)]['de']:_0x32da58[_0x465063(0x20a)]['name'])||_0x32da58[_0x465063(0x20a)]['name'];_0x275974[_0x465063(0x26f)]({'id':_0x4888f9,'name':_0x29a2f5});}const _0x54a4e7=await this[_0x465063(0x1d4)](_0x465063(0x1a9),_0x465063(0x1fc)),_0x394e5c=[];if(_0x54a4e7)for(const _0x3e5a30 in _0x54a4e7){const _0x53d990=_0x54a4e7[_0x3e5a30],_0x463d40=(_0x53d990[_0x465063(0x20a)]&&typeof _0x53d990[_0x465063(0x20a)][_0x465063(0x168)]===_0x465063(0x178)?_0x53d990[_0x465063(0x20a)][_0x465063(0x168)]['de']:_0x53d990[_0x465063(0x20a)][_0x465063(0x168)])||_0x3e5a30[_0x465063(0x22e)]('.')['pop']();_0x394e5c['push'](_0x463d40);}this[_0x465063(0x1f4)](_0x59e1f9[_0x465063(0x1b9)],_0x59e1f9[_0x465063(0x25f)],{'success':!![],'enums':_0x275974,'rooms':_0x394e5c},_0x59e1f9['callback']);}else{if(_0x59e1f9['command']===_0x465063(0x19f)){const _0x4df2a7=_0x59e1f9[_0x465063(0x1bc)][_0x465063(0x284)];if(!_0x4df2a7)return this[_0x465063(0x1f4)](_0x59e1f9[_0x465063(0x1b9)],_0x59e1f9[_0x465063(0x25f)],{'success':![],'error':_0x465063(0x14b)},_0x59e1f9[_0x465063(0x220)]);const _0x30fea8=await getCalendarNames(this,_0x4df2a7);this['sendTo'](_0x59e1f9['from'],_0x59e1f9[_0x465063(0x25f)],{'success':!![],'names':_0x30fea8},_0x59e1f9[_0x465063(0x220)]);}else{if(_0x59e1f9['command']===_0x465063(0x25d)){const {targetId:_0x4de02a,targetValue:_0x56241e}=_0x59e1f9[_0x465063(0x1bc)];this[_0x465063(0x1b7)][_0x465063(0x11e)](_0x465063(0x24d)+_0x4de02a+_0x465063(0x25e)+_0x56241e),await this[_0x465063(0x2b0)]('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),await this[_0x465063(0x2b0)](_0x465063(0x29a),{'val':_0x465063(0x172)+_0x4de02a,'ack':!![]}),await this[_0x465063(0x2b0)]('analysis.automation.targetId',{'val':_0x4de02a,'ack':!![]}),await this[_0x465063(0x2b0)](_0x465063(0x286),{'val':_0x56241e,'ack':!![]}),this['sendTo'](_0x59e1f9[_0x465063(0x1b9)],_0x59e1f9[_0x465063(0x25f)],{'success':!![]},_0x59e1f9[_0x465063(0x220)]);}else{if(_0x59e1f9[_0x465063(0x25f)]===_0x465063(0x1ec)){const {historyId:_0x471203,rating:_0x39cbc8,comment:_0x298c05,alertReason:_0x5c8e53}=_0x59e1f9[_0x465063(0x1bc)];_0x471203&&_0x39cbc8?(await saveFeedback(this,{'timestamp':Date[_0x465063(0x29e)](),'historyId':_0x471203,'rating':_0x39cbc8,'comment':_0x298c05,'alertReason':_0x5c8e53}),this[_0x465063(0x1f4)](_0x59e1f9['from'],_0x59e1f9[_0x465063(0x25f)],{'success':!![]},_0x59e1f9[_0x465063(0x220)])):this['sendTo'](_0x59e1f9['from'],_0x59e1f9[_0x465063(0x25f)],{'success':![],'error':_0x465063(0x1df)},_0x59e1f9[_0x465063(0x220)]);}else _0x59e1f9[_0x465063(0x25f)]===_0x465063(0x1a6)&&(this[_0x465063(0x1b7)][_0x465063(0x11e)]('User\x20dismissed\x20automation\x20proposal.'),await this[_0x465063(0x2b0)](_0x465063(0x155),{'val':![],'ack':!![]}),await this[_0x465063(0x2b0)](_0x465063(0x29a),{'val':'','ack':!![]}),this[_0x465063(0x1f4)](_0x59e1f9[_0x465063(0x1b9)],_0x59e1f9['command'],{'success':!![]},_0x59e1f9[_0x465063(0x220)]));}}}}}}}}}}}if(require[a0_0x7c25f0(0x21f)]!==module)module['exports']=_0x5112a0=>new CogniLiving(_0x5112a0);else new CogniLiving();